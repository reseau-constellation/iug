import{d as K,p as Q,n as ps,க as cs,r as z,s as x,q as d,e6 as q,c as F,a as L,x as fs,h as t,w as a,b as e,V as vs,i as ms,e as js,f as _,t as g,y as M,j as O,R as E,m as gs,z as u,G as w,e7 as V,dw as c,aw as R,ac as G,ad as H,ao as bs,ap as _s,aq as Ps,H as W,I as X,J as Y,e8 as qs,P as ws,K as Vs,b3 as J}from"./index-DTXzon30.js";const xs={class:"font-weight-bold"},Ts={class:"mb-2"},Cs={class:"font-weight-bold"},Us={class:"font-weight-bold"},Ds={class:"font-weight-bold"},ys=K({__name:"ÉpinglerProjet",props:{idProjet:{}},setup(T){const l=T,n=Q(),{mdAndUp:P}=ps(),{மொழியாக்கம்_பயன்படுத்து:C}=cs(),{$மொ:p}=C(),b=z(!1),m=z(!1),j=x(n.projets.suivreÉpingleProjet,{idProjet:d(()=>l.idProjet)}),{sélection:o,dispositifs:f,spécifiques:r,valide:v,modifié:U}=q(d(()=>j.value?.base),"TOUS"),{sélection:D,dispositifs:Z,spécifiques:y,valide:h,modifié:ss}=q(d(()=>j.value?.bds.base),"TOUS"),{sélection:A,dispositifs:es,spécifiques:N,valide:is,modifié:ts}=q(d(()=>j.value?.bds.données.tableaux),"INSTALLÉ"),{sélection:B,dispositifs:as,spécifiques:S,valide:os,modifié:ls}=q(d(()=>j.value?.bds.données.fichiers),"INSTALLÉ"),ns=d(()=>v&&h&&is&&os),rs=d(()=>U.value||ss.value||ts.value||ls.value),$=z(!1),us=async()=>{if($.value=!0,f.value!=="AUCUN"){const I={type:"projet",base:f.value,bds:{type:"bd",base:Z.value,données:{tableaux:es.value,fichiers:as.value}}};await n.projets.épinglerProjet({idProjet:l.idProjet,options:I})}else await ds();k()},ds=async()=>{await n.favoris.désépinglerFavori({idObjet:l.idProjet})},k=()=>{b.value=!1,$.value=!1};return(I,s)=>(L(),F(fs,{modelValue:b.value,"onUpdate:modelValue":s[10]||(s[10]=i=>b.value=i),"max-width":t(P)?500:300},{activator:a(({props:i})=>[W(I.$slots,"activator",X(Y({props:i})))]),default:a(()=>[e(vs,null,{default:a(()=>[e(ms,null,{default:a(()=>[e(js,{class:"d-flex align-center"},{default:a(()=>[_(g(t(p)("épingler.titre"))+" ",1),e(M),e(O,{icon:"mdi-close",size:"small",variant:"flat",onClick:k})]),_:1})]),_:1}),e(E),e(gs,{style:{"overflow-y":"scroll"}},{default:a(()=>[e(w,{start:""},{default:a(()=>s[11]||(s[11]=[_("mdi-pin-outline")])),_:1}),u("span",xs,g(t(p)("épingler.dispositifsÉpingle")),1),e(V,{selection:t(o),"onUpdate:selection":s[0]||(s[0]=i=>c(o)?o.value=i:null),specifiques:t(r),"onUpdate:specifiques":s[1]||(s[1]=i=>c(r)?r.value=i:null),class:"ms-4"},null,8,["selection","specifiques"]),e(R,null,{default:a(()=>[G(u("div",null,[u("p",Ts,[u("span",null,g(t(p)("épingler.optionsAvancées")),1),e(O,{icon:m.value?"mdi-chevron-up":"mdi-chevron-down",size:"xsmall",variant:"flat",onClick:s[2]||(s[2]=()=>m.value=!m.value)},null,8,["icon"])]),e(R,null,{default:a(()=>[G(u("div",null,[e(E,{class:"mb-2"}),u("p",null,[e(w,{start:""},{default:a(()=>s[12]||(s[12]=[_("mdi-database")])),_:1}),u("span",Cs,g(t(p)("épingler.dispositifsÉpingleBds")),1)]),e(V,{selection:t(D),"onUpdate:selection":s[3]||(s[3]=i=>c(D)?D.value=i:null),specifiques:t(y),"onUpdate:specifiques":s[4]||(s[4]=i=>c(y)?y.value=i:null),class:"ms-4"},null,8,["selection","specifiques"]),u("p",null,[e(w,{start:""},{default:a(()=>s[13]||(s[13]=[_("mdi-table-multiple")])),_:1}),u("span",Us,g(t(p)("épingler.dispositifsÉpingleDonnées")),1)]),e(V,{selection:t(A),"onUpdate:selection":s[5]||(s[5]=i=>c(A)?A.value=i:null),specifiques:t(N),"onUpdate:specifiques":s[6]||(s[6]=i=>c(N)?N.value=i:null),class:"ms-4"},null,8,["selection","specifiques"]),u("p",null,[e(w,{start:""},{default:a(()=>s[14]||(s[14]=[_("mdi-image-multiple-outline")])),_:1}),u("span",Ds,g(t(p)("épingler.dispositifsÉpingleDocuments")),1)]),e(V,{selection:t(B),"onUpdate:selection":s[7]||(s[7]=i=>c(B)?B.value=i:null),specifiques:t(S),"onUpdate:specifiques":s[8]||(s[8]=i=>c(S)?S.value=i:null),class:"ms-4"},null,8,["selection","specifiques"])],512),[[H,m.value]])]),_:1})],512),[[H,t(o)!=="AUCUN"]])]),_:1})]),_:1}),e(E),e(bs,null,{default:a(()=>[e(M),e(_s,{onClick:k}),e(Ps,{actif:ns.value&&rs.value,"en-attente":$.value,onClick:s[9]||(s[9]=()=>us())},null,8,["actif","en-attente"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),Ns=K({__name:"CarteProjet",props:{id:{}},setup(T){const l=T,n=Q(),P=x(n.projets.suivreNomsProjet,{idProjet:d(()=>l.id)},{}),C=async o=>{const{àEffacer:f,àAjouter:r}=J({anciennes:P.value,nouvelles:o});for(const v of f)await n.projets.effacerNomProjet({idProjet:l.id,langue:v});await n.projets.sauvegarderNomsProjet({idProjet:l.id,noms:r})},p=x(n.projets.suivreDescriptionsProjet,{idProjet:d(()=>l.id)},{}),b=async o=>{const{àEffacer:f,àAjouter:r}=J({anciennes:p.value,nouvelles:o});for(const v of f)await n.projets.effacerDescriptionProjet({idProjet:l.id,langue:v});await n.projets.sauvegarderDescriptionsProjet({idProjet:l.id,descriptions:r})},m=x(n.réseau.suivreAuteursProjet,{idProjet:d(()=>l.id)}),j=async()=>{await n.projets.effacerProjet({idProjet:l.id})};return(o,f)=>(L(),F(qs,{id:o.id,noms:t(P),descriptions:t(p),auteurs:t(m),"fichiers-epinglables":!0,onAjusterNoms:C,onAjusterDescriptions:b,onEffacer:j},{activator:a(({props:r})=>[W(o.$slots,"activator",X(Y({props:r})))]),epingler:a(({activateur:r,epingle:v})=>[e(ys,{"id-projet":o.id},{activator:a(({props:U})=>[(L(),F(ws(r),Vs(U,{id:o.id,epingle:v}),null,16,["id","epingle"]))]),_:2},1032,["id-projet"])]),_:3},8,["id","noms","descriptions","auteurs"]))}});export{Ns as _,ys as a};
//# sourceMappingURL=CarteProjet.vue_vue_type_script_setup_true_lang-BXt6vThV.js.map
