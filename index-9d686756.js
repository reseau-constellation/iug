var Gp=Object.defineProperty;var Xp=(r,n,_)=>n in r?Gp(r,n,{enumerable:!0,configurable:!0,writable:!0,value:_}):r[n]=_;var _t=(r,n,_)=>(Xp(r,typeof n!="symbol"?n+"":n,_),_);function _mergeNamespaces(r,n){for(var _=0;_<n.length;_++){const x=n[_];if(typeof x!="string"&&!Array.isArray(x)){for(const S in x)if(S!=="default"&&!(S in r)){const E=Object.getOwnPropertyDescriptor(x,S);E&&Object.defineProperty(r,S,E.get?E:{enumerable:!0,get:()=>x[S]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))x(S);new MutationObserver(S=>{for(const E of S)if(E.type==="childList")for(const C of E.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&x(C)}).observe(document,{childList:!0,subtree:!0});function _(S){const E={};return S.integrity&&(E.integrity=S.integrity),S.referrerPolicy&&(E.referrerPolicy=S.referrerPolicy),S.crossOrigin==="use-credentials"?E.credentials="include":S.crossOrigin==="anonymous"?E.credentials="omit":E.credentials="same-origin",E}function x(S){if(S.ep)return;S.ep=!0;const E=_(S);fetch(S.href,E)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function getAugmentedNamespace(r){if(r.__esModule)return r;var n=r.default;if(typeof n=="function"){var _=function x(){return this instanceof x?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};_.prototype=n.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(r).forEach(function(x){var S=Object.getOwnPropertyDescriptor(r,x);Object.defineProperty(_,x,S.get?S:{enumerable:!0,get:function(){return r[x]}})}),_}var browser$f={exports:{}},process$1=browser$f.exports={},cachedSetTimeout$1,cachedClearTimeout$1;function defaultSetTimout$1(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout$1(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout$1=setTimeout:cachedSetTimeout$1=defaultSetTimout$1}catch{cachedSetTimeout$1=defaultSetTimout$1}try{typeof clearTimeout=="function"?cachedClearTimeout$1=clearTimeout:cachedClearTimeout$1=defaultClearTimeout$1}catch{cachedClearTimeout$1=defaultClearTimeout$1}})();function runTimeout$1(r){if(cachedSetTimeout$1===setTimeout)return setTimeout(r,0);if((cachedSetTimeout$1===defaultSetTimout$1||!cachedSetTimeout$1)&&setTimeout)return cachedSetTimeout$1=setTimeout,setTimeout(r,0);try{return cachedSetTimeout$1(r,0)}catch{try{return cachedSetTimeout$1.call(null,r,0)}catch{return cachedSetTimeout$1.call(this,r,0)}}}function runClearTimeout$1(r){if(cachedClearTimeout$1===clearTimeout)return clearTimeout(r);if((cachedClearTimeout$1===defaultClearTimeout$1||!cachedClearTimeout$1)&&clearTimeout)return cachedClearTimeout$1=clearTimeout,clearTimeout(r);try{return cachedClearTimeout$1(r)}catch{try{return cachedClearTimeout$1.call(null,r)}catch{return cachedClearTimeout$1.call(this,r)}}}var queue$2=[],draining$1=!1,currentQueue$1,queueIndex$1=-1;function cleanUpNextTick$1(){!draining$1||!currentQueue$1||(draining$1=!1,currentQueue$1.length?queue$2=currentQueue$1.concat(queue$2):queueIndex$1=-1,queue$2.length&&drainQueue$1())}function drainQueue$1(){if(!draining$1){var r=runTimeout$1(cleanUpNextTick$1);draining$1=!0;for(var n=queue$2.length;n;){for(currentQueue$1=queue$2,queue$2=[];++queueIndex$1<n;)currentQueue$1&&currentQueue$1[queueIndex$1].run();queueIndex$1=-1,n=queue$2.length}currentQueue$1=null,draining$1=!1,runClearTimeout$1(r)}}process$1.nextTick=function(r){var n=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)n[_-1]=arguments[_];queue$2.push(new Item$1(r,n)),queue$2.length===1&&!draining$1&&runTimeout$1(drainQueue$1)};function Item$1(r,n){this.fun=r,this.array=n}Item$1.prototype.run=function(){this.fun.apply(null,this.array)};process$1.title="browser";process$1.browser=!0;process$1.env={};process$1.argv=[];process$1.version="";process$1.versions={};function noop$a(){}process$1.on=noop$a;process$1.addListener=noop$a;process$1.once=noop$a;process$1.off=noop$a;process$1.removeListener=noop$a;process$1.removeAllListeners=noop$a;process$1.emit=noop$a;process$1.prependListener=noop$a;process$1.prependOnceListener=noop$a;process$1.listeners=function(r){return[]};process$1.binding=function(r){throw new Error("process.binding is not supported")};process$1.cwd=function(){return"/"};process$1.chdir=function(r){throw new Error("process.chdir is not supported")};process$1.umask=function(){return 0};var browserExports$1=browser$f.exports;const process$2=getDefaultExportFromCjs(browserExports$1);var buffer$3={},base64Js={};base64Js.byteLength=byteLength$2;base64Js.toByteArray=toByteArray$1;base64Js.fromByteArray=fromByteArray$1;var lookup$2=[],revLookup$1=[],Arr$1=typeof Uint8Array<"u"?Uint8Array:Array,code$7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code$7.length;i$1<len;++i$1)lookup$2[i$1]=code$7[i$1],revLookup$1[code$7.charCodeAt(i$1)]=i$1;revLookup$1["-".charCodeAt(0)]=62;revLookup$1["_".charCodeAt(0)]=63;function getLens(r){var n=r.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=r.indexOf("=");_===-1&&(_=n);var x=_===n?0:4-_%4;return[_,x]}function byteLength$2(r){var n=getLens(r),_=n[0],x=n[1];return(_+x)*3/4-x}function _byteLength(r,n,_){return(n+_)*3/4-_}function toByteArray$1(r){var n,_=getLens(r),x=_[0],S=_[1],E=new Arr$1(_byteLength(r,x,S)),C=0,T=S>0?x-4:x,B;for(B=0;B<T;B+=4)n=revLookup$1[r.charCodeAt(B)]<<18|revLookup$1[r.charCodeAt(B+1)]<<12|revLookup$1[r.charCodeAt(B+2)]<<6|revLookup$1[r.charCodeAt(B+3)],E[C++]=n>>16&255,E[C++]=n>>8&255,E[C++]=n&255;return S===2&&(n=revLookup$1[r.charCodeAt(B)]<<2|revLookup$1[r.charCodeAt(B+1)]>>4,E[C++]=n&255),S===1&&(n=revLookup$1[r.charCodeAt(B)]<<10|revLookup$1[r.charCodeAt(B+1)]<<4|revLookup$1[r.charCodeAt(B+2)]>>2,E[C++]=n>>8&255,E[C++]=n&255),E}function tripletToBase64$1(r){return lookup$2[r>>18&63]+lookup$2[r>>12&63]+lookup$2[r>>6&63]+lookup$2[r&63]}function encodeChunk$1(r,n,_){for(var x,S=[],E=n;E<_;E+=3)x=(r[E]<<16&16711680)+(r[E+1]<<8&65280)+(r[E+2]&255),S.push(tripletToBase64$1(x));return S.join("")}function fromByteArray$1(r){for(var n,_=r.length,x=_%3,S=[],E=16383,C=0,T=_-x;C<T;C+=E)S.push(encodeChunk$1(r,C,C+E>T?T:C+E));return x===1?(n=r[_-1],S.push(lookup$2[n>>2]+lookup$2[n<<4&63]+"==")):x===2&&(n=(r[_-2]<<8)+r[_-1],S.push(lookup$2[n>>10]+lookup$2[n>>4&63]+lookup$2[n<<2&63]+"=")),S.join("")}var ieee754$2={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754$2.read=function(r,n,_,x,S){var E,C,T=S*8-x-1,B=(1<<T)-1,A=B>>1,I=-7,N=_?S-1:0,V=_?-1:1,D=r[n+N];for(N+=V,E=D&(1<<-I)-1,D>>=-I,I+=T;I>0;E=E*256+r[n+N],N+=V,I-=8);for(C=E&(1<<-I)-1,E>>=-I,I+=x;I>0;C=C*256+r[n+N],N+=V,I-=8);if(E===0)E=1-A;else{if(E===B)return C?NaN:(D?-1:1)*(1/0);C=C+Math.pow(2,x),E=E-A}return(D?-1:1)*C*Math.pow(2,E-x)};ieee754$2.write=function(r,n,_,x,S,E){var C,T,B,A=E*8-S-1,I=(1<<A)-1,N=I>>1,V=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=x?0:E-1,O=x?1:-1,F=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(T=isNaN(n)?1:0,C=I):(C=Math.floor(Math.log(n)/Math.LN2),n*(B=Math.pow(2,-C))<1&&(C--,B*=2),C+N>=1?n+=V/B:n+=V*Math.pow(2,1-N),n*B>=2&&(C++,B/=2),C+N>=I?(T=0,C=I):C+N>=1?(T=(n*B-1)*Math.pow(2,S),C=C+N):(T=n*Math.pow(2,N-1)*Math.pow(2,S),C=0));S>=8;r[_+D]=T&255,D+=O,T/=256,S-=8);for(C=C<<S|T,A+=S;A>0;r[_+D]=C&255,D+=O,C/=256,A-=8);r[_+D-O]|=F*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const n=base64Js,_=ieee754$2,x=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=T,r.SlowBuffer=j,r.INSPECT_MAX_BYTES=50;const S=2147483647;r.kMaxLength=S,T.TYPED_ARRAY_SUPPORT=E(),!T.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function E(){try{const Oe=new Uint8Array(1),we={foo:function(){return 42}};return Object.setPrototypeOf(we,Uint8Array.prototype),Object.setPrototypeOf(Oe,we),Oe.foo()===42}catch{return!1}}Object.defineProperty(T.prototype,"parent",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.buffer}}),Object.defineProperty(T.prototype,"offset",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.byteOffset}});function C(Oe){if(Oe>S)throw new RangeError('The value "'+Oe+'" is invalid for option "size"');const we=new Uint8Array(Oe);return Object.setPrototypeOf(we,T.prototype),we}function T(Oe,we,Ce){if(typeof Oe=="number"){if(typeof we=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(Oe)}return B(Oe,we,Ce)}T.poolSize=8192;function B(Oe,we,Ce){if(typeof Oe=="string")return V(Oe,we);if(ArrayBuffer.isView(Oe))return O(Oe);if(Oe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Oe);if(Ue(Oe,ArrayBuffer)||Oe&&Ue(Oe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ue(Oe,SharedArrayBuffer)||Oe&&Ue(Oe.buffer,SharedArrayBuffer)))return F(Oe,we,Ce);if(typeof Oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ze=Oe.valueOf&&Oe.valueOf();if(ze!=null&&ze!==Oe)return T.from(ze,we,Ce);const Ze=M(Oe);if(Ze)return Ze;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Oe[Symbol.toPrimitive]=="function")return T.from(Oe[Symbol.toPrimitive]("string"),we,Ce);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Oe)}T.from=function(Oe,we,Ce){return B(Oe,we,Ce)},Object.setPrototypeOf(T.prototype,Uint8Array.prototype),Object.setPrototypeOf(T,Uint8Array);function A(Oe){if(typeof Oe!="number")throw new TypeError('"size" argument must be of type number');if(Oe<0)throw new RangeError('The value "'+Oe+'" is invalid for option "size"')}function I(Oe,we,Ce){return A(Oe),Oe<=0?C(Oe):we!==void 0?typeof Ce=="string"?C(Oe).fill(we,Ce):C(Oe).fill(we):C(Oe)}T.alloc=function(Oe,we,Ce){return I(Oe,we,Ce)};function N(Oe){return A(Oe),C(Oe<0?0:L(Oe)|0)}T.allocUnsafe=function(Oe){return N(Oe)},T.allocUnsafeSlow=function(Oe){return N(Oe)};function V(Oe,we){if((typeof we!="string"||we==="")&&(we="utf8"),!T.isEncoding(we))throw new TypeError("Unknown encoding: "+we);const Ce=q(Oe,we)|0;let ze=C(Ce);const Ze=ze.write(Oe,we);return Ze!==Ce&&(ze=ze.slice(0,Ze)),ze}function D(Oe){const we=Oe.length<0?0:L(Oe.length)|0,Ce=C(we);for(let ze=0;ze<we;ze+=1)Ce[ze]=Oe[ze]&255;return Ce}function O(Oe){if(Ue(Oe,Uint8Array)){const we=new Uint8Array(Oe);return F(we.buffer,we.byteOffset,we.byteLength)}return D(Oe)}function F(Oe,we,Ce){if(we<0||Oe.byteLength<we)throw new RangeError('"offset" is outside of buffer bounds');if(Oe.byteLength<we+(Ce||0))throw new RangeError('"length" is outside of buffer bounds');let ze;return we===void 0&&Ce===void 0?ze=new Uint8Array(Oe):Ce===void 0?ze=new Uint8Array(Oe,we):ze=new Uint8Array(Oe,we,Ce),Object.setPrototypeOf(ze,T.prototype),ze}function M(Oe){if(T.isBuffer(Oe)){const we=L(Oe.length)|0,Ce=C(we);return Ce.length===0||Oe.copy(Ce,0,0,we),Ce}if(Oe.length!==void 0)return typeof Oe.length!="number"||Ge(Oe.length)?C(0):D(Oe);if(Oe.type==="Buffer"&&Array.isArray(Oe.data))return D(Oe.data)}function L(Oe){if(Oe>=S)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return Oe|0}function j(Oe){return+Oe!=Oe&&(Oe=0),T.alloc(+Oe)}T.isBuffer=function(we){return we!=null&&we._isBuffer===!0&&we!==T.prototype},T.compare=function(we,Ce){if(Ue(we,Uint8Array)&&(we=T.from(we,we.offset,we.byteLength)),Ue(Ce,Uint8Array)&&(Ce=T.from(Ce,Ce.offset,Ce.byteLength)),!T.isBuffer(we)||!T.isBuffer(Ce))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(we===Ce)return 0;let ze=we.length,Ze=Ce.length;for(let st=0,rt=Math.min(ze,Ze);st<rt;++st)if(we[st]!==Ce[st]){ze=we[st],Ze=Ce[st];break}return ze<Ze?-1:Ze<ze?1:0},T.isEncoding=function(we){switch(String(we).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.concat=function(we,Ce){if(!Array.isArray(we))throw new TypeError('"list" argument must be an Array of Buffers');if(we.length===0)return T.alloc(0);let ze;if(Ce===void 0)for(Ce=0,ze=0;ze<we.length;++ze)Ce+=we[ze].length;const Ze=T.allocUnsafe(Ce);let st=0;for(ze=0;ze<we.length;++ze){let rt=we[ze];if(Ue(rt,Uint8Array))st+rt.length>Ze.length?(T.isBuffer(rt)||(rt=T.from(rt)),rt.copy(Ze,st)):Uint8Array.prototype.set.call(Ze,rt,st);else if(T.isBuffer(rt))rt.copy(Ze,st);else throw new TypeError('"list" argument must be an Array of Buffers');st+=rt.length}return Ze};function q(Oe,we){if(T.isBuffer(Oe))return Oe.length;if(ArrayBuffer.isView(Oe)||Ue(Oe,ArrayBuffer))return Oe.byteLength;if(typeof Oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Oe);const Ce=Oe.length,ze=arguments.length>2&&arguments[2]===!0;if(!ze&&Ce===0)return 0;let Ze=!1;for(;;)switch(we){case"ascii":case"latin1":case"binary":return Ce;case"utf8":case"utf-8":return Ve(Oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ce*2;case"hex":return Ce>>>1;case"base64":return He(Oe).length;default:if(Ze)return ze?-1:Ve(Oe).length;we=(""+we).toLowerCase(),Ze=!0}}T.byteLength=q;function H(Oe,we,Ce){let ze=!1;if((we===void 0||we<0)&&(we=0),we>this.length||((Ce===void 0||Ce>this.length)&&(Ce=this.length),Ce<=0)||(Ce>>>=0,we>>>=0,Ce<=we))return"";for(Oe||(Oe="utf8");;)switch(Oe){case"hex":return ie(this,we,Ce);case"utf8":case"utf-8":return U(this,we,Ce);case"ascii":return re(this,we,Ce);case"latin1":case"binary":return oe(this,we,Ce);case"base64":return Y(this,we,Ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,we,Ce);default:if(ze)throw new TypeError("Unknown encoding: "+Oe);Oe=(Oe+"").toLowerCase(),ze=!0}}T.prototype._isBuffer=!0;function X(Oe,we,Ce){const ze=Oe[we];Oe[we]=Oe[Ce],Oe[Ce]=ze}T.prototype.swap16=function(){const we=this.length;if(we%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Ce=0;Ce<we;Ce+=2)X(this,Ce,Ce+1);return this},T.prototype.swap32=function(){const we=this.length;if(we%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Ce=0;Ce<we;Ce+=4)X(this,Ce,Ce+3),X(this,Ce+1,Ce+2);return this},T.prototype.swap64=function(){const we=this.length;if(we%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Ce=0;Ce<we;Ce+=8)X(this,Ce,Ce+7),X(this,Ce+1,Ce+6),X(this,Ce+2,Ce+5),X(this,Ce+3,Ce+4);return this},T.prototype.toString=function(){const we=this.length;return we===0?"":arguments.length===0?U(this,0,we):H.apply(this,arguments)},T.prototype.toLocaleString=T.prototype.toString,T.prototype.equals=function(we){if(!T.isBuffer(we))throw new TypeError("Argument must be a Buffer");return this===we?!0:T.compare(this,we)===0},T.prototype.inspect=function(){let we="";const Ce=r.INSPECT_MAX_BYTES;return we=this.toString("hex",0,Ce).replace(/(.{2})/g,"$1 ").trim(),this.length>Ce&&(we+=" ... "),"<Buffer "+we+">"},x&&(T.prototype[x]=T.prototype.inspect),T.prototype.compare=function(we,Ce,ze,Ze,st){if(Ue(we,Uint8Array)&&(we=T.from(we,we.offset,we.byteLength)),!T.isBuffer(we))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof we);if(Ce===void 0&&(Ce=0),ze===void 0&&(ze=we?we.length:0),Ze===void 0&&(Ze=0),st===void 0&&(st=this.length),Ce<0||ze>we.length||Ze<0||st>this.length)throw new RangeError("out of range index");if(Ze>=st&&Ce>=ze)return 0;if(Ze>=st)return-1;if(Ce>=ze)return 1;if(Ce>>>=0,ze>>>=0,Ze>>>=0,st>>>=0,this===we)return 0;let rt=st-Ze,Ft=ze-Ce;const Vt=Math.min(rt,Ft),Et=this.slice(Ze,st),jt=we.slice(Ce,ze);for(let Lt=0;Lt<Vt;++Lt)if(Et[Lt]!==jt[Lt]){rt=Et[Lt],Ft=jt[Lt];break}return rt<Ft?-1:Ft<rt?1:0};function J(Oe,we,Ce,ze,Ze){if(Oe.length===0)return-1;if(typeof Ce=="string"?(ze=Ce,Ce=0):Ce>2147483647?Ce=2147483647:Ce<-2147483648&&(Ce=-2147483648),Ce=+Ce,Ge(Ce)&&(Ce=Ze?0:Oe.length-1),Ce<0&&(Ce=Oe.length+Ce),Ce>=Oe.length){if(Ze)return-1;Ce=Oe.length-1}else if(Ce<0)if(Ze)Ce=0;else return-1;if(typeof we=="string"&&(we=T.from(we,ze)),T.isBuffer(we))return we.length===0?-1:Z(Oe,we,Ce,ze,Ze);if(typeof we=="number")return we=we&255,typeof Uint8Array.prototype.indexOf=="function"?Ze?Uint8Array.prototype.indexOf.call(Oe,we,Ce):Uint8Array.prototype.lastIndexOf.call(Oe,we,Ce):Z(Oe,[we],Ce,ze,Ze);throw new TypeError("val must be string, number or Buffer")}function Z(Oe,we,Ce,ze,Ze){let st=1,rt=Oe.length,Ft=we.length;if(ze!==void 0&&(ze=String(ze).toLowerCase(),ze==="ucs2"||ze==="ucs-2"||ze==="utf16le"||ze==="utf-16le")){if(Oe.length<2||we.length<2)return-1;st=2,rt/=2,Ft/=2,Ce/=2}function Vt(jt,Lt){return st===1?jt[Lt]:jt.readUInt16BE(Lt*st)}let Et;if(Ze){let jt=-1;for(Et=Ce;Et<rt;Et++)if(Vt(Oe,Et)===Vt(we,jt===-1?0:Et-jt)){if(jt===-1&&(jt=Et),Et-jt+1===Ft)return jt*st}else jt!==-1&&(Et-=Et-jt),jt=-1}else for(Ce+Ft>rt&&(Ce=rt-Ft),Et=Ce;Et>=0;Et--){let jt=!0;for(let Lt=0;Lt<Ft;Lt++)if(Vt(Oe,Et+Lt)!==Vt(we,Lt)){jt=!1;break}if(jt)return Et}return-1}T.prototype.includes=function(we,Ce,ze){return this.indexOf(we,Ce,ze)!==-1},T.prototype.indexOf=function(we,Ce,ze){return J(this,we,Ce,ze,!0)},T.prototype.lastIndexOf=function(we,Ce,ze){return J(this,we,Ce,ze,!1)};function ae(Oe,we,Ce,ze){Ce=Number(Ce)||0;const Ze=Oe.length-Ce;ze?(ze=Number(ze),ze>Ze&&(ze=Ze)):ze=Ze;const st=we.length;ze>st/2&&(ze=st/2);let rt;for(rt=0;rt<ze;++rt){const Ft=parseInt(we.substr(rt*2,2),16);if(Ge(Ft))return rt;Oe[Ce+rt]=Ft}return rt}function ce(Oe,we,Ce,ze){return We(Ve(we,Oe.length-Ce),Oe,Ce,ze)}function ve(Oe,we,Ce,ze){return We(Ie(we),Oe,Ce,ze)}function pe(Oe,we,Ce,ze){return We(He(we),Oe,Ce,ze)}function G(Oe,we,Ce,ze){return We(Me(we,Oe.length-Ce),Oe,Ce,ze)}T.prototype.write=function(we,Ce,ze,Ze){if(Ce===void 0)Ze="utf8",ze=this.length,Ce=0;else if(ze===void 0&&typeof Ce=="string")Ze=Ce,ze=this.length,Ce=0;else if(isFinite(Ce))Ce=Ce>>>0,isFinite(ze)?(ze=ze>>>0,Ze===void 0&&(Ze="utf8")):(Ze=ze,ze=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const st=this.length-Ce;if((ze===void 0||ze>st)&&(ze=st),we.length>0&&(ze<0||Ce<0)||Ce>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ze||(Ze="utf8");let rt=!1;for(;;)switch(Ze){case"hex":return ae(this,we,Ce,ze);case"utf8":case"utf-8":return ce(this,we,Ce,ze);case"ascii":case"latin1":case"binary":return ve(this,we,Ce,ze);case"base64":return pe(this,we,Ce,ze);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,we,Ce,ze);default:if(rt)throw new TypeError("Unknown encoding: "+Ze);Ze=(""+Ze).toLowerCase(),rt=!0}},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(Oe,we,Ce){return we===0&&Ce===Oe.length?n.fromByteArray(Oe):n.fromByteArray(Oe.slice(we,Ce))}function U(Oe,we,Ce){Ce=Math.min(Oe.length,Ce);const ze=[];let Ze=we;for(;Ze<Ce;){const st=Oe[Ze];let rt=null,Ft=st>239?4:st>223?3:st>191?2:1;if(Ze+Ft<=Ce){let Vt,Et,jt,Lt;switch(Ft){case 1:st<128&&(rt=st);break;case 2:Vt=Oe[Ze+1],(Vt&192)===128&&(Lt=(st&31)<<6|Vt&63,Lt>127&&(rt=Lt));break;case 3:Vt=Oe[Ze+1],Et=Oe[Ze+2],(Vt&192)===128&&(Et&192)===128&&(Lt=(st&15)<<12|(Vt&63)<<6|Et&63,Lt>2047&&(Lt<55296||Lt>57343)&&(rt=Lt));break;case 4:Vt=Oe[Ze+1],Et=Oe[Ze+2],jt=Oe[Ze+3],(Vt&192)===128&&(Et&192)===128&&(jt&192)===128&&(Lt=(st&15)<<18|(Vt&63)<<12|(Et&63)<<6|jt&63,Lt>65535&&Lt<1114112&&(rt=Lt))}}rt===null?(rt=65533,Ft=1):rt>65535&&(rt-=65536,ze.push(rt>>>10&1023|55296),rt=56320|rt&1023),ze.push(rt),Ze+=Ft}return ee(ze)}const W=4096;function ee(Oe){const we=Oe.length;if(we<=W)return String.fromCharCode.apply(String,Oe);let Ce="",ze=0;for(;ze<we;)Ce+=String.fromCharCode.apply(String,Oe.slice(ze,ze+=W));return Ce}function re(Oe,we,Ce){let ze="";Ce=Math.min(Oe.length,Ce);for(let Ze=we;Ze<Ce;++Ze)ze+=String.fromCharCode(Oe[Ze]&127);return ze}function oe(Oe,we,Ce){let ze="";Ce=Math.min(Oe.length,Ce);for(let Ze=we;Ze<Ce;++Ze)ze+=String.fromCharCode(Oe[Ze]);return ze}function ie(Oe,we,Ce){const ze=Oe.length;(!we||we<0)&&(we=0),(!Ce||Ce<0||Ce>ze)&&(Ce=ze);let Ze="";for(let st=we;st<Ce;++st)Ze+=et[Oe[st]];return Ze}function ne(Oe,we,Ce){const ze=Oe.slice(we,Ce);let Ze="";for(let st=0;st<ze.length-1;st+=2)Ze+=String.fromCharCode(ze[st]+ze[st+1]*256);return Ze}T.prototype.slice=function(we,Ce){const ze=this.length;we=~~we,Ce=Ce===void 0?ze:~~Ce,we<0?(we+=ze,we<0&&(we=0)):we>ze&&(we=ze),Ce<0?(Ce+=ze,Ce<0&&(Ce=0)):Ce>ze&&(Ce=ze),Ce<we&&(Ce=we);const Ze=this.subarray(we,Ce);return Object.setPrototypeOf(Ze,T.prototype),Ze};function te(Oe,we,Ce){if(Oe%1!==0||Oe<0)throw new RangeError("offset is not uint");if(Oe+we>Ce)throw new RangeError("Trying to access beyond buffer length")}T.prototype.readUintLE=T.prototype.readUIntLE=function(we,Ce,ze){we=we>>>0,Ce=Ce>>>0,ze||te(we,Ce,this.length);let Ze=this[we],st=1,rt=0;for(;++rt<Ce&&(st*=256);)Ze+=this[we+rt]*st;return Ze},T.prototype.readUintBE=T.prototype.readUIntBE=function(we,Ce,ze){we=we>>>0,Ce=Ce>>>0,ze||te(we,Ce,this.length);let Ze=this[we+--Ce],st=1;for(;Ce>0&&(st*=256);)Ze+=this[we+--Ce]*st;return Ze},T.prototype.readUint8=T.prototype.readUInt8=function(we,Ce){return we=we>>>0,Ce||te(we,1,this.length),this[we]},T.prototype.readUint16LE=T.prototype.readUInt16LE=function(we,Ce){return we=we>>>0,Ce||te(we,2,this.length),this[we]|this[we+1]<<8},T.prototype.readUint16BE=T.prototype.readUInt16BE=function(we,Ce){return we=we>>>0,Ce||te(we,2,this.length),this[we]<<8|this[we+1]},T.prototype.readUint32LE=T.prototype.readUInt32LE=function(we,Ce){return we=we>>>0,Ce||te(we,4,this.length),(this[we]|this[we+1]<<8|this[we+2]<<16)+this[we+3]*16777216},T.prototype.readUint32BE=T.prototype.readUInt32BE=function(we,Ce){return we=we>>>0,Ce||te(we,4,this.length),this[we]*16777216+(this[we+1]<<16|this[we+2]<<8|this[we+3])},T.prototype.readBigUInt64LE=ot(function(we){we=we>>>0,xe(we,"offset");const Ce=this[we],ze=this[we+7];(Ce===void 0||ze===void 0)&&fe(we,this.length-8);const Ze=Ce+this[++we]*2**8+this[++we]*2**16+this[++we]*2**24,st=this[++we]+this[++we]*2**8+this[++we]*2**16+ze*2**24;return BigInt(Ze)+(BigInt(st)<<BigInt(32))}),T.prototype.readBigUInt64BE=ot(function(we){we=we>>>0,xe(we,"offset");const Ce=this[we],ze=this[we+7];(Ce===void 0||ze===void 0)&&fe(we,this.length-8);const Ze=Ce*2**24+this[++we]*2**16+this[++we]*2**8+this[++we],st=this[++we]*2**24+this[++we]*2**16+this[++we]*2**8+ze;return(BigInt(Ze)<<BigInt(32))+BigInt(st)}),T.prototype.readIntLE=function(we,Ce,ze){we=we>>>0,Ce=Ce>>>0,ze||te(we,Ce,this.length);let Ze=this[we],st=1,rt=0;for(;++rt<Ce&&(st*=256);)Ze+=this[we+rt]*st;return st*=128,Ze>=st&&(Ze-=Math.pow(2,8*Ce)),Ze},T.prototype.readIntBE=function(we,Ce,ze){we=we>>>0,Ce=Ce>>>0,ze||te(we,Ce,this.length);let Ze=Ce,st=1,rt=this[we+--Ze];for(;Ze>0&&(st*=256);)rt+=this[we+--Ze]*st;return st*=128,rt>=st&&(rt-=Math.pow(2,8*Ce)),rt},T.prototype.readInt8=function(we,Ce){return we=we>>>0,Ce||te(we,1,this.length),this[we]&128?(255-this[we]+1)*-1:this[we]},T.prototype.readInt16LE=function(we,Ce){we=we>>>0,Ce||te(we,2,this.length);const ze=this[we]|this[we+1]<<8;return ze&32768?ze|4294901760:ze},T.prototype.readInt16BE=function(we,Ce){we=we>>>0,Ce||te(we,2,this.length);const ze=this[we+1]|this[we]<<8;return ze&32768?ze|4294901760:ze},T.prototype.readInt32LE=function(we,Ce){return we=we>>>0,Ce||te(we,4,this.length),this[we]|this[we+1]<<8|this[we+2]<<16|this[we+3]<<24},T.prototype.readInt32BE=function(we,Ce){return we=we>>>0,Ce||te(we,4,this.length),this[we]<<24|this[we+1]<<16|this[we+2]<<8|this[we+3]},T.prototype.readBigInt64LE=ot(function(we){we=we>>>0,xe(we,"offset");const Ce=this[we],ze=this[we+7];(Ce===void 0||ze===void 0)&&fe(we,this.length-8);const Ze=this[we+4]+this[we+5]*2**8+this[we+6]*2**16+(ze<<24);return(BigInt(Ze)<<BigInt(32))+BigInt(Ce+this[++we]*2**8+this[++we]*2**16+this[++we]*2**24)}),T.prototype.readBigInt64BE=ot(function(we){we=we>>>0,xe(we,"offset");const Ce=this[we],ze=this[we+7];(Ce===void 0||ze===void 0)&&fe(we,this.length-8);const Ze=(Ce<<24)+this[++we]*2**16+this[++we]*2**8+this[++we];return(BigInt(Ze)<<BigInt(32))+BigInt(this[++we]*2**24+this[++we]*2**16+this[++we]*2**8+ze)}),T.prototype.readFloatLE=function(we,Ce){return we=we>>>0,Ce||te(we,4,this.length),_.read(this,we,!0,23,4)},T.prototype.readFloatBE=function(we,Ce){return we=we>>>0,Ce||te(we,4,this.length),_.read(this,we,!1,23,4)},T.prototype.readDoubleLE=function(we,Ce){return we=we>>>0,Ce||te(we,8,this.length),_.read(this,we,!0,52,8)},T.prototype.readDoubleBE=function(we,Ce){return we=we>>>0,Ce||te(we,8,this.length),_.read(this,we,!1,52,8)};function K(Oe,we,Ce,ze,Ze,st){if(!T.isBuffer(Oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(we>Ze||we<st)throw new RangeError('"value" argument is out of bounds');if(Ce+ze>Oe.length)throw new RangeError("Index out of range")}T.prototype.writeUintLE=T.prototype.writeUIntLE=function(we,Ce,ze,Ze){if(we=+we,Ce=Ce>>>0,ze=ze>>>0,!Ze){const Ft=Math.pow(2,8*ze)-1;K(this,we,Ce,ze,Ft,0)}let st=1,rt=0;for(this[Ce]=we&255;++rt<ze&&(st*=256);)this[Ce+rt]=we/st&255;return Ce+ze},T.prototype.writeUintBE=T.prototype.writeUIntBE=function(we,Ce,ze,Ze){if(we=+we,Ce=Ce>>>0,ze=ze>>>0,!Ze){const Ft=Math.pow(2,8*ze)-1;K(this,we,Ce,ze,Ft,0)}let st=ze-1,rt=1;for(this[Ce+st]=we&255;--st>=0&&(rt*=256);)this[Ce+st]=we/rt&255;return Ce+ze},T.prototype.writeUint8=T.prototype.writeUInt8=function(we,Ce,ze){return we=+we,Ce=Ce>>>0,ze||K(this,we,Ce,1,255,0),this[Ce]=we&255,Ce+1},T.prototype.writeUint16LE=T.prototype.writeUInt16LE=function(we,Ce,ze){return we=+we,Ce=Ce>>>0,ze||K(this,we,Ce,2,65535,0),this[Ce]=we&255,this[Ce+1]=we>>>8,Ce+2},T.prototype.writeUint16BE=T.prototype.writeUInt16BE=function(we,Ce,ze){return we=+we,Ce=Ce>>>0,ze||K(this,we,Ce,2,65535,0),this[Ce]=we>>>8,this[Ce+1]=we&255,Ce+2},T.prototype.writeUint32LE=T.prototype.writeUInt32LE=function(we,Ce,ze){return we=+we,Ce=Ce>>>0,ze||K(this,we,Ce,4,4294967295,0),this[Ce+3]=we>>>24,this[Ce+2]=we>>>16,this[Ce+1]=we>>>8,this[Ce]=we&255,Ce+4},T.prototype.writeUint32BE=T.prototype.writeUInt32BE=function(we,Ce,ze){return we=+we,Ce=Ce>>>0,ze||K(this,we,Ce,4,4294967295,0),this[Ce]=we>>>24,this[Ce+1]=we>>>16,this[Ce+2]=we>>>8,this[Ce+3]=we&255,Ce+4};function le(Oe,we,Ce,ze,Ze){he(we,ze,Ze,Oe,Ce,7);let st=Number(we&BigInt(4294967295));Oe[Ce++]=st,st=st>>8,Oe[Ce++]=st,st=st>>8,Oe[Ce++]=st,st=st>>8,Oe[Ce++]=st;let rt=Number(we>>BigInt(32)&BigInt(4294967295));return Oe[Ce++]=rt,rt=rt>>8,Oe[Ce++]=rt,rt=rt>>8,Oe[Ce++]=rt,rt=rt>>8,Oe[Ce++]=rt,Ce}function ue(Oe,we,Ce,ze,Ze){he(we,ze,Ze,Oe,Ce,7);let st=Number(we&BigInt(4294967295));Oe[Ce+7]=st,st=st>>8,Oe[Ce+6]=st,st=st>>8,Oe[Ce+5]=st,st=st>>8,Oe[Ce+4]=st;let rt=Number(we>>BigInt(32)&BigInt(4294967295));return Oe[Ce+3]=rt,rt=rt>>8,Oe[Ce+2]=rt,rt=rt>>8,Oe[Ce+1]=rt,rt=rt>>8,Oe[Ce]=rt,Ce+8}T.prototype.writeBigUInt64LE=ot(function(we,Ce=0){return le(this,we,Ce,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeBigUInt64BE=ot(function(we,Ce=0){return ue(this,we,Ce,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeIntLE=function(we,Ce,ze,Ze){if(we=+we,Ce=Ce>>>0,!Ze){const Vt=Math.pow(2,8*ze-1);K(this,we,Ce,ze,Vt-1,-Vt)}let st=0,rt=1,Ft=0;for(this[Ce]=we&255;++st<ze&&(rt*=256);)we<0&&Ft===0&&this[Ce+st-1]!==0&&(Ft=1),this[Ce+st]=(we/rt>>0)-Ft&255;return Ce+ze},T.prototype.writeIntBE=function(we,Ce,ze,Ze){if(we=+we,Ce=Ce>>>0,!Ze){const Vt=Math.pow(2,8*ze-1);K(this,we,Ce,ze,Vt-1,-Vt)}let st=ze-1,rt=1,Ft=0;for(this[Ce+st]=we&255;--st>=0&&(rt*=256);)we<0&&Ft===0&&this[Ce+st+1]!==0&&(Ft=1),this[Ce+st]=(we/rt>>0)-Ft&255;return Ce+ze},T.prototype.writeInt8=function(we,Ce,ze){return we=+we,Ce=Ce>>>0,ze||K(this,we,Ce,1,127,-128),we<0&&(we=255+we+1),this[Ce]=we&255,Ce+1},T.prototype.writeInt16LE=function(we,Ce,ze){return we=+we,Ce=Ce>>>0,ze||K(this,we,Ce,2,32767,-32768),this[Ce]=we&255,this[Ce+1]=we>>>8,Ce+2},T.prototype.writeInt16BE=function(we,Ce,ze){return we=+we,Ce=Ce>>>0,ze||K(this,we,Ce,2,32767,-32768),this[Ce]=we>>>8,this[Ce+1]=we&255,Ce+2},T.prototype.writeInt32LE=function(we,Ce,ze){return we=+we,Ce=Ce>>>0,ze||K(this,we,Ce,4,2147483647,-2147483648),this[Ce]=we&255,this[Ce+1]=we>>>8,this[Ce+2]=we>>>16,this[Ce+3]=we>>>24,Ce+4},T.prototype.writeInt32BE=function(we,Ce,ze){return we=+we,Ce=Ce>>>0,ze||K(this,we,Ce,4,2147483647,-2147483648),we<0&&(we=4294967295+we+1),this[Ce]=we>>>24,this[Ce+1]=we>>>16,this[Ce+2]=we>>>8,this[Ce+3]=we&255,Ce+4},T.prototype.writeBigInt64LE=ot(function(we,Ce=0){return le(this,we,Ce,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),T.prototype.writeBigInt64BE=ot(function(we,Ce=0){return ue(this,we,Ce,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function be(Oe,we,Ce,ze,Ze,st){if(Ce+ze>Oe.length)throw new RangeError("Index out of range");if(Ce<0)throw new RangeError("Index out of range")}function ge(Oe,we,Ce,ze,Ze){return we=+we,Ce=Ce>>>0,Ze||be(Oe,we,Ce,4),_.write(Oe,we,Ce,ze,23,4),Ce+4}T.prototype.writeFloatLE=function(we,Ce,ze){return ge(this,we,Ce,!0,ze)},T.prototype.writeFloatBE=function(we,Ce,ze){return ge(this,we,Ce,!1,ze)};function ye(Oe,we,Ce,ze,Ze){return we=+we,Ce=Ce>>>0,Ze||be(Oe,we,Ce,8),_.write(Oe,we,Ce,ze,52,8),Ce+8}T.prototype.writeDoubleLE=function(we,Ce,ze){return ye(this,we,Ce,!0,ze)},T.prototype.writeDoubleBE=function(we,Ce,ze){return ye(this,we,Ce,!1,ze)},T.prototype.copy=function(we,Ce,ze,Ze){if(!T.isBuffer(we))throw new TypeError("argument should be a Buffer");if(ze||(ze=0),!Ze&&Ze!==0&&(Ze=this.length),Ce>=we.length&&(Ce=we.length),Ce||(Ce=0),Ze>0&&Ze<ze&&(Ze=ze),Ze===ze||we.length===0||this.length===0)return 0;if(Ce<0)throw new RangeError("targetStart out of bounds");if(ze<0||ze>=this.length)throw new RangeError("Index out of range");if(Ze<0)throw new RangeError("sourceEnd out of bounds");Ze>this.length&&(Ze=this.length),we.length-Ce<Ze-ze&&(Ze=we.length-Ce+ze);const st=Ze-ze;return this===we&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Ce,ze,Ze):Uint8Array.prototype.set.call(we,this.subarray(ze,Ze),Ce),st},T.prototype.fill=function(we,Ce,ze,Ze){if(typeof we=="string"){if(typeof Ce=="string"?(Ze=Ce,Ce=0,ze=this.length):typeof ze=="string"&&(Ze=ze,ze=this.length),Ze!==void 0&&typeof Ze!="string")throw new TypeError("encoding must be a string");if(typeof Ze=="string"&&!T.isEncoding(Ze))throw new TypeError("Unknown encoding: "+Ze);if(we.length===1){const rt=we.charCodeAt(0);(Ze==="utf8"&&rt<128||Ze==="latin1")&&(we=rt)}}else typeof we=="number"?we=we&255:typeof we=="boolean"&&(we=Number(we));if(Ce<0||this.length<Ce||this.length<ze)throw new RangeError("Out of range index");if(ze<=Ce)return this;Ce=Ce>>>0,ze=ze===void 0?this.length:ze>>>0,we||(we=0);let st;if(typeof we=="number")for(st=Ce;st<ze;++st)this[st]=we;else{const rt=T.isBuffer(we)?we:T.from(we,Ze),Ft=rt.length;if(Ft===0)throw new TypeError('The value "'+we+'" is invalid for argument "value"');for(st=0;st<ze-Ce;++st)this[st+Ce]=rt[st%Ft]}return this};const Ee={};function Re(Oe,we,Ce){Ee[Oe]=class extends Ce{constructor(){super(),Object.defineProperty(this,"message",{value:we.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Oe}]`,this.stack,delete this.name}get code(){return Oe}set code(Ze){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ze,writable:!0})}toString(){return`${this.name} [${Oe}]: ${this.message}`}}}Re("ERR_BUFFER_OUT_OF_BOUNDS",function(Oe){return Oe?`${Oe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Re("ERR_INVALID_ARG_TYPE",function(Oe,we){return`The "${Oe}" argument must be of type number. Received type ${typeof we}`},TypeError),Re("ERR_OUT_OF_RANGE",function(Oe,we,Ce){let ze=`The value of "${Oe}" is out of range.`,Ze=Ce;return Number.isInteger(Ce)&&Math.abs(Ce)>2**32?Ze=Ne(String(Ce)):typeof Ce=="bigint"&&(Ze=String(Ce),(Ce>BigInt(2)**BigInt(32)||Ce<-(BigInt(2)**BigInt(32)))&&(Ze=Ne(Ze)),Ze+="n"),ze+=` It must be ${we}. Received ${Ze}`,ze},RangeError);function Ne(Oe){let we="",Ce=Oe.length;const ze=Oe[0]==="-"?1:0;for(;Ce>=ze+4;Ce-=3)we=`_${Oe.slice(Ce-3,Ce)}${we}`;return`${Oe.slice(0,Ce)}${we}`}function Te(Oe,we,Ce){xe(we,"offset"),(Oe[we]===void 0||Oe[we+Ce]===void 0)&&fe(we,Oe.length-(Ce+1))}function he(Oe,we,Ce,ze,Ze,st){if(Oe>Ce||Oe<we){const rt=typeof we=="bigint"?"n":"";let Ft;throw st>3?we===0||we===BigInt(0)?Ft=`>= 0${rt} and < 2${rt} ** ${(st+1)*8}${rt}`:Ft=`>= -(2${rt} ** ${(st+1)*8-1}${rt}) and < 2 ** ${(st+1)*8-1}${rt}`:Ft=`>= ${we}${rt} and <= ${Ce}${rt}`,new Ee.ERR_OUT_OF_RANGE("value",Ft,Oe)}Te(ze,Ze,st)}function xe(Oe,we){if(typeof Oe!="number")throw new Ee.ERR_INVALID_ARG_TYPE(we,"number",Oe)}function fe(Oe,we,Ce){throw Math.floor(Oe)!==Oe?(xe(Oe,Ce),new Ee.ERR_OUT_OF_RANGE(Ce||"offset","an integer",Oe)):we<0?new Ee.ERR_BUFFER_OUT_OF_BOUNDS:new Ee.ERR_OUT_OF_RANGE(Ce||"offset",`>= ${Ce?1:0} and <= ${we}`,Oe)}const Be=/[^+/0-9A-Za-z-_]/g;function Le(Oe){if(Oe=Oe.split("=")[0],Oe=Oe.trim().replace(Be,""),Oe.length<2)return"";for(;Oe.length%4!==0;)Oe=Oe+"=";return Oe}function Ve(Oe,we){we=we||1/0;let Ce;const ze=Oe.length;let Ze=null;const st=[];for(let rt=0;rt<ze;++rt){if(Ce=Oe.charCodeAt(rt),Ce>55295&&Ce<57344){if(!Ze){if(Ce>56319){(we-=3)>-1&&st.push(239,191,189);continue}else if(rt+1===ze){(we-=3)>-1&&st.push(239,191,189);continue}Ze=Ce;continue}if(Ce<56320){(we-=3)>-1&&st.push(239,191,189),Ze=Ce;continue}Ce=(Ze-55296<<10|Ce-56320)+65536}else Ze&&(we-=3)>-1&&st.push(239,191,189);if(Ze=null,Ce<128){if((we-=1)<0)break;st.push(Ce)}else if(Ce<2048){if((we-=2)<0)break;st.push(Ce>>6|192,Ce&63|128)}else if(Ce<65536){if((we-=3)<0)break;st.push(Ce>>12|224,Ce>>6&63|128,Ce&63|128)}else if(Ce<1114112){if((we-=4)<0)break;st.push(Ce>>18|240,Ce>>12&63|128,Ce>>6&63|128,Ce&63|128)}else throw new Error("Invalid code point")}return st}function Ie(Oe){const we=[];for(let Ce=0;Ce<Oe.length;++Ce)we.push(Oe.charCodeAt(Ce)&255);return we}function Me(Oe,we){let Ce,ze,Ze;const st=[];for(let rt=0;rt<Oe.length&&!((we-=2)<0);++rt)Ce=Oe.charCodeAt(rt),ze=Ce>>8,Ze=Ce%256,st.push(Ze),st.push(ze);return st}function He(Oe){return n.toByteArray(Le(Oe))}function We(Oe,we,Ce,ze){let Ze;for(Ze=0;Ze<ze&&!(Ze+Ce>=we.length||Ze>=Oe.length);++Ze)we[Ze+Ce]=Oe[Ze];return Ze}function Ue(Oe,we){return Oe instanceof we||Oe!=null&&Oe.constructor!=null&&Oe.constructor.name!=null&&Oe.constructor.name===we.name}function Ge(Oe){return Oe!==Oe}const et=function(){const Oe="0123456789abcdef",we=new Array(256);for(let Ce=0;Ce<16;++Ce){const ze=Ce*16;for(let Ze=0;Ze<16;++Ze)we[ze+Ze]=Oe[Ce]+Oe[Ze]}return we}();function ot(Oe){return typeof BigInt>"u"?ht:Oe}function ht(){throw new Error("BigInt not supported")}})(buffer$3);window.Buffer=buffer$3.Buffer;window.process=process$2;const global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function makeMap(r,n){const _=Object.create(null),x=r.split(",");for(let S=0;S<x.length;S++)_[x[S]]=!0;return n?S=>!!_[S.toLowerCase()]:S=>!!_[S]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE$1=/^on[^a-z]/,isOn$1=r=>onRE$1.test(r),isModelListener=r=>r.startsWith("onUpdate:"),extend$2=Object.assign,remove=(r,n)=>{const _=r.indexOf(n);_>-1&&r.splice(_,1)},hasOwnProperty$6=Object.prototype.hasOwnProperty,hasOwn$3=(r,n)=>hasOwnProperty$6.call(r,n),isArray$9=Array.isArray,isMap$4=r=>toTypeString$1(r)==="[object Map]",isSet$4=r=>toTypeString$1(r)==="[object Set]",isFunction$4=r=>typeof r=="function",isString$7=r=>typeof r=="string",isSymbol$3=r=>typeof r=="symbol",isObject$5=r=>r!==null&&typeof r=="object",isPromise=r=>isObject$5(r)&&isFunction$4(r.then)&&isFunction$4(r.catch),objectToString$2=Object.prototype.toString,toTypeString$1=r=>objectToString$2.call(r),toRawType=r=>toTypeString$1(r).slice(8,-1),isPlainObject$4=r=>toTypeString$1(r)==="[object Object]",isIntegerKey=r=>isString$7(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=r=>{const n=Object.create(null);return _=>n[_]||(n[_]=r(_))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(r=>r.replace(camelizeRE,(n,_)=>_?_.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(r=>r.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(r=>r.charAt(0).toUpperCase()+r.slice(1)),toHandlerKey=cacheStringFunction(r=>r?`on${capitalize$1(r)}`:""),hasChanged=(r,n)=>!Object.is(r,n),invokeArrayFns=(r,n)=>{for(let _=0;_<r.length;_++)r[_](n)},def$t=(r,n,_)=>{Object.defineProperty(r,n,{configurable:!0,enumerable:!1,value:_})},looseToNumber=r=>{const n=parseFloat(r);return isNaN(n)?r:n},toNumber=r=>{const n=isString$7(r)?Number(r):NaN;return isNaN(n)?r:n};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global$1<"u"?global$1:{});function normalizeStyle(r){if(isArray$9(r)){const n={};for(let _=0;_<r.length;_++){const x=r[_],S=isString$7(x)?parseStringStyle(x):normalizeStyle(x);if(S)for(const E in S)n[E]=S[E]}return n}else{if(isString$7(r))return r;if(isObject$5(r))return r}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(r){const n={};return r.replace(styleCommentRE,"").split(listDelimiterRE).forEach(_=>{if(_){const x=_.split(propertyDelimiterRE);x.length>1&&(n[x[0].trim()]=x[1].trim())}}),n}function normalizeClass(r){let n="";if(isString$7(r))n=r;else if(isArray$9(r))for(let _=0;_<r.length;_++){const x=normalizeClass(r[_]);x&&(n+=x+" ")}else if(isObject$5(r))for(const _ in r)r[_]&&(n+=_+" ");return n.trim()}function normalizeProps(r){if(!r)return null;let{class:n,style:_}=r;return n&&!isString$7(n)&&(r.class=normalizeClass(n)),_&&(r.style=normalizeStyle(_)),r}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(r){return!!r||r===""}const toDisplayString$1=r=>isString$7(r)?r:r==null?"":isArray$9(r)||isObject$5(r)&&(r.toString===objectToString$2||!isFunction$4(r.toString))?JSON.stringify(r,replacer,2):String(r),replacer=(r,n)=>n&&n.__v_isRef?replacer(r,n.value):isMap$4(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((_,[x,S])=>(_[`${x} =>`]=S,_),{})}:isSet$4(n)?{[`Set(${n.size})`]:[...n.values()]}:isObject$5(n)&&!isArray$9(n)&&!isPlainObject$4(n)?String(n):n;let activeEffectScope;class EffectScope{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!n&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const _=activeEffectScope;try{return activeEffectScope=this,n()}finally{activeEffectScope=_}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(n){if(this._active){let _,x;for(_=0,x=this.effects.length;_<x;_++)this.effects[_].stop();for(_=0,x=this.cleanups.length;_<x;_++)this.cleanups[_]();if(this.scopes)for(_=0,x=this.scopes.length;_<x;_++)this.scopes[_].stop(!0);if(!this.detached&&this.parent&&!n){const S=this.parent.scopes.pop();S&&S!==this&&(this.parent.scopes[this.index]=S,S.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(r){return new EffectScope(r)}function recordEffectScope(r,n=activeEffectScope){n&&n.active&&n.effects.push(r)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(r){activeEffectScope&&activeEffectScope.cleanups.push(r)}const createDep=r=>{const n=new Set(r);return n.w=0,n.n=0,n},wasTracked=r=>(r.w&trackOpBit)>0,newTracked=r=>(r.n&trackOpBit)>0,initDepMarkers=({deps:r})=>{if(r.length)for(let n=0;n<r.length;n++)r[n].w|=trackOpBit},finalizeDepMarkers=r=>{const{deps:n}=r;if(n.length){let _=0;for(let x=0;x<n.length;x++){const S=n[x];wasTracked(S)&&!newTracked(S)?S.delete(r):n[_++]=S,S.w&=~trackOpBit,S.n&=~trackOpBit}n.length=_}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(n,_=null,x){this.fn=n,this.scheduler=_,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,x)}run(){if(!this.active)return this.fn();let n=activeEffect,_=shouldTrack;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=_,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(r){const{deps:n}=r;if(n.length){for(let _=0;_<n.length;_++)n[_].delete(r);n.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const r=trackStack.pop();shouldTrack=r===void 0?!0:r}function track(r,n,_){if(shouldTrack&&activeEffect){let x=targetMap.get(r);x||targetMap.set(r,x=new Map);let S=x.get(_);S||x.set(_,S=createDep()),trackEffects(S)}}function trackEffects(r,n){let _=!1;effectTrackDepth<=maxMarkerBits?newTracked(r)||(r.n|=trackOpBit,_=!wasTracked(r)):_=!r.has(activeEffect),_&&(r.add(activeEffect),activeEffect.deps.push(r))}function trigger(r,n,_,x,S,E){const C=targetMap.get(r);if(!C)return;let T=[];if(n==="clear")T=[...C.values()];else if(_==="length"&&isArray$9(r)){const B=Number(x);C.forEach((A,I)=>{(I==="length"||I>=B)&&T.push(A)})}else switch(_!==void 0&&T.push(C.get(_)),n){case"add":isArray$9(r)?isIntegerKey(_)&&T.push(C.get("length")):(T.push(C.get(ITERATE_KEY)),isMap$4(r)&&T.push(C.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$9(r)||(T.push(C.get(ITERATE_KEY)),isMap$4(r)&&T.push(C.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$4(r)&&T.push(C.get(ITERATE_KEY));break}if(T.length===1)T[0]&&triggerEffects(T[0]);else{const B=[];for(const A of T)A&&B.push(...A);triggerEffects(createDep(B))}}function triggerEffects(r,n){const _=isArray$9(r)?r:[...r];for(const x of _)x.computed&&triggerEffect(x);for(const x of _)x.computed||triggerEffect(x)}function triggerEffect(r,n){(r!==activeEffect||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}function getDepFromReactive(r,n){var _;return(_=targetMap.get(r))==null?void 0:_.get(n)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(isSymbol$3)),get$1$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const r={};return["includes","indexOf","lastIndexOf"].forEach(n=>{r[n]=function(..._){const x=toRaw(this);for(let E=0,C=this.length;E<C;E++)track(x,"get",E+"");const S=x[n](..._);return S===-1||S===!1?x[n](..._.map(toRaw)):S}}),["push","pop","shift","unshift","splice"].forEach(n=>{r[n]=function(..._){pauseTracking();const x=toRaw(this)[n].apply(this,_);return resetTracking(),x}}),r}function hasOwnProperty$5(r){const n=toRaw(this);return track(n,"has",r),n.hasOwnProperty(r)}function createGetter(r=!1,n=!1){return function(x,S,E){if(S==="__v_isReactive")return!r;if(S==="__v_isReadonly")return r;if(S==="__v_isShallow")return n;if(S==="__v_raw"&&E===(r?n?shallowReadonlyMap:readonlyMap:n?shallowReactiveMap:reactiveMap).get(x))return x;const C=isArray$9(x);if(!r){if(C&&hasOwn$3(arrayInstrumentations,S))return Reflect.get(arrayInstrumentations,S,E);if(S==="hasOwnProperty")return hasOwnProperty$5}const T=Reflect.get(x,S,E);return(isSymbol$3(S)?builtInSymbols.has(S):isNonTrackableKeys(S))||(r||track(x,"get",S),n)?T:isRef(T)?C&&isIntegerKey(S)?T:T.value:isObject$5(T)?r?readonly$3(T):reactive(T):T}}const set$1$1=createSetter(),shallowSet=createSetter(!0);function createSetter(r=!1){return function(_,x,S,E){let C=_[x];if(isReadonly(C)&&isRef(C)&&!isRef(S))return!1;if(!r&&(!isShallow(S)&&!isReadonly(S)&&(C=toRaw(C),S=toRaw(S)),!isArray$9(_)&&isRef(C)&&!isRef(S)))return C.value=S,!0;const T=isArray$9(_)&&isIntegerKey(x)?Number(x)<_.length:hasOwn$3(_,x),B=Reflect.set(_,x,S,E);return _===toRaw(E)&&(T?hasChanged(S,C)&&trigger(_,"set",x,S):trigger(_,"add",x,S)),B}}function deleteProperty(r,n){const _=hasOwn$3(r,n);r[n];const x=Reflect.deleteProperty(r,n);return x&&_&&trigger(r,"delete",n,void 0),x}function has$1$1(r,n){const _=Reflect.has(r,n);return(!isSymbol$3(n)||!builtInSymbols.has(n))&&track(r,"has",n),_}function ownKeys(r){return track(r,"iterate",isArray$9(r)?"length":ITERATE_KEY),Reflect.ownKeys(r)}const mutableHandlers={get:get$1$1,set:set$1$1,deleteProperty,has:has$1$1,ownKeys},readonlyHandlers={get:readonlyGet,set(r,n){return!0},deleteProperty(r,n){return!0}},shallowReactiveHandlers=extend$2({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=r=>r,getProto$3=r=>Reflect.getPrototypeOf(r);function get$4(r,n,_=!1,x=!1){r=r.__v_raw;const S=toRaw(r),E=toRaw(n);_||(n!==E&&track(S,"get",n),track(S,"get",E));const{has:C}=getProto$3(S),T=x?toShallow:_?toReadonly:toReactive;if(C.call(S,n))return T(r.get(n));if(C.call(S,E))return T(r.get(E));r!==S&&r.get(n)}function has$4(r,n=!1){const _=this.__v_raw,x=toRaw(_),S=toRaw(r);return n||(r!==S&&track(x,"has",r),track(x,"has",S)),r===S?_.has(r):_.has(r)||_.has(S)}function size(r,n=!1){return r=r.__v_raw,!n&&track(toRaw(r),"iterate",ITERATE_KEY),Reflect.get(r,"size",r)}function add$2(r){r=toRaw(r);const n=toRaw(this);return getProto$3(n).has.call(n,r)||(n.add(r),trigger(n,"add",r,r)),this}function set$2(r,n){n=toRaw(n);const _=toRaw(this),{has:x,get:S}=getProto$3(_);let E=x.call(_,r);E||(r=toRaw(r),E=x.call(_,r));const C=S.call(_,r);return _.set(r,n),E?hasChanged(n,C)&&trigger(_,"set",r,n):trigger(_,"add",r,n),this}function deleteEntry(r){const n=toRaw(this),{has:_,get:x}=getProto$3(n);let S=_.call(n,r);S||(r=toRaw(r),S=_.call(n,r)),x&&x.call(n,r);const E=n.delete(r);return S&&trigger(n,"delete",r,void 0),E}function clear$2(){const r=toRaw(this),n=r.size!==0,_=r.clear();return n&&trigger(r,"clear",void 0,void 0),_}function createForEach(r,n){return function(x,S){const E=this,C=E.__v_raw,T=toRaw(C),B=n?toShallow:r?toReadonly:toReactive;return!r&&track(T,"iterate",ITERATE_KEY),C.forEach((A,I)=>x.call(S,B(A),B(I),E))}}function createIterableMethod(r,n,_){return function(...x){const S=this.__v_raw,E=toRaw(S),C=isMap$4(E),T=r==="entries"||r===Symbol.iterator&&C,B=r==="keys"&&C,A=S[r](...x),I=_?toShallow:n?toReadonly:toReactive;return!n&&track(E,"iterate",B?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:N,done:V}=A.next();return V?{value:N,done:V}:{value:T?[I(N[0]),I(N[1])]:I(N),done:V}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(r){return function(...n){return r==="delete"?!1:this}}function createInstrumentations(){const r={get(E){return get$4(this,E)},get size(){return size(this)},has:has$4,add:add$2,set:set$2,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!1)},n={get(E){return get$4(this,E,!1,!0)},get size(){return size(this)},has:has$4,add:add$2,set:set$2,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!0)},_={get(E){return get$4(this,E,!0)},get size(){return size(this,!0)},has(E){return has$4.call(this,E,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},x={get(E){return get$4(this,E,!0,!0)},get size(){return size(this,!0)},has(E){return has$4.call(this,E,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(E=>{r[E]=createIterableMethod(E,!1,!1),_[E]=createIterableMethod(E,!0,!1),n[E]=createIterableMethod(E,!1,!0),x[E]=createIterableMethod(E,!0,!0)}),[r,_,n,x]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(r,n){const _=n?r?shallowReadonlyInstrumentations:shallowInstrumentations:r?readonlyInstrumentations:mutableInstrumentations;return(x,S,E)=>S==="__v_isReactive"?!r:S==="__v_isReadonly"?r:S==="__v_raw"?x:Reflect.get(hasOwn$3(_,S)&&S in x?_:x,S,E)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(r){return r.__v_skip||!Object.isExtensible(r)?0:targetTypeMap(toRawType(r))}function reactive(r){return isReadonly(r)?r:createReactiveObject(r,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(r){return createReactiveObject(r,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly$3(r){return createReactiveObject(r,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(r,n,_,x,S){if(!isObject$5(r)||r.__v_raw&&!(n&&r.__v_isReactive))return r;const E=S.get(r);if(E)return E;const C=getTargetType(r);if(C===0)return r;const T=new Proxy(r,C===2?x:_);return S.set(r,T),T}function isReactive(r){return isReadonly(r)?isReactive(r.__v_raw):!!(r&&r.__v_isReactive)}function isReadonly(r){return!!(r&&r.__v_isReadonly)}function isShallow(r){return!!(r&&r.__v_isShallow)}function isProxy(r){return isReactive(r)||isReadonly(r)}function toRaw(r){const n=r&&r.__v_raw;return n?toRaw(n):r}function markRaw(r){return def$t(r,"__v_skip",!0),r}const toReactive=r=>isObject$5(r)?reactive(r):r,toReadonly=r=>isObject$5(r)?readonly$3(r):r;function trackRefValue(r){shouldTrack&&activeEffect&&(r=toRaw(r),trackEffects(r.dep||(r.dep=createDep())))}function triggerRefValue(r,n){r=toRaw(r);const _=r.dep;_&&triggerEffects(_)}function isRef(r){return!!(r&&r.__v_isRef===!0)}function ref$1(r){return createRef(r,!1)}function shallowRef(r){return createRef(r,!0)}function createRef(r,n){return isRef(r)?r:new RefImpl(r,n)}class RefImpl{constructor(n,_){this.__v_isShallow=_,this.dep=void 0,this.__v_isRef=!0,this._rawValue=_?n:toRaw(n),this._value=_?n:toReactive(n)}get value(){return trackRefValue(this),this._value}set value(n){const _=this.__v_isShallow||isShallow(n)||isReadonly(n);n=_?n:toRaw(n),hasChanged(n,this._rawValue)&&(this._rawValue=n,this._value=_?n:toReactive(n),triggerRefValue(this))}}function unref(r){return isRef(r)?r.value:r}const shallowUnwrapHandlers={get:(r,n,_)=>unref(Reflect.get(r,n,_)),set:(r,n,_,x)=>{const S=r[n];return isRef(S)&&!isRef(_)?(S.value=_,!0):Reflect.set(r,n,_,x)}};function proxyRefs(r){return isReactive(r)?r:new Proxy(r,shallowUnwrapHandlers)}function toRefs(r){const n=isArray$9(r)?new Array(r.length):{};for(const _ in r)n[_]=propertyToRef(r,_);return n}class ObjectRefImpl{constructor(n,_,x){this._object=n,this._key=_,this._defaultValue=x,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(r,n,_){return isRef(r)?r:isFunction$4(r)?new GetterRefImpl(r):isObject$5(r)&&arguments.length>1?propertyToRef(r,n,_):ref$1(r)}function propertyToRef(r,n,_){const x=r[n];return isRef(x)?x:new ObjectRefImpl(r,n,_)}class ComputedRefImpl{constructor(n,_,x,S){this._setter=_,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(n,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!S,this.__v_isReadonly=x}get value(){const n=toRaw(this);return trackRefValue(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function computed$1(r,n,_=!1){let x,S;const E=isFunction$4(r);return E?(x=r,S=NOOP):(x=r.get,S=r.set),new ComputedRefImpl(x,S,E||!S,_)}function warn$1(r,...n){}function callWithErrorHandling(r,n,_,x){let S;try{S=x?r(...x):r()}catch(E){handleError(E,n,_)}return S}function callWithAsyncErrorHandling(r,n,_,x){if(isFunction$4(r)){const E=callWithErrorHandling(r,n,_,x);return E&&isPromise(E)&&E.catch(C=>{handleError(C,n,_)}),E}const S=[];for(let E=0;E<r.length;E++)S.push(callWithAsyncErrorHandling(r[E],n,_,x));return S}function handleError(r,n,_,x=!0){const S=n?n.vnode:null;if(n){let E=n.parent;const C=n.proxy,T=_;for(;E;){const A=E.ec;if(A){for(let I=0;I<A.length;I++)if(A[I](r,C,T)===!1)return}E=E.parent}const B=n.appContext.config.errorHandler;if(B){callWithErrorHandling(B,null,10,[r,C,T]);return}}logError(r,_,S,x)}function logError(r,n,_,x=!0){console.error(r)}let isFlushing=!1,isFlushPending=!1;const queue$1=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick$2(r){const n=currentFlushPromise||resolvedPromise;return r?n.then(this?r.bind(this):r):n}function findInsertionIndex(r){let n=flushIndex+1,_=queue$1.length;for(;n<_;){const x=n+_>>>1;getId(queue$1[x])<r?n=x+1:_=x}return n}function queueJob(r){(!queue$1.length||!queue$1.includes(r,isFlushing&&r.allowRecurse?flushIndex+1:flushIndex))&&(r.id==null?queue$1.push(r):queue$1.splice(findInsertionIndex(r.id),0,r),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(r){const n=queue$1.indexOf(r);n>flushIndex&&queue$1.splice(n,1)}function queuePostFlushCb(r){isArray$9(r)?pendingPostFlushCbs.push(...r):(!activePostFlushCbs||!activePostFlushCbs.includes(r,r.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(r),queueFlush()}function flushPreFlushCbs(r,n=isFlushing?flushIndex+1:0){for(;n<queue$1.length;n++){const _=queue$1[n];_&&_.pre&&(queue$1.splice(n,1),n--,_())}}function flushPostFlushCbs(r){if(pendingPostFlushCbs.length){const n=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...n);return}for(activePostFlushCbs=n,activePostFlushCbs.sort((_,x)=>getId(_)-getId(x)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=r=>r.id==null?1/0:r.id,comparator=(r,n)=>{const _=getId(r)-getId(n);if(_===0){if(r.pre&&!n.pre)return-1;if(n.pre&&!r.pre)return 1}return _};function flushJobs(r){isFlushPending=!1,isFlushing=!0,queue$1.sort(comparator);const n=NOOP;try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const _=queue$1[flushIndex];_&&_.active!==!1&&callWithErrorHandling(_,null,14)}}finally{flushIndex=0,queue$1.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue$1.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(r,n,..._){if(r.isUnmounted)return;const x=r.vnode.props||EMPTY_OBJ;let S=_;const E=n.startsWith("update:"),C=E&&n.slice(7);if(C&&C in x){const I=`${C==="modelValue"?"model":C}Modifiers`,{number:N,trim:V}=x[I]||EMPTY_OBJ;V&&(S=_.map(D=>isString$7(D)?D.trim():D)),N&&(S=_.map(looseToNumber))}let T,B=x[T=toHandlerKey(n)]||x[T=toHandlerKey(camelize(n))];!B&&E&&(B=x[T=toHandlerKey(hyphenate(n))]),B&&callWithAsyncErrorHandling(B,r,6,S);const A=x[T+"Once"];if(A){if(!r.emitted)r.emitted={};else if(r.emitted[T])return;r.emitted[T]=!0,callWithAsyncErrorHandling(A,r,6,S)}}function normalizeEmitsOptions(r,n,_=!1){const x=n.emitsCache,S=x.get(r);if(S!==void 0)return S;const E=r.emits;let C={},T=!1;if(!isFunction$4(r)){const B=A=>{const I=normalizeEmitsOptions(A,n,!0);I&&(T=!0,extend$2(C,I))};!_&&n.mixins.length&&n.mixins.forEach(B),r.extends&&B(r.extends),r.mixins&&r.mixins.forEach(B)}return!E&&!T?(isObject$5(r)&&x.set(r,null),null):(isArray$9(E)?E.forEach(B=>C[B]=null):extend$2(C,E),isObject$5(r)&&x.set(r,C),C)}function isEmitListener(r,n){return!r||!isOn$1(n)?!1:(n=n.slice(2).replace(/Once$/,""),hasOwn$3(r,n[0].toLowerCase()+n.slice(1))||hasOwn$3(r,hyphenate(n))||hasOwn$3(r,n))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(r){const n=currentRenderingInstance;return currentRenderingInstance=r,currentScopeId=r&&r.type.__scopeId||null,n}function withCtx(r,n=currentRenderingInstance,_){if(!n||r._n)return r;const x=(...S)=>{x._d&&setBlockTracking(-1);const E=setCurrentRenderingInstance(n);let C;try{C=r(...S)}finally{setCurrentRenderingInstance(E),x._d&&setBlockTracking(1)}return C};return x._n=!0,x._c=!0,x._d=!0,x}function markAttrsAccessed(){}function renderComponentRoot(r){const{type:n,vnode:_,proxy:x,withProxy:S,props:E,propsOptions:[C],slots:T,attrs:B,emit:A,render:I,renderCache:N,data:V,setupState:D,ctx:O,inheritAttrs:F}=r;let M,L;const j=setCurrentRenderingInstance(r);try{if(_.shapeFlag&4){const H=S||x;M=normalizeVNode(I.call(H,H,N,E,D,V,O)),L=B}else{const H=n;M=normalizeVNode(H.length>1?H(E,{attrs:B,slots:T,emit:A}):H(E,null)),L=n.props?B:getFunctionalFallthrough(B)}}catch(H){blockStack.length=0,handleError(H,r,1),M=createVNode(Comment)}let q=M;if(L&&F!==!1){const H=Object.keys(L),{shapeFlag:X}=q;H.length&&X&7&&(C&&H.some(isModelListener)&&(L=filterModelListeners(L,C)),q=cloneVNode(q,L))}return _.dirs&&(q=cloneVNode(q),q.dirs=q.dirs?q.dirs.concat(_.dirs):_.dirs),_.transition&&(q.transition=_.transition),M=q,setCurrentRenderingInstance(j),M}const getFunctionalFallthrough=r=>{let n;for(const _ in r)(_==="class"||_==="style"||isOn$1(_))&&((n||(n={}))[_]=r[_]);return n},filterModelListeners=(r,n)=>{const _={};for(const x in r)(!isModelListener(x)||!(x.slice(9)in n))&&(_[x]=r[x]);return _};function shouldUpdateComponent(r,n,_){const{props:x,children:S,component:E}=r,{props:C,children:T,patchFlag:B}=n,A=E.emitsOptions;if(n.dirs||n.transition)return!0;if(_&&B>=0){if(B&1024)return!0;if(B&16)return x?hasPropsChanged(x,C,A):!!C;if(B&8){const I=n.dynamicProps;for(let N=0;N<I.length;N++){const V=I[N];if(C[V]!==x[V]&&!isEmitListener(A,V))return!0}}}else return(S||T)&&(!T||!T.$stable)?!0:x===C?!1:x?C?hasPropsChanged(x,C,A):!0:!!C;return!1}function hasPropsChanged(r,n,_){const x=Object.keys(n);if(x.length!==Object.keys(r).length)return!0;for(let S=0;S<x.length;S++){const E=x[S];if(n[E]!==r[E]&&!isEmitListener(_,E))return!0}return!1}function updateHOCHostEl({vnode:r,parent:n},_){for(;n&&n.subTree===r;)(r=n.vnode).el=_,n=n.parent}const isSuspense=r=>r.__isSuspense;function queueEffectWithSuspense(r,n){n&&n.pendingBranch?isArray$9(r)?n.effects.push(...r):n.effects.push(r):queuePostFlushCb(r)}function watchEffect(r,n){return doWatch(r,null,n)}const INITIAL_WATCHER_VALUE={};function watch(r,n,_){return doWatch(r,n,_)}function doWatch(r,n,{immediate:_,deep:x,flush:S,onTrack:E,onTrigger:C}=EMPTY_OBJ){var T;const B=getCurrentScope()===((T=currentInstance)==null?void 0:T.scope)?currentInstance:null;let A,I=!1,N=!1;if(isRef(r)?(A=()=>r.value,I=isShallow(r)):isReactive(r)?(A=()=>r,x=!0):isArray$9(r)?(N=!0,I=r.some(H=>isReactive(H)||isShallow(H)),A=()=>r.map(H=>{if(isRef(H))return H.value;if(isReactive(H))return traverse$2(H);if(isFunction$4(H))return callWithErrorHandling(H,B,2)})):isFunction$4(r)?n?A=()=>callWithErrorHandling(r,B,2):A=()=>{if(!(B&&B.isUnmounted))return V&&V(),callWithAsyncErrorHandling(r,B,3,[D])}:A=NOOP,n&&x){const H=A;A=()=>traverse$2(H())}let V,D=H=>{V=j.onStop=()=>{callWithErrorHandling(H,B,4)}},O;if(isInSSRComponentSetup)if(D=NOOP,n?_&&callWithAsyncErrorHandling(n,B,3,[A(),N?[]:void 0,D]):A(),S==="sync"){const H=useSSRContext();O=H.__watcherHandles||(H.__watcherHandles=[])}else return NOOP;let F=N?new Array(r.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const M=()=>{if(j.active)if(n){const H=j.run();(x||I||(N?H.some((X,J)=>hasChanged(X,F[J])):hasChanged(H,F)))&&(V&&V(),callWithAsyncErrorHandling(n,B,3,[H,F===INITIAL_WATCHER_VALUE?void 0:N&&F[0]===INITIAL_WATCHER_VALUE?[]:F,D]),F=H)}else j.run()};M.allowRecurse=!!n;let L;S==="sync"?L=M:S==="post"?L=()=>queuePostRenderEffect(M,B&&B.suspense):(M.pre=!0,B&&(M.id=B.uid),L=()=>queueJob(M));const j=new ReactiveEffect(A,L);n?_?M():F=j.run():S==="post"?queuePostRenderEffect(j.run.bind(j),B&&B.suspense):j.run();const q=()=>{j.stop(),B&&B.scope&&remove(B.scope.effects,j)};return O&&O.push(q),q}function instanceWatch(r,n,_){const x=this.proxy,S=isString$7(r)?r.includes(".")?createPathGetter(x,r):()=>x[r]:r.bind(x,x);let E;isFunction$4(n)?E=n:(E=n.handler,_=n);const C=currentInstance;setCurrentInstance(this);const T=doWatch(S,E.bind(x),_);return C?setCurrentInstance(C):unsetCurrentInstance(),T}function createPathGetter(r,n){const _=n.split(".");return()=>{let x=r;for(let S=0;S<_.length&&x;S++)x=x[_[S]];return x}}function traverse$2(r,n){if(!isObject$5(r)||r.__v_skip||(n=n||new Set,n.has(r)))return r;if(n.add(r),isRef(r))traverse$2(r.value,n);else if(isArray$9(r))for(let _=0;_<r.length;_++)traverse$2(r[_],n);else if(isSet$4(r)||isMap$4(r))r.forEach(_=>{traverse$2(_,n)});else if(isPlainObject$4(r))for(const _ in r)traverse$2(r[_],n);return r}function withDirectives(r,n){const _=currentRenderingInstance;if(_===null)return r;const x=getExposeProxy(_)||_.proxy,S=r.dirs||(r.dirs=[]);for(let E=0;E<n.length;E++){let[C,T,B,A=EMPTY_OBJ]=n[E];C&&(isFunction$4(C)&&(C={mounted:C,updated:C}),C.deep&&traverse$2(T),S.push({dir:C,instance:x,value:T,oldValue:void 0,arg:B,modifiers:A}))}return r}function invokeDirectiveHook(r,n,_,x){const S=r.dirs,E=n&&n.dirs;for(let C=0;C<S.length;C++){const T=S[C];E&&(T.oldValue=E[C].value);let B=T.dir[x];B&&(pauseTracking(),callWithAsyncErrorHandling(B,_,8,[r.el,T,r,n]),resetTracking())}}function useTransitionState(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{r.isMounted=!0}),onBeforeUnmount(()=>{r.isUnmounting=!0}),r}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(r,{slots:n}){const _=getCurrentInstance$1(),x=useTransitionState();let S;return()=>{const E=n.default&&getTransitionRawChildren(n.default(),!0);if(!E||!E.length)return;let C=E[0];if(E.length>1){for(const F of E)if(F.type!==Comment){C=F;break}}const T=toRaw(r),{mode:B}=T;if(x.isLeaving)return emptyPlaceholder(C);const A=getKeepAliveChild(C);if(!A)return emptyPlaceholder(C);const I=resolveTransitionHooks(A,T,x,_);setTransitionHooks(A,I);const N=_.subTree,V=N&&getKeepAliveChild(N);let D=!1;const{getTransitionKey:O}=A.type;if(O){const F=O();S===void 0?S=F:F!==S&&(S=F,D=!0)}if(V&&V.type!==Comment&&(!isSameVNodeType(A,V)||D)){const F=resolveTransitionHooks(V,T,x,_);if(setTransitionHooks(V,F),B==="out-in")return x.isLeaving=!0,F.afterLeave=()=>{x.isLeaving=!1,_.update.active!==!1&&_.update()},emptyPlaceholder(C);B==="in-out"&&A.type!==Comment&&(F.delayLeave=(M,L,j)=>{const q=getLeavingNodesForType(x,V);q[String(V.key)]=V,M._leaveCb=()=>{L(),M._leaveCb=void 0,delete I.delayedLeave},I.delayedLeave=j})}return C}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(r,n){const{leavingVNodes:_}=r;let x=_.get(n.type);return x||(x=Object.create(null),_.set(n.type,x)),x}function resolveTransitionHooks(r,n,_,x){const{appear:S,mode:E,persisted:C=!1,onBeforeEnter:T,onEnter:B,onAfterEnter:A,onEnterCancelled:I,onBeforeLeave:N,onLeave:V,onAfterLeave:D,onLeaveCancelled:O,onBeforeAppear:F,onAppear:M,onAfterAppear:L,onAppearCancelled:j}=n,q=String(r.key),H=getLeavingNodesForType(_,r),X=(ae,ce)=>{ae&&callWithAsyncErrorHandling(ae,x,9,ce)},J=(ae,ce)=>{const ve=ce[1];X(ae,ce),isArray$9(ae)?ae.every(pe=>pe.length<=1)&&ve():ae.length<=1&&ve()},Z={mode:E,persisted:C,beforeEnter(ae){let ce=T;if(!_.isMounted)if(S)ce=F||T;else return;ae._leaveCb&&ae._leaveCb(!0);const ve=H[q];ve&&isSameVNodeType(r,ve)&&ve.el._leaveCb&&ve.el._leaveCb(),X(ce,[ae])},enter(ae){let ce=B,ve=A,pe=I;if(!_.isMounted)if(S)ce=M||B,ve=L||A,pe=j||I;else return;let G=!1;const Y=ae._enterCb=U=>{G||(G=!0,U?X(pe,[ae]):X(ve,[ae]),Z.delayedLeave&&Z.delayedLeave(),ae._enterCb=void 0)};ce?J(ce,[ae,Y]):Y()},leave(ae,ce){const ve=String(r.key);if(ae._enterCb&&ae._enterCb(!0),_.isUnmounting)return ce();X(N,[ae]);let pe=!1;const G=ae._leaveCb=Y=>{pe||(pe=!0,ce(),Y?X(O,[ae]):X(D,[ae]),ae._leaveCb=void 0,H[ve]===r&&delete H[ve])};H[ve]=r,V?J(V,[ae,G]):G()},clone(ae){return resolveTransitionHooks(ae,n,_,x)}};return Z}function emptyPlaceholder(r){if(isKeepAlive(r))return r=cloneVNode(r),r.children=null,r}function getKeepAliveChild(r){return isKeepAlive(r)?r.children?r.children[0]:void 0:r}function setTransitionHooks(r,n){r.shapeFlag&6&&r.component?setTransitionHooks(r.component.subTree,n):r.shapeFlag&128?(r.ssContent.transition=n.clone(r.ssContent),r.ssFallback.transition=n.clone(r.ssFallback)):r.transition=n}function getTransitionRawChildren(r,n=!1,_){let x=[],S=0;for(let E=0;E<r.length;E++){let C=r[E];const T=_==null?C.key:String(_)+String(C.key!=null?C.key:E);C.type===Fragment?(C.patchFlag&128&&S++,x=x.concat(getTransitionRawChildren(C.children,n,T))):(n||C.type!==Comment)&&x.push(T!=null?cloneVNode(C,{key:T}):C)}if(S>1)for(let E=0;E<x.length;E++)x[E].patchFlag=-2;return x}function defineComponent$1(r,n){return isFunction$4(r)?(()=>extend$2({name:r.name},n,{setup:r}))():r}const isAsyncWrapper=r=>!!r.type.__asyncLoader,isKeepAlive=r=>r.type.__isKeepAlive;function onActivated(r,n){registerKeepAliveHook(r,"a",n)}function onDeactivated(r,n){registerKeepAliveHook(r,"da",n)}function registerKeepAliveHook(r,n,_=currentInstance){const x=r.__wdc||(r.__wdc=()=>{let S=_;for(;S;){if(S.isDeactivated)return;S=S.parent}return r()});if(injectHook(n,x,_),_){let S=_.parent;for(;S&&S.parent;)isKeepAlive(S.parent.vnode)&&injectToKeepAliveRoot(x,n,_,S),S=S.parent}}function injectToKeepAliveRoot(r,n,_,x){const S=injectHook(n,r,x,!0);onUnmounted(()=>{remove(x[n],S)},_)}function injectHook(r,n,_=currentInstance,x=!1){if(_){const S=_[r]||(_[r]=[]),E=n.__weh||(n.__weh=(...C)=>{if(_.isUnmounted)return;pauseTracking(),setCurrentInstance(_);const T=callWithAsyncErrorHandling(n,_,r,C);return unsetCurrentInstance(),resetTracking(),T});return x?S.unshift(E):S.push(E),E}}const createHook=r=>(n,_=currentInstance)=>(!isInSSRComponentSetup||r==="sp")&&injectHook(r,(...x)=>n(...x),_),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(r,n=currentInstance){injectHook("ec",r,n)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(r,n){return resolveAsset(COMPONENTS,r,!0,n)||r}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(r){return isString$7(r)?resolveAsset(COMPONENTS,r,!1)||r:r||NULL_DYNAMIC_COMPONENT}function resolveDirective(r){return resolveAsset(DIRECTIVES,r)}function resolveAsset(r,n,_=!0,x=!1){const S=currentRenderingInstance||currentInstance;if(S){const E=S.type;if(r===COMPONENTS){const T=getComponentName(E,!1);if(T&&(T===n||T===camelize(n)||T===capitalize$1(camelize(n))))return E}const C=resolve$3(S[r]||E[r],n)||resolve$3(S.appContext[r],n);return!C&&x?E:C}}function resolve$3(r,n){return r&&(r[n]||r[camelize(n)]||r[capitalize$1(camelize(n))])}function renderList(r,n,_,x){let S;const E=_&&_[x];if(isArray$9(r)||isString$7(r)){S=new Array(r.length);for(let C=0,T=r.length;C<T;C++)S[C]=n(r[C],C,void 0,E&&E[C])}else if(typeof r=="number"){S=new Array(r);for(let C=0;C<r;C++)S[C]=n(C+1,C,void 0,E&&E[C])}else if(isObject$5(r))if(r[Symbol.iterator])S=Array.from(r,(C,T)=>n(C,T,void 0,E&&E[T]));else{const C=Object.keys(r);S=new Array(C.length);for(let T=0,B=C.length;T<B;T++){const A=C[T];S[T]=n(r[A],A,T,E&&E[T])}}else S=[];return _&&(_[x]=S),S}function createSlots(r,n){for(let _=0;_<n.length;_++){const x=n[_];if(isArray$9(x))for(let S=0;S<x.length;S++)r[x[S].name]=x[S].fn;else x&&(r[x.name]=x.key?(...S)=>{const E=x.fn(...S);return E&&(E.key=x.key),E}:x.fn)}return r}function renderSlot(r,n,_={},x,S){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return n!=="default"&&(_.name=n),createVNode("slot",_,x&&x());let E=r[n];E&&E._c&&(E._d=!1),openBlock();const C=E&&ensureValidVNode(E(_)),T=createBlock(Fragment,{key:_.key||C&&C.key||`_${n}`},C||(x?x():[]),C&&r._===1?64:-2);return!S&&T.scopeId&&(T.slotScopeIds=[T.scopeId+"-s"]),E&&E._c&&(E._d=!0),T}function ensureValidVNode(r){return r.some(n=>isVNode$1(n)?!(n.type===Comment||n.type===Fragment&&!ensureValidVNode(n.children)):!0)?r:null}const getPublicInstance=r=>r?isStatefulComponent(r)?getExposeProxy(r)||r.proxy:getPublicInstance(r.parent):null,publicPropertiesMap=extend$2(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>getPublicInstance(r.parent),$root:r=>getPublicInstance(r.root),$emit:r=>r.emit,$options:r=>resolveMergedOptions(r),$forceUpdate:r=>r.f||(r.f=()=>queueJob(r.update)),$nextTick:r=>r.n||(r.n=nextTick$2.bind(r.proxy)),$watch:r=>instanceWatch.bind(r)}),hasSetupBinding=(r,n)=>r!==EMPTY_OBJ&&!r.__isScriptSetup&&hasOwn$3(r,n),PublicInstanceProxyHandlers={get({_:r},n){const{ctx:_,setupState:x,data:S,props:E,accessCache:C,type:T,appContext:B}=r;let A;if(n[0]!=="$"){const D=C[n];if(D!==void 0)switch(D){case 1:return x[n];case 2:return S[n];case 4:return _[n];case 3:return E[n]}else{if(hasSetupBinding(x,n))return C[n]=1,x[n];if(S!==EMPTY_OBJ&&hasOwn$3(S,n))return C[n]=2,S[n];if((A=r.propsOptions[0])&&hasOwn$3(A,n))return C[n]=3,E[n];if(_!==EMPTY_OBJ&&hasOwn$3(_,n))return C[n]=4,_[n];shouldCacheAccess&&(C[n]=0)}}const I=publicPropertiesMap[n];let N,V;if(I)return n==="$attrs"&&track(r,"get",n),I(r);if((N=T.__cssModules)&&(N=N[n]))return N;if(_!==EMPTY_OBJ&&hasOwn$3(_,n))return C[n]=4,_[n];if(V=B.config.globalProperties,hasOwn$3(V,n))return V[n]},set({_:r},n,_){const{data:x,setupState:S,ctx:E}=r;return hasSetupBinding(S,n)?(S[n]=_,!0):x!==EMPTY_OBJ&&hasOwn$3(x,n)?(x[n]=_,!0):hasOwn$3(r.props,n)||n[0]==="$"&&n.slice(1)in r?!1:(E[n]=_,!0)},has({_:{data:r,setupState:n,accessCache:_,ctx:x,appContext:S,propsOptions:E}},C){let T;return!!_[C]||r!==EMPTY_OBJ&&hasOwn$3(r,C)||hasSetupBinding(n,C)||(T=E[0])&&hasOwn$3(T,C)||hasOwn$3(x,C)||hasOwn$3(publicPropertiesMap,C)||hasOwn$3(S.config.globalProperties,C)},defineProperty(r,n,_){return _.get!=null?r._.accessCache[n]=0:hasOwn$3(_,"value")&&this.set(r,n,_.value,null),Reflect.defineProperty(r,n,_)}};function normalizePropsOrEmits(r){return isArray$9(r)?r.reduce((n,_)=>(n[_]=null,n),{}):r}let shouldCacheAccess=!0;function applyOptions(r){const n=resolveMergedOptions(r),_=r.proxy,x=r.ctx;shouldCacheAccess=!1,n.beforeCreate&&callHook$1(n.beforeCreate,r,"bc");const{data:S,computed:E,methods:C,watch:T,provide:B,inject:A,created:I,beforeMount:N,mounted:V,beforeUpdate:D,updated:O,activated:F,deactivated:M,beforeDestroy:L,beforeUnmount:j,destroyed:q,unmounted:H,render:X,renderTracked:J,renderTriggered:Z,errorCaptured:ae,serverPrefetch:ce,expose:ve,inheritAttrs:pe,components:G,directives:Y,filters:U}=n;if(A&&resolveInjections(A,x,null),C)for(const re in C){const oe=C[re];isFunction$4(oe)&&(x[re]=oe.bind(_))}if(S){const re=S.call(_,_);isObject$5(re)&&(r.data=reactive(re))}if(shouldCacheAccess=!0,E)for(const re in E){const oe=E[re],ie=isFunction$4(oe)?oe.bind(_,_):isFunction$4(oe.get)?oe.get.bind(_,_):NOOP,ne=!isFunction$4(oe)&&isFunction$4(oe.set)?oe.set.bind(_):NOOP,te=computed({get:ie,set:ne});Object.defineProperty(x,re,{enumerable:!0,configurable:!0,get:()=>te.value,set:K=>te.value=K})}if(T)for(const re in T)createWatcher(T[re],x,_,re);if(B){const re=isFunction$4(B)?B.call(_):B;Reflect.ownKeys(re).forEach(oe=>{provide(oe,re[oe])})}I&&callHook$1(I,r,"c");function ee(re,oe){isArray$9(oe)?oe.forEach(ie=>re(ie.bind(_))):oe&&re(oe.bind(_))}if(ee(onBeforeMount,N),ee(onMounted,V),ee(onBeforeUpdate,D),ee(onUpdated,O),ee(onActivated,F),ee(onDeactivated,M),ee(onErrorCaptured,ae),ee(onRenderTracked,J),ee(onRenderTriggered,Z),ee(onBeforeUnmount,j),ee(onUnmounted,H),ee(onServerPrefetch,ce),isArray$9(ve))if(ve.length){const re=r.exposed||(r.exposed={});ve.forEach(oe=>{Object.defineProperty(re,oe,{get:()=>_[oe],set:ie=>_[oe]=ie})})}else r.exposed||(r.exposed={});X&&r.render===NOOP&&(r.render=X),pe!=null&&(r.inheritAttrs=pe),G&&(r.components=G),Y&&(r.directives=Y)}function resolveInjections(r,n,_=NOOP){isArray$9(r)&&(r=normalizeInject(r));for(const x in r){const S=r[x];let E;isObject$5(S)?"default"in S?E=inject$1(S.from||x,S.default,!0):E=inject$1(S.from||x):E=inject$1(S),isRef(E)?Object.defineProperty(n,x,{enumerable:!0,configurable:!0,get:()=>E.value,set:C=>E.value=C}):n[x]=E}}function callHook$1(r,n,_){callWithAsyncErrorHandling(isArray$9(r)?r.map(x=>x.bind(n.proxy)):r.bind(n.proxy),n,_)}function createWatcher(r,n,_,x){const S=x.includes(".")?createPathGetter(_,x):()=>_[x];if(isString$7(r)){const E=n[r];isFunction$4(E)&&watch(S,E)}else if(isFunction$4(r))watch(S,r.bind(_));else if(isObject$5(r))if(isArray$9(r))r.forEach(E=>createWatcher(E,n,_,x));else{const E=isFunction$4(r.handler)?r.handler.bind(_):n[r.handler];isFunction$4(E)&&watch(S,E,r)}}function resolveMergedOptions(r){const n=r.type,{mixins:_,extends:x}=n,{mixins:S,optionsCache:E,config:{optionMergeStrategies:C}}=r.appContext,T=E.get(n);let B;return T?B=T:!S.length&&!_&&!x?B=n:(B={},S.length&&S.forEach(A=>mergeOptions$1(B,A,C,!0)),mergeOptions$1(B,n,C)),isObject$5(n)&&E.set(n,B),B}function mergeOptions$1(r,n,_,x=!1){const{mixins:S,extends:E}=n;E&&mergeOptions$1(r,E,_,!0),S&&S.forEach(C=>mergeOptions$1(r,C,_,!0));for(const C in n)if(!(x&&C==="expose")){const T=internalOptionMergeStrats[C]||_&&_[C];r[C]=T?T(r[C],n[C]):n[C]}return r}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(r,n){return n?r?function(){return extend$2(isFunction$4(r)?r.call(this,this):r,isFunction$4(n)?n.call(this,this):n)}:n:r}function mergeInject(r,n){return mergeObjectOptions(normalizeInject(r),normalizeInject(n))}function normalizeInject(r){if(isArray$9(r)){const n={};for(let _=0;_<r.length;_++)n[r[_]]=r[_];return n}return r}function mergeAsArray(r,n){return r?[...new Set([].concat(r,n))]:n}function mergeObjectOptions(r,n){return r?extend$2(Object.create(null),r,n):n}function mergeEmitsOrPropsOptions(r,n){return r?isArray$9(r)&&isArray$9(n)?[...new Set([...r,...n])]:extend$2(Object.create(null),normalizePropsOrEmits(r),normalizePropsOrEmits(n??{})):n}function mergeWatchOptions(r,n){if(!r)return n;if(!n)return r;const _=extend$2(Object.create(null),r);for(const x in n)_[x]=mergeAsArray(r[x],n[x]);return _}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(r,n){return function(x,S=null){isFunction$4(x)||(x=extend$2({},x)),S!=null&&!isObject$5(S)&&(S=null);const E=createAppContext(),C=new Set;let T=!1;const B=E.app={_uid:uid$1++,_component:x,_props:S,_container:null,_context:E,_instance:null,version:version$4,get config(){return E.config},set config(A){},use(A,...I){return C.has(A)||(A&&isFunction$4(A.install)?(C.add(A),A.install(B,...I)):isFunction$4(A)&&(C.add(A),A(B,...I))),B},mixin(A){return E.mixins.includes(A)||E.mixins.push(A),B},component(A,I){return I?(E.components[A]=I,B):E.components[A]},directive(A,I){return I?(E.directives[A]=I,B):E.directives[A]},mount(A,I,N){if(!T){const V=createVNode(x,S);return V.appContext=E,I&&n?n(V,A):r(V,A,N),T=!0,B._container=A,A.__vue_app__=B,getExposeProxy(V.component)||V.component.proxy}},unmount(){T&&(r(null,B._container),delete B._container.__vue_app__)},provide(A,I){return E.provides[A]=I,B},runWithContext(A){currentApp=B;try{return A()}finally{currentApp=null}}};return B}}let currentApp=null;function provide(r,n){if(currentInstance){let _=currentInstance.provides;const x=currentInstance.parent&&currentInstance.parent.provides;x===_&&(_=currentInstance.provides=Object.create(x)),_[r]=n}}function inject$1(r,n,_=!1){const x=currentInstance||currentRenderingInstance;if(x||currentApp){const S=x?x.parent==null?x.vnode.appContext&&x.vnode.appContext.provides:x.parent.provides:currentApp._context.provides;if(S&&r in S)return S[r];if(arguments.length>1)return _&&isFunction$4(n)?n.call(x&&x.proxy):n}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}function initProps(r,n,_,x=!1){const S={},E={};def$t(E,InternalObjectKey,1),r.propsDefaults=Object.create(null),setFullProps(r,n,S,E);for(const C in r.propsOptions[0])C in S||(S[C]=void 0);_?r.props=x?S:shallowReactive(S):r.type.props?r.props=S:r.props=E,r.attrs=E}function updateProps(r,n,_,x){const{props:S,attrs:E,vnode:{patchFlag:C}}=r,T=toRaw(S),[B]=r.propsOptions;let A=!1;if((x||C>0)&&!(C&16)){if(C&8){const I=r.vnode.dynamicProps;for(let N=0;N<I.length;N++){let V=I[N];if(isEmitListener(r.emitsOptions,V))continue;const D=n[V];if(B)if(hasOwn$3(E,V))D!==E[V]&&(E[V]=D,A=!0);else{const O=camelize(V);S[O]=resolvePropValue(B,T,O,D,r,!1)}else D!==E[V]&&(E[V]=D,A=!0)}}}else{setFullProps(r,n,S,E)&&(A=!0);let I;for(const N in T)(!n||!hasOwn$3(n,N)&&((I=hyphenate(N))===N||!hasOwn$3(n,I)))&&(B?_&&(_[N]!==void 0||_[I]!==void 0)&&(S[N]=resolvePropValue(B,T,N,void 0,r,!0)):delete S[N]);if(E!==T)for(const N in E)(!n||!hasOwn$3(n,N))&&(delete E[N],A=!0)}A&&trigger(r,"set","$attrs")}function setFullProps(r,n,_,x){const[S,E]=r.propsOptions;let C=!1,T;if(n)for(let B in n){if(isReservedProp(B))continue;const A=n[B];let I;S&&hasOwn$3(S,I=camelize(B))?!E||!E.includes(I)?_[I]=A:(T||(T={}))[I]=A:isEmitListener(r.emitsOptions,B)||(!(B in x)||A!==x[B])&&(x[B]=A,C=!0)}if(E){const B=toRaw(_),A=T||EMPTY_OBJ;for(let I=0;I<E.length;I++){const N=E[I];_[N]=resolvePropValue(S,B,N,A[N],r,!hasOwn$3(A,N))}}return C}function resolvePropValue(r,n,_,x,S,E){const C=r[_];if(C!=null){const T=hasOwn$3(C,"default");if(T&&x===void 0){const B=C.default;if(C.type!==Function&&!C.skipFactory&&isFunction$4(B)){const{propsDefaults:A}=S;_ in A?x=A[_]:(setCurrentInstance(S),x=A[_]=B.call(null,n),unsetCurrentInstance())}else x=B}C[0]&&(E&&!T?x=!1:C[1]&&(x===""||x===hyphenate(_))&&(x=!0))}return x}function normalizePropsOptions(r,n,_=!1){const x=n.propsCache,S=x.get(r);if(S)return S;const E=r.props,C={},T=[];let B=!1;if(!isFunction$4(r)){const I=N=>{B=!0;const[V,D]=normalizePropsOptions(N,n,!0);extend$2(C,V),D&&T.push(...D)};!_&&n.mixins.length&&n.mixins.forEach(I),r.extends&&I(r.extends),r.mixins&&r.mixins.forEach(I)}if(!E&&!B)return isObject$5(r)&&x.set(r,EMPTY_ARR),EMPTY_ARR;if(isArray$9(E))for(let I=0;I<E.length;I++){const N=camelize(E[I]);validatePropName(N)&&(C[N]=EMPTY_OBJ)}else if(E)for(const I in E){const N=camelize(I);if(validatePropName(N)){const V=E[I],D=C[N]=isArray$9(V)||isFunction$4(V)?{type:V}:extend$2({},V);if(D){const O=getTypeIndex(Boolean,D.type),F=getTypeIndex(String,D.type);D[0]=O>-1,D[1]=F<0||O<F,(O>-1||hasOwn$3(D,"default"))&&T.push(N)}}}const A=[C,T];return isObject$5(r)&&x.set(r,A),A}function validatePropName(r){return r[0]!=="$"}function getType(r){const n=r&&r.toString().match(/^\s*(function|class) (\w+)/);return n?n[2]:r===null?"null":""}function isSameType(r,n){return getType(r)===getType(n)}function getTypeIndex(r,n){return isArray$9(n)?n.findIndex(_=>isSameType(_,r)):isFunction$4(n)&&isSameType(n,r)?0:-1}const isInternalKey=r=>r[0]==="_"||r==="$stable",normalizeSlotValue=r=>isArray$9(r)?r.map(normalizeVNode):[normalizeVNode(r)],normalizeSlot$1=(r,n,_)=>{if(n._n)return n;const x=withCtx((...S)=>normalizeSlotValue(n(...S)),_);return x._c=!1,x},normalizeObjectSlots=(r,n,_)=>{const x=r._ctx;for(const S in r){if(isInternalKey(S))continue;const E=r[S];if(isFunction$4(E))n[S]=normalizeSlot$1(S,E,x);else if(E!=null){const C=normalizeSlotValue(E);n[S]=()=>C}}},normalizeVNodeSlots=(r,n)=>{const _=normalizeSlotValue(n);r.slots.default=()=>_},initSlots=(r,n)=>{if(r.vnode.shapeFlag&32){const _=n._;_?(r.slots=toRaw(n),def$t(n,"_",_)):normalizeObjectSlots(n,r.slots={})}else r.slots={},n&&normalizeVNodeSlots(r,n);def$t(r.slots,InternalObjectKey,1)},updateSlots=(r,n,_)=>{const{vnode:x,slots:S}=r;let E=!0,C=EMPTY_OBJ;if(x.shapeFlag&32){const T=n._;T?_&&T===1?E=!1:(extend$2(S,n),!_&&T===1&&delete S._):(E=!n.$stable,normalizeObjectSlots(n,S)),C=n}else n&&(normalizeVNodeSlots(r,n),C={default:1});if(E)for(const T in S)!isInternalKey(T)&&!(T in C)&&delete S[T]};function setRef(r,n,_,x,S=!1){if(isArray$9(r)){r.forEach((V,D)=>setRef(V,n&&(isArray$9(n)?n[D]:n),_,x,S));return}if(isAsyncWrapper(x)&&!S)return;const E=x.shapeFlag&4?getExposeProxy(x.component)||x.component.proxy:x.el,C=S?null:E,{i:T,r:B}=r,A=n&&n.r,I=T.refs===EMPTY_OBJ?T.refs={}:T.refs,N=T.setupState;if(A!=null&&A!==B&&(isString$7(A)?(I[A]=null,hasOwn$3(N,A)&&(N[A]=null)):isRef(A)&&(A.value=null)),isFunction$4(B))callWithErrorHandling(B,T,12,[C,I]);else{const V=isString$7(B),D=isRef(B);if(V||D){const O=()=>{if(r.f){const F=V?hasOwn$3(N,B)?N[B]:I[B]:B.value;S?isArray$9(F)&&remove(F,E):isArray$9(F)?F.includes(E)||F.push(E):V?(I[B]=[E],hasOwn$3(N,B)&&(N[B]=I[B])):(B.value=[E],r.k&&(I[r.k]=B.value))}else V?(I[B]=C,hasOwn$3(N,B)&&(N[B]=C)):D&&(B.value=C,r.k&&(I[r.k]=C))};C?(O.id=-1,queuePostRenderEffect(O,_)):O()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(r){return baseCreateRenderer(r)}function baseCreateRenderer(r,n){const _=getGlobalThis$1();_.__VUE__=!0;const{insert:x,remove:S,patchProp:E,createElement:C,createText:T,createComment:B,setText:A,setElementText:I,parentNode:N,nextSibling:V,setScopeId:D=NOOP,insertStaticContent:O}=r,F=(he,xe,fe,Be=null,Le=null,Ve=null,Ie=!1,Me=null,He=!!xe.dynamicChildren)=>{if(he===xe)return;he&&!isSameVNodeType(he,xe)&&(Be=ye(he),K(he,Le,Ve,!0),he=null),xe.patchFlag===-2&&(He=!1,xe.dynamicChildren=null);const{type:We,ref:Ue,shapeFlag:Ge}=xe;switch(We){case Text:M(he,xe,fe,Be);break;case Comment:L(he,xe,fe,Be);break;case Static:he==null&&j(xe,fe,Be,Ie);break;case Fragment:G(he,xe,fe,Be,Le,Ve,Ie,Me,He);break;default:Ge&1?X(he,xe,fe,Be,Le,Ve,Ie,Me,He):Ge&6?Y(he,xe,fe,Be,Le,Ve,Ie,Me,He):(Ge&64||Ge&128)&&We.process(he,xe,fe,Be,Le,Ve,Ie,Me,He,Re)}Ue!=null&&Le&&setRef(Ue,he&&he.ref,Ve,xe||he,!xe)},M=(he,xe,fe,Be)=>{if(he==null)x(xe.el=T(xe.children),fe,Be);else{const Le=xe.el=he.el;xe.children!==he.children&&A(Le,xe.children)}},L=(he,xe,fe,Be)=>{he==null?x(xe.el=B(xe.children||""),fe,Be):xe.el=he.el},j=(he,xe,fe,Be)=>{[he.el,he.anchor]=O(he.children,xe,fe,Be,he.el,he.anchor)},q=({el:he,anchor:xe},fe,Be)=>{let Le;for(;he&&he!==xe;)Le=V(he),x(he,fe,Be),he=Le;x(xe,fe,Be)},H=({el:he,anchor:xe})=>{let fe;for(;he&&he!==xe;)fe=V(he),S(he),he=fe;S(xe)},X=(he,xe,fe,Be,Le,Ve,Ie,Me,He)=>{Ie=Ie||xe.type==="svg",he==null?J(xe,fe,Be,Le,Ve,Ie,Me,He):ce(he,xe,Le,Ve,Ie,Me,He)},J=(he,xe,fe,Be,Le,Ve,Ie,Me)=>{let He,We;const{type:Ue,props:Ge,shapeFlag:et,transition:ot,dirs:ht}=he;if(He=he.el=C(he.type,Ve,Ge&&Ge.is,Ge),et&8?I(He,he.children):et&16&&ae(he.children,He,null,Be,Le,Ve&&Ue!=="foreignObject",Ie,Me),ht&&invokeDirectiveHook(he,null,Be,"created"),Z(He,he,he.scopeId,Ie,Be),Ge){for(const we in Ge)we!=="value"&&!isReservedProp(we)&&E(He,we,null,Ge[we],Ve,he.children,Be,Le,ge);"value"in Ge&&E(He,"value",null,Ge.value),(We=Ge.onVnodeBeforeMount)&&invokeVNodeHook(We,Be,he)}ht&&invokeDirectiveHook(he,null,Be,"beforeMount");const Oe=(!Le||Le&&!Le.pendingBranch)&&ot&&!ot.persisted;Oe&&ot.beforeEnter(He),x(He,xe,fe),((We=Ge&&Ge.onVnodeMounted)||Oe||ht)&&queuePostRenderEffect(()=>{We&&invokeVNodeHook(We,Be,he),Oe&&ot.enter(He),ht&&invokeDirectiveHook(he,null,Be,"mounted")},Le)},Z=(he,xe,fe,Be,Le)=>{if(fe&&D(he,fe),Be)for(let Ve=0;Ve<Be.length;Ve++)D(he,Be[Ve]);if(Le){let Ve=Le.subTree;if(xe===Ve){const Ie=Le.vnode;Z(he,Ie,Ie.scopeId,Ie.slotScopeIds,Le.parent)}}},ae=(he,xe,fe,Be,Le,Ve,Ie,Me,He=0)=>{for(let We=He;We<he.length;We++){const Ue=he[We]=Me?cloneIfMounted(he[We]):normalizeVNode(he[We]);F(null,Ue,xe,fe,Be,Le,Ve,Ie,Me)}},ce=(he,xe,fe,Be,Le,Ve,Ie)=>{const Me=xe.el=he.el;let{patchFlag:He,dynamicChildren:We,dirs:Ue}=xe;He|=he.patchFlag&16;const Ge=he.props||EMPTY_OBJ,et=xe.props||EMPTY_OBJ;let ot;fe&&toggleRecurse(fe,!1),(ot=et.onVnodeBeforeUpdate)&&invokeVNodeHook(ot,fe,xe,he),Ue&&invokeDirectiveHook(xe,he,fe,"beforeUpdate"),fe&&toggleRecurse(fe,!0);const ht=Le&&xe.type!=="foreignObject";if(We?ve(he.dynamicChildren,We,Me,fe,Be,ht,Ve):Ie||oe(he,xe,Me,null,fe,Be,ht,Ve,!1),He>0){if(He&16)pe(Me,xe,Ge,et,fe,Be,Le);else if(He&2&&Ge.class!==et.class&&E(Me,"class",null,et.class,Le),He&4&&E(Me,"style",Ge.style,et.style,Le),He&8){const Oe=xe.dynamicProps;for(let we=0;we<Oe.length;we++){const Ce=Oe[we],ze=Ge[Ce],Ze=et[Ce];(Ze!==ze||Ce==="value")&&E(Me,Ce,ze,Ze,Le,he.children,fe,Be,ge)}}He&1&&he.children!==xe.children&&I(Me,xe.children)}else!Ie&&We==null&&pe(Me,xe,Ge,et,fe,Be,Le);((ot=et.onVnodeUpdated)||Ue)&&queuePostRenderEffect(()=>{ot&&invokeVNodeHook(ot,fe,xe,he),Ue&&invokeDirectiveHook(xe,he,fe,"updated")},Be)},ve=(he,xe,fe,Be,Le,Ve,Ie)=>{for(let Me=0;Me<xe.length;Me++){const He=he[Me],We=xe[Me],Ue=He.el&&(He.type===Fragment||!isSameVNodeType(He,We)||He.shapeFlag&70)?N(He.el):fe;F(He,We,Ue,null,Be,Le,Ve,Ie,!0)}},pe=(he,xe,fe,Be,Le,Ve,Ie)=>{if(fe!==Be){if(fe!==EMPTY_OBJ)for(const Me in fe)!isReservedProp(Me)&&!(Me in Be)&&E(he,Me,fe[Me],null,Ie,xe.children,Le,Ve,ge);for(const Me in Be){if(isReservedProp(Me))continue;const He=Be[Me],We=fe[Me];He!==We&&Me!=="value"&&E(he,Me,We,He,Ie,xe.children,Le,Ve,ge)}"value"in Be&&E(he,"value",fe.value,Be.value)}},G=(he,xe,fe,Be,Le,Ve,Ie,Me,He)=>{const We=xe.el=he?he.el:T(""),Ue=xe.anchor=he?he.anchor:T("");let{patchFlag:Ge,dynamicChildren:et,slotScopeIds:ot}=xe;ot&&(Me=Me?Me.concat(ot):ot),he==null?(x(We,fe,Be),x(Ue,fe,Be),ae(xe.children,fe,Ue,Le,Ve,Ie,Me,He)):Ge>0&&Ge&64&&et&&he.dynamicChildren?(ve(he.dynamicChildren,et,fe,Le,Ve,Ie,Me),(xe.key!=null||Le&&xe===Le.subTree)&&traverseStaticChildren(he,xe,!0)):oe(he,xe,fe,Ue,Le,Ve,Ie,Me,He)},Y=(he,xe,fe,Be,Le,Ve,Ie,Me,He)=>{xe.slotScopeIds=Me,he==null?xe.shapeFlag&512?Le.ctx.activate(xe,fe,Be,Ie,He):U(xe,fe,Be,Le,Ve,Ie,He):W(he,xe,He)},U=(he,xe,fe,Be,Le,Ve,Ie)=>{const Me=he.component=createComponentInstance(he,Be,Le);if(isKeepAlive(he)&&(Me.ctx.renderer=Re),setupComponent(Me),Me.asyncDep){if(Le&&Le.registerDep(Me,ee),!he.el){const He=Me.subTree=createVNode(Comment);L(null,He,xe,fe)}return}ee(Me,he,xe,fe,Le,Ve,Ie)},W=(he,xe,fe)=>{const Be=xe.component=he.component;if(shouldUpdateComponent(he,xe,fe))if(Be.asyncDep&&!Be.asyncResolved){re(Be,xe,fe);return}else Be.next=xe,invalidateJob(Be.update),Be.update();else xe.el=he.el,Be.vnode=xe},ee=(he,xe,fe,Be,Le,Ve,Ie)=>{const Me=()=>{if(he.isMounted){let{next:Ue,bu:Ge,u:et,parent:ot,vnode:ht}=he,Oe=Ue,we;toggleRecurse(he,!1),Ue?(Ue.el=ht.el,re(he,Ue,Ie)):Ue=ht,Ge&&invokeArrayFns(Ge),(we=Ue.props&&Ue.props.onVnodeBeforeUpdate)&&invokeVNodeHook(we,ot,Ue,ht),toggleRecurse(he,!0);const Ce=renderComponentRoot(he),ze=he.subTree;he.subTree=Ce,F(ze,Ce,N(ze.el),ye(ze),he,Le,Ve),Ue.el=Ce.el,Oe===null&&updateHOCHostEl(he,Ce.el),et&&queuePostRenderEffect(et,Le),(we=Ue.props&&Ue.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(we,ot,Ue,ht),Le)}else{let Ue;const{el:Ge,props:et}=xe,{bm:ot,m:ht,parent:Oe}=he,we=isAsyncWrapper(xe);if(toggleRecurse(he,!1),ot&&invokeArrayFns(ot),!we&&(Ue=et&&et.onVnodeBeforeMount)&&invokeVNodeHook(Ue,Oe,xe),toggleRecurse(he,!0),Ge&&Te){const Ce=()=>{he.subTree=renderComponentRoot(he),Te(Ge,he.subTree,he,Le,null)};we?xe.type.__asyncLoader().then(()=>!he.isUnmounted&&Ce()):Ce()}else{const Ce=he.subTree=renderComponentRoot(he);F(null,Ce,fe,Be,he,Le,Ve),xe.el=Ce.el}if(ht&&queuePostRenderEffect(ht,Le),!we&&(Ue=et&&et.onVnodeMounted)){const Ce=xe;queuePostRenderEffect(()=>invokeVNodeHook(Ue,Oe,Ce),Le)}(xe.shapeFlag&256||Oe&&isAsyncWrapper(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&he.a&&queuePostRenderEffect(he.a,Le),he.isMounted=!0,xe=fe=Be=null}},He=he.effect=new ReactiveEffect(Me,()=>queueJob(We),he.scope),We=he.update=()=>He.run();We.id=he.uid,toggleRecurse(he,!0),We()},re=(he,xe,fe)=>{xe.component=he;const Be=he.vnode.props;he.vnode=xe,he.next=null,updateProps(he,xe.props,Be,fe),updateSlots(he,xe.children,fe),pauseTracking(),flushPreFlushCbs(),resetTracking()},oe=(he,xe,fe,Be,Le,Ve,Ie,Me,He=!1)=>{const We=he&&he.children,Ue=he?he.shapeFlag:0,Ge=xe.children,{patchFlag:et,shapeFlag:ot}=xe;if(et>0){if(et&128){ne(We,Ge,fe,Be,Le,Ve,Ie,Me,He);return}else if(et&256){ie(We,Ge,fe,Be,Le,Ve,Ie,Me,He);return}}ot&8?(Ue&16&&ge(We,Le,Ve),Ge!==We&&I(fe,Ge)):Ue&16?ot&16?ne(We,Ge,fe,Be,Le,Ve,Ie,Me,He):ge(We,Le,Ve,!0):(Ue&8&&I(fe,""),ot&16&&ae(Ge,fe,Be,Le,Ve,Ie,Me,He))},ie=(he,xe,fe,Be,Le,Ve,Ie,Me,He)=>{he=he||EMPTY_ARR,xe=xe||EMPTY_ARR;const We=he.length,Ue=xe.length,Ge=Math.min(We,Ue);let et;for(et=0;et<Ge;et++){const ot=xe[et]=He?cloneIfMounted(xe[et]):normalizeVNode(xe[et]);F(he[et],ot,fe,null,Le,Ve,Ie,Me,He)}We>Ue?ge(he,Le,Ve,!0,!1,Ge):ae(xe,fe,Be,Le,Ve,Ie,Me,He,Ge)},ne=(he,xe,fe,Be,Le,Ve,Ie,Me,He)=>{let We=0;const Ue=xe.length;let Ge=he.length-1,et=Ue-1;for(;We<=Ge&&We<=et;){const ot=he[We],ht=xe[We]=He?cloneIfMounted(xe[We]):normalizeVNode(xe[We]);if(isSameVNodeType(ot,ht))F(ot,ht,fe,null,Le,Ve,Ie,Me,He);else break;We++}for(;We<=Ge&&We<=et;){const ot=he[Ge],ht=xe[et]=He?cloneIfMounted(xe[et]):normalizeVNode(xe[et]);if(isSameVNodeType(ot,ht))F(ot,ht,fe,null,Le,Ve,Ie,Me,He);else break;Ge--,et--}if(We>Ge){if(We<=et){const ot=et+1,ht=ot<Ue?xe[ot].el:Be;for(;We<=et;)F(null,xe[We]=He?cloneIfMounted(xe[We]):normalizeVNode(xe[We]),fe,ht,Le,Ve,Ie,Me,He),We++}}else if(We>et)for(;We<=Ge;)K(he[We],Le,Ve,!0),We++;else{const ot=We,ht=We,Oe=new Map;for(We=ht;We<=et;We++){const Vt=xe[We]=He?cloneIfMounted(xe[We]):normalizeVNode(xe[We]);Vt.key!=null&&Oe.set(Vt.key,We)}let we,Ce=0;const ze=et-ht+1;let Ze=!1,st=0;const rt=new Array(ze);for(We=0;We<ze;We++)rt[We]=0;for(We=ot;We<=Ge;We++){const Vt=he[We];if(Ce>=ze){K(Vt,Le,Ve,!0);continue}let Et;if(Vt.key!=null)Et=Oe.get(Vt.key);else for(we=ht;we<=et;we++)if(rt[we-ht]===0&&isSameVNodeType(Vt,xe[we])){Et=we;break}Et===void 0?K(Vt,Le,Ve,!0):(rt[Et-ht]=We+1,Et>=st?st=Et:Ze=!0,F(Vt,xe[Et],fe,null,Le,Ve,Ie,Me,He),Ce++)}const Ft=Ze?getSequence(rt):EMPTY_ARR;for(we=Ft.length-1,We=ze-1;We>=0;We--){const Vt=ht+We,Et=xe[Vt],jt=Vt+1<Ue?xe[Vt+1].el:Be;rt[We]===0?F(null,Et,fe,jt,Le,Ve,Ie,Me,He):Ze&&(we<0||We!==Ft[we]?te(Et,fe,jt,2):we--)}}},te=(he,xe,fe,Be,Le=null)=>{const{el:Ve,type:Ie,transition:Me,children:He,shapeFlag:We}=he;if(We&6){te(he.component.subTree,xe,fe,Be);return}if(We&128){he.suspense.move(xe,fe,Be);return}if(We&64){Ie.move(he,xe,fe,Re);return}if(Ie===Fragment){x(Ve,xe,fe);for(let Ge=0;Ge<He.length;Ge++)te(He[Ge],xe,fe,Be);x(he.anchor,xe,fe);return}if(Ie===Static){q(he,xe,fe);return}if(Be!==2&&We&1&&Me)if(Be===0)Me.beforeEnter(Ve),x(Ve,xe,fe),queuePostRenderEffect(()=>Me.enter(Ve),Le);else{const{leave:Ge,delayLeave:et,afterLeave:ot}=Me,ht=()=>x(Ve,xe,fe),Oe=()=>{Ge(Ve,()=>{ht(),ot&&ot()})};et?et(Ve,ht,Oe):Oe()}else x(Ve,xe,fe)},K=(he,xe,fe,Be=!1,Le=!1)=>{const{type:Ve,props:Ie,ref:Me,children:He,dynamicChildren:We,shapeFlag:Ue,patchFlag:Ge,dirs:et}=he;if(Me!=null&&setRef(Me,null,fe,he,!0),Ue&256){xe.ctx.deactivate(he);return}const ot=Ue&1&&et,ht=!isAsyncWrapper(he);let Oe;if(ht&&(Oe=Ie&&Ie.onVnodeBeforeUnmount)&&invokeVNodeHook(Oe,xe,he),Ue&6)be(he.component,fe,Be);else{if(Ue&128){he.suspense.unmount(fe,Be);return}ot&&invokeDirectiveHook(he,null,xe,"beforeUnmount"),Ue&64?he.type.remove(he,xe,fe,Le,Re,Be):We&&(Ve!==Fragment||Ge>0&&Ge&64)?ge(We,xe,fe,!1,!0):(Ve===Fragment&&Ge&384||!Le&&Ue&16)&&ge(He,xe,fe),Be&&le(he)}(ht&&(Oe=Ie&&Ie.onVnodeUnmounted)||ot)&&queuePostRenderEffect(()=>{Oe&&invokeVNodeHook(Oe,xe,he),ot&&invokeDirectiveHook(he,null,xe,"unmounted")},fe)},le=he=>{const{type:xe,el:fe,anchor:Be,transition:Le}=he;if(xe===Fragment){ue(fe,Be);return}if(xe===Static){H(he);return}const Ve=()=>{S(fe),Le&&!Le.persisted&&Le.afterLeave&&Le.afterLeave()};if(he.shapeFlag&1&&Le&&!Le.persisted){const{leave:Ie,delayLeave:Me}=Le,He=()=>Ie(fe,Ve);Me?Me(he.el,Ve,He):He()}else Ve()},ue=(he,xe)=>{let fe;for(;he!==xe;)fe=V(he),S(he),he=fe;S(xe)},be=(he,xe,fe)=>{const{bum:Be,scope:Le,update:Ve,subTree:Ie,um:Me}=he;Be&&invokeArrayFns(Be),Le.stop(),Ve&&(Ve.active=!1,K(Ie,he,xe,fe)),Me&&queuePostRenderEffect(Me,xe),queuePostRenderEffect(()=>{he.isUnmounted=!0},xe),xe&&xe.pendingBranch&&!xe.isUnmounted&&he.asyncDep&&!he.asyncResolved&&he.suspenseId===xe.pendingId&&(xe.deps--,xe.deps===0&&xe.resolve())},ge=(he,xe,fe,Be=!1,Le=!1,Ve=0)=>{for(let Ie=Ve;Ie<he.length;Ie++)K(he[Ie],xe,fe,Be,Le)},ye=he=>he.shapeFlag&6?ye(he.component.subTree):he.shapeFlag&128?he.suspense.next():V(he.anchor||he.el),Ee=(he,xe,fe)=>{he==null?xe._vnode&&K(xe._vnode,null,null,!0):F(xe._vnode||null,he,xe,null,null,null,fe),flushPreFlushCbs(),flushPostFlushCbs(),xe._vnode=he},Re={p:F,um:K,m:te,r:le,mt:U,mc:ae,pc:oe,pbc:ve,n:ye,o:r};let Ne,Te;return n&&([Ne,Te]=n(Re)),{render:Ee,hydrate:Ne,createApp:createAppAPI(Ee,Ne)}}function toggleRecurse({effect:r,update:n},_){r.allowRecurse=n.allowRecurse=_}function traverseStaticChildren(r,n,_=!1){const x=r.children,S=n.children;if(isArray$9(x)&&isArray$9(S))for(let E=0;E<x.length;E++){const C=x[E];let T=S[E];T.shapeFlag&1&&!T.dynamicChildren&&((T.patchFlag<=0||T.patchFlag===32)&&(T=S[E]=cloneIfMounted(S[E]),T.el=C.el),_||traverseStaticChildren(C,T)),T.type===Text&&(T.el=C.el)}}function getSequence(r){const n=r.slice(),_=[0];let x,S,E,C,T;const B=r.length;for(x=0;x<B;x++){const A=r[x];if(A!==0){if(S=_[_.length-1],r[S]<A){n[x]=S,_.push(x);continue}for(E=0,C=_.length-1;E<C;)T=E+C>>1,r[_[T]]<A?E=T+1:C=T;A<r[_[E]]&&(E>0&&(n[x]=_[E-1]),_[E]=x)}}for(E=_.length,C=_[E-1];E-- >0;)_[E]=C,C=n[C];return _}const isTeleport=r=>r.__isTeleport,isTeleportDisabled=r=>r&&(r.disabled||r.disabled===""),isTargetSVG=r=>typeof SVGElement<"u"&&r instanceof SVGElement,resolveTarget=(r,n)=>{const _=r&&r.to;return isString$7(_)?n?n(_):null:_},TeleportImpl={__isTeleport:!0,process(r,n,_,x,S,E,C,T,B,A){const{mc:I,pc:N,pbc:V,o:{insert:D,querySelector:O,createText:F,createComment:M}}=A,L=isTeleportDisabled(n.props);let{shapeFlag:j,children:q,dynamicChildren:H}=n;if(r==null){const X=n.el=F(""),J=n.anchor=F("");D(X,_,x),D(J,_,x);const Z=n.target=resolveTarget(n.props,O),ae=n.targetAnchor=F("");Z&&(D(ae,Z),C=C||isTargetSVG(Z));const ce=(ve,pe)=>{j&16&&I(q,ve,pe,S,E,C,T,B)};L?ce(_,J):Z&&ce(Z,ae)}else{n.el=r.el;const X=n.anchor=r.anchor,J=n.target=r.target,Z=n.targetAnchor=r.targetAnchor,ae=isTeleportDisabled(r.props),ce=ae?_:J,ve=ae?X:Z;if(C=C||isTargetSVG(J),H?(V(r.dynamicChildren,H,ce,S,E,C,T),traverseStaticChildren(r,n,!0)):B||N(r,n,ce,ve,S,E,C,T,!1),L)ae||moveTeleport(n,_,X,A,1);else if((n.props&&n.props.to)!==(r.props&&r.props.to)){const pe=n.target=resolveTarget(n.props,O);pe&&moveTeleport(n,pe,null,A,0)}else ae&&moveTeleport(n,J,Z,A,1)}updateCssVars(n)},remove(r,n,_,x,{um:S,o:{remove:E}},C){const{shapeFlag:T,children:B,anchor:A,targetAnchor:I,target:N,props:V}=r;if(N&&E(I),(C||!isTeleportDisabled(V))&&(E(A),T&16))for(let D=0;D<B.length;D++){const O=B[D];S(O,n,_,!0,!!O.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(r,n,_,{o:{insert:x},m:S},E=2){E===0&&x(r.targetAnchor,n,_);const{el:C,anchor:T,shapeFlag:B,children:A,props:I}=r,N=E===2;if(N&&x(C,n,_),(!N||isTeleportDisabled(I))&&B&16)for(let V=0;V<A.length;V++)S(A[V],n,_,2);N&&x(T,n,_)}function hydrateTeleport(r,n,_,x,S,E,{o:{nextSibling:C,parentNode:T,querySelector:B}},A){const I=n.target=resolveTarget(n.props,B);if(I){const N=I._lpa||I.firstChild;if(n.shapeFlag&16)if(isTeleportDisabled(n.props))n.anchor=A(C(r),n,T(r),_,x,S,E),n.targetAnchor=N;else{n.anchor=C(r);let V=N;for(;V;)if(V=C(V),V&&V.nodeType===8&&V.data==="teleport anchor"){n.targetAnchor=V,I._lpa=n.targetAnchor&&C(n.targetAnchor);break}A(N,n,I,_,x,S,E)}updateCssVars(n)}return n.anchor&&C(n.anchor)}const Teleport=TeleportImpl;function updateCssVars(r){const n=r.ctx;if(n&&n.ut){let _=r.children[0].el;for(;_!==r.targetAnchor;)_.nodeType===1&&_.setAttribute("data-v-owner",n.uid),_=_.nextSibling;n.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(r=!1){blockStack.push(currentBlock=r?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(r){isBlockTreeEnabled+=r}function setupBlock(r){return r.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(r),r}function createElementBlock(r,n,_,x,S,E){return setupBlock(createBaseVNode(r,n,_,x,S,E,!0))}function createBlock(r,n,_,x,S){return setupBlock(createVNode(r,n,_,x,S,!0))}function isVNode$1(r){return r?r.__v_isVNode===!0:!1}function isSameVNodeType(r,n){return r.type===n.type&&r.key===n.key}const InternalObjectKey="__vInternal",normalizeKey=({key:r})=>r??null,normalizeRef=({ref:r,ref_key:n,ref_for:_})=>(typeof r=="number"&&(r=""+r),r!=null?isString$7(r)||isRef(r)||isFunction$4(r)?{i:currentRenderingInstance,r,k:n,f:!!_}:r:null);function createBaseVNode(r,n=null,_=null,x=0,S=null,E=r===Fragment?0:1,C=!1,T=!1){const B={__v_isVNode:!0,__v_skip:!0,type:r,props:n,key:n&&normalizeKey(n),ref:n&&normalizeRef(n),scopeId:currentScopeId,slotScopeIds:null,children:_,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:E,patchFlag:x,dynamicProps:S,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return T?(normalizeChildren(B,_),E&128&&r.normalize(B)):_&&(B.shapeFlag|=isString$7(_)?8:16),isBlockTreeEnabled>0&&!C&&currentBlock&&(B.patchFlag>0||E&6)&&B.patchFlag!==32&&currentBlock.push(B),B}const createVNode=_createVNode;function _createVNode(r,n=null,_=null,x=0,S=null,E=!1){if((!r||r===NULL_DYNAMIC_COMPONENT)&&(r=Comment),isVNode$1(r)){const T=cloneVNode(r,n,!0);return _&&normalizeChildren(T,_),isBlockTreeEnabled>0&&!E&&currentBlock&&(T.shapeFlag&6?currentBlock[currentBlock.indexOf(r)]=T:currentBlock.push(T)),T.patchFlag|=-2,T}if(isClassComponent(r)&&(r=r.__vccOpts),n){n=guardReactiveProps(n);let{class:T,style:B}=n;T&&!isString$7(T)&&(n.class=normalizeClass(T)),isObject$5(B)&&(isProxy(B)&&!isArray$9(B)&&(B=extend$2({},B)),n.style=normalizeStyle(B))}const C=isString$7(r)?1:isSuspense(r)?128:isTeleport(r)?64:isObject$5(r)?4:isFunction$4(r)?2:0;return createBaseVNode(r,n,_,x,S,C,E,!0)}function guardReactiveProps(r){return r?isProxy(r)||InternalObjectKey in r?extend$2({},r):r:null}function cloneVNode(r,n,_=!1){const{props:x,ref:S,patchFlag:E,children:C}=r,T=n?mergeProps(x||{},n):x;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:T,key:T&&normalizeKey(T),ref:n&&n.ref?_&&S?isArray$9(S)?S.concat(normalizeRef(n)):[S,normalizeRef(n)]:normalizeRef(n):S,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:C,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:n&&r.type!==Fragment?E===-1?16:E|16:E,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&cloneVNode(r.ssContent),ssFallback:r.ssFallback&&cloneVNode(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function createTextVNode(r=" ",n=0){return createVNode(Text,null,r,n)}function createCommentVNode(r="",n=!1){return n?(openBlock(),createBlock(Comment,null,r)):createVNode(Comment,null,r)}function normalizeVNode(r){return r==null||typeof r=="boolean"?createVNode(Comment):isArray$9(r)?createVNode(Fragment,null,r.slice()):typeof r=="object"?cloneIfMounted(r):createVNode(Text,null,String(r))}function cloneIfMounted(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:cloneVNode(r)}function normalizeChildren(r,n){let _=0;const{shapeFlag:x}=r;if(n==null)n=null;else if(isArray$9(n))_=16;else if(typeof n=="object")if(x&65){const S=n.default;S&&(S._c&&(S._d=!1),normalizeChildren(r,S()),S._c&&(S._d=!0));return}else{_=32;const S=n._;!S&&!(InternalObjectKey in n)?n._ctx=currentRenderingInstance:S===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?n._=1:(n._=2,r.patchFlag|=1024))}else isFunction$4(n)?(n={default:n,_ctx:currentRenderingInstance},_=32):(n=String(n),x&64?(_=16,n=[createTextVNode(n)]):_=8);r.children=n,r.shapeFlag|=_}function mergeProps(...r){const n={};for(let _=0;_<r.length;_++){const x=r[_];for(const S in x)if(S==="class")n.class!==x.class&&(n.class=normalizeClass([n.class,x.class]));else if(S==="style")n.style=normalizeStyle([n.style,x.style]);else if(isOn$1(S)){const E=n[S],C=x[S];C&&E!==C&&!(isArray$9(E)&&E.includes(C))&&(n[S]=E?[].concat(E,C):C)}else S!==""&&(n[S]=x[S])}return n}function invokeVNodeHook(r,n,_,x=null){callWithAsyncErrorHandling(r,n,7,[_,x])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(r,n,_){const x=r.type,S=(n?n.appContext:r.appContext)||emptyAppContext,E={uid:uid++,vnode:r,type:x,parent:n,appContext:S,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(S.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(x,S),emitsOptions:normalizeEmitsOptions(x,S),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:x.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:_,suspenseId:_?_.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return E.ctx={_:E},E.root=n?n.root:E,E.emit=emit$1.bind(null,E),r.ce&&r.ce(E),E}let currentInstance=null;const getCurrentInstance$1=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis$1()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis$1()[settersKey]=[]),globalCurrentInstanceSetters.push(r=>currentInstance=r),internalSetCurrentInstance=r=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(n=>n(r)):globalCurrentInstanceSetters[0](r)};const setCurrentInstance=r=>{internalSetCurrentInstance(r),r.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(r){return r.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(r,n=!1){isInSSRComponentSetup=n;const{props:_,children:x}=r.vnode,S=isStatefulComponent(r);initProps(r,_,S,n),initSlots(r,x);const E=S?setupStatefulComponent(r,n):void 0;return isInSSRComponentSetup=!1,E}function setupStatefulComponent(r,n){const _=r.type;r.accessCache=Object.create(null),r.proxy=markRaw(new Proxy(r.ctx,PublicInstanceProxyHandlers));const{setup:x}=_;if(x){const S=r.setupContext=x.length>1?createSetupContext(r):null;setCurrentInstance(r),pauseTracking();const E=callWithErrorHandling(x,r,0,[r.props,S]);if(resetTracking(),unsetCurrentInstance(),isPromise(E)){if(E.then(unsetCurrentInstance,unsetCurrentInstance),n)return E.then(C=>{handleSetupResult(r,C,n)}).catch(C=>{handleError(C,r,0)});r.asyncDep=E}else handleSetupResult(r,E,n)}else finishComponentSetup(r,n)}function handleSetupResult(r,n,_){isFunction$4(n)?r.type.__ssrInlineRender?r.ssrRender=n:r.render=n:isObject$5(n)&&(r.setupState=proxyRefs(n)),finishComponentSetup(r,_)}let compile$1;function finishComponentSetup(r,n,_){const x=r.type;if(!r.render){if(!n&&compile$1&&!x.render){const S=x.template||resolveMergedOptions(r).template;if(S){const{isCustomElement:E,compilerOptions:C}=r.appContext.config,{delimiters:T,compilerOptions:B}=x,A=extend$2(extend$2({isCustomElement:E,delimiters:T},C),B);x.render=compile$1(S,A)}}r.render=x.render||NOOP}setCurrentInstance(r),pauseTracking(),applyOptions(r),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(r){return r.attrsProxy||(r.attrsProxy=new Proxy(r.attrs,{get(n,_){return track(r,"get","$attrs"),n[_]}}))}function createSetupContext(r){const n=_=>{r.exposed=_||{}};return{get attrs(){return getAttrsProxy(r)},slots:r.slots,emit:r.emit,expose:n}}function getExposeProxy(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(proxyRefs(markRaw(r.exposed)),{get(n,_){if(_ in n)return n[_];if(_ in publicPropertiesMap)return publicPropertiesMap[_](r)},has(n,_){return _ in n||_ in publicPropertiesMap}}))}function getComponentName(r,n=!0){return isFunction$4(r)?r.displayName||r.name:r.name||n&&r.__name}function isClassComponent(r){return isFunction$4(r)&&"__vccOpts"in r}const computed=(r,n)=>computed$1(r,n,isInSSRComponentSetup);function h$1(r,n,_){const x=arguments.length;return x===2?isObject$5(n)&&!isArray$9(n)?isVNode$1(n)?createVNode(r,null,[n]):createVNode(r,n):createVNode(r,null,n):(x>3?_=Array.prototype.slice.call(arguments,2):x===3&&isVNode$1(_)&&(_=[_]),createVNode(r,n,_))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject$1(ssrContextKey),version$4="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(r,n,_)=>{n.insertBefore(r,_||null)},remove:r=>{const n=r.parentNode;n&&n.removeChild(r)},createElement:(r,n,_,x)=>{const S=n?doc.createElementNS(svgNS,r):doc.createElement(r,_?{is:_}:void 0);return r==="select"&&x&&x.multiple!=null&&S.setAttribute("multiple",x.multiple),S},createText:r=>doc.createTextNode(r),createComment:r=>doc.createComment(r),setText:(r,n)=>{r.nodeValue=n},setElementText:(r,n)=>{r.textContent=n},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>doc.querySelector(r),setScopeId(r,n){r.setAttribute(n,"")},insertStaticContent(r,n,_,x,S,E){const C=_?_.previousSibling:n.lastChild;if(S&&(S===E||S.nextSibling))for(;n.insertBefore(S.cloneNode(!0),_),!(S===E||!(S=S.nextSibling)););else{templateContainer.innerHTML=x?`<svg>${r}</svg>`:r;const T=templateContainer.content;if(x){const B=T.firstChild;for(;B.firstChild;)T.appendChild(B.firstChild);T.removeChild(B)}n.insertBefore(T,_)}return[C?C.nextSibling:n.firstChild,_?_.previousSibling:n.lastChild]}};function patchClass(r,n,_){const x=r._vtc;x&&(n=(n?[n,...x]:[...x]).join(" ")),n==null?r.removeAttribute("class"):_?r.setAttribute("class",n):r.className=n}function patchStyle(r,n,_){const x=r.style,S=isString$7(_);if(_&&!S){if(n&&!isString$7(n))for(const E in n)_[E]==null&&setStyle(x,E,"");for(const E in _)setStyle(x,E,_[E])}else{const E=x.display;S?n!==_&&(x.cssText=_):n&&r.removeAttribute("style"),"_vod"in r&&(x.display=E)}}const importantRE=/\s*!important$/;function setStyle(r,n,_){if(isArray$9(_))_.forEach(x=>setStyle(r,n,x));else if(_==null&&(_=""),n.startsWith("--"))r.setProperty(n,_);else{const x=autoPrefix(r,n);importantRE.test(_)?r.setProperty(hyphenate(x),_.replace(importantRE,""),"important"):r[x]=_}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(r,n){const _=prefixCache[n];if(_)return _;let x=camelize(n);if(x!=="filter"&&x in r)return prefixCache[n]=x;x=capitalize$1(x);for(let S=0;S<prefixes.length;S++){const E=prefixes[S]+x;if(E in r)return prefixCache[n]=E}return n}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(r,n,_,x,S){if(x&&n.startsWith("xlink:"))_==null?r.removeAttributeNS(xlinkNS,n.slice(6,n.length)):r.setAttributeNS(xlinkNS,n,_);else{const E=isSpecialBooleanAttr(n);_==null||E&&!includeBooleanAttr(_)?r.removeAttribute(n):r.setAttribute(n,E?"":_)}}function patchDOMProp(r,n,_,x,S,E,C){if(n==="innerHTML"||n==="textContent"){x&&C(x,S,E),r[n]=_??"";return}const T=r.tagName;if(n==="value"&&T!=="PROGRESS"&&!T.includes("-")){r._value=_;const A=T==="OPTION"?r.getAttribute("value"):r.value,I=_??"";A!==I&&(r.value=I),_==null&&r.removeAttribute(n);return}let B=!1;if(_===""||_==null){const A=typeof r[n];A==="boolean"?_=includeBooleanAttr(_):_==null&&A==="string"?(_="",B=!0):A==="number"&&(_=0,B=!0)}try{r[n]=_}catch{}B&&r.removeAttribute(n)}function addEventListener(r,n,_,x){r.addEventListener(n,_,x)}function removeEventListener(r,n,_,x){r.removeEventListener(n,_,x)}function patchEvent(r,n,_,x,S=null){const E=r._vei||(r._vei={}),C=E[n];if(x&&C)C.value=x;else{const[T,B]=parseName(n);if(x){const A=E[n]=createInvoker(x,S);addEventListener(r,T,A,B)}else C&&(removeEventListener(r,T,C,B),E[n]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(r){let n;if(optionsModifierRE.test(r)){n={};let x;for(;x=r.match(optionsModifierRE);)r=r.slice(0,r.length-x[0].length),n[x[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):hyphenate(r.slice(2)),n]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(r,n){const _=x=>{if(!x._vts)x._vts=Date.now();else if(x._vts<=_.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(x,_.value),n,5,[x])};return _.value=r,_.attached=getNow(),_}function patchStopImmediatePropagation(r,n){if(isArray$9(n)){const _=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{_.call(r),r._stopped=!0},n.map(x=>S=>!S._stopped&&x&&x(S))}else return n}const nativeOnRE=/^on[a-z]/,patchProp=(r,n,_,x,S=!1,E,C,T,B)=>{n==="class"?patchClass(r,x,S):n==="style"?patchStyle(r,_,x):isOn$1(n)?isModelListener(n)||patchEvent(r,n,_,x,C):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):shouldSetAsProp(r,n,x,S))?patchDOMProp(r,n,x,E,C,T,B):(n==="true-value"?r._trueValue=x:n==="false-value"&&(r._falseValue=x),patchAttr(r,n,x,S))};function shouldSetAsProp(r,n,_,x){return x?!!(n==="innerHTML"||n==="textContent"||n in r&&nativeOnRE.test(n)&&isFunction$4(_)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&r.tagName==="INPUT"||n==="type"&&r.tagName==="TEXTAREA"||nativeOnRE.test(n)&&isString$7(_)?!1:n in r}const TRANSITION="transition",ANIMATION="animation",Transition=(r,{slots:n})=>h$1(BaseTransition,resolveTransitionProps(r),n);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$2({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(r,n=[])=>{isArray$9(r)?r.forEach(_=>_(...n)):r&&r(...n)},hasExplicitCallback=r=>r?isArray$9(r)?r.some(n=>n.length>1):r.length>1:!1;function resolveTransitionProps(r){const n={};for(const G in r)G in DOMTransitionPropsValidators||(n[G]=r[G]);if(r.css===!1)return n;const{name:_="v",type:x,duration:S,enterFromClass:E=`${_}-enter-from`,enterActiveClass:C=`${_}-enter-active`,enterToClass:T=`${_}-enter-to`,appearFromClass:B=E,appearActiveClass:A=C,appearToClass:I=T,leaveFromClass:N=`${_}-leave-from`,leaveActiveClass:V=`${_}-leave-active`,leaveToClass:D=`${_}-leave-to`}=r,O=normalizeDuration(S),F=O&&O[0],M=O&&O[1],{onBeforeEnter:L,onEnter:j,onEnterCancelled:q,onLeave:H,onLeaveCancelled:X,onBeforeAppear:J=L,onAppear:Z=j,onAppearCancelled:ae=q}=n,ce=(G,Y,U)=>{removeTransitionClass(G,Y?I:T),removeTransitionClass(G,Y?A:C),U&&U()},ve=(G,Y)=>{G._isLeaving=!1,removeTransitionClass(G,N),removeTransitionClass(G,D),removeTransitionClass(G,V),Y&&Y()},pe=G=>(Y,U)=>{const W=G?Z:j,ee=()=>ce(Y,G,U);callHook(W,[Y,ee]),nextFrame(()=>{removeTransitionClass(Y,G?B:E),addTransitionClass(Y,G?I:T),hasExplicitCallback(W)||whenTransitionEnds(Y,x,F,ee)})};return extend$2(n,{onBeforeEnter(G){callHook(L,[G]),addTransitionClass(G,E),addTransitionClass(G,C)},onBeforeAppear(G){callHook(J,[G]),addTransitionClass(G,B),addTransitionClass(G,A)},onEnter:pe(!1),onAppear:pe(!0),onLeave(G,Y){G._isLeaving=!0;const U=()=>ve(G,Y);addTransitionClass(G,N),forceReflow(),addTransitionClass(G,V),nextFrame(()=>{G._isLeaving&&(removeTransitionClass(G,N),addTransitionClass(G,D),hasExplicitCallback(H)||whenTransitionEnds(G,x,M,U))}),callHook(H,[G,U])},onEnterCancelled(G){ce(G,!1),callHook(q,[G])},onAppearCancelled(G){ce(G,!0),callHook(ae,[G])},onLeaveCancelled(G){ve(G),callHook(X,[G])}})}function normalizeDuration(r){if(r==null)return null;if(isObject$5(r))return[NumberOf(r.enter),NumberOf(r.leave)];{const n=NumberOf(r);return[n,n]}}function NumberOf(r){return toNumber(r)}function addTransitionClass(r,n){n.split(/\s+/).forEach(_=>_&&r.classList.add(_)),(r._vtc||(r._vtc=new Set)).add(n)}function removeTransitionClass(r,n){n.split(/\s+/).forEach(x=>x&&r.classList.remove(x));const{_vtc:_}=r;_&&(_.delete(n),_.size||(r._vtc=void 0))}function nextFrame(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let endId=0;function whenTransitionEnds(r,n,_,x){const S=r._endId=++endId,E=()=>{S===r._endId&&x()};if(_)return setTimeout(E,_);const{type:C,timeout:T,propCount:B}=getTransitionInfo(r,n);if(!C)return x();const A=C+"end";let I=0;const N=()=>{r.removeEventListener(A,V),E()},V=D=>{D.target===r&&++I>=B&&N()};setTimeout(()=>{I<B&&N()},T+1),r.addEventListener(A,V)}function getTransitionInfo(r,n){const _=window.getComputedStyle(r),x=O=>(_[O]||"").split(", "),S=x(`${TRANSITION}Delay`),E=x(`${TRANSITION}Duration`),C=getTimeout(S,E),T=x(`${ANIMATION}Delay`),B=x(`${ANIMATION}Duration`),A=getTimeout(T,B);let I=null,N=0,V=0;n===TRANSITION?C>0&&(I=TRANSITION,N=C,V=E.length):n===ANIMATION?A>0&&(I=ANIMATION,N=A,V=B.length):(N=Math.max(C,A),I=N>0?C>A?TRANSITION:ANIMATION:null,V=I?I===TRANSITION?E.length:B.length:0);const D=I===TRANSITION&&/\b(transform|all)(,|$)/.test(x(`${TRANSITION}Property`).toString());return{type:I,timeout:N,propCount:V,hasTransform:D}}function getTimeout(r,n){for(;r.length<n.length;)r=r.concat(r);return Math.max(...n.map((_,x)=>toMs(_)+toMs(r[x])))}function toMs(r){return Number(r.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend$2({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(r,{slots:n}){const _=getCurrentInstance$1(),x=useTransitionState();let S,E;return onUpdated(()=>{if(!S.length)return;const C=r.moveClass||`${r.name||"v"}-move`;if(!hasCSSTransform(S[0].el,_.vnode.el,C))return;S.forEach(callPendingCbs),S.forEach(recordPosition);const T=S.filter(applyTranslation);forceReflow(),T.forEach(B=>{const A=B.el,I=A.style;addTransitionClass(A,C),I.transform=I.webkitTransform=I.transitionDuration="";const N=A._moveCb=V=>{V&&V.target!==A||(!V||/transform$/.test(V.propertyName))&&(A.removeEventListener("transitionend",N),A._moveCb=null,removeTransitionClass(A,C))};A.addEventListener("transitionend",N)})}),()=>{const C=toRaw(r),T=resolveTransitionProps(C);let B=C.tag||Fragment;S=E,E=n.default?getTransitionRawChildren(n.default()):[];for(let A=0;A<E.length;A++){const I=E[A];I.key!=null&&setTransitionHooks(I,resolveTransitionHooks(I,T,x,_))}if(S)for(let A=0;A<S.length;A++){const I=S[A];setTransitionHooks(I,resolveTransitionHooks(I,T,x,_)),positionMap.set(I,I.el.getBoundingClientRect())}return createVNode(B,null,E)}}},removeMode=r=>delete r.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(r){const n=r.el;n._moveCb&&n._moveCb(),n._enterCb&&n._enterCb()}function recordPosition(r){newPositionMap.set(r,r.el.getBoundingClientRect())}function applyTranslation(r){const n=positionMap.get(r),_=newPositionMap.get(r),x=n.left-_.left,S=n.top-_.top;if(x||S){const E=r.el.style;return E.transform=E.webkitTransform=`translate(${x}px,${S}px)`,E.transitionDuration="0s",r}}function hasCSSTransform(r,n,_){const x=r.cloneNode();r._vtc&&r._vtc.forEach(C=>{C.split(/\s+/).forEach(T=>T&&x.classList.remove(T))}),_.split(/\s+/).forEach(C=>C&&x.classList.add(C)),x.style.display="none";const S=n.nodeType===1?n:n.parentNode;S.appendChild(x);const{hasTransform:E}=getTransitionInfo(x);return S.removeChild(x),E}const getModelAssigner=r=>{const n=r.props["onUpdate:modelValue"]||!1;return isArray$9(n)?_=>invokeArrayFns(n,_):n};function onCompositionStart(r){r.target.composing=!0}function onCompositionEnd(r){const n=r.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const vModelText={created(r,{modifiers:{lazy:n,trim:_,number:x}},S){r._assign=getModelAssigner(S);const E=x||S.props&&S.props.type==="number";addEventListener(r,n?"change":"input",C=>{if(C.target.composing)return;let T=r.value;_&&(T=T.trim()),E&&(T=looseToNumber(T)),r._assign(T)}),_&&addEventListener(r,"change",()=>{r.value=r.value.trim()}),n||(addEventListener(r,"compositionstart",onCompositionStart),addEventListener(r,"compositionend",onCompositionEnd),addEventListener(r,"change",onCompositionEnd))},mounted(r,{value:n}){r.value=n??""},beforeUpdate(r,{value:n,modifiers:{lazy:_,trim:x,number:S}},E){if(r._assign=getModelAssigner(E),r.composing||document.activeElement===r&&r.type!=="range"&&(_||x&&r.value.trim()===n||(S||r.type==="number")&&looseToNumber(r.value)===n))return;const C=n??"";r.value!==C&&(r.value=C)}},systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,n)=>systemModifiers.some(_=>r[`${_}Key`]&&!n.includes(_))},withModifiers=(r,n)=>(_,...x)=>{for(let S=0;S<n.length;S++){const E=modifierGuards[n[S]];if(E&&E(_,n))return}return r(_,...x)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(r,n)=>_=>{if(!("key"in _))return;const x=hyphenate(_.key);if(n.some(S=>S===x||keyNames[S]===x))return r(_)},vShow={beforeMount(r,{value:n},{transition:_}){r._vod=r.style.display==="none"?"":r.style.display,_&&n?_.beforeEnter(r):setDisplay(r,n)},mounted(r,{value:n},{transition:_}){_&&n&&_.enter(r)},updated(r,{value:n,oldValue:_},{transition:x}){!n!=!_&&(x?n?(x.beforeEnter(r),setDisplay(r,!0),x.enter(r)):x.leave(r,()=>{setDisplay(r,!1)}):setDisplay(r,n))},beforeUnmount(r,{value:n}){setDisplay(r,n)}};function setDisplay(r,n){r.style.display=n?r._vod:"none"}const rendererOptions=extend$2({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...r)=>{const n=ensureRenderer().createApp(...r),{mount:_}=n;return n.mount=x=>{const S=normalizeContainer(x);if(!S)return;const E=n._component;!isFunction$4(E)&&!E.render&&!E.template&&(E.template=S.innerHTML),S.innerHTML="";const C=_(S,!1,S instanceof SVGElement);return S instanceof Element&&(S.removeAttribute("v-cloak"),S.setAttribute("data-v-app","")),C},n};function normalizeContainer(r){return isString$7(r)?document.querySelector(r):r}/*! js-cookie v3.0.5 | MIT */function assign$4(r){for(var n=1;n<arguments.length;n++){var _=arguments[n];for(var x in _)r[x]=_[x]}return r}var defaultConverter={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init$2(r,n){function _(S,E,C){if(!(typeof document>"u")){C=assign$4({},n,C),typeof C.expires=="number"&&(C.expires=new Date(Date.now()+C.expires*864e5)),C.expires&&(C.expires=C.expires.toUTCString()),S=encodeURIComponent(S).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var T="";for(var B in C)C[B]&&(T+="; "+B,C[B]!==!0&&(T+="="+C[B].split(";")[0]));return document.cookie=S+"="+r.write(E,S)+T}}function x(S){if(!(typeof document>"u"||arguments.length&&!S)){for(var E=document.cookie?document.cookie.split("; "):[],C={},T=0;T<E.length;T++){var B=E[T].split("="),A=B.slice(1).join("=");try{var I=decodeURIComponent(B[0]);if(C[I]=r.read(A,I),S===I)break}catch{}}return S?C[S]:C}}return Object.create({set:_,get:x,remove:function(S,E){_(S,"",assign$4({},E,{expires:-1}))},withAttributes:function(S){return init$2(this.converter,assign$4({},this.attributes,S))},withConverter:function(S){return init$2(assign$4({},this.converter,S),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(r)}})}var api$2=init$2(defaultConverter,{path:"/"}),events$1={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(n,_,x){return Function.prototype.apply.call(n,_,x)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:ReflectOwnKeys=function(n){return Object.getOwnPropertyNames(n)};function ProcessEmitWarning(r){console&&console.warn&&console.warn(r)}var NumberIsNaN=Number.isNaN||function(n){return n!==n};function EventEmitter$3(){EventEmitter$3.init.call(this)}events$1.exports=EventEmitter$3;var once_1=events$1.exports.once=once$1;EventEmitter$3.EventEmitter=EventEmitter$3;EventEmitter$3.prototype._events=void 0;EventEmitter$3.prototype._eventsCount=0;EventEmitter$3.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(EventEmitter$3,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(r){if(typeof r!="number"||r<0||NumberIsNaN(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");defaultMaxListeners=r}});EventEmitter$3.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$3.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||NumberIsNaN(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};function _getMaxListeners(r){return r._maxListeners===void 0?EventEmitter$3.defaultMaxListeners:r._maxListeners}EventEmitter$3.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$3.prototype.emit=function(n){for(var _=[],x=1;x<arguments.length;x++)_.push(arguments[x]);var S=n==="error",E=this._events;if(E!==void 0)S=S&&E.error===void 0;else if(!S)return!1;if(S){var C;if(_.length>0&&(C=_[0]),C instanceof Error)throw C;var T=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw T.context=C,T}var B=E[n];if(B===void 0)return!1;if(typeof B=="function")ReflectApply(B,this,_);else for(var A=B.length,I=arrayClone(B,A),x=0;x<A;++x)ReflectApply(I[x],this,_);return!0};function _addListener(r,n,_,x){var S,E,C;if(checkListener(_),E=r._events,E===void 0?(E=r._events=Object.create(null),r._eventsCount=0):(E.newListener!==void 0&&(r.emit("newListener",n,_.listener?_.listener:_),E=r._events),C=E[n]),C===void 0)C=E[n]=_,++r._eventsCount;else if(typeof C=="function"?C=E[n]=x?[_,C]:[C,_]:x?C.unshift(_):C.push(_),S=_getMaxListeners(r),S>0&&C.length>S&&!C.warned){C.warned=!0;var T=new Error("Possible EventEmitter memory leak detected. "+C.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");T.name="MaxListenersExceededWarning",T.emitter=r,T.type=n,T.count=C.length,ProcessEmitWarning(T)}return r}EventEmitter$3.prototype.addListener=function(n,_){return _addListener(this,n,_,!1)};EventEmitter$3.prototype.on=EventEmitter$3.prototype.addListener;EventEmitter$3.prototype.prependListener=function(n,_){return _addListener(this,n,_,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(r,n,_){var x={fired:!1,wrapFn:void 0,target:r,type:n,listener:_},S=onceWrapper.bind(x);return S.listener=_,x.wrapFn=S,S}EventEmitter$3.prototype.once=function(n,_){return checkListener(_),this.on(n,_onceWrap(this,n,_)),this};EventEmitter$3.prototype.prependOnceListener=function(n,_){return checkListener(_),this.prependListener(n,_onceWrap(this,n,_)),this};EventEmitter$3.prototype.removeListener=function(n,_){var x,S,E,C,T;if(checkListener(_),S=this._events,S===void 0)return this;if(x=S[n],x===void 0)return this;if(x===_||x.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete S[n],S.removeListener&&this.emit("removeListener",n,x.listener||_));else if(typeof x!="function"){for(E=-1,C=x.length-1;C>=0;C--)if(x[C]===_||x[C].listener===_){T=x[C].listener,E=C;break}if(E<0)return this;E===0?x.shift():spliceOne(x,E),x.length===1&&(S[n]=x[0]),S.removeListener!==void 0&&this.emit("removeListener",n,T||_)}return this};EventEmitter$3.prototype.off=EventEmitter$3.prototype.removeListener;EventEmitter$3.prototype.removeAllListeners=function(n){var _,x,S;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[n]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[n]),this;if(arguments.length===0){var E=Object.keys(x),C;for(S=0;S<E.length;++S)C=E[S],C!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_=x[n],typeof _=="function")this.removeListener(n,_);else if(_!==void 0)for(S=_.length-1;S>=0;S--)this.removeListener(n,_[S]);return this};function _listeners(r,n,_){var x=r._events;if(x===void 0)return[];var S=x[n];return S===void 0?[]:typeof S=="function"?_?[S.listener||S]:[S]:_?unwrapListeners(S):arrayClone(S,S.length)}EventEmitter$3.prototype.listeners=function(n){return _listeners(this,n,!0)};EventEmitter$3.prototype.rawListeners=function(n){return _listeners(this,n,!1)};EventEmitter$3.listenerCount=function(r,n){return typeof r.listenerCount=="function"?r.listenerCount(n):listenerCount$1.call(r,n)};EventEmitter$3.prototype.listenerCount=listenerCount$1;function listenerCount$1(r){var n=this._events;if(n!==void 0){var _=n[r];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}EventEmitter$3.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(r,n){for(var _=new Array(n),x=0;x<n;++x)_[x]=r[x];return _}function spliceOne(r,n){for(;n+1<r.length;n++)r[n]=r[n+1];r.pop()}function unwrapListeners(r){for(var n=new Array(r.length),_=0;_<n.length;++_)n[_]=r[_].listener||r[_];return n}function once$1(r,n){return new Promise(function(_,x){function S(C){r.removeListener(n,E),x(C)}function E(){typeof r.removeListener=="function"&&r.removeListener("error",S),_([].slice.call(arguments))}eventTargetAgnosticAddListener(r,n,E,{once:!0}),n!=="error"&&addErrorHandlerIfEventEmitter(r,S,{once:!0})})}function addErrorHandlerIfEventEmitter(r,n,_){typeof r.on=="function"&&eventTargetAgnosticAddListener(r,"error",n,_)}function eventTargetAgnosticAddListener(r,n,_,x){if(typeof r.on=="function")x.once?r.once(n,_):r.on(n,_);else if(typeof r.addEventListener=="function")r.addEventListener(n,function S(E){x.once&&r.removeEventListener(n,S),_(E)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var eventsExports=events$1.exports;const EventEmitter$4=getDefaultExportFromCjs(eventsExports);var isMergeableObject=function(n){return isNonNullObject(n)&&!isSpecial(n)};function isNonNullObject(r){return!!r&&typeof r=="object"}function isSpecial(r){var n=Object.prototype.toString.call(r);return n==="[object RegExp]"||n==="[object Date]"||isReactElement(r)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(r){return r.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(r){return Array.isArray(r)?[]:{}}function cloneUnlessOtherwiseSpecified(r,n){return n.clone!==!1&&n.isMergeableObject(r)?deepmerge(emptyTarget(r),r,n):r}function defaultArrayMerge(r,n,_){return r.concat(n).map(function(x){return cloneUnlessOtherwiseSpecified(x,_)})}function getMergeFunction(r,n){if(!n.customMerge)return deepmerge;var _=n.customMerge(r);return typeof _=="function"?_:deepmerge}function getEnumerableOwnPropertySymbols(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(n){return Object.propertyIsEnumerable.call(r,n)}):[]}function getKeys(r){return Object.keys(r).concat(getEnumerableOwnPropertySymbols(r))}function propertyIsOnObject(r,n){try{return n in r}catch{return!1}}function propertyIsUnsafe(r,n){return propertyIsOnObject(r,n)&&!(Object.hasOwnProperty.call(r,n)&&Object.propertyIsEnumerable.call(r,n))}function mergeObject(r,n,_){var x={};return _.isMergeableObject(r)&&getKeys(r).forEach(function(S){x[S]=cloneUnlessOtherwiseSpecified(r[S],_)}),getKeys(n).forEach(function(S){propertyIsUnsafe(r,S)||(propertyIsOnObject(r,S)&&_.isMergeableObject(n[S])?x[S]=getMergeFunction(S,_)(r[S],n[S],_):x[S]=cloneUnlessOtherwiseSpecified(n[S],_))}),x}function deepmerge(r,n,_){_=_||{},_.arrayMerge=_.arrayMerge||defaultArrayMerge,_.isMergeableObject=_.isMergeableObject||isMergeableObject,_.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var x=Array.isArray(n),S=Array.isArray(r),E=x===S;return E?x?_.arrayMerge(r,n,_):mergeObject(r,n,_):cloneUnlessOtherwiseSpecified(n,_)}deepmerge.all=function(n,_){if(!Array.isArray(n))throw new Error("first argument should be an array");return n.reduce(function(x,S){return deepmerge(x,S,_)},{})};var deepmerge_1=deepmerge,cjs=deepmerge_1;const merge$3=getDefaultExportFromCjs(cjs),___=" ",__="",__="/orbitdb/zdpuAqBsFnWsRo4DRZjyvDbuHXPck4PsD99GqUqnDaVMYYdRy/df20365f-e180-400f-b97c-945542c690f4",__="",__="/orbitdb/zdpuAtyjCoieAwksiuuvaYgVQfzFYSsB4isz5LuJqiiEnVdfS/283c823e-24ad-4881-9782-99fc753e5161",={___,__,__,__,__},scriptRel="modulepreload",assetsURL=function(r){return"/iug/"+r},seen={},__vitePreload=function(n,_,x){if(!_||_.length===0)return n();const S=document.getElementsByTagName("link");return Promise.all(_.map(E=>{if(E=assetsURL(E),E in seen)return;seen[E]=!0;const C=E.endsWith(".css"),T=C?'[rel="stylesheet"]':"";if(!!x)for(let I=S.length-1;I>=0;I--){const N=S[I];if(N.href===E&&(!C||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${E}"]${T}`))return;const A=document.createElement("link");if(A.rel=C?"stylesheet":scriptRel,C||(A.as="script",A.crossOrigin=""),A.href=E,document.head.appendChild(A),C)return new Promise((I,N)=>{A.addEventListener("load",I),A.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${E}`)))})})).then(()=>n()).catch(E=>{const C=new Event("vite:preloadError",{cancelable:!0});if(C.payload=E,window.dispatchEvent(C),!C.defaultPrevented)throw E})};var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init$1(){inited=!0;for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,_=r.length;n<_;++n)lookup$1[n]=r[n],revLookup[r.charCodeAt(n)]=n;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(r){inited||init$1();var n,_,x,S,E,C,T=r.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");E=r[T-2]==="="?2:r[T-1]==="="?1:0,C=new Arr(T*3/4-E),x=E>0?T-4:T;var B=0;for(n=0,_=0;n<x;n+=4,_+=3)S=revLookup[r.charCodeAt(n)]<<18|revLookup[r.charCodeAt(n+1)]<<12|revLookup[r.charCodeAt(n+2)]<<6|revLookup[r.charCodeAt(n+3)],C[B++]=S>>16&255,C[B++]=S>>8&255,C[B++]=S&255;return E===2?(S=revLookup[r.charCodeAt(n)]<<2|revLookup[r.charCodeAt(n+1)]>>4,C[B++]=S&255):E===1&&(S=revLookup[r.charCodeAt(n)]<<10|revLookup[r.charCodeAt(n+1)]<<4|revLookup[r.charCodeAt(n+2)]>>2,C[B++]=S>>8&255,C[B++]=S&255),C}function tripletToBase64(r){return lookup$1[r>>18&63]+lookup$1[r>>12&63]+lookup$1[r>>6&63]+lookup$1[r&63]}function encodeChunk(r,n,_){for(var x,S=[],E=n;E<_;E+=3)x=(r[E]<<16)+(r[E+1]<<8)+r[E+2],S.push(tripletToBase64(x));return S.join("")}function fromByteArray(r){inited||init$1();for(var n,_=r.length,x=_%3,S="",E=[],C=16383,T=0,B=_-x;T<B;T+=C)E.push(encodeChunk(r,T,T+C>B?B:T+C));return x===1?(n=r[_-1],S+=lookup$1[n>>2],S+=lookup$1[n<<4&63],S+="=="):x===2&&(n=(r[_-2]<<8)+r[_-1],S+=lookup$1[n>>10],S+=lookup$1[n>>4&63],S+=lookup$1[n<<2&63],S+="="),E.push(S),E.join("")}function read$5(r,n,_,x,S){var E,C,T=S*8-x-1,B=(1<<T)-1,A=B>>1,I=-7,N=_?S-1:0,V=_?-1:1,D=r[n+N];for(N+=V,E=D&(1<<-I)-1,D>>=-I,I+=T;I>0;E=E*256+r[n+N],N+=V,I-=8);for(C=E&(1<<-I)-1,E>>=-I,I+=x;I>0;C=C*256+r[n+N],N+=V,I-=8);if(E===0)E=1-A;else{if(E===B)return C?NaN:(D?-1:1)*(1/0);C=C+Math.pow(2,x),E=E-A}return(D?-1:1)*C*Math.pow(2,E-x)}function write$2(r,n,_,x,S,E){var C,T,B,A=E*8-S-1,I=(1<<A)-1,N=I>>1,V=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=x?0:E-1,O=x?1:-1,F=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(T=isNaN(n)?1:0,C=I):(C=Math.floor(Math.log(n)/Math.LN2),n*(B=Math.pow(2,-C))<1&&(C--,B*=2),C+N>=1?n+=V/B:n+=V*Math.pow(2,1-N),n*B>=2&&(C++,B/=2),C+N>=I?(T=0,C=I):C+N>=1?(T=(n*B-1)*Math.pow(2,S),C=C+N):(T=n*Math.pow(2,N-1)*Math.pow(2,S),C=0));S>=8;r[_+D]=T&255,D+=O,T/=256,S-=8);for(C=C<<S|T,A+=S;A>0;r[_+D]=C&255,D+=O,C/=256,A-=8);r[_+D-O]|=F*128}var toString$9={}.toString,isArray$8=Array.isArray||function(r){return toString$9.call(r)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var INSPECT_MAX_BYTES=50;Buffer$5.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==void 0?global$1.TYPED_ARRAY_SUPPORT:!0;kMaxLength();function kMaxLength(){return Buffer$5.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(r,n){if(kMaxLength()<n)throw new RangeError("Invalid typed array length");return Buffer$5.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(n),r.__proto__=Buffer$5.prototype):(r===null&&(r=new Buffer$5(n)),r.length=n),r}function Buffer$5(r,n,_){if(!Buffer$5.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer$5))return new Buffer$5(r,n,_);if(typeof r=="number"){if(typeof n=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe$1(this,r)}return from$7(this,r,n,_)}Buffer$5.poolSize=8192;Buffer$5._augment=function(r){return r.__proto__=Buffer$5.prototype,r};function from$7(r,n,_,x){if(typeof n=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer?fromArrayBuffer(r,n,_,x):typeof n=="string"?fromString$4(r,n,_):fromObject(r,n)}Buffer$5.from=function(r,n,_){return from$7(null,r,n,_)};Buffer$5.TYPED_ARRAY_SUPPORT&&(Buffer$5.prototype.__proto__=Uint8Array.prototype,Buffer$5.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer$5[Symbol.species]);function assertSize(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function alloc$3(r,n,_,x){return assertSize(n),n<=0?createBuffer(r,n):_!==void 0?typeof x=="string"?createBuffer(r,n).fill(_,x):createBuffer(r,n).fill(_):createBuffer(r,n)}Buffer$5.alloc=function(r,n,_){return alloc$3(null,r,n,_)};function allocUnsafe$1(r,n){if(assertSize(n),r=createBuffer(r,n<0?0:checked(n)|0),!Buffer$5.TYPED_ARRAY_SUPPORT)for(var _=0;_<n;++_)r[_]=0;return r}Buffer$5.allocUnsafe=function(r){return allocUnsafe$1(null,r)};Buffer$5.allocUnsafeSlow=function(r){return allocUnsafe$1(null,r)};function fromString$4(r,n,_){if((typeof _!="string"||_==="")&&(_="utf8"),!Buffer$5.isEncoding(_))throw new TypeError('"encoding" must be a valid string encoding');var x=byteLength$1(n,_)|0;r=createBuffer(r,x);var S=r.write(n,_);return S!==x&&(r=r.slice(0,S)),r}function fromArrayLike(r,n){var _=n.length<0?0:checked(n.length)|0;r=createBuffer(r,_);for(var x=0;x<_;x+=1)r[x]=n[x]&255;return r}function fromArrayBuffer(r,n,_,x){if(n.byteLength,_<0||n.byteLength<_)throw new RangeError("'offset' is out of bounds");if(n.byteLength<_+(x||0))throw new RangeError("'length' is out of bounds");return _===void 0&&x===void 0?n=new Uint8Array(n):x===void 0?n=new Uint8Array(n,_):n=new Uint8Array(n,_,x),Buffer$5.TYPED_ARRAY_SUPPORT?(r=n,r.__proto__=Buffer$5.prototype):r=fromArrayLike(r,n),r}function fromObject(r,n){if(internalIsBuffer(n)){var _=checked(n.length)|0;return r=createBuffer(r,_),r.length===0||n.copy(r,0,0,_),r}if(n){if(typeof ArrayBuffer<"u"&&n.buffer instanceof ArrayBuffer||"length"in n)return typeof n.length!="number"||isnan(n.length)?createBuffer(r,0):fromArrayLike(r,n);if(n.type==="Buffer"&&isArray$8(n.data))return fromArrayLike(r,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(r){if(r>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return r|0}Buffer$5.isBuffer=isBuffer$8;function internalIsBuffer(r){return!!(r!=null&&r._isBuffer)}Buffer$5.compare=function(n,_){if(!internalIsBuffer(n)||!internalIsBuffer(_))throw new TypeError("Arguments must be Buffers");if(n===_)return 0;for(var x=n.length,S=_.length,E=0,C=Math.min(x,S);E<C;++E)if(n[E]!==_[E]){x=n[E],S=_[E];break}return x<S?-1:S<x?1:0};Buffer$5.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer$5.concat=function(n,_){if(!isArray$8(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return Buffer$5.alloc(0);var x;if(_===void 0)for(_=0,x=0;x<n.length;++x)_+=n[x].length;var S=Buffer$5.allocUnsafe(_),E=0;for(x=0;x<n.length;++x){var C=n[x];if(!internalIsBuffer(C))throw new TypeError('"list" argument must be an Array of Buffers');C.copy(S,E),E+=C.length}return S};function byteLength$1(r,n){if(internalIsBuffer(r))return r.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var _=r.length;if(_===0)return 0;for(var x=!1;;)switch(n){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":case void 0:return utf8ToBytes$4(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _*2;case"hex":return _>>>1;case"base64":return base64ToBytes(r).length;default:if(x)return utf8ToBytes$4(r).length;n=(""+n).toLowerCase(),x=!0}}Buffer$5.byteLength=byteLength$1;function slowToString(r,n,_){var x=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((_===void 0||_>this.length)&&(_=this.length),_<=0)||(_>>>=0,n>>>=0,_<=n))return"";for(r||(r="utf8");;)switch(r){case"hex":return hexSlice(this,n,_);case"utf8":case"utf-8":return utf8Slice$2(this,n,_);case"ascii":return asciiSlice(this,n,_);case"latin1":case"binary":return latin1Slice(this,n,_);case"base64":return base64Slice(this,n,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,n,_);default:if(x)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),x=!0}}Buffer$5.prototype._isBuffer=!0;function swap(r,n,_){var x=r[n];r[n]=r[_],r[_]=x}Buffer$5.prototype.swap16=function(){var n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var _=0;_<n;_+=2)swap(this,_,_+1);return this};Buffer$5.prototype.swap32=function(){var n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var _=0;_<n;_+=4)swap(this,_,_+3),swap(this,_+1,_+2);return this};Buffer$5.prototype.swap64=function(){var n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var _=0;_<n;_+=8)swap(this,_,_+7),swap(this,_+1,_+6),swap(this,_+2,_+5),swap(this,_+3,_+4);return this};Buffer$5.prototype.toString=function(){var n=this.length|0;return n===0?"":arguments.length===0?utf8Slice$2(this,0,n):slowToString.apply(this,arguments)};Buffer$5.prototype.equals=function(n){if(!internalIsBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:Buffer$5.compare(this,n)===0};Buffer$5.prototype.inspect=function(){var n="",_=INSPECT_MAX_BYTES;return this.length>0&&(n=this.toString("hex",0,_).match(/.{2}/g).join(" "),this.length>_&&(n+=" ... ")),"<Buffer "+n+">"};Buffer$5.prototype.compare=function(n,_,x,S,E){if(!internalIsBuffer(n))throw new TypeError("Argument must be a Buffer");if(_===void 0&&(_=0),x===void 0&&(x=n?n.length:0),S===void 0&&(S=0),E===void 0&&(E=this.length),_<0||x>n.length||S<0||E>this.length)throw new RangeError("out of range index");if(S>=E&&_>=x)return 0;if(S>=E)return-1;if(_>=x)return 1;if(_>>>=0,x>>>=0,S>>>=0,E>>>=0,this===n)return 0;for(var C=E-S,T=x-_,B=Math.min(C,T),A=this.slice(S,E),I=n.slice(_,x),N=0;N<B;++N)if(A[N]!==I[N]){C=A[N],T=I[N];break}return C<T?-1:T<C?1:0};function bidirectionalIndexOf(r,n,_,x,S){if(r.length===0)return-1;if(typeof _=="string"?(x=_,_=0):_>2147483647?_=2147483647:_<-2147483648&&(_=-2147483648),_=+_,isNaN(_)&&(_=S?0:r.length-1),_<0&&(_=r.length+_),_>=r.length){if(S)return-1;_=r.length-1}else if(_<0)if(S)_=0;else return-1;if(typeof n=="string"&&(n=Buffer$5.from(n,x)),internalIsBuffer(n))return n.length===0?-1:arrayIndexOf(r,n,_,x,S);if(typeof n=="number")return n=n&255,Buffer$5.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?S?Uint8Array.prototype.indexOf.call(r,n,_):Uint8Array.prototype.lastIndexOf.call(r,n,_):arrayIndexOf(r,[n],_,x,S);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(r,n,_,x,S){var E=1,C=r.length,T=n.length;if(x!==void 0&&(x=String(x).toLowerCase(),x==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(r.length<2||n.length<2)return-1;E=2,C/=2,T/=2,_/=2}function B(D,O){return E===1?D[O]:D.readUInt16BE(O*E)}var A;if(S){var I=-1;for(A=_;A<C;A++)if(B(r,A)===B(n,I===-1?0:A-I)){if(I===-1&&(I=A),A-I+1===T)return I*E}else I!==-1&&(A-=A-I),I=-1}else for(_+T>C&&(_=C-T),A=_;A>=0;A--){for(var N=!0,V=0;V<T;V++)if(B(r,A+V)!==B(n,V)){N=!1;break}if(N)return A}return-1}Buffer$5.prototype.includes=function(n,_,x){return this.indexOf(n,_,x)!==-1};Buffer$5.prototype.indexOf=function(n,_,x){return bidirectionalIndexOf(this,n,_,x,!0)};Buffer$5.prototype.lastIndexOf=function(n,_,x){return bidirectionalIndexOf(this,n,_,x,!1)};function hexWrite(r,n,_,x){_=Number(_)||0;var S=r.length-_;x?(x=Number(x),x>S&&(x=S)):x=S;var E=n.length;if(E%2!==0)throw new TypeError("Invalid hex string");x>E/2&&(x=E/2);for(var C=0;C<x;++C){var T=parseInt(n.substr(C*2,2),16);if(isNaN(T))return C;r[_+C]=T}return C}function utf8Write(r,n,_,x){return blitBuffer(utf8ToBytes$4(n,r.length-_),r,_,x)}function asciiWrite(r,n,_,x){return blitBuffer(asciiToBytes(n),r,_,x)}function latin1Write(r,n,_,x){return asciiWrite(r,n,_,x)}function base64Write(r,n,_,x){return blitBuffer(base64ToBytes(n),r,_,x)}function ucs2Write(r,n,_,x){return blitBuffer(utf16leToBytes(n,r.length-_),r,_,x)}Buffer$5.prototype.write=function(n,_,x,S){if(_===void 0)S="utf8",x=this.length,_=0;else if(x===void 0&&typeof _=="string")S=_,x=this.length,_=0;else if(isFinite(_))_=_|0,isFinite(x)?(x=x|0,S===void 0&&(S="utf8")):(S=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var E=this.length-_;if((x===void 0||x>E)&&(x=E),n.length>0&&(x<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");S||(S="utf8");for(var C=!1;;)switch(S){case"hex":return hexWrite(this,n,_,x);case"utf8":case"utf-8":return utf8Write(this,n,_,x);case"ascii":return asciiWrite(this,n,_,x);case"latin1":case"binary":return latin1Write(this,n,_,x);case"base64":return base64Write(this,n,_,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,n,_,x);default:if(C)throw new TypeError("Unknown encoding: "+S);S=(""+S).toLowerCase(),C=!0}};Buffer$5.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(r,n,_){return n===0&&_===r.length?fromByteArray(r):fromByteArray(r.slice(n,_))}function utf8Slice$2(r,n,_){_=Math.min(r.length,_);for(var x=[],S=n;S<_;){var E=r[S],C=null,T=E>239?4:E>223?3:E>191?2:1;if(S+T<=_){var B,A,I,N;switch(T){case 1:E<128&&(C=E);break;case 2:B=r[S+1],(B&192)===128&&(N=(E&31)<<6|B&63,N>127&&(C=N));break;case 3:B=r[S+1],A=r[S+2],(B&192)===128&&(A&192)===128&&(N=(E&15)<<12|(B&63)<<6|A&63,N>2047&&(N<55296||N>57343)&&(C=N));break;case 4:B=r[S+1],A=r[S+2],I=r[S+3],(B&192)===128&&(A&192)===128&&(I&192)===128&&(N=(E&15)<<18|(B&63)<<12|(A&63)<<6|I&63,N>65535&&N<1114112&&(C=N))}}C===null?(C=65533,T=1):C>65535&&(C-=65536,x.push(C>>>10&1023|55296),C=56320|C&1023),x.push(C),S+=T}return decodeCodePointsArray$2(x)}var MAX_ARGUMENTS_LENGTH$2=4096;function decodeCodePointsArray$2(r){var n=r.length;if(n<=MAX_ARGUMENTS_LENGTH$2)return String.fromCharCode.apply(String,r);for(var _="",x=0;x<n;)_+=String.fromCharCode.apply(String,r.slice(x,x+=MAX_ARGUMENTS_LENGTH$2));return _}function asciiSlice(r,n,_){var x="";_=Math.min(r.length,_);for(var S=n;S<_;++S)x+=String.fromCharCode(r[S]&127);return x}function latin1Slice(r,n,_){var x="";_=Math.min(r.length,_);for(var S=n;S<_;++S)x+=String.fromCharCode(r[S]);return x}function hexSlice(r,n,_){var x=r.length;(!n||n<0)&&(n=0),(!_||_<0||_>x)&&(_=x);for(var S="",E=n;E<_;++E)S+=toHex$1(r[E]);return S}function utf16leSlice(r,n,_){for(var x=r.slice(n,_),S="",E=0;E<x.length;E+=2)S+=String.fromCharCode(x[E]+x[E+1]*256);return S}Buffer$5.prototype.slice=function(n,_){var x=this.length;n=~~n,_=_===void 0?x:~~_,n<0?(n+=x,n<0&&(n=0)):n>x&&(n=x),_<0?(_+=x,_<0&&(_=0)):_>x&&(_=x),_<n&&(_=n);var S;if(Buffer$5.TYPED_ARRAY_SUPPORT)S=this.subarray(n,_),S.__proto__=Buffer$5.prototype;else{var E=_-n;S=new Buffer$5(E,void 0);for(var C=0;C<E;++C)S[C]=this[C+n]}return S};function checkOffset(r,n,_){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+n>_)throw new RangeError("Trying to access beyond buffer length")}Buffer$5.prototype.readUIntLE=function(n,_,x){n=n|0,_=_|0,x||checkOffset(n,_,this.length);for(var S=this[n],E=1,C=0;++C<_&&(E*=256);)S+=this[n+C]*E;return S};Buffer$5.prototype.readUIntBE=function(n,_,x){n=n|0,_=_|0,x||checkOffset(n,_,this.length);for(var S=this[n+--_],E=1;_>0&&(E*=256);)S+=this[n+--_]*E;return S};Buffer$5.prototype.readUInt8=function(n,_){return _||checkOffset(n,1,this.length),this[n]};Buffer$5.prototype.readUInt16LE=function(n,_){return _||checkOffset(n,2,this.length),this[n]|this[n+1]<<8};Buffer$5.prototype.readUInt16BE=function(n,_){return _||checkOffset(n,2,this.length),this[n]<<8|this[n+1]};Buffer$5.prototype.readUInt32LE=function(n,_){return _||checkOffset(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216};Buffer$5.prototype.readUInt32BE=function(n,_){return _||checkOffset(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])};Buffer$5.prototype.readIntLE=function(n,_,x){n=n|0,_=_|0,x||checkOffset(n,_,this.length);for(var S=this[n],E=1,C=0;++C<_&&(E*=256);)S+=this[n+C]*E;return E*=128,S>=E&&(S-=Math.pow(2,8*_)),S};Buffer$5.prototype.readIntBE=function(n,_,x){n=n|0,_=_|0,x||checkOffset(n,_,this.length);for(var S=_,E=1,C=this[n+--S];S>0&&(E*=256);)C+=this[n+--S]*E;return E*=128,C>=E&&(C-=Math.pow(2,8*_)),C};Buffer$5.prototype.readInt8=function(n,_){return _||checkOffset(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]};Buffer$5.prototype.readInt16LE=function(n,_){_||checkOffset(n,2,this.length);var x=this[n]|this[n+1]<<8;return x&32768?x|4294901760:x};Buffer$5.prototype.readInt16BE=function(n,_){_||checkOffset(n,2,this.length);var x=this[n+1]|this[n]<<8;return x&32768?x|4294901760:x};Buffer$5.prototype.readInt32LE=function(n,_){return _||checkOffset(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24};Buffer$5.prototype.readInt32BE=function(n,_){return _||checkOffset(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]};Buffer$5.prototype.readFloatLE=function(n,_){return _||checkOffset(n,4,this.length),read$5(this,n,!0,23,4)};Buffer$5.prototype.readFloatBE=function(n,_){return _||checkOffset(n,4,this.length),read$5(this,n,!1,23,4)};Buffer$5.prototype.readDoubleLE=function(n,_){return _||checkOffset(n,8,this.length),read$5(this,n,!0,52,8)};Buffer$5.prototype.readDoubleBE=function(n,_){return _||checkOffset(n,8,this.length),read$5(this,n,!1,52,8)};function checkInt(r,n,_,x,S,E){if(!internalIsBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>S||n<E)throw new RangeError('"value" argument is out of bounds');if(_+x>r.length)throw new RangeError("Index out of range")}Buffer$5.prototype.writeUIntLE=function(n,_,x,S){if(n=+n,_=_|0,x=x|0,!S){var E=Math.pow(2,8*x)-1;checkInt(this,n,_,x,E,0)}var C=1,T=0;for(this[_]=n&255;++T<x&&(C*=256);)this[_+T]=n/C&255;return _+x};Buffer$5.prototype.writeUIntBE=function(n,_,x,S){if(n=+n,_=_|0,x=x|0,!S){var E=Math.pow(2,8*x)-1;checkInt(this,n,_,x,E,0)}var C=x-1,T=1;for(this[_+C]=n&255;--C>=0&&(T*=256);)this[_+C]=n/T&255;return _+x};Buffer$5.prototype.writeUInt8=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,1,255,0),Buffer$5.TYPED_ARRAY_SUPPORT||(n=Math.floor(n)),this[_]=n&255,_+1};function objectWriteUInt16(r,n,_,x){n<0&&(n=65535+n+1);for(var S=0,E=Math.min(r.length-_,2);S<E;++S)r[_+S]=(n&255<<8*(x?S:1-S))>>>(x?S:1-S)*8}Buffer$5.prototype.writeUInt16LE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,2,65535,0),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n&255,this[_+1]=n>>>8):objectWriteUInt16(this,n,_,!0),_+2};Buffer$5.prototype.writeUInt16BE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,2,65535,0),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n>>>8,this[_+1]=n&255):objectWriteUInt16(this,n,_,!1),_+2};function objectWriteUInt32(r,n,_,x){n<0&&(n=4294967295+n+1);for(var S=0,E=Math.min(r.length-_,4);S<E;++S)r[_+S]=n>>>(x?S:3-S)*8&255}Buffer$5.prototype.writeUInt32LE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,4,4294967295,0),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_+3]=n>>>24,this[_+2]=n>>>16,this[_+1]=n>>>8,this[_]=n&255):objectWriteUInt32(this,n,_,!0),_+4};Buffer$5.prototype.writeUInt32BE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,4,4294967295,0),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n>>>24,this[_+1]=n>>>16,this[_+2]=n>>>8,this[_+3]=n&255):objectWriteUInt32(this,n,_,!1),_+4};Buffer$5.prototype.writeIntLE=function(n,_,x,S){if(n=+n,_=_|0,!S){var E=Math.pow(2,8*x-1);checkInt(this,n,_,x,E-1,-E)}var C=0,T=1,B=0;for(this[_]=n&255;++C<x&&(T*=256);)n<0&&B===0&&this[_+C-1]!==0&&(B=1),this[_+C]=(n/T>>0)-B&255;return _+x};Buffer$5.prototype.writeIntBE=function(n,_,x,S){if(n=+n,_=_|0,!S){var E=Math.pow(2,8*x-1);checkInt(this,n,_,x,E-1,-E)}var C=x-1,T=1,B=0;for(this[_+C]=n&255;--C>=0&&(T*=256);)n<0&&B===0&&this[_+C+1]!==0&&(B=1),this[_+C]=(n/T>>0)-B&255;return _+x};Buffer$5.prototype.writeInt8=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,1,127,-128),Buffer$5.TYPED_ARRAY_SUPPORT||(n=Math.floor(n)),n<0&&(n=255+n+1),this[_]=n&255,_+1};Buffer$5.prototype.writeInt16LE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,2,32767,-32768),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n&255,this[_+1]=n>>>8):objectWriteUInt16(this,n,_,!0),_+2};Buffer$5.prototype.writeInt16BE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,2,32767,-32768),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n>>>8,this[_+1]=n&255):objectWriteUInt16(this,n,_,!1),_+2};Buffer$5.prototype.writeInt32LE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,4,2147483647,-2147483648),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n&255,this[_+1]=n>>>8,this[_+2]=n>>>16,this[_+3]=n>>>24):objectWriteUInt32(this,n,_,!0),_+4};Buffer$5.prototype.writeInt32BE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n>>>24,this[_+1]=n>>>16,this[_+2]=n>>>8,this[_+3]=n&255):objectWriteUInt32(this,n,_,!1),_+4};function checkIEEE754(r,n,_,x,S,E){if(_+x>r.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("Index out of range")}function writeFloat(r,n,_,x,S){return S||checkIEEE754(r,n,_,4),write$2(r,n,_,x,23,4),_+4}Buffer$5.prototype.writeFloatLE=function(n,_,x){return writeFloat(this,n,_,!0,x)};Buffer$5.prototype.writeFloatBE=function(n,_,x){return writeFloat(this,n,_,!1,x)};function writeDouble(r,n,_,x,S){return S||checkIEEE754(r,n,_,8),write$2(r,n,_,x,52,8),_+8}Buffer$5.prototype.writeDoubleLE=function(n,_,x){return writeDouble(this,n,_,!0,x)};Buffer$5.prototype.writeDoubleBE=function(n,_,x){return writeDouble(this,n,_,!1,x)};Buffer$5.prototype.copy=function(n,_,x,S){if(x||(x=0),!S&&S!==0&&(S=this.length),_>=n.length&&(_=n.length),_||(_=0),S>0&&S<x&&(S=x),S===x||n.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("sourceStart out of bounds");if(S<0)throw new RangeError("sourceEnd out of bounds");S>this.length&&(S=this.length),n.length-_<S-x&&(S=n.length-_+x);var E=S-x,C;if(this===n&&x<_&&_<S)for(C=E-1;C>=0;--C)n[C+_]=this[C+x];else if(E<1e3||!Buffer$5.TYPED_ARRAY_SUPPORT)for(C=0;C<E;++C)n[C+_]=this[C+x];else Uint8Array.prototype.set.call(n,this.subarray(x,x+E),_);return E};Buffer$5.prototype.fill=function(n,_,x,S){if(typeof n=="string"){if(typeof _=="string"?(S=_,_=0,x=this.length):typeof x=="string"&&(S=x,x=this.length),n.length===1){var E=n.charCodeAt(0);E<256&&(n=E)}if(S!==void 0&&typeof S!="string")throw new TypeError("encoding must be a string");if(typeof S=="string"&&!Buffer$5.isEncoding(S))throw new TypeError("Unknown encoding: "+S)}else typeof n=="number"&&(n=n&255);if(_<0||this.length<_||this.length<x)throw new RangeError("Out of range index");if(x<=_)return this;_=_>>>0,x=x===void 0?this.length:x>>>0,n||(n=0);var C;if(typeof n=="number")for(C=_;C<x;++C)this[C]=n;else{var T=internalIsBuffer(n)?n:utf8ToBytes$4(new Buffer$5(n,S).toString()),B=T.length;for(C=0;C<x-_;++C)this[C+_]=T[C%B]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(r){if(r=stringtrim(r).replace(INVALID_BASE64_RE,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function stringtrim(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function toHex$1(r){return r<16?"0"+r.toString(16):r.toString(16)}function utf8ToBytes$4(r,n){n=n||1/0;for(var _,x=r.length,S=null,E=[],C=0;C<x;++C){if(_=r.charCodeAt(C),_>55295&&_<57344){if(!S){if(_>56319){(n-=3)>-1&&E.push(239,191,189);continue}else if(C+1===x){(n-=3)>-1&&E.push(239,191,189);continue}S=_;continue}if(_<56320){(n-=3)>-1&&E.push(239,191,189),S=_;continue}_=(S-55296<<10|_-56320)+65536}else S&&(n-=3)>-1&&E.push(239,191,189);if(S=null,_<128){if((n-=1)<0)break;E.push(_)}else if(_<2048){if((n-=2)<0)break;E.push(_>>6|192,_&63|128)}else if(_<65536){if((n-=3)<0)break;E.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((n-=4)<0)break;E.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return E}function asciiToBytes(r){for(var n=[],_=0;_<r.length;++_)n.push(r.charCodeAt(_)&255);return n}function utf16leToBytes(r,n){for(var _,x,S,E=[],C=0;C<r.length&&!((n-=2)<0);++C)_=r.charCodeAt(C),x=_>>8,S=_%256,E.push(S),E.push(x);return E}function base64ToBytes(r){return toByteArray(base64clean(r))}function blitBuffer(r,n,_,x){for(var S=0;S<x&&!(S+_>=n.length||S>=r.length);++S)n[S+_]=r[S];return S}function isnan(r){return r!==r}function isBuffer$8(r){return r!=null&&(!!r._isBuffer||isFastBuffer(r)||isSlowBuffer(r))}function isFastBuffer(r){return!!r.constructor&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function isSlowBuffer(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&isFastBuffer(r.slice(0,0))}function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;typeof global$1.setTimeout=="function"&&(cachedSetTimeout=setTimeout);typeof global$1.clearTimeout=="function"&&(cachedClearTimeout=clearTimeout);function runTimeout(r){if(cachedSetTimeout===setTimeout)return setTimeout(r,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(r,0);try{return cachedSetTimeout(r,0)}catch{try{return cachedSetTimeout.call(null,r,0)}catch{return cachedSetTimeout.call(this,r,0)}}}function runClearTimeout(r){if(cachedClearTimeout===clearTimeout)return clearTimeout(r);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(r);try{return cachedClearTimeout(r)}catch{try{return cachedClearTimeout.call(null,r)}catch{return cachedClearTimeout.call(this,r)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var r=runTimeout(cleanUpNextTick);draining=!0;for(var n=queue.length;n;){for(currentQueue=queue,queue=[];++queueIndex<n;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,n=queue.length}currentQueue=null,draining=!1,runClearTimeout(r)}}function nextTick$1(r){var n=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)n[_-1]=arguments[_];queue.push(new Item(r,n)),queue.length===1&&!draining&&runTimeout(drainQueue)}function Item(r,n){this.fun=r,this.array=n}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title$1="browser",platform$2="browser",browser$e=!0,env={},argv=[],version$3="",versions={},release={},config={};function noop$9(){}var on=noop$9,addListener=noop$9,once=noop$9,off=noop$9,removeListener=noop$9,removeAllListeners=noop$9,emit=noop$9;function binding(r){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(r){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance$1=global$1.performance||{},performanceNow=performance$1.now||performance$1.mozNow||performance$1.msNow||performance$1.oNow||performance$1.webkitNow||function(){return new Date().getTime()};function hrtime(r){var n=performanceNow.call(performance$1)*.001,_=Math.floor(n),x=Math.floor(n%1*1e9);return r&&(_=_-r[0],x=x-r[1],x<0&&(_--,x+=1e9)),[_,x]}var startTime=new Date;function uptime(){var r=new Date,n=r-startTime;return n/1e3}var browser$1$1={nextTick:nextTick$1,title:title$1,browser:browser$e,env,argv,version:version$3,versions,on,addListener,once,off,removeListener,removeAllListeners,emit,binding,cwd,chdir,umask,hrtime,platform:platform$2,release,config,uptime};function commonjsRequire(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jszip_min={exports:{}};(function(r,n){(function(_){r.exports=_()})(function(){return function _(x,S,E){function C(A,I){if(!S[A]){if(!x[A]){var N=typeof commonjsRequire=="function"&&commonjsRequire;if(!I&&N)return N(A,!0);if(T)return T(A,!0);var V=new Error("Cannot find module '"+A+"'");throw V.code="MODULE_NOT_FOUND",V}var D=S[A]={exports:{}};x[A][0].call(D.exports,function(O){var F=x[A][1][O];return C(F||O)},D,D.exports,_,x,S,E)}return S[A].exports}for(var T=typeof commonjsRequire=="function"&&commonjsRequire,B=0;B<E.length;B++)C(E[B]);return C}({1:[function(_,x,S){var E=_("./utils"),C=_("./support"),T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";S.encode=function(B){for(var A,I,N,V,D,O,F,M=[],L=0,j=B.length,q=j,H=E.getTypeOf(B)!=="string";L<B.length;)q=j-L,N=H?(A=B[L++],I=L<j?B[L++]:0,L<j?B[L++]:0):(A=B.charCodeAt(L++),I=L<j?B.charCodeAt(L++):0,L<j?B.charCodeAt(L++):0),V=A>>2,D=(3&A)<<4|I>>4,O=1<q?(15&I)<<2|N>>6:64,F=2<q?63&N:64,M.push(T.charAt(V)+T.charAt(D)+T.charAt(O)+T.charAt(F));return M.join("")},S.decode=function(B){var A,I,N,V,D,O,F=0,M=0,L="data:";if(B.substr(0,L.length)===L)throw new Error("Invalid base64 input, it looks like a data url.");var j,q=3*(B=B.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(B.charAt(B.length-1)===T.charAt(64)&&q--,B.charAt(B.length-2)===T.charAt(64)&&q--,q%1!=0)throw new Error("Invalid base64 input, bad content length.");for(j=C.uint8array?new Uint8Array(0|q):new Array(0|q);F<B.length;)A=T.indexOf(B.charAt(F++))<<2|(V=T.indexOf(B.charAt(F++)))>>4,I=(15&V)<<4|(D=T.indexOf(B.charAt(F++)))>>2,N=(3&D)<<6|(O=T.indexOf(B.charAt(F++))),j[M++]=A,D!==64&&(j[M++]=I),O!==64&&(j[M++]=N);return j}},{"./support":30,"./utils":32}],2:[function(_,x,S){var E=_("./external"),C=_("./stream/DataWorker"),T=_("./stream/Crc32Probe"),B=_("./stream/DataLengthProbe");function A(I,N,V,D,O){this.compressedSize=I,this.uncompressedSize=N,this.crc32=V,this.compression=D,this.compressedContent=O}A.prototype={getContentWorker:function(){var I=new C(E.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new B("data_length")),N=this;return I.on("end",function(){if(this.streamInfo.data_length!==N.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),I},getCompressedWorker:function(){return new C(E.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},A.createWorkerFrom=function(I,N,V){return I.pipe(new T).pipe(new B("uncompressedSize")).pipe(N.compressWorker(V)).pipe(new B("compressedSize")).withStreamInfo("compression",N)},x.exports=A},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(_,x,S){var E=_("./stream/GenericWorker");S.STORE={magic:"\0\0",compressWorker:function(){return new E("STORE compression")},uncompressWorker:function(){return new E("STORE decompression")}},S.DEFLATE=_("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(_,x,S){var E=_("./utils"),C=function(){for(var T,B=[],A=0;A<256;A++){T=A;for(var I=0;I<8;I++)T=1&T?3988292384^T>>>1:T>>>1;B[A]=T}return B}();x.exports=function(T,B){return T!==void 0&&T.length?E.getTypeOf(T)!=="string"?function(A,I,N,V){var D=C,O=V+N;A^=-1;for(var F=V;F<O;F++)A=A>>>8^D[255&(A^I[F])];return-1^A}(0|B,T,T.length,0):function(A,I,N,V){var D=C,O=V+N;A^=-1;for(var F=V;F<O;F++)A=A>>>8^D[255&(A^I.charCodeAt(F))];return-1^A}(0|B,T,T.length,0):0}},{"./utils":32}],5:[function(_,x,S){S.base64=!1,S.binary=!1,S.dir=!1,S.createFolders=!0,S.date=null,S.compression=null,S.compressionOptions=null,S.comment=null,S.unixPermissions=null,S.dosPermissions=null},{}],6:[function(_,x,S){var E=null;E=typeof Promise<"u"?Promise:_("lie"),x.exports={Promise:E}},{lie:37}],7:[function(_,x,S){var E=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",C=_("pako"),T=_("./utils"),B=_("./stream/GenericWorker"),A=E?"uint8array":"array";function I(N,V){B.call(this,"FlateWorker/"+N),this._pako=null,this._pakoAction=N,this._pakoOptions=V,this.meta={}}S.magic="\b\0",T.inherits(I,B),I.prototype.processChunk=function(N){this.meta=N.meta,this._pako===null&&this._createPako(),this._pako.push(T.transformTo(A,N.data),!1)},I.prototype.flush=function(){B.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},I.prototype.cleanUp=function(){B.prototype.cleanUp.call(this),this._pako=null},I.prototype._createPako=function(){this._pako=new C[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var N=this;this._pako.onData=function(V){N.push({data:V,meta:N.meta})}},S.compressWorker=function(N){return new I("Deflate",N)},S.uncompressWorker=function(){return new I("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(_,x,S){function E(D,O){var F,M="";for(F=0;F<O;F++)M+=String.fromCharCode(255&D),D>>>=8;return M}function C(D,O,F,M,L,j){var q,H,X=D.file,J=D.compression,Z=j!==A.utf8encode,ae=T.transformTo("string",j(X.name)),ce=T.transformTo("string",A.utf8encode(X.name)),ve=X.comment,pe=T.transformTo("string",j(ve)),G=T.transformTo("string",A.utf8encode(ve)),Y=ce.length!==X.name.length,U=G.length!==ve.length,W="",ee="",re="",oe=X.dir,ie=X.date,ne={crc32:0,compressedSize:0,uncompressedSize:0};O&&!F||(ne.crc32=D.crc32,ne.compressedSize=D.compressedSize,ne.uncompressedSize=D.uncompressedSize);var te=0;O&&(te|=8),Z||!Y&&!U||(te|=2048);var K=0,le=0;oe&&(K|=16),L==="UNIX"?(le=798,K|=function(be,ge){var ye=be;return be||(ye=ge?16893:33204),(65535&ye)<<16}(X.unixPermissions,oe)):(le=20,K|=function(be){return 63&(be||0)}(X.dosPermissions)),q=ie.getUTCHours(),q<<=6,q|=ie.getUTCMinutes(),q<<=5,q|=ie.getUTCSeconds()/2,H=ie.getUTCFullYear()-1980,H<<=4,H|=ie.getUTCMonth()+1,H<<=5,H|=ie.getUTCDate(),Y&&(ee=E(1,1)+E(I(ae),4)+ce,W+="up"+E(ee.length,2)+ee),U&&(re=E(1,1)+E(I(pe),4)+G,W+="uc"+E(re.length,2)+re);var ue="";return ue+=`
\0`,ue+=E(te,2),ue+=J.magic,ue+=E(q,2),ue+=E(H,2),ue+=E(ne.crc32,4),ue+=E(ne.compressedSize,4),ue+=E(ne.uncompressedSize,4),ue+=E(ae.length,2),ue+=E(W.length,2),{fileRecord:N.LOCAL_FILE_HEADER+ue+ae+W,dirRecord:N.CENTRAL_FILE_HEADER+E(le,2)+ue+E(pe.length,2)+"\0\0\0\0"+E(K,4)+E(M,4)+ae+W+pe}}var T=_("../utils"),B=_("../stream/GenericWorker"),A=_("../utf8"),I=_("../crc32"),N=_("../signature");function V(D,O,F,M){B.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=O,this.zipPlatform=F,this.encodeFileName=M,this.streamFiles=D,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}T.inherits(V,B),V.prototype.push=function(D){var O=D.meta.percent||0,F=this.entriesCount,M=this._sources.length;this.accumulate?this.contentBuffer.push(D):(this.bytesWritten+=D.data.length,B.prototype.push.call(this,{data:D.data,meta:{currentFile:this.currentFile,percent:F?(O+100*(F-M-1))/F:100}}))},V.prototype.openedSource=function(D){this.currentSourceOffset=this.bytesWritten,this.currentFile=D.file.name;var O=this.streamFiles&&!D.file.dir;if(O){var F=C(D,O,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:F.fileRecord,meta:{percent:0}})}else this.accumulate=!0},V.prototype.closedSource=function(D){this.accumulate=!1;var O=this.streamFiles&&!D.file.dir,F=C(D,O,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(F.dirRecord),O)this.push({data:function(M){return N.DATA_DESCRIPTOR+E(M.crc32,4)+E(M.compressedSize,4)+E(M.uncompressedSize,4)}(D),meta:{percent:100}});else for(this.push({data:F.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},V.prototype.flush=function(){for(var D=this.bytesWritten,O=0;O<this.dirRecords.length;O++)this.push({data:this.dirRecords[O],meta:{percent:100}});var F=this.bytesWritten-D,M=function(L,j,q,H,X){var J=T.transformTo("string",X(H));return N.CENTRAL_DIRECTORY_END+"\0\0\0\0"+E(L,2)+E(L,2)+E(j,4)+E(q,4)+E(J.length,2)+J}(this.dirRecords.length,F,D,this.zipComment,this.encodeFileName);this.push({data:M,meta:{percent:100}})},V.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},V.prototype.registerPrevious=function(D){this._sources.push(D);var O=this;return D.on("data",function(F){O.processChunk(F)}),D.on("end",function(){O.closedSource(O.previous.streamInfo),O._sources.length?O.prepareNextSource():O.end()}),D.on("error",function(F){O.error(F)}),this},V.prototype.resume=function(){return!!B.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},V.prototype.error=function(D){var O=this._sources;if(!B.prototype.error.call(this,D))return!1;for(var F=0;F<O.length;F++)try{O[F].error(D)}catch{}return!0},V.prototype.lock=function(){B.prototype.lock.call(this);for(var D=this._sources,O=0;O<D.length;O++)D[O].lock()},x.exports=V},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(_,x,S){var E=_("../compressions"),C=_("./ZipFileWorker");S.generateWorker=function(T,B,A){var I=new C(B.streamFiles,A,B.platform,B.encodeFileName),N=0;try{T.forEach(function(V,D){N++;var O=function(j,q){var H=j||q,X=E[H];if(!X)throw new Error(H+" is not a valid compression method !");return X}(D.options.compression,B.compression),F=D.options.compressionOptions||B.compressionOptions||{},M=D.dir,L=D.date;D._compressWorker(O,F).withStreamInfo("file",{name:V,dir:M,date:L,comment:D.comment||"",unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions}).pipe(I)}),I.entriesCount=N}catch(V){I.error(V)}return I}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(_,x,S){function E(){if(!(this instanceof E))return new E;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var C=new E;for(var T in this)typeof this[T]!="function"&&(C[T]=this[T]);return C}}(E.prototype=_("./object")).loadAsync=_("./load"),E.support=_("./support"),E.defaults=_("./defaults"),E.version="3.10.1",E.loadAsync=function(C,T){return new E().loadAsync(C,T)},E.external=_("./external"),x.exports=E},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(_,x,S){var E=_("./utils"),C=_("./external"),T=_("./utf8"),B=_("./zipEntries"),A=_("./stream/Crc32Probe"),I=_("./nodejsUtils");function N(V){return new C.Promise(function(D,O){var F=V.decompressed.getContentWorker().pipe(new A);F.on("error",function(M){O(M)}).on("end",function(){F.streamInfo.crc32!==V.decompressed.crc32?O(new Error("Corrupted zip : CRC32 mismatch")):D()}).resume()})}x.exports=function(V,D){var O=this;return D=E.extend(D||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:T.utf8decode}),I.isNode&&I.isStream(V)?C.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):E.prepareContent("the loaded zip file",V,!0,D.optimizedBinaryString,D.base64).then(function(F){var M=new B(D);return M.load(F),M}).then(function(F){var M=[C.Promise.resolve(F)],L=F.files;if(D.checkCRC32)for(var j=0;j<L.length;j++)M.push(N(L[j]));return C.Promise.all(M)}).then(function(F){for(var M=F.shift(),L=M.files,j=0;j<L.length;j++){var q=L[j],H=q.fileNameStr,X=E.resolve(q.fileNameStr);O.file(X,q.decompressed,{binary:!0,optimizedBinaryString:!0,date:q.date,dir:q.dir,comment:q.fileCommentStr.length?q.fileCommentStr:null,unixPermissions:q.unixPermissions,dosPermissions:q.dosPermissions,createFolders:D.createFolders}),q.dir||(O.file(X).unsafeOriginalName=H)}return M.zipComment.length&&(O.comment=M.zipComment),O})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(_,x,S){var E=_("../utils"),C=_("../stream/GenericWorker");function T(B,A){C.call(this,"Nodejs stream input adapter for "+B),this._upstreamEnded=!1,this._bindStream(A)}E.inherits(T,C),T.prototype._bindStream=function(B){var A=this;(this._stream=B).pause(),B.on("data",function(I){A.push({data:I,meta:{percent:0}})}).on("error",function(I){A.isPaused?this.generatedError=I:A.error(I)}).on("end",function(){A.isPaused?A._upstreamEnded=!0:A.end()})},T.prototype.pause=function(){return!!C.prototype.pause.call(this)&&(this._stream.pause(),!0)},T.prototype.resume=function(){return!!C.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},x.exports=T},{"../stream/GenericWorker":28,"../utils":32}],13:[function(_,x,S){var E=_("readable-stream").Readable;function C(T,B,A){E.call(this,B),this._helper=T;var I=this;T.on("data",function(N,V){I.push(N)||I._helper.pause(),A&&A(V)}).on("error",function(N){I.emit("error",N)}).on("end",function(){I.push(null)})}_("../utils").inherits(C,E),C.prototype._read=function(){this._helper.resume()},x.exports=C},{"../utils":32,"readable-stream":16}],14:[function(_,x,S){x.exports={isNode:typeof Buffer$5<"u",newBufferFrom:function(E,C){if(Buffer$5.from&&Buffer$5.from!==Uint8Array.from)return Buffer$5.from(E,C);if(typeof E=="number")throw new Error('The "data" argument must not be a number');return new Buffer$5(E,C)},allocBuffer:function(E){if(Buffer$5.alloc)return Buffer$5.alloc(E);var C=new Buffer$5(E);return C.fill(0),C},isBuffer:function(E){return Buffer$5.isBuffer(E)},isStream:function(E){return E&&typeof E.on=="function"&&typeof E.pause=="function"&&typeof E.resume=="function"}}},{}],15:[function(_,x,S){function E(X,J,Z){var ae,ce=T.getTypeOf(J),ve=T.extend(Z||{},I);ve.date=ve.date||new Date,ve.compression!==null&&(ve.compression=ve.compression.toUpperCase()),typeof ve.unixPermissions=="string"&&(ve.unixPermissions=parseInt(ve.unixPermissions,8)),ve.unixPermissions&&16384&ve.unixPermissions&&(ve.dir=!0),ve.dosPermissions&&16&ve.dosPermissions&&(ve.dir=!0),ve.dir&&(X=L(X)),ve.createFolders&&(ae=M(X))&&j.call(this,ae,!0);var pe=ce==="string"&&ve.binary===!1&&ve.base64===!1;Z&&Z.binary!==void 0||(ve.binary=!pe),(J instanceof N&&J.uncompressedSize===0||ve.dir||!J||J.length===0)&&(ve.base64=!1,ve.binary=!0,J="",ve.compression="STORE",ce="string");var G=null;G=J instanceof N||J instanceof B?J:O.isNode&&O.isStream(J)?new F(X,J):T.prepareContent(X,J,ve.binary,ve.optimizedBinaryString,ve.base64);var Y=new V(X,G,ve);this.files[X]=Y}var C=_("./utf8"),T=_("./utils"),B=_("./stream/GenericWorker"),A=_("./stream/StreamHelper"),I=_("./defaults"),N=_("./compressedObject"),V=_("./zipObject"),D=_("./generate"),O=_("./nodejsUtils"),F=_("./nodejs/NodejsStreamInputAdapter"),M=function(X){X.slice(-1)==="/"&&(X=X.substring(0,X.length-1));var J=X.lastIndexOf("/");return 0<J?X.substring(0,J):""},L=function(X){return X.slice(-1)!=="/"&&(X+="/"),X},j=function(X,J){return J=J!==void 0?J:I.createFolders,X=L(X),this.files[X]||E.call(this,X,null,{dir:!0,createFolders:J}),this.files[X]};function q(X){return Object.prototype.toString.call(X)==="[object RegExp]"}var H={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(X){var J,Z,ae;for(J in this.files)ae=this.files[J],(Z=J.slice(this.root.length,J.length))&&J.slice(0,this.root.length)===this.root&&X(Z,ae)},filter:function(X){var J=[];return this.forEach(function(Z,ae){X(Z,ae)&&J.push(ae)}),J},file:function(X,J,Z){if(arguments.length!==1)return X=this.root+X,E.call(this,X,J,Z),this;if(q(X)){var ae=X;return this.filter(function(ve,pe){return!pe.dir&&ae.test(ve)})}var ce=this.files[this.root+X];return ce&&!ce.dir?ce:null},folder:function(X){if(!X)return this;if(q(X))return this.filter(function(ce,ve){return ve.dir&&X.test(ce)});var J=this.root+X,Z=j.call(this,J),ae=this.clone();return ae.root=Z.name,ae},remove:function(X){X=this.root+X;var J=this.files[X];if(J||(X.slice(-1)!=="/"&&(X+="/"),J=this.files[X]),J&&!J.dir)delete this.files[X];else for(var Z=this.filter(function(ce,ve){return ve.name.slice(0,X.length)===X}),ae=0;ae<Z.length;ae++)delete this.files[Z[ae].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(X){var J,Z={};try{if((Z=T.extend(X||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:C.utf8encode})).type=Z.type.toLowerCase(),Z.compression=Z.compression.toUpperCase(),Z.type==="binarystring"&&(Z.type="string"),!Z.type)throw new Error("No output type specified.");T.checkSupport(Z.type),Z.platform!=="darwin"&&Z.platform!=="freebsd"&&Z.platform!=="linux"&&Z.platform!=="sunos"||(Z.platform="UNIX"),Z.platform==="win32"&&(Z.platform="DOS");var ae=Z.comment||this.comment||"";J=D.generateWorker(this,Z,ae)}catch(ce){(J=new B("error")).error(ce)}return new A(J,Z.type||"string",Z.mimeType)},generateAsync:function(X,J){return this.generateInternalStream(X).accumulate(J)},generateNodeStream:function(X,J){return(X=X||{}).type||(X.type="nodebuffer"),this.generateInternalStream(X).toNodejsStream(J)}};x.exports=H},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(_,x,S){x.exports=_("stream")},{stream:void 0}],17:[function(_,x,S){var E=_("./DataReader");function C(T){E.call(this,T);for(var B=0;B<this.data.length;B++)T[B]=255&T[B]}_("../utils").inherits(C,E),C.prototype.byteAt=function(T){return this.data[this.zero+T]},C.prototype.lastIndexOfSignature=function(T){for(var B=T.charCodeAt(0),A=T.charCodeAt(1),I=T.charCodeAt(2),N=T.charCodeAt(3),V=this.length-4;0<=V;--V)if(this.data[V]===B&&this.data[V+1]===A&&this.data[V+2]===I&&this.data[V+3]===N)return V-this.zero;return-1},C.prototype.readAndCheckSignature=function(T){var B=T.charCodeAt(0),A=T.charCodeAt(1),I=T.charCodeAt(2),N=T.charCodeAt(3),V=this.readData(4);return B===V[0]&&A===V[1]&&I===V[2]&&N===V[3]},C.prototype.readData=function(T){if(this.checkOffset(T),T===0)return[];var B=this.data.slice(this.zero+this.index,this.zero+this.index+T);return this.index+=T,B},x.exports=C},{"../utils":32,"./DataReader":18}],18:[function(_,x,S){var E=_("../utils");function C(T){this.data=T,this.length=T.length,this.index=0,this.zero=0}C.prototype={checkOffset:function(T){this.checkIndex(this.index+T)},checkIndex:function(T){if(this.length<this.zero+T||T<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+T+"). Corrupted zip ?")},setIndex:function(T){this.checkIndex(T),this.index=T},skip:function(T){this.setIndex(this.index+T)},byteAt:function(){},readInt:function(T){var B,A=0;for(this.checkOffset(T),B=this.index+T-1;B>=this.index;B--)A=(A<<8)+this.byteAt(B);return this.index+=T,A},readString:function(T){return E.transformTo("string",this.readData(T))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var T=this.readInt(4);return new Date(Date.UTC(1980+(T>>25&127),(T>>21&15)-1,T>>16&31,T>>11&31,T>>5&63,(31&T)<<1))}},x.exports=C},{"../utils":32}],19:[function(_,x,S){var E=_("./Uint8ArrayReader");function C(T){E.call(this,T)}_("../utils").inherits(C,E),C.prototype.readData=function(T){this.checkOffset(T);var B=this.data.slice(this.zero+this.index,this.zero+this.index+T);return this.index+=T,B},x.exports=C},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(_,x,S){var E=_("./DataReader");function C(T){E.call(this,T)}_("../utils").inherits(C,E),C.prototype.byteAt=function(T){return this.data.charCodeAt(this.zero+T)},C.prototype.lastIndexOfSignature=function(T){return this.data.lastIndexOf(T)-this.zero},C.prototype.readAndCheckSignature=function(T){return T===this.readData(4)},C.prototype.readData=function(T){this.checkOffset(T);var B=this.data.slice(this.zero+this.index,this.zero+this.index+T);return this.index+=T,B},x.exports=C},{"../utils":32,"./DataReader":18}],21:[function(_,x,S){var E=_("./ArrayReader");function C(T){E.call(this,T)}_("../utils").inherits(C,E),C.prototype.readData=function(T){if(this.checkOffset(T),T===0)return new Uint8Array(0);var B=this.data.subarray(this.zero+this.index,this.zero+this.index+T);return this.index+=T,B},x.exports=C},{"../utils":32,"./ArrayReader":17}],22:[function(_,x,S){var E=_("../utils"),C=_("../support"),T=_("./ArrayReader"),B=_("./StringReader"),A=_("./NodeBufferReader"),I=_("./Uint8ArrayReader");x.exports=function(N){var V=E.getTypeOf(N);return E.checkSupport(V),V!=="string"||C.uint8array?V==="nodebuffer"?new A(N):C.uint8array?new I(E.transformTo("uint8array",N)):new T(E.transformTo("array",N)):new B(N)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(_,x,S){S.LOCAL_FILE_HEADER="PK",S.CENTRAL_FILE_HEADER="PK",S.CENTRAL_DIRECTORY_END="PK",S.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",S.ZIP64_CENTRAL_DIRECTORY_END="PK",S.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(_,x,S){var E=_("./GenericWorker"),C=_("../utils");function T(B){E.call(this,"ConvertWorker to "+B),this.destType=B}C.inherits(T,E),T.prototype.processChunk=function(B){this.push({data:C.transformTo(this.destType,B.data),meta:B.meta})},x.exports=T},{"../utils":32,"./GenericWorker":28}],25:[function(_,x,S){var E=_("./GenericWorker"),C=_("../crc32");function T(){E.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}_("../utils").inherits(T,E),T.prototype.processChunk=function(B){this.streamInfo.crc32=C(B.data,this.streamInfo.crc32||0),this.push(B)},x.exports=T},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(_,x,S){var E=_("../utils"),C=_("./GenericWorker");function T(B){C.call(this,"DataLengthProbe for "+B),this.propName=B,this.withStreamInfo(B,0)}E.inherits(T,C),T.prototype.processChunk=function(B){if(B){var A=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=A+B.data.length}C.prototype.processChunk.call(this,B)},x.exports=T},{"../utils":32,"./GenericWorker":28}],27:[function(_,x,S){var E=_("../utils"),C=_("./GenericWorker");function T(B){C.call(this,"DataWorker");var A=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,B.then(function(I){A.dataIsReady=!0,A.data=I,A.max=I&&I.length||0,A.type=E.getTypeOf(I),A.isPaused||A._tickAndRepeat()},function(I){A.error(I)})}E.inherits(T,C),T.prototype.cleanUp=function(){C.prototype.cleanUp.call(this),this.data=null},T.prototype.resume=function(){return!!C.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,E.delay(this._tickAndRepeat,[],this)),!0)},T.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(E.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},T.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var B=null,A=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":B=this.data.substring(this.index,A);break;case"uint8array":B=this.data.subarray(this.index,A);break;case"array":case"nodebuffer":B=this.data.slice(this.index,A)}return this.index=A,this.push({data:B,meta:{percent:this.max?this.index/this.max*100:0}})},x.exports=T},{"../utils":32,"./GenericWorker":28}],28:[function(_,x,S){function E(C){this.name=C||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}E.prototype={push:function(C){this.emit("data",C)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(C){this.emit("error",C)}return!0},error:function(C){return!this.isFinished&&(this.isPaused?this.generatedError=C:(this.isFinished=!0,this.emit("error",C),this.previous&&this.previous.error(C),this.cleanUp()),!0)},on:function(C,T){return this._listeners[C].push(T),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(C,T){if(this._listeners[C])for(var B=0;B<this._listeners[C].length;B++)this._listeners[C][B].call(this,T)},pipe:function(C){return C.registerPrevious(this)},registerPrevious:function(C){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=C.streamInfo,this.mergeStreamInfo(),this.previous=C;var T=this;return C.on("data",function(B){T.processChunk(B)}),C.on("end",function(){T.end()}),C.on("error",function(B){T.error(B)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var C=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),C=!0),this.previous&&this.previous.resume(),!C},flush:function(){},processChunk:function(C){this.push(C)},withStreamInfo:function(C,T){return this.extraStreamInfo[C]=T,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var C in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,C)&&(this.streamInfo[C]=this.extraStreamInfo[C])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var C="Worker "+this.name;return this.previous?this.previous+" -> "+C:C}},x.exports=E},{}],29:[function(_,x,S){var E=_("../utils"),C=_("./ConvertWorker"),T=_("./GenericWorker"),B=_("../base64"),A=_("../support"),I=_("../external"),N=null;if(A.nodestream)try{N=_("../nodejs/NodejsStreamOutputAdapter")}catch{}function V(O,F){return new I.Promise(function(M,L){var j=[],q=O._internalType,H=O._outputType,X=O._mimeType;O.on("data",function(J,Z){j.push(J),F&&F(Z)}).on("error",function(J){j=[],L(J)}).on("end",function(){try{var J=function(Z,ae,ce){switch(Z){case"blob":return E.newBlob(E.transformTo("arraybuffer",ae),ce);case"base64":return B.encode(ae);default:return E.transformTo(Z,ae)}}(H,function(Z,ae){var ce,ve=0,pe=null,G=0;for(ce=0;ce<ae.length;ce++)G+=ae[ce].length;switch(Z){case"string":return ae.join("");case"array":return Array.prototype.concat.apply([],ae);case"uint8array":for(pe=new Uint8Array(G),ce=0;ce<ae.length;ce++)pe.set(ae[ce],ve),ve+=ae[ce].length;return pe;case"nodebuffer":return Buffer$5.concat(ae);default:throw new Error("concat : unsupported type '"+Z+"'")}}(q,j),X);M(J)}catch(Z){L(Z)}j=[]}).resume()})}function D(O,F,M){var L=F;switch(F){case"blob":case"arraybuffer":L="uint8array";break;case"base64":L="string"}try{this._internalType=L,this._outputType=F,this._mimeType=M,E.checkSupport(L),this._worker=O.pipe(new C(L)),O.lock()}catch(j){this._worker=new T("error"),this._worker.error(j)}}D.prototype={accumulate:function(O){return V(this,O)},on:function(O,F){var M=this;return O==="data"?this._worker.on(O,function(L){F.call(M,L.data,L.meta)}):this._worker.on(O,function(){E.delay(F,arguments,M)}),this},resume:function(){return E.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(O){if(E.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new N(this,{objectMode:this._outputType!=="nodebuffer"},O)}},x.exports=D},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(_,x,S){if(S.base64=!0,S.array=!0,S.string=!0,S.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",S.nodebuffer=typeof Buffer$5<"u",S.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")S.blob=!1;else{var E=new ArrayBuffer(0);try{S.blob=new Blob([E],{type:"application/zip"}).size===0}catch{try{var C=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);C.append(E),S.blob=C.getBlob("application/zip").size===0}catch{S.blob=!1}}}try{S.nodestream=!!_("readable-stream").Readable}catch{S.nodestream=!1}},{"readable-stream":16}],31:[function(_,x,S){for(var E=_("./utils"),C=_("./support"),T=_("./nodejsUtils"),B=_("./stream/GenericWorker"),A=new Array(256),I=0;I<256;I++)A[I]=252<=I?6:248<=I?5:240<=I?4:224<=I?3:192<=I?2:1;A[254]=A[254]=1;function N(){B.call(this,"utf-8 decode"),this.leftOver=null}function V(){B.call(this,"utf-8 encode")}S.utf8encode=function(D){return C.nodebuffer?T.newBufferFrom(D,"utf-8"):function(O){var F,M,L,j,q,H=O.length,X=0;for(j=0;j<H;j++)(64512&(M=O.charCodeAt(j)))==55296&&j+1<H&&(64512&(L=O.charCodeAt(j+1)))==56320&&(M=65536+(M-55296<<10)+(L-56320),j++),X+=M<128?1:M<2048?2:M<65536?3:4;for(F=C.uint8array?new Uint8Array(X):new Array(X),j=q=0;q<X;j++)(64512&(M=O.charCodeAt(j)))==55296&&j+1<H&&(64512&(L=O.charCodeAt(j+1)))==56320&&(M=65536+(M-55296<<10)+(L-56320),j++),M<128?F[q++]=M:(M<2048?F[q++]=192|M>>>6:(M<65536?F[q++]=224|M>>>12:(F[q++]=240|M>>>18,F[q++]=128|M>>>12&63),F[q++]=128|M>>>6&63),F[q++]=128|63&M);return F}(D)},S.utf8decode=function(D){return C.nodebuffer?E.transformTo("nodebuffer",D).toString("utf-8"):function(O){var F,M,L,j,q=O.length,H=new Array(2*q);for(F=M=0;F<q;)if((L=O[F++])<128)H[M++]=L;else if(4<(j=A[L]))H[M++]=65533,F+=j-1;else{for(L&=j===2?31:j===3?15:7;1<j&&F<q;)L=L<<6|63&O[F++],j--;1<j?H[M++]=65533:L<65536?H[M++]=L:(L-=65536,H[M++]=55296|L>>10&1023,H[M++]=56320|1023&L)}return H.length!==M&&(H.subarray?H=H.subarray(0,M):H.length=M),E.applyFromCharCode(H)}(D=E.transformTo(C.uint8array?"uint8array":"array",D))},E.inherits(N,B),N.prototype.processChunk=function(D){var O=E.transformTo(C.uint8array?"uint8array":"array",D.data);if(this.leftOver&&this.leftOver.length){if(C.uint8array){var F=O;(O=new Uint8Array(F.length+this.leftOver.length)).set(this.leftOver,0),O.set(F,this.leftOver.length)}else O=this.leftOver.concat(O);this.leftOver=null}var M=function(j,q){var H;for((q=q||j.length)>j.length&&(q=j.length),H=q-1;0<=H&&(192&j[H])==128;)H--;return H<0||H===0?q:H+A[j[H]]>q?H:q}(O),L=O;M!==O.length&&(C.uint8array?(L=O.subarray(0,M),this.leftOver=O.subarray(M,O.length)):(L=O.slice(0,M),this.leftOver=O.slice(M,O.length))),this.push({data:S.utf8decode(L),meta:D.meta})},N.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:S.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},S.Utf8DecodeWorker=N,E.inherits(V,B),V.prototype.processChunk=function(D){this.push({data:S.utf8encode(D.data),meta:D.meta})},S.Utf8EncodeWorker=V},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(_,x,S){var E=_("./support"),C=_("./base64"),T=_("./nodejsUtils"),B=_("./external");function A(F){return F}function I(F,M){for(var L=0;L<F.length;++L)M[L]=255&F.charCodeAt(L);return M}_("setimmediate"),S.newBlob=function(F,M){S.checkSupport("blob");try{return new Blob([F],{type:M})}catch{try{var L=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return L.append(F),L.getBlob(M)}catch{throw new Error("Bug : can't construct the Blob.")}}};var N={stringifyByChunk:function(F,M,L){var j=[],q=0,H=F.length;if(H<=L)return String.fromCharCode.apply(null,F);for(;q<H;)M==="array"||M==="nodebuffer"?j.push(String.fromCharCode.apply(null,F.slice(q,Math.min(q+L,H)))):j.push(String.fromCharCode.apply(null,F.subarray(q,Math.min(q+L,H)))),q+=L;return j.join("")},stringifyByChar:function(F){for(var M="",L=0;L<F.length;L++)M+=String.fromCharCode(F[L]);return M},applyCanBeUsed:{uint8array:function(){try{return E.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return E.nodebuffer&&String.fromCharCode.apply(null,T.allocBuffer(1)).length===1}catch{return!1}}()}};function V(F){var M=65536,L=S.getTypeOf(F),j=!0;if(L==="uint8array"?j=N.applyCanBeUsed.uint8array:L==="nodebuffer"&&(j=N.applyCanBeUsed.nodebuffer),j)for(;1<M;)try{return N.stringifyByChunk(F,L,M)}catch{M=Math.floor(M/2)}return N.stringifyByChar(F)}function D(F,M){for(var L=0;L<F.length;L++)M[L]=F[L];return M}S.applyFromCharCode=V;var O={};O.string={string:A,array:function(F){return I(F,new Array(F.length))},arraybuffer:function(F){return O.string.uint8array(F).buffer},uint8array:function(F){return I(F,new Uint8Array(F.length))},nodebuffer:function(F){return I(F,T.allocBuffer(F.length))}},O.array={string:V,array:A,arraybuffer:function(F){return new Uint8Array(F).buffer},uint8array:function(F){return new Uint8Array(F)},nodebuffer:function(F){return T.newBufferFrom(F)}},O.arraybuffer={string:function(F){return V(new Uint8Array(F))},array:function(F){return D(new Uint8Array(F),new Array(F.byteLength))},arraybuffer:A,uint8array:function(F){return new Uint8Array(F)},nodebuffer:function(F){return T.newBufferFrom(new Uint8Array(F))}},O.uint8array={string:V,array:function(F){return D(F,new Array(F.length))},arraybuffer:function(F){return F.buffer},uint8array:A,nodebuffer:function(F){return T.newBufferFrom(F)}},O.nodebuffer={string:V,array:function(F){return D(F,new Array(F.length))},arraybuffer:function(F){return O.nodebuffer.uint8array(F).buffer},uint8array:function(F){return D(F,new Uint8Array(F.length))},nodebuffer:A},S.transformTo=function(F,M){if(M=M||"",!F)return M;S.checkSupport(F);var L=S.getTypeOf(M);return O[L][F](M)},S.resolve=function(F){for(var M=F.split("/"),L=[],j=0;j<M.length;j++){var q=M[j];q==="."||q===""&&j!==0&&j!==M.length-1||(q===".."?L.pop():L.push(q))}return L.join("/")},S.getTypeOf=function(F){return typeof F=="string"?"string":Object.prototype.toString.call(F)==="[object Array]"?"array":E.nodebuffer&&T.isBuffer(F)?"nodebuffer":E.uint8array&&F instanceof Uint8Array?"uint8array":E.arraybuffer&&F instanceof ArrayBuffer?"arraybuffer":void 0},S.checkSupport=function(F){if(!E[F.toLowerCase()])throw new Error(F+" is not supported by this platform")},S.MAX_VALUE_16BITS=65535,S.MAX_VALUE_32BITS=-1,S.pretty=function(F){var M,L,j="";for(L=0;L<(F||"").length;L++)j+="\\x"+((M=F.charCodeAt(L))<16?"0":"")+M.toString(16).toUpperCase();return j},S.delay=function(F,M,L){setImmediate(function(){F.apply(L||null,M||[])})},S.inherits=function(F,M){function L(){}L.prototype=M.prototype,F.prototype=new L},S.extend=function(){var F,M,L={};for(F=0;F<arguments.length;F++)for(M in arguments[F])Object.prototype.hasOwnProperty.call(arguments[F],M)&&L[M]===void 0&&(L[M]=arguments[F][M]);return L},S.prepareContent=function(F,M,L,j,q){return B.Promise.resolve(M).then(function(H){return E.blob&&(H instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(H))!==-1)&&typeof FileReader<"u"?new B.Promise(function(X,J){var Z=new FileReader;Z.onload=function(ae){X(ae.target.result)},Z.onerror=function(ae){J(ae.target.error)},Z.readAsArrayBuffer(H)}):H}).then(function(H){var X=S.getTypeOf(H);return X?(X==="arraybuffer"?H=S.transformTo("uint8array",H):X==="string"&&(q?H=C.decode(H):L&&j!==!0&&(H=function(J){return I(J,E.uint8array?new Uint8Array(J.length):new Array(J.length))}(H))),H):B.Promise.reject(new Error("Can't read the data of '"+F+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(_,x,S){var E=_("./reader/readerFor"),C=_("./utils"),T=_("./signature"),B=_("./zipEntry"),A=_("./support");function I(N){this.files=[],this.loadOptions=N}I.prototype={checkSignature:function(N){if(!this.reader.readAndCheckSignature(N)){this.reader.index-=4;var V=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+C.pretty(V)+", expected "+C.pretty(N)+")")}},isSignature:function(N,V){var D=this.reader.index;this.reader.setIndex(N);var O=this.reader.readString(4)===V;return this.reader.setIndex(D),O},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var N=this.reader.readData(this.zipCommentLength),V=A.uint8array?"uint8array":"array",D=C.transformTo(V,N);this.zipComment=this.loadOptions.decodeFileName(D)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var N,V,D,O=this.zip64EndOfCentralSize-44;0<O;)N=this.reader.readInt(2),V=this.reader.readInt(4),D=this.reader.readData(V),this.zip64ExtensibleData[N]={id:N,length:V,value:D}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var N,V;for(N=0;N<this.files.length;N++)V=this.files[N],this.reader.setIndex(V.localHeaderOffset),this.checkSignature(T.LOCAL_FILE_HEADER),V.readLocalPart(this.reader),V.handleUTF8(),V.processAttributes()},readCentralDir:function(){var N;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(T.CENTRAL_FILE_HEADER);)(N=new B({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(N);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var N=this.reader.lastIndexOfSignature(T.CENTRAL_DIRECTORY_END);if(N<0)throw this.isSignature(0,T.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(N);var V=N;if(this.checkSignature(T.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===C.MAX_VALUE_16BITS||this.diskWithCentralDirStart===C.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===C.MAX_VALUE_16BITS||this.centralDirRecords===C.MAX_VALUE_16BITS||this.centralDirSize===C.MAX_VALUE_32BITS||this.centralDirOffset===C.MAX_VALUE_32BITS){if(this.zip64=!0,(N=this.reader.lastIndexOfSignature(T.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(N),this.checkSignature(T.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,T.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(T.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(T.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var D=this.centralDirOffset+this.centralDirSize;this.zip64&&(D+=20,D+=12+this.zip64EndOfCentralSize);var O=V-D;if(0<O)this.isSignature(V,T.CENTRAL_FILE_HEADER)||(this.reader.zero=O);else if(O<0)throw new Error("Corrupted zip: missing "+Math.abs(O)+" bytes.")},prepareReader:function(N){this.reader=E(N)},load:function(N){this.prepareReader(N),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},x.exports=I},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(_,x,S){var E=_("./reader/readerFor"),C=_("./utils"),T=_("./compressedObject"),B=_("./crc32"),A=_("./utf8"),I=_("./compressions"),N=_("./support");function V(D,O){this.options=D,this.loadOptions=O}V.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(D){var O,F;if(D.skip(22),this.fileNameLength=D.readInt(2),F=D.readInt(2),this.fileName=D.readData(this.fileNameLength),D.skip(F),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((O=function(M){for(var L in I)if(Object.prototype.hasOwnProperty.call(I,L)&&I[L].magic===M)return I[L];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+C.pretty(this.compressionMethod)+" unknown (inner file : "+C.transformTo("string",this.fileName)+")");this.decompressed=new T(this.compressedSize,this.uncompressedSize,this.crc32,O,D.readData(this.compressedSize))},readCentralPart:function(D){this.versionMadeBy=D.readInt(2),D.skip(2),this.bitFlag=D.readInt(2),this.compressionMethod=D.readString(2),this.date=D.readDate(),this.crc32=D.readInt(4),this.compressedSize=D.readInt(4),this.uncompressedSize=D.readInt(4);var O=D.readInt(2);if(this.extraFieldsLength=D.readInt(2),this.fileCommentLength=D.readInt(2),this.diskNumberStart=D.readInt(2),this.internalFileAttributes=D.readInt(2),this.externalFileAttributes=D.readInt(4),this.localHeaderOffset=D.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");D.skip(O),this.readExtraFields(D),this.parseZIP64ExtraField(D),this.fileComment=D.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var D=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),D==0&&(this.dosPermissions=63&this.externalFileAttributes),D==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var D=E(this.extraFields[1].value);this.uncompressedSize===C.MAX_VALUE_32BITS&&(this.uncompressedSize=D.readInt(8)),this.compressedSize===C.MAX_VALUE_32BITS&&(this.compressedSize=D.readInt(8)),this.localHeaderOffset===C.MAX_VALUE_32BITS&&(this.localHeaderOffset=D.readInt(8)),this.diskNumberStart===C.MAX_VALUE_32BITS&&(this.diskNumberStart=D.readInt(4))}},readExtraFields:function(D){var O,F,M,L=D.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});D.index+4<L;)O=D.readInt(2),F=D.readInt(2),M=D.readData(F),this.extraFields[O]={id:O,length:F,value:M};D.setIndex(L)},handleUTF8:function(){var D=N.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=A.utf8decode(this.fileName),this.fileCommentStr=A.utf8decode(this.fileComment);else{var O=this.findExtraFieldUnicodePath();if(O!==null)this.fileNameStr=O;else{var F=C.transformTo(D,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(F)}var M=this.findExtraFieldUnicodeComment();if(M!==null)this.fileCommentStr=M;else{var L=C.transformTo(D,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(L)}}},findExtraFieldUnicodePath:function(){var D=this.extraFields[28789];if(D){var O=E(D.value);return O.readInt(1)!==1||B(this.fileName)!==O.readInt(4)?null:A.utf8decode(O.readData(D.length-5))}return null},findExtraFieldUnicodeComment:function(){var D=this.extraFields[25461];if(D){var O=E(D.value);return O.readInt(1)!==1||B(this.fileComment)!==O.readInt(4)?null:A.utf8decode(O.readData(D.length-5))}return null}},x.exports=V},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(_,x,S){function E(O,F,M){this.name=O,this.dir=M.dir,this.date=M.date,this.comment=M.comment,this.unixPermissions=M.unixPermissions,this.dosPermissions=M.dosPermissions,this._data=F,this._dataBinary=M.binary,this.options={compression:M.compression,compressionOptions:M.compressionOptions}}var C=_("./stream/StreamHelper"),T=_("./stream/DataWorker"),B=_("./utf8"),A=_("./compressedObject"),I=_("./stream/GenericWorker");E.prototype={internalStream:function(O){var F=null,M="string";try{if(!O)throw new Error("No output type specified.");var L=(M=O.toLowerCase())==="string"||M==="text";M!=="binarystring"&&M!=="text"||(M="string"),F=this._decompressWorker();var j=!this._dataBinary;j&&!L&&(F=F.pipe(new B.Utf8EncodeWorker)),!j&&L&&(F=F.pipe(new B.Utf8DecodeWorker))}catch(q){(F=new I("error")).error(q)}return new C(F,M,"")},async:function(O,F){return this.internalStream(O).accumulate(F)},nodeStream:function(O,F){return this.internalStream(O||"nodebuffer").toNodejsStream(F)},_compressWorker:function(O,F){if(this._data instanceof A&&this._data.compression.magic===O.magic)return this._data.getCompressedWorker();var M=this._decompressWorker();return this._dataBinary||(M=M.pipe(new B.Utf8EncodeWorker)),A.createWorkerFrom(M,O,F)},_decompressWorker:function(){return this._data instanceof A?this._data.getContentWorker():this._data instanceof I?this._data:new T(this._data)}};for(var N=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],V=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},D=0;D<N.length;D++)E.prototype[N[D]]=V;x.exports=E},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(_,x,S){(function(E){var C,T,B=E.MutationObserver||E.WebKitMutationObserver;if(B){var A=0,I=new B(O),N=E.document.createTextNode("");I.observe(N,{characterData:!0}),C=function(){N.data=A=++A%2}}else if(E.setImmediate||E.MessageChannel===void 0)C="document"in E&&"onreadystatechange"in E.document.createElement("script")?function(){var F=E.document.createElement("script");F.onreadystatechange=function(){O(),F.onreadystatechange=null,F.parentNode.removeChild(F),F=null},E.document.documentElement.appendChild(F)}:function(){setTimeout(O,0)};else{var V=new E.MessageChannel;V.port1.onmessage=O,C=function(){V.port2.postMessage(0)}}var D=[];function O(){var F,M;T=!0;for(var L=D.length;L;){for(M=D,D=[],F=-1;++F<L;)M[F]();L=D.length}T=!1}x.exports=function(F){D.push(F)!==1||T||C()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(_,x,S){var E=_("immediate");function C(){}var T={},B=["REJECTED"],A=["FULFILLED"],I=["PENDING"];function N(L){if(typeof L!="function")throw new TypeError("resolver must be a function");this.state=I,this.queue=[],this.outcome=void 0,L!==C&&F(this,L)}function V(L,j,q){this.promise=L,typeof j=="function"&&(this.onFulfilled=j,this.callFulfilled=this.otherCallFulfilled),typeof q=="function"&&(this.onRejected=q,this.callRejected=this.otherCallRejected)}function D(L,j,q){E(function(){var H;try{H=j(q)}catch(X){return T.reject(L,X)}H===L?T.reject(L,new TypeError("Cannot resolve promise with itself")):T.resolve(L,H)})}function O(L){var j=L&&L.then;if(L&&(typeof L=="object"||typeof L=="function")&&typeof j=="function")return function(){j.apply(L,arguments)}}function F(L,j){var q=!1;function H(Z){q||(q=!0,T.reject(L,Z))}function X(Z){q||(q=!0,T.resolve(L,Z))}var J=M(function(){j(X,H)});J.status==="error"&&H(J.value)}function M(L,j){var q={};try{q.value=L(j),q.status="success"}catch(H){q.status="error",q.value=H}return q}(x.exports=N).prototype.finally=function(L){if(typeof L!="function")return this;var j=this.constructor;return this.then(function(q){return j.resolve(L()).then(function(){return q})},function(q){return j.resolve(L()).then(function(){throw q})})},N.prototype.catch=function(L){return this.then(null,L)},N.prototype.then=function(L,j){if(typeof L!="function"&&this.state===A||typeof j!="function"&&this.state===B)return this;var q=new this.constructor(C);return this.state!==I?D(q,this.state===A?L:j,this.outcome):this.queue.push(new V(q,L,j)),q},V.prototype.callFulfilled=function(L){T.resolve(this.promise,L)},V.prototype.otherCallFulfilled=function(L){D(this.promise,this.onFulfilled,L)},V.prototype.callRejected=function(L){T.reject(this.promise,L)},V.prototype.otherCallRejected=function(L){D(this.promise,this.onRejected,L)},T.resolve=function(L,j){var q=M(O,j);if(q.status==="error")return T.reject(L,q.value);var H=q.value;if(H)F(L,H);else{L.state=A,L.outcome=j;for(var X=-1,J=L.queue.length;++X<J;)L.queue[X].callFulfilled(j)}return L},T.reject=function(L,j){L.state=B,L.outcome=j;for(var q=-1,H=L.queue.length;++q<H;)L.queue[q].callRejected(j);return L},N.resolve=function(L){return L instanceof this?L:T.resolve(new this(C),L)},N.reject=function(L){var j=new this(C);return T.reject(j,L)},N.all=function(L){var j=this;if(Object.prototype.toString.call(L)!=="[object Array]")return this.reject(new TypeError("must be an array"));var q=L.length,H=!1;if(!q)return this.resolve([]);for(var X=new Array(q),J=0,Z=-1,ae=new this(C);++Z<q;)ce(L[Z],Z);return ae;function ce(ve,pe){j.resolve(ve).then(function(G){X[pe]=G,++J!==q||H||(H=!0,T.resolve(ae,X))},function(G){H||(H=!0,T.reject(ae,G))})}},N.race=function(L){var j=this;if(Object.prototype.toString.call(L)!=="[object Array]")return this.reject(new TypeError("must be an array"));var q=L.length,H=!1;if(!q)return this.resolve([]);for(var X=-1,J=new this(C);++X<q;)Z=L[X],j.resolve(Z).then(function(ae){H||(H=!0,T.resolve(J,ae))},function(ae){H||(H=!0,T.reject(J,ae))});var Z;return J}},{immediate:36}],38:[function(_,x,S){var E={};(0,_("./lib/utils/common").assign)(E,_("./lib/deflate"),_("./lib/inflate"),_("./lib/zlib/constants")),x.exports=E},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(_,x,S){var E=_("./zlib/deflate"),C=_("./utils/common"),T=_("./utils/strings"),B=_("./zlib/messages"),A=_("./zlib/zstream"),I=Object.prototype.toString,N=0,V=-1,D=0,O=8;function F(L){if(!(this instanceof F))return new F(L);this.options=C.assign({level:V,method:O,chunkSize:16384,windowBits:15,memLevel:8,strategy:D,to:""},L||{});var j=this.options;j.raw&&0<j.windowBits?j.windowBits=-j.windowBits:j.gzip&&0<j.windowBits&&j.windowBits<16&&(j.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var q=E.deflateInit2(this.strm,j.level,j.method,j.windowBits,j.memLevel,j.strategy);if(q!==N)throw new Error(B[q]);if(j.header&&E.deflateSetHeader(this.strm,j.header),j.dictionary){var H;if(H=typeof j.dictionary=="string"?T.string2buf(j.dictionary):I.call(j.dictionary)==="[object ArrayBuffer]"?new Uint8Array(j.dictionary):j.dictionary,(q=E.deflateSetDictionary(this.strm,H))!==N)throw new Error(B[q]);this._dict_set=!0}}function M(L,j){var q=new F(j);if(q.push(L,!0),q.err)throw q.msg||B[q.err];return q.result}F.prototype.push=function(L,j){var q,H,X=this.strm,J=this.options.chunkSize;if(this.ended)return!1;H=j===~~j?j:j===!0?4:0,typeof L=="string"?X.input=T.string2buf(L):I.call(L)==="[object ArrayBuffer]"?X.input=new Uint8Array(L):X.input=L,X.next_in=0,X.avail_in=X.input.length;do{if(X.avail_out===0&&(X.output=new C.Buf8(J),X.next_out=0,X.avail_out=J),(q=E.deflate(X,H))!==1&&q!==N)return this.onEnd(q),!(this.ended=!0);X.avail_out!==0&&(X.avail_in!==0||H!==4&&H!==2)||(this.options.to==="string"?this.onData(T.buf2binstring(C.shrinkBuf(X.output,X.next_out))):this.onData(C.shrinkBuf(X.output,X.next_out)))}while((0<X.avail_in||X.avail_out===0)&&q!==1);return H===4?(q=E.deflateEnd(this.strm),this.onEnd(q),this.ended=!0,q===N):H!==2||(this.onEnd(N),!(X.avail_out=0))},F.prototype.onData=function(L){this.chunks.push(L)},F.prototype.onEnd=function(L){L===N&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=C.flattenChunks(this.chunks)),this.chunks=[],this.err=L,this.msg=this.strm.msg},S.Deflate=F,S.deflate=M,S.deflateRaw=function(L,j){return(j=j||{}).raw=!0,M(L,j)},S.gzip=function(L,j){return(j=j||{}).gzip=!0,M(L,j)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(_,x,S){var E=_("./zlib/inflate"),C=_("./utils/common"),T=_("./utils/strings"),B=_("./zlib/constants"),A=_("./zlib/messages"),I=_("./zlib/zstream"),N=_("./zlib/gzheader"),V=Object.prototype.toString;function D(F){if(!(this instanceof D))return new D(F);this.options=C.assign({chunkSize:16384,windowBits:0,to:""},F||{});var M=this.options;M.raw&&0<=M.windowBits&&M.windowBits<16&&(M.windowBits=-M.windowBits,M.windowBits===0&&(M.windowBits=-15)),!(0<=M.windowBits&&M.windowBits<16)||F&&F.windowBits||(M.windowBits+=32),15<M.windowBits&&M.windowBits<48&&!(15&M.windowBits)&&(M.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new I,this.strm.avail_out=0;var L=E.inflateInit2(this.strm,M.windowBits);if(L!==B.Z_OK)throw new Error(A[L]);this.header=new N,E.inflateGetHeader(this.strm,this.header)}function O(F,M){var L=new D(M);if(L.push(F,!0),L.err)throw L.msg||A[L.err];return L.result}D.prototype.push=function(F,M){var L,j,q,H,X,J,Z=this.strm,ae=this.options.chunkSize,ce=this.options.dictionary,ve=!1;if(this.ended)return!1;j=M===~~M?M:M===!0?B.Z_FINISH:B.Z_NO_FLUSH,typeof F=="string"?Z.input=T.binstring2buf(F):V.call(F)==="[object ArrayBuffer]"?Z.input=new Uint8Array(F):Z.input=F,Z.next_in=0,Z.avail_in=Z.input.length;do{if(Z.avail_out===0&&(Z.output=new C.Buf8(ae),Z.next_out=0,Z.avail_out=ae),(L=E.inflate(Z,B.Z_NO_FLUSH))===B.Z_NEED_DICT&&ce&&(J=typeof ce=="string"?T.string2buf(ce):V.call(ce)==="[object ArrayBuffer]"?new Uint8Array(ce):ce,L=E.inflateSetDictionary(this.strm,J)),L===B.Z_BUF_ERROR&&ve===!0&&(L=B.Z_OK,ve=!1),L!==B.Z_STREAM_END&&L!==B.Z_OK)return this.onEnd(L),!(this.ended=!0);Z.next_out&&(Z.avail_out!==0&&L!==B.Z_STREAM_END&&(Z.avail_in!==0||j!==B.Z_FINISH&&j!==B.Z_SYNC_FLUSH)||(this.options.to==="string"?(q=T.utf8border(Z.output,Z.next_out),H=Z.next_out-q,X=T.buf2string(Z.output,q),Z.next_out=H,Z.avail_out=ae-H,H&&C.arraySet(Z.output,Z.output,q,H,0),this.onData(X)):this.onData(C.shrinkBuf(Z.output,Z.next_out)))),Z.avail_in===0&&Z.avail_out===0&&(ve=!0)}while((0<Z.avail_in||Z.avail_out===0)&&L!==B.Z_STREAM_END);return L===B.Z_STREAM_END&&(j=B.Z_FINISH),j===B.Z_FINISH?(L=E.inflateEnd(this.strm),this.onEnd(L),this.ended=!0,L===B.Z_OK):j!==B.Z_SYNC_FLUSH||(this.onEnd(B.Z_OK),!(Z.avail_out=0))},D.prototype.onData=function(F){this.chunks.push(F)},D.prototype.onEnd=function(F){F===B.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=C.flattenChunks(this.chunks)),this.chunks=[],this.err=F,this.msg=this.strm.msg},S.Inflate=D,S.inflate=O,S.inflateRaw=function(F,M){return(M=M||{}).raw=!0,O(F,M)},S.ungzip=O},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(_,x,S){var E=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";S.assign=function(B){for(var A=Array.prototype.slice.call(arguments,1);A.length;){var I=A.shift();if(I){if(typeof I!="object")throw new TypeError(I+"must be non-object");for(var N in I)I.hasOwnProperty(N)&&(B[N]=I[N])}}return B},S.shrinkBuf=function(B,A){return B.length===A?B:B.subarray?B.subarray(0,A):(B.length=A,B)};var C={arraySet:function(B,A,I,N,V){if(A.subarray&&B.subarray)B.set(A.subarray(I,I+N),V);else for(var D=0;D<N;D++)B[V+D]=A[I+D]},flattenChunks:function(B){var A,I,N,V,D,O;for(A=N=0,I=B.length;A<I;A++)N+=B[A].length;for(O=new Uint8Array(N),A=V=0,I=B.length;A<I;A++)D=B[A],O.set(D,V),V+=D.length;return O}},T={arraySet:function(B,A,I,N,V){for(var D=0;D<N;D++)B[V+D]=A[I+D]},flattenChunks:function(B){return[].concat.apply([],B)}};S.setTyped=function(B){B?(S.Buf8=Uint8Array,S.Buf16=Uint16Array,S.Buf32=Int32Array,S.assign(S,C)):(S.Buf8=Array,S.Buf16=Array,S.Buf32=Array,S.assign(S,T))},S.setTyped(E)},{}],42:[function(_,x,S){var E=_("./common"),C=!0,T=!0;try{String.fromCharCode.apply(null,[0])}catch{C=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{T=!1}for(var B=new E.Buf8(256),A=0;A<256;A++)B[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;function I(N,V){if(V<65537&&(N.subarray&&T||!N.subarray&&C))return String.fromCharCode.apply(null,E.shrinkBuf(N,V));for(var D="",O=0;O<V;O++)D+=String.fromCharCode(N[O]);return D}B[254]=B[254]=1,S.string2buf=function(N){var V,D,O,F,M,L=N.length,j=0;for(F=0;F<L;F++)(64512&(D=N.charCodeAt(F)))==55296&&F+1<L&&(64512&(O=N.charCodeAt(F+1)))==56320&&(D=65536+(D-55296<<10)+(O-56320),F++),j+=D<128?1:D<2048?2:D<65536?3:4;for(V=new E.Buf8(j),F=M=0;M<j;F++)(64512&(D=N.charCodeAt(F)))==55296&&F+1<L&&(64512&(O=N.charCodeAt(F+1)))==56320&&(D=65536+(D-55296<<10)+(O-56320),F++),D<128?V[M++]=D:(D<2048?V[M++]=192|D>>>6:(D<65536?V[M++]=224|D>>>12:(V[M++]=240|D>>>18,V[M++]=128|D>>>12&63),V[M++]=128|D>>>6&63),V[M++]=128|63&D);return V},S.buf2binstring=function(N){return I(N,N.length)},S.binstring2buf=function(N){for(var V=new E.Buf8(N.length),D=0,O=V.length;D<O;D++)V[D]=N.charCodeAt(D);return V},S.buf2string=function(N,V){var D,O,F,M,L=V||N.length,j=new Array(2*L);for(D=O=0;D<L;)if((F=N[D++])<128)j[O++]=F;else if(4<(M=B[F]))j[O++]=65533,D+=M-1;else{for(F&=M===2?31:M===3?15:7;1<M&&D<L;)F=F<<6|63&N[D++],M--;1<M?j[O++]=65533:F<65536?j[O++]=F:(F-=65536,j[O++]=55296|F>>10&1023,j[O++]=56320|1023&F)}return I(j,O)},S.utf8border=function(N,V){var D;for((V=V||N.length)>N.length&&(V=N.length),D=V-1;0<=D&&(192&N[D])==128;)D--;return D<0||D===0?V:D+B[N[D]]>V?D:V}},{"./common":41}],43:[function(_,x,S){x.exports=function(E,C,T,B){for(var A=65535&E|0,I=E>>>16&65535|0,N=0;T!==0;){for(T-=N=2e3<T?2e3:T;I=I+(A=A+C[B++]|0)|0,--N;);A%=65521,I%=65521}return A|I<<16|0}},{}],44:[function(_,x,S){x.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(_,x,S){var E=function(){for(var C,T=[],B=0;B<256;B++){C=B;for(var A=0;A<8;A++)C=1&C?3988292384^C>>>1:C>>>1;T[B]=C}return T}();x.exports=function(C,T,B,A){var I=E,N=A+B;C^=-1;for(var V=A;V<N;V++)C=C>>>8^I[255&(C^T[V])];return-1^C}},{}],46:[function(_,x,S){var E,C=_("../utils/common"),T=_("./trees"),B=_("./adler32"),A=_("./crc32"),I=_("./messages"),N=0,V=4,D=0,O=-2,F=-1,M=4,L=2,j=8,q=9,H=286,X=30,J=19,Z=2*H+1,ae=15,ce=3,ve=258,pe=ve+ce+1,G=42,Y=113,U=1,W=2,ee=3,re=4;function oe(fe,Be){return fe.msg=I[Be],Be}function ie(fe){return(fe<<1)-(4<fe?9:0)}function ne(fe){for(var Be=fe.length;0<=--Be;)fe[Be]=0}function te(fe){var Be=fe.state,Le=Be.pending;Le>fe.avail_out&&(Le=fe.avail_out),Le!==0&&(C.arraySet(fe.output,Be.pending_buf,Be.pending_out,Le,fe.next_out),fe.next_out+=Le,Be.pending_out+=Le,fe.total_out+=Le,fe.avail_out-=Le,Be.pending-=Le,Be.pending===0&&(Be.pending_out=0))}function K(fe,Be){T._tr_flush_block(fe,0<=fe.block_start?fe.block_start:-1,fe.strstart-fe.block_start,Be),fe.block_start=fe.strstart,te(fe.strm)}function le(fe,Be){fe.pending_buf[fe.pending++]=Be}function ue(fe,Be){fe.pending_buf[fe.pending++]=Be>>>8&255,fe.pending_buf[fe.pending++]=255&Be}function be(fe,Be){var Le,Ve,Ie=fe.max_chain_length,Me=fe.strstart,He=fe.prev_length,We=fe.nice_match,Ue=fe.strstart>fe.w_size-pe?fe.strstart-(fe.w_size-pe):0,Ge=fe.window,et=fe.w_mask,ot=fe.prev,ht=fe.strstart+ve,Oe=Ge[Me+He-1],we=Ge[Me+He];fe.prev_length>=fe.good_match&&(Ie>>=2),We>fe.lookahead&&(We=fe.lookahead);do if(Ge[(Le=Be)+He]===we&&Ge[Le+He-1]===Oe&&Ge[Le]===Ge[Me]&&Ge[++Le]===Ge[Me+1]){Me+=2,Le++;do;while(Ge[++Me]===Ge[++Le]&&Ge[++Me]===Ge[++Le]&&Ge[++Me]===Ge[++Le]&&Ge[++Me]===Ge[++Le]&&Ge[++Me]===Ge[++Le]&&Ge[++Me]===Ge[++Le]&&Ge[++Me]===Ge[++Le]&&Ge[++Me]===Ge[++Le]&&Me<ht);if(Ve=ve-(ht-Me),Me=ht-ve,He<Ve){if(fe.match_start=Be,We<=(He=Ve))break;Oe=Ge[Me+He-1],we=Ge[Me+He]}}while((Be=ot[Be&et])>Ue&&--Ie!=0);return He<=fe.lookahead?He:fe.lookahead}function ge(fe){var Be,Le,Ve,Ie,Me,He,We,Ue,Ge,et,ot=fe.w_size;do{if(Ie=fe.window_size-fe.lookahead-fe.strstart,fe.strstart>=ot+(ot-pe)){for(C.arraySet(fe.window,fe.window,ot,ot,0),fe.match_start-=ot,fe.strstart-=ot,fe.block_start-=ot,Be=Le=fe.hash_size;Ve=fe.head[--Be],fe.head[Be]=ot<=Ve?Ve-ot:0,--Le;);for(Be=Le=ot;Ve=fe.prev[--Be],fe.prev[Be]=ot<=Ve?Ve-ot:0,--Le;);Ie+=ot}if(fe.strm.avail_in===0)break;if(He=fe.strm,We=fe.window,Ue=fe.strstart+fe.lookahead,Ge=Ie,et=void 0,et=He.avail_in,Ge<et&&(et=Ge),Le=et===0?0:(He.avail_in-=et,C.arraySet(We,He.input,He.next_in,et,Ue),He.state.wrap===1?He.adler=B(He.adler,We,et,Ue):He.state.wrap===2&&(He.adler=A(He.adler,We,et,Ue)),He.next_in+=et,He.total_in+=et,et),fe.lookahead+=Le,fe.lookahead+fe.insert>=ce)for(Me=fe.strstart-fe.insert,fe.ins_h=fe.window[Me],fe.ins_h=(fe.ins_h<<fe.hash_shift^fe.window[Me+1])&fe.hash_mask;fe.insert&&(fe.ins_h=(fe.ins_h<<fe.hash_shift^fe.window[Me+ce-1])&fe.hash_mask,fe.prev[Me&fe.w_mask]=fe.head[fe.ins_h],fe.head[fe.ins_h]=Me,Me++,fe.insert--,!(fe.lookahead+fe.insert<ce)););}while(fe.lookahead<pe&&fe.strm.avail_in!==0)}function ye(fe,Be){for(var Le,Ve;;){if(fe.lookahead<pe){if(ge(fe),fe.lookahead<pe&&Be===N)return U;if(fe.lookahead===0)break}if(Le=0,fe.lookahead>=ce&&(fe.ins_h=(fe.ins_h<<fe.hash_shift^fe.window[fe.strstart+ce-1])&fe.hash_mask,Le=fe.prev[fe.strstart&fe.w_mask]=fe.head[fe.ins_h],fe.head[fe.ins_h]=fe.strstart),Le!==0&&fe.strstart-Le<=fe.w_size-pe&&(fe.match_length=be(fe,Le)),fe.match_length>=ce)if(Ve=T._tr_tally(fe,fe.strstart-fe.match_start,fe.match_length-ce),fe.lookahead-=fe.match_length,fe.match_length<=fe.max_lazy_match&&fe.lookahead>=ce){for(fe.match_length--;fe.strstart++,fe.ins_h=(fe.ins_h<<fe.hash_shift^fe.window[fe.strstart+ce-1])&fe.hash_mask,Le=fe.prev[fe.strstart&fe.w_mask]=fe.head[fe.ins_h],fe.head[fe.ins_h]=fe.strstart,--fe.match_length!=0;);fe.strstart++}else fe.strstart+=fe.match_length,fe.match_length=0,fe.ins_h=fe.window[fe.strstart],fe.ins_h=(fe.ins_h<<fe.hash_shift^fe.window[fe.strstart+1])&fe.hash_mask;else Ve=T._tr_tally(fe,0,fe.window[fe.strstart]),fe.lookahead--,fe.strstart++;if(Ve&&(K(fe,!1),fe.strm.avail_out===0))return U}return fe.insert=fe.strstart<ce-1?fe.strstart:ce-1,Be===V?(K(fe,!0),fe.strm.avail_out===0?ee:re):fe.last_lit&&(K(fe,!1),fe.strm.avail_out===0)?U:W}function Ee(fe,Be){for(var Le,Ve,Ie;;){if(fe.lookahead<pe){if(ge(fe),fe.lookahead<pe&&Be===N)return U;if(fe.lookahead===0)break}if(Le=0,fe.lookahead>=ce&&(fe.ins_h=(fe.ins_h<<fe.hash_shift^fe.window[fe.strstart+ce-1])&fe.hash_mask,Le=fe.prev[fe.strstart&fe.w_mask]=fe.head[fe.ins_h],fe.head[fe.ins_h]=fe.strstart),fe.prev_length=fe.match_length,fe.prev_match=fe.match_start,fe.match_length=ce-1,Le!==0&&fe.prev_length<fe.max_lazy_match&&fe.strstart-Le<=fe.w_size-pe&&(fe.match_length=be(fe,Le),fe.match_length<=5&&(fe.strategy===1||fe.match_length===ce&&4096<fe.strstart-fe.match_start)&&(fe.match_length=ce-1)),fe.prev_length>=ce&&fe.match_length<=fe.prev_length){for(Ie=fe.strstart+fe.lookahead-ce,Ve=T._tr_tally(fe,fe.strstart-1-fe.prev_match,fe.prev_length-ce),fe.lookahead-=fe.prev_length-1,fe.prev_length-=2;++fe.strstart<=Ie&&(fe.ins_h=(fe.ins_h<<fe.hash_shift^fe.window[fe.strstart+ce-1])&fe.hash_mask,Le=fe.prev[fe.strstart&fe.w_mask]=fe.head[fe.ins_h],fe.head[fe.ins_h]=fe.strstart),--fe.prev_length!=0;);if(fe.match_available=0,fe.match_length=ce-1,fe.strstart++,Ve&&(K(fe,!1),fe.strm.avail_out===0))return U}else if(fe.match_available){if((Ve=T._tr_tally(fe,0,fe.window[fe.strstart-1]))&&K(fe,!1),fe.strstart++,fe.lookahead--,fe.strm.avail_out===0)return U}else fe.match_available=1,fe.strstart++,fe.lookahead--}return fe.match_available&&(Ve=T._tr_tally(fe,0,fe.window[fe.strstart-1]),fe.match_available=0),fe.insert=fe.strstart<ce-1?fe.strstart:ce-1,Be===V?(K(fe,!0),fe.strm.avail_out===0?ee:re):fe.last_lit&&(K(fe,!1),fe.strm.avail_out===0)?U:W}function Re(fe,Be,Le,Ve,Ie){this.good_length=fe,this.max_lazy=Be,this.nice_length=Le,this.max_chain=Ve,this.func=Ie}function Ne(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=j,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new C.Buf16(2*Z),this.dyn_dtree=new C.Buf16(2*(2*X+1)),this.bl_tree=new C.Buf16(2*(2*J+1)),ne(this.dyn_ltree),ne(this.dyn_dtree),ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new C.Buf16(ae+1),this.heap=new C.Buf16(2*H+1),ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new C.Buf16(2*H+1),ne(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Te(fe){var Be;return fe&&fe.state?(fe.total_in=fe.total_out=0,fe.data_type=L,(Be=fe.state).pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?G:Y,fe.adler=Be.wrap===2?0:1,Be.last_flush=N,T._tr_init(Be),D):oe(fe,O)}function he(fe){var Be=Te(fe);return Be===D&&function(Le){Le.window_size=2*Le.w_size,ne(Le.head),Le.max_lazy_match=E[Le.level].max_lazy,Le.good_match=E[Le.level].good_length,Le.nice_match=E[Le.level].nice_length,Le.max_chain_length=E[Le.level].max_chain,Le.strstart=0,Le.block_start=0,Le.lookahead=0,Le.insert=0,Le.match_length=Le.prev_length=ce-1,Le.match_available=0,Le.ins_h=0}(fe.state),Be}function xe(fe,Be,Le,Ve,Ie,Me){if(!fe)return O;var He=1;if(Be===F&&(Be=6),Ve<0?(He=0,Ve=-Ve):15<Ve&&(He=2,Ve-=16),Ie<1||q<Ie||Le!==j||Ve<8||15<Ve||Be<0||9<Be||Me<0||M<Me)return oe(fe,O);Ve===8&&(Ve=9);var We=new Ne;return(fe.state=We).strm=fe,We.wrap=He,We.gzhead=null,We.w_bits=Ve,We.w_size=1<<We.w_bits,We.w_mask=We.w_size-1,We.hash_bits=Ie+7,We.hash_size=1<<We.hash_bits,We.hash_mask=We.hash_size-1,We.hash_shift=~~((We.hash_bits+ce-1)/ce),We.window=new C.Buf8(2*We.w_size),We.head=new C.Buf16(We.hash_size),We.prev=new C.Buf16(We.w_size),We.lit_bufsize=1<<Ie+6,We.pending_buf_size=4*We.lit_bufsize,We.pending_buf=new C.Buf8(We.pending_buf_size),We.d_buf=1*We.lit_bufsize,We.l_buf=3*We.lit_bufsize,We.level=Be,We.strategy=Me,We.method=Le,he(fe)}E=[new Re(0,0,0,0,function(fe,Be){var Le=65535;for(Le>fe.pending_buf_size-5&&(Le=fe.pending_buf_size-5);;){if(fe.lookahead<=1){if(ge(fe),fe.lookahead===0&&Be===N)return U;if(fe.lookahead===0)break}fe.strstart+=fe.lookahead,fe.lookahead=0;var Ve=fe.block_start+Le;if((fe.strstart===0||fe.strstart>=Ve)&&(fe.lookahead=fe.strstart-Ve,fe.strstart=Ve,K(fe,!1),fe.strm.avail_out===0)||fe.strstart-fe.block_start>=fe.w_size-pe&&(K(fe,!1),fe.strm.avail_out===0))return U}return fe.insert=0,Be===V?(K(fe,!0),fe.strm.avail_out===0?ee:re):(fe.strstart>fe.block_start&&(K(fe,!1),fe.strm.avail_out),U)}),new Re(4,4,8,4,ye),new Re(4,5,16,8,ye),new Re(4,6,32,32,ye),new Re(4,4,16,16,Ee),new Re(8,16,32,32,Ee),new Re(8,16,128,128,Ee),new Re(8,32,128,256,Ee),new Re(32,128,258,1024,Ee),new Re(32,258,258,4096,Ee)],S.deflateInit=function(fe,Be){return xe(fe,Be,j,15,8,0)},S.deflateInit2=xe,S.deflateReset=he,S.deflateResetKeep=Te,S.deflateSetHeader=function(fe,Be){return fe&&fe.state?fe.state.wrap!==2?O:(fe.state.gzhead=Be,D):O},S.deflate=function(fe,Be){var Le,Ve,Ie,Me;if(!fe||!fe.state||5<Be||Be<0)return fe?oe(fe,O):O;if(Ve=fe.state,!fe.output||!fe.input&&fe.avail_in!==0||Ve.status===666&&Be!==V)return oe(fe,fe.avail_out===0?-5:O);if(Ve.strm=fe,Le=Ve.last_flush,Ve.last_flush=Be,Ve.status===G)if(Ve.wrap===2)fe.adler=0,le(Ve,31),le(Ve,139),le(Ve,8),Ve.gzhead?(le(Ve,(Ve.gzhead.text?1:0)+(Ve.gzhead.hcrc?2:0)+(Ve.gzhead.extra?4:0)+(Ve.gzhead.name?8:0)+(Ve.gzhead.comment?16:0)),le(Ve,255&Ve.gzhead.time),le(Ve,Ve.gzhead.time>>8&255),le(Ve,Ve.gzhead.time>>16&255),le(Ve,Ve.gzhead.time>>24&255),le(Ve,Ve.level===9?2:2<=Ve.strategy||Ve.level<2?4:0),le(Ve,255&Ve.gzhead.os),Ve.gzhead.extra&&Ve.gzhead.extra.length&&(le(Ve,255&Ve.gzhead.extra.length),le(Ve,Ve.gzhead.extra.length>>8&255)),Ve.gzhead.hcrc&&(fe.adler=A(fe.adler,Ve.pending_buf,Ve.pending,0)),Ve.gzindex=0,Ve.status=69):(le(Ve,0),le(Ve,0),le(Ve,0),le(Ve,0),le(Ve,0),le(Ve,Ve.level===9?2:2<=Ve.strategy||Ve.level<2?4:0),le(Ve,3),Ve.status=Y);else{var He=j+(Ve.w_bits-8<<4)<<8;He|=(2<=Ve.strategy||Ve.level<2?0:Ve.level<6?1:Ve.level===6?2:3)<<6,Ve.strstart!==0&&(He|=32),He+=31-He%31,Ve.status=Y,ue(Ve,He),Ve.strstart!==0&&(ue(Ve,fe.adler>>>16),ue(Ve,65535&fe.adler)),fe.adler=1}if(Ve.status===69)if(Ve.gzhead.extra){for(Ie=Ve.pending;Ve.gzindex<(65535&Ve.gzhead.extra.length)&&(Ve.pending!==Ve.pending_buf_size||(Ve.gzhead.hcrc&&Ve.pending>Ie&&(fe.adler=A(fe.adler,Ve.pending_buf,Ve.pending-Ie,Ie)),te(fe),Ie=Ve.pending,Ve.pending!==Ve.pending_buf_size));)le(Ve,255&Ve.gzhead.extra[Ve.gzindex]),Ve.gzindex++;Ve.gzhead.hcrc&&Ve.pending>Ie&&(fe.adler=A(fe.adler,Ve.pending_buf,Ve.pending-Ie,Ie)),Ve.gzindex===Ve.gzhead.extra.length&&(Ve.gzindex=0,Ve.status=73)}else Ve.status=73;if(Ve.status===73)if(Ve.gzhead.name){Ie=Ve.pending;do{if(Ve.pending===Ve.pending_buf_size&&(Ve.gzhead.hcrc&&Ve.pending>Ie&&(fe.adler=A(fe.adler,Ve.pending_buf,Ve.pending-Ie,Ie)),te(fe),Ie=Ve.pending,Ve.pending===Ve.pending_buf_size)){Me=1;break}Me=Ve.gzindex<Ve.gzhead.name.length?255&Ve.gzhead.name.charCodeAt(Ve.gzindex++):0,le(Ve,Me)}while(Me!==0);Ve.gzhead.hcrc&&Ve.pending>Ie&&(fe.adler=A(fe.adler,Ve.pending_buf,Ve.pending-Ie,Ie)),Me===0&&(Ve.gzindex=0,Ve.status=91)}else Ve.status=91;if(Ve.status===91)if(Ve.gzhead.comment){Ie=Ve.pending;do{if(Ve.pending===Ve.pending_buf_size&&(Ve.gzhead.hcrc&&Ve.pending>Ie&&(fe.adler=A(fe.adler,Ve.pending_buf,Ve.pending-Ie,Ie)),te(fe),Ie=Ve.pending,Ve.pending===Ve.pending_buf_size)){Me=1;break}Me=Ve.gzindex<Ve.gzhead.comment.length?255&Ve.gzhead.comment.charCodeAt(Ve.gzindex++):0,le(Ve,Me)}while(Me!==0);Ve.gzhead.hcrc&&Ve.pending>Ie&&(fe.adler=A(fe.adler,Ve.pending_buf,Ve.pending-Ie,Ie)),Me===0&&(Ve.status=103)}else Ve.status=103;if(Ve.status===103&&(Ve.gzhead.hcrc?(Ve.pending+2>Ve.pending_buf_size&&te(fe),Ve.pending+2<=Ve.pending_buf_size&&(le(Ve,255&fe.adler),le(Ve,fe.adler>>8&255),fe.adler=0,Ve.status=Y)):Ve.status=Y),Ve.pending!==0){if(te(fe),fe.avail_out===0)return Ve.last_flush=-1,D}else if(fe.avail_in===0&&ie(Be)<=ie(Le)&&Be!==V)return oe(fe,-5);if(Ve.status===666&&fe.avail_in!==0)return oe(fe,-5);if(fe.avail_in!==0||Ve.lookahead!==0||Be!==N&&Ve.status!==666){var We=Ve.strategy===2?function(Ue,Ge){for(var et;;){if(Ue.lookahead===0&&(ge(Ue),Ue.lookahead===0)){if(Ge===N)return U;break}if(Ue.match_length=0,et=T._tr_tally(Ue,0,Ue.window[Ue.strstart]),Ue.lookahead--,Ue.strstart++,et&&(K(Ue,!1),Ue.strm.avail_out===0))return U}return Ue.insert=0,Ge===V?(K(Ue,!0),Ue.strm.avail_out===0?ee:re):Ue.last_lit&&(K(Ue,!1),Ue.strm.avail_out===0)?U:W}(Ve,Be):Ve.strategy===3?function(Ue,Ge){for(var et,ot,ht,Oe,we=Ue.window;;){if(Ue.lookahead<=ve){if(ge(Ue),Ue.lookahead<=ve&&Ge===N)return U;if(Ue.lookahead===0)break}if(Ue.match_length=0,Ue.lookahead>=ce&&0<Ue.strstart&&(ot=we[ht=Ue.strstart-1])===we[++ht]&&ot===we[++ht]&&ot===we[++ht]){Oe=Ue.strstart+ve;do;while(ot===we[++ht]&&ot===we[++ht]&&ot===we[++ht]&&ot===we[++ht]&&ot===we[++ht]&&ot===we[++ht]&&ot===we[++ht]&&ot===we[++ht]&&ht<Oe);Ue.match_length=ve-(Oe-ht),Ue.match_length>Ue.lookahead&&(Ue.match_length=Ue.lookahead)}if(Ue.match_length>=ce?(et=T._tr_tally(Ue,1,Ue.match_length-ce),Ue.lookahead-=Ue.match_length,Ue.strstart+=Ue.match_length,Ue.match_length=0):(et=T._tr_tally(Ue,0,Ue.window[Ue.strstart]),Ue.lookahead--,Ue.strstart++),et&&(K(Ue,!1),Ue.strm.avail_out===0))return U}return Ue.insert=0,Ge===V?(K(Ue,!0),Ue.strm.avail_out===0?ee:re):Ue.last_lit&&(K(Ue,!1),Ue.strm.avail_out===0)?U:W}(Ve,Be):E[Ve.level].func(Ve,Be);if(We!==ee&&We!==re||(Ve.status=666),We===U||We===ee)return fe.avail_out===0&&(Ve.last_flush=-1),D;if(We===W&&(Be===1?T._tr_align(Ve):Be!==5&&(T._tr_stored_block(Ve,0,0,!1),Be===3&&(ne(Ve.head),Ve.lookahead===0&&(Ve.strstart=0,Ve.block_start=0,Ve.insert=0))),te(fe),fe.avail_out===0))return Ve.last_flush=-1,D}return Be!==V?D:Ve.wrap<=0?1:(Ve.wrap===2?(le(Ve,255&fe.adler),le(Ve,fe.adler>>8&255),le(Ve,fe.adler>>16&255),le(Ve,fe.adler>>24&255),le(Ve,255&fe.total_in),le(Ve,fe.total_in>>8&255),le(Ve,fe.total_in>>16&255),le(Ve,fe.total_in>>24&255)):(ue(Ve,fe.adler>>>16),ue(Ve,65535&fe.adler)),te(fe),0<Ve.wrap&&(Ve.wrap=-Ve.wrap),Ve.pending!==0?D:1)},S.deflateEnd=function(fe){var Be;return fe&&fe.state?(Be=fe.state.status)!==G&&Be!==69&&Be!==73&&Be!==91&&Be!==103&&Be!==Y&&Be!==666?oe(fe,O):(fe.state=null,Be===Y?oe(fe,-3):D):O},S.deflateSetDictionary=function(fe,Be){var Le,Ve,Ie,Me,He,We,Ue,Ge,et=Be.length;if(!fe||!fe.state||(Me=(Le=fe.state).wrap)===2||Me===1&&Le.status!==G||Le.lookahead)return O;for(Me===1&&(fe.adler=B(fe.adler,Be,et,0)),Le.wrap=0,et>=Le.w_size&&(Me===0&&(ne(Le.head),Le.strstart=0,Le.block_start=0,Le.insert=0),Ge=new C.Buf8(Le.w_size),C.arraySet(Ge,Be,et-Le.w_size,Le.w_size,0),Be=Ge,et=Le.w_size),He=fe.avail_in,We=fe.next_in,Ue=fe.input,fe.avail_in=et,fe.next_in=0,fe.input=Be,ge(Le);Le.lookahead>=ce;){for(Ve=Le.strstart,Ie=Le.lookahead-(ce-1);Le.ins_h=(Le.ins_h<<Le.hash_shift^Le.window[Ve+ce-1])&Le.hash_mask,Le.prev[Ve&Le.w_mask]=Le.head[Le.ins_h],Le.head[Le.ins_h]=Ve,Ve++,--Ie;);Le.strstart=Ve,Le.lookahead=ce-1,ge(Le)}return Le.strstart+=Le.lookahead,Le.block_start=Le.strstart,Le.insert=Le.lookahead,Le.lookahead=0,Le.match_length=Le.prev_length=ce-1,Le.match_available=0,fe.next_in=We,fe.input=Ue,fe.avail_in=He,Le.wrap=Me,D},S.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(_,x,S){x.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(_,x,S){x.exports=function(E,C){var T,B,A,I,N,V,D,O,F,M,L,j,q,H,X,J,Z,ae,ce,ve,pe,G,Y,U,W;T=E.state,B=E.next_in,U=E.input,A=B+(E.avail_in-5),I=E.next_out,W=E.output,N=I-(C-E.avail_out),V=I+(E.avail_out-257),D=T.dmax,O=T.wsize,F=T.whave,M=T.wnext,L=T.window,j=T.hold,q=T.bits,H=T.lencode,X=T.distcode,J=(1<<T.lenbits)-1,Z=(1<<T.distbits)-1;e:do{q<15&&(j+=U[B++]<<q,q+=8,j+=U[B++]<<q,q+=8),ae=H[j&J];t:for(;;){if(j>>>=ce=ae>>>24,q-=ce,(ce=ae>>>16&255)===0)W[I++]=65535&ae;else{if(!(16&ce)){if(!(64&ce)){ae=H[(65535&ae)+(j&(1<<ce)-1)];continue t}if(32&ce){T.mode=12;break e}E.msg="invalid literal/length code",T.mode=30;break e}ve=65535&ae,(ce&=15)&&(q<ce&&(j+=U[B++]<<q,q+=8),ve+=j&(1<<ce)-1,j>>>=ce,q-=ce),q<15&&(j+=U[B++]<<q,q+=8,j+=U[B++]<<q,q+=8),ae=X[j&Z];r:for(;;){if(j>>>=ce=ae>>>24,q-=ce,!(16&(ce=ae>>>16&255))){if(!(64&ce)){ae=X[(65535&ae)+(j&(1<<ce)-1)];continue r}E.msg="invalid distance code",T.mode=30;break e}if(pe=65535&ae,q<(ce&=15)&&(j+=U[B++]<<q,(q+=8)<ce&&(j+=U[B++]<<q,q+=8)),D<(pe+=j&(1<<ce)-1)){E.msg="invalid distance too far back",T.mode=30;break e}if(j>>>=ce,q-=ce,(ce=I-N)<pe){if(F<(ce=pe-ce)&&T.sane){E.msg="invalid distance too far back",T.mode=30;break e}if(Y=L,(G=0)===M){if(G+=O-ce,ce<ve){for(ve-=ce;W[I++]=L[G++],--ce;);G=I-pe,Y=W}}else if(M<ce){if(G+=O+M-ce,(ce-=M)<ve){for(ve-=ce;W[I++]=L[G++],--ce;);if(G=0,M<ve){for(ve-=ce=M;W[I++]=L[G++],--ce;);G=I-pe,Y=W}}}else if(G+=M-ce,ce<ve){for(ve-=ce;W[I++]=L[G++],--ce;);G=I-pe,Y=W}for(;2<ve;)W[I++]=Y[G++],W[I++]=Y[G++],W[I++]=Y[G++],ve-=3;ve&&(W[I++]=Y[G++],1<ve&&(W[I++]=Y[G++]))}else{for(G=I-pe;W[I++]=W[G++],W[I++]=W[G++],W[I++]=W[G++],2<(ve-=3););ve&&(W[I++]=W[G++],1<ve&&(W[I++]=W[G++]))}break}}break}}while(B<A&&I<V);B-=ve=q>>3,j&=(1<<(q-=ve<<3))-1,E.next_in=B,E.next_out=I,E.avail_in=B<A?A-B+5:5-(B-A),E.avail_out=I<V?V-I+257:257-(I-V),T.hold=j,T.bits=q}},{}],49:[function(_,x,S){var E=_("../utils/common"),C=_("./adler32"),T=_("./crc32"),B=_("./inffast"),A=_("./inftrees"),I=1,N=2,V=0,D=-2,O=1,F=852,M=592;function L(G){return(G>>>24&255)+(G>>>8&65280)+((65280&G)<<8)+((255&G)<<24)}function j(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new E.Buf16(320),this.work=new E.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function q(G){var Y;return G&&G.state?(Y=G.state,G.total_in=G.total_out=Y.total=0,G.msg="",Y.wrap&&(G.adler=1&Y.wrap),Y.mode=O,Y.last=0,Y.havedict=0,Y.dmax=32768,Y.head=null,Y.hold=0,Y.bits=0,Y.lencode=Y.lendyn=new E.Buf32(F),Y.distcode=Y.distdyn=new E.Buf32(M),Y.sane=1,Y.back=-1,V):D}function H(G){var Y;return G&&G.state?((Y=G.state).wsize=0,Y.whave=0,Y.wnext=0,q(G)):D}function X(G,Y){var U,W;return G&&G.state?(W=G.state,Y<0?(U=0,Y=-Y):(U=1+(Y>>4),Y<48&&(Y&=15)),Y&&(Y<8||15<Y)?D:(W.window!==null&&W.wbits!==Y&&(W.window=null),W.wrap=U,W.wbits=Y,H(G))):D}function J(G,Y){var U,W;return G?(W=new j,(G.state=W).window=null,(U=X(G,Y))!==V&&(G.state=null),U):D}var Z,ae,ce=!0;function ve(G){if(ce){var Y;for(Z=new E.Buf32(512),ae=new E.Buf32(32),Y=0;Y<144;)G.lens[Y++]=8;for(;Y<256;)G.lens[Y++]=9;for(;Y<280;)G.lens[Y++]=7;for(;Y<288;)G.lens[Y++]=8;for(A(I,G.lens,0,288,Z,0,G.work,{bits:9}),Y=0;Y<32;)G.lens[Y++]=5;A(N,G.lens,0,32,ae,0,G.work,{bits:5}),ce=!1}G.lencode=Z,G.lenbits=9,G.distcode=ae,G.distbits=5}function pe(G,Y,U,W){var ee,re=G.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new E.Buf8(re.wsize)),W>=re.wsize?(E.arraySet(re.window,Y,U-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(W<(ee=re.wsize-re.wnext)&&(ee=W),E.arraySet(re.window,Y,U-W,ee,re.wnext),(W-=ee)?(E.arraySet(re.window,Y,U-W,W,0),re.wnext=W,re.whave=re.wsize):(re.wnext+=ee,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=ee))),0}S.inflateReset=H,S.inflateReset2=X,S.inflateResetKeep=q,S.inflateInit=function(G){return J(G,15)},S.inflateInit2=J,S.inflate=function(G,Y){var U,W,ee,re,oe,ie,ne,te,K,le,ue,be,ge,ye,Ee,Re,Ne,Te,he,xe,fe,Be,Le,Ve,Ie=0,Me=new E.Buf8(4),He=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!G||!G.state||!G.output||!G.input&&G.avail_in!==0)return D;(U=G.state).mode===12&&(U.mode=13),oe=G.next_out,ee=G.output,ne=G.avail_out,re=G.next_in,W=G.input,ie=G.avail_in,te=U.hold,K=U.bits,le=ie,ue=ne,Be=V;e:for(;;)switch(U.mode){case O:if(U.wrap===0){U.mode=13;break}for(;K<16;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}if(2&U.wrap&&te===35615){Me[U.check=0]=255&te,Me[1]=te>>>8&255,U.check=T(U.check,Me,2,0),K=te=0,U.mode=2;break}if(U.flags=0,U.head&&(U.head.done=!1),!(1&U.wrap)||(((255&te)<<8)+(te>>8))%31){G.msg="incorrect header check",U.mode=30;break}if((15&te)!=8){G.msg="unknown compression method",U.mode=30;break}if(K-=4,fe=8+(15&(te>>>=4)),U.wbits===0)U.wbits=fe;else if(fe>U.wbits){G.msg="invalid window size",U.mode=30;break}U.dmax=1<<fe,G.adler=U.check=1,U.mode=512&te?10:12,K=te=0;break;case 2:for(;K<16;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}if(U.flags=te,(255&U.flags)!=8){G.msg="unknown compression method",U.mode=30;break}if(57344&U.flags){G.msg="unknown header flags set",U.mode=30;break}U.head&&(U.head.text=te>>8&1),512&U.flags&&(Me[0]=255&te,Me[1]=te>>>8&255,U.check=T(U.check,Me,2,0)),K=te=0,U.mode=3;case 3:for(;K<32;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}U.head&&(U.head.time=te),512&U.flags&&(Me[0]=255&te,Me[1]=te>>>8&255,Me[2]=te>>>16&255,Me[3]=te>>>24&255,U.check=T(U.check,Me,4,0)),K=te=0,U.mode=4;case 4:for(;K<16;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}U.head&&(U.head.xflags=255&te,U.head.os=te>>8),512&U.flags&&(Me[0]=255&te,Me[1]=te>>>8&255,U.check=T(U.check,Me,2,0)),K=te=0,U.mode=5;case 5:if(1024&U.flags){for(;K<16;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}U.length=te,U.head&&(U.head.extra_len=te),512&U.flags&&(Me[0]=255&te,Me[1]=te>>>8&255,U.check=T(U.check,Me,2,0)),K=te=0}else U.head&&(U.head.extra=null);U.mode=6;case 6:if(1024&U.flags&&(ie<(be=U.length)&&(be=ie),be&&(U.head&&(fe=U.head.extra_len-U.length,U.head.extra||(U.head.extra=new Array(U.head.extra_len)),E.arraySet(U.head.extra,W,re,be,fe)),512&U.flags&&(U.check=T(U.check,W,be,re)),ie-=be,re+=be,U.length-=be),U.length))break e;U.length=0,U.mode=7;case 7:if(2048&U.flags){if(ie===0)break e;for(be=0;fe=W[re+be++],U.head&&fe&&U.length<65536&&(U.head.name+=String.fromCharCode(fe)),fe&&be<ie;);if(512&U.flags&&(U.check=T(U.check,W,be,re)),ie-=be,re+=be,fe)break e}else U.head&&(U.head.name=null);U.length=0,U.mode=8;case 8:if(4096&U.flags){if(ie===0)break e;for(be=0;fe=W[re+be++],U.head&&fe&&U.length<65536&&(U.head.comment+=String.fromCharCode(fe)),fe&&be<ie;);if(512&U.flags&&(U.check=T(U.check,W,be,re)),ie-=be,re+=be,fe)break e}else U.head&&(U.head.comment=null);U.mode=9;case 9:if(512&U.flags){for(;K<16;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}if(te!==(65535&U.check)){G.msg="header crc mismatch",U.mode=30;break}K=te=0}U.head&&(U.head.hcrc=U.flags>>9&1,U.head.done=!0),G.adler=U.check=0,U.mode=12;break;case 10:for(;K<32;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}G.adler=U.check=L(te),K=te=0,U.mode=11;case 11:if(U.havedict===0)return G.next_out=oe,G.avail_out=ne,G.next_in=re,G.avail_in=ie,U.hold=te,U.bits=K,2;G.adler=U.check=1,U.mode=12;case 12:if(Y===5||Y===6)break e;case 13:if(U.last){te>>>=7&K,K-=7&K,U.mode=27;break}for(;K<3;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}switch(U.last=1&te,K-=1,3&(te>>>=1)){case 0:U.mode=14;break;case 1:if(ve(U),U.mode=20,Y!==6)break;te>>>=2,K-=2;break e;case 2:U.mode=17;break;case 3:G.msg="invalid block type",U.mode=30}te>>>=2,K-=2;break;case 14:for(te>>>=7&K,K-=7&K;K<32;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}if((65535&te)!=(te>>>16^65535)){G.msg="invalid stored block lengths",U.mode=30;break}if(U.length=65535&te,K=te=0,U.mode=15,Y===6)break e;case 15:U.mode=16;case 16:if(be=U.length){if(ie<be&&(be=ie),ne<be&&(be=ne),be===0)break e;E.arraySet(ee,W,re,be,oe),ie-=be,re+=be,ne-=be,oe+=be,U.length-=be;break}U.mode=12;break;case 17:for(;K<14;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}if(U.nlen=257+(31&te),te>>>=5,K-=5,U.ndist=1+(31&te),te>>>=5,K-=5,U.ncode=4+(15&te),te>>>=4,K-=4,286<U.nlen||30<U.ndist){G.msg="too many length or distance symbols",U.mode=30;break}U.have=0,U.mode=18;case 18:for(;U.have<U.ncode;){for(;K<3;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}U.lens[He[U.have++]]=7&te,te>>>=3,K-=3}for(;U.have<19;)U.lens[He[U.have++]]=0;if(U.lencode=U.lendyn,U.lenbits=7,Le={bits:U.lenbits},Be=A(0,U.lens,0,19,U.lencode,0,U.work,Le),U.lenbits=Le.bits,Be){G.msg="invalid code lengths set",U.mode=30;break}U.have=0,U.mode=19;case 19:for(;U.have<U.nlen+U.ndist;){for(;Re=(Ie=U.lencode[te&(1<<U.lenbits)-1])>>>16&255,Ne=65535&Ie,!((Ee=Ie>>>24)<=K);){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}if(Ne<16)te>>>=Ee,K-=Ee,U.lens[U.have++]=Ne;else{if(Ne===16){for(Ve=Ee+2;K<Ve;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}if(te>>>=Ee,K-=Ee,U.have===0){G.msg="invalid bit length repeat",U.mode=30;break}fe=U.lens[U.have-1],be=3+(3&te),te>>>=2,K-=2}else if(Ne===17){for(Ve=Ee+3;K<Ve;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}K-=Ee,fe=0,be=3+(7&(te>>>=Ee)),te>>>=3,K-=3}else{for(Ve=Ee+7;K<Ve;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}K-=Ee,fe=0,be=11+(127&(te>>>=Ee)),te>>>=7,K-=7}if(U.have+be>U.nlen+U.ndist){G.msg="invalid bit length repeat",U.mode=30;break}for(;be--;)U.lens[U.have++]=fe}}if(U.mode===30)break;if(U.lens[256]===0){G.msg="invalid code -- missing end-of-block",U.mode=30;break}if(U.lenbits=9,Le={bits:U.lenbits},Be=A(I,U.lens,0,U.nlen,U.lencode,0,U.work,Le),U.lenbits=Le.bits,Be){G.msg="invalid literal/lengths set",U.mode=30;break}if(U.distbits=6,U.distcode=U.distdyn,Le={bits:U.distbits},Be=A(N,U.lens,U.nlen,U.ndist,U.distcode,0,U.work,Le),U.distbits=Le.bits,Be){G.msg="invalid distances set",U.mode=30;break}if(U.mode=20,Y===6)break e;case 20:U.mode=21;case 21:if(6<=ie&&258<=ne){G.next_out=oe,G.avail_out=ne,G.next_in=re,G.avail_in=ie,U.hold=te,U.bits=K,B(G,ue),oe=G.next_out,ee=G.output,ne=G.avail_out,re=G.next_in,W=G.input,ie=G.avail_in,te=U.hold,K=U.bits,U.mode===12&&(U.back=-1);break}for(U.back=0;Re=(Ie=U.lencode[te&(1<<U.lenbits)-1])>>>16&255,Ne=65535&Ie,!((Ee=Ie>>>24)<=K);){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}if(Re&&!(240&Re)){for(Te=Ee,he=Re,xe=Ne;Re=(Ie=U.lencode[xe+((te&(1<<Te+he)-1)>>Te)])>>>16&255,Ne=65535&Ie,!(Te+(Ee=Ie>>>24)<=K);){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}te>>>=Te,K-=Te,U.back+=Te}if(te>>>=Ee,K-=Ee,U.back+=Ee,U.length=Ne,Re===0){U.mode=26;break}if(32&Re){U.back=-1,U.mode=12;break}if(64&Re){G.msg="invalid literal/length code",U.mode=30;break}U.extra=15&Re,U.mode=22;case 22:if(U.extra){for(Ve=U.extra;K<Ve;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}U.length+=te&(1<<U.extra)-1,te>>>=U.extra,K-=U.extra,U.back+=U.extra}U.was=U.length,U.mode=23;case 23:for(;Re=(Ie=U.distcode[te&(1<<U.distbits)-1])>>>16&255,Ne=65535&Ie,!((Ee=Ie>>>24)<=K);){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}if(!(240&Re)){for(Te=Ee,he=Re,xe=Ne;Re=(Ie=U.distcode[xe+((te&(1<<Te+he)-1)>>Te)])>>>16&255,Ne=65535&Ie,!(Te+(Ee=Ie>>>24)<=K);){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}te>>>=Te,K-=Te,U.back+=Te}if(te>>>=Ee,K-=Ee,U.back+=Ee,64&Re){G.msg="invalid distance code",U.mode=30;break}U.offset=Ne,U.extra=15&Re,U.mode=24;case 24:if(U.extra){for(Ve=U.extra;K<Ve;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}U.offset+=te&(1<<U.extra)-1,te>>>=U.extra,K-=U.extra,U.back+=U.extra}if(U.offset>U.dmax){G.msg="invalid distance too far back",U.mode=30;break}U.mode=25;case 25:if(ne===0)break e;if(be=ue-ne,U.offset>be){if((be=U.offset-be)>U.whave&&U.sane){G.msg="invalid distance too far back",U.mode=30;break}ge=be>U.wnext?(be-=U.wnext,U.wsize-be):U.wnext-be,be>U.length&&(be=U.length),ye=U.window}else ye=ee,ge=oe-U.offset,be=U.length;for(ne<be&&(be=ne),ne-=be,U.length-=be;ee[oe++]=ye[ge++],--be;);U.length===0&&(U.mode=21);break;case 26:if(ne===0)break e;ee[oe++]=U.length,ne--,U.mode=21;break;case 27:if(U.wrap){for(;K<32;){if(ie===0)break e;ie--,te|=W[re++]<<K,K+=8}if(ue-=ne,G.total_out+=ue,U.total+=ue,ue&&(G.adler=U.check=U.flags?T(U.check,ee,ue,oe-ue):C(U.check,ee,ue,oe-ue)),ue=ne,(U.flags?te:L(te))!==U.check){G.msg="incorrect data check",U.mode=30;break}K=te=0}U.mode=28;case 28:if(U.wrap&&U.flags){for(;K<32;){if(ie===0)break e;ie--,te+=W[re++]<<K,K+=8}if(te!==(4294967295&U.total)){G.msg="incorrect length check",U.mode=30;break}K=te=0}U.mode=29;case 29:Be=1;break e;case 30:Be=-3;break e;case 31:return-4;case 32:default:return D}return G.next_out=oe,G.avail_out=ne,G.next_in=re,G.avail_in=ie,U.hold=te,U.bits=K,(U.wsize||ue!==G.avail_out&&U.mode<30&&(U.mode<27||Y!==4))&&pe(G,G.output,G.next_out,ue-G.avail_out)?(U.mode=31,-4):(le-=G.avail_in,ue-=G.avail_out,G.total_in+=le,G.total_out+=ue,U.total+=ue,U.wrap&&ue&&(G.adler=U.check=U.flags?T(U.check,ee,ue,G.next_out-ue):C(U.check,ee,ue,G.next_out-ue)),G.data_type=U.bits+(U.last?64:0)+(U.mode===12?128:0)+(U.mode===20||U.mode===15?256:0),(le==0&&ue===0||Y===4)&&Be===V&&(Be=-5),Be)},S.inflateEnd=function(G){if(!G||!G.state)return D;var Y=G.state;return Y.window&&(Y.window=null),G.state=null,V},S.inflateGetHeader=function(G,Y){var U;return G&&G.state&&2&(U=G.state).wrap?((U.head=Y).done=!1,V):D},S.inflateSetDictionary=function(G,Y){var U,W=Y.length;return G&&G.state?(U=G.state).wrap!==0&&U.mode!==11?D:U.mode===11&&C(1,Y,W,0)!==U.check?-3:pe(G,Y,W,W)?(U.mode=31,-4):(U.havedict=1,V):D},S.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(_,x,S){var E=_("../utils/common"),C=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],T=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],B=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],A=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];x.exports=function(I,N,V,D,O,F,M,L){var j,q,H,X,J,Z,ae,ce,ve,pe=L.bits,G=0,Y=0,U=0,W=0,ee=0,re=0,oe=0,ie=0,ne=0,te=0,K=null,le=0,ue=new E.Buf16(16),be=new E.Buf16(16),ge=null,ye=0;for(G=0;G<=15;G++)ue[G]=0;for(Y=0;Y<D;Y++)ue[N[V+Y]]++;for(ee=pe,W=15;1<=W&&ue[W]===0;W--);if(W<ee&&(ee=W),W===0)return O[F++]=20971520,O[F++]=20971520,L.bits=1,0;for(U=1;U<W&&ue[U]===0;U++);for(ee<U&&(ee=U),G=ie=1;G<=15;G++)if(ie<<=1,(ie-=ue[G])<0)return-1;if(0<ie&&(I===0||W!==1))return-1;for(be[1]=0,G=1;G<15;G++)be[G+1]=be[G]+ue[G];for(Y=0;Y<D;Y++)N[V+Y]!==0&&(M[be[N[V+Y]]++]=Y);if(Z=I===0?(K=ge=M,19):I===1?(K=C,le-=257,ge=T,ye-=257,256):(K=B,ge=A,-1),G=U,J=F,oe=Y=te=0,H=-1,X=(ne=1<<(re=ee))-1,I===1&&852<ne||I===2&&592<ne)return 1;for(;;){for(ae=G-oe,ve=M[Y]<Z?(ce=0,M[Y]):M[Y]>Z?(ce=ge[ye+M[Y]],K[le+M[Y]]):(ce=96,0),j=1<<G-oe,U=q=1<<re;O[J+(te>>oe)+(q-=j)]=ae<<24|ce<<16|ve|0,q!==0;);for(j=1<<G-1;te&j;)j>>=1;if(j!==0?(te&=j-1,te+=j):te=0,Y++,--ue[G]==0){if(G===W)break;G=N[V+M[Y]]}if(ee<G&&(te&X)!==H){for(oe===0&&(oe=ee),J+=U,ie=1<<(re=G-oe);re+oe<W&&!((ie-=ue[re+oe])<=0);)re++,ie<<=1;if(ne+=1<<re,I===1&&852<ne||I===2&&592<ne)return 1;O[H=te&X]=ee<<24|re<<16|J-F|0}}return te!==0&&(O[J+te]=G-oe<<24|64<<16|0),L.bits=ee,0}},{"../utils/common":41}],51:[function(_,x,S){x.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(_,x,S){var E=_("../utils/common"),C=0,T=1;function B(Ie){for(var Me=Ie.length;0<=--Me;)Ie[Me]=0}var A=0,I=29,N=256,V=N+1+I,D=30,O=19,F=2*V+1,M=15,L=16,j=7,q=256,H=16,X=17,J=18,Z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ae=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pe=new Array(2*(V+2));B(pe);var G=new Array(2*D);B(G);var Y=new Array(512);B(Y);var U=new Array(256);B(U);var W=new Array(I);B(W);var ee,re,oe,ie=new Array(D);function ne(Ie,Me,He,We,Ue){this.static_tree=Ie,this.extra_bits=Me,this.extra_base=He,this.elems=We,this.max_length=Ue,this.has_stree=Ie&&Ie.length}function te(Ie,Me){this.dyn_tree=Ie,this.max_code=0,this.stat_desc=Me}function K(Ie){return Ie<256?Y[Ie]:Y[256+(Ie>>>7)]}function le(Ie,Me){Ie.pending_buf[Ie.pending++]=255&Me,Ie.pending_buf[Ie.pending++]=Me>>>8&255}function ue(Ie,Me,He){Ie.bi_valid>L-He?(Ie.bi_buf|=Me<<Ie.bi_valid&65535,le(Ie,Ie.bi_buf),Ie.bi_buf=Me>>L-Ie.bi_valid,Ie.bi_valid+=He-L):(Ie.bi_buf|=Me<<Ie.bi_valid&65535,Ie.bi_valid+=He)}function be(Ie,Me,He){ue(Ie,He[2*Me],He[2*Me+1])}function ge(Ie,Me){for(var He=0;He|=1&Ie,Ie>>>=1,He<<=1,0<--Me;);return He>>>1}function ye(Ie,Me,He){var We,Ue,Ge=new Array(M+1),et=0;for(We=1;We<=M;We++)Ge[We]=et=et+He[We-1]<<1;for(Ue=0;Ue<=Me;Ue++){var ot=Ie[2*Ue+1];ot!==0&&(Ie[2*Ue]=ge(Ge[ot]++,ot))}}function Ee(Ie){var Me;for(Me=0;Me<V;Me++)Ie.dyn_ltree[2*Me]=0;for(Me=0;Me<D;Me++)Ie.dyn_dtree[2*Me]=0;for(Me=0;Me<O;Me++)Ie.bl_tree[2*Me]=0;Ie.dyn_ltree[2*q]=1,Ie.opt_len=Ie.static_len=0,Ie.last_lit=Ie.matches=0}function Re(Ie){8<Ie.bi_valid?le(Ie,Ie.bi_buf):0<Ie.bi_valid&&(Ie.pending_buf[Ie.pending++]=Ie.bi_buf),Ie.bi_buf=0,Ie.bi_valid=0}function Ne(Ie,Me,He,We){var Ue=2*Me,Ge=2*He;return Ie[Ue]<Ie[Ge]||Ie[Ue]===Ie[Ge]&&We[Me]<=We[He]}function Te(Ie,Me,He){for(var We=Ie.heap[He],Ue=He<<1;Ue<=Ie.heap_len&&(Ue<Ie.heap_len&&Ne(Me,Ie.heap[Ue+1],Ie.heap[Ue],Ie.depth)&&Ue++,!Ne(Me,We,Ie.heap[Ue],Ie.depth));)Ie.heap[He]=Ie.heap[Ue],He=Ue,Ue<<=1;Ie.heap[He]=We}function he(Ie,Me,He){var We,Ue,Ge,et,ot=0;if(Ie.last_lit!==0)for(;We=Ie.pending_buf[Ie.d_buf+2*ot]<<8|Ie.pending_buf[Ie.d_buf+2*ot+1],Ue=Ie.pending_buf[Ie.l_buf+ot],ot++,We===0?be(Ie,Ue,Me):(be(Ie,(Ge=U[Ue])+N+1,Me),(et=Z[Ge])!==0&&ue(Ie,Ue-=W[Ge],et),be(Ie,Ge=K(--We),He),(et=ae[Ge])!==0&&ue(Ie,We-=ie[Ge],et)),ot<Ie.last_lit;);be(Ie,q,Me)}function xe(Ie,Me){var He,We,Ue,Ge=Me.dyn_tree,et=Me.stat_desc.static_tree,ot=Me.stat_desc.has_stree,ht=Me.stat_desc.elems,Oe=-1;for(Ie.heap_len=0,Ie.heap_max=F,He=0;He<ht;He++)Ge[2*He]!==0?(Ie.heap[++Ie.heap_len]=Oe=He,Ie.depth[He]=0):Ge[2*He+1]=0;for(;Ie.heap_len<2;)Ge[2*(Ue=Ie.heap[++Ie.heap_len]=Oe<2?++Oe:0)]=1,Ie.depth[Ue]=0,Ie.opt_len--,ot&&(Ie.static_len-=et[2*Ue+1]);for(Me.max_code=Oe,He=Ie.heap_len>>1;1<=He;He--)Te(Ie,Ge,He);for(Ue=ht;He=Ie.heap[1],Ie.heap[1]=Ie.heap[Ie.heap_len--],Te(Ie,Ge,1),We=Ie.heap[1],Ie.heap[--Ie.heap_max]=He,Ie.heap[--Ie.heap_max]=We,Ge[2*Ue]=Ge[2*He]+Ge[2*We],Ie.depth[Ue]=(Ie.depth[He]>=Ie.depth[We]?Ie.depth[He]:Ie.depth[We])+1,Ge[2*He+1]=Ge[2*We+1]=Ue,Ie.heap[1]=Ue++,Te(Ie,Ge,1),2<=Ie.heap_len;);Ie.heap[--Ie.heap_max]=Ie.heap[1],function(we,Ce){var ze,Ze,st,rt,Ft,Vt,Et=Ce.dyn_tree,jt=Ce.max_code,Lt=Ce.stat_desc.static_tree,qt=Ce.stat_desc.has_stree,_r=Ce.stat_desc.extra_bits,Zt=Ce.stat_desc.extra_base,zt=Ce.stat_desc.max_length,hr=0;for(rt=0;rt<=M;rt++)we.bl_count[rt]=0;for(Et[2*we.heap[we.heap_max]+1]=0,ze=we.heap_max+1;ze<F;ze++)zt<(rt=Et[2*Et[2*(Ze=we.heap[ze])+1]+1]+1)&&(rt=zt,hr++),Et[2*Ze+1]=rt,jt<Ze||(we.bl_count[rt]++,Ft=0,Zt<=Ze&&(Ft=_r[Ze-Zt]),Vt=Et[2*Ze],we.opt_len+=Vt*(rt+Ft),qt&&(we.static_len+=Vt*(Lt[2*Ze+1]+Ft)));if(hr!==0){do{for(rt=zt-1;we.bl_count[rt]===0;)rt--;we.bl_count[rt]--,we.bl_count[rt+1]+=2,we.bl_count[zt]--,hr-=2}while(0<hr);for(rt=zt;rt!==0;rt--)for(Ze=we.bl_count[rt];Ze!==0;)jt<(st=we.heap[--ze])||(Et[2*st+1]!==rt&&(we.opt_len+=(rt-Et[2*st+1])*Et[2*st],Et[2*st+1]=rt),Ze--)}}(Ie,Me),ye(Ge,Oe,Ie.bl_count)}function fe(Ie,Me,He){var We,Ue,Ge=-1,et=Me[1],ot=0,ht=7,Oe=4;for(et===0&&(ht=138,Oe=3),Me[2*(He+1)+1]=65535,We=0;We<=He;We++)Ue=et,et=Me[2*(We+1)+1],++ot<ht&&Ue===et||(ot<Oe?Ie.bl_tree[2*Ue]+=ot:Ue!==0?(Ue!==Ge&&Ie.bl_tree[2*Ue]++,Ie.bl_tree[2*H]++):ot<=10?Ie.bl_tree[2*X]++:Ie.bl_tree[2*J]++,Ge=Ue,Oe=(ot=0)===et?(ht=138,3):Ue===et?(ht=6,3):(ht=7,4))}function Be(Ie,Me,He){var We,Ue,Ge=-1,et=Me[1],ot=0,ht=7,Oe=4;for(et===0&&(ht=138,Oe=3),We=0;We<=He;We++)if(Ue=et,et=Me[2*(We+1)+1],!(++ot<ht&&Ue===et)){if(ot<Oe)for(;be(Ie,Ue,Ie.bl_tree),--ot!=0;);else Ue!==0?(Ue!==Ge&&(be(Ie,Ue,Ie.bl_tree),ot--),be(Ie,H,Ie.bl_tree),ue(Ie,ot-3,2)):ot<=10?(be(Ie,X,Ie.bl_tree),ue(Ie,ot-3,3)):(be(Ie,J,Ie.bl_tree),ue(Ie,ot-11,7));Ge=Ue,Oe=(ot=0)===et?(ht=138,3):Ue===et?(ht=6,3):(ht=7,4)}}B(ie);var Le=!1;function Ve(Ie,Me,He,We){ue(Ie,(A<<1)+(We?1:0),3),function(Ue,Ge,et,ot){Re(Ue),ot&&(le(Ue,et),le(Ue,~et)),E.arraySet(Ue.pending_buf,Ue.window,Ge,et,Ue.pending),Ue.pending+=et}(Ie,Me,He,!0)}S._tr_init=function(Ie){Le||(function(){var Me,He,We,Ue,Ge,et=new Array(M+1);for(Ue=We=0;Ue<I-1;Ue++)for(W[Ue]=We,Me=0;Me<1<<Z[Ue];Me++)U[We++]=Ue;for(U[We-1]=Ue,Ue=Ge=0;Ue<16;Ue++)for(ie[Ue]=Ge,Me=0;Me<1<<ae[Ue];Me++)Y[Ge++]=Ue;for(Ge>>=7;Ue<D;Ue++)for(ie[Ue]=Ge<<7,Me=0;Me<1<<ae[Ue]-7;Me++)Y[256+Ge++]=Ue;for(He=0;He<=M;He++)et[He]=0;for(Me=0;Me<=143;)pe[2*Me+1]=8,Me++,et[8]++;for(;Me<=255;)pe[2*Me+1]=9,Me++,et[9]++;for(;Me<=279;)pe[2*Me+1]=7,Me++,et[7]++;for(;Me<=287;)pe[2*Me+1]=8,Me++,et[8]++;for(ye(pe,V+1,et),Me=0;Me<D;Me++)G[2*Me+1]=5,G[2*Me]=ge(Me,5);ee=new ne(pe,Z,N+1,V,M),re=new ne(G,ae,0,D,M),oe=new ne(new Array(0),ce,0,O,j)}(),Le=!0),Ie.l_desc=new te(Ie.dyn_ltree,ee),Ie.d_desc=new te(Ie.dyn_dtree,re),Ie.bl_desc=new te(Ie.bl_tree,oe),Ie.bi_buf=0,Ie.bi_valid=0,Ee(Ie)},S._tr_stored_block=Ve,S._tr_flush_block=function(Ie,Me,He,We){var Ue,Ge,et=0;0<Ie.level?(Ie.strm.data_type===2&&(Ie.strm.data_type=function(ot){var ht,Oe=4093624447;for(ht=0;ht<=31;ht++,Oe>>>=1)if(1&Oe&&ot.dyn_ltree[2*ht]!==0)return C;if(ot.dyn_ltree[18]!==0||ot.dyn_ltree[20]!==0||ot.dyn_ltree[26]!==0)return T;for(ht=32;ht<N;ht++)if(ot.dyn_ltree[2*ht]!==0)return T;return C}(Ie)),xe(Ie,Ie.l_desc),xe(Ie,Ie.d_desc),et=function(ot){var ht;for(fe(ot,ot.dyn_ltree,ot.l_desc.max_code),fe(ot,ot.dyn_dtree,ot.d_desc.max_code),xe(ot,ot.bl_desc),ht=O-1;3<=ht&&ot.bl_tree[2*ve[ht]+1]===0;ht--);return ot.opt_len+=3*(ht+1)+5+5+4,ht}(Ie),Ue=Ie.opt_len+3+7>>>3,(Ge=Ie.static_len+3+7>>>3)<=Ue&&(Ue=Ge)):Ue=Ge=He+5,He+4<=Ue&&Me!==-1?Ve(Ie,Me,He,We):Ie.strategy===4||Ge===Ue?(ue(Ie,2+(We?1:0),3),he(Ie,pe,G)):(ue(Ie,4+(We?1:0),3),function(ot,ht,Oe,we){var Ce;for(ue(ot,ht-257,5),ue(ot,Oe-1,5),ue(ot,we-4,4),Ce=0;Ce<we;Ce++)ue(ot,ot.bl_tree[2*ve[Ce]+1],3);Be(ot,ot.dyn_ltree,ht-1),Be(ot,ot.dyn_dtree,Oe-1)}(Ie,Ie.l_desc.max_code+1,Ie.d_desc.max_code+1,et+1),he(Ie,Ie.dyn_ltree,Ie.dyn_dtree)),Ee(Ie),We&&Re(Ie)},S._tr_tally=function(Ie,Me,He){return Ie.pending_buf[Ie.d_buf+2*Ie.last_lit]=Me>>>8&255,Ie.pending_buf[Ie.d_buf+2*Ie.last_lit+1]=255&Me,Ie.pending_buf[Ie.l_buf+Ie.last_lit]=255&He,Ie.last_lit++,Me===0?Ie.dyn_ltree[2*He]++:(Ie.matches++,Me--,Ie.dyn_ltree[2*(U[He]+N+1)]++,Ie.dyn_dtree[2*K(Me)]++),Ie.last_lit===Ie.lit_bufsize-1},S._tr_align=function(Ie){ue(Ie,2,3),be(Ie,q,pe),function(Me){Me.bi_valid===16?(le(Me,Me.bi_buf),Me.bi_buf=0,Me.bi_valid=0):8<=Me.bi_valid&&(Me.pending_buf[Me.pending++]=255&Me.bi_buf,Me.bi_buf>>=8,Me.bi_valid-=8)}(Ie)}},{"../utils/common":41}],53:[function(_,x,S){x.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(_,x,S){(function(E){(function(C,T){if(!C.setImmediate){var B,A,I,N,V=1,D={},O=!1,F=C.document,M=Object.getPrototypeOf&&Object.getPrototypeOf(C);M=M&&M.setTimeout?M:C,B={}.toString.call(C.process)==="[object process]"?function(H){browser$1$1.nextTick(function(){j(H)})}:function(){if(C.postMessage&&!C.importScripts){var H=!0,X=C.onmessage;return C.onmessage=function(){H=!1},C.postMessage("","*"),C.onmessage=X,H}}()?(N="setImmediate$"+Math.random()+"$",C.addEventListener?C.addEventListener("message",q,!1):C.attachEvent("onmessage",q),function(H){C.postMessage(N+H,"*")}):C.MessageChannel?((I=new MessageChannel).port1.onmessage=function(H){j(H.data)},function(H){I.port2.postMessage(H)}):F&&"onreadystatechange"in F.createElement("script")?(A=F.documentElement,function(H){var X=F.createElement("script");X.onreadystatechange=function(){j(H),X.onreadystatechange=null,A.removeChild(X),X=null},A.appendChild(X)}):function(H){setTimeout(j,0,H)},M.setImmediate=function(H){typeof H!="function"&&(H=new Function(""+H));for(var X=new Array(arguments.length-1),J=0;J<X.length;J++)X[J]=arguments[J+1];var Z={callback:H,args:X};return D[V]=Z,B(V),V++},M.clearImmediate=L}function L(H){delete D[H]}function j(H){if(O)setTimeout(j,0,H);else{var X=D[H];if(X){O=!0;try{(function(J){var Z=J.callback,ae=J.args;switch(ae.length){case 0:Z();break;case 1:Z(ae[0]);break;case 2:Z(ae[0],ae[1]);break;case 3:Z(ae[0],ae[1],ae[2]);break;default:Z.apply(T,ae)}})(X)}finally{L(H),O=!1}}}}function q(H){H.source===C&&typeof H.data=="string"&&H.data.indexOf(N)===0&&j(+H.data.slice(N.length))}})(typeof self>"u"?E===void 0?this:E:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);var jszip_minExports=jszip_min.exports;const JSZip=getDefaultExportFromCjs(jszip_minExports),e$1=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}return"showOpenFilePicker"in self})();e$1?Promise.resolve().then(function(){return l}):Promise.resolve().then(function(){return v$1});e$1?Promise.resolve().then(function(){return y}):Promise.resolve().then(function(){return b});const a=e$1?Promise.resolve().then(function(){return m}):Promise.resolve().then(function(){return k});async function o(...r){return(await a).default(...r)}const s$2=async r=>{const n=await r.getFile();return n.handle=r,n};var c$1=async(r=[{}])=>{Array.isArray(r)||(r=[r]);const n=[];r.forEach((S,E)=>{n[E]={description:S.description||"Files",accept:{}},S.mimeTypes?S.mimeTypes.map(C=>{n[E].accept[C]=S.extensions||[]}):n[E].accept["*/*"]=S.extensions||[]});const _=await window.showOpenFilePicker({id:r[0].id,startIn:r[0].startIn,types:n,multiple:r[0].multiple||!1,excludeAcceptAllOption:r[0].excludeAcceptAllOption||!1}),x=await Promise.all(_.map(s$2));return r[0].multiple?x:x[0]},l={__proto__:null,default:c$1};function u(r){function n(_){if(Object(_)!==_)return Promise.reject(new TypeError(_+" is not an object."));var x=_.done;return Promise.resolve(_.value).then(function(S){return{value:S,done:x}})}return u=function(_){this.s=_,this.n=_.next},u.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(_){var x=this.s.return;return x===void 0?Promise.resolve({value:_,done:!0}):n(x.apply(this.s,arguments))},throw:function(_){var x=this.s.return;return x===void 0?Promise.reject(_):n(x.apply(this.s,arguments))}},new u(r)}const p=async(r,n,_=r.name,x)=>{const S=[],E=[];var C,T=!1,B=!1;try{for(var A,I=function(N){var V,D,O,F=2;for(typeof Symbol<"u"&&(D=Symbol.asyncIterator,O=Symbol.iterator);F--;){if(D&&(V=N[D])!=null)return V.call(N);if(O&&(V=N[O])!=null)return new u(V.call(N));D="@@asyncIterator",O="@@iterator"}throw new TypeError("Object is not async iterable")}(r.values());T=!(A=await I.next()).done;T=!1){const N=A.value,V=`${_}/${N.name}`;N.kind==="file"?E.push(N.getFile().then(D=>(D.directoryHandle=r,D.handle=N,Object.defineProperty(D,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>V})))):N.kind!=="directory"||!n||x&&x(N)||S.push(p(N,n,V,x))}}catch(N){B=!0,C=N}finally{try{T&&I.return!=null&&await I.return()}finally{if(B)throw C}}return[...(await Promise.all(S)).flat(),...await Promise.all(E)]};var d=async(r={})=>{r.recursive=r.recursive||!1,r.mode=r.mode||"read";const n=await window.showDirectoryPicker({id:r.id,startIn:r.startIn,mode:r.mode});return(await(await n.values()).next()).done?[n]:p(n,r.recursive,void 0,r.skipDirectory)},y={__proto__:null,default:d},f=async(r,n=[{}],_=null,x=!1,S=null)=>{Array.isArray(n)||(n=[n]),n[0].fileName=n[0].fileName||"Untitled";const E=[];let C=null;if(r instanceof Blob&&r.type?C=r.type:r.headers&&r.headers.get("content-type")&&(C=r.headers.get("content-type")),n.forEach((A,I)=>{E[I]={description:A.description||"Files",accept:{}},A.mimeTypes?(I===0&&C&&A.mimeTypes.push(C),A.mimeTypes.map(N=>{E[I].accept[N]=A.extensions||[]})):C?E[I].accept[C]=A.extensions||[]:E[I].accept["*/*"]=A.extensions||[]}),_)try{await _.getFile()}catch(A){if(_=null,x)throw A}const T=_||await window.showSaveFilePicker({suggestedName:n[0].fileName,id:n[0].id,startIn:n[0].startIn,types:E,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1});!_&&S&&S(T);const B=await T.createWritable();return"stream"in r?(await r.stream().pipeTo(B),T):"body"in r?(await r.body.pipeTo(B),T):(await B.write(await r),await B.close(),T)},m={__proto__:null,default:f},w=async(r=[{}])=>(Array.isArray(r)||(r=[r]),new Promise((n,_)=>{const x=document.createElement("input");x.type="file";const S=[...r.map(B=>B.mimeTypes||[]),...r.map(B=>B.extensions||[])].join();x.multiple=r[0].multiple||!1,x.accept=S||"",x.style.display="none",document.body.append(x);const E=B=>{typeof C=="function"&&C(),n(B)},C=r[0].legacySetup&&r[0].legacySetup(E,()=>C(_),x),T=()=>{window.removeEventListener("focus",T),x.remove()};x.addEventListener("click",()=>{window.addEventListener("focus",T)}),x.addEventListener("change",()=>{window.removeEventListener("focus",T),x.remove(),E(x.multiple?Array.from(x.files):x.files[0])}),"showPicker"in HTMLInputElement.prototype?x.showPicker():x.click()})),v$1={__proto__:null,default:w},h=async(r=[{}])=>(Array.isArray(r)||(r=[r]),r[0].recursive=r[0].recursive||!1,new Promise((n,_)=>{const x=document.createElement("input");x.type="file",x.webkitdirectory=!0;const S=C=>{typeof E=="function"&&E(),n(C)},E=r[0].legacySetup&&r[0].legacySetup(S,()=>E(_),x);x.addEventListener("change",()=>{let C=Array.from(x.files);r[0].recursive?r[0].recursive&&r[0].skipDirectory&&(C=C.filter(T=>T.webkitRelativePath.split("/").every(B=>!r[0].skipDirectory({name:B,kind:"directory"})))):C=C.filter(T=>T.webkitRelativePath.split("/").length===2),S(C)}),"showPicker"in HTMLInputElement.prototype?x.showPicker():x.click()})),b={__proto__:null,default:h},P=async(r,n={})=>{Array.isArray(n)&&(n=n[0]);const _=document.createElement("a");let x=r;"body"in r&&(x=await async function(C,T){const B=C.getReader(),A=new ReadableStream({start:V=>async function D(){return B.read().then(({done:O,value:F})=>{if(!O)return V.enqueue(F),D();V.close()})}()}),I=new Response(A),N=await I.blob();return B.releaseLock(),new Blob([N],{type:T})}(r.body,r.headers.get("content-type"))),_.download=n.fileName||"Untitled",_.href=URL.createObjectURL(await x);const S=()=>{typeof E=="function"&&E()},E=n.legacySetup&&n.legacySetup(S,()=>E(),_);return _.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(_.href),3e4),S()}),_.click(),null},k={__proto__:null,default:P};function normalizeArray(r,n){for(var _=0,x=r.length-1;x>=0;x--){var S=r[x];S==="."?r.splice(x,1):S===".."?(r.splice(x,1),_++):_&&(r.splice(x,1),_--)}if(n)for(;_--;_)r.unshift("..");return r}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(r){return splitPathRe.exec(r).slice(1)};function resolve$2(){for(var r="",n=!1,_=arguments.length-1;_>=-1&&!n;_--){var x=_>=0?arguments[_]:"/";if(typeof x!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!x)continue;r=x+"/"+r,n=x.charAt(0)==="/"}return r=normalizeArray(filter$1(r.split("/"),function(S){return!!S}),!n).join("/"),(n?"/":"")+r||"."}function normalize(r){var n=isAbsolute(r),_=substr(r,-1)==="/";return r=normalizeArray(filter$1(r.split("/"),function(x){return!!x}),!n).join("/"),!r&&!n&&(r="."),r&&_&&(r+="/"),(n?"/":"")+r}function isAbsolute(r){return r.charAt(0)==="/"}function join$1(){var r=Array.prototype.slice.call(arguments,0);return normalize(filter$1(r,function(n,_){if(typeof n!="string")throw new TypeError("Arguments to path.join must be strings");return n}).join("/"))}function relative(r,n){r=resolve$2(r).substr(1),n=resolve$2(n).substr(1);function _(A){for(var I=0;I<A.length&&A[I]==="";I++);for(var N=A.length-1;N>=0&&A[N]==="";N--);return I>N?[]:A.slice(I,N-I+1)}for(var x=_(r.split("/")),S=_(n.split("/")),E=Math.min(x.length,S.length),C=E,T=0;T<E;T++)if(x[T]!==S[T]){C=T;break}for(var B=[],T=C;T<x.length;T++)B.push("..");return B=B.concat(S.slice(C)),B.join("/")}var sep="/",delimiter=":";function dirname(r){var n=splitPath(r),_=n[0],x=n[1];return!_&&!x?".":(x&&(x=x.substr(0,x.length-1)),_+x)}function basename(r,n){var _=splitPath(r)[2];return n&&_.substr(-1*n.length)===n&&(_=_.substr(0,_.length-n.length)),_}function extname(r){return splitPath(r)[3]}const path={extname,basename,dirname,sep,delimiter,relative,join:join$1,isAbsolute,normalize,resolve:resolve$2};function filter$1(r,n){if(r.filter)return r.filter(n);for(var _=[],x=0;x<r.length;x++)n(r[x],x,r)&&_.push(r[x]);return _}var substr="ab".substr(-1)==="b"?function(r,n,_){return r.substr(n,_)}:function(r,n,_){return n<0&&(n=r.length+n),r.substr(n,_)};const path$1=Object.freeze(Object.defineProperty({__proto__:null,basename,default:path,delimiter,dirname,extname,isAbsolute,join:join$1,normalize,relative,resolve:resolve$2,sep},Symbol.toStringTag,{value:"Module"}));function isElectron$1(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof browser$1$1<"u"&&typeof browser$1$1.versions=="object"&&browser$1$1.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var isElectron_1=isElectron$1;const detectElectron=getDefaultExportFromCjs(isElectron_1),isEnvWithDom=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,isElectron=detectElectron(),isBrowser$1=isEnvWithDom&&!isElectron,isElectronMain=isElectron&&!isEnvWithDom,isElectronRenderer=isElectron&&isEnvWithDom,isNode=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!isElectron,isWebWorker=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;typeof globalThis.process<"u"&&typeof globalThis.process.env<"u"&&globalThis.process.env["NODE"+(()=>"_")()+"ENV"];const isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";var encode_1$4=encode$l,MSB$3=128,REST$3=127,MSBALL$2=~REST$3,INT$2=Math.pow(2,31);function encode$l(r,n,_){n=n||[],_=_||0;for(var x=_;r>=INT$2;)n[_++]=r&255|MSB$3,r/=128;for(;r&MSBALL$2;)n[_++]=r&255|MSB$3,r>>>=7;return n[_]=r|0,encode$l.bytes=_-x+1,n}var decode$o=read$4,MSB$1$2=128,REST$1$2=127;function read$4(r,x){var _=0,x=x||0,S=0,E=x,C,T=r.length;do{if(E>=T)throw read$4.bytes=0,new RangeError("Could not decode varint");C=r[E++],_+=S<28?(C&REST$1$2)<<S:(C&REST$1$2)*Math.pow(2,S),S+=7}while(C>=MSB$1$2);return read$4.bytes=E-x,_}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$2=function(r){return r<N1$2?1:r<N2$2?2:r<N3$2?3:r<N4$2?4:r<N5$2?5:r<N6$2?6:r<N7$2?7:r<N8$2?8:r<N9$2?9:10},varint$2={encode:encode_1$4,decode:decode$o,encodingLength:length$2},_brrp_varint$2=varint$2;const decode$n=(r,n=0)=>[_brrp_varint$2.decode(r,n),_brrp_varint$2.decode.bytes],encodeTo$2=(r,n,_=0)=>(_brrp_varint$2.encode(r,n,_),n),encodingLength$2=r=>_brrp_varint$2.encodingLength(r),equals$6=(r,n)=>{if(r===n)return!0;if(r.byteLength!==n.byteLength)return!1;for(let _=0;_<r.byteLength;_++)if(r[_]!==n[_])return!1;return!0},coerce$3=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},create$6=(r,n)=>{const _=n.byteLength,x=encodingLength$2(r),S=x+encodingLength$2(_),E=new Uint8Array(S+_);return encodeTo$2(r,E,0),encodeTo$2(_,E,x),E.set(n,S),new Digest$2(r,_,n,E)},decode$m=r=>{const n=coerce$3(r),[_,x]=decode$n(n),[S,E]=decode$n(n.subarray(x)),C=n.subarray(x+E);if(C.byteLength!==S)throw new Error("Incorrect length");return new Digest$2(_,S,C,n)},equals$5=(r,n)=>r===n?!0:r.code===n.code&&r.size===n.size&&equals$6(r.bytes,n.bytes);let Digest$2=class{constructor(n,_,x,S){this.code=n,this.size=_,this.digest=x,this.bytes=S}};function base$5(r,n){if(r.length>=255)throw new TypeError("Alphabet too long");for(var _=new Uint8Array(256),x=0;x<_.length;x++)_[x]=255;for(var S=0;S<r.length;S++){var E=r.charAt(S),C=E.charCodeAt(0);if(_[C]!==255)throw new TypeError(E+" is ambiguous");_[C]=S}var T=r.length,B=r.charAt(0),A=Math.log(T)/Math.log(256),I=Math.log(256)/Math.log(T);function N(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var F=0,M=0,L=0,j=O.length;L!==j&&O[L]===0;)L++,F++;for(var q=(j-L)*I+1>>>0,H=new Uint8Array(q);L!==j;){for(var X=O[L],J=0,Z=q-1;(X!==0||J<M)&&Z!==-1;Z--,J++)X+=256*H[Z]>>>0,H[Z]=X%T>>>0,X=X/T>>>0;if(X!==0)throw new Error("Non-zero carry");M=J,L++}for(var ae=q-M;ae!==q&&H[ae]===0;)ae++;for(var ce=B.repeat(F);ae<q;++ae)ce+=r.charAt(H[ae]);return ce}function V(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var F=0;if(O[F]!==" "){for(var M=0,L=0;O[F]===B;)M++,F++;for(var j=(O.length-F)*A+1>>>0,q=new Uint8Array(j);O[F];){var H=_[O.charCodeAt(F)];if(H===255)return;for(var X=0,J=j-1;(H!==0||X<L)&&J!==-1;J--,X++)H+=T*q[J]>>>0,q[J]=H%256>>>0,H=H/256>>>0;if(H!==0)throw new Error("Non-zero carry");L=X,F++}if(O[F]!==" "){for(var Z=j-L;Z!==j&&q[Z]===0;)Z++;for(var ae=new Uint8Array(M+(j-Z)),ce=M;Z!==j;)ae[ce++]=q[Z++];return ae}}}function D(O){var F=V(O);if(F)return F;throw new Error(`Non-${n} character`)}return{encode:N,decodeUnsafe:V,decode:D}}var src$5=base$5,_brrp__multiformats_scope_baseX$3=src$5;let Encoder$4=class{constructor(n,_,x){this.name=n,this.prefix=_,this.baseEncode=x}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}},Decoder$4=class{constructor(n,_,x){if(this.name=n,this.prefix=_,_.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=_.codePointAt(0),this.baseDecode=x}decode(n){if(typeof n=="string"){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(n){return or$3(this,n)}},ComposedDecoder$3=class{constructor(n){this.decoders=n}or(n){return or$3(this,n)}decode(n){const _=n[0],x=this.decoders[_];if(x)return x.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$3=(r,n)=>new ComposedDecoder$3({...r.decoders||{[r.prefix]:r},...n.decoders||{[n.prefix]:n}});let Codec$4=class{constructor(n,_,x,S){this.name=n,this.prefix=_,this.baseEncode=x,this.baseDecode=S,this.encoder=new Encoder$4(n,_,x),this.decoder=new Decoder$4(n,_,S)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}};const from$6=({name:r,prefix:n,encode:_,decode:x})=>new Codec$4(r,n,_,x),baseX$3=({prefix:r,name:n,alphabet:_})=>{const{encode:x,decode:S}=_brrp__multiformats_scope_baseX$3(_,n);return from$6({prefix:r,name:n,encode:x,decode:E=>coerce$3(S(E))})},decode$l=(r,n,_,x)=>{const S={};for(let I=0;I<n.length;++I)S[n[I]]=I;let E=r.length;for(;r[E-1]==="=";)--E;const C=new Uint8Array(E*_/8|0);let T=0,B=0,A=0;for(let I=0;I<E;++I){const N=S[r[I]];if(N===void 0)throw new SyntaxError(`Non-${x} character`);B=B<<_|N,T+=_,T>=8&&(T-=8,C[A++]=255&B>>T)}if(T>=_||255&B<<8-T)throw new SyntaxError("Unexpected end of data");return C},encode$k=(r,n,_)=>{const x=n[n.length-1]==="=",S=(1<<_)-1;let E="",C=0,T=0;for(let B=0;B<r.length;++B)for(T=T<<8|r[B],C+=8;C>_;)C-=_,E+=n[S&T>>C];if(C&&(E+=n[S&T<<_-C]),x)for(;E.length*_&7;)E+="=";return E},rfc4648$3=({name:r,prefix:n,bitsPerChar:_,alphabet:x})=>from$6({prefix:n,name:r,encode(S){return encode$k(S,x,_)},decode(S){return decode$l(S,x,_,r)}}),base58btc$3=baseX$3({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$3({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32$4=rfc4648$3({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$3({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$3({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$3({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$3({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$3({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$3({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$3({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$3({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});let CID$2=class un{constructor(n,_,x,S){this.code=_,this.version=n,this.multihash=x,this.bytes=S,this.byteOffset=S.byteOffset,this.byteLength=S.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly$2,version:readonly$2,multihash:readonly$2,bytes:readonly$2,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:n,multihash:_}=this;if(n!==DAG_PB_CODE$2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(_.code!==SHA_256_CODE$2)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return un.createV0(_)}}}toV1(){switch(this.version){case 0:{const{code:n,digest:_}=this.multihash,x=create$6(n,_);return un.createV1(this.code,x)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(n){return n&&this.code===n.code&&this.version===n.version&&equals$5(this.multihash,n.multihash)}toString(n){const{bytes:_,version:x,_baseCache:S}=this;switch(x){case 0:return toStringV0$2(_,S,n||base58btc$3.encoder);default:return toStringV1$2(_,S,n||base32$4.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(n){return deprecate$1(/^0\.0/,IS_CID_DEPRECATION),!!(n&&(n[cidSymbol$2]||n.asCID===n))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(n){if(n instanceof un)return n;if(n!=null&&n.asCID===n){const{version:_,code:x,multihash:S,bytes:E}=n;return new un(_,x,S,E||encodeCID$2(_,x,S.bytes))}else if(n!=null&&n[cidSymbol$2]===!0){const{version:_,multihash:x,code:S}=n,E=decode$m(x);return un.create(_,S,E)}else return null}static create(n,_,x){if(typeof _!="number")throw new Error("String codecs are no longer supported");switch(n){case 0:{if(_!==DAG_PB_CODE$2)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$2}) block encoding`);return new un(n,_,x,x.bytes)}case 1:{const S=encodeCID$2(n,_,x.bytes);return new un(n,_,x,S)}default:throw new Error("Invalid version")}}static createV0(n){return un.create(0,DAG_PB_CODE$2,n)}static createV1(n,_){return un.create(1,n,_)}static decode(n){const[_,x]=un.decodeFirst(n);if(x.length)throw new Error("Incorrect length");return _}static decodeFirst(n){const _=un.inspectBytes(n),x=_.size-_.multihashSize,S=coerce$3(n.subarray(x,x+_.multihashSize));if(S.byteLength!==_.multihashSize)throw new Error("Incorrect length");const E=S.subarray(_.multihashSize-_.digestSize),C=new Digest$2(_.multihashCode,_.digestSize,E,S);return[_.version===0?un.createV0(C):un.createV1(_.codec,C),n.subarray(_.size)]}static inspectBytes(n){let _=0;const x=()=>{const[N,V]=decode$n(n.subarray(_));return _+=V,N};let S=x(),E=DAG_PB_CODE$2;if(S===18?(S=0,_=0):S===1&&(E=x()),S!==0&&S!==1)throw new RangeError(`Invalid CID version ${S}`);const C=_,T=x(),B=x(),A=_+B,I=A-C;return{version:S,codec:E,multihashCode:T,digestSize:B,multihashSize:I,size:A}}static parse(n,_){const[x,S]=parseCIDtoBytes$2(n,_),E=un.decode(S);return E._baseCache.set(x,n),E}};const parseCIDtoBytes$2=(r,n)=>{switch(r[0]){case"Q":{const _=n||base58btc$3;return[base58btc$3.prefix,_.decode(`${base58btc$3.prefix}${r}`)]}case base58btc$3.prefix:{const _=n||base58btc$3;return[base58btc$3.prefix,_.decode(r)]}case base32$4.prefix:{const _=n||base32$4;return[base32$4.prefix,_.decode(r)]}default:{if(n==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],n.decode(r)]}}},toStringV0$2=(r,n,_)=>{const{prefix:x}=_;if(x!==base58btc$3.prefix)throw Error(`Cannot string encode V0 in ${_.name} encoding`);const S=n.get(x);if(S==null){const E=_.encode(r).slice(1);return n.set(x,E),E}else return S},toStringV1$2=(r,n,_)=>{const{prefix:x}=_,S=n.get(x);if(S==null){const E=_.encode(r);return n.set(x,E),E}else return S},DAG_PB_CODE$2=112,SHA_256_CODE$2=18,encodeCID$2=(r,n,_)=>{const x=encodingLength$2(r),S=x+encodingLength$2(n),E=new Uint8Array(S+_.byteLength);return encodeTo$2(r,E,0),encodeTo$2(n,E,x),E.set(_,S),E},cidSymbol$2=Symbol.for("@ipld/js-cid/CID"),readonly$2={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version$2="0.0.0-dev",deprecate$1=(r,n)=>{if(r.test(version$2))console.warn(n);else throw new Error(n)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;function asUint8Array(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function alloc$2(r=0){return globalThis.Buffer?.alloc!=null?asUint8Array(globalThis.Buffer.alloc(r)):new Uint8Array(r)}function allocUnsafe(r=0){return globalThis.Buffer?.allocUnsafe!=null?asUint8Array(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function concat$3(r,n){n==null&&(n=r.reduce((S,E)=>S+E.length,0));const _=allocUnsafe(n);let x=0;for(const S of r)_.set(S,x),x+=S.length;return asUint8Array(_)}let metteurUneFois$1=class extends eventsExports.EventEmitter{constructor(_,x){super();_t(this,"condition");_t(this,"rsultatPrt");_t(this,"fOublier");_t(this,"rsultat");_t(this,"f");this.condition=x||(()=>!0),this.rsultatPrt=!1,this.f=_,this.initialiser()}async initialiser(){const _=async x=>{this.condition(x)&&(this.rsultat=x,this.rsultatPrt=!0,this.fOublier&&this.lorsquePrt())};this.fOublier=await this.f(_),this.lorsquePrt()}lorsquePrt(){if(this.rsultatPrt){if(!this.fOublier)throw new Error("Fuite !!");this.fOublier&&this.fOublier(),this.emit("fini",this.rsultat)}}};const suivreBdDeFonction$1=async({fRacine:r,f:n,fSuivre:_})=>{let x,S,E=!0;const C=await r({fSuivreRacine:async T=>{T===void 0&&E&&(E=!1,await n(void 0)),T!==S&&(S=T,x&&await x(),S?x=await _({id:S,fSuivreBd:n}):(await n(void 0),x=void 0))}});return async()=>{await C(),x&&await x()}},uneFois$1=async function(r,n){const _=new metteurUneFois$1(r,n);return(await once_1(_,"fini"))[0]},ignorerNonDfinis$1=r=>async n=>{if(n!==void 0)return await r(n)};var typeDetect$1={exports:{}};(function(r,n){(function(_,x){r.exports=x()})(commonjsGlobal,function(){var _=typeof Promise=="function",x=typeof self=="object"?self:commonjsGlobal,S=typeof Symbol<"u",E=typeof Map<"u",C=typeof Set<"u",T=typeof WeakMap<"u",B=typeof WeakSet<"u",A=typeof DataView<"u",I=S&&typeof Symbol.iterator<"u",N=S&&typeof Symbol.toStringTag<"u",V=C&&typeof Set.prototype.entries=="function",D=E&&typeof Map.prototype.entries=="function",O=V&&Object.getPrototypeOf(new Set().entries()),F=D&&Object.getPrototypeOf(new Map().entries()),M=I&&typeof Array.prototype[Symbol.iterator]=="function",L=M&&Object.getPrototypeOf([][Symbol.iterator]()),j=I&&typeof String.prototype[Symbol.iterator]=="function",q=j&&Object.getPrototypeOf(""[Symbol.iterator]()),H=8,X=-1;function J(Z){var ae=typeof Z;if(ae!=="object")return ae;if(Z===null)return"null";if(Z===x)return"global";if(Array.isArray(Z)&&(N===!1||!(Symbol.toStringTag in Z)))return"Array";if(typeof window=="object"&&window!==null){if(typeof window.location=="object"&&Z===window.location)return"Location";if(typeof window.document=="object"&&Z===window.document)return"Document";if(typeof window.navigator=="object"){if(typeof window.navigator.mimeTypes=="object"&&Z===window.navigator.mimeTypes)return"MimeTypeArray";if(typeof window.navigator.plugins=="object"&&Z===window.navigator.plugins)return"PluginArray"}if((typeof window.HTMLElement=="function"||typeof window.HTMLElement=="object")&&Z instanceof window.HTMLElement){if(Z.tagName==="BLOCKQUOTE")return"HTMLQuoteElement";if(Z.tagName==="TD")return"HTMLTableDataCellElement";if(Z.tagName==="TH")return"HTMLTableHeaderCellElement"}}var ce=N&&Z[Symbol.toStringTag];if(typeof ce=="string")return ce;var ve=Object.getPrototypeOf(Z);return ve===RegExp.prototype?"RegExp":ve===Date.prototype?"Date":_&&ve===Promise.prototype?"Promise":C&&ve===Set.prototype?"Set":E&&ve===Map.prototype?"Map":B&&ve===WeakSet.prototype?"WeakSet":T&&ve===WeakMap.prototype?"WeakMap":A&&ve===DataView.prototype?"DataView":E&&ve===F?"Map Iterator":C&&ve===O?"Set Iterator":M&&ve===L?"Array Iterator":j&&ve===q?"String Iterator":ve===null?"Object":Object.prototype.toString.call(Z).slice(H,X)}return J})})(typeDetect$1);var typeDetectExports=typeDetect$1.exports;const typeDetect=getDefaultExportFromCjs(typeDetectExports),isBufferExists=typeof Buffer<"u",isBufferFromExists=isBufferExists&&typeof Buffer.from<"u",isBuffer$7=isBufferExists?function(n){return Buffer.isBuffer(n)}:function(){return!1},copy$2=isBufferFromExists?function(n){return Buffer.from(n)}:isBufferExists?function(n){return new Buffer(n)}:function(n){return n};function detectType(r){return isBuffer$7(r)?"Buffer":typeDetect(r)}const collectionTypeSet=new Set(["Arguments","Array","Map","Object","Set"]);function get$3(r,n,_=null){switch(_||detectType(r)){case"Arguments":case"Array":case"Object":return r[n];case"Map":return r.get(n);case"Set":return n}}function isCollection(r){return collectionTypeSet.has(r)}function set$1(r,n,_,x=null){switch(x||detectType(r)){case"Arguments":case"Array":case"Object":r[n]=_;break;case"Map":r.set(n,_);break;case"Set":r.add(_);break}return r}const freeGlobalThis=typeof globalThis<"u"&&globalThis!==null&&globalThis.Object===Object&&globalThis,freeGlobal=typeof global<"u"&&global!==null&&global.Object===Object&&global,freeSelf=typeof self<"u"&&self!==null&&self.Object===Object&&self,globalObject=freeGlobalThis||freeGlobal||freeSelf||Function("return this")();function copyArrayBuffer(r){return r.slice(0)}function copyBoolean(r){return new Boolean(r.valueOf())}function copyDataView(r){return new DataView(r.buffer)}function copyBuffer(r){return copy$2(r)}function copyDate(r){return new Date(r.getTime())}function copyNumber(r){return new Number(r)}function copyRegExp(r){return new RegExp(r.source,r.flags)}function copyString(r){return new String(r)}function copyTypedArray(r,n){return globalObject[n].from?globalObject[n].from(r):new globalObject[n](r)}function shallowCopy(r){return r}function getEmptyArray(){return[]}function getEmptyMap(){return new Map}function getEmptyObject(){return{}}function getEmptySet(){return new Set}const copyMap=new Map([["ArrayBuffer",copyArrayBuffer],["Boolean",copyBoolean],["Buffer",copyBuffer],["DataView",copyDataView],["Date",copyDate],["Number",copyNumber],["RegExp",copyRegExp],["String",copyString],["Float32Array",copyTypedArray],["Float64Array",copyTypedArray],["Int16Array",copyTypedArray],["Int32Array",copyTypedArray],["Int8Array",copyTypedArray],["Uint16Array",copyTypedArray],["Uint32Array",copyTypedArray],["Uint8Array",copyTypedArray],["Uint8ClampedArray",copyTypedArray],["Array Iterator",shallowCopy],["Map Iterator",shallowCopy],["Promise",shallowCopy],["Set Iterator",shallowCopy],["String Iterator",shallowCopy],["function",shallowCopy],["global",shallowCopy],["WeakMap",shallowCopy],["WeakSet",shallowCopy],["boolean",shallowCopy],["null",shallowCopy],["number",shallowCopy],["string",shallowCopy],["symbol",shallowCopy],["undefined",shallowCopy],["Arguments",getEmptyArray],["Array",getEmptyArray],["Map",getEmptyMap],["Object",getEmptyObject],["Set",getEmptySet]]);function noop$8(){}function copy$1(r,n=null,_=noop$8){arguments.length===2&&typeof n=="function"&&(_=n,n=null);const x=n||detectType(r),S=copyMap.get(x);if(x==="Object"){const E=_(r,x);if(E!==void 0)return E}return S?S(r,x):r}function deepcopy(r,n={}){typeof n=="function"&&(n={customizer:n});const{customizer:_}=n,x=detectType(r);if(!isCollection(x))return recursiveCopy(r,null,null,null);const S=copy$1(r,x,_),E=new WeakMap([[r,S]]),C=new WeakSet([r]);return recursiveCopy(r,S,E,C)}function recursiveCopy(r,n,_,x,S){const E=detectType(r),C=copy$1(r,E);if(!isCollection(E))return C;let T;switch(E){case"Arguments":case"Array":T=Object.keys(r);break;case"Object":T=Object.keys(r),T.push(...Object.getOwnPropertySymbols(r));break;case"Map":case"Set":T=r.keys();break}for(let B of T){const A=get$3(r,B,E);if(x.has(A))set$1(n,B,_.get(A),E);else{const I=detectType(A),N=copy$1(A,I);isCollection(I)&&(_.set(A,N),x.add(A)),set$1(n,B,recursiveCopy(A,N,_,x),E)}}return n}class {constructor({:n,_:_,_:x,:S,:E}){_t(this,"");_t(this,"_");_t(this,"_");_t(this,"");_t(this,"");this.=n,this._=_,this._=x,this.=._({:S,_:_,_:x,:E}),this.=Object.assign({},,E)}static _({:n,_:_,_:x,:S}){const E=deepcopy(n),C=E.tableaux.find(B=>B.clef===_);if(!C)throw new Error("    .");return C.cols.find(B=>B.idColonne===(S?.__||__))||(C.cols.push({idVariable:S?.__||__,idColonne:S?.__||__}),E.tableaux=E.tableaux.map(B=>B.clef===_?C:B)),E.nues||(E.nues=[]),E.nues.includes(x)||E.nues.push(x),E}static async ({:n,:_,_:x,:S}){if(!n.nues||!n.bds)throw new Error(" ");const E=await n.nues.crerNue({});_=this._({:_,_:x,_:E,:S});for(const B of _.tableaux){const A=await n.nues.ajouterTableauNue({idNue:E,clefTableau:B.clef});for(const I of B.cols)await n.nues.ajouterColonneTableauNue({idTableau:A,idVariable:I.idVariable,idColonne:I.idColonne}),I.index&&await n.nues.changerColIndexTableauNue({idTableau:A,idColonne:I.idColonne,val:!0});_.motsClefs&&await n.nues.ajouterMotsClefsNue({idNue:E,idsMotsClefs:_.motsClefs})}const C={licence:_.licence,motsClefs:_.motsClefs,nues:[E],tableaux:_.tableaux.map(B=>B.clef===x?{clef:B.clef,cols:[...B.cols,{idColonne:S?.__||__,idVariable:S?.__||__,index:!0}]}:B)},T=await n.bds.crerBdDeSchma({schma:C});return await n.nues.sauvegarderMtadonneNue({idNue:E,clef:___,valeur:T}),E}async __({:n}){return suivreBdDeFonction$1({fRacine:async({fSuivreRacine:_})=>await this.__({:_}),f:ignorerNonDfinis$1(n),fSuivre:async({id:_,fSuivreBd:x})=>await this..bds.suivreDonnesDeTableauParClef({idBd:_,clefTableau:this._,f:x})})}async _({:n}){return await this..nues.suivreDonnesTableauNue({idNue:this._,clefTableau:this._,f:async _=>{await n(_.map(x=>({:x.idCompte,:x.lment.empreinte,:x.lment.donnes})))},nRsultatsDsirs:1e3})}async __({:n}){return await this..bds.suivreDonnesDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,f:async _=>{const x=await this..obtIdCompte();await n(_.map(S=>({:x,:S.empreinte,:S.donnes})))}})}async ({:n}){const _=x=>x[this..__]?x:{...x,[this..__]:Date.now()};await this..bds.ajouterlmentTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,vals:_(n)})}async _({:n}){return await this..bds.effacerlmentDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,empreinte:n})}async _({:n,:_}){await this..bds.modifierlmentDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,vals:n,empreintePrcdente:_})}async __({:n}){const _=async x=>{const S=x[this..___];if(typeof S=="string")return await n(S)};return await this..nues.suivreMtadonnesNue({idNue:this._,f:_})}async __(){return await uneFois$1(async _=>await this.__({:_}))}async ({:n}){const _=await this.__(),x=Object.assign({},n.,{[this..__]:n.});await this..bds.ajouterlmentTableauParClef({idBd:_,clefTableau:this._,vals:x})}async __({:n}){const _=await this.__();await this..bds.effacerlmentDeTableauParClef({idBd:_,clefTableau:this._,empreintelment:n})}async __({:n,:_}){const x=await this.__();await this..bds.modifierlmentDeTableauParClef({idBd:x,clefTableau:this._,empreintelment:_,vals:n})}async _({:n,:_=""}){const x={:[],:[]},S=this..tableaux.find(B=>B.clef===this._)?.cols.filter(B=>B.index).map(B=>B.idColonne)||[],E=async()=>{const B=[...x.];for(const A of x.){const I=B.find(N=>S.every(V=>N[V]===A[V]));if(I){const N=I[this..__],V=A[this..__];N&&V&&V>N&&B.push(A)}else B.push(A)}return await n(B)},T=[await this.__({:async B=>{x.=B.map(A=>A.donnes),await E()}})];if(_===""){const B=await this._({:async A=>{x.=A.map(I=>({[this..__]:I.,...I.})),await E()}});T.push(B.fOublier)}else if(_===""){const B=await this.__({:async A=>{x.=A.map(I=>({[this..__]:I.,...I.})),await E()}});T.push(B)}return async()=>{await Promise.all(T.map(B=>B()))}}}const jaqblKikajtzkChabl="chab'l",jaqblKikajtzkTzibanem="tzib'anem",runukMolajKel="",retalTzibNuchabl="/orbitdb/zdpuAqGK5ndjkaYFM5wkyEk4S6FpDH5hvpEWLq79edP9MmMpY/c0e399ba-391c-4b85-b69c-7e8fe5eda4a1",runukRucheelRunukChabl="runukChabl",runukRucheelRajilankChabl="rajilankChabl",runukRucheelRubiChabl="rubiChabl",runukRucheelRutzibanemChabl="rutzibanemChabl",runukRucheelRunukGlChabl="gl",runukRucheelRunukI1Chabl="i1",runukRucheelRunukI2Chabl="i2",runukRucheelRunukI3Chabl="i3",runukRujalojRunukChabl="/orbitdb/zdpuAqAZSmXwDoEPn4r94LP7yYvaY6kvxofyU2gchbAzkTEjN/7affb315-cbda-471b-ab38-4b510be31f80",runukRujalojRajilankChabl="/orbitdb/zdpuAx2asNr8YFLvEy8nP5u16SshcbMAhyHkZQm3hqEX2CEP6/c6a6924c-4b92-4a7f-b259-eb725e97706e",runukRujalojRubiChabl="/orbitdb/zdpuAxRf1zitq3gpB6BnMrSuwcMLeFEUuUUGZZyhCwhjNqUjM/23617e18-1cd6-4e98-9eb8-f779c6ac54db",runukRujalojRutzibanemChabl="/orbitdb/zdpuAp5wKQEHAh8L5VGJr4Jdzn5363rX6zZmeFawBS4vRBihV/2c33ece9-a19c-4713-aac0-104478e142ae",runukRujalojRunukGlChabl="/orbitdb/zdpuApxEECg9CrBGKtGqkYMU4zU51q6M1UuRvzz1PhQ5XTQWt/ed95ff2b-0f30-41a4-8efd-92196b65dab7",runukRujalojRunukI1Chabl="/orbitdb/zdpuApSr92X1P9KQS5EzJVrWTqA8RZ4rjZnPJwH5DTNmw35CY/62569dba-f8d3-4c7a-ba3d-d07fac9d55e0",runukRujalojRunukI2Chabl="/orbitdb/zdpuAv9jLJJzgo5FafC3ZeG2nGggEWttcb8hMbfwwbRQKW1DS/43cd5ea5-8080-4d55-b5a1-8b782509423f",runukRujalojRunukI3Chabl="/orbitdb/zdpuApqihbDFFCdHudZaM64ahUMDwkpb38fpjw5gqYkP4xGJC/430bb19c-b541-4b88-85a0-e4ef9b8b9b29",runukRucheelRunukTzib="runukTzib",runukRucheelRajilankTzib="rajilankTzib",runukRucheelRubiTzib="rubiTzib",runukRucheelRucholanemTzib="rucholanemTzib",runukRucheelRutzibTzib="rutzibTzib",runukRujalojRunukTzib="/orbitdb/zdpuB1o5fEEZFicWiQTL7RE8xv7v7X2SS5A7tNUAXaHQ9c58P/5e71fe3b-3eb9-4574-b2b5-d8d9f3f82a63",runukRujalojRajilankTzib="/orbitdb/zdpuAt4noCPbhfzRAZncCMndUPSCiYS5KnHDCPg17RFqV8qou/03c04f10-4807-43f1-8e7e-1e43c048ef34",runukRujalojRubiTzib="/orbitdb/zdpuApC8sYxrezNAdgNFcLDcrEZhzMi7pv5A7VMZrCCiv2rb6/e45c68b2-2387-4092-b6be-3c50b3a5e884",runukRujalojRucholanemTzib="/orbitdb/zdpuB14vFuP6aHNaXxoeWZvq1NRyx6HCUReoT4sxSk3kAFdZe/026952f2-38f5-4d18-95ca-d99114e2cc1e",runukRujalojRutzibTzib="/orbitdb/zdpuAnXpasEMduNSXHxaeyGdZGmyU4NEwA3SEydj7jCDCY3Kz/3212b086-1480-4c9a-aa0e-0b5e98247ce4",RubanikilRuxeelTzij={licence:"ODbl-1_0",motsClefs:[retalTzibNuchabl],tableaux:[{cols:[{idColonne:runukRucheelRunukChabl,idVariable:runukRujalojRunukChabl,index:!0},{idColonne:runukRucheelRajilankChabl,idVariable:runukRujalojRajilankChabl},{idColonne:runukRucheelRubiChabl,idVariable:runukRujalojRubiChabl},{idColonne:runukRucheelRutzibanemChabl,idVariable:runukRujalojRutzibanemChabl},{idColonne:runukRucheelRunukGlChabl,idVariable:runukRujalojRunukGlChabl},{idColonne:runukRucheelRunukI1Chabl,idVariable:runukRujalojRunukI1Chabl},{idColonne:runukRucheelRunukI2Chabl,idVariable:runukRujalojRunukI2Chabl},{idColonne:runukRucheelRunukI3Chabl,idVariable:runukRujalojRunukI3Chabl}],clef:jaqblKikajtzkChabl},{cols:[{idColonne:runukRucheelRunukTzib,idVariable:runukRujalojRunukTzib,index:!0},{idColonne:runukRucheelRajilankTzib,idVariable:runukRujalojRajilankTzib},{idColonne:runukRucheelRubiTzib,idVariable:runukRujalojRubiTzib},{idColonne:runukRucheelRucholanemTzib,idVariable:runukRujalojRucholanemTzib},{idColonne:runukRucheelRutzibTzib,idVariable:runukRujalojRutzibTzib}],clef:jaqblKikajtzkTzibanem}]},tachojmisajKel=({chumil:r})=>{const n=new ({:r,_:jaqblKikajtzkChabl,:RubanikilRuxeelTzij,_:runukMolajKel}),_=new ({:r,_:jaqblKikajtzkTzibanem,:RubanikilRuxeelTzij,_:runukMolajKel});return{kelChabl:n,kelTzibanem:_}},kaq$1={aj:"Mayab'","rb'":"Kaqchikel",tz:"ltn",rn:{gl:"kaqc1270",i3:"cak"}},fr$1={aj:"latin","rb'":"franais",tz:"ltn",rn:{gl:"stan1290",i1:"fr",i2:"fra",i3:"fra"}},cst$1={aj:"latin","rb'":"castellano",rn:{gl:"stan1288",i1:"es"}},nl={aj:"latin","rb'":"Nederlands",rn:{gl:"dutc1256",i1:"nl"}},en$1={aj:"latin","rb'":"English",rn:{gl:"stan1293",i1:"en",i3:"eng"}},kny={"rb'":"Kanyen'k:ha",ajilank:"latin",rn:{}},sw={aj:"latin","rb'":"Kiswahili",rn:{}},yo={aj:"latin","rb'":"Yorb",rn:{gl:"yoru1245",i1:"yo"}},rw={"rb'":"Kinyarwanda",rn:{gl:"kiny1244",i1:"rw"},aj:"latin"},de={"rb'":"Deutsch",rn:{i1:"de",gl:"mode1258"},aj:"latin"},_retamablChabl={kaq:kaq$1,fr:fr$1,:{aj:"","rb'":"",tz:"",rn:{gl:"tami1289",i1:"ta",i2:"tam",i3:"tam"}},cst:cst$1,nl,en:en$1,:{aj:"","rb'":"",tz:"",rn:{gl:"west2386",i3:"pnb"}},:{aj:"","rb'":"",tz:"",rn:{gl:"panj1256",i1:"pa"}},:{aj:"","rb'":"",rn:{gl:"",i1:"hi"}},:{aj:"","rb'":"",rn:{gl:"guja1252",i1:"gu"}},:{aj:"","rb'":"",rn:{gl:"beng1280",i1:"bn"}},:{"rb'":"",rn:{gl:"telu1262",i1:"te"},aj:""},:{"rb'":"",rn:{},aj:""},:{"rb'":"",rn:{i1:"ar"},aj:""},:{aj:"","rb'":"",tz:"",rn:{gl:"urdu1245",i1:"ur"}},:{aj:"","rb'":"",tz:"",rn:{gl:"west2369",i1:"fa"}},:{aj:"","rb'":"",rn:{gl:"mara1378",i1:"mr"}},:{aj:"","rb'":"",rn:{gl:"mala1464",i1:"ml"}},:{aj:"","rb'":"",rn:{gl:"nepa1254",i1:"ne"}},:{"rb'":"",aj:"",rn:{}},"k'i":{aj:"Mayab'","rb'":"K'iche'",rn:{gl:"kich1262",i3:"quc"}},"tz'u":{aj:"Mayab'","rb'":"Tz'utujil",rn:{gl:"tzut1248",i3:"tzj"}},kny,:{aj:"","rb'":"",tz:"",rn:{gl:"sini1245",i1:"zh"}},:{aj:"","rb'":"",tz:"",rn:{gl:"taib1240",i3:"goyu"}},:{aj:"","rb'":"",rn:{gl:"nucl1643",i1:"ja"}},sw,yo,rw,de},ltn={"rb'":"latin",ch:"",aj:"latin",tz:"[A-Za-z-----------------------]|\uD801[\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]"},_retamablTzibanem={ltn,:{"rb'":"",ch:"",aj:"",tz:"[---------]|\uD807[\uDFC0-\uDFF1\uDFFF]"},:{"rb'":"",ch:"",aj:"",tz:"[--------------------]|\uD803[\uDE60-\uDE7E\uDEFD-\uDEFF]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1]"},:{"rb'":"",ch:"",aj:""},:{"rb'":"",ch:"",aj:"",tz:"[------------]"},:{"rb'":"",ch:"",aj:"",tz:"[-----------]"},:{"rb'":"",ch:"",aj:"",tz:"[---------]"},:{"rb'":"",ch:"",aj:"",tz:"[----]"},:{"rb'":"",ch:"",aj:"",tz:"[----]|\uD806[\uDF00-\uDF09]"},:{"rb'":"",ch:"",aj:"",tz:"[---------]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]"},:{"rb'":"",ch:"",aj:"",tz:"[---------]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]"},:{"rb'":"",ch:"",aj:"",tz:"[--]|\uD82C[\uDC01-\uDD1F\uDD32\uDD50-\uDD52]||[-------]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00\uDD20-\uDD22\uDD55\uDD64-\uDD67]|[--]"}};class Nuchabl{constructor({chumil:n}){_t(this,"retamablChablChumil");_t(this,"retamablTzibanemChumil");_t(this,"vnements");_t(this,"chumil");_t(this,"tamestajKel");this.chumil=n,this.retamablChablChumil={},this.retamablTzibanemChumil={},this.vnements=new eventsExports.EventEmitter,this._tachojmisajKel()}async _tachojmisajKel(){if(this.chumil){const{kelChabl:n,kelTzibanem:_}=tachojmisajKel({chumil:this.chumil}),x=await n.__({:E=>{this.retamablChablChumil=tajalPaRubanikilRetamabalChabl(E),this.xujalRi()}}),S=await _.__({:E=>{this.retamablTzibanemChumil=tajalPaRubanikilRetamabalTzibanem(E),this.xujalRi()}});this.tamestajKel=async()=>{await Promise.all([x(),S()])}}}xujalRi(){this.vnements.emit("xujalRi'")}get retamablChabl(){return merge$3(_retamablChabl,this.retamablChablChumil)}get retamablTzibanem(){return merge$3(_retamablTzibanem,this.retamablTzibanemChumil)}get konojelChabl(){return Object.keys(this.retamablChabl)}get konojelTzibanem(){return Object.keys(this.retamablTzibanem)}runukChabl({chabl:n,runukulem:_}){const x=Object.keys(this.retamablChabl).find(E=>this.retamablChabl[E]["rb'"]===n);if(!_||!x)return x;_=_.toLowerCase();const S=this.retamablChabl[x].rn;return _==="iso"?[S.i1,S.i2,S.i3].find(E=>E):S[rkxnkNklm[_]||_]}rubiChabl({runuk:n,runukulem:_}){const x=_?.toLowerCase();let S;return x===void 0?S=this.retamablChabl[n]:x==="iso"?S=Object.values(this.retamablChabl).find(E=>[E.rn.i1,E.rn.i2,E.rn.i3].some(C=>C===n)):Object.keys(rkxnkNklm).includes(x)&&(S=Object.values(this.retamablChabl).find(E=>E.rn[rkxnkNklm[x]]===n)),S?S["rb'"]:void 0}rutzibanemChabl({runuk:n}){const x=this.retamablChabl[n]?.tz;if(x)return x;for(const S in this.konojelTzibanem){const E=this.rutzibTzibanem({runuk:S});if(E&&n.match(new RegExp(E,"g")))return S}}rajilankChabl({runuk:n}){const _=this.retamablChabl[n];if(_)return _.aj;const x=this.rutzibanemChabl({runuk:n});return x?this.rajilankTzibanem({runuk:x}):void 0}rubiTzibanem({runuk:n}){const _=this.retamablTzibanem[n];return _?_["rb'"]:void 0}runukTzibanem({tzibanem:n}){return Object.keys(this.retamablTzibanem).find(_=>this.retamablChabl[_]["rb'"]===n)}rucholanemTzibanem({runuk:n}){return this.retamablTzibanem[n]?.ch}rutzibTzibanem({runuk:n}){return this.retamablTzibanem[n]?.tz}rajilankTzibanem({runuk:n}){return this.retamablTzibanem[n]?.aj}tatzeqelbej(n){return this.vnements.on("xujalRi'",n),n(),()=>{this.vnements.off("xujalRi'",n)}}tatzeqelbejRetamablChabl({sm:n}){return this.tatzeqelbej(()=>n(this.retamablChabl))}tatzeqelbejRetamablTzibanem({sm:n}){return this.tatzeqelbej(()=>n(this.retamablTzibanem))}tatzeqelbejKonojelChabl({sm:n}){return this.tatzeqelbej(()=>n(this.konojelChabl))}tatzeqelbejKonojelTzibanem({sm:n}){return this.tatzeqelbej(()=>n(this.konojelTzibanem))}tatzeqelbejRunukChabl({sm:n,chabl:_,runukulem:x}){return this.tatzeqelbej(()=>n(this.runukChabl({chabl:_,runukulem:x})))}tatzeqelbejRubiChabl({sm:n,runuk:_,runukulem:x}){return this.tatzeqelbej(()=>n(this.rubiChabl({runuk:_,runukulem:x})))}tatzeqelbejRutzibanemChabl({sm:n,runuk:_}){return this.tatzeqelbej(()=>n(this.rutzibanemChabl({runuk:_})))}tatzeqelbejRajilankChabl({sm:n,runuk:_}){return this.tatzeqelbej(()=>n(this.rajilankChabl({runuk:_})))}tatzeqelbejRubiTzibanem({sm:n,runuk:_}){return this.tatzeqelbej(()=>n(this.rubiTzibanem({runuk:_})))}tatzeqelbejRunukTzibanem({sm:n,tzibanem:_}){return this.tatzeqelbej(()=>n(this.runukTzibanem({tzibanem:_})))}tatzeqelbejRucholanemTzibanem({sm:n,runuk:_}){return this.tatzeqelbej(()=>n(this.rucholanemTzibanem({runuk:_})))}tatzeqelbejRajilankTzibanem({sm:n,runuk:_}){return this.tatzeqelbej(()=>n(this.rajilankTzibanem({runuk:_})))}async tatzapij(){this.tamestajKel&&await this.tamestajKel()}}const rkxnkNklm={glottologue:"gl",iso1:"i1",iso2:"i2",iso3:"i3"},tajalPaRubanikilRetamabalChabl=r=>{const n={};for(const _ of r)n[_.donnes[runukRucheelRunukChabl]]={aj:_.donnes[runukRucheelRajilankChabl],"rb'":_.donnes[runukRucheelRubiChabl],tz:_.donnes[runukRucheelRutzibanemChabl],rn:{gl:_.donnes[runukRucheelRunukGlChabl],i1:_.donnes[runukRucheelRunukI1Chabl],i2:_.donnes[runukRucheelRunukI2Chabl],i3:_.donnes[runukRucheelRunukI3Chabl]}};return n},tajalPaRubanikilRetamabalTzibanem=r=>{const n={};for(const _ of r)n[_.donnes[runukRucheelRunukTzib]]={aj:_.donnes[runukRucheelRajilankTzib],"rb'":_.donnes[runukRucheelRubiTzib],ch:_.donnes[runukRucheelRucholanemTzib],tz:_.donnes[runukRucheelRutzibTzib]};return n},latin={:"",:"latn",:"0123456789",:"eE",:"."},_={latin,"Mayab'":{:"",:null,:""},:{:"",:null,:""},:{:"",:"deva",:"",:""},:{:"",:"guru",:"",:""},:{:"",:"gujr",:""}," ":{:"",:"mlym",:""},:{:"",:null,:"",:{"":10,"":100,"":1e3}},:{:"",:"taml",:"",:"",:{"":10,"":100,"":1e3}}," ":{:"",:"tamldec",:"",:""},:{:"",:"arabext",:"",:"",:"."},:{:"",:"arab",:"",:"",:"."},:{:"",:"orya",:""},:{:"",:"beng",:"",:""},:{:"",:"knda",:""},:{:"",:"telu",:""},"":{:"",:"brah",:""},"":{:"",:"cakm",:""},"":{:"",:"nkoo",:""},"":{:"",:"saur",:""}," ":{:"",:"olck",:""}," ":{:"",:"sinh",:""},:{:"",:null,:"",:{"":10,"":100,"":1e3}},"":{:"",:"bali",:""},"":{:"",:"cham",:""},"":{:"",:"java",:""},:{:"",:"thai",:"",:""},:{:"",:"laoo",:""},"":{:"",:"tibt",:""},"":{:"",:"mymrshan",:""},"":{:"",:"mymrtlng",:""},"":{:"",:"mymr",:""}," ":{:"",:"kali",:""},"":{:"",:"talu",:""},"":{:"",:"ahom",:""},"":{:"",:"bhks",:""},"":{:"",:"gong",:""},"":{:"",:"gonm",:""},"":{:"",:"rohg",:""},"  ":{:"",:"hmng",:""},"":{:"",:"hmng",:""},:{:"",:"khmr",:""}," - lek nai tam":{:"",:"lana",:""}," - lek hora":{:"",:"lanatham",:""},"":{:"",:"lepc",:""}," ":{:"",:"limb",:""}," ":{:"",:"mong",:""},"":{:"",:"mtei",:""},"":{:"",:"sund",:""},"":{:"",:"sind",:""},"":{:"",:"modi",:""},"":{:"",:"mroo",:""}," ":{:"",:"newa",:""},"":{:"",:"vaii",:""},"":{:"",:"osma",:""},"":{:"",:"shrd",:""},:{:"",:"ethi",:"0",:{"":10,"":20,"":30,"":40,"":50,"":60,"":70,"":80,"":90,"":100,"":1e4}}," ":{:"",:"sora",:""},"":{:"",:"takr",:""},"":{:"",:"tirh",:""}," ":{:"",:"wara",:""},"":{:"",:null,:""},"":{:"",:"wcho",:""},"":{:"",:"adlm",:""},:{:"",:"hans",:"",:"",:".",:{:10,:100,:1e3,:1e4,:1e8,:1e12,:1e16,:1e20,:1e24,:1e28,:1e32,:1e36,:1e40,:1e44}},:{:"",:"hanidec",:"",:"",:"."},:{:"",:null,:""}},_="",__="",__="/orbitdb/zdpuAwiHHcXVqXtC5d2zTBC3kP8LkpMxHyp1BjjxVCboH6nPb/b4949e9f-bab6-4057-b13a-1d66ae6e93ee",___="",___="",____="",___="",___="",___="",___="",___="/orbitdb/zdpuAx2asNr8YFLvEy8nP5u16SshcbMAhyHkZQm3hqEX2CEP6/c6a6924c-4b92-4a7f-b259-eb725e97706e",___="/orbitdb/zdpuAmMYvS8f9WH95y3tyxDPgLsWjXu2zoB2bAy78JNsMkCWn/aa379217-bb8f-4050-b807-3394e46dab51",____="/orbitdb/zdpuApW3gaGcGNtppzQQyzuzygfKiQ1WVtVpjQa21ALjqRUNo/02e278a4-d9cd-4548-9148-f69a91e7bb99",___="/orbitdb/zdpuAzeaU4DA5WCaKBr1B23UA9gtvMoRiUtPgA1PsuRJvtA6k/53411a0f-a4ab-4c0f-93bd-1fa9dcdd9acb",___="/orbitdb/zdpuB2xXUJ3kcsmzqhqbvUDNRrRH63dLoj6jw238Xu85oSVJp/e4d10758-41fd-4e97-92a8-e6fff65d402e",___="/orbitdb/zdpuAq1CqRxiFvcy7sUuB9wLPJ5Ex9Vrp6uFiyP7YB8G3T74s/0f17278e-5ffd-45ee-b55e-6ad061f55350",___="/orbitdb/zdpuAwi62CTtS6Tpu8Zf2pBFKEUGo3F27QZXCib4CVGXyBPVa/77be95cc-c216-4f86-b794-29a3037aa953",_={licence:"ODbl-1_0",motsClefs:[__],tableaux:[{cols:[{idColonne:___,idVariable:___,index:!0},{idColonne:___,idVariable:___},{idColonne:____,idVariable:____},{idColonne:___,idVariable:___},{idColonne:___,idVariable:___},{idColonne:___,idVariable:___},{idColonne:___,idVariable:___}],clef:_}]},_=({:r})=>new ({:r,_,:_,_:__});class {constructor({:n}){_t(this,"_");_t(this,"");_t(this,"");_t(this,"_");this.=n,this._={},this.=new eventsExports.EventEmitter,this.__()}async __(){if(this.){const n=_({:this.});this._=await n.__({:_=>{this._=___(_),this._()}})}}_(){this..emit("")}get (){return merge$3(_,this._)}get (){return Object.keys(this.)}_({:n}){const _=this.[n];if(!_)throw Error(`   ${n}`);return _}_({:n,_:_}){const{:x,:S}=_,E=_.||".",C=[...x],T=n<0;n=Math.abs(n);const B=n.toString().split(".")[1];let A=this.__(n,C,S);return A.length===0&&(A=C[0]),T&&(A="-"+A),B&&(A+=E[0]+[...B].map(I=>x[parseInt(I)]).join("")),A}_({:n,_:_}){const x=_.,S=[..._.],E=_.||".",C=n[0]==="-";C?n=n.slice(1):n=n.replace(/^\++/,"");const[T,B]=n.split(E[0]);let A=0;if(T){const I=[...T].map(V=>x[V]||S.indexOf(V)).reverse(),N=V=>{const D=V[0],O=V.slice(1).find(H=>H>D),F=(O?V.slice(1).indexOf(O):V.slice(1).length)+1,M=V.slice(1,F),L=M.length?N(M):1,j=V.slice(F),q=j.length?N(j):0;return D*L+q};A=N(I)}return B!==void 0&&B.length&&(A+=parseFloat("."+[...B].map(I=>S.indexOf(I).toString()).join(""))),C&&(A*=-1),A}_({:n,_:_}){const x=[..._.],S=x.length,E=(_.||".")[0];if(S===10){let I=n.toString();return I.includes(".")&&(I=I.replace(".",E)),Array.prototype.map.call(I,N=>N===E?N:x[parseInt(N)]).join("")}if(n===0)return x[0];const C=n<0;let T=n%1;T=parseFloat(T.toFixed(_(n))),n=Math.abs(n);let B="";for(;n;)B=x[Math.floor(n%S)]+B,n=Math.floor(n/S);T&&(B+=E);let A;for(;T!==0;)A=_(T),T*=S,B+=x[Math.floor(T)],T-=Math.floor(T),T=parseFloat(T.toFixed(A));return C&&(B="-"+B),B}_({:n,:_,_:x}){const S=[...x.],E=x.||"eE",C=S.length,T=x.||".";if(n=n.replace(/^\++/,""),E.split("").some(B=>n.includes(B))){const[B,A]=n.split(RegExp(E));return this._({:B,:_,_:x})*C**this.({:A,:_})}if(C===10){for(const[B,A]of S.entries())n=n.replace(A,B.toString());for(const B of T.split(""))n=n.replace(B,".");return parseFloat(n)}else{let B=0;const A=n.split(/\./);let I=A[0];const N=A[1],V=I[0]==="-";if(I=I.replace(/^-+/,""),I)for(const D of I)B*=C,B+=S.indexOf(D);if(N){let D=C;for(const O of N)B+=S.indexOf(O)/D,B=parseFloat(B.toFixed(_(1/D))),D*=C}return B=V?-B:B,B}}({:n,:_}){const x=this._({:_});return x.===""?this._({:n,_:x}):this._({:n,_:x})}({:n,:_}){const x=_?[_]:this.;for(const S of x)try{const E=this._({:S});return this._({:n,:S,_:E})}catch{continue}throw new Error(`${n}    .`)}_({:n,:_,_:x}){const S=x.;if(S==="")return this._({:n,:_,_:x});if(S==="")return this._({:n,_:x});throw Error(`    ${S}`)}__(n,_,x){let S=n,E="";for(const[C,T]of Object.entries(x).sort((B,A)=>A[1]-B[1])){const B=Math.floor(S/T);B&&(S-=B*T,B!==1&&(E+=this.__(B,_,x)),E+=C)}return S&&(E=E+_[Math.floor(S)]),E}(n){return this..on("",n),n(),()=>{this..off("",n)}}_({:n}){return this.(()=>n(this.))}_({:n,:_,:x}){return this.(()=>x(this.({:n,:_})))}_({:n,:_,:x}){return this.(()=>x(this.({:n,:_})))}async (){this._&&await this._()}}function _(r){const n=r.toString();if(n.includes("e")){const[_,x]=n.split("e-");return parseInt(x)+_.length}else return n.length}function ___(r){const n={};for(const _ of r){const x=_.donnes[___],S=_.donnes[___];if(x===""){const E={:x,:_.donnes[___],:_.donnes[____],:_.donnes[___],:_.donnes[___]};n[S]=E}else if(x===""){const E=_.donnes[___];if(!E)throw new Error(`${S}     .`);const C={:x,:_.donnes[___],:_.donnes[____],:_.donnes[___],:JSON.parse(E),:_.donnes[___]};n[S]=C}}return n}const crerNuchabl=({constellation:r})=>new Nuchabl({chumil:r}),crerEnnikai=({constellation:r})=>new ({:r}),crerLocales=({langue:r,languesAlternatives:n=[]})=>{const _=api$2.get("paramtres.langue");let x;try{x=_?JSON.parse(_):void 0}catch{}const S=ref$1(Array.isArray(x)?x:[r,...n]),E=ref$1();return{langueEtAlternatives:S,slectionNumration:E}},utiliserLangues=()=>{const r=inject$1("locales");if(!r)throw new Error("Locales non installes");const n=r.locales.langueEtAlternatives,_=computed(()=>n.value[0]),x=computed(()=>n.value.slice(1));return{langue:_,languesAlternatives:x,choisirLangues:T=>{Array.isArray(T)?T.length&&(n.value=T):n.value=[T,...n.value.filter(B=>B!==T)],api$2.set("paramtres.langue",JSON.stringify(n.value))},traduireNom:T=>{const A=inject$1("locales")?.nuchabl;return computed(()=>{for(const N of n.value)if(T.value[N])return T.value[N];const I=A?.rutzibanemChabl({runuk:n.value[0]});for(const N of n.value)if(I&&I===A?.rutzibanemChabl({runuk:N}))return T.value[N];return Object.values(T.value)[0]})},langueDroiteGauche:()=>{const B=inject$1("locales")?.nuchabl;return computed(()=>{const A=B?.rutzibanemChabl({runuk:_.value});if(!A)return!1;const I=B?.rucholanemTzibanem({runuk:A});return I?I==="":!1})}}},utiliserNumration=()=>{const r=inject$1("locales");if(!r)throw new Error("Locales non installes");const n=r.nuchabl,_=r.,{langue:x}=utiliserLangues(),S=ref$1(n.rajilankChabl({runuk:x.value}));let E;watchEffect(()=>{E&&E(),E=n?.tatzeqelbejRajilankChabl({runuk:x.value,sm:V=>S.value=V})}),onUnmounted(()=>{E&&E()});const C=ref$1(_.);let T;watchEffect(()=>{T=_._({:V=>C.value=V})}),onUnmounted(()=>{T&&T()});const B=computed(()=>r.locales.slectionNumration.value||S.value||"latin");if(n){let V;watchEffect(()=>{V=n.tatzeqelbejRajilankChabl({runuk:x.value,sm:D=>S.value=D})}),onUnmounted(()=>{V&&V()})}const A=(V,D)=>computed(()=>_.({:typeof V=="number"?V:V.value,:D||B.value})),I=(V,D)=>computed(()=>[...typeof V=="string"?V:V.value].map(M=>{if(M===" "||M===""||M==="+")return M;try{const L=_.({:M});return _.({:L,:D||B.value})}catch{return M}}).join("")),N=V=>computed(()=>B.value?V.split(".").map(O=>_.({:parseInt(O),:B.value})).join("."):void 0);return{numration:B,systmesNumration:C,slectionNumration:r?.locales.slectionNumration,formatterChiffre:A,formatterNumro:I,formatterVersion:N}},gnrerLocalisation=({langue:r,languesAlternatives:n=[]})=>({install:_=>{const x=_.config.globalProperties.$constl,S=crerNuchabl({constellation:x}),E=crerEnnikai({constellation:x});_.provide("locales",{nuchabl:S,:E,locales:crerLocales({langue:r,languesAlternatives:n})})}});var lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */lodash.exports;(function(r,n){(function(){var _,x="4.17.21",S=200,E="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",C="Expected a function",T="Invalid `variable` option passed into `_.template`",B="__lodash_hash_undefined__",A=500,I="__lodash_placeholder__",N=1,V=2,D=4,O=1,F=2,M=1,L=2,j=4,q=8,H=16,X=32,J=64,Z=128,ae=256,ce=512,ve=30,pe="...",G=800,Y=16,U=1,W=2,ee=3,re=1/0,oe=9007199254740991,ie=17976931348623157e292,ne=0/0,te=4294967295,K=te-1,le=te>>>1,ue=[["ary",Z],["bind",M],["bindKey",L],["curry",q],["curryRight",H],["flip",ce],["partial",X],["partialRight",J],["rearg",ae]],be="[object Arguments]",ge="[object Array]",ye="[object AsyncFunction]",Ee="[object Boolean]",Re="[object Date]",Ne="[object DOMException]",Te="[object Error]",he="[object Function]",xe="[object GeneratorFunction]",fe="[object Map]",Be="[object Number]",Le="[object Null]",Ve="[object Object]",Ie="[object Promise]",Me="[object Proxy]",He="[object RegExp]",We="[object Set]",Ue="[object String]",Ge="[object Symbol]",et="[object Undefined]",ot="[object WeakMap]",ht="[object WeakSet]",Oe="[object ArrayBuffer]",we="[object DataView]",Ce="[object Float32Array]",ze="[object Float64Array]",Ze="[object Int8Array]",st="[object Int16Array]",rt="[object Int32Array]",Ft="[object Uint8Array]",Vt="[object Uint8ClampedArray]",Et="[object Uint16Array]",jt="[object Uint32Array]",Lt=/\b__p \+= '';/g,qt=/\b(__p \+=) '' \+/g,_r=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Zt=/&(?:amp|lt|gt|quot|#39);/g,zt=/[&<>"']/g,hr=RegExp(Zt.source),Xt=RegExp(zt.source),Ht=/<%-([\s\S]+?)%>/g,gr=/<%([\s\S]+?)%>/g,Qt=/<%=([\s\S]+?)%>/g,Kt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$r=/^\w*$/,tr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ut=/[\\^$.*+?()[\]{}|]/g,wr=RegExp(Ut.source),De=/^\s+/,ke=/\s/,Se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,se=/\{\n\/\* \[wrapped with (.+)\] \*/,_e=/,? & /,$e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pe=/[()=,{}\[\]\/\s]/,Fe=/\\(\\)?/g,qe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ye=/\w*$/,Je=/^[-+]0x[0-9a-f]+$/i,tt=/^0b[01]+$/i,Qe=/^\[object .+?Constructor\]$/,it=/^0o[0-7]+$/i,lt=/^(?:0|[1-9]\d*)$/,vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,dt=/['\n\r\u2028\u2029\\]/g,yt="\\ud800-\\udfff",Tt="\\u0300-\\u036f",kt="\\ufe20-\\ufe2f",Pt="\\u20d0-\\u20ff",It=Tt+kt+Pt,Ot="\\u2700-\\u27bf",Mt="a-z\\xdf-\\xf6\\xf8-\\xff",Dt="\\xac\\xb1\\xd7\\xf7",mt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",gt="\\u2000-\\u206f",St=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xt="A-Z\\xc0-\\xd6\\xd8-\\xde",Ct="\\ufe0e\\ufe0f",Nt=Dt+mt+gt+St,Yt="[']",sr="["+yt+"]",cr="["+Nt+"]",er="["+It+"]",at="\\d+",pr="["+Ot+"]",Er="["+Mt+"]",Cr="[^"+yt+Nt+at+Ot+Mt+xt+"]",lr="\\ud83c[\\udffb-\\udfff]",Tr="(?:"+er+"|"+lr+")",xr="[^"+yt+"]",Or="(?:\\ud83c[\\udde6-\\uddff]){2}",Ar="[\\ud800-\\udbff][\\udc00-\\udfff]",Rr="["+xt+"]",Fr="\\u200d",Mr="(?:"+Er+"|"+Cr+")",zr="(?:"+Rr+"|"+Cr+")",Kr="(?:"+Yt+"(?:d|ll|m|re|s|t|ve))?",Gr="(?:"+Yt+"(?:D|LL|M|RE|S|T|VE))?",Xr=Tr+"?",Is="["+Ct+"]?",Hc="(?:"+Fr+"(?:"+[xr,Or,Ar].join("|")+")"+Is+Xr+")*",Wc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Kc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ns=Is+Xr+Hc,Gc="(?:"+[pr,Or,Ar].join("|")+")"+Ns,Xc="(?:"+[xr+er+"?",er,Or,Ar,sr].join("|")+")",Yc=RegExp(Yt,"g"),Jc=RegExp(er,"g"),Sa=RegExp(lr+"(?="+lr+")|"+Xc+Ns,"g"),Zc=RegExp([Rr+"?"+Er+"+"+Kr+"(?="+[cr,Rr,"$"].join("|")+")",zr+"+"+Gr+"(?="+[cr,Rr+Mr,"$"].join("|")+")",Rr+"?"+Mr+"+"+Kr,Rr+"+"+Gr,Kc,Wc,at,Gc].join("|"),"g"),Qc=RegExp("["+Fr+yt+It+Ct+"]"),el=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rl=-1,Lr={};Lr[Ce]=Lr[ze]=Lr[Ze]=Lr[st]=Lr[rt]=Lr[Ft]=Lr[Vt]=Lr[Et]=Lr[jt]=!0,Lr[be]=Lr[ge]=Lr[Oe]=Lr[Ee]=Lr[we]=Lr[Re]=Lr[Te]=Lr[he]=Lr[fe]=Lr[Be]=Lr[Ve]=Lr[He]=Lr[We]=Lr[Ue]=Lr[ot]=!1;var Dr={};Dr[be]=Dr[ge]=Dr[Oe]=Dr[we]=Dr[Ee]=Dr[Re]=Dr[Ce]=Dr[ze]=Dr[Ze]=Dr[st]=Dr[rt]=Dr[fe]=Dr[Be]=Dr[Ve]=Dr[He]=Dr[We]=Dr[Ue]=Dr[Ge]=Dr[Ft]=Dr[Vt]=Dr[Et]=Dr[jt]=!0,Dr[Te]=Dr[he]=Dr[ot]=!1;var il={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},al={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},sl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ol={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},cl=parseFloat,ll=parseInt,Rs=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,ul=typeof self=="object"&&self&&self.Object===Object&&self,Qr=Rs||ul||Function("return this")(),$a=n&&!n.nodeType&&n,ti=$a&&!0&&r&&!r.nodeType&&r,Ps=ti&&ti.exports===$a,Ea=Ps&&Rs.process,xn=function(){try{var ft=ti&&ti.require&&ti.require("util").types;return ft||Ea&&Ea.binding&&Ea.binding("util")}catch{}}(),Vs=xn&&xn.isArrayBuffer,Ds=xn&&xn.isDate,Os=xn&&xn.isMap,Fs=xn&&xn.isRegExp,Ms=xn&&xn.isSet,Ls=xn&&xn.isTypedArray;function mn(ft,$t,wt){switch(wt.length){case 0:return ft.call($t);case 1:return ft.call($t,wt[0]);case 2:return ft.call($t,wt[0],wt[1]);case 3:return ft.call($t,wt[0],wt[1],wt[2])}return ft.apply($t,wt)}function fl(ft,$t,wt,Gt){for(var ur=-1,Ir=ft==null?0:ft.length;++ur<Ir;){var Yr=ft[ur];$t(Gt,Yr,wt(Yr),ft)}return Gt}function Sn(ft,$t){for(var wt=-1,Gt=ft==null?0:ft.length;++wt<Gt&&$t(ft[wt],wt,ft)!==!1;);return ft}function dl(ft,$t){for(var wt=ft==null?0:ft.length;wt--&&$t(ft[wt],wt,ft)!==!1;);return ft}function Us(ft,$t){for(var wt=-1,Gt=ft==null?0:ft.length;++wt<Gt;)if(!$t(ft[wt],wt,ft))return!1;return!0}function Wn(ft,$t){for(var wt=-1,Gt=ft==null?0:ft.length,ur=0,Ir=[];++wt<Gt;){var Yr=ft[wt];$t(Yr,wt,ft)&&(Ir[ur++]=Yr)}return Ir}function Fi(ft,$t){var wt=ft==null?0:ft.length;return!!wt&&ui(ft,$t,0)>-1}function Ca(ft,$t,wt){for(var Gt=-1,ur=ft==null?0:ft.length;++Gt<ur;)if(wt($t,ft[Gt]))return!0;return!1}function Ur(ft,$t){for(var wt=-1,Gt=ft==null?0:ft.length,ur=Array(Gt);++wt<Gt;)ur[wt]=$t(ft[wt],wt,ft);return ur}function Kn(ft,$t){for(var wt=-1,Gt=$t.length,ur=ft.length;++wt<Gt;)ft[ur+wt]=$t[wt];return ft}function Ta(ft,$t,wt,Gt){var ur=-1,Ir=ft==null?0:ft.length;for(Gt&&Ir&&(wt=ft[++ur]);++ur<Ir;)wt=$t(wt,ft[ur],ur,ft);return wt}function hl(ft,$t,wt,Gt){var ur=ft==null?0:ft.length;for(Gt&&ur&&(wt=ft[--ur]);ur--;)wt=$t(wt,ft[ur],ur,ft);return wt}function ka(ft,$t){for(var wt=-1,Gt=ft==null?0:ft.length;++wt<Gt;)if($t(ft[wt],wt,ft))return!0;return!1}var pl=Ba("length");function ml(ft){return ft.split("")}function vl(ft){return ft.match($e)||[]}function js(ft,$t,wt){var Gt;return wt(ft,function(ur,Ir,Yr){if($t(ur,Ir,Yr))return Gt=Ir,!1}),Gt}function Mi(ft,$t,wt,Gt){for(var ur=ft.length,Ir=wt+(Gt?1:-1);Gt?Ir--:++Ir<ur;)if($t(ft[Ir],Ir,ft))return Ir;return-1}function ui(ft,$t,wt){return $t===$t?kl(ft,$t,wt):Mi(ft,qs,wt)}function gl(ft,$t,wt,Gt){for(var ur=wt-1,Ir=ft.length;++ur<Ir;)if(Gt(ft[ur],$t))return ur;return-1}function qs(ft){return ft!==ft}function zs(ft,$t){var wt=ft==null?0:ft.length;return wt?Ia(ft,$t)/wt:ne}function Ba(ft){return function($t){return $t==null?_:$t[ft]}}function Aa(ft){return function($t){return ft==null?_:ft[$t]}}function Hs(ft,$t,wt,Gt,ur){return ur(ft,function(Ir,Yr,Vr){wt=Gt?(Gt=!1,Ir):$t(wt,Ir,Yr,Vr)}),wt}function yl(ft,$t){var wt=ft.length;for(ft.sort($t);wt--;)ft[wt]=ft[wt].value;return ft}function Ia(ft,$t){for(var wt,Gt=-1,ur=ft.length;++Gt<ur;){var Ir=$t(ft[Gt]);Ir!==_&&(wt=wt===_?Ir:wt+Ir)}return wt}function Na(ft,$t){for(var wt=-1,Gt=Array(ft);++wt<ft;)Gt[wt]=$t(wt);return Gt}function _l(ft,$t){return Ur($t,function(wt){return[wt,ft[wt]]})}function Ws(ft){return ft&&ft.slice(0,Ys(ft)+1).replace(De,"")}function vn(ft){return function($t){return ft($t)}}function Ra(ft,$t){return Ur($t,function(wt){return ft[wt]})}function Si(ft,$t){return ft.has($t)}function Ks(ft,$t){for(var wt=-1,Gt=ft.length;++wt<Gt&&ui($t,ft[wt],0)>-1;);return wt}function Gs(ft,$t){for(var wt=ft.length;wt--&&ui($t,ft[wt],0)>-1;);return wt}function bl(ft,$t){for(var wt=ft.length,Gt=0;wt--;)ft[wt]===$t&&++Gt;return Gt}var wl=Aa(il),xl=Aa(al);function Sl(ft){return"\\"+ol[ft]}function $l(ft,$t){return ft==null?_:ft[$t]}function fi(ft){return Qc.test(ft)}function El(ft){return el.test(ft)}function Cl(ft){for(var $t,wt=[];!($t=ft.next()).done;)wt.push($t.value);return wt}function Pa(ft){var $t=-1,wt=Array(ft.size);return ft.forEach(function(Gt,ur){wt[++$t]=[ur,Gt]}),wt}function Xs(ft,$t){return function(wt){return ft($t(wt))}}function Gn(ft,$t){for(var wt=-1,Gt=ft.length,ur=0,Ir=[];++wt<Gt;){var Yr=ft[wt];(Yr===$t||Yr===I)&&(ft[wt]=I,Ir[ur++]=wt)}return Ir}function Li(ft){var $t=-1,wt=Array(ft.size);return ft.forEach(function(Gt){wt[++$t]=Gt}),wt}function Tl(ft){var $t=-1,wt=Array(ft.size);return ft.forEach(function(Gt){wt[++$t]=[Gt,Gt]}),wt}function kl(ft,$t,wt){for(var Gt=wt-1,ur=ft.length;++Gt<ur;)if(ft[Gt]===$t)return Gt;return-1}function Al(ft,$t,wt){for(var Gt=wt+1;Gt--;)if(ft[Gt]===$t)return Gt;return Gt}function di(ft){return fi(ft)?Nl(ft):pl(ft)}function An(ft){return fi(ft)?Rl(ft):ml(ft)}function Ys(ft){for(var $t=ft.length;$t--&&ke.test(ft.charAt($t)););return $t}var Il=Aa(sl);function Nl(ft){for(var $t=Sa.lastIndex=0;Sa.test(ft);)++$t;return $t}function Rl(ft){return ft.match(Sa)||[]}function Pl(ft){return ft.match(Zc)||[]}var Vl=function ft($t){$t=$t==null?Qr:hi.defaults(Qr.Object(),$t,hi.pick(Qr,tl));var wt=$t.Array,Gt=$t.Date,ur=$t.Error,Ir=$t.Function,Yr=$t.Math,Vr=$t.Object,Va=$t.RegExp,Dl=$t.String,$n=$t.TypeError,Ui=wt.prototype,Ol=Ir.prototype,pi=Vr.prototype,ji=$t["__core-js_shared__"],qi=Ol.toString,Pr=pi.hasOwnProperty,Fl=0,Js=function(){var z=/[^.]+$/.exec(ji&&ji.keys&&ji.keys.IE_PROTO||"");return z?"Symbol(src)_1."+z:""}(),zi=pi.toString,Ml=qi.call(Vr),Ll=Qr._,Ul=Va("^"+qi.call(Pr).replace(Ut,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hi=Ps?$t.Buffer:_,Xn=$t.Symbol,Wi=$t.Uint8Array,Zs=Hi?Hi.allocUnsafe:_,Ki=Xs(Vr.getPrototypeOf,Vr),Qs=Vr.create,eo=pi.propertyIsEnumerable,Gi=Ui.splice,to=Xn?Xn.isConcatSpreadable:_,$i=Xn?Xn.iterator:_,ri=Xn?Xn.toStringTag:_,Xi=function(){try{var z=oi(Vr,"defineProperty");return z({},"",{}),z}catch{}}(),jl=$t.clearTimeout!==Qr.clearTimeout&&$t.clearTimeout,ql=Gt&&Gt.now!==Qr.Date.now&&Gt.now,zl=$t.setTimeout!==Qr.setTimeout&&$t.setTimeout,Yi=Yr.ceil,Ji=Yr.floor,Da=Vr.getOwnPropertySymbols,Hl=Hi?Hi.isBuffer:_,ro=$t.isFinite,Wl=Ui.join,Kl=Xs(Vr.keys,Vr),Jr=Yr.max,rn=Yr.min,Gl=Gt.now,Xl=$t.parseInt,no=Yr.random,Yl=Ui.reverse,Oa=oi($t,"DataView"),Ei=oi($t,"Map"),Fa=oi($t,"Promise"),mi=oi($t,"Set"),Ci=oi($t,"WeakMap"),Ti=oi(Vr,"create"),Zi=Ci&&new Ci,vi={},Jl=ci(Oa),Zl=ci(Ei),Ql=ci(Fa),eu=ci(mi),tu=ci(Ci),Qi=Xn?Xn.prototype:_,ki=Qi?Qi.valueOf:_,io=Qi?Qi.toString:_;function Ke(z){if(qr(z)&&!dr(z)&&!(z instanceof kr)){if(z instanceof En)return z;if(Pr.call(z,"__wrapped__"))return cc(z)}return new En(z)}var gi=function(){function z(){}return function(Q){if(!jr(Q))return{};if(Qs)return Qs(Q);z.prototype=Q;var me=new z;return z.prototype=_,me}}();function ea(){}function En(z,Q){this.__wrapped__=z,this.__actions__=[],this.__chain__=!!Q,this.__index__=0,this.__values__=_}Ke.templateSettings={escape:Ht,evaluate:gr,interpolate:Qt,variable:"",imports:{_:Ke}},Ke.prototype=ea.prototype,Ke.prototype.constructor=Ke,En.prototype=gi(ea.prototype),En.prototype.constructor=En;function kr(z){this.__wrapped__=z,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=te,this.__views__=[]}function ru(){var z=new kr(this.__wrapped__);return z.__actions__=fn(this.__actions__),z.__dir__=this.__dir__,z.__filtered__=this.__filtered__,z.__iteratees__=fn(this.__iteratees__),z.__takeCount__=this.__takeCount__,z.__views__=fn(this.__views__),z}function nu(){if(this.__filtered__){var z=new kr(this);z.__dir__=-1,z.__filtered__=!0}else z=this.clone(),z.__dir__*=-1;return z}function iu(){var z=this.__wrapped__.value(),Q=this.__dir__,me=dr(z),Ae=Q<0,je=me?z.length:0,Xe=gf(0,je,this.__views__),nt=Xe.start,ct=Xe.end,pt=ct-nt,Bt=Ae?ct:nt-1,At=this.__iteratees__,Rt=At.length,Wt=0,Jt=rn(pt,this.__takeCount__);if(!me||!Ae&&je==pt&&Jt==pt)return Ao(z,this.__actions__);var ir=[];e:for(;pt--&&Wt<Jt;){Bt+=Q;for(var yr=-1,ar=z[Bt];++yr<Rt;){var Sr=At[yr],Br=Sr.iteratee,_n=Sr.type,ln=Br(ar);if(_n==W)ar=ln;else if(!ln){if(_n==U)continue e;break e}}ir[Wt++]=ar}return ir}kr.prototype=gi(ea.prototype),kr.prototype.constructor=kr;function ni(z){var Q=-1,me=z==null?0:z.length;for(this.clear();++Q<me;){var Ae=z[Q];this.set(Ae[0],Ae[1])}}function au(){this.__data__=Ti?Ti(null):{},this.size=0}function su(z){var Q=this.has(z)&&delete this.__data__[z];return this.size-=Q?1:0,Q}function ou(z){var Q=this.__data__;if(Ti){var me=Q[z];return me===B?_:me}return Pr.call(Q,z)?Q[z]:_}function cu(z){var Q=this.__data__;return Ti?Q[z]!==_:Pr.call(Q,z)}function lu(z,Q){var me=this.__data__;return this.size+=this.has(z)?0:1,me[z]=Ti&&Q===_?B:Q,this}ni.prototype.clear=au,ni.prototype.delete=su,ni.prototype.get=ou,ni.prototype.has=cu,ni.prototype.set=lu;function On(z){var Q=-1,me=z==null?0:z.length;for(this.clear();++Q<me;){var Ae=z[Q];this.set(Ae[0],Ae[1])}}function uu(){this.__data__=[],this.size=0}function fu(z){var Q=this.__data__,me=ta(Q,z);if(me<0)return!1;var Ae=Q.length-1;return me==Ae?Q.pop():Gi.call(Q,me,1),--this.size,!0}function du(z){var Q=this.__data__,me=ta(Q,z);return me<0?_:Q[me][1]}function hu(z){return ta(this.__data__,z)>-1}function pu(z,Q){var me=this.__data__,Ae=ta(me,z);return Ae<0?(++this.size,me.push([z,Q])):me[Ae][1]=Q,this}On.prototype.clear=uu,On.prototype.delete=fu,On.prototype.get=du,On.prototype.has=hu,On.prototype.set=pu;function Fn(z){var Q=-1,me=z==null?0:z.length;for(this.clear();++Q<me;){var Ae=z[Q];this.set(Ae[0],Ae[1])}}function mu(){this.size=0,this.__data__={hash:new ni,map:new(Ei||On),string:new ni}}function vu(z){var Q=ha(this,z).delete(z);return this.size-=Q?1:0,Q}function gu(z){return ha(this,z).get(z)}function yu(z){return ha(this,z).has(z)}function _u(z,Q){var me=ha(this,z),Ae=me.size;return me.set(z,Q),this.size+=me.size==Ae?0:1,this}Fn.prototype.clear=mu,Fn.prototype.delete=vu,Fn.prototype.get=gu,Fn.prototype.has=yu,Fn.prototype.set=_u;function ii(z){var Q=-1,me=z==null?0:z.length;for(this.__data__=new Fn;++Q<me;)this.add(z[Q])}function bu(z){return this.__data__.set(z,B),this}function wu(z){return this.__data__.has(z)}ii.prototype.add=ii.prototype.push=bu,ii.prototype.has=wu;function In(z){var Q=this.__data__=new On(z);this.size=Q.size}function xu(){this.__data__=new On,this.size=0}function Su(z){var Q=this.__data__,me=Q.delete(z);return this.size=Q.size,me}function $u(z){return this.__data__.get(z)}function Eu(z){return this.__data__.has(z)}function Cu(z,Q){var me=this.__data__;if(me instanceof On){var Ae=me.__data__;if(!Ei||Ae.length<S-1)return Ae.push([z,Q]),this.size=++me.size,this;me=this.__data__=new Fn(Ae)}return me.set(z,Q),this.size=me.size,this}In.prototype.clear=xu,In.prototype.delete=Su,In.prototype.get=$u,In.prototype.has=Eu,In.prototype.set=Cu;function ao(z,Q){var me=dr(z),Ae=!me&&li(z),je=!me&&!Ae&&ei(z),Xe=!me&&!Ae&&!je&&wi(z),nt=me||Ae||je||Xe,ct=nt?Na(z.length,Dl):[],pt=ct.length;for(var Bt in z)(Q||Pr.call(z,Bt))&&!(nt&&(Bt=="length"||je&&(Bt=="offset"||Bt=="parent")||Xe&&(Bt=="buffer"||Bt=="byteLength"||Bt=="byteOffset")||jn(Bt,pt)))&&ct.push(Bt);return ct}function so(z){var Q=z.length;return Q?z[Xa(0,Q-1)]:_}function Tu(z,Q){return pa(fn(z),ai(Q,0,z.length))}function ku(z){return pa(fn(z))}function Ma(z,Q,me){(me!==_&&!Nn(z[Q],me)||me===_&&!(Q in z))&&Mn(z,Q,me)}function Bi(z,Q,me){var Ae=z[Q];(!(Pr.call(z,Q)&&Nn(Ae,me))||me===_&&!(Q in z))&&Mn(z,Q,me)}function ta(z,Q){for(var me=z.length;me--;)if(Nn(z[me][0],Q))return me;return-1}function Bu(z,Q,me,Ae){return Yn(z,function(je,Xe,nt){Q(Ae,je,me(je),nt)}),Ae}function oo(z,Q){return z&&Vn(Q,Zr(Q),z)}function Au(z,Q){return z&&Vn(Q,hn(Q),z)}function Mn(z,Q,me){Q=="__proto__"&&Xi?Xi(z,Q,{configurable:!0,enumerable:!0,value:me,writable:!0}):z[Q]=me}function La(z,Q){for(var me=-1,Ae=Q.length,je=wt(Ae),Xe=z==null;++me<Ae;)je[me]=Xe?_:xs(z,Q[me]);return je}function ai(z,Q,me){return z===z&&(me!==_&&(z=z<=me?z:me),Q!==_&&(z=z>=Q?z:Q)),z}function Cn(z,Q,me,Ae,je,Xe){var nt,ct=Q&N,pt=Q&V,Bt=Q&D;if(me&&(nt=je?me(z,Ae,je,Xe):me(z)),nt!==_)return nt;if(!jr(z))return z;var At=dr(z);if(At){if(nt=_f(z),!ct)return fn(z,nt)}else{var Rt=nn(z),Wt=Rt==he||Rt==xe;if(ei(z))return Ro(z,ct);if(Rt==Ve||Rt==be||Wt&&!je){if(nt=pt||Wt?{}:Zo(z),!ct)return pt?cf(z,Au(nt,z)):of(z,oo(nt,z))}else{if(!Dr[Rt])return je?z:{};nt=bf(z,Rt,ct)}}Xe||(Xe=new In);var Jt=Xe.get(z);if(Jt)return Jt;Xe.set(z,nt),kc(z)?z.forEach(function(ar){nt.add(Cn(ar,Q,me,ar,z,Xe))}):Cc(z)&&z.forEach(function(ar,Sr){nt.set(Sr,Cn(ar,Q,me,Sr,z,Xe))});var ir=Bt?pt?os:ss:pt?hn:Zr,yr=At?_:ir(z);return Sn(yr||z,function(ar,Sr){yr&&(Sr=ar,ar=z[Sr]),Bi(nt,Sr,Cn(ar,Q,me,Sr,z,Xe))}),nt}function Iu(z){var Q=Zr(z);return function(me){return co(me,z,Q)}}function co(z,Q,me){var Ae=me.length;if(z==null)return!Ae;for(z=Vr(z);Ae--;){var je=me[Ae],Xe=Q[je],nt=z[je];if(nt===_&&!(je in z)||!Xe(nt))return!1}return!0}function lo(z,Q,me){if(typeof z!="function")throw new $n(C);return Di(function(){z.apply(_,me)},Q)}function Ai(z,Q,me,Ae){var je=-1,Xe=Fi,nt=!0,ct=z.length,pt=[],Bt=Q.length;if(!ct)return pt;me&&(Q=Ur(Q,vn(me))),Ae?(Xe=Ca,nt=!1):Q.length>=S&&(Xe=Si,nt=!1,Q=new ii(Q));e:for(;++je<ct;){var At=z[je],Rt=me==null?At:me(At);if(At=Ae||At!==0?At:0,nt&&Rt===Rt){for(var Wt=Bt;Wt--;)if(Q[Wt]===Rt)continue e;pt.push(At)}else Xe(Q,Rt,Ae)||pt.push(At)}return pt}var Yn=Fo(Pn),uo=Fo(ja,!0);function Nu(z,Q){var me=!0;return Yn(z,function(Ae,je,Xe){return me=!!Q(Ae,je,Xe),me}),me}function ra(z,Q,me){for(var Ae=-1,je=z.length;++Ae<je;){var Xe=z[Ae],nt=Q(Xe);if(nt!=null&&(ct===_?nt===nt&&!yn(nt):me(nt,ct)))var ct=nt,pt=Xe}return pt}function Ru(z,Q,me,Ae){var je=z.length;for(me=vr(me),me<0&&(me=-me>je?0:je+me),Ae=Ae===_||Ae>je?je:vr(Ae),Ae<0&&(Ae+=je),Ae=me>Ae?0:Ac(Ae);me<Ae;)z[me++]=Q;return z}function fo(z,Q){var me=[];return Yn(z,function(Ae,je,Xe){Q(Ae,je,Xe)&&me.push(Ae)}),me}function tn(z,Q,me,Ae,je){var Xe=-1,nt=z.length;for(me||(me=xf),je||(je=[]);++Xe<nt;){var ct=z[Xe];Q>0&&me(ct)?Q>1?tn(ct,Q-1,me,Ae,je):Kn(je,ct):Ae||(je[je.length]=ct)}return je}var Ua=Mo(),ho=Mo(!0);function Pn(z,Q){return z&&Ua(z,Q,Zr)}function ja(z,Q){return z&&ho(z,Q,Zr)}function na(z,Q){return Wn(Q,function(me){return qn(z[me])})}function si(z,Q){Q=Zn(Q,z);for(var me=0,Ae=Q.length;z!=null&&me<Ae;)z=z[Dn(Q[me++])];return me&&me==Ae?z:_}function po(z,Q,me){var Ae=Q(z);return dr(z)?Ae:Kn(Ae,me(z))}function sn(z){return z==null?z===_?et:Le:ri&&ri in Vr(z)?vf(z):Bf(z)}function qa(z,Q){return z>Q}function Pu(z,Q){return z!=null&&Pr.call(z,Q)}function Vu(z,Q){return z!=null&&Q in Vr(z)}function Du(z,Q,me){return z>=rn(Q,me)&&z<Jr(Q,me)}function za(z,Q,me){for(var Ae=me?Ca:Fi,je=z[0].length,Xe=z.length,nt=Xe,ct=wt(Xe),pt=1/0,Bt=[];nt--;){var At=z[nt];nt&&Q&&(At=Ur(At,vn(Q))),pt=rn(At.length,pt),ct[nt]=!me&&(Q||je>=120&&At.length>=120)?new ii(nt&&At):_}At=z[0];var Rt=-1,Wt=ct[0];e:for(;++Rt<je&&Bt.length<pt;){var Jt=At[Rt],ir=Q?Q(Jt):Jt;if(Jt=me||Jt!==0?Jt:0,!(Wt?Si(Wt,ir):Ae(Bt,ir,me))){for(nt=Xe;--nt;){var yr=ct[nt];if(!(yr?Si(yr,ir):Ae(z[nt],ir,me)))continue e}Wt&&Wt.push(ir),Bt.push(Jt)}}return Bt}function Ou(z,Q,me,Ae){return Pn(z,function(je,Xe,nt){Q(Ae,me(je),Xe,nt)}),Ae}function Ii(z,Q,me){Q=Zn(Q,z),z=nc(z,Q);var Ae=z==null?z:z[Dn(kn(Q))];return Ae==null?_:mn(Ae,z,me)}function mo(z){return qr(z)&&sn(z)==be}function Fu(z){return qr(z)&&sn(z)==Oe}function Mu(z){return qr(z)&&sn(z)==Re}function Ni(z,Q,me,Ae,je){return z===Q?!0:z==null||Q==null||!qr(z)&&!qr(Q)?z!==z&&Q!==Q:Lu(z,Q,me,Ae,Ni,je)}function Lu(z,Q,me,Ae,je,Xe){var nt=dr(z),ct=dr(Q),pt=nt?ge:nn(z),Bt=ct?ge:nn(Q);pt=pt==be?Ve:pt,Bt=Bt==be?Ve:Bt;var At=pt==Ve,Rt=Bt==Ve,Wt=pt==Bt;if(Wt&&ei(z)){if(!ei(Q))return!1;nt=!0,At=!1}if(Wt&&!At)return Xe||(Xe=new In),nt||wi(z)?Xo(z,Q,me,Ae,je,Xe):pf(z,Q,pt,me,Ae,je,Xe);if(!(me&O)){var Jt=At&&Pr.call(z,"__wrapped__"),ir=Rt&&Pr.call(Q,"__wrapped__");if(Jt||ir){var yr=Jt?z.value():z,ar=ir?Q.value():Q;return Xe||(Xe=new In),je(yr,ar,me,Ae,Xe)}}return Wt?(Xe||(Xe=new In),mf(z,Q,me,Ae,je,Xe)):!1}function Uu(z){return qr(z)&&nn(z)==fe}function Ha(z,Q,me,Ae){var je=me.length,Xe=je,nt=!Ae;if(z==null)return!Xe;for(z=Vr(z);je--;){var ct=me[je];if(nt&&ct[2]?ct[1]!==z[ct[0]]:!(ct[0]in z))return!1}for(;++je<Xe;){ct=me[je];var pt=ct[0],Bt=z[pt],At=ct[1];if(nt&&ct[2]){if(Bt===_&&!(pt in z))return!1}else{var Rt=new In;if(Ae)var Wt=Ae(Bt,At,pt,z,Q,Rt);if(!(Wt===_?Ni(At,Bt,O|F,Ae,Rt):Wt))return!1}}return!0}function vo(z){if(!jr(z)||$f(z))return!1;var Q=qn(z)?Ul:Qe;return Q.test(ci(z))}function ju(z){return qr(z)&&sn(z)==He}function qu(z){return qr(z)&&nn(z)==We}function zu(z){return qr(z)&&ba(z.length)&&!!Lr[sn(z)]}function go(z){return typeof z=="function"?z:z==null?pn:typeof z=="object"?dr(z)?wo(z[0],z[1]):bo(z):Uc(z)}function Wa(z){if(!Vi(z))return Kl(z);var Q=[];for(var me in Vr(z))Pr.call(z,me)&&me!="constructor"&&Q.push(me);return Q}function Hu(z){if(!jr(z))return kf(z);var Q=Vi(z),me=[];for(var Ae in z)Ae=="constructor"&&(Q||!Pr.call(z,Ae))||me.push(Ae);return me}function Ka(z,Q){return z<Q}function _o(z,Q){var me=-1,Ae=dn(z)?wt(z.length):[];return Yn(z,function(je,Xe,nt){Ae[++me]=Q(je,Xe,nt)}),Ae}function bo(z){var Q=ls(z);return Q.length==1&&Q[0][2]?tc(Q[0][0],Q[0][1]):function(me){return me===z||Ha(me,z,Q)}}function wo(z,Q){return fs(z)&&Qo(Q)?tc(Dn(z),Q):function(me){var Ae=xs(me,z);return Ae===_&&Ae===Q?Ss(me,z):Ni(Q,Ae,O|F)}}function ia(z,Q,me,Ae,je){z!==Q&&Ua(Q,function(Xe,nt){if(je||(je=new In),jr(Xe))Wu(z,Q,nt,me,ia,Ae,je);else{var ct=Ae?Ae(hs(z,nt),Xe,nt+"",z,Q,je):_;ct===_&&(ct=Xe),Ma(z,nt,ct)}},hn)}function Wu(z,Q,me,Ae,je,Xe,nt){var ct=hs(z,me),pt=hs(Q,me),Bt=nt.get(pt);if(Bt){Ma(z,me,Bt);return}var At=Xe?Xe(ct,pt,me+"",z,Q,nt):_,Rt=At===_;if(Rt){var Wt=dr(pt),Jt=!Wt&&ei(pt),ir=!Wt&&!Jt&&wi(pt);At=pt,Wt||Jt||ir?dr(ct)?At=ct:Hr(ct)?At=fn(ct):Jt?(Rt=!1,At=Ro(pt,!0)):ir?(Rt=!1,At=Po(pt,!0)):At=[]:Oi(pt)||li(pt)?(At=ct,li(ct)?At=Ic(ct):(!jr(ct)||qn(ct))&&(At=Zo(pt))):Rt=!1}Rt&&(nt.set(pt,At),je(At,pt,Ae,Xe,nt),nt.delete(pt)),Ma(z,me,At)}function xo(z,Q){var me=z.length;if(me)return Q+=Q<0?me:0,jn(Q,me)?z[Q]:_}function So(z,Q,me){Q.length?Q=Ur(Q,function(Xe){return dr(Xe)?function(nt){return si(nt,Xe.length===1?Xe[0]:Xe)}:Xe}):Q=[pn];var Ae=-1;Q=Ur(Q,vn(nr()));var je=_o(z,function(Xe,nt,ct){var pt=Ur(Q,function(Bt){return Bt(Xe)});return{criteria:pt,index:++Ae,value:Xe}});return yl(je,function(Xe,nt){return sf(Xe,nt,me)})}function Ku(z,Q){return $o(z,Q,function(me,Ae){return Ss(z,Ae)})}function $o(z,Q,me){for(var Ae=-1,je=Q.length,Xe={};++Ae<je;){var nt=Q[Ae],ct=si(z,nt);me(ct,nt)&&Ri(Xe,Zn(nt,z),ct)}return Xe}function Gu(z){return function(Q){return si(Q,z)}}function Ga(z,Q,me,Ae){var je=Ae?gl:ui,Xe=-1,nt=Q.length,ct=z;for(z===Q&&(Q=fn(Q)),me&&(ct=Ur(z,vn(me)));++Xe<nt;)for(var pt=0,Bt=Q[Xe],At=me?me(Bt):Bt;(pt=je(ct,At,pt,Ae))>-1;)ct!==z&&Gi.call(ct,pt,1),Gi.call(z,pt,1);return z}function Eo(z,Q){for(var me=z?Q.length:0,Ae=me-1;me--;){var je=Q[me];if(me==Ae||je!==Xe){var Xe=je;jn(je)?Gi.call(z,je,1):Za(z,je)}}return z}function Xa(z,Q){return z+Ji(no()*(Q-z+1))}function Xu(z,Q,me,Ae){for(var je=-1,Xe=Jr(Yi((Q-z)/(me||1)),0),nt=wt(Xe);Xe--;)nt[Ae?Xe:++je]=z,z+=me;return nt}function Ya(z,Q){var me="";if(!z||Q<1||Q>oe)return me;do Q%2&&(me+=z),Q=Ji(Q/2),Q&&(z+=z);while(Q);return me}function br(z,Q){return ps(rc(z,Q,pn),z+"")}function Yu(z){return so(xi(z))}function Ju(z,Q){var me=xi(z);return pa(me,ai(Q,0,me.length))}function Ri(z,Q,me,Ae){if(!jr(z))return z;Q=Zn(Q,z);for(var je=-1,Xe=Q.length,nt=Xe-1,ct=z;ct!=null&&++je<Xe;){var pt=Dn(Q[je]),Bt=me;if(pt==="__proto__"||pt==="constructor"||pt==="prototype")return z;if(je!=nt){var At=ct[pt];Bt=Ae?Ae(At,pt,ct):_,Bt===_&&(Bt=jr(At)?At:jn(Q[je+1])?[]:{})}Bi(ct,pt,Bt),ct=ct[pt]}return z}var Co=Zi?function(z,Q){return Zi.set(z,Q),z}:pn,Zu=Xi?function(z,Q){return Xi(z,"toString",{configurable:!0,enumerable:!1,value:Es(Q),writable:!0})}:pn;function Qu(z){return pa(xi(z))}function Tn(z,Q,me){var Ae=-1,je=z.length;Q<0&&(Q=-Q>je?0:je+Q),me=me>je?je:me,me<0&&(me+=je),je=Q>me?0:me-Q>>>0,Q>>>=0;for(var Xe=wt(je);++Ae<je;)Xe[Ae]=z[Ae+Q];return Xe}function ef(z,Q){var me;return Yn(z,function(Ae,je,Xe){return me=Q(Ae,je,Xe),!me}),!!me}function aa(z,Q,me){var Ae=0,je=z==null?Ae:z.length;if(typeof Q=="number"&&Q===Q&&je<=le){for(;Ae<je;){var Xe=Ae+je>>>1,nt=z[Xe];nt!==null&&!yn(nt)&&(me?nt<=Q:nt<Q)?Ae=Xe+1:je=Xe}return je}return Ja(z,Q,pn,me)}function Ja(z,Q,me,Ae){var je=0,Xe=z==null?0:z.length;if(Xe===0)return 0;Q=me(Q);for(var nt=Q!==Q,ct=Q===null,pt=yn(Q),Bt=Q===_;je<Xe;){var At=Ji((je+Xe)/2),Rt=me(z[At]),Wt=Rt!==_,Jt=Rt===null,ir=Rt===Rt,yr=yn(Rt);if(nt)var ar=Ae||ir;else Bt?ar=ir&&(Ae||Wt):ct?ar=ir&&Wt&&(Ae||!Jt):pt?ar=ir&&Wt&&!Jt&&(Ae||!yr):Jt||yr?ar=!1:ar=Ae?Rt<=Q:Rt<Q;ar?je=At+1:Xe=At}return rn(Xe,K)}function To(z,Q){for(var me=-1,Ae=z.length,je=0,Xe=[];++me<Ae;){var nt=z[me],ct=Q?Q(nt):nt;if(!me||!Nn(ct,pt)){var pt=ct;Xe[je++]=nt===0?0:nt}}return Xe}function ko(z){return typeof z=="number"?z:yn(z)?ne:+z}function gn(z){if(typeof z=="string")return z;if(dr(z))return Ur(z,gn)+"";if(yn(z))return io?io.call(z):"";var Q=z+"";return Q=="0"&&1/z==-re?"-0":Q}function Jn(z,Q,me){var Ae=-1,je=Fi,Xe=z.length,nt=!0,ct=[],pt=ct;if(me)nt=!1,je=Ca;else if(Xe>=S){var Bt=Q?null:df(z);if(Bt)return Li(Bt);nt=!1,je=Si,pt=new ii}else pt=Q?[]:ct;e:for(;++Ae<Xe;){var At=z[Ae],Rt=Q?Q(At):At;if(At=me||At!==0?At:0,nt&&Rt===Rt){for(var Wt=pt.length;Wt--;)if(pt[Wt]===Rt)continue e;Q&&pt.push(Rt),ct.push(At)}else je(pt,Rt,me)||(pt!==ct&&pt.push(Rt),ct.push(At))}return ct}function Za(z,Q){return Q=Zn(Q,z),z=nc(z,Q),z==null||delete z[Dn(kn(Q))]}function Bo(z,Q,me,Ae){return Ri(z,Q,me(si(z,Q)),Ae)}function sa(z,Q,me,Ae){for(var je=z.length,Xe=Ae?je:-1;(Ae?Xe--:++Xe<je)&&Q(z[Xe],Xe,z););return me?Tn(z,Ae?0:Xe,Ae?Xe+1:je):Tn(z,Ae?Xe+1:0,Ae?je:Xe)}function Ao(z,Q){var me=z;return me instanceof kr&&(me=me.value()),Ta(Q,function(Ae,je){return je.func.apply(je.thisArg,Kn([Ae],je.args))},me)}function Qa(z,Q,me){var Ae=z.length;if(Ae<2)return Ae?Jn(z[0]):[];for(var je=-1,Xe=wt(Ae);++je<Ae;)for(var nt=z[je],ct=-1;++ct<Ae;)ct!=je&&(Xe[je]=Ai(Xe[je]||nt,z[ct],Q,me));return Jn(tn(Xe,1),Q,me)}function Io(z,Q,me){for(var Ae=-1,je=z.length,Xe=Q.length,nt={};++Ae<je;){var ct=Ae<Xe?Q[Ae]:_;me(nt,z[Ae],ct)}return nt}function es(z){return Hr(z)?z:[]}function ts(z){return typeof z=="function"?z:pn}function Zn(z,Q){return dr(z)?z:fs(z,Q)?[z]:oc(Nr(z))}var tf=br;function Qn(z,Q,me){var Ae=z.length;return me=me===_?Ae:me,!Q&&me>=Ae?z:Tn(z,Q,me)}var No=jl||function(z){return Qr.clearTimeout(z)};function Ro(z,Q){if(Q)return z.slice();var me=z.length,Ae=Zs?Zs(me):new z.constructor(me);return z.copy(Ae),Ae}function rs(z){var Q=new z.constructor(z.byteLength);return new Wi(Q).set(new Wi(z)),Q}function rf(z,Q){var me=Q?rs(z.buffer):z.buffer;return new z.constructor(me,z.byteOffset,z.byteLength)}function nf(z){var Q=new z.constructor(z.source,Ye.exec(z));return Q.lastIndex=z.lastIndex,Q}function af(z){return ki?Vr(ki.call(z)):{}}function Po(z,Q){var me=Q?rs(z.buffer):z.buffer;return new z.constructor(me,z.byteOffset,z.length)}function Vo(z,Q){if(z!==Q){var me=z!==_,Ae=z===null,je=z===z,Xe=yn(z),nt=Q!==_,ct=Q===null,pt=Q===Q,Bt=yn(Q);if(!ct&&!Bt&&!Xe&&z>Q||Xe&&nt&&pt&&!ct&&!Bt||Ae&&nt&&pt||!me&&pt||!je)return 1;if(!Ae&&!Xe&&!Bt&&z<Q||Bt&&me&&je&&!Ae&&!Xe||ct&&me&&je||!nt&&je||!pt)return-1}return 0}function sf(z,Q,me){for(var Ae=-1,je=z.criteria,Xe=Q.criteria,nt=je.length,ct=me.length;++Ae<nt;){var pt=Vo(je[Ae],Xe[Ae]);if(pt){if(Ae>=ct)return pt;var Bt=me[Ae];return pt*(Bt=="desc"?-1:1)}}return z.index-Q.index}function Do(z,Q,me,Ae){for(var je=-1,Xe=z.length,nt=me.length,ct=-1,pt=Q.length,Bt=Jr(Xe-nt,0),At=wt(pt+Bt),Rt=!Ae;++ct<pt;)At[ct]=Q[ct];for(;++je<nt;)(Rt||je<Xe)&&(At[me[je]]=z[je]);for(;Bt--;)At[ct++]=z[je++];return At}function Oo(z,Q,me,Ae){for(var je=-1,Xe=z.length,nt=-1,ct=me.length,pt=-1,Bt=Q.length,At=Jr(Xe-ct,0),Rt=wt(At+Bt),Wt=!Ae;++je<At;)Rt[je]=z[je];for(var Jt=je;++pt<Bt;)Rt[Jt+pt]=Q[pt];for(;++nt<ct;)(Wt||je<Xe)&&(Rt[Jt+me[nt]]=z[je++]);return Rt}function fn(z,Q){var me=-1,Ae=z.length;for(Q||(Q=wt(Ae));++me<Ae;)Q[me]=z[me];return Q}function Vn(z,Q,me,Ae){var je=!me;me||(me={});for(var Xe=-1,nt=Q.length;++Xe<nt;){var ct=Q[Xe],pt=Ae?Ae(me[ct],z[ct],ct,me,z):_;pt===_&&(pt=z[ct]),je?Mn(me,ct,pt):Bi(me,ct,pt)}return me}function of(z,Q){return Vn(z,us(z),Q)}function cf(z,Q){return Vn(z,Yo(z),Q)}function oa(z,Q){return function(me,Ae){var je=dr(me)?fl:Bu,Xe=Q?Q():{};return je(me,z,nr(Ae,2),Xe)}}function yi(z){return br(function(Q,me){var Ae=-1,je=me.length,Xe=je>1?me[je-1]:_,nt=je>2?me[2]:_;for(Xe=z.length>3&&typeof Xe=="function"?(je--,Xe):_,nt&&cn(me[0],me[1],nt)&&(Xe=je<3?_:Xe,je=1),Q=Vr(Q);++Ae<je;){var ct=me[Ae];ct&&z(Q,ct,Ae,Xe)}return Q})}function Fo(z,Q){return function(me,Ae){if(me==null)return me;if(!dn(me))return z(me,Ae);for(var je=me.length,Xe=Q?je:-1,nt=Vr(me);(Q?Xe--:++Xe<je)&&Ae(nt[Xe],Xe,nt)!==!1;);return me}}function Mo(z){return function(Q,me,Ae){for(var je=-1,Xe=Vr(Q),nt=Ae(Q),ct=nt.length;ct--;){var pt=nt[z?ct:++je];if(me(Xe[pt],pt,Xe)===!1)break}return Q}}function lf(z,Q,me){var Ae=Q&M,je=Pi(z);function Xe(){var nt=this&&this!==Qr&&this instanceof Xe?je:z;return nt.apply(Ae?me:this,arguments)}return Xe}function Lo(z){return function(Q){Q=Nr(Q);var me=fi(Q)?An(Q):_,Ae=me?me[0]:Q.charAt(0),je=me?Qn(me,1).join(""):Q.slice(1);return Ae[z]()+je}}function _i(z){return function(Q){return Ta(Mc(Fc(Q).replace(Yc,"")),z,"")}}function Pi(z){return function(){var Q=arguments;switch(Q.length){case 0:return new z;case 1:return new z(Q[0]);case 2:return new z(Q[0],Q[1]);case 3:return new z(Q[0],Q[1],Q[2]);case 4:return new z(Q[0],Q[1],Q[2],Q[3]);case 5:return new z(Q[0],Q[1],Q[2],Q[3],Q[4]);case 6:return new z(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5]);case 7:return new z(Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6])}var me=gi(z.prototype),Ae=z.apply(me,Q);return jr(Ae)?Ae:me}}function uf(z,Q,me){var Ae=Pi(z);function je(){for(var Xe=arguments.length,nt=wt(Xe),ct=Xe,pt=bi(je);ct--;)nt[ct]=arguments[ct];var Bt=Xe<3&&nt[0]!==pt&&nt[Xe-1]!==pt?[]:Gn(nt,pt);if(Xe-=Bt.length,Xe<me)return Ho(z,Q,ca,je.placeholder,_,nt,Bt,_,_,me-Xe);var At=this&&this!==Qr&&this instanceof je?Ae:z;return mn(At,this,nt)}return je}function Uo(z){return function(Q,me,Ae){var je=Vr(Q);if(!dn(Q)){var Xe=nr(me,3);Q=Zr(Q),me=function(ct){return Xe(je[ct],ct,je)}}var nt=z(Q,me,Ae);return nt>-1?je[Xe?Q[nt]:nt]:_}}function jo(z){return Un(function(Q){var me=Q.length,Ae=me,je=En.prototype.thru;for(z&&Q.reverse();Ae--;){var Xe=Q[Ae];if(typeof Xe!="function")throw new $n(C);if(je&&!nt&&da(Xe)=="wrapper")var nt=new En([],!0)}for(Ae=nt?Ae:me;++Ae<me;){Xe=Q[Ae];var ct=da(Xe),pt=ct=="wrapper"?cs(Xe):_;pt&&ds(pt[0])&&pt[1]==(Z|q|X|ae)&&!pt[4].length&&pt[9]==1?nt=nt[da(pt[0])].apply(nt,pt[3]):nt=Xe.length==1&&ds(Xe)?nt[ct]():nt.thru(Xe)}return function(){var Bt=arguments,At=Bt[0];if(nt&&Bt.length==1&&dr(At))return nt.plant(At).value();for(var Rt=0,Wt=me?Q[Rt].apply(this,Bt):At;++Rt<me;)Wt=Q[Rt].call(this,Wt);return Wt}})}function ca(z,Q,me,Ae,je,Xe,nt,ct,pt,Bt){var At=Q&Z,Rt=Q&M,Wt=Q&L,Jt=Q&(q|H),ir=Q&ce,yr=Wt?_:Pi(z);function ar(){for(var Sr=arguments.length,Br=wt(Sr),_n=Sr;_n--;)Br[_n]=arguments[_n];if(Jt)var ln=bi(ar),wn=bl(Br,ln);if(Ae&&(Br=Do(Br,Ae,je,Jt)),Xe&&(Br=Oo(Br,Xe,nt,Jt)),Sr-=wn,Jt&&Sr<Bt){var Wr=Gn(Br,ln);return Ho(z,Q,ca,ar.placeholder,me,Br,Wr,ct,pt,Bt-Sr)}var Rn=Rt?me:this,Hn=Wt?Rn[z]:z;return Sr=Br.length,ct?Br=Af(Br,ct):ir&&Sr>1&&Br.reverse(),At&&pt<Sr&&(Br.length=pt),this&&this!==Qr&&this instanceof ar&&(Hn=yr||Pi(Hn)),Hn.apply(Rn,Br)}return ar}function qo(z,Q){return function(me,Ae){return Ou(me,z,Q(Ae),{})}}function la(z,Q){return function(me,Ae){var je;if(me===_&&Ae===_)return Q;if(me!==_&&(je=me),Ae!==_){if(je===_)return Ae;typeof me=="string"||typeof Ae=="string"?(me=gn(me),Ae=gn(Ae)):(me=ko(me),Ae=ko(Ae)),je=z(me,Ae)}return je}}function ns(z){return Un(function(Q){return Q=Ur(Q,vn(nr())),br(function(me){var Ae=this;return z(Q,function(je){return mn(je,Ae,me)})})})}function ua(z,Q){Q=Q===_?" ":gn(Q);var me=Q.length;if(me<2)return me?Ya(Q,z):Q;var Ae=Ya(Q,Yi(z/di(Q)));return fi(Q)?Qn(An(Ae),0,z).join(""):Ae.slice(0,z)}function ff(z,Q,me,Ae){var je=Q&M,Xe=Pi(z);function nt(){for(var ct=-1,pt=arguments.length,Bt=-1,At=Ae.length,Rt=wt(At+pt),Wt=this&&this!==Qr&&this instanceof nt?Xe:z;++Bt<At;)Rt[Bt]=Ae[Bt];for(;pt--;)Rt[Bt++]=arguments[++ct];return mn(Wt,je?me:this,Rt)}return nt}function zo(z){return function(Q,me,Ae){return Ae&&typeof Ae!="number"&&cn(Q,me,Ae)&&(me=Ae=_),Q=zn(Q),me===_?(me=Q,Q=0):me=zn(me),Ae=Ae===_?Q<me?1:-1:zn(Ae),Xu(Q,me,Ae,z)}}function fa(z){return function(Q,me){return typeof Q=="string"&&typeof me=="string"||(Q=Bn(Q),me=Bn(me)),z(Q,me)}}function Ho(z,Q,me,Ae,je,Xe,nt,ct,pt,Bt){var At=Q&q,Rt=At?nt:_,Wt=At?_:nt,Jt=At?Xe:_,ir=At?_:Xe;Q|=At?X:J,Q&=~(At?J:X),Q&j||(Q&=~(M|L));var yr=[z,Q,je,Jt,Rt,ir,Wt,ct,pt,Bt],ar=me.apply(_,yr);return ds(z)&&ic(ar,yr),ar.placeholder=Ae,ac(ar,z,Q)}function as(z){var Q=Yr[z];return function(me,Ae){if(me=Bn(me),Ae=Ae==null?0:rn(vr(Ae),292),Ae&&ro(me)){var je=(Nr(me)+"e").split("e"),Xe=Q(je[0]+"e"+(+je[1]+Ae));return je=(Nr(Xe)+"e").split("e"),+(je[0]+"e"+(+je[1]-Ae))}return Q(me)}}var df=mi&&1/Li(new mi([,-0]))[1]==re?function(z){return new mi(z)}:ks;function Wo(z){return function(Q){var me=nn(Q);return me==fe?Pa(Q):me==We?Tl(Q):_l(Q,z(Q))}}function Ln(z,Q,me,Ae,je,Xe,nt,ct){var pt=Q&L;if(!pt&&typeof z!="function")throw new $n(C);var Bt=Ae?Ae.length:0;if(Bt||(Q&=~(X|J),Ae=je=_),nt=nt===_?nt:Jr(vr(nt),0),ct=ct===_?ct:vr(ct),Bt-=je?je.length:0,Q&J){var At=Ae,Rt=je;Ae=je=_}var Wt=pt?_:cs(z),Jt=[z,Q,me,Ae,je,At,Rt,Xe,nt,ct];if(Wt&&Tf(Jt,Wt),z=Jt[0],Q=Jt[1],me=Jt[2],Ae=Jt[3],je=Jt[4],ct=Jt[9]=Jt[9]===_?pt?0:z.length:Jr(Jt[9]-Bt,0),!ct&&Q&(q|H)&&(Q&=~(q|H)),!Q||Q==M)var ir=lf(z,Q,me);else Q==q||Q==H?ir=uf(z,Q,ct):(Q==X||Q==(M|X))&&!je.length?ir=ff(z,Q,me,Ae):ir=ca.apply(_,Jt);var yr=Wt?Co:ic;return ac(yr(ir,Jt),z,Q)}function Ko(z,Q,me,Ae){return z===_||Nn(z,pi[me])&&!Pr.call(Ae,me)?Q:z}function Go(z,Q,me,Ae,je,Xe){return jr(z)&&jr(Q)&&(Xe.set(Q,z),ia(z,Q,_,Go,Xe),Xe.delete(Q)),z}function hf(z){return Oi(z)?_:z}function Xo(z,Q,me,Ae,je,Xe){var nt=me&O,ct=z.length,pt=Q.length;if(ct!=pt&&!(nt&&pt>ct))return!1;var Bt=Xe.get(z),At=Xe.get(Q);if(Bt&&At)return Bt==Q&&At==z;var Rt=-1,Wt=!0,Jt=me&F?new ii:_;for(Xe.set(z,Q),Xe.set(Q,z);++Rt<ct;){var ir=z[Rt],yr=Q[Rt];if(Ae)var ar=nt?Ae(yr,ir,Rt,Q,z,Xe):Ae(ir,yr,Rt,z,Q,Xe);if(ar!==_){if(ar)continue;Wt=!1;break}if(Jt){if(!ka(Q,function(Sr,Br){if(!Si(Jt,Br)&&(ir===Sr||je(ir,Sr,me,Ae,Xe)))return Jt.push(Br)})){Wt=!1;break}}else if(!(ir===yr||je(ir,yr,me,Ae,Xe))){Wt=!1;break}}return Xe.delete(z),Xe.delete(Q),Wt}function pf(z,Q,me,Ae,je,Xe,nt){switch(me){case we:if(z.byteLength!=Q.byteLength||z.byteOffset!=Q.byteOffset)return!1;z=z.buffer,Q=Q.buffer;case Oe:return!(z.byteLength!=Q.byteLength||!Xe(new Wi(z),new Wi(Q)));case Ee:case Re:case Be:return Nn(+z,+Q);case Te:return z.name==Q.name&&z.message==Q.message;case He:case Ue:return z==Q+"";case fe:var ct=Pa;case We:var pt=Ae&O;if(ct||(ct=Li),z.size!=Q.size&&!pt)return!1;var Bt=nt.get(z);if(Bt)return Bt==Q;Ae|=F,nt.set(z,Q);var At=Xo(ct(z),ct(Q),Ae,je,Xe,nt);return nt.delete(z),At;case Ge:if(ki)return ki.call(z)==ki.call(Q)}return!1}function mf(z,Q,me,Ae,je,Xe){var nt=me&O,ct=ss(z),pt=ct.length,Bt=ss(Q),At=Bt.length;if(pt!=At&&!nt)return!1;for(var Rt=pt;Rt--;){var Wt=ct[Rt];if(!(nt?Wt in Q:Pr.call(Q,Wt)))return!1}var Jt=Xe.get(z),ir=Xe.get(Q);if(Jt&&ir)return Jt==Q&&ir==z;var yr=!0;Xe.set(z,Q),Xe.set(Q,z);for(var ar=nt;++Rt<pt;){Wt=ct[Rt];var Sr=z[Wt],Br=Q[Wt];if(Ae)var _n=nt?Ae(Br,Sr,Wt,Q,z,Xe):Ae(Sr,Br,Wt,z,Q,Xe);if(!(_n===_?Sr===Br||je(Sr,Br,me,Ae,Xe):_n)){yr=!1;break}ar||(ar=Wt=="constructor")}if(yr&&!ar){var ln=z.constructor,wn=Q.constructor;ln!=wn&&"constructor"in z&&"constructor"in Q&&!(typeof ln=="function"&&ln instanceof ln&&typeof wn=="function"&&wn instanceof wn)&&(yr=!1)}return Xe.delete(z),Xe.delete(Q),yr}function Un(z){return ps(rc(z,_,fc),z+"")}function ss(z){return po(z,Zr,us)}function os(z){return po(z,hn,Yo)}var cs=Zi?function(z){return Zi.get(z)}:ks;function da(z){for(var Q=z.name+"",me=vi[Q],Ae=Pr.call(vi,Q)?me.length:0;Ae--;){var je=me[Ae],Xe=je.func;if(Xe==null||Xe==z)return je.name}return Q}function bi(z){var Q=Pr.call(Ke,"placeholder")?Ke:z;return Q.placeholder}function nr(){var z=Ke.iteratee||Cs;return z=z===Cs?go:z,arguments.length?z(arguments[0],arguments[1]):z}function ha(z,Q){var me=z.__data__;return Sf(Q)?me[typeof Q=="string"?"string":"hash"]:me.map}function ls(z){for(var Q=Zr(z),me=Q.length;me--;){var Ae=Q[me],je=z[Ae];Q[me]=[Ae,je,Qo(je)]}return Q}function oi(z,Q){var me=$l(z,Q);return vo(me)?me:_}function vf(z){var Q=Pr.call(z,ri),me=z[ri];try{z[ri]=_;var Ae=!0}catch{}var je=zi.call(z);return Ae&&(Q?z[ri]=me:delete z[ri]),je}var us=Da?function(z){return z==null?[]:(z=Vr(z),Wn(Da(z),function(Q){return eo.call(z,Q)}))}:Bs,Yo=Da?function(z){for(var Q=[];z;)Kn(Q,us(z)),z=Ki(z);return Q}:Bs,nn=sn;(Oa&&nn(new Oa(new ArrayBuffer(1)))!=we||Ei&&nn(new Ei)!=fe||Fa&&nn(Fa.resolve())!=Ie||mi&&nn(new mi)!=We||Ci&&nn(new Ci)!=ot)&&(nn=function(z){var Q=sn(z),me=Q==Ve?z.constructor:_,Ae=me?ci(me):"";if(Ae)switch(Ae){case Jl:return we;case Zl:return fe;case Ql:return Ie;case eu:return We;case tu:return ot}return Q});function gf(z,Q,me){for(var Ae=-1,je=me.length;++Ae<je;){var Xe=me[Ae],nt=Xe.size;switch(Xe.type){case"drop":z+=nt;break;case"dropRight":Q-=nt;break;case"take":Q=rn(Q,z+nt);break;case"takeRight":z=Jr(z,Q-nt);break}}return{start:z,end:Q}}function yf(z){var Q=z.match(se);return Q?Q[1].split(_e):[]}function Jo(z,Q,me){Q=Zn(Q,z);for(var Ae=-1,je=Q.length,Xe=!1;++Ae<je;){var nt=Dn(Q[Ae]);if(!(Xe=z!=null&&me(z,nt)))break;z=z[nt]}return Xe||++Ae!=je?Xe:(je=z==null?0:z.length,!!je&&ba(je)&&jn(nt,je)&&(dr(z)||li(z)))}function _f(z){var Q=z.length,me=new z.constructor(Q);return Q&&typeof z[0]=="string"&&Pr.call(z,"index")&&(me.index=z.index,me.input=z.input),me}function Zo(z){return typeof z.constructor=="function"&&!Vi(z)?gi(Ki(z)):{}}function bf(z,Q,me){var Ae=z.constructor;switch(Q){case Oe:return rs(z);case Ee:case Re:return new Ae(+z);case we:return rf(z,me);case Ce:case ze:case Ze:case st:case rt:case Ft:case Vt:case Et:case jt:return Po(z,me);case fe:return new Ae;case Be:case Ue:return new Ae(z);case He:return nf(z);case We:return new Ae;case Ge:return af(z)}}function wf(z,Q){var me=Q.length;if(!me)return z;var Ae=me-1;return Q[Ae]=(me>1?"& ":"")+Q[Ae],Q=Q.join(me>2?", ":" "),z.replace(Se,`{
/* [wrapped with `+Q+`] */
`)}function xf(z){return dr(z)||li(z)||!!(to&&z&&z[to])}function jn(z,Q){var me=typeof z;return Q=Q??oe,!!Q&&(me=="number"||me!="symbol"&&lt.test(z))&&z>-1&&z%1==0&&z<Q}function cn(z,Q,me){if(!jr(me))return!1;var Ae=typeof Q;return(Ae=="number"?dn(me)&&jn(Q,me.length):Ae=="string"&&Q in me)?Nn(me[Q],z):!1}function fs(z,Q){if(dr(z))return!1;var me=typeof z;return me=="number"||me=="symbol"||me=="boolean"||z==null||yn(z)?!0:$r.test(z)||!Kt.test(z)||Q!=null&&z in Vr(Q)}function Sf(z){var Q=typeof z;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?z!=="__proto__":z===null}function ds(z){var Q=da(z),me=Ke[Q];if(typeof me!="function"||!(Q in kr.prototype))return!1;if(z===me)return!0;var Ae=cs(me);return!!Ae&&z===Ae[0]}function $f(z){return!!Js&&Js in z}var Ef=ji?qn:As;function Vi(z){var Q=z&&z.constructor,me=typeof Q=="function"&&Q.prototype||pi;return z===me}function Qo(z){return z===z&&!jr(z)}function tc(z,Q){return function(me){return me==null?!1:me[z]===Q&&(Q!==_||z in Vr(me))}}function Cf(z){var Q=ya(z,function(Ae){return me.size===A&&me.clear(),Ae}),me=Q.cache;return Q}function Tf(z,Q){var me=z[1],Ae=Q[1],je=me|Ae,Xe=je<(M|L|Z),nt=Ae==Z&&me==q||Ae==Z&&me==ae&&z[7].length<=Q[8]||Ae==(Z|ae)&&Q[7].length<=Q[8]&&me==q;if(!(Xe||nt))return z;Ae&M&&(z[2]=Q[2],je|=me&M?0:j);var ct=Q[3];if(ct){var pt=z[3];z[3]=pt?Do(pt,ct,Q[4]):ct,z[4]=pt?Gn(z[3],I):Q[4]}return ct=Q[5],ct&&(pt=z[5],z[5]=pt?Oo(pt,ct,Q[6]):ct,z[6]=pt?Gn(z[5],I):Q[6]),ct=Q[7],ct&&(z[7]=ct),Ae&Z&&(z[8]=z[8]==null?Q[8]:rn(z[8],Q[8])),z[9]==null&&(z[9]=Q[9]),z[0]=Q[0],z[1]=je,z}function kf(z){var Q=[];if(z!=null)for(var me in Vr(z))Q.push(me);return Q}function Bf(z){return zi.call(z)}function rc(z,Q,me){return Q=Jr(Q===_?z.length-1:Q,0),function(){for(var Ae=arguments,je=-1,Xe=Jr(Ae.length-Q,0),nt=wt(Xe);++je<Xe;)nt[je]=Ae[Q+je];je=-1;for(var ct=wt(Q+1);++je<Q;)ct[je]=Ae[je];return ct[Q]=me(nt),mn(z,this,ct)}}function nc(z,Q){return Q.length<2?z:si(z,Tn(Q,0,-1))}function Af(z,Q){for(var me=z.length,Ae=rn(Q.length,me),je=fn(z);Ae--;){var Xe=Q[Ae];z[Ae]=jn(Xe,me)?je[Xe]:_}return z}function hs(z,Q){if(!(Q==="constructor"&&typeof z[Q]=="function")&&Q!="__proto__")return z[Q]}var ic=sc(Co),Di=zl||function(z,Q){return Qr.setTimeout(z,Q)},ps=sc(Zu);function ac(z,Q,me){var Ae=Q+"";return ps(z,wf(Ae,If(yf(Ae),me)))}function sc(z){var Q=0,me=0;return function(){var Ae=Gl(),je=Y-(Ae-me);if(me=Ae,je>0){if(++Q>=G)return arguments[0]}else Q=0;return z.apply(_,arguments)}}function pa(z,Q){var me=-1,Ae=z.length,je=Ae-1;for(Q=Q===_?Ae:Q;++me<Q;){var Xe=Xa(me,je),nt=z[Xe];z[Xe]=z[me],z[me]=nt}return z.length=Q,z}var oc=Cf(function(z){var Q=[];return z.charCodeAt(0)===46&&Q.push(""),z.replace(tr,function(me,Ae,je,Xe){Q.push(je?Xe.replace(Fe,"$1"):Ae||me)}),Q});function Dn(z){if(typeof z=="string"||yn(z))return z;var Q=z+"";return Q=="0"&&1/z==-re?"-0":Q}function ci(z){if(z!=null){try{return qi.call(z)}catch{}try{return z+""}catch{}}return""}function If(z,Q){return Sn(ue,function(me){var Ae="_."+me[0];Q&me[1]&&!Fi(z,Ae)&&z.push(Ae)}),z.sort()}function cc(z){if(z instanceof kr)return z.clone();var Q=new En(z.__wrapped__,z.__chain__);return Q.__actions__=fn(z.__actions__),Q.__index__=z.__index__,Q.__values__=z.__values__,Q}function Nf(z,Q,me){(me?cn(z,Q,me):Q===_)?Q=1:Q=Jr(vr(Q),0);var Ae=z==null?0:z.length;if(!Ae||Q<1)return[];for(var je=0,Xe=0,nt=wt(Yi(Ae/Q));je<Ae;)nt[Xe++]=Tn(z,je,je+=Q);return nt}function Rf(z){for(var Q=-1,me=z==null?0:z.length,Ae=0,je=[];++Q<me;){var Xe=z[Q];Xe&&(je[Ae++]=Xe)}return je}function Pf(){var z=arguments.length;if(!z)return[];for(var Q=wt(z-1),me=arguments[0],Ae=z;Ae--;)Q[Ae-1]=arguments[Ae];return Kn(dr(me)?fn(me):[me],tn(Q,1))}var Vf=br(function(z,Q){return Hr(z)?Ai(z,tn(Q,1,Hr,!0)):[]}),Df=br(function(z,Q){var me=kn(Q);return Hr(me)&&(me=_),Hr(z)?Ai(z,tn(Q,1,Hr,!0),nr(me,2)):[]}),Of=br(function(z,Q){var me=kn(Q);return Hr(me)&&(me=_),Hr(z)?Ai(z,tn(Q,1,Hr,!0),_,me):[]});function Ff(z,Q,me){var Ae=z==null?0:z.length;return Ae?(Q=me||Q===_?1:vr(Q),Tn(z,Q<0?0:Q,Ae)):[]}function Mf(z,Q,me){var Ae=z==null?0:z.length;return Ae?(Q=me||Q===_?1:vr(Q),Q=Ae-Q,Tn(z,0,Q<0?0:Q)):[]}function Lf(z,Q){return z&&z.length?sa(z,nr(Q,3),!0,!0):[]}function Uf(z,Q){return z&&z.length?sa(z,nr(Q,3),!0):[]}function jf(z,Q,me,Ae){var je=z==null?0:z.length;return je?(me&&typeof me!="number"&&cn(z,Q,me)&&(me=0,Ae=je),Ru(z,Q,me,Ae)):[]}function lc(z,Q,me){var Ae=z==null?0:z.length;if(!Ae)return-1;var je=me==null?0:vr(me);return je<0&&(je=Jr(Ae+je,0)),Mi(z,nr(Q,3),je)}function uc(z,Q,me){var Ae=z==null?0:z.length;if(!Ae)return-1;var je=Ae-1;return me!==_&&(je=vr(me),je=me<0?Jr(Ae+je,0):rn(je,Ae-1)),Mi(z,nr(Q,3),je,!0)}function fc(z){var Q=z==null?0:z.length;return Q?tn(z,1):[]}function qf(z){var Q=z==null?0:z.length;return Q?tn(z,re):[]}function zf(z,Q){var me=z==null?0:z.length;return me?(Q=Q===_?1:vr(Q),tn(z,Q)):[]}function Hf(z){for(var Q=-1,me=z==null?0:z.length,Ae={};++Q<me;){var je=z[Q];Ae[je[0]]=je[1]}return Ae}function dc(z){return z&&z.length?z[0]:_}function Wf(z,Q,me){var Ae=z==null?0:z.length;if(!Ae)return-1;var je=me==null?0:vr(me);return je<0&&(je=Jr(Ae+je,0)),ui(z,Q,je)}function Kf(z){var Q=z==null?0:z.length;return Q?Tn(z,0,-1):[]}var Gf=br(function(z){var Q=Ur(z,es);return Q.length&&Q[0]===z[0]?za(Q):[]}),Xf=br(function(z){var Q=kn(z),me=Ur(z,es);return Q===kn(me)?Q=_:me.pop(),me.length&&me[0]===z[0]?za(me,nr(Q,2)):[]}),Yf=br(function(z){var Q=kn(z),me=Ur(z,es);return Q=typeof Q=="function"?Q:_,Q&&me.pop(),me.length&&me[0]===z[0]?za(me,_,Q):[]});function Jf(z,Q){return z==null?"":Wl.call(z,Q)}function kn(z){var Q=z==null?0:z.length;return Q?z[Q-1]:_}function Zf(z,Q,me){var Ae=z==null?0:z.length;if(!Ae)return-1;var je=Ae;return me!==_&&(je=vr(me),je=je<0?Jr(Ae+je,0):rn(je,Ae-1)),Q===Q?Al(z,Q,je):Mi(z,qs,je,!0)}function Qf(z,Q){return z&&z.length?xo(z,vr(Q)):_}var ed=br(hc);function hc(z,Q){return z&&z.length&&Q&&Q.length?Ga(z,Q):z}function td(z,Q,me){return z&&z.length&&Q&&Q.length?Ga(z,Q,nr(me,2)):z}function rd(z,Q,me){return z&&z.length&&Q&&Q.length?Ga(z,Q,_,me):z}var nd=Un(function(z,Q){var me=z==null?0:z.length,Ae=La(z,Q);return Eo(z,Ur(Q,function(je){return jn(je,me)?+je:je}).sort(Vo)),Ae});function ad(z,Q){var me=[];if(!(z&&z.length))return me;var Ae=-1,je=[],Xe=z.length;for(Q=nr(Q,3);++Ae<Xe;){var nt=z[Ae];Q(nt,Ae,z)&&(me.push(nt),je.push(Ae))}return Eo(z,je),me}function vs(z){return z==null?z:Yl.call(z)}function sd(z,Q,me){var Ae=z==null?0:z.length;return Ae?(me&&typeof me!="number"&&cn(z,Q,me)?(Q=0,me=Ae):(Q=Q==null?0:vr(Q),me=me===_?Ae:vr(me)),Tn(z,Q,me)):[]}function od(z,Q){return aa(z,Q)}function cd(z,Q,me){return Ja(z,Q,nr(me,2))}function ld(z,Q){var me=z==null?0:z.length;if(me){var Ae=aa(z,Q);if(Ae<me&&Nn(z[Ae],Q))return Ae}return-1}function ud(z,Q){return aa(z,Q,!0)}function fd(z,Q,me){return Ja(z,Q,nr(me,2),!0)}function dd(z,Q){var me=z==null?0:z.length;if(me){var Ae=aa(z,Q,!0)-1;if(Nn(z[Ae],Q))return Ae}return-1}function hd(z){return z&&z.length?To(z):[]}function pd(z,Q){return z&&z.length?To(z,nr(Q,2)):[]}function md(z){var Q=z==null?0:z.length;return Q?Tn(z,1,Q):[]}function vd(z,Q,me){return z&&z.length?(Q=me||Q===_?1:vr(Q),Tn(z,0,Q<0?0:Q)):[]}function gd(z,Q,me){var Ae=z==null?0:z.length;return Ae?(Q=me||Q===_?1:vr(Q),Q=Ae-Q,Tn(z,Q<0?0:Q,Ae)):[]}function yd(z,Q){return z&&z.length?sa(z,nr(Q,3),!1,!0):[]}function _d(z,Q){return z&&z.length?sa(z,nr(Q,3)):[]}var bd=br(function(z){return Jn(tn(z,1,Hr,!0))}),wd=br(function(z){var Q=kn(z);return Hr(Q)&&(Q=_),Jn(tn(z,1,Hr,!0),nr(Q,2))}),xd=br(function(z){var Q=kn(z);return Q=typeof Q=="function"?Q:_,Jn(tn(z,1,Hr,!0),_,Q)});function Sd(z){return z&&z.length?Jn(z):[]}function $d(z,Q){return z&&z.length?Jn(z,nr(Q,2)):[]}function Ed(z,Q){return Q=typeof Q=="function"?Q:_,z&&z.length?Jn(z,_,Q):[]}function gs(z){if(!(z&&z.length))return[];var Q=0;return z=Wn(z,function(me){if(Hr(me))return Q=Jr(me.length,Q),!0}),Na(Q,function(me){return Ur(z,Ba(me))})}function pc(z,Q){if(!(z&&z.length))return[];var me=gs(z);return Q==null?me:Ur(me,function(Ae){return mn(Q,_,Ae)})}var Cd=br(function(z,Q){return Hr(z)?Ai(z,Q):[]}),Td=br(function(z){return Qa(Wn(z,Hr))}),kd=br(function(z){var Q=kn(z);return Hr(Q)&&(Q=_),Qa(Wn(z,Hr),nr(Q,2))}),Bd=br(function(z){var Q=kn(z);return Q=typeof Q=="function"?Q:_,Qa(Wn(z,Hr),_,Q)}),Ad=br(gs);function Id(z,Q){return Io(z||[],Q||[],Bi)}function Nd(z,Q){return Io(z||[],Q||[],Ri)}var Rd=br(function(z){var Q=z.length,me=Q>1?z[Q-1]:_;return me=typeof me=="function"?(z.pop(),me):_,pc(z,me)});function mc(z){var Q=Ke(z);return Q.__chain__=!0,Q}function Pd(z,Q){return Q(z),z}function ma(z,Q){return Q(z)}var Vd=Un(function(z){var Q=z.length,me=Q?z[0]:0,Ae=this.__wrapped__,je=function(Xe){return La(Xe,z)};return Q>1||this.__actions__.length||!(Ae instanceof kr)||!jn(me)?this.thru(je):(Ae=Ae.slice(me,+me+(Q?1:0)),Ae.__actions__.push({func:ma,args:[je],thisArg:_}),new En(Ae,this.__chain__).thru(function(Xe){return Q&&!Xe.length&&Xe.push(_),Xe}))});function Dd(){return mc(this)}function Od(){return new En(this.value(),this.__chain__)}function Fd(){this.__values__===_&&(this.__values__=Bc(this.value()));var z=this.__index__>=this.__values__.length,Q=z?_:this.__values__[this.__index__++];return{done:z,value:Q}}function Md(){return this}function Ld(z){for(var Q,me=this;me instanceof ea;){var Ae=cc(me);Ae.__index__=0,Ae.__values__=_,Q?je.__wrapped__=Ae:Q=Ae;var je=Ae;me=me.__wrapped__}return je.__wrapped__=z,Q}function Ud(){var z=this.__wrapped__;if(z instanceof kr){var Q=z;return this.__actions__.length&&(Q=new kr(this)),Q=Q.reverse(),Q.__actions__.push({func:ma,args:[vs],thisArg:_}),new En(Q,this.__chain__)}return this.thru(vs)}function jd(){return Ao(this.__wrapped__,this.__actions__)}var qd=oa(function(z,Q,me){Pr.call(z,me)?++z[me]:Mn(z,me,1)});function zd(z,Q,me){var Ae=dr(z)?Us:Nu;return me&&cn(z,Q,me)&&(Q=_),Ae(z,nr(Q,3))}function Hd(z,Q){var me=dr(z)?Wn:fo;return me(z,nr(Q,3))}var Wd=Uo(lc),Kd=Uo(uc);function Gd(z,Q){return tn(va(z,Q),1)}function Xd(z,Q){return tn(va(z,Q),re)}function Yd(z,Q,me){return me=me===_?1:vr(me),tn(va(z,Q),me)}function vc(z,Q){var me=dr(z)?Sn:Yn;return me(z,nr(Q,3))}function gc(z,Q){var me=dr(z)?dl:uo;return me(z,nr(Q,3))}var Jd=oa(function(z,Q,me){Pr.call(z,me)?z[me].push(Q):Mn(z,me,[Q])});function Zd(z,Q,me,Ae){z=dn(z)?z:xi(z),me=me&&!Ae?vr(me):0;var je=z.length;return me<0&&(me=Jr(je+me,0)),wa(z)?me<=je&&z.indexOf(Q,me)>-1:!!je&&ui(z,Q,me)>-1}var Qd=br(function(z,Q,me){var Ae=-1,je=typeof Q=="function",Xe=dn(z)?wt(z.length):[];return Yn(z,function(nt){Xe[++Ae]=je?mn(Q,nt,me):Ii(nt,Q,me)}),Xe}),eh=oa(function(z,Q,me){Mn(z,me,Q)});function va(z,Q){var me=dr(z)?Ur:_o;return me(z,nr(Q,3))}function th(z,Q,me,Ae){return z==null?[]:(dr(Q)||(Q=Q==null?[]:[Q]),me=Ae?_:me,dr(me)||(me=me==null?[]:[me]),So(z,Q,me))}var rh=oa(function(z,Q,me){z[me?0:1].push(Q)},function(){return[[],[]]});function nh(z,Q,me){var Ae=dr(z)?Ta:Hs,je=arguments.length<3;return Ae(z,nr(Q,4),me,je,Yn)}function ih(z,Q,me){var Ae=dr(z)?hl:Hs,je=arguments.length<3;return Ae(z,nr(Q,4),me,je,uo)}function ah(z,Q){var me=dr(z)?Wn:fo;return me(z,_a(nr(Q,3)))}function sh(z){var Q=dr(z)?so:Yu;return Q(z)}function oh(z,Q,me){(me?cn(z,Q,me):Q===_)?Q=1:Q=vr(Q);var Ae=dr(z)?Tu:Ju;return Ae(z,Q)}function ch(z){var Q=dr(z)?ku:Qu;return Q(z)}function lh(z){if(z==null)return 0;if(dn(z))return wa(z)?di(z):z.length;var Q=nn(z);return Q==fe||Q==We?z.size:Wa(z).length}function uh(z,Q,me){var Ae=dr(z)?ka:ef;return me&&cn(z,Q,me)&&(Q=_),Ae(z,nr(Q,3))}var fh=br(function(z,Q){if(z==null)return[];var me=Q.length;return me>1&&cn(z,Q[0],Q[1])?Q=[]:me>2&&cn(Q[0],Q[1],Q[2])&&(Q=[Q[0]]),So(z,tn(Q,1),[])}),ga=ql||function(){return Qr.Date.now()};function hh(z,Q){if(typeof Q!="function")throw new $n(C);return z=vr(z),function(){if(--z<1)return Q.apply(this,arguments)}}function yc(z,Q,me){return Q=me?_:Q,Q=z&&Q==null?z.length:Q,Ln(z,Z,_,_,_,_,Q)}function _c(z,Q){var me;if(typeof Q!="function")throw new $n(C);return z=vr(z),function(){return--z>0&&(me=Q.apply(this,arguments)),z<=1&&(Q=_),me}}var ys=br(function(z,Q,me){var Ae=M;if(me.length){var je=Gn(me,bi(ys));Ae|=X}return Ln(z,Ae,Q,me,je)}),bc=br(function(z,Q,me){var Ae=M|L;if(me.length){var je=Gn(me,bi(bc));Ae|=X}return Ln(Q,Ae,z,me,je)});function wc(z,Q,me){Q=me?_:Q;var Ae=Ln(z,q,_,_,_,_,_,Q);return Ae.placeholder=wc.placeholder,Ae}function xc(z,Q,me){Q=me?_:Q;var Ae=Ln(z,H,_,_,_,_,_,Q);return Ae.placeholder=xc.placeholder,Ae}function Sc(z,Q,me){var Ae,je,Xe,nt,ct,pt,Bt=0,At=!1,Rt=!1,Wt=!0;if(typeof z!="function")throw new $n(C);Q=Bn(Q)||0,jr(me)&&(At=!!me.leading,Rt="maxWait"in me,Xe=Rt?Jr(Bn(me.maxWait)||0,Q):Xe,Wt="trailing"in me?!!me.trailing:Wt);function Jt(Wr){var Rn=Ae,Hn=je;return Ae=je=_,Bt=Wr,nt=z.apply(Hn,Rn),nt}function ir(Wr){return Bt=Wr,ct=Di(Sr,Q),At?Jt(Wr):nt}function yr(Wr){var Rn=Wr-pt,Hn=Wr-Bt,jc=Q-Rn;return Rt?rn(jc,Xe-Hn):jc}function ar(Wr){var Rn=Wr-pt,Hn=Wr-Bt;return pt===_||Rn>=Q||Rn<0||Rt&&Hn>=Xe}function Sr(){var Wr=ga();if(ar(Wr))return Br(Wr);ct=Di(Sr,yr(Wr))}function Br(Wr){return ct=_,Wt&&Ae?Jt(Wr):(Ae=je=_,nt)}function _n(){ct!==_&&No(ct),Bt=0,Ae=pt=je=ct=_}function ln(){return ct===_?nt:Br(ga())}function wn(){var Wr=ga(),Rn=ar(Wr);if(Ae=arguments,je=this,pt=Wr,Rn){if(ct===_)return ir(pt);if(Rt)return No(ct),ct=Di(Sr,Q),Jt(pt)}return ct===_&&(ct=Di(Sr,Q)),nt}return wn.cancel=_n,wn.flush=ln,wn}var ph=br(function(z,Q){return lo(z,1,Q)}),mh=br(function(z,Q,me){return lo(z,Bn(Q)||0,me)});function vh(z){return Ln(z,ce)}function ya(z,Q){if(typeof z!="function"||Q!=null&&typeof Q!="function")throw new $n(C);var me=function(){var Ae=arguments,je=Q?Q.apply(this,Ae):Ae[0],Xe=me.cache;if(Xe.has(je))return Xe.get(je);var nt=z.apply(this,Ae);return me.cache=Xe.set(je,nt)||Xe,nt};return me.cache=new(ya.Cache||Fn),me}ya.Cache=Fn;function _a(z){if(typeof z!="function")throw new $n(C);return function(){var Q=arguments;switch(Q.length){case 0:return!z.call(this);case 1:return!z.call(this,Q[0]);case 2:return!z.call(this,Q[0],Q[1]);case 3:return!z.call(this,Q[0],Q[1],Q[2])}return!z.apply(this,Q)}}function gh(z){return _c(2,z)}var yh=tf(function(z,Q){Q=Q.length==1&&dr(Q[0])?Ur(Q[0],vn(nr())):Ur(tn(Q,1),vn(nr()));var me=Q.length;return br(function(Ae){for(var je=-1,Xe=rn(Ae.length,me);++je<Xe;)Ae[je]=Q[je].call(this,Ae[je]);return mn(z,this,Ae)})}),_s=br(function(z,Q){var me=Gn(Q,bi(_s));return Ln(z,X,_,Q,me)}),$c=br(function(z,Q){var me=Gn(Q,bi($c));return Ln(z,J,_,Q,me)}),_h=Un(function(z,Q){return Ln(z,ae,_,_,_,Q)});function bh(z,Q){if(typeof z!="function")throw new $n(C);return Q=Q===_?Q:vr(Q),br(z,Q)}function wh(z,Q){if(typeof z!="function")throw new $n(C);return Q=Q==null?0:Jr(vr(Q),0),br(function(me){var Ae=me[Q],je=Qn(me,0,Q);return Ae&&Kn(je,Ae),mn(z,this,je)})}function xh(z,Q,me){var Ae=!0,je=!0;if(typeof z!="function")throw new $n(C);return jr(me)&&(Ae="leading"in me?!!me.leading:Ae,je="trailing"in me?!!me.trailing:je),Sc(z,Q,{leading:Ae,maxWait:Q,trailing:je})}function Sh(z){return yc(z,1)}function $h(z,Q){return _s(ts(Q),z)}function Eh(){if(!arguments.length)return[];var z=arguments[0];return dr(z)?z:[z]}function Ch(z){return Cn(z,D)}function Th(z,Q){return Q=typeof Q=="function"?Q:_,Cn(z,D,Q)}function kh(z){return Cn(z,N|D)}function Bh(z,Q){return Q=typeof Q=="function"?Q:_,Cn(z,N|D,Q)}function Ah(z,Q){return Q==null||co(z,Q,Zr(Q))}function Nn(z,Q){return z===Q||z!==z&&Q!==Q}var Ih=fa(qa),Nh=fa(function(z,Q){return z>=Q}),li=mo(function(){return arguments}())?mo:function(z){return qr(z)&&Pr.call(z,"callee")&&!eo.call(z,"callee")},dr=wt.isArray,Rh=Vs?vn(Vs):Fu;function dn(z){return z!=null&&ba(z.length)&&!qn(z)}function Hr(z){return qr(z)&&dn(z)}function Ph(z){return z===!0||z===!1||qr(z)&&sn(z)==Ee}var ei=Hl||As,Vh=Ds?vn(Ds):Mu;function Dh(z){return qr(z)&&z.nodeType===1&&!Oi(z)}function Oh(z){if(z==null)return!0;if(dn(z)&&(dr(z)||typeof z=="string"||typeof z.splice=="function"||ei(z)||wi(z)||li(z)))return!z.length;var Q=nn(z);if(Q==fe||Q==We)return!z.size;if(Vi(z))return!Wa(z).length;for(var me in z)if(Pr.call(z,me))return!1;return!0}function Fh(z,Q){return Ni(z,Q)}function Mh(z,Q,me){me=typeof me=="function"?me:_;var Ae=me?me(z,Q):_;return Ae===_?Ni(z,Q,_,me):!!Ae}function bs(z){if(!qr(z))return!1;var Q=sn(z);return Q==Te||Q==Ne||typeof z.message=="string"&&typeof z.name=="string"&&!Oi(z)}function Lh(z){return typeof z=="number"&&ro(z)}function qn(z){if(!jr(z))return!1;var Q=sn(z);return Q==he||Q==xe||Q==ye||Q==Me}function Ec(z){return typeof z=="number"&&z==vr(z)}function ba(z){return typeof z=="number"&&z>-1&&z%1==0&&z<=oe}function jr(z){var Q=typeof z;return z!=null&&(Q=="object"||Q=="function")}function qr(z){return z!=null&&typeof z=="object"}var Cc=Os?vn(Os):Uu;function Uh(z,Q){return z===Q||Ha(z,Q,ls(Q))}function jh(z,Q,me){return me=typeof me=="function"?me:_,Ha(z,Q,ls(Q),me)}function qh(z){return Tc(z)&&z!=+z}function zh(z){if(Ef(z))throw new ur(E);return vo(z)}function Hh(z){return z===null}function Wh(z){return z==null}function Tc(z){return typeof z=="number"||qr(z)&&sn(z)==Be}function Oi(z){if(!qr(z)||sn(z)!=Ve)return!1;var Q=Ki(z);if(Q===null)return!0;var me=Pr.call(Q,"constructor")&&Q.constructor;return typeof me=="function"&&me instanceof me&&qi.call(me)==Ml}var ws=Fs?vn(Fs):ju;function Kh(z){return Ec(z)&&z>=-oe&&z<=oe}var kc=Ms?vn(Ms):qu;function wa(z){return typeof z=="string"||!dr(z)&&qr(z)&&sn(z)==Ue}function yn(z){return typeof z=="symbol"||qr(z)&&sn(z)==Ge}var wi=Ls?vn(Ls):zu;function Gh(z){return z===_}function Xh(z){return qr(z)&&nn(z)==ot}function Yh(z){return qr(z)&&sn(z)==ht}var Jh=fa(Ka),Zh=fa(function(z,Q){return z<=Q});function Bc(z){if(!z)return[];if(dn(z))return wa(z)?An(z):fn(z);if($i&&z[$i])return Cl(z[$i]());var Q=nn(z),me=Q==fe?Pa:Q==We?Li:xi;return me(z)}function zn(z){if(!z)return z===0?z:0;if(z=Bn(z),z===re||z===-re){var Q=z<0?-1:1;return Q*ie}return z===z?z:0}function vr(z){var Q=zn(z),me=Q%1;return Q===Q?me?Q-me:Q:0}function Ac(z){return z?ai(vr(z),0,te):0}function Bn(z){if(typeof z=="number")return z;if(yn(z))return ne;if(jr(z)){var Q=typeof z.valueOf=="function"?z.valueOf():z;z=jr(Q)?Q+"":Q}if(typeof z!="string")return z===0?z:+z;z=Ws(z);var me=tt.test(z);return me||it.test(z)?ll(z.slice(2),me?2:8):Je.test(z)?ne:+z}function Ic(z){return Vn(z,hn(z))}function Qh(z){return z?ai(vr(z),-oe,oe):z===0?z:0}function Nr(z){return z==null?"":gn(z)}var e0=yi(function(z,Q){if(Vi(Q)||dn(Q)){Vn(Q,Zr(Q),z);return}for(var me in Q)Pr.call(Q,me)&&Bi(z,me,Q[me])}),Nc=yi(function(z,Q){Vn(Q,hn(Q),z)}),xa=yi(function(z,Q,me,Ae){Vn(Q,hn(Q),z,Ae)}),t0=yi(function(z,Q,me,Ae){Vn(Q,Zr(Q),z,Ae)}),r0=Un(La);function n0(z,Q){var me=gi(z);return Q==null?me:oo(me,Q)}var i0=br(function(z,Q){z=Vr(z);var me=-1,Ae=Q.length,je=Ae>2?Q[2]:_;for(je&&cn(Q[0],Q[1],je)&&(Ae=1);++me<Ae;)for(var Xe=Q[me],nt=hn(Xe),ct=-1,pt=nt.length;++ct<pt;){var Bt=nt[ct],At=z[Bt];(At===_||Nn(At,pi[Bt])&&!Pr.call(z,Bt))&&(z[Bt]=Xe[Bt])}return z}),a0=br(function(z){return z.push(_,Go),mn(Rc,_,z)});function s0(z,Q){return js(z,nr(Q,3),Pn)}function o0(z,Q){return js(z,nr(Q,3),ja)}function c0(z,Q){return z==null?z:Ua(z,nr(Q,3),hn)}function l0(z,Q){return z==null?z:ho(z,nr(Q,3),hn)}function u0(z,Q){return z&&Pn(z,nr(Q,3))}function f0(z,Q){return z&&ja(z,nr(Q,3))}function d0(z){return z==null?[]:na(z,Zr(z))}function h0(z){return z==null?[]:na(z,hn(z))}function xs(z,Q,me){var Ae=z==null?_:si(z,Q);return Ae===_?me:Ae}function p0(z,Q){return z!=null&&Jo(z,Q,Pu)}function Ss(z,Q){return z!=null&&Jo(z,Q,Vu)}var m0=qo(function(z,Q,me){Q!=null&&typeof Q.toString!="function"&&(Q=zi.call(Q)),z[Q]=me},Es(pn)),v0=qo(function(z,Q,me){Q!=null&&typeof Q.toString!="function"&&(Q=zi.call(Q)),Pr.call(z,Q)?z[Q].push(me):z[Q]=[me]},nr),g0=br(Ii);function Zr(z){return dn(z)?ao(z):Wa(z)}function hn(z){return dn(z)?ao(z,!0):Hu(z)}function y0(z,Q){var me={};return Q=nr(Q,3),Pn(z,function(Ae,je,Xe){Mn(me,Q(Ae,je,Xe),Ae)}),me}function _0(z,Q){var me={};return Q=nr(Q,3),Pn(z,function(Ae,je,Xe){Mn(me,je,Q(Ae,je,Xe))}),me}var b0=yi(function(z,Q,me){ia(z,Q,me)}),Rc=yi(function(z,Q,me,Ae){ia(z,Q,me,Ae)}),w0=Un(function(z,Q){var me={};if(z==null)return me;var Ae=!1;Q=Ur(Q,function(Xe){return Xe=Zn(Xe,z),Ae||(Ae=Xe.length>1),Xe}),Vn(z,os(z),me),Ae&&(me=Cn(me,N|V|D,hf));for(var je=Q.length;je--;)Za(me,Q[je]);return me});function x0(z,Q){return Pc(z,_a(nr(Q)))}var S0=Un(function(z,Q){return z==null?{}:Ku(z,Q)});function Pc(z,Q){if(z==null)return{};var me=Ur(os(z),function(Ae){return[Ae]});return Q=nr(Q),$o(z,me,function(Ae,je){return Q(Ae,je[0])})}function $0(z,Q,me){Q=Zn(Q,z);var Ae=-1,je=Q.length;for(je||(je=1,z=_);++Ae<je;){var Xe=z==null?_:z[Dn(Q[Ae])];Xe===_&&(Ae=je,Xe=me),z=qn(Xe)?Xe.call(z):Xe}return z}function E0(z,Q,me){return z==null?z:Ri(z,Q,me)}function C0(z,Q,me,Ae){return Ae=typeof Ae=="function"?Ae:_,z==null?z:Ri(z,Q,me,Ae)}var Vc=Wo(Zr),Dc=Wo(hn);function T0(z,Q,me){var Ae=dr(z),je=Ae||ei(z)||wi(z);if(Q=nr(Q,4),me==null){var Xe=z&&z.constructor;je?me=Ae?new Xe:[]:jr(z)?me=qn(Xe)?gi(Ki(z)):{}:me={}}return(je?Sn:Pn)(z,function(nt,ct,pt){return Q(me,nt,ct,pt)}),me}function k0(z,Q){return z==null?!0:Za(z,Q)}function B0(z,Q,me){return z==null?z:Bo(z,Q,ts(me))}function A0(z,Q,me,Ae){return Ae=typeof Ae=="function"?Ae:_,z==null?z:Bo(z,Q,ts(me),Ae)}function xi(z){return z==null?[]:Ra(z,Zr(z))}function I0(z){return z==null?[]:Ra(z,hn(z))}function N0(z,Q,me){return me===_&&(me=Q,Q=_),me!==_&&(me=Bn(me),me=me===me?me:0),Q!==_&&(Q=Bn(Q),Q=Q===Q?Q:0),ai(Bn(z),Q,me)}function R0(z,Q,me){return Q=zn(Q),me===_?(me=Q,Q=0):me=zn(me),z=Bn(z),Du(z,Q,me)}function P0(z,Q,me){if(me&&typeof me!="boolean"&&cn(z,Q,me)&&(Q=me=_),me===_&&(typeof Q=="boolean"?(me=Q,Q=_):typeof z=="boolean"&&(me=z,z=_)),z===_&&Q===_?(z=0,Q=1):(z=zn(z),Q===_?(Q=z,z=0):Q=zn(Q)),z>Q){var Ae=z;z=Q,Q=Ae}if(me||z%1||Q%1){var je=no();return rn(z+je*(Q-z+cl("1e-"+((je+"").length-1))),Q)}return Xa(z,Q)}var V0=_i(function(z,Q,me){return Q=Q.toLowerCase(),z+(me?Oc(Q):Q)});function Oc(z){return $s(Nr(z).toLowerCase())}function Fc(z){return z=Nr(z),z&&z.replace(vt,wl).replace(Jc,"")}function D0(z,Q,me){z=Nr(z),Q=gn(Q);var Ae=z.length;me=me===_?Ae:ai(vr(me),0,Ae);var je=me;return me-=Q.length,me>=0&&z.slice(me,je)==Q}function O0(z){return z=Nr(z),z&&Xt.test(z)?z.replace(zt,xl):z}function F0(z){return z=Nr(z),z&&wr.test(z)?z.replace(Ut,"\\$&"):z}var M0=_i(function(z,Q,me){return z+(me?"-":"")+Q.toLowerCase()}),L0=_i(function(z,Q,me){return z+(me?" ":"")+Q.toLowerCase()}),U0=Lo("toLowerCase");function j0(z,Q,me){z=Nr(z),Q=vr(Q);var Ae=Q?di(z):0;if(!Q||Ae>=Q)return z;var je=(Q-Ae)/2;return ua(Ji(je),me)+z+ua(Yi(je),me)}function q0(z,Q,me){z=Nr(z),Q=vr(Q);var Ae=Q?di(z):0;return Q&&Ae<Q?z+ua(Q-Ae,me):z}function z0(z,Q,me){z=Nr(z),Q=vr(Q);var Ae=Q?di(z):0;return Q&&Ae<Q?ua(Q-Ae,me)+z:z}function H0(z,Q,me){return me||Q==null?Q=0:Q&&(Q=+Q),Xl(Nr(z).replace(De,""),Q||0)}function W0(z,Q,me){return(me?cn(z,Q,me):Q===_)?Q=1:Q=vr(Q),Ya(Nr(z),Q)}function K0(){var z=arguments,Q=Nr(z[0]);return z.length<3?Q:Q.replace(z[1],z[2])}var G0=_i(function(z,Q,me){return z+(me?"_":"")+Q.toLowerCase()});function X0(z,Q,me){return me&&typeof me!="number"&&cn(z,Q,me)&&(Q=me=_),me=me===_?te:me>>>0,me?(z=Nr(z),z&&(typeof Q=="string"||Q!=null&&!ws(Q))&&(Q=gn(Q),!Q&&fi(z))?Qn(An(z),0,me):z.split(Q,me)):[]}var Y0=_i(function(z,Q,me){return z+(me?" ":"")+$s(Q)});function J0(z,Q,me){return z=Nr(z),me=me==null?0:ai(vr(me),0,z.length),Q=gn(Q),z.slice(me,me+Q.length)==Q}function Z0(z,Q,me){var Ae=Ke.templateSettings;me&&cn(z,Q,me)&&(Q=_),z=Nr(z),Q=xa({},Q,Ae,Ko);var je=xa({},Q.imports,Ae.imports,Ko),Xe=Zr(je),nt=Ra(je,Xe),ct,pt,Bt=0,At=Q.interpolate||bt,Rt="__p += '",Wt=Va((Q.escape||bt).source+"|"+At.source+"|"+(At===Qt?qe:bt).source+"|"+(Q.evaluate||bt).source+"|$","g"),Jt="//# sourceURL="+(Pr.call(Q,"sourceURL")?(Q.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rl+"]")+`
`;z.replace(Wt,function(ar,Sr,Br,_n,ln,wn){return Br||(Br=_n),Rt+=z.slice(Bt,wn).replace(dt,Sl),Sr&&(ct=!0,Rt+=`' +
__e(`+Sr+`) +
'`),ln&&(pt=!0,Rt+=`';
`+ln+`;
__p += '`),Br&&(Rt+=`' +
((__t = (`+Br+`)) == null ? '' : __t) +
'`),Bt=wn+ar.length,ar}),Rt+=`';
`;var ir=Pr.call(Q,"variable")&&Q.variable;if(!ir)Rt=`with (obj) {
`+Rt+`
}
`;else if(Pe.test(ir))throw new ur(T);Rt=(pt?Rt.replace(Lt,""):Rt).replace(qt,"$1").replace(_r,"$1;"),Rt="function("+(ir||"obj")+`) {
`+(ir?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ct?", __e = _.escape":"")+(pt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Rt+`return __p
}`;var yr=Lc(function(){return Ir(Xe,Jt+"return "+Rt).apply(_,nt)});if(yr.source=Rt,bs(yr))throw yr;return yr}function Q0(z){return Nr(z).toLowerCase()}function ep(z){return Nr(z).toUpperCase()}function tp(z,Q,me){if(z=Nr(z),z&&(me||Q===_))return Ws(z);if(!z||!(Q=gn(Q)))return z;var Ae=An(z),je=An(Q),Xe=Ks(Ae,je),nt=Gs(Ae,je)+1;return Qn(Ae,Xe,nt).join("")}function rp(z,Q,me){if(z=Nr(z),z&&(me||Q===_))return z.slice(0,Ys(z)+1);if(!z||!(Q=gn(Q)))return z;var Ae=An(z),je=Gs(Ae,An(Q))+1;return Qn(Ae,0,je).join("")}function np(z,Q,me){if(z=Nr(z),z&&(me||Q===_))return z.replace(De,"");if(!z||!(Q=gn(Q)))return z;var Ae=An(z),je=Ks(Ae,An(Q));return Qn(Ae,je).join("")}function ip(z,Q){var me=ve,Ae=pe;if(jr(Q)){var je="separator"in Q?Q.separator:je;me="length"in Q?vr(Q.length):me,Ae="omission"in Q?gn(Q.omission):Ae}z=Nr(z);var Xe=z.length;if(fi(z)){var nt=An(z);Xe=nt.length}if(me>=Xe)return z;var ct=me-di(Ae);if(ct<1)return Ae;var pt=nt?Qn(nt,0,ct).join(""):z.slice(0,ct);if(je===_)return pt+Ae;if(nt&&(ct+=pt.length-ct),ws(je)){if(z.slice(ct).search(je)){var Bt,At=pt;for(je.global||(je=Va(je.source,Nr(Ye.exec(je))+"g")),je.lastIndex=0;Bt=je.exec(At);)var Rt=Bt.index;pt=pt.slice(0,Rt===_?ct:Rt)}}else if(z.indexOf(gn(je),ct)!=ct){var Wt=pt.lastIndexOf(je);Wt>-1&&(pt=pt.slice(0,Wt))}return pt+Ae}function ap(z){return z=Nr(z),z&&hr.test(z)?z.replace(Zt,Il):z}var sp=_i(function(z,Q,me){return z+(me?" ":"")+Q.toUpperCase()}),$s=Lo("toUpperCase");function Mc(z,Q,me){return z=Nr(z),Q=me?_:Q,Q===_?El(z)?Pl(z):vl(z):z.match(Q)||[]}var Lc=br(function(z,Q){try{return mn(z,_,Q)}catch(me){return bs(me)?me:new ur(me)}}),op=Un(function(z,Q){return Sn(Q,function(me){me=Dn(me),Mn(z,me,ys(z[me],z))}),z});function cp(z){var Q=z==null?0:z.length,me=nr();return z=Q?Ur(z,function(Ae){if(typeof Ae[1]!="function")throw new $n(C);return[me(Ae[0]),Ae[1]]}):[],br(function(Ae){for(var je=-1;++je<Q;){var Xe=z[je];if(mn(Xe[0],this,Ae))return mn(Xe[1],this,Ae)}})}function lp(z){return Iu(Cn(z,N))}function Es(z){return function(){return z}}function up(z,Q){return z==null||z!==z?Q:z}var fp=jo(),dp=jo(!0);function pn(z){return z}function Cs(z){return go(typeof z=="function"?z:Cn(z,N))}function hp(z){return bo(Cn(z,N))}function pp(z,Q){return wo(z,Cn(Q,N))}var mp=br(function(z,Q){return function(me){return Ii(me,z,Q)}}),vp=br(function(z,Q){return function(me){return Ii(z,me,Q)}});function Ts(z,Q,me){var Ae=Zr(Q),je=na(Q,Ae);me==null&&!(jr(Q)&&(je.length||!Ae.length))&&(me=Q,Q=z,z=this,je=na(Q,Zr(Q)));var Xe=!(jr(me)&&"chain"in me)||!!me.chain,nt=qn(z);return Sn(je,function(ct){var pt=Q[ct];z[ct]=pt,nt&&(z.prototype[ct]=function(){var Bt=this.__chain__;if(Xe||Bt){var At=z(this.__wrapped__),Rt=At.__actions__=fn(this.__actions__);return Rt.push({func:pt,args:arguments,thisArg:z}),At.__chain__=Bt,At}return pt.apply(z,Kn([this.value()],arguments))})}),z}function gp(){return Qr._===this&&(Qr._=Ll),this}function ks(){}function yp(z){return z=vr(z),br(function(Q){return xo(Q,z)})}var _p=ns(Ur),bp=ns(Us),wp=ns(ka);function Uc(z){return fs(z)?Ba(Dn(z)):Gu(z)}function xp(z){return function(Q){return z==null?_:si(z,Q)}}var Sp=zo(),$p=zo(!0);function Bs(){return[]}function As(){return!1}function Ep(){return{}}function Cp(){return""}function Tp(){return!0}function kp(z,Q){if(z=vr(z),z<1||z>oe)return[];var me=te,Ae=rn(z,te);Q=nr(Q),z-=te;for(var je=Na(Ae,Q);++me<z;)Q(me);return je}function Bp(z){return dr(z)?Ur(z,Dn):yn(z)?[z]:fn(oc(Nr(z)))}function Ap(z){var Q=++Fl;return Nr(z)+Q}var Ip=la(function(z,Q){return z+Q},0),Np=as("ceil"),Rp=la(function(z,Q){return z/Q},1),Pp=as("floor");function Vp(z){return z&&z.length?ra(z,pn,qa):_}function Dp(z,Q){return z&&z.length?ra(z,nr(Q,2),qa):_}function Mp(z){return zs(z,pn)}function Lp(z,Q){return zs(z,nr(Q,2))}function Up(z){return z&&z.length?ra(z,pn,Ka):_}function jp(z,Q){return z&&z.length?ra(z,nr(Q,2),Ka):_}var qp=la(function(z,Q){return z*Q},1),zp=as("round"),Hp=la(function(z,Q){return z-Q},0);function Wp(z){return z&&z.length?Ia(z,pn):0}function Kp(z,Q){return z&&z.length?Ia(z,nr(Q,2)):0}return Ke.after=hh,Ke.ary=yc,Ke.assign=e0,Ke.assignIn=Nc,Ke.assignInWith=xa,Ke.assignWith=t0,Ke.at=r0,Ke.before=_c,Ke.bind=ys,Ke.bindAll=op,Ke.bindKey=bc,Ke.castArray=Eh,Ke.chain=mc,Ke.chunk=Nf,Ke.compact=Rf,Ke.concat=Pf,Ke.cond=cp,Ke.conforms=lp,Ke.constant=Es,Ke.countBy=qd,Ke.create=n0,Ke.curry=wc,Ke.curryRight=xc,Ke.debounce=Sc,Ke.defaults=i0,Ke.defaultsDeep=a0,Ke.defer=ph,Ke.delay=mh,Ke.difference=Vf,Ke.differenceBy=Df,Ke.differenceWith=Of,Ke.drop=Ff,Ke.dropRight=Mf,Ke.dropRightWhile=Lf,Ke.dropWhile=Uf,Ke.fill=jf,Ke.filter=Hd,Ke.flatMap=Gd,Ke.flatMapDeep=Xd,Ke.flatMapDepth=Yd,Ke.flatten=fc,Ke.flattenDeep=qf,Ke.flattenDepth=zf,Ke.flip=vh,Ke.flow=fp,Ke.flowRight=dp,Ke.fromPairs=Hf,Ke.functions=d0,Ke.functionsIn=h0,Ke.groupBy=Jd,Ke.initial=Kf,Ke.intersection=Gf,Ke.intersectionBy=Xf,Ke.intersectionWith=Yf,Ke.invert=m0,Ke.invertBy=v0,Ke.invokeMap=Qd,Ke.iteratee=Cs,Ke.keyBy=eh,Ke.keys=Zr,Ke.keysIn=hn,Ke.map=va,Ke.mapKeys=y0,Ke.mapValues=_0,Ke.matches=hp,Ke.matchesProperty=pp,Ke.memoize=ya,Ke.merge=b0,Ke.mergeWith=Rc,Ke.method=mp,Ke.methodOf=vp,Ke.mixin=Ts,Ke.negate=_a,Ke.nthArg=yp,Ke.omit=w0,Ke.omitBy=x0,Ke.once=gh,Ke.orderBy=th,Ke.over=_p,Ke.overArgs=yh,Ke.overEvery=bp,Ke.overSome=wp,Ke.partial=_s,Ke.partialRight=$c,Ke.partition=rh,Ke.pick=S0,Ke.pickBy=Pc,Ke.property=Uc,Ke.propertyOf=xp,Ke.pull=ed,Ke.pullAll=hc,Ke.pullAllBy=td,Ke.pullAllWith=rd,Ke.pullAt=nd,Ke.range=Sp,Ke.rangeRight=$p,Ke.rearg=_h,Ke.reject=ah,Ke.remove=ad,Ke.rest=bh,Ke.reverse=vs,Ke.sampleSize=oh,Ke.set=E0,Ke.setWith=C0,Ke.shuffle=ch,Ke.slice=sd,Ke.sortBy=fh,Ke.sortedUniq=hd,Ke.sortedUniqBy=pd,Ke.split=X0,Ke.spread=wh,Ke.tail=md,Ke.take=vd,Ke.takeRight=gd,Ke.takeRightWhile=yd,Ke.takeWhile=_d,Ke.tap=Pd,Ke.throttle=xh,Ke.thru=ma,Ke.toArray=Bc,Ke.toPairs=Vc,Ke.toPairsIn=Dc,Ke.toPath=Bp,Ke.toPlainObject=Ic,Ke.transform=T0,Ke.unary=Sh,Ke.union=bd,Ke.unionBy=wd,Ke.unionWith=xd,Ke.uniq=Sd,Ke.uniqBy=$d,Ke.uniqWith=Ed,Ke.unset=k0,Ke.unzip=gs,Ke.unzipWith=pc,Ke.update=B0,Ke.updateWith=A0,Ke.values=xi,Ke.valuesIn=I0,Ke.without=Cd,Ke.words=Mc,Ke.wrap=$h,Ke.xor=Td,Ke.xorBy=kd,Ke.xorWith=Bd,Ke.zip=Ad,Ke.zipObject=Id,Ke.zipObjectDeep=Nd,Ke.zipWith=Rd,Ke.entries=Vc,Ke.entriesIn=Dc,Ke.extend=Nc,Ke.extendWith=xa,Ts(Ke,Ke),Ke.add=Ip,Ke.attempt=Lc,Ke.camelCase=V0,Ke.capitalize=Oc,Ke.ceil=Np,Ke.clamp=N0,Ke.clone=Ch,Ke.cloneDeep=kh,Ke.cloneDeepWith=Bh,Ke.cloneWith=Th,Ke.conformsTo=Ah,Ke.deburr=Fc,Ke.defaultTo=up,Ke.divide=Rp,Ke.endsWith=D0,Ke.eq=Nn,Ke.escape=O0,Ke.escapeRegExp=F0,Ke.every=zd,Ke.find=Wd,Ke.findIndex=lc,Ke.findKey=s0,Ke.findLast=Kd,Ke.findLastIndex=uc,Ke.findLastKey=o0,Ke.floor=Pp,Ke.forEach=vc,Ke.forEachRight=gc,Ke.forIn=c0,Ke.forInRight=l0,Ke.forOwn=u0,Ke.forOwnRight=f0,Ke.get=xs,Ke.gt=Ih,Ke.gte=Nh,Ke.has=p0,Ke.hasIn=Ss,Ke.head=dc,Ke.identity=pn,Ke.includes=Zd,Ke.indexOf=Wf,Ke.inRange=R0,Ke.invoke=g0,Ke.isArguments=li,Ke.isArray=dr,Ke.isArrayBuffer=Rh,Ke.isArrayLike=dn,Ke.isArrayLikeObject=Hr,Ke.isBoolean=Ph,Ke.isBuffer=ei,Ke.isDate=Vh,Ke.isElement=Dh,Ke.isEmpty=Oh,Ke.isEqual=Fh,Ke.isEqualWith=Mh,Ke.isError=bs,Ke.isFinite=Lh,Ke.isFunction=qn,Ke.isInteger=Ec,Ke.isLength=ba,Ke.isMap=Cc,Ke.isMatch=Uh,Ke.isMatchWith=jh,Ke.isNaN=qh,Ke.isNative=zh,Ke.isNil=Wh,Ke.isNull=Hh,Ke.isNumber=Tc,Ke.isObject=jr,Ke.isObjectLike=qr,Ke.isPlainObject=Oi,Ke.isRegExp=ws,Ke.isSafeInteger=Kh,Ke.isSet=kc,Ke.isString=wa,Ke.isSymbol=yn,Ke.isTypedArray=wi,Ke.isUndefined=Gh,Ke.isWeakMap=Xh,Ke.isWeakSet=Yh,Ke.join=Jf,Ke.kebabCase=M0,Ke.last=kn,Ke.lastIndexOf=Zf,Ke.lowerCase=L0,Ke.lowerFirst=U0,Ke.lt=Jh,Ke.lte=Zh,Ke.max=Vp,Ke.maxBy=Dp,Ke.mean=Mp,Ke.meanBy=Lp,Ke.min=Up,Ke.minBy=jp,Ke.stubArray=Bs,Ke.stubFalse=As,Ke.stubObject=Ep,Ke.stubString=Cp,Ke.stubTrue=Tp,Ke.multiply=qp,Ke.nth=Qf,Ke.noConflict=gp,Ke.noop=ks,Ke.now=ga,Ke.pad=j0,Ke.padEnd=q0,Ke.padStart=z0,Ke.parseInt=H0,Ke.random=P0,Ke.reduce=nh,Ke.reduceRight=ih,Ke.repeat=W0,Ke.replace=K0,Ke.result=$0,Ke.round=zp,Ke.runInContext=ft,Ke.sample=sh,Ke.size=lh,Ke.snakeCase=G0,Ke.some=uh,Ke.sortedIndex=od,Ke.sortedIndexBy=cd,Ke.sortedIndexOf=ld,Ke.sortedLastIndex=ud,Ke.sortedLastIndexBy=fd,Ke.sortedLastIndexOf=dd,Ke.startCase=Y0,Ke.startsWith=J0,Ke.subtract=Hp,Ke.sum=Wp,Ke.sumBy=Kp,Ke.template=Z0,Ke.times=kp,Ke.toFinite=zn,Ke.toInteger=vr,Ke.toLength=Ac,Ke.toLower=Q0,Ke.toNumber=Bn,Ke.toSafeInteger=Qh,Ke.toString=Nr,Ke.toUpper=ep,Ke.trim=tp,Ke.trimEnd=rp,Ke.trimStart=np,Ke.truncate=ip,Ke.unescape=ap,Ke.uniqueId=Ap,Ke.upperCase=sp,Ke.upperFirst=$s,Ke.each=vc,Ke.eachRight=gc,Ke.first=dc,Ts(Ke,function(){var z={};return Pn(Ke,function(Q,me){Pr.call(Ke.prototype,me)||(z[me]=Q)}),z}(),{chain:!1}),Ke.VERSION=x,Sn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(z){Ke[z].placeholder=Ke}),Sn(["drop","take"],function(z,Q){kr.prototype[z]=function(me){me=me===_?1:Jr(vr(me),0);var Ae=this.__filtered__&&!Q?new kr(this):this.clone();return Ae.__filtered__?Ae.__takeCount__=rn(me,Ae.__takeCount__):Ae.__views__.push({size:rn(me,te),type:z+(Ae.__dir__<0?"Right":"")}),Ae},kr.prototype[z+"Right"]=function(me){return this.reverse()[z](me).reverse()}}),Sn(["filter","map","takeWhile"],function(z,Q){var me=Q+1,Ae=me==U||me==ee;kr.prototype[z]=function(je){var Xe=this.clone();return Xe.__iteratees__.push({iteratee:nr(je,3),type:me}),Xe.__filtered__=Xe.__filtered__||Ae,Xe}}),Sn(["head","last"],function(z,Q){var me="take"+(Q?"Right":"");kr.prototype[z]=function(){return this[me](1).value()[0]}}),Sn(["initial","tail"],function(z,Q){var me="drop"+(Q?"":"Right");kr.prototype[z]=function(){return this.__filtered__?new kr(this):this[me](1)}}),kr.prototype.compact=function(){return this.filter(pn)},kr.prototype.find=function(z){return this.filter(z).head()},kr.prototype.findLast=function(z){return this.reverse().find(z)},kr.prototype.invokeMap=br(function(z,Q){return typeof z=="function"?new kr(this):this.map(function(me){return Ii(me,z,Q)})}),kr.prototype.reject=function(z){return this.filter(_a(nr(z)))},kr.prototype.slice=function(z,Q){z=vr(z);var me=this;return me.__filtered__&&(z>0||Q<0)?new kr(me):(z<0?me=me.takeRight(-z):z&&(me=me.drop(z)),Q!==_&&(Q=vr(Q),me=Q<0?me.dropRight(-Q):me.take(Q-z)),me)},kr.prototype.takeRightWhile=function(z){return this.reverse().takeWhile(z).reverse()},kr.prototype.toArray=function(){return this.take(te)},Pn(kr.prototype,function(z,Q){var me=/^(?:filter|find|map|reject)|While$/.test(Q),Ae=/^(?:head|last)$/.test(Q),je=Ke[Ae?"take"+(Q=="last"?"Right":""):Q],Xe=Ae||/^find/.test(Q);je&&(Ke.prototype[Q]=function(){var nt=this.__wrapped__,ct=Ae?[1]:arguments,pt=nt instanceof kr,Bt=ct[0],At=pt||dr(nt),Rt=function(Sr){var Br=je.apply(Ke,Kn([Sr],ct));return Ae&&Wt?Br[0]:Br};At&&me&&typeof Bt=="function"&&Bt.length!=1&&(pt=At=!1);var Wt=this.__chain__,Jt=!!this.__actions__.length,ir=Xe&&!Wt,yr=pt&&!Jt;if(!Xe&&At){nt=yr?nt:new kr(this);var ar=z.apply(nt,ct);return ar.__actions__.push({func:ma,args:[Rt],thisArg:_}),new En(ar,Wt)}return ir&&yr?z.apply(this,ct):(ar=this.thru(Rt),ir?Ae?ar.value()[0]:ar.value():ar)})}),Sn(["pop","push","shift","sort","splice","unshift"],function(z){var Q=Ui[z],me=/^(?:push|sort|unshift)$/.test(z)?"tap":"thru",Ae=/^(?:pop|shift)$/.test(z);Ke.prototype[z]=function(){var je=arguments;if(Ae&&!this.__chain__){var Xe=this.value();return Q.apply(dr(Xe)?Xe:[],je)}return this[me](function(nt){return Q.apply(dr(nt)?nt:[],je)})}}),Pn(kr.prototype,function(z,Q){var me=Ke[Q];if(me){var Ae=me.name+"";Pr.call(vi,Ae)||(vi[Ae]=[]),vi[Ae].push({name:Q,func:me})}}),vi[ca(_,L).name]=[{name:"wrapper",func:_}],kr.prototype.clone=ru,kr.prototype.reverse=nu,kr.prototype.value=iu,Ke.prototype.at=Vd,Ke.prototype.chain=Dd,Ke.prototype.commit=Od,Ke.prototype.next=Fd,Ke.prototype.plant=Ld,Ke.prototype.reverse=Ud,Ke.prototype.toJSON=Ke.prototype.valueOf=Ke.prototype.value=jd,Ke.prototype.first=Ke.prototype.head,$i&&(Ke.prototype[$i]=Md),Ke},hi=Vl();ti?((ti.exports=hi)._=hi,$a._=hi):Qr._=hi}).call(commonjsGlobal)})(lodash,lodash.exports);var lodashExports=lodash.exports;const __="",__="",___="_",___="_",___="_",__="",_="/orbitdb/zdpuAt9PVUHGEyrL43tWDmpBUrgoPPWZHX7AGXWk4ZhEZ1oik/841abe65-93f5-4539-b721-2f8085a18cc5",__="/orbitdb/zdpuAt9PVUHGEyrL43tWDmpBUrgoPPWZHX7AGXWk4ZhEZ1oik/841abe65-93f5-4539-b721-2f8085a18cc5",___="/orbitdb/zdpuAtmGaeNicerk2ByPa4oQMtSPgdNovQp6ZC6c2fJqF64Sb/6462ccb9-25ca-44e5-b81a-ea6d5df09709",___="/orbitdb/zdpuAyBg5f4Lxabv7YHVrxpNbBQW6dzxwH6wfQVMKZjECnkry/f536d48e-e040-48bf-9efb-539321804f4f",__="/orbitdb/zdpuAnEhqhCW51yfohfHWzjLgDPyuY2ySVmTBW7upAidVbwnX/954f02c8-e2ea-433b-89e2-6e670fd8873b",___="/orbitdb/zdpuAoNDXakfzK2DxJAozuR2V9TYha5bvzjQHN5VnAm4jvL6S/736889ad-a29b-4e6f-94fa-a78f8e92978d",___="/orbitdb/zdpuAsViPqnpRhUwN6kL7cSyLFaxSEkK233cJAChJMtc2vwLT/fe6ab45c-dd39-4ca9-a695-f151d922704f",__={motsClefs:[___,___],licence:"ODbl-1_0",tableaux:[{clef:__,cols:[{idVariable:__,idColonne:__},{idVariable:___,idColonne:___},{idVariable:___,idColonne:___},{idVariable:___,idColonne:___},{idVariable:__,idColonne:__},{idVariable:__,idColonne:__}]}]},___=r=>({:r.donnes[__],:r.donnes[__]?new Date(r.donnes[__]):void 0,:r.donnes[__],:r.donnes[__],_:r.donnes[___],_:r.donnes[___],_:r.donnes[___],:r.id}),___=r=>({:r.,:r.,:{:r.[__],:r.[__]?new Date(r.[__]):void 0,:r.[__],_:r.[___],_:r.[___],_:r.[___]}}),__=r=>{const n=new Set(r.map(x=>x.)),_={};for(const x of n){_[x]||(_[x]={});const S=r.filter(E=>E.===x);for(const E of S)_[x][E._]=E.}return _},_=(...r)=>{const n={};for(const _ of r)for(const x of Object.keys(_)){n[x]||(n[x]={});for(const[S,E]of Object.entries(_[x]))n[x][S]=E}return n},__=r=>{const n={};for(const _ in r){const x=_.split(".");for(const S of Object.keys(r[_])){n[S]||(n[S]={});let E=n[S];for(const[C,T]of x.entries())C===x.length-1?E[T]=r[_][S]:((E[T]===void 0||typeof E[T]=="string")&&(E[T]={}),E=E[T])}}return n},__=r=>{const n={};function*_({:x,:S}){S=S||[];for(const[E,C]of Object.entries(x)){const T=[...S,E];if(typeof C=="string")yield{:T.join("."),:C};else for(const{:B,:A}of _({:C,:T}))yield{:B,:A}}}for(const x of Object.keys(r))for(const{:S,:E}of _({:r[x]}))n[S]||(n[S]={}),n[S][x]=E;return n};class  extends {constructor({:_,_:x,_:S,:E}){super({:_,_:E?._||__,_:E?._||_,:E?.__||__});_t(this,"_");_t(this,"_");this._=x,this._=S}static async ({:_}){return await .({:_,:__,_:__})}async _({:_}){const x={:Object.keys(this._),:[]};return await this._({:async E=>(x.=Object.keys(E),await _([...new Set(Object.values(x).flat())]))})}async _({:_=!0,:x}){const S={:Object.values(this._).map(B=>Object.keys(B)).flat()},E=async()=>{await x([...new Set(Object.values(S).flat())])};E();const T=[await this.__({:async B=>{S.=B.map(A=>A.donnes[___]),await E()}})];return _&&T.push((await this._({:async B=>{S.=B.map(A=>A.[___]),await E()}})).fOublier),async()=>{await Promise.all(T.map(B=>B()))}}async __({:_}){const x={:[]},S=async()=>{const E=_(__(x..map(C=>___(C))),this._);await _(E)};return await S(),await this.__({:async E=>{x.=E,await S()}})}async _({:_,:x}){await _(this._);const S={},E=await this..obtIdCompte(),C=async()=>{let A=[];(S.||[]).forEach(V=>{const D=A.find(O=>O..===V..);D?(V.===E&&D.!==E||(V..||0)>(D..||0))&&(A=[V,...A.filter(O=>O.!==D.)]):A.push(V)});const I=__(A.map(V=>V.)),N=_(this._,S.||{},I);return await _(N)},B=[await this.__({:async A=>{const I=__(A.map(___)),N=_(this._,I);S.=N}})];return x===""?B.push(await this.___({:async A=>{S.=A,await C()}})):x===""&&B.push((await this.__({:async A=>{S.=A,await C()}})).fOublier),async()=>{await Promise.all(B.map(A=>A()))}}async __({:_,:x,:S}){return await this._({:async E=>await S(E.filter(C=>(!_||C.[__]===_)&&(!x||C.[___]===x)).map(___))})}async ___({:_}){return await this.__({:x=>_(x.map(S=>___(S)))})}async _({:_,:x,:S}){const E={},C=async()=>{if(E.)if(x===""){const I=E..length,N=E..filter(D=>E.?.[D]?.[_]),V=E.?.filter(D=>D.._===_&&!N.includes(D..))||[];return await S({:I,:N.length,:V.length})}else{if(!E.||!E.)return;const I=Object.fromEntries(E..map(O=>[O,E.?.[O]?.[this._]?.length||(E.?.[O]?Object.values(E.?.[O])[0]?.length:0)])),N=Object.values(I).reduce((O,F)=>O+F,0),V=Object.entries(E.).filter(O=>O[1][_]).map(([O,F])=>I[O]).reduce((O,F)=>O+F,0),D=E.?.map(O=>I[O..]||0).reduce((O,F)=>O+F,0)||0;return await S({:N,:V,:D})}},T=await Promise.all([this._({:async I=>{E.=I,await C()}}),this._({:async I=>{E.=I,await C()}})]),B=(await this.__({:_,:async I=>{E.=I,await C()}})).fOublier;return async()=>{await Promise.all(T.map(I=>I())),await B}}async _({:_,:x,_:S,_:E,_:C}){const T={[__]:_,[__]:x,[___]:S,[___]:E,[___]:C};await this.({:T})}async ({:_,:x,:S,:E}){const C={},T=async()=>{const I=C.?.[_]?.[x];if(I)return await S(I);{const N=await this..obtIdCompte(),V=(C.||[]).filter(O=>O..===_&&O.._===x),D=V.find(O=>O.===N);return await S((D||V[0])?.?.)}},A=[await this._({:async I=>{C.=I,await T()}})];return E===""?A.push(await this.___({:async I=>{C.=I,await T()}})):E===""&&A.push((await this.__({:async I=>{C.=I,await T()}})).fOublier),async()=>{await Promise.all(A.map(I=>I()))}}}/*!
  * shared v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const inBrowser=typeof window<"u",makeSymbol=(r,n=!1)=>n?Symbol.for(r):Symbol(r),generateFormatCacheKey=(r,n,_)=>friendlyJSONstringify({l:r,k:n,s:_}),friendlyJSONstringify=r=>JSON.stringify(r).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber$4=r=>typeof r=="number"&&isFinite(r),isDate$4=r=>toTypeString(r)==="[object Date]",isRegExp$3=r=>toTypeString(r)==="[object RegExp]",isEmptyObject=r=>isPlainObject$3(r)&&Object.keys(r).length===0;function warn(r,n){typeof console<"u"&&(console.warn("[intlify] "+r),n&&console.warn(n.stack))}const assign$3=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function escapeHtml(r){return r.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty$4=Object.prototype.hasOwnProperty;function hasOwn$2(r,n){return hasOwnProperty$4.call(r,n)}const isArray$7=Array.isArray,isFunction$3=r=>typeof r=="function",isString$6=r=>typeof r=="string",isBoolean$4=r=>typeof r=="boolean",isObject$4=r=>r!==null&&typeof r=="object",objectToString$1=Object.prototype.toString,toTypeString=r=>objectToString$1.call(r),isPlainObject$3=r=>toTypeString(r)==="[object Object]",toDisplayString=r=>r==null?"":isArray$7(r)||isPlainObject$3(r)&&r.toString===objectToString$1?JSON.stringify(r,null,2):String(r);/*!
  * message-compiler v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15};function createCompileError(r,n,_={}){const{domain:x,messages:S,args:E}=_,C=r,T=new SyntaxError(String(C));return T.code=r,n&&(T.location=n),T.domain=x,T}function defaultOnError(r){throw r}function createPosition(r,n,_){return{line:r,column:n,offset:_}}function createLocation(r,n,_){const x={start:r,end:n};return _!=null&&(x.source=_),x}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS=String.fromCharCode(8232),CHAR_PS=String.fromCharCode(8233);function createScanner(r){const n=r;let _=0,x=1,S=1,E=0;const C=Z=>n[Z]===CHAR_CR&&n[Z+1]===CHAR_LF,T=Z=>n[Z]===CHAR_LF,B=Z=>n[Z]===CHAR_PS,A=Z=>n[Z]===CHAR_LS,I=Z=>C(Z)||T(Z)||B(Z)||A(Z),N=()=>_,V=()=>x,D=()=>S,O=()=>E,F=Z=>C(Z)||B(Z)||A(Z)?CHAR_LF:n[Z],M=()=>F(_),L=()=>F(_+E);function j(){return E=0,I(_)&&(x++,S=0),C(_)&&_++,_++,S++,n[_]}function q(){return C(_+E)&&E++,E++,n[_+E]}function H(){_=0,x=1,S=1,E=0}function X(Z=0){E=Z}function J(){const Z=_+E;for(;Z!==_;)j();E=0}return{index:N,line:V,column:D,peekOffset:O,charAt:F,currentChar:M,currentPeek:L,next:j,peek:q,reset:H,resetPeek:X,skipToPeek:J}}const EOF=void 0,LITERAL_DELIMITER="'",ERROR_DOMAIN$1="tokenizer";function createTokenizer(r,n={}){const _=n.location!==!1,x=createScanner(r),S=()=>x.index(),E=()=>createPosition(x.line(),x.column(),x.index()),C=E(),T=S(),B={currentType:14,offset:T,startLoc:C,endLoc:C,lastType:14,lastOffset:T,lastStartLoc:C,lastEndLoc:C,braceNest:0,inLinked:!1,text:""},A=()=>B,{onError:I}=n;function N(xe,fe,Be,...Le){const Ve=A();if(fe.column+=Be,fe.offset+=Be,I){const Ie=createLocation(Ve.startLoc,fe),Me=createCompileError(xe,Ie,{domain:ERROR_DOMAIN$1,args:Le});I(Me)}}function V(xe,fe,Be){xe.endLoc=E(),xe.currentType=fe;const Le={type:fe};return _&&(Le.loc=createLocation(xe.startLoc,xe.endLoc)),Be!=null&&(Le.value=Be),Le}const D=xe=>V(xe,14);function O(xe,fe){return xe.currentChar()===fe?(xe.next(),fe):(N(CompileErrorCodes.EXPECTED_TOKEN,E(),0,fe),"")}function F(xe){let fe="";for(;xe.currentPeek()===CHAR_SP||xe.currentPeek()===CHAR_LF;)fe+=xe.currentPeek(),xe.peek();return fe}function M(xe){const fe=F(xe);return xe.skipToPeek(),fe}function L(xe){if(xe===EOF)return!1;const fe=xe.charCodeAt(0);return fe>=97&&fe<=122||fe>=65&&fe<=90||fe===95}function j(xe){if(xe===EOF)return!1;const fe=xe.charCodeAt(0);return fe>=48&&fe<=57}function q(xe,fe){const{currentType:Be}=fe;if(Be!==2)return!1;F(xe);const Le=L(xe.currentPeek());return xe.resetPeek(),Le}function H(xe,fe){const{currentType:Be}=fe;if(Be!==2)return!1;F(xe);const Le=xe.currentPeek()==="-"?xe.peek():xe.currentPeek(),Ve=j(Le);return xe.resetPeek(),Ve}function X(xe,fe){const{currentType:Be}=fe;if(Be!==2)return!1;F(xe);const Le=xe.currentPeek()===LITERAL_DELIMITER;return xe.resetPeek(),Le}function J(xe,fe){const{currentType:Be}=fe;if(Be!==8)return!1;F(xe);const Le=xe.currentPeek()===".";return xe.resetPeek(),Le}function Z(xe,fe){const{currentType:Be}=fe;if(Be!==9)return!1;F(xe);const Le=L(xe.currentPeek());return xe.resetPeek(),Le}function ae(xe,fe){const{currentType:Be}=fe;if(!(Be===8||Be===12))return!1;F(xe);const Le=xe.currentPeek()===":";return xe.resetPeek(),Le}function ce(xe,fe){const{currentType:Be}=fe;if(Be!==10)return!1;const Le=()=>{const Ie=xe.currentPeek();return Ie==="{"?L(xe.peek()):Ie==="@"||Ie==="%"||Ie==="|"||Ie===":"||Ie==="."||Ie===CHAR_SP||!Ie?!1:Ie===CHAR_LF?(xe.peek(),Le()):L(Ie)},Ve=Le();return xe.resetPeek(),Ve}function ve(xe){F(xe);const fe=xe.currentPeek()==="|";return xe.resetPeek(),fe}function pe(xe){const fe=F(xe),Be=xe.currentPeek()==="%"&&xe.peek()==="{";return xe.resetPeek(),{isModulo:Be,hasSpace:fe.length>0}}function G(xe,fe=!0){const Be=(Ve=!1,Ie="",Me=!1)=>{const He=xe.currentPeek();return He==="{"?Ie==="%"?!1:Ve:He==="@"||!He?Ie==="%"?!0:Ve:He==="%"?(xe.peek(),Be(Ve,"%",!0)):He==="|"?Ie==="%"||Me?!0:!(Ie===CHAR_SP||Ie===CHAR_LF):He===CHAR_SP?(xe.peek(),Be(!0,CHAR_SP,Me)):He===CHAR_LF?(xe.peek(),Be(!0,CHAR_LF,Me)):!0},Le=Be();return fe&&xe.resetPeek(),Le}function Y(xe,fe){const Be=xe.currentChar();return Be===EOF?EOF:fe(Be)?(xe.next(),Be):null}function U(xe){return Y(xe,Be=>{const Le=Be.charCodeAt(0);return Le>=97&&Le<=122||Le>=65&&Le<=90||Le>=48&&Le<=57||Le===95||Le===36})}function W(xe){return Y(xe,Be=>{const Le=Be.charCodeAt(0);return Le>=48&&Le<=57})}function ee(xe){return Y(xe,Be=>{const Le=Be.charCodeAt(0);return Le>=48&&Le<=57||Le>=65&&Le<=70||Le>=97&&Le<=102})}function re(xe){let fe="",Be="";for(;fe=W(xe);)Be+=fe;return Be}function oe(xe){M(xe);const fe=xe.currentChar();return fe!=="%"&&N(CompileErrorCodes.EXPECTED_TOKEN,E(),0,fe),xe.next(),"%"}function ie(xe){let fe="";for(;;){const Be=xe.currentChar();if(Be==="{"||Be==="}"||Be==="@"||Be==="|"||!Be)break;if(Be==="%")if(G(xe))fe+=Be,xe.next();else break;else if(Be===CHAR_SP||Be===CHAR_LF)if(G(xe))fe+=Be,xe.next();else{if(ve(xe))break;fe+=Be,xe.next()}else fe+=Be,xe.next()}return fe}function ne(xe){M(xe);let fe="",Be="";for(;fe=U(xe);)Be+=fe;return xe.currentChar()===EOF&&N(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,E(),0),Be}function te(xe){M(xe);let fe="";return xe.currentChar()==="-"?(xe.next(),fe+=`-${re(xe)}`):fe+=re(xe),xe.currentChar()===EOF&&N(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,E(),0),fe}function K(xe){M(xe),O(xe,"'");let fe="",Be="";const Le=Ie=>Ie!==LITERAL_DELIMITER&&Ie!==CHAR_LF;for(;fe=Y(xe,Le);)fe==="\\"?Be+=le(xe):Be+=fe;const Ve=xe.currentChar();return Ve===CHAR_LF||Ve===EOF?(N(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,E(),0),Ve===CHAR_LF&&(xe.next(),O(xe,"'")),Be):(O(xe,"'"),Be)}function le(xe){const fe=xe.currentChar();switch(fe){case"\\":case"'":return xe.next(),`\\${fe}`;case"u":return ue(xe,fe,4);case"U":return ue(xe,fe,6);default:return N(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,E(),0,fe),""}}function ue(xe,fe,Be){O(xe,fe);let Le="";for(let Ve=0;Ve<Be;Ve++){const Ie=ee(xe);if(!Ie){N(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,E(),0,`\\${fe}${Le}${xe.currentChar()}`);break}Le+=Ie}return`\\${fe}${Le}`}function be(xe){M(xe);let fe="",Be="";const Le=Ve=>Ve!=="{"&&Ve!=="}"&&Ve!==CHAR_SP&&Ve!==CHAR_LF;for(;fe=Y(xe,Le);)Be+=fe;return Be}function ge(xe){let fe="",Be="";for(;fe=U(xe);)Be+=fe;return Be}function ye(xe){const fe=(Be=!1,Le)=>{const Ve=xe.currentChar();return Ve==="{"||Ve==="%"||Ve==="@"||Ve==="|"||!Ve||Ve===CHAR_SP?Le:Ve===CHAR_LF?(Le+=Ve,xe.next(),fe(Be,Le)):(Le+=Ve,xe.next(),fe(!0,Le))};return fe(!1,"")}function Ee(xe){M(xe);const fe=O(xe,"|");return M(xe),fe}function Re(xe,fe){let Be=null;switch(xe.currentChar()){case"{":return fe.braceNest>=1&&N(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,E(),0),xe.next(),Be=V(fe,2,"{"),M(xe),fe.braceNest++,Be;case"}":return fe.braceNest>0&&fe.currentType===2&&N(CompileErrorCodes.EMPTY_PLACEHOLDER,E(),0),xe.next(),Be=V(fe,3,"}"),fe.braceNest--,fe.braceNest>0&&M(xe),fe.inLinked&&fe.braceNest===0&&(fe.inLinked=!1),Be;case"@":return fe.braceNest>0&&N(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,E(),0),Be=Ne(xe,fe)||D(fe),fe.braceNest=0,Be;default:let Ve=!0,Ie=!0,Me=!0;if(ve(xe))return fe.braceNest>0&&N(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,E(),0),Be=V(fe,1,Ee(xe)),fe.braceNest=0,fe.inLinked=!1,Be;if(fe.braceNest>0&&(fe.currentType===5||fe.currentType===6||fe.currentType===7))return N(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,E(),0),fe.braceNest=0,Te(xe,fe);if(Ve=q(xe,fe))return Be=V(fe,5,ne(xe)),M(xe),Be;if(Ie=H(xe,fe))return Be=V(fe,6,te(xe)),M(xe),Be;if(Me=X(xe,fe))return Be=V(fe,7,K(xe)),M(xe),Be;if(!Ve&&!Ie&&!Me)return Be=V(fe,13,be(xe)),N(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,E(),0,Be.value),M(xe),Be;break}return Be}function Ne(xe,fe){const{currentType:Be}=fe;let Le=null;const Ve=xe.currentChar();switch((Be===8||Be===9||Be===12||Be===10)&&(Ve===CHAR_LF||Ve===CHAR_SP)&&N(CompileErrorCodes.INVALID_LINKED_FORMAT,E(),0),Ve){case"@":return xe.next(),Le=V(fe,8,"@"),fe.inLinked=!0,Le;case".":return M(xe),xe.next(),V(fe,9,".");case":":return M(xe),xe.next(),V(fe,10,":");default:return ve(xe)?(Le=V(fe,1,Ee(xe)),fe.braceNest=0,fe.inLinked=!1,Le):J(xe,fe)||ae(xe,fe)?(M(xe),Ne(xe,fe)):Z(xe,fe)?(M(xe),V(fe,12,ge(xe))):ce(xe,fe)?(M(xe),Ve==="{"?Re(xe,fe)||Le:V(fe,11,ye(xe))):(Be===8&&N(CompileErrorCodes.INVALID_LINKED_FORMAT,E(),0),fe.braceNest=0,fe.inLinked=!1,Te(xe,fe))}}function Te(xe,fe){let Be={type:14};if(fe.braceNest>0)return Re(xe,fe)||D(fe);if(fe.inLinked)return Ne(xe,fe)||D(fe);switch(xe.currentChar()){case"{":return Re(xe,fe)||D(fe);case"}":return N(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,E(),0),xe.next(),V(fe,3,"}");case"@":return Ne(xe,fe)||D(fe);default:if(ve(xe))return Be=V(fe,1,Ee(xe)),fe.braceNest=0,fe.inLinked=!1,Be;const{isModulo:Ve,hasSpace:Ie}=pe(xe);if(Ve)return Ie?V(fe,0,ie(xe)):V(fe,4,oe(xe));if(G(xe))return V(fe,0,ie(xe));break}return Be}function he(){const{currentType:xe,offset:fe,startLoc:Be,endLoc:Le}=B;return B.lastType=xe,B.lastOffset=fe,B.lastStartLoc=Be,B.lastEndLoc=Le,B.offset=S(),B.startLoc=E(),x.currentChar()===EOF?V(B,14):Te(x,B)}return{nextToken:he,currentOffset:S,currentPosition:E,context:A}}const ERROR_DOMAIN="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(r,n,_){switch(r){case"\\\\":return"\\";case"\\'":return"'";default:{const x=parseInt(n||_,16);return x<=55295||x>=57344?String.fromCodePoint(x):""}}}function createParser(r={}){const n=r.location!==!1,{onError:_}=r;function x(L,j,q,H,...X){const J=L.currentPosition();if(J.offset+=H,J.column+=H,_){const Z=createLocation(q,J),ae=createCompileError(j,Z,{domain:ERROR_DOMAIN,args:X});_(ae)}}function S(L,j,q){const H={type:L,start:j,end:j};return n&&(H.loc={start:q,end:q}),H}function E(L,j,q,H){L.end=j,H&&(L.type=H),n&&L.loc&&(L.loc.end=q)}function C(L,j){const q=L.context(),H=S(3,q.offset,q.startLoc);return H.value=j,E(H,L.currentOffset(),L.currentPosition()),H}function T(L,j){const q=L.context(),{lastOffset:H,lastStartLoc:X}=q,J=S(5,H,X);return J.index=parseInt(j,10),L.nextToken(),E(J,L.currentOffset(),L.currentPosition()),J}function B(L,j){const q=L.context(),{lastOffset:H,lastStartLoc:X}=q,J=S(4,H,X);return J.key=j,L.nextToken(),E(J,L.currentOffset(),L.currentPosition()),J}function A(L,j){const q=L.context(),{lastOffset:H,lastStartLoc:X}=q,J=S(9,H,X);return J.value=j.replace(KNOWN_ESCAPES,fromEscapeSequence),L.nextToken(),E(J,L.currentOffset(),L.currentPosition()),J}function I(L){const j=L.nextToken(),q=L.context(),{lastOffset:H,lastStartLoc:X}=q,J=S(8,H,X);return j.type!==12?(x(L,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,q.lastStartLoc,0),J.value="",E(J,H,X),{nextConsumeToken:j,node:J}):(j.value==null&&x(L,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,q.lastStartLoc,0,getTokenCaption(j)),J.value=j.value||"",E(J,L.currentOffset(),L.currentPosition()),{node:J})}function N(L,j){const q=L.context(),H=S(7,q.offset,q.startLoc);return H.value=j,E(H,L.currentOffset(),L.currentPosition()),H}function V(L){const j=L.context(),q=S(6,j.offset,j.startLoc);let H=L.nextToken();if(H.type===9){const X=I(L);q.modifier=X.node,H=X.nextConsumeToken||L.nextToken()}switch(H.type!==10&&x(L,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,j.lastStartLoc,0,getTokenCaption(H)),H=L.nextToken(),H.type===2&&(H=L.nextToken()),H.type){case 11:H.value==null&&x(L,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,j.lastStartLoc,0,getTokenCaption(H)),q.key=N(L,H.value||"");break;case 5:H.value==null&&x(L,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,j.lastStartLoc,0,getTokenCaption(H)),q.key=B(L,H.value||"");break;case 6:H.value==null&&x(L,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,j.lastStartLoc,0,getTokenCaption(H)),q.key=T(L,H.value||"");break;case 7:H.value==null&&x(L,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,j.lastStartLoc,0,getTokenCaption(H)),q.key=A(L,H.value||"");break;default:x(L,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,j.lastStartLoc,0);const X=L.context(),J=S(7,X.offset,X.startLoc);return J.value="",E(J,X.offset,X.startLoc),q.key=J,E(q,X.offset,X.startLoc),{nextConsumeToken:H,node:q}}return E(q,L.currentOffset(),L.currentPosition()),{node:q}}function D(L){const j=L.context(),q=j.currentType===1?L.currentOffset():j.offset,H=j.currentType===1?j.endLoc:j.startLoc,X=S(2,q,H);X.items=[];let J=null;do{const ce=J||L.nextToken();switch(J=null,ce.type){case 0:ce.value==null&&x(L,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,j.lastStartLoc,0,getTokenCaption(ce)),X.items.push(C(L,ce.value||""));break;case 6:ce.value==null&&x(L,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,j.lastStartLoc,0,getTokenCaption(ce)),X.items.push(T(L,ce.value||""));break;case 5:ce.value==null&&x(L,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,j.lastStartLoc,0,getTokenCaption(ce)),X.items.push(B(L,ce.value||""));break;case 7:ce.value==null&&x(L,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,j.lastStartLoc,0,getTokenCaption(ce)),X.items.push(A(L,ce.value||""));break;case 8:const ve=V(L);X.items.push(ve.node),J=ve.nextConsumeToken||null;break}}while(j.currentType!==14&&j.currentType!==1);const Z=j.currentType===1?j.lastOffset:L.currentOffset(),ae=j.currentType===1?j.lastEndLoc:L.currentPosition();return E(X,Z,ae),X}function O(L,j,q,H){const X=L.context();let J=H.items.length===0;const Z=S(1,j,q);Z.cases=[],Z.cases.push(H);do{const ae=D(L);J||(J=ae.items.length===0),Z.cases.push(ae)}while(X.currentType!==14);return J&&x(L,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,q,0),E(Z,L.currentOffset(),L.currentPosition()),Z}function F(L){const j=L.context(),{offset:q,startLoc:H}=j,X=D(L);return j.currentType===14?X:O(L,q,H,X)}function M(L){const j=createTokenizer(L,assign$3({},r)),q=j.context(),H=S(0,q.offset,q.startLoc);return n&&H.loc&&(H.loc.source=L),H.body=F(j),q.currentType!==14&&x(j,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,q.lastStartLoc,0,L[q.offset]||""),E(H,j.currentOffset(),j.currentPosition()),H}return{parse:M}}function getTokenCaption(r){if(r.type===14)return"EOF";const n=(r.value||"").replace(/\r?\n/gu,"\\n");return n.length>10?n.slice(0,9)+"":n}function createTransformer(r,n={}){const _={ast:r,helpers:new Set};return{context:()=>_,helper:E=>(_.helpers.add(E),E)}}function traverseNodes(r,n){for(let _=0;_<r.length;_++)traverseNode(r[_],n)}function traverseNode(r,n){switch(r.type){case 1:traverseNodes(r.cases,n),n.helper("plural");break;case 2:traverseNodes(r.items,n);break;case 6:traverseNode(r.key,n),n.helper("linked"),n.helper("type");break;case 5:n.helper("interpolate"),n.helper("list");break;case 4:n.helper("interpolate"),n.helper("named");break}}function transform$1(r,n={}){const _=createTransformer(r);_.helper("normalize"),r.body&&traverseNode(r.body,_);const x=_.context();r.helpers=Array.from(x.helpers)}function createCodeGenerator(r,n){const{sourceMap:_,filename:x,breakLineCode:S,needIndent:E}=n,C={source:r.loc.source,filename:x,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:S,needIndent:E,indentLevel:0},T=()=>C;function B(F,M){C.code+=F}function A(F,M=!0){const L=M?S:"";B(E?L+"  ".repeat(F):L)}function I(F=!0){const M=++C.indentLevel;F&&A(M)}function N(F=!0){const M=--C.indentLevel;F&&A(M)}function V(){A(C.indentLevel)}return{context:T,push:B,indent:I,deindent:N,newline:V,helper:F=>`_${F}`,needIndent:()=>C.needIndent}}function generateLinkedNode(r,n){const{helper:_}=r;r.push(`${_("linked")}(`),generateNode(r,n.key),n.modifier?(r.push(", "),generateNode(r,n.modifier),r.push(", _type")):r.push(", undefined, _type"),r.push(")")}function generateMessageNode(r,n){const{helper:_,needIndent:x}=r;r.push(`${_("normalize")}([`),r.indent(x());const S=n.items.length;for(let E=0;E<S&&(generateNode(r,n.items[E]),E!==S-1);E++)r.push(", ");r.deindent(x()),r.push("])")}function generatePluralNode(r,n){const{helper:_,needIndent:x}=r;if(n.cases.length>1){r.push(`${_("plural")}([`),r.indent(x());const S=n.cases.length;for(let E=0;E<S&&(generateNode(r,n.cases[E]),E!==S-1);E++)r.push(", ");r.deindent(x()),r.push("])")}}function generateResource(r,n){n.body?generateNode(r,n.body):r.push("null")}function generateNode(r,n){const{helper:_}=r;switch(n.type){case 0:generateResource(r,n);break;case 1:generatePluralNode(r,n);break;case 2:generateMessageNode(r,n);break;case 6:generateLinkedNode(r,n);break;case 8:r.push(JSON.stringify(n.value),n);break;case 7:r.push(JSON.stringify(n.value),n);break;case 5:r.push(`${_("interpolate")}(${_("list")}(${n.index}))`,n);break;case 4:r.push(`${_("interpolate")}(${_("named")}(${JSON.stringify(n.key)}))`,n);break;case 9:r.push(JSON.stringify(n.value),n);break;case 3:r.push(JSON.stringify(n.value),n);break}}const generate=(r,n={})=>{const _=isString$6(n.mode)?n.mode:"normal",x=isString$6(n.filename)?n.filename:"message.intl",S=!!n.sourceMap,E=n.breakLineCode!=null?n.breakLineCode:_==="arrow"?";":`
`,C=n.needIndent?n.needIndent:_!=="arrow",T=r.helpers||[],B=createCodeGenerator(r,{mode:_,filename:x,sourceMap:S,breakLineCode:E,needIndent:C});B.push(_==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),B.indent(C),T.length>0&&(B.push(`const { ${T.map(N=>`${N}: _${N}`).join(", ")} } = ctx`),B.newline()),B.push("return "),generateNode(B,r),B.deindent(C),B.push("}");const{code:A,map:I}=B.context();return{ast:r,code:A,map:I?I.toJSON():void 0}};function baseCompile(r,n={}){const _=assign$3({},n),S=createParser(_).parse(r);return transform$1(S,_),generate(S,_)}/*!
  * devtools-if v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const IntlifyDevToolsHooks={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * core-base v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],"[":[4],o:[7]};pathStateMachine[1]={w:[1],".":[2],"[":[4],o:[7]};pathStateMachine[2]={w:[2],i:[3,0],0:[3,0]};pathStateMachine[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};pathStateMachine[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};pathStateMachine[5]={"'":[4,0],o:8,l:[5,0]};pathStateMachine[6]={'"':[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(r){return literalValueRE.test(r)}function stripQuotes(r){const n=r.charCodeAt(0),_=r.charCodeAt(r.length-1);return n===_&&(n===34||n===39)?r.slice(1,-1):r}function getPathCharType(r){if(r==null)return"o";switch(r.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return r;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(r){const n=r.trim();return r.charAt(0)==="0"&&isNaN(parseInt(r))?!1:isLiteral(n)?stripQuotes(n):"*"+n}function parse$1(r){const n=[];let _=-1,x=0,S=0,E,C,T,B,A,I,N;const V=[];V[0]=()=>{C===void 0?C=T:C+=T},V[1]=()=>{C!==void 0&&(n.push(C),C=void 0)},V[2]=()=>{V[0](),S++},V[3]=()=>{if(S>0)S--,x=4,V[0]();else{if(S=0,C===void 0||(C=formatSubPath(C),C===!1))return!1;V[1]()}};function D(){const O=r[_+1];if(x===5&&O==="'"||x===6&&O==='"')return _++,T="\\"+O,V[0](),!0}for(;x!==null;)if(_++,E=r[_],!(E==="\\"&&D())){if(B=getPathCharType(E),N=pathStateMachine[x],A=N[B]||N.l||8,A===8||(x=A[0],A[1]!==void 0&&(I=V[A[1]],I&&(T=E,I()===!1))))return;if(x===7)return n}}const cache$4=new Map;function resolveWithKeyValue(r,n){return isObject$4(r)?r[n]:null}function resolveValue(r,n){if(!isObject$4(r))return null;let _=cache$4.get(n);if(_||(_=parse$1(n),_&&cache$4.set(n,_)),!_)return null;const x=_.length;let S=r,E=0;for(;E<x;){const C=S[_[E]];if(C===void 0)return null;S=C,E++}return S}const DEFAULT_MODIFIER=r=>r,DEFAULT_MESSAGE=r=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=r=>r.length===0?"":r.join(""),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(r,n){return r=Math.abs(r),n===2?r?r>1?1:0:1:r?Math.min(r,2):0}function getPluralIndex(r){const n=isNumber$4(r.pluralIndex)?r.pluralIndex:-1;return r.named&&(isNumber$4(r.named.count)||isNumber$4(r.named.n))?isNumber$4(r.named.count)?r.named.count:isNumber$4(r.named.n)?r.named.n:n:n}function normalizeNamed(r,n){n.count||(n.count=r),n.n||(n.n=r)}function createMessageContext(r={}){const n=r.locale,_=getPluralIndex(r),x=isObject$4(r.pluralRules)&&isString$6(n)&&isFunction$3(r.pluralRules[n])?r.pluralRules[n]:pluralDefault,S=isObject$4(r.pluralRules)&&isString$6(n)&&isFunction$3(r.pluralRules[n])?pluralDefault:void 0,E=L=>L[x(_,L.length,S)],C=r.list||[],T=L=>C[L],B=r.named||{};isNumber$4(r.pluralIndex)&&normalizeNamed(_,B);const A=L=>B[L];function I(L){const j=isFunction$3(r.messages)?r.messages(L):isObject$4(r.messages)?r.messages[L]:!1;return j||(r.parent?r.parent.message(L):DEFAULT_MESSAGE)}const N=L=>r.modifiers?r.modifiers[L]:DEFAULT_MODIFIER,V=isPlainObject$3(r.processor)&&isFunction$3(r.processor.normalize)?r.processor.normalize:DEFAULT_NORMALIZE,D=isPlainObject$3(r.processor)&&isFunction$3(r.processor.interpolate)?r.processor.interpolate:DEFAULT_INTERPOLATE,O=isPlainObject$3(r.processor)&&isString$6(r.processor.type)?r.processor.type:DEFAULT_MESSAGE_DATA_TYPE,M={list:T,named:A,plural:E,linked:(L,...j)=>{const[q,H]=j;let X="text",J="";j.length===1?isObject$4(q)?(J=q.modifier||J,X=q.type||X):isString$6(q)&&(J=q||J):j.length===2&&(isString$6(q)&&(J=q||J),isString$6(H)&&(X=H||X));let Z=I(L)(M);return X==="vnode"&&isArray$7(Z)&&J&&(Z=Z[0]),J?N(J)(Z,X):Z},message:I,type:O,interpolate:D,normalize:V};return M}let devtools=null;function setDevToolsHook(r){devtools=r}function initI18nDevTools(r,n,_){devtools&&devtools.emit(IntlifyDevToolsHooks.I18nInit,{timestamp:Date.now(),i18n:r,version:n,meta:_})}const translateDevTools=createDevToolsHook(IntlifyDevToolsHooks.FunctionTranslate);function createDevToolsHook(r){return n=>devtools&&devtools.emit(r,n)}function fallbackWithSimple(r,n,_){return[...new Set([_,...isArray$7(n)?n:isObject$4(n)?Object.keys(n):isString$6(n)?[n]:[_]])]}function fallbackWithLocaleChain(r,n,_){const x=isString$6(_)?_:DEFAULT_LOCALE,S=r;S.__localeChainCache||(S.__localeChainCache=new Map);let E=S.__localeChainCache.get(x);if(!E){E=[];let C=[_];for(;isArray$7(C);)C=appendBlockToChain(E,C,n);const T=isArray$7(n)||!isPlainObject$3(n)?n:n.default?n.default:null;C=isString$6(T)?[T]:T,isArray$7(C)&&appendBlockToChain(E,C,!1),S.__localeChainCache.set(x,E)}return E}function appendBlockToChain(r,n,_){let x=!0;for(let S=0;S<n.length&&isBoolean$4(x);S++){const E=n[S];isString$6(E)&&(x=appendLocaleToChain(r,n[S],_))}return x}function appendLocaleToChain(r,n,_){let x;const S=n.split("-");do{const E=S.join("-");x=appendItemToChain(r,E,_),S.splice(-1,1)}while(S.length&&x===!0);return x}function appendItemToChain(r,n,_){let x=!1;if(!r.includes(n)&&(x=!0,n)){x=n[n.length-1]!=="!";const S=n.replace(/!/g,"");r.push(S),(isArray$7(_)||isPlainObject$3(_))&&_[S]&&(x=_[S])}return x}const VERSION$3="9.3.0-beta.16",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=r=>`${r.charAt(0).toLocaleUpperCase()}${r.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(r,n)=>n==="text"&&isString$6(r)?r.toUpperCase():n==="vnode"&&isObject$4(r)&&"__v_isVNode"in r?r.children.toUpperCase():r,lower:(r,n)=>n==="text"&&isString$6(r)?r.toLowerCase():n==="vnode"&&isObject$4(r)&&"__v_isVNode"in r?r.children.toLowerCase():r,capitalize:(r,n)=>n==="text"&&isString$6(r)?capitalize(r):n==="vnode"&&isObject$4(r)&&"__v_isVNode"in r?capitalize(r.children):r}}let _compiler;function registerMessageCompiler(r){_compiler=r}let _resolver;function registerMessageResolver(r){_resolver=r}let _fallbacker;function registerLocaleFallbacker(r){_fallbacker=r}let _additionalMeta=null;const setAdditionalMeta=r=>{_additionalMeta=r},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=r=>{_fallbackContext=r},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(r={}){const n=isString$6(r.version)?r.version:VERSION$3,_=isString$6(r.locale)?r.locale:DEFAULT_LOCALE,x=isArray$7(r.fallbackLocale)||isPlainObject$3(r.fallbackLocale)||isString$6(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:_,S=isPlainObject$3(r.messages)?r.messages:{[_]:{}},E=isPlainObject$3(r.datetimeFormats)?r.datetimeFormats:{[_]:{}},C=isPlainObject$3(r.numberFormats)?r.numberFormats:{[_]:{}},T=assign$3({},r.modifiers||{},getDefaultLinkedModifiers()),B=r.pluralRules||{},A=isFunction$3(r.missing)?r.missing:null,I=isBoolean$4(r.missingWarn)||isRegExp$3(r.missingWarn)?r.missingWarn:!0,N=isBoolean$4(r.fallbackWarn)||isRegExp$3(r.fallbackWarn)?r.fallbackWarn:!0,V=!!r.fallbackFormat,D=!!r.unresolving,O=isFunction$3(r.postTranslation)?r.postTranslation:null,F=isPlainObject$3(r.processor)?r.processor:null,M=isBoolean$4(r.warnHtmlMessage)?r.warnHtmlMessage:!0,L=!!r.escapeParameter,j=isFunction$3(r.messageCompiler)?r.messageCompiler:_compiler,q=isFunction$3(r.messageResolver)?r.messageResolver:_resolver||resolveWithKeyValue,H=isFunction$3(r.localeFallbacker)?r.localeFallbacker:_fallbacker||fallbackWithSimple,X=isObject$4(r.fallbackContext)?r.fallbackContext:void 0,J=isFunction$3(r.onWarn)?r.onWarn:warn,Z=r,ae=isObject$4(Z.__datetimeFormatters)?Z.__datetimeFormatters:new Map,ce=isObject$4(Z.__numberFormatters)?Z.__numberFormatters:new Map,ve=isObject$4(Z.__meta)?Z.__meta:{};_cid++;const pe={version:n,cid:_cid,locale:_,fallbackLocale:x,messages:S,modifiers:T,pluralRules:B,missing:A,missingWarn:I,fallbackWarn:N,fallbackFormat:V,unresolving:D,postTranslation:O,processor:F,warnHtmlMessage:M,escapeParameter:L,messageCompiler:j,messageResolver:q,localeFallbacker:H,fallbackContext:X,onWarn:J,__meta:ve};return pe.datetimeFormats=E,pe.numberFormats=C,pe.__datetimeFormatters=ae,pe.__numberFormatters=ce,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(pe,n,ve),pe}function handleMissing(r,n,_,x,S){const{missing:E,onWarn:C}=r;if(E!==null){const T=E(r,_,n,S);return isString$6(T)?T:n}else return n}function updateFallbackLocale(r,n,_){const x=r;x.__localeChainCache=new Map,r.localeFallbacker(r,_,n)}const defaultOnCacheKey=r=>r;let compileCache=Object.create(null);function compileToFunction(r,n={}){{const x=(n.onCacheKey||defaultOnCacheKey)(r),S=compileCache[x];if(S)return S;let E=!1;const C=n.onError||defaultOnError;n.onError=A=>{E=!0,C(A)};const{code:T}=baseCompile(r,n),B=new Function(`return ${T}`)();return E?B:compileCache[x]=B}}let code$6=CompileErrorCodes.__EXTEND_POINT__;const inc$1=()=>++code$6,CoreErrorCodes={INVALID_ARGUMENT:code$6,INVALID_DATE_ARGUMENT:inc$1(),INVALID_ISO_DATE_ARGUMENT:inc$1(),__EXTEND_POINT__:inc$1()};function createCoreError(r){return createCompileError(r,null,void 0)}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=r=>isFunction$3(r);function translate(r,...n){const{fallbackFormat:_,postTranslation:x,unresolving:S,messageCompiler:E,fallbackLocale:C,messages:T}=r,[B,A]=parseTranslateArgs(...n),I=isBoolean$4(A.missingWarn)?A.missingWarn:r.missingWarn,N=isBoolean$4(A.fallbackWarn)?A.fallbackWarn:r.fallbackWarn,V=isBoolean$4(A.escapeParameter)?A.escapeParameter:r.escapeParameter,D=!!A.resolvedMessage,O=isString$6(A.default)||isBoolean$4(A.default)?isBoolean$4(A.default)?E?B:()=>B:A.default:_?E?B:()=>B:"",F=_||O!=="",M=isString$6(A.locale)?A.locale:r.locale;V&&escapeParams(A);let[L,j,q]=D?[B,M,T[M]||{}]:resolveMessageFormat(r,B,M,C,N,I),H=L,X=B;if(!D&&!(isString$6(H)||isMessageFunction(H))&&F&&(H=O,X=H),!D&&(!(isString$6(H)||isMessageFunction(H))||!isString$6(j)))return S?NOT_REOSLVED:B;let J=!1;const Z=()=>{J=!0},ae=isMessageFunction(H)?H:compileMessageFormat(r,B,j,H,X,Z);if(J)return H;const ce=getMessageContextOptions(r,j,q,A),ve=createMessageContext(ce),pe=evaluateMessage(r,ae,ve),G=x?x(pe,B):pe;if(__INTLIFY_PROD_DEVTOOLS__){const Y={timestamp:Date.now(),key:isString$6(B)?B:isMessageFunction(H)?H.key:"",locale:j||(isMessageFunction(H)?H.locale:""),format:isString$6(H)?H:isMessageFunction(H)?H.source:"",message:G};Y.meta=assign$3({},r.__meta,getAdditionalMeta()||{}),translateDevTools(Y)}return G}function escapeParams(r){isArray$7(r.list)?r.list=r.list.map(n=>isString$6(n)?escapeHtml(n):n):isObject$4(r.named)&&Object.keys(r.named).forEach(n=>{isString$6(r.named[n])&&(r.named[n]=escapeHtml(r.named[n]))})}function resolveMessageFormat(r,n,_,x,S,E){const{messages:C,onWarn:T,messageResolver:B,localeFallbacker:A}=r,I=A(r,x,_);let N={},V,D=null;const O="translate";for(let F=0;F<I.length&&(V=I[F],N=C[V]||{},(D=B(N,n))===null&&(D=N[n]),!(isString$6(D)||isFunction$3(D)));F++){const M=handleMissing(r,n,V,E,O);M!==n&&(D=M)}return[D,V,N]}function compileMessageFormat(r,n,_,x,S,E){const{messageCompiler:C,warnHtmlMessage:T}=r;if(isMessageFunction(x)){const A=x;return A.locale=A.locale||_,A.key=A.key||n,A}if(C==null){const A=()=>x;return A.locale=_,A.key=n,A}const B=C(x,getCompileOptions(r,_,S,x,T,E));return B.locale=_,B.key=n,B.source=x,B}function evaluateMessage(r,n,_){return n(_)}function parseTranslateArgs(...r){const[n,_,x]=r,S={};if(!isString$6(n)&&!isNumber$4(n)&&!isMessageFunction(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const E=isNumber$4(n)?String(n):(isMessageFunction(n),n);return isNumber$4(_)?S.plural=_:isString$6(_)?S.default=_:isPlainObject$3(_)&&!isEmptyObject(_)?S.named=_:isArray$7(_)&&(S.list=_),isNumber$4(x)?S.plural=x:isString$6(x)?S.default=x:isPlainObject$3(x)&&assign$3(S,x),[E,S]}function getCompileOptions(r,n,_,x,S,E){return{warnHtmlMessage:S,onError:C=>{throw E&&E(C),C},onCacheKey:C=>generateFormatCacheKey(n,_,C)}}function getMessageContextOptions(r,n,_,x){const{modifiers:S,pluralRules:E,messageResolver:C,fallbackLocale:T,fallbackWarn:B,missingWarn:A,fallbackContext:I}=r,V={locale:n,modifiers:S,pluralRules:E,messages:D=>{let O=C(_,D);if(O==null&&I){const[,,F]=resolveMessageFormat(I,D,n,T,B,A);O=C(F,D)}if(isString$6(O)){let F=!1;const L=compileMessageFormat(r,D,n,O,D,()=>{F=!0});return F?NOOP_MESSAGE_FUNCTION:L}else return isMessageFunction(O)?O:NOOP_MESSAGE_FUNCTION}};return r.processor&&(V.processor=r.processor),x.list&&(V.list=x.list),x.named&&(V.named=x.named),isNumber$4(x.plural)&&(V.pluralIndex=x.plural),V}function datetime(r,...n){const{datetimeFormats:_,unresolving:x,fallbackLocale:S,onWarn:E,localeFallbacker:C}=r,{__datetimeFormatters:T}=r,[B,A,I,N]=parseDateTimeArgs(...n),V=isBoolean$4(I.missingWarn)?I.missingWarn:r.missingWarn;isBoolean$4(I.fallbackWarn)?I.fallbackWarn:r.fallbackWarn;const D=!!I.part,O=isString$6(I.locale)?I.locale:r.locale,F=C(r,S,O);if(!isString$6(B)||B==="")return new Intl.DateTimeFormat(O,N).format(A);let M={},L,j=null;const q="datetime format";for(let J=0;J<F.length&&(L=F[J],M=_[L]||{},j=M[B],!isPlainObject$3(j));J++)handleMissing(r,B,L,V,q);if(!isPlainObject$3(j)||!isString$6(L))return x?NOT_REOSLVED:B;let H=`${L}__${B}`;isEmptyObject(N)||(H=`${H}__${JSON.stringify(N)}`);let X=T.get(H);return X||(X=new Intl.DateTimeFormat(L,assign$3({},j,N)),T.set(H,X)),D?X.formatToParts(A):X.format(A)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...r){const[n,_,x,S]=r,E={};let C={},T;if(isString$6(n)){const B=n.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!B)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const A=B[3]?B[3].trim().startsWith("T")?`${B[1].trim()}${B[3].trim()}`:`${B[1].trim()}T${B[3].trim()}`:B[1].trim();T=new Date(A);try{T.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate$4(n)){if(isNaN(n.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);T=n}else if(isNumber$4(n))T=n;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$6(_)?E.key=_:isPlainObject$3(_)&&Object.keys(_).forEach(B=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(B)?C[B]=_[B]:E[B]=_[B]}),isString$6(x)?E.locale=x:isPlainObject$3(x)&&(C=x),isPlainObject$3(S)&&(C=S),[E.key||"",T,E,C]}function clearDateTimeFormat(r,n,_){const x=r;for(const S in _){const E=`${n}__${S}`;x.__datetimeFormatters.has(E)&&x.__datetimeFormatters.delete(E)}}function number$1(r,...n){const{numberFormats:_,unresolving:x,fallbackLocale:S,onWarn:E,localeFallbacker:C}=r,{__numberFormatters:T}=r,[B,A,I,N]=parseNumberArgs(...n),V=isBoolean$4(I.missingWarn)?I.missingWarn:r.missingWarn;isBoolean$4(I.fallbackWarn)?I.fallbackWarn:r.fallbackWarn;const D=!!I.part,O=isString$6(I.locale)?I.locale:r.locale,F=C(r,S,O);if(!isString$6(B)||B==="")return new Intl.NumberFormat(O,N).format(A);let M={},L,j=null;const q="number format";for(let J=0;J<F.length&&(L=F[J],M=_[L]||{},j=M[B],!isPlainObject$3(j));J++)handleMissing(r,B,L,V,q);if(!isPlainObject$3(j)||!isString$6(L))return x?NOT_REOSLVED:B;let H=`${L}__${B}`;isEmptyObject(N)||(H=`${H}__${JSON.stringify(N)}`);let X=T.get(H);return X||(X=new Intl.NumberFormat(L,assign$3({},j,N)),T.set(H,X)),D?X.formatToParts(A):X.format(A)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...r){const[n,_,x,S]=r,E={};let C={};if(!isNumber$4(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const T=n;return isString$6(_)?E.key=_:isPlainObject$3(_)&&Object.keys(_).forEach(B=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(B)?C[B]=_[B]:E[B]=_[B]}),isString$6(x)?E.locale=x:isPlainObject$3(x)&&(C=x),isPlainObject$3(S)&&(C=S),[E.key||"",T,E,C]}function clearNumberFormat(r,n,_){const x=r;for(const S in _){const E=`${n}__${S}`;x.__numberFormatters.has(E)&&x.__numberFormatters.delete(E)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1);/*!
  * vue-i18n v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const VERSION$2="9.3.0-beta.16";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}let code$5=CompileErrorCodes.__EXTEND_POINT__;const inc=()=>++code$5,I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code$5,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSLALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSLALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(r,...n){return createCompileError(r,null,void 0)}const TranslateVNodeSymbol=makeSymbol("__translateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules"),InejctWithOption=makeSymbol("__injectWithOption");function handleFlatJson(r){if(!isObject$4(r))return r;for(const n in r)if(hasOwn$2(r,n))if(!n.includes("."))isObject$4(r[n])&&handleFlatJson(r[n]);else{const _=n.split("."),x=_.length-1;let S=r;for(let E=0;E<x;E++)_[E]in S||(S[_[E]]={}),S=S[_[E]];S[_[x]]=r[n],delete r[n],isObject$4(S[_[x]])&&handleFlatJson(S[_[x]])}return r}function getLocaleMessages(r,n){const{messages:_,__i18n:x,messageResolver:S,flatJson:E}=n,C=isPlainObject$3(_)?_:isArray$7(x)?{}:{[r]:{}};if(isArray$7(x)&&x.forEach(T=>{if("locale"in T&&"resource"in T){const{locale:B,resource:A}=T;B?(C[B]=C[B]||{},deepCopy(A,C[B])):deepCopy(A,C)}else isString$6(T)&&deepCopy(JSON.parse(T),C)}),S==null&&E)for(const T in C)hasOwn$2(C,T)&&handleFlatJson(C[T]);return C}const isNotObjectOrIsArray=r=>!isObject$4(r)||isArray$7(r);function deepCopy(r,n){if(isNotObjectOrIsArray(r)||isNotObjectOrIsArray(n))throw createI18nError(I18nErrorCodes.INVALID_VALUE);for(const _ in r)hasOwn$2(r,_)&&(isNotObjectOrIsArray(r[_])||isNotObjectOrIsArray(n[_])?n[_]=r[_]:deepCopy(r[_],n[_]))}function getComponentOptions(r){return r.type}function adjustI18nResources(r,n,_){let x=isObject$4(n.messages)?n.messages:{};"__i18nGlobal"in _&&(x=getLocaleMessages(r.locale.value,{messages:x,__i18n:_.__i18nGlobal}));const S=Object.keys(x);S.length&&S.forEach(E=>{r.mergeLocaleMessage(E,x[E])});{if(isObject$4(n.datetimeFormats)){const E=Object.keys(n.datetimeFormats);E.length&&E.forEach(C=>{r.mergeDateTimeFormat(C,n.datetimeFormats[C])})}if(isObject$4(n.numberFormats)){const E=Object.keys(n.numberFormats);E.length&&E.forEach(C=>{r.mergeNumberFormat(C,n.numberFormats[C])})}}}function createTextNode(r){return createVNode(Text,null,r,0)}const DEVTOOLS_META="__INTLIFY_META__";let composerID=0;function defineCoreMissingHandler(r){return(n,_,x,S)=>r(_,x,getCurrentInstance$1()||void 0,S)}const getMetaInfo=()=>{const r=getCurrentInstance$1();let n=null;return r&&(n=getComponentOptions(r)[DEVTOOLS_META])?{[DEVTOOLS_META]:n}:null};function createComposer(r={},n){const{__root:_}=r,x=_===void 0;let S=isBoolean$4(r.inheritLocale)?r.inheritLocale:!0;const E=ref$1(_&&S?_.locale.value:isString$6(r.locale)?r.locale:DEFAULT_LOCALE),C=ref$1(_&&S?_.fallbackLocale.value:isString$6(r.fallbackLocale)||isArray$7(r.fallbackLocale)||isPlainObject$3(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:E.value),T=ref$1(getLocaleMessages(E.value,r)),B=ref$1(isPlainObject$3(r.datetimeFormats)?r.datetimeFormats:{[E.value]:{}}),A=ref$1(isPlainObject$3(r.numberFormats)?r.numberFormats:{[E.value]:{}});let I=_?_.missingWarn:isBoolean$4(r.missingWarn)||isRegExp$3(r.missingWarn)?r.missingWarn:!0,N=_?_.fallbackWarn:isBoolean$4(r.fallbackWarn)||isRegExp$3(r.fallbackWarn)?r.fallbackWarn:!0,V=_?_.fallbackRoot:isBoolean$4(r.fallbackRoot)?r.fallbackRoot:!0,D=!!r.fallbackFormat,O=isFunction$3(r.missing)?r.missing:null,F=isFunction$3(r.missing)?defineCoreMissingHandler(r.missing):null,M=isFunction$3(r.postTranslation)?r.postTranslation:null,L=_?_.warnHtmlMessage:isBoolean$4(r.warnHtmlMessage)?r.warnHtmlMessage:!0,j=!!r.escapeParameter;const q=_?_.modifiers:isPlainObject$3(r.modifiers)?r.modifiers:{};let H=r.pluralRules||_&&_.pluralRules,X;X=(()=>{x&&setFallbackContext(null);const Ue={version:VERSION$2,locale:E.value,fallbackLocale:C.value,messages:T.value,modifiers:q,pluralRules:H,missing:F===null?void 0:F,missingWarn:I,fallbackWarn:N,fallbackFormat:D,unresolving:!0,postTranslation:M===null?void 0:M,warnHtmlMessage:L,escapeParameter:j,messageResolver:r.messageResolver,__meta:{framework:"vue"}};Ue.datetimeFormats=B.value,Ue.numberFormats=A.value,Ue.__datetimeFormatters=isPlainObject$3(X)?X.__datetimeFormatters:void 0,Ue.__numberFormatters=isPlainObject$3(X)?X.__numberFormatters:void 0;const Ge=createCoreContext(Ue);return x&&setFallbackContext(Ge),Ge})(),updateFallbackLocale(X,E.value,C.value);function Z(){return[E.value,C.value,T.value,B.value,A.value]}const ae=computed({get:()=>E.value,set:Ue=>{E.value=Ue,X.locale=E.value}}),ce=computed({get:()=>C.value,set:Ue=>{C.value=Ue,X.fallbackLocale=C.value,updateFallbackLocale(X,E.value,Ue)}}),ve=computed(()=>T.value),pe=computed(()=>B.value),G=computed(()=>A.value);function Y(){return isFunction$3(M)?M:null}function U(Ue){M=Ue,X.postTranslation=Ue}function W(){return O}function ee(Ue){Ue!==null&&(F=defineCoreMissingHandler(Ue)),O=Ue,X.missing=F}const re=(Ue,Ge,et,ot,ht,Oe)=>{Z();let we;if(__INTLIFY_PROD_DEVTOOLS__)try{setAdditionalMeta(getMetaInfo()),x||(X.fallbackContext=_?getFallbackContext():void 0),we=Ue(X)}finally{setAdditionalMeta(null),x||(X.fallbackContext=void 0)}else we=Ue(X);if(isNumber$4(we)&&we===NOT_REOSLVED){const[Ce,ze]=Ge();return _&&V?ot(_):ht(Ce)}else{if(Oe(we))return we;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function oe(...Ue){return re(Ge=>Reflect.apply(translate,null,[Ge,...Ue]),()=>parseTranslateArgs(...Ue),"translate",Ge=>Reflect.apply(Ge.t,Ge,[...Ue]),Ge=>Ge,Ge=>isString$6(Ge))}function ie(...Ue){const[Ge,et,ot]=Ue;if(ot&&!isObject$4(ot))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return oe(Ge,et,assign$3({resolvedMessage:!0},ot||{}))}function ne(...Ue){return re(Ge=>Reflect.apply(datetime,null,[Ge,...Ue]),()=>parseDateTimeArgs(...Ue),"datetime format",Ge=>Reflect.apply(Ge.d,Ge,[...Ue]),()=>MISSING_RESOLVE_VALUE,Ge=>isString$6(Ge))}function te(...Ue){return re(Ge=>Reflect.apply(number$1,null,[Ge,...Ue]),()=>parseNumberArgs(...Ue),"number format",Ge=>Reflect.apply(Ge.n,Ge,[...Ue]),()=>MISSING_RESOLVE_VALUE,Ge=>isString$6(Ge))}function K(Ue){return Ue.map(Ge=>isString$6(Ge)||isNumber$4(Ge)||isBoolean$4(Ge)?createTextNode(String(Ge)):Ge)}const ue={normalize:K,interpolate:Ue=>Ue,type:"vnode"};function be(...Ue){return re(Ge=>{let et;const ot=Ge;try{ot.processor=ue,et=Reflect.apply(translate,null,[ot,...Ue])}finally{ot.processor=null}return et},()=>parseTranslateArgs(...Ue),"translate",Ge=>Ge[TranslateVNodeSymbol](...Ue),Ge=>[createTextNode(Ge)],Ge=>isArray$7(Ge))}function ge(...Ue){return re(Ge=>Reflect.apply(number$1,null,[Ge,...Ue]),()=>parseNumberArgs(...Ue),"number format",Ge=>Ge[NumberPartsSymbol](...Ue),()=>[],Ge=>isString$6(Ge)||isArray$7(Ge))}function ye(...Ue){return re(Ge=>Reflect.apply(datetime,null,[Ge,...Ue]),()=>parseDateTimeArgs(...Ue),"datetime format",Ge=>Ge[DatetimePartsSymbol](...Ue),()=>[],Ge=>isString$6(Ge)||isArray$7(Ge))}function Ee(Ue){H=Ue,X.pluralRules=H}function Re(Ue,Ge){const et=isString$6(Ge)?Ge:E.value,ot=he(et);return X.messageResolver(ot,Ue)!==null}function Ne(Ue){let Ge=null;const et=fallbackWithLocaleChain(X,C.value,E.value);for(let ot=0;ot<et.length;ot++){const ht=T.value[et[ot]]||{},Oe=X.messageResolver(ht,Ue);if(Oe!=null){Ge=Oe;break}}return Ge}function Te(Ue){const Ge=Ne(Ue);return Ge??(_?_.tm(Ue)||{}:{})}function he(Ue){return T.value[Ue]||{}}function xe(Ue,Ge){T.value[Ue]=Ge,X.messages=T.value}function fe(Ue,Ge){T.value[Ue]=T.value[Ue]||{},deepCopy(Ge,T.value[Ue]),X.messages=T.value}function Be(Ue){return B.value[Ue]||{}}function Le(Ue,Ge){B.value[Ue]=Ge,X.datetimeFormats=B.value,clearDateTimeFormat(X,Ue,Ge)}function Ve(Ue,Ge){B.value[Ue]=assign$3(B.value[Ue]||{},Ge),X.datetimeFormats=B.value,clearDateTimeFormat(X,Ue,Ge)}function Ie(Ue){return A.value[Ue]||{}}function Me(Ue,Ge){A.value[Ue]=Ge,X.numberFormats=A.value,clearNumberFormat(X,Ue,Ge)}function He(Ue,Ge){A.value[Ue]=assign$3(A.value[Ue]||{},Ge),X.numberFormats=A.value,clearNumberFormat(X,Ue,Ge)}composerID++,_&&inBrowser&&(watch(_.locale,Ue=>{S&&(E.value=Ue,X.locale=Ue,updateFallbackLocale(X,E.value,C.value))}),watch(_.fallbackLocale,Ue=>{S&&(C.value=Ue,X.fallbackLocale=Ue,updateFallbackLocale(X,E.value,C.value))}));const We={id:composerID,locale:ae,fallbackLocale:ce,get inheritLocale(){return S},set inheritLocale(Ue){S=Ue,Ue&&_&&(E.value=_.locale.value,C.value=_.fallbackLocale.value,updateFallbackLocale(X,E.value,C.value))},get availableLocales(){return Object.keys(T.value).sort()},messages:ve,get modifiers(){return q},get pluralRules(){return H||{}},get isGlobal(){return x},get missingWarn(){return I},set missingWarn(Ue){I=Ue,X.missingWarn=I},get fallbackWarn(){return N},set fallbackWarn(Ue){N=Ue,X.fallbackWarn=N},get fallbackRoot(){return V},set fallbackRoot(Ue){V=Ue},get fallbackFormat(){return D},set fallbackFormat(Ue){D=Ue,X.fallbackFormat=D},get warnHtmlMessage(){return L},set warnHtmlMessage(Ue){L=Ue,X.warnHtmlMessage=Ue},get escapeParameter(){return j},set escapeParameter(Ue){j=Ue,X.escapeParameter=Ue},t:oe,getLocaleMessage:he,setLocaleMessage:xe,mergeLocaleMessage:fe,getPostTranslationHandler:Y,setPostTranslationHandler:U,getMissingHandler:W,setMissingHandler:ee,[SetPluralRulesSymbol]:Ee};return We.datetimeFormats=pe,We.numberFormats=G,We.rt=ie,We.te=Re,We.tm=Te,We.d=ne,We.n=te,We.getDateTimeFormat=Be,We.setDateTimeFormat=Le,We.mergeDateTimeFormat=Ve,We.getNumberFormat=Ie,We.setNumberFormat=Me,We.mergeNumberFormat=He,We[InejctWithOption]=r.__injectWithOption,We[TranslateVNodeSymbol]=be,We[DatetimePartsSymbol]=ye,We[NumberPartsSymbol]=ge,We}function convertComposerOptions(r){const n=isString$6(r.locale)?r.locale:DEFAULT_LOCALE,_=isString$6(r.fallbackLocale)||isArray$7(r.fallbackLocale)||isPlainObject$3(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:n,x=isFunction$3(r.missing)?r.missing:void 0,S=isBoolean$4(r.silentTranslationWarn)||isRegExp$3(r.silentTranslationWarn)?!r.silentTranslationWarn:!0,E=isBoolean$4(r.silentFallbackWarn)||isRegExp$3(r.silentFallbackWarn)?!r.silentFallbackWarn:!0,C=isBoolean$4(r.fallbackRoot)?r.fallbackRoot:!0,T=!!r.formatFallbackMessages,B=isPlainObject$3(r.modifiers)?r.modifiers:{},A=r.pluralizationRules,I=isFunction$3(r.postTranslation)?r.postTranslation:void 0,N=isString$6(r.warnHtmlInMessage)?r.warnHtmlInMessage!=="off":!0,V=!!r.escapeParameterHtml,D=isBoolean$4(r.sync)?r.sync:!0;let O=r.messages;if(isPlainObject$3(r.sharedMessages)){const X=r.sharedMessages;O=Object.keys(X).reduce((Z,ae)=>{const ce=Z[ae]||(Z[ae]={});return assign$3(ce,X[ae]),Z},O||{})}const{__i18n:F,__root:M,__injectWithOption:L}=r,j=r.datetimeFormats,q=r.numberFormats,H=r.flatJson;return{locale:n,fallbackLocale:_,messages:O,flatJson:H,datetimeFormats:j,numberFormats:q,missing:x,missingWarn:S,fallbackWarn:E,fallbackRoot:C,fallbackFormat:T,modifiers:B,pluralRules:A,postTranslation:I,warnHtmlMessage:N,escapeParameter:V,messageResolver:r.messageResolver,inheritLocale:D,__i18n:F,__root:M,__injectWithOption:L}}function createVueI18n(r={},n){{const _=createComposer(convertComposerOptions(r)),x={id:_.id,get locale(){return _.locale.value},set locale(S){_.locale.value=S},get fallbackLocale(){return _.fallbackLocale.value},set fallbackLocale(S){_.fallbackLocale.value=S},get messages(){return _.messages.value},get datetimeFormats(){return _.datetimeFormats.value},get numberFormats(){return _.numberFormats.value},get availableLocales(){return _.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(S){},get missing(){return _.getMissingHandler()},set missing(S){_.setMissingHandler(S)},get silentTranslationWarn(){return isBoolean$4(_.missingWarn)?!_.missingWarn:_.missingWarn},set silentTranslationWarn(S){_.missingWarn=isBoolean$4(S)?!S:S},get silentFallbackWarn(){return isBoolean$4(_.fallbackWarn)?!_.fallbackWarn:_.fallbackWarn},set silentFallbackWarn(S){_.fallbackWarn=isBoolean$4(S)?!S:S},get modifiers(){return _.modifiers},get formatFallbackMessages(){return _.fallbackFormat},set formatFallbackMessages(S){_.fallbackFormat=S},get postTranslation(){return _.getPostTranslationHandler()},set postTranslation(S){_.setPostTranslationHandler(S)},get sync(){return _.inheritLocale},set sync(S){_.inheritLocale=S},get warnHtmlInMessage(){return _.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(S){_.warnHtmlMessage=S!=="off"},get escapeParameterHtml(){return _.escapeParameter},set escapeParameterHtml(S){_.escapeParameter=S},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(S){},get pluralizationRules(){return _.pluralRules||{}},__composer:_,t(...S){const[E,C,T]=S,B={};let A=null,I=null;if(!isString$6(E))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const N=E;return isString$6(C)?B.locale=C:isArray$7(C)?A=C:isPlainObject$3(C)&&(I=C),isArray$7(T)?A=T:isPlainObject$3(T)&&(I=T),Reflect.apply(_.t,_,[N,A||I||{},B])},rt(...S){return Reflect.apply(_.rt,_,[...S])},tc(...S){const[E,C,T]=S,B={plural:1};let A=null,I=null;if(!isString$6(E))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const N=E;return isString$6(C)?B.locale=C:isNumber$4(C)?B.plural=C:isArray$7(C)?A=C:isPlainObject$3(C)&&(I=C),isString$6(T)?B.locale=T:isArray$7(T)?A=T:isPlainObject$3(T)&&(I=T),Reflect.apply(_.t,_,[N,A||I||{},B])},te(S,E){return _.te(S,E)},tm(S){return _.tm(S)},getLocaleMessage(S){return _.getLocaleMessage(S)},setLocaleMessage(S,E){_.setLocaleMessage(S,E)},mergeLocaleMessage(S,E){_.mergeLocaleMessage(S,E)},d(...S){return Reflect.apply(_.d,_,[...S])},getDateTimeFormat(S){return _.getDateTimeFormat(S)},setDateTimeFormat(S,E){_.setDateTimeFormat(S,E)},mergeDateTimeFormat(S,E){_.mergeDateTimeFormat(S,E)},n(...S){return Reflect.apply(_.n,_,[...S])},getNumberFormat(S){return _.getNumberFormat(S)},setNumberFormat(S,E){_.setNumberFormat(S,E)},mergeNumberFormat(S,E){_.mergeNumberFormat(S,E)},getChoiceIndex(S,E){return-1},__onComponentInstanceCreated(S){const{componentInstanceCreatedListener:E}=r;E&&E(S,x)}};return x}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:r=>r==="parent"||r==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:r},n){return n.length===1&&n[0]==="default"?(r.default?r.default():[]).reduce((x,S)=>[...x,...S.type===Fragment?S.children:[S]],[]):n.reduce((_,x)=>{const S=r[x];return S&&(_[x]=S()),_},{})}function getFragmentableTag(r){return Fragment}const TranslationImpl=defineComponent$1({name:"i18n-t",props:assign$3({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:r=>isNumber$4(r)||!isNaN(r)}},baseFormatProps),setup(r,n){const{slots:_,attrs:x}=n,S=r.i18n||useI18n({useScope:r.scope,__useComponent:!0});return()=>{const E=Object.keys(_).filter(N=>N!=="_"),C={};r.locale&&(C.locale=r.locale),r.plural!==void 0&&(C.plural=isString$6(r.plural)?+r.plural:r.plural);const T=getInterpolateArg(n,E),B=S[TranslateVNodeSymbol](r.keypath,T,C),A=assign$3({},x),I=isString$6(r.tag)||isObject$4(r.tag)?r.tag:getFragmentableTag();return h$1(I,A,B)}}}),Translation=TranslationImpl;function isVNode(r){return isArray$7(r)&&!isString$6(r[0])}function renderFormatter(r,n,_,x){const{slots:S,attrs:E}=n;return()=>{const C={part:!0};let T={};r.locale&&(C.locale=r.locale),isString$6(r.format)?C.key=r.format:isObject$4(r.format)&&(isString$6(r.format.key)&&(C.key=r.format.key),T=Object.keys(r.format).reduce((V,D)=>_.includes(D)?assign$3({},V,{[D]:r.format[D]}):V,{}));const B=x(r.value,C,T);let A=[C.key];isArray$7(B)?A=B.map((V,D)=>{const O=S[V.type],F=O?O({[V.type]:V.value,index:D,parts:B}):[V.value];return isVNode(F)&&(F[0].key=`${V.type}-${D}`),F}):isString$6(B)&&(A=[B]);const I=assign$3({},E),N=isString$6(r.tag)||isObject$4(r.tag)?r.tag:getFragmentableTag();return h$1(N,I,A)}}const NumberFormatImpl=defineComponent$1({name:"i18n-n",props:assign$3({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(r,n){const _=r.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(r,n,NUMBER_FORMAT_OPTIONS_KEYS,(...x)=>_[NumberPartsSymbol](...x))}}),NumberFormat=NumberFormatImpl,DatetimeFormatImpl=defineComponent$1({name:"i18n-d",props:assign$3({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(r,n){const _=r.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(r,n,DATETIME_FORMAT_OPTIONS_KEYS,(...x)=>_[DatetimePartsSymbol](...x))}}),DatetimeFormat=DatetimeFormatImpl;function getComposer$2(r,n){const _=r;if(r.mode==="composition")return _.__getInstance(n)||r.global;{const x=_.__getInstance(n);return x!=null?x.__composer:r.global.__composer}}function vTDirective(r){const n=C=>{const{instance:T,modifiers:B,value:A}=C;if(!T||!T.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const I=getComposer$2(r,T.$),N=parseValue(A);return[Reflect.apply(I.t,I,[...makeParams(N)]),I]};return{created:(C,T)=>{const[B,A]=n(T);inBrowser&&r.global===A&&(C.__i18nWatcher=watch(A.locale,()=>{T.instance&&T.instance.$forceUpdate()})),C.__composer=A,C.textContent=B},unmounted:C=>{inBrowser&&C.__i18nWatcher&&(C.__i18nWatcher(),C.__i18nWatcher=void 0,delete C.__i18nWatcher),C.__composer&&(C.__composer=void 0,delete C.__composer)},beforeUpdate:(C,{value:T})=>{if(C.__composer){const B=C.__composer,A=parseValue(T);C.textContent=Reflect.apply(B.t,B,[...makeParams(A)])}},getSSRProps:C=>{const[T]=n(C);return{textContent:T}}}}function parseValue(r){if(isString$6(r))return{path:r};if(isPlainObject$3(r)){if(!("path"in r))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return r}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(r){const{path:n,locale:_,args:x,choice:S,plural:E}=r,C={},T=x||{};return isString$6(_)&&(C.locale=_),isNumber$4(S)&&(C.plural=S),isNumber$4(E)&&(C.plural=E),[n,T,C]}function apply(r,n,..._){const x=isPlainObject$3(_[0])?_[0]:{},S=!!x.useI18nComponentName;(isBoolean$4(x.globalInstall)?x.globalInstall:!0)&&(r.component(S?"i18n":Translation.name,Translation),r.component(NumberFormat.name,NumberFormat),r.component(DatetimeFormat.name,DatetimeFormat)),r.directive("t",vTDirective(n))}function defineMixin(r,n,_){return{beforeCreate(){const x=getCurrentInstance$1();if(!x)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const S=this.$options;if(S.i18n){const E=S.i18n;S.__i18n&&(E.__i18n=S.__i18n),E.__root=n,this===this.$root?this.$i18n=mergeToRoot(r,E):(E.__injectWithOption=!0,this.$i18n=createVueI18n(E))}else S.__i18n?this===this.$root?this.$i18n=mergeToRoot(r,S):this.$i18n=createVueI18n({__i18n:S.__i18n,__injectWithOption:!0,__root:n}):this.$i18n=r;S.__i18nGlobal&&adjustI18nResources(n,S,S),r.__onComponentInstanceCreated(this.$i18n),_.__setInstance(x,this.$i18n),this.$t=(...E)=>this.$i18n.t(...E),this.$rt=(...E)=>this.$i18n.rt(...E),this.$tc=(...E)=>this.$i18n.tc(...E),this.$te=(E,C)=>this.$i18n.te(E,C),this.$d=(...E)=>this.$i18n.d(...E),this.$n=(...E)=>this.$i18n.n(...E),this.$tm=E=>this.$i18n.tm(E),this!==this.$root&&!this.$i18n.__extended__&&_.__vueI18nExtend&&(_.__vueI18nExtend(this.$i18n),this.$i18n.__extended__=!0)},mounted(){},unmounted(){const x=getCurrentInstance$1();if(!x)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,_.__deleteInstance(x),delete this.$i18n}}}function mergeToRoot(r,n){r.locale=n.locale||r.locale,r.fallbackLocale=n.fallbackLocale||r.fallbackLocale,r.missing=n.missing||r.missing,r.silentTranslationWarn=n.silentTranslationWarn||r.silentFallbackWarn,r.silentFallbackWarn=n.silentFallbackWarn||r.silentFallbackWarn,r.formatFallbackMessages=n.formatFallbackMessages||r.formatFallbackMessages,r.postTranslation=n.postTranslation||r.postTranslation,r.warnHtmlInMessage=n.warnHtmlInMessage||r.warnHtmlInMessage,r.escapeParameterHtml=n.escapeParameterHtml||r.escapeParameterHtml,r.sync=n.sync||r.sync,r.__composer[SetPluralRulesSymbol](n.pluralizationRules||r.pluralizationRules);const _=getLocaleMessages(r.locale,{messages:n.messages,__i18n:n.__i18n});return Object.keys(_).forEach(x=>r.mergeLocaleMessage(x,_[x])),n.datetimeFormats&&Object.keys(n.datetimeFormats).forEach(x=>r.mergeDateTimeFormat(x,n.datetimeFormats[x])),n.numberFormats&&Object.keys(n.numberFormats).forEach(x=>r.mergeNumberFormat(x,n.numberFormats[x])),r}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(r={},n){const _=__VUE_I18N_LEGACY_API__&&isBoolean$4(r.legacy)?r.legacy:__VUE_I18N_LEGACY_API__,x=isBoolean$4(r.globalInjection)?r.globalInjection:!0,S=__VUE_I18N_LEGACY_API__&&_?!!r.allowComposition:!0,E=new Map,[C,T]=createGlobal(r,_),B=makeSymbol("");function A(V){return E.get(V)||null}function I(V,D){E.set(V,D)}function N(V){E.delete(V)}{const V={get mode(){return __VUE_I18N_LEGACY_API__&&_?"legacy":"composition"},get allowComposition(){return S},async install(D,...O){if(D.__VUE_I18N_SYMBOL__=B,D.provide(D.__VUE_I18N_SYMBOL__,V),isPlainObject$3(O[0])){const M=O[0];V.__composerExtend=M.__composerExtend,V.__vueI18nExtend=M.__vueI18nExtend}!_&&x&&injectGlobalFields(D,V.global),__VUE_I18N_FULL_INSTALL__&&apply(D,V,...O),__VUE_I18N_LEGACY_API__&&_&&D.mixin(defineMixin(T,T.__composer,V));const F=D.unmount;D.unmount=()=>{V.dispose(),F()}},get global(){return T},dispose(){C.stop()},__instances:E,__getInstance:A,__setInstance:I,__deleteInstance:N};return V}}function useI18n(r={}){const n=getCurrentInstance$1();if(n==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!n.isCE&&n.appContext.app!=null&&!n.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSLALLED);const _=getI18nInstance(n),x=getGlobalComposer(_),S=getComponentOptions(n),E=getScope(r,S);if(__VUE_I18N_LEGACY_API__&&_.mode==="legacy"&&!r.__useComponent){if(!_.allowComposition)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE);return useI18nForLegacy(n,E,x,r)}if(E==="global")return adjustI18nResources(x,r,S),x;if(E==="parent"){let B=getComposer(_,n,r.__useComponent);return B==null&&(B=x),B}const C=_;let T=C.__getInstance(n);if(T==null){const B=assign$3({},r);"__i18n"in S&&(B.__i18n=S.__i18n),x&&(B.__root=x),T=createComposer(B),C.__composerExtend&&C.__composerExtend(T),setupLifeCycle(C,n),C.__setInstance(n,T)}return T}function createGlobal(r,n,_){const x=effectScope();{const S=__VUE_I18N_LEGACY_API__&&n?x.run(()=>createVueI18n(r)):x.run(()=>createComposer(r));if(S==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[x,S]}}function getI18nInstance(r){{const n=inject$1(r.isCE?I18nInjectionKey:r.appContext.app.__VUE_I18N_SYMBOL__);if(!n)throw createI18nError(r.isCE?I18nErrorCodes.NOT_INSLALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return n}}function getScope(r,n){return isEmptyObject(r)?"__i18n"in n?"local":"global":r.useScope?r.useScope:"local"}function getGlobalComposer(r){return r.mode==="composition"?r.global:r.global.__composer}function getComposer(r,n,_=!1){let x=null;const S=n.root;let E=n.parent;for(;E!=null;){const C=r;if(r.mode==="composition")x=C.__getInstance(E);else if(__VUE_I18N_LEGACY_API__){const T=C.__getInstance(E);T!=null&&(x=T.__composer,_&&x&&!x[InejctWithOption]&&(x=null))}if(x!=null||S===E)break;E=E.parent}return x}function setupLifeCycle(r,n,_){onMounted(()=>{},n),onUnmounted(()=>{r.__deleteInstance(n)},n)}function useI18nForLegacy(r,n,_,x={}){const S=n==="local",E=shallowRef(null);if(S&&r.proxy&&!(r.proxy.$options.i18n||r.proxy.$options.__i18n))throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const C=isBoolean$4(x.inheritLocale)?x.inheritLocale:!0,T=ref$1(S&&C?_.locale.value:isString$6(x.locale)?x.locale:DEFAULT_LOCALE),B=ref$1(S&&C?_.fallbackLocale.value:isString$6(x.fallbackLocale)||isArray$7(x.fallbackLocale)||isPlainObject$3(x.fallbackLocale)||x.fallbackLocale===!1?x.fallbackLocale:T.value),A=ref$1(getLocaleMessages(T.value,x)),I=ref$1(isPlainObject$3(x.datetimeFormats)?x.datetimeFormats:{[T.value]:{}}),N=ref$1(isPlainObject$3(x.numberFormats)?x.numberFormats:{[T.value]:{}}),V=S?_.missingWarn:isBoolean$4(x.missingWarn)||isRegExp$3(x.missingWarn)?x.missingWarn:!0,D=S?_.fallbackWarn:isBoolean$4(x.fallbackWarn)||isRegExp$3(x.fallbackWarn)?x.fallbackWarn:!0,O=S?_.fallbackRoot:isBoolean$4(x.fallbackRoot)?x.fallbackRoot:!0,F=!!x.fallbackFormat,M=isFunction$3(x.missing)?x.missing:null,L=isFunction$3(x.postTranslation)?x.postTranslation:null,j=S?_.warnHtmlMessage:isBoolean$4(x.warnHtmlMessage)?x.warnHtmlMessage:!0,q=!!x.escapeParameter,H=S?_.modifiers:isPlainObject$3(x.modifiers)?x.modifiers:{},X=x.pluralRules||S&&_.pluralRules;function J(){return[T.value,B.value,A.value,I.value,N.value]}const Z=computed({get:()=>E.value?E.value.locale.value:T.value,set:fe=>{E.value&&(E.value.locale.value=fe),T.value=fe}}),ae=computed({get:()=>E.value?E.value.fallbackLocale.value:B.value,set:fe=>{E.value&&(E.value.fallbackLocale.value=fe),B.value=fe}}),ce=computed(()=>E.value?E.value.messages.value:A.value),ve=computed(()=>I.value),pe=computed(()=>N.value);function G(){return E.value?E.value.getPostTranslationHandler():L}function Y(fe){E.value&&E.value.setPostTranslationHandler(fe)}function U(){return E.value?E.value.getMissingHandler():M}function W(fe){E.value&&E.value.setMissingHandler(fe)}function ee(fe){return J(),fe()}function re(...fe){return E.value?ee(()=>Reflect.apply(E.value.t,null,[...fe])):ee(()=>"")}function oe(...fe){return E.value?Reflect.apply(E.value.rt,null,[...fe]):""}function ie(...fe){return E.value?ee(()=>Reflect.apply(E.value.d,null,[...fe])):ee(()=>"")}function ne(...fe){return E.value?ee(()=>Reflect.apply(E.value.n,null,[...fe])):ee(()=>"")}function te(fe){return E.value?E.value.tm(fe):{}}function K(fe,Be){return E.value?E.value.te(fe,Be):!1}function le(fe){return E.value?E.value.getLocaleMessage(fe):{}}function ue(fe,Be){E.value&&(E.value.setLocaleMessage(fe,Be),A.value[fe]=Be)}function be(fe,Be){E.value&&E.value.mergeLocaleMessage(fe,Be)}function ge(fe){return E.value?E.value.getDateTimeFormat(fe):{}}function ye(fe,Be){E.value&&(E.value.setDateTimeFormat(fe,Be),I.value[fe]=Be)}function Ee(fe,Be){E.value&&E.value.mergeDateTimeFormat(fe,Be)}function Re(fe){return E.value?E.value.getNumberFormat(fe):{}}function Ne(fe,Be){E.value&&(E.value.setNumberFormat(fe,Be),N.value[fe]=Be)}function Te(fe,Be){E.value&&E.value.mergeNumberFormat(fe,Be)}const he={get id(){return E.value?E.value.id:-1},locale:Z,fallbackLocale:ae,messages:ce,datetimeFormats:ve,numberFormats:pe,get inheritLocale(){return E.value?E.value.inheritLocale:C},set inheritLocale(fe){E.value&&(E.value.inheritLocale=fe)},get availableLocales(){return E.value?E.value.availableLocales:Object.keys(A.value)},get modifiers(){return E.value?E.value.modifiers:H},get pluralRules(){return E.value?E.value.pluralRules:X},get isGlobal(){return E.value?E.value.isGlobal:!1},get missingWarn(){return E.value?E.value.missingWarn:V},set missingWarn(fe){E.value&&(E.value.missingWarn=fe)},get fallbackWarn(){return E.value?E.value.fallbackWarn:D},set fallbackWarn(fe){E.value&&(E.value.missingWarn=fe)},get fallbackRoot(){return E.value?E.value.fallbackRoot:O},set fallbackRoot(fe){E.value&&(E.value.fallbackRoot=fe)},get fallbackFormat(){return E.value?E.value.fallbackFormat:F},set fallbackFormat(fe){E.value&&(E.value.fallbackFormat=fe)},get warnHtmlMessage(){return E.value?E.value.warnHtmlMessage:j},set warnHtmlMessage(fe){E.value&&(E.value.warnHtmlMessage=fe)},get escapeParameter(){return E.value?E.value.escapeParameter:q},set escapeParameter(fe){E.value&&(E.value.escapeParameter=fe)},t:re,getPostTranslationHandler:G,setPostTranslationHandler:Y,getMissingHandler:U,setMissingHandler:W,rt:oe,d:ie,n:ne,tm:te,te:K,getLocaleMessage:le,setLocaleMessage:ue,mergeLocaleMessage:be,getDateTimeFormat:ge,setDateTimeFormat:ye,mergeDateTimeFormat:Ee,getNumberFormat:Re,setNumberFormat:Ne,mergeNumberFormat:Te};function xe(fe){fe.locale.value=T.value,fe.fallbackLocale.value=B.value,Object.keys(A.value).forEach(Be=>{fe.mergeLocaleMessage(Be,A.value[Be])}),Object.keys(I.value).forEach(Be=>{fe.mergeDateTimeFormat(Be,I.value[Be])}),Object.keys(N.value).forEach(Be=>{fe.mergeNumberFormat(Be,N.value[Be])}),fe.escapeParameter=q,fe.fallbackFormat=F,fe.fallbackRoot=O,fe.fallbackWarn=D,fe.missingWarn=V,fe.warnHtmlMessage=j}return onBeforeMount(()=>{if(r.proxy==null||r.proxy.$i18n==null)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const fe=E.value=r.proxy.$i18n.__composer;n==="global"?(T.value=fe.locale.value,B.value=fe.fallbackLocale.value,A.value=fe.messages.value,I.value=fe.datetimeFormats.value,N.value=fe.numberFormats.value):S&&xe(fe)}),he}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(r,n){const _=Object.create(null);globalExportProps.forEach(x=>{const S=Object.getOwnPropertyDescriptor(n,x);if(!S)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const E=isRef(S.value)?{get(){return S.value.value},set(C){S.value.value=C}}:{get(){return S.get&&S.get()}};Object.defineProperty(_,x,E)}),r.config.globalProperties.$i18n=_,globalExportMethods.forEach(x=>{const S=Object.getOwnPropertyDescriptor(n,x);if(!S||!S.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(r.config.globalProperties,`$${x}`,S)})}registerMessageCompiler(compileToFunction);registerMessageResolver(resolveValue);registerLocaleFallbacker(fallbackWithLocaleChain);initFeatureFlags();if(__INTLIFY_PROD_DEVTOOLS__){const r=getGlobalThis();r.__INTLIFY__=!0,setDevToolsHook(r.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const useI18n_=()=>{const{langue:r,languesAlternatives:n}=utiliserLangues(),_=inject$1(""),{codesLanguesDisponibles:x}=__(),S=useI18n({messages:_?.value||{}});watchEffect(()=>{S.locale.value=r.value});const E=computed(()=>[...n.value,...x.value.filter(C=>C!==r.value&&!n.value.includes(C))]);return watch([E],()=>{S.fallbackLocale.value=E.value}),S.fallbackLocale.value=E.value,{...S,$t:S.t}},__=()=>{const r=inject$1(""),n=inject$1("locales")?.nuchabl;if(!r)throw new Error(" .");if(!n)throw new Error("Nuch'ab'l .");const _=ref$1([]);let x;onMounted(async()=>{x=await r._({:V=>_.value=V})}),onUnmounted(async()=>{x&&await x()});const S=[],E=inject$1(""),C=ref$1([]);E&&E._({:V=>{lodashExports.isEqual(V,C.value)||(C.value=V)},:!0}).then(V=>S.push(V));const T=ref$1([]),B=n.tatzeqelbejKonojelChabl({sm:V=>T.value=V});S.push(B),onUnmounted(async()=>{await Promise.all(S.map(V=>V()))});const A=computed(()=>[...new Set([...T.value,...C.value])]),I=computed(()=>A.value.map(V=>({code:V,lng:n.rubiChabl({runuk:V})})).filter(V=>V.lng));return{codesLanguesDisponibles:A,languesEtCodes:I,nomLangue:V=>computed(()=>{const D=typeof V=="string"?V:V.value;if(V)return I.value.find(O=>O.code===D)?.lng}),_:_}},__=({:r,:n=""})=>{const _=inject$1("");if(!_)throw new Error(" .");const x=ref$1();let S;return onMounted(async()=>{typeof r=="string"?S=await _._({:r,:n,:E=>x.value=E}):r.value&&(S=await _._({:r.value,:n,:E=>x.value=E}))}),onUnmounted(async()=>{S&&await S()}),typeof r!="string"&&watchEffect(async()=>{S&&await S(),r.value?S=await _._({:r.value,:n,:E=>x.value=E}):(x.value=void 0,S=void 0)}),{_:x}},_=()=>{const r=inject$1("");if(!r)throw new Error(" .");const n=ref$1();let _;return onMounted(async()=>{_=await r._({:x=>n.value=x})}),onUnmounted(async()=>{_&&await _()}),{:n}},_=()=>{const r=inject$1("");if(!r)throw new Error(" .");const n=ref$1({});let _;return onMounted(async()=>{_=await r.__({:x=>n.value=x})}),onUnmounted(async()=>{_&&await _()}),{_:n}},_=()=>{const r=inject$1("");if(!r)throw new Error(" .");const n=ref$1([]);let _;return onMounted(async()=>{_=(await r.__({:x=>n.value=x})).fOublier}),onUnmounted(async()=>{_&&await _()}),{:n}},_=({_:r,_:n})=>({install:_=>{const x=_.config.globalProperties.$constl;if(!x)throw Error(" .");const S=new ({:x,_:__(n),_:r}),E=ref$1({});S._({:C=>{E.value=__(C)},:""}),_.config.globalProperties.$=S,_.provide("",E),_.provide("",S)}}),_=()=>({__,__,_,_,_,useI18n:useI18n_}),enregistrercoute=r=>{let n;const _=new EventEmitter$4;let x;const S=new Promise(E=>{once_1(_,"prt").then(()=>{E(x)})});return onMounted(async()=>{x=await r,x instanceof Function?n=x:n=x?.fOublier,_.emit("prt")}),onUnmounted(async()=>{n&&await n()}),S},enregistrercouteDynamique=({params:r,fcoute:n})=>{const _=ref$1();let x;const S=computed(()=>{const C=Object.fromEntries(Object.entries(r).map(([T,B])=>[T,B.value]));if(Object.values(C).every(T=>T!==void 0))return C}),E=async()=>{x&&await x(),S.value?x=await enregistrercoute(n(S.value,C=>_.value=C)):_.value=void 0};return watch(Object.values(r),E),E(),computed(()=>_.value)},enregistrerRecherche=({requte:r,rfRsultat:n,fRecherche:_,fRechercheDfaut:x})=>{let S,E;const C=ref$1(10),T=A=>!!A.fChangerProfondeur,B=async()=>{if(S&&await S(),r.value){const A=await _({requte:r.value,nOuProfondeur:C.value,rfRsultat:n});A&&(S=A.fOublier,E=T(A)?A.fChangerProfondeur:A.fChangerN)}else if(x){const A=await x({nOuProfondeur:C.value,rfRsultat:n});A&&(S=A.fOublier,E=T(A)?A.fChangerProfondeur:A.fChangerN)}else n.value=[]};return watch(r,B),B(),watchEffect(async()=>{E&&E(C.value)}),onUnmounted(async()=>{S&&await S()}),C};class MultiChercheur{constructor(){_t(this,"nOuProfondeur");_t(this,"fOublierRecherche");this.nOuProfondeur=ref$1(10),onUnmounted(async()=>{this.fOublierRecherche&&await this.fOublierRecherche()})}async lancerRecherche({requte:n,rfRsultat:_,fRecherche:x,fRechercheDfaut:S}){this.fOublierRecherche&&(await this.fOublierRecherche(),this.fOublierRecherche=void 0);let E,C;const T=A=>!!A.fChangerProfondeur,B=async()=>{if(E&&await E(),n.value){const A=await x({requte:n.value,nOuProfondeur:this.nOuProfondeur.value,rfRsultat:_});A&&(E=A.fOublier,C=T(A)?A.fChangerProfondeur:A.fChangerN)}else if(S){const A=await S({nOuProfondeur:this.nOuProfondeur.value,rfRsultat:_});A&&(E=A.fOublier,C=T(A)?A.fChangerProfondeur:A.fChangerN)}else _.value=[]};watch(n,B),B(),watchEffect(async()=>{C&&C(this.nOuProfondeur.value)}),this.fOublierRecherche=E}}var isVue2=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=r=>activePinia=r,piniaSymbol=Symbol();function isPlainObject$2(r){return r&&typeof r=="object"&&Object.prototype.toString.call(r)==="[object Object]"&&typeof r.toJSON!="function"}var MutationType;(function(r){r.direct="direct",r.patchObject="patch object",r.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const r=effectScope(!0),n=r.run(()=>ref$1({}));let _=[],x=[];const S=markRaw({install(E){setActivePinia(S),S._a=E,E.provide(piniaSymbol,S),E.config.globalProperties.$pinia=S,x.forEach(C=>_.push(C)),x=[]},use(E){return!this._a&&!isVue2?x.push(E):_.push(E),this},_p:_,_a:null,_e:r,_s:new Map,state:n});return S}const noop$7=()=>{};function addSubscription(r,n,_,x=noop$7){r.push(n);const S=()=>{const E=r.indexOf(n);E>-1&&(r.splice(E,1),x())};return!_&&getCurrentScope()&&onScopeDispose(S),S}function triggerSubscriptions(r,...n){r.slice().forEach(_=>{_(...n)})}const fallbackRunWithContext=r=>r();function mergeReactiveObjects(r,n){r instanceof Map&&n instanceof Map&&n.forEach((_,x)=>r.set(x,_)),r instanceof Set&&n instanceof Set&&n.forEach(r.add,r);for(const _ in n){if(!n.hasOwnProperty(_))continue;const x=n[_],S=r[_];isPlainObject$2(S)&&isPlainObject$2(x)&&r.hasOwnProperty(_)&&!isRef(x)&&!isReactive(x)?r[_]=mergeReactiveObjects(S,x):r[_]=x}return r}const skipHydrateSymbol=Symbol();function shouldHydrate(r){return!isPlainObject$2(r)||!r.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$2}=Object;function isComputed(r){return!!(isRef(r)&&r.effect)}function createOptionsStore(r,n,_,x){const{state:S,actions:E,getters:C}=n,T=_.state.value[r];let B;function A(){T||(_.state.value[r]=S?S():{});const I=toRefs(_.state.value[r]);return assign$2(I,E,Object.keys(C||{}).reduce((N,V)=>(N[V]=markRaw(computed(()=>{setActivePinia(_);const D=_._s.get(r);return C[V].call(D,D)})),N),{}))}return B=createSetupStore(r,A,n,_,x,!0),B}function createSetupStore(r,n,_={},x,S,E){let C;const T=assign$2({actions:{}},_),B={deep:!0};let A,I,N=[],V=[],D;const O=x.state.value[r];!E&&!O&&(x.state.value[r]={}),ref$1({});let F;function M(ae){let ce;A=I=!1,typeof ae=="function"?(ae(x.state.value[r]),ce={type:MutationType.patchFunction,storeId:r,events:D}):(mergeReactiveObjects(x.state.value[r],ae),ce={type:MutationType.patchObject,payload:ae,storeId:r,events:D});const ve=F=Symbol();nextTick$2().then(()=>{F===ve&&(A=!0)}),I=!0,triggerSubscriptions(N,ce,x.state.value[r])}const L=E?function(){const{state:ce}=_,ve=ce?ce():{};this.$patch(pe=>{assign$2(pe,ve)})}:noop$7;function j(){C.stop(),N=[],V=[],x._s.delete(r)}function q(ae,ce){return function(){setActivePinia(x);const ve=Array.from(arguments),pe=[],G=[];function Y(ee){pe.push(ee)}function U(ee){G.push(ee)}triggerSubscriptions(V,{args:ve,name:ae,store:X,after:Y,onError:U});let W;try{W=ce.apply(this&&this.$id===r?this:X,ve)}catch(ee){throw triggerSubscriptions(G,ee),ee}return W instanceof Promise?W.then(ee=>(triggerSubscriptions(pe,ee),ee)).catch(ee=>(triggerSubscriptions(G,ee),Promise.reject(ee))):(triggerSubscriptions(pe,W),W)}}const H={_p:x,$id:r,$onAction:addSubscription.bind(null,V),$patch:M,$reset:L,$subscribe(ae,ce={}){const ve=addSubscription(N,ae,ce.detached,()=>pe()),pe=C.run(()=>watch(()=>x.state.value[r],G=>{(ce.flush==="sync"?I:A)&&ae({storeId:r,type:MutationType.direct,events:D},G)},assign$2({},B,ce)));return ve},$dispose:j},X=reactive(H);x._s.set(r,X);const J=x._a&&x._a.runWithContext||fallbackRunWithContext,Z=x._e.run(()=>(C=effectScope(),J(()=>C.run(n))));for(const ae in Z){const ce=Z[ae];if(isRef(ce)&&!isComputed(ce)||isReactive(ce))E||(O&&shouldHydrate(ce)&&(isRef(ce)?ce.value=O[ae]:mergeReactiveObjects(ce,O[ae])),x.state.value[r][ae]=ce);else if(typeof ce=="function"){const ve=q(ae,ce);Z[ae]=ve,T.actions[ae]=ce}}return assign$2(X,Z),assign$2(toRaw(X),Z),Object.defineProperty(X,"$state",{get:()=>x.state.value[r],set:ae=>{M(ce=>{assign$2(ce,ae)})}}),x._p.forEach(ae=>{assign$2(X,C.run(()=>ae({store:X,app:x._a,pinia:x,options:T})))}),O&&E&&_.hydrate&&_.hydrate(X.$state,O),A=!0,I=!0,X}function defineStore(r,n,_){let x,S;const E=typeof n=="function";typeof r=="string"?(x=r,S=E?_:n):(S=r,x=r.id);function C(T,B){const A=hasInjectionContext();return T=T||(A?inject$1(piniaSymbol,null):null),T&&setActivePinia(T),T=activePinia,T._s.has(x)||(E?createSetupStore(x,n,S,T):createOptionsStore(x,S,T)),T._s.get(x)}return C.$id=x,C}function storeToRefs(r){{r=toRaw(r);const n={};for(const _ in r){const x=r[_];(isRef(x)||isReactive(x))&&(n[_]=toRef(r,_))}return n}}const IN_BROWSER=typeof window<"u",SUPPORTS_INTERSECTION=IN_BROWSER&&"IntersectionObserver"in window,SUPPORTS_TOUCH=IN_BROWSER&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);function _classPrivateFieldInitSpec(r,n,_){_checkPrivateRedeclaration(r,n),n.set(r,_)}function _checkPrivateRedeclaration(r,n){if(n.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(r,n,_){var x=_classExtractFieldDescriptor(r,n,"set");return _classApplyDescriptorSet(r,x,_),_}function _classApplyDescriptorSet(r,n,_){if(n.set)n.set.call(r,_);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=_}}function _classPrivateFieldGet(r,n){var _=_classExtractFieldDescriptor(r,n,"get");return _classApplyDescriptorGet(r,_)}function _classExtractFieldDescriptor(r,n,_){if(!n.has(r))throw new TypeError("attempted to "+_+" private field on non-instance");return n.get(r)}function _classApplyDescriptorGet(r,n){return n.get?n.get.call(r):n.value}function getNestedValue(r,n,_){const x=n.length-1;if(x<0)return r===void 0?_:r;for(let S=0;S<x;S++){if(r==null)return _;r=r[n[S]]}return r==null||r[n[x]]===void 0?_:r[n[x]]}function deepEqual$2(r,n){if(r===n)return!0;if(r instanceof Date&&n instanceof Date&&r.getTime()!==n.getTime()||r!==Object(r)||n!==Object(n))return!1;const _=Object.keys(r);return _.length!==Object.keys(n).length?!1:_.every(x=>deepEqual$2(r[x],n[x]))}function getObjectValueByPath(r,n,_){return r==null||!n||typeof n!="string"?_:r[n]!==void 0?r[n]:(n=n.replace(/\[(\w+)\]/g,".$1"),n=n.replace(/^\./,""),getNestedValue(r,n.split("."),_))}function getPropertyFromItem(r,n,_){if(n==null)return r===void 0?_:r;if(r!==Object(r)){if(typeof n!="function")return _;const S=n(r,_);return typeof S>"u"?_:S}if(typeof n=="string")return getObjectValueByPath(r,n,_);if(Array.isArray(n))return getNestedValue(r,n,_);if(typeof n!="function")return _;const x=n(r,_);return typeof x>"u"?_:x}function createRange(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:r},(_,x)=>n+x)}function convertToUnit(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(r==null||r===""))return isNaN(+r)?String(r):isFinite(+r)?`${Number(r)}${n}`:void 0}function isObject$3(r){return r!==null&&typeof r=="object"&&!Array.isArray(r)}function refElement(r){return r&&"$el"in r?r.$el:r}const keyCodes=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function keys$3(r){return Object.keys(r)}function has$3(r,n){return n.every(_=>r.hasOwnProperty(_))}function pick$1(r,n,_){const x=Object.create(null),S=Object.create(null);for(const E in r)n.some(C=>C instanceof RegExp?C.test(E):C===E)&&!_?.some(C=>C===E)?x[E]=r[E]:S[E]=r[E];return[x,S]}function omit(r,n){const _={...r};return n.forEach(x=>delete _[x]),_}const onRE=/^on[^a-z]/,isOn=r=>onRE.test(r),bubblingEvents=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"];function filterInputAttrs(r){const[n,_]=pick$1(r,[onRE]),x=omit(n,bubblingEvents),[S,E]=pick$1(_,["class","style","id",/^data-/]);return Object.assign(S,n),Object.assign(E,x),[S,E]}function wrapInArray(r){return r==null?[]:Array.isArray(r)?r:[r]}function clamp(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(n,Math.min(_,r))}function padEnd(r,n){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return r+_.repeat(Math.max(0,n-r.length))}function chunk(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const _=[];let x=0;for(;x<r.length;)_.push(r.substr(x,n)),x+=n;return _}function mergeDeep(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2?arguments[2]:void 0;const x={};for(const S in r)x[S]=r[S];for(const S in n){const E=r[S],C=n[S];if(isObject$3(E)&&isObject$3(C)){x[S]=mergeDeep(E,C,_);continue}if(Array.isArray(E)&&Array.isArray(C)&&_){x[S]=_(E,C);continue}x[S]=C}return x}function flattenFragments(r){return r.map(n=>n.type===Fragment?flattenFragments(n.children):n).flat()}function toKebabCase(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(toKebabCase.cache.has(r))return toKebabCase.cache.get(r);const n=r.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return toKebabCase.cache.set(r,n),n}toKebabCase.cache=new Map;function findChildrenWithProvide(r,n){if(!n||typeof n!="object")return[];if(Array.isArray(n))return n.map(_=>findChildrenWithProvide(r,_)).flat(1);if(Array.isArray(n.children))return n.children.map(_=>findChildrenWithProvide(r,_)).flat(1);if(n.component){if(Object.getOwnPropertySymbols(n.component.provides).includes(r))return[n.component];if(n.component.subTree)return findChildrenWithProvide(r,n.component.subTree).flat(1)}return[]}var _arr=new WeakMap,_pointer=new WeakMap;class CircularBuffer{constructor(n){_classPrivateFieldInitSpec(this,_arr,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,_pointer,{writable:!0,value:0}),this.size=n}push(n){_classPrivateFieldGet(this,_arr)[_classPrivateFieldGet(this,_pointer)]=n,_classPrivateFieldSet(this,_pointer,(_classPrivateFieldGet(this,_pointer)+1)%this.size)}values(){return _classPrivateFieldGet(this,_arr).slice(_classPrivateFieldGet(this,_pointer)).concat(_classPrivateFieldGet(this,_arr).slice(0,_classPrivateFieldGet(this,_pointer)))}}function destructComputed(r){const n=reactive({}),_=computed(r);return watchEffect(()=>{for(const x in _.value)n[x]=_.value[x]},{flush:"sync"}),toRefs(n)}function includes(r,n){return r.includes(n)}function eventName(r){return r[2].toLowerCase()+r.slice(3)}const EventProp=()=>[Function,Array];function hasEvent(r,n){return n="on"+capitalize$1(n),!!(r[n]||r[`${n}Once`]||r[`${n}Capture`]||r[`${n}OnceCapture`]||r[`${n}CaptureOnce`])}function callEvent(r){for(var n=arguments.length,_=new Array(n>1?n-1:0),x=1;x<n;x++)_[x-1]=arguments[x];if(Array.isArray(r))for(const S of r)S(..._);else typeof r=="function"&&r(..._)}function focusableChildren(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const _=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(x=>`${x}${n?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...r.querySelectorAll(_)]}function getNextElement(r,n,_){let x,S=r.indexOf(document.activeElement);const E=n==="next"?1:-1;do S+=E,x=r[S];while((!x||x.offsetParent==null||!(_?.(x)??!0))&&S<r.length&&S>=0);return x}function focusChild(r,n){const _=focusableChildren(r);if(!n)(r===document.activeElement||!r.contains(document.activeElement))&&_[0]?.focus();else if(n==="first")_[0]?.focus();else if(n==="last")_.at(-1)?.focus();else if(typeof n=="number")_[n]?.focus();else{const x=getNextElement(_,n);x?x.focus():focusChild(r,n==="next"?"first":"last")}}function isEmpty(r){return r==null||typeof r=="string"&&r.trim()===""}function noop$6(){}function matchesSelector(r,n){if(!(IN_BROWSER&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${n})`)))return null;try{return!!r&&r.matches(n)}catch{return null}}const block=["top","bottom"],inline=["start","end","left","right"];function parseAnchor(r,n){let[_,x]=r.split(" ");return x||(x=includes(block,_)?"start":includes(inline,_)?"top":"center"),{side:toPhysical(_,n),align:toPhysical(x,n)}}function toPhysical(r,n){return r==="start"?n?"right":"left":r==="end"?n?"left":"right":r}function flipSide(r){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[r.side],align:r.align}}function flipAlign(r){return{side:r.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[r.align]}}function flipCorner(r){return{side:r.align,align:r.side}}function getAxis(r){return includes(block,r.side)?"y":"x"}class Box{constructor(n){let{x:_,y:x,width:S,height:E}=n;this.x=_,this.y=x,this.width=S,this.height=E}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function getOverflow(r,n){return{x:{before:Math.max(0,n.left-r.left),after:Math.max(0,r.right-n.right)},y:{before:Math.max(0,n.top-r.top),after:Math.max(0,r.bottom-n.bottom)}}}function nullifyTransforms(r){const n=r.getBoundingClientRect(),_=getComputedStyle(r),x=_.transform;if(x){let S,E,C,T,B;if(x.startsWith("matrix3d("))S=x.slice(9,-1).split(/, /),E=+S[0],C=+S[5],T=+S[12],B=+S[13];else if(x.startsWith("matrix("))S=x.slice(7,-1).split(/, /),E=+S[0],C=+S[3],T=+S[4],B=+S[5];else return new Box(n);const A=_.transformOrigin,I=n.x-T-(1-E)*parseFloat(A),N=n.y-B-(1-C)*parseFloat(A.slice(A.indexOf(" ")+1)),V=E?n.width/E:r.offsetWidth+1,D=C?n.height/C:r.offsetHeight+1;return new Box({x:I,y:N,width:V,height:D})}else return new Box(n)}function animate(r,n,_){if(typeof r.animate>"u")return{finished:Promise.resolve()};let x;try{x=r.animate(n,_)}catch{return{finished:Promise.resolve()}}return typeof x.finished>"u"&&(x.finished=new Promise(S=>{x.onfinish=()=>{S(x)}})),x}const handlers=new WeakMap;function bindProps(r,n){Object.keys(n).forEach(_=>{if(isOn(_)){const x=eventName(_),S=handlers.get(r);if(n[_]==null)S?.forEach(E=>{const[C,T]=E;C===x&&(r.removeEventListener(x,T),S.delete(E))});else if(!S||![...S].some(E=>E[0]===x&&E[1]===n[_])){r.addEventListener(x,n[_]);const E=S||new Set;E.add([x,n[_]]),handlers.has(r)||handlers.set(r,E)}}else n[_]==null?r.removeAttribute(_):r.setAttribute(_,n[_])})}function unbindProps(r,n){Object.keys(n).forEach(_=>{if(isOn(_)){const x=eventName(_),S=handlers.get(r);S?.forEach(E=>{const[C,T]=E;C===x&&(r.removeEventListener(x,T),S.delete(E))})}else r.removeAttribute(_)})}const mainTRC=2.4,Rco=.2126729,Gco=.7151522,Bco=.072175,normBG=.55,normTXT=.58,revTXT=.57,revBG=.62,blkThrs=.03,blkClmp=1.45,deltaYmin=5e-4,scaleBoW=1.25,scaleWoB=1.25,loConThresh=.078,loConFactor=12.82051282051282,loConOffset=.06,loClip=.001;function APCAcontrast(r,n){const _=(r.r/255)**mainTRC,x=(r.g/255)**mainTRC,S=(r.b/255)**mainTRC,E=(n.r/255)**mainTRC,C=(n.g/255)**mainTRC,T=(n.b/255)**mainTRC;let B=_*Rco+x*Gco+S*Bco,A=E*Rco+C*Gco+T*Bco;if(B<=blkThrs&&(B+=(blkThrs-B)**blkClmp),A<=blkThrs&&(A+=(blkThrs-A)**blkClmp),Math.abs(A-B)<deltaYmin)return 0;let I;if(A>B){const N=(A**normBG-B**normTXT)*scaleBoW;I=N<loClip?0:N<loConThresh?N-N*loConFactor*loConOffset:N-loConOffset}else{const N=(A**revBG-B**revTXT)*scaleWoB;I=N>-loClip?0:N>-loConThresh?N-N*loConFactor*loConOffset:N+loConOffset}return I*100}function consoleWarn(r){}function deprecate(r,n){n=Array.isArray(n)?n.slice(0,-1).map(_=>`'${_}'`).join(", ")+` or '${n.at(-1)}'`:`'${n}'`}const delta=.20689655172413793,cielabForwardTransform=r=>r>delta**3?Math.cbrt(r):r/(3*delta**2)+4/29,cielabReverseTransform=r=>r>delta?r**3:3*delta**2*(r-4/29);function fromXYZ$1(r){const n=cielabForwardTransform,_=n(r[1]);return[116*_-16,500*(n(r[0]/.95047)-_),200*(_-n(r[2]/1.08883))]}function toXYZ$1(r){const n=cielabReverseTransform,_=(r[0]+16)/116;return[n(_+r[1]/500)*.95047,n(_),n(_-r[2]/200)*1.08883]}const srgbForwardMatrix=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],srgbForwardTransform=r=>r<=.0031308?r*12.92:1.055*r**(1/2.4)-.055,srgbReverseMatrix=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],srgbReverseTransform=r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4;function fromXYZ(r){const n=Array(3),_=srgbForwardTransform,x=srgbForwardMatrix;for(let S=0;S<3;++S)n[S]=Math.round(clamp(_(x[S][0]*r[0]+x[S][1]*r[1]+x[S][2]*r[2]))*255);return{r:n[0],g:n[1],b:n[2]}}function toXYZ(r){let{r:n,g:_,b:x}=r;const S=[0,0,0],E=srgbReverseTransform,C=srgbReverseMatrix;n=E(n/255),_=E(_/255),x=E(x/255);for(let T=0;T<3;++T)S[T]=C[T][0]*n+C[T][1]*_+C[T][2]*x;return S}function isCssColor(r){return!!r&&/^(#|var\(--|(rgb|hsl)a?\()/.test(r)}const cssColorRe=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,mappers={rgb:(r,n,_,x)=>({r,g:n,b:_,a:x}),rgba:(r,n,_,x)=>({r,g:n,b:_,a:x}),hsl:(r,n,_,x)=>HSLtoRGB({h:r,s:n,l:_,a:x}),hsla:(r,n,_,x)=>HSLtoRGB({h:r,s:n,l:_,a:x}),hsv:(r,n,_,x)=>HSVtoRGB({h:r,s:n,v:_,a:x}),hsva:(r,n,_,x)=>HSVtoRGB({h:r,s:n,v:_,a:x})};function parseColor(r){if(typeof r=="number")return{r:(r&16711680)>>16,g:(r&65280)>>8,b:r&255};if(typeof r=="string"&&cssColorRe.test(r)){const{groups:n}=r.match(cssColorRe),{fn:_,values:x}=n,S=x.split(/,\s*/).map(E=>E.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(_)?parseFloat(E)/100:parseFloat(E));return mappers[_](...S)}else if(typeof r=="string"){let n=r.startsWith("#")?r.slice(1):r;return[3,4].includes(n.length)?n=n.split("").map(_=>_+_).join(""):[6,8].includes(n.length),HexToRGB(n)}else if(typeof r=="object"){if(has$3(r,["r","g","b"]))return r;if(has$3(r,["h","s","l"]))return HSVtoRGB(HSLtoHSV(r));if(has$3(r,["h","s","v"]))return HSVtoRGB(r)}throw new TypeError(`Invalid color: ${r==null?r:String(r)||r.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function HSVtoRGB(r){const{h:n,s:_,v:x,a:S}=r,E=T=>{const B=(T+n/60)%6;return x-x*_*Math.max(Math.min(B,4-B,1),0)},C=[E(5),E(3),E(1)].map(T=>Math.round(T*255));return{r:C[0],g:C[1],b:C[2],a:S}}function HSLtoRGB(r){return HSVtoRGB(HSLtoHSV(r))}function HSLtoHSV(r){const{h:n,s:_,l:x,a:S}=r,E=x+_*Math.min(x,1-x),C=E===0?0:2-2*x/E;return{h:n,s:C,v:E,a:S}}function toHex(r){const n=Math.round(r).toString(16);return("00".substr(0,2-n.length)+n).toUpperCase()}function RGBtoHex(r){let{r:n,g:_,b:x,a:S}=r;return`#${[toHex(n),toHex(_),toHex(x),S!==void 0?toHex(Math.round(S*255)):""].join("")}`}function HexToRGB(r){r=parseHex(r);let[n,_,x,S]=chunk(r,2).map(E=>parseInt(E,16));return S=S===void 0?S:S/255,{r:n,g:_,b:x,a:S}}function parseHex(r){return r.startsWith("#")&&(r=r.slice(1)),r=r.replace(/([^0-9a-f])/gi,"F"),(r.length===3||r.length===4)&&(r=r.split("").map(n=>n+n).join("")),r.length!==6&&(r=padEnd(padEnd(r,6),8,"F")),r}function lighten(r,n){const _=fromXYZ$1(toXYZ(r));return _[0]=_[0]+n*10,fromXYZ(toXYZ$1(_))}function darken(r,n){const _=fromXYZ$1(toXYZ(r));return _[0]=_[0]-n*10,fromXYZ(toXYZ$1(_))}function getLuma(r){const n=parseColor(r);return toXYZ(n)[1]}function getForeground(r){const n=Math.abs(APCAcontrast(parseColor(0),parseColor(r)));return Math.abs(APCAcontrast(parseColor(16777215),parseColor(r)))>Math.min(n,50)?"#fff":"#000"}function propsFactory(r,n){return _=>Object.keys(r).reduce((x,S)=>{const C=typeof r[S]=="object"&&r[S]!=null&&!Array.isArray(r[S])?r[S]:{type:r[S]};return _&&S in _?x[S]={...C,default:_[S]}:x[S]=C,n&&!x[S].source&&(x[S].source=n),x},{})}const makeComponentProps=propsFactory({class:[String,Array],style:{type:[String,Array,Object],default:null}},"component");function defineComponent(r){if(r._setup=r._setup??r.setup,!r.name)return r;if(r._setup){r.props=propsFactory(r.props??{},r.name)();const n=Object.keys(r.props);r.filterProps=function(x){return pick$1(x,n,["class","style"])},r.props._as=String,r.setup=function(x,S){const E=injectDefaults();if(!E.value)return r._setup(x,S);const{props:C,provideSubDefaults:T}=internalUseDefaults(x,x._as??r.name,E),B=r._setup(C,S);return T(),B}}return r}function genericComponent(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n=>(r?defineComponent:defineComponent$1)(n)}function defineFunctionalComponent(r,n){return n.props=r,n}function createSimpleFunctional(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",_=arguments.length>2?arguments[2]:void 0;return genericComponent()({name:_??capitalize$1(camelize(r.replace(/__/g,"-"))),props:{tag:{type:String,default:n},...makeComponentProps()},setup(x,S){let{slots:E}=S;return()=>h$1(x.tag,{class:[r,x.class],style:x.style},E.default?.())}})}function attachedRoot(r){if(typeof r.getRootNode!="function"){for(;r.parentNode;)r=r.parentNode;return r!==document?null:document}const n=r.getRootNode();return n!==document&&n.getRootNode({composed:!0})!==document?null:n}const standardEasing="cubic-bezier(0.4, 0, 0.2, 1)",deceleratedEasing="cubic-bezier(0.0, 0, 0.2, 1)",acceleratedEasing="cubic-bezier(0.4, 0, 1, 1)";function getCurrentInstance(r,n){const _=getCurrentInstance$1();if(!_)throw new Error(`[Vuetify] ${r} ${n||"must be called from inside a setup function"}`);return _}function getCurrentInstanceName(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const n=getCurrentInstance(r).type;return toKebabCase(n?.aliasName||n?.name)}let _uid=0,_map=new WeakMap;function getUid(){const r=getCurrentInstance("getUid");if(_map.has(r))return _map.get(r);{const n=_uid++;return _map.set(r,n),n}}getUid.reset=()=>{_uid=0,_map=new WeakMap};function getScrollParent(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;r;){if(n?isPotentiallyScrollable(r):hasScrollbar(r))return r;r=r.parentElement}return document.scrollingElement}function getScrollParents(r,n){const _=[];if(n&&r&&!n.contains(r))return _;for(;r&&(hasScrollbar(r)&&_.push(r),r!==n);)r=r.parentElement;return _}function hasScrollbar(r){if(!r||r.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(r);return n.overflowY==="scroll"||n.overflowY==="auto"&&r.scrollHeight>r.clientHeight}function isPotentiallyScrollable(r){if(!r||r.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(r);return["scroll","auto"].includes(n.overflowY)}function injectSelf(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstance("injectSelf");const{provides:_}=n;if(_&&r in _)return _[r]}function isFixedPosition(r){for(;r;){if(window.getComputedStyle(r).position==="fixed")return!0;r=r.offsetParent}return!1}function useRender(r){const n=getCurrentInstance("useRender");n.render=r}const DefaultsSymbol=Symbol.for("vuetify:defaults");function createDefaults(r){return ref$1(r)}function injectDefaults(){const r=inject$1(DefaultsSymbol);if(!r)throw new Error("[Vuetify] Could not find defaults instance");return r}function provideDefaults(r,n){const _=injectDefaults(),x=ref$1(r),S=computed(()=>{if(unref(n?.disabled))return _.value;const C=unref(n?.scoped),T=unref(n?.reset),B=unref(n?.root);if(x.value==null&&!(C||T||B))return _.value;let A=mergeDeep(x.value,{prev:_.value});if(C)return A;if(T||B){const I=Number(T||1/0);for(let N=0;N<=I&&!(!A||!("prev"in A));N++)A=A.prev;return A&&typeof B=="string"&&B in A&&(A=mergeDeep(mergeDeep(A,{prev:A}),A[B])),A}return A.prev?mergeDeep(A.prev,A):A});return provide(DefaultsSymbol,S),S}function propIsDefined(r,n){return typeof r.props?.[n]<"u"||typeof r.props?.[toKebabCase(n)]<"u"}function internalUseDefaults(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:injectDefaults();const x=getCurrentInstance("useDefaults");if(n=n??x.type.name??x.type.__name,!n)throw new Error("[Vuetify] Could not determine component name");const S=computed(()=>_.value?.[r._as??n]),E=new Proxy(r,{get(B,A){const I=Reflect.get(B,A);return A==="class"||A==="style"?[S.value?.[A],I].filter(N=>N!=null):typeof A=="string"&&!propIsDefined(x.vnode,A)?S.value?.[A]??_.value?.global?.[A]??I:I}}),C=shallowRef();watchEffect(()=>{if(S.value){const B=Object.entries(S.value).filter(A=>{let[I]=A;return I.startsWith(I[0].toUpperCase())});C.value=B.length?Object.fromEntries(B):void 0}else C.value=void 0});function T(){const B=injectSelf(DefaultsSymbol,x);provide(DefaultsSymbol,computed(()=>C.value?mergeDeep(B?.value??{},C.value):B?.value))}return{props:E,provideSubDefaults:T}}const breakpoints=["sm","md","lg","xl","xxl"],DisplaySymbol=Symbol.for("vuetify:display"),defaultDisplayOptions={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},parseDisplayOptions=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultDisplayOptions;return mergeDeep(defaultDisplayOptions,r)};function getClientWidth(r){return IN_BROWSER&&!r?window.innerWidth:typeof r=="object"&&r.clientWidth||0}function getClientHeight(r){return IN_BROWSER&&!r?window.innerHeight:typeof r=="object"&&r.clientHeight||0}function getPlatform(r){const n=IN_BROWSER&&!r?window.navigator.userAgent:"ssr";function _(O){return!!n.match(O)}const x=_(/android/i),S=_(/iphone|ipad|ipod/i),E=_(/cordova/i),C=_(/electron/i),T=_(/chrome/i),B=_(/edge/i),A=_(/firefox/i),I=_(/opera/i),N=_(/win/i),V=_(/mac/i),D=_(/linux/i);return{android:x,ios:S,cordova:E,electron:C,chrome:T,edge:B,firefox:A,opera:I,win:N,mac:V,linux:D,touch:SUPPORTS_TOUCH,ssr:n==="ssr"}}function createDisplay(r,n){const{thresholds:_,mobileBreakpoint:x}=parseDisplayOptions(r),S=shallowRef(getClientHeight(n)),E=shallowRef(getPlatform(n)),C=reactive({}),T=shallowRef(getClientWidth(n));function B(){S.value=getClientHeight(),T.value=getClientWidth()}function A(){B(),E.value=getPlatform()}return watchEffect(()=>{const I=T.value<_.sm,N=T.value<_.md&&!I,V=T.value<_.lg&&!(N||I),D=T.value<_.xl&&!(V||N||I),O=T.value<_.xxl&&!(D||V||N||I),F=T.value>=_.xxl,M=I?"xs":N?"sm":V?"md":D?"lg":O?"xl":"xxl",L=typeof x=="number"?x:_[x],j=T.value<L;C.xs=I,C.sm=N,C.md=V,C.lg=D,C.xl=O,C.xxl=F,C.smAndUp=!I,C.mdAndUp=!(I||N),C.lgAndUp=!(I||N||V),C.xlAndUp=!(I||N||V||D),C.smAndDown=!(V||D||O||F),C.mdAndDown=!(D||O||F),C.lgAndDown=!(O||F),C.xlAndDown=!F,C.name=M,C.height=S.value,C.width=T.value,C.mobile=j,C.mobileBreakpoint=x,C.platform=E.value,C.thresholds=_}),IN_BROWSER&&window.addEventListener("resize",B,{passive:!0}),{...toRefs(C),update:A,ssr:!!n}}function useDisplay(){const r=inject$1(DisplaySymbol);if(!r)throw new Error("Could not find Vuetify display injection");return r}const aliases$1={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar"},mdi={component:r=>h$1(VClassIcon,{...r,class:"mdi"})},IconValue=[String,Function,Object,Array],IconSymbol=Symbol.for("vuetify:icons"),makeIconProps=propsFactory({icon:{type:IconValue},tag:{type:String,required:!0}},"icon"),VComponentIcon=genericComponent()({name:"VComponentIcon",props:makeIconProps(),setup(r,n){let{slots:_}=n;return()=>{const x=r.icon;return createVNode(r.tag,null,{default:()=>[r.icon?createVNode(x,null,null):_.default?.()]})}}}),VSvgIcon=defineComponent({name:"VSvgIcon",inheritAttrs:!1,props:makeIconProps(),setup(r,n){let{attrs:_}=n;return()=>createVNode(r.tag,mergeProps(_,{style:null}),{default:()=>[createVNode("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(r.icon)?r.icon.map(x=>Array.isArray(x)?createVNode("path",{d:x[0],"fill-opacity":x[1]},null):createVNode("path",{d:x},null)):createVNode("path",{d:r.icon},null)])]})}});defineComponent({name:"VLigatureIcon",props:makeIconProps(),setup(r){return()=>createVNode(r.tag,null,{default:()=>[r.icon]})}});const VClassIcon=defineComponent({name:"VClassIcon",props:makeIconProps(),setup(r){return()=>createVNode(r.tag,{class:r.icon},null)}}),defaultSets={svg:{component:VSvgIcon},class:{component:VClassIcon}};function createIcons(r){return mergeDeep({defaultSet:"mdi",sets:{...defaultSets,mdi},aliases:{...aliases$1,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z"}},r)}const useIcon=r=>{const n=inject$1(IconSymbol);if(!n)throw new Error("Missing Vuetify Icons provide!");return{iconData:computed(()=>{const x=unref(r);if(!x)return{component:VComponentIcon};let S=x;if(typeof S=="string"&&(S=S.trim(),S.startsWith("$")&&(S=n.aliases?.[S.slice(1)])),!S)throw new Error(`Could not find aliased icon "${x}"`);if(Array.isArray(S))return{component:VSvgIcon,icon:S};if(typeof S!="string")return{component:VComponentIcon,icon:S};const E=Object.keys(n.sets).find(B=>typeof S=="string"&&S.startsWith(`${B}:`)),C=E?S.slice(E.length+1):S;return{component:n.sets[E??n.defaultSet].component,icon:C}})}},en={badge:"Badge",open:"Open",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{ok:"OK",cancel:"Cancel",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},defaultRtl={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1};function useToggleScope(r,n){let _;function x(){_=effectScope(),_.run(()=>n.length?n(()=>{_?.stop(),x()}):n())}watch(r,S=>{S&&!_?x():S||(_?.stop(),_=void 0)},{immediate:!0}),onScopeDispose(()=>{_?.stop()})}function useProxiedModel(r,n,_){let x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:N=>N,S=arguments.length>4&&arguments[4]!==void 0?arguments[4]:N=>N;const E=getCurrentInstance("useProxiedModel"),C=ref$1(r[n]!==void 0?r[n]:_),T=toKebabCase(n),A=computed(T!==n?()=>(r[n],!!((E.vnode.props?.hasOwnProperty(n)||E.vnode.props?.hasOwnProperty(T))&&(E.vnode.props?.hasOwnProperty(`onUpdate:${n}`)||E.vnode.props?.hasOwnProperty(`onUpdate:${T}`)))):()=>(r[n],!!(E.vnode.props?.hasOwnProperty(n)&&E.vnode.props?.hasOwnProperty(`onUpdate:${n}`))));useToggleScope(()=>!A.value,()=>{watch(()=>r[n],N=>{C.value=N})});const I=computed({get(){const N=r[n];return x(A.value?N:C.value)},set(N){const V=S(N),D=toRaw(A.value?r[n]:C.value);D===V||x(D)===N||(C.value=V,E?.emit(`update:${n}`,V))}});return Object.defineProperty(I,"externalValue",{get:()=>A.value?r[n]:C.value}),I}const LANG_PREFIX="$vuetify.",replace=(r,n)=>r.replace(/\{(\d+)\}/g,(_,x)=>String(n[+x])),createTranslateFunction=(r,n,_)=>function(x){for(var S=arguments.length,E=new Array(S>1?S-1:0),C=1;C<S;C++)E[C-1]=arguments[C];if(!x.startsWith(LANG_PREFIX))return replace(x,E);const T=x.replace(LANG_PREFIX,""),B=r.value&&_.value[r.value],A=n.value&&_.value[n.value];let I=getObjectValueByPath(B,T,null);return I||(`${x}${r.value}`,I=getObjectValueByPath(A,T,null)),I||(I=x),typeof I!="string"&&(I=x),replace(I,E)};function createNumberFunction(r,n){return(_,x)=>new Intl.NumberFormat([r.value,n.value],x).format(_)}function useProvided(r,n,_){const x=useProxiedModel(r,n,r[n]??_.value);return x.value=r[n]??_.value,watch(_,S=>{r[n]==null&&(x.value=_.value)}),x}function createProvideFunction(r){return n=>{const _=useProvided(n,"locale",r.current),x=useProvided(n,"fallback",r.fallback),S=useProvided(n,"messages",r.messages);return{name:"vuetify",current:_,fallback:x,messages:S,t:createTranslateFunction(_,x,S),n:createNumberFunction(_,x),provide:createProvideFunction({current:_,fallback:x,messages:S})}}}function createVuetifyAdapter(r){const n=shallowRef(r?.locale??"en"),_=shallowRef(r?.fallback??"en"),x=ref$1({en,...r?.messages});return{name:"vuetify",current:n,fallback:_,messages:x,t:createTranslateFunction(n,_,x),n:createNumberFunction(n,_),provide:createProvideFunction({current:n,fallback:_,messages:x})}}const LocaleSymbol=Symbol.for("vuetify:locale");function isLocaleInstance(r){return r.name!=null}function createLocale(r){const n=r?.adapter&&isLocaleInstance(r?.adapter)?r?.adapter:createVuetifyAdapter(r),_=createRtl(n,r);return{...n,..._}}function useLocale(){const r=inject$1(LocaleSymbol);if(!r)throw new Error("[Vuetify] Could not find injected locale instance");return r}function provideLocale(r){const n=inject$1(LocaleSymbol);if(!n)throw new Error("[Vuetify] Could not find injected locale instance");const _=n.provide(r),x=provideRtl(_,n.rtl,r),S={..._,...x};return provide(LocaleSymbol,S),S}function createRtl(r,n){const _=ref$1(n?.rtl??defaultRtl),x=computed(()=>_.value[r.current.value]??!1);return{isRtl:x,rtl:_,rtlClasses:computed(()=>`v-locale--is-${x.value?"rtl":"ltr"}`)}}function provideRtl(r,n,_){const x=computed(()=>_.rtl??n.value[r.current.value]??!1);return{isRtl:x,rtl:n,rtlClasses:computed(()=>`v-locale--is-${x.value?"rtl":"ltr"}`)}}function useRtl(){const r=inject$1(LocaleSymbol);if(!r)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:r.isRtl,rtlClasses:r.rtlClasses}}const ThemeSymbol=Symbol.for("vuetify:theme"),makeThemeProps=propsFactory({theme:String},"theme"),defaultThemeOptions={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function parseThemeOptions(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultThemeOptions;if(!r)return{...defaultThemeOptions,isDisabled:!0};const n={};for(const[_,x]of Object.entries(r.themes??{})){const S=x.dark||_==="dark"?defaultThemeOptions.themes?.dark:defaultThemeOptions.themes?.light;n[_]=mergeDeep(S,x)}return mergeDeep(defaultThemeOptions,{...r,themes:n})}function createTheme(r){const n=parseThemeOptions(r),_=ref$1(n.defaultTheme),x=ref$1(n.themes),S=computed(()=>{const I={};for(const[N,V]of Object.entries(x.value)){const D=I[N]={...V,colors:{...V.colors}};if(n.variations)for(const O of n.variations.colors){const F=D.colors[O];if(F)for(const M of["lighten","darken"]){const L=M==="lighten"?lighten:darken;for(const j of createRange(n.variations[M],1))D.colors[`${O}-${M}-${j}`]=RGBtoHex(L(parseColor(F),j))}}for(const O of Object.keys(D.colors)){if(/^on-[a-z]/.test(O)||D.colors[`on-${O}`])continue;const F=`on-${O}`,M=parseColor(D.colors[O]);D.colors[F]=getForeground(M)}}return I}),E=computed(()=>S.value[_.value]),C=computed(()=>{const I=[];E.value.dark&&createCssClass(I,":root",["color-scheme: dark"]),createCssClass(I,":root",genCssVariables(E.value));for(const[O,F]of Object.entries(S.value))createCssClass(I,`.v-theme--${O}`,[`color-scheme: ${F.dark?"dark":"normal"}`,...genCssVariables(F)]);const N=[],V=[],D=new Set(Object.values(S.value).flatMap(O=>Object.keys(O.colors)));for(const O of D)/^on-[a-z]/.test(O)?createCssClass(V,`.${O}`,[`color: rgb(var(--v-theme-${O})) !important`]):(createCssClass(N,`.bg-${O}`,[`--v-theme-overlay-multiplier: var(--v-theme-${O}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${O})) !important`,`color: rgb(var(--v-theme-on-${O})) !important`]),createCssClass(V,`.text-${O}`,[`color: rgb(var(--v-theme-${O})) !important`]),createCssClass(V,`.border-${O}`,[`--v-border-color: var(--v-theme-${O})`]));return I.push(...N,...V),I.map((O,F)=>F===0?O:`    ${O}`).join("")});function T(){return{style:[{children:C.value,id:"vuetify-theme-stylesheet",nonce:n.cspNonce||!1}]}}function B(I){if(n.isDisabled)return;const N=I._context.provides.usehead;if(N)if(N.push){const V=N.push(T);IN_BROWSER&&watch(C,()=>{V.patch(T)})}else IN_BROWSER?(N.addHeadObjs(computed(T)),watchEffect(()=>N.updateDOM())):N.addHeadObjs(T());else{let D=function(){if(typeof document<"u"&&!V){const O=document.createElement("style");O.type="text/css",O.id="vuetify-theme-stylesheet",n.cspNonce&&O.setAttribute("nonce",n.cspNonce),V=O,document.head.appendChild(V)}V&&(V.innerHTML=C.value)},V=IN_BROWSER?document.getElementById("vuetify-theme-stylesheet"):null;IN_BROWSER?watch(C,D,{immediate:!0}):D()}}const A=computed(()=>n.isDisabled?void 0:`v-theme--${_.value}`);return{install:B,isDisabled:n.isDisabled,name:_,themes:x,current:E,computedThemes:S,themeClasses:A,styles:C,global:{name:_,current:E}}}function provideTheme(r){getCurrentInstance("provideTheme");const n=inject$1(ThemeSymbol,null);if(!n)throw new Error("Could not find Vuetify theme injection");const _=computed(()=>r.theme??n?.name.value),x=computed(()=>n.isDisabled?void 0:`v-theme--${_.value}`),S={...n,name:_,themeClasses:x};return provide(ThemeSymbol,S),S}function useTheme(){getCurrentInstance("useTheme");const r=inject$1(ThemeSymbol,null);if(!r)throw new Error("Could not find Vuetify theme injection");return r}function createCssClass(r,n,_){r.push(`${n} {
`,..._.map(x=>`  ${x};
`),`}
`)}function genCssVariables(r){const n=r.dark?2:1,_=r.dark?1:2,x=[];for(const[S,E]of Object.entries(r.colors)){const C=parseColor(E);x.push(`--v-theme-${S}: ${C.r},${C.g},${C.b}`),S.startsWith("on-")||x.push(`--v-theme-${S}-overlay-multiplier: ${getLuma(E)>.18?n:_}`)}for(const[S,E]of Object.entries(r.variables)){const C=typeof E=="string"&&E.startsWith("#")?parseColor(E):void 0,T=C?`${C.r}, ${C.g}, ${C.b}`:void 0;x.push(`--v-${S}: ${T??E}`)}return x}const firstDay={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function getWeekArray(r,n){const _=[];let x=[];const S=startOfMonth(r),E=endOfMonth(r),C=S.getDay()-firstDay[n.slice(-2).toUpperCase()],T=E.getDay()-firstDay[n.slice(-2).toUpperCase()];for(let B=0;B<C;B++){const A=new Date(S);A.setDate(A.getDate()-(C-B)),x.push(A)}for(let B=1;B<=E.getDate();B++){const A=new Date(r.getFullYear(),r.getMonth(),B);x.push(A),x.length===7&&(_.push(x),x=[])}for(let B=1;B<7-T;B++){const A=new Date(E);A.setDate(A.getDate()+B),x.push(A)}return _.push(x),_}function startOfMonth(r){return new Date(r.getFullYear(),r.getMonth(),1)}function endOfMonth(r){return new Date(r.getFullYear(),r.getMonth()+1,0)}function parseLocalDate(r){const n=r.split("-").map(Number);return new Date(n[0],n[1]-1,n[2])}const _YYYMMDD=/([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))/;function date(r){if(r==null)return new Date;if(r instanceof Date)return r;if(typeof r=="string"){let n;if(_YYYMMDD.test(r))return parseLocalDate(r);if(n=Date.parse(r),!isNaN(n))return new Date(n)}return null}const sundayJanuarySecond2000=new Date(2e3,0,2);function getWeekdays(r){const n=firstDay[r.slice(-2).toUpperCase()];return createRange(7).map(_=>{const x=new Date(sundayJanuarySecond2000);return x.setDate(sundayJanuarySecond2000.getDate()+n+_),new Intl.DateTimeFormat(r,{weekday:"narrow"}).format(x)})}function format$5(r,n,_){const x=new Date(r);let S={};switch(n){case"fullDateWithWeekday":S={weekday:"long",day:"numeric",month:"long",year:"numeric"};break;case"normalDateWithWeekday":S={weekday:"short",day:"numeric",month:"short"};break;case"keyboardDate":S={};break;case"monthAndDate":S={month:"long",day:"numeric"};break;case"monthAndYear":S={month:"long",year:"numeric"};break;case"dayOfMonth":S={day:"numeric"};break;default:S={timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(_,S).format(x)}function addDays(r,n){const _=new Date(r);return _.setDate(_.getDate()+n),_}function addMonths(r,n){const _=new Date(r);return _.setMonth(_.getMonth()+n),_}function getYear(r){return r.getFullYear()}function getMonth(r){return r.getMonth()}function startOfYear(r){return new Date(r.getFullYear(),0,1)}function endOfYear(r){return new Date(r.getFullYear(),11,31)}function isWithinRange(r,n){return isAfter(r,n[0])&&isBefore(r,n[1])}function isValid(r){const n=new Date(r);return n instanceof Date&&!isNaN(n.getTime())}function isAfter(r,n){return r.getTime()>n.getTime()}function isBefore(r,n){return r.getTime()<n.getTime()}function isEqual$2(r,n){return r.getTime()===n.getTime()}function isSameDay(r,n){return r.getDate()===n.getDate()&&r.getMonth()===n.getMonth()&&r.getFullYear()===n.getFullYear()}function isSameMonth(r,n){return r.getMonth()===n.getMonth()&&r.getFullYear()===n.getFullYear()}function getDiff(r,n,_){const x=new Date(r),S=new Date(n);return _==="month"?x.getMonth()-S.getMonth()+(x.getFullYear()-S.getFullYear())*12:Math.floor((x.getTime()-S.getTime())/(1e3*60*60*24))}function setYear(r,n){const _=new Date(r);return _.setFullYear(n),_}class VuetifyDateAdapter{constructor(n){this.locale=n.locale}date(n){return date(n)}toJsDate(n){return n}addDays(n,_){return addDays(n,_)}addMonths(n,_){return addMonths(n,_)}getWeekArray(n){return getWeekArray(n,this.locale)}startOfMonth(n){return startOfMonth(n)}endOfMonth(n){return endOfMonth(n)}format(n,_){return format$5(n,_,this.locale)}isEqual(n,_){return isEqual$2(n,_)}isValid(n){return isValid(n)}isWithinRange(n,_){return isWithinRange(n,_)}isAfter(n,_){return isAfter(n,_)}isBefore(n,_){return!isAfter(n,_)&&!isEqual$2(n,_)}isSameDay(n,_){return isSameDay(n,_)}isSameMonth(n,_){return isSameMonth(n,_)}setYear(n,_){return setYear(n,_)}getDiff(n,_,x){return getDiff(n,_,x)}getWeekdays(){return getWeekdays(this.locale)}getYear(n){return getYear(n)}getMonth(n){return getMonth(n)}startOfYear(n){return startOfYear(n)}endOfYear(n){return endOfYear(n)}}const DateAdapterSymbol=Symbol.for("vuetify:date-adapter");function createDate(r){return mergeDeep({adapter:VuetifyDateAdapter,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"nn-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},r)}function useResizeObserver(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const _=ref$1(),x=ref$1();if(IN_BROWSER){const S=new ResizeObserver(E=>{r?.(E,S),E.length&&(n==="content"?x.value=E[0].contentRect:x.value=E[0].target.getBoundingClientRect())});onBeforeUnmount(()=>{S.disconnect()}),watch(_,(E,C)=>{C&&(S.unobserve(refElement(C)),x.value=void 0),E&&S.observe(refElement(E))},{flush:"post"})}return{resizeRef:_,contentRect:readonly$3(x)}}const VuetifyLayoutKey=Symbol.for("vuetify:layout"),VuetifyLayoutItemKey=Symbol.for("vuetify:layout-item"),ROOT_ZINDEX=1e3,makeLayoutProps=propsFactory({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),makeLayoutItemProps=propsFactory({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function useLayout(){const r=inject$1(VuetifyLayoutKey);if(!r)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:r.getLayoutItem,mainRect:r.mainRect,mainStyles:r.mainStyles}}function useLayoutItem(r){const n=inject$1(VuetifyLayoutKey);if(!n)throw new Error("[Vuetify] Could not find injected layout");const _=r.id??`layout-item-${getUid()}`,x=getCurrentInstance("useLayoutItem");provide(VuetifyLayoutItemKey,{id:_});const S=shallowRef(!1);onDeactivated(()=>S.value=!0),onActivated(()=>S.value=!1);const{layoutItemStyles:E,layoutItemScrimStyles:C}=n.register(x,{...r,active:computed(()=>S.value?!1:r.active.value),id:_});return onBeforeUnmount(()=>n.unregister(_)),{layoutItemStyles:E,layoutRect:n.layoutRect,layoutItemScrimStyles:C}}const generateLayers=(r,n,_,x)=>{let S={top:0,left:0,right:0,bottom:0};const E=[{id:"",layer:{...S}}];for(const C of r){const T=n.get(C),B=_.get(C),A=x.get(C);if(!T||!B||!A)continue;const I={...S,[T.value]:parseInt(S[T.value],10)+(A.value?parseInt(B.value,10):0)};E.push({id:C,layer:I}),S=I}return E};function createLayout(r){const n=inject$1(VuetifyLayoutKey,null),_=computed(()=>n?n.rootZIndex.value-100:ROOT_ZINDEX),x=ref$1([]),S=reactive(new Map),E=reactive(new Map),C=reactive(new Map),T=reactive(new Map),B=reactive(new Map),{resizeRef:A,contentRect:I}=useResizeObserver(),N=computed(()=>{const J=new Map,Z=r.overlaps??[];for(const ae of Z.filter(ce=>ce.includes(":"))){const[ce,ve]=ae.split(":");if(!x.value.includes(ce)||!x.value.includes(ve))continue;const pe=S.get(ce),G=S.get(ve),Y=E.get(ce),U=E.get(ve);!pe||!G||!Y||!U||(J.set(ve,{position:pe.value,amount:parseInt(Y.value,10)}),J.set(ce,{position:G.value,amount:-parseInt(U.value,10)}))}return J}),V=computed(()=>{const J=[...new Set([...C.values()].map(ae=>ae.value))].sort((ae,ce)=>ae-ce),Z=[];for(const ae of J){const ce=x.value.filter(ve=>C.get(ve)?.value===ae);Z.push(...ce)}return generateLayers(Z,S,E,T)}),D=computed(()=>!Array.from(B.values()).some(J=>J.value)),O=computed(()=>V.value[V.value.length-1].layer),F=computed(()=>({"--v-layout-left":convertToUnit(O.value.left),"--v-layout-right":convertToUnit(O.value.right),"--v-layout-top":convertToUnit(O.value.top),"--v-layout-bottom":convertToUnit(O.value.bottom),...D.value?void 0:{transition:"none"}})),M=computed(()=>V.value.slice(1).map((J,Z)=>{let{id:ae}=J;const{layer:ce}=V.value[Z],ve=E.get(ae),pe=S.get(ae);return{id:ae,...ce,size:Number(ve.value),position:pe.value}})),L=J=>M.value.find(Z=>Z.id===J),j=getCurrentInstance("createLayout"),q=shallowRef(!1);onMounted(()=>{q.value=!0}),provide(VuetifyLayoutKey,{register:(J,Z)=>{let{id:ae,order:ce,position:ve,layoutSize:pe,elementSize:G,active:Y,disableTransitions:U,absolute:W}=Z;C.set(ae,ce),S.set(ae,ve),E.set(ae,pe),T.set(ae,Y),U&&B.set(ae,U);const re=findChildrenWithProvide(VuetifyLayoutItemKey,j?.vnode).indexOf(J);re>-1?x.value.splice(re,0,ae):x.value.push(ae);const oe=computed(()=>M.value.findIndex(K=>K.id===ae)),ie=computed(()=>_.value+V.value.length*2-oe.value*2),ne=computed(()=>{const K=ve.value==="left"||ve.value==="right",le=ve.value==="right",ue=ve.value==="bottom",be={[ve.value]:0,zIndex:ie.value,transform:`translate${K?"X":"Y"}(${(Y.value?0:-110)*(le||ue?-1:1)}%)`,position:W.value||_.value!==ROOT_ZINDEX?"absolute":"fixed",...D.value?void 0:{transition:"none"}};if(!q.value)return be;const ge=M.value[oe.value];if(!ge)throw new Error(`[Vuetify] Could not find layout item "${ae}"`);const ye=N.value.get(ae);return ye&&(ge[ye.position]+=ye.amount),{...be,height:K?`calc(100% - ${ge.top}px - ${ge.bottom}px)`:G.value?`${G.value}px`:void 0,left:le?void 0:`${ge.left}px`,right:le?`${ge.right}px`:void 0,top:ve.value!=="bottom"?`${ge.top}px`:void 0,bottom:ve.value!=="top"?`${ge.bottom}px`:void 0,width:K?G.value?`${G.value}px`:void 0:`calc(100% - ${ge.left}px - ${ge.right}px)`}}),te=computed(()=>({zIndex:ie.value-1}));return{layoutItemStyles:ne,layoutItemScrimStyles:te,zIndex:ie}},unregister:J=>{C.delete(J),S.delete(J),E.delete(J),T.delete(J),B.delete(J),x.value=x.value.filter(Z=>Z!==J)},mainRect:O,mainStyles:F,getLayoutItem:L,items:M,layoutRect:I,rootZIndex:_});const H=computed(()=>["v-layout",{"v-layout--full-height":r.fullHeight}]),X=computed(()=>({zIndex:_.value,position:n?"relative":void 0,overflow:n?"hidden":void 0}));return{layoutClasses:H,layoutStyles:X,getLayoutItem:L,items:M,layoutRect:I,layoutRef:A}}function createVuetify(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:n,..._}=r,x=mergeDeep(n,_),{aliases:S={},components:E={},directives:C={}}=x,T=createDefaults(x.defaults),B=createDisplay(x.display,x.ssr),A=createTheme(x.theme),I=createIcons(x.icons),N=createLocale(x.locale),V=createDate(x.date);return{install:O=>{for(const F in C)O.directive(F,C[F]);for(const F in E)O.component(F,E[F]);for(const F in S)O.component(F,defineComponent({...S[F],name:F,aliasName:S[F].name}));if(A.install(O),O.provide(DefaultsSymbol,T),O.provide(DisplaySymbol,B),O.provide(ThemeSymbol,A),O.provide(IconSymbol,I),O.provide(LocaleSymbol,N),O.provide(DateAdapterSymbol,V),IN_BROWSER&&x.ssr)if(O.$nuxt)O.$nuxt.hook("app:suspense:resolve",()=>{B.update()});else{const{mount:F}=O;O.mount=function(){const M=F(...arguments);return nextTick$2(()=>B.update()),O.mount=F,M}}getUid.reset(),O.mixin({computed:{$vuetify(){return reactive({defaults:inject.call(this,DefaultsSymbol),display:inject.call(this,DisplaySymbol),theme:inject.call(this,ThemeSymbol),icons:inject.call(this,IconSymbol),locale:inject.call(this,LocaleSymbol),date:inject.call(this,DateAdapterSymbol)})}}})},defaults:T,display:B,theme:A,icons:I,locale:N,date:V}}const version$1="3.3.14";createVuetify.version=version$1;function inject(r){const n=this.$,_=n.parent?.provides??n.vnode.appContext?.provides;if(_&&r in _)return _[r]}const changerThmeVuetify=r=>{const n=useTheme();n.global.name.value=r},utilisertatThme=defineStore("thme",{state:()=>({couleur:"light",thmeImages:"",langue:[]}),persist:{afterRestore:r=>{changerThmeVuetify(r.store.$state.couleur)}}}),imagesThme={constr:{unDraw:__vitePreload(()=>import("./undraw_under_construction_46pa-ba38e05e.js"),[]),:__vitePreload(()=>import("./-2a20e0e5.js"),[])},docs:{unDraw:__vitePreload(()=>import("./undraw_book_lover_mkck-788aab09.js"),[]),:__vitePreload(()=>import("./-15867725.js"),[])},recherche:{unDraw:__vitePreload(()=>import("./undraw_not_found_60pq-993e595f.js"),[]),:__vitePreload(()=>import("./-cf519b1b.js"),[])},message:{:__vitePreload(()=>import("./_-d6ffe67b.js"),[])},profilFemme:{unDraw:__vitePreload(()=>import("./undraw_female_avatar_w3jk-890ef1f0.js"),[]),:__vitePreload(()=>import("./__-679ac0c0.js"),[])},profilHomme:{unDraw:__vitePreload(()=>import("./undraw_male_avatar_323b-4544a09a.js"),[]),:__vitePreload(()=>import("./__-d62f10ac.js"),[])},automatisation:{unDraw:__vitePreload(()=>import("./undraw_real-time_sync_o57k-3422d6b8.js"),[])},problme:{unDraw:__vitePreload(()=>import("./undraw_towing_6yy4-bb468316.js"),[]),:__vitePreload(()=>import("./-5d3bcb3a.js"),[])},favoris:{unDraw:__vitePreload(()=>import("./undraw_Appreciation_re_p6rl-4c2e7d58.js"),[]),:__vitePreload(()=>import("./-1b959c2a.js"),[])},conditions:{unDraw:__vitePreload(()=>import("./undraw_Terms_re_6ak4-d50e32b8.js"),[]),:__vitePreload(()=>import("./_-8ebaa886.js"),[])},logoBD:{unDraw:__vitePreload(()=>import("./undraw_Projections_re_1mrh-7f57c189.js"),[])},dispositif:{unDraw:__vitePreload(()=>import("./undraw_Mobile_re_q4nk-c3480435.js"),[])},vide:{unDraw:__vitePreload(()=>import("./undraw_adventure_map_hnin-a1140a56.js"),[]),:__vitePreload(()=>import("./-56794b69.js"),[])}},utiliserImagesDco=function(r){return{obtImageDco:_=>{const x=utilisertatThme(),{thmeImages:S}=storeToRefs(x),E=ref$1(),C=computed(()=>r||S.value);return watchEffect(()=>{if(_==="profil"){const T=["profilFemme","profilHomme"];_=T[Math.floor(Math.random()*T.length)]}imagesThme[_]&&(imagesThme[_][C.value]||Object.values(imagesThme[_])[0]).then(T=>E.value=T?.default)}),E}}},VAvatar$1="",VIcon$1="";function useColor(r){return destructComputed(()=>{const n=[],_={};if(r.value.background)if(isCssColor(r.value.background)){if(_.backgroundColor=r.value.background,!r.value.text){const x=getForeground(_.backgroundColor);_.color=x,_.caretColor=x}}else n.push(`bg-${r.value.background}`);return r.value.text&&(isCssColor(r.value.text)?(_.color=r.value.text,_.caretColor=r.value.text):n.push(`text-${r.value.text}`)),{colorClasses:n,colorStyles:_}})}function useTextColor(r,n){const _=computed(()=>({text:isRef(r)?r.value:n?r[n]:null})),{colorClasses:x,colorStyles:S}=useColor(_);return{textColorClasses:x,textColorStyles:S}}function useBackgroundColor(r,n){const _=computed(()=>({background:isRef(r)?r.value:n?r[n]:null})),{colorClasses:x,colorStyles:S}=useColor(_);return{backgroundColorClasses:x,backgroundColorStyles:S}}const predefinedSizes=["x-small","small","default","large","x-large"],makeSizeProps=propsFactory({size:{type:[String,Number],default:"default"}},"size");function useSize(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return destructComputed(()=>{let _,x;return includes(predefinedSizes,r.size)?_=`${n}--size-${r.size}`:r.size&&(x={width:convertToUnit(r.size),height:convertToUnit(r.size)}),{sizeClasses:_,sizeStyles:x}})}const makeTagProps=propsFactory({tag:{type:String,default:"div"}},"tag"),makeVIconProps=propsFactory({color:String,start:Boolean,end:Boolean,icon:IconValue,...makeComponentProps(),...makeSizeProps(),...makeTagProps({tag:"i"}),...makeThemeProps()},"VIcon"),VIcon=genericComponent()({name:"VIcon",props:makeVIconProps(),setup(r,n){let{attrs:_,slots:x}=n;const S=ref$1(),{themeClasses:E}=provideTheme(r),{iconData:C}=useIcon(computed(()=>S.value||r.icon)),{sizeClasses:T}=useSize(r),{textColorClasses:B,textColorStyles:A}=useTextColor(toRef(r,"color"));return useRender(()=>{const I=x.default?.();return I&&(S.value=flattenFragments(I).filter(N=>N.type===Text&&N.children&&typeof N.children=="string")[0]?.children),createVNode(C.value.component,{tag:r.tag,icon:C.value.icon,class:["v-icon","notranslate",E.value,T.value,B.value,{"v-icon--clickable":!!_.onClick,"v-icon--start":r.start,"v-icon--end":r.end},r.class],style:[T.value?void 0:{fontSize:convertToUnit(r.size),height:convertToUnit(r.size),width:convertToUnit(r.size)},A.value,r.style],role:_.onClick?"button":void 0,"aria-hidden":!_.onClick},{default:()=>[I]})}),{}}}),VImg$1="",VResponsive$1="",makeDimensionProps=propsFactory({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function useDimension(r){return{dimensionStyles:computed(()=>({height:convertToUnit(r.height),maxHeight:convertToUnit(r.maxHeight),maxWidth:convertToUnit(r.maxWidth),minHeight:convertToUnit(r.minHeight),minWidth:convertToUnit(r.minWidth),width:convertToUnit(r.width)}))}}function useAspectStyles(r){return{aspectStyles:computed(()=>{const n=Number(r.aspectRatio);return n?{paddingBottom:String(1/n*100)+"%"}:void 0})}}const makeVResponsiveProps=propsFactory({aspectRatio:[String,Number],contentClass:String,inline:Boolean,...makeComponentProps(),...makeDimensionProps()},"VResponsive"),VResponsive=genericComponent()({name:"VResponsive",props:makeVResponsiveProps(),setup(r,n){let{slots:_}=n;const{aspectStyles:x}=useAspectStyles(r),{dimensionStyles:S}=useDimension(r);return useRender(()=>createVNode("div",{class:["v-responsive",{"v-responsive--inline":r.inline},r.class],style:[S.value,r.style]},[createVNode("div",{class:"v-responsive__sizer",style:x.value},null),_.additional?.(),_.default&&createVNode("div",{class:["v-responsive__content",r.contentClass]},[_.default()])])),{}}}),makeTransitionProps$1=propsFactory({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:r=>r!==!0}},"transition"),MaybeTransition=(r,n)=>{let{slots:_}=n;const{transition:x,disabled:S,...E}=r,{component:C=Transition,...T}=typeof x=="object"?x:{};return h$1(C,mergeProps(typeof x=="string"?{name:S?"":x}:T,E,{disabled:S}),_)};function mounted$2(r,n){if(!SUPPORTS_INTERSECTION)return;const _=n.modifiers||{},x=n.value,{handler:S,options:E}=typeof x=="object"?x:{handler:x,options:{}},C=new IntersectionObserver(function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments.length>1?arguments[1]:void 0;const A=r._observe?.[n.instance.$.uid];if(!A)return;const I=T.some(N=>N.isIntersecting);S&&(!_.quiet||A.init)&&(!_.once||I||A.init)&&S(I,T,B),I&&_.once?unmounted$2(r,n):A.init=!0},E);r._observe=Object(r._observe),r._observe[n.instance.$.uid]={init:!1,observer:C},C.observe(r)}function unmounted$2(r,n){const _=r._observe?.[n.instance.$.uid];_&&(_.observer.unobserve(r),delete r._observe[n.instance.$.uid])}const Intersect={mounted:mounted$2,unmounted:unmounted$2},Intersect$1=Intersect,makeVImgProps=propsFactory({alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,...makeVResponsiveProps(),...makeComponentProps(),...makeTransitionProps$1()},"VImg"),VImg=genericComponent()({name:"VImg",directives:{intersect:Intersect$1},props:makeVImgProps(),emits:{loadstart:r=>!0,load:r=>!0,error:r=>!0},setup(r,n){let{emit:_,slots:x}=n;const S=shallowRef(""),E=ref$1(),C=shallowRef(r.eager?"loading":"idle"),T=shallowRef(),B=shallowRef(),A=computed(()=>r.src&&typeof r.src=="object"?{src:r.src.src,srcset:r.srcset||r.src.srcset,lazySrc:r.lazySrc||r.src.lazySrc,aspect:Number(r.aspectRatio||r.src.aspect||0)}:{src:r.src,srcset:r.srcset,lazySrc:r.lazySrc,aspect:Number(r.aspectRatio||0)}),I=computed(()=>A.value.aspect||T.value/B.value||0);watch(()=>r.src,()=>{N(C.value!=="idle")}),watch(I,(ae,ce)=>{!ae&&ce&&E.value&&M(E.value)}),onBeforeMount(()=>N());function N(ae){if(!(r.eager&&ae)&&!(SUPPORTS_INTERSECTION&&!ae&&!r.eager)){if(C.value="loading",A.value.lazySrc){const ce=new Image;ce.src=A.value.lazySrc,M(ce,null)}A.value.src&&nextTick$2(()=>{if(_("loadstart",E.value?.currentSrc||A.value.src),E.value?.complete){if(E.value.naturalWidth||D(),C.value==="error")return;I.value||M(E.value,null),V()}else I.value||M(E.value),O()})}}function V(){O(),C.value="loaded",_("load",E.value?.currentSrc||A.value.src)}function D(){C.value="error",_("error",E.value?.currentSrc||A.value.src)}function O(){const ae=E.value;ae&&(S.value=ae.currentSrc||ae.src)}let F=-1;function M(ae){let ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const ve=()=>{clearTimeout(F);const{naturalHeight:pe,naturalWidth:G}=ae;pe||G?(T.value=G,B.value=pe):!ae.complete&&C.value==="loading"&&ce!=null?F=window.setTimeout(ve,ce):(ae.currentSrc.endsWith(".svg")||ae.currentSrc.startsWith("data:image/svg+xml"))&&(T.value=1,B.value=1)};ve()}const L=computed(()=>({"v-img__img--cover":r.cover,"v-img__img--contain":!r.cover})),j=()=>{if(!A.value.src||C.value==="idle")return null;const ae=createVNode("img",{class:["v-img__img",L.value],src:A.value.src,srcset:A.value.srcset,alt:r.alt,sizes:r.sizes,ref:E,onLoad:V,onError:D},null),ce=x.sources?.();return createVNode(MaybeTransition,{transition:r.transition,appear:!0},{default:()=>[withDirectives(ce?createVNode("picture",{class:"v-img__picture"},[ce,ae]):ae,[[vShow,C.value==="loaded"]])]})},q=()=>createVNode(MaybeTransition,{transition:r.transition},{default:()=>[A.value.lazySrc&&C.value!=="loaded"&&createVNode("img",{class:["v-img__img","v-img__img--preload",L.value],src:A.value.lazySrc,alt:r.alt},null)]}),H=()=>x.placeholder?createVNode(MaybeTransition,{transition:r.transition,appear:!0},{default:()=>[(C.value==="loading"||C.value==="error"&&!x.error)&&createVNode("div",{class:"v-img__placeholder"},[x.placeholder()])]}):null,X=()=>x.error?createVNode(MaybeTransition,{transition:r.transition,appear:!0},{default:()=>[C.value==="error"&&createVNode("div",{class:"v-img__error"},[x.error()])]}):null,J=()=>r.gradient?createVNode("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${r.gradient})`}},null):null,Z=shallowRef(!1);{const ae=watch(I,ce=>{ce&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{Z.value=!0})}),ae())})}return useRender(()=>{const[ae]=VResponsive.filterProps(r);return withDirectives(createVNode(VResponsive,mergeProps({class:["v-img",{"v-img--booting":!Z.value},r.class],style:[{width:convertToUnit(r.width==="auto"?T.value:r.width)},r.style]},ae,{aspectRatio:I.value,"aria-label":r.alt,role:r.alt?"img":void 0}),{additional:()=>createVNode(Fragment,null,[createVNode(j,null,null),createVNode(q,null,null),createVNode(J,null,null),createVNode(H,null,null),createVNode(X,null,null)]),default:x.default}),[[resolveDirective("intersect"),{handler:N,options:r.options},null,{once:!0}]])}),{currentSrc:S,image:E,state:C,naturalWidth:T,naturalHeight:B}}}),allowedDensities$1=[null,"default","comfortable","compact"],makeDensityProps=propsFactory({density:{type:String,default:"default",validator:r=>allowedDensities$1.includes(r)}},"density");function useDensity(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{densityClasses:computed(()=>`${n}--density-${r.density}`)}}const makeRoundedProps=propsFactory({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function useRounded(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{roundedClasses:computed(()=>{const x=isRef(r)?r.value:r.rounded,S=[];if(x===!0||x==="")S.push(`${n}--rounded`);else if(typeof x=="string"||x===0)for(const E of String(x).split(" "))S.push(`rounded-${E}`);return S})}}const allowedVariants$1=["elevated","flat","tonal","outlined","text","plain"];function genOverlays(r,n){return createVNode(Fragment,null,[r&&createVNode("span",{key:"overlay",class:`${n}__overlay`},null),createVNode("span",{key:"underlay",class:`${n}__underlay`},null)])}const makeVariantProps=propsFactory({color:String,variant:{type:String,default:"elevated",validator:r=>allowedVariants$1.includes(r)}},"variant");function useVariant(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();const _=computed(()=>{const{variant:E}=unref(r);return`${n}--variant-${E}`}),{colorClasses:x,colorStyles:S}=useColor(computed(()=>{const{variant:E,color:C}=unref(r);return{[["elevated","flat"].includes(E)?"background":"text"]:C}}));return{colorClasses:x,colorStyles:S,variantClasses:_}}const makeVAvatarProps=propsFactory({start:Boolean,end:Boolean,icon:IconValue,image:String,...makeComponentProps(),...makeDensityProps(),...makeRoundedProps(),...makeSizeProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"flat"})},"VAvatar"),VAvatar=genericComponent()({name:"VAvatar",props:makeVAvatarProps(),setup(r,n){let{slots:_}=n;const{themeClasses:x}=provideTheme(r),{colorClasses:S,colorStyles:E,variantClasses:C}=useVariant(r),{densityClasses:T}=useDensity(r),{roundedClasses:B}=useRounded(r),{sizeClasses:A,sizeStyles:I}=useSize(r);return useRender(()=>createVNode(r.tag,{class:["v-avatar",{"v-avatar--start":r.start,"v-avatar--end":r.end},x.value,S.value,T.value,B.value,A.value,C.value,r.class],style:[E.value,I.value,r.style]},{default:()=>[r.image?createVNode(VImg,{key:"image",src:r.image,alt:"",cover:!0},null):r.icon?createVNode(VIcon,{key:"icon",icon:r.icon},null):_.default?.(),genOverlays(!1,"v-avatar")]})),{}}}),_sfc_main$24=defineComponent$1({__name:"ImageProfil",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),x=ref$1(),S=computed(()=>{if(x.value)return URL.createObjectURL(new Blob([x.value],{type:"image"}))});enregistrercoute(_?.profil.suivreImage({idCompte:n.id,f:T=>x.value=T}));const{obtImageDco:E}=utiliserImagesDco(),C=E("profil");return(T,B)=>(openBlock(),createBlock(VAvatar,mergeProps({image:S.value||unref(C)},n),null,16,["image"]))}}),obtIcneContact=({type:r})=>{switch(r){case"siteInternet":return"mdi-open-in-new";case"whatsapp":return"mdi-whatsapp";case"tlphone":return"mdi-phone";case"tlgramme":return"mdi-send";case"courriel":return"mdi-email-outline";default:return"mdi-account-outline"}},utiliserNomEtTypeDispositif=({idDispositif:r,idCompte:n})=>{const _=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),E=ref$1();enregistrercoute(_?.suivreIdCompte({f:I=>E.value=I}));const C=ref$1();let T;watchEffect(async()=>{T&&await T();const I=(typeof n=="string"?n:n?.value)||E.value,N=typeof r=="string"?r:r.value;N&&(T=await enregistrercoute(_?.suivreNomDispositif({idCompte:I,idDispositif:N,f:V=>C.value=V})))});const B=computed(()=>{if(!C.value)return;const{nom:I,type:N}=C.value;return I||(N?S(nomGnriqueTypeDispositif(N)):void 0)}),A=computed(()=>C.value?.type);return{nomDispositif:B,typeDispositif:A}},nomGnriqueTypeDispositif=r=>{switch(r){case"tlphone":return"dispositifs.type.tlphone";case"navigateur":return"dispositifs.type.navigateur";case"tablette":return"dispositifs.type.tablette";case"ordinateur":return"dispositifs.type.ordinateur";case"serveur":return"dispositifs.type.serveur";default:return"dispositifs.type.autre"}},obtIcneDispositifDeType=r=>r==="tlphone"?"mdi-cellphone":r==="navigateur"?"mdi-application-outline":r==="tablette"?"mdi-tablet":r==="ordinateur"?"mdi-monitor":r==="serveur"?"mdi-server":"mdi-monitor-cellphone",utiliserIlYA=({vu:r,t:n,clefs:_={enLigne:"membres.vu.enLigne",Linstant:"membres.vu.Linstant",ilYAMinutes:"membres.vu.ilYAMinutes",ilYAHeures:"membres.vu.ilYAHeures",ilYAJours:"membres.vu.ilYAJours",ilYASemaines:"membres.vu.ilYASemaines",ilYAMois:"membres.vu.ilYAMois",ilYALongtemps:"membres.vu.ilYALongtemps"}})=>{const{formatterChiffre:x}=utiliserNumration(),S=ref$1(new Date().getTime());let E;onMounted(()=>{E=window.setInterval(()=>{S.value=new Date().getTime()},1e3)}),onUnmounted(()=>{E&&clearInterval(E)});const C=computed(()=>r?S.value-r:void 0),T=computed(()=>C.value===void 0?{ilYA:0,texte:_.enLigne}:C.value<1e3*60*2?{ilYA:0,texte:_.Linstant}:C.value<1e3*60*60?{ilYA:Math.floor(C.value/(1e3*60)),texte:_.ilYAMinutes}:C.value<1e3*60*60*24?{ilYA:Math.floor(C.value/(1e3*60*60)),texte:_.ilYAHeures}:C.value<1e3*60*60*24*7?{ilYA:Math.floor(C.value/(1e3*60*60*24)),texte:_.ilYAJours}:C.value<1e3*60*60*24*30?{ilYA:Math.floor(C.value/(1e3*60*60*24*7)),texte:_.ilYASemaines}:C.value<1e3*60*60*24*365.25?{ilYA:Math.floor(C.value/(1e3*60*60*24*30)),texte:_.ilYAMois}:{ilYA:0,texte:_.ilYALongtemps}),B=x(computed(()=>T.value.ilYA||0)),A=computed(()=>T.value.ilYA?n(T.value.texte,{n:B.value},T.value.ilYA):n(T.value.texte));return{ilYA:computed(()=>T.value.ilYA),texte:A,ilYAMs:C}},_sfc_main$23=defineComponent$1({__name:"TexteTronqu",props:{texte:{},longueurMax:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),S=computed(()=>[...n.texte].length>n.longueurMax?n.texte.slice(0,Math.max(n.longueurMax-3,3))+x("communs.troisPetitsPoints"):n.texte);return(E,C)=>(openBlock(),createElementBlock("span",null,toDisplayString$1(S.value),1))}}),VDivider$1="",makeVDividerProps=propsFactory({color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...makeComponentProps(),...makeThemeProps()},"VDivider"),VDivider=genericComponent()({name:"VDivider",props:makeVDividerProps(),setup(r,n){let{attrs:_}=n;const{themeClasses:x}=provideTheme(r),{textColorClasses:S,textColorStyles:E}=useTextColor(toRef(r,"color")),C=computed(()=>{const T={};return r.length&&(T[r.vertical?"maxHeight":"maxWidth"]=convertToUnit(r.length)),r.thickness&&(T[r.vertical?"borderRightWidth":"borderTopWidth"]=convertToUnit(r.thickness)),T});return useRender(()=>createVNode("hr",{class:[{"v-divider":!0,"v-divider--inset":r.inset,"v-divider--vertical":r.vertical},x.value,S.value,r.class],style:[C.value,E.value,r.style],"aria-orientation":!_.role||_.role==="separator"?r.vertical?"vertical":"horizontal":void 0,role:`${_.role||"separator"}`},null)),{}}}),VList$1="",makeTransitionProps=propsFactory({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function createCssTransition(r,n,_){return genericComponent()({name:r,props:makeTransitionProps({mode:_,origin:n}),setup(x,S){let{slots:E}=S;const C={onBeforeEnter(T){x.origin&&(T.style.transformOrigin=x.origin)},onLeave(T){if(x.leaveAbsolute){const{offsetTop:B,offsetLeft:A,offsetWidth:I,offsetHeight:N}=T;T._transitionInitialStyles={position:T.style.position,top:T.style.top,left:T.style.left,width:T.style.width,height:T.style.height},T.style.position="absolute",T.style.top=`${B}px`,T.style.left=`${A}px`,T.style.width=`${I}px`,T.style.height=`${N}px`}x.hideOnLeave&&T.style.setProperty("display","none","important")},onAfterLeave(T){if(x.leaveAbsolute&&T?._transitionInitialStyles){const{position:B,top:A,left:I,width:N,height:V}=T._transitionInitialStyles;delete T._transitionInitialStyles,T.style.position=B||"",T.style.top=A||"",T.style.left=I||"",T.style.width=N||"",T.style.height=V||""}}};return()=>{const T=x.group?TransitionGroup:Transition;return h$1(T,{name:x.disabled?"":r,css:!x.disabled,...x.group?void 0:{mode:x.mode},...x.disabled?{}:C},E.default)}}})}function createJavascriptTransition(r,n){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return genericComponent()({name:r,props:{mode:{type:String,default:_},disabled:Boolean},setup(x,S){let{slots:E}=S;return()=>h$1(Transition,{name:x.disabled?"":r,css:!x.disabled,...x.disabled?{}:n},E.default)}})}function ExpandTransitionGenerator(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const _=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",x=camelize(`offset-${_}`);return{onBeforeEnter(C){C._parent=C.parentNode,C._initialStyle={transition:C.style.transition,overflow:C.style.overflow,[_]:C.style[_]}},onEnter(C){const T=C._initialStyle;C.style.setProperty("transition","none","important"),C.style.overflow="hidden";const B=`${C[x]}px`;C.style[_]="0",C.offsetHeight,C.style.transition=T.transition,r&&C._parent&&C._parent.classList.add(r),requestAnimationFrame(()=>{C.style[_]=B})},onAfterEnter:E,onEnterCancelled:E,onLeave(C){C._initialStyle={transition:"",overflow:C.style.overflow,[_]:C.style[_]},C.style.overflow="hidden",C.style[_]=`${C[x]}px`,C.offsetHeight,requestAnimationFrame(()=>C.style[_]="0")},onAfterLeave:S,onLeaveCancelled:S};function S(C){r&&C._parent&&C._parent.classList.remove(r),E(C)}function E(C){const T=C._initialStyle[_];C.style.overflow=C._initialStyle.overflow,T!=null&&(C.style[_]=T),delete C._initialStyle}}const makeVDialogTransitionProps=propsFactory({target:Object},"v-dialog-transition"),VDialogTransition=genericComponent()({name:"VDialogTransition",props:makeVDialogTransitionProps(),setup(r,n){let{slots:_}=n;const x={onBeforeEnter(S){S.style.pointerEvents="none",S.style.visibility="hidden"},async onEnter(S,E){await new Promise(V=>requestAnimationFrame(V)),await new Promise(V=>requestAnimationFrame(V)),S.style.visibility="";const{x:C,y:T,sx:B,sy:A,speed:I}=getDimensions(r.target,S),N=animate(S,[{transform:`translate(${C}px, ${T}px) scale(${B}, ${A})`,opacity:0},{}],{duration:225*I,easing:deceleratedEasing});getChildren(S)?.forEach(V=>{animate(V,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*I,easing:standardEasing})}),N.finished.then(()=>E())},onAfterEnter(S){S.style.removeProperty("pointer-events")},onBeforeLeave(S){S.style.pointerEvents="none"},async onLeave(S,E){await new Promise(V=>requestAnimationFrame(V));const{x:C,y:T,sx:B,sy:A,speed:I}=getDimensions(r.target,S);animate(S,[{},{transform:`translate(${C}px, ${T}px) scale(${B}, ${A})`,opacity:0}],{duration:125*I,easing:acceleratedEasing}).finished.then(()=>E()),getChildren(S)?.forEach(V=>{animate(V,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*I,easing:standardEasing})})},onAfterLeave(S){S.style.removeProperty("pointer-events")}};return()=>r.target?createVNode(Transition,mergeProps({name:"dialog-transition"},x,{css:!1}),_):createVNode(Transition,{name:"dialog-transition"},_)}});function getChildren(r){const n=r.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return n&&[...n]}function getDimensions(r,n){const _=r.getBoundingClientRect(),x=nullifyTransforms(n),[S,E]=getComputedStyle(n).transformOrigin.split(" ").map(L=>parseFloat(L)),[C,T]=getComputedStyle(n).getPropertyValue("--v-overlay-anchor-origin").split(" ");let B=_.left+_.width/2;C==="left"||T==="left"?B-=_.width/2:(C==="right"||T==="right")&&(B+=_.width/2);let A=_.top+_.height/2;C==="top"||T==="top"?A-=_.height/2:(C==="bottom"||T==="bottom")&&(A+=_.height/2);const I=_.width/x.width,N=_.height/x.height,V=Math.max(1,I,N),D=I/V||0,O=N/V||0,F=x.width*x.height/(window.innerWidth*window.innerHeight),M=F>.12?Math.min(1.5,(F-.12)*10+1):1;return{x:B-(S+x.left),y:A-(E+x.top),sx:D,sy:O,speed:M}}createCssTransition("fab-transition","center center","out-in");createCssTransition("dialog-bottom-transition");createCssTransition("dialog-top-transition");const VFadeTransition=createCssTransition("fade-transition"),VScaleTransition=createCssTransition("scale-transition");createCssTransition("scroll-x-transition");createCssTransition("scroll-x-reverse-transition");const VScrollYTransition=createCssTransition("scroll-y-transition");createCssTransition("scroll-y-reverse-transition");const VSlideXTransition=createCssTransition("slide-x-transition");createCssTransition("slide-x-reverse-transition");const VSlideYTransition=createCssTransition("slide-y-transition");createCssTransition("slide-y-reverse-transition");const VExpandTransition=createJavascriptTransition("expand-transition",ExpandTransitionGenerator()),VExpandXTransition=createJavascriptTransition("expand-x-transition",ExpandTransitionGenerator("",!0)),makeVDefaultsProviderProps=propsFactory({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),VDefaultsProvider=genericComponent(!1)({name:"VDefaultsProvider",props:makeVDefaultsProviderProps(),setup(r,n){let{slots:_}=n;const{defaults:x,disabled:S,reset:E,root:C,scoped:T}=toRefs(r);return provideDefaults(x,{reset:E,root:C,scoped:T,disabled:S}),()=>_.default?.()}}),ListKey=Symbol.for("vuetify:list");function createList(){const r=inject$1(ListKey,{hasPrepend:shallowRef(!1),updateHasPrepend:()=>null}),n={hasPrepend:shallowRef(!1),updateHasPrepend:_=>{_&&(n.hasPrepend.value=_)}};return provide(ListKey,n),r}function useList(){return inject$1(ListKey,null)}const singleOpenStrategy={open:r=>{let{id:n,value:_,opened:x,parents:S}=r;if(_){const E=new Set;E.add(n);let C=S.get(n);for(;C!=null;)E.add(C),C=S.get(C);return E}else return x.delete(n),x},select:()=>null},multipleOpenStrategy={open:r=>{let{id:n,value:_,opened:x,parents:S}=r;if(_){let E=S.get(n);for(x.add(n);E!=null&&E!==n;)x.add(E),E=S.get(E);return x}else x.delete(n);return x},select:()=>null},listOpenStrategy={open:multipleOpenStrategy.open,select:r=>{let{id:n,value:_,opened:x,parents:S}=r;if(!_)return x;const E=[];let C=S.get(n);for(;C!=null;)E.push(C),C=S.get(C);return new Set(E)}},independentSelectStrategy=r=>{const n={select:_=>{let{id:x,value:S,selected:E}=_;if(x=toRaw(x),r&&!S){const C=Array.from(E.entries()).reduce((T,B)=>{let[A,I]=B;return I==="on"?[...T,A]:T},[]);if(C.length===1&&C[0]===x)return E}return E.set(x,S?"on":"off"),E},in:(_,x,S)=>{let E=new Map;for(const C of _||[])E=n.select({id:C,value:!0,selected:new Map(E),children:x,parents:S});return E},out:_=>{const x=[];for(const[S,E]of _.entries())E==="on"&&x.push(S);return x}};return n},independentSingleSelectStrategy=r=>{const n=independentSelectStrategy(r);return{select:x=>{let{selected:S,id:E,...C}=x;E=toRaw(E);const T=S.has(E)?new Map([[E,S.get(E)]]):new Map;return n.select({...C,id:E,selected:T})},in:(x,S,E)=>{let C=new Map;return x?.length&&(C=n.in(x.slice(0,1),S,E)),C},out:(x,S,E)=>n.out(x,S,E)}},leafSelectStrategy=r=>{const n=independentSelectStrategy(r);return{select:x=>{let{id:S,selected:E,children:C,...T}=x;return S=toRaw(S),C.has(S)?E:n.select({id:S,selected:E,children:C,...T})},in:n.in,out:n.out}},leafSingleSelectStrategy=r=>{const n=independentSingleSelectStrategy(r);return{select:x=>{let{id:S,selected:E,children:C,...T}=x;return S=toRaw(S),C.has(S)?E:n.select({id:S,selected:E,children:C,...T})},in:n.in,out:n.out}},classicSelectStrategy=r=>{const n={select:_=>{let{id:x,value:S,selected:E,children:C,parents:T}=_;x=toRaw(x);const B=new Map(E),A=[x];for(;A.length;){const N=A.shift();E.set(N,S?"on":"off"),C.has(N)&&A.push(...C.get(N))}let I=T.get(x);for(;I;){const N=C.get(I),V=N.every(O=>E.get(O)==="on"),D=N.every(O=>!E.has(O)||E.get(O)==="off");E.set(I,V?"on":D?"off":"indeterminate"),I=T.get(I)}return r&&!S&&Array.from(E.entries()).reduce((V,D)=>{let[O,F]=D;return F==="on"?[...V,O]:V},[]).length===0?B:E},in:(_,x,S)=>{let E=new Map;for(const C of _||[])E=n.select({id:C,value:!0,selected:new Map(E),children:x,parents:S});return E},out:(_,x)=>{const S=[];for(const[E,C]of _.entries())C==="on"&&!x.has(E)&&S.push(E);return S}};return n},VNestedSymbol=Symbol.for("vuetify:nested"),emptyNested={id:shallowRef(),root:{register:()=>null,unregister:()=>null,parents:ref$1(new Map),children:ref$1(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:ref$1(new Set),selected:ref$1(new Map),selectedValues:ref$1([])}},makeNestedProps=propsFactory({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),useNested=r=>{let n=!1;const _=ref$1(new Map),x=ref$1(new Map),S=useProxiedModel(r,"opened",r.opened,N=>new Set(N),N=>[...N.values()]),E=computed(()=>{if(typeof r.selectStrategy=="object")return r.selectStrategy;switch(r.selectStrategy){case"single-leaf":return leafSingleSelectStrategy(r.mandatory);case"leaf":return leafSelectStrategy(r.mandatory);case"independent":return independentSelectStrategy(r.mandatory);case"single-independent":return independentSingleSelectStrategy(r.mandatory);case"classic":default:return classicSelectStrategy(r.mandatory)}}),C=computed(()=>{if(typeof r.openStrategy=="object")return r.openStrategy;switch(r.openStrategy){case"list":return listOpenStrategy;case"single":return singleOpenStrategy;case"multiple":default:return multipleOpenStrategy}}),T=useProxiedModel(r,"selected",r.selected,N=>E.value.in(N,_.value,x.value),N=>E.value.out(N,_.value,x.value));onBeforeUnmount(()=>{n=!0});function B(N){const V=[];let D=N;for(;D!=null;)V.unshift(D),D=x.value.get(D);return V}const A=getCurrentInstance("nested"),I={id:shallowRef(),root:{opened:S,selected:T,selectedValues:computed(()=>{const N=[];for(const[V,D]of T.value.entries())D==="on"&&N.push(V);return N}),register:(N,V,D)=>{V&&N!==V&&x.value.set(N,V),D&&_.value.set(N,[]),V!=null&&_.value.set(V,[..._.value.get(V)||[],N])},unregister:N=>{if(n)return;_.value.delete(N);const V=x.value.get(N);if(V){const D=_.value.get(V)??[];_.value.set(V,D.filter(O=>O!==N))}x.value.delete(N),S.value.delete(N)},open:(N,V,D)=>{A.emit("click:open",{id:N,value:V,path:B(N),event:D});const O=C.value.open({id:N,value:V,opened:new Set(S.value),children:_.value,parents:x.value,event:D});O&&(S.value=O)},openOnSelect:(N,V,D)=>{const O=C.value.select({id:N,value:V,selected:new Map(T.value),opened:new Set(S.value),children:_.value,parents:x.value,event:D});O&&(S.value=O)},select:(N,V,D)=>{A.emit("click:select",{id:N,value:V,path:B(N),event:D});const O=E.value.select({id:N,value:V,selected:new Map(T.value),children:_.value,parents:x.value,event:D});O&&(T.value=O),I.root.openOnSelect(N,V,D)},children:_,parents:x}};return provide(VNestedSymbol,I),I.root},useNestedItem=(r,n)=>{const _=inject$1(VNestedSymbol,emptyNested),x=Symbol(getUid()),S=computed(()=>r.value!==void 0?r.value:x),E={..._,id:S,open:(C,T)=>_.root.open(S.value,C,T),openOnSelect:(C,T)=>_.root.openOnSelect(S.value,C,T),isOpen:computed(()=>_.root.opened.value.has(S.value)),parent:computed(()=>_.root.parents.value.get(S.value)),select:(C,T)=>_.root.select(S.value,C,T),isSelected:computed(()=>_.root.selected.value.get(toRaw(S.value))==="on"),isIndeterminate:computed(()=>_.root.selected.value.get(S.value)==="indeterminate"),isLeaf:computed(()=>!_.root.children.value.get(S.value)),isGroupActivator:_.isGroupActivator};return!_.isGroupActivator&&_.root.register(S.value,_.id.value,n),onBeforeUnmount(()=>{!_.isGroupActivator&&_.root.unregister(S.value)}),n&&provide(VNestedSymbol,E),E},useNestedGroupActivator=()=>{const r=inject$1(VNestedSymbol,emptyNested);provide(VNestedSymbol,{...r,isGroupActivator:!0})};function useSsrBoot(){const r=shallowRef(!1);return onMounted(()=>{window.requestAnimationFrame(()=>{r.value=!0})}),{ssrBootStyles:computed(()=>r.value?void 0:{transition:"none !important"}),isBooted:readonly$3(r)}}const VListGroupActivator=defineComponent({name:"VListGroupActivator",setup(r,n){let{slots:_}=n;return useNestedGroupActivator(),()=>_.default?.()}}),makeVListGroupProps=propsFactory({activeColor:String,baseColor:String,color:String,collapseIcon:{type:IconValue,default:"$collapse"},expandIcon:{type:IconValue,default:"$expand"},prependIcon:IconValue,appendIcon:IconValue,fluid:Boolean,subgroup:Boolean,title:String,value:null,...makeComponentProps(),...makeTagProps()},"VListGroup"),VListGroup=genericComponent()({name:"VListGroup",props:makeVListGroupProps(),setup(r,n){let{slots:_}=n;const{isOpen:x,open:S,id:E}=useNestedItem(toRef(r,"value"),!0),C=computed(()=>`v-list-group--id-${String(E.value)}`),T=useList(),{isBooted:B}=useSsrBoot();function A(D){S(!x.value,D)}const I=computed(()=>({onClick:A,class:"v-list-group__header",id:C.value})),N=computed(()=>x.value?r.collapseIcon:r.expandIcon),V=computed(()=>({VListItem:{active:x.value,activeColor:r.activeColor,baseColor:r.baseColor,color:r.color,prependIcon:r.prependIcon||r.subgroup&&N.value,appendIcon:r.appendIcon||!r.subgroup&&N.value,title:r.title,value:r.value}}));return useRender(()=>createVNode(r.tag,{class:["v-list-group",{"v-list-group--prepend":T?.hasPrepend.value,"v-list-group--fluid":r.fluid,"v-list-group--subgroup":r.subgroup,"v-list-group--open":x.value},r.class],style:r.style},{default:()=>[_.activator&&createVNode(VDefaultsProvider,{defaults:V.value},{default:()=>[createVNode(VListGroupActivator,null,{default:()=>[_.activator({props:I.value,isOpen:x.value})]})]}),createVNode(MaybeTransition,{transition:{component:VExpandTransition},disabled:!B.value},{default:()=>[withDirectives(createVNode("div",{class:"v-list-group__items",role:"group","aria-labelledby":C.value},[_.default?.()]),[[vShow,x.value]])]})]})),{}}}),VListItem$1="",VListItemSubtitle=createSimpleFunctional("v-list-item-subtitle"),VListItemTitle=createSimpleFunctional("v-list-item-title"),makeBorderProps=propsFactory({border:[Boolean,Number,String]},"border");function useBorder(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{borderClasses:computed(()=>{const x=isRef(r)?r.value:r.border,S=[];if(x===!0||x==="")S.push(`${n}--border`);else if(typeof x=="string"||x===0)for(const E of String(x).split(" "))S.push(`border-${E}`);return S})}}const makeElevationProps=propsFactory({elevation:{type:[Number,String],validator(r){const n=parseInt(r);return!isNaN(n)&&n>=0&&n<=24}}},"elevation");function useElevation(r){return{elevationClasses:computed(()=>{const _=isRef(r)?r.value:r.elevation,x=[];return _==null||x.push(`elevation-${_}`),x})}}function useRouter$1(){return getCurrentInstance("useRouter")?.proxy?.$router}function useLink$1(r,n){const _=resolveDynamicComponent("RouterLink"),x=computed(()=>!!(r.href||r.to)),S=computed(()=>x?.value||hasEvent(n,"click")||hasEvent(r,"click"));if(typeof _=="string")return{isLink:x,isClickable:S,href:toRef(r,"href")};const E=r.to?_.useLink(r):void 0;return{isLink:x,isClickable:S,route:E?.route,navigate:E?.navigate,isActive:E&&computed(()=>r.exact?E.isExactActive?.value:E.isActive?.value),href:computed(()=>r.to?E?.route.value.href:r.href)}}const makeRouterProps=propsFactory({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let inTransition=!1;function useBackButton(r,n){let _=!1,x,S;IN_BROWSER&&(nextTick$2(()=>{window.addEventListener("popstate",E),x=r?.beforeEach((C,T,B)=>{inTransition?_?n(B):B():setTimeout(()=>_?n(B):B()),inTransition=!0}),S=r?.afterEach(()=>{inTransition=!1})}),onScopeDispose(()=>{window.removeEventListener("popstate",E),x?.(),S?.()}));function E(C){C.state?.replaced||(_=!0,setTimeout(()=>_=!1))}}const VRipple="",stopSymbol=Symbol("rippleStop"),DELAY_RIPPLE=80;function transform(r,n){r.style.transform=n,r.style.webkitTransform=n}function isTouchEvent(r){return r.constructor.name==="TouchEvent"}function isKeyboardEvent(r){return r.constructor.name==="KeyboardEvent"}const calculate=function(r,n){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},x=0,S=0;if(!isKeyboardEvent(r)){const N=n.getBoundingClientRect(),V=isTouchEvent(r)?r.touches[r.touches.length-1]:r;x=V.clientX-N.left,S=V.clientY-N.top}let E=0,C=.3;n._ripple?.circle?(C=.15,E=n.clientWidth/2,E=_.center?E:E+Math.sqrt((x-E)**2+(S-E)**2)/4):E=Math.sqrt(n.clientWidth**2+n.clientHeight**2)/2;const T=`${(n.clientWidth-E*2)/2}px`,B=`${(n.clientHeight-E*2)/2}px`,A=_.center?T:`${x-E}px`,I=_.center?B:`${S-E}px`;return{radius:E,scale:C,x:A,y:I,centerX:T,centerY:B}},ripples={show(r,n){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!n?._ripple?.enabled)return;const x=document.createElement("span"),S=document.createElement("span");x.appendChild(S),x.className="v-ripple__container",_.class&&(x.className+=` ${_.class}`);const{radius:E,scale:C,x:T,y:B,centerX:A,centerY:I}=calculate(r,n,_),N=`${E*2}px`;S.className="v-ripple__animation",S.style.width=N,S.style.height=N,n.appendChild(x);const V=window.getComputedStyle(n);V&&V.position==="static"&&(n.style.position="relative",n.dataset.previousPosition="static"),S.classList.add("v-ripple__animation--enter"),S.classList.add("v-ripple__animation--visible"),transform(S,`translate(${T}, ${B}) scale3d(${C},${C},${C})`),S.dataset.activated=String(performance.now()),setTimeout(()=>{S.classList.remove("v-ripple__animation--enter"),S.classList.add("v-ripple__animation--in"),transform(S,`translate(${A}, ${I}) scale3d(1,1,1)`)},0)},hide(r){if(!r?._ripple?.enabled)return;const n=r.getElementsByClassName("v-ripple__animation");if(n.length===0)return;const _=n[n.length-1];if(_.dataset.isHiding)return;_.dataset.isHiding="true";const x=performance.now()-Number(_.dataset.activated),S=Math.max(250-x,0);setTimeout(()=>{_.classList.remove("v-ripple__animation--in"),_.classList.add("v-ripple__animation--out"),setTimeout(()=>{r.getElementsByClassName("v-ripple__animation").length===1&&r.dataset.previousPosition&&(r.style.position=r.dataset.previousPosition,delete r.dataset.previousPosition),_.parentNode?.parentNode===r&&r.removeChild(_.parentNode)},300)},S)}};function isRippleEnabled(r){return typeof r>"u"||!!r}function rippleShow(r){const n={},_=r.currentTarget;if(!(!_?._ripple||_._ripple.touched||r[stopSymbol])){if(r[stopSymbol]=!0,isTouchEvent(r))_._ripple.touched=!0,_._ripple.isTouch=!0;else if(_._ripple.isTouch)return;if(n.center=_._ripple.centered||isKeyboardEvent(r),_._ripple.class&&(n.class=_._ripple.class),isTouchEvent(r)){if(_._ripple.showTimerCommit)return;_._ripple.showTimerCommit=()=>{ripples.show(r,_,n)},_._ripple.showTimer=window.setTimeout(()=>{_?._ripple?.showTimerCommit&&(_._ripple.showTimerCommit(),_._ripple.showTimerCommit=null)},DELAY_RIPPLE)}else ripples.show(r,_,n)}}function rippleStop(r){r[stopSymbol]=!0}function rippleHide(r){const n=r.currentTarget;if(n?._ripple){if(window.clearTimeout(n._ripple.showTimer),r.type==="touchend"&&n._ripple.showTimerCommit){n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null,n._ripple.showTimer=window.setTimeout(()=>{rippleHide(r)});return}window.setTimeout(()=>{n._ripple&&(n._ripple.touched=!1)}),ripples.hide(n)}}function rippleCancelShow(r){const n=r.currentTarget;n?._ripple&&(n._ripple.showTimerCommit&&(n._ripple.showTimerCommit=null),window.clearTimeout(n._ripple.showTimer))}let keyboardRipple=!1;function keyboardRippleShow(r){!keyboardRipple&&(r.keyCode===keyCodes.enter||r.keyCode===keyCodes.space)&&(keyboardRipple=!0,rippleShow(r))}function keyboardRippleHide(r){keyboardRipple=!1,rippleHide(r)}function focusRippleHide(r){keyboardRipple&&(keyboardRipple=!1,rippleHide(r))}function updateRipple(r,n,_){const{value:x,modifiers:S}=n,E=isRippleEnabled(x);if(E||ripples.hide(r),r._ripple=r._ripple??{},r._ripple.enabled=E,r._ripple.centered=S.center,r._ripple.circle=S.circle,isObject$3(x)&&x.class&&(r._ripple.class=x.class),E&&!_){if(S.stop){r.addEventListener("touchstart",rippleStop,{passive:!0}),r.addEventListener("mousedown",rippleStop);return}r.addEventListener("touchstart",rippleShow,{passive:!0}),r.addEventListener("touchend",rippleHide,{passive:!0}),r.addEventListener("touchmove",rippleCancelShow,{passive:!0}),r.addEventListener("touchcancel",rippleHide),r.addEventListener("mousedown",rippleShow),r.addEventListener("mouseup",rippleHide),r.addEventListener("mouseleave",rippleHide),r.addEventListener("keydown",keyboardRippleShow),r.addEventListener("keyup",keyboardRippleHide),r.addEventListener("blur",focusRippleHide),r.addEventListener("dragstart",rippleHide,{passive:!0})}else!E&&_&&removeListeners(r)}function removeListeners(r){r.removeEventListener("mousedown",rippleShow),r.removeEventListener("touchstart",rippleShow),r.removeEventListener("touchend",rippleHide),r.removeEventListener("touchmove",rippleCancelShow),r.removeEventListener("touchcancel",rippleHide),r.removeEventListener("mouseup",rippleHide),r.removeEventListener("mouseleave",rippleHide),r.removeEventListener("keydown",keyboardRippleShow),r.removeEventListener("keyup",keyboardRippleHide),r.removeEventListener("dragstart",rippleHide),r.removeEventListener("blur",focusRippleHide)}function mounted$1(r,n){updateRipple(r,n,!1)}function unmounted$1(r){delete r._ripple,removeListeners(r)}function updated(r,n){if(n.value===n.oldValue)return;const _=isRippleEnabled(n.oldValue);updateRipple(r,n,_)}const Ripple={mounted:mounted$1,unmounted:unmounted$1,updated},makeVListItemProps=propsFactory({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:IconValue,baseColor:String,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:IconValue,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number,Boolean],title:[String,Number,Boolean],value:null,onClick:EventProp(),onClickOnce:EventProp(),...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeRoundedProps(),...makeRouterProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"text"})},"VListItem"),VListItem=genericComponent()({name:"VListItem",directives:{Ripple},props:makeVListItemProps(),emits:{click:r=>!0},setup(r,n){let{attrs:_,slots:x,emit:S}=n;const E=useLink$1(r,_),C=computed(()=>r.value===void 0?E.href.value:r.value),{select:T,isSelected:B,isIndeterminate:A,isGroupActivator:I,root:N,parent:V,openOnSelect:D}=useNestedItem(C,!1),O=useList(),F=computed(()=>r.active!==!1&&(r.active||E.isActive?.value||B.value)),M=computed(()=>r.link!==!1&&E.isLink.value),L=computed(()=>!r.disabled&&r.link!==!1&&(r.link||E.isClickable.value||r.value!=null&&!!O)),j=computed(()=>r.rounded||r.nav),q=computed(()=>r.color??r.activeColor),H=computed(()=>({color:F.value?q.value??r.baseColor:r.baseColor,variant:r.variant}));watch(()=>E.isActive?.value,oe=>{oe&&V.value!=null&&N.open(V.value,!0),oe&&D(oe)},{immediate:!0});const{themeClasses:X}=provideTheme(r),{borderClasses:J}=useBorder(r),{colorClasses:Z,colorStyles:ae,variantClasses:ce}=useVariant(H),{densityClasses:ve}=useDensity(r),{dimensionStyles:pe}=useDimension(r),{elevationClasses:G}=useElevation(r),{roundedClasses:Y}=useRounded(j),U=computed(()=>r.lines?`v-list-item--${r.lines}-line`:void 0),W=computed(()=>({isActive:F.value,select:T,isSelected:B.value,isIndeterminate:A.value}));function ee(oe){S("click",oe),!(I||!L.value)&&(E.navigate?.(oe),r.value!=null&&T(!B.value,oe))}function re(oe){(oe.key==="Enter"||oe.key===" ")&&(oe.preventDefault(),ee(oe))}return useRender(()=>{const oe=M.value?"a":r.tag,ie=x.title||r.title,ne=x.subtitle||r.subtitle,te=!!(r.appendAvatar||r.appendIcon),K=!!(te||x.append),le=!!(r.prependAvatar||r.prependIcon),ue=!!(le||x.prepend);return O?.updateHasPrepend(ue),r.activeColor&&deprecate("active-color",["color","base-color"]),withDirectives(createVNode(oe,{class:["v-list-item",{"v-list-item--active":F.value,"v-list-item--disabled":r.disabled,"v-list-item--link":L.value,"v-list-item--nav":r.nav,"v-list-item--prepend":!ue&&O?.hasPrepend.value,[`${r.activeClass}`]:r.activeClass&&F.value},X.value,J.value,Z.value,ve.value,G.value,U.value,Y.value,ce.value,r.class],style:[ae.value,pe.value,r.style],href:E.href.value,tabindex:L.value?O?-2:0:void 0,onClick:ee,onKeydown:L.value&&!M.value&&re},{default:()=>[genOverlays(L.value||F.value,"v-list-item"),ue&&createVNode("div",{key:"prepend",class:"v-list-item__prepend"},[x.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!le,defaults:{VAvatar:{density:r.density,image:r.prependAvatar},VIcon:{density:r.density,icon:r.prependIcon},VListItemAction:{start:!0}}},{default:()=>[x.prepend?.(W.value)]}):createVNode(Fragment,null,[r.prependAvatar&&createVNode(VAvatar,{key:"prepend-avatar",density:r.density,image:r.prependAvatar},null),r.prependIcon&&createVNode(VIcon,{key:"prepend-icon",density:r.density,icon:r.prependIcon},null)]),createVNode("div",{class:"v-list-item__spacer"},null)]),createVNode("div",{class:"v-list-item__content","data-no-activator":""},[ie&&createVNode(VListItemTitle,{key:"title"},{default:()=>[x.title?.({title:r.title})??r.title]}),ne&&createVNode(VListItemSubtitle,{key:"subtitle"},{default:()=>[x.subtitle?.({subtitle:r.subtitle})??r.subtitle]}),x.default?.(W.value)]),K&&createVNode("div",{key:"append",class:"v-list-item__append"},[x.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!te,defaults:{VAvatar:{density:r.density,image:r.appendAvatar},VIcon:{density:r.density,icon:r.appendIcon},VListItemAction:{end:!0}}},{default:()=>[x.append?.(W.value)]}):createVNode(Fragment,null,[r.appendIcon&&createVNode(VIcon,{key:"append-icon",density:r.density,icon:r.appendIcon},null),r.appendAvatar&&createVNode(VAvatar,{key:"append-avatar",density:r.density,image:r.appendAvatar},null)]),createVNode("div",{class:"v-list-item__spacer"},null)])]}),[[resolveDirective("ripple"),L.value&&r.ripple]])}),{}}}),makeVListSubheaderProps=propsFactory({color:String,inset:Boolean,sticky:Boolean,title:String,...makeComponentProps(),...makeTagProps()},"VListSubheader"),VListSubheader=genericComponent()({name:"VListSubheader",props:makeVListSubheaderProps(),setup(r,n){let{slots:_}=n;const{textColorClasses:x,textColorStyles:S}=useTextColor(toRef(r,"color"));return useRender(()=>{const E=!!(_.default||r.title);return createVNode(r.tag,{class:["v-list-subheader",{"v-list-subheader--inset":r.inset,"v-list-subheader--sticky":r.sticky},x.value,r.class],style:[{textColorStyles:S},r.style]},{default:()=>[E&&createVNode("div",{class:"v-list-subheader__text"},[_.default?.()??r.title])]})}),{}}}),makeVListChildrenProps=propsFactory({items:Array},"VListChildren"),VListChildren=genericComponent()({name:"VListChildren",props:makeVListChildrenProps(),setup(r,n){let{slots:_}=n;return createList(),()=>_.default?.()??r.items?.map(x=>{let{children:S,props:E,type:C,raw:T}=x;if(C==="divider")return _.divider?.({props:E})??createVNode(VDivider,E,null);if(C==="subheader")return _.subheader?.({props:E})??createVNode(VListSubheader,E,null);const B={subtitle:_.subtitle?N=>_.subtitle?.({...N,item:T}):void 0,prepend:_.prepend?N=>_.prepend?.({...N,item:T}):void 0,append:_.append?N=>_.append?.({...N,item:T}):void 0,title:_.title?N=>_.title?.({...N,item:T}):void 0},[A,I]=VListGroup.filterProps(E);return S?createVNode(VListGroup,mergeProps({value:E?.value},A),{activator:N=>{let{props:V}=N;return _.header?_.header({props:{...E,...V}}):createVNode(VListItem,mergeProps(E,V),B)},default:()=>createVNode(VListChildren,{items:S},_)}):_.item?_.item({props:E}):createVNode(VListItem,E,B)})}}),makeItemsProps=propsFactory({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean},"list-items");function transformItem$2(r,n){const _=getPropertyFromItem(n,r.itemTitle,n),x=r.returnObject?n:getPropertyFromItem(n,r.itemValue,_),S=getPropertyFromItem(n,r.itemChildren),E=r.itemProps===!0?typeof n=="object"&&n!=null&&!Array.isArray(n)?"children"in n?pick$1(n,["children"])[1]:n:void 0:getPropertyFromItem(n,r.itemProps),C={title:_,value:x,...E};return{title:String(C.title??""),value:C.value,props:C,children:Array.isArray(S)?transformItems$2(r,S):void 0,raw:n}}function transformItems$2(r,n){const _=[];for(const x of n)_.push(transformItem$2(r,x));return _}function useItems(r){const n=computed(()=>transformItems$2(r,r.items));return useTransformItems(n,_=>transformItem$2(r,_))}function useTransformItems(r,n){function _(S){return S.filter(E=>E!==null||r.value.some(C=>C.value===null)).map(E=>r.value.find(T=>deepEqual$2(E,T.value))??n(E))}function x(S){return S.map(E=>{let{value:C}=E;return C})}return{items:r,transformIn:_,transformOut:x}}function isPrimitive$1(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"}function transformItem$1(r,n){const _=getPropertyFromItem(n,r.itemType,"item"),x=isPrimitive$1(n)?n:getPropertyFromItem(n,r.itemTitle),S=getPropertyFromItem(n,r.itemValue,void 0),E=getPropertyFromItem(n,r.itemChildren),C=r.itemProps===!0?pick$1(n,["children"])[1]:getPropertyFromItem(n,r.itemProps),T={title:x,value:S,...C};return{type:_,title:T.title,value:T.value,props:T,children:_==="item"&&E?transformItems$1(r,E):void 0,raw:n}}function transformItems$1(r,n){const _=[];for(const x of n)_.push(transformItem$1(r,x));return _}function useListItems(r){return{items:computed(()=>transformItems$1(r,r.items))}}const makeVListProps=propsFactory({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},nav:Boolean,...makeNestedProps({selectStrategy:"single-leaf",openStrategy:"list"}),...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),itemType:{type:String,default:"type"},...makeItemsProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"text"})},"VList"),VList=genericComponent()({name:"VList",props:makeVListProps(),emits:{"update:selected":r=>!0,"update:opened":r=>!0,"click:open":r=>!0,"click:select":r=>!0},setup(r,n){let{slots:_}=n;const{items:x}=useListItems(r),{themeClasses:S}=provideTheme(r),{backgroundColorClasses:E,backgroundColorStyles:C}=useBackgroundColor(toRef(r,"bgColor")),{borderClasses:T}=useBorder(r),{densityClasses:B}=useDensity(r),{dimensionStyles:A}=useDimension(r),{elevationClasses:I}=useElevation(r),{roundedClasses:N}=useRounded(r),{open:V,select:D}=useNested(r),O=computed(()=>r.lines?`v-list--${r.lines}-line`:void 0),F=toRef(r,"activeColor"),M=toRef(r,"baseColor"),L=toRef(r,"color");createList(),provideDefaults({VListGroup:{activeColor:F,baseColor:M,color:L},VListItem:{activeClass:toRef(r,"activeClass"),activeColor:F,baseColor:M,color:L,density:toRef(r,"density"),disabled:toRef(r,"disabled"),lines:toRef(r,"lines"),nav:toRef(r,"nav"),variant:toRef(r,"variant")}});const j=shallowRef(!1),q=ref$1();function H(ce){j.value=!0}function X(ce){j.value=!1}function J(ce){!j.value&&!(ce.relatedTarget&&q.value?.contains(ce.relatedTarget))&&ae()}function Z(ce){if(q.value){if(ce.key==="ArrowDown")ae("next");else if(ce.key==="ArrowUp")ae("prev");else if(ce.key==="Home")ae("first");else if(ce.key==="End")ae("last");else return;ce.preventDefault()}}function ae(ce){if(q.value)return focusChild(q.value,ce)}return useRender(()=>createVNode(r.tag,{ref:q,class:["v-list",{"v-list--disabled":r.disabled,"v-list--nav":r.nav},S.value,E.value,T.value,B.value,I.value,O.value,N.value,r.class],style:[C.value,A.value,r.style],tabindex:r.disabled||j.value?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:H,onFocusout:X,onFocus:J,onKeydown:Z},{default:()=>[createVNode(VListChildren,{items:x.value},_)]})),{open:V,select:D,focus:ae}}}),makeVListItemActionProps=propsFactory({start:Boolean,end:Boolean,...makeComponentProps(),...makeTagProps()},"VListItemAction"),VListItemAction=genericComponent()({name:"VListItemAction",props:makeVListItemActionProps(),setup(r,n){let{slots:_}=n;return useRender(()=>createVNode(r.tag,{class:["v-list-item-action",{"v-list-item-action--start":r.start,"v-list-item-action--end":r.end},r.class],style:r.style},_)),{}}}),VNavigationDrawer$1="";function useSticky(r){let{rootEl:n,isSticky:_,layoutItemStyles:x}=r;const S=shallowRef(!1),E=shallowRef(0),C=computed(()=>{const A=typeof S.value=="boolean"?"top":S.value;return[_.value?{top:"auto",bottom:"auto",height:void 0}:void 0,S.value?{[A]:convertToUnit(E.value)}:{top:x.value.top}]});onMounted(()=>{watch(_,A=>{A?window.addEventListener("scroll",B,{passive:!0}):window.removeEventListener("scroll",B)},{immediate:!0})}),onBeforeUnmount(()=>{window.removeEventListener("scroll",B)});let T=0;function B(){const A=T>window.scrollY?"up":"down",I=n.value.getBoundingClientRect(),N=parseFloat(x.value.top??0),V=window.scrollY-Math.max(0,E.value-N),D=I.height+Math.max(E.value,N)-window.scrollY-window.innerHeight,O=parseFloat(getComputedStyle(n.value).getPropertyValue("--v-body-scroll-y"))||0;I.height<window.innerHeight-N?(S.value="top",E.value=N):A==="up"&&S.value==="bottom"||A==="down"&&S.value==="top"?(E.value=window.scrollY+I.top-O,S.value=!0):A==="down"&&D<=0?(E.value=0,S.value="bottom"):A==="up"&&V<=0&&(O?S.value!=="top"&&(E.value=-V+O+N,S.value="top"):(E.value=I.top+V,S.value="top")),T=window.scrollY}return{isStuck:S,stickyStyles:C}}const HORIZON=100,HISTORY=20;function kineticEnergyToVelocity(r){const n=1.41421356237;return(r<0?-1:1)*Math.sqrt(Math.abs(r))*n}function calculateImpulseVelocity(r){if(r.length<2)return 0;if(r.length===2)return r[1].t===r[0].t?0:(r[1].d-r[0].d)/(r[1].t-r[0].t);let n=0;for(let _=r.length-1;_>0;_--){if(r[_].t===r[_-1].t)continue;const x=kineticEnergyToVelocity(n),S=(r[_].d-r[_-1].d)/(r[_].t-r[_-1].t);n+=(S-x)*Math.abs(S),_===r.length-1&&(n*=.5)}return kineticEnergyToVelocity(n)*1e3}function useVelocity(){const r={};function n(S){Array.from(S.changedTouches).forEach(E=>{(r[E.identifier]??(r[E.identifier]=new CircularBuffer(HISTORY))).push([S.timeStamp,E])})}function _(S){Array.from(S.changedTouches).forEach(E=>{delete r[E.identifier]})}function x(S){const E=r[S]?.values().reverse();if(!E)throw new Error(`No samples for touch id ${S}`);const C=E[0],T=[],B=[];for(const A of E){if(C[0]-A[0]>HORIZON)break;T.push({t:A[0],d:A[1].clientX}),B.push({t:A[0],d:A[1].clientY})}return{x:calculateImpulseVelocity(T),y:calculateImpulseVelocity(B),get direction(){const{x:A,y:I}=this,[N,V]=[Math.abs(A),Math.abs(I)];return N>V&&A>=0?"right":N>V&&A<=0?"left":V>N&&I>=0?"down":V>N&&I<=0?"up":oops$1()}}}return{addMovement:n,endTouch:_,getVelocity:x}}function oops$1(){throw new Error}function useTouch(r){let{isActive:n,isTemporary:_,width:x,touchless:S,position:E}=r;onMounted(()=>{window.addEventListener("touchstart",L,{passive:!0}),window.addEventListener("touchmove",j,{passive:!1}),window.addEventListener("touchend",q,{passive:!0})}),onBeforeUnmount(()=>{window.removeEventListener("touchstart",L),window.removeEventListener("touchmove",j),window.removeEventListener("touchend",q)});const C=computed(()=>["left","right"].includes(E.value)),{addMovement:T,endTouch:B,getVelocity:A}=useVelocity();let I=!1;const N=shallowRef(!1),V=shallowRef(0),D=shallowRef(0);let O;function F(X,J){return(E.value==="left"?X:E.value==="right"?document.documentElement.clientWidth-X:E.value==="top"?X:E.value==="bottom"?document.documentElement.clientHeight-X:oops())-(J?x.value:0)}function M(X){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const Z=E.value==="left"?(X-D.value)/x.value:E.value==="right"?(document.documentElement.clientWidth-X-D.value)/x.value:E.value==="top"?(X-D.value)/x.value:E.value==="bottom"?(document.documentElement.clientHeight-X-D.value)/x.value:oops();return J?Math.max(0,Math.min(1,Z)):Z}function L(X){if(S.value)return;const J=X.changedTouches[0].clientX,Z=X.changedTouches[0].clientY,ae=25,ce=E.value==="left"?J<ae:E.value==="right"?J>document.documentElement.clientWidth-ae:E.value==="top"?Z<ae:E.value==="bottom"?Z>document.documentElement.clientHeight-ae:oops(),ve=n.value&&(E.value==="left"?J<x.value:E.value==="right"?J>document.documentElement.clientWidth-x.value:E.value==="top"?Z<x.value:E.value==="bottom"?Z>document.documentElement.clientHeight-x.value:oops());(ce||ve||n.value&&_.value)&&(I=!0,O=[J,Z],D.value=F(C.value?J:Z,n.value),V.value=M(C.value?J:Z),B(X),T(X))}function j(X){const J=X.changedTouches[0].clientX,Z=X.changedTouches[0].clientY;if(I){if(!X.cancelable){I=!1;return}const ce=Math.abs(J-O[0]),ve=Math.abs(Z-O[1]);(C.value?ce>ve&&ce>3:ve>ce&&ve>3)?(N.value=!0,I=!1):(C.value?ve:ce)>3&&(I=!1)}if(!N.value)return;X.preventDefault(),T(X);const ae=M(C.value?J:Z,!1);V.value=Math.max(0,Math.min(1,ae)),ae>1?D.value=F(C.value?J:Z,!0):ae<0&&(D.value=F(C.value?J:Z,!1))}function q(X){if(I=!1,!N.value)return;T(X),N.value=!1;const J=A(X.changedTouches[0].identifier),Z=Math.abs(J.x),ae=Math.abs(J.y);(C.value?Z>ae&&Z>400:ae>Z&&ae>3)?n.value=J.direction===({left:"right",right:"left",top:"down",bottom:"up"}[E.value]||oops()):n.value=V.value>.5}const H=computed(()=>N.value?{transform:E.value==="left"?`translateX(calc(-100% + ${V.value*x.value}px))`:E.value==="right"?`translateX(calc(100% - ${V.value*x.value}px))`:E.value==="top"?`translateY(calc(-100% + ${V.value*x.value}px))`:E.value==="bottom"?`translateY(calc(100% - ${V.value*x.value}px))`:oops(),transition:"none"}:void 0);return{isDragging:N,dragProgress:V,dragStyles:H}}function oops(){throw new Error}function useScopeId(){const n=getCurrentInstance("useScopeId").vnode.scopeId;return{scopeId:n?{[n]:""}:void 0}}const locations=["start","end","left","right","top","bottom"],makeVNavigationDrawerProps=propsFactory({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:r=>locations.includes(r)},sticky:Boolean,...makeBorderProps(),...makeComponentProps(),...makeElevationProps(),...makeLayoutItemProps(),...makeRoundedProps(),...makeTagProps({tag:"nav"}),...makeThemeProps()},"VNavigationDrawer"),VNavigationDrawer=genericComponent()({name:"VNavigationDrawer",props:makeVNavigationDrawerProps(),emits:{"update:modelValue":r=>!0,"update:rail":r=>!0},setup(r,n){let{attrs:_,emit:x,slots:S}=n;const{isRtl:E}=useRtl(),{themeClasses:C}=provideTheme(r),{borderClasses:T}=useBorder(r),{backgroundColorClasses:B,backgroundColorStyles:A}=useBackgroundColor(toRef(r,"color")),{elevationClasses:I}=useElevation(r),{mobile:N}=useDisplay(),{roundedClasses:V}=useRounded(r),D=useRouter$1(),O=useProxiedModel(r,"modelValue",null,ie=>!!ie),{ssrBootStyles:F}=useSsrBoot(),{scopeId:M}=useScopeId(),L=ref$1(),j=shallowRef(!1),q=computed(()=>r.rail&&r.expandOnHover&&j.value?Number(r.width):Number(r.rail?r.railWidth:r.width)),H=computed(()=>toPhysical(r.location,E.value)),X=computed(()=>!r.permanent&&(N.value||r.temporary)),J=computed(()=>r.sticky&&!X.value&&H.value!=="bottom");r.expandOnHover&&r.rail!=null&&watch(j,ie=>x("update:rail",!ie)),r.disableResizeWatcher||watch(X,ie=>!r.permanent&&nextTick$2(()=>O.value=!ie)),!r.disableRouteWatcher&&D&&watch(D.currentRoute,()=>X.value&&(O.value=!1)),watch(()=>r.permanent,ie=>{ie&&(O.value=!0)}),onBeforeMount(()=>{r.modelValue!=null||X.value||(O.value=r.permanent||!N.value)});const{isDragging:Z,dragProgress:ae,dragStyles:ce}=useTouch({isActive:O,isTemporary:X,width:q,touchless:toRef(r,"touchless"),position:H}),ve=computed(()=>{const ie=X.value?0:r.rail&&r.expandOnHover?Number(r.railWidth):q.value;return Z.value?ie*ae.value:ie}),{layoutItemStyles:pe,layoutItemScrimStyles:G}=useLayoutItem({id:r.name,order:computed(()=>parseInt(r.order,10)),position:H,layoutSize:ve,elementSize:q,active:computed(()=>O.value||Z.value),disableTransitions:computed(()=>Z.value),absolute:computed(()=>r.absolute||J.value&&typeof Y.value!="string")}),{isStuck:Y,stickyStyles:U}=useSticky({rootEl:L,isSticky:J,layoutItemStyles:pe}),W=useBackgroundColor(computed(()=>typeof r.scrim=="string"?r.scrim:null)),ee=computed(()=>({...Z.value?{opacity:ae.value*.2,transition:"none"}:void 0,...G.value}));provideDefaults({VList:{bgColor:"transparent"}});function re(){j.value=!0}function oe(){j.value=!1}return useRender(()=>{const ie=S.image||r.image;return createVNode(Fragment,null,[createVNode(r.tag,mergeProps({ref:L,onMouseenter:re,onMouseleave:oe,class:["v-navigation-drawer",`v-navigation-drawer--${H.value}`,{"v-navigation-drawer--expand-on-hover":r.expandOnHover,"v-navigation-drawer--floating":r.floating,"v-navigation-drawer--is-hovering":j.value,"v-navigation-drawer--rail":r.rail,"v-navigation-drawer--temporary":X.value,"v-navigation-drawer--active":O.value,"v-navigation-drawer--sticky":J.value},C.value,B.value,T.value,I.value,V.value,r.class],style:[A.value,pe.value,ce.value,F.value,U.value,r.style]},M,_),{default:()=>[ie&&createVNode("div",{key:"image",class:"v-navigation-drawer__img"},[S.image?S.image?.({image:r.image}):createVNode("img",{src:r.image,alt:""},null)]),S.prepend&&createVNode("div",{class:"v-navigation-drawer__prepend"},[S.prepend?.()]),createVNode("div",{class:"v-navigation-drawer__content"},[S.default?.()]),S.append&&createVNode("div",{class:"v-navigation-drawer__append"},[S.append?.()])]}),createVNode(Transition,{name:"fade-transition"},{default:()=>[X.value&&(Z.value||O.value)&&!!r.scrim&&createVNode("div",mergeProps({class:["v-navigation-drawer__scrim",W.backgroundColorClasses.value],style:[ee.value,W.backgroundColorStyles.value],onClick:()=>O.value=!1},M),null)]})])}),{isStuck:Y}}}),_sfc_main$22=defineComponent$1({__name:"NavigationPrincipale",setup(r){const{useI18n:n}=_(),{t:_}=n(),x=inject$1("constl"),{traduireNom:S}=utiliserLangues(),E=ref$1({}),C=S(E);enregistrercoute(x?.profil.suivreNoms({f:V=>E.value=V}));const T=ref$1();onMounted(async()=>{T.value=await x?.obtIdDispositif()});const{nomDispositif:B,typeDispositif:A}=utiliserNomEtTypeDispositif({idDispositif:T}),I=computed(()=>obtIcneDispositifDeType(A.value)),N=[{icne:"mdi-home",texte:_("navigation.accueil"),chemin:"/"},{icne:"mdi-database",texte:_("navigation.donnes"),chemin:"/donnes"},{icne:"mdi-pin",texte:_("navigation.favoris"),chemin:"/favoris"},{icne:"mdi-magnify",texte:_("navigation.recherche"),chemin:"/recherche"},{icne:"mdi-lightning-bolt",texte:_("navigation.automatisations"),chemin:"/automatisations"},{icne:"mdi-bug",texte:_("navigation.signalements"),chemin:"/signalements"}];return(V,D)=>(openBlock(),createBlock(VNavigationDrawer,{"expand-on-hover":"",permanent:"",rail:""},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{title:unref(C),onClick:D[0]||(D[0]=O=>V.$router.push({path:"/compte"}))},{prepend:withCtx(()=>[createVNode(_sfc_main$24)]),subtitle:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(I.value),1)]),_:1}),createVNode(_sfc_main$23,{texte:unref(B)||unref(_)("dispositifs.sansNom"),"longueur-max":20},null,8,["texte"])]),_:1},8,["title"])]),_:1}),createVNode(VDivider),createVNode(VList,{density:"compact",class:"align-start",nav:""},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(N,O=>createVNode(VListItem,{key:O.chemin,"prepend-icon":O.icne,title:O.texte,onClick:F=>V.$router.push(encodeURI(O.chemin))},null,8,["prepend-icon","title","onClick"])),64))]),_:1})]),_:1}))}}),_sfc_main$21=defineComponent$1({__name:"PagePrincipale",setup(r){return(n,_)=>{const x=resolveComponent("router-view");return openBlock(),createElementBlock("div",null,[createVNode(_sfc_main$22),createVNode(x,null,{default:withCtx(({Component:S})=>[createVNode(Transition,{name:"fade"},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(S)))]),_:2},1024)]),_:1})])}}});let getRandomValues$2;const rnds8$2=new Uint8Array(16);function rng$2(){if(!getRandomValues$2&&(getRandomValues$2=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues$2))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues$2(rnds8$2)}const byteToHex$2=[];for(let r=0;r<256;++r)byteToHex$2.push((r+256).toString(16).slice(1));function unsafeStringify$2(r,n=0){return(byteToHex$2[r[n+0]]+byteToHex$2[r[n+1]]+byteToHex$2[r[n+2]]+byteToHex$2[r[n+3]]+"-"+byteToHex$2[r[n+4]]+byteToHex$2[r[n+5]]+"-"+byteToHex$2[r[n+6]]+byteToHex$2[r[n+7]]+"-"+byteToHex$2[r[n+8]]+byteToHex$2[r[n+9]]+"-"+byteToHex$2[r[n+10]]+byteToHex$2[r[n+11]]+byteToHex$2[r[n+12]]+byteToHex$2[r[n+13]]+byteToHex$2[r[n+14]]+byteToHex$2[r[n+15]]).toLowerCase()}const randomUUID$2=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native$2={randomUUID:randomUUID$2};function v4$2(r,n,_){if(native$2.randomUUID&&!n&&!r)return native$2.randomUUID();r=r||{};const x=r.random||(r.rng||rng$2)();if(x[6]=x[6]&15|64,x[8]=x[8]&63|128,n){_=_||0;for(let S=0;S<16;++S)n[_+S]=x[S];return n}return unsafeStringify$2(x)}const _hoisted_1$M=["width"],_hoisted_2$y=createBaseVNode("title",null,"Logo Constellation",-1),_hoisted_3$l=["x1","y1","x2","y2"],_hoisted_4$b=["cx","cy"],_hoisted_5$a=["to","dur","begin"],_sfc_main$20=defineComponent$1({__name:"LogoAnim",props:{largeur:{},delai:{},debut:{}},setup(r){const n=r,_=computed(()=>n.delai.toString()+"s"),x=ref$1([{cls:"cls-1",x:70.1742129851985,y:1.87,r:2},{cls:"cls-2",x:67.306684713793,y:16.47,r:5},{cls:"cls-3",x:34.3464829934943,y:10.01,r:3},{cls:"cls-4",x:22.5783740121382,y:31.93,r:3},{cls:"cls-1",x:13.8115094092477,y:56.91,r:2},{cls:"cls-2",x:46.9376282583068,y:69.76,r:6},{cls:"cls-3",x:86.0040169410121,y:61.32,r:4},{cls:"cls-4",x:91.0120944854386,y:54.13,r:2},{cls:"cls-1",x:112.68938567,y:63.71,r:5},{cls:"cls-2",x:100.419159062132,y:66.3,r:2},{cls:"cls-3",x:88.4938654324761,y:82.18,r:4},{cls:"cls-4",x:97.9593284722526,y:84.1,r:3},{cls:"cls-1",x:69.5525695323757,y:90.44,r:5},{cls:"cls-2",x:64.1411605466533,y:94.6,r:2},{cls:"cls-3",x:157.031284111252,y:83.37,r:3},{cls:"cls-4",x:136.188490590752,y:68.42,r:5},{cls:"cls-1",x:142.952888267913,y:53.85,r:2},{cls:"cls-2",x:162.02953761516,y:50.8,r:4},{cls:"cls-3",x:185.910142776055,y:57.71,r:4},{cls:"cls-4",x:137.021896694756,y:38.01,r:5},{cls:"cls-1",x:142.973627909008,y:29.65,r:3}].map(E=>Object.assign({},E,{begin:`${Math.random()*n.debut}s`,i:v4$2()}))),S=ref$1([{x1:70.1742129851985,y1:1.87,x2:34.3464829934943,y2:10.01,i:v4$2()},{x1:67.306684713793,y1:16.47,x2:34.3464829934943,y2:10.01,i:v4$2()},{x1:34.3464829934943,y1:10.01,x2:22.5783740121382,y2:31.93,i:v4$2()},{x1:22.5783740121382,y1:31.93,x2:13.8115094092477,y2:56.91,i:v4$2()},{x1:13.8115094092477,y1:56.91,x2:46.9376282583068,y2:69.76,i:v4$2()},{x1:46.9376282583068,y1:69.76,x2:86.0040169410121,y2:61.32,i:v4$2()},{x1:86.0040169410121,y1:61.32,x2:91.0120944854386,y2:54.13,i:v4$2()},{x1:86.0040169410121,y1:61.32,x2:100.419159062132,y2:66.3,i:v4$2()},{x1:91.0120944854386,y1:54.13,x2:112.68938567,y2:63.71,i:v4$2()},{x1:100.419159062132,y1:66.3,x2:112.68938567,y2:63.71,i:v4$2()},{x1:112.68938567,y1:63.71,x2:97.9593284722526,y2:84.1,i:v4$2()},{x1:97.9593284722526,y1:84.1,x2:88.4938654324761,y2:82.18,i:v4$2()},{x1:88.4938654324761,y1:82.18,x2:69.5525695323757,y2:90.44,i:v4$2()},{x1:69.5525695323757,y1:90.44,x2:64.1411605466533,y2:94.6,i:v4$2()},{x1:112.68938567,y1:63.71,x2:136.188490590752,y2:68.42,i:v4$2()},{x1:136.188490590752,y1:68.42,x2:157.031284111252,y2:83.37,i:v4$2()},{x1:136.188490590752,y1:68.42,x2:142.952888267913,y2:53.85,i:v4$2()},{x1:112.68938567,y1:63.71,x2:142.952888267913,y2:53.85,i:v4$2()},{x1:142.952888267913,y1:53.85,x2:137.021896694756,y2:38.01,i:v4$2()},{x1:91.0120944854386,y1:54.13,x2:137.021896694756,y2:38.01,i:v4$2()},{x1:137.021896694756,y1:38.01,x2:142.973627909008,y2:29.65,i:v4$2()},{x1:137.021896694756,y1:38.01,x2:162.02953761516,y2:50.8,i:v4$2()},{x1:142.952888267913,y1:53.85,x2:162.02953761516,y2:50.8,i:v4$2()},{x1:162.02953761516,y1:50.8,x2:185.910142776055,y2:57.71,i:v4$2()}]);return(E,C)=>(openBlock(),createElementBlock("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -10 200 110",width:E.largeur},[_hoisted_2$y,(openBlock(!0),createElementBlock(Fragment,null,renderList(S.value,T=>(openBlock(),createElementBlock("line",{key:T.i,class:"l",x1:T.x1,y1:T.y1,x2:T.x2,y2:T.y2},null,8,_hoisted_3$l))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(x.value,T=>(openBlock(),createElementBlock("circle",{key:T.i,class:normalizeClass(T.cls),cx:T.x,cy:T.y},[createBaseVNode("animate",{attributeName:"r",to:T.r,dur:_.value,begin:T.begin,fill:"freeze",repeatCount:"1"},null,8,_hoisted_5$a)],10,_hoisted_4$b))),128))],8,_hoisted_1$M))}}),LogoAnim__vue_vue_type_style_index_0_lang="",URL_SIGNALEMENTS="https://github.com/reseau-constellation/iug/issues",URL_TLCHARGEMENTS="https://github.com/reseau-constellation/iug/releases",IPA_TLCHARGEMENTS="https://api.github.com/repos/reseau-constellation/iug/releases",COURRIEL_SIGNALEMENTS="julien.malard@mail.mcgill.ca",MAX_TAILLE_IMAGE$4=500*1e3,GABARIT_CODE="https://github.com/reseau-constellation/gabarits/archive/refs/heads/main.zip";var imageFileResize=function({file:r,width:n,height:_,type:x}){return new Promise(function(S,E){let C=["jpg","gif","bmp","png","jpeg","svg"];try{if(r.name&&r.name.split(".").reverse()[0]&&C.includes(r.name.split(".").reverse()[0].toLowerCase())&&r.size&&r.type){let T=x||"jpeg";const B=n||500,A=_||300,I=r.name,N=new FileReader;N.readAsDataURL(r),N.onload=V=>{const D=new Image;D.src=V.target.result,D.onload=()=>{const O=document.createElement("canvas");O.width=B,O.height=A;const F=O.getContext("2d");F.drawImage(D,0,0,B,A),F.canvas.toBlob(M=>{const L=new File([M],I,{type:`image/${T.toLowerCase()}`,lastModified:Date.now()});S(L)},"image/jpeg",1)},N.onerror=O=>E(O)}}else E("File not supported!")}catch(T){console.log("Error while image resize: ",T),E(T)}})};const convert$1=getDefaultExportFromCjs(imageFileResize),VBtn$1="",VBtnToggle$1="",VBtnGroup$1="",makeVBtnGroupProps=propsFactory({divided:Boolean,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeElevationProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps()},"VBtnGroup"),VBtnGroup=genericComponent()({name:"VBtnGroup",props:makeVBtnGroupProps(),setup(r,n){let{slots:_}=n;const{themeClasses:x}=provideTheme(r),{densityClasses:S}=useDensity(r),{borderClasses:E}=useBorder(r),{elevationClasses:C}=useElevation(r),{roundedClasses:T}=useRounded(r);provideDefaults({VBtn:{height:"auto",color:toRef(r,"color"),density:toRef(r,"density"),flat:!0,variant:toRef(r,"variant")}}),useRender(()=>createVNode(r.tag,{class:["v-btn-group",{"v-btn-group--divided":r.divided},x.value,E.value,S.value,C.value,T.value,r.class],style:r.style},_))}}),makeGroupProps=propsFactory({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),makeGroupItemProps=propsFactory({value:null,disabled:Boolean,selectedClass:String},"group-item");function useGroupItem(r,n){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const x=getCurrentInstance("useGroupItem");if(!x)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const S=getUid();provide(Symbol.for(`${n.description}:id`),S);const E=inject$1(n,null);if(!E){if(!_)return E;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${n.description}`)}const C=toRef(r,"value"),T=computed(()=>!!(E.disabled.value||r.disabled));E.register({id:S,value:C,disabled:T},x),onBeforeUnmount(()=>{E.unregister(S)});const B=computed(()=>E.isSelected(S)),A=computed(()=>B.value&&[E.selectedClass.value,r.selectedClass]);return watch(B,I=>{x.emit("group:selected",{value:I})}),{id:S,isSelected:B,toggle:()=>E.select(S,!B.value),select:I=>E.select(S,I),selectedClass:A,value:C,disabled:T,group:E}}function useGroup(r,n){let _=!1;const x=reactive([]),S=useProxiedModel(r,"modelValue",[],V=>V==null?[]:getIds(x,wrapInArray(V)),V=>{const D=getValues(x,V);return r.multiple?D:D[0]}),E=getCurrentInstance("useGroup");function C(V,D){const O=V,F=Symbol.for(`${n.description}:id`),L=findChildrenWithProvide(F,E?.vnode).indexOf(D);L>-1?x.splice(L,0,O):x.push(O)}function T(V){if(_)return;B();const D=x.findIndex(O=>O.id===V);x.splice(D,1)}function B(){const V=x.find(D=>!D.disabled);V&&r.mandatory==="force"&&!S.value.length&&(S.value=[V.id])}onMounted(()=>{B()}),onBeforeUnmount(()=>{_=!0});function A(V,D){const O=x.find(F=>F.id===V);if(!(D&&O?.disabled))if(r.multiple){const F=S.value.slice(),M=F.findIndex(j=>j===V),L=~M;if(D=D??!L,L&&r.mandatory&&F.length<=1||!L&&r.max!=null&&F.length+1>r.max)return;M<0&&D?F.push(V):M>=0&&!D&&F.splice(M,1),S.value=F}else{const F=S.value.includes(V);if(r.mandatory&&F)return;S.value=D??!F?[V]:[]}}function I(V){if(r.multiple,S.value.length){const D=S.value[0],O=x.findIndex(L=>L.id===D);let F=(O+V)%x.length,M=x[F];for(;M.disabled&&F!==O;)F=(F+V)%x.length,M=x[F];if(M.disabled)return;S.value=[x[F].id]}else{const D=x.find(O=>!O.disabled);D&&(S.value=[D.id])}}const N={register:C,unregister:T,selected:S,select:A,disabled:toRef(r,"disabled"),prev:()=>I(x.length-1),next:()=>I(1),isSelected:V=>S.value.includes(V),selectedClass:computed(()=>r.selectedClass),items:computed(()=>x),getItemIndex:V=>getItemIndex(x,V)};return provide(n,N),N}function getItemIndex(r,n){const _=getIds(r,[n]);return _.length?r.findIndex(x=>x.id===_[0]):-1}function getIds(r,n){const _=[];return n.forEach(x=>{const S=r.find(C=>deepEqual$2(x,C.value)),E=r[x];S?.value!=null?_.push(S.id):E!=null&&_.push(E.id)}),_}function getValues(r,n){const _=[];return n.forEach(x=>{const S=r.findIndex(E=>E.id===x);if(~S){const E=r[S];_.push(E.value!=null?E.value:S)}}),_}const VBtnToggleSymbol=Symbol.for("vuetify:v-btn-toggle"),makeVBtnToggleProps=propsFactory({...makeVBtnGroupProps(),...makeGroupProps()},"VBtnToggle"),VBtnToggle=genericComponent()({name:"VBtnToggle",props:makeVBtnToggleProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{slots:_}=n;const{isSelected:x,next:S,prev:E,select:C,selected:T}=useGroup(r,VBtnToggleSymbol);return useRender(()=>{const[B]=VBtnGroup.filterProps(r);return createVNode(VBtnGroup,mergeProps({class:["v-btn-toggle",r.class]},B,{style:r.style}),{default:()=>[_.default?.({isSelected:x,next:S,prev:E,select:C,selected:T})]})}),{next:S,prev:E,select:C}}}),VProgressCircular$1="";function useIntersectionObserver(r,n){const _=ref$1(),x=shallowRef(!1);if(SUPPORTS_INTERSECTION){const S=new IntersectionObserver(E=>{r?.(E,S),x.value=!!E.find(C=>C.isIntersecting)},n);onBeforeUnmount(()=>{S.disconnect()}),watch(_,(E,C)=>{C&&(S.unobserve(C),x.value=!1),E&&S.observe(E)},{flush:"post"})}return{intersectionRef:_,isIntersecting:x}}const makeVProgressCircularProps=propsFactory({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...makeComponentProps(),...makeSizeProps(),...makeTagProps({tag:"div"}),...makeThemeProps()},"VProgressCircular"),VProgressCircular=genericComponent()({name:"VProgressCircular",props:makeVProgressCircularProps(),setup(r,n){let{slots:_}=n;const x=20,S=2*Math.PI*x,E=ref$1(),{themeClasses:C}=provideTheme(r),{sizeClasses:T,sizeStyles:B}=useSize(r),{textColorClasses:A,textColorStyles:I}=useTextColor(toRef(r,"color")),{textColorClasses:N,textColorStyles:V}=useTextColor(toRef(r,"bgColor")),{intersectionRef:D,isIntersecting:O}=useIntersectionObserver(),{resizeRef:F,contentRect:M}=useResizeObserver(),L=computed(()=>Math.max(0,Math.min(100,parseFloat(r.modelValue)))),j=computed(()=>Number(r.width)),q=computed(()=>B.value?Number(r.size):M.value?M.value.width:Math.max(j.value,32)),H=computed(()=>x/(1-j.value/q.value)*2),X=computed(()=>j.value/q.value*H.value),J=computed(()=>convertToUnit((100-L.value)/100*S));return watchEffect(()=>{D.value=E.value,F.value=E.value}),useRender(()=>createVNode(r.tag,{ref:E,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!r.indeterminate,"v-progress-circular--visible":O.value,"v-progress-circular--disable-shrink":r.indeterminate==="disable-shrink"},C.value,T.value,A.value,r.class],style:[B.value,I.value,r.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":r.indeterminate?void 0:L.value},{default:()=>[createVNode("svg",{style:{transform:`rotate(calc(-90deg + ${Number(r.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${H.value} ${H.value}`},[createVNode("circle",{class:["v-progress-circular__underlay",N.value],style:V.value,fill:"transparent",cx:"50%",cy:"50%",r:x,"stroke-width":X.value,"stroke-dasharray":S,"stroke-dashoffset":0},null),createVNode("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:x,"stroke-width":X.value,"stroke-dasharray":S,"stroke-dashoffset":J.value},null)]),_.default&&createVNode("div",{class:"v-progress-circular__content"},[_.default({value:L.value})])]})),{}}}),VProgressLinear$1="",oppositeMap={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},makeLocationProps=propsFactory({location:String},"location");function useLocation(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=arguments.length>2?arguments[2]:void 0;const{isRtl:x}=useRtl();return{locationStyles:computed(()=>{if(!r.location)return{};const{side:E,align:C}=parseAnchor(r.location.split(" ").length>1?r.location:`${r.location} center`,x.value);function T(A){return _?_(A):0}const B={};return E!=="center"&&(n?B[oppositeMap[E]]=`calc(100% - ${T(E)}px)`:B[E]=0),C!=="center"?n?B[oppositeMap[C]]=`calc(100% - ${T(C)}px)`:B[C]=0:(E==="center"?B.top=B.left="50%":B[{top:"left",bottom:"left",left:"top",right:"top"}[E]]="50%",B.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[E]),B})}}const makeVProgressLinearProps=propsFactory({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...makeComponentProps(),...makeLocationProps({location:"top"}),...makeRoundedProps(),...makeTagProps(),...makeThemeProps()},"VProgressLinear"),VProgressLinear=genericComponent()({name:"VProgressLinear",props:makeVProgressLinearProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{slots:_}=n;const x=useProxiedModel(r,"modelValue"),{isRtl:S,rtlClasses:E}=useRtl(),{themeClasses:C}=provideTheme(r),{locationStyles:T}=useLocation(r),{textColorClasses:B,textColorStyles:A}=useTextColor(r,"color"),{backgroundColorClasses:I,backgroundColorStyles:N}=useBackgroundColor(computed(()=>r.bgColor||r.color)),{backgroundColorClasses:V,backgroundColorStyles:D}=useBackgroundColor(r,"color"),{roundedClasses:O}=useRounded(r),{intersectionRef:F,isIntersecting:M}=useIntersectionObserver(),L=computed(()=>parseInt(r.max,10)),j=computed(()=>parseInt(r.height,10)),q=computed(()=>parseFloat(r.bufferValue)/L.value*100),H=computed(()=>parseFloat(x.value)/L.value*100),X=computed(()=>S.value!==r.reverse),J=computed(()=>r.indeterminate?"fade-transition":"slide-x-transition"),Z=computed(()=>r.bgOpacity==null?r.bgOpacity:parseFloat(r.bgOpacity));function ae(ce){if(!F.value)return;const{left:ve,right:pe,width:G}=F.value.getBoundingClientRect(),Y=X.value?G-ce.clientX+(pe-G):ce.clientX-ve;x.value=Math.round(Y/G*L.value)}return useRender(()=>createVNode(r.tag,{ref:F,class:["v-progress-linear",{"v-progress-linear--absolute":r.absolute,"v-progress-linear--active":r.active&&M.value,"v-progress-linear--reverse":X.value,"v-progress-linear--rounded":r.rounded,"v-progress-linear--rounded-bar":r.roundedBar,"v-progress-linear--striped":r.striped},O.value,C.value,E.value,r.class],style:[{bottom:r.location==="bottom"?0:void 0,top:r.location==="top"?0:void 0,height:r.active?convertToUnit(j.value):0,"--v-progress-linear-height":convertToUnit(j.value),...T.value},r.style],role:"progressbar","aria-hidden":r.active?"false":"true","aria-valuemin":"0","aria-valuemax":r.max,"aria-valuenow":r.indeterminate?void 0:H.value,onClick:r.clickable&&ae},{default:()=>[r.stream&&createVNode("div",{key:"stream",class:["v-progress-linear__stream",B.value],style:{...A.value,[X.value?"left":"right"]:convertToUnit(-j.value),borderTop:`${convertToUnit(j.value/2)} dotted`,opacity:Z.value,top:`calc(50% - ${convertToUnit(j.value/4)})`,width:convertToUnit(100-q.value,"%"),"--v-progress-linear-stream-to":convertToUnit(j.value*(X.value?1:-1))}},null),createVNode("div",{class:["v-progress-linear__background",I.value],style:[N.value,{opacity:Z.value,width:convertToUnit(r.stream?q.value:100,"%")}]},null),createVNode(Transition,{name:J.value},{default:()=>[r.indeterminate?createVNode("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(ce=>createVNode("div",{key:ce,class:["v-progress-linear__indeterminate",ce,V.value],style:D.value},null))]):createVNode("div",{class:["v-progress-linear__determinate",V.value],style:[D.value,{width:convertToUnit(H.value,"%")}]},null)]}),_.default&&createVNode("div",{class:"v-progress-linear__content"},[_.default({value:H.value,buffer:q.value})])]})),{}}}),makeLoaderProps=propsFactory({loading:[Boolean,String]},"loader");function useLoader(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{loaderClasses:computed(()=>({[`${n}--loading`]:r.loading}))}}function LoaderSlot(r,n){let{slots:_}=n;return createVNode("div",{class:`${r.name}__loader`},[_.default?.({color:r.color,isActive:r.active})||createVNode(VProgressLinear,{active:r.active,color:r.color,height:"2",indeterminate:!0},null)])}const positionValues=["static","relative","fixed","absolute","sticky"],makePositionProps=propsFactory({position:{type:String,validator:r=>positionValues.includes(r)}},"position");function usePosition(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{positionClasses:computed(()=>r.position?`${n}--${r.position}`:void 0)}}function useSelectLink(r,n){watch(()=>r.isActive?.value,_=>{r.isLink.value&&_&&n&&nextTick$2(()=>{n(!0)})},{immediate:!0})}const makeVBtnProps=propsFactory({active:{type:Boolean,default:void 0},symbol:{type:null,default:VBtnToggleSymbol},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:IconValue,appendIcon:IconValue,block:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:String,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeGroupItemProps(),...makeLoaderProps(),...makeLocationProps(),...makePositionProps(),...makeRoundedProps(),...makeRouterProps(),...makeSizeProps(),...makeTagProps({tag:"button"}),...makeThemeProps(),...makeVariantProps({variant:"elevated"})},"VBtn"),VBtn=genericComponent()({name:"VBtn",directives:{Ripple},props:makeVBtnProps(),emits:{"group:selected":r=>!0},setup(r,n){let{attrs:_,slots:x}=n;const{themeClasses:S}=provideTheme(r),{borderClasses:E}=useBorder(r),{colorClasses:C,colorStyles:T,variantClasses:B}=useVariant(r),{densityClasses:A}=useDensity(r),{dimensionStyles:I}=useDimension(r),{elevationClasses:N}=useElevation(r),{loaderClasses:V}=useLoader(r),{locationStyles:D}=useLocation(r),{positionClasses:O}=usePosition(r),{roundedClasses:F}=useRounded(r),{sizeClasses:M,sizeStyles:L}=useSize(r),j=useGroupItem(r,r.symbol,!1),q=useLink$1(r,_),H=computed(()=>r.active!==void 0?r.active:q.isLink.value?q.isActive?.value:j?.isSelected.value),X=computed(()=>j?.disabled.value||r.disabled),J=computed(()=>r.variant==="elevated"&&!(r.disabled||r.flat||r.border)),Z=computed(()=>{if(r.value!==void 0)return Object(r.value)===r.value?JSON.stringify(r.value,null,0):r.value});function ae(ce){X.value||q.isLink.value&&(ce.metaKey||ce.ctrlKey||ce.shiftKey||ce.button!==0||_.target==="_blank")||(q.navigate?.(ce),j?.toggle())}return useSelectLink(q,j?.select),useRender(()=>{const ce=q.isLink.value?"a":r.tag,ve=!!(r.prependIcon||x.prepend),pe=!!(r.appendIcon||x.append),G=!!(r.icon&&r.icon!==!0),Y=j?.isSelected.value&&(!q.isLink.value||q.isActive?.value)||!j||q.isActive?.value;return withDirectives(createVNode(ce,{type:ce==="a"?void 0:"button",class:["v-btn",j?.selectedClass.value,{"v-btn--active":H.value,"v-btn--block":r.block,"v-btn--disabled":X.value,"v-btn--elevated":J.value,"v-btn--flat":r.flat,"v-btn--icon":!!r.icon,"v-btn--loading":r.loading,"v-btn--stacked":r.stacked},S.value,E.value,Y?C.value:void 0,A.value,N.value,V.value,O.value,F.value,M.value,B.value,r.class],style:[Y?T.value:void 0,I.value,D.value,L.value,r.style],disabled:X.value||void 0,href:q.href.value,onClick:ae,value:Z.value},{default:()=>[genOverlays(!0,"v-btn"),!r.icon&&ve&&createVNode("span",{key:"prepend",class:"v-btn__prepend"},[x.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!r.prependIcon,defaults:{VIcon:{icon:r.prependIcon}}},x.prepend):createVNode(VIcon,{key:"prepend-icon",icon:r.prependIcon},null)]),createVNode("span",{class:"v-btn__content","data-no-activator":""},[!x.default&&G?createVNode(VIcon,{key:"content-icon",icon:r.icon},null):createVNode(VDefaultsProvider,{key:"content-defaults",disabled:!G,defaults:{VIcon:{icon:r.icon}}},{default:()=>[x.default?.()??r.text]})]),!r.icon&&pe&&createVNode("span",{key:"append",class:"v-btn__append"},[x.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!r.appendIcon,defaults:{VIcon:{icon:r.appendIcon}}},x.append):createVNode(VIcon,{key:"append-icon",icon:r.appendIcon},null)]),!!r.loading&&createVNode("span",{key:"loader",class:"v-btn__loader"},[x.loader?.()??createVNode(VProgressCircular,{color:typeof r.loading=="boolean"?void 0:r.loading,indeterminate:!0,size:"23",width:"2"},null)])]}),[[resolveDirective("ripple"),!X.value&&r.ripple,null]])}),{}}}),VGrid="",makeVContainerProps=propsFactory({fluid:{type:Boolean,default:!1},...makeComponentProps(),...makeTagProps()},"VContainer"),VContainer=genericComponent()({name:"VContainer",props:makeVContainerProps(),setup(r,n){let{slots:_}=n;const{rtlClasses:x}=useRtl();return useRender(()=>createVNode(r.tag,{class:["v-container",{"v-container--fluid":r.fluid},x.value,r.class],style:r.style},_)),{}}}),breakpointProps=(()=>breakpoints.reduce((r,n)=>(r[n]={type:[Boolean,String,Number],default:!1},r),{}))(),offsetProps=(()=>breakpoints.reduce((r,n)=>{const _="offset"+capitalize$1(n);return r[_]={type:[String,Number],default:null},r},{}))(),orderProps=(()=>breakpoints.reduce((r,n)=>{const _="order"+capitalize$1(n);return r[_]={type:[String,Number],default:null},r},{}))(),propMap$1={col:Object.keys(breakpointProps),offset:Object.keys(offsetProps),order:Object.keys(orderProps)};function breakpointClass$1(r,n,_){let x=r;if(!(_==null||_===!1)){if(n){const S=n.replace(r,"");x+=`-${S}`}return r==="col"&&(x="v-"+x),r==="col"&&(_===""||_===!0)||(x+=`-${_}`),x.toLowerCase()}}const ALIGN_SELF_VALUES=["auto","start","end","center","baseline","stretch"],makeVColProps=propsFactory({cols:{type:[Boolean,String,Number],default:!1},...breakpointProps,offset:{type:[String,Number],default:null},...offsetProps,order:{type:[String,Number],default:null},...orderProps,alignSelf:{type:String,default:null,validator:r=>ALIGN_SELF_VALUES.includes(r)},...makeComponentProps(),...makeTagProps()},"VCol"),VCol=genericComponent()({name:"VCol",props:makeVColProps(),setup(r,n){let{slots:_}=n;const x=computed(()=>{const S=[];let E;for(E in propMap$1)propMap$1[E].forEach(T=>{const B=r[T],A=breakpointClass$1(E,T,B);A&&S.push(A)});const C=S.some(T=>T.startsWith("v-col-"));return S.push({"v-col":!C||!r.cols,[`v-col-${r.cols}`]:r.cols,[`offset-${r.offset}`]:r.offset,[`order-${r.order}`]:r.order,[`align-self-${r.alignSelf}`]:r.alignSelf}),S});return()=>h$1(r.tag,{class:[x.value,r.class],style:r.style},_.default?.())}}),ALIGNMENT=["start","end","center"],SPACE=["space-between","space-around","space-evenly"];function makeRowProps(r,n){return breakpoints.reduce((_,x)=>{const S=r+capitalize$1(x);return _[S]=n(),_},{})}const ALIGN_VALUES=[...ALIGNMENT,"baseline","stretch"],alignValidator=r=>ALIGN_VALUES.includes(r),alignProps=makeRowProps("align",()=>({type:String,default:null,validator:alignValidator})),JUSTIFY_VALUES=[...ALIGNMENT,...SPACE],justifyValidator=r=>JUSTIFY_VALUES.includes(r),justifyProps=makeRowProps("justify",()=>({type:String,default:null,validator:justifyValidator})),ALIGN_CONTENT_VALUES=[...ALIGNMENT,...SPACE,"stretch"],alignContentValidator=r=>ALIGN_CONTENT_VALUES.includes(r),alignContentProps=makeRowProps("alignContent",()=>({type:String,default:null,validator:alignContentValidator})),propMap={align:Object.keys(alignProps),justify:Object.keys(justifyProps),alignContent:Object.keys(alignContentProps)},classMap={align:"align",justify:"justify",alignContent:"align-content"};function breakpointClass(r,n,_){let x=classMap[r];if(_!=null){if(n){const S=n.replace(r,"");x+=`-${S}`}return x+=`-${_}`,x.toLowerCase()}}const makeVRowProps=propsFactory({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:alignValidator},...alignProps,justify:{type:String,default:null,validator:justifyValidator},...justifyProps,alignContent:{type:String,default:null,validator:alignContentValidator},...alignContentProps,...makeComponentProps(),...makeTagProps()},"VRow"),VRow=genericComponent()({name:"VRow",props:makeVRowProps(),setup(r,n){let{slots:_}=n;const x=computed(()=>{const S=[];let E;for(E in propMap)propMap[E].forEach(C=>{const T=r[C],B=breakpointClass(E,C,T);B&&S.push(B)});return S.push({"v-row--no-gutters":r.noGutters,"v-row--dense":r.dense,[`align-${r.align}`]:r.align,[`justify-${r.justify}`]:r.justify,[`align-content-${r.alignContent}`]:r.alignContent}),S});return()=>h$1(r.tag,{class:["v-row",x.value,r.class],style:r.style},_.default?.())}}),VSpacer=createSimpleFunctional("v-spacer","div","VSpacer"),makeDelayProps=propsFactory({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function useDelay(r,n){const _={},x=S=>()=>{if(!IN_BROWSER)return Promise.resolve(!0);const E=S==="openDelay";return _.closeDelay&&window.clearTimeout(_.closeDelay),delete _.closeDelay,_.openDelay&&window.clearTimeout(_.openDelay),delete _.openDelay,new Promise(C=>{const T=parseInt(r[S]??0,10);_[S]=window.setTimeout(()=>{n?.(E),C(E)},T)})};return{runCloseDelay:x("closeDelay"),runOpenDelay:x("openDelay")}}const makeVHoverProps=propsFactory({disabled:Boolean,modelValue:{type:Boolean,default:void 0},...makeDelayProps()},"VHover"),VHover=genericComponent()({name:"VHover",props:makeVHoverProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{slots:_}=n;const x=useProxiedModel(r,"modelValue"),{runOpenDelay:S,runCloseDelay:E}=useDelay(r,C=>!r.disabled&&(x.value=C));return()=>_.default?.({isHovering:x.value,props:{onMouseenter:S,onMouseleave:E}})}}),VSnackbar$1="",VOverlay$1="";function elementToViewport(r,n){return{x:r.x+n.x,y:r.y+n.y}}function getOffset(r,n){return{x:r.x-n.x,y:r.y-n.y}}function anchorToPoint(r,n){if(r.side==="top"||r.side==="bottom"){const{side:_,align:x}=r,S=x==="left"?0:x==="center"?n.width/2:x==="right"?n.width:x,E=_==="top"?0:_==="bottom"?n.height:_;return elementToViewport({x:S,y:E},n)}else if(r.side==="left"||r.side==="right"){const{side:_,align:x}=r,S=_==="left"?0:_==="right"?n.width:_,E=x==="top"?0:x==="center"?n.height/2:x==="bottom"?n.height:x;return elementToViewport({x:S,y:E},n)}return elementToViewport({x:n.width/2,y:n.height/2},n)}const locationStrategies={static:staticLocationStrategy,connected:connectedLocationStrategy},makeLocationStrategyProps=propsFactory({locationStrategy:{type:[String,Function],default:"static",validator:r=>typeof r=="function"||r in locationStrategies},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function useLocationStrategies(r,n){const _=ref$1({}),x=ref$1();IN_BROWSER&&(useToggleScope(()=>!!(n.isActive.value&&r.locationStrategy),E=>{watch(()=>r.locationStrategy,E),onScopeDispose(()=>{x.value=void 0}),typeof r.locationStrategy=="function"?x.value=r.locationStrategy(n,r,_)?.updateLocation:x.value=locationStrategies[r.locationStrategy](n,r,_)?.updateLocation}),window.addEventListener("resize",S,{passive:!0}),onScopeDispose(()=>{window.removeEventListener("resize",S),x.value=void 0}));function S(E){x.value?.(E)}return{contentStyles:_,updateLocation:x}}function staticLocationStrategy(){}function getIntrinsicSize(r,n){n?r.style.removeProperty("left"):r.style.removeProperty("right");const _=nullifyTransforms(r);return n?_.x+=parseFloat(r.style.right||0):_.x-=parseFloat(r.style.left||0),_.y-=parseFloat(r.style.top||0),_}function connectedLocationStrategy(r,n,_){isFixedPosition(r.activatorEl.value)&&Object.assign(_.value,{position:"fixed",top:0,[r.isRtl.value?"right":"left"]:0});const{preferredAnchor:S,preferredOrigin:E}=destructComputed(()=>{const O=parseAnchor(n.location,r.isRtl.value),F=n.origin==="overlap"?O:n.origin==="auto"?flipSide(O):parseAnchor(n.origin,r.isRtl.value);return O.side===F.side&&O.align===flipAlign(F).align?{preferredAnchor:flipCorner(O),preferredOrigin:flipCorner(F)}:{preferredAnchor:O,preferredOrigin:F}}),[C,T,B,A]=["minWidth","minHeight","maxWidth","maxHeight"].map(O=>computed(()=>{const F=parseFloat(n[O]);return isNaN(F)?1/0:F})),I=computed(()=>{if(Array.isArray(n.offset))return n.offset;if(typeof n.offset=="string"){const O=n.offset.split(" ").map(parseFloat);return O.length<2&&O.push(0),O}return typeof n.offset=="number"?[n.offset,0]:[0,0]});let N=!1;const V=new ResizeObserver(()=>{N&&D()});watch([r.activatorEl,r.contentEl],(O,F)=>{let[M,L]=O,[j,q]=F;j&&V.unobserve(j),M&&V.observe(M),q&&V.unobserve(q),L&&V.observe(L)},{immediate:!0}),onScopeDispose(()=>{V.disconnect()});function D(){if(N=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>N=!0)}),!r.activatorEl.value||!r.contentEl.value)return;const O=r.activatorEl.value.getBoundingClientRect(),F=getIntrinsicSize(r.contentEl.value,r.isRtl.value),M=getScrollParents(r.contentEl.value),L=12;M.length||(M.push(document.documentElement),r.contentEl.value.style.top&&r.contentEl.value.style.left||(F.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),F.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const j=M.reduce((pe,G)=>{const Y=G.getBoundingClientRect(),U=new Box({x:G===document.documentElement?0:Y.x,y:G===document.documentElement?0:Y.y,width:G.clientWidth,height:G.clientHeight});return pe?new Box({x:Math.max(pe.left,U.left),y:Math.max(pe.top,U.top),width:Math.min(pe.right,U.right)-Math.max(pe.left,U.left),height:Math.min(pe.bottom,U.bottom)-Math.max(pe.top,U.top)}):U},void 0);j.x+=L,j.y+=L,j.width-=L*2,j.height-=L*2;let q={anchor:S.value,origin:E.value};function H(pe){const G=new Box(F),Y=anchorToPoint(pe.anchor,O),U=anchorToPoint(pe.origin,G);let{x:W,y:ee}=getOffset(Y,U);switch(pe.anchor.side){case"top":ee-=I.value[0];break;case"bottom":ee+=I.value[0];break;case"left":W-=I.value[0];break;case"right":W+=I.value[0];break}switch(pe.anchor.align){case"top":ee-=I.value[1];break;case"bottom":ee+=I.value[1];break;case"left":W-=I.value[1];break;case"right":W+=I.value[1];break}return G.x+=W,G.y+=ee,G.width=Math.min(G.width,B.value),G.height=Math.min(G.height,A.value),{overflows:getOverflow(G,j),x:W,y:ee}}let X=0,J=0;const Z={x:0,y:0},ae={x:!1,y:!1};let ce=-1;for(;!(ce++>10);){const{x:pe,y:G,overflows:Y}=H(q);X+=pe,J+=G,F.x+=pe,F.y+=G;{const U=getAxis(q.anchor),W=Y.x.before||Y.x.after,ee=Y.y.before||Y.y.after;let re=!1;if(["x","y"].forEach(oe=>{if(oe==="x"&&W&&!ae.x||oe==="y"&&ee&&!ae.y){const ie={anchor:{...q.anchor},origin:{...q.origin}},ne=oe==="x"?U==="y"?flipAlign:flipSide:U==="y"?flipSide:flipAlign;ie.anchor=ne(ie.anchor),ie.origin=ne(ie.origin);const{overflows:te}=H(ie);(te[oe].before<=Y[oe].before&&te[oe].after<=Y[oe].after||te[oe].before+te[oe].after<(Y[oe].before+Y[oe].after)/2)&&(q=ie,re=ae[oe]=!0)}}),re)continue}Y.x.before&&(X+=Y.x.before,F.x+=Y.x.before),Y.x.after&&(X-=Y.x.after,F.x-=Y.x.after),Y.y.before&&(J+=Y.y.before,F.y+=Y.y.before),Y.y.after&&(J-=Y.y.after,F.y-=Y.y.after);{const U=getOverflow(F,j);Z.x=j.width-U.x.before-U.x.after,Z.y=j.height-U.y.before-U.y.after,X+=U.x.before,F.x+=U.x.before,J+=U.y.before,F.y+=U.y.before}break}const ve=getAxis(q.anchor);return Object.assign(_.value,{"--v-overlay-anchor-origin":`${q.anchor.side} ${q.anchor.align}`,transformOrigin:`${q.origin.side} ${q.origin.align}`,top:convertToUnit(pixelRound(J)),left:r.isRtl.value?void 0:convertToUnit(pixelRound(X)),right:r.isRtl.value?convertToUnit(pixelRound(-X)):void 0,minWidth:convertToUnit(ve==="y"?Math.min(C.value,O.width):C.value),maxWidth:convertToUnit(pixelCeil(clamp(Z.x,C.value===1/0?0:C.value,B.value))),maxHeight:convertToUnit(pixelCeil(clamp(Z.y,T.value===1/0?0:T.value,A.value)))}),{available:Z,contentBox:F}}return watch(()=>[S.value,E.value,n.offset,n.minWidth,n.minHeight,n.maxWidth,n.maxHeight],()=>D()),nextTick$2(()=>{const O=D();if(!O)return;const{available:F,contentBox:M}=O;M.height>F.y&&requestAnimationFrame(()=>{D(),requestAnimationFrame(()=>{D()})})}),{updateLocation:D}}function pixelRound(r){return Math.round(r*devicePixelRatio)/devicePixelRatio}function pixelCeil(r){return Math.ceil(r*devicePixelRatio)/devicePixelRatio}let clean=!0;const frames=[];function requestNewFrame(r){!clean||frames.length?(frames.push(r),run()):(clean=!1,r(),run())}let raf=-1;function run(){cancelAnimationFrame(raf),raf=requestAnimationFrame(()=>{const r=frames.shift();r&&r(),frames.length?run():clean=!0})}const scrollStrategies={none:null,close:closeScrollStrategy,block:blockScrollStrategy,reposition:repositionScrollStrategy},makeScrollStrategyProps=propsFactory({scrollStrategy:{type:[String,Function],default:"block",validator:r=>typeof r=="function"||r in scrollStrategies}},"VOverlay-scroll-strategies");function useScrollStrategies(r,n){if(!IN_BROWSER)return;let _;watchEffect(async()=>{_?.stop(),n.isActive.value&&r.scrollStrategy&&(_=effectScope(),await nextTick$2(),_.active&&_.run(()=>{typeof r.scrollStrategy=="function"?r.scrollStrategy(n,r,_):scrollStrategies[r.scrollStrategy]?.(n,r,_)}))}),onScopeDispose(()=>{_?.stop()})}function closeScrollStrategy(r){function n(_){r.isActive.value=!1}bindScroll(r.activatorEl.value??r.contentEl.value,n)}function blockScrollStrategy(r,n){const _=r.root.value?.offsetParent,x=[...new Set([...getScrollParents(r.activatorEl.value,n.contained?_:void 0),...getScrollParents(r.contentEl.value,n.contained?_:void 0)])].filter(C=>!C.classList.contains("v-overlay-scroll-blocked")),S=window.innerWidth-document.documentElement.offsetWidth,E=(C=>hasScrollbar(C)&&C)(_||document.documentElement);E&&r.root.value.classList.add("v-overlay--scroll-blocked"),x.forEach((C,T)=>{C.style.setProperty("--v-body-scroll-x",convertToUnit(-C.scrollLeft)),C.style.setProperty("--v-body-scroll-y",convertToUnit(-C.scrollTop)),C!==document.documentElement&&C.style.setProperty("--v-scrollbar-offset",convertToUnit(S)),C.classList.add("v-overlay-scroll-blocked")}),onScopeDispose(()=>{x.forEach((C,T)=>{const B=parseFloat(C.style.getPropertyValue("--v-body-scroll-x")),A=parseFloat(C.style.getPropertyValue("--v-body-scroll-y"));C.style.removeProperty("--v-body-scroll-x"),C.style.removeProperty("--v-body-scroll-y"),C.style.removeProperty("--v-scrollbar-offset"),C.classList.remove("v-overlay-scroll-blocked"),C.scrollLeft=-B,C.scrollTop=-A}),E&&r.root.value.classList.remove("v-overlay--scroll-blocked")})}function repositionScrollStrategy(r,n,_){let x=!1,S=-1,E=-1;function C(T){requestNewFrame(()=>{const B=performance.now();r.updateLocation.value?.(T),x=(performance.now()-B)/(1e3/60)>2})}E=(typeof requestIdleCallback>"u"?T=>T():requestIdleCallback)(()=>{_.run(()=>{bindScroll(r.activatorEl.value??r.contentEl.value,T=>{x?(cancelAnimationFrame(S),S=requestAnimationFrame(()=>{S=requestAnimationFrame(()=>{C(T)})})):C(T)})})}),onScopeDispose(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(E),cancelAnimationFrame(S)})}function bindScroll(r,n){const _=[document,...getScrollParents(r)];_.forEach(x=>{x.addEventListener("scroll",n,{passive:!0})}),onScopeDispose(()=>{_.forEach(x=>{x.removeEventListener("scroll",n)})})}const VMenuSymbol=Symbol.for("vuetify:v-menu"),makeActivatorProps=propsFactory({activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...makeDelayProps()},"VOverlay-activator");function useActivator(r,n){let{isActive:_,isTop:x}=n;const S=ref$1();let E=!1,C=!1,T=!0;const B=computed(()=>r.openOnFocus||r.openOnFocus==null&&r.openOnHover),A=computed(()=>r.openOnClick||r.openOnClick==null&&!r.openOnHover&&!B.value),{runOpenDelay:I,runCloseDelay:N}=useDelay(r,q=>{q===(r.openOnHover&&E||B.value&&C)&&!(r.openOnHover&&_.value&&!x.value)&&(_.value!==q&&(T=!0),_.value=q)}),V={onClick:q=>{q.stopPropagation(),S.value=q.currentTarget||q.target,_.value=!_.value},onMouseenter:q=>{q.sourceCapabilities?.firesTouchEvents||(E=!0,S.value=q.currentTarget||q.target,I())},onMouseleave:q=>{E=!1,N()},onFocus:q=>{matchesSelector(q.target,":focus-visible")!==!1&&(C=!0,q.stopPropagation(),S.value=q.currentTarget||q.target,I())},onBlur:q=>{C=!1,q.stopPropagation(),N()}},D=computed(()=>{const q={};return A.value&&(q.onClick=V.onClick),r.openOnHover&&(q.onMouseenter=V.onMouseenter,q.onMouseleave=V.onMouseleave),B.value&&(q.onFocus=V.onFocus,q.onBlur=V.onBlur),q}),O=computed(()=>{const q={};if(r.openOnHover&&(q.onMouseenter=()=>{E=!0,I()},q.onMouseleave=()=>{E=!1,N()}),B.value&&(q.onFocusin=()=>{C=!0,I()},q.onFocusout=()=>{C=!1,N()}),r.closeOnContentClick){const H=inject$1(VMenuSymbol,null);q.onClick=()=>{_.value=!1,H?.closeParents()}}return q}),F=computed(()=>{const q={};return r.openOnHover&&(q.onMouseenter=()=>{T&&(E=!0,T=!1,I())},q.onMouseleave=()=>{E=!1,N()}),q});watch(x,q=>{q&&(r.openOnHover&&!E&&(!B.value||!C)||B.value&&!C&&(!r.openOnHover||!E))&&(_.value=!1)});const M=ref$1();watchEffect(()=>{M.value&&nextTick$2(()=>{S.value=refElement(M.value)})});const L=getCurrentInstance("useActivator");let j;return watch(()=>!!r.activator,q=>{q&&IN_BROWSER?(j=effectScope(),j.run(()=>{_useActivator(r,L,{activatorEl:S,activatorEvents:D})})):j&&j.stop()},{flush:"post",immediate:!0}),onScopeDispose(()=>{j?.stop()}),{activatorEl:S,activatorRef:M,activatorEvents:D,contentEvents:O,scrimEvents:F}}function _useActivator(r,n,_){let{activatorEl:x,activatorEvents:S}=_;watch(()=>r.activator,(B,A)=>{if(A&&B!==A){const I=T(A);I&&C(I)}B&&nextTick$2(()=>E())},{immediate:!0}),watch(()=>r.activatorProps,()=>{E()}),onScopeDispose(()=>{C()});function E(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T(),A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r.activatorProps;B&&bindProps(B,mergeProps(S.value,A))}function C(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T(),A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r.activatorProps;B&&unbindProps(B,mergeProps(S.value,A))}function T(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.activator,A;if(B)if(B==="parent"){let I=n?.proxy?.$el?.parentNode;for(;I.hasAttribute("data-no-activator");)I=I.parentNode;A=I}else typeof B=="string"?A=document.querySelector(B):"$el"in B?A=B.$el:A=B;return x.value=A?.nodeType===Node.ELEMENT_NODE?A:null,x.value}}function useHydration(){if(!IN_BROWSER)return shallowRef(!1);const{ssr:r}=useDisplay();if(r){const n=shallowRef(!1);return onMounted(()=>{n.value=!0}),n}else return shallowRef(!0)}const makeLazyProps=propsFactory({eager:Boolean},"lazy");function useLazy(r,n){const _=shallowRef(!1),x=computed(()=>_.value||r.eager||n.value);watch(n,()=>_.value=!0);function S(){r.eager||(_.value=!1)}return{isBooted:_,hasContent:x,onAfterLeave:S}}const StackSymbol=Symbol.for("vuetify:stack"),globalStack=reactive([]);function useStack(r,n,_){const x=getCurrentInstance("useStack"),S=!_,E=inject$1(StackSymbol,void 0),C=reactive({activeChildren:new Set});provide(StackSymbol,C);const T=shallowRef(+n.value);useToggleScope(r,()=>{const I=globalStack.at(-1)?.[1];T.value=I?I+10:+n.value,S&&globalStack.push([x.uid,T.value]),E?.activeChildren.add(x.uid),onScopeDispose(()=>{if(S){const N=toRaw(globalStack).findIndex(V=>V[0]===x.uid);globalStack.splice(N,1)}E?.activeChildren.delete(x.uid)})});const B=shallowRef(!0);S&&watchEffect(()=>{const I=globalStack.at(-1)?.[0]===x.uid;setTimeout(()=>B.value=I)});const A=computed(()=>!C.activeChildren.size);return{globalTop:readonly$3(B),localTop:A,stackStyles:computed(()=>({zIndex:T.value}))}}function useTeleport(r){return{teleportTarget:computed(()=>{const _=r.value;if(_===!0||!IN_BROWSER)return;const x=_===!1?document.body:typeof _=="string"?document.querySelector(_):_;if(x==null)return;let S=x.querySelector(":scope > .v-overlay-container");return S||(S=document.createElement("div"),S.className="v-overlay-container",x.appendChild(S)),S})}}function defaultConditional(){return!0}function checkEvent(r,n,_){if(!r||checkIsActive(r,_)===!1)return!1;const x=attachedRoot(n);if(typeof ShadowRoot<"u"&&x instanceof ShadowRoot&&x.host===r.target)return!1;const S=(typeof _.value=="object"&&_.value.include||(()=>[]))();return S.push(n),!S.some(E=>E?.contains(r.target))}function checkIsActive(r,n){return(typeof n.value=="object"&&n.value.closeConditional||defaultConditional)(r)}function directive(r,n,_){const x=typeof _.value=="function"?_.value:_.value.handler;n._clickOutside.lastMousedownWasOutside&&checkEvent(r,n,_)&&setTimeout(()=>{checkIsActive(r,_)&&x&&x(r)},0)}function handleShadow(r,n){const _=attachedRoot(r);n(document),typeof ShadowRoot<"u"&&_ instanceof ShadowRoot&&n(_)}const ClickOutside={mounted(r,n){const _=S=>directive(S,r,n),x=S=>{r._clickOutside.lastMousedownWasOutside=checkEvent(S,r,n)};handleShadow(r,S=>{S.addEventListener("click",_,!0),S.addEventListener("mousedown",x,!0)}),r._clickOutside||(r._clickOutside={lastMousedownWasOutside:!1}),r._clickOutside[n.instance.$.uid]={onClick:_,onMousedown:x}},unmounted(r,n){r._clickOutside&&(handleShadow(r,_=>{if(!_||!r._clickOutside?.[n.instance.$.uid])return;const{onClick:x,onMousedown:S}=r._clickOutside[n.instance.$.uid];_.removeEventListener("click",x,!0),_.removeEventListener("mousedown",S,!0)}),delete r._clickOutside[n.instance.$.uid])}};function Scrim(r){const{modelValue:n,color:_,...x}=r;return createVNode(Transition,{name:"fade-transition",appear:!0},{default:()=>[r.modelValue&&createVNode("div",mergeProps({class:["v-overlay__scrim",r.color.backgroundColorClasses.value],style:r.color.backgroundColorStyles.value},x),null)]})}const makeVOverlayProps=propsFactory({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...makeActivatorProps(),...makeComponentProps(),...makeDimensionProps(),...makeLazyProps(),...makeLocationStrategyProps(),...makeScrollStrategyProps(),...makeThemeProps(),...makeTransitionProps$1()},"VOverlay"),VOverlay=genericComponent()({name:"VOverlay",directives:{ClickOutside},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...makeVOverlayProps()},emits:{"click:outside":r=>!0,"update:modelValue":r=>!0,afterLeave:()=>!0},setup(r,n){let{slots:_,attrs:x,emit:S}=n;const E=useProxiedModel(r,"modelValue"),C=computed({get:()=>E.value,set:ie=>{ie&&r.disabled||(E.value=ie)}}),{teleportTarget:T}=useTeleport(computed(()=>r.attach||r.contained)),{themeClasses:B}=provideTheme(r),{rtlClasses:A,isRtl:I}=useRtl(),{hasContent:N,onAfterLeave:V}=useLazy(r,C),D=useBackgroundColor(computed(()=>typeof r.scrim=="string"?r.scrim:null)),{globalTop:O,localTop:F,stackStyles:M}=useStack(C,toRef(r,"zIndex"),r._disableGlobalStack),{activatorEl:L,activatorRef:j,activatorEvents:q,contentEvents:H,scrimEvents:X}=useActivator(r,{isActive:C,isTop:F}),{dimensionStyles:J}=useDimension(r),Z=useHydration(),{scopeId:ae}=useScopeId();watch(()=>r.disabled,ie=>{ie&&(C.value=!1)});const ce=ref$1(),ve=ref$1(),{contentStyles:pe,updateLocation:G}=useLocationStrategies(r,{isRtl:I,contentEl:ve,activatorEl:L,isActive:C});useScrollStrategies(r,{root:ce,contentEl:ve,activatorEl:L,isActive:C,updateLocation:G});function Y(ie){S("click:outside",ie),r.persistent?oe():C.value=!1}function U(){return C.value&&O.value}IN_BROWSER&&watch(C,ie=>{ie?window.addEventListener("keydown",W):window.removeEventListener("keydown",W)},{immediate:!0});function W(ie){ie.key==="Escape"&&O.value&&(r.persistent?oe():(C.value=!1,ve.value?.contains(document.activeElement)&&L.value?.focus()))}const ee=useRouter$1();useToggleScope(()=>r.closeOnBack,()=>{useBackButton(ee,ie=>{O.value&&C.value?(ie(!1),r.persistent?oe():C.value=!1):ie()})});const re=ref$1();watch(()=>C.value&&(r.absolute||r.contained)&&T.value==null,ie=>{if(ie){const ne=getScrollParent(ce.value);ne&&ne!==document.scrollingElement&&(re.value=ne.scrollTop)}});function oe(){r.noClickAnimation||ve.value&&animate(ve.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:standardEasing})}return useRender(()=>createVNode(Fragment,null,[_.activator?.({isActive:C.value,props:mergeProps({ref:j},q.value,r.activatorProps)}),Z.value&&N.value&&createVNode(Teleport,{disabled:!T.value,to:T.value},{default:()=>[createVNode("div",mergeProps({class:["v-overlay",{"v-overlay--absolute":r.absolute||r.contained,"v-overlay--active":C.value,"v-overlay--contained":r.contained},B.value,A.value,r.class],style:[M.value,{top:convertToUnit(re.value)},r.style],ref:ce},ae,x),[createVNode(Scrim,mergeProps({color:D,modelValue:C.value&&!!r.scrim},X.value),null),createVNode(MaybeTransition,{appear:!0,persisted:!0,transition:r.transition,target:L.value,onAfterLeave:()=>{V(),S("afterLeave")}},{default:()=>[withDirectives(createVNode("div",mergeProps({ref:ve,class:["v-overlay__content",r.contentClass],style:[J.value,pe.value]},H.value,r.contentProps),[_.default?.({isActive:C})]),[[vShow,C.value],[resolveDirective("click-outside"),{handler:Y,closeConditional:U,include:()=>[L.value]}]])]})])]})])),{activatorEl:L,animateClick:oe,contentEl:ve,globalTop:O,localTop:F,updateLocation:G}}}),Refs=Symbol("Forwarded refs");function getDescriptor(r,n){let _=r;for(;_;){const x=Reflect.getOwnPropertyDescriptor(_,n);if(x)return x;_=Object.getPrototypeOf(_)}}function forwardRefs(r){for(var n=arguments.length,_=new Array(n>1?n-1:0),x=1;x<n;x++)_[x-1]=arguments[x];return r[Refs]=_,new Proxy(r,{get(S,E){if(Reflect.has(S,E))return Reflect.get(S,E);if(!(typeof E=="symbol"||E.startsWith("__"))){for(const C of _)if(C.value&&Reflect.has(C.value,E)){const T=Reflect.get(C.value,E);return typeof T=="function"?T.bind(C.value):T}}},has(S,E){if(Reflect.has(S,E))return!0;if(typeof E=="symbol"||E.startsWith("__"))return!1;for(const C of _)if(C.value&&Reflect.has(C.value,E))return!0;return!1},set(S,E,C){if(Reflect.has(S,E))return Reflect.set(S,E,C);if(typeof E=="symbol"||E.startsWith("__"))return!1;for(const T of _)if(T.value&&Reflect.has(T.value,E))return Reflect.set(T.value,E,C);return!1},getOwnPropertyDescriptor(S,E){const C=Reflect.getOwnPropertyDescriptor(S,E);if(C)return C;if(!(typeof E=="symbol"||E.startsWith("__"))){for(const T of _){if(!T.value)continue;const B=getDescriptor(T.value,E)??("_"in T.value?getDescriptor(T.value._?.setupState,E):void 0);if(B)return B}for(const T of _){const B=T.value&&T.value[Refs];if(!B)continue;const A=B.slice();for(;A.length;){const I=A.shift(),N=getDescriptor(I.value,E);if(N)return N;const V=I.value&&I.value[Refs];V&&A.push(...V)}}}}})}const makeVSnackbarProps=propsFactory({multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...makeLocationProps({location:"bottom"}),...makePositionProps(),...makeRoundedProps(),...makeVariantProps(),...makeThemeProps(),...omit(makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),VSnackbar=genericComponent()({name:"VSnackbar",props:makeVSnackbarProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{slots:_}=n;const x=useProxiedModel(r,"modelValue"),{locationStyles:S}=useLocation(r),{positionClasses:E}=usePosition(r),{scopeId:C}=useScopeId(),{themeClasses:T}=provideTheme(r),{colorClasses:B,colorStyles:A,variantClasses:I}=useVariant(r),{roundedClasses:N}=useRounded(r),V=ref$1();watch(x,O),watch(()=>r.timeout,O),onMounted(()=>{x.value&&O()});let D=-1;function O(){window.clearTimeout(D);const M=Number(r.timeout);!x.value||M===-1||(D=window.setTimeout(()=>{x.value=!1},M))}function F(){window.clearTimeout(D)}return useRender(()=>{const[M]=VOverlay.filterProps(r);return createVNode(VOverlay,mergeProps({ref:V,class:["v-snackbar",{"v-snackbar--active":x.value,"v-snackbar--multi-line":r.multiLine&&!r.vertical,"v-snackbar--vertical":r.vertical},E.value,r.class],style:r.style},M,{modelValue:x.value,"onUpdate:modelValue":L=>x.value=L,contentProps:mergeProps({class:["v-snackbar__wrapper",T.value,B.value,N.value,I.value],style:[S.value,A.value],onPointerenter:F,onPointerleave:O},M.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},C),{default:()=>[genOverlays(!1,"v-snackbar"),_.default&&createVNode("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[_.default()]),_.actions&&createVNode(VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[createVNode("div",{class:"v-snackbar__actions"},[_.actions()])]})],activator:_.activator})}),forwardRefs({},V)}}),_hoisted_1$L={class:"align-self-center",style:{height:"100%"}},_hoisted_2$x={class:"my-auto"},_sfc_main$1$=defineComponent$1({__name:"ImageEditable",props:{srcImage:{},imgDefaut:{},maxTailleImage:{},tailleAvatar:{},editable:{type:Boolean}},emits:["imageChangee"],setup(r,{emit:n}){const _=r,{useI18n:x}=_(),{t:S}=x(),E=ref$1(),C=()=>{E.value?.click()},T=ref$1(),B=ref$1(),A=ref$1(),I=computed(()=>B.value?B.value.size>_.maxTailleImage:!1),N=()=>{n("imageChangee",void 0)},V=async()=>{E.value?.files?.length&&(T.value=E.value.files[0])},D=O=>new Promise(F=>{const M=URL.createObjectURL(O),L=new Image;L.onload=()=>{F({hauteur:L.height,largeur:L.width})},L.src=M});return watchEffect(async()=>{if(T.value)if(T.value.size>_.maxTailleImage){const{hauteur:O,largeur:F}=await D(T.value),M=O*F*16/(8*1024)/_.maxTailleImage;try{B.value=convert$1({file:T.value,height:M*O,width:M*F})}catch{B.value=T.value;return}}else B.value=T.value}),watchEffect(async()=>{A.value=await B.value?.arrayBuffer()}),watchEffect(async()=>{if(A.value){const O=T.value?.path.split("/").pop();!I.value&&O&&n("imageChangee",{contenu:A.value,fichier:O})}}),(O,F)=>(openBlock(),createBlock(VRow,{class:"text-center"},{default:withCtx(()=>[createBaseVNode("input",{ref_key:"HTMLChoixFichier",ref:E,type:"file",style:{display:"none"},accept:"image/*",onChange:V},null,544),createVNode(VSnackbar,{modelValue:I.value,"onUpdate:modelValue":F[0]||(F[0]=M=>I.value=M),timeout:"5000",color:"error",outlined:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("imageditable.imageTropGrande",{tailleMaxKO:O.maxTailleImage/1e3})),1)]),_:1},8,["modelValue"]),createVNode(VCol,{cols:"12"},{default:withCtx(()=>[createVNode(VHover,{disabled:!O.editable},{default:withCtx(({isHovering:M,props:L})=>[createVNode(VAvatar,mergeProps(L,{class:"mb-3",size:O.tailleAvatar,elevation:M?12:2}),{default:withCtx(()=>[createVNode(VImg,{src:O.srcImage||O.imgDefaut,contain:""},{default:withCtx(()=>[createVNode(VRow,{class:normalizeClass({"ma-0":!0,"on-hover":M,"align-self-center":!0,"fill-height":!0,"flex-column":!0,fond:!0}),style:{"background-color":"black"}},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$L,[createVNode(VRow,{class:"flex-column fill-height ma-0"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$x,[createVNode(VBtn,{class:normalizeClass([{"show-btns":M,"mx-2":!0},"align-self-center"]),color:"rgba(255, 255, 255, 0)",icon:"",large:"",onClick:F[1]||(F[1]=()=>C())},{default:withCtx(()=>[createVNode(VIcon,{class:normalizeClass({"show-btns":M}),color:"rgba(255, 255, 255, 0)",large:""},{default:withCtx(()=>[createTextVNode(" mdi-camera-outline ")]),_:2},1032,["class"])]),_:2},1032,["class"]),O.srcImage?(openBlock(),createBlock(VBtn,{key:0,class:normalizeClass([{"show-btns":M,"mx-2":!0},"align-self-center"]),color:"rgba(255, 255, 255, 0)",icon:"",large:"",onClick:F[2]||(F[2]=()=>N())},{default:withCtx(()=>[createVNode(VIcon,{class:normalizeClass({"show-btns":M}),color:"rgba(255, 255, 255, 0)",large:""},{default:withCtx(()=>[createTextVNode(" mdi-close ")]),_:2},1032,["class"])]),_:2},1032,["class"])):createCommentVNode("",!0)])]),_:2},1024)])]),_:2},1032,["class"])]),_:2},1032,["src"])]),_:2},1040,["size","elevation"])]),_:1},8,["disabled"])]),_:1})]),_:1}))}}),ImageEditable_vue_vue_type_style_index_0_scoped_77f2a24c_lang="",_export_sfc=(r,n)=>{const _=r.__vccOpts||r;for(const[x,S]of n)_[x]=S;return _},ImageEditable=_export_sfc(_sfc_main$1$,[["__scopeId","data-v-77f2a24c"]]),VAutocomplete$1="",VCheckbox$1="",VSelectionControl$1="",VLabel$1="",makeVLabelProps=propsFactory({text:String,clickable:Boolean,...makeComponentProps(),...makeThemeProps()},"VLabel"),VLabel=genericComponent()({name:"VLabel",props:makeVLabelProps(),setup(r,n){let{slots:_}=n;return useRender(()=>createVNode("label",{class:["v-label",{"v-label--clickable":r.clickable},r.class],style:r.style},[r.text,_.default?.()])),{}}}),VSelectionControlGroup$1="",VSelectionControlGroupSymbol=Symbol.for("vuetify:selection-control-group"),makeSelectionControlGroupProps=propsFactory({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:IconValue,trueIcon:IconValue,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:Boolean,modelValue:null,type:String,valueComparator:{type:Function,default:deepEqual$2},...makeComponentProps(),...makeDensityProps(),...makeThemeProps()},"SelectionControlGroup"),makeVSelectionControlGroupProps=propsFactory({...makeSelectionControlGroupProps({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),VSelectionControlGroup=genericComponent()({name:"VSelectionControlGroup",props:makeVSelectionControlGroupProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{slots:_}=n;const x=useProxiedModel(r,"modelValue"),S=getUid(),E=computed(()=>r.id||`v-selection-control-group-${S}`),C=computed(()=>r.name||E.value),T=new Set;return provide(VSelectionControlGroupSymbol,{modelValue:x,forceUpdate:()=>{T.forEach(B=>B())},onForceUpdate:B=>{T.add(B),onScopeDispose(()=>{T.delete(B)})}}),provideDefaults({[r.defaultsTarget]:{color:toRef(r,"color"),disabled:toRef(r,"disabled"),density:toRef(r,"density"),error:toRef(r,"error"),inline:toRef(r,"inline"),modelValue:x,multiple:computed(()=>!!r.multiple||r.multiple==null&&Array.isArray(x.value)),name:C,falseIcon:toRef(r,"falseIcon"),trueIcon:toRef(r,"trueIcon"),readonly:toRef(r,"readonly"),ripple:toRef(r,"ripple"),type:toRef(r,"type"),valueComparator:toRef(r,"valueComparator")}}),useRender(()=>createVNode("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":r.inline},r.class],style:r.style,role:r.type==="radio"?"radiogroup":void 0},[_.default?.()])),{}}}),makeVSelectionControlProps=propsFactory({label:String,trueValue:null,falseValue:null,value:null,...makeComponentProps(),...makeSelectionControlGroupProps()},"VSelectionControl");function useSelectionControl(r){const n=inject$1(VSelectionControlGroupSymbol,void 0),{densityClasses:_}=useDensity(r),x=useProxiedModel(r,"modelValue"),S=computed(()=>r.trueValue!==void 0?r.trueValue:r.value!==void 0?r.value:!0),E=computed(()=>r.falseValue!==void 0?r.falseValue:!1),C=computed(()=>!!r.multiple||r.multiple==null&&Array.isArray(x.value)),T=computed({get(){const N=n?n.modelValue.value:x.value;return C.value?N.some(V=>r.valueComparator(V,S.value)):r.valueComparator(N,S.value)},set(N){if(r.readonly)return;const V=N?S.value:E.value;let D=V;C.value&&(D=N?[...wrapInArray(x.value),V]:wrapInArray(x.value).filter(O=>!r.valueComparator(O,S.value))),n?n.modelValue.value=D:x.value=D}}),{textColorClasses:B,textColorStyles:A}=useTextColor(computed(()=>T.value&&!r.error&&!r.disabled?r.color:void 0)),I=computed(()=>T.value?r.trueIcon:r.falseIcon);return{group:n,densityClasses:_,trueValue:S,falseValue:E,model:T,textColorClasses:B,textColorStyles:A,icon:I}}const VSelectionControl=genericComponent()({name:"VSelectionControl",directives:{Ripple},inheritAttrs:!1,props:makeVSelectionControlProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{attrs:_,slots:x}=n;const{group:S,densityClasses:E,icon:C,model:T,textColorClasses:B,textColorStyles:A,trueValue:I}=useSelectionControl(r),N=getUid(),V=computed(()=>r.id||`input-${N}`),D=shallowRef(!1),O=shallowRef(!1),F=ref$1();S?.onForceUpdate(()=>{F.value&&(F.value.checked=T.value)});function M(q){D.value=!0,matchesSelector(q.target,":focus-visible")!==!1&&(O.value=!0)}function L(){D.value=!1,O.value=!1}function j(q){r.readonly&&S&&nextTick$2(()=>S.forceUpdate()),T.value=q.target.checked}return useRender(()=>{const q=x.label?x.label({label:r.label,props:{for:V.value}}):r.label,[H,X]=filterInputAttrs(_),J=createVNode("input",mergeProps({ref:F,checked:T.value,disabled:!!(r.readonly||r.disabled),id:V.value,onBlur:L,onFocus:M,onInput:j,"aria-disabled":!!(r.readonly||r.disabled),type:r.type,value:I.value,name:r.name,"aria-checked":r.type==="checkbox"?T.value:void 0},X),null);return createVNode("div",mergeProps({class:["v-selection-control",{"v-selection-control--dirty":T.value,"v-selection-control--disabled":r.disabled,"v-selection-control--error":r.error,"v-selection-control--focused":D.value,"v-selection-control--focus-visible":O.value,"v-selection-control--inline":r.inline},E.value,r.class]},H,{style:r.style}),[createVNode("div",{class:["v-selection-control__wrapper",B.value],style:A.value},[x.default?.(),withDirectives(createVNode("div",{class:["v-selection-control__input"]},[x.input?.({model:T,textColorClasses:B,textColorStyles:A,inputNode:J,icon:C.value,props:{onFocus:M,onBlur:L,id:V.value}})??createVNode(Fragment,null,[C.value&&createVNode(VIcon,{key:"icon",icon:C.value},null),J])]),[[resolveDirective("ripple"),r.ripple&&[!r.disabled&&!r.readonly,null,["center","circle"]]]])]),q&&createVNode(VLabel,{for:V.value,clickable:!0,onClick:Z=>Z.stopPropagation()},{default:()=>[q]})])}),{isFocused:D,input:F}}}),makeVCheckboxBtnProps=propsFactory({indeterminate:Boolean,indeterminateIcon:{type:IconValue,default:"$checkboxIndeterminate"},...makeVSelectionControlProps({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),VCheckboxBtn=genericComponent()({name:"VCheckboxBtn",props:makeVCheckboxBtnProps(),emits:{"update:modelValue":r=>!0,"update:indeterminate":r=>!0},setup(r,n){let{slots:_}=n;const x=useProxiedModel(r,"indeterminate"),S=useProxiedModel(r,"modelValue");function E(B){x.value&&(x.value=!1)}const C=computed(()=>x.value?r.indeterminateIcon:r.falseIcon),T=computed(()=>x.value?r.indeterminateIcon:r.trueIcon);return useRender(()=>{const B=omit(VSelectionControl.filterProps(r)[0],["modelValue"]);return createVNode(VSelectionControl,mergeProps(B,{modelValue:S.value,"onUpdate:modelValue":[A=>S.value=A,E],class:["v-checkbox-btn",r.class],style:r.style,type:"checkbox",falseIcon:C.value,trueIcon:T.value,"aria-checked":x.value?"mixed":void 0}),_)}),{}}}),VInput$1="";function useInputIcon(r){const{t:n}=useLocale();function _(x){let{name:S}=x;const E={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[S],C=r[`onClick:${S}`],T=C&&E?n(`$vuetify.input.${E}`,r.label??""):void 0;return createVNode(VIcon,{icon:r[`${S}Icon`],"aria-label":T,onClick:C},null)}return{InputIcon:_}}const VMessages$1="",makeVMessagesProps=propsFactory({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...makeComponentProps(),...makeTransitionProps$1({transition:{component:VSlideYTransition,leaveAbsolute:!0,group:!0}})},"VMessages"),VMessages=genericComponent()({name:"VMessages",props:makeVMessagesProps(),setup(r,n){let{slots:_}=n;const x=computed(()=>wrapInArray(r.messages)),{textColorClasses:S,textColorStyles:E}=useTextColor(computed(()=>r.color));return useRender(()=>createVNode(MaybeTransition,{transition:r.transition,tag:"div",class:["v-messages",S.value,r.class],style:[E.value,r.style],role:"alert","aria-live":"polite"},{default:()=>[r.active&&x.value.map((C,T)=>createVNode("div",{class:"v-messages__message",key:`${T}-${x.value}`},[_.message?_.message({message:C}):C]))]})),{}}}),makeFocusProps=propsFactory({focused:Boolean,"onUpdate:focused":EventProp()},"focus");function useFocus(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();const _=useProxiedModel(r,"focused"),x=computed(()=>({[`${n}--focused`]:_.value}));function S(){_.value=!0}function E(){_.value=!1}return{focusClasses:x,isFocused:_,focus:S,blur:E}}const FormKey=Symbol.for("vuetify:form");function useForm(){return inject$1(FormKey,null)}const makeValidationProps=propsFactory({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...makeFocusProps()},"validation");function useValidation(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName(),_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:getUid();const x=useProxiedModel(r,"modelValue"),S=computed(()=>r.validationValue===void 0?x.value:r.validationValue),E=useForm(),C=ref$1([]),T=shallowRef(!0),B=computed(()=>!!(wrapInArray(x.value===""?null:x.value).length||wrapInArray(S.value===""?null:S.value).length)),A=computed(()=>!!(r.disabled??E?.isDisabled.value)),I=computed(()=>!!(r.readonly??E?.isReadonly.value)),N=computed(()=>r.errorMessages.length?wrapInArray(r.errorMessages).slice(0,Math.max(0,+r.maxErrors)):C.value),V=computed(()=>{let H=(r.validateOn??E?.validateOn.value)||"input";H==="lazy"&&(H="input lazy");const X=new Set(H?.split(" ")??[]);return{blur:X.has("blur")||X.has("input"),input:X.has("input"),submit:X.has("submit"),lazy:X.has("lazy")}}),D=computed(()=>r.error||r.errorMessages.length?!1:r.rules.length?T.value?C.value.length||V.value.lazy?null:!0:!C.value.length:!0),O=shallowRef(!1),F=computed(()=>({[`${n}--error`]:D.value===!1,[`${n}--dirty`]:B.value,[`${n}--disabled`]:A.value,[`${n}--readonly`]:I.value})),M=computed(()=>r.name??unref(_));onBeforeMount(()=>{E?.register({id:M.value,validate:q,reset:L,resetValidation:j})}),onBeforeUnmount(()=>{E?.unregister(M.value)}),onMounted(async()=>{V.value.lazy||await q(!0),E?.update(M.value,D.value,N.value)}),useToggleScope(()=>V.value.input,()=>{watch(S,()=>{if(S.value!=null)q();else if(r.focused){const H=watch(()=>r.focused,X=>{X||q(),H()})}})}),useToggleScope(()=>V.value.blur,()=>{watch(()=>r.focused,H=>{H||q()})}),watch(D,()=>{E?.update(M.value,D.value,N.value)});function L(){x.value=null,nextTick$2(j)}function j(){T.value=!0,V.value.lazy?C.value=[]:q(!0)}async function q(){let H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const X=[];O.value=!0;for(const J of r.rules){if(X.length>=+(r.maxErrors??1))break;const ae=await(typeof J=="function"?J:()=>J)(S.value);if(ae!==!0){if(ae!==!1&&typeof ae!="string"){console.warn(`${ae} is not a valid value. Rule functions must return boolean true or a string.`);continue}X.push(ae||"")}}return C.value=X,O.value=!1,T.value=H,C.value}return{errorMessages:N,isDirty:B,isDisabled:A,isReadonly:I,isPristine:T,isValid:D,isValidating:O,reset:L,resetValidation:j,validate:q,validationClasses:F}}const makeVInputProps=propsFactory({id:String,appendIcon:IconValue,centerAffix:{type:Boolean,default:!0},prependIcon:IconValue,hideDetails:[Boolean,String],hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:r=>["horizontal","vertical"].includes(r)},"onClick:prepend":EventProp(),"onClick:append":EventProp(),...makeComponentProps(),...makeDensityProps(),...makeValidationProps()},"VInput"),VInput=genericComponent()({name:"VInput",props:{...makeVInputProps()},emits:{"update:modelValue":r=>!0},setup(r,n){let{attrs:_,slots:x,emit:S}=n;const{densityClasses:E}=useDensity(r),{rtlClasses:C}=useRtl(),{InputIcon:T}=useInputIcon(r),B=getUid(),A=computed(()=>r.id||`input-${B}`),I=computed(()=>`${A.value}-messages`),{errorMessages:N,isDirty:V,isDisabled:D,isReadonly:O,isPristine:F,isValid:M,isValidating:L,reset:j,resetValidation:q,validate:H,validationClasses:X}=useValidation(r,"v-input",A),J=computed(()=>({id:A,messagesId:I,isDirty:V,isDisabled:D,isReadonly:O,isPristine:F,isValid:M,isValidating:L,reset:j,resetValidation:q,validate:H})),Z=computed(()=>r.errorMessages?.length||!F.value&&N.value.length?N.value:r.hint&&(r.persistentHint||r.focused)?r.hint:r.messages);return useRender(()=>{const ae=!!(x.prepend||r.prependIcon),ce=!!(x.append||r.appendIcon),ve=Z.value.length>0,pe=!r.hideDetails||r.hideDetails==="auto"&&(ve||!!x.details);return createVNode("div",{class:["v-input",`v-input--${r.direction}`,{"v-input--center-affix":r.centerAffix},E.value,C.value,X.value,r.class],style:r.style},[ae&&createVNode("div",{key:"prepend",class:"v-input__prepend"},[x.prepend?.(J.value),r.prependIcon&&createVNode(T,{key:"prepend-icon",name:"prepend"},null)]),x.default&&createVNode("div",{class:"v-input__control"},[x.default?.(J.value)]),ce&&createVNode("div",{key:"append",class:"v-input__append"},[r.appendIcon&&createVNode(T,{key:"append-icon",name:"append"},null),x.append?.(J.value)]),pe&&createVNode("div",{class:"v-input__details"},[createVNode(VMessages,{id:I.value,active:ve,messages:Z.value},{message:x.message}),x.details?.(J.value)])])}),{reset:j,resetValidation:q,validate:H}}}),makeVCheckboxProps=propsFactory({...makeVInputProps(),...omit(makeVCheckboxBtnProps(),["inline"])},"VCheckbox"),VCheckbox=genericComponent()({name:"VCheckbox",inheritAttrs:!1,props:makeVCheckboxProps(),emits:{"update:modelValue":r=>!0,"update:focused":r=>!0},setup(r,n){let{attrs:_,slots:x}=n;const S=useProxiedModel(r,"modelValue"),{isFocused:E,focus:C,blur:T}=useFocus(r),B=getUid(),A=computed(()=>r.id||`checkbox-${B}`);return useRender(()=>{const[I,N]=filterInputAttrs(_),[V,D]=VInput.filterProps(r),[O,F]=VCheckboxBtn.filterProps(r);return createVNode(VInput,mergeProps({class:["v-checkbox",r.class]},I,V,{modelValue:S.value,"onUpdate:modelValue":M=>S.value=M,id:A.value,focused:E.value,style:r.style}),{...x,default:M=>{let{id:L,messagesId:j,isDisabled:q,isReadonly:H}=M;return createVNode(VCheckboxBtn,mergeProps(O,{id:L.value,"aria-describedby":j.value,disabled:q.value,readonly:H.value},N,{modelValue:S.value,"onUpdate:modelValue":X=>S.value=X,onFocus:C,onBlur:T}),x)}})}),{}}}),VChip$1="",VChipGroup$1="",VChipGroupSymbol=Symbol.for("vuetify:v-chip-group"),makeVChipGroupProps=propsFactory({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:deepEqual$2},...makeComponentProps(),...makeGroupProps({selectedClass:"v-chip--selected"}),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"tonal"})},"VChipGroup"),VChipGroup=genericComponent()({name:"VChipGroup",props:makeVChipGroupProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{slots:_}=n;const{themeClasses:x}=provideTheme(r),{isSelected:S,select:E,next:C,prev:T,selected:B}=useGroup(r,VChipGroupSymbol);return provideDefaults({VChip:{color:toRef(r,"color"),disabled:toRef(r,"disabled"),filter:toRef(r,"filter"),variant:toRef(r,"variant")}}),useRender(()=>createVNode(r.tag,{class:["v-chip-group",{"v-chip-group--column":r.column},x.value,r.class],style:r.style},{default:()=>[_.default?.({isSelected:S,select:E,next:C,prev:T,selected:B.value})]})),{}}}),makeVChipProps=propsFactory({activeClass:String,appendAvatar:String,appendIcon:IconValue,closable:Boolean,closeIcon:{type:IconValue,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:IconValue,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:EventProp(),onClickOnce:EventProp(),...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeElevationProps(),...makeGroupItemProps(),...makeRoundedProps(),...makeRouterProps(),...makeSizeProps(),...makeTagProps({tag:"span"}),...makeThemeProps(),...makeVariantProps({variant:"tonal"})},"VChip"),VChip=genericComponent()({name:"VChip",directives:{Ripple},props:makeVChipProps(),emits:{"click:close":r=>!0,"update:modelValue":r=>!0,"group:selected":r=>!0,click:r=>!0},setup(r,n){let{attrs:_,emit:x,slots:S}=n;const{t:E}=useLocale(),{borderClasses:C}=useBorder(r),{colorClasses:T,colorStyles:B,variantClasses:A}=useVariant(r),{densityClasses:I}=useDensity(r),{elevationClasses:N}=useElevation(r),{roundedClasses:V}=useRounded(r),{sizeClasses:D}=useSize(r),{themeClasses:O}=provideTheme(r),F=useProxiedModel(r,"modelValue"),M=useGroupItem(r,VChipGroupSymbol,!1),L=useLink$1(r,_),j=computed(()=>r.link!==!1&&L.isLink.value),q=computed(()=>!r.disabled&&r.link!==!1&&(!!M||r.link||L.isClickable.value)),H=computed(()=>({"aria-label":E(r.closeLabel),onClick(Z){Z.stopPropagation(),F.value=!1,x("click:close",Z)}}));function X(Z){x("click",Z),q.value&&(L.navigate?.(Z),M?.toggle())}function J(Z){(Z.key==="Enter"||Z.key===" ")&&(Z.preventDefault(),X(Z))}return()=>{const Z=L.isLink.value?"a":r.tag,ae=!!(r.appendIcon||r.appendAvatar),ce=!!(ae||S.append),ve=!!(S.close||r.closable),pe=!!(S.filter||r.filter)&&M,G=!!(r.prependIcon||r.prependAvatar),Y=!!(G||S.prepend),U=!M||M.isSelected.value;return F.value&&withDirectives(createVNode(Z,{class:["v-chip",{"v-chip--disabled":r.disabled,"v-chip--label":r.label,"v-chip--link":q.value,"v-chip--filter":pe,"v-chip--pill":r.pill},O.value,C.value,U?T.value:void 0,I.value,N.value,V.value,D.value,A.value,M?.selectedClass.value,r.class],style:[U?B.value:void 0,r.style],disabled:r.disabled||void 0,draggable:r.draggable,href:L.href.value,tabindex:q.value?0:void 0,onClick:X,onKeydown:q.value&&!j.value&&J},{default:()=>[genOverlays(q.value,"v-chip"),pe&&createVNode(VExpandXTransition,{key:"filter"},{default:()=>[withDirectives(createVNode("div",{class:"v-chip__filter"},[S.filter?createVNode(VDefaultsProvider,{key:"filter-defaults",disabled:!r.filterIcon,defaults:{VIcon:{icon:r.filterIcon}}},S.filter):createVNode(VIcon,{key:"filter-icon",icon:r.filterIcon},null)]),[[vShow,M.isSelected.value]])]}),Y&&createVNode("div",{key:"prepend",class:"v-chip__prepend"},[S.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!G,defaults:{VAvatar:{image:r.prependAvatar,start:!0},VIcon:{icon:r.prependIcon,start:!0}}},S.prepend):createVNode(Fragment,null,[r.prependIcon&&createVNode(VIcon,{key:"prepend-icon",icon:r.prependIcon,start:!0},null),r.prependAvatar&&createVNode(VAvatar,{key:"prepend-avatar",image:r.prependAvatar,start:!0},null)])]),createVNode("div",{class:"v-chip__content"},[S.default?.({isSelected:M?.isSelected.value,selectedClass:M?.selectedClass.value,select:M?.select,toggle:M?.toggle,value:M?.value.value,disabled:r.disabled})??r.text]),ce&&createVNode("div",{key:"append",class:"v-chip__append"},[S.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!ae,defaults:{VAvatar:{end:!0,image:r.appendAvatar},VIcon:{end:!0,icon:r.appendIcon}}},S.append):createVNode(Fragment,null,[r.appendIcon&&createVNode(VIcon,{key:"append-icon",end:!0,icon:r.appendIcon},null),r.appendAvatar&&createVNode(VAvatar,{key:"append-avatar",end:!0,image:r.appendAvatar},null)])]),ve&&createVNode("div",mergeProps({key:"close",class:"v-chip__close"},H.value),[S.close?createVNode(VDefaultsProvider,{key:"close-defaults",defaults:{VIcon:{icon:r.closeIcon,size:"x-small"}}},S.close):createVNode(VIcon,{key:"close-icon",icon:r.closeIcon,size:"x-small"},null)])]}),[[resolveDirective("ripple"),q.value&&r.ripple,null]])}}}),VMenu$1="",makeVMenuProps=propsFactory({id:String,...omit(makeVOverlayProps({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:VDialogTransition}}),["absolute"])},"VMenu"),VMenu=genericComponent()({name:"VMenu",props:makeVMenuProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{slots:_}=n;const x=useProxiedModel(r,"modelValue"),{scopeId:S}=useScopeId(),E=getUid(),C=computed(()=>r.id||`v-menu-${E}`),T=ref$1(),B=inject$1(VMenuSymbol,null),A=shallowRef(0);provide(VMenuSymbol,{register(){++A.value},unregister(){--A.value},closeParents(){setTimeout(()=>{A.value||(x.value=!1,B?.closeParents())},40)}});async function I(F){const M=F.relatedTarget,L=F.target;await nextTick$2(),x.value&&M!==L&&T.value?.contentEl&&T.value?.globalTop&&![document,T.value.contentEl].includes(L)&&!T.value.contentEl.contains(L)&&focusableChildren(T.value.contentEl)[0]?.focus()}watch(x,F=>{F?(B?.register(),document.addEventListener("focusin",I,{once:!0})):(B?.unregister(),document.removeEventListener("focusin",I))});function N(){B?.closeParents()}function V(F){r.disabled||F.key==="Tab"&&(getNextElement(focusableChildren(T.value?.contentEl,!1),F.shiftKey?"prev":"next",L=>L.tabIndex>=0)||(x.value=!1,T.value?.activatorEl?.focus()))}function D(F){if(r.disabled)return;const M=T.value?.contentEl;M&&x.value?F.key==="ArrowDown"?(F.preventDefault(),focusChild(M,"next")):F.key==="ArrowUp"&&(F.preventDefault(),focusChild(M,"prev")):["ArrowDown","ArrowUp"].includes(F.key)&&(x.value=!0,F.preventDefault(),setTimeout(()=>setTimeout(()=>D(F))))}const O=computed(()=>mergeProps({"aria-haspopup":"menu","aria-expanded":String(x.value),"aria-owns":C.value,onKeydown:D},r.activatorProps));return useRender(()=>{const[F]=VOverlay.filterProps(r);return createVNode(VOverlay,mergeProps({ref:T,class:["v-menu",r.class],style:r.style},F,{modelValue:x.value,"onUpdate:modelValue":M=>x.value=M,absolute:!0,activatorProps:O.value,"onClick:outside":N,onKeydown:V},S),{activator:_.activator,default:function(){for(var M=arguments.length,L=new Array(M),j=0;j<M;j++)L[j]=arguments[j];return createVNode(VDefaultsProvider,{root:"VMenu"},{default:()=>[_.default?.(...L)]})}})}),forwardRefs({id:C,openChildren:A},T)}}),VSelect$1="",VTextField$1="",VCounter$1="",makeVCounterProps=propsFactory({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...makeComponentProps(),...makeTransitionProps$1({transition:{component:VSlideYTransition}})},"VCounter"),VCounter=genericComponent()({name:"VCounter",functional:!0,props:makeVCounterProps(),setup(r,n){let{slots:_}=n;const x=computed(()=>r.max?`${r.value} / ${r.max}`:String(r.value));return useRender(()=>createVNode(MaybeTransition,{transition:r.transition},{default:()=>[withDirectives(createVNode("div",{class:["v-counter",r.class],style:r.style},[_.default?_.default({counter:x.value,max:r.max,value:r.value}):x.value]),[[vShow,r.active]])]})),{}}}),VField$1="",makeVFieldLabelProps=propsFactory({floating:Boolean,...makeComponentProps()},"VFieldLabel"),VFieldLabel=genericComponent()({name:"VFieldLabel",props:makeVFieldLabelProps(),setup(r,n){let{slots:_}=n;return useRender(()=>createVNode(VLabel,{class:["v-field-label",{"v-field-label--floating":r.floating},r.class],style:r.style,"aria-hidden":r.floating||void 0},_)),{}}}),allowedVariants=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],makeVFieldProps=propsFactory({appendInnerIcon:IconValue,bgColor:String,clearable:Boolean,clearIcon:{type:IconValue,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:IconValue,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:r=>allowedVariants.includes(r)},"onClick:clear":EventProp(),"onClick:appendInner":EventProp(),"onClick:prependInner":EventProp(),...makeComponentProps(),...makeLoaderProps(),...makeRoundedProps(),...makeThemeProps()},"VField"),VField=genericComponent()({name:"VField",inheritAttrs:!1,props:{id:String,...makeFocusProps(),...makeVFieldProps()},emits:{"update:focused":r=>!0,"update:modelValue":r=>!0},setup(r,n){let{attrs:_,emit:x,slots:S}=n;const{themeClasses:E}=provideTheme(r),{loaderClasses:C}=useLoader(r),{focusClasses:T,isFocused:B,focus:A,blur:I}=useFocus(r),{InputIcon:N}=useInputIcon(r),{roundedClasses:V}=useRounded(r),{rtlClasses:D}=useRtl(),O=computed(()=>r.dirty||r.active),F=computed(()=>!r.singleLine&&!!(r.label||S.label)),M=getUid(),L=computed(()=>r.id||`input-${M}`),j=computed(()=>`${L.value}-messages`),q=ref$1(),H=ref$1(),X=ref$1(),J=computed(()=>["plain","underlined"].includes(r.variant)),{backgroundColorClasses:Z,backgroundColorStyles:ae}=useBackgroundColor(toRef(r,"bgColor")),{textColorClasses:ce,textColorStyles:ve}=useTextColor(computed(()=>r.error||r.disabled?void 0:O.value&&B.value?r.color:r.baseColor));watch(O,Y=>{if(F.value){const U=q.value.$el,W=H.value.$el;requestAnimationFrame(()=>{const ee=nullifyTransforms(U),re=W.getBoundingClientRect(),oe=re.x-ee.x,ie=re.y-ee.y-(ee.height/2-re.height/2),ne=re.width/.75,te=Math.abs(ne-ee.width)>1?{maxWidth:convertToUnit(ne)}:void 0,K=getComputedStyle(U),le=getComputedStyle(W),ue=parseFloat(K.transitionDuration)*1e3||150,be=parseFloat(le.getPropertyValue("--v-field-label-scale")),ge=le.getPropertyValue("color");U.style.visibility="visible",W.style.visibility="hidden",animate(U,{transform:`translate(${oe}px, ${ie}px) scale(${be})`,color:ge,...te},{duration:ue,easing:standardEasing,direction:Y?"normal":"reverse"}).finished.then(()=>{U.style.removeProperty("visibility"),W.style.removeProperty("visibility")})})}},{flush:"post"});const pe=computed(()=>({isActive:O,isFocused:B,controlRef:X,blur:I,focus:A}));function G(Y){Y.target!==document.activeElement&&Y.preventDefault()}return useRender(()=>{const Y=r.variant==="outlined",U=S["prepend-inner"]||r.prependInnerIcon,W=!!(r.clearable||S.clear),ee=!!(S["append-inner"]||r.appendInnerIcon||W),re=S.label?S.label({...pe.value,label:r.label,props:{for:L.value}}):r.label;return createVNode("div",mergeProps({class:["v-field",{"v-field--active":O.value,"v-field--appended":ee,"v-field--center-affix":r.centerAffix??!J.value,"v-field--disabled":r.disabled,"v-field--dirty":r.dirty,"v-field--error":r.error,"v-field--flat":r.flat,"v-field--has-background":!!r.bgColor,"v-field--persistent-clear":r.persistentClear,"v-field--prepended":U,"v-field--reverse":r.reverse,"v-field--single-line":r.singleLine,"v-field--no-label":!re,[`v-field--variant-${r.variant}`]:!0},E.value,Z.value,T.value,C.value,V.value,D.value,r.class],style:[ae.value,r.style],onClick:G},_),[createVNode("div",{class:"v-field__overlay"},null),createVNode(LoaderSlot,{name:"v-field",active:!!r.loading,color:r.error?"error":typeof r.loading=="string"?r.loading:r.color},{default:S.loader}),U&&createVNode("div",{key:"prepend",class:"v-field__prepend-inner"},[r.prependInnerIcon&&createVNode(N,{key:"prepend-icon",name:"prependInner"},null),S["prepend-inner"]?.(pe.value)]),createVNode("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(r.variant)&&F.value&&createVNode(VFieldLabel,{key:"floating-label",ref:H,class:[ce.value],floating:!0,for:L.value,style:ve.value},{default:()=>[re]}),createVNode(VFieldLabel,{ref:q,for:L.value},{default:()=>[re]}),S.default?.({...pe.value,props:{id:L.value,class:"v-field__input","aria-describedby":j.value},focus:A,blur:I})]),W&&createVNode(VExpandXTransition,{key:"clear"},{default:()=>[withDirectives(createVNode("div",{class:"v-field__clearable",onMousedown:oe=>{oe.preventDefault(),oe.stopPropagation()}},[S.clear?S.clear():createVNode(N,{name:"clear"},null)]),[[vShow,r.dirty]])]}),ee&&createVNode("div",{key:"append",class:"v-field__append-inner"},[S["append-inner"]?.(pe.value),r.appendInnerIcon&&createVNode(N,{key:"append-icon",name:"appendInner"},null)]),createVNode("div",{class:["v-field__outline",ce.value],style:ve.value},[Y&&createVNode(Fragment,null,[createVNode("div",{class:"v-field__outline__start"},null),F.value&&createVNode("div",{class:"v-field__outline__notch"},[createVNode(VFieldLabel,{ref:H,floating:!0,for:L.value},{default:()=>[re]})]),createVNode("div",{class:"v-field__outline__end"},null)]),J.value&&F.value&&createVNode(VFieldLabel,{ref:H,floating:!0,for:L.value},{default:()=>[re]})])])}),{controlRef:X}}});function filterFieldProps(r){const n=Object.keys(VField.props).filter(_=>!isOn(_)&&_!=="class"&&_!=="style");return pick$1(r,n)}const activeTypes=["color","file","time","date","datetime-local","week","month"],makeVTextFieldProps=propsFactory({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...makeVInputProps(),...makeVFieldProps()},"VTextField"),VTextField=genericComponent()({name:"VTextField",directives:{Intersect:Intersect$1},inheritAttrs:!1,props:makeVTextFieldProps(),emits:{"click:control":r=>!0,"mousedown:control":r=>!0,"update:focused":r=>!0,"update:modelValue":r=>!0},setup(r,n){let{attrs:_,emit:x,slots:S}=n;const E=useProxiedModel(r,"modelValue"),{isFocused:C,focus:T,blur:B}=useFocus(r),A=computed(()=>typeof r.counterValue=="function"?r.counterValue(E.value):(E.value??"").toString().length),I=computed(()=>{if(_.maxlength)return _.maxlength;if(!(!r.counter||typeof r.counter!="number"&&typeof r.counter!="string"))return r.counter}),N=computed(()=>["plain","underlined"].includes(r.variant));function V(J,Z){!r.autofocus||!J||Z[0].target?.focus?.()}const D=ref$1(),O=ref$1(),F=ref$1(),M=computed(()=>activeTypes.includes(r.type)||r.persistentPlaceholder||C.value||r.active);function L(){F.value!==document.activeElement&&F.value?.focus(),C.value||T()}function j(J){x("mousedown:control",J),J.target!==F.value&&(L(),J.preventDefault())}function q(J){L(),x("click:control",J)}function H(J){J.stopPropagation(),L(),nextTick$2(()=>{E.value=null,callEvent(r["onClick:clear"],J)})}function X(J){const Z=J.target;if(E.value=Z.value,r.modelModifiers?.trim&&["text","search","password","tel","url"].includes(r.type)){const ae=[Z.selectionStart,Z.selectionEnd];nextTick$2(()=>{Z.selectionStart=ae[0],Z.selectionEnd=ae[1]})}}return useRender(()=>{const J=!!(S.counter||r.counter||r.counterValue),Z=!!(J||S.details),[ae,ce]=filterInputAttrs(_),[{modelValue:ve,...pe}]=VInput.filterProps(r),[G]=filterFieldProps(r);return createVNode(VInput,mergeProps({ref:D,modelValue:E.value,"onUpdate:modelValue":Y=>E.value=Y,class:["v-text-field",{"v-text-field--prefixed":r.prefix,"v-text-field--suffixed":r.suffix,"v-text-field--plain-underlined":["plain","underlined"].includes(r.variant)},r.class],style:r.style},ae,pe,{centerAffix:!N.value,focused:C.value}),{...S,default:Y=>{let{id:U,isDisabled:W,isDirty:ee,isReadonly:re,isValid:oe}=Y;return createVNode(VField,mergeProps({ref:O,onMousedown:j,onClick:q,"onClick:clear":H,"onClick:prependInner":r["onClick:prependInner"],"onClick:appendInner":r["onClick:appendInner"],role:r.role},G,{id:U.value,active:M.value||ee.value,dirty:ee.value||r.dirty,disabled:W.value,focused:C.value,error:oe.value===!1}),{...S,default:ie=>{let{props:{class:ne,...te}}=ie;const K=withDirectives(createVNode("input",mergeProps({ref:F,value:E.value,onInput:X,autofocus:r.autofocus,readonly:re.value,disabled:W.value,name:r.name,placeholder:r.placeholder,size:1,type:r.type,onFocus:L,onBlur:B},te,ce),null),[[resolveDirective("intersect"),{handler:V},null,{once:!0}]]);return createVNode(Fragment,null,[r.prefix&&createVNode("span",{class:"v-text-field__prefix"},[createVNode("span",{class:"v-text-field__prefix__text"},[r.prefix])]),S.default?createVNode("div",{class:ne,"data-no-activator":""},[S.default(),K]):cloneVNode(K,{class:ne}),r.suffix&&createVNode("span",{class:"v-text-field__suffix"},[createVNode("span",{class:"v-text-field__suffix__text"},[r.suffix])])])}})},details:Z?Y=>createVNode(Fragment,null,[S.details?.(Y),J&&createVNode(Fragment,null,[createVNode("span",null,null),createVNode(VCounter,{active:r.persistentCounter||C.value,value:A.value,max:I.value},S.counter)])]):void 0})}),forwardRefs({},D,O,F)}}),VVirtualScroll$1="",makeVVirtualScrollItemProps=propsFactory({renderless:Boolean,...makeComponentProps()},"VVirtualScrollItem"),VVirtualScrollItem=genericComponent()({name:"VVirtualScrollItem",inheritAttrs:!1,props:makeVVirtualScrollItemProps(),emits:{"update:height":r=>!0},setup(r,n){let{attrs:_,emit:x,slots:S}=n;const{resizeRef:E,contentRect:C}=useResizeObserver(void 0,"border");watch(()=>C.value?.height,T=>{T!=null&&x("update:height",T)}),useRender(()=>r.renderless?createVNode(Fragment,null,[S.default?.({itemRef:E})]):createVNode("div",mergeProps({ref:E,class:["v-virtual-scroll__item",r.class],style:r.style},_),[S.default?.()]))}}),UP=-1,DOWN=1,makeVirtualProps=propsFactory({itemHeight:{type:[Number,String],default:48}},"virtual");function useVirtual(r,n,_){const x=shallowRef(0),S=shallowRef(r.itemHeight),E=computed({get:()=>parseInt(S.value??0,10),set(Z){S.value=Z}}),C=ref$1(),{resizeRef:T,contentRect:B}=useResizeObserver();watchEffect(()=>{T.value=C.value});const A=useDisplay(),I=new Map;let N=Array.from({length:n.value.length});const V=computed(()=>{const Z=(!B.value||C.value===document.documentElement?A.height.value:B.value.height)-(_?.value??0);return Math.ceil(Z/E.value*1.7+1)});function D(Z,ae){E.value=Math.max(E.value,ae),N[Z]=ae,I.set(n.value[Z],ae)}function O(Z){return N.slice(0,Z).reduce((ae,ce)=>ae+(ce||E.value),0)}function F(Z){const ae=n.value.length;let ce=0,ve=0;for(;ve<Z&&ce<ae;)ve+=N[ce++]||E.value;return ce-1}let M=0;function L(){if(!C.value||!B.value)return;const Z=B.value.height-56,ae=C.value.scrollTop,ce=ae<M?UP:DOWN,ve=F(ae+Z/2),pe=Math.round(V.value/3),G=ve-pe,Y=x.value+pe*2-1;ce===UP&&ve<=Y?x.value=clamp(G,0,n.value.length):ce===DOWN&&ve>=Y&&(x.value=clamp(G,0,n.value.length-V.value)),M=ae}function j(Z){if(!C.value)return;const ae=O(Z);C.value.scrollTop=ae}const q=computed(()=>Math.min(n.value.length,x.value+V.value)),H=computed(()=>n.value.slice(x.value,q.value).map((Z,ae)=>({raw:Z,index:ae+x.value}))),X=computed(()=>O(x.value)),J=computed(()=>O(n.value.length)-O(q.value));return watch(()=>n.value.length,()=>{N=createRange(n.value.length).map(()=>E.value),I.forEach((Z,ae)=>{const ce=n.value.indexOf(ae);ce===-1?I.delete(ae):N[ce]=Z})}),{containerRef:C,computedItems:H,itemHeight:E,paddingTop:X,paddingBottom:J,scrollToIndex:j,handleScroll:L,handleItemResize:D}}const makeVVirtualScrollProps=propsFactory({items:{type:Array,default:()=>[]},renderless:Boolean,...makeVirtualProps(),...makeComponentProps(),...makeDimensionProps()},"VVirtualScroll"),VVirtualScroll=genericComponent()({name:"VVirtualScroll",props:makeVVirtualScrollProps(),setup(r,n){let{slots:_}=n;const x=getCurrentInstance("VVirtualScroll"),{dimensionStyles:S}=useDimension(r),{containerRef:E,handleScroll:C,handleItemResize:T,scrollToIndex:B,paddingTop:A,paddingBottom:I,computedItems:N}=useVirtual(r,toRef(r,"items"));return useToggleScope(()=>r.renderless,()=>{onMounted(()=>{E.value=getScrollParent(x.vnode.el,!0),E.value?.addEventListener("scroll",C)}),onScopeDispose(()=>{E.value?.removeEventListener("scroll",C)})}),useRender(()=>{const V=N.value.map(D=>createVNode(VVirtualScrollItem,{key:D.index,renderless:r.renderless,"onUpdate:height":O=>T(D.index,O)},{default:O=>_.default?.({item:D.raw,index:D.index,...O})}));return r.renderless?createVNode(Fragment,null,[createVNode("div",{class:"v-virtual-scroll__spacer",style:{paddingTop:convertToUnit(A.value)}},null),V,createVNode("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:convertToUnit(I.value)}},null)]):createVNode("div",{ref:E,class:["v-virtual-scroll",r.class],onScroll:C,style:[S.value,r.style]},[createVNode("div",{class:"v-virtual-scroll__container",style:{paddingTop:convertToUnit(A.value),paddingBottom:convertToUnit(I.value)}},[V])])}),{scrollToIndex:B}}});function useScrolling(r,n){const _=shallowRef(!1);let x;function S(T){cancelAnimationFrame(x),_.value=!0,x=requestAnimationFrame(()=>{x=requestAnimationFrame(()=>{_.value=!1})})}async function E(){await new Promise(T=>requestAnimationFrame(T)),await new Promise(T=>requestAnimationFrame(T)),await new Promise(T=>requestAnimationFrame(T)),await new Promise(T=>{if(_.value){const B=watch(_,()=>{B(),T()})}else T()})}async function C(T){if(T.key==="Tab"&&n.value?.focus(),!["PageDown","PageUp","Home","End"].includes(T.key))return;const B=r.value?.$el;if(!B)return;(T.key==="Home"||T.key==="End")&&B.scrollTo({top:T.key==="Home"?0:B.scrollHeight,behavior:"smooth"}),await E();const A=B.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(T.key==="PageDown"||T.key==="Home"){const I=B.getBoundingClientRect().top;for(const N of A)if(N.getBoundingClientRect().top>=I){N.focus();break}}else{const I=B.getBoundingClientRect().bottom;for(const N of[...A].reverse())if(N.getBoundingClientRect().bottom<=I){N.focus();break}}}return{onListScroll:S,onListKeydown:C}}const makeSelectProps=propsFactory({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:IconValue,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:deepEqual$2},itemColor:String,...makeItemsProps({itemChildren:!1})},"Select"),makeVSelectProps=propsFactory({...makeSelectProps(),...omit(makeVTextFieldProps({modelValue:null,role:"button"}),["validationValue","dirty","appendInnerIcon"]),...makeTransitionProps$1({transition:{component:VDialogTransition}})},"VSelect"),VSelect=genericComponent()({name:"VSelect",props:makeVSelectProps(),emits:{"update:focused":r=>!0,"update:modelValue":r=>!0,"update:menu":r=>!0},setup(r,n){let{slots:_}=n;const{t:x}=useLocale(),S=ref$1(),E=ref$1(),C=ref$1(),T=useProxiedModel(r,"menu"),B=computed({get:()=>T.value,set:re=>{T.value&&!re&&E.value?.openChildren||(T.value=re)}}),{items:A,transformIn:I,transformOut:N}=useItems(r),V=useProxiedModel(r,"modelValue",[],re=>I(re===null?[null]:wrapInArray(re)),re=>{const oe=N(re);return r.multiple?oe:oe[0]??null}),D=useForm(),O=computed(()=>V.value.map(re=>A.value.find(oe=>{const ie=getPropertyFromItem(oe.raw,r.itemValue),ne=getPropertyFromItem(re.raw,r.itemValue);return ie===void 0||ne===void 0?!1:r.returnObject?r.valueComparator(ie,ne):r.valueComparator(oe.value,re.value)})||re)),F=computed(()=>O.value.map(re=>re.props.value)),M=shallowRef(!1),L=computed(()=>B.value?r.closeText:r.openText);let j="",q;const H=computed(()=>r.hideSelected?A.value.filter(re=>!O.value.some(oe=>oe===re)):A.value),X=computed(()=>r.hideNoData&&!A.value.length||r.readonly||D?.isReadonly.value),J=ref$1(),{onListScroll:Z,onListKeydown:ae}=useScrolling(J,S);function ce(re){r.openOnClear&&(B.value=!0)}function ve(){X.value||(B.value=!B.value)}function pe(re){if(!re.key||r.readonly||D?.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(re.key)&&re.preventDefault(),["Enter","ArrowDown"," "].includes(re.key)&&(B.value=!0),["Escape","Tab"].includes(re.key)&&(B.value=!1),re.key==="Home"?J.value?.focus("first"):re.key==="End"&&J.value?.focus("last");const oe=1e3;function ie(K){const le=K.key.length===1,ue=!K.ctrlKey&&!K.metaKey&&!K.altKey;return le&&ue}if(r.multiple||!ie(re))return;const ne=performance.now();ne-q>oe&&(j=""),j+=re.key.toLowerCase(),q=ne;const te=A.value.find(K=>K.title.toLowerCase().startsWith(j));te!==void 0&&(V.value=[te])}function G(re){if(r.multiple){const oe=F.value.findIndex(ie=>r.valueComparator(ie,re.value));if(oe===-1)V.value=[...V.value,re];else{const ie=[...V.value];ie.splice(oe,1),V.value=ie}}else V.value=[re],B.value=!1}function Y(re){J.value?.$el.contains(re.relatedTarget)||(B.value=!1)}function U(){M.value&&S.value?.focus()}function W(re){M.value=!0}function ee(re){if(re==null)V.value=[];else if(matchesSelector(S.value,":autofill")||matchesSelector(S.value,":-webkit-autofill")){const oe=A.value.find(ie=>ie.title===re);oe&&G(oe)}else S.value&&(S.value.value="")}return watch(B,()=>{if(!r.hideSelected&&B.value&&O.value.length){const re=H.value.findIndex(oe=>O.value.some(ie=>oe.value===ie.value));IN_BROWSER&&window.requestAnimationFrame(()=>{re>=0&&C.value?.scrollToIndex(re)})}}),useRender(()=>{const re=!!(r.chips||_.chip),oe=!!(!r.hideNoData||H.value.length||_["prepend-item"]||_["append-item"]||_["no-data"]),ie=V.value.length>0,[ne]=VTextField.filterProps(r),te=ie||!M.value&&r.label&&!r.persistentPlaceholder?void 0:r.placeholder;return createVNode(VTextField,mergeProps({ref:S},ne,{modelValue:V.value.map(K=>K.props.value).join(", "),"onUpdate:modelValue":ee,focused:M.value,"onUpdate:focused":K=>M.value=K,validationValue:V.externalValue,dirty:ie,class:["v-select",{"v-select--active-menu":B.value,"v-select--chips":!!r.chips,[`v-select--${r.multiple?"multiple":"single"}`]:!0,"v-select--selected":V.value.length,"v-select--selection-slot":!!_.selection},r.class],style:r.style,inputmode:"none",placeholder:te,"onClick:clear":ce,"onMousedown:control":ve,onBlur:Y,onKeydown:pe,"aria-label":x(L.value),title:x(L.value)}),{..._,default:()=>createVNode(Fragment,null,[createVNode(VMenu,mergeProps({ref:E,modelValue:B.value,"onUpdate:modelValue":K=>B.value=K,activator:"parent",contentClass:"v-select__content",disabled:X.value,eager:r.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:r.transition,onAfterLeave:U},r.menuProps),{default:()=>[oe&&createVNode(VList,{ref:J,selected:F.value,selectStrategy:r.multiple?"independent":"single-independent",onMousedown:K=>K.preventDefault(),onKeydown:ae,onFocusin:W,onScrollPassive:Z,tabindex:"-1",color:r.itemColor??r.color},{default:()=>[_["prepend-item"]?.(),!H.value.length&&!r.hideNoData&&(_["no-data"]?.()??createVNode(VListItem,{title:x(r.noDataText)},null)),createVNode(VVirtualScroll,{ref:C,renderless:!0,items:H.value},{default:K=>{let{item:le,index:ue,itemRef:be}=K;const ge=mergeProps(le.props,{ref:be,key:ue,onClick:()=>G(le)});return _.item?.({item:le,index:ue,props:ge})??createVNode(VListItem,ge,{prepend:ye=>{let{isSelected:Ee}=ye;return createVNode(Fragment,null,[r.multiple&&!r.hideSelected?createVNode(VCheckboxBtn,{key:le.value,modelValue:Ee,ripple:!1,tabindex:"-1"},null):void 0,le.props.prependIcon&&createVNode(VIcon,{icon:le.props.prependIcon},null)])}})}}),_["append-item"]?.()]})]}),O.value.map((K,le)=>{function ue(ge){ge.stopPropagation(),ge.preventDefault(),G(K)}const be={"onClick:close":ue,onMousedown(ge){ge.preventDefault(),ge.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return createVNode("div",{key:K.value,class:"v-select__selection"},[re?_.chip?createVNode(VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:r.closableChips,size:"small",text:K.title}}},{default:()=>[_.chip?.({item:K,index:le,props:be})]}):createVNode(VChip,mergeProps({key:"chip",closable:r.closableChips,size:"small",text:K.title},be),null):_.selection?.({item:K,index:le})??createVNode("span",{class:"v-select__selection-text"},[K.title,r.multiple&&le<O.value.length-1&&createVNode("span",{class:"v-select__selection-comma"},[createTextVNode(",")])])])})]),"append-inner":function(){for(var K=arguments.length,le=new Array(K),ue=0;ue<K;ue++)le[ue]=arguments[ue];return createVNode(Fragment,null,[_["append-inner"]?.(...le),r.menuIcon?createVNode(VIcon,{class:"v-select__menu-icon",icon:r.menuIcon},null):void 0])}})}),forwardRefs({isFocused:M,menu:B,select:G},S)}}),defaultFilter=(r,n,_)=>r==null||n==null?-1:r.toString().toLocaleLowerCase().indexOf(n.toString().toLocaleLowerCase()),makeFilterProps=propsFactory({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function filterItems(r,n,_){const x=[],S=_?.default??defaultFilter,E=_?.filterKeys?wrapInArray(_.filterKeys):!1,C=Object.keys(_?.customKeyFilter??{}).length;if(!r?.length)return x;e:for(let T=0;T<r.length;T++){const B=r[T],A={},I={};let N=-1;if(n&&!_?.noFilter){if(typeof B=="object"){const O=E||Object.keys(B);for(const F of O){const M=getPropertyFromItem(B,F,B),L=_?.customKeyFilter?.[F];if(N=L?L(M,n,B):S(M,n,B),N!==-1&&N!==!1)L?A[F]=N:I[F]=N;else if(_?.filterMode==="every")continue e}}else N=S(B,n,B),N!==-1&&N!==!1&&(I.title=N);const V=Object.keys(I).length,D=Object.keys(A).length;if(!V&&!D||_?.filterMode==="union"&&D!==C&&!V||_?.filterMode==="intersection"&&(D!==C||!V))continue}x.push({index:T,matches:{...I,...A}})}return x}function useFilter(r,n,_,x){const S=ref$1([]),E=ref$1(new Map),C=computed(()=>x?.transform?unref(n).map(x?.transform):unref(n));watchEffect(()=>{const B=typeof _=="function"?_():unref(_),A=typeof B!="string"&&typeof B!="number"?"":String(B),I=filterItems(C.value,A,{customKeyFilter:r.customKeyFilter,default:r.customFilter,filterKeys:r.filterKeys,filterMode:r.filterMode,noFilter:r.noFilter}),N=unref(n),V=[],D=new Map;I.forEach(O=>{let{index:F,matches:M}=O;const L=N[F];V.push(L),D.set(L.value,M)}),S.value=V,E.value=D});function T(B){return E.value.get(B.value)}return{filteredItems:S,filteredMatches:E,getMatches:T}}function highlightResult$1(r,n,_){if(n==null)return r;if(Array.isArray(n))throw new Error("Multiple matches is not implemented");return typeof n=="number"&&~n?createVNode(Fragment,null,[createVNode("span",{class:"v-autocomplete__unmask"},[r.substr(0,n)]),createVNode("span",{class:"v-autocomplete__mask"},[r.substr(n,_)]),createVNode("span",{class:"v-autocomplete__unmask"},[r.substr(n+_)])]):r}const makeVAutocompleteProps=propsFactory({autoSelectFirst:{type:[Boolean,String]},search:String,...makeFilterProps({filterKeys:["title"]}),...makeSelectProps(),...omit(makeVTextFieldProps({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...makeTransitionProps$1({transition:!1})},"VAutocomplete"),VAutocomplete=genericComponent()({name:"VAutocomplete",props:makeVAutocompleteProps(),emits:{"update:focused":r=>!0,"update:search":r=>!0,"update:modelValue":r=>!0,"update:menu":r=>!0},setup(r,n){let{slots:_}=n;const{t:x}=useLocale(),S=ref$1(),E=shallowRef(!1),C=shallowRef(!0),T=shallowRef(!1),B=ref$1(),A=ref$1(),I=useProxiedModel(r,"menu"),N=computed({get:()=>I.value,set:Ne=>{I.value&&!Ne&&B.value?.openChildren||(I.value=Ne)}}),V=shallowRef(-1),D=computed(()=>S.value?.color),O=computed(()=>N.value?r.closeText:r.openText),{items:F,transformIn:M,transformOut:L}=useItems(r),{textColorClasses:j,textColorStyles:q}=useTextColor(D),H=useProxiedModel(r,"search",""),X=useProxiedModel(r,"modelValue",[],Ne=>M(Ne===null?[null]:wrapInArray(Ne)),Ne=>{const Te=L(Ne);return r.multiple?Te:Te[0]??null}),J=useForm(),{filteredItems:Z,getMatches:ae}=useFilter(r,F,()=>C.value?"":H.value),ce=computed(()=>X.value.map(Ne=>F.value.find(Te=>{const he=getPropertyFromItem(Te.raw,r.itemValue),xe=getPropertyFromItem(Ne.raw,r.itemValue);return he===void 0||xe===void 0?!1:r.returnObject?r.valueComparator(he,xe):r.valueComparator(Te.value,Ne.value)})||Ne)),ve=computed(()=>r.hideSelected?Z.value.filter(Ne=>!ce.value.some(Te=>Te.value===Ne.value)):Z.value),pe=computed(()=>ce.value.map(Ne=>Ne.props.value)),G=computed(()=>ce.value[V.value]),Y=computed(()=>(r.autoSelectFirst===!0||r.autoSelectFirst==="exact"&&H.value===ve.value[0]?.title)&&ve.value.length>0&&!C.value&&!T.value),U=computed(()=>r.hideNoData&&!F.value.length||r.readonly||J?.isReadonly.value),W=ref$1(),{onListScroll:ee,onListKeydown:re}=useScrolling(W,S);function oe(Ne){r.openOnClear&&(N.value=!0),H.value=""}function ie(){U.value||(N.value=!0)}function ne(Ne){U.value||(E.value&&(Ne.preventDefault(),Ne.stopPropagation()),N.value=!N.value)}function te(Ne){if(r.readonly||J?.isReadonly.value)return;const Te=S.value.selectionStart,he=pe.value.length;if((V.value>-1||["Enter","ArrowDown","ArrowUp"].includes(Ne.key))&&Ne.preventDefault(),["Enter","ArrowDown"].includes(Ne.key)&&(N.value=!0),["Escape"].includes(Ne.key)&&(N.value=!1),Y.value&&["Enter","Tab"].includes(Ne.key)&&Re(ve.value[0]),Ne.key==="ArrowDown"&&Y.value&&W.value?.focus("next"),!!r.multiple){if(["Backspace","Delete"].includes(Ne.key)){if(V.value<0){Ne.key==="Backspace"&&!H.value&&(V.value=he-1);return}const xe=V.value;G.value&&Re(G.value),V.value=xe>=he-1?he-2:xe}if(Ne.key==="ArrowLeft"){if(V.value<0&&Te>0)return;const xe=V.value>-1?V.value-1:he-1;ce.value[xe]?V.value=xe:(V.value=-1,S.value.setSelectionRange(H.value?.length,H.value?.length))}if(Ne.key==="ArrowRight"){if(V.value<0)return;const xe=V.value+1;ce.value[xe]?V.value=xe:(V.value=-1,S.value.setSelectionRange(0,0))}}}function K(Ne){H.value=Ne.target.value}function le(Ne){if(matchesSelector(S.value,":autofill")||matchesSelector(S.value,":-webkit-autofill")){const Te=F.value.find(he=>he.title===Ne.target.value);Te&&Re(Te)}}function ue(){E.value&&(C.value=!0,S.value?.focus())}function be(Ne){E.value=!0,setTimeout(()=>{T.value=!0})}function ge(Ne){T.value=!1}function ye(Ne){(Ne==null||Ne===""&&!r.multiple)&&(X.value=[])}const Ee=shallowRef(!1);function Re(Ne){if(r.multiple){const Te=pe.value.findIndex(he=>r.valueComparator(he,Ne.value));if(Te===-1)X.value=[...X.value,Ne];else{const he=[...X.value];he.splice(Te,1),X.value=he}}else X.value=[Ne],Ee.value=!0,H.value=Ne.title,N.value=!1,C.value=!0,nextTick$2(()=>Ee.value=!1)}return watch(E,(Ne,Te)=>{Ne!==Te&&(Ne?(Ee.value=!0,H.value=r.multiple?"":String(ce.value.at(-1)?.props.title??""),C.value=!0,nextTick$2(()=>Ee.value=!1)):(!r.multiple&&!H.value?X.value=[]:Y.value&&!T.value&&!ce.value.some(he=>{let{value:xe}=he;return xe===ve.value[0].value})&&Re(ve.value[0]),N.value=!1,H.value="",V.value=-1))}),watch(H,Ne=>{!E.value||Ee.value||(Ne&&(N.value=!0),C.value=!Ne)}),watch(N,()=>{if(!r.hideSelected&&N.value&&ce.value.length){const Ne=ve.value.findIndex(Te=>ce.value.some(he=>Te.value===he.value));IN_BROWSER&&window.requestAnimationFrame(()=>{Ne>=0&&A.value?.scrollToIndex(Ne)})}}),useRender(()=>{const Ne=!!(r.chips||_.chip),Te=!!(!r.hideNoData||ve.value.length||_["prepend-item"]||_["append-item"]||_["no-data"]),he=X.value.length>0,[xe]=VTextField.filterProps(r);return createVNode(VTextField,mergeProps({ref:S},xe,{modelValue:H.value,"onUpdate:modelValue":ye,focused:E.value,"onUpdate:focused":fe=>E.value=fe,validationValue:X.externalValue,dirty:he,onInput:K,onChange:le,class:["v-autocomplete",`v-autocomplete--${r.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":N.value,"v-autocomplete--chips":!!r.chips,"v-autocomplete--selection-slot":!!_.selection,"v-autocomplete--selecting-index":V.value>-1},r.class],style:r.style,readonly:r.readonly,placeholder:he?void 0:r.placeholder,"onClick:clear":oe,"onMousedown:control":ie,onKeydown:te}),{..._,default:()=>createVNode(Fragment,null,[createVNode(VMenu,mergeProps({ref:B,modelValue:N.value,"onUpdate:modelValue":fe=>N.value=fe,activator:"parent",contentClass:"v-autocomplete__content",disabled:U.value,eager:r.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:r.transition,onAfterLeave:ue},r.menuProps),{default:()=>[Te&&createVNode(VList,{ref:W,selected:pe.value,selectStrategy:r.multiple?"independent":"single-independent",onMousedown:fe=>fe.preventDefault(),onKeydown:re,onFocusin:be,onFocusout:ge,onScrollPassive:ee,tabindex:"-1",color:r.itemColor??r.color},{default:()=>[_["prepend-item"]?.(),!ve.value.length&&!r.hideNoData&&(_["no-data"]?.()??createVNode(VListItem,{title:x(r.noDataText)},null)),createVNode(VVirtualScroll,{ref:A,renderless:!0,items:ve.value},{default:fe=>{let{item:Be,index:Le,itemRef:Ve}=fe;const Ie=mergeProps(Be.props,{ref:Ve,key:Le,active:Y.value&&Le===0?!0:void 0,onClick:()=>Re(Be)});return _.item?.({item:Be,index:Le,props:Ie})??createVNode(VListItem,Ie,{prepend:Me=>{let{isSelected:He}=Me;return createVNode(Fragment,null,[r.multiple&&!r.hideSelected?createVNode(VCheckboxBtn,{key:Be.value,modelValue:He,ripple:!1,tabindex:"-1"},null):void 0,Be.props.prependIcon&&createVNode(VIcon,{icon:Be.props.prependIcon},null)])},title:()=>C.value?Be.title:highlightResult$1(Be.title,ae(Be)?.title,H.value?.length??0)})}}),_["append-item"]?.()]})]}),ce.value.map((fe,Be)=>{function Le(Ie){Ie.stopPropagation(),Ie.preventDefault(),Re(fe)}const Ve={"onClick:close":Le,onMousedown(Ie){Ie.preventDefault(),Ie.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return createVNode("div",{key:fe.value,class:["v-autocomplete__selection",Be===V.value&&["v-autocomplete__selection--selected",j.value]],style:Be===V.value?q.value:{}},[Ne?_.chip?createVNode(VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:r.closableChips,size:"small",text:fe.title}}},{default:()=>[_.chip?.({item:fe,index:Be,props:Ve})]}):createVNode(VChip,mergeProps({key:"chip",closable:r.closableChips,size:"small",text:fe.title},Ve),null):_.selection?.({item:fe,index:Be})??createVNode("span",{class:"v-autocomplete__selection-text"},[fe.title,r.multiple&&Be<ce.value.length-1&&createVNode("span",{class:"v-autocomplete__selection-comma"},[createTextVNode(",")])])])})]),"append-inner":function(){for(var fe=arguments.length,Be=new Array(fe),Le=0;Le<fe;Le++)Be[Le]=arguments[Le];return createVNode(Fragment,null,[_["append-inner"]?.(...Be),r.menuIcon?createVNode(VIcon,{class:"v-autocomplete__menu-icon",icon:r.menuIcon,onMousedown:ne,onClick:noop$6,"aria-label":x(O.value),title:x(O.value)},null):void 0])}})}),forwardRefs({isFocused:E,isPristine:C,menu:N,search:H,filteredItems:Z,select:Re},S)}}),_sfc_main$1_=defineComponent$1({__name:"ItemNom",props:{langue:{},nom:{},id:{},indiceNom:{},indiceLangue:{},autorisationModification:{type:Boolean}},emits:["changerNom","effacer"],setup(r,{emit:n}){const _=r,{__:x,useI18n:S}=_(),{languesEtCodes:E,nomLangue:C}=x(),{t:T}=S(),B=new Nuchabl({}),A=ref$1(""),I=ref$1("");onMounted(()=>{A.value=_.nom,I.value=_.langue});const N=C(I),V=computed(()=>{if(!A.value?.length||!I.value)return;const F=B.rutzibTzibanem({runuk:I.value});return F&&!A.value.match(new RegExp(F,"g"))?[T("communs.erreurLangue",{langue:N.value})]:void 0}),D=()=>{n("effacer",{id:_.id})},O=()=>{!I.value||!A.value||V.value?.length||A.value.trim()===_.nom.trim()&&I.value===_.langue||n("changerNom",{id:_.id,nom:A.value,lng:I.value})};return watchEffect(()=>{I.value!==_.langue&&O()}),(F,M)=>(openBlock(),createBlock(VListItem,null,{append:withCtx(()=>[F.autorisationModification?(openBlock(),createBlock(VBtn,{key:0,class:"mb-3",icon:"mdi-delete",variant:"text",onClick:D})):createCommentVNode("",!0)]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:"4",class:"pb-0"},{default:withCtx(()=>[createVNode(VAutocomplete,{modelValue:I.value,"onUpdate:modelValue":M[0]||(M[0]=L=>I.value=L),class:"pt-1",density:"compact",variant:"outlined","item-title":"lng","item-value":"code",readonly:!F.autorisationModification,items:unref(E),label:F.indiceLangue},null,8,["modelValue","readonly","items","label"])]),_:1}),createVNode(VCol,{cols:"8",class:"pb-0"},{default:withCtx(()=>[createVNode(VTextField,{modelValue:A.value,"onUpdate:modelValue":M[1]||(M[1]=L=>A.value=L),class:"pt-1",density:"compact",variant:"outlined",readonly:!F.autorisationModification,rules:V.value,label:F.indiceNom,onBlur:O},null,8,["modelValue","readonly","rules","label"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),_hoisted_1$K={key:0,class:"text-center mt-3 text-h6"},_sfc_main$1Z=defineComponent$1({__name:"ListeNoms",props:{nomsInitiaux:{},indiceNom:{},indiceLangue:{},texteAucunNom:{},autorisationModification:{type:Boolean}},emits:["ajusterNoms"],setup(r,{emit:n}){const _=r,{__:x,useI18n:S}=_(),{t:E}=S(),{languesEtCodes:C,nomLangue:T}=x(),B=new Nuchabl({}),A=ref$1({});onMounted(()=>{A.value=Object.fromEntries(Object.entries(_.nomsInitiaux))});const I=ref$1([]);watchEffect(()=>{I.value=Object.entries(A.value).map(([X,J])=>({lng:X,nom:J,id:v4$2()}))});const N=computed(()=>C.value.filter(X=>!I.value.some(J=>J.lng===X.code))),V=()=>{const X=Object.fromEntries(I.value.map(J=>[J.lng,J.nom]));n("ajusterNoms",X)},D=({id:X,nom:J,lng:Z})=>{Z===M.value&&(M.value=void 0),I.value=I.value.filter(ae=>ae.lng!==Z||ae.id===X).map(ae=>ae.id===X?{lng:Z,nom:J,id:ae.id}:ae),V()},O=({id:X})=>{I.value=I.value.filter(J=>J.id!==X),V()},F=ref$1(),M=ref$1(),L=T(M);watchEffect(()=>{M.value===void 0&&(M.value=N.value[0]?.code)});const j=computed(()=>{if(!F.value?.length||!M.value)return;const X=B.rutzibTzibanem({runuk:M.value});return X&&!F.value.match(new RegExp(X,"g"))?[E("communs.erreurLangue",{langue:L.value})]:void 0}),q=computed(()=>!!(M.value&&F.value)&&!j.value?.length),H=()=>{M.value&&F.value&&(j.value?.length||(I.value=[{nom:F.value,lng:M.value,id:v4$2()},...I.value],M.value=void 0,F.value=void 0,V()))};return(X,J)=>(openBlock(),createElementBlock(Fragment,null,[X.autorisationModification?(openBlock(),createBlock(VList,{key:0,class:"pb-0"},{default:withCtx(()=>[createVNode(VListItem,null,{append:withCtx(()=>[createVNode(VBtn,{icon:"mdi-plus",variant:"text",class:"mb-2",disabled:!q.value,onClick:H},null,8,["disabled"])]),default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:"4"},{default:withCtx(()=>[createVNode(VSelect,{modelValue:M.value,"onUpdate:modelValue":J[0]||(J[0]=Z=>M.value=Z),class:"pt-1",density:"compact",variant:"outlined","item-title":"lng","item-value":"code",items:N.value,label:X.indiceLangue},null,8,["modelValue","items","label"])]),_:1}),createVNode(VCol,{cols:"8"},{default:withCtx(()=>[createVNode(VTextField,{modelValue:F.value,"onUpdate:modelValue":J[1]||(J[1]=Z=>F.value=Z),class:"pt-1",density:"compact",variant:"outlined",rules:j.value,label:X.indiceNom,onBlur:H,onKeydown:withKeys(H,["enter"])},null,8,["modelValue","rules","label","onKeydown"])]),_:1})]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0),createVNode(VList,{"max-height":"200",style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VDivider,{class:"mb-2"}),createVNode(VScrollYTransition,{group:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(I.value,Z=>(openBlock(),createBlock(_sfc_main$1_,{id:Z.id,key:Z.id,langue:Z.lng,nom:Z.nom,"indice-langue":X.indiceLangue,"indice-nom":X.indiceNom,"autorisation-modification":X.autorisationModification,onChangerNom:D,onEffacer:O},null,8,["id","langue","nom","indice-langue","indice-nom","autorisation-modification"]))),128)),I.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_1$K,toDisplayString$1(X.texteAucunNom),1))]),_:1})]),_:1})],64))}}),ouvrirLien=r=>{window.open(r)};async function copier(r){await navigator.clipboard?.writeText(r)}function couleurScore(r){return r===null?{couleur:"#666666",note:"?"}:(r*=100,r>=95?{couleur:"#1e7145",note:"A"}:r>=90?{couleur:"#00a300",note:"A-"}:r>=85?{couleur:"#99b433",note:"B"}:r>=80?{couleur:"#ffc40d",note:"B-"}:r>=70?{couleur:"#e3a21a",note:"C+"}:r>=60?{couleur:"#da532c",note:"C"}:r>=55?{couleur:"#ee1111",note:"D"}:{couleur:"#b91d47",note:"F"})}const couper=(r,n,_)=>r.length<=n?r:r.slice(0,20)+_,ajusterTexteTraductible=({anciennes:r,nouvelles:n})=>{const _=Object.keys(r).filter(S=>!Object.keys(n).includes(S)),x=Object.fromEntries(Object.entries(n).filter(([S,E])=>r[S]!==E));return{Effacer:_,Ajouter:x}},VTooltip$1="",makeVTooltipProps=propsFactory({id:String,text:String,...omit(makeVOverlayProps({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),VTooltip=genericComponent()({name:"VTooltip",props:makeVTooltipProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{slots:_}=n;const x=useProxiedModel(r,"modelValue"),{scopeId:S}=useScopeId(),E=getUid(),C=computed(()=>r.id||`v-tooltip-${E}`),T=ref$1(),B=computed(()=>r.location.split(" ").length>1?r.location:r.location+" center"),A=computed(()=>r.origin==="auto"||r.origin==="overlap"||r.origin.split(" ").length>1||r.location.split(" ").length>1?r.origin:r.origin+" center"),I=computed(()=>r.transition?r.transition:x.value?"scale-transition":"fade-transition"),N=computed(()=>mergeProps({"aria-describedby":C.value},r.activatorProps));return useRender(()=>{const[V]=VOverlay.filterProps(r);return createVNode(VOverlay,mergeProps({ref:T,class:["v-tooltip",r.class],style:r.style,id:C.value},V,{modelValue:x.value,"onUpdate:modelValue":D=>x.value=D,transition:I.value,absolute:!0,location:B.value,origin:A.value,persistent:!0,role:"tooltip",activatorProps:N.value,_disableGlobalStack:!0},S),{activator:_.activator,default:function(){for(var D=arguments.length,O=new Array(D),F=0;F<D;F++)O[F]=arguments[F];return _.default?.(...O)??r.text}})}),forwardRefs({},T)}}),_sfc_main$1Y=defineComponent$1({__name:"LienObjet",props:{id:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),S=ref$1(!1),E=async()=>{await copier(n.id),S.value=!0};return(C,T)=>(openBlock(),createBlock(VMenu,null,{activator:withCtx(({props:B})=>[createVNode(VTooltip,{text:unref(x)("lienObjet.indice")},{activator:withCtx(({props:A})=>[createVNode(VBtn,mergeProps(mergeProps(B,A),{icon:"mdi-link",size:"small",variant:"flat"}),null,16)]),_:2},1032,["text"])]),default:withCtx(()=>[createVNode(VList,{onClick:T[0]||(T[0]=withModifiers(()=>{},["stop"]))},{default:withCtx(()=>[createVNode(VListItem,null,{title:withCtx(()=>[createTextVNode(toDisplayString$1(C.id),1)]),append:withCtx(()=>[createVNode(VBtn,{icon:S.value?"mdi-check":"mdi-content-copy",size:"small",variant:"flat",onClick:E},null,8,["icon"])]),_:1})]),_:1})]),_:1}))}}),_sfc_main$1X=defineComponent$1({__name:"ItemMembre",props:{compte:{},montrerAnonymes:{type:Boolean}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=ref$1({}),T=E(C);enregistrercoute(_?.profil.suivreNoms({idCompte:n.compte,f:A=>C.value=A}));const B=computed(()=>n.montrerAnonymes||T.value);return(A,I)=>withDirectives((openBlock(),createBlock(VListItem,{class:"text-start",density:"compact"},{prepend:withCtx(()=>[createVNode(_sfc_main$24,{id:A.compte},null,8,["id"])]),title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(T)||unref(S)("communs.anonyme")),1)]),append:withCtx(()=>[createVNode(_sfc_main$1Y,{id:A.compte},null,8,["id"])]),_:1},512)),[[vShow,B.value]])}}),_sfc_main$1W=defineComponent$1({__name:"JetonMembre",props:{compte:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=ref$1({}),T=E(C);enregistrercoute(_?.profil.suivreNoms({idCompte:n.compte,f:D=>C.value=D}));const B=ref$1();enregistrercoute(_?.suivreIdCompte({f:D=>B.value=D}));const A=ref$1(0);enregistrercoute(_?.rseau?.suivreConfianceMonRseauPourMembre({idCompte:n.compte,f:D=>A.value=D,profondeur:5}));const I=computed(()=>A.value<0?S("membres.confiance.bloqu"):A.value===0?S("membres.confiance.inconnu"):A.value<.33?S("membres.confiance.peuDinteraction"):A.value<.67?S("membres.confiance.interactionMoyenne"):A.value<1?S("membres.confiance.beaucoupDinteraction"):A.value===1?n.compte===B.value?S("membres.moi"):S("membres.confiance.connaissance"):""),N=computed(()=>A.value<0?"mdi-cancel":n.compte===B.value?"mdi-check":"mdi-hands-pray"),V=computed(()=>A.value<0?"error":A.value===1?"success":`rgba(22, 151, 246, ${.1+A.value*.9})`);return(D,O)=>(openBlock(),createBlock(VChip,{variant:"outlined",class:"me-2 mb-2"},{append:withCtx(()=>[createVNode(VTooltip,{text:I.value,location:"bottom"},{activator:withCtx(({props:F})=>[createVNode(VIcon,mergeProps(F,{color:V.value,size:"small",end:""}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(N.value),1)]),_:2},1040,["color"])]),_:1},8,["text"]),renderSlot(D.$slots,"post")]),default:withCtx(()=>[createVNode(_sfc_main$24,{id:D.compte,start:""},null,8,["id"]),createTextVNode(" "+toDisplayString$1(unref(T)||unref(S)("communs.anonyme"))+" ",1)]),_:3}))}}),VCard$1="",VCardActions=genericComponent()({name:"VCardActions",props:makeComponentProps(),setup(r,n){let{slots:_}=n;return provideDefaults({VBtn:{variant:"text"}}),useRender(()=>createVNode("div",{class:["v-card-actions",r.class],style:r.style},[_.default?.()])),{}}}),VCardSubtitle=createSimpleFunctional("v-card-subtitle"),VCardTitle=createSimpleFunctional("v-card-title"),makeCardItemProps=propsFactory({appendAvatar:String,appendIcon:IconValue,prependAvatar:String,prependIcon:IconValue,subtitle:String,title:String,...makeComponentProps(),...makeDensityProps()},"VCardItem"),VCardItem=genericComponent()({name:"VCardItem",props:makeCardItemProps(),setup(r,n){let{slots:_}=n;return useRender(()=>{const x=!!(r.prependAvatar||r.prependIcon),S=!!(x||_.prepend),E=!!(r.appendAvatar||r.appendIcon),C=!!(E||_.append),T=!!(r.title||_.title),B=!!(r.subtitle||_.subtitle);return createVNode("div",{class:["v-card-item",r.class],style:r.style},[S&&createVNode("div",{key:"prepend",class:"v-card-item__prepend"},[_.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!x,defaults:{VAvatar:{density:r.density,icon:r.prependIcon,image:r.prependAvatar}}},_.prepend):x&&createVNode(VAvatar,{key:"prepend-avatar",density:r.density,icon:r.prependIcon,image:r.prependAvatar},null)]),createVNode("div",{class:"v-card-item__content"},[T&&createVNode(VCardTitle,{key:"title"},{default:()=>[_.title?.()??r.title]}),B&&createVNode(VCardSubtitle,{key:"subtitle"},{default:()=>[_.subtitle?.()??r.subtitle]}),_.default?.()]),C&&createVNode("div",{key:"append",class:"v-card-item__append"},[_.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!E,defaults:{VAvatar:{density:r.density,icon:r.appendIcon,image:r.appendAvatar}}},_.append):E&&createVNode(VAvatar,{key:"append-avatar",density:r.density,icon:r.appendIcon,image:r.appendAvatar},null)])])}),{}}}),VCardText=createSimpleFunctional("v-card-text"),makeVCardProps=propsFactory({appendAvatar:String,appendIcon:IconValue,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:IconValue,ripple:{type:[Boolean,Object],default:!0},subtitle:String,text:String,title:String,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeLoaderProps(),...makeLocationProps(),...makePositionProps(),...makeRoundedProps(),...makeRouterProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"elevated"})},"VCard"),VCard=genericComponent()({name:"VCard",directives:{Ripple},props:makeVCardProps(),setup(r,n){let{attrs:_,slots:x}=n;const{themeClasses:S}=provideTheme(r),{borderClasses:E}=useBorder(r),{colorClasses:C,colorStyles:T,variantClasses:B}=useVariant(r),{densityClasses:A}=useDensity(r),{dimensionStyles:I}=useDimension(r),{elevationClasses:N}=useElevation(r),{loaderClasses:V}=useLoader(r),{locationStyles:D}=useLocation(r),{positionClasses:O}=usePosition(r),{roundedClasses:F}=useRounded(r),M=useLink$1(r,_),L=computed(()=>r.link!==!1&&M.isLink.value),j=computed(()=>!r.disabled&&r.link!==!1&&(r.link||M.isClickable.value));return useRender(()=>{const q=L.value?"a":r.tag,H=!!(x.title||r.title),X=!!(x.subtitle||r.subtitle),J=H||X,Z=!!(x.append||r.appendAvatar||r.appendIcon),ae=!!(x.prepend||r.prependAvatar||r.prependIcon),ce=!!(x.image||r.image),ve=J||ae||Z,pe=!!(x.text||r.text);return withDirectives(createVNode(q,{class:["v-card",{"v-card--disabled":r.disabled,"v-card--flat":r.flat,"v-card--hover":r.hover&&!(r.disabled||r.flat),"v-card--link":j.value},S.value,E.value,C.value,A.value,N.value,V.value,O.value,F.value,B.value,r.class],style:[T.value,I.value,D.value,r.style],href:M.href.value,onClick:j.value&&M.navigate,tabindex:r.disabled?-1:void 0},{default:()=>[ce&&createVNode("div",{key:"image",class:"v-card__image"},[x.image?createVNode(VDefaultsProvider,{key:"image-defaults",disabled:!r.image,defaults:{VImg:{cover:!0,src:r.image}}},x.image):createVNode(VImg,{key:"image-img",cover:!0,src:r.image},null)]),createVNode(LoaderSlot,{name:"v-card",active:!!r.loading,color:typeof r.loading=="boolean"?void 0:r.loading},{default:x.loader}),ve&&createVNode(VCardItem,{key:"item",prependAvatar:r.prependAvatar,prependIcon:r.prependIcon,title:r.title,subtitle:r.subtitle,appendAvatar:r.appendAvatar,appendIcon:r.appendIcon},{default:x.item,prepend:x.prepend,title:x.title,subtitle:x.subtitle,append:x.append}),pe&&createVNode(VCardText,{key:"text"},{default:()=>[x.text?.()??r.text]}),x.default?.(),x.actions&&createVNode(VCardActions,null,{default:x.actions}),genOverlays(j.value,"v-card")]}),[[resolveDirective("ripple"),j.value&&r.ripple]])}),{}}}),VDialog$1="",makeVDialogProps=propsFactory({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...makeVOverlayProps({origin:"center center",scrollStrategy:"block",transition:{component:VDialogTransition},zIndex:2400})},"VDialog"),VDialog=genericComponent()({name:"VDialog",props:makeVDialogProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{slots:_}=n;const x=useProxiedModel(r,"modelValue"),{scopeId:S}=useScopeId(),E=ref$1();function C(B){const A=B.relatedTarget,I=B.target;if(A!==I&&E.value?.contentEl&&E.value?.globalTop&&![document,E.value.contentEl].includes(I)&&!E.value.contentEl.contains(I)){const N=focusableChildren(E.value.contentEl);if(!N.length)return;const V=N[0],D=N[N.length-1];A===V?D.focus():V.focus()}}IN_BROWSER&&watch(()=>x.value&&r.retainFocus,B=>{B?document.addEventListener("focusin",C):document.removeEventListener("focusin",C)},{immediate:!0}),watch(x,async B=>{await nextTick$2(),B?E.value.contentEl?.focus({preventScroll:!0}):E.value.activatorEl?.focus({preventScroll:!0})});const T=computed(()=>mergeProps({"aria-haspopup":"dialog","aria-expanded":String(x.value)},r.activatorProps));return useRender(()=>{const[B]=VOverlay.filterProps(r);return createVNode(VOverlay,mergeProps({ref:E,class:["v-dialog",{"v-dialog--fullscreen":r.fullscreen,"v-dialog--scrollable":r.scrollable},r.class],style:r.style},B,{modelValue:x.value,"onUpdate:modelValue":A=>x.value=A,"aria-modal":"true",activatorProps:T.value,role:"dialog"},S),{activator:_.activator,default:function(){for(var A=arguments.length,I=new Array(A),N=0;N<A;N++)I[N]=arguments[N];return createVNode(VDefaultsProvider,{root:"VDialog"},{default:()=>[_.default?.(...I)]})}})}),forwardRefs({},E)}}),VWindow$1="",handleGesture=r=>{const{touchstartX:n,touchendX:_,touchstartY:x,touchendY:S}=r,E=.5,C=16;r.offsetX=_-n,r.offsetY=S-x,Math.abs(r.offsetY)<E*Math.abs(r.offsetX)&&(r.left&&_<n-C&&r.left(r),r.right&&_>n+C&&r.right(r)),Math.abs(r.offsetX)<E*Math.abs(r.offsetY)&&(r.up&&S<x-C&&r.up(r),r.down&&S>x+C&&r.down(r))};function touchstart(r,n){const _=r.changedTouches[0];n.touchstartX=_.clientX,n.touchstartY=_.clientY,n.start?.({originalEvent:r,...n})}function touchend(r,n){const _=r.changedTouches[0];n.touchendX=_.clientX,n.touchendY=_.clientY,n.end?.({originalEvent:r,...n}),handleGesture(n)}function touchmove(r,n){const _=r.changedTouches[0];n.touchmoveX=_.clientX,n.touchmoveY=_.clientY,n.move?.({originalEvent:r,...n})}function createHandlers(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:r.left,right:r.right,up:r.up,down:r.down,start:r.start,move:r.move,end:r.end};return{touchstart:_=>touchstart(_,n),touchend:_=>touchend(_,n),touchmove:_=>touchmove(_,n)}}function mounted(r,n){const _=n.value,x=_?.parent?r.parentElement:r,S=_?.options??{passive:!0},E=n.instance?.$.uid;if(!x||!E)return;const C=createHandlers(n.value);x._touchHandlers=x._touchHandlers??Object.create(null),x._touchHandlers[E]=C,keys$3(C).forEach(T=>{x.addEventListener(T,C[T],S)})}function unmounted(r,n){const _=n.value?.parent?r.parentElement:r,x=n.instance?.$.uid;if(!_?._touchHandlers||!x)return;const S=_._touchHandlers[x];keys$3(S).forEach(E=>{_.removeEventListener(E,S[E])}),delete _._touchHandlers[x]}const Touch={mounted,unmounted},Touch$1=Touch,VWindowSymbol=Symbol.for("vuetify:v-window"),VWindowGroupSymbol=Symbol.for("vuetify:v-window-group"),makeVWindowProps=propsFactory({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:r=>typeof r=="boolean"||r==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...makeComponentProps(),...makeTagProps(),...makeThemeProps()},"VWindow"),VWindow=genericComponent()({name:"VWindow",directives:{Touch},props:makeVWindowProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{slots:_}=n;const{themeClasses:x}=provideTheme(r),{isRtl:S}=useRtl(),{t:E}=useLocale(),C=useGroup(r,VWindowGroupSymbol),T=ref$1(),B=computed(()=>S.value?!r.reverse:r.reverse),A=shallowRef(!1),I=computed(()=>{const H=r.direction==="vertical"?"y":"x",J=(B.value?!A.value:A.value)?"-reverse":"";return`v-window-${H}${J}-transition`}),N=shallowRef(0),V=ref$1(void 0),D=computed(()=>C.items.value.findIndex(H=>C.selected.value.includes(H.id)));watch(D,(H,X)=>{const J=C.items.value.length,Z=J-1;J<=2?A.value=H<X:H===Z&&X===0?A.value=!0:H===0&&X===Z?A.value=!1:A.value=H<X}),provide(VWindowSymbol,{transition:I,isReversed:A,transitionCount:N,transitionHeight:V,rootRef:T});const O=computed(()=>r.continuous||D.value!==0),F=computed(()=>r.continuous||D.value!==C.items.value.length-1);function M(){O.value&&C.prev()}function L(){F.value&&C.next()}const j=computed(()=>{const H=[],X={icon:S.value?r.nextIcon:r.prevIcon,class:`v-window__${B.value?"right":"left"}`,onClick:C.prev,ariaLabel:E("$vuetify.carousel.prev")};H.push(O.value?_.prev?_.prev({props:X}):createVNode(VBtn,X,null):createVNode("div",null,null));const J={icon:S.value?r.prevIcon:r.nextIcon,class:`v-window__${B.value?"left":"right"}`,onClick:C.next,ariaLabel:E("$vuetify.carousel.next")};return H.push(F.value?_.next?_.next({props:J}):createVNode(VBtn,J,null):createVNode("div",null,null)),H}),q=computed(()=>r.touch===!1?r.touch:{...{left:()=>{B.value?M():L()},right:()=>{B.value?L():M()},start:X=>{let{originalEvent:J}=X;J.stopPropagation()}},...r.touch===!0?{}:r.touch});return useRender(()=>withDirectives(createVNode(r.tag,{ref:T,class:["v-window",{"v-window--show-arrows-on-hover":r.showArrows==="hover"},x.value,r.class],style:r.style},{default:()=>[createVNode("div",{class:"v-window__container",style:{height:V.value}},[_.default?.({group:C}),r.showArrows!==!1&&createVNode("div",{class:"v-window__controls"},[j.value])]),_.additional?.({group:C})]}),[[resolveDirective("touch"),q.value]])),{group:C}}}),makeVWindowItemProps=propsFactory({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...makeComponentProps(),...makeGroupItemProps(),...makeLazyProps()},"VWindowItem"),VWindowItem=genericComponent()({name:"VWindowItem",directives:{Touch:Touch$1},props:makeVWindowItemProps(),emits:{"group:selected":r=>!0},setup(r,n){let{slots:_}=n;const x=inject$1(VWindowSymbol),S=useGroupItem(r,VWindowGroupSymbol),{isBooted:E}=useSsrBoot();if(!x||!S)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const C=shallowRef(!1),T=computed(()=>E.value&&(x.isReversed.value?r.reverseTransition!==!1:r.transition!==!1));function B(){!C.value||!x||(C.value=!1,x.transitionCount.value>0&&(x.transitionCount.value-=1,x.transitionCount.value===0&&(x.transitionHeight.value=void 0)))}function A(){C.value||!x||(C.value=!0,x.transitionCount.value===0&&(x.transitionHeight.value=convertToUnit(x.rootRef.value?.clientHeight)),x.transitionCount.value+=1)}function I(){B()}function N(O){C.value&&nextTick$2(()=>{!T.value||!C.value||!x||(x.transitionHeight.value=convertToUnit(O.clientHeight))})}const V=computed(()=>{const O=x.isReversed.value?r.reverseTransition:r.transition;return T.value?{name:typeof O!="string"?x.transition.value:O,onBeforeEnter:A,onAfterEnter:B,onEnterCancelled:I,onBeforeLeave:A,onAfterLeave:B,onLeaveCancelled:I,onEnter:N}:!1}),{hasContent:D}=useLazy(r,S.isSelected);return useRender(()=>createVNode(MaybeTransition,{transition:V.value,disabled:!E.value},{default:()=>[withDirectives(createVNode("div",{class:["v-window-item",S.selectedClass.value,r.class],style:r.style},[D.value&&_.default?.()]),[[vShow,S.isSelected.value]])]})),{groupItem:S}}}),_hoisted_1$J={class:"text-center"},_hoisted_2$w={class:"mt-3 text-center text-caption"},_hoisted_3$k={class:"mb-4"},_hoisted_4$a={class:"my-3 text-disabled"},_hoisted_5$9={class:"mb-4"},_hoisted_6$8={class:"mb-4"},_hoisted_7$4={class:"mb-4"},_hoisted_8$4={class:"mb-4"},_hoisted_9$4={key:0,class:"text-center"},_hoisted_10$2={key:1,class:"text-center"},_hoisted_11$2={class:"text-center"},_hoisted_12$1={class:"text-h6 font-weight-light mb-2"},_hoisted_13={class:"text-caption text-grey"},_sfc_main$1V=defineComponent$1({__name:"InitialiserCompte",setup(r){const{useI18n:n}=_(),{t:_}=n(),{mdAndUp:x}=useDisplay(),{obtImageDco:S}=utiliserImagesDco(),E=inject$1("constl"),C=ref$1(!1),T=ref$1(0),B=["cheminement","noms","image","compteRejoindre","motDePasse","persister","cestParti"],A=ref$1(),I=()=>{switch(B[T.value]){case"image":T.value=B.indexOf(isBrowser$1?"persister":"cestParti");break;case"motDePasse":T.value=B.indexOf(isBrowser$1?"persister":"cestParti");break;default:T.value++;break}},N=()=>{switch(B[T.value]){case"compteRejoindre":T.value=B.indexOf("cheminement");break;case"cestParti":T.value=B.indexOf(isBrowser$1?"persister":A.value==="connecter"?"motDePasse":"image");break;case"persister":T.value=B.indexOf(A.value==="connecter"?"motDePasse":"image");break;default:T.value--;break}},V=computed(()=>{switch(B[T.value]){case"cheminement":return{actif:!1,visible:!1};case"noms":return{actif:Object.keys(j.value).length>0,visible:!0};case"compteRejoindre":return{actif:!!ce.value,visible:!0};case"motDePasse":return{actif:!!ae.value,visible:!0};case"cestParti":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),D=computed(()=>{switch(B[T.value]){case"cheminement":return{actif:!1,visible:!1};case"cestParti":return{actif:!ee.value,visible:!0};default:return{actif:!0,visible:!0}}}),O=()=>{A.value="nouveau",T.value=B.indexOf("noms")},F=()=>{A.value="connecter",T.value=B.indexOf("compteRejoindre")},M=computed(()=>{switch(B[T.value]){case"cheminement":return _("accueil.initialiserCompte.titreCheminement");case"noms":return _("accueil.initialiserCompte.titreNoms");case"image":return _("accueil.initialiserCompte.titreImage");case"compteRejoindre":return _("accueil.initialiserCompte.titreCompteRejoindre");case"motDePasse":return _("accueil.initialiserCompte.titreMotDePasse");case"persister":return _("accueil.initialiserCompte.titrePersister");case"cestParti":return _("accueil.initialiserCompte.titreCestParti");default:return""}}),L=computed(()=>{switch(B[T.value]){case"cheminement":return _("accueil.initialiserCompte.sousTitreCheminement");case"noms":return _("accueil.initialiserCompte.sousTitreNoms");default:return""}}),j=ref$1({}),q=ie=>{j.value=ie},H=ref$1(),X=computed(()=>{if(H.value)return URL.createObjectURL(new Blob([H.value.contenu],{type:"image"}))}),J=S("profil"),Z=ie=>{H.value=ie},ae=ref$1(),ce=ref$1(),ve=ref$1([]),pe=ref$1([]),G=ref$1();enregistrercoute(E?.rseau?.suivreConnexionsPostesSFIP({f:ie=>pe.value=ie})),enregistrercoute(E?.suivreIdCompte({f:ie=>G.value=ie})),enregistrercoute(E?.rseau?.suivreComptesRseauEtEnLigne({f:ie=>ve.value=ie.filter(ne=>ne.idCompte!==G.value),profondeur:1/0}));const Y=async()=>{await navigator.storage.persist()&&(I(),U.value=!0)},U=ref$1(!1);navigator.storage.persisted().then(ie=>U.value=ie);const W=ref$1();__vitePreload(()=>import("./logo-43f5caa3.js"),[]).then(ie=>W.value=ie.default);const ee=ref$1(!1),re=async()=>{if(ee.value=!0,!!E){if(A.value==="nouveau"){for(const[ie,ne]of Object.entries(j.value))await E.profil?.sauvegarderNom({langue:ie,nom:ne});if(H.value){const{contenu:ie,fichier:ne}=H.value;await E.profil?.sauvegarderImage({image:{content:ie,path:ne}})}}else{if(!ce.value||!ae.value)return;await E.demanderEtPuisRejoindreCompte({idCompte:ce.value,codeSecret:ae.value})}ee.value=!1}},oe=ref$1();return E?.suivreIdCompte({f:ie=>oe.value=ie}),(ie,ne)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":ne[8]||(ne[8]=te=>C.value=te)},{activator:withCtx(({props:te})=>[renderSlot(ie.$slots,"activator",normalizeProps(guardReactiveProps({props:te})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","min-width":unref(x)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(M.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(L.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:T.value,"onUpdate:modelValue":ne[7]||(ne[7]=te=>T.value=te),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$J,[createVNode(VBtn,{class:"ma-3",variant:"flat",color:"primary",onClick:O},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("accueil.initialiserCompte.nouveauCompte")),1)]),_:1}),createVNode(VBtn,{class:"ma-3",variant:"outlined",onClick:F},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("accueil.initialiserCompte.connecter")),1)]),_:1})])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"noms-initiaux":j.value,"indice-nom":unref(_)("listeNomsProfil.indiceNom"),"indice-langue":unref(_)("communs.indiceLangue"),"texte-aucun-nom":unref(_)("communs.texteAucunNom"),"autorisation-modification":"",onAjusterNoms:q},null,8,["noms-initiaux","indice-nom","indice-langue","texte-aucun-nom"])]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(ImageEditable,{editable:!0,"src-image":X.value,"img-defaut":unref(J),"max-taille-image":unref(MAX_TAILLE_IMAGE$4),"taille-avatar":150,onImageChangee:ne[0]||(ne[0]=te=>Z(te))},null,8,["src-image","img-defaut","max-taille-image"]),createBaseVNode("p",_hoisted_2$w,toDisplayString$1(unref(_)("accueil.initialiserCompte.texteImage")),1)]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(VFadeTransition,null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",null,[createBaseVNode("p",_hoisted_3$k,toDisplayString$1(unref(_)("accueil.initialiserCompte.texteCompteRejoindre")),1),createVNode(VSelect,{modelValue:ce.value,"onUpdate:modelValue":ne[1]||(ne[1]=te=>ce.value=te),items:ve.value.map(te=>te.idCompte),loading:!ve.value.length,disabled:!ve.value.length,label:unref(_)("accueil.initialiserCompte.indiceCompte"),variant:"outlined"},{selection:withCtx(({item:te})=>[createVNode(_sfc_main$1W,{compte:te.value},null,8,["compte"])]),item:withCtx(({item:te,props:K})=>[createVNode(_sfc_main$1X,mergeProps(K,{compte:te.value,"montrer-anonymes":!0,simple:""}),null,16,["compte"])]),_:1},8,["modelValue","items","loading","disabled","label"]),createBaseVNode("p",_hoisted_4$a,toDisplayString$1((ve.value.length?unref(_)("accueil.initialiserCompte.indiceComptePasVu"):unref(_)("accueil.initialiserCompte.indiceRechercheComptes"))+unref(_)("accueil.initialiserCompte.indiceEssaieDeConnecter")),1)],512),[[vShow,pe.value.length]])]),_:1}),createVNode(VFadeTransition,null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",null,toDisplayString$1(unref(_)("accueil.initialiserCompte.texteEnConnexion")),513),[[vShow,!pe.value.length]])]),_:1})]),_:1}),createVNode(VWindowItem,{value:4},{default:withCtx(()=>[createBaseVNode("p",_hoisted_5$9,toDisplayString$1(unref(_)("accueil.initialiserCompte.texteCodeSecret")),1),createVNode(VTextField,{modelValue:ae.value,"onUpdate:modelValue":ne[2]||(ne[2]=te=>ae.value=te),label:unref(_)("accueil.initialiserCompte.indiceCodeSecret"),variant:"outlined"},null,8,["modelValue","label"])]),_:1}),createVNode(VWindowItem,{value:5},{default:withCtx(()=>[createBaseVNode("p",_hoisted_6$8,toDisplayString$1(unref(_)("accueil.initialiserCompte.textePersister.1")),1),createBaseVNode("p",_hoisted_7$4,toDisplayString$1(unref(_)("accueil.initialiserCompte.textePersister.2")),1),createBaseVNode("p",_hoisted_8$4,toDisplayString$1(unref(_)("accueil.initialiserCompte.textePersister.3")),1),U.value?(openBlock(),createElementBlock("div",_hoisted_9$4,[createVNode(VBtn,{class:"mt-3 mx-3",variant:"outlined",onClick:ne[3]||(ne[3]=te=>T.value++)},{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1}),createTextVNode(" "+toDisplayString$1(unref(_)("accueil.initialiserCompte.djPersistes")),1)]),_:1})])):(openBlock(),createElementBlock("div",_hoisted_10$2,[createVNode(VBtn,{class:"mt-3 mx-3",color:"primary",variant:"flat",onClick:ne[4]||(ne[4]=()=>Y())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("accueil.initialiserCompte.persister")),1)]),_:1}),createVNode(VBtn,{class:"mt-3 mx-3",variant:"outlined",onClick:ne[5]||(ne[5]=te=>T.value++)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("accueil.initialiserCompte.pasPersister")),1)]),_:1})]))]),_:1}),createVNode(VWindowItem,{value:6},{default:withCtx(()=>[createVNode(VImg,{class:"mb-4",contain:"",height:"128",src:W.value},null,8,["src"]),createBaseVNode("div",_hoisted_11$2,[createBaseVNode("h3",_hoisted_12$1,toDisplayString$1(unref(_)("accueil.initialiserCompte.bienvenu")),1),createBaseVNode("span",_hoisted_13,toDisplayString$1(unref(_)("accueil.initialiserCompte.sousTitreBienvenu")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:ee.value,onClick:ne[6]||(ne[6]=()=>re())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("accueil.initialiserCompte.cestParti")),1)]),_:1},8,["loading"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!D.value.actif,onClick:N},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,D.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!V.value.actif,onClick:I},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,V.value.visible]])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),VFooter$1="",makeVFooterProps=propsFactory({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...makeBorderProps(),...makeComponentProps(),...makeElevationProps(),...makeLayoutItemProps(),...makeRoundedProps(),...makeTagProps({tag:"footer"}),...makeThemeProps()},"VFooter"),VFooter=genericComponent()({name:"VFooter",props:makeVFooterProps(),setup(r,n){let{slots:_}=n;const{themeClasses:x}=provideTheme(r),{backgroundColorClasses:S,backgroundColorStyles:E}=useBackgroundColor(toRef(r,"color")),{borderClasses:C}=useBorder(r),{elevationClasses:T}=useElevation(r),{roundedClasses:B}=useRounded(r),A=shallowRef(32),{resizeRef:I}=useResizeObserver(D=>{D.length&&(A.value=D[0].target.clientHeight)}),N=computed(()=>r.height==="auto"?A.value:parseInt(r.height,10)),{layoutItemStyles:V}=useLayoutItem({id:r.name,order:computed(()=>parseInt(r.order,10)),position:computed(()=>"bottom"),layoutSize:N,elementSize:computed(()=>r.height==="auto"?void 0:N.value),active:computed(()=>r.app),absolute:toRef(r,"absolute")});return useRender(()=>createVNode(r.tag,{ref:I,class:["v-footer",x.value,S.value,C.value,T.value,B.value,r.class],style:[E.value,r.app?V.value:{height:convertToUnit(r.height)},r.style]},_)),{}}}),_hoisted_1$I={class:"text-subtitle-1 text-disabled"},_hoisted_2$v={class:"my-6",style:{height:"150px"}},_hoisted_3$j={class:"text-disabled"},_sfc_main$1U=defineComponent$1({__name:"AccueilInitial",emits:["entrer"],setup(r,{emit:n}){const{mdAndUp:_}=useDisplay(),{useI18n:x}=_(),{t:S}=x(),E=inject$1("constl"),C="0.2.2",{formatterVersion:T}=utiliserNumration(),B=T(C),A=()=>n("entrer"),I=ref$1(3),N=ref$1(2),V=ref$1(!1);onMounted(()=>{setTimeout(()=>V.value=!0,(I.value+N.value)*1e3)});const D=ref$1(!1);E?.obtIdCompte().then(()=>D.value=!0);const O=ref$1();return enregistrercoute(E?.profil.suivreNoms({f:F=>O.value=F})),watchEffect(()=>{V.value&&O.value&&Object.keys(O.value).length&&A()}),(F,M)=>(openBlock(),createElementBlock("div",null,[createVNode(VContainer,{class:"text-center",style:{height:"100%"}},{default:withCtx(()=>[createVNode(VRow,{align:"center","no-gutters":"",style:{height:"80%"}},{default:withCtx(()=>[createVNode(VCol,null,{default:withCtx(()=>[createVNode(_sfc_main$20,{largeur:unref(_)?500:250,delai:I.value,debut:N.value},null,8,["largeur","delai","debut"]),createBaseVNode("h1",{class:normalizeClass(["mt-6",unref(_)?"text-h1":"text-h3"])},toDisplayString$1(unref(S)("communs.constellation")),3),createBaseVNode("p",_hoisted_1$I,toDisplayString$1(unref(S)("accueil.version",{version:unref(B)})),1),createBaseVNode("div",_hoisted_2$v,[createVNode(_sfc_main$1V,null,{activator:withCtx(({props:L})=>[createVNode(VFadeTransition,mergeProps(L,{"leave-absolute":""}),{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"outlined"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("accueil.dmarrer")),1)]),_:1},512),[[vShow,V.value&&D.value]])]),_:2},1040)]),_:1})])]),_:1})]),_:1})]),_:1}),createVNode(VFooter,null,{default:withCtx(()=>[createVNode(VContainer,{class:"text-center",style:{height:"100%"}},{default:withCtx(()=>[createBaseVNode("p",_hoisted_3$j,toDisplayString$1(unref(S)("accueil.piedDePage")),1)]),_:1})]),_:1})]))}}),_sfc_main$1T=defineComponent$1({__name:"ItemLangueProgrs",props:{code:{},selectionnee:{type:Boolean}},setup(r){const n=r,{__:_,__:x}=_(),{nomLangue:S}=_(),{_:E}=x({:n.code,:""}),C=computed(()=>(E.value?.||0)/(E.value?.||0)),T=S(n.code).value;return(B,A)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[B.selectionnee?(openBlock(),createBlock(VIcon,{key:0,color:"primary"},{default:withCtx(()=>[createTextVNode(" mdi-check-bold ")]),_:1})):createCommentVNode("",!0)]),title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(T)||B.code),1)]),append:withCtx(()=>[C.value===1?(openBlock(),createBlock(VIcon,{key:0,color:"primary"},{default:withCtx(()=>[createTextVNode(" mdi-check-circle ")]),_:1})):(openBlock(),createBlock(VProgressCircular,{key:1,"model-value":C.value*100,size:"20",color:"primary"},null,8,["model-value"]))]),_:1}))}}),_sfc_main$1S=defineComponent$1({__name:"JetonLangue",props:{code:{}},setup(r){const n=r,{__:_,__:x}=_(),{nomLangue:S}=_(),{_:E}=x({:n.code,:""}),C=computed(()=>(E.value?.||0)/(E.value?.||0)),T=S(n.code).value;return(B,A)=>(openBlock(),createBlock(VChip,{variant:"outlined",size:"small"},{append:withCtx(()=>[C.value===1?(openBlock(),createBlock(VIcon,{key:0,end:"",color:"primary"},{default:withCtx(()=>[createTextVNode(" mdi-check-circle ")]),_:1})):(openBlock(),createBlock(VIcon,{key:1,end:""},{default:withCtx(()=>[createVNode(VProgressCircular,{"model-value":C.value*100,size:"15",color:"primary"},null,8,["model-value"])]),_:1}))]),default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(T)||B.code)+" ",1)]),_:1}))}}),VBadge$1="",makeVBadgeProps=propsFactory({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:IconValue,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...makeComponentProps(),...makeLocationProps({location:"top end"}),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeTransitionProps$1({transition:"scale-rotate-transition"})},"VBadge"),VBadge=genericComponent()({name:"VBadge",inheritAttrs:!1,props:makeVBadgeProps(),setup(r,n){const{backgroundColorClasses:_,backgroundColorStyles:x}=useBackgroundColor(toRef(r,"color")),{roundedClasses:S}=useRounded(r),{t:E}=useLocale(),{textColorClasses:C,textColorStyles:T}=useTextColor(toRef(r,"textColor")),{themeClasses:B}=useTheme(),{locationStyles:A}=useLocation(r,!0,I=>(r.floating?r.dot?2:4:r.dot?8:12)+(["top","bottom"].includes(I)?+(r.offsetY??0):["left","right"].includes(I)?+(r.offsetX??0):0));return useRender(()=>{const I=Number(r.content),N=!r.max||isNaN(I)?r.content:I<=+r.max?I:`${r.max}+`,[V,D]=pick$1(n.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return createVNode(r.tag,mergeProps({class:["v-badge",{"v-badge--bordered":r.bordered,"v-badge--dot":r.dot,"v-badge--floating":r.floating,"v-badge--inline":r.inline},r.class]},D,{style:r.style}),{default:()=>[createVNode("div",{class:"v-badge__wrapper"},[n.slots.default?.(),createVNode(MaybeTransition,{transition:r.transition},{default:()=>[withDirectives(createVNode("span",mergeProps({class:["v-badge__badge",B.value,_.value,S.value,C.value],style:[x.value,T.value,r.inline?{}:A.value],"aria-atomic":"true","aria-label":E(r.label,I),"aria-live":"polite",role:"status"},V),[r.dot?void 0:n.slots.badge?n.slots.badge?.():r.icon?createVNode(VIcon,{icon:r.icon},null):N]),[[vShow,r.modelValue]])]})])]})}),{}}}),_sfc_main$1R=defineComponent$1({__name:"ItemMessageTraduction",props:{clef:{},actif:{type:Boolean},traductionApprouvee:{},traductionLangueSource:{},suggestions:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),{formatterChiffre:S}=utiliserNumration(),E=computed(()=>n.suggestions.length),C=S(E);return(T,B)=>(openBlock(),createBlock(VListItem,{active:T.actif},{append:withCtx(()=>[T.traductionApprouvee?(openBlock(),createBlock(VIcon,{key:0,color:"primary",icon:"mdi-check"})):T.suggestions.length?(openBlock(),createBlock(VBadge,{key:1,content:unref(C),color:"secondary",location:"bottom end"},{default:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-hand-pointing-up")]),_:1})]),_:1},8,["content"])):createCommentVNode("",!0)]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(T.traductionLangueSource||unref(x)("languesInterface.dialogueContribuer.aucuneTraduction")),1)]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(T.clef),1)]),_:1})]),_:1},8,["active"]))}}),_sfc_main$1Q=defineComponent$1({__name:"SrieJetons",props:{nMax:{},items:{}},setup(r){const n=r,{formatterChiffre:_}=utiliserNumration(),x=B=>typeof B=="string"?{id:B}:B,S=computed(()=>n.items?.slice(0,n.nMax).map(x)||[]),E=computed(()=>n.items?.slice(n.nMax).map(x)||[]),C=computed(()=>E.value.length),T=_(C);return(B,A)=>(openBlock(),createElementBlock("span",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(S.value,I=>(openBlock(),createElementBlock("span",{key:I.id},[renderSlot(B.$slots,"jeton",normalizeProps(guardReactiveProps(I)))]))),128)),E.value.length?(openBlock(),createBlock(VMenu,{key:0},{activator:withCtx(({props:I})=>[createVNode(VChip,mergeProps(I,{variant:"outlined",class:"me-2 mb-2"}),{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1}),createTextVNode(" "+toDisplayString$1(unref(T)),1)]),_:2},1040)]),default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(E.value,I=>(openBlock(),createElementBlock("li",{key:I.id},[renderSlot(B.$slots,"itemListe",normalizeProps(guardReactiveProps(I)))]))),128))]),_:3})]),_:3})):createCommentVNode("",!0)]))}}),catgoriesBase=["numrique","horoDatage","intervaleTemps","chane","chaneNonTraductible","boolen","gojson","vido","audio","image","fichier"],icneCatgorieVariable=r=>{if(r.type==="simple")switch(r.catgorie){case"numrique":return"mdi-numeric";case"chaneNonTraductible":case"chane":return"mdi-text-short";case"boolen":return"mdi-order-bool-ascending-variant";case"gojson":return"mdi-map-marker";case"fichier":return"mdi-file";case"vido":return"mdi-play-box-outline";case"audio":return"mdi-waveform";case"image":return"mdi-image";case"intervaleTemps":return"mdi-calendar-range-outline";case"horoDatage":return"mdi-calendar-clock";default:return""}else return"mdi-list"},_sfc_main$1P=defineComponent$1({__name:"JetonVariable",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=computed(()=>T.value?icneCatgorieVariable(T.value):"mdi-variable"),T=ref$1();enregistrercoute(_?.variables.suivreCatgorieVariable({idVariable:n.id,f:I=>T.value=I}));const B=ref$1({}),A=E(B);return enregistrercoute(_?.variables.suivreNomsVariable({idVariable:n.id,f:I=>B.value=I})),(I,N)=>(openBlock(),createBlock(VChip,{class:"mb-2 me-2","prepend-icon":C.value,variant:"outlined",size:"small"},{default:withCtx(()=>[renderSlot(I.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(unref(A)||unref(S)("variables.sansNom")),1)])]),_:3},8,["prepend-icon"]))}}),_sfc_main$1O=defineComponent$1({__name:"JetonDispositif",props:{idDispositif:{},idCompte:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),{nomDispositif:S,typeDispositif:E}=utiliserNomEtTypeDispositif({idDispositif:n.idDispositif,idCompte:n.idCompte}),C=computed(()=>obtIcneDispositifDeType(E.value));return(T,B)=>(openBlock(),createBlock(VChip,{"prepend-icon":C.value,variant:"outlined"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)||unref(x)("dispositifs.sansNom")),1)]),_:1},8,["prepend-icon"]))}}),_sfc_main$1N=defineComponent$1({__name:"ItemDispositif",props:{idDispositif:{},idCompte:{},vuA:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),S=inject$1("constl"),{nomDispositif:E,typeDispositif:C}=utiliserNomEtTypeDispositif({idDispositif:n.idDispositif,idCompte:n.idCompte}),T=computed(()=>obtIcneDispositifDeType(C.value)),{ilYAMs:B,texte:A}=utiliserIlYA({vu:n.vuA,t:x}),I=ref$1();onMounted(async()=>{I.value=await S?.obtIdDispositif()});const N=computed(()=>n.idDispositif===I.value?x("dispositifs.ceDispositif"):A.value),V=computed(()=>{if(B.value===void 0||B.value<=1e3*60*5)return"success";if(B.value<=1e3*60*30)return"warning"});return(D,O)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[V.value?(openBlock(),createBlock(VBadge,{key:0,dot:"",color:V.value,location:"bottom end"},{default:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(T.value),1)]),_:1})]),_:1},8,["color"])):(openBlock(),createBlock(VIcon,{key:1},{default:withCtx(()=>[createTextVNode(toDisplayString$1(T.value),1)]),_:1}))]),_:1})]),title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)||unref(x)("dispositifs.sansNom")),1)]),subtitle:withCtx(()=>[createTextVNode(toDisplayString$1(N.value),1)]),append:withCtx(()=>[createVNode(_sfc_main$1Y,{id:D.idDispositif},null,8,["id"])]),default:withCtx(()=>[D.idCompte?(openBlock(),createBlock(_sfc_main$1W,{key:0,compte:D.idCompte},null,8,["compte"])):createCommentVNode("",!0),renderSlot(D.$slots,"default")]),_:3}))}}),makeVRadioProps=propsFactory({...makeVSelectionControlProps({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),VRadio=genericComponent()({name:"VRadio",props:makeVRadioProps(),setup(r,n){let{slots:_}=n;return useRender(()=>createVNode(VSelectionControl,mergeProps(r,{class:["v-radio",r.class],style:r.style,type:"radio"}),_)),{}}}),VRadioGroup$1="",makeVRadioGroupProps=propsFactory({height:{type:[Number,String],default:"auto"},...makeVInputProps(),...omit(makeSelectionControlGroupProps(),["multiple"]),trueIcon:{type:IconValue,default:"$radioOn"},falseIcon:{type:IconValue,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),VRadioGroup=genericComponent()({name:"VRadioGroup",inheritAttrs:!1,props:makeVRadioGroupProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{attrs:_,slots:x}=n;const S=getUid(),E=computed(()=>r.id||`radio-group-${S}`),C=useProxiedModel(r,"modelValue");return useRender(()=>{const[T,B]=filterInputAttrs(_),[A,I]=VInput.filterProps(r),[N,V]=VSelectionControl.filterProps(r),D=x.label?x.label({label:r.label,props:{for:E.value}}):r.label;return createVNode(VInput,mergeProps({class:["v-radio-group",r.class],style:r.style},T,A,{modelValue:C.value,"onUpdate:modelValue":O=>C.value=O,id:E.value}),{...x,default:O=>{let{id:F,messagesId:M,isDisabled:L,isReadonly:j}=O;return createVNode(Fragment,null,[D&&createVNode(VLabel,{id:F.value},{default:()=>[D]}),createVNode(VSelectionControlGroup,mergeProps(N,{id:F.value,"aria-describedby":M.value,defaultsTarget:"VRadio",trueIcon:r.trueIcon,falseIcon:r.falseIcon,type:r.type,disabled:L.value,readonly:j.value,"aria-labelledby":D?F.value:void 0,multiple:!1},B,{modelValue:C.value,"onUpdate:modelValue":q=>C.value=q}),x)])}})}),{}}}),_hoisted_1$H={class:"mb-0 text-h6"},_hoisted_2$u={class:"font-weight-bold"},_hoisted_3$i={key:0},_hoisted_4$9={class:"mb-0 text-h6"},_hoisted_5$8={class:"font-weight-bold"},_sfc_main$1M=defineComponent$1({__name:"Cartepingler",props:{id:{type:String,required:!0},optionFichiers:{type:Boolean,default:!0}},setup(r){const n=r,_=inject$1("constl"),{mdAndUp:x}=useDisplay(),{useI18n:S}=_(),{t:E}=S(),C=ref$1(!1),T=ref$1("TOUS"),B=ref$1("INSTALL"),A=ref$1([]),I=ref$1([]),N=[{titre:E("pingler.aucun"),sousTitre:E("pingler.indiceAucun"),icne:"mdi-cancel",valeur:"AUCUN"},{titre:E("pingler.tous"),sousTitre:E("pingler.indiceTous"),icne:"mdi-devices",valeur:"TOUS"},{titre:E("pingler.install"),sousTitre:E("pingler.indiceInstall"),icne:"mdi-monitor",valeur:"INSTALL"},{titre:E("pingler.dispositifsSpcifiques"),sousTitre:E("pingler.indiceDispositifsSpcifiques"),icne:"mdi-monitor-cellphone-star",valeur:"SPCIFIQUES"}],V=ref$1();enregistrercoute(_?.suivreDispositifs({f:Z=>V.value=Z}));const D=ref$1();enregistrercoute(_?.favoris.suivretatFavori({idObjet:n.id,f:Z=>D.value=Z})),watch(D,()=>{D.value?(typeof D.value.dispositifs=="string"&&["TOUS","INSTALL","AUCUN"].includes(D.value.dispositifs)?T.value=D.value.dispositifs:(T.value="SPCIFIQUES",A.value=typeof D.value.dispositifs=="string"?[D.value.dispositifs]:D.value.dispositifs),typeof D.value.dispositifsFichiers=="string"&&["TOUS","INSTALL","AUCUN"].includes(D.value.dispositifsFichiers)?B.value=D.value.dispositifsFichiers:D.value.dispositifsFichiers?(B.value="SPCIFIQUES",I.value=typeof D.value.dispositifsFichiers=="string"?[D.value.dispositifsFichiers]:D.value.dispositifsFichiers):B.value="AUCUN"):(T.value="AUCUN",B.value="INSTALL",A.value=[],I.value=[])});const O=computed(()=>{if(T.value!=="AUCUN")return T.value==="SPCIFIQUES"?A.value:T.value}),F=computed(()=>{if(B.value!=="AUCUN")return B.value==="SPCIFIQUES"?I.value:B.value}),M=computed(()=>D.value?O.value!==D.value.dispositifs||F.value!==D.value.dispositifsFichiers:T.value!=="AUCUN"),L=computed(()=>{const Z=T.value==="SPCIFIQUES"?!!A.value.length:!0,ae=B.value==="SPCIFIQUES"?!!I.value.length:!0;return Z&&ae&&M.value}),j=computed(()=>{if(!D.value)return!0;const{dispositifs:Z,dispositifsFichiers:ae}=D.value,ce=Array.isArray(Z)?new Set(Z)!==new Set(A.value):Z!==T.value,ve=Array.isArray(ae)?new Set(ae)!==new Set(I.value):ae!==B.value;return ce||ve}),q=ref$1(!1),H=async()=>{if(q.value=!0,O.value){const Z={idObjet:n.id,dispositifs:O.value,rcursif:!0};F.value&&(Z.dispositifsFichiers=F.value),await _?.favoris.pinglerFavori(Z)}else await X();J()},X=async()=>{await _?.favoris.dspinglerFavori({idObjet:n.id})},J=()=>{C.value=!1,q.value=!1};return(Z,ae)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":ae[5]||(ae[5]=ce=>C.value=ce),"max-width":unref(x)?500:300},{activator:withCtx(({props:ce})=>[renderSlot(Z.$slots,"activator",normalizeProps(guardReactiveProps({props:ce})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("pingler.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:J})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$H,toDisplayString$1(unref(E)("pingler.dispositifspingle")),1),createVNode(VRadioGroup,{modelValue:T.value,"onUpdate:modelValue":ae[0]||(ae[0]=ce=>T.value=ce)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(N,ce=>(openBlock(),createBlock(VRadio,{key:ce.valeur,value:ce.valeur},{label:withCtx(()=>[createBaseVNode("div",null,[createVNode(VListItem,{subtitle:ce.sousTitre},{title:withCtx(()=>[createVNode(VIcon,{icon:ce.icne,start:"",size:"small"},null,8,["icon"]),createBaseVNode("span",_hoisted_2$u,toDisplayString$1(ce.titre),1)]),_:2},1032,["subtitle"])])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),createVNode(VExpandTransition,null,{default:withCtx(()=>[withDirectives(createVNode(VAutocomplete,{modelValue:A.value,"onUpdate:modelValue":ae[1]||(ae[1]=ce=>A.value=ce),items:V.value||[],disabled:!V.value,loading:!V.value,label:unref(E)("pingler.indiceSlectionnerDispositif"),density:"compact",variant:"outlined",multiple:"",chips:"","closable-chips":""},{chip:withCtx(({props:ce,item:ve})=>[createVNode(_sfc_main$1O,mergeProps(ce,{"id-dispositif":ve.title}),null,16,["id-dispositif"])]),item:withCtx(({props:ce,item:ve})=>[createVNode(_sfc_main$1N,mergeProps(ce,{"id-dispositif":ve.title}),null,16,["id-dispositif"])]),_:1},8,["modelValue","items","disabled","loading","label"]),[[vShow,T.value==="SPCIFIQUES"]])]),_:1}),r.optionFichiers?(openBlock(),createElementBlock("span",_hoisted_3$i,[createBaseVNode("p",_hoisted_4$9,toDisplayString$1(unref(E)("pingler.dispositifspingleFichier")),1),createVNode(VRadioGroup,{modelValue:B.value,"onUpdate:modelValue":ae[2]||(ae[2]=ce=>B.value=ce),disabled:T.value==="AUCUN"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(N,ce=>(openBlock(),createBlock(VRadio,{key:ce.valeur,value:ce.valeur},{label:withCtx(()=>[createBaseVNode("div",null,[createVNode(VListItem,{subtitle:ce.sousTitre},{title:withCtx(()=>[createVNode(VIcon,{icon:ce.icne,start:"",size:"small"},null,8,["icon"]),createBaseVNode("span",_hoisted_5$8,toDisplayString$1(ce.titre),1)]),_:2},1032,["subtitle"])])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","disabled"]),createVNode(VExpandTransition,null,{default:withCtx(()=>[withDirectives(createVNode(VAutocomplete,{modelValue:I.value,"onUpdate:modelValue":ae[3]||(ae[3]=ce=>I.value=ce),items:V.value,label:unref(E)("pingler.indiceSlectionnerDispositif"),"hide-details":"",chips:"","closable-chips":"",density:"compact",variant:"outlined",multiple:""},{chip:withCtx(({props:ce,item:ve})=>[createVNode(_sfc_main$1O,mergeProps(ce,{"id-dispositif":ve.title}),null,16,["id-dispositif"])]),item:withCtx(({props:ce,item:ve})=>[createVNode(_sfc_main$1N,mergeProps(ce,{"id-dispositif":ve.title}),null,16,["id-dispositif"])]),_:1},8,["modelValue","items","label"]),[[vShow,B.value==="SPCIFIQUES"]])]),_:1})])):createCommentVNode("",!0)]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:J},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.fermer"))+" ",1),createVNode(VIcon,{icon:"mdi-close",end:""})]),_:1}),createVNode(VBtn,{color:"primary",variant:"outlined",loading:q.value,disabled:!L.value||!j.value,onClick:ae[4]||(ae[4]=()=>H())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{icon:"mdi-check",end:""})]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_sfc_main$1L=defineComponent$1({__name:"Icnepingle",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),E=ref$1();enregistrercoute(_?.favoris.suivretatFavori({idObjet:n.id,f:A=>E.value=A}));const C=ref$1(!1);enregistrercoute(_?.favoris.suivreEstpinglSurDispositif({idObjet:n.id,f:A=>C.value=A.bd}));const T=computed(()=>E.value?C.value?"mdi-pin":"mdi-pin-outline":"mdi-pin-off-outline"),B=computed(()=>E.value?C.value?S("pingles.icne.pinglSurCeDispositif"):S("pingles.icne.pinglSurDAutresDispositifs"):S("pingles.icne.paspingl"));return(A,I)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(VTooltip,{text:B.value},{activator:withCtx(({props:N})=>[renderSlot(A.$slots,"activator",normalizeProps(guardReactiveProps({props:N})))]),_:3},8,["text"]),createVNode(VIcon,{icon:T.value},null,8,["icon"])],64))}}),_hoisted_1$G={class:"text-h6"},_sfc_main$1K=defineComponent$1({__name:"DivisionCarte",props:{titre:{},enAttente:{type:Boolean}},setup(r){return(n,_)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("p",_hoisted_1$G,toDisplayString$1(n.titre),1),n.enAttente?(openBlock(),createBlock(VProgressLinear,{key:0,class:"mb-2",indeterminate:"",height:1})):(openBlock(),createBlock(VDivider,{key:1,class:"mb-2"}))],64))}}),_sfc_main$1J=defineComponent$1({__name:"JetonContactMembre",props:{type:{},contact:{}},setup(r){const n=r,{formatterNumro:_}=utiliserNumration(),x=computed(()=>obtIcneContact({type:n.type})),S=_(n.contact),E=computed(()=>{switch(n.type){case"tlphone":case"whatsapp":case"telegram":return S.value;default:return n.contact}});return(C,T)=>(openBlock(),createBlock(VChip,{class:"ma-2",variant:"outlined",label:"","prepend-icon":x.value},{default:withCtx(()=>[createTextVNode(toDisplayString$1(E.value),1)]),_:1},8,["prepend-icon"]))}}),_hoisted_1$F={key:0},_hoisted_2$t={class:"highlight-yellow"},_hoisted_3$h={key:1},TAILLE_MIN_TEXTE_AVANT=4,_sfc_main$1I=defineComponent$1({__name:"TexteSurlignRecherche",props:{info:{},maxTaille:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),S=computed(()=>{const{texte:E,dbut:C,fin:T}=n.info,B=E.slice(C,T),A=E.slice(0,n.info.dbut),I=E.slice(T);if(n.maxTaille){if(n.maxTaille-E.length>=0)return{texteAvant:A,texteSurlign:B,texteAprs:I,coupAvant:!1,coupAprs:!1};{const V=Math.min(B.length,n.maxTaille-Math.min(TAILLE_MIN_TEXTE_AVANT,A.length)),D=Math.max(TAILLE_MIN_TEXTE_AVANT,n.maxTaille-V),O=Math.max(0,n.maxTaille-Math.min(D,A.length)-V),F=B.length>V||I.length>O;return{texteAvant:A.slice(Math.max(0,A.length-D),A.length),texteSurlign:B.slice(0,V),texteAprs:I.slice(0,O),coupAvant:A.length>D,coupAprs:F}}}else return{texteAvant:A,texteSurlign:B,texteAprs:I,coupAvant:!1,coupAprs:!1}});return(E,C)=>(openBlock(),createElementBlock("span",null,[S.value.coupAvant?(openBlock(),createElementBlock("span",_hoisted_1$F,toDisplayString$1(unref(x)("communs.troisPetitsPoints")),1)):createCommentVNode("",!0),createBaseVNode("span",null,toDisplayString$1(S.value.texteAvant),1),createBaseVNode("span",_hoisted_2$t,toDisplayString$1(S.value.texteSurlign),1),createBaseVNode("span",null,toDisplayString$1(S.value.texteAprs),1),S.value.coupAprs?(openBlock(),createElementBlock("span",_hoisted_3$h,toDisplayString$1(unref(x)("communs.troisPetitsPoints")),1)):createCommentVNode("",!0)]))}}),TexteSurlign_Recherche_vue_vue_type_style_index_0_lang="",_hoisted_1$E={key:1},_sfc_main$1H=defineComponent$1({__name:"RsultatRechercheProfil",props:{rsultat:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{traduireNom:S}=utiliserLangues(),{t:E}=x(),C=computed(()=>n.rsultat.rsultatObjectif.de),T=ref$1({}),B=S(T);return enregistrercoute(_?.profil.suivreNoms({idCompte:n.rsultat.id,f:A=>T.value=A})),(A,I)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(_sfc_main$24,{id:A.rsultat.id,start:""},null,8,["id"])]),title:withCtx(()=>[C.value==="nom"?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:A.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1$E,toDisplayString$1(unref(B)||unref(E)("communs.anonyme")),1))]),default:withCtx(()=>[C.value==="id"?(openBlock(),createBlock(VChip,{key:0,variant:"outlined",label:"",size:"small","prepend-icon":"mdi-link"},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:A.rsultat.rsultatObjectif.info,"max-taille":25},null,8,["info"])]),_:1})):createCommentVNode("",!0),C.value==="contact"&&A.rsultat.rsultatObjectif.clef?(openBlock(),createBlock(_sfc_main$1J,{key:1,contact:A.rsultat.rsultatObjectif.info.texte,type:A.rsultat.rsultatObjectif.clef},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:A.rsultat.rsultatObjectif.info},null,8,["info"])]),_:1},8,["contact","type"])):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$1G=defineComponent$1({__name:"GererAuteurs",props:{id:{},auteurs:{},permissionModerateur:{type:Boolean}},emits:["sauvegarder"],setup(r,{emit:n}){const _=r,{mdAndUp:x}=useDisplay(),{useI18n:S}=_(),{t:E}=S(),C=inject$1("constl"),T=ref$1(!1),B=()=>{T.value=!1},A=ref$1(!1),I=ref$1(),N=ref$1();enregistrerRecherche({requte:N,rfRsultat:I,fRecherche:async({requte:M,nOuProfondeur:L,rfRsultat:j})=>C?.recherche.rechercherProfilsSelonTexte({texte:M,nRsultatsDsirs:L,f:q=>j.value=q.sort((H,X)=>H.rsultatObjectif.score>X.rsultatObjectif.score?-1:H.rsultatObjectif.score<X.rsultatObjectif.score?1:0)}),fRechercheDfaut:async({nOuProfondeur:M,rfRsultat:L})=>C?.rseau?.rechercherMembres({nRsultatsDsirs:M,f:j=>L.value=j.sort((q,H)=>q.rsultatObjectif.score>H.rsultatObjectif.score?-1:q.rsultatObjectif.score<H.rsultatObjectif.score?1:0)})});const V=computed(()=>I.value?.filter(M=>D.value.includes(M.id)?!1:A.value?_.auteurs?.find(L=>L.idCompte===M.id)?.rle!=="MODRATEUR":!_.auteurs?.map(L=>L.idCompte).includes(M.id))),D=ref$1([]),O=M=>{D.value=[...D.value,M]},F=M=>{D.value=D.value.filter(L=>L!==M)};return(M,L)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":L[3]||(L[3]=j=>T.value=j),"max-width":unref(x)?500:300},{activator:withCtx(({props:j})=>[renderSlot(M.$slots,"activator",normalizeProps(guardReactiveProps({props:j})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("auteurs.carteGrer.titre")),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("auteurs.carteGrer.sousTitre")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VMenu,null,{activator:withCtx(({props:j})=>[createVNode(VTextField,mergeProps(j,{modelValue:N.value,"onUpdate:modelValue":L[0]||(L[0]=q=>N.value=q),"hide-details":"",variant:"outlined",density:"compact"}),null,16,["modelValue"])]),default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[V.value?.length?createCommentVNode("",!0):(openBlock(),createBlock(VListItem,{key:0},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("auteurs.carteGrer.aucunRsultat")),1)]),_:1})]),_:1})),(openBlock(!0),createElementBlock(Fragment,null,renderList(V.value,j=>(openBlock(),createBlock(_sfc_main$1H,{key:j.id,rsultat:j,onClick:()=>O(j.id)},null,8,["rsultat","onClick"]))),128))]),_:1})]),_:1}),createVNode(_sfc_main$1K,{titre:unref(E)("auteurs.carteGrer.nouveaux"),"en-attente":!1},null,8,["titre"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(D.value,j=>(openBlock(),createBlock(_sfc_main$1W,{key:j,compte:j},{post:withCtx(()=>[createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"x-small",onClick:()=>F(j)},null,8,["onClick"])]),_:2},1032,["compte"]))),128)),createVNode(VCheckbox,{modelValue:A.value,"onUpdate:modelValue":L[1]||(L[1]=j=>A.value=j),color:"primary",label:unref(E)("auteurs.carteGrer.ajouterCommeModrateur")},null,8,["modelValue","label"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:B},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1}),createVNode(VBtn,{variant:"outlined",color:"primary",disabled:!D.value.length,onClick:L[2]||(L[2]=()=>n("sauvegarder"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_sfc_main$1F=defineComponent$1({__name:"AuteursObjet",props:{auteurs:{type:Array,default:()=>[]},nMax:{type:Number,default:3}},setup(r){const n=r,_=computed(()=>n.auteurs?.map(x=>({id:x.idCompte,...x})));return(x,S)=>(openBlock(),createBlock(_sfc_main$1Q,{items:_.value,"n-max":r.nMax},{jeton:withCtx(({idCompte:E})=>[createVNode(_sfc_main$17,{id:E},{activator:withCtx(({props:C})=>[createVNode(_sfc_main$1W,mergeProps(C,{compte:E}),null,16,["compte"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:E})=>[createVNode(_sfc_main$17,{id:E},{activator:withCtx(({props:C})=>[createVNode(_sfc_main$1X,mergeProps(C,{compte:E,"montrer-anonymes":!0}),null,16,["compte"])]),_:2},1032,["id"])]),_:1},8,["items","n-max"]))}});var toStr$a=Object.prototype.toString,isArguments$3=function(n){var _=toStr$a.call(n),x=_==="[object Arguments]";return x||(x=_!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&toStr$a.call(n.callee)==="[object Function]"),x},implementation$b,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation$b;hasRequiredImplementation=1;var r;if(!Object.keys){var n=Object.prototype.hasOwnProperty,_=Object.prototype.toString,x=isArguments$3,S=Object.prototype.propertyIsEnumerable,E=!S.call({toString:null},"toString"),C=S.call(function(){},"prototype"),T=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],B=function(V){var D=V.constructor;return D&&D.prototype===V},A={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},I=function(){if(typeof window>"u")return!1;for(var V in window)try{if(!A["$"+V]&&n.call(window,V)&&window[V]!==null&&typeof window[V]=="object")try{B(window[V])}catch{return!0}}catch{return!0}return!1}(),N=function(V){if(typeof window>"u"||!I)return B(V);try{return B(V)}catch{return!1}};r=function(D){var O=D!==null&&typeof D=="object",F=_.call(D)==="[object Function]",M=x(D),L=O&&_.call(D)==="[object String]",j=[];if(!O&&!F&&!M)throw new TypeError("Object.keys called on a non-object");var q=C&&F;if(L&&D.length>0&&!n.call(D,0))for(var H=0;H<D.length;++H)j.push(String(H));if(M&&D.length>0)for(var X=0;X<D.length;++X)j.push(String(X));else for(var J in D)!(q&&J==="prototype")&&n.call(D,J)&&j.push(String(J));if(E)for(var Z=N(D),ae=0;ae<T.length;++ae)!(Z&&T[ae]==="constructor")&&n.call(D,T[ae])&&j.push(T[ae]);return j}}return implementation$b=r,implementation$b}var slice$3=Array.prototype.slice,isArgs=isArguments$3,origKeys=Object.keys,keysShim=origKeys?function(n){return origKeys(n)}:requireImplementation(),originalKeys=Object.keys;keysShim.shim=function(){if(Object.keys){var n=function(){var _=Object.keys(arguments);return _&&_.length===arguments.length}(1,2);n||(Object.keys=function(x){return isArgs(x)?originalKeys(slice$3.call(x)):originalKeys(x)})}else Object.keys=keysShim;return Object.keys||keysShim};var objectKeys$3=keysShim,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var n={},_=Symbol("test"),x=Object(_);if(typeof _=="string"||Object.prototype.toString.call(_)!=="[object Symbol]"||Object.prototype.toString.call(x)!=="[object Symbol]")return!1;var S=42;n[_]=S;for(_ in n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var E=Object.getOwnPropertySymbols(n);if(E.length!==1||E[0]!==_||!Object.prototype.propertyIsEnumerable.call(n,_))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var C=Object.getOwnPropertyDescriptor(n,_);if(C.value!==S||C.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$5=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={foo:{}},$Object=Object,hasProto$1=function(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object)},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",slice$2=Array.prototype.slice,toStr$9=Object.prototype.toString,funcType="[object Function]",implementation$a=function(n){var _=this;if(typeof _!="function"||toStr$9.call(_)!==funcType)throw new TypeError(ERROR_MESSAGE+_);for(var x=slice$2.call(arguments,1),S,E=function(){if(this instanceof S){var I=_.apply(this,x.concat(slice$2.call(arguments)));return Object(I)===I?I:this}else return _.apply(n,x.concat(slice$2.call(arguments)))},C=Math.max(0,_.length-x.length),T=[],B=0;B<C;B++)T.push("$"+B);if(S=Function("binder","return function ("+T.join(",")+"){ return binder.apply(this,arguments); }")(E),_.prototype){var A=function(){};A.prototype=_.prototype,S.prototype=new A,A.prototype=null}return S},implementation$9=implementation$a,functionBind=Function.prototype.bind||implementation$9,bind$3=functionBind,src$4=bind$3.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError$1=SyntaxError,$Function=Function,$TypeError$2=TypeError,getEvalledConstructor=function(r){try{return $Function('"use strict"; return ('+r+").constructor;")()}catch{}},$gOPD$2=Object.getOwnPropertyDescriptor;if($gOPD$2)try{$gOPD$2({},"")}catch{$gOPD$2=null}var throwTypeError=function(){throw new $TypeError$2},ThrowTypeError=$gOPD$2?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$2(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols$4=hasSymbols$5(),hasProto=hasProto$1(),getProto$2=Object.getPrototypeOf||(hasProto?function(r){return r.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto$2?undefined$1:getProto$2(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols$4&&getProto$2?getProto$2([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$4&&getProto$2?getProto$2(getProto$2([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols$4||!getProto$2?undefined$1:getProto$2(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols$4||!getProto$2?undefined$1:getProto$2(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols$4&&getProto$2?getProto$2(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols$4?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$2,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto$2)try{null.error}catch(r){var errorProto=getProto$2(getProto$2(r));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function r(n){var _;if(n==="%AsyncFunction%")_=getEvalledConstructor("async function () {}");else if(n==="%GeneratorFunction%")_=getEvalledConstructor("function* () {}");else if(n==="%AsyncGeneratorFunction%")_=getEvalledConstructor("async function* () {}");else if(n==="%AsyncGenerator%"){var x=r("%AsyncGeneratorFunction%");x&&(_=x.prototype)}else if(n==="%AsyncIteratorPrototype%"){var S=r("%AsyncGenerator%");S&&getProto$2&&(_=getProto$2(S.prototype))}return INTRINSICS[n]=_,_},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind$2=functionBind,hasOwn$1=src$4,$concat$1=bind$2.call(Function.call,Array.prototype.concat),$spliceApply=bind$2.call(Function.apply,Array.prototype.splice),$replace$1=bind$2.call(Function.call,String.prototype.replace),$strSlice=bind$2.call(Function.call,String.prototype.slice),$exec$1=bind$2.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(n){var _=$strSlice(n,0,1),x=$strSlice(n,-1);if(_==="%"&&x!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(x==="%"&&_!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var S=[];return $replace$1(n,rePropName,function(E,C,T,B){S[S.length]=T?$replace$1(B,reEscapeChar,"$1"):C||E}),S},getBaseIntrinsic=function(n,_){var x=n,S;if(hasOwn$1(LEGACY_ALIASES,x)&&(S=LEGACY_ALIASES[x],x="%"+S[0]+"%"),hasOwn$1(INTRINSICS,x)){var E=INTRINSICS[x];if(E===needsEval&&(E=doEval(x)),typeof E>"u"&&!_)throw new $TypeError$2("intrinsic "+n+" exists, but is not available. Please file an issue!");return{alias:S,name:x,value:E}}throw new $SyntaxError$1("intrinsic "+n+" does not exist!")},getIntrinsic=function(n,_){if(typeof n!="string"||n.length===0)throw new $TypeError$2("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof _!="boolean")throw new $TypeError$2('"allowMissing" argument must be a boolean');if($exec$1(/^%?[^%]*%?$/,n)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var x=stringToPath(n),S=x.length>0?x[0]:"",E=getBaseIntrinsic("%"+S+"%",_),C=E.name,T=E.value,B=!1,A=E.alias;A&&(S=A[0],$spliceApply(x,$concat$1([0,1],A)));for(var I=1,N=!0;I<x.length;I+=1){var V=x[I],D=$strSlice(V,0,1),O=$strSlice(V,-1);if((D==='"'||D==="'"||D==="`"||O==='"'||O==="'"||O==="`")&&D!==O)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((V==="constructor"||!N)&&(B=!0),S+="."+V,C="%"+S+"%",hasOwn$1(INTRINSICS,C))T=INTRINSICS[C];else if(T!=null){if(!(V in T)){if(!_)throw new $TypeError$2("base intrinsic for "+n+" exists, but the property is not available.");return}if($gOPD$2&&I+1>=x.length){var F=$gOPD$2(T,V);N=!!F,N&&"get"in F&&!("originalValue"in F.get)?T=F.get:T=T[V]}else N=hasOwn$1(T,V),T=T[V];N&&!B&&(INTRINSICS[C]=T)}}return T},GetIntrinsic$8=getIntrinsic,$defineProperty=GetIntrinsic$8("%Object.defineProperty%",!0),hasPropertyDescriptors$1=function(){if($defineProperty)try{return $defineProperty({},"a",{value:1}),!0}catch{return!1}return!1};hasPropertyDescriptors$1.hasArrayLengthDefineBug=function(){if(!hasPropertyDescriptors$1())return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors$1,keys$2=objectKeys$3,hasSymbols$3=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",toStr$8=Object.prototype.toString,concat$2=Array.prototype.concat,origDefineProperty=Object.defineProperty,isFunction$2=function(r){return typeof r=="function"&&toStr$8.call(r)==="[object Function]"},hasPropertyDescriptors=hasPropertyDescriptors_1(),supportsDescriptors$2=origDefineProperty&&hasPropertyDescriptors,defineProperty$1=function(r,n,_,x){if(n in r){if(x===!0){if(r[n]===_)return}else if(!isFunction$2(x)||!x())return}supportsDescriptors$2?origDefineProperty(r,n,{configurable:!0,enumerable:!1,value:_,writable:!0}):r[n]=_},defineProperties$1=function(r,n){var _=arguments.length>2?arguments[2]:{},x=keys$2(n);hasSymbols$3&&(x=concat$2.call(x,Object.getOwnPropertySymbols(n)));for(var S=0;S<x.length;S+=1)defineProperty$1(r,x[S],n[x[S]],_[x[S]])};defineProperties$1.supportsDescriptors=!!supportsDescriptors$2;var defineProperties_1=defineProperties$1,callBind$6={exports:{}};(function(r){var n=functionBind,_=getIntrinsic,x=_("%Function.prototype.apply%"),S=_("%Function.prototype.call%"),E=_("%Reflect.apply%",!0)||n.call(S,x),C=_("%Object.getOwnPropertyDescriptor%",!0),T=_("%Object.defineProperty%",!0),B=_("%Math.max%");if(T)try{T({},"a",{value:1})}catch{T=null}r.exports=function(N){var V=E(n,S,arguments);if(C&&T){var D=C(V,"length");D.configurable&&T(V,"length",{value:1+B(0,N.length-(arguments.length-1))})}return V};var A=function(){return E(n,x,arguments)};T?T(r.exports,"apply",{value:A}):r.exports.apply=A})(callBind$6);var callBindExports=callBind$6.exports,GetIntrinsic$7=getIntrinsic,callBind$5=callBindExports,$indexOf$1=callBind$5(GetIntrinsic$7("String.prototype.indexOf")),callBound$c=function(n,_){var x=GetIntrinsic$7(n,!!_);return typeof x=="function"&&$indexOf$1(n,".prototype.")>-1?callBind$5(x):x},objectKeys$2=objectKeys$3,hasSymbols$2=shams$1(),callBound$b=callBound$c,toObject=Object,$push=callBound$b("Array.prototype.push"),$propIsEnumerable=callBound$b("Object.prototype.propertyIsEnumerable"),originalGetSymbols=hasSymbols$2?Object.getOwnPropertySymbols:null,implementation$8=function(n,_){if(n==null)throw new TypeError("target must be an object");var x=toObject(n);if(arguments.length===1)return x;for(var S=1;S<arguments.length;++S){var E=toObject(arguments[S]),C=objectKeys$2(E),T=hasSymbols$2&&(Object.getOwnPropertySymbols||originalGetSymbols);if(T)for(var B=T(E),A=0;A<B.length;++A){var I=B[A];$propIsEnumerable(E,I)&&$push(C,I)}for(var N=0;N<C.length;++N){var V=C[N];if($propIsEnumerable(E,V)){var D=E[V];x[V]=D}}}return x},implementation$7=implementation$8,lacksProperEnumerationOrder=function(){if(!Object.assign)return!1;for(var r="abcdefghijklmnopqrst",n=r.split(""),_={},x=0;x<n.length;++x)_[n[x]]=n[x];var S=Object.assign({},_),E="";for(var C in S)E+=C;return r!==E},assignHasPendingExceptions=function(){if(!Object.assign||!Object.preventExtensions)return!1;var r=Object.preventExtensions({1:2});try{Object.assign(r,"xy")}catch{return r[1]==="y"}return!1},polyfill$4=function(){return!Object.assign||lacksProperEnumerationOrder()||assignHasPendingExceptions()?implementation$7:Object.assign},define$3=defineProperties_1,getPolyfill$5=polyfill$4,shim$5=function(){var n=getPolyfill$5();return define$3(Object,{assign:n},{assign:function(){return Object.assign!==n}}),n},defineProperties=defineProperties_1,callBind$4=callBindExports,implementation$6=implementation$8,getPolyfill$4=polyfill$4,shim$4=shim$5,polyfill$3=callBind$4.apply(getPolyfill$4()),bound=function(n,_){return polyfill$3(Object,arguments)};defineProperties(bound,{getPolyfill:getPolyfill$4,implementation:implementation$6,shim:shim$4});var object_assign=bound,implementation$5={exports:{}},functionsHaveNames$1=function(){return typeof function(){}.name=="string"},gOPD$3=Object.getOwnPropertyDescriptor;if(gOPD$3)try{gOPD$3([],"length")}catch{gOPD$3=null}functionsHaveNames$1.functionsHaveConfigurableNames=function(){if(!functionsHaveNames$1()||!gOPD$3)return!1;var n=gOPD$3(function(){},"name");return!!n&&!!n.configurable};var $bind=Function.prototype.bind;functionsHaveNames$1.boundFunctionsHaveNames=function(){return functionsHaveNames$1()&&typeof $bind=="function"&&function(){}.bind().name!==""};var functionsHaveNames_1=functionsHaveNames$1;(function(r){var n=functionsHaveNames_1.functionsHaveConfigurableNames(),_=Object,x=TypeError;r.exports=function(){if(this!=null&&this!==_(this))throw new x("RegExp.prototype.flags getter called on non-object");var E="";return this.hasIndices&&(E+="d"),this.global&&(E+="g"),this.ignoreCase&&(E+="i"),this.multiline&&(E+="m"),this.dotAll&&(E+="s"),this.unicode&&(E+="u"),this.unicodeSets&&(E+="v"),this.sticky&&(E+="y"),E},n&&Object.defineProperty&&Object.defineProperty(r.exports,"name",{value:"get flags"})})(implementation$5);var implementationExports=implementation$5.exports,implementation$4=implementationExports,supportsDescriptors$1=defineProperties_1.supportsDescriptors,$gOPD$1=Object.getOwnPropertyDescriptor,polyfill$2=function(){if(supportsDescriptors$1&&/a/mig.flags==="gim"){var n=$gOPD$1(RegExp.prototype,"flags");if(n&&typeof n.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var _="",x={};if(Object.defineProperty(x,"hasIndices",{get:function(){_+="d"}}),Object.defineProperty(x,"sticky",{get:function(){_+="y"}}),_==="dy")return n.get}}return implementation$4},supportsDescriptors=defineProperties_1.supportsDescriptors,getPolyfill$3=polyfill$2,gOPD$2=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,TypeErr=TypeError,getProto$1=Object.getPrototypeOf,regex$1=/a/,shim$3=function(){if(!supportsDescriptors||!getProto$1)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var n=getPolyfill$3(),_=getProto$1(regex$1),x=gOPD$2(_,"flags");return(!x||x.get!==n)&&defineProperty(_,"flags",{configurable:!0,enumerable:!1,get:n}),n},define$2=defineProperties_1,callBind$3=callBindExports,implementation$3=implementationExports,getPolyfill$2=polyfill$2,shim$2=shim$3,flagsBound=callBind$3(getPolyfill$2());define$2(flagsBound,{getPolyfill:getPolyfill$2,implementation:implementation$3,shim:shim$2});var regexp_prototype_flags=flagsBound,esGetIterator={exports:{}},hasSymbols$1=shams$1,shams=function(){return hasSymbols$1()&&!!Symbol.toStringTag},hasToStringTag$8=shams(),callBound$a=callBound$c,$toString$3=callBound$a("Object.prototype.toString"),isStandardArguments=function(n){return hasToStringTag$8&&n&&typeof n=="object"&&Symbol.toStringTag in n?!1:$toString$3(n)==="[object Arguments]"},isLegacyArguments=function(n){return isStandardArguments(n)?!0:n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&$toString$3(n)!=="[object Array]"&&$toString$3(n.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments$2=supportsStandardArguments?isStandardArguments:isLegacyArguments;const globSourceImport={},__viteBrowserExternal=Object.freeze(Object.defineProperty({__proto__:null,default:globSourceImport},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(__viteBrowserExternal);var hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice$1=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf$1=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO$1=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function addNumericSeparator(r,n){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||$test.call(/e/,n))return n;var _=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var x=r<0?-$floor(-r):$floor(r);if(x!==r){var S=String(x),E=$slice$1.call(n,S.length+1);return $replace.call(S,_,"$&_")+"."+$replace.call($replace.call(E,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(n,_,"$&_")}var utilInspect=require$$0$2,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol$2(inspectCustom)?inspectCustom:null,objectInspect=function r(n,_,x,S){var E=_||{};if(has$2(E,"quoteStyle")&&E.quoteStyle!=="single"&&E.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$2(E,"maxStringLength")&&(typeof E.maxStringLength=="number"?E.maxStringLength<0&&E.maxStringLength!==1/0:E.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var C=has$2(E,"customInspect")?E.customInspect:!0;if(typeof C!="boolean"&&C!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$2(E,"indent")&&E.indent!==null&&E.indent!=="	"&&!(parseInt(E.indent,10)===E.indent&&E.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$2(E,"numericSeparator")&&typeof E.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var T=E.numericSeparator;if(typeof n>"u")return"undefined";if(n===null)return"null";if(typeof n=="boolean")return n?"true":"false";if(typeof n=="string")return inspectString(n,E);if(typeof n=="number"){if(n===0)return 1/0/n>0?"0":"-0";var B=String(n);return T?addNumericSeparator(n,B):B}if(typeof n=="bigint"){var A=String(n)+"n";return T?addNumericSeparator(n,A):A}var I=typeof E.depth>"u"?5:E.depth;if(typeof x>"u"&&(x=0),x>=I&&I>0&&typeof n=="object")return isArray$6(n)?"[Array]":"[Object]";var N=getIndent(E,x);if(typeof S>"u")S=[];else if(indexOf$1(S,n)>=0)return"[Circular]";function V(Y,U,W){if(U&&(S=$arrSlice.call(S),S.push(U)),W){var ee={depth:E.depth};return has$2(E,"quoteStyle")&&(ee.quoteStyle=E.quoteStyle),r(Y,ee,x+1,S)}return r(Y,E,x+1,S)}if(typeof n=="function"&&!isRegExp$2(n)){var D=nameOf(n),O=arrObjKeys(n,V);return"[Function"+(D?": "+D:" (anonymous)")+"]"+(O.length>0?" { "+$join.call(O,", ")+" }":"")}if(isSymbol$2(n)){var F=hasShammedSymbols?$replace.call(String(n),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(n);return typeof n=="object"&&!hasShammedSymbols?markBoxed(F):F}if(isElement(n)){for(var M="<"+$toLowerCase.call(String(n.nodeName)),L=n.attributes||[],j=0;j<L.length;j++)M+=" "+L[j].name+"="+wrapQuotes(quote(L[j].value),"double",E);return M+=">",n.childNodes&&n.childNodes.length&&(M+="..."),M+="</"+$toLowerCase.call(String(n.nodeName))+">",M}if(isArray$6(n)){if(n.length===0)return"[]";var q=arrObjKeys(n,V);return N&&!singleLineValues(q)?"["+indentedJoin(q,N)+"]":"[ "+$join.call(q,", ")+" ]"}if(isError(n)){var H=arrObjKeys(n,V);return!("cause"in Error.prototype)&&"cause"in n&&!isEnumerable.call(n,"cause")?"{ ["+String(n)+"] "+$join.call($concat.call("[cause]: "+V(n.cause),H),", ")+" }":H.length===0?"["+String(n)+"]":"{ ["+String(n)+"] "+$join.call(H,", ")+" }"}if(typeof n=="object"&&C){if(inspectSymbol&&typeof n[inspectSymbol]=="function"&&utilInspect)return utilInspect(n,{depth:I-x});if(C!=="symbol"&&typeof n.inspect=="function")return n.inspect()}if(isMap$3(n)){var X=[];return mapForEach&&mapForEach.call(n,function(Y,U){X.push(V(U,n,!0)+" => "+V(Y,n))}),collectionOf("Map",mapSize.call(n),X,N)}if(isSet$3(n)){var J=[];return setForEach&&setForEach.call(n,function(Y){J.push(V(Y,n))}),collectionOf("Set",setSize.call(n),J,N)}if(isWeakMap$1(n))return weakCollectionOf("WeakMap");if(isWeakSet$1(n))return weakCollectionOf("WeakSet");if(isWeakRef(n))return weakCollectionOf("WeakRef");if(isNumber$3(n))return markBoxed(V(Number(n)));if(isBigInt$1(n))return markBoxed(V(bigIntValueOf$1.call(n)));if(isBoolean$3(n))return markBoxed(booleanValueOf.call(n));if(isString$5(n))return markBoxed(V(String(n)));if(!isDate$3(n)&&!isRegExp$2(n)){var Z=arrObjKeys(n,V),ae=gPO$1?gPO$1(n)===Object.prototype:n instanceof Object||n.constructor===Object,ce=n instanceof Object?"":"null prototype",ve=!ae&&toStringTag&&Object(n)===n&&toStringTag in n?$slice$1.call(toStr$7(n),8,-1):ce?"Object":"",pe=ae||typeof n.constructor!="function"?"":n.constructor.name?n.constructor.name+" ":"",G=pe+(ve||ce?"["+$join.call($concat.call([],ve||[],ce||[]),": ")+"] ":"");return Z.length===0?G+"{}":N?G+"{"+indentedJoin(Z,N)+"}":G+"{ "+$join.call(Z,", ")+" }"}return String(n)};function wrapQuotes(r,n,_){var x=(_.quoteStyle||n)==="double"?'"':"'";return x+r+x}function quote(r){return $replace.call(String(r),/"/g,"&quot;")}function isArray$6(r){return toStr$7(r)==="[object Array]"&&(!toStringTag||!(typeof r=="object"&&toStringTag in r))}function isDate$3(r){return toStr$7(r)==="[object Date]"&&(!toStringTag||!(typeof r=="object"&&toStringTag in r))}function isRegExp$2(r){return toStr$7(r)==="[object RegExp]"&&(!toStringTag||!(typeof r=="object"&&toStringTag in r))}function isError(r){return toStr$7(r)==="[object Error]"&&(!toStringTag||!(typeof r=="object"&&toStringTag in r))}function isString$5(r){return toStr$7(r)==="[object String]"&&(!toStringTag||!(typeof r=="object"&&toStringTag in r))}function isNumber$3(r){return toStr$7(r)==="[object Number]"&&(!toStringTag||!(typeof r=="object"&&toStringTag in r))}function isBoolean$3(r){return toStr$7(r)==="[object Boolean]"&&(!toStringTag||!(typeof r=="object"&&toStringTag in r))}function isSymbol$2(r){if(hasShammedSymbols)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!symToString)return!1;try{return symToString.call(r),!0}catch{}return!1}function isBigInt$1(r){if(!r||typeof r!="object"||!bigIntValueOf$1)return!1;try{return bigIntValueOf$1.call(r),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(r){return r in this};function has$2(r,n){return hasOwn.call(r,n)}function toStr$7(r){return objectToString.call(r)}function nameOf(r){if(r.name)return r.name;var n=$match.call(functionToString.call(r),/^function\s*([\w$]+)/);return n?n[1]:null}function indexOf$1(r,n){if(r.indexOf)return r.indexOf(n);for(var _=0,x=r.length;_<x;_++)if(r[_]===n)return _;return-1}function isMap$3(r){if(!mapSize||!r||typeof r!="object")return!1;try{mapSize.call(r);try{setSize.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function isWeakMap$1(r){if(!weakMapHas||!r||typeof r!="object")return!1;try{weakMapHas.call(r,weakMapHas);try{weakSetHas.call(r,weakSetHas)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function isWeakRef(r){if(!weakRefDeref||!r||typeof r!="object")return!1;try{return weakRefDeref.call(r),!0}catch{}return!1}function isSet$3(r){if(!setSize||!r||typeof r!="object")return!1;try{setSize.call(r);try{mapSize.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function isWeakSet$1(r){if(!weakSetHas||!r||typeof r!="object")return!1;try{weakSetHas.call(r,weakSetHas);try{weakMapHas.call(r,weakMapHas)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function isElement(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function inspectString(r,n){if(r.length>n.maxStringLength){var _=r.length-n.maxStringLength,x="... "+_+" more character"+(_>1?"s":"");return inspectString($slice$1.call(r,0,n.maxStringLength),n)+x}var S=$replace.call($replace.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(S,"single",n)}function lowbyte(r){var n=r.charCodeAt(0),_={8:"b",9:"t",10:"n",12:"f",13:"r"}[n];return _?"\\"+_:"\\x"+(n<16?"0":"")+$toUpperCase.call(n.toString(16))}function markBoxed(r){return"Object("+r+")"}function weakCollectionOf(r){return r+" { ? }"}function collectionOf(r,n,_,x){var S=x?indentedJoin(_,x):$join.call(_,", ");return r+" ("+n+") {"+S+"}"}function singleLineValues(r){for(var n=0;n<r.length;n++)if(indexOf$1(r[n],`
`)>=0)return!1;return!0}function getIndent(r,n){var _;if(r.indent==="	")_="	";else if(typeof r.indent=="number"&&r.indent>0)_=$join.call(Array(r.indent+1)," ");else return null;return{base:_,prev:$join.call(Array(n+1),_)}}function indentedJoin(r,n){if(r.length===0)return"";var _=`
`+n.prev+n.base;return _+$join.call(r,","+_)+`
`+n.prev}function arrObjKeys(r,n){var _=isArray$6(r),x=[];if(_){x.length=r.length;for(var S=0;S<r.length;S++)x[S]=has$2(r,S)?n(r[S],r):""}var E=typeof gOPS=="function"?gOPS(r):[],C;if(hasShammedSymbols){C={};for(var T=0;T<E.length;T++)C["$"+E[T]]=E[T]}for(var B in r)has$2(r,B)&&(_&&String(Number(B))===B&&B<r.length||hasShammedSymbols&&C["$"+B]instanceof Symbol||($test.call(/[^\w$]/,B)?x.push(n(B,r)+": "+n(r[B],r)):x.push(B+": "+n(r[B],r))));if(typeof gOPS=="function")for(var A=0;A<E.length;A++)isEnumerable.call(r,E[A])&&x.push("["+n(E[A])+"]: "+n(r[E[A]],r));return x}var GetIntrinsic$6=getIntrinsic,callBound$9=callBound$c,inspect$1=objectInspect,$TypeError$1=GetIntrinsic$6("%TypeError%"),$WeakMap$1=GetIntrinsic$6("%WeakMap%",!0),$Map$3=GetIntrinsic$6("%Map%",!0),$weakMapGet=callBound$9("WeakMap.prototype.get",!0),$weakMapSet=callBound$9("WeakMap.prototype.set",!0),$weakMapHas=callBound$9("WeakMap.prototype.has",!0),$mapGet$1=callBound$9("Map.prototype.get",!0),$mapSet=callBound$9("Map.prototype.set",!0),$mapHas$5=callBound$9("Map.prototype.has",!0),listGetNode=function(r,n){for(var _=r,x;(x=_.next)!==null;_=x)if(x.key===n)return _.next=x.next,x.next=r.next,r.next=x,x},listGet=function(r,n){var _=listGetNode(r,n);return _&&_.value},listSet=function(r,n,_){var x=listGetNode(r,n);x?x.value=_:r.next={key:n,next:r.next,value:_}},listHas=function(r,n){return!!listGetNode(r,n)},sideChannel=function(){var n,_,x,S={assert:function(E){if(!S.has(E))throw new $TypeError$1("Side channel does not contain "+inspect$1(E))},get:function(E){if($WeakMap$1&&E&&(typeof E=="object"||typeof E=="function")){if(n)return $weakMapGet(n,E)}else if($Map$3){if(_)return $mapGet$1(_,E)}else if(x)return listGet(x,E)},has:function(E){if($WeakMap$1&&E&&(typeof E=="object"||typeof E=="function")){if(n)return $weakMapHas(n,E)}else if($Map$3){if(_)return $mapHas$5(_,E)}else if(x)return listHas(x,E);return!1},set:function(E,C){$WeakMap$1&&E&&(typeof E=="object"||typeof E=="function")?(n||(n=new $WeakMap$1),$weakMapSet(n,E,C)):$Map$3?(_||(_=new $Map$3),$mapSet(_,E,C)):(x||(x={key:{},next:null}),listSet(x,E,C))}};return S},GetIntrinsic$5=getIntrinsic,has$1=src$4,channel=sideChannel(),$TypeError=GetIntrinsic$5("%TypeError%"),SLOT$1={assert:function(r,n){if(!r||typeof r!="object"&&typeof r!="function")throw new $TypeError("`O` is not an object");if(typeof n!="string")throw new $TypeError("`slot` must be a string");if(channel.assert(r),!SLOT$1.has(r,n))throw new $TypeError("`"+n+"` is not present on `O`")},get:function(r,n){if(!r||typeof r!="object"&&typeof r!="function")throw new $TypeError("`O` is not an object");if(typeof n!="string")throw new $TypeError("`slot` must be a string");var _=channel.get(r);return _&&_["$"+n]},has:function(r,n){if(!r||typeof r!="object"&&typeof r!="function")throw new $TypeError("`O` is not an object");if(typeof n!="string")throw new $TypeError("`slot` must be a string");var _=channel.get(r);return!!_&&has$1(_,"$"+n)},set:function(r,n,_){if(!r||typeof r!="object"&&typeof r!="function")throw new $TypeError("`O` is not an object");if(typeof n!="string")throw new $TypeError("`slot` must be a string");var x=channel.get(r);x||(x={},channel.set(r,x)),x["$"+n]=_}};Object.freeze&&Object.freeze(SLOT$1);var internalSlot=SLOT$1,SLOT=internalSlot,$SyntaxError=SyntaxError,$StopIteration=typeof StopIteration=="object"?StopIteration:null,stopIterationIterator=function(n){if(!$StopIteration)throw new $SyntaxError("this environment lacks StopIteration");SLOT.set(n,"[[Done]]",!1);var _={next:function(){var S=SLOT.get(this,"[[Iterator]]"),E=SLOT.get(S,"[[Done]]");try{return{done:E,value:E?void 0:S.next()}}catch(C){if(SLOT.set(S,"[[Done]]",!0),C!==$StopIteration)throw C;return{done:!0,value:void 0}}}};return SLOT.set(_,"[[Iterator]]",n),_},isarray$2,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray$2;hasRequiredIsarray=1;var r={}.toString;return isarray$2=Array.isArray||function(n){return r.call(n)=="[object Array]"},isarray$2}var strValue=String.prototype.valueOf,tryStringObject=function(n){try{return strValue.call(n),!0}catch{return!1}},toStr$6=Object.prototype.toString,strClass="[object String]",hasToStringTag$7=shams(),isString$4=function(n){return typeof n=="string"?!0:typeof n!="object"?!1:hasToStringTag$7?tryStringObject(n):toStr$6.call(n)===strClass},$Map$2=typeof Map=="function"&&Map.prototype?Map:null,$Set$3=typeof Set=="function"&&Set.prototype?Set:null,exported$2;$Map$2||(exported$2=function(n){return!1});var $mapHas$4=$Map$2?Map.prototype.has:null,$setHas$4=$Set$3?Set.prototype.has:null;!exported$2&&!$mapHas$4&&(exported$2=function(n){return!1});var isMap$2=exported$2||function(n){if(!n||typeof n!="object")return!1;try{if($mapHas$4.call(n),$setHas$4)try{$setHas$4.call(n)}catch{return!0}return n instanceof $Map$2}catch{}return!1},$Map$1=typeof Map=="function"&&Map.prototype?Map:null,$Set$2=typeof Set=="function"&&Set.prototype?Set:null,exported$1;$Set$2||(exported$1=function(n){return!1});var $mapHas$3=$Map$1?Map.prototype.has:null,$setHas$3=$Set$2?Set.prototype.has:null;!exported$1&&!$setHas$3&&(exported$1=function(n){return!1});var isSet$2=exported$1||function(n){if(!n||typeof n!="object")return!1;try{if($setHas$3.call(n),$mapHas$3)try{$mapHas$3.call(n)}catch{return!0}return n instanceof $Set$2}catch{}return!1},isArguments$1=isArguments$2,getStopIterationIterator=stopIterationIterator;if(hasSymbols$5()||shams$1()){var $iterator=Symbol.iterator;esGetIterator.exports=function(n){if(n!=null&&typeof n[$iterator]<"u")return n[$iterator]();if(isArguments$1(n))return Array.prototype[$iterator].call(n)}}else{var isArray$5=requireIsarray(),isString$3=isString$4,GetIntrinsic$4=getIntrinsic,$Map=GetIntrinsic$4("%Map%",!0),$Set$1=GetIntrinsic$4("%Set%",!0),callBound$8=callBound$c,$arrayPush=callBound$8("Array.prototype.push"),$charCodeAt=callBound$8("String.prototype.charCodeAt"),$stringSlice=callBound$8("String.prototype.slice"),advanceStringIndex=function(n,_){var x=n.length;if(_+1>=x)return _+1;var S=$charCodeAt(n,_);if(S<55296||S>56319)return _+1;var E=$charCodeAt(n,_+1);return E<56320||E>57343?_+1:_+2},getArrayIterator=function(n){var _=0;return{next:function(){var S=_>=n.length,E;return S||(E=n[_],_+=1),{done:S,value:E}}}},getNonCollectionIterator=function(n,_){if(isArray$5(n)||isArguments$1(n))return getArrayIterator(n);if(isString$3(n)){var x=0;return{next:function(){var E=advanceStringIndex(n,x),C=$stringSlice(n,x,E);return x=E,{done:E>n.length,value:C}}}}if(_&&typeof n["_es6-shim iterator_"]<"u")return n["_es6-shim iterator_"]()};if(!$Map&&!$Set$1)esGetIterator.exports=function(n){if(n!=null)return getNonCollectionIterator(n,!0)};else{var isMap$1=isMap$2,isSet$1=isSet$2,$mapForEach=callBound$8("Map.prototype.forEach",!0),$setForEach=callBound$8("Set.prototype.forEach",!0);if(typeof browser$1$1>"u"||!browser$1$1.versions||!browser$1$1.versions.node)var $mapIterator=callBound$8("Map.prototype.iterator",!0),$setIterator=callBound$8("Set.prototype.iterator",!0);var $mapAtAtIterator=callBound$8("Map.prototype.@@iterator",!0)||callBound$8("Map.prototype._es6-shim iterator_",!0),$setAtAtIterator=callBound$8("Set.prototype.@@iterator",!0)||callBound$8("Set.prototype._es6-shim iterator_",!0),getCollectionIterator=function(n){if(isMap$1(n)){if($mapIterator)return getStopIterationIterator($mapIterator(n));if($mapAtAtIterator)return $mapAtAtIterator(n);if($mapForEach){var _=[];return $mapForEach(n,function(S,E){$arrayPush(_,[E,S])}),getArrayIterator(_)}}if(isSet$1(n)){if($setIterator)return getStopIterationIterator($setIterator(n));if($setAtAtIterator)return $setAtAtIterator(n);if($setForEach){var x=[];return $setForEach(n,function(S){$arrayPush(x,S)}),getArrayIterator(x)}}};esGetIterator.exports=function(n){return getCollectionIterator(n)||getNonCollectionIterator(n)}}}var esGetIteratorExports=esGetIterator.exports,numberIsNaN=function(r){return r!==r},implementation$2=function(n,_){return n===0&&_===0?1/n===1/_:!!(n===_||numberIsNaN(n)&&numberIsNaN(_))},implementation$1=implementation$2,polyfill$1=function(){return typeof Object.is=="function"?Object.is:implementation$1},getPolyfill$1=polyfill$1,define$1=defineProperties_1,shim$1=function(){var n=getPolyfill$1();return define$1(Object,{is:n},{is:function(){return Object.is!==n}}),n},define=defineProperties_1,callBind$2=callBindExports,implementation=implementation$2,getPolyfill=polyfill$1,shim=shim$1,polyfill=callBind$2(getPolyfill(),Object);define(polyfill,{getPolyfill,implementation,shim});var objectIs=polyfill,toString$8={}.toString,isarray$1=Array.isArray||function(r){return toString$8.call(r)=="[object Array]"},fnToStr$1=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(r){r!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(n){try{var _=fnToStr$1.call(n);return constructorRegex.test(_)}catch{return!1}},tryFunctionObject=function(n){try{return isES6ClassFn(n)?!1:(fnToStr$1.call(n),!0)}catch{return!1}},toStr$5=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag$6=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function(){return!1};if(typeof document=="object"){var all=document.all;toStr$5.call(all)===toStr$5.call(document.all)&&(isDDA=function(n){if((isIE68||!n)&&(typeof n>"u"||typeof n=="object"))try{var _=toStr$5.call(n);return(_===ddaClass||_===ddaClass2||_===ddaClass3||_===objectClass)&&n("")==null}catch{}return!1})}var isCallable$1=reflectApply?function(n){if(isDDA(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;try{reflectApply(n,null,badArrayLike)}catch(_){if(_!==isCallableMarker)return!1}return!isES6ClassFn(n)&&tryFunctionObject(n)}:function(n){if(isDDA(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;if(hasToStringTag$6)return tryFunctionObject(n);if(isES6ClassFn(n))return!1;var _=toStr$5.call(n);return _!==fnClass&&_!==genClass&&!/^\[object HTML/.test(_)?!1:tryFunctionObject(n)},isCallable=isCallable$1,toStr$4=Object.prototype.toString,hasOwnProperty$3=Object.prototype.hasOwnProperty,forEachArray=function(n,_,x){for(var S=0,E=n.length;S<E;S++)hasOwnProperty$3.call(n,S)&&(x==null?_(n[S],S,n):_.call(x,n[S],S,n))},forEachString=function(n,_,x){for(var S=0,E=n.length;S<E;S++)x==null?_(n.charAt(S),S,n):_.call(x,n.charAt(S),S,n)},forEachObject=function(n,_,x){for(var S in n)hasOwnProperty$3.call(n,S)&&(x==null?_(n[S],S,n):_.call(x,n[S],S,n))},forEach$4=function(n,_,x){if(!isCallable(_))throw new TypeError("iterator must be a function");var S;arguments.length>=3&&(S=x),toStr$4.call(n)==="[object Array]"?forEachArray(n,_,S):typeof n=="string"?forEachString(n,_,S):forEachObject(n,_,S)},forEach_1=forEach$4,possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],g$1=typeof globalThis>"u"?commonjsGlobal:globalThis,availableTypedArrays$1=function(){for(var n=[],_=0;_<possibleNames.length;_++)typeof g$1[possibleNames[_]]=="function"&&(n[n.length]=possibleNames[_]);return n},GetIntrinsic$3=getIntrinsic,$gOPD=GetIntrinsic$3("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd=$gOPD,forEach$3=forEach_1,availableTypedArrays=availableTypedArrays$1,callBind$1=callBindExports,callBound$7=callBound$c,gOPD$1=gopd,$toString$2=callBound$7("Object.prototype.toString"),hasToStringTag$5=shams(),g=typeof globalThis>"u"?commonjsGlobal:globalThis,typedArrays=availableTypedArrays(),$slice=callBound$7("String.prototype.slice"),getPrototypeOf$2=Object.getPrototypeOf,$indexOf=callBound$7("Array.prototype.indexOf",!0)||function(n,_){for(var x=0;x<n.length;x+=1)if(n[x]===_)return x;return-1},cache$3={__proto__:null};hasToStringTag$5&&gOPD$1&&getPrototypeOf$2?forEach$3(typedArrays,function(r){var n=new g[r];if(Symbol.toStringTag in n){var _=getPrototypeOf$2(n),x=gOPD$1(_,Symbol.toStringTag);if(!x){var S=getPrototypeOf$2(_);x=gOPD$1(S,Symbol.toStringTag)}cache$3["$"+r]=callBind$1(x.get)}}):forEach$3(typedArrays,function(r){var n=new g[r];cache$3["$"+r]=callBind$1(n.slice)});var tryTypedArrays=function(n){var _=!1;return forEach$3(cache$3,function(x,S){if(!_)try{"$"+x(n)===S&&(_=$slice(S,1))}catch{}}),_},trySlices=function(n){var _=!1;return forEach$3(cache$3,function(x,S){if(!_)try{x(n),_=$slice(S,1)}catch{}}),_},whichTypedArray$2=function(n){if(!n||typeof n!="object")return!1;if(!hasToStringTag$5){var _=$slice($toString$2(n),8,-1);return $indexOf(typedArrays,_)>-1?_:_!=="Object"?!1:trySlices(n)}return gOPD$1?tryTypedArrays(n):null},whichTypedArray$1=whichTypedArray$2,isTypedArray$3=function(n){return!!whichTypedArray$1(n)},callBind=callBindExports,callBound$6=callBound$c,GetIntrinsic$2=getIntrinsic,isTypedArray$2=isTypedArray$3,$ArrayBuffer=GetIntrinsic$2("ArrayBuffer",!0),$Float32Array=GetIntrinsic$2("Float32Array",!0),$byteLength$2=callBound$6("ArrayBuffer.prototype.byteLength",!0),abSlice=$ArrayBuffer&&!$byteLength$2&&new $ArrayBuffer().slice,$abSlice=abSlice&&callBind(abSlice),isArrayBuffer$4=$byteLength$2||$abSlice?function(n){if(!n||typeof n!="object")return!1;try{return $byteLength$2?$byteLength$2(n):$abSlice(n,0),!0}catch{return!1}}:$Float32Array?function(n){try{return new $Float32Array(n).buffer===n&&!isTypedArray$2(n)}catch(_){return typeof n=="object"&&_.name==="RangeError"}}:function(n){return!1},getDay=Date.prototype.getDay,tryDateObject=function(n){try{return getDay.call(n),!0}catch{return!1}},toStr$3=Object.prototype.toString,dateClass="[object Date]",hasToStringTag$4=shams(),isDateObject=function(n){return typeof n!="object"||n===null?!1:hasToStringTag$4?tryDateObject(n):toStr$3.call(n)===dateClass},callBound$5=callBound$c,hasToStringTag$3=shams(),has,$exec,isRegexMarker,badStringifier;if(hasToStringTag$3){has=callBound$5("Object.prototype.hasOwnProperty"),$exec=callBound$5("RegExp.prototype.exec"),isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},typeof Symbol.toPrimitive=="symbol"&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker)}var $toString$1=callBound$5("Object.prototype.toString"),gOPD=Object.getOwnPropertyDescriptor,regexClass="[object RegExp]",isRegex$1=hasToStringTag$3?function(n){if(!n||typeof n!="object")return!1;var _=gOPD(n,"lastIndex"),x=_&&has(_,"value");if(!x)return!1;try{$exec(n,badStringifier)}catch(S){return S===isRegexMarker}}:function(n){return!n||typeof n!="object"&&typeof n!="function"?!1:$toString$1(n)===regexClass},callBound$4=callBound$c,$byteLength$1=callBound$4("SharedArrayBuffer.prototype.byteLength",!0),isSharedArrayBuffer$1=$byteLength$1?function(n){if(!n||typeof n!="object")return!1;try{return $byteLength$1(n),!0}catch{return!1}}:function(n){return!1},numToStr=Number.prototype.toString,tryNumberObject=function(n){try{return numToStr.call(n),!0}catch{return!1}},toStr$2=Object.prototype.toString,numClass="[object Number]",hasToStringTag$2=shams(),isNumberObject=function(n){return typeof n=="number"?!0:typeof n!="object"?!1:hasToStringTag$2?tryNumberObject(n):toStr$2.call(n)===numClass},callBound$3=callBound$c,$boolToStr=callBound$3("Boolean.prototype.toString"),$toString=callBound$3("Object.prototype.toString"),tryBooleanObject=function(n){try{return $boolToStr(n),!0}catch{return!1}},boolClass="[object Boolean]",hasToStringTag$1=shams(),isBooleanObject=function(n){return typeof n=="boolean"?!0:n===null||typeof n!="object"?!1:hasToStringTag$1&&Symbol.toStringTag in n?tryBooleanObject(n):$toString(n)===boolClass},isSymbol$1={exports:{}},toStr$1=Object.prototype.toString,hasSymbols=hasSymbols$5();if(hasSymbols){var symToStr=Symbol.prototype.toString,symStringRegex=/^Symbol\(.*\)$/,isSymbolObject=function(n){return typeof n.valueOf()!="symbol"?!1:symStringRegex.test(symToStr.call(n))};isSymbol$1.exports=function(n){if(typeof n=="symbol")return!0;if(toStr$1.call(n)!=="[object Symbol]")return!1;try{return isSymbolObject(n)}catch{return!1}}}else isSymbol$1.exports=function(n){return!1};var isSymbolExports=isSymbol$1.exports,isBigint={exports:{}},$BigInt=typeof BigInt<"u"&&BigInt,hasBigints=function(){return typeof $BigInt=="function"&&typeof BigInt=="function"&&typeof $BigInt(42)=="bigint"&&typeof BigInt(42)=="bigint"},hasBigInts=hasBigints();if(hasBigInts){var bigIntValueOf=BigInt.prototype.valueOf,tryBigInt=function(n){try{return bigIntValueOf.call(n),!0}catch{}return!1};isBigint.exports=function(n){return n===null||typeof n>"u"||typeof n=="boolean"||typeof n=="string"||typeof n=="number"||typeof n=="symbol"||typeof n=="function"?!1:typeof n=="bigint"?!0:tryBigInt(n)}}else isBigint.exports=function(n){return!1};var isBigintExports=isBigint.exports,isString$2=isString$4,isNumber$2=isNumberObject,isBoolean$2=isBooleanObject,isSymbol=isSymbolExports,isBigInt=isBigintExports,whichBoxedPrimitive$1=function(n){if(n==null||typeof n!="object"&&typeof n!="function")return null;if(isString$2(n))return"String";if(isNumber$2(n))return"Number";if(isBoolean$2(n))return"Boolean";if(isSymbol(n))return"Symbol";if(isBigInt(n))return"BigInt"},$WeakMap=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,$WeakSet$1=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,exported;$WeakMap||(exported=function(n){return!1});var $mapHas$2=$WeakMap?$WeakMap.prototype.has:null,$setHas$2=$WeakSet$1?$WeakSet$1.prototype.has:null;!exported&&!$mapHas$2&&(exported=function(n){return!1});var isWeakmap=exported||function(n){if(!n||typeof n!="object")return!1;try{if($mapHas$2.call(n,$mapHas$2),$setHas$2)try{$setHas$2.call(n,$setHas$2)}catch{return!0}return n instanceof $WeakMap}catch{}return!1},isWeakset={exports:{}},GetIntrinsic$1=getIntrinsic,callBound$2=callBound$c,$WeakSet=GetIntrinsic$1("%WeakSet%",!0),$setHas$1=callBound$2("WeakSet.prototype.has",!0);if($setHas$1){var $mapHas$1=callBound$2("WeakMap.prototype.has",!0);isWeakset.exports=function(n){if(!n||typeof n!="object")return!1;try{if($setHas$1(n,$setHas$1),$mapHas$1)try{$mapHas$1(n,$mapHas$1)}catch{return!0}return n instanceof $WeakSet}catch{}return!1}}else isWeakset.exports=function(n){return!1};var isWeaksetExports=isWeakset.exports,isMap=isMap$2,isSet=isSet$2,isWeakMap=isWeakmap,isWeakSet=isWeaksetExports,whichCollection$1=function(n){if(n&&typeof n=="object"){if(isMap(n))return"Map";if(isSet(n))return"Set";if(isWeakMap(n))return"WeakMap";if(isWeakSet(n))return"WeakSet"}return!1},callBound$1=callBound$c,$byteLength=callBound$1("ArrayBuffer.prototype.byteLength",!0),isArrayBuffer$3=isArrayBuffer$4,arrayBufferByteLength=function(n){return isArrayBuffer$3(n)?$byteLength?$byteLength(n):n.byteLength:NaN},assign$1=object_assign,callBound=callBound$c,flags=regexp_prototype_flags,GetIntrinsic=getIntrinsic,getIterator=esGetIteratorExports,getSideChannel=sideChannel,is$2=objectIs,isArguments=isArguments$2,isArray$4=isarray$1,isArrayBuffer$2=isArrayBuffer$4,isDate$2=isDateObject,isRegex=isRegex$1,isSharedArrayBuffer=isSharedArrayBuffer$1,objectKeys$1=objectKeys$3,whichBoxedPrimitive=whichBoxedPrimitive$1,whichCollection=whichCollection$1,whichTypedArray=whichTypedArray$2,byteLength=arrayBufferByteLength,sabByteLength=callBound("SharedArrayBuffer.prototype.byteLength",!0),$getTime=callBound("Date.prototype.getTime"),gPO=Object.getPrototypeOf,$objToString=callBound("Object.prototype.toString"),$Set=GetIntrinsic("%Set%",!0),$mapHas=callBound("Map.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSize=callBound("Map.prototype.size",!0),$setAdd=callBound("Set.prototype.add",!0),$setDelete=callBound("Set.prototype.delete",!0),$setHas=callBound("Set.prototype.has",!0),$setSize=callBound("Set.prototype.size",!0);function setHasEqualElement(r,n,_,x){for(var S=getIterator(r),E;(E=S.next())&&!E.done;)if(internalDeepEqual(n,E.value,_,x))return $setDelete(r,E.value),!0;return!1}function findLooseMatchingPrimitives(r){if(typeof r>"u")return null;if(typeof r!="object")return typeof r=="symbol"?!1:typeof r=="string"||typeof r=="number"?+r==+r:!0}function mapMightHaveLoosePrim(r,n,_,x,S,E){var C=findLooseMatchingPrimitives(_);if(C!=null)return C;var T=$mapGet(n,C),B=assign$1({},S,{strict:!1});return typeof T>"u"&&!$mapHas(n,C)||!internalDeepEqual(x,T,B,E)?!1:!$mapHas(r,C)&&internalDeepEqual(x,T,B,E)}function setMightHaveLoosePrim(r,n,_){var x=findLooseMatchingPrimitives(_);return x??($setHas(n,x)&&!$setHas(r,x))}function mapHasEqualEntry(r,n,_,x,S,E){for(var C=getIterator(r),T,B;(T=C.next())&&!T.done;)if(B=T.value,internalDeepEqual(_,B,S,E)&&internalDeepEqual(x,$mapGet(n,B),S,E))return $setDelete(r,B),!0;return!1}function internalDeepEqual(r,n,_,x){var S=_||{};if(S.strict?is$2(r,n):r===n)return!0;var E=whichBoxedPrimitive(r),C=whichBoxedPrimitive(n);if(E!==C)return!1;if(!r||!n||typeof r!="object"&&typeof n!="object")return S.strict?is$2(r,n):r==n;var T=x.has(r),B=x.has(n),A;if(T&&B){if(x.get(r)===x.get(n))return!0}else A={};return T||x.set(r,A),B||x.set(n,A),objEquiv(r,n,S,x)}function isBuffer$6(r){return!r||typeof r!="object"||typeof r.length!="number"||typeof r.copy!="function"||typeof r.slice!="function"||r.length>0&&typeof r[0]!="number"?!1:!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))}function setEquiv(r,n,_,x){if($setSize(r)!==$setSize(n))return!1;for(var S=getIterator(r),E=getIterator(n),C,T,B;(C=S.next())&&!C.done;)if(C.value&&typeof C.value=="object")B||(B=new $Set),$setAdd(B,C.value);else if(!$setHas(n,C.value)){if(_.strict||!setMightHaveLoosePrim(r,n,C.value))return!1;B||(B=new $Set),$setAdd(B,C.value)}if(B){for(;(T=E.next())&&!T.done;)if(T.value&&typeof T.value=="object"){if(!setHasEqualElement(B,T.value,_.strict,x))return!1}else if(!_.strict&&!$setHas(r,T.value)&&!setHasEqualElement(B,T.value,_.strict,x))return!1;return $setSize(B)===0}return!0}function mapEquiv(r,n,_,x){if($mapSize(r)!==$mapSize(n))return!1;for(var S=getIterator(r),E=getIterator(n),C,T,B,A,I,N;(C=S.next())&&!C.done;)if(A=C.value[0],I=C.value[1],A&&typeof A=="object")B||(B=new $Set),$setAdd(B,A);else if(N=$mapGet(n,A),typeof N>"u"&&!$mapHas(n,A)||!internalDeepEqual(I,N,_,x)){if(_.strict||!mapMightHaveLoosePrim(r,n,A,I,_,x))return!1;B||(B=new $Set),$setAdd(B,A)}if(B){for(;(T=E.next())&&!T.done;)if(A=T.value[0],N=T.value[1],A&&typeof A=="object"){if(!mapHasEqualEntry(B,r,A,N,_,x))return!1}else if(!_.strict&&(!r.has(A)||!internalDeepEqual($mapGet(r,A),N,_,x))&&!mapHasEqualEntry(B,r,A,N,assign$1({},_,{strict:!1}),x))return!1;return $setSize(B)===0}return!0}function objEquiv(r,n,_,x){var S,E;if(typeof r!=typeof n||r==null||n==null||$objToString(r)!==$objToString(n)||isArguments(r)!==isArguments(n))return!1;var C=isArray$4(r),T=isArray$4(n);if(C!==T)return!1;var B=r instanceof Error,A=n instanceof Error;if(B!==A||(B||A)&&(r.name!==n.name||r.message!==n.message))return!1;var I=isRegex(r),N=isRegex(n);if(I!==N||(I||N)&&(r.source!==n.source||flags(r)!==flags(n)))return!1;var V=isDate$2(r),D=isDate$2(n);if(V!==D||(V||D)&&$getTime(r)!==$getTime(n)||_.strict&&gPO&&gPO(r)!==gPO(n))return!1;var O=whichTypedArray(r),F=whichTypedArray(n);if(O!==F)return!1;if(O||F){if(r.length!==n.length)return!1;for(S=0;S<r.length;S++)if(r[S]!==n[S])return!1;return!0}var M=isBuffer$6(r),L=isBuffer$6(n);if(M!==L)return!1;if(M||L){if(r.length!==n.length)return!1;for(S=0;S<r.length;S++)if(r[S]!==n[S])return!1;return!0}var j=isArrayBuffer$2(r),q=isArrayBuffer$2(n);if(j!==q)return!1;if(j||q)return byteLength(r)!==byteLength(n)?!1:typeof Uint8Array=="function"&&internalDeepEqual(new Uint8Array(r),new Uint8Array(n),_,x);var H=isSharedArrayBuffer(r),X=isSharedArrayBuffer(n);if(H!==X)return!1;if(H||X)return sabByteLength(r)!==sabByteLength(n)?!1:typeof Uint8Array=="function"&&internalDeepEqual(new Uint8Array(r),new Uint8Array(n),_,x);if(typeof r!=typeof n)return!1;var J=objectKeys$1(r),Z=objectKeys$1(n);if(J.length!==Z.length)return!1;for(J.sort(),Z.sort(),S=J.length-1;S>=0;S--)if(J[S]!=Z[S])return!1;for(S=J.length-1;S>=0;S--)if(E=J[S],!internalDeepEqual(r[E],n[E],_,x))return!1;var ae=whichCollection(r),ce=whichCollection(n);return ae!==ce?!1:ae==="Set"||ce==="Set"?setEquiv(r,n,_,x):ae==="Map"?mapEquiv(r,n,_,x):!0}var deepEqual=function(n,_,x){return internalDeepEqual(n,_,x,getSideChannel())};const deepEqual$1=getDefaultExportFromCjs(deepEqual),_sfc_main$1E=defineComponent$1({__name:"DialogueNoms",props:{titre:{},sousTitre:{},nomsInitiaux:{},indiceNom:{},indiceLangue:{},texteAucunNom:{},autorisationModification:{type:Boolean}},emits:["ajusterNoms"],setup(r,{emit:n}){const _=r,{useI18n:x}=_(),{t:S}=x(),{mdAndUp:E}=useDisplay(),C=ref$1(!1),T=()=>{C.value=!1,A.value=_.nomsInitiaux},B=()=>{n("ajusterNoms",A.value),C.value=!1},A=ref$1(_.nomsInitiaux),I=V=>{A.value=V},N=computed(()=>!deepEqual$1(A.value,_.nomsInitiaux));return(V,D)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":D[0]||(D[0]=O=>C.value=O)},{activator:withCtx(({props:O})=>[renderSlot(V.$slots,"activator",normalizeProps(guardReactiveProps({props:O})))]),default:withCtx(()=>[createVNode(VCard,{"max-width":unref(E)?500:300,class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(V.titre),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(V.sousTitre),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"noms-initiaux":V.nomsInitiaux,"texte-aucun-nom":V.texteAucunNom,"indice-langue":V.indiceLangue,"indice-nom":V.indiceNom,"autorisation-modification":V.autorisationModification,onAjusterNoms:I},null,8,["noms-initiaux","texte-aucun-nom","indice-langue","indice-nom","autorisation-modification"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"text","append-icon":"mdi-close",onClick:T},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.fermer")),1)]),_:1}),V.autorisationModification?(openBlock(),createBlock(VBtn,{key:0,color:"primary",variant:"outlined","append-icon":"mdi-check",disabled:!N.value,onClick:B},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.sauvegarder")),1)]),_:1},8,["disabled"])):createCommentVNode("",!0)]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$1D=defineComponent$1({__name:"CarteCopier",setup(r){const{mdAndUp:n}=useDisplay(),_=ref$1(!1);return(x,S)=>(openBlock(),createBlock(VDialog,{modelValue:_.value,"onUpdate:modelValue":S[0]||(S[0]=E=>_.value=E),"max-width":unref(n)?500:300},{activator:withCtx(({props:E})=>[renderSlot(x.$slots,"activator",normalizeProps(guardReactiveProps({props:E})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle)]),_:1}),createVNode(VCardText)]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_hoisted_1$D={class:"text-error"},_hoisted_2$s={class:"text-error font-weight-bold"},_sfc_main$1C=defineComponent$1({__name:"CarteEffacer",props:{titre:{},explication:{}},emits:["effacer"],setup(r,{emit:n}){const{mdAndUp:_}=useDisplay(),{useI18n:x}=_(),{t:S}=x(),E=ref$1(!1),C=()=>{n("effacer"),E.value=!1};return(T,B)=>(openBlock(),createBlock(VDialog,{modelValue:E.value,"onUpdate:modelValue":B[2]||(B[2]=A=>E.value=A),"max-width":unref(_)?500:300},{activator:withCtx(({props:A})=>[renderSlot(T.$slots,"activator",normalizeProps(guardReactiveProps({props:A})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$D,toDisplayString$1(T.titre||unref(S)("effacer.titre")),1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:B[0]||(B[0]=A=>E.value=!1)})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("span",_hoisted_2$s,toDisplayString$1(unref(S)("effacer.avertissement")),1),createTextVNode(" "+toDisplayString$1(T.explication||unref(S)("effacer.explication")),1)]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:B[1]||(B[1]=A=>E.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.annuler")),1)]),_:1}),createVNode(VBtn,{color:"error",variant:"flat","append-icon":"mdi-delete",onClick:C},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("effacer.effacer")),1)]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_sfc_main$1B=defineComponent$1({__name:"BaseCarteObjet",props:{id:{},noms:{},descriptions:{},fichiersEpinglables:{type:Boolean},auteurs:{},sauvegardePossible:{type:Boolean}},emits:["ajusterNoms","ajusterDescriptions","effacer","copier","sauvegarder"],setup(r,{emit:n}){const _=r,x=inject$1("constl"),{mdAndUp:S}=useDisplay(),{useI18n:E}=_(),{t:C}=E(),{traduireNom:T}=utiliserLangues(),B=ref$1(!1),A=ref$1();enregistrercoute(x?.suivrePermission({idObjet:_.id,f:F=>A.value=F}));const I=T(computed(()=>_.noms)),N=T(computed(()=>_.descriptions)),V=async()=>{n("effacer"),B.value=!1},D=async()=>{n("copier"),B.value=!1},O=async()=>{n("sauvegarder"),B.value=!1};return(F,M)=>(openBlock(),createBlock(VDialog,{modelValue:B.value,"onUpdate:modelValue":M[3]||(M[3]=L=>B.value=L)},{activator:withCtx(({props:L})=>[renderSlot(F.$slots,"activator",normalizeProps(guardReactiveProps({props:L})))]),default:withCtx(()=>[createVNode(VCard,{"max-width":unref(S)?700:300,class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createVNode(_sfc_main$1E,{"indice-nom":unref(C)("objet.indiceNom"),"indice-langue":unref(C)("objet.indiceLangue"),"texte-aucun-nom":unref(C)("objet.texteAucunNom"),"noms-initiaux":F.noms,titre:unref(C)("objet.titreDialogueNoms"),"sous-titre":unref(C)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!A.value,onAjusterNoms:M[0]||(M[0]=L=>n("ajusterNoms",L))},{activator:withCtx(({props:L})=>[createBaseVNode("span",normalizeProps(guardReactiveProps(L)),[createTextVNode(toDisplayString$1(unref(I)||unref(C)("communs.baseCarteObjet.sansNom"))+" ",1),createVNode(VBtn,{icon:A.value?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),createVNode(VSpacer),createVNode(_sfc_main$1Y,{id:F.id},null,8,["id"]),createVNode(VBtn,{icon:"",variant:"flat",size:"small"},{default:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-dots-horizontal")]),_:1}),createVNode(VMenu,{activator:"parent"},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(_sfc_main$1D,{onCopier:D},{activator:withCtx(({props:L})=>[createVNode(VListItem,mergeProps(L,{"prepend-icon":"mdi-content-copy"}),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.copier")),1)]),_:1})]),_:2},1040)]),_:1}),createVNode(_sfc_main$1M,{id:F.id,"option-fichiers":F.fichiersEpinglables},{activator:withCtx(({props:L})=>[createVNode(VListItem,mergeProps(L,{"prepend-icon":"mdi-pin"}),{prepend:withCtx(()=>[createVNode(_sfc_main$1L,{id:F.id},null,8,["id"])]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.pingler")),1)]),_:1})]),_:2},1040)]),_:1},8,["id","option-fichiers"]),A.value?(openBlock(),createBlock(_sfc_main$1C,{key:0,onEffacer:V},{activator:withCtx(({props:L})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(L)),{prepend:withCtx(()=>[createVNode(VIcon,{icon:"mdi-delete",color:"error"})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.effacer")),1)]),_:1})]),_:2},1040)]),_:1})):createCommentVNode("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(_sfc_main$1K,{titre:unref(C)("communs.baseCarteObjet.description"),"en-attente":!F.descriptions},null,8,["titre","en-attente"]),createBaseVNode("span",{class:normalizeClass({"text-disabled":!unref(N)})},toDisplayString$1(unref(N)||unref(C)("communs.baseCarteObjet.sansDescription")),3),createVNode(_sfc_main$1E,{"indice-nom":unref(C)("objet.indiceDescription"),"indice-langue":unref(C)("objet.indiceLangue"),"texte-aucun-nom":unref(C)("objet.texteAucuneDescription"),"noms-initiaux":F.descriptions,titre:unref(C)("objet.titreDialogueDescriptions"),"sous-titre":unref(C)("objet.sousTitreDialogueDescriptions"),"autorisation-modification":!!A.value,onAjusterNoms:M[1]||(M[1]=L=>n("ajusterDescriptions",L))},{activator:withCtx(({props:L})=>[createVNode(VBtn,mergeProps(L,{icon:A.value?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"}),null,16,["icon"])]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),createVNode(_sfc_main$1K,{titre:unref(C)("communs.baseCarteObjet.auteurs"),"en-attente":!F.auteurs},null,8,["titre","en-attente"]),createVNode(_sfc_main$1F,{auteurs:F.auteurs},null,8,["auteurs"]),A.value==="MODRATEUR"?(openBlock(),createBlock(_sfc_main$1G,{key:0,id:F.id,auteurs:F.auteurs,"permission-moderateur":A.value==="MODRATEUR"},{activator:withCtx(({props:L})=>[createVNode(VChip,mergeProps(L,{variant:"outlined","prepend-icon":"mdi-plus",class:"me-2 mb-2"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.baseCarteObjet.ajouterAuteur")),1)]),_:2},1040)]),_:1},8,["id","auteurs","permission-moderateur"])):createCommentVNode("",!0),renderSlot(F.$slots,"default")]),_:3}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),F.sauvegardePossible?(openBlock(),createBlock(VBtn,{key:0,variant:"flat",color:"primary",onClick:O},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.sauvegarder")),1)]),_:1})):createCommentVNode("",!0),createVNode(VBtn,{variant:"flat","append-icon":"mdi-close",onClick:M[2]||(M[2]=L=>B.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.fermer")),1)]),_:1})]),_:1})]),_:3},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$1A=defineComponent$1({__name:"ItemRgle",props:{regle:{},effacable:{type:Boolean}},emits:["effacer"],setup(r,{emit:n}){const _=r,{useI18n:x}=_(),{t:S}=x(),E=computed(()=>{switch(_.regle.rgle.typeRgle){case"catgorie":return S("rgles.types.catgorie");case"bornes":return S("rgles.types.bornes");case"existe":return S("rgles.types.existe");case"valeurCatgorique":return S("rgles.types.valeurCatgorique");default:return""}}),C=computed(()=>{const{rgle:T}=_.regle;switch(T.typeRgle){case"catgorie":return S("rgles.infos.catgorie",{categorie:S(`variables.catgories.${T.dtails.catgorie.catgorie}`)});case"bornes":return S("rgles.infos.bornes",{val:T.dtails.val,op:T.dtails.op});case"existe":return S("rgles.infos.existe");case"valeurCatgorique":return S("rgles.infos.valeurCatgorique");default:return""}});return(T,B)=>(openBlock(),createBlock(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(E.value),1)]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.value),1)]),_:1}),createVNode(VListItemAction,null,{default:withCtx(()=>[T.effacable?(openBlock(),createBlock(VBtn,{key:0,icon:"mdi-delete",color:"error",variant:"outlined",onClick:B[0]||(B[0]=()=>n("effacer"))})):createCommentVNode("",!0)]),_:1})]),_:1}))}}),_hoisted_1$C={key:0},_sfc_main$1z=defineComponent$1({__name:"CarteVariable",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),E=ref$1();enregistrercoute(_?.suivrePermission({idObjet:n.id,f:H=>E.value=H}));const C=ref$1({});enregistrercoute(_?.variables.suivreNomsVariable({idVariable:n.id,f:H=>C.value=H}));const T=async H=>{const{Effacer:X,Ajouter:J}=ajusterTexteTraductible({anciennes:C.value,nouvelles:H});for(const Z of X)await _?.variables.effacerNomVariable({idVariable:n.id,langue:Z});return await _?.variables.sauvegarderNomsVariable({idVariable:n.id,noms:J})},B=ref$1({});enregistrercoute(_?.variables.suivreDescriptionsVariable({idVariable:n.id,f:H=>B.value=H}));const A=async H=>{const{Effacer:X,Ajouter:J}=ajusterTexteTraductible({anciennes:B.value,nouvelles:H});for(const Z of X)await _?.variables.effacerDescriptionVariable({idVariable:n.id,langue:Z});return await _?.variables.sauvegarderDescriptionsVariable({idVariable:n.id,descriptions:J})},I=computed(()=>N.value?icneCatgorieVariable(N.value):"mdi-variable"),N=ref$1();enregistrercoute(_?.variables.suivreCatgorieVariable({idVariable:n.id,f:H=>N.value=H}));const V=ref$1(!1),D=ref$1(),O=computed(()=>{if(D.value)return{type:V.value?"liste":"simple",catgorie:D.value}});watchEffect(()=>{V.value=N.value?.type==="liste",D.value=N.value?.catgorie});const F=computed(()=>{if(O.value){const{type:H,catgorie:X}=O.value;return H!==N.value?.type||X!==N.value.catgorie}else return!1}),M=async()=>{O.value&&F.value&&await _?.variables.sauvegarderCatgorieVariable({idVariable:n.id,catgorie:O.value})},L=ref$1();enregistrercoute(_?.rseau?.suivreAuteursVariable({idVariable:n.id,f:H=>L.value=H}));const j=ref$1();enregistrercoute(_?.variables.suivreRglesVariable({idVariable:n.id,f:H=>j.value=H}));const q=async()=>{await _?.variables.effacerVariable({idVariable:n.id})};return(H,X)=>(openBlock(),createBlock(_sfc_main$1B,{id:H.id,noms:C.value,descriptions:B.value,auteurs:L.value,"fichiers-epinglables":!1,"sauvegarde-possible":"",onEffacer:q,onAjusterNoms:X[2]||(X[2]=J=>T(J)),onAjusterDescriptions:X[3]||(X[3]=J=>A(J)),onSauvegarder:X[4]||(X[4]=()=>M())},{activator:withCtx(({props:J})=>[renderSlot(H.$slots,"activator",normalizeProps(guardReactiveProps({props:J})))]),default:withCtx(()=>[createVNode(_sfc_main$1K,{titre:unref(S)("variables.catgorie"),"en-attente":!N.value},null,8,["titre","en-attente"]),E.value&&N.value?(openBlock(),createElementBlock("span",_hoisted_1$C,[createVNode(VSelect,{modelValue:D.value,"onUpdate:modelValue":X[0]||(X[0]=J=>D.value=J),items:unref(catgoriesBase),label:unref(S)("variables.catgorie"),variant:"outlined"},{selection:withCtx(({item:J})=>[createVNode(VIcon,{start:"",icon:unref(icneCatgorieVariable)({type:"simple",catgorie:J.raw})||"mdi-variable"},null,8,["icon"]),createTextVNode(" "+toDisplayString$1(unref(S)(`variables.catgories.${J.raw}`)),1)]),item:withCtx(({item:J,props:Z})=>[createVNode(VListItem,mergeProps(Z,{title:unref(S)(`variables.catgories.${J.raw}`),subtitle:unref(S)(`variables.indicesCatgories.${J.raw}`),"prepend-icon":unref(icneCatgorieVariable)({type:"simple",catgorie:J.raw})||"mdi-variable"}),null,16,["title","subtitle","prepend-icon"])]),_:1},8,["modelValue","items","label"]),createVNode(VCheckbox,{modelValue:V.value,"onUpdate:modelValue":X[1]||(X[1]=J=>V.value=J),label:unref(S)("variables.nouvelle.typeListe")},null,8,["modelValue","label"])])):N.value?(openBlock(),createBlock(VChip,{key:1,label:"",variant:"outlined","prepend-icon":I.value},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)(`variables.catgories.${N.value.catgorie}`)),1)]),_:1},8,["prepend-icon"])):createCommentVNode("",!0),createVNode(_sfc_main$1K,{titre:unref(S)("variables.rgles"),"en-attente":!j.value},null,8,["titre","en-attente"]),j.value?(openBlock(),createBlock(VList,{key:2},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(j.value,J=>(openBlock(),createBlock(_sfc_main$1A,{key:J.id,regle:J},null,8,["regle"]))),128))]),_:1})):createCommentVNode("",!0)]),_:3},8,["id","noms","descriptions","auteurs"]))}}),_sfc_main$1y=defineComponent$1({__name:"ItemVariable",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=computed(()=>T.value?icneCatgorieVariable(T.value):"mdi-variable"),T=ref$1();enregistrercoute(_?.variables.suivreCatgorieVariable({idVariable:n.id,f:I=>T.value=I}));const B=ref$1({}),A=E(B);return enregistrercoute(_?.variables.suivreNomsVariable({idVariable:n.id,f:I=>B.value=I})),(I,N)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.value),1)]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[renderSlot(I.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(unref(A)||unref(S)("variables.sansNom")),1)])]),_:3})]),_:3}))}}),_sfc_main$1x=defineComponent$1({__name:"ItemBd",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=ref$1({}),T=E(C);enregistrercoute(_?.bds.suivreNomsBd({idBd:n.id,f:F=>C.value=F}));const B=ref$1({}),A=E(B);enregistrercoute(_?.bds.suivreDescriptionsBd({idBd:n.id,f:F=>B.value=F}));const I=ref$1(),N=computed(()=>{if(I.value)return URL.createObjectURL(new Blob([I.value],{type:"image"}))});enregistrercoute(_?.bds.suivreImage({idBd:n.id,f:F=>I.value=F}));const{obtImageDco:V}=utiliserImagesDco(),D=V("logoBD"),O=ref$1();return enregistrercoute(_?.bds.suivreVariablesBd({idBd:n.id,f:F=>O.value=F})),(F,M)=>(openBlock(),createBlock(VListItem,{"prepend-avatar":N.value||unref(D),title:unref(T)||unref(S)("bds.sansNom"),subtitle:unref(A)},{default:withCtx(()=>[createVNode(_sfc_main$1Q,{"n-max":3,items:O.value},{jeton:withCtx(({id:L})=>[createVNode(_sfc_main$1z,{id:L},{activator:withCtx(({props:j})=>[createVNode(_sfc_main$1P,mergeProps(j,{id:L,size:"small"}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:L})=>[createVNode(_sfc_main$1z,{id:L},{activator:withCtx(({props:j})=>[createVNode(_sfc_main$1y,mergeProps(j,{id:L}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"])]),_:1},8,["prepend-avatar","title","subtitle"]))}}),_sfc_main$1w=defineComponent$1({__name:"JetonBd",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=ref$1({}),T=E(C);enregistrercoute(_?.bds.suivreNomsBd({idBd:n.id,f:V=>C.value=V}));const B=ref$1(),A=computed(()=>{if(B.value)return URL.createObjectURL(new Blob([B.value],{type:"image"}))});enregistrercoute(_?.bds.suivreImage({idBd:n.id,f:V=>B.value=V}));const{obtImageDco:I}=utiliserImagesDco(),N=I("logoBD");return(V,D)=>(openBlock(),createBlock(VChip,{variant:"outlined",class:"me-2 mb-2"},{default:withCtx(()=>[createVNode(VAvatar,{start:""},{default:withCtx(()=>[createVNode(VImg,{src:A.value||unref(N)},null,8,["src"])]),_:1}),createTextVNode(" "+toDisplayString$1(unref(T)||unref(S)("bds.sansNom")),1)]),_:1}))}}),_sfc_main$1v=defineComponent$1({__name:"JetonProjet",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=ref$1({}),T=E(C);enregistrercoute(_?.projets.suivreNomsProjet({idProjet:n.id,f:V=>C.value=V}));const B=ref$1(),A=computed(()=>{if(B.value)return URL.createObjectURL(new Blob([B.value],{type:"image"}))});enregistrercoute(_?.projets.suivreImage({idProjet:n.id,f:V=>B.value=V}));const{obtImageDco:I}=utiliserImagesDco(),N=I("logoBD");return(V,D)=>(openBlock(),createBlock(VChip,{variant:"outlined"},{default:withCtx(()=>[createVNode(VAvatar,{start:""},{default:withCtx(()=>[createVNode(VImg,{src:A.value||unref(N)},null,8,["src"])]),_:1}),createTextVNode(" "+toDisplayString$1(unref(T)||unref(S)("projets.sansNom")),1)]),_:1}))}}),_sfc_main$1u=defineComponent$1({__name:"ItemProjet",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{traduireNom:x}=utiliserLangues(),S=ref$1({}),E=x(S);enregistrercoute(_?.projets.suivreNomsProjet({idProjet:n.id,f:V=>S.value=V}));const C=ref$1({}),T=x(C);enregistrercoute(_?.projets.suivreDescriptionsProjet({idProjet:n.id,f:V=>S.value=V}));const B=ref$1(),A=computed(()=>{if(B.value)return URL.createObjectURL(new Blob([B.value],{type:"image"}))});enregistrercoute(_?.projets.suivreImage({idProjet:n.id,f:V=>B.value=V}));const{obtImageDco:I}=utiliserImagesDco(),N=I("logoBD");return(V,D)=>(openBlock(),createBlock(VListItem,{"prepend-avatar":A.value||unref(N),title:unref(E),subtitle:unref(T)},{default:withCtx(()=>[renderSlot(V.$slots,"default")]),_:3},8,["prepend-avatar","title","subtitle"]))}}),_sfc_main$1t=defineComponent$1({__name:"JetonNue",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=ref$1({}),T=E(C);enregistrercoute(_?.nues.suivreNomsNue({idNue:n.id,f:V=>C.value=V}));const B=ref$1(),A=computed(()=>{if(B.value)return URL.createObjectURL(new Blob([B.value],{type:"image"}))}),{obtImageDco:I}=utiliserImagesDco(),N=I("logoBD");return(V,D)=>(openBlock(),createBlock(VChip,{variant:"outlined"},{default:withCtx(()=>[createVNode(VAvatar,{start:""},{default:withCtx(()=>[createVNode(VImg,{src:A.value||unref(N)},null,8,["src"])]),_:1}),createTextVNode(" "+toDisplayString$1(unref(T)||unref(S)("nues.sansNom")),1)]),_:1}))}}),_sfc_main$1s=defineComponent$1({__name:"ItemNue",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=ref$1({}),T=E(C);enregistrercoute(_?.nues.suivreNomsNue({idNue:n.id,f:O=>C.value=O}));const B=ref$1({}),A=E(B);enregistrercoute(_?.nues.suivreDescriptionsNue({idNue:n.id,f:O=>B.value=O}));const I=ref$1(),N=computed(()=>{if(I.value)return URL.createObjectURL(new Blob([I.value],{type:"image"}))}),{obtImageDco:V}=utiliserImagesDco(),D=V("logoBD");return(O,F)=>(openBlock(),createBlock(VListItem,{"prepend-avatar":N.value||unref(D),title:unref(T)||unref(S)("nues.sansNom"),subtitle:unref(A)||unref(S)("communs.baseCarteObjet.sansDescription")},{append:withCtx(()=>[createVNode(_sfc_main$1Y,{id:O.id},null,8,["id"])]),_:1},8,["prepend-avatar","title","subtitle"]))}}),_sfc_main$1r=defineComponent$1({__name:"IcneConfiance",props:{confiance:{},cestMoi:{type:Boolean}},setup(r){const n=r,_=computed(()=>n.confiance<0?"mdi-cancel":n.cestMoi?"mdi-check":"mdi-hands-pray"),x=computed(()=>n.confiance<0?"error":n.confiance===1?"success":`rgba(22, 151, 246, ${.1+n.confiance*.9})`);return(S,E)=>(openBlock(),createBlock(VIcon,{color:x.value,start:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(_.value),1)]),_:1},8,["color"]))}}),_hoisted_1$B={class:"my-2"},_hoisted_2$r={class:"font-weight-bold"},_hoisted_3$g={class:"text-medium-emphasis text-caption"},_hoisted_4$8={class:"font-weight-bold"},_hoisted_5$7={class:"text-medium-emphasis text-caption"},_hoisted_6$7={class:"font-weight-bold"},_hoisted_7$3={class:"text-medium-emphasis text-caption"},_hoisted_8$3={class:"font-weight-bold"},_hoisted_9$3={class:"text-medium-emphasis text-caption"},_sfc_main$1q=defineComponent$1({__name:"CarteConfianceMembre",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{mdAndUp:E}=useDisplay(),C=ref$1(!1),T=ref$1(),B=ref$1();enregistrercoute(_?.rseau?.suivreBloqus({f:V=>B.value=V})),enregistrercoute(_?.rseau?.suivreFiables({f:V=>T.value=V}));const A=computed(()=>{if(T.value?.includes(n.id))return"fiable";{const V=B.value?.find(D=>D.idCompte===n.id);return V?V.priv?"bloquPriv":"bloquPublique":"inconnu"}}),I=ref$1(A.value);watchEffect(()=>{I.value=A.value});const N=async()=>{switch(I.value){case"fiable":await _?.rseau?.faireConfianceAuMembre({idCompte:n.id});break;case"bloquPublique":case"bloquPriv":await _?.rseau?.bloquerMembre({idCompte:n.id,priv:I.value==="bloquPriv"});break;case"inconnu":A.value==="fiable"?await _?.rseau?.nePlusFaireConfianceAuMembre({idCompte:n.id}):await _?.rseau?.dbloquerMembre({idCompte:n.id});break}};return(V,D)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":D[2]||(D[2]=O=>C.value=O)},{activator:withCtx(({props:O})=>[renderSlot(V.$slots,"activator",normalizeProps(guardReactiveProps({props:O})))]),default:withCtx(()=>[createVNode(VCard,{"max-width":unref(E)?500:300,class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("membres.confiance.titreCarte")),1)]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$B,[createVNode(_sfc_main$1W,{compte:V.id},null,8,["compte"])]),createTextVNode(" "+toDisplayString$1(unref(S)("membres.confiance.question"))+" ",1),createVNode(VRadioGroup,{modelValue:I.value,"onUpdate:modelValue":D[0]||(D[0]=O=>I.value=O)},{default:withCtx(()=>[createVNode(VRadio,{value:"inconnu",class:"my-2"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_2$r,[createVNode(VIcon,{icon:"mdi-account-question-outline",start:"",size:"small"}),createTextVNode(" "+toDisplayString$1(unref(S)("membres.confiance.inconnu")),1)]),createBaseVNode("p",_hoisted_3$g,toDisplayString$1(unref(S)("membres.confiance.indiceInconnu")),1)])]),_:1}),createVNode(VRadio,{value:"fiable",class:"my-2",color:"success"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_4$8,[createVNode(VIcon,{icon:"mdi-account-check",color:"success",start:"",size:"small"}),createTextVNode(" "+toDisplayString$1(unref(S)("membres.confiance.faireConfiance")),1)]),createBaseVNode("p",_hoisted_5$7,toDisplayString$1(unref(S)("membres.confiance.indiceFaireConfiance")),1)])]),_:1}),createVNode(VRadio,{value:"bloquPublique",class:"my-2",color:"error"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_6$7,[createVNode(VIcon,{icon:"mdi-account-cancel",color:"error",size:"small",start:""}),createTextVNode(" "+toDisplayString$1(unref(S)("membres.confiance.bloquerPublique")),1)]),createBaseVNode("p",_hoisted_7$3,toDisplayString$1(unref(S)("membres.confiance.indiceBloquerPublique")),1)])]),_:1}),createVNode(VRadio,{value:"bloquPriv",class:"my-2",color:"error"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_8$3,[createVNode(VIcon,{icon:"mdi-account-cancel-outline",color:"error",start:"",size:"small"}),createTextVNode(" "+toDisplayString$1(unref(S)("membres.confiance.bloquerPriv")),1)]),createBaseVNode("p",_hoisted_9$3,toDisplayString$1(unref(S)("membres.confiance.indiceBloquerPriv")),1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:D[1]||(D[1]=O=>C.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1}),createVNode(VBtn,{variant:"outlined",color:"primary",disabled:A.value===I.value,onClick:N},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$1p=defineComponent$1({__name:"JetonConfiance",props:{id:{},styleJeton:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),E=ref$1();enregistrercoute(_?.suivreIdCompte({f:B=>E.value=B}));const C=ref$1(0);enregistrercoute(_?.rseau?.suivreConfianceMonRseauPourMembre({idCompte:n.id,f:B=>C.value=B,profondeur:5}));const T=computed(()=>C.value<0?S("membres.confiance.bloqu"):C.value===0?S("membres.confiance.inconnu"):C.value<.33?S("membres.confiance.peuDinteraction"):C.value<.67?S("membres.confiance.interactionMoyenne"):C.value<1?S("membres.confiance.beaucoupDinteraction"):C.value===1?n.id===E.value?S("membres.moi"):S("membres.confiance.connaissance"):"");return(B,A)=>B.id!==E.value?(openBlock(),createBlock(_sfc_main$1q,{key:0,id:B.id},{activator:withCtx(({props:I})=>[B.styleJeton==="icne"?(openBlock(),createBlock(_sfc_main$1r,mergeProps({key:0},I,{confiance:C.value,"cest-moi":B.id===E.value}),null,16,["confiance","cest-moi"])):(openBlock(),createBlock(VChip,mergeProps({key:1},I,{label:"",variant:"outlined",size:"small"}),{prepend:withCtx(()=>[createVNode(_sfc_main$1r,{confiance:C.value,"cest-moi":B.id===E.value},null,8,["confiance","cest-moi"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(T.value),1)]),_:2},1040))]),_:1},8,["id"])):(openBlock(),createBlock(VTooltip,{key:1,text:T.value},{activator:withCtx(({props:I})=>[B.styleJeton==="icne"?(openBlock(),createBlock(_sfc_main$1r,mergeProps({key:0},I,{confiance:C.value,"cest-moi":B.id===E.value}),null,16,["confiance","cest-moi"])):(openBlock(),createBlock(VChip,mergeProps({key:1},I,{label:"",variant:"outlined",size:"small"}),{prepend:withCtx(()=>[createVNode(_sfc_main$1r,{confiance:C.value,"cest-moi":B.id===E.value},null,8,["confiance","cest-moi"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(T.value),1)]),_:2},1040))]),_:1},8,["text"]))}}),_sfc_main$1o=defineComponent$1({__name:"JetonLicence",props:{licence:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),E=ref$1();enregistrercoute(_?.licences.suivreLicences({f:T=>E.value=T}));const C=computed(()=>n.licence&&E.value&&Object.keys(E.value).includes(n.licence));return(T,B)=>(openBlock(),createBlock(VChip,{class:"mb-2 me-2",variant:"outlined",label:""},{prepend:withCtx(()=>[createVNode(VIcon,{start:"",color:C.value?"primary":"error"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.value?"mdi-scale-balance":"mdi-alert"),1)]),_:1},8,["color"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(C.value?unref(S)(`licences.info.${T.licence}.abr`):T.licence),1)]),_:1}))}}),_sfc_main$1n=defineComponent$1({__name:"JetonMotClef",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=ref$1({}),T=E(C);return enregistrercoute(_?.motsClefs.suivreNomsMotClef({idMotClef:n.id,f:B=>C.value=B})),(B,A)=>(openBlock(),createBlock(VChip,{class:"mb-2 me-2","prepend-icon":"mdi-key",variant:"outlined",size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(T)||unref(S)("motsClefs.sansNom")),1)]),_:1}))}}),_sfc_main$1m=defineComponent$1({__name:"ItemMotClef",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=ref$1({}),T=E(C);enregistrercoute(_?.motsClefs.suivreNomsMotClef({idMotClef:n.id,f:I=>C.value=I}));const B=ref$1({}),A=E(B);return enregistrercoute(_?.motsClefs.suivreDescriptionsMotClef({idMotClef:n.id,f:I=>B.value=I})),(I,N)=>(openBlock(),createBlock(VListItem,{class:"text-start","prepend-icon":"mdi-key",density:"compact"},{title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(T)||unref(S)("motsClefs.sansNom")),1)]),subtitle:withCtx(()=>[createTextVNode(toDisplayString$1(unref(A)||unref(S)("communs.baseCarteObjet.sansDescription")),1)]),append:withCtx(()=>[createVNode(_sfc_main$1Y,{id:I.id},null,8,["id"])]),_:1}))}}),_sfc_main$1l=defineComponent$1({__name:"ItemTableau",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=ref$1({});enregistrercoute(_?.tableaux.suivreNomsTableau({idTableau:n.id,f:A=>C.value=A}));const T=E(C),B=ref$1();return enregistrercoute(_?.tableaux.suivreVariables({idTableau:n.id,f:A=>B.value=A})),(A,I)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-table")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,{class:"mb-2"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(T)||unref(S)("tableaux.sansNom")),1)]),_:1}),createVNode(_sfc_main$1Q,{items:B.value,"n-max":3},{jeton:withCtx(({id:N})=>[createVNode(_sfc_main$1z,{id:N},{activator:withCtx(({props:V})=>[createVNode(_sfc_main$1P,mergeProps(V,{id:N,size:"small"}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:N})=>[createVNode(_sfc_main$1z,{id:N},{activator:withCtx(({props:V})=>[createVNode(_sfc_main$1y,mergeProps(V,{id:N}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"])]),_:1}))}}),_hoisted_1$A={class:"text-center"},_hoisted_2$q={class:"text-h6 font-weight-light mb-2"},_sfc_main$1k=defineComponent$1({__name:"NouveauMotClef",setup(r){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{mdAndUp:S}=useDisplay(),E=ref$1(!1),C=ref$1(0),T=["noms","descriptions","confirmation"],B=computed(()=>{switch(T[C.value]){case"noms":return x("motsClefs.nouveau.titreNoms");case"descriptions":return x("motsClefs.nouveau.titreDescriptions");case"confirmation":return x("motsClefs.nouveau.titreConfirmation");default:return""}}),A=computed(()=>{switch(T[C.value]){case"noms":return x("motsClefs.nouveau.sousTitreNoms");case"descriptions":return x("motsClefs.nouveau.sousTitreDescriptions");case"confirmation":return x("motsClefs.nouveau.sousTitreConfirmation");default:return""}}),I=()=>{switch(T[C.value]){default:C.value--;break}},N=()=>{switch(T[C.value]){default:C.value++;break}},V=computed(()=>{switch(T[C.value]){case"noms":return{actif:!!Object.keys(O.value).length,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),D=computed(()=>{switch(T[C.value]){case"noms":return{actif:!1,visible:!1};case"confirmation":return{actif:!j.value,visible:!0};default:return{actif:!0,visible:!0}}}),O=ref$1({}),F=X=>{O.value=X},M=ref$1({}),L=X=>{M.value=X},j=ref$1(!1),q=async()=>{j.value=!0;const X=await n?.motsClefs.crerMotClef();if(!X)throw new Error("Mot clef non cr.");await n?.motsClefs.sauvegarderNomsMotClef({idMotClef:X,noms:Object.fromEntries(Object.entries(O.value))}),await n?.motsClefs.sauvegarderDescriptionsMotClef({idMotClef:X,descriptions:Object.fromEntries(Object.entries(M.value))}),H()},H=()=>{O.value={},M.value={},C.value=0,j.value=!1,E.value=!1};return(X,J)=>(openBlock(),createBlock(VDialog,{modelValue:E.value,"onUpdate:modelValue":J[2]||(J[2]=Z=>E.value=Z)},{activator:withCtx(({props:Z})=>[renderSlot(X.$slots,"activator",normalizeProps(guardReactiveProps({props:Z})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(S)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(B.value)+" ",1),createVNode(VSpacer),createVNode(VBtn,{variant:"flat",size:"small",icon:"mdi-close",onClick:H})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:C.value,"onUpdate:modelValue":J[1]||(J[1]=Z=>C.value=Z),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[(openBlock(),createBlock(VWindowItem,{key:0},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("communs.texteAucunNom"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("communs.indiceNom"),"noms-initiaux":O.value,"autorisation-modification":!0,onAjusterNoms:F},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1})),(openBlock(),createBlock(VWindowItem,{key:1},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("motsClefs.nouveau.texteAucuneDescription"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("motsClefs.nouveau.texteIndiceDescription"),"noms-initiaux":M.value,"autorisation-modification":!0,onAjusterNoms:L},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1})),(openBlock(),createBlock(VWindowItem,{key:2},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$A,[createBaseVNode("h3",_hoisted_2$q,toDisplayString$1(unref(x)("motsClefs.nouveau.texteCrer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:j.value,onClick:J[0]||(J[0]=()=>q())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("motsClefs.nouveau.texteBtnCration")),1)]),_:1},8,["loading"])])])]),_:1}))]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!D.value.actif,onClick:I},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,D.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!V.value.actif,onClick:N},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,V.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$1j=defineComponent$1({__name:"GrerMotsClefsObjet",props:{originaux:{}},emits:["sauvegarder"],setup(r,{emit:n}){const _=r,{useI18n:x}=_(),{t:S}=x(),{mdAndUp:E}=useDisplay(),C=inject$1("constl"),T=ref$1(!1),B=ref$1(!1),A=ref$1(_.originaux),I=L=>{A.value=A.value.filter(j=>j!==L)},N=L=>{L&&A.value.push(L)},V=()=>{n("sauvegarder",A.value)},D=ref$1(),O=ref$1(),F=ref$1();let M;return watchEffect(async()=>{if(M&&await M(),O.value){const L=await C?.recherche.rechercherMotsClefsSelonTexte({texte:O.value,f:j=>F.value=j,nRsultatsDsirs:10});L&&(M=L.fOublier)}else F.value=[]}),onUnmounted(async()=>{M&&await M()}),(L,j)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":j[4]||(j[4]=q=>T.value=q)},{activator:withCtx(({props:q})=>[createVNode(VChip,mergeProps(q,{class:"mb-2 me-2",variant:"outlined","prepend-icon":"mdi-pencil-outline",size:"small"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("motsClefs.grerMotsClefsObjet")),1)]),_:2},1040)]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(E)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("motsClefs.grerMotsClefsObjet.titreCarte")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VDialog,{modelValue:B.value,"onUpdate:modelValue":j[3]||(j[3]=q=>B.value=q)},{activator:withCtx(({props:q})=>[createVNode(VChip,mergeProps(q,{variant:"outlined","prepend-icon":"mdi-plus"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("motsClefs.ajouterObjet")),1)]),_:2},1040)]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(E)?500:300},{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VTextField,{modelValue:O.value,"onUpdate:modelValue":j[0]||(j[0]=q=>O.value=q),variant:"outlined"},null,8,["modelValue"]),createVNode(VSelect,{modelValue:D.value,"onUpdate:modelValue":j[1]||(j[1]=q=>D.value=q),items:F.value,variant:"outlined"},{selection:withCtx(({item:q})=>[createVNode(_sfc_main$1n,{id:q.value},null,8,["id"])]),item:withCtx(({item:q,props:H})=>[createVNode(_sfc_main$1m,mergeProps(H,{id:q.value}),null,16,["id"])]),_:1},8,["modelValue","items"]),createVNode(_sfc_main$1k,null,{default:withCtx(()=>[createVNode(VBtn,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("motsClefs.nouveauMotClef")),1)]),_:1})]),_:1})]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VBtn,{onClick:j[2]||(j[2]=()=>N(D.value))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.sauvegarder")),1)]),_:1})]),_:1})]),_:1},8,["max-width"])]),_:1},8,["modelValue"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(A.value,q=>(openBlock(),createBlock(_sfc_main$1m,{id:q,key:q,effacable:!0,onEffacer:I},null,8,["id"]))),128))]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VBtn,{onClick:V})]),_:1})]),_:1},8,["max-width"])]),_:1},8,["modelValue"]))}}),_hoisted_1$z={key:0},_sfc_main$1i=defineComponent$1({__name:"JetonRplications",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{formatterChiffre:E}=utiliserNumration(),C=ref$1();enregistrercoute(_?.rseau?.suivreRplications({idObjet:n.id,f:N=>C.value=N,profondeur:5}));const T=computed(()=>C.value?.dispositifs.length||0),B=E(T),A=computed(()=>C.value?.dispositifs.filter(N=>!N.vu).length||0),I=E(A);return(N,V)=>(openBlock(),createBlock(VChip,{class:"mb-2 me-2",variant:"outlined",label:""},{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode("mdi-pin-outline")]),_:1}),createTextVNode(" "+toDisplayString$1(unref(B))+" "+toDisplayString$1(unref(S)("rplications.rplications",T.value))+" ",1),T.value>0?(openBlock(),createElementBlock("span",_hoisted_1$z,toDisplayString$1(unref(S)("rplications.rplicationsEnLigne",[unref(I)])),1)):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$1h=defineComponent$1({__name:"CarteMotClef",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),x=ref$1({});enregistrercoute(_?.motsClefs.suivreNomsMotClef({idMotClef:n.id,f:A=>x.value=A}));const S=async A=>{const{Effacer:I,Ajouter:N}=ajusterTexteTraductible({anciennes:x.value,nouvelles:A});for(const V of I)await _?.motsClefs.effacerNomMotClef({idMotClef:n.id,langue:V});return await _?.motsClefs.sauvegarderNomsMotClef({idMotClef:n.id,noms:N})},E=ref$1({});enregistrercoute(_?.motsClefs.suivreDescriptionsMotClef({idMotClef:n.id,f:A=>E.value=A}));const C=async A=>{const{Effacer:I,Ajouter:N}=ajusterTexteTraductible({anciennes:E.value,nouvelles:A});for(const V of I)await _?.motsClefs.effacerDescriptionMotClef({id:n.id,langue:V});return await _?.motsClefs.sauvegarderDescriptionsMotClef({idMotClef:n.id,descriptions:N})},T=ref$1();enregistrercoute(_?.rseau?.suivreAuteursMotClef({idMotClef:n.id,f:A=>T.value=A}));const B=async()=>{await _?.motsClefs.effacerMotClef({idMotClef:n.id})};return(A,I)=>(openBlock(),createBlock(_sfc_main$1B,{id:A.id,noms:x.value,descriptions:E.value,auteurs:T.value,"fichiers-epinglables":!1,onAjusterNoms:I[0]||(I[0]=N=>S(N)),onAjusterDescriptions:I[1]||(I[1]=N=>C(N)),onEffacer:B},{activator:withCtx(({props:N})=>[renderSlot(A.$slots,"activator",normalizeProps(guardReactiveProps({props:N})))]),_:3},8,["id","noms","descriptions","auteurs"]))}}),VSkeletonLoader$1="",rootTypes={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function genBone(r){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return createVNode("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${r}`]},[n])}function genBones(r){const[n,_]=r.split("@");return Array.from({length:_}).map(()=>genStructure(n))}function genStructure(r){let n=[];if(!r)return n;const _=rootTypes[r];if(r!==_){if(r.includes(","))return mapBones(r);if(r.includes("@"))return genBones(r);_.includes(",")?n=mapBones(_):_.includes("@")?n=genBones(_):_&&n.push(genStructure(_))}return[genBone(r,n)]}function mapBones(r){return r.replace(/\s/g,"").split(",").map(genStructure)}const makeVSkeletonLoaderProps=propsFactory({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"image"},...makeDimensionProps(),...makeElevationProps(),...makeThemeProps()},"VSkeletonLoader"),VSkeletonLoader=genericComponent()({name:"VSkeletonLoader",props:makeVSkeletonLoaderProps(),setup(r,n){let{slots:_}=n;const{backgroundColorClasses:x,backgroundColorStyles:S}=useBackgroundColor(toRef(r,"color")),{dimensionStyles:E}=useDimension(r),{elevationClasses:C}=useElevation(r),{themeClasses:T}=provideTheme(r),{t:B}=useLocale(),A=computed(()=>genStructure(wrapInArray(r.type).join(",")));return useRender(()=>{const I=!_.default||r.loading;return createVNode("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":r.boilerplate},T.value,x.value,C.value],style:[S.value,I?E.value:{}],"aria-busy":r.boilerplate?void 0:I,"aria-live":r.boilerplate?void 0:"polite","aria-label":r.boilerplate?void 0:B(r.loadingText),role:r.boilerplate?void 0:"alert"},[I?A.value:_.default?.()])}),{}}}),_sfc_main$1g=defineComponent$1({__name:"JetonDroitLicence",props:{droit:{}},setup(r){const{useI18n:n}=_(),{t:_}=n();return(x,S)=>(openBlock(),createBlock(VTooltip,{location:"bottom"},{activator:withCtx(({props:E})=>[createVNode(VChip,mergeProps(E,{variant:"outlined",size:"small",label:"",class:"ma-1 my-1"}),{default:withCtx(()=>[createVNode(VIcon,{start:"",color:"success"},{default:withCtx(()=>[createTextVNode(" mdi-check ")]),_:1}),createTextVNode(" "+toDisplayString$1(unref(_)(`licences.droits.${x.droit}`)),1)]),_:2},1040)]),default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(_)(`licences.dtails.droits.${x.droit}`)),1)]),_:1}))}}),_sfc_main$1f=defineComponent$1({__name:"JetonLimitationLicence",props:{limitation:{}},setup(r){const{useI18n:n}=_(),{t:_}=n();return(x,S)=>(openBlock(),createBlock(VTooltip,{location:"bottom"},{activator:withCtx(({props:E})=>[createVNode(VChip,mergeProps(E,{variant:"outlined",size:"small",label:"",class:"ma-1 my-1"}),{default:withCtx(()=>[createVNode(VIcon,{start:"",color:"error"},{default:withCtx(()=>[createTextVNode(" mdi-close ")]),_:1}),createTextVNode(" "+toDisplayString$1(unref(_)(`licences.limitations.${x.limitation}`)),1)]),_:2},1040)]),default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(_)(`licences.dtails.limitations.${x.limitation}`)),1)]),_:1}))}}),_sfc_main$1e=defineComponent$1({__name:"JetonConditionLicence",props:{condition:{}},setup(r){const{useI18n:n}=_(),{t:_}=n();return(x,S)=>(openBlock(),createBlock(VTooltip,{location:"bottom"},{activator:withCtx(({props:E})=>[createVNode(VChip,mergeProps(E,{variant:"outlined",size:"small",label:"",class:"ma-1 my-1"}),{default:withCtx(()=>[createVNode(VIcon,{start:"",color:"blue"},{default:withCtx(()=>[createTextVNode(" mdi-information-outline ")]),_:1}),createTextVNode(" "+toDisplayString$1(unref(_)(`licences.conditions.${x.condition}`)),1)]),_:2},1040)]),default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(_)(`licences.dtails.conditions.${x.condition}`)),1)]),_:1}))}}),VAlert$1="",VAlertTitle=createSimpleFunctional("v-alert-title"),allowedTypes=["success","info","warning","error"],makeVAlertProps=propsFactory({border:{type:[Boolean,String],validator:r=>typeof r=="boolean"||["top","end","bottom","start"].includes(r)},borderColor:String,closable:Boolean,closeIcon:{type:IconValue,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:r=>allowedTypes.includes(r)},...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeLocationProps(),...makePositionProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"flat"})},"VAlert"),VAlert=genericComponent()({name:"VAlert",props:makeVAlertProps(),emits:{"click:close":r=>!0,"update:modelValue":r=>!0},setup(r,n){let{emit:_,slots:x}=n;const S=useProxiedModel(r,"modelValue"),E=computed(()=>{if(r.icon!==!1)return r.type?r.icon??`$${r.type}`:r.icon}),C=computed(()=>({color:r.color??r.type,variant:r.variant})),{themeClasses:T}=provideTheme(r),{colorClasses:B,colorStyles:A,variantClasses:I}=useVariant(C),{densityClasses:N}=useDensity(r),{dimensionStyles:V}=useDimension(r),{elevationClasses:D}=useElevation(r),{locationStyles:O}=useLocation(r),{positionClasses:F}=usePosition(r),{roundedClasses:M}=useRounded(r),{textColorClasses:L,textColorStyles:j}=useTextColor(toRef(r,"borderColor")),{t:q}=useLocale(),H=computed(()=>({"aria-label":q(r.closeLabel),onClick(X){S.value=!1,_("click:close",X)}}));return()=>{const X=!!(x.prepend||E.value),J=!!(x.title||r.title),Z=!!(x.close||r.closable);return S.value&&createVNode(r.tag,{class:["v-alert",r.border&&{"v-alert--border":!!r.border,[`v-alert--border-${r.border===!0?"start":r.border}`]:!0},{"v-alert--prominent":r.prominent},T.value,B.value,N.value,D.value,F.value,M.value,I.value,r.class],style:[A.value,V.value,O.value,r.style],role:"alert"},{default:()=>[genOverlays(!1,"v-alert"),r.border&&createVNode("div",{key:"border",class:["v-alert__border",L.value],style:j.value},null),X&&createVNode("div",{key:"prepend",class:"v-alert__prepend"},[x.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!E.value,defaults:{VIcon:{density:r.density,icon:E.value,size:r.prominent?44:28}}},x.prepend):createVNode(VIcon,{key:"prepend-icon",density:r.density,icon:E.value,size:r.prominent?44:28},null)]),createVNode("div",{class:"v-alert__content"},[J&&createVNode(VAlertTitle,{key:"title"},{default:()=>[x.title?.()??r.title]}),x.text?.()??r.text,x.default?.()]),x.append&&createVNode("div",{key:"append",class:"v-alert__append"},[x.append()]),Z&&createVNode("div",{key:"close",class:"v-alert__close"},[x.close?createVNode(VDefaultsProvider,{key:"close-defaults",defaults:{VBtn:{icon:r.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[x.close?.({props:H.value})]}):createVNode(VBtn,mergeProps({key:"close-btn",icon:r.closeIcon,size:"x-small",variant:"text"},H.value),null)])]})}}}),_hoisted_1$y={class:"mt-3 mb-0"},_hoisted_2$p={key:0},_hoisted_3$f={key:1},_hoisted_4$7={class:"mb-0 text-h6"},_hoisted_5$6={key:1,class:"text--disabled"},_hoisted_6$6={class:"mb-0 text-h6"},_hoisted_7$2={key:3,class:"text--disabled"},_hoisted_8$2={class:"mb-0 text-h6"},_hoisted_9$2={key:5,class:"text--disabled"},_sfc_main$1d=defineComponent$1({__name:"DialogueLicence",props:{licence:{type:String,required:!1,default:void 0},permissionModifier:{default:!1,type:Boolean}},emits:["changerLicence"],setup(r,{emit:n}){const _=r,x=inject$1("constl"),{useI18n:S}=_(),{t:E}=S(),C=ref$1(!1),T=ref$1(_.licence);watchEffect(()=>{T.value=_.licence});const B=computed(()=>T.value!==_.licence),A=ref$1();enregistrercoute(x?.licences.suivreLicences({f:H=>A.value=H}));const I=computed(()=>A.value?Object.keys(A.value):[]),N=computed(()=>T.value?A.value?.[T.value]?.droits:void 0),V=computed(()=>T.value?A.value?.[T.value]?.conditions:void 0),D=computed(()=>T.value?A.value?.[T.value]?.limitations:void 0),O=H=>E(`licences.info.${H||"introuvable"}.nom`),F=H=>E(`licences.info.${H||"introuvable"}.abr`),M=H=>{if(!H)return;const X=`licences.info.${H}.lien`,J=E(X);if(J!==X)return J},L=H=>{const X=M(H);X&&ouvrirLien(X)},j=()=>{T.value&&n("changerLicence",T.value),C.value=!1},q=()=>{C.value=!1,T.value=_.licence};return(H,X)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":X[3]||(X[3]=J=>C.value=J),scrollable:"","max-width":"500"},{activator:withCtx(({props:J})=>[renderSlot(H.$slots,"activator",normalizeProps(guardReactiveProps({props:J})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("licences.carte.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"small",onClick:X[0]||(X[0]=J=>C.value=!1)})]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VSelect,{modelValue:T.value,"onUpdate:modelValue":X[1]||(X[1]=J=>T.value=J),items:I.value,variant:"outlined",density:"compact",disabled:!r.permissionModifier},{item:withCtx(({item:J,props:Z})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(Z)),{title:withCtx(()=>[createVNode(VListItemTitle,{class:normalizeClass({"font-weight-bold":J.value===T.value})},{default:withCtx(()=>[createTextVNode(toDisplayString$1(O(J.value)),1)]),_:2},1032,["class"])]),subtitle:withCtx(()=>[createTextVNode(toDisplayString$1(F(J.value)),1)]),_:2},1040)]),selection:withCtx(({item:J})=>[createTextVNode(toDisplayString$1(F(J.value)),1)]),_:1},8,["modelValue","items","disabled"]),createBaseVNode("p",_hoisted_1$y,[createVNode(VAlert,{text:unref(E)("licences.avertissement"),type:"warning",variant:"outlined",density:"compact"},{default:withCtx(()=>[createBaseVNode("div",null,[createVNode(VBtn,{class:"mx-auto my-3",variant:"outlined",size:"small",disabled:!M(r.licence),onClick:X[2]||(X[2]=J=>L(r.licence))},{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode("mdi-scale-balance")]),_:1}),M(r.licence)?(openBlock(),createElementBlock("div",_hoisted_2$p,[createTextVNode(toDisplayString$1(unref(E)("licences.lire"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-open-in-new")]),_:1})])):(openBlock(),createElementBlock("div",_hoisted_3$f,toDisplayString$1(unref(E)("licences.aucunLien")),1))]),_:1},8,["disabled"])])]),_:1},8,["text"])]),createVNode(VDivider),createBaseVNode("p",_hoisted_4$7,toDisplayString$1(unref(E)("licences.droits.sousTitre")),1),N.value?N.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_5$6,toDisplayString$1(unref(E)("licences.droits.aucune")),1)):(openBlock(),createBlock(unref(VSkeletonLoader),{key:0,type:"chip@3"})),(openBlock(!0),createElementBlock(Fragment,null,renderList(N.value,J=>(openBlock(),createBlock(_sfc_main$1g,{key:J,droit:J},null,8,["droit"]))),128)),createBaseVNode("p",_hoisted_6$6,toDisplayString$1(unref(E)("licences.conditions.sousTitre")),1),V.value?V.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_7$2,toDisplayString$1(unref(E)("licences.conditions.aucune")),1)):(openBlock(),createBlock(unref(VSkeletonLoader),{key:2,type:"chip@3"})),(openBlock(!0),createElementBlock(Fragment,null,renderList(V.value,J=>(openBlock(),createBlock(_sfc_main$1e,{key:J,condition:J},null,8,["condition"]))),128)),createBaseVNode("p",_hoisted_8$2,toDisplayString$1(unref(E)("licences.limitations.sousTitre")),1),D.value?D.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_9$2,toDisplayString$1(unref(E)("licences.limitations.aucune")),1)):(openBlock(),createBlock(unref(VSkeletonLoader),{key:4,type:"chip@3"})),(openBlock(!0),createElementBlock(Fragment,null,renderList(D.value,J=>(openBlock(),createBlock(_sfc_main$1f,{key:J,limitation:J},null,8,["limitation"]))),128))]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:q},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1}),createVNode(VBtn,{color:"primary",variant:"outlined",disabled:!B.value,onClick:j},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["modelValue"]))}}),_sfc_main$1c=defineComponent$1({__name:"IcneQualitBd",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),x=ref$1();enregistrercoute(_?.bds.suivreQualitBd({idBd:n.id,f:E=>x.value=E}));const S=computed(()=>x.value?.total);return(E,C)=>(openBlock(),createBlock(VProgressCircular,{rotate:S.value?270:void 0,value:S.value?S.value*100:0,indeterminate:!S.value,color:S.value?unref(couleurScore)(S.value).couleur:"grey lighten-2",size:15,width:3},null,8,["rotate","value","indeterminate","color"]))}}),_hoisted_1$x={class:"ms-2"},_sfc_main$1b=defineComponent$1({__name:"TexteQualitBd",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),E=ref$1();enregistrercoute(_?.bds.suivreQualitBd({idBd:n.id,f:T=>E.value=T}));const C=computed(()=>E.value?.total);return(T,B)=>(openBlock(),createElementBlock("span",_hoisted_1$x,[createTextVNode(toDisplayString$1(unref(S)("bds.qualit"))+": ",1),createBaseVNode("span",{style:normalizeStyle(`color:${unref(couleurScore)(C.value?C.value:null).couleur}`),class:"font-weight-bold"},toDisplayString$1(C.value?unref(S)("bds.note."+unref(couleurScore)(C.value).note):unref(S)("communs.pointInterrogation")),5)]))}}),_sfc_main$1a=defineComponent$1({__name:"JetonQualitBd",props:{id:{}},setup(r){return(n,_)=>(openBlock(),createBlock(VChip,{class:"mb-2 me-2",variant:"outlined",label:""},{prepend:withCtx(()=>[createVNode(_sfc_main$1c,{id:n.id},null,8,["id"])]),default:withCtx(()=>[createVNode(_sfc_main$1b,{id:n.id},null,8,["id"])]),_:1}))}}),_hoisted_1$w={key:1},_hoisted_2$o={key:2},_hoisted_3$e={class:"text-center"},_sfc_main$19=defineComponent$1({__name:"CarteBd",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),E=ref$1();enregistrercoute(_?.suivrePermission({idObjet:n.id,f:j=>E.value=j}));const C=ref$1({});enregistrercoute(_?.bds.suivreNomsBd({idBd:n.id,f:j=>C.value=j}));const T=async j=>{const{Effacer:q,Ajouter:H}=ajusterTexteTraductible({anciennes:C.value,nouvelles:j});for(const X of q)await _?.bds.effacerNomBd({idBd:n.id,langue:X});await _?.bds.sauvegarderNomsBd({idBd:n.id,noms:H})},B=ref$1({});enregistrercoute(_?.bds.suivreNomsBd({idBd:n.id,f:j=>B.value=j}));const A=async j=>{const{Effacer:q,Ajouter:H}=ajusterTexteTraductible({anciennes:B.value,nouvelles:j});for(const X of q)await _?.bds.effacerDescriptionBd({idBd:n.id,langue:X});await _?.bds.sauvegarderDescriptionsBd({idBd:n.id,descriptions:H})},I=ref$1();enregistrercoute(_?.rseau?.suivreAuteursBd({idBd:n.id,f:j=>I.value=j}));const N=ref$1();enregistrercoute(_?.bds.suivreLicenceBd({idBd:n.id,f:j=>N.value=j}));const V=async j=>{await _?.bds.changerLicenceBd({idBd:n.id,licence:j})},D=ref$1();enregistrercoute(_?.bds.suivreVariablesBd({idBd:n.id,f:j=>D.value=j}));const O=ref$1();enregistrercoute(_?.bds.suivreMotsClefsBd({idBd:n.id,f:j=>O.value=j}));const F=async j=>{const q=j.filter(X=>!O.value?.includes(X)),H=O.value?.filter(X=>!j.includes(X))||[];await _?.bds.ajouterMotsClefsBd({idBd:n.id,idsMotsClefs:q}),await Promise.all(H.map(X=>_?.bds.effacerMotClefBd({idBd:n.id,idMotClef:X})))},M=ref$1();enregistrercoute(_?.bds.suivreTableauxBd({idBd:n.id,f:j=>M.value=j}));const L=async()=>{await _?.bds.effacerBd({idBd:n.id})};return(j,q)=>(openBlock(),createBlock(_sfc_main$1B,{id:j.id,noms:C.value,descriptions:B.value,auteurs:I.value,"fichiers-epinglables":!0,onAjusterNoms:T,onAjusterDescriptions:A,onEffacer:L},{activator:withCtx(({props:H})=>[renderSlot(j.$slots,"activator",normalizeProps(guardReactiveProps({props:H})))]),default:withCtx(()=>[createVNode(_sfc_main$1K,{titre:unref(S)("bds.carteBd.infos"),"en-attente":!1},null,8,["titre"]),createVNode(_sfc_main$1d,{licence:N.value,"permission-modifier":!!E.value,onChangerLicence:V},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$1o,mergeProps(H,{licence:N.value}),null,16,["licence"])]),_:1},8,["licence","permission-modifier"]),createVNode(_sfc_main$1a,{id:j.id},null,8,["id"]),createVNode(_sfc_main$1i,{id:j.id},null,8,["id"]),createVNode(_sfc_main$1K,{titre:unref(S)("bds.carteBd.variables"),"en-attente":!D.value},null,8,["titre","en-attente"]),createVNode(_sfc_main$1Q,{"n-max":5,items:D.value},{jeton:withCtx(({id:H})=>[createVNode(_sfc_main$1z,{id:H},{activator:withCtx(({props:X})=>[createVNode(_sfc_main$1P,mergeProps(X,{id:H}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:H})=>[createVNode(_sfc_main$1z,{id:H},{activator:withCtx(({props:X})=>[createVNode(_sfc_main$1y,mergeProps(X,{id:H}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),createVNode(_sfc_main$1K,{titre:unref(S)("bds.carteBd.motsClefs"),"en-attente":!O.value},null,8,["titre","en-attente"]),createVNode(_sfc_main$1Q,{"n-max":5,items:O.value},{jeton:withCtx(({id:H})=>[createVNode(_sfc_main$1h,{id:H},{activator:withCtx(({props:X})=>[createVNode(_sfc_main$1n,mergeProps(X,{id:H}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:H})=>[createVNode(_sfc_main$1h,{id:H},{activator:withCtx(({props:X})=>[createVNode(_sfc_main$1m,mergeProps(X,{id:H}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),E.value&&O.value?(openBlock(),createBlock(_sfc_main$1j,{key:0,originaux:O.value,onSauvegarder:q[0]||(q[0]=H=>F(H))},null,8,["originaux"])):createCommentVNode("",!0),createVNode(_sfc_main$1K,{titre:unref(S)("bds.carteBd.tableaux"),"en-attente":!M.value},null,8,["titre","en-attente"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(M.value,H=>(openBlock(),createBlock(_sfc_main$1l,{id:H.id,key:H.clef},null,8,["id"]))),128)),M.value?M.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_2$o,toDisplayString$1(unref(S)("bds.carteBd.aucunTableaux")),1)):(openBlock(),createElementBlock("p",_hoisted_1$w,toDisplayString$1(unref(S)("bds.carteBd.attenteTableaux")),1)),createVNode(VDivider,{class:"mb-2"}),createBaseVNode("div",_hoisted_3$e,[createVNode(VBtn,{variant:"outlined","append-icon":"mdi-open-in-new",onClick:q[1]||(q[1]=H=>j.$router.push(encodeURI(`/donnes/bd/${encodeURIComponent(j.id)}`)))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("bds.carteBd.ouvrirBd")),1)]),_:1})])]),_:3},8,["id","noms","descriptions","auteurs"]))}}),_sfc_main$18=defineComponent$1({__name:"MenuContactMembre",props:{type:{},contact:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),{formatterNumro:S}=utiliserNumration(),E=computed(()=>obtIcneContact({type:n.type})),C=computed(()=>["siteInternet","tlgramme","tlphone","courriel","whatsapp"].includes(n.type)),T=async()=>{await copier(n.contact)},B=S(n.contact,"latin"),A=()=>{switch(n.type){case"siteInternet":ouvrirLien(n.contact);break;case"courriel":ouvrirLien(`mailto://${n.contact}`);break;case"whatsapp":{const I=x("membres.menuContact.messageSalut");ouvrirLien(`whatsapp://send?text=${I}&phone=${B.value}`);break}case"tlphone":{ouvrirLien(`tel://${n.contact}`);break}case"tlgrame":{ouvrirLien(`tg://resolve?phone=${B.value}`);break}}};return(I,N)=>(openBlock(),createBlock(VMenu,null,{activator:withCtx(({props:V})=>[renderSlot(I.$slots,"activator",normalizeProps(guardReactiveProps({props:V})))]),default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-content-copy",onClick:T},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("membres.menuContact.copier")),1)]),_:1})]),_:1}),C.value?(openBlock(),createBlock(VListItem,{key:0,"prepend-icon":E.value,onClick:A},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("membres.menuContact.contacter")),1)]),_:1})]),_:1},8,["prepend-icon"])):createCommentVNode("",!0)]),_:1})]),_:3}))}}),_hoisted_1$v={class:"mx-4"},_hoisted_2$n={key:1},_hoisted_3$d={key:2,class:"text-disabled"},_hoisted_4$6={key:4,class:"text-disabled"},_hoisted_5$5={key:6,class:"text-disabled"},_hoisted_6$5={key:8,class:"text-disabled"},_sfc_main$17=defineComponent$1({__name:"CarteMembre",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{mdAndUp:E}=useDisplay(),C=ref$1(!1),{traduireNom:T}=utiliserLangues(),B=ref$1({}),A=T(B);enregistrercoute(_?.profil.suivreNoms({f:O=>B.value=O}));const I=ref$1();enregistrercoute(_?.profil.suivreContacts({f:O=>I.value=O,idCompte:n.id}));const N=ref$1();enregistrercoute(_?.rseau?.suivreBdsMembre({idCompte:n.id,f:O=>N.value=O}));const V=ref$1();enregistrercoute(_?.rseau?.suivreProjetsMembre({idCompte:n.id,f:O=>V.value=O}));const D=ref$1();return enregistrercoute(_?.rseau?.suivreNuesMembre({idCompte:n.id,f:O=>D.value=O})),(O,F)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":F[1]||(F[1]=M=>C.value=M),"max-width":unref(E)?500:300},{activator:withCtx(({props:M})=>[renderSlot(O.$slots,"activator",normalizeProps(guardReactiveProps({props:M})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createVNode(_sfc_main$24,{id:O.id},null,8,["id"]),createBaseVNode("span",_hoisted_1$v,toDisplayString$1(unref(A)||unref(S)("communs.anonyme")),1),unref(E)?(openBlock(),createBlock(_sfc_main$1p,{key:0,id:O.id,"style-jeton":"jeton"},null,8,["id"])):createCommentVNode("",!0)]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[unref(E)?createCommentVNode("",!0):(openBlock(),createBlock(_sfc_main$1p,{key:0,id:O.id,"style-jeton":"jeton"},null,8,["id"])),createVNode(_sfc_main$1K,{titre:unref(S)("membres.contacts"),"en-attente":!I.value},null,8,["titre","en-attente"]),I.value?(openBlock(),createElementBlock("span",_hoisted_2$n,[(openBlock(!0),createElementBlock(Fragment,null,renderList(I.value,({type:M,contact:L})=>(openBlock(),createBlock(_sfc_main$18,{key:M,type:M,contact:L},{activator:withCtx(({props:j})=>[createVNode(_sfc_main$1J,mergeProps(j,{type:M,contact:L,size:"small"}),null,16,["type","contact"])]),_:2},1032,["type","contact"]))),128))])):(openBlock(),createElementBlock("p",_hoisted_3$d,toDisplayString$1(unref(S)("membres.aucunContact")),1)),createVNode(_sfc_main$1K,{titre:unref(S)("membres.bds"),"en-attente":!N.value},null,8,["titre","en-attente"]),N.value?.length?(openBlock(),createBlock(_sfc_main$1Q,{key:3,items:N.value,"n-max":2},{jeton:withCtx(({id:M})=>[createVNode(_sfc_main$19,{id:M},{activator:withCtx(({props:L})=>[createVNode(_sfc_main$1w,mergeProps(L,{id:M}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:M})=>[createVNode(_sfc_main$19,{id:M},{activator:withCtx(({props:L})=>[createVNode(_sfc_main$1x,mergeProps(L,{id:M,"montrer-anonymes":!0}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"])):(openBlock(),createElementBlock("p",_hoisted_4$6,toDisplayString$1(unref(S)("membres.aucuneBd")),1)),createVNode(_sfc_main$1K,{titre:unref(S)("membres.projets"),"en-attente":!V.value},null,8,["titre","en-attente"]),V.value?.length?(openBlock(),createBlock(_sfc_main$1Q,{key:5,items:V.value,"n-max":5},{jeton:withCtx(({id:M})=>[createVNode(_sfc_main$1v,{id:M},null,8,["id"])]),itemListe:withCtx(({id:M})=>[createVNode(_sfc_main$1u,{id:M,"montrer-anonymes":!0},null,8,["id"])]),_:1},8,["items"])):(openBlock(),createElementBlock("p",_hoisted_5$5,toDisplayString$1(unref(S)("membres.aucunProjet")),1)),createVNode(_sfc_main$1K,{titre:unref(S)("membres.nues"),"en-attente":!D.value},null,8,["titre","en-attente"]),D.value?.length?(openBlock(),createBlock(_sfc_main$1Q,{key:7,items:D.value,"n-max":5},{jeton:withCtx(({id:M})=>[createVNode(_sfc_main$1t,{id:M},null,8,["id"])]),itemListe:withCtx(({id:M})=>[createVNode(_sfc_main$1s,{id:M,"montrer-anonymes":!0},null,8,["id"])]),_:1},8,["items"])):(openBlock(),createElementBlock("p",_hoisted_6$5,toDisplayString$1(unref(S)("membres.aucuneNue")),1))]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:F[0]||(F[0]=M=>C.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_sfc_main$16=defineComponent$1({__name:"ItemSuggestionTraduction",props:{suggestion:{},compte:{}},emits:["utiliser","effacer"],setup(r,{emit:n}){const _=r,x=inject$1("constl"),S=()=>{n("utiliser")},E=()=>{n("effacer")},C=ref$1();enregistrercoute(x?.suivreIdCompte({f:B=>C.value=B}));const T=computed(()=>_.compte===C.value);return(B,A)=>(openBlock(),createBlock(VListItem,{lines:"three",onClick:S},{prepend:withCtx(()=>[createVNode(_sfc_main$17,{id:B.compte},{activator:withCtx(({props:I})=>[createVNode(_sfc_main$24,mergeProps(I,{id:B.compte}),null,16,["id"])]),_:1},8,["id"])]),default:withCtx(()=>[createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(B.suggestion..?.toLocaleDateString()),1)]),_:1}),createVNode(VDivider,{class:"my-2"}),createTextVNode(" "+toDisplayString$1(B.suggestion...repeat(52))+" ",1),T.value?(openBlock(),createBlock(VListItemAction,{key:0},{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{icon:"",variant:"flat",size:"small",onClick:withModifiers(E,["stop"])},{default:withCtx(()=>[createVNode(VIcon,{color:"error"},{default:withCtx(()=>[createTextVNode("mdi-delete")]),_:1})]),_:1},8,["onClick"])]),_:1})):createCommentVNode("",!0)]),_:1}))}}),VSwitch$1="",makeVSwitchProps=propsFactory({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...makeVInputProps(),...makeVSelectionControlProps()},"VSwitch"),VSwitch=genericComponent()({name:"VSwitch",inheritAttrs:!1,props:makeVSwitchProps(),emits:{"update:focused":r=>!0,"update:modelValue":()=>!0,"update:indeterminate":r=>!0},setup(r,n){let{attrs:_,slots:x}=n;const S=useProxiedModel(r,"indeterminate"),E=useProxiedModel(r,"modelValue"),{loaderClasses:C}=useLoader(r),{isFocused:T,focus:B,blur:A}=useFocus(r),I=ref$1(),N=computed(()=>typeof r.loading=="string"&&r.loading!==""?r.loading:r.color),V=getUid(),D=computed(()=>r.id||`switch-${V}`);function O(){S.value&&(S.value=!1)}function F(M){M.stopPropagation(),M.preventDefault(),I.value?.input?.click()}return useRender(()=>{const[M,L]=filterInputAttrs(_),[j,q]=VInput.filterProps(r),[H,X]=VSelectionControl.filterProps(r);return createVNode(VInput,mergeProps({class:["v-switch",{"v-switch--inset":r.inset},{"v-switch--indeterminate":S.value},C.value,r.class],style:r.style},M,j,{id:D.value,focused:T.value}),{...x,default:J=>{let{id:Z,messagesId:ae,isDisabled:ce,isReadonly:ve,isValid:pe}=J;return createVNode(VSelectionControl,mergeProps({ref:I},H,{modelValue:E.value,"onUpdate:modelValue":[G=>E.value=G,O],id:Z.value,"aria-describedby":ae.value,type:"checkbox","aria-checked":S.value?"mixed":void 0,disabled:ce.value,readonly:ve.value,onFocus:B,onBlur:A},L),{...x,default:()=>createVNode("div",{class:"v-switch__track",onClick:F},null),input:G=>{let{inputNode:Y,icon:U}=G;return createVNode(Fragment,null,[Y,createVNode("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":U||r.loading}]},[createVNode(VScaleTransition,null,{default:()=>[r.loading?createVNode(LoaderSlot,{name:"v-switch",active:!0,color:pe.value===!1?void 0:N.value},{default:W=>x.loader?x.loader(W):createVNode(VProgressCircular,{active:W.isActive,color:W.color,indeterminate:!0,size:"16",width:"2"},null)}):U&&createVNode(VIcon,{key:U,icon:U,size:"x-small"},null)]})])])}})}})}),{}}}),VTextarea$1="",makeVTextareaProps=propsFactory({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:r=>!isNaN(parseFloat(r))},maxRows:{type:[Number,String],validator:r=>!isNaN(parseFloat(r))},suffix:String,modelModifiers:Object,...makeVInputProps(),...makeVFieldProps()},"VTextarea"),VTextarea=genericComponent()({name:"VTextarea",directives:{Intersect:Intersect$1},inheritAttrs:!1,props:makeVTextareaProps(),emits:{"click:control":r=>!0,"mousedown:control":r=>!0,"update:focused":r=>!0,"update:modelValue":r=>!0},setup(r,n){let{attrs:_,emit:x,slots:S}=n;const E=useProxiedModel(r,"modelValue"),{isFocused:C,focus:T,blur:B}=useFocus(r),A=computed(()=>typeof r.counterValue=="function"?r.counterValue(E.value):(E.value||"").toString().length),I=computed(()=>{if(_.maxlength)return _.maxlength;if(!(!r.counter||typeof r.counter!="number"&&typeof r.counter!="string"))return r.counter});function N(pe,G){!r.autofocus||!pe||G[0].target?.focus?.()}const V=ref$1(),D=ref$1(),O=shallowRef(""),F=ref$1(),M=computed(()=>r.persistentPlaceholder||C.value||r.active);function L(){F.value!==document.activeElement&&F.value?.focus(),C.value||T()}function j(pe){L(),x("click:control",pe)}function q(pe){x("mousedown:control",pe)}function H(pe){pe.stopPropagation(),L(),nextTick$2(()=>{E.value="",callEvent(r["onClick:clear"],pe)})}function X(pe){const G=pe.target;if(E.value=G.value,r.modelModifiers?.trim){const Y=[G.selectionStart,G.selectionEnd];nextTick$2(()=>{G.selectionStart=Y[0],G.selectionEnd=Y[1]})}}const J=ref$1(),Z=ref$1(+r.rows),ae=computed(()=>["plain","underlined"].includes(r.variant));watchEffect(()=>{r.autoGrow||(Z.value=+r.rows)});function ce(){r.autoGrow&&nextTick$2(()=>{if(!J.value||!D.value)return;const pe=getComputedStyle(J.value),G=getComputedStyle(D.value.$el),Y=parseFloat(pe.getPropertyValue("--v-field-padding-top"))+parseFloat(pe.getPropertyValue("--v-input-padding-top"))+parseFloat(pe.getPropertyValue("--v-field-padding-bottom")),U=J.value.scrollHeight,W=parseFloat(pe.lineHeight),ee=Math.max(parseFloat(r.rows)*W+Y,parseFloat(G.getPropertyValue("--v-input-control-height"))),re=parseFloat(r.maxRows)*W+Y||1/0,oe=clamp(U??0,ee,re);Z.value=Math.floor((oe-Y)/W),O.value=convertToUnit(oe)})}onMounted(ce),watch(E,ce),watch(()=>r.rows,ce),watch(()=>r.maxRows,ce),watch(()=>r.density,ce);let ve;return watch(J,pe=>{pe?(ve=new ResizeObserver(ce),ve.observe(J.value)):ve?.disconnect()}),onBeforeUnmount(()=>{ve?.disconnect()}),useRender(()=>{const pe=!!(S.counter||r.counter||r.counterValue),G=!!(pe||S.details),[Y,U]=filterInputAttrs(_),[{modelValue:W,...ee}]=VInput.filterProps(r),[re]=filterFieldProps(r);return createVNode(VInput,mergeProps({ref:V,modelValue:E.value,"onUpdate:modelValue":oe=>E.value=oe,class:["v-textarea v-text-field",{"v-textarea--prefixed":r.prefix,"v-textarea--suffixed":r.suffix,"v-text-field--prefixed":r.prefix,"v-text-field--suffixed":r.suffix,"v-textarea--auto-grow":r.autoGrow,"v-textarea--no-resize":r.noResize||r.autoGrow,"v-text-field--plain-underlined":ae.value},r.class],style:r.style},Y,ee,{centerAffix:Z.value===1&&!ae.value,focused:C.value}),{...S,default:oe=>{let{isDisabled:ie,isDirty:ne,isReadonly:te,isValid:K}=oe;return createVNode(VField,mergeProps({ref:D,style:{"--v-textarea-control-height":O.value},onClick:j,onMousedown:q,"onClick:clear":H,"onClick:prependInner":r["onClick:prependInner"],"onClick:appendInner":r["onClick:appendInner"]},re,{active:M.value||ne.value,centerAffix:Z.value===1&&!ae.value,dirty:ne.value||r.dirty,disabled:ie.value,focused:C.value,error:K.value===!1}),{...S,default:le=>{let{props:{class:ue,...be}}=le;return createVNode(Fragment,null,[r.prefix&&createVNode("span",{class:"v-text-field__prefix"},[r.prefix]),withDirectives(createVNode("textarea",mergeProps({ref:F,class:ue,value:E.value,onInput:X,autofocus:r.autofocus,readonly:te.value,disabled:ie.value,placeholder:r.placeholder,rows:r.rows,name:r.name,onFocus:L,onBlur:B},be,U),null),[[resolveDirective("intersect"),{handler:N},null,{once:!0}]]),r.autoGrow&&withDirectives(createVNode("textarea",{class:[ue,"v-textarea__sizer"],"onUpdate:modelValue":ge=>E.value=ge,ref:J,readonly:!0,"aria-hidden":"true"},null),[[vModelText,E.value]]),r.suffix&&createVNode("span",{class:"v-text-field__suffix"},[r.suffix])])}})},details:G?oe=>createVNode(Fragment,null,[S.details?.(oe),pe&&createVNode(Fragment,null,[createVNode("span",null,null),createVNode(VCounter,{active:r.persistentCounter||C.value,value:A.value,max:I.value},S.counter)])]):void 0})}),forwardRefs({},V,D,F)}}),_hoisted_1$u={key:0},_hoisted_2$m={class:"text-right"},_hoisted_3$c={key:1,class:"text-center"},_hoisted_4$5=["src","width"],_hoisted_5$4=createBaseVNode("p",{class:"my-2"},"Pour commencer, choisissez un message  traduire.",-1),_hoisted_6$4={class:"text-center"},_hoisted_7$1={class:"text-h4"},_hoisted_8$1={key:0},_hoisted_9$1={key:1,class:"text-center"},_hoisted_10$1=["src","width"],_hoisted_11$1=createBaseVNode("p",{class:"my-2"}," Nous n'avons trouv aucune suggestion communautaire pour ce message. ",-1),_sfc_main$15=defineComponent$1({__name:"ContribuerTraductions",setup(r){const n=inject$1("constl"),_=inject$1(""),{mdAndUp:x}=useDisplay(),{langue:S,languesAlternatives:E}=utiliserLangues(),{formatterChiffre:C}=utiliserNumration(),{useI18n:T,__:B,_:A,_:I,_:N}=_(),{t:V}=T(),{codesLanguesDisponibles:D}=B(),O=ref$1(!1),F=ref$1();onMounted(async()=>{F.value=await n?.obtIdCompte()});const M=ref$1(S.value),L=ref$1(E.value[0]),j=ref$1(!1),q=ref$1(""),H=()=>{const Ne=L.value;L.value=M.value,M.value=Ne},{__:X}=_(),{_:J}=X({:L,:""}),Z=computed(()=>J.value?J.value./J.value.:0),ae=computed(()=>J.value?J.value./J.value.:0),{:ce}=A(),ve=computed(()=>{if(!ce.value)return;let Ne=[];return j.value?Ne=ce.value:Ne=ce.value?.filter(Te=>!Y.value[Te]),q.value&&(Ne=Ne.filter(Te=>Te.includes(q.value)||Object.values(G.value[Te]||{}).some(he=>he.includes(q.value)))),Ne}),pe=ref$1();watch(pe,()=>{re.value=""});const{_:G}=I(),Y=computed(()=>{const{value:Ne}=L;return Ne&&Object.fromEntries(Object.keys(G.value).map(Te=>[Te,G.value[Te][Ne]]))||{}}),U=computed(()=>{if(pe.value)return Y.value[pe.value]}),{obtImageDco:W}=utiliserImagesDco(),ee=W("message"),re=ref$1(),oe=computed(()=>{if(pe.value)return G.value[pe.value]?.[M.value]}),ie=ref$1(!1),ne=async()=>{ie.value=!0,pe.value&&re.value&&L.value&&await _?._({:pe.value,:re.value.trim(),_:L.value,_:M.value,_:oe.value}),re.value="",ie.value=!1},te=W("vide"),{:K}=N(),le=computed(()=>{const{value:Ne}=L;return Ne&&K.value.filter(Te=>Te.._===Ne&&Te..===pe.value)||[]}),ue=async Ne=>{await _?._({:Ne})},be=computed(()=>le.value.length),ge=C(be),ye=ref$1();enregistrercoute(_?._({:Ne=>{pe.value&&(ye.value=Ne[pe.value])}}));const Ee=computed(()=>{if(ye.value)return Object.entries(ye.value).map(([Ne,Te])=>({lng:Ne,traduc:Te}))}),Re=C(computed(()=>Ee.value?Ee.value.length:0));return(Ne,Te)=>(openBlock(),createBlock(VDialog,{modelValue:O.value,"onUpdate:modelValue":Te[13]||(Te[13]=he=>O.value=he)},{activator:withCtx(({props:he})=>[renderSlot(Ne.$slots,"activator",normalizeProps(guardReactiveProps({props:he})))]),default:withCtx(()=>[createTextVNode(" x "),createVNode(VCard,{class:"mx-auto","min-width":unref(x)?1e3:void 0},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(V)("languesInterface.dialogueContribuer.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"outlined",onClick:Te[0]||(Te[0]=he=>O.value=!1)})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(V)("languesInterface.dialogueContribuer.sousTitre")),1)]),_:1}),createVNode(VDivider,{class:"my-3"})]),_:1}),createVNode(VCardText,{class:"overflow-auto"},{default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:unref(x)?4:12},{default:withCtx(()=>[createVNode(VSelect,{modelValue:M.value,"onUpdate:modelValue":Te[1]||(Te[1]=he=>M.value=he),variant:"outlined","hide-details":"",items:unref(D),label:unref(V)("languesInterface.dialogueContribuer.langueSource")},{item:withCtx(({item:he,props:xe})=>[createVNode(_sfc_main$1T,mergeProps(xe,{code:he.value,selectionnee:!1}),null,16,["code"])]),selection:withCtx(({item:he})=>[createVNode(_sfc_main$1S,{code:he.value},null,8,["code"])]),_:1},8,["modelValue","items","label"])]),_:1},8,["cols"]),unref(x)?(openBlock(),createBlock(VCol,{key:0,cols:1,class:"text-center"},{default:withCtx(()=>[createVNode(VBtn,{icon:"mdi-swap-horizontal",variant:"flat",onClick:Te[2]||(Te[2]=()=>H())})]),_:1})):createCommentVNode("",!0),createVNode(VCol,{cols:unref(x)?4:12},{default:withCtx(()=>[createVNode(VSelect,{modelValue:L.value,"onUpdate:modelValue":Te[3]||(Te[3]=he=>L.value=he),variant:"outlined","hide-details":"",items:unref(D),label:unref(V)("languesInterface.dialogueContribuer.langueCible")},{item:withCtx(({item:he,props:xe})=>[createVNode(_sfc_main$1T,mergeProps(xe,{code:he.value,selectionnee:!1}),null,16,["code"])]),selection:withCtx(({item:he})=>[createVNode(_sfc_main$1S,{code:he.value},null,8,["code"])]),_:1},8,["modelValue","items","label"])]),_:1},8,["cols"]),createVNode(VCol,{cols:unref(x)?2:12},{default:withCtx(()=>[createVNode(VSwitch,{modelValue:j.value,"onUpdate:modelValue":Te[4]||(Te[4]=he=>j.value=he),color:"primary","hide-details":"",label:unref(V)("languesInterface.dialogueContribuer.montrerTraduites")},null,8,["modelValue","label"])]),_:1},8,["cols"])]),_:1}),createVNode(VProgressLinear,{absolute:!unref(x),class:normalizeClass({"my-3":unref(x)}),color:"primary","model-value":Z.value*100,"buffer-value":(Z.value+ae.value)*100},null,8,["absolute","class","model-value","buffer-value"]),createVNode(VRow,{class:"fill-height"},{default:withCtx(()=>[createVNode(VCol,{cols:unref(x)?3:12},{default:withCtx(()=>[unref(x)?(openBlock(),createBlock(VList,{key:0},{default:withCtx(()=>[createVNode(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createVNode(VTextField,{modelValue:q.value,"onUpdate:modelValue":Te[5]||(Te[5]=he=>q.value=he),variant:"outlined",label:"Rechercher","hide-details":"",clearable:"","prepend-inner-icon":"mdi-magnify"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0),unref(x)?(openBlock(),createBlock(VList,{key:1,"max-height":"350px"},{default:withCtx(()=>[createVNode(VFadeTransition,{group:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(ve.value,he=>(openBlock(),createBlock(_sfc_main$1R,{key:he,actif:he===pe.value,clef:he,"traduction-approuvee":unref(G)[he]?.[L.value],"traduction-langue-source":unref(G)[he]?.[M.value],suggestions:unref(K).filter(xe=>xe..===he&&xe.._===L.value),onClick:xe=>pe.value=he===pe.value?void 0:he},null,8,["actif","clef","traduction-approuvee","traduction-langue-source","suggestions","onClick"]))),128))]),_:1})]),_:1})):(openBlock(),createBlock(VSelect,{key:2,modelValue:pe.value,"onUpdate:modelValue":Te[6]||(Te[6]=he=>pe.value=he),items:ve.value,label:"Message",variant:"outlined"},{item:withCtx(({item:he,props:xe})=>[createVNode(VListItem,mergeProps(xe,{active:he.value===pe.value}),{title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(G)[he.value][M.value]||"[Aucune traduction]"),1)]),subtitle:withCtx(()=>[createTextVNode(toDisplayString$1(he.value),1)]),_:2},1040,["active"])]),selection:withCtx(({item:he})=>[createTextVNode(toDisplayString$1(unref(couper)(unref(G)[he.value][M.value]||he.value,20,unref(V)("communs.troisPetitsPoints"))),1)]),_:1},8,["modelValue","items"]))]),_:1},8,["cols"]),createVNode(VCol,{cols:unref(x)?pe.value?5:9:12,class:"pt-6"},{default:withCtx(()=>[pe.value?(openBlock(),createElementBlock("div",_hoisted_1$u,[createVNode(VTextarea,{modelValue:re.value,"onUpdate:modelValue":Te[7]||(Te[7]=he=>re.value=he),label:"Suggrez une traduction ici","no-resize":"",variant:"outlined"},null,8,["modelValue"]),createBaseVNode("div",_hoisted_2$m,[createVNode(VBtn,{class:"mx-2",color:"primary",variant:"outlined",disabled:!re.value,loading:ie.value,onClick:Te[8]||(Te[8]=()=>ne())},{default:withCtx(()=>[createTextVNode(" Suggrer "),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-upload")]),_:1})]),_:1},8,["disabled","loading"]),createVNode(VBtn,{class:"ml-2",variant:"outlined",disabled:!re.value||ie.value,onClick:Te[9]||(Te[9]=he=>re.value="")},{default:withCtx(()=>[createTextVNode(" Effacer "),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1},8,["disabled"])]),createVNode(VTextarea,{modelValue:oe.value,"onUpdate:modelValue":Te[10]||(Te[10]=he=>oe.value=he),class:"mt-4","append-inner-icon":"mdi-content-copy",label:"Text original",readonly:"","no-resize":"",variant:"outlined","onClick:appendInner":Te[11]||(Te[11]=he=>re.value=oe.value)},null,8,["modelValue"])])):(openBlock(),createElementBlock("div",_hoisted_3$c,[createBaseVNode("img",{src:unref(ee),contain:"",width:unref(x)?400:250},null,8,_hoisted_4$5),_hoisted_5$4]))]),_:1},8,["cols"]),pe.value?(openBlock(),createBlock(VCol,{key:0,cols:unref(x)?4:12,class:"pt-6"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_6$4,[createBaseVNode("h2",_hoisted_7$1,toDisplayString$1(unref(V)("languesInterface.dialogueContribuer.titreSuggestions")),1)]),le.value.length||Ee.value?.length?(openBlock(),createElementBlock("div",_hoisted_8$1,[createVNode(VList,{"max-height":"350px"},{default:withCtx(()=>[U.value?(openBlock(),createBlock(VListItem,{key:0,onClick:Te[12]||(Te[12]=he=>re.value=U.value)},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode("   ")]),_:1}),createTextVNode(" "+toDisplayString$1(U.value),1)]),_:1})):createCommentVNode("",!0),le.value.length?(openBlock(),createBlock(VListGroup,{key:1},{activator:withCtx(({props:he})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(he)),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode("   "),createVNode(VAvatar,{class:"mx-2",color:"primary",size:"20"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(ge)),1)]),_:1})]),_:1})]),_:2},1040)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(le.value,he=>(openBlock(),createBlock(_sfc_main$16,{key:he.,suggestion:he,compte:he.,onUtiliser:xe=>re.value=he..,onEffacer:xe=>ue(he.)},null,8,["suggestion","compte","onUtiliser","onEffacer"]))),128))]),_:1})):createCommentVNode("",!0),createVNode(VListGroup,null,{activator:withCtx(({props:he})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(he)),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode("   "),createVNode(VAvatar,{class:"mx-2",color:"primary",size:"20"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(ge)),1)]),_:1})]),_:1})]),_:2},1040)]),_:1}),createVNode(VListGroup,null,{activator:withCtx(({props:he})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(he)),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode("   "),createVNode(VAvatar,{class:"mx-2",color:"primary",size:"20"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(Re)),1)]),_:1})]),_:1})]),_:2},1040)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ee.value,({lng:he,traduc:xe})=>(openBlock(),createBlock(VListItem,{key:he},{default:withCtx(()=>[createTextVNode(toDisplayString$1(xe)+" ",1),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(he),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):pe.value?(openBlock(),createElementBlock("div",_hoisted_9$1,[createBaseVNode("img",{src:unref(te),contain:"",width:unref(x)?300:200,class:"my-4"},null,8,_hoisted_10$1),_hoisted_11$1])):createCommentVNode("",!0)]),_:1},8,["cols"])):createCommentVNode("",!0)]),_:1}),createVNode(VBtn,{variant:"outlined"},{default:withCtx(()=>[createTextVNode("Grer traductions")]),_:1})]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$14=defineComponent$1({__name:"MenuLangues",setup(r){const n=inject$1("constl"),_=ref$1(!1);n?.obtIdCompte().then(()=>_.value=!0);const{useI18n:x,__:S}=_(),{t:E}=x(),{isRtl:C}=useRtl(),{langue:T,choisirLangues:B}=utiliserLangues(),{codesLanguesDisponibles:A}=S();return(I,N)=>(openBlock(),createBlock(VBtn,{style:normalizeStyle("position: absolute;"+(unref(C)?"left:":"right:")+"20px; top: 20px"),icon:"mdi-earth",size:"small"},{default:withCtx(()=>[createVNode(VIcon,{size:"large"}),createVNode(VMenu,{activator:"parent","open-on-hover":"",offset:"10px","min-width":"225",location:unref(C)?"bottom right":"bottom left"},{default:withCtx(()=>[createVNode(VList,{class:"overflow-y-auto","max-height":"500px","min-width":"200px"},{default:withCtx(()=>[createVNode(_sfc_main$15,null,{activator:withCtx(({props:V})=>[createVNode(VListItem,mergeProps(V,{disabled:!_.value}),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(" mdi-plus ")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("languesInterface.contribuer")),1)]),_:1})]),_:2},1040,["disabled"])]),_:1}),_.value?(openBlock(),createBlock(VDivider,{key:1})):(openBlock(),createBlock(VProgressLinear,{key:0,height:"1",color:"primary",indeterminate:!_.value},null,8,["indeterminate"])),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(A),V=>(openBlock(),createBlock(_sfc_main$1T,{key:V,code:V,selectionnee:V===unref(T),onClick:()=>unref(B)(V)},null,8,["code","selectionnee","onClick"]))),128))]),_:1})]),_:1},8,["location"])]),_:1},8,["style"]))}}),VApp$1="",makeVAppProps=propsFactory({...makeComponentProps(),...makeLayoutProps({fullHeight:!0}),...makeThemeProps()},"VApp"),VApp=genericComponent()({name:"VApp",props:makeVAppProps(),setup(r,n){let{slots:_}=n;const x=provideTheme(r),{layoutClasses:S,layoutStyles:E,getLayoutItem:C,items:T,layoutRef:B}=createLayout(r),{rtlClasses:A}=useRtl();return useRender(()=>createVNode("div",{ref:B,class:["v-application",x.themeClasses.value,S.value,A.value,r.class],style:[E.value,r.style]},[createVNode("div",{class:"v-application__wrap"},[_.default?.()])])),{getLayoutItem:C,items:T,theme:x}}}),VLocaleProvider$1="",makeVLocaleProviderProps=propsFactory({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...makeComponentProps()},"VLocaleProvider"),VLocaleProvider=genericComponent()({name:"VLocaleProvider",props:makeVLocaleProviderProps(),setup(r,n){let{slots:_}=n;const{rtlClasses:x}=provideLocale(r);return useRender(()=>createVNode("div",{class:["v-locale-provider",x.value,r.class],style:r.style},[_.default?.()])),{}}}),VMain$1="",makeVMainProps=propsFactory({scrollable:Boolean,...makeComponentProps(),...makeTagProps({tag:"main"})},"VMain"),VMain=genericComponent()({name:"VMain",props:makeVMainProps(),setup(r,n){let{slots:_}=n;const{mainStyles:x}=useLayout(),{ssrBootStyles:S}=useSsrBoot();return useRender(()=>createVNode(r.tag,{class:["v-main",{"v-main--scrollable":r.scrollable},r.class],style:[x.value,S.value,r.style]},{default:()=>[r.scrollable?createVNode("div",{class:"v-main__scroller"},[_.default?.()]):_.default?.()]})),{}}}),_sfc_main$13=defineComponent$1({__name:"App",setup(r){const n=ref$1(!1),{langueDroiteGauche:_}=utiliserLangues(),x=_();return(S,E)=>(openBlock(),createBlock(VApp,null,{default:withCtx(()=>[createVNode(VLocaleProvider,{rtl:unref(x)},{default:withCtx(()=>[createVNode(VMain,null,{default:withCtx(()=>[createVNode(_sfc_main$14),createVNode(VFadeTransition,{"leave-absolute":""},{default:withCtx(()=>[n.value?(openBlock(),createBlock(_sfc_main$21,{key:1})):(openBlock(),createBlock(_sfc_main$1U,{key:0,onEntrer:E[0]||(E[0]=C=>n.value=!0)}))]),_:1})]),_:1})]),_:1},8,["rtl"])]),_:1}))}});var eventemitter3={exports:{}};(function(r){var n=Object.prototype.hasOwnProperty,_="~";function x(){}Object.create&&(x.prototype=Object.create(null),new x().__proto__||(_=!1));function S(B,A,I){this.fn=B,this.context=A,this.once=I||!1}function E(B,A,I,N,V){if(typeof I!="function")throw new TypeError("The listener must be a function");var D=new S(I,N||B,V),O=_?_+A:A;return B._events[O]?B._events[O].fn?B._events[O]=[B._events[O],D]:B._events[O].push(D):(B._events[O]=D,B._eventsCount++),B}function C(B,A){--B._eventsCount===0?B._events=new x:delete B._events[A]}function T(){this._events=new x,this._eventsCount=0}T.prototype.eventNames=function(){var A=[],I,N;if(this._eventsCount===0)return A;for(N in I=this._events)n.call(I,N)&&A.push(_?N.slice(1):N);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(I)):A},T.prototype.listeners=function(A){var I=_?_+A:A,N=this._events[I];if(!N)return[];if(N.fn)return[N.fn];for(var V=0,D=N.length,O=new Array(D);V<D;V++)O[V]=N[V].fn;return O},T.prototype.listenerCount=function(A){var I=_?_+A:A,N=this._events[I];return N?N.fn?1:N.length:0},T.prototype.emit=function(A,I,N,V,D,O){var F=_?_+A:A;if(!this._events[F])return!1;var M=this._events[F],L=arguments.length,j,q;if(M.fn){switch(M.once&&this.removeListener(A,M.fn,void 0,!0),L){case 1:return M.fn.call(M.context),!0;case 2:return M.fn.call(M.context,I),!0;case 3:return M.fn.call(M.context,I,N),!0;case 4:return M.fn.call(M.context,I,N,V),!0;case 5:return M.fn.call(M.context,I,N,V,D),!0;case 6:return M.fn.call(M.context,I,N,V,D,O),!0}for(q=1,j=new Array(L-1);q<L;q++)j[q-1]=arguments[q];M.fn.apply(M.context,j)}else{var H=M.length,X;for(q=0;q<H;q++)switch(M[q].once&&this.removeListener(A,M[q].fn,void 0,!0),L){case 1:M[q].fn.call(M[q].context);break;case 2:M[q].fn.call(M[q].context,I);break;case 3:M[q].fn.call(M[q].context,I,N);break;case 4:M[q].fn.call(M[q].context,I,N,V);break;default:if(!j)for(X=1,j=new Array(L-1);X<L;X++)j[X-1]=arguments[X];M[q].fn.apply(M[q].context,j)}}return!0},T.prototype.on=function(A,I,N){return E(this,A,I,N,!1)},T.prototype.once=function(A,I,N){return E(this,A,I,N,!0)},T.prototype.removeListener=function(A,I,N,V){var D=_?_+A:A;if(!this._events[D])return this;if(!I)return C(this,D),this;var O=this._events[D];if(O.fn)O.fn===I&&(!V||O.once)&&(!N||O.context===N)&&C(this,D);else{for(var F=0,M=[],L=O.length;F<L;F++)(O[F].fn!==I||V&&!O[F].once||N&&O[F].context!==N)&&M.push(O[F]);M.length?this._events[D]=M.length===1?M[0]:M:C(this,D)}return this},T.prototype.removeAllListeners=function(A){var I;return A?(I=_?_+A:A,this._events[I]&&C(this,I)):(this._events=new x,this._eventsCount=0),this},T.prototype.off=T.prototype.removeListener,T.prototype.addListener=T.prototype.on,T.prefixed=_,T.EventEmitter=T,r.exports=T})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter$2=getDefaultExportFromCjs(eventemitter3Exports);class TimeoutError extends Error{constructor(n){super(n),this.name="TimeoutError"}}let AbortError$2=class extends Error{constructor(n){super(),this.name="AbortError",this.message=n}};const getDOMException=r=>globalThis.DOMException===void 0?new AbortError$2(r):new DOMException(r),getAbortedReason=r=>{const n=r.reason===void 0?getDOMException("This operation was aborted."):r.reason;return n instanceof Error?n:getDOMException(n)};function pTimeout(r,n,_,x){let S;const E=new Promise((C,T)=>{if(typeof n!="number"||Math.sign(n)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(n===Number.POSITIVE_INFINITY){C(r);return}if(x={customTimers:{setTimeout,clearTimeout},...x},x.signal){const{signal:B}=x;B.aborted&&T(getAbortedReason(B)),B.addEventListener("abort",()=>{T(getAbortedReason(B))})}S=x.customTimers.setTimeout.call(void 0,()=>{if(typeof _=="function"){try{C(_())}catch(I){T(I)}return}const B=typeof _=="string"?_:`Promise timed out after ${n} milliseconds`,A=_ instanceof Error?_:new TimeoutError(B);typeof r.cancel=="function"&&r.cancel(),T(A)},n),(async()=>{try{C(await r)}catch(B){T(B)}finally{x.customTimers.clearTimeout.call(void 0,S)}})()});return E.clear=()=>{clearTimeout(S),S=void 0},E}function lowerBound(r,n,_){let x=0,S=r.length;for(;S>0;){const E=Math.trunc(S/2);let C=x+E;_(r[C],n)<=0?(x=++C,S-=E+1):S=E}return x}var __classPrivateFieldGet$1=globalThis&&globalThis.__classPrivateFieldGet||function(r,n,_,x){if(_==="a"&&!x)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?r!==n||!x:!n.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return _==="m"?x:_==="a"?x.call(r):x?x.value:n.get(r)},_PriorityQueue_queue;class PriorityQueue{constructor(){_PriorityQueue_queue.set(this,[])}enqueue(n,_){_={priority:0,..._};const x={priority:_.priority,run:n};if(this.size&&__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f")[this.size-1].priority>=_.priority){__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").push(x);return}const S=lowerBound(__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f"),x,(E,C)=>C.priority-E.priority);__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").splice(S,0,x)}dequeue(){const n=__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").shift();return n?.run}filter(n){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").filter(_=>_.priority===n.priority).map(_=>_.run)}get size(){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").length}}_PriorityQueue_queue=new WeakMap;var __classPrivateFieldSet=globalThis&&globalThis.__classPrivateFieldSet||function(r,n,_,x,S){if(x==="m")throw new TypeError("Private method is not writable");if(x==="a"&&!S)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?r!==n||!S:!n.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return x==="a"?S.call(r,_):S?S.value=_:n.set(r,_),_},__classPrivateFieldGet=globalThis&&globalThis.__classPrivateFieldGet||function(r,n,_,x){if(_==="a"&&!x)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?r!==n||!x:!n.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return _==="m"?x:_==="a"?x.call(r):x?x.value:n.get(r)},_PQueue_instances,_PQueue_carryoverConcurrencyCount,_PQueue_isIntervalIgnored,_PQueue_intervalCount,_PQueue_intervalCap,_PQueue_interval,_PQueue_intervalEnd,_PQueue_intervalId,_PQueue_timeoutId,_PQueue_queue,_PQueue_queueClass,_PQueue_pending,_PQueue_concurrency,_PQueue_isPaused,_PQueue_throwOnTimeout,_PQueue_doesIntervalAllowAnother_get,_PQueue_doesConcurrentAllowAnother_get,_PQueue_next,_PQueue_onResumeInterval,_PQueue_isIntervalPaused_get,_PQueue_tryToStartAnother,_PQueue_initializeIntervalIfNeeded,_PQueue_onInterval,_PQueue_processQueue,_PQueue_throwOnAbort,_PQueue_onEvent;let AbortError$1=class extends Error{};class PQueue extends EventEmitter$2{constructor(n){var _,x,S,E;if(super(),_PQueue_instances.add(this),_PQueue_carryoverConcurrencyCount.set(this,void 0),_PQueue_isIntervalIgnored.set(this,void 0),_PQueue_intervalCount.set(this,0),_PQueue_intervalCap.set(this,void 0),_PQueue_interval.set(this,void 0),_PQueue_intervalEnd.set(this,0),_PQueue_intervalId.set(this,void 0),_PQueue_timeoutId.set(this,void 0),_PQueue_queue.set(this,void 0),_PQueue_queueClass.set(this,void 0),_PQueue_pending.set(this,0),_PQueue_concurrency.set(this,void 0),_PQueue_isPaused.set(this,void 0),_PQueue_throwOnTimeout.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue,...n},!(typeof n.intervalCap=="number"&&n.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(x=(_=n.intervalCap)===null||_===void 0?void 0:_.toString())!==null&&x!==void 0?x:""}\` (${typeof n.intervalCap})`);if(n.interval===void 0||!(Number.isFinite(n.interval)&&n.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(E=(S=n.interval)===null||S===void 0?void 0:S.toString())!==null&&E!==void 0?E:""}\` (${typeof n.interval})`);__classPrivateFieldSet(this,_PQueue_carryoverConcurrencyCount,n.carryoverConcurrencyCount,"f"),__classPrivateFieldSet(this,_PQueue_isIntervalIgnored,n.intervalCap===Number.POSITIVE_INFINITY||n.interval===0,"f"),__classPrivateFieldSet(this,_PQueue_intervalCap,n.intervalCap,"f"),__classPrivateFieldSet(this,_PQueue_interval,n.interval,"f"),__classPrivateFieldSet(this,_PQueue_queue,new n.queueClass,"f"),__classPrivateFieldSet(this,_PQueue_queueClass,n.queueClass,"f"),this.concurrency=n.concurrency,this.timeout=n.timeout,__classPrivateFieldSet(this,_PQueue_throwOnTimeout,n.throwOnTimeout===!0,"f"),__classPrivateFieldSet(this,_PQueue_isPaused,n.autoStart===!1,"f")}get concurrency(){return __classPrivateFieldGet(this,_PQueue_concurrency,"f")}set concurrency(n){if(!(typeof n=="number"&&n>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${n}\` (${typeof n})`);__classPrivateFieldSet(this,_PQueue_concurrency,n,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)}async add(n,_={}){return _={timeout:this.timeout,throwOnTimeout:__classPrivateFieldGet(this,_PQueue_throwOnTimeout,"f"),..._},new Promise((x,S)=>{__classPrivateFieldGet(this,_PQueue_queue,"f").enqueue(async()=>{var E,C,T;__classPrivateFieldSet(this,_PQueue_pending,(C=__classPrivateFieldGet(this,_PQueue_pending,"f"),C++,C),"f"),__classPrivateFieldSet(this,_PQueue_intervalCount,(T=__classPrivateFieldGet(this,_PQueue_intervalCount,"f"),T++,T),"f");try{if(!((E=_.signal)===null||E===void 0)&&E.aborted)throw new AbortError$1("The task was aborted.");let B=n({signal:_.signal});_.timeout&&(B=pTimeout(Promise.resolve(B),_.timeout)),_.signal&&(B=Promise.race([B,__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_throwOnAbort).call(this,_.signal)]));const A=await B;x(A),this.emit("completed",A)}catch(B){if(B instanceof TimeoutError&&!_.throwOnTimeout){x();return}S(B),this.emit("error",B)}finally{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_next).call(this)}},_),this.emit("add"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this)})}async addAll(n,_){return Promise.all(n.map(async x=>this.add(x,_)))}start(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")?(__classPrivateFieldSet(this,_PQueue_isPaused,!1,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this),this):this}pause(){__classPrivateFieldSet(this,_PQueue_isPaused,!0,"f")}clear(){__classPrivateFieldSet(this,_PQueue_queue,new(__classPrivateFieldGet(this,_PQueue_queueClass,"f")),"f")}async onEmpty(){__classPrivateFieldGet(this,_PQueue_queue,"f").size!==0&&await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"empty")}async onSizeLessThan(n){__classPrivateFieldGet(this,_PQueue_queue,"f").size<n||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"next",()=>__classPrivateFieldGet(this,_PQueue_queue,"f").size<n)}async onIdle(){__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&__classPrivateFieldGet(this,_PQueue_queue,"f").size===0||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"idle")}get size(){return __classPrivateFieldGet(this,_PQueue_queue,"f").size}sizeBy(n){return __classPrivateFieldGet(this,_PQueue_queue,"f").filter(n).length}get pending(){return __classPrivateFieldGet(this,_PQueue_pending,"f")}get isPaused(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")}}_PQueue_carryoverConcurrencyCount=new WeakMap,_PQueue_isIntervalIgnored=new WeakMap,_PQueue_intervalCount=new WeakMap,_PQueue_intervalCap=new WeakMap,_PQueue_interval=new WeakMap,_PQueue_intervalEnd=new WeakMap,_PQueue_intervalId=new WeakMap,_PQueue_timeoutId=new WeakMap,_PQueue_queue=new WeakMap,_PQueue_queueClass=new WeakMap,_PQueue_pending=new WeakMap,_PQueue_concurrency=new WeakMap,_PQueue_isPaused=new WeakMap,_PQueue_throwOnTimeout=new WeakMap,_PQueue_instances=new WeakSet,_PQueue_doesIntervalAllowAnother_get=function(){return __classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalCount,"f")<__classPrivateFieldGet(this,_PQueue_intervalCap,"f")},_PQueue_doesConcurrentAllowAnother_get=function(){return __classPrivateFieldGet(this,_PQueue_pending,"f")<__classPrivateFieldGet(this,_PQueue_concurrency,"f")},_PQueue_next=function(){var n;__classPrivateFieldSet(this,_PQueue_pending,(n=__classPrivateFieldGet(this,_PQueue_pending,"f"),n--,n),"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("next")},_PQueue_onResumeInterval=function(){__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),__classPrivateFieldSet(this,_PQueue_timeoutId,void 0,"f")},_PQueue_isIntervalPaused_get=function(){const n=Date.now();if(__classPrivateFieldGet(this,_PQueue_intervalId,"f")===void 0){const _=__classPrivateFieldGet(this,_PQueue_intervalEnd,"f")-n;if(_<0)__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pending,"f"):0,"f");else return __classPrivateFieldGet(this,_PQueue_timeoutId,"f")===void 0&&__classPrivateFieldSet(this,_PQueue_timeoutId,setTimeout(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onResumeInterval).call(this)},_),"f"),!0}return!1},_PQueue_tryToStartAnother=function(){if(__classPrivateFieldGet(this,_PQueue_queue,"f").size===0)return __classPrivateFieldGet(this,_PQueue_intervalId,"f")&&clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f"),this.emit("empty"),__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&this.emit("idle"),!1;if(!__classPrivateFieldGet(this,_PQueue_isPaused,"f")){const n=!__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_isIntervalPaused_get);if(__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesIntervalAllowAnother_get)&&__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesConcurrentAllowAnother_get)){const _=__classPrivateFieldGet(this,_PQueue_queue,"f").dequeue();return _?(this.emit("active"),_(),n&&__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),!0):!1}}return!1},_PQueue_initializeIntervalIfNeeded=function(){__classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalId,"f")!==void 0||(__classPrivateFieldSet(this,_PQueue_intervalId,setInterval(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this)},__classPrivateFieldGet(this,_PQueue_interval,"f")),"f"),__classPrivateFieldSet(this,_PQueue_intervalEnd,Date.now()+__classPrivateFieldGet(this,_PQueue_interval,"f"),"f"))},_PQueue_onInterval=function(){__classPrivateFieldGet(this,_PQueue_intervalCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&__classPrivateFieldGet(this,_PQueue_intervalId,"f")&&(clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f")),__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pending,"f"):0,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)},_PQueue_processQueue=function(){for(;__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this););},_PQueue_throwOnAbort=async function(n){return new Promise((_,x)=>{n.addEventListener("abort",()=>{x(new AbortError$1("The task was aborted."))},{once:!0})})},_PQueue_onEvent=async function(n,_){return new Promise(x=>{const S=()=>{_&&!_()||(this.off(n,S),x())};this.on(n,S)})};function pDefer(){const r={};return r.promise=new Promise((n,_)=>{r.resolve=n,r.reject=_}),r}class FixedFIFO{constructor(n){_t(this,"buffer");_t(this,"mask");_t(this,"top");_t(this,"btm");_t(this,"next");if(!(n>0)||n-1&n)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(n),this.mask=n-1,this.top=0,this.btm=0,this.next=null}push(n){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=n,this.top=this.top+1&this.mask,!0)}shift(){const n=this.buffer[this.btm];if(n!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,n}isEmpty(){return this.buffer[this.btm]===void 0}}class FIFO{constructor(n={}){_t(this,"size");_t(this,"hwm");_t(this,"head");_t(this,"tail");this.hwm=n.splitLimit??16,this.head=new FixedFIFO(this.hwm),this.tail=this.head,this.size=0}calculateSize(n){return n?.byteLength!=null?n.byteLength:1}push(n){if(n?.value!=null&&(this.size+=this.calculateSize(n.value)),!this.head.push(n)){const _=this.head;this.head=_.next=new FixedFIFO(2*this.head.buffer.length),this.head.push(n)}}shift(){let n=this.tail.shift();if(n===void 0&&this.tail.next!=null){const _=this.tail.next;this.tail.next=null,this.tail=_,n=this.tail.shift()}return n?.value!=null&&(this.size-=this.calculateSize(n.value)),n}isEmpty(){return this.head.isEmpty()}}class AbortError extends Error{constructor(_,x){super(_??"The operation was aborted");_t(this,"type");_t(this,"code");this.type="aborted",this.code=x??"ABORT_ERR"}}function pushable(r={}){return _pushable(_=>{const x=_.shift();if(x==null)return{done:!0};if(x.error!=null)throw x.error;return{done:x.done===!0,value:x.value}},r)}function pushableV(r={}){return _pushable(_=>{let x;const S=[];for(;!_.isEmpty()&&(x=_.shift(),x!=null);){if(x.error!=null)throw x.error;x.done===!1&&S.push(x.value)}return x==null?{done:!0}:{done:x.done===!0,value:S}},r)}function _pushable(r,n){n=n??{};let _=n.onEnd,x=new FIFO,S,E,C,T=pDefer();const B=async()=>{try{return x.isEmpty()?C?{done:!0}:await new Promise((M,L)=>{E=j=>{E=null,x.push(j);try{M(r(x))}catch(q){L(q)}return S}}):r(x)}finally{x.isEmpty()&&queueMicrotask(()=>{T.resolve(),T=pDefer()})}},A=M=>E!=null?E(M):(x.push(M),S),I=M=>(x=new FIFO,E!=null?E({error:M}):(x.push({error:M}),S)),N=M=>{if(C)return S;if(n?.objectMode!==!0&&M?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return A({done:!1,value:M})},V=M=>C?S:(C=!0,M!=null?I(M):A({done:!0})),D=()=>(x=new FIFO,V(),{done:!0}),O=M=>(V(M),{done:!0});if(S={[Symbol.asyncIterator](){return this},next:B,return:D,throw:O,push:N,end:V,get readableLength(){return x.size},onEmpty:async M=>{const L=M?.signal;if(L?.throwIfAborted(),x.isEmpty())return;let j,q;L!=null&&(j=new Promise((H,X)=>{q=()=>{X(new AbortError)},L.addEventListener("abort",q)}));try{await Promise.race([T.promise,j])}finally{q!=null&&L!=null&&L?.removeEventListener("abort",q)}}},_==null)return S;const F=S;return S={[Symbol.asyncIterator](){return this},next(){return F.next()},throw(M){return F.throw(M),_!=null&&(_(M),_=void 0),{done:!0}},return(){return F.return(),_!=null&&(_(),_=void 0),{done:!0}},push:N,end(M){return F.end(M),_!=null&&(_(M),_=void 0),S},get readableLength(){return F.readableLength}},S}function isAsyncIterable$2(r){return r[Symbol.asyncIterator]!=null}function merge$2(...r){const n=[];for(const _ of r)isAsyncIterable$2(_)||n.push(_);return n.length===r.length?function*(){for(const _ of n)yield*_}():async function*(){const _=pushable({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(r.map(async x=>{for await(const S of x)_.push(S)})),_.end()}catch(x){_.end(x)}}),yield*_}()}function pipe(r,...n){if(r==null)throw new Error("Empty pipeline");if(isDuplex(r)){const x=r;r=()=>x.source}else if(isIterable(r)||isAsyncIterable$1(r)){const x=r;r=()=>x}const _=[r,...n];if(_.length>1&&isDuplex(_[_.length-1])&&(_[_.length-1]=_[_.length-1].sink),_.length>2)for(let x=1;x<_.length-1;x++)isDuplex(_[x])&&(_[x]=duplexPipelineFn(_[x]));return rawPipe(..._)}const rawPipe=(...r)=>{let n;for(;r.length>0;)n=r.shift()(n);return n},isAsyncIterable$1=r=>r?.[Symbol.asyncIterator]!=null,isIterable=r=>r?.[Symbol.iterator]!=null,isDuplex=r=>r==null?!1:r.sink!=null&&r.source!=null,duplexPipelineFn=r=>n=>{const _=r.sink(n);if(_?.then!=null){const x=pushable({objectMode:!0});_.then(()=>{x.end()},C=>{x.end(C)});let S;const E=r.source;if(isAsyncIterable$1(E))S=async function*(){yield*E,x.end()};else if(isIterable(E))S=function*(){yield*E,x.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return merge$2(x,S())}return r.source};var timeBrowser=function(){return Date.now()};const getTime=timeBrowser;class Retimer{constructor(n,_,x){const S=this;this._started=getTime(),this._rescheduled=0,this._scheduled=_,this._args=x,this._triggered=!1,this._timerWrapper=()=>{S._rescheduled>0?(S._scheduled=S._rescheduled-(getTime()-S._started),S._schedule(S._scheduled)):(S._triggered=!0,n.apply(null,S._args))},this._timer=setTimeout(this._timerWrapper,_)}reschedule(n){n||(n=this._scheduled);const _=getTime();_+n-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(n)):this._triggered?this._schedule(n):(this._started=_,this._rescheduled=n)}_schedule(n){this._triggered=!1,this._started=getTime(),this._rescheduled=0,this._scheduled=n,this._timer=setTimeout(this._timerWrapper,n)}clear(){clearTimeout(this._timer)}}function retimer$1(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let r;if(arguments.length>0){r=new Array(arguments.length-2);for(var n=0;n<r.length;n++)r[n]=arguments[n+2]}return new Retimer(arguments[0],arguments[1],r)}var retimer_1=retimer$1;const retimer$2=getDefaultExportFromCjs(retimer_1),{AbortController}=globalThis,retimer=retimer_1;class TimeoutController extends AbortController{constructor(n){super(),this._ms=n,this._timer=retimer(()=>this.abort(),n),Object.setPrototypeOf(this,TimeoutController.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=retimer(()=>this.abort(),this._ms)}}var timeoutAbortController={TimeoutController};const posixJoin=(...r)=>r.join("/").replace(/((?<=\/)\/+)|(^\.\/)|((?<=\/)\.\/)/g,"")||".",DefaultTimeout=3e4,Sync=async({ipfs:r,log:n,events:_,onSynced:x,start:S,timeout:E})=>{if(!r)throw new Error("An instance of ipfs is required.");if(!n)throw new Error("An instance of log is required.");const C=n.id,T=posixJoin("/orbitdb/heads/",C),B=new PQueue({concurrency:1}),A=new Set;_=_||new eventsExports.EventEmitter,E=E||DefaultTimeout;let I=!1;const N=async H=>{const X=await n.heads();_.emit("join",H,X)},V=async H=>async function*(){const X=await n.heads();for await(const{bytes:J}of X)yield J}(),D=H=>async X=>{for await(const J of X){const Z=J.subarray();Z&&x&&await x(Z)}await N(H)},O=async({connection:H,stream:X})=>{const J=String(H.remotePeer);try{A.add(J),await pipe(X,D(J),V,X)}catch(Z){A.delete(J),_.emit("error",Z)}},F=async H=>{const X=async()=>{const{peerId:J,subscriptions:Z}=H.detail,ae=String(J),ce=Z.find(ve=>ve.topic===C);if(ce)if(ce.subscribe){if(A.has(ae))return;const ve=new timeoutAbortController.TimeoutController(E),{signal:pe}=ve;try{A.add(ae);const G=await r.libp2p.dialProtocol(J,T,{signal:pe});await pipe(V,G,D(ae))}catch(G){G.code==="ERR_UNSUPPORTED_PROTOCOL"||(A.delete(ae),_.emit("error",G))}finally{ve&&ve.clear()}}else A.delete(ae),_.emit("leave",ae)};B.add(X)},M=async H=>{const X=async()=>{const{id:J}=await r.id(),Z=ce=>String(J)!==String(ce.from),ae=ce=>ce.data!==void 0;try{Z(H)&&ae(H)&&x&&await x(H.data)}catch(ce){_.emit("error",ce)}};B.add(X)},L=async H=>{I&&await r.pubsub.publish(C,H.bytes)},j=async()=>{I&&(await B.onIdle(),r.libp2p.pubsub.removeEventListener("subscription-change",F),await r.libp2p.unhandle(T),await r.pubsub.unsubscribe(C,M),A.clear(),I=!1)},q=async()=>{I||(await r.libp2p.handle(T,O),r.libp2p.pubsub.addEventListener("subscription-change",F),await r.pubsub.subscribe(C,M),I=!0)};return S!==!1&&await q(),{add:L,stop:j,start:q,events:_,peers:A}};var inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(n,_){_&&(n.super_=_,n.prototype=Object.create(_.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(n,_){if(_){n.super_=_;var x=function(){};x.prototype=_.prototype,n.prototype=new x,n.prototype.constructor=n}};var inherits_browserExports=inherits_browser.exports,events=eventsExports,inherits$2=inherits_browserExports,lru=LRU;function LRU(r){if(!(this instanceof LRU))return new LRU(r);typeof r=="number"&&(r={max:r}),r||(r={}),events.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=r.max||1e3,this.maxAge=r.maxAge||0}inherits$2(LRU,events.EventEmitter);Object.defineProperty(LRU.prototype,"keys",{get:function(){return Object.keys(this.cache)}});LRU.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0};LRU.prototype.remove=function(r){if(typeof r!="string"&&(r=""+r),!!this.cache.hasOwnProperty(r)){var n=this.cache[r];return delete this.cache[r],this._unlink(r,n.prev,n.next),n.value}};LRU.prototype._unlink=function(r,n,_){this.length--,this.length===0?this.head=this.tail=null:this.head===r?(this.head=n,this.cache[this.head].next=null):this.tail===r?(this.tail=_,this.cache[this.tail].prev=null):(this.cache[n].next=_,this.cache[_].prev=n)};LRU.prototype.peek=function(r){if(this.cache.hasOwnProperty(r)){var n=this.cache[r];if(this._checkAge(r,n))return n.value}};LRU.prototype.set=function(r,n){typeof r!="string"&&(r=""+r);var _;if(this.cache.hasOwnProperty(r)){if(_=this.cache[r],_.value=n,this.maxAge&&(_.modified=Date.now()),r===this.head)return n;this._unlink(r,_.prev,_.next)}else _={value:n,modified:0,next:null,prev:null},this.maxAge&&(_.modified=Date.now()),this.cache[r]=_,this.length===this.max&&this.evict();return this.length++,_.next=null,_.prev=this.head,this.head&&(this.cache[this.head].next=r),this.head=r,this.tail||(this.tail=r),n};LRU.prototype._checkAge=function(r,n){return this.maxAge&&Date.now()-n.modified>this.maxAge?(this.remove(r),this.emit("evict",{key:r,value:n.value}),!1):!0};LRU.prototype.get=function(r){if(typeof r!="string"&&(r=""+r),!!this.cache.hasOwnProperty(r)){var n=this.cache[r];if(this._checkAge(r,n))return this.head!==r&&(r===this.tail?(this.tail=n.next,this.cache[this.tail].prev=null):this.cache[n.prev].next=n.next,this.cache[n.next].prev=n.prev,this.cache[this.head].next=r,n.prev=this.head,n.next=null,this.head=r),n.value}};LRU.prototype.evict=function(){if(this.tail){var r=this.tail,n=this.remove(this.tail);this.emit("evict",{key:r,value:n})}};const LRU$1=getDefaultExportFromCjs(lru),compareClocks=(r,n)=>{const _=r.time-n.time;return _===0&&r.id!==n.id?r.id<n.id?-1:1:_},tickClock=r=>Clock(r.id,++r.time),Clock=(r,n)=>(n=n||0,{id:r,time:n}),equals$4=(r,n)=>{if(r===n)return!0;if(r.byteLength!==n.byteLength)return!1;for(let _=0;_<r.byteLength;_++)if(r[_]!==n[_])return!1;return!0},coerce$2=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};function base$4(r,n){if(r.length>=255)throw new TypeError("Alphabet too long");for(var _=new Uint8Array(256),x=0;x<_.length;x++)_[x]=255;for(var S=0;S<r.length;S++){var E=r.charAt(S),C=E.charCodeAt(0);if(_[C]!==255)throw new TypeError(E+" is ambiguous");_[C]=S}var T=r.length,B=r.charAt(0),A=Math.log(T)/Math.log(256),I=Math.log(256)/Math.log(T);function N(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var F=0,M=0,L=0,j=O.length;L!==j&&O[L]===0;)L++,F++;for(var q=(j-L)*I+1>>>0,H=new Uint8Array(q);L!==j;){for(var X=O[L],J=0,Z=q-1;(X!==0||J<M)&&Z!==-1;Z--,J++)X+=256*H[Z]>>>0,H[Z]=X%T>>>0,X=X/T>>>0;if(X!==0)throw new Error("Non-zero carry");M=J,L++}for(var ae=q-M;ae!==q&&H[ae]===0;)ae++;for(var ce=B.repeat(F);ae<q;++ae)ce+=r.charAt(H[ae]);return ce}function V(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var F=0;if(O[F]!==" "){for(var M=0,L=0;O[F]===B;)M++,F++;for(var j=(O.length-F)*A+1>>>0,q=new Uint8Array(j);O[F];){var H=_[O.charCodeAt(F)];if(H===255)return;for(var X=0,J=j-1;(H!==0||X<L)&&J!==-1;J--,X++)H+=T*q[J]>>>0,q[J]=H%256>>>0,H=H/256>>>0;if(H!==0)throw new Error("Non-zero carry");L=X,F++}if(O[F]!==" "){for(var Z=j-L;Z!==j&&q[Z]===0;)Z++;for(var ae=new Uint8Array(M+(j-Z)),ce=M;Z!==j;)ae[ce++]=q[Z++];return ae}}}function D(O){var F=V(O);if(F)return F;throw new Error(`Non-${n} character`)}return{encode:N,decodeUnsafe:V,decode:D}}var src$3=base$4,_brrp__multiformats_scope_baseX$2=src$3;let Encoder$3=class{constructor(n,_,x){this.name=n,this.prefix=_,this.baseEncode=x}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}},Decoder$3=class{constructor(n,_,x){if(this.name=n,this.prefix=_,_.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=_.codePointAt(0),this.baseDecode=x}decode(n){if(typeof n=="string"){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(n){return or$2(this,n)}},ComposedDecoder$2=class{constructor(n){this.decoders=n}or(n){return or$2(this,n)}decode(n){const _=n[0],x=this.decoders[_];if(x)return x.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$2=(r,n)=>new ComposedDecoder$2({...r.decoders||{[r.prefix]:r},...n.decoders||{[n.prefix]:n}});let Codec$3=class{constructor(n,_,x,S){this.name=n,this.prefix=_,this.baseEncode=x,this.baseDecode=S,this.encoder=new Encoder$3(n,_,x),this.decoder=new Decoder$3(n,_,S)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}};const from$5=({name:r,prefix:n,encode:_,decode:x})=>new Codec$3(r,n,_,x),baseX$2=({prefix:r,name:n,alphabet:_})=>{const{encode:x,decode:S}=_brrp__multiformats_scope_baseX$2(_,n);return from$5({prefix:r,name:n,encode:x,decode:E=>coerce$2(S(E))})},decode$k=(r,n,_,x)=>{const S={};for(let I=0;I<n.length;++I)S[n[I]]=I;let E=r.length;for(;r[E-1]==="=";)--E;const C=new Uint8Array(E*_/8|0);let T=0,B=0,A=0;for(let I=0;I<E;++I){const N=S[r[I]];if(N===void 0)throw new SyntaxError(`Non-${x} character`);B=B<<_|N,T+=_,T>=8&&(T-=8,C[A++]=255&B>>T)}if(T>=_||255&B<<8-T)throw new SyntaxError("Unexpected end of data");return C},encode$j=(r,n,_)=>{const x=n[n.length-1]==="=",S=(1<<_)-1;let E="",C=0,T=0;for(let B=0;B<r.length;++B)for(T=T<<8|r[B],C+=8;C>_;)C-=_,E+=n[S&T>>C];if(C&&(E+=n[S&T<<_-C]),x)for(;E.length*_&7;)E+="=";return E},rfc4648$2=({name:r,prefix:n,bitsPerChar:_,alphabet:x})=>from$5({prefix:n,name:r,encode(S){return encode$j(S,x,_)},decode(S){return decode$k(S,x,_,r)}}),base32$3=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base58btc$2=baseX$2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var encode_1$3=encode$i,MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$i(r,n,_){n=n||[],_=_||0;for(var x=_;r>=INT$1;)n[_++]=r&255|MSB$2,r/=128;for(;r&MSBALL$1;)n[_++]=r&255|MSB$2,r>>>=7;return n[_]=r|0,encode$i.bytes=_-x+1,n}var decode$j=read$3,MSB$1$1=128,REST$1$1=127;function read$3(r,x){var _=0,x=x||0,S=0,E=x,C,T=r.length;do{if(E>=T)throw read$3.bytes=0,new RangeError("Could not decode varint");C=r[E++],_+=S<28?(C&REST$1$1)<<S:(C&REST$1$1)*Math.pow(2,S),S+=7}while(C>=MSB$1$1);return read$3.bytes=E-x,_}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(r){return r<N1$1?1:r<N2$1?2:r<N3$1?3:r<N4$1?4:r<N5$1?5:r<N6$1?6:r<N7$1?7:r<N8$1?8:r<N9$1?9:10},varint$1={encode:encode_1$3,decode:decode$j,encodingLength:length$1},_brrp_varint$1=varint$1;const decode$i=(r,n=0)=>[_brrp_varint$1.decode(r,n),_brrp_varint$1.decode.bytes],encodeTo$1=(r,n,_=0)=>(_brrp_varint$1.encode(r,n,_),n),encodingLength$1=r=>_brrp_varint$1.encodingLength(r),create$5=(r,n)=>{const _=n.byteLength,x=encodingLength$1(r),S=x+encodingLength$1(_),E=new Uint8Array(S+_);return encodeTo$1(r,E,0),encodeTo$1(_,E,x),E.set(n,S),new Digest$1(r,_,n,E)},decode$h=r=>{const n=coerce$2(r),[_,x]=decode$i(n),[S,E]=decode$i(n.subarray(x)),C=n.subarray(x+E);if(C.byteLength!==S)throw new Error("Incorrect length");return new Digest$1(_,S,C,n)},equals$3=(r,n)=>{if(r===n)return!0;{const _=n;return r.code===_.code&&r.size===_.size&&_.bytes instanceof Uint8Array&&equals$4(r.bytes,_.bytes)}};let Digest$1=class{constructor(n,_,x,S){this.code=n,this.size=_,this.digest=x,this.bytes=S}};const format$4=(r,n)=>{const{bytes:_,version:x}=r;switch(x){case 0:return toStringV0$1(_,baseCache$1(r),n||base58btc$2.encoder);default:return toStringV1$1(_,baseCache$1(r),n||base32$3.encoder)}},cache$2=new WeakMap,baseCache$1=r=>{const n=cache$2.get(r);if(n==null){const _=new Map;return cache$2.set(r,_),_}return n};let CID$1=class an{constructor(n,_,x,S){this.code=_,this.version=n,this.multihash=x,this.bytes=S,this["/"]=S}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:n,multihash:_}=this;if(n!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(_.code!==SHA_256_CODE$1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return an.createV0(_)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:n,digest:_}=this.multihash,x=create$5(n,_);return an.createV1(this.code,x)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(n){return an.equals(this,n)}static equals(n,_){const x=_;return x&&n.code===x.code&&n.version===x.version&&equals$3(n.multihash,x.multihash)}toString(n){return format$4(this,n)}toJSON(){return{"/":format$4(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(n){if(n==null)return null;const _=n;if(_ instanceof an)return _;if(_["/"]!=null&&_["/"]===_.bytes||_.asCID===_){const{version:x,code:S,multihash:E,bytes:C}=_;return new an(x,S,E,C||encodeCID$1(x,S,E.bytes))}else if(_[cidSymbol$1]===!0){const{version:x,multihash:S,code:E}=_,C=decode$h(S);return an.create(x,E,C)}else return null}static create(n,_,x){if(typeof _!="number")throw new Error("String codecs are no longer supported");if(!(x.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(n){case 0:{if(_!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new an(n,_,x,x.bytes)}case 1:{const S=encodeCID$1(n,_,x.bytes);return new an(n,_,x,S)}default:throw new Error("Invalid version")}}static createV0(n){return an.create(0,DAG_PB_CODE$1,n)}static createV1(n,_){return an.create(1,n,_)}static decode(n){const[_,x]=an.decodeFirst(n);if(x.length)throw new Error("Incorrect length");return _}static decodeFirst(n){const _=an.inspectBytes(n),x=_.size-_.multihashSize,S=coerce$2(n.subarray(x,x+_.multihashSize));if(S.byteLength!==_.multihashSize)throw new Error("Incorrect length");const E=S.subarray(_.multihashSize-_.digestSize),C=new Digest$1(_.multihashCode,_.digestSize,E,S);return[_.version===0?an.createV0(C):an.createV1(_.codec,C),n.subarray(_.size)]}static inspectBytes(n){let _=0;const x=()=>{const[N,V]=decode$i(n.subarray(_));return _+=V,N};let S=x(),E=DAG_PB_CODE$1;if(S===18?(S=0,_=0):E=x(),S!==0&&S!==1)throw new RangeError(`Invalid CID version ${S}`);const C=_,T=x(),B=x(),A=_+B,I=A-C;return{version:S,codec:E,multihashCode:T,digestSize:B,multihashSize:I,size:A}}static parse(n,_){const[x,S]=parseCIDtoBytes$1(n,_),E=an.decode(S);if(E.version===0&&n[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$1(E).set(x,n),E}};const parseCIDtoBytes$1=(r,n)=>{switch(r[0]){case"Q":{const _=n||base58btc$2;return[base58btc$2.prefix,_.decode(`${base58btc$2.prefix}${r}`)]}case base58btc$2.prefix:{const _=n||base58btc$2;return[base58btc$2.prefix,_.decode(r)]}case base32$3.prefix:{const _=n||base32$3;return[base32$3.prefix,_.decode(r)]}default:{if(n==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],n.decode(r)]}}},toStringV0$1=(r,n,_)=>{const{prefix:x}=_;if(x!==base58btc$2.prefix)throw Error(`Cannot string encode V0 in ${_.name} encoding`);const S=n.get(x);if(S==null){const E=_.encode(r).slice(1);return n.set(x,E),E}else return S},toStringV1$1=(r,n,_)=>{const{prefix:x}=_,S=n.get(x);if(S==null){const E=_.encode(r);return n.set(x,E),E}else return S},DAG_PB_CODE$1=112,SHA_256_CODE$1=18,encodeCID$1=(r,n,_)=>{const x=encodingLength$1(r),S=x+encodingLength$1(n),E=new Uint8Array(S+_.byteLength);return encodeTo$1(r,E,0),encodeTo$1(n,E,x),E.set(_,S),E},cidSymbol$1=Symbol.for("@ipld/js-cid/CID"),from$4=({name:r,code:n,encode:_})=>new Hasher$1(r,n,_);let Hasher$1=class{constructor(n,_,x){this.name=n,this.code=_,this.encode=x}digest(n){if(n instanceof Uint8Array){const _=this.encode(n);return _ instanceof Uint8Array?create$5(this.code,_):_.then(x=>create$5(this.code,x))}else throw Error("Unknown type, must be binary type")}};function readonly$1({enumerable:r=!0,configurable:n=!1}={}){return{enumerable:r,configurable:n,writable:!1}}function*linksWithin(r,n){if(n!=null&&typeof n=="object")if(Array.isArray(n))for(const[_,x]of n.entries()){const S=[...r,_],E=CID$1.asCID(x);E?yield[S.join("/"),E]:typeof x=="object"&&(yield*links$1(x,S))}else{const _=CID$1.asCID(n);_?yield[r.join("/"),_]:yield*links$1(n,r)}}function*links$1(r,n){if(r==null||r instanceof Uint8Array)return;const _=CID$1.asCID(r);_&&(yield[n.join("/"),_]);for(const[x,S]of Object.entries(r)){const E=[...n,x];yield*linksWithin(E,S)}}function*treeWithin(r,n){if(Array.isArray(n))for(const[_,x]of n.entries()){const S=[...r,_];yield S.join("/"),typeof x=="object"&&!CID$1.asCID(x)&&(yield*tree$1(x,S))}else yield*tree$1(n,r)}function*tree$1(r,n){if(!(r==null||typeof r!="object"))for(const[_,x]of Object.entries(r)){const S=[...n,_];yield S.join("/"),x!=null&&!(x instanceof Uint8Array)&&typeof x=="object"&&!CID$1.asCID(x)&&(yield*treeWithin(S,x))}}function get$2(r,n){let _=r;for(const[x,S]of n.entries()){if(_=_[S],_==null)throw new Error(`Object has no property at ${n.slice(0,x+1).map(C=>`[${JSON.stringify(C)}]`).join("")}`);const E=CID$1.asCID(_);if(E)return{value:E,remaining:n.slice(x+1).join("/")}}return{value:_}}let Block$1=class{constructor({cid:n,bytes:_,value:x}){if(!n||!_||typeof x>"u")throw new Error("Missing required argument");this.cid=n,this.bytes=_,this.value=x,this.asBlock=this,Object.defineProperties(this,{cid:readonly$1(),bytes:readonly$1(),value:readonly$1(),asBlock:readonly$1()})}links(){return links$1(this.value,[])}tree(){return tree$1(this.value,[])}get(n="/"){return get$2(this.value,n.split("/").filter(Boolean))}};async function encode$h({value:r,codec:n,hasher:_}){if(typeof r>"u")throw new Error('Missing required argument "value"');if(!n||!_)throw new Error("Missing required argument: codec or hasher");const x=n.encode(r),S=await _.digest(x),E=CID$1.create(1,n.code,S);return new Block$1({value:r,bytes:x,cid:E})}async function decode$g({bytes:r,codec:n,hasher:_}){if(!r)throw new Error('Missing required argument "bytes"');if(!n||!_)throw new Error("Missing required argument: codec or hasher");const x=n.decode(r),S=await _.digest(r),E=CID$1.create(1,n.code,S);return new Block$1({value:x,bytes:r,cid:E})}const typeofs$1=["string","number","bigint","symbol"],objectTypeNames$1=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is$1(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";const n=typeof r;if(typeofs$1.includes(n))return n;if(n==="function")return"Function";if(Array.isArray(r))return"Array";if(isBuffer$5(r))return"Buffer";const _=getObjectType$1(r);return _||"Object"}function isBuffer$5(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function getObjectType$1(r){const n=Object.prototype.toString.call(r).slice(8,-1);if(objectTypeNames$1.includes(n))return n}let Type$1=class{constructor(n,_,x){this.major=n,this.majorEncoded=n<<5,this.name=_,this.terminal=x}toString(){return`Type[${this.major}].${this.name}`}compare(n){return this.major<n.major?-1:this.major>n.major?1:0}};Type$1.uint=new Type$1(0,"uint",!0);Type$1.negint=new Type$1(1,"negint",!0);Type$1.bytes=new Type$1(2,"bytes",!0);Type$1.string=new Type$1(3,"string",!0);Type$1.array=new Type$1(4,"array",!1);Type$1.map=new Type$1(5,"map",!1);Type$1.tag=new Type$1(6,"tag",!1);Type$1.float=new Type$1(7,"float",!0);Type$1.false=new Type$1(7,"false",!0);Type$1.true=new Type$1(7,"true",!0);Type$1.null=new Type$1(7,"null",!0);Type$1.undefined=new Type$1(7,"undefined",!0);Type$1.break=new Type$1(7,"break",!0);let Token$1=class{constructor(n,_,x){this.type=n,this.value=_,this.encodedLength=x,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};const useBuffer$1=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$2=new TextDecoder,textEncoder$3=new TextEncoder;function isBuffer$4(r){return useBuffer$1&&globalThis.Buffer.isBuffer(r)}function asU8A$1(r){return r instanceof Uint8Array?isBuffer$4(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}const toString$7=useBuffer$1?(r,n,_)=>_-n>64?globalThis.Buffer.from(r.subarray(n,_)).toString("utf8"):utf8Slice$1(r,n,_):(r,n,_)=>_-n>64?textDecoder$2.decode(r.subarray(n,_)):utf8Slice$1(r,n,_),fromString$3=useBuffer$1?r=>r.length>64?globalThis.Buffer.from(r):utf8ToBytes$3(r):r=>r.length>64?textEncoder$3.encode(r):utf8ToBytes$3(r),fromArray$1=r=>Uint8Array.from(r),slice$1=useBuffer$1?(r,n,_)=>isBuffer$4(r)?new Uint8Array(r.subarray(n,_)):r.slice(n,_):(r,n,_)=>r.slice(n,_),concat$1=useBuffer$1?(r,n)=>(r=r.map(_=>_ instanceof Uint8Array?_:globalThis.Buffer.from(_)),asU8A$1(globalThis.Buffer.concat(r,n))):(r,n)=>{const _=new Uint8Array(n);let x=0;for(let S of r)x+S.length>_.length&&(S=S.subarray(0,_.length-x)),_.set(S,x),x+=S.length;return _},alloc$1=useBuffer$1?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function compare$2(r,n){if(isBuffer$4(r)&&isBuffer$4(n))return r.compare(n);for(let _=0;_<r.length;_++)if(r[_]!==n[_])return r[_]<n[_]?-1:1;return 0}function utf8ToBytes$3(r){const n=[];let _=0;for(let x=0;x<r.length;x++){let S=r.charCodeAt(x);S<128?n[_++]=S:S<2048?(n[_++]=S>>6|192,n[_++]=S&63|128):(S&64512)===55296&&x+1<r.length&&(r.charCodeAt(x+1)&64512)===56320?(S=65536+((S&1023)<<10)+(r.charCodeAt(++x)&1023),n[_++]=S>>18|240,n[_++]=S>>12&63|128,n[_++]=S>>6&63|128,n[_++]=S&63|128):(n[_++]=S>>12|224,n[_++]=S>>6&63|128,n[_++]=S&63|128)}return n}function utf8Slice$1(r,n,_){const x=[];for(;n<_;){const S=r[n];let E=null,C=S>239?4:S>223?3:S>191?2:1;if(n+C<=_){let T,B,A,I;switch(C){case 1:S<128&&(E=S);break;case 2:T=r[n+1],(T&192)===128&&(I=(S&31)<<6|T&63,I>127&&(E=I));break;case 3:T=r[n+1],B=r[n+2],(T&192)===128&&(B&192)===128&&(I=(S&15)<<12|(T&63)<<6|B&63,I>2047&&(I<55296||I>57343)&&(E=I));break;case 4:T=r[n+1],B=r[n+2],A=r[n+3],(T&192)===128&&(B&192)===128&&(A&192)===128&&(I=(S&15)<<18|(T&63)<<12|(B&63)<<6|A&63,I>65535&&I<1114112&&(E=I))}}E===null?(E=65533,C=1):E>65535&&(E-=65536,x.push(E>>>10&1023|55296),E=56320|E&1023),x.push(E),n+=C}return decodeCodePointsArray$1(x)}const MAX_ARGUMENTS_LENGTH$1=4096;function decodeCodePointsArray$1(r){const n=r.length;if(n<=MAX_ARGUMENTS_LENGTH$1)return String.fromCharCode.apply(String,r);let _="",x=0;for(;x<n;)_+=String.fromCharCode.apply(String,r.slice(x,x+=MAX_ARGUMENTS_LENGTH$1));return _}const defaultChunkSize$1=256;let Bl$1=class{constructor(n=defaultChunkSize$1){this.chunkSize=n,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(n){let _=this.chunks[this.chunks.length-1];if(this.cursor+n.length<=this.maxCursor+1){const S=_.length-(this.maxCursor-this.cursor)-1;_.set(n,S)}else{if(_){const S=_.length-(this.maxCursor-this.cursor)-1;S<_.length&&(this.chunks[this.chunks.length-1]=_.subarray(0,S),this.maxCursor=this.cursor-1)}n.length<64&&n.length<this.chunkSize?(_=alloc$1(this.chunkSize),this.chunks.push(_),this.maxCursor+=_.length,this._initReuseChunk===null&&(this._initReuseChunk=_),_.set(n,0)):(this.chunks.push(n),this.maxCursor+=n.length)}this.cursor+=n.length}toBytes(n=!1){let _;if(this.chunks.length===1){const x=this.chunks[0];n&&this.cursor>x.length/2?(_=this.cursor===x.length?x:x.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):_=slice$1(x,0,this.cursor)}else _=concat$1(this.chunks,this.cursor);return n&&this.reset(),_}};const decodeErrPrefix$1="CBOR decode error:",encodeErrPrefix$1="CBOR encode error:";function assertEnoughData$1(r,n,_){if(r.length-n<_)throw new Error(`${decodeErrPrefix$1} not enough data for type`)}const uintBoundaries$1=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8$1(r,n,_){assertEnoughData$1(r,n,1);const x=r[n];if(_.strict===!0&&x<uintBoundaries$1[0])throw new Error(`${decodeErrPrefix$1} integer encoded in more bytes than necessary (strict decode)`);return x}function readUint16$1(r,n,_){assertEnoughData$1(r,n,2);const x=r[n]<<8|r[n+1];if(_.strict===!0&&x<uintBoundaries$1[1])throw new Error(`${decodeErrPrefix$1} integer encoded in more bytes than necessary (strict decode)`);return x}function readUint32$1(r,n,_){assertEnoughData$1(r,n,4);const x=r[n]*16777216+(r[n+1]<<16)+(r[n+2]<<8)+r[n+3];if(_.strict===!0&&x<uintBoundaries$1[2])throw new Error(`${decodeErrPrefix$1} integer encoded in more bytes than necessary (strict decode)`);return x}function readUint64$1(r,n,_){assertEnoughData$1(r,n,8);const x=r[n]*16777216+(r[n+1]<<16)+(r[n+2]<<8)+r[n+3],S=r[n+4]*16777216+(r[n+5]<<16)+(r[n+6]<<8)+r[n+7],E=(BigInt(x)<<BigInt(32))+BigInt(S);if(_.strict===!0&&E<uintBoundaries$1[3])throw new Error(`${decodeErrPrefix$1} integer encoded in more bytes than necessary (strict decode)`);if(E<=Number.MAX_SAFE_INTEGER)return Number(E);if(_.allowBigInt===!0)return E;throw new Error(`${decodeErrPrefix$1} integers outside of the safe integer range are not supported`)}function decodeUint8$1(r,n,_,x){return new Token$1(Type$1.uint,readUint8$1(r,n+1,x),2)}function decodeUint16$1(r,n,_,x){return new Token$1(Type$1.uint,readUint16$1(r,n+1,x),3)}function decodeUint32$1(r,n,_,x){return new Token$1(Type$1.uint,readUint32$1(r,n+1,x),5)}function decodeUint64$1(r,n,_,x){return new Token$1(Type$1.uint,readUint64$1(r,n+1,x),9)}function encodeUint$1(r,n){return encodeUintValue$1(r,0,n.value)}function encodeUintValue$1(r,n,_){if(_<uintBoundaries$1[0]){const x=Number(_);r.push([n|x])}else if(_<uintBoundaries$1[1]){const x=Number(_);r.push([n|24,x])}else if(_<uintBoundaries$1[2]){const x=Number(_);r.push([n|25,x>>>8,x&255])}else if(_<uintBoundaries$1[3]){const x=Number(_);r.push([n|26,x>>>24&255,x>>>16&255,x>>>8&255,x&255])}else{const x=BigInt(_);if(x<uintBoundaries$1[4]){const S=[n|27,0,0,0,0,0,0,0];let E=Number(x&BigInt(4294967295)),C=Number(x>>BigInt(32)&BigInt(4294967295));S[8]=E&255,E=E>>8,S[7]=E&255,E=E>>8,S[6]=E&255,E=E>>8,S[5]=E&255,S[4]=C&255,C=C>>8,S[3]=C&255,C=C>>8,S[2]=C&255,C=C>>8,S[1]=C&255,r.push(S)}else throw new Error(`${decodeErrPrefix$1} encountered BigInt larger than allowable range`)}}encodeUint$1.encodedSize=function(n){return encodeUintValue$1.encodedSize(n.value)};encodeUintValue$1.encodedSize=function(n){return n<uintBoundaries$1[0]?1:n<uintBoundaries$1[1]?2:n<uintBoundaries$1[2]?3:n<uintBoundaries$1[3]?5:9};encodeUint$1.compareTokens=function(n,_){return n.value<_.value?-1:n.value>_.value?1:0};function decodeNegint8$1(r,n,_,x){return new Token$1(Type$1.negint,-1-readUint8$1(r,n+1,x),2)}function decodeNegint16$1(r,n,_,x){return new Token$1(Type$1.negint,-1-readUint16$1(r,n+1,x),3)}function decodeNegint32$1(r,n,_,x){return new Token$1(Type$1.negint,-1-readUint32$1(r,n+1,x),5)}const neg1b$1=BigInt(-1),pos1b$1=BigInt(1);function decodeNegint64$1(r,n,_,x){const S=readUint64$1(r,n+1,x);if(typeof S!="bigint"){const E=-1-S;if(E>=Number.MIN_SAFE_INTEGER)return new Token$1(Type$1.negint,E,9)}if(x.allowBigInt!==!0)throw new Error(`${decodeErrPrefix$1} integers outside of the safe integer range are not supported`);return new Token$1(Type$1.negint,neg1b$1-BigInt(S),9)}function encodeNegint$1(r,n){const _=n.value,x=typeof _=="bigint"?_*neg1b$1-pos1b$1:_*-1-1;encodeUintValue$1(r,n.type.majorEncoded,x)}encodeNegint$1.encodedSize=function(n){const _=n.value,x=typeof _=="bigint"?_*neg1b$1-pos1b$1:_*-1-1;return x<uintBoundaries$1[0]?1:x<uintBoundaries$1[1]?2:x<uintBoundaries$1[2]?3:x<uintBoundaries$1[3]?5:9};encodeNegint$1.compareTokens=function(n,_){return n.value<_.value?1:n.value>_.value?-1:0};function toToken$7(r,n,_,x){assertEnoughData$1(r,n,_+x);const S=slice$1(r,n+_,n+_+x);return new Token$1(Type$1.bytes,S,_+x)}function decodeBytesCompact$1(r,n,_,x){return toToken$7(r,n,1,_)}function decodeBytes8$1(r,n,_,x){return toToken$7(r,n,2,readUint8$1(r,n+1,x))}function decodeBytes16$1(r,n,_,x){return toToken$7(r,n,3,readUint16$1(r,n+1,x))}function decodeBytes32$1(r,n,_,x){return toToken$7(r,n,5,readUint32$1(r,n+1,x))}function decodeBytes64$1(r,n,_,x){const S=readUint64$1(r,n+1,x);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix$1} 64-bit integer bytes lengths not supported`);return toToken$7(r,n,9,S)}function tokenBytes$1(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===Type$1.string?fromString$3(r.value):r.value),r.encodedBytes}function encodeBytes$1(r,n){const _=tokenBytes$1(n);encodeUintValue$1(r,n.type.majorEncoded,_.length),r.push(_)}encodeBytes$1.encodedSize=function(n){const _=tokenBytes$1(n);return encodeUintValue$1.encodedSize(_.length)+_.length};encodeBytes$1.compareTokens=function(n,_){return compareBytes$1(tokenBytes$1(n),tokenBytes$1(_))};function compareBytes$1(r,n){return r.length<n.length?-1:r.length>n.length?1:compare$2(r,n)}function toToken$6(r,n,_,x,S){const E=_+x;assertEnoughData$1(r,n,E);const C=new Token$1(Type$1.string,toString$7(r,n+_,n+E),E);return S.retainStringBytes===!0&&(C.byteValue=slice$1(r,n+_,n+E)),C}function decodeStringCompact$1(r,n,_,x){return toToken$6(r,n,1,_,x)}function decodeString8$1(r,n,_,x){return toToken$6(r,n,2,readUint8$1(r,n+1,x),x)}function decodeString16$1(r,n,_,x){return toToken$6(r,n,3,readUint16$1(r,n+1,x),x)}function decodeString32$1(r,n,_,x){return toToken$6(r,n,5,readUint32$1(r,n+1,x),x)}function decodeString64$1(r,n,_,x){const S=readUint64$1(r,n+1,x);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix$1} 64-bit integer string lengths not supported`);return toToken$6(r,n,9,S,x)}const encodeString$1=encodeBytes$1;function toToken$5(r,n,_,x){return new Token$1(Type$1.array,x,_)}function decodeArrayCompact$1(r,n,_,x){return toToken$5(r,n,1,_)}function decodeArray8$1(r,n,_,x){return toToken$5(r,n,2,readUint8$1(r,n+1,x))}function decodeArray16$1(r,n,_,x){return toToken$5(r,n,3,readUint16$1(r,n+1,x))}function decodeArray32$1(r,n,_,x){return toToken$5(r,n,5,readUint32$1(r,n+1,x))}function decodeArray64$1(r,n,_,x){const S=readUint64$1(r,n+1,x);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix$1} 64-bit integer array lengths not supported`);return toToken$5(r,n,9,S)}function decodeArrayIndefinite$1(r,n,_,x){if(x.allowIndefinite===!1)throw new Error(`${decodeErrPrefix$1} indefinite length items not allowed`);return toToken$5(r,n,1,1/0)}function encodeArray$1(r,n){encodeUintValue$1(r,Type$1.array.majorEncoded,n.value)}encodeArray$1.compareTokens=encodeUint$1.compareTokens;encodeArray$1.encodedSize=function(n){return encodeUintValue$1.encodedSize(n.value)};function toToken$4(r,n,_,x){return new Token$1(Type$1.map,x,_)}function decodeMapCompact$1(r,n,_,x){return toToken$4(r,n,1,_)}function decodeMap8$1(r,n,_,x){return toToken$4(r,n,2,readUint8$1(r,n+1,x))}function decodeMap16$1(r,n,_,x){return toToken$4(r,n,3,readUint16$1(r,n+1,x))}function decodeMap32$1(r,n,_,x){return toToken$4(r,n,5,readUint32$1(r,n+1,x))}function decodeMap64$1(r,n,_,x){const S=readUint64$1(r,n+1,x);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix$1} 64-bit integer map lengths not supported`);return toToken$4(r,n,9,S)}function decodeMapIndefinite$1(r,n,_,x){if(x.allowIndefinite===!1)throw new Error(`${decodeErrPrefix$1} indefinite length items not allowed`);return toToken$4(r,n,1,1/0)}function encodeMap$1(r,n){encodeUintValue$1(r,Type$1.map.majorEncoded,n.value)}encodeMap$1.compareTokens=encodeUint$1.compareTokens;encodeMap$1.encodedSize=function(n){return encodeUintValue$1.encodedSize(n.value)};function decodeTagCompact$1(r,n,_,x){return new Token$1(Type$1.tag,_,1)}function decodeTag8$1(r,n,_,x){return new Token$1(Type$1.tag,readUint8$1(r,n+1,x),2)}function decodeTag16$1(r,n,_,x){return new Token$1(Type$1.tag,readUint16$1(r,n+1,x),3)}function decodeTag32$1(r,n,_,x){return new Token$1(Type$1.tag,readUint32$1(r,n+1,x),5)}function decodeTag64$1(r,n,_,x){return new Token$1(Type$1.tag,readUint64$1(r,n+1,x),9)}function encodeTag$1(r,n){encodeUintValue$1(r,Type$1.tag.majorEncoded,n.value)}encodeTag$1.compareTokens=encodeUint$1.compareTokens;encodeTag$1.encodedSize=function(n){return encodeUintValue$1.encodedSize(n.value)};const MINOR_FALSE$1=20,MINOR_TRUE$1=21,MINOR_NULL$1=22,MINOR_UNDEFINED$1=23;function decodeUndefined$1(r,n,_,x){if(x.allowUndefined===!1)throw new Error(`${decodeErrPrefix$1} undefined values are not supported`);return x.coerceUndefinedToNull===!0?new Token$1(Type$1.null,null,1):new Token$1(Type$1.undefined,void 0,1)}function decodeBreak$1(r,n,_,x){if(x.allowIndefinite===!1)throw new Error(`${decodeErrPrefix$1} indefinite length items not allowed`);return new Token$1(Type$1.break,void 0,1)}function createToken$1(r,n,_){if(_){if(_.allowNaN===!1&&Number.isNaN(r))throw new Error(`${decodeErrPrefix$1} NaN values are not supported`);if(_.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${decodeErrPrefix$1} Infinity values are not supported`)}return new Token$1(Type$1.float,r,n)}function decodeFloat16$1(r,n,_,x){return createToken$1(readFloat16$1(r,n+1),3,x)}function decodeFloat32$1(r,n,_,x){return createToken$1(readFloat32$1(r,n+1),5,x)}function decodeFloat64$1(r,n,_,x){return createToken$1(readFloat64$1(r,n+1),9,x)}function encodeFloat$1(r,n,_){const x=n.value;if(x===!1)r.push([Type$1.float.majorEncoded|MINOR_FALSE$1]);else if(x===!0)r.push([Type$1.float.majorEncoded|MINOR_TRUE$1]);else if(x===null)r.push([Type$1.float.majorEncoded|MINOR_NULL$1]);else if(x===void 0)r.push([Type$1.float.majorEncoded|MINOR_UNDEFINED$1]);else{let S,E=!1;(!_||_.float64!==!0)&&(encodeFloat16$1(x),S=readFloat16$1(ui8a$1,1),x===S||Number.isNaN(x)?(ui8a$1[0]=249,r.push(ui8a$1.slice(0,3)),E=!0):(encodeFloat32$1(x),S=readFloat32$1(ui8a$1,1),x===S&&(ui8a$1[0]=250,r.push(ui8a$1.slice(0,5)),E=!0))),E||(encodeFloat64$1(x),S=readFloat64$1(ui8a$1,1),ui8a$1[0]=251,r.push(ui8a$1.slice(0,9)))}}encodeFloat$1.encodedSize=function(n,_){const x=n.value;if(x===!1||x===!0||x===null||x===void 0)return 1;if(!_||_.float64!==!0){encodeFloat16$1(x);let S=readFloat16$1(ui8a$1,1);if(x===S||Number.isNaN(x))return 3;if(encodeFloat32$1(x),S=readFloat32$1(ui8a$1,1),x===S)return 5}return 9};const buffer$2=new ArrayBuffer(9),dataView$1=new DataView(buffer$2,1),ui8a$1=new Uint8Array(buffer$2,0);function encodeFloat16$1(r){if(r===1/0)dataView$1.setUint16(0,31744,!1);else if(r===-1/0)dataView$1.setUint16(0,64512,!1);else if(Number.isNaN(r))dataView$1.setUint16(0,32256,!1);else{dataView$1.setFloat32(0,r);const n=dataView$1.getUint32(0),_=(n&2139095040)>>23,x=n&8388607;if(_===255)dataView$1.setUint16(0,31744,!1);else if(_===0)dataView$1.setUint16(0,(r&2147483648)>>16|x>>13,!1);else{const S=_-127;S<-24?dataView$1.setUint16(0,0):S<-14?dataView$1.setUint16(0,(n&2147483648)>>16|1<<24+S,!1):dataView$1.setUint16(0,(n&2147483648)>>16|S+15<<10|x>>13,!1)}}}function readFloat16$1(r,n){if(r.length-n<2)throw new Error(`${decodeErrPrefix$1} not enough data for float16`);const _=(r[n]<<8)+r[n+1];if(_===31744)return 1/0;if(_===64512)return-1/0;if(_===32256)return NaN;const x=_>>10&31,S=_&1023;let E;return x===0?E=S*2**-24:x!==31?E=(S+1024)*2**(x-25):E=S===0?1/0:NaN,_&32768?-E:E}function encodeFloat32$1(r){dataView$1.setFloat32(0,r,!1)}function readFloat32$1(r,n){if(r.length-n<4)throw new Error(`${decodeErrPrefix$1} not enough data for float32`);const _=(r.byteOffset||0)+n;return new DataView(r.buffer,_,4).getFloat32(0,!1)}function encodeFloat64$1(r){dataView$1.setFloat64(0,r,!1)}function readFloat64$1(r,n){if(r.length-n<8)throw new Error(`${decodeErrPrefix$1} not enough data for float64`);const _=(r.byteOffset||0)+n;return new DataView(r.buffer,_,8).getFloat64(0,!1)}encodeFloat$1.compareTokens=encodeUint$1.compareTokens;function invalidMinor$1(r,n,_){throw new Error(`${decodeErrPrefix$1} encountered invalid minor (${_}) for major ${r[n]>>>5}`)}function errorer$1(r){return()=>{throw new Error(`${decodeErrPrefix$1} ${r}`)}}const jump$1=[];for(let r=0;r<=23;r++)jump$1[r]=invalidMinor$1;jump$1[24]=decodeUint8$1;jump$1[25]=decodeUint16$1;jump$1[26]=decodeUint32$1;jump$1[27]=decodeUint64$1;jump$1[28]=invalidMinor$1;jump$1[29]=invalidMinor$1;jump$1[30]=invalidMinor$1;jump$1[31]=invalidMinor$1;for(let r=32;r<=55;r++)jump$1[r]=invalidMinor$1;jump$1[56]=decodeNegint8$1;jump$1[57]=decodeNegint16$1;jump$1[58]=decodeNegint32$1;jump$1[59]=decodeNegint64$1;jump$1[60]=invalidMinor$1;jump$1[61]=invalidMinor$1;jump$1[62]=invalidMinor$1;jump$1[63]=invalidMinor$1;for(let r=64;r<=87;r++)jump$1[r]=decodeBytesCompact$1;jump$1[88]=decodeBytes8$1;jump$1[89]=decodeBytes16$1;jump$1[90]=decodeBytes32$1;jump$1[91]=decodeBytes64$1;jump$1[92]=invalidMinor$1;jump$1[93]=invalidMinor$1;jump$1[94]=invalidMinor$1;jump$1[95]=errorer$1("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)jump$1[r]=decodeStringCompact$1;jump$1[120]=decodeString8$1;jump$1[121]=decodeString16$1;jump$1[122]=decodeString32$1;jump$1[123]=decodeString64$1;jump$1[124]=invalidMinor$1;jump$1[125]=invalidMinor$1;jump$1[126]=invalidMinor$1;jump$1[127]=errorer$1("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)jump$1[r]=decodeArrayCompact$1;jump$1[152]=decodeArray8$1;jump$1[153]=decodeArray16$1;jump$1[154]=decodeArray32$1;jump$1[155]=decodeArray64$1;jump$1[156]=invalidMinor$1;jump$1[157]=invalidMinor$1;jump$1[158]=invalidMinor$1;jump$1[159]=decodeArrayIndefinite$1;for(let r=160;r<=183;r++)jump$1[r]=decodeMapCompact$1;jump$1[184]=decodeMap8$1;jump$1[185]=decodeMap16$1;jump$1[186]=decodeMap32$1;jump$1[187]=decodeMap64$1;jump$1[188]=invalidMinor$1;jump$1[189]=invalidMinor$1;jump$1[190]=invalidMinor$1;jump$1[191]=decodeMapIndefinite$1;for(let r=192;r<=215;r++)jump$1[r]=decodeTagCompact$1;jump$1[216]=decodeTag8$1;jump$1[217]=decodeTag16$1;jump$1[218]=decodeTag32$1;jump$1[219]=decodeTag64$1;jump$1[220]=invalidMinor$1;jump$1[221]=invalidMinor$1;jump$1[222]=invalidMinor$1;jump$1[223]=invalidMinor$1;for(let r=224;r<=243;r++)jump$1[r]=errorer$1("simple values are not supported");jump$1[244]=invalidMinor$1;jump$1[245]=invalidMinor$1;jump$1[246]=invalidMinor$1;jump$1[247]=decodeUndefined$1;jump$1[248]=errorer$1("simple values are not supported");jump$1[249]=decodeFloat16$1;jump$1[250]=decodeFloat32$1;jump$1[251]=decodeFloat64$1;jump$1[252]=invalidMinor$1;jump$1[253]=invalidMinor$1;jump$1[254]=invalidMinor$1;jump$1[255]=decodeBreak$1;const quick$1=[];for(let r=0;r<24;r++)quick$1[r]=new Token$1(Type$1.uint,r,1);for(let r=-1;r>=-24;r--)quick$1[31-r]=new Token$1(Type$1.negint,r,1);quick$1[64]=new Token$1(Type$1.bytes,new Uint8Array(0),1);quick$1[96]=new Token$1(Type$1.string,"",1);quick$1[128]=new Token$1(Type$1.array,0,1);quick$1[160]=new Token$1(Type$1.map,0,1);quick$1[244]=new Token$1(Type$1.false,!1,1);quick$1[245]=new Token$1(Type$1.true,!0,1);quick$1[246]=new Token$1(Type$1.null,null,1);function quickEncodeToken$1(r){switch(r.type){case Type$1.false:return fromArray$1([244]);case Type$1.true:return fromArray$1([245]);case Type$1.null:return fromArray$1([246]);case Type$1.bytes:return r.value.length?void 0:fromArray$1([64]);case Type$1.string:return r.value===""?fromArray$1([96]):void 0;case Type$1.array:return r.value===0?fromArray$1([128]):void 0;case Type$1.map:return r.value===0?fromArray$1([160]):void 0;case Type$1.uint:return r.value<24?fromArray$1([Number(r.value)]):void 0;case Type$1.negint:if(r.value>=-24)return fromArray$1([31-Number(r.value)])}}const defaultEncodeOptions$1={float64:!1,mapSorter:mapSorter$1,quickEncodeToken:quickEncodeToken$1};function makeCborEncoders$1(){const r=[];return r[Type$1.uint.major]=encodeUint$1,r[Type$1.negint.major]=encodeNegint$1,r[Type$1.bytes.major]=encodeBytes$1,r[Type$1.string.major]=encodeString$1,r[Type$1.array.major]=encodeArray$1,r[Type$1.map.major]=encodeMap$1,r[Type$1.tag.major]=encodeTag$1,r[Type$1.float.major]=encodeFloat$1,r}const cborEncoders$1=makeCborEncoders$1(),buf$1=new Bl$1;let Ref$1=class qc{constructor(n,_){this.obj=n,this.parent=_}includes(n){let _=this;do if(_.obj===n)return!0;while(_=_.parent);return!1}static createCheck(n,_){if(n&&n.includes(_))throw new Error(`${encodeErrPrefix$1} object contains circular references`);return new qc(_,n)}};const simpleTokens$1={null:new Token$1(Type$1.null,null),undefined:new Token$1(Type$1.undefined,void 0),true:new Token$1(Type$1.true,!0),false:new Token$1(Type$1.false,!1),emptyArray:new Token$1(Type$1.array,0),emptyMap:new Token$1(Type$1.map,0)},typeEncoders$1={number(r,n,_,x){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new Token$1(Type$1.float,r):r>=0?new Token$1(Type$1.uint,r):new Token$1(Type$1.negint,r)},bigint(r,n,_,x){return r>=BigInt(0)?new Token$1(Type$1.uint,r):new Token$1(Type$1.negint,r)},Uint8Array(r,n,_,x){return new Token$1(Type$1.bytes,r)},string(r,n,_,x){return new Token$1(Type$1.string,r)},boolean(r,n,_,x){return r?simpleTokens$1.true:simpleTokens$1.false},null(r,n,_,x){return simpleTokens$1.null},undefined(r,n,_,x){return simpleTokens$1.undefined},ArrayBuffer(r,n,_,x){return new Token$1(Type$1.bytes,new Uint8Array(r))},DataView(r,n,_,x){return new Token$1(Type$1.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,n,_,x){if(!r.length)return _.addBreakTokens===!0?[simpleTokens$1.emptyArray,new Token$1(Type$1.break)]:simpleTokens$1.emptyArray;x=Ref$1.createCheck(x,r);const S=[];let E=0;for(const C of r)S[E++]=objectToTokens$1(C,_,x);return _.addBreakTokens?[new Token$1(Type$1.array,r.length),S,new Token$1(Type$1.break)]:[new Token$1(Type$1.array,r.length),S]},Object(r,n,_,x){const S=n!=="Object",E=S?r.keys():Object.keys(r),C=S?r.size:E.length;if(!C)return _.addBreakTokens===!0?[simpleTokens$1.emptyMap,new Token$1(Type$1.break)]:simpleTokens$1.emptyMap;x=Ref$1.createCheck(x,r);const T=[];let B=0;for(const A of E)T[B++]=[objectToTokens$1(A,_,x),objectToTokens$1(S?r.get(A):r[A],_,x)];return sortMapEntries$1(T,_),_.addBreakTokens?[new Token$1(Type$1.map,C),T,new Token$1(Type$1.break)]:[new Token$1(Type$1.map,C),T]}};typeEncoders$1.Map=typeEncoders$1.Object;typeEncoders$1.Buffer=typeEncoders$1.Uint8Array;for(const r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders$1[`${r}Array`]=typeEncoders$1.DataView;function objectToTokens$1(r,n={},_){const x=is$1(r),S=n&&n.typeEncoders&&n.typeEncoders[x]||typeEncoders$1[x];if(typeof S=="function"){const C=S(r,x,n,_);if(C!=null)return C}const E=typeEncoders$1[x];if(!E)throw new Error(`${encodeErrPrefix$1} unsupported type: ${x}`);return E(r,x,n,_)}function sortMapEntries$1(r,n){n.mapSorter&&r.sort(n.mapSorter)}function mapSorter$1(r,n){const _=Array.isArray(r[0])?r[0][0]:r[0],x=Array.isArray(n[0])?n[0][0]:n[0];if(_.type!==x.type)return _.type.compare(x.type);const S=_.type.major,E=cborEncoders$1[S].compareTokens(_,x);return E===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),E}function tokensToEncoded$1(r,n,_,x){if(Array.isArray(n))for(const S of n)tokensToEncoded$1(r,S,_,x);else _[n.type.major](r,n,x)}function encodeCustom$1(r,n,_){const x=objectToTokens$1(r,_);if(!Array.isArray(x)&&_.quickEncodeToken){const S=_.quickEncodeToken(x);if(S)return S;const E=n[x.type.major];if(E.encodedSize){const C=E.encodedSize(x,_),T=new Bl$1(C);if(E(T,x,_),T.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${x} was wrong`);return asU8A$1(T.chunks[0])}}return buf$1.reset(),tokensToEncoded$1(buf$1,x,n,_),buf$1.toBytes(!0)}function encode$g(r,n){return n=Object.assign({},defaultEncodeOptions$1,n),encodeCustom$1(r,cborEncoders$1,n)}const defaultDecodeOptions$1={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};let Tokeniser$1=class{constructor(n,_={}){this._pos=0,this.data=n,this.options=_}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const n=this.data[this._pos];let _=quick$1[n];if(_===void 0){const x=jump$1[n];if(!x)throw new Error(`${decodeErrPrefix$1} no decoder for major type ${n>>>5} (byte 0x${n.toString(16).padStart(2,"0")})`);const S=n&31;_=x(this.data,this._pos,S,this.options)}return this._pos+=_.encodedLength,_}};const DONE$1=Symbol.for("DONE"),BREAK$1=Symbol.for("BREAK");function tokenToArray$1(r,n,_){const x=[];for(let S=0;S<r.value;S++){const E=tokensToObject$1(n,_);if(E===BREAK$1){if(r.value===1/0)break;throw new Error(`${decodeErrPrefix$1} got unexpected break to lengthed array`)}if(E===DONE$1)throw new Error(`${decodeErrPrefix$1} found array but not enough entries (got ${S}, expected ${r.value})`);x[S]=E}return x}function tokenToMap$1(r,n,_){const x=_.useMaps===!0,S=x?void 0:{},E=x?new Map:void 0;for(let C=0;C<r.value;C++){const T=tokensToObject$1(n,_);if(T===BREAK$1){if(r.value===1/0)break;throw new Error(`${decodeErrPrefix$1} got unexpected break to lengthed map`)}if(T===DONE$1)throw new Error(`${decodeErrPrefix$1} found map but not enough entries (got ${C} [no key], expected ${r.value})`);if(x!==!0&&typeof T!="string")throw new Error(`${decodeErrPrefix$1} non-string keys not supported (got ${typeof T})`);if(_.rejectDuplicateMapKeys===!0&&(x&&E.has(T)||!x&&T in S))throw new Error(`${decodeErrPrefix$1} found repeat map key "${T}"`);const B=tokensToObject$1(n,_);if(B===DONE$1)throw new Error(`${decodeErrPrefix$1} found map but not enough entries (got ${C} [no value], expected ${r.value})`);x?E.set(T,B):S[T]=B}return x?E:S}function tokensToObject$1(r,n){if(r.done())return DONE$1;const _=r.next();if(_.type===Type$1.break)return BREAK$1;if(_.type.terminal)return _.value;if(_.type===Type$1.array)return tokenToArray$1(_,r,n);if(_.type===Type$1.map)return tokenToMap$1(_,r,n);if(_.type===Type$1.tag){if(n.tags&&typeof n.tags[_.value]=="function"){const x=tokensToObject$1(r,n);return n.tags[_.value](x)}throw new Error(`${decodeErrPrefix$1} tag not supported (${_.value})`)}throw new Error("unsupported")}function decodeFirst$1(r,n){if(!(r instanceof Uint8Array))throw new Error(`${decodeErrPrefix$1} data to decode must be a Uint8Array`);n=Object.assign({},defaultDecodeOptions$1,n);const _=n.tokenizer||new Tokeniser$1(r,n),x=tokensToObject$1(_,n);if(x===DONE$1)throw new Error(`${decodeErrPrefix$1} did not find any content to decode`);if(x===BREAK$1)throw new Error(`${decodeErrPrefix$1} got unexpected break`);return[x,r.subarray(_.pos())]}function decode$f(r,n){const[_,x]=decodeFirst$1(r,n);if(x.length>0)throw new Error(`${decodeErrPrefix$1} too many terminals, data makes no sense`);return _}const CID_CBOR_TAG$1=42;function cidEncoder$1(r){if(r.asCID!==r&&r["/"]!==r.bytes)return null;const n=CID$1.asCID(r);if(!n)return null;const _=new Uint8Array(n.bytes.byteLength+1);return _.set(n.bytes,1),[new Token$1(Type$1.tag,CID_CBOR_TAG$1),new Token$1(Type$1.bytes,_)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}};function cidDecoder$1(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$1.decode(r.subarray(1))}const decodeOptions$1={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions$1.tags[CID_CBOR_TAG$1]=cidDecoder$1;const name$3="dag-cbor",code$4=113,encode$f=r=>encode$g(r,encodeOptions$1),decode$e=r=>decode$f(r,decodeOptions$1),dagCbor$1=Object.freeze(Object.defineProperty({__proto__:null,code:code$4,decode:decode$e,encode:encode$f,name:name$3},Symbol.toStringTag,{value:"Module"})),sha$3=r=>async n=>new Uint8Array(await crypto.subtle.digest(r,n)),sha256$7=from$4({name:"sha2-256",code:18,encode:sha$3("SHA-256")}),codec$6=dagCbor$1,hasher$5=sha256$7,hashStringEncoding$5=base58btc$2,create$4=async(r,n,_,x=null,S=[],E=[])=>{if(r==null)throw new Error("Identity is required, cannot create entry");if(n==null)throw new Error("Entry requires an id");if(_==null)throw new Error("Entry requires a payload");if(S==null||!Array.isArray(S))throw new Error("'next' argument is not an array");x=x||Clock(r.publicKey);const C={id:n,payload:_,next:S,refs:E,clock:x,v:2},{bytes:T}=await encode$h({value:C,codec:codec$6,hasher:hasher$5}),B=await r.sign(r,T);return C.key=r.publicKey,C.identity=r.hash,C.sig=B,_encodeEntry(C)},verify=async(r,n)=>{if(!r)throw new Error("Identities is required, cannot verify entry");if(!isEntry(n))throw new Error("Invalid Log entry");if(!n.key)throw new Error("Entry doesn't have a key");if(!n.sig)throw new Error("Entry doesn't have a signature");const _={id:n.id,payload:n.payload,next:n.next,refs:n.refs,clock:n.clock,v:n.v},{bytes:x}=await encode$h({value:_,codec:codec$6,hasher:hasher$5});return r.verify(n.sig,n.key,x)},isEntry=r=>r&&r.id!==void 0&&r.next!==void 0&&r.payload!==void 0&&r.v!==void 0&&r.clock!==void 0&&r.refs!==void 0,isEqual$1=(r,n)=>r&&n&&r.hash===n.hash,decode$d=async r=>{const{value:n}=await decode$g({bytes:r,codec:codec$6,hasher:hasher$5});return _encodeEntry(n)},_encodeEntry=async r=>{const{cid:n,bytes:_}=await encode$h({value:r,codec:codec$6,hasher:hasher$5}),x=n.toString(hashStringEncoding$5),S=Clock(r.clock.id,r.clock.time);return{...r,clock:S,hash:x,bytes:_}},Entry={create:create$4,verify,decode:decode$d,isEntry,isEqual:isEqual$1},MemoryStorage=async()=>{let r={};const n=async(B,A)=>{r[B]=A};return{put:n,del:async B=>{delete r[B]},get:async B=>r[B],iterator:async function*(){for await(const[B,A]of Object.entries(r))yield[B,A]},merge:async B=>{if(B)for await(const[A,I]of B.iterator())n(A,I)},clear:async()=>{r={}},close:async()=>{}}},DefaultStorage$1=MemoryStorage,Heads=async({storage:r,heads:n})=>{r=r||await DefaultStorage$1();const _=async A=>{A=findHeads(A);for(const I of A)await r.put(I.hash,I.bytes)},x=async A=>{await r.clear(),await _(A)},S=async A=>{const I=await C();if(I.find(V=>Entry.isEqual(V,A)))return;const N=findHeads([...I,A]);return await x(N),N},E=async function*(){const A=r.iterator();for await(const[,I]of A)yield await Entry.decode(I)},C=async()=>{const A=[];for await(const I of E())A.push(I);return A},T=async()=>{await r.clear()},B=async()=>{await r.close()};return await _(n||[]),{put:_,set:x,add:S,iterator:E,all:C,clear:T,close:B}},findHeads=r=>{r=new Set(r);const n={};for(const x of r)for(const S of x.next)n[S]=x.hash;const _=[];for(const x of r)n[x.hash]||_.push(x);return _};function LastWriteWins$1(r,n){const _=(E,C)=>E,x=(E,C)=>SortByClockId(E,C,_);return((E,C)=>SortByClocks(E,C,x))(r,n)}function SortByClocks(r,n,_){const x=compareClocks(r.clock,n.clock);return x===0?_(r,n):x}function SortByClockId(r,n,_){return r.clock.id===n.clock.id?_(r,n):r.clock.id<n.clock.id?-1:1}function NoZeroes$1(r){const n=`Your log's tiebreaker function, ${r.name}, has returned zero and therefore cannot be`;return(x,S)=>{const E=r(x,S);if(E===0)throw Error(n);return E}}const ConflictResolution={SortByClocks,SortByClockId,LastWriteWins:LastWriteWins$1,NoZeroes:NoZeroes$1},{LastWriteWins,NoZeroes}=ConflictResolution,randomId=()=>new Date().getTime().toString(),maxClockTimeReducer=(r,n)=>Math.max(r,n.clock.time),DefaultStorage=MemoryStorage,DefaultAccessController$1=async()=>({canAppend:async r=>!0}),Log=async(r,{logId:n,logHeads:_,access:x,entryStorage:S,headsStorage:E,indexStorage:C,sortFn:T}={})=>{if(r==null)throw new Error("Identity is required");if(_!=null&&!Array.isArray(_))throw new Error("'logHeads' argument must be an array");const B=n||randomId();x=x||await DefaultAccessController$1();const A=S||await DefaultStorage(),I=C||await DefaultStorage();E=E||await DefaultStorage();const N=await Heads({storage:E,heads:_});T=NoZeroes(T||LastWriteWins);const V=async()=>{const ve=Math.max(0,(await D()).reduce(maxClockTimeReducer,0));return Clock(r.publicKey,ve)},D=async()=>(await N.all()).sort(T).reverse(),O=async()=>{const ve=[];for await(const pe of H())ve.unshift(pe);return ve},F=async ve=>{const pe=await A.get(ve);if(pe){const G=await Entry.decode(pe);return await I.put(ve,!0),G}},M=async ve=>await I.get(ve)!=null,L=async(ve,pe={referencesCount:0})=>{const G=await D(),Y=G.map(re=>re.hash),U=await ce(G,pe.referencesCount+G.length),W=await Entry.create(r,B,ve,tickClock(await V()),Y,U);if(!await x.canAppend(W))throw new Error(`Could not append entry:
Key "${r.hash}" is not allowed to write to the log`);return await N.set([W]),await A.put(W.hash,W.bytes),await I.put(W.hash,!0),W},j=async ve=>{if(!ve)throw new Error("Log instance not defined");if(!ae(ve))throw new Error("Given argument is not an instance of Log");const pe=await ve.heads();for(const G of pe)await q(G);A.merge&&await A.merge(ve.storage)},q=async ve=>{const{hash:pe}=ve;if(await M(pe))return!1;{const ee=H(await D(),re=>re.next.includes(pe)||ve.next.includes(re.hash));for await(const re of ee)if(re.next.includes(pe))return await I.put(pe,!0),!1}if(ve.id!==B)throw new Error(`Entry's id (${ve.id}) doesn't match the log's id (${B}).`);if(!await x.canAppend(ve))throw new Error(`Could not append entry:
Key "${ve.identity}" is not allowed to write to the log`);if(!await Entry.verify(r,ve))throw new Error(`Could not validate signature for entry "${pe}"`);return await N.add(ve)?(await A.put(pe,ve.bytes),await I.put(pe,!0),!0):!1},H=async function*(ve,pe,G=!0){pe=pe||(()=>!1),ve=ve||await D();let U=ve.sort(T);const W={};let ee=[];const re={},oe=ne=>!(W[ne]||re[ne]);let ie;for(;U.length>0;)if(U=U.sort(T),ie=U.pop(),ie){const{hash:ne,next:te,refs:K}=ie;if(!W[ne]){if(yield ie,await pe(ie)===!0)break;W[ne]=!0,re[ne]=!0,ee=[...ee,...te,...G?K:[]].filter(oe);const ue=ge=>{if(!W[ge]&&!re[ge])return re[ge]=!0,F(ge)},be=await Promise.all(ee.map(ue));ee=be.filter(ge=>ge!=null).reduce((ge,ye)=>Array.from(new Set([...ge,...ye.next,...G?ye.refs:[]])),[]).filter(oe),U=[...be,...U]}}},X=async function*({amount:ve=-1,gt:pe,gte:G,lt:Y,lte:U}={}){if(ve===0)return;if(typeof U=="string"&&(U=[await F(U)]),typeof Y=="string"){const ue=await F(Y);Y=await Promise.all(ue.next.map(ge=>F(ge)))}if(Y!=null&&!Array.isArray(Y))throw new Error("lt must be a string or an array of Entries");if(U!=null&&!Array.isArray(U))throw new Error("lte must be a string or an array of Entries");const W=(Y||U||await D()).filter(ue=>ue!=null),ee=pe||G?await F(pe||G):null,re=ee||ve===-1?-1:ve;let oe=0;const ie=async ue=>(oe++,ue?!!(oe>=re&&re!==-1||ee&&Entry.isEqual(ue,ee)):!1),ne=ee&&ve!==-1&&!Y&&!U,te=ne?new LRU$1(ve+2):null;let K=0;const le=H(W,ie);for await(const ue of le){const be=Y&&Entry.isEqual(ue,W),ge=pe&&Entry.isEqual(ue,ee);be||ge||(ne?te.set(K++,ue.hash):yield ue)}if(ne){const ue=te.keys.length,be=ue-ve,ge=te.keys.slice(be,ue);for(const ye of ge){const Ee=te.get(ye);yield await F(Ee)}}},J=async()=>{await I.clear(),await N.clear(),await A.clear()},Z=async()=>{await I.close(),await N.close(),await A.close()},ae=ve=>ve&&ve.id!==void 0&&ve.clock!==void 0&&ve.heads!==void 0&&ve.values!==void 0&&ve.access!==void 0&&ve.identity!==void 0&&ve.storage!==void 0,ce=async(ve,pe=0)=>{let G=[];const Y=async U=>G.length>=pe&&pe!==-1;for await(const{hash:U}of H(ve,Y,!1))G.push(U);return G=G.slice(ve.length+1,pe),G};return{id:B,clock:V,heads:D,values:O,all:O,get:F,has:M,append:L,join:j,joinEntry:q,traverse:H,iterator:X,clear:J,close:Z,access:x,identity:r,storage:A}},ComposedStorage=async(r,n)=>({put:async(B,A)=>{await r.put(B,A),await n.put(B,A)},get:async B=>{let A=await r.get(B);return A||(A=await n.get(B),A&&await r.put(B,A)),A},iterator:async function*(){const B=[];for(const A of[r,n])for await(const[I,N]of A.iterator())B[I]||(B[I]=!0,yield[I,N])},merge:async B=>{await r.merge(B),await n.merge(B),await B.merge(r),await B.merge(n)},clear:async()=>{await r.clear(),await n.clear()},close:async()=>{await r.close(),await n.close()}}),defaultTimeout=3e4,IPFSBlockStorage=async({ipfs:r,timeout:n,pin:_}={})=>{if(!r)throw new Error("An instance of ipfs is required.");return n=n||defaultTimeout,{put:async(I,N)=>{const V=CID$1.parse(I,base58btc$2);await r.block.put(N,{cid:V.bytes,version:V.version,format:"dag-cbor",mhtype:"sha2-256",pin:_,timeout:n})},del:async I=>{},get:async I=>{const N=CID$1.parse(I,base58btc$2),V=await r.block.get(N,{timeout:n});if(V)return V},iterator:async function*(){},merge:async I=>{},clear:async()=>{},close:async()=>{}}};var browserLevel={},abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function(...n){const _=n.reduce((x,S)=>Object.assign(x,S),{});return Object.assign(_,{snapshots:_.snapshots||!1,permanence:_.permanence||!1,seek:_.seek||!1,clear:_.clear||!1,getMany:_.getMany||!1,keyIterator:_.keyIterator||!1,valueIterator:_.valueIterator||!1,iteratorNextv:_.iteratorNextv||!1,iteratorAll:_.iteratorAll||!1,status:_.status||!1,createIfMissing:_.createIfMissing||!1,errorIfExists:_.errorIfExists||!1,deferredOpen:_.deferredOpen||!1,promises:_.promises||!1,streams:_.streams||!1,encodings:Object.assign({},_.encodings),events:Object.assign({},_.events),additionalMethods:Object.assign({},_.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(n,_){super(n||""),typeof _=="object"&&_!==null&&(_.code&&(this.code=String(_.code)),_.expected&&(this.expected=!0),_.transient&&(this.transient=!0),_.cause&&(this.cause=_.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$2={};let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);let Encoding$2=class{constructor(n){if(this.encode=n.encode||this.encode,this.decode=n.decode||this.decode,this.name=n.name||this.name,this.format=n.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");n.createViewTranscoder&&(this.createViewTranscoder=n.createViewTranscoder),n.createBufferTranscoder&&(this.createBufferTranscoder=n.createBufferTranscoder),n.createUTF8Transcoder&&(this.createUTF8Transcoder=n.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};encoding.Encoding=Encoding$2;const{Buffer:Buffer$4}=buffer$3||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;let BufferFormat$2=class extends Encoding$1{constructor(n){super({...n,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:n=>this.decode(Buffer$4.from(n.buffer,n.byteOffset,n.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ViewFormat$2=class extends Encoding$1{constructor(n){super({...n,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:n=>{const _=this.encode(n);return Buffer$4.from(_.buffer,_.byteOffset,_.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},UTF8Format$2=class extends Encoding$1{constructor(n){super({...n,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:n=>Buffer$4.from(this.encode(n),"utf8"),decode:n=>this.decode(n.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:n,textDecoder:_}=textEndec();return new ViewFormat$2({encode:x=>n.encode(this.encode(x)),decode:x=>this.decode(_.decode(x)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer:Buffer$3}=buffer$3||{Buffer:{isBuffer:()=>!1}},{textEncoder:textEncoder$2,textDecoder:textDecoder$1}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity$4=r=>r;encodings$2.utf8=new UTF8Format$1({encode:function(r){return Buffer$3.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?textDecoder$1.decode(r):String(r)},decode:identity$4,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(r){return ArrayBuffer.isView(r)?r:textEncoder$2.encode(r)},decode:function(r){return textDecoder$1.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(r){return Buffer$3.isBuffer(r)?r:ArrayBuffer.isView(r)?Buffer$3.from(r.buffer,r.byteOffset,r.byteLength):Buffer$3.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});encodings$2.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$2.buffer=new BufferFormat$1({encode:function(r){return Buffer$3.isBuffer(r)?r:ArrayBuffer.isView(r)?Buffer$3.from(r.buffer,r.byteOffset,r.byteLength):Buffer$3.from(String(r),"utf8")},decode:identity$4,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(r){return ArrayBuffer.isView(r)?r:Buffer$3.from(String(r),"utf8")},decode:function(r){return Buffer$3.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});encodings$2.view=new ViewFormat$1({encode:function(r){return ArrayBuffer.isView(r)?r:textEncoder$2.encode(r)},decode:identity$4,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(r){return Buffer$3.isBuffer(r)?r:ArrayBuffer.isView(r)?Buffer$3.from(r.buffer,r.byteOffset,r.byteLength):Buffer$3.from(String(r),"utf8")},decode:identity$4,name:`${this.name}+buffer`})}});encodings$2.hex=new BufferFormat$1({encode:function(r){return Buffer$3.isBuffer(r)?r:Buffer$3.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});encodings$2.base64=new BufferFormat$1({encode:function(r){return Buffer$3.isBuffer(r)?r:Buffer$3.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings$1=encodings$2,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);let Transcoder$1=class{constructor(n){if(Array.isArray(n)){if(!n.every(_=>validFormats.has(_)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(n);for(const _ in encodings$1)try{this.encoding(_)}catch(x){if(x.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw x}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(n){let _=this[kEncodings].get(n);if(_===void 0){if(typeof n=="string"&&n!==""){if(_=lookup[n],!_)throw new ModuleError$7(`Encoding '${n}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof n!="object"||n===null)throw new TypeError("First argument 'encoding' must be a string or object");_=from$3(n)}const{name:x,format:S}=_;if(!this[kFormats].has(S))if(this[kFormats].has("view"))_=_.createViewTranscoder();else if(this[kFormats].has("buffer"))_=_.createBufferTranscoder();else if(this[kFormats].has("utf8"))_=_.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${x}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const E of[n,x,_.name,_.commonName])this[kEncodings].set(E,_)}return _}};levelTranscoder.Transcoder=Transcoder$1;function from$3(r){if(r instanceof Encoding)return r;const n="type"in r&&typeof r.type=="string"?r.type:void 0,_=r.name||n||`anonymous-${anonymousCount++}`;switch(detectFormat(r)){case"view":return new ViewFormat({...r,name:_});case"utf8":return new UTF8Format({...r,name:_});case"buffer":return new BufferFormat({...r,name:_});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}const aliases={binary:encodings$1.buffer,"utf-8":encodings$1.utf8},lookup={...encodings$1,...aliases};let anonymousCount=0;var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r),nextTick=nextTickBrowser$1;catering.fromCallback=function(r,n){if(r===void 0){var _=new Promise(function(x,S){r=function(E,C){E?S(E):x(C)}});r[n!==void 0?n:"promise"]=_}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};catering.fromPromise=function(r,n){if(n===void 0)return r;r.then(function(_){nextTick(()=>n(null,_))}).catch(function(_){nextTick(()=>n(_))})};var abstractIterator={},common$3={};common$3.getCallback=function(r,n){return typeof r=="function"?r:n};common$3.getOptions=function(r,n){return typeof r=="object"&&r!==null?r:n!==void 0?n:{}};const{fromCallback:fromCallback$3}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common$3,kPromise$3=Symbol("promise"),kCallback$1=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions$1=Object.freeze({}),noop$5=()=>{};let warnedEnd=!1;class CommonIterator{constructor(n,_,x){if(typeof n!="object"||n===null){const S=n===null?"null":typeof n;throw new TypeError(`The first argument must be an abstract-level database, received ${S}`)}if(typeof _!="object"||_===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$1]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=_[kKeyEncoding$1],this[kValueEncoding$1]=_[kValueEncoding$1],this[kLegacy]=x,this[kLimit]=Number.isInteger(_.limit)&&_.limit>=0?_.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!_.abortOnClose,this.db=n,this.db.attachResource(this),this.nextTick=n.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(n){let _;if(n===void 0)_=new Promise((x,S)=>{n=(E,C,T)=>{E?S(E):this[kLegacy]?C===void 0&&T===void 0?x():x([C,T]):x(C)}});else if(typeof n!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(n,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(n,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=n,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),_}_next(n){this.nextTick(n)}nextv(n,_,x){return x=getCallback$2(_,x),x=fromCallback$3(x,kPromise$3),_=getOptions$2(_,emptyOptions$1),Number.isInteger(n)?(this[kClosing]?this.nextTick(x,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(x,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(n<1&&(n=1),this[kLimit]<1/0&&(n=Math.min(n,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$1]=x,n<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(n,_,this[kHandleMany$1])),x[kPromise$3]):(this.nextTick(x,new TypeError("The first argument 'size' must be an integer")),x[kPromise$3])}_nextv(n,_,x){const S=[],E=(C,T,B)=>{if(C)return x(C);if(this[kLegacy]?T===void 0&&B===void 0:T===void 0)return x(null,S);S.push(this[kLegacy]?[T,B]:T),S.length===n?x(null,S):this._next(E)};this._next(E)}all(n,_){return _=getCallback$2(n,_),_=fromCallback$3(_,kPromise$3),n=getOptions$2(n,emptyOptions$1),this[kClosing]?this.nextTick(_,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(_,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=_,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(n,this[kHandleMany$1])),_[kPromise$3]}_all(n,_){let x=this[kCount];const S=[],E=()=>{const T=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-x):1e3;T<=0?this.nextTick(_,null,S):this._nextv(T,emptyOptions$1,C)},C=(T,B)=>{T?_(T):B.length===0?_(null,S):(S.push.apply(S,B),x+=B.length,E())};E()}[kFinishWork](){const n=this[kCallback$1];return this[kAbortOnClose]&&n===null?noop$5:(this[kWorking]=!1,this[kCallback$1]=null,this[kClosing]&&this._close(this[kHandleClose]),n)}[kReturnMany](n,_,x){this[kAutoClose]?this.close(n.bind(null,_,x)):n(_,x)}seek(n,_){if(_=getOptions$2(_,emptyOptions$1),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const x=this.db.keyEncoding(_.keyEncoding||this[kKeyEncoding$1]),S=x.format;_.keyEncoding!==S&&(_={..._,keyEncoding:S});const E=this.db.prefixKey(x.encode(n),S);this._seek(E,_)}}}_seek(n,_){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(n){return n=fromCallback$3(n,kPromise$3),this[kClosed]?this.nextTick(n):this[kClosing]?this[kCloseCallbacks$1].push(n):(this[kClosing]=!0,this[kCloseCallbacks$1].push(n),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),n[kPromise$3]}_close(n){this.nextTick(n)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const n=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const _ of n)_()}async*[Symbol.asyncIterator](){try{let n;for(;(n=await this.next())!==void 0;)yield n}finally{this[kClosed]||await this.close()}}}let AbstractIterator$3=class extends CommonIterator{constructor(n,_){super(n,_,!0),this[kKeys]=_.keys!==!1,this[kValues]=_.values!==!1}[kHandleOne$1](n,_,x){const S=this[kFinishWork]();if(n)return S(n);try{_=this[kKeys]&&_!==void 0?this[kKeyEncoding$1].decode(_):void 0,x=this[kValues]&&x!==void 0?this[kValueEncoding$1].decode(x):void 0}catch(E){return S(new IteratorDecodeError("entry",E))}_===void 0&&x===void 0||this[kCount]++,S(null,_,x)}[kHandleMany$1](n,_){const x=this[kFinishWork]();if(n)return this[kReturnMany](x,n);try{for(const S of _){const E=S[0],C=S[1];S[0]=this[kKeys]&&E!==void 0?this[kKeyEncoding$1].decode(E):void 0,S[1]=this[kValues]&&C!==void 0?this[kValueEncoding$1].decode(C):void 0}}catch(S){return this[kReturnMany](x,new IteratorDecodeError("entries",S))}this[kCount]+=_.length,this[kReturnMany](x,null,_)}end(n){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(n)}},AbstractKeyIterator$2=class extends CommonIterator{constructor(n,_){super(n,_,!1)}[kHandleOne$1](n,_){const x=this[kFinishWork]();if(n)return x(n);try{_=_!==void 0?this[kKeyEncoding$1].decode(_):void 0}catch(S){return x(new IteratorDecodeError("key",S))}_!==void 0&&this[kCount]++,x(null,_)}[kHandleMany$1](n,_){const x=this[kFinishWork]();if(n)return this[kReturnMany](x,n);try{for(let S=0;S<_.length;S++){const E=_[S];_[S]=E!==void 0?this[kKeyEncoding$1].decode(E):void 0}}catch(S){return this[kReturnMany](x,new IteratorDecodeError("keys",S))}this[kCount]+=_.length,this[kReturnMany](x,null,_)}},AbstractValueIterator$2=class extends CommonIterator{constructor(n,_){super(n,_,!1)}[kHandleOne$1](n,_){const x=this[kFinishWork]();if(n)return x(n);try{_=_!==void 0?this[kValueEncoding$1].decode(_):void 0}catch(S){return x(new IteratorDecodeError("value",S))}_!==void 0&&this[kCount]++,x(null,_)}[kHandleMany$1](n,_){const x=this[kFinishWork]();if(n)return this[kReturnMany](x,n);try{for(let S=0;S<_.length;S++){const E=_[S];_[S]=E!==void 0?this[kValueEncoding$1].decode(E):void 0}}catch(S){return this[kReturnMany](x,new IteratorDecodeError("values",S))}this[kCount]+=_.length,this[kReturnMany](x,null,_)}};class IteratorDecodeError extends ModuleError$6{constructor(n,_){super(`Iterator could not decode ${n}`,{code:"LEVEL_DECODE_ERROR",cause:_})}}for(const r of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,r.split(" ")[0],{get(){throw new ModuleError$6(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$2;abstractIterator.AbstractValueIterator=AbstractValueIterator$2;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,kIterator=Symbol("iterator"),kCallback=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");let DefaultKeyIterator$1=class extends AbstractKeyIterator$1{constructor(n,_){super(n,_),this[kIterator]=n.iterator({..._,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}},DefaultValueIterator$1=class extends AbstractValueIterator$1{constructor(n,_){super(n,_),this[kIterator]=n.iterator({..._,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}};for(const r of[DefaultKeyIterator$1,DefaultValueIterator$1]){const n=r===DefaultKeyIterator$1,_=n?x=>x[0]:x=>x[1];r.prototype._next=function(x){this[kCallback]=x,this[kIterator].next(this[kHandleOne])},r.prototype[kHandleOne]=function(x,S,E){const C=this[kCallback];x?C(x):C(null,n?S:E)},r.prototype._nextv=function(x,S,E){this[kCallback]=E,this[kIterator].nextv(x,S,this[kHandleMany])},r.prototype._all=function(x,S){this[kCallback]=S,this[kIterator].all(x,this[kHandleMany])},r.prototype[kHandleMany]=function(x,S){const E=this[kCallback];x?E(x):E(null,S.map(_))},r.prototype._seek=function(x,S){this[kIterator].seek(x,S)},r.prototype._close=function(x){this[kIterator].close(x)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator,AbstractValueIterator}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");let DeferredIterator$1=class extends AbstractIterator$2{constructor(n,_){super(n,_),this[kNut]=null,this[kFactory]=()=>n.iterator(_),this.db.defer(()=>this[kUndefer$1]())}},DeferredKeyIterator$1=class extends AbstractKeyIterator{constructor(n,_){super(n,_),this[kNut]=null,this[kFactory]=()=>n.keys(_),this.db.defer(()=>this[kUndefer$1]())}},DeferredValueIterator$1=class extends AbstractValueIterator{constructor(n,_){super(n,_),this[kNut]=null,this[kFactory]=()=>n.values(_),this.db.defer(()=>this[kUndefer$1]())}};for(const r of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])r.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},r.prototype._next=function(n){this[kNut]!==null?this[kNut].next(n):this.db.status==="opening"?this.db.defer(()=>this._next(n)):this.nextTick(n,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(n,_,x){this[kNut]!==null?this[kNut].nextv(n,_,x):this.db.status==="opening"?this.db.defer(()=>this._nextv(n,_,x)):this.nextTick(x,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(n,_){this[kNut]!==null?this[kNut].all(_):this.db.status==="opening"?this.db.defer(()=>this._all(n,_)):this.nextTick(_,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(n,_){this[kNut]!==null?this[kNut]._seek(n,_):this.db.status==="opening"&&this.db.defer(()=>this._seek(n,_))},r.prototype._close=function(n){this[kNut]!==null?this[kNut].close(n):this.db.status==="opening"?this.db.defer(()=>this._close(n)):this.nextTick(n)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$2}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common$3,kPromise$2=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");let AbstractChainedBatch$1=class{constructor(n){if(typeof n!="object"||n===null){const _=n===null?"null":typeof n;throw new TypeError(`The first argument must be an abstract-level database, received ${_}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=n,this.db.attachResource(this),this.nextTick=n.nextTick}get length(){return this[kOperations$1].length}put(n,_,x){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const S=this.db._checkKey(n)||this.db._checkValue(_);if(S)throw S;const E=x&&x.sublevel!=null?x.sublevel:this.db,C=x,T=E.keyEncoding(x&&x.keyEncoding),B=E.valueEncoding(x&&x.valueEncoding),A=T.format;x={...x,keyEncoding:A,valueEncoding:B.format},E!==this.db&&(x.sublevel=null);const I=E.prefixKey(T.encode(n),A),N=B.encode(_);return this._put(I,N,x),this[kOperations$1].push({...C,type:"put",key:n,value:_}),this}_put(n,_,x){}del(n,_){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const x=this.db._checkKey(n);if(x)throw x;const S=_&&_.sublevel!=null?_.sublevel:this.db,E=_,C=S.keyEncoding(_&&_.keyEncoding),T=C.format;return _={..._,keyEncoding:T},S!==this.db&&(_.sublevel=null),this._del(S.prefixKey(C.encode(n),T),_),this[kOperations$1].push({...E,type:"del",key:n}),this}_del(n,_){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(n,_){return _=getCallback$1(n,_),_=fromCallback$2(_,kPromise$2),n=getOptions$1(n),this[kStatus$1]!=="open"?this.nextTick(_,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(_):(this[kStatus$1]="writing",this._write(n,x=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>_(x)),x||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),_[kPromise$2]}_write(n,_){}close(n){return n=fromCallback$2(n,kPromise$2),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(n):this[kStatus$1]==="closed"?this.nextTick(n):(this[kCloseCallbacks].push(n),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),n[kPromise$2]}_close(n){this.nextTick(n)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const n=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const _ of n)_()}};abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");let DefaultChainedBatch$1=class extends AbstractChainedBatch{constructor(n){super(n),this[kEncoded]=[]}_put(n,_,x){this[kEncoded].push({...x,type:"put",key:n,value:_})}_del(n,_){this[kEncoded].push({..._,type:"del",key:n})}_clear(){this[kEncoded]=[]}_write(n,_){this.db.status==="opening"?this.db.defer(()=>this._write(n,_)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick(_):this.db._batch(this[kEncoded],n,_):this.nextTick(_,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty$2=Object.prototype.hasOwnProperty,rangeOptions$1=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(r,n){const _={};for(const x in r)if(hasOwnProperty$2.call(r,x)&&!(x==="keyEncoding"||x==="valueEncoding")){if(x==="start"||x==="end")throw new ModuleError$2(`The legacy range option '${x}' has been removed`,{code:"LEVEL_LEGACY"});if(x==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$1.has(x)?_[x]=n.encode(r[x]):_[x]=r[x]}return _.reverse=!!_.reverse,_.limit=Number.isInteger(_.limit)&&_.limit>=0?_.limit:-1,_};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let promise;var queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):r=>(promise||(promise=Promise.resolve())).then(r).catch(n=>setTimeout(()=>{throw n},0)),nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const r=queueMicrotask_1;return nextTickBrowser=function(n,..._){_.length===0?r(n):r(()=>n(..._))},nextTickBrowser}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:r,AbstractKeyIterator:n,AbstractValueIterator:_}=abstractIterator,x=Symbol("unfix"),S=Symbol("iterator"),E=Symbol("handleOne"),C=Symbol("handleMany"),T=Symbol("callback");class B extends r{constructor(V,D,O,F){super(V,D),this[S]=O,this[x]=F,this[E]=this[E].bind(this),this[C]=this[C].bind(this),this[T]=null}[E](V,D,O){const F=this[T];if(V)return F(V);D!==void 0&&(D=this[x](D)),F(V,D,O)}[C](V,D){const O=this[T];if(V)return O(V);for(const F of D){const M=F[0];M!==void 0&&(F[0]=this[x](M))}O(V,D)}}class A extends n{constructor(V,D,O,F){super(V,D),this[S]=O,this[x]=F,this[E]=this[E].bind(this),this[C]=this[C].bind(this),this[T]=null}[E](V,D){const O=this[T];if(V)return O(V);D!==void 0&&(D=this[x](D)),O(V,D)}[C](V,D){const O=this[T];if(V)return O(V);for(let F=0;F<D.length;F++){const M=D[F];M!==void 0&&(D[F]=this[x](M))}O(V,D)}}class I extends _{constructor(V,D,O){super(V,D),this[S]=O}}for(const N of[B,A])N.prototype._next=function(V){this[T]=V,this[S].next(this[E])},N.prototype._nextv=function(V,D,O){this[T]=O,this[S].nextv(V,D,this[C])},N.prototype._all=function(V,D){this[T]=D,this[S].all(V,this[C])};for(const N of[I])N.prototype._next=function(V){this[S].next(V)},N.prototype._nextv=function(V,D,O){this[S].nextv(V,D,O)},N.prototype._all=function(V,D){this[S].all(V,D)};for(const N of[B,A,I])N.prototype._seek=function(V,D){this[S].seek(V,D)},N.prototype._close=function(V){this[S].close(V)};return abstractSublevelIterator.AbstractSublevelIterator=B,abstractSublevelIterator.AbstractSublevelKeyIterator=A,abstractSublevelIterator.AbstractSublevelValueIterator=I,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const r=moduleError,{Buffer:n}=buffer$3||{},{AbstractSublevelIterator:_,AbstractSublevelKeyIterator:x,AbstractSublevelValueIterator:S}=requireAbstractSublevelIterator(),E=Symbol("prefix"),C=Symbol("upperBound"),T=Symbol("prefixRange"),B=Symbol("parent"),A=Symbol("unfix"),I=new TextEncoder,N={separator:"!"};abstractSublevel=function({AbstractLevel:L}){class j extends L{static defaults(H){if(typeof H=="string")throw new r("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(H&&H.open)throw new r("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return H==null?N:H.separator?H:{...H,separator:"!"}}constructor(H,X,J){const{separator:Z,manifest:ae,...ce}=j.defaults(J);X=M(X,Z);const ve=Z.charCodeAt(0)+1,pe=H[B]||H;if(!I.encode(X).every(U=>U>ve&&U<127))throw new r(`Prefix must use bytes > ${ve} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(V(pe,ae),ce);const G=(H.prefix||"")+Z+X+Z,Y=G.slice(0,-1)+String.fromCharCode(ve);this[B]=pe,this[E]=new O(G),this[C]=new O(Y),this[A]=new F,this.nextTick=pe.nextTick}prefixKey(H,X){if(X==="utf8")return this[E].utf8+H;if(H.byteLength===0)return this[E][X];if(X==="view"){const J=this[E].view,Z=new Uint8Array(J.byteLength+H.byteLength);return Z.set(J,0),Z.set(H,J.byteLength),Z}else{const J=this[E].buffer;return n.concat([J,H],J.byteLength+H.byteLength)}}[T](H,X){H.gte!==void 0?H.gte=this.prefixKey(H.gte,X):H.gt!==void 0?H.gt=this.prefixKey(H.gt,X):H.gte=this[E][X],H.lte!==void 0?H.lte=this.prefixKey(H.lte,X):H.lt!==void 0?H.lt=this.prefixKey(H.lt,X):H.lte=this[C][X]}get prefix(){return this[E].utf8}get db(){return this[B]}_open(H,X){this[B].open({passive:!0},X)}_put(H,X,J,Z){this[B].put(H,X,J,Z)}_get(H,X,J){this[B].get(H,X,J)}_getMany(H,X,J){this[B].getMany(H,X,J)}_del(H,X,J){this[B].del(H,X,J)}_batch(H,X,J){this[B].batch(H,X,J)}_clear(H,X){this[T](H,H.keyEncoding),this[B].clear(H,X)}_iterator(H){this[T](H,H.keyEncoding);const X=this[B].iterator(H),J=this[A].get(this[E].utf8.length,H.keyEncoding);return new _(this,H,X,J)}_keys(H){this[T](H,H.keyEncoding);const X=this[B].keys(H),J=this[A].get(this[E].utf8.length,H.keyEncoding);return new x(this,H,X,J)}_values(H){this[T](H,H.keyEncoding);const X=this[B].values(H);return new S(this,H,X)}}return{AbstractSublevel:j}};const V=function(L,j){return{...L.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...j,encodings:{utf8:D(L,"utf8"),buffer:D(L,"buffer"),view:D(L,"view")}}},D=function(L,j){return L.supports.encodings[j]?L.keyEncoding(j).name===j:!1};class O{constructor(j){this.utf8=j,this.view=I.encode(j),this.buffer=n?n.from(this.view.buffer,0,this.view.byteLength):{}}}class F{constructor(){this.cache=new Map}get(j,q){let H=this.cache.get(q);return H===void 0&&(q==="view"?H=function(X,J){return J.subarray(X)}.bind(null,j):H=function(X,J){return J.slice(X)}.bind(null,j),this.cache.set(q,H)),H}}const M=function(L,j){let q=0,H=L.length;for(;q<H&&L[q]===j;)q++;for(;H>q&&L[H-1]===j;)H--;return L.slice(q,H)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter:EventEmitter$1}=eventsExports,{fromCallback:fromCallback$1}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common$3,rangeOptions=rangeOptions_1,kPromise$1=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop$4=()=>{};let AbstractLevel$1=class extends EventEmitter$1{constructor(n,_){if(super(),typeof n!="object"||n===null)throw new TypeError("The first argument 'manifest' must be an object");_=getOptions(_);const{keyEncoding:x,valueEncoding:S,passive:E,...C}=_;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=C,this[kStatus]="opening",this.supports=supports(n,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:n.snapshots!==!1,permanence:n.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:n.encodings||{},events:Object.assign({},n.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(x||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(S||"utf8");for(const T of this[kTranscoder].encodings())this.supports.encodings[T.commonName]||(this.supports.encodings[T.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop$4)})}get status(){return this[kStatus]}keyEncoding(n){return this[kTranscoder].encoding(n??this[kKeyEncoding])}valueEncoding(n){return this[kTranscoder].encoding(n??this[kValueEncoding])}open(n,_){_=getCallback(n,_),_=fromCallback$1(_,kPromise$1),n={...this[kOptions$1],...getOptions(n)},n.createIfMissing=n.createIfMissing!==!1,n.errorIfExists=!!n.errorIfExists;const x=S=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,S?()=>x(S):x):this[kStatus]!=="open"?_(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:S})):_()};return n.passive?this[kStatus]==="opening"?this.once(kLanded,x):this.nextTick(x):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(n,S=>{if(S){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),x(S)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),x()})):this[kStatus]==="open"?this.nextTick(x):this.once(kLanded,()=>this.open(n,_)),_[kPromise$1]}_open(n,_){this.nextTick(_)}close(n){n=fromCallback$1(n,kPromise$1);const _=x=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,x?_(x):_):this[kStatus]!=="closed"?n(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:x})):n()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const x=S=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),_(S)};this[kCloseResources](()=>{this._close(S=>{if(S)return x(S);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),_()})})}else this[kStatus]==="closed"?this.nextTick(_):this.once(kLanded,()=>this.close(n));return n[kPromise$1]}[kCloseResources](n){if(this[kResources].size===0)return this.nextTick(n);let _=this[kResources].size,x=!0;const S=()=>{--_===0&&(x?this.nextTick(n):n())};for(const E of this[kResources])E.close(S);x=!1,this[kResources].clear()}_close(n){this.nextTick(n)}get(n,_,x){if(x=getCallback(_,x),x=fromCallback$1(x,kPromise$1),_=getOptions(_,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(n,_,x)),x[kPromise$1];if(maybeError(this,x))return x[kPromise$1];const S=this._checkKey(n);if(S)return this.nextTick(x,S),x[kPromise$1];const E=this.keyEncoding(_.keyEncoding),C=this.valueEncoding(_.valueEncoding),T=E.format,B=C.format;return(_.keyEncoding!==T||_.valueEncoding!==B)&&(_=Object.assign({},_,{keyEncoding:T,valueEncoding:B})),this._get(this.prefixKey(E.encode(n),T),_,(A,I)=>{if(A)return(A.code==="LEVEL_NOT_FOUND"||A.notFound||/NotFound/i.test(A))&&(A.code||(A.code="LEVEL_NOT_FOUND"),A.notFound||(A.notFound=!0),A.status||(A.status=404)),x(A);try{I=C.decode(I)}catch(N){return x(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:N}))}x(null,I)}),x[kPromise$1]}_get(n,_,x){this.nextTick(x,new Error("NotFound"))}getMany(n,_,x){if(x=getCallback(_,x),x=fromCallback$1(x,kPromise$1),_=getOptions(_,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(n,_,x)),x[kPromise$1];if(maybeError(this,x))return x[kPromise$1];if(!Array.isArray(n))return this.nextTick(x,new TypeError("The first argument 'keys' must be an array")),x[kPromise$1];if(n.length===0)return this.nextTick(x,null,[]),x[kPromise$1];const S=this.keyEncoding(_.keyEncoding),E=this.valueEncoding(_.valueEncoding),C=S.format,T=E.format;(_.keyEncoding!==C||_.valueEncoding!==T)&&(_=Object.assign({},_,{keyEncoding:C,valueEncoding:T}));const B=new Array(n.length);for(let A=0;A<n.length;A++){const I=n[A],N=this._checkKey(I);if(N)return this.nextTick(x,N),x[kPromise$1];B[A]=this.prefixKey(S.encode(I),C)}return this._getMany(B,_,(A,I)=>{if(A)return x(A);try{for(let N=0;N<I.length;N++)I[N]!==void 0&&(I[N]=E.decode(I[N]))}catch(N){return x(new ModuleError$1(`Could not decode one or more of ${I.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:N}))}x(null,I)}),x[kPromise$1]}_getMany(n,_,x){this.nextTick(x,null,new Array(n.length).fill(void 0))}put(n,_,x,S){if(S=getCallback(x,S),S=fromCallback$1(S,kPromise$1),x=getOptions(x,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(n,_,x,S)),S[kPromise$1];if(maybeError(this,S))return S[kPromise$1];const E=this._checkKey(n)||this._checkValue(_);if(E)return this.nextTick(S,E),S[kPromise$1];const C=this.keyEncoding(x.keyEncoding),T=this.valueEncoding(x.valueEncoding),B=C.format,A=T.format;(x.keyEncoding!==B||x.valueEncoding!==A)&&(x=Object.assign({},x,{keyEncoding:B,valueEncoding:A}));const I=this.prefixKey(C.encode(n),B),N=T.encode(_);return this._put(I,N,x,V=>{if(V)return S(V);this.emit("put",n,_),S()}),S[kPromise$1]}_put(n,_,x,S){this.nextTick(S)}del(n,_,x){if(x=getCallback(_,x),x=fromCallback$1(x,kPromise$1),_=getOptions(_,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(n,_,x)),x[kPromise$1];if(maybeError(this,x))return x[kPromise$1];const S=this._checkKey(n);if(S)return this.nextTick(x,S),x[kPromise$1];const E=this.keyEncoding(_.keyEncoding),C=E.format;return _.keyEncoding!==C&&(_=Object.assign({},_,{keyEncoding:C})),this._del(this.prefixKey(E.encode(n),C),_,T=>{if(T)return x(T);this.emit("del",n),x()}),x[kPromise$1]}_del(n,_,x){this.nextTick(x)}batch(n,_,x){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof n=="function"?x=n:x=getCallback(_,x),x=fromCallback$1(x,kPromise$1),_=getOptions(_,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(n,_,x)),x[kPromise$1];if(maybeError(this,x))return x[kPromise$1];if(!Array.isArray(n))return this.nextTick(x,new TypeError("The first argument 'operations' must be an array")),x[kPromise$1];if(n.length===0)return this.nextTick(x),x[kPromise$1];const S=new Array(n.length),{keyEncoding:E,valueEncoding:C,...T}=_;for(let B=0;B<n.length;B++){if(typeof n[B]!="object"||n[B]===null)return this.nextTick(x,new TypeError("A batch operation must be an object")),x[kPromise$1];const A=Object.assign({},n[B]);if(A.type!=="put"&&A.type!=="del")return this.nextTick(x,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),x[kPromise$1];const I=this._checkKey(A.key);if(I)return this.nextTick(x,I),x[kPromise$1];const N=A.sublevel!=null?A.sublevel:this,V=N.keyEncoding(A.keyEncoding||E),D=V.format;if(A.key=N.prefixKey(V.encode(A.key),D),A.keyEncoding=D,A.type==="put"){const O=this._checkValue(A.value);if(O)return this.nextTick(x,O),x[kPromise$1];const F=N.valueEncoding(A.valueEncoding||C);A.value=F.encode(A.value),A.valueEncoding=F.format}N!==this&&(A.sublevel=null),S[B]=A}return this._batch(S,T,B=>{if(B)return x(B);this.emit("batch",n),x()}),x[kPromise$1]}_batch(n,_,x){this.nextTick(x)}sublevel(n,_){return this._sublevel(n,AbstractSublevel.defaults(_))}_sublevel(n,_){return new AbstractSublevel(this,n,_)}prefixKey(n,_){return n}clear(n,_){if(_=getCallback(n,_),_=fromCallback$1(_,kPromise$1),n=getOptions(n,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(n,_)),_[kPromise$1];if(maybeError(this,_))return _[kPromise$1];const x=n,S=this.keyEncoding(n.keyEncoding);return n=rangeOptions(n,S),n.keyEncoding=S.format,n.limit===0?this.nextTick(_):this._clear(n,E=>{if(E)return _(E);this.emit("clear",x),_()}),_[kPromise$1]}_clear(n,_){this.nextTick(_)}iterator(n){const _=this.keyEncoding(n&&n.keyEncoding),x=this.valueEncoding(n&&n.valueEncoding);if(n=rangeOptions(n,_),n.keys=n.keys!==!1,n.values=n.values!==!1,n[AbstractIterator$1.keyEncoding]=_,n[AbstractIterator$1.valueEncoding]=x,n.keyEncoding=_.format,n.valueEncoding=x.format,this[kStatus]==="opening")return new DeferredIterator(this,n);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(n)}_iterator(n){return new AbstractIterator$1(this,n)}keys(n){const _=this.keyEncoding(n&&n.keyEncoding),x=this.valueEncoding(n&&n.valueEncoding);if(n=rangeOptions(n,_),n[AbstractIterator$1.keyEncoding]=_,n[AbstractIterator$1.valueEncoding]=x,n.keyEncoding=_.format,n.valueEncoding=x.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,n);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(n)}_keys(n){return new DefaultKeyIterator(this,n)}values(n){const _=this.keyEncoding(n&&n.keyEncoding),x=this.valueEncoding(n&&n.valueEncoding);if(n=rangeOptions(n,_),n[AbstractIterator$1.keyEncoding]=_,n[AbstractIterator$1.valueEncoding]=x,n.keyEncoding=_.format,n.valueEncoding=x.format,this[kStatus]==="opening")return new DeferredValueIterator(this,n);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(n)}_values(n){return new DefaultValueIterator(this,n)}defer(n){if(typeof n!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(n)}[kUndefer](){if(this[kOperations].length===0)return;const n=this[kOperations];this[kOperations]=[];for(const _ of n)_()}attachResource(n){if(typeof n!="object"||n===null||typeof n.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(n)}detachResource(n){this[kResources].delete(n)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(n){if(n==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(n){if(n==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(r,n){return r[kStatus]!=="open"?(r.nextTick(n,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(r){return Object.keys(r.supports.encodings).filter(n=>!!r.supports.encodings[n])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var runParallelLimit_1=runParallelLimit;const queueMicrotask$1=queueMicrotask_1;function runParallelLimit(r,n,_){if(typeof n!="number")throw new Error("second argument must be a Number");let x,S,E,C,T,B=!0,A;Array.isArray(r)?(x=[],E=S=r.length):(C=Object.keys(r),x={},E=S=C.length);function I(V){function D(){_&&_(V,x),_=null}B?queueMicrotask$1(D):D()}function N(V,D,O){if(x[V]=O,D&&(T=!0),--E===0||D)I(D);else if(!T&&A<S){let F;C?(F=C[A],A+=1,r[F](function(M,L){N(F,M,L)})):(F=A,A+=1,r[F](function(M,L){N(F,M,L)}))}}A=n,E?C?C.some(function(V,D){return r[V](function(O,F){N(V,O,F)}),D===n-1}):r.some(function(V,D){return V(function(O,F){N(D,O,F)}),D===n-1}):I(null),B=!1}var iterator={},keyRange=function(n){const _=n.gte!==void 0?n.gte:n.gt!==void 0?n.gt:void 0,x=n.lte!==void 0?n.lte:n.lt!==void 0?n.lt:void 0,S=n.gte===void 0,E=n.lte===void 0;return _!==void 0&&x!==void 0?IDBKeyRange.bound(_,x,S,E):_!==void 0?IDBKeyRange.lowerBound(_,S):x!==void 0?IDBKeyRange.upperBound(x,E):null};const textEncoder$1=new TextEncoder;var deserialize$2=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):textEncoder$1.encode(r)};const{AbstractIterator}=abstractLevel$1,createKeyRange$1=keyRange,deserialize$1=deserialize$2,kCache=Symbol("cache"),kFinished=Symbol("finished"),kOptions=Symbol("options"),kCurrentOptions=Symbol("currentOptions"),kPosition=Symbol("position"),kLocation$1=Symbol("location"),kFirst=Symbol("first"),emptyOptions={};let Iterator$1=class extends AbstractIterator{constructor(n,_,x){super(n,x),this[kCache]=[],this[kFinished]=this.limit===0,this[kOptions]=x,this[kCurrentOptions]={...x},this[kPosition]=void 0,this[kLocation$1]=_,this[kFirst]=!0}_nextv(n,_,x){if(this[kFirst]=!1,this[kFinished])return this.nextTick(x,null,[]);if(this[kCache].length>0)return n=Math.min(n,this[kCache].length),this.nextTick(x,null,this[kCache].splice(0,n));this[kPosition]!==void 0&&(this[kOptions].reverse?(this[kCurrentOptions].lt=this[kPosition],this[kCurrentOptions].lte=void 0):(this[kCurrentOptions].gt=this[kPosition],this[kCurrentOptions].gte=void 0));let S;try{S=createKeyRange$1(this[kCurrentOptions])}catch{return this[kFinished]=!0,this.nextTick(x,null,[])}const E=this.db.db.transaction([this[kLocation$1]],"readonly"),C=E.objectStore(this[kLocation$1]),T=[];if(this[kOptions].reverse){const B=!this[kOptions].values&&C.openKeyCursor?"openKeyCursor":"openCursor";C[B](S,"prev").onsuccess=A=>{const I=A.target.result;if(I){const{key:N,value:V}=I;this[kPosition]=N,T.push([this[kOptions].keys&&N!==void 0?deserialize$1(N):void 0,this[kOptions].values&&V!==void 0?deserialize$1(V):void 0]),T.length<n?I.continue():maybeCommit(E)}else this[kFinished]=!0}}else{let B,A;const I=()=>{if(B===void 0||A===void 0)return;const N=Math.max(B.length,A.length);N===0||n===1/0?this[kFinished]=!0:this[kPosition]=B[N-1],T.length=N;for(let V=0;V<N;V++){const D=B[V],O=A[V];T[V]=[this[kOptions].keys&&D!==void 0?deserialize$1(D):void 0,this[kOptions].values&&O!==void 0?deserialize$1(O):void 0]}maybeCommit(E)};this[kOptions].keys||n<1/0?C.getAllKeys(S,n<1/0?n:void 0).onsuccess=N=>{B=N.target.result,I()}:(B=[],this.nextTick(I)),this[kOptions].values?C.getAll(S,n<1/0?n:void 0).onsuccess=N=>{A=N.target.result,I()}:(A=[],this.nextTick(I))}E.onabort=()=>{x(E.error||new Error("aborted by user")),x=null},E.oncomplete=()=>{x(null,T),x=null}}_next(n){if(this[kCache].length>0){const[_,x]=this[kCache].shift();this.nextTick(n,null,_,x)}else if(this[kFinished])this.nextTick(n);else{let _=Math.min(100,this.limit-this.count);this[kFirst]&&(this[kFirst]=!1,_=1),this._nextv(_,emptyOptions,(x,S)=>{if(x)return n(x);this[kCache]=S,this._next(n)})}}_all(n,_){this[kFirst]=!1;const x=this[kCache].splice(0,this[kCache].length),S=this.limit-this.count-x.length;if(S<=0)return this.nextTick(_,null,x);this._nextv(S,emptyOptions,(E,C)=>{if(E)return _(E);x.length>0&&(C=x.concat(C)),_(null,C)})}_seek(n,_){this[kFirst]=!0,this[kCache]=[],this[kFinished]=!1,this[kPosition]=void 0,this[kCurrentOptions]={...this[kOptions]};let x;try{x=createKeyRange$1(this[kOptions])}catch{this[kFinished]=!0;return}x!==null&&!x.includes(n)?this[kFinished]=!0:this[kOptions].reverse?this[kCurrentOptions].lte=n:this[kCurrentOptions].gte=n}};iterator.Iterator=Iterator$1;function maybeCommit(r){typeof r.commit=="function"&&r.commit()}var clear$1=function(n,_,x,S,E){if(S.limit===0)return n.nextTick(E);const C=n.db.transaction([_],"readwrite"),T=C.objectStore(_);let B=0;C.oncomplete=function(){E()},C.onabort=function(){E(C.error||new Error("aborted by user"))};const A=T.openKeyCursor?"openKeyCursor":"openCursor",I=S.reverse?"prev":"next";T[A](x,I).onsuccess=function(N){const V=N.target.result;V&&(T.delete(V.key).onsuccess=function(){(S.limit<=0||++B<S.limit)&&V.continue()})}};const{AbstractLevel}=abstractLevel$1,ModuleError=moduleError,parallel=runParallelLimit_1,{fromCallback}=catering,{Iterator}=iterator,deserialize=deserialize$2,clear=clear$1,createKeyRange=keyRange,DEFAULT_PREFIX="level-js-",kIDB=Symbol("idb"),kNamePrefix=Symbol("namePrefix"),kLocation=Symbol("location"),kVersion=Symbol("version"),kStore=Symbol("store"),kOnComplete=Symbol("onComplete"),kPromise=Symbol("promise");class BrowserLevel extends AbstractLevel{constructor(n,_,x){if(typeof _=="function"||typeof x=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:S,version:E,...C}=_||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},C),typeof n!="string")throw new Error("constructor requires a location string argument");this[kLocation]=n,this[kNamePrefix]=S??DEFAULT_PREFIX,this[kVersion]=parseInt(E||1,10),this[kIDB]=null}get location(){return this[kLocation]}get namePrefix(){return this[kNamePrefix]}get version(){return this[kVersion]}get db(){return this[kIDB]}get type(){return"browser-level"}_open(n,_){const x=indexedDB.open(this[kNamePrefix]+this[kLocation],this[kVersion]);x.onerror=function(){_(x.error||new Error("unknown error"))},x.onsuccess=()=>{this[kIDB]=x.result,_()},x.onupgradeneeded=S=>{const E=S.target.result;E.objectStoreNames.contains(this[kLocation])||E.createObjectStore(this[kLocation])}}[kStore](n){return this[kIDB].transaction([this[kLocation]],n).objectStore(this[kLocation])}[kOnComplete](n,_){const x=n.transaction;x.onabort=function(){_(x.error||new Error("aborted by user"))},x.oncomplete=function(){_(null,n.result)}}_get(n,_,x){const S=this[kStore]("readonly");let E;try{E=S.get(n)}catch(C){return this.nextTick(x,C)}this[kOnComplete](E,function(C,T){if(C)return x(C);if(T===void 0)return x(new ModuleError("Entry not found",{code:"LEVEL_NOT_FOUND"}));x(null,deserialize(T))})}_getMany(n,_,x){const S=this[kStore]("readonly"),E=n.map(C=>T=>{let B;try{B=S.get(C)}catch(A){return T(A)}B.onsuccess=()=>{const A=B.result;T(null,A===void 0?A:deserialize(A))},B.onerror=A=>{A.stopPropagation(),T(B.error)}});parallel(E,16,x)}_del(n,_,x){const S=this[kStore]("readwrite");let E;try{E=S.delete(n)}catch(C){return this.nextTick(x,C)}this[kOnComplete](E,x)}_put(n,_,x,S){const E=this[kStore]("readwrite");let C;try{C=E.put(_,n)}catch(T){return this.nextTick(S,T)}this[kOnComplete](C,S)}_iterator(n){return new Iterator(this,this[kLocation],n)}_batch(n,_,x){const S=this[kStore]("readwrite"),E=S.transaction;let C=0,T;E.onabort=function(){x(T||E.error||new Error("aborted by user"))},E.oncomplete=function(){x()};function B(){const A=n[C++],I=A.key;let N;try{N=A.type==="del"?S.delete(I):S.put(A.value,I)}catch(V){T=V,E.abort();return}C<n.length?N.onsuccess=B:typeof E.commit=="function"&&E.commit()}B()}_clear(n,_){let x,S;try{x=createKeyRange(n)}catch{return this.nextTick(_)}if(n.limit>=0)return clear(this,this[kLocation],x,n,_);try{const E=this[kStore]("readwrite");S=x?E.delete(x):E.clear()}catch(E){return this.nextTick(_,E)}this[kOnComplete](S,_)}_close(n){this[kIDB].close(),this.nextTick(n)}}BrowserLevel.destroy=function(r,n,_){typeof n=="function"&&(_=n,n=DEFAULT_PREFIX),_=fromCallback(_,kPromise);const x=indexedDB.deleteDatabase(n+r);return x.onsuccess=function(){_()},x.onerror=function(S){_(S)},_[kPromise]};browserLevel.BrowserLevel=BrowserLevel;var Level=browserLevel.BrowserLevel;const defaultPath$1="./level",defaultValueEncoding="view",LevelStorage=async({path:r,valueEncoding:n}={})=>{r=r||defaultPath$1,n=n||defaultValueEncoding;const _=new Level(r,{valueEncoding:n,passive:!0});return await _.open(),{put:async(I,N)=>{await _.put(I,N)},del:async I=>{await _.del(I)},get:async I=>{try{const N=await _.get(I);if(N)return N}catch{}},iterator:async function*(){for await(const[I,N]of _.iterator())yield[I,N]},merge:async I=>{},clear:async()=>{await _.clear()},close:async()=>{await _.close()}}},defaultSize=1e6,LRUStorage=async({size:r}={})=>{let n=new LRU$1(r||defaultSize);return{put:async(A,I)=>{n.set(A,I)},del:async A=>{n.remove(A)},get:async A=>n.get(A),iterator:async function*(){for await(const A of n.keys){const I=n.get(A);yield[A,I]}},merge:async A=>{if(A)for await(const[I,N]of A.iterator())n.set(I,N)},clear:async()=>{n=new LRU$1(r||defaultSize)},close:async()=>{}}},defaultReferencesCount=16,defaultCacheSize=1e3,Database=async({ipfs:r,identity:n,address:_,name:x,access:S,directory:E,meta:C,headsStorage:T,entryStorage:B,indexStorage:A,referencesCount:I,syncAutomatically:N,onUpdate:V})=>{E=posixJoin(E||"./orbitdb",`./${_}/`),C=C||{},I=Number(I)>-1?I:defaultReferencesCount,B=B||await ComposedStorage(await LRUStorage({size:defaultCacheSize}),await IPFSBlockStorage({ipfs:r,pin:!0})),T=T||await ComposedStorage(await LRUStorage({size:defaultCacheSize}),await LevelStorage({path:posixJoin(E,"/log/_heads/")})),A=A||await ComposedStorage(await LRUStorage({size:defaultCacheSize}),await LevelStorage({path:posixJoin(E,"/log/_index/")}));const D=await Log(n,{logId:_,access:S,entryStorage:B,headsStorage:T,indexStorage:A}),O=new eventsExports.EventEmitter,F=new PQueue({concurrency:1}),M=async X=>{const J=async()=>{const ae=await D.append(X,{referencesCount:I});return await H.add(ae),V&&await V(D,ae),O.emit("update",ae),ae.hash},Z=await F.add(J);return await F.onIdle(),Z},L=async X=>{const J=async()=>{const Z=await Entry.decode(X);Z&&await D.joinEntry(Z)&&(V&&await V(D,Z),O.emit("update",Z))};await F.add(J)},j=async()=>{await H.stop(),await F.onIdle(),await D.close(),S&&S.close&&await S.close(),O.emit("close")},q=async()=>{await F.onIdle(),await D.clear(),S&&S.drop&&await S.drop(),O.emit("drop")},H=await Sync({ipfs:r,log:D,events:O,onSynced:L,start:N});return{address:_,name:x,identity:n,meta:C,close:j,drop:q,addOperation:M,log:D,sync:H,peers:H.peers,events:O,access:S}},type$b="documents",DefaultOptions={indexBy:"_id"},Documents=({indexBy:r}=DefaultOptions)=>async({ipfs:n,identity:_,address:x,name:S,access:E,directory:C,meta:T,headsStorage:B,entryStorage:A,indexStorage:I,referencesCount:N,syncAutomatically:V,onUpdate:D})=>{const O=await Database({ipfs:n,identity:_,address:x,name:S,access:E,directory:C,meta:T,headsStorage:B,entryStorage:A,indexStorage:I,referencesCount:N,syncAutomatically:V}),{addOperation:F,log:M}=O,L=async Z=>{const ae=Z[r];if(!ae)throw new Error(`The provided document doesn't contain field '${r}'`);return F({op:"PUT",key:ae,value:Z})},j=async Z=>{if(!await q(Z))throw new Error(`No document with key '${Z}' in the database`);return F({op:"DEL",key:Z,value:null})},q=async Z=>{for await(const ae of X())if(Z===ae.key)return ae},H=async Z=>{const ae=[];for await(const ce of X())Z(ce.value)&&ae.push(ce.value);return ae},X=async function*({amount:Z}={}){const ae={};let ce=0;for await(const ve of M.iterator()){const{op:pe,key:G,value:Y}=ve.payload;if(pe==="PUT"&&!ae[G]?(ae[G]=!0,ce++,yield{hash:ve.hash,key:G,value:Y}):pe==="DEL"&&!ae[G]&&(ae[G]=!0),ce>=Z)break}};return{...O,type:type$b,put:L,del:j,get:q,iterator:X,query:H,indexBy:r,all:async()=>{const Z=[];for await(const ae of X())Z.unshift(ae);return Z}}};Documents.type=type$b;const type$a="events",Events=()=>async({ipfs:r,identity:n,address:_,name:x,access:S,directory:E,meta:C,headsStorage:T,entryStorage:B,indexStorage:A,referencesCount:I,syncAutomatically:N,onUpdate:V})=>{const D=await Database({ipfs:r,identity:n,address:_,name:x,access:S,directory:E,meta:C,headsStorage:T,entryStorage:B,indexStorage:A,referencesCount:I,syncAutomatically:N,onUpdate:V}),{addOperation:O,log:F}=D,M=async H=>O({op:"ADD",key:null,value:H}),L=async H=>(await F.get(H)).payload.value,j=async function*({gt:H,gte:X,lt:J,lte:Z,amount:ae}={}){const ce=F.iterator({gt:H,gte:X,lt:J,lte:Z,amount:ae});for await(const ve of ce){const pe=ve.hash,G=ve.payload.value;yield{hash:pe,value:G}}};return{...D,type:type$a,add:M,get:L,iterator:j,all:async()=>{const H=[];for await(const X of j())H.unshift(X);return H}}};Events.type=type$a;const type$9="keyvalue",KeyValue=()=>async({ipfs:r,identity:n,address:_,name:x,access:S,directory:E,meta:C,headsStorage:T,entryStorage:B,indexStorage:A,referencesCount:I,syncAutomatically:N,onUpdate:V})=>{const D=await Database({ipfs:r,identity:n,address:_,name:x,access:S,directory:E,meta:C,headsStorage:T,entryStorage:B,indexStorage:A,referencesCount:I,syncAutomatically:N,onUpdate:V}),{addOperation:O,log:F}=D,M=async(X,J)=>O({op:"PUT",key:X,value:J}),L=async X=>O({op:"DEL",key:X,value:null}),j=async X=>{for await(const J of F.traverse()){const{op:Z,key:ae,value:ce}=J.payload;if(Z==="PUT"&&ae===X)return ce;if(Z==="DEL"&&ae===X)return}},q=async function*({amount:X}={}){const J={};let Z=0;for await(const ae of F.traverse()){const{op:ce,key:ve,value:pe}=ae.payload;if(ce==="PUT"&&!J[ve]){J[ve]=!0,Z++;const G=ae.hash;yield{key:ve,value:pe,hash:G}}else ce==="DEL"&&!J[ve]&&(J[ve]=!0);if(Z>=X)break}};return{...D,type:type$9,put:M,set:M,del:L,get:j,iterator:q,all:async()=>{const X=[];for await(const J of q())X.unshift(J);return X}}};KeyValue.type=type$9;const databaseTypes={},useDatabaseType=r=>{if(!r.type)throw new Error("Database type does not contain required field 'type'.");databaseTypes[r.type]=r},getDatabaseType=r=>{if(!r)throw new Error("Type not specified");if(!databaseTypes[r])throw new Error(`Unsupported database type: '${r}'`);return databaseTypes[r]};useDatabaseType(Events);useDatabaseType(Documents);useDatabaseType(KeyValue);class CodeError extends Error{constructor(_,x,S){super(_);_t(this,"code");_t(this,"props");this.code=x,this.name=S?.name??"CodeError",this.props=S??{}}}var forge$m={options:{usePureJavaScript:!1}};const forge$n=getDefaultExportFromCjs(forge$m);var util$9={exports:{}},api$1={},baseN$1=api$1,_reverseAlphabets={};api$1.encode=function(r,n,_){if(typeof n!="string")throw new TypeError('"alphabet" must be a string.');if(_!==void 0&&typeof _!="number")throw new TypeError('"maxline" must be a number.');var x="";if(!(r instanceof Uint8Array))x=_encodeWithByteBuffer(r,n);else{var S=0,E=n.length,C=n.charAt(0),T=[0];for(S=0;S<r.length;++S){for(var B=0,A=r[S];B<T.length;++B)A+=T[B]<<8,T[B]=A%E,A=A/E|0;for(;A>0;)T.push(A%E),A=A/E|0}for(S=0;r[S]===0&&S<r.length-1;++S)x+=C;for(S=T.length-1;S>=0;--S)x+=n[T[S]]}if(_){var I=new RegExp(".{1,"+_+"}","g");x=x.match(I).join(`\r
`)}return x};api$1.decode=function(r,n){if(typeof r!="string")throw new TypeError('"input" must be a string.');if(typeof n!="string")throw new TypeError('"alphabet" must be a string.');var _=_reverseAlphabets[n];if(!_){_=_reverseAlphabets[n]=[];for(var x=0;x<n.length;++x)_[n.charCodeAt(x)]=x}r=r.replace(/\s/g,"");for(var S=n.length,E=n.charAt(0),C=[0],x=0;x<r.length;x++){var T=_[r.charCodeAt(x)];if(T===void 0)return;for(var B=0,A=T;B<C.length;++B)A+=C[B]*S,C[B]=A&255,A>>=8;for(;A>0;)C.push(A&255),A>>=8}for(var I=0;r[I]===E&&I<r.length-1;++I)C.push(0);return typeof Buffer$5<"u"?Buffer$5.from(C.reverse()):new Uint8Array(C.reverse())};function _encodeWithByteBuffer(r,n){var _=0,x=n.length,S=n.charAt(0),E=[0];for(_=0;_<r.length();++_){for(var C=0,T=r.at(_);C<E.length;++C)T+=E[C]<<8,E[C]=T%x,T=T/x|0;for(;T>0;)E.push(T%x),T=T/x|0}var B="";for(_=0;r.at(_)===0&&_<r.length()-1;++_)B+=S;for(_=E.length-1;_>=0;--_)B+=n[E[_]];return B}var forge$l=forge$m,baseN=baseN$1,util$8=util$9.exports=forge$l.util=forge$l.util||{};(function(){if(typeof browser$1$1<"u"&&browser$1$1.nextTick&&!browser$1$1.browser){util$8.nextTick=browser$1$1.nextTick,typeof setImmediate=="function"?util$8.setImmediate=setImmediate:util$8.setImmediate=util$8.nextTick;return}if(typeof setImmediate=="function"){util$8.setImmediate=function(){return setImmediate.apply(void 0,arguments)},util$8.nextTick=function(C){return setImmediate(C)};return}if(util$8.setImmediate=function(C){setTimeout(C,0)},typeof window<"u"&&typeof window.postMessage=="function"){let C=function(T){if(T.source===window&&T.data===r){T.stopPropagation();var B=n.slice();n.length=0,B.forEach(function(A){A()})}};var r="forge.setImmediate",n=[];util$8.setImmediate=function(T){n.push(T),n.length===1&&window.postMessage(r,"*")},window.addEventListener("message",C,!0)}if(typeof MutationObserver<"u"){var _=Date.now(),x=!0,S=document.createElement("div"),n=[];new MutationObserver(function(){var T=n.slice();n.length=0,T.forEach(function(B){B()})}).observe(S,{attributes:!0});var E=util$8.setImmediate;util$8.setImmediate=function(T){Date.now()-_>15?(_=Date.now(),E(T)):(n.push(T),n.length===1&&S.setAttribute("a",x=!x))}}util$8.nextTick=util$8.setImmediate})();util$8.isNodejs=typeof browser$1$1<"u"&&browser$1$1.versions&&browser$1$1.versions.node;util$8.globalScope=function(){return util$8.isNodejs?commonjsGlobal:typeof self>"u"?window:self}();util$8.isArray=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};util$8.isArrayBuffer=function(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer};util$8.isArrayBufferView=function(r){return r&&util$8.isArrayBuffer(r.buffer)&&r.byteLength!==void 0};function _checkBitsParam(r){if(!(r===8||r===16||r===24||r===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+r)}util$8.ByteBuffer=ByteStringBuffer;function ByteStringBuffer(r){if(this.data="",this.read=0,typeof r=="string")this.data=r;else if(util$8.isArrayBuffer(r)||util$8.isArrayBufferView(r))if(typeof Buffer$5<"u"&&r instanceof Buffer$5)this.data=r.toString("binary");else{var n=new Uint8Array(r);try{this.data=String.fromCharCode.apply(null,n)}catch{for(var _=0;_<n.length;++_)this.putByte(n[_])}}else(r instanceof ByteStringBuffer||typeof r=="object"&&typeof r.data=="string"&&typeof r.read=="number")&&(this.data=r.data,this.read=r.read);this._constructedStringLength=0}util$8.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;util$8.ByteStringBuffer.prototype._optimizeConstructedString=function(r){this._constructedStringLength+=r,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)};util$8.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};util$8.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};util$8.ByteStringBuffer.prototype.putByte=function(r){return this.putBytes(String.fromCharCode(r))};util$8.ByteStringBuffer.prototype.fillWithByte=function(r,n){r=String.fromCharCode(r);for(var _=this.data;n>0;)n&1&&(_+=r),n>>>=1,n>0&&(r+=r);return this.data=_,this._optimizeConstructedString(n),this};util$8.ByteStringBuffer.prototype.putBytes=function(r){return this.data+=r,this._optimizeConstructedString(r.length),this};util$8.ByteStringBuffer.prototype.putString=function(r){return this.putBytes(util$8.encodeUtf8(r))};util$8.ByteStringBuffer.prototype.putInt16=function(r){return this.putBytes(String.fromCharCode(r>>8&255)+String.fromCharCode(r&255))};util$8.ByteStringBuffer.prototype.putInt24=function(r){return this.putBytes(String.fromCharCode(r>>16&255)+String.fromCharCode(r>>8&255)+String.fromCharCode(r&255))};util$8.ByteStringBuffer.prototype.putInt32=function(r){return this.putBytes(String.fromCharCode(r>>24&255)+String.fromCharCode(r>>16&255)+String.fromCharCode(r>>8&255)+String.fromCharCode(r&255))};util$8.ByteStringBuffer.prototype.putInt16Le=function(r){return this.putBytes(String.fromCharCode(r&255)+String.fromCharCode(r>>8&255))};util$8.ByteStringBuffer.prototype.putInt24Le=function(r){return this.putBytes(String.fromCharCode(r&255)+String.fromCharCode(r>>8&255)+String.fromCharCode(r>>16&255))};util$8.ByteStringBuffer.prototype.putInt32Le=function(r){return this.putBytes(String.fromCharCode(r&255)+String.fromCharCode(r>>8&255)+String.fromCharCode(r>>16&255)+String.fromCharCode(r>>24&255))};util$8.ByteStringBuffer.prototype.putInt=function(r,n){_checkBitsParam(n);var _="";do n-=8,_+=String.fromCharCode(r>>n&255);while(n>0);return this.putBytes(_)};util$8.ByteStringBuffer.prototype.putSignedInt=function(r,n){return r<0&&(r+=2<<n-1),this.putInt(r,n)};util$8.ByteStringBuffer.prototype.putBuffer=function(r){return this.putBytes(r.getBytes())};util$8.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};util$8.ByteStringBuffer.prototype.getInt16=function(){var r=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,r};util$8.ByteStringBuffer.prototype.getInt24=function(){var r=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,r};util$8.ByteStringBuffer.prototype.getInt32=function(){var r=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,r};util$8.ByteStringBuffer.prototype.getInt16Le=function(){var r=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,r};util$8.ByteStringBuffer.prototype.getInt24Le=function(){var r=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,r};util$8.ByteStringBuffer.prototype.getInt32Le=function(){var r=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,r};util$8.ByteStringBuffer.prototype.getInt=function(r){_checkBitsParam(r);var n=0;do n=(n<<8)+this.data.charCodeAt(this.read++),r-=8;while(r>0);return n};util$8.ByteStringBuffer.prototype.getSignedInt=function(r){var n=this.getInt(r),_=2<<r-2;return n>=_&&(n-=_<<1),n};util$8.ByteStringBuffer.prototype.getBytes=function(r){var n;return r?(r=Math.min(this.length(),r),n=this.data.slice(this.read,this.read+r),this.read+=r):r===0?n="":(n=this.read===0?this.data:this.data.slice(this.read),this.clear()),n};util$8.ByteStringBuffer.prototype.bytes=function(r){return typeof r>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+r)};util$8.ByteStringBuffer.prototype.at=function(r){return this.data.charCodeAt(this.read+r)};util$8.ByteStringBuffer.prototype.setAt=function(r,n){return this.data=this.data.substr(0,this.read+r)+String.fromCharCode(n)+this.data.substr(this.read+r+1),this};util$8.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};util$8.ByteStringBuffer.prototype.copy=function(){var r=util$8.createBuffer(this.data);return r.read=this.read,r};util$8.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};util$8.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};util$8.ByteStringBuffer.prototype.truncate=function(r){var n=Math.max(0,this.length()-r);return this.data=this.data.substr(this.read,n),this.read=0,this};util$8.ByteStringBuffer.prototype.toHex=function(){for(var r="",n=this.read;n<this.data.length;++n){var _=this.data.charCodeAt(n);_<16&&(r+="0"),r+=_.toString(16)}return r};util$8.ByteStringBuffer.prototype.toString=function(){return util$8.decodeUtf8(this.bytes())};function DataBuffer(r,n){n=n||{},this.read=n.readOffset||0,this.growSize=n.growSize||1024;var _=util$8.isArrayBuffer(r),x=util$8.isArrayBufferView(r);if(_||x){_?this.data=new DataView(r):this.data=new DataView(r.buffer,r.byteOffset,r.byteLength),this.write="writeOffset"in n?n.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,r!=null&&this.putBytes(r),"writeOffset"in n&&(this.write=n.writeOffset)}util$8.DataBuffer=DataBuffer;util$8.DataBuffer.prototype.length=function(){return this.write-this.read};util$8.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};util$8.DataBuffer.prototype.accommodate=function(r,n){if(this.length()>=r)return this;n=Math.max(n||this.growSize,r);var _=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),x=new Uint8Array(this.length()+n);return x.set(_),this.data=new DataView(x.buffer),this};util$8.DataBuffer.prototype.putByte=function(r){return this.accommodate(1),this.data.setUint8(this.write++,r),this};util$8.DataBuffer.prototype.fillWithByte=function(r,n){this.accommodate(n);for(var _=0;_<n;++_)this.data.setUint8(r);return this};util$8.DataBuffer.prototype.putBytes=function(r,n){if(util$8.isArrayBufferView(r)){var _=new Uint8Array(r.buffer,r.byteOffset,r.byteLength),x=_.byteLength-_.byteOffset;this.accommodate(x);var S=new Uint8Array(this.data.buffer,this.write);return S.set(_),this.write+=x,this}if(util$8.isArrayBuffer(r)){var _=new Uint8Array(r);this.accommodate(_.byteLength);var S=new Uint8Array(this.data.buffer);return S.set(_,this.write),this.write+=_.byteLength,this}if(r instanceof util$8.DataBuffer||typeof r=="object"&&typeof r.read=="number"&&typeof r.write=="number"&&util$8.isArrayBufferView(r.data)){var _=new Uint8Array(r.data.byteLength,r.read,r.length());this.accommodate(_.byteLength);var S=new Uint8Array(r.data.byteLength,this.write);return S.set(_),this.write+=_.byteLength,this}if(r instanceof util$8.ByteStringBuffer&&(r=r.data,n="binary"),n=n||"binary",typeof r=="string"){var E;if(n==="hex")return this.accommodate(Math.ceil(r.length/2)),E=new Uint8Array(this.data.buffer,this.write),this.write+=util$8.binary.hex.decode(r,E,this.write),this;if(n==="base64")return this.accommodate(Math.ceil(r.length/4)*3),E=new Uint8Array(this.data.buffer,this.write),this.write+=util$8.binary.base64.decode(r,E,this.write),this;if(n==="utf8"&&(r=util$8.encodeUtf8(r),n="binary"),n==="binary"||n==="raw")return this.accommodate(r.length),E=new Uint8Array(this.data.buffer,this.write),this.write+=util$8.binary.raw.decode(E),this;if(n==="utf16")return this.accommodate(r.length*2),E=new Uint16Array(this.data.buffer,this.write),this.write+=util$8.text.utf16.encode(E),this;throw new Error("Invalid encoding: "+n)}throw Error("Invalid parameter: "+r)};util$8.DataBuffer.prototype.putBuffer=function(r){return this.putBytes(r),r.clear(),this};util$8.DataBuffer.prototype.putString=function(r){return this.putBytes(r,"utf16")};util$8.DataBuffer.prototype.putInt16=function(r){return this.accommodate(2),this.data.setInt16(this.write,r),this.write+=2,this};util$8.DataBuffer.prototype.putInt24=function(r){return this.accommodate(3),this.data.setInt16(this.write,r>>8&65535),this.data.setInt8(this.write,r>>16&255),this.write+=3,this};util$8.DataBuffer.prototype.putInt32=function(r){return this.accommodate(4),this.data.setInt32(this.write,r),this.write+=4,this};util$8.DataBuffer.prototype.putInt16Le=function(r){return this.accommodate(2),this.data.setInt16(this.write,r,!0),this.write+=2,this};util$8.DataBuffer.prototype.putInt24Le=function(r){return this.accommodate(3),this.data.setInt8(this.write,r>>16&255),this.data.setInt16(this.write,r>>8&65535,!0),this.write+=3,this};util$8.DataBuffer.prototype.putInt32Le=function(r){return this.accommodate(4),this.data.setInt32(this.write,r,!0),this.write+=4,this};util$8.DataBuffer.prototype.putInt=function(r,n){_checkBitsParam(n),this.accommodate(n/8);do n-=8,this.data.setInt8(this.write++,r>>n&255);while(n>0);return this};util$8.DataBuffer.prototype.putSignedInt=function(r,n){return _checkBitsParam(n),this.accommodate(n/8),r<0&&(r+=2<<n-1),this.putInt(r,n)};util$8.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};util$8.DataBuffer.prototype.getInt16=function(){var r=this.data.getInt16(this.read);return this.read+=2,r};util$8.DataBuffer.prototype.getInt24=function(){var r=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,r};util$8.DataBuffer.prototype.getInt32=function(){var r=this.data.getInt32(this.read);return this.read+=4,r};util$8.DataBuffer.prototype.getInt16Le=function(){var r=this.data.getInt16(this.read,!0);return this.read+=2,r};util$8.DataBuffer.prototype.getInt24Le=function(){var r=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,r};util$8.DataBuffer.prototype.getInt32Le=function(){var r=this.data.getInt32(this.read,!0);return this.read+=4,r};util$8.DataBuffer.prototype.getInt=function(r){_checkBitsParam(r);var n=0;do n=(n<<8)+this.data.getInt8(this.read++),r-=8;while(r>0);return n};util$8.DataBuffer.prototype.getSignedInt=function(r){var n=this.getInt(r),_=2<<r-2;return n>=_&&(n-=_<<1),n};util$8.DataBuffer.prototype.getBytes=function(r){var n;return r?(r=Math.min(this.length(),r),n=this.data.slice(this.read,this.read+r),this.read+=r):r===0?n="":(n=this.read===0?this.data:this.data.slice(this.read),this.clear()),n};util$8.DataBuffer.prototype.bytes=function(r){return typeof r>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+r)};util$8.DataBuffer.prototype.at=function(r){return this.data.getUint8(this.read+r)};util$8.DataBuffer.prototype.setAt=function(r,n){return this.data.setUint8(r,n),this};util$8.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};util$8.DataBuffer.prototype.copy=function(){return new util$8.DataBuffer(this)};util$8.DataBuffer.prototype.compact=function(){if(this.read>0){var r=new Uint8Array(this.data.buffer,this.read),n=new Uint8Array(r.byteLength);n.set(r),this.data=new DataView(n),this.write-=this.read,this.read=0}return this};util$8.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};util$8.DataBuffer.prototype.truncate=function(r){return this.write=Math.max(0,this.length()-r),this.read=Math.min(this.read,this.write),this};util$8.DataBuffer.prototype.toHex=function(){for(var r="",n=this.read;n<this.data.byteLength;++n){var _=this.data.getUint8(n);_<16&&(r+="0"),r+=_.toString(16)}return r};util$8.DataBuffer.prototype.toString=function(r){var n=new Uint8Array(this.data,this.read,this.length());if(r=r||"utf8",r==="binary"||r==="raw")return util$8.binary.raw.encode(n);if(r==="hex")return util$8.binary.hex.encode(n);if(r==="base64")return util$8.binary.base64.encode(n);if(r==="utf8")return util$8.text.utf8.decode(n);if(r==="utf16")return util$8.text.utf16.decode(n);throw new Error("Invalid encoding: "+r)};util$8.createBuffer=function(r,n){return n=n||"raw",r!==void 0&&n==="utf8"&&(r=util$8.encodeUtf8(r)),new util$8.ByteBuffer(r)};util$8.fillString=function(r,n){for(var _="";n>0;)n&1&&(_+=r),n>>>=1,n>0&&(r+=r);return _};util$8.xorBytes=function(r,n,_){for(var x="",S="",E="",C=0,T=0;_>0;--_,++C)S=r.charCodeAt(C)^n.charCodeAt(C),T>=10&&(x+=E,E="",T=0),E+=String.fromCharCode(S),++T;return x+=E,x};util$8.hexToBytes=function(r){var n="",_=0;for(r.length&!0&&(_=1,n+=String.fromCharCode(parseInt(r[0],16)));_<r.length;_+=2)n+=String.fromCharCode(parseInt(r.substr(_,2),16));return n};util$8.bytesToHex=function(r){return util$8.createBuffer(r).toHex()};util$8.int32ToBytes=function(r){return String.fromCharCode(r>>24&255)+String.fromCharCode(r>>16&255)+String.fromCharCode(r>>8&255)+String.fromCharCode(r&255)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";util$8.encode64=function(r,n){for(var _="",x="",S,E,C,T=0;T<r.length;)S=r.charCodeAt(T++),E=r.charCodeAt(T++),C=r.charCodeAt(T++),_+=_base64.charAt(S>>2),_+=_base64.charAt((S&3)<<4|E>>4),isNaN(E)?_+="==":(_+=_base64.charAt((E&15)<<2|C>>6),_+=isNaN(C)?"=":_base64.charAt(C&63)),n&&_.length>n&&(x+=_.substr(0,n)+`\r
`,_=_.substr(n));return x+=_,x};util$8.decode64=function(r){r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var n="",_,x,S,E,C=0;C<r.length;)_=_base64Idx[r.charCodeAt(C++)-43],x=_base64Idx[r.charCodeAt(C++)-43],S=_base64Idx[r.charCodeAt(C++)-43],E=_base64Idx[r.charCodeAt(C++)-43],n+=String.fromCharCode(_<<2|x>>4),S!==64&&(n+=String.fromCharCode((x&15)<<4|S>>2),E!==64&&(n+=String.fromCharCode((S&3)<<6|E)));return n};util$8.encodeUtf8=function(r){return unescape(encodeURIComponent(r))};util$8.decodeUtf8=function(r){return decodeURIComponent(escape(r))};util$8.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}};util$8.binary.raw.encode=function(r){return String.fromCharCode.apply(null,r)};util$8.binary.raw.decode=function(r,n,_){var x=n;x||(x=new Uint8Array(r.length)),_=_||0;for(var S=_,E=0;E<r.length;++E)x[S++]=r.charCodeAt(E);return n?S-_:x};util$8.binary.hex.encode=util$8.bytesToHex;util$8.binary.hex.decode=function(r,n,_){var x=n;x||(x=new Uint8Array(Math.ceil(r.length/2))),_=_||0;var S=0,E=_;for(r.length&1&&(S=1,x[E++]=parseInt(r[0],16));S<r.length;S+=2)x[E++]=parseInt(r.substr(S,2),16);return n?E-_:x};util$8.binary.base64.encode=function(r,n){for(var _="",x="",S,E,C,T=0;T<r.byteLength;)S=r[T++],E=r[T++],C=r[T++],_+=_base64.charAt(S>>2),_+=_base64.charAt((S&3)<<4|E>>4),isNaN(E)?_+="==":(_+=_base64.charAt((E&15)<<2|C>>6),_+=isNaN(C)?"=":_base64.charAt(C&63)),n&&_.length>n&&(x+=_.substr(0,n)+`\r
`,_=_.substr(n));return x+=_,x};util$8.binary.base64.decode=function(r,n,_){var x=n;x||(x=new Uint8Array(Math.ceil(r.length/4)*3)),r=r.replace(/[^A-Za-z0-9\+\/\=]/g,""),_=_||0;for(var S,E,C,T,B=0,A=_;B<r.length;)S=_base64Idx[r.charCodeAt(B++)-43],E=_base64Idx[r.charCodeAt(B++)-43],C=_base64Idx[r.charCodeAt(B++)-43],T=_base64Idx[r.charCodeAt(B++)-43],x[A++]=S<<2|E>>4,C!==64&&(x[A++]=(E&15)<<4|C>>2,T!==64&&(x[A++]=(C&3)<<6|T));return n?A-_:x.subarray(0,A)};util$8.binary.base58.encode=function(r,n){return util$8.binary.baseN.encode(r,_base58,n)};util$8.binary.base58.decode=function(r,n){return util$8.binary.baseN.decode(r,_base58,n)};util$8.text={utf8:{},utf16:{}};util$8.text.utf8.encode=function(r,n,_){r=util$8.encodeUtf8(r);var x=n;x||(x=new Uint8Array(r.length)),_=_||0;for(var S=_,E=0;E<r.length;++E)x[S++]=r.charCodeAt(E);return n?S-_:x};util$8.text.utf8.decode=function(r){return util$8.decodeUtf8(String.fromCharCode.apply(null,r))};util$8.text.utf16.encode=function(r,n,_){var x=n;x||(x=new Uint8Array(r.length*2));var S=new Uint16Array(x.buffer);_=_||0;for(var E=_,C=_,T=0;T<r.length;++T)S[C++]=r.charCodeAt(T),E+=2;return n?E-_:x};util$8.text.utf16.decode=function(r){return String.fromCharCode.apply(null,new Uint16Array(r.buffer))};util$8.deflate=function(r,n,_){if(n=util$8.decode64(r.deflate(util$8.encode64(n)).rval),_){var x=2,S=n.charCodeAt(1);S&32&&(x=6),n=n.substring(x,n.length-4)}return n};util$8.inflate=function(r,n,_){var x=r.inflate(util$8.encode64(n)).rval;return x===null?null:util$8.decode64(x)};var _setStorageObject=function(r,n,_){if(!r)throw new Error("WebStorage not available.");var x;if(_===null?x=r.removeItem(n):(_=util$8.encode64(JSON.stringify(_)),x=r.setItem(n,_)),typeof x<"u"&&x.rval!==!0){var S=new Error(x.error.message);throw S.id=x.error.id,S.name=x.error.name,S}},_getStorageObject=function(r,n){if(!r)throw new Error("WebStorage not available.");var _=r.getItem(n);if(r.init)if(_.rval===null){if(_.error){var x=new Error(_.error.message);throw x.id=_.error.id,x.name=_.error.name,x}_=null}else _=_.rval;return _!==null&&(_=JSON.parse(util$8.decode64(_))),_},_setItem=function(r,n,_,x){var S=_getStorageObject(r,n);S===null&&(S={}),S[_]=x,_setStorageObject(r,n,S)},_getItem=function(r,n,_){var x=_getStorageObject(r,n);return x!==null&&(x=_ in x?x[_]:null),x},_removeItem=function(r,n,_){var x=_getStorageObject(r,n);if(x!==null&&_ in x){delete x[_];var S=!0;for(var E in x){S=!1;break}S&&(x=null),_setStorageObject(r,n,x)}},_clearItems=function(r,n){_setStorageObject(r,n,null)},_callStorageFunction=function(r,n,_){var x=null;typeof _>"u"&&(_=["web","flash"]);var S,E=!1,C=null;for(var T in _){S=_[T];try{if(S==="flash"||S==="both"){if(n[0]===null)throw new Error("Flash local storage not available.");x=r.apply(this,n),E=S==="flash"}(S==="web"||S==="both")&&(n[0]=localStorage,x=r.apply(this,n),E=!0)}catch(B){C=B}if(E)break}if(!E)throw C;return x};util$8.setItem=function(r,n,_,x,S){_callStorageFunction(_setItem,arguments,S)};util$8.getItem=function(r,n,_,x){return _callStorageFunction(_getItem,arguments,x)};util$8.removeItem=function(r,n,_,x){_callStorageFunction(_removeItem,arguments,x)};util$8.clearItems=function(r,n,_){_callStorageFunction(_clearItems,arguments,_)};util$8.isEmpty=function(r){for(var n in r)if(r.hasOwnProperty(n))return!1;return!0};util$8.format=function(r){for(var n=/%./g,_,x,S=0,E=[],C=0;_=n.exec(r);){x=r.substring(C,n.lastIndex-2),x.length>0&&E.push(x),C=n.lastIndex;var T=_[0][1];switch(T){case"s":case"o":S<arguments.length?E.push(arguments[S+++1]):E.push("<?>");break;case"%":E.push("%");break;default:E.push("<%"+T+"?>")}}return E.push(r.substring(C)),E.join("")};util$8.formatNumber=function(r,n,_,x){var S=r,E=isNaN(n=Math.abs(n))?2:n,C=_===void 0?",":_,T=x===void 0?".":x,B=S<0?"-":"",A=parseInt(S=Math.abs(+S||0).toFixed(E),10)+"",I=A.length>3?A.length%3:0;return B+(I?A.substr(0,I)+T:"")+A.substr(I).replace(/(\d{3})(?=\d)/g,"$1"+T)+(E?C+Math.abs(S-A).toFixed(E).slice(2):"")};util$8.formatSize=function(r){return r>=1073741824?r=util$8.formatNumber(r/1073741824,2,".","")+" GiB":r>=1048576?r=util$8.formatNumber(r/1048576,2,".","")+" MiB":r>=1024?r=util$8.formatNumber(r/1024,0)+" KiB":r=util$8.formatNumber(r,0)+" bytes",r};util$8.bytesFromIP=function(r){return r.indexOf(".")!==-1?util$8.bytesFromIPv4(r):r.indexOf(":")!==-1?util$8.bytesFromIPv6(r):null};util$8.bytesFromIPv4=function(r){if(r=r.split("."),r.length!==4)return null;for(var n=util$8.createBuffer(),_=0;_<r.length;++_){var x=parseInt(r[_],10);if(isNaN(x))return null;n.putByte(x)}return n.getBytes()};util$8.bytesFromIPv6=function(r){var n=0;r=r.split(":").filter(function(C){return C.length===0&&++n,!0});for(var _=(8-r.length+n)*2,x=util$8.createBuffer(),S=0;S<8;++S){if(!r[S]||r[S].length===0){x.fillWithByte(0,_),_=0;continue}var E=util$8.hexToBytes(r[S]);E.length<2&&x.putByte(0),x.putBytes(E)}return x.getBytes()};util$8.bytesToIP=function(r){return r.length===4?util$8.bytesToIPv4(r):r.length===16?util$8.bytesToIPv6(r):null};util$8.bytesToIPv4=function(r){if(r.length!==4)return null;for(var n=[],_=0;_<r.length;++_)n.push(r.charCodeAt(_));return n.join(".")};util$8.bytesToIPv6=function(r){if(r.length!==16)return null;for(var n=[],_=[],x=0,S=0;S<r.length;S+=2){for(var E=util$8.bytesToHex(r[S]+r[S+1]);E[0]==="0"&&E!=="0";)E=E.substr(1);if(E==="0"){var C=_[_.length-1],T=n.length;!C||T!==C.end+1?_.push({start:T,end:T}):(C.end=T,C.end-C.start>_[x].end-_[x].start&&(x=_.length-1))}n.push(E)}if(_.length>0){var B=_[x];B.end-B.start>0&&(n.splice(B.start,B.end-B.start+1,""),B.start===0&&n.unshift(""),B.end===7&&n.push(""))}return n.join(":")};util$8.estimateCores=function(r,n){if(typeof r=="function"&&(n=r,r={}),r=r||{},"cores"in util$8&&!r.update)return n(null,util$8.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return util$8.cores=navigator.hardwareConcurrency,n(null,util$8.cores);if(typeof Worker>"u")return util$8.cores=1,n(null,util$8.cores);if(typeof Blob>"u")return util$8.cores=2,n(null,util$8.cores);var _=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(C){var T=Date.now(),B=T+4;self.postMessage({st:T,et:B})})}.toString(),")()"],{type:"application/javascript"}));x([],5,16);function x(C,T,B){if(T===0){var A=Math.floor(C.reduce(function(I,N){return I+N},0)/C.length);return util$8.cores=Math.max(1,A),URL.revokeObjectURL(_),n(null,util$8.cores)}S(B,function(I,N){C.push(E(B,N)),x(C,T-1,B)})}function S(C,T){for(var B=[],A=[],I=0;I<C;++I){var N=new Worker(_);N.addEventListener("message",function(V){if(A.push(V.data),A.length===C){for(var D=0;D<C;++D)B[D].terminate();T(null,A)}}),B.push(N)}for(var I=0;I<C;++I)B[I].postMessage(I)}function E(C,T){for(var B=[],A=0;A<C;++A)for(var I=T[A],N=B[A]=[],V=0;V<C;++V)if(A!==V){var D=T[V];(I.st>D.st&&I.st<D.et||D.st>I.st&&D.st<I.et)&&N.push(V)}return B.reduce(function(O,F){return Math.max(O,F.length)},0)}};var utilExports=util$9.exports;const forgeUtil=getDefaultExportFromCjs(utilExports);var forge$k=forge$m;forge$k.cipher=forge$k.cipher||{};forge$k.cipher.algorithms=forge$k.cipher.algorithms||{};forge$k.cipher.createCipher=function(r,n){var _=r;if(typeof _=="string"&&(_=forge$k.cipher.getAlgorithm(_),_&&(_=_())),!_)throw new Error("Unsupported algorithm: "+r);return new forge$k.cipher.BlockCipher({algorithm:_,key:n,decrypt:!1})};forge$k.cipher.createDecipher=function(r,n){var _=r;if(typeof _=="string"&&(_=forge$k.cipher.getAlgorithm(_),_&&(_=_())),!_)throw new Error("Unsupported algorithm: "+r);return new forge$k.cipher.BlockCipher({algorithm:_,key:n,decrypt:!0})};forge$k.cipher.registerAlgorithm=function(r,n){r=r.toUpperCase(),forge$k.cipher.algorithms[r]=n};forge$k.cipher.getAlgorithm=function(r){return r=r.toUpperCase(),r in forge$k.cipher.algorithms?forge$k.cipher.algorithms[r]:null};var BlockCipher=forge$k.cipher.BlockCipher=function(r){this.algorithm=r.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=r.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=r.decrypt,this.algorithm.initialize(r)};BlockCipher.prototype.start=function(r){r=r||{};var n={};for(var _ in r)n[_]=r[_];n.decrypt=this._decrypt,this._finish=!1,this._input=forge$k.util.createBuffer(),this.output=r.output||forge$k.util.createBuffer(),this.mode.start(n)};BlockCipher.prototype.update=function(r){for(r&&this._input.putBuffer(r);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};BlockCipher.prototype.finish=function(r){r&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(_){return r(this.blockSize,_,!1)},this.mode.unpad=function(_){return r(this.blockSize,_,!0)});var n={};return n.decrypt=this._decrypt,n.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,n)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,n))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,n))};var forge$j=forge$m;forge$j.cipher=forge$j.cipher||{};var modes$1=forge$j.cipher.modes=forge$j.cipher.modes||{};modes$1.ecb=function(r){r=r||{},this.name="ECB",this.cipher=r.cipher,this.blockSize=r.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes$1.ecb.prototype.start=function(r){};modes$1.ecb.prototype.encrypt=function(r,n,_){if(r.length()<this.blockSize&&!(_&&r.length()>0))return!0;for(var x=0;x<this._ints;++x)this._inBlock[x]=r.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var x=0;x<this._ints;++x)n.putInt32(this._outBlock[x])};modes$1.ecb.prototype.decrypt=function(r,n,_){if(r.length()<this.blockSize&&!(_&&r.length()>0))return!0;for(var x=0;x<this._ints;++x)this._inBlock[x]=r.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var x=0;x<this._ints;++x)n.putInt32(this._outBlock[x])};modes$1.ecb.prototype.pad=function(r,n){var _=r.length()===this.blockSize?this.blockSize:this.blockSize-r.length();return r.fillWithByte(_,_),!0};modes$1.ecb.prototype.unpad=function(r,n){if(n.overflow>0)return!1;var _=r.length(),x=r.at(_-1);return x>this.blockSize<<2?!1:(r.truncate(x),!0)};modes$1.cbc=function(r){r=r||{},this.name="CBC",this.cipher=r.cipher,this.blockSize=r.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes$1.cbc.prototype.start=function(r){if(r.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in r)this._iv=transformIV(r.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};modes$1.cbc.prototype.encrypt=function(r,n,_){if(r.length()<this.blockSize&&!(_&&r.length()>0))return!0;for(var x=0;x<this._ints;++x)this._inBlock[x]=this._prev[x]^r.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var x=0;x<this._ints;++x)n.putInt32(this._outBlock[x]);this._prev=this._outBlock};modes$1.cbc.prototype.decrypt=function(r,n,_){if(r.length()<this.blockSize&&!(_&&r.length()>0))return!0;for(var x=0;x<this._ints;++x)this._inBlock[x]=r.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var x=0;x<this._ints;++x)n.putInt32(this._prev[x]^this._outBlock[x]);this._prev=this._inBlock.slice(0)};modes$1.cbc.prototype.pad=function(r,n){var _=r.length()===this.blockSize?this.blockSize:this.blockSize-r.length();return r.fillWithByte(_,_),!0};modes$1.cbc.prototype.unpad=function(r,n){if(n.overflow>0)return!1;var _=r.length(),x=r.at(_-1);return x>this.blockSize<<2?!1:(r.truncate(x),!0)};modes$1.cfb=function(r){r=r||{},this.name="CFB",this.cipher=r.cipher,this.blockSize=r.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes$1.cfb.prototype.start=function(r){if(!("iv"in r))throw new Error("Invalid IV parameter.");this._iv=transformIV(r.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.cfb.prototype.encrypt=function(r,n,_){var x=r.length();if(x===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&x>=this.blockSize){for(var S=0;S<this._ints;++S)this._inBlock[S]=r.getInt32()^this._outBlock[S],n.putInt32(this._inBlock[S]);return}var E=(this.blockSize-x)%this.blockSize;E>0&&(E=this.blockSize-E),this._partialOutput.clear();for(var S=0;S<this._ints;++S)this._partialBlock[S]=r.getInt32()^this._outBlock[S],this._partialOutput.putInt32(this._partialBlock[S]);if(E>0)r.read-=this.blockSize;else for(var S=0;S<this._ints;++S)this._inBlock[S]=this._partialBlock[S];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),E>0&&!_)return n.putBytes(this._partialOutput.getBytes(E-this._partialBytes)),this._partialBytes=E,!0;n.putBytes(this._partialOutput.getBytes(x-this._partialBytes)),this._partialBytes=0};modes$1.cfb.prototype.decrypt=function(r,n,_){var x=r.length();if(x===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&x>=this.blockSize){for(var S=0;S<this._ints;++S)this._inBlock[S]=r.getInt32(),n.putInt32(this._inBlock[S]^this._outBlock[S]);return}var E=(this.blockSize-x)%this.blockSize;E>0&&(E=this.blockSize-E),this._partialOutput.clear();for(var S=0;S<this._ints;++S)this._partialBlock[S]=r.getInt32(),this._partialOutput.putInt32(this._partialBlock[S]^this._outBlock[S]);if(E>0)r.read-=this.blockSize;else for(var S=0;S<this._ints;++S)this._inBlock[S]=this._partialBlock[S];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),E>0&&!_)return n.putBytes(this._partialOutput.getBytes(E-this._partialBytes)),this._partialBytes=E,!0;n.putBytes(this._partialOutput.getBytes(x-this._partialBytes)),this._partialBytes=0};modes$1.ofb=function(r){r=r||{},this.name="OFB",this.cipher=r.cipher,this.blockSize=r.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes$1.ofb.prototype.start=function(r){if(!("iv"in r))throw new Error("Invalid IV parameter.");this._iv=transformIV(r.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.ofb.prototype.encrypt=function(r,n,_){var x=r.length();if(r.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&x>=this.blockSize){for(var S=0;S<this._ints;++S)n.putInt32(r.getInt32()^this._outBlock[S]),this._inBlock[S]=this._outBlock[S];return}var E=(this.blockSize-x)%this.blockSize;E>0&&(E=this.blockSize-E),this._partialOutput.clear();for(var S=0;S<this._ints;++S)this._partialOutput.putInt32(r.getInt32()^this._outBlock[S]);if(E>0)r.read-=this.blockSize;else for(var S=0;S<this._ints;++S)this._inBlock[S]=this._outBlock[S];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),E>0&&!_)return n.putBytes(this._partialOutput.getBytes(E-this._partialBytes)),this._partialBytes=E,!0;n.putBytes(this._partialOutput.getBytes(x-this._partialBytes)),this._partialBytes=0};modes$1.ofb.prototype.decrypt=modes$1.ofb.prototype.encrypt;modes$1.ctr=function(r){r=r||{},this.name="CTR",this.cipher=r.cipher,this.blockSize=r.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes$1.ctr.prototype.start=function(r){if(!("iv"in r))throw new Error("Invalid IV parameter.");this._iv=transformIV(r.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.ctr.prototype.encrypt=function(r,n,_){var x=r.length();if(x===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&x>=this.blockSize)for(var S=0;S<this._ints;++S)n.putInt32(r.getInt32()^this._outBlock[S]);else{var E=(this.blockSize-x)%this.blockSize;E>0&&(E=this.blockSize-E),this._partialOutput.clear();for(var S=0;S<this._ints;++S)this._partialOutput.putInt32(r.getInt32()^this._outBlock[S]);if(E>0&&(r.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),E>0&&!_)return n.putBytes(this._partialOutput.getBytes(E-this._partialBytes)),this._partialBytes=E,!0;n.putBytes(this._partialOutput.getBytes(x-this._partialBytes)),this._partialBytes=0}inc32(this._inBlock)};modes$1.ctr.prototype.decrypt=modes$1.ctr.prototype.encrypt;modes$1.gcm=function(r){r=r||{},this.name="GCM",this.cipher=r.cipher,this.blockSize=r.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0,this._R=3774873600};modes$1.gcm.prototype.start=function(r){if(!("iv"in r))throw new Error("Invalid IV parameter.");var n=forge$j.util.createBuffer(r.iv);this._cipherLength=0;var _;if("additionalData"in r?_=forge$j.util.createBuffer(r.additionalData):_=forge$j.util.createBuffer(),"tagLength"in r?this._tagLength=r.tagLength:this._tagLength=128,this._tag=null,r.decrypt&&(this._tag=forge$j.util.createBuffer(r.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var x=n.length();if(x===12)this._j0=[n.getInt32(),n.getInt32(),n.getInt32(),1];else{for(this._j0=[0,0,0,0];n.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(from64To32(x*8)))}this._inBlock=this._j0.slice(0),inc32(this._inBlock),this._partialBytes=0,_=forge$j.util.createBuffer(_),this._aDataLength=from64To32(_.length()*8);var S=_.length()%this.blockSize;for(S&&_.fillWithByte(0,this.blockSize-S),this._s=[0,0,0,0];_.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[_.getInt32(),_.getInt32(),_.getInt32(),_.getInt32()])};modes$1.gcm.prototype.encrypt=function(r,n,_){var x=r.length();if(x===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&x>=this.blockSize){for(var S=0;S<this._ints;++S)n.putInt32(this._outBlock[S]^=r.getInt32());this._cipherLength+=this.blockSize}else{var E=(this.blockSize-x)%this.blockSize;E>0&&(E=this.blockSize-E),this._partialOutput.clear();for(var S=0;S<this._ints;++S)this._partialOutput.putInt32(r.getInt32()^this._outBlock[S]);if(E<=0||_){if(_){var C=x%this.blockSize;this._cipherLength+=C,this._partialOutput.truncate(this.blockSize-C)}else this._cipherLength+=this.blockSize;for(var S=0;S<this._ints;++S)this._outBlock[S]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),E>0&&!_)return r.read-=this.blockSize,n.putBytes(this._partialOutput.getBytes(E-this._partialBytes)),this._partialBytes=E,!0;n.putBytes(this._partialOutput.getBytes(x-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),inc32(this._inBlock)};modes$1.gcm.prototype.decrypt=function(r,n,_){var x=r.length();if(x<this.blockSize&&!(_&&x>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),inc32(this._inBlock),this._hashBlock[0]=r.getInt32(),this._hashBlock[1]=r.getInt32(),this._hashBlock[2]=r.getInt32(),this._hashBlock[3]=r.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var S=0;S<this._ints;++S)n.putInt32(this._outBlock[S]^this._hashBlock[S]);x<this.blockSize?this._cipherLength+=x%this.blockSize:this._cipherLength+=this.blockSize};modes$1.gcm.prototype.afterFinish=function(r,n){var _=!0;n.decrypt&&n.overflow&&r.truncate(this.blockSize-n.overflow),this.tag=forge$j.util.createBuffer();var x=this._aDataLength.concat(from64To32(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,x);var S=[];this.cipher.encrypt(this._j0,S);for(var E=0;E<this._ints;++E)this.tag.putInt32(this._s[E]^S[E]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),n.decrypt&&this.tag.bytes()!==this._tag&&(_=!1),_};modes$1.gcm.prototype.multiply=function(r,n){for(var _=[0,0,0,0],x=n.slice(0),S=0;S<128;++S){var E=r[S/32|0]&1<<31-S%32;E&&(_[0]^=x[0],_[1]^=x[1],_[2]^=x[2],_[3]^=x[3]),this.pow(x,x)}return _};modes$1.gcm.prototype.pow=function(r,n){for(var _=r[3]&1,x=3;x>0;--x)n[x]=r[x]>>>1|(r[x-1]&1)<<31;n[0]=r[0]>>>1,_&&(n[0]^=this._R)};modes$1.gcm.prototype.tableMultiply=function(r){for(var n=[0,0,0,0],_=0;_<32;++_){var x=_/8|0,S=r[x]>>>(7-_%8)*4&15,E=this._m[_][S];n[0]^=E[0],n[1]^=E[1],n[2]^=E[2],n[3]^=E[3]}return n};modes$1.gcm.prototype.ghash=function(r,n,_){return n[0]^=_[0],n[1]^=_[1],n[2]^=_[2],n[3]^=_[3],this.tableMultiply(n)};modes$1.gcm.prototype.generateHashTable=function(r,n){for(var _=8/n,x=4*_,S=16*_,E=new Array(S),C=0;C<S;++C){var T=[0,0,0,0],B=C/x|0,A=(x-1-C%x)*n;T[B]=1<<n-1<<A,E[C]=this.generateSubHashTable(this.multiply(T,r),n)}return E};modes$1.gcm.prototype.generateSubHashTable=function(r,n){var _=1<<n,x=_>>>1,S=new Array(_);S[x]=r.slice(0);for(var E=x>>>1;E>0;)this.pow(S[2*E],S[E]=[]),E>>=1;for(E=2;E<x;){for(var C=1;C<E;++C){var T=S[E],B=S[C];S[E+C]=[T[0]^B[0],T[1]^B[1],T[2]^B[2],T[3]^B[3]]}E*=2}for(S[0]=[0,0,0,0],E=x+1;E<_;++E){var A=S[E^x];S[E]=[r[0]^A[0],r[1]^A[1],r[2]^A[2],r[3]^A[3]]}return S};function transformIV(r,n){if(typeof r=="string"&&(r=forge$j.util.createBuffer(r)),forge$j.util.isArray(r)&&r.length>4){var _=r;r=forge$j.util.createBuffer();for(var x=0;x<_.length;++x)r.putByte(_[x])}if(r.length()<n)throw new Error("Invalid IV length; got "+r.length()+" bytes and expected "+n+" bytes.");if(!forge$j.util.isArray(r)){for(var S=[],E=n/4,x=0;x<E;++x)S.push(r.getInt32());r=S}return r}function inc32(r){r[r.length-1]=r[r.length-1]+1&4294967295}function from64To32(r){return[r/4294967296|0,r&4294967295]}var forge$i=forge$m;forge$i.aes=forge$i.aes||{};forge$i.aes.startEncrypting=function(r,n,_,x){var S=_createCipher$1({key:r,output:_,decrypt:!1,mode:x});return S.start(n),S};forge$i.aes.createEncryptionCipher=function(r,n){return _createCipher$1({key:r,output:null,decrypt:!1,mode:n})};forge$i.aes.startDecrypting=function(r,n,_,x){var S=_createCipher$1({key:r,output:_,decrypt:!0,mode:x});return S.start(n),S};forge$i.aes.createDecryptionCipher=function(r,n){return _createCipher$1({key:r,output:null,decrypt:!0,mode:n})};forge$i.aes.Algorithm=function(r,n){init||initialize();var _=this;_.name=r,_.mode=new n({blockSize:16,cipher:{encrypt:function(x,S){return _updateBlock$1(_._w,x,S,!1)},decrypt:function(x,S){return _updateBlock$1(_._w,x,S,!0)}}}),_._init=!1};forge$i.aes.Algorithm.prototype.initialize=function(r){if(!this._init){var n=r.key,_;if(typeof n=="string"&&(n.length===16||n.length===24||n.length===32))n=forge$i.util.createBuffer(n);else if(forge$i.util.isArray(n)&&(n.length===16||n.length===24||n.length===32)){_=n,n=forge$i.util.createBuffer();for(var x=0;x<_.length;++x)n.putByte(_[x])}if(!forge$i.util.isArray(n)){_=n,n=[];var S=_.length();if(S===16||S===24||S===32){S=S>>>2;for(var x=0;x<S;++x)n.push(_.getInt32())}}if(!forge$i.util.isArray(n)||!(n.length===4||n.length===6||n.length===8))throw new Error("Invalid key parameter.");var E=this.mode.name,C=["CFB","OFB","CTR","GCM"].indexOf(E)!==-1;this._w=_expandKey(n,r.decrypt&&!C),this._init=!0}};forge$i.aes._expandKey=function(r,n){return init||initialize(),_expandKey(r,n)};forge$i.aes._updateBlock=_updateBlock$1;registerAlgorithm$1("AES-ECB",forge$i.cipher.modes.ecb);registerAlgorithm$1("AES-CBC",forge$i.cipher.modes.cbc);registerAlgorithm$1("AES-CFB",forge$i.cipher.modes.cfb);registerAlgorithm$1("AES-OFB",forge$i.cipher.modes.ofb);registerAlgorithm$1("AES-CTR",forge$i.cipher.modes.ctr);registerAlgorithm$1("AES-GCM",forge$i.cipher.modes.gcm);function registerAlgorithm$1(r,n){var _=function(){return new forge$i.aes.Algorithm(r,n)};forge$i.cipher.registerAlgorithm(r,_)}var init=!1,Nb=4,sbox,isbox,rcon,mix,imix;function initialize(){init=!0,rcon=[0,1,2,4,8,16,32,64,128,27,54];for(var r=new Array(256),n=0;n<128;++n)r[n]=n<<1,r[n+128]=n+128<<1^283;sbox=new Array(256),isbox=new Array(256),mix=new Array(4),imix=new Array(4);for(var n=0;n<4;++n)mix[n]=new Array(256),imix[n]=new Array(256);for(var _=0,x=0,S,E,C,T,B,A,I,n=0;n<256;++n){T=x^x<<1^x<<2^x<<3^x<<4,T=T>>8^T&255^99,sbox[_]=T,isbox[T]=_,B=r[T],S=r[_],E=r[S],C=r[E],A=B<<24^T<<16^T<<8^(T^B),I=(S^E^C)<<24^(_^C)<<16^(_^E^C)<<8^(_^S^C);for(var N=0;N<4;++N)mix[N][_]=A,imix[N][T]=I,A=A<<24|A>>>8,I=I<<24|I>>>8;_===0?_=x=1:(_=S^r[r[r[S^C]]],x^=r[r[x]])}}function _expandKey(r,n){for(var _=r.slice(0),x,S=1,E=_.length,C=E+6+1,T=Nb*C,B=E;B<T;++B)x=_[B-1],B%E===0?(x=sbox[x>>>16&255]<<24^sbox[x>>>8&255]<<16^sbox[x&255]<<8^sbox[x>>>24]^rcon[S]<<24,S++):E>6&&B%E===4&&(x=sbox[x>>>24]<<24^sbox[x>>>16&255]<<16^sbox[x>>>8&255]<<8^sbox[x&255]),_[B]=_[B-E]^x;if(n){var A,I=imix[0],N=imix[1],V=imix[2],D=imix[3],O=_.slice(0);T=_.length;for(var B=0,F=T-Nb;B<T;B+=Nb,F-=Nb)if(B===0||B===T-Nb)O[B]=_[F],O[B+1]=_[F+3],O[B+2]=_[F+2],O[B+3]=_[F+1];else for(var M=0;M<Nb;++M)A=_[F+M],O[B+(3&-M)]=I[sbox[A>>>24]]^N[sbox[A>>>16&255]]^V[sbox[A>>>8&255]]^D[sbox[A&255]];_=O}return _}function _updateBlock$1(r,n,_,x){var S=r.length/4-1,E,C,T,B,A;x?(E=imix[0],C=imix[1],T=imix[2],B=imix[3],A=isbox):(E=mix[0],C=mix[1],T=mix[2],B=mix[3],A=sbox);var I,N,V,D,O,F,M;I=n[0]^r[0],N=n[x?3:1]^r[1],V=n[2]^r[2],D=n[x?1:3]^r[3];for(var L=3,j=1;j<S;++j)O=E[I>>>24]^C[N>>>16&255]^T[V>>>8&255]^B[D&255]^r[++L],F=E[N>>>24]^C[V>>>16&255]^T[D>>>8&255]^B[I&255]^r[++L],M=E[V>>>24]^C[D>>>16&255]^T[I>>>8&255]^B[N&255]^r[++L],D=E[D>>>24]^C[I>>>16&255]^T[N>>>8&255]^B[V&255]^r[++L],I=O,N=F,V=M;_[0]=A[I>>>24]<<24^A[N>>>16&255]<<16^A[V>>>8&255]<<8^A[D&255]^r[++L],_[x?3:1]=A[N>>>24]<<24^A[V>>>16&255]<<16^A[D>>>8&255]<<8^A[I&255]^r[++L],_[2]=A[V>>>24]<<24^A[D>>>16&255]<<16^A[I>>>8&255]<<8^A[N&255]^r[++L],_[x?1:3]=A[D>>>24]<<24^A[I>>>16&255]<<16^A[N>>>8&255]<<8^A[V&255]^r[++L]}function _createCipher$1(r){r=r||{};var n=(r.mode||"CBC").toUpperCase(),_="AES-"+n,x;r.decrypt?x=forge$i.cipher.createDecipher(_,r.key):x=forge$i.cipher.createCipher(_,r.key);var S=x.start;return x.start=function(E,C){var T=null;C instanceof forge$i.util.ByteBuffer&&(T=C,C={}),C=C||{},C.output=T,C.iv=E,S.call(x,C)},x}function base$3(r,n){if(r.length>=255)throw new TypeError("Alphabet too long");for(var _=new Uint8Array(256),x=0;x<_.length;x++)_[x]=255;for(var S=0;S<r.length;S++){var E=r.charAt(S),C=E.charCodeAt(0);if(_[C]!==255)throw new TypeError(E+" is ambiguous");_[C]=S}var T=r.length,B=r.charAt(0),A=Math.log(T)/Math.log(256),I=Math.log(256)/Math.log(T);function N(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var F=0,M=0,L=0,j=O.length;L!==j&&O[L]===0;)L++,F++;for(var q=(j-L)*I+1>>>0,H=new Uint8Array(q);L!==j;){for(var X=O[L],J=0,Z=q-1;(X!==0||J<M)&&Z!==-1;Z--,J++)X+=256*H[Z]>>>0,H[Z]=X%T>>>0,X=X/T>>>0;if(X!==0)throw new Error("Non-zero carry");M=J,L++}for(var ae=q-M;ae!==q&&H[ae]===0;)ae++;for(var ce=B.repeat(F);ae<q;++ae)ce+=r.charAt(H[ae]);return ce}function V(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var F=0;if(O[F]!==" "){for(var M=0,L=0;O[F]===B;)M++,F++;for(var j=(O.length-F)*A+1>>>0,q=new Uint8Array(j);O[F];){var H=_[O.charCodeAt(F)];if(H===255)return;for(var X=0,J=j-1;(H!==0||X<L)&&J!==-1;J--,X++)H+=T*q[J]>>>0,q[J]=H%256>>>0,H=H/256>>>0;if(H!==0)throw new Error("Non-zero carry");L=X,F++}if(O[F]!==" "){for(var Z=j-L;Z!==j&&q[Z]===0;)Z++;for(var ae=new Uint8Array(M+(j-Z)),ce=M;Z!==j;)ae[ce++]=q[Z++];return ae}}}function D(O){var F=V(O);if(F)return F;throw new Error(`Non-${n} character`)}return{encode:N,decodeUnsafe:V,decode:D}}var src$2=base$3,_brrp__multiformats_scope_baseX$1=src$2;const coerce$1=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},fromString$2=r=>new TextEncoder().encode(r),toString$6=r=>new TextDecoder().decode(r);let Encoder$2=class{constructor(n,_,x){this.name=n,this.prefix=_,this.baseEncode=x}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}},Decoder$2=class{constructor(n,_,x){if(this.name=n,this.prefix=_,_.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=_.codePointAt(0),this.baseDecode=x}decode(n){if(typeof n=="string"){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(n){return or$1(this,n)}},ComposedDecoder$1=class{constructor(n){this.decoders=n}or(n){return or$1(this,n)}decode(n){const _=n[0],x=this.decoders[_];if(x)return x.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$1=(r,n)=>new ComposedDecoder$1({...r.decoders||{[r.prefix]:r},...n.decoders||{[n.prefix]:n}});let Codec$2=class{constructor(n,_,x,S){this.name=n,this.prefix=_,this.baseEncode=x,this.baseDecode=S,this.encoder=new Encoder$2(n,_,x),this.decoder=new Decoder$2(n,_,S)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}};const from$2=({name:r,prefix:n,encode:_,decode:x})=>new Codec$2(r,n,_,x),baseX$1=({prefix:r,name:n,alphabet:_})=>{const{encode:x,decode:S}=_brrp__multiformats_scope_baseX$1(_,n);return from$2({prefix:r,name:n,encode:x,decode:E=>coerce$1(S(E))})},decode$c=(r,n,_,x)=>{const S={};for(let I=0;I<n.length;++I)S[n[I]]=I;let E=r.length;for(;r[E-1]==="=";)--E;const C=new Uint8Array(E*_/8|0);let T=0,B=0,A=0;for(let I=0;I<E;++I){const N=S[r[I]];if(N===void 0)throw new SyntaxError(`Non-${x} character`);B=B<<_|N,T+=_,T>=8&&(T-=8,C[A++]=255&B>>T)}if(T>=_||255&B<<8-T)throw new SyntaxError("Unexpected end of data");return C},encode$e=(r,n,_)=>{const x=n[n.length-1]==="=",S=(1<<_)-1;let E="",C=0,T=0;for(let B=0;B<r.length;++B)for(T=T<<8|r[B],C+=8;C>_;)C-=_,E+=n[S&T>>C];if(C&&(E+=n[S&T<<_-C]),x)for(;E.length*_&7;)E+="=";return E},rfc4648$1=({name:r,prefix:n,bitsPerChar:_,alphabet:x})=>from$2({prefix:n,name:r,encode(S){return encode$e(S,x,_)},decode(S){return decode$c(S,x,_,r)}}),identity$3=from$2({prefix:"\0",name:"identity",encode:r=>toString$6(r),decode:r=>fromString$2(r)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$3},Symbol.toStringTag,{value:"Module"})),base2=rfc4648$1({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648$1({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX$1({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648$1({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$1({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base32$1=rfc4648$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$2=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$1,base32hex,base32hexpad,base32hexpadupper,base32hexupper,base32pad,base32padupper,base32upper,base32z},Symbol.toStringTag,{value:"Module"})),base36=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base58btc$1=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$1,base58flickr},Symbol.toStringTag,{value:"Module"})),base64$4=rfc4648$1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$5=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$4,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from(""),alphabetBytesToChars=alphabet.reduce((r,n,_)=>(r[_]=n,r),[]),alphabetCharsToBytes=alphabet.reduce((r,n,_)=>(r[n.codePointAt(0)]=_,r),[]);function encode$d(r){return r.reduce((n,_)=>(n+=alphabetBytesToChars[_],n),"")}function decode$b(r){const n=[];for(const _ of r){const x=alphabetCharsToBytes[_.codePointAt(0)];if(x===void 0)throw new Error(`Non-base256emoji character: ${_}`);n.push(x)}return new Uint8Array(n)}const base256emoji=from$2({prefix:"",name:"base256emoji",encode:encode$d,decode:decode$b}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$2,...base36$1,...base58,...base64$5,...base256emoji$1};function createCodec$2(r,n,_,x){return{name:r,prefix:n,encoder:{name:r,prefix:n,encode:_},decoder:{decode:x}}}const string=createCodec$2("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ascii=createCodec$2("ascii","a",r=>{let n="a";for(let _=0;_<r.length;_++)n+=String.fromCharCode(r[_]);return n},r=>{r=r.substring(1);const n=allocUnsafe(r.length);for(let _=0;_<r.length;_++)n[_]=r.charCodeAt(_);return n}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function fromString$1(r,n="utf8"){const _=BASES[n];if(_==null)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(r,"utf-8")):_.decoder.decode(`${_.prefix}${r}`)}function toString$5(r,n="utf8"){const _=BASES[n];if(_==null)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):_.encoder.encode(r).substring(1)}const webcrypto={get(r=globalThis){const n=r.crypto;if(n==null||n.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return n}};var forge$h=forge$m;forge$h.pki=forge$h.pki||{};var oids$1=forge$h.pki.oids=forge$h.oids=forge$h.oids||{};function _IN(r,n){oids$1[r]=n,oids$1[n]=r}function _I_(r,n){oids$1[r]=n}_IN("1.2.840.113549.1.1.1","rsaEncryption");_IN("1.2.840.113549.1.1.4","md5WithRSAEncryption");_IN("1.2.840.113549.1.1.5","sha1WithRSAEncryption");_IN("1.2.840.113549.1.1.7","RSAES-OAEP");_IN("1.2.840.113549.1.1.8","mgf1");_IN("1.2.840.113549.1.1.9","pSpecified");_IN("1.2.840.113549.1.1.10","RSASSA-PSS");_IN("1.2.840.113549.1.1.11","sha256WithRSAEncryption");_IN("1.2.840.113549.1.1.12","sha384WithRSAEncryption");_IN("1.2.840.113549.1.1.13","sha512WithRSAEncryption");_IN("1.3.101.112","EdDSA25519");_IN("1.2.840.10040.4.3","dsa-with-sha1");_IN("1.3.14.3.2.7","desCBC");_IN("1.3.14.3.2.26","sha1");_IN("1.3.14.3.2.29","sha1WithRSASignature");_IN("2.16.840.1.101.3.4.2.1","sha256");_IN("2.16.840.1.101.3.4.2.2","sha384");_IN("2.16.840.1.101.3.4.2.3","sha512");_IN("2.16.840.1.101.3.4.2.4","sha224");_IN("2.16.840.1.101.3.4.2.5","sha512-224");_IN("2.16.840.1.101.3.4.2.6","sha512-256");_IN("1.2.840.113549.2.2","md2");_IN("1.2.840.113549.2.5","md5");_IN("1.2.840.113549.1.7.1","data");_IN("1.2.840.113549.1.7.2","signedData");_IN("1.2.840.113549.1.7.3","envelopedData");_IN("1.2.840.113549.1.7.4","signedAndEnvelopedData");_IN("1.2.840.113549.1.7.5","digestedData");_IN("1.2.840.113549.1.7.6","encryptedData");_IN("1.2.840.113549.1.9.1","emailAddress");_IN("1.2.840.113549.1.9.2","unstructuredName");_IN("1.2.840.113549.1.9.3","contentType");_IN("1.2.840.113549.1.9.4","messageDigest");_IN("1.2.840.113549.1.9.5","signingTime");_IN("1.2.840.113549.1.9.6","counterSignature");_IN("1.2.840.113549.1.9.7","challengePassword");_IN("1.2.840.113549.1.9.8","unstructuredAddress");_IN("1.2.840.113549.1.9.14","extensionRequest");_IN("1.2.840.113549.1.9.20","friendlyName");_IN("1.2.840.113549.1.9.21","localKeyId");_IN("1.2.840.113549.1.9.22.1","x509Certificate");_IN("1.2.840.113549.1.12.10.1.1","keyBag");_IN("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");_IN("1.2.840.113549.1.12.10.1.3","certBag");_IN("1.2.840.113549.1.12.10.1.4","crlBag");_IN("1.2.840.113549.1.12.10.1.5","secretBag");_IN("1.2.840.113549.1.12.10.1.6","safeContentsBag");_IN("1.2.840.113549.1.5.13","pkcs5PBES2");_IN("1.2.840.113549.1.5.12","pkcs5PBKDF2");_IN("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");_IN("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");_IN("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");_IN("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");_IN("1.2.840.113549.2.7","hmacWithSHA1");_IN("1.2.840.113549.2.8","hmacWithSHA224");_IN("1.2.840.113549.2.9","hmacWithSHA256");_IN("1.2.840.113549.2.10","hmacWithSHA384");_IN("1.2.840.113549.2.11","hmacWithSHA512");_IN("1.2.840.113549.3.7","des-EDE3-CBC");_IN("2.16.840.1.101.3.4.1.2","aes128-CBC");_IN("2.16.840.1.101.3.4.1.22","aes192-CBC");_IN("2.16.840.1.101.3.4.1.42","aes256-CBC");_IN("2.5.4.3","commonName");_IN("2.5.4.4","surname");_IN("2.5.4.5","serialNumber");_IN("2.5.4.6","countryName");_IN("2.5.4.7","localityName");_IN("2.5.4.8","stateOrProvinceName");_IN("2.5.4.9","streetAddress");_IN("2.5.4.10","organizationName");_IN("2.5.4.11","organizationalUnitName");_IN("2.5.4.12","title");_IN("2.5.4.13","description");_IN("2.5.4.15","businessCategory");_IN("2.5.4.17","postalCode");_IN("2.5.4.42","givenName");_IN("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");_IN("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");_IN("2.16.840.1.113730.1.1","nsCertType");_IN("2.16.840.1.113730.1.13","nsComment");_I_("2.5.29.1","authorityKeyIdentifier");_I_("2.5.29.2","keyAttributes");_I_("2.5.29.3","certificatePolicies");_I_("2.5.29.4","keyUsageRestriction");_I_("2.5.29.5","policyMapping");_I_("2.5.29.6","subtreesConstraint");_I_("2.5.29.7","subjectAltName");_I_("2.5.29.8","issuerAltName");_I_("2.5.29.9","subjectDirectoryAttributes");_I_("2.5.29.10","basicConstraints");_I_("2.5.29.11","nameConstraints");_I_("2.5.29.12","policyConstraints");_I_("2.5.29.13","basicConstraints");_IN("2.5.29.14","subjectKeyIdentifier");_IN("2.5.29.15","keyUsage");_I_("2.5.29.16","privateKeyUsagePeriod");_IN("2.5.29.17","subjectAltName");_IN("2.5.29.18","issuerAltName");_IN("2.5.29.19","basicConstraints");_I_("2.5.29.20","cRLNumber");_I_("2.5.29.21","cRLReason");_I_("2.5.29.22","expirationDate");_I_("2.5.29.23","instructionCode");_I_("2.5.29.24","invalidityDate");_I_("2.5.29.25","cRLDistributionPoints");_I_("2.5.29.26","issuingDistributionPoint");_I_("2.5.29.27","deltaCRLIndicator");_I_("2.5.29.28","issuingDistributionPoint");_I_("2.5.29.29","certificateIssuer");_I_("2.5.29.30","nameConstraints");_IN("2.5.29.31","cRLDistributionPoints");_IN("2.5.29.32","certificatePolicies");_I_("2.5.29.33","policyMappings");_I_("2.5.29.34","policyConstraints");_IN("2.5.29.35","authorityKeyIdentifier");_I_("2.5.29.36","policyConstraints");_IN("2.5.29.37","extKeyUsage");_I_("2.5.29.46","freshestCRL");_I_("2.5.29.54","inhibitAnyPolicy");_IN("1.3.6.1.4.1.11129.2.4.2","timestampList");_IN("1.3.6.1.5.5.7.1.1","authorityInfoAccess");_IN("1.3.6.1.5.5.7.3.1","serverAuth");_IN("1.3.6.1.5.5.7.3.2","clientAuth");_IN("1.3.6.1.5.5.7.3.3","codeSigning");_IN("1.3.6.1.5.5.7.3.4","emailProtection");_IN("1.3.6.1.5.5.7.3.8","timeStamping");var forge$g=forge$m,asn1$4=forge$g.asn1=forge$g.asn1||{};asn1$4.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};asn1$4.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};asn1$4.create=function(r,n,_,x,S){if(forge$g.util.isArray(x)){for(var E=[],C=0;C<x.length;++C)x[C]!==void 0&&E.push(x[C]);x=E}var T={tagClass:r,type:n,constructed:_,composed:_||forge$g.util.isArray(x),value:x};return S&&"bitStringContents"in S&&(T.bitStringContents=S.bitStringContents,T.original=asn1$4.copy(T)),T};asn1$4.copy=function(r,n){var _;if(forge$g.util.isArray(r)){_=[];for(var x=0;x<r.length;++x)_.push(asn1$4.copy(r[x],n));return _}return typeof r=="string"?r:(_={tagClass:r.tagClass,type:r.type,constructed:r.constructed,composed:r.composed,value:asn1$4.copy(r.value,n)},n&&!n.excludeBitStringContents&&(_.bitStringContents=r.bitStringContents),_)};asn1$4.equals=function(r,n,_){if(forge$g.util.isArray(r)){if(!forge$g.util.isArray(n)||r.length!==n.length)return!1;for(var x=0;x<r.length;++x)if(!asn1$4.equals(r[x],n[x]))return!1;return!0}if(typeof r!=typeof n)return!1;if(typeof r=="string")return r===n;var S=r.tagClass===n.tagClass&&r.type===n.type&&r.constructed===n.constructed&&r.composed===n.composed&&asn1$4.equals(r.value,n.value);return _&&_.includeBitStringContents&&(S=S&&r.bitStringContents===n.bitStringContents),S};asn1$4.getBerValueLength=function(r){var n=r.getByte();if(n!==128){var _,x=n&128;return x?_=r.getInt((n&127)<<3):_=n,_}};function _checkBufferLength(r,n,_){if(_>n){var x=new Error("Too few bytes to parse DER.");throw x.available=r.length(),x.remaining=n,x.requested=_,x}}var _getValueLength=function(r,n){var _=r.getByte();if(n--,_!==128){var x,S=_&128;if(!S)x=_;else{var E=_&127;_checkBufferLength(r,n,E),x=r.getInt(E<<3)}if(x<0)throw new Error("Negative length: "+x);return x}};asn1$4.fromDer=function(r,n){n===void 0&&(n={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof n=="boolean"&&(n={strict:n,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in n||(n.strict=!0),"parseAllBytes"in n||(n.parseAllBytes=!0),"decodeBitStrings"in n||(n.decodeBitStrings=!0),typeof r=="string"&&(r=forge$g.util.createBuffer(r));var _=r.length(),x=_fromDer(r,r.length(),0,n);if(n.parseAllBytes&&r.length()!==0){var S=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw S.byteCount=_,S.remaining=r.length(),S}return x};function _fromDer(r,n,_,x){var S;_checkBufferLength(r,n,2);var E=r.getByte();n--;var C=E&192,T=E&31;S=r.length();var B=_getValueLength(r,n);if(n-=S-r.length(),B!==void 0&&B>n){if(x.strict){var A=new Error("Too few bytes to read ASN.1 value.");throw A.available=r.length(),A.remaining=n,A.requested=B,A}B=n}var I,N,V=(E&32)===32;if(V)if(I=[],B===void 0)for(;;){if(_checkBufferLength(r,n,2),r.bytes(2)===String.fromCharCode(0,0)){r.getBytes(2),n-=2;break}S=r.length(),I.push(_fromDer(r,n,_+1,x)),n-=S-r.length()}else for(;B>0;)S=r.length(),I.push(_fromDer(r,B,_+1,x)),n-=S-r.length(),B-=S-r.length();if(I===void 0&&C===asn1$4.Class.UNIVERSAL&&T===asn1$4.Type.BITSTRING&&(N=r.bytes(B)),I===void 0&&x.decodeBitStrings&&C===asn1$4.Class.UNIVERSAL&&T===asn1$4.Type.BITSTRING&&B>1){var D=r.read,O=n,F=0;if(T===asn1$4.Type.BITSTRING&&(_checkBufferLength(r,n,1),F=r.getByte(),n--),F===0)try{S=r.length();var M={strict:!0,decodeBitStrings:!0},L=_fromDer(r,n,_+1,M),j=S-r.length();n-=j,T==asn1$4.Type.BITSTRING&&j++;var q=L.tagClass;j===B&&(q===asn1$4.Class.UNIVERSAL||q===asn1$4.Class.CONTEXT_SPECIFIC)&&(I=[L])}catch{}I===void 0&&(r.read=D,n=O)}if(I===void 0){if(B===void 0){if(x.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");B=n}if(T===asn1$4.Type.BMPSTRING)for(I="";B>0;B-=2)_checkBufferLength(r,n,2),I+=String.fromCharCode(r.getInt16()),n-=2;else I=r.getBytes(B),n-=B}var H=N===void 0?null:{bitStringContents:N};return asn1$4.create(C,T,V,I,H)}asn1$4.toDer=function(r){var n=forge$g.util.createBuffer(),_=r.tagClass|r.type,x=forge$g.util.createBuffer(),S=!1;if("bitStringContents"in r&&(S=!0,r.original&&(S=asn1$4.equals(r,r.original))),S)x.putBytes(r.bitStringContents);else if(r.composed){r.constructed?_|=32:x.putByte(0);for(var E=0;E<r.value.length;++E)r.value[E]!==void 0&&x.putBuffer(asn1$4.toDer(r.value[E]))}else if(r.type===asn1$4.Type.BMPSTRING)for(var E=0;E<r.value.length;++E)x.putInt16(r.value.charCodeAt(E));else r.type===asn1$4.Type.INTEGER&&r.value.length>1&&(r.value.charCodeAt(0)===0&&!(r.value.charCodeAt(1)&128)||r.value.charCodeAt(0)===255&&(r.value.charCodeAt(1)&128)===128)?x.putBytes(r.value.substr(1)):x.putBytes(r.value);if(n.putByte(_),x.length()<=127)n.putByte(x.length()&127);else{var C=x.length(),T="";do T+=String.fromCharCode(C&255),C=C>>>8;while(C>0);n.putByte(T.length|128);for(var E=T.length-1;E>=0;--E)n.putByte(T.charCodeAt(E))}return n.putBuffer(x),n};asn1$4.oidToDer=function(r){var n=r.split("."),_=forge$g.util.createBuffer();_.putByte(40*parseInt(n[0],10)+parseInt(n[1],10));for(var x,S,E,C,T=2;T<n.length;++T){x=!0,S=[],E=parseInt(n[T],10);do C=E&127,E=E>>>7,x||(C|=128),S.push(C),x=!1;while(E>0);for(var B=S.length-1;B>=0;--B)_.putByte(S[B])}return _};asn1$4.derToOid=function(r){var n;typeof r=="string"&&(r=forge$g.util.createBuffer(r));var _=r.getByte();n=Math.floor(_/40)+"."+_%40;for(var x=0;r.length()>0;)_=r.getByte(),x=x<<7,_&128?x+=_&127:(n+="."+(x+_),x=0);return n};asn1$4.utcTimeToDate=function(r){var n=new Date,_=parseInt(r.substr(0,2),10);_=_>=50?1900+_:2e3+_;var x=parseInt(r.substr(2,2),10)-1,S=parseInt(r.substr(4,2),10),E=parseInt(r.substr(6,2),10),C=parseInt(r.substr(8,2),10),T=0;if(r.length>11){var B=r.charAt(10),A=10;B!=="+"&&B!=="-"&&(T=parseInt(r.substr(10,2),10),A+=2)}if(n.setUTCFullYear(_,x,S),n.setUTCHours(E,C,T,0),A&&(B=r.charAt(A),B==="+"||B==="-")){var I=parseInt(r.substr(A+1,2),10),N=parseInt(r.substr(A+4,2),10),V=I*60+N;V*=6e4,B==="+"?n.setTime(+n-V):n.setTime(+n+V)}return n};asn1$4.generalizedTimeToDate=function(r){var n=new Date,_=parseInt(r.substr(0,4),10),x=parseInt(r.substr(4,2),10)-1,S=parseInt(r.substr(6,2),10),E=parseInt(r.substr(8,2),10),C=parseInt(r.substr(10,2),10),T=parseInt(r.substr(12,2),10),B=0,A=0,I=!1;r.charAt(r.length-1)==="Z"&&(I=!0);var N=r.length-5,V=r.charAt(N);if(V==="+"||V==="-"){var D=parseInt(r.substr(N+1,2),10),O=parseInt(r.substr(N+4,2),10);A=D*60+O,A*=6e4,V==="+"&&(A*=-1),I=!0}return r.charAt(14)==="."&&(B=parseFloat(r.substr(14),10)*1e3),I?(n.setUTCFullYear(_,x,S),n.setUTCHours(E,C,T,B),n.setTime(+n+A)):(n.setFullYear(_,x,S),n.setHours(E,C,T,B)),n};asn1$4.dateToUtcTime=function(r){if(typeof r=="string")return r;var n="",_=[];_.push((""+r.getUTCFullYear()).substr(2)),_.push(""+(r.getUTCMonth()+1)),_.push(""+r.getUTCDate()),_.push(""+r.getUTCHours()),_.push(""+r.getUTCMinutes()),_.push(""+r.getUTCSeconds());for(var x=0;x<_.length;++x)_[x].length<2&&(n+="0"),n+=_[x];return n+="Z",n};asn1$4.dateToGeneralizedTime=function(r){if(typeof r=="string")return r;var n="",_=[];_.push(""+r.getUTCFullYear()),_.push(""+(r.getUTCMonth()+1)),_.push(""+r.getUTCDate()),_.push(""+r.getUTCHours()),_.push(""+r.getUTCMinutes()),_.push(""+r.getUTCSeconds());for(var x=0;x<_.length;++x)_[x].length<2&&(n+="0"),n+=_[x];return n+="Z",n};asn1$4.integerToDer=function(r){var n=forge$g.util.createBuffer();if(r>=-128&&r<128)return n.putSignedInt(r,8);if(r>=-32768&&r<32768)return n.putSignedInt(r,16);if(r>=-8388608&&r<8388608)return n.putSignedInt(r,24);if(r>=-2147483648&&r<2147483648)return n.putSignedInt(r,32);var _=new Error("Integer too large; max is 32-bits.");throw _.integer=r,_};asn1$4.derToInteger=function(r){typeof r=="string"&&(r=forge$g.util.createBuffer(r));var n=r.length()*8;if(n>32)throw new Error("Integer too large; max is 32-bits.");return r.getSignedInt(n)};asn1$4.validate=function(r,n,_,x){var S=!1;if((r.tagClass===n.tagClass||typeof n.tagClass>"u")&&(r.type===n.type||typeof n.type>"u"))if(r.constructed===n.constructed||typeof n.constructed>"u"){if(S=!0,n.value&&forge$g.util.isArray(n.value))for(var E=0,C=0;S&&C<n.value.length;++C)S=n.value[C].optional||!1,r.value[E]&&(S=asn1$4.validate(r.value[E],n.value[C],_,x),S?++E:n.value[C].optional&&(S=!0)),!S&&x&&x.push("["+n.name+'] Tag class "'+n.tagClass+'", type "'+n.type+'" expected value length "'+n.value.length+'", got "'+r.value.length+'"');if(S&&_&&(n.capture&&(_[n.capture]=r.value),n.captureAsn1&&(_[n.captureAsn1]=r),n.captureBitStringContents&&"bitStringContents"in r&&(_[n.captureBitStringContents]=r.bitStringContents),n.captureBitStringValue&&"bitStringContents"in r))if(r.bitStringContents.length<2)_[n.captureBitStringValue]="";else{var T=r.bitStringContents.charCodeAt(0);if(T!==0)throw new Error("captureBitStringValue only supported for zero unused bits");_[n.captureBitStringValue]=r.bitStringContents.slice(1)}}else x&&x.push("["+n.name+'] Expected constructed "'+n.constructed+'", got "'+r.constructed+'"');else x&&(r.tagClass!==n.tagClass&&x.push("["+n.name+'] Expected tag class "'+n.tagClass+'", got "'+r.tagClass+'"'),r.type!==n.type&&x.push("["+n.name+'] Expected type "'+n.type+'", got "'+r.type+'"'));return S};var _nonLatinRegex=/[^\\u0000-\\u00ff]/;asn1$4.prettyPrint=function(r,n,_){var x="";n=n||0,_=_||2,n>0&&(x+=`
`);for(var S="",E=0;E<n*_;++E)S+=" ";switch(x+=S+"Tag: ",r.tagClass){case asn1$4.Class.UNIVERSAL:x+="Universal:";break;case asn1$4.Class.APPLICATION:x+="Application:";break;case asn1$4.Class.CONTEXT_SPECIFIC:x+="Context-Specific:";break;case asn1$4.Class.PRIVATE:x+="Private:";break}if(r.tagClass===asn1$4.Class.UNIVERSAL)switch(x+=r.type,r.type){case asn1$4.Type.NONE:x+=" (None)";break;case asn1$4.Type.BOOLEAN:x+=" (Boolean)";break;case asn1$4.Type.INTEGER:x+=" (Integer)";break;case asn1$4.Type.BITSTRING:x+=" (Bit string)";break;case asn1$4.Type.OCTETSTRING:x+=" (Octet string)";break;case asn1$4.Type.NULL:x+=" (Null)";break;case asn1$4.Type.OID:x+=" (Object Identifier)";break;case asn1$4.Type.ODESC:x+=" (Object Descriptor)";break;case asn1$4.Type.EXTERNAL:x+=" (External or Instance of)";break;case asn1$4.Type.REAL:x+=" (Real)";break;case asn1$4.Type.ENUMERATED:x+=" (Enumerated)";break;case asn1$4.Type.EMBEDDED:x+=" (Embedded PDV)";break;case asn1$4.Type.UTF8:x+=" (UTF8)";break;case asn1$4.Type.ROID:x+=" (Relative Object Identifier)";break;case asn1$4.Type.SEQUENCE:x+=" (Sequence)";break;case asn1$4.Type.SET:x+=" (Set)";break;case asn1$4.Type.PRINTABLESTRING:x+=" (Printable String)";break;case asn1$4.Type.IA5String:x+=" (IA5String (ASCII))";break;case asn1$4.Type.UTCTIME:x+=" (UTC time)";break;case asn1$4.Type.GENERALIZEDTIME:x+=" (Generalized time)";break;case asn1$4.Type.BMPSTRING:x+=" (BMP String)";break}else x+=r.type;if(x+=`
`,x+=S+"Constructed: "+r.constructed+`
`,r.composed){for(var C=0,T="",E=0;E<r.value.length;++E)r.value[E]!==void 0&&(C+=1,T+=asn1$4.prettyPrint(r.value[E],n+1,_),E+1<r.value.length&&(T+=","));x+=S+"Sub values: "+C+T}else{if(x+=S+"Value: ",r.type===asn1$4.Type.OID){var B=asn1$4.derToOid(r.value);x+=B,forge$g.pki&&forge$g.pki.oids&&B in forge$g.pki.oids&&(x+=" ("+forge$g.pki.oids[B]+") ")}if(r.type===asn1$4.Type.INTEGER)try{x+=asn1$4.derToInteger(r.value)}catch{x+="0x"+forge$g.util.bytesToHex(r.value)}else if(r.type===asn1$4.Type.BITSTRING){if(r.value.length>1?x+="0x"+forge$g.util.bytesToHex(r.value.slice(1)):x+="(none)",r.value.length>0){var A=r.value.charCodeAt(0);A==1?x+=" (1 unused bit shown)":A>1&&(x+=" ("+A+" unused bits shown)")}}else if(r.type===asn1$4.Type.OCTETSTRING)_nonLatinRegex.test(r.value)||(x+="("+r.value+") "),x+="0x"+forge$g.util.bytesToHex(r.value);else if(r.type===asn1$4.Type.UTF8)try{x+=forge$g.util.decodeUtf8(r.value)}catch(I){if(I.message==="URI malformed")x+="0x"+forge$g.util.bytesToHex(r.value)+" (malformed UTF8)";else throw I}else r.type===asn1$4.Type.PRINTABLESTRING||r.type===asn1$4.Type.IA5String?x+=r.value:_nonLatinRegex.test(r.value)?x+="0x"+forge$g.util.bytesToHex(r.value):r.value.length===0?x+="[null]":x+=r.value}return x};var forge$f=forge$m;forge$f.des=forge$f.des||{};forge$f.des.startEncrypting=function(r,n,_,x){var S=_createCipher({key:r,output:_,decrypt:!1,mode:x||(n===null?"ECB":"CBC")});return S.start(n),S};forge$f.des.createEncryptionCipher=function(r,n){return _createCipher({key:r,output:null,decrypt:!1,mode:n})};forge$f.des.startDecrypting=function(r,n,_,x){var S=_createCipher({key:r,output:_,decrypt:!0,mode:x||(n===null?"ECB":"CBC")});return S.start(n),S};forge$f.des.createDecryptionCipher=function(r,n){return _createCipher({key:r,output:null,decrypt:!0,mode:n})};forge$f.des.Algorithm=function(r,n){var _=this;_.name=r,_.mode=new n({blockSize:8,cipher:{encrypt:function(x,S){return _updateBlock(_._keys,x,S,!1)},decrypt:function(x,S){return _updateBlock(_._keys,x,S,!0)}}}),_._init=!1};forge$f.des.Algorithm.prototype.initialize=function(r){if(!this._init){var n=forge$f.util.createBuffer(r.key);if(this.name.indexOf("3DES")===0&&n.length()!==24)throw new Error("Invalid Triple-DES key size: "+n.length()*8);this._keys=_createKeys(n),this._init=!0}};registerAlgorithm("DES-ECB",forge$f.cipher.modes.ecb);registerAlgorithm("DES-CBC",forge$f.cipher.modes.cbc);registerAlgorithm("DES-CFB",forge$f.cipher.modes.cfb);registerAlgorithm("DES-OFB",forge$f.cipher.modes.ofb);registerAlgorithm("DES-CTR",forge$f.cipher.modes.ctr);registerAlgorithm("3DES-ECB",forge$f.cipher.modes.ecb);registerAlgorithm("3DES-CBC",forge$f.cipher.modes.cbc);registerAlgorithm("3DES-CFB",forge$f.cipher.modes.cfb);registerAlgorithm("3DES-OFB",forge$f.cipher.modes.ofb);registerAlgorithm("3DES-CTR",forge$f.cipher.modes.ctr);function registerAlgorithm(r,n){var _=function(){return new forge$f.des.Algorithm(r,n)};forge$f.cipher.registerAlgorithm(r,_)}var spfunction1=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],spfunction2=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],spfunction3=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],spfunction4=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],spfunction5=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],spfunction6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],spfunction7=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],spfunction8=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function _createKeys(r){for(var n=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],_=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],x=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],S=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],E=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],C=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],T=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],B=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],A=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],I=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],N=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],V=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],D=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],O=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],F=r.length()>8?3:1,M=[],L=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],j=0,q,H=0;H<F;H++){var X=r.getInt32(),J=r.getInt32();q=(X>>>4^J)&252645135,J^=q,X^=q<<4,q=(J>>>-16^X)&65535,X^=q,J^=q<<-16,q=(X>>>2^J)&858993459,J^=q,X^=q<<2,q=(J>>>-16^X)&65535,X^=q,J^=q<<-16,q=(X>>>1^J)&1431655765,J^=q,X^=q<<1,q=(J>>>8^X)&16711935,X^=q,J^=q<<8,q=(X>>>1^J)&1431655765,J^=q,X^=q<<1,q=X<<8|J>>>20&240,X=J<<24|J<<8&16711680|J>>>8&65280|J>>>24&240,J=q;for(var Z=0;Z<L.length;++Z){L[Z]?(X=X<<2|X>>>26,J=J<<2|J>>>26):(X=X<<1|X>>>27,J=J<<1|J>>>27),X&=-15,J&=-15;var ae=n[X>>>28]|_[X>>>24&15]|x[X>>>20&15]|S[X>>>16&15]|E[X>>>12&15]|C[X>>>8&15]|T[X>>>4&15],ce=B[J>>>28]|A[J>>>24&15]|I[J>>>20&15]|N[J>>>16&15]|V[J>>>12&15]|D[J>>>8&15]|O[J>>>4&15];q=(ce>>>16^ae)&65535,M[j++]=ae^q,M[j++]=ce^q<<16}}return M}function _updateBlock(r,n,_,x){var S=r.length===32?3:9,E;S===3?E=x?[30,-2,-2]:[0,32,2]:E=x?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var C,T=n[0],B=n[1];C=(T>>>4^B)&252645135,B^=C,T^=C<<4,C=(T>>>16^B)&65535,B^=C,T^=C<<16,C=(B>>>2^T)&858993459,T^=C,B^=C<<2,C=(B>>>8^T)&16711935,T^=C,B^=C<<8,C=(T>>>1^B)&1431655765,B^=C,T^=C<<1,T=T<<1|T>>>31,B=B<<1|B>>>31;for(var A=0;A<S;A+=3){for(var I=E[A+1],N=E[A+2],V=E[A];V!=I;V+=N){var D=B^r[V],O=(B>>>4|B<<28)^r[V+1];C=T,T=B,B=C^(spfunction2[D>>>24&63]|spfunction4[D>>>16&63]|spfunction6[D>>>8&63]|spfunction8[D&63]|spfunction1[O>>>24&63]|spfunction3[O>>>16&63]|spfunction5[O>>>8&63]|spfunction7[O&63])}C=T,T=B,B=C}T=T>>>1|T<<31,B=B>>>1|B<<31,C=(T>>>1^B)&1431655765,B^=C,T^=C<<1,C=(B>>>8^T)&16711935,T^=C,B^=C<<8,C=(B>>>2^T)&858993459,T^=C,B^=C<<2,C=(T>>>16^B)&65535,B^=C,T^=C<<16,C=(T>>>4^B)&252645135,B^=C,T^=C<<4,_[0]=T,_[1]=B}function _createCipher(r){r=r||{};var n=(r.mode||"CBC").toUpperCase(),_="DES-"+n,x;r.decrypt?x=forge$f.cipher.createDecipher(_,r.key):x=forge$f.cipher.createCipher(_,r.key);var S=x.start;return x.start=function(E,C){var T=null;C instanceof forge$f.util.ByteBuffer&&(T=C,C={}),C=C||{},C.output=T,C.iv=E,S.call(x,C)},x}var forge$e=forge$m;forge$e.md=forge$e.md||{};forge$e.md.algorithms=forge$e.md.algorithms||{};var forge$d=forge$m,hmac$2=forge$d.hmac=forge$d.hmac||{};hmac$2.create=function(){var r=null,n=null,_=null,x=null,S={};return S.start=function(E,C){if(E!==null)if(typeof E=="string")if(E=E.toLowerCase(),E in forge$d.md.algorithms)n=forge$d.md.algorithms[E].create();else throw new Error('Unknown hash algorithm "'+E+'"');else n=E;if(C===null)C=r;else{if(typeof C=="string")C=forge$d.util.createBuffer(C);else if(forge$d.util.isArray(C)){var T=C;C=forge$d.util.createBuffer();for(var B=0;B<T.length;++B)C.putByte(T[B])}var A=C.length();A>n.blockLength&&(n.start(),n.update(C.bytes()),C=n.digest()),_=forge$d.util.createBuffer(),x=forge$d.util.createBuffer(),A=C.length();for(var B=0;B<A;++B){var T=C.at(B);_.putByte(54^T),x.putByte(92^T)}if(A<n.blockLength)for(var T=n.blockLength-A,B=0;B<T;++B)_.putByte(54),x.putByte(92);r=C,_=_.bytes(),x=x.bytes()}n.start(),n.update(_)},S.update=function(E){n.update(E)},S.getMac=function(){var E=n.digest().bytes();return n.start(),n.update(x),n.update(E),n.digest()},S.digest=S.getMac,S};var cryptoBrowserify={},browser$d={exports:{}},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,n){var _=buffer$3,x=_.Buffer;function S(C,T){for(var B in C)T[B]=C[B]}x.from&&x.alloc&&x.allocUnsafe&&x.allocUnsafeSlow?r.exports=_:(S(_,n),n.Buffer=E);function E(C,T,B){return x(C,T,B)}E.prototype=Object.create(x.prototype),S(x,E),E.from=function(C,T,B){if(typeof C=="number")throw new TypeError("Argument must not be a number");return x(C,T,B)},E.alloc=function(C,T,B){if(typeof C!="number")throw new TypeError("Argument must be a number");var A=x(C);return T!==void 0?typeof B=="string"?A.fill(T,B):A.fill(T):A.fill(0),A},E.allocUnsafe=function(C){if(typeof C!="number")throw new TypeError("Argument must be a number");return x(C)},E.allocUnsafeSlow=function(C){if(typeof C!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(C)}})(safeBuffer,safeBuffer.exports);var safeBufferExports=safeBuffer.exports,hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$d.exports;hasRequiredBrowser$b=1;var r=65536,n=4294967295;function _(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var x=safeBufferExports.Buffer,S=commonjsGlobal.crypto||commonjsGlobal.msCrypto;S&&S.getRandomValues?browser$d.exports=E:browser$d.exports=_;function E(C,T){if(C>n)throw new RangeError("requested too many random bytes");var B=x.allocUnsafe(C);if(C>0)if(C>r)for(var A=0;A<C;A+=r)S.getRandomValues(B.slice(A,A+r));else S.getRandomValues(B);return typeof T=="function"?browser$1$1.nextTick(function(){T(null,B)}):B}return browser$d.exports}var readableBrowser={exports:{}},streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=eventsExports.EventEmitter),streamBrowser}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function r(O,F){var M=Object.keys(O);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(O);F&&(L=L.filter(function(j){return Object.getOwnPropertyDescriptor(O,j).enumerable})),M.push.apply(M,L)}return M}function n(O){for(var F=1;F<arguments.length;F++){var M=arguments[F]!=null?arguments[F]:{};F%2?r(Object(M),!0).forEach(function(L){_(O,L,M[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(M)):r(Object(M)).forEach(function(L){Object.defineProperty(O,L,Object.getOwnPropertyDescriptor(M,L))})}return O}function _(O,F,M){return F=C(F),F in O?Object.defineProperty(O,F,{value:M,enumerable:!0,configurable:!0,writable:!0}):O[F]=M,O}function x(O,F){if(!(O instanceof F))throw new TypeError("Cannot call a class as a function")}function S(O,F){for(var M=0;M<F.length;M++){var L=F[M];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(O,C(L.key),L)}}function E(O,F,M){return F&&S(O.prototype,F),M&&S(O,M),Object.defineProperty(O,"prototype",{writable:!1}),O}function C(O){var F=T(O,"string");return typeof F=="symbol"?F:String(F)}function T(O,F){if(typeof O!="object"||O===null)return O;var M=O[Symbol.toPrimitive];if(M!==void 0){var L=M.call(O,F||"default");if(typeof L!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(O)}var B=buffer$3,A=B.Buffer,I=require$$0$2,N=I.inspect,V=N&&N.custom||"inspect";function D(O,F,M){A.prototype.copy.call(O,F,M)}return buffer_list=function(){function O(){x(this,O),this.head=null,this.tail=null,this.length=0}return E(O,[{key:"push",value:function(M){var L={data:M,next:null};this.length>0?this.tail.next=L:this.head=L,this.tail=L,++this.length}},{key:"unshift",value:function(M){var L={data:M,next:this.head};this.length===0&&(this.tail=L),this.head=L,++this.length}},{key:"shift",value:function(){if(this.length!==0){var M=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,M}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(M){if(this.length===0)return"";for(var L=this.head,j=""+L.data;L=L.next;)j+=M+L.data;return j}},{key:"concat",value:function(M){if(this.length===0)return A.alloc(0);for(var L=A.allocUnsafe(M>>>0),j=this.head,q=0;j;)D(j.data,L,q),q+=j.data.length,j=j.next;return L}},{key:"consume",value:function(M,L){var j;return M<this.head.data.length?(j=this.head.data.slice(0,M),this.head.data=this.head.data.slice(M)):M===this.head.data.length?j=this.shift():j=L?this._getString(M):this._getBuffer(M),j}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(M){var L=this.head,j=1,q=L.data;for(M-=q.length;L=L.next;){var H=L.data,X=M>H.length?H.length:M;if(X===H.length?q+=H:q+=H.slice(0,M),M-=X,M===0){X===H.length?(++j,L.next?this.head=L.next:this.head=this.tail=null):(this.head=L,L.data=H.slice(X));break}++j}return this.length-=j,q}},{key:"_getBuffer",value:function(M){var L=A.allocUnsafe(M),j=this.head,q=1;for(j.data.copy(L),M-=j.data.length;j=j.next;){var H=j.data,X=M>H.length?H.length:M;if(H.copy(L,L.length-M,0,X),M-=X,M===0){X===H.length?(++q,j.next?this.head=j.next:this.head=this.tail=null):(this.head=j,j.data=H.slice(X));break}++q}return this.length-=q,L}},{key:V,value:function(M,L){return N(this,n(n({},L),{},{depth:0,customInspect:!1}))}}]),O}(),buffer_list}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;function r(C,T){var B=this,A=this._readableState&&this._readableState.destroyed,I=this._writableState&&this._writableState.destroyed;return A||I?(T?T(C):C&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,browser$1$1.nextTick(S,this,C)):browser$1$1.nextTick(S,this,C)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(C||null,function(N){!T&&N?B._writableState?B._writableState.errorEmitted?browser$1$1.nextTick(_,B):(B._writableState.errorEmitted=!0,browser$1$1.nextTick(n,B,N)):browser$1$1.nextTick(n,B,N):T?(browser$1$1.nextTick(_,B),T(N)):browser$1$1.nextTick(_,B)}),this)}function n(C,T){S(C,T),_(C)}function _(C){C._writableState&&!C._writableState.emitClose||C._readableState&&!C._readableState.emitClose||C.emit("close")}function x(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function S(C,T){C.emit("error",T)}function E(C,T){var B=C._readableState,A=C._writableState;B&&B.autoDestroy||A&&A.autoDestroy?C.destroy(T):C.emit("error",T)}return destroy_1={destroy:r,undestroy:x,errorOrDestroy:E},destroy_1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function r(T,B){T.prototype=Object.create(B.prototype),T.prototype.constructor=T,T.__proto__=B}var n={};function _(T,B,A){A||(A=Error);function I(V,D,O){return typeof B=="string"?B:B(V,D,O)}var N=function(V){r(D,V);function D(O,F,M){return V.call(this,I(O,F,M))||this}return D}(A);N.prototype.name=A.name,N.prototype.code=T,n[T]=N}function x(T,B){if(Array.isArray(T)){var A=T.length;return T=T.map(function(I){return String(I)}),A>2?"one of ".concat(B," ").concat(T.slice(0,A-1).join(", "),", or ")+T[A-1]:A===2?"one of ".concat(B," ").concat(T[0]," or ").concat(T[1]):"of ".concat(B," ").concat(T[0])}else return"of ".concat(B," ").concat(String(T))}function S(T,B,A){return T.substr(!A||A<0?0:+A,B.length)===B}function E(T,B,A){return(A===void 0||A>T.length)&&(A=T.length),T.substring(A-B.length,A)===B}function C(T,B,A){return typeof A!="number"&&(A=0),A+B.length>T.length?!1:T.indexOf(B,A)!==-1}return _("ERR_INVALID_OPT_VALUE",function(T,B){return'The value "'+B+'" is invalid for option "'+T+'"'},TypeError),_("ERR_INVALID_ARG_TYPE",function(T,B,A){var I;typeof B=="string"&&S(B,"not ")?(I="must not be",B=B.replace(/^not /,"")):I="must be";var N;if(E(T," argument"))N="The ".concat(T," ").concat(I," ").concat(x(B,"type"));else{var V=C(T,".")?"property":"argument";N='The "'.concat(T,'" ').concat(V," ").concat(I," ").concat(x(B,"type"))}return N+=". Received type ".concat(typeof A),N},TypeError),_("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),_("ERR_METHOD_NOT_IMPLEMENTED",function(T){return"The "+T+" method is not implemented"}),_("ERR_STREAM_PREMATURE_CLOSE","Premature close"),_("ERR_STREAM_DESTROYED",function(T){return"Cannot call "+T+" after a stream was destroyed"}),_("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),_("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),_("ERR_STREAM_WRITE_AFTER_END","write after end"),_("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),_("ERR_UNKNOWN_ENCODING",function(T){return"Unknown encoding: "+T},TypeError),_("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=n,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var r=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function n(x,S,E){return x.highWaterMark!=null?x.highWaterMark:S?x[E]:null}function _(x,S,E,C){var T=n(S,C,E);if(T!=null){if(!(isFinite(T)&&Math.floor(T)===T)||T<0){var B=C?E:"highWaterMark";throw new r(B,T)}return Math.floor(T)}return x.objectMode?16:16*1024}return state={getHighWaterMark:_},state}var browser$c,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$c;hasRequiredBrowser$a=1,browser$c=r;function r(_,x){if(n("noDeprecation"))return _;var S=!1;function E(){if(!S){if(n("throwDeprecation"))throw new Error(x);n("traceDeprecation")?console.trace(x):console.warn(x),S=!0}return _.apply(this,arguments)}return E}function n(_){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var x=commonjsGlobal.localStorage[_];return x==null?!1:String(x).toLowerCase()==="true"}return browser$c}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=ae;function r(ge){var ye=this;this.next=null,this.entry=null,this.finish=function(){be(ye,ge)}}var n;ae.WritableState=J;var _={deprecate:requireBrowser$a()},x=requireStreamBrowser(),S=buffer$3.Buffer,E=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function C(ge){return S.from(ge)}function T(ge){return S.isBuffer(ge)||ge instanceof E}var B=requireDestroy(),A=requireState(),I=A.getHighWaterMark,N=requireErrorsBrowser().codes,V=N.ERR_INVALID_ARG_TYPE,D=N.ERR_METHOD_NOT_IMPLEMENTED,O=N.ERR_MULTIPLE_CALLBACK,F=N.ERR_STREAM_CANNOT_PIPE,M=N.ERR_STREAM_DESTROYED,L=N.ERR_STREAM_NULL_VALUES,j=N.ERR_STREAM_WRITE_AFTER_END,q=N.ERR_UNKNOWN_ENCODING,H=B.errorOrDestroy;inherits_browserExports(ae,x);function X(){}function J(ge,ye,Ee){n=n||require_stream_duplex(),ge=ge||{},typeof Ee!="boolean"&&(Ee=ye instanceof n),this.objectMode=!!ge.objectMode,Ee&&(this.objectMode=this.objectMode||!!ge.writableObjectMode),this.highWaterMark=I(this,ge,"writableHighWaterMark",Ee),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Re=ge.decodeStrings===!1;this.decodeStrings=!Re,this.defaultEncoding=ge.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Ne){ee(ye,Ne)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ge.emitClose!==!1,this.autoDestroy=!!ge.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}J.prototype.getBuffer=function(){for(var ye=this.bufferedRequest,Ee=[];ye;)Ee.push(ye),ye=ye.next;return Ee},function(){try{Object.defineProperty(J.prototype,"buffer",{get:_.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Z;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Z=Function.prototype[Symbol.hasInstance],Object.defineProperty(ae,Symbol.hasInstance,{value:function(ye){return Z.call(this,ye)?!0:this!==ae?!1:ye&&ye._writableState instanceof J}})):Z=function(ye){return ye instanceof this};function ae(ge){n=n||require_stream_duplex();var ye=this instanceof n;if(!ye&&!Z.call(ae,this))return new ae(ge);this._writableState=new J(ge,this,ye),this.writable=!0,ge&&(typeof ge.write=="function"&&(this._write=ge.write),typeof ge.writev=="function"&&(this._writev=ge.writev),typeof ge.destroy=="function"&&(this._destroy=ge.destroy),typeof ge.final=="function"&&(this._final=ge.final)),x.call(this)}ae.prototype.pipe=function(){H(this,new F)};function ce(ge,ye){var Ee=new j;H(ge,Ee),browser$1$1.nextTick(ye,Ee)}function ve(ge,ye,Ee,Re){var Ne;return Ee===null?Ne=new L:typeof Ee!="string"&&!ye.objectMode&&(Ne=new V("chunk",["string","Buffer"],Ee)),Ne?(H(ge,Ne),browser$1$1.nextTick(Re,Ne),!1):!0}ae.prototype.write=function(ge,ye,Ee){var Re=this._writableState,Ne=!1,Te=!Re.objectMode&&T(ge);return Te&&!S.isBuffer(ge)&&(ge=C(ge)),typeof ye=="function"&&(Ee=ye,ye=null),Te?ye="buffer":ye||(ye=Re.defaultEncoding),typeof Ee!="function"&&(Ee=X),Re.ending?ce(this,Ee):(Te||ve(this,Re,ge,Ee))&&(Re.pendingcb++,Ne=G(this,Re,Te,ge,ye,Ee)),Ne},ae.prototype.cork=function(){this._writableState.corked++},ae.prototype.uncork=function(){var ge=this._writableState;ge.corked&&(ge.corked--,!ge.writing&&!ge.corked&&!ge.bufferProcessing&&ge.bufferedRequest&&ie(this,ge))},ae.prototype.setDefaultEncoding=function(ye){if(typeof ye=="string"&&(ye=ye.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ye+"").toLowerCase())>-1))throw new q(ye);return this._writableState.defaultEncoding=ye,this},Object.defineProperty(ae.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function pe(ge,ye,Ee){return!ge.objectMode&&ge.decodeStrings!==!1&&typeof ye=="string"&&(ye=S.from(ye,Ee)),ye}Object.defineProperty(ae.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function G(ge,ye,Ee,Re,Ne,Te){if(!Ee){var he=pe(ye,Re,Ne);Re!==he&&(Ee=!0,Ne="buffer",Re=he)}var xe=ye.objectMode?1:Re.length;ye.length+=xe;var fe=ye.length<ye.highWaterMark;if(fe||(ye.needDrain=!0),ye.writing||ye.corked){var Be=ye.lastBufferedRequest;ye.lastBufferedRequest={chunk:Re,encoding:Ne,isBuf:Ee,callback:Te,next:null},Be?Be.next=ye.lastBufferedRequest:ye.bufferedRequest=ye.lastBufferedRequest,ye.bufferedRequestCount+=1}else Y(ge,ye,!1,xe,Re,Ne,Te);return fe}function Y(ge,ye,Ee,Re,Ne,Te,he){ye.writelen=Re,ye.writecb=he,ye.writing=!0,ye.sync=!0,ye.destroyed?ye.onwrite(new M("write")):Ee?ge._writev(Ne,ye.onwrite):ge._write(Ne,Te,ye.onwrite),ye.sync=!1}function U(ge,ye,Ee,Re,Ne){--ye.pendingcb,Ee?(browser$1$1.nextTick(Ne,Re),browser$1$1.nextTick(le,ge,ye),ge._writableState.errorEmitted=!0,H(ge,Re)):(Ne(Re),ge._writableState.errorEmitted=!0,H(ge,Re),le(ge,ye))}function W(ge){ge.writing=!1,ge.writecb=null,ge.length-=ge.writelen,ge.writelen=0}function ee(ge,ye){var Ee=ge._writableState,Re=Ee.sync,Ne=Ee.writecb;if(typeof Ne!="function")throw new O;if(W(Ee),ye)U(ge,Ee,Re,ye,Ne);else{var Te=ne(Ee)||ge.destroyed;!Te&&!Ee.corked&&!Ee.bufferProcessing&&Ee.bufferedRequest&&ie(ge,Ee),Re?browser$1$1.nextTick(re,ge,Ee,Te,Ne):re(ge,Ee,Te,Ne)}}function re(ge,ye,Ee,Re){Ee||oe(ge,ye),ye.pendingcb--,Re(),le(ge,ye)}function oe(ge,ye){ye.length===0&&ye.needDrain&&(ye.needDrain=!1,ge.emit("drain"))}function ie(ge,ye){ye.bufferProcessing=!0;var Ee=ye.bufferedRequest;if(ge._writev&&Ee&&Ee.next){var Re=ye.bufferedRequestCount,Ne=new Array(Re),Te=ye.corkedRequestsFree;Te.entry=Ee;for(var he=0,xe=!0;Ee;)Ne[he]=Ee,Ee.isBuf||(xe=!1),Ee=Ee.next,he+=1;Ne.allBuffers=xe,Y(ge,ye,!0,ye.length,Ne,"",Te.finish),ye.pendingcb++,ye.lastBufferedRequest=null,Te.next?(ye.corkedRequestsFree=Te.next,Te.next=null):ye.corkedRequestsFree=new r(ye),ye.bufferedRequestCount=0}else{for(;Ee;){var fe=Ee.chunk,Be=Ee.encoding,Le=Ee.callback,Ve=ye.objectMode?1:fe.length;if(Y(ge,ye,!1,Ve,fe,Be,Le),Ee=Ee.next,ye.bufferedRequestCount--,ye.writing)break}Ee===null&&(ye.lastBufferedRequest=null)}ye.bufferedRequest=Ee,ye.bufferProcessing=!1}ae.prototype._write=function(ge,ye,Ee){Ee(new D("_write()"))},ae.prototype._writev=null,ae.prototype.end=function(ge,ye,Ee){var Re=this._writableState;return typeof ge=="function"?(Ee=ge,ge=null,ye=null):typeof ye=="function"&&(Ee=ye,ye=null),ge!=null&&this.write(ge,ye),Re.corked&&(Re.corked=1,this.uncork()),Re.ending||ue(this,Re,Ee),this},Object.defineProperty(ae.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ne(ge){return ge.ending&&ge.length===0&&ge.bufferedRequest===null&&!ge.finished&&!ge.writing}function te(ge,ye){ge._final(function(Ee){ye.pendingcb--,Ee&&H(ge,Ee),ye.prefinished=!0,ge.emit("prefinish"),le(ge,ye)})}function K(ge,ye){!ye.prefinished&&!ye.finalCalled&&(typeof ge._final=="function"&&!ye.destroyed?(ye.pendingcb++,ye.finalCalled=!0,browser$1$1.nextTick(te,ge,ye)):(ye.prefinished=!0,ge.emit("prefinish")))}function le(ge,ye){var Ee=ne(ye);if(Ee&&(K(ge,ye),ye.pendingcb===0&&(ye.finished=!0,ge.emit("finish"),ye.autoDestroy))){var Re=ge._readableState;(!Re||Re.autoDestroy&&Re.endEmitted)&&ge.destroy()}return Ee}function ue(ge,ye,Ee){ye.ending=!0,le(ge,ye),Ee&&(ye.finished?browser$1$1.nextTick(Ee):ge.once("finish",Ee)),ye.ended=!0,ge.writable=!1}function be(ge,ye,Ee){var Re=ge.entry;for(ge.entry=null;Re;){var Ne=Re.callback;ye.pendingcb--,Ne(Ee),Re=Re.next}ye.corkedRequestsFree.next=ge}return Object.defineProperty(ae.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(ye){this._writableState&&(this._writableState.destroyed=ye)}}),ae.prototype.destroy=B.destroy,ae.prototype._undestroy=B.undestroy,ae.prototype._destroy=function(ge,ye){ye(ge)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var r=Object.keys||function(A){var I=[];for(var N in A)I.push(N);return I};_stream_duplex=C;var n=require_stream_readable(),_=require_stream_writable();inherits_browserExports(C,n);for(var x=r(_.prototype),S=0;S<x.length;S++){var E=x[S];C.prototype[E]||(C.prototype[E]=_.prototype[E])}function C(A){if(!(this instanceof C))return new C(A);n.call(this,A),_.call(this,A),this.allowHalfOpen=!0,A&&(A.readable===!1&&(this.readable=!1),A.writable===!1&&(this.writable=!1),A.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",T)))}Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function T(){this._writableState.ended||browser$1$1.nextTick(B,this)}function B(A){A.end()}return Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(I){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=I,this._writableState.destroyed=I)}}),_stream_duplex}var string_decoder={},Buffer$2=safeBufferExports.Buffer,isEncoding=Buffer$2.isEncoding||function(r){switch(r=""+r,r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(r){if(!r)return"utf8";for(var n;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(n)return;r=(""+r).toLowerCase(),n=!0}}function normalizeEncoding(r){var n=_normalizeEncoding(r);if(typeof n!="string"&&(Buffer$2.isEncoding===isEncoding||!isEncoding(r)))throw new Error("Unknown encoding: "+r);return n||r}var StringDecoder_1=string_decoder.StringDecoder=StringDecoder;function StringDecoder(r){this.encoding=normalizeEncoding(r);var n;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,n=4;break;case"utf8":this.fillLast=utf8FillLast,n=4;break;case"base64":this.text=base64Text,this.end=base64End,n=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$2.allocUnsafe(n)}StringDecoder.prototype.write=function(r){if(r.length===0)return"";var n,_;if(this.lastNeed){if(n=this.fillLast(r),n===void 0)return"";_=this.lastNeed,this.lastNeed=0}else _=0;return _<r.length?n?n+this.text(r,_):this.text(r,_):n||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};function utf8CheckByte(r){return r<=127?0:r>>5===6?2:r>>4===14?3:r>>3===30?4:r>>6===2?-1:-2}function utf8CheckIncomplete(r,n,_){var x=n.length-1;if(x<_)return 0;var S=utf8CheckByte(n[x]);return S>=0?(S>0&&(r.lastNeed=S-1),S):--x<_||S===-2?0:(S=utf8CheckByte(n[x]),S>=0?(S>0&&(r.lastNeed=S-2),S):--x<_||S===-2?0:(S=utf8CheckByte(n[x]),S>=0?(S>0&&(S===2?S=0:r.lastNeed=S-3),S):0))}function utf8CheckExtraBytes(r,n,_){if((n[0]&192)!==128)return r.lastNeed=0,"";if(r.lastNeed>1&&n.length>1){if((n[1]&192)!==128)return r.lastNeed=1,"";if(r.lastNeed>2&&n.length>2&&(n[2]&192)!==128)return r.lastNeed=2,""}}function utf8FillLast(r){var n=this.lastTotal-this.lastNeed,_=utf8CheckExtraBytes(this,r);if(_!==void 0)return _;if(this.lastNeed<=r.length)return r.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,n,0,r.length),this.lastNeed-=r.length}function utf8Text(r,n){var _=utf8CheckIncomplete(this,r,n);if(!this.lastNeed)return r.toString("utf8",n);this.lastTotal=_;var x=r.length-(_-this.lastNeed);return r.copy(this.lastChar,0,x),r.toString("utf8",n,x)}function utf8End(r){var n=r&&r.length?this.write(r):"";return this.lastNeed?n+"":n}function utf16Text(r,n){if((r.length-n)%2===0){var _=r.toString("utf16le",n);if(_){var x=_.charCodeAt(_.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],_.slice(0,-1)}return _}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",n,r.length-1)}function utf16End(r){var n=r&&r.length?this.write(r):"";if(this.lastNeed){var _=this.lastTotal-this.lastNeed;return n+this.lastChar.toString("utf16le",0,_)}return n}function base64Text(r,n){var _=(r.length-n)%3;return _===0?r.toString("base64",n):(this.lastNeed=3-_,this.lastTotal=3,_===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",n,r.length-_))}function base64End(r){var n=r&&r.length?this.write(r):"";return this.lastNeed?n+this.lastChar.toString("base64",0,3-this.lastNeed):n}function simpleWrite(r){return r.toString(this.encoding)}function simpleEnd(r){return r&&r.length?this.write(r):""}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var r=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function n(E){var C=!1;return function(){if(!C){C=!0;for(var T=arguments.length,B=new Array(T),A=0;A<T;A++)B[A]=arguments[A];E.apply(this,B)}}}function _(){}function x(E){return E.setHeader&&typeof E.abort=="function"}function S(E,C,T){if(typeof C=="function")return S(E,null,C);C||(C={}),T=n(T||_);var B=C.readable||C.readable!==!1&&E.readable,A=C.writable||C.writable!==!1&&E.writable,I=function(){E.writable||V()},N=E._writableState&&E._writableState.finished,V=function(){A=!1,N=!0,B||T.call(E)},D=E._readableState&&E._readableState.endEmitted,O=function(){B=!1,D=!0,A||T.call(E)},F=function(q){T.call(E,q)},M=function(){var q;if(B&&!D)return(!E._readableState||!E._readableState.ended)&&(q=new r),T.call(E,q);if(A&&!N)return(!E._writableState||!E._writableState.ended)&&(q=new r),T.call(E,q)},L=function(){E.req.on("finish",V)};return x(E)?(E.on("complete",V),E.on("abort",M),E.req?L():E.on("request",L)):A&&!E._writableState&&(E.on("end",I),E.on("close",I)),E.on("end",O),E.on("finish",V),C.error!==!1&&E.on("error",F),E.on("close",M),function(){E.removeListener("complete",V),E.removeListener("abort",M),E.removeListener("request",L),E.req&&E.req.removeListener("finish",V),E.removeListener("end",I),E.removeListener("close",I),E.removeListener("finish",V),E.removeListener("end",O),E.removeListener("error",F),E.removeListener("close",M)}}return endOfStream=S,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var r;function n(q,H,X){return H=_(H),H in q?Object.defineProperty(q,H,{value:X,enumerable:!0,configurable:!0,writable:!0}):q[H]=X,q}function _(q){var H=x(q,"string");return typeof H=="symbol"?H:String(H)}function x(q,H){if(typeof q!="object"||q===null)return q;var X=q[Symbol.toPrimitive];if(X!==void 0){var J=X.call(q,H||"default");if(typeof J!="object")return J;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(q)}var S=requireEndOfStream(),E=Symbol("lastResolve"),C=Symbol("lastReject"),T=Symbol("error"),B=Symbol("ended"),A=Symbol("lastPromise"),I=Symbol("handlePromise"),N=Symbol("stream");function V(q,H){return{value:q,done:H}}function D(q){var H=q[E];if(H!==null){var X=q[N].read();X!==null&&(q[A]=null,q[E]=null,q[C]=null,H(V(X,!1)))}}function O(q){browser$1$1.nextTick(D,q)}function F(q,H){return function(X,J){q.then(function(){if(H[B]){X(V(void 0,!0));return}H[I](X,J)},J)}}var M=Object.getPrototypeOf(function(){}),L=Object.setPrototypeOf((r={get stream(){return this[N]},next:function(){var H=this,X=this[T];if(X!==null)return Promise.reject(X);if(this[B])return Promise.resolve(V(void 0,!0));if(this[N].destroyed)return new Promise(function(ce,ve){browser$1$1.nextTick(function(){H[T]?ve(H[T]):ce(V(void 0,!0))})});var J=this[A],Z;if(J)Z=new Promise(F(J,this));else{var ae=this[N].read();if(ae!==null)return Promise.resolve(V(ae,!1));Z=new Promise(this[I])}return this[A]=Z,Z}},n(r,Symbol.asyncIterator,function(){return this}),n(r,"return",function(){var H=this;return new Promise(function(X,J){H[N].destroy(null,function(Z){if(Z){J(Z);return}X(V(void 0,!0))})})}),r),M),j=function(H){var X,J=Object.create(L,(X={},n(X,N,{value:H,writable:!0}),n(X,E,{value:null,writable:!0}),n(X,C,{value:null,writable:!0}),n(X,T,{value:null,writable:!0}),n(X,B,{value:H._readableState.endEmitted,writable:!0}),n(X,I,{value:function(ae,ce){var ve=J[N].read();ve?(J[A]=null,J[E]=null,J[C]=null,ae(V(ve,!1))):(J[E]=ae,J[C]=ce)},writable:!0}),X));return J[A]=null,S(H,function(Z){if(Z&&Z.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ae=J[C];ae!==null&&(J[A]=null,J[E]=null,J[C]=null,ae(Z)),J[T]=Z;return}var ce=J[E];ce!==null&&(J[A]=null,J[E]=null,J[C]=null,ce(V(void 0,!0))),J[B]=!0}),H.on("readable",O.bind(null,J)),J};return async_iterator=j,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=ce;var r;ce.ReadableState=ae,eventsExports.EventEmitter;var n=function(he,xe){return he.listeners(xe).length},_=requireStreamBrowser(),x=buffer$3.Buffer,S=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function E(Te){return x.from(Te)}function C(Te){return x.isBuffer(Te)||Te instanceof S}var T=require$$0$2,B;T&&T.debuglog?B=T.debuglog("stream"):B=function(){};var A=requireBuffer_list(),I=requireDestroy(),N=requireState(),V=N.getHighWaterMark,D=requireErrorsBrowser().codes,O=D.ERR_INVALID_ARG_TYPE,F=D.ERR_STREAM_PUSH_AFTER_EOF,M=D.ERR_METHOD_NOT_IMPLEMENTED,L=D.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,j,q,H;inherits_browserExports(ce,_);var X=I.errorOrDestroy,J=["error","close","destroy","pause","resume"];function Z(Te,he,xe){if(typeof Te.prependListener=="function")return Te.prependListener(he,xe);!Te._events||!Te._events[he]?Te.on(he,xe):Array.isArray(Te._events[he])?Te._events[he].unshift(xe):Te._events[he]=[xe,Te._events[he]]}function ae(Te,he,xe){r=r||require_stream_duplex(),Te=Te||{},typeof xe!="boolean"&&(xe=he instanceof r),this.objectMode=!!Te.objectMode,xe&&(this.objectMode=this.objectMode||!!Te.readableObjectMode),this.highWaterMark=V(this,Te,"readableHighWaterMark",xe),this.buffer=new A,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Te.emitClose!==!1,this.autoDestroy=!!Te.autoDestroy,this.destroyed=!1,this.defaultEncoding=Te.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Te.encoding&&(j||(j=string_decoder.StringDecoder),this.decoder=new j(Te.encoding),this.encoding=Te.encoding)}function ce(Te){if(r=r||require_stream_duplex(),!(this instanceof ce))return new ce(Te);var he=this instanceof r;this._readableState=new ae(Te,this,he),this.readable=!0,Te&&(typeof Te.read=="function"&&(this._read=Te.read),typeof Te.destroy=="function"&&(this._destroy=Te.destroy)),_.call(this)}Object.defineProperty(ce.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(he){this._readableState&&(this._readableState.destroyed=he)}}),ce.prototype.destroy=I.destroy,ce.prototype._undestroy=I.undestroy,ce.prototype._destroy=function(Te,he){he(Te)},ce.prototype.push=function(Te,he){var xe=this._readableState,fe;return xe.objectMode?fe=!0:typeof Te=="string"&&(he=he||xe.defaultEncoding,he!==xe.encoding&&(Te=x.from(Te,he),he=""),fe=!0),ve(this,Te,he,!1,fe)},ce.prototype.unshift=function(Te){return ve(this,Te,null,!0,!1)};function ve(Te,he,xe,fe,Be){B("readableAddChunk",he);var Le=Te._readableState;if(he===null)Le.reading=!1,ee(Te,Le);else{var Ve;if(Be||(Ve=G(Le,he)),Ve)X(Te,Ve);else if(Le.objectMode||he&&he.length>0)if(typeof he!="string"&&!Le.objectMode&&Object.getPrototypeOf(he)!==x.prototype&&(he=E(he)),fe)Le.endEmitted?X(Te,new L):pe(Te,Le,he,!0);else if(Le.ended)X(Te,new F);else{if(Le.destroyed)return!1;Le.reading=!1,Le.decoder&&!xe?(he=Le.decoder.write(he),Le.objectMode||he.length!==0?pe(Te,Le,he,!1):ie(Te,Le)):pe(Te,Le,he,!1)}else fe||(Le.reading=!1,ie(Te,Le))}return!Le.ended&&(Le.length<Le.highWaterMark||Le.length===0)}function pe(Te,he,xe,fe){he.flowing&&he.length===0&&!he.sync?(he.awaitDrain=0,Te.emit("data",xe)):(he.length+=he.objectMode?1:xe.length,fe?he.buffer.unshift(xe):he.buffer.push(xe),he.needReadable&&re(Te)),ie(Te,he)}function G(Te,he){var xe;return!C(he)&&typeof he!="string"&&he!==void 0&&!Te.objectMode&&(xe=new O("chunk",["string","Buffer","Uint8Array"],he)),xe}ce.prototype.isPaused=function(){return this._readableState.flowing===!1},ce.prototype.setEncoding=function(Te){j||(j=string_decoder.StringDecoder);var he=new j(Te);this._readableState.decoder=he,this._readableState.encoding=this._readableState.decoder.encoding;for(var xe=this._readableState.buffer.head,fe="";xe!==null;)fe+=he.write(xe.data),xe=xe.next;return this._readableState.buffer.clear(),fe!==""&&this._readableState.buffer.push(fe),this._readableState.length=fe.length,this};var Y=1073741824;function U(Te){return Te>=Y?Te=Y:(Te--,Te|=Te>>>1,Te|=Te>>>2,Te|=Te>>>4,Te|=Te>>>8,Te|=Te>>>16,Te++),Te}function W(Te,he){return Te<=0||he.length===0&&he.ended?0:he.objectMode?1:Te!==Te?he.flowing&&he.length?he.buffer.head.data.length:he.length:(Te>he.highWaterMark&&(he.highWaterMark=U(Te)),Te<=he.length?Te:he.ended?he.length:(he.needReadable=!0,0))}ce.prototype.read=function(Te){B("read",Te),Te=parseInt(Te,10);var he=this._readableState,xe=Te;if(Te!==0&&(he.emittedReadable=!1),Te===0&&he.needReadable&&((he.highWaterMark!==0?he.length>=he.highWaterMark:he.length>0)||he.ended))return B("read: emitReadable",he.length,he.ended),he.length===0&&he.ended?Ee(this):re(this),null;if(Te=W(Te,he),Te===0&&he.ended)return he.length===0&&Ee(this),null;var fe=he.needReadable;B("need readable",fe),(he.length===0||he.length-Te<he.highWaterMark)&&(fe=!0,B("length less than watermark",fe)),he.ended||he.reading?(fe=!1,B("reading or ended",fe)):fe&&(B("do read"),he.reading=!0,he.sync=!0,he.length===0&&(he.needReadable=!0),this._read(he.highWaterMark),he.sync=!1,he.reading||(Te=W(xe,he)));var Be;return Te>0?Be=ye(Te,he):Be=null,Be===null?(he.needReadable=he.length<=he.highWaterMark,Te=0):(he.length-=Te,he.awaitDrain=0),he.length===0&&(he.ended||(he.needReadable=!0),xe!==Te&&he.ended&&Ee(this)),Be!==null&&this.emit("data",Be),Be};function ee(Te,he){if(B("onEofChunk"),!he.ended){if(he.decoder){var xe=he.decoder.end();xe&&xe.length&&(he.buffer.push(xe),he.length+=he.objectMode?1:xe.length)}he.ended=!0,he.sync?re(Te):(he.needReadable=!1,he.emittedReadable||(he.emittedReadable=!0,oe(Te)))}}function re(Te){var he=Te._readableState;B("emitReadable",he.needReadable,he.emittedReadable),he.needReadable=!1,he.emittedReadable||(B("emitReadable",he.flowing),he.emittedReadable=!0,browser$1$1.nextTick(oe,Te))}function oe(Te){var he=Te._readableState;B("emitReadable_",he.destroyed,he.length,he.ended),!he.destroyed&&(he.length||he.ended)&&(Te.emit("readable"),he.emittedReadable=!1),he.needReadable=!he.flowing&&!he.ended&&he.length<=he.highWaterMark,ge(Te)}function ie(Te,he){he.readingMore||(he.readingMore=!0,browser$1$1.nextTick(ne,Te,he))}function ne(Te,he){for(;!he.reading&&!he.ended&&(he.length<he.highWaterMark||he.flowing&&he.length===0);){var xe=he.length;if(B("maybeReadMore read 0"),Te.read(0),xe===he.length)break}he.readingMore=!1}ce.prototype._read=function(Te){X(this,new M("_read()"))},ce.prototype.pipe=function(Te,he){var xe=this,fe=this._readableState;switch(fe.pipesCount){case 0:fe.pipes=Te;break;case 1:fe.pipes=[fe.pipes,Te];break;default:fe.pipes.push(Te);break}fe.pipesCount+=1,B("pipe count=%d opts=%j",fe.pipesCount,he);var Be=(!he||he.end!==!1)&&Te!==browser$1$1.stdout&&Te!==browser$1$1.stderr,Le=Be?Ie:ht;fe.endEmitted?browser$1$1.nextTick(Le):xe.once("end",Le),Te.on("unpipe",Ve);function Ve(Oe,we){B("onunpipe"),Oe===xe&&we&&we.hasUnpiped===!1&&(we.hasUnpiped=!0,We())}function Ie(){B("onend"),Te.end()}var Me=te(xe);Te.on("drain",Me);var He=!1;function We(){B("cleanup"),Te.removeListener("close",et),Te.removeListener("finish",ot),Te.removeListener("drain",Me),Te.removeListener("error",Ge),Te.removeListener("unpipe",Ve),xe.removeListener("end",Ie),xe.removeListener("end",ht),xe.removeListener("data",Ue),He=!0,fe.awaitDrain&&(!Te._writableState||Te._writableState.needDrain)&&Me()}xe.on("data",Ue);function Ue(Oe){B("ondata");var we=Te.write(Oe);B("dest.write",we),we===!1&&((fe.pipesCount===1&&fe.pipes===Te||fe.pipesCount>1&&Ne(fe.pipes,Te)!==-1)&&!He&&(B("false write response, pause",fe.awaitDrain),fe.awaitDrain++),xe.pause())}function Ge(Oe){B("onerror",Oe),ht(),Te.removeListener("error",Ge),n(Te,"error")===0&&X(Te,Oe)}Z(Te,"error",Ge);function et(){Te.removeListener("finish",ot),ht()}Te.once("close",et);function ot(){B("onfinish"),Te.removeListener("close",et),ht()}Te.once("finish",ot);function ht(){B("unpipe"),xe.unpipe(Te)}return Te.emit("pipe",xe),fe.flowing||(B("pipe resume"),xe.resume()),Te};function te(Te){return function(){var xe=Te._readableState;B("pipeOnDrain",xe.awaitDrain),xe.awaitDrain&&xe.awaitDrain--,xe.awaitDrain===0&&n(Te,"data")&&(xe.flowing=!0,ge(Te))}}ce.prototype.unpipe=function(Te){var he=this._readableState,xe={hasUnpiped:!1};if(he.pipesCount===0)return this;if(he.pipesCount===1)return Te&&Te!==he.pipes?this:(Te||(Te=he.pipes),he.pipes=null,he.pipesCount=0,he.flowing=!1,Te&&Te.emit("unpipe",this,xe),this);if(!Te){var fe=he.pipes,Be=he.pipesCount;he.pipes=null,he.pipesCount=0,he.flowing=!1;for(var Le=0;Le<Be;Le++)fe[Le].emit("unpipe",this,{hasUnpiped:!1});return this}var Ve=Ne(he.pipes,Te);return Ve===-1?this:(he.pipes.splice(Ve,1),he.pipesCount-=1,he.pipesCount===1&&(he.pipes=he.pipes[0]),Te.emit("unpipe",this,xe),this)},ce.prototype.on=function(Te,he){var xe=_.prototype.on.call(this,Te,he),fe=this._readableState;return Te==="data"?(fe.readableListening=this.listenerCount("readable")>0,fe.flowing!==!1&&this.resume()):Te==="readable"&&!fe.endEmitted&&!fe.readableListening&&(fe.readableListening=fe.needReadable=!0,fe.flowing=!1,fe.emittedReadable=!1,B("on readable",fe.length,fe.reading),fe.length?re(this):fe.reading||browser$1$1.nextTick(le,this)),xe},ce.prototype.addListener=ce.prototype.on,ce.prototype.removeListener=function(Te,he){var xe=_.prototype.removeListener.call(this,Te,he);return Te==="readable"&&browser$1$1.nextTick(K,this),xe},ce.prototype.removeAllListeners=function(Te){var he=_.prototype.removeAllListeners.apply(this,arguments);return(Te==="readable"||Te===void 0)&&browser$1$1.nextTick(K,this),he};function K(Te){var he=Te._readableState;he.readableListening=Te.listenerCount("readable")>0,he.resumeScheduled&&!he.paused?he.flowing=!0:Te.listenerCount("data")>0&&Te.resume()}function le(Te){B("readable nexttick read 0"),Te.read(0)}ce.prototype.resume=function(){var Te=this._readableState;return Te.flowing||(B("resume"),Te.flowing=!Te.readableListening,ue(this,Te)),Te.paused=!1,this};function ue(Te,he){he.resumeScheduled||(he.resumeScheduled=!0,browser$1$1.nextTick(be,Te,he))}function be(Te,he){B("resume",he.reading),he.reading||Te.read(0),he.resumeScheduled=!1,Te.emit("resume"),ge(Te),he.flowing&&!he.reading&&Te.read(0)}ce.prototype.pause=function(){return B("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(B("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ge(Te){var he=Te._readableState;for(B("flow",he.flowing);he.flowing&&Te.read()!==null;);}ce.prototype.wrap=function(Te){var he=this,xe=this._readableState,fe=!1;Te.on("end",function(){if(B("wrapped end"),xe.decoder&&!xe.ended){var Ve=xe.decoder.end();Ve&&Ve.length&&he.push(Ve)}he.push(null)}),Te.on("data",function(Ve){if(B("wrapped data"),xe.decoder&&(Ve=xe.decoder.write(Ve)),!(xe.objectMode&&Ve==null)&&!(!xe.objectMode&&(!Ve||!Ve.length))){var Ie=he.push(Ve);Ie||(fe=!0,Te.pause())}});for(var Be in Te)this[Be]===void 0&&typeof Te[Be]=="function"&&(this[Be]=function(Ie){return function(){return Te[Ie].apply(Te,arguments)}}(Be));for(var Le=0;Le<J.length;Le++)Te.on(J[Le],this.emit.bind(this,J[Le]));return this._read=function(Ve){B("wrapped _read",Ve),fe&&(fe=!1,Te.resume())},this},typeof Symbol=="function"&&(ce.prototype[Symbol.asyncIterator]=function(){return q===void 0&&(q=requireAsync_iterator()),q(this)}),Object.defineProperty(ce.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ce.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ce.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(he){this._readableState&&(this._readableState.flowing=he)}}),ce._fromList=ye,Object.defineProperty(ce.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ye(Te,he){if(he.length===0)return null;var xe;return he.objectMode?xe=he.buffer.shift():!Te||Te>=he.length?(he.decoder?xe=he.buffer.join(""):he.buffer.length===1?xe=he.buffer.first():xe=he.buffer.concat(he.length),he.buffer.clear()):xe=he.buffer.consume(Te,he.decoder),xe}function Ee(Te){var he=Te._readableState;B("endReadable",he.endEmitted),he.endEmitted||(he.ended=!0,browser$1$1.nextTick(Re,he,Te))}function Re(Te,he){if(B("endReadableNT",Te.endEmitted,Te.length),!Te.endEmitted&&Te.length===0&&(Te.endEmitted=!0,he.readable=!1,he.emit("end"),Te.autoDestroy)){var xe=he._writableState;(!xe||xe.autoDestroy&&xe.finished)&&he.destroy()}}typeof Symbol=="function"&&(ce.from=function(Te,he){return H===void 0&&(H=requireFromBrowser()),H(ce,Te,he)});function Ne(Te,he){for(var xe=0,fe=Te.length;xe<fe;xe++)if(Te[xe]===he)return xe;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=T;var r=requireErrorsBrowser().codes,n=r.ERR_METHOD_NOT_IMPLEMENTED,_=r.ERR_MULTIPLE_CALLBACK,x=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,S=r.ERR_TRANSFORM_WITH_LENGTH_0,E=require_stream_duplex();inherits_browserExports(T,E);function C(I,N){var V=this._transformState;V.transforming=!1;var D=V.writecb;if(D===null)return this.emit("error",new _);V.writechunk=null,V.writecb=null,N!=null&&this.push(N),D(I);var O=this._readableState;O.reading=!1,(O.needReadable||O.length<O.highWaterMark)&&this._read(O.highWaterMark)}function T(I){if(!(this instanceof T))return new T(I);E.call(this,I),this._transformState={afterTransform:C.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,I&&(typeof I.transform=="function"&&(this._transform=I.transform),typeof I.flush=="function"&&(this._flush=I.flush)),this.on("prefinish",B)}function B(){var I=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(N,V){A(I,N,V)}):A(this,null,null)}T.prototype.push=function(I,N){return this._transformState.needTransform=!1,E.prototype.push.call(this,I,N)},T.prototype._transform=function(I,N,V){V(new n("_transform()"))},T.prototype._write=function(I,N,V){var D=this._transformState;if(D.writecb=V,D.writechunk=I,D.writeencoding=N,!D.transforming){var O=this._readableState;(D.needTransform||O.needReadable||O.length<O.highWaterMark)&&this._read(O.highWaterMark)}},T.prototype._read=function(I){var N=this._transformState;N.writechunk!==null&&!N.transforming?(N.transforming=!0,this._transform(N.writechunk,N.writeencoding,N.afterTransform)):N.needTransform=!0},T.prototype._destroy=function(I,N){E.prototype._destroy.call(this,I,function(V){N(V)})};function A(I,N,V){if(N)return I.emit("error",N);if(V!=null&&I.push(V),I._writableState.length)throw new S;if(I._transformState.transforming)throw new x;return I.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=n;var r=require_stream_transform();inherits_browserExports(n,r);function n(_){if(!(this instanceof n))return new n(_);r.call(this,_)}return n.prototype._transform=function(_,x,S){S(null,_)},_stream_passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var r;function n(V){var D=!1;return function(){D||(D=!0,V.apply(void 0,arguments))}}var _=requireErrorsBrowser().codes,x=_.ERR_MISSING_ARGS,S=_.ERR_STREAM_DESTROYED;function E(V){if(V)throw V}function C(V){return V.setHeader&&typeof V.abort=="function"}function T(V,D,O,F){F=n(F);var M=!1;V.on("close",function(){M=!0}),r===void 0&&(r=requireEndOfStream()),r(V,{readable:D,writable:O},function(j){if(j)return F(j);M=!0,F()});var L=!1;return function(j){if(!M&&!L){if(L=!0,C(V))return V.abort();if(typeof V.destroy=="function")return V.destroy();F(j||new S("pipe"))}}}function B(V){V()}function A(V,D){return V.pipe(D)}function I(V){return!V.length||typeof V[V.length-1]!="function"?E:V.pop()}function N(){for(var V=arguments.length,D=new Array(V),O=0;O<V;O++)D[O]=arguments[O];var F=I(D);if(Array.isArray(D[0])&&(D=D[0]),D.length<2)throw new x("streams");var M,L=D.map(function(j,q){var H=q<D.length-1,X=q>0;return T(j,H,X,function(J){M||(M=J),J&&L.forEach(B),!H&&(L.forEach(B),F(M))})});return D.reduce(A)}return pipeline_1=N,pipeline_1}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(r,n){n=r.exports=require_stream_readable(),n.Stream=n,n.Readable=n,n.Writable=require_stream_writable(),n.Duplex=require_stream_duplex(),n.Transform=require_stream_transform(),n.PassThrough=require_stream_passthrough(),n.finished=requireEndOfStream(),n.pipeline=requirePipeline()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var r=safeBufferExports.Buffer,n=requireReadableBrowser().Transform,_=inherits_browserExports;function x(E,C){if(!r.isBuffer(E)&&typeof E!="string")throw new TypeError(C+" must be a string or a buffer")}function S(E){n.call(this),this._block=r.allocUnsafe(E),this._blockSize=E,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return _(S,n),S.prototype._transform=function(E,C,T){var B=null;try{this.update(E,C)}catch(A){B=A}T(B)},S.prototype._flush=function(E){var C=null;try{this.push(this.digest())}catch(T){C=T}E(C)},S.prototype.update=function(E,C){if(x(E,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(E)||(E=r.from(E,C));for(var T=this._block,B=0;this._blockOffset+E.length-B>=this._blockSize;){for(var A=this._blockOffset;A<this._blockSize;)T[A++]=E[B++];this._update(),this._blockOffset=0}for(;B<E.length;)T[this._blockOffset++]=E[B++];for(var I=0,N=E.length*8;N>0;++I)this._length[I]+=N,N=this._length[I]/4294967296|0,N>0&&(this._length[I]-=4294967296*N);return this},S.prototype._update=function(){throw new Error("_update is not implemented")},S.prototype.digest=function(E){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var C=this._digest();E!==void 0&&(C=C.toString(E)),this._block.fill(0),this._blockOffset=0;for(var T=0;T<4;++T)this._length[T]=0;return C},S.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=S,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var r=inherits_browserExports,n=requireHashBase(),_=safeBufferExports.Buffer,x=new Array(16);function S(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}r(S,n),S.prototype._update=function(){for(var I=x,N=0;N<16;++N)I[N]=this._block.readInt32LE(N*4);var V=this._a,D=this._b,O=this._c,F=this._d;V=C(V,D,O,F,I[0],3614090360,7),F=C(F,V,D,O,I[1],3905402710,12),O=C(O,F,V,D,I[2],606105819,17),D=C(D,O,F,V,I[3],3250441966,22),V=C(V,D,O,F,I[4],4118548399,7),F=C(F,V,D,O,I[5],1200080426,12),O=C(O,F,V,D,I[6],2821735955,17),D=C(D,O,F,V,I[7],4249261313,22),V=C(V,D,O,F,I[8],1770035416,7),F=C(F,V,D,O,I[9],2336552879,12),O=C(O,F,V,D,I[10],4294925233,17),D=C(D,O,F,V,I[11],2304563134,22),V=C(V,D,O,F,I[12],1804603682,7),F=C(F,V,D,O,I[13],4254626195,12),O=C(O,F,V,D,I[14],2792965006,17),D=C(D,O,F,V,I[15],1236535329,22),V=T(V,D,O,F,I[1],4129170786,5),F=T(F,V,D,O,I[6],3225465664,9),O=T(O,F,V,D,I[11],643717713,14),D=T(D,O,F,V,I[0],3921069994,20),V=T(V,D,O,F,I[5],3593408605,5),F=T(F,V,D,O,I[10],38016083,9),O=T(O,F,V,D,I[15],3634488961,14),D=T(D,O,F,V,I[4],3889429448,20),V=T(V,D,O,F,I[9],568446438,5),F=T(F,V,D,O,I[14],3275163606,9),O=T(O,F,V,D,I[3],4107603335,14),D=T(D,O,F,V,I[8],1163531501,20),V=T(V,D,O,F,I[13],2850285829,5),F=T(F,V,D,O,I[2],4243563512,9),O=T(O,F,V,D,I[7],1735328473,14),D=T(D,O,F,V,I[12],2368359562,20),V=B(V,D,O,F,I[5],4294588738,4),F=B(F,V,D,O,I[8],2272392833,11),O=B(O,F,V,D,I[11],1839030562,16),D=B(D,O,F,V,I[14],4259657740,23),V=B(V,D,O,F,I[1],2763975236,4),F=B(F,V,D,O,I[4],1272893353,11),O=B(O,F,V,D,I[7],4139469664,16),D=B(D,O,F,V,I[10],3200236656,23),V=B(V,D,O,F,I[13],681279174,4),F=B(F,V,D,O,I[0],3936430074,11),O=B(O,F,V,D,I[3],3572445317,16),D=B(D,O,F,V,I[6],76029189,23),V=B(V,D,O,F,I[9],3654602809,4),F=B(F,V,D,O,I[12],3873151461,11),O=B(O,F,V,D,I[15],530742520,16),D=B(D,O,F,V,I[2],3299628645,23),V=A(V,D,O,F,I[0],4096336452,6),F=A(F,V,D,O,I[7],1126891415,10),O=A(O,F,V,D,I[14],2878612391,15),D=A(D,O,F,V,I[5],4237533241,21),V=A(V,D,O,F,I[12],1700485571,6),F=A(F,V,D,O,I[3],2399980690,10),O=A(O,F,V,D,I[10],4293915773,15),D=A(D,O,F,V,I[1],2240044497,21),V=A(V,D,O,F,I[8],1873313359,6),F=A(F,V,D,O,I[15],4264355552,10),O=A(O,F,V,D,I[6],2734768916,15),D=A(D,O,F,V,I[13],1309151649,21),V=A(V,D,O,F,I[4],4149444226,6),F=A(F,V,D,O,I[11],3174756917,10),O=A(O,F,V,D,I[2],718787259,15),D=A(D,O,F,V,I[9],3951481745,21),this._a=this._a+V|0,this._b=this._b+D|0,this._c=this._c+O|0,this._d=this._d+F|0},S.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var I=_.allocUnsafe(16);return I.writeInt32LE(this._a,0),I.writeInt32LE(this._b,4),I.writeInt32LE(this._c,8),I.writeInt32LE(this._d,12),I};function E(I,N){return I<<N|I>>>32-N}function C(I,N,V,D,O,F,M){return E(I+(N&V|~N&D)+O+F|0,M)+N|0}function T(I,N,V,D,O,F,M){return E(I+(N&D|V&~D)+O+F|0,M)+N|0}function B(I,N,V,D,O,F,M){return E(I+(N^V^D)+O+F|0,M)+N|0}function A(I,N,V,D,O,F,M){return E(I+(V^(N|~D))+O+F|0,M)+N|0}return md5_js=S,md5_js}var ripemd160,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1;var r=buffer$3.Buffer,n=inherits_browserExports,_=requireHashBase(),x=new Array(16),S=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],E=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],C=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],T=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],B=[0,1518500249,1859775393,2400959708,2840853838],A=[1352829926,1548603684,1836072691,2053994217,0];function I(){_.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}n(I,_),I.prototype._update=function(){for(var L=x,j=0;j<16;++j)L[j]=this._block.readInt32LE(j*4);for(var q=this._a|0,H=this._b|0,X=this._c|0,J=this._d|0,Z=this._e|0,ae=this._a|0,ce=this._b|0,ve=this._c|0,pe=this._d|0,G=this._e|0,Y=0;Y<80;Y+=1){var U,W;Y<16?(U=V(q,H,X,J,Z,L[S[Y]],B[0],C[Y]),W=M(ae,ce,ve,pe,G,L[E[Y]],A[0],T[Y])):Y<32?(U=D(q,H,X,J,Z,L[S[Y]],B[1],C[Y]),W=F(ae,ce,ve,pe,G,L[E[Y]],A[1],T[Y])):Y<48?(U=O(q,H,X,J,Z,L[S[Y]],B[2],C[Y]),W=O(ae,ce,ve,pe,G,L[E[Y]],A[2],T[Y])):Y<64?(U=F(q,H,X,J,Z,L[S[Y]],B[3],C[Y]),W=D(ae,ce,ve,pe,G,L[E[Y]],A[3],T[Y])):(U=M(q,H,X,J,Z,L[S[Y]],B[4],C[Y]),W=V(ae,ce,ve,pe,G,L[E[Y]],A[4],T[Y])),q=Z,Z=J,J=N(X,10),X=H,H=U,ae=G,G=pe,pe=N(ve,10),ve=ce,ce=W}var ee=this._b+X+pe|0;this._b=this._c+J+G|0,this._c=this._d+Z+ae|0,this._d=this._e+q+ce|0,this._e=this._a+H+ve|0,this._a=ee},I.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var L=r.alloc?r.alloc(20):new r(20);return L.writeInt32LE(this._a,0),L.writeInt32LE(this._b,4),L.writeInt32LE(this._c,8),L.writeInt32LE(this._d,12),L.writeInt32LE(this._e,16),L};function N(L,j){return L<<j|L>>>32-j}function V(L,j,q,H,X,J,Z,ae){return N(L+(j^q^H)+J+Z|0,ae)+X|0}function D(L,j,q,H,X,J,Z,ae){return N(L+(j&q|~j&H)+J+Z|0,ae)+X|0}function O(L,j,q,H,X,J,Z,ae){return N(L+((j|~q)^H)+J+Z|0,ae)+X|0}function F(L,j,q,H,X,J,Z,ae){return N(L+(j&H|q&~H)+J+Z|0,ae)+X|0}function M(L,j,q,H,X,J,Z,ae){return N(L+(j^(q|~H))+J+Z|0,ae)+X|0}return ripemd160=I,ripemd160}var sha_js={exports:{}},hash$3,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$3;hasRequiredHash$1=1;var r=safeBufferExports.Buffer;function n(_,x){this._block=r.alloc(_),this._finalSize=x,this._blockSize=_,this._len=0}return n.prototype.update=function(_,x){typeof _=="string"&&(x=x||"utf8",_=r.from(_,x));for(var S=this._block,E=this._blockSize,C=_.length,T=this._len,B=0;B<C;){for(var A=T%E,I=Math.min(C-B,E-A),N=0;N<I;N++)S[A+N]=_[B+N];T+=I,B+=I,T%E===0&&this._update(S)}return this._len+=C,this},n.prototype.digest=function(_){var x=this._len%this._blockSize;this._block[x]=128,this._block.fill(0,x+1),x>=this._finalSize&&(this._update(this._block),this._block.fill(0));var S=this._len*8;if(S<=4294967295)this._block.writeUInt32BE(S,this._blockSize-4);else{var E=(S&4294967295)>>>0,C=(S-E)/4294967296;this._block.writeUInt32BE(C,this._blockSize-8),this._block.writeUInt32BE(E,this._blockSize-4)}this._update(this._block);var T=this._hash();return _?T.toString(_):T},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$3=n,hash$3}var sha$2,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$2;hasRequiredSha$1=1;var r=inherits_browserExports,n=requireHash$1(),_=safeBufferExports.Buffer,x=[1518500249,1859775393,-1894007588,-899497514],S=new Array(80);function E(){this.init(),this._w=S,n.call(this,64,56)}r(E,n),E.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function C(A){return A<<5|A>>>27}function T(A){return A<<30|A>>>2}function B(A,I,N,V){return A===0?I&N|~I&V:A===2?I&N|I&V|N&V:I^N^V}return E.prototype._update=function(A){for(var I=this._w,N=this._a|0,V=this._b|0,D=this._c|0,O=this._d|0,F=this._e|0,M=0;M<16;++M)I[M]=A.readInt32BE(M*4);for(;M<80;++M)I[M]=I[M-3]^I[M-8]^I[M-14]^I[M-16];for(var L=0;L<80;++L){var j=~~(L/20),q=C(N)+B(j,V,D,O)+F+I[L]+x[j]|0;F=O,O=D,D=T(V),V=N,N=q}this._a=N+this._a|0,this._b=V+this._b|0,this._c=D+this._c|0,this._d=O+this._d|0,this._e=F+this._e|0},E.prototype._hash=function(){var A=_.allocUnsafe(20);return A.writeInt32BE(this._a|0,0),A.writeInt32BE(this._b|0,4),A.writeInt32BE(this._c|0,8),A.writeInt32BE(this._d|0,12),A.writeInt32BE(this._e|0,16),A},sha$2=E,sha$2}var sha1$1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1$1;hasRequiredSha1=1;var r=inherits_browserExports,n=requireHash$1(),_=safeBufferExports.Buffer,x=[1518500249,1859775393,-1894007588,-899497514],S=new Array(80);function E(){this.init(),this._w=S,n.call(this,64,56)}r(E,n),E.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function C(I){return I<<1|I>>>31}function T(I){return I<<5|I>>>27}function B(I){return I<<30|I>>>2}function A(I,N,V,D){return I===0?N&V|~N&D:I===2?N&V|N&D|V&D:N^V^D}return E.prototype._update=function(I){for(var N=this._w,V=this._a|0,D=this._b|0,O=this._c|0,F=this._d|0,M=this._e|0,L=0;L<16;++L)N[L]=I.readInt32BE(L*4);for(;L<80;++L)N[L]=C(N[L-3]^N[L-8]^N[L-14]^N[L-16]);for(var j=0;j<80;++j){var q=~~(j/20),H=T(V)+A(q,D,O,F)+M+N[j]+x[q]|0;M=F,F=O,O=B(D),D=V,V=H}this._a=V+this._a|0,this._b=D+this._b|0,this._c=O+this._c|0,this._d=F+this._d|0,this._e=M+this._e|0},E.prototype._hash=function(){var I=_.allocUnsafe(20);return I.writeInt32BE(this._a|0,0),I.writeInt32BE(this._b|0,4),I.writeInt32BE(this._c|0,8),I.writeInt32BE(this._d|0,12),I.writeInt32BE(this._e|0,16),I},sha1$1=E,sha1$1}var sha256$6,hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$6;hasRequiredSha256=1;var r=inherits_browserExports,n=requireHash$1(),_=safeBufferExports.Buffer,x=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],S=new Array(64);function E(){this.init(),this._w=S,n.call(this,64,56)}r(E,n),E.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function C(V,D,O){return O^V&(D^O)}function T(V,D,O){return V&D|O&(V|D)}function B(V){return(V>>>2|V<<30)^(V>>>13|V<<19)^(V>>>22|V<<10)}function A(V){return(V>>>6|V<<26)^(V>>>11|V<<21)^(V>>>25|V<<7)}function I(V){return(V>>>7|V<<25)^(V>>>18|V<<14)^V>>>3}function N(V){return(V>>>17|V<<15)^(V>>>19|V<<13)^V>>>10}return E.prototype._update=function(V){for(var D=this._w,O=this._a|0,F=this._b|0,M=this._c|0,L=this._d|0,j=this._e|0,q=this._f|0,H=this._g|0,X=this._h|0,J=0;J<16;++J)D[J]=V.readInt32BE(J*4);for(;J<64;++J)D[J]=N(D[J-2])+D[J-7]+I(D[J-15])+D[J-16]|0;for(var Z=0;Z<64;++Z){var ae=X+A(j)+C(j,q,H)+x[Z]+D[Z]|0,ce=B(O)+T(O,F,M)|0;X=H,H=q,q=j,j=L+ae|0,L=M,M=F,F=O,O=ae+ce|0}this._a=O+this._a|0,this._b=F+this._b|0,this._c=M+this._c|0,this._d=L+this._d|0,this._e=j+this._e|0,this._f=q+this._f|0,this._g=H+this._g|0,this._h=X+this._h|0},E.prototype._hash=function(){var V=_.allocUnsafe(32);return V.writeInt32BE(this._a,0),V.writeInt32BE(this._b,4),V.writeInt32BE(this._c,8),V.writeInt32BE(this._d,12),V.writeInt32BE(this._e,16),V.writeInt32BE(this._f,20),V.writeInt32BE(this._g,24),V.writeInt32BE(this._h,28),V},sha256$6=E,sha256$6}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var r=inherits_browserExports,n=requireSha256(),_=requireHash$1(),x=safeBufferExports.Buffer,S=new Array(64);function E(){this.init(),this._w=S,_.call(this,64,56)}return r(E,n),E.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},E.prototype._hash=function(){var C=x.allocUnsafe(28);return C.writeInt32BE(this._a,0),C.writeInt32BE(this._b,4),C.writeInt32BE(this._c,8),C.writeInt32BE(this._d,12),C.writeInt32BE(this._e,16),C.writeInt32BE(this._f,20),C.writeInt32BE(this._g,24),C},sha224$1=E,sha224$1}var sha512$3,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$3;hasRequiredSha512=1;var r=inherits_browserExports,n=requireHash$1(),_=safeBufferExports.Buffer,x=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],S=new Array(160);function E(){this.init(),this._w=S,n.call(this,128,112)}r(E,n),E.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function C(F,M,L){return L^F&(M^L)}function T(F,M,L){return F&M|L&(F|M)}function B(F,M){return(F>>>28|M<<4)^(M>>>2|F<<30)^(M>>>7|F<<25)}function A(F,M){return(F>>>14|M<<18)^(F>>>18|M<<14)^(M>>>9|F<<23)}function I(F,M){return(F>>>1|M<<31)^(F>>>8|M<<24)^F>>>7}function N(F,M){return(F>>>1|M<<31)^(F>>>8|M<<24)^(F>>>7|M<<25)}function V(F,M){return(F>>>19|M<<13)^(M>>>29|F<<3)^F>>>6}function D(F,M){return(F>>>19|M<<13)^(M>>>29|F<<3)^(F>>>6|M<<26)}function O(F,M){return F>>>0<M>>>0?1:0}return E.prototype._update=function(F){for(var M=this._w,L=this._ah|0,j=this._bh|0,q=this._ch|0,H=this._dh|0,X=this._eh|0,J=this._fh|0,Z=this._gh|0,ae=this._hh|0,ce=this._al|0,ve=this._bl|0,pe=this._cl|0,G=this._dl|0,Y=this._el|0,U=this._fl|0,W=this._gl|0,ee=this._hl|0,re=0;re<32;re+=2)M[re]=F.readInt32BE(re*4),M[re+1]=F.readInt32BE(re*4+4);for(;re<160;re+=2){var oe=M[re-30],ie=M[re-15*2+1],ne=I(oe,ie),te=N(ie,oe);oe=M[re-2*2],ie=M[re-2*2+1];var K=V(oe,ie),le=D(ie,oe),ue=M[re-7*2],be=M[re-7*2+1],ge=M[re-16*2],ye=M[re-16*2+1],Ee=te+be|0,Re=ne+ue+O(Ee,te)|0;Ee=Ee+le|0,Re=Re+K+O(Ee,le)|0,Ee=Ee+ye|0,Re=Re+ge+O(Ee,ye)|0,M[re]=Re,M[re+1]=Ee}for(var Ne=0;Ne<160;Ne+=2){Re=M[Ne],Ee=M[Ne+1];var Te=T(L,j,q),he=T(ce,ve,pe),xe=B(L,ce),fe=B(ce,L),Be=A(X,Y),Le=A(Y,X),Ve=x[Ne],Ie=x[Ne+1],Me=C(X,J,Z),He=C(Y,U,W),We=ee+Le|0,Ue=ae+Be+O(We,ee)|0;We=We+He|0,Ue=Ue+Me+O(We,He)|0,We=We+Ie|0,Ue=Ue+Ve+O(We,Ie)|0,We=We+Ee|0,Ue=Ue+Re+O(We,Ee)|0;var Ge=fe+he|0,et=xe+Te+O(Ge,fe)|0;ae=Z,ee=W,Z=J,W=U,J=X,U=Y,Y=G+We|0,X=H+Ue+O(Y,G)|0,H=q,G=pe,q=j,pe=ve,j=L,ve=ce,ce=We+Ge|0,L=Ue+et+O(ce,We)|0}this._al=this._al+ce|0,this._bl=this._bl+ve|0,this._cl=this._cl+pe|0,this._dl=this._dl+G|0,this._el=this._el+Y|0,this._fl=this._fl+U|0,this._gl=this._gl+W|0,this._hl=this._hl+ee|0,this._ah=this._ah+L+O(this._al,ce)|0,this._bh=this._bh+j+O(this._bl,ve)|0,this._ch=this._ch+q+O(this._cl,pe)|0,this._dh=this._dh+H+O(this._dl,G)|0,this._eh=this._eh+X+O(this._el,Y)|0,this._fh=this._fh+J+O(this._fl,U)|0,this._gh=this._gh+Z+O(this._gl,W)|0,this._hh=this._hh+ae+O(this._hl,ee)|0},E.prototype._hash=function(){var F=_.allocUnsafe(64);function M(L,j,q){F.writeInt32BE(L,q),F.writeInt32BE(j,q+4)}return M(this._ah,this._al,0),M(this._bh,this._bl,8),M(this._ch,this._cl,16),M(this._dh,this._dl,24),M(this._eh,this._el,32),M(this._fh,this._fl,40),M(this._gh,this._gl,48),M(this._hh,this._hl,56),F},sha512$3=E,sha512$3}var sha384$2,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$2;hasRequiredSha384=1;var r=inherits_browserExports,n=requireSha512(),_=requireHash$1(),x=safeBufferExports.Buffer,S=new Array(160);function E(){this.init(),this._w=S,_.call(this,128,112)}return r(E,n),E.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},E.prototype._hash=function(){var C=x.allocUnsafe(48);function T(B,A,I){C.writeInt32BE(B,I),C.writeInt32BE(A,I+4)}return T(this._ah,this._al,0),T(this._bh,this._bl,8),T(this._ch,this._cl,16),T(this._dh,this._dl,24),T(this._eh,this._el,32),T(this._fh,this._fl,40),C},sha384$2=E,sha384$2}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var r=sha_js.exports=function(_){_=_.toLowerCase();var x=r[_];if(!x)throw new Error(_+" is not supported (we accept pull requests)");return new x};return r.sha=requireSha$1(),r.sha1=requireSha1(),r.sha224=requireSha224(),r.sha256=requireSha256(),r.sha384=requireSha384(),r.sha512=requireSha512(),sha_js.exports}var util$7={},types$1={},toStr=Object.prototype.toString,fnToStr=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag=shams(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function(n){if(typeof n!="function")return!1;if(isFnRegex.test(fnToStr.call(n)))return!0;if(!hasToStringTag){var _=toStr.call(n);return _==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var x=getGeneratorFunc();GeneratorFunction=x?getProto(x):!1}return getProto(n)===GeneratorFunction};(function(r){var n=isArguments$2,_=isGeneratorFunction,x=whichTypedArray$2,S=isTypedArray$3;function E(Me){return Me.call.bind(Me)}var C=typeof BigInt<"u",T=typeof Symbol<"u",B=E(Object.prototype.toString),A=E(Number.prototype.valueOf),I=E(String.prototype.valueOf),N=E(Boolean.prototype.valueOf);if(C)var V=E(BigInt.prototype.valueOf);if(T)var D=E(Symbol.prototype.valueOf);function O(Me,He){if(typeof Me!="object")return!1;try{return He(Me),!0}catch{return!1}}r.isArgumentsObject=n,r.isGeneratorFunction=_,r.isTypedArray=S;function F(Me){return typeof Promise<"u"&&Me instanceof Promise||Me!==null&&typeof Me=="object"&&typeof Me.then=="function"&&typeof Me.catch=="function"}r.isPromise=F;function M(Me){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(Me):S(Me)||le(Me)}r.isArrayBufferView=M;function L(Me){return x(Me)==="Uint8Array"}r.isUint8Array=L;function j(Me){return x(Me)==="Uint8ClampedArray"}r.isUint8ClampedArray=j;function q(Me){return x(Me)==="Uint16Array"}r.isUint16Array=q;function H(Me){return x(Me)==="Uint32Array"}r.isUint32Array=H;function X(Me){return x(Me)==="Int8Array"}r.isInt8Array=X;function J(Me){return x(Me)==="Int16Array"}r.isInt16Array=J;function Z(Me){return x(Me)==="Int32Array"}r.isInt32Array=Z;function ae(Me){return x(Me)==="Float32Array"}r.isFloat32Array=ae;function ce(Me){return x(Me)==="Float64Array"}r.isFloat64Array=ce;function ve(Me){return x(Me)==="BigInt64Array"}r.isBigInt64Array=ve;function pe(Me){return x(Me)==="BigUint64Array"}r.isBigUint64Array=pe;function G(Me){return B(Me)==="[object Map]"}G.working=typeof Map<"u"&&G(new Map);function Y(Me){return typeof Map>"u"?!1:G.working?G(Me):Me instanceof Map}r.isMap=Y;function U(Me){return B(Me)==="[object Set]"}U.working=typeof Set<"u"&&U(new Set);function W(Me){return typeof Set>"u"?!1:U.working?U(Me):Me instanceof Set}r.isSet=W;function ee(Me){return B(Me)==="[object WeakMap]"}ee.working=typeof WeakMap<"u"&&ee(new WeakMap);function re(Me){return typeof WeakMap>"u"?!1:ee.working?ee(Me):Me instanceof WeakMap}r.isWeakMap=re;function oe(Me){return B(Me)==="[object WeakSet]"}oe.working=typeof WeakSet<"u"&&oe(new WeakSet);function ie(Me){return oe(Me)}r.isWeakSet=ie;function ne(Me){return B(Me)==="[object ArrayBuffer]"}ne.working=typeof ArrayBuffer<"u"&&ne(new ArrayBuffer);function te(Me){return typeof ArrayBuffer>"u"?!1:ne.working?ne(Me):Me instanceof ArrayBuffer}r.isArrayBuffer=te;function K(Me){return B(Me)==="[object DataView]"}K.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&K(new DataView(new ArrayBuffer(1),0,1));function le(Me){return typeof DataView>"u"?!1:K.working?K(Me):Me instanceof DataView}r.isDataView=le;var ue=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function be(Me){return B(Me)==="[object SharedArrayBuffer]"}function ge(Me){return typeof ue>"u"?!1:(typeof be.working>"u"&&(be.working=be(new ue)),be.working?be(Me):Me instanceof ue)}r.isSharedArrayBuffer=ge;function ye(Me){return B(Me)==="[object AsyncFunction]"}r.isAsyncFunction=ye;function Ee(Me){return B(Me)==="[object Map Iterator]"}r.isMapIterator=Ee;function Re(Me){return B(Me)==="[object Set Iterator]"}r.isSetIterator=Re;function Ne(Me){return B(Me)==="[object Generator]"}r.isGeneratorObject=Ne;function Te(Me){return B(Me)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=Te;function he(Me){return O(Me,A)}r.isNumberObject=he;function xe(Me){return O(Me,I)}r.isStringObject=xe;function fe(Me){return O(Me,N)}r.isBooleanObject=fe;function Be(Me){return C&&O(Me,V)}r.isBigIntObject=Be;function Le(Me){return T&&O(Me,D)}r.isSymbolObject=Le;function Ve(Me){return he(Me)||xe(Me)||fe(Me)||Be(Me)||Le(Me)}r.isBoxedPrimitive=Ve;function Ie(Me){return typeof Uint8Array<"u"&&(te(Me)||ge(Me))}r.isAnyArrayBuffer=Ie,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(Me){Object.defineProperty(r,Me,{enumerable:!1,value:function(){throw new Error(Me+" is not supported in userland")}})})})(types$1);var isBufferBrowser=function(n){return n&&typeof n=="object"&&typeof n.copy=="function"&&typeof n.fill=="function"&&typeof n.readUInt8=="function"};(function(r){var n=Object.getOwnPropertyDescriptors||function(le){for(var ue=Object.keys(le),be={},ge=0;ge<ue.length;ge++)be[ue[ge]]=Object.getOwnPropertyDescriptor(le,ue[ge]);return be},_=/%[sdj%]/g;r.format=function(K){if(!X(K)){for(var le=[],ue=0;ue<arguments.length;ue++)le.push(C(arguments[ue]));return le.join(" ")}for(var ue=1,be=arguments,ge=be.length,ye=String(K).replace(_,function(Re){if(Re==="%%")return"%";if(ue>=ge)return Re;switch(Re){case"%s":return String(be[ue++]);case"%d":return Number(be[ue++]);case"%j":try{return JSON.stringify(be[ue++])}catch{return"[Circular]"}default:return Re}}),Ee=be[ue];ue<ge;Ee=be[++ue])j(Ee)||!ce(Ee)?ye+=" "+Ee:ye+=" "+C(Ee);return ye},r.deprecate=function(K,le){if(typeof browser$1$1<"u"&&browser$1$1.noDeprecation===!0)return K;if(typeof browser$1$1>"u")return function(){return r.deprecate(K,le).apply(this,arguments)};var ue=!1;function be(){if(!ue){if(browser$1$1.throwDeprecation)throw new Error(le);browser$1$1.traceDeprecation?console.trace(le):console.error(le),ue=!0}return K.apply(this,arguments)}return be};var x={},S=/^$/;if({}.NODE_DEBUG){var E={}.NODE_DEBUG;E=E.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),S=new RegExp("^"+E+"$","i")}r.debuglog=function(K){if(K=K.toUpperCase(),!x[K])if(S.test(K)){var le=browser$1$1.pid;x[K]=function(){var ue=r.format.apply(r,arguments);console.error("%s %d: %s",K,le,ue)}}else x[K]=function(){};return x[K]};function C(K,le){var ue={seen:[],stylize:B};return arguments.length>=3&&(ue.depth=arguments[2]),arguments.length>=4&&(ue.colors=arguments[3]),L(le)?ue.showHidden=le:le&&r._extend(ue,le),Z(ue.showHidden)&&(ue.showHidden=!1),Z(ue.depth)&&(ue.depth=2),Z(ue.colors)&&(ue.colors=!1),Z(ue.customInspect)&&(ue.customInspect=!0),ue.colors&&(ue.stylize=T),I(ue,K,ue.depth)}r.inspect=C,C.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},C.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function T(K,le){var ue=C.styles[le];return ue?"\x1B["+C.colors[ue][0]+"m"+K+"\x1B["+C.colors[ue][1]+"m":K}function B(K,le){return K}function A(K){var le={};return K.forEach(function(ue,be){le[ue]=!0}),le}function I(K,le,ue){if(K.customInspect&&le&&G(le.inspect)&&le.inspect!==r.inspect&&!(le.constructor&&le.constructor.prototype===le)){var be=le.inspect(ue,K);return X(be)||(be=I(K,be,ue)),be}var ge=N(K,le);if(ge)return ge;var ye=Object.keys(le),Ee=A(ye);if(K.showHidden&&(ye=Object.getOwnPropertyNames(le)),pe(le)&&(ye.indexOf("message")>=0||ye.indexOf("description")>=0))return V(le);if(ye.length===0){if(G(le)){var Re=le.name?": "+le.name:"";return K.stylize("[Function"+Re+"]","special")}if(ae(le))return K.stylize(RegExp.prototype.toString.call(le),"regexp");if(ve(le))return K.stylize(Date.prototype.toString.call(le),"date");if(pe(le))return V(le)}var Ne="",Te=!1,he=["{","}"];if(M(le)&&(Te=!0,he=["[","]"]),G(le)){var xe=le.name?": "+le.name:"";Ne=" [Function"+xe+"]"}if(ae(le)&&(Ne=" "+RegExp.prototype.toString.call(le)),ve(le)&&(Ne=" "+Date.prototype.toUTCString.call(le)),pe(le)&&(Ne=" "+V(le)),ye.length===0&&(!Te||le.length==0))return he[0]+Ne+he[1];if(ue<0)return ae(le)?K.stylize(RegExp.prototype.toString.call(le),"regexp"):K.stylize("[Object]","special");K.seen.push(le);var fe;return Te?fe=D(K,le,ue,Ee,ye):fe=ye.map(function(Be){return O(K,le,ue,Ee,Be,Te)}),K.seen.pop(),F(fe,Ne,he)}function N(K,le){if(Z(le))return K.stylize("undefined","undefined");if(X(le)){var ue="'"+JSON.stringify(le).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return K.stylize(ue,"string")}if(H(le))return K.stylize(""+le,"number");if(L(le))return K.stylize(""+le,"boolean");if(j(le))return K.stylize("null","null")}function V(K){return"["+Error.prototype.toString.call(K)+"]"}function D(K,le,ue,be,ge){for(var ye=[],Ee=0,Re=le.length;Ee<Re;++Ee)oe(le,String(Ee))?ye.push(O(K,le,ue,be,String(Ee),!0)):ye.push("");return ge.forEach(function(Ne){Ne.match(/^\d+$/)||ye.push(O(K,le,ue,be,Ne,!0))}),ye}function O(K,le,ue,be,ge,ye){var Ee,Re,Ne;if(Ne=Object.getOwnPropertyDescriptor(le,ge)||{value:le[ge]},Ne.get?Ne.set?Re=K.stylize("[Getter/Setter]","special"):Re=K.stylize("[Getter]","special"):Ne.set&&(Re=K.stylize("[Setter]","special")),oe(be,ge)||(Ee="["+ge+"]"),Re||(K.seen.indexOf(Ne.value)<0?(j(ue)?Re=I(K,Ne.value,null):Re=I(K,Ne.value,ue-1),Re.indexOf(`
`)>-1&&(ye?Re=Re.split(`
`).map(function(Te){return"  "+Te}).join(`
`).slice(2):Re=`
`+Re.split(`
`).map(function(Te){return"   "+Te}).join(`
`))):Re=K.stylize("[Circular]","special")),Z(Ee)){if(ye&&ge.match(/^\d+$/))return Re;Ee=JSON.stringify(""+ge),Ee.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Ee=Ee.slice(1,-1),Ee=K.stylize(Ee,"name")):(Ee=Ee.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Ee=K.stylize(Ee,"string"))}return Ee+": "+Re}function F(K,le,ue){var be=K.reduce(function(ge,ye){return ye.indexOf(`
`)>=0,ge+ye.replace(/\u001b\[\d\d?m/g,"").length+1},0);return be>60?ue[0]+(le===""?"":le+`
 `)+" "+K.join(`,
  `)+" "+ue[1]:ue[0]+le+" "+K.join(", ")+" "+ue[1]}r.types=types$1;function M(K){return Array.isArray(K)}r.isArray=M;function L(K){return typeof K=="boolean"}r.isBoolean=L;function j(K){return K===null}r.isNull=j;function q(K){return K==null}r.isNullOrUndefined=q;function H(K){return typeof K=="number"}r.isNumber=H;function X(K){return typeof K=="string"}r.isString=X;function J(K){return typeof K=="symbol"}r.isSymbol=J;function Z(K){return K===void 0}r.isUndefined=Z;function ae(K){return ce(K)&&U(K)==="[object RegExp]"}r.isRegExp=ae,r.types.isRegExp=ae;function ce(K){return typeof K=="object"&&K!==null}r.isObject=ce;function ve(K){return ce(K)&&U(K)==="[object Date]"}r.isDate=ve,r.types.isDate=ve;function pe(K){return ce(K)&&(U(K)==="[object Error]"||K instanceof Error)}r.isError=pe,r.types.isNativeError=pe;function G(K){return typeof K=="function"}r.isFunction=G;function Y(K){return K===null||typeof K=="boolean"||typeof K=="number"||typeof K=="string"||typeof K=="symbol"||typeof K>"u"}r.isPrimitive=Y,r.isBuffer=isBufferBrowser;function U(K){return Object.prototype.toString.call(K)}function W(K){return K<10?"0"+K.toString(10):K.toString(10)}var ee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function re(){var K=new Date,le=[W(K.getHours()),W(K.getMinutes()),W(K.getSeconds())].join(":");return[K.getDate(),ee[K.getMonth()],le].join(" ")}r.log=function(){console.log("%s - %s",re(),r.format.apply(r,arguments))},r.inherits=inherits_browserExports,r._extend=function(K,le){if(!le||!ce(le))return K;for(var ue=Object.keys(le),be=ue.length;be--;)K[ue[be]]=le[ue[be]];return K};function oe(K,le){return Object.prototype.hasOwnProperty.call(K,le)}var ie=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(le){if(typeof le!="function")throw new TypeError('The "original" argument must be of type Function');if(ie&&le[ie]){var ue=le[ie];if(typeof ue!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ue,ie,{value:ue,enumerable:!1,writable:!1,configurable:!0}),ue}function ue(){for(var be,ge,ye=new Promise(function(Ne,Te){be=Ne,ge=Te}),Ee=[],Re=0;Re<arguments.length;Re++)Ee.push(arguments[Re]);Ee.push(function(Ne,Te){Ne?ge(Ne):be(Te)});try{le.apply(this,Ee)}catch(Ne){ge(Ne)}return ye}return Object.setPrototypeOf(ue,Object.getPrototypeOf(le)),ie&&Object.defineProperty(ue,ie,{value:ue,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ue,n(le))},r.promisify.custom=ie;function ne(K,le){if(!K){var ue=new Error("Promise was rejected with a falsy value");ue.reason=K,K=ue}return le(K)}function te(K){if(typeof K!="function")throw new TypeError('The "original" argument must be of type Function');function le(){for(var ue=[],be=0;be<arguments.length;be++)ue.push(arguments[be]);var ge=ue.pop();if(typeof ge!="function")throw new TypeError("The last argument must be of type Function");var ye=this,Ee=function(){return ge.apply(ye,arguments)};K.apply(this,ue).then(function(Re){browser$1$1.nextTick(Ee.bind(null,null,Re))},function(Re){browser$1$1.nextTick(ne.bind(null,Re,Ee))})}return Object.setPrototypeOf(le,Object.getPrototypeOf(K)),Object.defineProperties(le,n(K)),le}r.callbackify=te})(util$7);function BufferList(){this.head=null,this.tail=null,this.length=0}BufferList.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length};BufferList.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length};BufferList.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}};BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0};BufferList.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,_=""+n.data;n=n.next;)_+=r+n.data;return _};BufferList.prototype.concat=function(r){if(this.length===0)return buffer$3.Buffer.alloc(0);if(this.length===1)return this.head.data;for(var n=buffer$3.Buffer.allocUnsafe(r>>>0),_=this.head,x=0;_;)_.data.copy(n,x),x+=_.data.length,_=_.next;return n};Readable.ReadableState=ReadableState;var debug$1=util$7.debuglog("stream");util$7.inherits(Readable,EventEmitter$4);function prependListener(r,n,_){if(typeof r.prependListener=="function")return r.prependListener(n,_);!r._events||!r._events[n]?r.on(n,_):Array.isArray(r._events[n])?r._events[n].unshift(_):r._events[n]=[_,r._events[n]]}function listenerCount(r,n){return r.listeners(n).length}function ReadableState(r,n){r=r||{},this.objectMode=!!r.objectMode,n instanceof Duplex&&(this.objectMode=this.objectMode||!!r.readableObjectMode);var _=r.highWaterMark,x=this.objectMode?16:16*1024;this.highWaterMark=_||_===0?_:x,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(this.decoder=new StringDecoder_1(r.encoding),this.encoding=r.encoding)}function Readable(r){if(!(this instanceof Readable))return new Readable(r);this._readableState=new ReadableState(r,this),this.readable=!0,r&&typeof r.read=="function"&&(this._read=r.read),EventEmitter$4.call(this)}Readable.prototype.push=function(r,n){var _=this._readableState;return!_.objectMode&&typeof r=="string"&&(n=n||_.defaultEncoding,n!==_.encoding&&(r=Buffer$5.from(r,n),n="")),readableAddChunk(this,_,r,n,!1)};Readable.prototype.unshift=function(r){var n=this._readableState;return readableAddChunk(this,n,r,"",!0)};Readable.prototype.isPaused=function(){return this._readableState.flowing===!1};function readableAddChunk(r,n,_,x,S){var E=chunkInvalid(n,_);if(E)r.emit("error",E);else if(_===null)n.reading=!1,onEofChunk(r,n);else if(n.objectMode||_&&_.length>0)if(n.ended&&!S){var C=new Error("stream.push() after EOF");r.emit("error",C)}else if(n.endEmitted&&S){var T=new Error("stream.unshift() after end event");r.emit("error",T)}else{var B;n.decoder&&!S&&!x&&(_=n.decoder.write(_),B=!n.objectMode&&_.length===0),S||(n.reading=!1),B||(n.flowing&&n.length===0&&!n.sync?(r.emit("data",_),r.read(0)):(n.length+=n.objectMode?1:_.length,S?n.buffer.unshift(_):n.buffer.push(_),n.needReadable&&emitReadable(r))),maybeReadMore(r,n)}else S||(n.reading=!1);return needMoreData(n)}function needMoreData(r){return!r.ended&&(r.needReadable||r.length<r.highWaterMark||r.length===0)}Readable.prototype.setEncoding=function(r){return this._readableState.decoder=new StringDecoder_1(r),this._readableState.encoding=r,this};var MAX_HWM=8388608;function computeNewHighWaterMark(r){return r>=MAX_HWM?r=MAX_HWM:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function howMuchToRead(r,n){return r<=0||n.length===0&&n.ended?0:n.objectMode?1:r!==r?n.flowing&&n.length?n.buffer.head.data.length:n.length:(r>n.highWaterMark&&(n.highWaterMark=computeNewHighWaterMark(r)),r<=n.length?r:n.ended?n.length:(n.needReadable=!0,0))}Readable.prototype.read=function(r){debug$1("read",r),r=parseInt(r,10);var n=this._readableState,_=r;if(r!==0&&(n.emittedReadable=!1),r===0&&n.needReadable&&(n.length>=n.highWaterMark||n.ended))return debug$1("read: emitReadable",n.length,n.ended),n.length===0&&n.ended?endReadable(this):emitReadable(this),null;if(r=howMuchToRead(r,n),r===0&&n.ended)return n.length===0&&endReadable(this),null;var x=n.needReadable;debug$1("need readable",x),(n.length===0||n.length-r<n.highWaterMark)&&(x=!0,debug$1("length less than watermark",x)),n.ended||n.reading?(x=!1,debug$1("reading or ended",x)):x&&(debug$1("do read"),n.reading=!0,n.sync=!0,n.length===0&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,n.reading||(r=howMuchToRead(_,n)));var S;return r>0?S=fromList(r,n):S=null,S===null?(n.needReadable=!0,r=0):n.length-=r,n.length===0&&(n.ended||(n.needReadable=!0),_!==r&&n.ended&&endReadable(this)),S!==null&&this.emit("data",S),S};function chunkInvalid(r,n){var _=null;return!Buffer$5.isBuffer(n)&&typeof n!="string"&&n!==null&&n!==void 0&&!r.objectMode&&(_=new TypeError("Invalid non-string/buffer chunk")),_}function onEofChunk(r,n){if(!n.ended){if(n.decoder){var _=n.decoder.end();_&&_.length&&(n.buffer.push(_),n.length+=n.objectMode?1:_.length)}n.ended=!0,emitReadable(r)}}function emitReadable(r){var n=r._readableState;n.needReadable=!1,n.emittedReadable||(debug$1("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?browserExports$1.nextTick(emitReadable_,r):emitReadable_(r))}function emitReadable_(r){debug$1("emit readable"),r.emit("readable"),flow(r)}function maybeReadMore(r,n){n.readingMore||(n.readingMore=!0,browserExports$1.nextTick(maybeReadMore_,r,n))}function maybeReadMore_(r,n){for(var _=n.length;!n.reading&&!n.flowing&&!n.ended&&n.length<n.highWaterMark&&(debug$1("maybeReadMore read 0"),r.read(0),_!==n.length);)_=n.length;n.readingMore=!1}Readable.prototype._read=function(r){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(r,n){var _=this,x=this._readableState;switch(x.pipesCount){case 0:x.pipes=r;break;case 1:x.pipes=[x.pipes,r];break;default:x.pipes.push(r);break}x.pipesCount+=1,debug$1("pipe count=%d opts=%j",x.pipesCount,n);var S=!n||n.end!==!1,E=S?T:I;x.endEmitted?browserExports$1.nextTick(E):_.once("end",E),r.on("unpipe",C);function C(L){debug$1("onunpipe"),L===_&&I()}function T(){debug$1("onend"),r.end()}var B=pipeOnDrain(_);r.on("drain",B);var A=!1;function I(){debug$1("cleanup"),r.removeListener("close",O),r.removeListener("finish",F),r.removeListener("drain",B),r.removeListener("error",D),r.removeListener("unpipe",C),_.removeListener("end",T),_.removeListener("end",I),_.removeListener("data",V),A=!0,x.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&B()}var N=!1;_.on("data",V);function V(L){debug$1("ondata"),N=!1;var j=r.write(L);j===!1&&!N&&((x.pipesCount===1&&x.pipes===r||x.pipesCount>1&&indexOf(x.pipes,r)!==-1)&&!A&&(debug$1("false write response, pause",_._readableState.awaitDrain),_._readableState.awaitDrain++,N=!0),_.pause())}function D(L){debug$1("onerror",L),M(),r.removeListener("error",D),listenerCount(r,"error")===0&&r.emit("error",L)}prependListener(r,"error",D);function O(){r.removeListener("finish",F),M()}r.once("close",O);function F(){debug$1("onfinish"),r.removeListener("close",O),M()}r.once("finish",F);function M(){debug$1("unpipe"),_.unpipe(r)}return r.emit("pipe",_),x.flowing||(debug$1("pipe resume"),_.resume()),r};function pipeOnDrain(r){return function(){var n=r._readableState;debug$1("pipeOnDrain",n.awaitDrain),n.awaitDrain&&n.awaitDrain--,n.awaitDrain===0&&r.listeners("data").length&&(n.flowing=!0,flow(r))}}Readable.prototype.unpipe=function(r){var n=this._readableState;if(n.pipesCount===0)return this;if(n.pipesCount===1)return r&&r!==n.pipes?this:(r||(r=n.pipes),n.pipes=null,n.pipesCount=0,n.flowing=!1,r&&r.emit("unpipe",this),this);if(!r){var _=n.pipes,x=n.pipesCount;n.pipes=null,n.pipesCount=0,n.flowing=!1;for(var S=0;S<x;S++)_[S].emit("unpipe",this);return this}var E=indexOf(n.pipes,r);return E===-1?this:(n.pipes.splice(E,1),n.pipesCount-=1,n.pipesCount===1&&(n.pipes=n.pipes[0]),r.emit("unpipe",this),this)};Readable.prototype.on=function(r,n){var _=EventEmitter$4.prototype.on.call(this,r,n);if(r==="data")this._readableState.flowing!==!1&&this.resume();else if(r==="readable"){var x=this._readableState;!x.endEmitted&&!x.readableListening&&(x.readableListening=x.needReadable=!0,x.emittedReadable=!1,x.reading?x.length&&emitReadable(this):browserExports$1.nextTick(nReadingNextTick,this))}return _};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(r){debug$1("readable nexttick read 0"),r.read(0)}Readable.prototype.resume=function(){var r=this._readableState;return r.flowing||(debug$1("resume"),r.flowing=!0,resume(this,r)),this};function resume(r,n){n.resumeScheduled||(n.resumeScheduled=!0,browserExports$1.nextTick(resume_,r,n))}function resume_(r,n){n.reading||(debug$1("resume read 0"),r.read(0)),n.resumeScheduled=!1,n.awaitDrain=0,r.emit("resume"),flow(r),n.flowing&&!n.reading&&r.read(0)}Readable.prototype.pause=function(){return debug$1("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(debug$1("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function flow(r){var n=r._readableState;for(debug$1("flow",n.flowing);n.flowing&&r.read()!==null;);}Readable.prototype.wrap=function(r){var n=this._readableState,_=!1,x=this;r.on("end",function(){if(debug$1("wrapped end"),n.decoder&&!n.ended){var C=n.decoder.end();C&&C.length&&x.push(C)}x.push(null)}),r.on("data",function(C){if(debug$1("wrapped data"),n.decoder&&(C=n.decoder.write(C)),!(n.objectMode&&C==null)&&!(!n.objectMode&&(!C||!C.length))){var T=x.push(C);T||(_=!0,r.pause())}});for(var S in r)this[S]===void 0&&typeof r[S]=="function"&&(this[S]=function(C){return function(){return r[C].apply(r,arguments)}}(S));var E=["error","close","destroy","pause","resume"];return forEach$2(E,function(C){r.on(C,x.emit.bind(x,C))}),x._read=function(C){debug$1("wrapped _read",C),_&&(_=!1,r.resume())},x};Readable._fromList=fromList;function fromList(r,n){if(n.length===0)return null;var _;return n.objectMode?_=n.buffer.shift():!r||r>=n.length?(n.decoder?_=n.buffer.join(""):n.buffer.length===1?_=n.buffer.head.data:_=n.buffer.concat(n.length),n.buffer.clear()):_=fromListPartial(r,n.buffer,n.decoder),_}function fromListPartial(r,n,_){var x;return r<n.head.data.length?(x=n.head.data.slice(0,r),n.head.data=n.head.data.slice(r)):r===n.head.data.length?x=n.shift():x=_?copyFromBufferString(r,n):copyFromBuffer(r,n),x}function copyFromBufferString(r,n){var _=n.head,x=1,S=_.data;for(r-=S.length;_=_.next;){var E=_.data,C=r>E.length?E.length:r;if(C===E.length?S+=E:S+=E.slice(0,r),r-=C,r===0){C===E.length?(++x,_.next?n.head=_.next:n.head=n.tail=null):(n.head=_,_.data=E.slice(C));break}++x}return n.length-=x,S}function copyFromBuffer(r,n){var _=Buffer$5.allocUnsafe(r),x=n.head,S=1;for(x.data.copy(_),r-=x.data.length;x=x.next;){var E=x.data,C=r>E.length?E.length:r;if(E.copy(_,_.length-r,0,C),r-=C,r===0){C===E.length?(++S,x.next?n.head=x.next:n.head=n.tail=null):(n.head=x,x.data=E.slice(C));break}++S}return n.length-=S,_}function endReadable(r){var n=r._readableState;if(n.length>0)throw new Error('"endReadable()" called on non-empty stream');n.endEmitted||(n.ended=!0,browserExports$1.nextTick(endReadableNT,n,r))}function endReadableNT(r,n){!r.endEmitted&&r.length===0&&(r.endEmitted=!0,n.readable=!1,n.emit("end"))}function forEach$2(r,n){for(var _=0,x=r.length;_<x;_++)n(r[_],_)}function indexOf(r,n){for(var _=0,x=r.length;_<x;_++)if(r[_]===n)return _;return-1}Writable.WritableState=WritableState;util$7.inherits(Writable,eventsExports.EventEmitter);function nop(){}function WriteReq(r,n,_){this.chunk=r,this.encoding=n,this.callback=_,this.next=null}function WritableState(r,n){Object.defineProperty(this,"buffer",{get:util$7.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),r=r||{},this.objectMode=!!r.objectMode,n instanceof Duplex&&(this.objectMode=this.objectMode||!!r.writableObjectMode);var _=r.highWaterMark,x=this.objectMode?16:16*1024;this.highWaterMark=_||_===0?_:x,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var S=r.decodeStrings===!1;this.decodeStrings=!S,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(E){onwrite(n,E)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function(){for(var n=this.bufferedRequest,_=[];n;)_.push(n),n=n.next;return _};function Writable(r){if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(r);this._writableState=new WritableState(r,this),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev)),eventsExports.EventEmitter.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(r,n){var _=new Error("write after end");r.emit("error",_),browserExports$1.nextTick(n,_)}function validChunk(r,n,_,x){var S=!0,E=!1;return _===null?E=new TypeError("May not write null values to stream"):!buffer$3.Buffer.isBuffer(_)&&typeof _!="string"&&_!==void 0&&!n.objectMode&&(E=new TypeError("Invalid non-string/buffer chunk")),E&&(r.emit("error",E),browserExports$1.nextTick(x,E),S=!1),S}Writable.prototype.write=function(r,n,_){var x=this._writableState,S=!1;return typeof n=="function"&&(_=n,n=null),buffer$3.Buffer.isBuffer(r)?n="buffer":n||(n=x.defaultEncoding),typeof _!="function"&&(_=nop),x.ended?writeAfterEnd(this,_):validChunk(this,x,r,_)&&(x.pendingcb++,S=writeOrBuffer(this,x,r,n,_)),S};Writable.prototype.cork=function(){var r=this._writableState;r.corked++};Writable.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.finished&&!r.bufferProcessing&&r.bufferedRequest&&clearBuffer(this,r))};Writable.prototype.setDefaultEncoding=function(n){if(typeof n=="string"&&(n=n.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((n+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+n);return this._writableState.defaultEncoding=n,this};function decodeChunk(r,n,_){return!r.objectMode&&r.decodeStrings!==!1&&typeof n=="string"&&(n=buffer$3.Buffer.from(n,_)),n}function writeOrBuffer(r,n,_,x,S){_=decodeChunk(n,_,x),buffer$3.Buffer.isBuffer(_)&&(x="buffer");var E=n.objectMode?1:_.length;n.length+=E;var C=n.length<n.highWaterMark;if(C||(n.needDrain=!0),n.writing||n.corked){var T=n.lastBufferedRequest;n.lastBufferedRequest=new WriteReq(_,x,S),T?T.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1}else doWrite(r,n,!1,E,_,x,S);return C}function doWrite(r,n,_,x,S,E,C){n.writelen=x,n.writecb=C,n.writing=!0,n.sync=!0,_?r._writev(S,n.onwrite):r._write(S,E,n.onwrite),n.sync=!1}function onwriteError(r,n,_,x,S){--n.pendingcb,_?browserExports$1.nextTick(S,x):S(x),r._writableState.errorEmitted=!0,r.emit("error",x)}function onwriteStateUpdate(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function onwrite(r,n){var _=r._writableState,x=_.sync,S=_.writecb;if(onwriteStateUpdate(_),n)onwriteError(r,_,x,n,S);else{var E=needFinish(_);!E&&!_.corked&&!_.bufferProcessing&&_.bufferedRequest&&clearBuffer(r,_),x?browserExports$1.nextTick(afterWrite,r,_,E,S):afterWrite(r,_,E,S)}}function afterWrite(r,n,_,x){_||onwriteDrain(r,n),n.pendingcb--,x(),finishMaybe(r,n)}function onwriteDrain(r,n){n.length===0&&n.needDrain&&(n.needDrain=!1,r.emit("drain"))}function clearBuffer(r,n){n.bufferProcessing=!0;var _=n.bufferedRequest;if(r._writev&&_&&_.next){var x=n.bufferedRequestCount,S=new Array(x),E=n.corkedRequestsFree;E.entry=_;for(var C=0;_;)S[C]=_,_=_.next,C+=1;doWrite(r,n,!0,n.length,S,"",E.finish),n.pendingcb++,n.lastBufferedRequest=null,E.next?(n.corkedRequestsFree=E.next,E.next=null):n.corkedRequestsFree=new CorkedRequest(n)}else{for(;_;){var T=_.chunk,B=_.encoding,A=_.callback,I=n.objectMode?1:T.length;if(doWrite(r,n,!1,I,T,B,A),_=_.next,n.writing)break}_===null&&(n.lastBufferedRequest=null)}n.bufferedRequestCount=0,n.bufferedRequest=_,n.bufferProcessing=!1}Writable.prototype._write=function(r,n,_){_(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(r,n,_){var x=this._writableState;typeof r=="function"?(_=r,r=null,n=null):typeof n=="function"&&(_=n,n=null),r!=null&&this.write(r,n),x.corked&&(x.corked=1,this.uncork()),!x.ending&&!x.finished&&endWritable(this,x,_)};function needFinish(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function prefinish(r,n){n.prefinished||(n.prefinished=!0,r.emit("prefinish"))}function finishMaybe(r,n){var _=needFinish(n);return _&&(n.pendingcb===0?(prefinish(r,n),n.finished=!0,r.emit("finish")):prefinish(r,n)),_}function endWritable(r,n,_){n.ending=!0,finishMaybe(r,n),_&&(n.finished?browserExports$1.nextTick(_):r.once("finish",_)),n.ended=!0,r.writable=!1}function CorkedRequest(r){var n=this;this.next=null,this.entry=null,this.finish=function(_){var x=n.entry;for(n.entry=null;x;){var S=x.callback;r.pendingcb--,S(_),x=x.next}r.corkedRequestsFree?r.corkedRequestsFree.next=n:r.corkedRequestsFree=n}}util$7.inherits(Duplex,Readable);var keys$1=Object.keys(Writable.prototype);for(var v=0;v<keys$1.length;v++){var method=keys$1[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(r){if(!(this instanceof Duplex))return new Duplex(r);Readable.call(this,r),Writable.call(this,r),r&&r.readable===!1&&(this.readable=!1),r&&r.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,r&&r.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||browserExports$1.nextTick(onEndNT,this)}function onEndNT(r){r.end()}util$7.inherits(Transform,Duplex);function TransformState(r){this.afterTransform=function(n,_){return afterTransform(r,n,_)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(r,n,_){var x=r._transformState;x.transforming=!1;var S=x.writecb;if(!S)return r.emit("error",new Error("no writecb in Transform class"));x.writechunk=null,x.writecb=null,_!=null&&r.push(_),S(n);var E=r._readableState;E.reading=!1,(E.needReadable||E.length<E.highWaterMark)&&r._read(E.highWaterMark)}function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r),this._transformState=new TransformState(this);var n=this;this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(_){done(n,_)}):done(n)})}Transform.prototype.push=function(r,n){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,n)};Transform.prototype._transform=function(r,n,_){throw new Error("Not implemented")};Transform.prototype._write=function(r,n,_){var x=this._transformState;if(x.writecb=_,x.writechunk=r,x.writeencoding=n,!x.transforming){var S=this._readableState;(x.needTransform||S.needReadable||S.length<S.highWaterMark)&&this._read(S.highWaterMark)}};Transform.prototype._read=function(r){var n=this._transformState;n.writechunk!==null&&n.writecb&&!n.transforming?(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform)):n.needTransform=!0};function done(r,n){if(n)return r.emit("error",n);var _=r._writableState,x=r._transformState;if(_.length)throw new Error("Calling transform done when ws.length != 0");if(x.transforming)throw new Error("Calling transform done when still transforming");return r.push(null)}util$7.inherits(PassThrough,Transform);function PassThrough(r){if(!(this instanceof PassThrough))return new PassThrough(r);Transform.call(this,r)}PassThrough.prototype._transform=function(r,n,_){_(null,r)};util$7.inherits(Stream,EventEmitter$4);Stream.Readable=Readable;Stream.Writable=Writable;Stream.Duplex=Duplex;Stream.Transform=Transform;Stream.PassThrough=PassThrough;Stream.Stream=Stream;function Stream(){EventEmitter$4.call(this)}Stream.prototype.pipe=function(r,n){var _=this;function x(I){r.writable&&r.write(I)===!1&&_.pause&&_.pause()}_.on("data",x);function S(){_.readable&&_.resume&&_.resume()}r.on("drain",S),!r._isStdio&&(!n||n.end!==!1)&&(_.on("end",C),_.on("close",T));var E=!1;function C(){E||(E=!0,r.end())}function T(){E||(E=!0,typeof r.destroy=="function"&&r.destroy())}function B(I){if(A(),EventEmitter$4.listenerCount(this,"error")===0)throw I}_.on("error",B),r.on("error",B);function A(){_.removeListener("data",x),r.removeListener("drain",S),_.removeListener("end",C),_.removeListener("close",T),_.removeListener("error",B),r.removeListener("error",B),_.removeListener("end",A),_.removeListener("close",A),r.removeListener("close",A)}return _.on("end",A),_.on("close",A),r.on("close",A),r.emit("pipe",_),r};const stream=Object.freeze(Object.defineProperty({__proto__:null,Duplex,PassThrough,Readable,Stream,Transform,Writable,default:Stream},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(stream);var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var r=safeBufferExports.Buffer,n=require$$0$1.Transform,_=string_decoder.StringDecoder,x=inherits_browserExports;function S(E){n.call(this),this.hashMode=typeof E=="string",this.hashMode?this[E]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return x(S,n),S.prototype.update=function(E,C,T){typeof E=="string"&&(E=r.from(E,C));var B=this._update(E);return this.hashMode?this:(T&&(B=this._toString(B,T)),B)},S.prototype.setAutoPadding=function(){},S.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},S.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},S.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},S.prototype._transform=function(E,C,T){var B;try{this.hashMode?this._update(E):this.push(this._update(E))}catch(A){B=A}finally{T(B)}},S.prototype._flush=function(E){var C;try{this.push(this.__final())}catch(T){C=T}E(C)},S.prototype._finalOrDigest=function(E){var C=this.__final()||r.alloc(0);return E&&(C=this._toString(C,E,!0)),C},S.prototype._toString=function(E,C,T){if(this._decoder||(this._decoder=new _(C),this._encoding=C),this._encoding!==C)throw new Error("can't switch encodings");var B=this._decoder.write(E);return T&&(B+=this._decoder.end()),B},cipherBase=S,cipherBase}var browser$b,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$b;hasRequiredBrowser$9=1;var r=inherits_browserExports,n=requireMd5_js(),_=requireRipemd160(),x=requireSha_js(),S=requireCipherBase();function E(C){S.call(this,"digest"),this._hash=C}return r(E,S),E.prototype._update=function(C){this._hash.update(C)},E.prototype._final=function(){return this._hash.digest()},browser$b=function(T){return T=T.toLowerCase(),T==="md5"?new n:T==="rmd160"||T==="ripemd160"?new _:new E(x(T))},browser$b}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var r=inherits_browserExports,n=safeBufferExports.Buffer,_=requireCipherBase(),x=n.alloc(128),S=64;function E(C,T){_.call(this,"digest"),typeof T=="string"&&(T=n.from(T)),this._alg=C,this._key=T,T.length>S?T=C(T):T.length<S&&(T=n.concat([T,x],S));for(var B=this._ipad=n.allocUnsafe(S),A=this._opad=n.allocUnsafe(S),I=0;I<S;I++)B[I]=T[I]^54,A[I]=T[I]^92;this._hash=[B]}return r(E,_),E.prototype._update=function(C){this._hash.push(C)},E.prototype._final=function(){var C=this._alg(n.concat(this._hash));return this._alg(n.concat([this._opad,C]))},legacy=E,legacy}var md5$2,hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5$2;hasRequiredMd5=1;var r=requireMd5_js();return md5$2=function(n){return new r().update(n).digest()},md5$2}var browser$a,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$a;hasRequiredBrowser$8=1;var r=inherits_browserExports,n=requireLegacy(),_=requireCipherBase(),x=safeBufferExports.Buffer,S=requireMd5(),E=requireRipemd160(),C=requireSha_js(),T=x.alloc(128);function B(A,I){_.call(this,"digest"),typeof I=="string"&&(I=x.from(I));var N=A==="sha512"||A==="sha384"?128:64;if(this._alg=A,this._key=I,I.length>N){var V=A==="rmd160"?new E:C(A);I=V.update(I).digest()}else I.length<N&&(I=x.concat([I,T],N));for(var D=this._ipad=x.allocUnsafe(N),O=this._opad=x.allocUnsafe(N),F=0;F<N;F++)D[F]=I[F]^54,O[F]=I[F]^92;this._hash=A==="rmd160"?new E:C(A),this._hash.update(D)}return r(B,_),B.prototype._update=function(A){this._hash.update(A)},B.prototype._final=function(){var A=this._hash.digest(),I=this._alg==="rmd160"?new E:C(this._alg);return I.update(this._opad).update(A).digest()},browser$a=function(I,N){return I=I.toLowerCase(),I==="rmd160"||I==="ripemd160"?new B("rmd160",N):I==="md5"?new n(S,N):new B(I,N)},browser$a}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$5={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384$1={sign:"ecdsa",hash:"sha384",id:""},sha512$2={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$5,sha224,sha384:sha384$1,sha512:sha512$2,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6),algos}var browser$9={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var r=Math.pow(2,30)-1;return precondition=function(n,_){if(typeof n!="number")throw new TypeError("Iterations not a number");if(n<0)throw new TypeError("Bad iterations");if(typeof _!="number")throw new TypeError("Key length not a number");if(_<0||_>r||_!==_)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var r;if(commonjsGlobal.process&&commonjsGlobal.process.browser)r="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var n=parseInt(browser$1$1.version.split(".")[0].slice(1),10);r=n>=6?"utf-8":"binary"}else r="utf-8";return defaultEncoding_1=r,defaultEncoding_1}var toBuffer$2,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer$2;hasRequiredToBuffer=1;var r=safeBufferExports.Buffer;return toBuffer$2=function(n,_,x){if(r.isBuffer(n))return n;if(typeof n=="string")return r.from(n,_);if(ArrayBuffer.isView(n))return r.from(n.buffer);throw new TypeError(x+" must be a string, a Buffer, a typed array or a DataView")},toBuffer$2}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var r=requireMd5(),n=requireRipemd160(),_=requireSha_js(),x=safeBufferExports.Buffer,S=requirePrecondition(),E=requireDefaultEncoding(),C=requireToBuffer(),T=x.alloc(128),B={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function A(V,D,O){var F=I(V),M=V==="sha512"||V==="sha384"?128:64;D.length>M?D=F(D):D.length<M&&(D=x.concat([D,T],M));for(var L=x.allocUnsafe(M+B[V]),j=x.allocUnsafe(M+B[V]),q=0;q<M;q++)L[q]=D[q]^54,j[q]=D[q]^92;var H=x.allocUnsafe(M+O+4);L.copy(H,0,0,M),this.ipad1=H,this.ipad2=L,this.opad=j,this.alg=V,this.blocksize=M,this.hash=F,this.size=B[V]}A.prototype.run=function(V,D){V.copy(D,this.blocksize);var O=this.hash(D);return O.copy(this.opad,this.blocksize),this.hash(this.opad)};function I(V){function D(F){return _(V).update(F).digest()}function O(F){return new n().update(F).digest()}return V==="rmd160"||V==="ripemd160"?O:V==="md5"?r:D}function N(V,D,O,F,M){S(O,F),V=C(V,E,"Password"),D=C(D,E,"Salt"),M=M||"sha1";var L=new A(M,V,D.length),j=x.allocUnsafe(F),q=x.allocUnsafe(D.length+4);D.copy(q,0,0,D.length);for(var H=0,X=B[M],J=Math.ceil(F/X),Z=1;Z<=J;Z++){q.writeUInt32BE(Z,D.length);for(var ae=L.run(q,L.ipad1),ce=ae,ve=1;ve<O;ve++){ce=L.run(ce,L.ipad2);for(var pe=0;pe<X;pe++)ae[pe]^=ce[pe]}ae.copy(j,H),H+=X}return j}return syncBrowser=N,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var r=safeBufferExports.Buffer,n=requirePrecondition(),_=requireDefaultEncoding(),x=requireSyncBrowser(),S=requireToBuffer(),E,C=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,T={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},B=[];function A(O){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!C||!C.importKey||!C.deriveBits)return Promise.resolve(!1);if(B[O]!==void 0)return B[O];E=E||r.alloc(8);var F=V(E,E,10,128,O).then(function(){return!0}).catch(function(){return!1});return B[O]=F,F}var I;function N(){return I||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?I=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?I=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?I=commonjsGlobal.setImmediate:I=commonjsGlobal.setTimeout,I)}function V(O,F,M,L,j){return C.importKey("raw",O,{name:"PBKDF2"},!1,["deriveBits"]).then(function(q){return C.deriveBits({name:"PBKDF2",salt:F,iterations:M,hash:{name:j}},q,L<<3)}).then(function(q){return r.from(q)})}function D(O,F){O.then(function(M){N()(function(){F(null,M)})},function(M){N()(function(){F(M)})})}return async=function(O,F,M,L,j,q){typeof j=="function"&&(q=j,j=void 0),j=j||"sha1";var H=T[j.toLowerCase()];if(!H||typeof commonjsGlobal.Promise!="function"){N()(function(){var X;try{X=x(O,F,M,L,j)}catch(J){return q(J)}q(null,X)});return}if(n(M,L),O=S(O,_,"Password"),F=S(F,_,"Salt"),typeof q!="function")throw new Error("No callback provided to pbkdf2");D(A(H).then(function(X){return X?V(O,F,M,L,H):x(O,F,M,L,j)}),q)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$9.pbkdf2=requireAsync(),browser$9.pbkdf2Sync=requireSyncBrowser()),browser$9}var browser$8={},des$1={},utils$6={},hasRequiredUtils$3;function requireUtils$3(){if(hasRequiredUtils$3)return utils$6;hasRequiredUtils$3=1,utils$6.readUInt32BE=function(S,E){var C=S[0+E]<<24|S[1+E]<<16|S[2+E]<<8|S[3+E];return C>>>0},utils$6.writeUInt32BE=function(S,E,C){S[0+C]=E>>>24,S[1+C]=E>>>16&255,S[2+C]=E>>>8&255,S[3+C]=E&255},utils$6.ip=function(S,E,C,T){for(var B=0,A=0,I=6;I>=0;I-=2){for(var N=0;N<=24;N+=8)B<<=1,B|=E>>>N+I&1;for(var N=0;N<=24;N+=8)B<<=1,B|=S>>>N+I&1}for(var I=6;I>=0;I-=2){for(var N=1;N<=25;N+=8)A<<=1,A|=E>>>N+I&1;for(var N=1;N<=25;N+=8)A<<=1,A|=S>>>N+I&1}C[T+0]=B>>>0,C[T+1]=A>>>0},utils$6.rip=function(S,E,C,T){for(var B=0,A=0,I=0;I<4;I++)for(var N=24;N>=0;N-=8)B<<=1,B|=E>>>N+I&1,B<<=1,B|=S>>>N+I&1;for(var I=4;I<8;I++)for(var N=24;N>=0;N-=8)A<<=1,A|=E>>>N+I&1,A<<=1,A|=S>>>N+I&1;C[T+0]=B>>>0,C[T+1]=A>>>0},utils$6.pc1=function(S,E,C,T){for(var B=0,A=0,I=7;I>=5;I--){for(var N=0;N<=24;N+=8)B<<=1,B|=E>>N+I&1;for(var N=0;N<=24;N+=8)B<<=1,B|=S>>N+I&1}for(var N=0;N<=24;N+=8)B<<=1,B|=E>>N+I&1;for(var I=1;I<=3;I++){for(var N=0;N<=24;N+=8)A<<=1,A|=E>>N+I&1;for(var N=0;N<=24;N+=8)A<<=1,A|=S>>N+I&1}for(var N=0;N<=24;N+=8)A<<=1,A|=S>>N+I&1;C[T+0]=B>>>0,C[T+1]=A>>>0},utils$6.r28shl=function(S,E){return S<<E&268435455|S>>>28-E};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$6.pc2=function(S,E,C,T){for(var B=0,A=0,I=r.length>>>1,N=0;N<I;N++)B<<=1,B|=S>>>r[N]&1;for(var N=I;N<r.length;N++)A<<=1,A|=E>>>r[N]&1;C[T+0]=B>>>0,C[T+1]=A>>>0},utils$6.expand=function(S,E,C){var T=0,B=0;T=(S&1)<<5|S>>>27;for(var A=23;A>=15;A-=4)T<<=6,T|=S>>>A&63;for(var A=11;A>=3;A-=4)B|=S>>>A&63,B<<=6;B|=(S&31)<<1|S>>>31,E[C+0]=T>>>0,E[C+1]=B>>>0};var n=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$6.substitute=function(S,E){for(var C=0,T=0;T<4;T++){var B=S>>>18-T*6&63,A=n[T*64+B];C<<=4,C|=A}for(var T=0;T<4;T++){var B=E>>>18-T*6&63,A=n[4*64+T*64+B];C<<=4,C|=A}return C>>>0};var _=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$6.permute=function(S){for(var E=0,C=0;C<_.length;C++)E<<=1,E|=S>>>_[C]&1;return E>>>0},utils$6.padSplit=function(S,E,C){for(var T=S.toString(2);T.length<E;)T="0"+T;for(var B=[],A=0;A<E;A+=C)B.push(T.slice(A,A+C));return B.join(" ")},utils$6}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=r;function r(n,_){if(!n)throw new Error(_||"Assertion failed")}return r.equal=function(_,x,S){if(_!=x)throw new Error(S||"Assertion failed: "+_+" != "+x)},minimalisticAssert}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var r=requireMinimalisticAssert();function n(_){this.options=_,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=_.padding!==!1}return cipher=n,n.prototype._init=function(){},n.prototype.update=function(x){return x.length===0?[]:this.type==="decrypt"?this._updateDecrypt(x):this._updateEncrypt(x)},n.prototype._buffer=function(x,S){for(var E=Math.min(this.buffer.length-this.bufferOff,x.length-S),C=0;C<E;C++)this.buffer[this.bufferOff+C]=x[S+C];return this.bufferOff+=E,E},n.prototype._flushBuffer=function(x,S){return this._update(this.buffer,0,x,S),this.bufferOff=0,this.blockSize},n.prototype._updateEncrypt=function(x){var S=0,E=0,C=(this.bufferOff+x.length)/this.blockSize|0,T=new Array(C*this.blockSize);this.bufferOff!==0&&(S+=this._buffer(x,S),this.bufferOff===this.buffer.length&&(E+=this._flushBuffer(T,E)));for(var B=x.length-(x.length-S)%this.blockSize;S<B;S+=this.blockSize)this._update(x,S,T,E),E+=this.blockSize;for(;S<x.length;S++,this.bufferOff++)this.buffer[this.bufferOff]=x[S];return T},n.prototype._updateDecrypt=function(x){for(var S=0,E=0,C=Math.ceil((this.bufferOff+x.length)/this.blockSize)-1,T=new Array(C*this.blockSize);C>0;C--)S+=this._buffer(x,S),E+=this._flushBuffer(T,E);return S+=this._buffer(x,S),T},n.prototype.final=function(x){var S;x&&(S=this.update(x));var E;return this.type==="encrypt"?E=this._finalEncrypt():E=this._finalDecrypt(),S?S.concat(E):E},n.prototype._pad=function(x,S){if(S===0)return!1;for(;S<x.length;)x[S++]=0;return!0},n.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var x=new Array(this.blockSize);return this._update(this.buffer,0,x,0),x},n.prototype._unpad=function(x){return x},n.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var x=new Array(this.blockSize);return this._flushBuffer(x,0),this._unpad(x)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var r=requireMinimalisticAssert(),n=inherits_browserExports,_=requireUtils$3(),x=requireCipher();function S(){this.tmp=new Array(2),this.keys=null}function E(T){x.call(this,T);var B=new S;this._desState=B,this.deriveKeys(B,T.key)}n(E,x),des=E,E.create=function(B){return new E(B)};var C=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return E.prototype.deriveKeys=function(B,A){B.keys=new Array(16*2),r.equal(A.length,this.blockSize,"Invalid key length");var I=_.readUInt32BE(A,0),N=_.readUInt32BE(A,4);_.pc1(I,N,B.tmp,0),I=B.tmp[0],N=B.tmp[1];for(var V=0;V<B.keys.length;V+=2){var D=C[V>>>1];I=_.r28shl(I,D),N=_.r28shl(N,D),_.pc2(I,N,B.keys,V)}},E.prototype._update=function(B,A,I,N){var V=this._desState,D=_.readUInt32BE(B,A),O=_.readUInt32BE(B,A+4);_.ip(D,O,V.tmp,0),D=V.tmp[0],O=V.tmp[1],this.type==="encrypt"?this._encrypt(V,D,O,V.tmp,0):this._decrypt(V,D,O,V.tmp,0),D=V.tmp[0],O=V.tmp[1],_.writeUInt32BE(I,D,N),_.writeUInt32BE(I,O,N+4)},E.prototype._pad=function(B,A){if(this.padding===!1)return!1;for(var I=B.length-A,N=A;N<B.length;N++)B[N]=I;return!0},E.prototype._unpad=function(B){if(this.padding===!1)return B;for(var A=B[B.length-1],I=B.length-A;I<B.length;I++)r.equal(B[I],A);return B.slice(0,B.length-A)},E.prototype._encrypt=function(B,A,I,N,V){for(var D=A,O=I,F=0;F<B.keys.length;F+=2){var M=B.keys[F],L=B.keys[F+1];_.expand(O,B.tmp,0),M^=B.tmp[0],L^=B.tmp[1];var j=_.substitute(M,L),q=_.permute(j),H=O;O=(D^q)>>>0,D=H}_.rip(O,D,N,V)},E.prototype._decrypt=function(B,A,I,N,V){for(var D=I,O=A,F=B.keys.length-2;F>=0;F-=2){var M=B.keys[F],L=B.keys[F+1];_.expand(D,B.tmp,0),M^=B.tmp[0],L^=B.tmp[1];var j=_.substitute(M,L),q=_.permute(j),H=D;D=(O^q)>>>0,O=H}_.rip(D,O,N,V)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var r=requireMinimalisticAssert(),n=inherits_browserExports,_={};function x(E){r.equal(E.length,8,"Invalid IV length"),this.iv=new Array(8);for(var C=0;C<this.iv.length;C++)this.iv[C]=E[C]}function S(E){function C(I){E.call(this,I),this._cbcInit()}n(C,E);for(var T=Object.keys(_),B=0;B<T.length;B++){var A=T[B];C.prototype[A]=_[A]}return C.create=function(N){return new C(N)},C}return cbc$1.instantiate=S,_._cbcInit=function(){var C=new x(this.options.iv);this._cbcState=C},_._update=function(C,T,B,A){var I=this._cbcState,N=this.constructor.super_.prototype,V=I.iv;if(this.type==="encrypt"){for(var D=0;D<this.blockSize;D++)V[D]^=C[T+D];N._update.call(this,V,0,B,A);for(var D=0;D<this.blockSize;D++)V[D]=B[A+D]}else{N._update.call(this,C,T,B,A);for(var D=0;D<this.blockSize;D++)B[A+D]^=V[D];for(var D=0;D<this.blockSize;D++)V[D]=C[T+D]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var r=requireMinimalisticAssert(),n=inherits_browserExports,_=requireCipher(),x=requireDes$1();function S(C,T){r.equal(T.length,24,"Invalid key length");var B=T.slice(0,8),A=T.slice(8,16),I=T.slice(16,24);C==="encrypt"?this.ciphers=[x.create({type:"encrypt",key:B}),x.create({type:"decrypt",key:A}),x.create({type:"encrypt",key:I})]:this.ciphers=[x.create({type:"decrypt",key:I}),x.create({type:"encrypt",key:A}),x.create({type:"decrypt",key:B})]}function E(C){_.call(this,C);var T=new S(this.type,this.options.key);this._edeState=T}return n(E,_),ede=E,E.create=function(T){return new E(T)},E.prototype._update=function(T,B,A,I){var N=this._edeState;N.ciphers[0]._update(T,B,A,I),N.ciphers[1]._update(A,I,A,I),N.ciphers[2]._update(A,I,A,I)},E.prototype._pad=x.prototype._pad,E.prototype._unpad=x.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$3(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var r=requireCipherBase(),n=requireDes(),_=inherits_browserExports,x=safeBufferExports.Buffer,S={"des-ede3-cbc":n.CBC.instantiate(n.EDE),"des-ede3":n.EDE,"des-ede-cbc":n.CBC.instantiate(n.EDE),"des-ede":n.EDE,"des-cbc":n.CBC.instantiate(n.DES),"des-ecb":n.DES};S.des=S["des-cbc"],S.des3=S["des-ede3-cbc"],browserifyDes=E,_(E,r);function E(C){r.call(this);var T=C.mode.toLowerCase(),B=S[T],A;C.decrypt?A="decrypt":A="encrypt";var I=C.key;x.isBuffer(I)||(I=x.from(I)),(T==="des-ede"||T==="des-ede-cbc")&&(I=x.concat([I,I.slice(0,8)]));var N=C.iv;x.isBuffer(N)||(N=x.from(N)),this._des=B.create({key:I,iv:N,type:A})}return E.prototype._update=function(C){return x.from(this._des.update(C))},E.prototype._final=function(){return x.from(this._des.final())},browserifyDes}var browser$7={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(r,n){return r._cipher.encryptBlock(n)},ecb.decrypt=function(r,n){return r._cipher.decryptBlock(n)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(n,_){for(var x=Math.min(n.length,_.length),S=new Buffer$5(x),E=0;E<x;++E)S[E]=n[E]^_[E];return S}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var r=requireBufferXor();return cbc.encrypt=function(n,_){var x=r(_,n._prev);return n._prev=n._cipher.encryptBlock(x),n._prev},cbc.decrypt=function(n,_){var x=n._prev;n._prev=_;var S=n._cipher.decryptBlock(_);return r(S,x)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var r=safeBufferExports.Buffer,n=requireBufferXor();function _(x,S,E){var C=S.length,T=n(S,x._cache);return x._cache=x._cache.slice(C),x._prev=r.concat([x._prev,E?S:T]),T}return cfb.encrypt=function(x,S,E){for(var C=r.allocUnsafe(0),T;S.length;)if(x._cache.length===0&&(x._cache=x._cipher.encryptBlock(x._prev),x._prev=r.allocUnsafe(0)),x._cache.length<=S.length)T=x._cache.length,C=r.concat([C,_(x,S.slice(0,T),E)]),S=S.slice(T);else{C=r.concat([C,_(x,S,E)]);break}return C},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var r=safeBufferExports.Buffer;function n(_,x,S){var E=_._cipher.encryptBlock(_._prev),C=E[0]^x;return _._prev=r.concat([_._prev.slice(1),r.from([S?x:C])]),C}return cfb8.encrypt=function(_,x,S){for(var E=x.length,C=r.allocUnsafe(E),T=-1;++T<E;)C[T]=n(_,x[T],S);return C},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var r=safeBufferExports.Buffer;function n(x,S,E){for(var C,T=-1,B=8,A=0,I,N;++T<B;)C=x._cipher.encryptBlock(x._prev),I=S&1<<7-T?128:0,N=C[0]^I,A+=(N&128)>>T%8,x._prev=_(x._prev,E?I:N);return A}function _(x,S){var E=x.length,C=-1,T=r.allocUnsafe(x.length);for(x=r.concat([x,r.from([S])]);++C<E;)T[C]=x[C]<<1|x[C+1]>>7;return T}return cfb1.encrypt=function(x,S,E){for(var C=S.length,T=r.allocUnsafe(C),B=-1;++B<C;)T[B]=n(x,S[B],E);return T},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var r=requireBufferXor();function n(_){return _._prev=_._cipher.encryptBlock(_._prev),_._prev}return ofb.encrypt=function(_,x){for(;_._cache.length<x.length;)_._cache=Buffer$5.concat([_._cache,n(_)]);var S=_._cache.slice(0,x.length);return _._cache=_._cache.slice(x.length),r(x,S)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function r(n){for(var _=n.length,x;_--;)if(x=n.readUInt8(_),x===255)n.writeUInt8(0,_);else{x++,n.writeUInt8(x,_);break}}return incr32_1=r,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var r=requireBufferXor(),n=safeBufferExports.Buffer,_=requireIncr32();function x(E){var C=E._cipher.encryptBlockRaw(E._prev);return _(E._prev),C}var S=16;return ctr.encrypt=function(E,C){var T=Math.ceil(C.length/S),B=E._cache.length;E._cache=n.concat([E._cache,n.allocUnsafe(T*S)]);for(var A=0;A<T;A++){var I=x(E),N=B+A*S;E._cache.writeUInt32BE(I[0],N+0),E._cache.writeUInt32BE(I[1],N+4),E._cache.writeUInt32BE(I[2],N+8),E._cache.writeUInt32BE(I[3],N+12)}var V=E._cache.slice(0,C.length);return E._cache=E._cache.slice(C.length),r(C,V)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var r={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},n=require$$2;for(var _ in n)n[_].module=r[n[_].mode];return modes_1=n,modes_1}var aes={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var r=safeBufferExports.Buffer;function n(T){r.isBuffer(T)||(T=r.from(T));for(var B=T.length/4|0,A=new Array(B),I=0;I<B;I++)A[I]=T.readUInt32BE(I*4);return A}function _(T){for(var B=0;B<T.length;T++)T[B]=0}function x(T,B,A,I,N){for(var V=A[0],D=A[1],O=A[2],F=A[3],M=T[0]^B[0],L=T[1]^B[1],j=T[2]^B[2],q=T[3]^B[3],H,X,J,Z,ae=4,ce=1;ce<N;ce++)H=V[M>>>24]^D[L>>>16&255]^O[j>>>8&255]^F[q&255]^B[ae++],X=V[L>>>24]^D[j>>>16&255]^O[q>>>8&255]^F[M&255]^B[ae++],J=V[j>>>24]^D[q>>>16&255]^O[M>>>8&255]^F[L&255]^B[ae++],Z=V[q>>>24]^D[M>>>16&255]^O[L>>>8&255]^F[j&255]^B[ae++],M=H,L=X,j=J,q=Z;return H=(I[M>>>24]<<24|I[L>>>16&255]<<16|I[j>>>8&255]<<8|I[q&255])^B[ae++],X=(I[L>>>24]<<24|I[j>>>16&255]<<16|I[q>>>8&255]<<8|I[M&255])^B[ae++],J=(I[j>>>24]<<24|I[q>>>16&255]<<16|I[M>>>8&255]<<8|I[L&255])^B[ae++],Z=(I[q>>>24]<<24|I[M>>>16&255]<<16|I[L>>>8&255]<<8|I[j&255])^B[ae++],H=H>>>0,X=X>>>0,J=J>>>0,Z=Z>>>0,[H,X,J,Z]}var S=[0,1,2,4,8,16,32,64,128,27,54],E=function(){for(var T=new Array(256),B=0;B<256;B++)B<128?T[B]=B<<1:T[B]=B<<1^283;for(var A=[],I=[],N=[[],[],[],[]],V=[[],[],[],[]],D=0,O=0,F=0;F<256;++F){var M=O^O<<1^O<<2^O<<3^O<<4;M=M>>>8^M&255^99,A[D]=M,I[M]=D;var L=T[D],j=T[L],q=T[j],H=T[M]*257^M*16843008;N[0][D]=H<<24|H>>>8,N[1][D]=H<<16|H>>>16,N[2][D]=H<<8|H>>>24,N[3][D]=H,H=q*16843009^j*65537^L*257^D*16843008,V[0][M]=H<<24|H>>>8,V[1][M]=H<<16|H>>>16,V[2][M]=H<<8|H>>>24,V[3][M]=H,D===0?D=O=1:(D=L^T[T[T[q^L]]],O^=T[T[O]])}return{SBOX:A,INV_SBOX:I,SUB_MIX:N,INV_SUB_MIX:V}}();function C(T){this._key=n(T),this._reset()}return C.blockSize=4*4,C.keySize=256/8,C.prototype.blockSize=C.blockSize,C.prototype.keySize=C.keySize,C.prototype._reset=function(){for(var T=this._key,B=T.length,A=B+6,I=(A+1)*4,N=[],V=0;V<B;V++)N[V]=T[V];for(V=B;V<I;V++){var D=N[V-1];V%B===0?(D=D<<8|D>>>24,D=E.SBOX[D>>>24]<<24|E.SBOX[D>>>16&255]<<16|E.SBOX[D>>>8&255]<<8|E.SBOX[D&255],D^=S[V/B|0]<<24):B>6&&V%B===4&&(D=E.SBOX[D>>>24]<<24|E.SBOX[D>>>16&255]<<16|E.SBOX[D>>>8&255]<<8|E.SBOX[D&255]),N[V]=N[V-B]^D}for(var O=[],F=0;F<I;F++){var M=I-F,L=N[M-(F%4?0:4)];F<4||M<=4?O[F]=L:O[F]=E.INV_SUB_MIX[0][E.SBOX[L>>>24]]^E.INV_SUB_MIX[1][E.SBOX[L>>>16&255]]^E.INV_SUB_MIX[2][E.SBOX[L>>>8&255]]^E.INV_SUB_MIX[3][E.SBOX[L&255]]}this._nRounds=A,this._keySchedule=N,this._invKeySchedule=O},C.prototype.encryptBlockRaw=function(T){return T=n(T),x(T,this._keySchedule,E.SUB_MIX,E.SBOX,this._nRounds)},C.prototype.encryptBlock=function(T){var B=this.encryptBlockRaw(T),A=r.allocUnsafe(16);return A.writeUInt32BE(B[0],0),A.writeUInt32BE(B[1],4),A.writeUInt32BE(B[2],8),A.writeUInt32BE(B[3],12),A},C.prototype.decryptBlock=function(T){T=n(T);var B=T[1];T[1]=T[3],T[3]=B;var A=x(T,this._invKeySchedule,E.INV_SUB_MIX,E.INV_SBOX,this._nRounds),I=r.allocUnsafe(16);return I.writeUInt32BE(A[0],0),I.writeUInt32BE(A[3],4),I.writeUInt32BE(A[2],8),I.writeUInt32BE(A[1],12),I},C.prototype.scrub=function(){_(this._keySchedule),_(this._invKeySchedule),_(this._key)},aes.AES=C,aes}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var r=safeBufferExports.Buffer,n=r.alloc(16,0);function _(E){return[E.readUInt32BE(0),E.readUInt32BE(4),E.readUInt32BE(8),E.readUInt32BE(12)]}function x(E){var C=r.allocUnsafe(16);return C.writeUInt32BE(E[0]>>>0,0),C.writeUInt32BE(E[1]>>>0,4),C.writeUInt32BE(E[2]>>>0,8),C.writeUInt32BE(E[3]>>>0,12),C}function S(E){this.h=E,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}return S.prototype.ghash=function(E){for(var C=-1;++C<E.length;)this.state[C]^=E[C];this._multiply()},S.prototype._multiply=function(){for(var E=_(this.h),C=[0,0,0,0],T,B,A,I=-1;++I<128;){for(B=(this.state[~~(I/8)]&1<<7-I%8)!==0,B&&(C[0]^=E[0],C[1]^=E[1],C[2]^=E[2],C[3]^=E[3]),A=(E[3]&1)!==0,T=3;T>0;T--)E[T]=E[T]>>>1|(E[T-1]&1)<<31;E[0]=E[0]>>>1,A&&(E[0]=E[0]^225<<24)}this.state=x(C)},S.prototype.update=function(E){this.cache=r.concat([this.cache,E]);for(var C;this.cache.length>=16;)C=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(C)},S.prototype.final=function(E,C){return this.cache.length&&this.ghash(r.concat([this.cache,n],16)),this.ghash(x([0,E,0,C])),this.state},ghash=S,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var r=requireAes(),n=safeBufferExports.Buffer,_=requireCipherBase(),x=inherits_browserExports,S=requireGhash(),E=requireBufferXor(),C=requireIncr32();function T(I,N){var V=0;I.length!==N.length&&V++;for(var D=Math.min(I.length,N.length),O=0;O<D;++O)V+=I[O]^N[O];return V}function B(I,N,V){if(N.length===12)return I._finID=n.concat([N,n.from([0,0,0,1])]),n.concat([N,n.from([0,0,0,2])]);var D=new S(V),O=N.length,F=O%16;D.update(N),F&&(F=16-F,D.update(n.alloc(F,0))),D.update(n.alloc(8,0));var M=O*8,L=n.alloc(8);L.writeUIntBE(M,0,8),D.update(L),I._finID=D.state;var j=n.from(I._finID);return C(j),j}function A(I,N,V,D){_.call(this);var O=n.alloc(4,0);this._cipher=new r.AES(N);var F=this._cipher.encryptBlock(O);this._ghash=new S(F),V=B(this,V,F),this._prev=n.from(V),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=D,this._alen=0,this._len=0,this._mode=I,this._authTag=null,this._called=!1}return x(A,_),A.prototype._update=function(I){if(!this._called&&this._alen){var N=16-this._alen%16;N<16&&(N=n.alloc(N,0),this._ghash.update(N))}this._called=!0;var V=this._mode.encrypt(this,I);return this._decrypt?this._ghash.update(I):this._ghash.update(V),this._len+=I.length,V},A.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var I=E(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&T(I,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=I,this._cipher.scrub()},A.prototype.getAuthTag=function(){if(this._decrypt||!n.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},A.prototype.setAuthTag=function(N){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=N},A.prototype.setAAD=function(N){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(N),this._alen+=N.length},authCipher=A,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var r=requireAes(),n=safeBufferExports.Buffer,_=requireCipherBase(),x=inherits_browserExports;function S(E,C,T,B){_.call(this),this._cipher=new r.AES(C),this._prev=n.from(T),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=B,this._mode=E}return x(S,_),S.prototype._update=function(E){return this._mode.encrypt(this,E,this._decrypt)},S.prototype._final=function(){this._cipher.scrub()},streamCipher=S,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var r=safeBufferExports.Buffer,n=requireMd5_js();function _(x,S,E,C){if(r.isBuffer(x)||(x=r.from(x,"binary")),S&&(r.isBuffer(S)||(S=r.from(S,"binary")),S.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var T=E/8,B=r.alloc(T),A=r.alloc(C||0),I=r.alloc(0);T>0||C>0;){var N=new n;N.update(I),N.update(x),S&&N.update(S),I=N.digest();var V=0;if(T>0){var D=B.length-T;V=Math.min(T,I.length),I.copy(B,D,0,V),T-=V}if(V<I.length&&C>0){var O=A.length-C,F=Math.min(C,I.length-V);I.copy(A,O,V,V+F),C-=F}}return I.fill(0),{key:B,iv:A}}return evp_bytestokey=_,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var r=requireModes$1(),n=requireAuthCipher(),_=safeBufferExports.Buffer,x=requireStreamCipher(),S=requireCipherBase(),E=requireAes(),C=requireEvp_bytestokey(),T=inherits_browserExports;function B(D,O,F){S.call(this),this._cache=new I,this._cipher=new E.AES(O),this._prev=_.from(F),this._mode=D,this._autopadding=!0}T(B,S),B.prototype._update=function(D){this._cache.add(D);for(var O,F,M=[];O=this._cache.get();)F=this._mode.encrypt(this,O),M.push(F);return _.concat(M)};var A=_.alloc(16,16);B.prototype._final=function(){var D=this._cache.flush();if(this._autopadding)return D=this._mode.encrypt(this,D),this._cipher.scrub(),D;if(!D.equals(A))throw this._cipher.scrub(),new Error("data not multiple of block length")},B.prototype.setAutoPadding=function(D){return this._autopadding=!!D,this};function I(){this.cache=_.allocUnsafe(0)}I.prototype.add=function(D){this.cache=_.concat([this.cache,D])},I.prototype.get=function(){if(this.cache.length>15){var D=this.cache.slice(0,16);return this.cache=this.cache.slice(16),D}return null},I.prototype.flush=function(){for(var D=16-this.cache.length,O=_.allocUnsafe(D),F=-1;++F<D;)O.writeUInt8(D,F);return _.concat([this.cache,O])};function N(D,O,F){var M=r[D.toLowerCase()];if(!M)throw new TypeError("invalid suite type");if(typeof O=="string"&&(O=_.from(O)),O.length!==M.key/8)throw new TypeError("invalid key length "+O.length);if(typeof F=="string"&&(F=_.from(F)),M.mode!=="GCM"&&F.length!==M.iv)throw new TypeError("invalid iv length "+F.length);return M.type==="stream"?new x(M.module,O,F):M.type==="auth"?new n(M.module,O,F):new B(M.module,O,F)}function V(D,O){var F=r[D.toLowerCase()];if(!F)throw new TypeError("invalid suite type");var M=C(O,!1,F.key,F.iv);return N(D,M.key,M.iv)}return encrypter.createCipheriv=N,encrypter.createCipher=V,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var r=requireAuthCipher(),n=safeBufferExports.Buffer,_=requireModes$1(),x=requireStreamCipher(),S=requireCipherBase(),E=requireAes(),C=requireEvp_bytestokey(),T=inherits_browserExports;function B(D,O,F){S.call(this),this._cache=new A,this._last=void 0,this._cipher=new E.AES(O),this._prev=n.from(F),this._mode=D,this._autopadding=!0}T(B,S),B.prototype._update=function(D){this._cache.add(D);for(var O,F,M=[];O=this._cache.get(this._autopadding);)F=this._mode.decrypt(this,O),M.push(F);return n.concat(M)},B.prototype._final=function(){var D=this._cache.flush();if(this._autopadding)return I(this._mode.decrypt(this,D));if(D)throw new Error("data not multiple of block length")},B.prototype.setAutoPadding=function(D){return this._autopadding=!!D,this};function A(){this.cache=n.allocUnsafe(0)}A.prototype.add=function(D){this.cache=n.concat([this.cache,D])},A.prototype.get=function(D){var O;if(D){if(this.cache.length>16)return O=this.cache.slice(0,16),this.cache=this.cache.slice(16),O}else if(this.cache.length>=16)return O=this.cache.slice(0,16),this.cache=this.cache.slice(16),O;return null},A.prototype.flush=function(){if(this.cache.length)return this.cache};function I(D){var O=D[15];if(O<1||O>16)throw new Error("unable to decrypt data");for(var F=-1;++F<O;)if(D[F+(16-O)]!==O)throw new Error("unable to decrypt data");if(O!==16)return D.slice(0,16-O)}function N(D,O,F){var M=_[D.toLowerCase()];if(!M)throw new TypeError("invalid suite type");if(typeof F=="string"&&(F=n.from(F)),M.mode!=="GCM"&&F.length!==M.iv)throw new TypeError("invalid iv length "+F.length);if(typeof O=="string"&&(O=n.from(O)),O.length!==M.key/8)throw new TypeError("invalid key length "+O.length);return M.type==="stream"?new x(M.module,O,F,!0):M.type==="auth"?new r(M.module,O,F,!0):new B(M.module,O,F)}function V(D,O){var F=_[D.toLowerCase()];if(!F)throw new TypeError("invalid suite type");var M=C(O,!1,F.key,F.iv);return N(D,M.key,M.iv)}return decrypter.createDecipher=V,decrypter.createDecipheriv=N,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$7;hasRequiredBrowser$6=1;var r=requireEncrypter(),n=requireDecrypter(),_=require$$2;function x(){return Object.keys(_)}return browser$7.createCipher=browser$7.Cipher=r.createCipher,browser$7.createCipheriv=browser$7.Cipheriv=r.createCipheriv,browser$7.createDecipher=browser$7.Decipher=n.createDecipher,browser$7.createDecipheriv=browser$7.Decipheriv=n.createDecipheriv,browser$7.listCiphers=browser$7.getCiphers=x,browser$7}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(r){r["des-ecb"]={key:8,iv:0},r["des-cbc"]=r.des={key:8,iv:8},r["des-ede3-cbc"]=r.des3={key:24,iv:8},r["des-ede3"]={key:24,iv:0},r["des-ede-cbc"]={key:16,iv:8},r["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$8;hasRequiredBrowser$5=1;var r=requireBrowserifyDes(),n=requireBrowser$6(),_=requireModes$1(),x=requireModes(),S=requireEvp_bytestokey();function E(I,N){I=I.toLowerCase();var V,D;if(_[I])V=_[I].key,D=_[I].iv;else if(x[I])V=x[I].key*8,D=x[I].iv;else throw new TypeError("invalid suite type");var O=S(N,!1,V,D);return T(I,O.key,O.iv)}function C(I,N){I=I.toLowerCase();var V,D;if(_[I])V=_[I].key,D=_[I].iv;else if(x[I])V=x[I].key*8,D=x[I].iv;else throw new TypeError("invalid suite type");var O=S(N,!1,V,D);return B(I,O.key,O.iv)}function T(I,N,V){if(I=I.toLowerCase(),_[I])return n.createCipheriv(I,N,V);if(x[I])return new r({key:N,iv:V,mode:I});throw new TypeError("invalid suite type")}function B(I,N,V){if(I=I.toLowerCase(),_[I])return n.createDecipheriv(I,N,V);if(x[I])return new r({key:N,iv:V,mode:I,decrypt:!0});throw new TypeError("invalid suite type")}function A(){return Object.keys(x).concat(n.getCiphers())}return browser$8.createCipher=browser$8.Cipher=E,browser$8.createCipheriv=browser$8.Cipheriv=T,browser$8.createDecipher=browser$8.Decipher=C,browser$8.createDecipheriv=browser$8.Decipheriv=B,browser$8.listCiphers=browser$8.getCiphers=A,browser$8}var browser$6={},bn$2={exports:{}};bn$2.exports;var hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,function(r){(function(n,_){function x(pe,G){if(!pe)throw new Error(G||"Assertion failed")}function S(pe,G){pe.super_=G;var Y=function(){};Y.prototype=G.prototype,pe.prototype=new Y,pe.prototype.constructor=pe}function E(pe,G,Y){if(E.isBN(pe))return pe;this.negative=0,this.words=null,this.length=0,this.red=null,pe!==null&&((G==="le"||G==="be")&&(Y=G,G=10),this._init(pe||0,G||10,Y||"be"))}typeof n=="object"?n.exports=E:_.BN=E,E.BN=E,E.wordSize=26;var C;try{typeof window<"u"&&typeof window.Buffer<"u"?C=window.Buffer:C=require$$0$2.Buffer}catch{}E.isBN=function(G){return G instanceof E?!0:G!==null&&typeof G=="object"&&G.constructor.wordSize===E.wordSize&&Array.isArray(G.words)},E.max=function(G,Y){return G.cmp(Y)>0?G:Y},E.min=function(G,Y){return G.cmp(Y)<0?G:Y},E.prototype._init=function(G,Y,U){if(typeof G=="number")return this._initNumber(G,Y,U);if(typeof G=="object")return this._initArray(G,Y,U);Y==="hex"&&(Y=16),x(Y===(Y|0)&&Y>=2&&Y<=36),G=G.toString().replace(/\s+/g,"");var W=0;G[0]==="-"&&(W++,this.negative=1),W<G.length&&(Y===16?this._parseHex(G,W,U):(this._parseBase(G,Y,W),U==="le"&&this._initArray(this.toArray(),Y,U)))},E.prototype._initNumber=function(G,Y,U){G<0&&(this.negative=1,G=-G),G<67108864?(this.words=[G&67108863],this.length=1):G<4503599627370496?(this.words=[G&67108863,G/67108864&67108863],this.length=2):(x(G<9007199254740992),this.words=[G&67108863,G/67108864&67108863,1],this.length=3),U==="le"&&this._initArray(this.toArray(),Y,U)},E.prototype._initArray=function(G,Y,U){if(x(typeof G.length=="number"),G.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(G.length/3),this.words=new Array(this.length);for(var W=0;W<this.length;W++)this.words[W]=0;var ee,re,oe=0;if(U==="be")for(W=G.length-1,ee=0;W>=0;W-=3)re=G[W]|G[W-1]<<8|G[W-2]<<16,this.words[ee]|=re<<oe&67108863,this.words[ee+1]=re>>>26-oe&67108863,oe+=24,oe>=26&&(oe-=26,ee++);else if(U==="le")for(W=0,ee=0;W<G.length;W+=3)re=G[W]|G[W+1]<<8|G[W+2]<<16,this.words[ee]|=re<<oe&67108863,this.words[ee+1]=re>>>26-oe&67108863,oe+=24,oe>=26&&(oe-=26,ee++);return this.strip()};function T(pe,G){var Y=pe.charCodeAt(G);return Y>=65&&Y<=70?Y-55:Y>=97&&Y<=102?Y-87:Y-48&15}function B(pe,G,Y){var U=T(pe,Y);return Y-1>=G&&(U|=T(pe,Y-1)<<4),U}E.prototype._parseHex=function(G,Y,U){this.length=Math.ceil((G.length-Y)/6),this.words=new Array(this.length);for(var W=0;W<this.length;W++)this.words[W]=0;var ee=0,re=0,oe;if(U==="be")for(W=G.length-1;W>=Y;W-=2)oe=B(G,Y,W)<<ee,this.words[re]|=oe&67108863,ee>=18?(ee-=18,re+=1,this.words[re]|=oe>>>26):ee+=8;else{var ie=G.length-Y;for(W=ie%2===0?Y+1:Y;W<G.length;W+=2)oe=B(G,Y,W)<<ee,this.words[re]|=oe&67108863,ee>=18?(ee-=18,re+=1,this.words[re]|=oe>>>26):ee+=8}this.strip()};function A(pe,G,Y,U){for(var W=0,ee=Math.min(pe.length,Y),re=G;re<ee;re++){var oe=pe.charCodeAt(re)-48;W*=U,oe>=49?W+=oe-49+10:oe>=17?W+=oe-17+10:W+=oe}return W}E.prototype._parseBase=function(G,Y,U){this.words=[0],this.length=1;for(var W=0,ee=1;ee<=67108863;ee*=Y)W++;W--,ee=ee/Y|0;for(var re=G.length-U,oe=re%W,ie=Math.min(re,re-oe)+U,ne=0,te=U;te<ie;te+=W)ne=A(G,te,te+W,Y),this.imuln(ee),this.words[0]+ne<67108864?this.words[0]+=ne:this._iaddn(ne);if(oe!==0){var K=1;for(ne=A(G,te,G.length,Y),te=0;te<oe;te++)K*=Y;this.imuln(K),this.words[0]+ne<67108864?this.words[0]+=ne:this._iaddn(ne)}this.strip()},E.prototype.copy=function(G){G.words=new Array(this.length);for(var Y=0;Y<this.length;Y++)G.words[Y]=this.words[Y];G.length=this.length,G.negative=this.negative,G.red=this.red},E.prototype.clone=function(){var G=new E(null);return this.copy(G),G},E.prototype._expand=function(G){for(;this.length<G;)this.words[this.length++]=0;return this},E.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},E.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},E.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],N=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],V=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];E.prototype.toString=function(G,Y){G=G||10,Y=Y|0||1;var U;if(G===16||G==="hex"){U="";for(var W=0,ee=0,re=0;re<this.length;re++){var oe=this.words[re],ie=((oe<<W|ee)&16777215).toString(16);ee=oe>>>24-W&16777215,ee!==0||re!==this.length-1?U=I[6-ie.length]+ie+U:U=ie+U,W+=2,W>=26&&(W-=26,re--)}for(ee!==0&&(U=ee.toString(16)+U);U.length%Y!==0;)U="0"+U;return this.negative!==0&&(U="-"+U),U}if(G===(G|0)&&G>=2&&G<=36){var ne=N[G],te=V[G];U="";var K=this.clone();for(K.negative=0;!K.isZero();){var le=K.modn(te).toString(G);K=K.idivn(te),K.isZero()?U=le+U:U=I[ne-le.length]+le+U}for(this.isZero()&&(U="0"+U);U.length%Y!==0;)U="0"+U;return this.negative!==0&&(U="-"+U),U}x(!1,"Base should be between 2 and 36")},E.prototype.toNumber=function(){var G=this.words[0];return this.length===2?G+=this.words[1]*67108864:this.length===3&&this.words[2]===1?G+=4503599627370496+this.words[1]*67108864:this.length>2&&x(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-G:G},E.prototype.toJSON=function(){return this.toString(16)},E.prototype.toBuffer=function(G,Y){return x(typeof C<"u"),this.toArrayLike(C,G,Y)},E.prototype.toArray=function(G,Y){return this.toArrayLike(Array,G,Y)},E.prototype.toArrayLike=function(G,Y,U){var W=this.byteLength(),ee=U||Math.max(1,W);x(W<=ee,"byte array longer than desired length"),x(ee>0,"Requested array length <= 0"),this.strip();var re=Y==="le",oe=new G(ee),ie,ne,te=this.clone();if(re){for(ne=0;!te.isZero();ne++)ie=te.andln(255),te.iushrn(8),oe[ne]=ie;for(;ne<ee;ne++)oe[ne]=0}else{for(ne=0;ne<ee-W;ne++)oe[ne]=0;for(ne=0;!te.isZero();ne++)ie=te.andln(255),te.iushrn(8),oe[ee-ne-1]=ie}return oe},Math.clz32?E.prototype._countBits=function(G){return 32-Math.clz32(G)}:E.prototype._countBits=function(G){var Y=G,U=0;return Y>=4096&&(U+=13,Y>>>=13),Y>=64&&(U+=7,Y>>>=7),Y>=8&&(U+=4,Y>>>=4),Y>=2&&(U+=2,Y>>>=2),U+Y},E.prototype._zeroBits=function(G){if(G===0)return 26;var Y=G,U=0;return Y&8191||(U+=13,Y>>>=13),Y&127||(U+=7,Y>>>=7),Y&15||(U+=4,Y>>>=4),Y&3||(U+=2,Y>>>=2),Y&1||U++,U},E.prototype.bitLength=function(){var G=this.words[this.length-1],Y=this._countBits(G);return(this.length-1)*26+Y};function D(pe){for(var G=new Array(pe.bitLength()),Y=0;Y<G.length;Y++){var U=Y/26|0,W=Y%26;G[Y]=(pe.words[U]&1<<W)>>>W}return G}E.prototype.zeroBits=function(){if(this.isZero())return 0;for(var G=0,Y=0;Y<this.length;Y++){var U=this._zeroBits(this.words[Y]);if(G+=U,U!==26)break}return G},E.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},E.prototype.toTwos=function(G){return this.negative!==0?this.abs().inotn(G).iaddn(1):this.clone()},E.prototype.fromTwos=function(G){return this.testn(G-1)?this.notn(G).iaddn(1).ineg():this.clone()},E.prototype.isNeg=function(){return this.negative!==0},E.prototype.neg=function(){return this.clone().ineg()},E.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},E.prototype.iuor=function(G){for(;this.length<G.length;)this.words[this.length++]=0;for(var Y=0;Y<G.length;Y++)this.words[Y]=this.words[Y]|G.words[Y];return this.strip()},E.prototype.ior=function(G){return x((this.negative|G.negative)===0),this.iuor(G)},E.prototype.or=function(G){return this.length>G.length?this.clone().ior(G):G.clone().ior(this)},E.prototype.uor=function(G){return this.length>G.length?this.clone().iuor(G):G.clone().iuor(this)},E.prototype.iuand=function(G){var Y;this.length>G.length?Y=G:Y=this;for(var U=0;U<Y.length;U++)this.words[U]=this.words[U]&G.words[U];return this.length=Y.length,this.strip()},E.prototype.iand=function(G){return x((this.negative|G.negative)===0),this.iuand(G)},E.prototype.and=function(G){return this.length>G.length?this.clone().iand(G):G.clone().iand(this)},E.prototype.uand=function(G){return this.length>G.length?this.clone().iuand(G):G.clone().iuand(this)},E.prototype.iuxor=function(G){var Y,U;this.length>G.length?(Y=this,U=G):(Y=G,U=this);for(var W=0;W<U.length;W++)this.words[W]=Y.words[W]^U.words[W];if(this!==Y)for(;W<Y.length;W++)this.words[W]=Y.words[W];return this.length=Y.length,this.strip()},E.prototype.ixor=function(G){return x((this.negative|G.negative)===0),this.iuxor(G)},E.prototype.xor=function(G){return this.length>G.length?this.clone().ixor(G):G.clone().ixor(this)},E.prototype.uxor=function(G){return this.length>G.length?this.clone().iuxor(G):G.clone().iuxor(this)},E.prototype.inotn=function(G){x(typeof G=="number"&&G>=0);var Y=Math.ceil(G/26)|0,U=G%26;this._expand(Y),U>0&&Y--;for(var W=0;W<Y;W++)this.words[W]=~this.words[W]&67108863;return U>0&&(this.words[W]=~this.words[W]&67108863>>26-U),this.strip()},E.prototype.notn=function(G){return this.clone().inotn(G)},E.prototype.setn=function(G,Y){x(typeof G=="number"&&G>=0);var U=G/26|0,W=G%26;return this._expand(U+1),Y?this.words[U]=this.words[U]|1<<W:this.words[U]=this.words[U]&~(1<<W),this.strip()},E.prototype.iadd=function(G){var Y;if(this.negative!==0&&G.negative===0)return this.negative=0,Y=this.isub(G),this.negative^=1,this._normSign();if(this.negative===0&&G.negative!==0)return G.negative=0,Y=this.isub(G),G.negative=1,Y._normSign();var U,W;this.length>G.length?(U=this,W=G):(U=G,W=this);for(var ee=0,re=0;re<W.length;re++)Y=(U.words[re]|0)+(W.words[re]|0)+ee,this.words[re]=Y&67108863,ee=Y>>>26;for(;ee!==0&&re<U.length;re++)Y=(U.words[re]|0)+ee,this.words[re]=Y&67108863,ee=Y>>>26;if(this.length=U.length,ee!==0)this.words[this.length]=ee,this.length++;else if(U!==this)for(;re<U.length;re++)this.words[re]=U.words[re];return this},E.prototype.add=function(G){var Y;return G.negative!==0&&this.negative===0?(G.negative=0,Y=this.sub(G),G.negative^=1,Y):G.negative===0&&this.negative!==0?(this.negative=0,Y=G.sub(this),this.negative=1,Y):this.length>G.length?this.clone().iadd(G):G.clone().iadd(this)},E.prototype.isub=function(G){if(G.negative!==0){G.negative=0;var Y=this.iadd(G);return G.negative=1,Y._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(G),this.negative=1,this._normSign();var U=this.cmp(G);if(U===0)return this.negative=0,this.length=1,this.words[0]=0,this;var W,ee;U>0?(W=this,ee=G):(W=G,ee=this);for(var re=0,oe=0;oe<ee.length;oe++)Y=(W.words[oe]|0)-(ee.words[oe]|0)+re,re=Y>>26,this.words[oe]=Y&67108863;for(;re!==0&&oe<W.length;oe++)Y=(W.words[oe]|0)+re,re=Y>>26,this.words[oe]=Y&67108863;if(re===0&&oe<W.length&&W!==this)for(;oe<W.length;oe++)this.words[oe]=W.words[oe];return this.length=Math.max(this.length,oe),W!==this&&(this.negative=1),this.strip()},E.prototype.sub=function(G){return this.clone().isub(G)};function O(pe,G,Y){Y.negative=G.negative^pe.negative;var U=pe.length+G.length|0;Y.length=U,U=U-1|0;var W=pe.words[0]|0,ee=G.words[0]|0,re=W*ee,oe=re&67108863,ie=re/67108864|0;Y.words[0]=oe;for(var ne=1;ne<U;ne++){for(var te=ie>>>26,K=ie&67108863,le=Math.min(ne,G.length-1),ue=Math.max(0,ne-pe.length+1);ue<=le;ue++){var be=ne-ue|0;W=pe.words[be]|0,ee=G.words[ue]|0,re=W*ee+K,te+=re/67108864|0,K=re&67108863}Y.words[ne]=K|0,ie=te|0}return ie!==0?Y.words[ne]=ie|0:Y.length--,Y.strip()}var F=function(G,Y,U){var W=G.words,ee=Y.words,re=U.words,oe=0,ie,ne,te,K=W[0]|0,le=K&8191,ue=K>>>13,be=W[1]|0,ge=be&8191,ye=be>>>13,Ee=W[2]|0,Re=Ee&8191,Ne=Ee>>>13,Te=W[3]|0,he=Te&8191,xe=Te>>>13,fe=W[4]|0,Be=fe&8191,Le=fe>>>13,Ve=W[5]|0,Ie=Ve&8191,Me=Ve>>>13,He=W[6]|0,We=He&8191,Ue=He>>>13,Ge=W[7]|0,et=Ge&8191,ot=Ge>>>13,ht=W[8]|0,Oe=ht&8191,we=ht>>>13,Ce=W[9]|0,ze=Ce&8191,Ze=Ce>>>13,st=ee[0]|0,rt=st&8191,Ft=st>>>13,Vt=ee[1]|0,Et=Vt&8191,jt=Vt>>>13,Lt=ee[2]|0,qt=Lt&8191,_r=Lt>>>13,Zt=ee[3]|0,zt=Zt&8191,hr=Zt>>>13,Xt=ee[4]|0,Ht=Xt&8191,gr=Xt>>>13,Qt=ee[5]|0,Kt=Qt&8191,$r=Qt>>>13,tr=ee[6]|0,Ut=tr&8191,wr=tr>>>13,De=ee[7]|0,ke=De&8191,Se=De>>>13,se=ee[8]|0,_e=se&8191,$e=se>>>13,Pe=ee[9]|0,Fe=Pe&8191,qe=Pe>>>13;U.negative=G.negative^Y.negative,U.length=19,ie=Math.imul(le,rt),ne=Math.imul(le,Ft),ne=ne+Math.imul(ue,rt)|0,te=Math.imul(ue,Ft);var Ye=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,ie=Math.imul(ge,rt),ne=Math.imul(ge,Ft),ne=ne+Math.imul(ye,rt)|0,te=Math.imul(ye,Ft),ie=ie+Math.imul(le,Et)|0,ne=ne+Math.imul(le,jt)|0,ne=ne+Math.imul(ue,Et)|0,te=te+Math.imul(ue,jt)|0;var Je=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(Je>>>26)|0,Je&=67108863,ie=Math.imul(Re,rt),ne=Math.imul(Re,Ft),ne=ne+Math.imul(Ne,rt)|0,te=Math.imul(Ne,Ft),ie=ie+Math.imul(ge,Et)|0,ne=ne+Math.imul(ge,jt)|0,ne=ne+Math.imul(ye,Et)|0,te=te+Math.imul(ye,jt)|0,ie=ie+Math.imul(le,qt)|0,ne=ne+Math.imul(le,_r)|0,ne=ne+Math.imul(ue,qt)|0,te=te+Math.imul(ue,_r)|0;var tt=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(tt>>>26)|0,tt&=67108863,ie=Math.imul(he,rt),ne=Math.imul(he,Ft),ne=ne+Math.imul(xe,rt)|0,te=Math.imul(xe,Ft),ie=ie+Math.imul(Re,Et)|0,ne=ne+Math.imul(Re,jt)|0,ne=ne+Math.imul(Ne,Et)|0,te=te+Math.imul(Ne,jt)|0,ie=ie+Math.imul(ge,qt)|0,ne=ne+Math.imul(ge,_r)|0,ne=ne+Math.imul(ye,qt)|0,te=te+Math.imul(ye,_r)|0,ie=ie+Math.imul(le,zt)|0,ne=ne+Math.imul(le,hr)|0,ne=ne+Math.imul(ue,zt)|0,te=te+Math.imul(ue,hr)|0;var Qe=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,ie=Math.imul(Be,rt),ne=Math.imul(Be,Ft),ne=ne+Math.imul(Le,rt)|0,te=Math.imul(Le,Ft),ie=ie+Math.imul(he,Et)|0,ne=ne+Math.imul(he,jt)|0,ne=ne+Math.imul(xe,Et)|0,te=te+Math.imul(xe,jt)|0,ie=ie+Math.imul(Re,qt)|0,ne=ne+Math.imul(Re,_r)|0,ne=ne+Math.imul(Ne,qt)|0,te=te+Math.imul(Ne,_r)|0,ie=ie+Math.imul(ge,zt)|0,ne=ne+Math.imul(ge,hr)|0,ne=ne+Math.imul(ye,zt)|0,te=te+Math.imul(ye,hr)|0,ie=ie+Math.imul(le,Ht)|0,ne=ne+Math.imul(le,gr)|0,ne=ne+Math.imul(ue,Ht)|0,te=te+Math.imul(ue,gr)|0;var it=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(it>>>26)|0,it&=67108863,ie=Math.imul(Ie,rt),ne=Math.imul(Ie,Ft),ne=ne+Math.imul(Me,rt)|0,te=Math.imul(Me,Ft),ie=ie+Math.imul(Be,Et)|0,ne=ne+Math.imul(Be,jt)|0,ne=ne+Math.imul(Le,Et)|0,te=te+Math.imul(Le,jt)|0,ie=ie+Math.imul(he,qt)|0,ne=ne+Math.imul(he,_r)|0,ne=ne+Math.imul(xe,qt)|0,te=te+Math.imul(xe,_r)|0,ie=ie+Math.imul(Re,zt)|0,ne=ne+Math.imul(Re,hr)|0,ne=ne+Math.imul(Ne,zt)|0,te=te+Math.imul(Ne,hr)|0,ie=ie+Math.imul(ge,Ht)|0,ne=ne+Math.imul(ge,gr)|0,ne=ne+Math.imul(ye,Ht)|0,te=te+Math.imul(ye,gr)|0,ie=ie+Math.imul(le,Kt)|0,ne=ne+Math.imul(le,$r)|0,ne=ne+Math.imul(ue,Kt)|0,te=te+Math.imul(ue,$r)|0;var lt=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(lt>>>26)|0,lt&=67108863,ie=Math.imul(We,rt),ne=Math.imul(We,Ft),ne=ne+Math.imul(Ue,rt)|0,te=Math.imul(Ue,Ft),ie=ie+Math.imul(Ie,Et)|0,ne=ne+Math.imul(Ie,jt)|0,ne=ne+Math.imul(Me,Et)|0,te=te+Math.imul(Me,jt)|0,ie=ie+Math.imul(Be,qt)|0,ne=ne+Math.imul(Be,_r)|0,ne=ne+Math.imul(Le,qt)|0,te=te+Math.imul(Le,_r)|0,ie=ie+Math.imul(he,zt)|0,ne=ne+Math.imul(he,hr)|0,ne=ne+Math.imul(xe,zt)|0,te=te+Math.imul(xe,hr)|0,ie=ie+Math.imul(Re,Ht)|0,ne=ne+Math.imul(Re,gr)|0,ne=ne+Math.imul(Ne,Ht)|0,te=te+Math.imul(Ne,gr)|0,ie=ie+Math.imul(ge,Kt)|0,ne=ne+Math.imul(ge,$r)|0,ne=ne+Math.imul(ye,Kt)|0,te=te+Math.imul(ye,$r)|0,ie=ie+Math.imul(le,Ut)|0,ne=ne+Math.imul(le,wr)|0,ne=ne+Math.imul(ue,Ut)|0,te=te+Math.imul(ue,wr)|0;var vt=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(vt>>>26)|0,vt&=67108863,ie=Math.imul(et,rt),ne=Math.imul(et,Ft),ne=ne+Math.imul(ot,rt)|0,te=Math.imul(ot,Ft),ie=ie+Math.imul(We,Et)|0,ne=ne+Math.imul(We,jt)|0,ne=ne+Math.imul(Ue,Et)|0,te=te+Math.imul(Ue,jt)|0,ie=ie+Math.imul(Ie,qt)|0,ne=ne+Math.imul(Ie,_r)|0,ne=ne+Math.imul(Me,qt)|0,te=te+Math.imul(Me,_r)|0,ie=ie+Math.imul(Be,zt)|0,ne=ne+Math.imul(Be,hr)|0,ne=ne+Math.imul(Le,zt)|0,te=te+Math.imul(Le,hr)|0,ie=ie+Math.imul(he,Ht)|0,ne=ne+Math.imul(he,gr)|0,ne=ne+Math.imul(xe,Ht)|0,te=te+Math.imul(xe,gr)|0,ie=ie+Math.imul(Re,Kt)|0,ne=ne+Math.imul(Re,$r)|0,ne=ne+Math.imul(Ne,Kt)|0,te=te+Math.imul(Ne,$r)|0,ie=ie+Math.imul(ge,Ut)|0,ne=ne+Math.imul(ge,wr)|0,ne=ne+Math.imul(ye,Ut)|0,te=te+Math.imul(ye,wr)|0,ie=ie+Math.imul(le,ke)|0,ne=ne+Math.imul(le,Se)|0,ne=ne+Math.imul(ue,ke)|0,te=te+Math.imul(ue,Se)|0;var bt=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(bt>>>26)|0,bt&=67108863,ie=Math.imul(Oe,rt),ne=Math.imul(Oe,Ft),ne=ne+Math.imul(we,rt)|0,te=Math.imul(we,Ft),ie=ie+Math.imul(et,Et)|0,ne=ne+Math.imul(et,jt)|0,ne=ne+Math.imul(ot,Et)|0,te=te+Math.imul(ot,jt)|0,ie=ie+Math.imul(We,qt)|0,ne=ne+Math.imul(We,_r)|0,ne=ne+Math.imul(Ue,qt)|0,te=te+Math.imul(Ue,_r)|0,ie=ie+Math.imul(Ie,zt)|0,ne=ne+Math.imul(Ie,hr)|0,ne=ne+Math.imul(Me,zt)|0,te=te+Math.imul(Me,hr)|0,ie=ie+Math.imul(Be,Ht)|0,ne=ne+Math.imul(Be,gr)|0,ne=ne+Math.imul(Le,Ht)|0,te=te+Math.imul(Le,gr)|0,ie=ie+Math.imul(he,Kt)|0,ne=ne+Math.imul(he,$r)|0,ne=ne+Math.imul(xe,Kt)|0,te=te+Math.imul(xe,$r)|0,ie=ie+Math.imul(Re,Ut)|0,ne=ne+Math.imul(Re,wr)|0,ne=ne+Math.imul(Ne,Ut)|0,te=te+Math.imul(Ne,wr)|0,ie=ie+Math.imul(ge,ke)|0,ne=ne+Math.imul(ge,Se)|0,ne=ne+Math.imul(ye,ke)|0,te=te+Math.imul(ye,Se)|0,ie=ie+Math.imul(le,_e)|0,ne=ne+Math.imul(le,$e)|0,ne=ne+Math.imul(ue,_e)|0,te=te+Math.imul(ue,$e)|0;var dt=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(dt>>>26)|0,dt&=67108863,ie=Math.imul(ze,rt),ne=Math.imul(ze,Ft),ne=ne+Math.imul(Ze,rt)|0,te=Math.imul(Ze,Ft),ie=ie+Math.imul(Oe,Et)|0,ne=ne+Math.imul(Oe,jt)|0,ne=ne+Math.imul(we,Et)|0,te=te+Math.imul(we,jt)|0,ie=ie+Math.imul(et,qt)|0,ne=ne+Math.imul(et,_r)|0,ne=ne+Math.imul(ot,qt)|0,te=te+Math.imul(ot,_r)|0,ie=ie+Math.imul(We,zt)|0,ne=ne+Math.imul(We,hr)|0,ne=ne+Math.imul(Ue,zt)|0,te=te+Math.imul(Ue,hr)|0,ie=ie+Math.imul(Ie,Ht)|0,ne=ne+Math.imul(Ie,gr)|0,ne=ne+Math.imul(Me,Ht)|0,te=te+Math.imul(Me,gr)|0,ie=ie+Math.imul(Be,Kt)|0,ne=ne+Math.imul(Be,$r)|0,ne=ne+Math.imul(Le,Kt)|0,te=te+Math.imul(Le,$r)|0,ie=ie+Math.imul(he,Ut)|0,ne=ne+Math.imul(he,wr)|0,ne=ne+Math.imul(xe,Ut)|0,te=te+Math.imul(xe,wr)|0,ie=ie+Math.imul(Re,ke)|0,ne=ne+Math.imul(Re,Se)|0,ne=ne+Math.imul(Ne,ke)|0,te=te+Math.imul(Ne,Se)|0,ie=ie+Math.imul(ge,_e)|0,ne=ne+Math.imul(ge,$e)|0,ne=ne+Math.imul(ye,_e)|0,te=te+Math.imul(ye,$e)|0,ie=ie+Math.imul(le,Fe)|0,ne=ne+Math.imul(le,qe)|0,ne=ne+Math.imul(ue,Fe)|0,te=te+Math.imul(ue,qe)|0;var yt=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(yt>>>26)|0,yt&=67108863,ie=Math.imul(ze,Et),ne=Math.imul(ze,jt),ne=ne+Math.imul(Ze,Et)|0,te=Math.imul(Ze,jt),ie=ie+Math.imul(Oe,qt)|0,ne=ne+Math.imul(Oe,_r)|0,ne=ne+Math.imul(we,qt)|0,te=te+Math.imul(we,_r)|0,ie=ie+Math.imul(et,zt)|0,ne=ne+Math.imul(et,hr)|0,ne=ne+Math.imul(ot,zt)|0,te=te+Math.imul(ot,hr)|0,ie=ie+Math.imul(We,Ht)|0,ne=ne+Math.imul(We,gr)|0,ne=ne+Math.imul(Ue,Ht)|0,te=te+Math.imul(Ue,gr)|0,ie=ie+Math.imul(Ie,Kt)|0,ne=ne+Math.imul(Ie,$r)|0,ne=ne+Math.imul(Me,Kt)|0,te=te+Math.imul(Me,$r)|0,ie=ie+Math.imul(Be,Ut)|0,ne=ne+Math.imul(Be,wr)|0,ne=ne+Math.imul(Le,Ut)|0,te=te+Math.imul(Le,wr)|0,ie=ie+Math.imul(he,ke)|0,ne=ne+Math.imul(he,Se)|0,ne=ne+Math.imul(xe,ke)|0,te=te+Math.imul(xe,Se)|0,ie=ie+Math.imul(Re,_e)|0,ne=ne+Math.imul(Re,$e)|0,ne=ne+Math.imul(Ne,_e)|0,te=te+Math.imul(Ne,$e)|0,ie=ie+Math.imul(ge,Fe)|0,ne=ne+Math.imul(ge,qe)|0,ne=ne+Math.imul(ye,Fe)|0,te=te+Math.imul(ye,qe)|0;var Tt=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,ie=Math.imul(ze,qt),ne=Math.imul(ze,_r),ne=ne+Math.imul(Ze,qt)|0,te=Math.imul(Ze,_r),ie=ie+Math.imul(Oe,zt)|0,ne=ne+Math.imul(Oe,hr)|0,ne=ne+Math.imul(we,zt)|0,te=te+Math.imul(we,hr)|0,ie=ie+Math.imul(et,Ht)|0,ne=ne+Math.imul(et,gr)|0,ne=ne+Math.imul(ot,Ht)|0,te=te+Math.imul(ot,gr)|0,ie=ie+Math.imul(We,Kt)|0,ne=ne+Math.imul(We,$r)|0,ne=ne+Math.imul(Ue,Kt)|0,te=te+Math.imul(Ue,$r)|0,ie=ie+Math.imul(Ie,Ut)|0,ne=ne+Math.imul(Ie,wr)|0,ne=ne+Math.imul(Me,Ut)|0,te=te+Math.imul(Me,wr)|0,ie=ie+Math.imul(Be,ke)|0,ne=ne+Math.imul(Be,Se)|0,ne=ne+Math.imul(Le,ke)|0,te=te+Math.imul(Le,Se)|0,ie=ie+Math.imul(he,_e)|0,ne=ne+Math.imul(he,$e)|0,ne=ne+Math.imul(xe,_e)|0,te=te+Math.imul(xe,$e)|0,ie=ie+Math.imul(Re,Fe)|0,ne=ne+Math.imul(Re,qe)|0,ne=ne+Math.imul(Ne,Fe)|0,te=te+Math.imul(Ne,qe)|0;var kt=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(kt>>>26)|0,kt&=67108863,ie=Math.imul(ze,zt),ne=Math.imul(ze,hr),ne=ne+Math.imul(Ze,zt)|0,te=Math.imul(Ze,hr),ie=ie+Math.imul(Oe,Ht)|0,ne=ne+Math.imul(Oe,gr)|0,ne=ne+Math.imul(we,Ht)|0,te=te+Math.imul(we,gr)|0,ie=ie+Math.imul(et,Kt)|0,ne=ne+Math.imul(et,$r)|0,ne=ne+Math.imul(ot,Kt)|0,te=te+Math.imul(ot,$r)|0,ie=ie+Math.imul(We,Ut)|0,ne=ne+Math.imul(We,wr)|0,ne=ne+Math.imul(Ue,Ut)|0,te=te+Math.imul(Ue,wr)|0,ie=ie+Math.imul(Ie,ke)|0,ne=ne+Math.imul(Ie,Se)|0,ne=ne+Math.imul(Me,ke)|0,te=te+Math.imul(Me,Se)|0,ie=ie+Math.imul(Be,_e)|0,ne=ne+Math.imul(Be,$e)|0,ne=ne+Math.imul(Le,_e)|0,te=te+Math.imul(Le,$e)|0,ie=ie+Math.imul(he,Fe)|0,ne=ne+Math.imul(he,qe)|0,ne=ne+Math.imul(xe,Fe)|0,te=te+Math.imul(xe,qe)|0;var Pt=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,ie=Math.imul(ze,Ht),ne=Math.imul(ze,gr),ne=ne+Math.imul(Ze,Ht)|0,te=Math.imul(Ze,gr),ie=ie+Math.imul(Oe,Kt)|0,ne=ne+Math.imul(Oe,$r)|0,ne=ne+Math.imul(we,Kt)|0,te=te+Math.imul(we,$r)|0,ie=ie+Math.imul(et,Ut)|0,ne=ne+Math.imul(et,wr)|0,ne=ne+Math.imul(ot,Ut)|0,te=te+Math.imul(ot,wr)|0,ie=ie+Math.imul(We,ke)|0,ne=ne+Math.imul(We,Se)|0,ne=ne+Math.imul(Ue,ke)|0,te=te+Math.imul(Ue,Se)|0,ie=ie+Math.imul(Ie,_e)|0,ne=ne+Math.imul(Ie,$e)|0,ne=ne+Math.imul(Me,_e)|0,te=te+Math.imul(Me,$e)|0,ie=ie+Math.imul(Be,Fe)|0,ne=ne+Math.imul(Be,qe)|0,ne=ne+Math.imul(Le,Fe)|0,te=te+Math.imul(Le,qe)|0;var It=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(It>>>26)|0,It&=67108863,ie=Math.imul(ze,Kt),ne=Math.imul(ze,$r),ne=ne+Math.imul(Ze,Kt)|0,te=Math.imul(Ze,$r),ie=ie+Math.imul(Oe,Ut)|0,ne=ne+Math.imul(Oe,wr)|0,ne=ne+Math.imul(we,Ut)|0,te=te+Math.imul(we,wr)|0,ie=ie+Math.imul(et,ke)|0,ne=ne+Math.imul(et,Se)|0,ne=ne+Math.imul(ot,ke)|0,te=te+Math.imul(ot,Se)|0,ie=ie+Math.imul(We,_e)|0,ne=ne+Math.imul(We,$e)|0,ne=ne+Math.imul(Ue,_e)|0,te=te+Math.imul(Ue,$e)|0,ie=ie+Math.imul(Ie,Fe)|0,ne=ne+Math.imul(Ie,qe)|0,ne=ne+Math.imul(Me,Fe)|0,te=te+Math.imul(Me,qe)|0;var Ot=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,ie=Math.imul(ze,Ut),ne=Math.imul(ze,wr),ne=ne+Math.imul(Ze,Ut)|0,te=Math.imul(Ze,wr),ie=ie+Math.imul(Oe,ke)|0,ne=ne+Math.imul(Oe,Se)|0,ne=ne+Math.imul(we,ke)|0,te=te+Math.imul(we,Se)|0,ie=ie+Math.imul(et,_e)|0,ne=ne+Math.imul(et,$e)|0,ne=ne+Math.imul(ot,_e)|0,te=te+Math.imul(ot,$e)|0,ie=ie+Math.imul(We,Fe)|0,ne=ne+Math.imul(We,qe)|0,ne=ne+Math.imul(Ue,Fe)|0,te=te+Math.imul(Ue,qe)|0;var Mt=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,ie=Math.imul(ze,ke),ne=Math.imul(ze,Se),ne=ne+Math.imul(Ze,ke)|0,te=Math.imul(Ze,Se),ie=ie+Math.imul(Oe,_e)|0,ne=ne+Math.imul(Oe,$e)|0,ne=ne+Math.imul(we,_e)|0,te=te+Math.imul(we,$e)|0,ie=ie+Math.imul(et,Fe)|0,ne=ne+Math.imul(et,qe)|0,ne=ne+Math.imul(ot,Fe)|0,te=te+Math.imul(ot,qe)|0;var Dt=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,ie=Math.imul(ze,_e),ne=Math.imul(ze,$e),ne=ne+Math.imul(Ze,_e)|0,te=Math.imul(Ze,$e),ie=ie+Math.imul(Oe,Fe)|0,ne=ne+Math.imul(Oe,qe)|0,ne=ne+Math.imul(we,Fe)|0,te=te+Math.imul(we,qe)|0;var mt=(oe+ie|0)+((ne&8191)<<13)|0;oe=(te+(ne>>>13)|0)+(mt>>>26)|0,mt&=67108863,ie=Math.imul(ze,Fe),ne=Math.imul(ze,qe),ne=ne+Math.imul(Ze,Fe)|0,te=Math.imul(Ze,qe);var gt=(oe+ie|0)+((ne&8191)<<13)|0;return oe=(te+(ne>>>13)|0)+(gt>>>26)|0,gt&=67108863,re[0]=Ye,re[1]=Je,re[2]=tt,re[3]=Qe,re[4]=it,re[5]=lt,re[6]=vt,re[7]=bt,re[8]=dt,re[9]=yt,re[10]=Tt,re[11]=kt,re[12]=Pt,re[13]=It,re[14]=Ot,re[15]=Mt,re[16]=Dt,re[17]=mt,re[18]=gt,oe!==0&&(re[19]=oe,U.length++),U};Math.imul||(F=O);function M(pe,G,Y){Y.negative=G.negative^pe.negative,Y.length=pe.length+G.length;for(var U=0,W=0,ee=0;ee<Y.length-1;ee++){var re=W;W=0;for(var oe=U&67108863,ie=Math.min(ee,G.length-1),ne=Math.max(0,ee-pe.length+1);ne<=ie;ne++){var te=ee-ne,K=pe.words[te]|0,le=G.words[ne]|0,ue=K*le,be=ue&67108863;re=re+(ue/67108864|0)|0,be=be+oe|0,oe=be&67108863,re=re+(be>>>26)|0,W+=re>>>26,re&=67108863}Y.words[ee]=oe,U=re,re=W}return U!==0?Y.words[ee]=U:Y.length--,Y.strip()}function L(pe,G,Y){var U=new j;return U.mulp(pe,G,Y)}E.prototype.mulTo=function(G,Y){var U,W=this.length+G.length;return this.length===10&&G.length===10?U=F(this,G,Y):W<63?U=O(this,G,Y):W<1024?U=M(this,G,Y):U=L(this,G,Y),U};function j(pe,G){this.x=pe,this.y=G}j.prototype.makeRBT=function(G){for(var Y=new Array(G),U=E.prototype._countBits(G)-1,W=0;W<G;W++)Y[W]=this.revBin(W,U,G);return Y},j.prototype.revBin=function(G,Y,U){if(G===0||G===U-1)return G;for(var W=0,ee=0;ee<Y;ee++)W|=(G&1)<<Y-ee-1,G>>=1;return W},j.prototype.permute=function(G,Y,U,W,ee,re){for(var oe=0;oe<re;oe++)W[oe]=Y[G[oe]],ee[oe]=U[G[oe]]},j.prototype.transform=function(G,Y,U,W,ee,re){this.permute(re,G,Y,U,W,ee);for(var oe=1;oe<ee;oe<<=1)for(var ie=oe<<1,ne=Math.cos(2*Math.PI/ie),te=Math.sin(2*Math.PI/ie),K=0;K<ee;K+=ie)for(var le=ne,ue=te,be=0;be<oe;be++){var ge=U[K+be],ye=W[K+be],Ee=U[K+be+oe],Re=W[K+be+oe],Ne=le*Ee-ue*Re;Re=le*Re+ue*Ee,Ee=Ne,U[K+be]=ge+Ee,W[K+be]=ye+Re,U[K+be+oe]=ge-Ee,W[K+be+oe]=ye-Re,be!==ie&&(Ne=ne*le-te*ue,ue=ne*ue+te*le,le=Ne)}},j.prototype.guessLen13b=function(G,Y){var U=Math.max(Y,G)|1,W=U&1,ee=0;for(U=U/2|0;U;U=U>>>1)ee++;return 1<<ee+1+W},j.prototype.conjugate=function(G,Y,U){if(!(U<=1))for(var W=0;W<U/2;W++){var ee=G[W];G[W]=G[U-W-1],G[U-W-1]=ee,ee=Y[W],Y[W]=-Y[U-W-1],Y[U-W-1]=-ee}},j.prototype.normalize13b=function(G,Y){for(var U=0,W=0;W<Y/2;W++){var ee=Math.round(G[2*W+1]/Y)*8192+Math.round(G[2*W]/Y)+U;G[W]=ee&67108863,ee<67108864?U=0:U=ee/67108864|0}return G},j.prototype.convert13b=function(G,Y,U,W){for(var ee=0,re=0;re<Y;re++)ee=ee+(G[re]|0),U[2*re]=ee&8191,ee=ee>>>13,U[2*re+1]=ee&8191,ee=ee>>>13;for(re=2*Y;re<W;++re)U[re]=0;x(ee===0),x((ee&-8192)===0)},j.prototype.stub=function(G){for(var Y=new Array(G),U=0;U<G;U++)Y[U]=0;return Y},j.prototype.mulp=function(G,Y,U){var W=2*this.guessLen13b(G.length,Y.length),ee=this.makeRBT(W),re=this.stub(W),oe=new Array(W),ie=new Array(W),ne=new Array(W),te=new Array(W),K=new Array(W),le=new Array(W),ue=U.words;ue.length=W,this.convert13b(G.words,G.length,oe,W),this.convert13b(Y.words,Y.length,te,W),this.transform(oe,re,ie,ne,W,ee),this.transform(te,re,K,le,W,ee);for(var be=0;be<W;be++){var ge=ie[be]*K[be]-ne[be]*le[be];ne[be]=ie[be]*le[be]+ne[be]*K[be],ie[be]=ge}return this.conjugate(ie,ne,W),this.transform(ie,ne,ue,re,W,ee),this.conjugate(ue,re,W),this.normalize13b(ue,W),U.negative=G.negative^Y.negative,U.length=G.length+Y.length,U.strip()},E.prototype.mul=function(G){var Y=new E(null);return Y.words=new Array(this.length+G.length),this.mulTo(G,Y)},E.prototype.mulf=function(G){var Y=new E(null);return Y.words=new Array(this.length+G.length),L(this,G,Y)},E.prototype.imul=function(G){return this.clone().mulTo(G,this)},E.prototype.imuln=function(G){x(typeof G=="number"),x(G<67108864);for(var Y=0,U=0;U<this.length;U++){var W=(this.words[U]|0)*G,ee=(W&67108863)+(Y&67108863);Y>>=26,Y+=W/67108864|0,Y+=ee>>>26,this.words[U]=ee&67108863}return Y!==0&&(this.words[U]=Y,this.length++),this},E.prototype.muln=function(G){return this.clone().imuln(G)},E.prototype.sqr=function(){return this.mul(this)},E.prototype.isqr=function(){return this.imul(this.clone())},E.prototype.pow=function(G){var Y=D(G);if(Y.length===0)return new E(1);for(var U=this,W=0;W<Y.length&&Y[W]===0;W++,U=U.sqr());if(++W<Y.length)for(var ee=U.sqr();W<Y.length;W++,ee=ee.sqr())Y[W]!==0&&(U=U.mul(ee));return U},E.prototype.iushln=function(G){x(typeof G=="number"&&G>=0);var Y=G%26,U=(G-Y)/26,W=67108863>>>26-Y<<26-Y,ee;if(Y!==0){var re=0;for(ee=0;ee<this.length;ee++){var oe=this.words[ee]&W,ie=(this.words[ee]|0)-oe<<Y;this.words[ee]=ie|re,re=oe>>>26-Y}re&&(this.words[ee]=re,this.length++)}if(U!==0){for(ee=this.length-1;ee>=0;ee--)this.words[ee+U]=this.words[ee];for(ee=0;ee<U;ee++)this.words[ee]=0;this.length+=U}return this.strip()},E.prototype.ishln=function(G){return x(this.negative===0),this.iushln(G)},E.prototype.iushrn=function(G,Y,U){x(typeof G=="number"&&G>=0);var W;Y?W=(Y-Y%26)/26:W=0;var ee=G%26,re=Math.min((G-ee)/26,this.length),oe=67108863^67108863>>>ee<<ee,ie=U;if(W-=re,W=Math.max(0,W),ie){for(var ne=0;ne<re;ne++)ie.words[ne]=this.words[ne];ie.length=re}if(re!==0)if(this.length>re)for(this.length-=re,ne=0;ne<this.length;ne++)this.words[ne]=this.words[ne+re];else this.words[0]=0,this.length=1;var te=0;for(ne=this.length-1;ne>=0&&(te!==0||ne>=W);ne--){var K=this.words[ne]|0;this.words[ne]=te<<26-ee|K>>>ee,te=K&oe}return ie&&te!==0&&(ie.words[ie.length++]=te),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},E.prototype.ishrn=function(G,Y,U){return x(this.negative===0),this.iushrn(G,Y,U)},E.prototype.shln=function(G){return this.clone().ishln(G)},E.prototype.ushln=function(G){return this.clone().iushln(G)},E.prototype.shrn=function(G){return this.clone().ishrn(G)},E.prototype.ushrn=function(G){return this.clone().iushrn(G)},E.prototype.testn=function(G){x(typeof G=="number"&&G>=0);var Y=G%26,U=(G-Y)/26,W=1<<Y;if(this.length<=U)return!1;var ee=this.words[U];return!!(ee&W)},E.prototype.imaskn=function(G){x(typeof G=="number"&&G>=0);var Y=G%26,U=(G-Y)/26;if(x(this.negative===0,"imaskn works only with positive numbers"),this.length<=U)return this;if(Y!==0&&U++,this.length=Math.min(U,this.length),Y!==0){var W=67108863^67108863>>>Y<<Y;this.words[this.length-1]&=W}return this.strip()},E.prototype.maskn=function(G){return this.clone().imaskn(G)},E.prototype.iaddn=function(G){return x(typeof G=="number"),x(G<67108864),G<0?this.isubn(-G):this.negative!==0?this.length===1&&(this.words[0]|0)<G?(this.words[0]=G-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(G),this.negative=1,this):this._iaddn(G)},E.prototype._iaddn=function(G){this.words[0]+=G;for(var Y=0;Y<this.length&&this.words[Y]>=67108864;Y++)this.words[Y]-=67108864,Y===this.length-1?this.words[Y+1]=1:this.words[Y+1]++;return this.length=Math.max(this.length,Y+1),this},E.prototype.isubn=function(G){if(x(typeof G=="number"),x(G<67108864),G<0)return this.iaddn(-G);if(this.negative!==0)return this.negative=0,this.iaddn(G),this.negative=1,this;if(this.words[0]-=G,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Y=0;Y<this.length&&this.words[Y]<0;Y++)this.words[Y]+=67108864,this.words[Y+1]-=1;return this.strip()},E.prototype.addn=function(G){return this.clone().iaddn(G)},E.prototype.subn=function(G){return this.clone().isubn(G)},E.prototype.iabs=function(){return this.negative=0,this},E.prototype.abs=function(){return this.clone().iabs()},E.prototype._ishlnsubmul=function(G,Y,U){var W=G.length+U,ee;this._expand(W);var re,oe=0;for(ee=0;ee<G.length;ee++){re=(this.words[ee+U]|0)+oe;var ie=(G.words[ee]|0)*Y;re-=ie&67108863,oe=(re>>26)-(ie/67108864|0),this.words[ee+U]=re&67108863}for(;ee<this.length-U;ee++)re=(this.words[ee+U]|0)+oe,oe=re>>26,this.words[ee+U]=re&67108863;if(oe===0)return this.strip();for(x(oe===-1),oe=0,ee=0;ee<this.length;ee++)re=-(this.words[ee]|0)+oe,oe=re>>26,this.words[ee]=re&67108863;return this.negative=1,this.strip()},E.prototype._wordDiv=function(G,Y){var U=this.length-G.length,W=this.clone(),ee=G,re=ee.words[ee.length-1]|0,oe=this._countBits(re);U=26-oe,U!==0&&(ee=ee.ushln(U),W.iushln(U),re=ee.words[ee.length-1]|0);var ie=W.length-ee.length,ne;if(Y!=="mod"){ne=new E(null),ne.length=ie+1,ne.words=new Array(ne.length);for(var te=0;te<ne.length;te++)ne.words[te]=0}var K=W.clone()._ishlnsubmul(ee,1,ie);K.negative===0&&(W=K,ne&&(ne.words[ie]=1));for(var le=ie-1;le>=0;le--){var ue=(W.words[ee.length+le]|0)*67108864+(W.words[ee.length+le-1]|0);for(ue=Math.min(ue/re|0,67108863),W._ishlnsubmul(ee,ue,le);W.negative!==0;)ue--,W.negative=0,W._ishlnsubmul(ee,1,le),W.isZero()||(W.negative^=1);ne&&(ne.words[le]=ue)}return ne&&ne.strip(),W.strip(),Y!=="div"&&U!==0&&W.iushrn(U),{div:ne||null,mod:W}},E.prototype.divmod=function(G,Y,U){if(x(!G.isZero()),this.isZero())return{div:new E(0),mod:new E(0)};var W,ee,re;return this.negative!==0&&G.negative===0?(re=this.neg().divmod(G,Y),Y!=="mod"&&(W=re.div.neg()),Y!=="div"&&(ee=re.mod.neg(),U&&ee.negative!==0&&ee.iadd(G)),{div:W,mod:ee}):this.negative===0&&G.negative!==0?(re=this.divmod(G.neg(),Y),Y!=="mod"&&(W=re.div.neg()),{div:W,mod:re.mod}):this.negative&G.negative?(re=this.neg().divmod(G.neg(),Y),Y!=="div"&&(ee=re.mod.neg(),U&&ee.negative!==0&&ee.isub(G)),{div:re.div,mod:ee}):G.length>this.length||this.cmp(G)<0?{div:new E(0),mod:this}:G.length===1?Y==="div"?{div:this.divn(G.words[0]),mod:null}:Y==="mod"?{div:null,mod:new E(this.modn(G.words[0]))}:{div:this.divn(G.words[0]),mod:new E(this.modn(G.words[0]))}:this._wordDiv(G,Y)},E.prototype.div=function(G){return this.divmod(G,"div",!1).div},E.prototype.mod=function(G){return this.divmod(G,"mod",!1).mod},E.prototype.umod=function(G){return this.divmod(G,"mod",!0).mod},E.prototype.divRound=function(G){var Y=this.divmod(G);if(Y.mod.isZero())return Y.div;var U=Y.div.negative!==0?Y.mod.isub(G):Y.mod,W=G.ushrn(1),ee=G.andln(1),re=U.cmp(W);return re<0||ee===1&&re===0?Y.div:Y.div.negative!==0?Y.div.isubn(1):Y.div.iaddn(1)},E.prototype.modn=function(G){x(G<=67108863);for(var Y=(1<<26)%G,U=0,W=this.length-1;W>=0;W--)U=(Y*U+(this.words[W]|0))%G;return U},E.prototype.idivn=function(G){x(G<=67108863);for(var Y=0,U=this.length-1;U>=0;U--){var W=(this.words[U]|0)+Y*67108864;this.words[U]=W/G|0,Y=W%G}return this.strip()},E.prototype.divn=function(G){return this.clone().idivn(G)},E.prototype.egcd=function(G){x(G.negative===0),x(!G.isZero());var Y=this,U=G.clone();Y.negative!==0?Y=Y.umod(G):Y=Y.clone();for(var W=new E(1),ee=new E(0),re=new E(0),oe=new E(1),ie=0;Y.isEven()&&U.isEven();)Y.iushrn(1),U.iushrn(1),++ie;for(var ne=U.clone(),te=Y.clone();!Y.isZero();){for(var K=0,le=1;!(Y.words[0]&le)&&K<26;++K,le<<=1);if(K>0)for(Y.iushrn(K);K-- >0;)(W.isOdd()||ee.isOdd())&&(W.iadd(ne),ee.isub(te)),W.iushrn(1),ee.iushrn(1);for(var ue=0,be=1;!(U.words[0]&be)&&ue<26;++ue,be<<=1);if(ue>0)for(U.iushrn(ue);ue-- >0;)(re.isOdd()||oe.isOdd())&&(re.iadd(ne),oe.isub(te)),re.iushrn(1),oe.iushrn(1);Y.cmp(U)>=0?(Y.isub(U),W.isub(re),ee.isub(oe)):(U.isub(Y),re.isub(W),oe.isub(ee))}return{a:re,b:oe,gcd:U.iushln(ie)}},E.prototype._invmp=function(G){x(G.negative===0),x(!G.isZero());var Y=this,U=G.clone();Y.negative!==0?Y=Y.umod(G):Y=Y.clone();for(var W=new E(1),ee=new E(0),re=U.clone();Y.cmpn(1)>0&&U.cmpn(1)>0;){for(var oe=0,ie=1;!(Y.words[0]&ie)&&oe<26;++oe,ie<<=1);if(oe>0)for(Y.iushrn(oe);oe-- >0;)W.isOdd()&&W.iadd(re),W.iushrn(1);for(var ne=0,te=1;!(U.words[0]&te)&&ne<26;++ne,te<<=1);if(ne>0)for(U.iushrn(ne);ne-- >0;)ee.isOdd()&&ee.iadd(re),ee.iushrn(1);Y.cmp(U)>=0?(Y.isub(U),W.isub(ee)):(U.isub(Y),ee.isub(W))}var K;return Y.cmpn(1)===0?K=W:K=ee,K.cmpn(0)<0&&K.iadd(G),K},E.prototype.gcd=function(G){if(this.isZero())return G.abs();if(G.isZero())return this.abs();var Y=this.clone(),U=G.clone();Y.negative=0,U.negative=0;for(var W=0;Y.isEven()&&U.isEven();W++)Y.iushrn(1),U.iushrn(1);do{for(;Y.isEven();)Y.iushrn(1);for(;U.isEven();)U.iushrn(1);var ee=Y.cmp(U);if(ee<0){var re=Y;Y=U,U=re}else if(ee===0||U.cmpn(1)===0)break;Y.isub(U)}while(!0);return U.iushln(W)},E.prototype.invm=function(G){return this.egcd(G).a.umod(G)},E.prototype.isEven=function(){return(this.words[0]&1)===0},E.prototype.isOdd=function(){return(this.words[0]&1)===1},E.prototype.andln=function(G){return this.words[0]&G},E.prototype.bincn=function(G){x(typeof G=="number");var Y=G%26,U=(G-Y)/26,W=1<<Y;if(this.length<=U)return this._expand(U+1),this.words[U]|=W,this;for(var ee=W,re=U;ee!==0&&re<this.length;re++){var oe=this.words[re]|0;oe+=ee,ee=oe>>>26,oe&=67108863,this.words[re]=oe}return ee!==0&&(this.words[re]=ee,this.length++),this},E.prototype.isZero=function(){return this.length===1&&this.words[0]===0},E.prototype.cmpn=function(G){var Y=G<0;if(this.negative!==0&&!Y)return-1;if(this.negative===0&&Y)return 1;this.strip();var U;if(this.length>1)U=1;else{Y&&(G=-G),x(G<=67108863,"Number is too big");var W=this.words[0]|0;U=W===G?0:W<G?-1:1}return this.negative!==0?-U|0:U},E.prototype.cmp=function(G){if(this.negative!==0&&G.negative===0)return-1;if(this.negative===0&&G.negative!==0)return 1;var Y=this.ucmp(G);return this.negative!==0?-Y|0:Y},E.prototype.ucmp=function(G){if(this.length>G.length)return 1;if(this.length<G.length)return-1;for(var Y=0,U=this.length-1;U>=0;U--){var W=this.words[U]|0,ee=G.words[U]|0;if(W!==ee){W<ee?Y=-1:W>ee&&(Y=1);break}}return Y},E.prototype.gtn=function(G){return this.cmpn(G)===1},E.prototype.gt=function(G){return this.cmp(G)===1},E.prototype.gten=function(G){return this.cmpn(G)>=0},E.prototype.gte=function(G){return this.cmp(G)>=0},E.prototype.ltn=function(G){return this.cmpn(G)===-1},E.prototype.lt=function(G){return this.cmp(G)===-1},E.prototype.lten=function(G){return this.cmpn(G)<=0},E.prototype.lte=function(G){return this.cmp(G)<=0},E.prototype.eqn=function(G){return this.cmpn(G)===0},E.prototype.eq=function(G){return this.cmp(G)===0},E.red=function(G){return new ce(G)},E.prototype.toRed=function(G){return x(!this.red,"Already a number in reduction context"),x(this.negative===0,"red works only with positives"),G.convertTo(this)._forceRed(G)},E.prototype.fromRed=function(){return x(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},E.prototype._forceRed=function(G){return this.red=G,this},E.prototype.forceRed=function(G){return x(!this.red,"Already a number in reduction context"),this._forceRed(G)},E.prototype.redAdd=function(G){return x(this.red,"redAdd works only with red numbers"),this.red.add(this,G)},E.prototype.redIAdd=function(G){return x(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,G)},E.prototype.redSub=function(G){return x(this.red,"redSub works only with red numbers"),this.red.sub(this,G)},E.prototype.redISub=function(G){return x(this.red,"redISub works only with red numbers"),this.red.isub(this,G)},E.prototype.redShl=function(G){return x(this.red,"redShl works only with red numbers"),this.red.shl(this,G)},E.prototype.redMul=function(G){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,G),this.red.mul(this,G)},E.prototype.redIMul=function(G){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,G),this.red.imul(this,G)},E.prototype.redSqr=function(){return x(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},E.prototype.redISqr=function(){return x(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},E.prototype.redSqrt=function(){return x(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},E.prototype.redInvm=function(){return x(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},E.prototype.redNeg=function(){return x(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},E.prototype.redPow=function(G){return x(this.red&&!G.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,G)};var q={k256:null,p224:null,p192:null,p25519:null};function H(pe,G){this.name=pe,this.p=new E(G,16),this.n=this.p.bitLength(),this.k=new E(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}H.prototype._tmp=function(){var G=new E(null);return G.words=new Array(Math.ceil(this.n/13)),G},H.prototype.ireduce=function(G){var Y=G,U;do this.split(Y,this.tmp),Y=this.imulK(Y),Y=Y.iadd(this.tmp),U=Y.bitLength();while(U>this.n);var W=U<this.n?-1:Y.ucmp(this.p);return W===0?(Y.words[0]=0,Y.length=1):W>0?Y.isub(this.p):Y.strip!==void 0?Y.strip():Y._strip(),Y},H.prototype.split=function(G,Y){G.iushrn(this.n,0,Y)},H.prototype.imulK=function(G){return G.imul(this.k)};function X(){H.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}S(X,H),X.prototype.split=function(G,Y){for(var U=4194303,W=Math.min(G.length,9),ee=0;ee<W;ee++)Y.words[ee]=G.words[ee];if(Y.length=W,G.length<=9){G.words[0]=0,G.length=1;return}var re=G.words[9];for(Y.words[Y.length++]=re&U,ee=10;ee<G.length;ee++){var oe=G.words[ee]|0;G.words[ee-10]=(oe&U)<<4|re>>>22,re=oe}re>>>=22,G.words[ee-10]=re,re===0&&G.length>10?G.length-=10:G.length-=9},X.prototype.imulK=function(G){G.words[G.length]=0,G.words[G.length+1]=0,G.length+=2;for(var Y=0,U=0;U<G.length;U++){var W=G.words[U]|0;Y+=W*977,G.words[U]=Y&67108863,Y=W*64+(Y/67108864|0)}return G.words[G.length-1]===0&&(G.length--,G.words[G.length-1]===0&&G.length--),G};function J(){H.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}S(J,H);function Z(){H.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}S(Z,H);function ae(){H.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}S(ae,H),ae.prototype.imulK=function(G){for(var Y=0,U=0;U<G.length;U++){var W=(G.words[U]|0)*19+Y,ee=W&67108863;W>>>=26,G.words[U]=ee,Y=W}return Y!==0&&(G.words[G.length++]=Y),G},E._prime=function(G){if(q[G])return q[G];var Y;if(G==="k256")Y=new X;else if(G==="p224")Y=new J;else if(G==="p192")Y=new Z;else if(G==="p25519")Y=new ae;else throw new Error("Unknown prime "+G);return q[G]=Y,Y};function ce(pe){if(typeof pe=="string"){var G=E._prime(pe);this.m=G.p,this.prime=G}else x(pe.gtn(1),"modulus must be greater than 1"),this.m=pe,this.prime=null}ce.prototype._verify1=function(G){x(G.negative===0,"red works only with positives"),x(G.red,"red works only with red numbers")},ce.prototype._verify2=function(G,Y){x((G.negative|Y.negative)===0,"red works only with positives"),x(G.red&&G.red===Y.red,"red works only with red numbers")},ce.prototype.imod=function(G){return this.prime?this.prime.ireduce(G)._forceRed(this):G.umod(this.m)._forceRed(this)},ce.prototype.neg=function(G){return G.isZero()?G.clone():this.m.sub(G)._forceRed(this)},ce.prototype.add=function(G,Y){this._verify2(G,Y);var U=G.add(Y);return U.cmp(this.m)>=0&&U.isub(this.m),U._forceRed(this)},ce.prototype.iadd=function(G,Y){this._verify2(G,Y);var U=G.iadd(Y);return U.cmp(this.m)>=0&&U.isub(this.m),U},ce.prototype.sub=function(G,Y){this._verify2(G,Y);var U=G.sub(Y);return U.cmpn(0)<0&&U.iadd(this.m),U._forceRed(this)},ce.prototype.isub=function(G,Y){this._verify2(G,Y);var U=G.isub(Y);return U.cmpn(0)<0&&U.iadd(this.m),U},ce.prototype.shl=function(G,Y){return this._verify1(G),this.imod(G.ushln(Y))},ce.prototype.imul=function(G,Y){return this._verify2(G,Y),this.imod(G.imul(Y))},ce.prototype.mul=function(G,Y){return this._verify2(G,Y),this.imod(G.mul(Y))},ce.prototype.isqr=function(G){return this.imul(G,G.clone())},ce.prototype.sqr=function(G){return this.mul(G,G)},ce.prototype.sqrt=function(G){if(G.isZero())return G.clone();var Y=this.m.andln(3);if(x(Y%2===1),Y===3){var U=this.m.add(new E(1)).iushrn(2);return this.pow(G,U)}for(var W=this.m.subn(1),ee=0;!W.isZero()&&W.andln(1)===0;)ee++,W.iushrn(1);x(!W.isZero());var re=new E(1).toRed(this),oe=re.redNeg(),ie=this.m.subn(1).iushrn(1),ne=this.m.bitLength();for(ne=new E(2*ne*ne).toRed(this);this.pow(ne,ie).cmp(oe)!==0;)ne.redIAdd(oe);for(var te=this.pow(ne,W),K=this.pow(G,W.addn(1).iushrn(1)),le=this.pow(G,W),ue=ee;le.cmp(re)!==0;){for(var be=le,ge=0;be.cmp(re)!==0;ge++)be=be.redSqr();x(ge<ue);var ye=this.pow(te,new E(1).iushln(ue-ge-1));K=K.redMul(ye),te=ye.redSqr(),le=le.redMul(te),ue=ge}return K},ce.prototype.invm=function(G){var Y=G._invmp(this.m);return Y.negative!==0?(Y.negative=0,this.imod(Y).redNeg()):this.imod(Y)},ce.prototype.pow=function(G,Y){if(Y.isZero())return new E(1).toRed(this);if(Y.cmpn(1)===0)return G.clone();var U=4,W=new Array(1<<U);W[0]=new E(1).toRed(this),W[1]=G;for(var ee=2;ee<W.length;ee++)W[ee]=this.mul(W[ee-1],G);var re=W[0],oe=0,ie=0,ne=Y.bitLength()%26;for(ne===0&&(ne=26),ee=Y.length-1;ee>=0;ee--){for(var te=Y.words[ee],K=ne-1;K>=0;K--){var le=te>>K&1;if(re!==W[0]&&(re=this.sqr(re)),le===0&&oe===0){ie=0;continue}oe<<=1,oe|=le,ie++,!(ie!==U&&(ee!==0||K!==0))&&(re=this.mul(re,W[oe]),ie=0,oe=0)}ne=26}return re},ce.prototype.convertTo=function(G){var Y=G.umod(this.m);return Y===G?Y.clone():Y},ce.prototype.convertFrom=function(G){var Y=G.clone();return Y.red=null,Y},E.mont=function(G){return new ve(G)};function ve(pe){ce.call(this,pe),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new E(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S(ve,ce),ve.prototype.convertTo=function(G){return this.imod(G.ushln(this.shift))},ve.prototype.convertFrom=function(G){var Y=this.imod(G.mul(this.rinv));return Y.red=null,Y},ve.prototype.imul=function(G,Y){if(G.isZero()||Y.isZero())return G.words[0]=0,G.length=1,G;var U=G.imul(Y),W=U.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ee=U.isub(W).iushrn(this.shift),re=ee;return ee.cmp(this.m)>=0?re=ee.isub(this.m):ee.cmpn(0)<0&&(re=ee.iadd(this.m)),re._forceRed(this)},ve.prototype.mul=function(G,Y){if(G.isZero()||Y.isZero())return new E(0)._forceRed(this);var U=G.mul(Y),W=U.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ee=U.isub(W).iushrn(this.shift),re=ee;return ee.cmp(this.m)>=0?re=ee.isub(this.m):ee.cmpn(0)<0&&(re=ee.iadd(this.m)),re._forceRed(this)},ve.prototype.invm=function(G){var Y=this.imod(G._invmp(this.m).mul(this.r2));return Y._forceRed(this)}})(r,commonjsGlobal)}(bn$2)),bn$2.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var r;brorand.exports=function(S){return r||(r=new n(null)),r.generate(S)};function n(x){this.rand=x}if(brorand.exports.Rand=n,n.prototype.generate=function(S){return this._rand(S)},n.prototype._rand=function(S){if(this.rand.getBytes)return this.rand.getBytes(S);for(var E=new Uint8Array(S),C=0;C<E.length;C++)E[C]=this.rand.getByte();return E},typeof self=="object")self.crypto&&self.crypto.getRandomValues?n.prototype._rand=function(S){var E=new Uint8Array(S);return self.crypto.getRandomValues(E),E}:self.msCrypto&&self.msCrypto.getRandomValues?n.prototype._rand=function(S){var E=new Uint8Array(S);return self.msCrypto.getRandomValues(E),E}:typeof window=="object"&&(n.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var _=requireCryptoBrowserify();if(typeof _.randomBytes!="function")throw new Error("Not supported");n.prototype._rand=function(S){return _.randomBytes(S)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var r=requireBn$2(),n=requireBrorand();function _(x){this.rand=x||new n.Rand}return mr=_,_.create=function(S){return new _(S)},_.prototype._randbelow=function(S){var E=S.bitLength(),C=Math.ceil(E/8);do var T=new r(this.rand.generate(C));while(T.cmp(S)>=0);return T},_.prototype._randrange=function(S,E){var C=E.sub(S);return S.add(this._randbelow(C))},_.prototype.test=function(S,E,C){var T=S.bitLength(),B=r.mont(S),A=new r(1).toRed(B);E||(E=Math.max(1,T/48|0));for(var I=S.subn(1),N=0;!I.testn(N);N++);for(var V=S.shrn(N),D=I.toRed(B),O=!0;E>0;E--){var F=this._randrange(new r(2),I);C&&C(F);var M=F.toRed(B).redPow(V);if(!(M.cmp(A)===0||M.cmp(D)===0)){for(var L=1;L<N;L++){if(M=M.redSqr(),M.cmp(A)===0)return!1;if(M.cmp(D)===0)break}if(L===N)return!1}}return O},_.prototype.getDivisor=function(S,E){var C=S.bitLength(),T=r.mont(S),B=new r(1).toRed(T);E||(E=Math.max(1,C/48|0));for(var A=S.subn(1),I=0;!A.testn(I);I++);for(var N=S.shrn(I),V=A.toRed(T);E>0;E--){var D=this._randrange(new r(2),A),O=S.gcd(D);if(O.cmpn(1)!==0)return O;var F=D.toRed(T).redPow(N);if(!(F.cmp(B)===0||F.cmp(V)===0)){for(var M=1;M<I;M++){if(F=F.redSqr(),F.cmp(B)===0)return F.fromRed().subn(1).gcd(S);if(F.cmp(V)===0)break}if(M===I)return F=F.redSqr(),F.fromRed().subn(1).gcd(S)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var r=requireBrowser$b();generatePrime=M,M.simpleSieve=O,M.fermatTest=F;var n=requireBn$2(),_=new n(24),x=requireMr(),S=new x,E=new n(1),C=new n(2),T=new n(5);new n(16),new n(8);var B=new n(10),A=new n(3);new n(7);var I=new n(11),N=new n(4);new n(12);var V=null;function D(){if(V!==null)return V;var L=1048576,j=[];j[0]=2;for(var q=1,H=3;H<L;H+=2){for(var X=Math.ceil(Math.sqrt(H)),J=0;J<q&&j[J]<=X&&H%j[J]!==0;J++);q!==J&&j[J]<=X||(j[q++]=H)}return V=j,j}function O(L){for(var j=D(),q=0;q<j.length;q++)if(L.modn(j[q])===0)return L.cmpn(j[q])===0;return!0}function F(L){var j=n.mont(L);return C.toRed(j).redPow(L.subn(1)).fromRed().cmpn(1)===0}function M(L,j){if(L<16)return j===2||j===5?new n([140,123]):new n([140,39]);j=new n(j);for(var q,H;;){for(q=new n(r(Math.ceil(L/8)));q.bitLength()>L;)q.ishrn(1);if(q.isEven()&&q.iadd(E),q.testn(1)||q.iadd(C),j.cmp(C)){if(!j.cmp(T))for(;q.mod(B).cmp(A);)q.iadd(N)}else for(;q.mod(_).cmp(I);)q.iadd(N);if(H=q.shrn(1),O(H)&&O(q)&&F(H)&&F(q)&&S.test(H)&&S.test(q))return q}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var r=requireBn$2(),n=requireMr(),_=new n,x=new r(24),S=new r(11),E=new r(10),C=new r(3),T=new r(7),B=requireGeneratePrime(),A=requireBrowser$b();dh=O;function I(M,L){return L=L||"utf8",Buffer$5.isBuffer(M)||(M=new Buffer$5(M,L)),this._pub=new r(M),this}function N(M,L){return L=L||"utf8",Buffer$5.isBuffer(M)||(M=new Buffer$5(M,L)),this._priv=new r(M),this}var V={};function D(M,L){var j=L.toString("hex"),q=[j,M.toString(16)].join("_");if(q in V)return V[q];var H=0;if(M.isEven()||!B.simpleSieve||!B.fermatTest(M)||!_.test(M))return H+=1,j==="02"||j==="05"?H+=8:H+=4,V[q]=H,H;_.test(M.shrn(1))||(H+=2);var X;switch(j){case"02":M.mod(x).cmp(S)&&(H+=8);break;case"05":X=M.mod(E),X.cmp(C)&&X.cmp(T)&&(H+=8);break;default:H+=4}return V[q]=H,H}function O(M,L,j){this.setGenerator(L),this.__prime=new r(M),this._prime=r.mont(this.__prime),this._primeLen=M.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,j?(this.setPublicKey=I,this.setPrivateKey=N):this._primeCode=8}Object.defineProperty(O.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=D(this.__prime,this.__gen)),this._primeCode}}),O.prototype.generateKeys=function(){return this._priv||(this._priv=new r(A(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},O.prototype.computeSecret=function(M){M=new r(M),M=M.toRed(this._prime);var L=M.redPow(this._priv).fromRed(),j=new Buffer$5(L.toArray()),q=this.getPrime();if(j.length<q.length){var H=new Buffer$5(q.length-j.length);H.fill(0),j=Buffer$5.concat([H,j])}return j},O.prototype.getPublicKey=function(L){return F(this._pub,L)},O.prototype.getPrivateKey=function(L){return F(this._priv,L)},O.prototype.getPrime=function(M){return F(this.__prime,M)},O.prototype.getGenerator=function(M){return F(this._gen,M)},O.prototype.setGenerator=function(M,L){return L=L||"utf8",Buffer$5.isBuffer(M)||(M=new Buffer$5(M,L)),this.__gen=M,this._gen=new r(M),this};function F(M,L){var j=new Buffer$5(M.toArray());return L?j.toString(L):j}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$6;hasRequiredBrowser$4=1;var r=requireGeneratePrime(),n=require$$1$1,_=requireDh();function x(C){var T=new Buffer$5(n[C].prime,"hex"),B=new Buffer$5(n[C].gen,"hex");return new _(T,B)}var S={binary:!0,hex:!0,base64:!0};function E(C,T,B,A){return Buffer$5.isBuffer(T)||S[T]===void 0?E(C,"binary",T,B):(T=T||"binary",A=A||"binary",B=B||new Buffer$5([2]),Buffer$5.isBuffer(B)||(B=new Buffer$5(B,A)),typeof C=="number"?new _(r(C,B),B,!0):(Buffer$5.isBuffer(C)||(C=new Buffer$5(C,T)),new _(C,B,!0)))}return browser$6.DiffieHellmanGroup=browser$6.createDiffieHellmanGroup=browser$6.getDiffieHellman=x,browser$6.createDiffieHellman=browser$6.DiffieHellman=E,browser$6}var sign={exports:{}},bn$1={exports:{}};bn$1.exports;var hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(r){(function(n,_){function x(Y,U){if(!Y)throw new Error(U||"Assertion failed")}function S(Y,U){Y.super_=U;var W=function(){};W.prototype=U.prototype,Y.prototype=new W,Y.prototype.constructor=Y}function E(Y,U,W){if(E.isBN(Y))return Y;this.negative=0,this.words=null,this.length=0,this.red=null,Y!==null&&((U==="le"||U==="be")&&(W=U,U=10),this._init(Y||0,U||10,W||"be"))}typeof n=="object"?n.exports=E:_.BN=E,E.BN=E,E.wordSize=26;var C;try{typeof window<"u"&&typeof window.Buffer<"u"?C=window.Buffer:C=require$$0$2.Buffer}catch{}E.isBN=function(U){return U instanceof E?!0:U!==null&&typeof U=="object"&&U.constructor.wordSize===E.wordSize&&Array.isArray(U.words)},E.max=function(U,W){return U.cmp(W)>0?U:W},E.min=function(U,W){return U.cmp(W)<0?U:W},E.prototype._init=function(U,W,ee){if(typeof U=="number")return this._initNumber(U,W,ee);if(typeof U=="object")return this._initArray(U,W,ee);W==="hex"&&(W=16),x(W===(W|0)&&W>=2&&W<=36),U=U.toString().replace(/\s+/g,"");var re=0;U[0]==="-"&&(re++,this.negative=1),re<U.length&&(W===16?this._parseHex(U,re,ee):(this._parseBase(U,W,re),ee==="le"&&this._initArray(this.toArray(),W,ee)))},E.prototype._initNumber=function(U,W,ee){U<0&&(this.negative=1,U=-U),U<67108864?(this.words=[U&67108863],this.length=1):U<4503599627370496?(this.words=[U&67108863,U/67108864&67108863],this.length=2):(x(U<9007199254740992),this.words=[U&67108863,U/67108864&67108863,1],this.length=3),ee==="le"&&this._initArray(this.toArray(),W,ee)},E.prototype._initArray=function(U,W,ee){if(x(typeof U.length=="number"),U.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(U.length/3),this.words=new Array(this.length);for(var re=0;re<this.length;re++)this.words[re]=0;var oe,ie,ne=0;if(ee==="be")for(re=U.length-1,oe=0;re>=0;re-=3)ie=U[re]|U[re-1]<<8|U[re-2]<<16,this.words[oe]|=ie<<ne&67108863,this.words[oe+1]=ie>>>26-ne&67108863,ne+=24,ne>=26&&(ne-=26,oe++);else if(ee==="le")for(re=0,oe=0;re<U.length;re+=3)ie=U[re]|U[re+1]<<8|U[re+2]<<16,this.words[oe]|=ie<<ne&67108863,this.words[oe+1]=ie>>>26-ne&67108863,ne+=24,ne>=26&&(ne-=26,oe++);return this._strip()};function T(Y,U){var W=Y.charCodeAt(U);if(W>=48&&W<=57)return W-48;if(W>=65&&W<=70)return W-55;if(W>=97&&W<=102)return W-87;x(!1,"Invalid character in "+Y)}function B(Y,U,W){var ee=T(Y,W);return W-1>=U&&(ee|=T(Y,W-1)<<4),ee}E.prototype._parseHex=function(U,W,ee){this.length=Math.ceil((U.length-W)/6),this.words=new Array(this.length);for(var re=0;re<this.length;re++)this.words[re]=0;var oe=0,ie=0,ne;if(ee==="be")for(re=U.length-1;re>=W;re-=2)ne=B(U,W,re)<<oe,this.words[ie]|=ne&67108863,oe>=18?(oe-=18,ie+=1,this.words[ie]|=ne>>>26):oe+=8;else{var te=U.length-W;for(re=te%2===0?W+1:W;re<U.length;re+=2)ne=B(U,W,re)<<oe,this.words[ie]|=ne&67108863,oe>=18?(oe-=18,ie+=1,this.words[ie]|=ne>>>26):oe+=8}this._strip()};function A(Y,U,W,ee){for(var re=0,oe=0,ie=Math.min(Y.length,W),ne=U;ne<ie;ne++){var te=Y.charCodeAt(ne)-48;re*=ee,te>=49?oe=te-49+10:te>=17?oe=te-17+10:oe=te,x(te>=0&&oe<ee,"Invalid character"),re+=oe}return re}E.prototype._parseBase=function(U,W,ee){this.words=[0],this.length=1;for(var re=0,oe=1;oe<=67108863;oe*=W)re++;re--,oe=oe/W|0;for(var ie=U.length-ee,ne=ie%re,te=Math.min(ie,ie-ne)+ee,K=0,le=ee;le<te;le+=re)K=A(U,le,le+re,W),this.imuln(oe),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K);if(ne!==0){var ue=1;for(K=A(U,le,U.length,W),le=0;le<ne;le++)ue*=W;this.imuln(ue),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K)}this._strip()},E.prototype.copy=function(U){U.words=new Array(this.length);for(var W=0;W<this.length;W++)U.words[W]=this.words[W];U.length=this.length,U.negative=this.negative,U.red=this.red};function I(Y,U){Y.words=U.words,Y.length=U.length,Y.negative=U.negative,Y.red=U.red}if(E.prototype._move=function(U){I(U,this)},E.prototype.clone=function(){var U=new E(null);return this.copy(U),U},E.prototype._expand=function(U){for(;this.length<U;)this.words[this.length++]=0;return this},E.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},E.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{E.prototype[Symbol.for("nodejs.util.inspect.custom")]=N}catch{E.prototype.inspect=N}else E.prototype.inspect=N;function N(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var V=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];E.prototype.toString=function(U,W){U=U||10,W=W|0||1;var ee;if(U===16||U==="hex"){ee="";for(var re=0,oe=0,ie=0;ie<this.length;ie++){var ne=this.words[ie],te=((ne<<re|oe)&16777215).toString(16);oe=ne>>>24-re&16777215,re+=2,re>=26&&(re-=26,ie--),oe!==0||ie!==this.length-1?ee=V[6-te.length]+te+ee:ee=te+ee}for(oe!==0&&(ee=oe.toString(16)+ee);ee.length%W!==0;)ee="0"+ee;return this.negative!==0&&(ee="-"+ee),ee}if(U===(U|0)&&U>=2&&U<=36){var K=D[U],le=O[U];ee="";var ue=this.clone();for(ue.negative=0;!ue.isZero();){var be=ue.modrn(le).toString(U);ue=ue.idivn(le),ue.isZero()?ee=be+ee:ee=V[K-be.length]+be+ee}for(this.isZero()&&(ee="0"+ee);ee.length%W!==0;)ee="0"+ee;return this.negative!==0&&(ee="-"+ee),ee}x(!1,"Base should be between 2 and 36")},E.prototype.toNumber=function(){var U=this.words[0];return this.length===2?U+=this.words[1]*67108864:this.length===3&&this.words[2]===1?U+=4503599627370496+this.words[1]*67108864:this.length>2&&x(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-U:U},E.prototype.toJSON=function(){return this.toString(16,2)},C&&(E.prototype.toBuffer=function(U,W){return this.toArrayLike(C,U,W)}),E.prototype.toArray=function(U,W){return this.toArrayLike(Array,U,W)};var F=function(U,W){return U.allocUnsafe?U.allocUnsafe(W):new U(W)};E.prototype.toArrayLike=function(U,W,ee){this._strip();var re=this.byteLength(),oe=ee||Math.max(1,re);x(re<=oe,"byte array longer than desired length"),x(oe>0,"Requested array length <= 0");var ie=F(U,oe),ne=W==="le"?"LE":"BE";return this["_toArrayLike"+ne](ie,re),ie},E.prototype._toArrayLikeLE=function(U,W){for(var ee=0,re=0,oe=0,ie=0;oe<this.length;oe++){var ne=this.words[oe]<<ie|re;U[ee++]=ne&255,ee<U.length&&(U[ee++]=ne>>8&255),ee<U.length&&(U[ee++]=ne>>16&255),ie===6?(ee<U.length&&(U[ee++]=ne>>24&255),re=0,ie=0):(re=ne>>>24,ie+=2)}if(ee<U.length)for(U[ee++]=re;ee<U.length;)U[ee++]=0},E.prototype._toArrayLikeBE=function(U,W){for(var ee=U.length-1,re=0,oe=0,ie=0;oe<this.length;oe++){var ne=this.words[oe]<<ie|re;U[ee--]=ne&255,ee>=0&&(U[ee--]=ne>>8&255),ee>=0&&(U[ee--]=ne>>16&255),ie===6?(ee>=0&&(U[ee--]=ne>>24&255),re=0,ie=0):(re=ne>>>24,ie+=2)}if(ee>=0)for(U[ee--]=re;ee>=0;)U[ee--]=0},Math.clz32?E.prototype._countBits=function(U){return 32-Math.clz32(U)}:E.prototype._countBits=function(U){var W=U,ee=0;return W>=4096&&(ee+=13,W>>>=13),W>=64&&(ee+=7,W>>>=7),W>=8&&(ee+=4,W>>>=4),W>=2&&(ee+=2,W>>>=2),ee+W},E.prototype._zeroBits=function(U){if(U===0)return 26;var W=U,ee=0;return W&8191||(ee+=13,W>>>=13),W&127||(ee+=7,W>>>=7),W&15||(ee+=4,W>>>=4),W&3||(ee+=2,W>>>=2),W&1||ee++,ee},E.prototype.bitLength=function(){var U=this.words[this.length-1],W=this._countBits(U);return(this.length-1)*26+W};function M(Y){for(var U=new Array(Y.bitLength()),W=0;W<U.length;W++){var ee=W/26|0,re=W%26;U[W]=Y.words[ee]>>>re&1}return U}E.prototype.zeroBits=function(){if(this.isZero())return 0;for(var U=0,W=0;W<this.length;W++){var ee=this._zeroBits(this.words[W]);if(U+=ee,ee!==26)break}return U},E.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},E.prototype.toTwos=function(U){return this.negative!==0?this.abs().inotn(U).iaddn(1):this.clone()},E.prototype.fromTwos=function(U){return this.testn(U-1)?this.notn(U).iaddn(1).ineg():this.clone()},E.prototype.isNeg=function(){return this.negative!==0},E.prototype.neg=function(){return this.clone().ineg()},E.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},E.prototype.iuor=function(U){for(;this.length<U.length;)this.words[this.length++]=0;for(var W=0;W<U.length;W++)this.words[W]=this.words[W]|U.words[W];return this._strip()},E.prototype.ior=function(U){return x((this.negative|U.negative)===0),this.iuor(U)},E.prototype.or=function(U){return this.length>U.length?this.clone().ior(U):U.clone().ior(this)},E.prototype.uor=function(U){return this.length>U.length?this.clone().iuor(U):U.clone().iuor(this)},E.prototype.iuand=function(U){var W;this.length>U.length?W=U:W=this;for(var ee=0;ee<W.length;ee++)this.words[ee]=this.words[ee]&U.words[ee];return this.length=W.length,this._strip()},E.prototype.iand=function(U){return x((this.negative|U.negative)===0),this.iuand(U)},E.prototype.and=function(U){return this.length>U.length?this.clone().iand(U):U.clone().iand(this)},E.prototype.uand=function(U){return this.length>U.length?this.clone().iuand(U):U.clone().iuand(this)},E.prototype.iuxor=function(U){var W,ee;this.length>U.length?(W=this,ee=U):(W=U,ee=this);for(var re=0;re<ee.length;re++)this.words[re]=W.words[re]^ee.words[re];if(this!==W)for(;re<W.length;re++)this.words[re]=W.words[re];return this.length=W.length,this._strip()},E.prototype.ixor=function(U){return x((this.negative|U.negative)===0),this.iuxor(U)},E.prototype.xor=function(U){return this.length>U.length?this.clone().ixor(U):U.clone().ixor(this)},E.prototype.uxor=function(U){return this.length>U.length?this.clone().iuxor(U):U.clone().iuxor(this)},E.prototype.inotn=function(U){x(typeof U=="number"&&U>=0);var W=Math.ceil(U/26)|0,ee=U%26;this._expand(W),ee>0&&W--;for(var re=0;re<W;re++)this.words[re]=~this.words[re]&67108863;return ee>0&&(this.words[re]=~this.words[re]&67108863>>26-ee),this._strip()},E.prototype.notn=function(U){return this.clone().inotn(U)},E.prototype.setn=function(U,W){x(typeof U=="number"&&U>=0);var ee=U/26|0,re=U%26;return this._expand(ee+1),W?this.words[ee]=this.words[ee]|1<<re:this.words[ee]=this.words[ee]&~(1<<re),this._strip()},E.prototype.iadd=function(U){var W;if(this.negative!==0&&U.negative===0)return this.negative=0,W=this.isub(U),this.negative^=1,this._normSign();if(this.negative===0&&U.negative!==0)return U.negative=0,W=this.isub(U),U.negative=1,W._normSign();var ee,re;this.length>U.length?(ee=this,re=U):(ee=U,re=this);for(var oe=0,ie=0;ie<re.length;ie++)W=(ee.words[ie]|0)+(re.words[ie]|0)+oe,this.words[ie]=W&67108863,oe=W>>>26;for(;oe!==0&&ie<ee.length;ie++)W=(ee.words[ie]|0)+oe,this.words[ie]=W&67108863,oe=W>>>26;if(this.length=ee.length,oe!==0)this.words[this.length]=oe,this.length++;else if(ee!==this)for(;ie<ee.length;ie++)this.words[ie]=ee.words[ie];return this},E.prototype.add=function(U){var W;return U.negative!==0&&this.negative===0?(U.negative=0,W=this.sub(U),U.negative^=1,W):U.negative===0&&this.negative!==0?(this.negative=0,W=U.sub(this),this.negative=1,W):this.length>U.length?this.clone().iadd(U):U.clone().iadd(this)},E.prototype.isub=function(U){if(U.negative!==0){U.negative=0;var W=this.iadd(U);return U.negative=1,W._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(U),this.negative=1,this._normSign();var ee=this.cmp(U);if(ee===0)return this.negative=0,this.length=1,this.words[0]=0,this;var re,oe;ee>0?(re=this,oe=U):(re=U,oe=this);for(var ie=0,ne=0;ne<oe.length;ne++)W=(re.words[ne]|0)-(oe.words[ne]|0)+ie,ie=W>>26,this.words[ne]=W&67108863;for(;ie!==0&&ne<re.length;ne++)W=(re.words[ne]|0)+ie,ie=W>>26,this.words[ne]=W&67108863;if(ie===0&&ne<re.length&&re!==this)for(;ne<re.length;ne++)this.words[ne]=re.words[ne];return this.length=Math.max(this.length,ne),re!==this&&(this.negative=1),this._strip()},E.prototype.sub=function(U){return this.clone().isub(U)};function L(Y,U,W){W.negative=U.negative^Y.negative;var ee=Y.length+U.length|0;W.length=ee,ee=ee-1|0;var re=Y.words[0]|0,oe=U.words[0]|0,ie=re*oe,ne=ie&67108863,te=ie/67108864|0;W.words[0]=ne;for(var K=1;K<ee;K++){for(var le=te>>>26,ue=te&67108863,be=Math.min(K,U.length-1),ge=Math.max(0,K-Y.length+1);ge<=be;ge++){var ye=K-ge|0;re=Y.words[ye]|0,oe=U.words[ge]|0,ie=re*oe+ue,le+=ie/67108864|0,ue=ie&67108863}W.words[K]=ue|0,te=le|0}return te!==0?W.words[K]=te|0:W.length--,W._strip()}var j=function(U,W,ee){var re=U.words,oe=W.words,ie=ee.words,ne=0,te,K,le,ue=re[0]|0,be=ue&8191,ge=ue>>>13,ye=re[1]|0,Ee=ye&8191,Re=ye>>>13,Ne=re[2]|0,Te=Ne&8191,he=Ne>>>13,xe=re[3]|0,fe=xe&8191,Be=xe>>>13,Le=re[4]|0,Ve=Le&8191,Ie=Le>>>13,Me=re[5]|0,He=Me&8191,We=Me>>>13,Ue=re[6]|0,Ge=Ue&8191,et=Ue>>>13,ot=re[7]|0,ht=ot&8191,Oe=ot>>>13,we=re[8]|0,Ce=we&8191,ze=we>>>13,Ze=re[9]|0,st=Ze&8191,rt=Ze>>>13,Ft=oe[0]|0,Vt=Ft&8191,Et=Ft>>>13,jt=oe[1]|0,Lt=jt&8191,qt=jt>>>13,_r=oe[2]|0,Zt=_r&8191,zt=_r>>>13,hr=oe[3]|0,Xt=hr&8191,Ht=hr>>>13,gr=oe[4]|0,Qt=gr&8191,Kt=gr>>>13,$r=oe[5]|0,tr=$r&8191,Ut=$r>>>13,wr=oe[6]|0,De=wr&8191,ke=wr>>>13,Se=oe[7]|0,se=Se&8191,_e=Se>>>13,$e=oe[8]|0,Pe=$e&8191,Fe=$e>>>13,qe=oe[9]|0,Ye=qe&8191,Je=qe>>>13;ee.negative=U.negative^W.negative,ee.length=19,te=Math.imul(be,Vt),K=Math.imul(be,Et),K=K+Math.imul(ge,Vt)|0,le=Math.imul(ge,Et);var tt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(tt>>>26)|0,tt&=67108863,te=Math.imul(Ee,Vt),K=Math.imul(Ee,Et),K=K+Math.imul(Re,Vt)|0,le=Math.imul(Re,Et),te=te+Math.imul(be,Lt)|0,K=K+Math.imul(be,qt)|0,K=K+Math.imul(ge,Lt)|0,le=le+Math.imul(ge,qt)|0;var Qe=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,te=Math.imul(Te,Vt),K=Math.imul(Te,Et),K=K+Math.imul(he,Vt)|0,le=Math.imul(he,Et),te=te+Math.imul(Ee,Lt)|0,K=K+Math.imul(Ee,qt)|0,K=K+Math.imul(Re,Lt)|0,le=le+Math.imul(Re,qt)|0,te=te+Math.imul(be,Zt)|0,K=K+Math.imul(be,zt)|0,K=K+Math.imul(ge,Zt)|0,le=le+Math.imul(ge,zt)|0;var it=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(it>>>26)|0,it&=67108863,te=Math.imul(fe,Vt),K=Math.imul(fe,Et),K=K+Math.imul(Be,Vt)|0,le=Math.imul(Be,Et),te=te+Math.imul(Te,Lt)|0,K=K+Math.imul(Te,qt)|0,K=K+Math.imul(he,Lt)|0,le=le+Math.imul(he,qt)|0,te=te+Math.imul(Ee,Zt)|0,K=K+Math.imul(Ee,zt)|0,K=K+Math.imul(Re,Zt)|0,le=le+Math.imul(Re,zt)|0,te=te+Math.imul(be,Xt)|0,K=K+Math.imul(be,Ht)|0,K=K+Math.imul(ge,Xt)|0,le=le+Math.imul(ge,Ht)|0;var lt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(lt>>>26)|0,lt&=67108863,te=Math.imul(Ve,Vt),K=Math.imul(Ve,Et),K=K+Math.imul(Ie,Vt)|0,le=Math.imul(Ie,Et),te=te+Math.imul(fe,Lt)|0,K=K+Math.imul(fe,qt)|0,K=K+Math.imul(Be,Lt)|0,le=le+Math.imul(Be,qt)|0,te=te+Math.imul(Te,Zt)|0,K=K+Math.imul(Te,zt)|0,K=K+Math.imul(he,Zt)|0,le=le+Math.imul(he,zt)|0,te=te+Math.imul(Ee,Xt)|0,K=K+Math.imul(Ee,Ht)|0,K=K+Math.imul(Re,Xt)|0,le=le+Math.imul(Re,Ht)|0,te=te+Math.imul(be,Qt)|0,K=K+Math.imul(be,Kt)|0,K=K+Math.imul(ge,Qt)|0,le=le+Math.imul(ge,Kt)|0;var vt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(vt>>>26)|0,vt&=67108863,te=Math.imul(He,Vt),K=Math.imul(He,Et),K=K+Math.imul(We,Vt)|0,le=Math.imul(We,Et),te=te+Math.imul(Ve,Lt)|0,K=K+Math.imul(Ve,qt)|0,K=K+Math.imul(Ie,Lt)|0,le=le+Math.imul(Ie,qt)|0,te=te+Math.imul(fe,Zt)|0,K=K+Math.imul(fe,zt)|0,K=K+Math.imul(Be,Zt)|0,le=le+Math.imul(Be,zt)|0,te=te+Math.imul(Te,Xt)|0,K=K+Math.imul(Te,Ht)|0,K=K+Math.imul(he,Xt)|0,le=le+Math.imul(he,Ht)|0,te=te+Math.imul(Ee,Qt)|0,K=K+Math.imul(Ee,Kt)|0,K=K+Math.imul(Re,Qt)|0,le=le+Math.imul(Re,Kt)|0,te=te+Math.imul(be,tr)|0,K=K+Math.imul(be,Ut)|0,K=K+Math.imul(ge,tr)|0,le=le+Math.imul(ge,Ut)|0;var bt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(bt>>>26)|0,bt&=67108863,te=Math.imul(Ge,Vt),K=Math.imul(Ge,Et),K=K+Math.imul(et,Vt)|0,le=Math.imul(et,Et),te=te+Math.imul(He,Lt)|0,K=K+Math.imul(He,qt)|0,K=K+Math.imul(We,Lt)|0,le=le+Math.imul(We,qt)|0,te=te+Math.imul(Ve,Zt)|0,K=K+Math.imul(Ve,zt)|0,K=K+Math.imul(Ie,Zt)|0,le=le+Math.imul(Ie,zt)|0,te=te+Math.imul(fe,Xt)|0,K=K+Math.imul(fe,Ht)|0,K=K+Math.imul(Be,Xt)|0,le=le+Math.imul(Be,Ht)|0,te=te+Math.imul(Te,Qt)|0,K=K+Math.imul(Te,Kt)|0,K=K+Math.imul(he,Qt)|0,le=le+Math.imul(he,Kt)|0,te=te+Math.imul(Ee,tr)|0,K=K+Math.imul(Ee,Ut)|0,K=K+Math.imul(Re,tr)|0,le=le+Math.imul(Re,Ut)|0,te=te+Math.imul(be,De)|0,K=K+Math.imul(be,ke)|0,K=K+Math.imul(ge,De)|0,le=le+Math.imul(ge,ke)|0;var dt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(dt>>>26)|0,dt&=67108863,te=Math.imul(ht,Vt),K=Math.imul(ht,Et),K=K+Math.imul(Oe,Vt)|0,le=Math.imul(Oe,Et),te=te+Math.imul(Ge,Lt)|0,K=K+Math.imul(Ge,qt)|0,K=K+Math.imul(et,Lt)|0,le=le+Math.imul(et,qt)|0,te=te+Math.imul(He,Zt)|0,K=K+Math.imul(He,zt)|0,K=K+Math.imul(We,Zt)|0,le=le+Math.imul(We,zt)|0,te=te+Math.imul(Ve,Xt)|0,K=K+Math.imul(Ve,Ht)|0,K=K+Math.imul(Ie,Xt)|0,le=le+Math.imul(Ie,Ht)|0,te=te+Math.imul(fe,Qt)|0,K=K+Math.imul(fe,Kt)|0,K=K+Math.imul(Be,Qt)|0,le=le+Math.imul(Be,Kt)|0,te=te+Math.imul(Te,tr)|0,K=K+Math.imul(Te,Ut)|0,K=K+Math.imul(he,tr)|0,le=le+Math.imul(he,Ut)|0,te=te+Math.imul(Ee,De)|0,K=K+Math.imul(Ee,ke)|0,K=K+Math.imul(Re,De)|0,le=le+Math.imul(Re,ke)|0,te=te+Math.imul(be,se)|0,K=K+Math.imul(be,_e)|0,K=K+Math.imul(ge,se)|0,le=le+Math.imul(ge,_e)|0;var yt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(yt>>>26)|0,yt&=67108863,te=Math.imul(Ce,Vt),K=Math.imul(Ce,Et),K=K+Math.imul(ze,Vt)|0,le=Math.imul(ze,Et),te=te+Math.imul(ht,Lt)|0,K=K+Math.imul(ht,qt)|0,K=K+Math.imul(Oe,Lt)|0,le=le+Math.imul(Oe,qt)|0,te=te+Math.imul(Ge,Zt)|0,K=K+Math.imul(Ge,zt)|0,K=K+Math.imul(et,Zt)|0,le=le+Math.imul(et,zt)|0,te=te+Math.imul(He,Xt)|0,K=K+Math.imul(He,Ht)|0,K=K+Math.imul(We,Xt)|0,le=le+Math.imul(We,Ht)|0,te=te+Math.imul(Ve,Qt)|0,K=K+Math.imul(Ve,Kt)|0,K=K+Math.imul(Ie,Qt)|0,le=le+Math.imul(Ie,Kt)|0,te=te+Math.imul(fe,tr)|0,K=K+Math.imul(fe,Ut)|0,K=K+Math.imul(Be,tr)|0,le=le+Math.imul(Be,Ut)|0,te=te+Math.imul(Te,De)|0,K=K+Math.imul(Te,ke)|0,K=K+Math.imul(he,De)|0,le=le+Math.imul(he,ke)|0,te=te+Math.imul(Ee,se)|0,K=K+Math.imul(Ee,_e)|0,K=K+Math.imul(Re,se)|0,le=le+Math.imul(Re,_e)|0,te=te+Math.imul(be,Pe)|0,K=K+Math.imul(be,Fe)|0,K=K+Math.imul(ge,Pe)|0,le=le+Math.imul(ge,Fe)|0;var Tt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,te=Math.imul(st,Vt),K=Math.imul(st,Et),K=K+Math.imul(rt,Vt)|0,le=Math.imul(rt,Et),te=te+Math.imul(Ce,Lt)|0,K=K+Math.imul(Ce,qt)|0,K=K+Math.imul(ze,Lt)|0,le=le+Math.imul(ze,qt)|0,te=te+Math.imul(ht,Zt)|0,K=K+Math.imul(ht,zt)|0,K=K+Math.imul(Oe,Zt)|0,le=le+Math.imul(Oe,zt)|0,te=te+Math.imul(Ge,Xt)|0,K=K+Math.imul(Ge,Ht)|0,K=K+Math.imul(et,Xt)|0,le=le+Math.imul(et,Ht)|0,te=te+Math.imul(He,Qt)|0,K=K+Math.imul(He,Kt)|0,K=K+Math.imul(We,Qt)|0,le=le+Math.imul(We,Kt)|0,te=te+Math.imul(Ve,tr)|0,K=K+Math.imul(Ve,Ut)|0,K=K+Math.imul(Ie,tr)|0,le=le+Math.imul(Ie,Ut)|0,te=te+Math.imul(fe,De)|0,K=K+Math.imul(fe,ke)|0,K=K+Math.imul(Be,De)|0,le=le+Math.imul(Be,ke)|0,te=te+Math.imul(Te,se)|0,K=K+Math.imul(Te,_e)|0,K=K+Math.imul(he,se)|0,le=le+Math.imul(he,_e)|0,te=te+Math.imul(Ee,Pe)|0,K=K+Math.imul(Ee,Fe)|0,K=K+Math.imul(Re,Pe)|0,le=le+Math.imul(Re,Fe)|0,te=te+Math.imul(be,Ye)|0,K=K+Math.imul(be,Je)|0,K=K+Math.imul(ge,Ye)|0,le=le+Math.imul(ge,Je)|0;var kt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(kt>>>26)|0,kt&=67108863,te=Math.imul(st,Lt),K=Math.imul(st,qt),K=K+Math.imul(rt,Lt)|0,le=Math.imul(rt,qt),te=te+Math.imul(Ce,Zt)|0,K=K+Math.imul(Ce,zt)|0,K=K+Math.imul(ze,Zt)|0,le=le+Math.imul(ze,zt)|0,te=te+Math.imul(ht,Xt)|0,K=K+Math.imul(ht,Ht)|0,K=K+Math.imul(Oe,Xt)|0,le=le+Math.imul(Oe,Ht)|0,te=te+Math.imul(Ge,Qt)|0,K=K+Math.imul(Ge,Kt)|0,K=K+Math.imul(et,Qt)|0,le=le+Math.imul(et,Kt)|0,te=te+Math.imul(He,tr)|0,K=K+Math.imul(He,Ut)|0,K=K+Math.imul(We,tr)|0,le=le+Math.imul(We,Ut)|0,te=te+Math.imul(Ve,De)|0,K=K+Math.imul(Ve,ke)|0,K=K+Math.imul(Ie,De)|0,le=le+Math.imul(Ie,ke)|0,te=te+Math.imul(fe,se)|0,K=K+Math.imul(fe,_e)|0,K=K+Math.imul(Be,se)|0,le=le+Math.imul(Be,_e)|0,te=te+Math.imul(Te,Pe)|0,K=K+Math.imul(Te,Fe)|0,K=K+Math.imul(he,Pe)|0,le=le+Math.imul(he,Fe)|0,te=te+Math.imul(Ee,Ye)|0,K=K+Math.imul(Ee,Je)|0,K=K+Math.imul(Re,Ye)|0,le=le+Math.imul(Re,Je)|0;var Pt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,te=Math.imul(st,Zt),K=Math.imul(st,zt),K=K+Math.imul(rt,Zt)|0,le=Math.imul(rt,zt),te=te+Math.imul(Ce,Xt)|0,K=K+Math.imul(Ce,Ht)|0,K=K+Math.imul(ze,Xt)|0,le=le+Math.imul(ze,Ht)|0,te=te+Math.imul(ht,Qt)|0,K=K+Math.imul(ht,Kt)|0,K=K+Math.imul(Oe,Qt)|0,le=le+Math.imul(Oe,Kt)|0,te=te+Math.imul(Ge,tr)|0,K=K+Math.imul(Ge,Ut)|0,K=K+Math.imul(et,tr)|0,le=le+Math.imul(et,Ut)|0,te=te+Math.imul(He,De)|0,K=K+Math.imul(He,ke)|0,K=K+Math.imul(We,De)|0,le=le+Math.imul(We,ke)|0,te=te+Math.imul(Ve,se)|0,K=K+Math.imul(Ve,_e)|0,K=K+Math.imul(Ie,se)|0,le=le+Math.imul(Ie,_e)|0,te=te+Math.imul(fe,Pe)|0,K=K+Math.imul(fe,Fe)|0,K=K+Math.imul(Be,Pe)|0,le=le+Math.imul(Be,Fe)|0,te=te+Math.imul(Te,Ye)|0,K=K+Math.imul(Te,Je)|0,K=K+Math.imul(he,Ye)|0,le=le+Math.imul(he,Je)|0;var It=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(It>>>26)|0,It&=67108863,te=Math.imul(st,Xt),K=Math.imul(st,Ht),K=K+Math.imul(rt,Xt)|0,le=Math.imul(rt,Ht),te=te+Math.imul(Ce,Qt)|0,K=K+Math.imul(Ce,Kt)|0,K=K+Math.imul(ze,Qt)|0,le=le+Math.imul(ze,Kt)|0,te=te+Math.imul(ht,tr)|0,K=K+Math.imul(ht,Ut)|0,K=K+Math.imul(Oe,tr)|0,le=le+Math.imul(Oe,Ut)|0,te=te+Math.imul(Ge,De)|0,K=K+Math.imul(Ge,ke)|0,K=K+Math.imul(et,De)|0,le=le+Math.imul(et,ke)|0,te=te+Math.imul(He,se)|0,K=K+Math.imul(He,_e)|0,K=K+Math.imul(We,se)|0,le=le+Math.imul(We,_e)|0,te=te+Math.imul(Ve,Pe)|0,K=K+Math.imul(Ve,Fe)|0,K=K+Math.imul(Ie,Pe)|0,le=le+Math.imul(Ie,Fe)|0,te=te+Math.imul(fe,Ye)|0,K=K+Math.imul(fe,Je)|0,K=K+Math.imul(Be,Ye)|0,le=le+Math.imul(Be,Je)|0;var Ot=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,te=Math.imul(st,Qt),K=Math.imul(st,Kt),K=K+Math.imul(rt,Qt)|0,le=Math.imul(rt,Kt),te=te+Math.imul(Ce,tr)|0,K=K+Math.imul(Ce,Ut)|0,K=K+Math.imul(ze,tr)|0,le=le+Math.imul(ze,Ut)|0,te=te+Math.imul(ht,De)|0,K=K+Math.imul(ht,ke)|0,K=K+Math.imul(Oe,De)|0,le=le+Math.imul(Oe,ke)|0,te=te+Math.imul(Ge,se)|0,K=K+Math.imul(Ge,_e)|0,K=K+Math.imul(et,se)|0,le=le+Math.imul(et,_e)|0,te=te+Math.imul(He,Pe)|0,K=K+Math.imul(He,Fe)|0,K=K+Math.imul(We,Pe)|0,le=le+Math.imul(We,Fe)|0,te=te+Math.imul(Ve,Ye)|0,K=K+Math.imul(Ve,Je)|0,K=K+Math.imul(Ie,Ye)|0,le=le+Math.imul(Ie,Je)|0;var Mt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,te=Math.imul(st,tr),K=Math.imul(st,Ut),K=K+Math.imul(rt,tr)|0,le=Math.imul(rt,Ut),te=te+Math.imul(Ce,De)|0,K=K+Math.imul(Ce,ke)|0,K=K+Math.imul(ze,De)|0,le=le+Math.imul(ze,ke)|0,te=te+Math.imul(ht,se)|0,K=K+Math.imul(ht,_e)|0,K=K+Math.imul(Oe,se)|0,le=le+Math.imul(Oe,_e)|0,te=te+Math.imul(Ge,Pe)|0,K=K+Math.imul(Ge,Fe)|0,K=K+Math.imul(et,Pe)|0,le=le+Math.imul(et,Fe)|0,te=te+Math.imul(He,Ye)|0,K=K+Math.imul(He,Je)|0,K=K+Math.imul(We,Ye)|0,le=le+Math.imul(We,Je)|0;var Dt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,te=Math.imul(st,De),K=Math.imul(st,ke),K=K+Math.imul(rt,De)|0,le=Math.imul(rt,ke),te=te+Math.imul(Ce,se)|0,K=K+Math.imul(Ce,_e)|0,K=K+Math.imul(ze,se)|0,le=le+Math.imul(ze,_e)|0,te=te+Math.imul(ht,Pe)|0,K=K+Math.imul(ht,Fe)|0,K=K+Math.imul(Oe,Pe)|0,le=le+Math.imul(Oe,Fe)|0,te=te+Math.imul(Ge,Ye)|0,K=K+Math.imul(Ge,Je)|0,K=K+Math.imul(et,Ye)|0,le=le+Math.imul(et,Je)|0;var mt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(mt>>>26)|0,mt&=67108863,te=Math.imul(st,se),K=Math.imul(st,_e),K=K+Math.imul(rt,se)|0,le=Math.imul(rt,_e),te=te+Math.imul(Ce,Pe)|0,K=K+Math.imul(Ce,Fe)|0,K=K+Math.imul(ze,Pe)|0,le=le+Math.imul(ze,Fe)|0,te=te+Math.imul(ht,Ye)|0,K=K+Math.imul(ht,Je)|0,K=K+Math.imul(Oe,Ye)|0,le=le+Math.imul(Oe,Je)|0;var gt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(gt>>>26)|0,gt&=67108863,te=Math.imul(st,Pe),K=Math.imul(st,Fe),K=K+Math.imul(rt,Pe)|0,le=Math.imul(rt,Fe),te=te+Math.imul(Ce,Ye)|0,K=K+Math.imul(Ce,Je)|0,K=K+Math.imul(ze,Ye)|0,le=le+Math.imul(ze,Je)|0;var St=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(St>>>26)|0,St&=67108863,te=Math.imul(st,Ye),K=Math.imul(st,Je),K=K+Math.imul(rt,Ye)|0,le=Math.imul(rt,Je);var xt=(ne+te|0)+((K&8191)<<13)|0;return ne=(le+(K>>>13)|0)+(xt>>>26)|0,xt&=67108863,ie[0]=tt,ie[1]=Qe,ie[2]=it,ie[3]=lt,ie[4]=vt,ie[5]=bt,ie[6]=dt,ie[7]=yt,ie[8]=Tt,ie[9]=kt,ie[10]=Pt,ie[11]=It,ie[12]=Ot,ie[13]=Mt,ie[14]=Dt,ie[15]=mt,ie[16]=gt,ie[17]=St,ie[18]=xt,ne!==0&&(ie[19]=ne,ee.length++),ee};Math.imul||(j=L);function q(Y,U,W){W.negative=U.negative^Y.negative,W.length=Y.length+U.length;for(var ee=0,re=0,oe=0;oe<W.length-1;oe++){var ie=re;re=0;for(var ne=ee&67108863,te=Math.min(oe,U.length-1),K=Math.max(0,oe-Y.length+1);K<=te;K++){var le=oe-K,ue=Y.words[le]|0,be=U.words[K]|0,ge=ue*be,ye=ge&67108863;ie=ie+(ge/67108864|0)|0,ye=ye+ne|0,ne=ye&67108863,ie=ie+(ye>>>26)|0,re+=ie>>>26,ie&=67108863}W.words[oe]=ne,ee=ie,ie=re}return ee!==0?W.words[oe]=ee:W.length--,W._strip()}function H(Y,U,W){return q(Y,U,W)}E.prototype.mulTo=function(U,W){var ee,re=this.length+U.length;return this.length===10&&U.length===10?ee=j(this,U,W):re<63?ee=L(this,U,W):re<1024?ee=q(this,U,W):ee=H(this,U,W),ee},E.prototype.mul=function(U){var W=new E(null);return W.words=new Array(this.length+U.length),this.mulTo(U,W)},E.prototype.mulf=function(U){var W=new E(null);return W.words=new Array(this.length+U.length),H(this,U,W)},E.prototype.imul=function(U){return this.clone().mulTo(U,this)},E.prototype.imuln=function(U){var W=U<0;W&&(U=-U),x(typeof U=="number"),x(U<67108864);for(var ee=0,re=0;re<this.length;re++){var oe=(this.words[re]|0)*U,ie=(oe&67108863)+(ee&67108863);ee>>=26,ee+=oe/67108864|0,ee+=ie>>>26,this.words[re]=ie&67108863}return ee!==0&&(this.words[re]=ee,this.length++),W?this.ineg():this},E.prototype.muln=function(U){return this.clone().imuln(U)},E.prototype.sqr=function(){return this.mul(this)},E.prototype.isqr=function(){return this.imul(this.clone())},E.prototype.pow=function(U){var W=M(U);if(W.length===0)return new E(1);for(var ee=this,re=0;re<W.length&&W[re]===0;re++,ee=ee.sqr());if(++re<W.length)for(var oe=ee.sqr();re<W.length;re++,oe=oe.sqr())W[re]!==0&&(ee=ee.mul(oe));return ee},E.prototype.iushln=function(U){x(typeof U=="number"&&U>=0);var W=U%26,ee=(U-W)/26,re=67108863>>>26-W<<26-W,oe;if(W!==0){var ie=0;for(oe=0;oe<this.length;oe++){var ne=this.words[oe]&re,te=(this.words[oe]|0)-ne<<W;this.words[oe]=te|ie,ie=ne>>>26-W}ie&&(this.words[oe]=ie,this.length++)}if(ee!==0){for(oe=this.length-1;oe>=0;oe--)this.words[oe+ee]=this.words[oe];for(oe=0;oe<ee;oe++)this.words[oe]=0;this.length+=ee}return this._strip()},E.prototype.ishln=function(U){return x(this.negative===0),this.iushln(U)},E.prototype.iushrn=function(U,W,ee){x(typeof U=="number"&&U>=0);var re;W?re=(W-W%26)/26:re=0;var oe=U%26,ie=Math.min((U-oe)/26,this.length),ne=67108863^67108863>>>oe<<oe,te=ee;if(re-=ie,re=Math.max(0,re),te){for(var K=0;K<ie;K++)te.words[K]=this.words[K];te.length=ie}if(ie!==0)if(this.length>ie)for(this.length-=ie,K=0;K<this.length;K++)this.words[K]=this.words[K+ie];else this.words[0]=0,this.length=1;var le=0;for(K=this.length-1;K>=0&&(le!==0||K>=re);K--){var ue=this.words[K]|0;this.words[K]=le<<26-oe|ue>>>oe,le=ue&ne}return te&&le!==0&&(te.words[te.length++]=le),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},E.prototype.ishrn=function(U,W,ee){return x(this.negative===0),this.iushrn(U,W,ee)},E.prototype.shln=function(U){return this.clone().ishln(U)},E.prototype.ushln=function(U){return this.clone().iushln(U)},E.prototype.shrn=function(U){return this.clone().ishrn(U)},E.prototype.ushrn=function(U){return this.clone().iushrn(U)},E.prototype.testn=function(U){x(typeof U=="number"&&U>=0);var W=U%26,ee=(U-W)/26,re=1<<W;if(this.length<=ee)return!1;var oe=this.words[ee];return!!(oe&re)},E.prototype.imaskn=function(U){x(typeof U=="number"&&U>=0);var W=U%26,ee=(U-W)/26;if(x(this.negative===0,"imaskn works only with positive numbers"),this.length<=ee)return this;if(W!==0&&ee++,this.length=Math.min(ee,this.length),W!==0){var re=67108863^67108863>>>W<<W;this.words[this.length-1]&=re}return this._strip()},E.prototype.maskn=function(U){return this.clone().imaskn(U)},E.prototype.iaddn=function(U){return x(typeof U=="number"),x(U<67108864),U<0?this.isubn(-U):this.negative!==0?this.length===1&&(this.words[0]|0)<=U?(this.words[0]=U-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(U),this.negative=1,this):this._iaddn(U)},E.prototype._iaddn=function(U){this.words[0]+=U;for(var W=0;W<this.length&&this.words[W]>=67108864;W++)this.words[W]-=67108864,W===this.length-1?this.words[W+1]=1:this.words[W+1]++;return this.length=Math.max(this.length,W+1),this},E.prototype.isubn=function(U){if(x(typeof U=="number"),x(U<67108864),U<0)return this.iaddn(-U);if(this.negative!==0)return this.negative=0,this.iaddn(U),this.negative=1,this;if(this.words[0]-=U,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var W=0;W<this.length&&this.words[W]<0;W++)this.words[W]+=67108864,this.words[W+1]-=1;return this._strip()},E.prototype.addn=function(U){return this.clone().iaddn(U)},E.prototype.subn=function(U){return this.clone().isubn(U)},E.prototype.iabs=function(){return this.negative=0,this},E.prototype.abs=function(){return this.clone().iabs()},E.prototype._ishlnsubmul=function(U,W,ee){var re=U.length+ee,oe;this._expand(re);var ie,ne=0;for(oe=0;oe<U.length;oe++){ie=(this.words[oe+ee]|0)+ne;var te=(U.words[oe]|0)*W;ie-=te&67108863,ne=(ie>>26)-(te/67108864|0),this.words[oe+ee]=ie&67108863}for(;oe<this.length-ee;oe++)ie=(this.words[oe+ee]|0)+ne,ne=ie>>26,this.words[oe+ee]=ie&67108863;if(ne===0)return this._strip();for(x(ne===-1),ne=0,oe=0;oe<this.length;oe++)ie=-(this.words[oe]|0)+ne,ne=ie>>26,this.words[oe]=ie&67108863;return this.negative=1,this._strip()},E.prototype._wordDiv=function(U,W){var ee=this.length-U.length,re=this.clone(),oe=U,ie=oe.words[oe.length-1]|0,ne=this._countBits(ie);ee=26-ne,ee!==0&&(oe=oe.ushln(ee),re.iushln(ee),ie=oe.words[oe.length-1]|0);var te=re.length-oe.length,K;if(W!=="mod"){K=new E(null),K.length=te+1,K.words=new Array(K.length);for(var le=0;le<K.length;le++)K.words[le]=0}var ue=re.clone()._ishlnsubmul(oe,1,te);ue.negative===0&&(re=ue,K&&(K.words[te]=1));for(var be=te-1;be>=0;be--){var ge=(re.words[oe.length+be]|0)*67108864+(re.words[oe.length+be-1]|0);for(ge=Math.min(ge/ie|0,67108863),re._ishlnsubmul(oe,ge,be);re.negative!==0;)ge--,re.negative=0,re._ishlnsubmul(oe,1,be),re.isZero()||(re.negative^=1);K&&(K.words[be]=ge)}return K&&K._strip(),re._strip(),W!=="div"&&ee!==0&&re.iushrn(ee),{div:K||null,mod:re}},E.prototype.divmod=function(U,W,ee){if(x(!U.isZero()),this.isZero())return{div:new E(0),mod:new E(0)};var re,oe,ie;return this.negative!==0&&U.negative===0?(ie=this.neg().divmod(U,W),W!=="mod"&&(re=ie.div.neg()),W!=="div"&&(oe=ie.mod.neg(),ee&&oe.negative!==0&&oe.iadd(U)),{div:re,mod:oe}):this.negative===0&&U.negative!==0?(ie=this.divmod(U.neg(),W),W!=="mod"&&(re=ie.div.neg()),{div:re,mod:ie.mod}):this.negative&U.negative?(ie=this.neg().divmod(U.neg(),W),W!=="div"&&(oe=ie.mod.neg(),ee&&oe.negative!==0&&oe.isub(U)),{div:ie.div,mod:oe}):U.length>this.length||this.cmp(U)<0?{div:new E(0),mod:this}:U.length===1?W==="div"?{div:this.divn(U.words[0]),mod:null}:W==="mod"?{div:null,mod:new E(this.modrn(U.words[0]))}:{div:this.divn(U.words[0]),mod:new E(this.modrn(U.words[0]))}:this._wordDiv(U,W)},E.prototype.div=function(U){return this.divmod(U,"div",!1).div},E.prototype.mod=function(U){return this.divmod(U,"mod",!1).mod},E.prototype.umod=function(U){return this.divmod(U,"mod",!0).mod},E.prototype.divRound=function(U){var W=this.divmod(U);if(W.mod.isZero())return W.div;var ee=W.div.negative!==0?W.mod.isub(U):W.mod,re=U.ushrn(1),oe=U.andln(1),ie=ee.cmp(re);return ie<0||oe===1&&ie===0?W.div:W.div.negative!==0?W.div.isubn(1):W.div.iaddn(1)},E.prototype.modrn=function(U){var W=U<0;W&&(U=-U),x(U<=67108863);for(var ee=(1<<26)%U,re=0,oe=this.length-1;oe>=0;oe--)re=(ee*re+(this.words[oe]|0))%U;return W?-re:re},E.prototype.modn=function(U){return this.modrn(U)},E.prototype.idivn=function(U){var W=U<0;W&&(U=-U),x(U<=67108863);for(var ee=0,re=this.length-1;re>=0;re--){var oe=(this.words[re]|0)+ee*67108864;this.words[re]=oe/U|0,ee=oe%U}return this._strip(),W?this.ineg():this},E.prototype.divn=function(U){return this.clone().idivn(U)},E.prototype.egcd=function(U){x(U.negative===0),x(!U.isZero());var W=this,ee=U.clone();W.negative!==0?W=W.umod(U):W=W.clone();for(var re=new E(1),oe=new E(0),ie=new E(0),ne=new E(1),te=0;W.isEven()&&ee.isEven();)W.iushrn(1),ee.iushrn(1),++te;for(var K=ee.clone(),le=W.clone();!W.isZero();){for(var ue=0,be=1;!(W.words[0]&be)&&ue<26;++ue,be<<=1);if(ue>0)for(W.iushrn(ue);ue-- >0;)(re.isOdd()||oe.isOdd())&&(re.iadd(K),oe.isub(le)),re.iushrn(1),oe.iushrn(1);for(var ge=0,ye=1;!(ee.words[0]&ye)&&ge<26;++ge,ye<<=1);if(ge>0)for(ee.iushrn(ge);ge-- >0;)(ie.isOdd()||ne.isOdd())&&(ie.iadd(K),ne.isub(le)),ie.iushrn(1),ne.iushrn(1);W.cmp(ee)>=0?(W.isub(ee),re.isub(ie),oe.isub(ne)):(ee.isub(W),ie.isub(re),ne.isub(oe))}return{a:ie,b:ne,gcd:ee.iushln(te)}},E.prototype._invmp=function(U){x(U.negative===0),x(!U.isZero());var W=this,ee=U.clone();W.negative!==0?W=W.umod(U):W=W.clone();for(var re=new E(1),oe=new E(0),ie=ee.clone();W.cmpn(1)>0&&ee.cmpn(1)>0;){for(var ne=0,te=1;!(W.words[0]&te)&&ne<26;++ne,te<<=1);if(ne>0)for(W.iushrn(ne);ne-- >0;)re.isOdd()&&re.iadd(ie),re.iushrn(1);for(var K=0,le=1;!(ee.words[0]&le)&&K<26;++K,le<<=1);if(K>0)for(ee.iushrn(K);K-- >0;)oe.isOdd()&&oe.iadd(ie),oe.iushrn(1);W.cmp(ee)>=0?(W.isub(ee),re.isub(oe)):(ee.isub(W),oe.isub(re))}var ue;return W.cmpn(1)===0?ue=re:ue=oe,ue.cmpn(0)<0&&ue.iadd(U),ue},E.prototype.gcd=function(U){if(this.isZero())return U.abs();if(U.isZero())return this.abs();var W=this.clone(),ee=U.clone();W.negative=0,ee.negative=0;for(var re=0;W.isEven()&&ee.isEven();re++)W.iushrn(1),ee.iushrn(1);do{for(;W.isEven();)W.iushrn(1);for(;ee.isEven();)ee.iushrn(1);var oe=W.cmp(ee);if(oe<0){var ie=W;W=ee,ee=ie}else if(oe===0||ee.cmpn(1)===0)break;W.isub(ee)}while(!0);return ee.iushln(re)},E.prototype.invm=function(U){return this.egcd(U).a.umod(U)},E.prototype.isEven=function(){return(this.words[0]&1)===0},E.prototype.isOdd=function(){return(this.words[0]&1)===1},E.prototype.andln=function(U){return this.words[0]&U},E.prototype.bincn=function(U){x(typeof U=="number");var W=U%26,ee=(U-W)/26,re=1<<W;if(this.length<=ee)return this._expand(ee+1),this.words[ee]|=re,this;for(var oe=re,ie=ee;oe!==0&&ie<this.length;ie++){var ne=this.words[ie]|0;ne+=oe,oe=ne>>>26,ne&=67108863,this.words[ie]=ne}return oe!==0&&(this.words[ie]=oe,this.length++),this},E.prototype.isZero=function(){return this.length===1&&this.words[0]===0},E.prototype.cmpn=function(U){var W=U<0;if(this.negative!==0&&!W)return-1;if(this.negative===0&&W)return 1;this._strip();var ee;if(this.length>1)ee=1;else{W&&(U=-U),x(U<=67108863,"Number is too big");var re=this.words[0]|0;ee=re===U?0:re<U?-1:1}return this.negative!==0?-ee|0:ee},E.prototype.cmp=function(U){if(this.negative!==0&&U.negative===0)return-1;if(this.negative===0&&U.negative!==0)return 1;var W=this.ucmp(U);return this.negative!==0?-W|0:W},E.prototype.ucmp=function(U){if(this.length>U.length)return 1;if(this.length<U.length)return-1;for(var W=0,ee=this.length-1;ee>=0;ee--){var re=this.words[ee]|0,oe=U.words[ee]|0;if(re!==oe){re<oe?W=-1:re>oe&&(W=1);break}}return W},E.prototype.gtn=function(U){return this.cmpn(U)===1},E.prototype.gt=function(U){return this.cmp(U)===1},E.prototype.gten=function(U){return this.cmpn(U)>=0},E.prototype.gte=function(U){return this.cmp(U)>=0},E.prototype.ltn=function(U){return this.cmpn(U)===-1},E.prototype.lt=function(U){return this.cmp(U)===-1},E.prototype.lten=function(U){return this.cmpn(U)<=0},E.prototype.lte=function(U){return this.cmp(U)<=0},E.prototype.eqn=function(U){return this.cmpn(U)===0},E.prototype.eq=function(U){return this.cmp(U)===0},E.red=function(U){return new pe(U)},E.prototype.toRed=function(U){return x(!this.red,"Already a number in reduction context"),x(this.negative===0,"red works only with positives"),U.convertTo(this)._forceRed(U)},E.prototype.fromRed=function(){return x(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},E.prototype._forceRed=function(U){return this.red=U,this},E.prototype.forceRed=function(U){return x(!this.red,"Already a number in reduction context"),this._forceRed(U)},E.prototype.redAdd=function(U){return x(this.red,"redAdd works only with red numbers"),this.red.add(this,U)},E.prototype.redIAdd=function(U){return x(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,U)},E.prototype.redSub=function(U){return x(this.red,"redSub works only with red numbers"),this.red.sub(this,U)},E.prototype.redISub=function(U){return x(this.red,"redISub works only with red numbers"),this.red.isub(this,U)},E.prototype.redShl=function(U){return x(this.red,"redShl works only with red numbers"),this.red.shl(this,U)},E.prototype.redMul=function(U){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,U),this.red.mul(this,U)},E.prototype.redIMul=function(U){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,U),this.red.imul(this,U)},E.prototype.redSqr=function(){return x(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},E.prototype.redISqr=function(){return x(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},E.prototype.redSqrt=function(){return x(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},E.prototype.redInvm=function(){return x(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},E.prototype.redNeg=function(){return x(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},E.prototype.redPow=function(U){return x(this.red&&!U.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,U)};var X={k256:null,p224:null,p192:null,p25519:null};function J(Y,U){this.name=Y,this.p=new E(U,16),this.n=this.p.bitLength(),this.k=new E(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}J.prototype._tmp=function(){var U=new E(null);return U.words=new Array(Math.ceil(this.n/13)),U},J.prototype.ireduce=function(U){var W=U,ee;do this.split(W,this.tmp),W=this.imulK(W),W=W.iadd(this.tmp),ee=W.bitLength();while(ee>this.n);var re=ee<this.n?-1:W.ucmp(this.p);return re===0?(W.words[0]=0,W.length=1):re>0?W.isub(this.p):W.strip!==void 0?W.strip():W._strip(),W},J.prototype.split=function(U,W){U.iushrn(this.n,0,W)},J.prototype.imulK=function(U){return U.imul(this.k)};function Z(){J.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}S(Z,J),Z.prototype.split=function(U,W){for(var ee=4194303,re=Math.min(U.length,9),oe=0;oe<re;oe++)W.words[oe]=U.words[oe];if(W.length=re,U.length<=9){U.words[0]=0,U.length=1;return}var ie=U.words[9];for(W.words[W.length++]=ie&ee,oe=10;oe<U.length;oe++){var ne=U.words[oe]|0;U.words[oe-10]=(ne&ee)<<4|ie>>>22,ie=ne}ie>>>=22,U.words[oe-10]=ie,ie===0&&U.length>10?U.length-=10:U.length-=9},Z.prototype.imulK=function(U){U.words[U.length]=0,U.words[U.length+1]=0,U.length+=2;for(var W=0,ee=0;ee<U.length;ee++){var re=U.words[ee]|0;W+=re*977,U.words[ee]=W&67108863,W=re*64+(W/67108864|0)}return U.words[U.length-1]===0&&(U.length--,U.words[U.length-1]===0&&U.length--),U};function ae(){J.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}S(ae,J);function ce(){J.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}S(ce,J);function ve(){J.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}S(ve,J),ve.prototype.imulK=function(U){for(var W=0,ee=0;ee<U.length;ee++){var re=(U.words[ee]|0)*19+W,oe=re&67108863;re>>>=26,U.words[ee]=oe,W=re}return W!==0&&(U.words[U.length++]=W),U},E._prime=function(U){if(X[U])return X[U];var W;if(U==="k256")W=new Z;else if(U==="p224")W=new ae;else if(U==="p192")W=new ce;else if(U==="p25519")W=new ve;else throw new Error("Unknown prime "+U);return X[U]=W,W};function pe(Y){if(typeof Y=="string"){var U=E._prime(Y);this.m=U.p,this.prime=U}else x(Y.gtn(1),"modulus must be greater than 1"),this.m=Y,this.prime=null}pe.prototype._verify1=function(U){x(U.negative===0,"red works only with positives"),x(U.red,"red works only with red numbers")},pe.prototype._verify2=function(U,W){x((U.negative|W.negative)===0,"red works only with positives"),x(U.red&&U.red===W.red,"red works only with red numbers")},pe.prototype.imod=function(U){return this.prime?this.prime.ireduce(U)._forceRed(this):(I(U,U.umod(this.m)._forceRed(this)),U)},pe.prototype.neg=function(U){return U.isZero()?U.clone():this.m.sub(U)._forceRed(this)},pe.prototype.add=function(U,W){this._verify2(U,W);var ee=U.add(W);return ee.cmp(this.m)>=0&&ee.isub(this.m),ee._forceRed(this)},pe.prototype.iadd=function(U,W){this._verify2(U,W);var ee=U.iadd(W);return ee.cmp(this.m)>=0&&ee.isub(this.m),ee},pe.prototype.sub=function(U,W){this._verify2(U,W);var ee=U.sub(W);return ee.cmpn(0)<0&&ee.iadd(this.m),ee._forceRed(this)},pe.prototype.isub=function(U,W){this._verify2(U,W);var ee=U.isub(W);return ee.cmpn(0)<0&&ee.iadd(this.m),ee},pe.prototype.shl=function(U,W){return this._verify1(U),this.imod(U.ushln(W))},pe.prototype.imul=function(U,W){return this._verify2(U,W),this.imod(U.imul(W))},pe.prototype.mul=function(U,W){return this._verify2(U,W),this.imod(U.mul(W))},pe.prototype.isqr=function(U){return this.imul(U,U.clone())},pe.prototype.sqr=function(U){return this.mul(U,U)},pe.prototype.sqrt=function(U){if(U.isZero())return U.clone();var W=this.m.andln(3);if(x(W%2===1),W===3){var ee=this.m.add(new E(1)).iushrn(2);return this.pow(U,ee)}for(var re=this.m.subn(1),oe=0;!re.isZero()&&re.andln(1)===0;)oe++,re.iushrn(1);x(!re.isZero());var ie=new E(1).toRed(this),ne=ie.redNeg(),te=this.m.subn(1).iushrn(1),K=this.m.bitLength();for(K=new E(2*K*K).toRed(this);this.pow(K,te).cmp(ne)!==0;)K.redIAdd(ne);for(var le=this.pow(K,re),ue=this.pow(U,re.addn(1).iushrn(1)),be=this.pow(U,re),ge=oe;be.cmp(ie)!==0;){for(var ye=be,Ee=0;ye.cmp(ie)!==0;Ee++)ye=ye.redSqr();x(Ee<ge);var Re=this.pow(le,new E(1).iushln(ge-Ee-1));ue=ue.redMul(Re),le=Re.redSqr(),be=be.redMul(le),ge=Ee}return ue},pe.prototype.invm=function(U){var W=U._invmp(this.m);return W.negative!==0?(W.negative=0,this.imod(W).redNeg()):this.imod(W)},pe.prototype.pow=function(U,W){if(W.isZero())return new E(1).toRed(this);if(W.cmpn(1)===0)return U.clone();var ee=4,re=new Array(1<<ee);re[0]=new E(1).toRed(this),re[1]=U;for(var oe=2;oe<re.length;oe++)re[oe]=this.mul(re[oe-1],U);var ie=re[0],ne=0,te=0,K=W.bitLength()%26;for(K===0&&(K=26),oe=W.length-1;oe>=0;oe--){for(var le=W.words[oe],ue=K-1;ue>=0;ue--){var be=le>>ue&1;if(ie!==re[0]&&(ie=this.sqr(ie)),be===0&&ne===0){te=0;continue}ne<<=1,ne|=be,te++,!(te!==ee&&(oe!==0||ue!==0))&&(ie=this.mul(ie,re[ne]),te=0,ne=0)}K=26}return ie},pe.prototype.convertTo=function(U){var W=U.umod(this.m);return W===U?W.clone():W},pe.prototype.convertFrom=function(U){var W=U.clone();return W.red=null,W},E.mont=function(U){return new G(U)};function G(Y){pe.call(this,Y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new E(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S(G,pe),G.prototype.convertTo=function(U){return this.imod(U.ushln(this.shift))},G.prototype.convertFrom=function(U){var W=this.imod(U.mul(this.rinv));return W.red=null,W},G.prototype.imul=function(U,W){if(U.isZero()||W.isZero())return U.words[0]=0,U.length=1,U;var ee=U.imul(W),re=ee.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=ee.isub(re).iushrn(this.shift),ie=oe;return oe.cmp(this.m)>=0?ie=oe.isub(this.m):oe.cmpn(0)<0&&(ie=oe.iadd(this.m)),ie._forceRed(this)},G.prototype.mul=function(U,W){if(U.isZero()||W.isZero())return new E(0)._forceRed(this);var ee=U.mul(W),re=ee.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=ee.isub(re).iushrn(this.shift),ie=oe;return oe.cmp(this.m)>=0?ie=oe.isub(this.m):oe.cmpn(0)<0&&(ie=oe.iadd(this.m)),ie._forceRed(this)},G.prototype.invm=function(U){var W=this.imod(U._invmp(this.m).mul(this.r2));return W._forceRed(this)}})(r,commonjsGlobal)}(bn$1)),bn$1.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var r=requireBn$1(),n=requireBrowser$b();function _(E){var C=x(E),T=C.toRed(r.mont(E.modulus)).redPow(new r(E.publicExponent)).fromRed();return{blinder:T,unblinder:C.invm(E.modulus)}}function x(E){var C=E.modulus.byteLength(),T;do T=new r(n(C));while(T.cmp(E.modulus)>=0||!T.umod(E.prime1)||!T.umod(E.prime2));return T}function S(E,C){var T=_(C),B=C.modulus.byteLength(),A=new r(E).mul(T.blinder).umod(C.modulus),I=A.toRed(r.mont(C.prime1)),N=A.toRed(r.mont(C.prime2)),V=C.coefficient,D=C.prime1,O=C.prime2,F=I.redPow(C.exponent1).fromRed(),M=N.redPow(C.exponent2).fromRed(),L=F.isub(M).imul(V).umod(D).imul(O);return M.iadd(L).imul(T.unblinder).umod(C.modulus).toArrayLike(Buffer$5,"be",B)}return S.getr=x,browserifyRsa=S,browserifyRsa}var elliptic={};const name$2="elliptic",version="6.5.4",description$1="EC cryptography",main$1="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies$1={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0={name:name$2,version,description:description$1,main:main$1,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies:dependencies$1};var utils$5={},utils$4={},hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(r){var n=r;function _(E,C){if(Array.isArray(E))return E.slice();if(!E)return[];var T=[];if(typeof E!="string"){for(var B=0;B<E.length;B++)T[B]=E[B]|0;return T}if(C==="hex"){E=E.replace(/[^a-z0-9]+/ig,""),E.length%2!==0&&(E="0"+E);for(var B=0;B<E.length;B+=2)T.push(parseInt(E[B]+E[B+1],16))}else for(var B=0;B<E.length;B++){var A=E.charCodeAt(B),I=A>>8,N=A&255;I?T.push(I,N):T.push(N)}return T}n.toArray=_;function x(E){return E.length===1?"0"+E:E}n.zero2=x;function S(E){for(var C="",T=0;T<E.length;T++)C+=x(E[T].toString(16));return C}n.toHex=S,n.encode=function(C,T){return T==="hex"?S(C):C}}(utils$4)),utils$4}var hasRequiredUtils$1;function requireUtils$1(){return hasRequiredUtils$1||(hasRequiredUtils$1=1,function(r){var n=r,_=requireBn$2(),x=requireMinimalisticAssert(),S=requireUtils$2();n.assert=x,n.toArray=S.toArray,n.zero2=S.zero2,n.toHex=S.toHex,n.encode=S.encode;function E(I,N,V){var D=new Array(Math.max(I.bitLength(),V)+1);D.fill(0);for(var O=1<<N+1,F=I.clone(),M=0;M<D.length;M++){var L,j=F.andln(O-1);F.isOdd()?(j>(O>>1)-1?L=(O>>1)-j:L=j,F.isubn(L)):L=0,D[M]=L,F.iushrn(1)}return D}n.getNAF=E;function C(I,N){var V=[[],[]];I=I.clone(),N=N.clone();for(var D=0,O=0,F;I.cmpn(-D)>0||N.cmpn(-O)>0;){var M=I.andln(3)+D&3,L=N.andln(3)+O&3;M===3&&(M=-1),L===3&&(L=-1);var j;M&1?(F=I.andln(7)+D&7,(F===3||F===5)&&L===2?j=-M:j=M):j=0,V[0].push(j);var q;L&1?(F=N.andln(7)+O&7,(F===3||F===5)&&M===2?q=-L:q=L):q=0,V[1].push(q),2*D===j+1&&(D=1-D),2*O===q+1&&(O=1-O),I.iushrn(1),N.iushrn(1)}return V}n.getJSF=C;function T(I,N,V){var D="_"+N;I.prototype[N]=function(){return this[D]!==void 0?this[D]:this[D]=V.call(this)}}n.cachedProperty=T;function B(I){return typeof I=="string"?n.toArray(I,"hex"):I}n.parseBytes=B;function A(I){return new _(I,"hex","le")}n.intFromLE=A}(utils$5)),utils$5}var curve={},base$2,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$2;hasRequiredBase$1=1;var r=requireBn$2(),n=requireUtils$1(),_=n.getNAF,x=n.getJSF,S=n.assert;function E(T,B){this.type=T,this.p=new r(B.p,16),this.red=B.prime?r.red(B.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=B.n&&new r(B.n,16),this.g=B.g&&this.pointFromJSON(B.g,B.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var A=this.n&&this.p.div(this.n);!A||A.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$2=E,E.prototype.point=function(){throw new Error("Not implemented")},E.prototype.validate=function(){throw new Error("Not implemented")},E.prototype._fixedNafMul=function(B,A){S(B.precomputed);var I=B._getDoubles(),N=_(A,1,this._bitLength),V=(1<<I.step+1)-(I.step%2===0?2:1);V/=3;var D=[],O,F;for(O=0;O<N.length;O+=I.step){F=0;for(var M=O+I.step-1;M>=O;M--)F=(F<<1)+N[M];D.push(F)}for(var L=this.jpoint(null,null,null),j=this.jpoint(null,null,null),q=V;q>0;q--){for(O=0;O<D.length;O++)F=D[O],F===q?j=j.mixedAdd(I.points[O]):F===-q&&(j=j.mixedAdd(I.points[O].neg()));L=L.add(j)}return L.toP()},E.prototype._wnafMul=function(B,A){var I=4,N=B._getNAFPoints(I);I=N.wnd;for(var V=N.points,D=_(A,I,this._bitLength),O=this.jpoint(null,null,null),F=D.length-1;F>=0;F--){for(var M=0;F>=0&&D[F]===0;F--)M++;if(F>=0&&M++,O=O.dblp(M),F<0)break;var L=D[F];S(L!==0),B.type==="affine"?L>0?O=O.mixedAdd(V[L-1>>1]):O=O.mixedAdd(V[-L-1>>1].neg()):L>0?O=O.add(V[L-1>>1]):O=O.add(V[-L-1>>1].neg())}return B.type==="affine"?O.toP():O},E.prototype._wnafMulAdd=function(B,A,I,N,V){var D=this._wnafT1,O=this._wnafT2,F=this._wnafT3,M=0,L,j,q;for(L=0;L<N;L++){q=A[L];var H=q._getNAFPoints(B);D[L]=H.wnd,O[L]=H.points}for(L=N-1;L>=1;L-=2){var X=L-1,J=L;if(D[X]!==1||D[J]!==1){F[X]=_(I[X],D[X],this._bitLength),F[J]=_(I[J],D[J],this._bitLength),M=Math.max(F[X].length,M),M=Math.max(F[J].length,M);continue}var Z=[A[X],null,null,A[J]];A[X].y.cmp(A[J].y)===0?(Z[1]=A[X].add(A[J]),Z[2]=A[X].toJ().mixedAdd(A[J].neg())):A[X].y.cmp(A[J].y.redNeg())===0?(Z[1]=A[X].toJ().mixedAdd(A[J]),Z[2]=A[X].add(A[J].neg())):(Z[1]=A[X].toJ().mixedAdd(A[J]),Z[2]=A[X].toJ().mixedAdd(A[J].neg()));var ae=[-3,-1,-5,-7,0,7,5,1,3],ce=x(I[X],I[J]);for(M=Math.max(ce[0].length,M),F[X]=new Array(M),F[J]=new Array(M),j=0;j<M;j++){var ve=ce[0][j]|0,pe=ce[1][j]|0;F[X][j]=ae[(ve+1)*3+(pe+1)],F[J][j]=0,O[X]=Z}}var G=this.jpoint(null,null,null),Y=this._wnafT4;for(L=M;L>=0;L--){for(var U=0;L>=0;){var W=!0;for(j=0;j<N;j++)Y[j]=F[j][L]|0,Y[j]!==0&&(W=!1);if(!W)break;U++,L--}if(L>=0&&U++,G=G.dblp(U),L<0)break;for(j=0;j<N;j++){var ee=Y[j];ee!==0&&(ee>0?q=O[j][ee-1>>1]:ee<0&&(q=O[j][-ee-1>>1].neg()),q.type==="affine"?G=G.mixedAdd(q):G=G.add(q))}}for(L=0;L<N;L++)O[L]=null;return V?G:G.toP()};function C(T,B){this.curve=T,this.type=B,this.precomputed=null}return E.BasePoint=C,C.prototype.eq=function(){throw new Error("Not implemented")},C.prototype.validate=function(){return this.curve.validate(this)},E.prototype.decodePoint=function(B,A){B=n.toArray(B,A);var I=this.p.byteLength();if((B[0]===4||B[0]===6||B[0]===7)&&B.length-1===2*I){B[0]===6?S(B[B.length-1]%2===0):B[0]===7&&S(B[B.length-1]%2===1);var N=this.point(B.slice(1,1+I),B.slice(1+I,1+2*I));return N}else if((B[0]===2||B[0]===3)&&B.length-1===I)return this.pointFromX(B.slice(1,1+I),B[0]===3);throw new Error("Unknown point format")},C.prototype.encodeCompressed=function(B){return this.encode(B,!0)},C.prototype._encode=function(B){var A=this.curve.p.byteLength(),I=this.getX().toArray("be",A);return B?[this.getY().isEven()?2:3].concat(I):[4].concat(I,this.getY().toArray("be",A))},C.prototype.encode=function(B,A){return n.encode(this._encode(A),B)},C.prototype.precompute=function(B){if(this.precomputed)return this;var A={doubles:null,naf:null,beta:null};return A.naf=this._getNAFPoints(8),A.doubles=this._getDoubles(4,B),A.beta=this._getBeta(),this.precomputed=A,this},C.prototype._hasDoubles=function(B){if(!this.precomputed)return!1;var A=this.precomputed.doubles;return A?A.points.length>=Math.ceil((B.bitLength()+1)/A.step):!1},C.prototype._getDoubles=function(B,A){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var I=[this],N=this,V=0;V<A;V+=B){for(var D=0;D<B;D++)N=N.dbl();I.push(N)}return{step:B,points:I}},C.prototype._getNAFPoints=function(B){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var A=[this],I=(1<<B)-1,N=I===1?null:this.dbl(),V=1;V<I;V++)A[V]=A[V-1].add(N);return{wnd:B,points:A}},C.prototype._getBeta=function(){return null},C.prototype.dblp=function(B){for(var A=this,I=0;I<B;I++)A=A.dbl();return A},base$2}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var r=requireUtils$1(),n=requireBn$2(),_=inherits_browserExports,x=requireBase$1(),S=r.assert;function E(B){x.call(this,"short",B),this.a=new n(B.a,16).toRed(this.red),this.b=new n(B.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(B),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}_(E,x),short=E,E.prototype._getEndomorphism=function(A){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var I,N;if(A.beta)I=new n(A.beta,16).toRed(this.red);else{var V=this._getEndoRoots(this.p);I=V[0].cmp(V[1])<0?V[0]:V[1],I=I.toRed(this.red)}if(A.lambda)N=new n(A.lambda,16);else{var D=this._getEndoRoots(this.n);this.g.mul(D[0]).x.cmp(this.g.x.redMul(I))===0?N=D[0]:(N=D[1],S(this.g.mul(N).x.cmp(this.g.x.redMul(I))===0))}var O;return A.basis?O=A.basis.map(function(F){return{a:new n(F.a,16),b:new n(F.b,16)}}):O=this._getEndoBasis(N),{beta:I,lambda:N,basis:O}}},E.prototype._getEndoRoots=function(A){var I=A===this.p?this.red:n.mont(A),N=new n(2).toRed(I).redInvm(),V=N.redNeg(),D=new n(3).toRed(I).redNeg().redSqrt().redMul(N),O=V.redAdd(D).fromRed(),F=V.redSub(D).fromRed();return[O,F]},E.prototype._getEndoBasis=function(A){for(var I=this.n.ushrn(Math.floor(this.n.bitLength()/2)),N=A,V=this.n.clone(),D=new n(1),O=new n(0),F=new n(0),M=new n(1),L,j,q,H,X,J,Z,ae=0,ce,ve;N.cmpn(0)!==0;){var pe=V.div(N);ce=V.sub(pe.mul(N)),ve=F.sub(pe.mul(D));var G=M.sub(pe.mul(O));if(!q&&ce.cmp(I)<0)L=Z.neg(),j=D,q=ce.neg(),H=ve;else if(q&&++ae===2)break;Z=ce,V=N,N=ce,F=D,D=ve,M=O,O=G}X=ce.neg(),J=ve;var Y=q.sqr().add(H.sqr()),U=X.sqr().add(J.sqr());return U.cmp(Y)>=0&&(X=L,J=j),q.negative&&(q=q.neg(),H=H.neg()),X.negative&&(X=X.neg(),J=J.neg()),[{a:q,b:H},{a:X,b:J}]},E.prototype._endoSplit=function(A){var I=this.endo.basis,N=I[0],V=I[1],D=V.b.mul(A).divRound(this.n),O=N.b.neg().mul(A).divRound(this.n),F=D.mul(N.a),M=O.mul(V.a),L=D.mul(N.b),j=O.mul(V.b),q=A.sub(F).sub(M),H=L.add(j).neg();return{k1:q,k2:H}},E.prototype.pointFromX=function(A,I){A=new n(A,16),A.red||(A=A.toRed(this.red));var N=A.redSqr().redMul(A).redIAdd(A.redMul(this.a)).redIAdd(this.b),V=N.redSqrt();if(V.redSqr().redSub(N).cmp(this.zero)!==0)throw new Error("invalid point");var D=V.fromRed().isOdd();return(I&&!D||!I&&D)&&(V=V.redNeg()),this.point(A,V)},E.prototype.validate=function(A){if(A.inf)return!0;var I=A.x,N=A.y,V=this.a.redMul(I),D=I.redSqr().redMul(I).redIAdd(V).redIAdd(this.b);return N.redSqr().redISub(D).cmpn(0)===0},E.prototype._endoWnafMulAdd=function(A,I,N){for(var V=this._endoWnafT1,D=this._endoWnafT2,O=0;O<A.length;O++){var F=this._endoSplit(I[O]),M=A[O],L=M._getBeta();F.k1.negative&&(F.k1.ineg(),M=M.neg(!0)),F.k2.negative&&(F.k2.ineg(),L=L.neg(!0)),V[O*2]=M,V[O*2+1]=L,D[O*2]=F.k1,D[O*2+1]=F.k2}for(var j=this._wnafMulAdd(1,V,D,O*2,N),q=0;q<O*2;q++)V[q]=null,D[q]=null;return j};function C(B,A,I,N){x.BasePoint.call(this,B,"affine"),A===null&&I===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(A,16),this.y=new n(I,16),N&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}_(C,x.BasePoint),E.prototype.point=function(A,I,N){return new C(this,A,I,N)},E.prototype.pointFromJSON=function(A,I){return C.fromJSON(this,A,I)},C.prototype._getBeta=function(){if(this.curve.endo){var A=this.precomputed;if(A&&A.beta)return A.beta;var I=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(A){var N=this.curve,V=function(D){return N.point(D.x.redMul(N.endo.beta),D.y)};A.beta=I,I.precomputed={beta:null,naf:A.naf&&{wnd:A.naf.wnd,points:A.naf.points.map(V)},doubles:A.doubles&&{step:A.doubles.step,points:A.doubles.points.map(V)}}}return I}},C.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},C.fromJSON=function(A,I,N){typeof I=="string"&&(I=JSON.parse(I));var V=A.point(I[0],I[1],N);if(!I[2])return V;function D(F){return A.point(F[0],F[1],N)}var O=I[2];return V.precomputed={beta:null,doubles:O.doubles&&{step:O.doubles.step,points:[V].concat(O.doubles.points.map(D))},naf:O.naf&&{wnd:O.naf.wnd,points:[V].concat(O.naf.points.map(D))}},V},C.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},C.prototype.isInfinity=function(){return this.inf},C.prototype.add=function(A){if(this.inf)return A;if(A.inf)return this;if(this.eq(A))return this.dbl();if(this.neg().eq(A))return this.curve.point(null,null);if(this.x.cmp(A.x)===0)return this.curve.point(null,null);var I=this.y.redSub(A.y);I.cmpn(0)!==0&&(I=I.redMul(this.x.redSub(A.x).redInvm()));var N=I.redSqr().redISub(this.x).redISub(A.x),V=I.redMul(this.x.redSub(N)).redISub(this.y);return this.curve.point(N,V)},C.prototype.dbl=function(){if(this.inf)return this;var A=this.y.redAdd(this.y);if(A.cmpn(0)===0)return this.curve.point(null,null);var I=this.curve.a,N=this.x.redSqr(),V=A.redInvm(),D=N.redAdd(N).redIAdd(N).redIAdd(I).redMul(V),O=D.redSqr().redISub(this.x.redAdd(this.x)),F=D.redMul(this.x.redSub(O)).redISub(this.y);return this.curve.point(O,F)},C.prototype.getX=function(){return this.x.fromRed()},C.prototype.getY=function(){return this.y.fromRed()},C.prototype.mul=function(A){return A=new n(A,16),this.isInfinity()?this:this._hasDoubles(A)?this.curve._fixedNafMul(this,A):this.curve.endo?this.curve._endoWnafMulAdd([this],[A]):this.curve._wnafMul(this,A)},C.prototype.mulAdd=function(A,I,N){var V=[this,I],D=[A,N];return this.curve.endo?this.curve._endoWnafMulAdd(V,D):this.curve._wnafMulAdd(1,V,D,2)},C.prototype.jmulAdd=function(A,I,N){var V=[this,I],D=[A,N];return this.curve.endo?this.curve._endoWnafMulAdd(V,D,!0):this.curve._wnafMulAdd(1,V,D,2,!0)},C.prototype.eq=function(A){return this===A||this.inf===A.inf&&(this.inf||this.x.cmp(A.x)===0&&this.y.cmp(A.y)===0)},C.prototype.neg=function(A){if(this.inf)return this;var I=this.curve.point(this.x,this.y.redNeg());if(A&&this.precomputed){var N=this.precomputed,V=function(D){return D.neg()};I.precomputed={naf:N.naf&&{wnd:N.naf.wnd,points:N.naf.points.map(V)},doubles:N.doubles&&{step:N.doubles.step,points:N.doubles.points.map(V)}}}return I},C.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var A=this.curve.jpoint(this.x,this.y,this.curve.one);return A};function T(B,A,I,N){x.BasePoint.call(this,B,"jacobian"),A===null&&I===null&&N===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(A,16),this.y=new n(I,16),this.z=new n(N,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return _(T,x.BasePoint),E.prototype.jpoint=function(A,I,N){return new T(this,A,I,N)},T.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var A=this.z.redInvm(),I=A.redSqr(),N=this.x.redMul(I),V=this.y.redMul(I).redMul(A);return this.curve.point(N,V)},T.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},T.prototype.add=function(A){if(this.isInfinity())return A;if(A.isInfinity())return this;var I=A.z.redSqr(),N=this.z.redSqr(),V=this.x.redMul(I),D=A.x.redMul(N),O=this.y.redMul(I.redMul(A.z)),F=A.y.redMul(N.redMul(this.z)),M=V.redSub(D),L=O.redSub(F);if(M.cmpn(0)===0)return L.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var j=M.redSqr(),q=j.redMul(M),H=V.redMul(j),X=L.redSqr().redIAdd(q).redISub(H).redISub(H),J=L.redMul(H.redISub(X)).redISub(O.redMul(q)),Z=this.z.redMul(A.z).redMul(M);return this.curve.jpoint(X,J,Z)},T.prototype.mixedAdd=function(A){if(this.isInfinity())return A.toJ();if(A.isInfinity())return this;var I=this.z.redSqr(),N=this.x,V=A.x.redMul(I),D=this.y,O=A.y.redMul(I).redMul(this.z),F=N.redSub(V),M=D.redSub(O);if(F.cmpn(0)===0)return M.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var L=F.redSqr(),j=L.redMul(F),q=N.redMul(L),H=M.redSqr().redIAdd(j).redISub(q).redISub(q),X=M.redMul(q.redISub(H)).redISub(D.redMul(j)),J=this.z.redMul(F);return this.curve.jpoint(H,X,J)},T.prototype.dblp=function(A){if(A===0)return this;if(this.isInfinity())return this;if(!A)return this.dbl();var I;if(this.curve.zeroA||this.curve.threeA){var N=this;for(I=0;I<A;I++)N=N.dbl();return N}var V=this.curve.a,D=this.curve.tinv,O=this.x,F=this.y,M=this.z,L=M.redSqr().redSqr(),j=F.redAdd(F);for(I=0;I<A;I++){var q=O.redSqr(),H=j.redSqr(),X=H.redSqr(),J=q.redAdd(q).redIAdd(q).redIAdd(V.redMul(L)),Z=O.redMul(H),ae=J.redSqr().redISub(Z.redAdd(Z)),ce=Z.redISub(ae),ve=J.redMul(ce);ve=ve.redIAdd(ve).redISub(X);var pe=j.redMul(M);I+1<A&&(L=L.redMul(X)),O=ae,M=pe,j=ve}return this.curve.jpoint(O,j.redMul(D),M)},T.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},T.prototype._zeroDbl=function(){var A,I,N;if(this.zOne){var V=this.x.redSqr(),D=this.y.redSqr(),O=D.redSqr(),F=this.x.redAdd(D).redSqr().redISub(V).redISub(O);F=F.redIAdd(F);var M=V.redAdd(V).redIAdd(V),L=M.redSqr().redISub(F).redISub(F),j=O.redIAdd(O);j=j.redIAdd(j),j=j.redIAdd(j),A=L,I=M.redMul(F.redISub(L)).redISub(j),N=this.y.redAdd(this.y)}else{var q=this.x.redSqr(),H=this.y.redSqr(),X=H.redSqr(),J=this.x.redAdd(H).redSqr().redISub(q).redISub(X);J=J.redIAdd(J);var Z=q.redAdd(q).redIAdd(q),ae=Z.redSqr(),ce=X.redIAdd(X);ce=ce.redIAdd(ce),ce=ce.redIAdd(ce),A=ae.redISub(J).redISub(J),I=Z.redMul(J.redISub(A)).redISub(ce),N=this.y.redMul(this.z),N=N.redIAdd(N)}return this.curve.jpoint(A,I,N)},T.prototype._threeDbl=function(){var A,I,N;if(this.zOne){var V=this.x.redSqr(),D=this.y.redSqr(),O=D.redSqr(),F=this.x.redAdd(D).redSqr().redISub(V).redISub(O);F=F.redIAdd(F);var M=V.redAdd(V).redIAdd(V).redIAdd(this.curve.a),L=M.redSqr().redISub(F).redISub(F);A=L;var j=O.redIAdd(O);j=j.redIAdd(j),j=j.redIAdd(j),I=M.redMul(F.redISub(L)).redISub(j),N=this.y.redAdd(this.y)}else{var q=this.z.redSqr(),H=this.y.redSqr(),X=this.x.redMul(H),J=this.x.redSub(q).redMul(this.x.redAdd(q));J=J.redAdd(J).redIAdd(J);var Z=X.redIAdd(X);Z=Z.redIAdd(Z);var ae=Z.redAdd(Z);A=J.redSqr().redISub(ae),N=this.y.redAdd(this.z).redSqr().redISub(H).redISub(q);var ce=H.redSqr();ce=ce.redIAdd(ce),ce=ce.redIAdd(ce),ce=ce.redIAdd(ce),I=J.redMul(Z.redISub(A)).redISub(ce)}return this.curve.jpoint(A,I,N)},T.prototype._dbl=function(){var A=this.curve.a,I=this.x,N=this.y,V=this.z,D=V.redSqr().redSqr(),O=I.redSqr(),F=N.redSqr(),M=O.redAdd(O).redIAdd(O).redIAdd(A.redMul(D)),L=I.redAdd(I);L=L.redIAdd(L);var j=L.redMul(F),q=M.redSqr().redISub(j.redAdd(j)),H=j.redISub(q),X=F.redSqr();X=X.redIAdd(X),X=X.redIAdd(X),X=X.redIAdd(X);var J=M.redMul(H).redISub(X),Z=N.redAdd(N).redMul(V);return this.curve.jpoint(q,J,Z)},T.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var A=this.x.redSqr(),I=this.y.redSqr(),N=this.z.redSqr(),V=I.redSqr(),D=A.redAdd(A).redIAdd(A),O=D.redSqr(),F=this.x.redAdd(I).redSqr().redISub(A).redISub(V);F=F.redIAdd(F),F=F.redAdd(F).redIAdd(F),F=F.redISub(O);var M=F.redSqr(),L=V.redIAdd(V);L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L);var j=D.redIAdd(F).redSqr().redISub(O).redISub(M).redISub(L),q=I.redMul(j);q=q.redIAdd(q),q=q.redIAdd(q);var H=this.x.redMul(M).redISub(q);H=H.redIAdd(H),H=H.redIAdd(H);var X=this.y.redMul(j.redMul(L.redISub(j)).redISub(F.redMul(M)));X=X.redIAdd(X),X=X.redIAdd(X),X=X.redIAdd(X);var J=this.z.redAdd(F).redSqr().redISub(N).redISub(M);return this.curve.jpoint(H,X,J)},T.prototype.mul=function(A,I){return A=new n(A,I),this.curve._wnafMul(this,A)},T.prototype.eq=function(A){if(A.type==="affine")return this.eq(A.toJ());if(this===A)return!0;var I=this.z.redSqr(),N=A.z.redSqr();if(this.x.redMul(N).redISub(A.x.redMul(I)).cmpn(0)!==0)return!1;var V=I.redMul(this.z),D=N.redMul(A.z);return this.y.redMul(D).redISub(A.y.redMul(V)).cmpn(0)===0},T.prototype.eqXToP=function(A){var I=this.z.redSqr(),N=A.toRed(this.curve.red).redMul(I);if(this.x.cmp(N)===0)return!0;for(var V=A.clone(),D=this.curve.redN.redMul(I);;){if(V.iadd(this.curve.n),V.cmp(this.curve.p)>=0)return!1;if(N.redIAdd(D),this.x.cmp(N)===0)return!0}},T.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},T.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var r=requireBn$2(),n=inherits_browserExports,_=requireBase$1(),x=requireUtils$1();function S(C){_.call(this,"mont",C),this.a=new r(C.a,16).toRed(this.red),this.b=new r(C.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}n(S,_),mont=S,S.prototype.validate=function(T){var B=T.normalize().x,A=B.redSqr(),I=A.redMul(B).redAdd(A.redMul(this.a)).redAdd(B),N=I.redSqrt();return N.redSqr().cmp(I)===0};function E(C,T,B){_.BasePoint.call(this,C,"projective"),T===null&&B===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(T,16),this.z=new r(B,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return n(E,_.BasePoint),S.prototype.decodePoint=function(T,B){return this.point(x.toArray(T,B),1)},S.prototype.point=function(T,B){return new E(this,T,B)},S.prototype.pointFromJSON=function(T){return E.fromJSON(this,T)},E.prototype.precompute=function(){},E.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},E.fromJSON=function(T,B){return new E(T,B[0],B[1]||T.one)},E.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},E.prototype.isInfinity=function(){return this.z.cmpn(0)===0},E.prototype.dbl=function(){var T=this.x.redAdd(this.z),B=T.redSqr(),A=this.x.redSub(this.z),I=A.redSqr(),N=B.redSub(I),V=B.redMul(I),D=N.redMul(I.redAdd(this.curve.a24.redMul(N)));return this.curve.point(V,D)},E.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},E.prototype.diffAdd=function(T,B){var A=this.x.redAdd(this.z),I=this.x.redSub(this.z),N=T.x.redAdd(T.z),V=T.x.redSub(T.z),D=V.redMul(A),O=N.redMul(I),F=B.z.redMul(D.redAdd(O).redSqr()),M=B.x.redMul(D.redISub(O).redSqr());return this.curve.point(F,M)},E.prototype.mul=function(T){for(var B=T.clone(),A=this,I=this.curve.point(null,null),N=this,V=[];B.cmpn(0)!==0;B.iushrn(1))V.push(B.andln(1));for(var D=V.length-1;D>=0;D--)V[D]===0?(A=A.diffAdd(I,N),I=I.dbl()):(I=A.diffAdd(I,N),A=A.dbl());return I},E.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},E.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},E.prototype.eq=function(T){return this.getX().cmp(T.getX())===0},E.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},E.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var r=requireUtils$1(),n=requireBn$2(),_=inherits_browserExports,x=requireBase$1(),S=r.assert;function E(T){this.twisted=(T.a|0)!==1,this.mOneA=this.twisted&&(T.a|0)===-1,this.extended=this.mOneA,x.call(this,"edwards",T),this.a=new n(T.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(T.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(T.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),S(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(T.c|0)===1}_(E,x),edwards=E,E.prototype._mulA=function(B){return this.mOneA?B.redNeg():this.a.redMul(B)},E.prototype._mulC=function(B){return this.oneC?B:this.c.redMul(B)},E.prototype.jpoint=function(B,A,I,N){return this.point(B,A,I,N)},E.prototype.pointFromX=function(B,A){B=new n(B,16),B.red||(B=B.toRed(this.red));var I=B.redSqr(),N=this.c2.redSub(this.a.redMul(I)),V=this.one.redSub(this.c2.redMul(this.d).redMul(I)),D=N.redMul(V.redInvm()),O=D.redSqrt();if(O.redSqr().redSub(D).cmp(this.zero)!==0)throw new Error("invalid point");var F=O.fromRed().isOdd();return(A&&!F||!A&&F)&&(O=O.redNeg()),this.point(B,O)},E.prototype.pointFromY=function(B,A){B=new n(B,16),B.red||(B=B.toRed(this.red));var I=B.redSqr(),N=I.redSub(this.c2),V=I.redMul(this.d).redMul(this.c2).redSub(this.a),D=N.redMul(V.redInvm());if(D.cmp(this.zero)===0){if(A)throw new Error("invalid point");return this.point(this.zero,B)}var O=D.redSqrt();if(O.redSqr().redSub(D).cmp(this.zero)!==0)throw new Error("invalid point");return O.fromRed().isOdd()!==A&&(O=O.redNeg()),this.point(O,B)},E.prototype.validate=function(B){if(B.isInfinity())return!0;B.normalize();var A=B.x.redSqr(),I=B.y.redSqr(),N=A.redMul(this.a).redAdd(I),V=this.c2.redMul(this.one.redAdd(this.d.redMul(A).redMul(I)));return N.cmp(V)===0};function C(T,B,A,I,N){x.BasePoint.call(this,T,"projective"),B===null&&A===null&&I===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(B,16),this.y=new n(A,16),this.z=I?new n(I,16):this.curve.one,this.t=N&&new n(N,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return _(C,x.BasePoint),E.prototype.pointFromJSON=function(B){return C.fromJSON(this,B)},E.prototype.point=function(B,A,I,N){return new C(this,B,A,I,N)},C.fromJSON=function(B,A){return new C(B,A[0],A[1],A[2])},C.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},C.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},C.prototype._extDbl=function(){var B=this.x.redSqr(),A=this.y.redSqr(),I=this.z.redSqr();I=I.redIAdd(I);var N=this.curve._mulA(B),V=this.x.redAdd(this.y).redSqr().redISub(B).redISub(A),D=N.redAdd(A),O=D.redSub(I),F=N.redSub(A),M=V.redMul(O),L=D.redMul(F),j=V.redMul(F),q=O.redMul(D);return this.curve.point(M,L,q,j)},C.prototype._projDbl=function(){var B=this.x.redAdd(this.y).redSqr(),A=this.x.redSqr(),I=this.y.redSqr(),N,V,D,O,F,M;if(this.curve.twisted){O=this.curve._mulA(A);var L=O.redAdd(I);this.zOne?(N=B.redSub(A).redSub(I).redMul(L.redSub(this.curve.two)),V=L.redMul(O.redSub(I)),D=L.redSqr().redSub(L).redSub(L)):(F=this.z.redSqr(),M=L.redSub(F).redISub(F),N=B.redSub(A).redISub(I).redMul(M),V=L.redMul(O.redSub(I)),D=L.redMul(M))}else O=A.redAdd(I),F=this.curve._mulC(this.z).redSqr(),M=O.redSub(F).redSub(F),N=this.curve._mulC(B.redISub(O)).redMul(M),V=this.curve._mulC(O).redMul(A.redISub(I)),D=O.redMul(M);return this.curve.point(N,V,D)},C.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},C.prototype._extAdd=function(B){var A=this.y.redSub(this.x).redMul(B.y.redSub(B.x)),I=this.y.redAdd(this.x).redMul(B.y.redAdd(B.x)),N=this.t.redMul(this.curve.dd).redMul(B.t),V=this.z.redMul(B.z.redAdd(B.z)),D=I.redSub(A),O=V.redSub(N),F=V.redAdd(N),M=I.redAdd(A),L=D.redMul(O),j=F.redMul(M),q=D.redMul(M),H=O.redMul(F);return this.curve.point(L,j,H,q)},C.prototype._projAdd=function(B){var A=this.z.redMul(B.z),I=A.redSqr(),N=this.x.redMul(B.x),V=this.y.redMul(B.y),D=this.curve.d.redMul(N).redMul(V),O=I.redSub(D),F=I.redAdd(D),M=this.x.redAdd(this.y).redMul(B.x.redAdd(B.y)).redISub(N).redISub(V),L=A.redMul(O).redMul(M),j,q;return this.curve.twisted?(j=A.redMul(F).redMul(V.redSub(this.curve._mulA(N))),q=O.redMul(F)):(j=A.redMul(F).redMul(V.redSub(N)),q=this.curve._mulC(O).redMul(F)),this.curve.point(L,j,q)},C.prototype.add=function(B){return this.isInfinity()?B:B.isInfinity()?this:this.curve.extended?this._extAdd(B):this._projAdd(B)},C.prototype.mul=function(B){return this._hasDoubles(B)?this.curve._fixedNafMul(this,B):this.curve._wnafMul(this,B)},C.prototype.mulAdd=function(B,A,I){return this.curve._wnafMulAdd(1,[this,A],[B,I],2,!1)},C.prototype.jmulAdd=function(B,A,I){return this.curve._wnafMulAdd(1,[this,A],[B,I],2,!0)},C.prototype.normalize=function(){if(this.zOne)return this;var B=this.z.redInvm();return this.x=this.x.redMul(B),this.y=this.y.redMul(B),this.t&&(this.t=this.t.redMul(B)),this.z=this.curve.one,this.zOne=!0,this},C.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},C.prototype.getX=function(){return this.normalize(),this.x.fromRed()},C.prototype.getY=function(){return this.normalize(),this.y.fromRed()},C.prototype.eq=function(B){return this===B||this.getX().cmp(B.getX())===0&&this.getY().cmp(B.getY())===0},C.prototype.eqXToP=function(B){var A=B.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(A)===0)return!0;for(var I=B.clone(),N=this.curve.redN.redMul(this.z);;){if(I.iadd(this.curve.n),I.cmp(this.curve.p)>=0)return!1;if(A.redIAdd(N),this.x.cmp(A)===0)return!0}},C.prototype.toP=C.prototype.normalize,C.prototype.mixedAdd=C.prototype.add,edwards}var hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,function(r){var n=r;n.base=requireBase$1(),n.short=requireShort(),n.mont=requireMont(),n.edwards=requireEdwards()}(curve)),curve}var curves={},hash$2={},utils$3={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils$3;hasRequiredUtils=1;var r=requireMinimalisticAssert(),n=inherits_browserExports;utils$3.inherits=n;function _(G,Y){return(G.charCodeAt(Y)&64512)!==55296||Y<0||Y+1>=G.length?!1:(G.charCodeAt(Y+1)&64512)===56320}function x(G,Y){if(Array.isArray(G))return G.slice();if(!G)return[];var U=[];if(typeof G=="string")if(Y){if(Y==="hex")for(G=G.replace(/[^a-z0-9]+/ig,""),G.length%2!==0&&(G="0"+G),ee=0;ee<G.length;ee+=2)U.push(parseInt(G[ee]+G[ee+1],16))}else for(var W=0,ee=0;ee<G.length;ee++){var re=G.charCodeAt(ee);re<128?U[W++]=re:re<2048?(U[W++]=re>>6|192,U[W++]=re&63|128):_(G,ee)?(re=65536+((re&1023)<<10)+(G.charCodeAt(++ee)&1023),U[W++]=re>>18|240,U[W++]=re>>12&63|128,U[W++]=re>>6&63|128,U[W++]=re&63|128):(U[W++]=re>>12|224,U[W++]=re>>6&63|128,U[W++]=re&63|128)}else for(ee=0;ee<G.length;ee++)U[ee]=G[ee]|0;return U}utils$3.toArray=x;function S(G){for(var Y="",U=0;U<G.length;U++)Y+=T(G[U].toString(16));return Y}utils$3.toHex=S;function E(G){var Y=G>>>24|G>>>8&65280|G<<8&16711680|(G&255)<<24;return Y>>>0}utils$3.htonl=E;function C(G,Y){for(var U="",W=0;W<G.length;W++){var ee=G[W];Y==="little"&&(ee=E(ee)),U+=B(ee.toString(16))}return U}utils$3.toHex32=C;function T(G){return G.length===1?"0"+G:G}utils$3.zero2=T;function B(G){return G.length===7?"0"+G:G.length===6?"00"+G:G.length===5?"000"+G:G.length===4?"0000"+G:G.length===3?"00000"+G:G.length===2?"000000"+G:G.length===1?"0000000"+G:G}utils$3.zero8=B;function A(G,Y,U,W){var ee=U-Y;r(ee%4===0);for(var re=new Array(ee/4),oe=0,ie=Y;oe<re.length;oe++,ie+=4){var ne;W==="big"?ne=G[ie]<<24|G[ie+1]<<16|G[ie+2]<<8|G[ie+3]:ne=G[ie+3]<<24|G[ie+2]<<16|G[ie+1]<<8|G[ie],re[oe]=ne>>>0}return re}utils$3.join32=A;function I(G,Y){for(var U=new Array(G.length*4),W=0,ee=0;W<G.length;W++,ee+=4){var re=G[W];Y==="big"?(U[ee]=re>>>24,U[ee+1]=re>>>16&255,U[ee+2]=re>>>8&255,U[ee+3]=re&255):(U[ee+3]=re>>>24,U[ee+2]=re>>>16&255,U[ee+1]=re>>>8&255,U[ee]=re&255)}return U}utils$3.split32=I;function N(G,Y){return G>>>Y|G<<32-Y}utils$3.rotr32=N;function V(G,Y){return G<<Y|G>>>32-Y}utils$3.rotl32=V;function D(G,Y){return G+Y>>>0}utils$3.sum32=D;function O(G,Y,U){return G+Y+U>>>0}utils$3.sum32_3=O;function F(G,Y,U,W){return G+Y+U+W>>>0}utils$3.sum32_4=F;function M(G,Y,U,W,ee){return G+Y+U+W+ee>>>0}utils$3.sum32_5=M;function L(G,Y,U,W){var ee=G[Y],re=G[Y+1],oe=W+re>>>0,ie=(oe<W?1:0)+U+ee;G[Y]=ie>>>0,G[Y+1]=oe}utils$3.sum64=L;function j(G,Y,U,W){var ee=Y+W>>>0,re=(ee<Y?1:0)+G+U;return re>>>0}utils$3.sum64_hi=j;function q(G,Y,U,W){var ee=Y+W;return ee>>>0}utils$3.sum64_lo=q;function H(G,Y,U,W,ee,re,oe,ie){var ne=0,te=Y;te=te+W>>>0,ne+=te<Y?1:0,te=te+re>>>0,ne+=te<re?1:0,te=te+ie>>>0,ne+=te<ie?1:0;var K=G+U+ee+oe+ne;return K>>>0}utils$3.sum64_4_hi=H;function X(G,Y,U,W,ee,re,oe,ie){var ne=Y+W+re+ie;return ne>>>0}utils$3.sum64_4_lo=X;function J(G,Y,U,W,ee,re,oe,ie,ne,te){var K=0,le=Y;le=le+W>>>0,K+=le<Y?1:0,le=le+re>>>0,K+=le<re?1:0,le=le+ie>>>0,K+=le<ie?1:0,le=le+te>>>0,K+=le<te?1:0;var ue=G+U+ee+oe+ne+K;return ue>>>0}utils$3.sum64_5_hi=J;function Z(G,Y,U,W,ee,re,oe,ie,ne,te){var K=Y+W+re+ie+te;return K>>>0}utils$3.sum64_5_lo=Z;function ae(G,Y,U){var W=Y<<32-U|G>>>U;return W>>>0}utils$3.rotr64_hi=ae;function ce(G,Y,U){var W=G<<32-U|Y>>>U;return W>>>0}utils$3.rotr64_lo=ce;function ve(G,Y,U){return G>>>U}utils$3.shr64_hi=ve;function pe(G,Y,U){var W=G<<32-U|Y>>>U;return W>>>0}return utils$3.shr64_lo=pe,utils$3}var common$2={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$2;hasRequiredCommon$1=1;var r=requireUtils(),n=requireMinimalisticAssert();function _(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$2.BlockHash=_,_.prototype.update=function(S,E){if(S=r.toArray(S,E),this.pending?this.pending=this.pending.concat(S):this.pending=S,this.pendingTotal+=S.length,this.pending.length>=this._delta8){S=this.pending;var C=S.length%this._delta8;this.pending=S.slice(S.length-C,S.length),this.pending.length===0&&(this.pending=null),S=r.join32(S,0,S.length-C,this.endian);for(var T=0;T<S.length;T+=this._delta32)this._update(S,T,T+this._delta32)}return this},_.prototype.digest=function(S){return this.update(this._pad()),n(this.pending===null),this._digest(S)},_.prototype._pad=function(){var S=this.pendingTotal,E=this._delta8,C=E-(S+this.padLength)%E,T=new Array(C+this.padLength);T[0]=128;for(var B=1;B<C;B++)T[B]=0;if(S<<=3,this.endian==="big"){for(var A=8;A<this.padLength;A++)T[B++]=0;T[B++]=0,T[B++]=0,T[B++]=0,T[B++]=0,T[B++]=S>>>24&255,T[B++]=S>>>16&255,T[B++]=S>>>8&255,T[B++]=S&255}else for(T[B++]=S&255,T[B++]=S>>>8&255,T[B++]=S>>>16&255,T[B++]=S>>>24&255,T[B++]=0,T[B++]=0,T[B++]=0,T[B++]=0,A=8;A<this.padLength;A++)T[B++]=0;return T},common$2}var sha$1={},common$1={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common$1;hasRequiredCommon=1;var r=requireUtils(),n=r.rotr32;function _(I,N,V,D){if(I===0)return x(N,V,D);if(I===1||I===3)return E(N,V,D);if(I===2)return S(N,V,D)}common$1.ft_1=_;function x(I,N,V){return I&N^~I&V}common$1.ch32=x;function S(I,N,V){return I&N^I&V^N&V}common$1.maj32=S;function E(I,N,V){return I^N^V}common$1.p32=E;function C(I){return n(I,2)^n(I,13)^n(I,22)}common$1.s0_256=C;function T(I){return n(I,6)^n(I,11)^n(I,25)}common$1.s1_256=T;function B(I){return n(I,7)^n(I,18)^I>>>3}common$1.g0_256=B;function A(I){return n(I,17)^n(I,19)^I>>>10}return common$1.g1_256=A,common$1}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var r=requireUtils(),n=requireCommon$1(),_=requireCommon(),x=r.rotl32,S=r.sum32,E=r.sum32_5,C=_.ft_1,T=n.BlockHash,B=[1518500249,1859775393,2400959708,3395469782];function A(){if(!(this instanceof A))return new A;T.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return r.inherits(A,T),_1=A,A.blockSize=512,A.outSize=160,A.hmacStrength=80,A.padLength=64,A.prototype._update=function(N,V){for(var D=this.W,O=0;O<16;O++)D[O]=N[V+O];for(;O<D.length;O++)D[O]=x(D[O-3]^D[O-8]^D[O-14]^D[O-16],1);var F=this.h[0],M=this.h[1],L=this.h[2],j=this.h[3],q=this.h[4];for(O=0;O<D.length;O++){var H=~~(O/20),X=E(x(F,5),C(H,M,L,j),q,D[O],B[H]);q=j,j=L,L=x(M,30),M=F,F=X}this.h[0]=S(this.h[0],F),this.h[1]=S(this.h[1],M),this.h[2]=S(this.h[2],L),this.h[3]=S(this.h[3],j),this.h[4]=S(this.h[4],q)},A.prototype._digest=function(N){return N==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var r=requireUtils(),n=requireCommon$1(),_=requireCommon(),x=requireMinimalisticAssert(),S=r.sum32,E=r.sum32_4,C=r.sum32_5,T=_.ch32,B=_.maj32,A=_.s0_256,I=_.s1_256,N=_.g0_256,V=_.g1_256,D=n.BlockHash,O=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function F(){if(!(this instanceof F))return new F;D.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=O,this.W=new Array(64)}return r.inherits(F,D),_256=F,F.blockSize=512,F.outSize=256,F.hmacStrength=192,F.padLength=64,F.prototype._update=function(L,j){for(var q=this.W,H=0;H<16;H++)q[H]=L[j+H];for(;H<q.length;H++)q[H]=E(V(q[H-2]),q[H-7],N(q[H-15]),q[H-16]);var X=this.h[0],J=this.h[1],Z=this.h[2],ae=this.h[3],ce=this.h[4],ve=this.h[5],pe=this.h[6],G=this.h[7];for(x(this.k.length===q.length),H=0;H<q.length;H++){var Y=C(G,I(ce),T(ce,ve,pe),this.k[H],q[H]),U=S(A(X),B(X,J,Z));G=pe,pe=ve,ve=ce,ce=S(ae,Y),ae=Z,Z=J,J=X,X=S(Y,U)}this.h[0]=S(this.h[0],X),this.h[1]=S(this.h[1],J),this.h[2]=S(this.h[2],Z),this.h[3]=S(this.h[3],ae),this.h[4]=S(this.h[4],ce),this.h[5]=S(this.h[5],ve),this.h[6]=S(this.h[6],pe),this.h[7]=S(this.h[7],G)},F.prototype._digest=function(L){return L==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var r=requireUtils(),n=require_256();function _(){if(!(this instanceof _))return new _;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return r.inherits(_,n),_224=_,_.blockSize=512,_.outSize=224,_.hmacStrength=192,_.padLength=64,_.prototype._digest=function(S){return S==="hex"?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var r=requireUtils(),n=requireCommon$1(),_=requireMinimalisticAssert(),x=r.rotr64_hi,S=r.rotr64_lo,E=r.shr64_hi,C=r.shr64_lo,T=r.sum64,B=r.sum64_hi,A=r.sum64_lo,I=r.sum64_4_hi,N=r.sum64_4_lo,V=r.sum64_5_hi,D=r.sum64_5_lo,O=n.BlockHash,F=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function M(){if(!(this instanceof M))return new M;O.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=F,this.W=new Array(160)}r.inherits(M,O),_512=M,M.blockSize=1024,M.outSize=512,M.hmacStrength=192,M.padLength=128,M.prototype._prepareBlock=function(U,W){for(var ee=this.W,re=0;re<32;re++)ee[re]=U[W+re];for(;re<ee.length;re+=2){var oe=pe(ee[re-4],ee[re-3]),ie=G(ee[re-4],ee[re-3]),ne=ee[re-14],te=ee[re-13],K=ce(ee[re-30],ee[re-29]),le=ve(ee[re-30],ee[re-29]),ue=ee[re-32],be=ee[re-31];ee[re]=I(oe,ie,ne,te,K,le,ue,be),ee[re+1]=N(oe,ie,ne,te,K,le,ue,be)}},M.prototype._update=function(U,W){this._prepareBlock(U,W);var ee=this.W,re=this.h[0],oe=this.h[1],ie=this.h[2],ne=this.h[3],te=this.h[4],K=this.h[5],le=this.h[6],ue=this.h[7],be=this.h[8],ge=this.h[9],ye=this.h[10],Ee=this.h[11],Re=this.h[12],Ne=this.h[13],Te=this.h[14],he=this.h[15];_(this.k.length===ee.length);for(var xe=0;xe<ee.length;xe+=2){var fe=Te,Be=he,Le=Z(be,ge),Ve=ae(be,ge),Ie=L(be,ge,ye,Ee,Re),Me=j(be,ge,ye,Ee,Re,Ne),He=this.k[xe],We=this.k[xe+1],Ue=ee[xe],Ge=ee[xe+1],et=V(fe,Be,Le,Ve,Ie,Me,He,We,Ue,Ge),ot=D(fe,Be,Le,Ve,Ie,Me,He,We,Ue,Ge);fe=X(re,oe),Be=J(re,oe),Le=q(re,oe,ie,ne,te),Ve=H(re,oe,ie,ne,te,K);var ht=B(fe,Be,Le,Ve),Oe=A(fe,Be,Le,Ve);Te=Re,he=Ne,Re=ye,Ne=Ee,ye=be,Ee=ge,be=B(le,ue,et,ot),ge=A(ue,ue,et,ot),le=te,ue=K,te=ie,K=ne,ie=re,ne=oe,re=B(et,ot,ht,Oe),oe=A(et,ot,ht,Oe)}T(this.h,0,re,oe),T(this.h,2,ie,ne),T(this.h,4,te,K),T(this.h,6,le,ue),T(this.h,8,be,ge),T(this.h,10,ye,Ee),T(this.h,12,Re,Ne),T(this.h,14,Te,he)},M.prototype._digest=function(U){return U==="hex"?r.toHex32(this.h,"big"):r.split32(this.h,"big")};function L(Y,U,W,ee,re){var oe=Y&W^~Y&re;return oe<0&&(oe+=4294967296),oe}function j(Y,U,W,ee,re,oe){var ie=U&ee^~U&oe;return ie<0&&(ie+=4294967296),ie}function q(Y,U,W,ee,re){var oe=Y&W^Y&re^W&re;return oe<0&&(oe+=4294967296),oe}function H(Y,U,W,ee,re,oe){var ie=U&ee^U&oe^ee&oe;return ie<0&&(ie+=4294967296),ie}function X(Y,U){var W=x(Y,U,28),ee=x(U,Y,2),re=x(U,Y,7),oe=W^ee^re;return oe<0&&(oe+=4294967296),oe}function J(Y,U){var W=S(Y,U,28),ee=S(U,Y,2),re=S(U,Y,7),oe=W^ee^re;return oe<0&&(oe+=4294967296),oe}function Z(Y,U){var W=x(Y,U,14),ee=x(Y,U,18),re=x(U,Y,9),oe=W^ee^re;return oe<0&&(oe+=4294967296),oe}function ae(Y,U){var W=S(Y,U,14),ee=S(Y,U,18),re=S(U,Y,9),oe=W^ee^re;return oe<0&&(oe+=4294967296),oe}function ce(Y,U){var W=x(Y,U,1),ee=x(Y,U,8),re=E(Y,U,7),oe=W^ee^re;return oe<0&&(oe+=4294967296),oe}function ve(Y,U){var W=S(Y,U,1),ee=S(Y,U,8),re=C(Y,U,7),oe=W^ee^re;return oe<0&&(oe+=4294967296),oe}function pe(Y,U){var W=x(Y,U,19),ee=x(U,Y,29),re=E(Y,U,6),oe=W^ee^re;return oe<0&&(oe+=4294967296),oe}function G(Y,U){var W=S(Y,U,19),ee=S(U,Y,29),re=C(Y,U,6),oe=W^ee^re;return oe<0&&(oe+=4294967296),oe}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var r=requireUtils(),n=require_512();function _(){if(!(this instanceof _))return new _;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return r.inherits(_,n),_384=_,_.blockSize=1024,_.outSize=384,_.hmacStrength=192,_.padLength=128,_.prototype._digest=function(S){return S==="hex"?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha$1.sha1=require_1(),sha$1.sha224=require_224(),sha$1.sha256=require_256(),sha$1.sha384=require_384(),sha$1.sha512=require_512()),sha$1}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var r=requireUtils(),n=requireCommon$1(),_=r.rotl32,x=r.sum32,S=r.sum32_3,E=r.sum32_4,C=n.BlockHash;function T(){if(!(this instanceof T))return new T;C.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}r.inherits(T,C),ripemd.ripemd160=T,T.blockSize=512,T.outSize=160,T.hmacStrength=192,T.padLength=64,T.prototype._update=function(M,L){for(var j=this.h[0],q=this.h[1],H=this.h[2],X=this.h[3],J=this.h[4],Z=j,ae=q,ce=H,ve=X,pe=J,G=0;G<80;G++){var Y=x(_(E(j,B(G,q,H,X),M[N[G]+L],A(G)),D[G]),J);j=J,J=X,X=_(H,10),H=q,q=Y,Y=x(_(E(Z,B(79-G,ae,ce,ve),M[V[G]+L],I(G)),O[G]),pe),Z=pe,pe=ve,ve=_(ce,10),ce=ae,ae=Y}Y=S(this.h[1],H,ve),this.h[1]=S(this.h[2],X,pe),this.h[2]=S(this.h[3],J,Z),this.h[3]=S(this.h[4],j,ae),this.h[4]=S(this.h[0],q,ce),this.h[0]=Y},T.prototype._digest=function(M){return M==="hex"?r.toHex32(this.h,"little"):r.split32(this.h,"little")};function B(F,M,L,j){return F<=15?M^L^j:F<=31?M&L|~M&j:F<=47?(M|~L)^j:F<=63?M&j|L&~j:M^(L|~j)}function A(F){return F<=15?0:F<=31?1518500249:F<=47?1859775393:F<=63?2400959708:2840853838}function I(F){return F<=15?1352829926:F<=31?1548603684:F<=47?1836072691:F<=63?2053994217:0}var N=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],V=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],D=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],O=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac$1,hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac$1;hasRequiredHmac=1;var r=requireUtils(),n=requireMinimalisticAssert();function _(x,S,E){if(!(this instanceof _))return new _(x,S,E);this.Hash=x,this.blockSize=x.blockSize/8,this.outSize=x.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(S,E))}return hmac$1=_,_.prototype._init=function(S){S.length>this.blockSize&&(S=new this.Hash().update(S).digest()),n(S.length<=this.blockSize);for(var E=S.length;E<this.blockSize;E++)S.push(0);for(E=0;E<S.length;E++)S[E]^=54;for(this.inner=new this.Hash().update(S),E=0;E<S.length;E++)S[E]^=106;this.outer=new this.Hash().update(S)},_.prototype.update=function(S,E){return this.inner.update(S,E),this},_.prototype.digest=function(S){return this.outer.update(this.inner.digest()),this.outer.digest(S)},hmac$1}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(r){var n=r;n.utils=requireUtils(),n.common=requireCommon$1(),n.sha=requireSha(),n.ripemd=requireRipemd(),n.hmac=requireHmac(),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160}(hash$2)),hash$2}var secp256k1$1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1$1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1$1}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(r){var n=r,_=requireHash(),x=requireCurve(),S=requireUtils$1(),E=S.assert;function C(A){A.type==="short"?this.curve=new x.short(A):A.type==="edwards"?this.curve=new x.edwards(A):this.curve=new x.mont(A),this.g=this.curve.g,this.n=this.curve.n,this.hash=A.hash,E(this.g.validate(),"Invalid curve"),E(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}n.PresetCurve=C;function T(A,I){Object.defineProperty(n,A,{configurable:!0,enumerable:!0,get:function(){var N=new C(I);return Object.defineProperty(n,A,{configurable:!0,enumerable:!0,value:N}),N}})}T("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:_.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),T("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:_.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),T("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:_.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),T("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:_.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),T("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:_.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),T("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:_.sha256,gRed:!1,g:["9"]}),T("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:_.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var B;try{B=requireSecp256k1()}catch{B=void 0}T("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:_.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",B]})}(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var r=requireHash(),n=requireUtils$2(),_=requireMinimalisticAssert();function x(S){if(!(this instanceof x))return new x(S);this.hash=S.hash,this.predResist=!!S.predResist,this.outLen=this.hash.outSize,this.minEntropy=S.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var E=n.toArray(S.entropy,S.entropyEnc||"hex"),C=n.toArray(S.nonce,S.nonceEnc||"hex"),T=n.toArray(S.pers,S.persEnc||"hex");_(E.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(E,C,T)}return hmacDrbg=x,x.prototype._init=function(E,C,T){var B=E.concat(C).concat(T);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var A=0;A<this.V.length;A++)this.K[A]=0,this.V[A]=1;this._update(B),this._reseed=1,this.reseedInterval=281474976710656},x.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},x.prototype._update=function(E){var C=this._hmac().update(this.V).update([0]);E&&(C=C.update(E)),this.K=C.digest(),this.V=this._hmac().update(this.V).digest(),E&&(this.K=this._hmac().update(this.V).update([1]).update(E).digest(),this.V=this._hmac().update(this.V).digest())},x.prototype.reseed=function(E,C,T,B){typeof C!="string"&&(B=T,T=C,C=null),E=n.toArray(E,C),T=n.toArray(T,B),_(E.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(E.concat(T||[])),this._reseed=1},x.prototype.generate=function(E,C,T,B){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof C!="string"&&(B=T,T=C,C=null),T&&(T=n.toArray(T,B||"hex"),this._update(T));for(var A=[];A.length<E;)this.V=this._hmac().update(this.V).digest(),A=A.concat(this.V);var I=A.slice(0,E);return this._update(T),this._reseed++,n.encode(I,C)},hmacDrbg}var key$1,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var r=requireBn$2(),n=requireUtils$1(),_=n.assert;function x(S,E){this.ec=S,this.priv=null,this.pub=null,E.priv&&this._importPrivate(E.priv,E.privEnc),E.pub&&this._importPublic(E.pub,E.pubEnc)}return key$1=x,x.fromPublic=function(E,C,T){return C instanceof x?C:new x(E,{pub:C,pubEnc:T})},x.fromPrivate=function(E,C,T){return C instanceof x?C:new x(E,{priv:C,privEnc:T})},x.prototype.validate=function(){var E=this.getPublic();return E.isInfinity()?{result:!1,reason:"Invalid public key"}:E.validate()?E.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},x.prototype.getPublic=function(E,C){return typeof E=="string"&&(C=E,E=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),C?this.pub.encode(C,E):this.pub},x.prototype.getPrivate=function(E){return E==="hex"?this.priv.toString(16,2):this.priv},x.prototype._importPrivate=function(E,C){this.priv=new r(E,C||16),this.priv=this.priv.umod(this.ec.curve.n)},x.prototype._importPublic=function(E,C){if(E.x||E.y){this.ec.curve.type==="mont"?_(E.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&_(E.x&&E.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(E.x,E.y);return}this.pub=this.ec.curve.decodePoint(E,C)},x.prototype.derive=function(E){return E.validate()||_(E.validate(),"public point not validated"),E.mul(this.priv).getX()},x.prototype.sign=function(E,C,T){return this.ec.sign(E,this,C,T)},x.prototype.verify=function(E,C){return this.ec.verify(E,C,this)},x.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$1}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var r=requireBn$2(),n=requireUtils$1(),_=n.assert;function x(B,A){if(B instanceof x)return B;this._importDER(B,A)||(_(B.r&&B.s,"Signature without r or s"),this.r=new r(B.r,16),this.s=new r(B.s,16),B.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=B.recoveryParam)}signature$1=x;function S(){this.place=0}function E(B,A){var I=B[A.place++];if(!(I&128))return I;var N=I&15;if(N===0||N>4)return!1;for(var V=0,D=0,O=A.place;D<N;D++,O++)V<<=8,V|=B[O],V>>>=0;return V<=127?!1:(A.place=O,V)}function C(B){for(var A=0,I=B.length-1;!B[A]&&!(B[A+1]&128)&&A<I;)A++;return A===0?B:B.slice(A)}x.prototype._importDER=function(A,I){A=n.toArray(A,I);var N=new S;if(A[N.place++]!==48)return!1;var V=E(A,N);if(V===!1||V+N.place!==A.length||A[N.place++]!==2)return!1;var D=E(A,N);if(D===!1)return!1;var O=A.slice(N.place,D+N.place);if(N.place+=D,A[N.place++]!==2)return!1;var F=E(A,N);if(F===!1||A.length!==F+N.place)return!1;var M=A.slice(N.place,F+N.place);if(O[0]===0)if(O[1]&128)O=O.slice(1);else return!1;if(M[0]===0)if(M[1]&128)M=M.slice(1);else return!1;return this.r=new r(O),this.s=new r(M),this.recoveryParam=null,!0};function T(B,A){if(A<128){B.push(A);return}var I=1+(Math.log(A)/Math.LN2>>>3);for(B.push(I|128);--I;)B.push(A>>>(I<<3)&255);B.push(A)}return x.prototype.toDER=function(A){var I=this.r.toArray(),N=this.s.toArray();for(I[0]&128&&(I=[0].concat(I)),N[0]&128&&(N=[0].concat(N)),I=C(I),N=C(N);!N[0]&&!(N[1]&128);)N=N.slice(1);var V=[2];T(V,I.length),V=V.concat(I),V.push(2),T(V,N.length);var D=V.concat(N),O=[48];return T(O,D.length),O=O.concat(D),n.encode(O,A)},signature$1}var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var r=requireBn$2(),n=requireHmacDrbg(),_=requireUtils$1(),x=requireCurves(),S=requireBrorand(),E=_.assert,C=requireKey$1(),T=requireSignature$1();function B(A){if(!(this instanceof B))return new B(A);typeof A=="string"&&(E(Object.prototype.hasOwnProperty.call(x,A),"Unknown curve "+A),A=x[A]),A instanceof x.PresetCurve&&(A={curve:A}),this.curve=A.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=A.curve.g,this.g.precompute(A.curve.n.bitLength()+1),this.hash=A.hash||A.curve.hash}return ec=B,B.prototype.keyPair=function(I){return new C(this,I)},B.prototype.keyFromPrivate=function(I,N){return C.fromPrivate(this,I,N)},B.prototype.keyFromPublic=function(I,N){return C.fromPublic(this,I,N)},B.prototype.genKeyPair=function(I){I||(I={});for(var N=new n({hash:this.hash,pers:I.pers,persEnc:I.persEnc||"utf8",entropy:I.entropy||S(this.hash.hmacStrength),entropyEnc:I.entropy&&I.entropyEnc||"utf8",nonce:this.n.toArray()}),V=this.n.byteLength(),D=this.n.sub(new r(2));;){var O=new r(N.generate(V));if(!(O.cmp(D)>0))return O.iaddn(1),this.keyFromPrivate(O)}},B.prototype._truncateToN=function(I,N){var V=I.byteLength()*8-this.n.bitLength();return V>0&&(I=I.ushrn(V)),!N&&I.cmp(this.n)>=0?I.sub(this.n):I},B.prototype.sign=function(I,N,V,D){typeof V=="object"&&(D=V,V=null),D||(D={}),N=this.keyFromPrivate(N,V),I=this._truncateToN(new r(I,16));for(var O=this.n.byteLength(),F=N.getPrivate().toArray("be",O),M=I.toArray("be",O),L=new n({hash:this.hash,entropy:F,nonce:M,pers:D.pers,persEnc:D.persEnc||"utf8"}),j=this.n.sub(new r(1)),q=0;;q++){var H=D.k?D.k(q):new r(L.generate(this.n.byteLength()));if(H=this._truncateToN(H,!0),!(H.cmpn(1)<=0||H.cmp(j)>=0)){var X=this.g.mul(H);if(!X.isInfinity()){var J=X.getX(),Z=J.umod(this.n);if(Z.cmpn(0)!==0){var ae=H.invm(this.n).mul(Z.mul(N.getPrivate()).iadd(I));if(ae=ae.umod(this.n),ae.cmpn(0)!==0){var ce=(X.getY().isOdd()?1:0)|(J.cmp(Z)!==0?2:0);return D.canonical&&ae.cmp(this.nh)>0&&(ae=this.n.sub(ae),ce^=1),new T({r:Z,s:ae,recoveryParam:ce})}}}}}},B.prototype.verify=function(I,N,V,D){I=this._truncateToN(new r(I,16)),V=this.keyFromPublic(V,D),N=new T(N,"hex");var O=N.r,F=N.s;if(O.cmpn(1)<0||O.cmp(this.n)>=0||F.cmpn(1)<0||F.cmp(this.n)>=0)return!1;var M=F.invm(this.n),L=M.mul(I).umod(this.n),j=M.mul(O).umod(this.n),q;return this.curve._maxwellTrick?(q=this.g.jmulAdd(L,V.getPublic(),j),q.isInfinity()?!1:q.eqXToP(O)):(q=this.g.mulAdd(L,V.getPublic(),j),q.isInfinity()?!1:q.getX().umod(this.n).cmp(O)===0)},B.prototype.recoverPubKey=function(A,I,N,V){E((3&N)===N,"The recovery param is more than two bits"),I=new T(I,V);var D=this.n,O=new r(A),F=I.r,M=I.s,L=N&1,j=N>>1;if(F.cmp(this.curve.p.umod(this.curve.n))>=0&&j)throw new Error("Unable to find sencond key candinate");j?F=this.curve.pointFromX(F.add(this.curve.n),L):F=this.curve.pointFromX(F,L);var q=I.r.invm(D),H=D.sub(O).mul(q).umod(D),X=M.mul(q).umod(D);return this.g.mulAdd(H,F,X)},B.prototype.getKeyRecoveryParam=function(A,I,N,V){if(I=new T(I,V),I.recoveryParam!==null)return I.recoveryParam;for(var D=0;D<4;D++){var O;try{O=this.recoverPubKey(A,I,D)}catch{continue}if(O.eq(N))return D}throw new Error("Unable to find valid recovery factor")},ec}var key,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1;var r=requireUtils$1(),n=r.assert,_=r.parseBytes,x=r.cachedProperty;function S(E,C){this.eddsa=E,this._secret=_(C.secret),E.isPoint(C.pub)?this._pub=C.pub:this._pubBytes=_(C.pub)}return S.fromPublic=function(C,T){return T instanceof S?T:new S(C,{pub:T})},S.fromSecret=function(C,T){return T instanceof S?T:new S(C,{secret:T})},S.prototype.secret=function(){return this._secret},x(S,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),x(S,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),x(S,"privBytes",function(){var C=this.eddsa,T=this.hash(),B=C.encodingLength-1,A=T.slice(0,C.encodingLength);return A[0]&=248,A[B]&=127,A[B]|=64,A}),x(S,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),x(S,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),x(S,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),S.prototype.sign=function(C){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(C,this)},S.prototype.verify=function(C,T){return this.eddsa.verify(C,T,this)},S.prototype.getSecret=function(C){return n(this._secret,"KeyPair is public only"),r.encode(this.secret(),C)},S.prototype.getPublic=function(C){return r.encode(this.pubBytes(),C)},key=S,key}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var r=requireBn$2(),n=requireUtils$1(),_=n.assert,x=n.cachedProperty,S=n.parseBytes;function E(C,T){this.eddsa=C,typeof T!="object"&&(T=S(T)),Array.isArray(T)&&(T={R:T.slice(0,C.encodingLength),S:T.slice(C.encodingLength)}),_(T.R&&T.S,"Signature without R or S"),C.isPoint(T.R)&&(this._R=T.R),T.S instanceof r&&(this._S=T.S),this._Rencoded=Array.isArray(T.R)?T.R:T.Rencoded,this._Sencoded=Array.isArray(T.S)?T.S:T.Sencoded}return x(E,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),x(E,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),x(E,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),x(E,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),E.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},E.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},signature=E,signature}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var r=requireHash(),n=requireCurves(),_=requireUtils$1(),x=_.assert,S=_.parseBytes,E=requireKey(),C=requireSignature();function T(B){if(x(B==="ed25519","only tested with ed25519 so far"),!(this instanceof T))return new T(B);B=n[B].curve,this.curve=B,this.g=B.g,this.g.precompute(B.n.bitLength()+1),this.pointClass=B.point().constructor,this.encodingLength=Math.ceil(B.n.bitLength()/8),this.hash=r.sha512}return eddsa=T,T.prototype.sign=function(A,I){A=S(A);var N=this.keyFromSecret(I),V=this.hashInt(N.messagePrefix(),A),D=this.g.mul(V),O=this.encodePoint(D),F=this.hashInt(O,N.pubBytes(),A).mul(N.priv()),M=V.add(F).umod(this.curve.n);return this.makeSignature({R:D,S:M,Rencoded:O})},T.prototype.verify=function(A,I,N){A=S(A),I=this.makeSignature(I);var V=this.keyFromPublic(N),D=this.hashInt(I.Rencoded(),V.pubBytes(),A),O=this.g.mul(I.S()),F=I.R().add(V.pub().mul(D));return F.eq(O)},T.prototype.hashInt=function(){for(var A=this.hash(),I=0;I<arguments.length;I++)A.update(arguments[I]);return _.intFromLE(A.digest()).umod(this.curve.n)},T.prototype.keyFromPublic=function(A){return E.fromPublic(this,A)},T.prototype.keyFromSecret=function(A){return E.fromSecret(this,A)},T.prototype.makeSignature=function(A){return A instanceof C?A:new C(this,A)},T.prototype.encodePoint=function(A){var I=A.getY().toArray("le",this.encodingLength);return I[this.encodingLength-1]|=A.getX().isOdd()?128:0,I},T.prototype.decodePoint=function(A){A=_.parseBytes(A);var I=A.length-1,N=A.slice(0,I).concat(A[I]&-129),V=(A[I]&128)!==0,D=_.intFromLE(N);return this.curve.pointFromY(D,V)},T.prototype.encodeInt=function(A){return A.toArray("le",this.encodingLength)},T.prototype.decodeInt=function(A){return _.intFromLE(A)},T.prototype.isPoint=function(A){return A instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(r){var n=r;n.version=require$$0.version,n.utils=requireUtils$1(),n.rand=requireBrorand(),n.curve=requireCurve(),n.curves=requireCurves(),n.ec=requireEc(),n.eddsa=requireEddsa()}(elliptic)),elliptic}var bn={exports:{}};bn.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(r){(function(n,_){function x(Y,U){if(!Y)throw new Error(U||"Assertion failed")}function S(Y,U){Y.super_=U;var W=function(){};W.prototype=U.prototype,Y.prototype=new W,Y.prototype.constructor=Y}function E(Y,U,W){if(E.isBN(Y))return Y;this.negative=0,this.words=null,this.length=0,this.red=null,Y!==null&&((U==="le"||U==="be")&&(W=U,U=10),this._init(Y||0,U||10,W||"be"))}typeof n=="object"?n.exports=E:_.BN=E,E.BN=E,E.wordSize=26;var C;try{typeof window<"u"&&typeof window.Buffer<"u"?C=window.Buffer:C=require$$0$2.Buffer}catch{}E.isBN=function(U){return U instanceof E?!0:U!==null&&typeof U=="object"&&U.constructor.wordSize===E.wordSize&&Array.isArray(U.words)},E.max=function(U,W){return U.cmp(W)>0?U:W},E.min=function(U,W){return U.cmp(W)<0?U:W},E.prototype._init=function(U,W,ee){if(typeof U=="number")return this._initNumber(U,W,ee);if(typeof U=="object")return this._initArray(U,W,ee);W==="hex"&&(W=16),x(W===(W|0)&&W>=2&&W<=36),U=U.toString().replace(/\s+/g,"");var re=0;U[0]==="-"&&(re++,this.negative=1),re<U.length&&(W===16?this._parseHex(U,re,ee):(this._parseBase(U,W,re),ee==="le"&&this._initArray(this.toArray(),W,ee)))},E.prototype._initNumber=function(U,W,ee){U<0&&(this.negative=1,U=-U),U<67108864?(this.words=[U&67108863],this.length=1):U<4503599627370496?(this.words=[U&67108863,U/67108864&67108863],this.length=2):(x(U<9007199254740992),this.words=[U&67108863,U/67108864&67108863,1],this.length=3),ee==="le"&&this._initArray(this.toArray(),W,ee)},E.prototype._initArray=function(U,W,ee){if(x(typeof U.length=="number"),U.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(U.length/3),this.words=new Array(this.length);for(var re=0;re<this.length;re++)this.words[re]=0;var oe,ie,ne=0;if(ee==="be")for(re=U.length-1,oe=0;re>=0;re-=3)ie=U[re]|U[re-1]<<8|U[re-2]<<16,this.words[oe]|=ie<<ne&67108863,this.words[oe+1]=ie>>>26-ne&67108863,ne+=24,ne>=26&&(ne-=26,oe++);else if(ee==="le")for(re=0,oe=0;re<U.length;re+=3)ie=U[re]|U[re+1]<<8|U[re+2]<<16,this.words[oe]|=ie<<ne&67108863,this.words[oe+1]=ie>>>26-ne&67108863,ne+=24,ne>=26&&(ne-=26,oe++);return this._strip()};function T(Y,U){var W=Y.charCodeAt(U);if(W>=48&&W<=57)return W-48;if(W>=65&&W<=70)return W-55;if(W>=97&&W<=102)return W-87;x(!1,"Invalid character in "+Y)}function B(Y,U,W){var ee=T(Y,W);return W-1>=U&&(ee|=T(Y,W-1)<<4),ee}E.prototype._parseHex=function(U,W,ee){this.length=Math.ceil((U.length-W)/6),this.words=new Array(this.length);for(var re=0;re<this.length;re++)this.words[re]=0;var oe=0,ie=0,ne;if(ee==="be")for(re=U.length-1;re>=W;re-=2)ne=B(U,W,re)<<oe,this.words[ie]|=ne&67108863,oe>=18?(oe-=18,ie+=1,this.words[ie]|=ne>>>26):oe+=8;else{var te=U.length-W;for(re=te%2===0?W+1:W;re<U.length;re+=2)ne=B(U,W,re)<<oe,this.words[ie]|=ne&67108863,oe>=18?(oe-=18,ie+=1,this.words[ie]|=ne>>>26):oe+=8}this._strip()};function A(Y,U,W,ee){for(var re=0,oe=0,ie=Math.min(Y.length,W),ne=U;ne<ie;ne++){var te=Y.charCodeAt(ne)-48;re*=ee,te>=49?oe=te-49+10:te>=17?oe=te-17+10:oe=te,x(te>=0&&oe<ee,"Invalid character"),re+=oe}return re}E.prototype._parseBase=function(U,W,ee){this.words=[0],this.length=1;for(var re=0,oe=1;oe<=67108863;oe*=W)re++;re--,oe=oe/W|0;for(var ie=U.length-ee,ne=ie%re,te=Math.min(ie,ie-ne)+ee,K=0,le=ee;le<te;le+=re)K=A(U,le,le+re,W),this.imuln(oe),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K);if(ne!==0){var ue=1;for(K=A(U,le,U.length,W),le=0;le<ne;le++)ue*=W;this.imuln(ue),this.words[0]+K<67108864?this.words[0]+=K:this._iaddn(K)}this._strip()},E.prototype.copy=function(U){U.words=new Array(this.length);for(var W=0;W<this.length;W++)U.words[W]=this.words[W];U.length=this.length,U.negative=this.negative,U.red=this.red};function I(Y,U){Y.words=U.words,Y.length=U.length,Y.negative=U.negative,Y.red=U.red}if(E.prototype._move=function(U){I(U,this)},E.prototype.clone=function(){var U=new E(null);return this.copy(U),U},E.prototype._expand=function(U){for(;this.length<U;)this.words[this.length++]=0;return this},E.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},E.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{E.prototype[Symbol.for("nodejs.util.inspect.custom")]=N}catch{E.prototype.inspect=N}else E.prototype.inspect=N;function N(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var V=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];E.prototype.toString=function(U,W){U=U||10,W=W|0||1;var ee;if(U===16||U==="hex"){ee="";for(var re=0,oe=0,ie=0;ie<this.length;ie++){var ne=this.words[ie],te=((ne<<re|oe)&16777215).toString(16);oe=ne>>>24-re&16777215,re+=2,re>=26&&(re-=26,ie--),oe!==0||ie!==this.length-1?ee=V[6-te.length]+te+ee:ee=te+ee}for(oe!==0&&(ee=oe.toString(16)+ee);ee.length%W!==0;)ee="0"+ee;return this.negative!==0&&(ee="-"+ee),ee}if(U===(U|0)&&U>=2&&U<=36){var K=D[U],le=O[U];ee="";var ue=this.clone();for(ue.negative=0;!ue.isZero();){var be=ue.modrn(le).toString(U);ue=ue.idivn(le),ue.isZero()?ee=be+ee:ee=V[K-be.length]+be+ee}for(this.isZero()&&(ee="0"+ee);ee.length%W!==0;)ee="0"+ee;return this.negative!==0&&(ee="-"+ee),ee}x(!1,"Base should be between 2 and 36")},E.prototype.toNumber=function(){var U=this.words[0];return this.length===2?U+=this.words[1]*67108864:this.length===3&&this.words[2]===1?U+=4503599627370496+this.words[1]*67108864:this.length>2&&x(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-U:U},E.prototype.toJSON=function(){return this.toString(16,2)},C&&(E.prototype.toBuffer=function(U,W){return this.toArrayLike(C,U,W)}),E.prototype.toArray=function(U,W){return this.toArrayLike(Array,U,W)};var F=function(U,W){return U.allocUnsafe?U.allocUnsafe(W):new U(W)};E.prototype.toArrayLike=function(U,W,ee){this._strip();var re=this.byteLength(),oe=ee||Math.max(1,re);x(re<=oe,"byte array longer than desired length"),x(oe>0,"Requested array length <= 0");var ie=F(U,oe),ne=W==="le"?"LE":"BE";return this["_toArrayLike"+ne](ie,re),ie},E.prototype._toArrayLikeLE=function(U,W){for(var ee=0,re=0,oe=0,ie=0;oe<this.length;oe++){var ne=this.words[oe]<<ie|re;U[ee++]=ne&255,ee<U.length&&(U[ee++]=ne>>8&255),ee<U.length&&(U[ee++]=ne>>16&255),ie===6?(ee<U.length&&(U[ee++]=ne>>24&255),re=0,ie=0):(re=ne>>>24,ie+=2)}if(ee<U.length)for(U[ee++]=re;ee<U.length;)U[ee++]=0},E.prototype._toArrayLikeBE=function(U,W){for(var ee=U.length-1,re=0,oe=0,ie=0;oe<this.length;oe++){var ne=this.words[oe]<<ie|re;U[ee--]=ne&255,ee>=0&&(U[ee--]=ne>>8&255),ee>=0&&(U[ee--]=ne>>16&255),ie===6?(ee>=0&&(U[ee--]=ne>>24&255),re=0,ie=0):(re=ne>>>24,ie+=2)}if(ee>=0)for(U[ee--]=re;ee>=0;)U[ee--]=0},Math.clz32?E.prototype._countBits=function(U){return 32-Math.clz32(U)}:E.prototype._countBits=function(U){var W=U,ee=0;return W>=4096&&(ee+=13,W>>>=13),W>=64&&(ee+=7,W>>>=7),W>=8&&(ee+=4,W>>>=4),W>=2&&(ee+=2,W>>>=2),ee+W},E.prototype._zeroBits=function(U){if(U===0)return 26;var W=U,ee=0;return W&8191||(ee+=13,W>>>=13),W&127||(ee+=7,W>>>=7),W&15||(ee+=4,W>>>=4),W&3||(ee+=2,W>>>=2),W&1||ee++,ee},E.prototype.bitLength=function(){var U=this.words[this.length-1],W=this._countBits(U);return(this.length-1)*26+W};function M(Y){for(var U=new Array(Y.bitLength()),W=0;W<U.length;W++){var ee=W/26|0,re=W%26;U[W]=Y.words[ee]>>>re&1}return U}E.prototype.zeroBits=function(){if(this.isZero())return 0;for(var U=0,W=0;W<this.length;W++){var ee=this._zeroBits(this.words[W]);if(U+=ee,ee!==26)break}return U},E.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},E.prototype.toTwos=function(U){return this.negative!==0?this.abs().inotn(U).iaddn(1):this.clone()},E.prototype.fromTwos=function(U){return this.testn(U-1)?this.notn(U).iaddn(1).ineg():this.clone()},E.prototype.isNeg=function(){return this.negative!==0},E.prototype.neg=function(){return this.clone().ineg()},E.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},E.prototype.iuor=function(U){for(;this.length<U.length;)this.words[this.length++]=0;for(var W=0;W<U.length;W++)this.words[W]=this.words[W]|U.words[W];return this._strip()},E.prototype.ior=function(U){return x((this.negative|U.negative)===0),this.iuor(U)},E.prototype.or=function(U){return this.length>U.length?this.clone().ior(U):U.clone().ior(this)},E.prototype.uor=function(U){return this.length>U.length?this.clone().iuor(U):U.clone().iuor(this)},E.prototype.iuand=function(U){var W;this.length>U.length?W=U:W=this;for(var ee=0;ee<W.length;ee++)this.words[ee]=this.words[ee]&U.words[ee];return this.length=W.length,this._strip()},E.prototype.iand=function(U){return x((this.negative|U.negative)===0),this.iuand(U)},E.prototype.and=function(U){return this.length>U.length?this.clone().iand(U):U.clone().iand(this)},E.prototype.uand=function(U){return this.length>U.length?this.clone().iuand(U):U.clone().iuand(this)},E.prototype.iuxor=function(U){var W,ee;this.length>U.length?(W=this,ee=U):(W=U,ee=this);for(var re=0;re<ee.length;re++)this.words[re]=W.words[re]^ee.words[re];if(this!==W)for(;re<W.length;re++)this.words[re]=W.words[re];return this.length=W.length,this._strip()},E.prototype.ixor=function(U){return x((this.negative|U.negative)===0),this.iuxor(U)},E.prototype.xor=function(U){return this.length>U.length?this.clone().ixor(U):U.clone().ixor(this)},E.prototype.uxor=function(U){return this.length>U.length?this.clone().iuxor(U):U.clone().iuxor(this)},E.prototype.inotn=function(U){x(typeof U=="number"&&U>=0);var W=Math.ceil(U/26)|0,ee=U%26;this._expand(W),ee>0&&W--;for(var re=0;re<W;re++)this.words[re]=~this.words[re]&67108863;return ee>0&&(this.words[re]=~this.words[re]&67108863>>26-ee),this._strip()},E.prototype.notn=function(U){return this.clone().inotn(U)},E.prototype.setn=function(U,W){x(typeof U=="number"&&U>=0);var ee=U/26|0,re=U%26;return this._expand(ee+1),W?this.words[ee]=this.words[ee]|1<<re:this.words[ee]=this.words[ee]&~(1<<re),this._strip()},E.prototype.iadd=function(U){var W;if(this.negative!==0&&U.negative===0)return this.negative=0,W=this.isub(U),this.negative^=1,this._normSign();if(this.negative===0&&U.negative!==0)return U.negative=0,W=this.isub(U),U.negative=1,W._normSign();var ee,re;this.length>U.length?(ee=this,re=U):(ee=U,re=this);for(var oe=0,ie=0;ie<re.length;ie++)W=(ee.words[ie]|0)+(re.words[ie]|0)+oe,this.words[ie]=W&67108863,oe=W>>>26;for(;oe!==0&&ie<ee.length;ie++)W=(ee.words[ie]|0)+oe,this.words[ie]=W&67108863,oe=W>>>26;if(this.length=ee.length,oe!==0)this.words[this.length]=oe,this.length++;else if(ee!==this)for(;ie<ee.length;ie++)this.words[ie]=ee.words[ie];return this},E.prototype.add=function(U){var W;return U.negative!==0&&this.negative===0?(U.negative=0,W=this.sub(U),U.negative^=1,W):U.negative===0&&this.negative!==0?(this.negative=0,W=U.sub(this),this.negative=1,W):this.length>U.length?this.clone().iadd(U):U.clone().iadd(this)},E.prototype.isub=function(U){if(U.negative!==0){U.negative=0;var W=this.iadd(U);return U.negative=1,W._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(U),this.negative=1,this._normSign();var ee=this.cmp(U);if(ee===0)return this.negative=0,this.length=1,this.words[0]=0,this;var re,oe;ee>0?(re=this,oe=U):(re=U,oe=this);for(var ie=0,ne=0;ne<oe.length;ne++)W=(re.words[ne]|0)-(oe.words[ne]|0)+ie,ie=W>>26,this.words[ne]=W&67108863;for(;ie!==0&&ne<re.length;ne++)W=(re.words[ne]|0)+ie,ie=W>>26,this.words[ne]=W&67108863;if(ie===0&&ne<re.length&&re!==this)for(;ne<re.length;ne++)this.words[ne]=re.words[ne];return this.length=Math.max(this.length,ne),re!==this&&(this.negative=1),this._strip()},E.prototype.sub=function(U){return this.clone().isub(U)};function L(Y,U,W){W.negative=U.negative^Y.negative;var ee=Y.length+U.length|0;W.length=ee,ee=ee-1|0;var re=Y.words[0]|0,oe=U.words[0]|0,ie=re*oe,ne=ie&67108863,te=ie/67108864|0;W.words[0]=ne;for(var K=1;K<ee;K++){for(var le=te>>>26,ue=te&67108863,be=Math.min(K,U.length-1),ge=Math.max(0,K-Y.length+1);ge<=be;ge++){var ye=K-ge|0;re=Y.words[ye]|0,oe=U.words[ge]|0,ie=re*oe+ue,le+=ie/67108864|0,ue=ie&67108863}W.words[K]=ue|0,te=le|0}return te!==0?W.words[K]=te|0:W.length--,W._strip()}var j=function(U,W,ee){var re=U.words,oe=W.words,ie=ee.words,ne=0,te,K,le,ue=re[0]|0,be=ue&8191,ge=ue>>>13,ye=re[1]|0,Ee=ye&8191,Re=ye>>>13,Ne=re[2]|0,Te=Ne&8191,he=Ne>>>13,xe=re[3]|0,fe=xe&8191,Be=xe>>>13,Le=re[4]|0,Ve=Le&8191,Ie=Le>>>13,Me=re[5]|0,He=Me&8191,We=Me>>>13,Ue=re[6]|0,Ge=Ue&8191,et=Ue>>>13,ot=re[7]|0,ht=ot&8191,Oe=ot>>>13,we=re[8]|0,Ce=we&8191,ze=we>>>13,Ze=re[9]|0,st=Ze&8191,rt=Ze>>>13,Ft=oe[0]|0,Vt=Ft&8191,Et=Ft>>>13,jt=oe[1]|0,Lt=jt&8191,qt=jt>>>13,_r=oe[2]|0,Zt=_r&8191,zt=_r>>>13,hr=oe[3]|0,Xt=hr&8191,Ht=hr>>>13,gr=oe[4]|0,Qt=gr&8191,Kt=gr>>>13,$r=oe[5]|0,tr=$r&8191,Ut=$r>>>13,wr=oe[6]|0,De=wr&8191,ke=wr>>>13,Se=oe[7]|0,se=Se&8191,_e=Se>>>13,$e=oe[8]|0,Pe=$e&8191,Fe=$e>>>13,qe=oe[9]|0,Ye=qe&8191,Je=qe>>>13;ee.negative=U.negative^W.negative,ee.length=19,te=Math.imul(be,Vt),K=Math.imul(be,Et),K=K+Math.imul(ge,Vt)|0,le=Math.imul(ge,Et);var tt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(tt>>>26)|0,tt&=67108863,te=Math.imul(Ee,Vt),K=Math.imul(Ee,Et),K=K+Math.imul(Re,Vt)|0,le=Math.imul(Re,Et),te=te+Math.imul(be,Lt)|0,K=K+Math.imul(be,qt)|0,K=K+Math.imul(ge,Lt)|0,le=le+Math.imul(ge,qt)|0;var Qe=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,te=Math.imul(Te,Vt),K=Math.imul(Te,Et),K=K+Math.imul(he,Vt)|0,le=Math.imul(he,Et),te=te+Math.imul(Ee,Lt)|0,K=K+Math.imul(Ee,qt)|0,K=K+Math.imul(Re,Lt)|0,le=le+Math.imul(Re,qt)|0,te=te+Math.imul(be,Zt)|0,K=K+Math.imul(be,zt)|0,K=K+Math.imul(ge,Zt)|0,le=le+Math.imul(ge,zt)|0;var it=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(it>>>26)|0,it&=67108863,te=Math.imul(fe,Vt),K=Math.imul(fe,Et),K=K+Math.imul(Be,Vt)|0,le=Math.imul(Be,Et),te=te+Math.imul(Te,Lt)|0,K=K+Math.imul(Te,qt)|0,K=K+Math.imul(he,Lt)|0,le=le+Math.imul(he,qt)|0,te=te+Math.imul(Ee,Zt)|0,K=K+Math.imul(Ee,zt)|0,K=K+Math.imul(Re,Zt)|0,le=le+Math.imul(Re,zt)|0,te=te+Math.imul(be,Xt)|0,K=K+Math.imul(be,Ht)|0,K=K+Math.imul(ge,Xt)|0,le=le+Math.imul(ge,Ht)|0;var lt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(lt>>>26)|0,lt&=67108863,te=Math.imul(Ve,Vt),K=Math.imul(Ve,Et),K=K+Math.imul(Ie,Vt)|0,le=Math.imul(Ie,Et),te=te+Math.imul(fe,Lt)|0,K=K+Math.imul(fe,qt)|0,K=K+Math.imul(Be,Lt)|0,le=le+Math.imul(Be,qt)|0,te=te+Math.imul(Te,Zt)|0,K=K+Math.imul(Te,zt)|0,K=K+Math.imul(he,Zt)|0,le=le+Math.imul(he,zt)|0,te=te+Math.imul(Ee,Xt)|0,K=K+Math.imul(Ee,Ht)|0,K=K+Math.imul(Re,Xt)|0,le=le+Math.imul(Re,Ht)|0,te=te+Math.imul(be,Qt)|0,K=K+Math.imul(be,Kt)|0,K=K+Math.imul(ge,Qt)|0,le=le+Math.imul(ge,Kt)|0;var vt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(vt>>>26)|0,vt&=67108863,te=Math.imul(He,Vt),K=Math.imul(He,Et),K=K+Math.imul(We,Vt)|0,le=Math.imul(We,Et),te=te+Math.imul(Ve,Lt)|0,K=K+Math.imul(Ve,qt)|0,K=K+Math.imul(Ie,Lt)|0,le=le+Math.imul(Ie,qt)|0,te=te+Math.imul(fe,Zt)|0,K=K+Math.imul(fe,zt)|0,K=K+Math.imul(Be,Zt)|0,le=le+Math.imul(Be,zt)|0,te=te+Math.imul(Te,Xt)|0,K=K+Math.imul(Te,Ht)|0,K=K+Math.imul(he,Xt)|0,le=le+Math.imul(he,Ht)|0,te=te+Math.imul(Ee,Qt)|0,K=K+Math.imul(Ee,Kt)|0,K=K+Math.imul(Re,Qt)|0,le=le+Math.imul(Re,Kt)|0,te=te+Math.imul(be,tr)|0,K=K+Math.imul(be,Ut)|0,K=K+Math.imul(ge,tr)|0,le=le+Math.imul(ge,Ut)|0;var bt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(bt>>>26)|0,bt&=67108863,te=Math.imul(Ge,Vt),K=Math.imul(Ge,Et),K=K+Math.imul(et,Vt)|0,le=Math.imul(et,Et),te=te+Math.imul(He,Lt)|0,K=K+Math.imul(He,qt)|0,K=K+Math.imul(We,Lt)|0,le=le+Math.imul(We,qt)|0,te=te+Math.imul(Ve,Zt)|0,K=K+Math.imul(Ve,zt)|0,K=K+Math.imul(Ie,Zt)|0,le=le+Math.imul(Ie,zt)|0,te=te+Math.imul(fe,Xt)|0,K=K+Math.imul(fe,Ht)|0,K=K+Math.imul(Be,Xt)|0,le=le+Math.imul(Be,Ht)|0,te=te+Math.imul(Te,Qt)|0,K=K+Math.imul(Te,Kt)|0,K=K+Math.imul(he,Qt)|0,le=le+Math.imul(he,Kt)|0,te=te+Math.imul(Ee,tr)|0,K=K+Math.imul(Ee,Ut)|0,K=K+Math.imul(Re,tr)|0,le=le+Math.imul(Re,Ut)|0,te=te+Math.imul(be,De)|0,K=K+Math.imul(be,ke)|0,K=K+Math.imul(ge,De)|0,le=le+Math.imul(ge,ke)|0;var dt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(dt>>>26)|0,dt&=67108863,te=Math.imul(ht,Vt),K=Math.imul(ht,Et),K=K+Math.imul(Oe,Vt)|0,le=Math.imul(Oe,Et),te=te+Math.imul(Ge,Lt)|0,K=K+Math.imul(Ge,qt)|0,K=K+Math.imul(et,Lt)|0,le=le+Math.imul(et,qt)|0,te=te+Math.imul(He,Zt)|0,K=K+Math.imul(He,zt)|0,K=K+Math.imul(We,Zt)|0,le=le+Math.imul(We,zt)|0,te=te+Math.imul(Ve,Xt)|0,K=K+Math.imul(Ve,Ht)|0,K=K+Math.imul(Ie,Xt)|0,le=le+Math.imul(Ie,Ht)|0,te=te+Math.imul(fe,Qt)|0,K=K+Math.imul(fe,Kt)|0,K=K+Math.imul(Be,Qt)|0,le=le+Math.imul(Be,Kt)|0,te=te+Math.imul(Te,tr)|0,K=K+Math.imul(Te,Ut)|0,K=K+Math.imul(he,tr)|0,le=le+Math.imul(he,Ut)|0,te=te+Math.imul(Ee,De)|0,K=K+Math.imul(Ee,ke)|0,K=K+Math.imul(Re,De)|0,le=le+Math.imul(Re,ke)|0,te=te+Math.imul(be,se)|0,K=K+Math.imul(be,_e)|0,K=K+Math.imul(ge,se)|0,le=le+Math.imul(ge,_e)|0;var yt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(yt>>>26)|0,yt&=67108863,te=Math.imul(Ce,Vt),K=Math.imul(Ce,Et),K=K+Math.imul(ze,Vt)|0,le=Math.imul(ze,Et),te=te+Math.imul(ht,Lt)|0,K=K+Math.imul(ht,qt)|0,K=K+Math.imul(Oe,Lt)|0,le=le+Math.imul(Oe,qt)|0,te=te+Math.imul(Ge,Zt)|0,K=K+Math.imul(Ge,zt)|0,K=K+Math.imul(et,Zt)|0,le=le+Math.imul(et,zt)|0,te=te+Math.imul(He,Xt)|0,K=K+Math.imul(He,Ht)|0,K=K+Math.imul(We,Xt)|0,le=le+Math.imul(We,Ht)|0,te=te+Math.imul(Ve,Qt)|0,K=K+Math.imul(Ve,Kt)|0,K=K+Math.imul(Ie,Qt)|0,le=le+Math.imul(Ie,Kt)|0,te=te+Math.imul(fe,tr)|0,K=K+Math.imul(fe,Ut)|0,K=K+Math.imul(Be,tr)|0,le=le+Math.imul(Be,Ut)|0,te=te+Math.imul(Te,De)|0,K=K+Math.imul(Te,ke)|0,K=K+Math.imul(he,De)|0,le=le+Math.imul(he,ke)|0,te=te+Math.imul(Ee,se)|0,K=K+Math.imul(Ee,_e)|0,K=K+Math.imul(Re,se)|0,le=le+Math.imul(Re,_e)|0,te=te+Math.imul(be,Pe)|0,K=K+Math.imul(be,Fe)|0,K=K+Math.imul(ge,Pe)|0,le=le+Math.imul(ge,Fe)|0;var Tt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,te=Math.imul(st,Vt),K=Math.imul(st,Et),K=K+Math.imul(rt,Vt)|0,le=Math.imul(rt,Et),te=te+Math.imul(Ce,Lt)|0,K=K+Math.imul(Ce,qt)|0,K=K+Math.imul(ze,Lt)|0,le=le+Math.imul(ze,qt)|0,te=te+Math.imul(ht,Zt)|0,K=K+Math.imul(ht,zt)|0,K=K+Math.imul(Oe,Zt)|0,le=le+Math.imul(Oe,zt)|0,te=te+Math.imul(Ge,Xt)|0,K=K+Math.imul(Ge,Ht)|0,K=K+Math.imul(et,Xt)|0,le=le+Math.imul(et,Ht)|0,te=te+Math.imul(He,Qt)|0,K=K+Math.imul(He,Kt)|0,K=K+Math.imul(We,Qt)|0,le=le+Math.imul(We,Kt)|0,te=te+Math.imul(Ve,tr)|0,K=K+Math.imul(Ve,Ut)|0,K=K+Math.imul(Ie,tr)|0,le=le+Math.imul(Ie,Ut)|0,te=te+Math.imul(fe,De)|0,K=K+Math.imul(fe,ke)|0,K=K+Math.imul(Be,De)|0,le=le+Math.imul(Be,ke)|0,te=te+Math.imul(Te,se)|0,K=K+Math.imul(Te,_e)|0,K=K+Math.imul(he,se)|0,le=le+Math.imul(he,_e)|0,te=te+Math.imul(Ee,Pe)|0,K=K+Math.imul(Ee,Fe)|0,K=K+Math.imul(Re,Pe)|0,le=le+Math.imul(Re,Fe)|0,te=te+Math.imul(be,Ye)|0,K=K+Math.imul(be,Je)|0,K=K+Math.imul(ge,Ye)|0,le=le+Math.imul(ge,Je)|0;var kt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(kt>>>26)|0,kt&=67108863,te=Math.imul(st,Lt),K=Math.imul(st,qt),K=K+Math.imul(rt,Lt)|0,le=Math.imul(rt,qt),te=te+Math.imul(Ce,Zt)|0,K=K+Math.imul(Ce,zt)|0,K=K+Math.imul(ze,Zt)|0,le=le+Math.imul(ze,zt)|0,te=te+Math.imul(ht,Xt)|0,K=K+Math.imul(ht,Ht)|0,K=K+Math.imul(Oe,Xt)|0,le=le+Math.imul(Oe,Ht)|0,te=te+Math.imul(Ge,Qt)|0,K=K+Math.imul(Ge,Kt)|0,K=K+Math.imul(et,Qt)|0,le=le+Math.imul(et,Kt)|0,te=te+Math.imul(He,tr)|0,K=K+Math.imul(He,Ut)|0,K=K+Math.imul(We,tr)|0,le=le+Math.imul(We,Ut)|0,te=te+Math.imul(Ve,De)|0,K=K+Math.imul(Ve,ke)|0,K=K+Math.imul(Ie,De)|0,le=le+Math.imul(Ie,ke)|0,te=te+Math.imul(fe,se)|0,K=K+Math.imul(fe,_e)|0,K=K+Math.imul(Be,se)|0,le=le+Math.imul(Be,_e)|0,te=te+Math.imul(Te,Pe)|0,K=K+Math.imul(Te,Fe)|0,K=K+Math.imul(he,Pe)|0,le=le+Math.imul(he,Fe)|0,te=te+Math.imul(Ee,Ye)|0,K=K+Math.imul(Ee,Je)|0,K=K+Math.imul(Re,Ye)|0,le=le+Math.imul(Re,Je)|0;var Pt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,te=Math.imul(st,Zt),K=Math.imul(st,zt),K=K+Math.imul(rt,Zt)|0,le=Math.imul(rt,zt),te=te+Math.imul(Ce,Xt)|0,K=K+Math.imul(Ce,Ht)|0,K=K+Math.imul(ze,Xt)|0,le=le+Math.imul(ze,Ht)|0,te=te+Math.imul(ht,Qt)|0,K=K+Math.imul(ht,Kt)|0,K=K+Math.imul(Oe,Qt)|0,le=le+Math.imul(Oe,Kt)|0,te=te+Math.imul(Ge,tr)|0,K=K+Math.imul(Ge,Ut)|0,K=K+Math.imul(et,tr)|0,le=le+Math.imul(et,Ut)|0,te=te+Math.imul(He,De)|0,K=K+Math.imul(He,ke)|0,K=K+Math.imul(We,De)|0,le=le+Math.imul(We,ke)|0,te=te+Math.imul(Ve,se)|0,K=K+Math.imul(Ve,_e)|0,K=K+Math.imul(Ie,se)|0,le=le+Math.imul(Ie,_e)|0,te=te+Math.imul(fe,Pe)|0,K=K+Math.imul(fe,Fe)|0,K=K+Math.imul(Be,Pe)|0,le=le+Math.imul(Be,Fe)|0,te=te+Math.imul(Te,Ye)|0,K=K+Math.imul(Te,Je)|0,K=K+Math.imul(he,Ye)|0,le=le+Math.imul(he,Je)|0;var It=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(It>>>26)|0,It&=67108863,te=Math.imul(st,Xt),K=Math.imul(st,Ht),K=K+Math.imul(rt,Xt)|0,le=Math.imul(rt,Ht),te=te+Math.imul(Ce,Qt)|0,K=K+Math.imul(Ce,Kt)|0,K=K+Math.imul(ze,Qt)|0,le=le+Math.imul(ze,Kt)|0,te=te+Math.imul(ht,tr)|0,K=K+Math.imul(ht,Ut)|0,K=K+Math.imul(Oe,tr)|0,le=le+Math.imul(Oe,Ut)|0,te=te+Math.imul(Ge,De)|0,K=K+Math.imul(Ge,ke)|0,K=K+Math.imul(et,De)|0,le=le+Math.imul(et,ke)|0,te=te+Math.imul(He,se)|0,K=K+Math.imul(He,_e)|0,K=K+Math.imul(We,se)|0,le=le+Math.imul(We,_e)|0,te=te+Math.imul(Ve,Pe)|0,K=K+Math.imul(Ve,Fe)|0,K=K+Math.imul(Ie,Pe)|0,le=le+Math.imul(Ie,Fe)|0,te=te+Math.imul(fe,Ye)|0,K=K+Math.imul(fe,Je)|0,K=K+Math.imul(Be,Ye)|0,le=le+Math.imul(Be,Je)|0;var Ot=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,te=Math.imul(st,Qt),K=Math.imul(st,Kt),K=K+Math.imul(rt,Qt)|0,le=Math.imul(rt,Kt),te=te+Math.imul(Ce,tr)|0,K=K+Math.imul(Ce,Ut)|0,K=K+Math.imul(ze,tr)|0,le=le+Math.imul(ze,Ut)|0,te=te+Math.imul(ht,De)|0,K=K+Math.imul(ht,ke)|0,K=K+Math.imul(Oe,De)|0,le=le+Math.imul(Oe,ke)|0,te=te+Math.imul(Ge,se)|0,K=K+Math.imul(Ge,_e)|0,K=K+Math.imul(et,se)|0,le=le+Math.imul(et,_e)|0,te=te+Math.imul(He,Pe)|0,K=K+Math.imul(He,Fe)|0,K=K+Math.imul(We,Pe)|0,le=le+Math.imul(We,Fe)|0,te=te+Math.imul(Ve,Ye)|0,K=K+Math.imul(Ve,Je)|0,K=K+Math.imul(Ie,Ye)|0,le=le+Math.imul(Ie,Je)|0;var Mt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,te=Math.imul(st,tr),K=Math.imul(st,Ut),K=K+Math.imul(rt,tr)|0,le=Math.imul(rt,Ut),te=te+Math.imul(Ce,De)|0,K=K+Math.imul(Ce,ke)|0,K=K+Math.imul(ze,De)|0,le=le+Math.imul(ze,ke)|0,te=te+Math.imul(ht,se)|0,K=K+Math.imul(ht,_e)|0,K=K+Math.imul(Oe,se)|0,le=le+Math.imul(Oe,_e)|0,te=te+Math.imul(Ge,Pe)|0,K=K+Math.imul(Ge,Fe)|0,K=K+Math.imul(et,Pe)|0,le=le+Math.imul(et,Fe)|0,te=te+Math.imul(He,Ye)|0,K=K+Math.imul(He,Je)|0,K=K+Math.imul(We,Ye)|0,le=le+Math.imul(We,Je)|0;var Dt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,te=Math.imul(st,De),K=Math.imul(st,ke),K=K+Math.imul(rt,De)|0,le=Math.imul(rt,ke),te=te+Math.imul(Ce,se)|0,K=K+Math.imul(Ce,_e)|0,K=K+Math.imul(ze,se)|0,le=le+Math.imul(ze,_e)|0,te=te+Math.imul(ht,Pe)|0,K=K+Math.imul(ht,Fe)|0,K=K+Math.imul(Oe,Pe)|0,le=le+Math.imul(Oe,Fe)|0,te=te+Math.imul(Ge,Ye)|0,K=K+Math.imul(Ge,Je)|0,K=K+Math.imul(et,Ye)|0,le=le+Math.imul(et,Je)|0;var mt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(mt>>>26)|0,mt&=67108863,te=Math.imul(st,se),K=Math.imul(st,_e),K=K+Math.imul(rt,se)|0,le=Math.imul(rt,_e),te=te+Math.imul(Ce,Pe)|0,K=K+Math.imul(Ce,Fe)|0,K=K+Math.imul(ze,Pe)|0,le=le+Math.imul(ze,Fe)|0,te=te+Math.imul(ht,Ye)|0,K=K+Math.imul(ht,Je)|0,K=K+Math.imul(Oe,Ye)|0,le=le+Math.imul(Oe,Je)|0;var gt=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(gt>>>26)|0,gt&=67108863,te=Math.imul(st,Pe),K=Math.imul(st,Fe),K=K+Math.imul(rt,Pe)|0,le=Math.imul(rt,Fe),te=te+Math.imul(Ce,Ye)|0,K=K+Math.imul(Ce,Je)|0,K=K+Math.imul(ze,Ye)|0,le=le+Math.imul(ze,Je)|0;var St=(ne+te|0)+((K&8191)<<13)|0;ne=(le+(K>>>13)|0)+(St>>>26)|0,St&=67108863,te=Math.imul(st,Ye),K=Math.imul(st,Je),K=K+Math.imul(rt,Ye)|0,le=Math.imul(rt,Je);var xt=(ne+te|0)+((K&8191)<<13)|0;return ne=(le+(K>>>13)|0)+(xt>>>26)|0,xt&=67108863,ie[0]=tt,ie[1]=Qe,ie[2]=it,ie[3]=lt,ie[4]=vt,ie[5]=bt,ie[6]=dt,ie[7]=yt,ie[8]=Tt,ie[9]=kt,ie[10]=Pt,ie[11]=It,ie[12]=Ot,ie[13]=Mt,ie[14]=Dt,ie[15]=mt,ie[16]=gt,ie[17]=St,ie[18]=xt,ne!==0&&(ie[19]=ne,ee.length++),ee};Math.imul||(j=L);function q(Y,U,W){W.negative=U.negative^Y.negative,W.length=Y.length+U.length;for(var ee=0,re=0,oe=0;oe<W.length-1;oe++){var ie=re;re=0;for(var ne=ee&67108863,te=Math.min(oe,U.length-1),K=Math.max(0,oe-Y.length+1);K<=te;K++){var le=oe-K,ue=Y.words[le]|0,be=U.words[K]|0,ge=ue*be,ye=ge&67108863;ie=ie+(ge/67108864|0)|0,ye=ye+ne|0,ne=ye&67108863,ie=ie+(ye>>>26)|0,re+=ie>>>26,ie&=67108863}W.words[oe]=ne,ee=ie,ie=re}return ee!==0?W.words[oe]=ee:W.length--,W._strip()}function H(Y,U,W){return q(Y,U,W)}E.prototype.mulTo=function(U,W){var ee,re=this.length+U.length;return this.length===10&&U.length===10?ee=j(this,U,W):re<63?ee=L(this,U,W):re<1024?ee=q(this,U,W):ee=H(this,U,W),ee},E.prototype.mul=function(U){var W=new E(null);return W.words=new Array(this.length+U.length),this.mulTo(U,W)},E.prototype.mulf=function(U){var W=new E(null);return W.words=new Array(this.length+U.length),H(this,U,W)},E.prototype.imul=function(U){return this.clone().mulTo(U,this)},E.prototype.imuln=function(U){var W=U<0;W&&(U=-U),x(typeof U=="number"),x(U<67108864);for(var ee=0,re=0;re<this.length;re++){var oe=(this.words[re]|0)*U,ie=(oe&67108863)+(ee&67108863);ee>>=26,ee+=oe/67108864|0,ee+=ie>>>26,this.words[re]=ie&67108863}return ee!==0&&(this.words[re]=ee,this.length++),W?this.ineg():this},E.prototype.muln=function(U){return this.clone().imuln(U)},E.prototype.sqr=function(){return this.mul(this)},E.prototype.isqr=function(){return this.imul(this.clone())},E.prototype.pow=function(U){var W=M(U);if(W.length===0)return new E(1);for(var ee=this,re=0;re<W.length&&W[re]===0;re++,ee=ee.sqr());if(++re<W.length)for(var oe=ee.sqr();re<W.length;re++,oe=oe.sqr())W[re]!==0&&(ee=ee.mul(oe));return ee},E.prototype.iushln=function(U){x(typeof U=="number"&&U>=0);var W=U%26,ee=(U-W)/26,re=67108863>>>26-W<<26-W,oe;if(W!==0){var ie=0;for(oe=0;oe<this.length;oe++){var ne=this.words[oe]&re,te=(this.words[oe]|0)-ne<<W;this.words[oe]=te|ie,ie=ne>>>26-W}ie&&(this.words[oe]=ie,this.length++)}if(ee!==0){for(oe=this.length-1;oe>=0;oe--)this.words[oe+ee]=this.words[oe];for(oe=0;oe<ee;oe++)this.words[oe]=0;this.length+=ee}return this._strip()},E.prototype.ishln=function(U){return x(this.negative===0),this.iushln(U)},E.prototype.iushrn=function(U,W,ee){x(typeof U=="number"&&U>=0);var re;W?re=(W-W%26)/26:re=0;var oe=U%26,ie=Math.min((U-oe)/26,this.length),ne=67108863^67108863>>>oe<<oe,te=ee;if(re-=ie,re=Math.max(0,re),te){for(var K=0;K<ie;K++)te.words[K]=this.words[K];te.length=ie}if(ie!==0)if(this.length>ie)for(this.length-=ie,K=0;K<this.length;K++)this.words[K]=this.words[K+ie];else this.words[0]=0,this.length=1;var le=0;for(K=this.length-1;K>=0&&(le!==0||K>=re);K--){var ue=this.words[K]|0;this.words[K]=le<<26-oe|ue>>>oe,le=ue&ne}return te&&le!==0&&(te.words[te.length++]=le),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},E.prototype.ishrn=function(U,W,ee){return x(this.negative===0),this.iushrn(U,W,ee)},E.prototype.shln=function(U){return this.clone().ishln(U)},E.prototype.ushln=function(U){return this.clone().iushln(U)},E.prototype.shrn=function(U){return this.clone().ishrn(U)},E.prototype.ushrn=function(U){return this.clone().iushrn(U)},E.prototype.testn=function(U){x(typeof U=="number"&&U>=0);var W=U%26,ee=(U-W)/26,re=1<<W;if(this.length<=ee)return!1;var oe=this.words[ee];return!!(oe&re)},E.prototype.imaskn=function(U){x(typeof U=="number"&&U>=0);var W=U%26,ee=(U-W)/26;if(x(this.negative===0,"imaskn works only with positive numbers"),this.length<=ee)return this;if(W!==0&&ee++,this.length=Math.min(ee,this.length),W!==0){var re=67108863^67108863>>>W<<W;this.words[this.length-1]&=re}return this._strip()},E.prototype.maskn=function(U){return this.clone().imaskn(U)},E.prototype.iaddn=function(U){return x(typeof U=="number"),x(U<67108864),U<0?this.isubn(-U):this.negative!==0?this.length===1&&(this.words[0]|0)<=U?(this.words[0]=U-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(U),this.negative=1,this):this._iaddn(U)},E.prototype._iaddn=function(U){this.words[0]+=U;for(var W=0;W<this.length&&this.words[W]>=67108864;W++)this.words[W]-=67108864,W===this.length-1?this.words[W+1]=1:this.words[W+1]++;return this.length=Math.max(this.length,W+1),this},E.prototype.isubn=function(U){if(x(typeof U=="number"),x(U<67108864),U<0)return this.iaddn(-U);if(this.negative!==0)return this.negative=0,this.iaddn(U),this.negative=1,this;if(this.words[0]-=U,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var W=0;W<this.length&&this.words[W]<0;W++)this.words[W]+=67108864,this.words[W+1]-=1;return this._strip()},E.prototype.addn=function(U){return this.clone().iaddn(U)},E.prototype.subn=function(U){return this.clone().isubn(U)},E.prototype.iabs=function(){return this.negative=0,this},E.prototype.abs=function(){return this.clone().iabs()},E.prototype._ishlnsubmul=function(U,W,ee){var re=U.length+ee,oe;this._expand(re);var ie,ne=0;for(oe=0;oe<U.length;oe++){ie=(this.words[oe+ee]|0)+ne;var te=(U.words[oe]|0)*W;ie-=te&67108863,ne=(ie>>26)-(te/67108864|0),this.words[oe+ee]=ie&67108863}for(;oe<this.length-ee;oe++)ie=(this.words[oe+ee]|0)+ne,ne=ie>>26,this.words[oe+ee]=ie&67108863;if(ne===0)return this._strip();for(x(ne===-1),ne=0,oe=0;oe<this.length;oe++)ie=-(this.words[oe]|0)+ne,ne=ie>>26,this.words[oe]=ie&67108863;return this.negative=1,this._strip()},E.prototype._wordDiv=function(U,W){var ee=this.length-U.length,re=this.clone(),oe=U,ie=oe.words[oe.length-1]|0,ne=this._countBits(ie);ee=26-ne,ee!==0&&(oe=oe.ushln(ee),re.iushln(ee),ie=oe.words[oe.length-1]|0);var te=re.length-oe.length,K;if(W!=="mod"){K=new E(null),K.length=te+1,K.words=new Array(K.length);for(var le=0;le<K.length;le++)K.words[le]=0}var ue=re.clone()._ishlnsubmul(oe,1,te);ue.negative===0&&(re=ue,K&&(K.words[te]=1));for(var be=te-1;be>=0;be--){var ge=(re.words[oe.length+be]|0)*67108864+(re.words[oe.length+be-1]|0);for(ge=Math.min(ge/ie|0,67108863),re._ishlnsubmul(oe,ge,be);re.negative!==0;)ge--,re.negative=0,re._ishlnsubmul(oe,1,be),re.isZero()||(re.negative^=1);K&&(K.words[be]=ge)}return K&&K._strip(),re._strip(),W!=="div"&&ee!==0&&re.iushrn(ee),{div:K||null,mod:re}},E.prototype.divmod=function(U,W,ee){if(x(!U.isZero()),this.isZero())return{div:new E(0),mod:new E(0)};var re,oe,ie;return this.negative!==0&&U.negative===0?(ie=this.neg().divmod(U,W),W!=="mod"&&(re=ie.div.neg()),W!=="div"&&(oe=ie.mod.neg(),ee&&oe.negative!==0&&oe.iadd(U)),{div:re,mod:oe}):this.negative===0&&U.negative!==0?(ie=this.divmod(U.neg(),W),W!=="mod"&&(re=ie.div.neg()),{div:re,mod:ie.mod}):this.negative&U.negative?(ie=this.neg().divmod(U.neg(),W),W!=="div"&&(oe=ie.mod.neg(),ee&&oe.negative!==0&&oe.isub(U)),{div:ie.div,mod:oe}):U.length>this.length||this.cmp(U)<0?{div:new E(0),mod:this}:U.length===1?W==="div"?{div:this.divn(U.words[0]),mod:null}:W==="mod"?{div:null,mod:new E(this.modrn(U.words[0]))}:{div:this.divn(U.words[0]),mod:new E(this.modrn(U.words[0]))}:this._wordDiv(U,W)},E.prototype.div=function(U){return this.divmod(U,"div",!1).div},E.prototype.mod=function(U){return this.divmod(U,"mod",!1).mod},E.prototype.umod=function(U){return this.divmod(U,"mod",!0).mod},E.prototype.divRound=function(U){var W=this.divmod(U);if(W.mod.isZero())return W.div;var ee=W.div.negative!==0?W.mod.isub(U):W.mod,re=U.ushrn(1),oe=U.andln(1),ie=ee.cmp(re);return ie<0||oe===1&&ie===0?W.div:W.div.negative!==0?W.div.isubn(1):W.div.iaddn(1)},E.prototype.modrn=function(U){var W=U<0;W&&(U=-U),x(U<=67108863);for(var ee=(1<<26)%U,re=0,oe=this.length-1;oe>=0;oe--)re=(ee*re+(this.words[oe]|0))%U;return W?-re:re},E.prototype.modn=function(U){return this.modrn(U)},E.prototype.idivn=function(U){var W=U<0;W&&(U=-U),x(U<=67108863);for(var ee=0,re=this.length-1;re>=0;re--){var oe=(this.words[re]|0)+ee*67108864;this.words[re]=oe/U|0,ee=oe%U}return this._strip(),W?this.ineg():this},E.prototype.divn=function(U){return this.clone().idivn(U)},E.prototype.egcd=function(U){x(U.negative===0),x(!U.isZero());var W=this,ee=U.clone();W.negative!==0?W=W.umod(U):W=W.clone();for(var re=new E(1),oe=new E(0),ie=new E(0),ne=new E(1),te=0;W.isEven()&&ee.isEven();)W.iushrn(1),ee.iushrn(1),++te;for(var K=ee.clone(),le=W.clone();!W.isZero();){for(var ue=0,be=1;!(W.words[0]&be)&&ue<26;++ue,be<<=1);if(ue>0)for(W.iushrn(ue);ue-- >0;)(re.isOdd()||oe.isOdd())&&(re.iadd(K),oe.isub(le)),re.iushrn(1),oe.iushrn(1);for(var ge=0,ye=1;!(ee.words[0]&ye)&&ge<26;++ge,ye<<=1);if(ge>0)for(ee.iushrn(ge);ge-- >0;)(ie.isOdd()||ne.isOdd())&&(ie.iadd(K),ne.isub(le)),ie.iushrn(1),ne.iushrn(1);W.cmp(ee)>=0?(W.isub(ee),re.isub(ie),oe.isub(ne)):(ee.isub(W),ie.isub(re),ne.isub(oe))}return{a:ie,b:ne,gcd:ee.iushln(te)}},E.prototype._invmp=function(U){x(U.negative===0),x(!U.isZero());var W=this,ee=U.clone();W.negative!==0?W=W.umod(U):W=W.clone();for(var re=new E(1),oe=new E(0),ie=ee.clone();W.cmpn(1)>0&&ee.cmpn(1)>0;){for(var ne=0,te=1;!(W.words[0]&te)&&ne<26;++ne,te<<=1);if(ne>0)for(W.iushrn(ne);ne-- >0;)re.isOdd()&&re.iadd(ie),re.iushrn(1);for(var K=0,le=1;!(ee.words[0]&le)&&K<26;++K,le<<=1);if(K>0)for(ee.iushrn(K);K-- >0;)oe.isOdd()&&oe.iadd(ie),oe.iushrn(1);W.cmp(ee)>=0?(W.isub(ee),re.isub(oe)):(ee.isub(W),oe.isub(re))}var ue;return W.cmpn(1)===0?ue=re:ue=oe,ue.cmpn(0)<0&&ue.iadd(U),ue},E.prototype.gcd=function(U){if(this.isZero())return U.abs();if(U.isZero())return this.abs();var W=this.clone(),ee=U.clone();W.negative=0,ee.negative=0;for(var re=0;W.isEven()&&ee.isEven();re++)W.iushrn(1),ee.iushrn(1);do{for(;W.isEven();)W.iushrn(1);for(;ee.isEven();)ee.iushrn(1);var oe=W.cmp(ee);if(oe<0){var ie=W;W=ee,ee=ie}else if(oe===0||ee.cmpn(1)===0)break;W.isub(ee)}while(!0);return ee.iushln(re)},E.prototype.invm=function(U){return this.egcd(U).a.umod(U)},E.prototype.isEven=function(){return(this.words[0]&1)===0},E.prototype.isOdd=function(){return(this.words[0]&1)===1},E.prototype.andln=function(U){return this.words[0]&U},E.prototype.bincn=function(U){x(typeof U=="number");var W=U%26,ee=(U-W)/26,re=1<<W;if(this.length<=ee)return this._expand(ee+1),this.words[ee]|=re,this;for(var oe=re,ie=ee;oe!==0&&ie<this.length;ie++){var ne=this.words[ie]|0;ne+=oe,oe=ne>>>26,ne&=67108863,this.words[ie]=ne}return oe!==0&&(this.words[ie]=oe,this.length++),this},E.prototype.isZero=function(){return this.length===1&&this.words[0]===0},E.prototype.cmpn=function(U){var W=U<0;if(this.negative!==0&&!W)return-1;if(this.negative===0&&W)return 1;this._strip();var ee;if(this.length>1)ee=1;else{W&&(U=-U),x(U<=67108863,"Number is too big");var re=this.words[0]|0;ee=re===U?0:re<U?-1:1}return this.negative!==0?-ee|0:ee},E.prototype.cmp=function(U){if(this.negative!==0&&U.negative===0)return-1;if(this.negative===0&&U.negative!==0)return 1;var W=this.ucmp(U);return this.negative!==0?-W|0:W},E.prototype.ucmp=function(U){if(this.length>U.length)return 1;if(this.length<U.length)return-1;for(var W=0,ee=this.length-1;ee>=0;ee--){var re=this.words[ee]|0,oe=U.words[ee]|0;if(re!==oe){re<oe?W=-1:re>oe&&(W=1);break}}return W},E.prototype.gtn=function(U){return this.cmpn(U)===1},E.prototype.gt=function(U){return this.cmp(U)===1},E.prototype.gten=function(U){return this.cmpn(U)>=0},E.prototype.gte=function(U){return this.cmp(U)>=0},E.prototype.ltn=function(U){return this.cmpn(U)===-1},E.prototype.lt=function(U){return this.cmp(U)===-1},E.prototype.lten=function(U){return this.cmpn(U)<=0},E.prototype.lte=function(U){return this.cmp(U)<=0},E.prototype.eqn=function(U){return this.cmpn(U)===0},E.prototype.eq=function(U){return this.cmp(U)===0},E.red=function(U){return new pe(U)},E.prototype.toRed=function(U){return x(!this.red,"Already a number in reduction context"),x(this.negative===0,"red works only with positives"),U.convertTo(this)._forceRed(U)},E.prototype.fromRed=function(){return x(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},E.prototype._forceRed=function(U){return this.red=U,this},E.prototype.forceRed=function(U){return x(!this.red,"Already a number in reduction context"),this._forceRed(U)},E.prototype.redAdd=function(U){return x(this.red,"redAdd works only with red numbers"),this.red.add(this,U)},E.prototype.redIAdd=function(U){return x(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,U)},E.prototype.redSub=function(U){return x(this.red,"redSub works only with red numbers"),this.red.sub(this,U)},E.prototype.redISub=function(U){return x(this.red,"redISub works only with red numbers"),this.red.isub(this,U)},E.prototype.redShl=function(U){return x(this.red,"redShl works only with red numbers"),this.red.shl(this,U)},E.prototype.redMul=function(U){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,U),this.red.mul(this,U)},E.prototype.redIMul=function(U){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,U),this.red.imul(this,U)},E.prototype.redSqr=function(){return x(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},E.prototype.redISqr=function(){return x(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},E.prototype.redSqrt=function(){return x(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},E.prototype.redInvm=function(){return x(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},E.prototype.redNeg=function(){return x(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},E.prototype.redPow=function(U){return x(this.red&&!U.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,U)};var X={k256:null,p224:null,p192:null,p25519:null};function J(Y,U){this.name=Y,this.p=new E(U,16),this.n=this.p.bitLength(),this.k=new E(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}J.prototype._tmp=function(){var U=new E(null);return U.words=new Array(Math.ceil(this.n/13)),U},J.prototype.ireduce=function(U){var W=U,ee;do this.split(W,this.tmp),W=this.imulK(W),W=W.iadd(this.tmp),ee=W.bitLength();while(ee>this.n);var re=ee<this.n?-1:W.ucmp(this.p);return re===0?(W.words[0]=0,W.length=1):re>0?W.isub(this.p):W.strip!==void 0?W.strip():W._strip(),W},J.prototype.split=function(U,W){U.iushrn(this.n,0,W)},J.prototype.imulK=function(U){return U.imul(this.k)};function Z(){J.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}S(Z,J),Z.prototype.split=function(U,W){for(var ee=4194303,re=Math.min(U.length,9),oe=0;oe<re;oe++)W.words[oe]=U.words[oe];if(W.length=re,U.length<=9){U.words[0]=0,U.length=1;return}var ie=U.words[9];for(W.words[W.length++]=ie&ee,oe=10;oe<U.length;oe++){var ne=U.words[oe]|0;U.words[oe-10]=(ne&ee)<<4|ie>>>22,ie=ne}ie>>>=22,U.words[oe-10]=ie,ie===0&&U.length>10?U.length-=10:U.length-=9},Z.prototype.imulK=function(U){U.words[U.length]=0,U.words[U.length+1]=0,U.length+=2;for(var W=0,ee=0;ee<U.length;ee++){var re=U.words[ee]|0;W+=re*977,U.words[ee]=W&67108863,W=re*64+(W/67108864|0)}return U.words[U.length-1]===0&&(U.length--,U.words[U.length-1]===0&&U.length--),U};function ae(){J.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}S(ae,J);function ce(){J.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}S(ce,J);function ve(){J.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}S(ve,J),ve.prototype.imulK=function(U){for(var W=0,ee=0;ee<U.length;ee++){var re=(U.words[ee]|0)*19+W,oe=re&67108863;re>>>=26,U.words[ee]=oe,W=re}return W!==0&&(U.words[U.length++]=W),U},E._prime=function(U){if(X[U])return X[U];var W;if(U==="k256")W=new Z;else if(U==="p224")W=new ae;else if(U==="p192")W=new ce;else if(U==="p25519")W=new ve;else throw new Error("Unknown prime "+U);return X[U]=W,W};function pe(Y){if(typeof Y=="string"){var U=E._prime(Y);this.m=U.p,this.prime=U}else x(Y.gtn(1),"modulus must be greater than 1"),this.m=Y,this.prime=null}pe.prototype._verify1=function(U){x(U.negative===0,"red works only with positives"),x(U.red,"red works only with red numbers")},pe.prototype._verify2=function(U,W){x((U.negative|W.negative)===0,"red works only with positives"),x(U.red&&U.red===W.red,"red works only with red numbers")},pe.prototype.imod=function(U){return this.prime?this.prime.ireduce(U)._forceRed(this):(I(U,U.umod(this.m)._forceRed(this)),U)},pe.prototype.neg=function(U){return U.isZero()?U.clone():this.m.sub(U)._forceRed(this)},pe.prototype.add=function(U,W){this._verify2(U,W);var ee=U.add(W);return ee.cmp(this.m)>=0&&ee.isub(this.m),ee._forceRed(this)},pe.prototype.iadd=function(U,W){this._verify2(U,W);var ee=U.iadd(W);return ee.cmp(this.m)>=0&&ee.isub(this.m),ee},pe.prototype.sub=function(U,W){this._verify2(U,W);var ee=U.sub(W);return ee.cmpn(0)<0&&ee.iadd(this.m),ee._forceRed(this)},pe.prototype.isub=function(U,W){this._verify2(U,W);var ee=U.isub(W);return ee.cmpn(0)<0&&ee.iadd(this.m),ee},pe.prototype.shl=function(U,W){return this._verify1(U),this.imod(U.ushln(W))},pe.prototype.imul=function(U,W){return this._verify2(U,W),this.imod(U.imul(W))},pe.prototype.mul=function(U,W){return this._verify2(U,W),this.imod(U.mul(W))},pe.prototype.isqr=function(U){return this.imul(U,U.clone())},pe.prototype.sqr=function(U){return this.mul(U,U)},pe.prototype.sqrt=function(U){if(U.isZero())return U.clone();var W=this.m.andln(3);if(x(W%2===1),W===3){var ee=this.m.add(new E(1)).iushrn(2);return this.pow(U,ee)}for(var re=this.m.subn(1),oe=0;!re.isZero()&&re.andln(1)===0;)oe++,re.iushrn(1);x(!re.isZero());var ie=new E(1).toRed(this),ne=ie.redNeg(),te=this.m.subn(1).iushrn(1),K=this.m.bitLength();for(K=new E(2*K*K).toRed(this);this.pow(K,te).cmp(ne)!==0;)K.redIAdd(ne);for(var le=this.pow(K,re),ue=this.pow(U,re.addn(1).iushrn(1)),be=this.pow(U,re),ge=oe;be.cmp(ie)!==0;){for(var ye=be,Ee=0;ye.cmp(ie)!==0;Ee++)ye=ye.redSqr();x(Ee<ge);var Re=this.pow(le,new E(1).iushln(ge-Ee-1));ue=ue.redMul(Re),le=Re.redSqr(),be=be.redMul(le),ge=Ee}return ue},pe.prototype.invm=function(U){var W=U._invmp(this.m);return W.negative!==0?(W.negative=0,this.imod(W).redNeg()):this.imod(W)},pe.prototype.pow=function(U,W){if(W.isZero())return new E(1).toRed(this);if(W.cmpn(1)===0)return U.clone();var ee=4,re=new Array(1<<ee);re[0]=new E(1).toRed(this),re[1]=U;for(var oe=2;oe<re.length;oe++)re[oe]=this.mul(re[oe-1],U);var ie=re[0],ne=0,te=0,K=W.bitLength()%26;for(K===0&&(K=26),oe=W.length-1;oe>=0;oe--){for(var le=W.words[oe],ue=K-1;ue>=0;ue--){var be=le>>ue&1;if(ie!==re[0]&&(ie=this.sqr(ie)),be===0&&ne===0){te=0;continue}ne<<=1,ne|=be,te++,!(te!==ee&&(oe!==0||ue!==0))&&(ie=this.mul(ie,re[ne]),te=0,ne=0)}K=26}return ie},pe.prototype.convertTo=function(U){var W=U.umod(this.m);return W===U?W.clone():W},pe.prototype.convertFrom=function(U){var W=U.clone();return W.red=null,W},E.mont=function(U){return new G(U)};function G(Y){pe.call(this,Y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new E(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S(G,pe),G.prototype.convertTo=function(U){return this.imod(U.ushln(this.shift))},G.prototype.convertFrom=function(U){var W=this.imod(U.mul(this.rinv));return W.red=null,W},G.prototype.imul=function(U,W){if(U.isZero()||W.isZero())return U.words[0]=0,U.length=1,U;var ee=U.imul(W),re=ee.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=ee.isub(re).iushrn(this.shift),ie=oe;return oe.cmp(this.m)>=0?ie=oe.isub(this.m):oe.cmpn(0)<0&&(ie=oe.iadd(this.m)),ie._forceRed(this)},G.prototype.mul=function(U,W){if(U.isZero()||W.isZero())return new E(0)._forceRed(this);var ee=U.mul(W),re=ee.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),oe=ee.isub(re).iushrn(this.shift),ie=oe;return oe.cmp(this.m)>=0?ie=oe.isub(this.m):oe.cmpn(0)<0&&(ie=oe.iadd(this.m)),ie._forceRed(this)},G.prototype.invm=function(U){var W=this.imod(U._invmp(this.m).mul(this.r2));return W._forceRed(this)}})(r,commonjsGlobal)}(bn)),bn.exports}var asn1$3={},asn1$2={},api={},encoders={},safer_1,hasRequiredSafer;function requireSafer(){if(hasRequiredSafer)return safer_1;hasRequiredSafer=1;var r=buffer$3,n=r.Buffer,_={},x;for(x in r)r.hasOwnProperty(x)&&(x==="SlowBuffer"||x==="Buffer"||(_[x]=r[x]));var S=_.Buffer={};for(x in n)n.hasOwnProperty(x)&&(x==="allocUnsafe"||x==="allocUnsafeSlow"||(S[x]=n[x]));if(_.Buffer.prototype=n.prototype,(!S.from||S.from===Uint8Array.from)&&(S.from=function(E,C,T){if(typeof E=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof E);if(E&&typeof E.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E);return n(E,C,T)}),S.alloc||(S.alloc=function(E,C,T){if(typeof E!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof E);if(E<0||E>=2*(1<<30))throw new RangeError('The value "'+E+'" is invalid for option "size"');var B=n(E);return!C||C.length===0?B.fill(0):typeof T=="string"?B.fill(C,T):B.fill(C),B}),!_.kStringMaxLength)try{_.kStringMaxLength=browser$1$1.binding("buffer").kStringMaxLength}catch{}return _.constants||(_.constants={MAX_LENGTH:_.kMaxLength},_.kStringMaxLength&&(_.constants.MAX_STRING_LENGTH=_.kStringMaxLength)),safer_1=_,safer_1}var reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;const r=inherits_browserExports;function n(x){this._reporterState={obj:null,path:[],options:x||{},errors:[]}}reporter.Reporter=n,n.prototype.isError=function(S){return S instanceof _},n.prototype.save=function(){const S=this._reporterState;return{obj:S.obj,pathLen:S.path.length}},n.prototype.restore=function(S){const E=this._reporterState;E.obj=S.obj,E.path=E.path.slice(0,S.pathLen)},n.prototype.enterKey=function(S){return this._reporterState.path.push(S)},n.prototype.exitKey=function(S){const E=this._reporterState;E.path=E.path.slice(0,S-1)},n.prototype.leaveKey=function(S,E,C){const T=this._reporterState;this.exitKey(S),T.obj!==null&&(T.obj[E]=C)},n.prototype.path=function(){return this._reporterState.path.join("/")},n.prototype.enterObject=function(){const S=this._reporterState,E=S.obj;return S.obj={},E},n.prototype.leaveObject=function(S){const E=this._reporterState,C=E.obj;return E.obj=S,C},n.prototype.error=function(S){let E;const C=this._reporterState,T=S instanceof _;if(T?E=S:E=new _(C.path.map(function(B){return"["+JSON.stringify(B)+"]"}).join(""),S.message||S,S.stack),!C.options.partial)throw E;return T||C.errors.push(E),E},n.prototype.wrapResult=function(S){const E=this._reporterState;return E.options.partial?{result:this.isError(S)?null:S,errors:E.errors}:S};function _(x,S){this.path=x,this.rethrow(S)}return r(_,Error),_.prototype.rethrow=function(S){if(this.message=S+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,_),!this.stack)try{throw new Error(this.message)}catch(E){this.stack=E.stack}return this},reporter}var buffer$1={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer$1;hasRequiredBuffer=1;const r=inherits_browserExports,n=requireReporter().Reporter,_=requireSafer().Buffer;function x(E,C){if(n.call(this,C),!_.isBuffer(E)){this.error("Input not Buffer");return}this.base=E,this.offset=0,this.length=E.length}r(x,n),buffer$1.DecoderBuffer=x,x.isDecoderBuffer=function(C){return C instanceof x?!0:typeof C=="object"&&_.isBuffer(C.base)&&C.constructor.name==="DecoderBuffer"&&typeof C.offset=="number"&&typeof C.length=="number"&&typeof C.save=="function"&&typeof C.restore=="function"&&typeof C.isEmpty=="function"&&typeof C.readUInt8=="function"&&typeof C.skip=="function"&&typeof C.raw=="function"},x.prototype.save=function(){return{offset:this.offset,reporter:n.prototype.save.call(this)}},x.prototype.restore=function(C){const T=new x(this.base);return T.offset=C.offset,T.length=this.offset,this.offset=C.offset,n.prototype.restore.call(this,C.reporter),T},x.prototype.isEmpty=function(){return this.offset===this.length},x.prototype.readUInt8=function(C){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(C||"DecoderBuffer overrun")},x.prototype.skip=function(C,T){if(!(this.offset+C<=this.length))return this.error(T||"DecoderBuffer overrun");const B=new x(this.base);return B._reporterState=this._reporterState,B.offset=this.offset,B.length=this.offset+C,this.offset+=C,B},x.prototype.raw=function(C){return this.base.slice(C?C.offset:this.offset,this.length)};function S(E,C){if(Array.isArray(E))this.length=0,this.value=E.map(function(T){return S.isEncoderBuffer(T)||(T=new S(T,C)),this.length+=T.length,T},this);else if(typeof E=="number"){if(!(0<=E&&E<=255))return C.error("non-byte EncoderBuffer value");this.value=E,this.length=1}else if(typeof E=="string")this.value=E,this.length=_.byteLength(E);else if(_.isBuffer(E))this.value=E,this.length=E.length;else return C.error("Unsupported type: "+typeof E)}return buffer$1.EncoderBuffer=S,S.isEncoderBuffer=function(C){return C instanceof S?!0:typeof C=="object"&&C.constructor.name==="EncoderBuffer"&&typeof C.length=="number"&&typeof C.join=="function"},S.prototype.join=function(C,T){return C||(C=_.alloc(this.length)),T||(T=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(B){B.join(C,T),T+=B.length}):(typeof this.value=="number"?C[T]=this.value:typeof this.value=="string"?C.write(this.value,T):_.isBuffer(this.value)&&this.value.copy(C,T),T+=this.length)),C},buffer$1}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;const r=requireReporter().Reporter,n=requireBuffer().EncoderBuffer,_=requireBuffer().DecoderBuffer,x=requireMinimalisticAssert(),S=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],E=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(S),C=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function T(A,I,N){const V={};this._baseState=V,V.name=N,V.enc=A,V.parent=I||null,V.children=null,V.tag=null,V.args=null,V.reverseArgs=null,V.choice=null,V.optional=!1,V.any=!1,V.obj=!1,V.use=null,V.useDecoder=null,V.key=null,V.default=null,V.explicit=null,V.implicit=null,V.contains=null,V.parent||(V.children=[],this._wrap())}node=T;const B=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return T.prototype.clone=function(){const I=this._baseState,N={};B.forEach(function(D){N[D]=I[D]});const V=new this.constructor(N.parent);return V._baseState=N,V},T.prototype._wrap=function(){const I=this._baseState;E.forEach(function(N){this[N]=function(){const D=new this.constructor(this);return I.children.push(D),D[N].apply(D,arguments)}},this)},T.prototype._init=function(I){const N=this._baseState;x(N.parent===null),I.call(this),N.children=N.children.filter(function(V){return V._baseState.parent===this},this),x.equal(N.children.length,1,"Root node can have only one child")},T.prototype._useArgs=function(I){const N=this._baseState,V=I.filter(function(D){return D instanceof this.constructor},this);I=I.filter(function(D){return!(D instanceof this.constructor)},this),V.length!==0&&(x(N.children===null),N.children=V,V.forEach(function(D){D._baseState.parent=this},this)),I.length!==0&&(x(N.args===null),N.args=I,N.reverseArgs=I.map(function(D){if(typeof D!="object"||D.constructor!==Object)return D;const O={};return Object.keys(D).forEach(function(F){F==(F|0)&&(F|=0);const M=D[F];O[M]=F}),O}))},C.forEach(function(A){T.prototype[A]=function(){const N=this._baseState;throw new Error(A+" not implemented for encoding: "+N.enc)}}),S.forEach(function(A){T.prototype[A]=function(){const N=this._baseState,V=Array.prototype.slice.call(arguments);return x(N.tag===null),N.tag=A,this._useArgs(V),this}}),T.prototype.use=function(I){x(I);const N=this._baseState;return x(N.use===null),N.use=I,this},T.prototype.optional=function(){const I=this._baseState;return I.optional=!0,this},T.prototype.def=function(I){const N=this._baseState;return x(N.default===null),N.default=I,N.optional=!0,this},T.prototype.explicit=function(I){const N=this._baseState;return x(N.explicit===null&&N.implicit===null),N.explicit=I,this},T.prototype.implicit=function(I){const N=this._baseState;return x(N.explicit===null&&N.implicit===null),N.implicit=I,this},T.prototype.obj=function(){const I=this._baseState,N=Array.prototype.slice.call(arguments);return I.obj=!0,N.length!==0&&this._useArgs(N),this},T.prototype.key=function(I){const N=this._baseState;return x(N.key===null),N.key=I,this},T.prototype.any=function(){const I=this._baseState;return I.any=!0,this},T.prototype.choice=function(I){const N=this._baseState;return x(N.choice===null),N.choice=I,this._useArgs(Object.keys(I).map(function(V){return I[V]})),this},T.prototype.contains=function(I){const N=this._baseState;return x(N.use===null),N.contains=I,this},T.prototype._decode=function(I,N){const V=this._baseState;if(V.parent===null)return I.wrapResult(V.children[0]._decode(I,N));let D=V.default,O=!0,F=null;if(V.key!==null&&(F=I.enterKey(V.key)),V.optional){let L=null;if(V.explicit!==null?L=V.explicit:V.implicit!==null?L=V.implicit:V.tag!==null&&(L=V.tag),L===null&&!V.any){const j=I.save();try{V.choice===null?this._decodeGeneric(V.tag,I,N):this._decodeChoice(I,N),O=!0}catch{O=!1}I.restore(j)}else if(O=this._peekTag(I,L,V.any),I.isError(O))return O}let M;if(V.obj&&O&&(M=I.enterObject()),O){if(V.explicit!==null){const j=this._decodeTag(I,V.explicit);if(I.isError(j))return j;I=j}const L=I.offset;if(V.use===null&&V.choice===null){let j;V.any&&(j=I.save());const q=this._decodeTag(I,V.implicit!==null?V.implicit:V.tag,V.any);if(I.isError(q))return q;V.any?D=I.raw(j):I=q}if(N&&N.track&&V.tag!==null&&N.track(I.path(),L,I.length,"tagged"),N&&N.track&&V.tag!==null&&N.track(I.path(),I.offset,I.length,"content"),V.any||(V.choice===null?D=this._decodeGeneric(V.tag,I,N):D=this._decodeChoice(I,N)),I.isError(D))return D;if(!V.any&&V.choice===null&&V.children!==null&&V.children.forEach(function(q){q._decode(I,N)}),V.contains&&(V.tag==="octstr"||V.tag==="bitstr")){const j=new _(D);D=this._getUse(V.contains,I._reporterState.obj)._decode(j,N)}}return V.obj&&O&&(D=I.leaveObject(M)),V.key!==null&&(D!==null||O===!0)?I.leaveKey(F,V.key,D):F!==null&&I.exitKey(F),D},T.prototype._decodeGeneric=function(I,N,V){const D=this._baseState;return I==="seq"||I==="set"?null:I==="seqof"||I==="setof"?this._decodeList(N,I,D.args[0],V):/str$/.test(I)?this._decodeStr(N,I,V):I==="objid"&&D.args?this._decodeObjid(N,D.args[0],D.args[1],V):I==="objid"?this._decodeObjid(N,null,null,V):I==="gentime"||I==="utctime"?this._decodeTime(N,I,V):I==="null_"?this._decodeNull(N,V):I==="bool"?this._decodeBool(N,V):I==="objDesc"?this._decodeStr(N,I,V):I==="int"||I==="enum"?this._decodeInt(N,D.args&&D.args[0],V):D.use!==null?this._getUse(D.use,N._reporterState.obj)._decode(N,V):N.error("unknown tag: "+I)},T.prototype._getUse=function(I,N){const V=this._baseState;return V.useDecoder=this._use(I,N),x(V.useDecoder._baseState.parent===null),V.useDecoder=V.useDecoder._baseState.children[0],V.implicit!==V.useDecoder._baseState.implicit&&(V.useDecoder=V.useDecoder.clone(),V.useDecoder._baseState.implicit=V.implicit),V.useDecoder},T.prototype._decodeChoice=function(I,N){const V=this._baseState;let D=null,O=!1;return Object.keys(V.choice).some(function(F){const M=I.save(),L=V.choice[F];try{const j=L._decode(I,N);if(I.isError(j))return!1;D={type:F,value:j},O=!0}catch{return I.restore(M),!1}return!0},this),O?D:I.error("Choice not matched")},T.prototype._createEncoderBuffer=function(I){return new n(I,this.reporter)},T.prototype._encode=function(I,N,V){const D=this._baseState;if(D.default!==null&&D.default===I)return;const O=this._encodeValue(I,N,V);if(O!==void 0&&!this._skipDefault(O,N,V))return O},T.prototype._encodeValue=function(I,N,V){const D=this._baseState;if(D.parent===null)return D.children[0]._encode(I,N||new r);let O=null;if(this.reporter=N,D.optional&&I===void 0)if(D.default!==null)I=D.default;else return;let F=null,M=!1;if(D.any)O=this._createEncoderBuffer(I);else if(D.choice)O=this._encodeChoice(I,N);else if(D.contains)F=this._getUse(D.contains,V)._encode(I,N),M=!0;else if(D.children)F=D.children.map(function(L){if(L._baseState.tag==="null_")return L._encode(null,N,I);if(L._baseState.key===null)return N.error("Child should have a key");const j=N.enterKey(L._baseState.key);if(typeof I!="object")return N.error("Child expected, but input is not object");const q=L._encode(I[L._baseState.key],N,I);return N.leaveKey(j),q},this).filter(function(L){return L}),F=this._createEncoderBuffer(F);else if(D.tag==="seqof"||D.tag==="setof"){if(!(D.args&&D.args.length===1))return N.error("Too many args for : "+D.tag);if(!Array.isArray(I))return N.error("seqof/setof, but data is not Array");const L=this.clone();L._baseState.implicit=null,F=this._createEncoderBuffer(I.map(function(j){const q=this._baseState;return this._getUse(q.args[0],I)._encode(j,N)},L))}else D.use!==null?O=this._getUse(D.use,V)._encode(I,N):(F=this._encodePrimitive(D.tag,I),M=!0);if(!D.any&&D.choice===null){const L=D.implicit!==null?D.implicit:D.tag,j=D.implicit===null?"universal":"context";L===null?D.use===null&&N.error("Tag could be omitted only for .use()"):D.use===null&&(O=this._encodeComposite(L,M,j,F))}return D.explicit!==null&&(O=this._encodeComposite(D.explicit,!1,"context",O)),O},T.prototype._encodeChoice=function(I,N){const V=this._baseState,D=V.choice[I.type];return D||x(!1,I.type+" not found in "+JSON.stringify(Object.keys(V.choice))),D._encode(I.value,N)},T.prototype._encodePrimitive=function(I,N){const V=this._baseState;if(/str$/.test(I))return this._encodeStr(N,I);if(I==="objid"&&V.args)return this._encodeObjid(N,V.reverseArgs[0],V.args[1]);if(I==="objid")return this._encodeObjid(N,null,null);if(I==="gentime"||I==="utctime")return this._encodeTime(N,I);if(I==="null_")return this._encodeNull();if(I==="int"||I==="enum")return this._encodeInt(N,V.args&&V.reverseArgs[0]);if(I==="bool")return this._encodeBool(N);if(I==="objDesc")return this._encodeStr(N,I);throw new Error("Unsupported tag: "+I)},T.prototype._isNumstr=function(I){return/^[0-9 ]*$/.test(I)},T.prototype._isPrintstr=function(I){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(I)},node}var der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(r){function n(_){const x={};return Object.keys(_).forEach(function(S){(S|0)==S&&(S=S|0);const E=_[S];x[E]=S}),x}r.tagClass={0:"universal",1:"application",2:"context",3:"private"},r.tagClassByName=n(r.tagClass),r.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},r.tagByName=n(r.tag)}(der)),der}var der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;const r=inherits_browserExports,n=requireSafer().Buffer,_=requireNode(),x=requireDer$2();function S(B){this.enc="der",this.name=B.name,this.entity=B,this.tree=new E,this.tree._init(B.body)}der_1$1=S,S.prototype.encode=function(A,I){return this.tree._encode(A,I).join()};function E(B){_.call(this,"der",B)}r(E,_),E.prototype._encodeComposite=function(A,I,N,V){const D=T(A,I,N,this.reporter);if(V.length<128){const M=n.alloc(2);return M[0]=D,M[1]=V.length,this._createEncoderBuffer([M,V])}let O=1;for(let M=V.length;M>=256;M>>=8)O++;const F=n.alloc(1+1+O);F[0]=D,F[1]=128|O;for(let M=1+O,L=V.length;L>0;M--,L>>=8)F[M]=L&255;return this._createEncoderBuffer([F,V])},E.prototype._encodeStr=function(A,I){if(I==="bitstr")return this._createEncoderBuffer([A.unused|0,A.data]);if(I==="bmpstr"){const N=n.alloc(A.length*2);for(let V=0;V<A.length;V++)N.writeUInt16BE(A.charCodeAt(V),V*2);return this._createEncoderBuffer(N)}else return I==="numstr"?this._isNumstr(A)?this._createEncoderBuffer(A):this.reporter.error("Encoding of string type: numstr supports only digits and space"):I==="printstr"?this._isPrintstr(A)?this._createEncoderBuffer(A):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(I)?this._createEncoderBuffer(A):I==="objDesc"?this._createEncoderBuffer(A):this.reporter.error("Encoding of string type: "+I+" unsupported")},E.prototype._encodeObjid=function(A,I,N){if(typeof A=="string"){if(!I)return this.reporter.error("string objid given, but no values map found");if(!I.hasOwnProperty(A))return this.reporter.error("objid not found in values map");A=I[A].split(/[\s.]+/g);for(let F=0;F<A.length;F++)A[F]|=0}else if(Array.isArray(A)){A=A.slice();for(let F=0;F<A.length;F++)A[F]|=0}if(!Array.isArray(A))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(A));if(!N){if(A[1]>=40)return this.reporter.error("Second objid identifier OOB");A.splice(0,2,A[0]*40+A[1])}let V=0;for(let F=0;F<A.length;F++){let M=A[F];for(V++;M>=128;M>>=7)V++}const D=n.alloc(V);let O=D.length-1;for(let F=A.length-1;F>=0;F--){let M=A[F];for(D[O--]=M&127;(M>>=7)>0;)D[O--]=128|M&127}return this._createEncoderBuffer(D)};function C(B){return B<10?"0"+B:B}E.prototype._encodeTime=function(A,I){let N;const V=new Date(A);return I==="gentime"?N=[C(V.getUTCFullYear()),C(V.getUTCMonth()+1),C(V.getUTCDate()),C(V.getUTCHours()),C(V.getUTCMinutes()),C(V.getUTCSeconds()),"Z"].join(""):I==="utctime"?N=[C(V.getUTCFullYear()%100),C(V.getUTCMonth()+1),C(V.getUTCDate()),C(V.getUTCHours()),C(V.getUTCMinutes()),C(V.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+I+" time is not supported yet"),this._encodeStr(N,"octstr")},E.prototype._encodeNull=function(){return this._createEncoderBuffer("")},E.prototype._encodeInt=function(A,I){if(typeof A=="string"){if(!I)return this.reporter.error("String int or enum given, but no values map");if(!I.hasOwnProperty(A))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(A));A=I[A]}if(typeof A!="number"&&!n.isBuffer(A)){const D=A.toArray();!A.sign&&D[0]&128&&D.unshift(0),A=n.from(D)}if(n.isBuffer(A)){let D=A.length;A.length===0&&D++;const O=n.alloc(D);return A.copy(O),A.length===0&&(O[0]=0),this._createEncoderBuffer(O)}if(A<128)return this._createEncoderBuffer(A);if(A<256)return this._createEncoderBuffer([0,A]);let N=1;for(let D=A;D>=256;D>>=8)N++;const V=new Array(N);for(let D=V.length-1;D>=0;D--)V[D]=A&255,A>>=8;return V[0]&128&&V.unshift(0),this._createEncoderBuffer(n.from(V))},E.prototype._encodeBool=function(A){return this._createEncoderBuffer(A?255:0)},E.prototype._use=function(A,I){return typeof A=="function"&&(A=A(I)),A._getEncoder("der").tree},E.prototype._skipDefault=function(A,I,N){const V=this._baseState;let D;if(V.default===null)return!1;const O=A.join();if(V.defaultBuffer===void 0&&(V.defaultBuffer=this._encodeValue(V.default,I,N).join()),O.length!==V.defaultBuffer.length)return!1;for(D=0;D<O.length;D++)if(O[D]!==V.defaultBuffer[D])return!1;return!0};function T(B,A,I,N){let V;if(B==="seqof"?B="seq":B==="setof"&&(B="set"),x.tagByName.hasOwnProperty(B))V=x.tagByName[B];else if(typeof B=="number"&&(B|0)===B)V=B;else return N.error("Unknown tag: "+B);return V>=31?N.error("Multi-octet tag encoding unsupported"):(A||(V|=32),V|=x.tagClassByName[I||"universal"]<<6,V)}return der_1$1}var pem$2,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$2;hasRequiredPem$1=1;const r=inherits_browserExports,n=requireDer$1();function _(x){n.call(this,x),this.enc="pem"}return r(_,n),pem$2=_,_.prototype.encode=function(S,E){const T=n.prototype.encode.call(this,S).toString("base64"),B=["-----BEGIN "+E.label+"-----"];for(let A=0;A<T.length;A+=64)B.push(T.slice(A,A+64));return B.push("-----END "+E.label+"-----"),B.join(`
`)},pem$2}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(r){const n=r;n.der=requireDer$1(),n.pem=requirePem$1()}(encoders)),encoders}var decoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;const r=inherits_browserExports,n=requireBn$2(),_=requireBuffer().DecoderBuffer,x=requireNode(),S=requireDer$2();function E(A){this.enc="der",this.name=A.name,this.entity=A,this.tree=new C,this.tree._init(A.body)}der_1=E,E.prototype.decode=function(I,N){return _.isDecoderBuffer(I)||(I=new _(I,N)),this.tree._decode(I,N)};function C(A){x.call(this,"der",A)}r(C,x),C.prototype._peekTag=function(I,N,V){if(I.isEmpty())return!1;const D=I.save(),O=T(I,'Failed to peek tag: "'+N+'"');return I.isError(O)?O:(I.restore(D),O.tag===N||O.tagStr===N||O.tagStr+"of"===N||V)},C.prototype._decodeTag=function(I,N,V){const D=T(I,'Failed to decode tag of "'+N+'"');if(I.isError(D))return D;let O=B(I,D.primitive,'Failed to get length of "'+N+'"');if(I.isError(O))return O;if(!V&&D.tag!==N&&D.tagStr!==N&&D.tagStr+"of"!==N)return I.error('Failed to match tag: "'+N+'"');if(D.primitive||O!==null)return I.skip(O,'Failed to match body of: "'+N+'"');const F=I.save(),M=this._skipUntilEnd(I,'Failed to skip indefinite length body: "'+this.tag+'"');return I.isError(M)?M:(O=I.offset-F.offset,I.restore(F),I.skip(O,'Failed to match body of: "'+N+'"'))},C.prototype._skipUntilEnd=function(I,N){for(;;){const V=T(I,N);if(I.isError(V))return V;const D=B(I,V.primitive,N);if(I.isError(D))return D;let O;if(V.primitive||D!==null?O=I.skip(D):O=this._skipUntilEnd(I,N),I.isError(O))return O;if(V.tagStr==="end")break}},C.prototype._decodeList=function(I,N,V,D){const O=[];for(;!I.isEmpty();){const F=this._peekTag(I,"end");if(I.isError(F))return F;const M=V.decode(I,"der",D);if(I.isError(M)&&F)break;O.push(M)}return O},C.prototype._decodeStr=function(I,N){if(N==="bitstr"){const V=I.readUInt8();return I.isError(V)?V:{unused:V,data:I.raw()}}else if(N==="bmpstr"){const V=I.raw();if(V.length%2===1)return I.error("Decoding of string type: bmpstr length mismatch");let D="";for(let O=0;O<V.length/2;O++)D+=String.fromCharCode(V.readUInt16BE(O*2));return D}else if(N==="numstr"){const V=I.raw().toString("ascii");return this._isNumstr(V)?V:I.error("Decoding of string type: numstr unsupported characters")}else{if(N==="octstr")return I.raw();if(N==="objDesc")return I.raw();if(N==="printstr"){const V=I.raw().toString("ascii");return this._isPrintstr(V)?V:I.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(N)?I.raw().toString():I.error("Decoding of string type: "+N+" unsupported")}},C.prototype._decodeObjid=function(I,N,V){let D;const O=[];let F=0,M=0;for(;!I.isEmpty();)M=I.readUInt8(),F<<=7,F|=M&127,M&128||(O.push(F),F=0);M&128&&O.push(F);const L=O[0]/40|0,j=O[0]%40;if(V?D=O:D=[L,j].concat(O.slice(1)),N){let q=N[D.join(" ")];q===void 0&&(q=N[D.join(".")]),q!==void 0&&(D=q)}return D},C.prototype._decodeTime=function(I,N){const V=I.raw().toString();let D,O,F,M,L,j;if(N==="gentime")D=V.slice(0,4)|0,O=V.slice(4,6)|0,F=V.slice(6,8)|0,M=V.slice(8,10)|0,L=V.slice(10,12)|0,j=V.slice(12,14)|0;else if(N==="utctime")D=V.slice(0,2)|0,O=V.slice(2,4)|0,F=V.slice(4,6)|0,M=V.slice(6,8)|0,L=V.slice(8,10)|0,j=V.slice(10,12)|0,D<70?D=2e3+D:D=1900+D;else return I.error("Decoding "+N+" time is not supported yet");return Date.UTC(D,O-1,F,M,L,j,0)},C.prototype._decodeNull=function(){return null},C.prototype._decodeBool=function(I){const N=I.readUInt8();return I.isError(N)?N:N!==0},C.prototype._decodeInt=function(I,N){const V=I.raw();let D=new n(V);return N&&(D=N[D.toString(10)]||D),D},C.prototype._use=function(I,N){return typeof I=="function"&&(I=I(N)),I._getDecoder("der").tree};function T(A,I){let N=A.readUInt8(I);if(A.isError(N))return N;const V=S.tagClass[N>>6],D=(N&32)===0;if((N&31)===31){let F=N;for(N=0;(F&128)===128;){if(F=A.readUInt8(I),A.isError(F))return F;N<<=7,N|=F&127}}else N&=31;const O=S.tag[N];return{cls:V,primitive:D,tag:N,tagStr:O}}function B(A,I,N){let V=A.readUInt8(N);if(A.isError(V))return V;if(!I&&V===128)return null;if(!(V&128))return V;const D=V&127;if(D>4)return A.error("length octect is too long");V=0;for(let O=0;O<D;O++){V<<=8;const F=A.readUInt8(N);if(A.isError(F))return F;V|=F}return V}return der_1}var pem$1,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem$1;hasRequiredPem=1;const r=inherits_browserExports,n=requireSafer().Buffer,_=requireDer();function x(S){_.call(this,S),this.enc="pem"}return r(x,_),pem$1=x,x.prototype.decode=function(E,C){const T=E.toString().split(/[\r\n]+/g),B=C.label.toUpperCase(),A=/^-----(BEGIN|END) ([^-]+)-----$/;let I=-1,N=-1;for(let O=0;O<T.length;O++){const F=T[O].match(A);if(F!==null&&F[2]===B)if(I===-1){if(F[1]!=="BEGIN")break;I=O}else{if(F[1]!=="END")break;N=O;break}}if(I===-1||N===-1)throw new Error("PEM section not found for: "+B);const V=T.slice(I+1,N).join("");V.replace(/[^a-z0-9+/=]+/gi,"");const D=n.from(V,"base64");return _.prototype.decode.call(this,D,C)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(r){const n=r;n.der=requireDer(),n.pem=requirePem()}(decoders)),decoders}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(r){const n=requireEncoders(),_=requireDecoders(),x=inherits_browserExports,S=r;S.define=function(T,B){return new E(T,B)};function E(C,T){this.name=C,this.body=T,this.decoders={},this.encoders={}}E.prototype._createNamed=function(T){const B=this.name;function A(I){this._initNamed(I,B)}return x(A,T),A.prototype._initNamed=function(N,V){T.call(this,N,V)},new A(this)},E.prototype._getDecoder=function(T){return T=T||"der",this.decoders.hasOwnProperty(T)||(this.decoders[T]=this._createNamed(_[T])),this.decoders[T]},E.prototype.decode=function(T,B,A){return this._getDecoder(B).decode(T,A)},E.prototype._getEncoder=function(T){return T=T||"der",this.encoders.hasOwnProperty(T)||(this.encoders[T]=this._createNamed(n[T])),this.encoders[T]},E.prototype.encode=function(T,B,A){return this._getEncoder(B).encode(T,A)}}(api)),api}var base$1={},hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(r){const n=r;n.Reporter=requireReporter().Reporter,n.DecoderBuffer=requireBuffer().DecoderBuffer,n.EncoderBuffer=requireBuffer().EncoderBuffer,n.Node=requireNode()}(base$1)),base$1}var constants={},hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(r){const n=r;n._reverse=function(x){const S={};return Object.keys(x).forEach(function(E){(E|0)==E&&(E=E|0);const C=x[E];S[C]=E}),S},n.der=requireDer$2()}(constants)),constants}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(r){const n=r;n.bignum=requireBn$2(),n.define=requireApi().define,n.base=requireBase(),n.constants=requireConstants(),n.decoders=requireDecoders(),n.encoders=requireEncoders()}(asn1$2)),asn1$2}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var r=requireAsn1$1(),n=r.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),_=r.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),x=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),S=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(x),this.key("subjectPublicKey").bitstr())}),E=r.define("RelativeDistinguishedName",function(){this.setof(_)}),C=r.define("RDNSequence",function(){this.seqof(E)}),T=r.define("Name",function(){this.choice({rdnSequence:this.use(C)})}),B=r.define("Validity",function(){this.seq().obj(this.key("notBefore").use(n),this.key("notAfter").use(n))}),A=r.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),I=r.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(x),this.key("issuer").use(T),this.key("validity").use(B),this.key("subject").use(T),this.key("subjectPublicKeyInfo").use(S),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(A).optional())}),N=r.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(I),this.key("signatureAlgorithm").use(x),this.key("signatureValue").bitstr())});return certificate=N,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$3;hasRequiredAsn1=1;var r=requireAsn1$1();asn1$3.certificate=requireCertificate();var n=r.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$3.RSAPrivateKey=n;var _=r.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$3.RSAPublicKey=_;var x=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(S),this.key("subjectPublicKey").bitstr())});asn1$3.PublicKey=x;var S=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),E=r.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(S),this.key("subjectPrivateKey").octstr())});asn1$3.PrivateKey=E;var C=r.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$3.EncryptedPrivateKey=C;var T=r.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$3.DSAPrivateKey=T,asn1$3.DSAparam=r.define("DSAparam",function(){this.int()});var B=r.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(A),this.key("publicKey").optional().explicit(1).bitstr())});asn1$3.ECPrivateKey=B;var A=r.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});return asn1$3.signature=r.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$3}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,_=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,x=requireEvp_bytestokey(),S=requireBrowser$6(),E=safeBufferExports.Buffer;return fixProc=function(C,T){var B=C.toString(),A=B.match(r),I;if(A){var V="aes"+A[1],D=E.from(A[2],"hex"),O=E.from(A[3].replace(/[\r\n]/g,""),"base64"),F=x(T,D.slice(0,8),parseInt(A[1],10)).key,M=[],L=S.createDecipheriv(V,F,D);M.push(L.update(O)),M.push(L.final()),I=E.concat(M)}else{var N=B.match(_);I=E.from(N[2].replace(/[\r\n]/g,""),"base64")}var j=B.match(n)[1];return{tag:j,data:I}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var r=requireAsn1(),n=require$$1,_=requireFixProc(),x=requireBrowser$6(),S=requireBrowser$7(),E=safeBufferExports.Buffer;parseAsn1=C;function C(B){var A;typeof B=="object"&&!E.isBuffer(B)&&(A=B.passphrase,B=B.key),typeof B=="string"&&(B=E.from(B));var I=_(B,A),N=I.tag,V=I.data,D,O;switch(N){case"CERTIFICATE":O=r.certificate.decode(V,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(O||(O=r.PublicKey.decode(V,"der")),D=O.algorithm.algorithm.join("."),D){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(O.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return O.subjectPrivateKey=O.subjectPublicKey,{type:"ec",data:O};case"1.2.840.10040.4.1":return O.algorithm.params.pub_key=r.DSAparam.decode(O.subjectPublicKey.data,"der"),{type:"dsa",data:O.algorithm.params};default:throw new Error("unknown key id "+D)}case"ENCRYPTED PRIVATE KEY":V=r.EncryptedPrivateKey.decode(V,"der"),V=T(V,A);case"PRIVATE KEY":switch(O=r.PrivateKey.decode(V,"der"),D=O.algorithm.algorithm.join("."),D){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(O.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:O.algorithm.curve,privateKey:r.ECPrivateKey.decode(O.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return O.algorithm.params.priv_key=r.DSAparam.decode(O.subjectPrivateKey,"der"),{type:"dsa",params:O.algorithm.params};default:throw new Error("unknown key id "+D)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(V,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(V,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(V,"der")};case"EC PRIVATE KEY":return V=r.ECPrivateKey.decode(V,"der"),{curve:V.parameters.value,privateKey:V.privateKey};default:throw new Error("unknown key type "+N)}}C.signature=r.signature;function T(B,A){var I=B.algorithm.decrypt.kde.kdeparams.salt,N=parseInt(B.algorithm.decrypt.kde.kdeparams.iters.toString(),10),V=n[B.algorithm.decrypt.cipher.algo.join(".")],D=B.algorithm.decrypt.cipher.iv,O=B.subjectPrivateKey,F=parseInt(V.split("-")[1],10)/8,M=S.pbkdf2Sync(A,I,N,F,"sha1"),L=x.createDecipheriv(V,M,D),j=[];return j.push(L.update(O)),j.push(L.final()),E.concat(j)}return parseAsn1}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign.exports;hasRequiredSign=1;var r=safeBufferExports.Buffer,n=requireBrowser$8(),_=requireBrowserifyRsa(),x=requireElliptic().ec,S=requireBn(),E=requireParseAsn1(),C=require$$4;function T(M,L,j,q,H){var X=E(L);if(X.curve){if(q!=="ecdsa"&&q!=="ecdsa/rsa")throw new Error("wrong private key type");return B(M,X)}else if(X.type==="dsa"){if(q!=="dsa")throw new Error("wrong private key type");return A(M,X,j)}else if(q!=="rsa"&&q!=="ecdsa/rsa")throw new Error("wrong private key type");M=r.concat([H,M]);for(var J=X.modulus.byteLength(),Z=[0,1];M.length+Z.length+1<J;)Z.push(255);Z.push(0);for(var ae=-1;++ae<M.length;)Z.push(M[ae]);var ce=_(Z,X);return ce}function B(M,L){var j=C[L.curve.join(".")];if(!j)throw new Error("unknown curve "+L.curve.join("."));var q=new x(j),H=q.keyFromPrivate(L.privateKey),X=H.sign(M);return r.from(X.toDER())}function A(M,L,j){for(var q=L.params.priv_key,H=L.params.p,X=L.params.q,J=L.params.g,Z=new S(0),ae,ce=V(M,X).mod(X),ve=!1,pe=N(q,X,M,j);ve===!1;)ae=O(X,pe,j),Z=F(J,ae,H,X),ve=ae.invm(X).imul(ce.add(q.mul(Z))).mod(X),ve.cmpn(0)===0&&(ve=!1,Z=new S(0));return I(Z,ve)}function I(M,L){M=M.toArray(),L=L.toArray(),M[0]&128&&(M=[0].concat(M)),L[0]&128&&(L=[0].concat(L));var j=M.length+L.length+4,q=[48,j,2,M.length];return q=q.concat(M,[2,L.length],L),r.from(q)}function N(M,L,j,q){if(M=r.from(M.toArray()),M.length<L.byteLength()){var H=r.alloc(L.byteLength()-M.length);M=r.concat([H,M])}var X=j.length,J=D(j,L),Z=r.alloc(X);Z.fill(1);var ae=r.alloc(X);return ae=n(q,ae).update(Z).update(r.from([0])).update(M).update(J).digest(),Z=n(q,ae).update(Z).digest(),ae=n(q,ae).update(Z).update(r.from([1])).update(M).update(J).digest(),Z=n(q,ae).update(Z).digest(),{k:ae,v:Z}}function V(M,L){var j=new S(M),q=(M.length<<3)-L.bitLength();return q>0&&j.ishrn(q),j}function D(M,L){M=V(M,L),M=M.mod(L);var j=r.from(M.toArray());if(j.length<L.byteLength()){var q=r.alloc(L.byteLength()-j.length);j=r.concat([q,j])}return j}function O(M,L,j){var q,H;do{for(q=r.alloc(0);q.length*8<M.bitLength();)L.v=n(j,L.k).update(L.v).digest(),q=r.concat([q,L.v]);H=V(q,M),L.k=n(j,L.k).update(L.v).update(r.from([0])).digest(),L.v=n(j,L.k).update(L.v).digest()}while(H.cmp(M)!==-1);return H}function F(M,L,j,q){return M.toRed(S.mont(j)).redPow(L).fromRed().mod(q)}return sign.exports=T,sign.exports.getKey=N,sign.exports.makeKey=O,sign.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var r=safeBufferExports.Buffer,n=requireBn(),_=requireElliptic().ec,x=requireParseAsn1(),S=require$$4;function E(A,I,N,V,D){var O=x(N);if(O.type==="ec"){if(V!=="ecdsa"&&V!=="ecdsa/rsa")throw new Error("wrong public key type");return C(A,I,O)}else if(O.type==="dsa"){if(V!=="dsa")throw new Error("wrong public key type");return T(A,I,O)}else if(V!=="rsa"&&V!=="ecdsa/rsa")throw new Error("wrong public key type");I=r.concat([D,I]);for(var F=O.modulus.byteLength(),M=[1],L=0;I.length+M.length+2<F;)M.push(255),L++;M.push(0);for(var j=-1;++j<I.length;)M.push(I[j]);M=r.from(M);var q=n.mont(O.modulus);A=new n(A).toRed(q),A=A.redPow(new n(O.publicExponent)),A=r.from(A.fromRed().toArray());var H=L<8?1:0;for(F=Math.min(A.length,M.length),A.length!==M.length&&(H=1),j=-1;++j<F;)H|=A[j]^M[j];return H===0}function C(A,I,N){var V=S[N.data.algorithm.curve.join(".")];if(!V)throw new Error("unknown curve "+N.data.algorithm.curve.join("."));var D=new _(V),O=N.data.subjectPrivateKey.data;return D.verify(I,A,O)}function T(A,I,N){var V=N.data.p,D=N.data.q,O=N.data.g,F=N.data.pub_key,M=x.signature.decode(A,"der"),L=M.s,j=M.r;B(L,D),B(j,D);var q=n.mont(V),H=L.invm(D),X=O.toRed(q).redPow(new n(I).mul(H).mod(D)).fromRed().mul(F.toRed(q).redPow(j.mul(H).mod(D)).fromRed()).mod(V).mod(D);return X.cmp(j)===0}function B(A,I){if(A.cmpn(0)<=0)throw new Error("invalid sig");if(A.cmp(I)>=I)throw new Error("invalid sig")}return verify_1=E,verify_1}var browser$5,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$5;hasRequiredBrowser$3=1;var r=safeBufferExports.Buffer,n=requireBrowser$9(),_=requireReadableBrowser(),x=inherits_browserExports,S=requireSign(),E=requireVerify(),C=require$$6;Object.keys(C).forEach(function(N){C[N].id=r.from(C[N].id,"hex"),C[N.toLowerCase()]=C[N]});function T(N){_.Writable.call(this);var V=C[N];if(!V)throw new Error("Unknown message digest");this._hashType=V.hash,this._hash=n(V.hash),this._tag=V.id,this._signType=V.sign}x(T,_.Writable),T.prototype._write=function(V,D,O){this._hash.update(V),O()},T.prototype.update=function(V,D){return typeof V=="string"&&(V=r.from(V,D)),this._hash.update(V),this},T.prototype.sign=function(V,D){this.end();var O=this._hash.digest(),F=S(O,V,this._hashType,this._signType,this._tag);return D?F.toString(D):F};function B(N){_.Writable.call(this);var V=C[N];if(!V)throw new Error("Unknown message digest");this._hash=n(V.hash),this._tag=V.id,this._signType=V.sign}x(B,_.Writable),B.prototype._write=function(V,D,O){this._hash.update(V),O()},B.prototype.update=function(V,D){return typeof V=="string"&&(V=r.from(V,D)),this._hash.update(V),this},B.prototype.verify=function(V,D,O){typeof D=="string"&&(D=r.from(D,O)),this.end();var F=this._hash.digest();return E(D,F,V,this._signType,this._tag)};function A(N){return new T(N)}function I(N){return new B(N)}return browser$5={Sign:A,Verify:I,createSign:A,createVerify:I},browser$5}var browser$4,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$4;hasRequiredBrowser$2=1;var r=requireElliptic(),n=requireBn$2();browser$4=function(C){return new x(C)};var _={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};_.p224=_.secp224r1,_.p256=_.secp256r1=_.prime256v1,_.p192=_.secp192r1=_.prime192v1,_.p384=_.secp384r1,_.p521=_.secp521r1;function x(E){this.curveType=_[E],this.curveType||(this.curveType={name:E}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}x.prototype.generateKeys=function(E,C){return this.keys=this.curve.genKeyPair(),this.getPublicKey(E,C)},x.prototype.computeSecret=function(E,C,T){C=C||"utf8",Buffer$5.isBuffer(E)||(E=new Buffer$5(E,C));var B=this.curve.keyFromPublic(E).getPublic(),A=B.mul(this.keys.getPrivate()).getX();return S(A,T,this.curveType.byteLength)},x.prototype.getPublicKey=function(E,C){var T=this.keys.getPublic(C==="compressed",!0);return C==="hybrid"&&(T[T.length-1]%2?T[0]=7:T[0]=6),S(T,E)},x.prototype.getPrivateKey=function(E){return S(this.keys.getPrivate(),E)},x.prototype.setPublicKey=function(E,C){return C=C||"utf8",Buffer$5.isBuffer(E)||(E=new Buffer$5(E,C)),this.keys._importPublic(E),this},x.prototype.setPrivateKey=function(E,C){C=C||"utf8",Buffer$5.isBuffer(E)||(E=new Buffer$5(E,C));var T=new n(E);return T=T.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(T),this};function S(E,C,T){Array.isArray(E)||(E=E.toArray());var B=new Buffer$5(E);if(T&&B.length<T){var A=new Buffer$5(T-B.length);A.fill(0),B=Buffer$5.concat([A,B])}return C?B.toString(C):B}return browser$4}var browser$3={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var r=requireBrowser$9(),n=safeBufferExports.Buffer;mgf=function(x,S){for(var E=n.alloc(0),C=0,T;E.length<S;)T=_(C++),E=n.concat([E,r("sha1").update(x).update(T).digest()]);return E.slice(0,S)};function _(x){var S=n.allocUnsafe(4);return S.writeUInt32BE(x,0),S}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function(n,_){for(var x=n.length,S=-1;++S<x;)n[S]^=_[S];return n}),xor}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var r=requireBn$2(),n=safeBufferExports.Buffer;function _(x,S){return n.from(x.toRed(r.mont(S.modulus)).redPow(new r(S.publicExponent)).fromRed().toArray())}return withPublic_1=_,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var r=requireParseAsn1(),n=requireBrowser$b(),_=requireBrowser$9(),x=requireMgf(),S=requireXor(),E=requireBn$2(),C=requireWithPublic(),T=requireBrowserifyRsa(),B=safeBufferExports.Buffer;publicEncrypt=function(D,O,F){var M;D.padding?M=D.padding:F?M=1:M=4;var L=r(D),j;if(M===4)j=A(L,O);else if(M===1)j=I(L,O,F);else if(M===3){if(j=new E(O),j.cmp(L.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return F?T(j,L):C(j,L)};function A(V,D){var O=V.modulus.byteLength(),F=D.length,M=_("sha1").update(B.alloc(0)).digest(),L=M.length,j=2*L;if(F>O-j-2)throw new Error("message too long");var q=B.alloc(O-F-j-2),H=O-L-1,X=n(L),J=S(B.concat([M,q,B.alloc(1,1),D],H),x(X,H)),Z=S(X,x(J,L));return new E(B.concat([B.alloc(1),Z,J],O))}function I(V,D,O){var F=D.length,M=V.modulus.byteLength();if(F>M-11)throw new Error("message too long");var L;return O?L=B.alloc(M-F-3,255):L=N(M-F-3),new E(B.concat([B.from([0,O?1:2]),L,B.alloc(1),D],M))}function N(V){for(var D=B.allocUnsafe(V),O=0,F=n(V*2),M=0,L;O<V;)M===F.length&&(F=n(V*2),M=0),L=F[M++],L&&(D[O++]=L);return D}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var r=requireParseAsn1(),n=requireMgf(),_=requireXor(),x=requireBn$2(),S=requireBrowserifyRsa(),E=requireBrowser$9(),C=requireWithPublic(),T=safeBufferExports.Buffer;privateDecrypt=function(V,D,O){var F;V.padding?F=V.padding:O?F=1:F=4;var M=r(V),L=M.modulus.byteLength();if(D.length>L||new x(D).cmp(M.modulus)>=0)throw new Error("decryption error");var j;O?j=C(new x(D),M):j=S(D,M);var q=T.alloc(L-j.length);if(j=T.concat([q,j],L),F===4)return B(M,j);if(F===1)return A(M,j,O);if(F===3)return j;throw new Error("unknown padding")};function B(N,V){var D=N.modulus.byteLength(),O=E("sha1").update(T.alloc(0)).digest(),F=O.length;if(V[0]!==0)throw new Error("decryption error");var M=V.slice(1,F+1),L=V.slice(F+1),j=_(M,n(L,F)),q=_(L,n(j,D-F-1));if(I(O,q.slice(0,F)))throw new Error("decryption error");for(var H=F;q[H]===0;)H++;if(q[H++]!==1)throw new Error("decryption error");return q.slice(H)}function A(N,V,D){for(var O=V.slice(0,2),F=2,M=0;V[F++]!==0;)if(F>=V.length){M++;break}var L=V.slice(2,F-1);if((O.toString("hex")!=="0002"&&!D||O.toString("hex")!=="0001"&&D)&&M++,L.length<8&&M++,M)throw new Error("decryption error");return V.slice(F)}function I(N,V){N=T.from(N),V=T.from(V);var D=0,O=N.length;N.length!==V.length&&(D++,O=Math.min(N.length,V.length));for(var F=-1;++F<O;)D+=N[F]^V[F];return D}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(r){r.publicEncrypt=requirePublicEncrypt(),r.privateDecrypt=requirePrivateDecrypt(),r.privateEncrypt=function(_,x){return r.publicEncrypt(_,x,!0)},r.publicDecrypt=function(_,x){return r.privateDecrypt(_,x,!0)}}(browser$3)),browser$3}var browser$2={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$2;hasRequiredBrowser=1;function r(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var n=safeBufferExports,_=requireBrowser$b(),x=n.Buffer,S=n.kMaxLength,E=commonjsGlobal.crypto||commonjsGlobal.msCrypto,C=Math.pow(2,32)-1;function T(V,D){if(typeof V!="number"||V!==V)throw new TypeError("offset must be a number");if(V>C||V<0)throw new TypeError("offset must be a uint32");if(V>S||V>D)throw new RangeError("offset out of range")}function B(V,D,O){if(typeof V!="number"||V!==V)throw new TypeError("size must be a number");if(V>C||V<0)throw new TypeError("size must be a uint32");if(V+D>O||V>S)throw new RangeError("buffer too small")}E&&E.getRandomValues||!browser$1$1.browser?(browser$2.randomFill=A,browser$2.randomFillSync=N):(browser$2.randomFill=r,browser$2.randomFillSync=r);function A(V,D,O,F){if(!x.isBuffer(V)&&!(V instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof D=="function")F=D,D=0,O=V.length;else if(typeof O=="function")F=O,O=V.length-D;else if(typeof F!="function")throw new TypeError('"cb" argument must be a function');return T(D,V.length),B(O,D,V.length),I(V,D,O,F)}function I(V,D,O,F){if(browser$1$1.browser){var M=V.buffer,L=new Uint8Array(M,D,O);if(E.getRandomValues(L),F){browser$1$1.nextTick(function(){F(null,V)});return}return V}if(F){_(O,function(q,H){if(q)return F(q);H.copy(V,D),F(null,V)});return}var j=_(O);return j.copy(V,D),V}function N(V,D,O){if(typeof D>"u"&&(D=0),!x.isBuffer(V)&&!(V instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return T(D,V.length),O===void 0&&(O=V.length-D),B(O,D,V.length),I(V,D,O)}return browser$2}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$b(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var r=requireAlgos(),n=Object.keys(r),_=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(n);cryptoBrowserify.getHashes=function(){return _};var x=requireBrowser$7();cryptoBrowserify.pbkdf2=x.pbkdf2,cryptoBrowserify.pbkdf2Sync=x.pbkdf2Sync;var S=requireBrowser$5();cryptoBrowserify.Cipher=S.Cipher,cryptoBrowserify.createCipher=S.createCipher,cryptoBrowserify.Cipheriv=S.Cipheriv,cryptoBrowserify.createCipheriv=S.createCipheriv,cryptoBrowserify.Decipher=S.Decipher,cryptoBrowserify.createDecipher=S.createDecipher,cryptoBrowserify.Decipheriv=S.Decipheriv,cryptoBrowserify.createDecipheriv=S.createDecipheriv,cryptoBrowserify.getCiphers=S.getCiphers,cryptoBrowserify.listCiphers=S.listCiphers;var E=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=E.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=E.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=E.getDiffieHellman,cryptoBrowserify.createDiffieHellman=E.createDiffieHellman,cryptoBrowserify.DiffieHellman=E.DiffieHellman;var C=requireBrowser$3();cryptoBrowserify.createSign=C.createSign,cryptoBrowserify.Sign=C.Sign,cryptoBrowserify.createVerify=C.createVerify,cryptoBrowserify.Verify=C.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var T=requireBrowser$1();cryptoBrowserify.publicEncrypt=T.publicEncrypt,cryptoBrowserify.privateEncrypt=T.privateEncrypt,cryptoBrowserify.publicDecrypt=T.publicDecrypt,cryptoBrowserify.privateDecrypt=T.privateDecrypt;var B=requireBrowser();return cryptoBrowserify.randomFill=B.randomFill,cryptoBrowserify.randomFillSync=B.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var forge$c=forge$m,pkcs5=forge$c.pkcs5=forge$c.pkcs5||{},crypto$2;forge$c.util.isNodejs&&!forge$c.options.usePureJavaScript&&(crypto$2=requireCryptoBrowserify());var pbkdf2=forge$c.pbkdf2=pkcs5.pbkdf2=function(r,n,_,x,S,E){if(typeof S=="function"&&(E=S,S=null),forge$c.util.isNodejs&&!forge$c.options.usePureJavaScript&&crypto$2.pbkdf2&&(S===null||typeof S!="object")&&(crypto$2.pbkdf2Sync.length>4||!S||S==="sha1"))return typeof S!="string"&&(S="sha1"),r=Buffer$5.from(r,"binary"),n=Buffer$5.from(n,"binary"),E?crypto$2.pbkdf2Sync.length===4?crypto$2.pbkdf2(r,n,_,x,function(q,H){if(q)return E(q);E(null,H.toString("binary"))}):crypto$2.pbkdf2(r,n,_,x,S,function(q,H){if(q)return E(q);E(null,H.toString("binary"))}):crypto$2.pbkdf2Sync.length===4?crypto$2.pbkdf2Sync(r,n,_,x).toString("binary"):crypto$2.pbkdf2Sync(r,n,_,x,S).toString("binary");if((typeof S>"u"||S===null)&&(S="sha1"),typeof S=="string"){if(!(S in forge$c.md.algorithms))throw new Error("Unknown hash algorithm: "+S);S=forge$c.md[S].create()}var C=S.digestLength;if(x>4294967295*C){var T=new Error("Derived key is too long.");if(E)return E(T);throw T}var B=Math.ceil(x/C),A=x-(B-1)*C,I=forge$c.hmac.create();I.start(S,r);var N="",V,D,O;if(!E){for(var F=1;F<=B;++F){I.start(null,null),I.update(n),I.update(forge$c.util.int32ToBytes(F)),V=O=I.digest().getBytes();for(var M=2;M<=_;++M)I.start(null,null),I.update(O),D=I.digest().getBytes(),V=forge$c.util.xorBytes(V,D,C),O=D;N+=F<B?V:V.substr(0,A)}return N}var F=1,M;function L(){if(F>B)return E(null,N);I.start(null,null),I.update(n),I.update(forge$c.util.int32ToBytes(F)),V=O=I.digest().getBytes(),M=2,j()}function j(){if(M<=_)return I.start(null,null),I.update(O),D=I.digest().getBytes(),V=forge$c.util.xorBytes(V,D,C),O=D,++M,forge$c.util.setImmediate(j);N+=F<B?V:V.substr(0,A),++F,L()}L()};const forgePbkdf2=getDefaultExportFromCjs(pbkdf2);var forge$b=forge$m,pem=forge$b.pem=forge$b.pem||{};pem.encode=function(r,n){n=n||{};var _="-----BEGIN "+r.type+`-----\r
`,x;if(r.procType&&(x={name:"Proc-Type",values:[String(r.procType.version),r.procType.type]},_+=foldHeader(x)),r.contentDomain&&(x={name:"Content-Domain",values:[r.contentDomain]},_+=foldHeader(x)),r.dekInfo&&(x={name:"DEK-Info",values:[r.dekInfo.algorithm]},r.dekInfo.parameters&&x.values.push(r.dekInfo.parameters),_+=foldHeader(x)),r.headers)for(var S=0;S<r.headers.length;++S)_+=foldHeader(r.headers[S]);return r.procType&&(_+=`\r
`),_+=forge$b.util.encode64(r.body,n.maxline||64)+`\r
`,_+="-----END "+r.type+`-----\r
`,_};pem.decode=function(r){for(var n=[],_=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,x=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,S=/\r?\n/,E;E=_.exec(r),!!E;){var C=E[1];C==="NEW CERTIFICATE REQUEST"&&(C="CERTIFICATE REQUEST");var T={type:C,procType:null,contentDomain:null,dekInfo:null,headers:[],body:forge$b.util.decode64(E[3])};if(n.push(T),!!E[2]){for(var B=E[2].split(S),A=0;E&&A<B.length;){for(var I=B[A].replace(/\s+$/,""),N=A+1;N<B.length;++N){var V=B[N];if(!/\s/.test(V[0]))break;I+=V,A=N}if(E=I.match(x),E){for(var D={name:E[1],values:[]},O=E[2].split(","),F=0;F<O.length;++F)D.values.push(ltrim(O[F]));if(T.procType)if(!T.contentDomain&&D.name==="Content-Domain")T.contentDomain=O[0]||"";else if(!T.dekInfo&&D.name==="DEK-Info"){if(D.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');T.dekInfo={algorithm:O[0],parameters:O[1]||null}}else T.headers.push(D);else{if(D.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(D.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');T.procType={version:O[0],type:O[1]}}}++A}if(T.procType==="ENCRYPTED"&&!T.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(n.length===0)throw new Error("Invalid PEM formatted message.");return n};function foldHeader(r){for(var n=r.name+": ",_=[],x=function(B,A){return" "+A},S=0;S<r.values.length;++S)_.push(r.values[S].replace(/^(\S+\r\n)/,x));n+=_.join(",")+`\r
`;for(var E=0,C=-1,S=0;S<n.length;++S,++E)if(E>65&&C!==-1){var T=n[C];T===","?(++C,n=n.substr(0,C)+`\r
 `+n.substr(C)):n=n.substr(0,C)+`\r
`+T+n.substr(C+1),E=S-C-1,C=-1,++S}else(n[S]===" "||n[S]==="	"||n[S]===",")&&(C=S);return n}function ltrim(r){return r.replace(/^\s+/,"")}var forge$a=forge$m,sha256$4=forge$a.sha256=forge$a.sha256||{};forge$a.md.sha256=forge$a.md.algorithms.sha256=sha256$4;sha256$4.create=function(){_initialized$2||_init$2();var r=null,n=forge$a.util.createBuffer(),_=new Array(64),x={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return x.start=function(){x.messageLength=0,x.fullMessageLength=x.messageLength64=[];for(var S=x.messageLengthSize/4,E=0;E<S;++E)x.fullMessageLength.push(0);return n=forge$a.util.createBuffer(),r={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},x},x.start(),x.update=function(S,E){E==="utf8"&&(S=forge$a.util.encodeUtf8(S));var C=S.length;x.messageLength+=C,C=[C/4294967296>>>0,C>>>0];for(var T=x.fullMessageLength.length-1;T>=0;--T)x.fullMessageLength[T]+=C[1],C[1]=C[0]+(x.fullMessageLength[T]/4294967296>>>0),x.fullMessageLength[T]=x.fullMessageLength[T]>>>0,C[0]=C[1]/4294967296>>>0;return n.putBytes(S),_update$2(r,_,n),(n.read>2048||n.length()===0)&&n.compact(),x},x.digest=function(){var S=forge$a.util.createBuffer();S.putBytes(n.bytes());var E=x.fullMessageLength[x.fullMessageLength.length-1]+x.messageLengthSize,C=E&x.blockLength-1;S.putBytes(_padding$2.substr(0,x.blockLength-C));for(var T,B,A=x.fullMessageLength[0]*8,I=0;I<x.fullMessageLength.length-1;++I)T=x.fullMessageLength[I+1]*8,B=T/4294967296>>>0,A+=B,S.putInt32(A>>>0),A=T>>>0;S.putInt32(A);var N={h0:r.h0,h1:r.h1,h2:r.h2,h3:r.h3,h4:r.h4,h5:r.h5,h6:r.h6,h7:r.h7};_update$2(N,_,S);var V=forge$a.util.createBuffer();return V.putInt32(N.h0),V.putInt32(N.h1),V.putInt32(N.h2),V.putInt32(N.h3),V.putInt32(N.h4),V.putInt32(N.h5),V.putInt32(N.h6),V.putInt32(N.h7),V},x};var _padding$2=null,_initialized$2=!1,_k$1=null;function _init$2(){_padding$2=String.fromCharCode(128),_padding$2+=forge$a.util.fillString(String.fromCharCode(0),64),_k$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized$2=!0}function _update$2(r,n,_){for(var x,S,E,C,T,B,A,I,N,V,D,O,F,M,L,j=_.length();j>=64;){for(A=0;A<16;++A)n[A]=_.getInt32();for(;A<64;++A)x=n[A-2],x=(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10,S=n[A-15],S=(S>>>7|S<<25)^(S>>>18|S<<14)^S>>>3,n[A]=x+n[A-7]+S+n[A-16]|0;for(I=r.h0,N=r.h1,V=r.h2,D=r.h3,O=r.h4,F=r.h5,M=r.h6,L=r.h7,A=0;A<64;++A)C=(O>>>6|O<<26)^(O>>>11|O<<21)^(O>>>25|O<<7),T=M^O&(F^M),E=(I>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10),B=I&N|V&(I^N),x=L+C+T+_k$1[A]+n[A],S=E+B,L=M,M=F,F=O,O=D+x>>>0,D=V,V=N,N=I,I=x+S>>>0;r.h0=r.h0+I|0,r.h1=r.h1+N|0,r.h2=r.h2+V|0,r.h3=r.h3+D|0,r.h4=r.h4+O|0,r.h5=r.h5+F|0,r.h6=r.h6+M|0,r.h7=r.h7+L|0,j-=64}}var forge$9=forge$m,_crypto$1=null;forge$9.util.isNodejs&&!forge$9.options.usePureJavaScript&&!browser$1$1.versions["node-webkit"]&&(_crypto$1=requireCryptoBrowserify());var prng=forge$9.prng=forge$9.prng||{};prng.create=function(r){for(var n={plugin:r,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},_=r.md,x=new Array(32),S=0;S<32;++S)x[S]=_.create();n.pools=x,n.pool=0,n.generate=function(A,I){if(!I)return n.generateSync(A);var N=n.plugin.cipher,V=n.plugin.increment,D=n.plugin.formatKey,O=n.plugin.formatSeed,F=forge$9.util.createBuffer();n.key=null,M();function M(L){if(L)return I(L);if(F.length()>=A)return I(null,F.getBytes(A));if(n.generated>1048575&&(n.key=null),n.key===null)return forge$9.util.nextTick(function(){E(M)});var j=N(n.key,n.seed);n.generated+=j.length,F.putBytes(j),n.key=D(N(n.key,V(n.seed))),n.seed=O(N(n.key,n.seed)),forge$9.util.setImmediate(M)}},n.generateSync=function(A){var I=n.plugin.cipher,N=n.plugin.increment,V=n.plugin.formatKey,D=n.plugin.formatSeed;n.key=null;for(var O=forge$9.util.createBuffer();O.length()<A;){n.generated>1048575&&(n.key=null),n.key===null&&C();var F=I(n.key,n.seed);n.generated+=F.length,O.putBytes(F),n.key=V(I(n.key,N(n.seed))),n.seed=D(I(n.key,n.seed))}return O.getBytes(A)};function E(A){if(n.pools[0].messageLength>=32)return T(),A();var I=32-n.pools[0].messageLength<<5;n.seedFile(I,function(N,V){if(N)return A(N);n.collect(V),T(),A()})}function C(){if(n.pools[0].messageLength>=32)return T();var A=32-n.pools[0].messageLength<<5;n.collect(n.seedFileSync(A)),T()}function T(){n.reseeds=n.reseeds===4294967295?0:n.reseeds+1;var A=n.plugin.md.create();A.update(n.keyBytes);for(var I=1,N=0;N<32;++N)n.reseeds%I===0&&(A.update(n.pools[N].digest().getBytes()),n.pools[N].start()),I=I<<1;n.keyBytes=A.digest().getBytes(),A.start(),A.update(n.keyBytes);var V=A.digest().getBytes();n.key=n.plugin.formatKey(n.keyBytes),n.seed=n.plugin.formatSeed(V),n.generated=0}function B(A){var I=null,N=forge$9.util.globalScope,V=N.crypto||N.msCrypto;V&&V.getRandomValues&&(I=function(X){return V.getRandomValues(X)});var D=forge$9.util.createBuffer();if(I)for(;D.length()<A;){var O=Math.max(1,Math.min(A-D.length(),65536)/4),F=new Uint32Array(Math.floor(O));try{I(F);for(var M=0;M<F.length;++M)D.putInt32(F[M])}catch(X){if(!(typeof QuotaExceededError<"u"&&X instanceof QuotaExceededError))throw X}}if(D.length()<A)for(var L,j,q,H=Math.floor(Math.random()*65536);D.length()<A;){j=16807*(H&65535),L=16807*(H>>16),j+=(L&32767)<<16,j+=L>>15,j=(j&2147483647)+(j>>31),H=j&4294967295;for(var M=0;M<3;++M)q=H>>>(M<<3),q^=Math.floor(Math.random()*256),D.putByte(q&255)}return D.getBytes(A)}return _crypto$1?(n.seedFile=function(A,I){_crypto$1.randomBytes(A,function(N,V){if(N)return I(N);I(null,V.toString())})},n.seedFileSync=function(A){return _crypto$1.randomBytes(A).toString()}):(n.seedFile=function(A,I){try{I(null,B(A))}catch(N){I(N)}},n.seedFileSync=B),n.collect=function(A){for(var I=A.length,N=0;N<I;++N)n.pools[n.pool].update(A.substr(N,1)),n.pool=n.pool===31?0:n.pool+1},n.collectInt=function(A,I){for(var N="",V=0;V<I;V+=8)N+=String.fromCharCode(A>>V&255);n.collect(N)},n.registerWorker=function(A){if(A===self)n.seedFile=function(N,V){function D(O){var F=O.data;F.forge&&F.forge.prng&&(self.removeEventListener("message",D),V(F.forge.prng.err,F.forge.prng.bytes))}self.addEventListener("message",D),self.postMessage({forge:{prng:{needed:N}}})};else{var I=function(N){var V=N.data;V.forge&&V.forge.prng&&n.seedFile(V.forge.prng.needed,function(D,O){A.postMessage({forge:{prng:{err:D,bytes:O}}})})};A.addEventListener("message",I)}},n};var forge$8=forge$m;(function(){if(forge$8.random&&forge$8.random.getBytes){forge$8.random;return}(function(r){var n={},_=new Array(4),x=forge$8.util.createBuffer();n.formatKey=function(N){var V=forge$8.util.createBuffer(N);return N=new Array(4),N[0]=V.getInt32(),N[1]=V.getInt32(),N[2]=V.getInt32(),N[3]=V.getInt32(),forge$8.aes._expandKey(N,!1)},n.formatSeed=function(N){var V=forge$8.util.createBuffer(N);return N=new Array(4),N[0]=V.getInt32(),N[1]=V.getInt32(),N[2]=V.getInt32(),N[3]=V.getInt32(),N},n.cipher=function(N,V){return forge$8.aes._updateBlock(N,V,_,!1),x.putInt32(_[0]),x.putInt32(_[1]),x.putInt32(_[2]),x.putInt32(_[3]),x.getBytes()},n.increment=function(N){return++N[3],N},n.md=forge$8.md.sha256;function S(){var N=forge$8.prng.create(n);return N.getBytes=function(V,D){return N.generate(V,D)},N.getBytesSync=function(V){return N.generate(V)},N}var E=S(),C=null,T=forge$8.util.globalScope,B=T.crypto||T.msCrypto;if(B&&B.getRandomValues&&(C=function(N){return B.getRandomValues(N)}),forge$8.options.usePureJavaScript||!forge$8.util.isNodejs&&!C){if(E.collectInt(+new Date,32),typeof navigator<"u"){var A="";for(var I in navigator)try{typeof navigator[I]=="string"&&(A+=navigator[I])}catch{}E.collect(A),A=null}r&&(r().mousemove(function(N){E.collectInt(N.clientX,16),E.collectInt(N.clientY,16)}),r().keypress(function(N){E.collectInt(N.charCode,8)}))}if(!forge$8.random)forge$8.random=E;else for(var I in E)forge$8.random[I]=E[I];forge$8.random.createInstance=S,forge$8.random})(typeof jQuery<"u"?jQuery:null)})();var forge$7=forge$m,piTable=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s$1=[1,2,3,5],rol=function(r,n){return r<<n&65535|(r&65535)>>16-n},ror=function(r,n){return(r&65535)>>n|r<<16-n&65535};forge$7.rc2=forge$7.rc2||{};forge$7.rc2.expandKey=function(r,n){typeof r=="string"&&(r=forge$7.util.createBuffer(r)),n=n||128;var _=r,x=r.length(),S=n,E=Math.ceil(S/8),C=255>>(S&7),T;for(T=x;T<128;T++)_.putByte(piTable[_.at(T-1)+_.at(T-x)&255]);for(_.setAt(128-E,piTable[_.at(128-E)&C]),T=127-E;T>=0;T--)_.setAt(T,piTable[_.at(T+1)^_.at(T+E)]);return _};var createCipher=function(r,n,_){var x=!1,S=null,E=null,C=null,T,B,A,I,N=[];for(r=forge$7.rc2.expandKey(r,n),A=0;A<64;A++)N.push(r.getInt16Le());_?(T=function(O){for(A=0;A<4;A++)O[A]+=N[I]+(O[(A+3)%4]&O[(A+2)%4])+(~O[(A+3)%4]&O[(A+1)%4]),O[A]=rol(O[A],s$1[A]),I++},B=function(O){for(A=0;A<4;A++)O[A]+=N[O[(A+3)%4]&63]}):(T=function(O){for(A=3;A>=0;A--)O[A]=ror(O[A],s$1[A]),O[A]-=N[I]+(O[(A+3)%4]&O[(A+2)%4])+(~O[(A+3)%4]&O[(A+1)%4]),I--},B=function(O){for(A=3;A>=0;A--)O[A]-=N[O[(A+3)%4]&63]});var V=function(O){var F=[];for(A=0;A<4;A++){var M=S.getInt16Le();C!==null&&(_?M^=C.getInt16Le():C.putInt16Le(M)),F.push(M&65535)}I=_?0:63;for(var L=0;L<O.length;L++)for(var j=0;j<O[L][0];j++)O[L][1](F);for(A=0;A<4;A++)C!==null&&(_?C.putInt16Le(F[A]):F[A]^=C.getInt16Le()),E.putInt16Le(F[A])},D=null;return D={start:function(O,F){O&&typeof O=="string"&&(O=forge$7.util.createBuffer(O)),x=!1,S=forge$7.util.createBuffer(),E=F||new forge$7.util.createBuffer,C=O,D.output=E},update:function(O){for(x||S.putBuffer(O);S.length()>=8;)V([[5,T],[1,B],[6,T],[1,B],[5,T]])},finish:function(O){var F=!0;if(_)if(O)F=O(8,S,!_);else{var M=S.length()===8?8:8-S.length();S.fillWithByte(M,M)}if(F&&(x=!0,D.update()),!_&&(F=S.length()===0,F))if(O)F=O(8,E,!_);else{var L=E.length(),j=E.at(L-1);j>L?F=!1:E.truncate(j)}return F}},D};forge$7.rc2.startEncrypting=function(r,n,_){var x=forge$7.rc2.createEncryptionCipher(r,128);return x.start(n,_),x};forge$7.rc2.createEncryptionCipher=function(r,n){return createCipher(r,n,!0)};forge$7.rc2.startDecrypting=function(r,n,_){var x=forge$7.rc2.createDecryptionCipher(r,128);return x.start(n,_),x};forge$7.rc2.createDecryptionCipher=function(r,n){return createCipher(r,n,!1)};var forge$6=forge$m;forge$6.jsbn=forge$6.jsbn||{};var dbits;function BigInteger$2(r,n,_){this.data=[],r!=null&&(typeof r=="number"?this.fromNumber(r,n,_):n==null&&typeof r!="string"?this.fromString(r,256):this.fromString(r,n))}forge$6.jsbn.BigInteger=BigInteger$2;function nbi(){return new BigInteger$2(null)}function am1(r,n,_,x,S,E){for(;--E>=0;){var C=n*this.data[r++]+_.data[x]+S;S=Math.floor(C/67108864),_.data[x++]=C&67108863}return S}function am2(r,n,_,x,S,E){for(var C=n&32767,T=n>>15;--E>=0;){var B=this.data[r]&32767,A=this.data[r++]>>15,I=T*B+A*C;B=C*B+((I&32767)<<15)+_.data[x]+(S&1073741823),S=(B>>>30)+(I>>>15)+T*A+(S>>>30),_.data[x++]=B&1073741823}return S}function am3(r,n,_,x,S,E){for(var C=n&16383,T=n>>14;--E>=0;){var B=this.data[r]&16383,A=this.data[r++]>>14,I=T*B+A*C;B=C*B+((I&16383)<<14)+_.data[x]+S,S=(B>>28)+(I>>14)+T*A,_.data[x++]=B&268435455}return S}typeof navigator>"u"?(BigInteger$2.prototype.am=am3,dbits=28):navigator.appName=="Microsoft Internet Explorer"?(BigInteger$2.prototype.am=am2,dbits=30):navigator.appName!="Netscape"?(BigInteger$2.prototype.am=am1,dbits=26):(BigInteger$2.prototype.am=am3,dbits=28);BigInteger$2.prototype.DB=dbits;BigInteger$2.prototype.DM=(1<<dbits)-1;BigInteger$2.prototype.DV=1<<dbits;var BI_FP=52;BigInteger$2.prototype.FV=Math.pow(2,BI_FP);BigInteger$2.prototype.F1=BI_FP-dbits;BigInteger$2.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(r){return BI_RM.charAt(r)}function intAt(r,n){var _=BI_RC[r.charCodeAt(n)];return _??-1}function bnpCopyTo(r){for(var n=this.t-1;n>=0;--n)r.data[n]=this.data[n];r.t=this.t,r.s=this.s}function bnpFromInt(r){this.t=1,this.s=r<0?-1:0,r>0?this.data[0]=r:r<-1?this.data[0]=r+this.DV:this.t=0}function nbv(r){var n=nbi();return n.fromInt(r),n}function bnpFromString(r,n){var _;if(n==16)_=4;else if(n==8)_=3;else if(n==256)_=8;else if(n==2)_=1;else if(n==32)_=5;else if(n==4)_=2;else{this.fromRadix(r,n);return}this.t=0,this.s=0;for(var x=r.length,S=!1,E=0;--x>=0;){var C=_==8?r[x]&255:intAt(r,x);if(C<0){r.charAt(x)=="-"&&(S=!0);continue}S=!1,E==0?this.data[this.t++]=C:E+_>this.DB?(this.data[this.t-1]|=(C&(1<<this.DB-E)-1)<<E,this.data[this.t++]=C>>this.DB-E):this.data[this.t-1]|=C<<E,E+=_,E>=this.DB&&(E-=this.DB)}_==8&&r[0]&128&&(this.s=-1,E>0&&(this.data[this.t-1]|=(1<<this.DB-E)-1<<E)),this.clamp(),S&&BigInteger$2.ZERO.subTo(this,this)}function bnpClamp(){for(var r=this.s&this.DM;this.t>0&&this.data[this.t-1]==r;)--this.t}function bnToString(r){if(this.s<0)return"-"+this.negate().toString(r);var n;if(r==16)n=4;else if(r==8)n=3;else if(r==2)n=1;else if(r==32)n=5;else if(r==4)n=2;else return this.toRadix(r);var _=(1<<n)-1,x,S=!1,E="",C=this.t,T=this.DB-C*this.DB%n;if(C-- >0)for(T<this.DB&&(x=this.data[C]>>T)>0&&(S=!0,E=int2char(x));C>=0;)T<n?(x=(this.data[C]&(1<<T)-1)<<n-T,x|=this.data[--C]>>(T+=this.DB-n)):(x=this.data[C]>>(T-=n)&_,T<=0&&(T+=this.DB,--C)),x>0&&(S=!0),S&&(E+=int2char(x));return S?E:"0"}function bnNegate(){var r=nbi();return BigInteger$2.ZERO.subTo(this,r),r}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(r){var n=this.s-r.s;if(n!=0)return n;var _=this.t;if(n=_-r.t,n!=0)return this.s<0?-n:n;for(;--_>=0;)if((n=this.data[_]-r.data[_])!=0)return n;return 0}function nbits(r){var n=1,_;return(_=r>>>16)!=0&&(r=_,n+=16),(_=r>>8)!=0&&(r=_,n+=8),(_=r>>4)!=0&&(r=_,n+=4),(_=r>>2)!=0&&(r=_,n+=2),(_=r>>1)!=0&&(r=_,n+=1),n}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this.data[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(r,n){var _;for(_=this.t-1;_>=0;--_)n.data[_+r]=this.data[_];for(_=r-1;_>=0;--_)n.data[_]=0;n.t=this.t+r,n.s=this.s}function bnpDRShiftTo(r,n){for(var _=r;_<this.t;++_)n.data[_-r]=this.data[_];n.t=Math.max(this.t-r,0),n.s=this.s}function bnpLShiftTo(r,n){var _=r%this.DB,x=this.DB-_,S=(1<<x)-1,E=Math.floor(r/this.DB),C=this.s<<_&this.DM,T;for(T=this.t-1;T>=0;--T)n.data[T+E+1]=this.data[T]>>x|C,C=(this.data[T]&S)<<_;for(T=E-1;T>=0;--T)n.data[T]=0;n.data[E]=C,n.t=this.t+E+1,n.s=this.s,n.clamp()}function bnpRShiftTo(r,n){n.s=this.s;var _=Math.floor(r/this.DB);if(_>=this.t){n.t=0;return}var x=r%this.DB,S=this.DB-x,E=(1<<x)-1;n.data[0]=this.data[_]>>x;for(var C=_+1;C<this.t;++C)n.data[C-_-1]|=(this.data[C]&E)<<S,n.data[C-_]=this.data[C]>>x;x>0&&(n.data[this.t-_-1]|=(this.s&E)<<S),n.t=this.t-_,n.clamp()}function bnpSubTo(r,n){for(var _=0,x=0,S=Math.min(r.t,this.t);_<S;)x+=this.data[_]-r.data[_],n.data[_++]=x&this.DM,x>>=this.DB;if(r.t<this.t){for(x-=r.s;_<this.t;)x+=this.data[_],n.data[_++]=x&this.DM,x>>=this.DB;x+=this.s}else{for(x+=this.s;_<r.t;)x-=r.data[_],n.data[_++]=x&this.DM,x>>=this.DB;x-=r.s}n.s=x<0?-1:0,x<-1?n.data[_++]=this.DV+x:x>0&&(n.data[_++]=x),n.t=_,n.clamp()}function bnpMultiplyTo(r,n){var _=this.abs(),x=r.abs(),S=_.t;for(n.t=S+x.t;--S>=0;)n.data[S]=0;for(S=0;S<x.t;++S)n.data[S+_.t]=_.am(0,x.data[S],n,S,0,_.t);n.s=0,n.clamp(),this.s!=r.s&&BigInteger$2.ZERO.subTo(n,n)}function bnpSquareTo(r){for(var n=this.abs(),_=r.t=2*n.t;--_>=0;)r.data[_]=0;for(_=0;_<n.t-1;++_){var x=n.am(_,n.data[_],r,2*_,0,1);(r.data[_+n.t]+=n.am(_+1,2*n.data[_],r,2*_+1,x,n.t-_-1))>=n.DV&&(r.data[_+n.t]-=n.DV,r.data[_+n.t+1]=1)}r.t>0&&(r.data[r.t-1]+=n.am(_,n.data[_],r,2*_,0,1)),r.s=0,r.clamp()}function bnpDivRemTo(r,n,_){var x=r.abs();if(!(x.t<=0)){var S=this.abs();if(S.t<x.t){n?.fromInt(0),_!=null&&this.copyTo(_);return}_==null&&(_=nbi());var E=nbi(),C=this.s,T=r.s,B=this.DB-nbits(x.data[x.t-1]);B>0?(x.lShiftTo(B,E),S.lShiftTo(B,_)):(x.copyTo(E),S.copyTo(_));var A=E.t,I=E.data[A-1];if(I!=0){var N=I*(1<<this.F1)+(A>1?E.data[A-2]>>this.F2:0),V=this.FV/N,D=(1<<this.F1)/N,O=1<<this.F2,F=_.t,M=F-A,L=n??nbi();for(E.dlShiftTo(M,L),_.compareTo(L)>=0&&(_.data[_.t++]=1,_.subTo(L,_)),BigInteger$2.ONE.dlShiftTo(A,L),L.subTo(E,E);E.t<A;)E.data[E.t++]=0;for(;--M>=0;){var j=_.data[--F]==I?this.DM:Math.floor(_.data[F]*V+(_.data[F-1]+O)*D);if((_.data[F]+=E.am(0,j,_,M,0,A))<j)for(E.dlShiftTo(M,L),_.subTo(L,_);_.data[F]<--j;)_.subTo(L,_)}n!=null&&(_.drShiftTo(A,n),C!=T&&BigInteger$2.ZERO.subTo(n,n)),_.t=A,_.clamp(),B>0&&_.rShiftTo(B,_),C<0&&BigInteger$2.ZERO.subTo(_,_)}}}function bnMod(r){var n=nbi();return this.abs().divRemTo(r,null,n),this.s<0&&n.compareTo(BigInteger$2.ZERO)>0&&r.subTo(n,n),n}function Classic(r){this.m=r}function cConvert(r){return r.s<0||r.compareTo(this.m)>=0?r.mod(this.m):r}function cRevert(r){return r}function cReduce(r){r.divRemTo(this.m,null,r)}function cMulTo(r,n,_){r.multiplyTo(n,_),this.reduce(_)}function cSqrTo(r,n){r.squareTo(n),this.reduce(n)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var r=this.data[0];if(!(r&1))return 0;var n=r&3;return n=n*(2-(r&15)*n)&15,n=n*(2-(r&255)*n)&255,n=n*(2-((r&65535)*n&65535))&65535,n=n*(2-r*n%this.DV)%this.DV,n>0?this.DV-n:-n}function Montgomery(r){this.m=r,this.mp=r.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<r.DB-15)-1,this.mt2=2*r.t}function montConvert(r){var n=nbi();return r.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),r.s<0&&n.compareTo(BigInteger$2.ZERO)>0&&this.m.subTo(n,n),n}function montRevert(r){var n=nbi();return r.copyTo(n),this.reduce(n),n}function montReduce(r){for(;r.t<=this.mt2;)r.data[r.t++]=0;for(var n=0;n<this.m.t;++n){var _=r.data[n]&32767,x=_*this.mpl+((_*this.mph+(r.data[n]>>15)*this.mpl&this.um)<<15)&r.DM;for(_=n+this.m.t,r.data[_]+=this.m.am(0,x,r,n,0,this.m.t);r.data[_]>=r.DV;)r.data[_]-=r.DV,r.data[++_]++}r.clamp(),r.drShiftTo(this.m.t,r),r.compareTo(this.m)>=0&&r.subTo(this.m,r)}function montSqrTo(r,n){r.squareTo(n),this.reduce(n)}function montMulTo(r,n,_){r.multiplyTo(n,_),this.reduce(_)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this.data[0]&1:this.s)==0}function bnpExp(r,n){if(r>4294967295||r<1)return BigInteger$2.ONE;var _=nbi(),x=nbi(),S=n.convert(this),E=nbits(r)-1;for(S.copyTo(_);--E>=0;)if(n.sqrTo(_,x),(r&1<<E)>0)n.mulTo(x,S,_);else{var C=_;_=x,x=C}return n.revert(_)}function bnModPowInt(r,n){var _;return r<256||n.isEven()?_=new Classic(n):_=new Montgomery(n),this.exp(r,_)}BigInteger$2.prototype.copyTo=bnpCopyTo;BigInteger$2.prototype.fromInt=bnpFromInt;BigInteger$2.prototype.fromString=bnpFromString;BigInteger$2.prototype.clamp=bnpClamp;BigInteger$2.prototype.dlShiftTo=bnpDLShiftTo;BigInteger$2.prototype.drShiftTo=bnpDRShiftTo;BigInteger$2.prototype.lShiftTo=bnpLShiftTo;BigInteger$2.prototype.rShiftTo=bnpRShiftTo;BigInteger$2.prototype.subTo=bnpSubTo;BigInteger$2.prototype.multiplyTo=bnpMultiplyTo;BigInteger$2.prototype.squareTo=bnpSquareTo;BigInteger$2.prototype.divRemTo=bnpDivRemTo;BigInteger$2.prototype.invDigit=bnpInvDigit;BigInteger$2.prototype.isEven=bnpIsEven;BigInteger$2.prototype.exp=bnpExp;BigInteger$2.prototype.toString=bnToString;BigInteger$2.prototype.negate=bnNegate;BigInteger$2.prototype.abs=bnAbs;BigInteger$2.prototype.compareTo=bnCompareTo;BigInteger$2.prototype.bitLength=bnBitLength;BigInteger$2.prototype.mod=bnMod;BigInteger$2.prototype.modPowInt=bnModPowInt;BigInteger$2.ZERO=nbv(0);BigInteger$2.ONE=nbv(1);function bnClone(){var r=nbi();return this.copyTo(r),r}function bnIntValue(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function bnByteValue(){return this.t==0?this.s:this.data[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this.data[0]<<16>>16}function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function bnpToRadix(r){if(r==null&&(r=10),this.signum()==0||r<2||r>36)return"0";var n=this.chunkSize(r),_=Math.pow(r,n),x=nbv(_),S=nbi(),E=nbi(),C="";for(this.divRemTo(x,S,E);S.signum()>0;)C=(_+E.intValue()).toString(r).substr(1)+C,S.divRemTo(x,S,E);return E.intValue().toString(r)+C}function bnpFromRadix(r,n){this.fromInt(0),n==null&&(n=10);for(var _=this.chunkSize(n),x=Math.pow(n,_),S=!1,E=0,C=0,T=0;T<r.length;++T){var B=intAt(r,T);if(B<0){r.charAt(T)=="-"&&this.signum()==0&&(S=!0);continue}C=n*C+B,++E>=_&&(this.dMultiply(x),this.dAddOffset(C,0),E=0,C=0)}E>0&&(this.dMultiply(Math.pow(n,E)),this.dAddOffset(C,0)),S&&BigInteger$2.ZERO.subTo(this,this)}function bnpFromNumber(r,n,_){if(typeof n=="number")if(r<2)this.fromInt(1);else for(this.fromNumber(r,_),this.testBit(r-1)||this.bitwiseTo(BigInteger$2.ONE.shiftLeft(r-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>r&&this.subTo(BigInteger$2.ONE.shiftLeft(r-1),this);else{var x=new Array,S=r&7;x.length=(r>>3)+1,n.nextBytes(x),S>0?x[0]&=(1<<S)-1:x[0]=0,this.fromString(x,256)}}function bnToByteArray(){var r=this.t,n=new Array;n[0]=this.s;var _=this.DB-r*this.DB%8,x,S=0;if(r-- >0)for(_<this.DB&&(x=this.data[r]>>_)!=(this.s&this.DM)>>_&&(n[S++]=x|this.s<<this.DB-_);r>=0;)_<8?(x=(this.data[r]&(1<<_)-1)<<8-_,x|=this.data[--r]>>(_+=this.DB-8)):(x=this.data[r]>>(_-=8)&255,_<=0&&(_+=this.DB,--r)),x&128&&(x|=-256),S==0&&(this.s&128)!=(x&128)&&++S,(S>0||x!=this.s)&&(n[S++]=x);return n}function bnEquals(r){return this.compareTo(r)==0}function bnMin(r){return this.compareTo(r)<0?this:r}function bnMax(r){return this.compareTo(r)>0?this:r}function bnpBitwiseTo(r,n,_){var x,S,E=Math.min(r.t,this.t);for(x=0;x<E;++x)_.data[x]=n(this.data[x],r.data[x]);if(r.t<this.t){for(S=r.s&this.DM,x=E;x<this.t;++x)_.data[x]=n(this.data[x],S);_.t=this.t}else{for(S=this.s&this.DM,x=E;x<r.t;++x)_.data[x]=n(S,r.data[x]);_.t=r.t}_.s=n(this.s,r.s),_.clamp()}function op_and(r,n){return r&n}function bnAnd(r){var n=nbi();return this.bitwiseTo(r,op_and,n),n}function op_or(r,n){return r|n}function bnOr(r){var n=nbi();return this.bitwiseTo(r,op_or,n),n}function op_xor(r,n){return r^n}function bnXor(r){var n=nbi();return this.bitwiseTo(r,op_xor,n),n}function op_andnot(r,n){return r&~n}function bnAndNot(r){var n=nbi();return this.bitwiseTo(r,op_andnot,n),n}function bnNot(){for(var r=nbi(),n=0;n<this.t;++n)r.data[n]=this.DM&~this.data[n];return r.t=this.t,r.s=~this.s,r}function bnShiftLeft(r){var n=nbi();return r<0?this.rShiftTo(-r,n):this.lShiftTo(r,n),n}function bnShiftRight(r){var n=nbi();return r<0?this.lShiftTo(-r,n):this.rShiftTo(r,n),n}function lbit(r){if(r==0)return-1;var n=0;return r&65535||(r>>=16,n+=16),r&255||(r>>=8,n+=8),r&15||(r>>=4,n+=4),r&3||(r>>=2,n+=2),r&1||++n,n}function bnGetLowestSetBit(){for(var r=0;r<this.t;++r)if(this.data[r]!=0)return r*this.DB+lbit(this.data[r]);return this.s<0?this.t*this.DB:-1}function cbit(r){for(var n=0;r!=0;)r&=r-1,++n;return n}function bnBitCount(){for(var r=0,n=this.s&this.DM,_=0;_<this.t;++_)r+=cbit(this.data[_]^n);return r}function bnTestBit(r){var n=Math.floor(r/this.DB);return n>=this.t?this.s!=0:(this.data[n]&1<<r%this.DB)!=0}function bnpChangeBit(r,n){var _=BigInteger$2.ONE.shiftLeft(r);return this.bitwiseTo(_,n,_),_}function bnSetBit(r){return this.changeBit(r,op_or)}function bnClearBit(r){return this.changeBit(r,op_andnot)}function bnFlipBit(r){return this.changeBit(r,op_xor)}function bnpAddTo(r,n){for(var _=0,x=0,S=Math.min(r.t,this.t);_<S;)x+=this.data[_]+r.data[_],n.data[_++]=x&this.DM,x>>=this.DB;if(r.t<this.t){for(x+=r.s;_<this.t;)x+=this.data[_],n.data[_++]=x&this.DM,x>>=this.DB;x+=this.s}else{for(x+=this.s;_<r.t;)x+=r.data[_],n.data[_++]=x&this.DM,x>>=this.DB;x+=r.s}n.s=x<0?-1:0,x>0?n.data[_++]=x:x<-1&&(n.data[_++]=this.DV+x),n.t=_,n.clamp()}function bnAdd(r){var n=nbi();return this.addTo(r,n),n}function bnSubtract(r){var n=nbi();return this.subTo(r,n),n}function bnMultiply(r){var n=nbi();return this.multiplyTo(r,n),n}function bnDivide(r){var n=nbi();return this.divRemTo(r,n,null),n}function bnRemainder(r){var n=nbi();return this.divRemTo(r,null,n),n}function bnDivideAndRemainder(r){var n=nbi(),_=nbi();return this.divRemTo(r,n,_),new Array(n,_)}function bnpDMultiply(r){this.data[this.t]=this.am(0,r-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(r,n){if(r!=0){for(;this.t<=n;)this.data[this.t++]=0;for(this.data[n]+=r;this.data[n]>=this.DV;)this.data[n]-=this.DV,++n>=this.t&&(this.data[this.t++]=0),++this.data[n]}}function NullExp(){}function nNop(r){return r}function nMulTo(r,n,_){r.multiplyTo(n,_)}function nSqrTo(r,n){r.squareTo(n)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(r){return this.exp(r,new NullExp)}function bnpMultiplyLowerTo(r,n,_){var x=Math.min(this.t+r.t,n);for(_.s=0,_.t=x;x>0;)_.data[--x]=0;var S;for(S=_.t-this.t;x<S;++x)_.data[x+this.t]=this.am(0,r.data[x],_,x,0,this.t);for(S=Math.min(r.t,n);x<S;++x)this.am(0,r.data[x],_,x,0,n-x);_.clamp()}function bnpMultiplyUpperTo(r,n,_){--n;var x=_.t=this.t+r.t-n;for(_.s=0;--x>=0;)_.data[x]=0;for(x=Math.max(n-this.t,0);x<r.t;++x)_.data[this.t+x-n]=this.am(n-x,r.data[x],_,0,0,this.t+x-n);_.clamp(),_.drShiftTo(1,_)}function Barrett(r){this.r2=nbi(),this.q3=nbi(),BigInteger$2.ONE.dlShiftTo(2*r.t,this.r2),this.mu=this.r2.divide(r),this.m=r}function barrettConvert(r){if(r.s<0||r.t>2*this.m.t)return r.mod(this.m);if(r.compareTo(this.m)<0)return r;var n=nbi();return r.copyTo(n),this.reduce(n),n}function barrettRevert(r){return r}function barrettReduce(r){for(r.drShiftTo(this.m.t-1,this.r2),r.t>this.m.t+1&&(r.t=this.m.t+1,r.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);r.compareTo(this.r2)<0;)r.dAddOffset(1,this.m.t+1);for(r.subTo(this.r2,r);r.compareTo(this.m)>=0;)r.subTo(this.m,r)}function barrettSqrTo(r,n){r.squareTo(n),this.reduce(n)}function barrettMulTo(r,n,_){r.multiplyTo(n,_),this.reduce(_)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(r,n){var _=r.bitLength(),x,S=nbv(1),E;if(_<=0)return S;_<18?x=1:_<48?x=3:_<144?x=4:_<768?x=5:x=6,_<8?E=new Classic(n):n.isEven()?E=new Barrett(n):E=new Montgomery(n);var C=new Array,T=3,B=x-1,A=(1<<x)-1;if(C[1]=E.convert(this),x>1){var I=nbi();for(E.sqrTo(C[1],I);T<=A;)C[T]=nbi(),E.mulTo(I,C[T-2],C[T]),T+=2}var N=r.t-1,V,D=!0,O=nbi(),F;for(_=nbits(r.data[N])-1;N>=0;){for(_>=B?V=r.data[N]>>_-B&A:(V=(r.data[N]&(1<<_+1)-1)<<B-_,N>0&&(V|=r.data[N-1]>>this.DB+_-B)),T=x;!(V&1);)V>>=1,--T;if((_-=T)<0&&(_+=this.DB,--N),D)C[V].copyTo(S),D=!1;else{for(;T>1;)E.sqrTo(S,O),E.sqrTo(O,S),T-=2;T>0?E.sqrTo(S,O):(F=S,S=O,O=F),E.mulTo(O,C[V],S)}for(;N>=0&&!(r.data[N]&1<<_);)E.sqrTo(S,O),F=S,S=O,O=F,--_<0&&(_=this.DB-1,--N)}return E.revert(S)}function bnGCD(r){var n=this.s<0?this.negate():this.clone(),_=r.s<0?r.negate():r.clone();if(n.compareTo(_)<0){var x=n;n=_,_=x}var S=n.getLowestSetBit(),E=_.getLowestSetBit();if(E<0)return n;for(S<E&&(E=S),E>0&&(n.rShiftTo(E,n),_.rShiftTo(E,_));n.signum()>0;)(S=n.getLowestSetBit())>0&&n.rShiftTo(S,n),(S=_.getLowestSetBit())>0&&_.rShiftTo(S,_),n.compareTo(_)>=0?(n.subTo(_,n),n.rShiftTo(1,n)):(_.subTo(n,_),_.rShiftTo(1,_));return E>0&&_.lShiftTo(E,_),_}function bnpModInt(r){if(r<=0)return 0;var n=this.DV%r,_=this.s<0?r-1:0;if(this.t>0)if(n==0)_=this.data[0]%r;else for(var x=this.t-1;x>=0;--x)_=(n*_+this.data[x])%r;return _}function bnModInverse(r){var n=r.isEven();if(this.isEven()&&n||r.signum()==0)return BigInteger$2.ZERO;for(var _=r.clone(),x=this.clone(),S=nbv(1),E=nbv(0),C=nbv(0),T=nbv(1);_.signum()!=0;){for(;_.isEven();)_.rShiftTo(1,_),n?((!S.isEven()||!E.isEven())&&(S.addTo(this,S),E.subTo(r,E)),S.rShiftTo(1,S)):E.isEven()||E.subTo(r,E),E.rShiftTo(1,E);for(;x.isEven();)x.rShiftTo(1,x),n?((!C.isEven()||!T.isEven())&&(C.addTo(this,C),T.subTo(r,T)),C.rShiftTo(1,C)):T.isEven()||T.subTo(r,T),T.rShiftTo(1,T);_.compareTo(x)>=0?(_.subTo(x,_),n&&S.subTo(C,S),E.subTo(T,E)):(x.subTo(_,x),n&&C.subTo(S,C),T.subTo(E,T))}if(x.compareTo(BigInteger$2.ONE)!=0)return BigInteger$2.ZERO;if(T.compareTo(r)>=0)return T.subtract(r);if(T.signum()<0)T.addTo(r,T);else return T;return T.signum()<0?T.add(r):T}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(r){var n,_=this.abs();if(_.t==1&&_.data[0]<=lowprimes[lowprimes.length-1]){for(n=0;n<lowprimes.length;++n)if(_.data[0]==lowprimes[n])return!0;return!1}if(_.isEven())return!1;for(n=1;n<lowprimes.length;){for(var x=lowprimes[n],S=n+1;S<lowprimes.length&&x<lplim;)x*=lowprimes[S++];for(x=_.modInt(x);n<S;)if(x%lowprimes[n++]==0)return!1}return _.millerRabin(r)}function bnpMillerRabin(r){var n=this.subtract(BigInteger$2.ONE),_=n.getLowestSetBit();if(_<=0)return!1;for(var x=n.shiftRight(_),S=bnGetPrng(),E,C=0;C<r;++C){do E=new BigInteger$2(this.bitLength(),S);while(E.compareTo(BigInteger$2.ONE)<=0||E.compareTo(n)>=0);var T=E.modPow(x,this);if(T.compareTo(BigInteger$2.ONE)!=0&&T.compareTo(n)!=0){for(var B=1;B++<_&&T.compareTo(n)!=0;)if(T=T.modPowInt(2,this),T.compareTo(BigInteger$2.ONE)==0)return!1;if(T.compareTo(n)!=0)return!1}}return!0}function bnGetPrng(){return{nextBytes:function(r){for(var n=0;n<r.length;++n)r[n]=Math.floor(Math.random()*256)}}}BigInteger$2.prototype.chunkSize=bnpChunkSize;BigInteger$2.prototype.toRadix=bnpToRadix;BigInteger$2.prototype.fromRadix=bnpFromRadix;BigInteger$2.prototype.fromNumber=bnpFromNumber;BigInteger$2.prototype.bitwiseTo=bnpBitwiseTo;BigInteger$2.prototype.changeBit=bnpChangeBit;BigInteger$2.prototype.addTo=bnpAddTo;BigInteger$2.prototype.dMultiply=bnpDMultiply;BigInteger$2.prototype.dAddOffset=bnpDAddOffset;BigInteger$2.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger$2.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger$2.prototype.modInt=bnpModInt;BigInteger$2.prototype.millerRabin=bnpMillerRabin;BigInteger$2.prototype.clone=bnClone;BigInteger$2.prototype.intValue=bnIntValue;BigInteger$2.prototype.byteValue=bnByteValue;BigInteger$2.prototype.shortValue=bnShortValue;BigInteger$2.prototype.signum=bnSigNum;BigInteger$2.prototype.toByteArray=bnToByteArray;BigInteger$2.prototype.equals=bnEquals;BigInteger$2.prototype.min=bnMin;BigInteger$2.prototype.max=bnMax;BigInteger$2.prototype.and=bnAnd;BigInteger$2.prototype.or=bnOr;BigInteger$2.prototype.xor=bnXor;BigInteger$2.prototype.andNot=bnAndNot;BigInteger$2.prototype.not=bnNot;BigInteger$2.prototype.shiftLeft=bnShiftLeft;BigInteger$2.prototype.shiftRight=bnShiftRight;BigInteger$2.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger$2.prototype.bitCount=bnBitCount;BigInteger$2.prototype.testBit=bnTestBit;BigInteger$2.prototype.setBit=bnSetBit;BigInteger$2.prototype.clearBit=bnClearBit;BigInteger$2.prototype.flipBit=bnFlipBit;BigInteger$2.prototype.add=bnAdd;BigInteger$2.prototype.subtract=bnSubtract;BigInteger$2.prototype.multiply=bnMultiply;BigInteger$2.prototype.divide=bnDivide;BigInteger$2.prototype.remainder=bnRemainder;BigInteger$2.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger$2.prototype.modPow=bnModPow;BigInteger$2.prototype.modInverse=bnModInverse;BigInteger$2.prototype.pow=bnPow;BigInteger$2.prototype.gcd=bnGCD;BigInteger$2.prototype.isProbablePrime=bnIsProbablePrime;var forge$5=forge$m,sha1=forge$5.sha1=forge$5.sha1||{};forge$5.md.sha1=forge$5.md.algorithms.sha1=sha1;sha1.create=function(){_initialized$1||_init$1();var r=null,n=forge$5.util.createBuffer(),_=new Array(80),x={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return x.start=function(){x.messageLength=0,x.fullMessageLength=x.messageLength64=[];for(var S=x.messageLengthSize/4,E=0;E<S;++E)x.fullMessageLength.push(0);return n=forge$5.util.createBuffer(),r={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},x},x.start(),x.update=function(S,E){E==="utf8"&&(S=forge$5.util.encodeUtf8(S));var C=S.length;x.messageLength+=C,C=[C/4294967296>>>0,C>>>0];for(var T=x.fullMessageLength.length-1;T>=0;--T)x.fullMessageLength[T]+=C[1],C[1]=C[0]+(x.fullMessageLength[T]/4294967296>>>0),x.fullMessageLength[T]=x.fullMessageLength[T]>>>0,C[0]=C[1]/4294967296>>>0;return n.putBytes(S),_update$1(r,_,n),(n.read>2048||n.length()===0)&&n.compact(),x},x.digest=function(){var S=forge$5.util.createBuffer();S.putBytes(n.bytes());var E=x.fullMessageLength[x.fullMessageLength.length-1]+x.messageLengthSize,C=E&x.blockLength-1;S.putBytes(_padding$1.substr(0,x.blockLength-C));for(var T,B,A=x.fullMessageLength[0]*8,I=0;I<x.fullMessageLength.length-1;++I)T=x.fullMessageLength[I+1]*8,B=T/4294967296>>>0,A+=B,S.putInt32(A>>>0),A=T>>>0;S.putInt32(A);var N={h0:r.h0,h1:r.h1,h2:r.h2,h3:r.h3,h4:r.h4};_update$1(N,_,S);var V=forge$5.util.createBuffer();return V.putInt32(N.h0),V.putInt32(N.h1),V.putInt32(N.h2),V.putInt32(N.h3),V.putInt32(N.h4),V},x};var _padding$1=null,_initialized$1=!1;function _init$1(){_padding$1=String.fromCharCode(128),_padding$1+=forge$5.util.fillString(String.fromCharCode(0),64),_initialized$1=!0}function _update$1(r,n,_){for(var x,S,E,C,T,B,A,I,N=_.length();N>=64;){for(S=r.h0,E=r.h1,C=r.h2,T=r.h3,B=r.h4,I=0;I<16;++I)x=_.getInt32(),n[I]=x,A=T^E&(C^T),x=(S<<5|S>>>27)+A+B+1518500249+x,B=T,T=C,C=(E<<30|E>>>2)>>>0,E=S,S=x;for(;I<20;++I)x=n[I-3]^n[I-8]^n[I-14]^n[I-16],x=x<<1|x>>>31,n[I]=x,A=T^E&(C^T),x=(S<<5|S>>>27)+A+B+1518500249+x,B=T,T=C,C=(E<<30|E>>>2)>>>0,E=S,S=x;for(;I<32;++I)x=n[I-3]^n[I-8]^n[I-14]^n[I-16],x=x<<1|x>>>31,n[I]=x,A=E^C^T,x=(S<<5|S>>>27)+A+B+1859775393+x,B=T,T=C,C=(E<<30|E>>>2)>>>0,E=S,S=x;for(;I<40;++I)x=n[I-6]^n[I-16]^n[I-28]^n[I-32],x=x<<2|x>>>30,n[I]=x,A=E^C^T,x=(S<<5|S>>>27)+A+B+1859775393+x,B=T,T=C,C=(E<<30|E>>>2)>>>0,E=S,S=x;for(;I<60;++I)x=n[I-6]^n[I-16]^n[I-28]^n[I-32],x=x<<2|x>>>30,n[I]=x,A=E&C|T&(E^C),x=(S<<5|S>>>27)+A+B+2400959708+x,B=T,T=C,C=(E<<30|E>>>2)>>>0,E=S,S=x;for(;I<80;++I)x=n[I-6]^n[I-16]^n[I-28]^n[I-32],x=x<<2|x>>>30,n[I]=x,A=E^C^T,x=(S<<5|S>>>27)+A+B+3395469782+x,B=T,T=C,C=(E<<30|E>>>2)>>>0,E=S,S=x;r.h0=r.h0+S|0,r.h1=r.h1+E|0,r.h2=r.h2+C|0,r.h3=r.h3+T|0,r.h4=r.h4+B|0,N-=64}}var forge$4=forge$m,pkcs1=forge$4.pkcs1=forge$4.pkcs1||{};pkcs1.encode_rsa_oaep=function(r,n,_){var x,S,E,C;typeof _=="string"?(x=_,S=arguments[3]||void 0,E=arguments[4]||void 0):_&&(x=_.label||void 0,S=_.seed||void 0,E=_.md||void 0,_.mgf1&&_.mgf1.md&&(C=_.mgf1.md)),E?E.start():E=forge$4.md.sha1.create(),C||(C=E);var T=Math.ceil(r.n.bitLength()/8),B=T-2*E.digestLength-2;if(n.length>B){var A=new Error("RSAES-OAEP input message length is too long.");throw A.length=n.length,A.maxLength=B,A}x||(x=""),E.update(x,"raw");for(var I=E.digest(),N="",V=B-n.length,D=0;D<V;D++)N+="\0";var O=I.getBytes()+N+""+n;if(!S)S=forge$4.random.getBytes(E.digestLength);else if(S.length!==E.digestLength){var A=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw A.seedLength=S.length,A.digestLength=E.digestLength,A}var F=rsa_mgf1(S,T-E.digestLength-1,C),M=forge$4.util.xorBytes(O,F,O.length),L=rsa_mgf1(M,E.digestLength,C),j=forge$4.util.xorBytes(S,L,S.length);return"\0"+j+M};pkcs1.decode_rsa_oaep=function(r,n,_){var x,S,E;typeof _=="string"?(x=_,S=arguments[3]||void 0):_&&(x=_.label||void 0,S=_.md||void 0,_.mgf1&&_.mgf1.md&&(E=_.mgf1.md));var C=Math.ceil(r.n.bitLength()/8);if(n.length!==C){var M=new Error("RSAES-OAEP encoded message length is invalid.");throw M.length=n.length,M.expectedLength=C,M}if(S===void 0?S=forge$4.md.sha1.create():S.start(),E||(E=S),C<2*S.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");x||(x=""),S.update(x,"raw");for(var T=S.digest().getBytes(),B=n.charAt(0),A=n.substring(1,S.digestLength+1),I=n.substring(1+S.digestLength),N=rsa_mgf1(I,S.digestLength,E),V=forge$4.util.xorBytes(A,N,A.length),D=rsa_mgf1(V,C-S.digestLength-1,E),O=forge$4.util.xorBytes(I,D,I.length),F=O.substring(0,S.digestLength),M=B!=="\0",L=0;L<S.digestLength;++L)M|=T.charAt(L)!==F.charAt(L);for(var j=1,q=S.digestLength,H=S.digestLength;H<O.length;H++){var X=O.charCodeAt(H),J=X&1^1,Z=j?65534:0;M|=X&Z,j=j&J,q+=j}if(M||O.charCodeAt(q)!==1)throw new Error("Invalid RSAES-OAEP padding.");return O.substring(q+1)};function rsa_mgf1(r,n,_){_||(_=forge$4.md.sha1.create());for(var x="",S=Math.ceil(n/_.digestLength),E=0;E<S;++E){var C=String.fromCharCode(E>>24&255,E>>16&255,E>>8&255,E&255);_.start(),_.update(r+C),x+=_.digest().getBytes()}return x.substring(0,n)}var forge$3=forge$m;(function(){if(forge$3.prime){forge$3.prime;return}var r=forge$3.prime=forge$3.prime||{},n=forge$3.jsbn.BigInteger,_=[6,4,2,4,2,4,6,2],x=new n(null);x.fromInt(30);var S=function(N,V){return N|V};r.generateProbablePrime=function(N,V,D){typeof V=="function"&&(D=V,V={}),V=V||{};var O=V.algorithm||"PRIMEINC";typeof O=="string"&&(O={name:O}),O.options=O.options||{};var F=V.prng||forge$3.random,M={nextBytes:function(L){for(var j=F.getBytesSync(L.length),q=0;q<L.length;++q)L[q]=j.charCodeAt(q)}};if(O.name==="PRIMEINC")return E(N,M,O.options,D);throw new Error("Invalid prime generation algorithm: "+O.name)};function E(N,V,D,O){return"workers"in D?B(N,V,D,O):C(N,V,D,O)}function C(N,V,D,O){var F=A(N,V),M=0,L=I(F.bitLength());"millerRabinTests"in D&&(L=D.millerRabinTests);var j=10;"maxBlockTime"in D&&(j=D.maxBlockTime),T(F,N,V,M,L,j,O)}function T(N,V,D,O,F,M,L){var j=+new Date;do{if(N.bitLength()>V&&(N=A(V,D)),N.isProbablePrime(F))return L(null,N);N.dAddOffset(_[O++%8],0)}while(M<0||+new Date-j<M);forge$3.util.setImmediate(function(){T(N,V,D,O,F,M,L)})}function B(N,V,D,O){if(typeof Worker>"u")return C(N,V,D,O);var F=A(N,V),M=D.workers,L=D.workLoad||100,j=L*30/8,q=D.workerScript||"forge/prime.worker.js";if(M===-1)return forge$3.util.estimateCores(function(X,J){X&&(J=2),M=J-1,H()});H();function H(){M=Math.max(1,M);for(var X=[],J=0;J<M;++J)X[J]=new Worker(q);for(var J=0;J<M;++J)X[J].addEventListener("message",ae);var Z=!1;function ae(ce){if(!Z){var ve=ce.data;if(ve.found){for(var pe=0;pe<X.length;++pe)X[pe].terminate();return Z=!0,O(null,new n(ve.prime,16))}F.bitLength()>N&&(F=A(N,V));var G=F.toString(16);ce.target.postMessage({hex:G,workLoad:L}),F.dAddOffset(j,0)}}}}function A(N,V){var D=new n(N,V),O=N-1;return D.testBit(O)||D.bitwiseTo(n.ONE.shiftLeft(O),S,D),D.dAddOffset(31-D.mod(x).byteValue(),0),D}function I(N){return N<=100?27:N<=150?18:N<=200?15:N<=250?12:N<=300?9:N<=350?8:N<=400?7:N<=500?6:N<=600?5:N<=800?4:N<=1250?3:2}})();var forge$2=forge$m;if(typeof BigInteger$1>"u")var BigInteger$1=forge$2.jsbn.BigInteger;var _crypto=forge$2.util.isNodejs?requireCryptoBrowserify():null,asn1$1=forge$2.asn1,util$6=forge$2.util;forge$2.pki=forge$2.pki||{};forge$2.pki.rsa=forge$2.rsa=forge$2.rsa||{};var pki$1=forge$2.pki,GCD_30_DELTA=[6,4,2,4,2,4,6,2],privateKeyValidator={name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},rsaPrivateKeyValidator={name:"RSAPrivateKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},rsaPublicKeyValidator={name:"RSAPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},publicKeyValidator=forge$2.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},digestInfoValidator={name:"DigestInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},emsaPkcs1v15encode=function(r){var n;if(r.algorithm in pki$1.oids)n=pki$1.oids[r.algorithm];else{var _=new Error("Unknown message digest algorithm.");throw _.algorithm=r.algorithm,_}var x=asn1$1.oidToDer(n).getBytes(),S=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]),E=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]);E.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,x)),E.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,""));var C=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,r.digest().getBytes());return S.value.push(E),S.value.push(C),asn1$1.toDer(S).getBytes()},_modPow=function(r,n,_){if(_)return r.modPow(n.e,n.n);if(!n.p||!n.q)return r.modPow(n.d,n.n);n.dP||(n.dP=n.d.mod(n.p.subtract(BigInteger$1.ONE))),n.dQ||(n.dQ=n.d.mod(n.q.subtract(BigInteger$1.ONE))),n.qInv||(n.qInv=n.q.modInverse(n.p));var x;do x=new BigInteger$1(forge$2.util.bytesToHex(forge$2.random.getBytes(n.n.bitLength()/8)),16);while(x.compareTo(n.n)>=0||!x.gcd(n.n).equals(BigInteger$1.ONE));r=r.multiply(x.modPow(n.e,n.n)).mod(n.n);for(var S=r.mod(n.p).modPow(n.dP,n.p),E=r.mod(n.q).modPow(n.dQ,n.q);S.compareTo(E)<0;)S=S.add(n.p);var C=S.subtract(E).multiply(n.qInv).mod(n.p).multiply(n.q).add(E);return C=C.multiply(x.modInverse(n.n)).mod(n.n),C};pki$1.rsa.encrypt=function(r,n,_){var x=_,S,E=Math.ceil(n.n.bitLength()/8);_!==!1&&_!==!0?(x=_===2,S=_encodePkcs1_v1_5(r,n,_)):(S=forge$2.util.createBuffer(),S.putBytes(r));for(var C=new BigInteger$1(S.toHex(),16),T=_modPow(C,n,x),B=T.toString(16),A=forge$2.util.createBuffer(),I=E-Math.ceil(B.length/2);I>0;)A.putByte(0),--I;return A.putBytes(forge$2.util.hexToBytes(B)),A.getBytes()};pki$1.rsa.decrypt=function(r,n,_,x){var S=Math.ceil(n.n.bitLength()/8);if(r.length!==S){var E=new Error("Encrypted message length is invalid.");throw E.length=r.length,E.expected=S,E}var C=new BigInteger$1(forge$2.util.createBuffer(r).toHex(),16);if(C.compareTo(n.n)>=0)throw new Error("Encrypted message is invalid.");for(var T=_modPow(C,n,_),B=T.toString(16),A=forge$2.util.createBuffer(),I=S-Math.ceil(B.length/2);I>0;)A.putByte(0),--I;return A.putBytes(forge$2.util.hexToBytes(B)),x!==!1?_decodePkcs1_v1_5(A.getBytes(),n,_):A.getBytes()};pki$1.rsa.createKeyPairGenerationState=function(r,n,_){typeof r=="string"&&(r=parseInt(r,10)),r=r||2048,_=_||{};var x=_.prng||forge$2.random,S={nextBytes:function(T){for(var B=x.getBytesSync(T.length),A=0;A<T.length;++A)T[A]=B.charCodeAt(A)}},E=_.algorithm||"PRIMEINC",C;if(E==="PRIMEINC")C={algorithm:E,state:0,bits:r,rng:S,eInt:n||65537,e:new BigInteger$1(null),p:null,q:null,qBits:r>>1,pBits:r-(r>>1),pqState:0,num:null,keys:null},C.e.fromInt(C.eInt);else throw new Error("Invalid key generation algorithm: "+E);return C};pki$1.rsa.stepKeyPairGenerationState=function(r,n){"algorithm"in r||(r.algorithm="PRIMEINC");var _=new BigInteger$1(null);_.fromInt(30);for(var x=0,S=function(N,V){return N|V},E=+new Date,C,T=0;r.keys===null&&(n<=0||T<n);){if(r.state===0){var B=r.p===null?r.pBits:r.qBits,A=B-1;r.pqState===0?(r.num=new BigInteger$1(B,r.rng),r.num.testBit(A)||r.num.bitwiseTo(BigInteger$1.ONE.shiftLeft(A),S,r.num),r.num.dAddOffset(31-r.num.mod(_).byteValue(),0),x=0,++r.pqState):r.pqState===1?r.num.bitLength()>B?r.pqState=0:r.num.isProbablePrime(_getMillerRabinTests(r.num.bitLength()))?++r.pqState:r.num.dAddOffset(GCD_30_DELTA[x++%8],0):r.pqState===2?r.pqState=r.num.subtract(BigInteger$1.ONE).gcd(r.e).compareTo(BigInteger$1.ONE)===0?3:0:r.pqState===3&&(r.pqState=0,r.p===null?r.p=r.num:r.q=r.num,r.p!==null&&r.q!==null&&++r.state,r.num=null)}else if(r.state===1)r.p.compareTo(r.q)<0&&(r.num=r.p,r.p=r.q,r.q=r.num),++r.state;else if(r.state===2)r.p1=r.p.subtract(BigInteger$1.ONE),r.q1=r.q.subtract(BigInteger$1.ONE),r.phi=r.p1.multiply(r.q1),++r.state;else if(r.state===3)r.phi.gcd(r.e).compareTo(BigInteger$1.ONE)===0?++r.state:(r.p=null,r.q=null,r.state=0);else if(r.state===4)r.n=r.p.multiply(r.q),r.n.bitLength()===r.bits?++r.state:(r.q=null,r.state=0);else if(r.state===5){var I=r.e.modInverse(r.phi);r.keys={privateKey:pki$1.rsa.setPrivateKey(r.n,r.e,I,r.p,r.q,I.mod(r.p1),I.mod(r.q1),r.q.modInverse(r.p)),publicKey:pki$1.rsa.setPublicKey(r.n,r.e)}}C=+new Date,T+=C-E,E=C}return r.keys!==null};pki$1.rsa.generateKeyPair=function(r,n,_,x){if(arguments.length===1?typeof r=="object"?(_=r,r=void 0):typeof r=="function"&&(x=r,r=void 0):arguments.length===2?typeof r=="number"?typeof n=="function"?(x=n,n=void 0):typeof n!="number"&&(_=n,n=void 0):(_=r,x=n,r=void 0,n=void 0):arguments.length===3&&(typeof n=="number"?typeof _=="function"&&(x=_,_=void 0):(x=_,_=n,n=void 0)),_=_||{},r===void 0&&(r=_.bits||2048),n===void 0&&(n=_.e||65537),!forge$2.options.usePureJavaScript&&!_.prng&&r>=256&&r<=16384&&(n===65537||n===3)){if(x){if(_detectNodeCrypto("generateKeyPair"))return _crypto.generateKeyPair("rsa",{modulusLength:r,publicExponent:n,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(T,B,A){if(T)return x(T);x(null,{privateKey:pki$1.privateKeyFromPem(A),publicKey:pki$1.publicKeyFromPem(B)})});if(_detectSubtleCrypto("generateKey")&&_detectSubtleCrypto("exportKey"))return util$6.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:r,publicExponent:_intToUint8Array(n),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(T){return util$6.globalScope.crypto.subtle.exportKey("pkcs8",T.privateKey)}).then(void 0,function(T){x(T)}).then(function(T){if(T){var B=pki$1.privateKeyFromAsn1(asn1$1.fromDer(forge$2.util.createBuffer(T)));x(null,{privateKey:B,publicKey:pki$1.setRsaPublicKey(B.n,B.e)})}});if(_detectSubtleMsCrypto("generateKey")&&_detectSubtleMsCrypto("exportKey")){var S=util$6.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:r,publicExponent:_intToUint8Array(n),hash:{name:"SHA-256"}},!0,["sign","verify"]);S.oncomplete=function(T){var B=T.target.result,A=util$6.globalScope.msCrypto.subtle.exportKey("pkcs8",B.privateKey);A.oncomplete=function(I){var N=I.target.result,V=pki$1.privateKeyFromAsn1(asn1$1.fromDer(forge$2.util.createBuffer(N)));x(null,{privateKey:V,publicKey:pki$1.setRsaPublicKey(V.n,V.e)})},A.onerror=function(I){x(I)}},S.onerror=function(T){x(T)};return}}else if(_detectNodeCrypto("generateKeyPairSync")){var E=_crypto.generateKeyPairSync("rsa",{modulusLength:r,publicExponent:n,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:pki$1.privateKeyFromPem(E.privateKey),publicKey:pki$1.publicKeyFromPem(E.publicKey)}}}var C=pki$1.rsa.createKeyPairGenerationState(r,n,_);if(!x)return pki$1.rsa.stepKeyPairGenerationState(C,0),C.keys;_generateKeyPair(C,_,x)};pki$1.setRsaPublicKey=pki$1.rsa.setPublicKey=function(r,n){var _={n:r,e:n};return _.encrypt=function(x,S,E){if(typeof S=="string"?S=S.toUpperCase():S===void 0&&(S="RSAES-PKCS1-V1_5"),S==="RSAES-PKCS1-V1_5")S={encode:function(T,B,A){return _encodePkcs1_v1_5(T,B,2).getBytes()}};else if(S==="RSA-OAEP"||S==="RSAES-OAEP")S={encode:function(T,B){return forge$2.pkcs1.encode_rsa_oaep(B,T,E)}};else if(["RAW","NONE","NULL",null].indexOf(S)!==-1)S={encode:function(T){return T}};else if(typeof S=="string")throw new Error('Unsupported encryption scheme: "'+S+'".');var C=S.encode(x,_,!0);return pki$1.rsa.encrypt(C,_,!0)},_.verify=function(x,S,E,C){typeof E=="string"?E=E.toUpperCase():E===void 0&&(E="RSASSA-PKCS1-V1_5"),C===void 0&&(C={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in C||(C._parseAllDigestBytes=!0),E==="RSASSA-PKCS1-V1_5"?E={verify:function(B,A){A=_decodePkcs1_v1_5(A,_,!0);var I=asn1$1.fromDer(A,{parseAllBytes:C._parseAllDigestBytes}),N={},V=[];if(!asn1$1.validate(I,digestInfoValidator,N,V)){var D=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw D.errors=V,D}var O=asn1$1.derToOid(N.algorithmIdentifier);if(!(O===forge$2.oids.md2||O===forge$2.oids.md5||O===forge$2.oids.sha1||O===forge$2.oids.sha224||O===forge$2.oids.sha256||O===forge$2.oids.sha384||O===forge$2.oids.sha512||O===forge$2.oids["sha512-224"]||O===forge$2.oids["sha512-256"])){var D=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw D.oid=O,D}if((O===forge$2.oids.md2||O===forge$2.oids.md5)&&!("parameters"in N))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return B===N.digest}}:(E==="NONE"||E==="NULL"||E===null)&&(E={verify:function(B,A){return A=_decodePkcs1_v1_5(A,_,!0),B===A}});var T=pki$1.rsa.decrypt(S,_,!0,!1);return E.verify(x,T,_.n.bitLength())},_};pki$1.setRsaPrivateKey=pki$1.rsa.setPrivateKey=function(r,n,_,x,S,E,C,T){var B={n:r,e:n,d:_,p:x,q:S,dP:E,dQ:C,qInv:T};return B.decrypt=function(A,I,N){typeof I=="string"?I=I.toUpperCase():I===void 0&&(I="RSAES-PKCS1-V1_5");var V=pki$1.rsa.decrypt(A,B,!1,!1);if(I==="RSAES-PKCS1-V1_5")I={decode:_decodePkcs1_v1_5};else if(I==="RSA-OAEP"||I==="RSAES-OAEP")I={decode:function(D,O){return forge$2.pkcs1.decode_rsa_oaep(O,D,N)}};else if(["RAW","NONE","NULL",null].indexOf(I)!==-1)I={decode:function(D){return D}};else throw new Error('Unsupported encryption scheme: "'+I+'".');return I.decode(V,B,!1)},B.sign=function(A,I){var N=!1;typeof I=="string"&&(I=I.toUpperCase()),I===void 0||I==="RSASSA-PKCS1-V1_5"?(I={encode:emsaPkcs1v15encode},N=1):(I==="NONE"||I==="NULL"||I===null)&&(I={encode:function(){return A}},N=1);var V=I.encode(A,B.n.bitLength());return pki$1.rsa.encrypt(V,B,N)},B};pki$1.wrapRsaPrivateKey=function(r){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(0).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(pki$1.oids.rsaEncryption).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,asn1$1.toDer(r).getBytes())])};pki$1.privateKeyFromAsn1=function(r){var n={},_=[];if(asn1$1.validate(r,privateKeyValidator,n,_)&&(r=asn1$1.fromDer(forge$2.util.createBuffer(n.privateKey))),n={},_=[],!asn1$1.validate(r,rsaPrivateKeyValidator,n,_)){var x=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw x.errors=_,x}var S,E,C,T,B,A,I,N;return S=forge$2.util.createBuffer(n.privateKeyModulus).toHex(),E=forge$2.util.createBuffer(n.privateKeyPublicExponent).toHex(),C=forge$2.util.createBuffer(n.privateKeyPrivateExponent).toHex(),T=forge$2.util.createBuffer(n.privateKeyPrime1).toHex(),B=forge$2.util.createBuffer(n.privateKeyPrime2).toHex(),A=forge$2.util.createBuffer(n.privateKeyExponent1).toHex(),I=forge$2.util.createBuffer(n.privateKeyExponent2).toHex(),N=forge$2.util.createBuffer(n.privateKeyCoefficient).toHex(),pki$1.setRsaPrivateKey(new BigInteger$1(S,16),new BigInteger$1(E,16),new BigInteger$1(C,16),new BigInteger$1(T,16),new BigInteger$1(B,16),new BigInteger$1(A,16),new BigInteger$1(I,16),new BigInteger$1(N,16))};pki$1.privateKeyToAsn1=pki$1.privateKeyToRSAPrivateKey=function(r){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(0).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(r.n)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(r.e)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(r.d)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(r.p)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(r.q)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(r.dP)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(r.dQ)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(r.qInv))])};pki$1.publicKeyFromAsn1=function(r){var n={},_=[];if(asn1$1.validate(r,publicKeyValidator,n,_)){var x=asn1$1.derToOid(n.publicKeyOid);if(x!==pki$1.oids.rsaEncryption){var S=new Error("Cannot read public key. Unknown OID.");throw S.oid=x,S}r=n.rsaPublicKey}if(_=[],!asn1$1.validate(r,rsaPublicKeyValidator,n,_)){var S=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw S.errors=_,S}var E=forge$2.util.createBuffer(n.publicKeyModulus).toHex(),C=forge$2.util.createBuffer(n.publicKeyExponent).toHex();return pki$1.setRsaPublicKey(new BigInteger$1(E,16),new BigInteger$1(C,16))};pki$1.publicKeyToAsn1=pki$1.publicKeyToSubjectPublicKeyInfo=function(r){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(pki$1.oids.rsaEncryption).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BITSTRING,!1,[pki$1.publicKeyToRSAPublicKey(r)])])};pki$1.publicKeyToRSAPublicKey=function(r){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(r.n)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(r.e))])};function _encodePkcs1_v1_5(r,n,_){var x=forge$2.util.createBuffer(),S=Math.ceil(n.n.bitLength()/8);if(r.length>S-11){var E=new Error("Message is too long for PKCS#1 v1.5 padding.");throw E.length=r.length,E.max=S-11,E}x.putByte(0),x.putByte(_);var C=S-3-r.length,T;if(_===0||_===1){T=_===0?0:255;for(var B=0;B<C;++B)x.putByte(T)}else for(;C>0;){for(var A=0,I=forge$2.random.getBytes(C),B=0;B<C;++B)T=I.charCodeAt(B),T===0?++A:x.putByte(T);C=A}return x.putByte(0),x.putBytes(r),x}function _decodePkcs1_v1_5(r,n,_,x){var S=Math.ceil(n.n.bitLength()/8),E=forge$2.util.createBuffer(r),C=E.getByte(),T=E.getByte();if(C!==0||_&&T!==0&&T!==1||!_&&T!=2||_&&T===0&&typeof x>"u")throw new Error("Encryption block is invalid.");var B=0;if(T===0){B=S-3-x;for(var A=0;A<B;++A)if(E.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(T===1)for(B=0;E.length()>1;){if(E.getByte()!==255){--E.read;break}++B}else if(T===2)for(B=0;E.length()>1;){if(E.getByte()===0){--E.read;break}++B}var I=E.getByte();if(I!==0||B!==S-3-E.length())throw new Error("Encryption block is invalid.");return E.getBytes()}function _generateKeyPair(r,n,_){typeof n=="function"&&(_=n,n={}),n=n||{};var x={algorithm:{name:n.algorithm||"PRIMEINC",options:{workers:n.workers||2,workLoad:n.workLoad||100,workerScript:n.workerScript}}};"prng"in n&&(x.prng=n.prng),S();function S(){E(r.pBits,function(T,B){if(T)return _(T);if(r.p=B,r.q!==null)return C(T,r.q);E(r.qBits,C)})}function E(T,B){forge$2.prime.generateProbablePrime(T,x,B)}function C(T,B){if(T)return _(T);if(r.q=B,r.p.compareTo(r.q)<0){var A=r.p;r.p=r.q,r.q=A}if(r.p.subtract(BigInteger$1.ONE).gcd(r.e).compareTo(BigInteger$1.ONE)!==0){r.p=null,S();return}if(r.q.subtract(BigInteger$1.ONE).gcd(r.e).compareTo(BigInteger$1.ONE)!==0){r.q=null,E(r.qBits,C);return}if(r.p1=r.p.subtract(BigInteger$1.ONE),r.q1=r.q.subtract(BigInteger$1.ONE),r.phi=r.p1.multiply(r.q1),r.phi.gcd(r.e).compareTo(BigInteger$1.ONE)!==0){r.p=r.q=null,S();return}if(r.n=r.p.multiply(r.q),r.n.bitLength()!==r.bits){r.q=null,E(r.qBits,C);return}var I=r.e.modInverse(r.phi);r.keys={privateKey:pki$1.rsa.setPrivateKey(r.n,r.e,I,r.p,r.q,I.mod(r.p1),I.mod(r.q1),r.q.modInverse(r.p)),publicKey:pki$1.rsa.setPublicKey(r.n,r.e)},_(null,r.keys)}}function _bnToBytes(r){var n=r.toString(16);n[0]>="8"&&(n="00"+n);var _=forge$2.util.hexToBytes(n);return _.length>1&&(_.charCodeAt(0)===0&&!(_.charCodeAt(1)&128)||_.charCodeAt(0)===255&&(_.charCodeAt(1)&128)===128)?_.substr(1):_}function _getMillerRabinTests(r){return r<=100?27:r<=150?18:r<=200?15:r<=250?12:r<=300?9:r<=350?8:r<=400?7:r<=500?6:r<=600?5:r<=800?4:r<=1250?3:2}function _detectNodeCrypto(r){return forge$2.util.isNodejs&&typeof _crypto[r]=="function"}function _detectSubtleCrypto(r){return typeof util$6.globalScope<"u"&&typeof util$6.globalScope.crypto=="object"&&typeof util$6.globalScope.crypto.subtle=="object"&&typeof util$6.globalScope.crypto.subtle[r]=="function"}function _detectSubtleMsCrypto(r){return typeof util$6.globalScope<"u"&&typeof util$6.globalScope.msCrypto=="object"&&typeof util$6.globalScope.msCrypto.subtle=="object"&&typeof util$6.globalScope.msCrypto.subtle[r]=="function"}function _intToUint8Array(r){for(var n=forge$2.util.hexToBytes(r.toString(16)),_=new Uint8Array(n.length),x=0;x<n.length;++x)_[x]=n.charCodeAt(x);return _}var forge$1=forge$m;if(typeof BigInteger>"u")var BigInteger=forge$1.jsbn.BigInteger;var asn1=forge$1.asn1,pki=forge$1.pki=forge$1.pki||{};pki.pbe=forge$1.pbe=forge$1.pbe||{};var oids=pki.oids,encryptedPrivateKeyValidator={name:"EncryptedPrivateKeyInfo",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},PBES2AlgorithmsValidator={name:"PBES2Algorithms",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pkcs12PbeParamsValidator={name:"pkcs-12PbeParams",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"iterations"}]};pki.encryptPrivateKeyInfo=function(r,n,_){_=_||{},_.saltSize=_.saltSize||8,_.count=_.count||2048,_.algorithm=_.algorithm||"aes128",_.prfAlgorithm=_.prfAlgorithm||"sha1";var x=forge$1.random.getBytesSync(_.saltSize),S=_.count,E=asn1.integerToDer(S),C,T,B;if(_.algorithm.indexOf("aes")===0||_.algorithm==="des"){var A,I,N;switch(_.algorithm){case"aes128":C=16,A=16,I=oids["aes128-CBC"],N=forge$1.aes.createEncryptionCipher;break;case"aes192":C=24,A=16,I=oids["aes192-CBC"],N=forge$1.aes.createEncryptionCipher;break;case"aes256":C=32,A=16,I=oids["aes256-CBC"],N=forge$1.aes.createEncryptionCipher;break;case"des":C=8,A=8,I=oids.desCBC,N=forge$1.des.createEncryptionCipher;break;default:var V=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw V.algorithm=_.algorithm,V}var D="hmacWith"+_.prfAlgorithm.toUpperCase(),O=prfAlgorithmToMessageDigest(D),F=forge$1.pkcs5.pbkdf2(n,x,S,C,O),M=forge$1.random.getBytesSync(A),L=N(F);L.start(M),L.update(asn1.toDer(r)),L.finish(),B=L.output.getBytes();var j=createPbkdf2Params(x,E,C,D);T=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids.pkcs5PBES2).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids.pkcs5PBKDF2).getBytes()),j]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(I).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,M)])])])}else if(_.algorithm==="3des"){C=24;var q=new forge$1.util.ByteBuffer(x),F=pki.pbe.generatePkcs12Key(n,q,1,S,C),M=pki.pbe.generatePkcs12Key(n,q,2,S,C),L=forge$1.des.createEncryptionCipher(F);L.start(M),L.update(asn1.toDer(r)),L.finish(),B=L.output.getBytes(),T=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,x),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,E.getBytes())])])}else{var V=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw V.algorithm=_.algorithm,V}var H=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[T,asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,B)]);return H};pki.decryptPrivateKeyInfo=function(r,n){var _=null,x={},S=[];if(!asn1.validate(r,encryptedPrivateKeyValidator,x,S)){var E=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw E.errors=S,E}var C=asn1.derToOid(x.encryptionOid),T=pki.pbe.getCipher(C,x.encryptionParams,n),B=forge$1.util.createBuffer(x.encryptedData);return T.update(B),T.finish()&&(_=asn1.fromDer(T.output)),_};pki.encryptedPrivateKeyToPem=function(r,n){var _={type:"ENCRYPTED PRIVATE KEY",body:asn1.toDer(r).getBytes()};return forge$1.pem.encode(_,{maxline:n})};pki.encryptedPrivateKeyFromPem=function(r){var n=forge$1.pem.decode(r)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"){var _=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw _.headerType=n.type,_}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return asn1.fromDer(n.body)};pki.encryptRsaPrivateKey=function(r,n,_){if(_=_||{},!_.legacy){var x=pki.wrapRsaPrivateKey(pki.privateKeyToAsn1(r));return x=pki.encryptPrivateKeyInfo(x,n,_),pki.encryptedPrivateKeyToPem(x)}var S,E,C,T;switch(_.algorithm){case"aes128":S="AES-128-CBC",C=16,E=forge$1.random.getBytesSync(16),T=forge$1.aes.createEncryptionCipher;break;case"aes192":S="AES-192-CBC",C=24,E=forge$1.random.getBytesSync(16),T=forge$1.aes.createEncryptionCipher;break;case"aes256":S="AES-256-CBC",C=32,E=forge$1.random.getBytesSync(16),T=forge$1.aes.createEncryptionCipher;break;case"3des":S="DES-EDE3-CBC",C=24,E=forge$1.random.getBytesSync(8),T=forge$1.des.createEncryptionCipher;break;case"des":S="DES-CBC",C=8,E=forge$1.random.getBytesSync(8),T=forge$1.des.createEncryptionCipher;break;default:var B=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+_.algorithm+'".');throw B.algorithm=_.algorithm,B}var A=forge$1.pbe.opensslDeriveBytes(n,E.substr(0,8),C),I=T(A);I.start(E),I.update(asn1.toDer(pki.privateKeyToAsn1(r))),I.finish();var N={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:S,parameters:forge$1.util.bytesToHex(E).toUpperCase()},body:I.output.getBytes()};return forge$1.pem.encode(N)};pki.decryptRsaPrivateKey=function(r,n){var _=null,x=forge$1.pem.decode(r)[0];if(x.type!=="ENCRYPTED PRIVATE KEY"&&x.type!=="PRIVATE KEY"&&x.type!=="RSA PRIVATE KEY"){var S=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw S.headerType=S,S}if(x.procType&&x.procType.type==="ENCRYPTED"){var E,C;switch(x.dekInfo.algorithm){case"DES-CBC":E=8,C=forge$1.des.createDecryptionCipher;break;case"DES-EDE3-CBC":E=24,C=forge$1.des.createDecryptionCipher;break;case"AES-128-CBC":E=16,C=forge$1.aes.createDecryptionCipher;break;case"AES-192-CBC":E=24,C=forge$1.aes.createDecryptionCipher;break;case"AES-256-CBC":E=32,C=forge$1.aes.createDecryptionCipher;break;case"RC2-40-CBC":E=5,C=function(N){return forge$1.rc2.createDecryptionCipher(N,40)};break;case"RC2-64-CBC":E=8,C=function(N){return forge$1.rc2.createDecryptionCipher(N,64)};break;case"RC2-128-CBC":E=16,C=function(N){return forge$1.rc2.createDecryptionCipher(N,128)};break;default:var S=new Error('Could not decrypt private key; unsupported encryption algorithm "'+x.dekInfo.algorithm+'".');throw S.algorithm=x.dekInfo.algorithm,S}var T=forge$1.util.hexToBytes(x.dekInfo.parameters),B=forge$1.pbe.opensslDeriveBytes(n,T.substr(0,8),E),A=C(B);if(A.start(T),A.update(forge$1.util.createBuffer(x.body)),A.finish())_=A.output.getBytes();else return _}else _=x.body;return x.type==="ENCRYPTED PRIVATE KEY"?_=pki.decryptPrivateKeyInfo(asn1.fromDer(_),n):_=asn1.fromDer(_),_!==null&&(_=pki.privateKeyFromAsn1(_)),_};pki.pbe.generatePkcs12Key=function(r,n,_,x,S,E){var C,T;if(typeof E>"u"||E===null){if(!("sha1"in forge$1.md))throw new Error('"sha1" hash algorithm unavailable.');E=forge$1.md.sha1.create()}var B=E.digestLength,A=E.blockLength,I=new forge$1.util.ByteBuffer,N=new forge$1.util.ByteBuffer;if(r!=null){for(T=0;T<r.length;T++)N.putInt16(r.charCodeAt(T));N.putInt16(0)}var V=N.length(),D=n.length(),O=new forge$1.util.ByteBuffer;O.fillWithByte(_,A);var F=A*Math.ceil(D/A),M=new forge$1.util.ByteBuffer;for(T=0;T<F;T++)M.putByte(n.at(T%D));var L=A*Math.ceil(V/A),j=new forge$1.util.ByteBuffer;for(T=0;T<L;T++)j.putByte(N.at(T%V));var q=M;q.putBuffer(j);for(var H=Math.ceil(S/B),X=1;X<=H;X++){var J=new forge$1.util.ByteBuffer;J.putBytes(O.bytes()),J.putBytes(q.bytes());for(var Z=0;Z<x;Z++)E.start(),E.update(J.getBytes()),J=E.digest();var ae=new forge$1.util.ByteBuffer;for(T=0;T<A;T++)ae.putByte(J.at(T%B));var ce=Math.ceil(D/A)+Math.ceil(V/A),ve=new forge$1.util.ByteBuffer;for(C=0;C<ce;C++){var pe=new forge$1.util.ByteBuffer(q.getBytes(A)),G=511;for(T=ae.length()-1;T>=0;T--)G=G>>8,G+=ae.at(T)+pe.at(T),pe.setAt(T,G&255);ve.putBuffer(pe)}q=ve,I.putBuffer(J)}return I.truncate(I.length()-S),I};pki.pbe.getCipher=function(r,n,_){switch(r){case pki.oids.pkcs5PBES2:return pki.pbe.getCipherForPBES2(r,n,_);case pki.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pki.oids["pbewithSHAAnd40BitRC2-CBC"]:return pki.pbe.getCipherForPKCS12PBE(r,n,_);default:var x=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw x.oid=r,x.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],x}};pki.pbe.getCipherForPBES2=function(r,n,_){var x={},S=[];if(!asn1.validate(n,PBES2AlgorithmsValidator,x,S)){var E=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw E.errors=S,E}if(r=asn1.derToOid(x.kdfOid),r!==pki.oids.pkcs5PBKDF2){var E=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw E.oid=r,E.supportedOids=["pkcs5PBKDF2"],E}if(r=asn1.derToOid(x.encOid),r!==pki.oids["aes128-CBC"]&&r!==pki.oids["aes192-CBC"]&&r!==pki.oids["aes256-CBC"]&&r!==pki.oids["des-EDE3-CBC"]&&r!==pki.oids.desCBC){var E=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw E.oid=r,E.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],E}var C=x.kdfSalt,T=forge$1.util.createBuffer(x.kdfIterationCount);T=T.getInt(T.length()<<3);var B,A;switch(pki.oids[r]){case"aes128-CBC":B=16,A=forge$1.aes.createDecryptionCipher;break;case"aes192-CBC":B=24,A=forge$1.aes.createDecryptionCipher;break;case"aes256-CBC":B=32,A=forge$1.aes.createDecryptionCipher;break;case"des-EDE3-CBC":B=24,A=forge$1.des.createDecryptionCipher;break;case"desCBC":B=8,A=forge$1.des.createDecryptionCipher;break}var I=prfOidToMessageDigest(x.prfOid),N=forge$1.pkcs5.pbkdf2(_,C,T,B,I),V=x.encIv,D=A(N);return D.start(V),D};pki.pbe.getCipherForPKCS12PBE=function(r,n,_){var x={},S=[];if(!asn1.validate(n,pkcs12PbeParamsValidator,x,S)){var E=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw E.errors=S,E}var C=forge$1.util.createBuffer(x.salt),T=forge$1.util.createBuffer(x.iterations);T=T.getInt(T.length()<<3);var B,A,I;switch(r){case pki.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:B=24,A=8,I=forge$1.des.startDecrypting;break;case pki.oids["pbewithSHAAnd40BitRC2-CBC"]:B=5,A=8,I=function(F,M){var L=forge$1.rc2.createDecryptionCipher(F,40);return L.start(M,null),L};break;default:var E=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw E.oid=r,E}var N=prfOidToMessageDigest(x.prfOid),V=pki.pbe.generatePkcs12Key(_,C,1,T,B,N);N.start();var D=pki.pbe.generatePkcs12Key(_,C,2,T,A,N);return I(V,D)};pki.pbe.opensslDeriveBytes=function(r,n,_,x){if(typeof x>"u"||x===null){if(!("md5"in forge$1.md))throw new Error('"md5" hash algorithm unavailable.');x=forge$1.md.md5.create()}n===null&&(n="");for(var S=[hash$1(x,r+n)],E=16,C=1;E<_;++C,E+=16)S.push(hash$1(x,S[C-1]+r+n));return S.join("").substr(0,_)};function hash$1(r,n){return r.start().update(n).digest().getBytes()}function prfOidToMessageDigest(r){var n;if(!r)n="hmacWithSHA1";else if(n=pki.oids[asn1.derToOid(r)],!n){var _=new Error("Unsupported PRF OID.");throw _.oid=r,_.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],_}return prfAlgorithmToMessageDigest(n)}function prfAlgorithmToMessageDigest(r){var n=forge$1.md;switch(r){case"hmacWithSHA224":n=forge$1.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":r=r.substr(8).toLowerCase();break;default:var _=new Error("Unsupported PRF algorithm.");throw _.algorithm=r,_.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],_}if(!n||!(r in n))throw new Error("Unknown hash algorithm: "+r);return n[r].create()}function createPbkdf2Params(r,n,_,x){var S=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,r),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,n.getBytes())]);return x!=="hmacWithSHA1"&&S.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge$1.util.hexToBytes(_.toString(16))),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(pki.oids[x]).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])),S}const code$3=0,name$1="identity",encode$c=coerce$2,digest=r=>create$5(code$3,encode$c(r)),identity$2={code:code$3,name:name$1,encode:encode$c,digest};function equals$2(r,n){if(r===n)return!0;if(r.byteLength!==n.byteLength)return!1;for(let _=0;_<r.byteLength;_++)if(r[_]!==n[_])return!1;return!0}function number(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function bytes(r,...n){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(n.length>0&&!n.includes(r.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${r.length}`)}function hash(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number(r.outputLen),number(r.blockLen)}function exists(r,n=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(n&&r.finished)throw new Error("Hash#digest() has already been called")}function output(r,n){bytes(r);const _=n.outputLen;if(r.length<_)throw new Error(`digestInto() expects output buffer of length at least ${_}`)}const crypto$1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a$1=r=>r instanceof Uint8Array,createView=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),rotr=(r,n)=>r<<32-n|r>>>n,isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes$2(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function toBytes(r){if(typeof r=="string"&&(r=utf8ToBytes$2(r)),!u8a$1(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function concatBytes$1(...r){const n=new Uint8Array(r.reduce((x,S)=>x+S.length,0));let _=0;return r.forEach(x=>{if(!u8a$1(x))throw new Error("Uint8Array expected");n.set(x,_),_+=x.length}),n}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(r){const n=x=>r().update(toBytes(x)).digest(),_=r();return n.outputLen=_.outputLen,n.blockLen=_.blockLen,n.create=()=>r(),n}function randomBytes$1(r=32){if(crypto$1&&typeof crypto$1.getRandomValues=="function")return crypto$1.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64(r,n,_,x){if(typeof r.setBigUint64=="function")return r.setBigUint64(n,_,x);const S=BigInt(32),E=BigInt(4294967295),C=Number(_>>S&E),T=Number(_&E),B=x?4:0,A=x?0:4;r.setUint32(n+B,C,x),r.setUint32(n+A,T,x)}class SHA2 extends Hash{constructor(n,_,x,S){super(),this.blockLen=n,this.outputLen=_,this.padOffset=x,this.isLE=S,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(n),this.view=createView(this.buffer)}update(n){exists(this);const{view:_,buffer:x,blockLen:S}=this;n=toBytes(n);const E=n.length;for(let C=0;C<E;){const T=Math.min(S-this.pos,E-C);if(T===S){const B=createView(n);for(;S<=E-C;C+=S)this.process(B,C);continue}x.set(n.subarray(C,C+T),this.pos),this.pos+=T,C+=T,this.pos===S&&(this.process(_,0),this.pos=0)}return this.length+=n.length,this.roundClean(),this}digestInto(n){exists(this),output(n,this),this.finished=!0;const{buffer:_,view:x,blockLen:S,isLE:E}=this;let{pos:C}=this;_[C++]=128,this.buffer.subarray(C).fill(0),this.padOffset>S-C&&(this.process(x,0),C=0);for(let N=C;N<S;N++)_[N]=0;setBigUint64(x,S-8,BigInt(this.length*8),E),this.process(x,0);const T=createView(n),B=this.outputLen;if(B%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const A=B/4,I=this.get();if(A>I.length)throw new Error("_sha2: outputLen bigger than state");for(let N=0;N<A;N++)T.setUint32(4*N,I[N],E)}digest(){const{buffer:n,outputLen:_}=this;this.digestInto(n);const x=n.slice(0,_);return this.destroy(),x}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:_,buffer:x,length:S,finished:E,destroyed:C,pos:T}=this;return n.length=S,n.pos=T,n.finished=E,n.destroyed=C,S%_&&n.buffer.set(x),n}}const U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(r,n=!1){return n?{h:Number(r&U32_MASK64),l:Number(r>>_32n&U32_MASK64)}:{h:Number(r>>_32n&U32_MASK64)|0,l:Number(r&U32_MASK64)|0}}function split(r,n=!1){let _=new Uint32Array(r.length),x=new Uint32Array(r.length);for(let S=0;S<r.length;S++){const{h:E,l:C}=fromBig(r[S],n);[_[S],x[S]]=[E,C]}return[_,x]}const toBig=(r,n)=>BigInt(r>>>0)<<_32n|BigInt(n>>>0),shrSH=(r,n,_)=>r>>>_,shrSL=(r,n,_)=>r<<32-_|n>>>_,rotrSH=(r,n,_)=>r>>>_|n<<32-_,rotrSL=(r,n,_)=>r<<32-_|n>>>_,rotrBH=(r,n,_)=>r<<64-_|n>>>_-32,rotrBL=(r,n,_)=>r>>>_-32|n<<64-_,rotr32H=(r,n)=>n,rotr32L=(r,n)=>r,rotlSH=(r,n,_)=>r<<_|n>>>32-_,rotlSL=(r,n,_)=>n<<_|r>>>32-_,rotlBH=(r,n,_)=>n<<_-32|r>>>64-_,rotlBL=(r,n,_)=>r<<_-32|n>>>64-_;function add$1(r,n,_,x){const S=(n>>>0)+(x>>>0);return{h:r+_+(S/2**32|0)|0,l:S|0}}const add3L=(r,n,_)=>(r>>>0)+(n>>>0)+(_>>>0),add3H=(r,n,_,x)=>n+_+x+(r/2**32|0)|0,add4L=(r,n,_,x)=>(r>>>0)+(n>>>0)+(_>>>0)+(x>>>0),add4H=(r,n,_,x,S)=>n+_+x+S+(r/2**32|0)|0,add5L=(r,n,_,x,S)=>(r>>>0)+(n>>>0)+(_>>>0)+(x>>>0)+(S>>>0),add5H=(r,n,_,x,S,E)=>n+_+x+S+E+(r/2**32|0)|0,u64={fromBig,split,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add:add$1,add3L,add3H,add4L,add4H,add5H,add5L},u64$1=u64,[SHA512_Kh,SHA512_Kl]=(()=>u64$1.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))))(),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);class SHA512 extends SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:n,Al:_,Bh:x,Bl:S,Ch:E,Cl:C,Dh:T,Dl:B,Eh:A,El:I,Fh:N,Fl:V,Gh:D,Gl:O,Hh:F,Hl:M}=this;return[n,_,x,S,E,C,T,B,A,I,N,V,D,O,F,M]}set(n,_,x,S,E,C,T,B,A,I,N,V,D,O,F,M){this.Ah=n|0,this.Al=_|0,this.Bh=x|0,this.Bl=S|0,this.Ch=E|0,this.Cl=C|0,this.Dh=T|0,this.Dl=B|0,this.Eh=A|0,this.El=I|0,this.Fh=N|0,this.Fl=V|0,this.Gh=D|0,this.Gl=O|0,this.Hh=F|0,this.Hl=M|0}process(n,_){for(let q=0;q<16;q++,_+=4)SHA512_W_H[q]=n.getUint32(_),SHA512_W_L[q]=n.getUint32(_+=4);for(let q=16;q<80;q++){const H=SHA512_W_H[q-15]|0,X=SHA512_W_L[q-15]|0,J=u64$1.rotrSH(H,X,1)^u64$1.rotrSH(H,X,8)^u64$1.shrSH(H,X,7),Z=u64$1.rotrSL(H,X,1)^u64$1.rotrSL(H,X,8)^u64$1.shrSL(H,X,7),ae=SHA512_W_H[q-2]|0,ce=SHA512_W_L[q-2]|0,ve=u64$1.rotrSH(ae,ce,19)^u64$1.rotrBH(ae,ce,61)^u64$1.shrSH(ae,ce,6),pe=u64$1.rotrSL(ae,ce,19)^u64$1.rotrBL(ae,ce,61)^u64$1.shrSL(ae,ce,6),G=u64$1.add4L(Z,pe,SHA512_W_L[q-7],SHA512_W_L[q-16]),Y=u64$1.add4H(G,J,ve,SHA512_W_H[q-7],SHA512_W_H[q-16]);SHA512_W_H[q]=Y|0,SHA512_W_L[q]=G|0}let{Ah:x,Al:S,Bh:E,Bl:C,Ch:T,Cl:B,Dh:A,Dl:I,Eh:N,El:V,Fh:D,Fl:O,Gh:F,Gl:M,Hh:L,Hl:j}=this;for(let q=0;q<80;q++){const H=u64$1.rotrSH(N,V,14)^u64$1.rotrSH(N,V,18)^u64$1.rotrBH(N,V,41),X=u64$1.rotrSL(N,V,14)^u64$1.rotrSL(N,V,18)^u64$1.rotrBL(N,V,41),J=N&D^~N&F,Z=V&O^~V&M,ae=u64$1.add5L(j,X,Z,SHA512_Kl[q],SHA512_W_L[q]),ce=u64$1.add5H(ae,L,H,J,SHA512_Kh[q],SHA512_W_H[q]),ve=ae|0,pe=u64$1.rotrSH(x,S,28)^u64$1.rotrBH(x,S,34)^u64$1.rotrBH(x,S,39),G=u64$1.rotrSL(x,S,28)^u64$1.rotrBL(x,S,34)^u64$1.rotrBL(x,S,39),Y=x&E^x&T^E&T,U=S&C^S&B^C&B;L=F|0,j=M|0,F=D|0,M=O|0,D=N|0,O=V|0,{h:N,l:V}=u64$1.add(A|0,I|0,ce|0,ve|0),A=T|0,I=B|0,T=E|0,B=C|0,E=x|0,C=S|0;const W=u64$1.add3L(ve,G,U);x=u64$1.add3H(W,ce,pe,Y),S=W|0}({h:x,l:S}=u64$1.add(this.Ah|0,this.Al|0,x|0,S|0)),{h:E,l:C}=u64$1.add(this.Bh|0,this.Bl|0,E|0,C|0),{h:T,l:B}=u64$1.add(this.Ch|0,this.Cl|0,T|0,B|0),{h:A,l:I}=u64$1.add(this.Dh|0,this.Dl|0,A|0,I|0),{h:N,l:V}=u64$1.add(this.Eh|0,this.El|0,N|0,V|0),{h:D,l:O}=u64$1.add(this.Fh|0,this.Fl|0,D|0,O|0),{h:F,l:M}=u64$1.add(this.Gh|0,this.Gl|0,F|0,M|0),{h:L,l:j}=u64$1.add(this.Hh|0,this.Hl|0,L|0,j|0),this.set(x,S,E,C,T,B,A,I,N,V,D,O,F,M,L,j)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sha512$1=wrapConstructor(()=>new SHA512);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$4=BigInt(0),_1n$6=BigInt(1),_2n$4=BigInt(2),u8a=r=>r instanceof Uint8Array,hexes=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));function bytesToHex(r){if(!u8a(r))throw new Error("Uint8Array expected");let n="";for(let _=0;_<r.length;_++)n+=hexes[r[_]];return n}function numberToHexUnpadded(r){const n=r.toString(16);return n.length&1?`0${n}`:n}function hexToNumber(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function hexToBytes(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const n=r.length;if(n%2)throw new Error("padded hex string expected, got unpadded hex of length "+n);const _=new Uint8Array(n/2);for(let x=0;x<_.length;x++){const S=x*2,E=r.slice(S,S+2),C=Number.parseInt(E,16);if(Number.isNaN(C)||C<0)throw new Error("Invalid byte sequence");_[x]=C}return _}function bytesToNumberBE(r){return hexToNumber(bytesToHex(r))}function bytesToNumberLE(r){if(!u8a(r))throw new Error("Uint8Array expected");return hexToNumber(bytesToHex(Uint8Array.from(r).reverse()))}function numberToBytesBE(r,n){return hexToBytes(r.toString(16).padStart(n*2,"0"))}function numberToBytesLE(r,n){return numberToBytesBE(r,n).reverse()}function numberToVarBytesBE(r){return hexToBytes(numberToHexUnpadded(r))}function ensureBytes(r,n,_){let x;if(typeof n=="string")try{x=hexToBytes(n)}catch(E){throw new Error(`${r} must be valid hex string, got "${n}". Cause: ${E}`)}else if(u8a(n))x=Uint8Array.from(n);else throw new Error(`${r} must be hex string or Uint8Array`);const S=x.length;if(typeof _=="number"&&S!==_)throw new Error(`${r} expected ${_} bytes, got ${S}`);return x}function concatBytes(...r){const n=new Uint8Array(r.reduce((x,S)=>x+S.length,0));let _=0;return r.forEach(x=>{if(!u8a(x))throw new Error("Uint8Array expected");n.set(x,_),_+=x.length}),n}function equalBytes(r,n){if(r.length!==n.length)return!1;for(let _=0;_<r.length;_++)if(r[_]!==n[_])return!1;return!0}function utf8ToBytes$1(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function bitLen(r){let n;for(n=0;r>_0n$4;r>>=_1n$6,n+=1);return n}function bitGet(r,n){return r>>BigInt(n)&_1n$6}const bitSet=(r,n,_)=>r|(_?_1n$6:_0n$4)<<BigInt(n),bitMask=r=>(_2n$4<<BigInt(r-1))-_1n$6,u8n=r=>new Uint8Array(r),u8fr=r=>Uint8Array.from(r);function createHmacDrbg(r,n,_){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");if(typeof _!="function")throw new Error("hmacFn must be a function");let x=u8n(r),S=u8n(r),E=0;const C=()=>{x.fill(1),S.fill(0),E=0},T=(...N)=>_(S,x,...N),B=(N=u8n())=>{S=T(u8fr([0]),N),x=T(),N.length!==0&&(S=T(u8fr([1]),N),x=T())},A=()=>{if(E++>=1e3)throw new Error("drbg: tried 1000 values");let N=0;const V=[];for(;N<n;){x=T();const D=x.slice();V.push(D),N+=x.length}return concatBytes(...V)};return(N,V)=>{C(),B(N);let D;for(;!(D=V(A()));)B();return C(),D}}const validatorFns={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,n)=>n.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function validateObject(r,n,_={}){const x=(S,E,C)=>{const T=validatorFns[E];if(typeof T!="function")throw new Error(`Invalid validator "${E}", expected function`);const B=r[S];if(!(C&&B===void 0)&&!T(B,r))throw new Error(`Invalid param ${String(S)}=${B} (${typeof B}), expected ${E}`)};for(const[S,E]of Object.entries(n))x(S,E,!1);for(const[S,E]of Object.entries(_))x(S,E,!0);return r}const ut=Object.freeze(Object.defineProperty({__proto__:null,bitGet,bitLen,bitMask,bitSet,bytesToHex,bytesToNumberBE,bytesToNumberLE,concatBytes,createHmacDrbg,ensureBytes,equalBytes,hexToBytes,hexToNumber,numberToBytesBE,numberToBytesLE,numberToHexUnpadded,numberToVarBytesBE,utf8ToBytes:utf8ToBytes$1,validateObject},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$5=BigInt(1),_2n$3=BigInt(2),_3n$1=BigInt(3),_4n=BigInt(4),_5n$1=BigInt(5),_8n$1=BigInt(8);BigInt(9);BigInt(16);function mod(r,n){const _=r%n;return _>=_0n$3?_:n+_}function pow(r,n,_){if(_<=_0n$3||n<_0n$3)throw new Error("Expected power/modulo > 0");if(_===_1n$5)return _0n$3;let x=_1n$5;for(;n>_0n$3;)n&_1n$5&&(x=x*r%_),r=r*r%_,n>>=_1n$5;return x}function pow2(r,n,_){let x=r;for(;n-- >_0n$3;)x*=x,x%=_;return x}function invert(r,n){if(r===_0n$3||n<=_0n$3)throw new Error(`invert: expected positive integers, got n=${r} mod=${n}`);let _=mod(r,n),x=n,S=_0n$3,E=_1n$5;for(;_!==_0n$3;){const T=x/_,B=x%_,A=S-E*T;x=_,_=B,S=E,E=A}if(x!==_1n$5)throw new Error("invert: does not exist");return mod(S,n)}function tonelliShanks(r){const n=(r-_1n$5)/_2n$3;let _,x,S;for(_=r-_1n$5,x=0;_%_2n$3===_0n$3;_/=_2n$3,x++);for(S=_2n$3;S<r&&pow(S,n,r)!==r-_1n$5;S++);if(x===1){const C=(r+_1n$5)/_4n;return function(B,A){const I=B.pow(A,C);if(!B.eql(B.sqr(I),A))throw new Error("Cannot find square root");return I}}const E=(_+_1n$5)/_2n$3;return function(T,B){if(T.pow(B,n)===T.neg(T.ONE))throw new Error("Cannot find square root");let A=x,I=T.pow(T.mul(T.ONE,S),_),N=T.pow(B,E),V=T.pow(B,_);for(;!T.eql(V,T.ONE);){if(T.eql(V,T.ZERO))return T.ZERO;let D=1;for(let F=T.sqr(V);D<A&&!T.eql(F,T.ONE);D++)F=T.sqr(F);const O=T.pow(I,_1n$5<<BigInt(A-D-1));I=T.sqr(O),N=T.mul(N,O),V=T.mul(V,I),A=D}return N}}function FpSqrt(r){if(r%_4n===_3n$1){const n=(r+_1n$5)/_4n;return function(x,S){const E=x.pow(S,n);if(!x.eql(x.sqr(E),S))throw new Error("Cannot find square root");return E}}if(r%_8n$1===_5n$1){const n=(r-_5n$1)/_8n$1;return function(x,S){const E=x.mul(S,_2n$3),C=x.pow(E,n),T=x.mul(S,C),B=x.mul(x.mul(T,_2n$3),C),A=x.mul(T,x.sub(B,x.ONE));if(!x.eql(x.sqr(A),S))throw new Error("Cannot find square root");return A}}return tonelliShanks(r)}const isNegativeLE=(r,n)=>(mod(r,n)&_1n$5)===_1n$5,FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(r){const n={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},_=FIELD_FIELDS.reduce((x,S)=>(x[S]="function",x),n);return validateObject(r,_)}function FpPow(r,n,_){if(_<_0n$3)throw new Error("Expected power > 0");if(_===_0n$3)return r.ONE;if(_===_1n$5)return n;let x=r.ONE,S=n;for(;_>_0n$3;)_&_1n$5&&(x=r.mul(x,S)),S=r.sqr(S),_>>=_1n$5;return x}function FpInvertBatch(r,n){const _=new Array(n.length),x=n.reduce((E,C,T)=>r.is0(C)?E:(_[T]=E,r.mul(E,C)),r.ONE),S=r.inv(x);return n.reduceRight((E,C,T)=>r.is0(C)?E:(_[T]=r.mul(E,_[T]),r.mul(E,C)),S),_}function nLength(r,n){const _=n!==void 0?n:r.toString(2).length,x=Math.ceil(_/8);return{nBitLength:_,nByteLength:x}}function Field(r,n,_=!1,x={}){if(r<=_0n$3)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:S,nByteLength:E}=nLength(r,n);if(E>2048)throw new Error("Field lengths over 2048 bytes are not supported");const C=FpSqrt(r),T=Object.freeze({ORDER:r,BITS:S,BYTES:E,MASK:bitMask(S),ZERO:_0n$3,ONE:_1n$5,create:B=>mod(B,r),isValid:B=>{if(typeof B!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof B}`);return _0n$3<=B&&B<r},is0:B=>B===_0n$3,isOdd:B=>(B&_1n$5)===_1n$5,neg:B=>mod(-B,r),eql:(B,A)=>B===A,sqr:B=>mod(B*B,r),add:(B,A)=>mod(B+A,r),sub:(B,A)=>mod(B-A,r),mul:(B,A)=>mod(B*A,r),pow:(B,A)=>FpPow(T,B,A),div:(B,A)=>mod(B*invert(A,r),r),sqrN:B=>B*B,addN:(B,A)=>B+A,subN:(B,A)=>B-A,mulN:(B,A)=>B*A,inv:B=>invert(B,r),sqrt:x.sqrt||(B=>C(T,B)),invertBatch:B=>FpInvertBatch(T,B),cmov:(B,A,I)=>I?A:B,toBytes:B=>_?numberToBytesLE(B,E):numberToBytesBE(B,E),fromBytes:B=>{if(B.length!==E)throw new Error(`Fp.fromBytes: expected ${E}, got ${B.length}`);return _?bytesToNumberLE(B):bytesToNumberBE(B)}});return Object.freeze(T)}function FpSqrtEven(r,n){if(!r.isOdd)throw new Error("Field doesn't have isOdd");const _=r.sqrt(n);return r.isOdd(_)?r.neg(_):_}function getFieldBytesLength(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const n=r.toString(2).length;return Math.ceil(n/8)}function getMinHashLength(r){const n=getFieldBytesLength(r);return n+Math.ceil(n/2)}function mapHashToField(r,n,_=!1){const x=r.length,S=getFieldBytesLength(n),E=getMinHashLength(n);if(x<16||x<E||x>1024)throw new Error(`expected ${E}-1024 bytes of input, got ${x}`);const C=_?bytesToNumberBE(r):bytesToNumberLE(r),T=mod(C,n-_1n$5)+_1n$5;return _?numberToBytesLE(T,S):numberToBytesBE(T,S)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0),_1n$4=BigInt(1);function wNAF(r,n){const _=(S,E)=>{const C=E.negate();return S?C:E},x=S=>{const E=Math.ceil(n/S)+1,C=2**(S-1);return{windows:E,windowSize:C}};return{constTimeNegate:_,unsafeLadder(S,E){let C=r.ZERO,T=S;for(;E>_0n$2;)E&_1n$4&&(C=C.add(T)),T=T.double(),E>>=_1n$4;return C},precomputeWindow(S,E){const{windows:C,windowSize:T}=x(E),B=[];let A=S,I=A;for(let N=0;N<C;N++){I=A,B.push(I);for(let V=1;V<T;V++)I=I.add(A),B.push(I);A=I.double()}return B},wNAF(S,E,C){const{windows:T,windowSize:B}=x(S);let A=r.ZERO,I=r.BASE;const N=BigInt(2**S-1),V=2**S,D=BigInt(S);for(let O=0;O<T;O++){const F=O*B;let M=Number(C&N);C>>=D,M>B&&(M-=V,C+=_1n$4);const L=F,j=F+Math.abs(M)-1,q=O%2!==0,H=M<0;M===0?I=I.add(_(q,E[L])):A=A.add(_(H,E[j]))}return{p:A,f:I}},wNAFCached(S,E,C,T){const B=S._WINDOW_SIZE||1;let A=E.get(S);return A||(A=this.precomputeWindow(S,B),B!==1&&E.set(S,T(A))),this.wNAF(B,A,C)}}}function validateBasic(r){return validateField(r.Fp),validateObject(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$1=BigInt(0),_1n$3=BigInt(1),_2n$2=BigInt(2),_8n=BigInt(8),VERIFY_DEFAULT={zip215:!0};function validateOpts$1(r){const n=validateBasic(r);return validateObject(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...n})}function twistedEdwards(r){const n=validateOpts$1(r),{Fp:_,n:x,prehash:S,hash:E,randomBytes:C,nByteLength:T,h:B}=n,A=_2n$2<<BigInt(T*8)-_1n$3,I=_.create,N=n.uvRatio||((oe,ie)=>{try{return{isValid:!0,value:_.sqrt(oe*_.inv(ie))}}catch{return{isValid:!1,value:_0n$1}}}),V=n.adjustScalarBytes||(oe=>oe),D=n.domain||((oe,ie,ne)=>{if(ie.length||ne)throw new Error("Contexts/pre-hash are not supported");return oe}),O=oe=>typeof oe=="bigint"&&_0n$1<oe,F=(oe,ie)=>O(oe)&&O(ie)&&oe<ie,M=oe=>oe===_0n$1||F(oe,A);function L(oe,ie){if(F(oe,ie))return oe;throw new Error(`Expected valid scalar < ${ie}, got ${typeof oe} ${oe}`)}function j(oe){return oe===_0n$1?oe:L(oe,x)}const q=new Map;function H(oe){if(!(oe instanceof X))throw new Error("ExtendedPoint expected")}class X{constructor(ie,ne,te,K){if(this.ex=ie,this.ey=ne,this.ez=te,this.et=K,!M(ie))throw new Error("x required");if(!M(ne))throw new Error("y required");if(!M(te))throw new Error("z required");if(!M(K))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(ie){if(ie instanceof X)throw new Error("extended point not allowed");const{x:ne,y:te}=ie||{};if(!M(ne)||!M(te))throw new Error("invalid affine point");return new X(ne,te,_1n$3,I(ne*te))}static normalizeZ(ie){const ne=_.invertBatch(ie.map(te=>te.ez));return ie.map((te,K)=>te.toAffine(ne[K])).map(X.fromAffine)}_setWindowSize(ie){this._WINDOW_SIZE=ie,q.delete(this)}assertValidity(){const{a:ie,d:ne}=n;if(this.is0())throw new Error("bad point: ZERO");const{ex:te,ey:K,ez:le,et:ue}=this,be=I(te*te),ge=I(K*K),ye=I(le*le),Ee=I(ye*ye),Re=I(be*ie),Ne=I(ye*I(Re+ge)),Te=I(Ee+I(ne*I(be*ge)));if(Ne!==Te)throw new Error("bad point: equation left != right (1)");const he=I(te*K),xe=I(le*ue);if(he!==xe)throw new Error("bad point: equation left != right (2)")}equals(ie){H(ie);const{ex:ne,ey:te,ez:K}=this,{ex:le,ey:ue,ez:be}=ie,ge=I(ne*be),ye=I(le*K),Ee=I(te*be),Re=I(ue*K);return ge===ye&&Ee===Re}is0(){return this.equals(X.ZERO)}negate(){return new X(I(-this.ex),this.ey,this.ez,I(-this.et))}double(){const{a:ie}=n,{ex:ne,ey:te,ez:K}=this,le=I(ne*ne),ue=I(te*te),be=I(_2n$2*I(K*K)),ge=I(ie*le),ye=ne+te,Ee=I(I(ye*ye)-le-ue),Re=ge+ue,Ne=Re-be,Te=ge-ue,he=I(Ee*Ne),xe=I(Re*Te),fe=I(Ee*Te),Be=I(Ne*Re);return new X(he,xe,Be,fe)}add(ie){H(ie);const{a:ne,d:te}=n,{ex:K,ey:le,ez:ue,et:be}=this,{ex:ge,ey:ye,ez:Ee,et:Re}=ie;if(ne===BigInt(-1)){const Ue=I((le-K)*(ye+ge)),Ge=I((le+K)*(ye-ge)),et=I(Ge-Ue);if(et===_0n$1)return this.double();const ot=I(ue*_2n$2*Re),ht=I(be*_2n$2*Ee),Oe=ht+ot,we=Ge+Ue,Ce=ht-ot,ze=I(Oe*et),Ze=I(we*Ce),st=I(Oe*Ce),rt=I(et*we);return new X(ze,Ze,rt,st)}const Ne=I(K*ge),Te=I(le*ye),he=I(be*te*Re),xe=I(ue*Ee),fe=I((K+le)*(ge+ye)-Ne-Te),Be=xe-he,Le=xe+he,Ve=I(Te-ne*Ne),Ie=I(fe*Be),Me=I(Le*Ve),He=I(fe*Ve),We=I(Be*Le);return new X(Ie,Me,We,He)}subtract(ie){return this.add(ie.negate())}wNAF(ie){return ae.wNAFCached(this,q,ie,X.normalizeZ)}multiply(ie){const{p:ne,f:te}=this.wNAF(L(ie,x));return X.normalizeZ([ne,te])[0]}multiplyUnsafe(ie){let ne=j(ie);return ne===_0n$1?Z:this.equals(Z)||ne===_1n$3?this:this.equals(J)?this.wNAF(ne).p:ae.unsafeLadder(this,ne)}isSmallOrder(){return this.multiplyUnsafe(B).is0()}isTorsionFree(){return ae.unsafeLadder(this,x).is0()}toAffine(ie){const{ex:ne,ey:te,ez:K}=this,le=this.is0();ie==null&&(ie=le?_8n:_.inv(K));const ue=I(ne*ie),be=I(te*ie),ge=I(K*ie);if(le)return{x:_0n$1,y:_1n$3};if(ge!==_1n$3)throw new Error("invZ was invalid");return{x:ue,y:be}}clearCofactor(){const{h:ie}=n;return ie===_1n$3?this:this.multiplyUnsafe(ie)}static fromHex(ie,ne=!1){const{d:te,a:K}=n,le=_.BYTES;ie=ensureBytes("pointHex",ie,le);const ue=ie.slice(),be=ie[le-1];ue[le-1]=be&-129;const ge=bytesToNumberLE(ue);ge===_0n$1||(ne?L(ge,A):L(ge,_.ORDER));const ye=I(ge*ge),Ee=I(ye-_1n$3),Re=I(te*ye-K);let{isValid:Ne,value:Te}=N(Ee,Re);if(!Ne)throw new Error("Point.fromHex: invalid y coordinate");const he=(Te&_1n$3)===_1n$3,xe=(be&128)!==0;if(!ne&&Te===_0n$1&&xe)throw new Error("Point.fromHex: x=0 and x_0=1");return xe!==he&&(Te=I(-Te)),X.fromAffine({x:Te,y:ge})}static fromPrivateKey(ie){return pe(ie).point}toRawBytes(){const{x:ie,y:ne}=this.toAffine(),te=numberToBytesLE(ne,_.BYTES);return te[te.length-1]|=ie&_1n$3?128:0,te}toHex(){return bytesToHex(this.toRawBytes())}}X.BASE=new X(n.Gx,n.Gy,_1n$3,I(n.Gx*n.Gy)),X.ZERO=new X(_0n$1,_1n$3,_1n$3,_0n$1);const{BASE:J,ZERO:Z}=X,ae=wNAF(X,T*8);function ce(oe){return mod(oe,x)}function ve(oe){return ce(bytesToNumberLE(oe))}function pe(oe){const ie=T;oe=ensureBytes("private key",oe,ie);const ne=ensureBytes("hashed private key",E(oe),2*ie),te=V(ne.slice(0,ie)),K=ne.slice(ie,2*ie),le=ve(te),ue=J.multiply(le),be=ue.toRawBytes();return{head:te,prefix:K,scalar:le,point:ue,pointBytes:be}}function G(oe){return pe(oe).pointBytes}function Y(oe=new Uint8Array,...ie){const ne=concatBytes(...ie);return ve(E(D(ne,ensureBytes("context",oe),!!S)))}function U(oe,ie,ne={}){oe=ensureBytes("message",oe),S&&(oe=S(oe));const{prefix:te,scalar:K,pointBytes:le}=pe(ie),ue=Y(ne.context,te,oe),be=J.multiply(ue).toRawBytes(),ge=Y(ne.context,be,le,oe),ye=ce(ue+ge*K);j(ye);const Ee=concatBytes(be,numberToBytesLE(ye,_.BYTES));return ensureBytes("result",Ee,T*2)}const W=VERIFY_DEFAULT;function ee(oe,ie,ne,te=W){const{context:K,zip215:le}=te,ue=_.BYTES;oe=ensureBytes("signature",oe,2*ue),ie=ensureBytes("message",ie),S&&(ie=S(ie));const be=bytesToNumberLE(oe.slice(ue,2*ue));let ge,ye,Ee;try{ge=X.fromHex(ne,le),ye=X.fromHex(oe.slice(0,ue),le),Ee=J.multiplyUnsafe(be)}catch{return!1}if(!le&&ge.isSmallOrder())return!1;const Re=Y(K,ye.toRawBytes(),ge.toRawBytes(),ie);return ye.add(ge.multiplyUnsafe(Re)).subtract(Ee).clearCofactor().equals(X.ZERO)}return J._setWindowSize(8),{CURVE:n,getPublicKey:G,sign:U,verify:ee,ExtendedPoint:X,utils:{getExtendedPublicKey:pe,randomPrivateKey:()=>C(_.BYTES),precompute(oe=8,ie=X.BASE){return ie._setWindowSize(oe),ie.multiply(BigInt(3)),ie}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ED25519_P=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ED25519_SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _1n$2=BigInt(1),_2n$1=BigInt(2),_5n=BigInt(5),_10n=BigInt(10),_20n=BigInt(20),_40n=BigInt(40),_80n=BigInt(80);function ed25519_pow_2_252_3(r){const n=ED25519_P,x=r*r%n*r%n,S=pow2(x,_2n$1,n)*x%n,E=pow2(S,_1n$2,n)*r%n,C=pow2(E,_5n,n)*E%n,T=pow2(C,_10n,n)*C%n,B=pow2(T,_20n,n)*T%n,A=pow2(B,_40n,n)*B%n,I=pow2(A,_80n,n)*A%n,N=pow2(I,_80n,n)*A%n,V=pow2(N,_10n,n)*C%n;return{pow_p_5_8:pow2(V,_2n$1,n)*r%n,b2:x}}function adjustScalarBytes(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function uvRatio(r,n){const _=ED25519_P,x=mod(n*n*n,_),S=mod(x*x*n,_),E=ed25519_pow_2_252_3(r*S).pow_p_5_8;let C=mod(r*x*E,_);const T=mod(n*C*C,_),B=C,A=mod(C*ED25519_SQRT_M1,_),I=T===r,N=T===mod(-r,_),V=T===mod(-r*ED25519_SQRT_M1,_);return I&&(C=B),(N||V)&&(C=A),isNegativeLE(C,_)&&(C=mod(-C,_)),{isValid:I||N,value:C}}const Fp$1=Field(ED25519_P,void 0,!0),ed25519Defaults={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Fp$1,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sha512$1,randomBytes:randomBytes$1,adjustScalarBytes,uvRatio},ed25519=twistedEdwards(ed25519Defaults),ELL2_C1=(Fp$1.ORDER+BigInt(3))/BigInt(8);Fp$1.pow(_2n$1,ELL2_C1);Fp$1.sqrt(Fp$1.neg(Fp$1.ONE));(Fp$1.ORDER-BigInt(5))/BigInt(8);BigInt(486662);FpSqrtEven(Fp$1,Fp$1.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const PUBLIC_KEY_BYTE_LENGTH=32,PRIVATE_KEY_BYTE_LENGTH=64,KEYS_BYTE_LENGTH=32;async function generateKey$2(){const r=ed25519.utils.randomPrivateKey(),n=ed25519.getPublicKey(r);return{privateKey:concatKeys(r,n),publicKey:n}}async function generateKeyFromSeed(r){if(r.length!==KEYS_BYTE_LENGTH)throw new TypeError('"seed" must be 32 bytes in length.');if(!(r instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const n=r,_=ed25519.getPublicKey(n);return{privateKey:concatKeys(n,_),publicKey:_}}async function hashAndSign$2(r,n){const _=r.subarray(0,KEYS_BYTE_LENGTH);return ed25519.sign(n,_)}async function hashAndVerify$2(r,n,_){return ed25519.verify(n,_,r)}function concatKeys(r,n){const _=new Uint8Array(PRIVATE_KEY_BYTE_LENGTH);for(let x=0;x<KEYS_BYTE_LENGTH;x++)_[x]=r[x],_[KEYS_BYTE_LENGTH+x]=n[x];return _}const base64$3=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});const derivedEmptyPasswordKey={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function create$3(r){const n=r?.algorithm??"AES-GCM";let _=r?.keyLength??16;const x=r?.nonceLength??12,S=r?.digest??"SHA-256",E=r?.saltLength??16,C=r?.iterations??32767,T=webcrypto.get();_*=8;async function B(N,V){const D=T.getRandomValues(new Uint8Array(E)),O=T.getRandomValues(new Uint8Array(x)),F={name:n,iv:O};typeof V=="string"&&(V=fromString$1(V));let M;if(V.length===0){M=await T.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["encrypt"]);try{const j={name:"PBKDF2",salt:D,iterations:C,hash:{name:S}},q=await T.subtle.importKey("raw",V,{name:"PBKDF2"},!1,["deriveKey"]);M=await T.subtle.deriveKey(j,q,{name:n,length:_},!0,["encrypt"])}catch{M=await T.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["encrypt"])}}else{const j={name:"PBKDF2",salt:D,iterations:C,hash:{name:S}},q=await T.subtle.importKey("raw",V,{name:"PBKDF2"},!1,["deriveKey"]);M=await T.subtle.deriveKey(j,q,{name:n,length:_},!0,["encrypt"])}const L=await T.subtle.encrypt(F,M,N);return concat$3([D,F.iv,new Uint8Array(L)])}async function A(N,V){const D=N.subarray(0,E),O=N.subarray(E,E+x),F=N.subarray(E+x),M={name:n,iv:O};typeof V=="string"&&(V=fromString$1(V));let L;if(V.length===0)try{const q={name:"PBKDF2",salt:D,iterations:C,hash:{name:S}},H=await T.subtle.importKey("raw",V,{name:"PBKDF2"},!1,["deriveKey"]);L=await T.subtle.deriveKey(q,H,{name:n,length:_},!0,["decrypt"])}catch{L=await T.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["decrypt"])}else{const q={name:"PBKDF2",salt:D,iterations:C,hash:{name:S}},H=await T.subtle.importKey("raw",V,{name:"PBKDF2"},!1,["deriveKey"]);L=await T.subtle.deriveKey(q,H,{name:n,length:_},!0,["decrypt"])}const j=await T.subtle.decrypt(M,L,F);return new Uint8Array(j)}return{encrypt:B,decrypt:A}}async function exporter(r,n){const x=await create$3().encrypt(r,n);return base64$3.encode(x)}var minimal={},aspromise=asPromise;function asPromise(r,n){for(var _=new Array(arguments.length-1),x=0,S=2,E=!0;S<arguments.length;)_[x++]=arguments[S++];return new Promise(function(T,B){_[x]=function(I){if(E)if(E=!1,I)B(I);else{for(var N=new Array(arguments.length-1),V=0;V<N.length;)N[V++]=arguments[V];T.apply(null,N)}};try{r.apply(n||null,_)}catch(A){E&&(E=!1,B(A))}})}var base64$2={};(function(r){var n=r;n.length=function(T){var B=T.length;if(!B)return 0;for(var A=0;--B%4>1&&T.charAt(B)==="=";)++A;return Math.ceil(T.length*3)/4-A};for(var _=new Array(64),x=new Array(123),S=0;S<64;)x[_[S]=S<26?S+65:S<52?S+71:S<62?S-4:S-59|43]=S++;n.encode=function(T,B,A){for(var I=null,N=[],V=0,D=0,O;B<A;){var F=T[B++];switch(D){case 0:N[V++]=_[F>>2],O=(F&3)<<4,D=1;break;case 1:N[V++]=_[O|F>>4],O=(F&15)<<2,D=2;break;case 2:N[V++]=_[O|F>>6],N[V++]=_[F&63],D=0;break}V>8191&&((I||(I=[])).push(String.fromCharCode.apply(String,N)),V=0)}return D&&(N[V++]=_[O],N[V++]=61,D===1&&(N[V++]=61)),I?(V&&I.push(String.fromCharCode.apply(String,N.slice(0,V))),I.join("")):String.fromCharCode.apply(String,N.slice(0,V))};var E="invalid encoding";n.decode=function(T,B,A){for(var I=A,N=0,V,D=0;D<T.length;){var O=T.charCodeAt(D++);if(O===61&&N>1)break;if((O=x[O])===void 0)throw Error(E);switch(N){case 0:V=O,N=1;break;case 1:B[A++]=V<<2|(O&48)>>4,V=O,N=2;break;case 2:B[A++]=(V&15)<<4|(O&60)>>2,V=O,N=3;break;case 3:B[A++]=(V&3)<<6|O,N=0;break}}if(N===1)throw Error(E);return A-I},n.test=function(T){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(T)}})(base64$2);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(n,_,x){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:_,ctx:x||this}),this};EventEmitter.prototype.off=function(n,_){if(n===void 0)this._listeners={};else if(_===void 0)this._listeners[n]=[];else for(var x=this._listeners[n],S=0;S<x.length;)x[S].fn===_?x.splice(S,1):++S;return this};EventEmitter.prototype.emit=function(n){var _=this._listeners[n];if(_){for(var x=[],S=1;S<arguments.length;)x.push(arguments[S++]);for(S=0;S<_.length;)_[S].fn.apply(_[S++].ctx,x)}return this};var float=factory(factory);function factory(r){return typeof Float32Array<"u"?function(){var n=new Float32Array([-0]),_=new Uint8Array(n.buffer),x=_[3]===128;function S(B,A,I){n[0]=B,A[I]=_[0],A[I+1]=_[1],A[I+2]=_[2],A[I+3]=_[3]}function E(B,A,I){n[0]=B,A[I]=_[3],A[I+1]=_[2],A[I+2]=_[1],A[I+3]=_[0]}r.writeFloatLE=x?S:E,r.writeFloatBE=x?E:S;function C(B,A){return _[0]=B[A],_[1]=B[A+1],_[2]=B[A+2],_[3]=B[A+3],n[0]}function T(B,A){return _[3]=B[A],_[2]=B[A+1],_[1]=B[A+2],_[0]=B[A+3],n[0]}r.readFloatLE=x?C:T,r.readFloatBE=x?T:C}():function(){function n(x,S,E,C){var T=S<0?1:0;if(T&&(S=-S),S===0)x(1/S>0?0:2147483648,E,C);else if(isNaN(S))x(2143289344,E,C);else if(S>34028234663852886e22)x((T<<31|2139095040)>>>0,E,C);else if(S<11754943508222875e-54)x((T<<31|Math.round(S/1401298464324817e-60))>>>0,E,C);else{var B=Math.floor(Math.log(S)/Math.LN2),A=Math.round(S*Math.pow(2,-B)*8388608)&8388607;x((T<<31|B+127<<23|A)>>>0,E,C)}}r.writeFloatLE=n.bind(null,writeUintLE),r.writeFloatBE=n.bind(null,writeUintBE);function _(x,S,E){var C=x(S,E),T=(C>>31)*2+1,B=C>>>23&255,A=C&8388607;return B===255?A?NaN:T*(1/0):B===0?T*1401298464324817e-60*A:T*Math.pow(2,B-150)*(A+8388608)}r.readFloatLE=_.bind(null,readUintLE),r.readFloatBE=_.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var n=new Float64Array([-0]),_=new Uint8Array(n.buffer),x=_[7]===128;function S(B,A,I){n[0]=B,A[I]=_[0],A[I+1]=_[1],A[I+2]=_[2],A[I+3]=_[3],A[I+4]=_[4],A[I+5]=_[5],A[I+6]=_[6],A[I+7]=_[7]}function E(B,A,I){n[0]=B,A[I]=_[7],A[I+1]=_[6],A[I+2]=_[5],A[I+3]=_[4],A[I+4]=_[3],A[I+5]=_[2],A[I+6]=_[1],A[I+7]=_[0]}r.writeDoubleLE=x?S:E,r.writeDoubleBE=x?E:S;function C(B,A){return _[0]=B[A],_[1]=B[A+1],_[2]=B[A+2],_[3]=B[A+3],_[4]=B[A+4],_[5]=B[A+5],_[6]=B[A+6],_[7]=B[A+7],n[0]}function T(B,A){return _[7]=B[A],_[6]=B[A+1],_[5]=B[A+2],_[4]=B[A+3],_[3]=B[A+4],_[2]=B[A+5],_[1]=B[A+6],_[0]=B[A+7],n[0]}r.readDoubleLE=x?C:T,r.readDoubleBE=x?T:C}():function(){function n(x,S,E,C,T,B){var A=C<0?1:0;if(A&&(C=-C),C===0)x(0,T,B+S),x(1/C>0?0:2147483648,T,B+E);else if(isNaN(C))x(0,T,B+S),x(2146959360,T,B+E);else if(C>17976931348623157e292)x(0,T,B+S),x((A<<31|2146435072)>>>0,T,B+E);else{var I;if(C<22250738585072014e-324)I=C/5e-324,x(I>>>0,T,B+S),x((A<<31|I/4294967296)>>>0,T,B+E);else{var N=Math.floor(Math.log(C)/Math.LN2);N===1024&&(N=1023),I=C*Math.pow(2,-N),x(I*4503599627370496>>>0,T,B+S),x((A<<31|N+1023<<20|I*1048576&1048575)>>>0,T,B+E)}}}r.writeDoubleLE=n.bind(null,writeUintLE,0,4),r.writeDoubleBE=n.bind(null,writeUintBE,4,0);function _(x,S,E,C,T){var B=x(C,T+S),A=x(C,T+E),I=(A>>31)*2+1,N=A>>>20&2047,V=4294967296*(A&1048575)+B;return N===2047?V?NaN:I*(1/0):N===0?I*5e-324*V:I*Math.pow(2,N-1075)*(V+4503599627370496)}r.readDoubleLE=_.bind(null,readUintLE,0,4),r.readDoubleBE=_.bind(null,readUintBE,4,0)}(),r}function writeUintLE(r,n,_){n[_]=r&255,n[_+1]=r>>>8&255,n[_+2]=r>>>16&255,n[_+3]=r>>>24}function writeUintBE(r,n,_){n[_]=r>>>24,n[_+1]=r>>>16&255,n[_+2]=r>>>8&255,n[_+3]=r&255}function readUintLE(r,n){return(r[n]|r[n+1]<<8|r[n+2]<<16|r[n+3]<<24)>>>0}function readUintBE(r,n){return(r[n]<<24|r[n+1]<<16|r[n+2]<<8|r[n+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}var utf8$5={};(function(r){var n=r;n.length=function(x){for(var S=0,E=0,C=0;C<x.length;++C)E=x.charCodeAt(C),E<128?S+=1:E<2048?S+=2:(E&64512)===55296&&(x.charCodeAt(C+1)&64512)===56320?(++C,S+=4):S+=3;return S},n.read=function(x,S,E){var C=E-S;if(C<1)return"";for(var T=null,B=[],A=0,I;S<E;)I=x[S++],I<128?B[A++]=I:I>191&&I<224?B[A++]=(I&31)<<6|x[S++]&63:I>239&&I<365?(I=((I&7)<<18|(x[S++]&63)<<12|(x[S++]&63)<<6|x[S++]&63)-65536,B[A++]=55296+(I>>10),B[A++]=56320+(I&1023)):B[A++]=(I&15)<<12|(x[S++]&63)<<6|x[S++]&63,A>8191&&((T||(T=[])).push(String.fromCharCode.apply(String,B)),A=0);return T?(A&&T.push(String.fromCharCode.apply(String,B.slice(0,A))),T.join("")):String.fromCharCode.apply(String,B.slice(0,A))},n.write=function(x,S,E){for(var C=E,T,B,A=0;A<x.length;++A)T=x.charCodeAt(A),T<128?S[E++]=T:T<2048?(S[E++]=T>>6|192,S[E++]=T&63|128):(T&64512)===55296&&((B=x.charCodeAt(A+1))&64512)===56320?(T=65536+((T&1023)<<10)+(B&1023),++A,S[E++]=T>>18|240,S[E++]=T>>12&63|128,S[E++]=T>>6&63|128,S[E++]=T&63|128):(S[E++]=T>>12|224,S[E++]=T>>6&63|128,S[E++]=T&63|128);return E-C}})(utf8$5);var pool_1=pool;function pool(r,n,_){var x=_||8192,S=x>>>1,E=null,C=x;return function(B){if(B<1||B>S)return r(B);C+B>x&&(E=r(x),C=0);var A=n.call(E,C,C+=B);return C&7&&(C=(C|7)+1),A}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=n;var r=requireMinimal();function n(E,C){this.lo=E>>>0,this.hi=C>>>0}var _=n.zero=new n(0,0);_.toNumber=function(){return 0},_.zzEncode=_.zzDecode=function(){return this},_.length=function(){return 1};var x=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(C){if(C===0)return _;var T=C<0;T&&(C=-C);var B=C>>>0,A=(C-B)/4294967296>>>0;return T&&(A=~A>>>0,B=~B>>>0,++B>4294967295&&(B=0,++A>4294967295&&(A=0))),new n(B,A)},n.from=function(C){if(typeof C=="number")return n.fromNumber(C);if(r.isString(C))if(r.Long)C=r.Long.fromString(C);else return n.fromNumber(parseInt(C,10));return C.low||C.high?new n(C.low>>>0,C.high>>>0):_},n.prototype.toNumber=function(C){if(!C&&this.hi>>>31){var T=~this.lo+1>>>0,B=~this.hi>>>0;return T||(B=B+1>>>0),-(T+B*4294967296)}return this.lo+this.hi*4294967296},n.prototype.toLong=function(C){return r.Long?new r.Long(this.lo|0,this.hi|0,!!C):{low:this.lo|0,high:this.hi|0,unsigned:!!C}};var S=String.prototype.charCodeAt;return n.fromHash=function(C){return C===x?_:new n((S.call(C,0)|S.call(C,1)<<8|S.call(C,2)<<16|S.call(C,3)<<24)>>>0,(S.call(C,4)|S.call(C,5)<<8|S.call(C,6)<<16|S.call(C,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var C=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^C)>>>0,this.lo=(this.lo<<1^C)>>>0,this},n.prototype.zzDecode=function(){var C=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^C)>>>0,this.hi=(this.hi>>>1^C)>>>0,this},n.prototype.length=function(){var C=this.lo,T=(this.lo>>>28|this.hi<<4)>>>0,B=this.hi>>>24;return B===0?T===0?C<16384?C<128?1:2:C<2097152?3:4:T<16384?T<128?5:6:T<2097152?7:8:B<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(r){var n=r;n.asPromise=aspromise,n.base64=base64$2,n.EventEmitter=eventemitter,n.float=float,n.inquire=inquire_1,n.utf8=utf8$5,n.pool=pool_1,n.LongBits=requireLongbits(),n.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),n.global=n.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(E){return typeof E=="number"&&isFinite(E)&&Math.floor(E)===E},n.isString=function(E){return typeof E=="string"||E instanceof String},n.isObject=function(E){return E&&typeof E=="object"},n.isset=n.isSet=function(E,C){var T=E[C];return T!=null&&E.hasOwnProperty(C)?typeof T!="object"||(Array.isArray(T)?T.length:Object.keys(T).length)>0:!1},n.Buffer=function(){try{var S=n.inquire("buffer").Buffer;return S.prototype.utf8Write?S:null}catch{return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(E){return typeof E=="number"?n.Buffer?n._Buffer_allocUnsafe(E):new n.Array(E):n.Buffer?n._Buffer_from(E):typeof Uint8Array>"u"?E:new Uint8Array(E)},n.Array=typeof Uint8Array<"u"?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(E){return E?n.LongBits.from(E).toHash():n.LongBits.zeroHash},n.longFromHash=function(E,C){var T=n.LongBits.fromHash(E);return n.Long?n.Long.fromBits(T.lo,T.hi,C):T.toNumber(!!C)};function _(S,E,C){for(var T=Object.keys(E),B=0;B<T.length;++B)(S[T[B]]===void 0||!C)&&(S[T[B]]=E[T[B]]);return S}n.merge=_,n.lcFirst=function(E){return E.charAt(0).toLowerCase()+E.substring(1)};function x(S){function E(C,T){if(!(this instanceof E))return new E(C,T);Object.defineProperty(this,"message",{get:function(){return C}}),Error.captureStackTrace?Error.captureStackTrace(this,E):Object.defineProperty(this,"stack",{value:new Error().stack||""}),T&&_(this,T)}return E.prototype=Object.create(Error.prototype,{constructor:{value:E,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return S},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),E}n.newError=x,n.ProtocolError=x("ProtocolError"),n.oneOfGetter=function(E){for(var C={},T=0;T<E.length;++T)C[E[T]]=1;return function(){for(var B=Object.keys(this),A=B.length-1;A>-1;--A)if(C[B[A]]===1&&this[B[A]]!==void 0&&this[B[A]]!==null)return B[A]}},n.oneOfSetter=function(E){return function(C){for(var T=0;T<E.length;++T)E[T]!==C&&delete this[E[T]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var S=n.Buffer;if(!S){n._Buffer_from=n._Buffer_allocUnsafe=null;return}n._Buffer_from=S.from!==Uint8Array.from&&S.from||function(C,T){return new S(C,T)},n._Buffer_allocUnsafe=S.allocUnsafe||function(C){return new S(C)}}}(minimal)),minimal}var reader$1=Reader$1,util$5=requireMinimal(),BufferReader$1,LongBits$1=util$5.LongBits,utf8$4=util$5.utf8;function indexOutOfRange(r,n){return RangeError("index out of range: "+r.pos+" + "+(n||1)+" > "+r.len)}function Reader$1(r){this.buf=r,this.pos=0,this.len=r.length}var create_array=typeof Uint8Array<"u"?function r(n){if(n instanceof Uint8Array||Array.isArray(n))return new Reader$1(n);throw Error("illegal buffer")}:function r(n){if(Array.isArray(n))return new Reader$1(n);throw Error("illegal buffer")},create$2=function r(){return util$5.Buffer?function(_){return(Reader$1.create=function(S){return util$5.Buffer.isBuffer(S)?new BufferReader$1(S):create_array(S)})(_)}:create_array};Reader$1.create=create$2();Reader$1.prototype._slice=util$5.Array.prototype.subarray||util$5.Array.prototype.slice;Reader$1.prototype.uint32=function r(){var n=4294967295;return function(){if(n=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(n=(n|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return n;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return n}}();Reader$1.prototype.int32=function r(){return this.uint32()|0};Reader$1.prototype.sint32=function r(){var n=this.uint32();return n>>>1^-(n&1)|0};function readLongVarint(){var r=new LongBits$1(0,0),n=0;if(this.len-this.pos>4){for(;n<4;++n)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<n*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;n=0}else{for(;n<3;++n){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<n*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<n*7)>>>0,r}if(this.len-this.pos>4){for(;n<5;++n)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<n*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;n<5;++n){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<n*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function r(){return this.uint32()!==0};function readFixed32_end(r,n){return(r[n-4]|r[n-3]<<8|r[n-2]<<16|r[n-1]<<24)>>>0}Reader$1.prototype.fixed32=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$1(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var n=util$5.float.readFloatLE(this.buf,this.pos);return this.pos+=4,n};Reader$1.prototype.double=function r(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var n=util$5.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,n};Reader$1.prototype.bytes=function r(){var n=this.uint32(),_=this.pos,x=this.pos+n;if(x>this.len)throw indexOutOfRange(this,n);if(this.pos+=n,Array.isArray(this.buf))return this.buf.slice(_,x);if(_===x){var S=util$5.Buffer;return S?S.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,_,x)};Reader$1.prototype.string=function r(){var n=this.bytes();return utf8$4.read(n,0,n.length)};Reader$1.prototype.skip=function r(n){if(typeof n=="number"){if(this.pos+n>this.len)throw indexOutOfRange(this,n);this.pos+=n}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};Reader$1._configure=function(r){BufferReader$1=r,Reader$1.create=create$2(),BufferReader$1._configure();var n=util$5.Long?"toLong":"toNumber";util$5.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[n](!1)},uint64:function(){return readLongVarint.call(this)[n](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[n](!1)},fixed64:function(){return readFixed64.call(this)[n](!0)},sfixed64:function(){return readFixed64.call(this)[n](!1)}})};const ReaderClass=getDefaultExportFromCjs(reader$1);var reader_buffer=BufferReader,Reader=reader$1;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$4=requireMinimal();function BufferReader(r){Reader.call(this,r)}BufferReader._configure=function(){util$4.Buffer&&(BufferReader.prototype._slice=util$4.Buffer.prototype.slice)};BufferReader.prototype.string=function r(){var n=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+n,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+n,this.len))};BufferReader._configure();const ReaderBufferClass=getDefaultExportFromCjs(reader_buffer);var minimalExports=requireMinimal();const util$3=getDefaultExportFromCjs(minimalExports);var writer$1=Writer$1,util$2=requireMinimal(),BufferWriter$1,LongBits=util$2.LongBits,base64$1=util$2.base64,utf8$3=util$2.utf8;function Op(r,n,_){this.fn=r,this.len=n,this.next=void 0,this.val=_}function noop$3(){}function State(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function Writer$1(){this.len=0,this.head=new Op(noop$3,0,0),this.tail=this.head,this.states=null}var create$1=function r(){return util$2.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function r(n){return new util$2.Array(n)};util$2.Array!==Array&&(Writer$1.alloc=util$2.pool(Writer$1.alloc,util$2.Array.prototype.subarray));Writer$1.prototype._push=function r(n,_,x){return this.tail=this.tail.next=new Op(n,_,x),this.len+=_,this};function writeByte(r,n,_){n[_]=r&255}function writeVarint32(r,n,_){for(;r>127;)n[_++]=r&127|128,r>>>=7;n[_]=r}function VarintOp(r,n){this.len=r,this.next=void 0,this.val=n}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function r(n){return this.len+=(this.tail=this.tail.next=new VarintOp((n=n>>>0)<128?1:n<16384?2:n<2097152?3:n<268435456?4:5,n)).len,this};Writer$1.prototype.int32=function r(n){return n<0?this._push(writeVarint64,10,LongBits.fromNumber(n)):this.uint32(n)};Writer$1.prototype.sint32=function r(n){return this.uint32((n<<1^n>>31)>>>0)};function writeVarint64(r,n,_){for(;r.hi;)n[_++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)n[_++]=r.lo&127|128,r.lo=r.lo>>>7;n[_++]=r.lo}Writer$1.prototype.uint64=function r(n){var _=LongBits.from(n);return this._push(writeVarint64,_.length(),_)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function r(n){var _=LongBits.from(n).zzEncode();return this._push(writeVarint64,_.length(),_)};Writer$1.prototype.bool=function r(n){return this._push(writeByte,1,n?1:0)};function writeFixed32(r,n,_){n[_]=r&255,n[_+1]=r>>>8&255,n[_+2]=r>>>16&255,n[_+3]=r>>>24}Writer$1.prototype.fixed32=function r(n){return this._push(writeFixed32,4,n>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function r(n){var _=LongBits.from(n);return this._push(writeFixed32,4,_.lo)._push(writeFixed32,4,_.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function r(n){return this._push(util$2.float.writeFloatLE,4,n)};Writer$1.prototype.double=function r(n){return this._push(util$2.float.writeDoubleLE,8,n)};var writeBytes=util$2.Array.prototype.set?function r(n,_,x){_.set(n,x)}:function r(n,_,x){for(var S=0;S<n.length;++S)_[x+S]=n[S]};Writer$1.prototype.bytes=function r(n){var _=n.length>>>0;if(!_)return this._push(writeByte,1,0);if(util$2.isString(n)){var x=Writer$1.alloc(_=base64$1.length(n));base64$1.decode(n,x,0),n=x}return this.uint32(_)._push(writeBytes,_,n)};Writer$1.prototype.string=function r(n){var _=utf8$3.length(n);return _?this.uint32(_)._push(utf8$3.write,_,n):this._push(writeByte,1,0)};Writer$1.prototype.fork=function r(){return this.states=new State(this),this.head=this.tail=new Op(noop$3,0,0),this.len=0,this};Writer$1.prototype.reset=function r(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$3,0,0),this.len=0),this};Writer$1.prototype.ldelim=function r(){var n=this.head,_=this.tail,x=this.len;return this.reset().uint32(x),x&&(this.tail.next=n.next,this.tail=_,this.len+=x),this};Writer$1.prototype.finish=function r(){for(var n=this.head.next,_=this.constructor.alloc(this.len),x=0;n;)n.fn(n.val,_,x),x+=n.len,n=n.next;return _};Writer$1._configure=function(r){BufferWriter$1=r,Writer$1.create=create$1(),BufferWriter$1._configure()};const WriterClass=getDefaultExportFromCjs(writer$1);var writer_buffer=BufferWriter,Writer=writer$1;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$1=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$1._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$1.Buffer&&util$1.Buffer.prototype instanceof Uint8Array&&util$1.Buffer.prototype.set.name==="set"?function(n,_,x){_.set(n,x)}:function(n,_,x){if(n.copy)n.copy(_,x,0,n.length);else for(var S=0;S<n.length;)_[x++]=n[S++]}};BufferWriter.prototype.bytes=function r(n){util$1.isString(n)&&(n=util$1._Buffer_from(n,"base64"));var _=n.length>>>0;return this.uint32(_),_&&this._push(BufferWriter.writeBytesBuffer,_,n),this};function writeStringBuffer(r,n,_){r.length<40?util$1.utf8.write(r,n,_):n.utf8Write?n.utf8Write(r,_):n.write(r,_)}BufferWriter.prototype.string=function r(n){var _=util$1.Buffer.byteLength(n);return this.uint32(_),_&&this._push(writeStringBuffer,_,n),this};BufferWriter._configure();const WriterBufferClass=getDefaultExportFromCjs(writer_buffer);function configure(){util$3._configure(),ReaderClass._configure(ReaderBufferClass),WriterClass._configure(WriterBufferClass)}configure();const methods=["uint64","int64","sint64","fixed64","sfixed64"];function patchReader(r){for(const n of methods){if(r[n]==null)continue;const _=r[n];r[n]=function(){return BigInt(_.call(this).toString())}}return r}function reader(r){return patchReader(new ReaderClass(r))}function patchWriter(r){for(const n of methods){if(r[n]==null)continue;const _=r[n];r[n]=function(x){return _.call(this,x.toString())}}return r}function writer(){return patchWriter(WriterClass.create())}function decodeMessage(r,n){const _=reader(r instanceof Uint8Array?r:r.subarray());return n.decode(_)}function encodeMessage(r,n){const _=writer();return n.encode(r,_,{lengthDelimited:!1}),_.finish()}var CODEC_TYPES;(function(r){r[r.VARINT=0]="VARINT",r[r.BIT64=1]="BIT64",r[r.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",r[r.START_GROUP=3]="START_GROUP",r[r.END_GROUP=4]="END_GROUP",r[r.BIT32=5]="BIT32"})(CODEC_TYPES||(CODEC_TYPES={}));function createCodec$1(r,n,_,x){return{name:r,type:n,encode:_,decode:x}}function enumeration(r){function n(S){if(r[S.toString()]==null)throw new Error("Invalid enum value");return r[S]}const _=function(E,C){const T=n(E);C.int32(T)},x=function(E){const C=E.int32();return n(C)};return createCodec$1("enum",CODEC_TYPES.VARINT,_,x)}function message(r,n){return createCodec$1("message",CODEC_TYPES.LENGTH_DELIMITED,r,n)}var KeyType$1;(function(r){r.RSA="RSA",r.Ed25519="Ed25519",r.Secp256k1="Secp256k1"})(KeyType$1||(KeyType$1={}));var __KeyTypeValues;(function(r){r[r.RSA=0]="RSA",r[r.Ed25519=1]="Ed25519",r[r.Secp256k1=2]="Secp256k1"})(__KeyTypeValues||(__KeyTypeValues={}));(function(r){r.codec=()=>enumeration(__KeyTypeValues)})(KeyType$1||(KeyType$1={}));var PublicKey;(function(r){let n;r.codec=()=>(n==null&&(n=message((_,x,S={})=>{S.lengthDelimited!==!1&&x.fork(),_.Type!=null&&(x.uint32(8),KeyType$1.codec().encode(_.Type,x)),_.Data!=null&&(x.uint32(18),x.bytes(_.Data)),S.lengthDelimited!==!1&&x.ldelim()},(_,x)=>{const S={},E=x==null?_.len:_.pos+x;for(;_.pos<E;){const C=_.uint32();switch(C>>>3){case 1:S.Type=KeyType$1.codec().decode(_);break;case 2:S.Data=_.bytes();break;default:_.skipType(C&7);break}}return S})),n),r.encode=_=>encodeMessage(_,r.codec()),r.decode=_=>decodeMessage(_,r.codec())})(PublicKey||(PublicKey={}));var PrivateKey;(function(r){let n;r.codec=()=>(n==null&&(n=message((_,x,S={})=>{S.lengthDelimited!==!1&&x.fork(),_.Type!=null&&(x.uint32(8),KeyType$1.codec().encode(_.Type,x)),_.Data!=null&&(x.uint32(18),x.bytes(_.Data)),S.lengthDelimited!==!1&&x.ldelim()},(_,x)=>{const S={},E=x==null?_.len:_.pos+x;for(;_.pos<E;){const C=_.uint32();switch(C>>>3){case 1:S.Type=KeyType$1.codec().decode(_);break;case 2:S.Data=_.bytes();break;default:_.skipType(C&7);break}}return S})),n),r.encode=_=>encodeMessage(_,r.codec()),r.decode=_=>decodeMessage(_,r.codec())})(PrivateKey||(PrivateKey={}));class Ed25519PublicKey{constructor(n){_t(this,"_key");this._key=ensureKey(n,PUBLIC_KEY_BYTE_LENGTH)}async verify(n,_){return hashAndVerify$2(this._key,_,n)}marshal(){return this._key}get bytes(){return PublicKey.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(n){return equals$2(this.bytes,n.bytes)}async hash(){const{bytes:n}=await sha256$7.digest(this.bytes);return n}}class Ed25519PrivateKey{constructor(n,_){_t(this,"_key");_t(this,"_publicKey");this._key=ensureKey(n,PRIVATE_KEY_BYTE_LENGTH),this._publicKey=ensureKey(_,PUBLIC_KEY_BYTE_LENGTH)}async sign(n){return hashAndSign$2(this._key,n)}get public(){return new Ed25519PublicKey(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(n){return equals$2(this.bytes,n.bytes)}async hash(){const{bytes:n}=await sha256$7.digest(this.bytes);return n}async id(){const n=identity$2.digest(this.public.bytes);return base58btc$2.encode(n.bytes).substring(1)}async export(n,_="libp2p-key"){if(_==="libp2p-key")return exporter(this.bytes,n);throw new CodeError(`export format '${_}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function unmarshalEd25519PrivateKey(r){if(r.length>PRIVATE_KEY_BYTE_LENGTH){r=ensureKey(r,PRIVATE_KEY_BYTE_LENGTH+PUBLIC_KEY_BYTE_LENGTH);const x=r.subarray(0,PRIVATE_KEY_BYTE_LENGTH),S=r.subarray(PRIVATE_KEY_BYTE_LENGTH,r.length);return new Ed25519PrivateKey(x,S)}r=ensureKey(r,PRIVATE_KEY_BYTE_LENGTH);const n=r.subarray(0,PRIVATE_KEY_BYTE_LENGTH),_=r.subarray(PUBLIC_KEY_BYTE_LENGTH);return new Ed25519PrivateKey(n,_)}function unmarshalEd25519PublicKey(r){return r=ensureKey(r,PUBLIC_KEY_BYTE_LENGTH),new Ed25519PublicKey(r)}async function generateKeyPair$3(){const{privateKey:r,publicKey:n}=await generateKey$2();return new Ed25519PrivateKey(r,n)}async function generateKeyPairFromSeed(r){const{privateKey:n,publicKey:_}=await generateKeyFromSeed(r);return new Ed25519PrivateKey(n,_)}function ensureKey(r,n){if(r=Uint8Array.from(r??[]),r.length!==n)throw new CodeError(`Key must be a Uint8Array of length ${n}, got ${r.length}`,"ERR_INVALID_KEY_TYPE");return r}const Ed25519=Object.freeze(Object.defineProperty({__proto__:null,Ed25519PrivateKey,Ed25519PublicKey,generateKeyPair:generateKeyPair$3,generateKeyPairFromSeed,unmarshalEd25519PrivateKey,unmarshalEd25519PublicKey},Symbol.toStringTag,{value:"Module"}));function bigIntegerToUintBase64url(r,n){let _=Uint8Array.from(r.abs().toByteArray());if(_=_[0]===0?_.subarray(1):_,n!=null){if(_.length>n)throw new Error("byte array longer than desired length");_=concat$3([new Uint8Array(n-_.length),_])}return toString$5(_,"base64url")}function base64urlToBigInteger(r){const n=base64urlToBuffer(r);return new forge$n.jsbn.BigInteger(toString$5(n,"base16"),16)}function base64urlToBuffer(r,n){let _=fromString$1(r,"base64urlpad");if(n!=null){if(_.length>n)throw new Error("byte array longer than desired length");_=concat$3([new Uint8Array(n-_.length),_])}return _}const bits={"P-256":256,"P-384":384,"P-521":521},curveTypes=Object.keys(bits);curveTypes.join(" / ");var forge=forge$m,sha512=forge.sha512=forge.sha512||{};forge.md.sha512=forge.md.algorithms.sha512=sha512;var sha384=forge.sha384=forge.sha512.sha384=forge.sha512.sha384||{};sha384.create=function(){return sha512.create("SHA-384")};forge.md.sha384=forge.md.algorithms.sha384=sha384;forge.sha512.sha256=forge.sha512.sha256||{create:function(){return sha512.create("SHA-512/256")}};forge.md["sha512/256"]=forge.md.algorithms["sha512/256"]=forge.sha512.sha256;forge.sha512.sha224=forge.sha512.sha224||{create:function(){return sha512.create("SHA-512/224")}};forge.md["sha512/224"]=forge.md.algorithms["sha512/224"]=forge.sha512.sha224;sha512.create=function(r){if(_initialized||_init(),typeof r>"u"&&(r="SHA-512"),!(r in _states))throw new Error("Invalid SHA-512 algorithm: "+r);for(var n=_states[r],_=null,x=forge.util.createBuffer(),S=new Array(80),E=0;E<80;++E)S[E]=new Array(2);var C=64;switch(r){case"SHA-384":C=48;break;case"SHA-512/256":C=32;break;case"SHA-512/224":C=28;break}var T={algorithm:r.replace("-","").toLowerCase(),blockLength:128,digestLength:C,messageLength:0,fullMessageLength:null,messageLengthSize:16};return T.start=function(){T.messageLength=0,T.fullMessageLength=T.messageLength128=[];for(var B=T.messageLengthSize/4,A=0;A<B;++A)T.fullMessageLength.push(0);x=forge.util.createBuffer(),_=new Array(n.length);for(var A=0;A<n.length;++A)_[A]=n[A].slice(0);return T},T.start(),T.update=function(B,A){A==="utf8"&&(B=forge.util.encodeUtf8(B));var I=B.length;T.messageLength+=I,I=[I/4294967296>>>0,I>>>0];for(var N=T.fullMessageLength.length-1;N>=0;--N)T.fullMessageLength[N]+=I[1],I[1]=I[0]+(T.fullMessageLength[N]/4294967296>>>0),T.fullMessageLength[N]=T.fullMessageLength[N]>>>0,I[0]=I[1]/4294967296>>>0;return x.putBytes(B),_update(_,S,x),(x.read>2048||x.length()===0)&&x.compact(),T},T.digest=function(){var B=forge.util.createBuffer();B.putBytes(x.bytes());var A=T.fullMessageLength[T.fullMessageLength.length-1]+T.messageLengthSize,I=A&T.blockLength-1;B.putBytes(_padding.substr(0,T.blockLength-I));for(var N,V,D=T.fullMessageLength[0]*8,O=0;O<T.fullMessageLength.length-1;++O)N=T.fullMessageLength[O+1]*8,V=N/4294967296>>>0,D+=V,B.putInt32(D>>>0),D=N>>>0;B.putInt32(D);for(var F=new Array(_.length),O=0;O<_.length;++O)F[O]=_[O].slice(0);_update(F,S,B);var M=forge.util.createBuffer(),L;r==="SHA-512"?L=F.length:r==="SHA-384"?L=F.length-2:L=F.length-4;for(var O=0;O<L;++O)M.putInt32(F[O][0]),(O!==L-1||r!=="SHA-512/224")&&M.putInt32(F[O][1]);return M},T};var _padding=null,_initialized=!1,_k=null,_states=null;function _init(){_padding=String.fromCharCode(128),_padding+=forge.util.fillString(String.fromCharCode(0),128),_k=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],_states={},_states["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],_states["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],_states["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],_states["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],_initialized=!0}function _update(r,n,_){for(var x,S,E,C,T,B,A,I,N,V,D,O,F,M,L,j,q,H,X,J,Z,ae,ce,ve,pe,G,Y,U,W,ee,re,oe,ie,ne,te,K=_.length();K>=128;){for(W=0;W<16;++W)n[W][0]=_.getInt32()>>>0,n[W][1]=_.getInt32()>>>0;for(;W<80;++W)oe=n[W-2],ee=oe[0],re=oe[1],x=((ee>>>19|re<<13)^(re>>>29|ee<<3)^ee>>>6)>>>0,S=((ee<<13|re>>>19)^(re<<3|ee>>>29)^(ee<<26|re>>>6))>>>0,ne=n[W-15],ee=ne[0],re=ne[1],E=((ee>>>1|re<<31)^(ee>>>8|re<<24)^ee>>>7)>>>0,C=((ee<<31|re>>>1)^(ee<<24|re>>>8)^(ee<<25|re>>>7))>>>0,ie=n[W-7],te=n[W-16],re=S+ie[1]+C+te[1],n[W][0]=x+ie[0]+E+te[0]+(re/4294967296>>>0)>>>0,n[W][1]=re>>>0;for(F=r[0][0],M=r[0][1],L=r[1][0],j=r[1][1],q=r[2][0],H=r[2][1],X=r[3][0],J=r[3][1],Z=r[4][0],ae=r[4][1],ce=r[5][0],ve=r[5][1],pe=r[6][0],G=r[6][1],Y=r[7][0],U=r[7][1],W=0;W<80;++W)A=((Z>>>14|ae<<18)^(Z>>>18|ae<<14)^(ae>>>9|Z<<23))>>>0,I=((Z<<18|ae>>>14)^(Z<<14|ae>>>18)^(ae<<23|Z>>>9))>>>0,N=(pe^Z&(ce^pe))>>>0,V=(G^ae&(ve^G))>>>0,T=((F>>>28|M<<4)^(M>>>2|F<<30)^(M>>>7|F<<25))>>>0,B=((F<<4|M>>>28)^(M<<30|F>>>2)^(M<<25|F>>>7))>>>0,D=(F&L|q&(F^L))>>>0,O=(M&j|H&(M^j))>>>0,re=U+I+V+_k[W][1]+n[W][1],x=Y+A+N+_k[W][0]+n[W][0]+(re/4294967296>>>0)>>>0,S=re>>>0,re=B+O,E=T+D+(re/4294967296>>>0)>>>0,C=re>>>0,Y=pe,U=G,pe=ce,G=ve,ce=Z,ve=ae,re=J+S,Z=X+x+(re/4294967296>>>0)>>>0,ae=re>>>0,X=q,J=H,q=L,H=j,L=F,j=M,re=S+C,F=x+E+(re/4294967296>>>0)>>>0,M=re>>>0;re=r[0][1]+M,r[0][0]=r[0][0]+F+(re/4294967296>>>0)>>>0,r[0][1]=re>>>0,re=r[1][1]+j,r[1][0]=r[1][0]+L+(re/4294967296>>>0)>>>0,r[1][1]=re>>>0,re=r[2][1]+H,r[2][0]=r[2][0]+q+(re/4294967296>>>0)>>>0,r[2][1]=re>>>0,re=r[3][1]+J,r[3][0]=r[3][0]+X+(re/4294967296>>>0)>>>0,r[3][1]=re>>>0,re=r[4][1]+ae,r[4][0]=r[4][0]+Z+(re/4294967296>>>0)>>>0,r[4][1]=re>>>0,re=r[5][1]+ve,r[5][0]=r[5][0]+ce+(re/4294967296>>>0)>>>0,r[5][1]=re>>>0,re=r[6][1]+G,r[6][0]=r[6][0]+pe+(re/4294967296>>>0)>>>0,r[6][1]=re>>>0,re=r[7][1]+U,r[7][0]=r[7][0]+Y+(re/4294967296>>>0)>>>0,r[7][1]=re>>>0,K-=128}}function randomBytes(r){if(isNaN(r)||r<=0)throw new CodeError("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return randomBytes$1(r)}function convert(r,n){return n.map(_=>base64urlToBigInteger(r[_]))}function jwk2priv(r){return forge$n.pki.setRsaPrivateKey(...convert(r,["n","e","d","p","q","dp","dq","qi"]))}function jwk2pub(r){return forge$n.pki.setRsaPublicKey(...convert(r,["n","e"]))}function pkcs1ToJwk(r){const n=forge$n.asn1.fromDer(toString$5(r,"ascii")),_=forge$n.pki.privateKeyFromAsn1(n);return{kty:"RSA",n:bigIntegerToUintBase64url(_.n),e:bigIntegerToUintBase64url(_.e),d:bigIntegerToUintBase64url(_.d),p:bigIntegerToUintBase64url(_.p),q:bigIntegerToUintBase64url(_.q),dp:bigIntegerToUintBase64url(_.dP),dq:bigIntegerToUintBase64url(_.dQ),qi:bigIntegerToUintBase64url(_.qInv),alg:"RS256"}}function jwkToPkcs1(r){if(r.n==null||r.e==null||r.d==null||r.p==null||r.q==null||r.dp==null||r.dq==null||r.qi==null)throw new CodeError("JWK was missing components","ERR_INVALID_PARAMETERS");const n=forge$n.pki.privateKeyToAsn1({n:base64urlToBigInteger(r.n),e:base64urlToBigInteger(r.e),d:base64urlToBigInteger(r.d),p:base64urlToBigInteger(r.p),q:base64urlToBigInteger(r.q),dP:base64urlToBigInteger(r.dp),dQ:base64urlToBigInteger(r.dq),qInv:base64urlToBigInteger(r.qi)});return fromString$1(forge$n.asn1.toDer(n).getBytes(),"ascii")}function pkixToJwk(r){const n=forge$n.asn1.fromDer(toString$5(r,"ascii")),_=forge$n.pki.publicKeyFromAsn1(n);return{kty:"RSA",n:bigIntegerToUintBase64url(_.n),e:bigIntegerToUintBase64url(_.e)}}function jwkToPkix(r){if(r.n==null||r.e==null)throw new CodeError("JWK was missing components","ERR_INVALID_PARAMETERS");const n=forge$n.pki.publicKeyToAsn1({n:base64urlToBigInteger(r.n),e:base64urlToBigInteger(r.e)});return fromString$1(forge$n.asn1.toDer(n).getBytes(),"ascii")}async function generateKey$1(r){const n=await webcrypto.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:r,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),_=await exportKey(n);return{privateKey:_[0],publicKey:_[1]}}async function unmarshalPrivateKey$1(r){const _=[await webcrypto.get().subtle.importKey("jwk",r,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await derivePublicFromPrivate(r)],x=await exportKey({privateKey:_[0],publicKey:_[1]});return{privateKey:x[0],publicKey:x[1]}}async function hashAndSign$1(r,n){const _=await webcrypto.get().subtle.importKey("jwk",r,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),x=await webcrypto.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},_,Uint8Array.from(n));return new Uint8Array(x,0,x.byteLength)}async function hashAndVerify$1(r,n,_){const x=await webcrypto.get().subtle.importKey("jwk",r,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return webcrypto.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},x,n,_)}async function exportKey(r){if(r.privateKey==null||r.publicKey==null)throw new CodeError("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([webcrypto.get().subtle.exportKey("jwk",r.privateKey),webcrypto.get().subtle.exportKey("jwk",r.publicKey)])}async function derivePublicFromPrivate(r){return webcrypto.get().subtle.importKey("jwk",{kty:r.kty,n:r.n,e:r.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function convertKey(r,n,_,x){const S=n?jwk2pub(r):jwk2priv(r),E=toString$5(Uint8Array.from(_),"ascii"),C=x(E,S);return fromString$1(C,"ascii")}function encrypt$1(r,n){return convertKey(r,!0,n,(_,x)=>x.encrypt(_))}function decrypt$1(r,n){return convertKey(r,!1,n,(_,x)=>x.decrypt(_))}function keySize(r){if(r.kty!=="RSA")throw new CodeError("invalid key type","ERR_INVALID_KEY_TYPE");if(r.n==null)throw new CodeError("invalid key modulus","ERR_INVALID_KEY_MODULUS");return fromString$1(r.n,"base64url").length*8}const MAX_KEY_SIZE=8192;class RsaPublicKey{constructor(n){_t(this,"_key");this._key=n}async verify(n,_){return hashAndVerify$1(this._key,_,n)}marshal(){return jwkToPkix(this._key)}get bytes(){return PublicKey.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}encrypt(n){return encrypt$1(this._key,n)}equals(n){return equals$2(this.bytes,n.bytes)}async hash(){const{bytes:n}=await sha256$7.digest(this.bytes);return n}}class RsaPrivateKey{constructor(n,_){_t(this,"_key");_t(this,"_publicKey");this._key=n,this._publicKey=_}genSecret(){return randomBytes(16)}async sign(n){return hashAndSign$1(this._key,n)}get public(){if(this._publicKey==null)throw new CodeError("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new RsaPublicKey(this._publicKey)}decrypt(n){return decrypt$1(this._key,n)}marshal(){return jwkToPkcs1(this._key)}get bytes(){return PrivateKey.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}equals(n){return equals$2(this.bytes,n.bytes)}async hash(){const{bytes:n}=await sha256$7.digest(this.bytes);return n}async id(){const n=await this.public.hash();return toString$5(n,"base58btc")}async export(n,_="pkcs-8"){if(_==="pkcs-8"){const x=new forge$n.util.ByteBuffer(this.marshal()),S=forge$n.asn1.fromDer(x),E=forge$n.pki.privateKeyFromAsn1(S),C={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return forge$n.pki.encryptRsaPrivateKey(E,n,C)}else{if(_==="libp2p-key")return exporter(this.bytes,n);throw new CodeError(`export format '${_}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}}async function unmarshalRsaPrivateKey(r){const n=pkcs1ToJwk(r);if(keySize(n)>MAX_KEY_SIZE)throw new CodeError("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const _=await unmarshalPrivateKey$1(n);return new RsaPrivateKey(_.privateKey,_.publicKey)}function unmarshalRsaPublicKey(r){const n=pkixToJwk(r);if(keySize(n)>MAX_KEY_SIZE)throw new CodeError("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new RsaPublicKey(n)}async function fromJwk(r){if(keySize(r)>MAX_KEY_SIZE)throw new CodeError("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const n=await unmarshalPrivateKey$1(r);return new RsaPrivateKey(n.privateKey,n.publicKey)}async function generateKeyPair$2(r){if(r>MAX_KEY_SIZE)throw new CodeError("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const n=await generateKey$1(r);return new RsaPrivateKey(n.privateKey,n.publicKey)}const RSA=Object.freeze(Object.defineProperty({__proto__:null,MAX_KEY_SIZE,RsaPrivateKey,RsaPublicKey,fromJwk,generateKeyPair:generateKeyPair$2,unmarshalRsaPrivateKey,unmarshalRsaPublicKey},Symbol.toStringTag,{value:"Module"})),Chi=(r,n,_)=>r&n^~r&_,Maj=(r,n,_)=>r&n^r&_^n&_,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:n,B:_,C:x,D:S,E,F:C,G:T,H:B}=this;return[n,_,x,S,E,C,T,B]}set(n,_,x,S,E,C,T,B){this.A=n|0,this.B=_|0,this.C=x|0,this.D=S|0,this.E=E|0,this.F=C|0,this.G=T|0,this.H=B|0}process(n,_){for(let N=0;N<16;N++,_+=4)SHA256_W[N]=n.getUint32(_,!1);for(let N=16;N<64;N++){const V=SHA256_W[N-15],D=SHA256_W[N-2],O=rotr(V,7)^rotr(V,18)^V>>>3,F=rotr(D,17)^rotr(D,19)^D>>>10;SHA256_W[N]=F+SHA256_W[N-7]+O+SHA256_W[N-16]|0}let{A:x,B:S,C:E,D:C,E:T,F:B,G:A,H:I}=this;for(let N=0;N<64;N++){const V=rotr(T,6)^rotr(T,11)^rotr(T,25),D=I+V+Chi(T,B,A)+SHA256_K[N]+SHA256_W[N]|0,F=(rotr(x,2)^rotr(x,13)^rotr(x,22))+Maj(x,S,E)|0;I=A,A=B,B=T,T=C+D|0,C=E,E=S,S=x,x=D+F|0}x=x+this.A|0,S=S+this.B|0,E=E+this.C|0,C=C+this.D|0,T=T+this.E|0,B=B+this.F|0,A=A+this.G|0,I=I+this.H|0,this.set(x,S,E,C,T,B,A,I)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256$3=wrapConstructor(()=>new SHA256);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts(r){const n=validateBasic(r);validateObject(n,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:_,Fp:x,a:S}=n;if(_){if(!x.eql(S,x.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof _!="object"||typeof _.beta!="bigint"||typeof _.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...n})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER={Err:class extends Error{constructor(n=""){super(n)}},_parseInt(r){const{Err:n}=DER;if(r.length<2||r[0]!==2)throw new n("Invalid signature integer tag");const _=r[1],x=r.subarray(2,_+2);if(!_||x.length!==_)throw new n("Invalid signature integer: wrong length");if(x[0]&128)throw new n("Invalid signature integer: negative");if(x[0]===0&&!(x[1]&128))throw new n("Invalid signature integer: unnecessary leading zero");return{d:b2n(x),l:r.subarray(_+2)}},toSig(r){const{Err:n}=DER,_=typeof r=="string"?h2b(r):r;if(!(_ instanceof Uint8Array))throw new Error("ui8a expected");let x=_.length;if(x<2||_[0]!=48)throw new n("Invalid signature tag");if(_[1]!==x-2)throw new n("Invalid signature: incorrect length");const{d:S,l:E}=DER._parseInt(_.subarray(2)),{d:C,l:T}=DER._parseInt(E);if(T.length)throw new n("Invalid signature: left bytes after parsing");return{r:S,s:C}},hexFromSig(r){const n=A=>Number.parseInt(A[0],16)&8?"00"+A:A,_=A=>{const I=A.toString(16);return I.length&1?`0${I}`:I},x=n(_(r.s)),S=n(_(r.r)),E=x.length/2,C=S.length/2,T=_(E),B=_(C);return`30${_(C+E+4)}02${B}${S}02${T}${x}`}},_0n=BigInt(0),_1n$1=BigInt(1);BigInt(2);const _3n=BigInt(3);BigInt(4);function weierstrassPoints(r){const n=validatePointOpts(r),{Fp:_}=n,x=n.toBytes||((O,F,M)=>{const L=F.toAffine();return concatBytes(Uint8Array.from([4]),_.toBytes(L.x),_.toBytes(L.y))}),S=n.fromBytes||(O=>{const F=O.subarray(1),M=_.fromBytes(F.subarray(0,_.BYTES)),L=_.fromBytes(F.subarray(_.BYTES,2*_.BYTES));return{x:M,y:L}});function E(O){const{a:F,b:M}=n,L=_.sqr(O),j=_.mul(L,O);return _.add(_.add(j,_.mul(O,F)),M)}if(!_.eql(_.sqr(n.Gy),E(n.Gx)))throw new Error("bad generator point: equation left != right");function C(O){return typeof O=="bigint"&&_0n<O&&O<n.n}function T(O){if(!C(O))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function B(O){const{allowedPrivateKeyLengths:F,nByteLength:M,wrapPrivateKey:L,n:j}=n;if(F&&typeof O!="bigint"){if(O instanceof Uint8Array&&(O=bytesToHex(O)),typeof O!="string"||!F.includes(O.length))throw new Error("Invalid key");O=O.padStart(M*2,"0")}let q;try{q=typeof O=="bigint"?O:bytesToNumberBE(ensureBytes("private key",O,M))}catch{throw new Error(`private key must be ${M} bytes, hex or bigint, not ${typeof O}`)}return L&&(q=mod(q,j)),T(q),q}const A=new Map;function I(O){if(!(O instanceof N))throw new Error("ProjectivePoint expected")}class N{constructor(F,M,L){if(this.px=F,this.py=M,this.pz=L,F==null||!_.isValid(F))throw new Error("x required");if(M==null||!_.isValid(M))throw new Error("y required");if(L==null||!_.isValid(L))throw new Error("z required")}static fromAffine(F){const{x:M,y:L}=F||{};if(!F||!_.isValid(M)||!_.isValid(L))throw new Error("invalid affine point");if(F instanceof N)throw new Error("projective point not allowed");const j=q=>_.eql(q,_.ZERO);return j(M)&&j(L)?N.ZERO:new N(M,L,_.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(F){const M=_.invertBatch(F.map(L=>L.pz));return F.map((L,j)=>L.toAffine(M[j])).map(N.fromAffine)}static fromHex(F){const M=N.fromAffine(S(ensureBytes("pointHex",F)));return M.assertValidity(),M}static fromPrivateKey(F){return N.BASE.multiply(B(F))}_setWindowSize(F){this._WINDOW_SIZE=F,A.delete(this)}assertValidity(){if(this.is0()){if(n.allowInfinityPoint&&!_.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:F,y:M}=this.toAffine();if(!_.isValid(F)||!_.isValid(M))throw new Error("bad point: x or y not FE");const L=_.sqr(M),j=E(F);if(!_.eql(L,j))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:F}=this.toAffine();if(_.isOdd)return!_.isOdd(F);throw new Error("Field doesn't support isOdd")}equals(F){I(F);const{px:M,py:L,pz:j}=this,{px:q,py:H,pz:X}=F,J=_.eql(_.mul(M,X),_.mul(q,j)),Z=_.eql(_.mul(L,X),_.mul(H,j));return J&&Z}negate(){return new N(this.px,_.neg(this.py),this.pz)}double(){const{a:F,b:M}=n,L=_.mul(M,_3n),{px:j,py:q,pz:H}=this;let X=_.ZERO,J=_.ZERO,Z=_.ZERO,ae=_.mul(j,j),ce=_.mul(q,q),ve=_.mul(H,H),pe=_.mul(j,q);return pe=_.add(pe,pe),Z=_.mul(j,H),Z=_.add(Z,Z),X=_.mul(F,Z),J=_.mul(L,ve),J=_.add(X,J),X=_.sub(ce,J),J=_.add(ce,J),J=_.mul(X,J),X=_.mul(pe,X),Z=_.mul(L,Z),ve=_.mul(F,ve),pe=_.sub(ae,ve),pe=_.mul(F,pe),pe=_.add(pe,Z),Z=_.add(ae,ae),ae=_.add(Z,ae),ae=_.add(ae,ve),ae=_.mul(ae,pe),J=_.add(J,ae),ve=_.mul(q,H),ve=_.add(ve,ve),ae=_.mul(ve,pe),X=_.sub(X,ae),Z=_.mul(ve,ce),Z=_.add(Z,Z),Z=_.add(Z,Z),new N(X,J,Z)}add(F){I(F);const{px:M,py:L,pz:j}=this,{px:q,py:H,pz:X}=F;let J=_.ZERO,Z=_.ZERO,ae=_.ZERO;const ce=n.a,ve=_.mul(n.b,_3n);let pe=_.mul(M,q),G=_.mul(L,H),Y=_.mul(j,X),U=_.add(M,L),W=_.add(q,H);U=_.mul(U,W),W=_.add(pe,G),U=_.sub(U,W),W=_.add(M,j);let ee=_.add(q,X);return W=_.mul(W,ee),ee=_.add(pe,Y),W=_.sub(W,ee),ee=_.add(L,j),J=_.add(H,X),ee=_.mul(ee,J),J=_.add(G,Y),ee=_.sub(ee,J),ae=_.mul(ce,W),J=_.mul(ve,Y),ae=_.add(J,ae),J=_.sub(G,ae),ae=_.add(G,ae),Z=_.mul(J,ae),G=_.add(pe,pe),G=_.add(G,pe),Y=_.mul(ce,Y),W=_.mul(ve,W),G=_.add(G,Y),Y=_.sub(pe,Y),Y=_.mul(ce,Y),W=_.add(W,Y),pe=_.mul(G,W),Z=_.add(Z,pe),pe=_.mul(ee,W),J=_.mul(U,J),J=_.sub(J,pe),pe=_.mul(U,G),ae=_.mul(ee,ae),ae=_.add(ae,pe),new N(J,Z,ae)}subtract(F){return this.add(F.negate())}is0(){return this.equals(N.ZERO)}wNAF(F){return D.wNAFCached(this,A,F,M=>{const L=_.invertBatch(M.map(j=>j.pz));return M.map((j,q)=>j.toAffine(L[q])).map(N.fromAffine)})}multiplyUnsafe(F){const M=N.ZERO;if(F===_0n)return M;if(T(F),F===_1n$1)return this;const{endo:L}=n;if(!L)return D.unsafeLadder(this,F);let{k1neg:j,k1:q,k2neg:H,k2:X}=L.splitScalar(F),J=M,Z=M,ae=this;for(;q>_0n||X>_0n;)q&_1n$1&&(J=J.add(ae)),X&_1n$1&&(Z=Z.add(ae)),ae=ae.double(),q>>=_1n$1,X>>=_1n$1;return j&&(J=J.negate()),H&&(Z=Z.negate()),Z=new N(_.mul(Z.px,L.beta),Z.py,Z.pz),J.add(Z)}multiply(F){T(F);let M=F,L,j;const{endo:q}=n;if(q){const{k1neg:H,k1:X,k2neg:J,k2:Z}=q.splitScalar(M);let{p:ae,f:ce}=this.wNAF(X),{p:ve,f:pe}=this.wNAF(Z);ae=D.constTimeNegate(H,ae),ve=D.constTimeNegate(J,ve),ve=new N(_.mul(ve.px,q.beta),ve.py,ve.pz),L=ae.add(ve),j=ce.add(pe)}else{const{p:H,f:X}=this.wNAF(M);L=H,j=X}return N.normalizeZ([L,j])[0]}multiplyAndAddUnsafe(F,M,L){const j=N.BASE,q=(X,J)=>J===_0n||J===_1n$1||!X.equals(j)?X.multiplyUnsafe(J):X.multiply(J),H=q(this,M).add(q(F,L));return H.is0()?void 0:H}toAffine(F){const{px:M,py:L,pz:j}=this,q=this.is0();F==null&&(F=q?_.ONE:_.inv(j));const H=_.mul(M,F),X=_.mul(L,F),J=_.mul(j,F);if(q)return{x:_.ZERO,y:_.ZERO};if(!_.eql(J,_.ONE))throw new Error("invZ was invalid");return{x:H,y:X}}isTorsionFree(){const{h:F,isTorsionFree:M}=n;if(F===_1n$1)return!0;if(M)return M(N,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:F,clearCofactor:M}=n;return F===_1n$1?this:M?M(N,this):this.multiplyUnsafe(n.h)}toRawBytes(F=!0){return this.assertValidity(),x(N,this,F)}toHex(F=!0){return bytesToHex(this.toRawBytes(F))}}N.BASE=new N(n.Gx,n.Gy,_.ONE),N.ZERO=new N(_.ZERO,_.ONE,_.ZERO);const V=n.nBitLength,D=wNAF(N,n.endo?Math.ceil(V/2):V);return{CURVE:n,ProjectivePoint:N,normPrivateKeyToScalar:B,weierstrassEquation:E,isWithinCurveOrder:C}}function validateOpts(r){const n=validateBasic(r);return validateObject(n,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...n})}function weierstrass(r){const n=validateOpts(r),{Fp:_,n:x}=n,S=_.BYTES+1,E=2*_.BYTES+1;function C(W){return _0n<W&&W<_.ORDER}function T(W){return mod(W,x)}function B(W){return invert(W,x)}const{ProjectivePoint:A,normPrivateKeyToScalar:I,weierstrassEquation:N,isWithinCurveOrder:V}=weierstrassPoints({...n,toBytes(W,ee,re){const oe=ee.toAffine(),ie=_.toBytes(oe.x),ne=concatBytes;return re?ne(Uint8Array.from([ee.hasEvenY()?2:3]),ie):ne(Uint8Array.from([4]),ie,_.toBytes(oe.y))},fromBytes(W){const ee=W.length,re=W[0],oe=W.subarray(1);if(ee===S&&(re===2||re===3)){const ie=bytesToNumberBE(oe);if(!C(ie))throw new Error("Point is not on curve");const ne=N(ie);let te=_.sqrt(ne);const K=(te&_1n$1)===_1n$1;return(re&1)===1!==K&&(te=_.neg(te)),{x:ie,y:te}}else if(ee===E&&re===4){const ie=_.fromBytes(oe.subarray(0,_.BYTES)),ne=_.fromBytes(oe.subarray(_.BYTES,2*_.BYTES));return{x:ie,y:ne}}else throw new Error(`Point of length ${ee} was invalid. Expected ${S} compressed bytes or ${E} uncompressed bytes`)}}),D=W=>bytesToHex(numberToBytesBE(W,n.nByteLength));function O(W){const ee=x>>_1n$1;return W>ee}function F(W){return O(W)?T(-W):W}const M=(W,ee,re)=>bytesToNumberBE(W.slice(ee,re));class L{constructor(ee,re,oe){this.r=ee,this.s=re,this.recovery=oe,this.assertValidity()}static fromCompact(ee){const re=n.nByteLength;return ee=ensureBytes("compactSignature",ee,re*2),new L(M(ee,0,re),M(ee,re,2*re))}static fromDER(ee){const{r:re,s:oe}=DER.toSig(ensureBytes("DER",ee));return new L(re,oe)}assertValidity(){if(!V(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!V(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(ee){return new L(this.r,this.s,ee)}recoverPublicKey(ee){const{r:re,s:oe,recovery:ie}=this,ne=Z(ensureBytes("msgHash",ee));if(ie==null||![0,1,2,3].includes(ie))throw new Error("recovery id invalid");const te=ie===2||ie===3?re+n.n:re;if(te>=_.ORDER)throw new Error("recovery id 2 or 3 invalid");const K=ie&1?"03":"02",le=A.fromHex(K+D(te)),ue=B(te),be=T(-ne*ue),ge=T(oe*ue),ye=A.BASE.multiplyAndAddUnsafe(le,be,ge);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return O(this.s)}normalizeS(){return this.hasHighS()?new L(this.r,T(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return D(this.r)+D(this.s)}}const j={isValidPrivateKey(W){try{return I(W),!0}catch{return!1}},normPrivateKeyToScalar:I,randomPrivateKey:()=>{const W=getMinHashLength(n.n);return mapHashToField(n.randomBytes(W),n.n)},precompute(W=8,ee=A.BASE){return ee._setWindowSize(W),ee.multiply(BigInt(3)),ee}};function q(W,ee=!0){return A.fromPrivateKey(W).toRawBytes(ee)}function H(W){const ee=W instanceof Uint8Array,re=typeof W=="string",oe=(ee||re)&&W.length;return ee?oe===S||oe===E:re?oe===2*S||oe===2*E:W instanceof A}function X(W,ee,re=!0){if(H(W))throw new Error("first arg must be private key");if(!H(ee))throw new Error("second arg must be public key");return A.fromHex(ee).multiply(I(W)).toRawBytes(re)}const J=n.bits2int||function(W){const ee=bytesToNumberBE(W),re=W.length*8-n.nBitLength;return re>0?ee>>BigInt(re):ee},Z=n.bits2int_modN||function(W){return T(J(W))},ae=bitMask(n.nBitLength);function ce(W){if(typeof W!="bigint")throw new Error("bigint expected");if(!(_0n<=W&&W<ae))throw new Error(`bigint expected < 2^${n.nBitLength}`);return numberToBytesBE(W,n.nByteLength)}function ve(W,ee,re=pe){if(["recovered","canonical"].some(Re=>Re in re))throw new Error("sign() legacy options not supported");const{hash:oe,randomBytes:ie}=n;let{lowS:ne,prehash:te,extraEntropy:K}=re;ne==null&&(ne=!0),W=ensureBytes("msgHash",W),te&&(W=ensureBytes("prehashed msgHash",oe(W)));const le=Z(W),ue=I(ee),be=[ce(ue),ce(le)];if(K!=null){const Re=K===!0?ie(_.BYTES):K;be.push(ensureBytes("extraEntropy",Re))}const ge=concatBytes(...be),ye=le;function Ee(Re){const Ne=J(Re);if(!V(Ne))return;const Te=B(Ne),he=A.BASE.multiply(Ne).toAffine(),xe=T(he.x);if(xe===_0n)return;const fe=T(Te*T(ye+xe*ue));if(fe===_0n)return;let Be=(he.x===xe?0:2)|Number(he.y&_1n$1),Le=fe;return ne&&O(fe)&&(Le=F(fe),Be^=1),new L(xe,Le,Be)}return{seed:ge,k2sig:Ee}}const pe={lowS:n.lowS,prehash:!1},G={lowS:n.lowS,prehash:!1};function Y(W,ee,re=pe){const{seed:oe,k2sig:ie}=ve(W,ee,re),ne=n;return createHmacDrbg(ne.hash.outputLen,ne.nByteLength,ne.hmac)(oe,ie)}A.BASE._setWindowSize(8);function U(W,ee,re,oe=G){const ie=W;if(ee=ensureBytes("msgHash",ee),re=ensureBytes("publicKey",re),"strict"in oe)throw new Error("options.strict was renamed to lowS");const{lowS:ne,prehash:te}=oe;let K,le;try{if(typeof ie=="string"||ie instanceof Uint8Array)try{K=L.fromDER(ie)}catch(he){if(!(he instanceof DER.Err))throw he;K=L.fromCompact(ie)}else if(typeof ie=="object"&&typeof ie.r=="bigint"&&typeof ie.s=="bigint"){const{r:he,s:xe}=ie;K=new L(he,xe)}else throw new Error("PARSE");le=A.fromHex(re)}catch(he){if(he.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ne&&K.hasHighS())return!1;te&&(ee=n.hash(ee));const{r:ue,s:be}=K,ge=Z(ee),ye=B(be),Ee=T(ge*ye),Re=T(ue*ye),Ne=A.BASE.multiplyAndAddUnsafe(le,Ee,Re)?.toAffine();return Ne?T(Ne.x)===ue:!1}return{CURVE:n,getPublicKey:q,getSharedSecret:X,sign:Y,verify:U,ProjectivePoint:A,Signature:L,utils:j}}class HMAC extends Hash{constructor(n,_){super(),this.finished=!1,this.destroyed=!1,hash(n);const x=toBytes(_);if(this.iHash=n.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const S=this.blockLen,E=new Uint8Array(S);E.set(x.length>S?n.create().update(x).digest():x);for(let C=0;C<E.length;C++)E[C]^=54;this.iHash.update(E),this.oHash=n.create();for(let C=0;C<E.length;C++)E[C]^=106;this.oHash.update(E),E.fill(0)}update(n){return exists(this),this.iHash.update(n),this}digestInto(n){exists(this),bytes(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:_,iHash:x,finished:S,destroyed:E,blockLen:C,outputLen:T}=this;return n=n,n.finished=S,n.destroyed=E,n.blockLen=C,n.outputLen=T,n.oHash=_._cloneInto(n.oHash),n.iHash=x._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(r,n,_)=>new HMAC(r,n).update(_).digest();hmac.create=(r,n)=>new HMAC(r,n);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(r){return{hash:r,hmac:(n,..._)=>hmac(r,n,concatBytes$1(..._)),randomBytes:randomBytes$1}}function createCurve(r,n){const _=x=>weierstrass({...r,...getHash(x)});return Object.freeze({..._(n),create:_})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n=BigInt(1),_2n=BigInt(2),divNearest=(r,n)=>(r+n/_2n)/n;function sqrtMod(r){const n=secp256k1P,_=BigInt(3),x=BigInt(6),S=BigInt(11),E=BigInt(22),C=BigInt(23),T=BigInt(44),B=BigInt(88),A=r*r*r%n,I=A*A*r%n,N=pow2(I,_,n)*I%n,V=pow2(N,_,n)*I%n,D=pow2(V,_2n,n)*A%n,O=pow2(D,S,n)*D%n,F=pow2(O,E,n)*O%n,M=pow2(F,T,n)*F%n,L=pow2(M,B,n)*M%n,j=pow2(L,T,n)*F%n,q=pow2(j,_,n)*I%n,H=pow2(q,C,n)*O%n,X=pow2(H,x,n)*A%n,J=pow2(X,_2n,n);if(!Fp.eql(Fp.sqr(J),r))throw new Error("Cannot find square root");return J}const Fp=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod}),secp256k1=createCurve({a:BigInt(0),b:BigInt(7),Fp,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const n=secp256k1N,_=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),x=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),S=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),E=_,C=BigInt("0x100000000000000000000000000000000"),T=divNearest(E*r,n),B=divNearest(-x*r,n);let A=mod(r-T*_-B*S,n),I=mod(-T*x-B*E,n);const N=A>C,V=I>C;if(N&&(A=n-A),V&&(I=n-I),A>C||I>C)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:N,k1:A,k2neg:V,k2:I}}}},sha256$3);BigInt(0);secp256k1.ProjectivePoint;function generateKey(){return secp256k1.utils.randomPrivateKey()}async function hashAndSign(r,n){const{digest:_}=await sha256$7.digest(n);try{return secp256k1.sign(_,r).toDERRawBytes()}catch(x){throw new CodeError(String(x),"ERR_INVALID_INPUT")}}async function hashAndVerify(r,n,_){try{const{digest:x}=await sha256$7.digest(_);return secp256k1.verify(n,x,r)}catch(x){throw new CodeError(String(x),"ERR_INVALID_INPUT")}}function compressPublicKey(r){return secp256k1.ProjectivePoint.fromHex(r).toRawBytes(!0)}function validatePrivateKey(r){try{secp256k1.getPublicKey(r,!0)}catch(n){throw new CodeError(String(n),"ERR_INVALID_PRIVATE_KEY")}}function validatePublicKey(r){try{secp256k1.ProjectivePoint.fromHex(r)}catch(n){throw new CodeError(String(n),"ERR_INVALID_PUBLIC_KEY")}}function computePublicKey(r){try{return secp256k1.getPublicKey(r,!0)}catch(n){throw new CodeError(String(n),"ERR_INVALID_PRIVATE_KEY")}}class Secp256k1PublicKey{constructor(n){_t(this,"_key");validatePublicKey(n),this._key=n}async verify(n,_){return hashAndVerify(this._key,_,n)}marshal(){return compressPublicKey(this._key)}get bytes(){return PublicKey.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(n){return equals$2(this.bytes,n.bytes)}async hash(){const{bytes:n}=await sha256$7.digest(this.bytes);return n}}class Secp256k1PrivateKey{constructor(n,_){_t(this,"_key");_t(this,"_publicKey");this._key=n,this._publicKey=_??computePublicKey(n),validatePrivateKey(this._key),validatePublicKey(this._publicKey)}async sign(n){return hashAndSign(this._key,n)}get public(){return new Secp256k1PublicKey(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(n){return equals$2(this.bytes,n.bytes)}async hash(){const{bytes:n}=await sha256$7.digest(this.bytes);return n}async id(){const n=await this.public.hash();return toString$5(n,"base58btc")}async export(n,_="libp2p-key"){if(_==="libp2p-key")return exporter(this.bytes,n);throw new CodeError(`export format '${_}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function unmarshalSecp256k1PrivateKey(r){return new Secp256k1PrivateKey(r)}function unmarshalSecp256k1PublicKey(r){return new Secp256k1PublicKey(r)}async function generateKeyPair$1(){const r=generateKey();return new Secp256k1PrivateKey(r)}const Secp256k1=Object.freeze(Object.defineProperty({__proto__:null,Secp256k1PrivateKey,Secp256k1PublicKey,generateKeyPair:generateKeyPair$1,unmarshalSecp256k1PrivateKey,unmarshalSecp256k1PublicKey},Symbol.toStringTag,{value:"Module"})),supportedKeys={rsa:RSA,ed25519:Ed25519,secp256k1:Secp256k1};function unsupportedKey(r){const n=Object.keys(supportedKeys).join(" / ");return new CodeError(`invalid or unsupported key type ${r}. Must be ${n}`,"ERR_UNSUPPORTED_KEY_TYPE")}function typeToKey(r){if(r=r.toLowerCase(),r==="rsa"||r==="ed25519"||r==="secp256k1")return supportedKeys[r];throw unsupportedKey(r)}async function generateKeyPair(r,n){return typeToKey(r).generateKeyPair(n??2048)}async function unmarshalPrivateKey(r){const n=PrivateKey.decode(r),_=n.Data??new Uint8Array;switch(n.Type){case KeyType$1.RSA:return supportedKeys.rsa.unmarshalRsaPrivateKey(_);case KeyType$1.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PrivateKey(_);case KeyType$1.Secp256k1:return supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey(_);default:throw unsupportedKey(n.Type??"RSA")}}function compare$1(r,n){for(let _=0;_<r.byteLength;_++){if(r[_]<n[_])return-1;if(r[_]>n[_])return 1}return r.byteLength>n.byteLength?1:r.byteLength<n.byteLength?-1:0}const unmarshal=supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey,unmarshalPubKey=supportedKeys.secp256k1.unmarshalSecp256k1PublicKey,verifySignature=async(r,n,_)=>{if(!r)throw new Error("No signature given");if(!n)throw new Error("Given publicKey was undefined");if(!_)throw new Error("Given input data was undefined");_ instanceof Uint8Array||(_=typeof _=="string"?fromString$1(_):new Uint8Array(_));const x=(E,C,T)=>E.verify(C,T);let S=!1;try{const E=unmarshalPubKey(fromString$1(n,"base16"));S=await x(E,_,fromString$1(r,"base16"))}catch{}return Promise.resolve(S)},signMessage=async(r,n)=>{if(!r)throw new Error("No signing key given");if(!n)throw new Error("Given input data was undefined");return n instanceof Uint8Array||(n=typeof n=="string"?fromString$1(n):new Uint8Array(n)),toString$5(await r.sign(n),"base16")},verifiedCachePromise=LRUStorage({size:1e3}),verifyMessage=async(r,n,_)=>{const x=await verifiedCachePromise,S=await x.get(r);let E=!1;if(S){const C=(T,B)=>B instanceof Uint8Array?compare$1(T,B)===0:T.toString()===B.toString();E=S.publicKey===n&&C(S.data,_)}else{const C=await verifySignature(r,n,_);E=C,C&&await x.put(r,{publicKey:n,data:_})}return E},defaultPath="./keystore",KeyStore=async({storage:r,path:n}={})=>{r=r||await ComposedStorage(await LRUStorage({size:1e3}),await LevelStorage({path:n||defaultPath}));const _=async()=>{await r.close()},x=async()=>{await r.clear()},S=async A=>{if(!A)throw new Error("id needed to check a key");let I=!1;try{const N=await r.get("private_"+A);I=N!=null}catch{console.error("Error: ENOENT: no such file or directory")}return I},E=async(A,I)=>{await r.put("private_"+A,I.privateKey)};return{clear:x,close:_,hasKey:S,addKey:E,createKey:async A=>{if(!A)throw new Error("id needed to create a key");const I=await generateKeyPair("secp256k1"),N=await unmarshalPrivateKey(I.bytes),D={publicKey:N.public.marshal(),privateKey:N.marshal()};return await E(A,D),N},getKey:async A=>{if(!A)throw new Error("id needed to get a key");let I;try{I=await r.get("private_"+A)}catch{}if(I)return unmarshal(I)},getPublic:(A,I={})=>{const N=["hex","buffer"],V=I.format||"hex";if(N.indexOf(V)===-1)throw new Error("Supported formats are `hex` and `buffer`");const D=A.public.marshal();return V==="buffer"?D:toString$5(D,"base16")}}},codec$5=dagCbor$1,hasher$4=sha256$7,hashStringEncoding$4=base58btc$2,Identity=async({id:r,publicKey:n,signatures:_,type:x,sign:S,verify:E}={})=>{if(!r)throw new Error("Identity id is required");if(!n)throw new Error("Invalid public key");if(!_)throw new Error("Signatures object is required");if(!_.id)throw new Error("Signature of id is required");if(!_.publicKey)throw new Error("Signature of publicKey+id is required");if(!x)throw new Error("Identity type is required");_=Object.assign({},_);const C={id:r,publicKey:n,signatures:_,type:x,sign:S,verify:E},{hash:T,bytes:B}=await _encodeIdentity(C);return C.hash=T,C.bytes=B,C},_encodeIdentity=async r=>{const{id:n,publicKey:_,signatures:x,type:S}=r,E={id:n,publicKey:_,signatures:x,type:S},{cid:C,bytes:T}=await encode$h({value:E,codec:codec$5,hasher:hasher$4});return{hash:C.toString(hashStringEncoding$4),bytes:Uint8Array.from(T)}},decodeIdentity=async r=>{const{value:n}=await decode$g({bytes:r,codec:codec$5,hasher:hasher$4});return Identity({...n})},isIdentity=r=>!!(r.id&&r.hash&&r.bytes&&r.publicKey&&r.signatures&&r.signatures.id&&r.signatures.publicKey&&r.type),isEqual=(r,n)=>r.id===n.id&&r.hash===n.hash&&r.type===n.type&&r.publicKey===n.publicKey&&r.signatures.id===n.signatures.id&&r.signatures.publicKey===n.signatures.publicKey,type$8="publickey",verifyIdentity=async r=>{const{id:n,publicKey:_,signatures:x}=r;return verifyMessage(x.publicKey,n,_+x.id)},PublicKeyIdentityProvider=({keystore:r})=>async()=>{if(!r)throw new Error("PublicKeyIdentityProvider requires a keystore parameter");return{type:type$8,getId:async({id:x}={})=>{if(!x)throw new Error("id is required");const S=await r.getKey(x)||await r.createKey(x);return toString$5(S.public.marshal(),"base16")},signIdentity:async(x,{id:S}={})=>{if(!S)throw new Error("id is required");const E=await r.getKey(S);if(!E)throw new Error(`Signing key for '${S}' not found`);return signMessage(E,x)}}};PublicKeyIdentityProvider.verifyIdentity=verifyIdentity;PublicKeyIdentityProvider.type=type$8;const identityProviders={},isProviderSupported=r=>Object.keys(identityProviders).includes(r),getIdentityProvider=r=>{if(!isProviderSupported(r))throw new Error(`IdentityProvider type '${r}' is not supported`);return identityProviders[r]},useIdentityProvider=r=>{if(!r.type||typeof r.type!="string")throw new Error("Given IdentityProvider doesn't have a field 'type'.");if(!r.verifyIdentity)throw new Error("Given IdentityProvider doesn't have a function 'verifyIdentity'.");identityProviders[r.type]=r};useIdentityProvider(PublicKeyIdentityProvider);const DefaultIdentityKeysPath=posixJoin("./orbitdb","identities"),Identities=async({keystore:r,path:n,storage:_,ipfs:x}={})=>{r=r||await KeyStore({path:n||DefaultIdentityKeysPath}),_||(_=x?await ComposedStorage(await LRUStorage({size:1e3}),await IPFSBlockStorage({ipfs:x,pin:!0})):await MemoryStorage());const S=await LRUStorage({size:1e3}),E=async I=>{const N=await _.get(I);if(N)return decodeIdentity(N)},C=async(I={})=>{I.keystore=r;const N=getIdentityProvider("publickey"),D=await(I.provider||N({keystore:r}))();if(!getIdentityProvider(D.type))throw new Error("Identity provider is unknown. Use useIdentityProvider(provider) to register the identity provider");const O=await D.getId(I),F=await r.getKey(O)||await r.createKey(O),M=r.getPublic(F),L=await signMessage(F,O),j=await D.signIdentity(M+L,I),H=await Identity({id:O,publicKey:M,signatures:{id:L,publicKey:j},type:D.type,sign:B,verify:A});return await _.put(H.hash,H.bytes),H},T=async I=>{if(!isIdentity(I))return!1;const{id:N,publicKey:V,signatures:D}=I;if(!await A(D.id,V,N))return!1;const F=await S.get(D.id);if(F)return isEqual(I,F);const L=await getIdentityProvider(I.type).verifyIdentity(I);return L&&await S.put(D.id,I),L},B=async(I,N)=>{const V=await r.getKey(I.id);if(!V)throw new Error("Private signing key not found from KeyStore");return await signMessage(V,N)},A=async(I,N,V)=>await verifyMessage(I,N,V);return{createIdentity:C,verifyIdentity:T,getIdentity:E,sign:B,verify:A,keystore:r}},isValidAddress=r=>{if(r=r.toString(),!r.startsWith("/orbitdb")&&!r.startsWith("\\orbitdb"))return!1;r=r.replaceAll("/orbitdb/",""),r=r.replaceAll("\\orbitdb\\",""),r=r.replaceAll("/",""),r=r.replaceAll("\\","");let n;try{n=CID$1.parse(r,base58btc$2)}catch{return!1}return n!==void 0},OrbitDBAddress=r=>{if(r&&r.protocol==="orbitdb"&&r.hash)return r;const n="orbitdb",_=r.replace("/orbitdb/","").replace("\\orbitdb\\","");return{protocol:n,hash:_,address:r,toString:()=>posixJoin("/",n,_)}},codec$4=dagCbor$1,hasher$3=sha256$7,hashStringEncoding$3=base58btc$2,ManifestStore=async({ipfs:r,storage:n}={})=>(n=n||await ComposedStorage(await LRUStorage({size:1e3}),await IPFSBlockStorage({ipfs:r,pin:!0})),{get:async E=>{const C=await n.get(E),{value:T}=await decode$g({bytes:C,codec:codec$4,hasher:hasher$3});return T},create:async({name:E,type:C,accessController:T,meta:B})=>{if(!E)throw new Error("name is required");if(!C)throw new Error("type is required");if(!T)throw new Error("accessController is required");const A=Object.assign({name:E,type:C,accessController:T},B!==void 0?{meta:B}:{}),{cid:I,bytes:N}=await encode$h({value:A,codec:codec$4,hasher:hasher$3}),V=I.toString(hashStringEncoding$3);return await n.put(V,N),{hash:V,manifest:A}},close:async()=>{await n.close()}}),createId=async(r=32)=>{const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let _="",x=0;for(;x<r;)_+=n.charAt(Math.floor(Math.random()*n.length)),x+=1;return _},codec$3=dagCbor$1,hasher$2=sha256$7,hashStringEncoding$2=base58btc$2,AccessControlList=async({storage:r,type:n,params:_})=>{const x={type:n,..._},{cid:S,bytes:E}=await encode$h({value:x,codec:codec$3,hasher:hasher$2}),C=S.toString(hashStringEncoding$2);return await r.put(C,E),C},type$7="ipfs",IPFSAccessController=({write:r,storage:n}={})=>async({orbitdb:_,identities:x,address:S})=>{if(n=n||await ComposedStorage(await LRUStorage({size:1e3}),await IPFSBlockStorage({ipfs:_.ipfs,pin:!0})),r=r||[_.identity.id],S){const C=await n.get(S.replaceAll("/ipfs/","")),{value:T}=await decode$g({bytes:C,codec:codec$3,hasher:hasher$2});r=T.write}else S=await AccessControlList({storage:n,type:type$7,params:{write:r}}),S=posixJoin("/",type$7,S);return{type:type$7,address:S,write:r,canAppend:async C=>{const T=await x.getIdentity(C.identity);if(!T)return!1;const{id:B}=T;return r.includes(B)||r.includes("*")?x.verifyIdentity(T):!1}}};IPFSAccessController.type=type$7;const type$6="orbitdb",OrbitDBAccessController=({write:r}={})=>async({orbitdb:n,identities:_,address:x,name:S})=>{x=x||S||await createId(64),r=r||[n.identity.id];const E=await n.open(x,{type:"keyvalue",AccessController:IPFSAccessController({write:r})});x=E.address;const C=async O=>{const F=await _.getIdentity(O.identity);if(!F)return!1;const{id:M}=F;return await N("write",M)||await N("admin",M)?_.verifyIdentity(F):!1},T=async()=>{const O=[];for await(const M of E.iterator())O[M.key]=M.value;const F=M=>{const L=M[0];O[L]=new Set([...O[L]||[],...M[1]])};return Object.entries({...O,admin:new Set([...O.admin||[],...E.access.write])}).forEach(F),O},B=async O=>(await T())[O]||new Set([]),A=async()=>{await E.close()},I=async()=>{await E.drop()},N=async(O,F)=>{const M=new Set(await B(O));return M.has(F)||M.has("*")};return{type:type$6,address:x,write:r,canAppend:C,capabilities:T,get:B,grant:async(O,F)=>{const M=new Set([...await E.get(O)||[],F]);await E.put(O,Array.from(M.values()))},revoke:async(O,F)=>{const M=new Set(await E.get(O)||[]);M.delete(F),M.size>0?await E.put(O,Array.from(M.values())):await E.del(O)},close:A,drop:I,events:E.events}};OrbitDBAccessController.type=type$6;const accessControllers={},getAccessController=r=>{if(!accessControllers[r])throw new Error(`AccessController type '${r}' is not supported`);return accessControllers[r]},useAccessController=r=>{if(!r.type)throw new Error("AccessController does not contain required field 'type'.");accessControllers[r.type]=r};useAccessController(IPFSAccessController);useAccessController(OrbitDBAccessController);const DefaultDatabaseType="events",DefaultAccessController=IPFSAccessController,OrbitDB=async({ipfs:r,id:n,identity:_,identities:x,directory:S}={})=>{if(r==null)throw new Error("IPFS instance is a required argument.");n=n||await createId();const{id:E}=await r.id();S=S||"./orbitdb";let C;x?C=x.keystore:(C=await KeyStore({path:posixJoin(S,"./keystore")}),x=await Identities({ipfs:r,keystore:C})),_?_.provider&&(_=await x.createIdentity({..._})):_=await x.createIdentity({id:n});const T=await ManifestStore({ipfs:r});let B={};const A=async(V,{type:D,meta:O,sync:F,Database:M,AccessController:L,headsStorage:j,entryStorage:q,indexStorage:H,referencesCount:X}={})=>{let J,Z,ae;if(B[V])return B[V];if(isValidAddress(V)){const ve=OrbitDBAddress(V);Z=await T.get(ve.hash);const pe=Z.accessController.split("/",2).pop();L=getAccessController(pe)(),ae=await L({orbitdb:{open:A,identity:_,ipfs:r},identities:x,address:Z.accessController}),J=Z.name,D=D||Z.type,O=Z.meta}else{D=D||DefaultDatabaseType,L=L||DefaultAccessController(),ae=await L({orbitdb:{open:A,identity:_,ipfs:r},identities:x,name:V});const ve=await T.create({name:V,type:D,accessController:ae.address,meta:O});if(Z=ve.manifest,V=OrbitDBAddress(ve.hash),J=Z.name,O=Z.meta,B[V])return B[V]}if(M=M||getDatabaseType(D)(),!M)throw new Error(`Unsupported database type: '${D}'`);V=V.toString();const ce=await M({ipfs:r,identity:_,address:V,name:J,access:ae,directory:S,meta:O,syncAutomatically:F,headsStorage:j,entryStorage:q,indexStorage:H,referencesCount:X});return ce.events.on("close",I(V)),B[V]=ce,ce},I=V=>()=>{delete B[V]};return{id:n,open:A,stop:async()=>{for(const V of Object.values(B))await V.close();C&&await C.close(),T&&await T.close(),B={}},ipfs:r,directory:S,keystore:C,identity:_,peerId:E}};let getRandomValues$1;const rnds8$1=new Uint8Array(16);function rng$1(){if(!getRandomValues$1&&(getRandomValues$1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues$1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues$1(rnds8$1)}const byteToHex$1=[];for(let r=0;r<256;++r)byteToHex$1.push((r+256).toString(16).slice(1));function unsafeStringify$1(r,n=0){return byteToHex$1[r[n+0]]+byteToHex$1[r[n+1]]+byteToHex$1[r[n+2]]+byteToHex$1[r[n+3]]+"-"+byteToHex$1[r[n+4]]+byteToHex$1[r[n+5]]+"-"+byteToHex$1[r[n+6]]+byteToHex$1[r[n+7]]+"-"+byteToHex$1[r[n+8]]+byteToHex$1[r[n+9]]+"-"+byteToHex$1[r[n+10]]+byteToHex$1[r[n+11]]+byteToHex$1[r[n+12]]+byteToHex$1[r[n+13]]+byteToHex$1[r[n+14]]+byteToHex$1[r[n+15]]}const randomUUID$1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native$1={randomUUID:randomUUID$1};function v4$1(r,n,_){if(native$1.randomUUID&&!n&&!r)return native$1.randomUUID();r=r||{};const x=r.random||(r.rng||rng$1)();if(x[6]=x[6]&15|64,x[8]=x[8]&63|128,n){_=_||0;for(let S=0;S<16;++S)n[_+S]=x[S];return n}return unsafeStringify$1(x)}const from$1=({name:r,code:n,encode:_})=>new Hasher(r,n,_);class Hasher{constructor(n,_,x){this.name=n,this.code=_,this.encode=x}digest(n){if(n instanceof Uint8Array){const _=this.encode(n);return _ instanceof Uint8Array?create$6(this.code,_):_.then(x=>create$6(this.code,x))}else throw Error("Unknown type, must be binary type")}}const readonly=({enumerable:r=!0,configurable:n=!1}={})=>({enumerable:r,configurable:n,writable:!1}),links=function*(r,n){if(r!=null&&!(r instanceof Uint8Array))for(const[_,x]of Object.entries(r)){const S=[...n,_];if(x!=null&&typeof x=="object")if(Array.isArray(x))for(const[E,C]of x.entries()){const T=[...S,E],B=CID$2.asCID(C);B?yield[T.join("/"),B]:typeof C=="object"&&(yield*links(C,T))}else{const E=CID$2.asCID(x);E?yield[S.join("/"),E]:yield*links(x,S)}}},tree=function*(r,n){if(r!=null)for(const[_,x]of Object.entries(r)){const S=[...n,_];if(yield S.join("/"),x!=null&&!(x instanceof Uint8Array)&&typeof x=="object"&&!CID$2.asCID(x))if(Array.isArray(x))for(const[E,C]of x.entries()){const T=[...S,E];yield T.join("/"),typeof C=="object"&&!CID$2.asCID(C)&&(yield*tree(C,T))}else yield*tree(x,S)}},get$1=(r,n)=>{let _=r;for(const[x,S]of n.entries()){if(_=_[S],_==null)throw new Error(`Object has no property at ${n.slice(0,x+1).map(C=>`[${JSON.stringify(C)}]`).join("")}`);const E=CID$2.asCID(_);if(E)return{value:E,remaining:n.slice(x+1).join("/")}}return{value:_}};class Block{constructor({cid:n,bytes:_,value:x}){if(!n||!_||typeof x>"u")throw new Error("Missing required argument");this.cid=n,this.bytes=_,this.value=x,this.asBlock=this,Object.defineProperties(this,{cid:readonly(),bytes:readonly(),value:readonly(),asBlock:readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(n="/"){return get$1(this.value,n.split("/").filter(Boolean))}}const encode$b=async({value:r,codec:n,hasher:_})=>{if(typeof r>"u")throw new Error('Missing required argument "value"');if(!n||!_)throw new Error("Missing required argument: codec or hasher");const x=n.encode(r),S=await _.digest(x),E=CID$2.create(1,n.code,S);return new Block({value:r,bytes:x,cid:E})},decode$a=async({bytes:r,codec:n,hasher:_})=>{if(!r)throw new Error('Missing required argument "bytes"');if(!n||!_)throw new Error("Missing required argument: codec or hasher");const x=n.decode(r),S=await _.digest(r),E=CID$2.create(1,n.code,S);return new Block({value:x,bytes:r,cid:E})},typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";const n=typeof r;if(typeofs.includes(n))return n;if(n==="function")return"Function";if(Array.isArray(r))return"Array";if(isBuffer$3(r))return"Buffer";const _=getObjectType(r);return _||"Object"}function isBuffer$3(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function getObjectType(r){const n=Object.prototype.toString.call(r).slice(8,-1);if(objectTypeNames.includes(n))return n}class Type{constructor(n,_,x){this.major=n,this.majorEncoded=n<<5,this.name=_,this.terminal=x}toString(){return`Type[${this.major}].${this.name}`}compare(n){return this.major<n.major?-1:this.major>n.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(n,_,x){this.type=n,this.value=_,this.encodedLength=x,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder=new TextDecoder,textEncoder=new TextEncoder;function isBuffer$2(r){return useBuffer&&globalThis.Buffer.isBuffer(r)}function asU8A(r){return r instanceof Uint8Array?isBuffer$2(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}const toString$4=useBuffer?(r,n,_)=>_-n>64?globalThis.Buffer.from(r.subarray(n,_)).toString("utf8"):utf8Slice(r,n,_):(r,n,_)=>_-n>64?textDecoder.decode(r.subarray(n,_)):utf8Slice(r,n,_),fromString=useBuffer?r=>r.length>64?globalThis.Buffer.from(r):utf8ToBytes(r):r=>r.length>64?textEncoder.encode(r):utf8ToBytes(r),fromArray=r=>Uint8Array.from(r),slice=useBuffer?(r,n,_)=>isBuffer$2(r)?new Uint8Array(r.subarray(n,_)):r.slice(n,_):(r,n,_)=>r.slice(n,_),concat=useBuffer?(r,n)=>(r=r.map(_=>_ instanceof Uint8Array?_:globalThis.Buffer.from(_)),asU8A(globalThis.Buffer.concat(r,n))):(r,n)=>{const _=new Uint8Array(n);let x=0;for(let S of r)x+S.length>_.length&&(S=S.subarray(0,_.length-x)),_.set(S,x),x+=S.length;return _},alloc=useBuffer?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function compare(r,n){if(isBuffer$2(r)&&isBuffer$2(n))return r.compare(n);for(let _=0;_<r.length;_++)if(r[_]!==n[_])return r[_]<n[_]?-1:1;return 0}function utf8ToBytes(r){const n=[];let _=0;for(let x=0;x<r.length;x++){let S=r.charCodeAt(x);S<128?n[_++]=S:S<2048?(n[_++]=S>>6|192,n[_++]=S&63|128):(S&64512)===55296&&x+1<r.length&&(r.charCodeAt(x+1)&64512)===56320?(S=65536+((S&1023)<<10)+(r.charCodeAt(++x)&1023),n[_++]=S>>18|240,n[_++]=S>>12&63|128,n[_++]=S>>6&63|128,n[_++]=S&63|128):(n[_++]=S>>12|224,n[_++]=S>>6&63|128,n[_++]=S&63|128)}return n}function utf8Slice(r,n,_){const x=[];for(;n<_;){const S=r[n];let E=null,C=S>239?4:S>223?3:S>191?2:1;if(n+C<=_){let T,B,A,I;switch(C){case 1:S<128&&(E=S);break;case 2:T=r[n+1],(T&192)===128&&(I=(S&31)<<6|T&63,I>127&&(E=I));break;case 3:T=r[n+1],B=r[n+2],(T&192)===128&&(B&192)===128&&(I=(S&15)<<12|(T&63)<<6|B&63,I>2047&&(I<55296||I>57343)&&(E=I));break;case 4:T=r[n+1],B=r[n+2],A=r[n+3],(T&192)===128&&(B&192)===128&&(A&192)===128&&(I=(S&15)<<18|(T&63)<<12|(B&63)<<6|A&63,I>65535&&I<1114112&&(E=I))}}E===null?(E=65533,C=1):E>65535&&(E-=65536,x.push(E>>>10&1023|55296),E=56320|E&1023),x.push(E),n+=C}return decodeCodePointsArray(x)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(r){const n=r.length;if(n<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,r);let _="",x=0;for(;x<n;)_+=String.fromCharCode.apply(String,r.slice(x,x+=MAX_ARGUMENTS_LENGTH));return _}const defaultChunkSize=256;class Bl{constructor(n=defaultChunkSize){this.chunkSize=n,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(n){let _=this.chunks[this.chunks.length-1];if(this.cursor+n.length<=this.maxCursor+1){const S=_.length-(this.maxCursor-this.cursor)-1;_.set(n,S)}else{if(_){const S=_.length-(this.maxCursor-this.cursor)-1;S<_.length&&(this.chunks[this.chunks.length-1]=_.subarray(0,S),this.maxCursor=this.cursor-1)}n.length<64&&n.length<this.chunkSize?(_=alloc(this.chunkSize),this.chunks.push(_),this.maxCursor+=_.length,this._initReuseChunk===null&&(this._initReuseChunk=_),_.set(n,0)):(this.chunks.push(n),this.maxCursor+=n.length)}this.cursor+=n.length}toBytes(n=!1){let _;if(this.chunks.length===1){const x=this.chunks[0];n&&this.cursor>x.length/2?(_=this.cursor===x.length?x:x.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):_=slice(x,0,this.cursor)}else _=concat(this.chunks,this.cursor);return n&&this.reset(),_}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(r,n,_){if(r.length-n<_)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(r,n,_){assertEnoughData(r,n,1);const x=r[n];if(_.strict===!0&&x<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return x}function readUint16(r,n,_){assertEnoughData(r,n,2);const x=r[n]<<8|r[n+1];if(_.strict===!0&&x<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return x}function readUint32(r,n,_){assertEnoughData(r,n,4);const x=r[n]*16777216+(r[n+1]<<16)+(r[n+2]<<8)+r[n+3];if(_.strict===!0&&x<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return x}function readUint64(r,n,_){assertEnoughData(r,n,8);const x=r[n]*16777216+(r[n+1]<<16)+(r[n+2]<<8)+r[n+3],S=r[n+4]*16777216+(r[n+5]<<16)+(r[n+6]<<8)+r[n+7],E=(BigInt(x)<<BigInt(32))+BigInt(S);if(_.strict===!0&&E<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(E<=Number.MAX_SAFE_INTEGER)return Number(E);if(_.allowBigInt===!0)return E;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(r,n,_,x){return new Token(Type.uint,readUint8(r,n+1,x),2)}function decodeUint16(r,n,_,x){return new Token(Type.uint,readUint16(r,n+1,x),3)}function decodeUint32(r,n,_,x){return new Token(Type.uint,readUint32(r,n+1,x),5)}function decodeUint64(r,n,_,x){return new Token(Type.uint,readUint64(r,n+1,x),9)}function encodeUint(r,n){return encodeUintValue(r,0,n.value)}function encodeUintValue(r,n,_){if(_<uintBoundaries[0]){const x=Number(_);r.push([n|x])}else if(_<uintBoundaries[1]){const x=Number(_);r.push([n|24,x])}else if(_<uintBoundaries[2]){const x=Number(_);r.push([n|25,x>>>8,x&255])}else if(_<uintBoundaries[3]){const x=Number(_);r.push([n|26,x>>>24&255,x>>>16&255,x>>>8&255,x&255])}else{const x=BigInt(_);if(x<uintBoundaries[4]){const S=[n|27,0,0,0,0,0,0,0];let E=Number(x&BigInt(4294967295)),C=Number(x>>BigInt(32)&BigInt(4294967295));S[8]=E&255,E=E>>8,S[7]=E&255,E=E>>8,S[6]=E&255,E=E>>8,S[5]=E&255,S[4]=C&255,C=C>>8,S[3]=C&255,C=C>>8,S[2]=C&255,C=C>>8,S[1]=C&255,r.push(S)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function r(n){return encodeUintValue.encodedSize(n.value)};encodeUintValue.encodedSize=function r(n){return n<uintBoundaries[0]?1:n<uintBoundaries[1]?2:n<uintBoundaries[2]?3:n<uintBoundaries[3]?5:9};encodeUint.compareTokens=function r(n,_){return n.value<_.value?-1:n.value>_.value?1:0};function decodeNegint8(r,n,_,x){return new Token(Type.negint,-1-readUint8(r,n+1,x),2)}function decodeNegint16(r,n,_,x){return new Token(Type.negint,-1-readUint16(r,n+1,x),3)}function decodeNegint32(r,n,_,x){return new Token(Type.negint,-1-readUint32(r,n+1,x),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(r,n,_,x){const S=readUint64(r,n+1,x);if(typeof S!="bigint"){const E=-1-S;if(E>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,E,9)}if(x.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(S),9)}function encodeNegint(r,n){const _=n.value,x=typeof _=="bigint"?_*neg1b-pos1b:_*-1-1;encodeUintValue(r,n.type.majorEncoded,x)}encodeNegint.encodedSize=function r(n){const _=n.value,x=typeof _=="bigint"?_*neg1b-pos1b:_*-1-1;return x<uintBoundaries[0]?1:x<uintBoundaries[1]?2:x<uintBoundaries[2]?3:x<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function r(n,_){return n.value<_.value?1:n.value>_.value?-1:0};function toToken$3(r,n,_,x){assertEnoughData(r,n,_+x);const S=slice(r,n+_,n+_+x);return new Token(Type.bytes,S,_+x)}function decodeBytesCompact(r,n,_,x){return toToken$3(r,n,1,_)}function decodeBytes8(r,n,_,x){return toToken$3(r,n,2,readUint8(r,n+1,x))}function decodeBytes16(r,n,_,x){return toToken$3(r,n,3,readUint16(r,n+1,x))}function decodeBytes32(r,n,_,x){return toToken$3(r,n,5,readUint32(r,n+1,x))}function decodeBytes64(r,n,_,x){const S=readUint64(r,n+1,x);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(r,n,9,S)}function tokenBytes(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===Type.string?fromString(r.value):r.value),r.encodedBytes}function encodeBytes(r,n){const _=tokenBytes(n);encodeUintValue(r,n.type.majorEncoded,_.length),r.push(_)}encodeBytes.encodedSize=function r(n){const _=tokenBytes(n);return encodeUintValue.encodedSize(_.length)+_.length};encodeBytes.compareTokens=function r(n,_){return compareBytes(tokenBytes(n),tokenBytes(_))};function compareBytes(r,n){return r.length<n.length?-1:r.length>n.length?1:compare(r,n)}function toToken$2(r,n,_,x,S){const E=_+x;assertEnoughData(r,n,E);const C=new Token(Type.string,toString$4(r,n+_,n+E),E);return S.retainStringBytes===!0&&(C.byteValue=slice(r,n+_,n+E)),C}function decodeStringCompact(r,n,_,x){return toToken$2(r,n,1,_,x)}function decodeString8(r,n,_,x){return toToken$2(r,n,2,readUint8(r,n+1,x),x)}function decodeString16(r,n,_,x){return toToken$2(r,n,3,readUint16(r,n+1,x),x)}function decodeString32(r,n,_,x){return toToken$2(r,n,5,readUint32(r,n+1,x),x)}function decodeString64(r,n,_,x){const S=readUint64(r,n+1,x);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(r,n,9,S,x)}const encodeString=encodeBytes;function toToken$1(r,n,_,x){return new Token(Type.array,x,_)}function decodeArrayCompact(r,n,_,x){return toToken$1(r,n,1,_)}function decodeArray8(r,n,_,x){return toToken$1(r,n,2,readUint8(r,n+1,x))}function decodeArray16(r,n,_,x){return toToken$1(r,n,3,readUint16(r,n+1,x))}function decodeArray32(r,n,_,x){return toToken$1(r,n,5,readUint32(r,n+1,x))}function decodeArray64(r,n,_,x){const S=readUint64(r,n+1,x);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(r,n,9,S)}function decodeArrayIndefinite(r,n,_,x){if(x.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(r,n,1,1/0)}function encodeArray(r,n){encodeUintValue(r,Type.array.majorEncoded,n.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function r(n){return encodeUintValue.encodedSize(n.value)};function toToken(r,n,_,x){return new Token(Type.map,x,_)}function decodeMapCompact(r,n,_,x){return toToken(r,n,1,_)}function decodeMap8(r,n,_,x){return toToken(r,n,2,readUint8(r,n+1,x))}function decodeMap16(r,n,_,x){return toToken(r,n,3,readUint16(r,n+1,x))}function decodeMap32(r,n,_,x){return toToken(r,n,5,readUint32(r,n+1,x))}function decodeMap64(r,n,_,x){const S=readUint64(r,n+1,x);if(typeof S=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(r,n,9,S)}function decodeMapIndefinite(r,n,_,x){if(x.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(r,n,1,1/0)}function encodeMap(r,n){encodeUintValue(r,Type.map.majorEncoded,n.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function r(n){return encodeUintValue.encodedSize(n.value)};function decodeTagCompact(r,n,_,x){return new Token(Type.tag,_,1)}function decodeTag8(r,n,_,x){return new Token(Type.tag,readUint8(r,n+1,x),2)}function decodeTag16(r,n,_,x){return new Token(Type.tag,readUint16(r,n+1,x),3)}function decodeTag32(r,n,_,x){return new Token(Type.tag,readUint32(r,n+1,x),5)}function decodeTag64(r,n,_,x){return new Token(Type.tag,readUint64(r,n+1,x),9)}function encodeTag(r,n){encodeUintValue(r,Type.tag.majorEncoded,n.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function r(n){return encodeUintValue.encodedSize(n.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(r,n,_,x){if(x.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return x.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(r,n,_,x){if(x.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(r,n,_){if(_){if(_.allowNaN===!1&&Number.isNaN(r))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(_.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,r,n)}function decodeFloat16(r,n,_,x){return createToken(readFloat16(r,n+1),3,x)}function decodeFloat32(r,n,_,x){return createToken(readFloat32(r,n+1),5,x)}function decodeFloat64(r,n,_,x){return createToken(readFloat64(r,n+1),9,x)}function encodeFloat(r,n,_){const x=n.value;if(x===!1)r.push([Type.float.majorEncoded|MINOR_FALSE]);else if(x===!0)r.push([Type.float.majorEncoded|MINOR_TRUE]);else if(x===null)r.push([Type.float.majorEncoded|MINOR_NULL]);else if(x===void 0)r.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let S,E=!1;(!_||_.float64!==!0)&&(encodeFloat16(x),S=readFloat16(ui8a,1),x===S||Number.isNaN(x)?(ui8a[0]=249,r.push(ui8a.slice(0,3)),E=!0):(encodeFloat32(x),S=readFloat32(ui8a,1),x===S&&(ui8a[0]=250,r.push(ui8a.slice(0,5)),E=!0))),E||(encodeFloat64(x),S=readFloat64(ui8a,1),ui8a[0]=251,r.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function r(n,_){const x=n.value;if(x===!1||x===!0||x===null||x===void 0)return 1;if(!_||_.float64!==!0){encodeFloat16(x);let S=readFloat16(ui8a,1);if(x===S||Number.isNaN(x))return 3;if(encodeFloat32(x),S=readFloat32(ui8a,1),x===S)return 5}return 9};const buffer=new ArrayBuffer(9),dataView=new DataView(buffer,1),ui8a=new Uint8Array(buffer,0);function encodeFloat16(r){if(r===1/0)dataView.setUint16(0,31744,!1);else if(r===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(r))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,r);const n=dataView.getUint32(0),_=(n&2139095040)>>23,x=n&8388607;if(_===255)dataView.setUint16(0,31744,!1);else if(_===0)dataView.setUint16(0,(r&2147483648)>>16|x>>13,!1);else{const S=_-127;S<-24?dataView.setUint16(0,0):S<-14?dataView.setUint16(0,(n&2147483648)>>16|1<<24+S,!1):dataView.setUint16(0,(n&2147483648)>>16|S+15<<10|x>>13,!1)}}}function readFloat16(r,n){if(r.length-n<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const _=(r[n]<<8)+r[n+1];if(_===31744)return 1/0;if(_===64512)return-1/0;if(_===32256)return NaN;const x=_>>10&31,S=_&1023;let E;return x===0?E=S*2**-24:x!==31?E=(S+1024)*2**(x-25):E=S===0?1/0:NaN,_&32768?-E:E}function encodeFloat32(r){dataView.setFloat32(0,r,!1)}function readFloat32(r,n){if(r.length-n<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const _=(r.byteOffset||0)+n;return new DataView(r.buffer,_,4).getFloat32(0,!1)}function encodeFloat64(r){dataView.setFloat64(0,r,!1)}function readFloat64(r,n){if(r.length-n<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const _=(r.byteOffset||0)+n;return new DataView(r.buffer,_,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(r,n,_){throw new Error(`${decodeErrPrefix} encountered invalid minor (${_}) for major ${r[n]>>>5}`)}function errorer(r){return()=>{throw new Error(`${decodeErrPrefix} ${r}`)}}const jump=[];for(let r=0;r<=23;r++)jump[r]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let r=32;r<=55;r++)jump[r]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let r=64;r<=87;r++)jump[r]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)jump[r]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)jump[r]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let r=160;r<=183;r++)jump[r]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let r=192;r<=215;r++)jump[r]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let r=224;r<=243;r++)jump[r]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let r=0;r<24;r++)quick[r]=new Token(Type.uint,r,1);for(let r=-1;r>=-24;r--)quick[31-r]=new Token(Type.negint,r,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(r){switch(r.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return r.value.length?void 0:fromArray([64]);case Type.string:return r.value===""?fromArray([96]):void 0;case Type.array:return r.value===0?fromArray([128]):void 0;case Type.map:return r.value===0?fromArray([160]):void 0;case Type.uint:return r.value<24?fromArray([Number(r.value)]):void 0;case Type.negint:if(r.value>=-24)return fromArray([31-Number(r.value)])}}const defaultEncodeOptions={float64:!1,mapSorter,quickEncodeToken};function makeCborEncoders(){const r=[];return r[Type.uint.major]=encodeUint,r[Type.negint.major]=encodeNegint,r[Type.bytes.major]=encodeBytes,r[Type.string.major]=encodeString,r[Type.array.major]=encodeArray,r[Type.map.major]=encodeMap,r[Type.tag.major]=encodeTag,r[Type.float.major]=encodeFloat,r}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(n,_){this.obj=n,this.parent=_}includes(n){let _=this;do if(_.obj===n)return!0;while(_=_.parent);return!1}static createCheck(n,_){if(n&&n.includes(_))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(_,n)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(r,n,_,x){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new Token(Type.float,r):r>=0?new Token(Type.uint,r):new Token(Type.negint,r)},bigint(r,n,_,x){return r>=BigInt(0)?new Token(Type.uint,r):new Token(Type.negint,r)},Uint8Array(r,n,_,x){return new Token(Type.bytes,r)},string(r,n,_,x){return new Token(Type.string,r)},boolean(r,n,_,x){return r?simpleTokens.true:simpleTokens.false},null(r,n,_,x){return simpleTokens.null},undefined(r,n,_,x){return simpleTokens.undefined},ArrayBuffer(r,n,_,x){return new Token(Type.bytes,new Uint8Array(r))},DataView(r,n,_,x){return new Token(Type.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,n,_,x){if(!r.length)return _.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;x=Ref.createCheck(x,r);const S=[];let E=0;for(const C of r)S[E++]=objectToTokens(C,_,x);return _.addBreakTokens?[new Token(Type.array,r.length),S,new Token(Type.break)]:[new Token(Type.array,r.length),S]},Object(r,n,_,x){const S=n!=="Object",E=S?r.keys():Object.keys(r),C=S?r.size:E.length;if(!C)return _.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;x=Ref.createCheck(x,r);const T=[];let B=0;for(const A of E)T[B++]=[objectToTokens(A,_,x),objectToTokens(S?r.get(A):r[A],_,x)];return sortMapEntries(T,_),_.addBreakTokens?[new Token(Type.map,C),T,new Token(Type.break)]:[new Token(Type.map,C),T]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${r}Array`]=typeEncoders.DataView;function objectToTokens(r,n={},_){const x=is(r),S=n&&n.typeEncoders&&n.typeEncoders[x]||typeEncoders[x];if(typeof S=="function"){const C=S(r,x,n,_);if(C!=null)return C}const E=typeEncoders[x];if(!E)throw new Error(`${encodeErrPrefix} unsupported type: ${x}`);return E(r,x,n,_)}function sortMapEntries(r,n){n.mapSorter&&r.sort(n.mapSorter)}function mapSorter(r,n){const _=Array.isArray(r[0])?r[0][0]:r[0],x=Array.isArray(n[0])?n[0][0]:n[0];if(_.type!==x.type)return _.type.compare(x.type);const S=_.type.major,E=cborEncoders[S].compareTokens(_,x);return E===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),E}function tokensToEncoded(r,n,_,x){if(Array.isArray(n))for(const S of n)tokensToEncoded(r,S,_,x);else _[n.type.major](r,n,x)}function encodeCustom(r,n,_){const x=objectToTokens(r,_);if(!Array.isArray(x)&&_.quickEncodeToken){const S=_.quickEncodeToken(x);if(S)return S;const E=n[x.type.major];if(E.encodedSize){const C=E.encodedSize(x,_),T=new Bl(C);if(E(T,x,_),T.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${x} was wrong`);return asU8A(T.chunks[0])}}return buf.reset(),tokensToEncoded(buf,x,n,_),buf.toBytes(!0)}function encode$a(r,n){return n=Object.assign({},defaultEncodeOptions,n),encodeCustom(r,cborEncoders,n)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(n,_={}){this._pos=0,this.data=n,this.options=_}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const n=this.data[this._pos];let _=quick[n];if(_===void 0){const x=jump[n];if(!x)throw new Error(`${decodeErrPrefix} no decoder for major type ${n>>>5} (byte 0x${n.toString(16).padStart(2,"0")})`);const S=n&31;_=x(this.data,this._pos,S,this.options)}return this._pos+=_.encodedLength,_}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(r,n,_){const x=[];for(let S=0;S<r.value;S++){const E=tokensToObject(n,_);if(E===BREAK){if(r.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(E===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${S}, expected ${r.value})`);x[S]=E}return x}function tokenToMap(r,n,_){const x=_.useMaps===!0,S=x?void 0:{},E=x?new Map:void 0;for(let C=0;C<r.value;C++){const T=tokensToObject(n,_);if(T===BREAK){if(r.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(T===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${C} [no key], expected ${r.value})`);if(x!==!0&&typeof T!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof T})`);if(_.rejectDuplicateMapKeys===!0&&(x&&E.has(T)||!x&&T in S))throw new Error(`${decodeErrPrefix} found repeat map key "${T}"`);const B=tokensToObject(n,_);if(B===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${C} [no value], expected ${r.value})`);x?E.set(T,B):S[T]=B}return x?E:S}function tokensToObject(r,n){if(r.done())return DONE;const _=r.next();if(_.type===Type.break)return BREAK;if(_.type.terminal)return _.value;if(_.type===Type.array)return tokenToArray(_,r,n);if(_.type===Type.map)return tokenToMap(_,r,n);if(_.type===Type.tag){if(n.tags&&typeof n.tags[_.value]=="function"){const x=tokensToObject(r,n);return n.tags[_.value](x)}throw new Error(`${decodeErrPrefix} tag not supported (${_.value})`)}throw new Error("unsupported")}function decodeFirst(r,n){if(!(r instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);n=Object.assign({},defaultDecodeOptions,n);const _=n.tokenizer||new Tokeniser(r,n),x=tokensToObject(_,n);if(x===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(x===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);return[x,r.subarray(_.pos())]}function decode$9(r,n){const[_,x]=decodeFirst(r,n);if(x.length>0)throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return _}function base(r,n){if(r.length>=255)throw new TypeError("Alphabet too long");for(var _=new Uint8Array(256),x=0;x<_.length;x++)_[x]=255;for(var S=0;S<r.length;S++){var E=r.charAt(S),C=E.charCodeAt(0);if(_[C]!==255)throw new TypeError(E+" is ambiguous");_[C]=S}var T=r.length,B=r.charAt(0),A=Math.log(T)/Math.log(256),I=Math.log(256)/Math.log(T);function N(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var F=0,M=0,L=0,j=O.length;L!==j&&O[L]===0;)L++,F++;for(var q=(j-L)*I+1>>>0,H=new Uint8Array(q);L!==j;){for(var X=O[L],J=0,Z=q-1;(X!==0||J<M)&&Z!==-1;Z--,J++)X+=256*H[Z]>>>0,H[Z]=X%T>>>0,X=X/T>>>0;if(X!==0)throw new Error("Non-zero carry");M=J,L++}for(var ae=q-M;ae!==q&&H[ae]===0;)ae++;for(var ce=B.repeat(F);ae<q;++ae)ce+=r.charAt(H[ae]);return ce}function V(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var F=0;if(O[F]!==" "){for(var M=0,L=0;O[F]===B;)M++,F++;for(var j=(O.length-F)*A+1>>>0,q=new Uint8Array(j);O[F];){var H=_[O.charCodeAt(F)];if(H===255)return;for(var X=0,J=j-1;(H!==0||X<L)&&J!==-1;J--,X++)H+=T*q[J]>>>0,q[J]=H%256>>>0,H=H/256>>>0;if(H!==0)throw new Error("Non-zero carry");L=X,F++}if(O[F]!==" "){for(var Z=j-L;Z!==j&&q[Z]===0;)Z++;for(var ae=new Uint8Array(M+(j-Z)),ce=M;Z!==j;)ae[ce++]=q[Z++];return ae}}}function D(O){var F=V(O);if(F)return F;throw new Error(`Non-${n} character`)}return{encode:N,decodeUnsafe:V,decode:D}}var src$1=base,_brrp__multiformats_scope_baseX=src$1;const equals$1=(r,n)=>{if(r===n)return!0;if(r.byteLength!==n.byteLength)return!1;for(let _=0;_<r.byteLength;_++)if(r[_]!==n[_])return!1;return!0},coerce=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};let Encoder$1=class{constructor(n,_,x){this.name=n,this.prefix=_,this.baseEncode=x}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}},Decoder$1=class{constructor(n,_,x){if(this.name=n,this.prefix=_,_.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=_.codePointAt(0),this.baseDecode=x}decode(n){if(typeof n=="string"){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(n){return or(this,n)}};class ComposedDecoder{constructor(n){this.decoders=n}or(n){return or(this,n)}decode(n){const _=n[0],x=this.decoders[_];if(x)return x.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(r,n)=>new ComposedDecoder({...r.decoders||{[r.prefix]:r},...n.decoders||{[n.prefix]:n}});let Codec$1=class{constructor(n,_,x,S){this.name=n,this.prefix=_,this.baseEncode=x,this.baseDecode=S,this.encoder=new Encoder$1(n,_,x),this.decoder=new Decoder$1(n,_,S)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}};const from=({name:r,prefix:n,encode:_,decode:x})=>new Codec$1(r,n,_,x),baseX=({prefix:r,name:n,alphabet:_})=>{const{encode:x,decode:S}=_brrp__multiformats_scope_baseX(_,n);return from({prefix:r,name:n,encode:x,decode:E=>coerce(S(E))})},decode$8=(r,n,_,x)=>{const S={};for(let I=0;I<n.length;++I)S[n[I]]=I;let E=r.length;for(;r[E-1]==="=";)--E;const C=new Uint8Array(E*_/8|0);let T=0,B=0,A=0;for(let I=0;I<E;++I){const N=S[r[I]];if(N===void 0)throw new SyntaxError(`Non-${x} character`);B=B<<_|N,T+=_,T>=8&&(T-=8,C[A++]=255&B>>T)}if(T>=_||255&B<<8-T)throw new SyntaxError("Unexpected end of data");return C},encode$9=(r,n,_)=>{const x=n[n.length-1]==="=",S=(1<<_)-1;let E="",C=0,T=0;for(let B=0;B<r.length;++B)for(T=T<<8|r[B],C+=8;C>_;)C-=_,E+=n[S&T>>C];if(C&&(E+=n[S&T<<_-C]),x)for(;E.length*_&7;)E+="=";return E},rfc4648=({name:r,prefix:n,bitsPerChar:_,alphabet:x})=>from({prefix:n,name:r,encode(S){return encode$9(S,x,_)},decode(S){return decode$8(S,x,_,r)}}),base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var encode_1$2=encode$8,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode$8(r,n,_){n=n||[],_=_||0;for(var x=_;r>=INT;)n[_++]=r&255|MSB,r/=128;for(;r&MSBALL;)n[_++]=r&255|MSB,r>>>=7;return n[_]=r|0,encode$8.bytes=_-x+1,n}var decode$7=read$2,MSB$1=128,REST$1=127;function read$2(r,x){var _=0,x=x||0,S=0,E=x,C,T=r.length;do{if(E>=T)throw read$2.bytes=0,new RangeError("Could not decode varint");C=r[E++],_+=S<28?(C&REST$1)<<S:(C&REST$1)*Math.pow(2,S),S+=7}while(C>=MSB$1);return read$2.bytes=E-x,_}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(r){return r<N1?1:r<N2?2:r<N3?3:r<N4?4:r<N5?5:r<N6?6:r<N7?7:r<N8?8:r<N9?9:10},varint={encode:encode_1$2,decode:decode$7,encodingLength:length},_brrp_varint=varint;const decode$6=(r,n=0)=>[_brrp_varint.decode(r,n),_brrp_varint.decode.bytes],encodeTo=(r,n,_=0)=>(_brrp_varint.encode(r,n,_),n),encodingLength=r=>_brrp_varint.encodingLength(r),create=(r,n)=>{const _=n.byteLength,x=encodingLength(r),S=x+encodingLength(_),E=new Uint8Array(S+_);return encodeTo(r,E,0),encodeTo(_,E,x),E.set(n,S),new Digest(r,_,n,E)},decode$5=r=>{const n=coerce(r),[_,x]=decode$6(n),[S,E]=decode$6(n.subarray(x)),C=n.subarray(x+E);if(C.byteLength!==S)throw new Error("Incorrect length");return new Digest(_,S,C,n)},equals=(r,n)=>{if(r===n)return!0;{const _=n;return r.code===_.code&&r.size===_.size&&_.bytes instanceof Uint8Array&&equals$1(r.bytes,_.bytes)}};class Digest{constructor(n,_,x,S){this.code=n,this.size=_,this.digest=x,this.bytes=S}}const format$3=(r,n)=>{const{bytes:_,version:x}=r;switch(x){case 0:return toStringV0(_,baseCache(r),n||base58btc.encoder);default:return toStringV1(_,baseCache(r),n||base32.encoder)}},cache$1=new WeakMap,baseCache=r=>{const n=cache$1.get(r);if(n==null){const _=new Map;return cache$1.set(r,_),_}return n};class CID{constructor(n,_,x,S){this.code=_,this.version=n,this.multihash=x,this.bytes=S,this["/"]=S}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:n,multihash:_}=this;if(n!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(_.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(_)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:n,digest:_}=this.multihash,x=create(n,_);return CID.createV1(this.code,x)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(n){return CID.equals(this,n)}static equals(n,_){const x=_;return x&&n.code===x.code&&n.version===x.version&&equals(n.multihash,x.multihash)}toString(n){return format$3(this,n)}toJSON(){return{"/":format$3(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(n){if(n==null)return null;const _=n;if(_ instanceof CID)return _;if(_["/"]!=null&&_["/"]===_.bytes||_.asCID===_){const{version:x,code:S,multihash:E,bytes:C}=_;return new CID(x,S,E,C||encodeCID(x,S,E.bytes))}else if(_[cidSymbol]===!0){const{version:x,multihash:S,code:E}=_,C=decode$5(S);return CID.create(x,E,C)}else return null}static create(n,_,x){if(typeof _!="number")throw new Error("String codecs are no longer supported");if(!(x.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(n){case 0:{if(_!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(n,_,x,x.bytes)}case 1:{const S=encodeCID(n,_,x.bytes);return new CID(n,_,x,S)}default:throw new Error("Invalid version")}}static createV0(n){return CID.create(0,DAG_PB_CODE,n)}static createV1(n,_){return CID.create(1,n,_)}static decode(n){const[_,x]=CID.decodeFirst(n);if(x.length)throw new Error("Incorrect length");return _}static decodeFirst(n){const _=CID.inspectBytes(n),x=_.size-_.multihashSize,S=coerce(n.subarray(x,x+_.multihashSize));if(S.byteLength!==_.multihashSize)throw new Error("Incorrect length");const E=S.subarray(_.multihashSize-_.digestSize),C=new Digest(_.multihashCode,_.digestSize,E,S);return[_.version===0?CID.createV0(C):CID.createV1(_.codec,C),n.subarray(_.size)]}static inspectBytes(n){let _=0;const x=()=>{const[N,V]=decode$6(n.subarray(_));return _+=V,N};let S=x(),E=DAG_PB_CODE;if(S===18?(S=0,_=0):E=x(),S!==0&&S!==1)throw new RangeError(`Invalid CID version ${S}`);const C=_,T=x(),B=x(),A=_+B,I=A-C;return{version:S,codec:E,multihashCode:T,digestSize:B,multihashSize:I,size:A}}static parse(n,_){const[x,S]=parseCIDtoBytes(n,_),E=CID.decode(S);if(E.version===0&&n[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache(E).set(x,n),E}}const parseCIDtoBytes=(r,n)=>{switch(r[0]){case"Q":{const _=n||base58btc;return[base58btc.prefix,_.decode(`${base58btc.prefix}${r}`)]}case base58btc.prefix:{const _=n||base58btc;return[base58btc.prefix,_.decode(r)]}case base32.prefix:{const _=n||base32;return[base32.prefix,_.decode(r)]}default:{if(n==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],n.decode(r)]}}},toStringV0=(r,n,_)=>{const{prefix:x}=_;if(x!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${_.name} encoding`);const S=n.get(x);if(S==null){const E=_.encode(r).slice(1);return n.set(x,E),E}else return S},toStringV1=(r,n,_)=>{const{prefix:x}=_,S=n.get(x);if(S==null){const E=_.encode(r);return n.set(x,E),E}else return S},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(r,n,_)=>{const x=encodingLength(r),S=x+encodingLength(n),E=new Uint8Array(S+_.byteLength);return encodeTo(r,E,0),encodeTo(n,E,x),E.set(_,S),E},cidSymbol=Symbol.for("@ipld/js-cid/CID"),CID_CBOR_TAG=42;function cidEncoder(r){if(r.asCID!==r&&r["/"]!==r.bytes)return null;const n=CID.asCID(r);if(!n)return null;const _=new Uint8Array(n.bytes.byteLength+1);return _.set(n.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,_)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(r){if(Number.isNaN(r))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(r===1/0||r===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(r.subarray(1))}const decodeOptions={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const name="dag-cbor",code$2=113,encode$7=r=>encode$a(r,encodeOptions),decode$4=r=>decode$9(r,decodeOptions),dagCbor=Object.freeze(Object.defineProperty({__proto__:null,code:code$2,decode:decode$4,encode:encode$7,name},Symbol.toStringTag,{value:"Module"})),sha=r=>async n=>new Uint8Array(await crypto.subtle.digest(r,n)),sha256$2=from$1({name:"sha2-256",code:18,encode:sha("SHA-256")}),MODRATEUR="MODRATEUR",MEMBRE="MEMBRE",rles=[MODRATEUR,MEMBRE],type$5="feed",Feed=()=>async({ipfs:r,identity:n,address:_,name:x,access:S,directory:E,meta:C,headsStorage:T,entryStorage:B,indexStorage:A,referencesCount:I,syncAutomatically:N,onUpdate:V})=>{const D=await Database({ipfs:r,identity:n,address:_,name:x,access:S,directory:E,meta:C,headsStorage:T,entryStorage:B,indexStorage:A,referencesCount:I,syncAutomatically:N,onUpdate:V}),{addOperation:O,log:F}=D,M=async H=>O({op:"ADD",key:null,value:H}),L=async H=>O({op:"DEL",key:null,value:H}),j=async function*({amount:H}={}){const X={};let J=0;for await(const Z of F.traverse()){const{op:ae,value:ce}=Z.payload,{hash:ve}=Z;if(ae==="ADD"&&!X[ve]){J++;const pe=Z.hash;X[pe]=!0,yield{value:ce,hash:pe}}else ae==="DEL"&&!X[ce]&&(X[ce]=!0);if(H!==void 0&&J>=H)break}};return{...D,type:type$5,add:M,remove:L,iterator:j,all:async()=>{const H=[];for await(const X of j())H.unshift(X);return H}}};Feed.type=type$5;const type$4="ordered-keyvalue",OrderedKeyValue=()=>async({ipfs:r,identity:n,address:_,name:x,access:S,directory:E,meta:C,headsStorage:T,entryStorage:B,indexStorage:A,referencesCount:I,syncAutomatically:N,onUpdate:V})=>{const D=await Database({ipfs:r,identity:n,address:_,name:x,access:S,directory:E,meta:C,headsStorage:T,entryStorage:B,indexStorage:A,referencesCount:I,syncAutomatically:N,onUpdate:V}),{addOperation:O,log:F}=D,M=async(J,Z,ae)=>{const ce={value:Z};return ae!==void 0&&(ce.position=ae),O({op:"PUT",key:J,value:ce})},L=async(J,Z)=>O({op:"MOVE",key:J,value:Z}),j=async J=>O({op:"DEL",key:J,value:null}),q=async J=>{for await(const Z of F.traverse()){const{op:ae,key:ce,value:ve}=Z.payload;if(ae==="PUT"&&ce===J)return ve;if(ae==="DEL"&&ce===J)return}},H=async function*({amount:J}={}){const Z={},ae={};let ce=0;for await(const ve of F.traverse()){const{op:pe,key:G,value:Y}=ve.payload;if(!G)return;if(pe==="PUT"&&!Z[G]){Z[G]=!0;const U=Y,W=ve.hash,ee=ae[G]!==void 0?ae[G]:U.position!==void 0?U.position:0;ae[G]=ee,ce++,yield{key:G,value:U.value,position:ee,hash:W}}else pe==="MOVE"&&!Z[G]?ae[G]=Y:pe==="DEL"&&!Z[G]&&(Z[G]=!0);if(J!==void 0&&ce>=J)break}};return{...D,type:type$4,put:M,set:M,del:j,move:L,get:q,iterator:H,all:async()=>{const J=[];for await(const Z of H())J.unshift(Z);return J.sort((Z,ae)=>Z.position>ae.position?1:Z.position===ae.position?0:-1).map(Z=>({key:Z.key,value:Z.value,hash:Z.hash}))}}};OrderedKeyValue.type=type$4;const type$3="set",Set$1=()=>async({ipfs:r,identity:n,address:_,name:x,access:S,directory:E,meta:C,headsStorage:T,entryStorage:B,indexStorage:A,referencesCount:I,syncAutomatically:N,onUpdate:V})=>{const D=await Database({ipfs:r,identity:n,address:_,name:x,access:S,directory:E,meta:C,headsStorage:T,entryStorage:B,indexStorage:A,referencesCount:I,syncAutomatically:N,onUpdate:V}),{addOperation:O,log:F}=D,M=async H=>O({op:"ADD",key:null,value:H}),L=async H=>O({op:"DEL",key:null,value:H}),j=async function*({amount:H}={}){const X={};let J=0;for await(const Z of F.traverse()){const{op:ae,value:ce}=Z.payload,ve=JSON.stringify(ce);if(ae==="ADD"&&!X[ve]){X[ve]=!0,J++;const pe=Z.hash;yield{value:ce,hash:pe}}else ae==="DEL"&&!X[ve]&&(X[ve]=!0);if(H!==void 0&&J>=H)break}};return{...D,type:type$3,add:M,del:L,iterator:j,all:async()=>{const H=[];for await(const X of j())H.unshift(X);return H}}};Set$1.type=type$3;const registerAll=()=>[OrderedKeyValue,Feed,Set$1].forEach(useDatabaseType);var ajv$1={exports:{}},core$3={},validate={},boolSchema={},errors={},codegen={},code$1={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.regexpCode=r.getEsmExportName=r.getProperty=r.safeStringify=r.stringify=r.strConcat=r.addCodeArg=r.str=r._=r.nil=r._Code=r.Name=r.IDENTIFIER=r._CodeOrName=void 0;class n{}r._CodeOrName=n,r.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class _ extends n{constructor(j){if(super(),!r.IDENTIFIER.test(j))throw new Error("CodeGen: name must be a valid identifier");this.str=j}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}r.Name=_;class x extends n{constructor(j){super(),this._items=typeof j=="string"?[j]:j}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const j=this._items[0];return j===""||j==='""'}get str(){var j;return(j=this._str)!==null&&j!==void 0?j:this._str=this._items.reduce((q,H)=>`${q}${H}`,"")}get names(){var j;return(j=this._names)!==null&&j!==void 0?j:this._names=this._items.reduce((q,H)=>(H instanceof _&&(q[H.str]=(q[H.str]||0)+1),q),{})}}r._Code=x,r.nil=new x("");function S(L,...j){const q=[L[0]];let H=0;for(;H<j.length;)T(q,j[H]),q.push(L[++H]);return new x(q)}r._=S;const E=new x("+");function C(L,...j){const q=[D(L[0])];let H=0;for(;H<j.length;)q.push(E),T(q,j[H]),q.push(E,D(L[++H]));return B(q),new x(q)}r.str=C;function T(L,j){j instanceof x?L.push(...j._items):j instanceof _?L.push(j):L.push(N(j))}r.addCodeArg=T;function B(L){let j=1;for(;j<L.length-1;){if(L[j]===E){const q=A(L[j-1],L[j+1]);if(q!==void 0){L.splice(j-1,3,q);continue}L[j++]="+"}j++}}function A(L,j){if(j==='""')return L;if(L==='""')return j;if(typeof L=="string")return j instanceof _||L[L.length-1]!=='"'?void 0:typeof j!="string"?`${L.slice(0,-1)}${j}"`:j[0]==='"'?L.slice(0,-1)+j.slice(1):void 0;if(typeof j=="string"&&j[0]==='"'&&!(L instanceof _))return`"${L}${j.slice(1)}`}function I(L,j){return j.emptyStr()?L:L.emptyStr()?j:C`${L}${j}`}r.strConcat=I;function N(L){return typeof L=="number"||typeof L=="boolean"||L===null?L:D(Array.isArray(L)?L.join(","):L)}function V(L){return new x(D(L))}r.stringify=V;function D(L){return JSON.stringify(L).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}r.safeStringify=D;function O(L){return typeof L=="string"&&r.IDENTIFIER.test(L)?new x(`.${L}`):S`[${L}]`}r.getProperty=O;function F(L){if(typeof L=="string"&&r.IDENTIFIER.test(L))return new x(`${L}`);throw new Error(`CodeGen: invalid export name: ${L}, use explicit $id name mapping`)}r.getEsmExportName=F;function M(L){return new x(L.toString())}r.regexpCode=M})(code$1);var scope={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ValueScope=r.ValueScopeName=r.Scope=r.varKinds=r.UsedValueState=void 0;const n=code$1;class _ extends Error{constructor(A){super(`CodeGen: "code" for ${A} not defined`),this.value=A.value}}var x;(function(B){B[B.Started=0]="Started",B[B.Completed=1]="Completed"})(x=r.UsedValueState||(r.UsedValueState={})),r.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class S{constructor({prefixes:A,parent:I}={}){this._names={},this._prefixes=A,this._parent=I}toName(A){return A instanceof n.Name?A:this.name(A)}name(A){return new n.Name(this._newName(A))}_newName(A){const I=this._names[A]||this._nameGroup(A);return`${A}${I.index++}`}_nameGroup(A){var I,N;if(!((N=(I=this._parent)===null||I===void 0?void 0:I._prefixes)===null||N===void 0)&&N.has(A)||this._prefixes&&!this._prefixes.has(A))throw new Error(`CodeGen: prefix "${A}" is not allowed in this scope`);return this._names[A]={prefix:A,index:0}}}r.Scope=S;class E extends n.Name{constructor(A,I){super(I),this.prefix=A}setValue(A,{property:I,itemIndex:N}){this.value=A,this.scopePath=(0,n._)`.${new n.Name(I)}[${N}]`}}r.ValueScopeName=E;const C=(0,n._)`\n`;class T extends S{constructor(A){super(A),this._values={},this._scope=A.scope,this.opts={...A,_n:A.lines?C:n.nil}}get(){return this._scope}name(A){return new E(A,this._newName(A))}value(A,I){var N;if(I.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const V=this.toName(A),{prefix:D}=V,O=(N=I.key)!==null&&N!==void 0?N:I.ref;let F=this._values[D];if(F){const j=F.get(O);if(j)return j}else F=this._values[D]=new Map;F.set(O,V);const M=this._scope[D]||(this._scope[D]=[]),L=M.length;return M[L]=I.ref,V.setValue(I,{property:D,itemIndex:L}),V}getValue(A,I){const N=this._values[A];if(N)return N.get(I)}scopeRefs(A,I=this._values){return this._reduceValues(I,N=>{if(N.scopePath===void 0)throw new Error(`CodeGen: name "${N}" has no value`);return(0,n._)`${A}${N.scopePath}`})}scopeCode(A=this._values,I,N){return this._reduceValues(A,V=>{if(V.value===void 0)throw new Error(`CodeGen: name "${V}" has no value`);return V.value.code},I,N)}_reduceValues(A,I,N={},V){let D=n.nil;for(const O in A){const F=A[O];if(!F)continue;const M=N[O]=N[O]||new Map;F.forEach(L=>{if(M.has(L))return;M.set(L,x.Started);let j=I(L);if(j){const q=this.opts.es5?r.varKinds.var:r.varKinds.const;D=(0,n._)`${D}${q} ${L} = ${j};${this.opts._n}`}else if(j=V?.(L))D=(0,n._)`${D}${j}${this.opts._n}`;else throw new _(L);M.set(L,x.Completed)})}return D}}r.ValueScope=T})(scope);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.or=r.and=r.not=r.CodeGen=r.operators=r.varKinds=r.ValueScopeName=r.ValueScope=r.Scope=r.Name=r.regexpCode=r.stringify=r.getProperty=r.nil=r.strConcat=r.str=r._=void 0;const n=code$1,_=scope;var x=code$1;Object.defineProperty(r,"_",{enumerable:!0,get:function(){return x._}}),Object.defineProperty(r,"str",{enumerable:!0,get:function(){return x.str}}),Object.defineProperty(r,"strConcat",{enumerable:!0,get:function(){return x.strConcat}}),Object.defineProperty(r,"nil",{enumerable:!0,get:function(){return x.nil}}),Object.defineProperty(r,"getProperty",{enumerable:!0,get:function(){return x.getProperty}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return x.stringify}}),Object.defineProperty(r,"regexpCode",{enumerable:!0,get:function(){return x.regexpCode}}),Object.defineProperty(r,"Name",{enumerable:!0,get:function(){return x.Name}});var S=scope;Object.defineProperty(r,"Scope",{enumerable:!0,get:function(){return S.Scope}}),Object.defineProperty(r,"ValueScope",{enumerable:!0,get:function(){return S.ValueScope}}),Object.defineProperty(r,"ValueScopeName",{enumerable:!0,get:function(){return S.ValueScopeName}}),Object.defineProperty(r,"varKinds",{enumerable:!0,get:function(){return S.varKinds}}),r.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class E{optimizeNodes(){return this}optimizeNames(ue,be){return this}}class C extends E{constructor(ue,be,ge){super(),this.varKind=ue,this.name=be,this.rhs=ge}render({es5:ue,_n:be}){const ge=ue?_.varKinds.var:this.varKind,ye=this.rhs===void 0?"":` = ${this.rhs}`;return`${ge} ${this.name}${ye};`+be}optimizeNames(ue,be){if(ue[this.name.str])return this.rhs&&(this.rhs=U(this.rhs,ue,be)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class T extends E{constructor(ue,be,ge){super(),this.lhs=ue,this.rhs=be,this.sideEffects=ge}render({_n:ue}){return`${this.lhs} = ${this.rhs};`+ue}optimizeNames(ue,be){if(!(this.lhs instanceof n.Name&&!ue[this.lhs.str]&&!this.sideEffects))return this.rhs=U(this.rhs,ue,be),this}get names(){const ue=this.lhs instanceof n.Name?{}:{...this.lhs.names};return Y(ue,this.rhs)}}class B extends T{constructor(ue,be,ge,ye){super(ue,ge,ye),this.op=be}render({_n:ue}){return`${this.lhs} ${this.op}= ${this.rhs};`+ue}}class A extends E{constructor(ue){super(),this.label=ue,this.names={}}render({_n:ue}){return`${this.label}:`+ue}}class I extends E{constructor(ue){super(),this.label=ue,this.names={}}render({_n:ue}){return`break${this.label?` ${this.label}`:""};`+ue}}class N extends E{constructor(ue){super(),this.error=ue}render({_n:ue}){return`throw ${this.error};`+ue}get names(){return this.error.names}}class V extends E{constructor(ue){super(),this.code=ue}render({_n:ue}){return`${this.code};`+ue}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(ue,be){return this.code=U(this.code,ue,be),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class D extends E{constructor(ue=[]){super(),this.nodes=ue}render(ue){return this.nodes.reduce((be,ge)=>be+ge.render(ue),"")}optimizeNodes(){const{nodes:ue}=this;let be=ue.length;for(;be--;){const ge=ue[be].optimizeNodes();Array.isArray(ge)?ue.splice(be,1,...ge):ge?ue[be]=ge:ue.splice(be,1)}return ue.length>0?this:void 0}optimizeNames(ue,be){const{nodes:ge}=this;let ye=ge.length;for(;ye--;){const Ee=ge[ye];Ee.optimizeNames(ue,be)||(W(ue,Ee.names),ge.splice(ye,1))}return ge.length>0?this:void 0}get names(){return this.nodes.reduce((ue,be)=>G(ue,be.names),{})}}class O extends D{render(ue){return"{"+ue._n+super.render(ue)+"}"+ue._n}}class F extends D{}class M extends O{}M.kind="else";class L extends O{constructor(ue,be){super(be),this.condition=ue}render(ue){let be=`if(${this.condition})`+super.render(ue);return this.else&&(be+="else "+this.else.render(ue)),be}optimizeNodes(){super.optimizeNodes();const ue=this.condition;if(ue===!0)return this.nodes;let be=this.else;if(be){const ge=be.optimizeNodes();be=this.else=Array.isArray(ge)?new M(ge):ge}if(be)return ue===!1?be instanceof L?be:be.nodes:this.nodes.length?this:new L(ee(ue),be instanceof L?[be]:be.nodes);if(!(ue===!1||!this.nodes.length))return this}optimizeNames(ue,be){var ge;if(this.else=(ge=this.else)===null||ge===void 0?void 0:ge.optimizeNames(ue,be),!!(super.optimizeNames(ue,be)||this.else))return this.condition=U(this.condition,ue,be),this}get names(){const ue=super.names;return Y(ue,this.condition),this.else&&G(ue,this.else.names),ue}}L.kind="if";class j extends O{}j.kind="for";class q extends j{constructor(ue){super(),this.iteration=ue}render(ue){return`for(${this.iteration})`+super.render(ue)}optimizeNames(ue,be){if(super.optimizeNames(ue,be))return this.iteration=U(this.iteration,ue,be),this}get names(){return G(super.names,this.iteration.names)}}class H extends j{constructor(ue,be,ge,ye){super(),this.varKind=ue,this.name=be,this.from=ge,this.to=ye}render(ue){const be=ue.es5?_.varKinds.var:this.varKind,{name:ge,from:ye,to:Ee}=this;return`for(${be} ${ge}=${ye}; ${ge}<${Ee}; ${ge}++)`+super.render(ue)}get names(){const ue=Y(super.names,this.from);return Y(ue,this.to)}}class X extends j{constructor(ue,be,ge,ye){super(),this.loop=ue,this.varKind=be,this.name=ge,this.iterable=ye}render(ue){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(ue)}optimizeNames(ue,be){if(super.optimizeNames(ue,be))return this.iterable=U(this.iterable,ue,be),this}get names(){return G(super.names,this.iterable.names)}}class J extends O{constructor(ue,be,ge){super(),this.name=ue,this.args=be,this.async=ge}render(ue){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(ue)}}J.kind="func";class Z extends D{render(ue){return"return "+super.render(ue)}}Z.kind="return";class ae extends O{render(ue){let be="try"+super.render(ue);return this.catch&&(be+=this.catch.render(ue)),this.finally&&(be+=this.finally.render(ue)),be}optimizeNodes(){var ue,be;return super.optimizeNodes(),(ue=this.catch)===null||ue===void 0||ue.optimizeNodes(),(be=this.finally)===null||be===void 0||be.optimizeNodes(),this}optimizeNames(ue,be){var ge,ye;return super.optimizeNames(ue,be),(ge=this.catch)===null||ge===void 0||ge.optimizeNames(ue,be),(ye=this.finally)===null||ye===void 0||ye.optimizeNames(ue,be),this}get names(){const ue=super.names;return this.catch&&G(ue,this.catch.names),this.finally&&G(ue,this.finally.names),ue}}class ce extends O{constructor(ue){super(),this.error=ue}render(ue){return`catch(${this.error})`+super.render(ue)}}ce.kind="catch";class ve extends O{render(ue){return"finally"+super.render(ue)}}ve.kind="finally";class pe{constructor(ue,be={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...be,_n:be.lines?`
`:""},this._extScope=ue,this._scope=new _.Scope({parent:ue}),this._nodes=[new F]}toString(){return this._root.render(this.opts)}name(ue){return this._scope.name(ue)}scopeName(ue){return this._extScope.name(ue)}scopeValue(ue,be){const ge=this._extScope.value(ue,be);return(this._values[ge.prefix]||(this._values[ge.prefix]=new Set)).add(ge),ge}getScopeValue(ue,be){return this._extScope.getValue(ue,be)}scopeRefs(ue){return this._extScope.scopeRefs(ue,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(ue,be,ge,ye){const Ee=this._scope.toName(be);return ge!==void 0&&ye&&(this._constants[Ee.str]=ge),this._leafNode(new C(ue,Ee,ge)),Ee}const(ue,be,ge){return this._def(_.varKinds.const,ue,be,ge)}let(ue,be,ge){return this._def(_.varKinds.let,ue,be,ge)}var(ue,be,ge){return this._def(_.varKinds.var,ue,be,ge)}assign(ue,be,ge){return this._leafNode(new T(ue,be,ge))}add(ue,be){return this._leafNode(new B(ue,r.operators.ADD,be))}code(ue){return typeof ue=="function"?ue():ue!==n.nil&&this._leafNode(new V(ue)),this}object(...ue){const be=["{"];for(const[ge,ye]of ue)be.length>1&&be.push(","),be.push(ge),(ge!==ye||this.opts.es5)&&(be.push(":"),(0,n.addCodeArg)(be,ye));return be.push("}"),new n._Code(be)}if(ue,be,ge){if(this._blockNode(new L(ue)),be&&ge)this.code(be).else().code(ge).endIf();else if(be)this.code(be).endIf();else if(ge)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(ue){return this._elseNode(new L(ue))}else(){return this._elseNode(new M)}endIf(){return this._endBlockNode(L,M)}_for(ue,be){return this._blockNode(ue),be&&this.code(be).endFor(),this}for(ue,be){return this._for(new q(ue),be)}forRange(ue,be,ge,ye,Ee=this.opts.es5?_.varKinds.var:_.varKinds.let){const Re=this._scope.toName(ue);return this._for(new H(Ee,Re,be,ge),()=>ye(Re))}forOf(ue,be,ge,ye=_.varKinds.const){const Ee=this._scope.toName(ue);if(this.opts.es5){const Re=be instanceof n.Name?be:this.var("_arr",be);return this.forRange("_i",0,(0,n._)`${Re}.length`,Ne=>{this.var(Ee,(0,n._)`${Re}[${Ne}]`),ge(Ee)})}return this._for(new X("of",ye,Ee,be),()=>ge(Ee))}forIn(ue,be,ge,ye=this.opts.es5?_.varKinds.var:_.varKinds.const){if(this.opts.ownProperties)return this.forOf(ue,(0,n._)`Object.keys(${be})`,ge);const Ee=this._scope.toName(ue);return this._for(new X("in",ye,Ee,be),()=>ge(Ee))}endFor(){return this._endBlockNode(j)}label(ue){return this._leafNode(new A(ue))}break(ue){return this._leafNode(new I(ue))}return(ue){const be=new Z;if(this._blockNode(be),this.code(ue),be.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Z)}try(ue,be,ge){if(!be&&!ge)throw new Error('CodeGen: "try" without "catch" and "finally"');const ye=new ae;if(this._blockNode(ye),this.code(ue),be){const Ee=this.name("e");this._currNode=ye.catch=new ce(Ee),be(Ee)}return ge&&(this._currNode=ye.finally=new ve,this.code(ge)),this._endBlockNode(ce,ve)}throw(ue){return this._leafNode(new N(ue))}block(ue,be){return this._blockStarts.push(this._nodes.length),ue&&this.code(ue).endBlock(be),this}endBlock(ue){const be=this._blockStarts.pop();if(be===void 0)throw new Error("CodeGen: not in self-balancing block");const ge=this._nodes.length-be;if(ge<0||ue!==void 0&&ge!==ue)throw new Error(`CodeGen: wrong number of nodes: ${ge} vs ${ue} expected`);return this._nodes.length=be,this}func(ue,be=n.nil,ge,ye){return this._blockNode(new J(ue,be,ge)),ye&&this.code(ye).endFunc(),this}endFunc(){return this._endBlockNode(J)}optimize(ue=1){for(;ue-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(ue){return this._currNode.nodes.push(ue),this}_blockNode(ue){this._currNode.nodes.push(ue),this._nodes.push(ue)}_endBlockNode(ue,be){const ge=this._currNode;if(ge instanceof ue||be&&ge instanceof be)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${be?`${ue.kind}/${be.kind}`:ue.kind}"`)}_elseNode(ue){const be=this._currNode;if(!(be instanceof L))throw new Error('CodeGen: "else" without "if"');return this._currNode=be.else=ue,this}get _root(){return this._nodes[0]}get _currNode(){const ue=this._nodes;return ue[ue.length-1]}set _currNode(ue){const be=this._nodes;be[be.length-1]=ue}}r.CodeGen=pe;function G(le,ue){for(const be in ue)le[be]=(le[be]||0)+(ue[be]||0);return le}function Y(le,ue){return ue instanceof n._CodeOrName?G(le,ue.names):le}function U(le,ue,be){if(le instanceof n.Name)return ge(le);if(!ye(le))return le;return new n._Code(le._items.reduce((Ee,Re)=>(Re instanceof n.Name&&(Re=ge(Re)),Re instanceof n._Code?Ee.push(...Re._items):Ee.push(Re),Ee),[]));function ge(Ee){const Re=be[Ee.str];return Re===void 0||ue[Ee.str]!==1?Ee:(delete ue[Ee.str],Re)}function ye(Ee){return Ee instanceof n._Code&&Ee._items.some(Re=>Re instanceof n.Name&&ue[Re.str]===1&&be[Re.str]!==void 0)}}function W(le,ue){for(const be in ue)le[be]=(le[be]||0)-(ue[be]||0)}function ee(le){return typeof le=="boolean"||typeof le=="number"||le===null?!le:(0,n._)`!${K(le)}`}r.not=ee;const re=te(r.operators.AND);function oe(...le){return le.reduce(re)}r.and=oe;const ie=te(r.operators.OR);function ne(...le){return le.reduce(ie)}r.or=ne;function te(le){return(ue,be)=>ue===n.nil?be:be===n.nil?ue:(0,n._)`${K(ue)} ${le} ${K(be)}`}function K(le){return le instanceof n.Name?le:(0,n._)`(${le})`}})(codegen);var util={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.checkStrictMode=r.getErrorPath=r.Type=r.useFunc=r.setEvaluated=r.evaluatedPropsToName=r.mergeEvaluated=r.eachItem=r.unescapeJsonPointer=r.escapeJsonPointer=r.escapeFragment=r.unescapeFragment=r.schemaRefOrVal=r.schemaHasRulesButRef=r.schemaHasRules=r.checkUnknownRules=r.alwaysValidSchema=r.toHash=void 0;const n=codegen,_=code$1;function x(J){const Z={};for(const ae of J)Z[ae]=!0;return Z}r.toHash=x;function S(J,Z){return typeof Z=="boolean"?Z:Object.keys(Z).length===0?!0:(E(J,Z),!C(Z,J.self.RULES.all))}r.alwaysValidSchema=S;function E(J,Z=J.schema){const{opts:ae,self:ce}=J;if(!ae.strictSchema||typeof Z=="boolean")return;const ve=ce.RULES.keywords;for(const pe in Z)ve[pe]||X(J,`unknown keyword: "${pe}"`)}r.checkUnknownRules=E;function C(J,Z){if(typeof J=="boolean")return!J;for(const ae in J)if(Z[ae])return!0;return!1}r.schemaHasRules=C;function T(J,Z){if(typeof J=="boolean")return!J;for(const ae in J)if(ae!=="$ref"&&Z.all[ae])return!0;return!1}r.schemaHasRulesButRef=T;function B({topSchemaRef:J,schemaPath:Z},ae,ce,ve){if(!ve){if(typeof ae=="number"||typeof ae=="boolean")return ae;if(typeof ae=="string")return(0,n._)`${ae}`}return(0,n._)`${J}${Z}${(0,n.getProperty)(ce)}`}r.schemaRefOrVal=B;function A(J){return V(decodeURIComponent(J))}r.unescapeFragment=A;function I(J){return encodeURIComponent(N(J))}r.escapeFragment=I;function N(J){return typeof J=="number"?`${J}`:J.replace(/~/g,"~0").replace(/\//g,"~1")}r.escapeJsonPointer=N;function V(J){return J.replace(/~1/g,"/").replace(/~0/g,"~")}r.unescapeJsonPointer=V;function D(J,Z){if(Array.isArray(J))for(const ae of J)Z(ae);else Z(J)}r.eachItem=D;function O({mergeNames:J,mergeToName:Z,mergeValues:ae,resultToName:ce}){return(ve,pe,G,Y)=>{const U=G===void 0?pe:G instanceof n.Name?(pe instanceof n.Name?J(ve,pe,G):Z(ve,pe,G),G):pe instanceof n.Name?(Z(ve,G,pe),pe):ae(pe,G);return Y===n.Name&&!(U instanceof n.Name)?ce(ve,U):U}}r.mergeEvaluated={props:O({mergeNames:(J,Z,ae)=>J.if((0,n._)`${ae} !== true && ${Z} !== undefined`,()=>{J.if((0,n._)`${Z} === true`,()=>J.assign(ae,!0),()=>J.assign(ae,(0,n._)`${ae} || {}`).code((0,n._)`Object.assign(${ae}, ${Z})`))}),mergeToName:(J,Z,ae)=>J.if((0,n._)`${ae} !== true`,()=>{Z===!0?J.assign(ae,!0):(J.assign(ae,(0,n._)`${ae} || {}`),M(J,ae,Z))}),mergeValues:(J,Z)=>J===!0?!0:{...J,...Z},resultToName:F}),items:O({mergeNames:(J,Z,ae)=>J.if((0,n._)`${ae} !== true && ${Z} !== undefined`,()=>J.assign(ae,(0,n._)`${Z} === true ? true : ${ae} > ${Z} ? ${ae} : ${Z}`)),mergeToName:(J,Z,ae)=>J.if((0,n._)`${ae} !== true`,()=>J.assign(ae,Z===!0?!0:(0,n._)`${ae} > ${Z} ? ${ae} : ${Z}`)),mergeValues:(J,Z)=>J===!0?!0:Math.max(J,Z),resultToName:(J,Z)=>J.var("items",Z)})};function F(J,Z){if(Z===!0)return J.var("props",!0);const ae=J.var("props",(0,n._)`{}`);return Z!==void 0&&M(J,ae,Z),ae}r.evaluatedPropsToName=F;function M(J,Z,ae){Object.keys(ae).forEach(ce=>J.assign((0,n._)`${Z}${(0,n.getProperty)(ce)}`,!0))}r.setEvaluated=M;const L={};function j(J,Z){return J.scopeValue("func",{ref:Z,code:L[Z.code]||(L[Z.code]=new _._Code(Z.code))})}r.useFunc=j;var q;(function(J){J[J.Num=0]="Num",J[J.Str=1]="Str"})(q=r.Type||(r.Type={}));function H(J,Z,ae){if(J instanceof n.Name){const ce=Z===q.Num;return ae?ce?(0,n._)`"[" + ${J} + "]"`:(0,n._)`"['" + ${J} + "']"`:ce?(0,n._)`"/" + ${J}`:(0,n._)`"/" + ${J}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return ae?(0,n.getProperty)(J).toString():"/"+N(J)}r.getErrorPath=H;function X(J,Z,ae=J.opts.strictSchema){if(ae){if(Z=`strict mode: ${Z}`,ae===!0)throw new Error(Z);J.self.logger.warn(Z)}}r.checkStrictMode=X})(util);var names$1={};Object.defineProperty(names$1,"__esModule",{value:!0});const codegen_1$t=codegen,names={data:new codegen_1$t.Name("data"),valCxt:new codegen_1$t.Name("valCxt"),instancePath:new codegen_1$t.Name("instancePath"),parentData:new codegen_1$t.Name("parentData"),parentDataProperty:new codegen_1$t.Name("parentDataProperty"),rootData:new codegen_1$t.Name("rootData"),dynamicAnchors:new codegen_1$t.Name("dynamicAnchors"),vErrors:new codegen_1$t.Name("vErrors"),errors:new codegen_1$t.Name("errors"),this:new codegen_1$t.Name("this"),self:new codegen_1$t.Name("self"),scope:new codegen_1$t.Name("scope"),json:new codegen_1$t.Name("json"),jsonPos:new codegen_1$t.Name("jsonPos"),jsonLen:new codegen_1$t.Name("jsonLen"),jsonPart:new codegen_1$t.Name("jsonPart")};names$1.default=names;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.extendErrors=r.resetErrorsCount=r.reportExtraError=r.reportError=r.keyword$DataError=r.keywordError=void 0;const n=codegen,_=util,x=names$1;r.keywordError={message:({keyword:M})=>(0,n.str)`must pass "${M}" keyword validation`},r.keyword$DataError={message:({keyword:M,schemaType:L})=>L?(0,n.str)`"${M}" keyword must be ${L} ($data)`:(0,n.str)`"${M}" keyword is invalid ($data)`};function S(M,L=r.keywordError,j,q){const{it:H}=M,{gen:X,compositeRule:J,allErrors:Z}=H,ae=N(M,L,j);q??(J||Z)?B(X,ae):A(H,(0,n._)`[${ae}]`)}r.reportError=S;function E(M,L=r.keywordError,j){const{it:q}=M,{gen:H,compositeRule:X,allErrors:J}=q,Z=N(M,L,j);B(H,Z),X||J||A(q,x.default.vErrors)}r.reportExtraError=E;function C(M,L){M.assign(x.default.errors,L),M.if((0,n._)`${x.default.vErrors} !== null`,()=>M.if(L,()=>M.assign((0,n._)`${x.default.vErrors}.length`,L),()=>M.assign(x.default.vErrors,null)))}r.resetErrorsCount=C;function T({gen:M,keyword:L,schemaValue:j,data:q,errsCount:H,it:X}){if(H===void 0)throw new Error("ajv implementation error");const J=M.name("err");M.forRange("i",H,x.default.errors,Z=>{M.const(J,(0,n._)`${x.default.vErrors}[${Z}]`),M.if((0,n._)`${J}.instancePath === undefined`,()=>M.assign((0,n._)`${J}.instancePath`,(0,n.strConcat)(x.default.instancePath,X.errorPath))),M.assign((0,n._)`${J}.schemaPath`,(0,n.str)`${X.errSchemaPath}/${L}`),X.opts.verbose&&(M.assign((0,n._)`${J}.schema`,j),M.assign((0,n._)`${J}.data`,q))})}r.extendErrors=T;function B(M,L){const j=M.const("err",L);M.if((0,n._)`${x.default.vErrors} === null`,()=>M.assign(x.default.vErrors,(0,n._)`[${j}]`),(0,n._)`${x.default.vErrors}.push(${j})`),M.code((0,n._)`${x.default.errors}++`)}function A(M,L){const{gen:j,validateName:q,schemaEnv:H}=M;H.$async?j.throw((0,n._)`new ${M.ValidationError}(${L})`):(j.assign((0,n._)`${q}.errors`,L),j.return(!1))}const I={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function N(M,L,j){const{createErrors:q}=M.it;return q===!1?(0,n._)`{}`:V(M,L,j)}function V(M,L,j={}){const{gen:q,it:H}=M,X=[D(H,j),O(M,j)];return F(M,L,X),q.object(...X)}function D({errorPath:M},{instancePath:L}){const j=L?(0,n.str)`${M}${(0,_.getErrorPath)(L,_.Type.Str)}`:M;return[x.default.instancePath,(0,n.strConcat)(x.default.instancePath,j)]}function O({keyword:M,it:{errSchemaPath:L}},{schemaPath:j,parentSchema:q}){let H=q?L:(0,n.str)`${L}/${M}`;return j&&(H=(0,n.str)`${H}${(0,_.getErrorPath)(j,_.Type.Str)}`),[I.schemaPath,H]}function F(M,{params:L,message:j},q){const{keyword:H,data:X,schemaValue:J,it:Z}=M,{opts:ae,propertyName:ce,topSchemaRef:ve,schemaPath:pe}=Z;q.push([I.keyword,H],[I.params,typeof L=="function"?L(M):L||(0,n._)`{}`]),ae.messages&&q.push([I.message,typeof j=="function"?j(M):j]),ae.verbose&&q.push([I.schema,J],[I.parentSchema,(0,n._)`${ve}${pe}`],[x.default.data,X]),ce&&q.push([I.propertyName,ce])}})(errors);Object.defineProperty(boolSchema,"__esModule",{value:!0});boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;const errors_1$2=errors,codegen_1$s=codegen,names_1$6=names$1,boolError={message:"boolean schema is false"};function topBoolOrEmptySchema(r){const{gen:n,schema:_,validateName:x}=r;_===!1?falseSchemaError(r,!1):typeof _=="object"&&_.$async===!0?n.return(names_1$6.default.data):(n.assign((0,codegen_1$s._)`${x}.errors`,null),n.return(!0))}boolSchema.topBoolOrEmptySchema=topBoolOrEmptySchema;function boolOrEmptySchema(r,n){const{gen:_,schema:x}=r;x===!1?(_.var(n,!1),falseSchemaError(r)):_.var(n,!0)}boolSchema.boolOrEmptySchema=boolOrEmptySchema;function falseSchemaError(r,n){const{gen:_,data:x}=r,S={gen:_,keyword:"false schema",data:x,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:r};(0,errors_1$2.reportError)(S,boolError,void 0,n)}var dataType={},rules={};Object.defineProperty(rules,"__esModule",{value:!0});rules.getRules=rules.isJSONType=void 0;const _jsonTypes=["string","number","integer","boolean","null","object","array"],jsonTypes=new Set(_jsonTypes);function isJSONType(r){return typeof r=="string"&&jsonTypes.has(r)}rules.isJSONType=isJSONType;function getRules(){const r={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...r,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},r.number,r.string,r.array,r.object],post:{rules:[]},all:{},keywords:{}}}rules.getRules=getRules;var applicability={};Object.defineProperty(applicability,"__esModule",{value:!0});applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0;function schemaHasRulesForType({schema:r,self:n},_){const x=n.RULES.types[_];return x&&x!==!0&&shouldUseGroup(r,x)}applicability.schemaHasRulesForType=schemaHasRulesForType;function shouldUseGroup(r,n){return n.rules.some(_=>shouldUseRule(r,_))}applicability.shouldUseGroup=shouldUseGroup;function shouldUseRule(r,n){var _;return r[n.keyword]!==void 0||((_=n.definition.implements)===null||_===void 0?void 0:_.some(x=>r[x]!==void 0))}applicability.shouldUseRule=shouldUseRule;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.reportTypeError=r.checkDataTypes=r.checkDataType=r.coerceAndCheckDataType=r.getJSONTypes=r.getSchemaTypes=r.DataType=void 0;const n=rules,_=applicability,x=errors,S=codegen,E=util;var C;(function(q){q[q.Correct=0]="Correct",q[q.Wrong=1]="Wrong"})(C=r.DataType||(r.DataType={}));function T(q){const H=B(q.type);if(H.includes("null")){if(q.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!H.length&&q.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');q.nullable===!0&&H.push("null")}return H}r.getSchemaTypes=T;function B(q){const H=Array.isArray(q)?q:q?[q]:[];if(H.every(n.isJSONType))return H;throw new Error("type must be JSONType or JSONType[]: "+H.join(","))}r.getJSONTypes=B;function A(q,H){const{gen:X,data:J,opts:Z}=q,ae=N(H,Z.coerceTypes),ce=H.length>0&&!(ae.length===0&&H.length===1&&(0,_.schemaHasRulesForType)(q,H[0]));if(ce){const ve=F(H,J,Z.strictNumbers,C.Wrong);X.if(ve,()=>{ae.length?V(q,H,ae):L(q)})}return ce}r.coerceAndCheckDataType=A;const I=new Set(["string","number","integer","boolean","null"]);function N(q,H){return H?q.filter(X=>I.has(X)||H==="array"&&X==="array"):[]}function V(q,H,X){const{gen:J,data:Z,opts:ae}=q,ce=J.let("dataType",(0,S._)`typeof ${Z}`),ve=J.let("coerced",(0,S._)`undefined`);ae.coerceTypes==="array"&&J.if((0,S._)`${ce} == 'object' && Array.isArray(${Z}) && ${Z}.length == 1`,()=>J.assign(Z,(0,S._)`${Z}[0]`).assign(ce,(0,S._)`typeof ${Z}`).if(F(H,Z,ae.strictNumbers),()=>J.assign(ve,Z))),J.if((0,S._)`${ve} !== undefined`);for(const G of X)(I.has(G)||G==="array"&&ae.coerceTypes==="array")&&pe(G);J.else(),L(q),J.endIf(),J.if((0,S._)`${ve} !== undefined`,()=>{J.assign(Z,ve),D(q,ve)});function pe(G){switch(G){case"string":J.elseIf((0,S._)`${ce} == "number" || ${ce} == "boolean"`).assign(ve,(0,S._)`"" + ${Z}`).elseIf((0,S._)`${Z} === null`).assign(ve,(0,S._)`""`);return;case"number":J.elseIf((0,S._)`${ce} == "boolean" || ${Z} === null
              || (${ce} == "string" && ${Z} && ${Z} == +${Z})`).assign(ve,(0,S._)`+${Z}`);return;case"integer":J.elseIf((0,S._)`${ce} === "boolean" || ${Z} === null
              || (${ce} === "string" && ${Z} && ${Z} == +${Z} && !(${Z} % 1))`).assign(ve,(0,S._)`+${Z}`);return;case"boolean":J.elseIf((0,S._)`${Z} === "false" || ${Z} === 0 || ${Z} === null`).assign(ve,!1).elseIf((0,S._)`${Z} === "true" || ${Z} === 1`).assign(ve,!0);return;case"null":J.elseIf((0,S._)`${Z} === "" || ${Z} === 0 || ${Z} === false`),J.assign(ve,null);return;case"array":J.elseIf((0,S._)`${ce} === "string" || ${ce} === "number"
              || ${ce} === "boolean" || ${Z} === null`).assign(ve,(0,S._)`[${Z}]`)}}}function D({gen:q,parentData:H,parentDataProperty:X},J){q.if((0,S._)`${H} !== undefined`,()=>q.assign((0,S._)`${H}[${X}]`,J))}function O(q,H,X,J=C.Correct){const Z=J===C.Correct?S.operators.EQ:S.operators.NEQ;let ae;switch(q){case"null":return(0,S._)`${H} ${Z} null`;case"array":ae=(0,S._)`Array.isArray(${H})`;break;case"object":ae=(0,S._)`${H} && typeof ${H} == "object" && !Array.isArray(${H})`;break;case"integer":ae=ce((0,S._)`!(${H} % 1) && !isNaN(${H})`);break;case"number":ae=ce();break;default:return(0,S._)`typeof ${H} ${Z} ${q}`}return J===C.Correct?ae:(0,S.not)(ae);function ce(ve=S.nil){return(0,S.and)((0,S._)`typeof ${H} == "number"`,ve,X?(0,S._)`isFinite(${H})`:S.nil)}}r.checkDataType=O;function F(q,H,X,J){if(q.length===1)return O(q[0],H,X,J);let Z;const ae=(0,E.toHash)(q);if(ae.array&&ae.object){const ce=(0,S._)`typeof ${H} != "object"`;Z=ae.null?ce:(0,S._)`!${H} || ${ce}`,delete ae.null,delete ae.array,delete ae.object}else Z=S.nil;ae.number&&delete ae.integer;for(const ce in ae)Z=(0,S.and)(Z,O(ce,H,X,J));return Z}r.checkDataTypes=F;const M={message:({schema:q})=>`must be ${q}`,params:({schema:q,schemaValue:H})=>typeof q=="string"?(0,S._)`{type: ${q}}`:(0,S._)`{type: ${H}}`};function L(q){const H=j(q);(0,x.reportError)(H,M)}r.reportTypeError=L;function j(q){const{gen:H,data:X,schema:J}=q,Z=(0,E.schemaRefOrVal)(q,J,"type");return{gen:H,keyword:"type",data:X,schema:J.type,schemaCode:Z,schemaValue:Z,parentSchema:J,params:{},it:q}}})(dataType);var defaults$4={};Object.defineProperty(defaults$4,"__esModule",{value:!0});defaults$4.assignDefaults=void 0;const codegen_1$r=codegen,util_1$p=util;function assignDefaults(r,n){const{properties:_,items:x}=r.schema;if(n==="object"&&_)for(const S in _)assignDefault(r,S,_[S].default);else n==="array"&&Array.isArray(x)&&x.forEach((S,E)=>assignDefault(r,E,S.default))}defaults$4.assignDefaults=assignDefaults;function assignDefault(r,n,_){const{gen:x,compositeRule:S,data:E,opts:C}=r;if(_===void 0)return;const T=(0,codegen_1$r._)`${E}${(0,codegen_1$r.getProperty)(n)}`;if(S){(0,util_1$p.checkStrictMode)(r,`default is ignored for: ${T}`);return}let B=(0,codegen_1$r._)`${T} === undefined`;C.useDefaults==="empty"&&(B=(0,codegen_1$r._)`${B} || ${T} === null || ${T} === ""`),x.if(B,(0,codegen_1$r._)`${T} = ${(0,codegen_1$r.stringify)(_)}`)}var keyword={},code={};Object.defineProperty(code,"__esModule",{value:!0});code.validateUnion=code.validateArray=code.usePattern=code.callValidateCode=code.schemaProperties=code.allSchemaProperties=code.noPropertyInData=code.propertyInData=code.isOwnProperty=code.hasPropFunc=code.reportMissingProp=code.checkMissingProp=code.checkReportMissingProp=void 0;const codegen_1$q=codegen,util_1$o=util,names_1$5=names$1,util_2$1=util;function checkReportMissingProp(r,n){const{gen:_,data:x,it:S}=r;_.if(noPropertyInData(_,x,n,S.opts.ownProperties),()=>{r.setParams({missingProperty:(0,codegen_1$q._)`${n}`},!0),r.error()})}code.checkReportMissingProp=checkReportMissingProp;function checkMissingProp({gen:r,data:n,it:{opts:_}},x,S){return(0,codegen_1$q.or)(...x.map(E=>(0,codegen_1$q.and)(noPropertyInData(r,n,E,_.ownProperties),(0,codegen_1$q._)`${S} = ${E}`)))}code.checkMissingProp=checkMissingProp;function reportMissingProp(r,n){r.setParams({missingProperty:n},!0),r.error()}code.reportMissingProp=reportMissingProp;function hasPropFunc(r){return r.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,codegen_1$q._)`Object.prototype.hasOwnProperty`})}code.hasPropFunc=hasPropFunc;function isOwnProperty(r,n,_){return(0,codegen_1$q._)`${hasPropFunc(r)}.call(${n}, ${_})`}code.isOwnProperty=isOwnProperty;function propertyInData(r,n,_,x){const S=(0,codegen_1$q._)`${n}${(0,codegen_1$q.getProperty)(_)} !== undefined`;return x?(0,codegen_1$q._)`${S} && ${isOwnProperty(r,n,_)}`:S}code.propertyInData=propertyInData;function noPropertyInData(r,n,_,x){const S=(0,codegen_1$q._)`${n}${(0,codegen_1$q.getProperty)(_)} === undefined`;return x?(0,codegen_1$q.or)(S,(0,codegen_1$q.not)(isOwnProperty(r,n,_))):S}code.noPropertyInData=noPropertyInData;function allSchemaProperties(r){return r?Object.keys(r).filter(n=>n!=="__proto__"):[]}code.allSchemaProperties=allSchemaProperties;function schemaProperties(r,n){return allSchemaProperties(n).filter(_=>!(0,util_1$o.alwaysValidSchema)(r,n[_]))}code.schemaProperties=schemaProperties;function callValidateCode({schemaCode:r,data:n,it:{gen:_,topSchemaRef:x,schemaPath:S,errorPath:E},it:C},T,B,A){const I=A?(0,codegen_1$q._)`${r}, ${n}, ${x}${S}`:n,N=[[names_1$5.default.instancePath,(0,codegen_1$q.strConcat)(names_1$5.default.instancePath,E)],[names_1$5.default.parentData,C.parentData],[names_1$5.default.parentDataProperty,C.parentDataProperty],[names_1$5.default.rootData,names_1$5.default.rootData]];C.opts.dynamicRef&&N.push([names_1$5.default.dynamicAnchors,names_1$5.default.dynamicAnchors]);const V=(0,codegen_1$q._)`${I}, ${_.object(...N)}`;return B!==codegen_1$q.nil?(0,codegen_1$q._)`${T}.call(${B}, ${V})`:(0,codegen_1$q._)`${T}(${V})`}code.callValidateCode=callValidateCode;const newRegExp=(0,codegen_1$q._)`new RegExp`;function usePattern({gen:r,it:{opts:n}},_){const x=n.unicodeRegExp?"u":"",{regExp:S}=n.code,E=S(_,x);return r.scopeValue("pattern",{key:E.toString(),ref:E,code:(0,codegen_1$q._)`${S.code==="new RegExp"?newRegExp:(0,util_2$1.useFunc)(r,S)}(${_}, ${x})`})}code.usePattern=usePattern;function validateArray(r){const{gen:n,data:_,keyword:x,it:S}=r,E=n.name("valid");if(S.allErrors){const T=n.let("valid",!0);return C(()=>n.assign(T,!1)),T}return n.var(E,!0),C(()=>n.break()),E;function C(T){const B=n.const("len",(0,codegen_1$q._)`${_}.length`);n.forRange("i",0,B,A=>{r.subschema({keyword:x,dataProp:A,dataPropType:util_1$o.Type.Num},E),n.if((0,codegen_1$q.not)(E),T)})}}code.validateArray=validateArray;function validateUnion(r){const{gen:n,schema:_,keyword:x,it:S}=r;if(!Array.isArray(_))throw new Error("ajv implementation error");if(_.some(B=>(0,util_1$o.alwaysValidSchema)(S,B))&&!S.opts.unevaluated)return;const C=n.let("valid",!1),T=n.name("_valid");n.block(()=>_.forEach((B,A)=>{const I=r.subschema({keyword:x,schemaProp:A,compositeRule:!0},T);n.assign(C,(0,codegen_1$q._)`${C} || ${T}`),r.mergeValidEvaluated(I,T)||n.if((0,codegen_1$q.not)(C))})),r.result(C,()=>r.reset(),()=>r.error(!0))}code.validateUnion=validateUnion;Object.defineProperty(keyword,"__esModule",{value:!0});keyword.validateKeywordUsage=keyword.validSchemaType=keyword.funcKeywordCode=keyword.macroKeywordCode=void 0;const codegen_1$p=codegen,names_1$4=names$1,code_1$9=code,errors_1$1=errors;function macroKeywordCode(r,n){const{gen:_,keyword:x,schema:S,parentSchema:E,it:C}=r,T=n.macro.call(C.self,S,E,C),B=useKeyword(_,x,T);C.opts.validateSchema!==!1&&C.self.validateSchema(T,!0);const A=_.name("valid");r.subschema({schema:T,schemaPath:codegen_1$p.nil,errSchemaPath:`${C.errSchemaPath}/${x}`,topSchemaRef:B,compositeRule:!0},A),r.pass(A,()=>r.error(!0))}keyword.macroKeywordCode=macroKeywordCode;function funcKeywordCode(r,n){var _;const{gen:x,keyword:S,schema:E,parentSchema:C,$data:T,it:B}=r;checkAsyncKeyword(B,n);const A=!T&&n.compile?n.compile.call(B.self,E,C,B):n.validate,I=useKeyword(x,S,A),N=x.let("valid");r.block$data(N,V),r.ok((_=n.valid)!==null&&_!==void 0?_:N);function V(){if(n.errors===!1)F(),n.modifying&&modifyData(r),M(()=>r.error());else{const L=n.async?D():O();n.modifying&&modifyData(r),M(()=>addErrs(r,L))}}function D(){const L=x.let("ruleErrs",null);return x.try(()=>F((0,codegen_1$p._)`await `),j=>x.assign(N,!1).if((0,codegen_1$p._)`${j} instanceof ${B.ValidationError}`,()=>x.assign(L,(0,codegen_1$p._)`${j}.errors`),()=>x.throw(j))),L}function O(){const L=(0,codegen_1$p._)`${I}.errors`;return x.assign(L,null),F(codegen_1$p.nil),L}function F(L=n.async?(0,codegen_1$p._)`await `:codegen_1$p.nil){const j=B.opts.passContext?names_1$4.default.this:names_1$4.default.self,q=!("compile"in n&&!T||n.schema===!1);x.assign(N,(0,codegen_1$p._)`${L}${(0,code_1$9.callValidateCode)(r,I,j,q)}`,n.modifying)}function M(L){var j;x.if((0,codegen_1$p.not)((j=n.valid)!==null&&j!==void 0?j:N),L)}}keyword.funcKeywordCode=funcKeywordCode;function modifyData(r){const{gen:n,data:_,it:x}=r;n.if(x.parentData,()=>n.assign(_,(0,codegen_1$p._)`${x.parentData}[${x.parentDataProperty}]`))}function addErrs(r,n){const{gen:_}=r;_.if((0,codegen_1$p._)`Array.isArray(${n})`,()=>{_.assign(names_1$4.default.vErrors,(0,codegen_1$p._)`${names_1$4.default.vErrors} === null ? ${n} : ${names_1$4.default.vErrors}.concat(${n})`).assign(names_1$4.default.errors,(0,codegen_1$p._)`${names_1$4.default.vErrors}.length`),(0,errors_1$1.extendErrors)(r)},()=>r.error())}function checkAsyncKeyword({schemaEnv:r},n){if(n.async&&!r.$async)throw new Error("async keyword in sync schema")}function useKeyword(r,n,_){if(_===void 0)throw new Error(`keyword "${n}" failed to compile`);return r.scopeValue("keyword",typeof _=="function"?{ref:_}:{ref:_,code:(0,codegen_1$p.stringify)(_)})}function validSchemaType(r,n,_=!1){return!n.length||n.some(x=>x==="array"?Array.isArray(r):x==="object"?r&&typeof r=="object"&&!Array.isArray(r):typeof r==x||_&&typeof r>"u")}keyword.validSchemaType=validSchemaType;function validateKeywordUsage({schema:r,opts:n,self:_,errSchemaPath:x},S,E){if(Array.isArray(S.keyword)?!S.keyword.includes(E):S.keyword!==E)throw new Error("ajv implementation error");const C=S.dependencies;if(C?.some(T=>!Object.prototype.hasOwnProperty.call(r,T)))throw new Error(`parent schema must have dependencies of ${E}: ${C.join(",")}`);if(S.validateSchema&&!S.validateSchema(r[E])){const B=`keyword "${E}" value is invalid at path "${x}": `+_.errorsText(S.validateSchema.errors);if(n.validateSchema==="log")_.logger.error(B);else throw new Error(B)}}keyword.validateKeywordUsage=validateKeywordUsage;var subschema={};Object.defineProperty(subschema,"__esModule",{value:!0});subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;const codegen_1$o=codegen,util_1$n=util;function getSubschema(r,{keyword:n,schemaProp:_,schema:x,schemaPath:S,errSchemaPath:E,topSchemaRef:C}){if(n!==void 0&&x!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(n!==void 0){const T=r.schema[n];return _===void 0?{schema:T,schemaPath:(0,codegen_1$o._)`${r.schemaPath}${(0,codegen_1$o.getProperty)(n)}`,errSchemaPath:`${r.errSchemaPath}/${n}`}:{schema:T[_],schemaPath:(0,codegen_1$o._)`${r.schemaPath}${(0,codegen_1$o.getProperty)(n)}${(0,codegen_1$o.getProperty)(_)}`,errSchemaPath:`${r.errSchemaPath}/${n}/${(0,util_1$n.escapeFragment)(_)}`}}if(x!==void 0){if(S===void 0||E===void 0||C===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:x,schemaPath:S,topSchemaRef:C,errSchemaPath:E}}throw new Error('either "keyword" or "schema" must be passed')}subschema.getSubschema=getSubschema;function extendSubschemaData(r,n,{dataProp:_,dataPropType:x,data:S,dataTypes:E,propertyName:C}){if(S!==void 0&&_!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:T}=n;if(_!==void 0){const{errorPath:A,dataPathArr:I,opts:N}=n,V=T.let("data",(0,codegen_1$o._)`${n.data}${(0,codegen_1$o.getProperty)(_)}`,!0);B(V),r.errorPath=(0,codegen_1$o.str)`${A}${(0,util_1$n.getErrorPath)(_,x,N.jsPropertySyntax)}`,r.parentDataProperty=(0,codegen_1$o._)`${_}`,r.dataPathArr=[...I,r.parentDataProperty]}if(S!==void 0){const A=S instanceof codegen_1$o.Name?S:T.let("data",S,!0);B(A),C!==void 0&&(r.propertyName=C)}E&&(r.dataTypes=E);function B(A){r.data=A,r.dataLevel=n.dataLevel+1,r.dataTypes=[],n.definedProperties=new Set,r.parentData=n.data,r.dataNames=[...n.dataNames,A]}}subschema.extendSubschemaData=extendSubschemaData;function extendSubschemaMode(r,{jtdDiscriminator:n,jtdMetadata:_,compositeRule:x,createErrors:S,allErrors:E}){x!==void 0&&(r.compositeRule=x),S!==void 0&&(r.createErrors=S),E!==void 0&&(r.allErrors=E),r.jtdDiscriminator=n,r.jtdMetadata=_}subschema.extendSubschemaMode=extendSubschemaMode;var resolve$1={},fastDeepEqual=function r(n,_){if(n===_)return!0;if(n&&_&&typeof n=="object"&&typeof _=="object"){if(n.constructor!==_.constructor)return!1;var x,S,E;if(Array.isArray(n)){if(x=n.length,x!=_.length)return!1;for(S=x;S--!==0;)if(!r(n[S],_[S]))return!1;return!0}if(n.constructor===RegExp)return n.source===_.source&&n.flags===_.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===_.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===_.toString();if(E=Object.keys(n),x=E.length,x!==Object.keys(_).length)return!1;for(S=x;S--!==0;)if(!Object.prototype.hasOwnProperty.call(_,E[S]))return!1;for(S=x;S--!==0;){var C=E[S];if(!r(n[C],_[C]))return!1}return!0}return n!==n&&_!==_},jsonSchemaTraverse={exports:{}},traverse$1=jsonSchemaTraverse.exports=function(r,n,_){typeof n=="function"&&(_=n,n={}),_=n.cb||_;var x=typeof _=="function"?_:_.pre||function(){},S=_.post||function(){};_traverse(n,x,S,r,"",r)};traverse$1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};traverse$1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};traverse$1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};traverse$1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _traverse(r,n,_,x,S,E,C,T,B,A){if(x&&typeof x=="object"&&!Array.isArray(x)){n(x,S,E,C,T,B,A);for(var I in x){var N=x[I];if(Array.isArray(N)){if(I in traverse$1.arrayKeywords)for(var V=0;V<N.length;V++)_traverse(r,n,_,N[V],S+"/"+I+"/"+V,E,S,I,x,V)}else if(I in traverse$1.propsKeywords){if(N&&typeof N=="object")for(var D in N)_traverse(r,n,_,N[D],S+"/"+I+"/"+escapeJsonPtr(D),E,S,I,x,D)}else(I in traverse$1.keywords||r.allKeys&&!(I in traverse$1.skipKeywords))&&_traverse(r,n,_,N,S+"/"+I,E,S,I,x)}_(x,S,E,C,T,B,A)}}function escapeJsonPtr(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}var jsonSchemaTraverseExports=jsonSchemaTraverse.exports;Object.defineProperty(resolve$1,"__esModule",{value:!0});resolve$1.getSchemaRefs=resolve$1.resolveUrl=resolve$1.normalizeId=resolve$1._getFullPath=resolve$1.getFullPath=resolve$1.inlineRef=void 0;const util_1$m=util,equal$2=fastDeepEqual,traverse=jsonSchemaTraverseExports,SIMPLE_INLINED=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function inlineRef(r,n=!0){return typeof r=="boolean"?!0:n===!0?!hasRef(r):n?countKeys(r)<=n:!1}resolve$1.inlineRef=inlineRef;const REF_KEYWORDS=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function hasRef(r){for(const n in r){if(REF_KEYWORDS.has(n))return!0;const _=r[n];if(Array.isArray(_)&&_.some(hasRef)||typeof _=="object"&&hasRef(_))return!0}return!1}function countKeys(r){let n=0;for(const _ in r){if(_==="$ref")return 1/0;if(n++,!SIMPLE_INLINED.has(_)&&(typeof r[_]=="object"&&(0,util_1$m.eachItem)(r[_],x=>n+=countKeys(x)),n===1/0))return 1/0}return n}function getFullPath(r,n="",_){_!==!1&&(n=normalizeId(n));const x=r.parse(n);return _getFullPath(r,x)}resolve$1.getFullPath=getFullPath;function _getFullPath(r,n){return r.serialize(n).split("#")[0]+"#"}resolve$1._getFullPath=_getFullPath;const TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(r){return r?r.replace(TRAILING_SLASH_HASH,""):""}resolve$1.normalizeId=normalizeId;function resolveUrl(r,n,_){return _=normalizeId(_),r.resolve(n,_)}resolve$1.resolveUrl=resolveUrl;const ANCHOR=/^[a-z_][-a-z0-9._]*$/i;function getSchemaRefs(r,n){if(typeof r=="boolean")return{};const{schemaId:_,uriResolver:x}=this.opts,S=normalizeId(r[_]||n),E={"":S},C=getFullPath(x,S,!1),T={},B=new Set;return traverse(r,{allKeys:!0},(N,V,D,O)=>{if(O===void 0)return;const F=C+V;let M=E[O];typeof N[_]=="string"&&(M=L.call(this,N[_])),j.call(this,N.$anchor),j.call(this,N.$dynamicAnchor),E[V]=M;function L(q){const H=this.opts.uriResolver.resolve;if(q=normalizeId(M?H(M,q):q),B.has(q))throw I(q);B.add(q);let X=this.refs[q];return typeof X=="string"&&(X=this.refs[X]),typeof X=="object"?A(N,X.schema,q):q!==normalizeId(F)&&(q[0]==="#"?(A(N,T[q],q),T[q]=N):this.refs[q]=F),q}function j(q){if(typeof q=="string"){if(!ANCHOR.test(q))throw new Error(`invalid anchor "${q}"`);L.call(this,`#${q}`)}}}),T;function A(N,V,D){if(V!==void 0&&!equal$2(N,V))throw I(D)}function I(N){return new Error(`reference "${N}" resolves to more than one schema`)}}resolve$1.getSchemaRefs=getSchemaRefs;Object.defineProperty(validate,"__esModule",{value:!0});validate.getData=validate.KeywordCxt=validate.validateFunctionCode=void 0;const boolSchema_1=boolSchema,dataType_1$1=dataType,applicability_1=applicability,dataType_2=dataType,defaults_1=defaults$4,keyword_1=keyword,subschema_1=subschema,codegen_1$n=codegen,names_1$3=names$1,resolve_1$2=resolve$1,util_1$l=util,errors_1=errors;function validateFunctionCode(r){if(isSchemaObj(r)&&(checkKeywords(r),schemaCxtHasRules(r))){topSchemaObjCode(r);return}validateFunction(r,()=>(0,boolSchema_1.topBoolOrEmptySchema)(r))}validate.validateFunctionCode=validateFunctionCode;function validateFunction({gen:r,validateName:n,schema:_,schemaEnv:x,opts:S},E){S.code.es5?r.func(n,(0,codegen_1$n._)`${names_1$3.default.data}, ${names_1$3.default.valCxt}`,x.$async,()=>{r.code((0,codegen_1$n._)`"use strict"; ${funcSourceUrl(_,S)}`),destructureValCxtES5(r,S),r.code(E)}):r.func(n,(0,codegen_1$n._)`${names_1$3.default.data}, ${destructureValCxt(S)}`,x.$async,()=>r.code(funcSourceUrl(_,S)).code(E))}function destructureValCxt(r){return(0,codegen_1$n._)`{${names_1$3.default.instancePath}="", ${names_1$3.default.parentData}, ${names_1$3.default.parentDataProperty}, ${names_1$3.default.rootData}=${names_1$3.default.data}${r.dynamicRef?(0,codegen_1$n._)`, ${names_1$3.default.dynamicAnchors}={}`:codegen_1$n.nil}}={}`}function destructureValCxtES5(r,n){r.if(names_1$3.default.valCxt,()=>{r.var(names_1$3.default.instancePath,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.instancePath}`),r.var(names_1$3.default.parentData,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.parentData}`),r.var(names_1$3.default.parentDataProperty,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.parentDataProperty}`),r.var(names_1$3.default.rootData,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.rootData}`),n.dynamicRef&&r.var(names_1$3.default.dynamicAnchors,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.dynamicAnchors}`)},()=>{r.var(names_1$3.default.instancePath,(0,codegen_1$n._)`""`),r.var(names_1$3.default.parentData,(0,codegen_1$n._)`undefined`),r.var(names_1$3.default.parentDataProperty,(0,codegen_1$n._)`undefined`),r.var(names_1$3.default.rootData,names_1$3.default.data),n.dynamicRef&&r.var(names_1$3.default.dynamicAnchors,(0,codegen_1$n._)`{}`)})}function topSchemaObjCode(r){const{schema:n,opts:_,gen:x}=r;validateFunction(r,()=>{_.$comment&&n.$comment&&commentKeyword(r),checkNoDefault(r),x.let(names_1$3.default.vErrors,null),x.let(names_1$3.default.errors,0),_.unevaluated&&resetEvaluated(r),typeAndKeywords(r),returnResults(r)})}function resetEvaluated(r){const{gen:n,validateName:_}=r;r.evaluated=n.const("evaluated",(0,codegen_1$n._)`${_}.evaluated`),n.if((0,codegen_1$n._)`${r.evaluated}.dynamicProps`,()=>n.assign((0,codegen_1$n._)`${r.evaluated}.props`,(0,codegen_1$n._)`undefined`)),n.if((0,codegen_1$n._)`${r.evaluated}.dynamicItems`,()=>n.assign((0,codegen_1$n._)`${r.evaluated}.items`,(0,codegen_1$n._)`undefined`))}function funcSourceUrl(r,n){const _=typeof r=="object"&&r[n.schemaId];return _&&(n.code.source||n.code.process)?(0,codegen_1$n._)`/*# sourceURL=${_} */`:codegen_1$n.nil}function subschemaCode(r,n){if(isSchemaObj(r)&&(checkKeywords(r),schemaCxtHasRules(r))){subSchemaObjCode(r,n);return}(0,boolSchema_1.boolOrEmptySchema)(r,n)}function schemaCxtHasRules({schema:r,self:n}){if(typeof r=="boolean")return!r;for(const _ in r)if(n.RULES.all[_])return!0;return!1}function isSchemaObj(r){return typeof r.schema!="boolean"}function subSchemaObjCode(r,n){const{schema:_,gen:x,opts:S}=r;S.$comment&&_.$comment&&commentKeyword(r),updateContext(r),checkAsyncSchema(r);const E=x.const("_errs",names_1$3.default.errors);typeAndKeywords(r,E),x.var(n,(0,codegen_1$n._)`${E} === ${names_1$3.default.errors}`)}function checkKeywords(r){(0,util_1$l.checkUnknownRules)(r),checkRefsAndKeywords(r)}function typeAndKeywords(r,n){if(r.opts.jtd)return schemaKeywords(r,[],!1,n);const _=(0,dataType_1$1.getSchemaTypes)(r.schema),x=(0,dataType_1$1.coerceAndCheckDataType)(r,_);schemaKeywords(r,_,!x,n)}function checkRefsAndKeywords(r){const{schema:n,errSchemaPath:_,opts:x,self:S}=r;n.$ref&&x.ignoreKeywordsWithRef&&(0,util_1$l.schemaHasRulesButRef)(n,S.RULES)&&S.logger.warn(`$ref: keywords ignored in schema at path "${_}"`)}function checkNoDefault(r){const{schema:n,opts:_}=r;n.default!==void 0&&_.useDefaults&&_.strictSchema&&(0,util_1$l.checkStrictMode)(r,"default is ignored in the schema root")}function updateContext(r){const n=r.schema[r.opts.schemaId];n&&(r.baseId=(0,resolve_1$2.resolveUrl)(r.opts.uriResolver,r.baseId,n))}function checkAsyncSchema(r){if(r.schema.$async&&!r.schemaEnv.$async)throw new Error("async schema in sync schema")}function commentKeyword({gen:r,schemaEnv:n,schema:_,errSchemaPath:x,opts:S}){const E=_.$comment;if(S.$comment===!0)r.code((0,codegen_1$n._)`${names_1$3.default.self}.logger.log(${E})`);else if(typeof S.$comment=="function"){const C=(0,codegen_1$n.str)`${x}/$comment`,T=r.scopeValue("root",{ref:n.root});r.code((0,codegen_1$n._)`${names_1$3.default.self}.opts.$comment(${E}, ${C}, ${T}.schema)`)}}function returnResults(r){const{gen:n,schemaEnv:_,validateName:x,ValidationError:S,opts:E}=r;_.$async?n.if((0,codegen_1$n._)`${names_1$3.default.errors} === 0`,()=>n.return(names_1$3.default.data),()=>n.throw((0,codegen_1$n._)`new ${S}(${names_1$3.default.vErrors})`)):(n.assign((0,codegen_1$n._)`${x}.errors`,names_1$3.default.vErrors),E.unevaluated&&assignEvaluated(r),n.return((0,codegen_1$n._)`${names_1$3.default.errors} === 0`))}function assignEvaluated({gen:r,evaluated:n,props:_,items:x}){_ instanceof codegen_1$n.Name&&r.assign((0,codegen_1$n._)`${n}.props`,_),x instanceof codegen_1$n.Name&&r.assign((0,codegen_1$n._)`${n}.items`,x)}function schemaKeywords(r,n,_,x){const{gen:S,schema:E,data:C,allErrors:T,opts:B,self:A}=r,{RULES:I}=A;if(E.$ref&&(B.ignoreKeywordsWithRef||!(0,util_1$l.schemaHasRulesButRef)(E,I))){S.block(()=>keywordCode(r,"$ref",I.all.$ref.definition));return}B.jtd||checkStrictTypes(r,n),S.block(()=>{for(const V of I.rules)N(V);N(I.post)});function N(V){(0,applicability_1.shouldUseGroup)(E,V)&&(V.type?(S.if((0,dataType_2.checkDataType)(V.type,C,B.strictNumbers)),iterateKeywords(r,V),n.length===1&&n[0]===V.type&&_&&(S.else(),(0,dataType_2.reportTypeError)(r)),S.endIf()):iterateKeywords(r,V),T||S.if((0,codegen_1$n._)`${names_1$3.default.errors} === ${x||0}`))}}function iterateKeywords(r,n){const{gen:_,schema:x,opts:{useDefaults:S}}=r;S&&(0,defaults_1.assignDefaults)(r,n.type),_.block(()=>{for(const E of n.rules)(0,applicability_1.shouldUseRule)(x,E)&&keywordCode(r,E.keyword,E.definition,n.type)})}function checkStrictTypes(r,n){r.schemaEnv.meta||!r.opts.strictTypes||(checkContextTypes(r,n),r.opts.allowUnionTypes||checkMultipleTypes(r,n),checkKeywordTypes(r,r.dataTypes))}function checkContextTypes(r,n){if(n.length){if(!r.dataTypes.length){r.dataTypes=n;return}n.forEach(_=>{includesType(r.dataTypes,_)||strictTypesError(r,`type "${_}" not allowed by context "${r.dataTypes.join(",")}"`)}),narrowSchemaTypes(r,n)}}function checkMultipleTypes(r,n){n.length>1&&!(n.length===2&&n.includes("null"))&&strictTypesError(r,"use allowUnionTypes to allow union type keyword")}function checkKeywordTypes(r,n){const _=r.self.RULES.all;for(const x in _){const S=_[x];if(typeof S=="object"&&(0,applicability_1.shouldUseRule)(r.schema,S)){const{type:E}=S.definition;E.length&&!E.some(C=>hasApplicableType(n,C))&&strictTypesError(r,`missing type "${E.join(",")}" for keyword "${x}"`)}}}function hasApplicableType(r,n){return r.includes(n)||n==="number"&&r.includes("integer")}function includesType(r,n){return r.includes(n)||n==="integer"&&r.includes("number")}function narrowSchemaTypes(r,n){const _=[];for(const x of r.dataTypes)includesType(n,x)?_.push(x):n.includes("integer")&&x==="number"&&_.push("integer");r.dataTypes=_}function strictTypesError(r,n){const _=r.schemaEnv.baseId+r.errSchemaPath;n+=` at "${_}" (strictTypes)`,(0,util_1$l.checkStrictMode)(r,n,r.opts.strictTypes)}class KeywordCxt{constructor(n,_,x){if((0,keyword_1.validateKeywordUsage)(n,_,x),this.gen=n.gen,this.allErrors=n.allErrors,this.keyword=x,this.data=n.data,this.schema=n.schema[x],this.$data=_.$data&&n.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,util_1$l.schemaRefOrVal)(n,this.schema,x,this.$data),this.schemaType=_.schemaType,this.parentSchema=n.schema,this.params={},this.it=n,this.def=_,this.$data)this.schemaCode=n.gen.const("vSchema",getData(this.$data,n));else if(this.schemaCode=this.schemaValue,!(0,keyword_1.validSchemaType)(this.schema,_.schemaType,_.allowUndefined))throw new Error(`${x} value must be ${JSON.stringify(_.schemaType)}`);("code"in _?_.trackErrors:_.errors!==!1)&&(this.errsCount=n.gen.const("_errs",names_1$3.default.errors))}result(n,_,x){this.failResult((0,codegen_1$n.not)(n),_,x)}failResult(n,_,x){this.gen.if(n),x?x():this.error(),_?(this.gen.else(),_(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(n,_){this.failResult((0,codegen_1$n.not)(n),void 0,_)}fail(n){if(n===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(n),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(n){if(!this.$data)return this.fail(n);const{schemaCode:_}=this;this.fail((0,codegen_1$n._)`${_} !== undefined && (${(0,codegen_1$n.or)(this.invalid$data(),n)})`)}error(n,_,x){if(_){this.setParams(_),this._error(n,x),this.setParams({});return}this._error(n,x)}_error(n,_){(n?errors_1.reportExtraError:errors_1.reportError)(this,this.def.error,_)}$dataError(){(0,errors_1.reportError)(this,this.def.$dataError||errors_1.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,errors_1.resetErrorsCount)(this.gen,this.errsCount)}ok(n){this.allErrors||this.gen.if(n)}setParams(n,_){_?Object.assign(this.params,n):this.params=n}block$data(n,_,x=codegen_1$n.nil){this.gen.block(()=>{this.check$data(n,x),_()})}check$data(n=codegen_1$n.nil,_=codegen_1$n.nil){if(!this.$data)return;const{gen:x,schemaCode:S,schemaType:E,def:C}=this;x.if((0,codegen_1$n.or)((0,codegen_1$n._)`${S} === undefined`,_)),n!==codegen_1$n.nil&&x.assign(n,!0),(E.length||C.validateSchema)&&(x.elseIf(this.invalid$data()),this.$dataError(),n!==codegen_1$n.nil&&x.assign(n,!1)),x.else()}invalid$data(){const{gen:n,schemaCode:_,schemaType:x,def:S,it:E}=this;return(0,codegen_1$n.or)(C(),T());function C(){if(x.length){if(!(_ instanceof codegen_1$n.Name))throw new Error("ajv implementation error");const B=Array.isArray(x)?x:[x];return(0,codegen_1$n._)`${(0,dataType_2.checkDataTypes)(B,_,E.opts.strictNumbers,dataType_2.DataType.Wrong)}`}return codegen_1$n.nil}function T(){if(S.validateSchema){const B=n.scopeValue("validate$data",{ref:S.validateSchema});return(0,codegen_1$n._)`!${B}(${_})`}return codegen_1$n.nil}}subschema(n,_){const x=(0,subschema_1.getSubschema)(this.it,n);(0,subschema_1.extendSubschemaData)(x,this.it,n),(0,subschema_1.extendSubschemaMode)(x,n);const S={...this.it,...x,items:void 0,props:void 0};return subschemaCode(S,_),S}mergeEvaluated(n,_){const{it:x,gen:S}=this;x.opts.unevaluated&&(x.props!==!0&&n.props!==void 0&&(x.props=util_1$l.mergeEvaluated.props(S,n.props,x.props,_)),x.items!==!0&&n.items!==void 0&&(x.items=util_1$l.mergeEvaluated.items(S,n.items,x.items,_)))}mergeValidEvaluated(n,_){const{it:x,gen:S}=this;if(x.opts.unevaluated&&(x.props!==!0||x.items!==!0))return S.if(_,()=>this.mergeEvaluated(n,codegen_1$n.Name)),!0}}validate.KeywordCxt=KeywordCxt;function keywordCode(r,n,_,x){const S=new KeywordCxt(r,_,n);"code"in _?_.code(S,x):S.$data&&_.validate?(0,keyword_1.funcKeywordCode)(S,_):"macro"in _?(0,keyword_1.macroKeywordCode)(S,_):(_.compile||_.validate)&&(0,keyword_1.funcKeywordCode)(S,_)}const JSON_POINTER=/^\/(?:[^~]|~0|~1)*$/,RELATIVE_JSON_POINTER=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData(r,{dataLevel:n,dataNames:_,dataPathArr:x}){let S,E;if(r==="")return names_1$3.default.rootData;if(r[0]==="/"){if(!JSON_POINTER.test(r))throw new Error(`Invalid JSON-pointer: ${r}`);S=r,E=names_1$3.default.rootData}else{const A=RELATIVE_JSON_POINTER.exec(r);if(!A)throw new Error(`Invalid JSON-pointer: ${r}`);const I=+A[1];if(S=A[2],S==="#"){if(I>=n)throw new Error(B("property/index",I));return x[n-I]}if(I>n)throw new Error(B("data",I));if(E=_[n-I],!S)return E}let C=E;const T=S.split("/");for(const A of T)A&&(E=(0,codegen_1$n._)`${E}${(0,codegen_1$n.getProperty)((0,util_1$l.unescapeJsonPointer)(A))}`,C=(0,codegen_1$n._)`${C} && ${E}`);return C;function B(A,I){return`Cannot access ${A} ${I} levels up, current level is ${n}`}}validate.getData=getData;var validation_error={};Object.defineProperty(validation_error,"__esModule",{value:!0});class ValidationError extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}validation_error.default=ValidationError;var ref_error={};Object.defineProperty(ref_error,"__esModule",{value:!0});const resolve_1$1=resolve$1;class MissingRefError extends Error{constructor(n,_,x,S){super(S||`can't resolve reference ${x} from id ${_}`),this.missingRef=(0,resolve_1$1.resolveUrl)(n,_,x),this.missingSchema=(0,resolve_1$1.normalizeId)((0,resolve_1$1.getFullPath)(n,this.missingRef))}}ref_error.default=MissingRefError;var compile={};Object.defineProperty(compile,"__esModule",{value:!0});compile.resolveSchema=compile.getCompilingSchema=compile.resolveRef=compile.compileSchema=compile.SchemaEnv=void 0;const codegen_1$m=codegen,validation_error_1=validation_error,names_1$2=names$1,resolve_1=resolve$1,util_1$k=util,validate_1$1=validate;class SchemaEnv{constructor(n){var _;this.refs={},this.dynamicAnchors={};let x;typeof n.schema=="object"&&(x=n.schema),this.schema=n.schema,this.schemaId=n.schemaId,this.root=n.root||this,this.baseId=(_=n.baseId)!==null&&_!==void 0?_:(0,resolve_1.normalizeId)(x?.[n.schemaId||"$id"]),this.schemaPath=n.schemaPath,this.localRefs=n.localRefs,this.meta=n.meta,this.$async=x?.$async,this.refs={}}}compile.SchemaEnv=SchemaEnv;function compileSchema(r){const n=getCompilingSchema.call(this,r);if(n)return n;const _=(0,resolve_1.getFullPath)(this.opts.uriResolver,r.root.baseId),{es5:x,lines:S}=this.opts.code,{ownProperties:E}=this.opts,C=new codegen_1$m.CodeGen(this.scope,{es5:x,lines:S,ownProperties:E});let T;r.$async&&(T=C.scopeValue("Error",{ref:validation_error_1.default,code:(0,codegen_1$m._)`require("ajv/dist/runtime/validation_error").default`}));const B=C.scopeName("validate");r.validateName=B;const A={gen:C,allErrors:this.opts.allErrors,data:names_1$2.default.data,parentData:names_1$2.default.parentData,parentDataProperty:names_1$2.default.parentDataProperty,dataNames:[names_1$2.default.data],dataPathArr:[codegen_1$m.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:C.scopeValue("schema",this.opts.code.source===!0?{ref:r.schema,code:(0,codegen_1$m.stringify)(r.schema)}:{ref:r.schema}),validateName:B,ValidationError:T,schema:r.schema,schemaEnv:r,rootId:_,baseId:r.baseId||_,schemaPath:codegen_1$m.nil,errSchemaPath:r.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,codegen_1$m._)`""`,opts:this.opts,self:this};let I;try{this._compilations.add(r),(0,validate_1$1.validateFunctionCode)(A),C.optimize(this.opts.code.optimize);const N=C.toString();I=`${C.scopeRefs(names_1$2.default.scope)}return ${N}`,this.opts.code.process&&(I=this.opts.code.process(I,r));const D=new Function(`${names_1$2.default.self}`,`${names_1$2.default.scope}`,I)(this,this.scope.get());if(this.scope.value(B,{ref:D}),D.errors=null,D.schema=r.schema,D.schemaEnv=r,r.$async&&(D.$async=!0),this.opts.code.source===!0&&(D.source={validateName:B,validateCode:N,scopeValues:C._values}),this.opts.unevaluated){const{props:O,items:F}=A;D.evaluated={props:O instanceof codegen_1$m.Name?void 0:O,items:F instanceof codegen_1$m.Name?void 0:F,dynamicProps:O instanceof codegen_1$m.Name,dynamicItems:F instanceof codegen_1$m.Name},D.source&&(D.source.evaluated=(0,codegen_1$m.stringify)(D.evaluated))}return r.validate=D,r}catch(N){throw delete r.validate,delete r.validateName,I&&this.logger.error("Error compiling schema, function code:",I),N}finally{this._compilations.delete(r)}}compile.compileSchema=compileSchema;function resolveRef(r,n,_){var x;_=(0,resolve_1.resolveUrl)(this.opts.uriResolver,n,_);const S=r.refs[_];if(S)return S;let E=resolve.call(this,r,_);if(E===void 0){const C=(x=r.localRefs)===null||x===void 0?void 0:x[_],{schemaId:T}=this.opts;C&&(E=new SchemaEnv({schema:C,schemaId:T,root:r,baseId:n}))}if(E!==void 0)return r.refs[_]=inlineOrCompile.call(this,E)}compile.resolveRef=resolveRef;function inlineOrCompile(r){return(0,resolve_1.inlineRef)(r.schema,this.opts.inlineRefs)?r.schema:r.validate?r:compileSchema.call(this,r)}function getCompilingSchema(r){for(const n of this._compilations)if(sameSchemaEnv(n,r))return n}compile.getCompilingSchema=getCompilingSchema;function sameSchemaEnv(r,n){return r.schema===n.schema&&r.root===n.root&&r.baseId===n.baseId}function resolve(r,n){let _;for(;typeof(_=this.refs[n])=="string";)n=_;return _||this.schemas[n]||resolveSchema.call(this,r,n)}function resolveSchema(r,n){const _=this.opts.uriResolver.parse(n),x=(0,resolve_1._getFullPath)(this.opts.uriResolver,_);let S=(0,resolve_1.getFullPath)(this.opts.uriResolver,r.baseId,void 0);if(Object.keys(r.schema).length>0&&x===S)return getJsonPointer.call(this,_,r);const E=(0,resolve_1.normalizeId)(x),C=this.refs[E]||this.schemas[E];if(typeof C=="string"){const T=resolveSchema.call(this,r,C);return typeof T?.schema!="object"?void 0:getJsonPointer.call(this,_,T)}if(typeof C?.schema=="object"){if(C.validate||compileSchema.call(this,C),E===(0,resolve_1.normalizeId)(n)){const{schema:T}=C,{schemaId:B}=this.opts,A=T[B];return A&&(S=(0,resolve_1.resolveUrl)(this.opts.uriResolver,S,A)),new SchemaEnv({schema:T,schemaId:B,root:r,baseId:S})}return getJsonPointer.call(this,_,C)}}compile.resolveSchema=resolveSchema;const PREVENT_SCOPE_CHANGE=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(r,{baseId:n,schema:_,root:x}){var S;if(((S=r.fragment)===null||S===void 0?void 0:S[0])!=="/")return;for(const T of r.fragment.slice(1).split("/")){if(typeof _=="boolean")return;const B=_[(0,util_1$k.unescapeFragment)(T)];if(B===void 0)return;_=B;const A=typeof _=="object"&&_[this.opts.schemaId];!PREVENT_SCOPE_CHANGE.has(T)&&A&&(n=(0,resolve_1.resolveUrl)(this.opts.uriResolver,n,A))}let E;if(typeof _!="boolean"&&_.$ref&&!(0,util_1$k.schemaHasRulesButRef)(_,this.RULES)){const T=(0,resolve_1.resolveUrl)(this.opts.uriResolver,n,_.$ref);E=resolveSchema.call(this,x,T)}const{schemaId:C}=this.opts;if(E=E||new SchemaEnv({schema:_,schemaId:C,root:x,baseId:n}),E.schema!==E.root.schema)return E}const $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$2="object",required$1=["$data"],properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$9={$id:$id$1,description,type:type$2,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1};var uri$1={},uri_all={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(r,n){(function(_,x){x(n)})(commonjsGlobal,function(_){function x(){for(var ke=arguments.length,Se=Array(ke),se=0;se<ke;se++)Se[se]=arguments[se];if(Se.length>1){Se[0]=Se[0].slice(0,-1);for(var _e=Se.length-1,$e=1;$e<_e;++$e)Se[$e]=Se[$e].slice(1,-1);return Se[_e]=Se[_e].slice(1),Se.join("")}else return Se[0]}function S(ke){return"(?:"+ke+")"}function E(ke){return ke===void 0?"undefined":ke===null?"null":Object.prototype.toString.call(ke).split(" ").pop().split("]").shift().toLowerCase()}function C(ke){return ke.toUpperCase()}function T(ke){return ke!=null?ke instanceof Array?ke:typeof ke.length!="number"||ke.split||ke.setInterval||ke.call?[ke]:Array.prototype.slice.call(ke):[]}function B(ke,Se){var se=ke;if(Se)for(var _e in Se)se[_e]=Se[_e];return se}function A(ke){var Se="[A-Za-z]",se="[0-9]",_e=x(se,"[A-Fa-f]"),$e=S(S("%[EFef]"+_e+"%"+_e+_e+"%"+_e+_e)+"|"+S("%[89A-Fa-f]"+_e+"%"+_e+_e)+"|"+S("%"+_e+_e)),Pe="[\\:\\/\\?\\#\\[\\]\\@]",Fe="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",qe=x(Pe,Fe),Ye=ke?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Je=ke?"[\\uE000-\\uF8FF]":"[]",tt=x(Se,se,"[\\-\\.\\_\\~]",Ye);S(Se+x(Se,se,"[\\+\\-\\.]")+"*"),S(S($e+"|"+x(tt,Fe,"[\\:]"))+"*");var Qe=S(S("25[0-5]")+"|"+S("2[0-4]"+se)+"|"+S("1"+se+se)+"|"+S("0?[1-9]"+se)+"|0?0?"+se),it=S(Qe+"\\."+Qe+"\\."+Qe+"\\."+Qe),lt=S(_e+"{1,4}"),vt=S(S(lt+"\\:"+lt)+"|"+it),bt=S(S(lt+"\\:")+"{6}"+vt),dt=S("\\:\\:"+S(lt+"\\:")+"{5}"+vt),yt=S(S(lt)+"?\\:\\:"+S(lt+"\\:")+"{4}"+vt),Tt=S(S(S(lt+"\\:")+"{0,1}"+lt)+"?\\:\\:"+S(lt+"\\:")+"{3}"+vt),kt=S(S(S(lt+"\\:")+"{0,2}"+lt)+"?\\:\\:"+S(lt+"\\:")+"{2}"+vt),Pt=S(S(S(lt+"\\:")+"{0,3}"+lt)+"?\\:\\:"+lt+"\\:"+vt),It=S(S(S(lt+"\\:")+"{0,4}"+lt)+"?\\:\\:"+vt),Ot=S(S(S(lt+"\\:")+"{0,5}"+lt)+"?\\:\\:"+lt),Mt=S(S(S(lt+"\\:")+"{0,6}"+lt)+"?\\:\\:"),Dt=S([bt,dt,yt,Tt,kt,Pt,It,Ot,Mt].join("|")),mt=S(S(tt+"|"+$e)+"+");S("[vV]"+_e+"+\\."+x(tt,Fe,"[\\:]")+"+"),S(S($e+"|"+x(tt,Fe))+"*");var gt=S($e+"|"+x(tt,Fe,"[\\:\\@]"));return S(S($e+"|"+x(tt,Fe,"[\\@]"))+"+"),S(S(gt+"|"+x("[\\/\\?]",Je))+"*"),{NOT_SCHEME:new RegExp(x("[^]",Se,se,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(x("[^\\%\\:]",tt,Fe),"g"),NOT_HOST:new RegExp(x("[^\\%\\[\\]\\:]",tt,Fe),"g"),NOT_PATH:new RegExp(x("[^\\%\\/\\:\\@]",tt,Fe),"g"),NOT_PATH_NOSCHEME:new RegExp(x("[^\\%\\/\\@]",tt,Fe),"g"),NOT_QUERY:new RegExp(x("[^\\%]",tt,Fe,"[\\:\\@\\/\\?]",Je),"g"),NOT_FRAGMENT:new RegExp(x("[^\\%]",tt,Fe,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(x("[^]",tt,Fe),"g"),UNRESERVED:new RegExp(tt,"g"),OTHER_CHARS:new RegExp(x("[^\\%]",tt,qe),"g"),PCT_ENCODED:new RegExp($e,"g"),IPV4ADDRESS:new RegExp("^("+it+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Dt+")"+S(S("\\%25|\\%(?!"+_e+"{2})")+"("+mt+")")+"?\\]?$")}}var I=A(!1),N=A(!0),V=function(){function ke(Se,se){var _e=[],$e=!0,Pe=!1,Fe=void 0;try{for(var qe=Se[Symbol.iterator](),Ye;!($e=(Ye=qe.next()).done)&&(_e.push(Ye.value),!(se&&_e.length===se));$e=!0);}catch(Je){Pe=!0,Fe=Je}finally{try{!$e&&qe.return&&qe.return()}finally{if(Pe)throw Fe}}return _e}return function(Se,se){if(Array.isArray(Se))return Se;if(Symbol.iterator in Object(Se))return ke(Se,se);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),D=function(ke){if(Array.isArray(ke)){for(var Se=0,se=Array(ke.length);Se<ke.length;Se++)se[Se]=ke[Se];return se}else return Array.from(ke)},O=2147483647,F=36,M=1,L=26,j=38,q=700,H=72,X=128,J="-",Z=/^xn--/,ae=/[^\0-\x7E]/,ce=/[\x2E\u3002\uFF0E\uFF61]/g,ve={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},pe=F-M,G=Math.floor,Y=String.fromCharCode;function U(ke){throw new RangeError(ve[ke])}function W(ke,Se){for(var se=[],_e=ke.length;_e--;)se[_e]=Se(ke[_e]);return se}function ee(ke,Se){var se=ke.split("@"),_e="";se.length>1&&(_e=se[0]+"@",ke=se[1]),ke=ke.replace(ce,".");var $e=ke.split("."),Pe=W($e,Se).join(".");return _e+Pe}function re(ke){for(var Se=[],se=0,_e=ke.length;se<_e;){var $e=ke.charCodeAt(se++);if($e>=55296&&$e<=56319&&se<_e){var Pe=ke.charCodeAt(se++);(Pe&64512)==56320?Se.push((($e&1023)<<10)+(Pe&1023)+65536):(Se.push($e),se--)}else Se.push($e)}return Se}var oe=function(Se){return String.fromCodePoint.apply(String,D(Se))},ie=function(Se){return Se-48<10?Se-22:Se-65<26?Se-65:Se-97<26?Se-97:F},ne=function(Se,se){return Se+22+75*(Se<26)-((se!=0)<<5)},te=function(Se,se,_e){var $e=0;for(Se=_e?G(Se/q):Se>>1,Se+=G(Se/se);Se>pe*L>>1;$e+=F)Se=G(Se/pe);return G($e+(pe+1)*Se/(Se+j))},K=function(Se){var se=[],_e=Se.length,$e=0,Pe=X,Fe=H,qe=Se.lastIndexOf(J);qe<0&&(qe=0);for(var Ye=0;Ye<qe;++Ye)Se.charCodeAt(Ye)>=128&&U("not-basic"),se.push(Se.charCodeAt(Ye));for(var Je=qe>0?qe+1:0;Je<_e;){for(var tt=$e,Qe=1,it=F;;it+=F){Je>=_e&&U("invalid-input");var lt=ie(Se.charCodeAt(Je++));(lt>=F||lt>G((O-$e)/Qe))&&U("overflow"),$e+=lt*Qe;var vt=it<=Fe?M:it>=Fe+L?L:it-Fe;if(lt<vt)break;var bt=F-vt;Qe>G(O/bt)&&U("overflow"),Qe*=bt}var dt=se.length+1;Fe=te($e-tt,dt,tt==0),G($e/dt)>O-Pe&&U("overflow"),Pe+=G($e/dt),$e%=dt,se.splice($e++,0,Pe)}return String.fromCodePoint.apply(String,se)},le=function(Se){var se=[];Se=re(Se);var _e=Se.length,$e=X,Pe=0,Fe=H,qe=!0,Ye=!1,Je=void 0;try{for(var tt=Se[Symbol.iterator](),Qe;!(qe=(Qe=tt.next()).done);qe=!0){var it=Qe.value;it<128&&se.push(Y(it))}}catch(er){Ye=!0,Je=er}finally{try{!qe&&tt.return&&tt.return()}finally{if(Ye)throw Je}}var lt=se.length,vt=lt;for(lt&&se.push(J);vt<_e;){var bt=O,dt=!0,yt=!1,Tt=void 0;try{for(var kt=Se[Symbol.iterator](),Pt;!(dt=(Pt=kt.next()).done);dt=!0){var It=Pt.value;It>=$e&&It<bt&&(bt=It)}}catch(er){yt=!0,Tt=er}finally{try{!dt&&kt.return&&kt.return()}finally{if(yt)throw Tt}}var Ot=vt+1;bt-$e>G((O-Pe)/Ot)&&U("overflow"),Pe+=(bt-$e)*Ot,$e=bt;var Mt=!0,Dt=!1,mt=void 0;try{for(var gt=Se[Symbol.iterator](),St;!(Mt=(St=gt.next()).done);Mt=!0){var xt=St.value;if(xt<$e&&++Pe>O&&U("overflow"),xt==$e){for(var Ct=Pe,Nt=F;;Nt+=F){var Yt=Nt<=Fe?M:Nt>=Fe+L?L:Nt-Fe;if(Ct<Yt)break;var sr=Ct-Yt,cr=F-Yt;se.push(Y(ne(Yt+sr%cr,0))),Ct=G(sr/cr)}se.push(Y(ne(Ct,0))),Fe=te(Pe,Ot,vt==lt),Pe=0,++vt}}}catch(er){Dt=!0,mt=er}finally{try{!Mt&&gt.return&&gt.return()}finally{if(Dt)throw mt}}++Pe,++$e}return se.join("")},ue=function(Se){return ee(Se,function(se){return Z.test(se)?K(se.slice(4).toLowerCase()):se})},be=function(Se){return ee(Se,function(se){return ae.test(se)?"xn--"+le(se):se})},ge={version:"2.1.0",ucs2:{decode:re,encode:oe},decode:K,encode:le,toASCII:be,toUnicode:ue},ye={};function Ee(ke){var Se=ke.charCodeAt(0),se=void 0;return Se<16?se="%0"+Se.toString(16).toUpperCase():Se<128?se="%"+Se.toString(16).toUpperCase():Se<2048?se="%"+(Se>>6|192).toString(16).toUpperCase()+"%"+(Se&63|128).toString(16).toUpperCase():se="%"+(Se>>12|224).toString(16).toUpperCase()+"%"+(Se>>6&63|128).toString(16).toUpperCase()+"%"+(Se&63|128).toString(16).toUpperCase(),se}function Re(ke){for(var Se="",se=0,_e=ke.length;se<_e;){var $e=parseInt(ke.substr(se+1,2),16);if($e<128)Se+=String.fromCharCode($e),se+=3;else if($e>=194&&$e<224){if(_e-se>=6){var Pe=parseInt(ke.substr(se+4,2),16);Se+=String.fromCharCode(($e&31)<<6|Pe&63)}else Se+=ke.substr(se,6);se+=6}else if($e>=224){if(_e-se>=9){var Fe=parseInt(ke.substr(se+4,2),16),qe=parseInt(ke.substr(se+7,2),16);Se+=String.fromCharCode(($e&15)<<12|(Fe&63)<<6|qe&63)}else Se+=ke.substr(se,9);se+=9}else Se+=ke.substr(se,3),se+=3}return Se}function Ne(ke,Se){function se(_e){var $e=Re(_e);return $e.match(Se.UNRESERVED)?$e:_e}return ke.scheme&&(ke.scheme=String(ke.scheme).replace(Se.PCT_ENCODED,se).toLowerCase().replace(Se.NOT_SCHEME,"")),ke.userinfo!==void 0&&(ke.userinfo=String(ke.userinfo).replace(Se.PCT_ENCODED,se).replace(Se.NOT_USERINFO,Ee).replace(Se.PCT_ENCODED,C)),ke.host!==void 0&&(ke.host=String(ke.host).replace(Se.PCT_ENCODED,se).toLowerCase().replace(Se.NOT_HOST,Ee).replace(Se.PCT_ENCODED,C)),ke.path!==void 0&&(ke.path=String(ke.path).replace(Se.PCT_ENCODED,se).replace(ke.scheme?Se.NOT_PATH:Se.NOT_PATH_NOSCHEME,Ee).replace(Se.PCT_ENCODED,C)),ke.query!==void 0&&(ke.query=String(ke.query).replace(Se.PCT_ENCODED,se).replace(Se.NOT_QUERY,Ee).replace(Se.PCT_ENCODED,C)),ke.fragment!==void 0&&(ke.fragment=String(ke.fragment).replace(Se.PCT_ENCODED,se).replace(Se.NOT_FRAGMENT,Ee).replace(Se.PCT_ENCODED,C)),ke}function Te(ke){return ke.replace(/^0*(.*)/,"$1")||"0"}function he(ke,Se){var se=ke.match(Se.IPV4ADDRESS)||[],_e=V(se,2),$e=_e[1];return $e?$e.split(".").map(Te).join("."):ke}function xe(ke,Se){var se=ke.match(Se.IPV6ADDRESS)||[],_e=V(se,3),$e=_e[1],Pe=_e[2];if($e){for(var Fe=$e.toLowerCase().split("::").reverse(),qe=V(Fe,2),Ye=qe[0],Je=qe[1],tt=Je?Je.split(":").map(Te):[],Qe=Ye.split(":").map(Te),it=Se.IPV4ADDRESS.test(Qe[Qe.length-1]),lt=it?7:8,vt=Qe.length-lt,bt=Array(lt),dt=0;dt<lt;++dt)bt[dt]=tt[dt]||Qe[vt+dt]||"";it&&(bt[lt-1]=he(bt[lt-1],Se));var yt=bt.reduce(function(Ot,Mt,Dt){if(!Mt||Mt==="0"){var mt=Ot[Ot.length-1];mt&&mt.index+mt.length===Dt?mt.length++:Ot.push({index:Dt,length:1})}return Ot},[]),Tt=yt.sort(function(Ot,Mt){return Mt.length-Ot.length})[0],kt=void 0;if(Tt&&Tt.length>1){var Pt=bt.slice(0,Tt.index),It=bt.slice(Tt.index+Tt.length);kt=Pt.join(":")+"::"+It.join(":")}else kt=bt.join(":");return Pe&&(kt+="%"+Pe),kt}else return ke}var fe=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Be="".match(/(){0}/)[1]===void 0;function Le(ke){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se={},_e=Se.iri!==!1?N:I;Se.reference==="suffix"&&(ke=(Se.scheme?Se.scheme+":":"")+"//"+ke);var $e=ke.match(fe);if($e){Be?(se.scheme=$e[1],se.userinfo=$e[3],se.host=$e[4],se.port=parseInt($e[5],10),se.path=$e[6]||"",se.query=$e[7],se.fragment=$e[8],isNaN(se.port)&&(se.port=$e[5])):(se.scheme=$e[1]||void 0,se.userinfo=ke.indexOf("@")!==-1?$e[3]:void 0,se.host=ke.indexOf("//")!==-1?$e[4]:void 0,se.port=parseInt($e[5],10),se.path=$e[6]||"",se.query=ke.indexOf("?")!==-1?$e[7]:void 0,se.fragment=ke.indexOf("#")!==-1?$e[8]:void 0,isNaN(se.port)&&(se.port=ke.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?$e[4]:void 0)),se.host&&(se.host=xe(he(se.host,_e),_e)),se.scheme===void 0&&se.userinfo===void 0&&se.host===void 0&&se.port===void 0&&!se.path&&se.query===void 0?se.reference="same-document":se.scheme===void 0?se.reference="relative":se.fragment===void 0?se.reference="absolute":se.reference="uri",Se.reference&&Se.reference!=="suffix"&&Se.reference!==se.reference&&(se.error=se.error||"URI is not a "+Se.reference+" reference.");var Pe=ye[(Se.scheme||se.scheme||"").toLowerCase()];if(!Se.unicodeSupport&&(!Pe||!Pe.unicodeSupport)){if(se.host&&(Se.domainHost||Pe&&Pe.domainHost))try{se.host=ge.toASCII(se.host.replace(_e.PCT_ENCODED,Re).toLowerCase())}catch(Fe){se.error=se.error||"Host's domain name can not be converted to ASCII via punycode: "+Fe}Ne(se,I)}else Ne(se,_e);Pe&&Pe.parse&&Pe.parse(se,Se)}else se.error=se.error||"URI can not be parsed.";return se}function Ve(ke,Se){var se=Se.iri!==!1?N:I,_e=[];return ke.userinfo!==void 0&&(_e.push(ke.userinfo),_e.push("@")),ke.host!==void 0&&_e.push(xe(he(String(ke.host),se),se).replace(se.IPV6ADDRESS,function($e,Pe,Fe){return"["+Pe+(Fe?"%25"+Fe:"")+"]"})),(typeof ke.port=="number"||typeof ke.port=="string")&&(_e.push(":"),_e.push(String(ke.port))),_e.length?_e.join(""):void 0}var Ie=/^\.\.?\//,Me=/^\/\.(\/|$)/,He=/^\/\.\.(\/|$)/,We=/^\/?(?:.|\n)*?(?=\/|$)/;function Ue(ke){for(var Se=[];ke.length;)if(ke.match(Ie))ke=ke.replace(Ie,"");else if(ke.match(Me))ke=ke.replace(Me,"/");else if(ke.match(He))ke=ke.replace(He,"/"),Se.pop();else if(ke==="."||ke==="..")ke="";else{var se=ke.match(We);if(se){var _e=se[0];ke=ke.slice(_e.length),Se.push(_e)}else throw new Error("Unexpected dot segment condition")}return Se.join("")}function Ge(ke){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=Se.iri?N:I,_e=[],$e=ye[(Se.scheme||ke.scheme||"").toLowerCase()];if($e&&$e.serialize&&$e.serialize(ke,Se),ke.host&&!se.IPV6ADDRESS.test(ke.host)){if(Se.domainHost||$e&&$e.domainHost)try{ke.host=Se.iri?ge.toUnicode(ke.host):ge.toASCII(ke.host.replace(se.PCT_ENCODED,Re).toLowerCase())}catch(qe){ke.error=ke.error||"Host's domain name can not be converted to "+(Se.iri?"Unicode":"ASCII")+" via punycode: "+qe}}Ne(ke,se),Se.reference!=="suffix"&&ke.scheme&&(_e.push(ke.scheme),_e.push(":"));var Pe=Ve(ke,Se);if(Pe!==void 0&&(Se.reference!=="suffix"&&_e.push("//"),_e.push(Pe),ke.path&&ke.path.charAt(0)!=="/"&&_e.push("/")),ke.path!==void 0){var Fe=ke.path;!Se.absolutePath&&(!$e||!$e.absolutePath)&&(Fe=Ue(Fe)),Pe===void 0&&(Fe=Fe.replace(/^\/\//,"/%2F")),_e.push(Fe)}return ke.query!==void 0&&(_e.push("?"),_e.push(ke.query)),ke.fragment!==void 0&&(_e.push("#"),_e.push(ke.fragment)),_e.join("")}function et(ke,Se){var se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_e=arguments[3],$e={};return _e||(ke=Le(Ge(ke,se),se),Se=Le(Ge(Se,se),se)),se=se||{},!se.tolerant&&Se.scheme?($e.scheme=Se.scheme,$e.userinfo=Se.userinfo,$e.host=Se.host,$e.port=Se.port,$e.path=Ue(Se.path||""),$e.query=Se.query):(Se.userinfo!==void 0||Se.host!==void 0||Se.port!==void 0?($e.userinfo=Se.userinfo,$e.host=Se.host,$e.port=Se.port,$e.path=Ue(Se.path||""),$e.query=Se.query):(Se.path?(Se.path.charAt(0)==="/"?$e.path=Ue(Se.path):((ke.userinfo!==void 0||ke.host!==void 0||ke.port!==void 0)&&!ke.path?$e.path="/"+Se.path:ke.path?$e.path=ke.path.slice(0,ke.path.lastIndexOf("/")+1)+Se.path:$e.path=Se.path,$e.path=Ue($e.path)),$e.query=Se.query):($e.path=ke.path,Se.query!==void 0?$e.query=Se.query:$e.query=ke.query),$e.userinfo=ke.userinfo,$e.host=ke.host,$e.port=ke.port),$e.scheme=ke.scheme),$e.fragment=Se.fragment,$e}function ot(ke,Se,se){var _e=B({scheme:"null"},se);return Ge(et(Le(ke,_e),Le(Se,_e),_e,!0),_e)}function ht(ke,Se){return typeof ke=="string"?ke=Ge(Le(ke,Se),Se):E(ke)==="object"&&(ke=Le(Ge(ke,Se),Se)),ke}function Oe(ke,Se,se){return typeof ke=="string"?ke=Ge(Le(ke,se),se):E(ke)==="object"&&(ke=Ge(ke,se)),typeof Se=="string"?Se=Ge(Le(Se,se),se):E(Se)==="object"&&(Se=Ge(Se,se)),ke===Se}function we(ke,Se){return ke&&ke.toString().replace(!Se||!Se.iri?I.ESCAPE:N.ESCAPE,Ee)}function Ce(ke,Se){return ke&&ke.toString().replace(!Se||!Se.iri?I.PCT_ENCODED:N.PCT_ENCODED,Re)}var ze={scheme:"http",domainHost:!0,parse:function(Se,se){return Se.host||(Se.error=Se.error||"HTTP URIs must have a host."),Se},serialize:function(Se,se){var _e=String(Se.scheme).toLowerCase()==="https";return(Se.port===(_e?443:80)||Se.port==="")&&(Se.port=void 0),Se.path||(Se.path="/"),Se}},Ze={scheme:"https",domainHost:ze.domainHost,parse:ze.parse,serialize:ze.serialize};function st(ke){return typeof ke.secure=="boolean"?ke.secure:String(ke.scheme).toLowerCase()==="wss"}var rt={scheme:"ws",domainHost:!0,parse:function(Se,se){var _e=Se;return _e.secure=st(_e),_e.resourceName=(_e.path||"/")+(_e.query?"?"+_e.query:""),_e.path=void 0,_e.query=void 0,_e},serialize:function(Se,se){if((Se.port===(st(Se)?443:80)||Se.port==="")&&(Se.port=void 0),typeof Se.secure=="boolean"&&(Se.scheme=Se.secure?"wss":"ws",Se.secure=void 0),Se.resourceName){var _e=Se.resourceName.split("?"),$e=V(_e,2),Pe=$e[0],Fe=$e[1];Se.path=Pe&&Pe!=="/"?Pe:void 0,Se.query=Fe,Se.resourceName=void 0}return Se.fragment=void 0,Se}},Ft={scheme:"wss",domainHost:rt.domainHost,parse:rt.parse,serialize:rt.serialize},Vt={},Et="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",jt="[0-9A-Fa-f]",Lt=S(S("%[EFef]"+jt+"%"+jt+jt+"%"+jt+jt)+"|"+S("%[89A-Fa-f]"+jt+"%"+jt+jt)+"|"+S("%"+jt+jt)),qt="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",_r="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Zt=x(_r,'[\\"\\\\]'),zt="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",hr=new RegExp(Et,"g"),Xt=new RegExp(Lt,"g"),Ht=new RegExp(x("[^]",qt,"[\\.]",'[\\"]',Zt),"g"),gr=new RegExp(x("[^]",Et,zt),"g"),Qt=gr;function Kt(ke){var Se=Re(ke);return Se.match(hr)?Se:ke}var $r={scheme:"mailto",parse:function(Se,se){var _e=Se,$e=_e.to=_e.path?_e.path.split(","):[];if(_e.path=void 0,_e.query){for(var Pe=!1,Fe={},qe=_e.query.split("&"),Ye=0,Je=qe.length;Ye<Je;++Ye){var tt=qe[Ye].split("=");switch(tt[0]){case"to":for(var Qe=tt[1].split(","),it=0,lt=Qe.length;it<lt;++it)$e.push(Qe[it]);break;case"subject":_e.subject=Ce(tt[1],se);break;case"body":_e.body=Ce(tt[1],se);break;default:Pe=!0,Fe[Ce(tt[0],se)]=Ce(tt[1],se);break}}Pe&&(_e.headers=Fe)}_e.query=void 0;for(var vt=0,bt=$e.length;vt<bt;++vt){var dt=$e[vt].split("@");if(dt[0]=Ce(dt[0]),se.unicodeSupport)dt[1]=Ce(dt[1],se).toLowerCase();else try{dt[1]=ge.toASCII(Ce(dt[1],se).toLowerCase())}catch(yt){_e.error=_e.error||"Email address's domain name can not be converted to ASCII via punycode: "+yt}$e[vt]=dt.join("@")}return _e},serialize:function(Se,se){var _e=Se,$e=T(Se.to);if($e){for(var Pe=0,Fe=$e.length;Pe<Fe;++Pe){var qe=String($e[Pe]),Ye=qe.lastIndexOf("@"),Je=qe.slice(0,Ye).replace(Xt,Kt).replace(Xt,C).replace(Ht,Ee),tt=qe.slice(Ye+1);try{tt=se.iri?ge.toUnicode(tt):ge.toASCII(Ce(tt,se).toLowerCase())}catch(vt){_e.error=_e.error||"Email address's domain name can not be converted to "+(se.iri?"Unicode":"ASCII")+" via punycode: "+vt}$e[Pe]=Je+"@"+tt}_e.path=$e.join(",")}var Qe=Se.headers=Se.headers||{};Se.subject&&(Qe.subject=Se.subject),Se.body&&(Qe.body=Se.body);var it=[];for(var lt in Qe)Qe[lt]!==Vt[lt]&&it.push(lt.replace(Xt,Kt).replace(Xt,C).replace(gr,Ee)+"="+Qe[lt].replace(Xt,Kt).replace(Xt,C).replace(Qt,Ee));return it.length&&(_e.query=it.join("&")),_e}},tr=/^([^\:]+)\:(.*)/,Ut={scheme:"urn",parse:function(Se,se){var _e=Se.path&&Se.path.match(tr),$e=Se;if(_e){var Pe=se.scheme||$e.scheme||"urn",Fe=_e[1].toLowerCase(),qe=_e[2],Ye=Pe+":"+(se.nid||Fe),Je=ye[Ye];$e.nid=Fe,$e.nss=qe,$e.path=void 0,Je&&($e=Je.parse($e,se))}else $e.error=$e.error||"URN can not be parsed.";return $e},serialize:function(Se,se){var _e=se.scheme||Se.scheme||"urn",$e=Se.nid,Pe=_e+":"+(se.nid||$e),Fe=ye[Pe];Fe&&(Se=Fe.serialize(Se,se));var qe=Se,Ye=Se.nss;return qe.path=($e||se.nid)+":"+Ye,qe}},wr=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,De={scheme:"urn:uuid",parse:function(Se,se){var _e=Se;return _e.uuid=_e.nss,_e.nss=void 0,!se.tolerant&&(!_e.uuid||!_e.uuid.match(wr))&&(_e.error=_e.error||"UUID is not valid."),_e},serialize:function(Se,se){var _e=Se;return _e.nss=(Se.uuid||"").toLowerCase(),_e}};ye[ze.scheme]=ze,ye[Ze.scheme]=Ze,ye[rt.scheme]=rt,ye[Ft.scheme]=Ft,ye[$r.scheme]=$r,ye[Ut.scheme]=Ut,ye[De.scheme]=De,_.SCHEMES=ye,_.pctEncChar=Ee,_.pctDecChars=Re,_.parse=Le,_.removeDotSegments=Ue,_.serialize=Ge,_.resolveComponents=et,_.resolve=ot,_.normalize=ht,_.equal=Oe,_.escapeComponent=we,_.unescapeComponent=Ce,Object.defineProperty(_,"__esModule",{value:!0})})})(uri_all,uri_all.exports);var uri_allExports=uri_all.exports;Object.defineProperty(uri$1,"__esModule",{value:!0});const uri=uri_allExports;uri.code='require("ajv/dist/runtime/uri").default';uri$1.default=uri;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CodeGen=r.Name=r.nil=r.stringify=r.str=r._=r.KeywordCxt=void 0;var n=validate;Object.defineProperty(r,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var _=codegen;Object.defineProperty(r,"_",{enumerable:!0,get:function(){return _._}}),Object.defineProperty(r,"str",{enumerable:!0,get:function(){return _.str}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return _.stringify}}),Object.defineProperty(r,"nil",{enumerable:!0,get:function(){return _.nil}}),Object.defineProperty(r,"Name",{enumerable:!0,get:function(){return _.Name}}),Object.defineProperty(r,"CodeGen",{enumerable:!0,get:function(){return _.CodeGen}});const x=validation_error,S=ref_error,E=rules,C=compile,T=codegen,B=resolve$1,A=dataType,I=util,N=require$$9,V=uri$1,D=(ne,te)=>new RegExp(ne,te);D.code="new RegExp";const O=["removeAdditional","useDefaults","coerceTypes"],F=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),M={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},L={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},j=200;function q(ne){var te,K,le,ue,be,ge,ye,Ee,Re,Ne,Te,he,xe,fe,Be,Le,Ve,Ie,Me,He,We,Ue,Ge,et,ot;const ht=ne.strict,Oe=(te=ne.code)===null||te===void 0?void 0:te.optimize,we=Oe===!0||Oe===void 0?1:Oe||0,Ce=(le=(K=ne.code)===null||K===void 0?void 0:K.regExp)!==null&&le!==void 0?le:D,ze=(ue=ne.uriResolver)!==null&&ue!==void 0?ue:V.default;return{strictSchema:(ge=(be=ne.strictSchema)!==null&&be!==void 0?be:ht)!==null&&ge!==void 0?ge:!0,strictNumbers:(Ee=(ye=ne.strictNumbers)!==null&&ye!==void 0?ye:ht)!==null&&Ee!==void 0?Ee:!0,strictTypes:(Ne=(Re=ne.strictTypes)!==null&&Re!==void 0?Re:ht)!==null&&Ne!==void 0?Ne:"log",strictTuples:(he=(Te=ne.strictTuples)!==null&&Te!==void 0?Te:ht)!==null&&he!==void 0?he:"log",strictRequired:(fe=(xe=ne.strictRequired)!==null&&xe!==void 0?xe:ht)!==null&&fe!==void 0?fe:!1,code:ne.code?{...ne.code,optimize:we,regExp:Ce}:{optimize:we,regExp:Ce},loopRequired:(Be=ne.loopRequired)!==null&&Be!==void 0?Be:j,loopEnum:(Le=ne.loopEnum)!==null&&Le!==void 0?Le:j,meta:(Ve=ne.meta)!==null&&Ve!==void 0?Ve:!0,messages:(Ie=ne.messages)!==null&&Ie!==void 0?Ie:!0,inlineRefs:(Me=ne.inlineRefs)!==null&&Me!==void 0?Me:!0,schemaId:(He=ne.schemaId)!==null&&He!==void 0?He:"$id",addUsedSchema:(We=ne.addUsedSchema)!==null&&We!==void 0?We:!0,validateSchema:(Ue=ne.validateSchema)!==null&&Ue!==void 0?Ue:!0,validateFormats:(Ge=ne.validateFormats)!==null&&Ge!==void 0?Ge:!0,unicodeRegExp:(et=ne.unicodeRegExp)!==null&&et!==void 0?et:!0,int32range:(ot=ne.int32range)!==null&&ot!==void 0?ot:!0,uriResolver:ze}}class H{constructor(te={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,te=this.opts={...te,...q(te)};const{es5:K,lines:le}=this.opts.code;this.scope=new T.ValueScope({scope:{},prefixes:F,es5:K,lines:le}),this.logger=G(te.logger);const ue=te.validateFormats;te.validateFormats=!1,this.RULES=(0,E.getRules)(),X.call(this,M,te,"NOT SUPPORTED"),X.call(this,L,te,"DEPRECATED","warn"),this._metaOpts=ve.call(this),te.formats&&ae.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),te.keywords&&ce.call(this,te.keywords),typeof te.meta=="object"&&this.addMetaSchema(te.meta),Z.call(this),te.validateFormats=ue}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:te,meta:K,schemaId:le}=this.opts;let ue=N;le==="id"&&(ue={...N},ue.id=ue.$id,delete ue.$id),K&&te&&this.addMetaSchema(ue,ue[le],!1)}defaultMeta(){const{meta:te,schemaId:K}=this.opts;return this.opts.defaultMeta=typeof te=="object"?te[K]||te:void 0}validate(te,K){let le;if(typeof te=="string"){if(le=this.getSchema(te),!le)throw new Error(`no schema with key or ref "${te}"`)}else le=this.compile(te);const ue=le(K);return"$async"in le||(this.errors=le.errors),ue}compile(te,K){const le=this._addSchema(te,K);return le.validate||this._compileSchemaEnv(le)}compileAsync(te,K){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:le}=this.opts;return ue.call(this,te,K);async function ue(Ne,Te){await be.call(this,Ne.$schema);const he=this._addSchema(Ne,Te);return he.validate||ge.call(this,he)}async function be(Ne){Ne&&!this.getSchema(Ne)&&await ue.call(this,{$ref:Ne},!0)}async function ge(Ne){try{return this._compileSchemaEnv(Ne)}catch(Te){if(!(Te instanceof S.default))throw Te;return ye.call(this,Te),await Ee.call(this,Te.missingSchema),ge.call(this,Ne)}}function ye({missingSchema:Ne,missingRef:Te}){if(this.refs[Ne])throw new Error(`AnySchema ${Ne} is loaded but ${Te} cannot be resolved`)}async function Ee(Ne){const Te=await Re.call(this,Ne);this.refs[Ne]||await be.call(this,Te.$schema),this.refs[Ne]||this.addSchema(Te,Ne,K)}async function Re(Ne){const Te=this._loading[Ne];if(Te)return Te;try{return await(this._loading[Ne]=le(Ne))}finally{delete this._loading[Ne]}}}addSchema(te,K,le,ue=this.opts.validateSchema){if(Array.isArray(te)){for(const ge of te)this.addSchema(ge,void 0,le,ue);return this}let be;if(typeof te=="object"){const{schemaId:ge}=this.opts;if(be=te[ge],be!==void 0&&typeof be!="string")throw new Error(`schema ${ge} must be string`)}return K=(0,B.normalizeId)(K||be),this._checkUnique(K),this.schemas[K]=this._addSchema(te,le,K,ue,!0),this}addMetaSchema(te,K,le=this.opts.validateSchema){return this.addSchema(te,K,!0,le),this}validateSchema(te,K){if(typeof te=="boolean")return!0;let le;if(le=te.$schema,le!==void 0&&typeof le!="string")throw new Error("$schema must be a string");if(le=le||this.opts.defaultMeta||this.defaultMeta(),!le)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const ue=this.validate(le,te);if(!ue&&K){const be="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(be);else throw new Error(be)}return ue}getSchema(te){let K;for(;typeof(K=J.call(this,te))=="string";)te=K;if(K===void 0){const{schemaId:le}=this.opts,ue=new C.SchemaEnv({schema:{},schemaId:le});if(K=C.resolveSchema.call(this,ue,te),!K)return;this.refs[te]=K}return K.validate||this._compileSchemaEnv(K)}removeSchema(te){if(te instanceof RegExp)return this._removeAllSchemas(this.schemas,te),this._removeAllSchemas(this.refs,te),this;switch(typeof te){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const K=J.call(this,te);return typeof K=="object"&&this._cache.delete(K.schema),delete this.schemas[te],delete this.refs[te],this}case"object":{const K=te;this._cache.delete(K);let le=te[this.opts.schemaId];return le&&(le=(0,B.normalizeId)(le),delete this.schemas[le],delete this.refs[le]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(te){for(const K of te)this.addKeyword(K);return this}addKeyword(te,K){let le;if(typeof te=="string")le=te,typeof K=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),K.keyword=le);else if(typeof te=="object"&&K===void 0){if(K=te,le=K.keyword,Array.isArray(le)&&!le.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(U.call(this,le,K),!K)return(0,I.eachItem)(le,be=>W.call(this,be)),this;re.call(this,K);const ue={...K,type:(0,A.getJSONTypes)(K.type),schemaType:(0,A.getJSONTypes)(K.schemaType)};return(0,I.eachItem)(le,ue.type.length===0?be=>W.call(this,be,ue):be=>ue.type.forEach(ge=>W.call(this,be,ue,ge))),this}getKeyword(te){const K=this.RULES.all[te];return typeof K=="object"?K.definition:!!K}removeKeyword(te){const{RULES:K}=this;delete K.keywords[te],delete K.all[te];for(const le of K.rules){const ue=le.rules.findIndex(be=>be.keyword===te);ue>=0&&le.rules.splice(ue,1)}return this}addFormat(te,K){return typeof K=="string"&&(K=new RegExp(K)),this.formats[te]=K,this}errorsText(te=this.errors,{separator:K=", ",dataVar:le="data"}={}){return!te||te.length===0?"No errors":te.map(ue=>`${le}${ue.instancePath} ${ue.message}`).reduce((ue,be)=>ue+K+be)}$dataMetaSchema(te,K){const le=this.RULES.all;te=JSON.parse(JSON.stringify(te));for(const ue of K){const be=ue.split("/").slice(1);let ge=te;for(const ye of be)ge=ge[ye];for(const ye in le){const Ee=le[ye];if(typeof Ee!="object")continue;const{$data:Re}=Ee.definition,Ne=ge[ye];Re&&Ne&&(ge[ye]=ie(Ne))}}return te}_removeAllSchemas(te,K){for(const le in te){const ue=te[le];(!K||K.test(le))&&(typeof ue=="string"?delete te[le]:ue&&!ue.meta&&(this._cache.delete(ue.schema),delete te[le]))}}_addSchema(te,K,le,ue=this.opts.validateSchema,be=this.opts.addUsedSchema){let ge;const{schemaId:ye}=this.opts;if(typeof te=="object")ge=te[ye];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof te!="boolean")throw new Error("schema must be object or boolean")}let Ee=this._cache.get(te);if(Ee!==void 0)return Ee;le=(0,B.normalizeId)(ge||le);const Re=B.getSchemaRefs.call(this,te,le);return Ee=new C.SchemaEnv({schema:te,schemaId:ye,meta:K,baseId:le,localRefs:Re}),this._cache.set(Ee.schema,Ee),be&&!le.startsWith("#")&&(le&&this._checkUnique(le),this.refs[le]=Ee),ue&&this.validateSchema(te,!0),Ee}_checkUnique(te){if(this.schemas[te]||this.refs[te])throw new Error(`schema with key or id "${te}" already exists`)}_compileSchemaEnv(te){if(te.meta?this._compileMetaSchema(te):C.compileSchema.call(this,te),!te.validate)throw new Error("ajv implementation error");return te.validate}_compileMetaSchema(te){const K=this.opts;this.opts=this._metaOpts;try{C.compileSchema.call(this,te)}finally{this.opts=K}}}r.default=H,H.ValidationError=x.default,H.MissingRefError=S.default;function X(ne,te,K,le="error"){for(const ue in ne){const be=ue;be in te&&this.logger[le](`${K}: option ${ue}. ${ne[be]}`)}}function J(ne){return ne=(0,B.normalizeId)(ne),this.schemas[ne]||this.refs[ne]}function Z(){const ne=this.opts.schemas;if(ne)if(Array.isArray(ne))this.addSchema(ne);else for(const te in ne)this.addSchema(ne[te],te)}function ae(){for(const ne in this.opts.formats){const te=this.opts.formats[ne];te&&this.addFormat(ne,te)}}function ce(ne){if(Array.isArray(ne)){this.addVocabulary(ne);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const te in ne){const K=ne[te];K.keyword||(K.keyword=te),this.addKeyword(K)}}function ve(){const ne={...this.opts};for(const te of O)delete ne[te];return ne}const pe={log(){},warn(){},error(){}};function G(ne){if(ne===!1)return pe;if(ne===void 0)return console;if(ne.log&&ne.warn&&ne.error)return ne;throw new Error("logger must implement log, warn and error methods")}const Y=/^[a-z_$][a-z0-9_$:-]*$/i;function U(ne,te){const{RULES:K}=this;if((0,I.eachItem)(ne,le=>{if(K.keywords[le])throw new Error(`Keyword ${le} is already defined`);if(!Y.test(le))throw new Error(`Keyword ${le} has invalid name`)}),!!te&&te.$data&&!("code"in te||"validate"in te))throw new Error('$data keyword must have "code" or "validate" function')}function W(ne,te,K){var le;const ue=te?.post;if(K&&ue)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:be}=this;let ge=ue?be.post:be.rules.find(({type:Ee})=>Ee===K);if(ge||(ge={type:K,rules:[]},be.rules.push(ge)),be.keywords[ne]=!0,!te)return;const ye={keyword:ne,definition:{...te,type:(0,A.getJSONTypes)(te.type),schemaType:(0,A.getJSONTypes)(te.schemaType)}};te.before?ee.call(this,ge,ye,te.before):ge.rules.push(ye),be.all[ne]=ye,(le=te.implements)===null||le===void 0||le.forEach(Ee=>this.addKeyword(Ee))}function ee(ne,te,K){const le=ne.rules.findIndex(ue=>ue.keyword===K);le>=0?ne.rules.splice(le,0,te):(ne.rules.push(te),this.logger.warn(`rule ${K} is not defined`))}function re(ne){let{metaSchema:te}=ne;te!==void 0&&(ne.$data&&this.opts.$data&&(te=ie(te)),ne.validateSchema=this.compile(te,!0))}const oe={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ie(ne){return{anyOf:[ne,oe]}}})(core$3);var draft7={},core$2={},id={};Object.defineProperty(id,"__esModule",{value:!0});const def$s={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};id.default=def$s;var ref={};Object.defineProperty(ref,"__esModule",{value:!0});ref.callRef=ref.getValidate=void 0;const ref_error_1=ref_error,code_1$8=code,codegen_1$l=codegen,names_1$1=names$1,compile_1$1=compile,util_1$j=util,def$r={keyword:"$ref",schemaType:"string",code(r){const{gen:n,schema:_,it:x}=r,{baseId:S,schemaEnv:E,validateName:C,opts:T,self:B}=x,{root:A}=E;if((_==="#"||_==="#/")&&S===A.baseId)return N();const I=compile_1$1.resolveRef.call(B,A,S,_);if(I===void 0)throw new ref_error_1.default(x.opts.uriResolver,S,_);if(I instanceof compile_1$1.SchemaEnv)return V(I);return D(I);function N(){if(E===A)return callRef(r,C,E,E.$async);const O=n.scopeValue("root",{ref:A});return callRef(r,(0,codegen_1$l._)`${O}.validate`,A,A.$async)}function V(O){const F=getValidate(r,O);callRef(r,F,O,O.$async)}function D(O){const F=n.scopeValue("schema",T.code.source===!0?{ref:O,code:(0,codegen_1$l.stringify)(O)}:{ref:O}),M=n.name("valid"),L=r.subschema({schema:O,dataTypes:[],schemaPath:codegen_1$l.nil,topSchemaRef:F,errSchemaPath:_},M);r.mergeEvaluated(L),r.ok(M)}}};function getValidate(r,n){const{gen:_}=r;return n.validate?_.scopeValue("validate",{ref:n.validate}):(0,codegen_1$l._)`${_.scopeValue("wrapper",{ref:n})}.validate`}ref.getValidate=getValidate;function callRef(r,n,_,x){const{gen:S,it:E}=r,{allErrors:C,schemaEnv:T,opts:B}=E,A=B.passContext?names_1$1.default.this:codegen_1$l.nil;x?I():N();function I(){if(!T.$async)throw new Error("async schema referenced by sync schema");const O=S.let("valid");S.try(()=>{S.code((0,codegen_1$l._)`await ${(0,code_1$8.callValidateCode)(r,n,A)}`),D(n),C||S.assign(O,!0)},F=>{S.if((0,codegen_1$l._)`!(${F} instanceof ${E.ValidationError})`,()=>S.throw(F)),V(F),C||S.assign(O,!1)}),r.ok(O)}function N(){r.result((0,code_1$8.callValidateCode)(r,n,A),()=>D(n),()=>V(n))}function V(O){const F=(0,codegen_1$l._)`${O}.errors`;S.assign(names_1$1.default.vErrors,(0,codegen_1$l._)`${names_1$1.default.vErrors} === null ? ${F} : ${names_1$1.default.vErrors}.concat(${F})`),S.assign(names_1$1.default.errors,(0,codegen_1$l._)`${names_1$1.default.vErrors}.length`)}function D(O){var F;if(!E.opts.unevaluated)return;const M=(F=_?.validate)===null||F===void 0?void 0:F.evaluated;if(E.props!==!0)if(M&&!M.dynamicProps)M.props!==void 0&&(E.props=util_1$j.mergeEvaluated.props(S,M.props,E.props));else{const L=S.var("props",(0,codegen_1$l._)`${O}.evaluated.props`);E.props=util_1$j.mergeEvaluated.props(S,L,E.props,codegen_1$l.Name)}if(E.items!==!0)if(M&&!M.dynamicItems)M.items!==void 0&&(E.items=util_1$j.mergeEvaluated.items(S,M.items,E.items));else{const L=S.var("items",(0,codegen_1$l._)`${O}.evaluated.items`);E.items=util_1$j.mergeEvaluated.items(S,L,E.items,codegen_1$l.Name)}}}ref.callRef=callRef;ref.default=def$r;Object.defineProperty(core$2,"__esModule",{value:!0});const id_1=id,ref_1=ref,core$1=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",id_1.default,ref_1.default];core$2.default=core$1;var validation$1={},limitNumber={};Object.defineProperty(limitNumber,"__esModule",{value:!0});const codegen_1$k=codegen,ops=codegen_1$k.operators,KWDs={maximum:{okStr:"<=",ok:ops.LTE,fail:ops.GT},minimum:{okStr:">=",ok:ops.GTE,fail:ops.LT},exclusiveMaximum:{okStr:"<",ok:ops.LT,fail:ops.GTE},exclusiveMinimum:{okStr:">",ok:ops.GT,fail:ops.LTE}},error$i={message:({keyword:r,schemaCode:n})=>(0,codegen_1$k.str)`must be ${KWDs[r].okStr} ${n}`,params:({keyword:r,schemaCode:n})=>(0,codegen_1$k._)`{comparison: ${KWDs[r].okStr}, limit: ${n}}`},def$q={keyword:Object.keys(KWDs),type:"number",schemaType:"number",$data:!0,error:error$i,code(r){const{keyword:n,data:_,schemaCode:x}=r;r.fail$data((0,codegen_1$k._)`${_} ${KWDs[n].fail} ${x} || isNaN(${_})`)}};limitNumber.default=def$q;var multipleOf={};Object.defineProperty(multipleOf,"__esModule",{value:!0});const codegen_1$j=codegen,error$h={message:({schemaCode:r})=>(0,codegen_1$j.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,codegen_1$j._)`{multipleOf: ${r}}`},def$p={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:error$h,code(r){const{gen:n,data:_,schemaCode:x,it:S}=r,E=S.opts.multipleOfPrecision,C=n.let("res"),T=E?(0,codegen_1$j._)`Math.abs(Math.round(${C}) - ${C}) > 1e-${E}`:(0,codegen_1$j._)`${C} !== parseInt(${C})`;r.fail$data((0,codegen_1$j._)`(${x} === 0 || (${C} = ${_}/${x}, ${T}))`)}};multipleOf.default=def$p;var limitLength={},ucs2length$1={};Object.defineProperty(ucs2length$1,"__esModule",{value:!0});function ucs2length(r){const n=r.length;let _=0,x=0,S;for(;x<n;)_++,S=r.charCodeAt(x++),S>=55296&&S<=56319&&x<n&&(S=r.charCodeAt(x),(S&64512)===56320&&x++);return _}ucs2length$1.default=ucs2length;ucs2length.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(limitLength,"__esModule",{value:!0});const codegen_1$i=codegen,util_1$i=util,ucs2length_1=ucs2length$1,error$g={message({keyword:r,schemaCode:n}){const _=r==="maxLength"?"more":"fewer";return(0,codegen_1$i.str)`must NOT have ${_} than ${n} characters`},params:({schemaCode:r})=>(0,codegen_1$i._)`{limit: ${r}}`},def$o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:error$g,code(r){const{keyword:n,data:_,schemaCode:x,it:S}=r,E=n==="maxLength"?codegen_1$i.operators.GT:codegen_1$i.operators.LT,C=S.opts.unicode===!1?(0,codegen_1$i._)`${_}.length`:(0,codegen_1$i._)`${(0,util_1$i.useFunc)(r.gen,ucs2length_1.default)}(${_})`;r.fail$data((0,codegen_1$i._)`${C} ${E} ${x}`)}};limitLength.default=def$o;var pattern={};Object.defineProperty(pattern,"__esModule",{value:!0});const code_1$7=code,codegen_1$h=codegen,error$f={message:({schemaCode:r})=>(0,codegen_1$h.str)`must match pattern "${r}"`,params:({schemaCode:r})=>(0,codegen_1$h._)`{pattern: ${r}}`},def$n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:error$f,code(r){const{data:n,$data:_,schema:x,schemaCode:S,it:E}=r,C=E.opts.unicodeRegExp?"u":"",T=_?(0,codegen_1$h._)`(new RegExp(${S}, ${C}))`:(0,code_1$7.usePattern)(r,x);r.fail$data((0,codegen_1$h._)`!${T}.test(${n})`)}};pattern.default=def$n;var limitProperties={};Object.defineProperty(limitProperties,"__esModule",{value:!0});const codegen_1$g=codegen,error$e={message({keyword:r,schemaCode:n}){const _=r==="maxProperties"?"more":"fewer";return(0,codegen_1$g.str)`must NOT have ${_} than ${n} properties`},params:({schemaCode:r})=>(0,codegen_1$g._)`{limit: ${r}}`},def$m={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:error$e,code(r){const{keyword:n,data:_,schemaCode:x}=r,S=n==="maxProperties"?codegen_1$g.operators.GT:codegen_1$g.operators.LT;r.fail$data((0,codegen_1$g._)`Object.keys(${_}).length ${S} ${x}`)}};limitProperties.default=def$m;var required={};Object.defineProperty(required,"__esModule",{value:!0});const code_1$6=code,codegen_1$f=codegen,util_1$h=util,error$d={message:({params:{missingProperty:r}})=>(0,codegen_1$f.str)`must have required property '${r}'`,params:({params:{missingProperty:r}})=>(0,codegen_1$f._)`{missingProperty: ${r}}`},def$l={keyword:"required",type:"object",schemaType:"array",$data:!0,error:error$d,code(r){const{gen:n,schema:_,schemaCode:x,data:S,$data:E,it:C}=r,{opts:T}=C;if(!E&&_.length===0)return;const B=_.length>=T.loopRequired;if(C.allErrors?A():I(),T.strictRequired){const D=r.parentSchema.properties,{definedProperties:O}=r.it;for(const F of _)if(D?.[F]===void 0&&!O.has(F)){const M=C.schemaEnv.baseId+C.errSchemaPath,L=`required property "${F}" is not defined at "${M}" (strictRequired)`;(0,util_1$h.checkStrictMode)(C,L,C.opts.strictRequired)}}function A(){if(B||E)r.block$data(codegen_1$f.nil,N);else for(const D of _)(0,code_1$6.checkReportMissingProp)(r,D)}function I(){const D=n.let("missing");if(B||E){const O=n.let("valid",!0);r.block$data(O,()=>V(D,O)),r.ok(O)}else n.if((0,code_1$6.checkMissingProp)(r,_,D)),(0,code_1$6.reportMissingProp)(r,D),n.else()}function N(){n.forOf("prop",x,D=>{r.setParams({missingProperty:D}),n.if((0,code_1$6.noPropertyInData)(n,S,D,T.ownProperties),()=>r.error())})}function V(D,O){r.setParams({missingProperty:D}),n.forOf(D,x,()=>{n.assign(O,(0,code_1$6.propertyInData)(n,S,D,T.ownProperties)),n.if((0,codegen_1$f.not)(O),()=>{r.error(),n.break()})},codegen_1$f.nil)}}};required.default=def$l;var limitItems={};Object.defineProperty(limitItems,"__esModule",{value:!0});const codegen_1$e=codegen,error$c={message({keyword:r,schemaCode:n}){const _=r==="maxItems"?"more":"fewer";return(0,codegen_1$e.str)`must NOT have ${_} than ${n} items`},params:({schemaCode:r})=>(0,codegen_1$e._)`{limit: ${r}}`},def$k={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:error$c,code(r){const{keyword:n,data:_,schemaCode:x}=r,S=n==="maxItems"?codegen_1$e.operators.GT:codegen_1$e.operators.LT;r.fail$data((0,codegen_1$e._)`${_}.length ${S} ${x}`)}};limitItems.default=def$k;var uniqueItems={},equal$1={};Object.defineProperty(equal$1,"__esModule",{value:!0});const equal=fastDeepEqual;equal.code='require("ajv/dist/runtime/equal").default';equal$1.default=equal;Object.defineProperty(uniqueItems,"__esModule",{value:!0});const dataType_1=dataType,codegen_1$d=codegen,util_1$g=util,equal_1$2=equal$1,error$b={message:({params:{i:r,j:n}})=>(0,codegen_1$d.str)`must NOT have duplicate items (items ## ${n} and ${r} are identical)`,params:({params:{i:r,j:n}})=>(0,codegen_1$d._)`{i: ${r}, j: ${n}}`},def$j={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:error$b,code(r){const{gen:n,data:_,$data:x,schema:S,parentSchema:E,schemaCode:C,it:T}=r;if(!x&&!S)return;const B=n.let("valid"),A=E.items?(0,dataType_1.getSchemaTypes)(E.items):[];r.block$data(B,I,(0,codegen_1$d._)`${C} === false`),r.ok(B);function I(){const O=n.let("i",(0,codegen_1$d._)`${_}.length`),F=n.let("j");r.setParams({i:O,j:F}),n.assign(B,!0),n.if((0,codegen_1$d._)`${O} > 1`,()=>(N()?V:D)(O,F))}function N(){return A.length>0&&!A.some(O=>O==="object"||O==="array")}function V(O,F){const M=n.name("item"),L=(0,dataType_1.checkDataTypes)(A,M,T.opts.strictNumbers,dataType_1.DataType.Wrong),j=n.const("indices",(0,codegen_1$d._)`{}`);n.for((0,codegen_1$d._)`;${O}--;`,()=>{n.let(M,(0,codegen_1$d._)`${_}[${O}]`),n.if(L,(0,codegen_1$d._)`continue`),A.length>1&&n.if((0,codegen_1$d._)`typeof ${M} == "string"`,(0,codegen_1$d._)`${M} += "_"`),n.if((0,codegen_1$d._)`typeof ${j}[${M}] == "number"`,()=>{n.assign(F,(0,codegen_1$d._)`${j}[${M}]`),r.error(),n.assign(B,!1).break()}).code((0,codegen_1$d._)`${j}[${M}] = ${O}`)})}function D(O,F){const M=(0,util_1$g.useFunc)(n,equal_1$2.default),L=n.name("outer");n.label(L).for((0,codegen_1$d._)`;${O}--;`,()=>n.for((0,codegen_1$d._)`${F} = ${O}; ${F}--;`,()=>n.if((0,codegen_1$d._)`${M}(${_}[${O}], ${_}[${F}])`,()=>{r.error(),n.assign(B,!1).break(L)})))}}};uniqueItems.default=def$j;var _const={};Object.defineProperty(_const,"__esModule",{value:!0});const codegen_1$c=codegen,util_1$f=util,equal_1$1=equal$1,error$a={message:"must be equal to constant",params:({schemaCode:r})=>(0,codegen_1$c._)`{allowedValue: ${r}}`},def$i={keyword:"const",$data:!0,error:error$a,code(r){const{gen:n,data:_,$data:x,schemaCode:S,schema:E}=r;x||E&&typeof E=="object"?r.fail$data((0,codegen_1$c._)`!${(0,util_1$f.useFunc)(n,equal_1$1.default)}(${_}, ${S})`):r.fail((0,codegen_1$c._)`${E} !== ${_}`)}};_const.default=def$i;var _enum={};Object.defineProperty(_enum,"__esModule",{value:!0});const codegen_1$b=codegen,util_1$e=util,equal_1=equal$1,error$9={message:"must be equal to one of the allowed values",params:({schemaCode:r})=>(0,codegen_1$b._)`{allowedValues: ${r}}`},def$h={keyword:"enum",schemaType:"array",$data:!0,error:error$9,code(r){const{gen:n,data:_,$data:x,schema:S,schemaCode:E,it:C}=r;if(!x&&S.length===0)throw new Error("enum must have non-empty array");const T=S.length>=C.opts.loopEnum;let B;const A=()=>B??(B=(0,util_1$e.useFunc)(n,equal_1.default));let I;if(T||x)I=n.let("valid"),r.block$data(I,N);else{if(!Array.isArray(S))throw new Error("ajv implementation error");const D=n.const("vSchema",E);I=(0,codegen_1$b.or)(...S.map((O,F)=>V(D,F)))}r.pass(I);function N(){n.assign(I,!1),n.forOf("v",E,D=>n.if((0,codegen_1$b._)`${A()}(${_}, ${D})`,()=>n.assign(I,!0).break()))}function V(D,O){const F=S[O];return typeof F=="object"&&F!==null?(0,codegen_1$b._)`${A()}(${_}, ${D}[${O}])`:(0,codegen_1$b._)`${_} === ${F}`}}};_enum.default=def$h;Object.defineProperty(validation$1,"__esModule",{value:!0});const limitNumber_1=limitNumber,multipleOf_1=multipleOf,limitLength_1=limitLength,pattern_1=pattern,limitProperties_1=limitProperties,required_1=required,limitItems_1=limitItems,uniqueItems_1=uniqueItems,const_1=_const,enum_1=_enum,validation=[limitNumber_1.default,multipleOf_1.default,limitLength_1.default,pattern_1.default,limitProperties_1.default,required_1.default,limitItems_1.default,uniqueItems_1.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},const_1.default,enum_1.default];validation$1.default=validation;var applicator={},additionalItems={};Object.defineProperty(additionalItems,"__esModule",{value:!0});additionalItems.validateAdditionalItems=void 0;const codegen_1$a=codegen,util_1$d=util,error$8={message:({params:{len:r}})=>(0,codegen_1$a.str)`must NOT have more than ${r} items`,params:({params:{len:r}})=>(0,codegen_1$a._)`{limit: ${r}}`},def$g={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:error$8,code(r){const{parentSchema:n,it:_}=r,{items:x}=n;if(!Array.isArray(x)){(0,util_1$d.checkStrictMode)(_,'"additionalItems" is ignored when "items" is not an array of schemas');return}validateAdditionalItems(r,x)}};function validateAdditionalItems(r,n){const{gen:_,schema:x,data:S,keyword:E,it:C}=r;C.items=!0;const T=_.const("len",(0,codegen_1$a._)`${S}.length`);if(x===!1)r.setParams({len:n.length}),r.pass((0,codegen_1$a._)`${T} <= ${n.length}`);else if(typeof x=="object"&&!(0,util_1$d.alwaysValidSchema)(C,x)){const A=_.var("valid",(0,codegen_1$a._)`${T} <= ${n.length}`);_.if((0,codegen_1$a.not)(A),()=>B(A)),r.ok(A)}function B(A){_.forRange("i",n.length,T,I=>{r.subschema({keyword:E,dataProp:I,dataPropType:util_1$d.Type.Num},A),C.allErrors||_.if((0,codegen_1$a.not)(A),()=>_.break())})}}additionalItems.validateAdditionalItems=validateAdditionalItems;additionalItems.default=def$g;var prefixItems={},items={};Object.defineProperty(items,"__esModule",{value:!0});items.validateTuple=void 0;const codegen_1$9=codegen,util_1$c=util,code_1$5=code,def$f={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(r){const{schema:n,it:_}=r;if(Array.isArray(n))return validateTuple(r,"additionalItems",n);_.items=!0,!(0,util_1$c.alwaysValidSchema)(_,n)&&r.ok((0,code_1$5.validateArray)(r))}};function validateTuple(r,n,_=r.schema){const{gen:x,parentSchema:S,data:E,keyword:C,it:T}=r;I(S),T.opts.unevaluated&&_.length&&T.items!==!0&&(T.items=util_1$c.mergeEvaluated.items(x,_.length,T.items));const B=x.name("valid"),A=x.const("len",(0,codegen_1$9._)`${E}.length`);_.forEach((N,V)=>{(0,util_1$c.alwaysValidSchema)(T,N)||(x.if((0,codegen_1$9._)`${A} > ${V}`,()=>r.subschema({keyword:C,schemaProp:V,dataProp:V},B)),r.ok(B))});function I(N){const{opts:V,errSchemaPath:D}=T,O=_.length,F=O===N.minItems&&(O===N.maxItems||N[n]===!1);if(V.strictTuples&&!F){const M=`"${C}" is ${O}-tuple, but minItems or maxItems/${n} are not specified or different at path "${D}"`;(0,util_1$c.checkStrictMode)(T,M,V.strictTuples)}}}items.validateTuple=validateTuple;items.default=def$f;Object.defineProperty(prefixItems,"__esModule",{value:!0});const items_1$1=items,def$e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,items_1$1.validateTuple)(r,"items")};prefixItems.default=def$e;var items2020={};Object.defineProperty(items2020,"__esModule",{value:!0});const codegen_1$8=codegen,util_1$b=util,code_1$4=code,additionalItems_1$1=additionalItems,error$7={message:({params:{len:r}})=>(0,codegen_1$8.str)`must NOT have more than ${r} items`,params:({params:{len:r}})=>(0,codegen_1$8._)`{limit: ${r}}`},def$d={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:error$7,code(r){const{schema:n,parentSchema:_,it:x}=r,{prefixItems:S}=_;x.items=!0,!(0,util_1$b.alwaysValidSchema)(x,n)&&(S?(0,additionalItems_1$1.validateAdditionalItems)(r,S):r.ok((0,code_1$4.validateArray)(r)))}};items2020.default=def$d;var contains={};Object.defineProperty(contains,"__esModule",{value:!0});const codegen_1$7=codegen,util_1$a=util,error$6={message:({params:{min:r,max:n}})=>n===void 0?(0,codegen_1$7.str)`must contain at least ${r} valid item(s)`:(0,codegen_1$7.str)`must contain at least ${r} and no more than ${n} valid item(s)`,params:({params:{min:r,max:n}})=>n===void 0?(0,codegen_1$7._)`{minContains: ${r}}`:(0,codegen_1$7._)`{minContains: ${r}, maxContains: ${n}}`},def$c={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:error$6,code(r){const{gen:n,schema:_,parentSchema:x,data:S,it:E}=r;let C,T;const{minContains:B,maxContains:A}=x;E.opts.next?(C=B===void 0?1:B,T=A):C=1;const I=n.const("len",(0,codegen_1$7._)`${S}.length`);if(r.setParams({min:C,max:T}),T===void 0&&C===0){(0,util_1$a.checkStrictMode)(E,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(T!==void 0&&C>T){(0,util_1$a.checkStrictMode)(E,'"minContains" > "maxContains" is always invalid'),r.fail();return}if((0,util_1$a.alwaysValidSchema)(E,_)){let F=(0,codegen_1$7._)`${I} >= ${C}`;T!==void 0&&(F=(0,codegen_1$7._)`${F} && ${I} <= ${T}`),r.pass(F);return}E.items=!0;const N=n.name("valid");T===void 0&&C===1?D(N,()=>n.if(N,()=>n.break())):C===0?(n.let(N,!0),T!==void 0&&n.if((0,codegen_1$7._)`${S}.length > 0`,V)):(n.let(N,!1),V()),r.result(N,()=>r.reset());function V(){const F=n.name("_valid"),M=n.let("count",0);D(F,()=>n.if(F,()=>O(M)))}function D(F,M){n.forRange("i",0,I,L=>{r.subschema({keyword:"contains",dataProp:L,dataPropType:util_1$a.Type.Num,compositeRule:!0},F),M()})}function O(F){n.code((0,codegen_1$7._)`${F}++`),T===void 0?n.if((0,codegen_1$7._)`${F} >= ${C}`,()=>n.assign(N,!0).break()):(n.if((0,codegen_1$7._)`${F} > ${T}`,()=>n.assign(N,!1).break()),C===1?n.assign(N,!0):n.if((0,codegen_1$7._)`${F} >= ${C}`,()=>n.assign(N,!0)))}}};contains.default=def$c;var dependencies={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.validateSchemaDeps=r.validatePropertyDeps=r.error=void 0;const n=codegen,_=util,x=code;r.error={message:({params:{property:B,depsCount:A,deps:I}})=>{const N=A===1?"property":"properties";return(0,n.str)`must have ${N} ${I} when property ${B} is present`},params:({params:{property:B,depsCount:A,deps:I,missingProperty:N}})=>(0,n._)`{property: ${B},
    missingProperty: ${N},
    depsCount: ${A},
    deps: ${I}}`};const S={keyword:"dependencies",type:"object",schemaType:"object",error:r.error,code(B){const[A,I]=E(B);C(B,A),T(B,I)}};function E({schema:B}){const A={},I={};for(const N in B){if(N==="__proto__")continue;const V=Array.isArray(B[N])?A:I;V[N]=B[N]}return[A,I]}function C(B,A=B.schema){const{gen:I,data:N,it:V}=B;if(Object.keys(A).length===0)return;const D=I.let("missing");for(const O in A){const F=A[O];if(F.length===0)continue;const M=(0,x.propertyInData)(I,N,O,V.opts.ownProperties);B.setParams({property:O,depsCount:F.length,deps:F.join(", ")}),V.allErrors?I.if(M,()=>{for(const L of F)(0,x.checkReportMissingProp)(B,L)}):(I.if((0,n._)`${M} && (${(0,x.checkMissingProp)(B,F,D)})`),(0,x.reportMissingProp)(B,D),I.else())}}r.validatePropertyDeps=C;function T(B,A=B.schema){const{gen:I,data:N,keyword:V,it:D}=B,O=I.name("valid");for(const F in A)(0,_.alwaysValidSchema)(D,A[F])||(I.if((0,x.propertyInData)(I,N,F,D.opts.ownProperties),()=>{const M=B.subschema({keyword:V,schemaProp:F},O);B.mergeValidEvaluated(M,O)},()=>I.var(O,!0)),B.ok(O))}r.validateSchemaDeps=T,r.default=S})(dependencies);var propertyNames={};Object.defineProperty(propertyNames,"__esModule",{value:!0});const codegen_1$6=codegen,util_1$9=util,error$5={message:"property name must be valid",params:({params:r})=>(0,codegen_1$6._)`{propertyName: ${r.propertyName}}`},def$b={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:error$5,code(r){const{gen:n,schema:_,data:x,it:S}=r;if((0,util_1$9.alwaysValidSchema)(S,_))return;const E=n.name("valid");n.forIn("key",x,C=>{r.setParams({propertyName:C}),r.subschema({keyword:"propertyNames",data:C,dataTypes:["string"],propertyName:C,compositeRule:!0},E),n.if((0,codegen_1$6.not)(E),()=>{r.error(!0),S.allErrors||n.break()})}),r.ok(E)}};propertyNames.default=def$b;var additionalProperties={};Object.defineProperty(additionalProperties,"__esModule",{value:!0});const code_1$3=code,codegen_1$5=codegen,names_1=names$1,util_1$8=util,error$4={message:"must NOT have additional properties",params:({params:r})=>(0,codegen_1$5._)`{additionalProperty: ${r.additionalProperty}}`},def$a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:error$4,code(r){const{gen:n,schema:_,parentSchema:x,data:S,errsCount:E,it:C}=r;if(!E)throw new Error("ajv implementation error");const{allErrors:T,opts:B}=C;if(C.props=!0,B.removeAdditional!=="all"&&(0,util_1$8.alwaysValidSchema)(C,_))return;const A=(0,code_1$3.allSchemaProperties)(x.properties),I=(0,code_1$3.allSchemaProperties)(x.patternProperties);N(),r.ok((0,codegen_1$5._)`${E} === ${names_1.default.errors}`);function N(){n.forIn("key",S,M=>{!A.length&&!I.length?O(M):n.if(V(M),()=>O(M))})}function V(M){let L;if(A.length>8){const j=(0,util_1$8.schemaRefOrVal)(C,x.properties,"properties");L=(0,code_1$3.isOwnProperty)(n,j,M)}else A.length?L=(0,codegen_1$5.or)(...A.map(j=>(0,codegen_1$5._)`${M} === ${j}`)):L=codegen_1$5.nil;return I.length&&(L=(0,codegen_1$5.or)(L,...I.map(j=>(0,codegen_1$5._)`${(0,code_1$3.usePattern)(r,j)}.test(${M})`))),(0,codegen_1$5.not)(L)}function D(M){n.code((0,codegen_1$5._)`delete ${S}[${M}]`)}function O(M){if(B.removeAdditional==="all"||B.removeAdditional&&_===!1){D(M);return}if(_===!1){r.setParams({additionalProperty:M}),r.error(),T||n.break();return}if(typeof _=="object"&&!(0,util_1$8.alwaysValidSchema)(C,_)){const L=n.name("valid");B.removeAdditional==="failing"?(F(M,L,!1),n.if((0,codegen_1$5.not)(L),()=>{r.reset(),D(M)})):(F(M,L),T||n.if((0,codegen_1$5.not)(L),()=>n.break()))}}function F(M,L,j){const q={keyword:"additionalProperties",dataProp:M,dataPropType:util_1$8.Type.Str};j===!1&&Object.assign(q,{compositeRule:!0,createErrors:!1,allErrors:!1}),r.subschema(q,L)}}};additionalProperties.default=def$a;var properties$1={};Object.defineProperty(properties$1,"__esModule",{value:!0});const validate_1=validate,code_1$2=code,util_1$7=util,additionalProperties_1$1=additionalProperties,def$9={keyword:"properties",type:"object",schemaType:"object",code(r){const{gen:n,schema:_,parentSchema:x,data:S,it:E}=r;E.opts.removeAdditional==="all"&&x.additionalProperties===void 0&&additionalProperties_1$1.default.code(new validate_1.KeywordCxt(E,additionalProperties_1$1.default,"additionalProperties"));const C=(0,code_1$2.allSchemaProperties)(_);for(const N of C)E.definedProperties.add(N);E.opts.unevaluated&&C.length&&E.props!==!0&&(E.props=util_1$7.mergeEvaluated.props(n,(0,util_1$7.toHash)(C),E.props));const T=C.filter(N=>!(0,util_1$7.alwaysValidSchema)(E,_[N]));if(T.length===0)return;const B=n.name("valid");for(const N of T)A(N)?I(N):(n.if((0,code_1$2.propertyInData)(n,S,N,E.opts.ownProperties)),I(N),E.allErrors||n.else().var(B,!0),n.endIf()),r.it.definedProperties.add(N),r.ok(B);function A(N){return E.opts.useDefaults&&!E.compositeRule&&_[N].default!==void 0}function I(N){r.subschema({keyword:"properties",schemaProp:N,dataProp:N},B)}}};properties$1.default=def$9;var patternProperties={};Object.defineProperty(patternProperties,"__esModule",{value:!0});const code_1$1=code,codegen_1$4=codegen,util_1$6=util,util_2=util,def$8={keyword:"patternProperties",type:"object",schemaType:"object",code(r){const{gen:n,schema:_,data:x,parentSchema:S,it:E}=r,{opts:C}=E,T=(0,code_1$1.allSchemaProperties)(_),B=T.filter(F=>(0,util_1$6.alwaysValidSchema)(E,_[F]));if(T.length===0||B.length===T.length&&(!E.opts.unevaluated||E.props===!0))return;const A=C.strictSchema&&!C.allowMatchingProperties&&S.properties,I=n.name("valid");E.props!==!0&&!(E.props instanceof codegen_1$4.Name)&&(E.props=(0,util_2.evaluatedPropsToName)(n,E.props));const{props:N}=E;V();function V(){for(const F of T)A&&D(F),E.allErrors?O(F):(n.var(I,!0),O(F),n.if(I))}function D(F){for(const M in A)new RegExp(F).test(M)&&(0,util_1$6.checkStrictMode)(E,`property ${M} matches pattern ${F} (use allowMatchingProperties)`)}function O(F){n.forIn("key",x,M=>{n.if((0,codegen_1$4._)`${(0,code_1$1.usePattern)(r,F)}.test(${M})`,()=>{const L=B.includes(F);L||r.subschema({keyword:"patternProperties",schemaProp:F,dataProp:M,dataPropType:util_2.Type.Str},I),E.opts.unevaluated&&N!==!0?n.assign((0,codegen_1$4._)`${N}[${M}]`,!0):!L&&!E.allErrors&&n.if((0,codegen_1$4.not)(I),()=>n.break())})})}}};patternProperties.default=def$8;var not={};Object.defineProperty(not,"__esModule",{value:!0});const util_1$5=util,def$7={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){const{gen:n,schema:_,it:x}=r;if((0,util_1$5.alwaysValidSchema)(x,_)){r.fail();return}const S=n.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},S),r.failResult(S,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};not.default=def$7;var anyOf={};Object.defineProperty(anyOf,"__esModule",{value:!0});const code_1=code,def$6={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:code_1.validateUnion,error:{message:"must match a schema in anyOf"}};anyOf.default=def$6;var oneOf={};Object.defineProperty(oneOf,"__esModule",{value:!0});const codegen_1$3=codegen,util_1$4=util,error$3={message:"must match exactly one schema in oneOf",params:({params:r})=>(0,codegen_1$3._)`{passingSchemas: ${r.passing}}`},def$5={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:error$3,code(r){const{gen:n,schema:_,parentSchema:x,it:S}=r;if(!Array.isArray(_))throw new Error("ajv implementation error");if(S.opts.discriminator&&x.discriminator)return;const E=_,C=n.let("valid",!1),T=n.let("passing",null),B=n.name("_valid");r.setParams({passing:T}),n.block(A),r.result(C,()=>r.reset(),()=>r.error(!0));function A(){E.forEach((I,N)=>{let V;(0,util_1$4.alwaysValidSchema)(S,I)?n.var(B,!0):V=r.subschema({keyword:"oneOf",schemaProp:N,compositeRule:!0},B),N>0&&n.if((0,codegen_1$3._)`${B} && ${C}`).assign(C,!1).assign(T,(0,codegen_1$3._)`[${T}, ${N}]`).else(),n.if(B,()=>{n.assign(C,!0),n.assign(T,N),V&&r.mergeEvaluated(V,codegen_1$3.Name)})})}}};oneOf.default=def$5;var allOf={};Object.defineProperty(allOf,"__esModule",{value:!0});const util_1$3=util,def$4={keyword:"allOf",schemaType:"array",code(r){const{gen:n,schema:_,it:x}=r;if(!Array.isArray(_))throw new Error("ajv implementation error");const S=n.name("valid");_.forEach((E,C)=>{if((0,util_1$3.alwaysValidSchema)(x,E))return;const T=r.subschema({keyword:"allOf",schemaProp:C},S);r.ok(S),r.mergeEvaluated(T)})}};allOf.default=def$4;var _if={};Object.defineProperty(_if,"__esModule",{value:!0});const codegen_1$2=codegen,util_1$2=util,error$2={message:({params:r})=>(0,codegen_1$2.str)`must match "${r.ifClause}" schema`,params:({params:r})=>(0,codegen_1$2._)`{failingKeyword: ${r.ifClause}}`},def$3={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:error$2,code(r){const{gen:n,parentSchema:_,it:x}=r;_.then===void 0&&_.else===void 0&&(0,util_1$2.checkStrictMode)(x,'"if" without "then" and "else" is ignored');const S=hasSchema(x,"then"),E=hasSchema(x,"else");if(!S&&!E)return;const C=n.let("valid",!0),T=n.name("_valid");if(B(),r.reset(),S&&E){const I=n.let("ifClause");r.setParams({ifClause:I}),n.if(T,A("then",I),A("else",I))}else S?n.if(T,A("then")):n.if((0,codegen_1$2.not)(T),A("else"));r.pass(C,()=>r.error(!0));function B(){const I=r.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},T);r.mergeEvaluated(I)}function A(I,N){return()=>{const V=r.subschema({keyword:I},T);n.assign(C,T),r.mergeValidEvaluated(V,C),N?n.assign(N,(0,codegen_1$2._)`${I}`):r.setParams({ifClause:I})}}}};function hasSchema(r,n){const _=r.schema[n];return _!==void 0&&!(0,util_1$2.alwaysValidSchema)(r,_)}_if.default=def$3;var thenElse={};Object.defineProperty(thenElse,"__esModule",{value:!0});const util_1$1=util,def$2={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:n,it:_}){n.if===void 0&&(0,util_1$1.checkStrictMode)(_,`"${r}" without "if" is ignored`)}};thenElse.default=def$2;Object.defineProperty(applicator,"__esModule",{value:!0});const additionalItems_1=additionalItems,prefixItems_1=prefixItems,items_1=items,items2020_1=items2020,contains_1=contains,dependencies_1=dependencies,propertyNames_1=propertyNames,additionalProperties_1=additionalProperties,properties_1=properties$1,patternProperties_1=patternProperties,not_1=not,anyOf_1=anyOf,oneOf_1=oneOf,allOf_1=allOf,if_1=_if,thenElse_1=thenElse;function getApplicator(r=!1){const n=[not_1.default,anyOf_1.default,oneOf_1.default,allOf_1.default,if_1.default,thenElse_1.default,propertyNames_1.default,additionalProperties_1.default,dependencies_1.default,properties_1.default,patternProperties_1.default];return r?n.push(prefixItems_1.default,items2020_1.default):n.push(additionalItems_1.default,items_1.default),n.push(contains_1.default),n}applicator.default=getApplicator;var format$2={},format$1={};Object.defineProperty(format$1,"__esModule",{value:!0});const codegen_1$1=codegen,error$1={message:({schemaCode:r})=>(0,codegen_1$1.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,codegen_1$1._)`{format: ${r}}`},def$1={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:error$1,code(r,n){const{gen:_,data:x,$data:S,schema:E,schemaCode:C,it:T}=r,{opts:B,errSchemaPath:A,schemaEnv:I,self:N}=T;if(!B.validateFormats)return;S?V():D();function V(){const O=_.scopeValue("formats",{ref:N.formats,code:B.code.formats}),F=_.const("fDef",(0,codegen_1$1._)`${O}[${C}]`),M=_.let("fType"),L=_.let("format");_.if((0,codegen_1$1._)`typeof ${F} == "object" && !(${F} instanceof RegExp)`,()=>_.assign(M,(0,codegen_1$1._)`${F}.type || "string"`).assign(L,(0,codegen_1$1._)`${F}.validate`),()=>_.assign(M,(0,codegen_1$1._)`"string"`).assign(L,F)),r.fail$data((0,codegen_1$1.or)(j(),q()));function j(){return B.strictSchema===!1?codegen_1$1.nil:(0,codegen_1$1._)`${C} && !${L}`}function q(){const H=I.$async?(0,codegen_1$1._)`(${F}.async ? await ${L}(${x}) : ${L}(${x}))`:(0,codegen_1$1._)`${L}(${x})`,X=(0,codegen_1$1._)`(typeof ${L} == "function" ? ${H} : ${L}.test(${x}))`;return(0,codegen_1$1._)`${L} && ${L} !== true && ${M} === ${n} && !${X}`}}function D(){const O=N.formats[E];if(!O){j();return}if(O===!0)return;const[F,M,L]=q(O);F===n&&r.pass(H());function j(){if(B.strictSchema===!1){N.logger.warn(X());return}throw new Error(X());function X(){return`unknown format "${E}" ignored in schema at path "${A}"`}}function q(X){const J=X instanceof RegExp?(0,codegen_1$1.regexpCode)(X):B.code.formats?(0,codegen_1$1._)`${B.code.formats}${(0,codegen_1$1.getProperty)(E)}`:void 0,Z=_.scopeValue("formats",{key:E,ref:X,code:J});return typeof X=="object"&&!(X instanceof RegExp)?[X.type||"string",X.validate,(0,codegen_1$1._)`${Z}.validate`]:["string",X,Z]}function H(){if(typeof O=="object"&&!(O instanceof RegExp)&&O.async){if(!I.$async)throw new Error("async format in sync schema");return(0,codegen_1$1._)`await ${L}(${x})`}return typeof M=="function"?(0,codegen_1$1._)`${L}(${x})`:(0,codegen_1$1._)`${L}.test(${x})`}}}};format$1.default=def$1;Object.defineProperty(format$2,"__esModule",{value:!0});const format_1$1=format$1,format=[format_1$1.default];format$2.default=format;var metadata={};Object.defineProperty(metadata,"__esModule",{value:!0});metadata.contentVocabulary=metadata.metadataVocabulary=void 0;metadata.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];metadata.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(draft7,"__esModule",{value:!0});const core_1=core$2,validation_1=validation$1,applicator_1=applicator,format_1=format$2,metadata_1=metadata,draft7Vocabularies=[core_1.default,validation_1.default,(0,applicator_1.default)(),format_1.default,metadata_1.metadataVocabulary,metadata_1.contentVocabulary];draft7.default=draft7Vocabularies;var discriminator={},types={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DiscrError=void 0,function(n){n.Tag="tag",n.Mapping="mapping"}(r.DiscrError||(r.DiscrError={}))})(types);Object.defineProperty(discriminator,"__esModule",{value:!0});const codegen_1=codegen,types_1=types,compile_1=compile,util_1=util,error={message:({params:{discrError:r,tagName:n}})=>r===types_1.DiscrError.Tag?`tag "${n}" must be string`:`value of tag "${n}" must be in oneOf`,params:({params:{discrError:r,tag:n,tagName:_}})=>(0,codegen_1._)`{error: ${r}, tag: ${_}, tagValue: ${n}}`},def={keyword:"discriminator",type:"object",schemaType:"object",error,code(r){const{gen:n,data:_,schema:x,parentSchema:S,it:E}=r,{oneOf:C}=S;if(!E.opts.discriminator)throw new Error("discriminator: requires discriminator option");const T=x.propertyName;if(typeof T!="string")throw new Error("discriminator: requires propertyName");if(x.mapping)throw new Error("discriminator: mapping is not supported");if(!C)throw new Error("discriminator: requires oneOf keyword");const B=n.let("valid",!1),A=n.const("tag",(0,codegen_1._)`${_}${(0,codegen_1.getProperty)(T)}`);n.if((0,codegen_1._)`typeof ${A} == "string"`,()=>I(),()=>r.error(!1,{discrError:types_1.DiscrError.Tag,tag:A,tagName:T})),r.ok(B);function I(){const D=V();n.if(!1);for(const O in D)n.elseIf((0,codegen_1._)`${A} === ${O}`),n.assign(B,N(D[O]));n.else(),r.error(!1,{discrError:types_1.DiscrError.Mapping,tag:A,tagName:T}),n.endIf()}function N(D){const O=n.name("valid"),F=r.subschema({keyword:"oneOf",schemaProp:D},O);return r.mergeEvaluated(F,codegen_1.Name),O}function V(){var D;const O={},F=L(S);let M=!0;for(let H=0;H<C.length;H++){let X=C[H];X?.$ref&&!(0,util_1.schemaHasRulesButRef)(X,E.self.RULES)&&(X=compile_1.resolveRef.call(E.self,E.schemaEnv.root,E.baseId,X?.$ref),X instanceof compile_1.SchemaEnv&&(X=X.schema));const J=(D=X?.properties)===null||D===void 0?void 0:D[T];if(typeof J!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${T}"`);M=M&&(F||L(X)),j(J,H)}if(!M)throw new Error(`discriminator: "${T}" must be required`);return O;function L({required:H}){return Array.isArray(H)&&H.includes(T)}function j(H,X){if(H.const)q(H.const,X);else if(H.enum)for(const J of H.enum)q(J,X);else throw new Error(`discriminator: "properties/${T}" must have "const" or "enum"`)}function q(H,X){if(typeof H!="string"||H in O)throw new Error(`discriminator: "${T}" values must be unique strings`);O[H]=X}}}};discriminator.default=def;const $schema="http://json-schema.org/draft-07/schema#",$id="http://json-schema.org/draft-07/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type$1=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3={$schema,$id,title,definitions,type:type$1,properties,default:!0};(function(r,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MissingRefError=n.ValidationError=n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=void 0;const _=core$3,x=draft7,S=discriminator,E=require$$3,C=["/properties"],T="http://json-schema.org/draft-07/schema";class B extends _.default{_addVocabularies(){super._addVocabularies(),x.default.forEach(O=>this.addVocabulary(O)),this.opts.discriminator&&this.addKeyword(S.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const O=this.opts.$data?this.$dataMetaSchema(E,C):E;this.addMetaSchema(O,T,!1),this.refs["http://json-schema.org/schema"]=T}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(T)?T:void 0)}}r.exports=n=B,Object.defineProperty(n,"__esModule",{value:!0}),n.default=B;var A=validate;Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:function(){return A.KeywordCxt}});var I=codegen;Object.defineProperty(n,"_",{enumerable:!0,get:function(){return I._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return I.str}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return I.stringify}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return I.nil}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return I.Name}}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:function(){return I.CodeGen}});var N=validation_error;Object.defineProperty(n,"ValidationError",{enumerable:!0,get:function(){return N.default}});var V=ref_error;Object.defineProperty(n,"MissingRefError",{enumerable:!0,get:function(){return V.default}})})(ajv$1,ajv$1.exports);var ajvExports=ajv$1.exports;const Ajv=getDefaultExportFromCjs(ajvExports),ajv=new Ajv,generateListValidator=r=>({validate:ajv.compile(r)}),generateDictValidator=r=>{const n=ajv.compile(r),_=B=>B===!0?()=>!0:ajv.compile(B),x=Object.fromEntries(Object.entries(r.properties||{}).map(([B,A])=>[B,_(A)])),S=r.additionalProperties?_(r.additionalProperties):()=>!1,E=(B,A)=>C(A)(B),C=B=>x[B]||S;return{validateRoot:n,validateKey:E,getKeyValidator:C,supportedKey:B=>!!x[B]||!!r.additionalProperties}},typedFeed=({db:r,schema:n})=>{const{validate:_}=generateListValidator(n);return new Proxy(r,{get(x,S){return S==="all"?async()=>(await x[S]()).filter(T=>_(T.value)):S==="add"?async E=>{if(_(E))return await x.add(E);throw new Error(E.toString()+JSON.stringify(_.errors,void 0,2))}:x[S]}})},typedKeyValue=({db:r,schema:n})=>{const{validateRoot:_,validateKey:x,getKeyValidator:S,supportedKey:E}=generateDictValidator(n);return new Proxy(r,{get(C,T){return T==="get"?async B=>{if(!E(B))throw new Error(`Unsupported key ${B}.`);const A=await C.get(B);return A===void 0||x(A,B)?A:void 0}:T==="put"||T==="set"?async(B,A)=>{if(!E(B))throw new Error(`Unsupported key ${B}.`);if(x(A,B))return await C.put(B,A);throw new Error(JSON.stringify(S(B).errors,void 0,2))}:T==="all"?async()=>(await C.all()).filter(A=>x(A.value,A.key)):T==="allAsJSON"?async()=>{const B=await C.all(),A=Object.fromEntries(B.map(N=>[N.key,N.value]));if(_(A))return A;throw new Error(JSON.stringify(_.errors,void 0,2))}:C[T]}})},typedOrderedKeyValue=({db:r,schema:n})=>{const{validateKey:_,getKeyValidator:x,supportedKey:S}=generateDictValidator(n);return new Proxy(r,{get(E,C){return C==="get"?async T=>{if(!S(T))throw new Error(`Unsupported key ${T}.`);const B=await E.get(T);if(B===void 0)return B;const{value:A,position:I}=B;return _(A,T)?{value:A,position:I}:void 0}:C==="move"?async(T,B)=>{if(!S(T))throw new Error(`Unsupported key ${T}.`);return await E.move(T,B)}:C==="put"||C==="set"?async(T,B,A)=>{if(!S(T))throw new Error(`Unsupported key ${T}.`);if(_(B,T))return await E.put(T,B,A);throw new Error(JSON.stringify(x(T).errors,void 0,2))}:C==="all"?async()=>(await E.all()).filter(B=>_(B.value,B.key)):E[C]}})},typedSet=({db:r,schema:n})=>{const{validate:_}=generateListValidator(n);return new Proxy(r,{get(x,S){return S==="all"?async()=>(await x[S]()).filter(T=>_(T.value)):S==="add"?async E=>{if(_(E))return await x.add(E);throw new Error(E.toString()+JSON.stringify(_.errors,void 0,2))}:x[S]}})};class e{constructor(n){this.queue=void 0,this.maxConcurrent=void 0,this.count=void 0,this.queue=[],this.maxConcurrent=n,this.count=0}get canAcquire(){return this.count<this.maxConcurrent}acquire(){return this.canAcquire?(this.count++,Promise.resolve()):new Promise(n=>this.queue.push(n))}release(){const n=this.queue.shift();n?setTimeout(n,0):this.count--}}const t="_default";class s{constructor(n=1){this.semaphoreInstances=void 0,this.maxConcurrent=void 0,this.semaphoreInstances={},this.maxConcurrent=n}hasSemaphoreInstance(n=t){return!!this.semaphoreInstances[n]}getSemaphoreInstance(n=t){return this.hasSemaphoreInstance(n)||(this.semaphoreInstances[n]=new e(this.maxConcurrent)),this.semaphoreInstances[n]}tidy(n=t){this.hasSemaphoreInstance(n)&&this.getSemaphoreInstance(n).count==0&&delete this.semaphoreInstances[n]}canAcquire(n=t){return this.getSemaphoreInstance(n).canAcquire}acquire(n=t){return this.getSemaphoreInstance(n).acquire()}release(n=t){this.getSemaphoreInstance(n).release(),this.tidy(n)}count(n=t){return this.hasSemaphoreInstance(n)?this.getSemaphoreInstance(n).count:0}hasTasks(n=t){return this.count(n)>0}async request(n,_=t){try{return await this.acquire(_),await n()}finally{this.release(_)}}async requestIfAvailable(n,_=t){return this.canAcquire(_)?this.request(n,_):null}}const prparerOrbite=()=>{enregistrerContrleurs(),registerAll()};async function initOrbite({sfip:r,dossierOrbite:n}){let _=n;if(isElectronMain||isNode){const S=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0);_=n||S.join(".","orbite")}else _=n||"./orbite";return prparerOrbite(),await OrbitDB({ipfs:r,directory:_})}const typerBd=({bd:r,schma:n})=>{switch(r.type){case"feed":return typedFeed({db:r,schema:n});case"set":return typedSet({db:r,schema:n});case"keyvalue":return typedKeyValue({db:r,schema:n});case"ordered-keyvalue":return typedOrderedKeyValue({db:r,schema:n});default:throw new Error("Type de bd non reconnu.")}};class GestionnaireOrbite{constructor(n){_t(this,"orbite");_t(this,"_bdsOrbite");_t(this,"verrouOuvertureBd");_t(this,"_oublierNettoyageBdsOuvertes");this.orbite=n,this._bdsOrbite={},this.verrouOuvertureBd=new s,this._oublierNettoyageBdsOuvertes=this.lancerNettoyageBdsOuvertes()}get identity(){return this.orbite.identity}async ouvrirBd({id:n,type:_,options:x}){await this.verrouOuvertureBd.acquire(n);const S=this._bdsOrbite[n],E=v4$1(),C=async()=>{this._bdsOrbite[n]&&this._bdsOrbite[n].idsRequtes.delete(E)},T=B=>{const{type:A}=B;return _===void 0?!0:A===_};if(S){if(this._bdsOrbite[n].idsRequtes.add(E),this.verrouOuvertureBd.release(n),!T(S.bd))throw new Error(`La bd est de type ${S.bd.type}, et non ${_}.`);return{bd:S.bd,fOublier:C}}try{const B=await this.orbite.open(n,{type:_,...x});return this._bdsOrbite[n]={bd:B,idsRequtes:new Set([E])},this.verrouOuvertureBd.release(n),{bd:B,fOublier:C}}catch(B){throw console.error(B.toString()),B}}async ouvrirBdType({id:n,type:_,schma:x,options:S}){const{bd:E,fOublier:C}=await this.ouvrirBd({id:n,type:_,options:S});return{bd:typerBd({bd:E,schma:x}),fOublier:C}}async crerBdIndpendante({type:n,options:_,nom:x}){const S=await this.orbite.open(x||v4$1(),{type:n,..._}),{address:E}=S;return this._bdsOrbite[E]={bd:S,idsRequtes:new Set},E}async effacerBd({id:n}){const{bd:_}=await this.ouvrirBd({id:n});await _.drop(),delete this._bdsOrbite[n]}lancerNettoyageBdsOuvertes(){const _=setInterval(async()=>{await Promise.all(Object.keys(this._bdsOrbite).map(async x=>{const{bd:S,idsRequtes:E}=this._bdsOrbite[x];E.size||(delete this._bdsOrbite[x],await S.close())}))},3e5);return async()=>clearInterval(_)}async fermer({arrterOrbite:n}){this._oublierNettoyageBdsOuvertes&&this._oublierNettoyageBdsOuvertes(),n&&await this.orbite.stop()}}class GestionnaireOrbiteGnral{constructor(){_t(this,"gestionnaires");this.gestionnaires={}}obtGestionnaireOrbite({orbite:n}){return this.gestionnaires[n.identity.id]||(this.gestionnaires[n.identity.id]=new GestionnaireOrbite(n)),this.gestionnaires[n.identity.id]}async fermer({orbite:n,arrterOrbite:_}){await this.obtGestionnaireOrbite({orbite:n}).fermer({arrterOrbite:_}),delete this.gestionnaires[n.identity.id]}}const gestionnaireOrbiteGnral=new GestionnaireOrbiteGnral,orbite=Object.freeze(Object.defineProperty({__proto__:null,GestionnaireOrbite,GestionnaireOrbiteGnral,default:initOrbite,gestionnaireOrbiteGnral,prparerOrbite},Symbol.toStringTag,{value:"Module"})),suivreBdAccs=async(r,n)=>{const _=async()=>{const S=await r.all();await n(S.map(E=>E.value))};return r.events.setMaxListeners(100),r.events.on("update",_),await _(),async()=>{r.events.off("update",_)}};class AccsUtilisateur extends eventsExports.EventEmitter{constructor(_,x){super();_t(this,"orbite");_t(this,"idBd");_t(this,"idBdAccs");_t(this,"bdAccs");_t(this,"fOublierBd");_t(this,"oublierSuivi");_t(this,"autoriss");_t(this,"accs");_t(this,"idRequte");_t(this,"prt");this.orbite=gestionnaireOrbiteGnral.obtGestionnaireOrbite({orbite:_}),this.idBd=x,this.autoriss=[],this.idRequte=v4$1(),this.prt=!1}async initialiser(){const{bd:_,fOublier:x}=await this.orbite.ouvrirBd({id:this.idBd});this.fOublierBd=x,this.accs=_.access,this.bdAccs=this.accs.bd,this.idBdAccs=this.bdAccs?.address,await this._miseJour([]),this.oublierSuivi=await suivreBdAccs(this.bdAccs,async S=>{await this._miseJour(S)}),this.prt=!0}async _miseJour(_){const x=[];_=[{id:this.accs.write,rle:MODRATEUR},..._],_.forEach(S=>{x.push(S.id)}),this.autoriss=x,this.emit("misJour")}async fermer(){this.oublierSuivi&&await this.oublierSuivi(),await this.fOublierBd?.()}}class GestionnaireAccs extends eventsExports.EventEmitter{constructor(_){super();_t(this,"_rles");_t(this,"_rlesIdOrbite");_t(this,"_rlesUtilisateurs");_t(this,"_miseJourEnCours");_t(this,"orbite");this._rles={[MODRATEUR]:[],[MEMBRE]:[]},this._rlesIdOrbite={[MODRATEUR]:[],[MEMBRE]:[]},this._rlesUtilisateurs={[MODRATEUR]:{},[MEMBRE]:{}},this._miseJourEnCours=!1,this.orbite=_}async estUnMembre(_){return this._miseJourEnCours&&await once_1(this,"misJour"),this._rles[MEMBRE].includes(_)}async estUnModrateur(_){return this._miseJourEnCours&&await once_1(this,"misJour"),this._rles[MODRATEUR].includes(_)}async estAutoris(_){return await this.estUnModrateur(_)||await this.estUnMembre(_)}async ajouterlments(_){this._miseJourEnCours=!0,await Promise.all(_.map(async x=>{const{rle:S,id:E}=x;if(isValidAddress(E)){if(!this._rlesUtilisateurs[S][E]){const C=new AccsUtilisateur(this.orbite,E);C.on("misJour",()=>this._mettreRlesJour()),this._rlesUtilisateurs[S][E]=C,await C.initialiser()}}else this._rlesIdOrbite[S].includes(E)||(this._rlesIdOrbite[S].push(E),this._mettreRlesJour())})),this._miseJourEnCours=!1,this._mettreRlesJour(),this.emit("misJour")}_mettreRlesJour(){const _={MODRATEUR:[],MEMBRE:[]};for(const[x,S]of Object.entries(this._rlesIdOrbite)){const E=_[x];S.forEach(C=>{E.includes(C)||E.push(C)})}for(const[x,S]of Object.entries(this._rlesUtilisateurs)){const E=_[x];Object.values(S).forEach(C=>{C.autoriss.forEach(T=>{E.includes(T)||E.push(T)})})}this._rles=_}async fermer(){const _=Object.values(this._rlesUtilisateurs).map(x=>Object.values(x)).flat();await Promise.all(_.map(x=>x.fermer()))}}const pathJoin=(...r)=>r.join("/").replace(/((?<=\/)\/+)|(^\.\/)|((?<=\/)\.\/)/g,"")||".",estUnContrleurConstellation=r=>r.type===nomType,type="contrleur-accs-constellation",codec$2=dagCbor,hasher$1=sha256$2,hashStringEncoding$1=base58btc$3,PremierModrateur=async({storage:r,type:n,params:_})=>{const x={type:n,..._},{cid:S,bytes:E}=await encode$b({value:x,codec:codec$2,hasher:hasher$1}),C=S.toString(hashStringEncoding$1);return await r.put(C,E),C},ContrleurAccs=({write:r,storage:n}={})=>async({orbitdb:_,identities:x,address:S})=>{n=n||await ComposedStorage(await LRUStorage({size:1e3}),await IPFSBlockStorage({ipfs:_.ipfs,pin:!0})),r=r||_.identity.id;const E=new GestionnaireAccs(_);if(S){const B=await n.get(S.replaceAll("/contrleur-accs-constellation/","")),{value:A}=await decode$a({bytes:B,codec:codec$2,hasher:hasher$1});({write:r}=A)}else S=await PremierModrateur({storage:n,type,params:{write:r}}),S=pathJoin("/",type,S);await E.ajouterlments([{id:r,rle:MODRATEUR}]);const C=async B=>{if(B.payload.op!=="ADD"||!B.payload.value)return!1;const{rle:A,id:I}=B.payload.value,N=rles.includes(A),V=await x.getIdentity(B.identity);if(!V)return!1;const{id:D}=V;return N&&await T(D,B)&&x.verifyIdentity(V)?(A===MODRATEUR&&await E.ajouterlments([{id:I,rle:MODRATEUR}]),!0):!1},T=async(B,A)=>{if(await E.estUnModrateur(B))return!0;const I=A.next;for(const N of I){const V=await n?.get(N),D=await Entry.decode(V);if(await C(D)&&await E.estUnModrateur(B))return!0}return!1};return{type,address:S,write:r,canAppend:C}};ContrleurAccs.type=type;const nomType="contrleur-constellation",codec$1=dagCbor,hasher=sha256$2,hashStringEncoding=base58btc$3,schmaBdAccs={type:"object",properties:{rle:{type:"string"},id:{type:"string"}},required:["rle","id"]},ManifestContrleurConstellation=async({storage:r,type:n,params:_})=>{const x={type:n,..._},{cid:S,bytes:E}=await encode$b({value:x,codec:codec$1,hasher}),C=S.toString(hashStringEncoding);return await r.put(C,E),C},ContrleurConstellation=({write:r,nom:n,storage:_}={})=>async({orbitdb:x,identities:S,address:E})=>{r=r||x.identity.id,n=n||v4$1(),_=_||await ComposedStorage(await LRUStorage({size:1e3}),await IPFSBlockStorage({ipfs:x.ipfs,pin:!0}));const C=gestionnaireOrbiteGnral.obtGestionnaireOrbite({orbite:x});let T,B,A;if(E){const ae=await _.get(E.replaceAll(`/${nomType}/`,"")),{value:ce}=await decode$a({bytes:ae,codec:codec$1,hasher});({write:r,nom:n,adresseBdAccs:T}=ce),{bd:B,fOublier:A}=await C.ouvrirBdType({id:T,type:"set",schma:schmaBdAccs,options:{syncAutomatically:!0}})}else({bd:B,fOublier:A}=await C.ouvrirBdType({id:n,type:"set",schma:schmaBdAccs,options:{AccessController:ContrleurAccs({write:r,storage:_}),syncAutomatically:!0}})),T=B.address,E=await ManifestContrleurConstellation({storage:_,type:nomType,params:{write:r,nom:n,adresseBdAccs:T}}),E=pathJoin("/",nomType,E);const I=new eventsExports.EventEmitter,N=new GestionnaireAccs(x);N.on("misJour",()=>I.emit("misJour"));const D=await suivreBdAccs(B,async ae=>{ae=[{rle:MODRATEUR,id:r},...ae],await N.ajouterlments(ae)}),O=async ae=>await N.estAutoris(ae);return{type:nomType,address:E,adresseBdAccs:T,write:r,grant:async(ae,ce)=>{if(!rles.includes(ae))throw new Error(`Erreur: Le rle ${ae} n'existe pas.`);if(!N._rles[ae].includes(ce))try{const ve={rle:ae,id:ce};await B.add(ve)}catch(ve){const pe=ve;throw pe.toString().includes("not append entry")?new Error(`Erreur : Le rle ${ae} ne peut pas tre octroy  ${ce}.`):pe}},revoke:async(ae,ce)=>{throw new Error("C'est trs difficile  implmenter...avez-vous des ides ?")},canAppend:async ae=>{const ce=await S.getIdentity(ae.identity);if(!ce)return!1;const{id:ve}=ce;return S.verifyIdentity(ce)&&await O(ve)},close:async()=>{await D(),await A(),await N.fermer()},drop:async()=>{await B.drop()},suivreUtilisateursAutoriss:async ae=>{const ce=async()=>{const pe=Object.keys(N._rlesUtilisateurs[MODRATEUR]).map(W=>({idCompte:W,rle:MODRATEUR})),G=pe.map(W=>W.idCompte),Y=Object.keys(N._rlesUtilisateurs[MEMBRE]).map(W=>({idCompte:W,rle:MEMBRE})).filter(W=>!G.includes(W.idCompte)),U=[...pe,...Y];await ae(U)};return N.on("misJour",ce),await ce(),async()=>{N.off("misJour",ce)}},suivreIdsOrbiteAutorisescriture:async ae=>{const ce=async()=>{await ae([...N._rles.MEMBRE,...N._rles.MODRATEUR])};return N.on("misJour",ce),await ce(),async()=>{N.off("misJour",ce)}},gestRles:N,estAutoris:O,estUnMembre:async ae=>await N.estUnMembre(ae),estUnModrateur:async ae=>await N.estUnModrateur(ae),bd:B}};ContrleurConstellation.type=nomType;const enregistrerContrleurs=()=>{console.log("on enregistre les contrleurs"),useAccessController(ContrleurConstellation),useAccessController(ContrleurAccs)};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var XLSX={};XLSX.version="0.19.1";var current_codepage=1200,$cptable,VALID_ANSI=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],CS2CP={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},set_ansi=function(r){VALID_ANSI.indexOf(r)!=-1&&(CS2CP[0]=r)};function reset_ansi(){set_ansi(1252)}var set_cp=function(r){current_codepage=r,set_ansi(r)};function reset_cp(){set_cp(1200),reset_ansi()}function char_codes(r){for(var n=[],_=0,x=r.length;_<x;++_)n[_]=r.charCodeAt(_);return n}function utf16leread(r){for(var n=[],_=0;_<r.length>>1;++_)n[_]=String.fromCharCode(r.charCodeAt(2*_)+(r.charCodeAt(2*_+1)<<8));return n.join("")}function utf16beread(r){for(var n=[],_=0;_<r.length>>1;++_)n[_]=String.fromCharCode(r.charCodeAt(2*_+1)+(r.charCodeAt(2*_)<<8));return n.join("")}var debom=function(r){var n=r.charCodeAt(0),_=r.charCodeAt(1);return n==255&&_==254?utf16leread(r.slice(2)):n==254&&_==255?utf16beread(r.slice(2)):n==65279?r.slice(1):r},_getchar=function r(n){return String.fromCharCode(n)},_getansi=function r(n){return String.fromCharCode(n)},DENSE=null,Base64_map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Base64_encode(r){for(var n="",_=0,x=0,S=0,E=0,C=0,T=0,B=0,A=0;A<r.length;)_=r.charCodeAt(A++),E=_>>2,x=r.charCodeAt(A++),C=(_&3)<<4|x>>4,S=r.charCodeAt(A++),T=(x&15)<<2|S>>6,B=S&63,isNaN(x)?T=B=64:isNaN(S)&&(B=64),n+=Base64_map.charAt(E)+Base64_map.charAt(C)+Base64_map.charAt(T)+Base64_map.charAt(B);return n}function Base64_encode_pass(r){for(var n="",_=0,x=0,S=0,E=0,C=0,T=0,B=0,A=0;A<r.length;)_=r.charCodeAt(A++),_>255&&(_=95),E=_>>2,x=r.charCodeAt(A++),x>255&&(x=95),C=(_&3)<<4|x>>4,S=r.charCodeAt(A++),S>255&&(S=95),T=(x&15)<<2|S>>6,B=S&63,isNaN(x)?T=B=64:isNaN(S)&&(B=64),n+=Base64_map.charAt(E)+Base64_map.charAt(C)+Base64_map.charAt(T)+Base64_map.charAt(B);return n}function Base64_decode(r){var n="",_=0,x=0,S=0,E=0,C=0,T=0,B=0;r=r.replace(/^data:([^\/]+\/[^\/]+)?;base64\,/,"").replace(/[^\w\+\/\=]/g,"");for(var A=0;A<r.length;)E=Base64_map.indexOf(r.charAt(A++)),C=Base64_map.indexOf(r.charAt(A++)),_=E<<2|C>>4,n+=String.fromCharCode(_),T=Base64_map.indexOf(r.charAt(A++)),x=(C&15)<<4|T>>2,T!==64&&(n+=String.fromCharCode(x)),B=Base64_map.indexOf(r.charAt(A++)),S=(T&3)<<6|B,B!==64&&(n+=String.fromCharCode(S));return n}var has_buf=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Buffer_from=function(){if(typeof Buffer<"u"){var r=!Buffer.from;if(!r)try{Buffer.from("foo","utf8")}catch{r=!0}return r?function(n,_){return _?new Buffer(n,_):new Buffer(n)}:Buffer.from.bind(Buffer)}return function(){}}(),buf_utf16le=function(){if(typeof Buffer>"u")return!1;var r=Buffer_from([65,0]);if(!r)return!1;var n=r.toString("utf16le");return n.length==1}();function new_raw_buf(r){return has_buf?Buffer.alloc?Buffer.alloc(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}function new_unsafe_buf(r){return has_buf?Buffer.allocUnsafe?Buffer.allocUnsafe(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}var s2a=function r(n){return has_buf?Buffer_from(n,"binary"):n.split("").map(function(_){return _.charCodeAt(0)&255})};function s2ab(r){if(typeof ArrayBuffer>"u")return s2a(r);for(var n=new ArrayBuffer(r.length),_=new Uint8Array(n),x=0;x!=r.length;++x)_[x]=r.charCodeAt(x)&255;return n}function a2s(r){if(Array.isArray(r))return r.map(function(x){return String.fromCharCode(x)}).join("");for(var n=[],_=0;_<r.length;++_)n[_]=String.fromCharCode(r[_]);return n.join("")}function a2u(r){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(r)}function ab2a(r){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(r instanceof ArrayBuffer)return ab2a(new Uint8Array(r));for(var n=new Array(r.length),_=0;_<r.length;++_)n[_]=r[_];return n}var bconcat=has_buf?function(r){return Buffer.concat(r.map(function(n){return Buffer.isBuffer(n)?n:Buffer_from(n)}))}:function(r){if(typeof Uint8Array<"u"){var n=0,_=0;for(n=0;n<r.length;++n)_+=r[n].length;var x=new Uint8Array(_),S=0;for(n=0,_=0;n<r.length;_+=S,++n)S=r[n].length,r[n]instanceof Uint8Array?x.set(r[n],_):typeof r[n]=="string"?x.set(new Uint8Array(s2a(r[n])),_):x.set(new Uint8Array(r[n]),_);return x}return[].concat.apply([],r.map(function(E){return Array.isArray(E)?E:[].slice.call(E)}))};function utf8decode(r){for(var n=[],_=0,x=r.length+250,S=new_raw_buf(r.length+255),E=0;E<r.length;++E){var C=r.charCodeAt(E);if(C<128)S[_++]=C;else if(C<2048)S[_++]=192|C>>6&31,S[_++]=128|C&63;else if(C>=55296&&C<57344){C=(C&1023)+64;var T=r.charCodeAt(++E)&1023;S[_++]=240|C>>8&7,S[_++]=128|C>>2&63,S[_++]=128|T>>6&15|(C&3)<<4,S[_++]=128|T&63}else S[_++]=224|C>>12&15,S[_++]=128|C>>6&63,S[_++]=128|C&63;_>x&&(n.push(S.slice(0,_)),_=0,S=new_raw_buf(65535),x=65530)}return n.push(S.slice(0,_)),bconcat(n)}var chr0=/\u0000/g,chr1=/[\u0001-\u0006]/g;function _strrev(r){for(var n="",_=r.length-1;_>=0;)n+=r.charAt(_--);return n}function pad0(r,n){var _=""+r;return _.length>=n?_:fill("0",n-_.length)+_}function pad_(r,n){var _=""+r;return _.length>=n?_:fill(" ",n-_.length)+_}function rpad_(r,n){var _=""+r;return _.length>=n?_:_+fill(" ",n-_.length)}function pad0r1(r,n){var _=""+Math.round(r);return _.length>=n?_:fill("0",n-_.length)+_}function pad0r2(r,n){var _=""+r;return _.length>=n?_:fill("0",n-_.length)+_}var p2_32=Math.pow(2,32);function pad0r(r,n){if(r>p2_32||r<-p2_32)return pad0r1(r,n);var _=Math.round(r);return pad0r2(_,n)}function SSF_isgeneral(r,n){return n=n||0,r.length>=7+n&&(r.charCodeAt(n)|32)===103&&(r.charCodeAt(n+1)|32)===101&&(r.charCodeAt(n+2)|32)===110&&(r.charCodeAt(n+3)|32)===101&&(r.charCodeAt(n+4)|32)===114&&(r.charCodeAt(n+5)|32)===97&&(r.charCodeAt(n+6)|32)===108}var days=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],months=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function SSF_init_table(r){return r||(r={}),r[0]="General",r[1]="0",r[2]="0.00",r[3]="#,##0",r[4]="#,##0.00",r[9]="0%",r[10]="0.00%",r[11]="0.00E+00",r[12]="# ?/?",r[13]="# ??/??",r[14]="m/d/yy",r[15]="d-mmm-yy",r[16]="d-mmm",r[17]="mmm-yy",r[18]="h:mm AM/PM",r[19]="h:mm:ss AM/PM",r[20]="h:mm",r[21]="h:mm:ss",r[22]="m/d/yy h:mm",r[37]="#,##0 ;(#,##0)",r[38]="#,##0 ;[Red](#,##0)",r[39]="#,##0.00;(#,##0.00)",r[40]="#,##0.00;[Red](#,##0.00)",r[45]="mm:ss",r[46]="[h]:mm:ss",r[47]="mmss.0",r[48]="##0.0E+0",r[49]="@",r[56]='"/ "hh""mm""ss" "',r}var table_fmt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},SSF_default_map={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SSF_default_str={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function SSF_frac(r,n,_){for(var x=r<0?-1:1,S=r*x,E=0,C=1,T=0,B=1,A=0,I=0,N=Math.floor(S);A<n&&(N=Math.floor(S),T=N*C+E,I=N*A+B,!(S-N<5e-8));)S=1/(S-N),E=C,C=T,B=A,A=I;if(I>n&&(A>n?(I=B,T=E):(I=A,T=C)),!_)return[0,x*T,I];var V=Math.floor(x*T/I);return[V,x*T-V*I,I]}function SSF_parse_date_code(r,n,_){if(r>2958465||r<0)return null;var x=r|0,S=Math.floor(86400*(r-x)),E=0,C=[],T={D:x,T:S,u:86400*(r-x)-S,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(T.u)<1e-6&&(T.u=0),n&&n.date1904&&(x+=1462),T.u>.9999&&(T.u=0,++S==86400&&(T.T=S=0,++x,++T.D)),x===60)C=_?[1317,10,29]:[1900,2,29],E=3;else if(x===0)C=_?[1317,8,29]:[1900,1,0],E=6;else{x>60&&--x;var B=new Date(1900,0,1);B.setDate(B.getDate()+x-1),C=[B.getFullYear(),B.getMonth()+1,B.getDate()],E=B.getDay(),x<60&&(E=(E+6)%7),_&&(E=SSF_fix_hijri(B,C))}return T.y=C[0],T.m=C[1],T.d=C[2],T.S=S%60,S=Math.floor(S/60),T.M=S%60,S=Math.floor(S/60),T.H=S,T.q=E,T}var SSFbasedate=new Date(1899,11,31,0,0,0),SSFdnthresh=SSFbasedate.getTime(),SSFbase1904=new Date(1900,2,1,0,0,0);function datenum_local(r,n){var _=r.getTime();return n?_-=1461*24*60*60*1e3:r>=SSFbase1904&&(_+=24*60*60*1e3),(_-(SSFdnthresh+(r.getTimezoneOffset()-SSFbasedate.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function SSF_strip_decimal(r){return r.indexOf(".")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function SSF_normalize_exp(r){return r.indexOf("E")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function SSF_small_exp(r){var n=r<0?12:11,_=SSF_strip_decimal(r.toFixed(12));return _.length<=n||(_=r.toPrecision(10),_.length<=n)?_:r.toExponential(5)}function SSF_large_exp(r){var n=SSF_strip_decimal(r.toFixed(11));return n.length>(r<0?12:11)||n==="0"||n==="-0"?r.toPrecision(6):n}function SSF_general_num(r){var n=Math.floor(Math.log(Math.abs(r))*Math.LOG10E),_;return n>=-4&&n<=-1?_=r.toPrecision(10+n):Math.abs(n)<=9?_=SSF_small_exp(r):n===10?_=r.toFixed(10).substr(0,12):_=SSF_large_exp(r),SSF_strip_decimal(SSF_normalize_exp(_.toUpperCase()))}function SSF_general(r,n){switch(typeof r){case"string":return r;case"boolean":return r?"TRUE":"FALSE";case"number":return(r|0)===r?r.toString(10):SSF_general_num(r);case"undefined":return"";case"object":if(r==null)return"";if(r instanceof Date)return SSF_format(14,datenum_local(r,n&&n.date1904),n)}throw new Error("unsupported value in General format: "+r)}function SSF_fix_hijri(r,n){n[0]-=581;var _=r.getDay();return r<60&&(_=(_+6)%7),_}function SSF_write_date(r,n,_,x){var S="",E=0,C=0,T=_.y,B,A=0;switch(r){case 98:T=_.y+543;case 121:switch(n.length){case 1:case 2:B=T%100,A=2;break;default:B=T%1e4,A=4;break}break;case 109:switch(n.length){case 1:case 2:B=_.m,A=n.length;break;case 3:return months[_.m-1][1];case 5:return months[_.m-1][0];default:return months[_.m-1][2]}break;case 100:switch(n.length){case 1:case 2:B=_.d,A=n.length;break;case 3:return days[_.q][0];default:return days[_.q][1]}break;case 104:switch(n.length){case 1:case 2:B=1+(_.H+11)%12,A=n.length;break;default:throw"bad hour format: "+n}break;case 72:switch(n.length){case 1:case 2:B=_.H,A=n.length;break;default:throw"bad hour format: "+n}break;case 77:switch(n.length){case 1:case 2:B=_.M,A=n.length;break;default:throw"bad minute format: "+n}break;case 115:if(n!="s"&&n!="ss"&&n!=".0"&&n!=".00"&&n!=".000")throw"bad second format: "+n;return _.u===0&&(n=="s"||n=="ss")?pad0(_.S,n.length):(x>=2?C=x===3?1e3:100:C=x===1?10:1,E=Math.round(C*(_.S+_.u)),E>=60*C&&(E=0),n==="s"?E===0?"0":""+E/C:(S=pad0(E,2+x),n==="ss"?S.substr(0,2):"."+S.substr(2,n.length-1)));case 90:switch(n){case"[h]":case"[hh]":B=_.D*24+_.H;break;case"[m]":case"[mm]":B=(_.D*24+_.H)*60+_.M;break;case"[s]":case"[ss]":B=((_.D*24+_.H)*60+_.M)*60+Math.round(_.S+_.u);break;default:throw"bad abstime format: "+n}A=n.length===3?1:2;break;case 101:B=T,A=1;break}var I=A>0?pad0(B,A):"";return I}function commaify(r){var n=3;if(r.length<=n)return r;for(var _=r.length%n,x=r.substr(0,_);_!=r.length;_+=n)x+=(x.length>0?",":"")+r.substr(_,n);return x}var pct1=/%/g;function write_num_pct(r,n,_){var x=n.replace(pct1,""),S=n.length-x.length;return write_num(r,x,_*Math.pow(10,2*S))+fill("%",S)}function write_num_cm(r,n,_){for(var x=n.length-1;n.charCodeAt(x-1)===44;)--x;return write_num(r,n.substr(0,x),_/Math.pow(10,3*(n.length-x)))}function write_num_exp(r,n){var _,x=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(n==0)return"0.0E+0";if(n<0)return"-"+write_num_exp(r,-n);var S=r.indexOf(".");S===-1&&(S=r.indexOf("E"));var E=Math.floor(Math.log(n)*Math.LOG10E)%S;if(E<0&&(E+=S),_=(n/Math.pow(10,E)).toPrecision(x+1+(S+E)%S),_.indexOf("e")===-1){var C=Math.floor(Math.log(n)*Math.LOG10E);for(_.indexOf(".")===-1?_=_.charAt(0)+"."+_.substr(1)+"E+"+(C-_.length+E):_+="E+"+(C-E);_.substr(0,2)==="0.";)_=_.charAt(0)+_.substr(2,S)+"."+_.substr(2+S),_=_.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");_=_.replace(/\+-/,"-")}_=_.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(T,B,A,I){return B+A+I.substr(0,(S+E)%S)+"."+I.substr(E)+"E"})}else _=n.toExponential(x);return r.match(/E\+00$/)&&_.match(/e[+-]\d$/)&&(_=_.substr(0,_.length-1)+"0"+_.charAt(_.length-1)),r.match(/E\-/)&&_.match(/e\+/)&&(_=_.replace(/e\+/,"e")),_.replace("e","E")}var frac1=/# (\?+)( ?)\/( ?)(\d+)/;function write_num_f1(r,n,_){var x=parseInt(r[4],10),S=Math.round(n*x),E=Math.floor(S/x),C=S-E*x,T=x;return _+(E===0?"":""+E)+" "+(C===0?fill(" ",r[1].length+1+r[4].length):pad_(C,r[1].length)+r[2]+"/"+r[3]+pad0(T,r[4].length))}function write_num_f2(r,n,_){return _+(n===0?"":""+n)+fill(" ",r[1].length+2+r[4].length)}var dec1=/^#*0*\.([0#]+)/,closeparen=/\).*[0#]/,phone=/\(###\) ###\\?-####/;function hashq(r){for(var n="",_,x=0;x!=r.length;++x)switch(_=r.charCodeAt(x)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(_)}return n}function rnd(r,n){var _=Math.pow(10,n);return""+Math.round(r*_)/_}function dec(r,n){var _=r-Math.floor(r),x=Math.pow(10,n);return n<(""+Math.round(_*x)).length?0:Math.round(_*x)}function carry(r,n){return n<(""+Math.round((r-Math.floor(r))*Math.pow(10,n))).length?1:0}function flr(r){return r<2147483647&&r>-2147483648?""+(r>=0?r|0:r-1|0):""+Math.floor(r)}function write_num_flt(r,n,_){if(r.charCodeAt(0)===40&&!n.match(closeparen)){var x=n.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return _>=0?write_num_flt("n",x,_):"("+write_num_flt("n",x,-_)+")"}if(n.charCodeAt(n.length-1)===44)return write_num_cm(r,n,_);if(n.indexOf("%")!==-1)return write_num_pct(r,n,_);if(n.indexOf("E")!==-1)return write_num_exp(n,_);if(n.charCodeAt(0)===36)return"$"+write_num_flt(r,n.substr(n.charAt(1)==" "?2:1),_);var S,E,C,T,B=Math.abs(_),A=_<0?"-":"";if(n.match(/^00+$/))return A+pad0r(B,n.length);if(n.match(/^[#?]+$/))return S=pad0r(_,0),S==="0"&&(S=""),S.length>n.length?S:hashq(n.substr(0,n.length-S.length))+S;if(E=n.match(frac1))return write_num_f1(E,B,A);if(n.match(/^#+0+$/))return A+pad0r(B,n.length-n.indexOf("0"));if(E=n.match(dec1))return S=rnd(_,E[1].length).replace(/^([^\.]+)$/,"$1."+hashq(E[1])).replace(/\.$/,"."+hashq(E[1])).replace(/\.(\d*)$/,function(O,F){return"."+F+fill("0",hashq(E[1]).length-F.length)}),n.indexOf("0.")!==-1?S:S.replace(/^0\./,".");if(n=n.replace(/^#+([0.])/,"$1"),E=n.match(/^(0*)\.(#*)$/))return A+rnd(B,E[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,E[1].length?"0.":".");if(E=n.match(/^#{1,3},##0(\.?)$/))return A+commaify(pad0r(B,0));if(E=n.match(/^#,##0\.([#0]*0)$/))return _<0?"-"+write_num_flt(r,n,-_):commaify(""+(Math.floor(_)+carry(_,E[1].length)))+"."+pad0(dec(_,E[1].length),E[1].length);if(E=n.match(/^#,#*,#0/))return write_num_flt(r,n.replace(/^#,#*,/,""),_);if(E=n.match(/^([0#]+)(\\?-([0#]+))+$/))return S=_strrev(write_num_flt(r,n.replace(/[\\-]/g,""),_)),C=0,_strrev(_strrev(n.replace(/\\/g,"")).replace(/[0#]/g,function(O){return C<S.length?S.charAt(C++):O==="0"?"0":""}));if(n.match(phone))return S=write_num_flt(r,"##########",_),"("+S.substr(0,3)+") "+S.substr(3,3)+"-"+S.substr(6);var I="";if(E=n.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return C=Math.min(E[4].length,7),T=SSF_frac(B,Math.pow(10,C)-1,!1),S=""+A,I=write_num("n",E[1],T[1]),I.charAt(I.length-1)==" "&&(I=I.substr(0,I.length-1)+"0"),S+=I+E[2]+"/"+E[3],I=rpad_(T[2],C),I.length<E[4].length&&(I=hashq(E[4].substr(E[4].length-I.length))+I),S+=I,S;if(E=n.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return C=Math.min(Math.max(E[1].length,E[4].length),7),T=SSF_frac(B,Math.pow(10,C)-1,!0),A+(T[0]||(T[1]?"":"0"))+" "+(T[1]?pad_(T[1],C)+E[2]+"/"+E[3]+rpad_(T[2],C):fill(" ",2*C+1+E[2].length+E[3].length));if(E=n.match(/^[#0?]+$/))return S=pad0r(_,0),n.length<=S.length?S:hashq(n.substr(0,n.length-S.length))+S;if(E=n.match(/^([#0?]+)\.([#0]+)$/)){S=""+_.toFixed(Math.min(E[2].length,10)).replace(/([^0])0+$/,"$1"),C=S.indexOf(".");var N=n.indexOf(".")-C,V=n.length-S.length-N;return hashq(n.substr(0,N)+S+n.substr(n.length-V))}if(E=n.match(/^00,000\.([#0]*0)$/))return C=dec(_,E[1].length),_<0?"-"+write_num_flt(r,n,-_):commaify(flr(_)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(O){return"00,"+(O.length<3?pad0(0,3-O.length):"")+O})+"."+pad0(C,E[1].length);switch(n){case"###,##0.00":return write_num_flt(r,"#,##0.00",_);case"###,###":case"##,###":case"#,###":var D=commaify(pad0r(B,0));return D!=="0"?A+D:"";case"###,###.00":return write_num_flt(r,"###,##0.00",_).replace(/^0\./,".");case"#,###.00":return write_num_flt(r,"#,##0.00",_).replace(/^0\./,".")}throw new Error("unsupported format |"+n+"|")}function write_num_cm2(r,n,_){for(var x=n.length-1;n.charCodeAt(x-1)===44;)--x;return write_num(r,n.substr(0,x),_/Math.pow(10,3*(n.length-x)))}function write_num_pct2(r,n,_){var x=n.replace(pct1,""),S=n.length-x.length;return write_num(r,x,_*Math.pow(10,2*S))+fill("%",S)}function write_num_exp2(r,n){var _,x=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(n==0)return"0.0E+0";if(n<0)return"-"+write_num_exp2(r,-n);var S=r.indexOf(".");S===-1&&(S=r.indexOf("E"));var E=Math.floor(Math.log(n)*Math.LOG10E)%S;if(E<0&&(E+=S),_=(n/Math.pow(10,E)).toPrecision(x+1+(S+E)%S),!_.match(/[Ee]/)){var C=Math.floor(Math.log(n)*Math.LOG10E);_.indexOf(".")===-1?_=_.charAt(0)+"."+_.substr(1)+"E+"+(C-_.length+E):_+="E+"+(C-E),_=_.replace(/\+-/,"-")}_=_.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(T,B,A,I){return B+A+I.substr(0,(S+E)%S)+"."+I.substr(E)+"E"})}else _=n.toExponential(x);return r.match(/E\+00$/)&&_.match(/e[+-]\d$/)&&(_=_.substr(0,_.length-1)+"0"+_.charAt(_.length-1)),r.match(/E\-/)&&_.match(/e\+/)&&(_=_.replace(/e\+/,"e")),_.replace("e","E")}function write_num_int(r,n,_){if(r.charCodeAt(0)===40&&!n.match(closeparen)){var x=n.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return _>=0?write_num_int("n",x,_):"("+write_num_int("n",x,-_)+")"}if(n.charCodeAt(n.length-1)===44)return write_num_cm2(r,n,_);if(n.indexOf("%")!==-1)return write_num_pct2(r,n,_);if(n.indexOf("E")!==-1)return write_num_exp2(n,_);if(n.charCodeAt(0)===36)return"$"+write_num_int(r,n.substr(n.charAt(1)==" "?2:1),_);var S,E,C,T,B=Math.abs(_),A=_<0?"-":"";if(n.match(/^00+$/))return A+pad0(B,n.length);if(n.match(/^[#?]+$/))return S=""+_,_===0&&(S=""),S.length>n.length?S:hashq(n.substr(0,n.length-S.length))+S;if(E=n.match(frac1))return write_num_f2(E,B,A);if(n.match(/^#+0+$/))return A+pad0(B,n.length-n.indexOf("0"));if(E=n.match(dec1))return S=(""+_).replace(/^([^\.]+)$/,"$1."+hashq(E[1])).replace(/\.$/,"."+hashq(E[1])),S=S.replace(/\.(\d*)$/,function(O,F){return"."+F+fill("0",hashq(E[1]).length-F.length)}),n.indexOf("0.")!==-1?S:S.replace(/^0\./,".");if(n=n.replace(/^#+([0.])/,"$1"),E=n.match(/^(0*)\.(#*)$/))return A+(""+B).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,E[1].length?"0.":".");if(E=n.match(/^#{1,3},##0(\.?)$/))return A+commaify(""+B);if(E=n.match(/^#,##0\.([#0]*0)$/))return _<0?"-"+write_num_int(r,n,-_):commaify(""+_)+"."+fill("0",E[1].length);if(E=n.match(/^#,#*,#0/))return write_num_int(r,n.replace(/^#,#*,/,""),_);if(E=n.match(/^([0#]+)(\\?-([0#]+))+$/))return S=_strrev(write_num_int(r,n.replace(/[\\-]/g,""),_)),C=0,_strrev(_strrev(n.replace(/\\/g,"")).replace(/[0#]/g,function(O){return C<S.length?S.charAt(C++):O==="0"?"0":""}));if(n.match(phone))return S=write_num_int(r,"##########",_),"("+S.substr(0,3)+") "+S.substr(3,3)+"-"+S.substr(6);var I="";if(E=n.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return C=Math.min(E[4].length,7),T=SSF_frac(B,Math.pow(10,C)-1,!1),S=""+A,I=write_num("n",E[1],T[1]),I.charAt(I.length-1)==" "&&(I=I.substr(0,I.length-1)+"0"),S+=I+E[2]+"/"+E[3],I=rpad_(T[2],C),I.length<E[4].length&&(I=hashq(E[4].substr(E[4].length-I.length))+I),S+=I,S;if(E=n.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return C=Math.min(Math.max(E[1].length,E[4].length),7),T=SSF_frac(B,Math.pow(10,C)-1,!0),A+(T[0]||(T[1]?"":"0"))+" "+(T[1]?pad_(T[1],C)+E[2]+"/"+E[3]+rpad_(T[2],C):fill(" ",2*C+1+E[2].length+E[3].length));if(E=n.match(/^[#0?]+$/))return S=""+_,n.length<=S.length?S:hashq(n.substr(0,n.length-S.length))+S;if(E=n.match(/^([#0]+)\.([#0]+)$/)){S=""+_.toFixed(Math.min(E[2].length,10)).replace(/([^0])0+$/,"$1"),C=S.indexOf(".");var N=n.indexOf(".")-C,V=n.length-S.length-N;return hashq(n.substr(0,N)+S+n.substr(n.length-V))}if(E=n.match(/^00,000\.([#0]*0)$/))return _<0?"-"+write_num_int(r,n,-_):commaify(""+_).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(O){return"00,"+(O.length<3?pad0(0,3-O.length):"")+O})+"."+pad0(0,E[1].length);switch(n){case"###,###":case"##,###":case"#,###":var D=commaify(""+B);return D!=="0"?A+D:"";default:if(n.match(/\.[0#?]*$/))return write_num_int(r,n.slice(0,n.lastIndexOf(".")),_)+hashq(n.slice(n.lastIndexOf(".")))}throw new Error("unsupported format |"+n+"|")}function write_num(r,n,_){return(_|0)===_?write_num_int(r,n,_):write_num_flt(r,n,_)}function SSF_split_fmt(r){for(var n=[],_=!1,x=0,S=0;x<r.length;++x)switch(r.charCodeAt(x)){case 34:_=!_;break;case 95:case 42:case 92:++x;break;case 59:n[n.length]=r.substr(S,x-S),S=x+1}if(n[n.length]=r.substr(S),_===!0)throw new Error("Format |"+r+"| unterminated string ");return n}var SSF_abstime=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fmt_is_date(r){for(var n=0,_="",x="";n<r.length;)switch(_=r.charAt(n)){case"G":SSF_isgeneral(r,n)&&(n+=6),n++;break;case'"':for(;r.charCodeAt(++n)!==34&&n<r.length;);++n;break;case"\\":n+=2;break;case"_":n+=2;break;case"@":++n;break;case"B":case"b":if(r.charAt(n+1)==="1"||r.charAt(n+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(r.substr(n,3).toUpperCase()==="A/P"||r.substr(n,5).toUpperCase()==="AM/PM"||r.substr(n,5).toUpperCase()==="/")return!0;++n;break;case"[":for(x=_;r.charAt(n++)!=="]"&&n<r.length;)x+=r.charAt(n);if(x.match(SSF_abstime))return!0;break;case".":case"0":case"#":for(;n<r.length&&("0#?.,E+-%".indexOf(_=r.charAt(++n))>-1||_=="\\"&&r.charAt(n+1)=="-"&&"0#".indexOf(r.charAt(n+2))>-1););break;case"?":for(;r.charAt(++n)===_;);break;case"*":++n,(r.charAt(n)==" "||r.charAt(n)=="*")&&++n;break;case"(":case")":++n;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;n<r.length&&"0123456789".indexOf(r.charAt(++n))>-1;);break;case" ":++n;break;default:++n;break}return!1}function eval_fmt(r,n,_,x){for(var S=[],E="",C=0,T="",B="t",A,I,N,V="H";C<r.length;)switch(T=r.charAt(C)){case"G":if(!SSF_isgeneral(r,C))throw new Error("unrecognized character "+T+" in "+r);S[S.length]={t:"G",v:"General"},C+=7;break;case'"':for(E="";(N=r.charCodeAt(++C))!==34&&C<r.length;)E+=String.fromCharCode(N);S[S.length]={t:"t",v:E},++C;break;case"\\":var D=r.charAt(++C),O=D==="("||D===")"?D:"t";S[S.length]={t:O,v:D},++C;break;case"_":S[S.length]={t:"t",v:" "},C+=2;break;case"@":S[S.length]={t:"T",v:n},++C;break;case"B":case"b":if(r.charAt(C+1)==="1"||r.charAt(C+1)==="2"){if(A==null&&(A=SSF_parse_date_code(n,_,r.charAt(C+1)==="2"),A==null))return"";S[S.length]={t:"X",v:r.substr(C,2)},B=T,C+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":T=T.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(n<0||A==null&&(A=SSF_parse_date_code(n,_),A==null))return"";for(E=T;++C<r.length&&r.charAt(C).toLowerCase()===T;)E+=T;T==="m"&&B.toLowerCase()==="h"&&(T="M"),T==="h"&&(T=V),S[S.length]={t:T,v:E},B=T;break;case"A":case"a":case"":var F={t:T,v:T};if(A==null&&(A=SSF_parse_date_code(n,_)),r.substr(C,3).toUpperCase()==="A/P"?(A!=null&&(F.v=A.H>=12?r.charAt(C+2):T),F.t="T",V="h",C+=3):r.substr(C,5).toUpperCase()==="AM/PM"?(A!=null&&(F.v=A.H>=12?"PM":"AM"),F.t="T",C+=5,V="h"):r.substr(C,5).toUpperCase()==="/"?(A!=null&&(F.v=A.H>=12?"":""),F.t="T",C+=5,V="h"):(F.t="t",++C),A==null&&F.t==="T")return"";S[S.length]=F,B=T;break;case"[":for(E=T;r.charAt(C++)!=="]"&&C<r.length;)E+=r.charAt(C);if(E.slice(-1)!=="]")throw'unterminated "[" block: |'+E+"|";if(E.match(SSF_abstime)){if(A==null&&(A=SSF_parse_date_code(n,_),A==null))return"";S[S.length]={t:"Z",v:E.toLowerCase()},B=E.charAt(1)}else E.indexOf("$")>-1&&(E=(E.match(/\$([^-\[\]]*)/)||[])[1]||"$",fmt_is_date(r)||(S[S.length]={t:"t",v:E}));break;case".":if(A!=null){for(E=T;++C<r.length&&(T=r.charAt(C))==="0";)E+=T;S[S.length]={t:"s",v:E};break}case"0":case"#":for(E=T;++C<r.length&&"0#?.,E+-%".indexOf(T=r.charAt(C))>-1;)E+=T;S[S.length]={t:"n",v:E};break;case"?":for(E=T;r.charAt(++C)===T;)E+=T;S[S.length]={t:T,v:E},B=T;break;case"*":++C,(r.charAt(C)==" "||r.charAt(C)=="*")&&++C;break;case"(":case")":S[S.length]={t:x===1?"t":T,v:T},++C;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(E=T;C<r.length&&"0123456789".indexOf(r.charAt(++C))>-1;)E+=r.charAt(C);S[S.length]={t:"D",v:E};break;case" ":S[S.length]={t:T,v:T},++C;break;case"$":S[S.length]={t:"t",v:"$"},++C;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(T)===-1)throw new Error("unrecognized character "+T+" in "+r);S[S.length]={t:"t",v:T},++C;break}var M=0,L=0,j;for(C=S.length-1,B="t";C>=0;--C)switch(S[C].t){case"h":case"H":S[C].t=V,B="h",M<1&&(M=1);break;case"s":(j=S[C].v.match(/\.0+$/))&&(L=Math.max(L,j[0].length-1)),M<3&&(M=3);case"d":case"y":case"M":case"e":B=S[C].t;break;case"m":B==="s"&&(S[C].t="M",M<2&&(M=2));break;case"X":break;case"Z":M<1&&S[C].v.match(/[Hh]/)&&(M=1),M<2&&S[C].v.match(/[Mm]/)&&(M=2),M<3&&S[C].v.match(/[Ss]/)&&(M=3)}switch(M){case 0:break;case 1:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M),A.M>=60&&(A.M=0,++A.H);break;case 2:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M);break}var q="",H;for(C=0;C<S.length;++C)switch(S[C].t){case"t":case"T":case" ":case"D":break;case"X":S[C].v="",S[C].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":S[C].v=SSF_write_date(S[C].t.charCodeAt(0),S[C].v,A,L),S[C].t="t";break;case"n":case"?":for(H=C+1;S[H]!=null&&((T=S[H].t)==="?"||T==="D"||(T===" "||T==="t")&&S[H+1]!=null&&(S[H+1].t==="?"||S[H+1].t==="t"&&S[H+1].v==="/")||S[C].t==="("&&(T===" "||T==="n"||T===")")||T==="t"&&(S[H].v==="/"||S[H].v===" "&&S[H+1]!=null&&S[H+1].t=="?"));)S[C].v+=S[H].v,S[H]={v:"",t:";"},++H;q+=S[C].v,C=H-1;break;case"G":S[C].t="t",S[C].v=SSF_general(n,_);break}var X="",J,Z;if(q.length>0){q.charCodeAt(0)==40?(J=n<0&&q.charCodeAt(0)===45?-n:n,Z=write_num("n",q,J)):(J=n<0&&x>1?-n:n,Z=write_num("n",q,J),J<0&&S[0]&&S[0].t=="t"&&(Z=Z.substr(1),S[0].v="-"+S[0].v)),H=Z.length-1;var ae=S.length;for(C=0;C<S.length;++C)if(S[C]!=null&&S[C].t!="t"&&S[C].v.indexOf(".")>-1){ae=C;break}var ce=S.length;if(ae===S.length&&Z.indexOf("E")===-1){for(C=S.length-1;C>=0;--C)S[C]==null||"n?".indexOf(S[C].t)===-1||(H>=S[C].v.length-1?(H-=S[C].v.length,S[C].v=Z.substr(H+1,S[C].v.length)):H<0?S[C].v="":(S[C].v=Z.substr(0,H+1),H=-1),S[C].t="t",ce=C);H>=0&&ce<S.length&&(S[ce].v=Z.substr(0,H+1)+S[ce].v)}else if(ae!==S.length&&Z.indexOf("E")===-1){for(H=Z.indexOf(".")-1,C=ae;C>=0;--C)if(!(S[C]==null||"n?".indexOf(S[C].t)===-1)){for(I=S[C].v.indexOf(".")>-1&&C===ae?S[C].v.indexOf(".")-1:S[C].v.length-1,X=S[C].v.substr(I+1);I>=0;--I)H>=0&&(S[C].v.charAt(I)==="0"||S[C].v.charAt(I)==="#")&&(X=Z.charAt(H--)+X);S[C].v=X,S[C].t="t",ce=C}for(H>=0&&ce<S.length&&(S[ce].v=Z.substr(0,H+1)+S[ce].v),H=Z.indexOf(".")+1,C=ae;C<S.length;++C)if(!(S[C]==null||"n?(".indexOf(S[C].t)===-1&&C!==ae)){for(I=S[C].v.indexOf(".")>-1&&C===ae?S[C].v.indexOf(".")+1:0,X=S[C].v.substr(0,I);I<S[C].v.length;++I)H<Z.length&&(X+=Z.charAt(H++));S[C].v=X,S[C].t="t",ce=C}}}for(C=0;C<S.length;++C)S[C]!=null&&"n?".indexOf(S[C].t)>-1&&(J=x>1&&n<0&&C>0&&S[C-1].v==="-"?-n:n,S[C].v=write_num(S[C].t,S[C].v,J),S[C].t="t");var ve="";for(C=0;C!==S.length;++C)S[C]!=null&&(ve+=S[C].v);return ve}var cfregex2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function chkcond(r,n){if(n==null)return!1;var _=parseFloat(n[2]);switch(n[1]){case"=":if(r==_)return!0;break;case">":if(r>_)return!0;break;case"<":if(r<_)return!0;break;case"<>":if(r!=_)return!0;break;case">=":if(r>=_)return!0;break;case"<=":if(r<=_)return!0;break}return!1}function choose_fmt(r,n){var _=SSF_split_fmt(r),x=_.length,S=_[x-1].indexOf("@");if(x<4&&S>-1&&--x,_.length>4)throw new Error("cannot find right format for |"+_.join("|")+"|");if(typeof n!="number")return[4,_.length===4||S>-1?_[_.length-1]:"@"];switch(_.length){case 1:_=S>-1?["General","General","General",_[0]]:[_[0],_[0],_[0],"@"];break;case 2:_=S>-1?[_[0],_[0],_[0],_[1]]:[_[0],_[1],_[0],"@"];break;case 3:_=S>-1?[_[0],_[1],_[0],_[2]]:[_[0],_[1],_[2],"@"];break}var E=n>0?_[0]:n<0?_[1]:_[2];if(_[0].indexOf("[")===-1&&_[1].indexOf("[")===-1)return[x,E];if(_[0].match(/\[[=<>]/)!=null||_[1].match(/\[[=<>]/)!=null){var C=_[0].match(cfregex2),T=_[1].match(cfregex2);return chkcond(n,C)?[x,_[0]]:chkcond(n,T)?[x,_[1]]:[x,_[C!=null&&T!=null?2:1]]}return[x,E]}function SSF_format(r,n,_){_==null&&(_={});var x="";switch(typeof r){case"string":r=="m/d/yy"&&_.dateNF?x=_.dateNF:x=r;break;case"number":r==14&&_.dateNF?x=_.dateNF:x=(_.table!=null?_.table:table_fmt)[r],x==null&&(x=_.table&&_.table[SSF_default_map[r]]||table_fmt[SSF_default_map[r]]),x==null&&(x=SSF_default_str[r]||"General");break}if(SSF_isgeneral(x,0))return SSF_general(n,_);n instanceof Date&&(n=datenum_local(n,_.date1904));var S=choose_fmt(x,n);if(SSF_isgeneral(S[1]))return SSF_general(n,_);if(n===!0)n="TRUE";else if(n===!1)n="FALSE";else if(n===""||n==null)return"";return eval_fmt(S[1],n,_,S[0])}function SSF_load(r,n){if(typeof n!="number"){n=+n||-1;for(var _=0;_<392;++_){if(table_fmt[_]==null){n<0&&(n=_);continue}if(table_fmt[_]==r){n=_;break}}n<0&&(n=391)}return table_fmt[n]=r,n}function SSF_load_table(r){for(var n=0;n!=392;++n)r[n]!==void 0&&SSF_load(r[n],n)}function make_ssf(){table_fmt=SSF_init_table()}var SSFImplicit={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},dateNFregex=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function dateNF_regex(r){var n=typeof r=="number"?table_fmt[r]:r;return n=n.replace(dateNFregex,"(\\d+)"),new RegExp("^"+n+"$")}function dateNF_fix(r,n,_){var x=-1,S=-1,E=-1,C=-1,T=-1,B=-1;(n.match(dateNFregex)||[]).forEach(function(N,V){var D=parseInt(_[V+1],10);switch(N.toLowerCase().charAt(0)){case"y":x=D;break;case"d":E=D;break;case"h":C=D;break;case"s":B=D;break;case"m":C>=0?T=D:S=D;break}}),B>=0&&T==-1&&S>=0&&(T=S,S=-1);var A=(""+(x>=0?x:new Date().getFullYear())).slice(-4)+"-"+("00"+(S>=1?S:1)).slice(-2)+"-"+("00"+(E>=1?E:1)).slice(-2);A.length==7&&(A="0"+A),A.length==8&&(A="20"+A);var I=("00"+(C>=0?C:0)).slice(-2)+":"+("00"+(T>=0?T:0)).slice(-2)+":"+("00"+(B>=0?B:0)).slice(-2);return C==-1&&T==-1&&B==-1?A:x==-1&&S==-1&&E==-1?I:A+"T"+I}var bad_formats={"d.m":"d\\.m"};function SSF__load(r,n){return SSF_load(bad_formats[r]||r,n)}var CRC32=function(){var r={};r.version="1.2.0";function n(){for(var Z=0,ae=new Array(256),ce=0;ce!=256;++ce)Z=ce,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,Z=Z&1?-306674912^Z>>>1:Z>>>1,ae[ce]=Z;return typeof Int32Array<"u"?new Int32Array(ae):ae}var _=n();function x(Z){var ae=0,ce=0,ve=0,pe=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(ve=0;ve!=256;++ve)pe[ve]=Z[ve];for(ve=0;ve!=256;++ve)for(ce=Z[ve],ae=256+ve;ae<4096;ae+=256)ce=pe[ae]=ce>>>8^Z[ce&255];var G=[];for(ve=1;ve!=16;++ve)G[ve-1]=typeof Int32Array<"u"?pe.subarray(ve*256,ve*256+256):pe.slice(ve*256,ve*256+256);return G}var S=x(_),E=S[0],C=S[1],T=S[2],B=S[3],A=S[4],I=S[5],N=S[6],V=S[7],D=S[8],O=S[9],F=S[10],M=S[11],L=S[12],j=S[13],q=S[14];function H(Z,ae){for(var ce=ae^-1,ve=0,pe=Z.length;ve<pe;)ce=ce>>>8^_[(ce^Z.charCodeAt(ve++))&255];return~ce}function X(Z,ae){for(var ce=ae^-1,ve=Z.length-15,pe=0;pe<ve;)ce=q[Z[pe++]^ce&255]^j[Z[pe++]^ce>>8&255]^L[Z[pe++]^ce>>16&255]^M[Z[pe++]^ce>>>24]^F[Z[pe++]]^O[Z[pe++]]^D[Z[pe++]]^V[Z[pe++]]^N[Z[pe++]]^I[Z[pe++]]^A[Z[pe++]]^B[Z[pe++]]^T[Z[pe++]]^C[Z[pe++]]^E[Z[pe++]]^_[Z[pe++]];for(ve+=15;pe<ve;)ce=ce>>>8^_[(ce^Z[pe++])&255];return~ce}function J(Z,ae){for(var ce=ae^-1,ve=0,pe=Z.length,G=0,Y=0;ve<pe;)G=Z.charCodeAt(ve++),G<128?ce=ce>>>8^_[(ce^G)&255]:G<2048?(ce=ce>>>8^_[(ce^(192|G>>6&31))&255],ce=ce>>>8^_[(ce^(128|G&63))&255]):G>=55296&&G<57344?(G=(G&1023)+64,Y=Z.charCodeAt(ve++)&1023,ce=ce>>>8^_[(ce^(240|G>>8&7))&255],ce=ce>>>8^_[(ce^(128|G>>2&63))&255],ce=ce>>>8^_[(ce^(128|Y>>6&15|(G&3)<<4))&255],ce=ce>>>8^_[(ce^(128|Y&63))&255]):(ce=ce>>>8^_[(ce^(224|G>>12&15))&255],ce=ce>>>8^_[(ce^(128|G>>6&63))&255],ce=ce>>>8^_[(ce^(128|G&63))&255]);return~ce}return r.table=_,r.bstr=H,r.buf=X,r.str=J,r}(),CFB=function r(){var n={};n.version="1.2.2";function _(se,_e){for(var $e=se.split("/"),Pe=_e.split("/"),Fe=0,qe=0,Ye=Math.min($e.length,Pe.length);Fe<Ye;++Fe){if(qe=$e[Fe].length-Pe[Fe].length)return qe;if($e[Fe]!=Pe[Fe])return $e[Fe]<Pe[Fe]?-1:1}return $e.length-Pe.length}function x(se){if(se.charAt(se.length-1)=="/")return se.slice(0,-1).indexOf("/")===-1?se:x(se.slice(0,-1));var _e=se.lastIndexOf("/");return _e===-1?se:se.slice(0,_e+1)}function S(se){if(se.charAt(se.length-1)=="/")return S(se.slice(0,-1));var _e=se.lastIndexOf("/");return _e===-1?se:se.slice(_e+1)}function E(se,_e){typeof _e=="string"&&(_e=new Date(_e));var $e=_e.getHours();$e=$e<<6|_e.getMinutes(),$e=$e<<5|_e.getSeconds()>>>1,se.write_shift(2,$e);var Pe=_e.getFullYear()-1980;Pe=Pe<<4|_e.getMonth()+1,Pe=Pe<<5|_e.getDate(),se.write_shift(2,Pe)}function C(se){var _e=se.read_shift(2)&65535,$e=se.read_shift(2)&65535,Pe=new Date,Fe=$e&31;$e>>>=5;var qe=$e&15;$e>>>=4,Pe.setMilliseconds(0),Pe.setFullYear($e+1980),Pe.setMonth(qe-1),Pe.setDate(Fe);var Ye=_e&31;_e>>>=5;var Je=_e&63;return _e>>>=6,Pe.setHours(_e),Pe.setMinutes(Je),Pe.setSeconds(Ye<<1),Pe}function T(se){prep_blob(se,0);for(var _e={},$e=0;se.l<=se.length-4;){var Pe=se.read_shift(2),Fe=se.read_shift(2),qe=se.l+Fe,Ye={};switch(Pe){case 21589:$e=se.read_shift(1),$e&1&&(Ye.mtime=se.read_shift(4)),Fe>5&&($e&2&&(Ye.atime=se.read_shift(4)),$e&4&&(Ye.ctime=se.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(Ye.mtime*1e3));break;case 1:{var Je=se.read_shift(4),tt=se.read_shift(4);Ye.usz=tt*Math.pow(2,32)+Je,Je=se.read_shift(4),tt=se.read_shift(4),Ye.csz=tt*Math.pow(2,32)+Je}break}se.l=qe,_e[Pe]=Ye}return _e}var B;function A(){return B||(B=_fs)}function I(se,_e){if(se[0]==80&&se[1]==75)return _r(se,_e);if((se[0]|32)==109&&(se[1]|32)==105)return $r(se,_e);if(se.length<512)throw new Error("CFB file size "+se.length+" < 512");var $e=3,Pe=512,Fe=0,qe=0,Ye=0,Je=0,tt=0,Qe=[],it=se.slice(0,512);prep_blob(it,0);var lt=N(it);switch($e=lt[0],$e){case 3:Pe=512;break;case 4:Pe=4096;break;case 0:if(lt[1]==0)return _r(se,_e);default:throw new Error("Major Version: Expected 3 or 4 saw "+$e)}Pe!==512&&(it=se.slice(0,Pe),prep_blob(it,28));var vt=se.slice(0,Pe);V(it,$e);var bt=it.read_shift(4,"i");if($e===3&&bt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+bt);it.l+=4,Ye=it.read_shift(4,"i"),it.l+=4,it.chk("00100000","Mini Stream Cutoff Size: "),Je=it.read_shift(4,"i"),Fe=it.read_shift(4,"i"),tt=it.read_shift(4,"i"),qe=it.read_shift(4,"i");for(var dt=-1,yt=0;yt<109&&(dt=it.read_shift(4,"i"),!(dt<0));++yt)Qe[yt]=dt;var Tt=D(se,Pe);M(tt,qe,Tt,Pe,Qe);var kt=j(Tt,Ye,Qe,Pe);Ye<kt.length&&(kt[Ye].name="!Directory"),Fe>0&&Je!==Y&&(kt[Je].name="!MiniFAT"),kt[Qe[0]].name="!FAT",kt.fat_addrs=Qe,kt.ssz=Pe;var Pt={},It=[],Ot=[],Mt=[];q(Ye,kt,Tt,It,Fe,Pt,Ot,Je),O(Ot,Mt,It),It.shift();var Dt={FileIndex:Ot,FullPaths:Mt};return _e&&_e.raw&&(Dt.raw={header:vt,sectors:Tt}),Dt}function N(se){if(se[se.l]==80&&se[se.l+1]==75)return[0,0];se.chk(U,"Header Signature: "),se.l+=16;var _e=se.read_shift(2,"u");return[se.read_shift(2,"u"),_e]}function V(se,_e){var $e=9;switch(se.l+=2,$e=se.read_shift(2)){case 9:if(_e!=3)throw new Error("Sector Shift: Expected 9 saw "+$e);break;case 12:if(_e!=4)throw new Error("Sector Shift: Expected 12 saw "+$e);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+$e)}se.chk("0600","Mini Sector Shift: "),se.chk("000000000000","Reserved: ")}function D(se,_e){for(var $e=Math.ceil(se.length/_e)-1,Pe=[],Fe=1;Fe<$e;++Fe)Pe[Fe-1]=se.slice(Fe*_e,(Fe+1)*_e);return Pe[$e-1]=se.slice($e*_e),Pe}function O(se,_e,$e){for(var Pe=0,Fe=0,qe=0,Ye=0,Je=0,tt=$e.length,Qe=[],it=[];Pe<tt;++Pe)Qe[Pe]=it[Pe]=Pe,_e[Pe]=$e[Pe];for(;Je<it.length;++Je)Pe=it[Je],Fe=se[Pe].L,qe=se[Pe].R,Ye=se[Pe].C,Qe[Pe]===Pe&&(Fe!==-1&&Qe[Fe]!==Fe&&(Qe[Pe]=Qe[Fe]),qe!==-1&&Qe[qe]!==qe&&(Qe[Pe]=Qe[qe])),Ye!==-1&&(Qe[Ye]=Pe),Fe!==-1&&Pe!=Qe[Pe]&&(Qe[Fe]=Qe[Pe],it.lastIndexOf(Fe)<Je&&it.push(Fe)),qe!==-1&&Pe!=Qe[Pe]&&(Qe[qe]=Qe[Pe],it.lastIndexOf(qe)<Je&&it.push(qe));for(Pe=1;Pe<tt;++Pe)Qe[Pe]===Pe&&(qe!==-1&&Qe[qe]!==qe?Qe[Pe]=Qe[qe]:Fe!==-1&&Qe[Fe]!==Fe&&(Qe[Pe]=Qe[Fe]));for(Pe=1;Pe<tt;++Pe)if(se[Pe].type!==0){if(Je=Pe,Je!=Qe[Je])do Je=Qe[Je],_e[Pe]=_e[Je]+"/"+_e[Pe];while(Je!==0&&Qe[Je]!==-1&&Je!=Qe[Je]);Qe[Pe]=-1}for(_e[0]+="/",Pe=1;Pe<tt;++Pe)se[Pe].type!==2&&(_e[Pe]+="/")}function F(se,_e,$e){for(var Pe=se.start,Fe=se.size,qe=[],Ye=Pe;$e&&Fe>0&&Ye>=0;)qe.push(_e.slice(Ye*G,Ye*G+G)),Fe-=G,Ye=__readInt32LE($e,Ye*4);return qe.length===0?new_buf(0):bconcat(qe).slice(0,se.size)}function M(se,_e,$e,Pe,Fe){var qe=Y;if(se===Y){if(_e!==0)throw new Error("DIFAT chain shorter than expected")}else if(se!==-1){var Ye=$e[se],Je=(Pe>>>2)-1;if(!Ye)return;for(var tt=0;tt<Je&&(qe=__readInt32LE(Ye,tt*4))!==Y;++tt)Fe.push(qe);_e>=1&&M(__readInt32LE(Ye,Pe-4),_e-1,$e,Pe,Fe)}}function L(se,_e,$e,Pe,Fe){var qe=[],Ye=[];Fe||(Fe=[]);var Je=Pe-1,tt=0,Qe=0;for(tt=_e;tt>=0;){Fe[tt]=!0,qe[qe.length]=tt,Ye.push(se[tt]);var it=$e[Math.floor(tt*4/Pe)];if(Qe=tt*4&Je,Pe<4+Qe)throw new Error("FAT boundary crossed: "+tt+" 4 "+Pe);if(!se[it])break;tt=__readInt32LE(se[it],Qe)}return{nodes:qe,data:__toBuffer([Ye])}}function j(se,_e,$e,Pe){var Fe=se.length,qe=[],Ye=[],Je=[],tt=[],Qe=Pe-1,it=0,lt=0,vt=0,bt=0;for(it=0;it<Fe;++it)if(Je=[],vt=it+_e,vt>=Fe&&(vt-=Fe),!Ye[vt]){tt=[];var dt=[];for(lt=vt;lt>=0;){dt[lt]=!0,Ye[lt]=!0,Je[Je.length]=lt,tt.push(se[lt]);var yt=$e[Math.floor(lt*4/Pe)];if(bt=lt*4&Qe,Pe<4+bt)throw new Error("FAT boundary crossed: "+lt+" 4 "+Pe);if(!se[yt]||(lt=__readInt32LE(se[yt],bt),dt[lt]))break}qe[vt]={nodes:Je,data:__toBuffer([tt])}}return qe}function q(se,_e,$e,Pe,Fe,qe,Ye,Je){for(var tt=0,Qe=Pe.length?2:0,it=_e[se].data,lt=0,vt=0,bt;lt<it.length;lt+=128){var dt=it.slice(lt,lt+128);prep_blob(dt,64),vt=dt.read_shift(2),bt=__utf16le(dt,0,vt-Qe),Pe.push(bt);var yt={name:bt,type:dt.read_shift(1),color:dt.read_shift(1),L:dt.read_shift(4,"i"),R:dt.read_shift(4,"i"),C:dt.read_shift(4,"i"),clsid:dt.read_shift(16),state:dt.read_shift(4,"i"),start:0,size:0},Tt=dt.read_shift(2)+dt.read_shift(2)+dt.read_shift(2)+dt.read_shift(2);Tt!==0&&(yt.ct=H(dt,dt.l-8));var kt=dt.read_shift(2)+dt.read_shift(2)+dt.read_shift(2)+dt.read_shift(2);kt!==0&&(yt.mt=H(dt,dt.l-8)),yt.start=dt.read_shift(4,"i"),yt.size=dt.read_shift(4,"i"),yt.size<0&&yt.start<0&&(yt.size=yt.type=0,yt.start=Y,yt.name=""),yt.type===5?(tt=yt.start,Fe>0&&tt!==Y&&(_e[tt].name="!StreamData")):yt.size>=4096?(yt.storage="fat",_e[yt.start]===void 0&&(_e[yt.start]=L($e,yt.start,_e.fat_addrs,_e.ssz)),_e[yt.start].name=yt.name,yt.content=_e[yt.start].data.slice(0,yt.size)):(yt.storage="minifat",yt.size<0?yt.size=0:tt!==Y&&yt.start!==Y&&_e[tt]&&(yt.content=F(yt,_e[tt].data,(_e[Je]||{}).data))),yt.content&&prep_blob(yt.content,0),qe[bt]=yt,Ye.push(yt)}}function H(se,_e){return new Date((__readUInt32LE(se,_e+4)/1e7*Math.pow(2,32)+__readUInt32LE(se,_e)/1e7-11644473600)*1e3)}function X(se,_e){return A(),I(B.readFileSync(se),_e)}function J(se,_e){var $e=_e&&_e.type;switch($e||has_buf&&Buffer.isBuffer(se)&&($e="buffer"),$e||"base64"){case"file":return X(se,_e);case"base64":return I(s2a(Base64_decode(se)),_e);case"binary":return I(s2a(se),_e)}return I(se,_e)}function Z(se,_e){var $e=_e||{},Pe=$e.root||"Root Entry";if(se.FullPaths||(se.FullPaths=[]),se.FileIndex||(se.FileIndex=[]),se.FullPaths.length!==se.FileIndex.length)throw new Error("inconsistent CFB structure");se.FullPaths.length===0&&(se.FullPaths[0]=Pe+"/",se.FileIndex[0]={name:Pe,type:5}),$e.CLSID&&(se.FileIndex[0].clsid=$e.CLSID),ae(se)}function ae(se){var _e="Sh33tJ5";if(!CFB.find(se,"/"+_e)){var $e=new_buf(4);$e[0]=55,$e[1]=$e[3]=50,$e[2]=54,se.FileIndex.push({name:_e,type:2,content:$e,size:4,L:69,R:69,C:69}),se.FullPaths.push(se.FullPaths[0]+_e),ce(se)}}function ce(se,_e){Z(se);for(var $e=!1,Pe=!1,Fe=se.FullPaths.length-1;Fe>=0;--Fe){var qe=se.FileIndex[Fe];switch(qe.type){case 0:Pe?$e=!0:(se.FileIndex.pop(),se.FullPaths.pop());break;case 1:case 2:case 5:Pe=!0,isNaN(qe.R*qe.L*qe.C)&&($e=!0),qe.R>-1&&qe.L>-1&&qe.R==qe.L&&($e=!0);break;default:$e=!0;break}}if(!(!$e&&!_e)){var Ye=new Date(1987,1,19),Je=0,tt=Object.create?Object.create(null):{},Qe=[];for(Fe=0;Fe<se.FullPaths.length;++Fe)tt[se.FullPaths[Fe]]=!0,se.FileIndex[Fe].type!==0&&Qe.push([se.FullPaths[Fe],se.FileIndex[Fe]]);for(Fe=0;Fe<Qe.length;++Fe){var it=x(Qe[Fe][0]);for(Pe=tt[it];!Pe;){for(;x(it)&&!tt[x(it)];)it=x(it);Qe.push([it,{name:S(it).replace("/",""),type:1,clsid:ee,ct:Ye,mt:Ye,content:null}]),tt[it]=!0,it=x(Qe[Fe][0]),Pe=tt[it]}}for(Qe.sort(function(bt,dt){return _(bt[0],dt[0])}),se.FullPaths=[],se.FileIndex=[],Fe=0;Fe<Qe.length;++Fe)se.FullPaths[Fe]=Qe[Fe][0],se.FileIndex[Fe]=Qe[Fe][1];for(Fe=0;Fe<Qe.length;++Fe){var lt=se.FileIndex[Fe],vt=se.FullPaths[Fe];if(lt.name=S(vt).replace("/",""),lt.L=lt.R=lt.C=-(lt.color=1),lt.size=lt.content?lt.content.length:0,lt.start=0,lt.clsid=lt.clsid||ee,Fe===0)lt.C=Qe.length>1?1:-1,lt.size=0,lt.type=5;else if(vt.slice(-1)=="/"){for(Je=Fe+1;Je<Qe.length&&x(se.FullPaths[Je])!=vt;++Je);for(lt.C=Je>=Qe.length?-1:Je,Je=Fe+1;Je<Qe.length&&x(se.FullPaths[Je])!=x(vt);++Je);lt.R=Je>=Qe.length?-1:Je,lt.type=1}else x(se.FullPaths[Fe+1]||"")==x(vt)&&(lt.R=Fe+1),lt.type=2}}}function ve(se,_e){var $e=_e||{};if($e.fileType=="mad")return tr(se,$e);switch(ce(se),$e.fileType){case"zip":return zt(se,$e)}var Pe=function(bt){for(var dt=0,yt=0,Tt=0;Tt<bt.FileIndex.length;++Tt){var kt=bt.FileIndex[Tt];if(kt.content){var Pt=kt.content.length;Pt>0&&(Pt<4096?dt+=Pt+63>>6:yt+=Pt+511>>9)}}for(var It=bt.FullPaths.length+3>>2,Ot=dt+7>>3,Mt=dt+127>>7,Dt=Ot+yt+It+Mt,mt=Dt+127>>7,gt=mt<=109?0:Math.ceil((mt-109)/127);Dt+mt+gt+127>>7>mt;)gt=++mt<=109?0:Math.ceil((mt-109)/127);var St=[1,gt,mt,Mt,It,yt,dt,0];return bt.FileIndex[0].size=dt<<6,St[7]=(bt.FileIndex[0].start=St[0]+St[1]+St[2]+St[3]+St[4]+St[5])+(St[6]+7>>3),St}(se),Fe=new_buf(Pe[7]<<9),qe=0,Ye=0;{for(qe=0;qe<8;++qe)Fe.write_shift(1,W[qe]);for(qe=0;qe<8;++qe)Fe.write_shift(2,0);for(Fe.write_shift(2,62),Fe.write_shift(2,3),Fe.write_shift(2,65534),Fe.write_shift(2,9),Fe.write_shift(2,6),qe=0;qe<3;++qe)Fe.write_shift(2,0);for(Fe.write_shift(4,0),Fe.write_shift(4,Pe[2]),Fe.write_shift(4,Pe[0]+Pe[1]+Pe[2]+Pe[3]-1),Fe.write_shift(4,0),Fe.write_shift(4,4096),Fe.write_shift(4,Pe[3]?Pe[0]+Pe[1]+Pe[2]-1:Y),Fe.write_shift(4,Pe[3]),Fe.write_shift(-4,Pe[1]?Pe[0]-1:Y),Fe.write_shift(4,Pe[1]),qe=0;qe<109;++qe)Fe.write_shift(-4,qe<Pe[2]?Pe[1]+qe:-1)}if(Pe[1])for(Ye=0;Ye<Pe[1];++Ye){for(;qe<236+Ye*127;++qe)Fe.write_shift(-4,qe<Pe[2]?Pe[1]+qe:-1);Fe.write_shift(-4,Ye===Pe[1]-1?Y:Ye+1)}var Je=function(bt){for(Ye+=bt;qe<Ye-1;++qe)Fe.write_shift(-4,qe+1);bt&&(++qe,Fe.write_shift(-4,Y))};for(Ye=qe=0,Ye+=Pe[1];qe<Ye;++qe)Fe.write_shift(-4,re.DIFSECT);for(Ye+=Pe[2];qe<Ye;++qe)Fe.write_shift(-4,re.FATSECT);Je(Pe[3]),Je(Pe[4]);for(var tt=0,Qe=0,it=se.FileIndex[0];tt<se.FileIndex.length;++tt)it=se.FileIndex[tt],it.content&&(Qe=it.content.length,!(Qe<4096)&&(it.start=Ye,Je(Qe+511>>9)));for(Je(Pe[6]+7>>3);Fe.l&511;)Fe.write_shift(-4,re.ENDOFCHAIN);for(Ye=qe=0,tt=0;tt<se.FileIndex.length;++tt)it=se.FileIndex[tt],it.content&&(Qe=it.content.length,!(!Qe||Qe>=4096)&&(it.start=Ye,Je(Qe+63>>6)));for(;Fe.l&511;)Fe.write_shift(-4,re.ENDOFCHAIN);for(qe=0;qe<Pe[4]<<2;++qe){var lt=se.FullPaths[qe];if(!lt||lt.length===0){for(tt=0;tt<17;++tt)Fe.write_shift(4,0);for(tt=0;tt<3;++tt)Fe.write_shift(4,-1);for(tt=0;tt<12;++tt)Fe.write_shift(4,0);continue}it=se.FileIndex[qe],qe===0&&(it.start=it.size?it.start-1:Y);var vt=qe===0&&$e.root||it.name;if(vt.length>32&&(console.error("Name "+vt+" will be truncated to "+vt.slice(0,32)),vt=vt.slice(0,32)),Qe=2*(vt.length+1),Fe.write_shift(64,vt,"utf16le"),Fe.write_shift(2,Qe),Fe.write_shift(1,it.type),Fe.write_shift(1,it.color),Fe.write_shift(-4,it.L),Fe.write_shift(-4,it.R),Fe.write_shift(-4,it.C),it.clsid)Fe.write_shift(16,it.clsid,"hex");else for(tt=0;tt<4;++tt)Fe.write_shift(4,0);Fe.write_shift(4,it.state||0),Fe.write_shift(4,0),Fe.write_shift(4,0),Fe.write_shift(4,0),Fe.write_shift(4,0),Fe.write_shift(4,it.start),Fe.write_shift(4,it.size),Fe.write_shift(4,0)}for(qe=1;qe<se.FileIndex.length;++qe)if(it=se.FileIndex[qe],it.size>=4096)if(Fe.l=it.start+1<<9,has_buf&&Buffer.isBuffer(it.content))it.content.copy(Fe,Fe.l,0,it.size),Fe.l+=it.size+511&-512;else{for(tt=0;tt<it.size;++tt)Fe.write_shift(1,it.content[tt]);for(;tt&511;++tt)Fe.write_shift(1,0)}for(qe=1;qe<se.FileIndex.length;++qe)if(it=se.FileIndex[qe],it.size>0&&it.size<4096)if(has_buf&&Buffer.isBuffer(it.content))it.content.copy(Fe,Fe.l,0,it.size),Fe.l+=it.size+63&-64;else{for(tt=0;tt<it.size;++tt)Fe.write_shift(1,it.content[tt]);for(;tt&63;++tt)Fe.write_shift(1,0)}if(has_buf)Fe.l=Fe.length;else for(;Fe.l<Fe.length;)Fe.write_shift(1,0);return Fe}function pe(se,_e){var $e=se.FullPaths.map(function(tt){return tt.toUpperCase()}),Pe=$e.map(function(tt){var Qe=tt.split("/");return Qe[Qe.length-(tt.slice(-1)=="/"?2:1)]}),Fe=!1;_e.charCodeAt(0)===47?(Fe=!0,_e=$e[0].slice(0,-1)+_e):Fe=_e.indexOf("/")!==-1;var qe=_e.toUpperCase(),Ye=Fe===!0?$e.indexOf(qe):Pe.indexOf(qe);if(Ye!==-1)return se.FileIndex[Ye];var Je=!qe.match(chr1);for(qe=qe.replace(chr0,""),Je&&(qe=qe.replace(chr1,"!")),Ye=0;Ye<$e.length;++Ye)if((Je?$e[Ye].replace(chr1,"!"):$e[Ye]).replace(chr0,"")==qe||(Je?Pe[Ye].replace(chr1,"!"):Pe[Ye]).replace(chr0,"")==qe)return se.FileIndex[Ye];return null}var G=64,Y=-2,U="d0cf11e0a1b11ae1",W=[208,207,17,224,161,177,26,225],ee="00000000000000000000000000000000",re={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Y,FREESECT:-1,HEADER_SIGNATURE:U,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ee,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function oe(se,_e,$e){A();var Pe=ve(se,$e);B.writeFileSync(_e,Pe)}function ie(se){for(var _e=new Array(se.length),$e=0;$e<se.length;++$e)_e[$e]=String.fromCharCode(se[$e]);return _e.join("")}function ne(se,_e){var $e=ve(se,_e);switch(_e&&_e.type||"buffer"){case"file":return A(),B.writeFileSync(_e.filename,$e),$e;case"binary":return typeof $e=="string"?$e:ie($e);case"base64":return Base64_encode(typeof $e=="string"?$e:ie($e));case"buffer":if(has_buf)return Buffer.isBuffer($e)?$e:Buffer_from($e);case"array":return typeof $e=="string"?s2a($e):$e}return $e}var te;function K(se){try{var _e=se.InflateRaw,$e=new _e;if($e._processChunk(new Uint8Array([3,0]),$e._finishFlushFlag),$e.bytesRead)te=se;else throw new Error("zlib does not expose bytesRead")}catch(Pe){console.error("cannot use native zlib: "+(Pe.message||Pe))}}function le(se,_e){if(!te)return Lt(se,_e);var $e=te.InflateRaw,Pe=new $e,Fe=Pe._processChunk(se.slice(se.l),Pe._finishFlushFlag);return se.l+=Pe.bytesRead,Fe}function ue(se){return te?te.deflateRawSync(se):ze(se)}var be=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ge=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ye=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ee(se){var _e=(se<<1|se<<11)&139536|(se<<5|se<<15)&558144;return(_e>>16|_e>>8|_e)&255}for(var Re=typeof Uint8Array<"u",Ne=Re?new Uint8Array(256):[],Te=0;Te<256;++Te)Ne[Te]=Ee(Te);function he(se,_e){var $e=Ne[se&255];return _e<=8?$e>>>8-_e:($e=$e<<8|Ne[se>>8&255],_e<=16?$e>>>16-_e:($e=$e<<8|Ne[se>>16&255],$e>>>24-_e))}function xe(se,_e){var $e=_e&7,Pe=_e>>>3;return(se[Pe]|($e<=6?0:se[Pe+1]<<8))>>>$e&3}function fe(se,_e){var $e=_e&7,Pe=_e>>>3;return(se[Pe]|($e<=5?0:se[Pe+1]<<8))>>>$e&7}function Be(se,_e){var $e=_e&7,Pe=_e>>>3;return(se[Pe]|($e<=4?0:se[Pe+1]<<8))>>>$e&15}function Le(se,_e){var $e=_e&7,Pe=_e>>>3;return(se[Pe]|($e<=3?0:se[Pe+1]<<8))>>>$e&31}function Ve(se,_e){var $e=_e&7,Pe=_e>>>3;return(se[Pe]|($e<=1?0:se[Pe+1]<<8))>>>$e&127}function Ie(se,_e,$e){var Pe=_e&7,Fe=_e>>>3,qe=(1<<$e)-1,Ye=se[Fe]>>>Pe;return $e<8-Pe||(Ye|=se[Fe+1]<<8-Pe,$e<16-Pe)||(Ye|=se[Fe+2]<<16-Pe,$e<24-Pe)||(Ye|=se[Fe+3]<<24-Pe),Ye&qe}function Me(se,_e,$e){var Pe=_e&7,Fe=_e>>>3;return Pe<=5?se[Fe]|=($e&7)<<Pe:(se[Fe]|=$e<<Pe&255,se[Fe+1]=($e&7)>>8-Pe),_e+3}function He(se,_e,$e){var Pe=_e&7,Fe=_e>>>3;return $e=($e&1)<<Pe,se[Fe]|=$e,_e+1}function We(se,_e,$e){var Pe=_e&7,Fe=_e>>>3;return $e<<=Pe,se[Fe]|=$e&255,$e>>>=8,se[Fe+1]=$e,_e+8}function Ue(se,_e,$e){var Pe=_e&7,Fe=_e>>>3;return $e<<=Pe,se[Fe]|=$e&255,$e>>>=8,se[Fe+1]=$e&255,se[Fe+2]=$e>>>8,_e+16}function Ge(se,_e){var $e=se.length,Pe=2*$e>_e?2*$e:_e+5,Fe=0;if($e>=_e)return se;if(has_buf){var qe=new_unsafe_buf(Pe);if(se.copy)se.copy(qe);else for(;Fe<se.length;++Fe)qe[Fe]=se[Fe];return qe}else if(Re){var Ye=new Uint8Array(Pe);if(Ye.set)Ye.set(se);else for(;Fe<$e;++Fe)Ye[Fe]=se[Fe];return Ye}return se.length=Pe,se}function et(se){for(var _e=new Array(se),$e=0;$e<se;++$e)_e[$e]=0;return _e}function ot(se,_e,$e){var Pe=1,Fe=0,qe=0,Ye=0,Je=0,tt=se.length,Qe=Re?new Uint16Array(32):et(32);for(qe=0;qe<32;++qe)Qe[qe]=0;for(qe=tt;qe<$e;++qe)se[qe]=0;tt=se.length;var it=Re?new Uint16Array(tt):et(tt);for(qe=0;qe<tt;++qe)Qe[Fe=se[qe]]++,Pe<Fe&&(Pe=Fe),it[qe]=0;for(Qe[0]=0,qe=1;qe<=Pe;++qe)Qe[qe+16]=Je=Je+Qe[qe-1]<<1;for(qe=0;qe<tt;++qe)Je=se[qe],Je!=0&&(it[qe]=Qe[Je+16]++);var lt=0;for(qe=0;qe<tt;++qe)if(lt=se[qe],lt!=0)for(Je=he(it[qe],Pe)>>Pe-lt,Ye=(1<<Pe+4-lt)-1;Ye>=0;--Ye)_e[Je|Ye<<lt]=lt&15|qe<<4;return Pe}var ht=Re?new Uint16Array(512):et(512),Oe=Re?new Uint16Array(32):et(32);if(!Re){for(var we=0;we<512;++we)ht[we]=0;for(we=0;we<32;++we)Oe[we]=0}(function(){for(var se=[],_e=0;_e<32;_e++)se.push(5);ot(se,Oe,32);var $e=[];for(_e=0;_e<=143;_e++)$e.push(8);for(;_e<=255;_e++)$e.push(9);for(;_e<=279;_e++)$e.push(7);for(;_e<=287;_e++)$e.push(8);ot($e,ht,288)})();var Ce=function(){for(var _e=Re?new Uint8Array(32768):[],$e=0,Pe=0;$e<ye.length-1;++$e)for(;Pe<ye[$e+1];++Pe)_e[Pe]=$e;for(;Pe<32768;++Pe)_e[Pe]=29;var Fe=Re?new Uint8Array(259):[];for($e=0,Pe=0;$e<ge.length-1;++$e)for(;Pe<ge[$e+1];++Pe)Fe[Pe]=$e;function qe(Je,tt){for(var Qe=0;Qe<Je.length;){var it=Math.min(65535,Je.length-Qe),lt=Qe+it==Je.length;for(tt.write_shift(1,+lt),tt.write_shift(2,it),tt.write_shift(2,~it&65535);it-- >0;)tt[tt.l++]=Je[Qe++]}return tt.l}function Ye(Je,tt){for(var Qe=0,it=0,lt=Re?new Uint16Array(32768):[];it<Je.length;){var vt=Math.min(65535,Je.length-it);if(vt<10){for(Qe=Me(tt,Qe,+(it+vt==Je.length)),Qe&7&&(Qe+=8-(Qe&7)),tt.l=Qe/8|0,tt.write_shift(2,vt),tt.write_shift(2,~vt&65535);vt-- >0;)tt[tt.l++]=Je[it++];Qe=tt.l*8;continue}Qe=Me(tt,Qe,+(it+vt==Je.length)+2);for(var bt=0;vt-- >0;){var dt=Je[it];bt=(bt<<5^dt)&32767;var yt=-1,Tt=0;if((yt=lt[bt])&&(yt|=it&-32768,yt>it&&(yt-=32768),yt<it))for(;Je[yt+Tt]==Je[it+Tt]&&Tt<250;)++Tt;if(Tt>2){dt=Fe[Tt],dt<=22?Qe=We(tt,Qe,Ne[dt+1]>>1)-1:(We(tt,Qe,3),Qe+=5,We(tt,Qe,Ne[dt-23]>>5),Qe+=3);var kt=dt<8?0:dt-4>>2;kt>0&&(Ue(tt,Qe,Tt-ge[dt]),Qe+=kt),dt=_e[it-yt],Qe=We(tt,Qe,Ne[dt]>>3),Qe-=3;var Pt=dt<4?0:dt-2>>1;Pt>0&&(Ue(tt,Qe,it-yt-ye[dt]),Qe+=Pt);for(var It=0;It<Tt;++It)lt[bt]=it&32767,bt=(bt<<5^Je[it])&32767,++it;vt-=Tt-1}else dt<=143?dt=dt+48:Qe=He(tt,Qe,1),Qe=We(tt,Qe,Ne[dt]),lt[bt]=it&32767,++it}Qe=We(tt,Qe,0)-1}return tt.l=(Qe+7)/8|0,tt.l}return function(tt,Qe){return tt.length<8?qe(tt,Qe):Ye(tt,Qe)}}();function ze(se){var _e=new_buf(50+Math.floor(se.length*1.1)),$e=Ce(se,_e);return _e.slice(0,$e)}var Ze=Re?new Uint16Array(32768):et(32768),st=Re?new Uint16Array(32768):et(32768),rt=Re?new Uint16Array(128):et(128),Ft=1,Vt=1;function Et(se,_e){var $e=Le(se,_e)+257;_e+=5;var Pe=Le(se,_e)+1;_e+=5;var Fe=Be(se,_e)+4;_e+=4;for(var qe=0,Ye=Re?new Uint8Array(19):et(19),Je=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],tt=1,Qe=Re?new Uint8Array(8):et(8),it=Re?new Uint8Array(8):et(8),lt=Ye.length,vt=0;vt<Fe;++vt)Ye[be[vt]]=qe=fe(se,_e),tt<qe&&(tt=qe),Qe[qe]++,_e+=3;var bt=0;for(Qe[0]=0,vt=1;vt<=tt;++vt)it[vt]=bt=bt+Qe[vt-1]<<1;for(vt=0;vt<lt;++vt)(bt=Ye[vt])!=0&&(Je[vt]=it[bt]++);var dt=0;for(vt=0;vt<lt;++vt)if(dt=Ye[vt],dt!=0){bt=Ne[Je[vt]]>>8-dt;for(var yt=(1<<7-dt)-1;yt>=0;--yt)rt[bt|yt<<dt]=dt&7|vt<<3}var Tt=[];for(tt=1;Tt.length<$e+Pe;)switch(bt=rt[Ve(se,_e)],_e+=bt&7,bt>>>=3){case 16:for(qe=3+xe(se,_e),_e+=2,bt=Tt[Tt.length-1];qe-- >0;)Tt.push(bt);break;case 17:for(qe=3+fe(se,_e),_e+=3;qe-- >0;)Tt.push(0);break;case 18:for(qe=11+Ve(se,_e),_e+=7;qe-- >0;)Tt.push(0);break;default:Tt.push(bt),tt<bt&&(tt=bt);break}var kt=Tt.slice(0,$e),Pt=Tt.slice($e);for(vt=$e;vt<286;++vt)kt[vt]=0;for(vt=Pe;vt<30;++vt)Pt[vt]=0;return Ft=ot(kt,Ze,286),Vt=ot(Pt,st,30),_e}function jt(se,_e){if(se[0]==3&&!(se[1]&3))return[new_raw_buf(_e),2];for(var $e=0,Pe=0,Fe=new_unsafe_buf(_e||1<<18),qe=0,Ye=Fe.length>>>0,Je=0,tt=0;!(Pe&1);){if(Pe=fe(se,$e),$e+=3,Pe>>>1)Pe>>1==1?(Je=9,tt=5):($e=Et(se,$e),Je=Ft,tt=Vt);else{$e&7&&($e+=8-($e&7));var Qe=se[$e>>>3]|se[($e>>>3)+1]<<8;if($e+=32,Qe>0)for(!_e&&Ye<qe+Qe&&(Fe=Ge(Fe,qe+Qe),Ye=Fe.length);Qe-- >0;)Fe[qe++]=se[$e>>>3],$e+=8;continue}for(;;){!_e&&Ye<qe+32767&&(Fe=Ge(Fe,qe+32767),Ye=Fe.length);var it=Ie(se,$e,Je),lt=Pe>>>1==1?ht[it]:Ze[it];if($e+=lt&15,lt>>>=4,!(lt>>>8&255))Fe[qe++]=lt;else{if(lt==256)break;lt-=257;var vt=lt<8?0:lt-4>>2;vt>5&&(vt=0);var bt=qe+ge[lt];vt>0&&(bt+=Ie(se,$e,vt),$e+=vt),it=Ie(se,$e,tt),lt=Pe>>>1==1?Oe[it]:st[it],$e+=lt&15,lt>>>=4;var dt=lt<4?0:lt-2>>1,yt=ye[lt];for(dt>0&&(yt+=Ie(se,$e,dt),$e+=dt),!_e&&Ye<bt&&(Fe=Ge(Fe,bt+100),Ye=Fe.length);qe<bt;)Fe[qe]=Fe[qe-yt],++qe}}}return _e?[Fe,$e+7>>>3]:[Fe.slice(0,qe),$e+7>>>3]}function Lt(se,_e){var $e=se.slice(se.l||0),Pe=jt($e,_e);return se.l+=Pe[1],Pe[0]}function qt(se,_e){if(se)typeof console<"u"&&console.error(_e);else throw new Error(_e)}function _r(se,_e){var $e=se;prep_blob($e,0);var Pe=[],Fe=[],qe={FileIndex:Pe,FullPaths:Fe};Z(qe,{root:_e.root});for(var Ye=$e.length-4;($e[Ye]!=80||$e[Ye+1]!=75||$e[Ye+2]!=5||$e[Ye+3]!=6)&&Ye>=0;)--Ye;$e.l=Ye+4,$e.l+=4;var Je=$e.read_shift(2);$e.l+=6;var tt=$e.read_shift(4);for($e.l=tt,Ye=0;Ye<Je;++Ye){$e.l+=20;var Qe=$e.read_shift(4),it=$e.read_shift(4),lt=$e.read_shift(2),vt=$e.read_shift(2),bt=$e.read_shift(2);$e.l+=8;var dt=$e.read_shift(4),yt=T($e.slice($e.l+lt,$e.l+lt+vt));$e.l+=lt+vt+bt;var Tt=$e.l;$e.l=dt+4,yt&&yt[1]&&((yt[1]||{}).usz&&(it=yt[1].usz),(yt[1]||{}).csz&&(Qe=yt[1].csz)),Zt($e,Qe,it,qe,yt),$e.l=Tt}return qe}function Zt(se,_e,$e,Pe,Fe){se.l+=2;var qe=se.read_shift(2),Ye=se.read_shift(2),Je=C(se);if(qe&8257)throw new Error("Unsupported ZIP encryption");for(var tt=se.read_shift(4),Qe=se.read_shift(4),it=se.read_shift(4),lt=se.read_shift(2),vt=se.read_shift(2),bt="",dt=0;dt<lt;++dt)bt+=String.fromCharCode(se[se.l++]);if(vt){var yt=T(se.slice(se.l,se.l+vt));(yt[21589]||{}).mt&&(Je=yt[21589].mt),(yt[1]||{}).usz&&(it=yt[1].usz),(yt[1]||{}).csz&&(Qe=yt[1].csz),Fe&&((Fe[21589]||{}).mt&&(Je=Fe[21589].mt),(Fe[1]||{}).usz&&(it=yt[1].usz),(Fe[1]||{}).csz&&(Qe=yt[1].csz))}se.l+=vt;var Tt=se.slice(se.l,se.l+Qe);switch(Ye){case 8:Tt=le(se,it);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var kt=!1;qe&8&&(tt=se.read_shift(4),tt==134695760&&(tt=se.read_shift(4),kt=!0),Qe=se.read_shift(4),it=se.read_shift(4)),Qe!=_e&&qt(kt,"Bad compressed size: "+_e+" != "+Qe),it!=$e&&qt(kt,"Bad uncompressed size: "+$e+" != "+it),wr(Pe,bt,Tt,{unsafe:!0,mt:Je})}function zt(se,_e){var $e=_e||{},Pe=[],Fe=[],qe=new_buf(1),Ye=$e.compression?8:0,Je=0,tt=0,Qe=0,it=0,lt=0,vt=se.FullPaths[0],bt=vt,dt=se.FileIndex[0],yt=[],Tt=0;for(tt=1;tt<se.FullPaths.length;++tt)if(bt=se.FullPaths[tt].slice(vt.length),dt=se.FileIndex[tt],!(!dt.size||!dt.content||bt=="Sh33tJ5")){var kt=it,Pt=new_buf(bt.length);for(Qe=0;Qe<bt.length;++Qe)Pt.write_shift(1,bt.charCodeAt(Qe)&127);Pt=Pt.slice(0,Pt.l),yt[lt]=typeof dt.content=="string"?CRC32.bstr(dt.content,0):CRC32.buf(dt.content,0);var It=typeof dt.content=="string"?s2a(dt.content):dt.content;Ye==8&&(It=ue(It)),qe=new_buf(30),qe.write_shift(4,67324752),qe.write_shift(2,20),qe.write_shift(2,Je),qe.write_shift(2,Ye),dt.mt?E(qe,dt.mt):qe.write_shift(4,0),qe.write_shift(-4,yt[lt]),qe.write_shift(4,It.length),qe.write_shift(4,dt.content.length),qe.write_shift(2,Pt.length),qe.write_shift(2,0),it+=qe.length,Pe.push(qe),it+=Pt.length,Pe.push(Pt),it+=It.length,Pe.push(It),qe=new_buf(46),qe.write_shift(4,33639248),qe.write_shift(2,0),qe.write_shift(2,20),qe.write_shift(2,Je),qe.write_shift(2,Ye),qe.write_shift(4,0),qe.write_shift(-4,yt[lt]),qe.write_shift(4,It.length),qe.write_shift(4,dt.content.length),qe.write_shift(2,Pt.length),qe.write_shift(2,0),qe.write_shift(2,0),qe.write_shift(2,0),qe.write_shift(2,0),qe.write_shift(4,0),qe.write_shift(4,kt),Tt+=qe.l,Fe.push(qe),Tt+=Pt.length,Fe.push(Pt),++lt}return qe=new_buf(22),qe.write_shift(4,101010256),qe.write_shift(2,0),qe.write_shift(2,0),qe.write_shift(2,lt),qe.write_shift(2,lt),qe.write_shift(4,Tt),qe.write_shift(4,it),qe.write_shift(2,0),bconcat([bconcat(Pe),bconcat(Fe),qe])}var hr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Xt(se,_e){if(se.ctype)return se.ctype;var $e=se.name||"",Pe=$e.match(/\.([^\.]+)$/);return Pe&&hr[Pe[1]]||_e&&(Pe=($e=_e).match(/[\.\\]([^\.\\])+$/),Pe&&hr[Pe[1]])?hr[Pe[1]]:"application/octet-stream"}function Ht(se){for(var _e=Base64_encode(se),$e=[],Pe=0;Pe<_e.length;Pe+=76)$e.push(_e.slice(Pe,Pe+76));return $e.join(`\r
`)+`\r
`}function gr(se){var _e=se.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Qe){var it=Qe.charCodeAt(0).toString(16).toUpperCase();return"="+(it.length==1?"0"+it:it)});_e=_e.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),_e.charAt(0)==`
`&&(_e="=0D"+_e.slice(1)),_e=_e.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var $e=[],Pe=_e.split(`\r
`),Fe=0;Fe<Pe.length;++Fe){var qe=Pe[Fe];if(qe.length==0){$e.push("");continue}for(var Ye=0;Ye<qe.length;){var Je=76,tt=qe.slice(Ye,Ye+Je);tt.charAt(Je-1)=="="?Je--:tt.charAt(Je-2)=="="?Je-=2:tt.charAt(Je-3)=="="&&(Je-=3),tt=qe.slice(Ye,Ye+Je),Ye+=Je,Ye<qe.length&&(tt+="="),$e.push(tt)}}return $e.join(`\r
`)}function Qt(se){for(var _e=[],$e=0;$e<se.length;++$e){for(var Pe=se[$e];$e<=se.length&&Pe.charAt(Pe.length-1)=="=";)Pe=Pe.slice(0,Pe.length-1)+se[++$e];_e.push(Pe)}for(var Fe=0;Fe<_e.length;++Fe)_e[Fe]=_e[Fe].replace(/[=][0-9A-Fa-f]{2}/g,function(qe){return String.fromCharCode(parseInt(qe.slice(1),16))});return s2a(_e.join(`\r
`))}function Kt(se,_e,$e){for(var Pe="",Fe="",qe="",Ye,Je=0;Je<10;++Je){var tt=_e[Je];if(!tt||tt.match(/^\s*$/))break;var Qe=tt.match(/^(.*?):\s*([^\s].*)$/);if(Qe)switch(Qe[1].toLowerCase()){case"content-location":Pe=Qe[2].trim();break;case"content-type":qe=Qe[2].trim();break;case"content-transfer-encoding":Fe=Qe[2].trim();break}}switch(++Je,Fe.toLowerCase()){case"base64":Ye=s2a(Base64_decode(_e.slice(Je).join("")));break;case"quoted-printable":Ye=Qt(_e.slice(Je));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Fe)}var it=wr(se,Pe.slice($e.length),Ye,{unsafe:!0});qe&&(it.ctype=qe)}function $r(se,_e){if(ie(se.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var $e=_e&&_e.root||"",Pe=(has_buf&&Buffer.isBuffer(se)?se.toString("binary"):ie(se)).split(`\r
`),Fe=0,qe="";for(Fe=0;Fe<Pe.length;++Fe)if(qe=Pe[Fe],!!/^Content-Location:/i.test(qe)&&(qe=qe.slice(qe.indexOf("file")),$e||($e=qe.slice(0,qe.lastIndexOf("/")+1)),qe.slice(0,$e.length)!=$e))for(;$e.length>0&&($e=$e.slice(0,$e.length-1),$e=$e.slice(0,$e.lastIndexOf("/")+1),qe.slice(0,$e.length)!=$e););var Ye=(Pe[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var Je="--"+(Ye[1]||""),tt=[],Qe=[],it={FileIndex:tt,FullPaths:Qe};Z(it);var lt,vt=0;for(Fe=0;Fe<Pe.length;++Fe){var bt=Pe[Fe];bt!==Je&&bt!==Je+"--"||(vt++&&Kt(it,Pe.slice(lt,Fe),$e),lt=Fe)}return it}function tr(se,_e){var $e=_e||{},Pe=$e.boundary||"SheetJS";Pe="------="+Pe;for(var Fe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Pe.slice(2)+'"',"","",""],qe=se.FullPaths[0],Ye=qe,Je=se.FileIndex[0],tt=1;tt<se.FullPaths.length;++tt)if(Ye=se.FullPaths[tt].slice(qe.length),Je=se.FileIndex[tt],!(!Je.size||!Je.content||Ye=="Sh33tJ5")){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Tt){return"_x"+Tt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Tt){return"_u"+Tt.charCodeAt(0).toString(16)+"_"});for(var Qe=Je.content,it=has_buf&&Buffer.isBuffer(Qe)?Qe.toString("binary"):ie(Qe),lt=0,vt=Math.min(1024,it.length),bt=0,dt=0;dt<=vt;++dt)(bt=it.charCodeAt(dt))>=32&&bt<128&&++lt;var yt=lt>=vt*4/5;Fe.push(Pe),Fe.push("Content-Location: "+($e.root||"file:///C:/SheetJS/")+Ye),Fe.push("Content-Transfer-Encoding: "+(yt?"quoted-printable":"base64")),Fe.push("Content-Type: "+Xt(Je,Ye)),Fe.push(""),Fe.push(yt?gr(it):Ht(it))}return Fe.push(Pe+`--\r
`),Fe.join(`\r
`)}function Ut(se){var _e={};return Z(_e,se),_e}function wr(se,_e,$e,Pe){var Fe=Pe&&Pe.unsafe;Fe||Z(se);var qe=!Fe&&CFB.find(se,_e);if(!qe){var Ye=se.FullPaths[0];_e.slice(0,Ye.length)==Ye?Ye=_e:(Ye.slice(-1)!="/"&&(Ye+="/"),Ye=(Ye+_e).replace("//","/")),qe={name:S(_e),type:2},se.FileIndex.push(qe),se.FullPaths.push(Ye),Fe||CFB.utils.cfb_gc(se)}return qe.content=$e,qe.size=$e?$e.length:0,Pe&&(Pe.CLSID&&(qe.clsid=Pe.CLSID),Pe.mt&&(qe.mt=Pe.mt),Pe.ct&&(qe.ct=Pe.ct)),qe}function De(se,_e){Z(se);var $e=CFB.find(se,_e);if($e){for(var Pe=0;Pe<se.FileIndex.length;++Pe)if(se.FileIndex[Pe]==$e)return se.FileIndex.splice(Pe,1),se.FullPaths.splice(Pe,1),!0}return!1}function ke(se,_e,$e){Z(se);var Pe=CFB.find(se,_e);if(Pe){for(var Fe=0;Fe<se.FileIndex.length;++Fe)if(se.FileIndex[Fe]==Pe)return se.FileIndex[Fe].name=S($e),se.FullPaths[Fe]=$e,!0}return!1}function Se(se){ce(se,!0)}return n.find=pe,n.read=J,n.parse=I,n.write=ne,n.writeFile=oe,n.utils={cfb_new:Ut,cfb_add:wr,cfb_del:De,cfb_mov:ke,cfb_gc:Se,ReadShift,CheckField,prep_blob,bconcat,use_zlib:K,_deflateRaw:ze,_inflateRaw:Lt,consts:re},n}(),_fs;function set_fs(r){_fs=r}function blobify(r){return typeof r=="string"?s2ab(r):Array.isArray(r)?a2u(r):r}function write_dl(r,n,_){if(typeof _fs<"u"&&_fs.writeFileSync)return _?_fs.writeFileSync(r,n,_):_fs.writeFileSync(r,n);if(typeof Deno<"u"){if(_&&typeof n=="string")switch(_){case"utf8":n=new TextEncoder(_).encode(n);break;case"binary":n=s2ab(n);break;default:throw new Error("Unsupported encoding "+_)}return Deno.writeFileSync(r,n)}var x=_=="utf8"?utf8write(n):n;if(typeof IE_SaveFile<"u")return IE_SaveFile(x,r);if(typeof Blob<"u"){var S=new Blob([blobify(x)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(S,r);if(typeof saveAs<"u")return saveAs(S,r);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var E=URL.createObjectURL(S);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(E)},6e4),chrome.downloads.download({url:E,filename:r,saveAs:!0});var C=document.createElement("a");if(C.download!=null)return C.download=r,C.href=E,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(E)},6e4),E}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var T=File(r);return T.open("w"),T.encoding="binary",Array.isArray(n)&&(n=a2s(n)),T.write(n),T.close(),n}catch(B){if(!B.message||!B.message.match(/onstruct/))throw B}throw new Error("cannot save file "+r)}function read_binary(r){if(typeof _fs<"u")return _fs.readFileSync(r);if(typeof Deno<"u")return Deno.readFileSync(r);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var n=File(r);n.open("r"),n.encoding="binary";var _=n.read();return n.close(),_}catch(x){if(!x.message||!x.message.match(/onstruct/))throw x}throw new Error("Cannot access file "+r)}function keys(r){for(var n=Object.keys(r),_=[],x=0;x<n.length;++x)Object.prototype.hasOwnProperty.call(r,n[x])&&_.push(n[x]);return _}function evert_key(r,n){for(var _=[],x=keys(r),S=0;S!==x.length;++S)_[r[x[S]][n]]==null&&(_[r[x[S]][n]]=x[S]);return _}function evert(r){for(var n=[],_=keys(r),x=0;x!==_.length;++x)n[r[_[x]]]=_[x];return n}function evert_num(r){for(var n=[],_=keys(r),x=0;x!==_.length;++x)n[r[_[x]]]=parseInt(_[x],10);return n}function evert_arr(r){for(var n=[],_=keys(r),x=0;x!==_.length;++x)n[r[_[x]]]==null&&(n[r[_[x]]]=[]),n[r[_[x]]].push(_[x]);return n}var basedate=new Date(1899,11,30,0,0,0);function datenum(r,n){var _=r.getTime();n&&(_-=1462*24*60*60*1e3);var x=basedate.getTime()+(r.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4;return(_-x)/(24*60*60*1e3)}var refdate=new Date,dnthresh=basedate.getTime()+(refdate.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4,refoffset=refdate.getTimezoneOffset();function numdate(r){var n=new Date;return n.setTime(r*24*60*60*1e3+dnthresh),n.getTimezoneOffset()!==refoffset&&n.setTime(n.getTime()+(n.getTimezoneOffset()-refoffset)*6e4),n}function parse_isodur(r){var n=0,_=0,x=!1,S=r.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!S)throw new Error("|"+r+"| is not an ISO8601 Duration");for(var E=1;E!=S.length;++E)if(S[E]){switch(_=1,E>3&&(x=!0),S[E].slice(S[E].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+S[E].slice(S[E].length-1));case"D":_*=24;case"H":_*=60;case"M":if(x)_*=60;else throw new Error("Unsupported ISO Duration Field: M")}n+=_*parseInt(S[E],10)}return n}var good_pd_date_1=new Date("2017-02-19T19:06:09.000Z"),good_pd_date=isNaN(good_pd_date_1.getFullYear())?new Date("2/19/17"):good_pd_date_1,good_pd=good_pd_date.getFullYear()==2017;function parseDate(r,n){var _=new Date(r);if(good_pd)return n>0?_.setTime(_.getTime()+_.getTimezoneOffset()*60*1e3):n<0&&_.setTime(_.getTime()-_.getTimezoneOffset()*60*1e3),_;if(r instanceof Date)return r;if(good_pd_date.getFullYear()==1917&&!isNaN(_.getFullYear())){var x=_.getFullYear();return r.indexOf(""+x)>-1||_.setFullYear(_.getFullYear()+100),_}var S=r.match(/\d+/g)||["2017","2","19","0","0","0"],E=new Date(+S[0],+S[1]-1,+S[2],+S[3]||0,+S[4]||0,+S[5]||0);return r.indexOf("Z")>-1&&(E=new Date(E.getTime()-E.getTimezoneOffset()*60*1e3)),E}function cc2str(r,n){if(has_buf&&Buffer.isBuffer(r)){if(n&&buf_utf16le){if(r[0]==255&&r[1]==254)return utf8write(r.slice(2).toString("utf16le"));if(r[1]==254&&r[2]==255)return utf8write(utf16beread(r.slice(2).toString("binary")))}return r.toString("binary")}if(typeof TextDecoder<"u")try{if(n){if(r[0]==255&&r[1]==254)return utf8write(new TextDecoder("utf-16le").decode(r.slice(2)));if(r[0]==254&&r[1]==255)return utf8write(new TextDecoder("utf-16be").decode(r.slice(2)))}var _={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(r)&&(r=new Uint8Array(r)),new TextDecoder("latin1").decode(r).replace(/[]/g,function(E){return _[E]||E})}catch{}for(var x=[],S=0;S!=r.length;++S)x.push(String.fromCharCode(r[S]));return x.join("")}function dup(r){if(typeof JSON<"u"&&!Array.isArray(r))return JSON.parse(JSON.stringify(r));if(typeof r!="object"||r==null)return r;if(r instanceof Date)return new Date(r.getTime());var n={};for(var _ in r)Object.prototype.hasOwnProperty.call(r,_)&&(n[_]=dup(r[_]));return n}function fill(r,n){for(var _="";_.length<n;)_+=r;return _}function fuzzynum(r){var n=Number(r);if(!isNaN(n))return isFinite(n)?n:NaN;if(!/\d/.test(r))return n;var _=1,x=r.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return _*=100,""});return!isNaN(n=Number(x))||(x=x.replace(/[(](.*)[)]/,function(S,E){return _=-_,E}),!isNaN(n=Number(x)))?n/_:n}var FDRE1=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/;function fuzzytime1(r){return r[2]?r[3]?r[4]?new Date(1899,11,30,+r[1]%12+(r[7]=="p"?12:0),+r[2],+r[4],parseFloat(r[3])*1e3):new Date(1899,11,30,r[7]=="p"?12:0,+r[1],+r[2],parseFloat(r[3])*1e3):r[5]?new Date(1899,11,30,+r[1]%12+(r[7]=="p"?12:0),+r[2],+r[5],r[6]?parseFloat(r[6])*1e3:0):new Date(1899,11,30,+r[1]%12+(r[7]=="p"?12:0),+r[2],0,0):new Date(1899,11,30,+r[1]%12+(r[7]=="p"?12:0),0,0,0)}var lower_months=["january","february","march","april","may","june","july","august","september","october","november","december"];function fuzzydate(r){var n=r.toLowerCase(),_=n.replace(/\s+/g," ").trim(),x=_.match(FDRE1);if(x)return fuzzytime1(x);var S=new Date(r),E=new Date(NaN),C=S.getYear();S.getMonth();var T=S.getDate();if(isNaN(T))return E;if(n.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(n=n.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),n.length>3&&lower_months.indexOf(n)==-1)return E}else if(n.replace(/[ap]m?/,"").match(/[a-z]/))return E;return C<0||C>8099||r.match(/[^-0-9:,\/\\]/)?E:S}var split_regex=function(){var r="abacaba".split(/(:?b)/i).length==5;return function(_,x,S){if(r||typeof x=="string")return _.split(x);for(var E=_.split(x),C=[E[0]],T=1;T<E.length;++T)C.push(S),C.push(E[T]);return C}}();function getdatastr(r){return r?r.content&&r.type?cc2str(r.content,!0):r.data?debom(r.data):r.asNodeBuffer&&has_buf?debom(r.asNodeBuffer().toString("binary")):r.asBinary?debom(r.asBinary()):r._data&&r._data.getContent?debom(cc2str(Array.prototype.slice.call(r._data.getContent(),0))):null:null}function getdatabin(r){if(!r)return null;if(r.data)return char_codes(r.data);if(r.asNodeBuffer&&has_buf)return r.asNodeBuffer();if(r._data&&r._data.getContent){var n=r._data.getContent();return typeof n=="string"?char_codes(n):Array.prototype.slice.call(n)}return r.content&&r.type?r.content:null}function getdata(r){return r&&r.name.slice(-4)===".bin"?getdatabin(r):getdatastr(r)}function safegetzipfile(r,n){for(var _=r.FullPaths||keys(r.files),x=n.toLowerCase().replace(/[\/]/g,"\\"),S=x.replace(/\\/g,"/"),E=0;E<_.length;++E){var C=_[E].replace(/^Root Entry[\/]/,"").toLowerCase();if(x==C||S==C)return r.files?r.files[_[E]]:r.FileIndex[E]}return null}function getzipfile(r,n){var _=safegetzipfile(r,n);if(_==null)throw new Error("Cannot find file "+n+" in zip");return _}function getzipdata(r,n,_){if(!_)return getdata(getzipfile(r,n));if(!n)return null;try{return getzipdata(r,n)}catch{return null}}function getzipstr(r,n,_){if(!_)return getdatastr(getzipfile(r,n));if(!n)return null;try{return getzipstr(r,n)}catch{return null}}function getzipbin(r,n,_){if(!_)return getdatabin(getzipfile(r,n));if(!n)return null;try{return getzipbin(r,n)}catch{return null}}function zipentries(r){for(var n=r.FullPaths||keys(r.files),_=[],x=0;x<n.length;++x)n[x].slice(-1)!="/"&&_.push(n[x].replace(/^Root Entry[\/]/,""));return _.sort()}function zip_add_file(r,n,_){if(r.FullPaths){if(typeof _=="string"){var x;return has_buf?x=Buffer_from(_):x=utf8decode(_),CFB.utils.cfb_add(r,n,x)}CFB.utils.cfb_add(r,n,_)}else r.file(n,_)}function zip_new(){return CFB.utils.cfb_new()}function zip_read(r,n){switch(n.type){case"base64":return CFB.read(r,{type:"base64"});case"binary":return CFB.read(r,{type:"binary"});case"buffer":case"array":return CFB.read(r,{type:"buffer"})}throw new Error("Unrecognized type "+n.type)}function resolve_path(r,n){if(r.charAt(0)=="/")return r.slice(1);var _=n.split("/");n.slice(-1)!="/"&&_.pop();for(var x=r.split("/");x.length!==0;){var S=x.shift();S===".."?_.pop():S!=="."&&_.push(S)}return _.join("/")}var XML_HEADER=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,attregexg=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,tagregex1=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,tagregex2=/<[^>]*>/g,tagregex=XML_HEADER.match(tagregex1)?tagregex1:tagregex2,nsregex=/<\w*:/,nsregex2=/<(\/?)\w+:/;function parsexmltag(r,n,_){for(var x={},S=0,E=0;S!==r.length&&!((E=r.charCodeAt(S))===32||E===10||E===13);++S);if(n||(x[0]=r.slice(0,S)),S===r.length)return x;var C=r.match(attregexg),T=0,B="",A=0,I="",N="",V=1;if(C)for(A=0;A!=C.length;++A){for(N=C[A],E=0;E!=N.length&&N.charCodeAt(E)!==61;++E);for(I=N.slice(0,E).trim();N.charCodeAt(E+1)==32;)++E;for(V=(S=N.charCodeAt(E+1))==34||S==39?1:0,B=N.slice(E+1+V,N.length-V),T=0;T!=I.length&&I.charCodeAt(T)!==58;++T);if(T===I.length)I.indexOf("_")>0&&(I=I.slice(0,I.indexOf("_"))),x[I]=B,_||(x[I.toLowerCase()]=B);else{var D=(T===5&&I.slice(0,5)==="xmlns"?"xmlns":"")+I.slice(T+1);if(x[D]&&I.slice(T-3,T)=="ext")continue;x[D]=B,_||(x[D.toLowerCase()]=B)}}return x}function strip_ns(r){return r.replace(nsregex2,"<$1")}var encodings={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},rencoding=evert(encodings),unescapexml=function(){var r=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,n=/_x([\da-fA-F]{4})_/ig;function _(x){var S=x+"",E=S.indexOf("<![CDATA[");if(E==-1)return S.replace(r,function(T,B){return encodings[T]||String.fromCharCode(parseInt(B,T.indexOf("x")>-1?16:10))||T}).replace(n,function(T,B){return String.fromCharCode(parseInt(B,16))});var C=S.indexOf("]]>");return _(S.slice(0,E))+S.slice(E+9,C)+_(S.slice(C+3))}return function(S,E){var C=_(S);return E?C.replace(/\r\n/g,`
`):C}}(),decregex=/[&<>'"]/g,charegex=/[\u0000-\u0008\u000b-\u001f\uFFFE-\uFFFF]/g;function escapexml(r){var n=r+"";return n.replace(decregex,function(_){return rencoding[_]}).replace(charegex,function(_){return"_x"+("000"+_.charCodeAt(0).toString(16)).slice(-4)+"_"})}function escapexmltag(r){return escapexml(r).replace(/ /g,"_x0020_")}var htmlcharegex=/[\u0000-\u001f]/g;function escapehtml(r){var n=r+"";return n.replace(decregex,function(_){return rencoding[_]}).replace(/\n/g,"<br/>").replace(htmlcharegex,function(_){return"&#x"+("000"+_.charCodeAt(0).toString(16)).slice(-4)+";"})}function escapexlml(r){var n=r+"";return n.replace(decregex,function(_){return rencoding[_]}).replace(htmlcharegex,function(_){return"&#x"+_.charCodeAt(0).toString(16).toUpperCase()+";"})}var xlml_fixstr=function(){var r=/&#(\d+);/g;function n(_,x){return String.fromCharCode(parseInt(x,10))}return function(x){return x.replace(r,n)}}();function xlml_unfixstr(r){return r.replace(/(\r\n|[\r\n])/g,"&#10;")}function parsexmlbool(r){switch(r){case 1:case!0:case"1":case"true":return!0;case 0:case!1:case"0":case"false":return!1}return!1}function utf8reada(r){for(var n="",_=0,x=0,S=0,E=0,C=0,T=0;_<r.length;){if(x=r.charCodeAt(_++),x<128){n+=String.fromCharCode(x);continue}if(S=r.charCodeAt(_++),x>191&&x<224){C=(x&31)<<6,C|=S&63,n+=String.fromCharCode(C);continue}if(E=r.charCodeAt(_++),x<240){n+=String.fromCharCode((x&15)<<12|(S&63)<<6|E&63);continue}C=r.charCodeAt(_++),T=((x&7)<<18|(S&63)<<12|(E&63)<<6|C&63)-65536,n+=String.fromCharCode(55296+(T>>>10&1023)),n+=String.fromCharCode(56320+(T&1023))}return n}function utf8readb(r){var n=new_raw_buf(2*r.length),_,x,S=1,E=0,C=0,T;for(x=0;x<r.length;x+=S)S=1,(T=r.charCodeAt(x))<128?_=T:T<224?(_=(T&31)*64+(r.charCodeAt(x+1)&63),S=2):T<240?(_=(T&15)*4096+(r.charCodeAt(x+1)&63)*64+(r.charCodeAt(x+2)&63),S=3):(S=4,_=(T&7)*262144+(r.charCodeAt(x+1)&63)*4096+(r.charCodeAt(x+2)&63)*64+(r.charCodeAt(x+3)&63),_-=65536,C=55296+(_>>>10&1023),_=56320+(_&1023)),C!==0&&(n[E++]=C&255,n[E++]=C>>>8,C=0),n[E++]=_%256,n[E++]=_>>>8;return n.slice(0,E).toString("ucs2")}function utf8readc(r){return Buffer_from(r,"binary").toString("utf8")}var utf8corpus="foo bar baz",utf8read=has_buf&&(utf8readc(utf8corpus)==utf8reada(utf8corpus)&&utf8readc||utf8readb(utf8corpus)==utf8reada(utf8corpus)&&utf8readb)||utf8reada,utf8write=has_buf?function(r){return Buffer_from(r,"utf8").toString("binary")}:function(r){for(var n=[],_=0,x=0,S=0;_<r.length;)switch(x=r.charCodeAt(_++),!0){case x<128:n.push(String.fromCharCode(x));break;case x<2048:n.push(String.fromCharCode(192+(x>>6))),n.push(String.fromCharCode(128+(x&63)));break;case(x>=55296&&x<57344):x-=55296,S=r.charCodeAt(_++)-56320+(x<<10),n.push(String.fromCharCode(240+(S>>18&7))),n.push(String.fromCharCode(144+(S>>12&63))),n.push(String.fromCharCode(128+(S>>6&63))),n.push(String.fromCharCode(128+(S&63)));break;default:n.push(String.fromCharCode(224+(x>>12))),n.push(String.fromCharCode(128+(x>>6&63))),n.push(String.fromCharCode(128+(x&63)))}return n.join("")},matchtag=function(){var r={};return function(_,x){var S=_+"|"+(x||"");return r[S]?r[S]:r[S]=new RegExp("<(?:\\w+:)?"+_+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+_+">",x||"")}}(),htmldecode=function(){var r=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(n){return[new RegExp("&"+n[0]+";","ig"),n[1]]});return function(_){for(var x=_.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),S=0;S<r.length;++S)x=x.replace(r[S][0],r[S][1]);return x}}(),vtregex=function(){var r={};return function(_){return r[_]!==void 0?r[_]:r[_]=new RegExp("<(?:vt:)?"+_+">([\\s\\S]*?)</(?:vt:)?"+_+">","g")}}(),vtvregex=/<\/?(?:vt:)?variant>/g,vtmregex=/<(?:vt:)([^>]*)>([\s\S]*)</;function parseVector(r,n){var _=parsexmltag(r),x=r.match(vtregex(_.baseType))||[],S=[];if(x.length!=_.size){if(n.WTF)throw new Error("unexpected vector length "+x.length+" != "+_.size);return S}return x.forEach(function(E){var C=E.replace(vtvregex,"").match(vtmregex);C&&S.push({v:utf8read(C[2]),t:C[1]})}),S}var wtregex=/(^\s|\s$|\n)/;function writetag(r,n){return"<"+r+(n.match(wtregex)?' xml:space="preserve"':"")+">"+n+"</"+r+">"}function wxt_helper(r){return keys(r).map(function(n){return" "+n+'="'+r[n]+'"'}).join("")}function writextag(r,n,_){return"<"+r+(_!=null?wxt_helper(_):"")+(n!=null?(n.match(wtregex)?' xml:space="preserve"':"")+">"+n+"</"+r:"/")+">"}function write_w3cdtf(r,n){try{return r.toISOString().replace(/\.\d*/,"")}catch(_){if(n)throw _}return""}function write_vt(r,n){switch(typeof r){case"string":var _=writextag("vt:lpwstr",escapexml(r));return n&&(_=_.replace(/&quot;/g,"_x0022_")),_;case"number":return writextag((r|0)==r?"vt:i4":"vt:r8",escapexml(String(r)));case"boolean":return writextag("vt:bool",r?"true":"false")}if(r instanceof Date)return writextag("vt:filetime",write_w3cdtf(r));throw new Error("Unable to serialize "+r)}function xlml_normalize(r){if(has_buf&&Buffer.isBuffer(r))return r.toString("utf8");if(typeof r=="string")return r;if(typeof Uint8Array<"u"&&r instanceof Uint8Array)return utf8read(a2s(ab2a(r)));throw new Error("Bad input format: expected Buffer or string")}var xlmlregex=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/](?:[^>=]|="[^"]*?")*)?>/mg,XMLNS={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},XMLNS_main=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],XLMLNS={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function read_double_le(r,n){for(var _=1-2*(r[n+7]>>>7),x=((r[n+7]&127)<<4)+(r[n+6]>>>4&15),S=r[n+6]&15,E=5;E>=0;--E)S=S*256+r[n+E];return x==2047?S==0?_*(1/0):NaN:(x==0?x=-1022:(x-=1023,S+=Math.pow(2,52)),_*Math.pow(2,x-52)*S)}function write_double_le(r,n,_){var x=(n<0||1/n==-1/0?1:0)<<7,S=0,E=0,C=x?-n:n;isFinite(C)?C==0?S=E=0:(S=Math.floor(Math.log(C)/Math.LN2),E=C*Math.pow(2,52-S),S<=-1023&&(!isFinite(E)||E<Math.pow(2,52))?S=-1022:(E-=Math.pow(2,52),S+=1023)):(S=2047,E=isNaN(n)?26985:0);for(var T=0;T<=5;++T,E/=256)r[_+T]=E&255;r[_+6]=(S&15)<<4|E&15,r[_+7]=S>>4|x}var ___toBuffer=function(r){for(var n=[],_=10240,x=0;x<r[0].length;++x)if(r[0][x])for(var S=0,E=r[0][x].length;S<E;S+=_)n.push.apply(n,r[0][x].slice(S,S+_));return n},__toBuffer=has_buf?function(r){return r[0].length>0&&Buffer.isBuffer(r[0][0])?Buffer.concat(r[0].map(function(n){return Buffer.isBuffer(n)?n:Buffer_from(n)})):___toBuffer(r)}:___toBuffer,___utf16le=function(r,n,_){for(var x=[],S=n;S<_;S+=2)x.push(String.fromCharCode(__readUInt16LE(r,S)));return x.join("").replace(chr0,"")},__utf16le=has_buf?function(r,n,_){return!Buffer.isBuffer(r)||!buf_utf16le?___utf16le(r,n,_):r.toString("utf16le",n,_).replace(chr0,"")}:___utf16le,___hexlify=function(r,n,_){for(var x=[],S=n;S<n+_;++S)x.push(("0"+r[S].toString(16)).slice(-2));return x.join("")},__hexlify=has_buf?function(r,n,_){return Buffer.isBuffer(r)?r.toString("hex",n,n+_):___hexlify(r,n,_)}:___hexlify,___utf8=function(r,n,_){for(var x=[],S=n;S<_;S++)x.push(String.fromCharCode(__readUInt8(r,S)));return x.join("")},__utf8=has_buf?function r(n,_,x){return Buffer.isBuffer(n)?n.toString("utf8",_,x):___utf8(n,_,x)}:___utf8,___lpstr=function(r,n){var _=__readUInt32LE(r,n);return _>0?__utf8(r,n+4,n+4+_-1):""},__lpstr=___lpstr,___cpstr=function(r,n){var _=__readUInt32LE(r,n);return _>0?__utf8(r,n+4,n+4+_-1):""},__cpstr=___cpstr,___lpwstr=function(r,n){var _=2*__readUInt32LE(r,n);return _>0?__utf8(r,n+4,n+4+_-1):""},__lpwstr=___lpwstr,___lpp4=function r(n,_){var x=__readUInt32LE(n,_);return x>0?__utf16le(n,_+4,_+4+x):""},__lpp4=___lpp4,___8lpp4=function(r,n){var _=__readUInt32LE(r,n);return _>0?__utf8(r,n+4,n+4+_):""},__8lpp4=___8lpp4,___double=function(r,n){return read_double_le(r,n)},__double=___double,is_buf=function r(n){return Array.isArray(n)||typeof Uint8Array<"u"&&n instanceof Uint8Array};has_buf&&(__lpstr=function(n,_){if(!Buffer.isBuffer(n))return ___lpstr(n,_);var x=n.readUInt32LE(_);return x>0?n.toString("utf8",_+4,_+4+x-1):""},__cpstr=function(n,_){if(!Buffer.isBuffer(n))return ___cpstr(n,_);var x=n.readUInt32LE(_);return x>0?n.toString("utf8",_+4,_+4+x-1):""},__lpwstr=function(n,_){if(!Buffer.isBuffer(n)||!buf_utf16le)return ___lpwstr(n,_);var x=2*n.readUInt32LE(_);return n.toString("utf16le",_+4,_+4+x-1)},__lpp4=function(n,_){if(!Buffer.isBuffer(n)||!buf_utf16le)return ___lpp4(n,_);var x=n.readUInt32LE(_);return n.toString("utf16le",_+4,_+4+x)},__8lpp4=function(n,_){if(!Buffer.isBuffer(n))return ___8lpp4(n,_);var x=n.readUInt32LE(_);return n.toString("utf8",_+4,_+4+x)},__double=function(n,_){return Buffer.isBuffer(n)?n.readDoubleLE(_):___double(n,_)},is_buf=function(n){return Buffer.isBuffer(n)||Array.isArray(n)||typeof Uint8Array<"u"&&n instanceof Uint8Array});var __readUInt8=function(r,n){return r[n]},__readUInt16LE=function(r,n){return r[n+1]*256+r[n]},__readInt16LE=function(r,n){var _=r[n+1]*256+r[n];return _<32768?_:(65535-_+1)*-1},__readUInt32LE=function(r,n){return r[n+3]*(1<<24)+(r[n+2]<<16)+(r[n+1]<<8)+r[n]},__readInt32LE=function(r,n){return r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]},__readInt32BE=function(r,n){return r[n]<<24|r[n+1]<<16|r[n+2]<<8|r[n+3]};function ReadShift(r,n){var _="",x,S,E=[],C,T,B,A;switch(n){case"dbcs":if(A=this.l,has_buf&&Buffer.isBuffer(this)&&buf_utf16le)_=this.slice(this.l,this.l+2*r).toString("utf16le");else for(B=0;B<r;++B)_+=String.fromCharCode(__readUInt16LE(this,A)),A+=2;r*=2;break;case"utf8":_=__utf8(this,this.l,this.l+r);break;case"utf16le":r*=2,_=__utf16le(this,this.l,this.l+r);break;case"wstr":return ReadShift.call(this,r,"dbcs");case"lpstr-ansi":_=__lpstr(this,this.l),r=4+__readUInt32LE(this,this.l);break;case"lpstr-cp":_=__cpstr(this,this.l),r=4+__readUInt32LE(this,this.l);break;case"lpwstr":_=__lpwstr(this,this.l),r=4+2*__readUInt32LE(this,this.l);break;case"lpp4":r=4+__readUInt32LE(this,this.l),_=__lpp4(this,this.l),r&2&&(r+=2);break;case"8lpp4":r=4+__readUInt32LE(this,this.l),_=__8lpp4(this,this.l),r&3&&(r+=4-(r&3));break;case"cstr":for(r=0,_="";(C=__readUInt8(this,this.l+r++))!==0;)E.push(_getchar(C));_=E.join("");break;case"_wstr":for(r=0,_="";(C=__readUInt16LE(this,this.l+r))!==0;)E.push(_getchar(C)),r+=2;r+=2,_=E.join("");break;case"dbcs-cont":for(_="",A=this.l,B=0;B<r;++B){if(this.lens&&this.lens.indexOf(A)!==-1)return C=__readUInt8(this,A),this.l=A+1,T=ReadShift.call(this,r-B,C?"dbcs-cont":"sbcs-cont"),E.join("")+T;E.push(_getchar(__readUInt16LE(this,A))),A+=2}_=E.join(""),r*=2;break;case"cpstr":case"sbcs-cont":for(_="",A=this.l,B=0;B!=r;++B){if(this.lens&&this.lens.indexOf(A)!==-1)return C=__readUInt8(this,A),this.l=A+1,T=ReadShift.call(this,r-B,C?"dbcs-cont":"sbcs-cont"),E.join("")+T;E.push(_getchar(__readUInt8(this,A))),A+=1}_=E.join("");break;default:switch(r){case 1:return x=__readUInt8(this,this.l),this.l++,x;case 2:return x=(n==="i"?__readInt16LE:__readUInt16LE)(this,this.l),this.l+=2,x;case 4:case-4:return n==="i"||!(this[this.l+3]&128)?(x=(r>0?__readInt32LE:__readInt32BE)(this,this.l),this.l+=4,x):(S=__readUInt32LE(this,this.l),this.l+=4,S);case 8:case-8:if(n==="f")return r==8?S=__double(this,this.l):S=__double([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,S;r=8;case 16:_=__hexlify(this,this.l,r);break}}return this.l+=r,_}var __writeUInt32LE=function(r,n,_){r[_]=n&255,r[_+1]=n>>>8&255,r[_+2]=n>>>16&255,r[_+3]=n>>>24&255},__writeInt32LE=function(r,n,_){r[_]=n&255,r[_+1]=n>>8&255,r[_+2]=n>>16&255,r[_+3]=n>>24&255},__writeUInt16LE=function(r,n,_){r[_]=n&255,r[_+1]=n>>>8&255};function WriteShift(r,n,_){var x=0,S=0;if(_==="dbcs"){for(S=0;S!=n.length;++S)__writeUInt16LE(this,n.charCodeAt(S),this.l+2*S);x=2*n.length}else if(_==="sbcs"||_=="cpstr"){for(n=n.replace(/[^\x00-\x7F]/g,"_"),S=0;S!=n.length;++S)this[this.l+S]=n.charCodeAt(S)&255;x=n.length}else if(_==="hex"){for(;S<r;++S)this[this.l++]=parseInt(n.slice(2*S,2*S+2),16)||0;return this}else if(_==="utf16le"){var E=Math.min(this.l+r,this.length);for(S=0;S<Math.min(n.length,r);++S){var C=n.charCodeAt(S);this[this.l++]=C&255,this[this.l++]=C>>8}for(;this.l<E;)this[this.l++]=0;return this}else switch(r){case 1:x=1,this[this.l]=n&255;break;case 2:x=2,this[this.l]=n&255,n>>>=8,this[this.l+1]=n&255;break;case 3:x=3,this[this.l]=n&255,n>>>=8,this[this.l+1]=n&255,n>>>=8,this[this.l+2]=n&255;break;case 4:x=4,__writeUInt32LE(this,n,this.l);break;case 8:if(x=8,_==="f"){write_double_le(this,n,this.l);break}case 16:break;case-4:x=4,__writeInt32LE(this,n,this.l);break}return this.l+=x,this}function CheckField(r,n){var _=__hexlify(this,this.l,r.length>>1);if(_!==r)throw new Error(n+"Expected "+r+" saw "+_);this.l+=r.length>>1}function prep_blob(r,n){r.l=n,r.read_shift=ReadShift,r.chk=CheckField,r.write_shift=WriteShift}function parsenoop(r,n){r.l+=n}function new_buf(r){var n=new_raw_buf(r);return prep_blob(n,0),n}function recordhopper(r,n,_){if(r){var x,S,E;prep_blob(r,r.l||0);for(var C=r.length,T=0,B=0;r.l<C;){T=r.read_shift(1),T&128&&(T=(T&127)+((r.read_shift(1)&127)<<7));var A=XLSBRecordEnum[T]||XLSBRecordEnum[65535];for(x=r.read_shift(1),E=x&127,S=1;S<4&&x&128;++S)E+=((x=r.read_shift(1))&127)<<7*S;B=r.l+E;var I=A.f&&A.f(r,E,_);if(r.l=B,n(I,A,T))return}}}function buf_array(){var r=[],n=has_buf?256:2048,_=function(A){var I=new_buf(A);return prep_blob(I,0),I},x=_(n),S=function(){x&&(x.l&&(x.length>x.l&&(x=x.slice(0,x.l),x.l=x.length),x.length>0&&r.push(x)),x=null)},E=function(A){return x&&A<x.length-x.l?x:(S(),x=_(Math.max(A+1,n)))},C=function(){return S(),bconcat(r)},T=function(A){S(),x=A,x.l==null&&(x.l=x.length),E(n)};return{next:E,push:T,end:C,_bufs:r}}function write_record(r,n,_,x){var S=+n,E;if(!isNaN(S)){x||(x=XLSBRecordEnum[S].p||(_||[]).length||0),E=1+(S>=128?1:0)+1,x>=128&&++E,x>=16384&&++E,x>=2097152&&++E;var C=r.next(E);S<=127?C.write_shift(1,S):(C.write_shift(1,(S&127)+128),C.write_shift(1,S>>7));for(var T=0;T!=4;++T)if(x>=128)C.write_shift(1,(x&127)+128),x>>=7;else{C.write_shift(1,x);break}x>0&&is_buf(_)&&r.push(_)}}function shift_cell_xls(r,n,_){var x=dup(r);if(n.s?(x.cRel&&(x.c+=n.s.c),x.rRel&&(x.r+=n.s.r)):(x.cRel&&(x.c+=n.c),x.rRel&&(x.r+=n.r)),!_||_.biff<12){for(;x.c>=256;)x.c-=256;for(;x.r>=65536;)x.r-=65536}return x}function shift_range_xls(r,n,_){var x=dup(r);return x.s=shift_cell_xls(x.s,n.s,_),x.e=shift_cell_xls(x.e,n.s,_),x}function encode_cell_xls(r,n){if(r.cRel&&r.c<0)for(r=dup(r);r.c<0;)r.c+=n>8?16384:256;if(r.rRel&&r.r<0)for(r=dup(r);r.r<0;)r.r+=n>8?1048576:n>5?65536:16384;var _=encode_cell(r);return!r.cRel&&r.cRel!=null&&(_=fix_col(_)),!r.rRel&&r.rRel!=null&&(_=fix_row(_)),_}function encode_range_xls(r,n){return r.s.r==0&&!r.s.rRel&&r.e.r==(n.biff>=12?1048575:n.biff>=8?65536:16384)&&!r.e.rRel?(r.s.cRel?"":"$")+encode_col(r.s.c)+":"+(r.e.cRel?"":"$")+encode_col(r.e.c):r.s.c==0&&!r.s.cRel&&r.e.c==(n.biff>=12?16383:255)&&!r.e.cRel?(r.s.rRel?"":"$")+encode_row(r.s.r)+":"+(r.e.rRel?"":"$")+encode_row(r.e.r):encode_cell_xls(r.s,n.biff)+":"+encode_cell_xls(r.e,n.biff)}function decode_row(r){return parseInt(unfix_row(r),10)-1}function encode_row(r){return""+(r+1)}function fix_row(r){return r.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function unfix_row(r){return r.replace(/\$(\d+)$/,"$1")}function decode_col(r){for(var n=unfix_col(r),_=0,x=0;x!==n.length;++x)_=26*_+n.charCodeAt(x)-64;return _-1}function encode_col(r){if(r<0)throw new Error("invalid column "+r);var n="";for(++r;r;r=Math.floor((r-1)/26))n=String.fromCharCode((r-1)%26+65)+n;return n}function fix_col(r){return r.replace(/^([A-Z])/,"$$$1")}function unfix_col(r){return r.replace(/^\$([A-Z])/,"$1")}function split_cell(r){return r.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function decode_cell(r){for(var n=0,_=0,x=0;x<r.length;++x){var S=r.charCodeAt(x);S>=48&&S<=57?n=10*n+(S-48):S>=65&&S<=90&&(_=26*_+(S-64))}return{c:_-1,r:n-1}}function encode_cell(r){for(var n=r.c+1,_="";n;n=(n-1)/26|0)_=String.fromCharCode((n-1)%26+65)+_;return _+(r.r+1)}function decode_range(r){var n=r.indexOf(":");return n==-1?{s:decode_cell(r),e:decode_cell(r)}:{s:decode_cell(r.slice(0,n)),e:decode_cell(r.slice(n+1))}}function encode_range(r,n){return typeof n>"u"||typeof n=="number"?encode_range(r.s,r.e):(typeof r!="string"&&(r=encode_cell(r)),typeof n!="string"&&(n=encode_cell(n)),r==n?r:r+":"+n)}function fix_range(r){var n=decode_range(r);return"$"+encode_col(n.s.c)+"$"+encode_row(n.s.r)+":$"+encode_col(n.e.c)+"$"+encode_row(n.e.r)}function formula_quote_sheet_name(r,n){if(!r&&!(n&&n.biff<=5&&n.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(r)?"'"+r.replace(/'/g,"''")+"'":r}function safe_decode_range(r){var n={s:{c:0,r:0},e:{c:0,r:0}},_=0,x=0,S=0,E=r.length;for(_=0;x<E&&!((S=r.charCodeAt(x)-64)<1||S>26);++x)_=26*_+S;for(n.s.c=--_,_=0;x<E&&!((S=r.charCodeAt(x)-48)<0||S>9);++x)_=10*_+S;if(n.s.r=--_,x===E||S!=10)return n.e.c=n.s.c,n.e.r=n.s.r,n;for(++x,_=0;x!=E&&!((S=r.charCodeAt(x)-64)<1||S>26);++x)_=26*_+S;for(n.e.c=--_,_=0;x!=E&&!((S=r.charCodeAt(x)-48)<0||S>9);++x)_=10*_+S;return n.e.r=--_,n}function safe_format_cell(r,n){var _=r.t=="d"&&n instanceof Date;if(r.z!=null)try{return r.w=SSF_format(r.z,_?datenum(n):n)}catch{}try{return r.w=SSF_format((r.XF||{}).numFmtId||(_?14:0),_?datenum(n):n)}catch{return""+n}}function format_cell(r,n,_){return r==null||r.t==null||r.t=="z"?"":r.w!==void 0?r.w:(r.t=="d"&&!r.z&&_&&_.dateNF&&(r.z=_.dateNF),r.t=="e"?BErr[r.v]||r.v:n==null?safe_format_cell(r,r.v):safe_format_cell(r,n))}function sheet_to_workbook(r,n){var _=n&&n.sheet?n.sheet:"Sheet1",x={};return x[_]=r,{SheetNames:[_],Sheets:x}}function sheet_add_aoa(r,n,_){var x=_||{},S=r?r["!data"]!=null:x.dense,E=r||{};S&&!E["!data"]&&(E["!data"]=[]);var C=0,T=0;if(E&&x.origin!=null){if(typeof x.origin=="number")C=x.origin;else{var B=typeof x.origin=="string"?decode_cell(x.origin):x.origin;C=B.r,T=B.c}E["!ref"]||(E["!ref"]="A1:A1")}var A={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(E["!ref"]){var I=safe_decode_range(E["!ref"]);A.s.c=I.s.c,A.s.r=I.s.r,A.e.c=Math.max(A.e.c,I.e.c),A.e.r=Math.max(A.e.r,I.e.r),C==-1&&(A.e.r=C=I.e.r+1)}for(var N=[],V=0;V!=n.length;++V)if(n[V]){if(!Array.isArray(n[V]))throw new Error("aoa_to_sheet expects an array of arrays");var D=C+V,O=""+(D+1);S&&(E["!data"][D]||(E["!data"][D]=[]),N=E["!data"][D]);for(var F=0;F!=n[V].length;++F)if(!(typeof n[V][F]>"u")){var M={v:n[V][F]},L=T+F;if(A.s.r>D&&(A.s.r=D),A.s.c>L&&(A.s.c=L),A.e.r<D&&(A.e.r=D),A.e.c<L&&(A.e.c=L),n[V][F]&&typeof n[V][F]=="object"&&!Array.isArray(n[V][F])&&!(n[V][F]instanceof Date))M=n[V][F];else if(Array.isArray(M.v)&&(M.f=n[V][F][1],M.v=M.v[0]),M.v===null)if(M.f)M.t="n";else if(x.nullError)M.t="e",M.v=0;else if(x.sheetStubs)M.t="z";else continue;else typeof M.v=="number"?M.t="n":typeof M.v=="boolean"?M.t="b":M.v instanceof Date?(M.z=x.dateNF||table_fmt[14],x.cellDates?(M.t="d",M.w=SSF_format(M.z,datenum(M.v,x.date1904))):(M.t="n",M.v=datenum(M.v,x.date1904),M.w=SSF_format(M.z,M.v))):M.t="s";if(S)N[L]&&N[L].z&&(M.z=N[L].z),N[L]=M;else{var j=encode_col(L)+O;E[j]&&E[j].z&&(M.z=E[j].z),E[j]=M}}}return A.s.c<1e7&&(E["!ref"]=encode_range(A)),E}function aoa_to_sheet(r,n){return sheet_add_aoa(null,r,n)}function parse_Int32LE(r){return r.read_shift(4,"i")}function write_UInt32LE(r,n){return n||(n=new_buf(4)),n.write_shift(4,r),n}function parse_XLWideString(r){var n=r.read_shift(4);return n===0?"":r.read_shift(n,"dbcs")}function write_XLWideString(r,n){var _=!1;return n==null&&(_=!0,n=new_buf(4+2*r.length)),n.write_shift(4,r.length),r.length>0&&n.write_shift(0,r,"dbcs"),_?n.slice(0,n.l):n}function parse_StrRun(r){return{ich:r.read_shift(2),ifnt:r.read_shift(2)}}function write_StrRun(r,n){return n||(n=new_buf(4)),n.write_shift(2,r.ich||0),n.write_shift(2,r.ifnt||0),n}function parse_RichStr(r,n){var _=r.l,x=r.read_shift(1),S=parse_XLWideString(r),E=[],C={t:S,h:S};if(x&1){for(var T=r.read_shift(4),B=0;B!=T;++B)E.push(parse_StrRun(r));C.r=E}else C.r=[{ich:0,ifnt:0}];return r.l=_+n,C}function write_RichStr(r,n){var _=!1;return n==null&&(_=!0,n=new_buf(15+4*r.t.length)),n.write_shift(1,0),write_XLWideString(r.t,n),_?n.slice(0,n.l):n}var parse_BrtCommentText=parse_RichStr;function write_BrtCommentText(r,n){var _=!1;return n==null&&(_=!0,n=new_buf(23+4*r.t.length)),n.write_shift(1,1),write_XLWideString(r.t,n),n.write_shift(4,1),write_StrRun({ich:0,ifnt:0},n),_?n.slice(0,n.l):n}function parse_XLSBCell(r){var n=r.read_shift(4),_=r.read_shift(2);return _+=r.read_shift(1)<<16,r.l++,{c:n,iStyleRef:_}}function write_XLSBCell(r,n){return n==null&&(n=new_buf(8)),n.write_shift(-4,r.c),n.write_shift(3,r.iStyleRef||r.s),n.write_shift(1,0),n}function parse_XLSBShortCell(r){var n=r.read_shift(2);return n+=r.read_shift(1)<<16,r.l++,{c:-1,iStyleRef:n}}function write_XLSBShortCell(r,n){return n==null&&(n=new_buf(4)),n.write_shift(3,r.iStyleRef||r.s),n.write_shift(1,0),n}var parse_XLSBCodeName=parse_XLWideString,write_XLSBCodeName=write_XLWideString;function parse_XLNullableWideString(r){var n=r.read_shift(4);return n===0||n===4294967295?"":r.read_shift(n,"dbcs")}function write_XLNullableWideString(r,n){var _=!1;return n==null&&(_=!0,n=new_buf(127)),n.write_shift(4,r.length>0?r.length:4294967295),r.length>0&&n.write_shift(0,r,"dbcs"),_?n.slice(0,n.l):n}var parse_XLNameWideString=parse_XLWideString,parse_RelID=parse_XLNullableWideString,write_RelID=write_XLNullableWideString;function parse_RkNumber(r){var n=r.slice(r.l,r.l+4),_=n[0]&1,x=n[0]&2;r.l+=4;var S=x===0?__double([0,0,0,0,n[0]&252,n[1],n[2],n[3]],0):__readInt32LE(n,0)>>2;return _?S/100:S}function write_RkNumber(r,n){n==null&&(n=new_buf(4));var _=0,x=0,S=r*100;if(r==(r|0)&&r>=-(1<<29)&&r<1<<29?x=1:S==(S|0)&&S>=-(1<<29)&&S<1<<29&&(x=1,_=1),x)n.write_shift(-4,((_?S:r)<<2)+(_+2));else throw new Error("unsupported RkNumber "+r)}function parse_RfX(r){var n={s:{},e:{}};return n.s.r=r.read_shift(4),n.e.r=r.read_shift(4),n.s.c=r.read_shift(4),n.e.c=r.read_shift(4),n}function write_RfX(r,n){return n||(n=new_buf(16)),n.write_shift(4,r.s.r),n.write_shift(4,r.e.r),n.write_shift(4,r.s.c),n.write_shift(4,r.e.c),n}var parse_UncheckedRfX=parse_RfX,write_UncheckedRfX=write_RfX;function parse_Xnum(r){if(r.length-r.l<8)throw"XLS Xnum Buffer underflow";return r.read_shift(8,"f")}function write_Xnum(r,n){return(n||new_buf(8)).write_shift(8,r,"f")}function parse_BrtColor(r){var n={},_=r.read_shift(1),x=_>>>1,S=r.read_shift(1),E=r.read_shift(2,"i"),C=r.read_shift(1),T=r.read_shift(1),B=r.read_shift(1);switch(r.l++,x){case 0:n.auto=1;break;case 1:n.index=S;var A=XLSIcv[S];A&&(n.rgb=rgb2Hex(A));break;case 2:n.rgb=rgb2Hex([C,T,B]);break;case 3:n.theme=S;break}return E!=0&&(n.tint=E>0?E/32767:E/32768),n}function write_BrtColor(r,n){if(n||(n=new_buf(8)),!r||r.auto)return n.write_shift(4,0),n.write_shift(4,0),n;r.index!=null?(n.write_shift(1,2),n.write_shift(1,r.index)):r.theme!=null?(n.write_shift(1,6),n.write_shift(1,r.theme)):(n.write_shift(1,5),n.write_shift(1,0));var _=r.tint||0;if(_>0?_*=32767:_<0&&(_*=32768),n.write_shift(2,_),!r.rgb||r.theme!=null)n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);else{var x=r.rgb||"FFFFFF";typeof x=="number"&&(x=("000000"+x.toString(16)).slice(-6)),n.write_shift(1,parseInt(x.slice(0,2),16)),n.write_shift(1,parseInt(x.slice(2,4),16)),n.write_shift(1,parseInt(x.slice(4,6),16)),n.write_shift(1,255)}return n}function parse_FontFlags(r){var n=r.read_shift(1);r.l++;var _={fBold:n&1,fItalic:n&2,fUnderline:n&4,fStrikeout:n&8,fOutline:n&16,fShadow:n&32,fCondense:n&64,fExtend:n&128};return _}function write_FontFlags(r,n){n||(n=new_buf(2));var _=(r.italic?2:0)|(r.strike?8:0)|(r.outline?16:0)|(r.shadow?32:0)|(r.condense?64:0)|(r.extend?128:0);return n.write_shift(1,_),n.write_shift(1,0),n}function parse_ClipboardFormatOrString(r,n){var _={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},x=r.read_shift(4);switch(x){case 0:return"";case 4294967295:case 4294967294:return _[r.read_shift(4)]||""}if(x>400)throw new Error("Unsupported Clipboard: "+x.toString(16));return r.l-=4,r.read_shift(0,n==1?"lpstr":"lpwstr")}function parse_ClipboardFormatOrAnsiString(r){return parse_ClipboardFormatOrString(r,1)}function parse_ClipboardFormatOrUnicodeString(r){return parse_ClipboardFormatOrString(r,2)}var VT_I2=2,VT_I4=3,VT_BOOL=11,VT_VARIANT=12,VT_UI4=19,VT_FILETIME=64,VT_BLOB=65,VT_CF=71,VT_VECTOR_VARIANT=4108,VT_VECTOR_LPSTR=4126,VT_STRING=80,VT_USTR=81,VT_CUSTOM=[VT_STRING,VT_USTR],DocSummaryPIDDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Category",t:VT_STRING},3:{n:"PresentationFormat",t:VT_STRING},4:{n:"ByteCount",t:VT_I4},5:{n:"LineCount",t:VT_I4},6:{n:"ParagraphCount",t:VT_I4},7:{n:"SlideCount",t:VT_I4},8:{n:"NoteCount",t:VT_I4},9:{n:"HiddenCount",t:VT_I4},10:{n:"MultimediaClipCount",t:VT_I4},11:{n:"ScaleCrop",t:VT_BOOL},12:{n:"HeadingPairs",t:VT_VECTOR_VARIANT},13:{n:"TitlesOfParts",t:VT_VECTOR_LPSTR},14:{n:"Manager",t:VT_STRING},15:{n:"Company",t:VT_STRING},16:{n:"LinksUpToDate",t:VT_BOOL},17:{n:"CharacterCount",t:VT_I4},19:{n:"SharedDoc",t:VT_BOOL},22:{n:"HyperlinksChanged",t:VT_BOOL},23:{n:"AppVersion",t:VT_I4,p:"version"},24:{n:"DigSig",t:VT_BLOB},26:{n:"ContentType",t:VT_STRING},27:{n:"ContentStatus",t:VT_STRING},28:{n:"Language",t:VT_STRING},29:{n:"Version",t:VT_STRING},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},SummaryPIDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Title",t:VT_STRING},3:{n:"Subject",t:VT_STRING},4:{n:"Author",t:VT_STRING},5:{n:"Keywords",t:VT_STRING},6:{n:"Comments",t:VT_STRING},7:{n:"Template",t:VT_STRING},8:{n:"LastAuthor",t:VT_STRING},9:{n:"RevNumber",t:VT_STRING},10:{n:"EditTime",t:VT_FILETIME},11:{n:"LastPrinted",t:VT_FILETIME},12:{n:"CreatedDate",t:VT_FILETIME},13:{n:"ModifiedDate",t:VT_FILETIME},14:{n:"PageCount",t:VT_I4},15:{n:"WordCount",t:VT_I4},16:{n:"CharCount",t:VT_I4},17:{n:"Thumbnail",t:VT_CF},18:{n:"Application",t:VT_STRING},19:{n:"DocSecurity",t:VT_I4},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},CountryEnum={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},XLSFillPattern=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function rgbify(r){return r.map(function(n){return[n>>16&255,n>>8&255,n&255]})}var _XLSIcv=rgbify([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,0,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),XLSIcv=dup(_XLSIcv),BErr={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},RBErr={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},XLSLblBuiltIn=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"],ct2type={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},CT_LIST={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function new_ct(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function parse_ct(r){var n=new_ct();if(!r||!r.match)return n;var _={};if((r.match(tagregex)||[]).forEach(function(x){var S=parsexmltag(x);switch(S[0].replace(nsregex,"<")){case"<?xml":break;case"<Types":n.xmlns=S["xmlns"+(S[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":_[S.Extension.toLowerCase()]=S.ContentType;break;case"<Override":n[ct2type[S.ContentType]]!==void 0&&n[ct2type[S.ContentType]].push(S.PartName);break}}),n.xmlns!==XMLNS.CT)throw new Error("Unknown Namespace: "+n.xmlns);return n.calcchain=n.calcchains.length>0?n.calcchains[0]:"",n.sst=n.strs.length>0?n.strs[0]:"",n.style=n.styles.length>0?n.styles[0]:"",n.defaults=_,delete n.calcchains,n}function write_ct(r,n,_){var x=evert_arr(ct2type),S=[],E;_||(S[S.length]=XML_HEADER,S[S.length]=writextag("Types",null,{xmlns:XMLNS.CT,"xmlns:xsd":XMLNS.xsd,"xmlns:xsi":XMLNS.xsi}),S=S.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(A){return writextag("Default",null,{Extension:A[0],ContentType:A[1]})})));var C=function(A){r[A]&&r[A].length>0&&(E=r[A][0],S[S.length]=writextag("Override",null,{PartName:(E[0]=="/"?"":"/")+E,ContentType:CT_LIST[A][n.bookType]||CT_LIST[A].xlsx}))},T=function(A){(r[A]||[]).forEach(function(I){S[S.length]=writextag("Override",null,{PartName:(I[0]=="/"?"":"/")+I,ContentType:CT_LIST[A][n.bookType]||CT_LIST[A].xlsx})})},B=function(A){(r[A]||[]).forEach(function(I){S[S.length]=writextag("Override",null,{PartName:(I[0]=="/"?"":"/")+I,ContentType:x[A][0]})})};return C("workbooks"),T("sheets"),T("charts"),B("themes"),["strs","styles"].forEach(C),["coreprops","extprops","custprops"].forEach(B),B("vba"),B("comments"),B("threadedcomments"),B("drawings"),T("metadata"),B("people"),!_&&S.length>2&&(S[S.length]="</Types>",S[1]=S[1].replace("/>",">")),S.join("")}var RELS={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",CONN:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/connections",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function get_rels_path(r){var n=r.lastIndexOf("/");return r.slice(0,n+1)+"_rels/"+r.slice(n+1)+".rels"}function parse_rels(r,n){var _={"!id":{}};if(!r)return _;n.charAt(0)!=="/"&&(n="/"+n);var x={};return(r.match(tagregex)||[]).forEach(function(S){var E=parsexmltag(S);if(E[0]==="<Relationship"){var C={};C.Type=E.Type,C.Target=E.Target,C.Id=E.Id,E.TargetMode&&(C.TargetMode=E.TargetMode);var T=E.TargetMode==="External"?E.Target:resolve_path(E.Target,n);_[T]=C,x[E.Id]=C}}),_["!id"]=x,_}function write_rels(r){var n=[XML_HEADER,writextag("Relationships",null,{xmlns:XMLNS.RELS})];return keys(r["!id"]).forEach(function(_){n[n.length]=writextag("Relationship",null,r["!id"][_])}),n.length>2&&(n[n.length]="</Relationships>",n[1]=n[1].replace("/>",">")),n.join("")}function add_rels(r,n,_,x,S,E){if(S||(S={}),r["!id"]||(r["!id"]={}),r["!idx"]||(r["!idx"]=1),n<0)for(n=r["!idx"];r["!id"]["rId"+n];++n);if(r["!idx"]=n+1,S.Id="rId"+n,S.Type=x,S.Target=_,E?S.TargetMode=E:[RELS.HLINK,RELS.XPATH,RELS.XMISS].indexOf(S.Type)>-1&&(S.TargetMode="External"),r["!id"][S.Id])throw new Error("Cannot rewrite rId "+n);return r["!id"][S.Id]=S,r[("/"+S.Target).replace("//","/")]=S,n}var CT_ODS="application/vnd.oasis.opendocument.spreadsheet";function parse_manifest(r,n){for(var _=xlml_normalize(r),x,S;x=xlmlregex.exec(_);)switch(x[3]){case"manifest":break;case"file-entry":if(S=parsexmltag(x[0],!1),S.path=="/"&&S.type!==CT_ODS)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(n&&n.WTF)throw x}}function write_manifest(r){var n=[XML_HEADER];n.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),n.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var _=0;_<r.length;++_)n.push('  <manifest:file-entry manifest:full-path="'+r[_][0]+'" manifest:media-type="'+r[_][1]+`"/>
`);return n.push("</manifest:manifest>"),n.join("")}function write_rdf_type(r,n,_){return['  <rdf:Description rdf:about="'+r+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(_||"odf")+"#"+n+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf_has(r,n){return['  <rdf:Description rdf:about="'+r+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+n+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf(r){var n=[XML_HEADER];n.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var _=0;_!=r.length;++_)n.push(write_rdf_type(r[_][0],r[_][1])),n.push(write_rdf_has("",r[_][0]));return n.push(write_rdf_type("","Document","pkg")),n.push("</rdf:RDF>"),n.join("")}function write_meta_ods(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+XLSX.version+"</meta:generator></office:meta></office:document-meta>"}var CORE_PROPS=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],CORE_PROPS_REGEX=function(){for(var r=new Array(CORE_PROPS.length),n=0;n<CORE_PROPS.length;++n){var _=CORE_PROPS[n],x="(?:"+_[0].slice(0,_[0].indexOf(":"))+":)"+_[0].slice(_[0].indexOf(":")+1);r[n]=new RegExp("<"+x+"[^>]*>([\\s\\S]*?)</"+x+">")}return r}();function parse_core_props(r){var n={};r=utf8read(r);for(var _=0;_<CORE_PROPS.length;++_){var x=CORE_PROPS[_],S=r.match(CORE_PROPS_REGEX[_]);S!=null&&S.length>0&&(n[x[1]]=unescapexml(S[1])),x[2]==="date"&&n[x[1]]&&(n[x[1]]=parseDate(n[x[1]]))}return n}function cp_doit(r,n,_,x,S){S[r]!=null||n==null||n===""||(S[r]=n,n=escapexml(n),x[x.length]=_?writextag(r,n,_):writetag(r,n))}function write_core_props(r,n){var _=n||{},x=[XML_HEADER,writextag("cp:coreProperties",null,{"xmlns:cp":XMLNS.CORE_PROPS,"xmlns:dc":XMLNS.dc,"xmlns:dcterms":XMLNS.dcterms,"xmlns:dcmitype":XMLNS.dcmitype,"xmlns:xsi":XMLNS.xsi})],S={};if(!r&&!_.Props)return x.join("");r&&(r.CreatedDate!=null&&cp_doit("dcterms:created",typeof r.CreatedDate=="string"?r.CreatedDate:write_w3cdtf(r.CreatedDate,_.WTF),{"xsi:type":"dcterms:W3CDTF"},x,S),r.ModifiedDate!=null&&cp_doit("dcterms:modified",typeof r.ModifiedDate=="string"?r.ModifiedDate:write_w3cdtf(r.ModifiedDate,_.WTF),{"xsi:type":"dcterms:W3CDTF"},x,S));for(var E=0;E!=CORE_PROPS.length;++E){var C=CORE_PROPS[E],T=_.Props&&_.Props[C[1]]!=null?_.Props[C[1]]:r?r[C[1]]:null;T===!0?T="1":T===!1?T="0":typeof T=="number"&&(T=String(T)),T!=null&&cp_doit(C[0],T,null,x,S)}return x.length>2&&(x[x.length]="</cp:coreProperties>",x[1]=x[1].replace("/>",">")),x.join("")}var EXT_PROPS=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],PseudoPropsPairs=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function load_props_pairs(r,n,_,x){var S=[];if(typeof r=="string")S=parseVector(r,x);else for(var E=0;E<r.length;++E)S=S.concat(r[E].map(function(I){return{v:I}}));var C=typeof n=="string"?parseVector(n,x).map(function(I){return I.v}):n,T=0,B=0;if(C.length>0)for(var A=0;A!==S.length;A+=2){switch(B=+S[A+1].v,S[A].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":_.Worksheets=B,_.SheetNames=C.slice(T,T+B);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":_.NamedRanges=B,_.DefinedNames=C.slice(T,T+B);break;case"Charts":case"Diagramme":_.Chartsheets=B,_.ChartNames=C.slice(T,T+B);break}T+=B}}function parse_ext_props(r,n,_){var x={};return n||(n={}),r=utf8read(r),EXT_PROPS.forEach(function(S){var E=(r.match(matchtag(S[0]))||[])[1];switch(S[2]){case"string":E&&(n[S[1]]=unescapexml(E));break;case"bool":n[S[1]]=E==="true";break;case"raw":var C=r.match(new RegExp("<"+S[0]+"[^>]*>([\\s\\S]*?)</"+S[0]+">"));C&&C.length>0&&(x[S[1]]=C[1]);break}}),x.HeadingPairs&&x.TitlesOfParts&&load_props_pairs(x.HeadingPairs,x.TitlesOfParts,n,_),n}function write_ext_props(r){var n=[],_=writextag;return r||(r={}),r.Application="SheetJS",n[n.length]=XML_HEADER,n[n.length]=writextag("Properties",null,{xmlns:XMLNS.EXT_PROPS,"xmlns:vt":XMLNS.vt}),EXT_PROPS.forEach(function(x){if(r[x[1]]!==void 0){var S;switch(x[2]){case"string":S=escapexml(String(r[x[1]]));break;case"bool":S=r[x[1]]?"true":"false";break}S!==void 0&&(n[n.length]=_(x[0],S))}}),n[n.length]=_("HeadingPairs",_("vt:vector",_("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+_("vt:variant",_("vt:i4",String(r.Worksheets))),{size:2,baseType:"variant"})),n[n.length]=_("TitlesOfParts",_("vt:vector",r.SheetNames.map(function(x){return"<vt:lpstr>"+escapexml(x)+"</vt:lpstr>"}).join(""),{size:r.Worksheets,baseType:"lpstr"})),n.length>2&&(n[n.length]="</Properties>",n[1]=n[1].replace("/>",">")),n.join("")}var custregex=/<[^>]+>[^<]*/g;function parse_cust_props(r,n){var _={},x="",S=r.match(custregex);if(S)for(var E=0;E!=S.length;++E){var C=S[E],T=parsexmltag(C);switch(strip_ns(T[0])){case"<?xml":break;case"<Properties":break;case"<property":x=unescapexml(T.name);break;case"</property>":x=null;break;default:if(C.indexOf("<vt:")===0){var B=C.split(">"),A=B[0].slice(4),I=B[1];switch(A){case"lpstr":case"bstr":case"lpwstr":_[x]=unescapexml(I);break;case"bool":_[x]=parsexmlbool(I);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":_[x]=parseInt(I,10);break;case"r4":case"r8":case"decimal":_[x]=parseFloat(I);break;case"filetime":case"date":_[x]=parseDate(I);break;case"cy":case"error":_[x]=unescapexml(I);break;default:if(A.slice(-1)=="/")break;n.WTF&&typeof console<"u"&&console.warn("Unexpected",C,A,B)}}else if(C.slice(0,2)!=="</"){if(n.WTF)throw new Error(C)}}}return _}function write_cust_props(r){var n=[XML_HEADER,writextag("Properties",null,{xmlns:XMLNS.CUST_PROPS,"xmlns:vt":XMLNS.vt})];if(!r)return n.join("");var _=1;return keys(r).forEach(function(S){++_,n[n.length]=writextag("property",write_vt(r[S],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:_,name:escapexml(S)})}),n.length>2&&(n[n.length]="</Properties>",n[1]=n[1].replace("/>",">")),n.join("")}var XLMLDocPropsMap={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},evert_XLMLDPM;function xlml_set_prop(r,n,_){evert_XLMLDPM||(evert_XLMLDPM=evert(XLMLDocPropsMap)),n=evert_XLMLDPM[n]||n,r[n]=_}function xlml_write_docprops(r,n){var _=[];return keys(XLMLDocPropsMap).map(function(x){for(var S=0;S<CORE_PROPS.length;++S)if(CORE_PROPS[S][1]==x)return CORE_PROPS[S];for(S=0;S<EXT_PROPS.length;++S)if(EXT_PROPS[S][1]==x)return EXT_PROPS[S];throw x}).forEach(function(x){if(r[x[1]]!=null){var S=n&&n.Props&&n.Props[x[1]]!=null?n.Props[x[1]]:r[x[1]];switch(x[2]){case"date":S=new Date(S).toISOString().replace(/\.\d*Z/,"Z");break}typeof S=="number"?S=String(S):S===!0||S===!1?S=S?"1":"0":S instanceof Date&&(S=new Date(S).toISOString().replace(/\.\d*Z/,"")),_.push(writetag(XLMLDocPropsMap[x[1]]||x[1],S))}}),writextag("DocumentProperties",_.join(""),{xmlns:XLMLNS.o})}function xlml_write_custprops(r,n){var _=["Worksheets","SheetNames"],x="CustomDocumentProperties",S=[];return r&&keys(r).forEach(function(E){if(Object.prototype.hasOwnProperty.call(r,E)){for(var C=0;C<CORE_PROPS.length;++C)if(E==CORE_PROPS[C][1])return;for(C=0;C<EXT_PROPS.length;++C)if(E==EXT_PROPS[C][1])return;for(C=0;C<_.length;++C)if(E==_[C])return;var T=r[E],B="string";typeof T=="number"?(B="float",T=String(T)):T===!0||T===!1?(B="boolean",T=T?"1":"0"):T=String(T),S.push(writextag(escapexmltag(E),T,{"dt:dt":B}))}}),n&&keys(n).forEach(function(E){if(Object.prototype.hasOwnProperty.call(n,E)&&!(r&&Object.prototype.hasOwnProperty.call(r,E))){var C=n[E],T="string";typeof C=="number"?(T="float",C=String(C)):C===!0||C===!1?(T="boolean",C=C?"1":"0"):C instanceof Date?(T="dateTime.tz",C=C.toISOString()):C=String(C),S.push(writextag(escapexmltag(E),C,{"dt:dt":T}))}}),"<"+x+' xmlns="'+XLMLNS.o+'">'+S.join("")+"</"+x+">"}function parse_FILETIME(r){var n=r.read_shift(4),_=r.read_shift(4);return new Date((_/1e7*Math.pow(2,32)+n/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function write_FILETIME(r){var n=typeof r=="string"?new Date(Date.parse(r)):r,_=n.getTime()/1e3+11644473600,x=_%Math.pow(2,32),S=(_-x)/Math.pow(2,32);x*=1e7,S*=1e7;var E=x/Math.pow(2,32)|0;E>0&&(x=x%Math.pow(2,32),S+=E);var C=new_buf(8);return C.write_shift(4,x),C.write_shift(4,S),C}function parse_lpstr(r,n,_){var x=r.l,S=r.read_shift(0,"lpstr-cp");if(_)for(;r.l-x&3;)++r.l;return S}function parse_lpwstr(r,n,_){var x=r.read_shift(0,"lpwstr");return _&&(r.l+=4-(x.length+1&3)&3),x}function parse_VtStringBase(r,n,_){return n===31?parse_lpwstr(r):parse_lpstr(r,n,_)}function parse_VtString(r,n,_){return parse_VtStringBase(r,n,_===!1?0:4)}function parse_VtUnalignedString(r,n){if(!n)throw new Error("VtUnalignedString must have positive length");return parse_VtStringBase(r,n,0)}function parse_VtVecLpwstrValue(r){for(var n=r.read_shift(4),_=[],x=0;x!=n;++x){var S=r.l;_[x]=r.read_shift(0,"lpwstr").replace(chr0,""),r.l-S&2&&(r.l+=2)}return _}function parse_VtVecUnalignedLpstrValue(r){for(var n=r.read_shift(4),_=[],x=0;x!=n;++x)_[x]=r.read_shift(0,"lpstr-cp").replace(chr0,"");return _}function parse_VtHeadingPair(r){var n=r.l,_=parse_TypedPropertyValue(r,VT_USTR);r[r.l]==0&&r[r.l+1]==0&&r.l-n&2&&(r.l+=2);var x=parse_TypedPropertyValue(r,VT_I4);return[_,x]}function parse_VtVecHeadingPairValue(r){for(var n=r.read_shift(4),_=[],x=0;x<n/2;++x)_.push(parse_VtHeadingPair(r));return _}function parse_dictionary(r,n){for(var _=r.read_shift(4),x={},S=0;S!=_;++S){var E=r.read_shift(4),C=r.read_shift(4);x[E]=r.read_shift(C,n===1200?"utf16le":"utf8").replace(chr0,"").replace(chr1,"!"),n===1200&&C%2&&(r.l+=2)}return r.l&3&&(r.l=r.l>>2+1<<2),x}function parse_BLOB(r){var n=r.read_shift(4),_=r.slice(r.l,r.l+n);return r.l+=n,(n&3)>0&&(r.l+=4-(n&3)&3),_}function parse_ClipboardData(r){var n={};return n.Size=r.read_shift(4),r.l+=n.Size+3-(n.Size-1)%4,n}function parse_TypedPropertyValue(r,n,_){var x=r.read_shift(2),S,E=_||{};if(r.l+=2,n!==VT_VARIANT&&x!==n&&VT_CUSTOM.indexOf(n)===-1&&!((n&65534)==4126&&(x&65534)==4126))throw new Error("Expected type "+n+" saw "+x);switch(n===VT_VARIANT?x:n){case 2:return S=r.read_shift(2,"i"),E.raw||(r.l+=2),S;case 3:return S=r.read_shift(4,"i"),S;case 11:return r.read_shift(4)!==0;case 19:return S=r.read_shift(4),S;case 30:return parse_lpstr(r,x,4).replace(chr0,"");case 31:return parse_lpwstr(r);case 64:return parse_FILETIME(r);case 65:return parse_BLOB(r);case 71:return parse_ClipboardData(r);case 80:return parse_VtString(r,x,!E.raw).replace(chr0,"");case 81:return parse_VtUnalignedString(r,x).replace(chr0,"");case 4108:return parse_VtVecHeadingPairValue(r);case 4126:case 4127:return x==4127?parse_VtVecLpwstrValue(r):parse_VtVecUnalignedLpstrValue(r);default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+x)}}function write_TypedPropertyValue(r,n){var _=new_buf(4),x=new_buf(4);switch(_.write_shift(4,r==80?31:r),r){case 3:x.write_shift(-4,n);break;case 5:x=new_buf(8),x.write_shift(8,n,"f");break;case 11:x.write_shift(4,n?1:0);break;case 64:x=write_FILETIME(n);break;case 31:case 80:for(x=new_buf(4+2*(n.length+1)+(n.length%2?0:2)),x.write_shift(4,n.length+1),x.write_shift(0,n,"dbcs");x.l!=x.length;)x.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+n)}return bconcat([_,x])}function parse_PropertySet(r,n){var _=r.l,x=r.read_shift(4),S=r.read_shift(4),E=[],C=0,T=0,B=-1,A={};for(C=0;C!=S;++C){var I=r.read_shift(4),N=r.read_shift(4);E[C]=[I,N+_]}E.sort(function(j,q){return j[1]-q[1]});var V={};for(C=0;C!=S;++C){if(r.l!==E[C][1]){var D=!0;if(C>0&&n)switch(n[E[C-1][0]].t){case 2:r.l+2===E[C][1]&&(r.l+=2,D=!1);break;case 80:r.l<=E[C][1]&&(r.l=E[C][1],D=!1);break;case 4108:r.l<=E[C][1]&&(r.l=E[C][1],D=!1);break}if((!n||C==0)&&r.l<=E[C][1]&&(D=!1,r.l=E[C][1]),D)throw new Error("Read Error: Expected address "+E[C][1]+" at "+r.l+" :"+C)}if(n){if(E[C][0]==0&&E.length>C+1&&E[C][1]==E[C+1][1])continue;var O=n[E[C][0]];if(V[O.n]=parse_TypedPropertyValue(r,O.t,{raw:!0}),O.p==="version"&&(V[O.n]=String(V[O.n]>>16)+"."+("0000"+String(V[O.n]&65535)).slice(-4)),O.n=="CodePage")switch(V[O.n]){case 0:V[O.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:set_cp(T=V[O.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+V[O.n])}}else if(E[C][0]===1){if(T=V.CodePage=parse_TypedPropertyValue(r,VT_I2),set_cp(T),B!==-1){var F=r.l;r.l=E[B][1],A=parse_dictionary(r,T),r.l=F}}else if(E[C][0]===0){if(T===0){B=C,r.l=E[C+1][1];continue}A=parse_dictionary(r,T)}else{var M=A[E[C][0]],L;switch(r[r.l]){case 65:r.l+=4,L=parse_BLOB(r);break;case 30:r.l+=4,L=parse_VtString(r,r[r.l-4]).replace(/\u0000+$/,"");break;case 31:r.l+=4,L=parse_VtString(r,r[r.l-4]).replace(/\u0000+$/,"");break;case 3:r.l+=4,L=r.read_shift(4,"i");break;case 19:r.l+=4,L=r.read_shift(4);break;case 5:r.l+=4,L=r.read_shift(8,"f");break;case 11:r.l+=4,L=parsebool(r,4);break;case 64:r.l+=4,L=parseDate(parse_FILETIME(r));break;default:throw new Error("unparsed value: "+r[r.l])}V[M]=L}}return r.l=_+x,V}var XLSPSSkip=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function guess_property_type(r){switch(typeof r){case"boolean":return 11;case"number":return(r|0)==r?3:5;case"string":return 31;case"object":if(r instanceof Date)return 64;break}return-1}function write_PropertySet(r,n,_){var x=new_buf(8),S=[],E=[],C=8,T=0,B=new_buf(8),A=new_buf(8);if(B.write_shift(4,2),B.write_shift(4,1200),A.write_shift(4,1),E.push(B),S.push(A),C+=8+B.length,!n){A=new_buf(8),A.write_shift(4,0),S.unshift(A);var I=[new_buf(4)];for(I[0].write_shift(4,r.length),T=0;T<r.length;++T){var N=r[T][0];for(B=new_buf(4+4+2*(N.length+1)+(N.length%2?0:2)),B.write_shift(4,T+2),B.write_shift(4,N.length+1),B.write_shift(0,N,"dbcs");B.l!=B.length;)B.write_shift(1,0);I.push(B)}B=bconcat(I),E.unshift(B),C+=8+B.length}for(T=0;T<r.length;++T)if(!(n&&!n[r[T][0]])&&!(XLSPSSkip.indexOf(r[T][0])>-1||PseudoPropsPairs.indexOf(r[T][0])>-1)&&r[T][1]!=null){var V=r[T][1],D=0;if(n){D=+n[r[T][0]];var O=_[D];if(O.p=="version"&&typeof V=="string"){var F=V.split(".");V=(+F[0]<<16)+(+F[1]||0)}B=write_TypedPropertyValue(O.t,V)}else{var M=guess_property_type(V);M==-1&&(M=31,V=String(V)),B=write_TypedPropertyValue(M,V)}E.push(B),A=new_buf(8),A.write_shift(4,n?D:2+T),S.push(A),C+=8+B.length}var L=8*(E.length+1);for(T=0;T<E.length;++T)S[T].write_shift(4,L),L+=E[T].length;return x.write_shift(4,C),x.write_shift(4,E.length),bconcat([x].concat(S).concat(E))}function parse_PropertySetStream(r,n,_){var x=r.content;if(!x)return{};prep_blob(x,0);var S,E,C,T,B=0;x.chk("feff","Byte Order: "),x.read_shift(2);var A=x.read_shift(4),I=x.read_shift(16);if(I!==CFB.utils.consts.HEADER_CLSID&&I!==_)throw new Error("Bad PropertySet CLSID "+I);if(S=x.read_shift(4),S!==1&&S!==2)throw new Error("Unrecognized #Sets: "+S);if(E=x.read_shift(16),T=x.read_shift(4),S===1&&T!==x.l)throw new Error("Length mismatch: "+T+" !== "+x.l);S===2&&(C=x.read_shift(16),B=x.read_shift(4));var N=parse_PropertySet(x,n),V={SystemIdentifier:A};for(var D in N)V[D]=N[D];if(V.FMTID=E,S===1)return V;if(B-x.l==2&&(x.l+=2),x.l!==B)throw new Error("Length mismatch 2: "+x.l+" !== "+B);var O;try{O=parse_PropertySet(x,null)}catch{}for(D in O)V[D]=O[D];return V.FMTID=[E,C],V}function write_PropertySetStream(r,n,_,x,S,E){var C=new_buf(S?68:48),T=[C];C.write_shift(2,65534),C.write_shift(2,0),C.write_shift(4,842412599),C.write_shift(16,CFB.utils.consts.HEADER_CLSID,"hex"),C.write_shift(4,S?2:1),C.write_shift(16,n,"hex"),C.write_shift(4,S?68:48);var B=write_PropertySet(r,_,x);if(T.push(B),S){var A=write_PropertySet(S,null,null);C.write_shift(16,E,"hex"),C.write_shift(4,68+B.length),T.push(A)}return bconcat(T)}function parsenoop2(r,n){return r.read_shift(n),null}function writezeroes(r,n){n||(n=new_buf(r));for(var _=0;_<r;++_)n.write_shift(1,0);return n}function parslurp(r,n,_){for(var x=[],S=r.l+n;r.l<S;)x.push(_(r,S-r.l));if(S!==r.l)throw new Error("Slurp error");return x}function parsebool(r,n){return r.read_shift(n)===1}function writebool(r,n){return n||(n=new_buf(2)),n.write_shift(2,+!!r),n}function parseuint16(r){return r.read_shift(2,"u")}function writeuint16(r,n){return n||(n=new_buf(2)),n.write_shift(2,r),n}function parseuint16a(r,n){return parslurp(r,n,parseuint16)}function parse_Bes(r){var n=r.read_shift(1),_=r.read_shift(1);return _===1?n:n===1}function write_Bes(r,n,_){return _||(_=new_buf(2)),_.write_shift(1,n=="e"?+r:+!!r),_.write_shift(1,n=="e"?1:0),_}function parse_ShortXLUnicodeString(r,n,_){var x=r.read_shift(_&&_.biff>=12?2:1),S="sbcs-cont",E=current_codepage;if(_&&_.biff>=8&&(current_codepage=1200),!_||_.biff==8){var C=r.read_shift(1);C&&(S="dbcs-cont")}else _.biff==12&&(S="wstr");_.biff>=2&&_.biff<=5&&(S="cpstr");var T=x?r.read_shift(x,S):"";return current_codepage=E,T}function parse_XLUnicodeRichExtendedString(r){var n=current_codepage;current_codepage=1200;var _=r.read_shift(2),x=r.read_shift(1),S=x&4,E=x&8,C=1+(x&1),T=0,B,A={};E&&(T=r.read_shift(2)),S&&(B=r.read_shift(4));var I=C==2?"dbcs-cont":"sbcs-cont",N=_===0?"":r.read_shift(_,I);return E&&(r.l+=4*T),S&&(r.l+=B),A.t=N,E||(A.raw="<t>"+A.t+"</t>",A.r=A.t),current_codepage=n,A}function write_XLUnicodeRichExtendedString(r){var n=r.t||"",_=new_buf(3+0);_.write_shift(2,n.length),_.write_shift(1,1);var x=new_buf(2*n.length);x.write_shift(2*n.length,n,"utf16le");var S=[_,x];return bconcat(S)}function parse_XLUnicodeStringNoCch(r,n,_){var x;if(_){if(_.biff>=2&&_.biff<=5)return r.read_shift(n,"cpstr");if(_.biff>=12)return r.read_shift(n,"dbcs-cont")}var S=r.read_shift(1);return S===0?x=r.read_shift(n,"sbcs-cont"):x=r.read_shift(n,"dbcs-cont"),x}function parse_XLUnicodeString(r,n,_){var x=r.read_shift(_&&_.biff==2?1:2);return x===0?(r.l++,""):parse_XLUnicodeStringNoCch(r,x,_)}function parse_XLUnicodeString2(r,n,_){if(_.biff>5)return parse_XLUnicodeString(r,n,_);var x=r.read_shift(1);return x===0?(r.l++,""):r.read_shift(x,_.biff<=4||!r.lens?"cpstr":"sbcs-cont")}function write_XLUnicodeString(r,n,_){return _||(_=new_buf(3+2*r.length)),_.write_shift(2,r.length),_.write_shift(1,1),_.write_shift(31,r,"utf16le"),_}function parse_ControlInfo(r){var n=r.read_shift(1);r.l++;var _=r.read_shift(2);return r.l+=2,[n,_]}function parse_URLMoniker(r){var n=r.read_shift(4),_=r.l,x=!1;n>24&&(r.l+=n-24,r.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(x=!0),r.l=_);var S=r.read_shift((x?n-24:n)>>1,"utf16le").replace(chr0,"");return x&&(r.l+=24),S}function parse_FileMoniker(r){for(var n=r.read_shift(2),_="";n-- >0;)_+="../";var x=r.read_shift(0,"lpstr-ansi");if(r.l+=2,r.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var S=r.read_shift(4);if(S===0)return _+x.replace(/\\/g,"/");var E=r.read_shift(4);if(r.read_shift(2)!=3)throw new Error("Bad FileMoniker");var C=r.read_shift(E>>1,"utf16le").replace(chr0,"");return _+C}function parse_HyperlinkMoniker(r,n){var _=r.read_shift(16);switch(_){case"e0c9ea79f9bace118c8200aa004ba90b":return parse_URLMoniker(r);case"0303000000000000c000000000000046":return parse_FileMoniker(r);default:throw new Error("Unsupported Moniker "+_)}}function parse_HyperlinkString(r){var n=r.read_shift(4),_=n>0?r.read_shift(n,"utf16le").replace(chr0,""):"";return _}function write_HyperlinkString(r,n){n||(n=new_buf(6+r.length*2)),n.write_shift(4,1+r.length);for(var _=0;_<r.length;++_)n.write_shift(2,r.charCodeAt(_));return n.write_shift(2,0),n}function parse_Hyperlink(r,n){var _=r.l+n,x=r.read_shift(4);if(x!==2)throw new Error("Unrecognized streamVersion: "+x);var S=r.read_shift(2);r.l+=2;var E,C,T,B,A="",I,N;S&16&&(E=parse_HyperlinkString(r,_-r.l)),S&128&&(C=parse_HyperlinkString(r,_-r.l)),(S&257)===257&&(T=parse_HyperlinkString(r,_-r.l)),(S&257)===1&&(B=parse_HyperlinkMoniker(r,_-r.l)),S&8&&(A=parse_HyperlinkString(r,_-r.l)),S&32&&(I=r.read_shift(16)),S&64&&(N=parse_FILETIME(r)),r.l=_;var V=C||T||B||"";V&&A&&(V+="#"+A),V||(V="#"+A),S&2&&V.charAt(0)=="/"&&V.charAt(1)!="/"&&(V="file://"+V);var D={Target:V};return I&&(D.guid=I),N&&(D.time=N),E&&(D.Tooltip=E),D}function write_Hyperlink(r){var n=new_buf(512),_=0,x=r.Target;x.slice(0,7)=="file://"&&(x=x.slice(7));var S=x.indexOf("#"),E=S>-1?31:23;switch(x.charAt(0)){case"#":E=28;break;case".":E&=-3;break}n.write_shift(4,2),n.write_shift(4,E);var C=[8,6815827,6619237,4849780,83];for(_=0;_<C.length;++_)n.write_shift(4,C[_]);if(E==28)x=x.slice(1),write_HyperlinkString(x,n);else if(E&2){for(C="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),_=0;_<C.length;++_)n.write_shift(1,parseInt(C[_],16));var T=S>-1?x.slice(0,S):x;for(n.write_shift(4,2*(T.length+1)),_=0;_<T.length;++_)n.write_shift(2,T.charCodeAt(_));n.write_shift(2,0),E&8&&write_HyperlinkString(S>-1?x.slice(S+1):"",n)}else{for(C="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),_=0;_<C.length;++_)n.write_shift(1,parseInt(C[_],16));for(var B=0;x.slice(B*3,B*3+3)=="../"||x.slice(B*3,B*3+3)=="..\\";)++B;for(n.write_shift(2,B),n.write_shift(4,x.length-3*B+1),_=0;_<x.length-3*B;++_)n.write_shift(1,x.charCodeAt(_+3*B)&255);for(n.write_shift(1,0),n.write_shift(2,65535),n.write_shift(2,57005),_=0;_<6;++_)n.write_shift(4,0)}return n.slice(0,n.l)}function parse_LongRGBA(r){var n=r.read_shift(1),_=r.read_shift(1),x=r.read_shift(1),S=r.read_shift(1);return[n,_,x,S]}function parse_LongRGB(r,n){var _=parse_LongRGBA(r);return _[3]=0,_}function parse_XLSCell(r){var n=r.read_shift(2),_=r.read_shift(2),x=r.read_shift(2);return{r:n,c:_,ixfe:x}}function write_XLSCell(r,n,_,x){return x||(x=new_buf(6)),x.write_shift(2,r),x.write_shift(2,n),x.write_shift(2,_||0),x}function parse_frtHeader(r){var n=r.read_shift(2),_=r.read_shift(2);return r.l+=8,{type:n,flags:_}}function parse_OptXLUnicodeString(r,n,_){return n===0?"":parse_XLUnicodeString2(r,n,_)}function parse_XTI(r,n,_){var x=_.biff>8?4:2,S=r.read_shift(x),E=r.read_shift(x,"i"),C=r.read_shift(x,"i");return[S,E,C]}function parse_RkRec(r){var n=r.read_shift(2),_=parse_RkNumber(r);return[n,_]}function parse_AddinUdf(r,n,_){r.l+=4,n-=4;var x=r.l+n,S=parse_ShortXLUnicodeString(r,n,_),E=r.read_shift(2);if(x-=r.l,E!==x)throw new Error("Malformed AddinUdf: padding = "+x+" != "+E);return r.l+=E,S}function parse_Ref8U(r){var n=r.read_shift(2),_=r.read_shift(2),x=r.read_shift(2),S=r.read_shift(2);return{s:{c:x,r:n},e:{c:S,r:_}}}function write_Ref8U(r,n){return n||(n=new_buf(8)),n.write_shift(2,r.s.r),n.write_shift(2,r.e.r),n.write_shift(2,r.s.c),n.write_shift(2,r.e.c),n}function parse_RefU(r){var n=r.read_shift(2),_=r.read_shift(2),x=r.read_shift(1),S=r.read_shift(1);return{s:{c:x,r:n},e:{c:S,r:_}}}var parse_Ref=parse_RefU;function parse_FtCmo(r){r.l+=4;var n=r.read_shift(2),_=r.read_shift(2),x=r.read_shift(2);return r.l+=12,[_,n,x]}function parse_FtNts(r){var n={};return r.l+=4,r.l+=16,n.fSharedNote=r.read_shift(2),r.l+=4,n}function parse_FtCf(r){var n={};return r.l+=4,r.cf=r.read_shift(2),n}function parse_FtSkip(r){r.l+=2,r.l+=r.read_shift(2)}var FtTab={0:parse_FtSkip,4:parse_FtSkip,5:parse_FtSkip,6:parse_FtSkip,7:parse_FtCf,8:parse_FtSkip,9:parse_FtSkip,10:parse_FtSkip,11:parse_FtSkip,12:parse_FtSkip,13:parse_FtNts,14:parse_FtSkip,15:parse_FtSkip,16:parse_FtSkip,17:parse_FtSkip,18:parse_FtSkip,19:parse_FtSkip,20:parse_FtSkip,21:parse_FtCmo};function parse_FtArray(r,n){for(var _=r.l+n,x=[];r.l<_;){var S=r.read_shift(2);r.l-=2;try{x.push(FtTab[S](r,_-r.l))}catch{return r.l=_,x}}return r.l!=_&&(r.l=_),x}function parse_BOF(r,n){var _={BIFFVer:0,dt:0};switch(_.BIFFVer=r.read_shift(2),n-=2,n>=2&&(_.dt=r.read_shift(2),r.l-=2),_.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(n>6)throw new Error("Unexpected BIFF Ver "+_.BIFFVer)}return r.read_shift(n),_}function write_BOF(r,n,_){var x=1536,S=16;switch(_.bookType){case"biff8":break;case"biff5":x=1280,S=8;break;case"biff4":x=4,S=6;break;case"biff3":x=3,S=6;break;case"biff2":x=2,S=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var E=new_buf(S);return E.write_shift(2,x),E.write_shift(2,n),S>4&&E.write_shift(2,29282),S>6&&E.write_shift(2,1997),S>8&&(E.write_shift(2,49161),E.write_shift(2,1),E.write_shift(2,1798),E.write_shift(2,0)),E}function parse_InterfaceHdr(r,n){return n===0||r.read_shift(2),1200}function parse_WriteAccess(r,n,_){if(_.enc)return r.l+=n,"";var x=r.l,S=parse_XLUnicodeString2(r,0,_);return r.read_shift(n+x-r.l),S}function write_WriteAccess(r,n){var _=!n||n.biff==8,x=new_buf(_?112:54);for(x.write_shift(n.biff==8?2:1,7),_&&x.write_shift(1,0),x.write_shift(4,859007059),x.write_shift(4,5458548|(_?0:536870912));x.l<x.length;)x.write_shift(1,_?0:32);return x}function parse_WsBool(r,n,_){var x=_&&_.biff==8||n==2?r.read_shift(2):(r.l+=n,0);return{fDialog:x&16,fBelow:x&64,fRight:x&128}}function parse_BoundSheet8(r,n,_){var x=r.read_shift(4),S=r.read_shift(1)&3,E=r.read_shift(1);switch(E){case 0:E="Worksheet";break;case 1:E="Macrosheet";break;case 2:E="Chartsheet";break;case 6:E="VBAModule";break}var C=parse_ShortXLUnicodeString(r,0,_);return C.length===0&&(C="Sheet1"),{pos:x,hs:S,dt:E,name:C}}function write_BoundSheet8(r,n){var _=!n||n.biff>=8?2:1,x=new_buf(8+_*r.name.length);x.write_shift(4,r.pos),x.write_shift(1,r.hs||0),x.write_shift(1,r.dt),x.write_shift(1,r.name.length),n.biff>=8&&x.write_shift(1,1),x.write_shift(_*r.name.length,r.name,n.biff<8?"sbcs":"utf16le");var S=x.slice(0,x.l);return S.l=x.l,S}function parse_SST(r,n){for(var _=r.l+n,x=r.read_shift(4),S=r.read_shift(4),E=[],C=0;C!=S&&r.l<_;++C)E.push(parse_XLUnicodeRichExtendedString(r));return E.Count=x,E.Unique=S,E}function write_SST(r,n){var _=new_buf(8);_.write_shift(4,r.Count),_.write_shift(4,r.Unique);for(var x=[],S=0;S<r.length;++S)x[S]=write_XLUnicodeRichExtendedString(r[S]);var E=bconcat([_].concat(x));return E.parts=[_.length].concat(x.map(function(C){return C.length})),E}function parse_ExtSST(r,n){var _={};return _.dsst=r.read_shift(2),r.l+=n-2,_}function parse_Row(r){var n={};n.r=r.read_shift(2),n.c=r.read_shift(2),n.cnt=r.read_shift(2)-n.c;var _=r.read_shift(2);r.l+=4;var x=r.read_shift(1);return r.l+=3,x&7&&(n.level=x&7),x&32&&(n.hidden=!0),x&64&&(n.hpt=_/20),n}function parse_ForceFullCalculation(r){var n=parse_frtHeader(r);if(n.type!=2211)throw new Error("Invalid Future Record "+n.type);var _=r.read_shift(4);return _!==0}function parse_RecalcId(r){return r.read_shift(2),r.read_shift(4)}function parse_DefaultRowHeight(r,n,_){var x=0;_&&_.biff==2||(x=r.read_shift(2));var S=r.read_shift(2);_&&_.biff==2&&(x=1-(S>>15),S&=32767);var E={Unsynced:x&1,DyZero:(x&2)>>1,ExAsc:(x&4)>>2,ExDsc:(x&8)>>3};return[E,S]}function parse_Window1(r){var n=r.read_shift(2),_=r.read_shift(2),x=r.read_shift(2),S=r.read_shift(2),E=r.read_shift(2),C=r.read_shift(2),T=r.read_shift(2),B=r.read_shift(2),A=r.read_shift(2);return{Pos:[n,_],Dim:[x,S],Flags:E,CurTab:C,FirstTab:T,Selected:B,TabRatio:A}}function write_Window1(){var r=new_buf(18);return r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,29280),r.write_shift(2,17600),r.write_shift(2,56),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,1),r.write_shift(2,500),r}function parse_Window2(r,n,_){if(_&&_.biff>=2&&_.biff<5)return{};var x=r.read_shift(2);return{RTL:x&64}}function write_Window2(r){var n=new_buf(18),_=1718;return r&&r.RTL&&(_|=64),n.write_shift(2,_),n.write_shift(4,0),n.write_shift(4,64),n.write_shift(4,0),n.write_shift(4,0),n}function parse_Pane(){}function parse_Font(r,n,_){var x={dyHeight:r.read_shift(2),fl:r.read_shift(2)};switch(_&&_.biff||8){case 2:break;case 3:case 4:r.l+=2;break;default:r.l+=10;break}return x.name=parse_ShortXLUnicodeString(r,0,_),x}function write_Font(r,n){var _=r.name||"Arial",x=n&&n.biff==5,S=x?15+_.length:16+2*_.length,E=new_buf(S);return E.write_shift(2,(r.sz||12)*20),E.write_shift(4,0),E.write_shift(2,400),E.write_shift(4,0),E.write_shift(2,0),E.write_shift(1,_.length),x||E.write_shift(1,1),E.write_shift((x?1:2)*_.length,_,x?"sbcs":"utf16le"),E}function parse_LabelSst(r){var n=parse_XLSCell(r);return n.isst=r.read_shift(4),n}function write_LabelSst(r,n,_,x){var S=new_buf(10);return write_XLSCell(r,n,x,S),S.write_shift(4,_),S}function parse_Label(r,n,_){_.biffguess&&_.biff==2&&(_.biff=5);var x=r.l+n,S=parse_XLSCell(r);_.biff==2&&r.l++;var E=parse_XLUnicodeString(r,x-r.l,_);return S.val=E,S}function write_Label(r,n,_,x,S){var E=!S||S.biff==8,C=new_buf(6+2+ +E+(1+E)*_.length);return write_XLSCell(r,n,x,C),C.write_shift(2,_.length),E&&C.write_shift(1,1),C.write_shift((1+E)*_.length,_,E?"utf16le":"sbcs"),C}function parse_Format(r,n,_){var x=r.read_shift(2),S=parse_XLUnicodeString2(r,0,_);return[x,S]}function write_Format(r,n,_,x){var S=_&&_.biff==5;x||(x=new_buf(S?3+n.length:5+2*n.length)),x.write_shift(2,r),x.write_shift(S?1:2,n.length),S||x.write_shift(1,1),x.write_shift((S?1:2)*n.length,n,S?"sbcs":"utf16le");var E=x.length>x.l?x.slice(0,x.l):x;return E.l==null&&(E.l=E.length),E}var parse_BIFF2Format=parse_XLUnicodeString2;function parse_Dimensions(r,n,_){var x=r.l+n,S=_.biff==8||!_.biff?4:2,E=r.read_shift(S),C=r.read_shift(S),T=r.read_shift(2),B=r.read_shift(2);return r.l=x,{s:{r:E,c:T},e:{r:C,c:B}}}function write_Dimensions(r,n){var _=n.biff==8||!n.biff?4:2,x=new_buf(2*_+6);return x.write_shift(_,r.s.r),x.write_shift(_,r.e.r+1),x.write_shift(2,r.s.c),x.write_shift(2,r.e.c+1),x.write_shift(2,0),x}function parse_RK(r){var n=r.read_shift(2),_=r.read_shift(2),x=parse_RkRec(r);return{r:n,c:_,ixfe:x[0],rknum:x[1]}}function parse_MulRk(r,n){for(var _=r.l+n-2,x=r.read_shift(2),S=r.read_shift(2),E=[];r.l<_;)E.push(parse_RkRec(r));if(r.l!==_)throw new Error("MulRK read error");var C=r.read_shift(2);if(E.length!=C-S+1)throw new Error("MulRK length mismatch");return{r:x,c:S,C,rkrec:E}}function parse_MulBlank(r,n){for(var _=r.l+n-2,x=r.read_shift(2),S=r.read_shift(2),E=[];r.l<_;)E.push(r.read_shift(2));if(r.l!==_)throw new Error("MulBlank read error");var C=r.read_shift(2);if(E.length!=C-S+1)throw new Error("MulBlank length mismatch");return{r:x,c:S,C,ixfe:E}}function parse_CellStyleXF(r,n,_,x){var S={},E=r.read_shift(4),C=r.read_shift(4),T=r.read_shift(4),B=r.read_shift(2);return S.patternType=XLSFillPattern[T>>26],x.cellStyles&&(S.alc=E&7,S.fWrap=E>>3&1,S.alcV=E>>4&7,S.fJustLast=E>>7&1,S.trot=E>>8&255,S.cIndent=E>>16&15,S.fShrinkToFit=E>>20&1,S.iReadOrder=E>>22&2,S.fAtrNum=E>>26&1,S.fAtrFnt=E>>27&1,S.fAtrAlc=E>>28&1,S.fAtrBdr=E>>29&1,S.fAtrPat=E>>30&1,S.fAtrProt=E>>31&1,S.dgLeft=C&15,S.dgRight=C>>4&15,S.dgTop=C>>8&15,S.dgBottom=C>>12&15,S.icvLeft=C>>16&127,S.icvRight=C>>23&127,S.grbitDiag=C>>30&3,S.icvTop=T&127,S.icvBottom=T>>7&127,S.icvDiag=T>>14&127,S.dgDiag=T>>21&15,S.icvFore=B&127,S.icvBack=B>>7&127,S.fsxButton=B>>14&1),S}function parse_XF(r,n,_){var x={};return x.ifnt=r.read_shift(2),x.numFmtId=r.read_shift(2),x.flags=r.read_shift(2),x.fStyle=x.flags>>2&1,n-=6,x.data=parse_CellStyleXF(r,n,x.fStyle,_),x}function write_XF(r,n,_,x){var S=_&&_.biff==5;x||(x=new_buf(S?16:20)),x.write_shift(2,0),r.style?(x.write_shift(2,r.numFmtId||0),x.write_shift(2,65524)):(x.write_shift(2,r.numFmtId||0),x.write_shift(2,n<<4));var E=0;return r.numFmtId>0&&S&&(E|=1024),x.write_shift(4,E),x.write_shift(4,0),S||x.write_shift(4,0),x.write_shift(2,0),x}function parse_Guts(r){r.l+=4;var n=[r.read_shift(2),r.read_shift(2)];if(n[0]!==0&&n[0]--,n[1]!==0&&n[1]--,n[0]>7||n[1]>7)throw new Error("Bad Gutters: "+n.join("|"));return n}function write_Guts(r){var n=new_buf(8);return n.write_shift(4,0),n.write_shift(2,r[0]?r[0]+1:0),n.write_shift(2,r[1]?r[1]+1:0),n}function parse_BoolErr(r,n,_){var x=parse_XLSCell(r);(_.biff==2||n==9)&&++r.l;var S=parse_Bes(r);return x.val=S,x.t=S===!0||S===!1?"b":"e",x}function write_BoolErr(r,n,_,x,S,E){var C=new_buf(8);return write_XLSCell(r,n,x,C),write_Bes(_,E,C),C}function parse_Number(r,n,_){_.biffguess&&_.biff==2&&(_.biff=5);var x=parse_XLSCell(r),S=parse_Xnum(r);return x.val=S,x}function write_Number(r,n,_,x){var S=new_buf(14);return write_XLSCell(r,n,x,S),write_Xnum(_,S),S}var parse_XLHeaderFooter=parse_OptXLUnicodeString;function parse_SupBook(r,n,_){var x=r.l+n,S=r.read_shift(2),E=r.read_shift(2);if(_.sbcch=E,E==1025||E==14849)return[E,S];if(E<1||E>255)throw new Error("Unexpected SupBook type: "+E);for(var C=parse_XLUnicodeStringNoCch(r,E),T=[];x>r.l;)T.push(parse_XLUnicodeString(r));return[E,S,C,T]}function parse_ExternName(r,n,_){var x=r.read_shift(2),S,E={fBuiltIn:x&1,fWantAdvise:x>>>1&1,fWantPict:x>>>2&1,fOle:x>>>3&1,fOleLink:x>>>4&1,cf:x>>>5&1023,fIcon:x>>>15&1};return _.sbcch===14849&&(S=parse_AddinUdf(r,n-2,_)),E.body=S||r.read_shift(n-2),typeof S=="string"&&(E.Name=S),E}function parse_Lbl(r,n,_){var x=r.l+n,S=r.read_shift(2),E=r.read_shift(1),C=r.read_shift(1),T=r.read_shift(_&&_.biff==2?1:2),B=0;(!_||_.biff>=5)&&(_.biff!=5&&(r.l+=2),B=r.read_shift(2),_.biff==5&&(r.l+=2),r.l+=4);var A=parse_XLUnicodeStringNoCch(r,C,_);S&32&&(A=XLSLblBuiltIn[A.charCodeAt(0)]);var I=x-r.l;_&&_.biff==2&&--I;var N=x==r.l||T===0||!(I>0)?[]:parse_NameParsedFormula(r,I,_,T);return{chKey:E,Name:A,itab:B,rgce:N}}function parse_ExternSheet(r,n,_){if(_.biff<8)return parse_BIFF5ExternSheet(r,n,_);for(var x=[],S=r.l+n,E=r.read_shift(_.biff>8?4:2);E--!==0;)x.push(parse_XTI(r,_.biff>8?12:6,_));if(r.l!=S)throw new Error("Bad ExternSheet: "+r.l+" != "+S);return x}function parse_BIFF5ExternSheet(r,n,_){r[r.l+1]==3&&r[r.l]++;var x=parse_ShortXLUnicodeString(r,n,_);return x.charCodeAt(0)==3?x.slice(1):x}function parse_NameCmt(r,n,_){if(_.biff<8){r.l+=n;return}var x=r.read_shift(2),S=r.read_shift(2),E=parse_XLUnicodeStringNoCch(r,x,_),C=parse_XLUnicodeStringNoCch(r,S,_);return[E,C]}function parse_ShrFmla(r,n,_){var x=parse_RefU(r);r.l++;var S=r.read_shift(1);return n-=8,[parse_SharedParsedFormula(r,n,_),S,x]}function parse_Array(r,n,_){var x=parse_Ref(r);switch(_.biff){case 2:r.l++,n-=7;break;case 3:case 4:r.l+=2,n-=8;break;default:r.l+=6,n-=12}return[x,parse_ArrayParsedFormula(r,n,_)]}function parse_MTRSettings(r){var n=r.read_shift(4)!==0,_=r.read_shift(4)!==0,x=r.read_shift(4);return[n,_,x]}function parse_NoteSh(r,n,_){if(!(_.biff<8)){var x=r.read_shift(2),S=r.read_shift(2),E=r.read_shift(2),C=r.read_shift(2),T=parse_XLUnicodeString2(r,0,_);return _.biff<8&&r.read_shift(1),[{r:x,c:S},T,C,E]}}function parse_Note(r,n,_){return parse_NoteSh(r,n,_)}function parse_MergeCells(r,n){for(var _=[],x=r.read_shift(2);x--;)_.push(parse_Ref8U(r));return _}function write_MergeCells(r){var n=new_buf(2+r.length*8);n.write_shift(2,r.length);for(var _=0;_<r.length;++_)write_Ref8U(r[_],n);return n}function parse_Obj(r,n,_){if(_&&_.biff<8)return parse_BIFF5Obj(r,n,_);var x=parse_FtCmo(r),S=parse_FtArray(r,n-22,x[1]);return{cmo:x,ft:S}}var parse_BIFF5OT={8:function(r,n){var _=r.l+n;r.l+=10;var x=r.read_shift(2);r.l+=4,r.l+=2,r.l+=2,r.l+=2,r.l+=4;var S=r.read_shift(1);return r.l+=S,r.l=_,{fmt:x}}};function parse_BIFF5Obj(r,n,_){r.l+=4;var x=r.read_shift(2),S=r.read_shift(2),E=r.read_shift(2);r.l+=2,r.l+=2,r.l+=2,r.l+=2,r.l+=2,r.l+=2,r.l+=2,r.l+=2,r.l+=2,r.l+=6,n-=36;var C=[];return C.push((parse_BIFF5OT[x]||parsenoop)(r,n,_)),{cmo:[S,x,E],ft:C}}function parse_TxO(r,n,_){var x=r.l,S="";try{r.l+=4;var E=(_.lastobj||{cmo:[0,0]}).cmo[1],C;[0,5,7,11,12,14].indexOf(E)==-1?r.l+=6:C=parse_ControlInfo(r,6,_);var T=r.read_shift(2);r.read_shift(2),parseuint16(r,2);var B=r.read_shift(2);r.l+=B;for(var A=1;A<r.lens.length-1;++A){if(r.l-x!=r.lens[A])throw new Error("TxO: bad continue record");var I=r[r.l],N=parse_XLUnicodeStringNoCch(r,r.lens[A+1]-r.lens[A]-1);if(S+=N,S.length>=(I?T:2*T))break}if(S.length!==T&&S.length!==T*2)throw new Error("cchText: "+T+" != "+S.length);return r.l=x+n,{t:S}}catch{return r.l=x+n,{t:S}}}function parse_HLink(r,n){var _=parse_Ref8U(r);r.l+=16;var x=parse_Hyperlink(r,n-24);return[_,x]}function write_HLink(r){var n=new_buf(24),_=decode_cell(r[0]);n.write_shift(2,_.r),n.write_shift(2,_.r),n.write_shift(2,_.c),n.write_shift(2,_.c);for(var x="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),S=0;S<16;++S)n.write_shift(1,parseInt(x[S],16));return bconcat([n,write_Hyperlink(r[1])])}function parse_HLinkTooltip(r,n){r.read_shift(2);var _=parse_Ref8U(r),x=r.read_shift((n-10)/2,"dbcs-cont");return x=x.replace(chr0,""),[_,x]}function write_HLinkTooltip(r){var n=r[1].Tooltip,_=new_buf(10+2*(n.length+1));_.write_shift(2,2048);var x=decode_cell(r[0]);_.write_shift(2,x.r),_.write_shift(2,x.r),_.write_shift(2,x.c),_.write_shift(2,x.c);for(var S=0;S<n.length;++S)_.write_shift(2,n.charCodeAt(S));return _.write_shift(2,0),_}function parse_Country(r){var n=[0,0],_;return _=r.read_shift(2),n[0]=CountryEnum[_]||_,_=r.read_shift(2),n[1]=CountryEnum[_]||_,n}function write_Country(r){return r||(r=new_buf(4)),r.write_shift(2,1),r.write_shift(2,1),r}function parse_ClrtClient(r){for(var n=r.read_shift(2),_=[];n-- >0;)_.push(parse_LongRGB(r));return _}function parse_Palette(r){for(var n=r.read_shift(2),_=[];n-- >0;)_.push(parse_LongRGB(r));return _}function parse_XFCRC(r){r.l+=2;var n={cxfs:0,crc:0};return n.cxfs=r.read_shift(2),n.crc=r.read_shift(4),n}function parse_ColInfo(r,n,_){if(!_.cellStyles)return parsenoop(r,n);var x=_&&_.biff>=12?4:2,S=r.read_shift(x),E=r.read_shift(x),C=r.read_shift(x),T=r.read_shift(x),B=r.read_shift(2);x==2&&(r.l+=2);var A={s:S,e:E,w:C,ixfe:T,flags:B};return(_.biff>=5||!_.biff)&&(A.level=B>>8&7),A}function write_ColInfo(r,n){var _=new_buf(12);_.write_shift(2,n),_.write_shift(2,n),_.write_shift(2,r.width*256),_.write_shift(2,0);var x=0;return r.hidden&&(x|=1),_.write_shift(1,x),x=r.level||0,_.write_shift(1,x),_.write_shift(2,0),_}function parse_Setup(r,n){var _={};return n<32||(r.l+=16,_.header=parse_Xnum(r),_.footer=parse_Xnum(r),r.l+=2),_}function parse_ShtProps(r,n,_){var x={area:!1};if(_.biff!=5)return r.l+=n,x;var S=r.read_shift(1);return r.l+=3,S&16&&(x.area=!0),x}function write_RRTabId(r){for(var n=new_buf(2*r),_=0;_<r;++_)n.write_shift(2,_+1);return n}var parse_Blank=parse_XLSCell,parse_Scl=parseuint16a,parse_String=parse_XLUnicodeString;function parse_ImData(r){var n=r.read_shift(2),_=r.read_shift(2),x=r.read_shift(4),S={fmt:n,env:_,len:x,data:r.slice(r.l,r.l+x)};return r.l+=x,S}function parse_BIFF2STR(r,n,_){_.biffguess&&_.biff==5&&(_.biff=2);var x=parse_XLSCell(r);++r.l;var S=parse_XLUnicodeString2(r,n-7,_);return x.t="str",x.val=S,x}function parse_BIFF2NUM(r){var n=parse_XLSCell(r);++r.l;var _=parse_Xnum(r);return n.t="n",n.val=_,n}function write_BIFF2NUM(r,n,_){var x=new_buf(15);return write_BIFF2Cell(x,r,n),x.write_shift(8,_,"f"),x}function parse_BIFF2INT(r){var n=parse_XLSCell(r);++r.l;var _=r.read_shift(2);return n.t="n",n.val=_,n}function write_BIFF2INT(r,n,_){var x=new_buf(9);return write_BIFF2Cell(x,r,n),x.write_shift(2,_),x}function parse_BIFF2STRING(r){var n=r.read_shift(1);return n===0?(r.l++,""):r.read_shift(n,"sbcs-cont")}function parse_BIFF2FONTXTRA(r,n){r.l+=6,r.l+=2,r.l+=1,r.l+=3,r.l+=1,r.l+=n-13}function parse_RString(r,n,_){var x=r.l+n,S=parse_XLSCell(r),E=r.read_shift(2),C=parse_XLUnicodeStringNoCch(r,E,_);return r.l=x,S.t="str",S.val=C,S}var DBF_SUPPORTED_VERSIONS=[2,3,48,49,131,139,140,245],DBF=function(){var r={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},n=evert({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function _(T,B){var A=[],I=new_raw_buf(1);switch(B.type){case"base64":I=s2a(Base64_decode(T));break;case"binary":I=s2a(T);break;case"buffer":case"array":I=T;break}prep_blob(I,0);var N=I.read_shift(1),V=!!(N&136),D=!1,O=!1;switch(N){case 2:break;case 3:break;case 48:D=!0,V=!0;break;case 49:D=!0,V=!0;break;case 131:break;case 139:break;case 140:O=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+N.toString(16))}var F=0,M=521;N==2&&(F=I.read_shift(2)),I.l+=3,N!=2&&(F=I.read_shift(4)),F>1048576&&(F=1e6),N!=2&&(M=I.read_shift(2));var L=I.read_shift(2);B.codepage,N!=2&&(I.l+=16,I.read_shift(1),I[I.l]!==0&&r[I[I.l]],I.l+=1,I.l+=2),O&&(I.l+=36);for(var j=[],q={},H=Math.min(I.length,N==2?521:M-10-(D?264:0)),X=O?32:11;I.l<H&&I[I.l]!=13;)switch(q={},q.name=a2s(I.slice(I.l,I.l+X)).replace(/[\u0000\r\n].*$/g,""),I.l+=X,q.type=String.fromCharCode(I.read_shift(1)),N!=2&&!O&&(q.offset=I.read_shift(4)),q.len=I.read_shift(1),N==2&&(q.offset=I.read_shift(2)),q.dec=I.read_shift(1),q.name.length&&j.push(q),N!=2&&(I.l+=O?13:14),q.type){case"B":(!D||q.len!=8)&&B.WTF&&console.log("Skipping "+q.name+":"+q.type);break;case"G":case"P":B.WTF&&console.log("Skipping "+q.name+":"+q.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+q.type)}if(I[I.l]!==13&&(I.l=M-1),I.read_shift(1)!==13)throw new Error("DBF Terminator not found "+I.l+" "+I[I.l]);I.l=M;var J=0,Z=0;for(A[0]=[],Z=0;Z!=j.length;++Z)A[0][Z]=j[Z].name;for(;F-- >0;){if(I[I.l]===42){I.l+=L;continue}for(++I.l,A[++J]=[],Z=0,Z=0;Z!=j.length;++Z){var ae=I.slice(I.l,I.l+j[Z].len);I.l+=j[Z].len,prep_blob(ae,0);var ce=a2s(ae);switch(j[Z].type){case"C":ce.trim().length&&(A[J][Z]=ce.replace(/\s+$/,""));break;case"D":ce.length===8?A[J][Z]=new Date(+ce.slice(0,4),+ce.slice(4,6)-1,+ce.slice(6,8)):A[J][Z]=ce;break;case"F":A[J][Z]=parseFloat(ce.trim());break;case"+":case"I":A[J][Z]=O?ae.read_shift(-4,"i")^2147483648:ae.read_shift(4,"i");break;case"L":switch(ce.trim().toUpperCase()){case"Y":case"T":A[J][Z]=!0;break;case"N":case"F":A[J][Z]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+ce+"|")}break;case"M":if(!V)throw new Error("DBF Unexpected MEMO for type "+N.toString(16));A[J][Z]="##MEMO##"+(O?parseInt(ce.trim(),10):ae.read_shift(4));break;case"N":ce=ce.replace(/\u0000/g,"").trim(),ce&&ce!="."&&(A[J][Z]=+ce||0);break;case"@":A[J][Z]=new Date(ae.read_shift(-8,"f")-621356832e5);break;case"T":A[J][Z]=new Date((ae.read_shift(4)-2440588)*864e5+ae.read_shift(4));break;case"Y":A[J][Z]=ae.read_shift(4,"i")/1e4+ae.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":A[J][Z]=-ae.read_shift(-8,"f");break;case"B":if(D&&j[Z].len==8){A[J][Z]=ae.read_shift(8,"f");break}case"G":case"P":ae.l+=j[Z].len;break;case"0":if(j[Z].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+j[Z].type)}}}if(N!=2&&I.l<I.length&&I[I.l++]!=26)throw new Error("DBF EOF Marker missing "+(I.l-1)+" of "+I.length+" "+I[I.l-1].toString(16));return B&&B.sheetRows&&(A=A.slice(0,B.sheetRows)),B.DBF=j,A}function x(T,B){var A=B||{};A.dateNF||(A.dateNF="yyyymmdd");var I=aoa_to_sheet(_(T,A),A);return I["!cols"]=A.DBF.map(function(N){return{wch:N.len,DBF:N}}),delete A.DBF,I}function S(T,B){try{var A=sheet_to_workbook(x(T,B),B);return A.bookType="dbf",A}catch(I){if(B&&B.WTF)throw I}return{SheetNames:[],Sheets:{}}}var E={B:8,C:250,L:1,D:8,"?":0,"":0};function C(T,B){var A=B||{},I=current_codepage;if(+A.codepage>=0&&set_cp(+A.codepage),A.type=="string")throw new Error("Cannot write DBF to JS string");var N=buf_array(),V=sheet_to_json(T,{header:1,raw:!0,cellDates:!0}),D=V[0],O=V.slice(1),F=T["!cols"]||[],M=0,L=0,j=0,q=1;for(M=0;M<D.length;++M){if(((F[M]||{}).DBF||{}).name){D[M]=F[M].DBF.name,++j;continue}if(D[M]!=null){if(++j,typeof D[M]=="number"&&(D[M]=D[M].toString(10)),typeof D[M]!="string")throw new Error("DBF Invalid column name "+D[M]+" |"+typeof D[M]+"|");if(D.indexOf(D[M])!==M){for(L=0;L<1024;++L)if(D.indexOf(D[M]+"_"+L)==-1){D[M]+="_"+L;break}}}}var H=safe_decode_range(T["!ref"]),X=[],J=[],Z=[];for(M=0;M<=H.e.c-H.s.c;++M){var ae="",ce="",ve=0,pe=[];for(L=0;L<O.length;++L)O[L][M]!=null&&pe.push(O[L][M]);if(pe.length==0||D[M]==null){X[M]="?";continue}for(L=0;L<pe.length;++L){switch(typeof pe[L]){case"number":ce="B";break;case"string":ce="C";break;case"boolean":ce="L";break;case"object":ce=pe[L]instanceof Date?"D":"C";break;default:ce="C"}ve=Math.max(ve,String(pe[L]).length),ae=ae&&ae!=ce?"C":ce}ve>250&&(ve=250),ce=((F[M]||{}).DBF||{}).type,ce=="C"&&F[M].DBF.len>ve&&(ve=F[M].DBF.len),ae=="B"&&ce=="N"&&(ae="N",Z[M]=F[M].DBF.dec,ve=F[M].DBF.len),J[M]=ae=="C"||ce=="N"?ve:E[ae]||0,q+=J[M],X[M]=ae}var G=N.next(32);for(G.write_shift(4,318902576),G.write_shift(4,O.length),G.write_shift(2,296+32*j),G.write_shift(2,q),M=0;M<4;++M)G.write_shift(4,0);var Y=+n[current_codepage]||3;for(G.write_shift(4,0|Y<<8),r[Y]!=+A.codepage&&(A.codepage&&console.error("DBF Unsupported codepage "+current_codepage+", using 1252"),current_codepage=1252),M=0,L=0;M<D.length;++M)if(D[M]!=null){var U=N.next(32),W=(D[M].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);U.write_shift(1,W,"sbcs"),U.write_shift(1,X[M]=="?"?"C":X[M],"sbcs"),U.write_shift(4,L),U.write_shift(1,J[M]||E[X[M]]||0),U.write_shift(1,Z[M]||0),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(1,0),U.write_shift(4,0),U.write_shift(4,0),L+=J[M]||E[X[M]]||0}var ee=N.next(264);for(ee.write_shift(4,13),M=0;M<65;++M)ee.write_shift(4,0);for(M=0;M<O.length;++M){var re=N.next(q);for(re.write_shift(1,0),L=0;L<D.length;++L)if(D[L]!=null)switch(X[L]){case"L":re.write_shift(1,O[M][L]==null?63:O[M][L]?84:70);break;case"B":re.write_shift(8,O[M][L]||0,"f");break;case"N":var oe="0";for(typeof O[M][L]=="number"&&(oe=O[M][L].toFixed(Z[L]||0)),oe.length>J[L]&&(oe=oe.slice(0,J[L])),j=0;j<J[L]-oe.length;++j)re.write_shift(1,32);re.write_shift(1,oe,"sbcs");break;case"D":O[M][L]?(re.write_shift(4,("0000"+O[M][L].getFullYear()).slice(-4),"sbcs"),re.write_shift(2,("00"+(O[M][L].getMonth()+1)).slice(-2),"sbcs"),re.write_shift(2,("00"+O[M][L].getDate()).slice(-2),"sbcs")):re.write_shift(8,"00000000","sbcs");break;case"C":var ie=re.l,ne=String(O[M][L]!=null?O[M][L]:"").slice(0,J[L]);for(re.write_shift(1,ne,"cpstr"),ie+=J[L]-re.l,j=0;j<ie;++j)re.write_shift(1,32);break}}return current_codepage=I,N.next(1).write_shift(1,26),N.end()}return{to_workbook:S,to_sheet:x,from_sheet:C}}(),SYLK=function(){var r={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},n=new RegExp("\x1BN("+keys(r).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),_=function(N,V){var D=r[V];return typeof D=="number"?_getansi(D):D},x=function(N,V,D){var O=V.charCodeAt(0)-32<<4|D.charCodeAt(0)-48;return O==59?N:_getansi(O)};r["|"]=254;function S(N,V){switch(V.type){case"base64":return E(Base64_decode(N),V);case"binary":return E(N,V);case"buffer":return E(has_buf&&Buffer.isBuffer(N)?N.toString("binary"):a2s(N),V);case"array":return E(cc2str(N),V)}throw new Error("Unrecognized type "+V.type)}function E(N,V){var D=N.split(/[\n\r]+/),O=-1,F=-1,M=0,L=0,j=[],q=[],H=null,X={},J=[],Z=[],ae=[],ce=0,ve,pe={Workbook:{WBProps:{},Names:[]}};for(+V.codepage>=0&&set_cp(+V.codepage);M!==D.length;++M){ce=0;var G=D[M].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,x).replace(n,_),Y=G.replace(/;;/g,"\0").split(";").map(function(Ee){return Ee.replace(/\u0000/g,";")}),U=Y[0],W;if(G.length>0)switch(U){case"ID":break;case"E":break;case"B":break;case"O":for(L=1;L<Y.length;++L)switch(Y[L].charAt(0)){case"V":{var ee=parseInt(Y[L].slice(1),10);ee>=1&&ee<=4&&(pe.Workbook.WBProps.date1904=!0)}break}break;case"W":break;case"P":switch(Y[1].charAt(0)){case"P":q.push(G.slice(3).replace(/;;/g,";"));break}break;case"NN":{var re={Sheet:0};for(L=1;L<Y.length;++L)switch(Y[L].charAt(0)){case"N":re.Name=Y[L].slice(1);break;case"E":re.Ref=(V&&V.sheet||"Sheet1")+"!"+rc_to_a1(Y[L].slice(1));break}pe.Workbook.Names.push(re)}break;case"C":var oe=!1,ie=!1,ne=!1,te=!1,K=-1,le=-1,ue="",be="z";for(L=1;L<Y.length;++L)switch(Y[L].charAt(0)){case"A":break;case"X":F=parseInt(Y[L].slice(1),10)-1,ie=!0;break;case"Y":for(O=parseInt(Y[L].slice(1),10)-1,ie||(F=0),ve=j.length;ve<=O;++ve)j[ve]=[];break;case"K":W=Y[L].slice(1),W.charAt(0)==='"'?(W=W.slice(1,W.length-1),be="s"):W==="TRUE"||W==="FALSE"?(W=W==="TRUE",be="b"):isNaN(fuzzynum(W))?isNaN(fuzzydate(W).getDate())||(W=parseDate(W),be="d",V.cellDates||(be="n",W=datenum(W,pe.Workbook.WBProps.date1904))):(W=fuzzynum(W),be="n",H!==null&&fmt_is_date(H)&&V.cellDates&&(W=numdate(pe.Workbook.WBProps.date1904?W+1462:W),be="d")),oe=!0;break;case"E":te=!0,ue=rc_to_a1(Y[L].slice(1),{r:O,c:F});break;case"S":ne=!0;break;case"G":break;case"R":K=parseInt(Y[L].slice(1),10)-1;break;case"C":le=parseInt(Y[L].slice(1),10)-1;break;default:if(V&&V.WTF)throw new Error("SYLK bad record "+G)}if(oe&&(j[O][F]?(j[O][F].t=be,j[O][F].v=W):j[O][F]={t:be,v:W},H&&(j[O][F].z=H),V.cellText!==!1&&H&&(j[O][F].w=SSF_format(j[O][F].z,j[O][F].v,{date1904:pe.Workbook.WBProps.date1904})),H=null),ne){if(te)throw new Error("SYLK shared formula cannot have own formula");var ge=K>-1&&j[K][le];if(!ge||!ge[1])throw new Error("SYLK shared formula cannot find base");ue=shift_formula_str(ge[1],{r:O-K,c:F-le})}ue&&(j[O][F]?j[O][F].f=ue:j[O][F]={t:"n",f:ue});break;case"F":var ye=0;for(L=1;L<Y.length;++L)switch(Y[L].charAt(0)){case"X":F=parseInt(Y[L].slice(1),10)-1,++ye;break;case"Y":for(O=parseInt(Y[L].slice(1),10)-1,ve=j.length;ve<=O;++ve)j[ve]=[];break;case"M":ce=parseInt(Y[L].slice(1),10)/20;break;case"F":break;case"G":break;case"P":H=q[parseInt(Y[L].slice(1),10)];break;case"S":break;case"D":break;case"N":break;case"W":for(ae=Y[L].slice(1).split(" "),ve=parseInt(ae[0],10);ve<=parseInt(ae[1],10);++ve)ce=parseInt(ae[2],10),Z[ve-1]=ce===0?{hidden:!0}:{wch:ce};break;case"C":F=parseInt(Y[L].slice(1),10)-1,Z[F]||(Z[F]={});break;case"R":O=parseInt(Y[L].slice(1),10)-1,J[O]||(J[O]={}),ce>0?(J[O].hpt=ce,J[O].hpx=pt2px(ce)):ce===0&&(J[O].hidden=!0);break;default:if(V&&V.WTF)throw new Error("SYLK bad record "+G)}ye<1&&(H=null);break;default:if(V&&V.WTF)throw new Error("SYLK bad record "+G)}}return J.length>0&&(X["!rows"]=J),Z.length>0&&(X["!cols"]=Z),Z.forEach(function(Ee){process_col(Ee)}),V&&V.sheetRows&&(j=j.slice(0,V.sheetRows)),[j,X,pe]}function C(N,V){var D=S(N,V),O=D[0],F=D[1],M=D[2],L=dup(V);L.date1904=(((M||{}).Workbook||{}).WBProps||{}).date1904;var j=aoa_to_sheet(O,L);keys(F).forEach(function(H){j[H]=F[H]});var q=sheet_to_workbook(j,V);return keys(M).forEach(function(H){q[H]=M[H]}),q.bookType="sylk",q}function T(N,V,D,O){var F="C;Y"+(D+1)+";X"+(O+1)+";K";switch(N.t){case"n":F+=N.v||0,N.f&&!N.F&&(F+=";E"+a1_to_rc(N.f,{r:D,c:O}));break;case"b":F+=N.v?"TRUE":"FALSE";break;case"e":F+=N.w||N.v;break;case"d":F+='"'+(N.w||N.v)+'"';break;case"s":F+='"'+(N.v==null?"":String(N.v)).replace(/"/g,"").replace(/;/g,";;")+'"';break}return F}function B(N,V){V.forEach(function(D,O){var F="F;W"+(O+1)+" "+(O+1)+" ";D.hidden?F+="0":(typeof D.width=="number"&&!D.wpx&&(D.wpx=width2px(D.width)),typeof D.wpx=="number"&&!D.wch&&(D.wch=px2char(D.wpx)),typeof D.wch=="number"&&(F+=Math.round(D.wch))),F.charAt(F.length-1)!=" "&&N.push(F)})}function A(N,V){V.forEach(function(D,O){var F="F;";D.hidden?F+="M0;":D.hpt?F+="M"+20*D.hpt+";":D.hpx&&(F+="M"+20*px2pt(D.hpx)+";"),F.length>2&&N.push(F+"R"+(O+1))})}function I(N,V,D){var O=["ID;PSheetJS;N;E"],F=[],M=safe_decode_range(N["!ref"]),L,j=N["!data"]!=null,q=`\r
`,H=(((D||{}).Workbook||{}).WBProps||{}).date1904;O.push("P;PGeneral"),O.push("F;P0;DG0G8;M255"),N["!cols"]&&B(O,N["!cols"]),N["!rows"]&&A(O,N["!rows"]),O.push("B;Y"+(M.e.r-M.s.r+1)+";X"+(M.e.c-M.s.c+1)+";D"+[M.s.c,M.s.r,M.e.c,M.e.r].join(" ")),O.push("O;L;D;B"+(H?";V4":"")+";K47;G100 0.001");for(var X=M.s.r;X<=M.e.r;++X)if(!(j&&!N["!data"][X])){for(var J=[],Z=M.s.c;Z<=M.e.c;++Z)L=j?N["!data"][X][Z]:N[encode_col(Z)+encode_row(X)],!(!L||L.v==null&&(!L.f||L.F))&&J.push(T(L,N,X,Z));F.push(J.join(q))}return O.join(q)+q+F.join(q)+q+"E"+q}return{to_workbook:C,from_sheet:I}}(),DIF=function(){function r(T,B){switch(B.type){case"base64":return n(Base64_decode(T),B);case"binary":return n(T,B);case"buffer":return n(has_buf&&Buffer.isBuffer(T)?T.toString("binary"):a2s(T),B);case"array":return n(cc2str(T),B)}throw new Error("Unrecognized type "+B.type)}function n(T,B){for(var A=T.split(`
`),I=-1,N=-1,V=0,D=[];V!==A.length;++V){if(A[V].trim()==="BOT"){D[++I]=[],N=0;continue}if(!(I<0)){var O=A[V].trim().split(","),F=O[0],M=O[1];++V;for(var L=A[V]||"";(L.match(/["]/g)||[]).length&1&&V<A.length-1;)L+=`
`+A[++V];switch(L=L.trim(),+F){case-1:if(L==="BOT"){D[++I]=[],N=0;continue}else if(L!=="EOD")throw new Error("Unrecognized DIF special command "+L);break;case 0:L==="TRUE"?D[I][N]=!0:L==="FALSE"?D[I][N]=!1:isNaN(fuzzynum(M))?isNaN(fuzzydate(M).getDate())?D[I][N]=M:D[I][N]=parseDate(M):D[I][N]=fuzzynum(M),++N;break;case 1:L=L.slice(1,L.length-1),L=L.replace(/""/g,'"'),L&&L.match(/^=".*"$/)&&(L=L.slice(2,-1)),D[I][N++]=L!==""?L:null;break}if(L==="EOD")break}}return B&&B.sheetRows&&(D=D.slice(0,B.sheetRows)),D}function _(T,B){return aoa_to_sheet(r(T,B),B)}function x(T,B){var A=sheet_to_workbook(_(T,B),B);return A.bookType="dif",A}function S(T,B){return"0,"+String(T)+`\r
`+B}function E(T){return`1,0\r
"`+T.replace(/"/g,'""')+'"'}function C(T){for(var B=safe_decode_range(T["!ref"]),A=T["!data"]!=null,I=[`TABLE\r
0,1\r
"sheetjs"\r
`,`VECTORS\r
0,`+(B.e.r-B.s.r+1)+`\r
""\r
`,`TUPLES\r
0,`+(B.e.c-B.s.c+1)+`\r
""\r
`,`DATA\r
0,0\r
""\r
`],N=B.s.r;N<=B.e.r;++N){for(var V=A?T["!data"][N]:[],D=`-1,0\r
BOT\r
`,O=B.s.c;O<=B.e.c;++O){var F=A?V&&V[O]:T[encode_cell({r:N,c:O})];if(F==null){D+=`1,0\r
""\r
`;continue}switch(F.t){case"n":F.w!=null?D+="0,"+F.w+`\r
V`:F.v!=null?D+=S(F.v,"V"):F.f!=null&&!F.F?D+=E("="+F.f):D+=`1,0\r
""`;break;case"b":D+=F.v?S(1,"TRUE"):S(0,"FALSE");break;case"s":D+=E(isNaN(+F.v)?F.v:'="'+F.v+'"');break;case"d":F.w||(F.w=SSF_format(F.z||table_fmt[14],datenum(parseDate(F.v)))),D+=S(F.w,"V");break;default:D+=`1,0\r
""`}D+=`\r
`}I.push(D)}return I.join("")+`-1,0\r
EOD`}return{to_workbook:x,to_sheet:_,from_sheet:C}}(),ETH=function(){function r(N){return N.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function n(N){return N.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function _(N,V){for(var D=N.split(`
`),O=-1,F=-1,M=0,L=[];M!==D.length;++M){var j=D[M].trim().split(":");if(j[0]==="cell"){var q=decode_cell(j[1]);if(L.length<=q.r)for(O=L.length;O<=q.r;++O)L[O]||(L[O]=[]);switch(O=q.r,F=q.c,j[2]){case"t":L[O][F]=r(j[3]);break;case"v":L[O][F]=+j[3];break;case"vtf":var H=j[j.length-1];case"vtc":switch(j[3]){case"nl":L[O][F]=!!+j[4];break;default:L[O][F]=+j[4];break}j[2]=="vtf"&&(L[O][F]=[L[O][F],H])}}}return V&&V.sheetRows&&(L=L.slice(0,V.sheetRows)),L}function x(N,V){return aoa_to_sheet(_(N,V),V)}function S(N,V){return sheet_to_workbook(x(N,V),V)}var E=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),C=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,T=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),B="--SocialCalcSpreadsheetControlSave--";function A(N){if(!N||!N["!ref"])return"";for(var V=[],D=[],O,F="",M=decode_range(N["!ref"]),L=N["!data"]!=null,j=M.s.r;j<=M.e.r;++j)for(var q=M.s.c;q<=M.e.c;++q)if(F=encode_cell({r:j,c:q}),O=L?(N["!data"][j]||[])[q]:N[F],!(!O||O.v==null||O.t==="z")){switch(D=["cell",F,"t"],O.t){case"s":case"str":D.push(n(O.v));break;case"n":O.f?(D[2]="vtf",D[3]="n",D[4]=O.v,D[5]=n(O.f)):(D[2]="v",D[3]=O.v);break;case"b":D[2]="vt"+(O.f?"f":"c"),D[3]="nl",D[4]=O.v?"1":"0",D[5]=n(O.f||(O.v?"TRUE":"FALSE"));break;case"d":var H=datenum(parseDate(O.v));D[2]="vtc",D[3]="nd",D[4]=""+H,D[5]=O.w||SSF_format(O.z||table_fmt[14],H);break;case"e":continue}V.push(D.join(":"))}return V.push("sheet:c:"+(M.e.c-M.s.c+1)+":r:"+(M.e.r-M.s.r+1)+":tvf:1"),V.push("valueformat:1:text-wiki"),V.join(`
`)}function I(N){return[E,C,T,C,A(N),B].join(`
`)}return{to_workbook:S,to_sheet:x,from_sheet:I}}(),PRN=function(){function r(I,N,V,D,O){O.raw?N[V][D]=I:I===""||(I==="TRUE"?N[V][D]=!0:I==="FALSE"?N[V][D]=!1:isNaN(fuzzynum(I))?isNaN(fuzzydate(I).getDate())?N[V][D]=I:N[V][D]=parseDate(I):N[V][D]=fuzzynum(I))}function n(I,N){var V=N||{},D=[];if(!I||I.length===0)return D;for(var O=I.split(/[\r\n]/),F=O.length-1;F>=0&&O[F].length===0;)--F;for(var M=10,L=0,j=0;j<=F;++j)L=O[j].indexOf(" "),L==-1?L=O[j].length:L++,M=Math.max(M,L);for(j=0;j<=F;++j){D[j]=[];var q=0;for(r(O[j].slice(0,M).trim(),D,j,q,V),q=1;q<=(O[j].length-M)/10+1;++q)r(O[j].slice(M+(q-1)*10,M+q*10).trim(),D,j,q,V)}return V.sheetRows&&(D=D.slice(0,V.sheetRows)),D}var _={44:",",9:"	",59:";",124:"|"},x={44:3,9:2,59:1,124:0};function S(I){for(var N={},V=!1,D=0,O=0;D<I.length;++D)(O=I.charCodeAt(D))==34?V=!V:!V&&O in _&&(N[O]=(N[O]||0)+1);O=[];for(D in N)Object.prototype.hasOwnProperty.call(N,D)&&O.push([N[D],D]);if(!O.length){N=x;for(D in N)Object.prototype.hasOwnProperty.call(N,D)&&O.push([N[D],D])}return O.sort(function(F,M){return F[0]-M[0]||x[F[1]]-x[M[1]]}),_[O.pop()[1]]||44}function E(I,N){var V=N||{},D="",O={};V.dense&&(O["!data"]=[]);var F={s:{c:0,r:0},e:{c:0,r:0}};I.slice(0,4)=="sep="?I.charCodeAt(5)==13&&I.charCodeAt(6)==10?(D=I.charAt(4),I=I.slice(7)):I.charCodeAt(5)==13||I.charCodeAt(5)==10?(D=I.charAt(4),I=I.slice(6)):D=S(I.slice(0,1024)):V&&V.FS?D=V.FS:D=S(I.slice(0,1024));var M=0,L=0,j=0,q=0,H=0,X=D.charCodeAt(0),J=!1,Z=0,ae=I.charCodeAt(0),ce=V.dateNF!=null?dateNF_regex(V.dateNF):null;function ve(){var pe=I.slice(q,H);pe.slice(-1)=="\r"&&(pe=pe.slice(0,-1));var G={};if(pe.charAt(0)=='"'&&pe.charAt(pe.length-1)=='"'&&(pe=pe.slice(1,-1).replace(/""/g,'"')),pe.length===0)G.t="z";else if(V.raw)G.t="s",G.v=pe;else if(pe.trim().length===0)G.t="s",G.v=pe;else if(pe.charCodeAt(0)==61)pe.charCodeAt(1)==34&&pe.charCodeAt(pe.length-1)==34?(G.t="s",G.v=pe.slice(2,-1).replace(/""/g,'"')):fuzzyfmla(pe)?(G.t="n",G.f=pe.slice(1)):(G.t="s",G.v=pe);else if(pe=="TRUE")G.t="b",G.v=!0;else if(pe=="FALSE")G.t="b",G.v=!1;else if(!isNaN(j=fuzzynum(pe)))G.t="n",V.cellText!==!1&&(G.w=pe),G.v=j;else if(!isNaN((j=fuzzydate(pe)).getDate())||ce&&pe.match(ce)){G.z=V.dateNF||table_fmt[14];var Y=0;ce&&pe.match(ce)&&(pe=dateNF_fix(pe,V.dateNF,pe.match(ce)||[]),Y=1,j=parseDate(pe,Y)),V.cellDates?(G.t="d",G.v=j):(G.t="n",G.v=datenum(j)),V.cellText!==!1&&(G.w=SSF_format(G.z,G.v instanceof Date?datenum(G.v):G.v)),V.cellNF||delete G.z}else G.t="s",G.v=pe;if(G.t=="z"||(V.dense?(O["!data"][M]||(O["!data"][M]=[]),O["!data"][M][L]=G):O[encode_cell({c:L,r:M})]=G),q=H+1,ae=I.charCodeAt(q),F.e.c<L&&(F.e.c=L),F.e.r<M&&(F.e.r=M),Z==X)++L;else if(L=0,++M,V.sheetRows&&V.sheetRows<=M)return!0}e:for(;H<I.length;++H)switch(Z=I.charCodeAt(H)){case 34:ae===34&&(J=!J);break;case 13:if(J)break;I.charCodeAt(H+1)==10&&++H;case X:case 10:if(!J&&ve())break e;break}return H-q>0&&ve(),O["!ref"]=encode_range(F),O}function C(I,N){return!(N&&N.PRN)||N.FS||I.slice(0,4)=="sep="||I.indexOf("	")>=0||I.indexOf(",")>=0||I.indexOf(";")>=0?E(I,N):aoa_to_sheet(n(I,N),N)}function T(I,N){var V="",D=N.type=="string"?[0,0,0,0]:firstbyte(I,N);switch(N.type){case"base64":V=Base64_decode(I);break;case"binary":V=I;break;case"buffer":N.codepage==65001?V=I.toString("utf8"):N.codepage&&typeof $cptable<"u"?V=$cptable.utils.decode(N.codepage,I):V=has_buf&&Buffer.isBuffer(I)?I.toString("binary"):a2s(I);break;case"array":V=cc2str(I);break;case"string":V=I;break;default:throw new Error("Unrecognized type "+N.type)}return D[0]==239&&D[1]==187&&D[2]==191?V=utf8read(V.slice(3)):N.type!="string"&&N.type!="buffer"&&N.codepage==65001?V=utf8read(V):N.type=="binary"&&typeof $cptable<"u"&&N.codepage&&(V=$cptable.utils.decode(N.codepage,$cptable.utils.encode(28591,V))),V.slice(0,19)=="socialcalc:version:"?ETH.to_sheet(N.type=="string"?V:utf8read(V),N):C(V,N)}function B(I,N){return sheet_to_workbook(T(I,N),N)}function A(I){for(var N=[],V=safe_decode_range(I["!ref"]),D,O=I["!data"]!=null,F=V.s.r;F<=V.e.r;++F){for(var M=[],L=V.s.c;L<=V.e.c;++L){var j=encode_cell({r:F,c:L});if(D=O?(I["!data"][F]||[])[L]:I[j],!D||D.v==null){M.push("          ");continue}for(var q=(D.w||(format_cell(D),D.w)||"").slice(0,10);q.length<10;)q+=" ";M.push(q+(L===0?" ":""))}N.push(M.join(""))}return N.join(`
`)}return{to_workbook:B,to_sheet:T,from_sheet:A}}();function read_wb_ID(r,n){var _=n||{},x=!!_.WTF;_.WTF=!0;try{var S=SYLK.to_workbook(r,_);return _.WTF=x,S}catch(E){if(_.WTF=x,!E.message.match(/SYLK bad record ID/)&&x)throw E;return PRN.to_workbook(r,n)}}var WK_=function(){function r(ue,be,ge){if(ue){prep_blob(ue,ue.l||0);for(var ye=ge.Enum||te;ue.l<ue.length;){var Ee=ue.read_shift(2),Re=ye[Ee]||ye[65535],Ne=ue.read_shift(2),Te=ue.l+Ne,he=Re.f&&Re.f(ue,Ne,ge);if(ue.l=Te,be(he,Re,Ee))return}}}function n(ue,be){switch(be.type){case"base64":return _(s2a(Base64_decode(ue)),be);case"binary":return _(s2a(ue),be);case"buffer":case"array":return _(ue,be)}throw"Unsupported type "+be.type}function _(ue,be){if(!ue)return ue;var ge=be||{},ye={},Ee="Sheet1",Re="",Ne=0,Te={},he=[],xe=[],fe=[];ge.dense&&(fe=ye["!data"]=[]);var Be={s:{r:0,c:0},e:{r:0,c:0}},Le=ge.sheetRows||0;if(ue[4]==81&&ue[5]==80&&ue[6]==87)return le(ue,be);if(ue[2]==0&&(ue[3]==8||ue[3]==9)&&ue.length>=16&&ue[14]==5&&ue[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(ue[2]==2)ge.Enum=te,r(ue,function(He,We,Ue){switch(Ue){case 0:ge.vers=He,He>=4096&&(ge.qpro=!0);break;case 255:ge.vers=He,ge.works=!0;break;case 6:Be=He;break;case 204:He&&(Re=He);break;case 222:Re=He;break;case 15:case 51:(!ge.qpro&&!ge.works||Ue==51)&&He[1].v.charCodeAt(0)<48&&(He[1].v=He[1].v.slice(1)),(ge.works||ge.works2)&&(He[1].v=He[1].v.replace(/\r\n/g,`
`));case 13:case 14:case 16:Ue==14&&(He[2]&112)==112&&(He[2]&15)>1&&(He[2]&15)<15&&(He[1].z=ge.dateNF||table_fmt[14],ge.cellDates&&(He[1].t="d",He[1].v=numdate(He[1].v))),ge.qpro&&He[3]>Ne&&(ye["!ref"]=encode_range(Be),Te[Ee]=ye,he.push(Ee),ye={},ge.dense&&(fe=ye["!data"]=[]),Be={s:{r:0,c:0},e:{r:0,c:0}},Ne=He[3],Ee=Re||"Sheet"+(Ne+1),Re="");var Ge=ge.dense?(fe[He[0].r]||[])[He[0].c]:ye[encode_cell(He[0])];if(Ge){Ge.t=He[1].t,Ge.v=He[1].v,He[1].z!=null&&(Ge.z=He[1].z),He[1].f!=null&&(Ge.f=He[1].f);break}ge.dense?(fe[He[0].r]||(fe[He[0].r]=[]),fe[He[0].r][He[0].c]=He[1]):ye[encode_cell(He[0])]=He[1];break;case 21509:ge.works2=!0;break}},ge);else if(ue[2]==26||ue[2]==14)ge.Enum=K,ue[2]==14&&(ge.qpro=!0,ue.l=0),r(ue,function(He,We,Ue){switch(Ue){case 204:Ee=He;break;case 22:He[1].v.charCodeAt(0)<48&&(He[1].v=He[1].v.slice(1)),He[1].v=He[1].v.replace(/\x0F./g,function(Ge){return String.fromCharCode(Ge.charCodeAt(1)-32)}).replace(/\r\n/g,`
`);case 23:case 24:case 25:case 37:case 39:case 40:if(He[3]>Ne&&(ye["!ref"]=encode_range(Be),Te[Ee]=ye,he.push(Ee),ye={},ge.dense&&(fe=ye["!data"]=[]),Be={s:{r:0,c:0},e:{r:0,c:0}},Ne=He[3],Ee="Sheet"+(Ne+1)),Le>0&&He[0].r>=Le)break;ge.dense?(fe[He[0].r]||(fe[He[0].r]=[]),fe[He[0].r][He[0].c]=He[1]):ye[encode_cell(He[0])]=He[1],Be.e.c<He[0].c&&(Be.e.c=He[0].c),Be.e.r<He[0].r&&(Be.e.r=He[0].r);break;case 27:He[14e3]&&(xe[He[14e3][0]]=He[14e3][1]);break;case 1537:xe[He[0]]=He[1],He[0]==Ne&&(Ee=He[1]);break}},ge);else throw new Error("Unrecognized LOTUS BOF "+ue[2]);if(ye["!ref"]=encode_range(Be),Te[Re||Ee]=ye,he.push(Re||Ee),!xe.length)return{SheetNames:he,Sheets:Te};for(var Ve={},Ie=[],Me=0;Me<xe.length;++Me)Te[he[Me]]?(Ie.push(xe[Me]||he[Me]),Ve[xe[Me]]=Te[xe[Me]]||Te[he[Me]]):(Ie.push(xe[Me]),Ve[xe[Me]]={"!ref":"A1"});return{SheetNames:Ie,Sheets:Ve}}function x(ue,be){var ge=be||{};if(+ge.codepage>=0&&set_cp(+ge.codepage),ge.type=="string")throw new Error("Cannot write WK1 to JS string");var ye=buf_array(),Ee=safe_decode_range(ue["!ref"]),Re=ue["!data"]!=null,Ne=[];write_biff_rec(ye,0,E(1030)),write_biff_rec(ye,6,B(Ee));for(var Te=Math.min(Ee.e.r,8191),he=Ee.s.c;he<=Ee.e.c;++he)Ne[he]=encode_col(he);for(var xe=Ee.s.r;xe<=Te;++xe){var fe=encode_row(xe);for(he=Ee.s.c;he<=Ee.e.c;++he){var Be=Re?(ue["!data"][xe]||[])[he]:ue[Ne[he]+fe];if(!(!Be||Be.t=="z"))if(Be.t=="n")(Be.v|0)==Be.v&&Be.v>=-32768&&Be.v<=32767?write_biff_rec(ye,13,O(xe,he,Be.v)):write_biff_rec(ye,14,M(xe,he,Be.v));else{var Le=format_cell(Be);write_biff_rec(ye,15,N(xe,he,Le.slice(0,239)))}}}return write_biff_rec(ye,1),ye.end()}function S(ue,be){var ge=be||{};if(+ge.codepage>=0&&set_cp(+ge.codepage),ge.type=="string")throw new Error("Cannot write WK3 to JS string");var ye=buf_array();write_biff_rec(ye,0,C(ue));for(var Ee=0,Re=0;Ee<ue.SheetNames.length;++Ee)(ue.Sheets[ue.SheetNames[Ee]]||{})["!ref"]&&write_biff_rec(ye,27,ne(ue.SheetNames[Ee],Re++));var Ne=0;for(Ee=0;Ee<ue.SheetNames.length;++Ee){var Te=ue.Sheets[ue.SheetNames[Ee]];if(!(!Te||!Te["!ref"])){for(var he=safe_decode_range(Te["!ref"]),xe=Te["!data"]!=null,fe=[],Be=Math.min(he.e.r,8191),Le=he.s.r;Le<=Be;++Le)for(var Ve=encode_row(Le),Ie=he.s.c;Ie<=he.e.c;++Ie){Le===he.s.r&&(fe[Ie]=encode_col(Ie));var Me=fe[Ie]+Ve,He=xe?(Te["!data"][Le]||[])[Ie]:Te[Me];if(!(!He||He.t=="z"))if(He.t=="n")write_biff_rec(ye,23,pe(Le,Ie,Ne,He.v));else{var We=format_cell(He);write_biff_rec(ye,22,ae(Le,Ie,Ne,We.slice(0,239)))}}++Ne}}return write_biff_rec(ye,1),ye.end()}function E(ue){var be=new_buf(2);return be.write_shift(2,ue),be}function C(ue){var be=new_buf(26);be.write_shift(2,4096),be.write_shift(2,4),be.write_shift(4,0);for(var ge=0,ye=0,Ee=0,Re=0;Re<ue.SheetNames.length;++Re){var Ne=ue.SheetNames[Re],Te=ue.Sheets[Ne];if(!(!Te||!Te["!ref"])){++Ee;var he=decode_range(Te["!ref"]);ge<he.e.r&&(ge=he.e.r),ye<he.e.c&&(ye=he.e.c)}}return ge>8191&&(ge=8191),be.write_shift(2,ge),be.write_shift(1,Ee),be.write_shift(1,ye),be.write_shift(2,0),be.write_shift(2,0),be.write_shift(1,1),be.write_shift(1,2),be.write_shift(4,0),be.write_shift(4,0),be}function T(ue,be,ge){var ye={s:{c:0,r:0},e:{c:0,r:0}};return be==8&&ge.qpro?(ye.s.c=ue.read_shift(1),ue.l++,ye.s.r=ue.read_shift(2),ye.e.c=ue.read_shift(1),ue.l++,ye.e.r=ue.read_shift(2),ye):(ye.s.c=ue.read_shift(2),ye.s.r=ue.read_shift(2),be==12&&ge.qpro&&(ue.l+=2),ye.e.c=ue.read_shift(2),ye.e.r=ue.read_shift(2),be==12&&ge.qpro&&(ue.l+=2),ye.s.c==65535&&(ye.s.c=ye.e.c=ye.s.r=ye.e.r=0),ye)}function B(ue){var be=new_buf(8);return be.write_shift(2,ue.s.c),be.write_shift(2,ue.s.r),be.write_shift(2,ue.e.c),be.write_shift(2,ue.e.r),be}function A(ue,be,ge){var ye=[{c:0,r:0},{t:"n",v:0},0,0];return ge.qpro&&ge.vers!=20768?(ye[0].c=ue.read_shift(1),ye[3]=ue.read_shift(1),ye[0].r=ue.read_shift(2),ue.l+=2):ge.works?(ye[0].c=ue.read_shift(2),ye[0].r=ue.read_shift(2),ye[2]=ue.read_shift(2)):(ye[2]=ue.read_shift(1),ye[0].c=ue.read_shift(2),ye[0].r=ue.read_shift(2)),ye}function I(ue,be,ge){var ye=ue.l+be,Ee=A(ue,be,ge);if(Ee[1].t="s",ge.vers==20768){ue.l++;var Re=ue.read_shift(1);return Ee[1].v=ue.read_shift(Re,"utf8"),Ee}return ge.qpro&&ue.l++,Ee[1].v=ue.read_shift(ye-ue.l,"cstr"),Ee}function N(ue,be,ge){var ye=new_buf(7+ge.length);ye.write_shift(1,255),ye.write_shift(2,be),ye.write_shift(2,ue),ye.write_shift(1,39);for(var Ee=0;Ee<ye.length;++Ee){var Re=ge.charCodeAt(Ee);ye.write_shift(1,Re>=128?95:Re)}return ye.write_shift(1,0),ye}function V(ue,be,ge){var ye=ue.l+be,Ee=A(ue,be,ge);if(Ee[1].t="s",ge.vers==20768){var Re=ue.read_shift(1);return Ee[1].v=ue.read_shift(Re,"utf8"),Ee}return Ee[1].v=ue.read_shift(ye-ue.l,"cstr"),Ee}function D(ue,be,ge){var ye=A(ue,be,ge);return ye[1].v=ue.read_shift(2,"i"),ye}function O(ue,be,ge){var ye=new_buf(7);return ye.write_shift(1,255),ye.write_shift(2,be),ye.write_shift(2,ue),ye.write_shift(2,ge,"i"),ye}function F(ue,be,ge){var ye=A(ue,be,ge);return ye[1].v=ue.read_shift(8,"f"),ye}function M(ue,be,ge){var ye=new_buf(13);return ye.write_shift(1,255),ye.write_shift(2,be),ye.write_shift(2,ue),ye.write_shift(8,ge,"f"),ye}function L(ue,be,ge){var ye=ue.l+be,Ee=A(ue,be,ge);if(Ee[1].v=ue.read_shift(8,"f"),ge.qpro)ue.l=ye;else{var Re=ue.read_shift(2);X(ue.slice(ue.l,ue.l+Re),Ee),ue.l+=Re}return Ee}function j(ue,be,ge){var ye=be&32768;return be&=-32769,be=(ye?ue:0)+(be>=8192?be-16384:be),(ye?"":"$")+(ge?encode_col(be):encode_row(be))}var q={31:["NA",0],33:["ABS",1],34:["TRUNC",1],35:["SQRT",1],36:["LOG",1],37:["LN",1],38:["PI",0],39:["SIN",1],40:["COS",1],41:["TAN",1],42:["ATAN2",2],43:["ATAN",1],44:["ASIN",1],45:["ACOS",1],46:["EXP",1],47:["MOD",2],49:["ISNA",1],50:["ISERR",1],51:["FALSE",0],52:["TRUE",0],53:["RAND",0],63:["ROUND",2],68:["ISNUMBER",1],69:["ISTEXT",1],70:["LEN",1],71:["VALUE",1],73:["MID",3],74:["CHAR",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],102:["UPPER",1],103:["LOWER",1],107:["PROPER",1],109:["TRIM",1],111:["T",1]},H=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function X(ue,be){prep_blob(ue,0);for(var ge=[],ye=0,Ee="",Re="",Ne="",Te="";ue.l<ue.length;){var he=ue[ue.l++];switch(he){case 0:ge.push(ue.read_shift(8,"f"));break;case 1:Re=j(be[0].c,ue.read_shift(2),!0),Ee=j(be[0].r,ue.read_shift(2),!1),ge.push(Re+Ee);break;case 2:{var xe=j(be[0].c,ue.read_shift(2),!0),fe=j(be[0].r,ue.read_shift(2),!1);Re=j(be[0].c,ue.read_shift(2),!0),Ee=j(be[0].r,ue.read_shift(2),!1),ge.push(xe+fe+":"+Re+Ee)}break;case 3:if(ue.l<ue.length){console.error("WK1 premature formula end");return}break;case 4:ge.push("("+ge.pop()+")");break;case 5:ge.push(ue.read_shift(2));break;case 6:{for(var Be="";he=ue[ue.l++];)Be+=String.fromCharCode(he);ge.push('"'+Be.replace(/"/g,'""')+'"')}break;case 8:ge.push("-"+ge.pop());break;case 23:ge.push("+"+ge.pop());break;case 22:ge.push("NOT("+ge.pop()+")");break;case 20:case 21:Te=ge.pop(),Ne=ge.pop(),ge.push(["AND","OR"][he-20]+"("+Ne+","+Te+")");break;default:if(he<32&&H[he])Te=ge.pop(),Ne=ge.pop(),ge.push(Ne+H[he]+Te);else if(q[he]){if(ye=q[he][1],ye==69&&(ye=ue[ue.l++]),ye>ge.length){console.error("WK1 bad formula parse 0x"+he.toString(16)+":|"+ge.join("|")+"|");return}var Le=ge.slice(-ye);ge.length-=ye,ge.push(q[he][0]+"("+Le.join(",")+")")}else return he<=7?console.error("WK1 invalid opcode "+he.toString(16)):he<=24?console.error("WK1 unsupported op "+he.toString(16)):he<=30?console.error("WK1 invalid opcode "+he.toString(16)):he<=115?console.error("WK1 unsupported function opcode "+he.toString(16)):console.error("WK1 unrecognized opcode "+he.toString(16))}}ge.length==1?be[1].f=""+ge[0]:console.error("WK1 bad formula parse |"+ge.join("|")+"|")}function J(ue){var be=[{c:0,r:0},{t:"n",v:0},0];return be[0].r=ue.read_shift(2),be[3]=ue[ue.l++],be[0].c=ue[ue.l++],be}function Z(ue,be){var ge=J(ue);return ge[1].t="s",ge[1].v=ue.read_shift(be-4,"cstr"),ge}function ae(ue,be,ge,ye){var Ee=new_buf(6+ye.length);Ee.write_shift(2,ue),Ee.write_shift(1,ge),Ee.write_shift(1,be),Ee.write_shift(1,39);for(var Re=0;Re<ye.length;++Re){var Ne=ye.charCodeAt(Re);Ee.write_shift(1,Ne>=128?95:Ne)}return Ee.write_shift(1,0),Ee}function ce(ue,be){var ge=J(ue);ge[1].v=ue.read_shift(2);var ye=ge[1].v>>1;if(ge[1].v&1)switch(ye&7){case 0:ye=(ye>>3)*5e3;break;case 1:ye=(ye>>3)*500;break;case 2:ye=(ye>>3)/20;break;case 3:ye=(ye>>3)/200;break;case 4:ye=(ye>>3)/2e3;break;case 5:ye=(ye>>3)/2e4;break;case 6:ye=(ye>>3)/16;break;case 7:ye=(ye>>3)/64;break}return ge[1].v=ye,ge}function ve(ue,be){var ge=J(ue),ye=ue.read_shift(4),Ee=ue.read_shift(4),Re=ue.read_shift(2);if(Re==65535)return ye===0&&Ee===3221225472?(ge[1].t="e",ge[1].v=15):ye===0&&Ee===3489660928?(ge[1].t="e",ge[1].v=42):ge[1].v=0,ge;var Ne=Re&32768;return Re=(Re&32767)-16446,ge[1].v=(1-Ne*2)*(Ee*Math.pow(2,Re+32)+ye*Math.pow(2,Re)),ge}function pe(ue,be,ge,ye){var Ee=new_buf(14);if(Ee.write_shift(2,ue),Ee.write_shift(1,ge),Ee.write_shift(1,be),ye==0)return Ee.write_shift(4,0),Ee.write_shift(4,0),Ee.write_shift(2,65535),Ee;var Re=0,Ne=0,Te=0,he=0;return ye<0&&(Re=1,ye=-ye),Ne=Math.log2(ye)|0,ye/=Math.pow(2,Ne-31),he=ye>>>0,he&2147483648||(ye/=2,++Ne,he=ye>>>0),ye-=he,he|=2147483648,he>>>=0,ye*=Math.pow(2,32),Te=ye>>>0,Ee.write_shift(4,Te),Ee.write_shift(4,he),Ne+=16383+(Re?32768:0),Ee.write_shift(2,Ne),Ee}function G(ue,be){var ge=ve(ue);return ue.l+=be-14,ge}function Y(ue,be){var ge=J(ue),ye=ue.read_shift(4);return ge[1].v=ye>>6,ge}function U(ue,be){var ge=J(ue),ye=ue.read_shift(8,"f");return ge[1].v=ye,ge}function W(ue,be){var ge=U(ue);return ue.l+=be-12,ge}function ee(ue,be){return ue[ue.l+be-1]==0?ue.read_shift(be,"cstr"):""}function re(ue,be){var ge=ue[ue.l++];ge>be-1&&(ge=be-1);for(var ye="";ye.length<ge;)ye+=String.fromCharCode(ue[ue.l++]);return ye}function oe(ue,be,ge){if(!(!ge.qpro||be<21)){var ye=ue.read_shift(1);ue.l+=17,ue.l+=1,ue.l+=2;var Ee=ue.read_shift(be-21,"cstr");return[ye,Ee]}}function ie(ue,be){for(var ge={},ye=ue.l+be;ue.l<ye;){var Ee=ue.read_shift(2);if(Ee==14e3){for(ge[Ee]=[0,""],ge[Ee][0]=ue.read_shift(2);ue[ue.l];)ge[Ee][1]+=String.fromCharCode(ue[ue.l]),ue.l++;ue.l++}}return ge}function ne(ue,be){var ge=new_buf(5+ue.length);ge.write_shift(2,14e3),ge.write_shift(2,be);for(var ye=0;ye<ue.length;++ye){var Ee=ue.charCodeAt(ye);ge[ge.l++]=Ee>127?95:Ee}return ge[ge.l++]=0,ge}var te={0:{n:"BOF",f:parseuint16},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:T},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:D},14:{n:"NUMBER",f:F},15:{n:"LABEL",f:I},16:{n:"FORMULA",f:L},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:V},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ee},222:{n:"SHEETNAMELP",f:re},255:{n:"BOF",f:parseuint16},65535:{n:""}},K={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:Z},23:{n:"NUMBER17",f:ve},24:{n:"NUMBER18",f:ce},25:{n:"FORMULA19",f:G},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ie},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:Y},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:W},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ee},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:oe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};function le(ue,be){prep_blob(ue,0);var ge=be||{},ye={};ge.dense&&(ye["!data"]=[]);var Ee=[],Re="",Ne={s:{r:-1,c:-1},e:{r:-1,c:-1}},Te=0,he=0,xe=0,fe=0,Be={SheetNames:[],Sheets:{}};e:for(;ue.l<ue.length;){var Le=ue.read_shift(2),Ve=ue.read_shift(2),Ie=ue.slice(ue.l,ue.l+Ve);switch(prep_blob(Ie,0),Le){case 1:if(Ie.read_shift(4)!=962023505)throw"Bad QPW9 BOF!";break;case 2:break e;case 1025:break;case 1026:break;case 1031:for(Ie.l+=12;Ie.l<Ie.length;)Te=Ie.read_shift(2),he=Ie.read_shift(1),Ee.push(Ie.read_shift(Te,"cstr"));break;case 1032:break;case 1537:{var Me=Ie.read_shift(2);ye={},ge.dense&&(ye["!data"]=[]),Ne.s.c=Ie.read_shift(2),Ne.e.c=Ie.read_shift(2),Ne.s.r=Ie.read_shift(4),Ne.e.r=Ie.read_shift(4),Ie.l+=4,Ie.l+2<Ie.length&&(Te=Ie.read_shift(2),he=Ie.read_shift(1),Re=Te==0?"":Ie.read_shift(Te,"cstr")),Re||(Re=encode_col(Me))}break;case 1538:{if(Ne.s.c>255||Ne.s.r>999999)break;Ne.e.c<Ne.s.c&&(Ne.e.c=Ne.s.c),Ne.e.r<Ne.s.r&&(Ne.e.r=Ne.s.r),ye["!ref"]=encode_range(Ne),book_append_sheet(Be,ye,Re)}break;case 2561:xe=Ie.read_shift(2),Ne.e.c<xe&&(Ne.e.c=xe),Ne.s.c>xe&&(Ne.s.c=xe),fe=Ie.read_shift(4),Ne.s.r>fe&&(Ne.s.r=fe),fe=Ie.read_shift(4),Ne.e.r<fe&&(Ne.e.r=fe);break;case 3073:{fe=Ie.read_shift(4),Te=Ie.read_shift(4),Ne.s.r>fe&&(Ne.s.r=fe),Ne.e.r<fe+Te-1&&(Ne.e.r=fe+Te-1);for(var He=encode_col(xe);Ie.l<Ie.length;){var We={t:"z"},Ue=Ie.read_shift(1);Ue&128&&(Ie.l+=2);var Ge=Ue&64?Ie.read_shift(2)-1:0;switch(Ue&31){case 1:break;case 2:We={t:"n",v:Ie.read_shift(2)};break;case 3:We={t:"n",v:Ie.read_shift(2,"i")};break;case 5:We={t:"n",v:Ie.read_shift(8,"f")};break;case 7:We={t:"s",v:Ee[he=Ie.read_shift(4)-1]};break;case 8:We={t:"n",v:Ie.read_shift(8,"f")},Ie.l+=2,Ie.l+=4;break;default:throw"Unrecognized QPW cell type "+(Ue&31)}var et=0;if(Ue&32)switch(Ue&31){case 2:et=Ie.read_shift(2);break;case 3:et=Ie.read_shift(2,"i");break;case 7:et=Ie.read_shift(2);break;default:throw"Unsupported delta for QPW cell type "+(Ue&31)}for(!ge.sheetStubs&&We.t=="z"||(ye["!data"]!=null?(ye["!data"][fe]||(ye["!data"][fe]=[]),ye["!data"][fe][xe]=We):ye[He+encode_row(fe)]=We),++fe,--Te;Ge-- >0&&Te>=0;){if(Ue&32)switch(Ue&31){case 2:We={t:"n",v:We.v+et&65535};break;case 3:We={t:"n",v:We.v+et&65535},We.v>32767&&(We.v-=65536);break;case 7:We={t:"s",v:Ee[he=he+et>>>0]};break;default:throw"Cannot apply delta for QPW cell type "+(Ue&31)}else switch(Ue&31){case 1:We={t:"z"};break;case 2:We={t:"n",v:Ie.read_shift(2)};break;case 7:We={t:"s",v:Ee[he=Ie.read_shift(4)-1]};break;default:throw"Cannot apply repeat for QPW cell type "+(Ue&31)}!ge.sheetStubs&&We.t=="z"||(ye["!data"]!=null?(ye["!data"][fe]||(ye["!data"][fe]=[]),ye["!data"][fe][xe]=We):ye[He+encode_row(fe)]=We),++fe,--Te}}}break}ue.l+=Ve}return Be}return{sheet_to_wk1:x,book_to_wk3:S,to_workbook:n}}();function parse_rpr(r){var n={},_=r.match(tagregex),x=0,S=!1;if(_)for(;x!=_.length;++x){var E=parsexmltag(_[x]);switch(E[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!E.val)break;case"<shadow>":case"<shadow/>":n.shadow=1;break;case"</shadow>":break;case"<charset":if(E.val=="1")break;n.cp=CS2CP[parseInt(E.val,10)];break;case"<outline":if(!E.val)break;case"<outline>":case"<outline/>":n.outline=1;break;case"</outline>":break;case"<rFont":n.name=E.val;break;case"<sz":n.sz=E.val;break;case"<strike":if(!E.val)break;case"<strike>":case"<strike/>":n.strike=1;break;case"</strike>":break;case"<u":if(!E.val)break;switch(E.val){case"double":n.uval="double";break;case"singleAccounting":n.uval="single-accounting";break;case"doubleAccounting":n.uval="double-accounting";break}case"<u>":case"<u/>":n.u=1;break;case"</u>":break;case"<b":if(E.val=="0")break;case"<b>":case"<b/>":n.b=1;break;case"</b>":break;case"<i":if(E.val=="0")break;case"<i>":case"<i/>":n.i=1;break;case"</i>":break;case"<color":E.rgb&&(n.color=E.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":n.family=E.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":n.valign=E.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":S=!0;break;case"</ext>":S=!1;break;default:if(E[0].charCodeAt(1)!==47&&!S)throw new Error("Unrecognized rich format "+E[0])}}return n}var parse_rs=function(){var r=matchtag("t"),n=matchtag("rPr");function _(E){var C=E.match(r);if(!C)return{t:"s",v:""};var T={t:"s",v:unescapexml(C[1])},B=E.match(n);return B&&(T.s=parse_rpr(B[1])),T}var x=/<(?:\w+:)?r>/g,S=/<\/(?:\w+:)?r>/;return function(C){return C.replace(x,"").split(S).map(_).filter(function(T){return T.v})}}(),rs_to_html=function r(){var n=/(\r\n|\n)/g;function _(S,E,C){var T=[];S.u&&T.push("text-decoration: underline;"),S.uval&&T.push("text-underline-style:"+S.uval+";"),S.sz&&T.push("font-size:"+S.sz+"pt;"),S.outline&&T.push("text-effect: outline;"),S.shadow&&T.push("text-shadow: auto;"),E.push('<span style="'+T.join("")+'">'),S.b&&(E.push("<b>"),C.push("</b>")),S.i&&(E.push("<i>"),C.push("</i>")),S.strike&&(E.push("<s>"),C.push("</s>"));var B=S.valign||"";return B=="superscript"||B=="super"?B="sup":B=="subscript"&&(B="sub"),B!=""&&(E.push("<"+B+">"),C.push("</"+B+">")),C.push("</span>"),S}function x(S){var E=[[],S.v,[]];return S.v?(S.s&&_(S.s,E[0],E[2]),E[0].join("")+E[1].replace(n,"<br/>")+E[2].join("")):""}return function(E){return E.map(x).join("")}}(),sitregex=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,sirregex=/<(?:\w+:)?r>/,sirphregex=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function parse_si(r,n){var _=n?n.cellHTML:!0,x={};return r?(r.match(/^\s*<(?:\w+:)?t[^>]*>/)?(x.t=unescapexml(utf8read(r.slice(r.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||""),!0),x.r=utf8read(r),_&&(x.h=escapehtml(x.t))):r.match(sirregex)&&(x.r=utf8read(r),x.t=unescapexml(utf8read((r.replace(sirphregex,"").match(sitregex)||[]).join("").replace(tagregex,"")),!0),_&&(x.h=rs_to_html(parse_rs(x.r)))),x):{t:""}}var sstr0=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,sstr1=/<(?:\w+:)?(?:si|sstItem)>/g,sstr2=/<\/(?:\w+:)?(?:si|sstItem)>/;function parse_sst_xml(r,n){var _=[],x="";if(!r)return _;var S=r.match(sstr0);if(S){x=S[2].replace(sstr1,"").split(sstr2);for(var E=0;E!=x.length;++E){var C=parse_si(x[E].trim(),n);C!=null&&(_[_.length]=C)}S=parsexmltag(S[1]),_.Count=S.count,_.Unique=S.uniqueCount}return _}var straywsregex=/^\s|\s$|[\t\n\r]/;function write_sst_xml(r,n){if(!n.bookSST)return"";var _=[XML_HEADER];_[_.length]=writextag("sst",null,{xmlns:XMLNS_main[0],count:r.Count,uniqueCount:r.Unique});for(var x=0;x!=r.length;++x)if(r[x]!=null){var S=r[x],E="<si>";S.r?E+=S.r:(E+="<t",S.t||(S.t=""),typeof S.t!="string"&&(S.t=String(S.t)),S.t.match(straywsregex)&&(E+=' xml:space="preserve"'),E+=">"+escapexml(S.t)+"</t>"),E+="</si>",_[_.length]=E}return _.length>2&&(_[_.length]="</sst>",_[1]=_[1].replace("/>",">")),_.join("")}function parse_BrtBeginSst(r){return[r.read_shift(4),r.read_shift(4)]}function parse_sst_bin(r,n){var _=[],x=!1;return recordhopper(r,function(E,C,T){switch(T){case 159:_.Count=E[0],_.Unique=E[1];break;case 19:_.push(E);break;case 160:return!0;case 35:x=!0;break;case 36:x=!1;break;default:if(C.T,!x||n.WTF)throw new Error("Unexpected record 0x"+T.toString(16))}}),_}function write_BrtBeginSst(r,n){return n||(n=new_buf(8)),n.write_shift(4,r.Count),n.write_shift(4,r.Unique),n}var write_BrtSSTItem=write_RichStr;function write_sst_bin(r){var n=buf_array();write_record(n,159,write_BrtBeginSst(r));for(var _=0;_<r.length;++_)write_record(n,19,write_BrtSSTItem(r[_]));return write_record(n,160),n.end()}function _JS2ANSI(r){for(var n=[],_=r.split(""),x=0;x<_.length;++x)n[x]=_[x].charCodeAt(0);return n}function parse_CRYPTOVersion(r,n){var _={};return _.Major=r.read_shift(2),_.Minor=r.read_shift(2),n>=4&&(r.l+=n-4),_}function parse_DataSpaceVersionInfo(r){var n={};return n.id=r.read_shift(0,"lpp4"),n.R=parse_CRYPTOVersion(r,4),n.U=parse_CRYPTOVersion(r,4),n.W=parse_CRYPTOVersion(r,4),n}function parse_DataSpaceMapEntry(r){for(var n=r.read_shift(4),_=r.l+n-4,x={},S=r.read_shift(4),E=[];S-- >0;)E.push({t:r.read_shift(4),v:r.read_shift(0,"lpp4")});if(x.name=r.read_shift(0,"lpp4"),x.comps=E,r.l!=_)throw new Error("Bad DataSpaceMapEntry: "+r.l+" != "+_);return x}function parse_DataSpaceMap(r){var n=[];r.l+=4;for(var _=r.read_shift(4);_-- >0;)n.push(parse_DataSpaceMapEntry(r));return n}function parse_DataSpaceDefinition(r){var n=[];r.l+=4;for(var _=r.read_shift(4);_-- >0;)n.push(r.read_shift(0,"lpp4"));return n}function parse_TransformInfoHeader(r){var n={};return r.read_shift(4),r.l+=4,n.id=r.read_shift(0,"lpp4"),n.name=r.read_shift(0,"lpp4"),n.R=parse_CRYPTOVersion(r,4),n.U=parse_CRYPTOVersion(r,4),n.W=parse_CRYPTOVersion(r,4),n}function parse_Primary(r){var n=parse_TransformInfoHeader(r);if(n.ename=r.read_shift(0,"8lpp4"),n.blksz=r.read_shift(4),n.cmode=r.read_shift(4),r.read_shift(4)!=4)throw new Error("Bad !Primary record");return n}function parse_EncryptionHeader(r,n){var _=r.l+n,x={};x.Flags=r.read_shift(4)&63,r.l+=4,x.AlgID=r.read_shift(4);var S=!1;switch(x.AlgID){case 26126:case 26127:case 26128:S=x.Flags==36;break;case 26625:S=x.Flags==4;break;case 0:S=x.Flags==16||x.Flags==4||x.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+x.AlgID}if(!S)throw new Error("Encryption Flags/AlgID mismatch");return x.AlgIDHash=r.read_shift(4),x.KeySize=r.read_shift(4),x.ProviderType=r.read_shift(4),r.l+=8,x.CSPName=r.read_shift(_-r.l>>1,"utf16le"),r.l=_,x}function parse_EncryptionVerifier(r,n){var _={},x=r.l+n;return r.l+=4,_.Salt=r.slice(r.l,r.l+16),r.l+=16,_.Verifier=r.slice(r.l,r.l+16),r.l+=16,r.read_shift(4),_.VerifierHash=r.slice(r.l,x),r.l=x,_}function parse_EncryptionInfo(r){var n=parse_CRYPTOVersion(r);switch(n.Minor){case 2:return[n.Minor,parse_EncInfoStd(r)];case 3:return[n.Minor,parse_EncInfoExt()];case 4:return[n.Minor,parse_EncInfoAgl(r)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+n.Minor)}function parse_EncInfoStd(r){var n=r.read_shift(4);if((n&63)!=36)throw new Error("EncryptionInfo mismatch");var _=r.read_shift(4),x=parse_EncryptionHeader(r,_),S=parse_EncryptionVerifier(r,r.length-r.l);return{t:"Std",h:x,v:S}}function parse_EncInfoExt(){throw new Error("File is password-protected: ECMA-376 Extensible")}function parse_EncInfoAgl(r){var n=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];r.l+=4;var _=r.read_shift(r.length-r.l,"utf8"),x={};return _.replace(tagregex,function(E){var C=parsexmltag(E);switch(strip_ns(C[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":n.forEach(function(T){x[T]=C[T]});break;case"<dataIntegrity":x.encryptedHmacKey=C.encryptedHmacKey,x.encryptedHmacValue=C.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":x.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":x.uri=C.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":x.encs.push(C);break;default:throw C[0]}}),x}function parse_RC4CryptoHeader(r,n){var _={},x=_.EncryptionVersionInfo=parse_CRYPTOVersion(r,4);if(n-=4,x.Minor!=2)throw new Error("unrecognized minor version code: "+x.Minor);if(x.Major>4||x.Major<2)throw new Error("unrecognized major version code: "+x.Major);_.Flags=r.read_shift(4),n-=4;var S=r.read_shift(4);return n-=4,_.EncryptionHeader=parse_EncryptionHeader(r,S),n-=S,_.EncryptionVerifier=parse_EncryptionVerifier(r,n),_}function parse_RC4Header(r){var n={},_=n.EncryptionVersionInfo=parse_CRYPTOVersion(r,4);if(_.Major!=1||_.Minor!=1)throw"unrecognized version code "+_.Major+" : "+_.Minor;return n.Salt=r.read_shift(16),n.EncryptedVerifier=r.read_shift(16),n.EncryptedVerifierHash=r.read_shift(16),n}function crypto_CreatePasswordVerifier_Method1(r){var n=0,_,x=_JS2ANSI(r),S=x.length+1,E,C,T,B,A;for(_=new_raw_buf(S),_[0]=x.length,E=1;E!=S;++E)_[E]=x[E-1];for(E=S-1;E>=0;--E)C=_[E],T=n&16384?1:0,B=n<<1&32767,A=T|B,n=A^C;return n^52811}var crypto_CreateXorArray_Method1=function(){var r=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],n=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],_=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],x=function(C){return(C/2|C*128)&255},S=function(C,T){return x(C^T)},E=function(C){for(var T=n[C.length-1],B=104,A=C.length-1;A>=0;--A)for(var I=C[A],N=0;N!=7;++N)I&64&&(T^=_[B]),I*=2,--B;return T};return function(C){for(var T=_JS2ANSI(C),B=E(T),A=T.length,I=new_raw_buf(16),N=0;N!=16;++N)I[N]=0;var V,D,O;for((A&1)===1&&(V=B>>8,I[A]=S(r[0],V),--A,V=B&255,D=T[T.length-1],I[A]=S(D,V));A>0;)--A,V=B>>8,I[A]=S(T[A],V),--A,V=B&255,I[A]=S(T[A],V);for(A=15,O=15-T.length;O>0;)V=B>>8,I[A]=S(r[O],V),--A,--O,V=B&255,I[A]=S(T[A],V),--A,--O;return I}}(),crypto_DecryptData_Method1=function(r,n,_,x,S){S||(S=n),x||(x=crypto_CreateXorArray_Method1(r));var E,C;for(E=0;E!=n.length;++E)C=n[E],C^=x[_],C=(C>>5|C<<3)&255,S[E]=C,++_;return[S,_,x]},crypto_MakeXorDecryptor=function(r){var n=0,_=crypto_CreateXorArray_Method1(r);return function(x){var S=crypto_DecryptData_Method1("",x,n,_);return n=S[1],S[0]}};function parse_XORObfuscation(r,n,_,x){var S={key:parseuint16(r),verificationBytes:parseuint16(r)};return _.password&&(S.verifier=crypto_CreatePasswordVerifier_Method1(_.password)),x.valid=S.verificationBytes===S.verifier,x.valid&&(x.insitu=crypto_MakeXorDecryptor(_.password)),S}function parse_FilePassHeader(r,n,_){var x=_||{};return x.Info=r.read_shift(2),r.l-=2,x.Info===1?x.Data=parse_RC4Header(r):x.Data=parse_RC4CryptoHeader(r,n),x}function parse_FilePass(r,n,_){var x={Type:_.biff>=8?r.read_shift(2):0};return x.Type?parse_FilePassHeader(r,n-2,x):parse_XORObfuscation(r,_.biff>=8?n:n-2,_,x),x}function rtf_to_sheet(r,n){switch(n.type){case"base64":return rtf_to_sheet_str(Base64_decode(r),n);case"binary":return rtf_to_sheet_str(r,n);case"buffer":return rtf_to_sheet_str(has_buf&&Buffer.isBuffer(r)?r.toString("binary"):a2s(r),n);case"array":return rtf_to_sheet_str(cc2str(r),n)}throw new Error("Unrecognized type "+n.type)}function rtf_to_sheet_str(r,n){var _=n||{},x={},S=_.dense;S&&(x["!data"]=[]);var E=r.match(/\\trowd[\s\S]*?\\row\b/g);if(!E)throw new Error("RTF missing table");var C={s:{c:0,r:0},e:{c:0,r:E.length-1}},T=[];return E.forEach(function(B,A){S&&(T=x["!data"][A]=[]);for(var I=/\\[\w\-]+\b/g,N=0,V,D=-1,O=[];(V=I.exec(B))!=null;){var F=B.slice(N,I.lastIndex-V[0].length);switch(F.charCodeAt(0)==32&&(F=F.slice(1)),F.length&&O.push(F),V[0]){case"\\cell":if(++D,O.length){var M={v:O.join(""),t:"s"};M.v=="TRUE"||M.v=="FALSE"?(M.v=M.v=="TRUE",M.t="b"):isNaN(fuzzynum(M.v))||(M.t="n",_.cellText!==!1&&(M.w=M.v),M.v=fuzzynum(M.v)),S?T[D]=M:x[encode_cell({r:A,c:D})]=M}O=[];break;case"\\par":O.push(`
`);break}N=I.lastIndex}D>C.e.c&&(C.e.c=D)}),x["!ref"]=encode_range(C),x}function rtf_to_workbook(r,n){var _=sheet_to_workbook(rtf_to_sheet(r,n),n);return _.bookType="rtf",_}function sheet_to_rtf(r,n){var _=["{\\rtf1\\ansi"];if(!r["!ref"])return _[0]+"}";for(var x=safe_decode_range(r["!ref"]),S,E=r["!data"]!=null,C=[],T=x.s.r;T<=x.e.r;++T){_.push("\\trowd\\trautofit1");for(var B=x.s.c;B<=x.e.c;++B)_.push("\\cellx"+(B+1));for(_.push("\\pard\\intbl"),E&&(C=r["!data"][T]||[]),B=x.s.c;B<=x.e.c;++B){var A=encode_cell({r:T,c:B});if(S=E?C[B]:r[A],!S||S.v==null&&(!S.f||S.F)){_.push(" \\cell");continue}_.push(" "+(S.w||(format_cell(S),S.w)||"").replace(/[\r\n]/g,"\\par ")),_.push("\\cell")}_.push("\\pard\\intbl\\row")}return _.join("")+"}"}function hex2RGB(r){var n=r.slice(r[0]==="#"?1:0).slice(0,6);return[parseInt(n.slice(0,2),16),parseInt(n.slice(2,4),16),parseInt(n.slice(4,6),16)]}function rgb2Hex(r){for(var n=0,_=1;n!=3;++n)_=_*256+(r[n]>255?255:r[n]<0?0:r[n]);return _.toString(16).toUpperCase().slice(1)}function rgb2HSL(r){var n=r[0]/255,_=r[1]/255,x=r[2]/255,S=Math.max(n,_,x),E=Math.min(n,_,x),C=S-E;if(C===0)return[0,0,n];var T=0,B=0,A=S+E;switch(B=C/(A>1?2-A:A),S){case n:T=((_-x)/C+6)%6;break;case _:T=(x-n)/C+2;break;case x:T=(n-_)/C+4;break}return[T/6,B,A/2]}function hsl2RGB(r){var n=r[0],_=r[1],x=r[2],S=_*2*(x<.5?x:1-x),E=x-S/2,C=[E,E,E],T=6*n,B;if(_!==0)switch(T|0){case 0:case 6:B=S*T,C[0]+=S,C[1]+=B;break;case 1:B=S*(2-T),C[0]+=B,C[1]+=S;break;case 2:B=S*(T-2),C[1]+=S,C[2]+=B;break;case 3:B=S*(4-T),C[1]+=B,C[2]+=S;break;case 4:B=S*(T-4),C[2]+=S,C[0]+=B;break;case 5:B=S*(6-T),C[2]+=B,C[0]+=S;break}for(var A=0;A!=3;++A)C[A]=Math.round(C[A]*255);return C}function rgb_tint(r,n){if(n===0)return r;var _=rgb2HSL(hex2RGB(r));return n<0?_[2]=_[2]*(1+n):_[2]=1-(1-_[2])*(1-n),rgb2Hex(hsl2RGB(_))}var DEF_MDW=6,MAX_MDW=15,MIN_MDW=1,MDW=DEF_MDW;function width2px(r){return Math.floor((r+Math.round(128/MDW)/256)*MDW)}function px2char(r){return Math.floor((r-5)/MDW*100+.5)/100}function char2width(r){return Math.round((r*MDW+5)/MDW*256)/256}function cycle_width(r){return char2width(px2char(width2px(r)))}function find_mdw_colw(r){var n=Math.abs(r-cycle_width(r)),_=MDW;if(n>.005)for(MDW=MIN_MDW;MDW<MAX_MDW;++MDW)Math.abs(r-cycle_width(r))<=n&&(n=Math.abs(r-cycle_width(r)),_=MDW);MDW=_}function process_col(r){r.width?(r.wpx=width2px(r.width),r.wch=px2char(r.wpx),r.MDW=MDW):r.wpx?(r.wch=px2char(r.wpx),r.width=char2width(r.wch),r.MDW=MDW):typeof r.wch=="number"&&(r.width=char2width(r.wch),r.wpx=width2px(r.width),r.MDW=MDW),r.customWidth&&delete r.customWidth}var DEF_PPI=96,PPI=DEF_PPI;function px2pt(r){return r*96/PPI}function pt2px(r){return r*PPI/96}var XLMLPatternTypeMap={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function parse_borders(r,n,_,x){n.Borders=[];var S={},E=!1;(r[0].match(tagregex)||[]).forEach(function(C){var T=parsexmltag(C);switch(strip_ns(T[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":S={},T.diagonalUp&&(S.diagonalUp=parsexmlbool(T.diagonalUp)),T.diagonalDown&&(S.diagonalDown=parsexmlbool(T.diagonalDown)),n.Borders.push(S);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":E=!0;break;case"</ext>":E=!1;break;default:if(x&&x.WTF&&!E)throw new Error("unrecognized "+T[0]+" in borders")}})}function parse_fills(r,n,_,x){n.Fills=[];var S={},E=!1;(r[0].match(tagregex)||[]).forEach(function(C){var T=parsexmltag(C);switch(strip_ns(T[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":S={},n.Fills.push(S);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":n.Fills.push(S),S={};break;case"<patternFill":case"<patternFill>":T.patternType&&(S.patternType=T.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":S.bgColor||(S.bgColor={}),T.indexed&&(S.bgColor.indexed=parseInt(T.indexed,10)),T.theme&&(S.bgColor.theme=parseInt(T.theme,10)),T.tint&&(S.bgColor.tint=parseFloat(T.tint)),T.rgb&&(S.bgColor.rgb=T.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":S.fgColor||(S.fgColor={}),T.theme&&(S.fgColor.theme=parseInt(T.theme,10)),T.tint&&(S.fgColor.tint=parseFloat(T.tint)),T.rgb!=null&&(S.fgColor.rgb=T.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":E=!0;break;case"</ext>":E=!1;break;default:if(x&&x.WTF&&!E)throw new Error("unrecognized "+T[0]+" in fills")}})}function parse_fonts(r,n,_,x){n.Fonts=[];var S={},E=!1;(r[0].match(tagregex)||[]).forEach(function(C){var T=parsexmltag(C);switch(strip_ns(T[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":n.Fonts.push(S),S={};break;case"<name":T.val&&(S.name=utf8read(T.val));break;case"<name/>":case"</name>":break;case"<b":S.bold=T.val?parsexmlbool(T.val):1;break;case"<b/>":S.bold=1;break;case"<i":S.italic=T.val?parsexmlbool(T.val):1;break;case"<i/>":S.italic=1;break;case"<u":switch(T.val){case"none":S.underline=0;break;case"single":S.underline=1;break;case"double":S.underline=2;break;case"singleAccounting":S.underline=33;break;case"doubleAccounting":S.underline=34;break}break;case"<u/>":S.underline=1;break;case"<strike":S.strike=T.val?parsexmlbool(T.val):1;break;case"<strike/>":S.strike=1;break;case"<outline":S.outline=T.val?parsexmlbool(T.val):1;break;case"<outline/>":S.outline=1;break;case"<shadow":S.shadow=T.val?parsexmlbool(T.val):1;break;case"<shadow/>":S.shadow=1;break;case"<condense":S.condense=T.val?parsexmlbool(T.val):1;break;case"<condense/>":S.condense=1;break;case"<extend":S.extend=T.val?parsexmlbool(T.val):1;break;case"<extend/>":S.extend=1;break;case"<sz":T.val&&(S.sz=+T.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":T.val&&(S.vertAlign=T.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":T.val&&(S.family=parseInt(T.val,10));break;case"<family/>":case"</family>":break;case"<scheme":T.val&&(S.scheme=T.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(T.val=="1")break;T.codepage=CS2CP[parseInt(T.val,10)];break;case"<color":if(S.color||(S.color={}),T.auto&&(S.color.auto=parsexmlbool(T.auto)),T.rgb)S.color.rgb=T.rgb.slice(-6);else if(T.indexed){S.color.index=parseInt(T.indexed,10);var B=XLSIcv[S.color.index];S.color.index==81&&(B=XLSIcv[1]),B||(B=XLSIcv[1]),S.color.rgb=B[0].toString(16)+B[1].toString(16)+B[2].toString(16)}else T.theme&&(S.color.theme=parseInt(T.theme,10),T.tint&&(S.color.tint=parseFloat(T.tint)),T.theme&&_.themeElements&&_.themeElements.clrScheme&&(S.color.rgb=rgb_tint(_.themeElements.clrScheme[S.color.theme].rgb,S.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":E=!0;break;case"</AlternateContent>":E=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":E=!0;break;case"</ext>":E=!1;break;default:if(x&&x.WTF&&!E)throw new Error("unrecognized "+T[0]+" in fonts")}})}function parse_numFmts(r,n,_){n.NumberFmt=[];for(var x=keys(table_fmt),S=0;S<x.length;++S)n.NumberFmt[x[S]]=table_fmt[x[S]];var E=r[0].match(tagregex);if(E)for(S=0;S<E.length;++S){var C=parsexmltag(E[S]);switch(strip_ns(C[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var T=unescapexml(utf8read(C.formatCode)),B=parseInt(C.numFmtId,10);if(n.NumberFmt[B]=T,B>0){if(B>392){for(B=392;B>60&&n.NumberFmt[B]!=null;--B);n.NumberFmt[B]=T}SSF__load(T,B)}}break;case"</numFmt>":break;default:if(_.WTF)throw new Error("unrecognized "+C[0]+" in numFmts")}}}function write_numFmts(r){var n=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(_){for(var x=_[0];x<=_[1];++x)r[x]!=null&&(n[n.length]=writextag("numFmt",null,{numFmtId:x,formatCode:escapexml(r[x])}))}),n.length===1?"":(n[n.length]="</numFmts>",n[0]=writextag("numFmts",null,{count:n.length-2}).replace("/>",">"),n.join(""))}var cellXF_uint=["numFmtId","fillId","fontId","borderId","xfId"],cellXF_bool=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function parse_cellXfs(r,n,_){n.CellXf=[];var x,S=!1;(r[0].match(tagregex)||[]).forEach(function(E){var C=parsexmltag(E),T=0;switch(strip_ns(C[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(x=C,delete x[0],T=0;T<cellXF_uint.length;++T)x[cellXF_uint[T]]&&(x[cellXF_uint[T]]=parseInt(x[cellXF_uint[T]],10));for(T=0;T<cellXF_bool.length;++T)x[cellXF_bool[T]]&&(x[cellXF_bool[T]]=parsexmlbool(x[cellXF_bool[T]]));if(n.NumberFmt&&x.numFmtId>392){for(T=392;T>60;--T)if(n.NumberFmt[x.numFmtId]==n.NumberFmt[T]){x.numFmtId=T;break}}n.CellXf.push(x);break;case"</xf>":break;case"<alignment":case"<alignment/>":var B={};C.vertical&&(B.vertical=C.vertical),C.horizontal&&(B.horizontal=C.horizontal),C.textRotation!=null&&(B.textRotation=C.textRotation),C.indent&&(B.indent=C.indent),C.wrapText&&(B.wrapText=parsexmlbool(C.wrapText)),x.alignment=B;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":S=!0;break;case"</AlternateContent>":S=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":S=!0;break;case"</ext>":S=!1;break;default:if(_&&_.WTF&&!S)throw new Error("unrecognized "+C[0]+" in cellXfs")}})}function write_cellXfs(r){var n=[];return n[n.length]=writextag("cellXfs",null),r.forEach(function(_){n[n.length]=writextag("xf",null,_)}),n[n.length]="</cellXfs>",n.length===2?"":(n[0]=writextag("cellXfs",null,{count:n.length-2}).replace("/>",">"),n.join(""))}var parse_sty_xml=function r(){var n=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,_=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,x=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,S=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,E=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(T,B,A){var I={};if(!T)return I;T=T.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var N;return(N=T.match(n))&&parse_numFmts(N,I,A),(N=T.match(S))&&parse_fonts(N,I,B,A),(N=T.match(x))&&parse_fills(N,I,B,A),(N=T.match(E))&&parse_borders(N,I,B,A),(N=T.match(_))&&parse_cellXfs(N,I,A),I}}();function write_sty_xml(r,n){var _=[XML_HEADER,writextag("styleSheet",null,{xmlns:XMLNS_main[0],"xmlns:vt":XMLNS.vt})],x;return r.SSF&&(x=write_numFmts(r.SSF))!=null&&(_[_.length]=x),_[_.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',_[_.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',_[_.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',_[_.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(x=write_cellXfs(n.cellXfs))&&(_[_.length]=x),_[_.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',_[_.length]='<dxfs count="0"/>',_[_.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',_.length>2&&(_[_.length]="</styleSheet>",_[1]=_[1].replace("/>",">")),_.join("")}function parse_BrtFmt(r,n){var _=r.read_shift(2),x=parse_XLWideString(r);return[_,x]}function write_BrtFmt(r,n,_){_||(_=new_buf(6+4*n.length)),_.write_shift(2,r),write_XLWideString(n,_);var x=_.length>_.l?_.slice(0,_.l):_;return _.l==null&&(_.l=_.length),x}function parse_BrtFont(r,n,_){var x={};x.sz=r.read_shift(2)/20;var S=parse_FontFlags(r);S.fItalic&&(x.italic=1),S.fCondense&&(x.condense=1),S.fExtend&&(x.extend=1),S.fShadow&&(x.shadow=1),S.fOutline&&(x.outline=1),S.fStrikeout&&(x.strike=1);var E=r.read_shift(2);switch(E===700&&(x.bold=1),r.read_shift(2)){case 1:x.vertAlign="superscript";break;case 2:x.vertAlign="subscript";break}var C=r.read_shift(1);C!=0&&(x.underline=C);var T=r.read_shift(1);T>0&&(x.family=T);var B=r.read_shift(1);switch(B>0&&(x.charset=B),r.l++,x.color=parse_BrtColor(r),r.read_shift(1)){case 1:x.scheme="major";break;case 2:x.scheme="minor";break}return x.name=parse_XLWideString(r),x}function write_BrtFont(r,n){n||(n=new_buf(25+4*32)),n.write_shift(2,r.sz*20),write_FontFlags(r,n),n.write_shift(2,r.bold?700:400);var _=0;r.vertAlign=="superscript"?_=1:r.vertAlign=="subscript"&&(_=2),n.write_shift(2,_),n.write_shift(1,r.underline||0),n.write_shift(1,r.family||0),n.write_shift(1,r.charset||0),n.write_shift(1,0),write_BrtColor(r.color,n);var x=0;return r.scheme=="major"&&(x=1),r.scheme=="minor"&&(x=2),n.write_shift(1,x),write_XLWideString(r.name,n),n.length>n.l?n.slice(0,n.l):n}var XLSBFillPTNames=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],rev_XLSBFillPTNames,parse_BrtFill=parsenoop;function write_BrtFill(r,n){n||(n=new_buf(4*3+8*7+16*1)),rev_XLSBFillPTNames||(rev_XLSBFillPTNames=evert(XLSBFillPTNames));var _=rev_XLSBFillPTNames[r.patternType];_==null&&(_=40),n.write_shift(4,_);var x=0;if(_!=40)for(write_BrtColor({auto:1},n),write_BrtColor({auto:1},n);x<12;++x)n.write_shift(4,0);else{for(;x<4;++x)n.write_shift(4,0);for(;x<12;++x)n.write_shift(4,0)}return n.length>n.l?n.slice(0,n.l):n}function parse_BrtXF(r,n){var _=r.l+n,x=r.read_shift(2),S=r.read_shift(2);return r.l=_,{ixfe:x,numFmtId:S}}function write_BrtXF(r,n,_){_||(_=new_buf(16)),_.write_shift(2,n||0),_.write_shift(2,r.numFmtId||0),_.write_shift(2,0),_.write_shift(2,0),_.write_shift(2,0),_.write_shift(1,0),_.write_shift(1,0);var x=0;return _.write_shift(1,x),_.write_shift(1,0),_.write_shift(1,0),_.write_shift(1,0),_}function write_Blxf(r,n){return n||(n=new_buf(10)),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(4,0),n}var parse_BrtBorder=parsenoop;function write_BrtBorder(r,n){return n||(n=new_buf(51)),n.write_shift(1,0),write_Blxf(null,n),write_Blxf(null,n),write_Blxf(null,n),write_Blxf(null,n),write_Blxf(null,n),n.length>n.l?n.slice(0,n.l):n}function write_BrtStyle(r,n){return n||(n=new_buf(12+4*10)),n.write_shift(4,r.xfId),n.write_shift(2,1),n.write_shift(1,+r.builtinId),n.write_shift(1,0),write_XLNullableWideString(r.name||"",n),n.length>n.l?n.slice(0,n.l):n}function write_BrtBeginTableStyles(r,n,_){var x=new_buf(2052);return x.write_shift(4,r),write_XLNullableWideString(n,x),write_XLNullableWideString(_,x),x.length>x.l?x.slice(0,x.l):x}function parse_sty_bin(r,n,_){var x={};x.NumberFmt=[];for(var S in table_fmt)x.NumberFmt[S]=table_fmt[S];x.CellXf=[],x.Fonts=[];var E=[],C=!1;return recordhopper(r,function(B,A,I){switch(I){case 44:x.NumberFmt[B[0]]=B[1],SSF__load(B[1],B[0]);break;case 43:x.Fonts.push(B),B.color.theme!=null&&n&&n.themeElements&&n.themeElements.clrScheme&&(B.color.rgb=rgb_tint(n.themeElements.clrScheme[B.color.theme].rgb,B.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:E[E.length-1]==617&&x.CellXf.push(B);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:C=!0;break;case 36:C=!1;break;case 37:E.push(I),C=!0;break;case 38:E.pop(),C=!1;break;default:if(A.T>0)E.push(I);else if(A.T<0)E.pop();else if(!C||_.WTF&&E[E.length-1]!=37)throw new Error("Unexpected record 0x"+I.toString(16))}}),x}function write_FMTS_bin(r,n){if(n){var _=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(x){for(var S=x[0];S<=x[1];++S)n[S]!=null&&++_}),_!=0&&(write_record(r,615,write_UInt32LE(_)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(x){for(var S=x[0];S<=x[1];++S)n[S]!=null&&write_record(r,44,write_BrtFmt(S,n[S]))}),write_record(r,616))}}function write_FONTS_bin(r){var n=1;write_record(r,611,write_UInt32LE(n)),write_record(r,43,write_BrtFont({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),write_record(r,612)}function write_FILLS_bin(r){var n=2;write_record(r,603,write_UInt32LE(n)),write_record(r,45,write_BrtFill({patternType:"none"})),write_record(r,45,write_BrtFill({patternType:"gray125"})),write_record(r,604)}function write_BORDERS_bin(r){var n=1;write_record(r,613,write_UInt32LE(n)),write_record(r,46,write_BrtBorder()),write_record(r,614)}function write_CELLSTYLEXFS_bin(r){var n=1;write_record(r,626,write_UInt32LE(n)),write_record(r,47,write_BrtXF({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),write_record(r,627)}function write_CELLXFS_bin(r,n){write_record(r,617,write_UInt32LE(n.length)),n.forEach(function(_){write_record(r,47,write_BrtXF(_,0))}),write_record(r,618)}function write_STYLES_bin(r){var n=1;write_record(r,619,write_UInt32LE(n)),write_record(r,48,write_BrtStyle({xfId:0,builtinId:0,name:"Normal"})),write_record(r,620)}function write_DXFS_bin(r){var n=0;write_record(r,505,write_UInt32LE(n)),write_record(r,506)}function write_TABLESTYLES_bin(r){var n=0;write_record(r,508,write_BrtBeginTableStyles(n,"TableStyleMedium9","PivotStyleMedium4")),write_record(r,509)}function write_sty_bin(r,n){var _=buf_array();return write_record(_,278),write_FMTS_bin(_,r.SSF),write_FONTS_bin(_),write_FILLS_bin(_),write_BORDERS_bin(_),write_CELLSTYLEXFS_bin(_),write_CELLXFS_bin(_,n.cellXfs),write_STYLES_bin(_),write_DXFS_bin(_),write_TABLESTYLES_bin(_),write_record(_,279),_.end()}var XLSXThemeClrScheme=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function parse_clrScheme(r,n,_){n.themeElements.clrScheme=[];var x={};(r[0].match(tagregex)||[]).forEach(function(S){var E=parsexmltag(S);switch(E[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":x.rgb=E.val;break;case"<a:sysClr":x.rgb=E.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":E[0].charAt(1)==="/"?(n.themeElements.clrScheme[XLSXThemeClrScheme.indexOf(E[0])]=x,x={}):x.name=E[0].slice(3,E[0].length-1);break;default:if(_&&_.WTF)throw new Error("Unrecognized "+E[0]+" in clrScheme")}})}function parse_fontScheme(){}function parse_fmtScheme(){}var clrsregex=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,fntsregex=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,fmtsregex=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function parse_themeElements(r,n,_){n.themeElements={};var x;[["clrScheme",clrsregex,parse_clrScheme],["fontScheme",fntsregex,parse_fontScheme],["fmtScheme",fmtsregex,parse_fmtScheme]].forEach(function(S){if(!(x=r.match(S[1])))throw new Error(S[0]+" not found in themeElements");S[2](x,n,_)})}var themeltregex=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function parse_theme_xml(r,n){(!r||r.length===0)&&(r=write_theme());var _,x={};if(!(_=r.match(themeltregex)))throw new Error("themeElements not found in theme");return parse_themeElements(_[0],x,n),x.raw=r,x}function write_theme(r,n){if(n&&n.themeXLSX)return n.themeXLSX;if(r&&typeof r.raw=="string")return r.raw;var _=[XML_HEADER];return _[_.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',_[_.length]="<a:themeElements>",_[_.length]='<a:clrScheme name="Office">',_[_.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',_[_.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',_[_.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',_[_.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',_[_.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',_[_.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',_[_.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',_[_.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',_[_.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',_[_.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',_[_.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',_[_.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',_[_.length]="</a:clrScheme>",_[_.length]='<a:fontScheme name="Office">',_[_.length]="<a:majorFont>",_[_.length]='<a:latin typeface="Cambria"/>',_[_.length]='<a:ea typeface=""/>',_[_.length]='<a:cs typeface=""/>',_[_.length]='<a:font script="Jpan" typeface=" "/>',_[_.length]='<a:font script="Hang" typeface=" "/>',_[_.length]='<a:font script="Hans" typeface=""/>',_[_.length]='<a:font script="Hant" typeface=""/>',_[_.length]='<a:font script="Arab" typeface="Times New Roman"/>',_[_.length]='<a:font script="Hebr" typeface="Times New Roman"/>',_[_.length]='<a:font script="Thai" typeface="Tahoma"/>',_[_.length]='<a:font script="Ethi" typeface="Nyala"/>',_[_.length]='<a:font script="Beng" typeface="Vrinda"/>',_[_.length]='<a:font script="Gujr" typeface="Shruti"/>',_[_.length]='<a:font script="Khmr" typeface="MoolBoran"/>',_[_.length]='<a:font script="Knda" typeface="Tunga"/>',_[_.length]='<a:font script="Guru" typeface="Raavi"/>',_[_.length]='<a:font script="Cans" typeface="Euphemia"/>',_[_.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',_[_.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',_[_.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',_[_.length]='<a:font script="Thaa" typeface="MV Boli"/>',_[_.length]='<a:font script="Deva" typeface="Mangal"/>',_[_.length]='<a:font script="Telu" typeface="Gautami"/>',_[_.length]='<a:font script="Taml" typeface="Latha"/>',_[_.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',_[_.length]='<a:font script="Orya" typeface="Kalinga"/>',_[_.length]='<a:font script="Mlym" typeface="Kartika"/>',_[_.length]='<a:font script="Laoo" typeface="DokChampa"/>',_[_.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',_[_.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',_[_.length]='<a:font script="Viet" typeface="Times New Roman"/>',_[_.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',_[_.length]='<a:font script="Geor" typeface="Sylfaen"/>',_[_.length]="</a:majorFont>",_[_.length]="<a:minorFont>",_[_.length]='<a:latin typeface="Calibri"/>',_[_.length]='<a:ea typeface=""/>',_[_.length]='<a:cs typeface=""/>',_[_.length]='<a:font script="Jpan" typeface=" "/>',_[_.length]='<a:font script="Hang" typeface=" "/>',_[_.length]='<a:font script="Hans" typeface=""/>',_[_.length]='<a:font script="Hant" typeface=""/>',_[_.length]='<a:font script="Arab" typeface="Arial"/>',_[_.length]='<a:font script="Hebr" typeface="Arial"/>',_[_.length]='<a:font script="Thai" typeface="Tahoma"/>',_[_.length]='<a:font script="Ethi" typeface="Nyala"/>',_[_.length]='<a:font script="Beng" typeface="Vrinda"/>',_[_.length]='<a:font script="Gujr" typeface="Shruti"/>',_[_.length]='<a:font script="Khmr" typeface="DaunPenh"/>',_[_.length]='<a:font script="Knda" typeface="Tunga"/>',_[_.length]='<a:font script="Guru" typeface="Raavi"/>',_[_.length]='<a:font script="Cans" typeface="Euphemia"/>',_[_.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',_[_.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',_[_.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',_[_.length]='<a:font script="Thaa" typeface="MV Boli"/>',_[_.length]='<a:font script="Deva" typeface="Mangal"/>',_[_.length]='<a:font script="Telu" typeface="Gautami"/>',_[_.length]='<a:font script="Taml" typeface="Latha"/>',_[_.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',_[_.length]='<a:font script="Orya" typeface="Kalinga"/>',_[_.length]='<a:font script="Mlym" typeface="Kartika"/>',_[_.length]='<a:font script="Laoo" typeface="DokChampa"/>',_[_.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',_[_.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',_[_.length]='<a:font script="Viet" typeface="Arial"/>',_[_.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',_[_.length]='<a:font script="Geor" typeface="Sylfaen"/>',_[_.length]="</a:minorFont>",_[_.length]="</a:fontScheme>",_[_.length]='<a:fmtScheme name="Office">',_[_.length]="<a:fillStyleLst>",_[_.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',_[_.length]='<a:gradFill rotWithShape="1">',_[_.length]="<a:gsLst>",_[_.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',_[_.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',_[_.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',_[_.length]="</a:gsLst>",_[_.length]='<a:lin ang="16200000" scaled="1"/>',_[_.length]="</a:gradFill>",_[_.length]='<a:gradFill rotWithShape="1">',_[_.length]="<a:gsLst>",_[_.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',_[_.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',_[_.length]="</a:gsLst>",_[_.length]='<a:lin ang="16200000" scaled="0"/>',_[_.length]="</a:gradFill>",_[_.length]="</a:fillStyleLst>",_[_.length]="<a:lnStyleLst>",_[_.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',_[_.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',_[_.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',_[_.length]="</a:lnStyleLst>",_[_.length]="<a:effectStyleLst>",_[_.length]="<a:effectStyle>",_[_.length]="<a:effectLst>",_[_.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',_[_.length]="</a:effectLst>",_[_.length]="</a:effectStyle>",_[_.length]="<a:effectStyle>",_[_.length]="<a:effectLst>",_[_.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',_[_.length]="</a:effectLst>",_[_.length]="</a:effectStyle>",_[_.length]="<a:effectStyle>",_[_.length]="<a:effectLst>",_[_.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',_[_.length]="</a:effectLst>",_[_.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',_[_.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',_[_.length]="</a:effectStyle>",_[_.length]="</a:effectStyleLst>",_[_.length]="<a:bgFillStyleLst>",_[_.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',_[_.length]='<a:gradFill rotWithShape="1">',_[_.length]="<a:gsLst>",_[_.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',_[_.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',_[_.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',_[_.length]="</a:gsLst>",_[_.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',_[_.length]="</a:gradFill>",_[_.length]='<a:gradFill rotWithShape="1">',_[_.length]="<a:gsLst>",_[_.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',_[_.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',_[_.length]="</a:gsLst>",_[_.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',_[_.length]="</a:gradFill>",_[_.length]="</a:bgFillStyleLst>",_[_.length]="</a:fmtScheme>",_[_.length]="</a:themeElements>",_[_.length]="<a:objectDefaults>",_[_.length]="<a:spDef>",_[_.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',_[_.length]="</a:spDef>",_[_.length]="<a:lnDef>",_[_.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',_[_.length]="</a:lnDef>",_[_.length]="</a:objectDefaults>",_[_.length]="<a:extraClrSchemeLst/>",_[_.length]="</a:theme>",_.join("")}function parse_Theme(r,n,_){var x=r.l+n,S=r.read_shift(4);if(S!==124226){if(!_.cellStyles){r.l=x;return}var E=r.slice(r.l);r.l=x;var C;try{C=zip_read(E,{type:"array"})}catch{return}var T=getzipstr(C,"theme/theme/theme1.xml",!0);if(T)return parse_theme_xml(T,_)}}function parse_ColorTheme(r){return r.read_shift(4)}function parse_FullColorExt(r){var n={};switch(n.xclrType=r.read_shift(2),n.nTintShade=r.read_shift(2),n.xclrType){case 0:r.l+=4;break;case 1:n.xclrValue=parse_IcvXF(r,4);break;case 2:n.xclrValue=parse_LongRGBA(r);break;case 3:n.xclrValue=parse_ColorTheme(r);break;case 4:r.l+=4;break}return r.l+=8,n}function parse_IcvXF(r,n){return parsenoop(r,n)}function parse_XFExtGradient(r,n){return parsenoop(r,n)}function parse_ExtProp(r){var n=r.read_shift(2),_=r.read_shift(2)-4,x=[n];switch(n){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:x[1]=parse_FullColorExt(r);break;case 6:x[1]=parse_XFExtGradient(r,_);break;case 14:case 15:x[1]=r.read_shift(_===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+n+" "+_)}return x}function parse_XFExt(r,n){var _=r.l+n;r.l+=2;var x=r.read_shift(2);r.l+=2;for(var S=r.read_shift(2),E=[];S-- >0;)E.push(parse_ExtProp(r,_-r.l));return{ixfe:x,ext:E}}function update_xfext(r,n){n.forEach(function(_){switch(_[0]){}})}function parse_BrtMdtinfo(r,n){return{flags:r.read_shift(4),version:r.read_shift(4),name:parse_XLWideString(r)}}function write_BrtMdtinfo(r){var n=new_buf(12+2*r.name.length);return n.write_shift(4,r.flags),n.write_shift(4,r.version),write_XLWideString(r.name,n),n.slice(0,n.l)}function parse_BrtMdb(r){for(var n=[],_=r.read_shift(4);_-- >0;)n.push([r.read_shift(4),r.read_shift(4)]);return n}function write_BrtMdb(r){var n=new_buf(4+8*r.length);n.write_shift(4,r.length);for(var _=0;_<r.length;++_)n.write_shift(4,r[_][0]),n.write_shift(4,r[_][1]);return n}function write_BrtBeginEsfmd(r,n){var _=new_buf(8+2*n.length);return _.write_shift(4,r),write_XLWideString(n,_),_.slice(0,_.l)}function parse_BrtBeginEsmdb(r){return r.l+=4,r.read_shift(4)!=0}function write_BrtBeginEsmdb(r,n){var _=new_buf(8);return _.write_shift(4,r),_.write_shift(4,n?1:0),_}function parse_xlmeta_bin(r,n,_){var x={Types:[],Cell:[],Value:[]},S=_||{},E=[],C=!1,T=2;return recordhopper(r,function(B,A,I){switch(I){case 335:x.Types.push({name:B.name});break;case 51:B.forEach(function(N){T==1?x.Cell.push({type:x.Types[N[0]-1].name,index:N[1]}):T==0&&x.Value.push({type:x.Types[N[0]-1].name,index:N[1]})});break;case 337:T=B?1:0;break;case 338:T=2;break;case 35:E.push(I),C=!0;break;case 36:E.pop(),C=!1;break;default:if(!A.T){if(!C||S.WTF&&E[E.length-1]!=35)throw new Error("Unexpected record 0x"+I.toString(16))}}}),x}function write_xlmeta_bin(){var r=buf_array();return write_record(r,332),write_record(r,334,write_UInt32LE(1)),write_record(r,335,write_BrtMdtinfo({name:"XLDAPR",version:12e4,flags:3496657072})),write_record(r,336),write_record(r,339,write_BrtBeginEsfmd(1,"XLDAPR")),write_record(r,52),write_record(r,35,write_UInt32LE(514)),write_record(r,4096,write_UInt32LE(0)),write_record(r,4097,writeuint16(1)),write_record(r,36),write_record(r,53),write_record(r,340),write_record(r,337,write_BrtBeginEsmdb(1,!0)),write_record(r,51,write_BrtMdb([[1,0]])),write_record(r,338),write_record(r,333),r.end()}function parse_xlmeta_xml(r,n,_){var x={Types:[],Cell:[],Value:[]};if(!r)return x;var S=!1,E=2,C;return r.replace(tagregex,function(T){var B=parsexmltag(T);switch(strip_ns(B[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":x.Types.push({name:B.name});break;case"</metadataType>":break;case"<futureMetadata":for(var A=0;A<x.Types.length;++A)x.Types[A].name==B.name&&(C=x.Types[A]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":E==1?x.Cell.push({type:x.Types[B.t-1].name,index:+B.v}):E==0&&x.Value.push({type:x.Types[B.t-1].name,index:+B.v});break;case"</rc>":break;case"<cellMetadata":E=1;break;case"</cellMetadata>":E=2;break;case"<valueMetadata":E=0;break;case"</valueMetadata>":E=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":S=!0;break;case"</ext>":S=!1;break;case"<rvb":if(!C)break;C.offsets||(C.offsets=[]),C.offsets.push(+B.i);break;default:if(!S&&_?.WTF)throw new Error("unrecognized "+B[0]+" in metadata")}return T}),x}function write_xlmeta_xml(){var r=[XML_HEADER];return r.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),r.join("")}function parse_cc_xml(r){var n=[];if(!r)return n;var _=1;return(r.match(tagregex)||[]).forEach(function(x){var S=parsexmltag(x);switch(S[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete S[0],S.i?_=S.i:S.i=_,n.push(S);break}}),n}function parse_BrtCalcChainItem$(r){var n={};n.i=r.read_shift(4);var _={};_.r=r.read_shift(4),_.c=r.read_shift(4),n.r=encode_cell(_);var x=r.read_shift(1);return x&2&&(n.l="1"),x&8&&(n.a="1"),n}function parse_cc_bin(r,n,_){var x=[];return recordhopper(r,function(E,C,T){switch(T){case 63:x.push(E);break;default:if(!C.T)throw new Error("Unexpected record 0x"+T.toString(16))}}),x}function parse_xlink_xml(){}function parse_xlink_bin(r,n,_,x){if(!r)return r;var S=x||{},E=!1;recordhopper(r,function(T,B,A){switch(A){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:E=!0;break;case 36:E=!1;break;default:if(!B.T){if(!E||S.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}},S)}function parse_drawing(r,n){if(!r)return"??";var _=(r.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return n["!id"][_].Target}function write_vml(r,n){var _=[21600,21600],x=["m0,0l0",_[1],_[0],_[1],_[0],"0xe"].join(","),S=[writextag("xml",null,{"xmlns:v":XLMLNS.v,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:mv":XLMLNS.mv}).replace(/\/>/,">"),writextag("o:shapelayout",writextag("o:idmap",null,{"v:ext":"edit",data:r}),{"v:ext":"edit"})],E=65536*r,C=n||[];return C.length>0&&S.push(writextag("v:shapetype",[writextag("v:stroke",null,{joinstyle:"miter"}),writextag("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202",coordsize:_.join(","),"o:spt":202,path:x})),C.forEach(function(T){++E,S.push(write_vml_comment(T,E))}),S.push("</xml>"),S.join("")}function write_vml_comment(r,n){var _=decode_cell(r[0]),x={color2:"#BEFF82",type:"gradient"};x.type=="gradient"&&(x.angle="-180");var S=x.type=="gradient"?writextag("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,E=writextag("v:fill",S,x),C={on:"t",obscured:"t"};return["<v:shape"+wxt_helper({id:"_x0000_s"+n,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(r[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",E,writextag("v:shadow",null,C),writextag("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",writetag("x:Anchor",[_.c+1,0,_.r+1,0,_.c+3,20,_.r+5,20].join(",")),writetag("x:AutoFill","False"),writetag("x:Row",String(_.r)),writetag("x:Column",String(_.c)),r[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"].join("")}function sheet_insert_comments(r,n,_,x){var S=r["!data"]!=null,E;n.forEach(function(C){var T=decode_cell(C.ref);if(S?(r["!data"][T.r]||(r["!data"][T.r]=[]),E=r["!data"][T.r][T.c]):E=r[C.ref],!E){E={t:"z"},S?r["!data"][T.r][T.c]=E:r[C.ref]=E;var B=safe_decode_range(r["!ref"]||"BDWGO1000001:A1");B.s.r>T.r&&(B.s.r=T.r),B.e.r<T.r&&(B.e.r=T.r),B.s.c>T.c&&(B.s.c=T.c),B.e.c<T.c&&(B.e.c=T.c);var A=encode_range(B);r["!ref"]=A}E.c||(E.c=[]);var I={a:C.author,t:C.t,r:C.r,T:_};C.h&&(I.h=C.h);for(var N=E.c.length-1;N>=0;--N){if(!_&&E.c[N].T)return;_&&!E.c[N].T&&E.c.splice(N,1)}if(_&&x){for(N=0;N<x.length;++N)if(I.a==x[N].id){I.a=x[N].name||I.a;break}}E.c.push(I)})}function parse_comments_xml(r,n){if(r.match(/<(?:\w+:)?comments *\/>/))return[];var _=[],x=[],S=r.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);S&&S[1]&&S[1].split(/<\/\w*:?author>/).forEach(function(C){if(!(C===""||C.trim()==="")){var T=C.match(/<(?:\w+:)?author[^>]*>(.*)/);T&&_.push(T[1])}});var E=r.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return E&&E[1]&&E[1].split(/<\/\w*:?comment>/).forEach(function(C){if(!(C===""||C.trim()==="")){var T=C.match(/<(?:\w+:)?comment[^>]*>/);if(T){var B=parsexmltag(T[0]),A={author:B.authorId&&_[B.authorId]||"sheetjsghost",ref:B.ref,guid:B.guid},I=decode_cell(B.ref);if(!(n.sheetRows&&n.sheetRows<=I.r)){var N=C.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),V=!!N&&!!N[1]&&parse_si(N[1])||{r:"",t:"",h:""};A.r=V.r,V.r=="<t></t>"&&(V.t=V.h=""),A.t=(V.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),n.cellHTML&&(A.h=V.h),x.push(A)}}}}),x}function write_comments_xml(r){var n=[XML_HEADER,writextag("comments",null,{xmlns:XMLNS_main[0]})],_=[];return n.push("<authors>"),r.forEach(function(x){x[1].forEach(function(S){var E=escapexml(S.a);_.indexOf(E)==-1&&(_.push(E),n.push("<author>"+E+"</author>")),S.T&&S.ID&&_.indexOf("tc="+S.ID)==-1&&(_.push("tc="+S.ID),n.push("<author>tc="+S.ID+"</author>"))})}),_.length==0&&(_.push("SheetJ5"),n.push("<author>SheetJ5</author>")),n.push("</authors>"),n.push("<commentList>"),r.forEach(function(x){var S=0,E=[],C=0;if(x[1][0]&&x[1][0].T&&x[1][0].ID&&(S=_.indexOf("tc="+x[1][0].ID)),x[1].forEach(function(A){A.a&&(S=_.indexOf(escapexml(A.a))),A.T&&++C,E.push(A.t==null?"":escapexml(A.t))}),C===0)x[1].forEach(function(A){n.push('<comment ref="'+x[0]+'" authorId="'+_.indexOf(escapexml(A.a))+'"><text>'),n.push(writetag("t",A.t==null?"":escapexml(A.t))),n.push("</text></comment>")});else{n.push('<comment ref="'+x[0]+'" authorId="'+S+'"><text>');for(var T=`Comment:
    `+E[0]+`
`,B=1;B<E.length;++B)T+=`Reply:
    `+E[B]+`
`;n.push(writetag("t",escapexml(T))),n.push("</text></comment>")}}),n.push("</commentList>"),n.length>2&&(n[n.length]="</comments>",n[1]=n[1].replace("/>",">")),n.join("")}function parse_tcmnt_xml(r,n){var _=[],x=!1,S={},E=0;return r.replace(tagregex,function(T,B){var A=parsexmltag(T);switch(strip_ns(A[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":S={author:A.personId,guid:A.id,ref:A.ref,T:1};break;case"</threadedComment>":S.t!=null&&_.push(S);break;case"<text>":case"<text":E=B+T.length;break;case"</text>":S.t=r.slice(E,B).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":x=!0;break;case"</mentions>":x=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":x=!0;break;case"</ext>":x=!1;break;default:if(!x&&n.WTF)throw new Error("unrecognized "+A[0]+" in threaded comments")}return T}),_}function write_tcmnt_xml(r,n,_){var x=[XML_HEADER,writextag("ThreadedComments",null,{xmlns:XMLNS.TCMNT}).replace(/[\/]>/,">")];return r.forEach(function(S){var E="";(S[1]||[]).forEach(function(C,T){if(!C.T){delete C.ID;return}C.a&&n.indexOf(C.a)==-1&&n.push(C.a);var B={ref:S[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+_.tcid++).slice(-12)+"}"};T==0?E=B.id:B.parentId=E,C.ID=B.id,C.a&&(B.personId="{54EE7950-7262-4200-6969-"+("000000000000"+n.indexOf(C.a)).slice(-12)+"}"),x.push(writextag("threadedComment",writetag("text",C.t||""),B))})}),x.push("</ThreadedComments>"),x.join("")}function parse_people_xml(r,n){var _=[],x=!1;return r.replace(tagregex,function(E){var C=parsexmltag(E);switch(strip_ns(C[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":_.push({name:C.displayname,id:C.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":x=!0;break;case"</ext>":x=!1;break;default:if(!x&&n.WTF)throw new Error("unrecognized "+C[0]+" in threaded comments")}return E}),_}function write_people_xml(r){var n=[XML_HEADER,writextag("personList",null,{xmlns:XMLNS.TCMNT,"xmlns:x":XMLNS_main[0]}).replace(/[\/]>/,">")];return r.forEach(function(_,x){n.push(writextag("person",null,{displayName:_,id:"{54EE7950-7262-4200-6969-"+("000000000000"+x).slice(-12)+"}",userId:_,providerId:"None"}))}),n.push("</personList>"),n.join("")}function parse_BrtBeginComment(r){var n={};n.iauthor=r.read_shift(4);var _=parse_UncheckedRfX(r);return n.rfx=_.s,n.ref=encode_cell(_.s),r.l+=16,n}function write_BrtBeginComment(r,n){return n==null&&(n=new_buf(36)),n.write_shift(4,r[1].iauthor),write_UncheckedRfX(r[0],n),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n}var parse_BrtCommentAuthor=parse_XLWideString;function write_BrtCommentAuthor(r){return write_XLWideString(r.slice(0,54))}function parse_comments_bin(r,n){var _=[],x=[],S={},E=!1;return recordhopper(r,function(T,B,A){switch(A){case 632:x.push(T);break;case 635:S=T;break;case 637:S.t=T.t,S.h=T.h,S.r=T.r;break;case 636:if(S.author=x[S.iauthor],delete S.iauthor,n.sheetRows&&S.rfx&&n.sheetRows<=S.rfx.r)break;S.t||(S.t=""),delete S.rfx,_.push(S);break;case 3072:break;case 35:E=!0;break;case 36:E=!1;break;case 37:break;case 38:break;default:if(!B.T){if(!E||n.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}}),_}function write_comments_bin(r){var n=buf_array(),_=[];return write_record(n,628),write_record(n,630),r.forEach(function(x){x[1].forEach(function(S){_.indexOf(S.a)>-1||(_.push(S.a.slice(0,54)),write_record(n,632,write_BrtCommentAuthor(S.a)))})}),write_record(n,631),write_record(n,633),r.forEach(function(x){x[1].forEach(function(S){S.iauthor=_.indexOf(S.a);var E={s:decode_cell(x[0]),e:decode_cell(x[0])};write_record(n,635,write_BrtBeginComment([E,S])),S.t&&S.t.length>0&&write_record(n,637,write_BrtCommentText(S)),write_record(n,636),delete S.iauthor})}),write_record(n,634),write_record(n,629),n.end()}var CT_VBA="application/vnd.ms-office.vbaProject";function make_vba_xls(r){var n=CFB.utils.cfb_new({root:"R"});return r.FullPaths.forEach(function(_,x){if(!(_.slice(-1)==="/"||!_.match(/_VBA_PROJECT_CUR/))){var S=_.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");CFB.utils.cfb_add(n,S,r.FileIndex[x].content)}}),CFB.write(n)}function fill_vba_xls(r,n){n.FullPaths.forEach(function(_,x){if(x!=0){var S=_.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");S.slice(-1)!=="/"&&CFB.utils.cfb_add(r,S,n.FileIndex[x].content)}})}var VBAFMTS=["xlsb","xlsm","xlam","biff8","xla"];function parse_ds_bin(){return{"!type":"dialog"}}function parse_ds_xml(){return{"!type":"dialog"}}function parse_ms_bin(){return{"!type":"macro"}}function parse_ms_xml(){return{"!type":"macro"}}var rc_to_a1=function(){var r=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,n={r:0,c:0};function _(x,S,E,C){var T=!1,B=!1;E.length==0?B=!0:E.charAt(0)=="["&&(B=!0,E=E.slice(1,-1)),C.length==0?T=!0:C.charAt(0)=="["&&(T=!0,C=C.slice(1,-1));var A=E.length>0?parseInt(E,10)|0:0,I=C.length>0?parseInt(C,10)|0:0;return T?I+=n.c:--I,B?A+=n.r:--A,S+(T?"":"$")+encode_col(I)+(B?"":"$")+encode_row(A)}return function(S,E){return n=E,S.replace(r,_)}}(),crefregex=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,a1_to_rc=function(){return function(n,_){return n.replace(crefregex,function(x,S,E,C,T,B){var A=decode_col(C)-(E?0:_.c),I=decode_row(B)-(T?0:_.r),N=T=="$"?I+1:I==0?"":"["+I+"]",V=E=="$"?A+1:A==0?"":"["+A+"]";return S+"R"+N+"C"+V})}}();function shift_formula_str(r,n){return r.replace(crefregex,function(_,x,S,E,C,T){return x+(S=="$"?S+E:encode_col(decode_col(E)+n.c))+(C=="$"?C+T:encode_row(decode_row(T)+n.r))})}function shift_formula_xlsx(r,n,_){var x=decode_range(n),S=x.s,E=decode_cell(_),C={r:E.r-S.r,c:E.c-S.c};return shift_formula_str(r,C)}function fuzzyfmla(r){return r.length!=1}function _xlfn(r){return r.replace(/_xlfn\./g,"")}function parseread1(r){r.l+=1}function parse_ColRelU(r,n){var _=r.read_shift(n==1?1:2);return[_&16383,_>>14&1,_>>15&1]}function parse_RgceArea(r,n,_){var x=2;if(_){if(_.biff>=2&&_.biff<=5)return parse_RgceArea_BIFF2(r);_.biff==12&&(x=4)}var S=r.read_shift(x),E=r.read_shift(x),C=parse_ColRelU(r,2),T=parse_ColRelU(r,2);return{s:{r:S,c:C[0],cRel:C[1],rRel:C[2]},e:{r:E,c:T[0],cRel:T[1],rRel:T[2]}}}function parse_RgceArea_BIFF2(r){var n=parse_ColRelU(r,2),_=parse_ColRelU(r,2),x=r.read_shift(1),S=r.read_shift(1);return{s:{r:n[0],c:x,cRel:n[1],rRel:n[2]},e:{r:_[0],c:S,cRel:_[1],rRel:_[2]}}}function parse_RgceAreaRel(r,n,_){if(_.biff<8)return parse_RgceArea_BIFF2(r);var x=r.read_shift(_.biff==12?4:2),S=r.read_shift(_.biff==12?4:2),E=parse_ColRelU(r,2),C=parse_ColRelU(r,2);return{s:{r:x,c:E[0],cRel:E[1],rRel:E[2]},e:{r:S,c:C[0],cRel:C[1],rRel:C[2]}}}function parse_RgceLoc(r,n,_){if(_&&_.biff>=2&&_.biff<=5)return parse_RgceLoc_BIFF2(r);var x=r.read_shift(_&&_.biff==12?4:2),S=parse_ColRelU(r,2);return{r:x,c:S[0],cRel:S[1],rRel:S[2]}}function parse_RgceLoc_BIFF2(r){var n=parse_ColRelU(r,2),_=r.read_shift(1);return{r:n[0],c:_,cRel:n[1],rRel:n[2]}}function parse_RgceElfLoc(r){var n=r.read_shift(2),_=r.read_shift(2);return{r:n,c:_&255,fQuoted:!!(_&16384),cRel:_>>15,rRel:_>>15}}function parse_RgceLocRel(r,n,_){var x=_&&_.biff?_.biff:8;if(x>=2&&x<=5)return parse_RgceLocRel_BIFF2(r);var S=r.read_shift(x>=12?4:2),E=r.read_shift(2),C=(E&16384)>>14,T=(E&32768)>>15;if(E&=16383,T==1)for(;S>524287;)S-=1048576;if(C==1)for(;E>8191;)E=E-16384;return{r:S,c:E,cRel:C,rRel:T}}function parse_RgceLocRel_BIFF2(r){var n=r.read_shift(2),_=r.read_shift(1),x=(n&32768)>>15,S=(n&16384)>>14;return n&=16383,x==1&&n>=8192&&(n=n-16384),S==1&&_>=128&&(_=_-256),{r:n,c:_,cRel:S,rRel:x}}function parse_PtgArea(r,n,_){var x=(r[r.l++]&96)>>5,S=parse_RgceArea(r,_.biff>=2&&_.biff<=5?6:8,_);return[x,S]}function parse_PtgArea3d(r,n,_){var x=(r[r.l++]&96)>>5,S=r.read_shift(2,"i"),E=8;if(_)switch(_.biff){case 5:r.l+=12,E=6;break;case 12:E=12;break}var C=parse_RgceArea(r,E,_);return[x,S,C]}function parse_PtgAreaErr(r,n,_){var x=(r[r.l++]&96)>>5;return r.l+=_&&_.biff>8?12:_.biff<8?6:8,[x]}function parse_PtgAreaErr3d(r,n,_){var x=(r[r.l++]&96)>>5,S=r.read_shift(2),E=8;if(_)switch(_.biff){case 5:r.l+=12,E=6;break;case 12:E=12;break}return r.l+=E,[x,S]}function parse_PtgAreaN(r,n,_){var x=(r[r.l++]&96)>>5,S=parse_RgceAreaRel(r,n-1,_);return[x,S]}function parse_PtgArray(r,n,_){var x=(r[r.l++]&96)>>5;return r.l+=_.biff==2?6:_.biff==12?14:7,[x]}function parse_PtgAttrBaxcel(r){var n=r[r.l+1]&1,_=1;return r.l+=4,[n,_]}function parse_PtgAttrChoose(r,n,_){r.l+=2;for(var x=r.read_shift(_&&_.biff==2?1:2),S=[],E=0;E<=x;++E)S.push(r.read_shift(_&&_.biff==2?1:2));return S}function parse_PtgAttrGoto(r,n,_){var x=r[r.l+1]&255?1:0;return r.l+=2,[x,r.read_shift(_&&_.biff==2?1:2)]}function parse_PtgAttrIf(r,n,_){var x=r[r.l+1]&255?1:0;return r.l+=2,[x,r.read_shift(_&&_.biff==2?1:2)]}function parse_PtgAttrIfError(r){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(2)]}function parse_PtgAttrSemi(r,n,_){var x=r[r.l+1]&255?1:0;return r.l+=_&&_.biff==2?3:4,[x]}function parse_PtgAttrSpaceType(r){var n=r.read_shift(1),_=r.read_shift(1);return[n,_]}function parse_PtgAttrSpace(r){return r.read_shift(2),parse_PtgAttrSpaceType(r)}function parse_PtgAttrSpaceSemi(r){return r.read_shift(2),parse_PtgAttrSpaceType(r)}function parse_PtgRef(r,n,_){var x=(r[r.l]&96)>>5;r.l+=1;var S=parse_RgceLoc(r,0,_);return[x,S]}function parse_PtgRefN(r,n,_){var x=(r[r.l]&96)>>5;r.l+=1;var S=parse_RgceLocRel(r,0,_);return[x,S]}function parse_PtgRef3d(r,n,_){var x=(r[r.l]&96)>>5;r.l+=1;var S=r.read_shift(2);_&&_.biff==5&&(r.l+=12);var E=parse_RgceLoc(r,0,_);return[x,S,E]}function parse_PtgFunc(r,n,_){var x=(r[r.l]&96)>>5;r.l+=1;var S=r.read_shift(_&&_.biff<=3?1:2);return[FtabArgc[S],Ftab[S],x]}function parse_PtgFuncVar(r,n,_){var x=r[r.l++],S=r.read_shift(1),E=_&&_.biff<=3?[x==88?-1:0,r.read_shift(1)]:parsetab(r);return[S,(E[0]===0?Ftab:Cetab)[E[1]]]}function parsetab(r){return[r[r.l+1]>>7,r.read_shift(2)&32767]}function parse_PtgAttrSum(r,n,_){r.l+=_&&_.biff==2?3:4}function parse_PtgExp(r,n,_){if(r.l++,_&&_.biff==12)return[r.read_shift(4,"i"),0];var x=r.read_shift(2),S=r.read_shift(_&&_.biff==2?1:2);return[x,S]}function parse_PtgErr(r){return r.l++,BErr[r.read_shift(1)]}function parse_PtgInt(r){return r.l++,r.read_shift(2)}function parse_PtgBool(r){return r.l++,r.read_shift(1)!==0}function parse_PtgNum(r){return r.l++,parse_Xnum(r)}function parse_PtgStr(r,n,_){return r.l++,parse_ShortXLUnicodeString(r,n-1,_)}function parse_SerAr(r,n){var _=[r.read_shift(1)];if(n==12)switch(_[0]){case 2:_[0]=4;break;case 4:_[0]=16;break;case 0:_[0]=1;break;case 1:_[0]=2;break}switch(_[0]){case 4:_[1]=parsebool(r,1)?"TRUE":"FALSE",n!=12&&(r.l+=7);break;case 37:case 16:_[1]=BErr[r[r.l]],r.l+=n==12?4:8;break;case 0:r.l+=8;break;case 1:_[1]=parse_Xnum(r);break;case 2:_[1]=parse_XLUnicodeString2(r,0,{biff:n>0&&n<8?2:n});break;default:throw new Error("Bad SerAr: "+_[0])}return _}function parse_PtgExtraMem(r,n,_){for(var x=r.read_shift(_.biff==12?4:2),S=[],E=0;E!=x;++E)S.push((_.biff==12?parse_UncheckedRfX:parse_Ref8U)(r));return S}function parse_PtgExtraArray(r,n,_){var x=0,S=0;_.biff==12?(x=r.read_shift(4),S=r.read_shift(4)):(S=1+r.read_shift(1),x=1+r.read_shift(2)),_.biff>=2&&_.biff<8&&(--x,--S==0&&(S=256));for(var E=0,C=[];E!=x&&(C[E]=[]);++E)for(var T=0;T!=S;++T)C[E][T]=parse_SerAr(r,_.biff);return C}function parse_PtgName(r,n,_){var x=r.read_shift(1)>>>5&3,S=!_||_.biff>=8?4:2,E=r.read_shift(S);switch(_.biff){case 2:r.l+=5;break;case 3:case 4:r.l+=8;break;case 5:r.l+=12;break}return[x,0,E]}function parse_PtgNameX(r,n,_){if(_.biff==5)return parse_PtgNameX_BIFF5(r);var x=r.read_shift(1)>>>5&3,S=r.read_shift(2),E=r.read_shift(4);return[x,S,E]}function parse_PtgNameX_BIFF5(r){var n=r.read_shift(1)>>>5&3,_=r.read_shift(2,"i");r.l+=8;var x=r.read_shift(2);return r.l+=12,[n,_,x]}function parse_PtgMemArea(r,n,_){var x=r.read_shift(1)>>>5&3;r.l+=_&&_.biff==2?3:4;var S=r.read_shift(_&&_.biff==2?1:2);return[x,S]}function parse_PtgMemFunc(r,n,_){var x=r.read_shift(1)>>>5&3,S=r.read_shift(_&&_.biff==2?1:2);return[x,S]}function parse_PtgRefErr(r,n,_){var x=r.read_shift(1)>>>5&3;return r.l+=4,_.biff<8&&r.l--,_.biff==12&&(r.l+=2),[x]}function parse_PtgRefErr3d(r,n,_){var x=(r[r.l++]&96)>>5,S=r.read_shift(2),E=4;if(_)switch(_.biff){case 5:E=15;break;case 12:E=6;break}return r.l+=E,[x,S]}var parse_PtgMemErr=parsenoop,parse_PtgMemNoMem=parsenoop,parse_PtgTbl=parsenoop;function parse_PtgElfLoc(r,n,_){return r.l+=2,[parse_RgceElfLoc(r)]}function parse_PtgElfNoop(r){return r.l+=6,[]}var parse_PtgElfCol=parse_PtgElfLoc,parse_PtgElfColS=parse_PtgElfNoop,parse_PtgElfColSV=parse_PtgElfNoop,parse_PtgElfColV=parse_PtgElfLoc;function parse_PtgElfLel(r){return r.l+=2,[parseuint16(r),r.read_shift(2)&1]}var parse_PtgElfRadical=parse_PtgElfLoc,parse_PtgElfRadicalLel=parse_PtgElfLel,parse_PtgElfRadicalS=parse_PtgElfNoop,parse_PtgElfRw=parse_PtgElfLoc,parse_PtgElfRwV=parse_PtgElfLoc,PtgListRT=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function parse_PtgList(r){r.l+=2;var n=r.read_shift(2),_=r.read_shift(2),x=r.read_shift(4),S=r.read_shift(2),E=r.read_shift(2),C=PtgListRT[_>>2&31];return{ixti:n,coltype:_&3,rt:C,idx:x,c:S,C:E}}function parse_PtgSxName(r){return r.l+=2,[r.read_shift(4)]}function parse_PtgSheet(r,n,_){return r.l+=5,r.l+=2,r.l+=_.biff==2?1:4,["PTGSHEET"]}function parse_PtgEndSheet(r,n,_){return r.l+=_.biff==2?4:5,["PTGENDSHEET"]}function parse_PtgMemAreaN(r){var n=r.read_shift(1)>>>5&3,_=r.read_shift(2);return[n,_]}function parse_PtgMemNoMemN(r){var n=r.read_shift(1)>>>5&3,_=r.read_shift(2);return[n,_]}function parse_PtgAttrNoop(r){return r.l+=4,[0,0]}var PtgTypes={1:{n:"PtgExp",f:parse_PtgExp},2:{n:"PtgTbl",f:parse_PtgTbl},3:{n:"PtgAdd",f:parseread1},4:{n:"PtgSub",f:parseread1},5:{n:"PtgMul",f:parseread1},6:{n:"PtgDiv",f:parseread1},7:{n:"PtgPower",f:parseread1},8:{n:"PtgConcat",f:parseread1},9:{n:"PtgLt",f:parseread1},10:{n:"PtgLe",f:parseread1},11:{n:"PtgEq",f:parseread1},12:{n:"PtgGe",f:parseread1},13:{n:"PtgGt",f:parseread1},14:{n:"PtgNe",f:parseread1},15:{n:"PtgIsect",f:parseread1},16:{n:"PtgUnion",f:parseread1},17:{n:"PtgRange",f:parseread1},18:{n:"PtgUplus",f:parseread1},19:{n:"PtgUminus",f:parseread1},20:{n:"PtgPercent",f:parseread1},21:{n:"PtgParen",f:parseread1},22:{n:"PtgMissArg",f:parseread1},23:{n:"PtgStr",f:parse_PtgStr},26:{n:"PtgSheet",f:parse_PtgSheet},27:{n:"PtgEndSheet",f:parse_PtgEndSheet},28:{n:"PtgErr",f:parse_PtgErr},29:{n:"PtgBool",f:parse_PtgBool},30:{n:"PtgInt",f:parse_PtgInt},31:{n:"PtgNum",f:parse_PtgNum},32:{n:"PtgArray",f:parse_PtgArray},33:{n:"PtgFunc",f:parse_PtgFunc},34:{n:"PtgFuncVar",f:parse_PtgFuncVar},35:{n:"PtgName",f:parse_PtgName},36:{n:"PtgRef",f:parse_PtgRef},37:{n:"PtgArea",f:parse_PtgArea},38:{n:"PtgMemArea",f:parse_PtgMemArea},39:{n:"PtgMemErr",f:parse_PtgMemErr},40:{n:"PtgMemNoMem",f:parse_PtgMemNoMem},41:{n:"PtgMemFunc",f:parse_PtgMemFunc},42:{n:"PtgRefErr",f:parse_PtgRefErr},43:{n:"PtgAreaErr",f:parse_PtgAreaErr},44:{n:"PtgRefN",f:parse_PtgRefN},45:{n:"PtgAreaN",f:parse_PtgAreaN},46:{n:"PtgMemAreaN",f:parse_PtgMemAreaN},47:{n:"PtgMemNoMemN",f:parse_PtgMemNoMemN},57:{n:"PtgNameX",f:parse_PtgNameX},58:{n:"PtgRef3d",f:parse_PtgRef3d},59:{n:"PtgArea3d",f:parse_PtgArea3d},60:{n:"PtgRefErr3d",f:parse_PtgRefErr3d},61:{n:"PtgAreaErr3d",f:parse_PtgAreaErr3d},255:{}},PtgDupes={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ptg18={1:{n:"PtgElfLel",f:parse_PtgElfLel},2:{n:"PtgElfRw",f:parse_PtgElfRw},3:{n:"PtgElfCol",f:parse_PtgElfCol},6:{n:"PtgElfRwV",f:parse_PtgElfRwV},7:{n:"PtgElfColV",f:parse_PtgElfColV},10:{n:"PtgElfRadical",f:parse_PtgElfRadical},11:{n:"PtgElfRadicalS",f:parse_PtgElfRadicalS},13:{n:"PtgElfColS",f:parse_PtgElfColS},15:{n:"PtgElfColSV",f:parse_PtgElfColSV},16:{n:"PtgElfRadicalLel",f:parse_PtgElfRadicalLel},25:{n:"PtgList",f:parse_PtgList},29:{n:"PtgSxName",f:parse_PtgSxName},255:{}},Ptg19={0:{n:"PtgAttrNoop",f:parse_PtgAttrNoop},1:{n:"PtgAttrSemi",f:parse_PtgAttrSemi},2:{n:"PtgAttrIf",f:parse_PtgAttrIf},4:{n:"PtgAttrChoose",f:parse_PtgAttrChoose},8:{n:"PtgAttrGoto",f:parse_PtgAttrGoto},16:{n:"PtgAttrSum",f:parse_PtgAttrSum},32:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},33:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},64:{n:"PtgAttrSpace",f:parse_PtgAttrSpace},65:{n:"PtgAttrSpaceSemi",f:parse_PtgAttrSpaceSemi},128:{n:"PtgAttrIfError",f:parse_PtgAttrIfError},255:{}};function parse_RgbExtra(r,n,_,x){if(x.biff<8)return parsenoop(r,n);for(var S=r.l+n,E=[],C=0;C!==_.length;++C)switch(_[C][0]){case"PtgArray":_[C][1]=parse_PtgExtraArray(r,0,x),E.push(_[C][1]);break;case"PtgMemArea":_[C][2]=parse_PtgExtraMem(r,_[C][1],x),E.push(_[C][2]);break;case"PtgExp":x&&x.biff==12&&(_[C][1][1]=r.read_shift(4),E.push(_[C][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+_[C][0]}return n=S-r.l,n!==0&&E.push(parsenoop(r,n)),E}function parse_Rgce(r,n,_){for(var x=r.l+n,S,E,C=[];x!=r.l;)n=x-r.l,E=r[r.l],S=PtgTypes[E]||PtgTypes[PtgDupes[E]],(E===24||E===25)&&(S=(E===24?Ptg18:Ptg19)[r[r.l+1]]),!S||!S.f?parsenoop(r,n):C.push([S.n,S.f(r,n,_)]);return C}function stringify_array(r){for(var n=[],_=0;_<r.length;++_){for(var x=r[_],S=[],E=0;E<x.length;++E){var C=x[E];if(C)switch(C[0]){case 2:S.push('"'+C[1].replace(/"/g,'""')+'"');break;default:S.push(C[1])}else S.push("")}n.push(S.join(","))}return n.join(";")}var PtgBinOp={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function make_3d_range(r,n){var _=r.lastIndexOf("!"),x=n.lastIndexOf("!");return _==-1&&x==-1?r+":"+n:_>0&&x>0&&r.slice(0,_).toLowerCase()==n.slice(0,x).toLowerCase()?r+":"+n.slice(x+1):(console.error("Cannot hydrate range",r,n),r+":"+n)}function get_ixti_raw(r,n,_){if(!r)return"SH33TJSERR0";if(_.biff>8&&(!r.XTI||!r.XTI[n]))return r.SheetNames[n];if(!r.XTI)return"SH33TJSERR6";var x=r.XTI[n];if(_.biff<8)return n>1e4&&(n-=65536),n<0&&(n=-n),n==0?"":r.XTI[n-1];if(!x)return"SH33TJSERR1";var S="";if(_.biff>8)switch(r[x[0]][0]){case 357:return S=x[1]==-1?"#REF":r.SheetNames[x[1]],x[1]==x[2]?S:S+":"+r.SheetNames[x[2]];case 358:return _.SID!=null?r.SheetNames[_.SID]:"SH33TJSSAME"+r[x[0]][0];case 355:default:return"SH33TJSSRC"+r[x[0]][0]}switch(r[x[0]][0][0]){case 1025:return S=x[1]==-1?"#REF":r.SheetNames[x[1]]||"SH33TJSERR3",x[1]==x[2]?S:S+":"+r.SheetNames[x[2]];case 14849:return r[x[0]].slice(1).map(function(E){return E.Name}).join(";;");default:return r[x[0]][0][3]?(S=x[1]==-1?"#REF":r[x[0]][0][3][x[1]]||"SH33TJSERR4",x[1]==x[2]?S:S+":"+r[x[0]][0][3][x[2]]):"SH33TJSERR2"}}function get_ixti(r,n,_){var x=get_ixti_raw(r,n,_);return x=="#REF"?x:formula_quote_sheet_name(x,_)}function stringify_formula(r,n,_,x,S){var E=S&&S.biff||8,C={s:{c:0,r:0},e:{c:0,r:0}},T=[],B,A,I,N=0,V=0,D,O="";if(!r[0]||!r[0][0])return"";for(var F=-1,M="",L=0,j=r[0].length;L<j;++L){var q=r[0][L];switch(q[0]){case"PtgUminus":T.push("-"+T.pop());break;case"PtgUplus":T.push("+"+T.pop());break;case"PtgPercent":T.push(T.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(B=T.pop(),A=T.pop(),F>=0){switch(r[0][F][1][0]){case 0:M=fill(" ",r[0][F][1][1]);break;case 1:M=fill("\r",r[0][F][1][1]);break;default:if(M="",S.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][F][1][0])}A=A+M,F=-1}T.push(A+PtgBinOp[q[0]]+B);break;case"PtgIsect":B=T.pop(),A=T.pop(),T.push(A+" "+B);break;case"PtgUnion":B=T.pop(),A=T.pop(),T.push(A+","+B);break;case"PtgRange":B=T.pop(),A=T.pop(),T.push(make_3d_range(A,B));break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":I=shift_cell_xls(q[1][1],C,S),T.push(encode_cell_xls(I,E));break;case"PtgRefN":I=_?shift_cell_xls(q[1][1],_,S):q[1][1],T.push(encode_cell_xls(I,E));break;case"PtgRef3d":N=q[1][1],I=shift_cell_xls(q[1][2],C,S),O=get_ixti(x,N,S),T.push(O+"!"+encode_cell_xls(I,E));break;case"PtgFunc":case"PtgFuncVar":var H=q[1][0],X=q[1][1];H||(H=0),H&=127;var J=H==0?[]:T.slice(-H);T.length-=H,X==="User"&&(X=J.shift()),T.push(X+"("+J.join(",")+")");break;case"PtgBool":T.push(q[1]?"TRUE":"FALSE");break;case"PtgInt":T.push(q[1]);break;case"PtgNum":T.push(String(q[1]));break;case"PtgStr":T.push('"'+q[1].replace(/"/g,'""')+'"');break;case"PtgErr":T.push(q[1]);break;case"PtgAreaN":D=shift_range_xls(q[1][1],_?{s:_}:C,S),T.push(encode_range_xls(D,S));break;case"PtgArea":D=shift_range_xls(q[1][1],C,S),T.push(encode_range_xls(D,S));break;case"PtgArea3d":N=q[1][1],D=q[1][2],O=get_ixti(x,N,S),T.push(O+"!"+encode_range_xls(D,S));break;case"PtgAttrSum":T.push("SUM("+T.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":V=q[1][2];var Z=(x.names||[])[V-1]||(x[0]||[])[V],ae=Z?Z.Name:"SH33TJSNAME"+String(V);ae&&ae.slice(0,6)=="_xlfn."&&!S.xlfn&&(ae=ae.slice(6)),T.push(ae);break;case"PtgNameX":var ce=q[1][1];V=q[1][2];var ve;if(S.biff<=5)ce<0&&(ce=-ce),x[ce]&&(ve=x[ce][V]);else{var pe="";if(((x[ce]||[])[0]||[])[0]==14849||(((x[ce]||[])[0]||[])[0]==1025?x[ce][V]&&x[ce][V].itab>0&&(pe=x.SheetNames[x[ce][V].itab-1]+"!"):pe=x.SheetNames[V-1]+"!"),x[ce]&&x[ce][V])pe+=x[ce][V].Name;else if(x[0]&&x[0][V])pe+=x[0][V].Name;else{var G=(get_ixti_raw(x,ce,S)||"").split(";;");G[V-1]?pe=G[V-1]:pe+="SH33TJSERRX"}T.push(pe);break}ve||(ve={Name:"SH33TJSERRY"}),T.push(ve.Name);break;case"PtgParen":var Y="(",U=")";if(F>=0){switch(M="",r[0][F][1][0]){case 2:Y=fill(" ",r[0][F][1][1])+Y;break;case 3:Y=fill("\r",r[0][F][1][1])+Y;break;case 4:U=fill(" ",r[0][F][1][1])+U;break;case 5:U=fill("\r",r[0][F][1][1])+U;break;default:if(S.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][F][1][0])}F=-1}T.push(Y+T.pop()+U);break;case"PtgRefErr":T.push("#REF!");break;case"PtgRefErr3d":T.push("#REF!");break;case"PtgExp":I={c:q[1][1],r:q[1][0]};var W={c:_.c,r:_.r};if(x.sharedf[encode_cell(I)]){var ee=x.sharedf[encode_cell(I)];T.push(stringify_formula(ee,C,W,x,S))}else{var re=!1;for(B=0;B!=x.arrayf.length;++B)if(A=x.arrayf[B],!(I.c<A[0].s.c||I.c>A[0].e.c)&&!(I.r<A[0].s.r||I.r>A[0].e.r)){T.push(stringify_formula(A[1],C,W,x,S)),re=!0;break}re||T.push(q[1])}break;case"PtgArray":T.push("{"+stringify_array(q[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":F=L;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":T.push("");break;case"PtgAreaErr":T.push("#REF!");break;case"PtgAreaErr3d":T.push("#REF!");break;case"PtgList":T.push("Table"+q[1].idx+"[#"+q[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(q));default:throw new Error("Unrecognized Formula Token: "+String(q))}var oe=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(S.biff!=3&&F>=0&&oe.indexOf(r[0][L][0])==-1){q=r[0][F];var ie=!0;switch(q[1][0]){case 4:ie=!1;case 0:M=fill(" ",q[1][1]);break;case 5:ie=!1;case 1:M=fill("\r",q[1][1]);break;default:if(M="",S.WTF)throw new Error("Unexpected PtgAttrSpaceType "+q[1][0])}T.push((ie?M:"")+T.pop()+(ie?"":M)),F=-1}}if(T.length>1&&S.WTF)throw new Error("bad formula stack");return T[0]=="TRUE"?!0:T[0]=="FALSE"?!1:T[0]}function parse_ArrayParsedFormula(r,n,_){var x=r.l+n,S=_.biff==2?1:2,E,C=r.read_shift(S);if(C==65535)return[[],parsenoop(r,n-2)];var T=parse_Rgce(r,C,_);return n!==C+S&&(E=parse_RgbExtra(r,n-C-S,T,_)),r.l=x,[T,E]}function parse_XLSCellParsedFormula(r,n,_){var x=r.l+n,S=_.biff==2?1:2,E,C=r.read_shift(S);if(C==65535)return[[],parsenoop(r,n-2)];var T=parse_Rgce(r,C,_);return n!==C+S&&(E=parse_RgbExtra(r,n-C-S,T,_)),r.l=x,[T,E]}function parse_NameParsedFormula(r,n,_,x){var S=r.l+n,E=parse_Rgce(r,x,_),C;return S!==r.l&&(C=parse_RgbExtra(r,S-r.l,E,_)),[E,C]}function parse_SharedParsedFormula(r,n,_){var x=r.l+n,S,E=r.read_shift(2),C=parse_Rgce(r,E,_);return E==65535?[[],parsenoop(r,n-2)]:(n!==E+2&&(S=parse_RgbExtra(r,x-E-2,C,_)),[C,S])}function parse_FormulaValue(r){var n;if(__readUInt16LE(r,r.l+6)!==65535)return[parse_Xnum(r),"n"];switch(r[r.l]){case 0:return r.l+=8,["String","s"];case 1:return n=r[r.l+2]===1,r.l+=8,[n,"b"];case 2:return n=r[r.l+2],r.l+=8,[n,"e"];case 3:return r.l+=8,["","s"]}return[]}function write_FormulaValue(r){if(r==null){var n=new_buf(8);return n.write_shift(1,3),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,65535),n}else if(typeof r=="number")return write_Xnum(r);return write_Xnum(0)}function parse_Formula(r,n,_){var x=r.l+n,S=parse_XLSCell(r);_.biff==2&&++r.l;var E=parse_FormulaValue(r),C=r.read_shift(1);_.biff!=2&&(r.read_shift(1),_.biff>=5&&r.read_shift(4));var T=parse_XLSCellParsedFormula(r,x-r.l,_);return{cell:S,val:E[0],formula:T,shared:C>>3&1,tt:E[1]}}function write_Formula(r,n,_,x,S){var E=write_XLSCell(n,_,S),C=write_FormulaValue(r.v),T=new_buf(6),B=33;T.write_shift(2,B),T.write_shift(4,0);for(var A=new_buf(r.bf.length),I=0;I<r.bf.length;++I)A[I]=r.bf[I];var N=bconcat([E,C,T,A]);return N}function parse_XLSBParsedFormula(r,n,_){var x=r.read_shift(4),S=parse_Rgce(r,x,_),E=r.read_shift(4),C=E>0?parse_RgbExtra(r,E,S,_):null;return[S,C]}var parse_XLSBArrayParsedFormula=parse_XLSBParsedFormula,parse_XLSBCellParsedFormula=parse_XLSBParsedFormula,parse_XLSBNameParsedFormula=parse_XLSBParsedFormula,parse_XLSBSharedParsedFormula=parse_XLSBParsedFormula;function write_XLSBFormulaNum(r){if((r|0)==r&&r<Math.pow(2,16)&&r>=0){var n=new_buf(11);return n.write_shift(4,3),n.write_shift(1,30),n.write_shift(2,r),n.write_shift(4,0),n}var _=new_buf(17);return _.write_shift(4,11),_.write_shift(1,31),_.write_shift(8,r),_.write_shift(4,0),_}function write_XLSBFormulaErr(r){var n=new_buf(10);return n.write_shift(4,2),n.write_shift(1,28),n.write_shift(1,r),n.write_shift(4,0),n}function write_XLSBFormulaBool(r){var n=new_buf(10);return n.write_shift(4,2),n.write_shift(1,29),n.write_shift(1,r?1:0),n.write_shift(4,0),n}function write_XLSBFormulaStr(r){var n=new_buf(7);n.write_shift(4,3+2*r.length),n.write_shift(1,23),n.write_shift(2,r.length);var _=new_buf(2*r.length);_.write_shift(2*r.length,r,"utf16le");var x=new_buf(4);return x.write_shift(4,0),bconcat([n,_,x])}function write_XLSBFormulaRef(r){var n=decode_cell(r),_=new_buf(15);return _.write_shift(4,7),_.write_shift(1,36),_.write_shift(4,n.r),_.write_shift(2,n.c|(r.charAt(0)=="$"?0:1)<<14|(r.match(/\$\d/)?0:1)<<15),_.write_shift(4,0),_}function write_XLSBFormulaRef3D(r,n){var _=r.lastIndexOf("!"),x=r.slice(0,_);r=r.slice(_+1);var S=decode_cell(r);x.charAt(0)=="'"&&(x=x.slice(1,-1).replace(/''/g,"'"));var E=new_buf(17);return E.write_shift(4,9),E.write_shift(1,58),E.write_shift(2,2+n.SheetNames.map(function(C){return C.toLowerCase()}).indexOf(x.toLowerCase())),E.write_shift(4,S.r),E.write_shift(2,S.c|(r.charAt(0)=="$"?0:1)<<14|(r.match(/\$\d/)?0:1)<<15),E.write_shift(4,0),E}function write_XLSBFormulaRefErr3D(r,n){var _=r.lastIndexOf("!"),x=r.slice(0,_);r=r.slice(_+1),x.charAt(0)=="'"&&(x=x.slice(1,-1).replace(/''/g,"'"));var S=new_buf(17);return S.write_shift(4,9),S.write_shift(1,60),S.write_shift(2,2+n.SheetNames.map(function(E){return E.toLowerCase()}).indexOf(x.toLowerCase())),S.write_shift(4,0),S.write_shift(2,0),S.write_shift(4,0),S}function write_XLSBFormulaRange(r){var n=r.split(":"),_=n[0],x=new_buf(23);x.write_shift(4,15),_=n[0];var S=decode_cell(_);return x.write_shift(1,36),x.write_shift(4,S.r),x.write_shift(2,S.c|(_.charAt(0)=="$"?0:1)<<14|(_.match(/\$\d/)?0:1)<<15),x.write_shift(4,0),_=n[1],S=decode_cell(_),x.write_shift(1,36),x.write_shift(4,S.r),x.write_shift(2,S.c|(_.charAt(0)=="$"?0:1)<<14|(_.match(/\$\d/)?0:1)<<15),x.write_shift(4,0),x.write_shift(1,17),x.write_shift(4,0),x}function write_XLSBFormulaRangeWS(r,n){var _=r.lastIndexOf("!"),x=r.slice(0,_);r=r.slice(_+1),x.charAt(0)=="'"&&(x=x.slice(1,-1).replace(/''/g,"'"));var S=r.split(":");C=S[0];var E=new_buf(27);E.write_shift(4,19);var C=S[0],T=decode_cell(C);return E.write_shift(1,58),E.write_shift(2,2+n.SheetNames.map(function(B){return B.toLowerCase()}).indexOf(x.toLowerCase())),E.write_shift(4,T.r),E.write_shift(2,T.c|(C.charAt(0)=="$"?0:1)<<14|(C.match(/\$\d/)?0:1)<<15),C=S[1],T=decode_cell(C),E.write_shift(1,58),E.write_shift(2,2+n.SheetNames.map(function(B){return B.toLowerCase()}).indexOf(x.toLowerCase())),E.write_shift(4,T.r),E.write_shift(2,T.c|(C.charAt(0)=="$"?0:1)<<14|(C.match(/\$\d/)?0:1)<<15),E.write_shift(1,17),E.write_shift(4,0),E}function write_XLSBFormulaArea3D(r,n){var _=r.lastIndexOf("!"),x=r.slice(0,_);r=r.slice(_+1),x.charAt(0)=="'"&&(x=x.slice(1,-1).replace(/''/g,"'"));var S=decode_range(r),E=new_buf(23);return E.write_shift(4,15),E.write_shift(1,59),E.write_shift(2,2+n.SheetNames.map(function(C){return C.toLowerCase()}).indexOf(x.toLowerCase())),E.write_shift(4,S.s.r),E.write_shift(4,S.e.r),E.write_shift(2,S.s.c),E.write_shift(2,S.e.c),E.write_shift(4,0),E}function write_XLSBFormula(r,n){if(typeof r=="number")return write_XLSBFormulaNum(r);if(typeof r=="boolean")return write_XLSBFormulaBool(r);if(/^#(DIV\/0!|GETTING_DATA|N\/A|NAME\?|NULL!|NUM!|REF!|VALUE!)$/.test(r))return write_XLSBFormulaErr(+RBErr[r]);if(r.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRef(r);if(r.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRange(r);if(r.match(/^#REF!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaArea3D(r,n);if(r.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRef3D(r,n);if(r.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRangeWS(r,n);if(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!#REF!$/.test(r))return write_XLSBFormulaRefErr3D(r,n);if(/^".*"$/.test(r))return write_XLSBFormulaStr(r);if(/^[+-]\d+$/.test(r))return write_XLSBFormulaNum(parseInt(r,10));throw"Formula |"+r+"| not supported for XLSB"}var write_XLSBNameParsedFormula=write_XLSBFormula,Cetab={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Ftab={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},FtabArgc={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function ods_to_csf_formula(r){return r.slice(0,3)=="of:"&&(r=r.slice(3)),r.charCodeAt(0)==61&&(r=r.slice(1),r.charCodeAt(0)==61&&(r=r.slice(1))),r=r.replace(/COM\.MICROSOFT\./g,""),r=r.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(n,_){return _.replace(/\./g,"")}),r=r.replace(/\$'([^']|'')+'/g,function(n){return n.slice(1)}),r=r.replace(/\$([^\]\. #$]+)/g,function(n,_){return _.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?n:_}),r=r.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),r.replace(/[;~]/g,",").replace(/\|/g,";")}function csf_to_ods_formula(r){var n="of:="+r.replace(crefregex,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return n.replace(/;/g,"|").replace(/,/g,";")}function ods_to_csf_3D(r){r=r.replace(/\$'([^']|'')+'/g,function(x){return x.slice(1)}),r=r.replace(/\$([^\]\. #$]+)/g,function(x,S){return S.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?x:S});var n=r.split(":"),_=n[0].split(".")[0];return[_,n[0].split(".")[1]+(n.length>1?":"+(n[1].split(".")[1]||n[1].split(".")[0]):"")]}function csf_to_ods_3D(r){return r.replace(/!/,".")}var strs={},_ssfopts={},browser_has_Map=typeof Map<"u";function get_sst_id(r,n,_){var x=0,S=r.length;if(_){if(browser_has_Map?_.has(n):Object.prototype.hasOwnProperty.call(_,n)){for(var E=browser_has_Map?_.get(n):_[n];x<E.length;++x)if(r[E[x]].t===n)return r.Count++,E[x]}}else for(;x<S;++x)if(r[x].t===n)return r.Count++,x;return r[S]={t:n},r.Count++,r.Unique++,_&&(browser_has_Map?(_.has(n)||_.set(n,[]),_.get(n).push(S)):(Object.prototype.hasOwnProperty.call(_,n)||(_[n]=[]),_[n].push(S))),S}function col_obj_w(r,n){var _={min:r+1,max:r+1},x=-1;return n.MDW&&(MDW=n.MDW),n.width!=null?_.customWidth=1:n.wpx!=null?x=px2char(n.wpx):n.wch!=null&&(x=n.wch),x>-1?(_.width=char2width(x),_.customWidth=1):n.width!=null&&(_.width=n.width),n.hidden&&(_.hidden=!0),n.level!=null&&(_.outlineLevel=_.level=n.level),_}function default_margins(r,n){if(r){var _=[.7,.7,.75,.75,.3,.3];n=="xlml"&&(_=[1,1,1,1,.5,.5]),r.left==null&&(r.left=_[0]),r.right==null&&(r.right=_[1]),r.top==null&&(r.top=_[2]),r.bottom==null&&(r.bottom=_[3]),r.header==null&&(r.header=_[4]),r.footer==null&&(r.footer=_[5])}}function get_cell_style(r,n,_){var x=_.revssf[n.z!=null?n.z:"General"],S=60,E=r.length;if(x==null&&_.ssf){for(;S<392;++S)if(_.ssf[S]==null){SSF__load(n.z,S),_.ssf[S]=n.z,_.revssf[n.z]=x=S;break}}for(S=0;S!=E;++S)if(r[S].numFmtId===x)return S;return r[E]={numFmtId:x,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},E}function safe_format(r,n,_,x,S,E){try{x.cellNF&&(r.z=table_fmt[n])}catch(T){if(x.WTF)throw T}if(!(r.t==="z"&&!x.cellStyles)){if(r.t==="d"&&typeof r.v=="string"&&(r.v=parseDate(r.v)),(!x||x.cellText!==!1)&&r.t!=="z")try{if(table_fmt[n]==null&&SSF__load(SSFImplicit[n]||"General",n),r.t==="e")r.w=r.w||BErr[r.v];else if(n===0)if(r.t==="n")(r.v|0)===r.v?r.w=r.v.toString(10):r.w=SSF_general_num(r.v);else if(r.t==="d"){var C=datenum(r.v);(C|0)===C?r.w=C.toString(10):r.w=SSF_general_num(C)}else{if(r.v===void 0)return"";r.w=SSF_general(r.v,_ssfopts)}else r.t==="d"?r.w=SSF_format(n,datenum(r.v),_ssfopts):r.w=SSF_format(n,r.v,_ssfopts)}catch(T){if(x.WTF)throw T}if(x.cellStyles&&_!=null)try{r.s=E.Fills[_],r.s.fgColor&&r.s.fgColor.theme&&!r.s.fgColor.rgb&&(r.s.fgColor.rgb=rgb_tint(S.themeElements.clrScheme[r.s.fgColor.theme].rgb,r.s.fgColor.tint||0),x.WTF&&(r.s.fgColor.raw_rgb=S.themeElements.clrScheme[r.s.fgColor.theme].rgb)),r.s.bgColor&&r.s.bgColor.theme&&(r.s.bgColor.rgb=rgb_tint(S.themeElements.clrScheme[r.s.bgColor.theme].rgb,r.s.bgColor.tint||0),x.WTF&&(r.s.bgColor.raw_rgb=S.themeElements.clrScheme[r.s.bgColor.theme].rgb))}catch(T){if(x.WTF&&E.Fills)throw T}}}function check_ws(r,n,_){if(r&&r["!ref"]){var x=safe_decode_range(r["!ref"]);if(x.e.c<x.s.c||x.e.r<x.s.r)throw new Error("Bad range ("+_+"): "+r["!ref"])}}function parse_ws_xml_dim(r,n){var _=safe_decode_range(n);_.s.r<=_.e.r&&_.s.c<=_.e.c&&_.s.r>=0&&_.s.c>=0&&(r["!ref"]=encode_range(_))}var mergecregex=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,sheetdataregex=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,hlinkregex=/<(?:\w:)?hyperlink [^>]*>/mg,dimregex=/"(\w*:\w*)"/,colregex=/<(?:\w:)?col\b[^>]*[\/]?>/g,afregex=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,marginregex=/<(?:\w:)?pageMargins[^>]*\/>/g,sheetprregex=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,sheetprregex2=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,svsregex=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function parse_ws_xml(r,n,_,x,S,E,C){if(!r)return r;x||(x={"!id":{}});var T={};n.dense&&(T["!data"]=[]);var B={s:{r:2e6,c:2e6},e:{r:0,c:0}},A="",I="",N=r.match(sheetdataregex);N?(A=r.slice(0,N.index),I=r.slice(N.index+N[0].length)):A=I=r;var V=A.match(sheetprregex);V?parse_ws_xml_sheetpr(V[0],T,S,_):(V=A.match(sheetprregex2))&&parse_ws_xml_sheetpr2(V[0],V[1]||"",T,S,_);var D=(A.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(D>0){var O=A.slice(D,D+50).match(dimregex);O&&!(n&&n.nodim)&&parse_ws_xml_dim(T,O[1])}var F=A.match(svsregex);F&&F[1]&&parse_ws_xml_sheetviews(F[1],S);var M=[];if(n.cellStyles){var L=A.match(colregex);L&&parse_ws_xml_cols(M,L)}N&&parse_ws_xml_data(N[1],T,n,B,E,C);var j=I.match(afregex);j&&(T["!autofilter"]=parse_ws_xml_autofilter(j[0]));var q=[],H=I.match(mergecregex);if(H)for(D=0;D!=H.length;++D)q[D]=safe_decode_range(H[D].slice(H[D].indexOf('"')+1));var X=I.match(hlinkregex);X&&parse_ws_xml_hlinks(T,X,x);var J=I.match(marginregex);if(J&&(T["!margins"]=parse_ws_xml_margins(parsexmltag(J[0]))),n&&n.nodim&&(B.s.c=B.s.r=0),!T["!ref"]&&B.e.c>=B.s.c&&B.e.r>=B.s.r&&(T["!ref"]=encode_range(B)),n.sheetRows>0&&T["!ref"]){var Z=safe_decode_range(T["!ref"]);n.sheetRows<=+Z.e.r&&(Z.e.r=n.sheetRows-1,Z.e.r>B.e.r&&(Z.e.r=B.e.r),Z.e.r<Z.s.r&&(Z.s.r=Z.e.r),Z.e.c>B.e.c&&(Z.e.c=B.e.c),Z.e.c<Z.s.c&&(Z.s.c=Z.e.c),T["!fullref"]=T["!ref"],T["!ref"]=encode_range(Z))}return M.length>0&&(T["!cols"]=M),q.length>0&&(T["!merges"]=q),T}function write_ws_xml_merges(r){if(r.length===0)return"";for(var n='<mergeCells count="'+r.length+'">',_=0;_!=r.length;++_)n+='<mergeCell ref="'+encode_range(r[_])+'"/>';return n+"</mergeCells>"}function parse_ws_xml_sheetpr(r,n,_,x){var S=parsexmltag(r);_.Sheets[x]||(_.Sheets[x]={}),S.codeName&&(_.Sheets[x].CodeName=unescapexml(utf8read(S.codeName)))}function parse_ws_xml_sheetpr2(r,n,_,x,S){parse_ws_xml_sheetpr(r.slice(0,r.indexOf(">")),_,x,S)}function write_ws_xml_sheetpr(r,n,_,x,S){var E=!1,C={},T=null;if(x.bookType!=="xlsx"&&n.vbaraw){var B=n.SheetNames[_];try{n.Workbook&&(B=n.Workbook.Sheets[_].CodeName||B)}catch{}E=!0,C.codeName=utf8write(escapexml(B))}if(r&&r["!outline"]){var A={summaryBelow:1,summaryRight:1};r["!outline"].above&&(A.summaryBelow=0),r["!outline"].left&&(A.summaryRight=0),T=(T||"")+writextag("outlinePr",null,A)}!E&&!T||(S[S.length]=writextag("sheetPr",T,C))}var sheetprot_deffalse=["objects","scenarios","selectLockedCells","selectUnlockedCells"],sheetprot_deftrue=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function write_ws_xml_protection(r){var n={sheet:1};return sheetprot_deffalse.forEach(function(_){r[_]!=null&&r[_]&&(n[_]="1")}),sheetprot_deftrue.forEach(function(_){r[_]!=null&&!r[_]&&(n[_]="0")}),r.password&&(n.password=crypto_CreatePasswordVerifier_Method1(r.password).toString(16).toUpperCase()),writextag("sheetProtection",null,n)}function parse_ws_xml_hlinks(r,n,_){for(var x=r["!data"]!=null,S=0;S!=n.length;++S){var E=parsexmltag(utf8read(n[S]),!0);if(!E.ref)return;var C=((_||{})["!id"]||[])[E.id];C?(E.Target=C.Target,E.location&&(E.Target+="#"+unescapexml(E.location))):(E.Target="#"+unescapexml(E.location),C={Target:E.Target,TargetMode:"Internal"}),E.Rel=C,E.tooltip&&(E.Tooltip=E.tooltip,delete E.tooltip);for(var T=safe_decode_range(E.ref),B=T.s.r;B<=T.e.r;++B)for(var A=T.s.c;A<=T.e.c;++A){var I=encode_col(A)+encode_row(B);x?(r["!data"][B]||(r["!data"][B]=[]),r["!data"][B][A]||(r["!data"][B][A]={t:"z",v:void 0}),r["!data"][B][A].l=E):(r[I]||(r[I]={t:"z",v:void 0}),r[I].l=E)}}}function parse_ws_xml_margins(r){var n={};return["left","right","top","bottom","header","footer"].forEach(function(_){r[_]&&(n[_]=parseFloat(r[_]))}),n}function write_ws_xml_margins(r){return default_margins(r),writextag("pageMargins",null,r)}function parse_ws_xml_cols(r,n){for(var _=!1,x=0;x!=n.length;++x){var S=parsexmltag(n[x],!0);S.hidden&&(S.hidden=parsexmlbool(S.hidden));var E=parseInt(S.min,10)-1,C=parseInt(S.max,10)-1;for(S.outlineLevel&&(S.level=+S.outlineLevel||0),delete S.min,delete S.max,S.width=+S.width,!_&&S.width&&(_=!0,find_mdw_colw(S.width)),process_col(S);E<=C;)r[E++]=dup(S)}}function write_ws_xml_cols(r,n){for(var _=["<cols>"],x,S=0;S!=n.length;++S)(x=n[S])&&(_[_.length]=writextag("col",null,col_obj_w(S,x)));return _[_.length]="</cols>",_.join("")}function parse_ws_xml_autofilter(r){var n={ref:(r.match(/ref="([^"]*)"/)||[])[1]};return n}function write_ws_xml_autofilter(r,n,_,x){var S=typeof r.ref=="string"?r.ref:encode_range(r.ref);_.Workbook||(_.Workbook={Sheets:[]}),_.Workbook.Names||(_.Workbook.Names=[]);var E=_.Workbook.Names,C=decode_range(S);C.s.r==C.e.r&&(C.e.r=decode_range(n["!ref"]).e.r,S=encode_range(C));for(var T=0;T<E.length;++T){var B=E[T];if(B.Name=="_xlnm._FilterDatabase"&&B.Sheet==x){B.Ref=formula_quote_sheet_name(_.SheetNames[x])+"!"+fix_range(S);break}}return T==E.length&&E.push({Name:"_xlnm._FilterDatabase",Sheet:x,Ref:"'"+_.SheetNames[x]+"'!"+S}),writextag("autoFilter",null,{ref:S})}var sviewregex=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/g;function parse_ws_xml_sheetviews(r,n){n.Views||(n.Views=[{}]),(r.match(sviewregex)||[]).forEach(function(_,x){var S=parsexmltag(_);n.Views[x]||(n.Views[x]={}),+S.zoomScale&&(n.Views[x].zoom=+S.zoomScale),S.rightToLeft&&parsexmlbool(S.rightToLeft)&&(n.Views[x].RTL=!0)})}function write_ws_xml_sheetviews(r,n,_,x){var S={workbookViewId:"0"};return(((x||{}).Workbook||{}).Views||[])[0]&&(S.rightToLeft=x.Workbook.Views[0].RTL?"1":"0"),writextag("sheetViews",writextag("sheetView",null,S),{})}function write_ws_xml_cell(r,n,_,x){if(r.c&&_["!comments"].push([n,r.c]),(r.v===void 0||r.t==="z"&&!(x||{}).sheetStubs)&&typeof r.f!="string"&&typeof r.z>"u")return"";var S="",E=r.t,C=r.v;if(r.t!=="z")switch(r.t){case"b":S=r.v?"1":"0";break;case"n":S=""+r.v;break;case"e":S=BErr[r.v];break;case"d":x&&x.cellDates?S=parseDate(r.v,-1).toISOString():(r=dup(r),r.t="n",S=""+(r.v=datenum(parseDate(r.v)))),typeof r.z>"u"&&(r.z=table_fmt[14]);break;default:S=r.v;break}var T=r.t=="z"||r.v==null?"":writetag("v",escapexml(S)),B={r:n},A=get_cell_style(x.cellXfs,r,x);switch(A!==0&&(B.s=A),r.t){case"n":break;case"d":B.t="d";break;case"b":B.t="b";break;case"e":B.t="e";break;case"z":break;default:if(r.v==null){delete r.t;break}if(r.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(x&&x.bookSST){T=writetag("v",""+get_sst_id(x.Strings,r.v,x.revStrings)),B.t="s";break}else B.t="str";break}if(r.t!=E&&(r.t=E,r.v=C),typeof r.f=="string"&&r.f){var I=r.F&&r.F.slice(0,n.length)==n?{t:"array",ref:r.F}:null;T=writextag("f",escapexml(r.f),I)+(r.v!=null?T:"")}return r.l&&(r.l.display=escapexml(S),_["!links"].push([n,r.l])),r.D&&(B.cm=1),writextag("c",T,B)}var parse_ws_xml_data=function(){var r=/<(?:\w+:)?c[ \/>]/,n=/<\/(?:\w+:)?row>/,_=/r=["']([^"']*)["']/,x=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,S=/ref=["']([^"']*)["']/,E=matchtag("v"),C=matchtag("f");return function(B,A,I,N,V,D){for(var O=0,F="",M=[],L=[],j=0,q=0,H=0,X="",J,Z,ae=0,ce=0,ve,pe,G=0,Y=0,U=Array.isArray(D.CellXf),W,ee=[],re=[],oe=A["!data"]!=null,ie=[],ne={},te=!1,K=!!I.sheetStubs,le=B.split(n),ue=0,be=le.length;ue!=be;++ue){F=le[ue].trim();var ge=F.length;if(ge!==0){var ye=0;e:for(O=0;O<ge;++O)switch(F[O]){case">":if(F[O-1]!="/"){++O;break e}if(I&&I.cellStyles){if(Z=parsexmltag(F.slice(ye,O),!0),ae=Z.r!=null?parseInt(Z.r,10):ae+1,ce=-1,I.sheetRows&&I.sheetRows<ae)continue;ne={},te=!1,Z.ht&&(te=!0,ne.hpt=parseFloat(Z.ht),ne.hpx=pt2px(ne.hpt)),Z.hidden&&parsexmlbool(Z.hidden)&&(te=!0,ne.hidden=!0),Z.outlineLevel!=null&&(te=!0,ne.level=+Z.outlineLevel),te&&(ie[ae-1]=ne)}break;case"<":ye=O;break}if(ye>=O)break;if(Z=parsexmltag(F.slice(ye,O),!0),ae=Z.r!=null?parseInt(Z.r,10):ae+1,ce=-1,!(I.sheetRows&&I.sheetRows<ae)){I.nodim||(N.s.r>ae-1&&(N.s.r=ae-1),N.e.r<ae-1&&(N.e.r=ae-1)),I&&I.cellStyles&&(ne={},te=!1,Z.ht&&(te=!0,ne.hpt=parseFloat(Z.ht),ne.hpx=pt2px(ne.hpt)),Z.hidden&&parsexmlbool(Z.hidden)&&(te=!0,ne.hidden=!0),Z.outlineLevel!=null&&(te=!0,ne.level=+Z.outlineLevel),te&&(ie[ae-1]=ne)),M=F.slice(O).split(r);for(var Ee=0;Ee!=M.length&&M[Ee].trim().charAt(0)=="<";++Ee);for(M=M.slice(Ee),O=0;O!=M.length;++O)if(F=M[O].trim(),F.length!==0){if(L=F.match(_),j=O,q=0,H=0,F="<c "+(F.slice(0,1)=="<"?">":"")+F,L!=null&&L.length===2){for(j=0,X=L[1],q=0;q!=X.length&&!((H=X.charCodeAt(q)-64)<1||H>26);++q)j=26*j+H;--j,ce=j}else++ce;for(q=0;q!=F.length&&F.charCodeAt(q)!==62;++q);if(++q,Z=parsexmltag(F.slice(0,q),!0),Z.r||(Z.r=encode_cell({r:ae-1,c:ce})),X=F.slice(q),J={t:""},(L=X.match(E))!=null&&L[1]!==""&&(J.v=unescapexml(L[1])),I.cellFormula){if((L=X.match(C))!=null&&L[1]!==""){if(J.f=unescapexml(utf8read(L[1]),!0),I.xlfn||(J.f=_xlfn(J.f)),L[0].indexOf('t="array"')>-1)J.F=(X.match(S)||[])[1],J.F.indexOf(":")>-1&&ee.push([safe_decode_range(J.F),J.F]);else if(L[0].indexOf('t="shared"')>-1){pe=parsexmltag(L[0]);var Re=unescapexml(utf8read(L[1]));I.xlfn||(Re=_xlfn(Re)),re[parseInt(pe.si,10)]=[pe,Re,Z.r]}}else(L=X.match(/<f[^>]*\/>/))&&(pe=parsexmltag(L[0]),re[pe.si]&&(J.f=shift_formula_xlsx(re[pe.si][1],re[pe.si][2],Z.r)));var Ne=decode_cell(Z.r);for(q=0;q<ee.length;++q)Ne.r>=ee[q][0].s.r&&Ne.r<=ee[q][0].e.r&&Ne.c>=ee[q][0].s.c&&Ne.c<=ee[q][0].e.c&&(J.F=ee[q][1])}if(Z.t==null&&J.v===void 0)if(J.f||J.F)J.v=0,J.t="n";else if(K)J.t="z";else continue;else J.t=Z.t||"n";switch(N.s.c>ce&&(N.s.c=ce),N.e.c<ce&&(N.e.c=ce),J.t){case"n":if(J.v==""||J.v==null){if(!K)continue;J.t="z"}else J.v=parseFloat(J.v);break;case"s":if(typeof J.v>"u"){if(!K)continue;J.t="z"}else ve=strs[parseInt(J.v,10)],J.v=ve.t,J.r=ve.r,I.cellHTML&&(J.h=ve.h);break;case"str":J.t="s",J.v=J.v!=null?unescapexml(utf8read(J.v),!0):"",I.cellHTML&&(J.h=escapehtml(J.v));break;case"inlineStr":L=X.match(x),J.t="s",L!=null&&(ve=parse_si(L[1]))?(J.v=ve.t,I.cellHTML&&(J.h=ve.h)):J.v="";break;case"b":J.v=parsexmlbool(J.v);break;case"d":I.cellDates?J.v=parseDate(J.v,1):(J.v=datenum(parseDate(J.v,1)),J.t="n");break;case"e":(!I||I.cellText!==!1)&&(J.w=J.v),J.v=RBErr[J.v];break}if(G=Y=0,W=null,U&&Z.s!==void 0&&(W=D.CellXf[Z.s],W!=null&&(W.numFmtId!=null&&(G=W.numFmtId),I.cellStyles&&W.fillId!=null&&(Y=W.fillId))),safe_format(J,G,Y,I,V,D),I.cellDates&&U&&J.t=="n"&&fmt_is_date(table_fmt[G])&&(J.t="d",J.v=numdate(J.v)),Z.cm&&I.xlmeta){var Te=(I.xlmeta.Cell||[])[+Z.cm-1];Te&&Te.type=="XLDAPR"&&(J.D=!0)}var he;I.nodim&&(he=decode_cell(Z.r),N.s.r>he.r&&(N.s.r=he.r),N.e.r<he.r&&(N.e.r=he.r)),oe?(he=decode_cell(Z.r),A["!data"][he.r]||(A["!data"][he.r]=[]),A["!data"][he.r][he.c]=J):A[Z.r]=J}}}}ie.length>0&&(A["!rows"]=ie)}}();function write_ws_xml_data(r,n,_,x){var S=[],E=[],C=safe_decode_range(r["!ref"]),T="",B,A="",I=[],N=0,V=0,D=r["!rows"],O=r["!data"]!=null,F={r:A},M,L=-1;for(V=C.s.c;V<=C.e.c;++V)I[V]=encode_col(V);for(N=C.s.r;N<=C.e.r;++N){for(E=[],A=encode_row(N),V=C.s.c;V<=C.e.c;++V){B=I[V]+A;var j=O?(r["!data"][N]||[])[V]:r[B];j!==void 0&&(T=write_ws_xml_cell(j,B,r,n))!=null&&E.push(T)}(E.length>0||D&&D[N])&&(F={r:A},D&&D[N]&&(M=D[N],M.hidden&&(F.hidden=1),L=-1,M.hpx?L=px2pt(M.hpx):M.hpt&&(L=M.hpt),L>-1&&(F.ht=L,F.customHeight=1),M.level&&(F.outlineLevel=M.level)),S[S.length]=writextag("row",E.join(""),F))}if(D)for(;N<D.length;++N)D&&D[N]&&(F={r:N+1},M=D[N],M.hidden&&(F.hidden=1),L=-1,M.hpx?L=px2pt(M.hpx):M.hpt&&(L=M.hpt),L>-1&&(F.ht=L,F.customHeight=1),M.level&&(F.outlineLevel=M.level),S[S.length]=writextag("row","",F));return S.join("")}function write_ws_xml(r,n,_,x){var S=[XML_HEADER,writextag("worksheet",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r})],E=_.SheetNames[r],C=0,T="",B=_.Sheets[E];B==null&&(B={});var A=B["!ref"]||"A1",I=safe_decode_range(A);if(I.e.c>16383||I.e.r>1048575){if(n.WTF)throw new Error("Range "+A+" exceeds format limit A1:XFD1048576");I.e.c=Math.min(I.e.c,16383),I.e.r=Math.min(I.e.c,1048575),A=encode_range(I)}x||(x={}),B["!comments"]=[];var N=[];write_ws_xml_sheetpr(B,_,r,n,S),S[S.length]=writextag("dimension",null,{ref:A}),S[S.length]=write_ws_xml_sheetviews(B,n,r,_),n.sheetFormat&&(S[S.length]=writextag("sheetFormatPr",null,{defaultRowHeight:n.sheetFormat.defaultRowHeight||"16",baseColWidth:n.sheetFormat.baseColWidth||"10",outlineLevelRow:n.sheetFormat.outlineLevelRow||"7"})),B["!cols"]!=null&&B["!cols"].length>0&&(S[S.length]=write_ws_xml_cols(B,B["!cols"])),S[C=S.length]="<sheetData/>",B["!links"]=[],B["!ref"]!=null&&(T=write_ws_xml_data(B,n),T.length>0&&(S[S.length]=T)),S.length>C+1&&(S[S.length]="</sheetData>",S[C]=S[C].replace("/>",">")),B["!protect"]&&(S[S.length]=write_ws_xml_protection(B["!protect"])),B["!autofilter"]!=null&&(S[S.length]=write_ws_xml_autofilter(B["!autofilter"],B,_,r)),B["!merges"]!=null&&B["!merges"].length>0&&(S[S.length]=write_ws_xml_merges(B["!merges"]));var V=-1,D,O=-1;return B["!links"].length>0&&(S[S.length]="<hyperlinks>",B["!links"].forEach(function(F){F[1].Target&&(D={ref:F[0]},F[1].Target.charAt(0)!="#"&&(O=add_rels(x,-1,escapexml(F[1].Target).replace(/#.*$/,""),RELS.HLINK),D["r:id"]="rId"+O),(V=F[1].Target.indexOf("#"))>-1&&(D.location=escapexml(F[1].Target.slice(V+1))),F[1].Tooltip&&(D.tooltip=escapexml(F[1].Tooltip)),D.display=F[1].display,S[S.length]=writextag("hyperlink",null,D))}),S[S.length]="</hyperlinks>"),delete B["!links"],B["!margins"]!=null&&(S[S.length]=write_ws_xml_margins(B["!margins"])),(!n||n.ignoreEC||n.ignoreEC==null)&&(S[S.length]=writetag("ignoredErrors",writextag("ignoredError",null,{numberStoredAsText:1,sqref:A}))),N.length>0&&(O=add_rels(x,-1,"../drawings/drawing"+(r+1)+".xml",RELS.DRAW),S[S.length]=writextag("drawing",null,{"r:id":"rId"+O}),B["!drawing"]=N),B["!comments"].length>0&&(O=add_rels(x,-1,"../drawings/vmlDrawing"+(r+1)+".vml",RELS.VML),S[S.length]=writextag("legacyDrawing",null,{"r:id":"rId"+O}),B["!legacy"]=O),S.length>1&&(S[S.length]="</worksheet>",S[1]=S[1].replace("/>",">")),S.join("")}function parse_BrtRowHdr(r,n){var _={},x=r.l+n;_.r=r.read_shift(4),r.l+=4;var S=r.read_shift(2);r.l+=1;var E=r.read_shift(1);return r.l=x,E&7&&(_.level=E&7),E&16&&(_.hidden=!0),E&32&&(_.hpt=S/20),_}function write_BrtRowHdr(r,n,_){var x=new_buf(145),S=(_["!rows"]||[])[r]||{};x.write_shift(4,r),x.write_shift(4,0);var E=320;S.hpx?E=px2pt(S.hpx)*20:S.hpt&&(E=S.hpt*20),x.write_shift(2,E),x.write_shift(1,0);var C=0;S.level&&(C|=S.level),S.hidden&&(C|=16),(S.hpx||S.hpt)&&(C|=32),x.write_shift(1,C),x.write_shift(1,0);var T=0,B=x.l;x.l+=4;for(var A={r,c:0},I=_["!data"]!=null,N=0;N<16;++N)if(!(n.s.c>N+1<<10||n.e.c<N<<10)){for(var V=-1,D=-1,O=N<<10;O<N+1<<10;++O){A.c=O;var F=I?(_["!data"][A.r]||[])[A.c]:_[encode_cell(A)];F&&(V<0&&(V=O),D=O)}V<0||(++T,x.write_shift(4,V),x.write_shift(4,D))}var M=x.l;return x.l=B,x.write_shift(4,T),x.l=M,x.length>x.l?x.slice(0,x.l):x}function write_row_header(r,n,_,x){var S=write_BrtRowHdr(x,_,n);(S.length>17||(n["!rows"]||[])[x])&&write_record(r,0,S)}var parse_BrtWsDim=parse_UncheckedRfX,write_BrtWsDim=write_UncheckedRfX;function parse_BrtWsFmtInfo(){}function parse_BrtWsProp(r,n){var _={},x=r[r.l];return++r.l,_.above=!(x&64),_.left=!(x&128),r.l+=18,_.name=parse_XLSBCodeName(r),_}function write_BrtWsProp(r,n,_){_==null&&(_=new_buf(84+4*r.length));var x=192;n&&(n.above&&(x&=-65),n.left&&(x&=-129)),_.write_shift(1,x);for(var S=1;S<3;++S)_.write_shift(1,0);return write_BrtColor({auto:1},_),_.write_shift(-4,-1),_.write_shift(-4,-1),write_XLSBCodeName(r,_),_.slice(0,_.l)}function parse_BrtCellBlank(r){var n=parse_XLSBCell(r);return[n]}function write_BrtCellBlank(r,n,_){return _==null&&(_=new_buf(8)),write_XLSBCell(n,_)}function parse_BrtShortBlank(r){var n=parse_XLSBShortCell(r);return[n]}function write_BrtShortBlank(r,n,_){return _==null&&(_=new_buf(4)),write_XLSBShortCell(n,_)}function parse_BrtCellBool(r){var n=parse_XLSBCell(r),_=r.read_shift(1);return[n,_,"b"]}function write_BrtCellBool(r,n,_){return _==null&&(_=new_buf(9)),write_XLSBCell(n,_),_.write_shift(1,r.v?1:0),_}function parse_BrtShortBool(r){var n=parse_XLSBShortCell(r),_=r.read_shift(1);return[n,_,"b"]}function write_BrtShortBool(r,n,_){return _==null&&(_=new_buf(5)),write_XLSBShortCell(n,_),_.write_shift(1,r.v?1:0),_}function parse_BrtCellError(r){var n=parse_XLSBCell(r),_=r.read_shift(1);return[n,_,"e"]}function write_BrtCellError(r,n,_){return _==null&&(_=new_buf(9)),write_XLSBCell(n,_),_.write_shift(1,r.v),_}function parse_BrtShortError(r){var n=parse_XLSBShortCell(r),_=r.read_shift(1);return[n,_,"e"]}function write_BrtShortError(r,n,_){return _==null&&(_=new_buf(8)),write_XLSBShortCell(n,_),_.write_shift(1,r.v),_.write_shift(2,0),_.write_shift(1,0),_}function parse_BrtCellIsst(r){var n=parse_XLSBCell(r),_=r.read_shift(4);return[n,_,"s"]}function write_BrtCellIsst(r,n,_){return _==null&&(_=new_buf(12)),write_XLSBCell(n,_),_.write_shift(4,n.v),_}function parse_BrtShortIsst(r){var n=parse_XLSBShortCell(r),_=r.read_shift(4);return[n,_,"s"]}function write_BrtShortIsst(r,n,_){return _==null&&(_=new_buf(8)),write_XLSBShortCell(n,_),_.write_shift(4,n.v),_}function parse_BrtCellReal(r){var n=parse_XLSBCell(r),_=parse_Xnum(r);return[n,_,"n"]}function write_BrtCellReal(r,n,_){return _==null&&(_=new_buf(16)),write_XLSBCell(n,_),write_Xnum(r.v,_),_}function parse_BrtShortReal(r){var n=parse_XLSBShortCell(r),_=parse_Xnum(r);return[n,_,"n"]}function write_BrtShortReal(r,n,_){return _==null&&(_=new_buf(12)),write_XLSBShortCell(n,_),write_Xnum(r.v,_),_}function parse_BrtCellRk(r){var n=parse_XLSBCell(r),_=parse_RkNumber(r);return[n,_,"n"]}function write_BrtCellRk(r,n,_){return _==null&&(_=new_buf(12)),write_XLSBCell(n,_),write_RkNumber(r.v,_),_}function parse_BrtShortRk(r){var n=parse_XLSBShortCell(r),_=parse_RkNumber(r);return[n,_,"n"]}function write_BrtShortRk(r,n,_){return _==null&&(_=new_buf(8)),write_XLSBShortCell(n,_),write_RkNumber(r.v,_),_}function parse_BrtCellRString(r){var n=parse_XLSBCell(r),_=parse_RichStr(r);return[n,_,"is"]}function parse_BrtCellSt(r){var n=parse_XLSBCell(r),_=parse_XLWideString(r);return[n,_,"str"]}function write_BrtCellSt(r,n,_){var x=r.v==null?"":String(r.v);return _==null&&(_=new_buf(12+4*r.v.length)),write_XLSBCell(n,_),write_XLWideString(x,_),_.length>_.l?_.slice(0,_.l):_}function parse_BrtShortSt(r){var n=parse_XLSBShortCell(r),_=parse_XLWideString(r);return[n,_,"str"]}function write_BrtShortSt(r,n,_){var x=r.v==null?"":String(r.v);return _==null&&(_=new_buf(8+4*x.length)),write_XLSBShortCell(n,_),write_XLWideString(x,_),_.length>_.l?_.slice(0,_.l):_}function parse_BrtFmlaBool(r,n,_){var x=r.l+n,S=parse_XLSBCell(r);S.r=_["!row"];var E=r.read_shift(1),C=[S,E,"b"];if(_.cellFormula){r.l+=2;var T=parse_XLSBCellParsedFormula(r,x-r.l,_);C[3]=stringify_formula(T,null,S,_.supbooks,_)}else r.l=x;return C}function parse_BrtFmlaError(r,n,_){var x=r.l+n,S=parse_XLSBCell(r);S.r=_["!row"];var E=r.read_shift(1),C=[S,E,"e"];if(_.cellFormula){r.l+=2;var T=parse_XLSBCellParsedFormula(r,x-r.l,_);C[3]=stringify_formula(T,null,S,_.supbooks,_)}else r.l=x;return C}function parse_BrtFmlaNum(r,n,_){var x=r.l+n,S=parse_XLSBCell(r);S.r=_["!row"];var E=parse_Xnum(r),C=[S,E,"n"];if(_.cellFormula){r.l+=2;var T=parse_XLSBCellParsedFormula(r,x-r.l,_);C[3]=stringify_formula(T,null,S,_.supbooks,_)}else r.l=x;return C}function parse_BrtFmlaString(r,n,_){var x=r.l+n,S=parse_XLSBCell(r);S.r=_["!row"];var E=parse_XLWideString(r),C=[S,E,"str"];if(_.cellFormula){r.l+=2;var T=parse_XLSBCellParsedFormula(r,x-r.l,_);C[3]=stringify_formula(T,null,S,_.supbooks,_)}else r.l=x;return C}var parse_BrtMergeCell=parse_UncheckedRfX,write_BrtMergeCell=write_UncheckedRfX;function write_BrtBeginMergeCells(r,n){return n==null&&(n=new_buf(4)),n.write_shift(4,r),n}function parse_BrtHLink(r,n){var _=r.l+n,x=parse_UncheckedRfX(r),S=parse_XLNullableWideString(r),E=parse_XLWideString(r),C=parse_XLWideString(r),T=parse_XLWideString(r);r.l=_;var B={rfx:x,relId:S,loc:E,display:T};return C&&(B.Tooltip=C),B}function write_BrtHLink(r,n){var _=new_buf(50+4*(r[1].Target.length+(r[1].Tooltip||"").length));write_UncheckedRfX({s:decode_cell(r[0]),e:decode_cell(r[0])},_),write_RelID("rId"+n,_);var x=r[1].Target.indexOf("#"),S=x==-1?"":r[1].Target.slice(x+1);return write_XLWideString(S||"",_),write_XLWideString(r[1].Tooltip||"",_),write_XLWideString("",_),_.slice(0,_.l)}function parse_BrtPane(){}function parse_BrtArrFmla(r,n,_){var x=r.l+n,S=parse_RfX(r),E=r.read_shift(1),C=[S];if(C[2]=E,_.cellFormula){var T=parse_XLSBArrayParsedFormula(r,x-r.l,_);C[1]=T}else r.l=x;return C}function parse_BrtShrFmla(r,n,_){var x=r.l+n,S=parse_UncheckedRfX(r),E=[S];if(_.cellFormula){var C=parse_XLSBSharedParsedFormula(r,x-r.l,_);E[1]=C,r.l=x}else r.l=x;return E}function write_BrtColInfo(r,n,_){_==null&&(_=new_buf(18));var x=col_obj_w(r,n);_.write_shift(-4,r),_.write_shift(-4,r),_.write_shift(4,(x.width||10)*256),_.write_shift(4,0);var S=0;return n.hidden&&(S|=1),typeof x.width=="number"&&(S|=2),n.level&&(S|=n.level<<8),_.write_shift(2,S),_}var BrtMarginKeys=["left","right","top","bottom","header","footer"];function parse_BrtMargins(r){var n={};return BrtMarginKeys.forEach(function(_){n[_]=parse_Xnum(r)}),n}function write_BrtMargins(r,n){return n==null&&(n=new_buf(6*8)),default_margins(r),BrtMarginKeys.forEach(function(_){write_Xnum(r[_],n)}),n}function parse_BrtBeginWsView(r){var n=r.read_shift(2);return r.l+=28,{RTL:n&32}}function write_BrtBeginWsView(r,n,_){_==null&&(_=new_buf(30));var x=924;return(((n||{}).Views||[])[0]||{}).RTL&&(x|=32),_.write_shift(2,x),_.write_shift(4,0),_.write_shift(4,0),_.write_shift(4,0),_.write_shift(1,0),_.write_shift(1,0),_.write_shift(2,0),_.write_shift(2,100),_.write_shift(2,0),_.write_shift(2,0),_.write_shift(2,0),_.write_shift(4,0),_}function write_BrtCellIgnoreEC(r){var n=new_buf(24);return n.write_shift(4,4),n.write_shift(4,1),write_UncheckedRfX(r,n),n}function write_BrtSheetProtection(r,n){return n==null&&(n=new_buf(16*4+2)),n.write_shift(2,r.password?crypto_CreatePasswordVerifier_Method1(r.password):0),n.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(_){_[1]?n.write_shift(4,r[_[0]]!=null&&!r[_[0]]?1:0):n.write_shift(4,r[_[0]]!=null&&r[_[0]]?0:1)}),n}function parse_BrtDVal(){}function parse_BrtDVal14(){}function parse_ws_bin(r,n,_,x,S,E,C){if(!r)return r;var T=n||{};x||(x={"!id":{}});var B={};T.dense&&(B["!data"]=[]);var A,I={s:{r:2e6,c:2e6},e:{r:0,c:0}},N=!1,V=!1,D,O,F,M,L,j,q,H,X,J=[];T.biff=12,T["!row"]=0;var Z=0,ae=!1,ce=[],ve={},pe=T.supbooks||S.supbooks||[[]];if(pe.sharedf=ve,pe.arrayf=ce,pe.SheetNames=S.SheetNames||S.Sheets.map(function(oe){return oe.name}),!T.supbooks&&(T.supbooks=pe,S.Names))for(var G=0;G<S.Names.length;++G)pe[0][G+1]=S.Names[G];var Y=[],U=[],W=!1;XLSBRecordEnum[16]={n:"BrtShortReal",f:parse_BrtShortReal};var ee;if(recordhopper(r,function(ie,ne,te){if(!V)switch(te){case 148:A=ie;break;case 0:D=ie,T.sheetRows&&T.sheetRows<=D.r&&(V=!0),H=encode_row(M=D.r),T["!row"]=D.r,(ie.hidden||ie.hpt||ie.level!=null)&&(ie.hpt&&(ie.hpx=pt2px(ie.hpt)),U[ie.r]=ie);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(O={t:ie[2]},ie[2]){case"n":O.v=ie[1];break;case"s":q=strs[ie[1]],O.v=q.t,O.r=q.r;break;case"b":O.v=!!ie[1];break;case"e":O.v=ie[1],T.cellText!==!1&&(O.w=BErr[O.v]);break;case"str":O.t="s",O.v=ie[1];break;case"is":O.t="s",O.v=ie[1].t;break}if((F=C.CellXf[ie[0].iStyleRef])&&safe_format(O,F.numFmtId,null,T,E,C),L=ie[0].c==-1?L+1:ie[0].c,T.dense?(B["!data"][M]||(B["!data"][M]=[]),B["!data"][M][L]=O):B[encode_col(L)+H]=O,T.cellFormula){for(ae=!1,Z=0;Z<ce.length;++Z){var K=ce[Z];D.r>=K[0].s.r&&D.r<=K[0].e.r&&L>=K[0].s.c&&L<=K[0].e.c&&(O.F=encode_range(K[0]),ae=!0)}!ae&&ie.length>3&&(O.f=ie[3])}if(I.s.r>D.r&&(I.s.r=D.r),I.s.c>L&&(I.s.c=L),I.e.r<D.r&&(I.e.r=D.r),I.e.c<L&&(I.e.c=L),T.cellDates&&F&&O.t=="n"&&fmt_is_date(table_fmt[F.numFmtId])){var le=SSF_parse_date_code(O.v);le&&(O.t="d",O.v=new Date(le.y,le.m-1,le.d,le.H,le.M,le.S,le.u))}ee&&(ee.type=="XLDAPR"&&(O.D=!0),ee=void 0);break;case 1:case 12:if(!T.sheetStubs||N)break;O={t:"z",v:void 0},L=ie[0].c==-1?L+1:ie[0].c,T.dense?(B["!data"][M]||(B["!data"][M]=[]),B["!data"][M][L]=O):B[encode_col(L)+H]=O,I.s.r>D.r&&(I.s.r=D.r),I.s.c>L&&(I.s.c=L),I.e.r<D.r&&(I.e.r=D.r),I.e.c<L&&(I.e.c=L),ee&&(ee.type=="XLDAPR"&&(O.D=!0),ee=void 0);break;case 176:J.push(ie);break;case 49:ee=((T.xlmeta||{}).Cell||[])[ie-1];break;case 494:var ue=x["!id"][ie.relId];for(ue?(ie.Target=ue.Target,ie.loc&&(ie.Target+="#"+ie.loc),ie.Rel=ue):ie.relId==""&&(ie.Target="#"+ie.loc),M=ie.rfx.s.r;M<=ie.rfx.e.r;++M)for(L=ie.rfx.s.c;L<=ie.rfx.e.c;++L)T.dense?(B["!data"][M]||(B["!data"][M]=[]),B["!data"][M][L]||(B["!data"][M][L]={t:"z",v:void 0}),B["!data"][M][L].l=ie):(j=encode_col(L)+encode_row(M),B[j]||(B[j]={t:"z",v:void 0}),B[j].l=ie);break;case 426:if(!T.cellFormula)break;ce.push(ie),X=T.dense?B["!data"][M][L]:B[encode_col(L)+H],X.f=stringify_formula(ie[1],I,{r:D.r,c:L},pe,T),X.F=encode_range(ie[0]);break;case 427:if(!T.cellFormula)break;ve[encode_cell(ie[0].s)]=ie[1],X=T.dense?B["!data"][M][L]:B[encode_col(L)+H],X.f=stringify_formula(ie[1],I,{r:D.r,c:L},pe,T);break;case 60:if(!T.cellStyles)break;for(;ie.e>=ie.s;)Y[ie.e--]={width:ie.w/256,hidden:!!(ie.flags&1),level:ie.level},W||(W=!0,find_mdw_colw(ie.w/256)),process_col(Y[ie.e+1]);break;case 161:B["!autofilter"]={ref:encode_range(ie)};break;case 476:B["!margins"]=ie;break;case 147:S.Sheets[_]||(S.Sheets[_]={}),ie.name&&(S.Sheets[_].CodeName=ie.name),(ie.above||ie.left)&&(B["!outline"]={above:ie.above,left:ie.left});break;case 137:S.Views||(S.Views=[{}]),S.Views[0]||(S.Views[0]={}),ie.RTL&&(S.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:N=!0;break;case 36:N=!1;break;case 37:N=!0;break;case 38:N=!1;break;default:if(!ne.T){if(!N||T.WTF)throw new Error("Unexpected record 0x"+te.toString(16))}}},T),delete T.supbooks,delete T["!row"],!B["!ref"]&&(I.s.r<2e6||A&&(A.e.r>0||A.e.c>0||A.s.r>0||A.s.c>0))&&(B["!ref"]=encode_range(A||I)),T.sheetRows&&B["!ref"]){var re=safe_decode_range(B["!ref"]);T.sheetRows<=+re.e.r&&(re.e.r=T.sheetRows-1,re.e.r>I.e.r&&(re.e.r=I.e.r),re.e.r<re.s.r&&(re.s.r=re.e.r),re.e.c>I.e.c&&(re.e.c=I.e.c),re.e.c<re.s.c&&(re.s.c=re.e.c),B["!fullref"]=B["!ref"],B["!ref"]=encode_range(re))}return J.length>0&&(B["!merges"]=J),Y.length>0&&(B["!cols"]=Y),U.length>0&&(B["!rows"]=U),B}function write_ws_bin_cell(r,n,_,x,S,E,C){var T={r:_,c:x};if(n.c&&E["!comments"].push([encode_cell(T),n.c]),n.v===void 0)return!1;var B="";switch(n.t){case"b":B=n.v?"1":"0";break;case"d":n=dup(n),n.z=n.z||table_fmt[14],n.v=datenum(parseDate(n.v)),n.t="n";break;case"n":case"e":B=""+n.v;break;default:B=n.v;break}switch(T.s=get_cell_style(S.cellXfs,n,S),n.l&&E["!links"].push([encode_cell(T),n.l]),n.t){case"s":case"str":return S.bookSST?(B=get_sst_id(S.Strings,n.v==null?"":String(n.v),S.revStrings),T.t="s",T.v=B,C?write_record(r,18,write_BrtShortIsst(n,T)):write_record(r,7,write_BrtCellIsst(n,T))):(T.t="str",C?write_record(r,17,write_BrtShortSt(n,T)):write_record(r,6,write_BrtCellSt(n,T))),!0;case"n":return n.v==(n.v|0)&&n.v>-1e3&&n.v<1e3?C?write_record(r,13,write_BrtShortRk(n,T)):write_record(r,2,write_BrtCellRk(n,T)):C?write_record(r,16,write_BrtShortReal(n,T)):write_record(r,5,write_BrtCellReal(n,T)),!0;case"b":return T.t="b",C?write_record(r,15,write_BrtShortBool(n,T)):write_record(r,4,write_BrtCellBool(n,T)),!0;case"e":return T.t="e",C?write_record(r,14,write_BrtShortError(n,T)):write_record(r,3,write_BrtCellError(n,T)),!0}return C?write_record(r,12,write_BrtShortBlank(n,T)):write_record(r,1,write_BrtCellBlank(n,T)),!0}function write_CELLTABLE(r,n,_,x){var S=safe_decode_range(n["!ref"]||"A1"),E,C="",T=[];write_record(r,145);var B=n["!data"]!=null,A=S.e.r;n["!rows"]&&(A=Math.max(S.e.r,n["!rows"].length-1));for(var I=S.s.r;I<=A;++I){C=encode_row(I),write_row_header(r,n,S,I);var N=!1;if(I<=S.e.r)for(var V=S.s.c;V<=S.e.c;++V){I===S.s.r&&(T[V]=encode_col(V)),E=T[V]+C;var D=B?(n["!data"][I]||[])[V]:n[E];if(!D){N=!1;continue}N=write_ws_bin_cell(r,D,I,V,x,n,N)}}write_record(r,146)}function write_MERGECELLS(r,n){!n||!n["!merges"]||(write_record(r,177,write_BrtBeginMergeCells(n["!merges"].length)),n["!merges"].forEach(function(_){write_record(r,176,write_BrtMergeCell(_))}),write_record(r,178))}function write_COLINFOS(r,n){!n||!n["!cols"]||(write_record(r,390),n["!cols"].forEach(function(_,x){_&&write_record(r,60,write_BrtColInfo(x,_))}),write_record(r,391))}function write_IGNOREECS(r,n){!n||!n["!ref"]||(write_record(r,648),write_record(r,649,write_BrtCellIgnoreEC(safe_decode_range(n["!ref"]))),write_record(r,650))}function write_HLINKS(r,n,_){n["!links"].forEach(function(x){if(x[1].Target){var S=add_rels(_,-1,x[1].Target.replace(/#.*$/,""),RELS.HLINK);write_record(r,494,write_BrtHLink(x,S))}}),delete n["!links"]}function write_LEGACYDRAWING(r,n,_,x){if(n["!comments"].length>0){var S=add_rels(x,-1,"../drawings/vmlDrawing"+(_+1)+".vml",RELS.VML);write_record(r,551,write_RelID("rId"+S)),n["!legacy"]=S}}function write_AUTOFILTER(r,n,_,x){if(n["!autofilter"]){var S=n["!autofilter"],E=typeof S.ref=="string"?S.ref:encode_range(S.ref);_.Workbook||(_.Workbook={Sheets:[]}),_.Workbook.Names||(_.Workbook.Names=[]);var C=_.Workbook.Names,T=decode_range(E);T.s.r==T.e.r&&(T.e.r=decode_range(n["!ref"]).e.r,E=encode_range(T));for(var B=0;B<C.length;++B){var A=C[B];if(A.Name=="_xlnm._FilterDatabase"&&A.Sheet==x){A.Ref=formula_quote_sheet_name(_.SheetNames[x])+"!"+fix_range(E);break}}B==C.length&&C.push({Name:"_xlnm._FilterDatabase",Sheet:x,Ref:formula_quote_sheet_name(_.SheetNames[x])+"!"+fix_range(E)}),write_record(r,161,write_UncheckedRfX(safe_decode_range(E))),write_record(r,162)}}function write_WSVIEWS2(r,n,_){write_record(r,133),write_record(r,137,write_BrtBeginWsView(n,_)),write_record(r,138),write_record(r,134)}function write_SHEETPROTECT(r,n){n["!protect"]&&write_record(r,535,write_BrtSheetProtection(n["!protect"]))}function write_ws_bin(r,n,_,x){var S=buf_array(),E=_.SheetNames[r],C=_.Sheets[E]||{},T=E;try{_&&_.Workbook&&(T=_.Workbook.Sheets[r].CodeName||T)}catch{}var B=safe_decode_range(C["!ref"]||"A1");if(B.e.c>16383||B.e.r>1048575){if(n.WTF)throw new Error("Range "+(C["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");B.e.c=Math.min(B.e.c,16383),B.e.r=Math.min(B.e.c,1048575)}return C["!links"]=[],C["!comments"]=[],write_record(S,129),(_.vbaraw||C["!outline"])&&write_record(S,147,write_BrtWsProp(T,C["!outline"])),write_record(S,148,write_BrtWsDim(B)),write_WSVIEWS2(S,C,_.Workbook),write_COLINFOS(S,C),write_CELLTABLE(S,C,r,n),write_SHEETPROTECT(S,C),write_AUTOFILTER(S,C,_,r),write_MERGECELLS(S,C),write_HLINKS(S,C,x),C["!margins"]&&write_record(S,476,write_BrtMargins(C["!margins"])),(!n||n.ignoreEC||n.ignoreEC==null)&&write_IGNOREECS(S,C),write_LEGACYDRAWING(S,C,r,x),write_record(S,130),S.end()}function parse_Cache(r){var n=[],_=r.match(/^<c:numCache>/),x;(r.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(E){var C=E.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);C&&(n[+C[1]]=_?+C[2]:C[2])});var S=unescapexml((r.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(r.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(E){x=E.replace(/<.*?>/g,"")}),[n,S,x]}function parse_chart(r,n,_,x,S,E){var C=E||{"!type":"chart"};if(!r)return E;var T=0,B=0,A="A",I={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(r.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(N){var V=parse_Cache(N);I.s.r=I.s.c=0,I.e.c=T,A=encode_col(T),V[0].forEach(function(D,O){C["!data"]?(C["!data"][O]||(C["!data"][O]=[]),C["!data"][O][T]={t:"n",v:D,z:V[1]}):C[A+encode_row(O)]={t:"n",v:D,z:V[1]},B=O}),I.e.r<B&&(I.e.r=B),++T}),T>0&&(C["!ref"]=encode_range(I)),C}function parse_cs_xml(r,n,_,x,S){if(!r)return r;x||(x={"!id":{}});var E={"!type":"chart","!drawel":null,"!rel":""},C,T=r.match(sheetprregex);return T&&parse_ws_xml_sheetpr(T[0],E,S,_),(C=r.match(/drawing r:id="(.*?)"/))&&(E["!rel"]=C[1]),x["!id"][E["!rel"]]&&(E["!drawel"]=x["!id"][E["!rel"]]),E}function parse_BrtCsProp(r,n){r.l+=10;var _=parse_XLWideString(r);return{name:_}}function parse_cs_bin(r,n,_,x,S){if(!r)return r;x||(x={"!id":{}});var E={"!type":"chart","!drawel":null,"!rel":""},C=!1;return recordhopper(r,function(B,A,I){switch(I){case 550:E["!rel"]=B;break;case 651:S.Sheets[_]||(S.Sheets[_]={}),B.name&&(S.Sheets[_].CodeName=B.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:C=!0;break;case 36:C=!1;break;case 37:break;case 38:break;default:if(!(A.T>0)){if(!(A.T<0)){if(!C||n.WTF)throw new Error("Unexpected record 0x"+I.toString(16))}}}},n),x["!id"][E["!rel"]]&&(E["!drawel"]=x["!id"][E["!rel"]]),E}var WBPropsDef=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],WBViewDef=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],SheetDef=[],CalcPrDef=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function push_defaults_array(r,n){for(var _=0;_!=r.length;++_)for(var x=r[_],S=0;S!=n.length;++S){var E=n[S];if(x[E[0]]==null)x[E[0]]=E[1];else switch(E[2]){case"bool":typeof x[E[0]]=="string"&&(x[E[0]]=parsexmlbool(x[E[0]]));break;case"int":typeof x[E[0]]=="string"&&(x[E[0]]=parseInt(x[E[0]],10));break}}}function push_defaults(r,n){for(var _=0;_!=n.length;++_){var x=n[_];if(r[x[0]]==null)r[x[0]]=x[1];else switch(x[2]){case"bool":typeof r[x[0]]=="string"&&(r[x[0]]=parsexmlbool(r[x[0]]));break;case"int":typeof r[x[0]]=="string"&&(r[x[0]]=parseInt(r[x[0]],10));break}}}function parse_wb_defaults(r){push_defaults(r.WBProps,WBPropsDef),push_defaults(r.CalcPr,CalcPrDef),push_defaults_array(r.WBView,WBViewDef),push_defaults_array(r.Sheets,SheetDef),_ssfopts.date1904=parsexmlbool(r.WBProps.date1904)}function safe1904(r){return!r.Workbook||!r.Workbook.WBProps?"false":parsexmlbool(r.Workbook.WBProps.date1904)?"true":"false"}var badchars=":][*?/\\".split("");function check_ws_name(r,n){if(r.length>31){if(n)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var _=!0;return badchars.forEach(function(x){if(r.indexOf(x)!=-1){if(!n)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");_=!1}}),_}function check_wb_names(r,n,_){r.forEach(function(x,S){check_ws_name(x);for(var E=0;E<S;++E)if(x==r[E])throw new Error("Duplicate Sheet Name: "+x);if(_){var C=n&&n[S]&&n[S].CodeName||x;if(C.charCodeAt(0)==95&&C.length>22)throw new Error("Bad Code Name: Worksheet"+C)}})}function check_wb(r){if(!r||!r.SheetNames||!r.Sheets)throw new Error("Invalid Workbook");if(!r.SheetNames.length)throw new Error("Workbook is empty");var n=r.Workbook&&r.Workbook.Sheets||[];check_wb_names(r.SheetNames,n,!!r.vbaraw);for(var _=0;_<r.SheetNames.length;++_)check_ws(r.Sheets[r.SheetNames[_]],r.SheetNames[_],_);r.SheetNames.forEach(function(x,S){var E=r.Sheets[x];if(!(!E||!E["!autofilter"])){var C;r.Workbook||(r.Workbook={}),r.Workbook.Names||(r.Workbook.Names=[]),r.Workbook.Names.forEach(function(B){B.Name=="_xlnm._FilterDatabase"&&B.Sheet==S&&(C=B)});var T=formula_quote_sheet_name(x)+"!"+fix_range(E["!autofilter"].ref);C?C.Ref=T:r.Workbook.Names.push({Name:"_xlnm._FilterDatabase",Sheet:S,Ref:T})}})}var wbnsregex=/<\w+:workbook/;function parse_wb_xml(r,n){if(!r)throw new Error("Could not find file");var _={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},x=!1,S="xmlns",E={},C=0;if(r.replace(tagregex,function(B,A){var I=parsexmltag(B);switch(strip_ns(I[0])){case"<?xml":break;case"<workbook":B.match(wbnsregex)&&(S="xmlns"+B.match(/<(\w+):/)[1]),_.xmlns=I[S];break;case"</workbook>":break;case"<fileVersion":delete I[0],_.AppVersion=I;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":WBPropsDef.forEach(function(N){if(I[N[0]]!=null)switch(N[2]){case"bool":_.WBProps[N[0]]=parsexmlbool(I[N[0]]);break;case"int":_.WBProps[N[0]]=parseInt(I[N[0]],10);break;default:_.WBProps[N[0]]=I[N[0]]}}),I.codeName&&(_.WBProps.CodeName=utf8read(I.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete I[0],_.WBView.push(I);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(I.state){case"hidden":I.Hidden=1;break;case"veryHidden":I.Hidden=2;break;default:I.Hidden=0}delete I.state,I.name=unescapexml(utf8read(I.name)),delete I[0],_.Sheets.push(I);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":x=!0;break;case"</definedNames>":x=!1;break;case"<definedName":E={},E.Name=utf8read(I.name),I.comment&&(E.Comment=I.comment),I.localSheetId&&(E.Sheet=+I.localSheetId),parsexmlbool(I.hidden||"0")&&(E.Hidden=!0),C=A+B.length;break;case"</definedName>":E.Ref=unescapexml(utf8read(r.slice(C,A))),_.Names.push(E);break;case"<definedName/>":break;case"<calcPr":delete I[0],_.CalcPr=I;break;case"<calcPr/>":delete I[0],_.CalcPr=I;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":x=!0;break;case"</ext>":x=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":x=!0;break;case"</AlternateContent>":x=!1;break;case"<revisionPtr":break;default:if(!x&&n.WTF)throw new Error("unrecognized "+I[0]+" in workbook")}return B}),XMLNS_main.indexOf(_.xmlns)===-1)throw new Error("Unknown Namespace: "+_.xmlns);return parse_wb_defaults(_),_}function write_wb_xml(r){var n=[XML_HEADER];n[n.length]=writextag("workbook",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r});var _=r.Workbook&&(r.Workbook.Names||[]).length>0,x={codeName:"ThisWorkbook"};r.Workbook&&r.Workbook.WBProps&&(WBPropsDef.forEach(function(T){r.Workbook.WBProps[T[0]]!=null&&r.Workbook.WBProps[T[0]]!=T[1]&&(x[T[0]]=r.Workbook.WBProps[T[0]])}),r.Workbook.WBProps.CodeName&&(x.codeName=r.Workbook.WBProps.CodeName,delete x.CodeName)),n[n.length]=writextag("workbookPr",null,x);var S=r.Workbook&&r.Workbook.Sheets||[],E=0;if(S&&S[0]&&S[0].Hidden){for(n[n.length]="<bookViews>",E=0;E!=r.SheetNames.length&&!(!S[E]||!S[E].Hidden);++E);E==r.SheetNames.length&&(E=0),n[n.length]='<workbookView firstSheet="'+E+'" activeTab="'+E+'"/>',n[n.length]="</bookViews>"}for(n[n.length]="<sheets>",E=0;E!=r.SheetNames.length;++E){var C={name:escapexml(r.SheetNames[E].slice(0,31))};if(C.sheetId=""+(E+1),C["r:id"]="rId"+(E+1),S[E])switch(S[E].Hidden){case 1:C.state="hidden";break;case 2:C.state="veryHidden";break}n[n.length]=writextag("sheet",null,C)}return n[n.length]="</sheets>",_&&(n[n.length]="<definedNames>",r.Workbook&&r.Workbook.Names&&r.Workbook.Names.forEach(function(T){var B={name:T.Name};T.Comment&&(B.comment=T.Comment),T.Sheet!=null&&(B.localSheetId=""+T.Sheet),T.Hidden&&(B.hidden="1"),T.Ref&&(n[n.length]=writextag("definedName",escapexml(T.Ref),B))}),n[n.length]="</definedNames>"),n.length>2&&(n[n.length]="</workbook>",n[1]=n[1].replace("/>",">")),n.join("")}function parse_BrtBundleSh(r,n){var _={};return _.Hidden=r.read_shift(4),_.iTabID=r.read_shift(4),_.strRelID=parse_RelID(r),_.name=parse_XLWideString(r),_}function write_BrtBundleSh(r,n){return n||(n=new_buf(127)),n.write_shift(4,r.Hidden),n.write_shift(4,r.iTabID),write_RelID(r.strRelID,n),write_XLWideString(r.name.slice(0,31),n),n.length>n.l?n.slice(0,n.l):n}function parse_BrtWbProp(r,n){var _={},x=r.read_shift(4);_.defaultThemeVersion=r.read_shift(4);var S=n>8?parse_XLWideString(r):"";return S.length>0&&(_.CodeName=S),_.autoCompressPictures=!!(x&65536),_.backupFile=!!(x&64),_.checkCompatibility=!!(x&4096),_.date1904=!!(x&1),_.filterPrivacy=!!(x&8),_.hidePivotFieldList=!!(x&1024),_.promptedSolutions=!!(x&16),_.publishItems=!!(x&2048),_.refreshAllConnections=!!(x&262144),_.saveExternalLinkValues=!!(x&128),_.showBorderUnselectedTables=!!(x&4),_.showInkAnnotation=!!(x&32),_.showObjects=["all","placeholders","none"][x>>13&3],_.showPivotChartFilter=!!(x&32768),_.updateLinks=["userSet","never","always"][x>>8&3],_}function write_BrtWbProp(r,n){n||(n=new_buf(72));var _=0;return r&&(r.date1904&&(_|=1),r.filterPrivacy&&(_|=8)),n.write_shift(4,_),n.write_shift(4,0),write_XLSBCodeName(r&&r.CodeName||"ThisWorkbook",n),n.slice(0,n.l)}function parse_BrtFRTArchID$(r,n){var _={};return r.read_shift(4),_.ArchID=r.read_shift(4),r.l+=n-8,_}function parse_BrtName(r,n,_){var x=r.l+n,S=r.read_shift(4);r.l+=1;var E=r.read_shift(4),C=parse_XLNameWideString(r),T=parse_XLSBNameParsedFormula(r,0,_),B=parse_XLNullableWideString(r);S&32&&(C="_xlnm."+C),r.l=x;var A={Name:C,Ptg:T,Flags:S};return E<268435455&&(A.Sheet=E),B&&(A.Comment=B),A}function write_BrtName(r,n){var _=new_buf(9),x=0,S=r.Name;XLSLblBuiltIn.indexOf(S)>-1&&(x|=32,S=S.slice(6)),_.write_shift(4,x),_.write_shift(1,0),_.write_shift(4,r.Sheet==null?4294967295:r.Sheet);var E=[_,write_XLWideString(S),write_XLSBNameParsedFormula(r.Ref,n)];if(r.Comment)E.push(write_XLNullableWideString(r.Comment));else{var C=new_buf(4);C.write_shift(4,4294967295),E.push(C)}return bconcat(E)}function parse_wb_bin(r,n){var _={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},x=[],S=!1;n||(n={}),n.biff=12;var E=[],C=[[]];return C.SheetNames=[],C.XTI=[],XLSBRecordEnum[16]={n:"BrtFRTArchID$",f:parse_BrtFRTArchID$},recordhopper(r,function(B,A,I){switch(I){case 156:C.SheetNames.push(B.name),_.Sheets.push(B);break;case 153:_.WBProps=B;break;case 39:B.Sheet!=null&&(n.SID=B.Sheet),B.Ref=stringify_formula(B.Ptg,null,null,C,n),delete n.SID,delete B.Ptg,E.push(B);break;case 1036:break;case 357:case 358:case 355:case 667:C[0].length?C.push([I,B]):C[0]=[I,B],C[C.length-1].XTI=[];break;case 362:C.length===0&&(C[0]=[],C[0].XTI=[]),C[C.length-1].XTI=C[C.length-1].XTI.concat(B),C.XTI=C.XTI.concat(B);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:x.push(I),S=!0;break;case 36:x.pop(),S=!1;break;case 37:x.push(I),S=!0;break;case 38:x.pop(),S=!1;break;case 16:break;default:if(!A.T){if(!S||n.WTF&&x[x.length-1]!=37&&x[x.length-1]!=35)throw new Error("Unexpected record 0x"+I.toString(16))}}},n),parse_wb_defaults(_),_.Names=E,_.supbooks=C,_}function write_BUNDLESHS(r,n){write_record(r,143);for(var _=0;_!=n.SheetNames.length;++_){var x=n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[_]&&n.Workbook.Sheets[_].Hidden||0,S={Hidden:x,iTabID:_+1,strRelID:"rId"+(_+1),name:n.SheetNames[_]};write_record(r,156,write_BrtBundleSh(S))}write_record(r,144)}function write_BrtFileVersion(r,n){n||(n=new_buf(127));for(var _=0;_!=4;++_)n.write_shift(4,0);return write_XLWideString("SheetJS",n),write_XLWideString(XLSX.version,n),write_XLWideString(XLSX.version,n),write_XLWideString("7262",n),n.length>n.l?n.slice(0,n.l):n}function write_BrtBookView(r,n){n||(n=new_buf(29)),n.write_shift(-4,0),n.write_shift(-4,460),n.write_shift(4,28800),n.write_shift(4,17600),n.write_shift(4,500),n.write_shift(4,r),n.write_shift(4,r);var _=120;return n.write_shift(1,_),n.length>n.l?n.slice(0,n.l):n}function write_BOOKVIEWS(r,n){if(!(!n.Workbook||!n.Workbook.Sheets)){for(var _=n.Workbook.Sheets,x=0,S=-1,E=-1;x<_.length;++x)!_[x]||!_[x].Hidden&&S==-1?S=x:_[x].Hidden==1&&E==-1&&(E=x);E>S||(write_record(r,135),write_record(r,158,write_BrtBookView(S)),write_record(r,136))}}function write_BRTNAMES(r,n){!n.Workbook||!n.Workbook.Names||n.Workbook.Names.forEach(function(_){try{if(_.Flags&14)return;write_record(r,39,write_BrtName(_,n))}catch{console.error("Could not serialize defined name "+JSON.stringify(_))}})}function write_SELF_EXTERNS_xlsb(r){var n=r.SheetNames.length,_=new_buf(12*n+28);_.write_shift(4,n+2),_.write_shift(4,0),_.write_shift(4,-2),_.write_shift(4,-2),_.write_shift(4,0),_.write_shift(4,-1),_.write_shift(4,-1);for(var x=0;x<n;++x)_.write_shift(4,0),_.write_shift(4,x),_.write_shift(4,x);return _}function write_EXTERNALS_xlsb(r,n){write_record(r,353),write_record(r,357),write_record(r,362,write_SELF_EXTERNS_xlsb(n)),write_record(r,354)}function write_wb_bin(r,n){var _=buf_array();return write_record(_,131),write_record(_,128,write_BrtFileVersion()),write_record(_,153,write_BrtWbProp(r.Workbook&&r.Workbook.WBProps||null)),write_BOOKVIEWS(_,r),write_BUNDLESHS(_,r),write_EXTERNALS_xlsb(_,r),(r.Workbook||{}).Names&&write_BRTNAMES(_,r),write_record(_,132),_.end()}function parse_wb(r,n,_){return n.slice(-4)===".bin"?parse_wb_bin(r,_):parse_wb_xml(r,_)}function parse_ws(r,n,_,x,S,E,C,T){return n.slice(-4)===".bin"?parse_ws_bin(r,x,_,S,E,C,T):parse_ws_xml(r,x,_,S,E,C,T)}function parse_cs(r,n,_,x,S,E,C,T){return n.slice(-4)===".bin"?parse_cs_bin(r,x,_,S,E):parse_cs_xml(r,x,_,S,E)}function parse_ms(r,n,_,x,S,E,C,T){return n.slice(-4)===".bin"?parse_ms_bin():parse_ms_xml()}function parse_ds(r,n,_,x,S,E,C,T){return n.slice(-4)===".bin"?parse_ds_bin():parse_ds_xml()}function parse_sty(r,n,_,x){return n.slice(-4)===".bin"?parse_sty_bin(r,_,x):parse_sty_xml(r,_,x)}function parse_sst(r,n,_){return n.slice(-4)===".bin"?parse_sst_bin(r,_):parse_sst_xml(r,_)}function parse_cmnt(r,n,_){return n.slice(-4)===".bin"?parse_comments_bin(r,_):parse_comments_xml(r,_)}function parse_cc(r,n,_){return n.slice(-4)===".bin"?parse_cc_bin(r):parse_cc_xml(r)}function parse_xlink(r,n,_,x){return _.slice(-4)===".bin"?parse_xlink_bin(r,n,_,x):void 0}function parse_xlmeta(r,n,_){return n.slice(-4)===".bin"?parse_xlmeta_bin(r,n,_):parse_xlmeta_xml(r,n,_)}var attregexg2=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,attregex2=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function xlml_parsexmltag(r,n){var _=r.split(/\s+/),x=[];if(n||(x[0]=_[0]),_.length===1)return x;var S=r.match(attregexg2),E,C,T,B;if(S)for(B=0;B!=S.length;++B)E=S[B].match(attregex2),(C=E[1].indexOf(":"))===-1?x[E[1]]=E[2].slice(1,E[2].length-1):(E[1].slice(0,6)==="xmlns:"?T="xmlns"+E[1].slice(6):T=E[1].slice(C+1),x[T]=E[2].slice(1,E[2].length-1));return x}function xlml_parsexmltagobj(r){var n=r.split(/\s+/),_={};if(n.length===1)return _;var x=r.match(attregexg2),S,E,C,T;if(x)for(T=0;T!=x.length;++T)S=x[T].match(attregex2),(E=S[1].indexOf(":"))===-1?_[S[1]]=S[2].slice(1,S[2].length-1):(S[1].slice(0,6)==="xmlns:"?C="xmlns"+S[1].slice(6):C=S[1].slice(E+1),_[C]=S[2].slice(1,S[2].length-1));return _}var XLMLFormatMap;function xlml_format(r,n){var _=XLMLFormatMap[r]||unescapexml(r);return _==="General"?SSF_general(n):SSF_format(_,n)}function xlml_set_custprop(r,n,_,x){var S=x;switch((_[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":S=parsexmlbool(x);break;case"i2":case"int":S=parseInt(x,10);break;case"r4":case"float":S=parseFloat(x);break;case"date":case"dateTime.tz":S=parseDate(x);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+_[0])}r[unescapexml(n)]=S}function safe_format_xlml(r,n,_){if(r.t!=="z"){if(!_||_.cellText!==!1)try{r.t==="e"?r.w=r.w||BErr[r.v]:n==="General"?r.t==="n"?(r.v|0)===r.v?r.w=r.v.toString(10):r.w=SSF_general_num(r.v):r.w=SSF_general(r.v):r.w=xlml_format(n||"General",r.v)}catch(E){if(_.WTF)throw E}try{var x=XLMLFormatMap[n]||n||"General";if(_.cellNF&&(r.z=x),_.cellDates&&r.t=="n"&&fmt_is_date(x)){var S=SSF_parse_date_code(r.v);S&&(r.t="d",r.v=new Date(S.y,S.m-1,S.d,S.H,S.M,S.S,S.u))}}catch(E){if(_.WTF)throw E}}}function process_style_xlml(r,n,_){if(_.cellStyles&&n.Interior){var x=n.Interior;x.Pattern&&(x.patternType=XLMLPatternTypeMap[x.Pattern]||x.Pattern)}r[n.ID]=n}function parse_xlml_data(r,n,_,x,S,E,C,T,B,A){var I="General",N=x.StyleID,V={};A=A||{};var D=[],O=0;for(N===void 0&&T&&(N=T.StyleID),N===void 0&&C&&(N=C.StyleID);E[N]!==void 0&&(E[N].nf&&(I=E[N].nf),E[N].Interior&&D.push(E[N].Interior),!!E[N].Parent);)N=E[N].Parent;switch(_.Type){case"Boolean":x.t="b",x.v=parsexmlbool(r);break;case"String":x.t="s",x.r=xlml_fixstr(unescapexml(r)),x.v=r.indexOf("<")>-1?unescapexml(n||r).replace(/<.*?>/g,""):x.r;break;case"DateTime":r.slice(-1)!="Z"&&(r+="Z"),x.v=(parseDate(r)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),x.v!==x.v?x.v=unescapexml(r):x.v<60&&(x.v=x.v-1),(!I||I=="General")&&(I="yyyy-mm-dd");case"Number":x.v===void 0&&(x.v=+r),x.t||(x.t="n");break;case"Error":x.t="e",x.v=RBErr[r],A.cellText!==!1&&(x.w=r);break;default:r==""&&n==""?x.t="z":(x.t="s",x.v=xlml_fixstr(n||r));break}if(safe_format_xlml(x,I,A),A.cellFormula!==!1)if(x.Formula){var F=unescapexml(x.Formula);F.charCodeAt(0)==61&&(F=F.slice(1)),x.f=rc_to_a1(F,S),delete x.Formula,x.ArrayRange=="RC"?x.F=rc_to_a1("RC:RC",S):x.ArrayRange&&(x.F=rc_to_a1(x.ArrayRange,S),B.push([safe_decode_range(x.F),x.F]))}else for(O=0;O<B.length;++O)S.r>=B[O][0].s.r&&S.r<=B[O][0].e.r&&S.c>=B[O][0].s.c&&S.c<=B[O][0].e.c&&(x.F=B[O][1]);A.cellStyles&&(D.forEach(function(M){!V.patternType&&M.patternType&&(V.patternType=M.patternType)}),x.s=V),x.StyleID!==void 0&&(x.ixfe=x.StyleID)}function xlml_prefix_dname(r){return XLSLblBuiltIn.indexOf("_xlnm."+r)>-1?"_xlnm."+r:r}function xlml_clean_comment(r){r.t=r.v||"",r.t=r.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),r.v=r.w=r.ixfe=void 0}function parse_xlml_xml(r,n){var _=n||{};make_ssf();var x=debom(xlml_normalize(r));(_.type=="binary"||_.type=="array"||_.type=="base64")&&(x=utf8read(x));var S=x.slice(0,1024).toLowerCase(),E=!1;if(S=S.replace(/".*?"/g,""),(S.indexOf(">")&1023)>Math.min(S.indexOf(",")&1023,S.indexOf(";")&1023)){var C=dup(_);return C.type="string",PRN.to_workbook(x,C)}if(S.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ie){S.indexOf("<"+Ie)>=0&&(E=!0)}),E)return html_to_workbook(x,_);XLMLFormatMap={"General Number":"General","General Date":table_fmt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":table_fmt[15],"Short Date":table_fmt[14],"Long Time":table_fmt[19],"Medium Time":table_fmt[18],"Short Time":table_fmt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:table_fmt[2],Standard:table_fmt[4],Percent:table_fmt[10],Scientific:table_fmt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var T,B=[],A,I={},N=[],V={},D="";_.dense&&(V["!data"]=[]);var O={},F={},M=xlml_parsexmltag('<Data ss:Type="String">'),L=0,j=0,q=0,H={s:{r:2e6,c:2e6},e:{r:0,c:0}},X={},J={},Z="",ae=0,ce=[],ve={},pe={},G=0,Y=[],U=[],W={},ee=[],re,oe=!1,ie=[],ne=[],te={},K=0,le=0,ue={Sheets:[],WBProps:{date1904:!1}},be={};xlmlregex.lastIndex=0,x=x.replace(/<!--([\s\S]*?)-->/mg,"");for(var ge="";T=xlmlregex.exec(x);)switch(T[3]=(ge=T[3]).toLowerCase()){case"data":if(ge=="data"){if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"))}else T[0].charAt(T[0].length-2)!=="/"&&B.push([T[3],!0]);break}if(B[B.length-1][1])break;T[1]==="/"?parse_xlml_data(x.slice(L,T.index),Z,M,B[B.length-1][0]=="comment"?W:O,{c:j,r:q},X,ee[j],F,ie,_):(Z="",M=xlml_parsexmltag(T[0]),L=T.index+T[0].length);break;case"cell":if(T[1]==="/")if(U.length>0&&(O.c=U),(!_.sheetRows||_.sheetRows>q)&&O.v!==void 0&&(_.dense?(V["!data"][q]||(V["!data"][q]=[]),V["!data"][q][j]=O):V[encode_col(j)+encode_row(q)]=O),O.HRef&&(O.l={Target:unescapexml(O.HRef)},O.HRefScreenTip&&(O.l.Tooltip=O.HRefScreenTip),delete O.HRef,delete O.HRefScreenTip),(O.MergeAcross||O.MergeDown)&&(K=j+(parseInt(O.MergeAcross,10)|0),le=q+(parseInt(O.MergeDown,10)|0),(K>j||le>q)&&ce.push({s:{c:j,r:q},e:{c:K,r:le}})),!_.sheetStubs)O.MergeAcross?j=K+1:++j;else if(O.MergeAcross||O.MergeDown){for(var ye=j;ye<=K;++ye)for(var Ee=q;Ee<=le;++Ee)(ye>j||Ee>q)&&(_.dense?(V["!data"][Ee]||(V["!data"][Ee]=[]),V["!data"][Ee][ye]={t:"z"}):V[encode_col(ye)+encode_row(Ee)]={t:"z"});j=K+1}else++j;else O=xlml_parsexmltagobj(T[0]),O.Index&&(j=+O.Index-1),j<H.s.c&&(H.s.c=j),j>H.e.c&&(H.e.c=j),T[0].slice(-2)==="/>"&&++j,U=[];break;case"row":T[1]==="/"||T[0].slice(-2)==="/>"?(q<H.s.r&&(H.s.r=q),q>H.e.r&&(H.e.r=q),T[0].slice(-2)==="/>"&&(F=xlml_parsexmltag(T[0]),F.Index&&(q=+F.Index-1)),j=0,++q):(F=xlml_parsexmltag(T[0]),F.Index&&(q=+F.Index-1),te={},(F.AutoFitHeight=="0"||F.Height)&&(te.hpx=parseInt(F.Height,10),te.hpt=px2pt(te.hpx),ne[q]=te),F.Hidden=="1"&&(te.hidden=!0,ne[q]=te));break;case"worksheet":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"));N.push(D),H.s.r<=H.e.r&&H.s.c<=H.e.c&&(V["!ref"]=encode_range(H),_.sheetRows&&_.sheetRows<=H.e.r&&(V["!fullref"]=V["!ref"],H.e.r=_.sheetRows-1,V["!ref"]=encode_range(H))),ce.length&&(V["!merges"]=ce),ee.length>0&&(V["!cols"]=ee),ne.length>0&&(V["!rows"]=ne),I[D]=V}else H={s:{r:2e6,c:2e6},e:{r:0,c:0}},q=j=0,B.push([T[3],!1]),A=xlml_parsexmltag(T[0]),D=unescapexml(A.Name),V={},_.dense&&(V["!data"]=[]),ce=[],ie=[],ne=[],be={name:D,Hidden:0},ue.Sheets.push(be);break;case"table":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"))}else{if(T[0].slice(-2)=="/>")break;B.push([T[3],!1]),ee=[],oe=!1}break;case"style":T[1]==="/"?process_style_xlml(X,J,_):J=xlml_parsexmltag(T[0]);break;case"numberformat":J.nf=unescapexml(xlml_parsexmltag(T[0]).Format||"General"),XLMLFormatMap[J.nf]&&(J.nf=XLMLFormatMap[J.nf]);for(var Re=0;Re!=392&&table_fmt[Re]!=J.nf;++Re);if(Re==392){for(Re=57;Re!=392;++Re)if(table_fmt[Re]==null){SSF__load(J.nf,Re);break}}break;case"column":if(B[B.length-1][0]!=="table"||T[1]==="/")break;if(re=xlml_parsexmltag(T[0]),re.Hidden&&(re.hidden=!0,delete re.Hidden),re.Width&&(re.wpx=parseInt(re.Width,10)),!oe&&re.wpx>10){oe=!0,MDW=DEF_MDW;for(var Ne=0;Ne<ee.length;++Ne)ee[Ne]&&process_col(ee[Ne])}oe&&process_col(re),ee[re.Index-1||ee.length]=re;for(var Te=0;Te<+re.Span;++Te)ee[ee.length]=dup(re);break;case"namedrange":if(T[1]==="/")break;ue.Names||(ue.Names=[]);var he=parsexmltag(T[0]),xe={Name:xlml_prefix_dname(he.Name),Ref:rc_to_a1(he.RefersTo.slice(1),{r:0,c:0})};ue.Sheets.length>0&&(xe.Sheet=ue.Sheets.length-1),ue.Names.push(xe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(T[0].slice(-2)==="/>")break;T[1]==="/"?Z+=x.slice(ae,T.index):ae=T.index+T[0].length;break;case"interior":if(!_.cellStyles)break;J.Interior=xlml_parsexmltag(T[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(T[0].slice(-2)==="/>")break;T[1]==="/"?xlml_set_prop(ve,ge,x.slice(G,T.index)):G=T.index+T[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"))}else B.push([T[3],!1]);break;case"comment":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"));xlml_clean_comment(W),U.push(W)}else B.push([T[3],!1]),A=xlml_parsexmltag(T[0]),W={a:A.Author};break;case"autofilter":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"))}else if(T[0].charAt(T[0].length-2)!=="/"){var fe=xlml_parsexmltag(T[0]);V["!autofilter"]={ref:rc_to_a1(fe.Range).replace(/\$/g,"")},B.push([T[3],!0])}break;case"name":break;case"datavalidation":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"))}else T[0].charAt(T[0].length-2)!=="/"&&B.push([T[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"))}else T[0].charAt(T[0].length-2)!=="/"&&B.push([T[3],!0]);break;case"null":break;default:if(B.length==0&&T[3]=="document"||B.length==0&&T[3]=="uof")return parse_fods(x,_);var Be=!0;switch(B[B.length-1][0]){case"officedocumentsettings":switch(T[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Be=!1}break;case"componentoptions":switch(T[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Be=!1}break;case"excelworkbook":switch(T[3]){case"date1904":ue.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Be=!1}break;case"workbookoptions":switch(T[3]){case"owcversion":break;case"height":break;case"width":break;default:Be=!1}break;case"worksheetoptions":switch(T[3]){case"visible":if(T[0].slice(-2)!=="/>")if(T[1]==="/")switch(x.slice(G,T.index)){case"SheetHidden":be.Hidden=1;break;case"SheetVeryHidden":be.Hidden=2;break}else G=T.index+T[0].length;break;case"header":V["!margins"]||default_margins(V["!margins"]={},"xlml"),isNaN(+parsexmltag(T[0]).Margin)||(V["!margins"].header=+parsexmltag(T[0]).Margin);break;case"footer":V["!margins"]||default_margins(V["!margins"]={},"xlml"),isNaN(+parsexmltag(T[0]).Margin)||(V["!margins"].footer=+parsexmltag(T[0]).Margin);break;case"pagemargins":var Le=parsexmltag(T[0]);V["!margins"]||default_margins(V["!margins"]={},"xlml"),isNaN(+Le.Top)||(V["!margins"].top=+Le.Top),isNaN(+Le.Left)||(V["!margins"].left=+Le.Left),isNaN(+Le.Right)||(V["!margins"].right=+Le.Right),isNaN(+Le.Bottom)||(V["!margins"].bottom=+Le.Bottom);break;case"displayrighttoleft":ue.Views||(ue.Views=[]),ue.Views[0]||(ue.Views[0]={}),ue.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":V["!outline"]||(V["!outline"]={}),V["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":V["!outline"]||(V["!outline"]={}),V["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Be=!1}break;case"pivottable":case"pivotcache":switch(T[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Be=!1}break;case"pagebreaks":switch(T[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Be=!1}break;case"autofilter":switch(T[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Be=!1}break;case"querytable":switch(T[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Be=!1}break;case"datavalidation":switch(T[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Be=!1}break;case"sorting":case"conditionalformatting":switch(T[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Be=!1}break;case"mapinfo":case"schema":case"data":switch(T[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Be=!1}break;case"smarttags":break;default:Be=!1;break}if(Be||T[3].match(/!\[CDATA/))break;if(!B[B.length-1][1])throw"Unrecognized tag: "+T[3]+"|"+B.join("|");if(B[B.length-1][0]==="customdocumentproperties"){if(T[0].slice(-2)==="/>")break;T[1]==="/"?xlml_set_custprop(pe,ge,Y,x.slice(G,T.index)):(Y=T,G=T.index+T[0].length);break}if(_.WTF)throw"Unrecognized tag: "+T[3]+"|"+B.join("|")}var Ve={};return!_.bookSheets&&!_.bookProps&&(Ve.Sheets=I),Ve.SheetNames=N,Ve.Workbook=ue,Ve.SSF=dup(table_fmt),Ve.Props=ve,Ve.Custprops=pe,Ve.bookType="xlml",Ve}function parse_xlml(r,n){switch(fix_read_opts(n=n||{}),n.type||"base64"){case"base64":return parse_xlml_xml(Base64_decode(r),n);case"binary":case"buffer":case"file":return parse_xlml_xml(r,n);case"array":return parse_xlml_xml(a2s(r),n)}}function write_props_xlml(r,n){var _=[];return r.Props&&_.push(xlml_write_docprops(r.Props,n)),r.Custprops&&_.push(xlml_write_custprops(r.Props,r.Custprops)),_.join("")}function write_wb_xlml(r){return(((r||{}).Workbook||{}).WBProps||{}).date1904?'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"><Date1904/></ExcelWorkbook>':""}function write_sty_xlml(r,n){var _=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return n.cellXfs.forEach(function(x,S){var E=[];E.push(writextag("NumberFormat",null,{"ss:Format":escapexml(table_fmt[x.numFmtId])}));var C={"ss:ID":"s"+(21+S)};_.push(writextag("Style",E.join(""),C))}),writextag("Styles",_.join(""))}function write_name_xlml(r){return writextag("NamedRange",null,{"ss:Name":r.Name.slice(0,6)=="_xlnm."?r.Name.slice(6):r.Name,"ss:RefersTo":"="+a1_to_rc(r.Ref,{r:0,c:0})})}function write_names_xlml(r){if(!((r||{}).Workbook||{}).Names)return"";for(var n=r.Workbook.Names,_=[],x=0;x<n.length;++x){var S=n[x];S.Sheet==null&&(S.Name.match(/^_xlfn\./)||_.push(write_name_xlml(S)))}return writextag("Names",_.join(""))}function write_ws_xlml_names(r,n,_,x){if(!r||!((x||{}).Workbook||{}).Names)return"";for(var S=x.Workbook.Names,E=[],C=0;C<S.length;++C){var T=S[C];T.Sheet==_&&(T.Name.match(/^_xlfn\./)||E.push(write_name_xlml(T)))}return E.join("")}function write_ws_xlml_wsopts(r,n,_,x){if(!r)return"";var S=[];if(r["!margins"]&&(S.push("<PageSetup>"),r["!margins"].header&&S.push(writextag("Header",null,{"x:Margin":r["!margins"].header})),r["!margins"].footer&&S.push(writextag("Footer",null,{"x:Margin":r["!margins"].footer})),S.push(writextag("PageMargins",null,{"x:Bottom":r["!margins"].bottom||"0.75","x:Left":r["!margins"].left||"0.7","x:Right":r["!margins"].right||"0.7","x:Top":r["!margins"].top||"0.75"})),S.push("</PageSetup>")),x&&x.Workbook&&x.Workbook.Sheets&&x.Workbook.Sheets[_])if(x.Workbook.Sheets[_].Hidden)S.push(writextag("Visible",x.Workbook.Sheets[_].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var E=0;E<_&&!(x.Workbook.Sheets[E]&&!x.Workbook.Sheets[E].Hidden);++E);E==_&&S.push("<Selected/>")}return((((x||{}).Workbook||{}).Views||[])[0]||{}).RTL&&S.push("<DisplayRightToLeft/>"),r["!protect"]&&(S.push(writetag("ProtectContents","True")),r["!protect"].objects&&S.push(writetag("ProtectObjects","True")),r["!protect"].scenarios&&S.push(writetag("ProtectScenarios","True")),r["!protect"].selectLockedCells!=null&&!r["!protect"].selectLockedCells?S.push(writetag("EnableSelection","NoSelection")):r["!protect"].selectUnlockedCells!=null&&!r["!protect"].selectUnlockedCells&&S.push(writetag("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(C){r["!protect"][C[0]]&&S.push("<"+C[1]+"/>")})),S.length==0?"":writextag("WorksheetOptions",S.join(""),{xmlns:XLMLNS.x})}function write_ws_xlml_comment(r){return r.map(function(n){var _=xlml_unfixstr(n.t||""),x=writextag("ss:Data",_,{xmlns:"http://www.w3.org/TR/REC-html40"});return writextag("Comment",x,{"ss:Author":n.a})}).join("")}function write_ws_xlml_cell(r,n,_,x,S,E,C){if(!r||r.v==null&&r.f==null)return"";var T={};if(r.f&&(T["ss:Formula"]="="+escapexml(a1_to_rc(r.f,C))),r.F&&r.F.slice(0,n.length)==n){var B=decode_cell(r.F.slice(n.length+1));T["ss:ArrayRange"]="RC:R"+(B.r==C.r?"":"["+(B.r-C.r)+"]")+"C"+(B.c==C.c?"":"["+(B.c-C.c)+"]")}if(r.l&&r.l.Target&&(T["ss:HRef"]=escapexml(r.l.Target),r.l.Tooltip&&(T["x:HRefScreenTip"]=escapexml(r.l.Tooltip))),_["!merges"])for(var A=_["!merges"],I=0;I!=A.length;++I)A[I].s.c!=C.c||A[I].s.r!=C.r||(A[I].e.c>A[I].s.c&&(T["ss:MergeAcross"]=A[I].e.c-A[I].s.c),A[I].e.r>A[I].s.r&&(T["ss:MergeDown"]=A[I].e.r-A[I].s.r));var N="",V="";switch(r.t){case"z":if(!x.sheetStubs)return"";break;case"n":N="Number",V=String(r.v);break;case"b":N="Boolean",V=r.v?"1":"0";break;case"e":N="Error",V=BErr[r.v];break;case"d":N="DateTime",V=new Date(r.v).toISOString(),r.z==null&&(r.z=r.z||table_fmt[14]);break;case"s":N="String",V=escapexlml(r.v||"");break}var D=get_cell_style(x.cellXfs,r,x);T["ss:StyleID"]="s"+(21+D),T["ss:Index"]=C.c+1;var O=r.v!=null?V:"",F=r.t=="z"?"":'<Data ss:Type="'+N+'">'+O+"</Data>";return(r.c||[]).length>0&&(F+=write_ws_xlml_comment(r.c)),writextag("Cell",F,T)}function write_ws_xlml_row(r,n){var _='<Row ss:Index="'+(r+1)+'"';return n&&(n.hpt&&!n.hpx&&(n.hpx=pt2px(n.hpt)),n.hpx&&(_+=' ss:AutoFitHeight="0" ss:Height="'+n.hpx+'"'),n.hidden&&(_+=' ss:Hidden="1"')),_+">"}function write_ws_xlml_table(r,n,_,x){if(!r["!ref"])return"";var S=safe_decode_range(r["!ref"]),E=r["!merges"]||[],C=0,T=[];r["!cols"]&&r["!cols"].forEach(function(M,L){process_col(M);var j=!!M.width,q=col_obj_w(L,M),H={"ss:Index":L+1};j&&(H["ss:Width"]=width2px(q.width)),M.hidden&&(H["ss:Hidden"]="1"),T.push(writextag("Column",null,H))});for(var B=r["!data"]!=null,A=S.s.r;A<=S.e.r;++A){for(var I=[write_ws_xlml_row(A,(r["!rows"]||[])[A])],N=S.s.c;N<=S.e.c;++N){var V=!1;for(C=0;C!=E.length;++C)if(!(E[C].s.c>N)&&!(E[C].s.r>A)&&!(E[C].e.c<N)&&!(E[C].e.r<A)){(E[C].s.c!=N||E[C].s.r!=A)&&(V=!0);break}if(!V){var D={r:A,c:N},O=encode_col(N)+encode_row(A),F=B?(r["!data"][A]||[])[N]:r[O];I.push(write_ws_xlml_cell(F,O,r,n,_,x,D))}}I.push("</Row>"),I.length>2&&T.push(I.join(""))}return T.join("")}function write_ws_xlml(r,n,_){var x=[],S=_.SheetNames[r],E=_.Sheets[S],C=E?write_ws_xlml_names(E,n,r,_):"";return C.length>0&&x.push("<Names>"+C+"</Names>"),C=E?write_ws_xlml_table(E,n,r,_):"",C.length>0&&x.push("<Table>"+C+"</Table>"),x.push(write_ws_xlml_wsopts(E,n,r,_)),E["!autofilter"]&&x.push('<AutoFilter x:Range="'+a1_to_rc(fix_range(E["!autofilter"].ref),{r:0,c:0})+'" xmlns="urn:schemas-microsoft-com:office:excel"></AutoFilter>'),x.join("")}function write_xlml(r,n){n||(n={}),r.SSF||(r.SSF=dup(table_fmt)),r.SSF&&(make_ssf(),SSF_load_table(r.SSF),n.revssf=evert_num(r.SSF),n.revssf[r.SSF[65535]]=0,n.ssf=r.SSF,n.cellXfs=[],get_cell_style(n.cellXfs,{},{revssf:{General:0}}));var _=[];_.push(write_props_xlml(r,n)),_.push(write_wb_xlml(r)),_.push(""),_.push("");for(var x=0;x<r.SheetNames.length;++x)_.push(writextag("Worksheet",write_ws_xlml(x,n,r),{"ss:Name":escapexml(r.SheetNames[x])}));return _[2]=write_sty_xlml(r,n),_[3]=write_names_xlml(r),XML_HEADER+writextag("Workbook",_.join(""),{xmlns:XLMLNS.ss,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:ss":XLMLNS.ss,"xmlns:dt":XLMLNS.dt,"xmlns:html":XLMLNS.html})}function parse_compobj(r){var n={},_=r.content;if(_.l=28,n.AnsiUserType=_.read_shift(0,"lpstr-ansi"),n.AnsiClipboardFormat=parse_ClipboardFormatOrAnsiString(_),_.length-_.l<=4)return n;var x=_.read_shift(4);if(x==0||x>40||(_.l-=4,n.Reserved1=_.read_shift(0,"lpstr-ansi"),_.length-_.l<=4)||(x=_.read_shift(4),x!==1907505652)||(n.UnicodeClipboardFormat=parse_ClipboardFormatOrUnicodeString(_),x=_.read_shift(4),x==0||x>40))return n;_.l-=4,n.Reserved2=_.read_shift(0,"lpwstr")}var CONTINUE_RT=[60,1084,2066,2165,2175];function slurp(r,n,_,x,S){var E=x,C=[],T=_.slice(_.l,_.l+E);if(S&&S.enc&&S.enc.insitu&&T.length>0)switch(r){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:S.enc.insitu(T)}C.push(T),_.l+=E;for(var B=__readUInt16LE(_,_.l),A=XLSRecordEnum[B],I=0;A!=null&&CONTINUE_RT.indexOf(B)>-1;)E=__readUInt16LE(_,_.l+2),I=_.l+4,B==2066?I+=4:(B==2165||B==2175)&&(I+=12),T=_.slice(I,_.l+4+E),C.push(T),_.l+=4+E,A=XLSRecordEnum[B=__readUInt16LE(_,_.l)];var N=bconcat(C);prep_blob(N,0);var V=0;N.lens=[];for(var D=0;D<C.length;++D)N.lens.push(V),V+=C[D].length;if(N.length<x)throw"XLS Record 0x"+r.toString(16)+" Truncated: "+N.length+" < "+x;return n.f(N,N.length,S)}function safe_format_xf(r,n,_){if(r.t!=="z"&&r.XF){var x=0;try{x=r.z||r.XF.numFmtId||0,n.cellNF&&(r.z=table_fmt[x])}catch(E){if(n.WTF)throw E}if(!n||n.cellText!==!1)try{r.t==="e"?r.w=r.w||BErr[r.v]:x===0||x=="General"?r.t==="n"?(r.v|0)===r.v?r.w=r.v.toString(10):r.w=SSF_general_num(r.v):r.w=SSF_general(r.v):r.w=SSF_format(x,r.v,{date1904:!!_,dateNF:n&&n.dateNF})}catch(E){if(n.WTF)throw E}if(n.cellDates&&x&&r.t=="n"&&fmt_is_date(table_fmt[x]||String(x))){var S=SSF_parse_date_code(r.v);S&&(r.t="d",r.v=new Date(S.y,S.m-1,S.d,S.H,S.M,S.S,S.u))}}}function make_cell(r,n,_){return{v:r,ixfe:n,t:_}}function parse_workbook(r,n){var _={opts:{}},x={},S={};n.dense&&(S["!data"]=[]);var E={},C={},T=null,B=[],A="",I={},N,V="",D,O,F,M,L={},j=[],q,H,X=[],J=[],Z={Sheets:[],WBProps:{date1904:!1},Views:[{}]},ae={},ce=function(ze){return ze<8?XLSIcv[ze]:ze<64&&J[ze-8]||XLSIcv[ze]},ve=function(ze,Ze,st){var rt=Ze.XF.data;if(!(!rt||!rt.patternType||!st||!st.cellStyles)){Ze.s={},Ze.s.patternType=rt.patternType;var Ft;(Ft=rgb2Hex(ce(rt.icvFore)))&&(Ze.s.fgColor={rgb:Ft}),(Ft=rgb2Hex(ce(rt.icvBack)))&&(Ze.s.bgColor={rgb:Ft})}},pe=function(ze,Ze,st){if(!(te>1)&&!(st.sheetRows&&ze.r>=st.sheetRows)){if(st.cellStyles&&Ze.XF&&Ze.XF.data&&ve(ze,Ze,st),delete Ze.ixfe,delete Ze.XF,N=ze,V=encode_cell(ze),(!C||!C.s||!C.e)&&(C={s:{r:0,c:0},e:{r:0,c:0}}),ze.r<C.s.r&&(C.s.r=ze.r),ze.c<C.s.c&&(C.s.c=ze.c),ze.r+1>C.e.r&&(C.e.r=ze.r+1),ze.c+1>C.e.c&&(C.e.c=ze.c+1),st.cellFormula&&Ze.f){for(var rt=0;rt<j.length;++rt)if(!(j[rt][0].s.c>ze.c||j[rt][0].s.r>ze.r)&&!(j[rt][0].e.c<ze.c||j[rt][0].e.r<ze.r)){Ze.F=encode_range(j[rt][0]),(j[rt][0].s.c!=ze.c||j[rt][0].s.r!=ze.r)&&delete Ze.f,Ze.f&&(Ze.f=""+stringify_formula(j[rt][1],C,ze,ie,G));break}}st.dense?(S["!data"][ze.r]||(S["!data"][ze.r]=[]),S["!data"][ze.r][ze.c]=Ze):S[V]=Ze}},G={enc:!1,sbcch:0,snames:[],sharedf:L,arrayf:j,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!n&&!!n.cellStyles,WTF:!!n&&!!n.wtf};n.password&&(G.password=n.password);var Y,U=[],W=[],ee=[],re=[],oe=!1,ie=[];ie.SheetNames=G.snames,ie.sharedf=G.sharedf,ie.arrayf=G.arrayf,ie.names=[],ie.XTI=[];var ne=0,te=0,K=0,le=[],ue=[],be;G.codepage=1200,set_cp(1200);for(var ge=!1;r.l<r.length-1;){var ye=r.l,Ee=r.read_shift(2);if(Ee===0&&ne===10)break;var Re=r.l===r.length?0:r.read_shift(2),Ne=XLSRecordEnum[Ee];if(te==0&&[9,521,1033,2057].indexOf(Ee)==-1)break;if(Ne&&Ne.f){if(n.bookSheets&&ne===133&&Ee!==133)break;if(ne=Ee,Ne.r===2||Ne.r==12){var Te=r.read_shift(2);if(Re-=2,!G.enc&&Te!==Ee&&((Te&255)<<8|Te>>8)!==Ee)throw new Error("rt mismatch: "+Te+"!="+Ee);Ne.r==12&&(r.l+=10,Re-=10)}var he={};if(Ee===10?he=Ne.f(r,Re,G):he=slurp(Ee,Ne,r,Re,G),te==0&&[9,521,1033,2057].indexOf(ne)===-1)continue;switch(Ee){case 34:_.opts.Date1904=Z.WBProps.date1904=he;break;case 134:_.opts.WriteProtect=!0;break;case 47:if(G.enc||(r.l=0),G.enc=he,!n.password)throw new Error("File is password-protected");if(he.valid==null)throw new Error("Encryption scheme unsupported");if(!he.valid)throw new Error("Password is incorrect");break;case 92:G.lastuser=he;break;case 66:var xe=Number(he);switch(xe){case 21010:xe=1200;break;case 32768:xe=1e4;break;case 32769:xe=1252;break}set_cp(G.codepage=xe),ge=!0;break;case 317:G.rrtabid=he;break;case 25:G.winlocked=he;break;case 439:_.opts.RefreshAll=he;break;case 12:_.opts.CalcCount=he;break;case 16:_.opts.CalcDelta=he;break;case 17:_.opts.CalcIter=he;break;case 13:_.opts.CalcMode=he;break;case 14:_.opts.CalcPrecision=he;break;case 95:_.opts.CalcSaveRecalc=he;break;case 15:G.CalcRefMode=he;break;case 2211:_.opts.FullCalc=he;break;case 129:he.fDialog&&(S["!type"]="dialog"),he.fBelow||((S["!outline"]||(S["!outline"]={})).above=!0),he.fRight||((S["!outline"]||(S["!outline"]={})).left=!0);break;case 224:X.push(he);break;case 430:ie.push([he]),ie[ie.length-1].XTI=[];break;case 35:case 547:ie[ie.length-1].push(he);break;case 24:case 536:be={Name:he.Name,Ref:stringify_formula(he.rgce,C,null,ie,G)},he.itab>0&&(be.Sheet=he.itab-1),ie.names.push(be),ie[0]||(ie[0]=[],ie[0].XTI=[]),ie[ie.length-1].push(he),he.Name=="_xlnm._FilterDatabase"&&he.itab>0&&he.rgce&&he.rgce[0]&&he.rgce[0][0]&&he.rgce[0][0][0]=="PtgArea3d"&&(ue[he.itab-1]={ref:encode_range(he.rgce[0][0][1][2])});break;case 22:G.ExternCount=he;break;case 23:ie.length==0&&(ie[0]=[],ie[0].XTI=[]),ie[ie.length-1].XTI=ie[ie.length-1].XTI.concat(he),ie.XTI=ie.XTI.concat(he);break;case 2196:if(G.biff<8)break;be!=null&&(be.Comment=he[1]);break;case 18:S["!protect"]=he;break;case 19:he!==0&&G.WTF&&console.error("Password verifier: "+he);break;case 133:E[he.pos]=he,G.snames.push(he.name);break;case 10:{if(--te)break;if(C.e){if(C.e.r>0&&C.e.c>0){if(C.e.r--,C.e.c--,S["!ref"]=encode_range(C),n.sheetRows&&n.sheetRows<=C.e.r){var fe=C.e.r;C.e.r=n.sheetRows-1,S["!fullref"]=S["!ref"],S["!ref"]=encode_range(C),C.e.r=fe}C.e.r++,C.e.c++}U.length>0&&(S["!merges"]=U),W.length>0&&(S["!objects"]=W),ee.length>0&&(S["!cols"]=ee),re.length>0&&(S["!rows"]=re),Z.Sheets.push(ae)}A===""?I=S:x[A]=S,S={},n.dense&&(S["!data"]=[])}break;case 9:case 521:case 1033:case 2057:{if(G.biff===8&&(G.biff={9:2,521:3,1033:4}[Ee]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[he.BIFFVer]||8),G.biffguess=he.BIFFVer==0,he.BIFFVer==0&&he.dt==4096&&(G.biff=5,ge=!0,set_cp(G.codepage=28591)),G.biff==8&&he.BIFFVer==0&&he.dt==16&&(G.biff=2),te++)break;if(S={},n.dense&&(S["!data"]=[]),G.biff<8&&!ge&&(ge=!0,set_cp(G.codepage=n.codepage||1252)),G.biff<5||he.BIFFVer==0&&he.dt==4096){A===""&&(A="Sheet1"),C={s:{r:0,c:0},e:{r:0,c:0}};var Be={pos:r.l-Re,name:A};E[Be.pos]=Be,G.snames.push(A)}else A=(E[ye]||{name:""}).name;he.dt==32&&(S["!type"]="chart"),he.dt==64&&(S["!type"]="macro"),U=[],W=[],G.arrayf=j=[],ee=[],re=[],oe=!1,ae={Hidden:(E[ye]||{hs:0}).hs,name:A}}break;case 515:case 3:case 2:S["!type"]=="chart"&&(n.dense?(S["!data"][he.r]||[])[he.c]:S[encode_col(he.c)+encode_row(he.r)])&&++he.c,q={ixfe:he.ixfe,XF:X[he.ixfe]||{},v:he.val,t:"n"},K>0&&(q.z=le[q.ixfe>>8&63]),safe_format_xf(q,n,_.opts.Date1904),pe({c:he.c,r:he.r},q,n);break;case 5:case 517:q={ixfe:he.ixfe,XF:X[he.ixfe],v:he.val,t:he.t},K>0&&(q.z=le[q.ixfe>>8&63]),safe_format_xf(q,n,_.opts.Date1904),pe({c:he.c,r:he.r},q,n);break;case 638:q={ixfe:he.ixfe,XF:X[he.ixfe],v:he.rknum,t:"n"},K>0&&(q.z=le[q.ixfe>>8&63]),safe_format_xf(q,n,_.opts.Date1904),pe({c:he.c,r:he.r},q,n);break;case 189:for(var Le=he.c;Le<=he.C;++Le){var Ve=he.rkrec[Le-he.c][0];q={ixfe:Ve,XF:X[Ve],v:he.rkrec[Le-he.c][1],t:"n"},K>0&&(q.z=le[q.ixfe>>8&63]),safe_format_xf(q,n,_.opts.Date1904),pe({c:Le,r:he.r},q,n)}break;case 6:case 518:case 1030:{if(he.val=="String"){T=he;break}if(q=make_cell(he.val,he.cell.ixfe,he.tt),q.XF=X[q.ixfe],n.cellFormula){var Ie=he.formula;if(Ie&&Ie[0]&&Ie[0][0]&&Ie[0][0][0]=="PtgExp"){var Me=Ie[0][0][1][0],He=Ie[0][0][1][1],We=encode_cell({r:Me,c:He});L[We]?q.f=""+stringify_formula(he.formula,C,he.cell,ie,G):q.F=((n.dense?(S["!data"][Me]||[])[He]:S[We])||{}).F}else q.f=""+stringify_formula(he.formula,C,he.cell,ie,G)}K>0&&(q.z=le[q.ixfe>>8&63]),safe_format_xf(q,n,_.opts.Date1904),pe(he.cell,q,n),T=he}break;case 7:case 519:if(T)T.val=he,q=make_cell(he,T.cell.ixfe,"s"),q.XF=X[q.ixfe],n.cellFormula&&(q.f=""+stringify_formula(T.formula,C,T.cell,ie,G)),K>0&&(q.z=le[q.ixfe>>8&63]),safe_format_xf(q,n,_.opts.Date1904),pe(T.cell,q,n),T=null;else throw new Error("String record expects Formula");break;case 33:case 545:{j.push(he);var Ue=encode_cell(he[0].s);if(D=n.dense?(S["!data"][he[0].s.r]||[])[he[0].s.c]:S[Ue],n.cellFormula&&D){if(!T||!Ue||!D)break;D.f=""+stringify_formula(he[1],C,he[0],ie,G),D.F=encode_range(he[0])}}break;case 1212:{if(!n.cellFormula)break;if(V){if(!T)break;L[encode_cell(T.cell)]=he[0],D=n.dense?(S["!data"][T.cell.r]||[])[T.cell.c]:S[encode_cell(T.cell)],(D||{}).f=""+stringify_formula(he[0],C,N,ie,G)}}break;case 253:q=make_cell(B[he.isst].t,he.ixfe,"s"),B[he.isst].h&&(q.h=B[he.isst].h),q.XF=X[q.ixfe],K>0&&(q.z=le[q.ixfe>>8&63]),safe_format_xf(q,n,_.opts.Date1904),pe({c:he.c,r:he.r},q,n);break;case 513:n.sheetStubs&&(q={ixfe:he.ixfe,XF:X[he.ixfe],t:"z"},K>0&&(q.z=le[q.ixfe>>8&63]),safe_format_xf(q,n,_.opts.Date1904),pe({c:he.c,r:he.r},q,n));break;case 190:if(n.sheetStubs)for(var Ge=he.c;Ge<=he.C;++Ge){var et=he.ixfe[Ge-he.c];q={ixfe:et,XF:X[et],t:"z"},K>0&&(q.z=le[q.ixfe>>8&63]),safe_format_xf(q,n,_.opts.Date1904),pe({c:Ge,r:he.r},q,n)}break;case 214:case 516:case 4:q=make_cell(he.val,he.ixfe,"s"),q.XF=X[q.ixfe],K>0&&(q.z=le[q.ixfe>>8&63]),safe_format_xf(q,n,_.opts.Date1904),pe({c:he.c,r:he.r},q,n);break;case 0:case 512:te===1&&(C=he);break;case 252:B=he;break;case 1054:if(G.biff==4){le[K++]=he[1];for(var ot=0;ot<K+163&&table_fmt[ot]!=he[1];++ot);ot>=163&&SSF__load(he[1],K+163)}else SSF__load(he[1],he[0]);break;case 30:{le[K++]=he;for(var ht=0;ht<K+163&&table_fmt[ht]!=he;++ht);ht>=163&&SSF__load(he,K+163)}break;case 229:U=U.concat(he);break;case 93:W[he.cmo[0]]=G.lastobj=he;break;case 438:G.lastobj.TxO=he;break;case 127:G.lastobj.ImData=he;break;case 440:for(M=he[0].s.r;M<=he[0].e.r;++M)for(F=he[0].s.c;F<=he[0].e.c;++F)D=n.dense?(S["!data"][M]||[])[F]:S[encode_cell({c:F,r:M})],D&&(D.l=he[1]);break;case 2048:for(M=he[0].s.r;M<=he[0].e.r;++M)for(F=he[0].s.c;F<=he[0].e.c;++F)D=n.dense?(S["!data"][M]||[])[F]:S[encode_cell({c:F,r:M})],D&&D.l&&(D.l.Tooltip=he[1]);break;case 28:{if(G.biff<=5&&G.biff>=2)break;D=n.dense?(S["!data"][he[0].r]||[])[he[0].c]:S[encode_cell(he[0])];var Oe=W[he[2]];D||(n.dense?(S["!data"][he[0].r]||(S["!data"][he[0].r]=[]),D=S["!data"][he[0].r][he[0].c]={t:"z"}):D=S[encode_cell(he[0])]={t:"z"},C.e.r=Math.max(C.e.r,he[0].r),C.s.r=Math.min(C.s.r,he[0].r),C.e.c=Math.max(C.e.c,he[0].c),C.s.c=Math.min(C.s.c,he[0].c)),D.c||(D.c=[]),O={a:he[1],t:Oe.TxO.t},D.c.push(O)}break;case 2173:update_xfext(X[he.ixfe],he.ext);break;case 125:{if(!G.cellStyles)break;for(;he.e>=he.s;)ee[he.e--]={width:he.w/256,level:he.level||0,hidden:!!(he.flags&1)},oe||(oe=!0,find_mdw_colw(he.w/256)),process_col(ee[he.e+1])}break;case 520:{var we={};he.level!=null&&(re[he.r]=we,we.level=he.level),he.hidden&&(re[he.r]=we,we.hidden=!0),he.hpt&&(re[he.r]=we,we.hpt=he.hpt,we.hpx=pt2px(he.hpt))}break;case 38:case 39:case 40:case 41:S["!margins"]||default_margins(S["!margins"]={}),S["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Ee]]=he;break;case 161:S["!margins"]||default_margins(S["!margins"]={}),S["!margins"].header=he.header,S["!margins"].footer=he.footer;break;case 574:he.RTL&&(Z.Views[0].RTL=!0);break;case 146:J=he;break;case 2198:Y=he;break;case 140:H=he;break;case 442:A?ae.CodeName=he||ae.name:Z.WBProps.CodeName=he||"ThisWorkbook";break}}else Ne||console.error("Missing Info for XLS Record 0x"+Ee.toString(16)),r.l+=Re}return _.SheetNames=keys(E).sort(function(Ce,ze){return Number(Ce)-Number(ze)}).map(function(Ce){return E[Ce].name}),n.bookSheets||(_.Sheets=x),!_.SheetNames.length&&I["!ref"]?(_.SheetNames.push("Sheet1"),_.Sheets&&(_.Sheets.Sheet1=I)):_.Preamble=I,_.Sheets&&ue.forEach(function(Ce,ze){_.Sheets[_.SheetNames[ze]]["!autofilter"]=Ce}),_.Strings=B,_.SSF=dup(table_fmt),G.enc&&(_.Encryption=G.enc),Y&&(_.Themes=Y),_.Metadata={},H!==void 0&&(_.Metadata.Country=H),ie.names.length>0&&(Z.Names=ie.names),_.Workbook=Z,_}var PSCLSID={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function parse_xls_props(r,n,_){var x=CFB.find(r,"/!DocumentSummaryInformation");if(x&&x.size>0)try{var S=parse_PropertySetStream(x,DocSummaryPIDDSI,PSCLSID.DSI);for(var E in S)n[E]=S[E]}catch(A){if(_.WTF)throw A}var C=CFB.find(r,"/!SummaryInformation");if(C&&C.size>0)try{var T=parse_PropertySetStream(C,SummaryPIDSI,PSCLSID.SI);for(var B in T)n[B]==null&&(n[B]=T[B])}catch(A){if(_.WTF)throw A}n.HeadingPairs&&n.TitlesOfParts&&(load_props_pairs(n.HeadingPairs,n.TitlesOfParts,n,_),delete n.HeadingPairs,delete n.TitlesOfParts)}function write_xls_props(r,n){var _=[],x=[],S=[],E=0,C,T=evert_key(DocSummaryPIDDSI,"n"),B=evert_key(SummaryPIDSI,"n");if(r.Props)for(C=keys(r.Props),E=0;E<C.length;++E)(Object.prototype.hasOwnProperty.call(T,C[E])?_:Object.prototype.hasOwnProperty.call(B,C[E])?x:S).push([C[E],r.Props[C[E]]]);if(r.Custprops)for(C=keys(r.Custprops),E=0;E<C.length;++E)Object.prototype.hasOwnProperty.call(r.Props||{},C[E])||(Object.prototype.hasOwnProperty.call(T,C[E])?_:Object.prototype.hasOwnProperty.call(B,C[E])?x:S).push([C[E],r.Custprops[C[E]]]);var A=[];for(E=0;E<S.length;++E)XLSPSSkip.indexOf(S[E][0])>-1||PseudoPropsPairs.indexOf(S[E][0])>-1||S[E][1]!=null&&A.push(S[E]);x.length&&CFB.utils.cfb_add(n,"/SummaryInformation",write_PropertySetStream(x,PSCLSID.SI,B,SummaryPIDSI)),(_.length||A.length)&&CFB.utils.cfb_add(n,"/DocumentSummaryInformation",write_PropertySetStream(_,PSCLSID.DSI,T,DocSummaryPIDDSI,A.length?A:null,PSCLSID.UDI))}function parse_xlscfb(r,n){n||(n={}),fix_read_opts(n),reset_cp(),n.codepage&&set_ansi(n.codepage);var _,x;if(r.FullPaths){if(CFB.find(r,"/encryption"))throw new Error("File is password-protected");_=CFB.find(r,"!CompObj"),x=CFB.find(r,"/Workbook")||CFB.find(r,"/Book")}else{switch(n.type){case"base64":r=s2a(Base64_decode(r));break;case"binary":r=s2a(r);break;case"buffer":break;case"array":Array.isArray(r)||(r=Array.prototype.slice.call(r));break}prep_blob(r,0),x={content:r}}var S,E;if(_&&parse_compobj(_),n.bookProps&&!n.bookSheets)S={};else{var C=has_buf?"buffer":"array";if(x&&x.content)S=parse_workbook(x.content,n);else if((E=CFB.find(r,"PerfectOffice_MAIN"))&&E.content)S=WK_.to_workbook(E.content,(n.type=C,n));else if((E=CFB.find(r,"NativeContent_MAIN"))&&E.content)S=WK_.to_workbook(E.content,(n.type=C,n));else throw(E=CFB.find(r,"MN0"))&&E.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");n.bookVBA&&r.FullPaths&&CFB.find(r,"/_VBA_PROJECT_CUR/VBA/dir")&&(S.vbaraw=make_vba_xls(r))}var T={};return r.FullPaths&&parse_xls_props(r,T,n),S.Props=S.Custprops=T,n.bookFiles&&(S.cfb=r),S}function write_xlscfb(r,n){var _=n||{},x=CFB.utils.cfb_new({root:"R"}),S="/Workbook";switch(_.bookType||"xls"){case"xls":_.bookType="biff8";case"xla":_.bookType||(_.bookType="xla");case"biff8":S="/Workbook",_.biff=8;break;case"biff5":S="/Book",_.biff=5;break;default:throw new Error("invalid type "+_.bookType+" for XLS CFB")}return CFB.utils.cfb_add(x,S,write_biff_buf(r,_)),_.biff==8&&(r.Props||r.Custprops)&&write_xls_props(r,x),_.biff==8&&r.vbaraw&&fill_vba_xls(x,CFB.read(r.vbaraw,{type:typeof r.vbaraw=="string"?"binary":"buffer"})),x}var XLSBRecordEnum={0:{f:parse_BrtRowHdr},1:{f:parse_BrtCellBlank},2:{f:parse_BrtCellRk},3:{f:parse_BrtCellError},4:{f:parse_BrtCellBool},5:{f:parse_BrtCellReal},6:{f:parse_BrtCellSt},7:{f:parse_BrtCellIsst},8:{f:parse_BrtFmlaString},9:{f:parse_BrtFmlaNum},10:{f:parse_BrtFmlaBool},11:{f:parse_BrtFmlaError},12:{f:parse_BrtShortBlank},13:{f:parse_BrtShortRk},14:{f:parse_BrtShortError},15:{f:parse_BrtShortBool},16:{f:parse_BrtShortReal},17:{f:parse_BrtShortSt},18:{f:parse_BrtShortIsst},19:{f:parse_RichStr},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:parse_BrtName},40:{},42:{},43:{f:parse_BrtFont},44:{f:parse_BrtFmt},45:{f:parse_BrtFill},46:{f:parse_BrtBorder},47:{f:parse_BrtXF},48:{},49:{f:parse_Int32LE},50:{},51:{f:parse_BrtMdb},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:parse_ColInfo},62:{f:parse_BrtCellRString},63:{f:parse_BrtCalcChainItem$},64:{f:parse_BrtDVal},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:parsenoop,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:parse_BrtBeginWsView},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:parse_BrtWsProp},148:{f:parse_BrtWsDim,p:16},151:{f:parse_BrtPane},152:{},153:{f:parse_BrtWbProp},154:{},155:{},156:{f:parse_BrtBundleSh},157:{},158:{},159:{T:1,f:parse_BrtBeginSst},160:{T:-1},161:{T:1,f:parse_UncheckedRfX},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:parse_BrtMergeCell},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:parse_BrtMdtinfo},336:{T:-1},337:{f:parse_BrtBeginEsmdb,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:parse_RelID},357:{},358:{},359:{},360:{T:1},361:{},362:{f:parse_ExternSheet},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:parse_BrtArrFmla},427:{f:parse_BrtShrFmla},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:parse_BrtMargins},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:parse_BrtWsFmtInfo},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:parse_BrtHLink},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:parse_RelID},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:parse_BrtCommentAuthor},633:{T:1},634:{T:-1},635:{T:1,f:parse_BrtBeginComment},636:{T:-1},637:{f:parse_BrtCommentText},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:parse_BrtCsProp},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:parse_BrtDVal14},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},XLSRecordEnum={6:{f:parse_Formula},10:{f:parsenoop2},12:{f:parseuint16},13:{f:parseuint16},14:{f:parsebool},15:{f:parsebool},16:{f:parse_Xnum},17:{f:parsebool},18:{f:parsebool},19:{f:parseuint16},20:{f:parse_XLHeaderFooter},21:{f:parse_XLHeaderFooter},23:{f:parse_ExternSheet},24:{f:parse_Lbl},25:{f:parsebool},26:{},27:{},28:{f:parse_Note},29:{},34:{f:parsebool},35:{f:parse_ExternName},38:{f:parse_Xnum},39:{f:parse_Xnum},40:{f:parse_Xnum},41:{f:parse_Xnum},42:{f:parsebool},43:{f:parsebool},47:{f:parse_FilePass},49:{f:parse_Font},51:{f:parseuint16},60:{},61:{f:parse_Window1},64:{f:parsebool},65:{f:parse_Pane},66:{f:parseuint16},77:{},80:{},81:{},82:{},85:{f:parseuint16},89:{},90:{},91:{},92:{f:parse_WriteAccess},93:{f:parse_Obj},94:{},95:{f:parsebool},96:{},97:{},99:{f:parsebool},125:{f:parse_ColInfo},128:{f:parse_Guts},129:{f:parse_WsBool},130:{f:parseuint16},131:{f:parsebool},132:{f:parsebool},133:{f:parse_BoundSheet8},134:{},140:{f:parse_Country},141:{f:parseuint16},144:{},146:{f:parse_Palette},151:{},152:{},153:{},154:{},155:{},156:{f:parseuint16},157:{},158:{},160:{f:parse_Scl},161:{f:parse_Setup},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:parse_MulRk},190:{f:parse_MulBlank},193:{f:parsenoop2},197:{},198:{},199:{},200:{},201:{},202:{f:parsebool},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:parseuint16},220:{},221:{f:parsebool},222:{},224:{f:parse_XF},225:{f:parse_InterfaceHdr},226:{f:parsenoop2},227:{},229:{f:parse_MergeCells},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:parse_SST},253:{f:parse_LabelSst},255:{f:parse_ExtSST},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:parseuint16a},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:parsebool},353:{f:parsenoop2},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:parse_SupBook},431:{f:parsebool},432:{},433:{},434:{},437:{},438:{f:parse_TxO},439:{f:parsebool},440:{f:parse_HLink},441:{},442:{f:parse_XLUnicodeString},443:{},444:{f:parseuint16},445:{},446:{},448:{f:parsenoop2},449:{f:parse_RecalcId,r:2},450:{f:parsenoop2},512:{f:parse_Dimensions},513:{f:parse_Blank},515:{f:parse_Number},516:{f:parse_Label},517:{f:parse_BoolErr},519:{f:parse_String},520:{f:parse_Row},523:{},545:{f:parse_Array},549:{f:parse_DefaultRowHeight},566:{},574:{f:parse_Window2},638:{f:parse_RK},659:{},1048:{},1054:{f:parse_Format},1084:{},1212:{f:parse_ShrFmla},2048:{f:parse_HLinkTooltip},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:parse_BOF},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:parsenoop2},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:parse_XFCRC,r:12},2173:{f:parse_XFExt,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:parsebool,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:parse_NameCmt,r:12},2197:{},2198:{f:parse_Theme,r:12},2199:{},2200:{},2201:{},2202:{f:parse_MTRSettings,r:12},2203:{f:parsenoop2},2204:{},2205:{},2206:{},2207:{},2211:{f:parse_ForceFullCalculation},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:parseuint16},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:parse_ShtProps},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:parse_ClrtClient},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:parse_Dimensions},1:{},2:{f:parse_BIFF2INT},3:{f:parse_BIFF2NUM},4:{f:parse_BIFF2STR},5:{f:parse_BoolErr},7:{f:parse_BIFF2STRING},8:{},9:{f:parse_BOF},11:{},22:{f:parseuint16},30:{f:parse_BIFF2Format},31:{},32:{},33:{f:parse_Array},36:{},37:{f:parse_DefaultRowHeight},50:{f:parse_BIFF2FONTXTRA},62:{},52:{},67:{},68:{f:parseuint16},69:{},86:{},126:{},127:{f:parse_ImData},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:parse_RString},223:{},234:{},354:{},421:{},518:{f:parse_Formula},521:{f:parse_BOF},536:{f:parse_Lbl},547:{f:parse_ExternName},561:{},579:{},1030:{f:parse_Formula},1033:{f:parse_BOF},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},101:{},102:{},105:{},106:{},107:{},109:{},112:{},114:{},29282:{}};function write_biff_rec(r,n,_,x){var S=n;if(!isNaN(S)){var E=x||(_||[]).length||0,C=r.next(4);C.write_shift(2,S),C.write_shift(2,E),E>0&&is_buf(_)&&r.push(_)}}function write_biff_continue(r,n,_,x){var S=x||(_||[]).length||0;if(S<=8224)return write_biff_rec(r,n,_,S);var E=n;if(!isNaN(E)){for(var C=_.parts||[],T=0,B=0,A=0;A+(C[T]||8224)<=8224;)A+=C[T]||8224,T++;var I=r.next(4);for(I.write_shift(2,E),I.write_shift(2,A),r.push(_.slice(B,B+A)),B+=A;B<S;){for(I=r.next(4),I.write_shift(2,60),A=0;A+(C[T]||8224)<=8224;)A+=C[T]||8224,T++;I.write_shift(2,A),r.push(_.slice(B,B+A)),B+=A}}}function write_BIFF2Cell(r,n,_){return r||(r=new_buf(7)),r.write_shift(2,n),r.write_shift(2,_),r.write_shift(2,0),r.write_shift(1,0),r}function write_BIFF2BERR(r,n,_,x){var S=new_buf(9);return write_BIFF2Cell(S,r,n),write_Bes(_,x||"b",S),S}function write_BIFF2LABEL(r,n,_){var x=new_buf(8+2*_.length);return write_BIFF2Cell(x,r,n),x.write_shift(1,_.length),x.write_shift(_.length,_,"sbcs"),x.l<x.length?x.slice(0,x.l):x}function write_ws_biff2_cell(r,n,_,x){if(n.v!=null)switch(n.t){case"d":case"n":var S=n.t=="d"?datenum(parseDate(n.v)):n.v;S==(S|0)&&S>=0&&S<65536?write_biff_rec(r,2,write_BIFF2INT(_,x,S)):write_biff_rec(r,3,write_BIFF2NUM(_,x,S));return;case"b":case"e":write_biff_rec(r,5,write_BIFF2BERR(_,x,n.v,n.t));return;case"s":case"str":write_biff_rec(r,4,write_BIFF2LABEL(_,x,n.v==null?"":String(n.v).slice(0,255)));return}write_biff_rec(r,1,write_BIFF2Cell(null,_,x))}function write_ws_biff2(r,n,_,x){var S=n["!data"]!=null,E=safe_decode_range(n["!ref"]||"A1"),C="",T=[];if(E.e.c>255||E.e.r>16383){if(x.WTF)throw new Error("Range "+(n["!ref"]||"A1")+" exceeds format limit A1:IV16384");E.e.c=Math.min(E.e.c,255),E.e.r=Math.min(E.e.c,16383)}for(var B=[],A=E.s.c;A<=E.e.c;++A)T[A]=encode_col(A);for(var I=E.s.r;I<=E.e.r;++I)for(S&&(B=n["!data"][I]||[]),C=encode_row(I),A=E.s.c;A<=E.e.c;++A){var N=S?B[A]:n[T[A]+C];N&&write_ws_biff2_cell(r,N,I,A)}}function write_biff2_buf(r,n){for(var _=n||{},x=buf_array(),S=0,E=0;E<r.SheetNames.length;++E)r.SheetNames[E]==_.sheet&&(S=E);if(S==0&&_.sheet&&r.SheetNames[0]!=_.sheet)throw new Error("Sheet not found: "+_.sheet);return write_biff_rec(x,_.biff==4?1033:_.biff==3?521:9,write_BOF(r,16,_)),write_ws_biff2(x,r.Sheets[r.SheetNames[S]],S,_),write_biff_rec(x,10),x.end()}function write_FONTS_biff8(r,n,_){write_biff_rec(r,49,write_Font({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},_))}function write_FMTS_biff8(r,n,_){n&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(x){for(var S=x[0];S<=x[1];++S)n[S]!=null&&write_biff_rec(r,1054,write_Format(S,n[S],_))})}function write_FEAT(r,n){var _=new_buf(19);_.write_shift(4,2151),_.write_shift(4,0),_.write_shift(4,0),_.write_shift(2,3),_.write_shift(1,1),_.write_shift(4,0),write_biff_rec(r,2151,_),_=new_buf(39),_.write_shift(4,2152),_.write_shift(4,0),_.write_shift(4,0),_.write_shift(2,3),_.write_shift(1,0),_.write_shift(4,0),_.write_shift(2,1),_.write_shift(4,4),_.write_shift(2,0),write_Ref8U(safe_decode_range(n["!ref"]||"A1"),_),_.write_shift(4,4),write_biff_rec(r,2152,_)}function write_CELLXFS_biff8(r,n){for(var _=0;_<16;++_)write_biff_rec(r,224,write_XF({numFmtId:0,style:!0},0,n));n.cellXfs.forEach(function(x){write_biff_rec(r,224,write_XF(x,0,n))})}function write_ws_biff8_hlinks(r,n){for(var _=0;_<n["!links"].length;++_){var x=n["!links"][_];write_biff_rec(r,440,write_HLink(x)),x[1].Tooltip&&write_biff_rec(r,2048,write_HLinkTooltip(x))}delete n["!links"]}function write_ws_cols_biff8(r,n){if(n){var _=0;n.forEach(function(x,S){++_<=256&&x&&write_biff_rec(r,125,write_ColInfo(col_obj_w(S,x),S))})}}function write_ws_biff8_cell(r,n,_,x,S){var E=16+get_cell_style(S.cellXfs,n,S);if(n.v==null&&!n.bf){write_biff_rec(r,513,write_XLSCell(_,x,E));return}if(n.bf)write_biff_rec(r,6,write_Formula(n,_,x,S,E));else switch(n.t){case"d":case"n":var C=n.t=="d"?datenum(parseDate(n.v)):n.v;write_biff_rec(r,515,write_Number(_,x,C,E));break;case"b":case"e":write_biff_rec(r,517,write_BoolErr(_,x,n.v,E,S,n.t));break;case"s":case"str":if(S.bookSST){var T=get_sst_id(S.Strings,n.v==null?"":String(n.v),S.revStrings);write_biff_rec(r,253,write_LabelSst(_,x,T,E))}else write_biff_rec(r,516,write_Label(_,x,(n.v==null?"":String(n.v)).slice(0,255),E,S));break;default:write_biff_rec(r,513,write_XLSCell(_,x,E))}}function write_ws_biff8(r,n,_){var x=buf_array(),S=_.SheetNames[r],E=_.Sheets[S]||{},C=(_||{}).Workbook||{},T=(C.Sheets||[])[r]||{},B=E["!data"]!=null,A=n.biff==8,I,N="",V=[],D=safe_decode_range(E["!ref"]||"A1"),O=A?65536:16384;if(D.e.c>255||D.e.r>=O){if(n.WTF)throw new Error("Range "+(E["!ref"]||"A1")+" exceeds format limit A1:IV16384");D.e.c=Math.min(D.e.c,255),D.e.r=Math.min(D.e.c,O-1)}write_biff_rec(x,2057,write_BOF(_,16,n)),write_biff_rec(x,13,writeuint16(1)),write_biff_rec(x,12,writeuint16(100)),write_biff_rec(x,15,writebool(!0)),write_biff_rec(x,17,writebool(!1)),write_biff_rec(x,16,write_Xnum(.001)),write_biff_rec(x,95,writebool(!0)),write_biff_rec(x,42,writebool(!1)),write_biff_rec(x,43,writebool(!1)),write_biff_rec(x,130,writeuint16(1)),write_biff_rec(x,128,write_Guts([0,0])),write_biff_rec(x,131,writebool(!1)),write_biff_rec(x,132,writebool(!1)),A&&write_ws_cols_biff8(x,E["!cols"]),write_biff_rec(x,512,write_Dimensions(D,n)),A&&(E["!links"]=[]);for(var F=[],M=[],L=D.s.c;L<=D.e.c;++L)V[L]=encode_col(L);for(var j=D.s.r;j<=D.e.r;++j)for(B&&(M=E["!data"][j]||[]),N=encode_row(j),L=D.s.c;L<=D.e.c;++L){I=V[L]+N;var q=B?M[L]:E[I];q&&(write_ws_biff8_cell(x,q,j,L,n),A&&q.l&&E["!links"].push([I,q.l]),A&&q.c&&F.push([I,q.c]))}var H=T.CodeName||T.name||S;return A&&write_biff_rec(x,574,write_Window2((C.Views||[])[0])),A&&(E["!merges"]||[]).length&&write_biff_rec(x,229,write_MergeCells(E["!merges"])),A&&write_ws_biff8_hlinks(x,E),write_biff_rec(x,442,write_XLUnicodeString(H)),A&&write_FEAT(x,E),write_biff_rec(x,10),x.end()}function write_biff8_global(r,n,_){var x=buf_array(),S=(r||{}).Workbook||{},E=S.Sheets||[],C=S.WBProps||{},T=_.biff==8,B=_.biff==5;if(write_biff_rec(x,2057,write_BOF(r,5,_)),_.bookType=="xla"&&write_biff_rec(x,135),write_biff_rec(x,225,T?writeuint16(1200):null),write_biff_rec(x,193,writezeroes(2)),B&&write_biff_rec(x,191),B&&write_biff_rec(x,192),write_biff_rec(x,226),write_biff_rec(x,92,write_WriteAccess("SheetJS",_)),write_biff_rec(x,66,writeuint16(T?1200:1252)),T&&write_biff_rec(x,353,writeuint16(0)),T&&write_biff_rec(x,448),write_biff_rec(x,317,write_RRTabId(r.SheetNames.length)),T&&r.vbaraw&&write_biff_rec(x,211),T&&r.vbaraw){var A=C.CodeName||"ThisWorkbook";write_biff_rec(x,442,write_XLUnicodeString(A))}write_biff_rec(x,156,writeuint16(17)),write_biff_rec(x,25,writebool(!1)),write_biff_rec(x,18,writebool(!1)),write_biff_rec(x,19,writeuint16(0)),T&&write_biff_rec(x,431,writebool(!1)),T&&write_biff_rec(x,444,writeuint16(0)),write_biff_rec(x,61,write_Window1()),write_biff_rec(x,64,writebool(!1)),write_biff_rec(x,141,writeuint16(0)),write_biff_rec(x,34,writebool(safe1904(r)=="true")),write_biff_rec(x,14,writebool(!0)),T&&write_biff_rec(x,439,writebool(!1)),write_biff_rec(x,218,writeuint16(0)),write_FONTS_biff8(x,r,_),write_FMTS_biff8(x,r.SSF,_),write_CELLXFS_biff8(x,_),T&&write_biff_rec(x,352,writebool(!1));var I=x.end(),N=buf_array();T&&write_biff_rec(N,140,write_Country()),T&&_.Strings&&write_biff_continue(N,252,write_SST(_.Strings)),write_biff_rec(N,10);var V=N.end(),D=buf_array(),O=0,F=0;for(F=0;F<r.SheetNames.length;++F)O+=(T?12:11)+(T?2:1)*r.SheetNames[F].length;var M=I.length+O+V.length;for(F=0;F<r.SheetNames.length;++F){var L=E[F]||{};write_biff_rec(D,133,write_BoundSheet8({pos:M,hs:L.Hidden||0,dt:0,name:r.SheetNames[F]},_)),M+=n[F].length}var j=D.end();if(O!=j.length)throw new Error("BS8 "+O+" != "+j.length);var q=[];return I.length&&q.push(I),j.length&&q.push(j),V.length&&q.push(V),bconcat(q)}function write_biff8_buf(r,n){var _=n||{},x=[];r&&!r.SSF&&(r.SSF=dup(table_fmt)),r&&r.SSF&&(make_ssf(),SSF_load_table(r.SSF),_.revssf=evert_num(r.SSF),_.revssf[r.SSF[65535]]=0,_.ssf=r.SSF),_.Strings=[],_.Strings.Count=0,_.Strings.Unique=0,fix_write_opts(_),_.cellXfs=[],get_cell_style(_.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={});for(var S=0;S<r.SheetNames.length;++S)x[x.length]=write_ws_biff8(S,_,r);return x.unshift(write_biff8_global(r,x,_)),bconcat(x)}function write_biff_buf(r,n){for(var _=0;_<=r.SheetNames.length;++_){var x=r.Sheets[r.SheetNames[_]];if(!(!x||!x["!ref"])){var S=decode_range(x["!ref"]);S.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+r.SheetNames[_]+"' extends beyond column IV (255).  Data may be lost.")}}var E=n||{};switch(E.biff||2){case 8:case 5:return write_biff8_buf(r,n);case 4:case 3:case 2:return write_biff2_buf(r,n)}throw new Error("invalid type "+E.bookType+" for BIFF")}function html_to_sheet(r,n){var _=n||{},x=_.dense!=null?_.dense:DENSE,S={};x&&(S["!data"]=[]),r=r.replace(/<!--.*?-->/g,"");var E=r.match(/<table/i);if(!E)throw new Error("Invalid HTML: could not find <table>");var C=r.match(/<\/table/i),T=E.index,B=C&&C.index||r.length,A=split_regex(r.slice(T,B),/(:?<tr[^>]*>)/i,"<tr>"),I=-1,N=0,V=0,D=0,O={s:{r:1e7,c:1e7},e:{r:0,c:0}},F=[];for(T=0;T<A.length;++T){var M=A[T].trim(),L=M.slice(0,3).toLowerCase();if(L=="<tr"){if(++I,_.sheetRows&&_.sheetRows<=I){--I;break}N=0;continue}if(!(L!="<td"&&L!="<th")){var j=M.split(/<\/t[dh]>/i);for(B=0;B<j.length;++B){var q=j[B].trim();if(q.match(/<t[dh]/i)){for(var H=q,X=0;H.charAt(0)=="<"&&(X=H.indexOf(">"))>-1;)H=H.slice(X+1);for(var J=0;J<F.length;++J){var Z=F[J];Z.s.c==N&&Z.s.r<I&&I<=Z.e.r&&(N=Z.e.c+1,J=-1)}var ae=parsexmltag(q.slice(0,q.indexOf(">")));D=ae.colspan?+ae.colspan:1,((V=+ae.rowspan)>1||D>1)&&F.push({s:{r:I,c:N},e:{r:I+(V||1)-1,c:N+D-1}});var ce=ae.t||ae["data-t"]||"";if(!H.length){N+=D;continue}if(H=htmldecode(H),O.s.r>I&&(O.s.r=I),O.e.r<I&&(O.e.r=I),O.s.c>N&&(O.s.c=N),O.e.c<N&&(O.e.c=N),!H.length){N+=D;continue}var ve={t:"s",v:H};_.raw||!H.trim().length||ce=="s"||(H==="TRUE"?ve={t:"b",v:!0}:H==="FALSE"?ve={t:"b",v:!1}:isNaN(fuzzynum(H))?isNaN(fuzzydate(H).getDate())||(ve={t:"d",v:parseDate(H)},_.cellDates||(ve={t:"n",v:datenum(ve.v)}),ve.z=_.dateNF||table_fmt[14]):ve={t:"n",v:fuzzynum(H)}),x?(S["!data"][I]||(S["!data"][I]=[]),S["!data"][I][N]=ve):S[encode_cell({r:I,c:N})]=ve,N+=D}}}}return S["!ref"]=encode_range(O),F.length&&(S["!merges"]=F),S}function make_html_row(r,n,_,x){for(var S=r["!merges"]||[],E=[],C={},T=r["!data"]!=null,B=n.s.c;B<=n.e.c;++B){for(var A=0,I=0,N=0;N<S.length;++N)if(!(S[N].s.r>_||S[N].s.c>B)&&!(S[N].e.r<_||S[N].e.c<B)){if(S[N].s.r<_||S[N].s.c<B){A=-1;break}A=S[N].e.r-S[N].s.r+1,I=S[N].e.c-S[N].s.c+1;break}if(!(A<0)){var V=encode_col(B)+encode_row(_),D=T?(r["!data"][_]||[])[B]:r[V],O=D&&D.v!=null&&(D.h||escapehtml(D.w||(format_cell(D),D.w)||""))||"";C={},A>1&&(C.rowspan=A),I>1&&(C.colspan=I),x.editable?O='<span contenteditable="true">'+O+"</span>":D&&(C["data-t"]=D&&D.t||"z",D.v!=null&&(C["data-v"]=D.v),D.z!=null&&(C["data-z"]=D.z),D.l&&(D.l.Target||"#").charAt(0)!="#"&&(O='<a href="'+D.l.Target+'">'+O+"</a>")),C.id=(x.id||"sjs")+"-"+V,E.push(writextag("td",O,C))}}var F="<tr>";return F+E.join("")+"</tr>"}var HTML_BEGIN='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',HTML_END="</body></html>";function html_to_workbook(r,n){var _=r.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!_||_.length==0)throw new Error("Invalid HTML: could not find <table>");if(_.length==1){var x=sheet_to_workbook(html_to_sheet(_[0],n),n);return x.bookType="html",x}var S=book_new();return _.forEach(function(E,C){book_append_sheet(S,html_to_sheet(E,n),"Sheet"+(C+1))}),S.bookType="html",S}function make_html_preamble(r,n,_){var x=[];return x.join("")+"<table"+(_&&_.id?' id="'+_.id+'"':"")+">"}function sheet_to_html(r,n){var _=n||{},x=_.header!=null?_.header:HTML_BEGIN,S=_.footer!=null?_.footer:HTML_END,E=[x],C=decode_range(r["!ref"]);E.push(make_html_preamble(r,C,_));for(var T=C.s.r;T<=C.e.r;++T)E.push(make_html_row(r,C,T,_));return E.push("</table>"+S),E.join("")}function sheet_add_dom(r,n,_){var x=n.rows;if(!x)throw"Unsupported origin when "+n.tagName+" is not a TABLE";var S=_||{},E=r["!data"]!=null,C=0,T=0;if(S.origin!=null)if(typeof S.origin=="number")C=S.origin;else{var B=typeof S.origin=="string"?decode_cell(S.origin):S.origin;C=B.r,T=B.c}var A=Math.min(S.sheetRows||1e7,x.length),I={s:{r:0,c:0},e:{r:C,c:T}};if(r["!ref"]){var N=decode_range(r["!ref"]);I.s.r=Math.min(I.s.r,N.s.r),I.s.c=Math.min(I.s.c,N.s.c),I.e.r=Math.max(I.e.r,N.e.r),I.e.c=Math.max(I.e.c,N.e.c),C==-1&&(I.e.r=C=N.e.r+1)}var V=[],D=0,O=r["!rows"]||(r["!rows"]=[]),F=0,M=0,L=0,j=0,q=0,H=0;for(r["!cols"]||(r["!cols"]=[]);F<x.length&&M<A;++F){var X=x[F];if(is_dom_element_hidden(X)){if(S.display)continue;O[M]={hidden:!0}}var J=X.cells;for(L=j=0;L<J.length;++L){var Z=J[L];if(!(S.display&&is_dom_element_hidden(Z))){var ae=Z.hasAttribute("data-v")?Z.getAttribute("data-v"):Z.hasAttribute("v")?Z.getAttribute("v"):htmldecode(Z.innerHTML),ce=Z.getAttribute("data-z")||Z.getAttribute("z");for(D=0;D<V.length;++D){var ve=V[D];ve.s.c==j+T&&ve.s.r<M+C&&M+C<=ve.e.r&&(j=ve.e.c+1-T,D=-1)}H=+Z.getAttribute("colspan")||1,((q=+Z.getAttribute("rowspan")||1)>1||H>1)&&V.push({s:{r:M+C,c:j+T},e:{r:M+C+(q||1)-1,c:j+T+(H||1)-1}});var pe={t:"s",v:ae},G=Z.getAttribute("data-t")||Z.getAttribute("t")||"";ae!=null&&(ae.length==0?pe.t=G||"z":S.raw||ae.trim().length==0||G=="s"||(ae==="TRUE"?pe={t:"b",v:!0}:ae==="FALSE"?pe={t:"b",v:!1}:isNaN(fuzzynum(ae))?isNaN(fuzzydate(ae).getDate())||(pe={t:"d",v:parseDate(ae)},S.cellDates||(pe={t:"n",v:datenum(pe.v)}),pe.z=S.dateNF||table_fmt[14]):pe={t:"n",v:fuzzynum(ae)})),pe.z===void 0&&ce!=null&&(pe.z=ce);var Y="",U=Z.getElementsByTagName("A");if(U&&U.length)for(var W=0;W<U.length&&!(U[W].hasAttribute("href")&&(Y=U[W].getAttribute("href"),Y.charAt(0)!="#"));++W);Y&&Y.charAt(0)!="#"&&Y.slice(0,11).toLowerCase()!="javascript:"&&(pe.l={Target:Y}),E?(r["!data"][M+C]||(r["!data"][M+C]=[]),r["!data"][M+C][j+T]=pe):r[encode_cell({c:j+T,r:M+C})]=pe,I.e.c<j+T&&(I.e.c=j+T),j+=H}}++M}return V.length&&(r["!merges"]=(r["!merges"]||[]).concat(V)),I.e.r=Math.max(I.e.r,M-1+C),r["!ref"]=encode_range(I),M>=A&&(r["!fullref"]=encode_range((I.e.r=x.length-F+M-1+C,I))),r}function parse_dom_table(r,n){var _=n||{},x={};return _.dense&&(x["!data"]=[]),sheet_add_dom(x,r,n)}function table_to_book(r,n){var _=sheet_to_workbook(parse_dom_table(r,n),n);return _}function is_dom_element_hidden(r){var n="",_=get_get_computed_style_function(r);return _&&(n=_(r).getPropertyValue("display")),n||(n=r.style&&r.style.display),n==="none"}function get_get_computed_style_function(r){return r.ownerDocument.defaultView&&typeof r.ownerDocument.defaultView.getComputedStyle=="function"?r.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function parse_text_p(r){var n=r.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(x,S){return Array(parseInt(S,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),_=unescapexml(n.replace(/<[^>]*>/g,""));return[_]}function parse_ods_styles(r,n,_){var x=_||{},S=xlml_normalize(r);xlmlregex.lastIndex=0,S=S.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");for(var E,C,T="",B="",A,I=0,N=-1,V="";E=xlmlregex.exec(S);)switch(E[3]=E[3].replace(/_.*$/,"")){case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":case"text-style":E[1]==="/"?(C["truncate-on-overflow"]=="false"&&(T.match(/h/)?T=T.replace(/h+/,"[$&]"):T.match(/m/)?T=T.replace(/m+/,"[$&]"):T.match(/s/)&&(T=T.replace(/s+/,"[$&]"))),x[C.name]=T,T=""):E[0].charAt(E[0].length-2)!=="/"&&(T="",C=parsexmltag(E[0],!1));break;case"boolean-style":E[1]==="/"?(x[C.name]="General",T=""):E[0].charAt(E[0].length-2)!=="/"&&(T="",C=parsexmltag(E[0],!1));break;case"boolean":T+="General";break;case"text":E[1]==="/"?(V=S.slice(N,xlmlregex.lastIndex-E[0].length),V=="%"&&C[0]=="<number:percentage-style"?T+="%":T+='"'+V.replace(/"/g,'""')+'"'):E[0].charAt(E[0].length-2)!=="/"&&(N=xlmlregex.lastIndex);break;case"day":switch(A=parsexmltag(E[0],!1),A.style){case"short":T+="d";break;case"long":T+="dd";break;default:T+="dd";break}break;case"day-of-week":switch(A=parsexmltag(E[0],!1),A.style){case"short":T+="ddd";break;case"long":T+="dddd";break;default:T+="ddd";break}break;case"era":switch(A=parsexmltag(E[0],!1),A.style){case"short":T+="ee";break;case"long":T+="eeee";break;default:T+="eeee";break}break;case"hours":switch(A=parsexmltag(E[0],!1),A.style){case"short":T+="h";break;case"long":T+="hh";break;default:T+="hh";break}break;case"minutes":switch(A=parsexmltag(E[0],!1),A.style){case"short":T+="m";break;case"long":T+="mm";break;default:T+="mm";break}break;case"month":switch(A=parsexmltag(E[0],!1),A.textual&&(T+="mm"),A.style){case"short":T+="m";break;case"long":T+="mm";break;default:T+="m";break}break;case"seconds":{switch(A=parsexmltag(E[0],!1),A.style){case"short":T+="s";break;case"long":T+="ss";break;default:T+="ss";break}A["decimal-places"]&&(T+="."+fill("0",+A["decimal-places"]))}break;case"year":switch(A=parsexmltag(E[0],!1),A.style){case"short":T+="yy";break;case"long":T+="yyyy";break;default:T+="yy";break}break;case"am-pm":T+="AM/PM";break;case"week-of-year":case"quarter":console.error("Excel does not support ODS format token "+E[3]);break;case"fill-character":E[1]==="/"?(V=S.slice(N,xlmlregex.lastIndex-E[0].length),T+='"'+V.replace(/"/g,'""')+'"*'):E[0].charAt(E[0].length-2)!=="/"&&(N=xlmlregex.lastIndex);break;case"scientific-number":A=parsexmltag(E[0],!1),T+="0."+fill("0",+A["min-decimal-places"]||+A["decimal-places"]||2)+fill("?",+A["decimal-places"]-+A["min-decimal-places"]||0)+"E"+(parsexmlbool(A["forced-exponent-sign"])?"+":"")+fill("0",+A["min-exponent-digits"]||2);break;case"fraction":A=parsexmltag(E[0],!1),+A["min-integer-digits"]?T+=fill("0",+A["min-integer-digits"]):T+="#",T+=" ",T+=fill("?",+A["min-numerator-digits"]||1),T+="/",+A["denominator-value"]?T+=A["denominator-value"]:T+=fill("?",+A["min-denominator-digits"]||1);break;case"currency-symbol":E[1]==="/"?T+='"'+S.slice(N,xlmlregex.lastIndex-E[0].length).replace(/"/g,'""')+'"':E[0].charAt(E[0].length-2)!=="/"?N=xlmlregex.lastIndex:T+="$";break;case"text-properties":switch(A=parsexmltag(E[0],!1),(A.color||"").toLowerCase().replace("#","")){case"ff0000":case"red":T="[Red]"+T;break}break;case"text-content":T+="@";break;case"map":A=parsexmltag(E[0],!1),unescapexml(A.condition)=="value()>=0"?T=x[A["apply-style-name"]]+";"+T:console.error("ODS number format may be incorrect: "+A.condition);break;case"number":if(E[1]==="/")break;A=parsexmltag(E[0],!1),B="",B+=fill("0",+A["min-integer-digits"]||1),parsexmlbool(A.grouping)&&(B=commaify(fill("#",Math.max(0,4-B.length))+B)),(+A["min-decimal-places"]||+A["decimal-places"])&&(B+="."),+A["min-decimal-places"]&&(B+=fill("0",+A["min-decimal-places"]||1)),+A["decimal-places"]-(+A["min-decimal-places"]||0)&&(B+=fill("0",+A["decimal-places"]-(+A["min-decimal-places"]||0))),T+=B;break;case"embedded-text":E[1]==="/"?I==0?T+='"'+S.slice(N,xlmlregex.lastIndex-E[0].length).replace(/"/g,'""')+'"':T=T.slice(0,I)+'"'+S.slice(N,xlmlregex.lastIndex-E[0].length).replace(/"/g,'""')+'"'+T.slice(I):E[0].charAt(E[0].length-2)!=="/"&&(N=xlmlregex.lastIndex,I=-+parsexmltag(E[0],!1).position||0);break}return x}function parse_content_xml(r,n,_){var x=n||{},S=xlml_normalize(r),E=[],C,T,B,A="",I=0,N,V,D={},O=[],F={};x.dense&&(F["!data"]=[]);var M,L,j={value:""},q="",H=0,X=[],J=-1,Z=-1,ae={s:{r:1e6,c:1e7},e:{r:0,c:0}},ce=0,ve=_||{},pe={},G=[],Y={},U=0,W=0,ee=[],re=1,oe=1,ie=[],ne={Names:[],WBProps:{}},te={},K=["",""],le=[],ue={},be="",ge=0,ye=!1,Ee=!1,Re=0,Ne=0;for(xlmlregex.lastIndex=0,S=S.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");M=xlmlregex.exec(S);)switch(M[3]=M[3].replace(/_.*$/,"")){case"table":case"":M[1]==="/"?(ae.e.c>=ae.s.c&&ae.e.r>=ae.s.r?F["!ref"]=encode_range(ae):F["!ref"]="A1:A1",x.sheetRows>0&&x.sheetRows<=ae.e.r&&(F["!fullref"]=F["!ref"],ae.e.r=x.sheetRows-1,F["!ref"]=encode_range(ae)),G.length&&(F["!merges"]=G),ee.length&&(F["!rows"]=ee),N.name=N.||N.name,typeof JSON<"u"&&JSON.stringify(N),O.push(N.name),D[N.name]=F,Ee=!1):M[0].charAt(M[0].length-2)!=="/"&&(N=parsexmltag(M[0],!1),J=Z=-1,ae.s.r=ae.s.c=1e7,ae.e.r=ae.e.c=0,F={},x.dense&&(F["!data"]=[]),G=[],ee=[],Ee=!0);break;case"table-row-group":M[1]==="/"?--ce:++ce;break;case"table-row":case"":if(M[1]==="/"){J+=re,re=1;break}if(V=parsexmltag(M[0],!1),V.?J=V.-1:J==-1&&(J=0),re=+V["number-rows-repeated"]||1,re<10)for(Re=0;Re<re;++Re)ce>0&&(ee[J+Re]={level:ce});Z=-1;break;case"covered-table-cell":M[1]!=="/"&&++Z,x.sheetStubs&&(x.dense?(F["!data"][J]||(F["!data"][J]=[]),F["!data"][J][Z]={t:"z"}):F[encode_cell({r:J,c:Z})]={t:"z"}),q="",X=[];break;case"table-cell":case"":if(M[0].charAt(M[0].length-2)==="/")++Z,j=parsexmltag(M[0],!1),oe=parseInt(j["number-columns-repeated"]||"1",10),L={t:"z",v:null},j.formula&&x.cellFormula!=!1&&(L.f=ods_to_csf_formula(unescapexml(j.formula))),j["style-name"]&&pe[j["style-name"]]&&(L.z=pe[j["style-name"]]),(j.||j["value-type"])=="string"&&(L.t="s",L.v=unescapexml(j["string-value"]||""),x.dense?(F["!data"][J]||(F["!data"][J]=[]),F["!data"][J][Z]=L):F[encode_col(Z)+encode_row(J)]=L),Z+=oe-1;else if(M[1]!=="/"){++Z,q="",H=0,X=[],oe=1;var Te=re?J+re-1:J;if(Z>ae.e.c&&(ae.e.c=Z),Z<ae.s.c&&(ae.s.c=Z),J<ae.s.r&&(ae.s.r=J),Te>ae.e.r&&(ae.e.r=Te),j=parsexmltag(M[0],!1),le=[],ue={},L={t:j.||j["value-type"],v:null},j["style-name"]&&pe[j["style-name"]]&&(L.z=pe[j["style-name"]]),x.cellFormula)if(j.formula&&(j.formula=unescapexml(j.formula)),j["number-matrix-columns-spanned"]&&j["number-matrix-rows-spanned"]&&(U=parseInt(j["number-matrix-rows-spanned"],10)||0,W=parseInt(j["number-matrix-columns-spanned"],10)||0,Y={s:{r:J,c:Z},e:{r:J+U-1,c:Z+W-1}},L.F=encode_range(Y),ie.push([Y,L.F])),j.formula)L.f=ods_to_csf_formula(j.formula);else for(Re=0;Re<ie.length;++Re)J>=ie[Re][0].s.r&&J<=ie[Re][0].e.r&&Z>=ie[Re][0].s.c&&Z<=ie[Re][0].e.c&&(L.F=ie[Re][1]);switch((j["number-columns-spanned"]||j["number-rows-spanned"])&&(U=parseInt(j["number-rows-spanned"],10)||0,W=parseInt(j["number-columns-spanned"],10)||0,Y={s:{r:J,c:Z},e:{r:J+U-1,c:Z+W-1}},G.push(Y)),j["number-columns-repeated"]&&(oe=parseInt(j["number-columns-repeated"],10)),L.t){case"boolean":L.t="b",L.v=parsexmlbool(j["boolean-value"])||+j["boolean-value"]>=1;break;case"float":L.t="n",L.v=parseFloat(j.value);break;case"percentage":L.t="n",L.v=parseFloat(j.value);break;case"currency":L.t="n",L.v=parseFloat(j.value);break;case"date":L.t="d",L.v=parseDate(j["date-value"]),x.cellDates||(L.t="n",L.v=datenum(L.v,ne.WBProps.date1904)-Ne),L.z||(L.z="m/d/yy");break;case"time":L.t="n",L.v=parse_isodur(j["time-value"])/86400,x.cellDates&&(L.t="d",L.v=numdate(L.v)),L.z||(L.z="HH:MM:SS");break;case"number":L.t="n",L.v=parseFloat(j.);break;default:if(L.t==="string"||L.t==="text"||!L.t)L.t="s",j["string-value"]!=null&&(q=unescapexml(j["string-value"]),X=[]);else throw new Error("Unsupported value type "+L.t)}}else{if(ye=!1,L.t==="s"&&(L.v=q||"",X.length&&(L.R=X),ye=H==0),te.Target&&(L.l=te),le.length>0&&(L.c=le,le=[]),q&&x.cellText!==!1&&(L.w=q),ye&&(L.t="z",delete L.v),(!ye||x.sheetStubs)&&!(x.sheetRows&&x.sheetRows<=J))for(var he=0;he<re;++he){if(oe=parseInt(j["number-columns-repeated"]||"1",10),x.dense)for(F["!data"][J+he]||(F["!data"][J+he]=[]),F["!data"][J+he][Z]=he==0?L:dup(L);--oe>0;)F["!data"][J+he][Z+oe]=dup(L);else for(F[encode_cell({r:J+he,c:Z})]=L;--oe>0;)F[encode_cell({r:J+he,c:Z+oe})]=dup(L);ae.e.c<=Z&&(ae.e.c=Z)}oe=parseInt(j["number-columns-repeated"]||"1",10),Z+=oe-1,oe=0,L={},q="",X=[]}te={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(M[1]==="/"){if((C=E.pop())[0]!==M[3])throw"Bad state: "+C}else M[0].charAt(M[0].length-2)!=="/"&&E.push([M[3],!0]);break;case"annotation":if(M[1]==="/"){if((C=E.pop())[0]!==M[3])throw"Bad state: "+C;ue.t=q,X.length&&(ue.R=X),ue.a=be,le.push(ue)}else M[0].charAt(M[0].length-2)!=="/"&&E.push([M[3],!1]);be="",ge=0,q="",H=0,X=[];break;case"creator":M[1]==="/"?be=S.slice(ge,M.index):ge=M.index+M[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(M[1]==="/"){if((C=E.pop())[0]!==M[3])throw"Bad state: "+C}else M[0].charAt(M[0].length-2)!=="/"&&E.push([M[3],!1]);q="",H=0,X=[];break;case"scientific-number":case"currency-symbol":case"fill-character":break;case"text-style":case"boolean-style":case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":if(M[1]==="/"){var xe=xlmlregex.lastIndex;parse_ods_styles(S.slice(B,xlmlregex.lastIndex),n,ve),xlmlregex.lastIndex=xe}else M[0].charAt(M[0].length-2)!=="/"&&(B=xlmlregex.lastIndex-M[0].length);break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":{var fe=parsexmltag(M[0],!1);fe.family=="table-cell"&&ve[fe["data-style-name"]]&&(pe[fe.name]=ve[fe["data-style-name"]])}break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":break;case"boolean":break;case"text":if(M[0].slice(-2)==="/>")break;if(M[1]==="/")switch(E[E.length-1][0]){case"number-style":case"date-style":case"time-style":A+=S.slice(I,M.index);break}else I=M.index+M[0].length;break;case"named-range":T=parsexmltag(M[0],!1),K=ods_to_csf_3D(T["cell-range-address"]);var Be={Name:T.name,Ref:K[0]+"!"+K[1]};Ee&&(Be.Sheet=O.length),ne.Names.push(Be);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":switch(T=parsexmltag(M[0],!1),T["date-value"]){case"1904-01-01":ne.WBProps.date1904=!0;case"1900-01-01":Ne=0}break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(E[E.length-1][0])>-1)break;if(M[1]==="/"&&(!j||!j["string-value"])){var Le=parse_text_p(S.slice(H,M.index));q=(q.length>0?q+`
`:"")+Le[0]}else parsexmltag(M[0],!1),H=M.index+M[0].length;break;case"s":break;case"database-range":if(M[1]==="/")break;try{K=ods_to_csf_3D(parsexmltag(M[0])["target-range-address"]),D[K[0]]["!autofilter"]={ref:K[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(M[1]!=="/"){if(te=parsexmltag(M[0],!1),!te.href)break;te.Target=unescapexml(te.href),delete te.href,te.Target.charAt(0)=="#"&&te.Target.indexOf(".")>-1?(K=ods_to_csf_3D(te.Target.slice(1)),te.Target="#"+K[0]+"!"+K[1]):te.Target.match(/^\.\.[\\\/]/)&&(te.Target=te.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(M[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(x.WTF)throw new Error(M)}}var Ve={Sheets:D,SheetNames:O,Workbook:ne};return x.bookSheets&&delete Ve.Sheets,Ve}function parse_ods(r,n){n=n||{},safegetzipfile(r,"META-INF/manifest.xml")&&parse_manifest(getzipdata(r,"META-INF/manifest.xml"),n);var _=getzipstr(r,"styles.xml"),x=_&&parse_ods_styles(utf8read(_)),S=getzipstr(r,"content.xml");if(!S)throw new Error("Missing content.xml in ODS / UOF file");var E=parse_content_xml(utf8read(S),n,x);return safegetzipfile(r,"meta.xml")&&(E.Props=parse_core_props(getzipdata(r,"meta.xml"))),E.bookType="ods",E}function parse_fods(r,n){var _=parse_content_xml(r,n);return _.bookType="fods",_}var write_styles_ods=function(){var r=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),n="<office:document-styles "+wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+r+"</office:document-styles>";return function(){return XML_HEADER+n}}();function write_number_format_ods(r,n){var _="number",x="",S={"style:name":n},E="",C=0;r=r.replace(/"[$]"/g,"$");e:{if(r.indexOf(";")>-1&&(console.error("Unsupported ODS Style Map exported.  Using first branch of "+r),r=r.slice(0,r.indexOf(";"))),r=="@"){_="text",x="<number:text-content/>";break e}if(r.indexOf(/\$/)>-1&&(_="currency"),r[C]=='"'){for(E="";r[++C]!='"'||r[++C]=='"';)E+=r[C];--C,r[C+1]=="*"?(C++,x+="<number:fill-character>"+escapexml(E.replace(/""/g,'"'))+"</number:fill-character>"):x+="<number:text>"+escapexml(E.replace(/""/g,'"'))+"</number:text>",r=r.slice(C+1),C=0}var T=r.match(/# (\?+)\/(\?+)/);if(T){x+=writextag("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":T[1].length,"number:max-denominator-value":Math.max(+T[1].replace(/./g,"9"),+T[2].replace(/./g,"9"))});break e}if(T=r.match(/# (\?+)\/(\d+)/)){x+=writextag("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":T[1].length,"number:denominator-value":+T[2]});break e}if(T=r.match(/(\d+)(|\.\d+)%/)){_="percentage",x+=writextag("number:number",null,{"number:decimal-places":T[2]&&T.length-1||0,"number:min-decimal-places":T[2]&&T.length-1||0,"number:min-integer-digits":T[1].length})+"<number:text>%</number:text>";break e}var B=!1;if(["y","m","d"].indexOf(r[0])>-1){_="date";t:for(;C<r.length;++C)switch(E=r[C].toLowerCase()){case"h":case"s":B=!0,--C;break t;case"m":r:for(var A=C+1;A<r.length;++A)switch(r[A]){case"y":case"d":break r;case"h":case"s":B=!0,--C;break t}case"y":case"d":for(;(r[++C]||"").toLowerCase()==E[0];)E+=E[0];switch(--C,E){case"y":case"yy":x+="<number:year/>";break;case"yyy":case"yyyy":x+='<number:year number:style="long"/>';break;case"mmmmm":console.error("ODS has no equivalent of format |mmmmm|");case"m":case"mm":case"mmm":case"mmmm":x+='<number:month number:style="'+(E.length%2?"short":"long")+'" number:textual="'+(E.length>=3?"true":"false")+'"/>';break;case"d":case"dd":x+='<number:day number:style="'+(E.length%2?"short":"long")+'"/>';break;case"ddd":case"dddd":x+='<number:day-of-week number:style="'+(E.length%2?"short":"long")+'"/>';break}break;case'"':for(;r[++C]!='"'||r[++C]=='"';)E+=r[C];--C,x+="<number:text>"+escapexml(E.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":x+="<number:text>"+escapexml(E)+"</number:text>";break;default:console.error("unrecognized character "+E+" in ODF format "+r)}if(!B)break e;r=r.slice(C+1),C=0}if(r.match(/^\[?[hms]/)){for(_=="number"&&(_="time"),r.match(/\[/)&&(r=r.replace(/[\[\]]/g,""),S["number:truncate-on-overflow"]="false");C<r.length;++C)switch(E=r[C].toLowerCase()){case"h":case"m":case"s":for(;(r[++C]||"").toLowerCase()==E[0];)E+=E[0];switch(--C,E){case"h":case"hh":x+='<number:hours number:style="'+(E.length%2?"short":"long")+'"/>';break;case"m":case"mm":x+='<number:minutes number:style="'+(E.length%2?"short":"long")+'"/>';break;case"s":case"ss":if(r[C+1]==".")do E+=r[C+1],++C;while(r[C+1]=="0");x+='<number:seconds number:style="'+(E.match("ss")?"long":"short")+'"'+(E.match(/\./)?' number:decimal-places="'+(E.match(/0+/)||[""])[0].length+'"':"")+"/>";break}break;case'"':for(;r[++C]!='"'||r[++C]=='"';)E+=r[C];--C,x+="<number:text>"+escapexml(E.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":x+="<number:text>"+escapexml(E)+"</number:text>";break;case"a":if(r.slice(C,C+3).toLowerCase()=="a/p"){x+="<number:am-pm/>",C+=2;break}if(r.slice(C,C+5).toLowerCase()=="am/pm"){x+="<number:am-pm/>",C+=4;break}default:console.error("unrecognized character "+E+" in ODF format "+r)}break e}if(r.indexOf(/\$/)>-1&&(_="currency"),r[0]=="$"&&(x+='<number:currency-symbol number:language="en" number:country="US">$</number:currency-symbol>',r=r.slice(1),C=0),C=0,r[C]=='"'){for(;r[++C]!='"'||r[++C]=='"';)E+=r[C];--C,r[C+1]=="*"?(C++,x+="<number:fill-character>"+escapexml(E.replace(/""/g,'"'))+"</number:fill-character>"):x+="<number:text>"+escapexml(E.replace(/""/g,'"'))+"</number:text>",r=r.slice(C+1),C=0}var I=r.match(/([#0][0#,]*)(\.[0#]*|)(E[+]?0*|)/i);if(!I||!I[0])console.error("Could not find numeric part of "+r);else{var N=I[1].replace(/,/g,"");x+="<number:"+(I[3]?"scientific-":"")+'number number:min-integer-digits="'+(N.indexOf("0")==-1?"0":N.length-N.indexOf("0"))+'"'+(I[0].indexOf(",")>-1?' number:grouping="true"':"")+(I[2]&&' number:decimal-places="'+(I[2].length-1)+'"'||' number:decimal-places="0"')+(I[3]&&I[3].indexOf("+")>-1?' number:forced-exponent-sign="true"':"")+(I[3]?' number:min-exponent-digits="'+I[3].match(/0+/)[0].length+'"':"")+"></number:"+(I[3]?"scientific-":"")+"number>",C=I.index+I[0].length}if(r[C]=='"'){for(E="";r[++C]!='"'||r[++C]=='"';)E+=r[C];--C,x+="<number:text>"+escapexml(E.replace(/""/g,'"'))+"</number:text>"}}return x?writextag("number:"+_+"-style",x,S):(console.error("Could not generate ODS number format for |"+r+"|"),"")}function write_names_ods(r,n,_){var x=r.filter(function(S){return S.Sheet==(_==-1?null:_)});return x.length?`      <table:named-expressions>
`+x.map(function(S){var E=csf_to_ods_3D(S.Ref);return"        "+writextag("table:named-range",null,{"table:name":S.Name,"table:cell-range-address":E,"table:base-cell-address":E.replace(/[\.]?[^\.]*$/,".$A$1")})}).join(`
`)+`
      </table:named-expressions>
`:""}var write_content_ods=function(){var r=function(E){return escapexml(E).replace(/  +/g,function(C){return'<text:s text:c="'+C.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},n=`          <table:table-cell />
`,_=`          <table:covered-table-cell/>
`,x=function(E,C,T,B,A){var I=[];I.push('      <table:table table:name="'+escapexml(C.SheetNames[T])+`" table:style-name="ta1">
`);var N=0,V=0,D=decode_range(E["!ref"]||"A1"),O=E["!merges"]||[],F=0,M=E["!data"]!=null;if(E["!cols"])for(V=0;V<=D.e.c;++V)I.push("        <table:table-column"+(E["!cols"][V]?' table:style-name="co'+E["!cols"][V].ods+'"':"")+`></table:table-column>
`);var L="",j=E["!rows"]||[];for(N=0;N<D.s.r;++N)L=j[N]?' table:style-name="ro'+j[N].ods+'"':"",I.push("        <table:table-row"+L+`></table:table-row>
`);for(;N<=D.e.r;++N){for(L=j[N]?' table:style-name="ro'+j[N].ods+'"':"",I.push("        <table:table-row"+L+`>
`),V=0;V<D.s.c;++V)I.push(n);for(;V<=D.e.c;++V){var q=!1,H={},X="";for(F=0;F!=O.length;++F)if(!(O[F].s.c>V)&&!(O[F].s.r>N)&&!(O[F].e.c<V)&&!(O[F].e.r<N)){(O[F].s.c!=V||O[F].s.r!=N)&&(q=!0),H["table:number-columns-spanned"]=O[F].e.c-O[F].s.c+1,H["table:number-rows-spanned"]=O[F].e.r-O[F].s.r+1;break}if(q){I.push(_);continue}var J=encode_cell({r:N,c:V}),Z=M?(E["!data"][N]||[])[V]:E[J];if(Z&&Z.f&&(H["table:formula"]=escapexml(csf_to_ods_formula(Z.f)),Z.F&&Z.F.slice(0,J.length)==J)){var ae=decode_range(Z.F);H["table:number-matrix-columns-spanned"]=ae.e.c-ae.s.c+1,H["table:number-matrix-rows-spanned"]=ae.e.r-ae.s.r+1}if(!Z){I.push(n);continue}switch(Z.t){case"b":X=Z.v?"TRUE":"FALSE",H["office:value-type"]="boolean",H["office:boolean-value"]=Z.v?"true":"false";break;case"n":X=Z.w||String(Z.v||0),H["office:value-type"]="float",H["office:value"]=Z.v||0;break;case"s":case"str":X=Z.v==null?"":Z.v,H["office:value-type"]="string";break;case"d":X=Z.w||parseDate(Z.v).toISOString(),H["office:value-type"]="date",H["office:date-value"]=parseDate(Z.v).toISOString(),H["table:style-name"]="ce1";break;default:I.push(n);continue}var ce=r(X);if(Z.l&&Z.l.Target){var ve=Z.l.Target;ve=ve.charAt(0)=="#"?"#"+csf_to_ods_3D(ve.slice(1)):ve,ve.charAt(0)!="#"&&!ve.match(/^\w+:/)&&(ve="../"+ve),ce=writextag("text:a",ce,{"xlink:href":ve.replace(/&/g,"&amp;")})}A[Z.z]&&(H["table:style-name"]="ce"+A[Z.z].slice(1)),I.push("          "+writextag("table:table-cell",writextag("text:p",ce,{}),H)+`
`)}I.push(`        </table:table-row>
`)}return(C.Workbook||{}).Names&&I.push(write_names_ods(C.Workbook.Names,C.SheetNames,T)),I.push(`      </table:table>
`),I.join("")},S=function(E,C){E.push(` <office:automatic-styles>
`);var T=0;C.SheetNames.map(function(N){return C.Sheets[N]}).forEach(function(N){if(N&&N["!cols"]){for(var V=0;V<N["!cols"].length;++V)if(N["!cols"][V]){var D=N["!cols"][V];if(D.width==null&&D.wpx==null&&D.wch==null)continue;process_col(D),D.ods=T;var O=N["!cols"][V].wpx+"px";E.push('  <style:style style:name="co'+T+`" style:family="table-column">
`),E.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+O+`"/>
`),E.push(`  </style:style>
`),++T}}});var B=0;C.SheetNames.map(function(N){return C.Sheets[N]}).forEach(function(N){if(N&&N["!rows"]){for(var V=0;V<N["!rows"].length;++V)if(N["!rows"][V]){N["!rows"][V].ods=B;var D=N["!rows"][V].hpx+"px";E.push('  <style:style style:name="ro'+B+`" style:family="table-row">
`),E.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+D+`"/>
`),E.push(`  </style:style>
`),++B}}}),E.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),E.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),E.push(`  </style:style>
`),E.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),E.push(`   <number:month number:style="long"/>
`),E.push(`   <number:text>/</number:text>
`),E.push(`   <number:day number:style="long"/>
`),E.push(`   <number:text>/</number:text>
`),E.push(`   <number:year/>
`),E.push(`  </number:date-style>
`);var A={},I=69;return C.SheetNames.map(function(N){return C.Sheets[N]}).forEach(function(N){if(N)for(var V=N["!data"]!=null,D=decode_range(N["!ref"]),O=0;O<=D.e.r;++O)for(var F=0;F<=D.e.c;++F){var M=V?(N["!data"][O]||[])[F]:N[encode_cell({r:O,c:F})];if(!(!M||!M.z||M.z.toLowerCase()=="general")&&!A[M.z]){var L=write_number_format_ods(M.z,"N"+I);L&&(A[M.z]="N"+I,++I,E.push(L+`
`))}}}),E.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),keys(A).forEach(function(N){E.push('<style:style style:name="ce'+A[N].slice(1)+'" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="'+A[N]+`"/>
`)}),E.push(` </office:automatic-styles>
`),A};return function(C,T){var B=[XML_HEADER],A=wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),I=wxt_helper({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});T.bookType=="fods"?(B.push("<office:document"+A+I+`>
`),B.push(write_meta_ods().replace(/<office:document-meta.*?>/,"").replace(/<\/office:document-meta>/,"")+`
`)):B.push("<office:document-content"+A+`>
`);var N=S(B,C);B.push(`  <office:body>
`),B.push(`    <office:spreadsheet>
`),((C.Workbook||{}).WBProps||{}).date1904&&B.push(`      <table:calculation-settings table:case-sensitive="false" table:search-criteria-must-apply-to-whole-cell="true" table:use-wildcards="true" table:use-regular-expressions="false" table:automatic-find-labels="false">
        <table:null-date table:date-value="1904-01-01"/>
      </table:calculation-settings>
`);for(var V=0;V!=C.SheetNames.length;++V)B.push(x(C.Sheets[C.SheetNames[V]],C,V,T,N));return(C.Workbook||{}).Names&&B.push(write_names_ods(C.Workbook.Names,C.SheetNames,-1)),B.push(`    </office:spreadsheet>
`),B.push(`  </office:body>
`),T.bookType=="fods"?B.push("</office:document>"):B.push("</office:document-content>"),B.join("")}}();function write_ods(r,n){if(n.bookType=="fods")return write_content_ods(r,n);var _=zip_new(),x="",S=[],E=[];return x="mimetype",zip_add_file(_,x,"application/vnd.oasis.opendocument.spreadsheet"),x="content.xml",zip_add_file(_,x,write_content_ods(r,n)),S.push([x,"text/xml"]),E.push([x,"ContentFile"]),x="styles.xml",zip_add_file(_,x,write_styles_ods(r,n)),S.push([x,"text/xml"]),E.push([x,"StylesFile"]),x="meta.xml",zip_add_file(_,x,XML_HEADER+write_meta_ods()),S.push([x,"text/xml"]),E.push([x,"MetadataFile"]),x="manifest.rdf",zip_add_file(_,x,write_rdf(E)),S.push([x,"application/rdf+xml"]),x="META-INF/manifest.xml",zip_add_file(_,x,write_manifest(S)),_}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */var subarray=function(){try{return typeof Uint8Array>"u"||typeof Uint8Array.prototype.subarray>"u"?"slice":typeof Buffer<"u"?typeof Buffer.prototype.subarray>"u"?"slice":(typeof Buffer.from=="function"?Buffer.from([72,62]):new Buffer([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch{return"slice"}}();function u8_to_dataview(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function u8str(r){return typeof TextDecoder<"u"?new TextDecoder().decode(r):utf8read(a2s(r))}function stru8(r){return typeof TextEncoder<"u"?new TextEncoder().encode(r):s2a(utf8write(r))}function u8concat(r){for(var n=0,_=0;_<r.length;++_)n+=r[_].length;var x=new Uint8Array(n),S=0;for(_=0;_<r.length;++_){var E=r[_],C=E.length;if(C<250)for(var T=0;T<C;++T)x[S++]=E[T];else x.set(E,S),S+=C}return x}function popcnt(r){return r-=r>>1&1431655765,r=(r&858993459)+(r>>2&858993459),(r+(r>>4)&252645135)*16843009>>>24}function readDecimal128LE(r,n){for(var _=(r[n+15]&127)<<7|r[n+14]>>1,x=r[n+14]&1,S=n+13;S>=n;--S)x=x*256+r[S];return(r[n+15]&128?-x:x)*Math.pow(10,_-6176)}function writeDecimal128LE(r,n,_){var x=Math.floor(_==0?0:Math.LOG10E*Math.log(Math.abs(_)))+6176-16,S=_/Math.pow(10,x-6176);r[n+15]|=x>>7,r[n+14]|=(x&127)<<1;for(var E=0;S>=1;++E,S/=256)r[n+E]=S&255;r[n+15]|=_>=0?0:128}function parse_varint49(r,n){var _=n.l,x=r[_]&127;e:if(r[_++]>=128&&(x|=(r[_]&127)<<7,r[_++]<128||(x|=(r[_]&127)<<14,r[_++]<128)||(x|=(r[_]&127)<<21,r[_++]<128)||(x+=(r[_]&127)*Math.pow(2,28),++_,r[_++]<128)||(x+=(r[_]&127)*Math.pow(2,35),++_,r[_++]<128)||(x+=(r[_]&127)*Math.pow(2,42),++_,r[_++]<128)))break e;return n.l=_,x}function write_varint49(r){var n=new Uint8Array(7);n[0]=r&127;var _=1;e:if(r>127){if(n[_-1]|=128,n[_]=r>>7&127,++_,r<=16383||(n[_-1]|=128,n[_]=r>>14&127,++_,r<=2097151)||(n[_-1]|=128,n[_]=r>>21&127,++_,r<=268435455)||(n[_-1]|=128,n[_]=r/256>>>21&127,++_,r<=34359738367)||(n[_-1]|=128,n[_]=r/65536>>>21&127,++_,r<=4398046511103))break e;n[_-1]|=128,n[_]=r/16777216>>>21&127,++_}return n[subarray](0,_)}function parse_packed_varints(r){for(var n={l:0},_=[];n.l<r.length;)_.push(parse_varint49(r,n));return _}function write_packed_varints(r){return u8concat(r.map(function(n){return write_varint49(n)}))}function varint_to_i32(r){var n=0,_=r[n]&127;e:if(r[n++]>=128){if(_|=(r[n]&127)<<7,r[n++]<128||(_|=(r[n]&127)<<14,r[n++]<128)||(_|=(r[n]&127)<<21,r[n++]<128))break e;_|=(r[n]&127)<<28}return _}function parse_shallow(r){for(var n=[],_={l:0};_.l<r.length;){var x=_.l,S=parse_varint49(r,_),E=S&7;S=S/8|0;var C,T=_.l;switch(E){case 0:{for(;r[T++]>=128;);C=r[subarray](_.l,T),_.l=T}break;case 1:C=r[subarray](T,T+8),_.l=T+8;break;case 2:{var B=parse_varint49(r,_);C=r[subarray](_.l,_.l+B),_.l+=B}break;case 5:C=r[subarray](T,T+4),_.l=T+4;break;default:throw new Error("PB Type ".concat(E," for Field ").concat(S," at offset ").concat(x))}var A={data:C,type:E};n[S]==null&&(n[S]=[]),n[S].push(A)}return n}function write_shallow(r){var n=[];return r.forEach(function(_,x){x!=0&&_.forEach(function(S){S.data&&(n.push(write_varint49(x*8+S.type)),S.type==2&&n.push(write_varint49(S.data.length)),n.push(S.data))})}),u8concat(n)}function mappa(r,n){return r?.map(function(_){return n(_.data)})||[]}function parse_iwa_file(r){for(var n,_=[],x={l:0};x.l<r.length;){var S=parse_varint49(r,x),E=parse_shallow(r[subarray](x.l,x.l+S));x.l+=S;var C={id:varint_to_i32(E[1][0].data),messages:[]};E[2].forEach(function(T){var B=parse_shallow(T.data),A=varint_to_i32(B[3][0].data);C.messages.push({meta:B,data:r[subarray](x.l,x.l+A)}),x.l+=A}),(n=E[3])!=null&&n[0]&&(C.merge=varint_to_i32(E[3][0].data)>>>0>0),_.push(C)}return _}function write_iwa_file(r){var n=[];return r.forEach(function(_){var x=[[],[{data:write_varint49(_.id),type:0}],[]];_.merge!=null&&(x[3]=[{data:write_varint49(+!!_.merge),type:0}]);var S=[];_.messages.forEach(function(C){S.push(C.data),C.meta[3]=[{type:0,data:write_varint49(C.data.length)}],x[2].push({data:write_shallow(C.meta),type:2})});var E=write_shallow(x);n.push(write_varint49(E.length)),n.push(E),S.forEach(function(C){return n.push(C)})}),u8concat(n)}function parse_snappy_chunk(r,n){if(r!=0)throw new Error("Unexpected Snappy chunk type ".concat(r));for(var _={l:0},x=parse_varint49(n,_),S=[],E=_.l;E<n.length;){var C=n[E]&3;if(C==0){var T=n[E++]>>2;if(T<60)++T;else{var B=T-59;T=n[E],B>1&&(T|=n[E+1]<<8),B>2&&(T|=n[E+2]<<16),B>3&&(T|=n[E+3]<<24),T>>>=0,T++,E+=B}S.push(n[subarray](E,E+T)),E+=T;continue}else{var A=0,I=0;if(C==1?(I=(n[E]>>2&7)+4,A=(n[E++]&224)<<3,A|=n[E++]):(I=(n[E++]>>2)+1,C==2?(A=n[E]|n[E+1]<<8,E+=2):(A=(n[E]|n[E+1]<<8|n[E+2]<<16|n[E+3]<<24)>>>0,E+=4)),A==0)throw new Error("Invalid offset 0");for(var N=S.length-1,V=A;N>=0&&V>=S[N].length;)V-=S[N].length,--N;if(N<0)if(V==0)V=S[N=0].length;else throw new Error("Invalid offset beyond length");if(I<V)S.push(S[N][subarray](S[N].length-V,S[N].length-V+I));else{for(V>0&&(S.push(S[N][subarray](S[N].length-V)),I-=V),++N;I>=S[N].length;)S.push(S[N]),I-=S[N].length,++N;I&&S.push(S[N][subarray](0,I))}S.length>25&&(S=[u8concat(S)])}}for(var D=0,O=0;O<S.length;++O)D+=S[O].length;if(D!=x)throw new Error("Unexpected length: ".concat(D," != ").concat(x));return S}function decompress_iwa_file(r){Array.isArray(r)&&(r=new Uint8Array(r));for(var n=[],_=0;_<r.length;){var x=r[_++],S=r[_]|r[_+1]<<8|r[_+2]<<16;_+=3,n.push.apply(n,parse_snappy_chunk(x,r[subarray](_,_+S))),_+=S}if(_!==r.length)throw new Error("data is not a valid framed stream!");return n.length==1?n[0]:u8concat(n)}function compress_iwa_file(r){for(var n=[],_=0;_<r.length;){var x=Math.min(r.length-_,268435455),S=new Uint8Array(4);n.push(S);var E=write_varint49(x),C=E.length;n.push(E),x<=60?(C++,n.push(new Uint8Array([x-1<<2]))):x<=256?(C+=2,n.push(new Uint8Array([240,x-1&255]))):x<=65536?(C+=3,n.push(new Uint8Array([244,x-1&255,x-1>>8&255]))):x<=16777216?(C+=4,n.push(new Uint8Array([248,x-1&255,x-1>>8&255,x-1>>16&255]))):x<=4294967296&&(C+=5,n.push(new Uint8Array([252,x-1&255,x-1>>8&255,x-1>>16&255,x-1>>>24&255]))),n.push(r[subarray](_,_+x)),C+=x,S[0]=0,S[1]=C&255,S[2]=C>>8&255,S[3]=C>>16&255,_+=x}return u8concat(n)}var numbers_lut_new=function(){return{sst:[],rsst:[],ofmt:[],nfmt:[]}};function numbers_format_cell(r,n,_,x,S){var E,C,T,B,A=n&255,I=n>>8,N=I>=5?S:x;e:if(_&(I>4?8:4)&&r.t=="n"&&A==7){var V=(E=N[7])!=null&&E[0]?varint_to_i32(N[7][0].data):-1;if(V==-1)break e;var D=(C=N[15])!=null&&C[0]?varint_to_i32(N[15][0].data):-1,O=(T=N[16])!=null&&T[0]?varint_to_i32(N[16][0].data):-1,F=(B=N[40])!=null&&B[0]?varint_to_i32(N[40][0].data):-1,M=r.v,L=M;t:if(F){if(M==0){D=O=2;break t}M>=604800?D=1:M>=86400?D=2:M>=3600?D=4:M>=60?D=8:M>=1?D=16:D=32,Math.floor(M)!=M?O=32:M%60?O=16:M%3600?O=8:M%86400?O=4:M%604800&&(O=2),O<D&&(O=D)}if(D==-1||O==-1)break e;var j=[],q=[];D==1&&(L=M/604800,O==1?q.push('d"d"'):(L|=0,M-=604800*L),j.push(L+(V==2?" week"+(L==1?"":"s"):V==1?"w":""))),D<=2&&O>=2&&(L=M/86400,O>2&&(L|=0,M-=86400*L),q.push('d"d"'),j.push(L+(V==2?" day"+(L==1?"":"s"):V==1?"d":""))),D<=4&&O>=4&&(L=M/3600,O>4&&(L|=0,M-=3600*L),q.push((D>=4?"[h]":"h")+'"h"'),j.push(L+(V==2?" hour"+(L==1?"":"s"):V==1?"h":""))),D<=8&&O>=8&&(L=M/60,O>8&&(L|=0,M-=60*L),q.push((D>=8?"[m]":"m")+'"m"'),V==0?j.push((D==8&&O==8||L>=10?"":"0")+L):j.push(L+(V==2?" minute"+(L==1?"":"s"):V==1?"m":""))),D<=16&&O>=16&&(L=M,O>16&&(L|=0,M-=L),q.push((D>=16?"[s]":"s")+'"s"'),V==0?j.push((O==16&&D==16||L>=10?"":"0")+L):j.push(L+(V==2?" second"+(L==1?"":"s"):V==1?"s":""))),O>=32&&(L=Math.round(1e3*M),D<32&&q.push('.000"ms"'),V==0?j.push((L>=100?"":L>=10?"0":"00")+L):j.push(L+(V==2?" millisecond"+(L==1?"":"s"):V==1?"ms":""))),r.w=j.join(V==0?":":" "),r.z=q.join(V==0?'":"':" "),V==0&&(r.w=r.w.replace(/:(\d\d\d)$/,".$1"))}}function parse_old_storage(r,n,_){var x=u8_to_dataview(r),S=x.getUint32(4,!0),E=-1,C=-1,T=-1,B=NaN,A=new Date(2001,0,1),I=_>1?12:8;S&2&&(T=x.getUint32(I,!0),I+=4),I+=popcnt(S&(_>1?3468:396))*4,S&512&&(E=x.getUint32(I,!0),I+=4),I+=popcnt(S&(_>1?12288:4096))*4,S&16&&(C=x.getUint32(I,!0),I+=4),S&32&&(B=x.getFloat64(I,!0),I+=8),S&64&&(A.setTime(A.getTime()+x.getFloat64(I,!0)*1e3),I+=8),_>1&&(S=x.getUint32(8,!0)>>>16,S&255&&(T==-1&&(T=x.getUint32(I,!0)),I+=4));var N,V=r[_>=4?1:2];switch(V){case 0:return;case 2:N={t:"n",v:B};break;case 3:N={t:"s",v:n.sst[C]};break;case 5:N={t:"d",v:A};break;case 6:N={t:"b",v:B>0};break;case 7:N={t:"n",v:B};break;case 8:N={t:"e",v:0};break;case 9:if(E>-1)N={t:"s",v:n.rsst[E]};else throw new Error("Unsupported cell type ".concat(r[subarray](0,4)));break;default:throw new Error("Unsupported cell type ".concat(r[subarray](0,4)))}return T>-1&&numbers_format_cell(N,V|_<<8,S,n.ofmt[T],n.nfmt[T]),V==7&&(N.v/=86400),N}function parse_new_storage(r,n){var _=u8_to_dataview(r);_.getUint32(4,!0);var x=_.getUint32(8,!0),S=12,E=-1,C=-1,T=-1,B=NaN,A=NaN,I=new Date(2001,0,1);x&1&&(B=readDecimal128LE(r,S),S+=16),x&2&&(A=_.getFloat64(S,!0),S+=8),x&4&&(I.setTime(I.getTime()+_.getFloat64(S,!0)*1e3),S+=8),x&8&&(C=_.getUint32(S,!0),S+=4),x&16&&(E=_.getUint32(S,!0),S+=4);var N,V=r[1];switch(V){case 0:return;case 2:N={t:"n",v:B};break;case 3:N={t:"s",v:n.sst[C]};break;case 5:N={t:"d",v:I};break;case 6:N={t:"b",v:A>0};break;case 7:N={t:"n",v:A};break;case 8:N={t:"e",v:0};break;case 9:N={t:"s",v:n.rsst[E]};break;case 10:N={t:"n",v:B};break;default:throw new Error("Unsupported cell type ".concat(r[1]," : ").concat(x&31," : ").concat(r[subarray](0,4)))}return S+=popcnt(x&8160)*4,x&516096&&(T==-1&&(T=_.getUint32(S,!0)),S+=4),T>-1&&numbers_format_cell(N,V|1280,x>>13,n.ofmt[T],n.nfmt[T]),V==7&&(N.v/=86400),N}function write_new_storage(r,n){var _=new Uint8Array(32),x=u8_to_dataview(_),S=12,E=0;switch(_[0]=5,r.t){case"n":_[1]=2,writeDecimal128LE(_,S,r.v),E|=1,S+=16;break;case"b":_[1]=6,x.setFloat64(S,r.v?1:0,!0),E|=2,S+=8;break;case"s":var C=r.v==null?"":String(r.v),T=n.indexOf(C);T==-1&&(n[T=n.length]=C),_[1]=3,x.setUint32(S,T,!0),E|=8,S+=4;break;default:throw"unsupported cell type "+r.t}return x.setUint32(8,E,!0),_[subarray](0,S)}function write_old_storage(r,n){var _=new Uint8Array(32),x=u8_to_dataview(_),S=12,E=0;switch(_[0]=4,r.t){case"n":_[2]=2,x.setFloat64(S,r.v,!0),E|=32,S+=8;break;case"b":_[2]=6,x.setFloat64(S,r.v?1:0,!0),E|=32,S+=8;break;case"s":var C=r.v==null?"":String(r.v),T=n.indexOf(C);T==-1&&(n[T=n.length]=C),_[2]=3,x.setUint32(S,T,!0),E|=16,S+=4;break;default:throw"unsupported cell type "+r.t}return x.setUint32(8,E,!0),_[subarray](0,S)}function parse_cell_storage(r,n){switch(r[0]){case 0:case 1:case 2:case 3:case 4:return parse_old_storage(r,n,r[0]);case 5:return parse_new_storage(r,n);default:throw new Error("Unsupported payload version ".concat(r[0]))}}function parse_TSP_Reference(r){var n=parse_shallow(r);return varint_to_i32(n[1][0].data)}function write_TSP_Reference(r){return write_shallow([[],[{type:0,data:write_varint49(r)}]])}function numbers_add_oref(r,n){var _,x=(_=r.messages[0].meta[5])!=null&&_[0]?parse_packed_varints(r.messages[0].meta[5][0].data):[],S=x.indexOf(n);S==-1&&(x.push(n),r.messages[0].meta[5]=[{type:2,data:write_packed_varints(x)}])}function numbers_del_oref(r,n){var _,x=(_=r.messages[0].meta[5])!=null&&_[0]?parse_packed_varints(r.messages[0].meta[5][0].data):[];r.messages[0].meta[5]=[{type:2,data:write_packed_varints(x.filter(function(S){return S!=n}))}]}function parse_TST_TableDataList(r,n){var _=parse_shallow(n.data),x=varint_to_i32(_[1][0].data),S=_[3],E=[];return(S||[]).forEach(function(C){var T=parse_shallow(C.data);if(T[1]){var B=varint_to_i32(T[1][0].data)>>>0;switch(x){case 1:E[B]=u8str(T[3][0].data);break;case 8:{var A=r[parse_TSP_Reference(T[9][0].data)][0],I=parse_shallow(A.data),N=r[parse_TSP_Reference(I[1][0].data)][0],V=varint_to_i32(N.meta[1][0].data);if(V!=2001)throw new Error("2000 unexpected reference to ".concat(V));var D=parse_shallow(N.data);E[B]=D[3].map(function(O){return u8str(O.data)}).join("")}break;case 2:E[B]=parse_shallow(T[6][0].data);break;default:throw x}}}),E}function parse_TST_TileRowInfo(r,n){var _,x,S,E,C,T,B,A,I,N,V,D,O,F,M=parse_shallow(r),L=varint_to_i32(M[1][0].data)>>>0,j=varint_to_i32(M[2][0].data)>>>0,q=((x=(_=M[8])==null?void 0:_[0])==null?void 0:x.data)&&varint_to_i32(M[8][0].data)>0||!1,H,X;if((E=(S=M[7])==null?void 0:S[0])!=null&&E.data&&n!=0)H=(T=(C=M[7])==null?void 0:C[0])==null?void 0:T.data,X=(A=(B=M[6])==null?void 0:B[0])==null?void 0:A.data;else if((N=(I=M[4])==null?void 0:I[0])!=null&&N.data&&n!=1)H=(D=(V=M[4])==null?void 0:V[0])==null?void 0:D.data,X=(F=(O=M[3])==null?void 0:O[0])==null?void 0:F.data;else throw"NUMBERS Tile missing ".concat(n," cell storage");for(var J=q?4:1,Z=u8_to_dataview(H),ae=[],ce=0;ce<H.length/2;++ce){var ve=Z.getUint16(ce*2,!0);ve<65535&&ae.push([ce,ve])}if(ae.length!=j)throw"Expected ".concat(j," cells, found ").concat(ae.length);var pe=[];for(ce=0;ce<ae.length-1;++ce)pe[ae[ce][0]]=X[subarray](ae[ce][1]*J,ae[ce+1][1]*J);return ae.length>=1&&(pe[ae[ae.length-1][0]]=X[subarray](ae[ae.length-1][1]*J)),{R:L,cells:pe}}function parse_TST_Tile(r,n){var _,x=parse_shallow(n.data),S=-1;(_=x?.[7])!=null&&_[0]&&(varint_to_i32(x[7][0].data)>>>0?S=1:S=0);var E=mappa(x[5],function(C){return parse_TST_TileRowInfo(C,S)});return{nrows:varint_to_i32(x[4][0].data)>>>0,data:E.reduce(function(C,T){return C[T.R]||(C[T.R]=[]),T.cells.forEach(function(B,A){if(C[T.R][A])throw new Error("Duplicate cell r=".concat(T.R," c=").concat(A));C[T.R][A]=B}),C},[])}}function parse_TST_TableModelArchive(r,n,_){var x,S,E,C,T,B,A=parse_shallow(n.data),I={s:{r:0,c:0},e:{r:0,c:0}};if(I.e.r=(varint_to_i32(A[6][0].data)>>>0)-1,I.e.r<0)throw new Error("Invalid row varint ".concat(A[6][0].data));if(I.e.c=(varint_to_i32(A[7][0].data)>>>0)-1,I.e.c<0)throw new Error("Invalid col varint ".concat(A[7][0].data));_["!ref"]=encode_range(I);var N=_["!data"]!=null,V=_,D=parse_shallow(A[4][0].data),O=numbers_lut_new();(x=D[4])!=null&&x[0]&&(O.sst=parse_TST_TableDataList(r,r[parse_TSP_Reference(D[4][0].data)][0])),(S=D[11])!=null&&S[0]&&(O.ofmt=parse_TST_TableDataList(r,r[parse_TSP_Reference(D[11][0].data)][0])),(E=D[17])!=null&&E[0]&&(O.rsst=parse_TST_TableDataList(r,r[parse_TSP_Reference(D[17][0].data)][0])),(C=D[22])!=null&&C[0]&&(O.nfmt=parse_TST_TableDataList(r,r[parse_TSP_Reference(D[22][0].data)][0]));var F=parse_shallow(D[3][0].data),M=0;if(F[1].forEach(function(q){var H=parse_shallow(q.data),X=r[parse_TSP_Reference(H[2][0].data)][0],J=varint_to_i32(X.meta[1][0].data);if(J!=6002)throw new Error("6001 unexpected reference to ".concat(J));var Z=parse_TST_Tile(r,X);Z.data.forEach(function(ae,ce){ae.forEach(function(ve,pe){var G=parse_cell_storage(ve,O);G&&(N?(V["!data"][M+ce]||(V["!data"][M+ce]=[]),V["!data"][M+ce][pe]=G):_[encode_col(pe)+encode_row(M+ce)]=G)})}),M+=Z.nrows}),(T=D[13])!=null&&T[0]){var L=r[parse_TSP_Reference(D[13][0].data)][0],j=varint_to_i32(L.meta[1][0].data);if(j!=6144)throw new Error("Expected merge type 6144, found ".concat(j));_["!merges"]=(B=parse_shallow(L.data))==null?void 0:B[1].map(function(q){var H=parse_shallow(q.data),X=u8_to_dataview(parse_shallow(H[1][0].data)[1][0].data),J=u8_to_dataview(parse_shallow(H[2][0].data)[1][0].data);return{s:{r:X.getUint16(0,!0),c:X.getUint16(2,!0)},e:{r:X.getUint16(0,!0)+J.getUint16(0,!0)-1,c:X.getUint16(2,!0)+J.getUint16(2,!0)-1}}})}}function parse_TST_TableInfoArchive(r,n,_){var x=parse_shallow(n.data),S={"!ref":"A1"};_?.dense&&(S["!data"]=[]);var E=r[parse_TSP_Reference(x[2][0].data)],C=varint_to_i32(E[0].meta[1][0].data);if(C!=6001)throw new Error("6000 unexpected reference to ".concat(C));return parse_TST_TableModelArchive(r,E[0],S),S}function parse_TN_SheetArchive(r,n,_){var x,S=parse_shallow(n.data),E={name:(x=S[1])!=null&&x[0]?u8str(S[1][0].data):"",sheets:[]},C=mappa(S[2],parse_TSP_Reference);return C.forEach(function(T){r[T].forEach(function(B){var A=varint_to_i32(B.meta[1][0].data);A==6e3&&E.sheets.push(parse_TST_TableInfoArchive(r,B,_))})}),E}function parse_TN_DocumentArchive(r,n,_){var x,S=book_new(),E=parse_shallow(n.data);if((x=E[2])!=null&&x[0])throw new Error("Keynote presentations are not supported");var C=mappa(E[1],parse_TSP_Reference);if(C.forEach(function(T){r[T].forEach(function(B){var A=varint_to_i32(B.meta[1][0].data);if(A==2){var I=parse_TN_SheetArchive(r,B,_);I.sheets.forEach(function(N,V){book_append_sheet(S,N,V==0?I.name:I.name+"_"+V,!0)})}})}),S.SheetNames.length==0)throw new Error("Empty NUMBERS file");return S.bookType="numbers",S}function parse_numbers_iwa(r,n){var _,x,S,E,C,T,B,A={},I=[];if(r.FullPaths.forEach(function(V){if(V.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),r.FileIndex.forEach(function(V){if(V.name.match(/\.iwa$/)&&V.content[0]==0){var D;try{D=decompress_iwa_file(V.content)}catch(F){return console.log("?? "+V.content.length+" "+(F.message||F))}var O;try{O=parse_iwa_file(D)}catch(F){return console.log("## "+(F.message||F))}O.forEach(function(F){A[F.id]=F.messages,I.push(F.id)})}}),!I.length)throw new Error("File has no messages");if((S=(x=(_=A?.[1])==null?void 0:_[0].meta)==null?void 0:x[1])!=null&&S[0].data&&varint_to_i32(A[1][0].meta[1][0].data)==1e4)throw new Error("Pages documents are not supported");var N=((B=(T=(C=(E=A?.[1])==null?void 0:E[0])==null?void 0:C.meta)==null?void 0:T[1])==null?void 0:B[0].data)&&varint_to_i32(A[1][0].meta[1][0].data)==1&&A[1][0];if(N||I.forEach(function(V){A[V].forEach(function(D){var O=varint_to_i32(D.meta[1][0].data)>>>0;if(O==1)if(!N)N=D;else throw new Error("Document has multiple roots")})}),!N)throw new Error("Cannot find Document root");return parse_TN_DocumentArchive(A,N,n)}function write_TST_TileRowInfo(r,n,_){var x,S,E=[[],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(0)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:write_varint49(5)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:write_varint49(1)}]];if(!((x=E[6])!=null&&x[0])||!((S=E[7])!=null&&S[0]))throw"Mutation only works on post-BNC storages!";var C=0;if(E[7][0].data.length<2*r.length){var T=new Uint8Array(2*r.length);T.set(E[7][0].data),E[7][0].data=T}if(E[4][0].data.length<2*r.length){var B=new Uint8Array(2*r.length);B.set(E[4][0].data),E[4][0].data=B}for(var A=u8_to_dataview(E[7][0].data),I=0,N=[],V=u8_to_dataview(E[4][0].data),D=0,O=[],F=_?4:1,M=0;M<r.length;++M){if(r[M]==null){A.setUint16(M*2,65535,!0),V.setUint16(M*2,65535);continue}A.setUint16(M*2,I/F,!0),V.setUint16(M*2,D/F,!0);var L,j;switch(typeof r[M]){case"string":L=write_new_storage({t:"s",v:r[M]},n),j=write_old_storage({t:"s",v:r[M]},n);break;case"number":L=write_new_storage({t:"n",v:r[M]},n),j=write_old_storage({t:"n",v:r[M]},n);break;case"boolean":L=write_new_storage({t:"b",v:r[M]},n),j=write_old_storage({t:"b",v:r[M]},n);break;default:if(r[M]instanceof Date){L=write_new_storage({t:"s",v:r[M].toISOString()},n),j=write_old_storage({t:"s",v:r[M].toISOString()},n);break}throw new Error("Unsupported value "+r[M])}N.push(L),I+=L.length,O.push(j),D+=j.length,++C}for(E[2][0].data=write_varint49(C),E[5][0].data=write_varint49(5);M<E[7][0].data.length/2;++M)A.setUint16(M*2,65535,!0),V.setUint16(M*2,65535,!0);return E[6][0].data=u8concat(N),E[3][0].data=u8concat(O),E[8]=[{type:0,data:write_varint49(_?1:0)}],E}function write_iwam(r,n){return{meta:[[],[{type:0,data:write_varint49(r)}]],data:n}}function get_unique_msgid(r,n){n.last||(n.last=927262);for(var _=n.last;_<2e6;++_)if(!n[_])return n[n.last=_]=r,_;throw new Error("Too many messages")}function build_numbers_deps(r){var n={},_=[];return r.FileIndex.map(function(x,S){return[x,r.FullPaths[S]]}).forEach(function(x){var S=x[0],E=x[1];S.type==2&&S.name.match(/\.iwa/)&&S.content[0]==0&&parse_iwa_file(decompress_iwa_file(S.content)).forEach(function(C){_.push(C.id),n[C.id]={deps:[],location:E,type:varint_to_i32(C.messages[0].meta[1][0].data)}})}),r.FileIndex.forEach(function(x){x.name.match(/\.iwa/)&&x.content[0]==0&&parse_iwa_file(decompress_iwa_file(x.content)).forEach(function(S){S.messages.forEach(function(E){[5,6].forEach(function(C){E.meta[C]&&E.meta[C].forEach(function(T){n[S.id].deps.push(varint_to_i32(T.data))})})})})}),n}function write_numbers_iwa(r,n){if(!n||!n.numbers)throw new Error("Must pass a `numbers` option -- check the README");var _=CFB.read(n.numbers,{type:"base64"}),x=build_numbers_deps(_),S=numbers_iwa_find(_,x,1);if(S==null)throw"Could not find message ".concat(1," in Numbers template");var E=mappa(parse_shallow(S.messages[0].data)[1],parse_TSP_Reference);if(E.length>1)throw new Error("Template NUMBERS file must have exactly one sheet");return r.SheetNames.forEach(function(C,T){T>=1&&(numbers_add_ws(_,x,T+1),S=numbers_iwa_find(_,x,1),E=mappa(parse_shallow(S.messages[0].data)[1],parse_TSP_Reference)),write_numbers_ws(_,x,r.Sheets[C],C,T,E[T])}),_}function numbers_iwa_doit(r,n,_,x){var S=CFB.find(r,n[_].location);if(!S)throw"Could not find ".concat(n[_].location," in Numbers template");var E=parse_iwa_file(decompress_iwa_file(S.content)),C=E.find(function(T){return T.id==_});x(C,E),S.content=compress_iwa_file(write_iwa_file(E)),S.size=S.content.length}function numbers_iwa_find(r,n,_){var x=CFB.find(r,n[_].location);if(!x)throw"Could not find ".concat(n[_].location," in Numbers template");var S=parse_iwa_file(decompress_iwa_file(x.content)),E=S.find(function(C){return C.id==_});return E}function numbers_add_ws(r,n,_){var x=-1,S=-1,E={};numbers_iwa_doit(r,n,1,function(A,I){var N=parse_shallow(A.messages[0].data);x=parse_TSP_Reference(parse_shallow(A.messages[0].data)[1][0].data),S=get_unique_msgid({deps:[1],location:n[x].location,type:2},n),E[x]=S,numbers_add_oref(A,S),N[1].push({type:2,data:write_TSP_Reference(S)});var V=numbers_iwa_find(r,n,x);V.id=S,n[1].location==n[S].location?I.push(V):numbers_iwa_doit(r,n,S,function(D,O){return O.push(V)}),A.messages[0].data=write_shallow(N)});var C=-1;numbers_iwa_doit(r,n,S,function(A,I){for(var N=parse_shallow(A.messages[0].data),V=3;V<=69;++V)delete N[V];var D=mappa(N[2],parse_TSP_Reference);D.forEach(function(M){return numbers_del_oref(A,M)}),C=get_unique_msgid({deps:[S],location:n[D[0]].location,type:n[D[0]].type},n),numbers_add_oref(A,C),E[D[0]]=C,N[2]=[{type:2,data:write_TSP_Reference(C)}];var O=numbers_iwa_find(r,n,D[0]);if(O.id=C,n[D[0]].location==n[S].location)I.push(O);else{var F=n[S].location;F=F.replace(/^Root Entry\//,""),F=F.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(r,n,2,function(M){var L=parse_shallow(M.messages[0].data),j=L[3].findIndex(function(H){var X,J,Z=parse_shallow(H.data);return(X=Z[3])!=null&&X[0]?u8str(Z[3][0].data)==F:!!((J=Z[2])!=null&&J[0]&&u8str(Z[2][0].data)==F)}),q=parse_shallow(L[3][j].data);q[6]||(q[6]=[]),q[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(C)}]])}),L[3][j].data=write_shallow(q),M.messages[0].data=write_shallow(L)}),numbers_iwa_doit(r,n,C,function(M,L){return L.push(O)})}A.messages[0].data=write_shallow(N)});var T=-1;numbers_iwa_doit(r,n,C,function(A,I){for(var N=parse_shallow(A.messages[0].data),V=parse_shallow(N[1][0].data),D=3;D<=69;++D)delete V[D];var O=parse_TSP_Reference(V[2][0].data);V[2][0].data=write_TSP_Reference(E[O]),N[1][0].data=write_shallow(V);var F=parse_TSP_Reference(N[2][0].data);numbers_del_oref(A,F),T=get_unique_msgid({deps:[C],location:n[F].location,type:n[F].type},n),numbers_add_oref(A,T),E[F]=T,N[2][0].data=write_TSP_Reference(T);var M=numbers_iwa_find(r,n,F);M.id=T,n[C].location==n[T].location?I.push(M):numbers_iwa_doit(r,n,T,function(L,j){return j.push(M)}),A.messages[0].data=write_shallow(N)});var B=n[T].location;B=B.replace(/^Root Entry\//,""),B=B.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(r,n,T,function(A,I){var N,V,D=parse_shallow(A.messages[0].data),O=u8str(D[1][0].data),F=O.replace(/-[A-Z0-9]*/,"-".concat(_.toString(16).padStart(4,"0")));if(D[1][0].data=stru8(F),[12,13,29,31,32,33,39,44,47,81,82,84].forEach(function(J){return delete D[J]}),D[45]){var M=parse_shallow(D[45][0].data),L=parse_TSP_Reference(M[1][0].data);numbers_del_oref(A,L),delete D[45]}if(D[70]){var j=parse_shallow(D[70][0].data);(N=j[2])==null||N.forEach(function(J){var Z=parse_shallow(J.data);[2,3].map(function(ae){return Z[ae][0]}).forEach(function(ae){var ce=parse_shallow(ae.data);if(ce[8]){var ve=parse_TSP_Reference(ce[8][0].data);numbers_del_oref(A,ve)}})}),delete D[70]}[46,30,34,35,36,38,48,49,60,61,62,63,64,71,72,73,74,75,85,86,87,88,89].forEach(function(J){if(D[J]){var Z=parse_TSP_Reference(D[J][0].data);delete D[J],numbers_del_oref(A,Z)}});var q=parse_shallow(D[4][0].data);{[2,4,5,6,11,12,13,15,16,17,18,19,20,21,22].forEach(function(J){var Z;if((Z=q[J])!=null&&Z[0]){var ae=parse_TSP_Reference(q[J][0].data),ce=get_unique_msgid({deps:[T],location:n[ae].location,type:n[ae].type},n);numbers_del_oref(A,ae),numbers_add_oref(A,ce),E[ae]=ce;var ve=numbers_iwa_find(r,n,ae);if(ve.id=ce,n[ae].location==n[T].location)I.push(ve);else{n[ce].location=n[ae].location.replace(ae.toString(),ce.toString()),n[ce].location==n[ae].location&&(n[ce].location=n[ce].location.replace(/\.iwa/,"-".concat(ce,".iwa"))),CFB.utils.cfb_add(r,n[ce].location,compress_iwa_file(write_iwa_file([ve])));var pe=n[ce].location;pe=pe.replace(/^Root Entry\//,""),pe=pe.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(r,n,2,function(G){var Y=parse_shallow(G.messages[0].data);Y[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ce)}],[{type:2,data:stru8(pe.replace(/-.*$/,""))}],[{type:2,data:stru8(pe)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),Y[1]=[{type:0,data:write_varint49(Math.max(ce+1,varint_to_i32(Y[1][0].data)))}];var U=Y[3].findIndex(function(ee){var re,oe,ie=parse_shallow(ee.data);return(re=ie[3])!=null&&re[0]?u8str(ie[3][0].data)==B:!!((oe=ie[2])!=null&&oe[0]&&u8str(ie[2][0].data)==B)}),W=parse_shallow(Y[3][U].data);W[6]||(W[6]=[]),W[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ce)}]])}),Y[3][U].data=write_shallow(W),G.messages[0].data=write_shallow(Y)})}q[J][0].data=write_TSP_Reference(ce)}});var H=parse_shallow(q[1][0].data);(V=H[2])==null||V.forEach(function(J){var Z=parse_TSP_Reference(J.data),ae=get_unique_msgid({deps:[T],location:n[Z].location,type:n[Z].type},n);numbers_del_oref(A,Z),numbers_add_oref(A,ae),E[Z]=ae;var ce=numbers_iwa_find(r,n,Z);if(ce.id=ae,n[Z].location==n[T].location)I.push(ce);else{n[ae].location=n[Z].location.replace(Z.toString(),ae.toString()),n[ae].location==n[Z].location&&(n[ae].location=n[ae].location.replace(/\.iwa/,"-".concat(ae,".iwa"))),CFB.utils.cfb_add(r,n[ae].location,compress_iwa_file(write_iwa_file([ce])));var ve=n[ae].location;ve=ve.replace(/^Root Entry\//,""),ve=ve.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(r,n,2,function(pe){var G=parse_shallow(pe.messages[0].data);G[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ae)}],[{type:2,data:stru8(ve.replace(/-.*$/,""))}],[{type:2,data:stru8(ve)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),G[1]=[{type:0,data:write_varint49(Math.max(ae+1,varint_to_i32(G[1][0].data)))}];var Y=G[3].findIndex(function(W){var ee,re,oe=parse_shallow(W.data);return(ee=oe[3])!=null&&ee[0]?u8str(oe[3][0].data)==B:!!((re=oe[2])!=null&&re[0]&&u8str(oe[2][0].data)==B)}),U=parse_shallow(G[3][Y].data);U[6]||(U[6]=[]),U[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ae)}]])}),G[3][Y].data=write_shallow(U),pe.messages[0].data=write_shallow(G)})}J.data=write_TSP_Reference(ae)}),q[1][0].data=write_shallow(H);var X=parse_shallow(q[3][0].data);X[1].forEach(function(J){var Z=parse_shallow(J.data),ae=parse_TSP_Reference(Z[2][0].data),ce=E[ae];if(!E[ae]){ce=get_unique_msgid({deps:[T],location:"",type:n[ae].type},n),n[ce].location="Root Entry/Index/Tables/Tile-".concat(ce,".iwa"),E[ae]=ce;var ve=numbers_iwa_find(r,n,ae);ve.id=ce,numbers_del_oref(A,ae),numbers_add_oref(A,ce),CFB.utils.cfb_add(r,"/Index/Tables/Tile-".concat(ce,".iwa"),compress_iwa_file(write_iwa_file([ve]))),numbers_iwa_doit(r,n,2,function(pe){var G=parse_shallow(pe.messages[0].data);G[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ce)}],[{type:2,data:stru8("Tables/Tile")}],[{type:2,data:stru8("Tables/Tile-".concat(ce))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),G[1]=[{type:0,data:write_varint49(Math.max(ce+1,varint_to_i32(G[1][0].data)))}];var Y=G[3].findIndex(function(W){var ee,re,oe=parse_shallow(W.data);return(ee=oe[3])!=null&&ee[0]?u8str(oe[3][0].data)==B:!!((re=oe[2])!=null&&re[0]&&u8str(oe[2][0].data)==B)}),U=parse_shallow(G[3][Y].data);U[6]||(U[6]=[]),U[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ce)}]])}),G[3][Y].data=write_shallow(U),pe.messages[0].data=write_shallow(G)})}Z[2][0].data=write_TSP_Reference(ce),J.data=write_shallow(Z)}),q[3][0].data=write_shallow(X)}D[4][0].data=write_shallow(q),A.messages[0].data=write_shallow(D)})}function write_numbers_ws(r,n,_,x,S,E){var C=[];numbers_iwa_doit(r,n,E,function(A){var I=parse_shallow(A.messages[0].data);I[1]=[{type:2,data:stru8(x)}],C=mappa(I[2],parse_TSP_Reference),A.messages[0].data=write_shallow(I)});var T=numbers_iwa_find(r,n,C[0]),B=parse_TSP_Reference(parse_shallow(T.messages[0].data)[2][0].data);numbers_iwa_doit(r,n,B,function(A,I){return write_numbers_tma(r,n,_,A,I,B)})}var USE_WIDE_ROWS=!0;function write_numbers_tma(r,n,_,x,S,E){var C=decode_range(_["!ref"]);C.s.r=C.s.c=0;var T=!1;C.e.c>999&&(T=!0,C.e.c=999),C.e.r>999999&&(T=!0,C.e.r=999999),T&&console.error("Truncating to ".concat(encode_range(C)));var B=sheet_to_json(_,{range:C,header:1}),A=["~Sh33tJ5~"],I=n[E].location;I=I.replace(/^Root Entry\//,""),I=I.replace(/^Index\//,"").replace(/\.iwa$/,"");var N=parse_shallow(x.messages[0].data);{N[6][0].data=write_varint49(C.e.r+1),N[7][0].data=write_varint49(C.e.c+1),delete N[46];var V=parse_shallow(N[4][0].data);{var D=parse_TSP_Reference(parse_shallow(V[1][0].data)[2][0].data);numbers_iwa_doit(r,n,D,function(U,W){var ee,re=parse_shallow(U.messages[0].data);if((ee=re?.[2])!=null&&ee[0])for(var oe=0;oe<B.length;++oe){var ie=parse_shallow(re[2][0].data);ie[1][0].data=write_varint49(oe),ie[4][0].data=write_varint49(B[oe].length),re[2][oe]={type:re[2][0].type,data:write_shallow(ie)}}U.messages[0].data=write_shallow(re)});var O=parse_TSP_Reference(V[2][0].data);numbers_iwa_doit(r,n,O,function(U,W){for(var ee=parse_shallow(U.messages[0].data),re=0;re<=C.e.c;++re){var oe=parse_shallow(ee[2][0].data);oe[1][0].data=write_varint49(re),oe[4][0].data=write_varint49(C.e.r+1),ee[2][re]={type:ee[2][0].type,data:write_shallow(oe)}}U.messages[0].data=write_shallow(ee)});var F=parse_shallow(V[9][0].data);F[1]=[];var M=parse_shallow(V[3][0].data);{var L=256;M[2]=[{type:0,data:write_varint49(L)}];var j=parse_TSP_Reference(parse_shallow(M[1][0].data)[2][0].data),q=function(){var U=numbers_iwa_find(r,n,2),W=parse_shallow(U.messages[0].data),ee=W[3].filter(function(re){return varint_to_i32(parse_shallow(re.data)[1][0].data)==j});return ee?.length?varint_to_i32(parse_shallow(ee[0].data)[12][0].data):0}();CFB.utils.cfb_del(r,n[j].location),numbers_iwa_doit(r,n,2,function(U){var W=parse_shallow(U.messages[0].data);W[3]=W[3].filter(function(oe){return varint_to_i32(parse_shallow(oe.data)[1][0].data)!=j});var ee=W[3].findIndex(function(oe){var ie,ne,te=parse_shallow(oe.data);return(ie=te[3])!=null&&ie[0]?u8str(te[3][0].data)==I:!!((ne=te[2])!=null&&ne[0]&&u8str(te[2][0].data)==I)}),re=parse_shallow(W[3][ee].data);re[6]||(re[6]=[]),re[6]=re[6].filter(function(oe){return varint_to_i32(parse_shallow(oe.data)[1][0].data)!=j}),W[3][ee].data=write_shallow(re),U.messages[0].data=write_shallow(W)}),numbers_del_oref(x,j),M[1]=[];for(var H=Math.ceil((C.e.r+1)/L),X=0;X<H;++X){var J=get_unique_msgid({deps:[],location:"",type:6002},n);n[J].location="Root Entry/Index/Tables/Tile-".concat(J,".iwa");for(var Z=[[],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(Math.min(C.e.r+1,(X+1)*L))}],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(Math.min((X+1)*L,C.e.r+1)-X*L)}],[],[{type:0,data:write_varint49(5)}],[{type:0,data:write_varint49(1)}],[{type:0,data:write_varint49(1)}]],ae=X*L;ae<=Math.min(C.e.r,(X+1)*L-1);++ae){var ce=write_TST_TileRowInfo(B[ae],A,USE_WIDE_ROWS);ce[1][0].data=write_varint49(ae-X*L),Z[5].push({data:write_shallow(ce),type:2})}M[1].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(X)}],[{type:2,data:write_TSP_Reference(J)}]])});var ve={id:J,messages:[write_iwam(6002,write_shallow(Z))]},pe=compress_iwa_file(write_iwa_file([ve]));CFB.utils.cfb_add(r,"/Index/Tables/Tile-".concat(J,".iwa"),pe),numbers_iwa_doit(r,n,2,function(U){var W=parse_shallow(U.messages[0].data);W[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(J)}],[{type:2,data:stru8("Tables/Tile")}],[{type:2,data:stru8("Tables/Tile-".concat(J))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(q)}]])}),W[1]=[{type:0,data:write_varint49(Math.max(J+1,varint_to_i32(W[1][0].data)))}];var ee=W[3].findIndex(function(oe){var ie,ne,te=parse_shallow(oe.data);return(ie=te[3])!=null&&ie[0]?u8str(te[3][0].data)==I:!!((ne=te[2])!=null&&ne[0]&&u8str(te[2][0].data)==I)}),re=parse_shallow(W[3][ee].data);re[6]||(re[6]=[]),re[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(J)}]])}),W[3][ee].data=write_shallow(re),U.messages[0].data=write_shallow(W)}),numbers_add_oref(x,J),F[1].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(X*L)}],[{type:0,data:write_varint49(X)}]])})}}if(V[3][0].data=write_shallow(M),V[9][0].data=write_shallow(F),V[10]=[{type:2,data:new Uint8Array([])}],_["!merges"]){var G=get_unique_msgid({type:6144,deps:[E],location:n[E].location},n);S.push({id:G,messages:[write_iwam(6144,write_shallow([[],_["!merges"].map(function(U){return{type:2,data:write_shallow([[],[{type:2,data:write_shallow([[],[{type:5,data:new Uint8Array(new Uint16Array([U.s.r,U.s.c]).buffer)}]])}],[{type:2,data:write_shallow([[],[{type:5,data:new Uint8Array(new Uint16Array([U.e.r-U.s.r+1,U.e.c-U.s.c+1]).buffer)}]])}]])}})]))]}),V[13]=[{type:2,data:write_TSP_Reference(G)}],numbers_iwa_doit(r,n,2,function(U){var W=parse_shallow(U.messages[0].data),ee=W[3].findIndex(function(oe){var ie,ne,te=parse_shallow(oe.data);return(ie=te[3])!=null&&ie[0]?u8str(te[3][0].data)==I:!!((ne=te[2])!=null&&ne[0]&&u8str(te[2][0].data)==I)}),re=parse_shallow(W[3][ee].data);re[6]||(re[6]=[]),re[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(G)}]])}),W[3][ee].data=write_shallow(re),U.messages[0].data=write_shallow(W)}),numbers_add_oref(x,G)}else delete V[13];var Y=parse_TSP_Reference(V[4][0].data);numbers_iwa_doit(r,n,Y,function(U){var W=parse_shallow(U.messages[0].data);W[3]=[],A.forEach(function(ee,re){re!=0&&W[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(re)}],[{type:0,data:write_varint49(1)}],[{type:2,data:stru8(ee)}]])})}),U.messages[0].data=write_shallow(W)})}N[4][0].data=write_shallow(V)}x.messages[0].data=write_shallow(N)}function fix_opts_func(r){return function(_){for(var x=0;x!=r.length;++x){var S=r[x];_[S[0]]===void 0&&(_[S[0]]=S[1]),S[2]==="n"&&(_[S[0]]=Number(_[S[0]]))}}}function fix_read_opts(r){fix_opts_func([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(r)}function fix_write_opts(r){fix_opts_func([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(r)}function get_sheet_type(r){return RELS.WS.indexOf(r)>-1?"sheet":r==RELS.CS?"chart":r==RELS.DS?"dialog":r==RELS.MS?"macro":r&&r.length?r:"sheet"}function safe_parse_wbrels(r,n){if(!r)return 0;try{r=n.map(function(x){return x.id||(x.id=x.strRelID),[x.name,r["!id"][x.id].Target,get_sheet_type(r["!id"][x.id].Type)]})}catch{return null}return!r||r.length===0?null:r}function safe_parse_sheet(r,n,_,x,S,E,C,T,B,A,I,N){try{E[x]=parse_rels(getzipstr(r,_,!0),n);var V=getzipdata(r,n),D;switch(T){case"sheet":D=parse_ws(V,n,S,B,E[x],A,I,N);break;case"chart":if(D=parse_cs(V,n,S,B,E[x],A,I,N),!D||!D["!drawel"])break;var O=resolve_path(D["!drawel"].Target,n),F=get_rels_path(O),M=parse_drawing(getzipstr(r,O,!0),parse_rels(getzipstr(r,F,!0),O)),L=resolve_path(M,O),j=get_rels_path(L);D=parse_chart(getzipstr(r,L,!0),L,B,parse_rels(getzipstr(r,j,!0),L),A,D);break;case"macro":D=parse_ms(V,n,S,B,E[x],A,I,N);break;case"dialog":D=parse_ds(V,n,S,B,E[x],A,I,N);break;default:throw new Error("Unrecognized sheet type "+T)}C[x]=D;var q=[],H=[];E&&E[x]&&keys(E[x]).forEach(function(X){var J="";if(E[x][X].Type==RELS.CMNT){if(J=resolve_path(E[x][X].Target,n),q=parse_cmnt(getzipdata(r,J,!0),J,B),!q||!q.length)return;sheet_insert_comments(D,q,!1)}E[x][X].Type==RELS.TCMNT&&(J=resolve_path(E[x][X].Target,n),H=H.concat(parse_tcmnt_xml(getzipdata(r,J,!0),B)))}),H&&H.length&&sheet_insert_comments(D,H,!0,B.people||[])}catch(X){if(B.WTF)throw X}}function strip_front_slash(r){return r.charAt(0)=="/"?r.slice(1):r}function parse_zip(r,n){if(make_ssf(),n=n||{},fix_read_opts(n),safegetzipfile(r,"META-INF/manifest.xml")||safegetzipfile(r,"objectdata.xml"))return parse_ods(r,n);if(safegetzipfile(r,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof parse_numbers_iwa<"u"){if(r.FileIndex)return parse_numbers_iwa(r,n);var _=CFB.utils.cfb_new();return zipentries(r).forEach(function(W){zip_add_file(_,W,getzipbin(r,W))}),parse_numbers_iwa(_,n)}throw new Error("Unsupported NUMBERS file")}if(!safegetzipfile(r,"[Content_Types].xml")){if(safegetzipfile(r,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(safegetzipfile(r,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");var x=CFB.find(r,"Index.zip");if(x)return n=dup(n),delete n.type,typeof x.content=="string"&&(n.type="binary"),typeof Bun<"u"&&Buffer.isBuffer(x.content)?readSync(new Uint8Array(x.content),n):readSync(x.content,n);throw new Error("Unsupported ZIP file")}var S=zipentries(r),E=parse_ct(getzipstr(r,"[Content_Types].xml")),C=!1,T,B;if(E.workbooks.length===0&&(B="xl/workbook.xml",getzipdata(r,B,!0)&&E.workbooks.push(B)),E.workbooks.length===0){if(B="xl/workbook.bin",!getzipdata(r,B,!0))throw new Error("Could not find workbook");E.workbooks.push(B),C=!0}E.workbooks[0].slice(-3)=="bin"&&(C=!0);var A={},I={};if(!n.bookSheets&&!n.bookProps){if(strs=[],E.sst)try{strs=parse_sst(getzipdata(r,strip_front_slash(E.sst)),E.sst,n)}catch(W){if(n.WTF)throw W}n.cellStyles&&E.themes.length&&(A=parse_theme_xml(getzipstr(r,E.themes[0].replace(/^\//,""),!0)||"",n)),E.style&&(I=parse_sty(getzipdata(r,strip_front_slash(E.style)),E.style,A,n))}E.links.map(function(W){try{var ee=parse_rels(getzipstr(r,get_rels_path(strip_front_slash(W))),W);return parse_xlink(getzipdata(r,strip_front_slash(W)),ee,W,n)}catch{}});var N=parse_wb(getzipdata(r,strip_front_slash(E.workbooks[0])),E.workbooks[0],n),V={},D="";E.coreprops.length&&(D=getzipdata(r,strip_front_slash(E.coreprops[0]),!0),D&&(V=parse_core_props(D)),E.extprops.length!==0&&(D=getzipdata(r,strip_front_slash(E.extprops[0]),!0),D&&parse_ext_props(D,V,n)));var O={};(!n.bookSheets||n.bookProps)&&E.custprops.length!==0&&(D=getzipstr(r,strip_front_slash(E.custprops[0]),!0),D&&(O=parse_cust_props(D,n)));var F={};if((n.bookSheets||n.bookProps)&&(N.Sheets?T=N.Sheets.map(function(ee){return ee.name}):V.Worksheets&&V.SheetNames.length>0&&(T=V.SheetNames),n.bookProps&&(F.Props=V,F.Custprops=O),n.bookSheets&&typeof T<"u"&&(F.SheetNames=T),n.bookSheets?F.SheetNames:n.bookProps))return F;T={};var M={};n.bookDeps&&E.calcchain&&(M=parse_cc(getzipdata(r,strip_front_slash(E.calcchain)),E.calcchain));var L=0,j={},q,H;{var X=N.Sheets;V.Worksheets=X.length,V.SheetNames=[];for(var J=0;J!=X.length;++J)V.SheetNames[J]=X[J].name}var Z=C?"bin":"xml",ae=E.workbooks[0].lastIndexOf("/"),ce=(E.workbooks[0].slice(0,ae+1)+"_rels/"+E.workbooks[0].slice(ae+1)+".rels").replace(/^\//,"");safegetzipfile(r,ce)||(ce="xl/_rels/workbook."+Z+".rels");var ve=parse_rels(getzipstr(r,ce,!0),ce.replace(/_rels.*/,"s5s"));(E.metadata||[]).length>=1&&(n.xlmeta=parse_xlmeta(getzipdata(r,strip_front_slash(E.metadata[0])),E.metadata[0],n)),(E.people||[]).length>=1&&(n.people=parse_people_xml(getzipdata(r,strip_front_slash(E.people[0])),n)),ve&&(ve=safe_parse_wbrels(ve,N.Sheets));var pe=getzipdata(r,"xl/worksheets/sheet.xml",!0)?1:0;e:for(L=0;L!=V.Worksheets;++L){var G="sheet";if(ve&&ve[L]?(q="xl/"+ve[L][1].replace(/[\/]?xl\//,""),safegetzipfile(r,q)||(q=ve[L][1]),safegetzipfile(r,q)||(q=ce.replace(/_rels\/.*$/,"")+ve[L][1]),G=ve[L][2]):(q="xl/worksheets/sheet"+(L+1-pe)+"."+Z,q=q.replace(/sheet0\./,"sheet.")),H=q.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),n&&n.sheets!=null)switch(typeof n.sheets){case"number":if(L!=n.sheets)continue e;break;case"string":if(V.SheetNames[L].toLowerCase()!=n.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(n.sheets)){for(var Y=!1,U=0;U!=n.sheets.length;++U)typeof n.sheets[U]=="number"&&n.sheets[U]==L&&(Y=1),typeof n.sheets[U]=="string"&&n.sheets[U].toLowerCase()==V.SheetNames[L].toLowerCase()&&(Y=1);if(!Y)continue e}}safe_parse_sheet(r,q,H,V.SheetNames[L],L,j,T,G,n,N,A,I)}return F={Directory:E,Workbook:N,Props:V,Custprops:O,Deps:M,Sheets:T,SheetNames:V.SheetNames,Strings:strs,Styles:I,Themes:A,SSF:dup(table_fmt)},n&&n.bookFiles&&(r.files?(F.keys=S,F.files=r.files):(F.keys=[],F.files={},r.FullPaths.forEach(function(W,ee){W=W.replace(/^Root Entry[\/]/,""),F.keys.push(W),F.files[W]=r.FileIndex[ee]}))),n&&n.bookVBA&&(E.vba.length>0?F.vbaraw=getzipdata(r,strip_front_slash(E.vba[0]),!0):E.defaults&&E.defaults.bin===CT_VBA&&(F.vbaraw=getzipdata(r,"xl/vbaProject.bin",!0))),F.bookType=C?"xlsb":"xlsx",F}function parse_xlsxcfb(r,n){var _=n||{},x="Workbook",S=CFB.find(r,x);try{if(x="/!DataSpaces/Version",S=CFB.find(r,x),!S||!S.content)throw new Error("ECMA-376 Encrypted file missing "+x);if(parse_DataSpaceVersionInfo(S.content),x="/!DataSpaces/DataSpaceMap",S=CFB.find(r,x),!S||!S.content)throw new Error("ECMA-376 Encrypted file missing "+x);var E=parse_DataSpaceMap(S.content);if(E.length!==1||E[0].comps.length!==1||E[0].comps[0].t!==0||E[0].name!=="StrongEncryptionDataSpace"||E[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+x);if(x="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",S=CFB.find(r,x),!S||!S.content)throw new Error("ECMA-376 Encrypted file missing "+x);var C=parse_DataSpaceDefinition(S.content);if(C.length!=1||C[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+x);if(x="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",S=CFB.find(r,x),!S||!S.content)throw new Error("ECMA-376 Encrypted file missing "+x);parse_Primary(S.content)}catch{}if(x="/EncryptionInfo",S=CFB.find(r,x),!S||!S.content)throw new Error("ECMA-376 Encrypted file missing "+x);var T=parse_EncryptionInfo(S.content);if(x="/EncryptedPackage",S=CFB.find(r,x),!S||!S.content)throw new Error("ECMA-376 Encrypted file missing "+x);if(T[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(T[1],S.content,_.password||"",_);if(T[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(T[1],S.content,_.password||"",_);throw new Error("File is password-protected")}function write_zip_xlsb(r,n){r&&!r.SSF&&(r.SSF=dup(table_fmt)),r&&r.SSF&&(make_ssf(),SSF_load_table(r.SSF),n.revssf=evert_num(r.SSF),n.revssf[r.SSF[65535]]=0,n.ssf=r.SSF),n.rels={},n.wbrels={},n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,browser_has_Map?n.revStrings=new Map:(n.revStrings={},n.revStrings.foo=[],delete n.revStrings.foo);var _="bin",x=!0,S=new_ct();fix_write_opts(n=n||{});var E=zip_new(),C="",T=0;if(n.cellXfs=[],get_cell_style(n.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),C="docProps/core.xml",zip_add_file(E,C,write_core_props(r.Props,n)),S.coreprops.push(C),add_rels(n.rels,2,C,RELS.CORE_PROPS),C="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var B=[],A=0;A<r.SheetNames.length;++A)(r.Workbook.Sheets[A]||{}).Hidden!=2&&B.push(r.SheetNames[A]);r.Props.SheetNames=B}for(r.Props.Worksheets=r.Props.SheetNames.length,zip_add_file(E,C,write_ext_props(r.Props)),S.extprops.push(C),add_rels(n.rels,3,C,RELS.EXT_PROPS),r.Custprops!==r.Props&&keys(r.Custprops||{}).length>0&&(C="docProps/custom.xml",zip_add_file(E,C,write_cust_props(r.Custprops)),S.custprops.push(C),add_rels(n.rels,4,C,RELS.CUST_PROPS)),T=1;T<=r.SheetNames.length;++T){var I={"!id":{}},N=r.Sheets[r.SheetNames[T-1]],V=(N||{})["!type"]||"sheet";switch(V){case"chart":default:C="xl/worksheets/sheet"+T+"."+_,zip_add_file(E,C,write_ws_bin(T-1,n,r,I)),S.sheets.push(C),add_rels(n.wbrels,-1,"worksheets/sheet"+T+"."+_,RELS.WS[0])}if(N){var D=N["!comments"],O=!1,F="";D&&D.length>0&&(F="xl/comments"+T+"."+_,zip_add_file(E,F,write_comments_bin(D)),S.comments.push(F),add_rels(I,-1,"../comments"+T+"."+_,RELS.CMNT),O=!0),N["!legacy"]&&O&&zip_add_file(E,"xl/drawings/vmlDrawing"+T+".vml",write_vml(T,N["!comments"])),delete N["!comments"],delete N["!legacy"]}I["!id"].rId1&&zip_add_file(E,get_rels_path(C),write_rels(I))}n.Strings!=null&&n.Strings.length>0&&(C="xl/sharedStrings."+_,zip_add_file(E,C,write_sst_bin(n.Strings)),S.strs.push(C),add_rels(n.wbrels,-1,"sharedStrings."+_,RELS.SST)),C="xl/workbook."+_,zip_add_file(E,C,write_wb_bin(r)),S.workbooks.push(C),add_rels(n.rels,1,C,RELS.WB),C="xl/theme/theme1.xml";var M=write_theme(r.Themes,n);return zip_add_file(E,C,M),S.themes.push(C),add_rels(n.wbrels,-1,"theme/theme1.xml",RELS.THEME),C="xl/styles."+_,zip_add_file(E,C,write_sty_bin(r,n)),S.styles.push(C),add_rels(n.wbrels,-1,"styles."+_,RELS.STY),r.vbaraw&&x&&(C="xl/vbaProject.bin",zip_add_file(E,C,r.vbaraw),S.vba.push(C),add_rels(n.wbrels,-1,"vbaProject.bin",RELS.VBA)),C="xl/metadata."+_,zip_add_file(E,C,write_xlmeta_bin()),S.metadata.push(C),add_rels(n.wbrels,-1,"metadata."+_,RELS.XLMETA),zip_add_file(E,"[Content_Types].xml",write_ct(S,n)),zip_add_file(E,"_rels/.rels",write_rels(n.rels)),zip_add_file(E,"xl/_rels/workbook."+_+".rels",write_rels(n.wbrels)),delete n.revssf,delete n.ssf,E}function write_zip_xlsx(r,n){r&&!r.SSF&&(r.SSF=dup(table_fmt)),r&&r.SSF&&(make_ssf(),SSF_load_table(r.SSF),n.revssf=evert_num(r.SSF),n.revssf[r.SSF[65535]]=0,n.ssf=r.SSF),n.rels={},n.wbrels={},n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,browser_has_Map?n.revStrings=new Map:(n.revStrings={},n.revStrings.foo=[],delete n.revStrings.foo);var _="xml",x=VBAFMTS.indexOf(n.bookType)>-1,S=new_ct();fix_write_opts(n=n||{});var E=zip_new(),C="",T=0;if(n.cellXfs=[],get_cell_style(n.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),C="docProps/core.xml",zip_add_file(E,C,write_core_props(r.Props,n)),S.coreprops.push(C),add_rels(n.rels,2,C,RELS.CORE_PROPS),C="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var B=[],A=0;A<r.SheetNames.length;++A)(r.Workbook.Sheets[A]||{}).Hidden!=2&&B.push(r.SheetNames[A]);r.Props.SheetNames=B}r.Props.Worksheets=r.Props.SheetNames.length,zip_add_file(E,C,write_ext_props(r.Props)),S.extprops.push(C),add_rels(n.rels,3,C,RELS.EXT_PROPS),r.Custprops!==r.Props&&keys(r.Custprops||{}).length>0&&(C="docProps/custom.xml",zip_add_file(E,C,write_cust_props(r.Custprops)),S.custprops.push(C),add_rels(n.rels,4,C,RELS.CUST_PROPS));var I=["SheetJ5"];for(n.tcid=0,T=1;T<=r.SheetNames.length;++T){var N={"!id":{}},V=r.Sheets[r.SheetNames[T-1]],D=(V||{})["!type"]||"sheet";switch(D){case"chart":default:C="xl/worksheets/sheet"+T+"."+_,zip_add_file(E,C,write_ws_xml(T-1,n,r,N)),S.sheets.push(C),add_rels(n.wbrels,-1,"worksheets/sheet"+T+"."+_,RELS.WS[0])}if(V){var O=V["!comments"],F=!1,M="";if(O&&O.length>0){var L=!1;O.forEach(function(j){j[1].forEach(function(q){q.T==!0&&(L=!0)})}),L&&(M="xl/threadedComments/threadedComment"+T+".xml",zip_add_file(E,M,write_tcmnt_xml(O,I,n)),S.threadedcomments.push(M),add_rels(N,-1,"../threadedComments/threadedComment"+T+".xml",RELS.TCMNT)),M="xl/comments"+T+"."+_,zip_add_file(E,M,write_comments_xml(O)),S.comments.push(M),add_rels(N,-1,"../comments"+T+"."+_,RELS.CMNT),F=!0}V["!legacy"]&&F&&zip_add_file(E,"xl/drawings/vmlDrawing"+T+".vml",write_vml(T,V["!comments"])),delete V["!comments"],delete V["!legacy"]}N["!id"].rId1&&zip_add_file(E,get_rels_path(C),write_rels(N))}return n.Strings!=null&&n.Strings.length>0&&(C="xl/sharedStrings."+_,zip_add_file(E,C,write_sst_xml(n.Strings,n)),S.strs.push(C),add_rels(n.wbrels,-1,"sharedStrings."+_,RELS.SST)),C="xl/workbook."+_,zip_add_file(E,C,write_wb_xml(r)),S.workbooks.push(C),add_rels(n.rels,1,C,RELS.WB),C="xl/theme/theme1.xml",zip_add_file(E,C,write_theme(r.Themes,n)),S.themes.push(C),add_rels(n.wbrels,-1,"theme/theme1.xml",RELS.THEME),C="xl/styles."+_,zip_add_file(E,C,write_sty_xml(r,n)),S.styles.push(C),add_rels(n.wbrels,-1,"styles."+_,RELS.STY),r.vbaraw&&x&&(C="xl/vbaProject.bin",zip_add_file(E,C,r.vbaraw),S.vba.push(C),add_rels(n.wbrels,-1,"vbaProject.bin",RELS.VBA)),C="xl/metadata."+_,zip_add_file(E,C,write_xlmeta_xml()),S.metadata.push(C),add_rels(n.wbrels,-1,"metadata."+_,RELS.XLMETA),I.length>1&&(C="xl/persons/person.xml",zip_add_file(E,C,write_people_xml(I)),S.people.push(C),add_rels(n.wbrels,-1,"persons/person.xml",RELS.PEOPLE)),zip_add_file(E,"[Content_Types].xml",write_ct(S,n)),zip_add_file(E,"_rels/.rels",write_rels(n.rels)),zip_add_file(E,"xl/_rels/workbook."+_+".rels",write_rels(n.wbrels)),delete n.revssf,delete n.ssf,E}function firstbyte(r,n){var _="";switch((n||{}).type||"base64"){case"buffer":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];case"base64":_=Base64_decode(r.slice(0,12));break;case"binary":_=r;break;case"array":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];default:throw new Error("Unrecognized type "+(n&&n.type||"undefined"))}return[_.charCodeAt(0),_.charCodeAt(1),_.charCodeAt(2),_.charCodeAt(3),_.charCodeAt(4),_.charCodeAt(5),_.charCodeAt(6),_.charCodeAt(7)]}function read_cfb(r,n){return CFB.find(r,"EncryptedPackage")?parse_xlsxcfb(r,n):parse_xlscfb(r,n)}function read_zip(r,n){var _,x=r,S=n||{};return S.type||(S.type=has_buf&&Buffer.isBuffer(r)?"buffer":"base64"),_=zip_read(x,S),parse_zip(_,S)}function read_plaintext(r,n){var _=0;e:for(;_<r.length;)switch(r.charCodeAt(_)){case 10:case 13:case 32:++_;break;case 60:return parse_xlml(r.slice(_),n);default:break e}return PRN.to_workbook(r,n)}function read_plaintext_raw(r,n){var _="",x=firstbyte(r,n);switch(n.type){case"base64":_=Base64_decode(r);break;case"binary":_=r;break;case"buffer":_=r.toString("binary");break;case"array":_=cc2str(r);break;default:throw new Error("Unrecognized type "+n.type)}return x[0]==239&&x[1]==187&&x[2]==191&&(_=utf8read(_)),n.type="binary",read_plaintext(_,n)}function read_utf16(r,n){var _=r;return n.type=="base64"&&(_=Base64_decode(_)),_=utf16leread(_.slice(2)),n.type="binary",read_plaintext(_,n)}function bstrify(r){return r.match(/[^\x00-\x7F]/)?utf8write(r):r}function read_prn(r,n,_,x){return x?(_.type="string",PRN.to_workbook(r,_)):PRN.to_workbook(n,_)}function readSync(r,n){reset_cp();var _=n||{};if(_.codepage&&typeof $cptable>"u"&&console.error("Codepage tables are not loaded.  Non-ASCII characters may not give expected results"),typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer)return readSync(new Uint8Array(r),(_=dup(_),_.type="array",_));typeof Uint8Array<"u"&&r instanceof Uint8Array&&!_.type&&(_.type=typeof Deno<"u"?"buffer":"array");var x=r,S=[0,0,0,0],E=!1;if(_.cellStyles&&(_.cellNF=!0,_.sheetStubs=!0),_ssfopts={},_.dateNF&&(_ssfopts.dateNF=_.dateNF),_.type||(_.type=has_buf&&Buffer.isBuffer(r)?"buffer":"base64"),_.type=="file"&&(_.type=has_buf?"buffer":"binary",x=read_binary(r),typeof Uint8Array<"u"&&!has_buf&&(_.type="array")),_.type=="string"&&(E=!0,_.type="binary",_.codepage=65001,x=bstrify(r)),_.type=="array"&&typeof Uint8Array<"u"&&r instanceof Uint8Array&&typeof ArrayBuffer<"u"){var C=new ArrayBuffer(3),T=new Uint8Array(C);if(T.foo="bar",!T.foo)return _=dup(_),_.type="array",readSync(ab2a(x),_)}switch((S=firstbyte(x,_))[0]){case 208:if(S[1]===207&&S[2]===17&&S[3]===224&&S[4]===161&&S[5]===177&&S[6]===26&&S[7]===225)return read_cfb(CFB.read(x,_),_);break;case 9:if(S[1]<=8)return parse_xlscfb(x,_);break;case 60:return parse_xlml(x,_);case 73:if(S[1]===73&&S[2]===42&&S[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(S[1]===68)return read_wb_ID(x,_);break;case 84:if(S[1]===65&&S[2]===66&&S[3]===76)return DIF.to_workbook(x,_);break;case 80:return S[1]===75&&S[2]<9&&S[3]<9?read_zip(x,_):read_prn(r,x,_,E);case 239:return S[3]===60?parse_xlml(x,_):read_prn(r,x,_,E);case 255:if(S[1]===254)return read_utf16(x,_);if(S[1]===0&&S[2]===2&&S[3]===0)return WK_.to_workbook(x,_);break;case 0:if(S[1]===0&&(S[2]>=2&&S[3]===0||S[2]===0&&(S[3]===8||S[3]===9)))return WK_.to_workbook(x,_);break;case 3:case 131:case 139:case 140:return DBF.to_workbook(x,_);case 123:if(S[1]===92&&S[2]===114&&S[3]===116)return rtf_to_workbook(x,_);break;case 10:case 13:case 32:return read_plaintext_raw(x,_);case 137:if(S[1]===80&&S[2]===78&&S[3]===71)throw new Error("PNG Image File is not a spreadsheet");break;case 8:if(S[1]===231)throw new Error("Unsupported Multiplan 1.x file!");break;case 12:if(S[1]===236)throw new Error("Unsupported Multiplan 2.x file!");if(S[1]===237)throw new Error("Unsupported Multiplan 3.x file!");break}return DBF_SUPPORTED_VERSIONS.indexOf(S[0])>-1&&S[2]<=12&&S[3]<=31?DBF.to_workbook(x,_):read_prn(r,x,_,E)}function readFileSync(r,n){var _=n||{};return _.type="file",readSync(r,_)}function write_cfb_ctr(r,n){switch(n.type){case"base64":case"binary":break;case"buffer":case"array":n.type="";break;case"file":return write_dl(n.file,CFB.write(r,{type:has_buf?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+n.bookType+"' files");default:throw new Error("Unrecognized type "+n.type)}return CFB.write(r,n)}function write_zip(r,n){switch(n.bookType){case"ods":return write_ods(r,n);case"numbers":return write_numbers_iwa(r,n);case"xlsb":return write_zip_xlsb(r,n);default:return write_zip_xlsx(r,n)}}function write_zip_type(r,n){var _=dup(n||{}),x=write_zip(r,_);return write_zip_denouement(x,_)}function write_zip_denouement(r,n){var _={},x=has_buf?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(n.compression&&(_.compression="DEFLATE"),n.password)_.type=x;else switch(n.type){case"base64":_.type="base64";break;case"binary":_.type="string";break;case"string":throw new Error("'string' output type invalid for '"+n.bookType+"' files");case"buffer":case"file":_.type=x;break;default:throw new Error("Unrecognized type "+n.type)}var S=r.FullPaths?CFB.write(r,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[_.type]||_.type,compression:!!n.compression}):r.generate(_);if(typeof Deno<"u"&&typeof S=="string"){if(n.type=="binary"||n.type=="base64")return S;S=new Uint8Array(s2ab(S))}return n.password&&typeof encrypt_agile<"u"?write_cfb_ctr(encrypt_agile(S,n.password),n):n.type==="file"?write_dl(n.file,S):n.type=="string"?utf8read(S):S}function write_cfb_type(r,n){var _=n||{},x=write_xlscfb(r,_);return write_cfb_ctr(x,_)}function write_string_type(r,n,_){_||(_="");var x=_+r;switch(n.type){case"base64":return Base64_encode(utf8write(x));case"binary":return utf8write(x);case"string":return r;case"file":return write_dl(n.file,x,"utf8");case"buffer":return has_buf?Buffer_from(x,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(x):write_string_type(x,{type:"binary"}).split("").map(function(S){return S.charCodeAt(0)})}throw new Error("Unrecognized type "+n.type)}function write_stxt_type(r,n){switch(n.type){case"base64":return Base64_encode_pass(r);case"binary":return r;case"string":return r;case"file":return write_dl(n.file,r,"binary");case"buffer":return has_buf?Buffer_from(r,"binary"):r.split("").map(function(_){return _.charCodeAt(0)})}throw new Error("Unrecognized type "+n.type)}function write_binary_type(r,n){switch(n.type){case"string":case"base64":case"binary":for(var _="",x=0;x<r.length;++x)_+=String.fromCharCode(r[x]);return n.type=="base64"?Base64_encode(_):n.type=="string"?utf8read(_):_;case"file":return write_dl(n.file,r);case"buffer":return r;default:throw new Error("Unrecognized type "+n.type)}}function writeSync(r,n){reset_cp(),check_wb(r);var _=dup(n||{});if(_.cellStyles&&(_.cellNF=!0,_.sheetStubs=!0),_.type=="array"){_.type="binary";var x=writeSync(r,_);return _.type="array",s2ab(x)}var S=0;if(_.sheet&&(typeof _.sheet=="number"?S=_.sheet:S=r.SheetNames.indexOf(_.sheet),!r.SheetNames[S]))throw new Error("Sheet not found: "+_.sheet+" : "+typeof _.sheet);switch(_.bookType||"xlsb"){case"xml":case"xlml":return write_string_type(write_xlml(r,_),_);case"slk":case"sylk":return write_string_type(SYLK.from_sheet(r.Sheets[r.SheetNames[S]],_,r),_);case"htm":case"html":return write_string_type(sheet_to_html(r.Sheets[r.SheetNames[S]],_),_);case"txt":return write_stxt_type(sheet_to_txt(r.Sheets[r.SheetNames[S]],_),_);case"csv":return write_string_type(sheet_to_csv(r.Sheets[r.SheetNames[S]],_),_,"\uFEFF");case"dif":return write_string_type(DIF.from_sheet(r.Sheets[r.SheetNames[S]],_),_);case"dbf":return write_binary_type(DBF.from_sheet(r.Sheets[r.SheetNames[S]],_),_);case"prn":return write_string_type(PRN.from_sheet(r.Sheets[r.SheetNames[S]],_),_);case"rtf":return write_string_type(sheet_to_rtf(r.Sheets[r.SheetNames[S]]),_);case"eth":return write_string_type(ETH.from_sheet(r.Sheets[r.SheetNames[S]],_),_);case"fods":return write_string_type(write_ods(r,_),_);case"wk1":return write_binary_type(WK_.sheet_to_wk1(r.Sheets[r.SheetNames[S]],_),_);case"wk3":return write_binary_type(WK_.book_to_wk3(r,_),_);case"biff2":_.biff||(_.biff=2);case"biff3":_.biff||(_.biff=3);case"biff4":return _.biff||(_.biff=4),write_binary_type(write_biff_buf(r,_),_);case"biff5":_.biff||(_.biff=5);case"biff8":case"xla":case"xls":return _.biff||(_.biff=8),write_cfb_type(r,_);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return write_zip_type(r,_);default:throw new Error("Unrecognized bookType |"+_.bookType+"|")}}function resolve_book_type(r){if(!r.bookType){var n={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},_=r.file.slice(r.file.lastIndexOf(".")).toLowerCase();_.match(/^\.[a-z]+$/)&&(r.bookType=_.slice(1)),r.bookType=n[r.bookType]||r.bookType}}function writeFileSync(r,n,_){var x=_||{};return x.type="file",x.file=n,resolve_book_type(x),writeSync(r,x)}function make_json_row(r,n,_,x,S,E,C){var T=encode_row(_),B=C.defval,A=C.raw||!Object.prototype.hasOwnProperty.call(C,"raw"),I=!0,N=r["!data"]!=null,V=S===1?[]:{};if(S!==1)if(Object.defineProperty)try{Object.defineProperty(V,"__rowNum__",{value:_,enumerable:!1})}catch{V.__rowNum__=_}else V.__rowNum__=_;if(!N||r["!data"][_])for(var D=n.s.c;D<=n.e.c;++D){var O=N?(r["!data"][_]||[])[D]:r[x[D]+T];if(O===void 0||O.t===void 0){if(B===void 0)continue;E[D]!=null&&(V[E[D]]=B);continue}var F=O.v;switch(O.t){case"z":if(F==null)break;continue;case"e":F=F==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+O.t)}if(E[D]!=null){if(F==null)if(O.t=="e"&&F===null)V[E[D]]=null;else if(B!==void 0)V[E[D]]=B;else if(A&&F===null)V[E[D]]=null;else continue;else V[E[D]]=A&&(O.t!=="n"||O.t==="n"&&C.rawNumbers!==!1)?F:format_cell(O,F,C);F!=null&&(I=!1)}}return{row:V,isempty:I}}function sheet_to_json(r,n){if(r==null||r["!ref"]==null)return[];var _={t:"n",v:0},x=0,S=1,E=[],C=0,T="",B={s:{r:0,c:0},e:{r:0,c:0}},A=n||{},I=A.range!=null?A.range:r["!ref"];switch(A.header===1?x=1:A.header==="A"?x=2:Array.isArray(A.header)?x=3:A.header==null&&(x=0),typeof I){case"string":B=safe_decode_range(I);break;case"number":B=safe_decode_range(r["!ref"]),B.s.r=I;break;default:B=I}x>0&&(S=0);var N=encode_row(B.s.r),V=[],D=[],O=0,F=0,M=r["!data"]!=null,L=B.s.r,j=0,q={};M&&!r["!data"][L]&&(r["!data"][L]=[]);var H=A.skipHidden&&r["!cols"]||[],X=A.skipHidden&&r["!rows"]||[];for(j=B.s.c;j<=B.e.c;++j)if(!(H[j]||{}).hidden)switch(V[j]=encode_col(j),_=M?r["!data"][L][j]:r[V[j]+N],x){case 1:E[j]=j-B.s.c;break;case 2:E[j]=V[j];break;case 3:E[j]=A.header[j-B.s.c];break;default:if(_==null&&(_={w:"__EMPTY",t:"s"}),T=C=format_cell(_,null,A),F=q[C]||0,!F)q[C]=1;else{do T=C+"_"+F++;while(q[T]);q[C]=F,q[T]=1}E[j]=T}for(L=B.s.r+S;L<=B.e.r;++L)if(!(X[L]||{}).hidden){var J=make_json_row(r,B,L,V,x,E,A);(J.isempty===!1||(x===1?A.blankrows!==!1:A.blankrows))&&(D[O++]=J.row)}return D.length=O,D}var qreg=/"/g;function make_csv_row(r,n,_,x,S,E,C,T){for(var B=!0,A=[],I="",N=encode_row(_),V=r["!data"]!=null,D=V&&r["!data"][_]||[],O=n.s.c;O<=n.e.c;++O)if(x[O]){var F=V?D[O]:r[x[O]+N];if(F==null)I="";else if(F.v!=null){B=!1,I=""+(T.rawNumbers&&F.t=="n"?F.v:format_cell(F,null,T));for(var M=0,L=0;M!==I.length;++M)if((L=I.charCodeAt(M))===S||L===E||L===34||T.forceQuotes){I='"'+I.replace(qreg,'""')+'"';break}I=="ID"&&(I='"ID"')}else F.f!=null&&!F.F?(B=!1,I="="+F.f,I.indexOf(",")>=0&&(I='"'+I.replace(qreg,'""')+'"')):I="";A.push(I)}return T.blankrows===!1&&B?null:A.join(C)}function sheet_to_csv(r,n){var _=[],x=n??{};if(r==null||r["!ref"]==null)return"";for(var S=safe_decode_range(r["!ref"]),E=x.FS!==void 0?x.FS:",",C=E.charCodeAt(0),T=x.RS!==void 0?x.RS:`
`,B=T.charCodeAt(0),A=new RegExp((E=="|"?"\\|":E)+"+$"),I="",N=[],V=x.skipHidden&&r["!cols"]||[],D=x.skipHidden&&r["!rows"]||[],O=S.s.c;O<=S.e.c;++O)(V[O]||{}).hidden||(N[O]=encode_col(O));for(var F=0,M=S.s.r;M<=S.e.r;++M)(D[M]||{}).hidden||(I=make_csv_row(r,S,M,N,C,B,E,x),I!=null&&(x.strip&&(I=I.replace(A,"")),(I||x.blankrows!==!1)&&_.push((F++?T:"")+I)));return _.join("")}function sheet_to_txt(r,n){n||(n={}),n.FS="	",n.RS=`
`;var _=sheet_to_csv(r,n);return _}function sheet_to_formulae(r){var n="",_,x="";if(r==null||r["!ref"]==null)return[];var S=safe_decode_range(r["!ref"]),E="",C=[],T,B=[],A=r["!data"]!=null;for(T=S.s.c;T<=S.e.c;++T)C[T]=encode_col(T);for(var I=S.s.r;I<=S.e.r;++I)for(E=encode_row(I),T=S.s.c;T<=S.e.c;++T)if(n=C[T]+E,_=A?(r["!data"][I]||[])[T]:r[n],x="",_!==void 0){if(_.F!=null){if(n=_.F,!_.f)continue;x=_.f,n.indexOf(":")==-1&&(n=n+":"+n)}if(_.f!=null)x=_.f;else{if(_.t=="z")continue;if(_.t=="n"&&_.v!=null)x=""+_.v;else if(_.t=="b")x=_.v?"TRUE":"FALSE";else if(_.w!==void 0)x="'"+_.w;else{if(_.v===void 0)continue;_.t=="s"?x="'"+_.v:x=""+_.v}}B[B.length]=n+"="+x}return B}function sheet_add_json(r,n,_){var x=_||{},S=r?r["!data"]!=null:x.dense,E=+!x.skipHeader,C=r||{};!r&&S&&(C["!data"]=[]);var T=0,B=0;if(C&&x.origin!=null)if(typeof x.origin=="number")T=x.origin;else{var A=typeof x.origin=="string"?decode_cell(x.origin):x.origin;T=A.r,B=A.c}var I={s:{c:0,r:0},e:{c:B,r:T+n.length-1+E}};if(C["!ref"]){var N=safe_decode_range(C["!ref"]);I.e.c=Math.max(I.e.c,N.e.c),I.e.r=Math.max(I.e.r,N.e.r),T==-1&&(T=N.e.r+1,I.e.r=T+n.length-1+E)}else T==-1&&(T=0,I.e.r=n.length-1+E);var V=x.header||[],D=0,O=[];n.forEach(function(M,L){S&&!C["!data"][T+L+E]&&(C["!data"][T+L+E]=[]),S&&(O=C["!data"][T+L+E]),keys(M).forEach(function(j){(D=V.indexOf(j))==-1&&(V[D=V.length]=j);var q=M[j],H="z",X="",J=S?"":encode_col(B+D)+encode_row(T+L+E),Z=S?O[B+D]:C[J];q&&typeof q=="object"&&!(q instanceof Date)?S?O[B+D]=q:C[J]=q:(typeof q=="number"?H="n":typeof q=="boolean"?H="b":typeof q=="string"?H="s":q instanceof Date?(H="d",x.cellDates||(H="n",q=datenum(q)),X=Z!=null&&Z.z&&fmt_is_date(Z.z)?Z.z:x.dateNF||table_fmt[14]):q===null&&x.nullError&&(H="e",q=0),Z?(Z.t=H,Z.v=q,delete Z.w,delete Z.R,X&&(Z.z=X)):S?O[B+D]=Z={t:H,v:q}:C[J]=Z={t:H,v:q},X&&(Z.z=X))})}),I.e.c=Math.max(I.e.c,B+V.length-1);var F=encode_row(T);if(S&&!C["!data"][T]&&(C["!data"][T]=[]),E)for(D=0;D<V.length;++D)S?C["!data"][T][D+B]={t:"s",v:V[D]}:C[encode_col(D+B)+F]={t:"s",v:V[D]};return C["!ref"]=encode_range(I),C}function json_to_sheet(r,n){return sheet_add_json(null,r,n)}function ws_get_cell_stub(r,n,_){if(typeof n=="string"){if(r["!data"]!=null){var x=decode_cell(n);return r["!data"][x.r]||(r["!data"][x.r]=[]),r["!data"][x.r][x.c]||(r["!data"][x.r][x.c]={t:"z"})}return r[n]||(r[n]={t:"z"})}return typeof n!="number"?ws_get_cell_stub(r,encode_cell(n)):ws_get_cell_stub(r,encode_col(_||0)+encode_row(n))}function wb_sheet_idx(r,n){if(typeof n=="number"){if(n>=0&&r.SheetNames.length>n)return n;throw new Error("Cannot find sheet # "+n)}else if(typeof n=="string"){var _=r.SheetNames.indexOf(n);if(_>-1)return _;throw new Error("Cannot find sheet name |"+n+"|")}else throw new Error("Cannot find sheet |"+n+"|")}function book_new(){return{SheetNames:[],Sheets:{}}}function book_append_sheet(r,n,_,x){var S=1;if(!_)for(;S<=65535&&r.SheetNames.indexOf(_="Sheet"+S)!=-1;++S,_=void 0);if(!_||r.SheetNames.length>=65535)throw new Error("Too many worksheets");if(x&&r.SheetNames.indexOf(_)>=0){var E=_.match(/(^.*?)(\d+)$/);S=E&&+E[2]||0;var C=E&&E[1]||_;for(++S;S<=65535&&r.SheetNames.indexOf(_=C+S)!=-1;++S);}if(check_ws_name(_),r.SheetNames.indexOf(_)>=0)throw new Error("Worksheet with name |"+_+"| already exists!");return r.SheetNames.push(_),r.Sheets[_]=n,_}function book_set_sheet_visibility(r,n,_){r.Workbook||(r.Workbook={}),r.Workbook.Sheets||(r.Workbook.Sheets=[]);var x=wb_sheet_idx(r,n);switch(r.Workbook.Sheets[x]||(r.Workbook.Sheets[x]={}),_){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+_)}r.Workbook.Sheets[x].Hidden=_}function cell_set_number_format(r,n){return r.z=n,r}function cell_set_hyperlink(r,n,_){return n?(r.l={Target:n},_&&(r.l.Tooltip=_)):delete r.l,r}function cell_set_internal_link(r,n,_){return cell_set_hyperlink(r,"#"+n,_)}function cell_add_comment(r,n,_){r.c||(r.c=[]),r.c.push({t:n,a:_||"SheetJS"})}function sheet_set_array_formula(r,n,_,x){for(var S=typeof n!="string"?n:safe_decode_range(n),E=typeof n=="string"?n:encode_range(n),C=S.s.r;C<=S.e.r;++C)for(var T=S.s.c;T<=S.e.c;++T){var B=ws_get_cell_stub(r,C,T);B.t="n",B.F=E,delete B.v,C==S.s.r&&T==S.s.c&&(B.f=_,x&&(B.D=!0))}var A=decode_range(r["!ref"]);return A.s.r>S.s.r&&(A.s.r=S.s.r),A.s.c>S.s.c&&(A.s.c=S.s.c),A.e.r<S.e.r&&(A.e.r=S.e.r),A.e.c<S.e.c&&(A.e.c=S.e.c),r["!ref"]=encode_range(A),r}var utils$2={encode_col,encode_row,encode_cell,encode_range,decode_col,decode_row,split_cell,decode_cell,decode_range,format_cell,sheet_add_aoa,sheet_add_json,sheet_add_dom,aoa_to_sheet,json_to_sheet,table_to_sheet:parse_dom_table,table_to_book,sheet_to_csv,sheet_to_txt,sheet_to_json,sheet_to_html,sheet_to_formulae,sheet_to_row_object_array:sheet_to_json,sheet_get_cell:ws_get_cell_stub,book_new,book_append_sheet,book_set_sheet_visibility,cell_set_number_format,cell_set_hyperlink,cell_set_internal_link,cell_add_comment,sheet_set_array_formula,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},_Readable;function set_readable(r){_Readable=r}function write_csv_stream(r,n){var _=_Readable(),x=n??{};if(r==null||r["!ref"]==null)return _.push(null),_;for(var S=safe_decode_range(r["!ref"]),E=x.FS!==void 0?x.FS:",",C=E.charCodeAt(0),T=x.RS!==void 0?x.RS:`
`,B=T.charCodeAt(0),A=new RegExp((E=="|"?"\\|":E)+"+$"),I="",N=[],V=x.skipHidden&&r["!cols"]||[],D=x.skipHidden&&r["!rows"]||[],O=S.s.c;O<=S.e.c;++O)(V[O]||{}).hidden||(N[O]=encode_col(O));var F=S.s.r,M=!1,L=0;return _._read=function(){if(!M)return M=!0,_.push("\uFEFF");for(;F<=S.e.r;)if(++F,!(D[F-1]||{}).hidden&&(I=make_csv_row(r,S,F-1,N,C,B,E,x),I!=null&&(x.strip&&(I=I.replace(A,"")),I||x.blankrows!==!1)))return _.push((L++?T:"")+I);return _.push(null)},_}function write_html_stream(r,n){var _=_Readable(),x=n||{},S=x.header!=null?x.header:HTML_BEGIN,E=x.footer!=null?x.footer:HTML_END;_.push(S);var C=decode_range(r["!ref"]);_.push(make_html_preamble(r,C,x));var T=C.s.r,B=!1;return _._read=function(){if(T>C.e.r)return B||(B=!0,_.push("</table>"+E)),_.push(null);for(;T<=C.e.r;){_.push(make_html_row(r,C,T,x)),++T;break}},_}function write_json_stream(r,n){var _=_Readable({objectMode:!0});if(r==null||r["!ref"]==null)return _.push(null),_;var x={t:"n",v:0},S=0,E=1,C=[],T=0,B="",A={s:{r:0,c:0},e:{r:0,c:0}},I=n||{},N=I.range!=null?I.range:r["!ref"];switch(I.header===1?S=1:I.header==="A"?S=2:Array.isArray(I.header)&&(S=3),typeof N){case"string":A=safe_decode_range(N);break;case"number":A=safe_decode_range(r["!ref"]),A.s.r=N;break;default:A=N}S>0&&(E=0);var V=encode_row(A.s.r),D=[],O=0,F=r["!data"]!=null,M=A.s.r,L=0,j={};F&&!r["!data"][M]&&(r["!data"][M]=[]);var q=I.skipHidden&&r["!cols"]||[],H=I.skipHidden&&r["!rows"]||[];for(L=A.s.c;L<=A.e.c;++L)if(!(q[L]||{}).hidden)switch(D[L]=encode_col(L),x=F?r["!data"][M][L]:r[D[L]+V],S){case 1:C[L]=L-A.s.c;break;case 2:C[L]=D[L];break;case 3:C[L]=I.header[L-A.s.c];break;default:if(x==null&&(x={w:"__EMPTY",t:"s"}),B=T=format_cell(x,null,I),O=j[T]||0,!O)j[T]=1;else{do B=T+"_"+O++;while(j[B]);j[T]=O,j[B]=1}C[L]=B}return M=A.s.r+E,_._read=function(){for(;M<=A.e.r;)if(!(H[M-1]||{}).hidden){var X=make_json_row(r,A,M,D,S,C,I);if(++M,X.isempty===!1||(S===1?I.blankrows!==!1:I.blankrows)){_.push(X.row);return}}return _.push(null)},_}var __stream={to_json:write_json_stream,to_html:write_html_stream,to_csv:write_csv_stream,set_readable};function bind$1(r,n){return function(){return r.apply(n,arguments)}}const{toString:toString$3}=Object.prototype,{getPrototypeOf:getPrototypeOf$1}=Object,kindOf$1=(r=>n=>{const _=toString$3.call(n);return r[_]||(r[_]=_.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest$1=r=>(r=r.toLowerCase(),n=>kindOf$1(n)===r),typeOfTest$1=r=>n=>typeof n===r,{isArray:isArray$3}=Array,isUndefined$1=typeOfTest$1("undefined");function isBuffer$1(r){return r!==null&&!isUndefined$1(r)&&r.constructor!==null&&!isUndefined$1(r.constructor)&&isFunction$1(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const isArrayBuffer$1=kindOfTest$1("ArrayBuffer");function isArrayBufferView$1(r){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(r):n=r&&r.buffer&&isArrayBuffer$1(r.buffer),n}const isString$1=typeOfTest$1("string"),isFunction$1=typeOfTest$1("function"),isNumber$1=typeOfTest$1("number"),isObject$2=r=>r!==null&&typeof r=="object",isBoolean$1=r=>r===!0||r===!1,isPlainObject$1=r=>{if(kindOf$1(r)!=="object")return!1;const n=getPrototypeOf$1(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},isDate$1=kindOfTest$1("Date"),isFile$1=kindOfTest$1("File"),isBlob$1=kindOfTest$1("Blob"),isFileList$1=kindOfTest$1("FileList"),isStream$1=r=>isObject$2(r)&&isFunction$1(r.pipe),isFormData$1=r=>{let n;return r&&(typeof FormData=="function"&&r instanceof FormData||isFunction$1(r.append)&&((n=kindOf$1(r))==="formdata"||n==="object"&&isFunction$1(r.toString)&&r.toString()==="[object FormData]"))},isURLSearchParams$1=kindOfTest$1("URLSearchParams"),trim$1=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(r,n,{allOwnKeys:_=!1}={}){if(r===null||typeof r>"u")return;let x,S;if(typeof r!="object"&&(r=[r]),isArray$3(r))for(x=0,S=r.length;x<S;x++)n.call(null,r[x],x,r);else{const E=_?Object.getOwnPropertyNames(r):Object.keys(r),C=E.length;let T;for(x=0;x<C;x++)T=E[x],n.call(null,r[T],T,r)}}function findKey$1(r,n){n=n.toLowerCase();const _=Object.keys(r);let x=_.length,S;for(;x-- >0;)if(S=_[x],n===S.toLowerCase())return S;return null}const _global$1=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global$1)(),isContextDefined$1=r=>!isUndefined$1(r)&&r!==_global$1;function merge$1(){const{caseless:r}=isContextDefined$1(this)&&this||{},n={},_=(x,S)=>{const E=r&&findKey$1(n,S)||S;isPlainObject$1(n[E])&&isPlainObject$1(x)?n[E]=merge$1(n[E],x):isPlainObject$1(x)?n[E]=merge$1({},x):isArray$3(x)?n[E]=x.slice():n[E]=x};for(let x=0,S=arguments.length;x<S;x++)arguments[x]&&forEach$1(arguments[x],_);return n}const extend$1=(r,n,_,{allOwnKeys:x}={})=>(forEach$1(n,(S,E)=>{_&&isFunction$1(S)?r[E]=bind$1(S,_):r[E]=S},{allOwnKeys:x}),r),stripBOM$1=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),inherits$1=(r,n,_,x)=>{r.prototype=Object.create(n.prototype,x),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:n.prototype}),_&&Object.assign(r.prototype,_)},toFlatObject$1=(r,n,_,x)=>{let S,E,C;const T={};if(n=n||{},r==null)return n;do{for(S=Object.getOwnPropertyNames(r),E=S.length;E-- >0;)C=S[E],(!x||x(C,r,n))&&!T[C]&&(n[C]=r[C],T[C]=!0);r=_!==!1&&getPrototypeOf$1(r)}while(r&&(!_||_(r,n))&&r!==Object.prototype);return n},endsWith$1=(r,n,_)=>{r=String(r),(_===void 0||_>r.length)&&(_=r.length),_-=n.length;const x=r.indexOf(n,_);return x!==-1&&x===_},toArray$1=r=>{if(!r)return null;if(isArray$3(r))return r;let n=r.length;if(!isNumber$1(n))return null;const _=new Array(n);for(;n-- >0;)_[n]=r[n];return _},isTypedArray$1=(r=>n=>r&&n instanceof r)(typeof Uint8Array<"u"&&getPrototypeOf$1(Uint8Array)),forEachEntry$1=(r,n)=>{const x=(r&&r[Symbol.iterator]).call(r);let S;for(;(S=x.next())&&!S.done;){const E=S.value;n.call(r,E[0],E[1])}},matchAll$1=(r,n)=>{let _;const x=[];for(;(_=r.exec(n))!==null;)x.push(_);return x},isHTMLForm$1=kindOfTest$1("HTMLFormElement"),toCamelCase$1=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(_,x,S){return x.toUpperCase()+S}),hasOwnProperty$1=(({hasOwnProperty:r})=>(n,_)=>r.call(n,_))(Object.prototype),isRegExp$1=kindOfTest$1("RegExp"),reduceDescriptors$1=(r,n)=>{const _=Object.getOwnPropertyDescriptors(r),x={};forEach$1(_,(S,E)=>{let C;(C=n(S,E,r))!==!1&&(x[E]=C||S)}),Object.defineProperties(r,x)},freezeMethods$1=r=>{reduceDescriptors$1(r,(n,_)=>{if(isFunction$1(r)&&["arguments","caller","callee"].indexOf(_)!==-1)return!1;const x=r[_];if(isFunction$1(x)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+_+"'")})}})},toObjectSet$1=(r,n)=>{const _={},x=S=>{S.forEach(E=>{_[E]=!0})};return isArray$3(r)?x(r):x(String(r).split(n)),_},noop$2=()=>{},toFiniteNumber$1=(r,n)=>(r=+r,Number.isFinite(r)?r:n),ALPHA$1="abcdefghijklmnopqrstuvwxyz",DIGIT$1="0123456789",ALPHABET$1={DIGIT:DIGIT$1,ALPHA:ALPHA$1,ALPHA_DIGIT:ALPHA$1+ALPHA$1.toUpperCase()+DIGIT$1},generateString$1=(r=16,n=ALPHABET$1.ALPHA_DIGIT)=>{let _="";const{length:x}=n;for(;r--;)_+=n[Math.random()*x|0];return _};function isSpecCompliantForm$1(r){return!!(r&&isFunction$1(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const toJSONObject$1=r=>{const n=new Array(10),_=(x,S)=>{if(isObject$2(x)){if(n.indexOf(x)>=0)return;if(!("toJSON"in x)){n[S]=x;const E=isArray$3(x)?[]:{};return forEach$1(x,(C,T)=>{const B=_(C,S+1);!isUndefined$1(B)&&(E[T]=B)}),n[S]=void 0,E}}return x};return _(r,0)},isAsyncFn$1=kindOfTest$1("AsyncFunction"),isThenable$1=r=>r&&(isObject$2(r)||isFunction$1(r))&&isFunction$1(r.then)&&isFunction$1(r.catch),utils$1={isArray:isArray$3,isArrayBuffer:isArrayBuffer$1,isBuffer:isBuffer$1,isFormData:isFormData$1,isArrayBufferView:isArrayBufferView$1,isString:isString$1,isNumber:isNumber$1,isBoolean:isBoolean$1,isObject:isObject$2,isPlainObject:isPlainObject$1,isUndefined:isUndefined$1,isDate:isDate$1,isFile:isFile$1,isBlob:isBlob$1,isRegExp:isRegExp$1,isFunction:isFunction$1,isStream:isStream$1,isURLSearchParams:isURLSearchParams$1,isTypedArray:isTypedArray$1,isFileList:isFileList$1,forEach:forEach$1,merge:merge$1,extend:extend$1,trim:trim$1,stripBOM:stripBOM$1,inherits:inherits$1,toFlatObject:toFlatObject$1,kindOf:kindOf$1,kindOfTest:kindOfTest$1,endsWith:endsWith$1,toArray:toArray$1,forEachEntry:forEachEntry$1,matchAll:matchAll$1,isHTMLForm:isHTMLForm$1,hasOwnProperty:hasOwnProperty$1,hasOwnProp:hasOwnProperty$1,reduceDescriptors:reduceDescriptors$1,freezeMethods:freezeMethods$1,toObjectSet:toObjectSet$1,toCamelCase:toCamelCase$1,noop:noop$2,toFiniteNumber:toFiniteNumber$1,findKey:findKey$1,global:_global$1,isContextDefined:isContextDefined$1,ALPHABET:ALPHABET$1,generateString:generateString$1,isSpecCompliantForm:isSpecCompliantForm$1,toJSONObject:toJSONObject$1,isAsyncFn:isAsyncFn$1,isThenable:isThenable$1};function AxiosError$1(r,n,_,x,S){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",n&&(this.code=n),_&&(this.config=_),x&&(this.request=x),S&&(this.response=S)}utils$1.inherits(AxiosError$1,Error,{toJSON:function r(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$3=AxiosError$1.prototype,descriptors$1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{descriptors$1[r]={value:r}});Object.defineProperties(AxiosError$1,descriptors$1);Object.defineProperty(prototype$3,"isAxiosError",{value:!0});AxiosError$1.from=(r,n,_,x,S,E)=>{const C=Object.create(prototype$3);return utils$1.toFlatObject(r,C,function(B){return B!==Error.prototype},T=>T!=="isAxiosError"),AxiosError$1.call(C,r.message,n,_,x,S),C.cause=r,C.name=r.name,E&&Object.assign(C,E),C};const httpAdapter$1=null;function isVisitable$1(r){return utils$1.isPlainObject(r)||utils$1.isArray(r)}function removeBrackets$1(r){return utils$1.endsWith(r,"[]")?r.slice(0,-2):r}function renderKey$1(r,n,_){return r?r.concat(n).map(function(S,E){return S=removeBrackets$1(S),!_&&E?"["+S+"]":S}).join(_?".":""):n}function isFlatArray$1(r){return utils$1.isArray(r)&&!r.some(isVisitable$1)}const predicates$1=utils$1.toFlatObject(utils$1,{},null,function r(n){return/^is[A-Z]/.test(n)});function toFormData$1(r,n,_){if(!utils$1.isObject(r))throw new TypeError("target must be an object");n=n||new FormData,_=utils$1.toFlatObject(_,{metaTokens:!0,dots:!1,indexes:!1},!1,function(F,M){return!utils$1.isUndefined(M[F])});const x=_.metaTokens,S=_.visitor||I,E=_.dots,C=_.indexes,B=(_.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(n);if(!utils$1.isFunction(S))throw new TypeError("visitor must be a function");function A(O){if(O===null)return"";if(utils$1.isDate(O))return O.toISOString();if(!B&&utils$1.isBlob(O))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(O)||utils$1.isTypedArray(O)?B&&typeof Blob=="function"?new Blob([O]):Buffer$5.from(O):O}function I(O,F,M){let L=O;if(O&&!M&&typeof O=="object"){if(utils$1.endsWith(F,"{}"))F=x?F:F.slice(0,-2),O=JSON.stringify(O);else if(utils$1.isArray(O)&&isFlatArray$1(O)||(utils$1.isFileList(O)||utils$1.endsWith(F,"[]"))&&(L=utils$1.toArray(O)))return F=removeBrackets$1(F),L.forEach(function(q,H){!(utils$1.isUndefined(q)||q===null)&&n.append(C===!0?renderKey$1([F],H,E):C===null?F:F+"[]",A(q))}),!1}return isVisitable$1(O)?!0:(n.append(renderKey$1(M,F,E),A(O)),!1)}const N=[],V=Object.assign(predicates$1,{defaultVisitor:I,convertValue:A,isVisitable:isVisitable$1});function D(O,F){if(!utils$1.isUndefined(O)){if(N.indexOf(O)!==-1)throw Error("Circular reference detected in "+F.join("."));N.push(O),utils$1.forEach(O,function(L,j){(!(utils$1.isUndefined(L)||L===null)&&S.call(n,L,utils$1.isString(j)?j.trim():j,F,V))===!0&&D(L,F?F.concat(j):[j])}),N.pop()}}if(!utils$1.isObject(r))throw new TypeError("data must be an object");return D(r),n}function encode$6(r){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(x){return n[x]})}function AxiosURLSearchParams$1(r,n){this._pairs=[],r&&toFormData$1(r,this,n)}const prototype$2=AxiosURLSearchParams$1.prototype;prototype$2.append=function r(n,_){this._pairs.push([n,_])};prototype$2.toString=function r(n){const _=n?function(x){return n.call(this,x,encode$6)}:encode$6;return this._pairs.map(function(S){return _(S[0])+"="+_(S[1])},"").join("&")};function encode$5(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL$1(r,n,_){if(!n)return r;const x=_&&_.encode||encode$5,S=_&&_.serialize;let E;if(S?E=S(n,_):E=utils$1.isURLSearchParams(n)?n.toString():new AxiosURLSearchParams$1(n,_).toString(x),E){const C=r.indexOf("#");C!==-1&&(r=r.slice(0,C)),r+=(r.indexOf("?")===-1?"?":"&")+E}return r}let InterceptorManager$2=class{constructor(){this.handlers=[]}use(n,_,x){return this.handlers.push({fulfilled:n,rejected:_,synchronous:x?x.synchronous:!1,runWhen:x?x.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){utils$1.forEach(this.handlers,function(x){x!==null&&n(x)})}};const InterceptorManager$3=InterceptorManager$2,transitionalDefaults$1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$2=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams$1,FormData$2=typeof FormData<"u"?FormData:null,Blob$2=typeof Blob<"u"?Blob:null,isStandardBrowserEnv$1=(()=>{let r;return typeof navigator<"u"&&((r=navigator.product)==="ReactNative"||r==="NativeScript"||r==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv$1=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$2,FormData:FormData$2,Blob:Blob$2},isStandardBrowserEnv:isStandardBrowserEnv$1,isStandardBrowserWebWorkerEnv:isStandardBrowserWebWorkerEnv$1,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm$1(r,n){return toFormData$1(r,new platform$1.classes.URLSearchParams,Object.assign({visitor:function(_,x,S,E){return platform$1.isNode&&utils$1.isBuffer(_)?(this.append(x,_.toString("base64")),!1):E.defaultVisitor.apply(this,arguments)}},n))}function parsePropPath$1(r){return utils$1.matchAll(/\w+|\[(\w*)]/g,r).map(n=>n[0]==="[]"?"":n[1]||n[0])}function arrayToObject$1(r){const n={},_=Object.keys(r);let x;const S=_.length;let E;for(x=0;x<S;x++)E=_[x],n[E]=r[E];return n}function formDataToJSON$1(r){function n(_,x,S,E){let C=_[E++];const T=Number.isFinite(+C),B=E>=_.length;return C=!C&&utils$1.isArray(S)?S.length:C,B?(utils$1.hasOwnProp(S,C)?S[C]=[S[C],x]:S[C]=x,!T):((!S[C]||!utils$1.isObject(S[C]))&&(S[C]=[]),n(_,x,S[C],E)&&utils$1.isArray(S[C])&&(S[C]=arrayToObject$1(S[C])),!T)}if(utils$1.isFormData(r)&&utils$1.isFunction(r.entries)){const _={};return utils$1.forEachEntry(r,(x,S)=>{n(parsePropPath$1(x),S,_,0)}),_}return null}function stringifySafely$1(r,n,_){if(utils$1.isString(r))try{return(n||JSON.parse)(r),utils$1.trim(r)}catch(x){if(x.name!=="SyntaxError")throw x}return(_||JSON.stringify)(r)}const defaults$2={transitional:transitionalDefaults$1,adapter:["xhr","http"],transformRequest:[function r(n,_){const x=_.getContentType()||"",S=x.indexOf("application/json")>-1,E=utils$1.isObject(n);if(E&&utils$1.isHTMLForm(n)&&(n=new FormData(n)),utils$1.isFormData(n))return S&&S?JSON.stringify(formDataToJSON$1(n)):n;if(utils$1.isArrayBuffer(n)||utils$1.isBuffer(n)||utils$1.isStream(n)||utils$1.isFile(n)||utils$1.isBlob(n))return n;if(utils$1.isArrayBufferView(n))return n.buffer;if(utils$1.isURLSearchParams(n))return _.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let T;if(E){if(x.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm$1(n,this.formSerializer).toString();if((T=utils$1.isFileList(n))||x.indexOf("multipart/form-data")>-1){const B=this.env&&this.env.FormData;return toFormData$1(T?{"files[]":n}:n,B&&new B,this.formSerializer)}}return E||S?(_.setContentType("application/json",!1),stringifySafely$1(n)):n}],transformResponse:[function r(n){const _=this.transitional||defaults$2.transitional,x=_&&_.forcedJSONParsing,S=this.responseType==="json";if(n&&utils$1.isString(n)&&(x&&!this.responseType||S)){const C=!(_&&_.silentJSONParsing)&&S;try{return JSON.parse(n)}catch(T){if(C)throw T.name==="SyntaxError"?AxiosError$1.from(T,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):T}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$1.classes.FormData,Blob:platform$1.classes.Blob},validateStatus:function r(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],r=>{defaults$2.headers[r]={}});const defaults$3=defaults$2,ignoreDuplicateOf$1=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders$1=r=>{const n={};let _,x,S;return r&&r.split(`
`).forEach(function(C){S=C.indexOf(":"),_=C.substring(0,S).trim().toLowerCase(),x=C.substring(S+1).trim(),!(!_||n[_]&&ignoreDuplicateOf$1[_])&&(_==="set-cookie"?n[_]?n[_].push(x):n[_]=[x]:n[_]=n[_]?n[_]+", "+x:x)}),n},$internals$1=Symbol("internals");function normalizeHeader$1(r){return r&&String(r).trim().toLowerCase()}function normalizeValue$1(r){return r===!1||r==null?r:utils$1.isArray(r)?r.map(normalizeValue$1):String(r)}function parseTokens$1(r){const n=Object.create(null),_=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let x;for(;x=_.exec(r);)n[x[1]]=x[2];return n}const isValidHeaderName$1=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function matchHeaderValue$1(r,n,_,x,S){if(utils$1.isFunction(x))return x.call(this,n,_);if(S&&(n=_),!!utils$1.isString(n)){if(utils$1.isString(x))return n.indexOf(x)!==-1;if(utils$1.isRegExp(x))return x.test(n)}}function formatHeader$1(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,_,x)=>_.toUpperCase()+x)}function buildAccessors$1(r,n){const _=utils$1.toCamelCase(" "+n);["get","set","has"].forEach(x=>{Object.defineProperty(r,x+_,{value:function(S,E,C){return this[x].call(this,n,S,E,C)},configurable:!0})})}let AxiosHeaders$2=class{constructor(n){n&&this.set(n)}set(n,_,x){const S=this;function E(T,B,A){const I=normalizeHeader$1(B);if(!I)throw new Error("header name must be a non-empty string");const N=utils$1.findKey(S,I);(!N||S[N]===void 0||A===!0||A===void 0&&S[N]!==!1)&&(S[N||B]=normalizeValue$1(T))}const C=(T,B)=>utils$1.forEach(T,(A,I)=>E(A,I,B));return utils$1.isPlainObject(n)||n instanceof this.constructor?C(n,_):utils$1.isString(n)&&(n=n.trim())&&!isValidHeaderName$1(n)?C(parseHeaders$1(n),_):n!=null&&E(_,n,x),this}get(n,_){if(n=normalizeHeader$1(n),n){const x=utils$1.findKey(this,n);if(x){const S=this[x];if(!_)return S;if(_===!0)return parseTokens$1(S);if(utils$1.isFunction(_))return _.call(this,S,x);if(utils$1.isRegExp(_))return _.exec(S);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,_){if(n=normalizeHeader$1(n),n){const x=utils$1.findKey(this,n);return!!(x&&this[x]!==void 0&&(!_||matchHeaderValue$1(this,this[x],x,_)))}return!1}delete(n,_){const x=this;let S=!1;function E(C){if(C=normalizeHeader$1(C),C){const T=utils$1.findKey(x,C);T&&(!_||matchHeaderValue$1(x,x[T],T,_))&&(delete x[T],S=!0)}}return utils$1.isArray(n)?n.forEach(E):E(n),S}clear(n){const _=Object.keys(this);let x=_.length,S=!1;for(;x--;){const E=_[x];(!n||matchHeaderValue$1(this,this[E],E,n,!0))&&(delete this[E],S=!0)}return S}normalize(n){const _=this,x={};return utils$1.forEach(this,(S,E)=>{const C=utils$1.findKey(x,E);if(C){_[C]=normalizeValue$1(S),delete _[E];return}const T=n?formatHeader$1(E):String(E).trim();T!==E&&delete _[E],_[T]=normalizeValue$1(S),x[T]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const _=Object.create(null);return utils$1.forEach(this,(x,S)=>{x!=null&&x!==!1&&(_[S]=n&&utils$1.isArray(x)?x.join(", "):x)}),_}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,_])=>n+": "+_).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,..._){const x=new this(n);return _.forEach(S=>x.set(S)),x}static accessor(n){const x=(this[$internals$1]=this[$internals$1]={accessors:{}}).accessors,S=this.prototype;function E(C){const T=normalizeHeader$1(C);x[T]||(buildAccessors$1(S,C),x[T]=!0)}return utils$1.isArray(n)?n.forEach(E):E(n),this}};AxiosHeaders$2.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$2.prototype,({value:r},n)=>{let _=n[0].toUpperCase()+n.slice(1);return{get:()=>r,set(x){this[_]=x}}});utils$1.freezeMethods(AxiosHeaders$2);const AxiosHeaders$3=AxiosHeaders$2;function transformData$1(r,n){const _=this||defaults$3,x=n||_,S=AxiosHeaders$3.from(x.headers);let E=x.data;return utils$1.forEach(r,function(T){E=T.call(_,E,S.normalize(),n?n.status:void 0)}),S.normalize(),E}function isCancel$1(r){return!!(r&&r.__CANCEL__)}function CanceledError$1(r,n,_){AxiosError$1.call(this,r??"canceled",AxiosError$1.ERR_CANCELED,n,_),this.name="CanceledError"}utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle$1(r,n,_){const x=_.config.validateStatus;!_.status||!x||x(_.status)?r(_):n(new AxiosError$1("Request failed with status code "+_.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(_.status/100)-4],_.config,_.request,_))}const cookies$1=platform$1.isStandardBrowserEnv?function r(){return{write:function(_,x,S,E,C,T){const B=[];B.push(_+"="+encodeURIComponent(x)),utils$1.isNumber(S)&&B.push("expires="+new Date(S).toGMTString()),utils$1.isString(E)&&B.push("path="+E),utils$1.isString(C)&&B.push("domain="+C),T===!0&&B.push("secure"),document.cookie=B.join("; ")},read:function(_){const x=document.cookie.match(new RegExp("(^|;\\s*)("+_+")=([^;]*)"));return x?decodeURIComponent(x[3]):null},remove:function(_){this.write(_,"",Date.now()-864e5)}}}():function r(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL$1(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function combineURLs$1(r,n){return n?r.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):r}function buildFullPath$1(r,n){return r&&!isAbsoluteURL$1(n)?combineURLs$1(r,n):n}const isURLSameOrigin$1=platform$1.isStandardBrowserEnv?function r(){const n=/(msie|trident)/i.test(navigator.userAgent),_=document.createElement("a");let x;function S(E){let C=E;return n&&(_.setAttribute("href",C),C=_.href),_.setAttribute("href",C),{href:_.href,protocol:_.protocol?_.protocol.replace(/:$/,""):"",host:_.host,search:_.search?_.search.replace(/^\?/,""):"",hash:_.hash?_.hash.replace(/^#/,""):"",hostname:_.hostname,port:_.port,pathname:_.pathname.charAt(0)==="/"?_.pathname:"/"+_.pathname}}return x=S(window.location.href),function(C){const T=utils$1.isString(C)?S(C):C;return T.protocol===x.protocol&&T.host===x.host}}():function r(){return function(){return!0}}();function parseProtocol$1(r){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return n&&n[1]||""}function speedometer$1(r,n){r=r||10;const _=new Array(r),x=new Array(r);let S=0,E=0,C;return n=n!==void 0?n:1e3,function(B){const A=Date.now(),I=x[E];C||(C=A),_[S]=B,x[S]=A;let N=E,V=0;for(;N!==S;)V+=_[N++],N=N%r;if(S=(S+1)%r,S===E&&(E=(E+1)%r),A-C<n)return;const D=I&&A-I;return D?Math.round(V*1e3/D):void 0}}function progressEventReducer$1(r,n){let _=0;const x=speedometer$1(50,250);return S=>{const E=S.loaded,C=S.lengthComputable?S.total:void 0,T=E-_,B=x(T),A=E<=C;_=E;const I={loaded:E,total:C,progress:C?E/C:void 0,bytes:T,rate:B||void 0,estimated:B&&C&&A?(C-E)/B:void 0,event:S};I[n?"download":"upload"]=!0,r(I)}}const isXHRAdapterSupported$1=typeof XMLHttpRequest<"u",xhrAdapter$1=isXHRAdapterSupported$1&&function(r){return new Promise(function(_,x){let S=r.data;const E=AxiosHeaders$3.from(r.headers).normalize(),C=r.responseType;let T;function B(){r.cancelToken&&r.cancelToken.unsubscribe(T),r.signal&&r.signal.removeEventListener("abort",T)}let A;utils$1.isFormData(S)&&(platform$1.isStandardBrowserEnv||platform$1.isStandardBrowserWebWorkerEnv?E.setContentType(!1):E.getContentType(/^\s*multipart\/form-data/)?utils$1.isString(A=E.getContentType())&&E.setContentType(A.replace(/^\s*(multipart\/form-data);+/,"$1")):E.setContentType("multipart/form-data"));let I=new XMLHttpRequest;if(r.auth){const O=r.auth.username||"",F=r.auth.password?unescape(encodeURIComponent(r.auth.password)):"";E.set("Authorization","Basic "+btoa(O+":"+F))}const N=buildFullPath$1(r.baseURL,r.url);I.open(r.method.toUpperCase(),buildURL$1(N,r.params,r.paramsSerializer),!0),I.timeout=r.timeout;function V(){if(!I)return;const O=AxiosHeaders$3.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),M={data:!C||C==="text"||C==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:O,config:r,request:I};settle$1(function(j){_(j),B()},function(j){x(j),B()},M),I=null}if("onloadend"in I?I.onloadend=V:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(V)},I.onabort=function(){I&&(x(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,r,I)),I=null)},I.onerror=function(){x(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,r,I)),I=null},I.ontimeout=function(){let F=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const M=r.transitional||transitionalDefaults$1;r.timeoutErrorMessage&&(F=r.timeoutErrorMessage),x(new AxiosError$1(F,M.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,r,I)),I=null},platform$1.isStandardBrowserEnv){const O=(r.withCredentials||isURLSameOrigin$1(N))&&r.xsrfCookieName&&cookies$1.read(r.xsrfCookieName);O&&E.set(r.xsrfHeaderName,O)}S===void 0&&E.setContentType(null),"setRequestHeader"in I&&utils$1.forEach(E.toJSON(),function(F,M){I.setRequestHeader(M,F)}),utils$1.isUndefined(r.withCredentials)||(I.withCredentials=!!r.withCredentials),C&&C!=="json"&&(I.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&I.addEventListener("progress",progressEventReducer$1(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&I.upload&&I.upload.addEventListener("progress",progressEventReducer$1(r.onUploadProgress)),(r.cancelToken||r.signal)&&(T=O=>{I&&(x(!O||O.type?new CanceledError$1(null,r,I):O),I.abort(),I=null)},r.cancelToken&&r.cancelToken.subscribe(T),r.signal&&(r.signal.aborted?T():r.signal.addEventListener("abort",T)));const D=parseProtocol$1(N);if(D&&platform$1.protocols.indexOf(D)===-1){x(new AxiosError$1("Unsupported protocol "+D+":",AxiosError$1.ERR_BAD_REQUEST,r));return}I.send(S||null)})},knownAdapters$1={http:httpAdapter$1,xhr:xhrAdapter$1};utils$1.forEach(knownAdapters$1,(r,n)=>{if(r){try{Object.defineProperty(r,"name",{value:n})}catch{}Object.defineProperty(r,"adapterName",{value:n})}});const renderReason=r=>`- ${r}`,isResolvedHandle=r=>utils$1.isFunction(r)||r===null||r===!1,adapters$1={getAdapter:r=>{r=utils$1.isArray(r)?r:[r];const{length:n}=r;let _,x;const S={};for(let E=0;E<n;E++){_=r[E];let C;if(x=_,!isResolvedHandle(_)&&(x=knownAdapters$1[(C=String(_)).toLowerCase()],x===void 0))throw new AxiosError$1(`Unknown adapter '${C}'`);if(x)break;S[C||"#"+E]=x}if(!x){const E=Object.entries(S).map(([T,B])=>`adapter ${T} `+(B===!1?"is not supported by the environment":"is not available in the build"));let C=n?E.length>1?`since :
`+E.map(renderReason).join(`
`):" "+renderReason(E[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+C,"ERR_NOT_SUPPORT")}return x},adapters:knownAdapters$1};function throwIfCancellationRequested$1(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new CanceledError$1(null,r)}function dispatchRequest$1(r){return throwIfCancellationRequested$1(r),r.headers=AxiosHeaders$3.from(r.headers),r.data=transformData$1.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),adapters$1.getAdapter(r.adapter||defaults$3.adapter)(r).then(function(x){return throwIfCancellationRequested$1(r),x.data=transformData$1.call(r,r.transformResponse,x),x.headers=AxiosHeaders$3.from(x.headers),x},function(x){return isCancel$1(x)||(throwIfCancellationRequested$1(r),x&&x.response&&(x.response.data=transformData$1.call(r,r.transformResponse,x.response),x.response.headers=AxiosHeaders$3.from(x.response.headers))),Promise.reject(x)})}const headersToObject$1=r=>r instanceof AxiosHeaders$3?r.toJSON():r;function mergeConfig$1(r,n){n=n||{};const _={};function x(A,I,N){return utils$1.isPlainObject(A)&&utils$1.isPlainObject(I)?utils$1.merge.call({caseless:N},A,I):utils$1.isPlainObject(I)?utils$1.merge({},I):utils$1.isArray(I)?I.slice():I}function S(A,I,N){if(utils$1.isUndefined(I)){if(!utils$1.isUndefined(A))return x(void 0,A,N)}else return x(A,I,N)}function E(A,I){if(!utils$1.isUndefined(I))return x(void 0,I)}function C(A,I){if(utils$1.isUndefined(I)){if(!utils$1.isUndefined(A))return x(void 0,A)}else return x(void 0,I)}function T(A,I,N){if(N in n)return x(A,I);if(N in r)return x(void 0,A)}const B={url:E,method:E,data:E,baseURL:C,transformRequest:C,transformResponse:C,paramsSerializer:C,timeout:C,timeoutMessage:C,withCredentials:C,adapter:C,responseType:C,xsrfCookieName:C,xsrfHeaderName:C,onUploadProgress:C,onDownloadProgress:C,decompress:C,maxContentLength:C,maxBodyLength:C,beforeRedirect:C,transport:C,httpAgent:C,httpsAgent:C,cancelToken:C,socketPath:C,responseEncoding:C,validateStatus:T,headers:(A,I)=>S(headersToObject$1(A),headersToObject$1(I),!0)};return utils$1.forEach(Object.keys(Object.assign({},r,n)),function(I){const N=B[I]||S,V=N(r[I],n[I],I);utils$1.isUndefined(V)&&N!==T||(_[I]=V)}),_}const VERSION$1="1.5.1",validators$3={};["object","boolean","number","function","string","symbol"].forEach((r,n)=>{validators$3[r]=function(x){return typeof x===r||"a"+(n<1?"n ":" ")+r}});const deprecatedWarnings$1={};validators$3.transitional=function r(n,_,x){function S(E,C){return"[Axios v"+VERSION$1+"] Transitional option '"+E+"'"+C+(x?". "+x:"")}return(E,C,T)=>{if(n===!1)throw new AxiosError$1(S(C," has been removed"+(_?" in "+_:"")),AxiosError$1.ERR_DEPRECATED);return _&&!deprecatedWarnings$1[C]&&(deprecatedWarnings$1[C]=!0,console.warn(S(C," has been deprecated since v"+_+" and will be removed in the near future"))),n?n(E,C,T):!0}};function assertOptions$1(r,n,_){if(typeof r!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const x=Object.keys(r);let S=x.length;for(;S-- >0;){const E=x[S],C=n[E];if(C){const T=r[E],B=T===void 0||C(T,E,r);if(B!==!0)throw new AxiosError$1("option "+E+" must be "+B,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(_!==!0)throw new AxiosError$1("Unknown option "+E,AxiosError$1.ERR_BAD_OPTION)}}const validator$1={assertOptions:assertOptions$1,validators:validators$3},validators$2=validator$1.validators;let Axios$2=class{constructor(n){this.defaults=n,this.interceptors={request:new InterceptorManager$3,response:new InterceptorManager$3}}request(n,_){typeof n=="string"?(_=_||{},_.url=n):_=n||{},_=mergeConfig$1(this.defaults,_);const{transitional:x,paramsSerializer:S,headers:E}=_;x!==void 0&&validator$1.assertOptions(x,{silentJSONParsing:validators$2.transitional(validators$2.boolean),forcedJSONParsing:validators$2.transitional(validators$2.boolean),clarifyTimeoutError:validators$2.transitional(validators$2.boolean)},!1),S!=null&&(utils$1.isFunction(S)?_.paramsSerializer={serialize:S}:validator$1.assertOptions(S,{encode:validators$2.function,serialize:validators$2.function},!0)),_.method=(_.method||this.defaults.method||"get").toLowerCase();let C=E&&utils$1.merge(E.common,E[_.method]);E&&utils$1.forEach(["delete","get","head","post","put","patch","common"],O=>{delete E[O]}),_.headers=AxiosHeaders$3.concat(C,E);const T=[];let B=!0;this.interceptors.request.forEach(function(F){typeof F.runWhen=="function"&&F.runWhen(_)===!1||(B=B&&F.synchronous,T.unshift(F.fulfilled,F.rejected))});const A=[];this.interceptors.response.forEach(function(F){A.push(F.fulfilled,F.rejected)});let I,N=0,V;if(!B){const O=[dispatchRequest$1.bind(this),void 0];for(O.unshift.apply(O,T),O.push.apply(O,A),V=O.length,I=Promise.resolve(_);N<V;)I=I.then(O[N++],O[N++]);return I}V=T.length;let D=_;for(N=0;N<V;){const O=T[N++],F=T[N++];try{D=O(D)}catch(M){F.call(this,M);break}}try{I=dispatchRequest$1.call(this,D)}catch(O){return Promise.reject(O)}for(N=0,V=A.length;N<V;)I=I.then(A[N++],A[N++]);return I}getUri(n){n=mergeConfig$1(this.defaults,n);const _=buildFullPath$1(n.baseURL,n.url);return buildURL$1(_,n.params,n.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function r(n){Axios$2.prototype[n]=function(_,x){return this.request(mergeConfig$1(x||{},{method:n,url:_,data:(x||{}).data}))}});utils$1.forEach(["post","put","patch"],function r(n){function _(x){return function(E,C,T){return this.request(mergeConfig$1(T||{},{method:n,headers:x?{"Content-Type":"multipart/form-data"}:{},url:E,data:C}))}}Axios$2.prototype[n]=_(),Axios$2.prototype[n+"Form"]=_(!0)});const Axios$3=Axios$2;let CancelToken$2=class zc{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let _;this.promise=new Promise(function(E){_=E});const x=this;this.promise.then(S=>{if(!x._listeners)return;let E=x._listeners.length;for(;E-- >0;)x._listeners[E](S);x._listeners=null}),this.promise.then=S=>{let E;const C=new Promise(T=>{x.subscribe(T),E=T}).then(S);return C.cancel=function(){x.unsubscribe(E)},C},n(function(E,C,T){x.reason||(x.reason=new CanceledError$1(E,C,T),_(x.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const _=this._listeners.indexOf(n);_!==-1&&this._listeners.splice(_,1)}static source(){let n;return{token:new zc(function(S){n=S}),cancel:n}}};const CancelToken$3=CancelToken$2;function spread$1(r){return function(_){return r.apply(null,_)}}function isAxiosError$1(r){return utils$1.isObject(r)&&r.isAxiosError===!0}const HttpStatusCode$2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$2).forEach(([r,n])=>{HttpStatusCode$2[n]=r});const HttpStatusCode$3=HttpStatusCode$2;function createInstance$1(r){const n=new Axios$3(r),_=bind$1(Axios$3.prototype.request,n);return utils$1.extend(_,Axios$3.prototype,n,{allOwnKeys:!0}),utils$1.extend(_,n,null,{allOwnKeys:!0}),_.create=function(S){return createInstance$1(mergeConfig$1(r,S))},_}const axios$2=createInstance$1(defaults$3);axios$2.Axios=Axios$3;axios$2.CanceledError=CanceledError$1;axios$2.CancelToken=CancelToken$3;axios$2.isCancel=isCancel$1;axios$2.VERSION=VERSION$1;axios$2.toFormData=toFormData$1;axios$2.AxiosError=AxiosError$1;axios$2.Cancel=axios$2.CanceledError;axios$2.all=function r(n){return Promise.all(n)};axios$2.spread=spread$1;axios$2.isAxiosError=isAxiosError$1;axios$2.mergeConfig=mergeConfig$1;axios$2.AxiosHeaders=AxiosHeaders$3;axios$2.formToJSON=r=>formDataToJSON$1(utils$1.isHTMLForm(r)?new FormData(r):r);axios$2.getAdapter=adapters$1.getAdapter;axios$2.HttpStatusCode=HttpStatusCode$3;axios$2.default=axios$2;const axios$3=axios$2;async function importerJSONdURL(r){return await(await axios$3.get(r)).data}async function importerFeuilleCalculDURL(r,n){const x=(await axios$3.get(r,{responseType:"arraybuffer"})).data,E=Object.assign({type:"buffer",cellDates:!0},n||{});return readSync(x,E)}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let r=0;r<256;++r)byteToHex.push((r+256).toString(16).slice(1));function unsafeStringify(r,n=0){return(byteToHex[r[n+0]]+byteToHex[r[n+1]]+byteToHex[r[n+2]]+byteToHex[r[n+3]]+"-"+byteToHex[r[n+4]]+byteToHex[r[n+5]]+"-"+byteToHex[r[n+6]]+byteToHex[r[n+7]]+"-"+byteToHex[r[n+8]]+byteToHex[r[n+9]]+"-"+byteToHex[r[n+10]]+byteToHex[r[n+11]]+byteToHex[r[n+12]]+byteToHex[r[n+13]]+byteToHex[r[n+14]]+byteToHex[r[n+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(r,n,_){if(native.randomUUID&&!n&&!r)return native.randomUUID();r=r||{};const x=r.random||(r.rng||rng)();if(x[6]=x[6]&15|64,x[8]=x[8]&63|128,n){_=_||0;for(let S=0;S<16;++S)n[_+S]=x[S];return n}return unsafeStringify(x)}class Callable extends Function{constructor(){return Object.setPrototypeOf(function(){},new.target.prototype)}}class ClientMandatairifiable extends Callable{constructor(){super();_t(this,"vnements");_t(this,"tches");_t(this,"erreurs");this.vnements=new eventsExports.EventEmitter,this.tches={},this.erreurs=[],this.vnements.on("message",_=>{const{type:x}=_;switch(x){case"suivre":{const{id:S,donnes:E}=_;if(!this.tches[S])return;const{fSuivre:C}=this.tches[S];C(E);break}case"suivrePrt":{const{id:S,fonctions:E}=_;this.vnements.emit(S,{fonctions:E});break}case"action":{const{id:S,rsultat:E}=_;this.vnements.emit(S,{rsultat:E});break}case"erreur":{const{erreur:S,id:E}=_;E?this.vnements.emit(E,{erreur:S}):this.erreur({erreur:S,id:E});break}default:this.erreur({erreur:`Type inconnu ${x} dans message ${_}.`,id:_.id})}})}__call__(_,x={}){typeof x!="object"&&this.erreur({erreur:`La fonction ${_.join(".")} fut appele avec arguments ${x}. 
      Toute fonction mandataire Constellation doit tre appele avec un seul argument en format d'objet (dictionnaire).`});const S=v4(),E=Object.entries(x).find(C=>typeof C[1]=="function")?.[0];return E?this.appelerFonctionSuivre(S,_,x,E):this.appelerFonctionAction(S,_,x)}async appelerFonctionSuivre(_,x,S,E){const C=S[E],T=Object.fromEntries(Object.entries(S).filter(O=>typeof O[1]!="function"));C===void 0&&this.erreur({erreur:"Aucun argument de nom "+E+" n'a t donne pour "+x.join(".")}),Object.keys(S).length>Object.keys(T).length+1?this.erreur({erreur:"Plus d'un argument pour "+x.join(".")+" est une fonction : "+JSON.stringify(S),id:_}):typeof C!="function"&&this.erreur({erreur:"Argument "+E+"n'est pas une fonction : ",id:_});const B={type:"suivre",id:_,fonction:x,args:T,nomArgFonction:E},I={id:_,fSuivre:C,fRetour:async(O,F)=>{const M={type:"retour",id:_,fonction:O,args:F};this.envoyerMessage(M)}};this.tches[_]=I;const N=async()=>{await this.oublierTche(_)};this.envoyerMessage(B);const{fonctions:V,erreur:D}=(await once_1(this.vnements,_))[0];if(D&&this.erreur({erreur:D,id:_}),V&&V[0]){const O={fOublier:N};for(const F of V)O[F]=async(...M)=>{await this.tches[_]?.fRetour(F,M)};return O}else return N}async appelerFonctionAction(_,x,S){const E={type:"action",id:_,fonction:x,args:S},C=new Promise((T,B)=>{once_1(this.vnements,_).then(A=>{const{rsultat:I,erreur:N}=A[0];N?B(new Error(N)):T(I)})});return this.envoyerMessage(E),C}erreur({erreur:_,id:x}){const S={erreur:_,id:x};throw this.vnements.emit("erreur",{nouvelle:S,toutes:this.erreurs}),new Error(JSON.stringify(S))}async oublierTche(_){const x=this.tches[_];x&&await x.fRetour("fOublier"),delete this.tches[_]}}class Handler{constructor(n){_t(this,"listeAtributs");this.listeAtributs=n||[]}get(n,_){if(["vnements","erreurs"].includes(_))return n[_];{const S=[...this.listeAtributs,_],E=new Handler(S);return new Proxy(n,E)}}apply(n,_,x){return n.__call__(this.listeAtributs,x[0])}}const gnrerMandataire=r=>{const n=new Handler;return new Proxy(r,n)};function __decorate(r,n,_,x){var S=arguments.length,E=S<3?n:x===null?x=Object.getOwnPropertyDescriptor(n,_):x,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(r,n,_,x);else for(var T=r.length-1;T>=0;T--)(C=r[T])&&(E=(S<3?C(E):S>3?C(n,_,E):C(n,_))||E);return S>3&&E&&Object.defineProperty(n,_,E),E}typeof SuppressedError=="function"&&SuppressedError;var md5$1={exports:{}},core={exports:{}},hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(r,n){(function(_,x){r.exports=x()})(commonjsGlobal,function(){var _=_||function(x,S){var E;if(typeof window<"u"&&window.crypto&&(E=window.crypto),typeof self<"u"&&self.crypto&&(E=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(E=globalThis.crypto),!E&&typeof window<"u"&&window.msCrypto&&(E=window.msCrypto),!E&&typeof commonjsGlobal<"u"&&commonjsGlobal.crypto&&(E=commonjsGlobal.crypto),!E&&typeof commonjsRequire=="function")try{E=requireCryptoBrowserify()}catch{}var C=function(){if(E){if(typeof E.getRandomValues=="function")try{return E.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof E.randomBytes=="function")try{return E.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},T=Object.create||function(){function j(){}return function(q){var H;return j.prototype=q,H=new j,j.prototype=null,H}}(),B={},A=B.lib={},I=A.Base=function(){return{extend:function(j){var q=T(this);return j&&q.mixIn(j),(!q.hasOwnProperty("init")||this.init===q.init)&&(q.init=function(){q.$super.init.apply(this,arguments)}),q.init.prototype=q,q.$super=this,q},create:function(){var j=this.extend();return j.init.apply(j,arguments),j},init:function(){},mixIn:function(j){for(var q in j)j.hasOwnProperty(q)&&(this[q]=j[q]);j.hasOwnProperty("toString")&&(this.toString=j.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),N=A.WordArray=I.extend({init:function(j,q){j=this.words=j||[],q!=S?this.sigBytes=q:this.sigBytes=j.length*4},toString:function(j){return(j||D).stringify(this)},concat:function(j){var q=this.words,H=j.words,X=this.sigBytes,J=j.sigBytes;if(this.clamp(),X%4)for(var Z=0;Z<J;Z++){var ae=H[Z>>>2]>>>24-Z%4*8&255;q[X+Z>>>2]|=ae<<24-(X+Z)%4*8}else for(var ce=0;ce<J;ce+=4)q[X+ce>>>2]=H[ce>>>2];return this.sigBytes+=J,this},clamp:function(){var j=this.words,q=this.sigBytes;j[q>>>2]&=4294967295<<32-q%4*8,j.length=x.ceil(q/4)},clone:function(){var j=I.clone.call(this);return j.words=this.words.slice(0),j},random:function(j){for(var q=[],H=0;H<j;H+=4)q.push(C());return new N.init(q,j)}}),V=B.enc={},D=V.Hex={stringify:function(j){for(var q=j.words,H=j.sigBytes,X=[],J=0;J<H;J++){var Z=q[J>>>2]>>>24-J%4*8&255;X.push((Z>>>4).toString(16)),X.push((Z&15).toString(16))}return X.join("")},parse:function(j){for(var q=j.length,H=[],X=0;X<q;X+=2)H[X>>>3]|=parseInt(j.substr(X,2),16)<<24-X%8*4;return new N.init(H,q/2)}},O=V.Latin1={stringify:function(j){for(var q=j.words,H=j.sigBytes,X=[],J=0;J<H;J++){var Z=q[J>>>2]>>>24-J%4*8&255;X.push(String.fromCharCode(Z))}return X.join("")},parse:function(j){for(var q=j.length,H=[],X=0;X<q;X++)H[X>>>2]|=(j.charCodeAt(X)&255)<<24-X%4*8;return new N.init(H,q)}},F=V.Utf8={stringify:function(j){try{return decodeURIComponent(escape(O.stringify(j)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(j){return O.parse(unescape(encodeURIComponent(j)))}},M=A.BufferedBlockAlgorithm=I.extend({reset:function(){this._data=new N.init,this._nDataBytes=0},_append:function(j){typeof j=="string"&&(j=F.parse(j)),this._data.concat(j),this._nDataBytes+=j.sigBytes},_process:function(j){var q,H=this._data,X=H.words,J=H.sigBytes,Z=this.blockSize,ae=Z*4,ce=J/ae;j?ce=x.ceil(ce):ce=x.max((ce|0)-this._minBufferSize,0);var ve=ce*Z,pe=x.min(ve*4,J);if(ve){for(var G=0;G<ve;G+=Z)this._doProcessBlock(X,G);q=X.splice(0,ve),H.sigBytes-=pe}return new N.init(q,pe)},clone:function(){var j=I.clone.call(this);return j._data=this._data.clone(),j},_minBufferSize:0});A.Hasher=M.extend({cfg:I.extend(),init:function(j){this.cfg=this.cfg.extend(j),this.reset()},reset:function(){M.reset.call(this),this._doReset()},update:function(j){return this._append(j),this._process(),this},finalize:function(j){j&&this._append(j);var q=this._doFinalize();return q},blockSize:16,_createHelper:function(j){return function(q,H){return new j.init(H).finalize(q)}},_createHmacHelper:function(j){return function(q,H){return new L.HMAC.init(j,H).finalize(q)}}});var L=B.algo={};return B}(Math);return _})}(core)),core.exports}(function(r,n){(function(_,x){r.exports=x(requireCore())})(commonjsGlobal,function(_){return function(x){var S=_,E=S.lib,C=E.WordArray,T=E.Hasher,B=S.algo,A=[];(function(){for(var F=0;F<64;F++)A[F]=x.abs(x.sin(F+1))*4294967296|0})();var I=B.MD5=T.extend({_doReset:function(){this._hash=new C.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(F,M){for(var L=0;L<16;L++){var j=M+L,q=F[j];F[j]=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360}var H=this._hash.words,X=F[M+0],J=F[M+1],Z=F[M+2],ae=F[M+3],ce=F[M+4],ve=F[M+5],pe=F[M+6],G=F[M+7],Y=F[M+8],U=F[M+9],W=F[M+10],ee=F[M+11],re=F[M+12],oe=F[M+13],ie=F[M+14],ne=F[M+15],te=H[0],K=H[1],le=H[2],ue=H[3];te=N(te,K,le,ue,X,7,A[0]),ue=N(ue,te,K,le,J,12,A[1]),le=N(le,ue,te,K,Z,17,A[2]),K=N(K,le,ue,te,ae,22,A[3]),te=N(te,K,le,ue,ce,7,A[4]),ue=N(ue,te,K,le,ve,12,A[5]),le=N(le,ue,te,K,pe,17,A[6]),K=N(K,le,ue,te,G,22,A[7]),te=N(te,K,le,ue,Y,7,A[8]),ue=N(ue,te,K,le,U,12,A[9]),le=N(le,ue,te,K,W,17,A[10]),K=N(K,le,ue,te,ee,22,A[11]),te=N(te,K,le,ue,re,7,A[12]),ue=N(ue,te,K,le,oe,12,A[13]),le=N(le,ue,te,K,ie,17,A[14]),K=N(K,le,ue,te,ne,22,A[15]),te=V(te,K,le,ue,J,5,A[16]),ue=V(ue,te,K,le,pe,9,A[17]),le=V(le,ue,te,K,ee,14,A[18]),K=V(K,le,ue,te,X,20,A[19]),te=V(te,K,le,ue,ve,5,A[20]),ue=V(ue,te,K,le,W,9,A[21]),le=V(le,ue,te,K,ne,14,A[22]),K=V(K,le,ue,te,ce,20,A[23]),te=V(te,K,le,ue,U,5,A[24]),ue=V(ue,te,K,le,ie,9,A[25]),le=V(le,ue,te,K,ae,14,A[26]),K=V(K,le,ue,te,Y,20,A[27]),te=V(te,K,le,ue,oe,5,A[28]),ue=V(ue,te,K,le,Z,9,A[29]),le=V(le,ue,te,K,G,14,A[30]),K=V(K,le,ue,te,re,20,A[31]),te=D(te,K,le,ue,ve,4,A[32]),ue=D(ue,te,K,le,Y,11,A[33]),le=D(le,ue,te,K,ee,16,A[34]),K=D(K,le,ue,te,ie,23,A[35]),te=D(te,K,le,ue,J,4,A[36]),ue=D(ue,te,K,le,ce,11,A[37]),le=D(le,ue,te,K,G,16,A[38]),K=D(K,le,ue,te,W,23,A[39]),te=D(te,K,le,ue,oe,4,A[40]),ue=D(ue,te,K,le,X,11,A[41]),le=D(le,ue,te,K,ae,16,A[42]),K=D(K,le,ue,te,pe,23,A[43]),te=D(te,K,le,ue,U,4,A[44]),ue=D(ue,te,K,le,re,11,A[45]),le=D(le,ue,te,K,ne,16,A[46]),K=D(K,le,ue,te,Z,23,A[47]),te=O(te,K,le,ue,X,6,A[48]),ue=O(ue,te,K,le,G,10,A[49]),le=O(le,ue,te,K,ie,15,A[50]),K=O(K,le,ue,te,ve,21,A[51]),te=O(te,K,le,ue,re,6,A[52]),ue=O(ue,te,K,le,ae,10,A[53]),le=O(le,ue,te,K,W,15,A[54]),K=O(K,le,ue,te,J,21,A[55]),te=O(te,K,le,ue,Y,6,A[56]),ue=O(ue,te,K,le,ne,10,A[57]),le=O(le,ue,te,K,pe,15,A[58]),K=O(K,le,ue,te,oe,21,A[59]),te=O(te,K,le,ue,ce,6,A[60]),ue=O(ue,te,K,le,ee,10,A[61]),le=O(le,ue,te,K,Z,15,A[62]),K=O(K,le,ue,te,U,21,A[63]),H[0]=H[0]+te|0,H[1]=H[1]+K|0,H[2]=H[2]+le|0,H[3]=H[3]+ue|0},_doFinalize:function(){var F=this._data,M=F.words,L=this._nDataBytes*8,j=F.sigBytes*8;M[j>>>5]|=128<<24-j%32;var q=x.floor(L/4294967296),H=L;M[(j+64>>>9<<4)+15]=(q<<8|q>>>24)&16711935|(q<<24|q>>>8)&4278255360,M[(j+64>>>9<<4)+14]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360,F.sigBytes=(M.length+1)*4,this._process();for(var X=this._hash,J=X.words,Z=0;Z<4;Z++){var ae=J[Z];J[Z]=(ae<<8|ae>>>24)&16711935|(ae<<24|ae>>>8)&4278255360}return X},clone:function(){var F=T.clone.call(this);return F._hash=this._hash.clone(),F}});function N(F,M,L,j,q,H,X){var J=F+(M&L|~M&j)+q+X;return(J<<H|J>>>32-H)+M}function V(F,M,L,j,q,H,X){var J=F+(M&j|L&~j)+q+X;return(J<<H|J>>>32-H)+M}function D(F,M,L,j,q,H,X){var J=F+(M^L^j)+q+X;return(J<<H|J>>>32-H)+M}function O(F,M,L,j,q,H,X){var J=F+(L^(M|~j))+q+X;return(J<<H|J>>>32-H)+M}S.MD5=T._createHelper(I),S.HmacMD5=T._createHmacHelper(I)}(Math),_.MD5})})(md5$1);var md5Exports=md5$1.exports;const md5=getDefaultExportFromCjs(md5Exports);var encBase64={exports:{}};(function(r,n){(function(_,x){r.exports=x(requireCore())})(commonjsGlobal,function(_){return function(){var x=_,S=x.lib,E=S.WordArray,C=x.enc;C.Base64={stringify:function(B){var A=B.words,I=B.sigBytes,N=this._map;B.clamp();for(var V=[],D=0;D<I;D+=3)for(var O=A[D>>>2]>>>24-D%4*8&255,F=A[D+1>>>2]>>>24-(D+1)%4*8&255,M=A[D+2>>>2]>>>24-(D+2)%4*8&255,L=O<<16|F<<8|M,j=0;j<4&&D+j*.75<I;j++)V.push(N.charAt(L>>>6*(3-j)&63));var q=N.charAt(64);if(q)for(;V.length%4;)V.push(q);return V.join("")},parse:function(B){var A=B.length,I=this._map,N=this._reverseMap;if(!N){N=this._reverseMap=[];for(var V=0;V<I.length;V++)N[I.charCodeAt(V)]=V}var D=I.charAt(64);if(D){var O=B.indexOf(D);O!==-1&&(A=O)}return T(B,A,N)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function T(B,A,I){for(var N=[],V=0,D=0;D<A;D++)if(D%4){var O=I[B.charCodeAt(D-1)]<<D%4*2,F=I[B.charCodeAt(D)]>>>6-D%4*2,M=O|F;N[V>>>2]|=M<<24-V%4*8,V++}return E.create(N,V)}}(),_.enc.Base64})})(encBase64);var encBase64Exports=encBase64.exports;const Base64=getDefaultExportFromCjs(encBase64Exports);class CacheSuivi{constructor(){_t(this,"verrou");_t(this,"_cacheSuivi");_t(this,"_cacheRecherche");this.verrou=new s,this._cacheSuivi={},this._cacheRecherche={}}async suivre({adresseFonction:n,idClient:_,fOriginale:x,args:S,ceciOriginal:E}){const C=Object.entries(S).find(V=>typeof V[1]=="function")?.[0];if(!C)throw new Error("Aucun argument n'est une fonction.");const T=S[C],B=Object.fromEntries(Object.entries(S).filter(V=>typeof V[1]!="function"));if(Object.keys(S).length!==Object.keys(B).length+1)throw new Error("Plus d'un argument pour "+n+" est une fonction : "+JSON.stringify(S));const A=this.gnrerCodeCache({adresseFonction:n,idClient:_,argsClefs:B}),I=v4$1();if(await this.verrou.acquire(A),this._cacheSuivi[A])this.verrou.release(A),this._cacheSuivi[A].requtes[I]=T,Object.keys(this._cacheSuivi[A]).includes("val")&&await T(this._cacheSuivi[A].val);else{this._cacheSuivi[A]={requtes:{[I]:T}};const V=async F=>{if(!this._cacheSuivi[A]||Object.keys(this._cacheSuivi[A]).includes("val")&&deepEqual$1(this._cacheSuivi[A].val,F,{strict:!0}))return;this._cacheSuivi[A].val=F;const M=Object.values(this._cacheSuivi[A].requtes);await Promise.all(M.map(L=>L(F)))},D={...B,[C]:V},O=await x.apply(E,[D]);this._cacheSuivi[A].fOublier=O,this.verrou.release(A)}return async()=>{await this.oublierSuivi({codeCache:A,idRequte:I})}}async suivreRecherche({adresseFonction:n,nomArgTaille:_,idClient:x,fOriginale:S,args:E,ceciOriginal:C,par:T}){const B=Object.entries(E).find(j=>typeof j[1]=="function")?.[0];if(!B)throw new Error("Aucun argument n'est une fonction.");const A=E[B],I=Object.fromEntries(Object.entries(E).filter(j=>typeof j[1]!="function"));if(Object.keys(E).length!==Object.keys(I).length+1)throw new Error("Plus d'un argument pour "+n+" est une fonction : "+JSON.stringify(E));const N=Object.fromEntries(Object.entries(E).filter(j=>j[0]!==_)),V=E[_];if(V===void 0)throw new Error(`Aucun argument de nom ${_} n'a t pass  la fonction ${n}.`);if(typeof V!="number")throw new Error(`Argument ${_} n'est pas un nombre dans la fonction ${n}.`);const D=this.gnrerCodeCache({adresseFonction:n,idClient:x,argsClefs:N}),O=v4$1();await this.verrou.acquire(D);const F=j=>{if(!this._cacheRecherche[D])return;this._cacheRecherche[D].val=j;const q=Object.values(this._cacheRecherche[D].requtes);T==="profondeur"?q.forEach(H=>H.f(j.filter(X=>X.profondeur<=H.taille))):q.forEach(H=>H.f(j.slice(0,H.taille)))};if(this._cacheRecherche[D]){if(this._cacheRecherche[D].requtes[O]={f:A,taille:V},Object.keys(this._cacheRecherche[D]).includes("val")){const{val:j}=this._cacheRecherche[D];j&&F(j)}}else{this._cacheRecherche[D]={requtes:{[O]:{f:A,taille:V}},taillePrsente:V};const j={...N,[B]:F,[_]:V};if(T==="profondeur"){const{fOublier:q,fChangerProfondeur:H}=await S.apply(C,[j]);this._cacheRecherche[D].fs={fOublier:q,fChangerTaille:H}}else{const{fOublier:q,fChangerN:H}=await S.apply(C,[j]);this._cacheRecherche[D].fs={fOublier:q,fChangerTaille:H}}}const M=async()=>{await this.oublierRecherche({codeCache:D,idRequte:O})},L=j=>{const q=this._cacheRecherche[D].requtes[O].taille;if(j===q)return;this._cacheRecherche[D].requtes[O].taille=j;const{val:H}=this._cacheRecherche[D];H&&F(H);const X=Math.max(...Object.values(this._cacheRecherche[D].requtes).map(ae=>ae.taille)),{taillePrsente:J}=this._cacheRecherche[D],{fChangerTaille:Z}=this._cacheRecherche[D].fs;X!==J&&(this._cacheRecherche[D].taillePrsente=X,Z(X))};return this.verrou.release(D),{fOublier:M,[T==="profondeur"?"fChangerProfondeur":"fChangerN"]:L}}async oublierSuivi({codeCache:n,idRequte:_}){if(await this.verrou.acquire(n),this._cacheSuivi[n]===void 0)return;const{requtes:x,fOublier:S}=this._cacheSuivi[n];delete x[_],Object.keys(x).length||(S&&await S(),delete this._cacheSuivi[n]),this.verrou.release(n)}async oublierRecherche({codeCache:n,idRequte:_}){if(await this.verrou.acquire(n),this._cacheRecherche[n]===void 0)return;const{requtes:x,fs:S}=this._cacheRecherche[n];delete x[_],Object.keys(x).length||(S&&await S.fOublier(),delete this._cacheRecherche[n]),this.verrou.release(n)}gnrerCodeCache({adresseFonction:n,idClient:_,argsClefs:x}){const S=n+"-"+_+"-"+JSON.stringify(x);return Base64.stringify(md5(S))}}const cacheSuivi=(r,n,_)=>envelopper({nom:n,descripteur:_}),cacheRechercheParNRsultats=(r,n,_)=>envelopper({nom:n,descripteur:_,recherche:"nRsultats"}),cacheRechercheParProfondeur=(r,n,_)=>envelopper({nom:n,descripteur:_,recherche:"profondeur"}),envelopper=({nom:r,descripteur:n,recherche:_,nomArgTaille:x})=>{const S=n.value;if(typeof S=="function")n.value=function(...E){if(E.length>1)throw new Error("Args trop longs");const C=this.client?this.client:this;try{return _?(x=x||(_==="profondeur"?"profondeur":"nRsultatsDsirs"),cache.suivreRecherche({adresseFonction:this.constructor.name+"."+r,idClient:C.idCompte,fOriginale:S,args:E[0],ceciOriginal:this,par:_,nomArgTaille:x})):cache.suivre({adresseFonction:this.constructor.name+"."+r,idClient:C.idCompte,fOriginale:S,args:E[0],ceciOriginal:this})}catch(T){throw console.error(`Erreur: ${T}`),T}};else throw new Error("L'objet dcor n'est pas une fonction");return n},cache=new CacheSuivi;function traduire(r,n){const _=n.find(S=>r[S]!==void 0);return _?r[_]:void 0}async function zipper(r,n,_){_.endsWith(".zip")||(_=`${_}.zip`);const x=new JSZip;for(const E of r)x.file(E.nom,E.octets);const S=x.folder("sfip");for(const E of n)S.file(E.nom,E.octets);await sauvegarderFichierZip({fichierZip:x,nomFichier:_})}async function sauvegarderFichierZip({fichierZip:r,nomFichier:n}){if(isNode||isElectronMain){const _=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal),void 0),x=r.generateNodeStream();_.mkdirSync(path.dirname(n),{recursive:!0});const S=_.createWriteStream(n),E=x.pipe(S);return new Promise(C=>E.on("finish",C))}else{const _=await r.generateAsync({type:"blob"});await o(_,{fileName:n})}}function cidValide(r){if(typeof r=="string")try{return CID$2.parse(r),!0}catch{return!1}return!1}async function toBuffer$1(r,n){let _=new Uint8Array(0);for await(const x of r)if(_=concat$3([_,x],_.length+x.length),n!==void 0&&_.length>n)return null;return _}class metteurUneFois extends eventsExports.EventEmitter{constructor(_,x){super();_t(this,"condition");_t(this,"rsultatPrt");_t(this,"fOublier");_t(this,"rsultat");_t(this,"f");this.condition=x||(()=>!0),this.rsultatPrt=!1,this.f=_,this.initialiser()}async initialiser(){const _=async x=>{this.condition(x)&&(this.rsultat=x,this.rsultatPrt=!0,this.fOublier&&this.lorsquePrt())};this.fOublier=await this.f(_),this.lorsquePrt()}lorsquePrt(){if(this.rsultatPrt){if(!this.fOublier)throw new Error("Fuite !!");this.fOublier&&this.fOublier(),this.emit("fini",this.rsultat)}}}const suivreBdDeFonction=async({fRacine:r,f:n,fSuivre:_})=>{let x,S,E=!0;const C=await r({fSuivreRacine:async T=>{T===void 0&&E&&(E=!1,await n(void 0)),T!==S&&(S=T,x&&await x(),S?x=await _({id:S,fSuivreBd:n}):(await n(void 0),x=void 0))}});return async()=>{await C(),x&&await x()}},uneFois=async function(r,n){const _=new metteurUneFois(r,n);return(await once_1(_,"fini"))[0]},faisRien=async()=>{},ignorerNonDfinis=r=>async n=>{if(n!==void 0)return await r(n)};var conditions;(function(r){r.ATTR="attribution",r.GAL="partagegal",r.INCL="inclureDroitDauteur",r.CHNG="indiquerChangements",r.SRCE="partagerCodeSource",r.USGR="usagereseau"})(conditions||(conditions={}));var droits;(function(r){r.PRTG="partager",r.ADPT="adapter",r.CMRC="usageComercial",r.PRV="usagePriv",r.BREV="usageBrevets"})(droits||(droits={}));var limitations;(function(r){r.RSP="aucuneResponsabilit",r.GRNT="aucuneGarantie",r.MRCM="marqueCommerce",r.BREV="brevetExclu",r.SOUS="sousLicence"})(limitations||(limitations={}));var catgories;(function(r){r.BD="basesDeDonnes",r.ART="artistique",r.CODE="codeInformatique",r.AUTRE="autre"})(catgories||(catgories={}));const infoLicences={"ODbl-1_0":{droits:[droits.CMRC,droits.PRTG,droits.PRV,droits.ADPT],conditions:[conditions.ATTR,conditions.GAL,conditions.INCL],limitations:[limitations.RSP,limitations.BREV,limitations.MRCM,limitations.GRNT],catgorie:catgories.BD},"ODC-BY-1_0":{droits:[droits.CMRC,droits.PRTG,droits.PRV,droits.ADPT],conditions:[conditions.ATTR,conditions.INCL],limitations:[limitations.RSP,limitations.GRNT,limitations.MRCM,limitations.BREV],catgorie:catgories.BD},PDDL:{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[],limitations:[limitations.RSP,limitations.GRNT,limitations.MRCM,limitations.BREV],catgorie:catgories.BD},"rvca-open":{droits:[droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG],conditions:[conditions.INCL,conditions.ATTR],limitations:[limitations.SOUS,limitations.RSP],catgorie:catgories.BD,spcialise:!0},"CC-BY-SA-4_0":{droits:[droits.PRTG,droits.ADPT,droits.CMRC,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.GAL],limitations:[limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT],catgorie:catgories.ART},"CC-BY-4_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[conditions.ATTR,conditions.CHNG],limitations:[limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT],catgorie:catgories.ART},"CC-0-1_0":{droits:[droits.PRTG,droits.ADPT,droits.CMRC,droits.PRV],conditions:[],limitations:[limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT],catgorie:catgories.ART},"0bsd":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[],limitations:[],catgorie:catgories.CODE},"afl-3_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,droits.BREV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.MRCM,limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"agpl-3_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.USGR,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"apache-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.MRCM,limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"artistic-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},"bsd-2-clause":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"bsd-3-clause-clear":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.BREV,limitations.GRNT],catgorie:catgories.CODE},"bsd-3-clause":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"bsd-4-clause":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"bsl-1_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"cecill-2_1":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,droits.BREV],conditions:[conditions.INCL,conditions.SRCE,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"ecl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.BREV,limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"epl-1_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"epl-2_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"eupl-1_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.GAL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},"eupl-1_2":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.GAL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},"gpl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"gpl-3_0":{droits:[droits.CMRC,droits.ADPT,droits.PRV,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},isc:{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"lgpl-2_1":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"lgpl-3_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"lppl-1_3c":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"mit-0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},mit:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"mpl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.GAL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},"ms-pl":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.GRNT,limitations.MRCM],catgorie:catgories.CODE},"ms-rl":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.GAL],limitations:[limitations.GRNT,limitations.MRCM],catgorie:catgories.CODE},"mulanpsl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},ncsa:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"osl-3_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.GAL],limitations:[limitations.MRCM,limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},postgresql:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},unlicence:{droits:[droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG],conditions:[],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"upl-1_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},vim:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.GAL],limitations:[],catgorie:catgories.CODE},wtfpl:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[],limitations:[],catgorie:catgories.CODE},zlib:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"ofl-1_1":{droits:[droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG],conditions:[conditions.INCL,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.AUTRE}};class Licences{constructor({client:n}){_t(this,"client");_t(this,"vnements");_t(this,"prt");_t(this,"perroquet");this.client=n,this.prt=!1,this.vnements=new EventEmitter$4,this.initialiser()}async initialiser(){this.prt=!0,this.vnements.emit("prt")}async attendrePrt(){if(!this.prt)return new Promise(n=>{const _=()=>{n(),this.vnements.off("prt",_)};this.vnements.on("prt",_)})}async suivreLicences({f:n}){if(await n(infoLicences),await this.attendrePrt(),this.perroquet){const _=async x=>await n(Object.fromEntries(x.map(S=>[S.code,S])));return await this.perroquet._({:_,:""})}return faisRien}async suggrerLicence({code:n,infoLicence:_}){await this.attendrePrt(),this.perroquet&&await this.perroquet.({:{code:n,..._}})}async effacerSuggestionLicence({idlment:n}){await this.attendrePrt(),this.perroquet&&await this.perroquet._({:n})}async suivreSuggestionsLicences({f:n}){return await this.attendrePrt(),this.perroquet?await this.perroquet._({:n}):{fOublier:faisRien,fChangerProfondeur:faisRien}}async approuverLicence({suggestion:n}){if(await this.attendrePrt(),this.perroquet)return await this.perroquet.({:n})}}__decorate([cacheSuivi],Licences.prototype,"suivreLicences",null);var lib={},indexedDbReadStream={},__extends$2=commonjsGlobal&&commonjsGlobal.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,_){n.__proto__=_}||function(n,_){for(var x in _)_.hasOwnProperty(x)&&(n[x]=_[x])};return function(n,_){r(n,_);function x(){this.constructor=n}n.prototype=_===null?Object.create(_):(x.prototype=_.prototype,new x)}}();Object.defineProperty(indexedDbReadStream,"__esModule",{value:!0});var stream_1$1=require$$0$1,IndexedDbReadStream=function(r){__extends$2(n,r);function n(_){var x=r.call(this,{objectMode:!0})||this,S=indexedDB.open(_.databaseName,_.databaseVersion);return S.addEventListener("success",function(E){var C;try{var T=E.target.result.transaction([_.objectStoreName]).objectStore(_.objectStoreName);_.indexName&&(T=T.index(_.indexName)),C=T.openCursor(_.range,_.cursorDirection)}catch(B){return x.emit("error",B)}C.addEventListener("success",function(B){if(B.target.result)return x.push(B.target.result.value),B.target.result.continue();x.push(null)}),C.addEventListener("error",function(B){x.emit("error",B.target.result)})}),S.addEventListener("error",function(E){x.emit("error",E.target.result)}),x}return n.prototype._read=function(){},n}(stream_1$1.Readable);indexedDbReadStream.IndexedDbReadStream=IndexedDbReadStream;var indexedDbWriteStream={},__extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,_){n.__proto__=_}||function(n,_){for(var x in _)_.hasOwnProperty(x)&&(n[x]=_[x])};return function(n,_){r(n,_);function x(){this.constructor=n}n.prototype=_===null?Object.create(_):(x.prototype=_.prototype,new x)}}();Object.defineProperty(indexedDbWriteStream,"__esModule",{value:!0});var stream_1=require$$0$1,IndexedDbWriteStream=function(r){__extends$1(n,r);function n(_){var x=r.call(this,{objectMode:!0})||this;return x.options=_,x}return n.prototype._write=function(_,x,S){var E=this,C=indexedDB.open(this.options.databaseName,this.options.databaseVersion);C.addEventListener("success",function(T){var B;try{B=T.target.result.transaction([E.options.objectStoreName],"readwrite").objectStore(E.options.objectStoreName).add(_)}catch(A){E.emit("error",A);return}B.addEventListener("success",function(){S()}),B.addEventListener("error",function(A){E.emit("error",A.target.error)})}),C.addEventListener("error",function(T){E.emit("error",T.target.error)})},n}(stream_1.Writable);indexedDbWriteStream.IndexedDbWriteStream=IndexedDbWriteStream;(function(r){function n(_){for(var x in _)r.hasOwnProperty(x)||(r[x]=_[x])}Object.defineProperty(r,"__esModule",{value:!0}),n(indexedDbReadStream),n(indexedDbWriteStream)})(lib);const indexedDbStream=getDefaultExportFromCjs(lib),cidEtFichierValide=r=>{let n,_;try{[n,_]=r.split("/")}catch{return!1}return!_||!cidValide(n)?!1:{cid:n,fichier:_}};class pingles{constructor({client:n}){_t(this,"client");_t(this,"requtes");_t(this,"fsOublier");_t(this,"vnements");this.client=n,this.requtes=[],this.fsOublier={},this.vnements=new eventsExports.EventEmitter}async pinglerBd({id:n,rcursif:_=!1,fichiers:x=!0}){await this.directementpingle({id:n})||await this._pingler({id:n,rcursif:_,fichiers:x})}async dspinglerBd({id:n}){await Promise.all(this.requtes.filter(x=>x.id===n).map(async x=>await x.fOublier()));const _=this.requtes.filter(x=>x.parent===n);this.requtes=this.requtes.filter(x=>x.id!==n),this.requtes=this.requtes.filter(x=>x.parent!==n),await Promise.all(_.map(async x=>{this.requtes.filter(S=>S.id===x.id&&S.parent!==n).length||await this.dspinglerBd({id:x.id})})),this.vnements.emit("changement pingles")}async pingle({id:n}){return this.requtes.some(_=>_.id===n)}async pingleParParent({id:n,parent:_}){return this.requtes.some(x=>x.id===n&&x.parent===_)}async directementpingle({id:n}){return await this.pingleParParent({id:n})}async pingles(){return new Set(this.requtes.map(n=>n.id))}async suivrepingles({f:n}){const _=async()=>{const x=await this.pingles();return await n(x)};return this.vnements.on("changement pingles",_),async()=>{this.vnements.off("changement pingles",_)}}async _pingler({id:n,rcursif:_,fichiers:x,parent:S}){if(await this.pingleParParent({id:n,parent:S}))return;const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBd({id:n});if(this.requtes.push({id:n,parent:S,fOublier:C}),this.vnements.emit("changement pingles"),_){const T=async B=>{let A=[];typeof B=="object"?(A=Object.values(B).filter(N=>typeof N=="string"),A.push(...Object.keys(B).filter(N=>typeof N=="string"))):Array.isArray(B)?A=B:typeof B=="string"&&(A=[B]);const I=A.filter(N=>isValidAddress(N));x&&A.filter(V=>cidEtFichierValide(V)&&!I.includes(V)).forEach(V=>{this.client.sfip.pin.add(V.split("/")[0]);const D=async()=>{try{await this.client.sfip.pin.rm(V)}catch{}};this.requtes.push({id:V,parent:n,fOublier:D}),this.vnements.emit("changement pingles")}),await Promise.all(I.map(async N=>await this._pingler({id:N,rcursif:_,fichiers:x,parent:n})))};if(E.type==="keyvalue"){const B=await this.client.suivreBdDic({id:n,f:T});this.fsOublier[n]=B}else if(E.type==="ordered-keyvalue"){const B=await this.client.suivreBdDicOrdonne({id:n,f:T});this.fsOublier[n]=B}else if(E.type==="set"){const B=await this.client.suivreBdListe({id:n,f:T});this.fsOublier[n]=B}}}async toutDspingler(){const n=await this.pingles();await Promise.all([...n].map(async _=>{await this.dspinglerBd({id:_})}))}async fermer(){await Promise.all(Object.values(this.fsOublier).map(n=>n()))}}var TYPES_STATUT;(function(r){r.INTERNE="interne",r.BTA="bta",r.ACTIVE="active",r.OBSOLTE="obsolte"})(TYPES_STATUT||(TYPES_STATUT={}));const schmaStructureBdNoms={type:"object",additionalProperties:{type:"string"},required:[]},schmaStructureBdMtadonnes={type:"object",additionalProperties:!0,required:[]};class ComposanteClient{constructor({client:n,clef:_,typeBd:x}){_t(this,"client");_t(this,"clef");_t(this,"typeBd");this.client=n,this.clef=_,this.typeBd=x}async obtIdBd(){const n=await this.client.obtIdBd({nom:this.clef,racine:this.client.bdCompte,type:this.typeBd});if(!n)throw new Error("Mal initialis");return n}}class ComposanteClientDic extends ComposanteClient{constructor({client:_,clef:x,schmaBdPrincipale:S}){super({client:_,clef:x,typeBd:"keyvalue"});_t(this,"schmaBdPrincipale");this.schmaBdPrincipale=S}async obtBd(){const _=await this.obtIdBd();if(!_)throw new Error("Initialisation "+this.clef);return await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:this.schmaBdPrincipale})}async suivreBdPrincipale({idCompte:_,f:x}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:S})=>await this.suivreIdBd({f:S,idCompte:_}),f:ignorerNonDfinis(x),fSuivre:async({id:S,fSuivreBd:E})=>await this.client.suivreBdDic({id:S,schma:this.schmaBdPrincipale,f:E})})}async suivreSousBdDic({idCompte:_,clef:x,schma:S,f:E}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:C})=>await this.suivreIdBd({f:C,idCompte:_}),f:ignorerNonDfinis(E),fSuivre:async({id:C,fSuivreBd:T})=>await this.client.suivreBdDicDeClef({id:C,clef:x,schma:S,f:T})})}async suivreSousBdListe({idCompte:_,clef:x,schma:S,f:E}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:C})=>await this.suivreIdBd({f:C,idCompte:_}),f:ignorerNonDfinis(E),fSuivre:async({id:C,fSuivreBd:T})=>await this.client.suivreBdListeDeClef({id:C,clef:x,f:T,schma:S,renvoyerValeur:!0})})}async suivreIdBd({f:_,idCompte:x}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:S})=>x?(await S(x),faisRien):await this.client.suivreIdCompte({f:S}),f:ignorerNonDfinis(_),fSuivre:async({id:S,fSuivreBd:E})=>await this.client.suivreBd({id:S,type:"keyvalue",f:async C=>{const T=await this.client.obtIdBd({nom:this.clef,racine:C,type:"keyvalue"});return await E(T)}})})}}__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreBdPrincipale",null);__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreSousBdDic",null);__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreSousBdListe",null);__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreIdBd",null);class ComposanteClientListe extends ComposanteClient{constructor({client:_,clef:x,schmaBdPrincipale:S}){super({client:_,clef:x,typeBd:"set"});_t(this,"schmaBdPrincipale");this.schmaBdPrincipale=S}async obtBd(){const _=await this.obtIdBd();if(!_)throw new Error("Initialisation "+this.clef);return await this.client.orbite.ouvrirBdType({id:_,type:"set",schma:this.schmaBdPrincipale})}async suivreBdPrincipale({idCompte:_,f:x}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:S})=>await this.suivreIdBd({f:S,idCompte:_}),f:ignorerNonDfinis(x),fSuivre:async({id:S,fSuivreBd:E})=>await this.client.suivreBdListe({id:S,f:E,schma:this.schmaBdPrincipale,renvoyerValeur:!0})})}async suivreIdBd({f:_,idCompte:x}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:S})=>x?(await S(x),faisRien):await this.client.suivreIdCompte({f:S}),f:ignorerNonDfinis(_),fSuivre:async({id:S,fSuivreBd:E})=>await this.client.suivreBd({id:S,type:"keyvalue",schma:schmaStructureBdCompte,f:async()=>{const C=await this.client.obtIdBd({nom:this.clef,racine:S,type:"set"});return await E(C)}})})}}__decorate([cacheSuivi],ComposanteClientListe.prototype,"suivreBdPrincipale",null);__decorate([cacheSuivi],ComposanteClientListe.prototype,"suivreIdBd",null);const MAX_TAILLE_IMAGE$3=500*1e3,MAX_TAILLE_IMAGE_VIS$3=1500*1e3,schmaStructureBdProfil={type:"object",properties:{image:{type:"string",nullable:!0}},required:[]},schmaContactProfil={type:"object",properties:{type:{type:"string"},contact:{type:"string"}},required:["contact","type"]};class Profil extends ComposanteClientDic{constructor({client:n}){super({client:n,clef:"profil",schmaBdPrincipale:schmaStructureBdProfil})}async pingler(){const n=await this.obtIdBd();await this.client.pingles?.pinglerBd({id:n,rcursif:!0,fichiers:!0})}async suivreCourriel({f:n,idCompte:_}){return await this.suivreContacts({idCompte:_,f:async x=>await n(x.find(S=>S.type=="courriel")?.contact||null)})}async sauvegarderCourriel({courriel:n}){await this.sauvegarderContact({type:"courriel",contact:n})}async effacerCourriel(){await this.effacerContact({type:"courriel"})}async suivreContacts({f:n,idCompte:_}){return await this.suivreSousBdListe({idCompte:_,clef:"contacts",schma:schmaContactProfil,f:n})}async sauvegarderContact({type:n,contact:_}){const x=await this.obtIdBd(),S=await this.client.obtIdBd({nom:"contacts",racine:x,type:"set"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"set",schma:schmaContactProfil});await E.add({type:n,contact:_}),await C()}async effacerContact({type:n,contact:_}){const x=await this.obtIdBd(),S=await this.client.obtIdBd({nom:"contacts",racine:x,type:"set"});if(!S)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"set",schma:schmaContactProfil}),B=(await E.all()).filter(A=>A.value.type===n&&(_===void 0||A.value.contact===_));await Promise.all(B.map(async A=>await E.del(A.value))),await C()}async suivreNoms({f:n,idCompte:_}){return await this.suivreSousBdDic({idCompte:_,clef:"noms",schma:schmaStructureBdNoms,f:n})}async sauvegarderNom({langue:n,nom:_}){return await this.sauvegarderNoms({noms:{[n]:_}})}async sauvegarderNoms({noms:n}){const _=await this.obtIdBd(),x=await this.client.obtIdBd({nom:"noms",racine:_,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});for(const[C,T]of Object.entries(n))await S.set(C,T);await E()}async effacerNom({langue:n}){const _=await this.obtIdBd(),x=await this.client.obtIdBd({nom:"noms",racine:_,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});await S.del(n),await E()}async sauvegarderImage({image:n}){let _;if(n.content.size!==void 0){if(n.content.size>MAX_TAILLE_IMAGE$3)throw new Error("Taille maximale excde");_={path:n.path,content:await n.content.arrayBuffer()}}else _=n;const x=await this.client.ajouterSFIP({fichier:_}),{bd:S,fOublier:E}=await this.obtBd();await S.set("image",x),await E()}async effacerImage(){const{bd:n,fOublier:_}=await this.obtBd();await n.del("image"),await _()}async suivreImage({f:n,idCompte:_}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:x})=>await this.suivreIdBd({f:x,idCompte:_}),f:ignorerNonDfinis(n),fSuivre:async({id:x,fSuivreBd:S})=>await this.client.suivreBd({id:x,type:"keyvalue",schma:schmaStructureBdProfil,f:async E=>{const C=await E.get("image");if(C){const T=await this.client.obtFichierSFIP({id:C,max:MAX_TAILLE_IMAGE_VIS$3});return await S(T)}else return await S(null)}})})}}__decorate([cacheSuivi],Profil.prototype,"suivreCourriel",null);__decorate([cacheSuivi],Profil.prototype,"suivreContacts",null);__decorate([cacheSuivi],Profil.prototype,"suivreNoms",null);__decorate([cacheSuivi],Profil.prototype,"suivreImage",null);function isAsyncIterable(r){return r[Symbol.asyncIterator]!=null}function toBuffer(r){if(isAsyncIterable(r))return(async()=>{let x=new Uint8Array(0);for await(const S of r)x=concat$3([x,S],x.length+S.length);return x})();const n=[];let _=0;for(const x of r)n.push(x),_+=x.byteLength;return concat$3(n,_)}const schmaStructureBdBd={type:"object",properties:{type:{type:"string"},mtadonnes:{type:"string",nullable:!0},licence:{type:"string"},licenceContenu:{type:"string",nullable:!0},image:{type:"string",nullable:!0},noms:{type:"string"},descriptions:{type:"string"},tableaux:{type:"string"},motsClefs:{type:"string"},nues:{type:"string"},statut:{type:"object",properties:{statut:{type:"string"},idNouvelle:{type:"string",nullable:!0}},required:["statut"]},copiDe:{type:"object",properties:{id:{type:"string"}},required:["id"]}},required:["type","licence","noms","descriptions","tableaux","motsClefs","nues","statut","copiDe"]},schmaInfoTableau={type:"object",properties:{clef:{type:"string"}},required:["clef"]},schmaBdTableauxDeBd={type:"object",additionalProperties:schmaInfoTableau,required:[]},schmaBdPrincipale$4={type:"string"},schmaStructureBdMotsClefs={type:"string"},schmaStructureBdNues={type:"string"},MAX_TAILLE_IMAGE$2=500*1e3,MAX_TAILLE_IMAGE_VIS$2=1500*1e3;class BDs extends ComposanteClientListe{constructor({client:_}){super({client:_,clef:"bds",schmaBdPrincipale:schmaBdPrincipale$4});_t(this,"verrouBdUnique");this.verrouBdUnique=new s}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async suivreBds({f:_,idCompte:x}){return await this.suivreBdPrincipale({idCompte:x,f:_})}async crerBd({licence:_,licenceContenu:x,ajouter:S=!0}){const E=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:{address:void 0,write:this.client.bdCompte.address}}),{bd:C,fOublier:T}=await this.client.orbite.ouvrirBdType({id:E,type:"keyvalue",schma:schmaStructureBdBd});await C.set("type","bd"),await C.set("licence",_),x&&await C.set("licenceContenu",x);const A={address:C.access.address},I=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:A});await C.set("mtadonnes",I);const N=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:A});await C.set("noms",N);const V=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:A});await C.set("descriptions",V);const D=await this.client.crerBdIndpendante({type:"ordered-keyvalue",optionsAccs:A});await C.set("tableaux",D);const O=await this.client.crerBdIndpendante({type:"set",optionsAccs:A});await C.set("motsClefs",O);const F=await this.client.crerBdIndpendante({type:"set",optionsAccs:A});if(await C.set("nues",F),await C.set("statut",{statut:TYPES_STATUT.ACTIVE}),S){const{bd:M,fOublier:L}=await this.client.orbite.ouvrirBdType({id:await this.obtIdBd(),type:"set",schma:schmaBdPrincipale$4});await M.add(E),L()}return await T(),E}async ajouterMesBds({idBd:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:await this.obtIdBd(),type:"set",schma:schmaBdPrincipale$4});await x.add(_),await S()}async enleverDeMesBds({idBd:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:await this.obtIdBd(),type:"set",schma:schmaBdPrincipale$4});await x.del(_),await S()}async copierBd({idBd:_,ajouterMesBds:x=!0,copierDonnes:S=!0}){const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdBd}),T=await E.get("licence"),B=await E.get("licenceContenu");if(!T)throw new Error(`Aucune licence trouve sur la BD source ${_}.`);const A=await this.crerBd({licence:T,licenceContenu:B,ajouter:x}),{bd:I,fOublier:N}=await this.client.orbite.ouvrirBdType({id:A,type:"keyvalue",schma:schmaStructureBdBd}),V=await E.get("mtadonnes");if(V){const{bd:Z,fOublier:ae}=await this.client.orbite.ouvrirBdType({id:V,type:"keyvalue",schma:schmaStructureBdMtadonnes}),ce=await Z.allAsJSON();await ae(),await this.sauvegarderMtadonnesBd({idBd:A,mtadonnes:ce})}const D=await E.get("noms");if(D){const{bd:Z,fOublier:ae}=await this.client.orbite.ouvrirBdType({id:D,type:"keyvalue",schma:schmaStructureBdNoms}),ce=await Z.allAsJSON();await ae(),await this.sauvegarderNomsBd({idBd:A,noms:ce})}const O=await E.get("descriptions");if(O){const{bd:Z,fOublier:ae}=await this.client.orbite.ouvrirBdType({id:O,type:"keyvalue",schma:schmaStructureBdNoms}),ce=await Z.allAsJSON();await ae(),await this.sauvegarderDescriptionsBd({idBd:A,descriptions:ce})}const F=await E.get("motsClefs");if(F){const{bd:Z,fOublier:ae}=await this.client.orbite.ouvrirBdType({id:F,type:"set",schma:schmaStructureBdMotsClefs}),ce=(await Z.all()).map(ve=>ve.value);await ae(),await this.ajouterMotsClefsBd({idBd:A,idsMotsClefs:ce})}const M=await E.get("nues");if(M){const{bd:Z,fOublier:ae}=await this.client.orbite.ouvrirBdType({id:M,type:"set",schma:schmaStructureBdNues}),ce=(await Z.all()).map(ve=>ve.value);await ae(),await this.rejoindreNues({idBd:A,idsNues:ce})}const L=await E.get("tableaux"),j=await I.get("tableaux");if(!j)throw new Error("Erreur d'initialisation.");const{bd:q,fOublier:H}=await this.client.orbite.ouvrirBdType({id:j,type:"ordered-keyvalue",schma:schmaBdTableauxDeBd});if(L){const{bd:Z,fOublier:ae}=await this.client.orbite.ouvrirBdType({id:L,type:"ordered-keyvalue",schma:schmaBdTableauxDeBd}),ce=await Z.all();await ae();for(const{key:ve,value:pe}of ce){const G=await this.client.tableaux.copierTableau({id:ve,idBd:A,copierDonnes:S});await q.set(G,pe)}}const X=await E.get("statut")||{statut:TYPES_STATUT.ACTIVE};await I.set("statut",X);const J=await E.get("image");return J&&await I.set("image",J),await I.set("copiDe",{id:_}),await Promise.all([C(),H(),N()]),A}async crerBdDeSchma({schma:_,ajouter:x=!0}){const{tableaux:S,motsClefs:E,nues:C,licence:T,licenceContenu:B,statut:A}=_,I=await this.crerBd({licence:T,licenceContenu:B,ajouter:!1});E&&await this.ajouterMotsClefsBd({idBd:I,idsMotsClefs:E}),C&&await this.rejoindreNues({idBd:I,idsNues:C}),A&&await this.changerStatutBd({idBd:I,statut:A});for(const N of S){const{cols:V,clef:D}=N,O=await this.ajouterTableauBd({idBd:I,clefTableau:D});for(const F of V){const{idColonne:M,idVariable:L,index:j,optionnel:q}=F;if(await this.client.tableaux.ajouterColonneTableau({idTableau:O,idVariable:L,idColonne:M}),j&&await this.client.tableaux.changerColIndex({idTableau:O,idColonne:M,val:!0}),!q){const H={typeRgle:"existe",dtails:{}};await this.client.tableaux.ajouterRgleTableau({idTableau:O,idColonne:M,rgle:H})}}}return x&&await this.ajouterMesBds({idBd:I}),I}async suivreParent({idBd:_,f:x}){return await this.client.suivreBd({id:_,f:async S=>{const E=await S.get("copiDe");await x(E)},type:"keyvalue",schma:schmaStructureBdBd})}async suivreNuesBd({idBd:_,f:x}){return await this.client.suivreBdListeDeClef({id:_,clef:"nues",schma:{type:"string"},f:x})}async rechercherBdsParMotsClefs({motsClefs:_,f:x,idCompte:S}){const E=async T=>await this.suivreBds({f:T,idCompte:S}),C=async(T,B)=>{const A=I=>{const N=_.every(V=>I.includes(V));B(N)};return await this.suivreMotsClefsBd({idBd:T,f:A})};return await this.client.suivreBdsSelonCondition({fListe:E,fCondition:C,f:x})}async rechercherBdsParNue({idNue:_,f:x,idCompte:S}){const E=async T=>await this.suivreBds({f:T,idCompte:S}),C=async(T,B)=>{const A=async I=>{B(!!I&&I.includes(_))};return await this.suivreNuesBd({idBd:T,f:A})};return await this.client.suivreBdsSelonCondition({fListe:E,fCondition:C,f:x})}async combinerBds({idBdBase:_,idBd2:x}){const S=async T=>await uneFois(async B=>await this.suivreTableauxBd({idBd:T,f:B})),E=await S(_),C=await S(x);for(const T of C){const{id:B,clef:A}=T;if(A){const I=E.find(N=>N.clef===A)?.id;I&&await this.client.tableaux.combinerDonnes({idTableauBase:I,idTableau2:B})}}}async suivreIdTableauParClef({idBd:_,clef:x,f:S}){const E=async C=>{const T=C.find(B=>B.clef===x);await S(T?.id)};return await this.suivreTableauxBd({idBd:_,f:E})}async suivreBdUnique({schma:_,idNueUnique:x,f:S}){const E="bdUnique: "+x,C=new Set,T=async A=>{let I;await this.verrouBdUnique.acquire(x);const N=await this.client.obtDeStockageLocal({clef:E});switch(A.length){case 0:{N?I=N:(I=await this.crerBdDeSchma({schma:_}),await this.client.sauvegarderAuStockageLocal({clef:E,val:I}));break}case 1:{I=A[0],await this.client.sauvegarderAuStockageLocal({clef:E,val:I}),N&&I!==N&&(await this.combinerBds({idBdBase:I,idBd2:N}),await this.effacerBd({idBd:N}));break}default:{N&&(A=[...new Set([...A,N])]),I=A.sort()[0],await this.client.sauvegarderAuStockageLocal({clef:E,val:I});for(const V of A.slice(1))C.has(V)||(C.add(V),await this.combinerBds({idBdBase:I,idBd2:V}),await this.effacerBd({idBd:V}));break}}this.verrouBdUnique.release(x),await S(I)};return await this.rechercherBdsParNue({idNue:x,f:T})}async suivreIdTableauParClefDeBdUnique({schmaBd:_,idNueUnique:x,clefTableau:S,f:E}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:B})=>await this.suivreBdUnique({schma:_,idNueUnique:x,f:B}),f:E,fSuivre:async({id:B,fSuivreBd:A})=>await this.suivreIdTableauParClef({idBd:B,clef:S,f:A})})}async suivreDonnesDeTableauUnique({schmaBd:_,idNueUnique:x,clefTableau:S,f:E}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:A})=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:_,idNueUnique:x,clefTableau:S,f:async I=>{I&&await A(I)}}),f:async A=>await E(A||[]),fSuivre:async({id:A,fSuivreBd:I})=>await this.client.tableaux.suivreDonnes({idTableau:A,f:I})})}async ajouterlmentTableauUnique({schmaBd:_,idNueUnique:x,clefTableau:S,vals:E}){const C=await uneFois(async T=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:_,idNueUnique:x,clefTableau:S,f:ignorerNonDfinis(T)}));return await this.client.tableaux.ajouterlment({idTableau:C,vals:E})}async modifierlmentDeTableauUnique({vals:_,schmaBd:x,idNueUnique:S,clefTableau:E,idlment:C}){const T=await uneFois(async B=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:x,idNueUnique:S,clefTableau:E,f:A=>{A&&B(A)}}),B=>!!B);return await this.client.tableaux.modifierlment({idTableau:T,vals:_,idlment:C})}async effacerlmentDeTableauUnique({schmaBd:_,idNueUnique:x,clefTableau:S,idlment:E}){const C=await uneFois(async T=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:_,idNueUnique:x,clefTableau:S,f:B=>{B&&T(B)}}),T=>!!T);return await this.client.tableaux.effacerlment({idTableau:C,idlment:E})}async suivreDonnesDeTableauParClef({idBd:_,clefTableau:x,f:S}){const E=await uneFois(async C=>await this.suivreIdTableauParClef({idBd:_,clef:x,f:ignorerNonDfinis(C)}),C=>!!C);return await this.client.tableaux.suivreDonnes({idTableau:E,f:S})}async ajouterlmentTableauParClef({idBd:_,clefTableau:x,vals:S}){const E=await uneFois(async C=>await this.suivreIdTableauParClef({idBd:_,clef:x,f:ignorerNonDfinis(C)}));return await this.client.tableaux.ajouterlment({idTableau:E,vals:S})}async modifierlmentDeTableauParClef({idBd:_,clefTableau:x,idlment:S,vals:E}){const C=await uneFois(async T=>await this.suivreIdTableauParClef({idBd:_,clef:x,f:ignorerNonDfinis(T)}));return await this.client.tableaux.modifierlment({idTableau:C,vals:E,idlment:S})}async effacerlmentDeTableauParClef({idBd:_,clefTableau:x,idlment:S}){const E=await uneFois(async C=>await this.suivreIdTableauParClef({idBd:_,clef:x,f:ignorerNonDfinis(C)}));this.client.tableaux.effacerlment({idTableau:E,idlment:S})}async sauvegarderMtadonnesBd({idBd:_,mtadonnes:x}){const S=await this.client.obtIdBd({nom:"mtadonnes",racine:_,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdMtadonnes});for(const T in x)await E.set(T,x[T]);await C()}async sauvegarderMtadonneBd({idBd:_,clef:x,mtadonne:S}){const E=await this.client.obtIdBd({nom:"mtadonnes",racine:_,type:"keyvalue"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:C,fOublier:T}=await this.client.orbite.ouvrirBdType({id:E,type:"keyvalue",schma:schmaStructureBdMtadonnes});await C.set(x,S),await T()}async effacerMtadonneBd({idBd:_,clef:x}){const S=await this.client.obtIdBd({nom:"mtadonnes",racine:_,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdMtadonnes});await E.del(x),await C()}async suivreMtadonnesBd({idBd:_,f:x}){return await this.client.suivreBdDicDeClef({id:_,clef:"mtadonnes",schma:schmaStructureBdMtadonnes,f:x})}async sauvegarderNomsBd({idBd:_,noms:x}){const S=await this.client.obtIdBd({nom:"noms",racine:_,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdNoms});for(const T in x)await E.set(T,x[T]);await C()}async sauvegarderNomBd({idBd:_,langue:x,nom:S}){const E=await this.client.obtIdBd({nom:"noms",racine:_,type:"keyvalue"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:C,fOublier:T}=await this.client.orbite.ouvrirBdType({id:E,type:"keyvalue",schma:schmaStructureBdNoms});await C.set(x,S),await T()}async effacerNomBd({idBd:_,langue:x}){const S=await this.client.obtIdBd({nom:"noms",racine:_,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdNoms});await E.del(x),await C()}async sauvegarderDescriptionsBd({idBd:_,descriptions:x}){const S=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdNoms});for(const T in x)await E.set(T,x[T]);await C()}async sauvegarderDescriptionBd({idBd:_,langue:x,description:S}){const E=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"keyvalue"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:C,fOublier:T}=await this.client.orbite.ouvrirBdType({id:E,type:"keyvalue",schma:schmaStructureBdNoms});await C.set(x,S),await T()}async effacerDescriptionBd({idBd:_,langue:x}){const S=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdNoms});await E.del(x),await C()}async changerLicenceBd({idBd:_,licence:x}){const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdBd});await S.set("licence",x),await E()}async changerLicenceContenuBd({idBd:_,licenceContenu:x}){const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdBd});x?await S.set("licenceContenu",x):await S.del("licenceContenu"),await E()}async ajouterMotsClefsBd({idBd:_,idsMotsClefs:x}){Array.isArray(x)||(x=[x]);const S=await this.client.obtIdBd({nom:"motsClefs",racine:_,type:"set"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"set",schma:schmaStructureBdMotsClefs});for(const T of x)(await E.all()).map(A=>A.value).includes(T)||await E.add(T);await C()}async effacerMotClefBd({idBd:_,idMotClef:x}){const S=await this.client.obtIdBd({nom:"motsClefs",racine:_,type:"set"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"set",schma:schmaStructureBdMotsClefs});await E.del(x),await C()}async rejoindreNues({idBd:_,idsNues:x}){Array.isArray(x)||(x=[x]);const S=await this.client.obtIdBd({nom:"nues",racine:_,type:"set"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"set",schma:schmaStructureBdNues});for(const T of x)(await E.all()).map(A=>A.value).includes(T)||await E.add(T);await C()}async quitterNue({idBd:_,idNue:x}){const S=await this.client.obtIdBd({nom:"nue",racine:_,type:"set"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"set",schma:schmaStructureBdNues});await E.del(x),await C()}async ajouterTableauBd({idBd:_,clefTableau:x}){const S=await this.client.obtIdBd({nom:"tableaux",racine:_,type:"ordered-keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"ordered-keyvalue",schma:schmaBdTableauxDeBd});x=x||v4$1();const T=await this.client.tableaux.crerTableau({idBd:_});return await E.set(T,{clef:x}),await C(),T}async effacerTableauBd({idBd:_,idTableau:x}){const S=await this.client.obtIdBd({nom:"tableaux",racine:_,type:"ordered-keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"ordered-keyvalue",schma:schmaBdTableauxDeBd});await E.del(x),await C(),await this.client.tableaux.effacerTableau({idTableau:x})}async spcifierClefTableau({idBd:_,idTableau:x,clef:S}){const E=await this.client.obtIdBd({nom:"tableaux",racine:_,type:"ordered-keyvalue"});if(!E)throw new Error("Id Bd Tableau non obtenable.");const{bd:C,fOublier:T}=await this.client.orbite.ouvrirBdType({id:E,type:"ordered-keyvalue",schma:schmaBdTableauxDeBd}),B=await C.get(x);B&&(B.value.clef=S,C.set(x,B.value)),await T()}async changerStatutBd({idBd:_,statut:x}){const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdBd});S.set("statut",x),await E()}async suivreStatutBd({idBd:_,f:x}){return await this.client.suivreBdDic({id:_,schma:schmaStructureBdBd,f:async S=>{if(S.statut)return await x(S.statut)}})}async marquerObsolte({idBd:_,idNouvelle:x}){const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdBd});S.set("statut",{statut:TYPES_STATUT.OBSOLTE,idNouvelle:x}),await E()}async marquerActive({idBd:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdBd});x.set("statut",{statut:TYPES_STATUT.ACTIVE}),await S()}async marquerBta({idBd:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdBd});x.set("statut",{statut:TYPES_STATUT.BTA}),await S()}async marquerInterne({idBd:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdBd});x.set("statut",{statut:TYPES_STATUT.INTERNE}),await S()}async suivreLicenceBd({idBd:_,f:x}){return await this.client.suivreBd({id:_,type:"keyvalue",schma:schmaStructureBdBd,f:async S=>{const E=await S.get("licence");E&&await x(E)}})}async suivreLicenceContenuBd({idBd:_,f:x}){return await this.client.suivreBd({id:_,type:"keyvalue",schma:schmaStructureBdBd,f:async S=>{const E=await S.get("licenceContenu");await x(E)}})}async inviterAuteur({idBd:_,idCompteAuteur:x,rle:S}){await this.client.donnerAccs({idBd:_,identit:x,rle:S})}async sauvegarderImage({idBd:_,image:x}){let S;if(x.content.size!==void 0){if(x.content.size>MAX_TAILLE_IMAGE$2)throw new Error("Taille maximale excde");S={path:x.path,content:await x.content.arrayBuffer()}}else S=x;const E=await this.client.ajouterSFIP({fichier:S}),{bd:C,fOublier:T}=await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdBd});await C.set("image",E),await T()}async effacerImage({idBd:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdBd});await x.del("image"),await S()}async suivreImage({idBd:_,f:x}){return await this.client.suivreBd({id:_,type:"keyvalue",schma:schmaStructureBdBd,f:async S=>{const E=await S.get("image");if(!E)await x(null);else{const C=await this.client.obtFichierSFIP({id:E,max:MAX_TAILLE_IMAGE_VIS$2});await x(C)}}})}async suivreNomsBd({idBd:_,f:x}){return await this.client.suivreBdDicDeClef({id:_,clef:"noms",schma:schmaStructureBdNoms,f:x})}async suivreDescriptionsBd({idBd:_,f:x}){return await this.client.suivreBdDicDeClef({id:_,clef:"descriptions",schma:schmaStructureBdNoms,f:x})}async suivreMotsClefsBd({idBd:_,f:x}){return await this.client.suivreBdListeDeClef({id:_,clef:"motsClefs",schma:{type:"string"},f:x})}async suivreTableauxBd({idBd:_,f:x}){const S=async E=>{const C=E.map(T=>({id:T.key,...T.value}));await x(C)};return await this.client.suivreBdDicOrdonneDeClef({id:_,clef:"tableaux",schma:schmaBdTableauxDeBd,f:S})}async suivreScoreAccsBd({idBd:_,f:x}){return x(Number.parseInt(_)),faisRien}async suivreScoreCouvertureBd({idBd:_,f:x}){const S=async T=>{const B=T.reduce((I,N)=>I+N.numrateur,0),A=T.reduce((I,N)=>I+N.dnominateur,0);await x(A===0?void 0:B/A)},E=async(T,B)=>{const A={},I=async()=>{const{cols:D,rgles:O}=A;if(D!==void 0&&O!==void 0){const F=D.filter(j=>j.catgorie&&["numrique","catgorique"].includes(j.catgorie.catgorie)),M=F.length,L=F.filter(j=>O.some(q=>q.rgle.rgle.typeRgle!=="catgorie"&&q.colonne===j.id)).length;await B({numrateur:L,dnominateur:M})}},N=await this.client.tableaux.suivreColonnesTableau({idTableau:T,f:async D=>{A.cols=D,await I()}}),V=await this.client.tableaux.suivreRgles({idTableau:T,f:async D=>{A.rgles=D,await I()}});return async()=>{await N(),await V()}},C=async T=>await this.suivreTableauxBd({idBd:_,f:B=>T(B.map(A=>A.id))});return await this.client.suivreBdsDeFonctionListe({fListe:C,f:S,fBranche:E})}async suivreScoreValideBd({idBd:_,f:x}){const S=async T=>{const B=T.reduce((I,N)=>I+N.numrateur,0),A=T.reduce((I,N)=>I+N.dnominateur,0);await x(A===0?void 0:B/A)},E=async(T,B)=>{const A={},I=()=>{const{donnes:O,erreurs:F,cols:M}=A;if(O!==void 0&&F!==void 0&&M!==void 0){const L=M.filter(J=>J.catgorie&&["numrique","catgorique"].includes(J.catgorie.catgorie)),j=[],q=F.map(J=>({id:J.id,idColonne:J.erreur.rgle.colonne})).filter(J=>j.find(ae=>ae.id===J.id&&ae.idColonne===J.idColonne)?!1:(j.push(J),!0)).length,H=O.map(J=>L.filter(Z=>J.donnes[Z.id]!==void 0).length).reduce((J,Z)=>J+Z,0),X=H-q;B({numrateur:X,dnominateur:H})}},N=await this.client.tableaux.suivreDonnes({idTableau:T,f:O=>{A.donnes=O,I()}}),V=await this.client.tableaux.suivreValidDonnes({idTableau:T,f:O=>{A.erreurs=O,I()}}),D=await this.client.tableaux.suivreColonnesTableau({idTableau:T,f:O=>{A.cols=O,I()}});return async()=>{await N(),await V(),await D()}},C=async T=>await this.suivreTableauxBd({idBd:_,f:B=>T(B.map(A=>A.id))});return await this.client.suivreBdsDeFonctionListe({fListe:C,f:S,fBranche:E})}async suivreQualitBd({idBd:_,f:x}){const S={},E=async()=>{const{accs:I,couverture:N,valide:V,licence:D}=S,O={total:D?((I||0)+(N||0)+(V||0))/3:0,accs:I,couverture:N,valide:V,licence:D};await x(O)},C=await this.suivreScoreAccsBd({idBd:_,f:I=>{S.accs=I,E()}}),T=await this.suivreScoreCouvertureBd({idBd:_,f:I=>{S.couverture=I,E()}}),B=await this.suivreScoreValideBd({idBd:_,f:I=>{S.valide=I,E()}}),A=await this.suivreLicenceBd({idBd:_,f:I=>S.licence=I?1:0});return async()=>{await Promise.all([C,T,B,A])}}async suivreVariablesBd({idBd:_,f:x}){const S=async T=>await x(T||[]),E=async(T,B)=>await this.client.tableaux.suivreVariables({idTableau:T,f:B}),C=async T=>await this.suivreTableauxBd({idBd:_,f:B=>T(B.map(A=>A.id))});return await this.client.suivreBdsDeFonctionListe({fListe:C,f:S,fBranche:E})}async exporterDonnes({idBd:_,langues:x,nomFichier:S}){const E=utils$2.book_new(),C=new Set,T=await uneFois(B=>this.suivreTableauxBd({idBd:_,f:B}));for(const B of T){const{id:A}=B,{fichiersSFIP:I}=await this.client.tableaux.exporterDonnes({idTableau:A,langues:x,doc:E});I.forEach(N=>C.add(N))}if(!S){const B=await uneFois(I=>this.suivreNomsBd({idBd:_,f:I})),A=_.split("/").pop();S=x&&traduire(B,x)||A}return{doc:E,fichiersSFIP:C,nomFichier:S}}async exporterDocumentDonnes({donnes:_,formatDoc:x,dossier:S="",inclureFichiersSFIP:E=!0}){const{doc:C,fichiersSFIP:T,nomFichier:B}=_,I={xls:"biff8"}[x]||x;if(!(isBrowser$1||isWebWorker)){const N=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal),void 0);N.existsSync(S)||N.mkdirSync(S,{recursive:!0})}if(E){const N={octets:writeSync(C,{bookType:I,type:"buffer"}),nom:`${B}.${x}`},V=await Promise.all([...T].map(async D=>({nom:D.replace("/","-"),octets:await toBuffer(this.client.obtItrableAsyncSFIP({id:D}))})));return await zipper([N],V,path.join(S,B)),path.join(S,`${B}.zip`)}else return writeFileSync(C,path.join(S,`${B}.${x}`),{bookType:I}),path.join(S,`${B}.${x}`)}async effacerBd({idBd:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:await this.obtIdBd(),type:"set",schma:schmaBdPrincipale$4});await x.del(_),await S();for(const C in["noms","descriptions","motsClefs"]){const T=await this.client.obtIdBd({nom:C,racine:_});T&&await this.client.effacerBd({id:T})}const E=await this.client.obtIdBd({nom:"tableaux",racine:_,type:"ordered-keyvalue"});if(E){const{bd:C,fOublier:T}=await this.client.orbite.ouvrirBdType({id:E,type:"ordered-keyvalue",schma:schmaBdTableauxDeBd}),B=Object.keys(C.all);for(const A of B)await this.client.tableaux.effacerTableau({idTableau:A});T(),await this.client.effacerBd({id:E})}await this.enleverDeMesBds({idBd:_}),await this.client.effacerBd({id:_})}}__decorate([cacheSuivi],BDs.prototype,"suivreBds",null);__decorate([cacheSuivi],BDs.prototype,"suivreParent",null);__decorate([cacheSuivi],BDs.prototype,"suivreNuesBd",null);__decorate([cacheSuivi],BDs.prototype,"rechercherBdsParMotsClefs",null);__decorate([cacheSuivi],BDs.prototype,"rechercherBdsParNue",null);__decorate([cacheSuivi],BDs.prototype,"suivreIdTableauParClef",null);__decorate([cacheSuivi],BDs.prototype,"suivreBdUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreIdTableauParClefDeBdUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreDonnesDeTableauUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreDonnesDeTableauParClef",null);__decorate([cacheSuivi],BDs.prototype,"suivreMtadonnesBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreLicenceBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreLicenceContenuBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreImage",null);__decorate([cacheSuivi],BDs.prototype,"suivreNomsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreDescriptionsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreMotsClefsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreTableauxBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreAccsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreCouvertureBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreValideBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreQualitBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreVariablesBd",null);var geojsonValidation={};(function(r){const n={};function _(I){return typeof I=="function"}function x(I){return I===Object(I)}function S(I,N){let V=!1;return typeof N=="string"?N=[N]:Object.prototype.toString.call(N)==="[object Array]"?N.length===0&&(V=!0):V=!0,I?N:V}function E(I,N){let V;if(_(n[I])){try{V=n[I](N)}catch(D){V=["Problem with custom definition for "+I+": "+D]}if(typeof result=="string"&&(V=[V]),Object.prototype.toString.call(V)==="[object Array]")return V}return[]}r.define=(I,N)=>I in A&&_(N)?(n[I]=N,!0):!1,r.isPosition=(I,N=!1)=>{let V=[];return Array.isArray(I)?(I.length<=1&&V.push("Position must be at least two elements"),I.forEach((D,O)=>{typeof D!="number"&&V.push("Position must only contain numbers. Item "+D+" at index "+O+" is invalid.")})):V.push("Position must be an array"),V=V.concat(E("Position",I)),S(N,V)},r.isGeoJSONObject=r.valid=(I,N=!1)=>{if(x(I)){let V=[];if("type"in I){if(T[I.type])return T[I.type](I,N);if(B[I.type])return B[I.type](I,N);V.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon", "GeometryCollection", "Feature", or "FeatureCollection"')}else V.push('must have a member with the name "type"');return V=V.concat(E("GeoJSONObject",I)),S(N,V)}else return S(N,["must be a JSON Object"])},r.isGeometryObject=(I,N=!1)=>{if(!x(I))return S(N,["must be a JSON Object"]);let V=[];if("type"in I){if(B[I.type])return B[I.type](I,N);V.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon" or "GeometryCollection"')}else V.push('must have a member with the name "type"');return V=V.concat(E("GeometryObject",I)),S(N,V)},r.isPoint=(I,N=!1)=>{if(!x(I))return S(N,["must be a JSON Object"]);let V=[];if("bbox"in I){const D=r.isBbox(I.bbox,!0);D.length&&(V=V.concat(D))}if("type"in I?I.type!=="Point"&&V.push('type must be "Point"'):V.push('must have a member with the name "type"'),"coordinates"in I){const D=r.isPosition(I.coordinates,!0);D.length&&(V=V.concat(D))}else V.push('must have a member with the name "coordinates"');return V=V.concat(E("Point",I)),S(N,V)},r.isMultiPointCoor=(I,N=!1)=>{let V=[];return Array.isArray(I)?I.forEach((D,O)=>{const F=r.isPosition(D,!0);F.length&&(F[0]="at "+O+": ".concat(F[0]),V=V.concat(F))}):V.push("coordinates must be an array"),S(N,V)},r.isMultiPoint=(I,N=!1)=>{if(!x(I))return S(N,["must be a JSON Object"]);let V=[];if("bbox"in I){const D=r.isBbox(I.bbox,!0);D.length&&(V=V.concat(D))}if("type"in I?I.type!=="MultiPoint"&&V.push('type must be "MultiPoint"'):V.push('must have a member with the name "type"'),"coordinates"in I){const D=r.isMultiPointCoor(I.coordinates,!0);D.length&&(V=V.concat(D))}else V.push('must have a member with the name "coordinates"');return V=V.concat(E("MultiPoint",I)),S(N,V)},r.isLineStringCoor=(I,N=!1)=>{let V=[];return Array.isArray(I)?I.length>1?I.forEach((D,O)=>{const F=r.isPosition(D,!0);F.length&&(F[0]="at "+O+": ".concat(F[0]),V=V.concat(F))}):V.push("coordinates must have at least two elements"):V.push("coordinates must be an array"),S(N,V)},r.isLineString=(I,N=!1)=>{if(!x(I))return S(N,["must be a JSON Object"]);let V=[];if("bbox"in I){const D=r.isBbox(I.bbox,!0);D.length&&(V=V.concat(D))}if("type"in I?I.type!=="LineString"&&V.push('type must be "LineString"'):V.push('must have a member with the name "type"'),"coordinates"in I){const D=r.isLineStringCoor(I.coordinates,!0);D.length&&(V=V.concat(D))}else V.push('must have a member with the name "coordinates"');return V=V.concat(E("LineString",I)),S(N,V)},r.isMultiLineStringCoor=(I,N=!1)=>{let V=[];return Array.isArray(I)?I.forEach((D,O)=>{const F=r.isLineStringCoor(D,!0);F.length&&(F[0]="at "+O+": ".concat(F[0]),V=V.concat(F))}):V.push("coordinates must be an array"),S(N,V)},r.isMultiLineString=(I,N=!1)=>{if(!x(I))return S(N,["must be a JSON Object"]);let V=[];if("bbox"in I){const D=r.isBbox(I.bbox,!0);D.length&&(V=V.concat(D))}if("type"in I?I.type!=="MultiLineString"&&V.push('type must be "MultiLineString"'):V.push('must have a member with the name "type"'),"coordinates"in I){const D=r.isMultiLineStringCoor(I.coordinates,!0);D.length&&(V=V.concat(D))}else V.push('must have a member with the name "coordinates"');return V=V.concat(E("MultiPoint",I)),S(N,V)};function C(I,N){let V=[];return Array.isArray(I)?(I.forEach((D,O)=>{const F=r.isPosition(D,!0);F.length&&(F[0]="at "+O+": ".concat(F[0]),V=V.concat(F))}),I[0].toString()!==I[I.length-1].toString()&&V.push("The first and last positions must be equivalent"),I.length<4&&V.push("coordinates must have at least four positions")):V.push("coordinates must be an array"),S(N,V)}r.isPolygonCoor=(I,N=!1)=>{let V=[];return Array.isArray(I)?I.forEach((D,O)=>{const F=C(D,!0);F.length&&(F[0]="at "+O+": ".concat(F[0]),V=V.concat(F))}):V.push("coordinates must be an array"),S(N,V)},r.isPolygon=(I,N=!1)=>{if(!x(I))return S(N,["must be a JSON Object"]);let V=[];if("bbox"in I){const D=r.isBbox(I.bbox,!0);D.length&&(V=V.concat(D))}if("type"in I?I.type!=="Polygon"&&V.push('type must be "Polygon"'):V.push('must have a member with the name "type"'),"coordinates"in I){const D=r.isPolygonCoor(I.coordinates,!0);D.length&&(V=V.concat(D))}else V.push('must have a member with the name "coordinates"');return V=V.concat(E("Polygon",I)),S(N,V)},r.isMultiPolygonCoor=(I,N=!1)=>{let V=[];return Array.isArray(I)?I.forEach((D,O)=>{const F=r.isPolygonCoor(D,!0);F.length&&(F[0]="at "+O+": ".concat(F[0]),V=V.concat(F))}):V.push("coordinates must be an array"),S(N,V)},r.isMultiPolygon=(I,N=!1)=>{if(!x(I))return S(N,["must be a JSON Object"]);let V=[];if("bbox"in I){const D=r.isBbox(I.bbox,!0);D.length&&(V=V.concat(D))}if("type"in I?I.type!=="MultiPolygon"&&V.push('type must be "MultiPolygon"'):V.push('must have a member with the name "type"'),"coordinates"in I){const D=r.isMultiPolygonCoor(I.coordinates,!0);D.length&&(V=V.concat(D))}else V.push('must have a member with the name "coordinates"');return V=V.concat(E("MultiPolygon",I)),S(N,V)},r.isGeometryCollection=(I,N=!1)=>{if(!x(I))return S(N,["must be a JSON Object"]);let V=[];if("bbox"in I){const D=r.isBbox(I.bbox,!0);D.length&&(V=V.concat(D))}return"type"in I?I.type!=="GeometryCollection"&&V.push('type must be "GeometryCollection"'):V.push('must have a member with the name "type"'),"geometries"in I?Array.isArray(I.geometries)?I.geometries.forEach((D,O)=>{const F=r.isGeometryObject(D,!0);F.length&&(F[0]="at "+O+": ".concat(F[0]),V=V.concat(F))}):V.push('"geometries" must be an array'):V.push('must have a member with the name "geometries"'),V=V.concat(E("GeometryCollection",I)),S(N,V)},r.isFeature=(I,N=!1)=>{if(!x(I))return S(N,["must be a JSON Object"]);let V=[];if("bbox"in I){const D=r.isBbox(I.bbox,!0);D.length&&(V=V.concat(D))}if("type"in I?I.type!=="Feature"&&V.push('type must be "Feature"'):V.push('must have a member with the name "type"'),"properties"in I||V.push('must have a member with the name "properties"'),"geometry"in I){if(I.geometry!==null){const D=r.isGeometryObject(I.geometry,!0);D.length&&(V=V.concat(D))}}else V.push('must have a member with the name "geometry"');return V=V.concat(E("Feature",I)),S(N,V)},r.isFeatureCollection=(I,N=!1)=>{if(!x(I))return S(N,["must be a JSON Object"]);let V=[];if("bbox"in I){const D=r.isBbox(I.bbox,!0);D.length&&(V=D)}return"type"in I?I.type!=="FeatureCollection"&&V.push('type must be "FeatureCollection"'):V.push('must have a member with the name "type"'),"features"in I?Array.isArray(I.features)?I.features.forEach((D,O)=>{const F=r.isFeature(D,!0);F.length&&(F[0]="at "+O+": ".concat(F[0]),V=V.concat(F))}):V.push('"Features" must be an array'):V.push('must have a member with the name "Features"'),V=V.concat(E("FeatureCollection",I)),S(N,V)},r.isBbox=(I,N=!1)=>{let V=[];return Array.isArray(I)?I.length%2!==0&&V.push("bbox, must be a 2*n array"):V.push("bbox must be an array"),V=V.concat(E("Bbox",I)),S(N,V)};const T={Feature:r.isFeature,FeatureCollection:r.isFeatureCollection},B={Point:r.isPoint,MultiPoint:r.isMultiPoint,LineString:r.isLineString,MultiLineString:r.isMultiLineString,Polygon:r.isPolygon,MultiPolygon:r.isMultiPolygon,GeometryCollection:r.isGeometryCollection},A={Feature:r.isFeature,FeatureCollection:r.isFeatureCollection,Point:r.isPoint,MultiPoint:r.isMultiPoint,LineString:r.isLineString,MultiLineString:r.isMultiLineString,Polygon:r.isPolygon,MultiPolygon:r.isMultiPolygon,GeometryCollection:r.isGeometryCollection,Bbox:r.isBbox,Position:r.isPosition,GeoJSON:r.isGeoJSONObject,GeometryObject:r.isGeometryObject};r.allTypes=A})(geojsonValidation);const gjv=getDefaultExportFromCjs(geojsonValidation),estSpcificationHoroDatage=r=>!!r&&typeof r.systme=="string"&&typeof r.val=="string";class Cholqij{lireDate(n){const{systme:_,val:x}=n;switch(_){case"dateJS":case"grgorien":{const S=new Date(x);if(isNaN(S.valueOf()))throw new Error(x);return S}default:throw new Error(_)}}dateValide(n){if(!estSpcificationHoroDatage(n))return!1;try{return this.lireDate(n),!0}catch{return!1}}}const cholqij=new Cholqij;function gnrerFonctionRgle({rgle:r,varsColonnes:n,donnesCatgorie:_}){const x=r.rgle,{colonne:S}=r,{typeRgle:E}=x.rgle;switch(E){case"existe":return C=>C.filter(B=>B.donnes[S]===void 0).map(B=>{const{id:A}=B;return{id:A,erreur:{rgle:r}}});case"catgorie":return C=>{const T=x.rgle.dtails.catgorie;return C.filter(A=>!validerCatgorieVal({val:A.donnes[S],catgorie:T})).map(A=>{const{id:I}=A;return{id:I,erreur:{rgle:r}}})};case"bornes":{const C=x;let T,B;const{val:A,op:I,type:N}=C.rgle.dtails,V=(D,O)=>D===void 0||O===void 0;switch(I){case">":B=(D,O)=>V(D,O)||D>O;break;case"<":B=(D,O)=>V(D,O)||D<O;break;case"":case">=":B=(D,O)=>V(D,O)||D>=O;break;case"":case"<=":B=(D,O)=>V(D,O)||D<=O;break}return N==="fixe"?T=D=>{const O=D.donnes[S];return Array.isArray(O)?O.every(F=>B(F,A)):B(O,A)}:T=D=>{const O=D.donnes[S],F=N==="dynamiqueVariable"?D.donnes[n[A]]:D.donnes[A];return Array.isArray(O)?O.every(M=>B(M,F)):B(O,F)},D=>D.filter(F=>!validerBorneVal({val:F,fComp:T})).map(F=>{const{id:M}=F;return{id:M,erreur:{rgle:r}}})}case"valeurCatgorique":{const C=x.rgle,T=C.dtails.type==="fixe"?C.dtails.options:_;if(!T)throw new Error("Options non spcifies");return B=>B.filter(I=>I.donnes[S]!==void 0&&!T.includes(I.donnes[S])).map(I=>{const{id:N}=I;return{id:N,colonne:S,erreur:{rgle:r}}})}default:throw Error(`Catgorie ${E} inconnue.`)}}const formatsFichiers={images:["webp","svg","png","jpg","jpeg","jfif","pjpeg","pjp","gif","avif","apng"],vido:["mp4"],audio:["mp3","ogg","m4a"]};function validFichier(r,n){if(typeof r!="string")return!1;let _,x;try{[_,x]=r.split("/")}catch{return!1}if(!x||!cidValide(_))return!1;if(n){const S=x.split(".")[1];return n.includes(S)}return!0}function validerCatgorieVal({val:r,catgorie:n}){return r===void 0?!0:n.type==="simple"?validerCatgorieBase({catgorie:n.catgorie,val:r}):Array.isArray(r)?r.every(_=>validerCatgorieBase({catgorie:n.catgorie,val:_})):!1}const validerBorneVal=({val:r,fComp:n})=>Array.isArray(r)?r.every(_=>n(_)):n(r),estUnHoroDatage=r=>{if(["number","string"].includes(typeof r)){const n=new Date(r);return!isNaN(n.valueOf())}else return cholqij.dateValide(r)},validerCatgorieBase=({catgorie:r,val:n})=>{switch(r){case"numrique":return typeof n=="number";case"horoDatage":return estUnHoroDatage(n);case"intervaleTemps":return!Array.isArray(n)||n.length!==2?!1:n.every(_=>estUnHoroDatage(_));case"chane":return isValidAddress(n);case"chaneNonTraductible":return typeof n=="string";case"boolen":return typeof n=="boolean";case"gojson":return typeof n!="object"?!1:gjv.valid(n);case"vido":return validFichier(n,formatsFichiers.vido);case"audio":return validFichier(n,formatsFichiers.audio);case"image":return validFichier(n,formatsFichiers.images);case"fichier":return validFichier(n);default:return!1}},schmaBdInfoColAvecCatgorie={type:"object",additionalProperties:{type:"object",properties:{catgorie:{type:"object",nullable:!0,properties:{catgorie:{type:"string"},type:{type:"string"}},required:["catgorie","type"]},id:{type:"string"},variable:{type:"string"},index:{type:"boolean",nullable:!0}},required:["id","variable"]},required:[]},schmaBdDonnesTableau={type:"object",additionalProperties:{type:"object",additionalProperties:!0,required:[]},required:[]},schmaBdRgles={type:"object",additionalProperties:{type:"object",properties:{colonne:{type:"string"},source:{type:"object",properties:{id:{type:"string"},type:{type:"string"}},required:["id","type"]},rgle:{type:"object",properties:{id:{type:"string"},rgle:{type:"object",properties:{dtails:{type:"object",required:[]},typeRgle:{type:"string"}},required:["dtails","typeRgle"]}},required:["id","rgle"]}},required:["colonne","rgle","source"]},required:[]};function lmentsgaux(r,n){const _=Object.keys(r).filter(S=>S!=="id"),x=Object.keys(n).filter(S=>S!=="id");return!(!_.every(S=>r[S]===n[S])||!x.every(S=>r[S]===n[S]))}function indexlmentsgaux(r,n,_){return!!_.every(x=>r[x]===n[x])}const schmaStructureBdTableau={type:"object",properties:{type:{type:"string"},noms:{type:"string"},donnes:{type:"string"},colonnes:{type:"string"},rgles:{type:"string"}},required:["donnes","colonnes","noms","rgles","type"]};class Tableaux{constructor({client:n}){_t(this,"client");this.client=n}async crerTableau({idBd:n}){const _=await this.client.obtOpsAccs({idBd:n}),x=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:_}),{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdTableau});await S.set("type","tableau");const C=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:_});await S.set("noms",C);const T=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:_});await S.set("donnes",T);const B=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:_});await S.set("colonnes",B);const A=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:_});return await S.set("rgles",A),await E(),x}async copierTableau({id:n,idBd:_,copierDonnes:x=!0}){const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdTableau}),C=await this.crerTableau({idBd:_}),{bd:T,fOublier:B}=await this.client.orbite.ouvrirBdType({id:C,type:"keyvalue",schma:schmaStructureBdTableau}),A=await S.get("noms");if(A){const{bd:I,fOublier:N}=await this.client.orbite.ouvrirBdType({id:A,type:"keyvalue",schma:schmaStructureBdNoms}),V=await I.allAsJSON();await N(),await this.sauvegarderNomsTableau({idTableau:C,noms:V})}return await this.client.copierContenuBdDic({bdBase:S,nouvelleBd:T,clef:"colonnes",schma:schmaBdInfoColAvecCatgorie}),await this.client.copierContenuBdDic({bdBase:S,nouvelleBd:T,clef:"rgles",schma:schmaBdRgles}),x&&await this.client.copierContenuBdDic({bdBase:S,nouvelleBd:T,clef:"donnes",schma:schmaBdDonnesTableau}),await Promise.all([E(),B()]),C}async suivreDiffrencesAvecTableau({idTableau:n,idTableauRf:_,f:x}){const S={},E=async()=>{if(!S.colonnesTableau||!S.colonnesTableauRf)return;const B=[];for(const A of S.colonnesTableauRf){const I=S.colonnesTableau.find(N=>N.id===A.id);if(I){if(I.variable!==A.variable){const N={type:"variableColonne",svre:!0,idCol:I.id,varColTableau:I.variable,varColTableauLie:A.variable};B.push(N)}if(I.index!==A.index){const N={type:"indexColonne",svre:!0,idCol:I.id,colTableauIndexe:!!I.index};B.push(N)}}else{const N={type:"colonneManquante",svre:!0,idManquante:A.id};B.push(N)}}for(const A of S.colonnesTableau)if(!S.colonnesTableauRf.find(N=>N.id===A.id)){const N={type:"colonneSupplmentaire",svre:!1,idExtra:A.id};B.push(N)}await x(B)},C=await this.suivreColonnesTableau({idTableau:n,f:async B=>{S.colonnesTableau=B,await E()},catgories:!1}),T=await this.suivreColonnesTableau({idTableau:_,f:async B=>{S.colonnesTableauRf=B,await E()},catgories:!1});return async()=>{await Promise.all([C,T])}}async changerColIndex({idTableau:n,idColonne:_,val:x}){const S=await this.client.obtIdBd({nom:"colonnes",racine:n,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaBdInfoColAvecCatgorie}),B=(await E.all()).find(A=>A.value.id===_);if(B&&!!B.value.index!==x){const{value:A}=B,I=Object.assign(A,{index:x});await E.put(_,I)}await C()}async suivreIndex({idTableau:n,f:_}){const x=async S=>{const E=S.filter(C=>C.index).map(C=>C.id);await _(E)};return await this.suivreColonnesTableau({idTableau:n,f:x})}async suivreDonnes({idTableau:n,f:_,clefsSelonVariables:x=!1}){const S={},E=async()=>{const{donnes:I,colonnes:N}=S;if(I&&N){const V=Object.entries(I).map(([D,O])=>({donnes:x?Object.keys(O).reduce((M,L)=>{const j=L==="id"?"id":N[L];return M[j]=O[L],M},{}):O,id:D}));await _(V)}},C=async I=>{S.colonnes=Object.fromEntries(I.map(N=>[N.id,N.variable])),await E()},T=await this.suivreColonnesTableau({idTableau:n,f:C,catgories:!1}),B=async I=>{S.donnes=I,await E()},A=await this.client.suivreBdDicDeClef({id:n,clef:"donnes",f:B,schma:schmaBdDonnesTableau});return async()=>{await A(),await T()}}async formaterlment({:n,colonnes:_,fichiersSFIP:x,langues:S}){const E=async({adresseBdTrads:B,langues:A})=>{const I=await uneFois(N=>this.client.suivreBdDic({id:B,f:N}));return traduire(I,A||[])||B},C={},T=async(B,A)=>{switch(typeof B){case"object":return JSON.stringify(B);case"boolean":return B.toString();case"number":return B;case"string":return["audio","image","vido","fichier"].includes(A)?(x.add(B),B):A==="chane"&&isValidAddress(B)?await E({adresseBdTrads:B,langues:S}):B;default:return}};for(const B of Object.keys(n)){const A=_.find(O=>O.id===B);if(!A)continue;const{variable:I,catgorie:N}=A;let V;const D=n[B];N?.type==="simple"?V=await T(D,N.catgorie):N?.type==="liste"&&Array.isArray(D)&&(V=JSON.stringify(await Promise.all(D.map(O=>T(O,N.catgorie))))),V!==void 0&&(C[S?I:B]=V)}return C}async exporterDonnes({idTableau:n,langues:_,doc:x,nomFichier:S}){x=x||utils$2.book_new();const E=new Set;let C;const T=n.split("/").pop();if(_){const V=await uneFois(D=>this.suivreNomsTableau({idTableau:n,f:D}));C=traduire(V,_)||T}else C=T;const B=await uneFois(V=>this.suivreDonnes({idTableau:n,f:V})),A=await uneFois(V=>this.suivreColonnesTableau({idTableau:n,f:V}),V=>!!V&&V.length>=[...new Set(B.map(D=>Object.keys(D.donnes).filter(O=>O!=="id")).flat())].length);let I=await Promise.all(B.map(V=>this.formaterlment({:V.donnes,fichiersSFIP:E,colonnes:A,langues:_})));if(_){const V=await uneFois(O=>this.suivreVariables({idTableau:n,f:O})),D={};for(const O of V){const F=await uneFois(L=>this.client.variables.suivreNomsVariable({idVariable:O,f:L})),M=A.find(L=>L.variable===O)?.id;if(!M)throw new Error(`Colonnne pour variable ${O} non trouve parmis les colonnnes :
${JSON.stringify(A,void 0,2)}.`);D[O]=traduire(F,_)||M}I=I.map(O=>Object.keys(O).reduce((F,M)=>{const L=D[M];return F[L]=O[M],F},{}))}const N=utils$2.json_to_sheet(I);return utils$2.book_append_sheet(x,N,C.slice(0,30)),S=S||C,{doc:x,fichiersSFIP:E,nomFichier:S}}async ajouterlment({idTableau:n,vals:_}){Array.isArray(_)||(_=[_]);const x=await this.client.obtIdBd({nom:"donnes",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaBdDonnesTableau}),C=[];for(const T of _){const B=v4$1();await S.put(B,T),C.push(B)}return await E(),C}async modifierlment({idTableau:n,vals:_,idlment:x}){const S=await this.client.obtIdBd({nom:"donnes",racine:n,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaBdDonnesTableau}),T=await E.get(x);if(!T)throw new Error(`Id lment ${x} n'existe pas.`);const B=Object.assign({},T,_);Object.keys(_).map(A=>{_[A]===void 0&&delete B[A]}),lmentsgaux(B,T)||await E.put(x,B),await C()}async vrifierClefslment({idTableau:n,lment:_}){const x=await this.client.obtIdBd({nom:"colonnes",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaBdInfoColAvecCatgorie}),T=[...(await S.all()).map(A=>A.value.id),"id"],B=Object.keys(_).filter(A=>T.includes(A));return await E(),Object.fromEntries(B.map(A=>[A,_[A]]))}async effacerlment({idTableau:n,idlment:_}){const x=await this.client.obtIdBd({nom:"donnes",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaBdDonnesTableau});await S.del(_),await E()}async combinerDonnes({idTableauBase:n,idTableau2:_}){const x=await uneFois(async T=>await this.suivreDonnes({idTableau:n,f:T})),S=await uneFois(async T=>await this.suivreColonnesTableau({idTableau:n,f:T,catgories:!1}),T=>T!==void 0&&[...new Set(x.map(B=>Object.keys(B.donnes).filter(A=>A!=="id")).flat())].length<=T.length),E=await uneFois(async T=>await this.suivreDonnes({idTableau:_,f:T})),C=S.filter(T=>T.index).map(T=>T.id);for(const T of E){const B=x.find(A=>indexlmentsgaux(A.donnes,T.donnes,C));if(B){const A={};for(const I of S)B.donnes[I.id]===void 0&&T.donnes[I.id]!==void 0&&(A[I.id]=T.donnes[I.id]);Object.keys(A).length&&(await this.effacerlment({idTableau:n,idlment:B.id}),await this.ajouterlment({idTableau:n,vals:Object.assign({},B.donnes,A)}))}else await this.ajouterlment({idTableau:n,vals:T.donnes})}}async convertirDonnes({idTableau:n,donnes:_,conversions:x={},importerFichiers:S,cheminBaseFichiers:E,donnesExistantes:C}){const T=await uneFois(async F=>await this.suivreColonnesTableau({idTableau:n,f:F})),B=new Set(C?.map(F=>T.filter(M=>M.catgorie?.catgorie==="chane").map(M=>M.catgorie?.type==="simple"?[F[M.id]]:F[M.id]).flat().filter(M=>typeof M=="string")).flat()||[]),A={},I=async({chemin:F})=>{if(isNode||isElectronMain){const M=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal),void 0),L=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0),j=E?L.resolve(E,F):F;if(!M.existsSync(j))return;if(A[j])return A[j];const q=M.readFileSync(j),H=await this.client.ajouterSFIP({fichier:{path:L.basename(j),content:q}});return A[F]=H,H}},N={},V=async({val:F,langue:M})=>{if(N[M]?.[F])return N[M][F];for(const L of B){const{bd:j,fOublier:q}=await this.client.orbite.ouvrirBdType({id:L,type:"keyvalue",schma:schmaStructureBdNoms}),H=await j.get(M);if(await q(),H===F)return N[M]||(N[M]={}),N[M][F]=L,L}},D=async({val:F,langue:M})=>{const{bd:L,fOublier:j}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdNoms}),H={address:L.access.address};await j();const X=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:H}),{bd:J,fOublier:Z}=await this.client.orbite.ouvrirBdType({id:X,type:"keyvalue",schma:schmaStructureBdNoms});return await J.set(M,F),await Z(),B.add(X),X},O=async({val:F,catgorie:M,conversion:L})=>{switch(M){case"audio":case"image":case"vido":case"fichier":return typeof F=="string"&&S?cidEtFichierValide(F)?F:await I({chemin:F})||F:F;case"boolen":return typeof F=="string"?F.toLowerCase()==="true":F;case"numrique":{let j,q;L?.type==="numrique"&&({opration:j,systmeNumration:q}=L);const H=({val:J,ops:Z})=>{if(!Z)return J;let ae=J;for(const ce of Z)switch(ce.op){case"+":ae=J+ce.val;break;case"-":ae=J-ce.val;break;case"*":ae=J*ce.val;break;case"/":ae=J/ce.val;break;case"^":ae=J**ce.val;break;default:throw new Error(ce.op)}return ae};let X;if(typeof F=="string")try{X=this.client.ennikkai.({:F,:q})}catch{}else typeof F=="number"&&(X=F);return X!==void 0?H({val:X,ops:Array.isArray(j)||typeof j>"u"?j:[j]}):F}case"horoDatage":if(L?.type==="horoDatage"&&typeof F=="string"){const{systme:j,format:q}=L;return{systme:"dateJS",val:cholqij.lireDate({systme:j,val:F,format:q}).valueOf()}}else{if(["number","string"].includes(typeof F)){const j=new Date(F);return isNaN(j.valueOf())?F:{systme:"dateJS",val:j.valueOf()}}return F}case"intervaleTemps":{const j=typeof F=="string"?JSON.parse(F):F;return Array.isArray(j)?await Promise.all(j.map(async q=>await O({val:q,catgorie:"horoDatage",conversion:L}))):j}case"chaneNonTraductible":return F;case"chane":{if(typeof F!="string"||isValidAddress(F))return F;if(L?.type==="chane"){const{langue:j}=L;return await V({val:F,langue:j})||await D({val:F,langue:j})}return F}case"gojson":return typeof F=="string"?JSON.parse(F):F;default:return F}};for(const F of _)for(const M of T)if(M.catgorie){const{type:L,catgorie:j}=M.catgorie,q=F[M.id];if(q===void 0)continue;const H=x[M.id];if(L==="simple")F[M.id]=await O({val:q,catgorie:j,conversion:H});else{const X=typeof q=="string"?JSON.parse(q):q;F[M.id]=Array.isArray(X)?await Promise.all(X.map(async J=>await O({val:J,catgorie:j,conversion:H}))):[await O({val:X,catgorie:j,conversion:H})]}}return _}async importerDonnes({idTableau:n,donnes:_,conversions:x={},cheminBaseFichiers:S}){const E=await uneFois(async A=>await this.suivreDonnes({idTableau:n,f:A})),C=await this.convertirDonnes({idTableau:n,donnes:_,conversions:x,importerFichiers:!0,cheminBaseFichiers:S,donnesExistantes:E.map(A=>A.donnes)}),T=[];for(const A of C)E.some(I=>lmentsgaux(I.donnes,A))||T.push(A);const B=[];for(const A of E)C.some(I=>lmentsgaux(I,A.donnes))||B.push(A.id);for(const A of B)await this.effacerlment({idTableau:n,idlment:A});for(const A of T)await this.ajouterlment({idTableau:n,vals:A})}async sauvegarderNomsTableau({idTableau:n,noms:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});for(const C in _)await S.set(C,_[C]);await E()}async sauvegarderNomTableau({idTableau:n,langue:_,nom:x}){const S=await this.client.obtIdBd({nom:"noms",racine:n,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdNoms});await E.set(_,x),await C()}async effacerNomTableau({idTableau:n,langue:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});await S.del(_),await E()}async suivreNomsTableau({idTableau:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"noms",schma:schmaStructureBdNoms,f:_})}async ajouterColonneTableau({idTableau:n,idVariable:_,idColonne:x}){const S=await this.client.obtIdBd({nom:"colonnes",racine:n,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaBdInfoColAvecCatgorie});x=x||v4$1();const T={id:x,variable:_};return await E.put(x,T),await C(),x}async effacerColonneTableau({idTableau:n,idColonne:_}){const x=await this.client.obtIdBd({nom:"colonnes",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaBdInfoColAvecCatgorie});await S.del(_),await E()}async suivreColonnesTableau({idTableau:n,f:_,catgories:x=!0}){const S=async A=>{if(A)return await _(A)},E=async(A,I,N)=>A?await this.client.variables.suivreCatgorieVariable({idVariable:A,f:async V=>{const D=Object.assign({catgorie:V},N);await I(D)}}):faisRien,C=A=>A.variable,T=A=>A.id,B=async({id:A,fSuivreBd:I})=>await this.client.suivreBdsDeBdDic({id:A,f:I,fBranche:E,fIdBdDeBranche:C,fCode:T});return x?await this.client.suivreBdDeClef({id:n,clef:"colonnes",f:S,fSuivre:B}):await this.client.suivreBdDicDeClef({id:n,clef:"colonnes",schma:schmaBdInfoColAvecCatgorie,f:async A=>S(Object.values(A))})}async suivreVariables({idTableau:n,f:_}){const x=async E=>{await _((E||[]).filter(C=>C&&isValidAddress(C)))},S=async({id:E,fSuivreBd:C})=>await this.client.suivreBdListe({id:E,f:T=>C(T.map(B=>B.variable))});return await this.client.suivreBdDeClef({id:n,clef:"colonnes",f:x,fSuivre:S})}async ajouterRgleTableau({idTableau:n,idColonne:_,rgle:x}){const S=await this.client.obtIdBd({nom:"rgles",racine:n,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour tableau ${n}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaBdRgles}),T=v4$1(),A={rgle:{id:T,rgle:x},source:{type:"tableau",id:n},colonne:_};return await E.put(T,A),await C(),T}async effacerRgleTableau({idTableau:n,idRgle:_}){const x=await this.client.obtIdBd({nom:"rgles",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour tableau ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaBdRgles});await S.del(_),await E()}async suivreRgles({idTableau:n,f:_}){const x={},S=async()=>{if(!(!x.tableau||!x.variable))return await _([...x.tableau,...x.variable])},E=async O=>(x.tableau=Object.values(O),await S()),C=await this.client.suivreBdDicDeClef({id:n,clef:"rgles",schma:schmaBdRgles,f:E}),T=async O=>await this.suivreColonnesTableau({idTableau:n,f:O}),B=async O=>(x.variable=O,await S()),A=async(O,F,M)=>{const L=j=>{const q=j.map(H=>({rgle:H,source:{type:"variable",id:O},colonne:M.id}));return F(q)};return await this.client.variables.suivreRglesVariable({idVariable:O,f:L})},I=O=>O.variable,N=O=>O.id,V=await this.client.suivreBdsDeFonctionListe({fListe:T,f:B,fBranche:A,fIdBdDeBranche:I,fCode:N});return async()=>{await C(),await V()}}async suivreValidDonnes({idTableau:n,f:_}){const x={},S=async()=>{if(!x.donnes||!x.rgles)return;let F=[];for(const M of x.rgles){const L=M(x.donnes);F=[...F,...L.flat()]}await _(F)},E=async F=>{x.varsColonnes&&(x.rgles=F.map(M=>gnrerFonctionRgle({rgle:M.rgle,varsColonnes:x.varsColonnes,donnesCatgorie:M.donnesCatgorie})),await S())},C=async F=>{x.donnes=F,await S()},T=await this.suivreColonnesTableau({idTableau:n,f:async F=>{const M=F.reduce((L,j)=>({...L,[j.variable]:j.id}),{});x.varsColonnes=M,await S()}}),B=async F=>await this.suivreRgles({idTableau:n,f:F}),A=async(F,M,L)=>{if(L.rgle.rgle.typeRgle==="valeurCatgorique"&&L.rgle.rgle.dtails.type==="dynamique"){const{tableau:j,colonne:q}=L.rgle.rgle.dtails;return await this.suivreDonnes({idTableau:j,f:async H=>await M({rgle:L,donnesCatgorie:H.map(X=>X.donnes[q])})})}else return await M({rgle:L}),faisRien},I=F=>F.rgle.id,N=F=>F.rgle.id,V=await this.client.suivreBdsDeFonctionListe({fListe:B,f:E,fBranche:A,fIdBdDeBranche:I,fCode:N}),D=await this.suivreDonnes({idTableau:n,f:C});return async()=>{await V(),await D(),await T()}}async suivreValidRgles({idTableau:n,f:_}){const x={},S=async()=>{if(!x.colonnes||!x.rgles)return;const D=[],O=x.rgles.map(j=>j.rgle).filter(j=>j.rgle.rgle.typeRgle==="bornes"),F=O.filter(j=>j.rgle.rgle.dtails.type==="dynamiqueColonne"),M=O.filter(j=>j.rgle.rgle.dtails.type==="dynamiqueVariable"),L=x.rgles.filter(j=>j.rgle.rgle.rgle.typeRgle==="valeurCatgorique"&&j.rgle.rgle.rgle.dtails.type==="dynamique");for(const j of F)if(!x.colonnes.find(H=>H.id===j.rgle.rgle.dtails.val)){const H={rgle:j,dtails:"colonneBornesInexistante"};D.push(H)}for(const j of M)if(!x.colonnes.find(H=>H.variable===j.rgle.rgle.dtails.val)){const H={rgle:j,dtails:"variableBornesNonPrsente"};D.push(H)}for(const j of L)if(!j.colsTableauRf?.find(H=>H.id===j.rgle.rgle.rgle.dtails.colonne)){const H={rgle:j.rgle,dtails:"colonneCatgInexistante"};D.push(H)}await _(D)},E=async D=>(x.rgles=D,await S()),C=await this.suivreColonnesTableau({idTableau:n,f:async D=>(x.colonnes=D,await S())}),T=async D=>await this.suivreRgles({idTableau:n,f:D}),B=async(D,O,F)=>{if(F.rgle.rgle.typeRgle==="valeurCatgorique"&&F.rgle.rgle.dtails.type==="dynamique"){const{tableau:M}=F.rgle.rgle.dtails;return await this.suivreColonnesTableau({idTableau:M,f:L=>O({rgle:F,colsTableauRf:L})})}else return await O({rgle:F}),faisRien},A=D=>D.rgle.id,I=D=>D.rgle.id,N=await this.client.suivreBdsDeFonctionListe({fListe:T,f:E,fBranche:B,fIdBdDeBranche:A,fCode:I});return async()=>{await N(),await C()}}async effacerTableau({idTableau:n}){for(const _ in["noms","donnes","colonnes","rgles"]){const x=await this.client.obtIdBd({nom:_,racine:n});x&&await this.client.effacerBd({id:x})}await this.client.effacerBd({id:n})}}__decorate([cacheSuivi],Tableaux.prototype,"suivreDiffrencesAvecTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreIndex",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreDonnes",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreNomsTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreColonnesTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreVariables",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreRgles",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreValidDonnes",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreValidRgles",null);const schmaBdPrincipale$3={type:"string"},schmaStructureBdVariable={type:"object",properties:{type:{type:"string",nullable:!0},catgorie:{type:"object",properties:{catgorie:{type:"string",nullable:!0},type:{type:"string",nullable:!0}},required:[],nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0},units:{type:"string",nullable:!0},rgles:{type:"string",nullable:!0},statut:{type:"object",properties:{idNouvelle:{type:"string",nullable:!0},statut:{type:"string",nullable:!0}},required:[],nullable:!0}},required:[]},schmaBdRglesVariable={type:"object",additionalProperties:{type:"object",properties:{typeRgle:{type:"string"},dtails:{type:"object",required:[],additionalProperties:!0}},required:["dtails","typeRgle"]},required:[]};class Variables extends ComposanteClientListe{constructor({client:n}){super({client:n,clef:"variables",schmaBdPrincipale:schmaBdPrincipale$3})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async suivreVariables({f:n,idCompte:_}){return await this.suivreBdPrincipale({idCompte:_,f:n})}async crerVariable({catgorie:n}){const _=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:{address:void 0,write:this.client.bdCompte.address}});await this.ajouterMesVariables({idVariable:_});const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdVariable}),E=x.access;if(!estUnContrleurConstellation(E))throw Error("Contrleur de type non reconnu.");const C={address:E.address};await x.set("type","variable");const T=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:C});await x.set("noms",T);const B=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:C});await x.set("descriptions",B);const A=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:C});return await x.set("rgles",A),await x.set("catgorie",this.standardiserCatgorieVariable(n)),await this.tablirStatut({id:_,statut:{statut:TYPES_STATUT.ACTIVE}}),S(),_}async ajouterMesVariables({idVariable:n}){const{bd:_,fOublier:x}=await this.obtBd();await _.add(n),await x()}async enleverDeMesVariables({idVariable:n}){const{bd:_,fOublier:x}=await this.obtBd();await _.del(n),await x()}async copierVariable({idVariable:n}){const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdVariable}),S=await _.get("catgorie"),E=await this.crerVariable({catgorie:S}),{bd:C,fOublier:T}=await this.client.orbite.ouvrirBdType({id:E,type:"keyvalue",schma:schmaStructureBdVariable}),B=await _.get("noms");if(B){const{bd:D,fOublier:O}=await this.client.orbite.ouvrirBdType({id:B,type:"keyvalue",schma:schmaStructureBdNoms}),F=await D.allAsJSON();await O(),await this.sauvegarderNomsVariable({idVariable:E,noms:F})}const A=await _.get("descriptions");if(A){const{bd:D,fOublier:O}=await this.client.orbite.ouvrirBdType({id:A,type:"keyvalue",schma:schmaStructureBdNoms}),F=await D.allAsJSON();await O(),await this.sauvegarderDescriptionsVariable({idVariable:E,descriptions:F})}const I=await _.get("units");I&&await C.put("units",I);const N=await _.get("rgles");if(N){const{bd:D,fOublier:O}=await this.client.orbite.ouvrirBdType({id:N,type:"keyvalue",schma:schmaBdRglesVariable}),F=await D.allAsJSON();await O(),await Promise.all(Object.entries(F).map(async([M,L])=>{await this.ajouterRgleVariable({idVariable:E,rgle:L,idRgle:M})}))}const V=await _.get("statut")||{statut:TYPES_STATUT.ACTIVE};return await this.tablirStatut({id:E,statut:V}),await Promise.all([x(),T()]),E}async inviterAuteur({idVariable:n,idCompteAuteur:_,rle:x}){await this.client.donnerAccs({idBd:n,identit:_,rle:x})}async sauvegarderNomsVariable({idVariable:n,noms:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour Variable ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});for(const C in _)await S.set(C,_[C]);await E()}async sauvegarderNomVariable({idVariable:n,langue:_,nom:x}){const S=await this.client.obtIdBd({nom:"noms",racine:n,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour variable ${n}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdNoms});await E.set(_,x),await C()}async effacerNomVariable({idVariable:n,langue:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour Variable ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});await S.del(_),await E()}async sauvegarderDescriptionsVariable({idVariable:n,descriptions:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour Variable ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});for(const C in _)await S.set(C,_[C]);await E()}async sauvegarderDescriptionVariable({idVariable:n,langue:_,description:x}){const S=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour Variable ${n}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdNoms});await E.set(_,x),await C()}async effacerDescriptionVariable({idVariable:n,langue:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour Variable ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});await S.del(_),await E()}async sauvegarderCatgorieVariable({idVariable:n,catgorie:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdVariable});await x.set("catgorie",this.standardiserCatgorieVariable(_)),await S()}standardiserCatgorieVariable(n){return typeof n=="string"?{type:"simple",catgorie:n}:n}async sauvegarderUnitsVariable({idVariable:n,idUnit:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdVariable});await x.set("units",_),await S()}async ajouterRgleVariable({idVariable:n,rgle:_,idRgle:x}){const S=await this.client.obtIdBd({nom:"rgles",racine:n,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour variable ${n}.`);x=x||v4$1();const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaBdRglesVariable});return await E.put(x,_),await C(),x}async effacerRgleVariable({idVariable:n,idRgle:_}){const x=await this.client.obtIdBd({nom:"rgles",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour variable ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaBdRglesVariable});await S.del(_),await E()}async modifierRgleVariable({idVariable:n,rgleModifie:_,idRgle:x}){await this.effacerRgleVariable({idVariable:n,idRgle:x}),await this.ajouterRgleVariable({idVariable:n,rgle:_,idRgle:x})}async suivreNomsVariable({idVariable:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"noms",schma:schmaStructureBdNoms,f:_})}async suivreDescriptionsVariable({idVariable:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"descriptions",schma:schmaStructureBdNoms,f:_})}async suivreCatgorieVariable({idVariable:n,f:_}){return await this.client.suivreBd({id:n,type:"keyvalue",schma:schmaStructureBdVariable,f:async x=>{const S=await x.get("catgorie");S&&S.catgorie&&S.type&&await _(this.standardiserCatgorieVariable(S))}})}async suivreUnitsVariable({idVariable:n,f:_}){return await this.client.suivreBd({id:n,type:"keyvalue",schma:schmaStructureBdVariable,f:async x=>{const S=await x.get("units");await _(S||null)}})}async suivreRglesVariable({idVariable:n,f:_}){const x={catgorie:{},propres:{}},S=async()=>{await _(Object.entries(Object.assign({},x.catgorie,x.propres)).map(([I,N])=>({id:I,rgle:N})))},E=async I=>{const N={[v4$1()]:{typeRgle:"catgorie",dtails:{catgorie:I}}};x.catgorie=N,await S()},C=await this.suivreCatgorieVariable({idVariable:n,f:E}),T=async I=>{x.propres=I,await S()},B=await this.client.suivreBdDicDeClef({id:n,clef:"rgles",schma:schmaBdRglesVariable,f:T});return async()=>{await C(),await B()}}async suivreQualitVariable({idVariable:n,f:_}){const x={noms:{},descr:{},rgles:[]},S=async()=>{const N=[Object.keys(x.noms).length?1:0,Object.keys(x.descr).length?1:0];x.catgorie?.catgorie==="numrique"&&N.push(x.units?1:0),x.catgorie?.catgorie==="numrique"&&N.push(x.rgles.length>=1?1:0);const V=N.reduce((D,O)=>D+O,0)/N.length;await _(V)},E=await this.suivreNomsVariable({idVariable:n,f:async N=>{x.noms=N,await S()}}),C=await this.suivreDescriptionsVariable({idVariable:n,f:async N=>{x.descr=N,await S()}}),T=await this.suivreUnitsVariable({idVariable:n,f:async N=>{x.units=N,await S()}}),B=await this.suivreCatgorieVariable({idVariable:n,f:async N=>{x.catgorie=N,await S()}}),A=await this.suivreRglesVariable({idVariable:n,f:async N=>{x.rgles=N,await S()}});return async()=>{await Promise.all([E(),C(),T(),B(),A()])}}async tablirStatut({id:n,statut:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdVariable});await x.set("statut",_),await S()}async marquerObsolte({id:n,idNouvelle:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdVariable});x.set("statut",{statut:TYPES_STATUT.OBSOLTE,idNouvelle:_}),await S()}async effacerVariable({idVariable:n}){await this.enleverDeMesVariables({idVariable:n});for(const _ in["noms","descriptions","rgles"]){const x=await this.client.obtIdBd({nom:_,racine:n});x&&await this.client.effacerBd({id:x})}await this.client.effacerBd({id:n})}}__decorate([cacheSuivi],Variables.prototype,"suivreVariables",null);__decorate([cacheSuivi],Variables.prototype,"suivreNomsVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreDescriptionsVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreCatgorieVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreUnitsVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreRglesVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreQualitVariable",null);function baseSum$1(r,n){for(var _,x=-1,S=r.length;++x<S;){var E=n(r[x]);E!==void 0&&(_=_===void 0?E:_+E)}return _}var _baseSum=baseSum$1;function identity$1(r){return r}var identity_1=identity$1,baseSum=_baseSum,identity=identity_1;function sum$1(r){return r&&r.length?baseSum(r,identity):0}var sum_1=sum$1;const sum$2=getDefaultExportFromCjs(sum_1);var average$3=function r(n){return n.reduce(sum,0)/n.length};function sum(r,n){return r+n}var average$2=average$3,variance$1=function r(n){var _=average$2(n);function x(S,E){var C=E-_;return S+C*C}return n.reduce(x,0)/n.length},average$1=average$3,covariance$1=function r(n,_){for(var x=n.length,S=0,E=average$1(n),C=average$1(_),T=[];S<x;S+=1){var B=n[S]-E,A=_[S]-C;T.push(B*A)}return average$1(T)},average=average$3,variance=variance$1,covariance=covariance$1,ssim=function r(n,_,x){x=x||{};var S="K1"in x?x.K1:.01,E="K2"in x?x.K2:.03,C="L"in x?x.L:255,T="alpha"in x?x.alpha:1,B="beta"in x?x.beta:1,A="gamma"in x?x.gamma:1,I=S*C*(S*C),N=E*C*(E*C),V=N/2;function D(q,H){var X=average(q),J=average(H);return(2*X*J+I)/(X*X+J*J+I)}function O(q,H){var X=variance(q),J=variance(H),Z=Math.sqrt(X),ae=Math.sqrt(J);return(2*Z*ae+N)/(X+J+N)}function F(q,H){var X=Math.sqrt(variance(q)),J=Math.sqrt(variance(H)),Z=covariance(q,H);return(Z+V)/(X*J+V)}var M=Math.pow(D(n,_),T),L=Math.pow(O(n,_),B),j=Math.pow(F(n,_),A);return M*L*j};const ssim$1=getDefaultExportFromCjs(ssim);function reverse(r){return r.split("").reverse().join("")}function findMatchStarts(r,n,_){const x=reverse(n);return _.map(S=>{const E=Math.max(0,S.end-n.length-S.errors),C=reverse(r.slice(E,S.end));return{start:findMatchEnds(C,x,S.errors).reduce((B,A)=>S.end-A.end<B?S.end-A.end:B,S.end),end:S.end,errors:S.errors}})}function oneIfNotZero(r){return(r|-r)>>31&1}function advanceBlock(r,n,_,x){let S=r.P[_],E=r.M[_];const C=x>>>31,T=n[_]|C,B=T|E,A=(T&S)+S^S|T;let I=E|~(A|S),N=S&A;const V=oneIfNotZero(I&r.lastRowMask[_])-oneIfNotZero(N&r.lastRowMask[_]);return I<<=1,N<<=1,N|=C,I|=oneIfNotZero(x)-C,S=N|~(B|I),E=I&B,r.P[_]=S,r.M[_]=E,V}function findMatchEnds(r,n,_){if(n.length===0)return[];_=Math.min(_,n.length);const x=[],S=32,E=Math.ceil(n.length/S)-1,C={P:new Uint32Array(E+1),M:new Uint32Array(E+1),lastRowMask:new Uint32Array(E+1)};C.lastRowMask.fill(1<<31),C.lastRowMask[E]=1<<(n.length-1)%S;const T=new Uint32Array(E+1),B=new Map,A=[];for(let V=0;V<256;V++)A.push(T);for(let V=0;V<n.length;V+=1){const D=n.charCodeAt(V);if(B.has(D))continue;const O=new Uint32Array(E+1);B.set(D,O),D<A.length&&(A[D]=O);for(let F=0;F<=E;F+=1){O[F]=0;for(let M=0;M<S;M+=1){const L=F*S+M;if(L>=n.length)continue;n.charCodeAt(L)===D&&(O[F]|=1<<M)}}}let I=Math.max(0,Math.ceil(_/S)-1);const N=new Uint32Array(E+1);for(let V=0;V<=I;V+=1)N[V]=(V+1)*S;N[E]=n.length;for(let V=0;V<=I;V+=1)C.P[V]=-1,C.M[V]=0;for(let V=0;V<r.length;V+=1){const D=r.charCodeAt(V);let O;D<A.length?O=A[D]:(O=B.get(D),typeof O>"u"&&(O=T));let F=0;for(let M=0;M<=I;M+=1)F=advanceBlock(C,O,M,F),N[M]+=F;if(N[I]-F<=_&&I<E&&(O[I+1]&1||F<0)){I+=1,C.P[I]=-1,C.M[I]=0;let M;if(I===E){const L=n.length%S;M=L===0?S:L}else M=S;N[I]=N[I-1]+M-F+advanceBlock(C,O,I,F)}else for(;I>0&&N[I]>=_+S;)I-=1;I===E&&N[I]<=_&&(N[I]<_&&x.splice(0,x.length),x.push({start:-1,end:V+1,errors:N[I]}),_=N[I])}return x}function search(r,n,_){const x=findMatchEnds(r,n,_);return findMatchStarts(r,n,x)}const rechercherDansTexte=(r,n)=>{const x=search(n,r,Math.ceil(r.length/4)).sort((S,E)=>S.errors>E.errors?1:-1)[0];if(x)return{type:"texte",score:1/(x.errors+1),dbut:x.start,fin:x.end}},similTexte=(r,n)=>(Array.isArray(n)&&(n=Object.fromEntries(n.map(S=>[S,S]))),Object.entries(n).map(([S,E])=>{const C=rechercherDansTexte(r,E);if(C){const{score:T,dbut:B,fin:A}=C;return{type:"rsultat",score:T,clef:S,info:{type:"texte",texte:E,dbut:B,fin:A}}}}).filter(S=>S).sort((S,E)=>S.score>E.score?-1:1)[0]),similImages=(r,n)=>{if(!n)return 0;const{mssim:_}=ssim$1(r,n);return _},combinerRecherches=async(r,n,_,x)=>{const S=[],E=Object.fromEntries(Object.keys(r).map(T=>[T,void 0])),C=()=>{const T=Object.values(E).filter(B=>B).sort((B,A)=>aMieuxQueB(B,A)?-1:1)[0];x(T)};return await Promise.all(Object.entries(r).map(async([T,B])=>{const A=I=>{E[T]=I,C()};S.push(await B(n,_,A))})),async()=>{await Promise.all(S.map(T=>T()))}},sousRecherche=async(r,n,_,x,S)=>{const E=async(B,A)=>await _(x,B,I=>{I&&A({id:B,rsultat:I})}),C=async B=>{const A=meilleurRsultat(B);if(A){const I={type:"rsultat",de:r,clef:A.id,score:A.rsultat.score,info:{type:"rsultat",de:A.rsultat.de,info:A.rsultat.info}};A.rsultat.clef&&(I.info.clef=A.rsultat.clef),await S(I)}};return await x.suivreBdsDeFonctionListe({fListe:n,f:C,fBranche:E})},aMieuxQueB=(r,n)=>{const _=(x,S)=>{for(;x.type==="rsultat";)x=x.info;for(;S.type==="rsultat";)S=S.info;switch(x.type){case"texte":return S.type==="texte"?x.fin-x.dbut>S.fin-S.dbut:!1;default:return!0}};return r.score>n.score?!0:r.score<n.score?!1:!!_(r.info,n.info)},meilleurRsultat=r=>Object.values(r).filter(_=>_).sort((_,x)=>aMieuxQueB(_.rsultat,x.rsultat)?-1:1)[0],rechercherSelonId=r=>async(n,_,x)=>{const S=rechercherDansTexte(r,_);if(S){const{score:E,dbut:C,fin:T}=S;x({score:E,type:"rsultat",de:"id",info:{type:"texte",dbut:C,fin:T,texte:_}})}else x();return faisRien},rechercherTous=()=>async(r,n,_)=>(await _({type:"rsultat",score:1,de:"*",info:{type:"vide"}}),faisRien),rechercherProfilsSelonActivit=()=>async(r,n,_)=>{const x={noms:void 0,image:void 0,courriel:void 0},S=()=>({type:"rsultat",score:[Object.keys(x.noms||{}).length>0,x.image,x.courriel].filter(Boolean).length/3,de:"activit",info:{type:"vide"}}),E=V=>{x.noms=V,_(S())},C=V=>{x.image=V,_(S())},T=V=>{x.courriel=V,_(S())},B=await r.profil.suivreNoms({idCompte:n,f:E}),A=await r.profil.suivreImage({idCompte:n,f:C}),I=await r.profil.suivreCourriel({idCompte:n,f:T});return async()=>{await Promise.all([B(),A(),I()])}},rechercherProfilsSelonNom=r=>async(n,_,x)=>{const S=C=>{const T=similTexte(r,C);if(T){const{score:B,clef:A,info:I}=T;x({type:"rsultat",score:B,clef:A,info:I,de:"nom"})}else x()};return await n.profil.suivreNoms({idCompte:_,f:S})},rechercherProfilsSelonCourriel=r=>async(n,_,x)=>{const S=C=>{const T=C?rechercherDansTexte(r,C):void 0;if(T){const{score:B,dbut:A,fin:I}=T;x({type:"rsultat",score:B,de:"courriel",info:{type:"texte",dbut:A,fin:I,texte:C}})}else x()};return await n.profil.suivreCourriel({idCompte:_,f:S})},rechercherProfilsSelonTexte=r=>async(n,_,x)=>{const S=rechercherProfilsSelonNom(r),E=rechercherProfilsSelonCourriel(r),C=rechercherSelonId(r);return await combinerRecherches({noms:S,courriel:E,id:C},n,_,x)},rechercherProfilsSelonImage=r=>async(n,_,x)=>{const S=C=>{const T=similImages(r,C);x({type:"rsultat",score:T,de:"image",info:{type:"vide"}})};return await n.profil.suivreImage({idCompte:_,f:S})},schmaBdPrincipaleRseau={type:"object",additionalProperties:{type:"string"},required:[]},INTERVALE_SALUT=1e3*10,FACTEUR_ATNUATION_CONFIANCE=.8,FACTEUR_ATNUATION_BLOQUS=.9,CONFIANCE_DE_COAUTEUR=.9,CONFIANCE_DE_FAVORIS=.7,DLAI_SESOUVENIR_MEMBRES_EN_LIGNE=1e3*60*60*24*30,N_DSIR_SOUVENIR_MEMBRES_EN_LIGNE=50,obtChaneIdSFIPClient=r=>r.idNodeSFIP.id.toCID().toString();class Rseau extends ComposanteClientDic{constructor({client:_}){super({client:_,clef:"rseau",schmaBdPrincipale:schmaBdPrincipaleRseau});_t(this,"client");_t(this,"bloqusPrivs");_t(this,"_ferm");_t(this,"dispositifsEnLigne");_t(this,"fsOublier");_t(this,"vnements");this.client=_,this.bloqusPrivs=new Set,this.dispositifsEnLigne={},this.fsOublier=[],this._ferm=!1,this.vnements=new eventsExports.EventEmitter}async initialiser(){const _={};await this.client.sfip.pubsub.subscribe(this.client.sujet_rseau,T=>{const B=v4$1();try{const A=this.messageReu({msg:T});_[B]=A,A.then(()=>{delete _[B]})}catch(A){console.error(A.toString()),console.error(A.stack.toString())}}),this.fsOublier.push(async()=>{await this.client.sfip.pubsub.unsubscribe(this.client.sujet_rseau),await Promise.all(Object.values(_))});const x=this.client.sfip.libp2p,S=()=>{this.vnements.emit("changementConnexions")},E=["peer:discovery","peer:connect","peer:disconnect"];for(const T of E)x.addEventListener(T,S);this.fsOublier.push(...E.map(T=>async()=>x.removeEventListener(T,S)));const C=setInterval(()=>{this.direSalut({})},INTERVALE_SALUT);this.fsOublier.unshift(async()=>clearInterval(C)),await this.direSalut({})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async envoyerMessageAuDispositif({msg:_,idSFIP:x}){x&&(_.destinataire=x);const S=this.client.sujet_rseau,E=Buffer$5.from(JSON.stringify(_));await this.client.sfip.pubsub.publish(S,E)}async envoyerMessageAuMembre({msg:_,idCompte:x,encrypt:S=!0}){const C={signature:await this.client.signer({message:JSON.stringify(_)}),valeur:_},T=Date.now(),B=Object.values(this.dispositifsEnLigne).filter(A=>A.infoDispositif.idCompte===x).filter(A=>A.vu&&T-A.vu<INTERVALE_SALUT+1e3*30);if(!B.length)throw new Error(`Aucun dispositif prsentement en ligne pour membre ${x}`);await Promise.all(B.map(async A=>{const{idSFIP:I,encryption:N}=A.infoDispositif;if(S){if(N?.type!==this.client.encryption.nom)return;const V=this.client.encryption.encrypter({message:JSON.stringify(C),clefPubliqueDestinataire:N.clefPublique}),D={encrypt:!0,clefPubliqueExpditeur:this.client.encryption.clefs.publique,donnes:V};await this.envoyerMessageAuDispositif({msg:D,idSFIP:I})}else{const V={encrypt:!1,donnes:C};await this.envoyerMessageAuDispositif({msg:V,idSFIP:I})}}))}async direSalut({:_}){const x={type:"Salut !",contenu:{idSFIP:obtChaneIdSFIPClient(this.client),idDispositif:this.client.orbite.identity.id,clefPublique:this.client.orbite.identity.publicKey,signatures:this.client.orbite.identity.signatures,idCompte:await this.client.obtIdCompte()}};this.client.encryption&&(x.contenu.encryption={type:this.client.encryption.nom,clefPublique:this.client.encryption.clefs.publique});const E={encrypt:!1,donnes:{signature:await this.client.signer({message:JSON.stringify(x)}),valeur:x}};try{await this.envoyerMessageAuDispositif({msg:E,idSFIP:_})}catch(C){if(!C.toString().includes("PublishError.InsufficientPeers"))throw C}}async envoyerDemandeRejoindreCompte({idCompte:_,codeSecret:x}){const S=await this.client.obtIdDispositif(),E={type:"Je veux rejoindre ce compte",contenu:{idDispositif:S,empreinteVrification:this.client.empreinteInvitation({idDispositif:S,codeSecret:x})}};await this.envoyerMessageAuMembre({msg:E,idCompte:_})}async messageReu({msg:_}){if(this._ferm)return;const x=JSON.parse(new TextDecoder().decode(_.data)),{encrypt:S,destinataire:E}=x;if(E&&E!==obtChaneIdSFIPClient(this.client))return;const C=S?JSON.parse(this.client.encryption.dcrypter({message:x.donnes,clefPubliqueExpditeur:x.clefPubliqueExpditeur})):x.donnes,{valeur:T,signature:B}=C;if(B.clefPublique===this.client.orbite.identity.publicKey&&T.type!=="Salut !"||!await this.client.vrifierSignature({signature:B,message:JSON.stringify(T)}))return;const I=T.contenu;switch(T.type){case"Salut !":{const N=I,{clefPublique:V}=N;if(V!==B.clefPublique)return;await this.recevoirSalut({message:N}),E||await this.direSalut({:N.idSFIP});break}case"Je veux rejoindre ce compte":{const N=I;await this.client.considrerRequteRejoindreCompte({requte:N});break}}}async recevoirSalut({message:_}){await this._validerInfoMembre({info:_})&&(this.dispositifsEnLigne[_.idDispositif]={infoDispositif:_,vu:_.idDispositif===await this.client.obtIdDispositif()?void 0:new Date().getTime()},this.vnements.emit("membreVu"),await this._sauvegarderDispositifsEnLigne())}_nettoyerDispositifsEnLigne(){const _=new Date().getTime(),x=Object.values(this.dispositifsEnLigne).filter(C=>_-(C.vu||0)>DLAI_SESOUVENIR_MEMBRES_EN_LIGNE).sort((C,T)=>(C.vu||0)<(T.vu||0)?-1:1).map(C=>C.infoDispositif.idDispositif),S=Object.keys(this.dispositifsEnLigne).length-N_DSIR_SOUVENIR_MEMBRES_EN_LIGNE;x.slice(x.length-S).forEach(C=>delete this.dispositifsEnLigne[C])}async _sauvegarderDispositifsEnLigne(){this._nettoyerDispositifsEnLigne(),await this.client.sauvegarderAuStockageLocal({clef:"dispositifsEnLigne",val:JSON.stringify(this.dispositifsEnLigne)})}async _validerInfoMembre({info:_}){const{idCompte:x,signatures:S,clefPublique:E,idDispositif:C}=_;if(!(x&&S&&E&&C))return!1;const T=await this.client.vrifierSignature({signature:{signature:S.id,clefPublique:E},message:C}),B=await this.client.vrifierSignature({signature:{signature:S.publicKey,clefPublique:C},message:E+S.id});if(!isValidAddress(x))return!1;const{bd:A,fOublier:I}=await this.client.orbite.ouvrirBd({id:x});if(!estUnContrleurConstellation(A.access))return!1;const N=A.access.estAutoris(C);return await I(),T&&B&&N}async faireConfianceAuMembre({idCompte:_}){const{bd:x,fOublier:S}=await this.obtBd();await x.set(_,"FIABLE"),await S()}async nePlusFaireConfianceAuMembre({idCompte:_}){const{bd:x,fOublier:S}=await this.obtBd();Object.keys(await x.allAsJSON()).includes(_)&&await x.get(_)==="FIABLE"&&await x.del(_),await S()}async suivreFiables({f:_,idCompte:x}){const S=async E=>{const C=Object.keys(E).filter(T=>E[T]==="FIABLE");return await _(C)};return await this.suivreBdPrincipale({idCompte:x,f:S})}async _initaliserBloqusPrivs(){const _=await this.client.obtDeStockageLocal({clef:"membresBloqus"});_&&(JSON.parse(_).forEach(x=>this.bloqusPrivs.add(x)),this.vnements.emit("changementMembresBloqus"))}async _sauvegarderBloqusPrivs(){const _=[...this.bloqusPrivs];this.client.sauvegarderAuStockageLocal({clef:"membresBloqus",val:JSON.stringify(_)})}async bloquerMembre({idCompte:_,priv:x=!1}){if(x)await this.dbloquerMembre({idCompte:_}),this.bloqusPrivs.add(_),await this._sauvegarderBloqusPrivs();else{const{bd:S,fOublier:E}=await this.obtBd();await this.dbloquerMembre({idCompte:_}),await S.set(_,"BLOQU"),await E()}this.vnements.emit("changementMembresBloqus")}async dbloquerMembre({idCompte:_}){const{bd:x,fOublier:S}=await this.obtBd();Object.keys(await x.allAsJSON()).includes(_)&&await x.get(_)==="BLOQU"&&await x.del(_),await S(),this.bloqusPrivs.has(_)&&(this.bloqusPrivs.delete(_),await this._sauvegarderBloqusPrivs()),this.vnements.emit("changementMembresBloqus")}async suivreBloqusPubliques({f:_,idCompte:x}){const S=async E=>{const C=Object.keys(E).filter(T=>E[T]==="BLOQU");return await _(C)};return await this.suivreBdPrincipale({idCompte:x,f:S})}async suivreBloqus({f:_,idCompte:x}){const S=[];let E=[];const C=async()=>{const T=[...new Set([...[...this.bloqusPrivs].map(B=>({idCompte:B,priv:!0})),...E.map(B=>({idCompte:B,priv:!1}))])];return await _(T)};return S.push(await this.suivreBloqusPubliques({f:async T=>(E=T,await C()),idCompte:x})),(x===void 0||x===this.client.idCompte)&&(await this._initaliserBloqusPrivs(),this.vnements.on("changementMembresBloqus",C),S.push(async()=>{this.vnements.off("changementMembresBloqus",C)}),await C()),async()=>{await Promise.all(S.map(T=>T()))}}async suivreRelationsImmdiates({f:_,idCompte:x}){x=x||this.client.idCompte;const S=[],E={suivis:[],favoris:[],coauteursBds:[],coauteursProjets:[],coauteursVariables:[],coauteursMotsClefs:[]};let C=[];const T=async()=>{const O=[...E.suivis,...E.favoris,...E.coauteursBds,...E.coauteursProjets,...E.coauteursVariables,...E.coauteursMotsClefs,...C.map(L=>({idCompte:L,confiance:-1}))],M=[...new Set(O)].map(L=>{const{idCompte:j}=L;if(C.includes(j))return{idCompte:j,confiance:-1};const H=1-O.filter(X=>X.idCompte===j).map(X=>X.confiance).map(X=>1-X).reduce((X,J)=>J*X,1);return{idCompte:j,confiance:H}});return await _(M)};S.push(await this.suivreBloqus({f:async O=>{C=O.map(F=>F.idCompte),await T()},idCompte:x})),S.push(await this.client.suivreBdDicDeClef({id:x,clef:"rseau",schma:schmaBdPrincipaleRseau,f:async O=>(E.suivis=Object.entries(O).filter(([F,M])=>M==="FIABLE").map(([F,M])=>({idCompte:F,confiance:1})),await T())}));const B=async(O,F,M)=>{S.push(await this.client.suivreBdsDeFonctionListe({fListe:O,f:async L=>(E[F]=L.map(j=>({idCompte:j,confiance:M})),await T()),fBranche:async(L,j)=>await this.client.suivreAccsBd({id:L,f:q=>j(q.map(H=>H.idCompte).filter(H=>H!==x))})}))};return await B(async O=>await this.suivreFavorisMembre({idCompte:x,f:F=>O((F||[]).map(M=>M.idObjet))}),"favoris",CONFIANCE_DE_FAVORIS),await B(async O=>await this.suivreBdsMembre({idCompte:x,f:F=>O(F||[])}),"coauteursBds",CONFIANCE_DE_COAUTEUR),await B(async O=>await this.suivreProjetsMembre({idCompte:x,f:F=>O(F||[])}),"coauteursProjets",CONFIANCE_DE_COAUTEUR),await B(async O=>await this.suivreVariablesMembre({idCompte:x,f:F=>O(F||[])}),"coauteursVariables",CONFIANCE_DE_COAUTEUR),await B(async O=>await this.suivreMotsClefsMembre({idCompte:x,f:F=>O(F||[])}),"coauteursMotsClefs",CONFIANCE_DE_COAUTEUR),async()=>{await Promise.all(S.map(O=>O()))}}async suivreRelationsConfiance({f:_,profondeur:x,idCompteDbut:S}){const E=S||await this.client.obtIdCompte(),C={},T={},B=new s;let A=!1;const I=j=>Object.entries(C).filter(([q,H])=>H.relations.map(X=>X.idCompte).includes(j)).map(([q,H])=>q),N=j=>{if(j===E)return 0;const q=({ids:H,p:X=1,djVues:J=new Set})=>{const Z=H.map(ae=>I(ae).filter(ce=>!J.has(ce))).flat();return Z.includes(E)?X:Z.length?(J=new Set(...J,...Z),q({ids:Z,p:X+1,djVues:J})):1/0};return q({ids:[j]})},V=async()=>{const j=[];for(const[q,H]of Object.entries(C))for(const X of H.relations){const J=N(q)+1;j.push({de:q,pour:X.idCompte,confiance:X.confiance,profondeur:J})}return await _(j)},D=async j=>{C[j]={relations:[]};const q=await this.suivreRelationsImmdiates({f:H=>{C[j]&&(C[j].relations=H,F())},idCompte:j});T[j]=q},O=async j=>{await T[j](),delete T[j],delete C[j]},F=async()=>{if(A)return;await B.acquire("modification");const j=Object.keys(C).filter(H=>N(H)>=x),q=[...new Set(Object.entries(C).filter(([H,X])=>N(H)+1<x).map(([H,X])=>X.relations.map(J=>J.idCompte)).flat())].filter(H=>!Object.keys(C).includes(H));await Promise.all(j.map(H=>O(H))),await Promise.all(q.map(H=>D(H))),await V(),B.release("modification")};return await D(E),{fOublier:async()=>{A=!0,await Promise.all(Object.values(T).map(j=>j()))},fChangerProfondeur:async j=>{x=j,await F()}}}async suivreComptesRseau({f:_,profondeur:x,idCompteDbut:S}){const E=async C=>{C.push({de:this.client.idCompte,pour:this.client.idCompte,confiance:1,profondeur:0});const T={};C.forEach(A=>{Object.keys(T).includes(A.pour)||(T[A.pour]=[]),T[A.pour].push(A)});const B=Object.entries(T).map(([A,I])=>{const N=I.find(L=>L.de===this.client.idCompte);if(N?.confiance===1||N?.confiance===-1)return{idCompte:A,profondeur:N.pour===this.client.idCompte?0:1,confiance:N.confiance};const V=Math.min(...I.map(L=>L.profondeur)),D=I.filter(L=>L.confiance>=0),F=1-I.filter(L=>L.confiance<0).map(L=>1+L.confiance*Math.pow(FACTEUR_ATNUATION_BLOQUS,L.profondeur-1)).reduce((L,j)=>j*L,1),M=1-D.map(L=>1-L.confiance*Math.pow(FACTEUR_ATNUATION_CONFIANCE,L.profondeur-1)).reduce((L,j)=>j*L,1)-F;return{idCompte:A,profondeur:V,confiance:M}});return await _(B)};return await this.suivreRelationsConfiance({f:E,profondeur:x,idCompteDbut:S})}async suivreComptesRseauEtEnLigne({f:_,profondeur:x,idCompteDbut:S}){const E={rseau:[],enLigne:[]},C=async()=>{const V=[...E.rseau];return E.enLigne.forEach(D=>{V.find(O=>O.idCompte===D.idCompte)||V.push(D)}),await _(V)},T=await this.suivreConnexionsMembres({f:async V=>{const D=V.filter(O=>O.infoMembre.idCompte!==this.client.idCompte).map(O=>({idCompte:O.infoMembre.idCompte,profondeur:1/0,confiance:0}));return E.enLigne=D,await C()}}),B=async V=>(E.rseau=V,await C()),{fOublier:A,fChangerProfondeur:I}=await this.suivreComptesRseau({f:B,profondeur:x,idCompteDbut:S});return{fOublier:async()=>{await T(),await A()},fChangerProfondeur:I}}async suivreConfianceMonRseauPourMembre({idCompte:_,f:x,profondeur:S,idCompteRfrence:E}){const C=E||await this.client.obtIdCompte(),T=async B=>{const A=B.find(I=>I.idCompte===_);return await x(A?.confiance||0)};return await this.suivreComptesRseau({f:T,profondeur:S,idCompteDbut:C})}async suivreConnexionsPostesSFIP({f:_}){const x=C=>{const T=[],B=[];for(const A of C)T.includes(A.peer.toCID().toString())||(T.push(A.peer.toCID().toString()),B.push(A));return B},S=async()=>{const C=await this.client.sfip.swarm.peers(),T=x(C);return await _(T.map(B=>({adresse:B.addr.toString(),pair:B.peer.toCID().toString()})))};return this.vnements.on("changementConnexions",S),await S(),async()=>{this.vnements.off("changementConnexions",S)}}async suivreConnexionsDispositifs({f:_}){const x=async()=>await _(Object.values(this.dispositifsEnLigne));return this.vnements.on("membreVu",x),await x(),async()=>{this.vnements.off("membreVu",x)}}async suivreConnexionsMembres({f:_}){const x=async E=>{const C=async T=>{const B={};for(const A of T){const{idCompte:I}=A.infoDispositif;B[I]||(B[I]={infoMembre:{idCompte:I,dispositifs:[]}});const{infoMembre:N,vu:V}=B[I];N.dispositifs.push(A.infoDispositif),B[I].vu=V?A.vu?Math.max(V,A.vu):V:A.vu}return await E(Object.values(B))};return await this.suivreConnexionsDispositifs({f:C})},S=async(E,C,T)=>await this.suivreProtocolesMembre({idCompte:E,f:B=>{C({infoMembre:{...T.infoMembre,protocoles:Object.values(B).flat()},vu:T.vu})}});return await this.client.suivreBdsDeFonctionListe({fListe:x,f:_,fBranche:S,fIdBdDeBranche:E=>E.infoMembre.idCompte,fCode:E=>E.infoMembre.idCompte})}async suivreProtocolesMembre({f:_,idCompte:x}){return await this.client.suivreBdDicDeClef({id:x||await this.client.obtIdCompte(),clef:"protocoles",schma:schmaStructureBdCompte,f:_})}async suivreProtocolesDispositif({idDispositif:_,f:x}){const S=_||await this.client.obtIdDispositif();return await suivreBdDeFonction({fRacine:async({fSuivreRacine:B})=>await this.suivreConnexionsDispositifs({f:async A=>{const I=A.find(N=>N.infoDispositif.idDispositif===S);if(I){const{idCompte:N}=I.infoDispositif;return await B(N)}else return await B(void 0)}}),f:async B=>{if(B)return await x(B[S])},fSuivre:async({id:B,fSuivreBd:A})=>await this.suivreProtocolesMembre({f:A,idCompte:B})})}async rechercher({f:_,nRsultatsDsirs:x,fRecherche:S,fConfiance:E,fQualit:C,fObjectif:T,fScore:B}){B||(B=ve=>(ve.confiance+ve.qualit+ve.objectif.score)/3),T=T||rechercherTous();const A={},I={},N=3e3;let V,D=3,O=!1;const F=async ve=>{D=ve,await J(ve),V&&clearTimeout(V)},M=(ve=N)=>{if(O)return;V&&clearTimeout(V);const pe=Object.values(A).map(ie=>ie.rsultats).flat().map(ie=>ie.rsultatObjectif.score),G=pe.length>=x?Math.min(...pe.slice(0,x)):0,Y=Object.values(A).reduce(function(ie,ne){return ie[String(ne.membre.profondeur)]=ie[String(ne.membre.profondeur)]||[],ie[String(ne.membre.profondeur)].push(...ne.rsultats),ie},{}),W=Object.entries(Y).sort((ie,ne)=>Number(ie[0])<Number(ne[0])?-1:1).map(ie=>ie[1]).map(ie=>ie.filter(ne=>ne.rsultatObjectif.score>=G).length),ee=W.slice(W.length-3),re=W.slice(W.length-4),oe=Math.max(3,sum$2(ee)?D+1:sum$2(re)?D:D-1);oe>D?V=setTimeout(()=>F(oe),ve):oe<D&&F(oe)},L=async()=>{const pe=Object.values(A).map(G=>G.rsultats).flat().sort((G,Y)=>G.rsultatObjectif.score<Y.rsultatObjectif.score?1:-1);await _(pe.slice(0,x)),M()},j=async ve=>{const{idCompte:pe}=ve,G=async ee=>await S({idCompte:ve.idCompte,fSuivi:async re=>await ee(re||[])}),Y=async ee=>(A[pe].rsultats=ee,await L()),U=async(ee,re)=>{const oe={id:ee},ie=async()=>{const{objectif:ye,confiance:Ee,qualit:Re}=oe;if(ye&&Ee!==void 0&&Re!==void 0){const Ne={id:ee,rsultatObjectif:{...ye,score:B(oe)}};return await re(Ne)}else return await re(void 0)},ne=async ye=>(oe.objectif=ye,await ie()),te=await T(this.client,ee,ne),le=await E(ee,async ye=>(oe.confiance=ye,await ie())),be=await C(ee,async ye=>(oe.qualit=ye,await ie()));return async()=>{await Promise.all([te(),le(),be()])}};A[pe]={rsultats:[],membre:ve,mettreJour:L};const W=await this.client.suivreBdsDeFonctionListe({fListe:G,f:Y,fBranche:U});I[pe]=W},q=async ve=>{await I[ve](),delete A[ve],delete I[ve],await L()},H=new s,X=async ve=>{await H.acquire("rechercher"),ve=ve.filter(U=>U.confiance>=0);const pe=ve.filter(U=>!A[U.idCompte]),G=Object.keys(A).filter(U=>!ve.find(W=>W.idCompte===U)),Y=ve.filter(U=>{const W=A[U.idCompte];return W&&(U.confiance!==W.membre.confiance||U.profondeur!==W.membre.profondeur)});await Promise.all(pe.map(j)),await Promise.all(Y.map(async U=>await A[U.idCompte].mettreJour(U))),await Promise.all(G.map(U=>q(U))),H.release("rechercher")},{fChangerProfondeur:J,fOublier:Z}=await this.suivreComptesRseauEtEnLigne({f:X,profondeur:D});return{fChangerN:async ve=>{const pe=x;x=ve,ve!==pe&&(await L(),M(0))},fOublier:async()=>{O=!0,V&&clearTimeout(V),await Z(),await Promise.all(Object.values(I).map(ve=>ve()))}}}async rechercherMembres({f:_,nRsultatsDsirs:x,fObjectif:S}){const E=async(B,A)=>{const{fOublier:I}=await this.suivreConfianceMonRseauPourMembre({idCompte:B,f:A,profondeur:4});return I},C=async({idCompte:B,fSuivi:A})=>(await A([B]),faisRien),T=async(B,A)=>await rechercherProfilsSelonActivit()(this.client,B,N=>{A(N?.score||0)});return await this.rechercher({f:_,nRsultatsDsirs:x,fRecherche:C,fConfiance:E,fQualit:T,fObjectif:S})}async suivreConfianceAuteurs({idItem:_,clef:x,f:S}){const E=async A=>await this.suivreAuteursObjet({idObjet:_,clef:x,f:async I=>{const N=I.filter(V=>V.accept).map(V=>V.idCompte);return await A(N)}}),C=async(A,I)=>{const{fOublier:N}=await this.suivreConfianceMonRseauPourMembre({idCompte:A,f:I,profondeur:4});return N},T=async A=>{const I=A.reduce((N,V)=>N+V,0);await S(I)},B=A=>A.flat();return await this.client.suivreBdsDeFonctionListe({fListe:E,f:T,fBranche:C,fRduction:B})}async rechercherObjets({f:_,clef:x,nRsultatsDsirs:S,fRecherche:E,fRechercheLesMiens:C,fQualit:T,fObjectif:B,toutLeRseau:A=!0}){if(!A){const V=B||rechercherTous();return await this.client.suivreBdsDeFonctionListe({fListe:async D=>({fOublier:await C(D),fChangerN:()=>Promise.resolve()}),f:_,fBranche:async(D,O)=>await V(this.client,D,O)})}const I=async({idCompte:V,fSuivi:D})=>{const O={propres:[],favoris:[]},F=async()=>{const j=[...new Set([...O.propres,...O.favoris])];await D(j)},M=await E({idCompte:V,f:async j=>{O.propres=j||[],await F()}}),L=await this.suivreFavorisMembre({idCompte:V,f:async j=>{O.favoris=j?Object.keys(j):[],await F()}});return async()=>{await M(),await L()}},N=async(V,D)=>await this.suivreConfianceAuteurs({idItem:V,clef:x,f:D});return await this.rechercher({f:_,nRsultatsDsirs:S,fRecherche:I,fConfiance:N,fQualit:T,fObjectif:B})}async rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E=!0}){const C=this.suivreNuesMembre.bind(this),T=async(A,I)=>await this.client.nues.suivreQualitNue({idNue:A,f:I}),B=async A=>await this.client.nues.suivreNues({f:A});return await this.rechercherObjets({f:_,clef:"nues",nRsultatsDsirs:x,fRecherche:C,fRechercheLesMiens:B,fQualit:T,fObjectif:S,toutLeRseau:E})}async rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E=!0}){const C=this.suivreBdsMembre.bind(this),T=async(A,I)=>{const N=async V=>await I(V.total);return await this.client.bds.suivreQualitBd({idBd:A,f:N})},B=async A=>await this.client.bds.suivreBds({f:A});return await this.rechercherObjets({f:_,clef:"bds",nRsultatsDsirs:x,fRecherche:C,fRechercheLesMiens:B,fQualit:T,fObjectif:S,toutLeRseau:E})}async rechercherVariables({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E=!0}){const C=this.suivreVariablesMembre.bind(this),T=async(A,I)=>await this.client.variables.suivreQualitVariable({idVariable:A,f:I}),B=async A=>await this.client.variables.suivreVariables({f:A});return await this.rechercherObjets({f:_,clef:"variables",nRsultatsDsirs:x,fRecherche:C,fRechercheLesMiens:B,fQualit:T,fObjectif:S,toutLeRseau:E})}async rechercherMotsClefs({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E=!0}){const C=this.suivreMotsClefsMembre.bind(this),T=async(A,I)=>await this.client.motsClefs.suivreQualitMotClef({idMotClef:A,f:I}),B=async A=>await this.client.motsClefs.suivreMotsClefs({f:A});return await this.rechercherObjets({f:_,clef:"motsClefs",nRsultatsDsirs:x,fRecherche:C,fRechercheLesMiens:B,fQualit:T,fObjectif:S,toutLeRseau:E})}async rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E=!0}){const C=this.suivreProjetsMembre.bind(this),T=async(A,I)=>await this.client.projets.suivreQualitProjet({idProjet:A,f:I}),B=async A=>await this.client.projets.suivreProjets({f:A});return await this.rechercherObjets({f:_,clef:"projets",nRsultatsDsirs:x,fRecherche:C,fRechercheLesMiens:B,fQualit:T,fObjectif:S,toutLeRseau:E})}async suivreAuteursObjet({idObjet:_,clef:x,f:S}){const E=async I=>await this.client.suivreAccsBd({id:_,f:I}),C=async(I,N,V)=>{const D=async F=>(F=F||[],N([{idCompte:V.idCompte,rle:V.rle,accept:F.includes(_)}]));let O;switch(x){case"motsClefs":O=await this.client.motsClefs?.suivreMotsClefs({f:D,idCompte:I});break;case"variables":O=await this.client.variables?.suivreVariables({f:D,idCompte:I});break;case"bds":O=await this.client.bds?.suivreBds({f:D,idCompte:I});break;case"nues":O=await this.client.nues?.suivreNues({f:D,idCompte:I});break;case"projets":O=await this.client.projets?.suivreProjets({f:D,idCompte:I});break;default:throw new Error(x)}return O},T=I=>I.idCompte,B=I=>I.idCompte;return await this.client.suivreBdsDeFonctionListe({fListe:E,f:S,fBranche:C,fIdBdDeBranche:T,fCode:B})}async suivreAuteursMotClef({idMotClef:_,f:x}){return await this.suivreAuteursObjet({idObjet:_,clef:"motsClefs",f:x})}async suivreAuteursVariable({idVariable:_,f:x}){return await this.suivreAuteursObjet({idObjet:_,clef:"variables",f:x})}async suivreAuteursBd({idBd:_,f:x}){return await this.suivreAuteursObjet({idObjet:_,clef:"bds",f:x})}async suivreAuteursProjet({idProjet:_,f:x}){return await this.suivreAuteursObjet({idObjet:_,clef:"projets",f:x})}async suivreObjetsMembre({idCompte:_,fListeObjets:x,fSuivi:S}){return await this.client.suivreBdsSelonCondition({fListe:x,fCondition:async(E,C)=>await this.client.suivreAccsBd({id:E,f:T=>C(T.map(B=>B.idCompte).includes(_))}),f:S})}async suivreBdsMembre({idCompte:_,f:x}){return await this.suivreObjetsMembre({idCompte:_,fListeObjets:async S=>await this.client.bds.suivreBds({f:S,idCompte:_}),fSuivi:x})}async suivreProjetsMembre({idCompte:_,f:x}){return await this.suivreObjetsMembre({idCompte:_,fListeObjets:async S=>await this.client.projets.suivreProjets({f:S,idCompte:_}),fSuivi:x})}async suivreFavorisMembre({idCompte:_,f:x}){return await this.client.favoris.suivreFavoris({f:x,idCompte:_})}async suivreVariablesMembre({idCompte:_,f:x}){return await this.suivreObjetsMembre({idCompte:_,fListeObjets:async S=>await this.client.variables.suivreVariables({f:S,idCompte:_}),fSuivi:x})}async suivreMotsClefsMembre({idCompte:_,f:x}){return await this.suivreObjetsMembre({idCompte:_,fListeObjets:async S=>await this.client.motsClefs.suivreMotsClefs({f:S,idCompte:_}),fSuivi:x})}async suivreNuesMembre({idCompte:_,f:x}){return await this.suivreObjetsMembre({idCompte:_,fListeObjets:async S=>await this.client.nues.suivreNues({f:S,idCompte:_}),fSuivi:x})}async suivreFavorisObjet({idObjet:_,f:x,profondeur:S}){const E=async B=>{const A=B.filter(I=>I.idObjet===_);await x(A)},C=async B=>{const A=async I=>await B([this.client.idCompte,...I.map(N=>N.idCompte)]);return await this.suivreComptesRseauEtEnLigne({f:A,profondeur:S,idCompteDbut:this.client.idCompte})},T=async(B,A)=>await this.suivreFavorisMembre({idCompte:B,f:I=>A(I?I.map(N=>({idCompte:B,...N})):void 0)});return await this.client.suivreBdsDeFonctionRecherche({fListe:C,f:E,fBranche:T})}async suivreRplications({idObjet:_,f:x,profondeur:S}){const E={connexionsMembres:[],connexionsDispositifs:[],favoris:[]},C=async()=>{const{connexionsMembres:L,favoris:j}=E,q=j.map(Z=>Z.favoris.idCompte),H=L.filter(Z=>q.includes(Z.infoMembre.idCompte)),X=(await Promise.all(j.map(async Z=>{const{favoris:ae,dispositifs:ce}=Z;return await Promise.all(ce.map(async ve=>{const pe=E.connexionsDispositifs.find(U=>U.infoDispositif.idDispositif===ve)?.vu,G=E.connexionsDispositifs.find(U=>U.infoDispositif.idDispositif===ve)?.infoDispositif.idCompte;return{idObjet:_,idDispositif:ve,idCompte:G,bd:await this.client.favoris.estpinglSurDispositif({dispositifs:ae.dispositifs,idDispositif:ve}),fichiers:await this.client.favoris.estpinglSurDispositif({dispositifs:ae.dispositifsFichiers,idDispositif:ve}),rcursif:ae.rcursif,vu:pe}}))}))).flat();return await x({membres:H,dispositifs:X})},T=await this.suivreConnexionsMembres({f:async L=>(E.connexionsMembres=L,await C())}),B=await this.suivreConnexionsDispositifs({f:async L=>(E.connexionsDispositifs=L,await C())}),A=async L=>(E.favoris=L,await C()),I=async L=>await this.suivreFavorisObjet({idObjet:_,f:L,profondeur:S}),N=async(L,j,q)=>{const H=async J=>await j({favoris:q,dispositifs:J}),X=await this.client.suivreDispositifs({f:H,idCompte:L});return async()=>{await X()}},V=L=>L.idCompte,D=L=>L.idCompte,{fOublier:O,fChangerProfondeur:F}=await this.client.suivreBdsDeFonctionRecherche({fListe:I,f:A,fBranche:N,fIdBdDeBranche:V,fCode:D});return{fOublier:async()=>{await O(),await T(),await B()},fChangerProfondeur:F}}async suivreBdsDeNue({idNue:_,f:x,nRsultatsDsirs:S}){const E=async(T,B)=>await this.client.bds.rechercherBdsParNue({idNue:_,f:B,idCompte:T}),C=async T=>await this.suivreComptesRseauEtEnLigne({f:async B=>await T(B.map(A=>A.idCompte)),profondeur:S});return await this.client.suivreBdsDeFonctionRecherche({fListe:C,f:x,fBranche:E})}async suivrelmentsDeTableauxUniques({idNueUnique:_,clef:x,f:S,nBds:E=100}){const C=async I=>{const N=async D=>await this.suivreBdsDeNue({idNue:_,f:D,nRsultatsDsirs:E}),V=async(D,O)=>await this.suivreAuteursBd({idBd:D,f:async F=>{const M=F.find(j=>j.accept)?.idCompte;return await O(M?{bd:D,idCompte:M}:void 0)}});return await this.client.suivreBdsDeFonctionRecherche({fListe:N,f:I,fBranche:V})},T=async(I,N,V)=>{const{idCompte:D}=V;return await suivreBdDeFonction({fRacine:async({fSuivreRacine:L})=>await this.client.bds.suivreIdTableauParClef({idBd:I,clef:x,f:j=>{j&&L(j)}}),f:async L=>await N(L||[]),fSuivre:async({id:L,fSuivreBd:j})=>{const q=async H=>{const X=H.map(J=>({idCompte:D,lment:J}));return await j(X)};return await this.client.tableaux.suivreDonnes({idTableau:L,f:q})}})},B=I=>I.bd,A=I=>I.bd;return await this.client.suivreBdsDeFonctionRecherche({fListe:C,f:S,fBranche:T,fIdBdDeBranche:B,fCode:A})}async fermer(){this._ferm=!0,await Promise.all(this.fsOublier.map(_=>_()))}}__decorate([cacheSuivi],Rseau.prototype,"suivreFiables",null);__decorate([cacheSuivi],Rseau.prototype,"suivreBloqusPubliques",null);__decorate([cacheSuivi],Rseau.prototype,"suivreBloqus",null);__decorate([cacheSuivi],Rseau.prototype,"suivreRelationsImmdiates",null);__decorate([cacheRechercheParProfondeur],Rseau.prototype,"suivreRelationsConfiance",null);__decorate([cacheRechercheParProfondeur],Rseau.prototype,"suivreComptesRseau",null);__decorate([cacheSuivi],Rseau.prototype,"suivreConnexionsPostesSFIP",null);__decorate([cacheSuivi],Rseau.prototype,"suivreConnexionsDispositifs",null);__decorate([cacheSuivi],Rseau.prototype,"suivreConnexionsMembres",null);__decorate([cacheSuivi],Rseau.prototype,"suivreProtocolesMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreProtocolesDispositif",null);__decorate([cacheSuivi],Rseau.prototype,"suivreAuteursObjet",null);__decorate([cacheSuivi],Rseau.prototype,"suivreBdsMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreProjetsMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreFavorisMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreVariablesMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreMotsClefsMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreNuesMembre",null);__decorate([cacheRechercheParNRsultats],Rseau.prototype,"suivreBdsDeNue",null);var base64={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var r=function(n,_){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,S){x.__proto__=S}||function(x,S){for(var E in S)S.hasOwnProperty(E)&&(x[E]=S[E])},r(n,_)};return function(n,_){r(n,_);function x(){this.constructor=n}n.prototype=_===null?Object.create(_):(x.prototype=_.prototype,new x)}}();Object.defineProperty(base64,"__esModule",{value:!0});var INVALID_BYTE=256,Coder=function(){function r(n){n===void 0&&(n="="),this._paddingCharacter=n}return r.prototype.encodedLength=function(n){return this._paddingCharacter?(n+2)/3*4|0:(n*8+5)/6|0},r.prototype.encode=function(n){for(var _="",x=0;x<n.length-2;x+=3){var S=n[x]<<16|n[x+1]<<8|n[x+2];_+=this._encodeByte(S>>>3*6&63),_+=this._encodeByte(S>>>2*6&63),_+=this._encodeByte(S>>>1*6&63),_+=this._encodeByte(S>>>0*6&63)}var E=n.length-x;if(E>0){var S=n[x]<<16|(E===2?n[x+1]<<8:0);_+=this._encodeByte(S>>>3*6&63),_+=this._encodeByte(S>>>2*6&63),E===2?_+=this._encodeByte(S>>>1*6&63):_+=this._paddingCharacter||"",_+=this._paddingCharacter||""}return _},r.prototype.maxDecodedLength=function(n){return this._paddingCharacter?n/4*3|0:(n*6+7)/8|0},r.prototype.decodedLength=function(n){return this.maxDecodedLength(n.length-this._getPaddingLength(n))},r.prototype.decode=function(n){if(n.length===0)return new Uint8Array(0);for(var _=this._getPaddingLength(n),x=n.length-_,S=new Uint8Array(this.maxDecodedLength(x)),E=0,C=0,T=0,B=0,A=0,I=0,N=0;C<x-4;C+=4)B=this._decodeChar(n.charCodeAt(C+0)),A=this._decodeChar(n.charCodeAt(C+1)),I=this._decodeChar(n.charCodeAt(C+2)),N=this._decodeChar(n.charCodeAt(C+3)),S[E++]=B<<2|A>>>4,S[E++]=A<<4|I>>>2,S[E++]=I<<6|N,T|=B&INVALID_BYTE,T|=A&INVALID_BYTE,T|=I&INVALID_BYTE,T|=N&INVALID_BYTE;if(C<x-1&&(B=this._decodeChar(n.charCodeAt(C)),A=this._decodeChar(n.charCodeAt(C+1)),S[E++]=B<<2|A>>>4,T|=B&INVALID_BYTE,T|=A&INVALID_BYTE),C<x-2&&(I=this._decodeChar(n.charCodeAt(C+2)),S[E++]=A<<4|I>>>2,T|=I&INVALID_BYTE),C<x-3&&(N=this._decodeChar(n.charCodeAt(C+3)),S[E++]=I<<6|N,T|=N&INVALID_BYTE),T!==0)throw new Error("Base64Coder: incorrect characters for decoding");return S},r.prototype._encodeByte=function(n){var _=n;return _+=65,_+=25-n>>>8&0-65-26+97,_+=51-n>>>8&26-97-52+48,_+=61-n>>>8&52-48-62+43,_+=62-n>>>8&62-43-63+47,String.fromCharCode(_)},r.prototype._decodeChar=function(n){var _=INVALID_BYTE;return _+=(42-n&n-44)>>>8&-INVALID_BYTE+n-43+62,_+=(46-n&n-48)>>>8&-INVALID_BYTE+n-47+63,_+=(47-n&n-58)>>>8&-INVALID_BYTE+n-48+52,_+=(64-n&n-91)>>>8&-INVALID_BYTE+n-65+0,_+=(96-n&n-123)>>>8&-INVALID_BYTE+n-97+26,_},r.prototype._getPaddingLength=function(n){var _=0;if(this._paddingCharacter){for(var x=n.length-1;x>=0&&n[x]===this._paddingCharacter;x--)_++;if(n.length<4||_>2)throw new Error("Base64Coder: incorrect padding")}return _},r}();base64.Coder=Coder;var stdCoder=new Coder;function encode$4(r){return stdCoder.encode(r)}var encode_1$1=base64.encode=encode$4;function decode$3(r){return stdCoder.decode(r)}var decode_1$1=base64.decode=decode$3,URLSafeCoder=function(r){__extends(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.prototype._encodeByte=function(_){var x=_;return x+=65,x+=25-_>>>8&0-65-26+97,x+=51-_>>>8&26-97-52+48,x+=61-_>>>8&52-48-62+45,x+=62-_>>>8&62-45-63+95,String.fromCharCode(x)},n.prototype._decodeChar=function(_){var x=INVALID_BYTE;return x+=(44-_&_-46)>>>8&-INVALID_BYTE+_-45+62,x+=(94-_&_-96)>>>8&-INVALID_BYTE+_-95+63,x+=(47-_&_-58)>>>8&-INVALID_BYTE+_-48+52,x+=(64-_&_-91)>>>8&-INVALID_BYTE+_-65+0,x+=(96-_&_-123)>>>8&-INVALID_BYTE+_-97+26,x},n}(Coder);base64.URLSafeCoder=URLSafeCoder;var urlSafeCoder=new URLSafeCoder;function encodeURLSafe(r){return urlSafeCoder.encode(r)}base64.encodeURLSafe=encodeURLSafe;function decodeURLSafe(r){return urlSafeCoder.decode(r)}base64.decodeURLSafe=decodeURLSafe;base64.encodedLength=function(r){return stdCoder.encodedLength(r)};base64.maxDecodedLength=function(r){return stdCoder.maxDecodedLength(r)};base64.decodedLength=function(r){return stdCoder.decodedLength(r)};var utf8$2={};Object.defineProperty(utf8$2,"__esModule",{value:!0});var INVALID_UTF16="utf8: invalid string",INVALID_UTF8="utf8: invalid source encoding";function encode$3(r){for(var n=new Uint8Array(encodedLength(r)),_=0,x=0;x<r.length;x++){var S=r.charCodeAt(x);S<128?n[_++]=S:S<2048?(n[_++]=192|S>>6,n[_++]=128|S&63):S<55296?(n[_++]=224|S>>12,n[_++]=128|S>>6&63,n[_++]=128|S&63):(x++,S=(S&1023)<<10,S|=r.charCodeAt(x)&1023,S+=65536,n[_++]=240|S>>18,n[_++]=128|S>>12&63,n[_++]=128|S>>6&63,n[_++]=128|S&63)}return n}var encode_1=utf8$2.encode=encode$3;function encodedLength(r){for(var n=0,_=0;_<r.length;_++){var x=r.charCodeAt(_);if(x<128)n+=1;else if(x<2048)n+=2;else if(x<55296)n+=3;else if(x<=57343){if(_>=r.length-1)throw new Error(INVALID_UTF16);_++,n+=4}else throw new Error(INVALID_UTF16)}return n}var encodedLength_1=utf8$2.encodedLength=encodedLength;function decode$2(r){for(var n=[],_=0;_<r.length;_++){var x=r[_];if(x&128){var S=void 0;if(x<224){if(_>=r.length)throw new Error(INVALID_UTF8);var E=r[++_];if((E&192)!==128)throw new Error(INVALID_UTF8);x=(x&31)<<6|E&63,S=128}else if(x<240){if(_>=r.length-1)throw new Error(INVALID_UTF8);var E=r[++_],C=r[++_];if((E&192)!==128||(C&192)!==128)throw new Error(INVALID_UTF8);x=(x&15)<<12|(E&63)<<6|C&63,S=2048}else if(x<248){if(_>=r.length-2)throw new Error(INVALID_UTF8);var E=r[++_],C=r[++_],T=r[++_];if((E&192)!==128||(C&192)!==128||(T&192)!==128)throw new Error(INVALID_UTF8);x=(x&15)<<18|(E&63)<<12|(C&63)<<6|T&63,S=65536}else throw new Error(INVALID_UTF8);if(x<S||x>=55296&&x<=57343)throw new Error(INVALID_UTF8);if(x>=65536){if(x>1114111)throw new Error(INVALID_UTF8);x-=65536,n.push(String.fromCharCode(55296|x>>10)),x=56320|x&1023}}n.push(String.fromCharCode(x))}return n.join("")}var decode_1=utf8$2.decode=decode$2;const utf8$1=_mergeNamespaces({__proto__:null,decode:decode_1,default:utf8$2,encode:encode_1,encodedLength:encodedLength_1},[utf8$2]);var browser$1={},encode$2={},encodeBuffer={},writeCore={},extBuffer={},bufferish={},bufferGlobal=c(typeof Buffer$5<"u"&&Buffer$5)||c(commonjsGlobal.Buffer)||c(typeof window<"u"&&window.Buffer)||commonjsGlobal.Buffer;function c(r){return r&&r.isBuffer&&r}var toString$2={}.toString,isarray=Array.isArray||function(r){return toString$2.call(r)=="[object Array]"},bufferishArray={exports:{}},hasRequiredBufferishArray;function requireBufferishArray(){if(hasRequiredBufferishArray)return bufferishArray.exports;hasRequiredBufferishArray=1;var r=requireBufferish(),n=bufferishArray.exports=_(0);n.alloc=_,n.concat=r.concat,n.from=x;function _(S){return new Array(S)}function x(S){if(!r.isBuffer(S)&&r.isView(S))S=r.Uint8Array.from(S);else if(r.isArrayBuffer(S))S=new Uint8Array(S);else{if(typeof S=="string")return r.from.call(n,S);if(typeof S=="number")throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(S)}return bufferishArray.exports}var bufferishBuffer={exports:{}},hasRequiredBufferishBuffer;function requireBufferishBuffer(){if(hasRequiredBufferishBuffer)return bufferishBuffer.exports;hasRequiredBufferishBuffer=1;var r=requireBufferish(),n=r.global,_=bufferishBuffer.exports=r.hasBuffer?x(0):[];_.alloc=r.hasBuffer&&n.alloc||x,_.concat=r.concat,_.from=S;function x(E){return new n(E)}function S(E){if(!r.isBuffer(E)&&r.isView(E))E=r.Uint8Array.from(E);else if(r.isArrayBuffer(E))E=new Uint8Array(E);else{if(typeof E=="string")return r.from.call(_,E);if(typeof E=="number")throw new TypeError('"value" argument must not be a number')}return n.from&&n.from.length!==1?n.from(E):new n(E)}return bufferishBuffer.exports}var bufferishUint8array={exports:{}},hasRequiredBufferishUint8array;function requireBufferishUint8array(){if(hasRequiredBufferishUint8array)return bufferishUint8array.exports;hasRequiredBufferishUint8array=1;var r=requireBufferish(),n=bufferishUint8array.exports=r.hasArrayBuffer?_(0):[];n.alloc=_,n.concat=r.concat,n.from=x;function _(S){return new Uint8Array(S)}function x(S){if(r.isView(S)){var E=S.byteOffset,C=S.byteLength;S=S.buffer,S.byteLength!==C&&(S.slice?S=S.slice(E,E+C):(S=new Uint8Array(S),S.byteLength!==C&&(S=Array.prototype.slice.call(S,E,E+C))))}else{if(typeof S=="string")return r.from.call(n,S);if(typeof S=="number")throw new TypeError('"value" argument must not be a number')}return new Uint8Array(S)}return bufferishUint8array.exports}var bufferishProto={},bufferLite={};bufferLite.copy=copy;bufferLite.toString=toString$1;bufferLite.write=write$1;function write$1(r,n){for(var _=this,x=n||(n|=0),S=r.length,E=0,C=0;C<S;)E=r.charCodeAt(C++),E<128?_[x++]=E:E<2048?(_[x++]=192|E>>>6,_[x++]=128|E&63):E<55296||E>57343?(_[x++]=224|E>>>12,_[x++]=128|E>>>6&63,_[x++]=128|E&63):(E=(E-55296<<10|r.charCodeAt(C++)-56320)+65536,_[x++]=240|E>>>18,_[x++]=128|E>>>12&63,_[x++]=128|E>>>6&63,_[x++]=128|E&63);return x-n}function toString$1(r,n,_){var x=this,S=n|0;_||(_=x.length);for(var E="",C=0;S<_;){if(C=x[S++],C<128){E+=String.fromCharCode(C);continue}(C&224)===192?C=(C&31)<<6|x[S++]&63:(C&240)===224?C=(C&15)<<12|(x[S++]&63)<<6|x[S++]&63:(C&248)===240&&(C=(C&7)<<18|(x[S++]&63)<<12|(x[S++]&63)<<6|x[S++]&63),C>=65536?(C-=65536,E+=String.fromCharCode((C>>>10)+55296,(C&1023)+56320)):E+=String.fromCharCode(C)}return E}function copy(r,n,_,x){var S;_||(_=0),!x&&x!==0&&(x=this.length),n||(n=0);var E=x-_;if(r===this&&_<n&&n<x)for(S=E-1;S>=0;S--)r[S+n]=this[S+_];else for(S=0;S<E;S++)r[S+n]=this[S+_];return E}var hasRequiredBufferishProto;function requireBufferishProto(){if(hasRequiredBufferishProto)return bufferishProto;hasRequiredBufferishProto=1;var r=bufferLite;bufferishProto.copy=E,bufferishProto.slice=C,bufferishProto.toString=T,bufferishProto.write=B("write");var n=requireBufferish(),_=n.global,x=n.hasBuffer&&"TYPED_ARRAY_SUPPORT"in _,S=x&&!_.TYPED_ARRAY_SUPPORT;function E(A,I,N,V){var D=n.isBuffer(this),O=n.isBuffer(A);if(D&&O)return this.copy(A,I,N,V);if(!S&&!D&&!O&&n.isView(this)&&n.isView(A)){var F=N||V!=null?C.call(this,N,V):this;return A.set(F,I),F.length}else return r.copy.call(this,A,I,N,V)}function C(A,I){var N=this.slice||!S&&this.subarray;if(N)return N.call(this,A,I);var V=n.alloc.call(this,I-A);return E.call(this,V,0,A,I),V}function T(A,I,N){var V=!x&&n.isBuffer(this)?this.toString:r.toString;return V.apply(this,arguments)}function B(A){return I;function I(){var N=this[A]||r[A];return N.apply(this,arguments)}}return bufferishProto}var hasRequiredBufferish;function requireBufferish(){return hasRequiredBufferish||(hasRequiredBufferish=1,function(r){var n=r.global=bufferGlobal,_=r.hasBuffer=n&&!!n.isBuffer,x=r.hasArrayBuffer=typeof ArrayBuffer<"u",S=r.isArray=isarray;r.isArrayBuffer=x?F:j;var E=r.isBuffer=_?n.isBuffer:j,C=r.isView=x?ArrayBuffer.isView||q("ArrayBuffer","buffer"):j;r.alloc=V,r.concat=D,r.from=N;var T=r.Array=requireBufferishArray(),B=r.Buffer=requireBufferishBuffer(),A=r.Uint8Array=requireBufferishUint8array(),I=r.prototype=requireBufferishProto();function N(H){return typeof H=="string"?M.call(this,H):L(this).from(H)}function V(H){return L(this).alloc(H)}function D(H,X){X||(X=0,Array.prototype.forEach.call(H,ce));var J=this!==r&&this||H[0],Z=V.call(J,X),ae=0;return Array.prototype.forEach.call(H,ve),Z;function ce(pe){X+=pe.length}function ve(pe){ae+=I.copy.call(pe,Z,ae)}}var O=q("ArrayBuffer");function F(H){return H instanceof ArrayBuffer||O(H)}function M(H){var X=H.length*3,J=V.call(this,X),Z=I.write.call(J,H);return X!==Z&&(J=I.slice.call(J,0,Z)),J}function L(H){return E(H)?B:C(H)?A:S(H)?T:_?B:x?A:T}function j(){return!1}function q(H,X){return H="[object "+H+"]",function(J){return J!=null&&{}.toString.call(X?J[X]:J)===H}}}(bufferish)),bufferish}extBuffer.ExtBuffer=ExtBuffer$1;var Bufferish$5=requireBufferish();function ExtBuffer$1(r,n){if(!(this instanceof ExtBuffer$1))return new ExtBuffer$1(r,n);this.buffer=Bufferish$5.from(r),this.type=n}var extPacker={},hasRequiredExtPacker;function requireExtPacker(){if(hasRequiredExtPacker)return extPacker;hasRequiredExtPacker=1,extPacker.setExtPackers=E;var r=requireBufferish(),n=r.global,_=r.Uint8Array.from,x,S={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function E(I){I.addExtPacker(14,Error,[A,C]),I.addExtPacker(1,EvalError,[A,C]),I.addExtPacker(2,RangeError,[A,C]),I.addExtPacker(3,ReferenceError,[A,C]),I.addExtPacker(4,SyntaxError,[A,C]),I.addExtPacker(5,TypeError,[A,C]),I.addExtPacker(6,URIError,[A,C]),I.addExtPacker(10,RegExp,[B,C]),I.addExtPacker(11,Boolean,[T,C]),I.addExtPacker(12,String,[T,C]),I.addExtPacker(13,Date,[Number,C]),I.addExtPacker(15,Number,[T,C]),typeof Uint8Array<"u"&&(I.addExtPacker(17,Int8Array,_),I.addExtPacker(18,Uint8Array,_),I.addExtPacker(19,Int16Array,_),I.addExtPacker(20,Uint16Array,_),I.addExtPacker(21,Int32Array,_),I.addExtPacker(22,Uint32Array,_),I.addExtPacker(23,Float32Array,_),typeof Float64Array<"u"&&I.addExtPacker(24,Float64Array,_),typeof Uint8ClampedArray<"u"&&I.addExtPacker(25,Uint8ClampedArray,_),I.addExtPacker(26,ArrayBuffer,_),I.addExtPacker(29,DataView,_)),r.hasBuffer&&I.addExtPacker(27,n,r.from)}function C(I){return x||(x=requireEncode().encode),x(I)}function T(I){return I.valueOf()}function B(I){I=RegExp.prototype.toString.call(I).split("/"),I.shift();var N=[I.pop()];return N.unshift(I.join("/")),N}function A(I){var N={};for(var V in S)N[V]=I[V];return N}return extPacker}var writeType={},int64Buffer={};(function(r){(function(n){var _="undefined",x=_!==typeof Buffer$5&&Buffer$5,S=_!==typeof Uint8Array&&Uint8Array,E=_!==typeof ArrayBuffer&&ArrayBuffer,C=[0,0,0,0,0,0,0,0],T=Array.isArray||J,B=4294967296,A=16777216,I;N("Uint64BE",!0,!0),N("Int64BE",!0,!1),N("Uint64LE",!1,!0),N("Int64LE",!1,!1);function N(Z,ae,ce){var ve=ae?0:4,pe=ae?4:0,G=ae?0:3,Y=ae?1:2,U=ae?2:1,W=ae?3:0,ee=ae?j:H,re=ae?q:X,oe=te.prototype,ie="is"+Z,ne="_"+ie;return oe.buffer=void 0,oe.offset=0,oe[ne]=!0,oe.toNumber=be,oe.toString=ge,oe.toJSON=be,oe.toArray=V,x&&(oe.toBuffer=D),S&&(oe.toArrayBuffer=O),te[ie]=K,n[Z]=te,te;function te(Re,Ne,Te,he){return this instanceof te?le(this,Re,Ne,Te,he):new te(Re,Ne,Te,he)}function K(Re){return!!(Re&&Re[ne])}function le(Re,Ne,Te,he,xe){if(S&&E&&(Ne instanceof E&&(Ne=new S(Ne)),he instanceof E&&(he=new S(he))),!Ne&&!Te&&!he&&!I){Re.buffer=L(C,0);return}if(!F(Ne,Te)){var fe=I||Array;xe=Te,he=Ne,Te=0,Ne=new fe(8)}Re.buffer=Ne,Re.offset=Te|=0,_!==typeof he&&(typeof he=="string"?ue(Ne,Te,he,xe||10):F(he,xe)?M(Ne,Te,he,xe):typeof xe=="number"?(ye(Ne,Te+ve,he),ye(Ne,Te+pe,xe)):he>0?ee(Ne,Te,he):he<0?re(Ne,Te,he):M(Ne,Te,C,0))}function ue(Re,Ne,Te,he){var xe=0,fe=Te.length,Be=0,Le=0;Te[0]==="-"&&xe++;for(var Ve=xe;xe<fe;){var Ie=parseInt(Te[xe++],he);if(!(Ie>=0))break;Le=Le*he+Ie,Be=Be*he+Math.floor(Le/B),Le%=B}Ve&&(Be=~Be,Le?Le=B-Le:Be++),ye(Re,Ne+ve,Be),ye(Re,Ne+pe,Le)}function be(){var Re=this.buffer,Ne=this.offset,Te=Ee(Re,Ne+ve),he=Ee(Re,Ne+pe);return ce||(Te|=0),Te?Te*B+he:he}function ge(Re){var Ne=this.buffer,Te=this.offset,he=Ee(Ne,Te+ve),xe=Ee(Ne,Te+pe),fe="",Be=!ce&&he&2147483648;for(Be&&(he=~he,xe=B-xe),Re=Re||10;;){var Le=he%Re*B+xe;if(he=Math.floor(he/Re),xe=Math.floor(Le/Re),fe=(Le%Re).toString(Re)+fe,!he&&!xe)break}return Be&&(fe="-"+fe),fe}function ye(Re,Ne,Te){Re[Ne+W]=Te&255,Te=Te>>8,Re[Ne+U]=Te&255,Te=Te>>8,Re[Ne+Y]=Te&255,Te=Te>>8,Re[Ne+G]=Te&255}function Ee(Re,Ne){return Re[Ne+G]*A+(Re[Ne+Y]<<16)+(Re[Ne+U]<<8)+Re[Ne+W]}}function V(Z){var ae=this.buffer,ce=this.offset;return I=null,Z!==!1&&ce===0&&ae.length===8&&T(ae)?ae:L(ae,ce)}function D(Z){var ae=this.buffer,ce=this.offset;if(I=x,Z!==!1&&ce===0&&ae.length===8&&Buffer$5.isBuffer(ae))return ae;var ve=new x(8);return M(ve,0,ae,ce),ve}function O(Z){var ae=this.buffer,ce=this.offset,ve=ae.buffer;if(I=S,Z!==!1&&ce===0&&ve instanceof E&&ve.byteLength===8)return ve;var pe=new S(8);return M(pe,0,ae,ce),pe.buffer}function F(Z,ae){var ce=Z&&Z.length;return ae|=0,ce&&ae+8<=ce&&typeof Z[ae]!="string"}function M(Z,ae,ce,ve){ae|=0,ve|=0;for(var pe=0;pe<8;pe++)Z[ae++]=ce[ve++]&255}function L(Z,ae){return Array.prototype.slice.call(Z,ae,ae+8)}function j(Z,ae,ce){for(var ve=ae+8;ve>ae;)Z[--ve]=ce&255,ce/=256}function q(Z,ae,ce){var ve=ae+8;for(ce++;ve>ae;)Z[--ve]=-ce&255^255,ce/=256}function H(Z,ae,ce){for(var ve=ae+8;ae<ve;)Z[ae++]=ce&255,ce/=256}function X(Z,ae,ce){var ve=ae+8;for(ce++;ae<ve;)Z[ae++]=-ce&255^255,ce/=256}function J(Z){return!!Z&&Object.prototype.toString.call(Z)=="[object Array]"}})(typeof r.nodeName!="string"?r:commonjsGlobal||{})})(int64Buffer);var writeToken={},writeUint8={},constant$1=writeUint8.uint8=new Array(256);for(var i=0;i<=255;i++)constant$1[i]=write0(i);function write0(r){return function(n){var _=n.reserve(1);n.buffer[_]=r}}var ieee754$1=ieee754$2,Int64Buffer$2=int64Buffer,Uint64BE$2=Int64Buffer$2.Uint64BE,Int64BE$2=Int64Buffer$2.Int64BE,uint8$2=writeUint8.uint8,Bufferish$4=requireBufferish(),Buffer$1=Bufferish$4.global,IS_BUFFER_SHIM=Bufferish$4.hasBuffer&&"TYPED_ARRAY_SUPPORT"in Buffer$1,NO_TYPED_ARRAY=IS_BUFFER_SHIM&&!Buffer$1.TYPED_ARRAY_SUPPORT,Buffer_prototype=Bufferish$4.hasBuffer&&Buffer$1.prototype||{};writeToken.getWriteToken=getWriteToken;function getWriteToken(r){return r&&r.uint8array?init_uint8array():NO_TYPED_ARRAY||Bufferish$4.hasBuffer&&r&&r.safe?init_safe():init_token$1()}function init_uint8array(){var r=init_token$1();return r[202]=writeN(202,4,writeFloatBE),r[203]=writeN(203,8,writeDoubleBE),r}function init_token$1(){var r=uint8$2.slice();return r[196]=write1(196),r[197]=write2(197),r[198]=write4(198),r[199]=write1(199),r[200]=write2(200),r[201]=write4(201),r[202]=writeN(202,4,Buffer_prototype.writeFloatBE||writeFloatBE,!0),r[203]=writeN(203,8,Buffer_prototype.writeDoubleBE||writeDoubleBE,!0),r[204]=write1(204),r[205]=write2(205),r[206]=write4(206),r[207]=writeN(207,8,writeUInt64BE),r[208]=write1(208),r[209]=write2(209),r[210]=write4(210),r[211]=writeN(211,8,writeInt64BE),r[217]=write1(217),r[218]=write2(218),r[219]=write4(219),r[220]=write2(220),r[221]=write4(221),r[222]=write2(222),r[223]=write4(223),r}function init_safe(){var r=uint8$2.slice();return r[196]=writeN(196,1,Buffer$1.prototype.writeUInt8),r[197]=writeN(197,2,Buffer$1.prototype.writeUInt16BE),r[198]=writeN(198,4,Buffer$1.prototype.writeUInt32BE),r[199]=writeN(199,1,Buffer$1.prototype.writeUInt8),r[200]=writeN(200,2,Buffer$1.prototype.writeUInt16BE),r[201]=writeN(201,4,Buffer$1.prototype.writeUInt32BE),r[202]=writeN(202,4,Buffer$1.prototype.writeFloatBE),r[203]=writeN(203,8,Buffer$1.prototype.writeDoubleBE),r[204]=writeN(204,1,Buffer$1.prototype.writeUInt8),r[205]=writeN(205,2,Buffer$1.prototype.writeUInt16BE),r[206]=writeN(206,4,Buffer$1.prototype.writeUInt32BE),r[207]=writeN(207,8,writeUInt64BE),r[208]=writeN(208,1,Buffer$1.prototype.writeInt8),r[209]=writeN(209,2,Buffer$1.prototype.writeInt16BE),r[210]=writeN(210,4,Buffer$1.prototype.writeInt32BE),r[211]=writeN(211,8,writeInt64BE),r[217]=writeN(217,1,Buffer$1.prototype.writeUInt8),r[218]=writeN(218,2,Buffer$1.prototype.writeUInt16BE),r[219]=writeN(219,4,Buffer$1.prototype.writeUInt32BE),r[220]=writeN(220,2,Buffer$1.prototype.writeUInt16BE),r[221]=writeN(221,4,Buffer$1.prototype.writeUInt32BE),r[222]=writeN(222,2,Buffer$1.prototype.writeUInt16BE),r[223]=writeN(223,4,Buffer$1.prototype.writeUInt32BE),r}function write1(r){return function(n,_){var x=n.reserve(2),S=n.buffer;S[x++]=r,S[x]=_}}function write2(r){return function(n,_){var x=n.reserve(3),S=n.buffer;S[x++]=r,S[x++]=_>>>8,S[x]=_}}function write4(r){return function(n,_){var x=n.reserve(5),S=n.buffer;S[x++]=r,S[x++]=_>>>24,S[x++]=_>>>16,S[x++]=_>>>8,S[x]=_}}function writeN(r,n,_,x){return function(S,E){var C=S.reserve(n+1);S.buffer[C++]=r,_.call(S.buffer,E,C,x)}}function writeUInt64BE(r,n){new Uint64BE$2(this,n,r)}function writeInt64BE(r,n){new Int64BE$2(this,n,r)}function writeFloatBE(r,n){ieee754$1.write(this,r,n,!1,23,4)}function writeDoubleBE(r,n){ieee754$1.write(this,r,n,!1,52,8)}var IS_ARRAY$1=isarray,Int64Buffer$1=int64Buffer,Uint64BE$1=Int64Buffer$1.Uint64BE,Int64BE$1=Int64Buffer$1.Int64BE,Bufferish$3=requireBufferish(),BufferProto$1=requireBufferishProto(),WriteToken=writeToken,uint8$1=writeUint8.uint8,ExtBuffer=extBuffer.ExtBuffer,HAS_UINT8ARRAY=typeof Uint8Array<"u",HAS_MAP$1=typeof Map<"u",extmap=[];extmap[1]=212;extmap[2]=213;extmap[4]=214;extmap[8]=215;extmap[16]=216;writeType.getWriteType=getWriteType;function getWriteType(r){var n=WriteToken.getWriteToken(r),_=r&&r.useraw,x=HAS_UINT8ARRAY&&r&&r.binarraybuffer,S=x?Bufferish$3.isArrayBuffer:Bufferish$3.isBuffer,E=x?X:H,C=HAS_MAP$1&&r&&r.usemap,T=C?ae:Z,B={boolean:A,function:j,number:I,object:_?L:M,string:F(_?O:D),symbol:j,undefined:j};return B;function A(ve,pe){var G=pe?195:194;n[G](ve,pe)}function I(ve,pe){var G=pe|0,Y;if(pe!==G){Y=203,n[Y](ve,pe);return}else-32<=G&&G<=127?Y=G&255:0<=G?Y=G<=255?204:G<=65535?205:206:Y=-128<=G?208:-32768<=G?209:210;n[Y](ve,G)}function N(ve,pe){var G=207;n[G](ve,pe.toArray())}function V(ve,pe){var G=211;n[G](ve,pe.toArray())}function D(ve){return ve<32?1:ve<=255?2:ve<=65535?3:5}function O(ve){return ve<32?1:ve<=65535?3:5}function F(ve){return pe;function pe(G,Y){var U=Y.length,W=5+U*3;G.offset=G.reserve(W);var ee=G.buffer,re=ve(U),oe=G.offset+re;U=BufferProto$1.write.call(ee,Y,oe);var ie=ve(U);if(re!==ie){var ne=oe+ie-re,te=oe+U;BufferProto$1.copy.call(ee,ee,ne,oe,te)}var K=ie===1?160+U:ie<=3?215+ie:219;n[K](G,U),G.offset+=U}}function M(ve,pe){if(pe===null)return j(ve,pe);if(S(pe))return E(ve,pe);if(IS_ARRAY$1(pe))return q(ve,pe);if(Uint64BE$1.isUint64BE(pe))return N(ve,pe);if(Int64BE$1.isInt64BE(pe))return V(ve,pe);var G=ve.codec.getExtPacker(pe);if(G&&(pe=G(pe)),pe instanceof ExtBuffer)return J(ve,pe);T(ve,pe)}function L(ve,pe){if(S(pe))return ce(ve,pe);M(ve,pe)}function j(ve,pe){var G=192;n[G](ve,pe)}function q(ve,pe){var G=pe.length,Y=G<16?144+G:G<=65535?220:221;n[Y](ve,G);for(var U=ve.codec.encode,W=0;W<G;W++)U(ve,pe[W])}function H(ve,pe){var G=pe.length,Y=G<255?196:G<=65535?197:198;n[Y](ve,G),ve.send(pe)}function X(ve,pe){H(ve,new Uint8Array(pe))}function J(ve,pe){var G=pe.buffer,Y=G.length,U=extmap[Y]||(Y<255?199:Y<=65535?200:201);n[U](ve,Y),uint8$1[pe.type](ve),ve.send(G)}function Z(ve,pe){var G=Object.keys(pe),Y=G.length,U=Y<16?128+Y:Y<=65535?222:223;n[U](ve,Y);var W=ve.codec.encode;G.forEach(function(ee){W(ve,ee),W(ve,pe[ee])})}function ae(ve,pe){if(!(pe instanceof Map))return Z(ve,pe);var G=pe.size,Y=G<16?128+G:G<=65535?222:223;n[Y](ve,G);var U=ve.codec.encode;pe.forEach(function(W,ee,re){U(ve,ee),U(ve,W)})}function ce(ve,pe){var G=pe.length,Y=G<32?160+G:G<=65535?218:219;n[Y](ve,G),ve.send(pe)}}var codecBase={},IS_ARRAY=isarray;codecBase.createCodec=createCodec;codecBase.install=install;codecBase.filter=filter;var Bufferish$2=requireBufferish();function Codec(r){if(!(this instanceof Codec))return new Codec(r);this.options=r,this.init()}Codec.prototype.init=function(){var r=this.options;return r&&r.uint8array&&(this.bufferish=Bufferish$2.Uint8Array),this};function install(r){for(var n in r)Codec.prototype[n]=add(Codec.prototype[n],r[n])}function add(r,n){return r&&n?_:r||n;function _(){return r.apply(this,arguments),n.apply(this,arguments)}}function join(r){return r=r.slice(),function(_){return r.reduce(n,_)};function n(_,x){return x(_)}}function filter(r){return IS_ARRAY(r)?join(r):r}function createCodec(r){return new Codec(r)}codecBase.preset=createCodec({preset:!0});var hasRequiredWriteCore;function requireWriteCore(){if(hasRequiredWriteCore)return writeCore;hasRequiredWriteCore=1;var r=extBuffer.ExtBuffer,n=requireExtPacker(),_=writeType,x=codecBase;x.install({addExtPacker:C,getExtPacker:T,init:E}),writeCore.preset=E.call(x.preset);function S(B){var A=_.getWriteType(B);return I;function I(N,V){var D=A[typeof V];if(!D)throw new Error('Unsupported type "'+typeof V+'": '+V);D(N,V)}}function E(){var B=this.options;return this.encode=S(B),B&&B.preset&&n.setExtPackers(this),this}function C(B,A,I){I=x.filter(I);var N=A.name;if(N&&N!=="Object"){var V=this.extPackers||(this.extPackers={});V[N]=O}else{var D=this.extEncoderList||(this.extEncoderList=[]);D.unshift([A,O])}function O(F){return I&&(F=I(F)),new r(F,B)}}function T(B){var A=this.extPackers||(this.extPackers={}),I=B.constructor,N=I&&I.name&&A[I.name];if(N)return N;for(var V=this.extEncoderList||(this.extEncoderList=[]),D=V.length,O=0;O<D;O++){var F=V[O];if(I===F[0])return F[1]}}return writeCore}var flexBuffer={};flexBuffer.FlexDecoder=FlexDecoder;flexBuffer.FlexEncoder=FlexEncoder;var Bufferish$1=requireBufferish(),MIN_BUFFER_SIZE=2048,MAX_BUFFER_SIZE=65536,BUFFER_SHORTAGE="BUFFER_SHORTAGE";function FlexDecoder(){if(!(this instanceof FlexDecoder))return new FlexDecoder}function FlexEncoder(){if(!(this instanceof FlexEncoder))return new FlexEncoder}FlexDecoder.mixin=mixinFactory(getDecoderMethods());FlexDecoder.mixin(FlexDecoder.prototype);FlexEncoder.mixin=mixinFactory(getEncoderMethods());FlexEncoder.mixin(FlexEncoder.prototype);function getDecoderMethods(){return{bufferish:Bufferish$1,write:r,fetch:fetch$1,flush:n,push,pull,read:read$1,reserve:_,offset:0};function r(x){var S=this.offset?Bufferish$1.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=S?x?this.bufferish.concat([S,x]):S:x,this.offset=0}function n(){for(;this.offset<this.buffer.length;){var x=this.offset,S;try{S=this.fetch()}catch(E){if(E&&E.message!=BUFFER_SHORTAGE)throw E;this.offset=x;break}this.push(S)}}function _(x){var S=this.offset,E=S+x;if(E>this.buffer.length)throw new Error(BUFFER_SHORTAGE);return this.offset=E,S}}function getEncoderMethods(){return{bufferish:Bufferish$1,write,fetch:r,flush:n,push,pull:_,read:read$1,reserve:x,send:S,maxBufferSize:MAX_BUFFER_SIZE,minBufferSize:MIN_BUFFER_SIZE,offset:0,start:0};function r(){var E=this.start;if(E<this.offset){var C=this.start=this.offset;return Bufferish$1.prototype.slice.call(this.buffer,E,C)}}function n(){for(;this.start<this.offset;){var E=this.fetch();E&&this.push(E)}}function _(){var E=this.buffers||(this.buffers=[]),C=E.length>1?this.bufferish.concat(E):E[0];return E.length=0,C}function x(E){var C=E|0;if(this.buffer){var T=this.buffer.length,B=this.offset|0,A=B+C;if(A<T)return this.offset=A,B;this.flush(),E=Math.max(E,Math.min(T*2,this.maxBufferSize))}return E=Math.max(E,this.minBufferSize),this.buffer=this.bufferish.alloc(E),this.start=0,this.offset=C,0}function S(E){var C=E.length;if(C>this.minBufferSize)this.flush(),this.push(E);else{var T=this.reserve(C);Bufferish$1.prototype.copy.call(E,this.buffer,T)}}}function write(){throw new Error("method not implemented: write()")}function fetch$1(){throw new Error("method not implemented: fetch()")}function read$1(){var r=this.buffers&&this.buffers.length;return r?(this.flush(),this.pull()):this.fetch()}function push(r){var n=this.buffers||(this.buffers=[]);n.push(r)}function pull(){var r=this.buffers||(this.buffers=[]);return r.shift()}function mixinFactory(r){return n;function n(_){for(var x in r)_[x]=r[x];return _}}var hasRequiredEncodeBuffer;function requireEncodeBuffer(){if(hasRequiredEncodeBuffer)return encodeBuffer;hasRequiredEncodeBuffer=1,encodeBuffer.EncodeBuffer=_;var r=requireWriteCore().preset,n=flexBuffer.FlexEncoder;n.mixin(_.prototype);function _(x){if(!(this instanceof _))return new _(x);if(x&&(this.options=x,x.codec)){var S=this.codec=x.codec;S.bufferish&&(this.bufferish=S.bufferish)}}return _.prototype.codec=r,_.prototype.write=function(x){this.codec.encode(this,x)},encodeBuffer}var hasRequiredEncode;function requireEncode(){if(hasRequiredEncode)return encode$2;hasRequiredEncode=1,encode$2.encode=n;var r=requireEncodeBuffer().EncodeBuffer;function n(_,x){var S=new r(x);return S.write(_),S.read()}return encode$2}var decode$1={},decodeBuffer={},readCore={},extUnpacker={},hasRequiredExtUnpacker;function requireExtUnpacker(){if(hasRequiredExtUnpacker)return extUnpacker;hasRequiredExtUnpacker=1,extUnpacker.setExtUnpackers=S;var r=requireBufferish(),n=r.global,_,x={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function S(I){I.addExtUnpacker(14,[E,T(Error)]),I.addExtUnpacker(1,[E,T(EvalError)]),I.addExtUnpacker(2,[E,T(RangeError)]),I.addExtUnpacker(3,[E,T(ReferenceError)]),I.addExtUnpacker(4,[E,T(SyntaxError)]),I.addExtUnpacker(5,[E,T(TypeError)]),I.addExtUnpacker(6,[E,T(URIError)]),I.addExtUnpacker(10,[E,C]),I.addExtUnpacker(11,[E,B(Boolean)]),I.addExtUnpacker(12,[E,B(String)]),I.addExtUnpacker(13,[E,B(Date)]),I.addExtUnpacker(15,[E,B(Number)]),typeof Uint8Array<"u"&&(I.addExtUnpacker(17,B(Int8Array)),I.addExtUnpacker(18,B(Uint8Array)),I.addExtUnpacker(19,[A,B(Int16Array)]),I.addExtUnpacker(20,[A,B(Uint16Array)]),I.addExtUnpacker(21,[A,B(Int32Array)]),I.addExtUnpacker(22,[A,B(Uint32Array)]),I.addExtUnpacker(23,[A,B(Float32Array)]),typeof Float64Array<"u"&&I.addExtUnpacker(24,[A,B(Float64Array)]),typeof Uint8ClampedArray<"u"&&I.addExtUnpacker(25,B(Uint8ClampedArray)),I.addExtUnpacker(26,A),I.addExtUnpacker(29,[A,B(DataView)])),r.hasBuffer&&I.addExtUnpacker(27,B(n))}function E(I){return _||(_=requireDecode().decode),_(I)}function C(I){return RegExp.apply(null,I)}function T(I){return function(N){var V=new I;for(var D in x)V[D]=N[D];return V}}function B(I){return function(N){return new I(N)}}function A(I){return new Uint8Array(I).buffer}return extUnpacker}var readFormat={},ieee754=ieee754$2,Int64Buffer=int64Buffer,Uint64BE=Int64Buffer.Uint64BE,Int64BE=Int64Buffer.Int64BE;readFormat.getReadFormat=getReadFormat;readFormat.readUint8=uint8;var Bufferish=requireBufferish(),BufferProto=requireBufferishProto(),HAS_MAP=typeof Map<"u",NO_ASSERT=!0;function getReadFormat(r){var n=Bufferish.hasArrayBuffer&&r&&r.binarraybuffer,_=r&&r.int64,x=HAS_MAP&&r&&r.usemap,S={map:x?map_to_map:map_to_obj,array,str,bin:n?bin_arraybuffer:bin_buffer,ext:ext$1,uint8,uint16,uint32,uint64:read(8,_?readUInt64BE_int64:readUInt64BE),int8,int16,int32,int64:read(8,_?readInt64BE_int64:readInt64BE),float32:read(4,readFloatBE),float64:read(8,readDoubleBE)};return S}function map_to_obj(r,n){var _={},x,S=new Array(n),E=new Array(n),C=r.codec.decode;for(x=0;x<n;x++)S[x]=C(r),E[x]=C(r);for(x=0;x<n;x++)_[S[x]]=E[x];return _}function map_to_map(r,n){var _=new Map,x,S=new Array(n),E=new Array(n),C=r.codec.decode;for(x=0;x<n;x++)S[x]=C(r),E[x]=C(r);for(x=0;x<n;x++)_.set(S[x],E[x]);return _}function array(r,n){for(var _=new Array(n),x=r.codec.decode,S=0;S<n;S++)_[S]=x(r);return _}function str(r,n){var _=r.reserve(n),x=_+n;return BufferProto.toString.call(r.buffer,"utf-8",_,x)}function bin_buffer(r,n){var _=r.reserve(n),x=_+n,S=BufferProto.slice.call(r.buffer,_,x);return Bufferish.from(S)}function bin_arraybuffer(r,n){var _=r.reserve(n),x=_+n,S=BufferProto.slice.call(r.buffer,_,x);return Bufferish.Uint8Array.from(S).buffer}function ext$1(r,n){var _=r.reserve(n+1),x=r.buffer[_++],S=_+n,E=r.codec.getExtUnpacker(x);if(!E)throw new Error("Invalid ext type: "+(x&&"0x"+x.toString(16)));var C=BufferProto.slice.call(r.buffer,_,S);return E(C)}function uint8(r){var n=r.reserve(1);return r.buffer[n]}function int8(r){var n=r.reserve(1),_=r.buffer[n];return _&128?_-256:_}function uint16(r){var n=r.reserve(2),_=r.buffer;return _[n++]<<8|_[n]}function int16(r){var n=r.reserve(2),_=r.buffer,x=_[n++]<<8|_[n];return x&32768?x-65536:x}function uint32(r){var n=r.reserve(4),_=r.buffer;return _[n++]*16777216+(_[n++]<<16)+(_[n++]<<8)+_[n]}function int32(r){var n=r.reserve(4),_=r.buffer;return _[n++]<<24|_[n++]<<16|_[n++]<<8|_[n]}function read(r,n){return function(_){var x=_.reserve(r);return n.call(_.buffer,x,NO_ASSERT)}}function readUInt64BE(r){return new Uint64BE(this,r).toNumber()}function readInt64BE(r){return new Int64BE(this,r).toNumber()}function readUInt64BE_int64(r){return new Uint64BE(this,r)}function readInt64BE_int64(r){return new Int64BE(this,r)}function readFloatBE(r){return ieee754.read(this,r,!1,23,4)}function readDoubleBE(r){return ieee754.read(this,r,!1,52,8)}var readToken={},ReadFormat=readFormat;readToken.getReadToken=getReadToken;function getReadToken(r){var n=ReadFormat.getReadFormat(r);return r&&r.useraw?init_useraw(n):init_token(n)}function init_token(r){var n,_=new Array(256);for(n=0;n<=127;n++)_[n]=constant(n);for(n=128;n<=143;n++)_[n]=fix(n-128,r.map);for(n=144;n<=159;n++)_[n]=fix(n-144,r.array);for(n=160;n<=191;n++)_[n]=fix(n-160,r.str);for(_[192]=constant(null),_[193]=null,_[194]=constant(!1),_[195]=constant(!0),_[196]=flex(r.uint8,r.bin),_[197]=flex(r.uint16,r.bin),_[198]=flex(r.uint32,r.bin),_[199]=flex(r.uint8,r.ext),_[200]=flex(r.uint16,r.ext),_[201]=flex(r.uint32,r.ext),_[202]=r.float32,_[203]=r.float64,_[204]=r.uint8,_[205]=r.uint16,_[206]=r.uint32,_[207]=r.uint64,_[208]=r.int8,_[209]=r.int16,_[210]=r.int32,_[211]=r.int64,_[212]=fix(1,r.ext),_[213]=fix(2,r.ext),_[214]=fix(4,r.ext),_[215]=fix(8,r.ext),_[216]=fix(16,r.ext),_[217]=flex(r.uint8,r.str),_[218]=flex(r.uint16,r.str),_[219]=flex(r.uint32,r.str),_[220]=flex(r.uint16,r.array),_[221]=flex(r.uint32,r.array),_[222]=flex(r.uint16,r.map),_[223]=flex(r.uint32,r.map),n=224;n<=255;n++)_[n]=constant(n-256);return _}function init_useraw(r){var n,_=init_token(r).slice();for(_[217]=_[196],_[218]=_[197],_[219]=_[198],n=160;n<=191;n++)_[n]=fix(n-160,r.bin);return _}function constant(r){return function(){return r}}function flex(r,n){return function(_){var x=r(_);return n(_,x)}}function fix(r,n){return function(_){return n(_,r)}}var hasRequiredReadCore;function requireReadCore(){if(hasRequiredReadCore)return readCore;hasRequiredReadCore=1;var r=extBuffer.ExtBuffer,n=requireExtUnpacker(),_=readFormat.readUint8,x=readToken,S=codecBase;S.install({addExtUnpacker:T,getExtUnpacker:B,init:C}),readCore.preset=C.call(S.preset);function E(A){var I=x.getReadToken(A);return N;function N(V){var D=_(V),O=I[D];if(!O)throw new Error("Invalid type: "+(D&&"0x"+D.toString(16)));return O(V)}}function C(){var A=this.options;return this.decode=E(A),A&&A.preset&&n.setExtUnpackers(this),this}function T(A,I){var N=this.extUnpackers||(this.extUnpackers=[]);N[A]=S.filter(I)}function B(A){var I=this.extUnpackers||(this.extUnpackers=[]);return I[A]||N;function N(V){return new r(V,A)}}return readCore}var hasRequiredDecodeBuffer;function requireDecodeBuffer(){if(hasRequiredDecodeBuffer)return decodeBuffer;hasRequiredDecodeBuffer=1,decodeBuffer.DecodeBuffer=_;var r=requireReadCore().preset,n=flexBuffer.FlexDecoder;n.mixin(_.prototype);function _(x){if(!(this instanceof _))return new _(x);if(x&&(this.options=x,x.codec)){var S=this.codec=x.codec;S.bufferish&&(this.bufferish=S.bufferish)}}return _.prototype.codec=r,_.prototype.fetch=function(){return this.codec.decode(this)},decodeBuffer}var hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode$1;hasRequiredDecode=1,decode$1.decode=n;var r=requireDecodeBuffer().DecodeBuffer;function n(_,x){var S=new r(x);return S.write(_),S.read()}return decode$1}var encoder={},eventLite={exports:{}};/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */(function(r){function n(){if(!(this instanceof n))return new n}(function(_){r.exports=_;var x="listeners",S={on:C,once:T,off:B,emit:A};E(_.prototype),_.mixin=E;function E(N){for(var V in S)N[V]=S[V];return N}function C(N,V){return I(this,N).push(V),this}function T(N,V){var D=this;return O.originalListener=V,I(D,N).push(O),D;function O(){B.call(D,N,O),V.apply(this,arguments)}}function B(N,V){var D=this,O;if(!arguments.length)delete D[x];else if(V){if(O=I(D,N,!0),O){if(O=O.filter(F),!O.length)return B.call(D,N);D[x][N]=O}}else if(O=D[x],O&&(delete O[N],!Object.keys(O).length))return B.call(D);return D;function F(M){return M!==V&&M.originalListener!==V}}function A(N,V){var D=this,O=I(D,N,!0);if(!O)return!1;var F=arguments.length;if(F===1)O.forEach(L);else if(F===2)O.forEach(j);else{var M=Array.prototype.slice.call(arguments,1);O.forEach(q)}return!!O.length;function L(H){H.call(D)}function j(H){H.call(D,V)}function q(H){H.apply(D,M)}}function I(N,V,D){if(!(D&&!N[x])){var O=N[x]||(N[x]={});return O[V]||(O[V]=[])}}})(n)})(eventLite);var eventLiteExports=eventLite.exports;encoder.Encoder=Encoder;var EventLite$1=eventLiteExports,EncodeBuffer=requireEncodeBuffer().EncodeBuffer;function Encoder(r){if(!(this instanceof Encoder))return new Encoder(r);EncodeBuffer.call(this,r)}Encoder.prototype=new EncodeBuffer;EventLite$1.mixin(Encoder.prototype);Encoder.prototype.encode=function(r){this.write(r),this.emit("data",this.read())};Encoder.prototype.end=function(r){arguments.length&&this.encode(r),this.flush(),this.emit("end")};var decoder={};decoder.Decoder=Decoder;var EventLite=eventLiteExports,DecodeBuffer=requireDecodeBuffer().DecodeBuffer;function Decoder(r){if(!(this instanceof Decoder))return new Decoder(r);DecodeBuffer.call(this,r)}Decoder.prototype=new DecodeBuffer;EventLite.mixin(Decoder.prototype);Decoder.prototype.decode=function(r){arguments.length&&this.write(r),this.flush()};Decoder.prototype.push=function(r){this.emit("data",r)};Decoder.prototype.end=function(r){this.decode(r),this.emit("end")};var ext={};requireReadCore();requireWriteCore();ext.createCodec=codecBase.createCodec;var codec={};requireReadCore();requireWriteCore();codec.codec={preset:codecBase.preset};browser$1.encode=requireEncode().encode;browser$1.decode=requireDecode().decode;browser$1.Encoder=encoder.Encoder;browser$1.Decoder=decoder.Decoder;browser$1.createCodec=ext.createCodec;browser$1.codec=codec.codec;var naclFast={exports:{}};(function(r){(function(n){var _=function(De){var ke,Se=new Float64Array(16);if(De)for(ke=0;ke<De.length;ke++)Se[ke]=De[ke];return Se},x=function(){throw new Error("no PRNG")},S=new Uint8Array(16),E=new Uint8Array(32);E[0]=9;var C=_(),T=_([1]),B=_([56129,1]),A=_([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),I=_([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),N=_([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),V=_([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),D=_([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function O(De,ke,Se,se){De[ke]=Se>>24&255,De[ke+1]=Se>>16&255,De[ke+2]=Se>>8&255,De[ke+3]=Se&255,De[ke+4]=se>>24&255,De[ke+5]=se>>16&255,De[ke+6]=se>>8&255,De[ke+7]=se&255}function F(De,ke,Se,se,_e){var $e,Pe=0;for($e=0;$e<_e;$e++)Pe|=De[ke+$e]^Se[se+$e];return(1&Pe-1>>>8)-1}function M(De,ke,Se,se){return F(De,ke,Se,se,16)}function L(De,ke,Se,se){return F(De,ke,Se,se,32)}function j(De,ke,Se,se){for(var _e=se[0]&255|(se[1]&255)<<8|(se[2]&255)<<16|(se[3]&255)<<24,$e=Se[0]&255|(Se[1]&255)<<8|(Se[2]&255)<<16|(Se[3]&255)<<24,Pe=Se[4]&255|(Se[5]&255)<<8|(Se[6]&255)<<16|(Se[7]&255)<<24,Fe=Se[8]&255|(Se[9]&255)<<8|(Se[10]&255)<<16|(Se[11]&255)<<24,qe=Se[12]&255|(Se[13]&255)<<8|(Se[14]&255)<<16|(Se[15]&255)<<24,Ye=se[4]&255|(se[5]&255)<<8|(se[6]&255)<<16|(se[7]&255)<<24,Je=ke[0]&255|(ke[1]&255)<<8|(ke[2]&255)<<16|(ke[3]&255)<<24,tt=ke[4]&255|(ke[5]&255)<<8|(ke[6]&255)<<16|(ke[7]&255)<<24,Qe=ke[8]&255|(ke[9]&255)<<8|(ke[10]&255)<<16|(ke[11]&255)<<24,it=ke[12]&255|(ke[13]&255)<<8|(ke[14]&255)<<16|(ke[15]&255)<<24,lt=se[8]&255|(se[9]&255)<<8|(se[10]&255)<<16|(se[11]&255)<<24,vt=Se[16]&255|(Se[17]&255)<<8|(Se[18]&255)<<16|(Se[19]&255)<<24,bt=Se[20]&255|(Se[21]&255)<<8|(Se[22]&255)<<16|(Se[23]&255)<<24,dt=Se[24]&255|(Se[25]&255)<<8|(Se[26]&255)<<16|(Se[27]&255)<<24,yt=Se[28]&255|(Se[29]&255)<<8|(Se[30]&255)<<16|(Se[31]&255)<<24,Tt=se[12]&255|(se[13]&255)<<8|(se[14]&255)<<16|(se[15]&255)<<24,kt=_e,Pt=$e,It=Pe,Ot=Fe,Mt=qe,Dt=Ye,mt=Je,gt=tt,St=Qe,xt=it,Ct=lt,Nt=vt,Yt=bt,sr=dt,cr=yt,er=Tt,at,pr=0;pr<20;pr+=2)at=kt+Yt|0,Mt^=at<<7|at>>>32-7,at=Mt+kt|0,St^=at<<9|at>>>32-9,at=St+Mt|0,Yt^=at<<13|at>>>32-13,at=Yt+St|0,kt^=at<<18|at>>>32-18,at=Dt+Pt|0,xt^=at<<7|at>>>32-7,at=xt+Dt|0,sr^=at<<9|at>>>32-9,at=sr+xt|0,Pt^=at<<13|at>>>32-13,at=Pt+sr|0,Dt^=at<<18|at>>>32-18,at=Ct+mt|0,cr^=at<<7|at>>>32-7,at=cr+Ct|0,It^=at<<9|at>>>32-9,at=It+cr|0,mt^=at<<13|at>>>32-13,at=mt+It|0,Ct^=at<<18|at>>>32-18,at=er+Nt|0,Ot^=at<<7|at>>>32-7,at=Ot+er|0,gt^=at<<9|at>>>32-9,at=gt+Ot|0,Nt^=at<<13|at>>>32-13,at=Nt+gt|0,er^=at<<18|at>>>32-18,at=kt+Ot|0,Pt^=at<<7|at>>>32-7,at=Pt+kt|0,It^=at<<9|at>>>32-9,at=It+Pt|0,Ot^=at<<13|at>>>32-13,at=Ot+It|0,kt^=at<<18|at>>>32-18,at=Dt+Mt|0,mt^=at<<7|at>>>32-7,at=mt+Dt|0,gt^=at<<9|at>>>32-9,at=gt+mt|0,Mt^=at<<13|at>>>32-13,at=Mt+gt|0,Dt^=at<<18|at>>>32-18,at=Ct+xt|0,Nt^=at<<7|at>>>32-7,at=Nt+Ct|0,St^=at<<9|at>>>32-9,at=St+Nt|0,xt^=at<<13|at>>>32-13,at=xt+St|0,Ct^=at<<18|at>>>32-18,at=er+cr|0,Yt^=at<<7|at>>>32-7,at=Yt+er|0,sr^=at<<9|at>>>32-9,at=sr+Yt|0,cr^=at<<13|at>>>32-13,at=cr+sr|0,er^=at<<18|at>>>32-18;kt=kt+_e|0,Pt=Pt+$e|0,It=It+Pe|0,Ot=Ot+Fe|0,Mt=Mt+qe|0,Dt=Dt+Ye|0,mt=mt+Je|0,gt=gt+tt|0,St=St+Qe|0,xt=xt+it|0,Ct=Ct+lt|0,Nt=Nt+vt|0,Yt=Yt+bt|0,sr=sr+dt|0,cr=cr+yt|0,er=er+Tt|0,De[0]=kt>>>0&255,De[1]=kt>>>8&255,De[2]=kt>>>16&255,De[3]=kt>>>24&255,De[4]=Pt>>>0&255,De[5]=Pt>>>8&255,De[6]=Pt>>>16&255,De[7]=Pt>>>24&255,De[8]=It>>>0&255,De[9]=It>>>8&255,De[10]=It>>>16&255,De[11]=It>>>24&255,De[12]=Ot>>>0&255,De[13]=Ot>>>8&255,De[14]=Ot>>>16&255,De[15]=Ot>>>24&255,De[16]=Mt>>>0&255,De[17]=Mt>>>8&255,De[18]=Mt>>>16&255,De[19]=Mt>>>24&255,De[20]=Dt>>>0&255,De[21]=Dt>>>8&255,De[22]=Dt>>>16&255,De[23]=Dt>>>24&255,De[24]=mt>>>0&255,De[25]=mt>>>8&255,De[26]=mt>>>16&255,De[27]=mt>>>24&255,De[28]=gt>>>0&255,De[29]=gt>>>8&255,De[30]=gt>>>16&255,De[31]=gt>>>24&255,De[32]=St>>>0&255,De[33]=St>>>8&255,De[34]=St>>>16&255,De[35]=St>>>24&255,De[36]=xt>>>0&255,De[37]=xt>>>8&255,De[38]=xt>>>16&255,De[39]=xt>>>24&255,De[40]=Ct>>>0&255,De[41]=Ct>>>8&255,De[42]=Ct>>>16&255,De[43]=Ct>>>24&255,De[44]=Nt>>>0&255,De[45]=Nt>>>8&255,De[46]=Nt>>>16&255,De[47]=Nt>>>24&255,De[48]=Yt>>>0&255,De[49]=Yt>>>8&255,De[50]=Yt>>>16&255,De[51]=Yt>>>24&255,De[52]=sr>>>0&255,De[53]=sr>>>8&255,De[54]=sr>>>16&255,De[55]=sr>>>24&255,De[56]=cr>>>0&255,De[57]=cr>>>8&255,De[58]=cr>>>16&255,De[59]=cr>>>24&255,De[60]=er>>>0&255,De[61]=er>>>8&255,De[62]=er>>>16&255,De[63]=er>>>24&255}function q(De,ke,Se,se){for(var _e=se[0]&255|(se[1]&255)<<8|(se[2]&255)<<16|(se[3]&255)<<24,$e=Se[0]&255|(Se[1]&255)<<8|(Se[2]&255)<<16|(Se[3]&255)<<24,Pe=Se[4]&255|(Se[5]&255)<<8|(Se[6]&255)<<16|(Se[7]&255)<<24,Fe=Se[8]&255|(Se[9]&255)<<8|(Se[10]&255)<<16|(Se[11]&255)<<24,qe=Se[12]&255|(Se[13]&255)<<8|(Se[14]&255)<<16|(Se[15]&255)<<24,Ye=se[4]&255|(se[5]&255)<<8|(se[6]&255)<<16|(se[7]&255)<<24,Je=ke[0]&255|(ke[1]&255)<<8|(ke[2]&255)<<16|(ke[3]&255)<<24,tt=ke[4]&255|(ke[5]&255)<<8|(ke[6]&255)<<16|(ke[7]&255)<<24,Qe=ke[8]&255|(ke[9]&255)<<8|(ke[10]&255)<<16|(ke[11]&255)<<24,it=ke[12]&255|(ke[13]&255)<<8|(ke[14]&255)<<16|(ke[15]&255)<<24,lt=se[8]&255|(se[9]&255)<<8|(se[10]&255)<<16|(se[11]&255)<<24,vt=Se[16]&255|(Se[17]&255)<<8|(Se[18]&255)<<16|(Se[19]&255)<<24,bt=Se[20]&255|(Se[21]&255)<<8|(Se[22]&255)<<16|(Se[23]&255)<<24,dt=Se[24]&255|(Se[25]&255)<<8|(Se[26]&255)<<16|(Se[27]&255)<<24,yt=Se[28]&255|(Se[29]&255)<<8|(Se[30]&255)<<16|(Se[31]&255)<<24,Tt=se[12]&255|(se[13]&255)<<8|(se[14]&255)<<16|(se[15]&255)<<24,kt=_e,Pt=$e,It=Pe,Ot=Fe,Mt=qe,Dt=Ye,mt=Je,gt=tt,St=Qe,xt=it,Ct=lt,Nt=vt,Yt=bt,sr=dt,cr=yt,er=Tt,at,pr=0;pr<20;pr+=2)at=kt+Yt|0,Mt^=at<<7|at>>>32-7,at=Mt+kt|0,St^=at<<9|at>>>32-9,at=St+Mt|0,Yt^=at<<13|at>>>32-13,at=Yt+St|0,kt^=at<<18|at>>>32-18,at=Dt+Pt|0,xt^=at<<7|at>>>32-7,at=xt+Dt|0,sr^=at<<9|at>>>32-9,at=sr+xt|0,Pt^=at<<13|at>>>32-13,at=Pt+sr|0,Dt^=at<<18|at>>>32-18,at=Ct+mt|0,cr^=at<<7|at>>>32-7,at=cr+Ct|0,It^=at<<9|at>>>32-9,at=It+cr|0,mt^=at<<13|at>>>32-13,at=mt+It|0,Ct^=at<<18|at>>>32-18,at=er+Nt|0,Ot^=at<<7|at>>>32-7,at=Ot+er|0,gt^=at<<9|at>>>32-9,at=gt+Ot|0,Nt^=at<<13|at>>>32-13,at=Nt+gt|0,er^=at<<18|at>>>32-18,at=kt+Ot|0,Pt^=at<<7|at>>>32-7,at=Pt+kt|0,It^=at<<9|at>>>32-9,at=It+Pt|0,Ot^=at<<13|at>>>32-13,at=Ot+It|0,kt^=at<<18|at>>>32-18,at=Dt+Mt|0,mt^=at<<7|at>>>32-7,at=mt+Dt|0,gt^=at<<9|at>>>32-9,at=gt+mt|0,Mt^=at<<13|at>>>32-13,at=Mt+gt|0,Dt^=at<<18|at>>>32-18,at=Ct+xt|0,Nt^=at<<7|at>>>32-7,at=Nt+Ct|0,St^=at<<9|at>>>32-9,at=St+Nt|0,xt^=at<<13|at>>>32-13,at=xt+St|0,Ct^=at<<18|at>>>32-18,at=er+cr|0,Yt^=at<<7|at>>>32-7,at=Yt+er|0,sr^=at<<9|at>>>32-9,at=sr+Yt|0,cr^=at<<13|at>>>32-13,at=cr+sr|0,er^=at<<18|at>>>32-18;De[0]=kt>>>0&255,De[1]=kt>>>8&255,De[2]=kt>>>16&255,De[3]=kt>>>24&255,De[4]=Dt>>>0&255,De[5]=Dt>>>8&255,De[6]=Dt>>>16&255,De[7]=Dt>>>24&255,De[8]=Ct>>>0&255,De[9]=Ct>>>8&255,De[10]=Ct>>>16&255,De[11]=Ct>>>24&255,De[12]=er>>>0&255,De[13]=er>>>8&255,De[14]=er>>>16&255,De[15]=er>>>24&255,De[16]=mt>>>0&255,De[17]=mt>>>8&255,De[18]=mt>>>16&255,De[19]=mt>>>24&255,De[20]=gt>>>0&255,De[21]=gt>>>8&255,De[22]=gt>>>16&255,De[23]=gt>>>24&255,De[24]=St>>>0&255,De[25]=St>>>8&255,De[26]=St>>>16&255,De[27]=St>>>24&255,De[28]=xt>>>0&255,De[29]=xt>>>8&255,De[30]=xt>>>16&255,De[31]=xt>>>24&255}function H(De,ke,Se,se){j(De,ke,Se,se)}function X(De,ke,Se,se){q(De,ke,Se,se)}var J=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Z(De,ke,Se,se,_e,$e,Pe){var Fe=new Uint8Array(16),qe=new Uint8Array(64),Ye,Je;for(Je=0;Je<16;Je++)Fe[Je]=0;for(Je=0;Je<8;Je++)Fe[Je]=$e[Je];for(;_e>=64;){for(H(qe,Fe,Pe,J),Je=0;Je<64;Je++)De[ke+Je]=Se[se+Je]^qe[Je];for(Ye=1,Je=8;Je<16;Je++)Ye=Ye+(Fe[Je]&255)|0,Fe[Je]=Ye&255,Ye>>>=8;_e-=64,ke+=64,se+=64}if(_e>0)for(H(qe,Fe,Pe,J),Je=0;Je<_e;Je++)De[ke+Je]=Se[se+Je]^qe[Je];return 0}function ae(De,ke,Se,se,_e){var $e=new Uint8Array(16),Pe=new Uint8Array(64),Fe,qe;for(qe=0;qe<16;qe++)$e[qe]=0;for(qe=0;qe<8;qe++)$e[qe]=se[qe];for(;Se>=64;){for(H(Pe,$e,_e,J),qe=0;qe<64;qe++)De[ke+qe]=Pe[qe];for(Fe=1,qe=8;qe<16;qe++)Fe=Fe+($e[qe]&255)|0,$e[qe]=Fe&255,Fe>>>=8;Se-=64,ke+=64}if(Se>0)for(H(Pe,$e,_e,J),qe=0;qe<Se;qe++)De[ke+qe]=Pe[qe];return 0}function ce(De,ke,Se,se,_e){var $e=new Uint8Array(32);X($e,se,_e,J);for(var Pe=new Uint8Array(8),Fe=0;Fe<8;Fe++)Pe[Fe]=se[Fe+16];return ae(De,ke,Se,Pe,$e)}function ve(De,ke,Se,se,_e,$e,Pe){var Fe=new Uint8Array(32);X(Fe,$e,Pe,J);for(var qe=new Uint8Array(8),Ye=0;Ye<8;Ye++)qe[Ye]=$e[Ye+16];return Z(De,ke,Se,se,_e,qe,Fe)}var pe=function(De){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var ke,Se,se,_e,$e,Pe,Fe,qe;ke=De[0]&255|(De[1]&255)<<8,this.r[0]=ke&8191,Se=De[2]&255|(De[3]&255)<<8,this.r[1]=(ke>>>13|Se<<3)&8191,se=De[4]&255|(De[5]&255)<<8,this.r[2]=(Se>>>10|se<<6)&7939,_e=De[6]&255|(De[7]&255)<<8,this.r[3]=(se>>>7|_e<<9)&8191,$e=De[8]&255|(De[9]&255)<<8,this.r[4]=(_e>>>4|$e<<12)&255,this.r[5]=$e>>>1&8190,Pe=De[10]&255|(De[11]&255)<<8,this.r[6]=($e>>>14|Pe<<2)&8191,Fe=De[12]&255|(De[13]&255)<<8,this.r[7]=(Pe>>>11|Fe<<5)&8065,qe=De[14]&255|(De[15]&255)<<8,this.r[8]=(Fe>>>8|qe<<8)&8191,this.r[9]=qe>>>5&127,this.pad[0]=De[16]&255|(De[17]&255)<<8,this.pad[1]=De[18]&255|(De[19]&255)<<8,this.pad[2]=De[20]&255|(De[21]&255)<<8,this.pad[3]=De[22]&255|(De[23]&255)<<8,this.pad[4]=De[24]&255|(De[25]&255)<<8,this.pad[5]=De[26]&255|(De[27]&255)<<8,this.pad[6]=De[28]&255|(De[29]&255)<<8,this.pad[7]=De[30]&255|(De[31]&255)<<8};pe.prototype.blocks=function(De,ke,Se){for(var se=this.fin?0:2048,_e,$e,Pe,Fe,qe,Ye,Je,tt,Qe,it,lt,vt,bt,dt,yt,Tt,kt,Pt,It,Ot=this.h[0],Mt=this.h[1],Dt=this.h[2],mt=this.h[3],gt=this.h[4],St=this.h[5],xt=this.h[6],Ct=this.h[7],Nt=this.h[8],Yt=this.h[9],sr=this.r[0],cr=this.r[1],er=this.r[2],at=this.r[3],pr=this.r[4],Er=this.r[5],Cr=this.r[6],lr=this.r[7],Tr=this.r[8],xr=this.r[9];Se>=16;)_e=De[ke+0]&255|(De[ke+1]&255)<<8,Ot+=_e&8191,$e=De[ke+2]&255|(De[ke+3]&255)<<8,Mt+=(_e>>>13|$e<<3)&8191,Pe=De[ke+4]&255|(De[ke+5]&255)<<8,Dt+=($e>>>10|Pe<<6)&8191,Fe=De[ke+6]&255|(De[ke+7]&255)<<8,mt+=(Pe>>>7|Fe<<9)&8191,qe=De[ke+8]&255|(De[ke+9]&255)<<8,gt+=(Fe>>>4|qe<<12)&8191,St+=qe>>>1&8191,Ye=De[ke+10]&255|(De[ke+11]&255)<<8,xt+=(qe>>>14|Ye<<2)&8191,Je=De[ke+12]&255|(De[ke+13]&255)<<8,Ct+=(Ye>>>11|Je<<5)&8191,tt=De[ke+14]&255|(De[ke+15]&255)<<8,Nt+=(Je>>>8|tt<<8)&8191,Yt+=tt>>>5|se,Qe=0,it=Qe,it+=Ot*sr,it+=Mt*(5*xr),it+=Dt*(5*Tr),it+=mt*(5*lr),it+=gt*(5*Cr),Qe=it>>>13,it&=8191,it+=St*(5*Er),it+=xt*(5*pr),it+=Ct*(5*at),it+=Nt*(5*er),it+=Yt*(5*cr),Qe+=it>>>13,it&=8191,lt=Qe,lt+=Ot*cr,lt+=Mt*sr,lt+=Dt*(5*xr),lt+=mt*(5*Tr),lt+=gt*(5*lr),Qe=lt>>>13,lt&=8191,lt+=St*(5*Cr),lt+=xt*(5*Er),lt+=Ct*(5*pr),lt+=Nt*(5*at),lt+=Yt*(5*er),Qe+=lt>>>13,lt&=8191,vt=Qe,vt+=Ot*er,vt+=Mt*cr,vt+=Dt*sr,vt+=mt*(5*xr),vt+=gt*(5*Tr),Qe=vt>>>13,vt&=8191,vt+=St*(5*lr),vt+=xt*(5*Cr),vt+=Ct*(5*Er),vt+=Nt*(5*pr),vt+=Yt*(5*at),Qe+=vt>>>13,vt&=8191,bt=Qe,bt+=Ot*at,bt+=Mt*er,bt+=Dt*cr,bt+=mt*sr,bt+=gt*(5*xr),Qe=bt>>>13,bt&=8191,bt+=St*(5*Tr),bt+=xt*(5*lr),bt+=Ct*(5*Cr),bt+=Nt*(5*Er),bt+=Yt*(5*pr),Qe+=bt>>>13,bt&=8191,dt=Qe,dt+=Ot*pr,dt+=Mt*at,dt+=Dt*er,dt+=mt*cr,dt+=gt*sr,Qe=dt>>>13,dt&=8191,dt+=St*(5*xr),dt+=xt*(5*Tr),dt+=Ct*(5*lr),dt+=Nt*(5*Cr),dt+=Yt*(5*Er),Qe+=dt>>>13,dt&=8191,yt=Qe,yt+=Ot*Er,yt+=Mt*pr,yt+=Dt*at,yt+=mt*er,yt+=gt*cr,Qe=yt>>>13,yt&=8191,yt+=St*sr,yt+=xt*(5*xr),yt+=Ct*(5*Tr),yt+=Nt*(5*lr),yt+=Yt*(5*Cr),Qe+=yt>>>13,yt&=8191,Tt=Qe,Tt+=Ot*Cr,Tt+=Mt*Er,Tt+=Dt*pr,Tt+=mt*at,Tt+=gt*er,Qe=Tt>>>13,Tt&=8191,Tt+=St*cr,Tt+=xt*sr,Tt+=Ct*(5*xr),Tt+=Nt*(5*Tr),Tt+=Yt*(5*lr),Qe+=Tt>>>13,Tt&=8191,kt=Qe,kt+=Ot*lr,kt+=Mt*Cr,kt+=Dt*Er,kt+=mt*pr,kt+=gt*at,Qe=kt>>>13,kt&=8191,kt+=St*er,kt+=xt*cr,kt+=Ct*sr,kt+=Nt*(5*xr),kt+=Yt*(5*Tr),Qe+=kt>>>13,kt&=8191,Pt=Qe,Pt+=Ot*Tr,Pt+=Mt*lr,Pt+=Dt*Cr,Pt+=mt*Er,Pt+=gt*pr,Qe=Pt>>>13,Pt&=8191,Pt+=St*at,Pt+=xt*er,Pt+=Ct*cr,Pt+=Nt*sr,Pt+=Yt*(5*xr),Qe+=Pt>>>13,Pt&=8191,It=Qe,It+=Ot*xr,It+=Mt*Tr,It+=Dt*lr,It+=mt*Cr,It+=gt*Er,Qe=It>>>13,It&=8191,It+=St*pr,It+=xt*at,It+=Ct*er,It+=Nt*cr,It+=Yt*sr,Qe+=It>>>13,It&=8191,Qe=(Qe<<2)+Qe|0,Qe=Qe+it|0,it=Qe&8191,Qe=Qe>>>13,lt+=Qe,Ot=it,Mt=lt,Dt=vt,mt=bt,gt=dt,St=yt,xt=Tt,Ct=kt,Nt=Pt,Yt=It,ke+=16,Se-=16;this.h[0]=Ot,this.h[1]=Mt,this.h[2]=Dt,this.h[3]=mt,this.h[4]=gt,this.h[5]=St,this.h[6]=xt,this.h[7]=Ct,this.h[8]=Nt,this.h[9]=Yt},pe.prototype.finish=function(De,ke){var Se=new Uint16Array(10),se,_e,$e,Pe;if(this.leftover){for(Pe=this.leftover,this.buffer[Pe++]=1;Pe<16;Pe++)this.buffer[Pe]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(se=this.h[1]>>>13,this.h[1]&=8191,Pe=2;Pe<10;Pe++)this.h[Pe]+=se,se=this.h[Pe]>>>13,this.h[Pe]&=8191;for(this.h[0]+=se*5,se=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=se,se=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=se,Se[0]=this.h[0]+5,se=Se[0]>>>13,Se[0]&=8191,Pe=1;Pe<10;Pe++)Se[Pe]=this.h[Pe]+se,se=Se[Pe]>>>13,Se[Pe]&=8191;for(Se[9]-=8192,_e=(se^1)-1,Pe=0;Pe<10;Pe++)Se[Pe]&=_e;for(_e=~_e,Pe=0;Pe<10;Pe++)this.h[Pe]=this.h[Pe]&_e|Se[Pe];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,$e=this.h[0]+this.pad[0],this.h[0]=$e&65535,Pe=1;Pe<8;Pe++)$e=(this.h[Pe]+this.pad[Pe]|0)+($e>>>16)|0,this.h[Pe]=$e&65535;De[ke+0]=this.h[0]>>>0&255,De[ke+1]=this.h[0]>>>8&255,De[ke+2]=this.h[1]>>>0&255,De[ke+3]=this.h[1]>>>8&255,De[ke+4]=this.h[2]>>>0&255,De[ke+5]=this.h[2]>>>8&255,De[ke+6]=this.h[3]>>>0&255,De[ke+7]=this.h[3]>>>8&255,De[ke+8]=this.h[4]>>>0&255,De[ke+9]=this.h[4]>>>8&255,De[ke+10]=this.h[5]>>>0&255,De[ke+11]=this.h[5]>>>8&255,De[ke+12]=this.h[6]>>>0&255,De[ke+13]=this.h[6]>>>8&255,De[ke+14]=this.h[7]>>>0&255,De[ke+15]=this.h[7]>>>8&255},pe.prototype.update=function(De,ke,Se){var se,_e;if(this.leftover){for(_e=16-this.leftover,_e>Se&&(_e=Se),se=0;se<_e;se++)this.buffer[this.leftover+se]=De[ke+se];if(Se-=_e,ke+=_e,this.leftover+=_e,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(Se>=16&&(_e=Se-Se%16,this.blocks(De,ke,_e),ke+=_e,Se-=_e),Se){for(se=0;se<Se;se++)this.buffer[this.leftover+se]=De[ke+se];this.leftover+=Se}};function G(De,ke,Se,se,_e,$e){var Pe=new pe($e);return Pe.update(Se,se,_e),Pe.finish(De,ke),0}function Y(De,ke,Se,se,_e,$e){var Pe=new Uint8Array(16);return G(Pe,0,Se,se,_e,$e),M(De,ke,Pe,0)}function U(De,ke,Se,se,_e){var $e;if(Se<32)return-1;for(ve(De,0,ke,0,Se,se,_e),G(De,16,De,32,Se-32,De),$e=0;$e<16;$e++)De[$e]=0;return 0}function W(De,ke,Se,se,_e){var $e,Pe=new Uint8Array(32);if(Se<32||(ce(Pe,0,32,se,_e),Y(ke,16,ke,32,Se-32,Pe)!==0))return-1;for(ve(De,0,ke,0,Se,se,_e),$e=0;$e<32;$e++)De[$e]=0;return 0}function ee(De,ke){var Se;for(Se=0;Se<16;Se++)De[Se]=ke[Se]|0}function re(De){var ke,Se,se=1;for(ke=0;ke<16;ke++)Se=De[ke]+se+65535,se=Math.floor(Se/65536),De[ke]=Se-se*65536;De[0]+=se-1+37*(se-1)}function oe(De,ke,Se){for(var se,_e=~(Se-1),$e=0;$e<16;$e++)se=_e&(De[$e]^ke[$e]),De[$e]^=se,ke[$e]^=se}function ie(De,ke){var Se,se,_e,$e=_(),Pe=_();for(Se=0;Se<16;Se++)Pe[Se]=ke[Se];for(re(Pe),re(Pe),re(Pe),se=0;se<2;se++){for($e[0]=Pe[0]-65517,Se=1;Se<15;Se++)$e[Se]=Pe[Se]-65535-($e[Se-1]>>16&1),$e[Se-1]&=65535;$e[15]=Pe[15]-32767-($e[14]>>16&1),_e=$e[15]>>16&1,$e[14]&=65535,oe(Pe,$e,1-_e)}for(Se=0;Se<16;Se++)De[2*Se]=Pe[Se]&255,De[2*Se+1]=Pe[Se]>>8}function ne(De,ke){var Se=new Uint8Array(32),se=new Uint8Array(32);return ie(Se,De),ie(se,ke),L(Se,0,se,0)}function te(De){var ke=new Uint8Array(32);return ie(ke,De),ke[0]&1}function K(De,ke){var Se;for(Se=0;Se<16;Se++)De[Se]=ke[2*Se]+(ke[2*Se+1]<<8);De[15]&=32767}function le(De,ke,Se){for(var se=0;se<16;se++)De[se]=ke[se]+Se[se]}function ue(De,ke,Se){for(var se=0;se<16;se++)De[se]=ke[se]-Se[se]}function be(De,ke,Se){var se,_e,$e=0,Pe=0,Fe=0,qe=0,Ye=0,Je=0,tt=0,Qe=0,it=0,lt=0,vt=0,bt=0,dt=0,yt=0,Tt=0,kt=0,Pt=0,It=0,Ot=0,Mt=0,Dt=0,mt=0,gt=0,St=0,xt=0,Ct=0,Nt=0,Yt=0,sr=0,cr=0,er=0,at=Se[0],pr=Se[1],Er=Se[2],Cr=Se[3],lr=Se[4],Tr=Se[5],xr=Se[6],Or=Se[7],Ar=Se[8],Rr=Se[9],Fr=Se[10],Mr=Se[11],zr=Se[12],Kr=Se[13],Gr=Se[14],Xr=Se[15];se=ke[0],$e+=se*at,Pe+=se*pr,Fe+=se*Er,qe+=se*Cr,Ye+=se*lr,Je+=se*Tr,tt+=se*xr,Qe+=se*Or,it+=se*Ar,lt+=se*Rr,vt+=se*Fr,bt+=se*Mr,dt+=se*zr,yt+=se*Kr,Tt+=se*Gr,kt+=se*Xr,se=ke[1],Pe+=se*at,Fe+=se*pr,qe+=se*Er,Ye+=se*Cr,Je+=se*lr,tt+=se*Tr,Qe+=se*xr,it+=se*Or,lt+=se*Ar,vt+=se*Rr,bt+=se*Fr,dt+=se*Mr,yt+=se*zr,Tt+=se*Kr,kt+=se*Gr,Pt+=se*Xr,se=ke[2],Fe+=se*at,qe+=se*pr,Ye+=se*Er,Je+=se*Cr,tt+=se*lr,Qe+=se*Tr,it+=se*xr,lt+=se*Or,vt+=se*Ar,bt+=se*Rr,dt+=se*Fr,yt+=se*Mr,Tt+=se*zr,kt+=se*Kr,Pt+=se*Gr,It+=se*Xr,se=ke[3],qe+=se*at,Ye+=se*pr,Je+=se*Er,tt+=se*Cr,Qe+=se*lr,it+=se*Tr,lt+=se*xr,vt+=se*Or,bt+=se*Ar,dt+=se*Rr,yt+=se*Fr,Tt+=se*Mr,kt+=se*zr,Pt+=se*Kr,It+=se*Gr,Ot+=se*Xr,se=ke[4],Ye+=se*at,Je+=se*pr,tt+=se*Er,Qe+=se*Cr,it+=se*lr,lt+=se*Tr,vt+=se*xr,bt+=se*Or,dt+=se*Ar,yt+=se*Rr,Tt+=se*Fr,kt+=se*Mr,Pt+=se*zr,It+=se*Kr,Ot+=se*Gr,Mt+=se*Xr,se=ke[5],Je+=se*at,tt+=se*pr,Qe+=se*Er,it+=se*Cr,lt+=se*lr,vt+=se*Tr,bt+=se*xr,dt+=se*Or,yt+=se*Ar,Tt+=se*Rr,kt+=se*Fr,Pt+=se*Mr,It+=se*zr,Ot+=se*Kr,Mt+=se*Gr,Dt+=se*Xr,se=ke[6],tt+=se*at,Qe+=se*pr,it+=se*Er,lt+=se*Cr,vt+=se*lr,bt+=se*Tr,dt+=se*xr,yt+=se*Or,Tt+=se*Ar,kt+=se*Rr,Pt+=se*Fr,It+=se*Mr,Ot+=se*zr,Mt+=se*Kr,Dt+=se*Gr,mt+=se*Xr,se=ke[7],Qe+=se*at,it+=se*pr,lt+=se*Er,vt+=se*Cr,bt+=se*lr,dt+=se*Tr,yt+=se*xr,Tt+=se*Or,kt+=se*Ar,Pt+=se*Rr,It+=se*Fr,Ot+=se*Mr,Mt+=se*zr,Dt+=se*Kr,mt+=se*Gr,gt+=se*Xr,se=ke[8],it+=se*at,lt+=se*pr,vt+=se*Er,bt+=se*Cr,dt+=se*lr,yt+=se*Tr,Tt+=se*xr,kt+=se*Or,Pt+=se*Ar,It+=se*Rr,Ot+=se*Fr,Mt+=se*Mr,Dt+=se*zr,mt+=se*Kr,gt+=se*Gr,St+=se*Xr,se=ke[9],lt+=se*at,vt+=se*pr,bt+=se*Er,dt+=se*Cr,yt+=se*lr,Tt+=se*Tr,kt+=se*xr,Pt+=se*Or,It+=se*Ar,Ot+=se*Rr,Mt+=se*Fr,Dt+=se*Mr,mt+=se*zr,gt+=se*Kr,St+=se*Gr,xt+=se*Xr,se=ke[10],vt+=se*at,bt+=se*pr,dt+=se*Er,yt+=se*Cr,Tt+=se*lr,kt+=se*Tr,Pt+=se*xr,It+=se*Or,Ot+=se*Ar,Mt+=se*Rr,Dt+=se*Fr,mt+=se*Mr,gt+=se*zr,St+=se*Kr,xt+=se*Gr,Ct+=se*Xr,se=ke[11],bt+=se*at,dt+=se*pr,yt+=se*Er,Tt+=se*Cr,kt+=se*lr,Pt+=se*Tr,It+=se*xr,Ot+=se*Or,Mt+=se*Ar,Dt+=se*Rr,mt+=se*Fr,gt+=se*Mr,St+=se*zr,xt+=se*Kr,Ct+=se*Gr,Nt+=se*Xr,se=ke[12],dt+=se*at,yt+=se*pr,Tt+=se*Er,kt+=se*Cr,Pt+=se*lr,It+=se*Tr,Ot+=se*xr,Mt+=se*Or,Dt+=se*Ar,mt+=se*Rr,gt+=se*Fr,St+=se*Mr,xt+=se*zr,Ct+=se*Kr,Nt+=se*Gr,Yt+=se*Xr,se=ke[13],yt+=se*at,Tt+=se*pr,kt+=se*Er,Pt+=se*Cr,It+=se*lr,Ot+=se*Tr,Mt+=se*xr,Dt+=se*Or,mt+=se*Ar,gt+=se*Rr,St+=se*Fr,xt+=se*Mr,Ct+=se*zr,Nt+=se*Kr,Yt+=se*Gr,sr+=se*Xr,se=ke[14],Tt+=se*at,kt+=se*pr,Pt+=se*Er,It+=se*Cr,Ot+=se*lr,Mt+=se*Tr,Dt+=se*xr,mt+=se*Or,gt+=se*Ar,St+=se*Rr,xt+=se*Fr,Ct+=se*Mr,Nt+=se*zr,Yt+=se*Kr,sr+=se*Gr,cr+=se*Xr,se=ke[15],kt+=se*at,Pt+=se*pr,It+=se*Er,Ot+=se*Cr,Mt+=se*lr,Dt+=se*Tr,mt+=se*xr,gt+=se*Or,St+=se*Ar,xt+=se*Rr,Ct+=se*Fr,Nt+=se*Mr,Yt+=se*zr,sr+=se*Kr,cr+=se*Gr,er+=se*Xr,$e+=38*Pt,Pe+=38*It,Fe+=38*Ot,qe+=38*Mt,Ye+=38*Dt,Je+=38*mt,tt+=38*gt,Qe+=38*St,it+=38*xt,lt+=38*Ct,vt+=38*Nt,bt+=38*Yt,dt+=38*sr,yt+=38*cr,Tt+=38*er,_e=1,se=$e+_e+65535,_e=Math.floor(se/65536),$e=se-_e*65536,se=Pe+_e+65535,_e=Math.floor(se/65536),Pe=se-_e*65536,se=Fe+_e+65535,_e=Math.floor(se/65536),Fe=se-_e*65536,se=qe+_e+65535,_e=Math.floor(se/65536),qe=se-_e*65536,se=Ye+_e+65535,_e=Math.floor(se/65536),Ye=se-_e*65536,se=Je+_e+65535,_e=Math.floor(se/65536),Je=se-_e*65536,se=tt+_e+65535,_e=Math.floor(se/65536),tt=se-_e*65536,se=Qe+_e+65535,_e=Math.floor(se/65536),Qe=se-_e*65536,se=it+_e+65535,_e=Math.floor(se/65536),it=se-_e*65536,se=lt+_e+65535,_e=Math.floor(se/65536),lt=se-_e*65536,se=vt+_e+65535,_e=Math.floor(se/65536),vt=se-_e*65536,se=bt+_e+65535,_e=Math.floor(se/65536),bt=se-_e*65536,se=dt+_e+65535,_e=Math.floor(se/65536),dt=se-_e*65536,se=yt+_e+65535,_e=Math.floor(se/65536),yt=se-_e*65536,se=Tt+_e+65535,_e=Math.floor(se/65536),Tt=se-_e*65536,se=kt+_e+65535,_e=Math.floor(se/65536),kt=se-_e*65536,$e+=_e-1+37*(_e-1),_e=1,se=$e+_e+65535,_e=Math.floor(se/65536),$e=se-_e*65536,se=Pe+_e+65535,_e=Math.floor(se/65536),Pe=se-_e*65536,se=Fe+_e+65535,_e=Math.floor(se/65536),Fe=se-_e*65536,se=qe+_e+65535,_e=Math.floor(se/65536),qe=se-_e*65536,se=Ye+_e+65535,_e=Math.floor(se/65536),Ye=se-_e*65536,se=Je+_e+65535,_e=Math.floor(se/65536),Je=se-_e*65536,se=tt+_e+65535,_e=Math.floor(se/65536),tt=se-_e*65536,se=Qe+_e+65535,_e=Math.floor(se/65536),Qe=se-_e*65536,se=it+_e+65535,_e=Math.floor(se/65536),it=se-_e*65536,se=lt+_e+65535,_e=Math.floor(se/65536),lt=se-_e*65536,se=vt+_e+65535,_e=Math.floor(se/65536),vt=se-_e*65536,se=bt+_e+65535,_e=Math.floor(se/65536),bt=se-_e*65536,se=dt+_e+65535,_e=Math.floor(se/65536),dt=se-_e*65536,se=yt+_e+65535,_e=Math.floor(se/65536),yt=se-_e*65536,se=Tt+_e+65535,_e=Math.floor(se/65536),Tt=se-_e*65536,se=kt+_e+65535,_e=Math.floor(se/65536),kt=se-_e*65536,$e+=_e-1+37*(_e-1),De[0]=$e,De[1]=Pe,De[2]=Fe,De[3]=qe,De[4]=Ye,De[5]=Je,De[6]=tt,De[7]=Qe,De[8]=it,De[9]=lt,De[10]=vt,De[11]=bt,De[12]=dt,De[13]=yt,De[14]=Tt,De[15]=kt}function ge(De,ke){be(De,ke,ke)}function ye(De,ke){var Se=_(),se;for(se=0;se<16;se++)Se[se]=ke[se];for(se=253;se>=0;se--)ge(Se,Se),se!==2&&se!==4&&be(Se,Se,ke);for(se=0;se<16;se++)De[se]=Se[se]}function Ee(De,ke){var Se=_(),se;for(se=0;se<16;se++)Se[se]=ke[se];for(se=250;se>=0;se--)ge(Se,Se),se!==1&&be(Se,Se,ke);for(se=0;se<16;se++)De[se]=Se[se]}function Re(De,ke,Se){var se=new Uint8Array(32),_e=new Float64Array(80),$e,Pe,Fe=_(),qe=_(),Ye=_(),Je=_(),tt=_(),Qe=_();for(Pe=0;Pe<31;Pe++)se[Pe]=ke[Pe];for(se[31]=ke[31]&127|64,se[0]&=248,K(_e,Se),Pe=0;Pe<16;Pe++)qe[Pe]=_e[Pe],Je[Pe]=Fe[Pe]=Ye[Pe]=0;for(Fe[0]=Je[0]=1,Pe=254;Pe>=0;--Pe)$e=se[Pe>>>3]>>>(Pe&7)&1,oe(Fe,qe,$e),oe(Ye,Je,$e),le(tt,Fe,Ye),ue(Fe,Fe,Ye),le(Ye,qe,Je),ue(qe,qe,Je),ge(Je,tt),ge(Qe,Fe),be(Fe,Ye,Fe),be(Ye,qe,tt),le(tt,Fe,Ye),ue(Fe,Fe,Ye),ge(qe,Fe),ue(Ye,Je,Qe),be(Fe,Ye,B),le(Fe,Fe,Je),be(Ye,Ye,Fe),be(Fe,Je,Qe),be(Je,qe,_e),ge(qe,tt),oe(Fe,qe,$e),oe(Ye,Je,$e);for(Pe=0;Pe<16;Pe++)_e[Pe+16]=Fe[Pe],_e[Pe+32]=Ye[Pe],_e[Pe+48]=qe[Pe],_e[Pe+64]=Je[Pe];var it=_e.subarray(32),lt=_e.subarray(16);return ye(it,it),be(lt,lt,it),ie(De,lt),0}function Ne(De,ke){return Re(De,ke,E)}function Te(De,ke){return x(ke,32),Ne(De,ke)}function he(De,ke,Se){var se=new Uint8Array(32);return Re(se,Se,ke),X(De,S,se,J)}var xe=U,fe=W;function Be(De,ke,Se,se,_e,$e){var Pe=new Uint8Array(32);return he(Pe,_e,$e),xe(De,ke,Se,se,Pe)}function Le(De,ke,Se,se,_e,$e){var Pe=new Uint8Array(32);return he(Pe,_e,$e),fe(De,ke,Se,se,Pe)}var Ve=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ie(De,ke,Se,se){for(var _e=new Int32Array(16),$e=new Int32Array(16),Pe,Fe,qe,Ye,Je,tt,Qe,it,lt,vt,bt,dt,yt,Tt,kt,Pt,It,Ot,Mt,Dt,mt,gt,St,xt,Ct,Nt,Yt=De[0],sr=De[1],cr=De[2],er=De[3],at=De[4],pr=De[5],Er=De[6],Cr=De[7],lr=ke[0],Tr=ke[1],xr=ke[2],Or=ke[3],Ar=ke[4],Rr=ke[5],Fr=ke[6],Mr=ke[7],zr=0;se>=128;){for(Mt=0;Mt<16;Mt++)Dt=8*Mt+zr,_e[Mt]=Se[Dt+0]<<24|Se[Dt+1]<<16|Se[Dt+2]<<8|Se[Dt+3],$e[Mt]=Se[Dt+4]<<24|Se[Dt+5]<<16|Se[Dt+6]<<8|Se[Dt+7];for(Mt=0;Mt<80;Mt++)if(Pe=Yt,Fe=sr,qe=cr,Ye=er,Je=at,tt=pr,Qe=Er,it=Cr,lt=lr,vt=Tr,bt=xr,dt=Or,yt=Ar,Tt=Rr,kt=Fr,Pt=Mr,mt=Cr,gt=Mr,St=gt&65535,xt=gt>>>16,Ct=mt&65535,Nt=mt>>>16,mt=(at>>>14|Ar<<32-14)^(at>>>18|Ar<<32-18)^(Ar>>>41-32|at<<32-(41-32)),gt=(Ar>>>14|at<<32-14)^(Ar>>>18|at<<32-18)^(at>>>41-32|Ar<<32-(41-32)),St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,mt=at&pr^~at&Er,gt=Ar&Rr^~Ar&Fr,St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,mt=Ve[Mt*2],gt=Ve[Mt*2+1],St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,mt=_e[Mt%16],gt=$e[Mt%16],St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,xt+=St>>>16,Ct+=xt>>>16,Nt+=Ct>>>16,It=Ct&65535|Nt<<16,Ot=St&65535|xt<<16,mt=It,gt=Ot,St=gt&65535,xt=gt>>>16,Ct=mt&65535,Nt=mt>>>16,mt=(Yt>>>28|lr<<32-28)^(lr>>>34-32|Yt<<32-(34-32))^(lr>>>39-32|Yt<<32-(39-32)),gt=(lr>>>28|Yt<<32-28)^(Yt>>>34-32|lr<<32-(34-32))^(Yt>>>39-32|lr<<32-(39-32)),St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,mt=Yt&sr^Yt&cr^sr&cr,gt=lr&Tr^lr&xr^Tr&xr,St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,xt+=St>>>16,Ct+=xt>>>16,Nt+=Ct>>>16,it=Ct&65535|Nt<<16,Pt=St&65535|xt<<16,mt=Ye,gt=dt,St=gt&65535,xt=gt>>>16,Ct=mt&65535,Nt=mt>>>16,mt=It,gt=Ot,St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,xt+=St>>>16,Ct+=xt>>>16,Nt+=Ct>>>16,Ye=Ct&65535|Nt<<16,dt=St&65535|xt<<16,sr=Pe,cr=Fe,er=qe,at=Ye,pr=Je,Er=tt,Cr=Qe,Yt=it,Tr=lt,xr=vt,Or=bt,Ar=dt,Rr=yt,Fr=Tt,Mr=kt,lr=Pt,Mt%16===15)for(Dt=0;Dt<16;Dt++)mt=_e[Dt],gt=$e[Dt],St=gt&65535,xt=gt>>>16,Ct=mt&65535,Nt=mt>>>16,mt=_e[(Dt+9)%16],gt=$e[(Dt+9)%16],St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,It=_e[(Dt+1)%16],Ot=$e[(Dt+1)%16],mt=(It>>>1|Ot<<32-1)^(It>>>8|Ot<<32-8)^It>>>7,gt=(Ot>>>1|It<<32-1)^(Ot>>>8|It<<32-8)^(Ot>>>7|It<<32-7),St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,It=_e[(Dt+14)%16],Ot=$e[(Dt+14)%16],mt=(It>>>19|Ot<<32-19)^(Ot>>>61-32|It<<32-(61-32))^It>>>6,gt=(Ot>>>19|It<<32-19)^(It>>>61-32|Ot<<32-(61-32))^(Ot>>>6|It<<32-6),St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,xt+=St>>>16,Ct+=xt>>>16,Nt+=Ct>>>16,_e[Dt]=Ct&65535|Nt<<16,$e[Dt]=St&65535|xt<<16;mt=Yt,gt=lr,St=gt&65535,xt=gt>>>16,Ct=mt&65535,Nt=mt>>>16,mt=De[0],gt=ke[0],St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,xt+=St>>>16,Ct+=xt>>>16,Nt+=Ct>>>16,De[0]=Yt=Ct&65535|Nt<<16,ke[0]=lr=St&65535|xt<<16,mt=sr,gt=Tr,St=gt&65535,xt=gt>>>16,Ct=mt&65535,Nt=mt>>>16,mt=De[1],gt=ke[1],St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,xt+=St>>>16,Ct+=xt>>>16,Nt+=Ct>>>16,De[1]=sr=Ct&65535|Nt<<16,ke[1]=Tr=St&65535|xt<<16,mt=cr,gt=xr,St=gt&65535,xt=gt>>>16,Ct=mt&65535,Nt=mt>>>16,mt=De[2],gt=ke[2],St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,xt+=St>>>16,Ct+=xt>>>16,Nt+=Ct>>>16,De[2]=cr=Ct&65535|Nt<<16,ke[2]=xr=St&65535|xt<<16,mt=er,gt=Or,St=gt&65535,xt=gt>>>16,Ct=mt&65535,Nt=mt>>>16,mt=De[3],gt=ke[3],St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,xt+=St>>>16,Ct+=xt>>>16,Nt+=Ct>>>16,De[3]=er=Ct&65535|Nt<<16,ke[3]=Or=St&65535|xt<<16,mt=at,gt=Ar,St=gt&65535,xt=gt>>>16,Ct=mt&65535,Nt=mt>>>16,mt=De[4],gt=ke[4],St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,xt+=St>>>16,Ct+=xt>>>16,Nt+=Ct>>>16,De[4]=at=Ct&65535|Nt<<16,ke[4]=Ar=St&65535|xt<<16,mt=pr,gt=Rr,St=gt&65535,xt=gt>>>16,Ct=mt&65535,Nt=mt>>>16,mt=De[5],gt=ke[5],St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,xt+=St>>>16,Ct+=xt>>>16,Nt+=Ct>>>16,De[5]=pr=Ct&65535|Nt<<16,ke[5]=Rr=St&65535|xt<<16,mt=Er,gt=Fr,St=gt&65535,xt=gt>>>16,Ct=mt&65535,Nt=mt>>>16,mt=De[6],gt=ke[6],St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,xt+=St>>>16,Ct+=xt>>>16,Nt+=Ct>>>16,De[6]=Er=Ct&65535|Nt<<16,ke[6]=Fr=St&65535|xt<<16,mt=Cr,gt=Mr,St=gt&65535,xt=gt>>>16,Ct=mt&65535,Nt=mt>>>16,mt=De[7],gt=ke[7],St+=gt&65535,xt+=gt>>>16,Ct+=mt&65535,Nt+=mt>>>16,xt+=St>>>16,Ct+=xt>>>16,Nt+=Ct>>>16,De[7]=Cr=Ct&65535|Nt<<16,ke[7]=Mr=St&65535|xt<<16,zr+=128,se-=128}return se}function Me(De,ke,Se){var se=new Int32Array(8),_e=new Int32Array(8),$e=new Uint8Array(256),Pe,Fe=Se;for(se[0]=1779033703,se[1]=3144134277,se[2]=1013904242,se[3]=2773480762,se[4]=1359893119,se[5]=2600822924,se[6]=528734635,se[7]=1541459225,_e[0]=4089235720,_e[1]=2227873595,_e[2]=4271175723,_e[3]=1595750129,_e[4]=2917565137,_e[5]=725511199,_e[6]=4215389547,_e[7]=327033209,Ie(se,_e,ke,Se),Se%=128,Pe=0;Pe<Se;Pe++)$e[Pe]=ke[Fe-Se+Pe];for($e[Se]=128,Se=256-128*(Se<112?1:0),$e[Se-9]=0,O($e,Se-8,Fe/536870912|0,Fe<<3),Ie(se,_e,$e,Se),Pe=0;Pe<8;Pe++)O(De,8*Pe,se[Pe],_e[Pe]);return 0}function He(De,ke){var Se=_(),se=_(),_e=_(),$e=_(),Pe=_(),Fe=_(),qe=_(),Ye=_(),Je=_();ue(Se,De[1],De[0]),ue(Je,ke[1],ke[0]),be(Se,Se,Je),le(se,De[0],De[1]),le(Je,ke[0],ke[1]),be(se,se,Je),be(_e,De[3],ke[3]),be(_e,_e,I),be($e,De[2],ke[2]),le($e,$e,$e),ue(Pe,se,Se),ue(Fe,$e,_e),le(qe,$e,_e),le(Ye,se,Se),be(De[0],Pe,Fe),be(De[1],Ye,qe),be(De[2],qe,Fe),be(De[3],Pe,Ye)}function We(De,ke,Se){var se;for(se=0;se<4;se++)oe(De[se],ke[se],Se)}function Ue(De,ke){var Se=_(),se=_(),_e=_();ye(_e,ke[2]),be(Se,ke[0],_e),be(se,ke[1],_e),ie(De,se),De[31]^=te(Se)<<7}function Ge(De,ke,Se){var se,_e;for(ee(De[0],C),ee(De[1],T),ee(De[2],T),ee(De[3],C),_e=255;_e>=0;--_e)se=Se[_e/8|0]>>(_e&7)&1,We(De,ke,se),He(ke,De),He(De,De),We(De,ke,se)}function et(De,ke){var Se=[_(),_(),_(),_()];ee(Se[0],N),ee(Se[1],V),ee(Se[2],T),be(Se[3],N,V),Ge(De,Se,ke)}function ot(De,ke,Se){var se=new Uint8Array(64),_e=[_(),_(),_(),_()],$e;for(Se||x(ke,32),Me(se,ke,32),se[0]&=248,se[31]&=127,se[31]|=64,et(_e,se),Ue(De,_e),$e=0;$e<32;$e++)ke[$e+32]=De[$e];return 0}var ht=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Oe(De,ke){var Se,se,_e,$e;for(se=63;se>=32;--se){for(Se=0,_e=se-32,$e=se-12;_e<$e;++_e)ke[_e]+=Se-16*ke[se]*ht[_e-(se-32)],Se=Math.floor((ke[_e]+128)/256),ke[_e]-=Se*256;ke[_e]+=Se,ke[se]=0}for(Se=0,_e=0;_e<32;_e++)ke[_e]+=Se-(ke[31]>>4)*ht[_e],Se=ke[_e]>>8,ke[_e]&=255;for(_e=0;_e<32;_e++)ke[_e]-=Se*ht[_e];for(se=0;se<32;se++)ke[se+1]+=ke[se]>>8,De[se]=ke[se]&255}function we(De){var ke=new Float64Array(64),Se;for(Se=0;Se<64;Se++)ke[Se]=De[Se];for(Se=0;Se<64;Se++)De[Se]=0;Oe(De,ke)}function Ce(De,ke,Se,se){var _e=new Uint8Array(64),$e=new Uint8Array(64),Pe=new Uint8Array(64),Fe,qe,Ye=new Float64Array(64),Je=[_(),_(),_(),_()];Me(_e,se,32),_e[0]&=248,_e[31]&=127,_e[31]|=64;var tt=Se+64;for(Fe=0;Fe<Se;Fe++)De[64+Fe]=ke[Fe];for(Fe=0;Fe<32;Fe++)De[32+Fe]=_e[32+Fe];for(Me(Pe,De.subarray(32),Se+32),we(Pe),et(Je,Pe),Ue(De,Je),Fe=32;Fe<64;Fe++)De[Fe]=se[Fe];for(Me($e,De,Se+64),we($e),Fe=0;Fe<64;Fe++)Ye[Fe]=0;for(Fe=0;Fe<32;Fe++)Ye[Fe]=Pe[Fe];for(Fe=0;Fe<32;Fe++)for(qe=0;qe<32;qe++)Ye[Fe+qe]+=$e[Fe]*_e[qe];return Oe(De.subarray(32),Ye),tt}function ze(De,ke){var Se=_(),se=_(),_e=_(),$e=_(),Pe=_(),Fe=_(),qe=_();return ee(De[2],T),K(De[1],ke),ge(_e,De[1]),be($e,_e,A),ue(_e,_e,De[2]),le($e,De[2],$e),ge(Pe,$e),ge(Fe,Pe),be(qe,Fe,Pe),be(Se,qe,_e),be(Se,Se,$e),Ee(Se,Se),be(Se,Se,_e),be(Se,Se,$e),be(Se,Se,$e),be(De[0],Se,$e),ge(se,De[0]),be(se,se,$e),ne(se,_e)&&be(De[0],De[0],D),ge(se,De[0]),be(se,se,$e),ne(se,_e)?-1:(te(De[0])===ke[31]>>7&&ue(De[0],C,De[0]),be(De[3],De[0],De[1]),0)}function Ze(De,ke,Se,se){var _e,$e=new Uint8Array(32),Pe=new Uint8Array(64),Fe=[_(),_(),_(),_()],qe=[_(),_(),_(),_()];if(Se<64||ze(qe,se))return-1;for(_e=0;_e<Se;_e++)De[_e]=ke[_e];for(_e=0;_e<32;_e++)De[_e+32]=se[_e];if(Me(Pe,De,Se),we(Pe),Ge(Fe,qe,Pe),et(qe,ke.subarray(32)),He(Fe,qe),Ue($e,Fe),Se-=64,L(ke,0,$e,0)){for(_e=0;_e<Se;_e++)De[_e]=0;return-1}for(_e=0;_e<Se;_e++)De[_e]=ke[_e+64];return Se}var st=32,rt=24,Ft=32,Vt=16,Et=32,jt=32,Lt=32,qt=32,_r=32,Zt=rt,zt=Ft,hr=Vt,Xt=64,Ht=32,gr=64,Qt=32,Kt=64;n.lowlevel={crypto_core_hsalsa20:X,crypto_stream_xor:ve,crypto_stream:ce,crypto_stream_salsa20_xor:Z,crypto_stream_salsa20:ae,crypto_onetimeauth:G,crypto_onetimeauth_verify:Y,crypto_verify_16:M,crypto_verify_32:L,crypto_secretbox:U,crypto_secretbox_open:W,crypto_scalarmult:Re,crypto_scalarmult_base:Ne,crypto_box_beforenm:he,crypto_box_afternm:xe,crypto_box:Be,crypto_box_open:Le,crypto_box_keypair:Te,crypto_hash:Me,crypto_sign:Ce,crypto_sign_keypair:ot,crypto_sign_open:Ze,crypto_secretbox_KEYBYTES:st,crypto_secretbox_NONCEBYTES:rt,crypto_secretbox_ZEROBYTES:Ft,crypto_secretbox_BOXZEROBYTES:Vt,crypto_scalarmult_BYTES:Et,crypto_scalarmult_SCALARBYTES:jt,crypto_box_PUBLICKEYBYTES:Lt,crypto_box_SECRETKEYBYTES:qt,crypto_box_BEFORENMBYTES:_r,crypto_box_NONCEBYTES:Zt,crypto_box_ZEROBYTES:zt,crypto_box_BOXZEROBYTES:hr,crypto_sign_BYTES:Xt,crypto_sign_PUBLICKEYBYTES:Ht,crypto_sign_SECRETKEYBYTES:gr,crypto_sign_SEEDBYTES:Qt,crypto_hash_BYTES:Kt,gf:_,D:A,L:ht,pack25519:ie,unpack25519:K,M:be,A:le,S:ge,Z:ue,pow2523:Ee,add:He,set25519:ee,modL:Oe,scalarmult:Ge,scalarbase:et};function $r(De,ke){if(De.length!==st)throw new Error("bad key size");if(ke.length!==rt)throw new Error("bad nonce size")}function tr(De,ke){if(De.length!==Lt)throw new Error("bad public key size");if(ke.length!==qt)throw new Error("bad secret key size")}function Ut(){for(var De=0;De<arguments.length;De++)if(!(arguments[De]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function wr(De){for(var ke=0;ke<De.length;ke++)De[ke]=0}n.randomBytes=function(De){var ke=new Uint8Array(De);return x(ke,De),ke},n.secretbox=function(De,ke,Se){Ut(De,ke,Se),$r(Se,ke);for(var se=new Uint8Array(Ft+De.length),_e=new Uint8Array(se.length),$e=0;$e<De.length;$e++)se[$e+Ft]=De[$e];return U(_e,se,se.length,ke,Se),_e.subarray(Vt)},n.secretbox.open=function(De,ke,Se){Ut(De,ke,Se),$r(Se,ke);for(var se=new Uint8Array(Vt+De.length),_e=new Uint8Array(se.length),$e=0;$e<De.length;$e++)se[$e+Vt]=De[$e];return se.length<32||W(_e,se,se.length,ke,Se)!==0?null:_e.subarray(Ft)},n.secretbox.keyLength=st,n.secretbox.nonceLength=rt,n.secretbox.overheadLength=Vt,n.scalarMult=function(De,ke){if(Ut(De,ke),De.length!==jt)throw new Error("bad n size");if(ke.length!==Et)throw new Error("bad p size");var Se=new Uint8Array(Et);return Re(Se,De,ke),Se},n.scalarMult.base=function(De){if(Ut(De),De.length!==jt)throw new Error("bad n size");var ke=new Uint8Array(Et);return Ne(ke,De),ke},n.scalarMult.scalarLength=jt,n.scalarMult.groupElementLength=Et,n.box=function(De,ke,Se,se){var _e=n.box.before(Se,se);return n.secretbox(De,ke,_e)},n.box.before=function(De,ke){Ut(De,ke),tr(De,ke);var Se=new Uint8Array(_r);return he(Se,De,ke),Se},n.box.after=n.secretbox,n.box.open=function(De,ke,Se,se){var _e=n.box.before(Se,se);return n.secretbox.open(De,ke,_e)},n.box.open.after=n.secretbox.open,n.box.keyPair=function(){var De=new Uint8Array(Lt),ke=new Uint8Array(qt);return Te(De,ke),{publicKey:De,secretKey:ke}},n.box.keyPair.fromSecretKey=function(De){if(Ut(De),De.length!==qt)throw new Error("bad secret key size");var ke=new Uint8Array(Lt);return Ne(ke,De),{publicKey:ke,secretKey:new Uint8Array(De)}},n.box.publicKeyLength=Lt,n.box.secretKeyLength=qt,n.box.sharedKeyLength=_r,n.box.nonceLength=Zt,n.box.overheadLength=n.secretbox.overheadLength,n.sign=function(De,ke){if(Ut(De,ke),ke.length!==gr)throw new Error("bad secret key size");var Se=new Uint8Array(Xt+De.length);return Ce(Se,De,De.length,ke),Se},n.sign.open=function(De,ke){if(Ut(De,ke),ke.length!==Ht)throw new Error("bad public key size");var Se=new Uint8Array(De.length),se=Ze(Se,De,De.length,ke);if(se<0)return null;for(var _e=new Uint8Array(se),$e=0;$e<_e.length;$e++)_e[$e]=Se[$e];return _e},n.sign.detached=function(De,ke){for(var Se=n.sign(De,ke),se=new Uint8Array(Xt),_e=0;_e<se.length;_e++)se[_e]=Se[_e];return se},n.sign.detached.verify=function(De,ke,Se){if(Ut(De,ke,Se),ke.length!==Xt)throw new Error("bad signature size");if(Se.length!==Ht)throw new Error("bad public key size");var se=new Uint8Array(Xt+De.length),_e=new Uint8Array(Xt+De.length),$e;for($e=0;$e<Xt;$e++)se[$e]=ke[$e];for($e=0;$e<De.length;$e++)se[$e+Xt]=De[$e];return Ze(_e,se,se.length,Se)>=0},n.sign.keyPair=function(){var De=new Uint8Array(Ht),ke=new Uint8Array(gr);return ot(De,ke),{publicKey:De,secretKey:ke}},n.sign.keyPair.fromSecretKey=function(De){if(Ut(De),De.length!==gr)throw new Error("bad secret key size");for(var ke=new Uint8Array(Ht),Se=0;Se<ke.length;Se++)ke[Se]=De[32+Se];return{publicKey:ke,secretKey:new Uint8Array(De)}},n.sign.keyPair.fromSeed=function(De){if(Ut(De),De.length!==Qt)throw new Error("bad seed size");for(var ke=new Uint8Array(Ht),Se=new Uint8Array(gr),se=0;se<32;se++)Se[se]=De[se];return ot(ke,Se,!0),{publicKey:ke,secretKey:Se}},n.sign.publicKeyLength=Ht,n.sign.secretKeyLength=gr,n.sign.seedLength=Qt,n.sign.signatureLength=Xt,n.hash=function(De){Ut(De);var ke=new Uint8Array(Kt);return Me(ke,De,De.length),ke},n.hash.hashLength=Kt,n.verify=function(De,ke){return Ut(De,ke),De.length===0||ke.length===0||De.length!==ke.length?!1:F(De,0,ke,0,De.length)===0},n.setPRNG=function(De){x=De},function(){var De=typeof self<"u"?self.crypto||self.msCrypto:null;if(De&&De.getRandomValues){var ke=65536;n.setPRNG(function(Se,se){var _e,$e=new Uint8Array(se);for(_e=0;_e<se;_e+=ke)De.getRandomValues($e.subarray(_e,_e+Math.min(se-_e,ke)));for(_e=0;_e<se;_e++)Se[_e]=$e[_e];wr($e)})}else typeof commonjsRequire<"u"&&(De=requireCryptoBrowserify(),De&&De.randomBytes&&n.setPRNG(function(Se,se){var _e,$e=De.randomBytes(se);for(_e=0;_e<se;_e++)Se[_e]=$e[_e];wr($e)}))}()})(r.exports?r.exports:self.nacl=self.nacl||{})})(naclFast);var naclFastExports=naclFast.exports;const nacl=getDefaultExportFromCjs(naclFastExports);var jsonify={},parse,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse;hasRequiredParse=1;var r,n,_={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},x;function S(D){throw{name:"SyntaxError",message:D,at:r,text:x}}function E(D){return D&&D!==n&&S("Expected '"+D+"' instead of '"+n+"'"),n=x.charAt(r),r+=1,n}function C(){var D,O="";for(n==="-"&&(O="-",E("-"));n>="0"&&n<="9";)O+=n,E();if(n===".")for(O+=".";E()&&n>="0"&&n<="9";)O+=n;if(n==="e"||n==="E")for(O+=n,E(),(n==="-"||n==="+")&&(O+=n,E());n>="0"&&n<="9";)O+=n,E();return D=Number(O),isFinite(D)||S("Bad number"),D}function T(){var D,O,F="",M;if(n==='"')for(;E();){if(n==='"')return E(),F;if(n==="\\")if(E(),n==="u"){for(M=0,O=0;O<4&&(D=parseInt(E(),16),!!isFinite(D));O+=1)M=M*16+D;F+=String.fromCharCode(M)}else if(typeof _[n]=="string")F+=_[n];else break;else F+=n}S("Bad string")}function B(){for(;n&&n<=" ";)E()}function A(){switch(n){case"t":return E("t"),E("r"),E("u"),E("e"),!0;case"f":return E("f"),E("a"),E("l"),E("s"),E("e"),!1;case"n":return E("n"),E("u"),E("l"),E("l"),null;default:S("Unexpected '"+n+"'")}}function I(){var D=[];if(n==="["){if(E("["),B(),n==="]")return E("]"),D;for(;n;){if(D.push(V()),B(),n==="]")return E("]"),D;E(","),B()}}S("Bad array")}function N(){var D,O={};if(n==="{"){if(E("{"),B(),n==="}")return E("}"),O;for(;n;){if(D=T(),B(),E(":"),Object.prototype.hasOwnProperty.call(O,D)&&S('Duplicate key "'+D+'"'),O[D]=V(),B(),n==="}")return E("}"),O;E(","),B()}}S("Bad object")}function V(){switch(B(),n){case"{":return N();case"[":return I();case'"':return T();case"-":return C();default:return n>="0"&&n<="9"?C():A()}}return parse=function(D,O){var F;return x=D,r=0,n=" ",F=V(),B(),n&&S("Syntax error"),typeof O=="function"?function M(L,j){var q,H,X=L[j];if(X&&typeof X=="object")for(q in V)Object.prototype.hasOwnProperty.call(X,q)&&(H=M(X,q),typeof H>"u"?delete X[q]:X[q]=H);return O.call(L,j,X)}({"":F},""):F},parse}var stringify$1,hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify$1;hasRequiredStringify=1;var r=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,_,x={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},S;function E(T){return r.lastIndex=0,r.test(T)?'"'+T.replace(r,function(B){var A=x[B];return typeof A=="string"?A:"\\u"+("0000"+B.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+T+'"'}function C(T,B){var A,I,N,V,D=n,O,F=B[T];switch(F&&typeof F=="object"&&typeof F.toJSON=="function"&&(F=F.toJSON(T)),typeof S=="function"&&(F=S.call(B,T,F)),typeof F){case"string":return E(F);case"number":return isFinite(F)?String(F):"null";case"boolean":case"null":return String(F);case"object":if(!F)return"null";if(n+=_,O=[],Object.prototype.toString.apply(F)==="[object Array]"){for(V=F.length,A=0;A<V;A+=1)O[A]=C(A,F)||"null";return N=O.length===0?"[]":n?`[
`+n+O.join(`,
`+n)+`
`+D+"]":"["+O.join(",")+"]",n=D,N}if(S&&typeof S=="object")for(V=S.length,A=0;A<V;A+=1)I=S[A],typeof I=="string"&&(N=C(I,F),N&&O.push(E(I)+(n?": ":":")+N));else for(I in F)Object.prototype.hasOwnProperty.call(F,I)&&(N=C(I,F),N&&O.push(E(I)+(n?": ":":")+N));return N=O.length===0?"{}":n?`{
`+n+O.join(`,
`+n)+`
`+D+"}":"{"+O.join(",")+"}",n=D,N}}return stringify$1=function(T,B,A){var I;if(n="",_="",typeof A=="number")for(I=0;I<A;I+=1)_+=" ";else typeof A=="string"&&(_=A);if(S=B,B&&typeof B!="function"&&(typeof B!="object"||typeof B.length!="number"))throw new Error("JSON.stringify");return C("",{"":T})},stringify$1}var hasRequiredJsonify;function requireJsonify(){return hasRequiredJsonify||(hasRequiredJsonify=1,jsonify.parse=requireParse(),jsonify.stringify=requireStringify()),jsonify}var json=typeof JSON<"u"?JSON:requireJsonify(),isArray$2=Array.isArray||function(r){return{}.toString.call(r)==="[object Array]"},objectKeys=Object.keys||function(r){var n=Object.prototype.hasOwnProperty||function(){return!0},_=[];for(var x in r)n.call(r,x)&&_.push(x);return _},jsonStableStringify=function(r,n){n||(n={}),typeof n=="function"&&(n={cmp:n});var _=n.space||"";typeof _=="number"&&(_=Array(_+1).join(" "));var x=typeof n.cycles=="boolean"?n.cycles:!1,S=n.replacer||function(T,B){return B},E=n.cmp&&function(T){return function(B){return function(A,I){var N={key:A,value:B[A]},V={key:I,value:B[I]};return T(N,V)}}}(n.cmp),C=[];return function T(B,A,I,N){var V=_?`
`+new Array(N+1).join(_):"",D=_?": ":":";if(I&&I.toJSON&&typeof I.toJSON=="function"&&(I=I.toJSON()),I=S.call(B,A,I),I!==void 0){if(typeof I!="object"||I===null)return json.stringify(I);if(isArray$2(I)){for(var L=[],O=0;O<I.length;O++){var F=T(I,O,I[O],N+1)||json.stringify(null);L.push(V+_+F)}return"["+L.join(",")+V+"]"}if(C.indexOf(I)!==-1){if(x)return json.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else C.push(I);for(var M=objectKeys(I).sort(E&&E(I)),L=[],O=0;O<M.length;O++){var A=M[O],j=T(I,A,I[A],N+1);if(j){var q=json.stringify(A)+D+j;L.push(V+_+q)}}return C.splice(C.indexOf(I),1),"{"+L.join(",")+V+"}"}}({"":r},"",r,0)};const stringify=getDefaultExportFromCjs(jsonStableStringify);var scrypt={exports:{}};(function(r,n){(function(_){function S(F){const M=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let L=1779033703,j=3144134277,q=1013904242,H=2773480762,X=1359893119,J=2600822924,Z=528734635,ae=1541459225;const ce=new Uint32Array(64);function ve(re){let oe=0,ie=re.length;for(;ie>=64;){let ne=L,te=j,K=q,le=H,ue=X,be=J,ge=Z,ye=ae,Ee,Re,Ne,Te,he;for(Re=0;Re<16;Re++)Ne=oe+Re*4,ce[Re]=(re[Ne]&255)<<24|(re[Ne+1]&255)<<16|(re[Ne+2]&255)<<8|re[Ne+3]&255;for(Re=16;Re<64;Re++)Ee=ce[Re-2],Te=(Ee>>>17|Ee<<32-17)^(Ee>>>19|Ee<<32-19)^Ee>>>10,Ee=ce[Re-15],he=(Ee>>>7|Ee<<32-7)^(Ee>>>18|Ee<<32-18)^Ee>>>3,ce[Re]=(Te+ce[Re-7]|0)+(he+ce[Re-16]|0)|0;for(Re=0;Re<64;Re++)Te=(((ue>>>6|ue<<32-6)^(ue>>>11|ue<<32-11)^(ue>>>25|ue<<32-25))+(ue&be^~ue&ge)|0)+(ye+(M[Re]+ce[Re]|0)|0)|0,he=((ne>>>2|ne<<32-2)^(ne>>>13|ne<<32-13)^(ne>>>22|ne<<32-22))+(ne&te^ne&K^te&K)|0,ye=ge,ge=be,be=ue,ue=le+Te|0,le=K,K=te,te=ne,ne=Te+he|0;L=L+ne|0,j=j+te|0,q=q+K|0,H=H+le|0,X=X+ue|0,J=J+be|0,Z=Z+ge|0,ae=ae+ye|0,oe+=64,ie-=64}}ve(F);let pe,G=F.length%64,Y=F.length/536870912|0,U=F.length<<3,W=G<56?56:120,ee=F.slice(F.length-G,F.length);for(ee.push(128),pe=G+1;pe<W;pe++)ee.push(0);return ee.push(Y>>>24&255),ee.push(Y>>>16&255),ee.push(Y>>>8&255),ee.push(Y>>>0&255),ee.push(U>>>24&255),ee.push(U>>>16&255),ee.push(U>>>8&255),ee.push(U>>>0&255),ve(ee),[L>>>24&255,L>>>16&255,L>>>8&255,L>>>0&255,j>>>24&255,j>>>16&255,j>>>8&255,j>>>0&255,q>>>24&255,q>>>16&255,q>>>8&255,q>>>0&255,H>>>24&255,H>>>16&255,H>>>8&255,H>>>0&255,X>>>24&255,X>>>16&255,X>>>8&255,X>>>0&255,J>>>24&255,J>>>16&255,J>>>8&255,J>>>0&255,Z>>>24&255,Z>>>16&255,Z>>>8&255,Z>>>0&255,ae>>>24&255,ae>>>16&255,ae>>>8&255,ae>>>0&255]}function E(F,M,L){F=F.length<=64?F:S(F);const j=64+M.length+4,q=new Array(j),H=new Array(64);let X,J=[];for(X=0;X<64;X++)q[X]=54;for(X=0;X<F.length;X++)q[X]^=F[X];for(X=0;X<M.length;X++)q[64+X]=M[X];for(X=j-4;X<j;X++)q[X]=0;for(X=0;X<64;X++)H[X]=92;for(X=0;X<F.length;X++)H[X]^=F[X];function Z(){for(let ae=j-1;ae>=j-4;ae--){if(q[ae]++,q[ae]<=255)return;q[ae]=0}}for(;L>=32;)Z(),J=J.concat(S(H.concat(S(q)))),L-=32;return L>0&&(Z(),J=J.concat(S(H.concat(S(q))).slice(0,L))),J}function C(F,M,L,j,q){let H;for(I(F,(2*L-1)*16,q,0,16),H=0;H<2*L;H++)A(F,H*16,q,16),B(q,j),I(q,0,F,M+H*16,16);for(H=0;H<L;H++)I(F,M+H*2*16,F,H*16,16);for(H=0;H<L;H++)I(F,M+(H*2+1)*16,F,(H+L)*16,16)}function T(F,M){return F<<M|F>>>32-M}function B(F,M){I(F,0,M,0,16);for(let L=8;L>0;L-=2)M[4]^=T(M[0]+M[12],7),M[8]^=T(M[4]+M[0],9),M[12]^=T(M[8]+M[4],13),M[0]^=T(M[12]+M[8],18),M[9]^=T(M[5]+M[1],7),M[13]^=T(M[9]+M[5],9),M[1]^=T(M[13]+M[9],13),M[5]^=T(M[1]+M[13],18),M[14]^=T(M[10]+M[6],7),M[2]^=T(M[14]+M[10],9),M[6]^=T(M[2]+M[14],13),M[10]^=T(M[6]+M[2],18),M[3]^=T(M[15]+M[11],7),M[7]^=T(M[3]+M[15],9),M[11]^=T(M[7]+M[3],13),M[15]^=T(M[11]+M[7],18),M[1]^=T(M[0]+M[3],7),M[2]^=T(M[1]+M[0],9),M[3]^=T(M[2]+M[1],13),M[0]^=T(M[3]+M[2],18),M[6]^=T(M[5]+M[4],7),M[7]^=T(M[6]+M[5],9),M[4]^=T(M[7]+M[6],13),M[5]^=T(M[4]+M[7],18),M[11]^=T(M[10]+M[9],7),M[8]^=T(M[11]+M[10],9),M[9]^=T(M[8]+M[11],13),M[10]^=T(M[9]+M[8],18),M[12]^=T(M[15]+M[14],7),M[13]^=T(M[12]+M[15],9),M[14]^=T(M[13]+M[12],13),M[15]^=T(M[14]+M[13],18);for(let L=0;L<16;++L)F[L]+=M[L]}function A(F,M,L,j){for(let q=0;q<j;q++)L[q]^=F[M+q]}function I(F,M,L,j,q){for(;q--;)L[j++]=F[M++]}function N(F){if(!F||typeof F.length!="number")return!1;for(let M=0;M<F.length;M++){const L=F[M];if(typeof L!="number"||L%1||L<0||L>=256)return!1}return!0}function V(F,M){if(typeof F!="number"||F%1)throw new Error("invalid "+M);return F}function D(F,M,L,j,q,H,X){if(L=V(L,"N"),j=V(j,"r"),q=V(q,"p"),H=V(H,"dkLen"),L===0||L&L-1)throw new Error("N must be power of 2");if(L>2147483647/128/j)throw new Error("N too large");if(j>2147483647/128/q)throw new Error("r too large");if(!N(F))throw new Error("password must be an array or buffer");if(F=Array.prototype.slice.call(F),!N(M))throw new Error("salt must be an array or buffer");M=Array.prototype.slice.call(M);let J=E(F,M,q*128*j);const Z=new Uint32Array(q*32*j);for(let ue=0;ue<Z.length;ue++){const be=ue*4;Z[ue]=(J[be+3]&255)<<24|(J[be+2]&255)<<16|(J[be+1]&255)<<8|(J[be+0]&255)<<0}const ae=new Uint32Array(64*j),ce=new Uint32Array(32*j*L),ve=32*j,pe=new Uint32Array(16),G=new Uint32Array(16),Y=q*L*2;let U=0,W=null,ee=!1,re=0,oe=0,ie,ne;const te=X?parseInt(1e3/j):4294967295,K=typeof setImmediate<"u"?setImmediate:setTimeout,le=function(){if(ee)return X(new Error("cancelled"),U/Y);let ue;switch(re){case 0:ne=oe*32*j,I(Z,ne,ae,0,ve),re=1,ie=0;case 1:ue=L-ie,ue>te&&(ue=te);for(let ge=0;ge<ue;ge++)I(ae,0,ce,(ie+ge)*ve,ve),C(ae,ve,j,pe,G);if(ie+=ue,U+=ue,X){const ge=parseInt(1e3*U/Y);if(ge!==W){if(ee=X(null,U/Y),ee)break;W=ge}}if(ie<L)break;ie=0,re=2;case 2:ue=L-ie,ue>te&&(ue=te);for(let ge=0;ge<ue;ge++){const ye=(2*j-1)*16,Ee=ae[ye]&L-1;A(ce,Ee*ve,ae,ve),C(ae,ve,j,pe,G)}if(ie+=ue,U+=ue,X){const ge=parseInt(1e3*U/Y);if(ge!==W){if(ee=X(null,U/Y),ee)break;W=ge}}if(ie<L)break;if(I(ae,0,Z,ne,ve),oe++,oe<q){re=0;break}J=[];for(let ge=0;ge<Z.length;ge++)J.push(Z[ge]>>0&255),J.push(Z[ge]>>8&255),J.push(Z[ge]>>16&255),J.push(Z[ge]>>24&255);const be=E(F,J,H);return X&&X(null,1,be),be}X&&K(le)};if(!X)for(;;){const ue=le();if(ue!=null)return ue}le()}const O={scrypt:function(F,M,L,j,q,H,X){return new Promise(function(J,Z){let ae=0;X&&X(0),D(F,M,L,j,q,H,function(ce,ve,pe){if(ce)Z(ce);else if(pe)X&&ae!==1&&X(1),J(new Uint8Array(pe));else if(X&&ve!==ae)return ae=ve,X(ve)})})},syncScrypt:function(F,M,L,j,q,H){return new Uint8Array(D(F,M,L,j,q,H))}};r.exports=O})()})(scrypt);var nonceLength=nacl.box.nonceLength,newNonce=function r(){return nacl.randomBytes(nonceLength)},keypairToBase64=function r(n){return{publicKey:encode_1$1(n.publicKey),secretKey:encode_1$1(n.secretKey)}},keyToBytes=function r(n,_){_===void 0&&(_="base64");var x=_==="base64"?decode_1$1:encode_1;return typeof n=="string"?x(n):n},utf8=utf8$1,payloadToBytes=function r(n){return typeof n=="string"?utf8.encode(n):ArrayBuffer.isView(n)?n:utf8.encode(stringify(n))};function keyPair(r){var n=r?nacl.box.keyPair.fromSecretKey(keyToBytes(r)):nacl.box.keyPair();return keypairToBase64(n)}function encrypt(r){var n=r.secret,_=r.recipientPublicKey,x=r.senderSecretKey,S=newNonce(),E=payloadToBytes(n),C;if(x===void 0){var T=keyPair();x=T.secretKey,C=T.publicKey}else C=void 0;var B=nacl.box(E,S,keyToBytes(_),keyToBytes(x)),A=browser$1.encode({nonce:S,message:B,senderPublicKey:C});return encode_1$1(A)}function decrypt(r){var n,_=r.cipher,x=r.senderPublicKey,S=r.recipientSecretKey,E=keyToBytes(_),C=browser$1.decode(E),T=C.nonce,B=C.message;x=(n=x)!=null?n:C.senderPublicKey;var A=nacl.box.open(B,T,keyToBytes(x),keyToBytes(S));if(!A)throw new Error("Could not decrypt message");return decode_1(A)}var asymmetric={keyPair,encrypt,decrypt},browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var r=1e3,n=r*60,_=n*60,x=_*24,S=x*7,E=x*365.25;ms=function(I,N){N=N||{};var V=typeof I;if(V==="string"&&I.length>0)return C(I);if(V==="number"&&isFinite(I))return N.long?B(I):T(I);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(I))};function C(I){if(I=String(I),!(I.length>100)){var N=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(I);if(N){var V=parseFloat(N[1]),D=(N[2]||"ms").toLowerCase();switch(D){case"years":case"year":case"yrs":case"yr":case"y":return V*E;case"weeks":case"week":case"w":return V*S;case"days":case"day":case"d":return V*x;case"hours":case"hour":case"hrs":case"hr":case"h":return V*_;case"minutes":case"minute":case"mins":case"min":case"m":return V*n;case"seconds":case"second":case"secs":case"sec":case"s":return V*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return V;default:return}}}}function T(I){var N=Math.abs(I);return N>=x?Math.round(I/x)+"d":N>=_?Math.round(I/_)+"h":N>=n?Math.round(I/n)+"m":N>=r?Math.round(I/r)+"s":I+"ms"}function B(I){var N=Math.abs(I);return N>=x?A(I,N,x,"day"):N>=_?A(I,N,_,"hour"):N>=n?A(I,N,n,"minute"):N>=r?A(I,N,r,"second"):I+" ms"}function A(I,N,V,D){var O=N>=V*1.5;return Math.round(I/V)+" "+D+(O?"s":"")}return ms}function setup(r){_.debug=_,_.default=_,_.coerce=B,_.disable=E,_.enable=S,_.enabled=C,_.humanize=requireMs(),_.destroy=A,Object.keys(r).forEach(I=>{_[I]=r[I]}),_.names=[],_.skips=[],_.formatters={};function n(I){let N=0;for(let V=0;V<I.length;V++)N=(N<<5)-N+I.charCodeAt(V),N|=0;return _.colors[Math.abs(N)%_.colors.length]}_.selectColor=n;function _(I){let N,V=null,D,O;function F(...M){if(!F.enabled)return;const L=F,j=Number(new Date),q=j-(N||j);L.diff=q,L.prev=N,L.curr=j,N=j,M[0]=_.coerce(M[0]),typeof M[0]!="string"&&M.unshift("%O");let H=0;M[0]=M[0].replace(/%([a-zA-Z%])/g,(J,Z)=>{if(J==="%%")return"%";H++;const ae=_.formatters[Z];if(typeof ae=="function"){const ce=M[H];J=ae.call(L,ce),M.splice(H,1),H--}return J}),_.formatArgs.call(L,M),(L.log||_.log).apply(L,M)}return F.namespace=I,F.useColors=_.useColors(),F.color=_.selectColor(I),F.extend=x,F.destroy=_.destroy,Object.defineProperty(F,"enabled",{enumerable:!0,configurable:!1,get:()=>V!==null?V:(D!==_.namespaces&&(D=_.namespaces,O=_.enabled(I)),O),set:M=>{V=M}}),typeof _.init=="function"&&_.init(F),F}function x(I,N){const V=_(this.namespace+(typeof N>"u"?":":N)+I);return V.log=this.log,V}function S(I){_.save(I),_.namespaces=I,_.names=[],_.skips=[];let N;const V=(typeof I=="string"?I:"").split(/[\s,]+/),D=V.length;for(N=0;N<D;N++)V[N]&&(I=V[N].replace(/\*/g,".*?"),I[0]==="-"?_.skips.push(new RegExp("^"+I.slice(1)+"$")):_.names.push(new RegExp("^"+I+"$")))}function E(){const I=[..._.names.map(T),..._.skips.map(T).map(N=>"-"+N)].join(",");return _.enable(""),I}function C(I){if(I[I.length-1]==="*")return!0;let N,V;for(N=0,V=_.skips.length;N<V;N++)if(_.skips[N].test(I))return!1;for(N=0,V=_.names.length;N<V;N++)if(_.names[N].test(I))return!0;return!1}function T(I){return I.toString().substring(2,I.toString().length-2).replace(/\.\*\?$/,"*")}function B(I){return I instanceof Error?I.stack||I.message:I}function A(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return _.enable(_.load()),_}var common=setup;(function(r,n){n.formatArgs=x,n.save=S,n.load=E,n.useColors=_,n.storage=C(),n.destroy=(()=>{let B=!1;return()=>{B||(B=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function _(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function x(B){if(B[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+B[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const A="color: "+this.color;B.splice(1,0,A,"color: inherit");let I=0,N=0;B[0].replace(/%[a-zA-Z%]/g,V=>{V!=="%%"&&(I++,V==="%c"&&(N=I))}),B.splice(N,0,A)}n.log=console.debug||console.log||(()=>{});function S(B){try{B?n.storage.setItem("debug",B):n.storage.removeItem("debug")}catch{}}function E(){let B;try{B=n.storage.getItem("debug")}catch{}return!B&&typeof browser$1$1<"u"&&"env"in browser$1$1&&(B={}.DEBUG),B}function C(){try{return localStorage}catch{}}r.exports=common(n);const{formatters:T}=r.exports;T.j=function(B){try{return JSON.stringify(B)}catch(A){return"[UnexpectedJSONParseError]: "+A.message}}})(browser,browser.exports);var browserExports=browser.exports;const debug=getDefaultExportFromCjs(browserExports);var src={exports:{}};function memoize(r,n){var _=n&&n.cache?n.cache:cacheDefault,x=n&&n.serializer?n.serializer:serializerDefault,S=n&&n.strategy?n.strategy:strategyDefault;return S(r,{cache:_,serializer:x})}function isPrimitive(r){return r==null||typeof r=="number"||typeof r=="boolean"}function monadic(r,n,_,x){var S=isPrimitive(x)?x:_(x),E=n.get(S);return typeof E>"u"&&(E=r.call(this,x),n.set(S,E)),E}function variadic(r,n,_){var x=Array.prototype.slice.call(arguments,3),S=_(x),E=n.get(S);return typeof E>"u"&&(E=r.apply(this,x),n.set(S,E)),E}function assemble(r,n,_,x,S){return _.bind(n,r,x,S)}function strategyDefault(r,n){var _=r.length===1?monadic:variadic;return assemble(r,this,_,n.cache.create(),n.serializer)}function strategyVariadic(r,n){var _=variadic;return assemble(r,this,_,n.cache.create(),n.serializer)}function strategyMonadic(r,n){var _=monadic;return assemble(r,this,_,n.cache.create(),n.serializer)}function serializerDefault(){return JSON.stringify(arguments)}function ObjectWithoutPrototypeCache(){this.cache=Object.create(null)}ObjectWithoutPrototypeCache.prototype.has=function(r){return r in this.cache};ObjectWithoutPrototypeCache.prototype.get=function(r){return this.cache[r]};ObjectWithoutPrototypeCache.prototype.set=function(r,n){this.cache[r]=n};var cacheDefault={create:function r(){return new ObjectWithoutPrototypeCache}};src.exports=memoize;src.exports.strategies={variadic:strategyVariadic,monadic:strategyMonadic};var _functionsHaveNames;function functionsHaveNames(){return typeof _functionsHaveNames<"u"?_functionsHaveNames:_functionsHaveNames=function(){return function(){}.name==="foo"}()}var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(r){if(util$7.isFunction(r)){if(functionsHaveNames())return r.name;var n=r.toString(),_=n.match(regex);return _&&_[1]}}function AssertionError(r){this.name="AssertionError",this.actual=r.actual,this.expected=r.expected,this.operator=r.operator,r.message?(this.message=r.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var n=r.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var _=new Error;if(_.stack){var x=_.stack,S=getName(n),E=x.indexOf(`
`+S);if(E>=0){var C=x.indexOf(`
`,E+1);x=x.substring(C+1)}this.stack=x}}}util$7.inherits(AssertionError,Error);function truncate(r,n){return typeof r=="string"?r.length<n?r:r.slice(0,n):r}function inspect(r){if(functionsHaveNames()||!util$7.isFunction(r))return util$7.inspect(r);var n=getName(r),_=n?": "+n:"";return"[Function"+_+"]"}function getMessage(r){return truncate(inspect(r.actual),128)+" "+r.operator+" "+truncate(inspect(r.expected),128)}function fail(r,n,_,x,S){throw new AssertionError({message:_,actual:r,expected:n,operator:x,stackStartFunction:S})}var KeyType;(function(r){r.TEAM="TEAM",r.ROLE="ROLE",r.MEMBER="MEMBER",r.DEVICE="DEVICE",r.EPHEMERAL="EPHEMERAL"})(KeyType||(KeyType={}));var ADMIN="admin";KeyType.TEAM,KeyType.TEAM;KeyType.ROLE;KeyType.EPHEMERAL,KeyType.EPHEMERAL;var BASE30_ALPHABET="abcdefghjkmnpqrsuvwxyz23456789".split("");BASE30_ALPHABET.length;var HashPurpose;(function(r){r.SIGNATURE="SIGNATURE",r.ENCRYPTION="ENCRYPTION",r.SYMMETRIC="SYMMETRIC",r.LINK_TO_PREVIOUS="LINK_TO_PREVIOUS",r.INVITATION="INVITATION",r.DEVICE_ID="DEVICE_ID",r.SHARED_KEY="SHARED_KEY"})(HashPurpose||(HashPurpose={}));HashPurpose.SIGNATURE;HashPurpose.ENCRYPTION;HashPurpose.SYMMETRIC;var _keyset$KeyType=KeyType;_keyset$KeyType.MEMBER;HashPurpose.LINK_TO_PREVIOUS;KeyType.DEVICE;KeyType.ROLE;KeyType.MEMBER;var _after,TIMEOUT_DELAY=7e3;_after={},_after[TIMEOUT_DELAY]={actions:"failTimeout",target:"#failure"};KeyType.DEVICE;class EncryptionLocalFirst{constructor(){_t(this,"clefs");_t(this,"nom","dfaut");const{publicKey:n,secretKey:_}=asymmetric.keyPair();this.clefs={publique:n,secrte:_}}encrypter({message:n,clefPubliqueDestinataire:_}){return asymmetric.encrypt({secret:n,recipientPublicKey:_,senderSecretKey:this.clefs.secrte}).toString()}dcrypter({message:n,clefPubliqueExpditeur:_}){return asymmetric.decrypt({cipher:n,recipientSecretKey:this.clefs.secrte,senderPublicKey:_})}clefAlatoire(){return Math.random().toString()}async obtNom(){return this.nom}async obtClefs(){return this.clefs}}const schmaBdPrincipale$2={type:"object",additionalProperties:{type:"object",properties:{dispositifs:{anyOf:[{type:"array",items:{type:"string"}},{type:"string"}]},dispositifsFichiers:{type:["array","string"],anyOf:[{type:"array",items:{type:"string"},nullable:!0},{type:"string",nullable:!0}],nullable:!0},rcursif:{type:"boolean"}},required:["dispositifs","rcursif"]},required:[]};class Favoris extends ComposanteClientDic{constructor({client:_}){super({client:_,clef:"favoris",schmaBdPrincipale:schmaBdPrincipale$2});_t(this,"_promesseInit");_t(this,"oublierpingler");this._promesseInit=this._pinglerFavoris()}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async _pinglerFavoris(){let _=[];const x=async E=>{const C=[];await Promise.all(Object.entries(E).map(async([B,A])=>{const I=await this.estpinglSurDispositif({dispositifs:A.dispositifs}),N=await this.estpinglSurDispositif({dispositifs:A.dispositifsFichiers});I&&await this.client.pingles.pinglerBd({id:B,rcursif:A.rcursif,fichiers:N}),C.push(B)}));const T=_.filter(B=>!C.includes(B));await Promise.all(T.map(async B=>await this.client.pingles.dspinglerBd({id:B}))),_=C},S=await this.suivreBdPrincipale({f:x});this.oublierpingler=S}async suivreFavoris({f:_,idCompte:x}){const S=async E=>{const C=Object.entries(E).map(([T,B])=>({idObjet:T,...B}));await _(C)};return await this.suivreBdPrincipale({idCompte:x,f:S})}async pinglerFavori({idObjet:_,dispositifs:x="TOUS",dispositifsFichiers:S="INSTALL",rcursif:E=!0}){const{bd:C,fOublier:T}=await this.obtBd(),B={rcursif:E,dispositifs:x};S&&(B.dispositifsFichiers=S),await C.put(_,B),await T()}async dspinglerFavori({idObjet:_}){const{bd:x,fOublier:S}=await this.obtBd();await x.del(_),await S()}async suivretatFavori({idObjet:_,f:x}){return await this.suivreBdPrincipale({f:S=>x(S[_])})}async suivreEstpinglSurDispositif({idObjet:_,f:x,idDispositif:S}){const E=async C=>{const T=await this.estpinglSurDispositif({dispositifs:C?.dispositifs,idDispositif:S}),B=await this.estpinglSurDispositif({dispositifs:C?.dispositifsFichiers,idDispositif:S});return await x({idObjet:_,bd:T,fichiers:B,rcursif:C?.rcursif||!1})};return await this.suivretatFavori({idObjet:_,f:E})}async estpinglSurDispositif({dispositifs:_,idDispositif:x}){return x=x||await this.client.obtIdDispositif(),_===void 0?!1:_==="TOUS"?!0:_==="INSTALL"?x===await this.client.obtIdDispositif()?isNode||isElectronMain:!1:typeof _=="string"?_===x:_.includes(x)}async fermer(){await this._promesseInit,this.oublierpingler&&await this.oublierpingler()}}__decorate([cacheSuivi],Favoris.prototype,"suivreFavoris",null);__decorate([cacheSuivi],Favoris.prototype,"suivretatFavori",null);__decorate([cacheSuivi],Favoris.prototype,"suivreEstpinglSurDispositif",null);const schmaStructureBdMotsClefsdeProjet={type:"string"},schmaStuctureBdsDeProjet={type:"string"},MAX_TAILLE_IMAGE$1=500*1e3,MAX_TAILLE_IMAGE_VIS$1=1500*1e3,schmaBdPrincipale$1={type:"string"},schmaStructureBdProjet={type:"object",properties:{type:{type:"string"},noms:{type:"string"},descriptions:{type:"string"},bds:{type:"string"},image:{type:"string",nullable:!0},motsClefs:{type:"string"},statut:{type:"object",properties:{statut:{type:"string"},idNouvelle:{type:"string",nullable:!0}},required:["statut"]},copiDe:{type:"object",properties:{id:{type:"string"}},required:["id"]}},required:["noms","descriptions","statut","type","bds","copiDe"]};class Projets extends ComposanteClientListe{constructor({client:n}){super({client:n,clef:"projets",schmaBdPrincipale:schmaBdPrincipale$1})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async suivreProjets({f:n,idCompte:_}){return await this.suivreBdPrincipale({idCompte:_,f:n})}async crerProjet(){const{bd:n,fOublier:_}=await this.client.orbite.ouvrirBdType({id:await this.obtIdBd(),type:"set",schma:schmaBdPrincipale$1}),x=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:{address:void 0,write:this.client.bdCompte.address}}),{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdProjet}),C=S.access;if(!estUnContrleurConstellation(C))throw Error("Contrleur de type non reconnu.");const T={address:C.address};await S.set("type","projet");const B=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:T});await S.set("noms",B);const A=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:T});await S.set("descriptions",A);const I=await this.client.crerBdIndpendante({type:"set",optionsAccs:T});await S.set("bds",I);const N=await this.client.crerBdIndpendante({type:"set",optionsAccs:T});return await S.set("motsClefs",N),await S.set("statut",{statut:TYPES_STATUT.ACTIVE}),await n.add(x),await Promise.all([_(),E()]),x}async copierProjet({idProjet:n}){const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdProjet}),S=await this.crerProjet(),{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdProjet}),T=await _.get("noms");if(T){const{bd:D,fOublier:O}=await this.client.orbite.ouvrirBdType({id:T,type:"keyvalue",schma:schmaStructureBdNoms}),F=await D.allAsJSON();await O(),await this.sauvegarderNomsProjet({idProjet:S,noms:F})}const B=await _.get("descriptions");if(B){const{bd:D,fOublier:O}=await this.client.orbite.ouvrirBdType({id:B,type:"keyvalue",schma:schmaStructureBdNoms}),F=await D.allAsJSON();await O(),await this.sauvegarderDescriptionsProjet({idProjet:S,descriptions:F})}const A=await _.get("motsClefs");if(A){const{bd:D,fOublier:O}=await this.client.orbite.ouvrirBdType({id:A,type:"set",schma:schmaStructureBdMotsClefsdeProjet}),F=(await D.all()).map(M=>M.value);await O(),await this.ajouterMotsClefsProjet({idProjet:S,idsMotsClefs:F})}const I=await _.get("bds");if(I){const{bd:D,fOublier:O}=await this.client.orbite.ouvrirBdType({id:I,type:"set",schma:schmaStuctureBdsDeProjet}),F=(await D.all()).map(M=>M.value);await O(),await Promise.all(F.map(async M=>{await this.ajouterBdProjet({idProjet:S,idBd:M})}))}const N=await _.get("statut")||{statut:TYPES_STATUT.ACTIVE};await E.set("statut",N);const V=await _.get("image");return V&&await E.set("image",V),await E.set("copiDe",{id:n}),await Promise.all([x(),C()]),S}async ajouterMesProjets({idProjet:n}){const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:await this.obtIdBd(),type:"set",schma:schmaBdPrincipale$1});await _.add(n),await x()}async enleverDeMesProjets({idProjet:n}){const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:await this.obtIdBd(),type:"set",schma:schmaBdPrincipale$1});await _.del(n),await x()}async inviterAuteur({idProjet:n,idCompteAuteur:_,rle:x}){await this.client.donnerAccs({idBd:n,identit:_,rle:x})}async _obtBdNoms({idProjet:n}){const _=await this.client.obtIdBd({nom:"noms",racine:n,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refuse pour Projet ${n}.`);return await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdNoms})}async sauvegarderNomsProjet({idProjet:n,noms:_}){const{bd:x,fOublier:S}=await this._obtBdNoms({idProjet:n});for(const E in _)await x.set(E,_[E]);await S()}async sauvegarderNomProjet({idProjet:n,langue:_,nom:x}){const{bd:S,fOublier:E}=await this._obtBdNoms({idProjet:n});await S.set(_,x),await E()}async effacerNomProjet({idProjet:n,langue:_}){const{bd:x,fOublier:S}=await this._obtBdNoms({idProjet:n});await x.del(_),await S()}async _obtBdDescr({idProjet:n}){const _=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refuse pour Projet ${n}.`);return await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdNoms})}async sauvegarderDescriptionsProjet({idProjet:n,descriptions:_}){const{bd:x,fOublier:S}=await this._obtBdDescr({idProjet:n});for(const E in _)await x.set(E,_[E]);await S()}async sauvegarderDescriptionProjet({idProjet:n,langue:_,description:x}){const{bd:S,fOublier:E}=await this._obtBdDescr({idProjet:n});await S.set(_,x),await E()}async effacerDescriptionProjet({idProjet:n,langue:_}){const{bd:x,fOublier:S}=await this._obtBdDescr({idProjet:n});await x.del(_),await S()}async _obtBdMotsClefs({idProjet:n}){const _=await this.client.obtIdBd({nom:"motsClefs",racine:n,type:"set"});if(!_)throw new Error(`Permission de modification refuse pour projet ${n}.`);return await this.client.orbite.ouvrirBdType({id:_,type:"set",schma:schmaStructureBdMotsClefsdeProjet})}async ajouterMotsClefsProjet({idProjet:n,idsMotsClefs:_}){Array.isArray(_)||(_=[_]);const{bd:x,fOublier:S}=await this._obtBdMotsClefs({idProjet:n});await Promise.all(_.map(async E=>{(await x.all()).map(T=>T.value).includes(E)||await x.add(E)})),await S()}async effacerMotClefProjet({idProjet:n,idMotClef:_}){const{bd:x,fOublier:S}=await this._obtBdMotsClefs({idProjet:n});await x.del(_),await S()}async _obtBdBds({idProjet:n}){const _=await this.client.obtIdBd({nom:"bds",racine:n,type:"set"});if(!_)throw new Error(`Permission de modification refuse pour Projet ${n}.`);return await this.client.orbite.ouvrirBdType({id:_,type:"set",schma:schmaStructureBdMotsClefsdeProjet})}async ajouterBdProjet({idProjet:n,idBd:_}){const{bd:x,fOublier:S}=await this._obtBdBds({idProjet:n});await x.add(_),await S()}async effacerBdProjet({idProjet:n,idBd:_}){const{bd:x,fOublier:S}=await this._obtBdBds({idProjet:n});await x.del(_),await S()}async marquerObsolte({idProjet:n,idNouvelle:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdProjet});x.set("statut",{statut:TYPES_STATUT.OBSOLTE,idNouvelle:_}),await S()}async changerStatutProjet({idProjet:n,statut:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdProjet});x.set("statut",_),await S()}async marquerActif({idProjet:n}){const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdProjet});_.set("statut",{statut:TYPES_STATUT.ACTIVE}),await x()}async marquerBta({idProjet:n}){const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdProjet});_.set("statut",{statut:TYPES_STATUT.BTA}),await x()}async marquerInterne({idProjet:n}){const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdProjet});_.set("statut",{statut:TYPES_STATUT.INTERNE}),await x()}async sauvegarderImage({idProjet:n,image:_}){let x;if(_.content.size!==void 0){if(_.content.size>MAX_TAILLE_IMAGE$1)throw new Error("Taille maximale excde");x={path:_.path,content:await _.content.arrayBuffer()}}else x=_;const S=await this.client.ajouterSFIP({fichier:x}),{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdProjet});await E.set("image",S),await C()}async effacerImage({idProjet:n}){const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdProjet});await _.del("image"),await x()}async suivreImage({idProjet:n,f:_}){return await this.client.suivreBd({id:n,type:"keyvalue",schma:schmaStructureBdProjet,f:async x=>{const S=await x.get("image");if(S){const E=await this.client.obtFichierSFIP({id:S,max:MAX_TAILLE_IMAGE_VIS$1});return await _(E)}else return await _(null)}})}async suivreNomsProjet({idProjet:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"noms",schma:schmaStructureBdNoms,f:_})}async suivreDescriptionsProjet({idProjet:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"descriptions",schma:schmaStructureBdNoms,f:_})}async suivreMotsClefsProjet({idProjet:n,f:_}){const x={},S=async()=>{if(x.propres&&x.bds){const N=[...x.propres.map(V=>({idMotClef:V,source:"projet"})),...x.bds.map(V=>({idMotClef:V,source:"bds"}))];return await _(N)}},E=async N=>(x.propres=N,await S()),C=await this.client.suivreBdListeDeClef({id:n,clef:"motsClefs",schma:{type:"string"},f:E}),T=async N=>(x.bds=N,await S()),B=async N=>await this.suivreBdsProjet({idProjet:n,f:N}),A=async(N,V)=>await this.client.bds.suivreMotsClefsBd({idBd:N,f:V}),I=await this.client.suivreBdsDeFonctionListe({fListe:B,f:T,fBranche:A});return async()=>{await C(),await I()}}async suivreBdsProjet({idProjet:n,f:_}){return await this.client.suivreBdListeDeClef({id:n,clef:"bds",schma:{type:"string"},f:_})}async suivreVariablesProjet({idProjet:n,f:_}){const x=async C=>await _(C||[]),S=async(C,T)=>await this.client.bds.suivreVariablesBd({idBd:C,f:T}),E=async({id:C,fSuivreBd:T})=>await this.client.suivreBdsDeBdListe({id:C,f:T,fBranche:S});return await this.client.suivreBdDeClef({id:n,clef:"bds",f:x,fSuivre:E})}async suivreQualitProjet({idProjet:n,f:_}){const x=async T=>await _(T.length?T.reduce((B,A)=>B+A,0)/T.length:0),S=async T=>await this.suivreBdsProjet({idProjet:n,f:T}),E=async(T,B)=>await this.client.bds.suivreQualitBd({idBd:T,f:A=>B(A.total)}),C=T=>T.flat();return await this.client.suivreBdsDeFonctionListe({fListe:S,f:x,fBranche:E,fRduction:C})}async exporterDonnes({idProjet:n,langues:_,nomFichier:x}){if(!x){const C=await uneFois(B=>this.suivreNomsProjet({idProjet:n,f:B})),T=n.split("/").pop();x=_&&traduire(C,_)||T}const S={docs:[],fichiersSFIP:new Set,nomFichier:x},E=await uneFois(C=>this.suivreBdsProjet({idProjet:n,f:C}));for(const C of E){const{doc:T,fichiersSFIP:B}=await this.client.bds.exporterDonnes({idBd:C,langues:_});let A;const I=C.split("/").pop();if(_){const N=await uneFois(V=>this.client.bds.suivreNomsBd({idBd:C,f:V}));A=traduire(N,_)||I}else A=I;S.docs.push({doc:T,nom:A});for(const N of B)S.fichiersSFIP.add(N)}return S}async exporterDocumentDonnes({donnes:n,formatDoc:_,dossier:x="",inclureFichiersSFIP:S=!0}){const{docs:E,fichiersSFIP:C,nomFichier:T}=n,A={xls:"biff8"}[_]||_,I=E.map(V=>({nom:`${V.nom}.${_}`,octets:writeSync(V.doc,{bookType:A,type:"buffer"})})),N=S?await Promise.all([...C].map(async V=>({nom:V.replace("/","-"),octets:await toBuffer(this.client.obtItrableAsyncSFIP({id:V}))}))):[];await zipper(I,N,path.join(x,T))}async effacerProjet({idProjet:n}){await this.enleverDeMesProjets({idProjet:n});for(const _ in["noms","descriptions","motsClefs","bds"]){const x=await this.client.obtIdBd({nom:_,racine:n});x&&await this.client.effacerBd({id:x})}await this.client.effacerBd({id:n})}}__decorate([cacheSuivi],Projets.prototype,"suivreProjets",null);__decorate([cacheSuivi],Projets.prototype,"suivreImage",null);__decorate([cacheSuivi],Projets.prototype,"suivreNomsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreDescriptionsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreMotsClefsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreBdsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreVariablesProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreQualitProjet",null);const schmaBdPrincipale={type:"string"},schmaBdMotClef={type:"object",properties:{type:{type:"string",nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0}},required:[]};class MotsClefs extends ComposanteClientListe{constructor({client:n}){super({client:n,clef:"motsClefs",schmaBdPrincipale})}async pingler(){const n=await this.obtIdBd();await this.client.pingles?.pinglerBd({id:n,rcursif:!1,fichiers:!1})}async suivreMotsClefs({f:n,idCompte:_}){return await this.suivreBdPrincipale({idCompte:_,f:n})}async crerMotClef(){const n=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:{address:void 0,write:this.client.bdCompte.address}});await this.ajouterMesMotsClefs({idMotClef:n});const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaBdMotClef}),E={address:_.access.address};await _.set("type","motClef");const C=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:E});await _.set("noms",C);const T=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:E});return await _.set("descriptions",T),await x(),n}async ajouterMesMotsClefs({idMotClef:n}){const{bd:_,fOublier:x}=await this.obtBd();await _.add(n),await x()}async enleverDeMesMotsClefs({idMotClef:n}){const{bd:_,fOublier:x}=await this.obtBd();await _.del(n),await x()}async copierMotClef({idMotClef:n}){const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaBdMotClef}),S=await this.crerMotClef(),E=await _.get("noms");if(E){const{bd:T,fOublier:B}=await this.client.orbite.ouvrirBdType({id:E,type:"keyvalue",schma:schmaStructureBdNoms}),A=await T.allAsJSON();await this.sauvegarderNomsMotClef({idMotClef:S,noms:A}),await B()}const C=await _.get("descriptions");if(C){const{bd:T,fOublier:B}=await this.client.orbite.ouvrirBdType({id:C,type:"keyvalue",schma:schmaStructureBdNoms}),A=await T.allAsJSON();await this.sauvegarderDescriptionsMotClef({idMotClef:S,descriptions:A}),await B()}return await x(),S}async inviterAuteur({idMotClef:n,idCompteAuteur:_,rle:x}){await this.client.donnerAccs({idBd:n,identit:_,rle:x})}async sauvegarderNomsMotClef({idMotClef:n,noms:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour mot clef ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});for(const C in _)await S.set(C,_[C]);await E()}async sauvegarderNomMotClef({idMotClef:n,langue:_,nom:x}){const S=await this.client.obtIdBd({nom:"noms",racine:n,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour mot clef ${n}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdNoms});await E.set(_,x),await C()}async effacerNomMotClef({idMotClef:n,langue:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour mot clef ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});await S.del(_),await E()}async suivreNomsMotClef({idMotClef:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"noms",schma:schmaStructureBdNoms,f:_})}async sauvegarderDescriptionsMotClef({idMotClef:n,descriptions:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour mot clef ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});for(const C in _)await S.set(C,_[C]);await E()}async sauvegarderDescriptionMotClef({idMotClef:n,langue:_,description:x}){const S=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour mot clef ${n}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdNoms});await E.set(_,x),await C()}async effacerDescriptionMotClef({id:n,langue:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour mot clef ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});await S.del(_),await E()}async suivreDescriptionsMotClef({idMotClef:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"descriptions",schma:schmaStructureBdNoms,f:_})}async effacerMotClef({idMotClef:n}){await this.enleverDeMesMotsClefs({idMotClef:n});for(const _ in["noms"]){const x=await this.client.obtIdBd({nom:_,racine:n});x&&await this.client.effacerBd({id:x})}await this.client.effacerBd({id:n})}async suivreQualitMotClef({idMotClef:n,f:_}){return await this.suivreNomsMotClef({idMotClef:n,f:x=>_(Object.keys(x).length?1:0)})}}__decorate([cacheSuivi],MotsClefs.prototype,"suivreMotsClefs",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreNomsMotClef",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreDescriptionsMotClef",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreQualitMotClef",null);const MAX_TAILLE_IMAGE=500*1e3,MAX_TAILLE_IMAGE_VIS=1500*1e3,schmaBdAutorisations={type:"object",additionalProperties:{type:"string"},required:[]},schmaStructureBdNue={type:"object",properties:{type:{type:"string",nullable:!0},mtadonnes:{type:"string",nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0},motsClefs:{type:"string",nullable:!0},image:{type:"string",nullable:!0},tableaux:{type:"string",nullable:!0},autorisation:{type:"string",nullable:!0},statut:{type:"object",properties:{idNouvelle:{type:"string",nullable:!0},statut:{type:"string",nullable:!0}},required:[],nullable:!0},parent:{type:"string",nullable:!0},copiDe:{type:"string",nullable:!0}},required:[]},schmaStructureBdAuthorisation={type:"object",properties:{philosophie:{type:"string",nullable:!0},membres:{type:"string",nullable:!0}},required:[]},schmaBdMotsClefsNue={type:"string"};class Nue extends ComposanteClientListe{constructor({client:n}){super({client:n,clef:"nues",schmaBdPrincipale:{type:"string"}})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async crerNue({nueParent:n,autorisation:_="IJPC",ajouter:x=!0}){const S=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:{address:void 0,write:this.client.bdCompte.address}});x&&await this.ajouterMesNues({idNue:S});const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdNue}),B={address:E.access.address};await E.set("type","nue");let A;if(isValidAddress(_))A=_;else if(_==="CJPI"||_==="IJPC")A=await this.gnrerGestionnaireAutorisations({philosophie:_});else throw new Error(`Autorisation non valide : ${_}`);await E.set("autorisation",A),_==="CJPI"&&await this.accepterMembreNue({idNue:S,idCompte:await this.client.obtIdCompte()});const I=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:B});await E.set("noms",I);const N=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:B});await E.set("descriptions",N);const V=await this.client.crerBdIndpendante({type:"ordered-keyvalue",optionsAccs:B});await E.set("tableaux",V);const D=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:B});await E.set("mtadonnes",D);const O=await this.client.crerBdIndpendante({type:"set",optionsAccs:B});return await E.set("motsClefs",O),await E.set("statut",{statut:TYPES_STATUT.ACTIVE}),n&&await E.set("parent",n),C(),S}async ajouterMesNues({idNue:n}){const{bd:_,fOublier:x}=await this.obtBd();await _.add(n),await x()}async enleverDeMesNues({idNue:n}){const{bd:_,fOublier:x}=await this.obtBd();await _.del(n),await x()}async copierNue({idNue:n,ajouterMesNues:_=!0}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdNue}),E=await x.get("parent"),C=await this.crerNue({nueParent:E,ajouter:_}),{bd:T,fOublier:B}=await this.client.orbite.ouvrirBdType({id:C,type:"keyvalue",schma:schmaStructureBdNue}),A=await x.get("mtadonnes");if(A){const{bd:L,fOublier:j}=await this.client.orbite.ouvrirBdType({id:A,type:"keyvalue",schma:schmaStructureBdNoms}),q=await L.allAsJSON();await j(),await this.sauvegarderMtadonnesNue({idNue:C,mtadonnes:q})}const I=await x.get("noms");if(I){const{bd:L,fOublier:j}=await this.client.orbite.ouvrirBdType({id:I,type:"keyvalue",schma:schmaStructureBdNoms}),q=await L.allAsJSON();await j(),await this.sauvegarderNomsNue({idNue:C,noms:q})}const N=await x.get("descriptions");if(N){const{bd:L,fOublier:j}=await this.client.orbite.ouvrirBdType({id:N,type:"keyvalue",schma:schmaStructureBdNoms}),q=await L.allAsJSON();await j(),await this.sauvegarderDescriptionsNue({idNue:C,descriptions:q})}const V=await x.get("motsClefs");if(V){const{bd:L,fOublier:j}=await this.client.orbite.ouvrirBdType({id:V,type:"set",schma:schmaBdMotsClefsNue}),q=(await L.all()).map(H=>H.value);await j(),await this.ajouterMotsClefsNue({idNue:C,idsMotsClefs:q})}const D=await x.get("tableaux"),O=await T.get("tableaux");if(!O)throw new Error("Erreur initialisation.");if(D){const{bd:L,fOublier:j}=await this.client.orbite.ouvrirBdType({id:O,type:"ordered-keyvalue",schma:schmaBdTableauxDeBd}),{bd:q,fOublier:H}=await this.client.orbite.ouvrirBdType({id:D,type:"ordered-keyvalue",schma:schmaBdTableauxDeBd}),X=await q.all();await H();for(const J of X){const Z=await this.client.tableaux.copierTableau({id:J.key,idBd:C,copierDonnes:!1});await L.set(Z,J.value)}await j()}const F=await x.get("statut")||{statut:TYPES_STATUT.ACTIVE};await T.set("statut",F);const M=await x.get("image");return M&&await T.set("image",M),await T.set("copiDe",n),await Promise.all([S(),B()]),C}async suivreNues({f:n,idCompte:_}){return await this.suivreBdPrincipale({f:n,idCompte:_})}async suivreDeParents({idNue:n,f:_,fParents:x}){return await this.client.suivreBdsDeFonctionListe({fListe:async S=>await this.suivreNuesParents({idNue:n,f:E=>S([n,...E].reverse())}),f:_,fBranche:x,fRduction:S=>S})}async sauvegarderMtadonneNue({idNue:n,clef:_,valeur:x}){const S=await this.client.obtIdBd({nom:"mtadonnes",racine:n,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdMtadonnes});await E.set(_,x),await C()}async sauvegarderMtadonnesNue({idNue:n,mtadonnes:_}){const x=await this.client.obtIdBd({nom:"mtadonnes",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdMtadonnes});for(const C in _)await S.set(C,_[C]);await E()}async effacerMtadonneNue({idNue:n,clef:_}){const x=await this.client.obtIdBd({nom:"mtadonnes",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdMtadonnes});await S.del(_),await E()}async suivreMtadonnesNue({idNue:n,f:_}){const x=async S=>{await _(Object.assign({},...S))};return await this.suivreDeParents({idNue:n,f:x,fParents:async(S,E)=>await this.client.suivreBdDicDeClef({id:S,clef:"mtadonnes",schma:schmaStructureBdMtadonnes,f:E})})}async sauvegarderNomNue({idNue:n,langue:_,nom:x}){const S=await this.client.obtIdBd({nom:"noms",racine:n,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdNoms});await E.set(_,x),await C()}async sauvegarderNomsNue({idNue:n,noms:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});for(const C in _)await S.set(C,_[C]);await E()}async effacerNomNue({idNue:n,langue:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});await S.del(_),await E()}async suivreNomsNue({idNue:n,f:_}){const x=async S=>{await _(Object.assign({},...S))};return await this.suivreDeParents({idNue:n,f:x,fParents:async(S,E)=>await this.client.suivreBdDicDeClef({id:S,clef:"noms",schma:schmaStructureBdNoms,f:E})})}async sauvegarderDescriptionNue({idNue:n,langue:_,description:x}){const S=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"keyvalue"});if(!S)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"keyvalue",schma:schmaStructureBdNoms});await E.set(_,x),await C()}async sauvegarderDescriptionsNue({idNue:n,descriptions:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});for(const C in _)await S.set(C,_[C]);await E()}async effacerDescriptionNue({idNue:n,langue:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaStructureBdNoms});await S.del(_),await E()}async suivreDescriptionsNue({idNue:n,f:_}){const x=async S=>{await _(Object.assign({},...S))};return await this.suivreDeParents({idNue:n,f:x,fParents:async(S,E)=>await this.client.suivreBdDicDeClef({id:S,clef:"descriptions",schma:schmaStructureBdNoms,f:E})})}async sauvegarderImage({idNue:n,image:_}){let x;if(_.content.size!==void 0){if(_.content.size>MAX_TAILLE_IMAGE)throw new Error("Taille maximale excde");x={path:_.path,content:await _.content.arrayBuffer()}}else x=_;const S=await this.client.ajouterSFIP({fichier:x}),{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdNue});await E.set("image",S),await C()}async effacerImage({idNue:n}){const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdNue});await _.del("image"),await x()}async suivreImage({idNue:n,f:_}){return await this.client.suivreBd({id:n,type:"keyvalue",schma:schmaStructureBdNue,f:async x=>{const S=await x.get("image");if(!S)await _(null);else{const E=await this.client.obtFichierSFIP({id:S,max:MAX_TAILLE_IMAGE_VIS});await _(E)}}})}async ajouterMotsClefsNue({idNue:n,idsMotsClefs:_}){Array.isArray(_)||(_=[_]);const x=await this.client.obtIdBd({nom:"motsClefs",racine:n,type:"set"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"set",schma:schmaBdMotsClefsNue});for(const C of _)(await S.all()).map(B=>B.value).includes(C)||await S.add(C);await E()}async effacerMotClefNue({idNue:n,idMotClef:_}){const x=await this.client.obtIdBd({nom:"motsClefs",racine:n,type:"set"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"set",schma:schmaBdMotsClefsNue});await S.del(_),await E()}async suivreMotsClefsNue({idNue:n,f:_}){const x=async S=>{await _([...new Set(S.flat())])};return await this.suivreDeParents({idNue:n,f:x,fParents:async(S,E)=>await this.client.suivreBdListeDeClef({id:S,clef:"motsClefs",schma:{type:"string"},f:E})})}async changerStatutNue({idNue:n,statut:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdNue});x.set("statut",_),await S()}async suivreStatutNue({idNue:n,f:_}){return await this.client.suivreBdDic({id:n,f:async x=>{if(x.statut)return await _(x.statut)},schma:schmaStructureBdNue})}async marquerObsolte({idNue:n,idNouvelle:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdNue});x.set("statut",{statut:TYPES_STATUT.OBSOLTE,idNouvelle:_}),await S()}async marquerActive({idNue:n}){const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdNue});_.set("statut",{statut:TYPES_STATUT.ACTIVE}),await x()}async marquerBta({idNue:n}){const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdNue});_.set("statut",{statut:TYPES_STATUT.BTA}),await x()}async marquerInterne({idNue:n}){const{bd:_,fOublier:x}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdNue});_.set("statut",{statut:TYPES_STATUT.INTERNE}),await x()}async inviterAuteur({idNue:n,idCompteAuteur:_,rle:x}){await this.client.donnerAccs({idBd:n,identit:_,rle:x})}async gnrerGestionnaireAutorisations({philosophie:n="IJPC"}){const _=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:{write:this.client.bdCompte.address}}),{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdAuthorisation});await x.set("philosophie",n);const C={address:x.access.address},T=await this.client.crerBdIndpendante({type:"keyvalue",optionsAccs:C});return await x.set("membres",T),S(),_}async changerPhisolophieAutorisation({idAutorisation:n,philosophie:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdAuthorisation});await x.set("philosophie",_),S()}async suivrePhilosophieAutorisation({idNue:n,f:_}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:C})=>await this.suivreGestionnaireAutorisations({idNue:n,f:C}),f:async C=>{if(!C)return;const T=await C.get("philosophie");T&&["IJPC","CJPI"].includes(T)&&await _(T)},fSuivre:async({id:C,fSuivreBd:T})=>await this.client.suivreBd({id:C,type:"keyvalue",schma:schmaStructureBdAuthorisation,f:T})})}async accepterMembreAutorisation({idAutorisation:n,idCompte:_}){const x=await this.client.obtIdBd({nom:"membres",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour groupe d'autorisation ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaBdAutorisations});await S.set(_,"accept"),E()}async accepterMembreNue({idNue:n,idCompte:_}){const x=await this.obtGestionnaireAutorisationsDeNue({idNue:n});return await this.accepterMembreAutorisation({idAutorisation:x,idCompte:_})}async exclureMembreAutorisation({idAutorisation:n,idCompte:_}){const x=await this.client.obtIdBd({nom:"membres",racine:n,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour groupe d'autorisation ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:schmaBdAutorisations});await S.set(_,"exclus"),E()}async exclureMembreDeNue({idNue:n,idCompte:_}){const x=await this.obtGestionnaireAutorisationsDeNue({idNue:n});return await this.exclureMembreAutorisation({idAutorisation:x,idCompte:_})}async suivreGestionnaireAutorisations({idNue:n,f:_}){return await this.client.suivreBd({id:n,type:"keyvalue",schma:schmaStructureBdNue,f:async x=>{const S=await x.get("autorisation");await _(S)}})}async changerGestionnaireAutorisations({idNue:n,idAutorisation:_}){const{bd:x,fOublier:S}=await this.client.orbite.ouvrirBdType({id:n,type:"keyvalue",schma:schmaStructureBdNue});await x.set("autorisation",_),S()}async obtGestionnaireAutorisationsDeNue({idNue:n}){return await uneFois(async _=>await this.suivreGestionnaireAutorisations({idNue:n,f:ignorerNonDfinis(_)}))}async suivreAutorisationsMembresDeGestionnaire({idAutorisation:n,f:_}){const x=async S=>{const E=Object.entries(S).map(([C,T])=>({idCompte:C,statut:T}));await _(E)};return await this.client.suivreBdDicDeClef({id:n,clef:"membres",schma:schmaBdAutorisations,f:x})}async suivreAutorisationsMembresDeNue({idNue:n,f:_}){const x=async({fSuivreRacine:E})=>await this.suivreGestionnaireAutorisations({idNue:n,f:E}),S=async({id:E,fSuivreBd:C})=>await this.suivreAutorisationsMembresDeGestionnaire({idAutorisation:E,f:C});return await suivreBdDeFonction({fRacine:x,f:ignorerNonDfinis(_),fSuivre:S})}async ajouterTableauNue({idNue:n,clefTableau:_}){const x=await this.client.obtIdBd({nom:"tableaux",racine:n,type:"ordered-keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"ordered-keyvalue",schma:schmaBdTableauxDeBd});_=_||v4$1();const C=await this.client.tableaux.crerTableau({idBd:n});return await S.set(C,{clef:_}),await E(),C}async effacerTableauNue({idNue:n,idTableau:_}){const x=await this.client.obtIdBd({nom:"tableaux",racine:n,type:"ordered-keyvalue"});if(!x)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:S,fOublier:E}=await this.client.orbite.ouvrirBdType({id:x,type:"ordered-keyvalue",schma:schmaBdTableauxDeBd});await S.del(_),await E(),await this.client.tableaux.effacerTableau({idTableau:_})}async suivreTableauxNue({idNue:n,f:_}){const x=async E=>{await _(E.flat())},S=async(E,C)=>{const T=B=>{const A=B.map(I=>({id:I.key,...I.value}));C(A)};return await this.client.suivreBdDicOrdonneDeClef({id:E,clef:"tableaux",schma:schmaBdTableauxDeBd,f:T})};return await this.suivreDeParents({idNue:n,f:x,fParents:S})}async ajouterNomsTableauNue({idTableau:n,noms:_}){return await this.client.tableaux.sauvegarderNomsTableau({idTableau:n,noms:_})}async effacerNomsTableauNue({idTableau:n,langue:_}){return await this.client.tableaux.effacerNomTableau({idTableau:n,langue:_})}async suivreNomsTableauNue({idNue:n,clefTableau:_,f:x}){const S=async C=>{await x(Object.assign({},...C))},E=async(C,T)=>await suivreBdDeFonction({fRacine:async({fSuivreRacine:B})=>await this.client.bds.suivreIdTableauParClef({idBd:C,clef:_,f:B}),f:ignorerNonDfinis(T),fSuivre:async({id:B,fSuivreBd:A})=>await this.client.tableaux.suivreNomsTableau({idTableau:B,f:A})});return await this.suivreDeParents({idNue:n,f:S,fParents:E})}async ajouterColonneTableauNue({idTableau:n,idVariable:_,idColonne:x,index:S}){const E=await this.client.tableaux.ajouterColonneTableau({idTableau:n,idVariable:_,idColonne:x});return S&&await this.changerColIndexTableauNue({idTableau:n,idColonne:E,val:!0}),E}async effacerColonneTableauNue({idTableau:n,idColonne:_}){return await this.client.tableaux.effacerColonneTableau({idTableau:n,idColonne:_})}async changerColIndexTableauNue({idTableau:n,idColonne:_,val:x}){return await this.client.tableaux.changerColIndex({idTableau:n,idColonne:_,val:x})}async suivreColonnesTableauNue({idNue:n,clefTableau:_,f:x,catgories:S=!0}){const E=async T=>{await x(T.flat())},C=async(T,B)=>await suivreBdDeFonction({fRacine:async({fSuivreRacine:A})=>await this.client.bds.suivreIdTableauParClef({idBd:T,clef:_,f:A}),f:ignorerNonDfinis(B),fSuivre:async({id:A,fSuivreBd:I})=>await this.client.tableaux.suivreColonnesTableau({idTableau:A,f:I,catgories:S})});return await this.suivreDeParents({idNue:n,f:E,fParents:C})}async ajouterRgleTableauNue({idTableau:n,idColonne:_,rgle:x}){return await this.client.tableaux.ajouterRgleTableau({idTableau:n,idColonne:_,rgle:x})}async effacerRgleTableauNue({idTableau:n,idRgle:_}){return await this.client.tableaux.effacerRgleTableau({idTableau:n,idRgle:_})}async suivreRglesTableauNue({idNue:n,clefTableau:_,f:x}){const S=async C=>{await x(C.flat())},E=async(C,T)=>await suivreBdDeFonction({fRacine:async({fSuivreRacine:B})=>await this.client.bds.suivreIdTableauParClef({idBd:C,clef:_,f:B}),f:ignorerNonDfinis(T),fSuivre:async({id:B,fSuivreBd:A})=>await this.client.tableaux.suivreRgles({idTableau:B,f:A})});return await this.suivreDeParents({idNue:n,f:S,fParents:E})}async suivreVariablesNue({idNue:n,f:_}){const x=async C=>await _(C||[]),S=async(C,T)=>await this.client.tableaux.suivreVariables({idTableau:C,f:T}),E=async C=>await this.suivreTableauxNue({idNue:n,f:T=>C(T.map(B=>B.id))});return await this.client.suivreBdsDeFonctionListe({fListe:E,f:x,fBranche:S})}async suivreQualitNue({idNue:n,f:_}){const x={noms:{},descr:{}},S=async()=>{const B=[Object.keys(x.noms).length?1:0,Object.keys(x.descr).length?1:0],A=B.reduce((I,N)=>I+N,0)/B.length;await _(A)},E=await this.suivreNomsNue({idNue:n,f:B=>{x.noms=B,S()}}),C=await this.suivreDescriptionsNue({idNue:n,f:B=>{x.descr=B,S()}});return async()=>{await E(),await C()}}async suivreDiffrencesNueEtTableau({idNue:n,clefTableau:_,idTableau:x,f:S,stricte:E=!0}){const C=async A=>{const I=A.filter(N=>E||N.svre);await S(I)},T=async({fSuivreRacine:A})=>await this.client.bds.suivreIdTableauParClef({idBd:n,clef:_,f:A}),B=async({id:A,fSuivreBd:I})=>await this.client.tableaux.suivreDiffrencesAvecTableau({idTableau:x,idTableauRf:A,f:I});return await suivreBdDeFonction({fRacine:T,f:ignorerNonDfinis(C),fSuivre:B})}async suivreDiffrencesNueEtBd({idNue:n,idBd:_,f:x}){const S={},E=async()=>{const B=[];if(S.tableauxNue&&S.tableauxBd){for(const A of S.tableauxNue)if(!S.tableauxNue.find(N=>N.clef===A.clef)){const N={type:"tableauManquant",svre:!0,clefManquante:A.clef};B.push(N)}for(const A of S.tableauxBd)if(!S.tableauxNue.find(N=>N.clef===A.clef)){const N={type:"tableauSupplmentaire",svre:!1,clefExtra:A.clef};B.push(N)}}await x(B)},C=await this.client.bds.suivreTableauxBd({idBd:_,f:B=>{S.tableauxBd=B,E()}}),T=await this.suivreTableauxNue({idNue:n,f:B=>{S.tableauxNue=B,E()}});return async()=>{await C(),await T()}}async suivreCorrespondanceBd({idBd:n,f:_}){const x=async E=>await this.client.bds.suivreNuesBd({idBd:n,f:E}),S=async(E,C)=>{const T={diffrencesBds:[],diffrencesTableaux:[]},B=async()=>{C([...T.diffrencesBds,...T.diffrencesTableaux])},A=await this.suivreDiffrencesNueEtBd({idNue:E,idBd:n,f:async V=>{T.diffrencesBds=V,await B()}}),I=async(V,D,O)=>await this.suivreDiffrencesNueEtTableau({idNue:E,clefTableau:O.clef,idTableau:V,f:async F=>{await D(F.map(M=>({type:"tableau",svre:M.svre,idTableau:V,diffrence:M})))}}),N=await this.client.suivreBdsDeFonctionListe({fListe:async V=>await this.client.bds.suivreTableauxBd({idBd:n,f:V}),f:async V=>{T.diffrencesTableaux=V,await B()},fBranche:I,fCode:V=>V.id,fIdBdDeBranche:V=>V.id});return async()=>{await Promise.all([A,N])}};return await this.client.suivreBdsDeFonctionListe({fListe:x,f:_,fBranche:S})}async rechercherNuesDscendantes({idNue:n,f:_,nRsultatsDsirs:x}){const S=async E=>{_(E.map(C=>C.id))};return await this.client.rseau.rechercherNues({f:S,fObjectif:async(E,C,T)=>await E.nues.suivreNuesParents({idNue:C,f:B=>{T({type:"rsultat",score:B.includes(n)?1:0,de:"*",info:{type:"vide"}})}}),nRsultatsDsirs:x})}async suivreNuesParents({idNue:n,f:_}){const x=async({id:S,anctres:E=[]})=>{let C,T;const B=await this.client.suivreBd({id:S,type:"keyvalue",schma:schmaStructureBdNue,f:async A=>{const I=await A.get("parent");E=[...E],I&&E.push(I),await _(E),I?I!==T&&(C&&await C(),E.includes(I)||(C=await x({id:I,anctres:E})),T=I):(C&&await C(),C=void 0)}});return async()=>{await B(),C&&await C()}};return await x({id:n})}async suivreBdsCorrespondantes({idNue:n,f:_,vrifierAutorisation:x=!0,nRsultatsDsirs:S,toujoursInclureLesMiennes:E=!0}){if(x){const C={},T=async()=>{const{philoAutorisation:M,membres:L,bds:j}=C;if(!j)return;if(!M)return E?await _(j.filter(X=>X.auteurs.some(J=>J===this.client.idCompte)).map(X=>X.idBd)):void 0;if(!L)return;const q=await this.client.obtIdCompte();return await _((X=>{if(M==="CJPI"){const J=L.filter(Z=>Z.statut==="accept").map(Z=>Z.idCompte);return X.filter(Z=>Z.auteurs.some(ae=>J.includes(ae))||E&&Z.auteurs.includes(q)).map(Z=>Z.idBd)}else if(M==="IJPC"){const J=L.filter(Z=>Z.statut==="exclus").map(Z=>Z.idCompte);return X.filter(Z=>!Z.auteurs.some(ae=>J.includes(ae))).map(Z=>Z.idBd)}else throw new Error(M)})(j))},B=await this.suivrePhilosophieAutorisation({idNue:n,f:async M=>{C.philoAutorisation=M,await T()}}),A=await this.suivreAutorisationsMembresDeNue({idNue:n,f:async M=>{C.membres=M,await T()}}),I=async M=>{C.bds=M,await T()},N=async M=>await this.client.rseau.suivreBdsDeNue({idNue:n,f:M,nRsultatsDsirs:S}),V=async(M,L)=>{const j=async q=>await L({idBd:M,auteurs:q.filter(H=>H.accept).map(H=>H.idCompte)});return await this.client.rseau.suivreAuteursBd({idBd:M,f:j})},{fOublier:D,fChangerProfondeur:O}=await this.client.suivreBdsDeFonctionListe({fListe:N,f:I,fBranche:V});return{fOublier:async()=>{await Promise.all([D,A,B].map(M=>M()))},fChangerProfondeur:O}}else return await this.client.rseau.suivreBdsDeNue({idNue:n,f:_,nRsultatsDsirs:S})}async suivreEmpreinteTtesBdsNue({idNue:n,f:_}){return await this.client.suivreBdsDeFonctionListe({fListe:async x=>{const{fOublier:S}=await this.suivreBdsCorrespondantes({idNue:n,f:x,nRsultatsDsirs:1e3});return S},f:async x=>{const S=Base64.stringify(md5(x.join(":")));return await _(S)},fBranche:async(x,S)=>await this.client.suivreEmpreinteTtesBdRcursive({idBd:x,f:S})})}async suivreDonnesTableauNue({idNue:n,clefTableau:_,f:x,nRsultatsDsirs:S,ignorerErreursFormatBd:E=!0,ignorerErreursFormatTableau:C=!1,ignorerErreursDonnesTableau:T=!0,licencesPermises:B=void 0,toujoursInclureLesMiennes:A=!0,clefsSelonVariables:I=!1}){const N=async F=>{const M=F.flat();await x(M)},V=async F=>await this.suivreBdsCorrespondantes({idNue:n,f:F,nRsultatsDsirs:S,toujoursInclureLesMiennes:A}),D=async F=>{const M=async(L,j)=>{const q={licence:!1,formatBd:!0},H=[],X=async()=>{const J=Object.values(q).every(Z=>Z);await j(J)};if(B){const J=await this.client.bds.suivreLicenceBd({idBd:L,f:async Z=>(q.licence=B.includes(Z),await X())});H.push(J)}else q.licence=!0;if(E)q.formatBd=!0;else{const J=await this.suivreDiffrencesNueEtBd({idBd:L,idNue:n,f:async Z=>(q.formatBd=!Z.length,await X())});H.push(J)}return await X(),async()=>{await Promise.all(H.map(J=>J()))}};return await this.client.suivreBdsSelonCondition({fListe:V,fCondition:M,f:F})},O=async(F,M)=>{const L={},j=async()=>{const{donnes:J,erreurslments:Z,auteurs:ae}=L;if(J&&Z&&ae&&ae.length){const ce=ae.find(pe=>pe.accept)?.idCompte;if(!ce)return;const ve=J.map(pe=>({idCompte:ce,lment:pe,valid:Z.filter(G=>G.id==pe.id)})).filter(pe=>T||!pe.valid.length);await M(ve)}},H=await suivreBdDeFonction({fRacine:async({fSuivreRacine:J})=>await this.client.suivreBdSelonCondition({fRacine:async Z=>await this.client.bds.suivreIdTableauParClef({idBd:F,clef:_,f:ignorerNonDfinis(Z)}),fCondition:async(Z,ae)=>C?(await ae(!0),faisRien):(await ae(!0),await this.suivreDiffrencesNueEtTableau({idNue:n,clefTableau:_,idTableau:Z,f:async ce=>await ae(!ce.length),stricte:!1})),f:J}),f:async J=>{L.donnes=J?.donnes,L.erreurslments=J?.erreurs,await j()},fSuivre:async({id:J,fSuivreBd:Z})=>{const ae={},ce=[],ve=async()=>{const{donnes:Y,erreurs:U}=ae;Y&&U&&await Z({donnes:Y,erreurs:U})},pe=await this.client.tableaux.suivreDonnes({idTableau:J,f:async Y=>{ae.donnes=Y,await ve()},clefsSelonVariables:I});ce.push(pe);const G=await this.client.tableaux.suivreValidDonnes({idTableau:J,f:async Y=>{ae.erreurs=Y,await ve()}});return ce.push(G),async()=>{await Promise.all(ce.map(Y=>Y()))}}}),X=await this.client.rseau.suivreAuteursBd({idBd:F,f:async J=>{L.auteurs=J,await j()}});return async()=>{await Promise.all([H,X])}};return await this.client.suivreBdsDeFonctionListe({fListe:D,f:N,fBranche:O})}async exporterDonnesNue({idNue:n,langues:_,nomFichier:x,nRsultatsDsirs:S}){const E=utils$2.book_new(),C=new Set,T=await uneFois(B=>this.suivreTableauxNue({idNue:n,f:B}));for(const B of T){const{clef:A,id:I}=B;let N;const V=I.split("/").pop();if(_){const L=await uneFois(j=>this.suivreNomsTableauNue({idNue:n,clefTableau:A,f:j}));N=traduire(L,_)||V}else N=V;const D=await uneFois(async L=>{const{fOublier:j}=await this.suivreDonnesTableauNue({idNue:n,clefTableau:A,f:L,nRsultatsDsirs:S,clefsSelonVariables:!1});return j}),O=await uneFois(async L=>await this.suivreColonnesTableauNue({idNue:n,clefTableau:A,f:L}));let F=await Promise.all(D.map(async L=>({...await this.client.tableaux.formaterlment({:L.lment.donnes,colonnes:O,fichiersSFIP:C,langues:_}),auteur:L.idCompte})));if(_){const L=await uneFois(q=>this.suivreVariablesNue({idNue:n,f:q})),j={auteur:"auteur"};for(const q of L){const H=await uneFois(J=>this.client.variables.suivreNomsVariable({idVariable:q,f:J})),X=O.find(J=>J.variable===q)?.id;j[q]=traduire(H,_)||X||q}F=F.map(q=>Object.keys(q).reduce((H,X)=>{const J=j[X];return H[J]=q[X],H},{}))}const M=utils$2.json_to_sheet(F);utils$2.book_append_sheet(E,M,N.slice(0,30))}if(!x){const B=await uneFois(I=>this.suivreNomsNue({idNue:n,f:I})),A=n.split("/").pop();x=_&&traduire(B,_)||A}return{doc:E,fichiersSFIP:C,nomFichier:x}}async gnrerDeBd({idBd:n}){const _=await this.crerNue({}),x=await uneFois(async T=>await this.client.bds.suivreNomsBd({idBd:n,f:T}));await this.sauvegarderNomsNue({idNue:_,noms:x});const S=await uneFois(async T=>await this.client.bds.suivreDescriptionsBd({idBd:n,f:T}));await this.sauvegarderDescriptionsNue({idNue:_,descriptions:S});const E=await uneFois(async T=>await this.client.bds.suivreMotsClefsBd({idBd:n,f:T}));await this.ajouterMotsClefsNue({idNue:_,idsMotsClefs:E});const C=await uneFois(async T=>await this.client.bds.suivreTableauxBd({idBd:n,f:T}));for(const T of C){const B=T.id,A=await this.ajouterTableauNue({idNue:_,clefTableau:T.clef}),I=await uneFois(async N=>await this.client.tableaux.suivreColonnesTableau({idTableau:B,f:N,catgories:!1}));for(const N of I){await this.ajouterColonneTableauNue({idTableau:A,idVariable:N.variable,idColonne:N.id,index:N.index}),await this.changerColIndexTableauNue({idTableau:A,idColonne:N.id,val:!!N.index});const V=await uneFois(async D=>await this.client.tableaux.suivreRgles({idTableau:B,f:D}));for(const D of V)D.source.type==="tableau"&&await this.ajouterRgleTableauNue({idTableau:A,idColonne:N.id,rgle:D.rgle.rgle})}}return _}async gnrerSchmaBdNue({idNue:n,licence:_}){const x=await uneFois(async T=>await this.suivreTableauxNue({idNue:n,f:T})),S={};for(const T of x)S[T.clef]=await uneFois(async B=>await this.suivreRglesTableauNue({idNue:n,clefTableau:T.clef,f:B}));const E=async T=>await uneFois(async B=>await this.suivreColonnesTableauNue({idNue:n,clefTableau:T.clef,f:B}),B=>!!B&&!!B.length);return{licence:_,nues:[n],tableaux:await Promise.all(x.map(async T=>({cols:(await E(T)).map(A=>{const I=S[T.clef]?.some(N=>N.colonne===A.id&&N.rgle.rgle.typeRgle==="existe");return{idColonne:A.id,idVariable:A.variable,index:A.index,optionnel:!I}}),clef:T.clef})))}}async effacerNue({idNue:n}){const{bd:_,fOublier:x}=await this.obtBd();await _.del(n),await x();for(const E in["noms","descriptions","motsClefs"]){const C=await this.client.obtIdBd({nom:E,racine:n});C&&await this.client.effacerBd({id:C})}const S=await this.client.obtIdBd({nom:"tableaux",racine:n,type:"ordered-keyvalue"});if(S){const{bd:E,fOublier:C}=await this.client.orbite.ouvrirBdType({id:S,type:"ordered-keyvalue",schma:schmaBdTableauxDeBd}),T=Object.keys(E.all);for(const B of T)await this.client.tableaux.effacerTableau({idTableau:B});C(),await this.client.effacerBd({id:S})}await this.enleverDeMesNues({idNue:n}),await this.client.effacerBd({id:n})}}__decorate([cacheSuivi],Nue.prototype,"suivreDescriptionsNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreImage",null);__decorate([cacheSuivi],Nue.prototype,"suivreMotsClefsNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreNomsTableauNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreColonnesTableauNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreRglesTableauNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreQualitNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreDiffrencesNueEtTableau",null);__decorate([cacheSuivi],Nue.prototype,"suivreDiffrencesNueEtBd",null);__decorate([cacheSuivi],Nue.prototype,"suivreCorrespondanceBd",null);__decorate([cacheRechercheParNRsultats],Nue.prototype,"rechercherNuesDscendantes",null);__decorate([cacheSuivi],Nue.prototype,"suivreNuesParents",null);__decorate([cacheRechercheParNRsultats],Nue.prototype,"suivreBdsCorrespondantes",null);__decorate([cacheSuivi],Nue.prototype,"suivreEmpreinteTtesBdsNue",null);__decorate([cacheRechercheParNRsultats],Nue.prototype,"suivreDonnesTableauNue",null);const rechercherVariablesSelonNom=r=>async(n,_,x)=>{const S=async C=>{const T=similTexte(r,C);if(T){const{score:B,clef:A,info:I}=T;return await x({type:"rsultat",score:B,de:"nom",clef:A,info:I})}else return await x()};return await n.variables.suivreNomsVariable({idVariable:_,f:S})},rechercherVariablesSelonDescr=r=>async(n,_,x)=>{const S=async C=>{const T=similTexte(r,C);if(T){const{score:B,clef:A,info:I}=T;return await x({type:"rsultat",score:B,de:"descr",clef:A,info:I})}else return await x()};return await n.variables.suivreDescriptionsVariable({idVariable:_,f:S})},rechercherVariablesSelonTexte=r=>async(n,_,x)=>{const S=rechercherVariablesSelonNom(r),E=rechercherVariablesSelonDescr(r),C=rechercherSelonId(r);return await combinerRecherches({noms:S,descr:E,id:C},n,_,x)},rechercherMotsClefsSelonNom=r=>async(n,_,x)=>{const S=async C=>{const T=similTexte(r,C);if(T){const{score:B,clef:A,info:I}=T;return await x({type:"rsultat",score:B,clef:A,info:I,de:"nom"})}else return await x()};return await n.motsClefs.suivreNomsMotClef({idMotClef:_,f:S})},rechercherMotsClefsSelonDescr=r=>async(n,_,x)=>{const S=async C=>{const T=similTexte(r,C);if(T){const{score:B,clef:A,info:I}=T;return await x({type:"rsultat",score:B,clef:A,info:I,de:"descr"})}else return await x()};return await n.motsClefs.suivreDescriptionsMotClef({idMotClef:_,f:S})},rechercherMotsClefsSelonTexte=r=>async(n,_,x)=>{const S=rechercherMotsClefsSelonNom(r),E=rechercherMotsClefsSelonDescr(r),C=rechercherSelonId(r);return await combinerRecherches({noms:S,id:C,descr:E},n,_,x)},rechercherBdsSelonNom=r=>async(n,_,x)=>{const S=async C=>{const T=similTexte(r,C);if(T){const{score:B,clef:A,info:I}=T;return await x({type:"rsultat",score:B,clef:A,info:I,de:"nom"})}else return await x()};return await n.bds.suivreNomsBd({idBd:_,f:S})},rechercherBdsSelonDescr=r=>async(n,_,x)=>{const S=async C=>{const T=similTexte(r,C);if(T){const{score:B,clef:A,info:I}=T;return await x({type:"rsultat",score:B,clef:A,info:I,de:"descr"})}else return await x()};return await n.bds.suivreDescriptionsBd({idBd:_,f:S})},rechercherBdsSelonIdVariable=r=>async(n,_,x)=>{const S=async C=>await n.bds.suivreVariablesBd({idBd:_,f:C}),E=rechercherSelonId(r);return await sousRecherche("variable",S,E,n,x)},rechercherBdsSelonNomVariable=r=>async(n,_,x)=>{const S=async C=>await n.bds.suivreVariablesBd({idBd:_,f:C}),E=rechercherVariablesSelonNom(r);return await sousRecherche("variable",S,E,n,x)},rechercherBdsSelonVariable=r=>async(n,_,x)=>await combinerRecherches({id:rechercherBdsSelonIdVariable(r),nom:rechercherBdsSelonNomVariable(r)},n,_,x),rechercherBdsSelonIdMotClef=r=>async(n,_,x)=>{const S=async C=>await n.bds.suivreMotsClefsBd({idBd:_,f:C}),E=rechercherSelonId(r);return await sousRecherche("motClef",S,E,n,x)},rechercherBdsSelonNomMotClef=r=>async(n,_,x)=>{const S=async C=>await n.bds.suivreMotsClefsBd({idBd:_,f:C}),E=rechercherMotsClefsSelonNom(r);return await sousRecherche("motClef",S,E,n,x)},rechercherBdsSelonMotClef=r=>async(n,_,x)=>await combinerRecherches({id:rechercherBdsSelonIdMotClef(r),nom:rechercherBdsSelonNomMotClef(r)},n,_,x),rechercherBdsSelonTexte=r=>async(n,_,x)=>await combinerRecherches({nom:rechercherBdsSelonNom(r),descr:rechercherBdsSelonDescr(r),variables:rechercherBdsSelonVariable(r),motsClefs:rechercherBdsSelonMotClef(r),id:rechercherSelonId(r)},n,_,x),rechercherProjetsSelonNom=r=>async(n,_,x)=>{const S=C=>{const T=similTexte(r,C);if(T){const{score:B,clef:A,info:I}=T;x({type:"rsultat",score:B,clef:A,info:I,de:"nom"})}else x()};return await n.projets.suivreNomsProjet({idProjet:_,f:S})},rechercherProjetsSelonDescr=r=>async(n,_,x)=>{const S=C=>{const T=similTexte(r,C);if(T){const{score:B,clef:A,info:I}=T;x({type:"rsultat",score:B,clef:A,info:I,de:"descr"})}else x()};return await n.projets.suivreDescriptionsProjet({idProjet:_,f:S})},rechercherProjetsSelonIdBd=r=>async(n,_,x)=>{const S=async C=>await n.projets.suivreBdsProjet({idProjet:_,f:C}),E=rechercherSelonId(r);return await sousRecherche("bd",S,E,n,x)},rechercherProjetsSelonBd=r=>async(n,_,x)=>{const S=async C=>await n.projets.suivreBdsProjet({idProjet:_,f:C}),E=rechercherBdsSelonTexte(r);return await sousRecherche("bd",S,E,n,x)},rechercherProjetsSelonIdVariable=r=>async(n,_,x)=>{const S=async C=>await n.projets.suivreVariablesProjet({idProjet:_,f:C}),E=rechercherSelonId(r);return await sousRecherche("variable",S,E,n,x)},rechercherProjetsSelonNomVariable=r=>async(n,_,x)=>{const S=async C=>await n.projets.suivreVariablesProjet({idProjet:_,f:C}),E=rechercherVariablesSelonNom(r);return await sousRecherche("variable",S,E,n,x)},rechercherProjetsSelonVariable=r=>async(n,_,x)=>{const S=async C=>await n.projets.suivreVariablesProjet({idProjet:_,f:C}),E=rechercherVariablesSelonTexte(r);return await sousRecherche("variable",S,E,n,x)},rechercherProjetsSelonIdMotClef=r=>async(n,_,x)=>{const S=async C=>await n.projets.suivreMotsClefsProjet({idProjet:_,f:T=>C(T.map(B=>B.idMotClef))}),E=rechercherSelonId(r);return await sousRecherche("motClef",S,E,n,x)},rechercherProjetsSelonNomMotClef=r=>async(n,_,x)=>{const S=async C=>await n.projets.suivreMotsClefsProjet({idProjet:_,f:T=>C(T.map(B=>B.idMotClef))}),E=rechercherMotsClefsSelonNom(r);return await sousRecherche("motClef",S,E,n,x)},rechercherProjetsSelonMotClef=r=>async(n,_,x)=>{const S=async C=>await n.projets.suivreMotsClefsProjet({idProjet:_,f:T=>C(T.map(B=>B.idMotClef))}),E=rechercherMotsClefsSelonTexte(r);return await sousRecherche("motClef",S,E,n,x)},rechercherProjetsSelonTexte=r=>async(n,_,x)=>{const S=rechercherProjetsSelonNom(r),E=rechercherProjetsSelonDescr(r),C=rechercherProjetsSelonBd(r),T=rechercherProjetsSelonVariable(r),B=rechercherProjetsSelonMotClef(r),A=rechercherSelonId(r);return await combinerRecherches({noms:S,descr:E,bd:C,variable:T,motClef:B,id:A},n,_,x)},rechercherNuesSelonNom=r=>async(n,_,x)=>{const S=C=>{const T=similTexte(r,C);if(T){const{score:B,clef:A,info:I}=T;x({type:"rsultat",score:B,clef:A,info:I,de:"nom"})}else x()};return await n.nues.suivreNomsNue({idNue:_,f:S})},rechercherNuesSelonDescr=r=>async(n,_,x)=>{const S=C=>{const T=similTexte(r,C);if(T){const{score:B,clef:A,info:I}=T;x({type:"rsultat",score:B,clef:A,info:I,de:"descr"})}else x()};return await n.nues.suivreDescriptionsNue({idNue:_,f:S})},rechercherNuesSelonIdVariable=r=>async(n,_,x)=>{const S=async C=>await n.nues.suivreVariablesNue({idNue:_,f:C}),E=rechercherSelonId(r);return await sousRecherche("variable",S,E,n,x)},rechercherNuesSelonNomVariable=r=>async(n,_,x)=>{const S=async C=>await n.nues.suivreVariablesNue({idNue:_,f:C}),E=rechercherVariablesSelonNom(r);return await sousRecherche("variable",S,E,n,x)},rechercherNuesSelonVariable=r=>async(n,_,x)=>await combinerRecherches({id:rechercherNuesSelonIdVariable(r),nom:rechercherNuesSelonNomVariable(r)},n,_,x),rechercherNuesSelonIdMotClef=r=>async(n,_,x)=>{const S=async C=>await n.nues.suivreMotsClefsNue({idNue:_,f:C}),E=rechercherSelonId(r);return await sousRecherche("motClef",S,E,n,x)},rechercherNuesSelonNomMotClef=r=>async(n,_,x)=>{const S=async C=>await n.nues.suivreMotsClefsNue({idNue:_,f:C}),E=rechercherMotsClefsSelonNom(r);return await sousRecherche("motClef",S,E,n,x)},rechercherNuesSelonMotClef=r=>async(n,_,x)=>await combinerRecherches({id:rechercherNuesSelonIdMotClef(r),nom:rechercherNuesSelonNomMotClef(r)},n,_,x),rechercherNuesSelonTexte=r=>async(n,_,x)=>await combinerRecherches({nom:rechercherNuesSelonNom(r),descr:rechercherNuesSelonDescr(r),variables:rechercherNuesSelonVariable(r),motsClefs:rechercherNuesSelonMotClef(r),id:rechercherSelonId(r)},n,_,x);class Recherche{constructor({client:n}){_t(this,"client");this.client=n}async rechercherVariables({f:n,nRsultatsDsirs:_,toutLeRseau:x=!0}){return await this.client.rseau.rechercherVariables({f:n,nRsultatsDsirs:_,toutLeRseau:x})}async rechercherVariablesSelonId({idVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherSelonId(n);return await this.client.rseau.rechercherVariables({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherVariablesSelonNom({nomVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherVariablesSelonNom(n);return await this.client.rseau.rechercherVariables({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherVariablesSelonDescr({descrVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherVariablesSelonDescr(n);return await this.client.rseau.rechercherVariables({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherVariablesSelonTexte({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherVariablesSelonTexte(n);return await this.client.rseau.rechercherVariables({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherMotsClefs({f:n,nRsultatsDsirs:_,toutLeRseau:x=!0}){return await this.client.rseau.rechercherMotsClefs({f:n,nRsultatsDsirs:_,toutLeRseau:x})}async rechercherMotsClefsSelonId({idMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherSelonId(n);return await this.client.rseau.rechercherMotsClefs({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherMotsClefsSelonNom({nomMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherMotsClefsSelonNom(n);return await this.client.rseau.rechercherMotsClefs({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherMotsClefsSelonDescr({descrMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherMotsClefsSelonDescr(n);return await this.client.rseau.rechercherMotsClefs({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherMotsClefsSelonTexte({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherMotsClefsSelonTexte(n);return await this.client.rseau.rechercherMotsClefs({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherBds({f:n,nRsultatsDsirs:_,toutLeRseau:x=!0}){return await this.client.rseau.rechercherBds({f:n,nRsultatsDsirs:_,toutLeRseau:x})}async rechercherBdsSelonId({idBd:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherSelonId(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherBdsSelonNom({nomBd:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherBdsSelonNom(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherBdsSelonDescr({descrBd:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherBdsSelonDescr(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherBdsSelonIdMotClef({idMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherBdsSelonIdMotClef(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherBdsSelonIdVariable({idVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherBdsSelonIdVariable(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherBdsSelonNomMotClef({nomMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherBdsSelonNomMotClef(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherBdsSelonNomVariable({nomVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherBdsSelonNomVariable(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherBdsSelonMotClef({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherBdsSelonMotClef(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherBdsSelonVariable({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherBdsSelonVariable(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherBdsSelonTexte({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherBdsSelonTexte(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherProfilsSelonId({idCompte:n,f:_,nRsultatsDsirs:x}){const S=rechercherSelonId(n);return await this.client.rseau.rechercherMembres({f:_,nRsultatsDsirs:x,fObjectif:S})}async rechercherProfilsSelonNom({nom:n,f:_,nRsultatsDsirs:x}){const S=rechercherProfilsSelonNom(n);return await this.client.rseau.rechercherMembres({f:_,nRsultatsDsirs:x,fObjectif:S})}async rechercherProfilsSelonImage({image:n,f:_,nRsultatsDsirs:x}){const S=rechercherProfilsSelonImage(n);return await this.client.rseau.rechercherMembres({f:_,nRsultatsDsirs:x,fObjectif:S})}async rechercherProfilsSelonActivit({f:n,nRsultatsDsirs:_}){const x=rechercherProfilsSelonActivit();return await this.client.rseau.rechercherMembres({f:n,nRsultatsDsirs:_,fObjectif:x})}async rechercherProfilsSelonCourriel({courriel:n,f:_,nRsultatsDsirs:x}){const S=rechercherProfilsSelonCourriel(n);return await this.client.rseau.rechercherMembres({f:_,nRsultatsDsirs:x,fObjectif:S})}async rechercherProfilsSelonTexte({texte:n,f:_,nRsultatsDsirs:x}){const S=rechercherProfilsSelonTexte(n);return await this.client.rseau.rechercherMembres({f:_,nRsultatsDsirs:x,fObjectif:S})}async rechercherProjets({f:n,nRsultatsDsirs:_,toutLeRseau:x=!0}){return await this.client.rseau.rechercherProjets({f:n,nRsultatsDsirs:_,toutLeRseau:x})}async rechercherProjetsSelonId({idProjet:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherSelonId(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherProjetsSelonNom({nomProjet:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherProjetsSelonNom(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherProjetsSelonDescr({descrProjet:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherProjetsSelonDescr(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherProjetsSelonIdVariable({idVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherProjetsSelonIdVariable(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherProjetsSelonNomVariable({nomVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherProjetsSelonNomVariable(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherProjetsSelonVariable({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherProjetsSelonVariable(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherProjetsSelonIdMotClef({idMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherProjetsSelonIdMotClef(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherProjetsSelonNomMotClef({nomMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherProjetsSelonNomMotClef(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherProjetsSelonMotClef({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherProjetsSelonMotClef(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherProjetsSelonIdBd({idBd:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherProjetsSelonIdBd(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherProjetsSelonBd({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherProjetsSelonBd(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherProjetsSelonTexte({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherProjetsSelonTexte(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherNues({f:n,nRsultatsDsirs:_,toutLeRseau:x=!0}){return await this.client.rseau.rechercherNues({f:n,nRsultatsDsirs:_,toutLeRseau:x})}async rechercherNuesSelonId({idNue:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherSelonId(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherNuesSelonNom({nomNue:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherNuesSelonNom(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherNuesSelonDescr({descrNue:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherNuesSelonDescr(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherNuesSelonIdMotClef({idMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherNuesSelonIdMotClef(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherNuesSelonIdVariable({idVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherNuesSelonIdVariable(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherNuesSelonNomMotClef({nomMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherNuesSelonNomMotClef(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherNuesSelonNomVariable({nomVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherNuesSelonNomVariable(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherNuesSelonMotClef({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherNuesSelonMotClef(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherNuesSelonVariable({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherNuesSelonVariable(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}async rechercherNuesSelonTexte({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:S=!0}){const E=rechercherNuesSelonTexte(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S})}}__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariables",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariablesSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariablesSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariablesSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariablesSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefs",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefsSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefsSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefsSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefsSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBds",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonIdMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonIdVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonNomMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonNomVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonImage",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonActivit",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonCourriel",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjets",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonIdVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonNomVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonIdMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonNomMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonIdBd",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonBd",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNues",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonIdMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonIdVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonNomMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonNomVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonTexte",null);class ImportateurFeuilleCalcul{constructor(n){_t(this,"doc");this.doc=n}obtNomsTableaux(){return this.doc.SheetNames}obtColsTableau(n){const _=this.doc.Sheets[n];return(utils$2.sheet_to_json(_,{header:1})[0]||[]).map(S=>S.toString())}obtDonnes(n,_){const x=this.doc.Sheets[n],S=utils$2.sheet_to_json(x);if(Array.isArray(_))return S.map(E=>Object.fromEntries(Object.keys(E).filter(C=>_.includes(C)).map(C=>[C,E[C]])));{const E=Object.fromEntries(Object.entries(_).map(([C,T])=>[T,C]));return S.map(C=>Object.fromEntries(Object.keys(C).filter(T=>Object.keys(E).includes(T)).map(T=>[E[T],C[T]])))}}}const copieProfonde=r=>JSON.parse(JSON.stringify(r)),estUnDic=r=>typeof r=="object"&&!Array.isArray(r),estUneListe=r=>Array.isArray(r),extraireBranches=(r,n)=>{let _;if(!n.length)return _=estUnDic(r)?Object.values(r):r,{base:{},branches:_};const x=extraireDonnes(r,n.slice(0,n.length-1)),S=n[n.length-1];let E;if(typeof S=="number")if(estUneListe(x)){const C=x[S];if(typeof C!="object")throw new Error(C.toString());E=C,delete x[S]}else throw new Error(`${S} ne peut pas indexer une liste.`);else if(typeof S=="string")if(estUnDic(x)){const C=x[S];if(typeof C!="object")throw new Error(C.toString());E=C,delete x[S]}else throw new Error(`${S} ne peut pas indexer un objet.`);else throw new Error(`${S} n'est pas une clef valide.`);if(estUnDic(E))_=Object.values(E);else if(estUneListe(E))_=E;else throw Error(JSON.stringify(E));return{base:r,branches:_}},injecterBranche=(r,n,_)=>{if(!n.length)Object.assign(r,_);else{const x=n.slice(1,n.length),S=extraireDonnes(r,x),E=n[n.length-1];if(typeof E=="number")if(estUneListe(S))S[E]=_;else throw new Error(`${E} ne peut pas indexer une liste.`);else if(typeof E=="string")if(estUnDic(S))S[E]=_;else throw new Error(`${E} ne peut pas indexer un objet.`);else throw new Error(`${E} n'est pas une clef valide.`)}},aplatirDonnes=(r,n=[],_,x=[])=>{n[n.length-1]!==-1&&n.push(-1);const S=n.indexOf(-1),E=n.slice(0,S),C=n.slice(S+1,n.length),{base:T,branches:B}=extraireBranches(r,E);for(const A of B){if(typeof A!="object")throw new Error(A.toString());const I=copieProfonde(T);injecterBranche(I,E,A),C.length?aplatirDonnes(A,C,I,x):x.push(I)}return x},extraireDonnes=(r,n)=>{let _=r;for(const x of n)if(typeof x=="number")if(estUneListe(_))_=_[x];else throw new Error(`${x} ne peut pas indexer une liste.`);else if(typeof x=="string")if(estUnDic(_))_=_[x];else throw new Error(`${x} ne peut pas indexer un objet.`);else throw new Error(`Clef de type non indexable: ${x}`);return _};class ImportateurDonnesJSON{constructor(n){_t(this,"donnesJSON");this.donnesJSON=n}obtDonnes(n,_,x){let S=[],E=extraireDonnes(this.donnesJSON,n);if(typeof E!="object")throw new Error(`Type de donnes erron: ${E.toString()}`);E=aplatirDonnes(E,_);for(const C of E){if(typeof C!="object")throw new Error(`lment de type non support: ${C}`);S=[Object.fromEntries(Object.keys(x).map(B=>{const A=x[B];let I;try{I=extraireDonnes(C,A)}catch{I=void 0}return[B,I]}).filter(B=>B[1]!==void 0)),...S]}return S}}(isElectronMain||isNode)&&(__vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal),void 0).then(r=>set_fs(r)),__vitePreload(()=>Promise.resolve().then(()=>stream),void 0).then(r=>__stream.set_readable(r.Readable)));const MESSAGE_NON_DISPO_NAVIGATEUR="L'automatisation de l'importation des fichiers locaux n'est pas disponible sur la version apli internet de Constellation.",schmaBdAutomatisations={type:"object",additionalProperties:{type:"object",anyOf:[{type:"object",properties:{type:{type:"string"},id:{type:"string"},frquence:{type:"object",properties:{n:{type:"number"},units:{type:"string"}},nullable:!0,required:["n","units"]},idObjet:{type:"string"},typeObjet:{type:"string"},formatDoc:{type:"string"},dossier:{type:"string",nullable:!0},langues:{type:"array",items:{type:"string"},nullable:!0},dispositifs:{type:"array",items:{type:"string"}},inclureFichiersSFIP:{type:"boolean"},nRsultatsDsirsNue:{type:"integer",nullable:!0}},required:["type","idObjet","typeObjet","formatDoc","dispositifs","inclureFichiersSFIP"]},{type:"object",properties:{id:{type:"string"},frquence:{type:"object",properties:{n:{type:"number"},units:{type:"string"}},nullable:!0,required:["n","units"]},idTableau:{type:"string"},dispositif:{type:"string"},source:{type:"object",properties:{typeSource:{type:"string"},adresseFichier:{type:"string",nullable:!0},info:{type:"object",additionalProperties:!0,required:[]}},required:["info","typeSource"]},conversions:{type:"object",nullable:!0,additionalProperties:!0,required:[]}},required:["id","idTableau","dispositif","source"]}],required:["id","type"]},required:[]},obtTempsInterval=r=>{const{n,units:_}=r;switch(_){case"annes":return n*365.25*24*60*60*1e3;case"mois":return n*30*24*60*60*1e3;case"semaines":return n*7*24*60*60*1e3;case"jours":return n*24*60*60*1e3;case"heures":return n*60*60*1e3;case"minutes":return n*60*1e3;case"secondes":return n*1e3;case"millisecondes":return n;default:throw new Error(_)}},gnrerFExportation=(r,n)=>async()=>{const _=await __vitePreload(()=>import("./os-9e7c256e.js"),[]),x=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0),S=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal),void 0),E=r.dossier?await n.automatisations.rsoudreAdressePriveFichier({clef:r.dossier}):x.join(_.homedir(),"constellation");if(!E)throw new Error("Dossier introuvable");let C;const T=I=>{const N=I.split(".");return`${N[0]}-${Date.now()}.${N[1]}`};switch(r.typeObjet){case"tableau":{const I=await n.tableaux.exporterDonnes({idTableau:r.idObjet,langues:r.langues});C=I.nomFichier,r.copies&&(C=T(C)),await n.bds.exporterDocumentDonnes({donnes:I,formatDoc:r.formatDoc,dossier:E,inclureFichiersSFIP:r.inclureFichiersSFIP});break}case"bd":{const I=await n.bds.exporterDonnes({idBd:r.idObjet,langues:r.langues});C=I.nomFichier,r.copies&&(C=T(C)),await n.bds.exporterDocumentDonnes({donnes:I,formatDoc:r.formatDoc,dossier:E,inclureFichiersSFIP:r.inclureFichiersSFIP});break}case"projet":{const I=await n.projets.exporterDonnes({idProjet:r.idObjet,langues:r.langues});C=I.nomFichier,r.copies&&(C=T(C)),await n.projets.exporterDocumentDonnes({donnes:I,formatDoc:r.formatDoc,dossier:E,inclureFichiersSFIP:r.inclureFichiersSFIP});break}case"nue":{const I=await n.nues.exporterDonnesNue({idNue:r.idObjet,langues:r.langues,nRsultatsDsirs:r.nRsultatsDsirsNue||1e3});C=I.nomFichier,r.copies&&(C=T(C)),await n.bds.exporterDocumentDonnes({donnes:I,formatDoc:r.formatDoc,dossier:E,inclureFichiersSFIP:r.inclureFichiersSFIP});break}default:throw new Error(r.typeObjet)}const B=S.readdirSync(E).filter(I=>{try{return S.statSync(I).isFile()&&A(x.basename(I),C)}catch{return!1}}),A=(I,N)=>{const V=I.split(".").pop()||"";return`${I.slice(0,-(V?.length+1)).split("-").slice(0,-1).join("")}.${V}`===N};if(r.copies){if(r.copies.type==="n"){const I=r.copies.n-B.length;I>0&&B.map(O=>({temps:new Date(S.statSync(O).mtime).valueOf(),fichier:O})).sort((O,F)=>O.temps>F.temps?1:-1).slice(I).map(O=>O.fichier).forEach(O=>S.rmSync(O))}else if(r.copies.type==="temps"){const I=Date.now(),{temps:N}=r.copies;B.filter(D=>{const O=new Date(S.statSync(D).mtime).valueOf();return I-O<obtTempsInterval(N)}).forEach(D=>S.rmSync(D))}}},gnrerFAuto=(r,n)=>{switch(r.type){case"importation":return async()=>{const _=async C=>await n.automatisations.rsoudreAdressePriveFichier({clef:C})||void 0,x=await n.automatisations.obtDonnesImportation(r,_),S=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0);let E;if(r.source.typeSource==="fichier"&&r.source.adresseFichier){const C=await _(r.source.adresseFichier);C&&(E=S.dirname(C))}await n.tableaux.importerDonnes({idTableau:r.idTableau,donnes:x,conversions:r.conversions,cheminBaseFichiers:E})};case"exportation":return gnrerFExportation(r,n);default:throw new Error(r)}},lancerAutomatisation=async({spc:r,idSpc:n,client:_,ftat:x})=>{const S=gnrerFAuto(r,_),E=`auto: ${n}`,C=r.frquence?obtTempsInterval(r.frquence):void 0,T=new s;let B="";const A=await _.obtDeStockageLocal({clef:E}),I=new Set([A]),N=async V=>{if(I.has(V))return;if(B=V,await T.acquire("opration"),V!==B||I.has(V)){T.release("opration");return}await _.sauvegarderAuStockageLocal({clef:E,val:V}),I.add(V);const D={type:"sync",depuis:new Date().getTime()};x(D);try{if(await S(),C){const O={type:"programme",:Date.now()+C};x(O)}else x({type:"coute"})}catch(O){const F={type:"erreur",erreur:JSON.stringify({nom:O.name,message:O.message,pile:O.stack,cause:O.cause},void 0,2),prochaineProgramme:C?Date.now()+C:void 0};x(F)}T.release("opration")};if(r.frquence){x({type:"programme",:C});const D={},O=async()=>{const X=new Date().getTime();await N(X.toString());const J=setTimeout(O,C);D.f=async()=>clearTimeout(J)},F=new Date().getTime(),M=await _.obtDeStockageLocal({clef:E}),L=M?parseInt(M):-1/0,j=F-L,q=setTimeout(O,Math.max(C-j,0));return D.f=async()=>clearTimeout(q),async()=>{D.f&&await D.f()}}else switch(x({type:"coute"}),r.type){case"exportation":return r.typeObjet==="nue"?await _.nues.suivreEmpreinteTtesBdsNue({idNue:r.idObjet,f:N}):await _.suivreEmpreinteTtesBdRcursive({idBd:r.idObjet,f:N});case"importation":switch(r.source.typeSource){case"fichier":{if(!isNode&&!isElectronMain)throw new Error(MESSAGE_NON_DISPO_NAVIGATEUR);const D=await __vitePreload(()=>import("chokidar"),[]),O=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal),void 0),{adresseFichier:F}=r.source,M=await _.automatisations.rsoudreAdressePriveFichier({clef:F});if(!M||!O.existsSync(M))throw new Error(`Fichier ${F} introuvable.`);const L=D.watch(M);L.on("change",async()=>{const J=new Date().getTime().toString();N(J)});const j=O.statSync(M).mtime.getTime(),q=await _.obtDeStockageLocal({clef:E});if(q?j>parseInt(q):!0){const J=new Date().getTime().toString();N(J)}return async()=>await L.close()}case"url":return x({type:"erreur",erreur:"La frquence d'une automatisation d'importation d'URL doit tre spcifie.",prochaineProgramme:void 0}),faisRien;default:throw new Error(r.source)}default:throw new Error(r)}};class AutomatisationActive extends eventsExports.EventEmitter{constructor(_,x,S){super();_t(this,"client");_t(this,"tat");_t(this,"fOublier");this.client=S,lancerAutomatisation({spc:_,idSpc:x,client:this.client,ftat:E=>{this.tat=E,this.emit("misJour")}}).then(E=>{this.fOublier=E,this.emit("prt")})}async fermer(){this.fOublier||await new Promise(_=>{this.once("prt",()=>{_()})}),await this.fOublier?.()}}const activePourCeDispositif=(r,n)=>{switch(r.type){case"importation":return r.dispositif===n;case"exportation":return r.dispositifs.includes(n);default:throw new Error(r)}},verrou=new s;class Automatisations extends ComposanteClientDic{constructor({client:_}){super({client:_,clef:"automatisations",schmaBdPrincipale:schmaBdAutomatisations});_t(this,"automatisations");_t(this,"vnements");_t(this,"fOublier");this.automatisations={},this.vnements=new eventsExports.EventEmitter,this.initialiser()}async initialiser(){this.fOublier=await this.suivreBdPrincipale({f:_=>this.mettreAutosJour(Object.values(_))})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async mettreAutosJour(_){await verrou.acquire("miseJour");const x=Object.keys(this.automatisations);for(const S of x)_.find(E=>E.id===S)||await this.fermerAuto(S);for(const S of _)if(activePourCeDispositif(S,this.client.orbite.identity.id)){if(!Object.keys(this.automatisations).includes(S.id)){const E=new AutomatisationActive(S,S.id,this.client);E.on("misJour",()=>this.vnements.emit("misJour")),this.automatisations[S.id]=E}}else this.automatisations[S.id]&&await this.fermerAuto(S.id);verrou.release("miseJour")}async obtDonnesImportation(_,x=async S=>S){const{typeSource:S}=_.source,{formatDonnes:E}=_.source.info;switch(S){case"url":{const{url:C}=_.source;switch(E){case"json":{const{clefsRacine:T,clefslments:B,cols:A}=_.source.info,I=await importerJSONdURL(C);return new ImportateurDonnesJSON(I).obtDonnes(T,B,A)}case"feuilleCalcul":{const{nomTableau:T,cols:B,optionsXLSX:A}=_.source.info,I=await importerFeuilleCalculDURL(C,A);return new ImportateurFeuilleCalcul(I).obtDonnes(T,B)}default:throw new Error(E)}}case"fichier":{if(!isElectronMain&&!isNode)throw new Error(MESSAGE_NON_DISPO_NAVIGATEUR);const C=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal),void 0),{adresseFichier:T}=_.source,B=await x(T);if(!B||!C.existsSync(B))throw new Error(`Fichier ${B} introuvable.`);switch(E){case"json":{const{clefsRacine:A,clefslments:I,cols:N}=_.source.info,V=await C.promises.readFile(B),D=JSON.parse(V.toString());return new ImportateurDonnesJSON(D).obtDonnes(A,I,N)}case"feuilleCalcul":{const{nomTableau:A,cols:I}=_.source.info,N=readFileSync(B);return new ImportateurFeuilleCalcul(N).obtDonnes(A,I)}default:throw new Error(E)}}default:throw new Error(S)}}async ajouterAutomatisationExporter({id:_,typeObjet:x,formatDoc:S,inclureFichiersSFIP:E,dossier:C,langues:T,frquence:B,dispositifs:A,nRsultatsDsirsNue:I,copies:N}){A=A||[this.client.orbite.identity.id];const V=v4$1(),D=await this.sauvegarderAdressePriveFichier({fichier:C}),O={type:"exportation",id:V,idObjet:_,typeObjet:x,dispositifs:A,frquence:B,formatDoc:S,langues:T,inclureFichiersSFIP:E,dossier:D,nRsultatsDsirsNue:I,copies:N};Object.keys(O).forEach(L=>{O[L]===void 0&&delete O[L]});const{bd:F,fOublier:M}=await this.obtBd();return await F.put(V,O),await M(),V}async ajouterAutomatisationImporter({idTableau:_,source:x,frquence:S,dispositif:E}){const{bd:C,fOublier:T}=await this.obtBd();E=E||this.client.orbite.identity.id;const B=v4$1();x.typeSource==="fichier"&&(x.adresseFichier=await this.sauvegarderAdressePriveFichier({fichier:x.adresseFichier}));const A={type:"importation",id:B,idTableau:_,dispositif:E,frquence:S,source:x};return Object.keys(A).forEach(I=>{A[I]===void 0&&delete A[I]}),await C.put(B,A),await T(),B}async annulerAutomatisation({id:_}){const{bd:x,fOublier:S}=await this.obtBd();await x.del(_),await S()}async rsoudreAdressePriveFichier({clef:_}){return _?await this.client.obtDeStockageLocal({clef:_}):null}async sauvegarderAdressePriveFichier({fichier:_}){const x="dossier."+v4$1();return await this.client.sauvegarderAuStockageLocal({clef:x,val:_}),x}async suivreAutomatisations({f:_,idCompte:x}){const S=async E=>{const C=await Promise.all(Object.values(E).map(async T=>{const B=deepcopy(T);if(B.type==="importation"&&B.source.typeSource==="fichier"){const{adresseFichier:A}=B.source;if(A){const I=await this.rsoudreAdressePriveFichier({clef:A});I?B.source.adresseFichier=I:delete B.source.adresseFichier}}else if(B.type==="exportation"){const{dossier:A}=B;if(A){const I=await this.rsoudreAdressePriveFichier({clef:A});I?B.dossier=I:delete B.dossier}}return B}));await _(C)};return await this.suivreBdPrincipale({idCompte:x,f:S})}async suivretatAutomatisations({f:_}){const x=async()=>{const S=Object.fromEntries(Object.keys(this.automatisations).map(E=>[E,this.automatisations[E].tat]).filter(E=>E[1]));await _(S)};return this.vnements.on("misJour",x),async()=>{this.vnements.off("misJour",x)}}async fermerAuto(_){await this.automatisations[_].fermer(),delete this.automatisations[_]}async fermer(){await Promise.all(Object.keys(this.automatisations).map(_=>{this.fermerAuto(_)})),await this.fOublier?.()}}const stockagesLocaux={};class LocalStorage{constructor(n){_t(this,"fichier");_t(this,"_donnes");_t(this,"_vnements");_t(this,"_idRequteSauvegarde");_t(this,"verrou");_t(this,"fOublier");this.fichier=path.join(n,"donnes.json"),this._vnements=new eventsExports.EventEmitter,this.verrou=new s,globSourceImport.existsSync(n)||globSourceImport.mkdirSync(n);try{this._donnes=JSON.parse(globSourceImport.readFileSync(this.fichier).toString())}catch{this._donnes={}}const _=()=>{const x=v4$1();this._idRequteSauvegarde=x,this.sauvegarder(x)};this._vnements.on("sauvegarder",_),this.fOublier=()=>this._vnements.off("sauvegarder",_)}getItem(n){return this._donnes[n]}setItem(n,_){this._donnes[n]=_,this.demanderSauvegarde()}demanderSauvegarde(){this._vnements.emit("sauvegarder")}removeItem(n){delete this._donnes[n],this.demanderSauvegarde()}clear(){this._donnes={},globSourceImport.rmSync(this.fichier)}async sauvegarder(n){if(await this.verrou.acquire("sauvegarder"),this._idRequteSauvegarde!==n){this.verrou.release("sauvegarder");return}await globSourceImport.promises.writeFile(this.fichier,JSON.stringify(this._donnes)),this.verrou.release("sauvegarder")}async fermer(){await this.verrou.acquire("sauvegarder"),this.fOublier&&this.fOublier(),this.verrou.release("sauvegarder")}}const obtStockageLocal=async r=>{if(typeof localStorage>"u"||localStorage===null){if(!r)throw new Error("Orbite n'est pas encore initialise, et aucun dossier ne fut spcifi dans la configuration d'initialisation de Constellation.");const n=path.join(r,"_stockageLocal");return stockagesLocaux[n]||(stockagesLocaux[n]=new LocalStorage(n)),stockagesLocaux[n]}else return localStorage},exporterStockageLocal=async()=>{const r=await obtStockageLocal();return r instanceof LocalStorage?JSON.stringify(r._donnes):JSON.stringify(r)};var sha256$1={exports:{}};(function(r,n){(function(_,x){r.exports=x(requireCore())})(commonjsGlobal,function(_){return function(x){var S=_,E=S.lib,C=E.WordArray,T=E.Hasher,B=S.algo,A=[],I=[];(function(){function D(L){for(var j=x.sqrt(L),q=2;q<=j;q++)if(!(L%q))return!1;return!0}function O(L){return(L-(L|0))*4294967296|0}for(var F=2,M=0;M<64;)D(F)&&(M<8&&(A[M]=O(x.pow(F,1/2))),I[M]=O(x.pow(F,1/3)),M++),F++})();var N=[],V=B.SHA256=T.extend({_doReset:function(){this._hash=new C.init(A.slice(0))},_doProcessBlock:function(D,O){for(var F=this._hash.words,M=F[0],L=F[1],j=F[2],q=F[3],H=F[4],X=F[5],J=F[6],Z=F[7],ae=0;ae<64;ae++){if(ae<16)N[ae]=D[O+ae]|0;else{var ce=N[ae-15],ve=(ce<<25|ce>>>7)^(ce<<14|ce>>>18)^ce>>>3,pe=N[ae-2],G=(pe<<15|pe>>>17)^(pe<<13|pe>>>19)^pe>>>10;N[ae]=ve+N[ae-7]+G+N[ae-16]}var Y=H&X^~H&J,U=M&L^M&j^L&j,W=(M<<30|M>>>2)^(M<<19|M>>>13)^(M<<10|M>>>22),ee=(H<<26|H>>>6)^(H<<21|H>>>11)^(H<<7|H>>>25),re=Z+ee+Y+I[ae]+N[ae],oe=W+U;Z=J,J=X,X=H,H=q+re|0,q=j,j=L,L=M,M=re+oe|0}F[0]=F[0]+M|0,F[1]=F[1]+L|0,F[2]=F[2]+j|0,F[3]=F[3]+q|0,F[4]=F[4]+H|0,F[5]=F[5]+X|0,F[6]=F[6]+J|0,F[7]=F[7]+Z|0},_doFinalize:function(){var D=this._data,O=D.words,F=this._nDataBytes*8,M=D.sigBytes*8;return O[M>>>5]|=128<<24-M%32,O[(M+64>>>9<<4)+14]=x.floor(F/4294967296),O[(M+64>>>9<<4)+15]=F,D.sigBytes=O.length*4,this._process(),this._hash},clone:function(){var D=T.clone.call(this);return D._hash=this._hash.clone(),D}});S.SHA256=T._createHelper(V),S.HmacSHA256=T._createHmacHelper(V)}(Math),_.SHA256})})(sha256$1);var sha256Exports=sha256$1.exports;const sha256=getDefaultExportFromCjs(sha256Exports),schmaStructureBdProtocoles={type:"object",additionalProperties:{type:"array",items:{type:"string"}},required:[]};class Protocoles extends ComposanteClientDic{constructor({client:n}){super({client:n,clef:"protocoles",schmaBdPrincipale:schmaStructureBdProtocoles})}async tablirProtocoles({protocoles:n,idDispositif:_}){_=_||await this.client.obtIdDispositif();const{bd:x,fOublier:S}=await this.obtBd();if(n){const E=(await x.allAsJSON())[_];(n.some(C=>!E.includes(C))||E.some(C=>!n.includes(C)))&&await x.put(_,n)}else await x.del(_);await S()}async suivreProtocoles({f:n,idCompte:_}){return await this.suivreBdPrincipale({idCompte:_,f:n})}}__decorate([cacheSuivi],Protocoles.prototype,"suivreProtocoles",null);const estOrbiteDB=r=>{if(!r)return!1;const n=r;return n.id&&typeof n.open=="function"&&typeof n.stop=="function"&&n.ipfs},schmaStructureBdCompte={type:"object",properties:{protocoles:{type:"string",nullable:!0},profil:{type:"string",nullable:!0},motsClefs:{type:"string",nullable:!0},variables:{type:"string",nullable:!0},bds:{type:"string",nullable:!0},projets:{type:"string",nullable:!0},nues:{type:"string",nullable:!0},favoris:{type:"string",nullable:!0},rseau:{type:"string",nullable:!0},automatisations:{type:"string",nullable:!0}},required:[]},schmaStructureNomsDispositifs={type:"object",additionalProperties:{type:"object",properties:{nom:{type:"string",nullable:!0},type:{type:"string",nullable:!0}}},required:[]},DLAI_EXPIRATION_INVITATIONS=1e3*60*5;class ClientConstellation extends eventsExports.EventEmitter{constructor(_={}){super();_t(this,"_opts");_t(this,"bdCompte");_t(this,"orbite");_t(this,"sfip");_t(this,"idNodeSFIP");_t(this,"pingles");_t(this,"profil");_t(this,"bds");_t(this,"tableaux");_t(this,"variables");_t(this,"rseau");_t(this,"favoris");_t(this,"projets");_t(this,"recherche");_t(this,"motsClefs");_t(this,"automatisations");_t(this,"nues");_t(this,"licences");_t(this,"protocoles");_t(this,"_orbiteExterne");_t(this,"_sfipExterne");_t(this,"prt");_t(this,"idCompte");_t(this,"encryption");_t(this,"sujet_rseau");_t(this,"motsDePasseRejoindreCompte");_t(this,"ennikkai");_t(this,"verrouObtIdBd");this._opts=_,this.prt=!1,this.sujet_rseau=_.sujetRseau||"rseau-constellation",this.motsDePasseRejoindreCompte={},this.verrouObtIdBd=new s,this._orbiteExterne=this._sfipExterne=!1,this.encryption=new EncryptionLocalFirst,this.ennikkai=new ({})}async initialiser(){const{sfip:_,orbite:x}=await this._gnrerSFIPetOrbite();this.sfip=_,this.orbite=gestionnaireOrbiteGnral.obtGestionnaireOrbite({orbite:x}),this.idNodeSFIP=await this.sfip.id();const S={type:nomType,write:this.orbite.identity.id,nom:"racine"};this.idCompte=this._opts.compte||await this.obtDeStockageLocal({clef:"idCompte",parCompte:!1})||void 0,this.idCompte||(this.idCompte=await this.crerBdIndpendante({type:"keyvalue",optionsAccs:S,nom:"racine"}),await this.sauvegarderAuStockageLocal({clef:"idCompte",val:this.idCompte,parCompte:!1})),this.pingles=new pingles({client:this}),await this.initialiserCompte({idCompte:this.idCompte}),this.profil=new Profil({client:this}),this.motsClefs=new MotsClefs({client:this}),this.tableaux=new Tableaux({client:this}),this.variables=new Variables({client:this}),this.bds=new BDs({client:this}),this.projets=new Projets({client:this}),this.nues=new Nue({client:this}),this.rseau=new Rseau({client:this}),await this.rseau.initialiser(),this.favoris=new Favoris({client:this}),this.automatisations=new Automatisations({client:this}),this.recherche=new Recherche({client:this}),this.licences=new Licences({client:this}),await this.pingler(),this.protocoles=new Protocoles({client:this}),this.prt=!0,this.emit("prt"),this.protocoles.tablirProtocoles({protocoles:this._opts.protocoles})}async _gnrerSFIPetOrbite(){const{orbite:_}=this._opts;prparerOrbite();let x,S;const E=async C=>{if(C?.sfip)return this._sfipExterne=!0,C.sfip;{const T=(await __vitePreload(()=>import("./index-9755d31a.js").then(B=>B.j),[])).default;return await T(C?.dossier)}};if(_)if(estOrbiteDB(_))this._sfipExterne=this._orbiteExterne=!0,x=_.ipfs,S=_;else{const C=(await __vitePreload(()=>Promise.resolve().then(()=>orbite),void 0)).default;x=await E(_.sfip),S=await C({sfip:x,dossierOrbite:_.dossier})}else{x=await E();const C=(await __vitePreload(()=>Promise.resolve().then(()=>orbite),void 0)).default;S=await C({sfip:x})}return{sfip:x,orbite:S}}async initialiserCompte({idCompte:_}){const{bd:x}=await this.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdCompte});this.bdCompte=x}async obtOptionsAccs(){return this.bdCompte||await once_1(this,"prt"),{write:this.bdCompte.address}}async pingler(){await this.pingles.pinglerBd({id:await this.obtIdCompte()}),await Promise.all([this.profil,this.automatisations,this.bds,this.variables,this.projets,this.nues,this.motsClefs,this.rseau,this.favoris].map(async _=>_&&await _.pingler()))}async signer({message:_}){const x=this.orbite.identity,S=await this.orbite.identity.sign(x,_),E=this.orbite.identity.publicKey;return{signature:S,clefPublique:E}}async vrifierSignature({signature:_,message:x}){return!_||!_.clefPublique||!_.signature?!1:await this.orbite.identity.verify(_.signature,_.clefPublique,x)}async suivreDispositifs({f:_,idCompte:x}){const S=async({id:E})=>{const{bd:C,fOublier:T}=await this.orbite.ouvrirBdType({id:E,type:"keyvalue",schma:schmaStructureBdCompte}),B=C.access,A=B.type;if(A==="ipfs")return await _(B.write),await T(),faisRien;if(A==="contrleur-constellation"){const I=B,N=async()=>{const V=I.gestRles._rles[MODRATEUR];await _(V)};return I.gestRles.on("misJour",N),N(),async()=>{I.gestRles.off("misJour",N),await T()}}else return await T(),faisRien};return await suivreBdDeFonction({fRacine:async({fSuivreRacine:E})=>x?(await E(x),faisRien):await this.suivreIdCompte({f:E}),f:ignorerNonDfinis(_),fSuivre:S})}async nommerDispositif({idDispositif:_,nom:x,type:S}){const E=_||await this.obtIdDispositif(),C=await this.obtIdBd({nom:"nomsDispositifs",racine:await this.obtIdCompte(),type:"keyvalue"}),{bd:T,fOublier:B}=await this.orbite.ouvrirBdType({id:C,type:"keyvalue",schma:schmaStructureNomsDispositifs});await T.set(E,{nom:x,type:S}),await B()}async suivreNomsDispositifs({idCompte:_,f:x}){const S=_||await this.obtIdCompte();return await this.suivreBdDicDeClef({id:S,schma:schmaStructureNomsDispositifs,clef:"nomsDispositifs",f:x})}async suivreNomDispositif({idCompte:_,idDispositif:x,f:S}){return await this.suivreNomsDispositifs({idCompte:_,f:async E=>{const C=E[x];if(C)return await S(C)}})}async gnrerInvitationRejoindreCompte(){const _=await this.obtIdCompte(),x=this.encryption.clefAlatoire();return this.motsDePasseRejoindreCompte[x]=Date.now(),{idCompte:_,codeSecret:x}}async rvoquerInvitationRejoindreCompte({codeSecret:_}){_?delete this.motsDePasseRejoindreCompte[_]:this.motsDePasseRejoindreCompte={}}async considrerRequteRejoindreCompte({requte:_}){const{idDispositif:x,empreinteVrification:S}=_,E=Date.now();for(const C of Object.keys(this.motsDePasseRejoindreCompte)){const T=this.motsDePasseRejoindreCompte[C];E-T<DLAI_EXPIRATION_INVITATIONS&&this.empreinteInvitation({idDispositif:x,codeSecret:C})===S&&(delete this.motsDePasseRejoindreCompte[C],await this.ajouterDispositif({idDispositif:x}))}}empreinteInvitation({idDispositif:_,codeSecret:x}){return Base64.stringify(sha256(_+x))}async demanderEtPuisRejoindreCompte({idCompte:_,codeSecret:x}){await this.rseau.envoyerDemandeRejoindreCompte({idCompte:_,codeSecret:x}),await this.rejoindreCompte({idCompte:_})}async ajouterDispositif({idDispositif:_}){this.bdCompte||await once_1(this,"prt"),this.bdCompte.access.grant(MODRATEUR,_)}async enleverDispositif({idDispositif:_}){this.bdCompte||await once_1(this,"prt"),await this.bdCompte.access.revoke(MODRATEUR,_)}async rejoindreCompte({idCompte:_}){if(!isValidAddress(_))throw new Error(`Adresse compte "${_}" non valide`);let x;const{bd:S,fOublier:E}=await this.orbite.ouvrirBdType({id:_,type:"keyvalue",schma:schmaStructureBdCompte}),T=await S.access.suivreIdsOrbiteAutorisescriture(B=>x=B.includes(this.orbite.identity.id));await new Promise(B=>{const A=async()=>{x&&(clearInterval(I),await T(),await E(),B())},I=setInterval(()=>{A()},10);A()}),this.idCompte=_,await this.sauvegarderAuStockageLocal({clef:"idCompte",val:_,parCompte:!1}),await this.initialiserCompte({idCompte:_}),this.emit("compteChang")}async donnerAccs({idBd:_,identit:x,rle:S=MEMBRE}){if(!isValidAddress(x))throw new Error(`Identit "${x}" non valide.`);const{bd:E,fOublier:C}=await this.orbite.ouvrirBd({id:_}),T=E.access;T.type===nomType&&T.grant(S,x),await C()}async suivreIdCompte({f:_}){const x=async()=>{this.idCompte&&await _(this.idCompte)};return this.on("compteChang",x),await x(),async()=>{this.off("compteChang",x)}}async obtIdSFIP(){return this.idNodeSFIP||await once_1(this,"prt"),this.idNodeSFIP}async obtIdDispositif(){return this.orbite||await once_1(this,"prt"),this.orbite.identity.id}async obtIdentitOrbite(){return this.orbite||await once_1(this,"prt"),this.orbite.identity}async obtIdCompte(){return this.idCompte||await once_1(this,"prt"),this.idCompte}async copierContenuBdDic({bdBase:_,nouvelleBd:x,clef:S,schma:E}){const C=await _.get(S);if(typeof C!="string")return;const{bd:T,fOublier:B}=await this.orbite.ouvrirBdType({id:C,type:"keyvalue",schma:E}),A=await x.get(S);if(!A)throw new Error("La nouvelle BD n'existait pas.");if(typeof A!="string")throw new Error(`${A} n'est pas une adresse Orbite.`);const{bd:I,fOublier:N}=await this.orbite.ouvrirBdType({id:A,type:"keyvalue",schma:E}),V=await T.all();await Promise.all(V.map(async D=>{await I.put(D.key,D.value)})),B(),N()}async combinerBds({idBdBase:_,idBd2:x}){const{bd:S,fOublier:E}=await this.orbite.ouvrirBd({id:_}),C=S.type;switch(await E(),C){case"keyvalue":{const{bd:T,fOublier:B}=await this.orbite.ouvrirBd({id:_,type:"keyvalue"}),{bd:A,fOublier:I}=await this.orbite.ouvrirBd({id:x,type:"keyvalue"});await this.combinerBdsDict({bdBase:T,bd2:A}),await B(),await I();break}case"set":{const{bd:T,fOublier:B}=await this.orbite.ouvrirBd({id:_,type:"set"}),{bd:A,fOublier:I}=await this.orbite.ouvrirBd({id:x,type:"set"});await this.combinerBdsEnsemble({bdBase:T,bd2:A}),await B(),await I();break}default:throw new Error(`Type de BD ${C} non support.`)}}async combinerBdsDict({bdBase:_,bd2:x}){const S=Object.fromEntries((await x.all()).map(E=>[E.key,E.value]));for(const[E,C]of Object.entries(S)){const T=await _.get(E);T!==C&&(T===void 0?await _.put(E,C):isValidAddress(T)&&isValidAddress(C)&&await this.combinerBds({idBdBase:T,idBd2:C}))}}async combinerBdsEnsemble({bdBase:_,bd2:x,index:S}){const E=await _.all(),C=await x.all();for(const T of C){const B=T.value;if(S){if(typeof B!="object")throw new Error(`Erreur combinaison ensembles : ${typeof B}`);const A=E.find(I=>typeof I.value=="object"&&S.every(N=>I.value[N]===B[N]));if(!A)await _.add(B);else{const I=A.value;if(!deepEqual$1(I,B)){const N=Object.assign({},I);for(const[V,D]of Object.entries(B))N[V]===void 0?N[V]=D:deepEqual$1(N[V],D)||isValidAddress(N[V])&&isValidAddress(D)&&await this.combinerBds({idBdBase:N[V],idBd2:D});await _.del(A.value),await _.add(N)}}}else E.some(A=>deepEqual$1(A.value,B))||await _.add(B)}}async suivreBd({id:_,f:x,type:S,schma:E}){if(!isValidAddress(_))throw new Error(`Adresse "${_}" non valide.`);const C=[],T={};let B=!1;const A=()=>{(E?S==="set"?this.orbite.ouvrirBdType({id:_,type:S,schma:E}):S==="keyvalue"?this.orbite.ouvrirBdType({id:_,type:S,schma:E}):S==="ordered-keyvalue"?this.orbite.ouvrirBdType({id:_,type:S,schma:E}):this.orbite.ouvrirBd({id:_,type:S}):this.orbite.ouvrirBd({id:_})).then(({bd:V,fOublier:D})=>{C.push(D);const O=()=>{const F=v4$1(),M=x(V);(j=>!!j&&!!j.then)(M)&&(T[F]=M,M.then(()=>{delete T[F]}))};V.events.on("update",O),C.push(async()=>{V.events.off("update",O)}),O()}).catch(V=>{if(!B)if(String(V).includes("ipfs unable to find"))A();else throw console.error(V),new Error(V)})};return A(),async()=>{B=!0,await Promise.all(C.map(N=>N())),await Promise.all(Object.values(T))}}async suivreBdDeClef({id:_,clef:x,f:S,fSuivre:E}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:T})=>{const B=async A=>{const I=await A.get(x);return await T(I)};return await this.suivreBd({id:_,f:B,type:"keyvalue"})},f:S,fSuivre:E})}async suivreBdDic({id:_,schma:x,f:S}){const E=async C=>{const T=C?Object.fromEntries((await C.all()).map(B=>[B.key,B.value])):{};await S(T)};return await this.suivreBd({id:_,type:"keyvalue",schma:x,f:E})}async suivreBdDicOrdonne({id:_,schma:x,f:S}){const E=async C=>{const T=await C.all();await S(T)};return await this.suivreBd({id:_,type:"ordered-keyvalue",schma:x,f:E})}async suivreBdDicDeClef({id:_,clef:x,schma:S,f:E}){const C=async B=>{await E(B||{})},T=async({id:B,fSuivreBd:A})=>await this.suivreBdDic({id:B,schma:S,f:A});return await this.suivreBdDeClef({id:_,clef:x,f:C,fSuivre:T})}async suivreBdDicOrdonneDeClef({id:_,clef:x,schma:S,f:E}){const C=async B=>{await E(B||[])},T=async({id:B,fSuivreBd:A})=>await this.suivreBdDicOrdonne({id:B,schma:S,f:A});return await this.suivreBdDeClef({id:_,clef:x,f:C,fSuivre:T})}async suivreBdListeDeClef({id:_,clef:x,f:S,schma:E,renvoyerValeur:C=!0}){if(C){const T=async A=>{await S(A||[])},B=async({id:A,fSuivreBd:I})=>await this.suivreBdListe({id:A,f:I,schma:E,renvoyerValeur:C});return await this.suivreBdDeClef({id:_,clef:x,f:T,fSuivre:B})}else{const T=async A=>{await S(A||[])},B=async({id:A,fSuivreBd:I})=>await this.suivreBdListe({id:A,f:I,schma:E,renvoyerValeur:!1});return await this.suivreBdDeClef({id:_,clef:x,f:T,fSuivre:B})}}async suivreBdListe({id:_,f:x,schma:S,renvoyerValeur:E=!0}){return await this.suivreBd({id:_,type:"set",schma:S,f:async C=>{const T=E?(await C.all()).map(B=>B.value):await C.all();await x(T)}})}async suivreTypeObjet({idObjet:_,f:x}){const S=async T=>{let B;const{type:A}=T;A?B=["motClef","variable","bd","projet","nue"].includes(A)?A:void 0:T.bds?B="projet":T.tableaux?B="bd":T.catgorie?B="variable":T.nom&&(B="motClef"),await x(B)},E={type:"object",properties:{type:{type:"string",nullable:!0}},additionalProperties:!0};return await this.suivreBdDic({id:_,schma:E,f:S})}async suivreEmpreinteTtesBdRcursive({idBd:_,f:x}){const S=async A=>{const I=await A.log.heads();return I[I.length-1]?.hash||""},E=A=>Base64.stringify(md5(A)),C=async A=>{await x(E(A.sort().join()))},T=async A=>await this.suivreBdsRcursives({idBd:_,f:async I=>await A(I)}),B=async(A,I)=>await this.suivreBd({id:A,f:async N=>{const V=await S(N);await I(V)}});return await this.suivreBdsDeFonctionListe({fListe:T,f:C,fBranche:B})}async suivreBdsDeBdListe({id:_,f:x,fBranche:S,fIdBdDeBranche:E=B=>B,fRduction:C=B=>[...new Set(B.flat())],fCode:T=B=>B}){const B=async A=>await this.suivreBdListe({id:_,f:A});return await this.suivreBdsDeFonctionListe({fListe:B,f:x,fBranche:S,fIdBdDeBranche:E,fRduction:C,fCode:T})}async suivreBdsDeBdDic({id:_,f:x,fBranche:S,fIdBdDeBranche:E=B=>B,fRduction:C=B=>[...new Set(B.flat())],fCode:T=B=>B}){const B=async A=>await this.suivreBd({id:_,f:async I=>await A((await I.all()).map(N=>N.value))});return await this.suivreBdsDeFonctionListe({fListe:B,f:x,fBranche:S,fIdBdDeBranche:E,fRduction:C,fCode:T})}async suivreBdsDeFonctionListe({fListe:_,f:x,fBranche:S,fIdBdDeBranche:E=B=>B,fRduction:C=B=>[...new Set(B.flat())],fCode:T=B=>B}){const B={},A={};let I=!1;const N=async()=>{if(!I||Object.values(B).length&&Object.values(B).every(q=>!q.djvalue))return;const L=Object.values(B).map(q=>q.donnes).filter(q=>q!==void 0),j=C(L);await x(j)},V=new s,O=await _(async L=>{if(await V.acquire("racine"),L.some(Z=>typeof T(Z)!="string"))throw console.error("Dfinir fCode si les lments ne sont pas en format texte (chanes)."),new Error("Dfinir fCode si les lments ne sont pas en format texte (chanes).");const j=Object.fromEntries(L.map(Z=>[T(Z),Z])),q=Object.keys(B);let H=Object.keys(j).filter(Z=>!q.includes(Z));const X=q.filter(Z=>!Object.keys(j).includes(Z)),J=Object.entries(j).filter(Z=>!deepEqual$1(A[Z[0]],Z[1])).map(Z=>Z[0]);H.push(...J),H=[...new Set(H)],await Promise.all(J.map(async Z=>{if(B[Z]){const ae=B[Z].fOublier;ae&&await ae(),delete B[Z]}})),await Promise.all(X.map(async Z=>{const ae=B[Z].fOublier;ae&&await ae(),delete B[Z]})),await Promise.all(H.map(async Z=>{B[Z]={djvalue:!1};const ae=j[Z];A[Z]=ae;const ce=E(ae),pe=await S(ce,async G=>{B[Z].donnes=G,B[Z].djvalue=!0,await N()},ae);B[Z].fOublier=pe})),I=!0,await N(),V.release("racine")});let F;const M=async()=>{await F(),await Promise.all(Object.values(B).map(L=>L.fOublier&&L.fOublier()))};return typeof O=="function"?(F=O,M):(F=O.fOublier,Object.assign({},O,{fOublier:M}))}async suivreBdsDeFonctionRecherche({fListe:_,f:x,fBranche:S,fIdBdDeBranche:E=B=>B,fRduction:C=B=>[...new Set(B.flat())],fCode:T=B=>B}){let B;const A=async V=>{B&&await B(V)},I=async V=>{const{fOublier:D,fChangerProfondeur:O}=await _(V);return B=O,D};return{fOublier:await this.suivreBdsDeFonctionListe({fListe:I,f:x,fBranche:S,fIdBdDeBranche:E,fRduction:C,fCode:T}),fChangerProfondeur:A}}async suivreBdSelonCondition({fRacine:_,fCondition:x,f:S}){const E=async({id:C,fSuivreBd:T})=>await x(C,async B=>{T(B?C:void 0)});return await suivreBdDeFonction({fRacine:async({fSuivreRacine:C})=>await _(C),f:ignorerNonDfinis(S),fSuivre:E})}async suivreBdsSelonCondition({fListe:_,fCondition:x,f:S}){const E=async T=>{const B=T.filter(A=>A.tat).map(A=>A.id);return await S(B)},C=async(T,B)=>await x(T,async I=>await B({id:T,tat:I}));return await this.suivreBdsDeFonctionListe({fListe:_,f:E,fBranche:C})}async obtFichierSFIP({id:_,max:x}){return await toBuffer$1(this.obtItrableAsyncSFIP({id:_}),x)}obtItrableAsyncSFIP({id:_}){return this.sfip.cat(_)}async ajouterSFIP({fichier:_}){const x=_.path;return _.path="/base/"+x,(await this.sfip.add(_)).cid.toString()+"/"+x}dossierOrbite(){let _;const x=this._opts.orbite;return estOrbiteDB(x)?_=x.directory:_=x?.dossier||this.orbite?.orbite.directory,_}dossierSFIP(){let _;const x=this._opts.orbite;return estOrbiteDB(x)||(_=x?.sfip?.dossier),_}obtClefStockageClient({clef:_,parCompte:x=!0}){return x?`${this.idCompte.slice(this.idCompte.length-23,this.idCompte.length-8)} : ${_}`:_}async obtDeStockageLocal({clef:_,parCompte:x=!0}){const S=this.obtClefStockageClient({clef:_,parCompte:x});return(await obtStockageLocal(this.dossierOrbite())).getItem(S)}async sauvegarderAuStockageLocal({clef:_,val:x,parCompte:S=!0}){const E=this.obtClefStockageClient({clef:_,parCompte:S});return(await obtStockageLocal(this.dossierOrbite())).setItem(E,x)}async effacerDeStockageLocal({clef:_,parCompte:x=!0}){const S=this.obtClefStockageClient({clef:_,parCompte:x});return(await obtStockageLocal(this.dossierOrbite())).removeItem(S)}async obtIdBd({nom:_,racine:x,type:S}){const E={type:"object",properties:{[_]:{type:"string"}},additionalProperties:!0,required:[]},{bd:C,fOublier:T}=typeof x=="string"?await this.orbite.ouvrirBdType({id:x,type:"keyvalue",schma:E}):{bd:x,fOublier:faisRien},B=C.address+":"+_;await this.verrouObtIdBd.acquire(B);let A=await C.get(_);const I=await this.obtDeStockageLocal({clef:B});if(typeof A=="string"&&I&&A!==I)try{await this.combinerBds({idBdBase:A,idBd2:I}),await this.effacerBd({id:I}),await this.sauvegarderAuStockageLocal({clef:B,val:A})}catch{}if(typeof A=="string"&&S)try{const{fOublier:N}=await this.orbite.ouvrirBd({id:A,type:S});return await N(),this.verrouObtIdBd.release(B),A}catch{throw this.verrouObtIdBd.release(B),new Error("Bd n'existe pas: "+_+" "+A)}if(!A&&S&&await C.access.estAutoris(this.orbite.identity.id)){const D=await this.obtOpsAccs({idBd:C.address});if(A=await this.crerBdIndpendante({type:S,optionsAccs:D}),!A)throw new Error("Bd non gnre");await C.set(_,A)}return typeof A=="string"&&await this.sauvegarderAuStockageLocal({clef:B,val:A}),T&&await T(),this.verrouObtIdBd.release(B),typeof A=="string"?A:void 0}async crerBdIndpendante({type:_,optionsAccs:x,nom:S}){return x=x||await this.obtOptionsAccs(),await this.orbite.crerBdIndpendante({type:_,nom:S,options:{AccessController:ContrleurConstellation(x)}})}async effacerBd({id:_}){return await this.orbite?.effacerBd({id:_})}async obtOpsAccs({idBd:_}){const{bd:x,fOublier:S}=await this.orbite.ouvrirBd({id:_}),E=x.access;return await S(),{address:E.bd.address,write:E.write}}async suivrePermission({idObjet:_,f:x}){const{bd:S,fOublier:E}=await this.orbite.ouvrirBd({id:_}),C=S.access,T=C.type;if(T==="ipfs"){const B=this.orbite.identity.id;return await x(C.write.includes(B)?MEMBRE:void 0),await E(),faisRien}else if(T===nomType){const B=async I=>{const N=I.filter(D=>D.idCompte===this.idCompte).map(D=>D.rle),V=N.includes(MODRATEUR)?MODRATEUR:N.includes(MEMBRE)?MEMBRE:void 0;await x(V)},A=await C.suivreUtilisateursAutoriss(B);return async()=>{await A(),await E()}}else throw new Error(`Type d'accs ${T} non reconnu.`)}async suivrePermissioncrire({id:_,f:x}){const S=async E=>{await x(E!==void 0)};return await this.suivrePermission({idObjet:_,f:S})}async suivreAccsBd({id:_,f:x}){const S=async E=>{const C=E.access,T=C.type;if(T==="ipfs"){const B=C.write.map(A=>({idCompte:A,rle:MODRATEUR}));await x(B)}else if(T===nomType)return await C.suivreUtilisateursAutoriss(x);return faisRien};return await this.suivreBd({id:_,f:S})}async suivreBdsRcursives({idBd:_,f:x}){const S={},E=async()=>{await x(Object.keys(S))},C=new s,T=async N=>{delete S[N],await Promise.all(Object.keys(S).map(async V=>{S[V]&&(S[V].requtes.delete(N),S[V].requtes.size||await S[V].fOublier())}))},B=["copiDe"],A=async(N,V)=>{const D=q=>q.map(H=>typeof H=="string"?[H]:Array.isArray(H)?H:typeof H=="object"?Object.values(H):[]).flat().filter(H=>isValidAddress(H)),O=async q=>{let H=[];typeof q=="object"?(H=D(Object.entries(q).filter(Z=>!B.includes(Z[0])).map(Z=>Z[1])),H.push(...D(Object.keys(q)))):Array.isArray(q)?H=D(q):typeof q=="string"&&(H=[q]);const X=H.filter(Z=>!S[N].sousBds.includes(Z)),J=S[N].sousBds.filter(Z=>!H.includes(Z));S[N].sousBds=H,await Promise.all(J.map(async Z=>{S[Z]?.requtes.delete(N),S[Z]?.requtes.size||await S[Z]?.fOublier()})),await Promise.all(X.map(async Z=>await A(Z,N))),E()};if(await C.acquire(N),S[N]){S[N].requtes.add(V);return}const{bd:F,fOublier:M}=await this.orbite.ouvrirBd({id:N}),{type:L}=F;await M(),S[N]={requtes:new Set([V]),sousBds:[],fOublier:async()=>{await j(),await T(N)}};let j;L==="keyvalue"?j=await this.suivreBdDic({id:N,f:O}):L==="ordered-keyvalue"?j=await this.suivreBdDicOrdonne({id:N,f:O}):L==="set"?j=await this.suivreBdListe({id:N,f:O}):j=faisRien,C.release(N),E()};return await A(_,""),async()=>{await Promise.all(Object.values(S).map(N=>N.fOublier()))}}async fermerCompte(){this.rseau&&await this.rseau.fermer(),this.favoris&&await this.favoris.fermer(),this.automatisations&&await this.automatisations.fermer()}async fermer(){await(await obtStockageLocal(this.dossierOrbite())).fermer?.(),await this.fermerCompte(),this.pingles&&await this.pingles.fermer(),await this.orbite.fermer({arrterOrbite:!this._orbiteExterne}),this.sfip&&!this._sfipExterne&&await this.sfip.stop()}async effacerDispositif(){if(await this.fermer(),indexedDB)if(indexedDB.databases){const _=await indexedDB.databases();await Promise.all(_.map(x=>{x.name&&indexedDB.deleteDatabase(x.name)}))}else console.warn("On a pas pu tout effacer.");else{const _=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal),void 0),x=this.dossierOrbite(),S=this.dossierSFIP();x&&_.rmdirSync(x),S&&_.rmdirSync(S),(await obtStockageLocal()).clear()}}async exporterDispositif({nomFichier:_}){if(isNode||isElectronMain){const x=await __vitePreload(()=>Promise.resolve().then(()=>__viteBrowserExternal),void 0),S=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0),E=({dossier:I,zip:N})=>{x.readdirSync(I).map(D=>{if(x.statSync(D)?.isDirectory())E({dossier:S.join(I,D),zip:N.folder(D)});else{const F=x.createReadStream(S.join(I,D));N.file(D,F)}})},C=this.dossierOrbite(),T=this.dossierSFIP();if(!C||!T)throw new Error("Constellation pas encore initialise.");const B=await exporterStockageLocal(),A=new JSZip;E({dossier:C,zip:A.folder("orbite")}),E({dossier:T,zip:A.folder("sfip")}),A.file("stockageLocal",B),await sauvegarderFichierZip({fichierZip:A,nomFichier:_})}else if(indexedDB){const x=({bd:E,zip:C})=>{const{name:T}=E;if(T){const B=C.folder(T);if(!B)throw new Error(T);const I=indexedDB.open(T).result.objectStoreNames;[...Array(I.length).keys()].map(V=>I.item(V)).filter(V=>!!V).map(V=>B.file(V,new indexedDbStream.IndexedDbReadStream({databaseName:T,objectStoreName:V})))}},S=new JSZip;if(indexedDB.databases){const E=await indexedDB.databases(),C=S.folder("bdIndexe");if(!C)throw new Error("Erreur Bd Indexe...");E.forEach(T=>{x({bd:T,zip:C})}),S.file("stockageLocal",JSON.stringify(await exporterStockageLocal()))}await sauvegarderFichierZip({fichierZip:S,nomFichier:_})}else throw new Error("Sauvegarde non implment.")}static async crer(_={}){const x=new ClientConstellation(_);return await x.initialiser(),x}}__decorate([cacheSuivi],ClientConstellation.prototype,"suivreDispositifs",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreIdCompte",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreEmpreinteTtesBdRcursive",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivrePermission",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivrePermissioncrire",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreAccsBd",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreBdsRcursives",null);class GestionnaireClient{constructor(n,_,x={}){_t(this,"ipa");_t(this,"_messagesEnAttente");_t(this,"prt");_t(this,"dicFRetourSuivi");_t(this,"opts");_t(this,"fMessage");_t(this,"fErreur");_t(this,"_verrou");this.fMessage=n,this.fErreur=_,this.opts=x instanceof ClientConstellation?{}:x,x instanceof ClientConstellation&&(this.ipa=x),this.dicFRetourSuivi={},this.prt=!1,this._messagesEnAttente=[],this._verrou=new s,this.init()}async init(){if(await this._verrou.acquire("init"),this.ipa){this._verrou.release("init");return}this.ipa=await ClientConstellation.crer(this.opts),this._messagesEnAttente.forEach(n=>this._grerMessage(n)),this.prt=!0,this._verrou.release("init")}async grerMessage(n){this.prt?await this._grerMessage(n):this._messagesEnAttente.unshift(n)}async _grerMessage(n){const{type:_}=n;switch(_){case"suivre":{const{id:x}=n;this.ipa||this.fErreur("IPA non initialis",x);const{fonction:S,args:E,nomArgFonction:C}=n,T=this.extraireFonctionIPA(S,x);if(!T)return;const B=A=>{const I={type:"suivre",id:x,donnes:A};this.fMessage(I)};E[C]=B;try{const A=await T(E),I=typeof A=="function"?{fOublier:A}:A;this.dicFRetourSuivi[x]=I;const N={type:"suivrePrt",id:x};typeof A!="function"&&(N.fonctions=Object.keys(A)),this.fMessage(N)}catch(A){this.fErreur(A.toString()+A.stack.toString(),x)}break}case"action":{const{id:x}=n;this.ipa||this.fErreur("IPA non initialis",x);const{fonction:S,args:E}=n,C=this.extraireFonctionIPA(S,x);if(!C)return;try{const T=await C(E),B={type:"action",id:x,rsultat:T};this.fMessage(B)}catch(T){this.fErreur(T.toString()+T.stack.toString(),x)}break}case"retour":{const{id:x,fonction:S,args:E}=n,C=this.dicFRetourSuivi[x];C&&await C[S](E),S==="fOublier"&&delete this.dicFRetourSuivi[x];break}default:{this.fErreur(`Type de requte ${_} non reconnu dans message ${n}`,n.id);break}}}extraireFonctionIPA(n,_){const x=`Fonction ClientConstellation.${n.join(".")} n'existe pas ou n'est pas une fonction.`;let S=this.ipa;for(const[E,C]of n.entries()){if(E===n.length-1)if(typeof S=="object"&&C in S&&S[C])S=S[C].bind(S);else{this.fErreur(x,_);return}else if(typeof S=="object"&&C in S&&S[C])S=S[C];else{this.fErreur(x,_);return}if(!S){this.fErreur(x,_);return}}if(typeof S!="function"){this.fErreur(x,_);return}return S}async fermer(){await this.init(),await this.ipa.fermer()}}class MandataireClientProc extends ClientMandatairifiable{constructor(_={}){super();_t(this,"client");this.client=new GestionnaireClient(x=>{this.vnements.emit("message",x)},(x,S)=>{const E={type:"erreur",id:S,erreur:x};this.vnements.emit("message",E)},_)}envoyerMessage(_){this.client.grerMessage(_)}}const gnrerMandataireProc=(r={})=>gnrerMandataire(new MandataireClientProc(r)),constellationNavigateur={install:r=>{const n=gnrerMandataireProc();r.config.globalProperties.$constl=n,r.provide("constl",n)}};async function loadFonts(){(await __vitePreload(()=>import("./webfontloader-56ce0080.js").then(n=>n.w),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const materialdesignicons="",main="",vuetify=createVuetify({theme:{themes:{light:{colors:{primary:"#1867c0",secondary:"#7bc6ff"}}}}}),i18n=createI18n({locale:"fr",legacy:!1,allowComposition:!0,missingWarn:!1,fallbackWarn:!1});/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(r){return r.__esModule||r[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(r,n){const _={};for(const x in n){const S=n[x];_[x]=isArray$1(S)?S.map(r):r(S)}return _}const noop$1=()=>{},isArray$1=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=r=>r.replace(TRAILING_SLASH_RE,"");function parseURL(r,n,_="/"){let x,S={},E="",C="";const T=n.indexOf("#");let B=n.indexOf("?");return T<B&&T>=0&&(B=-1),B>-1&&(x=n.slice(0,B),E=n.slice(B+1,T>-1?T:n.length),S=r(E)),T>-1&&(x=x||n.slice(0,T),C=n.slice(T,n.length)),x=resolveRelativePath(x??n,_),{fullPath:x+(E&&"?")+E+C,path:x,query:S,hash:C}}function stringifyURL(r,n){const _=n.query?r(n.query):"";return n.path+(_&&"?")+_+(n.hash||"")}function stripBase(r,n){return!n||!r.toLowerCase().startsWith(n.toLowerCase())?r:r.slice(n.length)||"/"}function isSameRouteLocation(r,n,_){const x=n.matched.length-1,S=_.matched.length-1;return x>-1&&x===S&&isSameRouteRecord(n.matched[x],_.matched[S])&&isSameRouteLocationParams(n.params,_.params)&&r(n.query)===r(_.query)&&n.hash===_.hash}function isSameRouteRecord(r,n){return(r.aliasOf||r)===(n.aliasOf||n)}function isSameRouteLocationParams(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const _ in r)if(!isSameRouteLocationParamsValue(r[_],n[_]))return!1;return!0}function isSameRouteLocationParamsValue(r,n){return isArray$1(r)?isEquivalentArray(r,n):isArray$1(n)?isEquivalentArray(n,r):r===n}function isEquivalentArray(r,n){return isArray$1(n)?r.length===n.length&&r.every((_,x)=>_===n[x]):r.length===1&&r[0]===n}function resolveRelativePath(r,n){if(r.startsWith("/"))return r;if(!r)return n;const _=n.split("/"),x=r.split("/"),S=x[x.length-1];(S===".."||S===".")&&x.push("");let E=_.length-1,C,T;for(C=0;C<x.length;C++)if(T=x[C],T!==".")if(T==="..")E>1&&E--;else break;return _.slice(0,E).join("/")+"/"+x.slice(C-(C===x.length?1:0)).join("/")}var NavigationType;(function(r){r.pop="pop",r.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(r){r.back="back",r.forward="forward",r.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(r){if(!r)if(isBrowser){const n=document.querySelector("base");r=n&&n.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),removeTrailingSlash(r)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(r,n){return r.replace(BEFORE_HASH_RE,"#")+n}function getElementPosition(r,n){const _=document.documentElement.getBoundingClientRect(),x=r.getBoundingClientRect();return{behavior:n.behavior,left:x.left-_.left-(n.left||0),top:x.top-_.top-(n.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(r){let n;if("el"in r){const _=r.el,x=typeof _=="string"&&_.startsWith("#"),S=typeof _=="string"?x?document.getElementById(_.slice(1)):document.querySelector(_):_;if(!S)return;n=getElementPosition(S,r)}else n=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.pageXOffset,n.top!=null?n.top:window.pageYOffset)}function getScrollKey(r,n){return(history.state?history.state.position-n:-1)+r}const scrollPositions=new Map;function saveScrollPosition(r,n){scrollPositions.set(r,n)}function getSavedScrollPosition(r){const n=scrollPositions.get(r);return scrollPositions.delete(r),n}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(r,n){const{pathname:_,search:x,hash:S}=n,E=r.indexOf("#");if(E>-1){let T=S.includes(r.slice(E))?r.slice(E).length:1,B=S.slice(T);return B[0]!=="/"&&(B="/"+B),stripBase(B,"")}return stripBase(_,r)+x+S}function useHistoryListeners(r,n,_,x){let S=[],E=[],C=null;const T=({state:V})=>{const D=createCurrentLocation(r,location),O=_.value,F=n.value;let M=0;if(V){if(_.value=D,n.value=V,C&&C===O){C=null;return}M=F?V.position-F.position:0}else x(D);S.forEach(L=>{L(_.value,O,{delta:M,type:NavigationType.pop,direction:M?M>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function B(){C=_.value}function A(V){S.push(V);const D=()=>{const O=S.indexOf(V);O>-1&&S.splice(O,1)};return E.push(D),D}function I(){const{history:V}=window;V.state&&V.replaceState(assign({},V.state,{scroll:computeScrollPosition()}),"")}function N(){for(const V of E)V();E=[],window.removeEventListener("popstate",T),window.removeEventListener("beforeunload",I)}return window.addEventListener("popstate",T),window.addEventListener("beforeunload",I,{passive:!0}),{pauseListeners:B,listen:A,destroy:N}}function buildState(r,n,_,x=!1,S=!1){return{back:r,current:n,forward:_,replaced:x,position:window.history.length,scroll:S?computeScrollPosition():null}}function useHistoryStateNavigation(r){const{history:n,location:_}=window,x={value:createCurrentLocation(r,_)},S={value:n.state};S.value||E(x.value,{back:null,current:x.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function E(B,A,I){const N=r.indexOf("#"),V=N>-1?(_.host&&document.querySelector("base")?r:r.slice(N))+B:createBaseLocation()+r+B;try{n[I?"replaceState":"pushState"](A,"",V),S.value=A}catch(D){console.error(D),_[I?"replace":"assign"](V)}}function C(B,A){const I=assign({},n.state,buildState(S.value.back,B,S.value.forward,!0),A,{position:S.value.position});E(B,I,!0),x.value=B}function T(B,A){const I=assign({},S.value,n.state,{forward:B,scroll:computeScrollPosition()});E(I.current,I,!0);const N=assign({},buildState(x.value,B,null),{position:I.position+1},A);E(B,N,!1),x.value=B}return{location:x,state:S,push:T,replace:C}}function createWebHistory(r){r=normalizeBase(r);const n=useHistoryStateNavigation(r),_=useHistoryListeners(r,n.state,n.location,n.replace);function x(E,C=!0){C||_.pauseListeners(),history.go(E)}const S=assign({location:"",base:r,go:x,createHref:createHref.bind(null,r)},n,_);return Object.defineProperty(S,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(S,"state",{enumerable:!0,get:()=>n.state.value}),S}function createWebHashHistory(r){return r=location.host?r||location.pathname+location.search:"",r.includes("#")||(r+="#"),createWebHistory(r)}function isRouteLocation(r){return typeof r=="string"||r&&typeof r=="object"}function isRouteName(r){return typeof r=="string"||typeof r=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(r,n){return assign(new Error,{type:r,[NavigationFailureSymbol]:!0},n)}function isNavigationFailure(r,n){return r instanceof Error&&NavigationFailureSymbol in r&&(n==null||!!(r.type&n))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(r,n){const _=assign({},BASE_PATH_PARSER_OPTIONS,n),x=[];let S=_.start?"^":"";const E=[];for(const A of r){const I=A.length?[]:[90];_.strict&&!A.length&&(S+="/");for(let N=0;N<A.length;N++){const V=A[N];let D=40+(_.sensitive?.25:0);if(V.type===0)N||(S+="/"),S+=V.value.replace(REGEX_CHARS_RE,"\\$&"),D+=40;else if(V.type===1){const{value:O,repeatable:F,optional:M,regexp:L}=V;E.push({name:O,repeatable:F,optional:M});const j=L||BASE_PARAM_PATTERN;if(j!==BASE_PARAM_PATTERN){D+=10;try{new RegExp(`(${j})`)}catch(H){throw new Error(`Invalid custom RegExp for param "${O}" (${j}): `+H.message)}}let q=F?`((?:${j})(?:/(?:${j}))*)`:`(${j})`;N||(q=M&&A.length<2?`(?:/${q})`:"/"+q),M&&(q+="?"),S+=q,D+=20,M&&(D+=-8),F&&(D+=-20),j===".*"&&(D+=-50)}I.push(D)}x.push(I)}if(_.strict&&_.end){const A=x.length-1;x[A][x[A].length-1]+=.7000000000000001}_.strict||(S+="/?"),_.end?S+="$":_.strict&&(S+="(?:/|$)");const C=new RegExp(S,_.sensitive?"":"i");function T(A){const I=A.match(C),N={};if(!I)return null;for(let V=1;V<I.length;V++){const D=I[V]||"",O=E[V-1];N[O.name]=D&&O.repeatable?D.split("/"):D}return N}function B(A){let I="",N=!1;for(const V of r){(!N||!I.endsWith("/"))&&(I+="/"),N=!1;for(const D of V)if(D.type===0)I+=D.value;else if(D.type===1){const{value:O,repeatable:F,optional:M}=D,L=O in A?A[O]:"";if(isArray$1(L)&&!F)throw new Error(`Provided param "${O}" is an array but it is not repeatable (* or + modifiers)`);const j=isArray$1(L)?L.join("/"):L;if(!j)if(M)V.length<2&&(I.endsWith("/")?I=I.slice(0,-1):N=!0);else throw new Error(`Missing required param "${O}"`);I+=j}}return I||"/"}return{re:C,score:x,keys:E,parse:T,stringify:B}}function compareScoreArray(r,n){let _=0;for(;_<r.length&&_<n.length;){const x=n[_]-r[_];if(x)return x;_++}return r.length<n.length?r.length===1&&r[0]===40+40?-1:1:r.length>n.length?n.length===1&&n[0]===40+40?1:-1:0}function comparePathParserScore(r,n){let _=0;const x=r.score,S=n.score;for(;_<x.length&&_<S.length;){const E=compareScoreArray(x[_],S[_]);if(E)return E;_++}if(Math.abs(S.length-x.length)===1){if(isLastScoreNegative(x))return 1;if(isLastScoreNegative(S))return-1}return S.length-x.length}function isLastScoreNegative(r){const n=r[r.length-1];return r.length>0&&n[n.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(r){if(!r)return[[]];if(r==="/")return[[ROOT_TOKEN]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function n(D){throw new Error(`ERR (${_})/"${A}": ${D}`)}let _=0,x=_;const S=[];let E;function C(){E&&S.push(E),E=[]}let T=0,B,A="",I="";function N(){A&&(_===0?E.push({type:0,value:A}):_===1||_===2||_===3?(E.length>1&&(B==="*"||B==="+")&&n(`A repeatable param (${A}) must be alone in its segment. eg: '/:ids+.`),E.push({type:1,value:A,regexp:I,repeatable:B==="*"||B==="+",optional:B==="*"||B==="?"})):n("Invalid state to consume buffer"),A="")}function V(){A+=B}for(;T<r.length;){if(B=r[T++],B==="\\"&&_!==2){x=_,_=4;continue}switch(_){case 0:B==="/"?(A&&N(),C()):B===":"?(N(),_=1):V();break;case 4:V(),_=x;break;case 1:B==="("?_=2:VALID_PARAM_RE.test(B)?V():(N(),_=0,B!=="*"&&B!=="?"&&B!=="+"&&T--);break;case 2:B===")"?I[I.length-1]=="\\"?I=I.slice(0,-1)+B:_=3:I+=B;break;case 3:N(),_=0,B!=="*"&&B!=="?"&&B!=="+"&&T--,I="";break;default:n("Unknown state");break}}return _===2&&n(`Unfinished custom RegExp for param "${A}"`),N(),C(),S}function createRouteRecordMatcher(r,n,_){const x=tokensToParser(tokenizePath(r.path),_),S=assign(x,{record:r,parent:n,children:[],alias:[]});return n&&!S.record.aliasOf==!n.record.aliasOf&&n.children.push(S),S}function createRouterMatcher(r,n){const _=[],x=new Map;n=mergeOptions({strict:!1,end:!0,sensitive:!1},n);function S(I){return x.get(I)}function E(I,N,V){const D=!V,O=normalizeRouteRecord(I);O.aliasOf=V&&V.record;const F=mergeOptions(n,I),M=[O];if("alias"in I){const q=typeof I.alias=="string"?[I.alias]:I.alias;for(const H of q)M.push(assign({},O,{components:V?V.record.components:O.components,path:H,aliasOf:V?V.record:O}))}let L,j;for(const q of M){const{path:H}=q;if(N&&H[0]!=="/"){const X=N.record.path,J=X[X.length-1]==="/"?"":"/";q.path=N.record.path+(H&&J+H)}if(L=createRouteRecordMatcher(q,N,F),V?V.alias.push(L):(j=j||L,j!==L&&j.alias.push(L),D&&I.name&&!isAliasRecord(L)&&C(I.name)),O.children){const X=O.children;for(let J=0;J<X.length;J++)E(X[J],L,V&&V.children[J])}V=V||L,(L.record.components&&Object.keys(L.record.components).length||L.record.name||L.record.redirect)&&B(L)}return j?()=>{C(j)}:noop$1}function C(I){if(isRouteName(I)){const N=x.get(I);N&&(x.delete(I),_.splice(_.indexOf(N),1),N.children.forEach(C),N.alias.forEach(C))}else{const N=_.indexOf(I);N>-1&&(_.splice(N,1),I.record.name&&x.delete(I.record.name),I.children.forEach(C),I.alias.forEach(C))}}function T(){return _}function B(I){let N=0;for(;N<_.length&&comparePathParserScore(I,_[N])>=0&&(I.record.path!==_[N].record.path||!isRecordChildOf(I,_[N]));)N++;_.splice(N,0,I),I.record.name&&!isAliasRecord(I)&&x.set(I.record.name,I)}function A(I,N){let V,D={},O,F;if("name"in I&&I.name){if(V=x.get(I.name),!V)throw createRouterError(1,{location:I});F=V.record.name,D=assign(paramsFromLocation(N.params,V.keys.filter(j=>!j.optional).map(j=>j.name)),I.params&&paramsFromLocation(I.params,V.keys.map(j=>j.name))),O=V.stringify(D)}else if("path"in I)O=I.path,V=_.find(j=>j.re.test(O)),V&&(D=V.parse(O),F=V.record.name);else{if(V=N.name?x.get(N.name):_.find(j=>j.re.test(N.path)),!V)throw createRouterError(1,{location:I,currentLocation:N});F=V.record.name,D=assign({},N.params,I.params),O=V.stringify(D)}const M=[];let L=V;for(;L;)M.unshift(L.record),L=L.parent;return{name:F,path:O,params:D,matched:M,meta:mergeMetaFields(M)}}return r.forEach(I=>E(I)),{addRoute:E,resolve:A,removeRoute:C,getRoutes:T,getRecordMatcher:S}}function paramsFromLocation(r,n){const _={};for(const x of n)x in r&&(_[x]=r[x]);return _}function normalizeRouteRecord(r){return{path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:void 0,beforeEnter:r.beforeEnter,props:normalizeRecordProps(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}}}function normalizeRecordProps(r){const n={},_=r.props||!1;if("component"in r)n.default=_;else for(const x in r.components)n[x]=typeof _=="object"?_[x]:_;return n}function isAliasRecord(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function mergeMetaFields(r){return r.reduce((n,_)=>assign(n,_.meta),{})}function mergeOptions(r,n){const _={};for(const x in r)_[x]=x in n?n[x]:r[x];return _}function isRecordChildOf(r,n){return n.children.some(_=>_===r||isRecordChildOf(r,_))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(r){return encodeURI(""+r).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(r){return commonEncode(r).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(r){return commonEncode(r).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(r){return encodeQueryValue(r).replace(EQUAL_RE,"%3D")}function encodePath(r){return commonEncode(r).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(r){return r==null?"":encodePath(r).replace(SLASH_RE,"%2F")}function decode(r){try{return decodeURIComponent(""+r)}catch{}return""+r}function parseQuery(r){const n={};if(r===""||r==="?")return n;const x=(r[0]==="?"?r.slice(1):r).split("&");for(let S=0;S<x.length;++S){const E=x[S].replace(PLUS_RE," "),C=E.indexOf("="),T=decode(C<0?E:E.slice(0,C)),B=C<0?null:decode(E.slice(C+1));if(T in n){let A=n[T];isArray$1(A)||(A=n[T]=[A]),A.push(B)}else n[T]=B}return n}function stringifyQuery(r){let n="";for(let _ in r){const x=r[_];if(_=encodeQueryKey(_),x==null){x!==void 0&&(n+=(n.length?"&":"")+_);continue}(isArray$1(x)?x.map(E=>E&&encodeQueryValue(E)):[x&&encodeQueryValue(x)]).forEach(E=>{E!==void 0&&(n+=(n.length?"&":"")+_,E!=null&&(n+="="+E))})}return n}function normalizeQuery(r){const n={};for(const _ in r){const x=r[_];x!==void 0&&(n[_]=isArray$1(x)?x.map(S=>S==null?null:""+S):x==null?x:""+x)}return n}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let r=[];function n(x){return r.push(x),()=>{const S=r.indexOf(x);S>-1&&r.splice(S,1)}}function _(){r=[]}return{add:n,list:()=>r.slice(),reset:_}}function guardToPromiseFn(r,n,_,x,S){const E=x&&(x.enterCallbacks[S]=x.enterCallbacks[S]||[]);return()=>new Promise((C,T)=>{const B=N=>{N===!1?T(createRouterError(4,{from:_,to:n})):N instanceof Error?T(N):isRouteLocation(N)?T(createRouterError(2,{from:n,to:N})):(E&&x.enterCallbacks[S]===E&&typeof N=="function"&&E.push(N),C())},A=r.call(x&&x.instances[S],n,_,B);let I=Promise.resolve(A);r.length<3&&(I=I.then(B)),I.catch(N=>T(N))})}function extractComponentsGuards(r,n,_,x){const S=[];for(const E of r)for(const C in E.components){let T=E.components[C];if(!(n!=="beforeRouteEnter"&&!E.instances[C]))if(isRouteComponent(T)){const A=(T.__vccOpts||T)[n];A&&S.push(guardToPromiseFn(A,_,x,E,C))}else{let B=T();S.push(()=>B.then(A=>{if(!A)return Promise.reject(new Error(`Couldn't resolve component "${C}" at "${E.path}"`));const I=isESModule(A)?A.default:A;E.components[C]=I;const V=(I.__vccOpts||I)[n];return V&&guardToPromiseFn(V,_,x,E,C)()}))}}return S}function isRouteComponent(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function useLink(r){const n=inject$1(routerKey),_=inject$1(routeLocationKey),x=computed(()=>n.resolve(unref(r.to))),S=computed(()=>{const{matched:B}=x.value,{length:A}=B,I=B[A-1],N=_.matched;if(!I||!N.length)return-1;const V=N.findIndex(isSameRouteRecord.bind(null,I));if(V>-1)return V;const D=getOriginalPath(B[A-2]);return A>1&&getOriginalPath(I)===D&&N[N.length-1].path!==D?N.findIndex(isSameRouteRecord.bind(null,B[A-2])):V}),E=computed(()=>S.value>-1&&includesParams(_.params,x.value.params)),C=computed(()=>S.value>-1&&S.value===_.matched.length-1&&isSameRouteLocationParams(_.params,x.value.params));function T(B={}){return guardEvent(B)?n[unref(r.replace)?"replace":"push"](unref(r.to)).catch(noop$1):Promise.resolve()}return{route:x,href:computed(()=>x.value.href),isActive:E,isExactActive:C,navigate:T}}const RouterLinkImpl=defineComponent$1({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(r,{slots:n}){const _=reactive(useLink(r)),{options:x}=inject$1(routerKey),S=computed(()=>({[getLinkClass(r.activeClass,x.linkActiveClass,"router-link-active")]:_.isActive,[getLinkClass(r.exactActiveClass,x.linkExactActiveClass,"router-link-exact-active")]:_.isExactActive}));return()=>{const E=n.default&&n.default(_);return r.custom?E:h$1("a",{"aria-current":_.isExactActive?r.ariaCurrentValue:null,href:_.href,onClick:_.navigate,class:S.value},E)}}}),RouterLink=RouterLinkImpl;function guardEvent(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const n=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return r.preventDefault&&r.preventDefault(),!0}}function includesParams(r,n){for(const _ in n){const x=n[_],S=r[_];if(typeof x=="string"){if(x!==S)return!1}else if(!isArray$1(S)||S.length!==x.length||x.some((E,C)=>E!==S[C]))return!1}return!0}function getOriginalPath(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const getLinkClass=(r,n,_)=>r??n??_,RouterViewImpl=defineComponent$1({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:n,slots:_}){const x=inject$1(routerViewLocationKey),S=computed(()=>r.route||x.value),E=inject$1(viewDepthKey,0),C=computed(()=>{let A=unref(E);const{matched:I}=S.value;let N;for(;(N=I[A])&&!N.components;)A++;return A}),T=computed(()=>S.value.matched[C.value]);provide(viewDepthKey,computed(()=>C.value+1)),provide(matchedRouteKey,T),provide(routerViewLocationKey,S);const B=ref$1();return watch(()=>[B.value,T.value,r.name],([A,I,N],[V,D,O])=>{I&&(I.instances[N]=A,D&&D!==I&&A&&A===V&&(I.leaveGuards.size||(I.leaveGuards=D.leaveGuards),I.updateGuards.size||(I.updateGuards=D.updateGuards))),A&&I&&(!D||!isSameRouteRecord(I,D)||!V)&&(I.enterCallbacks[N]||[]).forEach(F=>F(A))},{flush:"post"}),()=>{const A=S.value,I=r.name,N=T.value,V=N&&N.components[I];if(!V)return normalizeSlot(_.default,{Component:V,route:A});const D=N.props[I],O=D?D===!0?A.params:typeof D=="function"?D(A):D:null,M=h$1(V,assign({},O,n,{onVnodeUnmounted:L=>{L.component.isUnmounted&&(N.instances[I]=null)},ref:B}));return normalizeSlot(_.default,{Component:M,route:A})||M}}});function normalizeSlot(r,n){if(!r)return null;const _=r(n);return _.length===1?_[0]:_}const RouterView=RouterViewImpl;function createRouter(r){const n=createRouterMatcher(r.routes,r),_=r.parseQuery||parseQuery,x=r.stringifyQuery||stringifyQuery,S=r.history,E=useCallbacks(),C=useCallbacks(),T=useCallbacks(),B=shallowRef(START_LOCATION_NORMALIZED);let A=START_LOCATION_NORMALIZED;isBrowser&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const I=applyToParams.bind(null,ye=>""+ye),N=applyToParams.bind(null,encodeParam),V=applyToParams.bind(null,decode);function D(ye,Ee){let Re,Ne;return isRouteName(ye)?(Re=n.getRecordMatcher(ye),Ne=Ee):Ne=ye,n.addRoute(Ne,Re)}function O(ye){const Ee=n.getRecordMatcher(ye);Ee&&n.removeRoute(Ee)}function F(){return n.getRoutes().map(ye=>ye.record)}function M(ye){return!!n.getRecordMatcher(ye)}function L(ye,Ee){if(Ee=assign({},Ee||B.value),typeof ye=="string"){const fe=parseURL(_,ye,Ee.path),Be=n.resolve({path:fe.path},Ee),Le=S.createHref(fe.fullPath);return assign(fe,Be,{params:V(Be.params),hash:decode(fe.hash),redirectedFrom:void 0,href:Le})}let Re;if("path"in ye)Re=assign({},ye,{path:parseURL(_,ye.path,Ee.path).path});else{const fe=assign({},ye.params);for(const Be in fe)fe[Be]==null&&delete fe[Be];Re=assign({},ye,{params:N(fe)}),Ee.params=N(Ee.params)}const Ne=n.resolve(Re,Ee),Te=ye.hash||"";Ne.params=I(V(Ne.params));const he=stringifyURL(x,assign({},ye,{hash:encodeHash(Te),path:Ne.path})),xe=S.createHref(he);return assign({fullPath:he,hash:Te,query:x===stringifyQuery?normalizeQuery(ye.query):ye.query||{}},Ne,{redirectedFrom:void 0,href:xe})}function j(ye){return typeof ye=="string"?parseURL(_,ye,B.value.path):assign({},ye)}function q(ye,Ee){if(A!==ye)return createRouterError(8,{from:Ee,to:ye})}function H(ye){return Z(ye)}function X(ye){return H(assign(j(ye),{replace:!0}))}function J(ye){const Ee=ye.matched[ye.matched.length-1];if(Ee&&Ee.redirect){const{redirect:Re}=Ee;let Ne=typeof Re=="function"?Re(ye):Re;return typeof Ne=="string"&&(Ne=Ne.includes("?")||Ne.includes("#")?Ne=j(Ne):{path:Ne},Ne.params={}),assign({query:ye.query,hash:ye.hash,params:"path"in Ne?{}:ye.params},Ne)}}function Z(ye,Ee){const Re=A=L(ye),Ne=B.value,Te=ye.state,he=ye.force,xe=ye.replace===!0,fe=J(Re);if(fe)return Z(assign(j(fe),{state:typeof fe=="object"?assign({},Te,fe.state):Te,force:he,replace:xe}),Ee||Re);const Be=Re;Be.redirectedFrom=Ee;let Le;return!he&&isSameRouteLocation(x,Ne,Re)&&(Le=createRouterError(16,{to:Be,from:Ne}),te(Ne,Ne,!0,!1)),(Le?Promise.resolve(Le):ve(Be,Ne)).catch(Ve=>isNavigationFailure(Ve)?isNavigationFailure(Ve,2)?Ve:ne(Ve):oe(Ve,Be,Ne)).then(Ve=>{if(Ve){if(isNavigationFailure(Ve,2))return Z(assign({replace:xe},j(Ve.to),{state:typeof Ve.to=="object"?assign({},Te,Ve.to.state):Te,force:he}),Ee||Be)}else Ve=G(Be,Ne,!0,xe,Te);return pe(Be,Ne,Ve),Ve})}function ae(ye,Ee){const Re=q(ye,Ee);return Re?Promise.reject(Re):Promise.resolve()}function ce(ye){const Ee=ue.values().next().value;return Ee&&typeof Ee.runWithContext=="function"?Ee.runWithContext(ye):ye()}function ve(ye,Ee){let Re;const[Ne,Te,he]=extractChangingRecords(ye,Ee);Re=extractComponentsGuards(Ne.reverse(),"beforeRouteLeave",ye,Ee);for(const fe of Ne)fe.leaveGuards.forEach(Be=>{Re.push(guardToPromiseFn(Be,ye,Ee))});const xe=ae.bind(null,ye,Ee);return Re.push(xe),ge(Re).then(()=>{Re=[];for(const fe of E.list())Re.push(guardToPromiseFn(fe,ye,Ee));return Re.push(xe),ge(Re)}).then(()=>{Re=extractComponentsGuards(Te,"beforeRouteUpdate",ye,Ee);for(const fe of Te)fe.updateGuards.forEach(Be=>{Re.push(guardToPromiseFn(Be,ye,Ee))});return Re.push(xe),ge(Re)}).then(()=>{Re=[];for(const fe of he)if(fe.beforeEnter)if(isArray$1(fe.beforeEnter))for(const Be of fe.beforeEnter)Re.push(guardToPromiseFn(Be,ye,Ee));else Re.push(guardToPromiseFn(fe.beforeEnter,ye,Ee));return Re.push(xe),ge(Re)}).then(()=>(ye.matched.forEach(fe=>fe.enterCallbacks={}),Re=extractComponentsGuards(he,"beforeRouteEnter",ye,Ee),Re.push(xe),ge(Re))).then(()=>{Re=[];for(const fe of C.list())Re.push(guardToPromiseFn(fe,ye,Ee));return Re.push(xe),ge(Re)}).catch(fe=>isNavigationFailure(fe,8)?fe:Promise.reject(fe))}function pe(ye,Ee,Re){T.list().forEach(Ne=>ce(()=>Ne(ye,Ee,Re)))}function G(ye,Ee,Re,Ne,Te){const he=q(ye,Ee);if(he)return he;const xe=Ee===START_LOCATION_NORMALIZED,fe=isBrowser?history.state:{};Re&&(Ne||xe?S.replace(ye.fullPath,assign({scroll:xe&&fe&&fe.scroll},Te)):S.push(ye.fullPath,Te)),B.value=ye,te(ye,Ee,Re,xe),ne()}let Y;function U(){Y||(Y=S.listen((ye,Ee,Re)=>{if(!be.listening)return;const Ne=L(ye),Te=J(Ne);if(Te){Z(assign(Te,{replace:!0}),Ne).catch(noop$1);return}A=Ne;const he=B.value;isBrowser&&saveScrollPosition(getScrollKey(he.fullPath,Re.delta),computeScrollPosition()),ve(Ne,he).catch(xe=>isNavigationFailure(xe,12)?xe:isNavigationFailure(xe,2)?(Z(xe.to,Ne).then(fe=>{isNavigationFailure(fe,20)&&!Re.delta&&Re.type===NavigationType.pop&&S.go(-1,!1)}).catch(noop$1),Promise.reject()):(Re.delta&&S.go(-Re.delta,!1),oe(xe,Ne,he))).then(xe=>{xe=xe||G(Ne,he,!1),xe&&(Re.delta&&!isNavigationFailure(xe,8)?S.go(-Re.delta,!1):Re.type===NavigationType.pop&&isNavigationFailure(xe,20)&&S.go(-1,!1)),pe(Ne,he,xe)}).catch(noop$1)}))}let W=useCallbacks(),ee=useCallbacks(),re;function oe(ye,Ee,Re){ne(ye);const Ne=ee.list();return Ne.length?Ne.forEach(Te=>Te(ye,Ee,Re)):console.error(ye),Promise.reject(ye)}function ie(){return re&&B.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((ye,Ee)=>{W.add([ye,Ee])})}function ne(ye){return re||(re=!ye,U(),W.list().forEach(([Ee,Re])=>ye?Re(ye):Ee()),W.reset()),ye}function te(ye,Ee,Re,Ne){const{scrollBehavior:Te}=r;if(!isBrowser||!Te)return Promise.resolve();const he=!Re&&getSavedScrollPosition(getScrollKey(ye.fullPath,0))||(Ne||!Re)&&history.state&&history.state.scroll||null;return nextTick$2().then(()=>Te(ye,Ee,he)).then(xe=>xe&&scrollToPosition(xe)).catch(xe=>oe(xe,ye,Ee))}const K=ye=>S.go(ye);let le;const ue=new Set,be={currentRoute:B,listening:!0,addRoute:D,removeRoute:O,hasRoute:M,getRoutes:F,resolve:L,options:r,push:H,replace:X,go:K,back:()=>K(-1),forward:()=>K(1),beforeEach:E.add,beforeResolve:C.add,afterEach:T.add,onError:ee.add,isReady:ie,install(ye){const Ee=this;ye.component("RouterLink",RouterLink),ye.component("RouterView",RouterView),ye.config.globalProperties.$router=Ee,Object.defineProperty(ye.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(B)}),isBrowser&&!le&&B.value===START_LOCATION_NORMALIZED&&(le=!0,H(S.location).catch(Te=>{}));const Re={};for(const Te in START_LOCATION_NORMALIZED)Object.defineProperty(Re,Te,{get:()=>B.value[Te],enumerable:!0});ye.provide(routerKey,Ee),ye.provide(routeLocationKey,shallowReactive(Re)),ye.provide(routerViewLocationKey,B);const Ne=ye.unmount;ue.add(ye),ye.unmount=function(){ue.delete(ye),ue.size<1&&(A=START_LOCATION_NORMALIZED,Y&&Y(),Y=null,B.value=START_LOCATION_NORMALIZED,le=!1,re=!1),Ne()}}};function ge(ye){return ye.reduce((Ee,Re)=>Ee.then(()=>ce(Re)),Promise.resolve())}return be}function extractChangingRecords(r,n){const _=[],x=[],S=[],E=Math.max(n.matched.length,r.matched.length);for(let C=0;C<E;C++){const T=n.matched[C];T&&(r.matched.find(A=>isSameRouteRecord(A,T))?x.push(T):_.push(T));const B=r.matched[C];B&&(n.matched.find(A=>isSameRouteRecord(A,B))||S.push(B))}return[_,x,S]}function useRouter(){return inject$1(routerKey)}const _hoisted_1$t={class:"text-h2"},_hoisted_2$l={key:2,class:"text-h4 mb-5"},_sfc_main$12=defineComponent$1({__name:"TitrePage",props:{titre:{type:String,required:!0},sousTitre:{type:String,default:""},image:{type:String,default:void 0},imageRonde:{type:Boolean,default:!0}},setup(r){const{mdAndUp:n}=useDisplay();return(_,x)=>(openBlock(),createBlock(VContainer,{class:normalizeClass({"mt-3":!0,"pb-0":!!r.image,"text-center":!0})},{default:withCtx(()=>[createBaseVNode("h1",_hoisted_1$t,toDisplayString$1(r.titre),1),r.image&&r.imageRonde?(openBlock(),createBlock(VAvatar,{key:0,size:unref(n)?275:175},{default:withCtx(()=>[createVNode(VImg,{src:r.image},null,8,["src"])]),_:1},8,["size"])):r.image?(openBlock(),createBlock(VImg,{key:1,src:r.image,contain:"",height:"175"},null,8,["src"])):createCommentVNode("",!0),r.sousTitre?(openBlock(),createElementBlock("h2",_hoisted_2$l,toDisplayString$1(r.sousTitre),1)):createCommentVNode("",!0)]),_:1},8,["class"]))}}),_sfc_main$11=defineComponent$1({__name:"ServeurWS",setup(r){const{useI18n:n}=_(),{t:_}=n(),x=inject$1("serveurConstl"),S=ref$1(!1),E=ref$1(!1),C=ref$1(),T=ref$1();return watchEffect(async()=>{E.value?T.value=await x?.initialiser(C.value):(T.value=void 0,await x?.fermer())}),(B,A)=>(openBlock(),createBlock(VCard,{class:"text-start ma-2",variant:"outlined","max-width":"250"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("accueil.nud.titre"))+"Nud WS local ",1),createVNode(VTooltip,{text:unref(_)("accueil.nud.indice: Ouvrir un nud local pour connecter d'autres applications."),location:"bottom"},{activator:withCtx(({props:I})=>[createVNode(VIcon,mergeProps({size:"xsmall"},I),{default:withCtx(()=>[createTextVNode(" mdi-help-circle-outline ")]),_:2},1040)]),_:1},8,["text"])]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VSwitch,{modelValue:E.value,"onUpdate:modelValue":A[0]||(A[0]=I=>E.value=I),class:"text-start",color:"primary",inset:"","hide-details":"","prepend-icon":E.value?"mdi-server":"mdi-server-off",loading:E.value&&!T.value},{label:withCtx(()=>[createTextVNode(toDisplayString$1(E.value?"Port : "+T.value:"Dconnect"),1)]),_:1},8,["modelValue","prepend-icon","loading"]),createVNode(VDialog,{modelValue:S.value,"onUpdate:modelValue":A[1]||(A[1]=I=>S.value=I)},{activator:withCtx(({props:I})=>[renderSlot(B.$slots,"activator",normalizeProps(guardReactiveProps({props:I})))]),_:3},8,["modelValue"])]),_:3})]),_:3}))}}),_sfc_main$10=defineComponent$1({__name:"PageAccueil",setup(r){const{useI18n:n}=_(),{t:_}=n();return(x,S)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(_)("communs.constellation")},null,8,["titre"]),unref(isElectron)?(openBlock(),createBlock(_sfc_main$11,{key:0})):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$$=defineComponent$1({__name:"ItemConnexionConstellation",props:{compte:{},dispositifs:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{formatterChiffre:E}=utiliserNumration(),{traduireNom:C}=utiliserLangues(),T=ref$1({}),B=C(T);enregistrercoute(_?.profil.suivreNoms({idCompte:n.compte,f:V=>T.value=V}));const A=E(computed(()=>n.dispositifs.length)),I=computed(()=>n.dispositifs.filter(V=>!V.vu).length),N=E(I);return(V,D)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(_sfc_main$24,{id:V.compte},null,8,["id"])]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(B)||unref(S)("communs.anonyme"))+" ",1),createVNode(_sfc_main$1p,{id:V.compte,"style-jeton":"icne"},null,8,["id"])]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("pages.compte.connexions.dispositifs",{nDispositifs:unref(A),nDispositifsEnLigne:unref(N)})),1)]),_:1})]),_:1}))}}),_sfc_main$_=defineComponent$1({__name:"ItemConnexionSFIP",props:{adresse:{},pair:{}},setup(r){return(n,_)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-web")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(n.adresse),1)]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(n.pair),1)]),_:1})]),_:1}))}}),_hoisted_1$s={key:0},_hoisted_2$k={key:1},_sfc_main$Z=defineComponent$1({__name:"OngletConnexions",setup(r){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),S=ref$1("Constellation"),E=computed(()=>{switch(S.value){case"SFIP":return x("pages.compte.connexions.titreSFIP");case"Constellation":return x("pages.compte.connexions.titreConstellation");default:return""}}),C=ref$1();enregistrercoute(n?.rseau?.suivreConnexionsPostesSFIP({f:A=>C.value=A}));const T=ref$1();enregistrercoute(n?.rseau?.suivreConnexionsDispositifs({f:A=>T.value=A}));const B=computed(()=>[...new Set(T.value?.map(I=>I.infoDispositif.idCompte))||[]].map(I=>({idCompte:I,dispositifs:T.value?.filter(N=>N.infoDispositif.idCompte===I)||[]})));return(A,I)=>(openBlock(),createBlock(VCard,{class:"text-start"},{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VRadioGroup,{modelValue:S.value,"onUpdate:modelValue":I[0]||(I[0]=N=>S.value=N),inline:""},{default:withCtx(()=>[createVNode(VRadio,{label:unref(x)("pages.compte.connexions.Constellation"),value:"Constellation"},null,8,["label"]),createVNode(VRadio,{value:"SFIP"},{label:withCtx(()=>[createBaseVNode("div",null,[createVNode(VTooltip,{text:unref(x)("pages.compte.connexions.indiceSFIP"),location:"bottom"},{activator:withCtx(({props:N})=>[createBaseVNode("p",normalizeProps(guardReactiveProps(N)),toDisplayString$1(unref(x)("pages.compte.connexions.SFIP")),17)]),_:1},8,["text"])])]),_:1})]),_:1},8,["modelValue"]),createVNode(_sfc_main$1K,{titre:E.value,"en-attente":!C.value},null,8,["titre","en-attente"]),S.value==="Constellation"?(openBlock(),createElementBlock("div",_hoisted_1$s,[T.value?(openBlock(),createBlock(VList,{key:0,"max-height":"500",style:{"overflow-y":"scroll"}},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(B.value,N=>(openBlock(),createBlock(_sfc_main$17,{id:N.idCompte,key:N.idCompte},{activator:withCtx(({props:V})=>[createVNode(_sfc_main$$,mergeProps(V,{compte:N.idCompte,dispositifs:N.dispositifs}),null,16,["compte","dispositifs"])]),_:2},1032,["id"]))),128))]),_:1})):createCommentVNode("",!0)])):(openBlock(),createElementBlock("div",_hoisted_2$k,[C.value?(openBlock(),createBlock(VList,{key:0,"max-height":"500",style:{"overflow-y":"scroll"}},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(C.value,N=>(openBlock(),createBlock(_sfc_main$_,{key:N.adresse,pair:N.pair,adresse:N.adresse},null,8,["pair","adresse"]))),128))]),_:1})):createCommentVNode("",!0)]))]),_:1})]),_:1}))}}),_sfc_main$Y=defineComponent$1({__name:"ItemNumration",props:{code:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),{numration:S,formatterChiffre:E}=utiliserNumration(),C=E(123.45,n.code);return(T,B)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[T.code===unref(S)?(openBlock(),createBlock(VIcon,{key:0,color:"primary"},{default:withCtx(()=>[createTextVNode(" mdi-check-bold ")]),_:1})):createCommentVNode("",!0)]),title:withCtx(()=>[createTextVNode(toDisplayString$1(T.code||unref(x)("communs.auto")),1)]),append:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)),1)]),_:1}))}}),_sfc_main$X=defineComponent$1({__name:"JetonNumration",props:{code:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),{formatterChiffre:S}=utiliserNumration(),E=S(123.45,n.code);return(C,T)=>(openBlock(),createBlock(VChip,{variant:"outlined",size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.code||unref(x)("communs.auto"))+" "+toDisplayString$1(unref(E)),1)]),_:1}))}}),_hoisted_1$r={class:"d-flex flex-wrap"},_hoisted_2$j={class:"px-0 mb-0 text-overline"},_hoisted_3$b={class:"px-0 mb-0 text-overline"},_hoisted_4$4={class:"px-0 mb-0 text-overline"},_sfc_main$W=defineComponent$1({__name:"OngletThme",setup(r){const{useI18n:n,__:_}=_(),{langue:x,choisirLangues:S}=utiliserLangues(),{numration:E,systmesNumration:C}=utiliserNumration(),{t:T}=n(),B=utilisertatThme(),A=useTheme(),I=ref$1(B.couleur),N=ref$1(B.thmeImages);watchEffect(()=>{B.couleur=I.value,A.global.name.value=I.value}),watchEffect(()=>{B.thmeImages=N.value});const V=ref$1(x.value),{codesLanguesDisponibles:D}=_();watchEffect(()=>{V.value=x.value}),watch(V,()=>{x.value!==V.value&&S(V.value)});const O=ref$1(E.value);return(F,M)=>(openBlock(),createBlock(VCard,{class:"text-start"},{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$r,[createVNode(VCard,{flat:"",width:"300",class:"mx-3 my-3"},{default:withCtx(()=>[createBaseVNode("p",_hoisted_2$j,toDisplayString$1(unref(T)("pages.compte.options.couleurs")),1),createVNode(VDivider,{class:"mb-4"}),createVNode(VSwitch,{modelValue:I.value,"onUpdate:modelValue":M[0]||(M[0]=L=>I.value=L),color:"primary","true-value":"dark","false-value":"light",inset:"",label:unref(T)("pages.compte.options.thmeNuit")},{prepend:withCtx(()=>[createVNode(VIcon,{icon:I.value==="dark"?"mdi-weather-night":"mdi-white-balance-sunny",color:I.value==="dark"?"primary":void 0},null,8,["icon","color"])]),_:1},8,["modelValue","label"])]),_:1}),createVNode(VCard,{flat:"",width:"300",class:"mx-3 my-3"},{default:withCtx(()=>[createBaseVNode("p",_hoisted_3$b,toDisplayString$1(unref(T)("pages.compte.options.culture")),1),createVNode(VDivider,{class:"mb-4"}),createVNode(VRadioGroup,{modelValue:N.value,"onUpdate:modelValue":M[1]||(M[1]=L=>N.value=L),label:unref(T)("pages.compte.options.thmeImages"),class:"mt-0"},{default:withCtx(()=>[createVNode(VRadio,{value:"unDraw",label:unref(T)("pages.compte.options.unDraw")},null,8,["label"]),createVNode(VRadio,{value:"",label:unref(T)("pages.compte.options.")},null,8,["label"])]),_:1},8,["modelValue","label"])]),_:1}),createVNode(VCard,{flat:"",width:"300",class:"mx-3 my-3"},{default:withCtx(()=>[createBaseVNode("p",_hoisted_4$4,toDisplayString$1(unref(T)("pages.compte.options.langue")),1),createVNode(VDivider,{class:"mb-4"}),createVNode(VAutocomplete,{modelValue:V.value,"onUpdate:modelValue":M[2]||(M[2]=L=>V.value=L),items:unref(D),label:unref(T)("pages.compte.options.langue"),variant:"outlined",density:"compact","hide-details":"","prepend-icon":"mdi-earth",class:"pb-5"},{item:withCtx(({item:L,props:j})=>[createVNode(_sfc_main$1T,mergeProps(j,{code:L.value,selectionnee:L.value===unref(x)}),null,16,["code","selectionnee"])]),selection:withCtx(({item:L})=>[createVNode(_sfc_main$1S,{code:L.value},null,8,["code"])]),_:1},8,["modelValue","items","label"]),createVNode(VAutocomplete,{modelValue:O.value,"onUpdate:modelValue":M[3]||(M[3]=L=>O.value=L),items:[null,...unref(C)],label:unref(T)("compte.options.numration"),variant:"outlined",density:"compact","hide-details":"","prepend-icon":"mdi-abacus",class:"py-5"},{selection:withCtx(({item:L})=>[createVNode(_sfc_main$X,{code:L.value},null,8,["code"])]),item:withCtx(({props:L,item:j})=>[createVNode(_sfc_main$Y,mergeProps(L,{code:j.value}),null,16,["code"])]),_:1},8,["modelValue","items","label"])]),_:1})])]),_:1})]),_:1}))}});/*!
 * qrcode.vue v3.4.1
 * A Vue.js component to generate QRCode.
 *  2017-2023 @scopewu(https://github.com/scopewu)
 * MIT License.
 */var __assign=function(){return __assign=Object.assign||function(n){for(var _,x=1,S=arguments.length;x<S;x++){_=arguments[x];for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(n[E]=_[E])}return n},__assign.apply(this,arguments)};typeof SuppressedError=="function"&&SuppressedError;var qrcodegen;(function(r){var n=function(){function C(T,B,A,I){if(this.version=T,this.errorCorrectionLevel=B,this.modules=[],this.isFunction=[],T<C.MIN_VERSION||T>C.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=T*4+17;for(var N=[],V=0;V<this.size;V++)N.push(!1);for(var V=0;V<this.size;V++)this.modules.push(N.slice()),this.isFunction.push(N.slice());this.drawFunctionPatterns();var D=this.addEccAndInterleave(A);if(this.drawCodewords(D),I==-1)for(var O=1e9,V=0;V<8;V++){this.applyMask(V),this.drawFormatBits(V);var F=this.getPenaltyScore();F<O&&(I=V,O=F),this.applyMask(V)}S(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}return C.encodeText=function(T,B){var A=r.QrSegment.makeSegments(T);return C.encodeSegments(A,B)},C.encodeBinary=function(T,B){var A=r.QrSegment.makeBytes(T);return C.encodeSegments([A],B)},C.encodeSegments=function(T,B,A,I,N,V){if(A===void 0&&(A=1),I===void 0&&(I=40),N===void 0&&(N=-1),V===void 0&&(V=!0),!(C.MIN_VERSION<=A&&A<=I&&I<=C.MAX_VERSION)||N<-1||N>7)throw new RangeError("Invalid value");var D,O;for(D=A;;D++){var F=C.getNumDataCodewords(D,B)*8,M=E.getTotalBits(T,D);if(M<=F){O=M;break}if(D>=I)throw new RangeError("Data too long")}for(var L=0,j=[C.Ecc.MEDIUM,C.Ecc.QUARTILE,C.Ecc.HIGH];L<j.length;L++){var q=j[L];V&&O<=C.getNumDataCodewords(D,q)*8&&(B=q)}for(var H=[],X=0,J=T;X<J.length;X++){var Z=J[X];_(Z.mode.modeBits,4,H),_(Z.numChars,Z.mode.numCharCountBits(D),H);for(var ae=0,ce=Z.getData();ae<ce.length;ae++){var ve=ce[ae];H.push(ve)}}S(H.length==O);var pe=C.getNumDataCodewords(D,B)*8;S(H.length<=pe),_(0,Math.min(4,pe-H.length),H),_(0,(8-H.length%8)%8,H),S(H.length%8==0);for(var G=236;H.length<pe;G^=253)_(G,8,H);for(var Y=[];Y.length*8<H.length;)Y.push(0);return H.forEach(function(U,W){return Y[W>>>3]|=U<<7-(W&7)}),new C(D,B,Y,N)},C.prototype.getModule=function(T,B){return 0<=T&&T<this.size&&0<=B&&B<this.size&&this.modules[B][T]},C.prototype.getModules=function(){return this.modules},C.prototype.drawFunctionPatterns=function(){for(var T=0;T<this.size;T++)this.setFunctionModule(6,T,T%2==0),this.setFunctionModule(T,6,T%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var B=this.getAlignmentPatternPositions(),A=B.length,T=0;T<A;T++)for(var I=0;I<A;I++)T==0&&I==0||T==0&&I==A-1||T==A-1&&I==0||this.drawAlignmentPattern(B[T],B[I]);this.drawFormatBits(0),this.drawVersion()},C.prototype.drawFormatBits=function(T){for(var B=this.errorCorrectionLevel.formatBits<<3|T,A=B,I=0;I<10;I++)A=A<<1^(A>>>9)*1335;var N=(B<<10|A)^21522;S(N>>>15==0);for(var I=0;I<=5;I++)this.setFunctionModule(8,I,x(N,I));this.setFunctionModule(8,7,x(N,6)),this.setFunctionModule(8,8,x(N,7)),this.setFunctionModule(7,8,x(N,8));for(var I=9;I<15;I++)this.setFunctionModule(14-I,8,x(N,I));for(var I=0;I<8;I++)this.setFunctionModule(this.size-1-I,8,x(N,I));for(var I=8;I<15;I++)this.setFunctionModule(8,this.size-15+I,x(N,I));this.setFunctionModule(8,this.size-8,!0)},C.prototype.drawVersion=function(){if(!(this.version<7)){for(var T=this.version,B=0;B<12;B++)T=T<<1^(T>>>11)*7973;var A=this.version<<12|T;S(A>>>18==0);for(var B=0;B<18;B++){var I=x(A,B),N=this.size-11+B%3,V=Math.floor(B/3);this.setFunctionModule(N,V,I),this.setFunctionModule(V,N,I)}}},C.prototype.drawFinderPattern=function(T,B){for(var A=-4;A<=4;A++)for(var I=-4;I<=4;I++){var N=Math.max(Math.abs(I),Math.abs(A)),V=T+I,D=B+A;0<=V&&V<this.size&&0<=D&&D<this.size&&this.setFunctionModule(V,D,N!=2&&N!=4)}},C.prototype.drawAlignmentPattern=function(T,B){for(var A=-2;A<=2;A++)for(var I=-2;I<=2;I++)this.setFunctionModule(T+I,B+A,Math.max(Math.abs(I),Math.abs(A))!=1)},C.prototype.setFunctionModule=function(T,B,A){this.modules[B][T]=A,this.isFunction[B][T]=!0},C.prototype.addEccAndInterleave=function(T){var B=this.version,A=this.errorCorrectionLevel;if(T.length!=C.getNumDataCodewords(B,A))throw new RangeError("Invalid argument");for(var I=C.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][B],N=C.ECC_CODEWORDS_PER_BLOCK[A.ordinal][B],V=Math.floor(C.getNumRawDataModules(B)/8),D=I-V%I,O=Math.floor(V/I),F=[],M=C.reedSolomonComputeDivisor(N),L=0,j=0;L<I;L++){var q=T.slice(j,j+O-N+(L<D?0:1));j+=q.length;var H=C.reedSolomonComputeRemainder(q,M);L<D&&q.push(0),F.push(q.concat(H))}for(var X=[],J=function(Z){F.forEach(function(ae,ce){(Z!=O-N||ce>=D)&&X.push(ae[Z])})},L=0;L<F[0].length;L++)J(L);return S(X.length==V),X},C.prototype.drawCodewords=function(T){if(T.length!=Math.floor(C.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var B=0,A=this.size-1;A>=1;A-=2){A==6&&(A=5);for(var I=0;I<this.size;I++)for(var N=0;N<2;N++){var V=A-N,D=(A+1&2)==0,O=D?this.size-1-I:I;!this.isFunction[O][V]&&B<T.length*8&&(this.modules[O][V]=x(T[B>>>3],7-(B&7)),B++)}}S(B==T.length*8)},C.prototype.applyMask=function(T){if(T<0||T>7)throw new RangeError("Mask value out of range");for(var B=0;B<this.size;B++)for(var A=0;A<this.size;A++){var I=void 0;switch(T){case 0:I=(A+B)%2==0;break;case 1:I=B%2==0;break;case 2:I=A%3==0;break;case 3:I=(A+B)%3==0;break;case 4:I=(Math.floor(A/3)+Math.floor(B/2))%2==0;break;case 5:I=A*B%2+A*B%3==0;break;case 6:I=(A*B%2+A*B%3)%2==0;break;case 7:I=((A+B)%2+A*B%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[B][A]&&I&&(this.modules[B][A]=!this.modules[B][A])}},C.prototype.getPenaltyScore=function(){for(var T=0,B=0;B<this.size;B++){for(var A=!1,I=0,N=[0,0,0,0,0,0,0],V=0;V<this.size;V++)this.modules[B][V]==A?(I++,I==5?T+=C.PENALTY_N1:I>5&&T++):(this.finderPenaltyAddHistory(I,N),A||(T+=this.finderPenaltyCountPatterns(N)*C.PENALTY_N3),A=this.modules[B][V],I=1);T+=this.finderPenaltyTerminateAndCount(A,I,N)*C.PENALTY_N3}for(var V=0;V<this.size;V++){for(var A=!1,D=0,N=[0,0,0,0,0,0,0],B=0;B<this.size;B++)this.modules[B][V]==A?(D++,D==5?T+=C.PENALTY_N1:D>5&&T++):(this.finderPenaltyAddHistory(D,N),A||(T+=this.finderPenaltyCountPatterns(N)*C.PENALTY_N3),A=this.modules[B][V],D=1);T+=this.finderPenaltyTerminateAndCount(A,D,N)*C.PENALTY_N3}for(var B=0;B<this.size-1;B++)for(var V=0;V<this.size-1;V++){var O=this.modules[B][V];O==this.modules[B][V+1]&&O==this.modules[B+1][V]&&O==this.modules[B+1][V+1]&&(T+=C.PENALTY_N2)}for(var F=0,M=0,L=this.modules;M<L.length;M++){var j=L[M];F=j.reduce(function(X,J){return X+(J?1:0)},F)}var q=this.size*this.size,H=Math.ceil(Math.abs(F*20-q*10)/q)-1;return S(0<=H&&H<=9),T+=H*C.PENALTY_N4,S(0<=T&&T<=2568888),T},C.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var T=Math.floor(this.version/7)+2,B=this.version==32?26:Math.ceil((this.version*4+4)/(T*2-2))*2,A=[6],I=this.size-7;A.length<T;I-=B)A.splice(1,0,I);return A},C.getNumRawDataModules=function(T){if(T<C.MIN_VERSION||T>C.MAX_VERSION)throw new RangeError("Version number out of range");var B=(16*T+128)*T+64;if(T>=2){var A=Math.floor(T/7)+2;B-=(25*A-10)*A-55,T>=7&&(B-=36)}return S(208<=B&&B<=29648),B},C.getNumDataCodewords=function(T,B){return Math.floor(C.getNumRawDataModules(T)/8)-C.ECC_CODEWORDS_PER_BLOCK[B.ordinal][T]*C.NUM_ERROR_CORRECTION_BLOCKS[B.ordinal][T]},C.reedSolomonComputeDivisor=function(T){if(T<1||T>255)throw new RangeError("Degree out of range");for(var B=[],A=0;A<T-1;A++)B.push(0);B.push(1);for(var I=1,A=0;A<T;A++){for(var N=0;N<B.length;N++)B[N]=C.reedSolomonMultiply(B[N],I),N+1<B.length&&(B[N]^=B[N+1]);I=C.reedSolomonMultiply(I,2)}return B},C.reedSolomonComputeRemainder=function(T,B){for(var A=B.map(function(O){return 0}),I=function(O){var F=O^A.shift();A.push(0),B.forEach(function(M,L){return A[L]^=C.reedSolomonMultiply(M,F)})},N=0,V=T;N<V.length;N++){var D=V[N];I(D)}return A},C.reedSolomonMultiply=function(T,B){if(T>>>8||B>>>8)throw new RangeError("Byte out of range");for(var A=0,I=7;I>=0;I--)A=A<<1^(A>>>7)*285,A^=(B>>>I&1)*T;return S(A>>>8==0),A},C.prototype.finderPenaltyCountPatterns=function(T){var B=T[1];S(B<=this.size*3);var A=B>0&&T[2]==B&&T[3]==B*3&&T[4]==B&&T[5]==B;return(A&&T[0]>=B*4&&T[6]>=B?1:0)+(A&&T[6]>=B*4&&T[0]>=B?1:0)},C.prototype.finderPenaltyTerminateAndCount=function(T,B,A){return T&&(this.finderPenaltyAddHistory(B,A),B=0),B+=this.size,this.finderPenaltyAddHistory(B,A),this.finderPenaltyCountPatterns(A)},C.prototype.finderPenaltyAddHistory=function(T,B){B[0]==0&&(T+=this.size),B.pop(),B.unshift(T)},C.MIN_VERSION=1,C.MAX_VERSION=40,C.PENALTY_N1=3,C.PENALTY_N2=3,C.PENALTY_N3=40,C.PENALTY_N4=10,C.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],C.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],C}();r.QrCode=n;function _(C,T,B){if(T<0||T>31||C>>>T)throw new RangeError("Value out of range");for(var A=T-1;A>=0;A--)B.push(C>>>A&1)}function x(C,T){return(C>>>T&1)!=0}function S(C){if(!C)throw new Error("Assertion error")}var E=function(){function C(T,B,A){if(this.mode=T,this.numChars=B,this.bitData=A,B<0)throw new RangeError("Invalid argument");this.bitData=A.slice()}return C.makeBytes=function(T){for(var B=[],A=0,I=T;A<I.length;A++){var N=I[A];_(N,8,B)}return new C(C.Mode.BYTE,T.length,B)},C.makeNumeric=function(T){if(!C.isNumeric(T))throw new RangeError("String contains non-numeric characters");for(var B=[],A=0;A<T.length;){var I=Math.min(T.length-A,3);_(parseInt(T.substring(A,A+I),10),I*3+1,B),A+=I}return new C(C.Mode.NUMERIC,T.length,B)},C.makeAlphanumeric=function(T){if(!C.isAlphanumeric(T))throw new RangeError("String contains unencodable characters in alphanumeric mode");var B=[],A;for(A=0;A+2<=T.length;A+=2){var I=C.ALPHANUMERIC_CHARSET.indexOf(T.charAt(A))*45;I+=C.ALPHANUMERIC_CHARSET.indexOf(T.charAt(A+1)),_(I,11,B)}return A<T.length&&_(C.ALPHANUMERIC_CHARSET.indexOf(T.charAt(A)),6,B),new C(C.Mode.ALPHANUMERIC,T.length,B)},C.makeSegments=function(T){return T==""?[]:C.isNumeric(T)?[C.makeNumeric(T)]:C.isAlphanumeric(T)?[C.makeAlphanumeric(T)]:[C.makeBytes(C.toUtf8ByteArray(T))]},C.makeEci=function(T){var B=[];if(T<0)throw new RangeError("ECI assignment value out of range");if(T<128)_(T,8,B);else if(T<16384)_(2,2,B),_(T,14,B);else if(T<1e6)_(6,3,B),_(T,21,B);else throw new RangeError("ECI assignment value out of range");return new C(C.Mode.ECI,0,B)},C.isNumeric=function(T){return C.NUMERIC_REGEX.test(T)},C.isAlphanumeric=function(T){return C.ALPHANUMERIC_REGEX.test(T)},C.prototype.getData=function(){return this.bitData.slice()},C.getTotalBits=function(T,B){for(var A=0,I=0,N=T;I<N.length;I++){var V=N[I],D=V.mode.numCharCountBits(B);if(V.numChars>=1<<D)return 1/0;A+=4+D+V.bitData.length}return A},C.toUtf8ByteArray=function(T){T=encodeURI(T);for(var B=[],A=0;A<T.length;A++)T.charAt(A)!="%"?B.push(T.charCodeAt(A)):(B.push(parseInt(T.substring(A+1,A+3),16)),A+=2);return B},C.NUMERIC_REGEX=/^[0-9]*$/,C.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,C.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",C}();r.QrSegment=E})(qrcodegen||(qrcodegen={}));(function(r){(function(n){var _=function(){function x(S,E){this.ordinal=S,this.formatBits=E}return x.LOW=new x(0,1),x.MEDIUM=new x(1,0),x.QUARTILE=new x(2,3),x.HIGH=new x(3,2),x}();n.Ecc=_})(r.QrCode||(r.QrCode={}))})(qrcodegen||(qrcodegen={}));(function(r){(function(n){var _=function(){function x(S,E){this.modeBits=S,this.numBitsCharCount=E}return x.prototype.numCharCountBits=function(S){return this.numBitsCharCount[Math.floor((S+7)/17)]},x.NUMERIC=new x(1,[10,12,14]),x.ALPHANUMERIC=new x(2,[9,11,13]),x.BYTE=new x(4,[8,16,16]),x.KANJI=new x(8,[8,10,12]),x.ECI=new x(7,[0,0,0]),x}();n.Mode=_})(r.QrSegment||(r.QrSegment={}))})(qrcodegen||(qrcodegen={}));var QR=qrcodegen,defaultErrorCorrectLevel="H",ErrorCorrectLevelMap={L:QR.QrCode.Ecc.LOW,M:QR.QrCode.Ecc.MEDIUM,Q:QR.QrCode.Ecc.QUARTILE,H:QR.QrCode.Ecc.HIGH},SUPPORTS_PATH2D=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function validErrorCorrectLevel(r){return r in ErrorCorrectLevelMap}function generatePath(r,n){n===void 0&&(n=0);var _=[];return r.forEach(function(x,S){var E=null;x.forEach(function(C,T){if(!C&&E!==null){_.push("M".concat(E+n," ").concat(S+n,"h").concat(T-E,"v1H").concat(E+n,"z")),E=null;return}if(T===x.length-1){if(!C)return;E===null?_.push("M".concat(T+n,",").concat(S+n," h1v1H").concat(T+n,"z")):_.push("M".concat(E+n,",").concat(S+n," h").concat(T+1-E,"v1H").concat(E+n,"z"));return}C&&E===null&&(E=T)})}),_.join("")}var QRCodeProps={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:defaultErrorCorrectLevel,validator:function(r){return validErrorCorrectLevel(r)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0}},QRCodeVueProps=__assign(__assign({},QRCodeProps),{renderAs:{type:String,required:!1,default:"canvas",validator:function(r){return["canvas","svg"].indexOf(r)>-1}}}),QRCodeSvg=defineComponent$1({name:"QRCodeSvg",props:QRCodeProps,setup:function(r){var n=ref$1(0),_=ref$1(""),x=function(){var S=r.value,E=r.level,C=r.margin,T=QR.QrCode.encodeText(S,ErrorCorrectLevelMap[E]).getModules();n.value=T.length+C*2,_.value=generatePath(T,C)};return x(),onUpdated(x),function(){return h$1("svg",{width:r.size,height:r.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(n.value," ").concat(n.value)},[h$1("path",{fill:r.background,d:"M0,0 h".concat(n.value,"v").concat(n.value,"H0z")}),h$1("path",{fill:r.foreground,d:_.value})])}}}),QRCodeCanvas=defineComponent$1({name:"QRCodeCanvas",props:QRCodeProps,setup:function(r){var n=ref$1(null),_=function(){var x=r.value,S=r.level,E=r.size,C=r.margin,T=r.background,B=r.foreground,A=n.value;if(A){var I=A.getContext("2d");if(I){var N=QR.QrCode.encodeText(x,ErrorCorrectLevelMap[S]).getModules(),V=N.length+C*2,D=window.devicePixelRatio||1,O=E/V*D;A.height=A.width=E*D,I.scale(O,O),I.fillStyle=T,I.fillRect(0,0,V,V),I.fillStyle=B,SUPPORTS_PATH2D?I.fill(new Path2D(generatePath(N,C))):N.forEach(function(F,M){F.forEach(function(L,j){L&&I.fillRect(j+C,M+C,1,1)})})}}};return onMounted(_),onUpdated(_),function(){return h$1("canvas",{ref:n,style:{width:"".concat(r.size,"px"),height:"".concat(r.size,"px")}})}}}),QrcodeVue=defineComponent$1({name:"Qrcode",render:function(){var r=this.$props,n=r.renderAs,_=r.value,x=r.size,S=r.margin,E=r.level,C=r.background,T=r.foreground,B=x>>>0,A=S>>>0,I=validErrorCorrectLevel(E)?E:defaultErrorCorrectLevel;return h$1(n==="svg"?QRCodeSvg:QRCodeCanvas,{value:_,size:B,margin:A,level:I,background:C,foreground:T})},props:QRCodeVueProps});const _hoisted_1$q={class:"mx-auto",style:{display:"flex","justify-content":"center","align-items":"center","border-radius":"15px",border:"2px solid #1867c0",width:"250px",height:"50px"}},_hoisted_2$i={class:"text-h3",style:{color:"#1867c0"}},_hoisted_3$a={class:"mx-auto mb-2",style:{display:"flex","align-items":"center","justify-content":"center"}},_sfc_main$V=defineComponent$1({__name:"InviterDispositif",setup(r){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{mdAndUp:S}=useDisplay(),{isRtl:E}=useRtl(),C=ref$1(!1),T=ref$1(0),B=["cheminement","manuelle","codeR2"],A=ref$1(),I=()=>{A.value="manuelle",T.value=B.indexOf("manuelle")},N=()=>{A.value="codeR2",T.value=B.indexOf("codeR2")},V=computed(()=>{switch(B[T.value]){case"cheminement":return x("dispositifs.inviter.titreCheminement");case"manuelle":return x("dispositifs.inviter.titreManuelle");case"codeR2":return x("dispositifs.inviter.titreCodeR2");default:return""}}),D=computed(()=>{switch(B[T.value]){case"cheminement":return x("dispositifs.inviter.sousTitreCheminement");case"manuelle":return x("dispositifs.inviter.sousTitreManuelle");case"codeR2":return x("dispositifs.inviter.sousTitreCodeR2");default:return""}}),O=()=>{switch(B[T.value]){default:T.value++;break}},F=()=>{switch(B[T.value]){case"manuelle":case"codeR2":T.value=B.indexOf("cheminement");break;default:T.value--;break}},M=computed(()=>{switch(B[T.value]){case"cheminement":case"manuelle":case"codeR2":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),L=computed(()=>{switch(B[T.value]){case"cheminement":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),j=ref$1(!1),q=ref$1(),H=async()=>{j.value=!0,q.value=await n?.gnrerInvitationRejoindreCompte(),j.value=!1},X=computed(()=>{if(q.value)return JSON.stringify(q.value)}),J=async()=>{q.value=void 0};return watchEffect(async()=>{C.value||await J()}),(Z,ae)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":ae[8]||(ae[8]=ce=>C.value=ce)},{activator:withCtx(({props:ce})=>[renderSlot(Z.$slots,"activator",normalizeProps(guardReactiveProps({props:ce})),void 0,!0)]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(S)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(V.value)+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:ae[0]||(ae[0]=ce=>C.value=!1)})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(D.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:T.value,"onUpdate:modelValue":ae[7]||(ae[7]=ce=>T.value=ce),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{title:unref(x)("dispositifs.inviter.manuellement"),"append-icon":unref(E)?"mdi-chevron-left":"mdi-chevron-right","prepend-icon":"mdi-pencil",onClick:ae[1]||(ae[1]=()=>I())},null,8,["title","append-icon"]),createVNode(VListItem,{title:unref(x)("dispositifs.inviter.codeR2"),"append-icon":unref(E)?"mdi-chevron-left":"mdi-chevron-right","prepend-icon":"mdi-qrcode",onClick:ae[2]||(ae[2]=()=>N())},null,8,["title","append-icon"])]),_:1})]),_:1}),createVNode(VWindowItem,{value:1,class:"text-center"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$q,[createBaseVNode("p",_hoisted_2$i,toDisplayString$1((q.value?.codeSecret||"---").slice(2,9)),1)]),X.value?(openBlock(),createBlock(VBtn,{key:1,class:"mt-2",text:unref(x)("dispositifs.inviter.annulerInvitation"),variant:"outlined","append-icon":"mdi-cancel",onClick:ae[4]||(ae[4]=()=>J())},null,8,["text"])):(openBlock(),createBlock(VBtn,{key:0,class:"mt-2",text:unref(x)("dispositifs.inviter.gnrerInvitation"),loading:j.value,variant:"outlined","append-icon":"mdi-reload",onClick:ae[3]||(ae[3]=()=>H())},null,8,["text","loading"]))]),_:1}),createVNode(VWindowItem,{value:2,class:"text-center"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$a,[createVNode(QrcodeVue,{value:X.value,size:200,level:"H"},null,8,["value"]),createBaseVNode("div",{class:normalizeClass({fond:!X.value}),style:{position:"fixed",height:"200px",width:"200px"}},null,2)]),X.value?(openBlock(),createBlock(VBtn,{key:1,class:"mt-2",text:unref(x)("dispositifs.inviter.annulerInvitation"),variant:"outlined","append-icon":"mdi-cancel",onClick:ae[6]||(ae[6]=()=>J())},null,8,["text"])):(openBlock(),createBlock(VBtn,{key:0,class:"mt-2",text:unref(x)("dispositifs.inviter.gnrerInvitation"),loading:j.value,variant:"outlined","append-icon":"mdi-reload",onClick:ae[5]||(ae[5]=()=>H())},null,8,["text","loading"]))]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!L.value.actif,onClick:F},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,L.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!M.value.actif,onClick:O},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,M.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),InviterDispositif_vue_vue_type_style_index_0_scoped_8623a6d1_lang="",InviterDispositif=_export_sfc(_sfc_main$V,[["__scopeId","data-v-8623a6d1"]]),_hoisted_1$p={class:"text-error"},_hoisted_2$h={class:"text-error font-weight-bold"},_sfc_main$U=defineComponent$1({__name:"RejoindreCompte",setup(r){const n=inject$1("constl"),{mdAndUp:_}=useDisplay(),{useI18n:x}=_(),{t:S}=x(),E=ref$1(!1),C=ref$1(),T=ref$1(),B=async()=>{!C.value||!T.value||await n?.demanderEtPuisRejoindreCompte({idCompte:C.value,codeSecret:T.value})};return(A,I)=>(openBlock(),createBlock(VDialog,{modelValue:E.value,"onUpdate:modelValue":I[1]||(I[1]=N=>E.value=N)},{activator:withCtx(({props:N})=>[renderSlot(A.$slots,"activator",normalizeProps(guardReactiveProps({props:N})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(_)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$p,toDisplayString$1(unref(S)("compte.rejoindreCompte.titre")),1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:I[0]||(I[0]=N=>E.value=!1)})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,null,{default:withCtx(()=>[createVNode(VWindowItem,null,{default:withCtx(()=>[createBaseVNode("span",_hoisted_2$h,toDisplayString$1(unref(S)("compte.rejoindreCompte.avertissement")),1),createTextVNode(" "+toDisplayString$1(unref(S)("compte.rejoindreCompte.explication")),1)]),_:1}),createVNode(VWindowItem,null,{default:withCtx(()=>[createVNode(VBtn,{onClick:B})]),_:1})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardActions)]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$o={class:"text-error"},_hoisted_2$g={class:"text-error font-weight-bold"},_sfc_main$T=defineComponent$1({__name:"FermerCompte",setup(r){const n=inject$1("constl"),{mdAndUp:_}=useDisplay(),{useI18n:x}=_(),{t:S}=x(),E=ref$1(!1),C=ref$1(!1),T=async()=>{C.value=!0,await n?.effacerDispositif(),E.value=!1,C.value=!1,location.reload()};return(B,A)=>(openBlock(),createBlock(VDialog,{modelValue:E.value,"onUpdate:modelValue":A[2]||(A[2]=I=>E.value=I)},{activator:withCtx(({props:I})=>[renderSlot(B.$slots,"activator",normalizeProps(guardReactiveProps({props:I})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(_)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$o,toDisplayString$1(unref(S)("compte.effacerCompte.titre")),1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:A[0]||(A[0]=I=>E.value=!1)})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("span",_hoisted_2$g,toDisplayString$1(unref(S)("compte.effacerCompte.avertissement")),1),createTextVNode(" "+toDisplayString$1(unref(S)("compte.effacerCompte.explication")),1)]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:A[1]||(A[1]=I=>E.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.annuler")),1)]),_:1}),createVNode(VBtn,{color:"error",variant:"flat","append-icon":"mdi-delete",loading:C.value,onClick:T},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("compte.effacerCompte.btnEffacer")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$S=defineComponent$1({__name:"ExporterCompte",setup(r){const n=inject$1("constl"),{mdAndUp:_}=useDisplay(),{useI18n:x}=_(),{t:S}=x(),E=ref$1(!1),C=async()=>{await n?.exporterDispositif({nomFichier:`Mon compte Constellation ${Date.now().toLocaleString()}.zip`})};return(T,B)=>(openBlock(),createBlock(VDialog,{modelValue:E.value,"onUpdate:modelValue":B[2]||(B[2]=A=>E.value=A)},{activator:withCtx(({props:A})=>[renderSlot(T.$slots,"activator",normalizeProps(guardReactiveProps({props:A})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(_)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(S)("compte.exporterCompte.titre")),1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:B[0]||(B[0]=A=>E.value=!1)})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VBtn,{"append-icon":"mdi-download",variant:"outlined",onClick:C},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("compte.exporterCompte.exporter")),1)]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:B[1]||(B[1]=A=>E.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.annuler")),1)]),_:1})]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$n={class:"px-0 mb-0 text-h6"},_hoisted_2$f={class:"px-0 mb-0 text-h6"},_sfc_main$R=defineComponent$1({__name:"OngletCompte",setup(r){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{mdAndUp:S}=useDisplay(),E=ref$1();enregistrercoute(n?.suivreDispositifs({f:T=>E.value=T}));const C=ref$1();return enregistrercoute(n?.rseau?.suivreConnexionsDispositifs({f:T=>C.value=T})),(T,B)=>(openBlock(),createBlock(VCard,{class:"text-start"},{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$n,toDisplayString$1(unref(x)("pages.compte.compte.mesDispositifs")),1),createVNode(VDivider),createVNode(VList,null,{default:withCtx(()=>[createVNode(InviterDispositif,null,{activator:withCtx(({props:A})=>[createVNode(VListItem,mergeProps(A,{"prepend-icon":"mdi-plus",title:unref(x)("dispositifs.ajouter")}),null,16,["title"])]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(E.value,A=>(openBlock(),createBlock(_sfc_main$1N,{key:A,"id-dispositif":A,"vu-a":C.value?.find(I=>I.infoDispositif.idDispositif===A)?.vu},null,8,["id-dispositif","vu-a"]))),128))]),_:1}),createBaseVNode("p",_hoisted_2$f,toDisplayString$1(unref(x)("pages.compte.compte.optionsAvances")),1),createVNode(VCard,{variant:"outlined"},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,null,{append:withCtx(()=>[createVNode(_sfc_main$S,null,{activator:withCtx(({props:A})=>[unref(S)?(openBlock(),createBlock(VBtn,mergeProps({key:0},A,{"append-icon":"mdi-download",variant:"outlined"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.btnExporterCompte")),1)]),_:2},1040)):(openBlock(),createBlock(VBtn,mergeProps({key:1},A,{icon:"mdi-download",variant:"outlined",size:"small"}),null,16))]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.titreExporterCompte")),1)]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.sousTitreExporterCompte")),1)]),_:1})]),_:1}),createVNode(VDivider,{class:"my-2"}),createVNode(VListItem,null,{append:withCtx(()=>[createVNode(_sfc_main$U,null,{activator:withCtx(({props:A})=>[unref(S)?(openBlock(),createBlock(VBtn,mergeProps({key:0},A,{"append-icon":"mdi-account-plus-outline",variant:"outlined"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.btnRejoindreCompte")),1)]),_:2},1040)):(openBlock(),createBlock(VBtn,mergeProps({key:1},A,{icon:"mdi-account-plus-outline",variant:"outlined",size:"small"}),null,16))]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.titreRejoindreCompte")),1)]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.sousTitreRejoindreCompte")),1)]),_:1})]),_:1}),createVNode(VDivider,{class:"my-2"}),createVNode(VListItem,{class:"text-error"},{append:withCtx(()=>[createVNode(_sfc_main$T,null,{activator:withCtx(({props:A})=>[unref(S)?(openBlock(),createBlock(VBtn,mergeProps({key:0},A,{"append-icon":"mdi-delete",variant:"outlined"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.btnEffacerCompte")),1)]),_:2},1040)):(openBlock(),createBlock(VBtn,mergeProps({key:1},A,{icon:"mdi-delete",variant:"outlined",size:"small"}),null,16))]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.titreEffacerCompte")),1)]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.sousTitreEffacerCompte")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),_hoisted_1$m={class:"mb-4"},_sfc_main$Q=defineComponent$1({__name:"NouvelleInfoContact",props:{dejaPresents:{}},setup(r){const n=r,{mdAndUp:_}=useDisplay(),x=inject$1("constl"),{useI18n:S}=_(),{t:E}=S(),C=ref$1(!1),T=ref$1(),B=ref$1(),A=ref$1(),I=ref$1(!1),N=computed(()=>[...["courriel","siteInternet","tlphone","tlgramme","whatsapp"].filter(F=>!n.dejaPresents.includes(F)),"autre"]),V=computed(()=>{if(!T.value||!B.value)return;const F=B.value==="autre"?A.value:B.value;if(F)return{valeur:T.value,type:F}}),D=async()=>{I.value=!0,V.value&&(await x?.profil.sauvegarderContact({type:V.value.type,contact:V.value.valeur}),I.value=!1,O())},O=()=>{C.value=!1,T.value=void 0,A.value=void 0,B.value=void 0};return(F,M)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":M[3]||(M[3]=L=>C.value=L),"max-width":unref(_)?500:300},{activator:withCtx(({props:L})=>[renderSlot(F.$slots,"activator",normalizeProps(guardReactiveProps({props:L})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("membres.nouvelleInfoContact.titre")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$m,[createVNode(VIcon,{color:"warning",icon:"mdi-alert-circle-outline"}),createTextVNode(" "+toDisplayString$1(unref(E)("membres.nouvelleInfoContact.avertissement")),1)]),createVNode(VSelect,{modelValue:B.value,"onUpdate:modelValue":M[0]||(M[0]=L=>B.value=L),variant:"outlined",items:N.value,label:unref(E)("membres.nouvelleInfoContact.indiceType")},{item:withCtx(({item:L,props:j})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(j)),{prepend:withCtx(()=>[createVNode(VIcon,{icon:unref(obtIcneContact)({type:L.title})},null,8,["icon"])]),title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)(`membres.contact.${L.title}`)),1)]),_:2},1040)]),selection:withCtx(({item:L})=>[createVNode(VIcon,{icon:unref(obtIcneContact)({type:L.title}),start:""},null,8,["icon"]),createTextVNode(" "+toDisplayString$1(unref(E)(`membres.contact.${L.title}`)),1)]),_:1},8,["modelValue","items","label"]),createVNode(VExpandTransition,null,{default:withCtx(()=>[withDirectives(createVNode(VTextField,{modelValue:A.value,"onUpdate:modelValue":M[1]||(M[1]=L=>A.value=L),label:unref(E)("membres.nouvelleInfoContact.indiceAutreType"),variant:"outlined"},null,8,["modelValue","label"]),[[vShow,B.value==="autre"]])]),_:1}),createVNode(VTextField,{modelValue:T.value,"onUpdate:modelValue":M[2]||(M[2]=L=>T.value=L),variant:"outlined",disabled:!B.value,label:unref(E)("membres.nouvelleInfoContact.valeur"),"prepend-inner-icon":B.value?unref(obtIcneContact)({type:B.value}):void 0},null,8,["modelValue","disabled","label","prepend-inner-icon"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:O},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1}),createVNode(VBtn,{variant:"outlined",color:"primary",disabled:!V.value,loading:I.value,onClick:D},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1})]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_hoisted_1$l={class:"mb-4"},_sfc_main$P=defineComponent$1({__name:"ModifierInfoContactMembre",props:{type:{},valeurAvant:{}},setup(r){const n=r,{mdAndUp:_}=useDisplay(),x=inject$1("constl"),{useI18n:S}=_(),{t:E}=S(),C=ref$1(!1),T=ref$1(n.valeurAvant),B=ref$1(!1);watchEffect(()=>{T.value=n.valeurAvant});const A=computed(()=>{if(T.value)return{valeur:T.value,type:n.type}}),I=async()=>{B.value=!0,A.value&&(await N(),await x?.profil.sauvegarderContact({type:A.value.type,contact:A.value.valeur}),B.value=!1,V())},N=async()=>{await x?.profil.effacerContact({type:n.type,contact:n.valeurAvant})},V=()=>{C.value=!1,T.value=n.valeurAvant};return(D,O)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":O[1]||(O[1]=F=>C.value=F),"max-width":unref(_)?500:300},{activator:withCtx(({props:F})=>[renderSlot(D.$slots,"activator",normalizeProps(guardReactiveProps({props:F})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("membres.modifierInfoContact.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"small",onClick:V})]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$l,[createVNode(VIcon,{color:"warning",icon:"mdi-alert-circle-outline"}),createTextVNode(" "+toDisplayString$1(unref(E)("membres.nouvelleInfoContact.avertissement")),1)]),createVNode(VTextField,{modelValue:T.value,"onUpdate:modelValue":O[0]||(O[0]=F=>T.value=F),variant:"outlined",label:unref(E)("membres.nouvelleInfoContact.valeur"),"prepend-inner-icon":D.type?unref(obtIcneContact)({type:D.type}):void 0},null,8,["modelValue","label","prepend-inner-icon"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",color:"error",onClick:N},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.effacer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-delete")]),_:1})]),_:1}),createVNode(VBtn,{variant:"outlined",color:"primary",disabled:!A.value,loading:B.value,onClick:I},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1})]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),VTabs$1="",VTab$1="",VTabsSymbol=Symbol.for("vuetify:v-tabs"),makeVTabProps=propsFactory({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...omit(makeVBtnProps({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),VTab=genericComponent()({name:"VTab",props:makeVTabProps(),setup(r,n){let{slots:_,attrs:x}=n;const{textColorClasses:S,textColorStyles:E}=useTextColor(r,"sliderColor"),C=computed(()=>r.direction==="horizontal"),T=shallowRef(!1),B=ref$1(),A=ref$1();function I(N){let{value:V}=N;if(T.value=V,V){const D=B.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),O=A.value;if(!D||!O)return;const F=getComputedStyle(D).color,M=D.getBoundingClientRect(),L=O.getBoundingClientRect(),j=C.value?"x":"y",q=C.value?"X":"Y",H=C.value?"right":"bottom",X=C.value?"width":"height",J=M[j],Z=L[j],ae=J>Z?M[H]-L[H]:M[j]-L[j],ce=Math.sign(ae)>0?C.value?"right":"bottom":Math.sign(ae)<0?C.value?"left":"top":"center",pe=(Math.abs(ae)+(Math.sign(ae)<0?M[X]:L[X]))/Math.max(M[X],L[X]),G=M[X]/L[X],Y=1.5;animate(O,{backgroundColor:[F,"currentcolor"],transform:[`translate${q}(${ae}px) scale${q}(${G})`,`translate${q}(${ae/Y}px) scale${q}(${(pe-1)/Y+1})`,"none"],transformOrigin:Array(3).fill(ce)},{duration:225,easing:standardEasing})}}return useRender(()=>{const[N]=VBtn.filterProps(r);return createVNode(VBtn,mergeProps({symbol:VTabsSymbol,ref:B,class:["v-tab",r.class],style:r.style,tabindex:T.value?0:-1,role:"tab","aria-selected":String(T.value),active:!1,block:r.fixed,maxWidth:r.fixed?300:void 0,rounded:0},N,x,{"onGroup:selected":I}),{default:()=>[_.default?.()??r.text,!r.hideSlider&&createVNode("div",{ref:A,class:["v-tab__slider",S.value],style:E.value},null)]})}),{}}}),VSlideGroup$1="";function bias(r){const _=Math.abs(r);return Math.sign(r)*(_/((1/.501-2)*(1-_)+1))}function calculateUpdatedOffset(r){let{selectedElement:n,containerSize:_,contentSize:x,isRtl:S,currentScrollOffset:E,isHorizontal:C}=r;const T=C?n.clientWidth:n.clientHeight,B=C?n.offsetLeft:n.offsetTop,A=S&&C?x-B-T:B,I=_+E,N=T+A,V=T*.4;return A<=E?E=Math.max(A-V,0):I<=N&&(E=Math.min(E-(I-N-V),x-_)),E}function calculateCenteredOffset(r){let{selectedElement:n,containerSize:_,contentSize:x,isRtl:S,isHorizontal:E}=r;const C=E?n.clientWidth:n.clientHeight,T=E?n.offsetLeft:n.offsetTop,B=S&&E?x-T-C/2-_/2:T+C/2-_/2;return Math.min(x-_,Math.max(0,B))}const VSlideGroupSymbol=Symbol.for("vuetify:v-slide-group"),makeVSlideGroupProps=propsFactory({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:VSlideGroupSymbol},nextIcon:{type:IconValue,default:"$next"},prevIcon:{type:IconValue,default:"$prev"},showArrows:{type:[Boolean,String],validator:r=>typeof r=="boolean"||["always","desktop","mobile"].includes(r)},...makeComponentProps(),...makeTagProps(),...makeGroupProps({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),VSlideGroup=genericComponent()({name:"VSlideGroup",props:makeVSlideGroupProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{slots:_}=n;const{isRtl:x}=useRtl(),{mobile:S}=useDisplay(),E=useGroup(r,r.symbol),C=shallowRef(!1),T=shallowRef(0),B=shallowRef(0),A=shallowRef(0),I=computed(()=>r.direction==="horizontal"),{resizeRef:N,contentRect:V}=useResizeObserver(),{resizeRef:D,contentRect:O}=useResizeObserver(),F=computed(()=>E.selected.value.length?E.items.value.findIndex(ne=>ne.id===E.selected.value[0]):-1),M=computed(()=>E.selected.value.length?E.items.value.findIndex(ne=>ne.id===E.selected.value[E.selected.value.length-1]):-1);if(IN_BROWSER){let ne=-1;watch(()=>[E.selected.value,V.value,O.value,I.value],()=>{cancelAnimationFrame(ne),ne=requestAnimationFrame(()=>{if(V.value&&O.value){const te=I.value?"width":"height";B.value=V.value[te],A.value=O.value[te],C.value=B.value+1<A.value}if(F.value>=0&&D.value){const te=D.value.children[M.value];F.value===0||!C.value?T.value=0:r.centerActive?T.value=calculateCenteredOffset({selectedElement:te,containerSize:B.value,contentSize:A.value,isRtl:x.value,isHorizontal:I.value}):C.value&&(T.value=calculateUpdatedOffset({selectedElement:te,containerSize:B.value,contentSize:A.value,isRtl:x.value,currentScrollOffset:T.value,isHorizontal:I.value}))}})})}const L=shallowRef(!1);let j=0,q=0;function H(ne){const te=I.value?"clientX":"clientY";q=(x.value&&I.value?-1:1)*T.value,j=ne.touches[0][te],L.value=!0}function X(ne){if(!C.value)return;const te=I.value?"clientX":"clientY",K=x.value&&I.value?-1:1;T.value=K*(q+j-ne.touches[0][te])}function J(ne){const te=A.value-B.value;T.value<0||!C.value?T.value=0:T.value>=te&&(T.value=te),L.value=!1}function Z(){N.value&&(N.value[I.value?"scrollLeft":"scrollTop"]=0)}const ae=shallowRef(!1);function ce(ne){if(ae.value=!0,!(!C.value||!D.value)){for(const te of ne.composedPath())for(const K of D.value.children)if(K===te){T.value=calculateUpdatedOffset({selectedElement:K,containerSize:B.value,contentSize:A.value,isRtl:x.value,currentScrollOffset:T.value,isHorizontal:I.value});return}}}function ve(ne){ae.value=!1}function pe(ne){!ae.value&&!(ne.relatedTarget&&D.value?.contains(ne.relatedTarget))&&Y()}function G(ne){D.value&&(I.value?ne.key==="ArrowRight"?Y(x.value?"prev":"next"):ne.key==="ArrowLeft"&&Y(x.value?"next":"prev"):ne.key==="ArrowDown"?Y("next"):ne.key==="ArrowUp"&&Y("prev"),ne.key==="Home"?Y("first"):ne.key==="End"&&Y("last"))}function Y(ne){if(D.value)if(!ne)focusableChildren(D.value)[0]?.focus();else if(ne==="next"){const te=D.value.querySelector(":focus")?.nextElementSibling;te?te.focus():Y("first")}else if(ne==="prev"){const te=D.value.querySelector(":focus")?.previousElementSibling;te?te.focus():Y("last")}else ne==="first"?D.value.firstElementChild?.focus():ne==="last"&&D.value.lastElementChild?.focus()}function U(ne){const te=T.value+(ne==="prev"?-1:1)*B.value;T.value=clamp(te,0,A.value-B.value)}const W=computed(()=>{let ne=T.value>A.value-B.value?-(A.value-B.value)+bias(A.value-B.value-T.value):-T.value;T.value<=0&&(ne=bias(-T.value));const te=x.value&&I.value?-1:1;return{transform:`translate${I.value?"X":"Y"}(${te*ne}px)`,transition:L.value?"none":"",willChange:L.value?"transform":""}}),ee=computed(()=>({next:E.next,prev:E.prev,select:E.select,isSelected:E.isSelected})),re=computed(()=>{switch(r.showArrows){case"always":return!0;case"desktop":return!S.value;case!0:return C.value||Math.abs(T.value)>0;case"mobile":return S.value||C.value||Math.abs(T.value)>0;default:return!S.value&&(C.value||Math.abs(T.value)>0)}}),oe=computed(()=>Math.abs(T.value)>0),ie=computed(()=>A.value>Math.abs(T.value)+B.value);return useRender(()=>createVNode(r.tag,{class:["v-slide-group",{"v-slide-group--vertical":!I.value,"v-slide-group--has-affixes":re.value,"v-slide-group--is-overflowing":C.value},r.class],style:r.style,tabindex:ae.value||E.selected.value.length?-1:0,onFocus:pe},{default:()=>[re.value&&createVNode("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!oe.value}],onClick:()=>U("prev")},[_.prev?.(ee.value)??createVNode(VFadeTransition,null,{default:()=>[createVNode(VIcon,{icon:x.value?r.nextIcon:r.prevIcon},null)]})]),createVNode("div",{key:"container",ref:N,class:"v-slide-group__container",onScroll:Z},[createVNode("div",{ref:D,class:"v-slide-group__content",style:W.value,onTouchstartPassive:H,onTouchmovePassive:X,onTouchendPassive:J,onFocusin:ce,onFocusout:ve,onKeydown:G},[_.default?.(ee.value)])]),re.value&&createVNode("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!ie.value}],onClick:()=>U("next")},[_.next?.(ee.value)??createVNode(VFadeTransition,null,{default:()=>[createVNode(VIcon,{icon:x.value?r.prevIcon:r.nextIcon},null)]})])]})),{selected:E.selected,scrollTo:U,scrollOffset:T,focus:Y}}});function parseItems(r){return r?r.map(n=>typeof n=="string"?{title:n,value:n}:n):[]}const makeVTabsProps=propsFactory({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...makeVSlideGroupProps({mandatory:"force"}),...makeDensityProps(),...makeTagProps()},"VTabs"),VTabs=genericComponent()({name:"VTabs",props:makeVTabsProps(),emits:{"update:modelValue":r=>!0},setup(r,n){let{slots:_}=n;const x=useProxiedModel(r,"modelValue"),S=computed(()=>parseItems(r.items)),{densityClasses:E}=useDensity(r),{backgroundColorClasses:C,backgroundColorStyles:T}=useBackgroundColor(toRef(r,"bgColor"));return provideDefaults({VTab:{color:toRef(r,"color"),direction:toRef(r,"direction"),stacked:toRef(r,"stacked"),fixed:toRef(r,"fixedTabs"),sliderColor:toRef(r,"sliderColor"),hideSlider:toRef(r,"hideSlider")}}),useRender(()=>{const[B]=VSlideGroup.filterProps(r);return createVNode(VSlideGroup,mergeProps(B,{modelValue:x.value,"onUpdate:modelValue":A=>x.value=A,class:["v-tabs",`v-tabs--${r.direction}`,`v-tabs--align-tabs-${r.alignTabs}`,{"v-tabs--fixed-tabs":r.fixedTabs,"v-tabs--grow":r.grow,"v-tabs--stacked":r.stacked},E.value,C.value,r.class],style:[{"--v-tabs-height":convertToUnit(r.height)},T.value,r.style],role:"tablist",symbol:VTabsSymbol}),{default:()=>[_.default?_.default():S.value.map(A=>createVNode(VTab,mergeProps(A,{key:A.title}),null))]})}),{}}}),_hoisted_1$k={class:"mb-2"},_sfc_main$O=defineComponent$1({__name:"PageCompte",setup(r){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{mdAndUp:S}=useDisplay(),E=ref$1();enregistrercoute(n?.suivreIdCompte({f:L=>E.value=L}));const C=ref$1(),T=computed(()=>{if(C.value)return URL.createObjectURL(new Blob([C.value],{type:"image"}))});enregistrercoute(n?.profil.suivreImage({f:L=>C.value=L}));const{obtImageDco:B}=utiliserImagesDco(),A=B("profil"),I=async L=>{L?await n?.profil.sauvegarderImage({image:{content:L.contenu,path:L.fichier}}):await n?.profil.effacerImage()},{traduireNom:N}=utiliserLangues(),V=ref$1({}),D=N(V);enregistrercoute(n?.profil.suivreNoms({f:L=>V.value=L}));const O=async L=>{const{Effacer:j,Ajouter:q}=ajusterTexteTraductible({anciennes:V.value,nouvelles:L});for(const[H,X]of Object.entries(q))await n?.profil.sauvegarderNom({langue:H,nom:X});for(const H of j)await n?.profil.effacerNom({langue:H})},F=ref$1();enregistrercoute(n?.profil.suivreContacts({f:L=>F.value=L}));const M=ref$1("compte");return(L,j)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(x)("pages.compte.titre")},null,8,["titre"]),createVNode(ImageEditable,{"src-image":T.value,"img-defaut":unref(A),"taille-avatar":unref(S)?275:175,editable:!0,"max-taille-image":unref(MAX_TAILLE_IMAGE$4),onImageChangee:j[0]||(j[0]=q=>I(q))},null,8,["src-image","img-defaut","taille-avatar","max-taille-image"]),createBaseVNode("h1",_hoisted_1$k,[createBaseVNode("span",{class:normalizeClass({"text-disabled":!unref(D)})},toDisplayString$1(unref(D)||unref(x)("communs.anonyme")),3),createVNode(_sfc_main$1E,{"indice-nom":unref(x)("listeNomsProfil.indiceNom"),"indice-langue":unref(x)("listeNomsProfil.indiceLangue"),"texte-aucun-nom":unref(x)("listeNomsProfil.texteAucunNom"),"noms-initiaux":V.value,titre:unref(x)("pages.compte.titreDialogueNoms"),"sous-titre":unref(x)("pages.compte.sousTitreDialogueNoms"),"autorisation-modification":"",onAjusterNoms:j[1]||(j[1]=q=>O(q))},{activator:withCtx(({props:q})=>[createVNode(VBtn,mergeProps(q,{icon:"mdi-pencil",variant:"flat"}),null,16)]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre"]),E.value?(openBlock(),createBlock(_sfc_main$1Y,{key:0,id:E.value},null,8,["id"])):createCommentVNode("",!0)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(F.value||[],({type:q,contact:H})=>(openBlock(),createBlock(_sfc_main$P,{key:H+"|"+q,type:q,"valeur-avant":H},{activator:withCtx(({props:X})=>[createVNode(_sfc_main$1J,mergeProps(X,{type:q,contact:H}),null,16,["type","contact"])]),_:2},1032,["type","valeur-avant"]))),128)),createVNode(_sfc_main$Q,{"deja-presents":Object.keys(F.value||{})},{activator:withCtx(({props:q})=>[createVNode(VChip,mergeProps(q,{class:"mx-2 text-disabled",variant:"outlined",label:"","append-icon":"mdi-plus"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.nouveauContact")),1)]),_:2},1040)]),_:1},8,["deja-presents"]),createVNode(VTabs,{modelValue:M.value,"onUpdate:modelValue":j[2]||(j[2]=q=>M.value=q)},{default:withCtx(()=>[createVNode(VTab,{value:"compte"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.ongletCompte")),1)]),_:1}),createVNode(VTab,{value:"thme"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.ongletThme")),1)]),_:1}),createVNode(VTab,{value:"connexions"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.ongletConnexions")),1)]),_:1})]),_:1},8,["modelValue"]),createVNode(VWindow,{modelValue:M.value,"onUpdate:modelValue":j[3]||(j[3]=q=>M.value=q)},{default:withCtx(()=>[createVNode(VWindowItem,{value:"compte"},{default:withCtx(()=>[createVNode(_sfc_main$R)]),_:1}),createVNode(VWindowItem,{value:"thme"},{default:withCtx(()=>[createVNode(_sfc_main$W)]),_:1}),createVNode(VWindowItem,{value:"connexions"},{default:withCtx(()=>[createVNode(_sfc_main$Z)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),_sfc_main$N=defineComponent$1({__name:"JetonIdObjet",props:{id:{}},setup(r){return(n,_)=>(openBlock(),createBlock(VChip,{variant:"outlined"},{append:withCtx(()=>[createVNode(_sfc_main$1Y,{id:n.id},null,8,["id"])]),default:withCtx(()=>[renderSlot(n.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(n.id.slice(7,17)+"..."),1)])]),_:3}))}}),_hoisted_1$j={key:1},_hoisted_2$e={key:1},_hoisted_3$9={key:1},_sfc_main$M=defineComponent$1({__name:"RsultatRechercheBd",props:{rsultat:{}},setup(r){const n=r,_=inject$1("constl"),{traduireNom:x}=utiliserLangues(),{useI18n:S}=_(),{t:E}=S(),C=j=>computed(()=>{const{de:q,info:H}=n.rsultat.rsultatObjectif;if(H.type==="texte"&&q===j)return H}),T=C("nom"),B=C("descr"),A=C("id"),I=j=>computed(()=>{const{de:q,clef:H,info:X}=n.rsultat.rsultatObjectif;if(X.type==="rsultat"&&q===j&&H)return{id:H,info:X}}),N=I("variable"),V=I("motClef"),D=ref$1({}),O=x(D);enregistrercoute(_?.bds.suivreNomsBd({idBd:n.rsultat.id,f:j=>D.value=j}));const F=ref$1({}),M=x(F);enregistrercoute(_?.bds.suivreDescriptionsBd({idBd:n.rsultat.id,f:j=>F.value=j}));const L=ref$1();return enregistrercoute(_?.rseau?.suivreAuteursVariable({idVariable:n.rsultat.id,f:j=>L.value=j})),(j,q)=>(openBlock(),createBlock(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[unref(T)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(T)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1$j,toDisplayString$1(unref(O)||unref(E)("bds.aucunNom")),1))]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[unref(B)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(B)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_2$e,toDisplayString$1(unref(M)||unref(E)("bds.aucuneDescription")),1))]),_:1}),createVNode(_sfc_main$1F,{auteurs:L.value,"n-max":1},null,8,["auteurs"]),createVNode(_sfc_main$N,{id:j.rsultat.id},{default:withCtx(()=>[unref(A)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(A)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_3$9,toDisplayString$1(j.rsultat.id),1))]),_:1},8,["id"]),unref(N)?(openBlock(),createBlock(_sfc_main$1P,{key:0,id:unref(N).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(N).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0),unref(V)?(openBlock(),createBlock(_sfc_main$1n,{key:1,id:unref(V).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(V).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$L=defineComponent$1({__name:"SlecteurBd",props:{multiples:{type:Boolean},interdites:{}},emits:["selectionnee"],setup(r,{emit:n}){const _=r,x=inject$1("constl"),S=ref$1([]);watchEffect(()=>{n("selectionnee",S.value)});const E=ref$1(),C=ref$1(),T=computed(()=>C.value?.filter(B=>!(_.interdites||[]).includes(B.id)));return enregistrerRecherche({requte:E,rfRsultat:C,fRecherche:async({requte:B,nOuProfondeur:A,rfRsultat:I})=>await x?.recherche.rechercherBdsSelonTexte({texte:B,f:N=>I.value=N,nRsultatsDsirs:A}),fRechercheDfaut:async({nOuProfondeur:B,rfRsultat:A})=>await x?.recherche.rechercherBds({f:I=>A.value=I,nRsultatsDsirs:B})}),(B,A)=>(openBlock(),createBlock(VAutocomplete,{modelValue:S.value,"onUpdate:modelValue":A[0]||(A[0]=I=>S.value=I),search:E.value,"onUpdate:search":A[1]||(A[1]=I=>E.value=I),items:T.value,multiple:B.multiples},{item:withCtx(({item:I})=>[createVNode(_sfc_main$M,{rsultat:I.raw},null,8,["rsultat"])]),_:1},8,["modelValue","search","items","multiple"]))}}),_hoisted_1$i={key:1},_hoisted_2$d={key:1},_hoisted_3$8={key:1},_sfc_main$K=defineComponent$1({__name:"RsultatRechercheNue",props:{rsultat:{}},setup(r){const n=r,_=inject$1("constl"),{traduireNom:x}=utiliserLangues(),{useI18n:S}=_(),{t:E}=S(),C=j=>computed(()=>{const{de:q,info:H}=n.rsultat.rsultatObjectif;if(H.type==="texte"&&q===j)return H}),T=C("nom"),B=C("descr"),A=C("id"),I=j=>computed(()=>{const{de:q,clef:H,info:X}=n.rsultat.rsultatObjectif;if(X.type==="rsultat"&&q===j&&H)return{id:H,info:X}}),N=I("variable"),V=I("motClef"),D=ref$1({}),O=x(D);enregistrercoute(_?.nues.suivreNomsNue({idNue:n.rsultat.id,f:j=>D.value=j}));const F=ref$1({}),M=x(F);enregistrercoute(_?.nues.suivreDescriptionsNue({idNue:n.rsultat.id,f:j=>F.value=j}));const L=ref$1();return enregistrercoute(_?.rseau?.suivreAuteursVariable({idVariable:n.rsultat.id,f:j=>L.value=j})),(j,q)=>(openBlock(),createBlock(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[unref(T)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(T)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1$i,toDisplayString$1(unref(O)||unref(E)("nues.aucunNom")),1))]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[unref(B)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(B)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_2$d,toDisplayString$1(unref(M)||unref(E)("nues.aucuneDescription")),1))]),_:1}),createVNode(_sfc_main$1F,{auteurs:L.value,"n-max":1},null,8,["auteurs"]),createVNode(_sfc_main$N,{id:j.rsultat.id},{default:withCtx(()=>[unref(A)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(A)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_3$8,toDisplayString$1(j.rsultat.id),1))]),_:1},8,["id"]),unref(N)?(openBlock(),createBlock(_sfc_main$1P,{key:0,id:unref(N).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(N).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0),unref(V)?(openBlock(),createBlock(_sfc_main$1n,{key:1,id:unref(V).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(V).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$J=defineComponent$1({__name:"SlecteurNue",emits:["selectionnee"],setup(r,{emit:n}){const _=inject$1("constl"),x=ref$1();watchEffect(()=>{n("selectionnee",x.value)});const S=ref$1(),E=ref$1();return enregistrerRecherche({requte:S,rfRsultat:E,fRecherche:async({requte:C,nOuProfondeur:T,rfRsultat:B})=>await _?.recherche.rechercherNuesSelonTexte({texte:C,f:A=>B.value=A,nRsultatsDsirs:T}),fRechercheDfaut:async({nOuProfondeur:C,rfRsultat:T})=>await _?.recherche.rechercherNues({f:B=>T.value=B,nRsultatsDsirs:C})}),(C,T)=>(openBlock(),createBlock(VAutocomplete,{modelValue:x.value,"onUpdate:modelValue":T[0]||(T[0]=B=>x.value=B),search:S.value,"onUpdate:search":T[1]||(T[1]=B=>S.value=B),items:E.value},{item:withCtx(({item:B})=>[createVNode(_sfc_main$K,{rsultat:B.raw},null,8,["rsultat"])]),_:1},8,["modelValue","search","items"]))}}),_hoisted_1$h={key:1},_hoisted_2$c={key:1},_hoisted_3$7={key:1},_sfc_main$I=defineComponent$1({__name:"RsultatRechercheMotClef",props:{rsultat:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{traduireNom:S}=utiliserLangues(),{t:E}=x(),C=computed(()=>n.rsultat.rsultatObjectif.de),T=ref$1({}),B=S(T);enregistrercoute(_?.motsClefs.suivreNomsMotClef({idMotClef:n.rsultat.id,f:V=>T.value=V}));const A=ref$1({}),I=S(A);enregistrercoute(_?.motsClefs.suivreDescriptionsMotClef({idMotClef:n.rsultat.id,f:V=>A.value=V}));const N=ref$1();return enregistrercoute(_?.rseau?.suivreAuteursMotClef({idMotClef:n.rsultat.id,f:V=>N.value=V})),(V,D)=>(openBlock(),createBlock(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[C.value==="nom"?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:V.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1$h,toDisplayString$1(unref(B)||unref(E)("motsClefs.aucunNom")),1))]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[C.value==="descr"?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:V.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_2$c,toDisplayString$1(unref(I)||unref(E)("motsClefs.aucunNom")),1))]),_:1}),createVNode(_sfc_main$1F,{auteurs:N.value,"n-max":1},null,8,["auteurs"]),createVNode(_sfc_main$N,{id:V.rsultat.id},{default:withCtx(()=>[C.value==="id"?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:V.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_3$7,toDisplayString$1(V.rsultat.id),1))]),_:1},8,["id"])]),_:1}))}}),_sfc_main$H=defineComponent$1({__name:"SlecteurMotClef",props:{multiples:{type:Boolean},interdites:{}},emits:["selectionnee"],setup(r,{emit:n}){const _=r,x=inject$1("constl"),S=ref$1([]);watchEffect(()=>{n("selectionnee",S.value)});const E=ref$1(),C=ref$1(),T=computed(()=>C.value?.filter(B=>!(_.interdites||[]).includes(B.id)));return enregistrerRecherche({requte:E,rfRsultat:C,fRecherche:async({requte:B,nOuProfondeur:A,rfRsultat:I})=>await x?.recherche.rechercherMotsClefsSelonTexte({texte:B,f:N=>I.value=N,nRsultatsDsirs:A}),fRechercheDfaut:async({nOuProfondeur:B,rfRsultat:A})=>await x?.recherche.rechercherMotsClefs({f:I=>A.value=I,nRsultatsDsirs:B})}),(B,A)=>(openBlock(),createBlock(VAutocomplete,{modelValue:S.value,"onUpdate:modelValue":A[0]||(A[0]=I=>S.value=I),search:E.value,"onUpdate:search":A[1]||(A[1]=I=>E.value=I),items:T.value,multiple:B.multiples},{item:withCtx(({item:I})=>[createVNode(_sfc_main$I,{rsultat:I.raw},null,8,["rsultat"])]),_:1},8,["modelValue","search","items","multiple"]))}}),_hoisted_1$g={class:"text-center"},_hoisted_2$b={class:"text-h6 font-weight-light mb-2"},_sfc_main$G=defineComponent$1({__name:"NouveauTableau",props:{importationPermise:{type:Boolean}},emits:["sauvegarder"],setup(r,{emit:n}){const _=r,{mdAndUp:x}=useDisplay(),{useI18n:S}=_(),{t:E}=S(),C=ref$1(!1),T=ref$1(0),B=["noms","importerDonnes","confirmation"],A=computed(()=>{switch(B[T.value]){case"noms":return E("tableaux.nouveau.titreNoms");default:return""}}),I=computed(()=>{switch(B[T.value]){case"noms":return E("tableaux.nouveau.sousTitreNoms");default:return""}}),N=()=>{switch(B[T.value]){case"confirmation":T.value=B.indexOf(_.importationPermise?"importerDonnes":"noms");break;default:T.value--;break}},V=()=>{switch(B[T.value]){case"noms":T.value=B.indexOf(_.importationPermise?"importerDonnes":"confirmation");break;default:T.value++;break}},D=computed(()=>{switch(B[T.value]){case"noms":return{actif:!!Object.keys(F.value).length,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),O=computed(()=>{switch(B[T.value]){case"noms":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),F=ref$1({}),M=H=>{F.value=H},L=ref$1(),j=()=>{n("sauvegarder",{noms:F.value,cols:L.value||[]}),q()},q=()=>{F.value={},L.value=[],T.value=0,C.value=!1};return(H,X)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":X[1]||(X[1]=J=>C.value=J)},{activator:withCtx(({props:J})=>[renderSlot(H.$slots,"activator",normalizeProps(guardReactiveProps({props:J})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto",width:unref(x)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(I.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:T.value,"onUpdate:modelValue":X[0]||(X[0]=J=>T.value=J),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(E)("communs.texteAucunNom"),"indice-langue":unref(E)("communs.indiceLangue"),"indice-nom":unref(E)("communs.indiceNom"),"noms-initiaux":F.value,"autorisation-modification":!0,onAjusterNoms:M},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createTextVNode("  faire ")]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$g,[createBaseVNode("h3",_hoisted_2$b,toDisplayString$1(unref(E)("tableaux.nouveau.texteCrer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",onClick:j},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("tableaux.nouveau.texteBtnCration")),1)]),_:1})])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!O.value.actif,onClick:N},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,O.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!D.value.actif,onClick:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,D.value.visible]])]),_:1})]),_:1},8,["width"])]),_:3},8,["modelValue"]))}}),_sfc_main$F=defineComponent$1({__name:"ItemSpcificationColonne",props:{id:{},idVariable:{},index:{type:Boolean},modificationPermise:{type:Boolean}},emits:["modifier-colonne","effacer-colonne"],setup(r,{emit:n}){const _=()=>n("effacer-colonne");return(x,S)=>(openBlock(),createBlock(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle),createVNode(VSwitch),createVNode(VListItemAction,null,{default:withCtx(()=>[createVNode(VBtn,{icon:"mdi-delete",onClick:_})]),_:1})]),_:1}))}}),_hoisted_1$f={key:1},_hoisted_2$a={key:1},_hoisted_3$6={key:1},_sfc_main$E=defineComponent$1({__name:"RsultatRechercheVariable",props:{rsultat:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{traduireNom:S}=utiliserLangues(),{t:E}=x(),C=computed(()=>n.rsultat.rsultatObjectif.de),T=computed(()=>B.value?icneCatgorieVariable(B.value):"mdi-variable"),B=ref$1();enregistrercoute(_?.variables.suivreCatgorieVariable({idVariable:n.rsultat.id,f:O=>B.value=O}));const A=ref$1({}),I=S(A);enregistrercoute(_?.variables.suivreNomsVariable({idVariable:n.rsultat.id,f:O=>A.value=O}));const N=ref$1({}),V=S(N);enregistrercoute(_?.variables.suivreDescriptionsVariable({idVariable:n.rsultat.id,f:O=>N.value=O}));const D=ref$1();return enregistrercoute(_?.rseau?.suivreAuteursVariable({idVariable:n.rsultat.id,f:O=>D.value=O})),(O,F)=>(openBlock(),createBlock(VListItem,{"prepend-icon":T.value},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[C.value==="nom"?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:O.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1$f,toDisplayString$1(unref(I)||unref(E)("variables.aucunNom")),1))]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[C.value==="descr"?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:O.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_2$a,toDisplayString$1(unref(V)||unref(E)("variables.aucuneDescription")),1))]),_:1}),createVNode(_sfc_main$1F,{auteurs:D.value,"n-max":1},null,8,["auteurs"]),createVNode(_sfc_main$N,{id:O.rsultat.id},{default:withCtx(()=>[C.value==="id"?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:O.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_3$6,toDisplayString$1(O.rsultat.id),1))]),_:1},8,["id"])]),_:1},8,["prepend-icon"]))}}),_hoisted_1$e={class:"text-center"},_hoisted_2$9={class:"text-h6 font-weight-light mb-2"},_sfc_main$D=defineComponent$1({__name:"NouvelleVariable",setup(r){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{mdAndUp:S}=useDisplay(),E=ref$1(!1),C=ref$1(0),T=["catgorie","noms","descriptions","units","confirmation"],B=computed(()=>{switch(T[C.value]){case"catgorie":return x("variables.nouvelle.titreCatgorie");case"noms":return x("variables.nouvelle.titreNoms");case"descriptions":return x("variables.nouvelle.titreDescriptions");case"units":return x("variables.nouvelle.titreUnits");case"confirmation":return x("variables.nouvelle.titreConfirmation");default:return""}}),A=computed(()=>{switch(T[C.value]){case"catgorie":return x("variables.nouvelle.sousTitreCatgorie");case"noms":return x("variables.nouvelle.sousTitreNoms");case"descriptions":return x("variables.nouvelle.sousTitreDescriptions");case"units":return x("variables.nouvelle.sousTitreUnits");case"confirmation":return x("variables.nouvelle.sousTitreConfirmation");default:return""}}),I=()=>{switch(T[C.value]){case"confirmation":C.value=T.indexOf(J.value?"units":"descriptions");break;default:C.value--;break}},N=()=>{switch(T[C.value]){case"descriptions":C.value=T.indexOf(J.value?"units":"confirmation");break;default:C.value++;break}},V=computed(()=>{switch(T[C.value]){case"catgorie":return{actif:!!F.value,visible:!0};case"noms":return{actif:!!Object.keys(L.value).length,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),D=computed(()=>{switch(T[C.value]){case"noms":return{actif:!1,visible:!1};case"confirmation":return{actif:!Z.value,visible:!0};default:return{actif:!0,visible:!0}}}),O=ref$1(!1),F=ref$1(),M=computed(()=>{if(F.value)return{type:O.value?"liste":"simple",catgorie:F.value}}),L=ref$1({}),j=ve=>{L.value=ve},q=ref$1({}),H=ve=>{q.value=ve},X=ref$1(),J=computed(()=>F.value==="numrique"),Z=ref$1(!1),ae=async()=>{if(Z.value=!0,!M.value)return;const ve=await n?.variables.crerVariable({catgorie:M.value});if(!ve)throw new Error("Variable non cre.");await n?.variables.sauvegarderNomsVariable({idVariable:ve,noms:Object.fromEntries(Object.entries(L.value))}),await n?.variables.sauvegarderDescriptionsVariable({idVariable:ve,descriptions:Object.fromEntries(Object.entries(q.value))}),X.value&&await n?.variables.sauvegarderUnitsVariable({idVariable:ve,idUnit:X.value}),ce()},ce=()=>{L.value={},q.value={},C.value=0,Z.value=!1,E.value=!1};return(ve,pe)=>(openBlock(),createBlock(VDialog,{modelValue:E.value,"onUpdate:modelValue":pe[5]||(pe[5]=G=>E.value=G)},{activator:withCtx(({props:G})=>[renderSlot(ve.$slots,"activator",normalizeProps(guardReactiveProps({props:G})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(S)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(B.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:C.value,"onUpdate:modelValue":pe[4]||(pe[4]=G=>C.value=G),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(VSelect,{modelValue:F.value,"onUpdate:modelValue":pe[0]||(pe[0]=G=>F.value=G),items:unref(catgoriesBase),label:unref(x)("variables.nouvelle.catgorie"),variant:"outlined"},{item:withCtx(({item:G,props:Y})=>[createVNode(VListItem,mergeProps(Y,{title:unref(x)(`variables.catgories.${G.raw}`),subtitle:unref(x)(`variables.indicesCatgories.${G.raw}`),"prepend-icon":unref(icneCatgorieVariable)({type:"simple",catgorie:G.raw})||"mdi-variable"}),null,16,["title","subtitle","prepend-icon"])]),_:1},8,["modelValue","items","label"]),createVNode(VCheckbox,{modelValue:O.value,"onUpdate:modelValue":pe[1]||(pe[1]=G=>O.value=G),label:unref(x)("variables.nouvelle.typeListe")},null,8,["modelValue","label"])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("communs.texteAucunNom"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("communs.indiceNom"),"noms-initiaux":L.value,"autorisation-modification":!0,onAjusterNoms:j},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("variables.nouvelle.texteAucuneDescription"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("variables.nouvelle.texteIndiceDescription"),"noms-initiaux":q.value,"autorisation-modification":!0,onAjusterNoms:H},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(VTextField,{modelValue:X.value,"onUpdate:modelValue":pe[2]||(pe[2]=G=>X.value=G),variant:"outlined"},null,8,["modelValue"])]),_:1}),(openBlock(),createBlock(VWindowItem,{key:4},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$e,[createBaseVNode("h3",_hoisted_2$9,toDisplayString$1(unref(x)("variables.nouveau.texteCrer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:Z.value,onClick:pe[3]||(pe[3]=()=>ae())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("variables.nouveau.texteBtnCration")),1)]),_:1},8,["loading"])])])]),_:1}))]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!D.value.actif,onClick:I},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,D.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!V.value.actif,onClick:N},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,V.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$C=defineComponent$1({__name:"SlecteurVariable",props:{interdites:{}},emits:["selectionnee"],setup(r,{emit:n}){const _=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),E=ref$1(),C=ref$1(),T=ref$1();enregistrerRecherche({requte:C,rfRsultat:T,fRecherche:async({requte:A,nOuProfondeur:I,rfRsultat:N})=>await _?.recherche.rechercherVariablesSelonTexte({texte:A,f:V=>N.value=V,nRsultatsDsirs:I}),fRechercheDfaut:async({nOuProfondeur:A,rfRsultat:I})=>await _?.recherche.rechercherVariables({f:N=>I.value=N,nRsultatsDsirs:A})});const B=A=>{n("selectionnee",A)};return(A,I)=>(openBlock(),createBlock(VAutocomplete,{modelValue:E.value,"onUpdate:modelValue":[I[0]||(I[0]=N=>E.value=N),I[2]||(I[2]=N=>B(N))],search:C.value,"onUpdate:search":I[1]||(I[1]=N=>C.value=N),items:T.value?.filter(N=>!(A.interdites||[]).includes(N.id)),variant:"outlined"},{item:withCtx(({item:N,props:V})=>[createVNode(_sfc_main$E,mergeProps(V,{rsultat:N.raw}),null,16,["rsultat"])]),selection:withCtx(({item:N})=>[createVNode(_sfc_main$1P,{id:N.raw.id},null,8,["id"])]),append:withCtx(()=>[createVNode(_sfc_main$D,null,{activator:withCtx(({props:N})=>[createVNode(VBtn,mergeProps(N,{icon:"mdi-plus",variant:"flat"}),null,16)]),_:1})]),"no-data":withCtx(()=>[createVNode(_sfc_main$D,null,{activator:withCtx(({props:N})=>[createVNode(VListItem,mergeProps(N,{"prepend-icon":"mdi-plus",title:unref(S)("variables.slecteur.aucuneRetrouve"),subtitle:unref(S)("variables.slecteur.nouvelle")}),null,16,["title","subtitle"])]),_:1})]),_:1},8,["modelValue","search","items"]))}}),_sfc_main$B=defineComponent$1({__name:"SlecteurTableau",props:{idBd:{}},emits:["selectionnee"],setup(r,{emit:n}){const _=r,x=inject$1("constl"),S=ref$1();let E;watchEffect(async()=>{E&&await E(),_.idBd?E=await enregistrercoute(x?.bds.suivreTableauxBd({idBd:_.idBd,f:T=>S.value=T})):S.value=void 0});const C=ref$1();return watchEffect(()=>{n("selectionnee",C.value)}),(T,B)=>{const A=resolveComponent("jeton-tableau");return openBlock(),createBlock(VSelect,{modelValue:C.value,"onUpdate:modelValue":B[0]||(B[0]=I=>C.value=I),loading:!S.value,disabled:!S.value,items:S.value,"item-value":"id","item-title":"id"},{selection:withCtx(({item:I})=>[createVNode(A,{id:I.value},null,8,["id"])]),item:withCtx(({item:I})=>[createVNode(_sfc_main$1l,{id:I.value},null,8,["id"])]),_:1},8,["modelValue","loading","disabled","items"])}}}),_sfc_main$A=defineComponent$1({__name:"SlecteurColonne",props:{idTableau:{},tableauChangeable:{type:Boolean}},emits:["selectionnee"],setup(r,{emit:n}){const _=r,x=inject$1("constl"),{useI18n:S}=_(),{t:E}=S(),{mdAndUp:C}=useDisplay(),T=ref$1(!1),B=ref$1(_.idTableau?1:0),A=["Tableau","Colonne"],I=computed(()=>{switch(A[B.value]){case"Tableau":return E("tableaux.colonnes.slecteur.titreTableau");case"Colonne":return E("tableaux.colonnes.slecteur.titreColonne");default:return""}}),N=computed(()=>{switch(A[B.value]){case"Tableau":return E("tableaux.colonnes.slecteur.sousTitreTableau");case"Colonne":return E("tableaux.colonnes.slecteur.sousTitreColonne");default:return""}}),V=()=>{switch(A[B.value]){case"Colonne":J();break;default:B.value++;break}},D=()=>{switch(A[B.value]){default:B.value--;break}},O=computed(()=>{switch(A[B.value]){case"Tableau":return{actif:!!L.value,visible:!0};case"Colonne":return{actif:!!j.value,visible:!0};default:return{actif:!0,visible:!0}}}),F=computed(()=>{switch(A[B.value]){case"Tableau":return{actif:!1,visible:!1};case"Colonne":return{actif:_.tableauChangeable,visible:_.tableauChangeable};default:return{actif:!0,visible:!0}}}),M=ref$1(),L=ref$1(_.idTableau),j=ref$1(),q=ref$1();let H;const X=async Z=>{H&&await H(),Z?H=await enregistrercoute(x?.tableaux.suivreColonnesTableau({idTableau:Z,f:ae=>q.value=ae})):q.value=void 0};watchEffect(async()=>{await X(L.value)});const J=()=>{j.value&&L.value&&n("selectionnee",{idTableau:L.value,idColonne:j.value})};return(Z,ae)=>{const ce=resolveComponent("ItemColonneTableau"),ve=resolveComponent("JetonColonneTableau");return openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":ae[4]||(ae[4]=pe=>T.value=pe)},{activator:withCtx(({props:pe})=>[renderSlot(Z.$slots,"activator",normalizeProps(guardReactiveProps({props:pe})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(C)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(I.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(N.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:B.value,"onUpdate:modelValue":ae[3]||(ae[3]=pe=>B.value=pe),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(_sfc_main$L,{multiples:!1,onSelectionnee:ae[0]||(ae[0]=pe=>M.value=pe[0])}),createVNode(_sfc_main$B,{"id-bd":M.value,onSelectionnee:ae[1]||(ae[1]=pe=>L.value=pe)},null,8,["id-bd"])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(VSelect,{modelValue:j.value,"onUpdate:modelValue":ae[2]||(ae[2]=pe=>j.value=pe),items:q.value},{item:withCtx(({item:pe})=>[createVNode(ce,{info:pe.raw},null,8,["info"])]),selection:withCtx(({item:pe})=>[createVNode(ve,{info:pe.raw},null,8,["info"])]),_:1},8,["modelValue","items"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!F.value.actif,onClick:D},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,F.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!O.value.actif,onClick:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,O.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"])}}}),VCombobox$1="";function highlightResult(r,n,_){if(n==null)return r;if(Array.isArray(n))throw new Error("Multiple matches is not implemented");return typeof n=="number"&&~n?createVNode(Fragment,null,[createVNode("span",{class:"v-combobox__unmask"},[r.substr(0,n)]),createVNode("span",{class:"v-combobox__mask"},[r.substr(n,_)]),createVNode("span",{class:"v-combobox__unmask"},[r.substr(n+_)])]):r}const makeVComboboxProps=propsFactory({autoSelectFirst:{type:[Boolean,String]},delimiters:Array,...makeFilterProps({filterKeys:["title"]}),...makeSelectProps({hideNoData:!0,returnObject:!0}),...omit(makeVTextFieldProps({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...makeTransitionProps$1({transition:!1})},"VCombobox"),VCombobox=genericComponent()({name:"VCombobox",props:makeVComboboxProps(),emits:{"update:focused":r=>!0,"update:modelValue":r=>!0,"update:search":r=>!0,"update:menu":r=>!0},setup(r,n){let{emit:_,slots:x}=n;const{t:S}=useLocale(),E=ref$1(),C=shallowRef(!1),T=shallowRef(!0),B=shallowRef(!1),A=ref$1(),I=ref$1(),N=useProxiedModel(r,"menu"),V=computed({get:()=>N.value,set:Ne=>{N.value&&!Ne&&A.value?.openChildren||(N.value=Ne)}}),D=shallowRef(-1);let O=!1;const F=computed(()=>E.value?.color),M=computed(()=>V.value?r.closeText:r.openText),{items:L,transformIn:j,transformOut:q}=useItems(r),{textColorClasses:H,textColorStyles:X}=useTextColor(F),J=useProxiedModel(r,"modelValue",[],Ne=>j(wrapInArray(Ne)),Ne=>{const Te=q(Ne);return r.multiple?Te:Te[0]??null}),Z=useForm(),ae=shallowRef(r.multiple?"":J.value[0]?.title??""),ce=computed({get:()=>ae.value,set:Ne=>{if(ae.value=Ne,r.multiple||(J.value=[transformItem$2(r,Ne)]),Ne&&r.multiple&&r.delimiters?.length){const Te=Ne.split(new RegExp(`(?:${r.delimiters.join("|")})+`));Te.length>1&&(Te.forEach(he=>{he=he.trim(),he&&ge(transformItem$2(r,he))}),ae.value="")}Ne||(D.value=-1),T.value=!Ne}});watch(ae,Ne=>{O?nextTick$2(()=>O=!1):C.value&&!V.value&&(V.value=!0),_("update:search",Ne)}),watch(J,Ne=>{r.multiple||(ae.value=Ne[0]?.title??"")});const{filteredItems:ve,getMatches:pe}=useFilter(r,L,()=>T.value?"":ce.value),G=computed(()=>J.value.map(Ne=>L.value.find(Te=>{const he=getPropertyFromItem(Te.raw,r.itemValue),xe=getPropertyFromItem(Ne.raw,r.itemValue);return he===void 0||xe===void 0?!1:r.returnObject?r.valueComparator(he,xe):r.valueComparator(Te.value,Ne.value)})||Ne)),Y=computed(()=>r.hideSelected?ve.value.filter(Ne=>!G.value.some(Te=>Te.value===Ne.value)):ve.value),U=computed(()=>G.value.map(Ne=>Ne.props.value)),W=computed(()=>G.value[D.value]),ee=computed(()=>(r.autoSelectFirst===!0||r.autoSelectFirst==="exact"&&ce.value===Y.value[0]?.title)&&Y.value.length>0&&!T.value&&!B.value),re=computed(()=>r.hideNoData&&!L.value.length||r.readonly||Z?.isReadonly.value),oe=ref$1(),{onListScroll:ie,onListKeydown:ne}=useScrolling(oe,E);function te(Ne){O=!0,r.openOnClear&&(V.value=!0)}function K(){re.value||(V.value=!0)}function le(Ne){re.value||(C.value&&(Ne.preventDefault(),Ne.stopPropagation()),V.value=!V.value)}function ue(Ne){if(r.readonly||Z?.isReadonly.value)return;const Te=E.value.selectionStart,he=U.value.length;if((D.value>-1||["Enter","ArrowDown","ArrowUp"].includes(Ne.key))&&Ne.preventDefault(),["Enter","ArrowDown"].includes(Ne.key)&&(V.value=!0),["Escape"].includes(Ne.key)&&(V.value=!1),["Enter","Escape","Tab"].includes(Ne.key)&&(ee.value&&["Enter","Tab"].includes(Ne.key)&&ge(ve.value[0]),T.value=!0),Ne.key==="ArrowDown"&&ee.value&&oe.value?.focus("next"),!!r.multiple){if(["Backspace","Delete"].includes(Ne.key)){if(D.value<0){Ne.key==="Backspace"&&!ce.value&&(D.value=he-1);return}const xe=D.value;W.value&&ge(W.value),D.value=xe>=he-1?he-2:xe}if(Ne.key==="ArrowLeft"){if(D.value<0&&Te>0)return;const xe=D.value>-1?D.value-1:he-1;G.value[xe]?D.value=xe:(D.value=-1,E.value.setSelectionRange(ce.value.length,ce.value.length))}if(Ne.key==="ArrowRight"){if(D.value<0)return;const xe=D.value+1;G.value[xe]?D.value=xe:(D.value=-1,E.value.setSelectionRange(0,0))}Ne.key==="Enter"&&ce.value&&(ge(transformItem$2(r,ce.value)),ce.value="")}}function be(){C.value&&(T.value=!0,E.value?.focus())}function ge(Ne){if(r.multiple){const Te=U.value.findIndex(he=>r.valueComparator(he,Ne.value));if(Te===-1)J.value=[...J.value,Ne];else{const he=[...J.value];he.splice(Te,1),J.value=he}ce.value=""}else J.value=[Ne],ae.value=Ne.title,nextTick$2(()=>{V.value=!1,T.value=!0})}function ye(Ne){C.value=!0,setTimeout(()=>{B.value=!0})}function Ee(Ne){B.value=!1}function Re(Ne){(Ne==null||Ne===""&&!r.multiple)&&(J.value=[])}return watch(ve,Ne=>{!Ne.length&&r.hideNoData&&(V.value=!1)}),watch(C,(Ne,Te)=>{Ne||Ne===Te||(D.value=-1,V.value=!1,ee.value&&!B.value&&!G.value.some(he=>{let{value:xe}=he;return xe===Y.value[0].value})?ge(Y.value[0]):r.multiple&&ce.value&&(J.value=[...J.value,transformItem$2(r,ce.value)],ce.value=""))}),watch(V,()=>{if(!r.hideSelected&&V.value&&G.value.length){const Ne=Y.value.findIndex(Te=>G.value.some(he=>Te.value===he.value));IN_BROWSER&&window.requestAnimationFrame(()=>{Ne>=0&&I.value?.scrollToIndex(Ne)})}}),useRender(()=>{const Ne=!!(r.chips||x.chip),Te=!!(!r.hideNoData||Y.value.length||x["prepend-item"]||x["append-item"]||x["no-data"]),he=J.value.length>0,[xe]=VTextField.filterProps(r);return createVNode(VTextField,mergeProps({ref:E},xe,{modelValue:ce.value,"onUpdate:modelValue":[fe=>ce.value=fe,Re],focused:C.value,"onUpdate:focused":fe=>C.value=fe,validationValue:J.externalValue,dirty:he,class:["v-combobox",{"v-combobox--active-menu":V.value,"v-combobox--chips":!!r.chips,"v-combobox--selection-slot":!!x.selection,"v-combobox--selecting-index":D.value>-1,[`v-combobox--${r.multiple?"multiple":"single"}`]:!0},r.class],style:r.style,readonly:r.readonly,placeholder:he?void 0:r.placeholder,"onClick:clear":te,"onMousedown:control":K,onKeydown:ue}),{...x,default:()=>createVNode(Fragment,null,[createVNode(VMenu,mergeProps({ref:A,modelValue:V.value,"onUpdate:modelValue":fe=>V.value=fe,activator:"parent",contentClass:"v-combobox__content",disabled:re.value,eager:r.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:r.transition,onAfterLeave:be},r.menuProps),{default:()=>[Te&&createVNode(VList,{ref:oe,selected:U.value,selectStrategy:r.multiple?"independent":"single-independent",onMousedown:fe=>fe.preventDefault(),onKeydown:ne,onFocusin:ye,onFocusout:Ee,onScrollPassive:ie,tabindex:"-1",color:r.itemColor??r.color},{default:()=>[x["prepend-item"]?.(),!Y.value.length&&!r.hideNoData&&(x["no-data"]?.()??createVNode(VListItem,{title:S(r.noDataText)},null)),createVNode(VVirtualScroll,{ref:I,renderless:!0,items:Y.value},{default:fe=>{let{item:Be,index:Le,itemRef:Ve}=fe;const Ie=mergeProps(Be.props,{ref:Ve,key:Le,active:ee.value&&Le===0?!0:void 0,onClick:()=>ge(Be)});return x.item?.({item:Be,index:Le,props:Ie})??createVNode(VListItem,Ie,{prepend:Me=>{let{isSelected:He}=Me;return createVNode(Fragment,null,[r.multiple&&!r.hideSelected?createVNode(VCheckboxBtn,{key:Be.value,modelValue:He,ripple:!1,tabindex:"-1"},null):void 0,Be.props.prependIcon&&createVNode(VIcon,{icon:Be.props.prependIcon},null)])},title:()=>T.value?Be.title:highlightResult(Be.title,pe(Be)?.title,ce.value?.length??0)})}}),x["append-item"]?.()]})]}),G.value.map((fe,Be)=>{function Le(Ie){Ie.stopPropagation(),Ie.preventDefault(),ge(fe)}const Ve={"onClick:close":Le,onMousedown(Ie){Ie.preventDefault(),Ie.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return createVNode("div",{key:fe.value,class:["v-combobox__selection",Be===D.value&&["v-combobox__selection--selected",H.value]],style:Be===D.value?X.value:{}},[Ne?x.chip?createVNode(VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:r.closableChips,size:"small",text:fe.title}}},{default:()=>[x.chip?.({item:fe,index:Be,props:Ve})]}):createVNode(VChip,mergeProps({key:"chip",closable:r.closableChips,size:"small",text:fe.title},Ve),null):x.selection?.({item:fe,index:Be})??createVNode("span",{class:"v-combobox__selection-text"},[fe.title,r.multiple&&Be<G.value.length-1&&createVNode("span",{class:"v-combobox__selection-comma"},[createTextVNode(",")])])])})]),"append-inner":function(){for(var fe=arguments.length,Be=new Array(fe),Le=0;Le<fe;Le++)Be[Le]=arguments[Le];return createVNode(Fragment,null,[x["append-inner"]?.(...Be),(!r.hideNoData||r.items.length)&&r.menuIcon?createVNode(VIcon,{class:"v-combobox__menu-icon",icon:r.menuIcon,onMousedown:le,onClick:noop$6,"aria-label":S(M.value),title:S(M.value)},null):void 0])}})}),forwardRefs({isFocused:C,isPristine:T,menu:V,search:ce,selectionIndex:D,filteredItems:ve,select:ge},E)}}),_hoisted_1$d={class:"text-center"},_hoisted_2$8={class:"text-center"},_hoisted_3$5={class:"text-h6 font-weight-light mb-2"},_sfc_main$z=defineComponent$1({__name:"NouvelleRgle",props:{source:{},categorieVariable:{}},emits:["sauvegarder"],setup(r,{emit:n}){const _=r,{useI18n:x}=_(),{t:S}=x(),{mdAndUp:E}=useDisplay(),C=ref$1(!1),T=ref$1(0),B=["TypeRgle","BorneFixeOuDynamique","ValeurBorne","CatgorieFixeOuDynamique","ValeurCatgorie","Confirmer"],A=ref$1(),I=()=>{A.value="existe",T.value=B.indexOf("Confirmer")},N=()=>{A.value="borne",T.value=B.indexOf("BorneFixeOuDynamique")},V=()=>{A.value="catgorique",T.value=B.indexOf("CatgorieFixeOuDynamique")},D=computed(()=>{switch(B[T.value]){case"BorneFixeOuDynamique":return S("rgles.nouvelleRgle.titreBorneFixeOuDynamique");case"CatgorieFixeOuDynamique":return S("rgles.nouvelleRgle.titreCatgorieFixeOuDynamique");case"TypeRgle":return S("rgles.nouvelleRgle.titreTypeRgle");case"Confirmer":return S("rgles.nouvelleRgle.titreConfirmer");case"ValeurBorne":return S("rgles.nouvelleRgle.titreValeurBorne");case"ValeurCatgorie":return S("rgles.nouvelleRgle.titreValeurCatgorie");default:return""}}),O=computed(()=>{switch(B[T.value]){case"BorneFixeOuDynamique":return S("rgles.nouvelleRgle.sousTitreBorneFixeOuDynamique");case"CatgorieFixeOuDynamique":return S("rgles.nouvelleRgle.sousTitreCatgorieFixeOuDynamique");case"TypeRgle":return S("rgles.nouvelleRgle.sousTitreTypeRgle");case"Confirmer":return S("rgles.nouvelleRgle.sousTitreConfirmer");case"ValeurBorne":return S("rgles.nouvelleRgle.sousTitreValeurBorne");case"ValeurCatgorie":return S("rgles.nouvelleRgle.sousTitreValeurCatgorie");default:return""}}),F=()=>{switch(B[T.value]){case"ValeurBorne":T.value=B.indexOf("Confirmer");break;case"ValeurCatgorie":T.value=B.indexOf("Confirmer");break;default:T.value++;break}},M=()=>{switch(B[T.value]){case"BorneFixeOuDynamique":T.value=B.indexOf("TypeRgle");break;case"CatgorieFixeOuDynamique":T.value=B.indexOf("TypeRgle");break;case"Confirmer":T.value=B.indexOf(A.value==="existe"?"TypeRgle":A.value==="borne"?"BorneFixeOuDynamique":"CatgorieFixeOuDynamique");break;default:T.value--;break}},L=computed(()=>{switch(B[T.value]){case"TypeRgle":return{actif:!1,visible:!1};case"BorneFixeOuDynamique":return{actif:!!X.value,visible:!0};case"CatgorieFixeOuDynamique":return{actif:!!pe.value,visible:!0};case"ValeurBorne":return{actif:!!Z.value&&!!(X.value==="fixe"?ae.value:X.value==="dynamiqueColonne"?ve.value:ce.value),visible:!0};case"ValeurCatgorie":return{actif:pe.value==="fixe"?!!G.value:!!Y.value,visible:!1};case"Confirmer":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),j=computed(()=>{switch(B[T.value]){case"TypeRgle":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),q=computed(()=>_.source.type==="tableau"?_.source.idTableau:void 0),H=computed(()=>_.categorieVariable==="numrique"||_.categorieVariable==="horoDatage"),X=ref$1(),J=re=>{X.value=re,F()},Z=ref$1(),ae=ref$1(),ce=ref$1(),ve=ref$1(),pe=ref$1(),G=ref$1(),Y=ref$1(),U=re=>{pe.value=re,F()},W=async re=>{n("sauvegarder",re)},ee=async()=>{if(!A.value)throw new Error("Cheminement non dfini");if(A.value==="existe")await W({typeRgle:"existe",dtails:{}});else if(A.value==="borne"){if(!Z.value)throw new Error("Oprateur borne non dfini");let re;switch(X.value){case"fixe":{if(!ae.value)throw new Error("Valeur borne fixe non dfinie");re={type:"fixe",op:Z.value,val:ae.value};break}case"dynamiqueColonne":{if(!ve.value)throw new Error("Valeur borne dynamique colonne non dfinie");re={type:"dynamiqueColonne",op:Z.value,val:ve.value};break}case"dynamiqueVariable":{if(!ce.value)throw new Error("Valeur borne dynamique variable non dfinie");re={type:"dynamiqueVariable",op:Z.value,val:ce.value};break}default:throw new Error(X.value)}await W({typeRgle:"bornes",dtails:re})}else{let re;switch(pe.value){case"fixe":{if(!G.value)throw new Error("Valeur borne fixe non dfinie");re={type:"fixe",options:G.value};break}case"dynamique":{if(!Y.value)throw new Error("Valeur borne dynamique colonne non dfinie");re={type:"dynamique",...Y.value};break}default:throw new Error(pe.value)}await W({typeRgle:"valeurCatgorique",dtails:re})}};return(re,oe)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":oe[16]||(oe[16]=ie=>C.value=ie)},{activator:withCtx(({props:ie})=>[renderSlot(re.$slots,"activator",normalizeProps(guardReactiveProps({props:ie}))),createVNode(VCard,{class:"mx-auto","max-width":unref(E)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(D.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(O.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:T.value,"onUpdate:modelValue":oe[15]||(oe[15]=ne=>T.value=ne),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$d,[createVNode(VBtn,{class:"ma-3",variant:"flat",color:"primary",onClick:oe[0]||(oe[0]=()=>I())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("rgles.nouvelleRgle.rgleExiste")),1)]),_:1}),createVNode(VBtn,{disabled:!H.value,class:"ma-3",variant:"outlined",onClick:oe[1]||(oe[1]=()=>N())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("rgles.nouvelleRgle.rgleBorne")),1)]),_:1},8,["disabled"]),createVNode(VBtn,{class:"ma-3",variant:"outlined",onClick:oe[2]||(oe[2]=()=>V())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("rgles.nouvelleRgle.rgleCatgorique")),1)]),_:1})])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(VBtn,{class:"ma-3",variant:"outlined",onClick:oe[3]||(oe[3]=()=>J("fixe"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("rgles.nouvelleRgle.borneFixes")),1)]),_:1}),createVNode(VBtn,{class:"ma-3",variant:"outlined",onClick:oe[4]||(oe[4]=()=>J("dynamiqueVariable"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("rgles.nouvelleRgle.borneDynamiqueVariable")),1)]),_:1}),createVNode(VBtn,{class:"ma-3",variant:"outlined",disabled:!q.value,onClick:oe[5]||(oe[5]=()=>J("dynamiqueColonne"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("rgles.nouvelleRgle.borneDynamiqueColonne")),1)]),_:1},8,["disabled"])]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(VSelect,{modelValue:Z.value,"onUpdate:modelValue":oe[6]||(oe[6]=ne=>Z.value=ne),items:[">",">=","<","<="]},null,8,["modelValue"]),X.value==="fixe"?(openBlock(),createBlock(VInput,{key:0,modelValue:ae.value,"onUpdate:modelValue":oe[7]||(oe[7]=ne=>ae.value=ne)},null,8,["modelValue"])):X.value==="dynamiqueVariable"?(openBlock(),createBlock(_sfc_main$C,{key:1,onSelectionnee:oe[8]||(oe[8]=ne=>ce.value=ne)})):X.value==="dynamiqueColonne"?(openBlock(),createBlock(_sfc_main$A,{key:2,"id-tableau":q.value,"tableau-changeable":!1,onSelectionnee:oe[9]||(oe[9]=ne=>ve.value=ne.idColonne)},null,8,["id-tableau"])):createCommentVNode("",!0)]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(VBtn,{class:"ma-3",variant:"outlined",onClick:oe[10]||(oe[10]=()=>U("fixe"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("rgles.nouvelleRgle.catgoriesFixes")),1)]),_:1}),createVNode(VBtn,{class:"ma-3",variant:"outlined",disabled:!q.value,onClick:oe[11]||(oe[11]=()=>U("dynamique"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("rgles.nouvelleRgle.catgoriesDynamique")),1)]),_:1},8,["disabled"])]),_:1}),createVNode(VWindowItem,{value:4},{default:withCtx(()=>[pe.value==="fixe"?(openBlock(),createBlock(VCombobox,{key:0,modelValue:G.value,"onUpdate:modelValue":oe[12]||(oe[12]=ne=>G.value=ne),multiple:"",chips:"",clearable:""},null,8,["modelValue"])):(openBlock(),createBlock(_sfc_main$A,{key:1,"id-tableau":q.value,"tableau-changeable":!0,onSelectionnee:oe[13]||(oe[13]=ne=>Y.value={tableau:ne.idTableau,colonne:ne.idColonne})},null,8,["id-tableau"]))]),_:1}),createVNode(VWindowItem,{value:5},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$8,[createBaseVNode("h3",_hoisted_3$5,toDisplayString$1(unref(S)("rgles.nouvelleRgle.messageConfirmer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",onClick:oe[14]||(oe[14]=()=>ee())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("rgles.nouvelleRgle.confirmer")),1)]),_:1})])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!j.value.actif,onClick:M},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,j.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!L.value.actif,onClick:F},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,L.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$y=defineComponent$1({__name:"NouvelleColonne",props:{idTableau:{},idVariable:{},idColonne:{},variablesInterdites:{}},emits:["nouvelle"],setup(r,{emit:n}){const _=r,{mdAndUp:x}=useDisplay(),{useI18n:S}=_(),{t:E}=S(),C=inject$1("constl"),T=ref$1(!1),B=ref$1(0),A=["variable","index","rgles","confirmation"],I=computed(()=>{switch(A[B.value]){case"variable":return E("colonnes.nouvelle.titreVariable");default:return""}}),N=computed(()=>{switch(A[B.value]){case"variable":return E("colonnes.nouvelle.sousTitreVariable");default:return""}}),V=()=>{switch(A[B.value]){default:B.value++;break}},D=()=>{switch(A[B.value]){default:B.value--;break}},O=computed(()=>{switch(A[B.value]){case"variable":return{actif:!!M.value,visible:!1};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),F=computed(()=>{switch(A[B.value]){case"variable":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),M=ref$1(_.idVariable),L=Y=>M.value=Y,j=ref$1();let q;const H=async Y=>{q&&await q(),Y?q=await enregistrercoute(C?.variables.suivreCatgorieVariable({idVariable:Y,f:U=>j.value=U.catgorie})):j.value=void 0};watchEffect(async()=>{await H(M.value)});const X=ref$1(!1),J=enregistrercouteDynamique({params:{id:M},fcoute:(Y,U)=>C?.variables.suivreRglesVariable({idVariable:Y.id,f:U})}),Z=ref$1([]),ae=Y=>{const U=v4$2();Z.value=[...Z.value,{rgle:Y,id:U}]},ce=Y=>{Z.value=Z.value.filter(U=>U.id!==Y)},ve=computed(()=>M.value?{idVariable:M.value}:void 0),pe=async()=>{if(!ve.value)return;const{idVariable:Y}=ve.value;n("nouvelle",{idVariable:Y,index:X.value,idColonne:_.idColonne,rgles:Z.value}),G()},G=()=>{M.value=void 0,X.value=!1,Z.value=[],T.value=!1};return(Y,U)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":U[4]||(U[4]=W=>T.value=W)},{activator:withCtx(({props:W})=>[renderSlot(Y.$slots,"activator",normalizeProps(guardReactiveProps({props:W})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(x)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(I.value),1),createVNode(VSpacer),createVNode(VBtn,{variant:"flat",size:"small",icon:"mdi-close",onClick:G})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(N.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:B.value,"onUpdate:modelValue":U[3]||(U[3]=W=>B.value=W),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(_sfc_main$C,{interdites:Y.variablesInterdites,onSelectionnee:L},null,8,["interdites"])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(VCheckbox)]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(_sfc_main$z,{source:{type:"tableau",idTableau:Y.idTableau},"categorie-variable":j.value,onSauvegarder:U[0]||(U[0]=W=>ae(W))},{activator:withCtx(({props:W})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(W)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("")),1)]),_:1})]),_:1},16)]),_:1},8,["source","categorie-variable"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(Z.value,W=>(openBlock(),createBlock(_sfc_main$1A,{key:W.id,regle:W,effacable:"",onEffacer:U[1]||(U[1]=()=>ce(W.id))},null,8,["regle"]))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(J),W=>(openBlock(),createBlock(_sfc_main$1A,{key:W.id,regle:W},null,8,["regle"]))),128))]),_:1})]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(VBtn,{variant:"outlined",onClick:U[2]||(U[2]=()=>pe())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!F.value.actif,onClick:D},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,F.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!O.value.actif,onClick:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,O.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$x=defineComponent$1({__name:"ItemSpcificationTableau",props:{clef:{},noms:{},idTableau:{},colonnes:{},modificationPermise:{type:Boolean}},emits:["modifier-noms","nouvelle-colonne","modifier-colonne","effacer-colonne"],setup(r,{emit:n}){const _=r,{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=V=>{n("modifier-noms",V)},T=E(computed(()=>_.noms)),B=computed(()=>_.colonnes.map(V=>V.variable)),A=(V,D)=>{n("modifier-colonne",{idColonne:V,...D})},I=V=>{n("effacer-colonne",V)},N=V=>{n("nouvelle-colonne",V)};return(V,D)=>(openBlock(),createBlock(VListGroup,{value:V.clef},{activator:withCtx(({props:O})=>[createVNode(VListItem,mergeProps(O,{"prepend-icon":"mdi-table"}),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createVNode(_sfc_main$1E,{"indice-nom":unref(S)("listeNomsProfil.indiceNom"),"indice-langue":unref(S)("listeNomsProfil.indiceLangue"),"texte-aucun-nom":unref(S)("listeNomsProfil.texteAucunNom"),titre:unref(S)("tableaux.spcification.titreDialogueNoms"),"sous-titre":unref(S)("tableaux.spcification.sousTitreDialogueNoms"),"noms-initiaux":V.noms,"autorisation-modification":V.modificationPermise,onAjusterNoms:C},{activator:withCtx(({props:F})=>[createBaseVNode("span",normalizeProps(guardReactiveProps(F)),[createTextVNode(toDisplayString$1(unref(T)||unref(S)("communs.baseCarteObjet.sansNom"))+" ",1),createVNode(VBtn,{icon:V.modificationPermise?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","titre","sous-titre","noms-initiaux","autorisation-modification"])]),_:1})]),_:2},1040)]),default:withCtx(()=>[createVNode(_sfc_main$y,{"variables-interdites":B.value,onNouvelle:N},{activator:withCtx(({props:O})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(O)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(" mdi-plus ")]),_:1})]),title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("tableaux.spcification.nouvelleColonne")),1)]),_:2},1040)]),_:1},8,["variables-interdites"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(V.colonnes,O=>(openBlock(),createBlock(_sfc_main$F,{id:O.id,key:O.id,"id-variable":O.variable,index:O.index,"modification-permise":V.modificationPermise,onModifierColonne:F=>A(O.id,F),onEffacerColonne:()=>I(O.id)},null,8,["id","id-variable","index","modification-permise","onModifierColonne","onEffacerColonne"]))),128))]),_:1},8,["value"]))}}),_hoisted_1$c={class:"text-center"},_hoisted_2$7={class:"text-h6 font-weight-light mb-2"},_sfc_main$w=defineComponent$1({__name:"NouvelleBd",setup(r){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),S=useRouter(),{isRtl:E}=useRtl(),{mdAndUp:C}=useDisplay(),T=ref$1(!1),B=ref$1(0),A=["cheminement","gabaritBd","gabaritNue","noms","descriptions","motsClefs","tableaux","licence","confirmation"],I=computed(()=>{switch(A[B.value]){case"cheminement":return x("bds.nouvelle.titreCheminement");case"gabaritBd":return x("bds.nouvelle.titreGabaritBd");case"gabaritNue":return x("bds.nouvelle.titreGabaritNue");case"noms":return x("bds.nouvelle.titreNoms");case"descriptions":return x("bds.nouvelle.titreFescriptions");case"motsClefs":return x("bds.nouvelle.titreMotsClefs");case"licence":return x("bds.nouvelle.titreLicence");case"confirmation":return x("bds.nouvelle.titreConfirmation");default:return""}}),N=computed(()=>{switch(A[B.value]){case"cheminement":return x("bds.nouvelle.sousTitreCheminement");case"gabaritBd":return x("bds.nouvelle.sousTitreGabaritBd");case"gabaritNue":return x("bds.nouvelle.sousTitreGabaritNue");case"noms":return x("bds.nouvelle.sousTitreNoms");case"descriptions":return x("bds.nouvelle.sousTitreFescriptions");case"motsClefs":return x("bds.nouvelle.sousTitreMotsClefs");case"licence":return x("bds.nouvelle.sousTitreLicence");case"confirmation":return x("bds.nouvelle.sousTitreConfirmation");default:return""}}),V=ref$1(),D=ge=>{V.value=ge,B.value=A.indexOf(ge==="bd"?"gabaritBd":"gabaritNue")},O=()=>{V.value="nouvelle",B.value=A.indexOf("noms")},F=()=>{switch(A[B.value]){case"gabaritBd":case"gabaritNue":B.value=A.indexOf("licence");break;default:B.value++;break}},M=()=>{switch(A[B.value]){case"gabaritBd":case"gabaritNue":case"noms":B.value=A.indexOf("cheminement");break;case"licence":B.value=A.indexOf(V.value==="bd"?"gabaritBd":V.value==="nue"?"gabaritNue":"motsClefs");break;default:B.value--;break}},L=computed(()=>{switch(A[B.value]){case"cheminement":return{actif:!1,visible:!1};case"gabaritBd":return{actif:!!H.value,visible:!0};case"gabaritNue":return{actif:!!q.value,visible:!0};case"noms":return{actif:Object.keys(ae.value).length>0,visible:!0};case"licence":return{actif:!!Y.value,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),j=computed(()=>{switch(A[B.value]){case"cheminement":return{actif:!1,visible:!1};case"confirmation":return{actif:!le.value,visible:!0};default:return{actif:!0,visible:!0}}}),q=ref$1(),H=ref$1(),X=async ge=>{H.value=ge},J=async ge=>{const ye=await n?.nues.gnrerSchmaBdNue({idNue:ge,licence:"ODbl-1_0"});ye&&(q.value=ye,Y.value=ye.licence,U.value=ye.licenceContenu)},Z=ref$1(!1),ae=ref$1({}),ce=ge=>{ae.value=ge},ve=ref$1({}),pe=ge=>{ve.value=ge},G=ref$1([]),Y=ref$1(),U=ref$1(),W=ref$1([]),ee=()=>{W.value=[...W.value,{clef:v4$2(),noms:{},cols:[]}]},re=ge=>{W.value=W.value.filter(ye=>ye.clef!==ge)},oe=({clefTableau:ge,noms:ye})=>{W.value=W.value.map(Ee=>Ee.clef===ge?{...Ee,noms:ye}:Ee)},ie=({clefTableau:ge,idVariable:ye,index:Ee,rgles:Re})=>{const Ne={id:v4$2(),variable:ye,index:Ee,rgles:Re};throw new Error(" faire"+JSON.stringify(Ne)+ge)},ne=({clefTableau:ge,idColonne:ye})=>{W.value=W.value.map(Ee=>Ee.clef===ge?{clef:Ee.clef,noms:Ee.noms,cols:Ee.cols.filter(Re=>Re.id!==ye)}:Ee)},te=computed(()=>{if(Y.value)return{licenceChoisie:Y.value}}),K=ref$1(!1),le=ref$1(!1),ue=async()=>{le.value=!0;let ge;if(V.value==="nouvelle"){if(!te.value)return;const{licenceChoisie:ye}=te.value;if(ge=await n?.bds.crerBd({licence:ye,licenceContenu:U.value}),!ge)throw new Error("Bd non cre.");await n?.bds.sauvegarderNomsBd({idBd:ge,noms:Object.fromEntries(Object.entries(ae.value))}),await n?.bds.sauvegarderDescriptionsBd({idBd:ge,descriptions:Object.fromEntries(Object.entries(ve.value))}),await n?.bds.ajouterMotsClefsBd({idBd:ge,idsMotsClefs:G.value});for(const Ee of W.value){const Re=await n?.bds.ajouterTableauBd({idBd:ge,clefTableau:Ee.clef});if(!Re)return;await n?.tableaux.sauvegarderNomsTableau({idTableau:Re,noms:Ee.noms});for(const Ne of Ee.cols){const Te=Ne.id;await n?.tableaux.ajouterColonneTableau({idTableau:Re,idVariable:Ne.variable,idColonne:Te}),Ne.index&&await n?.tableaux.changerColIndex({idTableau:Re,idColonne:Te,val:Ne.index});for(const he of Ne.rgles)throw new Error(" faire"+JSON.stringify(he))}}}else if(V.value==="nue"){if(!q.value)return;ge=await n?.bds.crerBdDeSchma({schma:q.value})}else{if(!H.value)return;ge=await n?.bds.copierBd({idBd:H.value,copierDonnes:Z.value})}if(!ge)throw new Error("Bd non cre.");be(),K.value&&S.push(encodeURI(`/donnes/bd/${encodeURIComponent(ge)}`))},be=()=>{ae.value={},ve.value={},Y.value=void 0,U.value=void 0,G.value=[],B.value=0,le.value=!1,T.value=!1};return(ge,ye)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":ye[11]||(ye[11]=Ee=>T.value=Ee)},{activator:withCtx(({props:Ee})=>[renderSlot(ge.$slots,"activator",normalizeProps(guardReactiveProps({props:Ee})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(C)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(I.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(N.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:B.value,"onUpdate:modelValue":ye[10]||(ye[10]=Ee=>B.value=Ee),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[(openBlock(),createBlock(VWindowItem,{key:0},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-creation-outline","append-icon":unref(E)?"chevron-left":"chevron-right",title:unref(x)("bds.nouvelle.crerNouvelle"),onClick:ye[0]||(ye[0]=()=>O())},null,8,["append-icon","title"]),createVNode(VListItem,{"prepend-icon":"mdi-table","append-icon":unref(E)?"chevron-left":"chevron-right",title:unref(x)("bds.nouvelle.copierDeBd"),onClick:ye[1]||(ye[1]=()=>D("bd"))},null,8,["append-icon","title"]),createVNode(VListItem,{"prepend-icon":"mdi-table-multiple","append-icon":unref(E)?"chevron-left":"chevron-right",title:unref(x)("bds.nouvelle.copierDeNue"),onClick:ye[2]||(ye[2]=()=>D("nue"))},null,8,["append-icon","title"])]),_:1})]),_:1})),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(_sfc_main$L,{multiples:!1,onSelectionnee:ye[3]||(ye[3]=Ee=>Ee[0]&&X(Ee[0]))}),createVNode(VCheckbox,{modelValue:Z.value,"onUpdate:modelValue":ye[4]||(ye[4]=Ee=>Z.value=Ee),label:unref(x)("bds.nouvelle.copierDonnesBd")},null,8,["modelValue","label"])]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(_sfc_main$J,{onSelectionnee:ye[5]||(ye[5]=Ee=>Ee&&J(Ee))})]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("communs.texteAucunNom"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("communs.indiceNom"),"noms-initiaux":ae.value,"autorisation-modification":!0,onAjusterNoms:ce},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:4},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("bds.nouvelle.texteAucuneDescription"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("bds.nouvelle.texteIndiceDescription"),"noms-initiaux":ve.value,"autorisation-modification":!0,onAjusterNoms:pe},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:5},{default:withCtx(()=>[createVNode(_sfc_main$H,{multiples:"",onSelectionnee:ye[6]||(ye[6]=Ee=>G.value=Ee)})]),_:1}),createVNode(VWindowItem,{value:6},{default:withCtx(()=>[createVNode(_sfc_main$G,{"importation-permise":"",onSauvegarder:ee},{activator:withCtx(({props:Ee})=>[createVNode(VBtn,normalizeProps(guardReactiveProps(Ee)),null,16)]),_:1}),createVNode(VList,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(W.value,Ee=>(openBlock(),createBlock(_sfc_main$x,{key:Ee.clef,clef:Ee.clef,noms:Ee.noms,colonnes:Ee.cols,"modification-permise":"",onModifierNoms:Re=>oe({clefTableau:Ee.clef,noms:Re}),onNouvelleColonne:Re=>ie({clefTableau:Ee.clef,idVariable:Re.idVariable,index:Re.index,rgles:Re.rgles}),onEffacerColonne:Re=>ne({clefTableau:Ee.clef,idColonne:Re}),onEffacerTableau:()=>re(Ee.clef)},null,8,["clef","noms","colonnes","onModifierNoms","onNouvelleColonne","onEffacerColonne","onEffacerTableau"]))),128))]),_:1})]),_:1}),createVNode(VWindowItem,{value:7},{default:withCtx(()=>[createVNode(_sfc_main$1d,{licence:Y.value,onChangerLicence:ye[7]||(ye[7]=Ee=>Y.value=Ee)},{activator:withCtx(({props:Ee})=>[createVNode(_sfc_main$1o,mergeProps(Ee,{licence:Y.value}),null,16,["licence"])]),_:1},8,["licence"])]),_:1}),createVNode(VWindowItem,{value:8},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$c,[createBaseVNode("h3",_hoisted_2$7,toDisplayString$1(unref(x)("bds.nouvelle.texteCrer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:le.value,onClick:ye[8]||(ye[8]=()=>ue())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("bds.nouvelle.texteBtnCration")),1)]),_:1},8,["loading"])]),createVNode(VCheckbox,{modelValue:K.value,"onUpdate:modelValue":ye[9]||(ye[9]=Ee=>K.value=Ee)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("bds.nouvelle.ouvrirAprsCration")),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!j.value.actif,onClick:M},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,j.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!L.value.actif,onClick:F},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,L.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$b={class:"font-weight-bold"},_hoisted_2$6={class:"text-medium-emphasis text-caption"},_hoisted_3$4={class:"font-weight-bold"},_hoisted_4$3={class:"text-medium-emphasis text-caption"},_hoisted_5$3={class:"text-center"},_hoisted_6$3={class:"text-h6 font-weight-light mb-2"},_sfc_main$v=defineComponent$1({__name:"NouvelleNue",setup(r){const{mdAndUp:n}=useDisplay(),{useI18n:_}=_(),{t:x}=_(),S=inject$1("constl"),E=ref$1(!1),C=ref$1(0),T=["noms","descriptions","autorisation","tableaux","confirmation"],B=computed(()=>{switch(T[C.value]){case"noms":return x("nues.nouvelle.titreNoms");case"descriptions":return x("nues.nouvelle.titreDescriptions");case"autorisation":return x("nues.nouvelle.titreAutorisation");case"tableaux":return x("nues.nouvelle.titreTableaux");case"confirmation":return x("nues.nouvelle.titreConfirmation");default:return""}}),A=computed(()=>{switch(T[C.value]){case"noms":return x("nues.nouvelle.sousTitreNoms");case"descriptions":return x("nues.nouvelle.sousTitreDescriptions");case"autorisation":return x("nues.nouvelle.sousTitreAutorisation");case"tableaux":return x("nues.nouvelle.sousTitreTableaux");case"confirmation":return x("nues.nouvelle.sousTitreConfirmation");default:return""}}),I=()=>{switch(T[C.value]){default:C.value--;break}},N=()=>{switch(T[C.value]){default:C.value++;break}},V=computed(()=>{switch(T[C.value]){case"noms":return{actif:!!Object.keys(O.value).length,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),D=computed(()=>{switch(T[C.value]){case"noms":return{actif:!1,visible:!1};case"confirmation":return{actif:!ce.value,visible:!0};default:return{actif:!0,visible:!0}}}),O=ref$1({}),F=G=>{O.value=G},M=ref$1({}),L=G=>{M.value=G},j=ref$1("IJPC"),q=ref$1([]),H=({noms:G,cols:Y})=>{q.value=[...q.value,{clef:v4$2(),noms:G,cols:Y}]},X=G=>{q.value=q.value.filter(Y=>Y.clef!==G)},J=({clefTableau:G,noms:Y})=>{q.value=q.value.map(U=>U.clef===G?{...U,noms:Y}:U)},Z=({clefTableau:G,idVariable:Y,index:U,rgles:W})=>{const ee={id:v4$2(),variable:Y,index:U,rgles:W};throw new Error(" faire"+G+JSON.stringify(ee))},ae=({clefTableau:G,idColonne:Y})=>{q.value=q.value.map(U=>U.clef===G?{clef:U.clef,noms:U.noms,cols:U.cols.filter(W=>W.info.id!==Y)}:U)},ce=ref$1(!1),ve=async()=>{ce.value=!0;const G=await S?.nues.crerNue({autorisation:j.value});if(!G)throw new Error("Nue non cre.");await S?.nues.sauvegarderNomsNue({idNue:G,noms:Object.fromEntries(Object.entries(O.value))}),await S?.nues.sauvegarderDescriptionsNue({idNue:G,descriptions:Object.fromEntries(Object.entries(M.value))});for(const Y of q.value){const U=await S?.nues.ajouterTableauNue({idNue:G,clefTableau:Y.clef});if(!U)return;await S?.nues.ajouterNomsTableauNue({idTableau:U,noms:Y.noms});for(const W of Y.cols){const ee=W.info.id;await S?.nues.ajouterColonneTableauNue({idTableau:U,idVariable:W.info.variable,idColonne:ee}),W.info.index&&await S?.nues.changerColIndexTableauNue({idTableau:U,idColonne:ee,val:W.info.index});for(const re of W.rgles)throw new Error(" faire"+JSON.stringify(re))}}pe()},pe=()=>{O.value={},M.value={},j.value="IJPC",q.value=[],C.value=0,E.value=!1,ce.value=!1};return(G,Y)=>(openBlock(),createBlock(VDialog,{modelValue:E.value,"onUpdate:modelValue":Y[2]||(Y[2]=U=>E.value=U)},{activator:withCtx(({props:U})=>[renderSlot(G.$slots,"activator",normalizeProps(guardReactiveProps({props:U})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(n)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(B.value)+" ",1),createVNode(VSpacer),createVNode(VBtn,{variant:"flat",size:"small",icon:"mdi-close",onClick:pe})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:C.value,"onUpdate:modelValue":Y[1]||(Y[1]=U=>C.value=U),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[(openBlock(),createBlock(VWindowItem,{key:0},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("communs.texteAucunNom"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("communs.indiceNom"),"noms-initiaux":O.value,"autorisation-modification":!0,onAjusterNoms:F},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1})),(openBlock(),createBlock(VWindowItem,{key:1},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("nues.nouvelle.texteAucuneDescription"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("nues.nouvelle.texteIndiceDescription"),"noms-initiaux":M.value,"autorisation-modification":!0,onAjusterNoms:L},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1})),(openBlock(),createBlock(VWindowItem,{key:2},{default:withCtx(()=>[createVNode(VRadioGroup,null,{default:withCtx(()=>[createVNode(VRadio,{value:"CJPI",class:"my-2"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_1$b,toDisplayString$1(unref(x)("nues.nouvelle.parInvitation")),1),createBaseVNode("p",_hoisted_2$6,toDisplayString$1(unref(x)("nues.nouvelle.indiceParInvitation")),1)])]),_:1}),createVNode(VRadio,{value:"IJPC",class:"my-2"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_3$4,toDisplayString$1(unref(x)("nues.nouvelle.ouverteTous")),1),createBaseVNode("p",_hoisted_4$3,toDisplayString$1(unref(x)("nues.nouvelle.indiceOuverteTous")),1)])]),_:1})]),_:1})]),_:1})),(openBlock(),createBlock(VWindowItem,{key:3},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(_sfc_main$G,{"importation-permise":!1,onSauvegarder:H},{activator:withCtx(({props:U})=>[createVNode(VListItem,mergeProps(U,{title:G.$t("nues.nouvelle.ajoutTableau"),"prepend-icon":"mdi-plus"}),null,16,["title"])]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(q.value,U=>(openBlock(),createBlock(_sfc_main$x,{key:U.clef,clef:U.clef,noms:U.noms,colonnes:U.cols.map(W=>W.info),"modification-permise":"",onModifierNoms:W=>J({clefTableau:U.clef,noms:W}),onNouvelleColonne:W=>Z({clefTableau:U.clef,idVariable:W.idVariable,index:W.index,rgles:W.rgles}),onEffacerColonne:W=>ae({clefTableau:U.clef,idColonne:W}),onEffacerTableau:()=>X(U.clef)},null,8,["clef","noms","colonnes","onModifierNoms","onNouvelleColonne","onEffacerColonne","onEffacerTableau"]))),128))]),_:1})]),_:1})),(openBlock(),createBlock(VWindowItem,{key:4},{default:withCtx(()=>[createBaseVNode("div",_hoisted_5$3,[createBaseVNode("h3",_hoisted_6$3,toDisplayString$1(unref(x)("nues.nouvelle.texteCrer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:ce.value,onClick:Y[0]||(Y[0]=()=>ve())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("nues.nouvelle.texteBtnCration")),1)]),_:1},8,["loading"])])])]),_:1}))]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!D.value.actif,onClick:I},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,D.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!V.value.actif,onClick:N},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,V.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$a={class:"text-center"},_hoisted_2$5={class:"text-h6 font-weight-light mb-2"},_sfc_main$u=defineComponent$1({__name:"NouveauProjet",setup(r){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{mdAndUp:S}=useDisplay(),E=useRouter(),C=ref$1(!1),T=ref$1(0),B=["noms","descriptions","motsClefs","ajouterBds","confirmation"],A=computed(()=>{switch(B[T.value]){default:return""}}),I=computed(()=>{switch(B[T.value]){default:return""}}),N=()=>{switch(B[T.value]){default:T.value++;break}},V=()=>{switch(B[T.value]){default:T.value--;break}},D=computed(()=>{switch(B[T.value]){case"noms":return{actif:Object.keys(F.value).length>0,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),O=computed(()=>{switch(B[T.value]){case"noms":return{actif:!1,visible:!1};case"confirmation":return{actif:!J.value,visible:!0};default:return{actif:!0,visible:!0}}}),F=ref$1({}),M=ce=>{F.value=ce},L=ref$1({}),j=ce=>{L.value=ce},q=ref$1([]),H=ref$1([]),X=ref$1(!1),J=ref$1(!1),Z=async()=>{J.value=!0;const ce=await n?.projets.crerProjet();if(!ce)throw new Error("Projet non cr.");await n?.projets.sauvegarderNomsProjet({idProjet:ce,noms:Object.fromEntries(Object.entries(F.value))}),await n?.projets.sauvegarderDescriptionsProjet({idProjet:ce,descriptions:Object.fromEntries(Object.entries(L.value))}),await n?.projets.ajouterMotsClefsProjet({idProjet:ce,idsMotsClefs:q.value}),await Promise.all(H.value.map(async ve=>await n?.projets.ajouterBdProjet({idProjet:ce,idBd:ve}))),ae(),X.value&&E.push(encodeURI(`/donnes/projet/${encodeURIComponent(ce)}`))},ae=()=>{F.value={},L.value={},q.value=[],H.value=[],T.value=0,J.value=!1,C.value=!1};return(ce,ve)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":ve[5]||(ve[5]=pe=>C.value=pe)},{activator:withCtx(({props:pe})=>[renderSlot(ce.$slots,"activator",normalizeProps(guardReactiveProps({props:pe})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(S)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(A.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(I.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:T.value,"onUpdate:modelValue":ve[4]||(ve[4]=pe=>T.value=pe),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("communs.texteAucunNom"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("communs.indiceNom"),"noms-initiaux":F.value,"autorisation-modification":!0,onAjusterNoms:M},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("projets.nouveau.texteAucuneDescription"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("projets.nouveau.texteIndiceDescription"),"noms-initiaux":L.value,"autorisation-modification":!0,onAjusterNoms:j},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(_sfc_main$H,{multiples:"",onSelectionnee:ve[0]||(ve[0]=pe=>q.value=pe)})]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(_sfc_main$L,{multiples:"",onSelectionnee:ve[1]||(ve[1]=pe=>H.value=pe)})]),_:1}),createVNode(VWindowItem,{value:4},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$a,[createBaseVNode("h3",_hoisted_2$5,toDisplayString$1(unref(x)("projets.nouveau.texteCrer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:J.value,onClick:ve[2]||(ve[2]=()=>Z())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("projets.nouveau.texteBtnCration")),1)]),_:1},8,["loading"])]),createVNode(VCheckbox,{modelValue:X.value,"onUpdate:modelValue":ve[3]||(ve[3]=pe=>X.value=pe)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("projets.nouveau.ouvrirAprsCration")),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!O.value.actif,onClick:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,O.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!D.value.actif,onClick:N},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,D.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$t=defineComponent$1({__name:"CarteProjet",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),x=ref$1({});enregistrercoute(_?.projets.suivreNomsProjet({idProjet:n.id,f:A=>x.value=A}));const S=async A=>{const{Effacer:I,Ajouter:N}=ajusterTexteTraductible({anciennes:x.value,nouvelles:A});for(const V of I)await _?.projets.effacerNomProjet({idProjet:n.id,langue:V});await _?.projets.sauvegarderNomsProjet({idProjet:n.id,noms:N})},E=ref$1({});enregistrercoute(_?.projets.suivreDescriptionsProjet({idProjet:n.id,f:A=>E.value=A}));const C=async A=>{const{Effacer:I,Ajouter:N}=ajusterTexteTraductible({anciennes:E.value,nouvelles:A});for(const V of I)await _?.projets.effacerDescriptionProjet({idProjet:n.id,langue:V});await _?.projets.sauvegarderDescriptionsProjet({idProjet:n.id,descriptions:N})},T=ref$1();enregistrercoute(_?.rseau?.suivreAuteursProjet({idProjet:n.id,f:A=>T.value=A}));const B=async()=>{await _?.projets.effacerProjet({idProjet:n.id})};return(A,I)=>(openBlock(),createBlock(_sfc_main$1B,{id:A.id,noms:x.value,descriptions:E.value,auteurs:T.value,"fichiers-epinglables":!0,onAjusterNoms:S,onAjusterDescriptions:C,onEffacer:B},null,8,["id","noms","descriptions","auteurs"]))}}),_hoisted_1$9={class:"text-center"},_sfc_main$s=defineComponent$1({__name:"CarteNue",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),E=ref$1({});enregistrercoute(_?.nues.suivreNomsNue({idNue:n.id,f:N=>E.value=N}));const C=async N=>{const{Effacer:V,Ajouter:D}=ajusterTexteTraductible({anciennes:E.value,nouvelles:N});for(const O of V)await _?.nues.effacerNomNue({idNue:n.id,langue:O});await _?.nues.sauvegarderNomsNue({idNue:n.id,noms:D})},T=ref$1({});enregistrercoute(_?.nues.suivreDescriptionsNue({idNue:n.id,f:N=>T.value=N}));const B=async N=>{const{Effacer:V,Ajouter:D}=ajusterTexteTraductible({anciennes:T.value,nouvelles:N});for(const O of V)await _?.nues.effacerDescriptionNue({idNue:n.id,langue:O});await _?.nues.sauvegarderDescriptionsNue({idNue:n.id,descriptions:D})},A=ref$1();enregistrercoute(_?.rseau?.suivreAuteursBd({idBd:n.id,f:N=>A.value=N}));const I=async()=>{await _?.nues.effacerNue({idNue:n.id})};return(N,V)=>(openBlock(),createBlock(_sfc_main$1B,{id:N.id,noms:E.value,descriptions:T.value,auteurs:A.value,"fichiers-epinglables":!0,onAjusterNoms:V[1]||(V[1]=D=>C(D)),onAjusterDescriptions:V[2]||(V[2]=D=>B(D)),onEffacer:V[3]||(V[3]=()=>I())},{activator:withCtx(({props:D})=>[renderSlot(N.$slots,"activator",normalizeProps(guardReactiveProps({props:D})))]),default:withCtx(()=>[createVNode(VDivider,{class:"mb-2"}),createBaseVNode("div",_hoisted_1$9,[createVNode(VBtn,{variant:"outlined","append-icon":"mdi-open-in-new",onClick:V[0]||(V[0]=D=>N.$router.push(encodeURI(`/donnes/nue/${encodeURIComponent(N.id)}`)))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("nues.carteNue.ouvrirNue")),1)]),_:1})])]),_:3},8,["id","noms","descriptions","auteurs"]))}}),_hoisted_1$8={class:"text-center"},_sfc_main$r=defineComponent$1({__name:"MesDonnes",setup(r){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{obtImageDco:S}=utiliserImagesDco(),E=S("logoBD"),C=ref$1(0),T=[{icne:"mdi-key",texte:x("pages.mesDonnes.motsClefs"),clef:"motsClefs"},{icne:"mdi-variable",texte:x("pages.mesDonnes.variables"),clef:"variables"},{icne:"mdi-database-outline",texte:x("pages.mesDonnes.bds"),clef:"bds"},{icne:"mdi-folder-outline",texte:x("pages.mesDonnes.projets"),clef:"projets"},{icne:"mdi-account-group-outline",texte:x("pages.mesDonnes.nues"),clef:"nues"}],B=ref$1();enregistrercoute(n?.motsClefs.suivreMotsClefs({f:F=>B.value=F}));const A=ref$1();enregistrercoute(n?.variables.suivreVariables({f:F=>A.value=F}));const I=ref$1();enregistrercoute(n?.bds.suivreBds({f:F=>I.value=F}));const N=ref$1();enregistrercoute(n?.projets.suivreProjets({f:F=>N.value=F}));const V=ref$1();enregistrercoute(n?.nues.suivreNues({f:F=>V.value=F}));const D=ref$1(),O=ref$1();return enregistrerRecherche({requte:D,rfRsultat:O,fRecherche:async({requte:F,nOuProfondeur:M,rfRsultat:L})=>await n?.recherche.rechercherBdsSelonTexte({texte:F,f:j=>L.value=j,nRsultatsDsirs:M})}),(F,M)=>(openBlock(),createElementBlock("div",_hoisted_1$8,[createVNode(_sfc_main$12,{titre:unref(x)("pages.mesDonnes.titre"),image:unref(E)},null,8,["titre","image"]),createVNode(VContainer,{class:"pt-0"},{default:withCtx(()=>[createVNode(VCard,{variant:"flat"},{default:withCtx(()=>[createVNode(VCardText,{class:"pt-0"},{default:withCtx(()=>[createVNode(VTextField,{modelValue:D.value,"onUpdate:modelValue":M[0]||(M[0]=L=>D.value=L),variant:"outlined","prepend-inner-icon":"mdi-magnify"},null,8,["modelValue"]),createVNode(VChipGroup,{modelValue:C.value,"onUpdate:modelValue":M[1]||(M[1]=L=>C.value=L),color:"primary",mandatory:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(T,L=>(openBlock(),createBlock(VChip,{key:L.clef,class:"mx-2",variant:"outlined","prepend-icon":L.icne},{default:withCtx(()=>[createTextVNode(toDisplayString$1(L.texte),1)]),_:2},1032,["prepend-icon"]))),128))]),_:1},8,["modelValue"]),createVNode(VWindow,{modelValue:C.value,"onUpdate:modelValue":M[2]||(M[2]=L=>C.value=L)},{default:withCtx(()=>[(openBlock(),createBlock(VWindowItem,{key:0},{default:withCtx(()=>[createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(_sfc_main$1k,null,{activator:withCtx(({props:L})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(L)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.mesDonnes.nouveauMotClef")),1)]),_:1})]),_:2},1040),createVNode(VDivider,{class:"mb-2"})]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(B.value,L=>(openBlock(),createBlock(_sfc_main$1h,{id:L,key:L},{activator:withCtx(({props:j})=>[createVNode(_sfc_main$1m,mergeProps(j,{id:L}),null,16,["id"])]),_:2},1032,["id"]))),128))]),_:1})]),_:1})),(openBlock(),createBlock(VWindowItem,{key:1},{default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(_sfc_main$D,null,{activator:withCtx(({props:L})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(L)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.mesDonnes.nouvelleVariable")),1)]),_:1})]),_:2},1040),createVNode(VDivider)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(A.value,L=>(openBlock(),createBlock(_sfc_main$1z,{id:L,key:L},{activator:withCtx(({props:j})=>[createVNode(_sfc_main$1y,mergeProps(j,{id:L}),null,16,["id"])]),_:2},1032,["id"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})),(openBlock(),createBlock(VWindowItem,{key:2},{default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(_sfc_main$w,null,{activator:withCtx(({props:L})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(L)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.mesDonnes.nouvelleBd")),1)]),_:1})]),_:2},1040),createVNode(VDivider)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(I.value,L=>(openBlock(),createBlock(_sfc_main$19,{id:L,key:L},{activator:withCtx(({props:j})=>[createVNode(_sfc_main$1x,mergeProps(j,{id:L}),null,16,["id"])]),_:2},1032,["id"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})),(openBlock(),createBlock(VWindowItem,{key:3},{default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(_sfc_main$u,null,{activator:withCtx(({props:L})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(L)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.mesDonnes.nouveauProjet")),1)]),_:1})]),_:2},1040),createVNode(VDivider)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(N.value,L=>(openBlock(),createBlock(_sfc_main$t,{id:L,key:L},{activator:withCtx(({props:j})=>[createVNode(_sfc_main$1u,mergeProps(j,{id:L}),null,16,["id"])]),_:2},1032,["id"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})),(openBlock(),createBlock(VWindowItem,{key:4},{default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(_sfc_main$v,null,{activator:withCtx(({props:L})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(L)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.mesDonnes.nouvelleNue")),1)]),_:1})]),_:2},1040),createVNode(VDivider)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(V.value,L=>(openBlock(),createBlock(_sfc_main$s,{id:L,key:L},{activator:withCtx(({props:j})=>[createVNode(_sfc_main$1s,mergeProps(j,{id:L}),null,16,["id"])]),_:1},8,["id"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]))}}),_hoisted_1$7={class:"text-center"},_hoisted_2$4={key:0},_hoisted_3$3={key:1},_hoisted_4$2={class:"text-center"},_hoisted_5$2={class:"text-center"},_hoisted_6$2={class:"text-h6 font-weight-light mb-2"},_sfc_main$q=defineComponent$1({__name:"ImporterOuExporter",props:{type:{},automatiser:{type:Boolean},infoObjet:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),{mdAndUp:S}=useDisplay(),E=inject$1("constl"),C=!isNode&&!isElectronMain,T=ref$1(!1),B=["importerOuExporter","objetConstellation","sourceImportation","correspondancesImportation","dossierExportation","inclureSFIPExportation","languesExportation","formatDocExportation","voulezVousAutomatiser","frquence","dispositif","confirmation"],A=ref$1(B.indexOf(n.type?n.infoObjet?n.type==="exportation"?"dossierExportation":"sourceImportation":"objetConstellation":"importerOuExporter")),I=ref$1(n.type),N=ref$1(),V=()=>{switch(B[A.value]){case"importerOuExporter":A.value=B.indexOf(n.infoObjet?I.value==="importation"?"sourceImportation":"dossierExportation":"objetConstellation");break;case"correspondancesImportation":case"formatDocExportation":A.value=B.indexOf(n.automatiser?"frquence":"voulezVousAutomatiser");break;default:A.value++;break}},D=()=>{const Ie=B[A.value];switch(Ie){case"confirmation":A.value=B.indexOf(N.value?"dispositif":I.value==="importation"?"correspondancesImportation":"formatDocExportation");break;case"voulezVousAutomatiser":A.value=B.indexOf(I.value==="importation"?"correspondancesImportation":"formatDocExportation");break;case"sourceImportation":case"dossierExportation":A.value=B.indexOf(n.infoObjet?n.type?Ie:"importerOuExporter":"objetConstellation");break;default:A.value--;break}},O=computed(()=>{switch(B[A.value]){case"importerOuExporter":return{actif:!1,visible:!1};case"objetConstellation":return{actif:!!(H.value&&X.value),visible:!0};case"sourceImportation":return{actif:!!ye.value,visible:!0};case"correspondancesImportation":return{actif:!!Re.value,visible:!0};case"dossierExportation":return{actif:!!ae.value,visible:!0};case"inclureSFIPExportation":return{actif:!!ce.value,visible:!0};case"languesExportation":return{actif:!!Ne.value,visible:!0};case"formatDocExportation":return{actif:!!Te.value,visible:!0};case"voulezVousAutomatiser":return{actif:fe.value!==void 0,visible:!0};case"frquence":return{actif:!!he.value,visible:!0};case"dispositif":return{actif:!!xe.value,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),F=computed(()=>{switch(B[A.value]){case"importerOuExporter":return{actif:!1,visible:!1};case"confirmation":return{actif:!Be.value,visible:!0};default:return{actif:!0,visible:!0}}}),M=()=>{I.value="importation",A.value=B.indexOf("sourceImportation")},L=()=>{I.value="exportation",A.value=B.indexOf("dossierExportation")},j=computed(()=>{switch(B[A.value]){case"importerOuExporter":return x("communs.importerOuExporter.titreImporterOuExporter");case"objetConstellation":return x("communs.importerOuExporter.titreObjetConstellation");case"sourceImportation":return x("communs.importerOuExporter.titreSourceImportation");case"correspondancesImportation":return x("communs.importerOuExporter.titreCorrespondancesImportation");case"dossierExportation":return x("communs.importerOuExporter.titreDossierExportation");case"inclureSFIPExportation":return x("communs.importerOuExporter.titreInclureSFIPExportation");case"languesExportation":return x("communs.importerOuExporter.titreLanguesExportation");case"formatDocExportation":return x("communs.importerOuExporter.titreFormatDocExportation");case"voulezVousAutomatiser":return x("communs.importerOuExporter.titreVoulezVousAutomatiser");case"frquence":return x("communs.importerOuExporter.titreFrquence");case"dispositif":return x("communs.importerOuExporter.titreDispositif");case"confirmation":return x("communs.importerOuExporter.titreconfirmation");default:return""}}),q=computed(()=>{switch(B[A.value]){case"importerOuExporter":return x("communs.importerOuExporter.sousTitreImporterOuExporter");case"objetConstellation":return x("communs.importerOuExporter.sousTitreObjetConstellation");case"sourceImportation":return x("communs.importerOuExporter.sousTitreSourceImportation");case"correspondancesImportation":return x("communs.importerOuExporter.sousTitreCorrespondancesImportation");case"dossierExportation":return x("communs.importerOuExporter.sousTitreDossierExportation");case"inclureSFIPExportation":return x("communs.importerOuExporter.sousTitreInclureSFIPExportation");case"languesExportation":return x("communs.importerOuExporter.sousTitreLanguesExportation");case"formatDocExportation":return x("communs.importerOuExporter.sousTitreFormatDocExportation");case"voulezVousAutomatiser":return x("communs.importerOuExporter.sousTitreVoulezVousAutomatiser");case"frquence":return x("communs.importerOuExporter.sousTitreFrquence");case"dispositif":return x("communs.importerOuExporter.sousTitreDispositif");case"confirmation":return x("communs.importerOuExporter.sousTitreconfirmation");default:return""}}),H=ref$1(n.infoObjet?.id),X=ref$1(n.infoObjet?.typeObjet),J=ref$1(),Z=["tableau","bd"],ae=ref$1(),ce=ref$1(),ve=ref$1(),pe=ref$1(),G=ref$1(),Y=enregistrercouteDynamique({params:{idBd:H},fcoute:(Ie,Me)=>E?.bds.suivreTableauxBd({idBd:Ie.idBd,f:Me})}),U=computed(()=>Y.value?.map(Ie=>Ie.id)),W=ref$1(),ee=computed(()=>{const Ie=ve.value?.split(".").pop();if(Ie)return Ie==="json"?Ie:"tableau"}),re=ref$1(),oe=computed(()=>G.value==="fichier"?ee.value:re.value),ie=ref$1(),ne=ref$1(),te=ref$1(),K=ref$1(),le=ref$1(),ue=ref$1(),be=()=>{if(!ie.value)throw new Error("Clefs racine JSON non dfinies.");if(!ne.value)throw new Error("Clefs lments JSON non dfinies.");if(!te.value)throw new Error("Colonnes JSON non dfinies.");return{formatDonnes:"json",clefsRacine:ie.value,clefslments:ne.value,cols:te.value}},ge=()=>{if(!K.value)throw new Error("Nom tableau non dfini.");if(!le.value)throw new Error("Colonnes feuille calcul non dfinies.");return{formatDonnes:"feuilleCalcul",nomTableau:K.value,cols:le.value,optionsXLSX:ue.value}},ye=computed(()=>{if(!G.value)throw new Error("Format fichier importation non dfini.");if(G.value==="fichier"){if(!ve.value)throw new Error("Fichier importation non dfini.");return oe.value==="json"?{typeSource:G.value,adresseFichier:ve.value,info:be()}:{typeSource:G.value,adresseFichier:ve.value,info:ge()}}else{if(!pe.value)throw new Error("URL importation non dfini.");if(oe.value==="json")return{typeSource:G.value,url:pe.value,info:be()};{const Ie=Ee(pe.value);return{typeSource:G.value,url:Ie,info:ge()}}}}),Ee=Ie=>{const Me=new URL(Ie);if(Me.hostname==="docs.google.com"&&!Me.href.includes("gviz"))try{const We=Ie.split("gid=")[1];return`https://docs.google.com/spreadsheets/d/${Ie.split("spreadsheets/d/")[1].split("/edit#")[0]}/gviz/tq?tqx=out:csv&sheet=${We}`}catch{return Ie}return Ie},Re=computed(()=>{switch(oe.value){case"json":return!!(ie.value&&ne.value&&te.value);case"tableau":return!!(K.value&&le.value&&ue.value);default:return!1}}),Ne=ref$1(),Te=ref$1(),he=ref$1(),xe=ref$1(),fe=ref$1(),Be=ref$1(!1),Le=async()=>{if(!H.value)throw new Error("Id objet non dfini.");if(I.value==="importation"){if(!ye.value)throw new Error("Source importation non dfinie.");if(!X.value||!Z.includes(X.value))throw new Error(`Objet de type ${X.value} ne peut pas tre import.`);switch(X.value){case"bd":case"tableau":if(X.value==="bd"&&!J.value)throw new Error("Source tableau importation non dfinie.");await E?.automatisations.ajouterAutomatisationImporter({idTableau:X.value==="tableau"?H.value:J.value,source:ye.value,frquence:he.value,dispositif:xe.value});break;default:throw new Error(`Impossible d'importer vers objet de type ${X.value}.`)}}else if(I.value==="exportation"){if(!X.value)throw new Error("Type objet non dfini.");if(!Te.value)throw new Error("Format document exportation non dfini.");if(!ae.value)throw new Error("Dossier exportation non dfini.");if(!ce.value)throw new Error("Inclure fichiers SFIP exportation non spcifi.");if(!xe.value)throw new Error("Dispositif exportation non dfini.");await E?.automatisations.ajouterAutomatisationExporter({id:H.value,typeObjet:X.value,formatDoc:Te.value,inclureFichiersSFIP:ce.value,dossier:ae.value,langues:Ne.value,frquence:he.value,dispositifs:[xe.value]})}else throw new Error("Cheminement non dfini:"+I.value)},Ve=async()=>{if(Be.value=!0,!H.value)throw new Error("Id objet cible non dfinie.");if(!n.automatiser){if(I.value==="importation"){if(!xe.value)throw new Error("Dispositif importation non dfini.");const Me={type:"importation",id:Math.random().toString(),idTableau:H.value,dispositif:xe.value,source:ye.value},He=await E?.automatisations.obtDonnesImportation(Me);He&&await E?.tableaux.importerDonnes({idTableau:H.value,donnes:He})}else if(I.value==="exportation"){if(!Te.value)throw new Error("Format document exportation non dfini.");switch(X.value){case"tableau":{const Me=await E?.tableaux.exporterDonnes({idTableau:H.value,langues:Ne.value});if(!Me)throw new Error("Constellation non dfinie.");await E?.bds.exporterDocumentDonnes({donnes:Me,formatDoc:Te.value,inclureFichiersSFIP:ce.value,dossier:ae.value});break}case"bd":{const Me=await E?.bds.exporterDonnes({idBd:H.value,langues:Ne.value});if(!Me)throw new Error("Constellation non dfinie.");await E?.bds.exporterDocumentDonnes({donnes:Me,formatDoc:Te.value,inclureFichiersSFIP:ce.value,dossier:ae.value});break}case"projet":{const Me=await E?.projets.exporterDonnes({idProjet:H.value,langues:Ne.value});if(!Me)throw new Error("Constellation non dfinie.");await E?.projets.exporterDocumentDonnes({donnes:Me,formatDoc:Te.value,inclureFichiersSFIP:ce.value,dossier:ae.value});break}case"nue":{const Me=await E?.nues.exporterDonnesNue({idNue:H.value,langues:Ne.value,nRsultatsDsirs:1e3});if(!Me)throw new Error("Constellation non dfinie.");await E?.bds.exporterDocumentDonnes({donnes:Me,formatDoc:Te.value,inclureFichiersSFIP:ce.value,dossier:ae.value});break}}}}(n.automatiser||fe.value)&&await Le(),Be.value=!1,T.value=!1};return(Ie,Me)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":Me[3]||(Me[3]=He=>T.value=He)},{activator:withCtx(({props:He})=>[renderSlot(Ie.$slots,"activator",normalizeProps(guardReactiveProps({props:He})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(S)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(j.value)+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:Me[0]||(Me[0]=He=>T.value=!1)})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(q.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:A.value,"onUpdate:modelValue":Me[2]||(Me[2]=He=>A.value=He),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$7,[createVNode(VBtn,{class:"ma-3",variant:"outlined","append-icon":"mdi-import",onClick:M},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.importerOuExporter.importer")),1)]),_:1}),createVNode(VBtn,{class:"ma-3",variant:"outlined","append-icon":"mdi-export",onClick:L},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.importerOuExporter.exporter")),1)]),_:1})])]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[oe.value==="tableau"?(openBlock(),createElementBlock("span",_hoisted_2$4,[createVNode(VSelect,{items:W.value},null,8,["items"]),createVNode(VSelect,{items:U.value},null,8,["items"]),createVNode(VCombobox,{chips:""})])):oe.value==="json"?(openBlock(),createElementBlock("span",_hoisted_3$3,[createVNode(VSelect,{multiple:"",chips:""}),createVNode(VSelect,{multiple:"",chips:""})])):createCommentVNode("",!0)]),_:1}),createVNode(VWindowItem,{value:9},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$2,[createVNode(VBtn,{class:"ma-3",variant:"flat",color:"primary",disabled:unref(C)&&(I.value==="exportation"||G.value==="fichier")},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.importerOuExporter.automatiser")),1)]),_:1},8,["disabled"]),createVNode(VBtn,{class:"ma-3",variant:"outlined"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.importerOuExporter.nePasAutomatiser")),1)]),_:1})])]),_:1}),createVNode(VWindowItem,{value:11},{default:withCtx(()=>[createBaseVNode("div",_hoisted_5$2,[createBaseVNode("h3",_hoisted_6$2,toDisplayString$1(unref(x)("communs.importerOuExporter.messageConfirmer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:Be.value,onClick:Me[1]||(Me[1]=()=>Ve())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.importerOuExporter.confirmer")),1)]),_:1},8,["loading"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!F.value.actif,onClick:D},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,F.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!O.value.actif,onClick:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,O.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$p=defineComponent$1({__name:"ItemAutomatisationsObjet",props:{idObjet:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{formatterChiffre:E}=utiliserNumration(),C=ref$1();enregistrercoute(_?.automatisations.suivreAutomatisations({f:I=>C.value=I}));const T=computed(()=>C.value?C.value.filter(I=>(I.type==="exportation"?I.idObjet:I.idTableau)===n.idObjet):void 0),B=computed(()=>T.value?.length||0),A=E(B);return(I,N)=>(openBlock(),createBlock(VListItem,{"prepend-icon":"mdi-lightning-bolt"},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("automatisations.item.titre",{n:unref(A)},B.value)),1)]),_:1})]),_:1}))}}),_sfc_main$o=defineComponent$1({__name:"JetonFichierImportation",props:{spcification:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),S=inject$1("constl"),E=computed(()=>n.spcification.source.typeSource==="fichier"?T.value===void 0:!1),C=computed(()=>n.spcification.source.typeSource==="url"||typeof T.value=="string"),T=ref$1();watchEffect(async()=>{n.spcification.source.typeSource==="fichier"&&(T.value=await S?.automatisations.rsoudreAdressePriveFichier({clef:n.spcification.source.adresseFichier}))});const B=computed(()=>n.spcification.source.typeSource==="fichier"?"mdi-file":"mdi-web"),A=computed(()=>n.spcification.source.typeSource==="fichier"?T.value===void 0?x("automatisation.rechercheFichier"):T.value===null?x("automatisations.fichierIntrouvable"):path.parse(T.value).base:n.spcification.source.url.slice(-10)+x("communs.troisPetitsPoints"));return(I,N)=>(openBlock(),createBlock(VChip,null,{prepend:withCtx(()=>[E.value?(openBlock(),createBlock(VProgressCircular,{key:0,indeterminate:"",color:"primary"})):C.value?(openBlock(),createBlock(VIcon,{key:1},{default:withCtx(()=>[createTextVNode(toDisplayString$1(B.value),1)]),_:1})):(openBlock(),createBlock(VIcon,{key:2,color:"error"},{default:withCtx(()=>[createTextVNode(" mdi-alert ")]),_:1}))]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(A.value),1)]),_:1}))}}),_sfc_main$n=defineComponent$1({__name:"JetonStatutAutomatisation",props:{statut:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),S=computed(()=>{switch(n.statut.type){case"erreur":return{icne:"mdi-alert",couleur:"error"};case"programme":return{icne:"mdi-check",couleur:"success"};case"sync":return{icne:"mdi-sync",couleur:"primary"};case"coute":return{icne:"",couleur:"success"};default:throw new Error(JSON.stringify(n.statut))}}),E=ref$1(new Date().getTime());let C;onMounted(()=>{C=window.setInterval(()=>E.value=new Date().getTime(),1e3)}),onUnmounted(()=>{C&&clearInterval(C)});const T=computed(()=>{switch(n.statut.type){case"coute":return x("auto.jetonStatut.coute");case"sync":return x("auto.jetonStatut.sync",{depuis:E.value-n.statut.depuis});case"programme":return x("auto.jetonStatut.programme",{dans:n.statut.-E.value});case"erreur":return n.statut.prochaineProgramme?x("auto.jetonStatut.erreurRssayer",{dans:n.statut.prochaineProgramme-E.value}):x("auto.jetonStatut.erreur");default:throw new Error(n.statut)}});return(B,A)=>(openBlock(),createBlock(VChip,null,{prepend:withCtx(()=>[B.statut.type==="sync"?(openBlock(),createBlock(VProgressCircular,{key:0,indeterminate:""},{default:withCtx(()=>[createVNode(VIcon,{color:S.value.couleur},{default:withCtx(()=>[createTextVNode(toDisplayString$1(S.value.icne),1)]),_:1},8,["color"])]),_:1})):(openBlock(),createBlock(VIcon,{key:1,color:S.value.couleur},{default:withCtx(()=>[createTextVNode(toDisplayString$1(S.value.icne),1)]),_:1},8,["color"]))]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(T.value),1)]),_:1}))}}),_sfc_main$m=defineComponent$1({__name:"ItemAutomatisation",props:{spcification:{}},setup(r){const n=r,_=inject$1("constl"),{traduireNom:x}=utiliserLangues(),S=ref$1({});onMounted(()=>{if(n.spcification.type==="importation")enregistrercoute(_?.tableaux.suivreNomsTableau({idTableau:n.spcification.idTableau,f:A=>S.value=A}));else switch(n.spcification.typeObjet){case"tableau":enregistrercoute(_?.tableaux.suivreNomsTableau({idTableau:n.spcification.idObjet,f:A=>S.value=A}));break;case"projet":enregistrercoute(_?.projets.suivreNomsProjet({idProjet:n.spcification.idObjet,f:A=>S.value=A}));break;case"bd":enregistrercoute(_?.bds.suivreNomsBd({idBd:n.spcification.idObjet,f:A=>S.value=A}));break;case"nue":enregistrercoute(_?.nues.suivreNomsNue({idNue:n.spcification.idObjet,f:A=>S.value=A}));break;default:throw new Error(JSON.stringify(n.spcification))}});const E=x(S),C=computed(()=>{if(n.spcification.type==="importation")return"mdi-table";switch(n.spcification.typeObjet){case"tableau":return"mdi-table";case"bd":return"mdi-database-outline";case"projet":return"mdi-folder-outline";case"nue":return"mdi-bird";default:throw new Error(JSON.stringify(n.spcification))}}),T=ref$1();enregistrercoute(_?.automatisations.suivretatAutomatisations({f:A=>T.value=A}));const B=computed(()=>T.value?T.value[n.spcification.id]:void 0);return(A,I)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.spcification.type==="exportation"?"mdi-export":"mdi-import"),1)]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.value),1)]),_:1}),createTextVNode(" "+toDisplayString$1(unref(E)),1)]),_:1}),A.spcification.type==="importation"?(openBlock(),createBlock(_sfc_main$o,{key:0,spcification:A.spcification},null,8,["spcification"])):createCommentVNode("",!0),B.value?(openBlock(),createBlock(_sfc_main$n,{key:1,statut:B.value},null,8,["statut"])):(openBlock(),createBlock(unref(VSkeletonLoader),{key:2,type:"chip"}))]),_:1}))}}),_hoisted_1$6={key:0},_sfc_main$l=defineComponent$1({__name:"CarteAutomatisationsObjet",props:{idObjet:{},typeObjet:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),{mdAndUp:S}=useDisplay(),E=inject$1("constl"),C=ref$1();enregistrercoute(E?.suivrePermission({idObjet:n.idObjet,f:V=>C.value=V}));const T=ref$1();enregistrercoute(E?.automatisations.suivreAutomatisations({f:V=>T.value=V}));const B=ref$1();onMounted(()=>{n.typeObjet==="bd"&&enregistrercoute(E?.bds.suivreTableauxBd({idBd:n.idObjet,f:V=>B.value=V}))});const A=computed(()=>{const V=n.typeObjet==="bd"?[n.idObjet,(B.value||[]).filter(D=>D.id)]:[n.idObjet];return T.value?.filter(D=>V.includes(D.type==="exportation"?D.idObjet:D.idTableau))}),I=computed(()=>A.value?.filter(V=>V.type==="importation")||[]),N=computed(()=>A.value?.filter(V=>V.type==="exportation")||[]);return(V,D)=>(openBlock(),createBlock(VDialog,null,{activator:withCtx(({props:O})=>[renderSlot(V.$slots,"activator",normalizeProps(guardReactiveProps({props:O})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(S)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("automatisations.carte.titre")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[(V.typeObjet==="bd"||V.typeObjet=="tableau")&&C.value?(openBlock(),createElementBlock("span",_hoisted_1$6,[createTextVNode(toDisplayString$1(unref(x)("automatisations.carte.importations"))+" ",1),createVNode(VDivider),createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-plus"},{default:withCtx(()=>[createVNode(_sfc_main$q,{"info-objet":{id:V.idObjet,typeObjet:V.typeObjet},type:"importation",automatiser:""},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("automatisations.carte.ajouterImportation")),1)]),_:1})]),_:1},8,["info-objet"])]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(I.value,O=>(openBlock(),createBlock(_sfc_main$m,{key:O.id,spcification:O},null,8,["spcification"]))),128)),I.value.length?createCommentVNode("",!0):(openBlock(),createBlock(VListItem,{key:0},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("automatisations.carte.aucuneImportation")),1)]),_:1})]),_:1}))]),_:1})])):createCommentVNode("",!0),createTextVNode(" "+toDisplayString$1(unref(x)("automatisations.carte.exportations"))+" ",1),createVNode(VDivider),createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-plus"},{default:withCtx(()=>[createVNode(_sfc_main$q,{"info-objet":{id:V.idObjet,typeObjet:V.typeObjet},type:"exportation",automatiser:""},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("automatisations.carte.ajouterExportation")),1)]),_:1})]),_:1},8,["info-objet"])]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(N.value,O=>(openBlock(),createBlock(_sfc_main$m,{key:O.id,spcification:O},null,8,["spcification"]))),128)),N.value.length?createCommentVNode("",!0):(openBlock(),createBlock(VListItem,{key:0},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("automatisations.carte.aucuneExportation")),1)]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1},8,["max-width"])]),_:3}))}}),_sfc_main$k=defineComponent$1({__name:"ItemAuteurs",props:{auteurs:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),{formatterChiffre:S}=utiliserNumration(),E=computed(()=>(n.auteurs||[]).filter(A=>A.accept)),C=computed(()=>{if(E.value.length)return E.value[Math.floor(E.value.length*Math.random())]?.idCompte}),T=computed(()=>E.value.length),B=S(T);return(A,I)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(_sfc_main$24,{id:C.value},null,8,["id"])]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("auteurs.item.titre",{n:unref(B)},T.value)),1)]),_:1})]),_:1}))}}),_sfc_main$j=defineComponent$1({__name:"ItemLicence",props:{licence:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),E=ref$1();enregistrercoute(_?.licences.suivreLicences({f:T=>E.value=T}));const C=computed(()=>n.licence&&E.value&&Object.keys(E.value).includes(n.licence));return(T,B)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,{start:"",color:C.value?"primary":"error"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.value?"mdi-scale-balance":"mdi-alert"),1)]),_:1},8,["color"])]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.value?unref(S)(`licences.info.${T.licence}.abr`):T.licence),1)]),_:1})]),_:1}))}}),_hoisted_1$5={class:"mb-0 text-overline"},_hoisted_2$3={class:"mb-0 text-overline"},_sfc_main$i=defineComponent$1({__name:"CarteRplicationsObjet",props:{id:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),{mdAndUp:S}=useDisplay(),{formatterChiffre:E}=utiliserNumration(),C=inject$1("constl"),T=ref$1(!1),B=ref$1();enregistrercoute(C?.rseau?.suivreRplications({idObjet:n.id,f:X=>B.value=X,profondeur:10}));const A=computed(()=>B.value?.dispositifs),I=computed(()=>A.value?.length||0),N=E(I),V=computed(()=>B.value?.dispositifs.filter(X=>!X.vu)),D=computed(()=>V.value?.length||0),O=E(D),F=computed(()=>B.value?.membres),M=computed(()=>F.value?.length||0),L=E(M),j=computed(()=>B.value?.membres.filter(X=>!X.vu)),q=computed(()=>j.value?.length||0),H=E(q);return(X,J)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":J[2]||(J[2]=Z=>T.value=Z)},{activator:withCtx(({props:Z})=>[renderSlot(X.$slots,"activator",normalizeProps(guardReactiveProps({props:Z})))]),default:withCtx(()=>[createVNode(VCard,{"max-width":unref(S)?700:300,class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("rplications.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"small",onClick:J[0]||(J[0]=Z=>T.value=!1)})]),_:1}),createVNode(VCardSubtitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("rplications.sousTitre")),1)]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$5,toDisplayString$1(unref(x)("rplications.rpliquPar")),1),createVNode(VListGroup,null,{activator:withCtx(({props:Z})=>[createVNode(VListItem,mergeProps(Z,{lines:"two"}),{prepend:withCtx(()=>[createVNode(VAvatar,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(N)),1)]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("rplications.dispositifs"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-monitor-cellphone")]),_:1})]),_:1}),createVNode(VListItemSubtitle,{class:"text-success"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("rplications.enLigne",{n:unref(O)})),1)]),_:1})]),_:2},1040)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(A.value,Z=>(openBlock(),createBlock(_sfc_main$1N,{key:Z.idDispositif,"id-dispositif":Z.idDispositif,"id-compte":Z.idCompte,"vu-a":Z.vu},{default:withCtx(()=>[createVNode(VChip,{"prepend-icon":Z.fichiers?"mdi-folder-outline":"mdi-folder-off-outline",variant:"outlined",label:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(Z.fichiers?unref(x)("rplications.avecFichiers"):unref(x)("rplications.sansFichiers")),1)]),_:2},1032,["prepend-icon"])]),_:2},1032,["id-dispositif","id-compte","vu-a"]))),128))]),_:1}),createBaseVNode("p",_hoisted_2$3,toDisplayString$1(unref(x)("rplications.reprsentant")),1),createVNode(VListGroup,null,{activator:withCtx(({props:Z})=>[createVNode(VListItem,mergeProps(Z,{lines:"two"}),createSlots({default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("rplications.membres"))+" ",1),createVNode(VIcon,{icon:"mdi-account",end:""})]),_:1}),j.value?(openBlock(),createBlock(VListItemSubtitle,{key:0,class:"text-success"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("rplications.enLigne",{n:unref(H)})),1)]),_:1})):createCommentVNode("",!0)]),_:2},[F.value?{name:"prepend",fn:withCtx(()=>[createVNode(VAvatar,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(L)),1)]),_:1})]),key:"0"}:void 0]),1040)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(F.value,Z=>(openBlock(),createBlock(_sfc_main$1X,{key:Z.infoMembre.idCompte,compte:Z.infoMembre.idCompte,"montrer-anonymes":!0},null,8,["compte"]))),128))]),_:1})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:J[1]||(J[1]=Z=>T.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1})]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$4={key:1},_sfc_main$h=defineComponent$1({__name:"ItemRplicationsObjet",props:{id:{}},setup(r){const n=r,{useI18n:_}=_(),{t:x}=_(),{formatterChiffre:S}=utiliserNumration(),E=inject$1("constl"),C=ref$1();enregistrercoute(E?.rseau?.suivreRplications({idObjet:n.id,f:A=>C.value=A,profondeur:10}));const T=computed(()=>C.value?.dispositifs.length||0),B=S(T);return(A,I)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,{left:"",icon:"mdi-database-sync"})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[C.value===void 0?(openBlock(),createBlock(unref(VSkeletonLoader),{key:0,type:"chip"})):(openBlock(),createElementBlock("span",_hoisted_1$4,toDisplayString$1(C.value?unref(x)("rplications.nRplications",{n:unref(B)}):""),1))]),_:1})]),_:1}))}}),VBreadcrumbs$1="",makeVBreadcrumbsDividerProps=propsFactory({divider:[Number,String],...makeComponentProps()},"VBreadcrumbsDivider"),VBreadcrumbsDivider=genericComponent()({name:"VBreadcrumbsDivider",props:makeVBreadcrumbsDividerProps(),setup(r,n){let{slots:_}=n;return useRender(()=>createVNode("li",{class:["v-breadcrumbs-divider",r.class],style:r.style},[_?.default?.()??r.divider])),{}}}),makeVBreadcrumbsItemProps=propsFactory({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...makeComponentProps(),...makeRouterProps(),...makeTagProps({tag:"li"})},"VBreadcrumbsItem"),VBreadcrumbsItem=genericComponent()({name:"VBreadcrumbsItem",props:makeVBreadcrumbsItemProps(),setup(r,n){let{slots:_,attrs:x}=n;const S=useLink$1(r,x),E=computed(()=>r.active||S.isActive?.value),C=computed(()=>E.value?r.activeColor:r.color),{textColorClasses:T,textColorStyles:B}=useTextColor(C);return useRender(()=>createVNode(r.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":E.value,"v-breadcrumbs-item--disabled":r.disabled,[`${r.activeClass}`]:E.value&&r.activeClass},T.value,r.class],style:[B.value,r.style],"aria-current":E.value?"page":void 0},{default:()=>[S.isLink.value?createVNode("a",{class:"v-breadcrumbs-item--link",href:S.href.value,"aria-current":E.value?"page":void 0,onClick:S.navigate},[_.default?.()??r.title]):_.default?.()??r.title]})),{}}}),makeVBreadcrumbsProps=propsFactory({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:IconValue,items:{type:Array,default:()=>[]},...makeComponentProps(),...makeDensityProps(),...makeRoundedProps(),...makeTagProps({tag:"ul"})},"VBreadcrumbs"),VBreadcrumbs=genericComponent()({name:"VBreadcrumbs",props:makeVBreadcrumbsProps(),setup(r,n){let{slots:_}=n;const{backgroundColorClasses:x,backgroundColorStyles:S}=useBackgroundColor(toRef(r,"bgColor")),{densityClasses:E}=useDensity(r),{roundedClasses:C}=useRounded(r);provideDefaults({VBreadcrumbsDivider:{divider:toRef(r,"divider")},VBreadcrumbsItem:{activeClass:toRef(r,"activeClass"),activeColor:toRef(r,"activeColor"),color:toRef(r,"color"),disabled:toRef(r,"disabled")}});const T=computed(()=>r.items.map(B=>typeof B=="string"?{item:{title:B},raw:B}:{item:B,raw:B}));return useRender(()=>{const B=!!(_.prepend||r.icon);return createVNode(r.tag,{class:["v-breadcrumbs",x.value,E.value,C.value,r.class],style:[S.value,r.style]},{default:()=>[B&&createVNode("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[_.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!r.icon,defaults:{VIcon:{icon:r.icon,start:!0}}},_.prepend):createVNode(VIcon,{key:"prepend-icon",start:!0,icon:r.icon},null)]),T.value.map((A,I,N)=>{let{item:V,raw:D}=A;return createVNode(Fragment,null,[createVNode(VBreadcrumbsItem,mergeProps({key:V.title,disabled:I>=N.length-1},V),{default:_.title?()=>_.title?.({item:D,index:I}):void 0}),I<N.length-1&&createVNode(VBreadcrumbsDivider,null,{default:_.divider?()=>_.divider?.({item:D,index:I}):void 0})])}),_.default?.()]})}),{}}}),_hoisted_1$3={class:"mb-0 text-overline"},_hoisted_2$2={class:"d-flex flex-wrap"},_hoisted_3$2={class:"d-flex flex-wrap"},_hoisted_4$1={class:"text-overline"},_hoisted_5$1={key:0,class:"text-disabled"},_hoisted_6$1={class:"mb-0 text-overline"},_hoisted_7={key:0,class:"text-disabled"},_hoisted_8={class:"mb-0 text-overline"},_hoisted_9={key:0,class:"text--disabled"},_hoisted_10={class:"mb-0 text-overline"},_hoisted_11={key:1,class:"text-center"},_hoisted_12={class:"text-h5 mt-5"},_sfc_main$g=defineComponent$1({__name:"PageBD",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{mdAndUp:S}=useDisplay(),{isRtl:E}=useRtl(),{t:C}=x(),{traduireNom:T}=utiliserLangues(),{obtImageDco:B}=utiliserImagesDco(),A=B("vide"),I=ref$1();enregistrercoute(_?.suivrePermission({idObjet:n.id,f:ee=>I.value=ee}));const N=ref$1({}),V=T(N);enregistrercoute(_?.bds.suivreNomsBd({idBd:n.id,f:ee=>N.value=ee}));const D=async ee=>{const{Effacer:re,Ajouter:oe}=ajusterTexteTraductible({anciennes:N.value,nouvelles:ee});for(const ie of re)await _?.bds.effacerNomBd({idBd:n.id,langue:ie});await _?.bds.sauvegarderNomsBd({idBd:n.id,noms:oe})},O=ref$1({}),F=T(O);enregistrercoute(_?.bds.suivreDescriptionsBd({idBd:n.id,f:ee=>O.value=ee}));const M=async ee=>{const{Effacer:re,Ajouter:oe}=ajusterTexteTraductible({anciennes:O.value,nouvelles:ee});for(const ie of re)await _?.bds.effacerDescriptionBd({idBd:n.id,langue:ie});await _?.bds.sauvegarderDescriptionsBd({idBd:n.id,descriptions:oe})},L=ref$1(),j=computed(()=>{if(L.value)return URL.createObjectURL(new Blob([L.value],{type:"image"}))});enregistrercoute(_?.bds.suivreImage({idBd:n.id,f:ee=>L.value=ee}));const q=B("logoBD"),H=async ee=>{ee?await _?.profil.sauvegarderImage({image:{content:ee.contenu,path:ee.fichier}}):await _?.profil.effacerImage()},X=ref$1();enregistrercoute(_?.bds.suivreVariablesBd({idBd:n.id,f:ee=>X.value=ee}));const J=ref$1();enregistrercoute(_?.bds.suivreMotsClefsBd({idBd:n.id,f:ee=>J.value=ee}));const Z=async ee=>{const re=ee.filter(ie=>!J.value?.includes(ie)),oe=J.value?.filter(ie=>!ee.includes(ie))||[];await _?.bds.ajouterMotsClefsBd({idBd:n.id,idsMotsClefs:re}),await Promise.all(oe.map(ie=>_?.bds.effacerMotClefBd({idBd:n.id,idMotClef:ie})))},ae=ref$1(),ce=ref$1(),ve=computed(()=>{if(ce.value)return[...ce.value].sort((ee,re)=>ee.id>re.id?-1:1)});enregistrercoute(_?.bds.suivreTableauxBd({idBd:n.id,f:ee=>ce.value=ee}));const pe=ref$1();enregistrercoute(_?.rseau?.suivreAuteursBd({idBd:n.id,f:ee=>pe.value=ee}));const G=ref$1();enregistrercoute(_?.bds.suivreLicenceBd({idBd:n.id,f:ee=>G.value=ee}));const Y=async ee=>{await _?.bds.changerLicenceBd({idBd:n.id,licence:ee})},U=computed(()=>[{title:C("navig.mesDonnes"),lien:encodeURI("/donnes/")},{title:V.value||n.id,disabled:!0}]),W=async()=>{await _?.bds.effacerBd({idBd:n.id})};return(ee,re)=>(openBlock(),createBlock(VContainer,null,{default:withCtx(()=>[createVNode(VCard,{flat:""},{default:withCtx(()=>[createVNode(VCardSubtitle,null,{default:withCtx(()=>[createVNode(VBreadcrumbs,{items:U.value,class:"pa-0"},{divider:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)?"mdi-chevron-left":"mdi-chevron-right"),1)]),_:1})]),title:withCtx(({item:oe})=>[createVNode(VBreadcrumbsItem,{disabled:oe.disabled,onClick:ie=>oe.lien&&ee.$router.push(oe.lien)},{default:withCtx(()=>[createVNode(_sfc_main$23,{texte:oe.title,"longueur-max":35},null,8,["texte"])]),_:2},1032,["disabled","onClick"])]),_:1},8,["items"])]),_:1}),createVNode(ImageEditable,{"src-image":j.value,"img-defaut":unref(q),editable:!!I.value,"taille-avatar":unref(S)?275:175,"max-taille-image":unref(MAX_TAILLE_IMAGE$4),onImageChangee:re[0]||(re[0]=oe=>H(oe))},null,8,["src-image","img-defaut","editable","taille-avatar","max-taille-image"]),createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createVNode(_sfc_main$1E,{"indice-nom":unref(C)("objet.indiceNom"),"indice-langue":unref(C)("objet.indiceLangue"),"texte-aucun-nom":unref(C)("objet.texteAucunNom"),"noms-initiaux":N.value,titre:unref(C)("objet.titreDialogueNoms"),"sous-titre":unref(C)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!I.value,onAjusterNoms:D},{activator:withCtx(({props:oe})=>[createBaseVNode("span",normalizeProps(guardReactiveProps(oe)),[createTextVNode(toDisplayString$1(unref(V)||unref(C)("communs.baseCarteObjet.sansNom"))+" ",1),createVNode(VBtn,{icon:I.value?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),createVNode(_sfc_main$1Y,{id:ee.id},null,8,["id"]),createVNode(VSpacer),createVNode(_sfc_main$1M,{id:ee.id},{activator:withCtx(({props:oe})=>[createVNode(VTooltip,mergeProps(oe,{"open-delay":"200",location:"bottom",text:unref(C)("communs.pingler")}),{activator:withCtx(({props:ie})=>[createVNode(VBtn,mergeProps(ie,{icon:"",variant:"flat"}),{default:withCtx(()=>[createVNode(_sfc_main$1L,{id:ee.id},null,8,["id"])]),_:2},1040)]),_:2},1040,["text"])]),_:1},8,["id"]),createVNode(_sfc_main$q,{"info-objet":{id:ee.id,typeObjet:"bd"},type:I.value?void 0:"exportation"},{activator:withCtx(({props:oe})=>[createVNode(VTooltip,mergeProps(oe,{text:unref(C)("exporter.indice"),"open-delay":200,location:"bottom"}),{activator:withCtx(({props:ie})=>[createVNode(VBtn,mergeProps(ie,{icon:"mdi-download",variant:"flat"}),null,16)]),_:2},1040,["text"])]),_:1},8,["info-objet","type"]),createVNode(_sfc_main$1D,{id:ee.id},{activator:withCtx(({props:oe})=>[createVNode(VTooltip,mergeProps(oe,{"open-delay":"200",location:"bottom",text:unref(C)("copier.indice")}),{activator:withCtx(({props:ie})=>[createVNode(VBtn,mergeProps(ie,{icon:"mdi-content-copy",variant:"flat"}),null,16)]),_:2},1040,["text"])]),_:1},8,["id"]),I.value?(openBlock(),createBlock(_sfc_main$1C,{key:0,onEffacer:W},{activator:withCtx(({props:oe})=>[createVNode(VTooltip,mergeProps(oe,{"open-delay":"200",location:"bottom",text:unref(C)("effacer.indice")}),{activator:withCtx(({props:ie})=>[createVNode(VBtn,mergeProps(ie,{variant:"flat",icon:""}),{default:withCtx(()=>[createVNode(VIcon,{color:"error"},{default:withCtx(()=>[createTextVNode("mdi-delete")]),_:1})]),_:2},1040)]),_:2},1040,["text"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VCard,{flat:"",class:"mx-3 mb-3"},{default:withCtx(()=>[createVNode(_sfc_main$1E,{"indice-nom":unref(C)("objet.indiceDescription"),"indice-langue":unref(C)("objet.indiceLangue"),"texte-aucun-nom":unref(C)("objet.texteAucuneDescription"),"noms-initiaux":O.value,titre:unref(C)("objet.titreDialogueDescriptions"),"sous-titre":unref(C)("objet.sousTitreDialogueDescriptions"),"autorisation-modification":!!I.value,onAjusterNoms:M},{activator:withCtx(({props:oe})=>[createBaseVNode("span",{class:normalizeClass({"text-disabled":!unref(F)})},toDisplayString$1(unref(F)||unref(C)("communs.baseCarteObjet.sansDescription")),3),createVNode(VBtn,mergeProps(oe,{icon:I.value?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"}),null,16,["icon"])]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),createBaseVNode("p",_hoisted_1$3,toDisplayString$1(unref(C)("pages.bds.info")),1),createBaseVNode("div",_hoisted_2$2,[createCommentVNode("",!0),createVNode(VCard,{flat:"",width:"200",class:"mb-3"},{default:withCtx(()=>[createVNode(_sfc_main$1G,{id:ee.id,auteurs:pe.value,"permission-moderateur":I.value==="MODRATEUR"},{activator:withCtx(({props:oe})=>[createVNode(_sfc_main$k,mergeProps(oe,{auteurs:pe.value}),null,16,["auteurs"])]),_:1},8,["id","auteurs","permission-moderateur"])]),_:1}),createVNode(VCard,{flat:"",width:"200",class:"mb-3"},{default:withCtx(()=>[createVNode(_sfc_main$1d,{licence:G.value,"permission-modifier":I.value==="MODRATEUR",onChangerLicence:Y},{activator:withCtx(({props:oe})=>[createVNode(_sfc_main$j,mergeProps(oe,{licence:G.value,onChangerLicence:Y}),null,16,["licence"])]),_:1},8,["licence","permission-modifier"])]),_:1}),createVNode(VCard,{flat:"",width:"200",class:"mb-3"},{default:withCtx(()=>[createVNode(_sfc_main$i,{id:ee.id},{activator:withCtx(({props:oe})=>[createVNode(_sfc_main$h,mergeProps(oe,{id:ee.id}),null,16,["id"])]),_:1},8,["id"])]),_:1}),createVNode(VCard,{flat:"",width:"200",class:"mb-3"},{default:withCtx(()=>[createVNode(_sfc_main$l,{"id-objet":ee.id,permission:I.value,"type-objet":"bd"},{activator:withCtx(({props:oe})=>[createVNode(_sfc_main$p,mergeProps(oe,{"id-objet":ee.id}),null,16,["id-objet"])]),_:1},8,["id-objet","permission"])]),_:1})])]),_:1}),createVNode(VCard,{flat:"",class:"mx-3 mb-3"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$2,[createVNode(VCard,{flat:"","min-width":"200","max-width":"350",class:"mb-3 me-3"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_4$1,toDisplayString$1(unref(C)("bd.carteBd.variables")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(_sfc_main$1Q,{"n-max":5,items:X.value},{jeton:withCtx(({id:oe})=>[createVNode(_sfc_main$1z,{id:oe},{activator:withCtx(({props:ie})=>[createVNode(_sfc_main$1P,mergeProps(ie,{id:oe}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:oe})=>[createVNode(_sfc_main$1z,{id:oe},{activator:withCtx(({props:ie})=>[createVNode(_sfc_main$1y,mergeProps(ie,{id:oe}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),X.value?.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_5$1,toDisplayString$1(unref(C)("bds.aucuneVariable")),1))]),_:1})]),_:1}),createVNode(VCard,{flat:"","min-width":"200","max-width":"350",class:"mb-3 me-3"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_6$1,toDisplayString$1(unref(C)("bds.carteBd.motsClefs")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(_sfc_main$1Q,{"n-max":5,items:J.value},{jeton:withCtx(({id:oe})=>[createVNode(_sfc_main$1h,{id:oe},{activator:withCtx(({props:ie})=>[createVNode(_sfc_main$1n,mergeProps(ie,{id:oe}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:oe})=>[createVNode(_sfc_main$1h,{id:oe},{activator:withCtx(({props:ie})=>[createVNode(_sfc_main$1m,mergeProps(ie,{id:oe}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),J.value&&!J.value.length?(openBlock(),createElementBlock("p",_hoisted_7,toDisplayString$1(unref(C)("bds.aucunMotClef")),1)):createCommentVNode("",!0),I.value&&J.value?(openBlock(),createBlock(_sfc_main$1j,{key:1,originaux:J.value,onSauvegarder:Z},null,8,["originaux"])):createCommentVNode("",!0)]),_:1})]),_:1}),createVNode(VCard,{flat:"","min-width":"200","max-width":"350",class:"mb-3 me-3"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_8,toDisplayString$1(unref(C)("bd.carteBd.gographie")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[ae.value&&!ae.value.length?(openBlock(),createElementBlock("p",_hoisted_9,toDisplayString$1(unref(C)("bds.aucuneGog")),1)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(ae.value,oe=>(openBlock(),createBlock(VChip,{key:oe,outlined:"",small:"",label:"",class:"mx-1 my-1"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(oe),1)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}),createVNode(VList,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_10,[createTextVNode(toDisplayString$1(unref(C)("bds.tableaux"))+" ",1),createVNode(_sfc_main$G,{"id-bd":ee.id,"importation-permise":""},{activator:withCtx(({props:oe})=>[I.value?(openBlock(),createBlock(VBtn,mergeProps({key:0},oe,{icon:"mdi-plus",size:"small",variant:"flat"}),null,16)):createCommentVNode("",!0)]),_:1},8,["id-bd"])]),createVNode(VDivider),ce.value===null?(openBlock(),createBlock(unref(VSkeletonLoader),{key:0,type:"paragraph"})):ce.value&&!ce.value.length?(openBlock(),createElementBlock("div",_hoisted_11,[createBaseVNode("p",_hoisted_12,toDisplayString$1(unref(C)("bds.tableaux")),1),createVNode(VImg,{src:unref(A),class:"my-5",contain:"",height:"175px"},null,8,["src"]),createVNode(_sfc_main$G,{"id-bd":ee.id,"importation-permise":""},{activator:withCtx(({props:oe})=>[I.value?(openBlock(),createBlock(VBtn,mergeProps({key:0},oe,{color:"primary",class:"mx-2",variant:"outlined"}),{prepend:withCtx(()=>[createVNode(VIcon,{icon:"mdi-table",start:""})]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(unref(C)("bds.ajouterTableau")),1)]),_:2},1040)):createCommentVNode("",!0)]),_:1},8,["id-bd"]),createVNode(_sfc_main$q,{type:"importation",automatiser:!0,"info-objet":{id:ee.id,typeObjet:"bd"}},{default:withCtx(()=>[I.value?(openBlock(),createBlock(VBtn,{key:0,color:"primary",class:"mx-2",variant:"outlined",icon:"mdi-import"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("bds.importation")),1)]),_:1})):createCommentVNode("",!0)]),_:1},8,["info-objet"])])):(openBlock(),createBlock(TransitionGroup,{key:2,name:"fade",mode:"out-in",class:"d-flex flex-wrap justify-center"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(ve.value,oe=>(openBlock(),createBlock(_sfc_main$1l,{id:oe.id,key:oe.id,"id-bd":ee.id,onClick:ie=>ee.$router.push(`/bd/visualiser/${encodeURIComponent(ee.id)}/tableau/${encodeURIComponent(oe.id)}`)},null,8,["id","id-bd","onClick"]))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}))}});function bind(r,n){return function(){return r.apply(n,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(r=>n=>{const _=toString.call(n);return r[_]||(r[_]=_.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=r=>(r=r.toLowerCase(),n=>kindOf(n)===r),typeOfTest=r=>n=>typeof n===r,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(r){return r!==null&&!isUndefined(r)&&r.constructor!==null&&!isUndefined(r.constructor)&&isFunction(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(r){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(r):n=r&&r.buffer&&isArrayBuffer(r.buffer),n}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$1=r=>r!==null&&typeof r=="object",isBoolean=r=>r===!0||r===!1,isPlainObject=r=>{if(kindOf(r)!=="object")return!1;const n=getPrototypeOf(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=r=>isObject$1(r)&&isFunction(r.pipe),isFormData=r=>{let n;return r&&(typeof FormData=="function"&&r instanceof FormData||isFunction(r.append)&&((n=kindOf(r))==="formdata"||n==="object"&&isFunction(r.toString)&&r.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(r,n,{allOwnKeys:_=!1}={}){if(r===null||typeof r>"u")return;let x,S;if(typeof r!="object"&&(r=[r]),isArray(r))for(x=0,S=r.length;x<S;x++)n.call(null,r[x],x,r);else{const E=_?Object.getOwnPropertyNames(r):Object.keys(r),C=E.length;let T;for(x=0;x<C;x++)T=E[x],n.call(null,r[T],T,r)}}function findKey(r,n){n=n.toLowerCase();const _=Object.keys(r);let x=_.length,S;for(;x-- >0;)if(S=_[x],n===S.toLowerCase())return S;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global$1)(),isContextDefined=r=>!isUndefined(r)&&r!==_global;function merge(){const{caseless:r}=isContextDefined(this)&&this||{},n={},_=(x,S)=>{const E=r&&findKey(n,S)||S;isPlainObject(n[E])&&isPlainObject(x)?n[E]=merge(n[E],x):isPlainObject(x)?n[E]=merge({},x):isArray(x)?n[E]=x.slice():n[E]=x};for(let x=0,S=arguments.length;x<S;x++)arguments[x]&&forEach(arguments[x],_);return n}const extend=(r,n,_,{allOwnKeys:x}={})=>(forEach(n,(S,E)=>{_&&isFunction(S)?r[E]=bind(S,_):r[E]=S},{allOwnKeys:x}),r),stripBOM=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),inherits=(r,n,_,x)=>{r.prototype=Object.create(n.prototype,x),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:n.prototype}),_&&Object.assign(r.prototype,_)},toFlatObject=(r,n,_,x)=>{let S,E,C;const T={};if(n=n||{},r==null)return n;do{for(S=Object.getOwnPropertyNames(r),E=S.length;E-- >0;)C=S[E],(!x||x(C,r,n))&&!T[C]&&(n[C]=r[C],T[C]=!0);r=_!==!1&&getPrototypeOf(r)}while(r&&(!_||_(r,n))&&r!==Object.prototype);return n},endsWith=(r,n,_)=>{r=String(r),(_===void 0||_>r.length)&&(_=r.length),_-=n.length;const x=r.indexOf(n,_);return x!==-1&&x===_},toArray=r=>{if(!r)return null;if(isArray(r))return r;let n=r.length;if(!isNumber(n))return null;const _=new Array(n);for(;n-- >0;)_[n]=r[n];return _},isTypedArray=(r=>n=>r&&n instanceof r)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(r,n)=>{const x=(r&&r[Symbol.iterator]).call(r);let S;for(;(S=x.next())&&!S.done;){const E=S.value;n.call(r,E[0],E[1])}},matchAll=(r,n)=>{let _;const x=[];for(;(_=r.exec(n))!==null;)x.push(_);return x},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(_,x,S){return x.toUpperCase()+S}),hasOwnProperty=(({hasOwnProperty:r})=>(n,_)=>r.call(n,_))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(r,n)=>{const _=Object.getOwnPropertyDescriptors(r),x={};forEach(_,(S,E)=>{n(S,E,r)!==!1&&(x[E]=S)}),Object.defineProperties(r,x)},freezeMethods=r=>{reduceDescriptors(r,(n,_)=>{if(isFunction(r)&&["arguments","caller","callee"].indexOf(_)!==-1)return!1;const x=r[_];if(isFunction(x)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+_+"'")})}})},toObjectSet=(r,n)=>{const _={},x=S=>{S.forEach(E=>{_[E]=!0})};return isArray(r)?x(r):x(String(r).split(n)),_},noop=()=>{},toFiniteNumber=(r,n)=>(r=+r,Number.isFinite(r)?r:n),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(r=16,n=ALPHABET.ALPHA_DIGIT)=>{let _="";const{length:x}=n;for(;r--;)_+=n[Math.random()*x|0];return _};function isSpecCompliantForm(r){return!!(r&&isFunction(r.append)&&r[Symbol.toStringTag]==="FormData"&&r[Symbol.iterator])}const toJSONObject=r=>{const n=new Array(10),_=(x,S)=>{if(isObject$1(x)){if(n.indexOf(x)>=0)return;if(!("toJSON"in x)){n[S]=x;const E=isArray(x)?[]:{};return forEach(x,(C,T)=>{const B=_(C,S+1);!isUndefined(B)&&(E[T]=B)}),n[S]=void 0,E}}return x};return _(r,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=r=>r&&(isObject$1(r)||isFunction(r))&&isFunction(r.then)&&isFunction(r.catch),utils={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject:isObject$1,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(r,n,_,x,S){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",n&&(this.code=n),_&&(this.config=_),x&&(this.request=x),S&&(this.response=S)}utils.inherits(AxiosError,Error,{toJSON:function r(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{descriptors[r]={value:r}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(r,n,_,x,S,E)=>{const C=Object.create(prototype$1);return utils.toFlatObject(r,C,function(B){return B!==Error.prototype},T=>T!=="isAxiosError"),AxiosError.call(C,r.message,n,_,x,S),C.cause=r,C.name=r.name,E&&Object.assign(C,E),C};const httpAdapter=null;function isVisitable(r){return utils.isPlainObject(r)||utils.isArray(r)}function removeBrackets(r){return utils.endsWith(r,"[]")?r.slice(0,-2):r}function renderKey(r,n,_){return r?r.concat(n).map(function(S,E){return S=removeBrackets(S),!_&&E?"["+S+"]":S}).join(_?".":""):n}function isFlatArray(r){return utils.isArray(r)&&!r.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function r(n){return/^is[A-Z]/.test(n)});function toFormData(r,n,_){if(!utils.isObject(r))throw new TypeError("target must be an object");n=n||new FormData,_=utils.toFlatObject(_,{metaTokens:!0,dots:!1,indexes:!1},!1,function(F,M){return!utils.isUndefined(M[F])});const x=_.metaTokens,S=_.visitor||I,E=_.dots,C=_.indexes,B=(_.Blob||typeof Blob<"u"&&Blob)&&utils.isSpecCompliantForm(n);if(!utils.isFunction(S))throw new TypeError("visitor must be a function");function A(O){if(O===null)return"";if(utils.isDate(O))return O.toISOString();if(!B&&utils.isBlob(O))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(O)||utils.isTypedArray(O)?B&&typeof Blob=="function"?new Blob([O]):Buffer$5.from(O):O}function I(O,F,M){let L=O;if(O&&!M&&typeof O=="object"){if(utils.endsWith(F,"{}"))F=x?F:F.slice(0,-2),O=JSON.stringify(O);else if(utils.isArray(O)&&isFlatArray(O)||(utils.isFileList(O)||utils.endsWith(F,"[]"))&&(L=utils.toArray(O)))return F=removeBrackets(F),L.forEach(function(q,H){!(utils.isUndefined(q)||q===null)&&n.append(C===!0?renderKey([F],H,E):C===null?F:F+"[]",A(q))}),!1}return isVisitable(O)?!0:(n.append(renderKey(M,F,E),A(O)),!1)}const N=[],V=Object.assign(predicates,{defaultVisitor:I,convertValue:A,isVisitable});function D(O,F){if(!utils.isUndefined(O)){if(N.indexOf(O)!==-1)throw Error("Circular reference detected in "+F.join("."));N.push(O),utils.forEach(O,function(L,j){(!(utils.isUndefined(L)||L===null)&&S.call(n,L,utils.isString(j)?j.trim():j,F,V))===!0&&D(L,F?F.concat(j):[j])}),N.pop()}}if(!utils.isObject(r))throw new TypeError("data must be an object");return D(r),n}function encode$1(r){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(x){return n[x]})}function AxiosURLSearchParams(r,n){this._pairs=[],r&&toFormData(r,this,n)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function r(n,_){this._pairs.push([n,_])};prototype.toString=function r(n){const _=n?function(x){return n.call(this,x,encode$1)}:encode$1;return this._pairs.map(function(S){return _(S[0])+"="+_(S[1])},"").join("&")};function encode(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(r,n,_){if(!n)return r;const x=_&&_.encode||encode,S=_&&_.serialize;let E;if(S?E=S(n,_):E=utils.isURLSearchParams(n)?n.toString():new AxiosURLSearchParams(n,_).toString(x),E){const C=r.indexOf("#");C!==-1&&(r=r.slice(0,C)),r+=(r.indexOf("?")===-1?"?":"&")+E}return r}class InterceptorManager{constructor(){this.handlers=[]}use(n,_,x){return this.handlers.push({fulfilled:n,rejected:_,synchronous:x?x.synchronous:!1,runWhen:x?x.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){utils.forEach(this.handlers,function(x){x!==null&&n(x)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let r;return typeof navigator<"u"&&((r=navigator.product)==="ReactNative"||r==="NativeScript"||r==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(r,n){return toFormData(r,new platform.classes.URLSearchParams,Object.assign({visitor:function(_,x,S,E){return platform.isNode&&utils.isBuffer(_)?(this.append(x,_.toString("base64")),!1):E.defaultVisitor.apply(this,arguments)}},n))}function parsePropPath(r){return utils.matchAll(/\w+|\[(\w*)]/g,r).map(n=>n[0]==="[]"?"":n[1]||n[0])}function arrayToObject(r){const n={},_=Object.keys(r);let x;const S=_.length;let E;for(x=0;x<S;x++)E=_[x],n[E]=r[E];return n}function formDataToJSON(r){function n(_,x,S,E){let C=_[E++];const T=Number.isFinite(+C),B=E>=_.length;return C=!C&&utils.isArray(S)?S.length:C,B?(utils.hasOwnProp(S,C)?S[C]=[S[C],x]:S[C]=x,!T):((!S[C]||!utils.isObject(S[C]))&&(S[C]=[]),n(_,x,S[C],E)&&utils.isArray(S[C])&&(S[C]=arrayToObject(S[C])),!T)}if(utils.isFormData(r)&&utils.isFunction(r.entries)){const _={};return utils.forEachEntry(r,(x,S)=>{n(parsePropPath(x),S,_,0)}),_}return null}const DEFAULT_CONTENT_TYPE={"Content-Type":void 0};function stringifySafely(r,n,_){if(utils.isString(r))try{return(n||JSON.parse)(r),utils.trim(r)}catch(x){if(x.name!=="SyntaxError")throw x}return(_||JSON.stringify)(r)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function r(n,_){const x=_.getContentType()||"",S=x.indexOf("application/json")>-1,E=utils.isObject(n);if(E&&utils.isHTMLForm(n)&&(n=new FormData(n)),utils.isFormData(n))return S&&S?JSON.stringify(formDataToJSON(n)):n;if(utils.isArrayBuffer(n)||utils.isBuffer(n)||utils.isStream(n)||utils.isFile(n)||utils.isBlob(n))return n;if(utils.isArrayBufferView(n))return n.buffer;if(utils.isURLSearchParams(n))return _.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let T;if(E){if(x.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(n,this.formSerializer).toString();if((T=utils.isFileList(n))||x.indexOf("multipart/form-data")>-1){const B=this.env&&this.env.FormData;return toFormData(T?{"files[]":n}:n,B&&new B,this.formSerializer)}}return E||S?(_.setContentType("application/json",!1),stringifySafely(n)):n}],transformResponse:[function r(n){const _=this.transitional||defaults.transitional,x=_&&_.forcedJSONParsing,S=this.responseType==="json";if(n&&utils.isString(n)&&(x&&!this.responseType||S)){const C=!(_&&_.silentJSONParsing)&&S;try{return JSON.parse(n)}catch(T){if(C)throw T.name==="SyntaxError"?AxiosError.from(T,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):T}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function r(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function r(n){defaults.headers[n]={}});utils.forEach(["post","put","patch"],function r(n){defaults.headers[n]=utils.merge(DEFAULT_CONTENT_TYPE)});const defaults$1=defaults,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=r=>{const n={};let _,x,S;return r&&r.split(`
`).forEach(function(C){S=C.indexOf(":"),_=C.substring(0,S).trim().toLowerCase(),x=C.substring(S+1).trim(),!(!_||n[_]&&ignoreDuplicateOf[_])&&(_==="set-cookie"?n[_]?n[_].push(x):n[_]=[x]:n[_]=n[_]?n[_]+", "+x:x)}),n},$internals=Symbol("internals");function normalizeHeader(r){return r&&String(r).trim().toLowerCase()}function normalizeValue(r){return r===!1||r==null?r:utils.isArray(r)?r.map(normalizeValue):String(r)}function parseTokens(r){const n=Object.create(null),_=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let x;for(;x=_.exec(r);)n[x[1]]=x[2];return n}const isValidHeaderName=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function matchHeaderValue(r,n,_,x,S){if(utils.isFunction(x))return x.call(this,n,_);if(S&&(n=_),!!utils.isString(n)){if(utils.isString(x))return n.indexOf(x)!==-1;if(utils.isRegExp(x))return x.test(n)}}function formatHeader(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,_,x)=>_.toUpperCase()+x)}function buildAccessors(r,n){const _=utils.toCamelCase(" "+n);["get","set","has"].forEach(x=>{Object.defineProperty(r,x+_,{value:function(S,E,C){return this[x].call(this,n,S,E,C)},configurable:!0})})}class AxiosHeaders{constructor(n){n&&this.set(n)}set(n,_,x){const S=this;function E(T,B,A){const I=normalizeHeader(B);if(!I)throw new Error("header name must be a non-empty string");const N=utils.findKey(S,I);(!N||S[N]===void 0||A===!0||A===void 0&&S[N]!==!1)&&(S[N||B]=normalizeValue(T))}const C=(T,B)=>utils.forEach(T,(A,I)=>E(A,I,B));return utils.isPlainObject(n)||n instanceof this.constructor?C(n,_):utils.isString(n)&&(n=n.trim())&&!isValidHeaderName(n)?C(parseHeaders(n),_):n!=null&&E(_,n,x),this}get(n,_){if(n=normalizeHeader(n),n){const x=utils.findKey(this,n);if(x){const S=this[x];if(!_)return S;if(_===!0)return parseTokens(S);if(utils.isFunction(_))return _.call(this,S,x);if(utils.isRegExp(_))return _.exec(S);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,_){if(n=normalizeHeader(n),n){const x=utils.findKey(this,n);return!!(x&&this[x]!==void 0&&(!_||matchHeaderValue(this,this[x],x,_)))}return!1}delete(n,_){const x=this;let S=!1;function E(C){if(C=normalizeHeader(C),C){const T=utils.findKey(x,C);T&&(!_||matchHeaderValue(x,x[T],T,_))&&(delete x[T],S=!0)}}return utils.isArray(n)?n.forEach(E):E(n),S}clear(n){const _=Object.keys(this);let x=_.length,S=!1;for(;x--;){const E=_[x];(!n||matchHeaderValue(this,this[E],E,n,!0))&&(delete this[E],S=!0)}return S}normalize(n){const _=this,x={};return utils.forEach(this,(S,E)=>{const C=utils.findKey(x,E);if(C){_[C]=normalizeValue(S),delete _[E];return}const T=n?formatHeader(E):String(E).trim();T!==E&&delete _[E],_[T]=normalizeValue(S),x[T]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const _=Object.create(null);return utils.forEach(this,(x,S)=>{x!=null&&x!==!1&&(_[S]=n&&utils.isArray(x)?x.join(", "):x)}),_}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,_])=>n+": "+_).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,..._){const x=new this(n);return _.forEach(S=>x.set(S)),x}static accessor(n){const x=(this[$internals]=this[$internals]={accessors:{}}).accessors,S=this.prototype;function E(C){const T=normalizeHeader(C);x[T]||(buildAccessors(S,C),x[T]=!0)}return utils.isArray(n)?n.forEach(E):E(n),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils.freezeMethods(AxiosHeaders.prototype);utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(r,n){const _=this||defaults$1,x=n||_,S=AxiosHeaders$1.from(x.headers);let E=x.data;return utils.forEach(r,function(T){E=T.call(_,E,S.normalize(),n?n.status:void 0)}),S.normalize(),E}function isCancel(r){return!!(r&&r.__CANCEL__)}function CanceledError(r,n,_){AxiosError.call(this,r??"canceled",AxiosError.ERR_CANCELED,n,_),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(r,n,_){const x=_.config.validateStatus;!_.status||!x||x(_.status)?r(_):n(new AxiosError("Request failed with status code "+_.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(_.status/100)-4],_.config,_.request,_))}const cookies=platform.isStandardBrowserEnv?function r(){return{write:function(_,x,S,E,C,T){const B=[];B.push(_+"="+encodeURIComponent(x)),utils.isNumber(S)&&B.push("expires="+new Date(S).toGMTString()),utils.isString(E)&&B.push("path="+E),utils.isString(C)&&B.push("domain="+C),T===!0&&B.push("secure"),document.cookie=B.join("; ")},read:function(_){const x=document.cookie.match(new RegExp("(^|;\\s*)("+_+")=([^;]*)"));return x?decodeURIComponent(x[3]):null},remove:function(_){this.write(_,"",Date.now()-864e5)}}}():function r(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function combineURLs(r,n){return n?r.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):r}function buildFullPath(r,n){return r&&!isAbsoluteURL(n)?combineURLs(r,n):n}const isURLSameOrigin=platform.isStandardBrowserEnv?function r(){const n=/(msie|trident)/i.test(navigator.userAgent),_=document.createElement("a");let x;function S(E){let C=E;return n&&(_.setAttribute("href",C),C=_.href),_.setAttribute("href",C),{href:_.href,protocol:_.protocol?_.protocol.replace(/:$/,""):"",host:_.host,search:_.search?_.search.replace(/^\?/,""):"",hash:_.hash?_.hash.replace(/^#/,""):"",hostname:_.hostname,port:_.port,pathname:_.pathname.charAt(0)==="/"?_.pathname:"/"+_.pathname}}return x=S(window.location.href),function(C){const T=utils.isString(C)?S(C):C;return T.protocol===x.protocol&&T.host===x.host}}():function r(){return function(){return!0}}();function parseProtocol(r){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return n&&n[1]||""}function speedometer(r,n){r=r||10;const _=new Array(r),x=new Array(r);let S=0,E=0,C;return n=n!==void 0?n:1e3,function(B){const A=Date.now(),I=x[E];C||(C=A),_[S]=B,x[S]=A;let N=E,V=0;for(;N!==S;)V+=_[N++],N=N%r;if(S=(S+1)%r,S===E&&(E=(E+1)%r),A-C<n)return;const D=I&&A-I;return D?Math.round(V*1e3/D):void 0}}function progressEventReducer(r,n){let _=0;const x=speedometer(50,250);return S=>{const E=S.loaded,C=S.lengthComputable?S.total:void 0,T=E-_,B=x(T),A=E<=C;_=E;const I={loaded:E,total:C,progress:C?E/C:void 0,bytes:T,rate:B||void 0,estimated:B&&C&&A?(C-E)/B:void 0,event:S};I[n?"download":"upload"]=!0,r(I)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(r){return new Promise(function(_,x){let S=r.data;const E=AxiosHeaders$1.from(r.headers).normalize(),C=r.responseType;let T;function B(){r.cancelToken&&r.cancelToken.unsubscribe(T),r.signal&&r.signal.removeEventListener("abort",T)}utils.isFormData(S)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv?E.setContentType(!1):E.setContentType("multipart/form-data;",!1));let A=new XMLHttpRequest;if(r.auth){const D=r.auth.username||"",O=r.auth.password?unescape(encodeURIComponent(r.auth.password)):"";E.set("Authorization","Basic "+btoa(D+":"+O))}const I=buildFullPath(r.baseURL,r.url);A.open(r.method.toUpperCase(),buildURL(I,r.params,r.paramsSerializer),!0),A.timeout=r.timeout;function N(){if(!A)return;const D=AxiosHeaders$1.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),F={data:!C||C==="text"||C==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:D,config:r,request:A};settle(function(L){_(L),B()},function(L){x(L),B()},F),A=null}if("onloadend"in A?A.onloadend=N:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(N)},A.onabort=function(){A&&(x(new AxiosError("Request aborted",AxiosError.ECONNABORTED,r,A)),A=null)},A.onerror=function(){x(new AxiosError("Network Error",AxiosError.ERR_NETWORK,r,A)),A=null},A.ontimeout=function(){let O=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const F=r.transitional||transitionalDefaults;r.timeoutErrorMessage&&(O=r.timeoutErrorMessage),x(new AxiosError(O,F.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,r,A)),A=null},platform.isStandardBrowserEnv){const D=(r.withCredentials||isURLSameOrigin(I))&&r.xsrfCookieName&&cookies.read(r.xsrfCookieName);D&&E.set(r.xsrfHeaderName,D)}S===void 0&&E.setContentType(null),"setRequestHeader"in A&&utils.forEach(E.toJSON(),function(O,F){A.setRequestHeader(F,O)}),utils.isUndefined(r.withCredentials)||(A.withCredentials=!!r.withCredentials),C&&C!=="json"&&(A.responseType=r.responseType),typeof r.onDownloadProgress=="function"&&A.addEventListener("progress",progressEventReducer(r.onDownloadProgress,!0)),typeof r.onUploadProgress=="function"&&A.upload&&A.upload.addEventListener("progress",progressEventReducer(r.onUploadProgress)),(r.cancelToken||r.signal)&&(T=D=>{A&&(x(!D||D.type?new CanceledError(null,r,A):D),A.abort(),A=null)},r.cancelToken&&r.cancelToken.subscribe(T),r.signal&&(r.signal.aborted?T():r.signal.addEventListener("abort",T)));const V=parseProtocol(I);if(V&&platform.protocols.indexOf(V)===-1){x(new AxiosError("Unsupported protocol "+V+":",AxiosError.ERR_BAD_REQUEST,r));return}A.send(S||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(r,n)=>{if(r){try{Object.defineProperty(r,"name",{value:n})}catch{}Object.defineProperty(r,"adapterName",{value:n})}});const adapters={getAdapter:r=>{r=utils.isArray(r)?r:[r];const{length:n}=r;let _,x;for(let S=0;S<n&&(_=r[S],!(x=utils.isString(_)?knownAdapters[_.toLowerCase()]:_));S++);if(!x)throw x===!1?new AxiosError(`Adapter ${_} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,_)?`Adapter '${_}' is not available in the build`:`Unknown adapter '${_}'`);if(!utils.isFunction(x))throw new TypeError("adapter is not a function");return x},adapters:knownAdapters};function throwIfCancellationRequested(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new CanceledError(null,r)}function dispatchRequest(r){return throwIfCancellationRequested(r),r.headers=AxiosHeaders$1.from(r.headers),r.data=transformData.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(r.adapter||defaults$1.adapter)(r).then(function(x){return throwIfCancellationRequested(r),x.data=transformData.call(r,r.transformResponse,x),x.headers=AxiosHeaders$1.from(x.headers),x},function(x){return isCancel(x)||(throwIfCancellationRequested(r),x&&x.response&&(x.response.data=transformData.call(r,r.transformResponse,x.response),x.response.headers=AxiosHeaders$1.from(x.response.headers))),Promise.reject(x)})}const headersToObject=r=>r instanceof AxiosHeaders$1?r.toJSON():r;function mergeConfig(r,n){n=n||{};const _={};function x(A,I,N){return utils.isPlainObject(A)&&utils.isPlainObject(I)?utils.merge.call({caseless:N},A,I):utils.isPlainObject(I)?utils.merge({},I):utils.isArray(I)?I.slice():I}function S(A,I,N){if(utils.isUndefined(I)){if(!utils.isUndefined(A))return x(void 0,A,N)}else return x(A,I,N)}function E(A,I){if(!utils.isUndefined(I))return x(void 0,I)}function C(A,I){if(utils.isUndefined(I)){if(!utils.isUndefined(A))return x(void 0,A)}else return x(void 0,I)}function T(A,I,N){if(N in n)return x(A,I);if(N in r)return x(void 0,A)}const B={url:E,method:E,data:E,baseURL:C,transformRequest:C,transformResponse:C,paramsSerializer:C,timeout:C,timeoutMessage:C,withCredentials:C,adapter:C,responseType:C,xsrfCookieName:C,xsrfHeaderName:C,onUploadProgress:C,onDownloadProgress:C,decompress:C,maxContentLength:C,maxBodyLength:C,beforeRedirect:C,transport:C,httpAgent:C,httpsAgent:C,cancelToken:C,socketPath:C,responseEncoding:C,validateStatus:T,headers:(A,I)=>S(headersToObject(A),headersToObject(I),!0)};return utils.forEach(Object.keys(Object.assign({},r,n)),function(I){const N=B[I]||S,V=N(r[I],n[I],I);utils.isUndefined(V)&&N!==T||(_[I]=V)}),_}const VERSION="1.4.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((r,n)=>{validators$1[r]=function(x){return typeof x===r||"a"+(n<1?"n ":" ")+r}});const deprecatedWarnings={};validators$1.transitional=function r(n,_,x){function S(E,C){return"[Axios v"+VERSION+"] Transitional option '"+E+"'"+C+(x?". "+x:"")}return(E,C,T)=>{if(n===!1)throw new AxiosError(S(C," has been removed"+(_?" in "+_:"")),AxiosError.ERR_DEPRECATED);return _&&!deprecatedWarnings[C]&&(deprecatedWarnings[C]=!0,console.warn(S(C," has been deprecated since v"+_+" and will be removed in the near future"))),n?n(E,C,T):!0}};function assertOptions(r,n,_){if(typeof r!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const x=Object.keys(r);let S=x.length;for(;S-- >0;){const E=x[S],C=n[E];if(C){const T=r[E],B=T===void 0||C(T,E,r);if(B!==!0)throw new AxiosError("option "+E+" must be "+B,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(_!==!0)throw new AxiosError("Unknown option "+E,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(n){this.defaults=n,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(n,_){typeof n=="string"?(_=_||{},_.url=n):_=n||{},_=mergeConfig(this.defaults,_);const{transitional:x,paramsSerializer:S,headers:E}=_;x!==void 0&&validator.assertOptions(x,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),S!=null&&(utils.isFunction(S)?_.paramsSerializer={serialize:S}:validator.assertOptions(S,{encode:validators.function,serialize:validators.function},!0)),_.method=(_.method||this.defaults.method||"get").toLowerCase();let C;C=E&&utils.merge(E.common,E[_.method]),C&&utils.forEach(["delete","get","head","post","put","patch","common"],O=>{delete E[O]}),_.headers=AxiosHeaders$1.concat(C,E);const T=[];let B=!0;this.interceptors.request.forEach(function(F){typeof F.runWhen=="function"&&F.runWhen(_)===!1||(B=B&&F.synchronous,T.unshift(F.fulfilled,F.rejected))});const A=[];this.interceptors.response.forEach(function(F){A.push(F.fulfilled,F.rejected)});let I,N=0,V;if(!B){const O=[dispatchRequest.bind(this),void 0];for(O.unshift.apply(O,T),O.push.apply(O,A),V=O.length,I=Promise.resolve(_);N<V;)I=I.then(O[N++],O[N++]);return I}V=T.length;let D=_;for(N=0;N<V;){const O=T[N++],F=T[N++];try{D=O(D)}catch(M){F.call(this,M);break}}try{I=dispatchRequest.call(this,D)}catch(O){return Promise.reject(O)}for(N=0,V=A.length;N<V;)I=I.then(A[N++],A[N++]);return I}getUri(n){n=mergeConfig(this.defaults,n);const _=buildFullPath(n.baseURL,n.url);return buildURL(_,n.params,n.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function r(n){Axios.prototype[n]=function(_,x){return this.request(mergeConfig(x||{},{method:n,url:_,data:(x||{}).data}))}});utils.forEach(["post","put","patch"],function r(n){function _(x){return function(E,C,T){return this.request(mergeConfig(T||{},{method:n,headers:x?{"Content-Type":"multipart/form-data"}:{},url:E,data:C}))}}Axios.prototype[n]=_(),Axios.prototype[n+"Form"]=_(!0)});const Axios$1=Axios;class CancelToken{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let _;this.promise=new Promise(function(E){_=E});const x=this;this.promise.then(S=>{if(!x._listeners)return;let E=x._listeners.length;for(;E-- >0;)x._listeners[E](S);x._listeners=null}),this.promise.then=S=>{let E;const C=new Promise(T=>{x.subscribe(T),E=T}).then(S);return C.cancel=function(){x.unsubscribe(E)},C},n(function(E,C,T){x.reason||(x.reason=new CanceledError(E,C,T),_(x.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const _=this._listeners.indexOf(n);_!==-1&&this._listeners.splice(_,1)}static source(){let n;return{token:new CancelToken(function(S){n=S}),cancel:n}}}const CancelToken$1=CancelToken;function spread(r){return function(_){return r.apply(null,_)}}function isAxiosError(r){return utils.isObject(r)&&r.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([r,n])=>{HttpStatusCode[n]=r});const HttpStatusCode$1=HttpStatusCode;function createInstance(r){const n=new Axios$1(r),_=bind(Axios$1.prototype.request,n);return utils.extend(_,Axios$1.prototype,n,{allOwnKeys:!0}),utils.extend(_,n,null,{allOwnKeys:!0}),_.create=function(S){return createInstance(mergeConfig(r,S))},_}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function r(n){return Promise.all(n)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=r=>formDataToJSON(utils.isHTMLForm(r)?new FormData(r):r);axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios,_sfc_main$f=defineComponent$1({__name:"ExporterCode",props:{idNuee:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{langue:S}=utiliserLangues(),{t:E}=x(),{mdAndUp:C}=useDisplay(),T=ref$1(!1),B=ref$1(0),A=["prsentation","licenceParDfaut","bdPrincipale","codeGnr"],I=computed(()=>{switch(A[B.value]){case"prsentation":return E("nues.gnrerCode.titrePrsentation");case"licenceParDfaut":return E("nues.gnrerCode.titreLicenceParDfaut");case"bdPrincipale":return E("nues.gnrerCode.titreBdPrincipale");case"codeGnr":return E("nues.gnrerCode.titreCodeGnr");default:return""}}),N=computed(()=>{switch(A[B.value]){case"prsentation":return E("nues.gnrerCode.sousTitrePrsentation");case"licenceParDfaut":return E("nues.gnrerCode.sousTitreLicenceParDfaut");case"bdPrincipale":return E("nues.gnrerCode.sousTitreBdPrincipale");case"codeGnr":return E("nues.gnrerCode.sousTitreCodeGnr");default:return""}}),V=()=>{switch(A[B.value]){default:B.value--;break}},D=()=>{switch(A[B.value]){default:B.value++;break}},O=computed(()=>{switch(A[B.value]){default:return{actif:!0,visible:!0}}}),F=computed(()=>{switch(A[B.value]){default:return{actif:!0,visible:!0}}}),M=ref$1(),L=ref$1();watchEffect(async()=>{L.value=await _?.nues.gnrerSchmaBdNue({idNue:n.idNuee,licence:J.value})});const j=computed(()=>L.value?.tableaux),q=["ts","js"],H=ref$1("ts"),X=ref$1(S.value),J=ref$1("ODbl-1_0"),Z=ref$1([]),ae=ref$1(),ce=computed(()=>{switch(H.value){case"ts":return Y.value;case"js":return pe.value;default:throw new Error(H.value)}}),ve=computed(()=>`
pnpm install @constl/ipa ${ae.value?"@lassi-js/kili":""}
`),pe=computed(()=>`
${G.value}

${W.value}

${ie.value}
`),G=computed(()=>`
${ae.value?"import {  } from '@lassi-js/kili';":""}
`),Y=computed(()=>`
${U.value}

${W.value}

${oe.value}

${ie.value}
`),U=computed(()=>`
${G.value}
import type ClientConstellation, { bds } from "@constl/ipa";
`),W=computed(()=>{if(!M.value)throw new Error("Clef tableau nue non spcifie.");return`
export const clefTableauNue = ${M.value};
${ae.value?"const idBd = "+ae.value:""}
export const idNue = ${n.idNuee}
export const schma ${H.value==="ts"?": bds.schmaSpcificationBd":""} = {
  licence: ${J.value},
  motsClefs: [${Z.value.toString()}],
  tableaux: [
    ${ee.value}
  ],
};
`}),ee=computed(()=>{if(!j.value)throw Error("Tableaux non dfinis.");return j.value.map(ue=>`
{
  cols: [
${ue.cols.map(be=>re(be)).join(`
`)}
]
  clef: "${ue.clef}",
},
`).join(`
`)}),re=ue=>`
{
  idColonne: ${ue.idColonne};
  idVariable: ${ue.idVariable};
${ue.index?"index: true;":""}
}
`,oe=computed(()=>{const ue=j.value?.find(be=>be.clef===M.value)?.cols;if(!ue)throw new Error("Colonnes non dfinies");return`
export type entreDonnesMonProjet = {
  ${ue.map(be=>"[codeColonne"+be.idColonne+"]"+(be.optionnel?"?":"")+": string;")} //  faire: type de colonne dynamique
};

export type KiliMonProjet = <entreDonnesMonProjet>;
`}),ie=computed(()=>{if(!ae.value)return"";const ue=H.value==="ts";return`
export const gnrerKili = ({
  constl,
}${ue?`: {
  constl: ClientConstellation;
}`:""})${ue?": _":""} => {
  return new ${ue?"<__>":""}({
    : constl,
    : {
      _: clefTableauNue,
      : schmaBd,
      _: idBd,
      _: idNue,
    },
  });
};
`}),ne=()=>`
${U.value}

${W.value}

`,te=()=>`
<template>
  <v-dialog>
    
    <v-card>
      <v-card-item>
        <v-card-title>
        </v-card-title>
      </v-card-item>
    </v-card>
  </v-dialog>
</template>
<script setup lang="ts">
import { ref } from "vue";

<+/script>
`.replace("+/","/"),K=ref$1(!1),le=async()=>{const ue=(await axios$1.get(GABARIT_CODE,{responseType:"arraybuffer"})).data,ge=(await JSZip.loadAsync(ue)).folder("paquets")?.folder(K.value?"lectron":"navigateur");if(!ge)throw new Error("Erreur de structure de paquet.");const ye=ne(),Ee=te(),Ne=(K.value?["packages","renderer","src","utils"]:["src","utils"]).reduce((fe,Be)=>fe?fe.folder(Be):null,ge);if(!Ne)throw new Error("Erreur de structure de paquet.");Ne.file("nue.ts",ye);const he=(K.value?["packages","renderer","src","components"]:["src","components"]).reduce((fe,Be)=>fe?fe.folder(Be):null,ge);if(!he)throw new Error("Erreur de structure de paquet.");he.file("AjoutDonnes.vue",Ee);const xe=await ge.generateAsync({type:"blob"});await o(xe,{fileName:"Mon appli.zip"})};return(ue,be)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":be[4]||(be[4]=ge=>T.value=ge)},{activator:withCtx(({props:ge})=>[renderSlot(ue.$slots,"activator",normalizeProps(guardReactiveProps({propsComposante:ge}))),createVNode(VCard,{class:"mx-auto","max-width":unref(C)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(I.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(N.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:B.value,"onUpdate:modelValue":be[3]||(be[3]=ye=>B.value=ye),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(VBtn,{onClick:D})]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(_sfc_main$1d,null,{default:withCtx(()=>[createVNode(VBtn)]),_:1})]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(VRadioGroup,null,{default:withCtx(()=>[createVNode(VRadio),createVNode(VRadio)]),_:1})]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(VBtnToggle,{modelValue:H.value,"onUpdate:modelValue":be[0]||(be[0]=ye=>H.value=ye),mandatory:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(q,ye=>(openBlock(),createBlock(VBtn,{key:ye,value:ye},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)(`communs.langagesInformatiques.${ye}.abr`)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),createVNode(VSelect,{modelValue:X.value,"onUpdate:modelValue":be[1]||(be[1]=ye=>X.value=ye)},null,8,["modelValue"]),createVNode(VTextField,{readonly:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(ve.value),1)]),_:1}),createVNode(VTextarea,{readonly:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(ce.value),1)]),_:1}),createVNode(VBtn,{onClick:be[2]||(be[2]=()=>le())})]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!F.value.actif,onClick:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,F.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!O.value.actif,onClick:D},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,O.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$e=defineComponent$1({__name:"PageNue",props:{id:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),{traduireNom:E}=utiliserLangues(),C=ref$1({}),T=E(C);return enregistrercoute(_?.nues.suivreNomsNue({idNue:n.id,f:B=>C.value=B})),(B,A)=>{const I=resolveComponent("TitrePage");return openBlock(),createBlock(VContainer,null,{default:withCtx(()=>[createVNode(I,{titre:unref(T)||unref(couper)(B.id,50,unref(S)("communs.troisPetitsPoints"))},null,8,["titre"]),createBaseVNode("p",null,toDisplayString$1(B.id),1),createVNode(_sfc_main$f,{"id-nuee":B.id},null,8,["id-nuee"])]),_:1})}}}),VDataTable$1="",VDataTableFooter$1="",makeDataTablePaginateProps=propsFactory({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),VDataTablePaginationSymbol=Symbol.for("vuetify:data-table-pagination");function createPagination(r){const n=useProxiedModel(r,"page",void 0,x=>+(x??1)),_=useProxiedModel(r,"itemsPerPage",void 0,x=>+(x??10));return{page:n,itemsPerPage:_}}function providePagination(r){const{page:n,itemsPerPage:_,itemsLength:x}=r,S=computed(()=>_.value===-1?0:_.value*(n.value-1)),E=computed(()=>_.value===-1?x.value:Math.min(x.value,S.value+_.value)),C=computed(()=>_.value===-1||x.value===0?1:Math.ceil(x.value/_.value));watchEffect(()=>{n.value>C.value&&(n.value=C.value)});function T(V){_.value=V,n.value=1}function B(){n.value=clamp(n.value+1,1,C.value)}function A(){n.value=clamp(n.value-1,1,C.value)}function I(V){n.value=clamp(V,1,C.value)}const N={page:n,itemsPerPage:_,startIndex:S,stopIndex:E,pageCount:C,itemsLength:x,nextPage:B,prevPage:A,setPage:I,setItemsPerPage:T};return provide(VDataTablePaginationSymbol,N),N}function usePagination(){const r=inject$1(VDataTablePaginationSymbol);if(!r)throw new Error("Missing pagination!");return r}function usePaginatedItems(r){const{items:n,startIndex:_,stopIndex:x,itemsPerPage:S}=r;return{paginatedItems:computed(()=>S.value<=0?n.value:n.value.slice(_.value,x.value))}}const makeVDataTableFooterProps=propsFactory({prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),VDataTableFooter=genericComponent()({name:"VDataTableFooter",props:makeVDataTableFooterProps(),setup(r,n){let{slots:_}=n;const{t:x}=useLocale(),{page:S,pageCount:E,startIndex:C,stopIndex:T,itemsLength:B,itemsPerPage:A,setItemsPerPage:I}=usePagination(),N=computed(()=>r.itemsPerPageOptions.map(V=>({...V,title:x(V.title)})));return()=>createVNode("div",{class:"v-data-table-footer"},[_.prepend?.(),createVNode("div",{class:"v-data-table-footer__items-per-page"},[createVNode("span",null,[x(r.itemsPerPageText)]),createVNode(VSelect,{items:N.value,modelValue:A.value,"onUpdate:modelValue":V=>I(Number(V)),density:"compact",variant:"outlined","hide-details":!0},null)]),createVNode("div",{class:"v-data-table-footer__info"},[createVNode("div",null,[x(r.pageText,B.value?C.value+1:0,T.value,B.value)])]),createVNode("div",{class:"v-data-table-footer__pagination"},[createVNode(VBtn,{icon:r.firstIcon,variant:"plain",onClick:()=>S.value=1,disabled:S.value===1,"aria-label":x(r.firstPageLabel)},null),createVNode(VBtn,{icon:r.prevIcon,variant:"plain",onClick:()=>S.value=Math.max(1,S.value-1),disabled:S.value===1,"aria-label":x(r.prevPageLabel)},null),r.showCurrentPage&&createVNode("span",{key:"page",class:"v-data-table-footer__page"},[S.value]),createVNode(VBtn,{icon:r.nextIcon,variant:"plain",onClick:()=>S.value=Math.min(E.value,S.value+1),disabled:S.value===E.value,"aria-label":x(r.nextPageLabel)},null),createVNode(VBtn,{icon:r.lastIcon,variant:"plain",onClick:()=>S.value=E.value,disabled:S.value===E.value,"aria-label":x(r.lastPageLabel)},null)])])}}),VDataTableColumn=defineFunctionalComponent({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String]},(r,n)=>{let{slots:_,attrs:x}=n;const S=r.tag??"td";return createVNode(S,mergeProps({class:["v-data-table__td",{"v-data-table-column--fixed":r.fixed,"v-data-table-column--last-fixed":r.lastFixed,"v-data-table-column--no-padding":r.noPadding},`v-data-table-column--align-${r.align}`],style:{height:convertToUnit(r.height),width:convertToUnit(r.width),left:convertToUnit(r.fixedOffset||null)}},x),{default:()=>[_.default?.()]})}),makeDataTableHeaderProps=propsFactory({headers:{type:Array,default:()=>[]}},"DataTable-header"),VDataTableHeadersSymbol=Symbol.for("vuetify:data-table-headers");function createHeaders(r,n){const _=ref$1([]),x=ref$1([]);watchEffect(()=>{const E=r.headers.length?Array.isArray(r.headers[0])?r.headers:[r.headers]:[],C=E.flatMap((D,O)=>D.map(F=>({column:F,row:O}))),T=E.length,B={title:"",sortable:!1},A={...B,width:48};if(n?.groupBy?.value.length){const D=C.findIndex(O=>{let{column:F}=O;return F.key==="data-table-group"});D<0?C.unshift({column:{...B,key:"data-table-group",title:"Group",rowspan:T},row:0}):C.splice(D,1,{column:{...B,...C[D].column},row:C[D].row})}if(n?.showSelect?.value){const D=C.findIndex(O=>{let{column:F}=O;return F.key==="data-table-select"});D<0?C.unshift({column:{...A,key:"data-table-select",rowspan:T},row:0}):C.splice(D,1,{column:{...A,...C[D].column},row:C[D].row})}if(n?.showExpand?.value){const D=C.findIndex(O=>{let{column:F}=O;return F.key==="data-table-expand"});D<0?C.push({column:{...A,key:"data-table-expand",rowspan:T},row:0}):C.splice(D,1,{column:{...A,...C[D].column},row:C[D].row})}const I=createRange(T).map(()=>[]),N=createRange(T).fill(0);C.forEach(D=>{let{column:O,row:F}=D,M=O.key;M==null&&(M="");for(let L=F;L<=F+(O.rowspan??1)-1;L++)I[L].push({...O,key:M,fixedOffset:N[L],sortable:O.sortable??!!O.key}),N[L]+=Number(O.width??0)}),I.forEach(D=>{for(let O=D.length;O--;O>=0)if(D[O].fixed){D[O].lastFixed=!0;return}});const V=new Set;_.value=I.map(D=>{const O=[];for(const F of D)V.has(F.key)||(V.add(F.key),O.push(F));return O}),x.value=I.at(-1)??[]});const S={headers:_,columns:x};return provide(VDataTableHeadersSymbol,S),S}function useHeaders(){const r=inject$1(VDataTableHeadersSymbol);if(!r)throw new Error("Missing headers!");return r}const singleSelectStrategy={showSelectAll:!1,allSelected:()=>[],select:r=>{let{items:n,value:_}=r;return new Set(_?[n[0]?.value]:[])},selectAll:r=>{let{selected:n}=r;return n}},pageSelectStrategy={showSelectAll:!0,allSelected:r=>{let{currentPage:n}=r;return n},select:r=>{let{items:n,value:_,selected:x}=r;for(const S of n)_?x.add(S.value):x.delete(S.value);return x},selectAll:r=>{let{value:n,currentPage:_,selected:x}=r;return pageSelectStrategy.select({items:_,value:n,selected:x})}},allSelectStrategy={showSelectAll:!0,allSelected:r=>{let{allItems:n}=r;return n},select:r=>{let{items:n,value:_,selected:x}=r;for(const S of n)_?x.add(S.value):x.delete(S.value);return x},selectAll:r=>{let{value:n,allItems:_,selected:x}=r;return allSelectStrategy.select({items:_,value:n,selected:x})}},makeDataTableSelectProps=propsFactory({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]}},"DataTable-select"),VDataTableSelectionSymbol=Symbol.for("vuetify:data-table-selection");function provideSelection(r,n){let{allItems:_,currentPage:x}=n;const S=useProxiedModel(r,"modelValue",r.modelValue,M=>new Set(M),M=>[...M.values()]),E=computed(()=>_.value.filter(M=>M.selectable)),C=computed(()=>x.value.filter(M=>M.selectable)),T=computed(()=>{if(typeof r.selectStrategy=="object")return r.selectStrategy;switch(r.selectStrategy){case"single":return singleSelectStrategy;case"all":return allSelectStrategy;case"page":default:return pageSelectStrategy}});function B(M){return wrapInArray(M).every(L=>S.value.has(L.value))}function A(M){return wrapInArray(M).some(L=>S.value.has(L.value))}function I(M,L){const j=T.value.select({items:M,value:L,selected:new Set(S.value)});S.value=j}function N(M){I([M],!B([M]))}function V(M){const L=T.value.selectAll({value:M,allItems:E.value,currentPage:C.value,selected:new Set(S.value)});S.value=L}const D=computed(()=>S.value.size>0),O=computed(()=>{const M=T.value.allSelected({allItems:E.value,currentPage:C.value});return B(M)}),F={toggleSelect:N,select:I,selectAll:V,isSelected:B,isSomeSelected:A,someSelected:D,allSelected:O,showSelectAll:T.value.showSelectAll};return provide(VDataTableSelectionSymbol,F),F}function useSelection(){const r=inject$1(VDataTableSelectionSymbol);if(!r)throw new Error("Missing selection!");return r}const makeDataTableSortProps=propsFactory({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),VDataTableSortSymbol=Symbol.for("vuetify:data-table-sort");function createSort(r){const n=useProxiedModel(r,"sortBy"),_=toRef(r,"mustSort"),x=toRef(r,"multiSort");return{sortBy:n,mustSort:_,multiSort:x}}function provideSort(r){const{sortBy:n,mustSort:_,multiSort:x,page:S}=r,E=B=>{let A=n.value.map(N=>({...N}))??[];const I=A.find(N=>N.key===B.key);I?I.order==="desc"?_.value?I.order="asc":A=A.filter(N=>N.key!==B.key):I.order="desc":x.value?A=[...A,{key:B.key,order:"asc"}]:A=[{key:B.key,order:"asc"}],n.value=A,S&&(S.value=1)};function C(B){return!!n.value.find(A=>A.key===B.key)}const T={sortBy:n,toggleSort:E,isSorted:C};return provide(VDataTableSortSymbol,T),T}function useSort(){const r=inject$1(VDataTableSortSymbol);if(!r)throw new Error("Missing sort!");return r}function useSortedItems(r,n,_){const x=useLocale();return{sortedItems:computed(()=>_.value.length?sortItems(n.value,_.value,x.current.value,r.customKeySort):n.value)}}function sortItems(r,n,_,x){const S=new Intl.Collator(_,{sensitivity:"accent",usage:"sort"});return[...r].sort((E,C)=>{for(let T=0;T<n.length;T++){const B=n[T].key,A=n[T].order??"asc";if(A===!1)continue;let I=getObjectValueByPath(E.raw,B),N=getObjectValueByPath(C.raw,B);if(A==="desc"&&([I,N]=[N,I]),x?.[B]){const V=x[B](I,N);if(!V)continue;return V}if(I instanceof Date&&N instanceof Date)return I.getTime()-N.getTime();if([I,N]=[I,N].map(V=>V!=null?V.toString().toLocaleLowerCase():V),I!==N)return isEmpty(I)&&isEmpty(N)?0:isEmpty(I)?-1:isEmpty(N)?1:!isNaN(I)&&!isNaN(N)?Number(I)-Number(N):S.compare(I,N)}return 0})}const makeVDataTableHeadersProps=propsFactory({color:String,sticky:Boolean,multiSort:Boolean,sortAscIcon:{type:IconValue,default:"$sortAsc"},sortDescIcon:{type:IconValue,default:"$sortDesc"},...makeLoaderProps()},"VDataTableHeaders"),VDataTableHeaders=genericComponent()({name:"VDataTableHeaders",props:makeVDataTableHeadersProps(),setup(r,n){let{slots:_,emit:x}=n;const{toggleSort:S,sortBy:E,isSorted:C}=useSort(),{someSelected:T,allSelected:B,selectAll:A,showSelectAll:I}=useSelection(),{columns:N,headers:V}=useHeaders(),{loaderClasses:D}=useLoader(r),O=(H,X)=>{if(!(!r.sticky&&!H.fixed))return{position:"sticky",zIndex:H.fixed?4:r.sticky?3:void 0,left:H.fixed?convertToUnit(H.fixedOffset):void 0,top:r.sticky?`calc(var(--v-table-header-height) * ${X})`:void 0}};function F(H){const X=E.value.find(J=>J.key===H.key);return X?X.order==="asc"?r.sortAscIcon:r.sortDescIcon:r.sortAscIcon}const{backgroundColorClasses:M,backgroundColorStyles:L}=useBackgroundColor(r,"color"),j=computed(()=>({headers:V.value,columns:N.value,toggleSort:S,isSorted:C,sortBy:E.value,someSelected:T.value,allSelected:B.value,selectAll:A,getSortIcon:F,getFixedStyles:O})),q=H=>{let{column:X,x:J,y:Z}=H;const ae=X.key==="data-table-select"||X.key==="data-table-expand";return createVNode(VDataTableColumn,{tag:"th",align:X.align,class:["v-data-table__th",{"v-data-table__th--sortable":X.sortable,"v-data-table__th--sorted":C(X)},D.value],style:{width:convertToUnit(X.width),minWidth:convertToUnit(X.width),...O(X,Z)},colspan:X.colspan,rowspan:X.rowspan,onClick:X.sortable?()=>S(X):void 0,lastFixed:X.lastFixed,noPadding:ae},{default:()=>{const ce=`column.${X.key}`,ve={column:X,selectAll:A,isSorted:C,toggleSort:S,sortBy:E.value,someSelected:T.value,allSelected:B.value,getSortIcon:F};return _[ce]?_[ce](ve):X.key==="data-table-select"?_["column.data-table-select"]?.(ve)??(I&&createVNode(VCheckboxBtn,{modelValue:B.value,indeterminate:T.value&&!B.value,"onUpdate:modelValue":A},null)):createVNode("div",{class:"v-data-table-header__content"},[createVNode("span",null,[X.title]),X.sortable&&createVNode(VIcon,{key:"icon",class:"v-data-table-header__sort-icon",icon:F(X)},null),r.multiSort&&C(X)&&createVNode("div",{key:"badge",class:["v-data-table-header__sort-badge",...M.value],style:L.value},[E.value.findIndex(pe=>pe.key===X.key)+1])])}})};useRender(()=>createVNode(Fragment,null,[_.headers?_.headers(j.value):V.value.map((H,X)=>createVNode("tr",null,[H.map((J,Z)=>createVNode(q,{column:J,x:Z,y:X},null))])),r.loading&&createVNode("tr",{class:"v-data-table-progress"},[createVNode("th",{colspan:N.value.length},[createVNode(LoaderSlot,{name:"v-data-table-progress",active:!0,color:typeof r.loading=="boolean"?void 0:r.loading,indeterminate:!0},{default:_.loader})])])]))}}),makeDataTableGroupProps=propsFactory({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),VDataTableGroupSymbol=Symbol.for("vuetify:data-table-group");function createGroupBy(r){return{groupBy:useProxiedModel(r,"groupBy")}}function provideGroupBy(r){const{groupBy:n,sortBy:_}=r,x=ref$1(new Set),S=computed(()=>n.value.map(A=>({...A,order:A.order??!1})).concat(_.value));function E(A){return x.value.has(A.id)}function C(A){const I=new Set(x.value);E(A)?I.delete(A.id):I.add(A.id),x.value=I}function T(A){function I(N){const V=[];for(const D of N.items)"type"in D&&D.type==="group"?V.push(...I(D)):V.push(D);return V}return I({type:"group",items:A,id:"dummy",key:"dummy",value:"dummy",depth:0})}const B={sortByWithGroups:S,toggleGroup:C,opened:x,groupBy:n,extractRows:T,isGroupOpen:E};return provide(VDataTableGroupSymbol,B),B}function useGroupBy(){const r=inject$1(VDataTableGroupSymbol);if(!r)throw new Error("Missing group!");return r}function groupItemsByProperty(r,n){if(!r.length)return[];const _=new Map;for(const x of r){const S=getObjectValueByPath(x.raw,n);_.has(S)||_.set(S,[]),_.get(S).push(x)}return _}function groupItems(r,n){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!n.length)return[];const S=groupItemsByProperty(r,n[0]),E=[],C=n.slice(1);return S.forEach((T,B)=>{const A=n[0],I=`${x}_${A}_${B}`;E.push({depth:_,id:I,key:A,value:B,items:C.length?groupItems(T,C,_+1,I):T,type:"group"})}),E}function flattenItems(r,n){const _=[];for(const x of r)"type"in x&&x.type==="group"?(x.value!=null&&_.push(x),(n.has(x.id)||x.value==null)&&_.push(...flattenItems(x.items,n))):_.push(x);return _}function useGroupedItems(r,n,_){return{flatItems:computed(()=>{if(!n.value.length)return r.value;const S=groupItems(r.value,n.value.map(E=>E.key));return flattenItems(S,_.value)})}}const makeVDataTableGroupHeaderRowProps=propsFactory({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),VDataTableGroupHeaderRow=genericComponent()({name:"VDataTableGroupHeaderRow",props:makeVDataTableGroupHeaderRowProps(),setup(r,n){let{slots:_}=n;const{isGroupOpen:x,toggleGroup:S,extractRows:E}=useGroupBy(),{isSelected:C,isSomeSelected:T,select:B}=useSelection(),{columns:A}=useHeaders(),I=computed(()=>E([r.item]));return()=>createVNode("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":r.item.depth}},[A.value.map(N=>{if(N.key==="data-table-group"){const V=x(r.item)?"$expand":"$next",D=()=>S(r.item);return _["data-table-group"]?.({item:r.item,count:I.value.length,props:{icon:V,onClick:D}})??createVNode(VDataTableColumn,{class:"v-data-table-group-header-row__column"},{default:()=>[createVNode(VBtn,{size:"small",variant:"text",icon:V,onClick:D},null),createVNode("span",null,[r.item.value]),createVNode("span",null,[createTextVNode("("),I.value.length,createTextVNode(")")])]})}if(N.key==="data-table-select"){const V=C(I.value),D=T(I.value)&&!V,O=F=>B(I.value,F);return _["data-table-select"]?.({props:{modelValue:V,indeterminate:D,"onUpdate:modelValue":O}})??createVNode("td",null,[createVNode(VCheckboxBtn,{modelValue:V,indeterminate:D,"onUpdate:modelValue":O},null)])}return createVNode("td",null,null)})])}}),makeDataTableExpandProps=propsFactory({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),VDataTableExpandedKey=Symbol.for("vuetify:datatable:expanded");function provideExpanded(r){const n=toRef(r,"expandOnClick"),_=useProxiedModel(r,"expanded",r.expanded,T=>new Set(T),T=>[...T.values()]);function x(T,B){const A=new Set(_.value);B?A.add(T.value):A.delete(T.value),_.value=A}function S(T){return _.value.has(T.value)}function E(T){x(T,!S(T))}const C={expand:x,expanded:_,expandOnClick:n,isExpanded:S,toggleExpand:E};return provide(VDataTableExpandedKey,C),C}function useExpanded(){const r=inject$1(VDataTableExpandedKey);if(!r)throw new Error("foo");return r}const makeVDataTableRowProps=propsFactory({index:Number,item:Object,onClick:Function},"VDataTableRow"),VDataTableRow=defineComponent({name:"VDataTableRow",props:makeVDataTableRowProps(),setup(r,n){let{slots:_}=n;const{isSelected:x,toggleSelect:S}=useSelection(),{isExpanded:E,toggleExpand:C}=useExpanded(),{columns:T}=useHeaders();useRender(()=>createVNode("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!r.onClick}],onClick:r.onClick},[r.item&&T.value.map((B,A)=>createVNode(VDataTableColumn,{align:B.align,fixed:B.fixed,fixedOffset:B.fixedOffset,lastFixed:B.lastFixed,noPadding:B.key==="data-table-select"||B.key==="data-table-expand",width:B.width},{default:()=>{const I=r.item,N=`item.${B.key}`,V={index:r.index,item:r.item,columns:T.value,isSelected:x,toggleSelect:S,isExpanded:E,toggleExpand:C};return _[N]?_[N](V):B.key==="data-table-select"?_["item.data-table-select"]?.(V)??createVNode(VCheckboxBtn,{disabled:!I.selectable,modelValue:x([I]),onClick:withModifiers(()=>S(I),["stop"])},null):B.key==="data-table-expand"?_["item.data-table-expand"]?.(V)??createVNode(VBtn,{icon:E(I)?"$collapse":"$expand",size:"small",variant:"text",onClick:withModifiers(()=>C(I),["stop"])},null):getPropertyFromItem(I.columns,B.key)}}))]))}}),makeVDataTableRowsProps=propsFactory({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowHeight:Number,"onClick:row":Function},"VDataTableRows"),VDataTableRows=genericComponent()({name:"VDataTableRows",props:makeVDataTableRowsProps(),setup(r,n){let{emit:_,slots:x}=n;const{columns:S}=useHeaders(),{expandOnClick:E,toggleExpand:C,isExpanded:T}=useExpanded(),{isSelected:B,toggleSelect:A}=useSelection(),{toggleGroup:I,isGroupOpen:N}=useGroupBy(),{t:V}=useLocale();return useRender(()=>r.loading&&x.loading?createVNode("tr",{class:"v-data-table-rows-loading",key:"loading"},[createVNode("td",{colspan:S.value.length},[x.loading()])]):!r.loading&&!r.items.length&&!r.hideNoData?createVNode("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[createVNode("td",{colspan:S.value.length},[x["no-data"]?.()??V(r.noDataText)])]):createVNode(Fragment,null,[r.items.map((D,O)=>{if(D.type==="group")return x["group-header"]?x["group-header"]({index:O,item:D,columns:S.value,isExpanded:T,toggleExpand:C,isSelected:B,toggleSelect:A,toggleGroup:I,isGroupOpen:N}):createVNode(VDataTableGroupHeaderRow,{key:`group-header_${D.id}`,item:D},x);const F={index:O,item:D,columns:S.value,isExpanded:T,toggleExpand:C,isSelected:B,toggleSelect:A},M={...F,props:{key:`item_${D.key??D.index}`,onClick:E.value||r["onClick:row"]?L=>{E.value&&C(D),r["onClick:row"]?.(L,{item:D})}:void 0,index:O,item:D}};return createVNode(Fragment,null,[x.item?x.item(M):createVNode(VDataTableRow,M.props,x),T(D)&&x["expanded-row"]?.(F)])})])),{}}}),VTable$1="",makeVTableProps=propsFactory({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...makeComponentProps(),...makeDensityProps(),...makeTagProps(),...makeThemeProps()},"VTable"),VTable=genericComponent()({name:"VTable",props:makeVTableProps(),setup(r,n){let{slots:_}=n;const{themeClasses:x}=provideTheme(r),{densityClasses:S}=useDensity(r);return useRender(()=>createVNode(r.tag,{class:["v-table",{"v-table--fixed-height":!!r.height,"v-table--fixed-header":r.fixedHeader,"v-table--fixed-footer":r.fixedFooter,"v-table--has-top":!!_.top,"v-table--has-bottom":!!_.bottom,"v-table--hover":r.hover},x.value,S.value,r.class],style:r.style},{default:()=>[_.top?.(),_.default?createVNode("div",{class:"v-table__wrapper",style:{height:convertToUnit(r.height)}},[createVNode("table",null,[_.default()])]):_.wrapper?.(),_.bottom?.()]})),{}}}),makeDataTableItemsProps=propsFactory({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataTable-items");function transformItem(r,n,_,x){const S=r.returnObject?n:getPropertyFromItem(n,r.itemValue),E=getPropertyFromItem(n,r.itemSelectable,!0),C=x.reduce((T,B)=>(T[B.key]=getPropertyFromItem(n,B.value??B.key),T),{});return{type:"item",key:r.returnObject?getPropertyFromItem(n,r.itemValue):S,index:_,value:S,selectable:E,columns:C,raw:n}}function transformItems(r,n,_){return n.map((x,S)=>transformItem(r,x,S,_))}function useDataTableItems(r,n){return{items:computed(()=>transformItems(r,r.items,n.value))}}function useOptions(r){let{page:n,itemsPerPage:_,sortBy:x,groupBy:S,search:E}=r;const C=getCurrentInstance("VDataTable"),T=computed(()=>({page:n.value,itemsPerPage:_.value,sortBy:x.value,groupBy:S.value,search:E.value}));watch(()=>E?.value,()=>{n.value=1});let B=null;watch(T,()=>{deepEqual$2(B,T.value)||(C.emit("update:options",T.value),B=T.value)},{deep:!0,immediate:!0})}const makeDataTableProps=propsFactory({...makeVDataTableRowsProps(),width:[String,Number],search:String,...makeDataTableExpandProps(),...makeDataTableGroupProps(),...makeDataTableHeaderProps(),...makeDataTableItemsProps(),...makeDataTableSelectProps(),...makeDataTableSortProps(),...makeVDataTableHeadersProps(),...makeVTableProps()},"DataTable"),makeVDataTableProps=propsFactory({...makeDataTablePaginateProps(),...makeDataTableProps(),...makeFilterProps(),...makeVDataTableFooterProps()},"VDataTable"),VDataTable=genericComponent()({name:"VDataTable",props:makeVDataTableProps(),emits:{"update:modelValue":r=>!0,"update:page":r=>!0,"update:itemsPerPage":r=>!0,"update:sortBy":r=>!0,"update:options":r=>!0,"update:groupBy":r=>!0,"update:expanded":r=>!0},setup(r,n){let{emit:_,slots:x}=n;const{groupBy:S}=createGroupBy(r),{sortBy:E,multiSort:C,mustSort:T}=createSort(r),{page:B,itemsPerPage:A}=createPagination(r),{columns:I,headers:N}=createHeaders(r,{groupBy:S,showSelect:toRef(r,"showSelect"),showExpand:toRef(r,"showExpand")}),{items:V}=useDataTableItems(r,I),D=toRef(r,"search"),{filteredItems:O}=useFilter(r,V,D,{transform:le=>le.columns}),{toggleSort:F}=provideSort({sortBy:E,multiSort:C,mustSort:T,page:B}),{sortByWithGroups:M,opened:L,extractRows:j,isGroupOpen:q,toggleGroup:H}=provideGroupBy({groupBy:S,sortBy:E}),{sortedItems:X}=useSortedItems(r,O,M),{flatItems:J}=useGroupedItems(X,S,L),Z=computed(()=>J.value.length),{startIndex:ae,stopIndex:ce,pageCount:ve,setItemsPerPage:pe}=providePagination({page:B,itemsPerPage:A,itemsLength:Z}),{paginatedItems:G}=usePaginatedItems({items:J,startIndex:ae,stopIndex:ce,itemsPerPage:A}),Y=computed(()=>j(G.value)),{isSelected:U,select:W,selectAll:ee,toggleSelect:re,someSelected:oe,allSelected:ie}=provideSelection(r,{allItems:V,currentPage:Y}),{isExpanded:ne,toggleExpand:te}=provideExpanded(r);useOptions({page:B,itemsPerPage:A,sortBy:E,groupBy:S,search:D}),provideDefaults({VDataTableRows:{hideNoData:toRef(r,"hideNoData"),noDataText:toRef(r,"noDataText"),loading:toRef(r,"loading"),loadingText:toRef(r,"loadingText")}});const K=computed(()=>({page:B.value,itemsPerPage:A.value,sortBy:E.value,pageCount:ve.value,toggleSort:F,setItemsPerPage:pe,someSelected:oe.value,allSelected:ie.value,isSelected:U,select:W,selectAll:ee,toggleSelect:re,isExpanded:ne,toggleExpand:te,isGroupOpen:q,toggleGroup:H,items:Y.value,groupedItems:G.value,columns:I.value,headers:N.value}));return useRender(()=>{const[le]=VDataTableFooter.filterProps(r),[ue]=VDataTableHeaders.filterProps(r),[be]=VDataTableRows.filterProps(r),[ge]=VTable.filterProps(r);return createVNode(VTable,mergeProps({class:["v-data-table",{"v-data-table--show-select":r.showSelect,"v-data-table--loading":r.loading},r.class],style:r.style},ge),{top:()=>x.top?.(K.value),default:()=>x.default?x.default(K.value):createVNode(Fragment,null,[x.colgroup?.(K.value),createVNode("thead",null,[createVNode(VDataTableHeaders,ue,x)]),x.thead?.(K.value),createVNode("tbody",null,[x.body?x.body(K.value):createVNode(VDataTableRows,mergeProps(be,{items:G.value}),x)]),x.tbody?.(K.value),x.tfoot?.(K.value)]),bottom:()=>x.bottom?x.bottom(K.value):createVNode(Fragment,null,[createVNode(VDataTableFooter,le,{prepend:x["footer.prepend"]})])})}),{}}}),_sfc_main$d=defineComponent$1({__name:"NouvelleLigne",emits:["sauvegarder"],setup(r){return(n,_)=>(openBlock(),createBlock(VDialog))}}),_sfc_main$c=defineComponent$1({__name:"CelluleChaneNonTraductible",props:{val:{}},setup(r){return(n,_)=>(openBlock(),createBlock(_sfc_main$23,{texte:n.val,"longueur-max":10},null,8,["texte"]))}}),_sfc_main$b=defineComponent$1({__name:"CelluleBoolenne",props:{val:{}},setup(r){return(n,_)=>(openBlock(),createBlock(VCheckbox,{"model-value":n.val,indeterminate:typeof n.val>"u"},null,8,["model-value","indeterminate"]))}}),_hoisted_1$2=["contenteditable"],_sfc_main$a=defineComponent$1({__name:"CelluleNumrique",props:{val:{},editer:{type:Boolean}},emits:["changerValeur"],setup(r,{emit:n}){const _=r,{:x}=inject$1("locales"),S=E=>{const C=E.target?.innerText,T=x.({:C});T!==_.val&&n("changerValeur",T)};return(E,C)=>(openBlock(),createElementBlock("p",{contenteditable:E.editer,onInput:S},toDisplayString$1(E.val),41,_hoisted_1$2))}}),constl=inject$1("constl"),crerColonneTableau=async({idTableau:r,idVariable:n,idColonne:_,index:x,rgles:S})=>{const E=await constl?.tableaux.ajouterColonneTableau({idTableau:r,idVariable:n,idColonne:_});if(E){x&&await constl?.tableaux.changerColIndex({idTableau:r,idColonne:E,val:!0});for(const C of S)await constl?.tableaux.ajouterRgleTableau({idTableau:r,idColonne:E,rgle:C.rgle})}},_hoisted_1$1={class:"mb-0 text-overline"},_hoisted_2$1={class:"text-center my-3"},_hoisted_3$1={class:"text-h5 mt-5"},_hoisted_4={key:0},_hoisted_5={key:1},_hoisted_6={key:0},_sfc_main$9=defineComponent$1({__name:"VisualisationTableau",props:{idTableau:{}},setup(r){const n=r,_=inject$1("constl"),{useI18n:x}=_(),{t:S}=x(),E=ref$1(!1),C=ref$1();enregistrercoute(_?.suivrePermission({idObjet:n.idTableau,f:j=>C.value=j}));const T=ref$1();enregistrercoute(_?.tableaux.suivreColonnesTableau({idTableau:n.idTableau,f:j=>T.value=j}));const B=computed(()=>T.value?.map(j=>({title:j.variable,key:j.id,index:j.index,sortable:j.catgorie?.type==="simple"?I(j.catgorie.catgorie):!1,info:{catgorie:j.catgorie}}))),A=["boolen","chane","horoDatage","intervaleTemps","numrique"],I=j=>A.includes(j),N=ref$1(),V=ref$1([]);enregistrercoute(_?.tableaux.suivreDonnes({idTableau:n.idTableau,f:j=>N.value=j}));const D=async j=>{await _?.tableaux.ajouterlment({idTableau:n.idTableau,vals:j})},O=async j=>{await _?.tableaux.effacerlment({idTableau:n.idTableau,idlment:j})},F=async()=>{await Promise.all(V.value.map(O))},M=async({col:j,val:q,idlment:H})=>{await _?.tableaux.modifierlment({idTableau:n.idTableau,vals:{[j]:q},idlment:H})},L=ref$1();return enregistrercoute(_?.tableaux.suivreValidDonnes({idTableau:n.idTableau,f:j=>L.value=j})),(j,q)=>{const H=resolveComponent("EntteColonneTableau"),X=resolveComponent("cellule-liste"),J=resolveComponent("CelluleHoroDatage"),Z=resolveComponent("CelluleIntervaleTemps"),ae=resolveComponent("celluleChane"),ce=resolveComponent("celluleGoJSON"),ve=resolveComponent("CelluleVido"),pe=resolveComponent("CelluleAudio"),G=resolveComponent("CelluleImage"),Y=resolveComponent("CelluleFichier");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("p",_hoisted_1$1,[createTextVNode(toDisplayString$1(unref(S)("bd.visBD."))+" ",1),createVNode(_sfc_main$y,{"id-tableau":j.idTableau,onNouvelle:q[0]||(q[0]=U=>unref(crerColonneTableau)({idTableau:j.idTableau,...U}))},{activator:withCtx(({props:U})=>[createVNode(VBtn,mergeProps(U,{icon:"mdi-table-column-plus-after",size:"small",disabled:!C.value}),null,16,["disabled"])]),_:1},8,["id-tableau"]),createVNode(_sfc_main$d,{onSauvegarder:q[1]||(q[1]=U=>D(U))},{activator:withCtx(({props:U})=>[createVNode(VBtn,mergeProps(U,{icon:"mdi-table-row-plus-after",size:"small",inset:"",disabled:!C.value||!T.value||!T.value.length}),null,16,["disabled"])]),_:1}),createVNode(VSwitch,{modelValue:E.value,"onUpdate:modelValue":q[2]||(q[2]=U=>E.value=U),disabled:!C.value||!T.value||!T.value.length,"true-icon":"mdi-pencil","false-icon":"mdi-pencil-off",color:E.value?"primary":"secondary"},null,8,["modelValue","disabled","color"]),E.value?(openBlock(),createBlock(VBtn,{key:0,disabled:!V.value.length,color:"error",onClick:F},null,8,["disabled"])):createCommentVNode("",!0)]),T.value&&N.value?(openBlock(),createBlock(unref(VDataTable),{key:0,modelValue:V.value,"onUpdate:modelValue":q[5]||(q[5]=U=>V.value=U),headers:B.value,items:N.value,"show-select":E.value,density:"compact"},createSlots({"no-data":withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("p",_hoisted_3$1,toDisplayString$1(unref(S)("tableau.vide")),1),C.value?(openBlock(),createElementBlock("div",_hoisted_4,[createVNode(_sfc_main$y,{"id-tableau":j.idTableau,onNouvelle:q[3]||(q[3]=U=>unref(crerColonneTableau)({idTableau:j.idTableau,...U}))},{activator:withCtx(({props:U})=>[createVNode(VBtn,mergeProps(U,{color:"primary",class:"mx-2",variant:"outlined",icon:"mdi-table-column-plus-after"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("tableau.ajouterColonne")),1)]),_:2},1040)]),_:1},8,["id-tableau"]),createVNode(_sfc_main$d,{onSauvegarder:q[4]||(q[4]=U=>D(U))},{activator:withCtx(({props:U})=>[T.value.length?(openBlock(),createBlock(VBtn,mergeProps({key:0},U,{color:"primary",class:"mx-2",variant:"outlined",icon:"mdi-table-row-plus-after",label:""}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("tableau.ajouterFile")),1)]),_:2},1040)):createCommentVNode("",!0)]),_:1}),createVNode(VBtn,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("tableau.importerDonnes")),1)]),_:1})])):createCommentVNode("",!0)])]),_:2},[renderList(B.value,U=>({name:`column.${U.key}`,fn:withCtx(({column:W})=>[U.key!=="actions"?(openBlock(),createBlock(H,{key:0,"permission-modifier":C.value,"id-variable":W.title,"id-colonne":W.value,"id-tableau":j.idTableau,index:U.index},{activator:withCtx(({props:ee})=>[createBaseVNode("span",normalizeProps(guardReactiveProps(ee)),toDisplayString$1(U.title),17)]),_:2},1032,["permission-modifier","id-variable","id-colonne","id-tableau","index"])):(openBlock(),createElementBlock("span",_hoisted_5,toDisplayString$1(U.title),1))])})),renderList(B.value,U=>({name:`item.${U.key}`,fn:withCtx(({item:W})=>[U.key==="actions"?(openBlock(),createElementBlock("span",_hoisted_6,[createVNode(VBtn,{color:"error",icon:"",small:"",onClick:()=>O(W.raw.empreinte)},{default:withCtx(()=>[createVNode(VIcon,{small:""},{default:withCtx(()=>[createTextVNode("mdi-delete")]),_:1})]),_:2},1032,["onClick"])])):U.info.catgorie?.type==="liste"?(openBlock(),createBlock(X,{key:1,val:W.columns[U.key],editer:E.value,erreurs:L.value?.filter(ee=>ee.erreur.rgle.colonne===U.key),onChangerValeur:ee=>M({idlment:W.raw.empreinte,col:U.key,val:ee})},null,8,["val","editer","erreurs","onChangerValeur"])):U.info.catgorie?.catgorie==="chaneNonTraductible"?(openBlock(),createBlock(_sfc_main$c,{key:2,val:W.columns[U.key],editer:E.value,erreurs:L.value?.filter(ee=>ee.erreur.rgle.colonne===U.key),onChangerValeur:ee=>M({idlment:W.raw.empreinte,col:U.key,val:ee})},null,8,["val","editer","erreurs","onChangerValeur"])):U.info.catgorie?.catgorie==="numrique"?(openBlock(),createBlock(_sfc_main$a,{key:3,val:W.columns[U.key],editer:E.value,erreurs:L.value?.filter(ee=>ee.erreur.rgle.colonne===U.key),onChangerValeur:ee=>M({idlment:W.raw.empreinte,col:U.key,val:ee})},null,8,["val","editer","erreurs","onChangerValeur"])):U.info.catgorie?.catgorie==="horoDatage"?(openBlock(),createBlock(J,{key:4,val:W.columns[U.key],editer:E.value,erreurs:L.value?.filter(ee=>ee.erreur.rgle.colonne===U.key),onChangerValeur:ee=>M({idlment:W.raw.empreinte,col:U.key,val:ee})},null,8,["val","editer","erreurs","onChangerValeur"])):U.info.catgorie?.catgorie==="intervaleTemps"?(openBlock(),createBlock(Z,{key:5,val:W.columns[U.key],editer:E.value,erreurs:L.value?.filter(ee=>ee.erreur.rgle.colonne===U.key),onChangerValeur:ee=>M({idlment:W.raw.empreinte,col:U.key,val:ee})},null,8,["val","editer","erreurs","onChangerValeur"])):U.info.catgorie?.catgorie==="boolen"?(openBlock(),createBlock(_sfc_main$b,{key:6,val:W.columns[U.key],editer:E.value,erreurs:L.value?.filter(ee=>ee.erreur.rgle.colonne===U.key),onChangerValeur:ee=>M({idlment:W.raw.empreinte,col:U.key,val:ee})},null,8,["val","editer","erreurs","onChangerValeur"])):U.info.catgorie?.catgorie==="chane"?(openBlock(),createBlock(ae,{key:7,val:W.columns[U.key],editer:E.value,erreurs:L.value?.filter(ee=>ee.erreur.rgle.colonne===U.key),onChangerValeur:ee=>M({idlment:W.raw.empreinte,col:U.key,val:ee})},null,8,["val","editer","erreurs","onChangerValeur"])):U.info.catgorie?.catgorie==="gojson"?(openBlock(),createBlock(ce,{key:8,val:W.columns[U.key],editer:E.value,erreurs:L.value?.filter(ee=>ee.erreur.rgle.colonne===U.key),onChangerValeur:ee=>M({idlment:W.raw.empreinte,col:U.key,val:ee})},null,8,["val","editer","erreurs","onChangerValeur"])):U.info.catgorie?.catgorie==="vido"?(openBlock(),createBlock(ve,{key:9,val:W.columns[U.key],editer:E.value,erreurs:L.value?.filter(ee=>ee.erreur.rgle.colonne===U.key),onChangerValeur:ee=>M({idlment:W.raw.empreinte,col:U.key,val:ee})},null,8,["val","editer","erreurs","onChangerValeur"])):U.info.catgorie?.catgorie==="audio"?(openBlock(),createBlock(pe,{key:10,val:W.columns[U.key],editer:E.value,erreurs:L.value?.filter(ee=>ee.erreur.rgle.colonne===U.key),onChangerValeur:ee=>M({idlment:W.raw.empreinte,col:U.key,val:ee})},null,8,["val","editer","erreurs","onChangerValeur"])):U.info.catgorie?.catgorie==="image"?(openBlock(),createBlock(G,{key:11,val:W.columns[U.key],editer:E.value,erreurs:L.value?.filter(ee=>ee.erreur.rgle.colonne===U.key),onChangerValeur:ee=>M({idlment:W.raw.empreinte,col:U.key,val:ee})},null,8,["val","editer","erreurs","onChangerValeur"])):U.info.catgorie?.catgorie==="fichier"?(openBlock(),createBlock(Y,{key:12,val:W.columns[U.key],editer:E.value,erreurs:L.value?.filter(ee=>ee.erreur.rgle.colonne===U.key),onChangerValeur:ee=>M({idlment:W.raw.empreinte,col:U.key,val:ee})},null,8,["val","editer","erreurs","onChangerValeur"])):createCommentVNode("",!0)])}))]),1032,["modelValue","headers","items","show-select"])):(openBlock(),createBlock(unref(VSkeletonLoader),{key:1,type:"image"}))],64)}}}),_sfc_main$8=defineComponent$1({__name:"PageTableau",props:{idTableau:{},idBd:{}},setup(r){const n=r,_=inject$1("constl"),{obtImageDco:x}=utiliserImagesDco(),{useI18n:S}=_(),{mdAndUp:E}=useDisplay(),{isRtl:C}=useRtl(),{traduireNom:T}=utiliserLangues(),{t:B}=S(),A=computed(()=>[{title:B("navig.mesDonnes"),href:encodeURI("/donnes")},{title:F.value||n.idBd,href:encodeURI(`/donnes/bd/${n.idBd}`)},{title:V.value||n.idTableau,disabled:!0}]),I=ref$1();enregistrercoute(_?.suivrePermission({idObjet:n.idTableau,f:H=>I.value=H}));const N=ref$1({}),V=T(N);enregistrercoute(_?.tableaux.suivreNomsTableau({idTableau:n.idTableau,f:H=>N.value=H}));const D=async H=>{const{Effacer:X,Ajouter:J}=ajusterTexteTraductible({anciennes:N.value,nouvelles:H});for(const Z of X)await _?.tableaux.effacerNomTableau({idTableau:n.idTableau,langue:Z});await _?.tableaux.sauvegarderNomsTableau({idTableau:n.idTableau,noms:J})},O=ref$1({}),F=T(O);enregistrercoute(_?.bds.suivreNomsBd({idBd:n.idBd,f:H=>O.value=H}));const M=ref$1(),L=computed(()=>{if(M.value)return URL.createObjectURL(new Blob([M.value],{type:"image"}))});enregistrercoute(_?.bds.suivreImage({idBd:n.idBd,f:H=>M.value=H}));const j=x("logoBD"),q=async H=>{H?await _?.profil.sauvegarderImage({image:{content:H.contenu,path:H.fichier}}):await _?.profil.effacerImage()};return(H,X)=>{const J=resolveComponent("texteTronqu"),Z=resolveComponent("DialogueNoms"),ae=resolveComponent("lien-objet");return openBlock(),createBlock(VContainer,null,{default:withCtx(()=>[createVNode(VCard,{flat:""},{default:withCtx(()=>[createVNode(VCardSubtitle,null,{default:withCtx(()=>[createVNode(VBreadcrumbs,{items:A.value,class:"pa-0"},{divider:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)?"mdi-chevron-left":"mdi-chevron-right"),1)]),_:1})]),title:withCtx(({item:ce})=>[createVNode(VBreadcrumbsItem,{disabled:ce.disabled,onClick:ve=>ce.href&&H.$router.push(ce.href)},{default:withCtx(()=>[createVNode(J,{texte:ce.title,"longueur-max":35},null,8,["texte"])]),_:2},1032,["disabled","onClick"])]),_:1},8,["items"])]),_:1}),createVNode(ImageEditable,{"src-image":L.value,"img-defaut":unref(j),editable:!!I.value,"max-taille-image":unref(MAX_TAILLE_IMAGE$4),"taille-avatar":unref(E)?275:175,onImageChangee:q},null,8,["src-image","img-defaut","editable","max-taille-image","taille-avatar"]),createVNode(VCardTitle,null,{default:withCtx(()=>[createVNode(J,{texte:unref(V),"longueur-max":40},null,8,["texte"]),createVNode(Z,{"indice-nom":unref(B)("objet.indiceNom"),"indice-langue":unref(B)("objet.indiceLangue"),"texte-aucun-nom":unref(B)("objet.texteAucunNom"),"noms-initiaux":N.value,titre:unref(B)("objet.titreDialogueNoms"),"sous-titre":unref(B)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!I.value,onAjusterNoms:D},{activator:withCtx(({props:ce})=>[createBaseVNode("span",normalizeProps(guardReactiveProps(ce)),[createTextVNode(toDisplayString$1(unref(V)||unref(B)("communs.baseCarteObjet.sansNom"))+" ",1),createVNode(VBtn,{icon:I.value?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),createVNode(ae,{id:H.idTableau},null,8,["id"]),createVNode(VSpacer),createVNode(_sfc_main$q,{"info-objet":{id:H.idTableau,typeObjet:"tableau"},type:"exportation"},{activator:withCtx(({props:ce})=>[createVNode(VTooltip,mergeProps(ce,{text:unref(B)("exporter.indice"),"open-delay":200,location:"bottom"}),{activator:withCtx(({props:ve})=>[createVNode(VBtn,mergeProps(ve,{icon:"mdi-download"}),null,16)]),_:2},1040,["text"])]),_:1},8,["info-objet"]),createVNode(_sfc_main$q,{"info-objet":{id:H.idTableau,typeObjet:"tableau"},type:"importation"},{activator:withCtx(({props:ce})=>[createVNode(VTooltip,mergeProps(ce,{text:unref(B)("importer.indice"),"open-delay":200,location:"bottom"}),{activator:withCtx(({props:ve})=>[createVNode(VBtn,mergeProps(ve,{icon:"mdi-upload"}),null,16)]),_:2},1040,["text"])]),_:1},8,["info-objet"])]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(_sfc_main$9,{"id-tableau":H.idTableau},null,8,["id-tableau"])]),_:1})]),_:1})]),_:1})}}}),_hoisted_1={key:1},_hoisted_2={key:1},_hoisted_3={key:1},_sfc_main$7=defineComponent$1({__name:"RsultatRechercheProjet",props:{rsultat:{}},setup(r){const n=r,_=inject$1("constl"),{traduireNom:x}=utiliserLangues(),{useI18n:S}=_(),{t:E}=S(),C=H=>computed(()=>{const{de:X,info:J}=n.rsultat.rsultatObjectif;if(J.type==="texte"&&X===H)return J}),T=C("nom"),B=C("descr"),A=C("id"),I=computed(()=>{const{de:H,clef:X,info:J}=n.rsultat.rsultatObjectif;if(J.type==="rsultat"&&H==="bd"&&X&&J.info.type==="rsultat")return{id:X,info:J.info}}),N=H=>computed(()=>{const{de:X,clef:J,info:Z}=n.rsultat.rsultatObjectif;if(Z.type==="rsultat"&&X===H&&J&&Z.info.type==="texte")return{id:J,info:Z}}),V=N("variable"),D=N("motClef"),O=N("bd"),F=ref$1({}),M=x(F);enregistrercoute(_?.projets.suivreNomsProjet({idProjet:n.rsultat.id,f:H=>F.value=H}));const L=ref$1({}),j=x(L);enregistrercoute(_?.projets.suivreDescriptionsProjet({idProjet:n.rsultat.id,f:H=>L.value=H}));const q=ref$1();return enregistrercoute(_?.rseau?.suivreAuteursProjet({idProjet:n.rsultat.id,f:H=>q.value=H})),(H,X)=>(openBlock(),createBlock(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[unref(T)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(T)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1,toDisplayString$1(unref(M)||unref(E)("nues.aucunNom")),1))]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[unref(B)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(B)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_2,toDisplayString$1(unref(j)||unref(E)("nues.aucuneDescription")),1))]),_:1}),createVNode(_sfc_main$1F,{auteurs:q.value,"n-max":1},null,8,["auteurs"]),createVNode(_sfc_main$N,{id:H.rsultat.id},{default:withCtx(()=>[unref(A)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(A)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_3,toDisplayString$1(H.rsultat.id),1))]),_:1},8,["id"]),unref(V)?(openBlock(),createBlock(_sfc_main$1P,{key:0,id:unref(V).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(V).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0),unref(D)?(openBlock(),createBlock(_sfc_main$1n,{key:1,id:unref(D).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(D).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0),unref(O)?(openBlock(),createBlock(_sfc_main$1w,{key:2,id:unref(O).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(O).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0),I.value?(openBlock(),createBlock(_sfc_main$1w,{key:3,id:I.value.id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:I.value.info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$6=defineComponent$1({__name:"PageRecherche",setup(r){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{obtImageDco:S}=utiliserImagesDco(),E=S("recherche"),C=ref$1(),T=ref$1(2),B=[{icne:"mdi-key",texte:x("pages.mesDonnes.motsClefs"),clef:"motsClefs"},{icne:"mdi-variable",texte:x("pages.mesDonnes.variables"),clef:"variables"},{icne:"mdi-database-outline",texte:x("pages.mesDonnes.bds"),clef:"bds"},{icne:"mdi-folder-outline",texte:x("pages.mesDonnes.projets"),clef:"projets"},{icne:"mdi-account-group-outline",texte:x("pages.mesDonnes.nues"),clef:"nues"}],A=ref$1(),I=ref$1(),N=ref$1(),V=ref$1(),D=ref$1(),O=new MultiChercheur,{nOuProfondeur:F}=O,M=()=>{F.value++};return watchEffect(async()=>{switch(B[T.value].clef){case"motsClefs":{await O.lancerRecherche({requte:C,rfRsultat:I,fRecherche:async({requte:j,nOuProfondeur:q,rfRsultat:H})=>await n?.recherche.rechercherMotsClefsSelonTexte({texte:j,f:X=>H.value=X,nRsultatsDsirs:q})});break}case"variables":{await O.lancerRecherche({requte:C,rfRsultat:N,fRecherche:async({requte:j,nOuProfondeur:q,rfRsultat:H})=>await n?.recherche.rechercherVariablesSelonTexte({texte:j,f:X=>H.value=X,nRsultatsDsirs:q})});break}case"bds":{await O.lancerRecherche({requte:C,rfRsultat:A,fRecherche:async({requte:j,nOuProfondeur:q,rfRsultat:H})=>await n?.recherche.rechercherBdsSelonTexte({texte:j,f:X=>H.value=X,nRsultatsDsirs:q})});break}case"projets":{await O.lancerRecherche({requte:C,rfRsultat:V,fRecherche:async({requte:j,nOuProfondeur:q,rfRsultat:H})=>await n?.recherche.rechercherProjetsSelonTexte({texte:j,f:X=>H.value=X,nRsultatsDsirs:q})});break}case"nues":{await O.lancerRecherche({requte:C,rfRsultat:D,fRecherche:async({requte:j,nOuProfondeur:q,rfRsultat:H})=>await n?.recherche.rechercherNuesSelonTexte({texte:j,f:X=>H.value=X,nRsultatsDsirs:q})});break}}}),(L,j)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(x)("pages.recherche.titre"),image:unref(E)},null,8,["titre","image"]),createVNode(VTextField,{modelValue:C.value,"onUpdate:modelValue":j[0]||(j[0]=q=>C.value=q),variant:"outlined","prepend-inner-icon":"mdi-magnify"},null,8,["modelValue"]),createVNode(VChipGroup,{modelValue:T.value,"onUpdate:modelValue":j[1]||(j[1]=q=>T.value=q),color:"primary",mandatory:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(B,q=>(openBlock(),createBlock(VChip,{key:q.clef,class:"mx-2",variant:"outlined","prepend-icon":q.icne},{default:withCtx(()=>[createTextVNode(toDisplayString$1(q.texte),1)]),_:2},1032,["prepend-icon"]))),128))]),_:1},8,["modelValue"]),B[T.value].clef==="bds"?(openBlock(),createBlock(VList,{key:0,class:"text-start"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(A.value,q=>(openBlock(),createBlock(_sfc_main$19,{id:q.id,key:q.id},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$M,mergeProps(H,{rsultat:q}),null,16,["rsultat"])]),_:2},1032,["id"]))),128))]),_:1})):B[T.value].clef==="motsClefs"?(openBlock(),createBlock(VList,{key:1,class:"text-start"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(I.value,q=>(openBlock(),createBlock(_sfc_main$19,{id:q.id,key:q.id},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$I,mergeProps(H,{rsultat:q}),null,16,["rsultat"])]),_:2},1032,["id"]))),128))]),_:1})):B[T.value].clef==="variables"?(openBlock(),createBlock(VList,{key:2,class:"text-start"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(N.value,q=>(openBlock(),createBlock(_sfc_main$19,{id:q.id,key:q.id},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$E,mergeProps(H,{rsultat:q}),null,16,["rsultat"])]),_:2},1032,["id"]))),128))]),_:1})):B[T.value].clef==="projets"?(openBlock(),createBlock(VList,{key:3,class:"text-start"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(V.value,q=>(openBlock(),createBlock(_sfc_main$19,{id:q.id,key:q.id},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$7,mergeProps(H,{rsultat:q}),null,16,["rsultat"])]),_:2},1032,["id"]))),128))]),_:1})):B[T.value].clef==="nues"?(openBlock(),createBlock(VList,{key:4,class:"text-start"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(D.value,q=>(openBlock(),createBlock(_sfc_main$19,{id:q.id,key:q.id},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$K,mergeProps(H,{rsultat:q}),null,16,["rsultat"])]),_:2},1032,["id"]))),128)),createVNode(VListItem,{onClick:M},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(" t('Augementer N') ")]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$5=defineComponent$1({__name:"ItemFavoris",props:{epingle:{}},setup(r){const n=r,{traduireNom:_}=utiliserLangues(),{useI18n:x}=_(),{t:S}=x(),E=inject$1("constl"),C=ref$1({}),T=_(C);enregistrercoute(E?.motsClefs.suivreNomsMotClef({idMotClef:n.epingle.idObjet,f:V=>C.value=V}));const B=ref$1();enregistrercoute(E?.suivreTypeObjet({idObjet:n.epingle.idObjet,f:V=>B.value=V}));const A=computed(()=>{switch(B.value){case"bd":return"mdi-database";case"motClef":return"mdi-key";case"variable":return"mdi-variable";case"projet":return"mdi-folder-outline";case"nue":return"mdi-account-group-outline";default:return"mdi-pin-outline"}}),I=ref$1();enregistrercoute(E?.favoris.suivreEstpinglSurDispositif({idObjet:n.epingle.idObjet,f:V=>I.value=V}));const N=async()=>{await E?.favoris.dspinglerFavori({idObjet:n.epingle.idObjet})};return(V,D)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value),1)]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createVNode(_sfc_main$23,{texte:unref(T)||V.epingle.idObjet,"longueur-max":30},null,8,["texte"])]),_:1}),createVNode(VListItemAction,null,{default:withCtx(()=>[createVNode(_sfc_main$1M,{id:V.epingle.idObjet},{activator:withCtx(({props:O})=>[createVNode(VTooltip,mergeProps(O,{"open-delay":"200",location:"bottom"}),{activator:withCtx(({props:F})=>[createVNode(VBtn,mergeProps(F,{icon:I.value&&I.value.bd?"mdi-pin":"mdi-pin-outline"}),null,16,["icon"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(unref(S)(I.value&&I.value.bd?"favoris.indicepingl":"favoris.indiceNonpingl")),1)]),_:1},16)]),_:1},8,["id"]),createVNode(_sfc_main$1C,{onEffacer:N},{activator:withCtx(({props:O})=>[createVNode(VTooltip,mergeProps(O,{"open-delay":"200",location:"bottom"}),{activator:withCtx(({props:F})=>[createVNode(VBtn,mergeProps(F,{icon:"mdi-delete",color:"error"}),null,16)]),default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(S)("favoris.effacer.indiceEffacer")),1)]),_:2},1040)]),_:1})]),_:1})]),_:1}))}}),_sfc_main$4=defineComponent$1({__name:"PageFavoris",setup(r){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{obtImageDco:S}=utiliserImagesDco(),E=S("automatisation"),C=ref$1();return enregistrercoute(n?.favoris.suivreFavoris({f:T=>C.value=T})),(T,B)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(x)("pages.favoris.titre"),image:unref(E),"sous-titre":unref(x)("pages.favoris.sousTitre")},null,8,["titre","image","sous-titre"]),createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-plus",title:unref(x)("pages.favoris.commentAjouterNouveau.titre"),subtitle:unref(x)("pages.favoris.commentAjouterNouveau.sousTitre"),onClick:B[0]||(B[0]=A=>T.$router.push(encodeURI("/donnes/")))},null,8,["title","subtitle"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(C.value,A=>(openBlock(),createBlock(_sfc_main$5,{key:A.idObjet,epingle:A},null,8,["epingle"]))),128))]),_:1})]),_:1}))}}),_sfc_main$3=defineComponent$1({__name:"PageAutomatisations",setup(r){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{obtImageDco:S}=utiliserImagesDco(),E=S("automatisation"),C=ref$1();return enregistrercoute(n?.automatisations.suivreAutomatisations({f:T=>C.value=T})),(T,B)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(x)("pages.automatisations.titre"),image:unref(E),"sous-titre":unref(x)("pages.automatisations.sousTitre")},null,8,["titre","image","sous-titre"]),createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(_sfc_main$q,{automatiser:""},{activator:withCtx(({props:A})=>[createVNode(VListItem,mergeProps(A,{"prepend-icon":"mdi-plus",title:unref(x)("pages.automatisations.ajouterNouvelle.titre"),subtitle:unref(x)("pages.automatisations.ajouterNouvelle.sousTitre")}),null,16,["title","subtitle"])]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(C.value,A=>(openBlock(),createBlock(_sfc_main$m,{key:A.id,spcification:A},null,8,["spcification"]))),128))]),_:1})]),_:1}))}}),_sfc_main$2=defineComponent$1({__name:"PageSignalements",setup(r){const{useI18n:n}=_(),{t:_}=n(),{obtImageDco:x}=utiliserImagesDco(),S=x("problme");return(E,C)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(_)("pages.signalements.titre"),image:unref(S),"sous-titre":unref(_)("pages.signalements.sousTitre")},null,8,["titre","image","sous-titre"]),createVNode(VBtn,{class:"mx-2 my-2",variant:"outlined",color:"primary",onClick:C[0]||(C[0]=T=>unref(ouvrirLien)(unref(URL_SIGNALEMENTS)))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("pages.signalements.bouton"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode(" mdi-open-in-new ")]),_:1})]),_:1}),createVNode(VBtn,{class:"mx-2 my-2",variant:"outlined",onClick:C[1]||(C[1]=T=>unref(ouvrirLien)(`mailto:${unref(COURRIEL_SIGNALEMENTS)}`))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("pages.signalements.boutonCourriel"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode(" mdi-email ")]),_:1})]),_:1})]),_:1}))}}),_sfc_main$1=defineComponent$1({__name:"CarteFichierTlchargement",props:{url:{},version:{},nom:{}},setup(r){const n=r,{formatterVersion:_}=utiliserNumration(),{useI18n:x}=_(),{t:S}=x(),{obtImageDco:E}=utiliserImagesDco(),C=_(n.version),T={Linux:["AppImage"],macOS:["dmg"],Windows:["exe"]},B=function(O){return O.split(".").pop()},A=computed(()=>{const O=B(n.nom);return O?Object.entries(T).find(([M,L])=>L.includes(O))?.[0]:void 0}),I={Linux:__vitePreload(()=>import("./Linux-1eee7f7b.js"),[]),macOS:__vitePreload(()=>import("./macOS-0dcf9457.js"),[]),Windows:__vitePreload(()=>import("./Windows-cb1dda69.js"),[])},N=ref$1();watchEffect(async()=>{A.value&&(N.value=(await I[A.value]).default)});const V=E("docs"),D=computed(()=>N.value||V.value);return(O,F)=>(openBlock(),createBlock(VCard,{class:"ma-3 pa-5","max-width":300,onClick:F[0]||(F[0]=M=>unref(ouvrirLien)(O.url))},{default:withCtx(()=>[createVNode(VImg,{src:D.value,contain:"","max-height":"150"},null,8,["src"]),createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value)+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-download"})]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("tlchargements.version",{version:unref(C)})),1)]),_:1})]),_:1}))}}),VToolbar$1="",makeVToolbarTitleProps=propsFactory({text:String,...makeComponentProps(),...makeTagProps()},"VToolbarTitle"),VToolbarTitle=genericComponent()({name:"VToolbarTitle",props:makeVToolbarTitleProps(),setup(r,n){let{slots:_}=n;return useRender(()=>{const x=!!(_.default||_.text||r.text);return createVNode(r.tag,{class:["v-toolbar-title",r.class],style:r.style},{default:()=>[x&&createVNode("div",{class:"v-toolbar-title__placeholder"},[_.text?_.text():r.text,_.default?.()])]})}),{}}}),allowedDensities=[null,"prominent","default","comfortable","compact"],makeVToolbarProps=propsFactory({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:r=>allowedDensities.includes(r)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...makeBorderProps(),...makeComponentProps(),...makeElevationProps(),...makeRoundedProps(),...makeTagProps({tag:"header"}),...makeThemeProps()},"VToolbar"),VToolbar=genericComponent()({name:"VToolbar",props:makeVToolbarProps(),setup(r,n){let{slots:_}=n;const{backgroundColorClasses:x,backgroundColorStyles:S}=useBackgroundColor(toRef(r,"color")),{borderClasses:E}=useBorder(r),{elevationClasses:C}=useElevation(r),{roundedClasses:T}=useRounded(r),{themeClasses:B}=provideTheme(r),{rtlClasses:A}=useRtl(),I=shallowRef(!!(r.extended||_.extension?.())),N=computed(()=>parseInt(Number(r.height)+(r.density==="prominent"?Number(r.height):0)-(r.density==="comfortable"?8:0)-(r.density==="compact"?16:0),10)),V=computed(()=>I.value?parseInt(Number(r.extensionHeight)+(r.density==="prominent"?Number(r.extensionHeight):0)-(r.density==="comfortable"?4:0)-(r.density==="compact"?8:0),10):0);return provideDefaults({VBtn:{variant:"text"}}),useRender(()=>{const D=!!(r.title||_.title),O=!!(_.image||r.image),F=_.extension?.();return I.value=!!(r.extended||F),createVNode(r.tag,{class:["v-toolbar",{"v-toolbar--absolute":r.absolute,"v-toolbar--collapse":r.collapse,"v-toolbar--flat":r.flat,"v-toolbar--floating":r.floating,[`v-toolbar--density-${r.density}`]:!0},x.value,E.value,C.value,T.value,B.value,A.value,r.class],style:[S.value,r.style]},{default:()=>[O&&createVNode("div",{key:"image",class:"v-toolbar__image"},[_.image?createVNode(VDefaultsProvider,{key:"image-defaults",disabled:!r.image,defaults:{VImg:{cover:!0,src:r.image}}},_.image):createVNode(VImg,{key:"image-img",cover:!0,src:r.image},null)]),createVNode(VDefaultsProvider,{defaults:{VTabs:{height:convertToUnit(N.value)}}},{default:()=>[createVNode("div",{class:"v-toolbar__content",style:{height:convertToUnit(N.value)}},[_.prepend&&createVNode("div",{class:"v-toolbar__prepend"},[_.prepend?.()]),D&&createVNode(VToolbarTitle,{key:"title",text:r.title},{text:_.title}),_.default?.(),_.append&&createVNode("div",{class:"v-toolbar__append"},[_.append?.()])])]}),createVNode(VDefaultsProvider,{defaults:{VTabs:{height:convertToUnit(V.value)}}},{default:()=>[createVNode(VExpandTransition,null,{default:()=>[I.value&&createVNode("div",{class:"v-toolbar__extension",style:{height:convertToUnit(V.value)}},[F])]})]})]})}),{contentHeight:N,extensionHeight:V}}}),_sfc_main=defineComponent$1({__name:"PageTlchargements",setup(r){const{useI18n:n}=_(),{t:_}=n(),x=function(I){return I.split(".").pop()},S=ref$1(),E=ref$1(),C=ref$1(),T=ref$1(),B=computed(()=>{const I=A.find(N=>N.nom===T.value)?.exts;return E.value?.filter(N=>!C.value||N.version===C.value).filter(N=>{const V=x(N.name);return!I||V&&I.includes(V)})});onMounted(async()=>{const I=(await axios$1.get(IPA_TLCHARGEMENTS)).data,N=["AppImage","dmg","exe"];S.value=I.map(V=>V.name),E.value=I.map(V=>V.assets.map(D=>({...D,version:V.name})).filter(D=>N.includes(x(D.name)||""))).flat(),C.value=S.value[0]});const A=[{nom:"Linux",logo:__vitePreload(()=>import("./Linux-1eee7f7b.js"),[]),exts:["AppImage"]},{nom:"macOS",logo:__vitePreload(()=>import("./macOS-0dcf9457.js"),[]),exts:["dmg"]},{nom:"Windows",logo:__vitePreload(()=>import("./Windows-cb1dda69.js"),[]),exts:["exe"]}];return(I,N)=>(openBlock(),createBlock(VContainer,null,{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(_)("pages.tlchargements.titre")},null,8,["titre"]),createVNode(VToolbar,{class:"mb-4"},{default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:"4"},{default:withCtx(()=>[createVNode(VSelect,{modelValue:C.value,"onUpdate:modelValue":N[0]||(N[0]=V=>C.value=V),dense:"","hide-details":"",clearable:"",outlined:"",label:unref(_)("pages.tlchargements.version"),items:S.value},null,8,["modelValue","label","items"])]),_:1}),createVNode(VCol,{cols:"4"},{default:withCtx(()=>[createVNode(VSelect,{modelValue:T.value,"onUpdate:modelValue":N[1]||(N[1]=V=>T.value=V),label:unref(_)("pages.tlchargements.systme"),items:A.map(V=>V.nom),density:"compact",variant:"outlined","hide-details":"",clearable:""},null,8,["modelValue","label","items"])]),_:1}),createVNode(VCol,{cols:"4"},{default:withCtx(()=>[createVNode(VBtn,{variant:"outlined",color:"primary","append-icon":"mdi-open-in-new",onClick:N[2]||(N[2]=V=>unref(ouvrirLien)(unref(URL_TLCHARGEMENTS)))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("pages.tlchargements.voirTous")),1)]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(VSlideXTransition,{group:"",class:"d-flex flex-wrap justify-center"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(B.value,V=>(openBlock(),createBlock(_sfc_main$1,{key:V.id,url:V.browser_download_url,version:V.version,nom:V.name},null,8,["url","version","nom"]))),128))]),_:1})]),_:1}))}}),routes=[{path:"/",component:_sfc_main$10},{path:"/compte",name:"Compte",component:_sfc_main$O},{path:encodeURI("/donnes"),name:"Donnes",component:_sfc_main$r},{path:encodeURI("/donnes/bd/:id"),component:_sfc_main$g,props:r=>{const{id:n}=r.params;if(typeof n=="string")return{id:decodeURIComponent(n)}}},{path:encodeURI("/donnes/bd/:id/tableau/:idTableau"),component:_sfc_main$8},{path:encodeURI("/donnes/nue/:id"),component:_sfc_main$e,props:r=>{const{id:n}=r.params;if(typeof n=="string")return{id:decodeURIComponent(n)}}},{path:"/recherche",name:"Recherche",component:_sfc_main$6},{path:"/favoris",name:"Favoris",component:_sfc_main$4},{path:"/automatisations",name:"Automatisations",component:_sfc_main$3},{path:"/signalements",name:"Signalements",component:_sfc_main$2},{path:encodeURI("/tlchargements"),name:"Tlchargements",component:_sfc_main}],routeur=createRouter({history:createWebHashHistory(),routes});routeur.afterEach(r=>{const{lg:n}=r.query;if(n&&typeof n=="string"){const{choisirLangues:_}=utiliserLangues();_(n)}});const fr={communs:{constellation:"Constellation",suivant:"Suivant",retour:"Retour",anonyme:"Anonyme",effacer:"Effacer",indiceNom:"Nom",indiceLangue:"Langue",texteAucunNom:"Ajouter un nom ci-dessus",erreurLangue:"Ce texte doit tre en {langue}.",troisPetitsPoints:"..."},navigation:{accueil:"Accueil",donnes:"Mes donnes",recherche:"Explorer",favoris:"Mes favoris",automatisations:"Automatisations",signalements:"Signaler un problme"},accueil:{dmarrer:"Dmarrer",version:"Version {version}",piedDePage:"Contributeurs Constellation",initialiserCompte:{titreCheminement:"Avez-vous dj un compte?",sousTitreCheminement:"Si oui, vous pouvez vous y connecter.",titreNoms:"Choisissez votre nom",sousTitreNoms:"Le plus de langues, le mieux!",titreImage:"Choisissez une image",titreCompteRejoindre:"Connectez-vous",titreMotDePasse:"Code secret",titrePersister:"Persister les donnes?",titreCestParti:"C'est tout!",texteEnConnexion:"Connection au rseau Constellation en cours. Assurez-vous que vous tes bien en ligne.",texteCompteRejoindre:"Ouvrez votre compte Constellation sur un autre dispositif dj connect, puis choisissez votre compte ci-dessous.",indiceCompte:"Compte",texteCodeSecret:"Sur votre autre dispositif, choisissez @:pages.compte.ajouterDispositif et puis entrez le mot de passe ci-dessous.",indiceCodeSecret:"Code secret",indiceComptePasVu:"Vous ne le voyez pas?",indiceRechercheComptes:"On est en train de rechercher.",indiceEssaieDeConnecter:" Attendez un peu, puis assurez-vous qu'un dispositif dj connect  votre compte Constellation est bien en ligne.",indiceMotDePasse:"Code secret",nouveauCompte:"Nouveau compte",connecter:"Connecter compte",texteImage:"Cliquez ci-dessus pour choisir une image de profil (si vous voulez)",textePersister:{1:"Si vous tiez sur un systme centralis, comme les Documents Google ou votre courriel, vos donnes seraient gardes sur un serveur centralis, et vous devriez demander permission  ce serveur chaque fois que vous voulez modifier ou mme accder vos propres donnes.",2:"Constellation, au contraire, est un logiciel local. Vos donnes demeurent sur votre appareil lui-mme. (Eh oui, a fonctionne mme sans Internet!) Le seul hic, c'est que certains navigateurs pensent que tous les systmes sont centraliss et que c'est pas grave s'ils effacent vos donnes locales pour librer de l'espace dans la mmoire. Sans demander votre permission, videmment.",3:"Pour viter tout risque de larmes plus tard, vous pouvez dire ds maintenant  votre navigateur de ne pas effacer vos donnes sans votre permission."},persister:"Protger",pasPersister:"Peut-tre plus tard",djPersistes:"Vos donnes sont dj protges!",bienvenu:"Bienvenu  Constellation",sousTitreBienvenu:"On est heureux de vous voir!",cestParti:"C'est parti!"}},imageditable:{imageTropGrande:"L'image est trop grande. Elle doit tre infrieure  {tailleMaxKO} KO."},listeNomsProfil:{indiceNom:"Votre nom"},languesInterface:{contribuer:"Contribuer",dialogueContribuer:{titre:"Contribuer",sousTitre:"Traduisez l'interface Constellation",langueSource:"Langue source",langueCible:"Langue cible",aucuneTraduction:"[Aucune traduction]",titreSuggestions:"Suggestions",aucuneSuggestion:"Nous n'avons trouv aucune suggestion communautaire pour ce message."}},pages:{compte:{ajouterDispositif:"Connecter un dispositif",nouveauContact:"Nouveau contact"},signalements:{titre:"Vous prouvez des difficults?",sousTitre:"Ne vous en faites pas; nous sommes l pour vous aider.",bouton:"Signaler sur GitHub",boutonCourriel:"Support par courriel"}},membres:{contacts:"Contacts",confiance:{bloqu:"Bloqu",inconnu:"Inconnu",peuDinteraction:"Peu d'interaction",interactionMoyenne:"Interaction moyenne",beaucoupDinteraction:"Beaucoup d'interaction",connaissance:"Connaissance"}},bds:{qualit:"Qualit"}},kaq={communs:{constellation:"Ch'umil"}},cst={communs:{constellation:"Constelacin",suivant:"Siguiente",retour:"Regresar",anonyme:"Annimo"}},messages={fr,:{communs:{constellation:"",suivant:"",retour:"",fermer:"",annuler:"",pingler:"",copier:" ",sauvegarder:"",erreurLangue:"  {langue}  .",pointInterrogation:"?",baseCarteObjet:{description:"",sansNom:" ",sansDescription:"  ",auteurs:"",ajouterAuteur:" "}},navigation:{accueil:"",donnes:" ",favoris:" ",recherche:"",automatisations:"",signalements:" "},accueil:{dmarrer:"",version:" {version}",initialiserCompte:{titreCheminement:"  ?",sousTitreCheminement:"  ,    ?",titreNoms:"  ",sousTitreNoms:" ,  !",titreImage:" ",titreCompteRejoindre:" ",titrePersister:"  ?",titreCestParti:" !",nouveauCompte:" ",connecter:" ",texteImage:" ,      .",textePersister:{1:"           ,        .      ,            .",2:"     .           . Le seul hic, c'est que certains navigateurs pensent que tous les systmes sont centraliss et que c'est pas grave s'ils effacent vos donnes locales pour librer de l'espace dans la mmoire. Sans demander votre permission, videmment."},persister:" ",pasPersister:" ",djPersistes:"   ",bienvenu:"  ",sousTitreBienvenu:" !",cestParti:""}},pages:{compte:{titre:"",titreDialogueNoms:" ",sousTitreDialogueNoms:"   ",ongletCompte:"",ongletConnexions:"",ongletThme:"",compte:{mesDispositifs:" ",optionsAvances:" ",titreExporterCompte:"  ",btnExporterCompte:" ",titreEffacerCompte:" ",btnEffacerCompte:" "},connexions:{Constellation:"",SFIP:". . .",indiceSFIP:"  ",titreSFIP:". .  ",titreConstellation:" ",dispositifs:"{nDispositifs} ,  {nDispositifsEnLigne}"},options:{thmeNuit:"/",thmeImages:" ",langue:" ",numration:" ",unDraw:"unDraw",:"  ",entte:"  ",couleurs:"",culture:""}},mesDonnes:{titre:" ",motsClefs:" ",variables:"",bds:" ",projets:"",nues:"",nouveauMotClef:"  ",nouvelleVariable:" ",nouvelleBd:"  ",nouveauProjet:" ",nouvelleNue:" "},signalements:{titre:" ?",sousTitre:" ,   .",bouton:" ",boutonCourriel:" "}},languesInterface:{dialogueContribuer:{montrerTraduites:" ",aucuneTraduction:"[ ]",titreSuggestions:""}},dispositifs:{sansNom:" ",ajouter:" ",ceDispositif:" "},auteurs:{carteGrer:{titre:" ",sousTitre:"    ",aucunRsultat:"    ",nouveaux:" ",ajouterCommeModrateur:" "},item:{titre:"   | {n}  | {n} "}},motsClefs:{nouveau:{titreNoms:"  ",sousTitreNoms:" ,  !",titreConfirmation:"",texteBtnCration:"",sousTitreConfirmation:"    ",texteCrer:"    ",texteIndiceDescription:" ",texteAucuneDescription:"      "},grerMotsClefsObjet:"  ",sansNom:"   "},bds:{sansNom:"  ",carteBd:{infos:" ",variables:"",motsClefs:" ",tableaux:"",ouvrirBd:" ",attenteTableaux:"  ..."},qualit:"",note:{A:"","A-":"-",B:"","B-":"-","C+":"+",C:"",D:"",F:""}},nues:{sansNom:"  ",carteNue:{ouvrirNue:" "},nouvelle:{titreNoms:" ",sousTitreNoms:"      ",titreDescriptions:" ",sousTitreDescriptions:"    ",texteIndiceDescription:" ",texteAucuneDescription:"  ",titreAutorisation:" ",sousTitreAutorisation:"     ",parInvitation:"  ",indiceParInvitation:"      .",ouverteTous:" ",indiceOuverteTous:"  .  ,    .",titreConfirmation:"",sousTitreConfirmation:"   ",texteCrer:"   ",texteBtnCration:" "}},lienObjet:{indice:" "},tableaux:{sansNom:"  "},variables:{sansNom:"  ",catgorie:"",catgories:{numrique:"",chane:"",chaneNonTraductible:"  "},rgles:""},rgles:{types:{catgorie:" "},infos:{catgorie:"   {categorie}  ."}},rplications:{rplications:"|",rplicationsEnLigne:"( {0})"},automatisations:{item:{titre:"   | {n}  | {n} "}},pingler:{titre:"",dispositifspingle:" ",dispositifspingleFichier:"  ",aucun:"  ",indiceAucun:"   ",tous:" ",indiceTous:"   ",install:" ",indiceInstall:"     ",dispositifsSpcifiques:" ",indiceDispositifsSpcifiques:"    ",indiceSlectionnerDispositif:" "},effacer:{titre:"  ?",avertissement:" ,    .",explication:"    ,      .        ,        .",effacer:""},membres:{contacts:"",bds:" ",projets:"",aucuneBd:"  ",aucunProjet:"  ",aucuneNue:"  ",nues:"",moi:" ",confiance:{bloqu:"",inconnu:"",peuDinteraction:" ",interactionMoyenne:" ",beaucoupDinteraction:" ",connaissance:"",faireConfiance:"",bloquerPublique:"  ",bloquerPriv:"  ",titreCarte:" ",question:"      ?",indiceInconnu:"  .",indiceFaireConfiance:"        .       .",indiceBloquerPublique:"        .        .",indiceBloquerPriv:"       .         ."},contact:{courriel:"",tlphone:"",tlgramme:"",whatsapp:"",autre:"  "},nouvelleInfoContact:{titre:"   ",avertissement:"    ",indiceType:" ",indiceAutreType:"  ",valeur:"  "},modifierInfoContact:{titre:"  "},menuContact:{contacter:" ",copier:" ",messageSalut:""},vu:{ceCompte:"",enLigne:"",Linstant:" ",ilYAMinutes:"{n}    |     | {n}   ",ilYAHeures:"{n}    |     | {n}   ",ilYAJours:"{n}    |     | {n}   ",ilYASemaines:"{n}    |     | {n}   ",ilYAMois:"{n}    |     | {n}   ",ilYALongtemps:"  "}},listeNomsProfil:{indiceNom:" ",indiceLangue:" "},objet:{indiceNom:"",indiceLangue:"",texteAucunNom:"  ",titreDialogueNoms:" ",sousTitreDialogueNoms:"  ",indiceDescription:"",texteAucuneDescription:"  ",titreDialogueDescriptions:"",sousTitreDialogueDescriptions:"  "},licences:{info:{"CC-BY-SA-4_0":{nom:"       ,",abr:"..  ,",lien:"https://creativecommons.org/licenses/by-sa/4.0/deed.fr"},"CC-BY-4_0":{nom:"   ,",abr:".. ,",lien:"https://creativecommons.org/licenses/by/4.0/deed.fr"},"CC-0-1_0":{nom:"   ,",abr:".  ,",lien:"https://creativecommons.org/publicdomain/zero/1.0/deed.fr"},"ODbl-1_0":{nom:"     ,",abr:".. ,",lien:"https://opendatacommons.org/licenses/odbl/summary/"},"ODC-BY-1_0":{nom:"     ,",abr:"..  ,",lien:"https://opendatacommons.org/licenses/by/summary"},PDDL:{nom:"    ",abr:".. ",lien:"https://opendatacommons.org/licenses/pddl/summary"},"rvca-open":{nom:"      ",abr:".. ",lien:"https://rvcagis.github.io/jkan/datasets/rvca-open-licence/"},"0bsd":{nom:"    ",abr:"..  ",lien:"https://choosealicense.com/licenses/0bsd/"},"afl-3_0":{nom:"  ",abr:". ",lien:"https://choosealicense.com/licenses/afl-3.0/"},"agpl-3_0":{nom:"    ,",abr:"..  ,",lien:"https://choosealicense.com/licenses/agpl-3.0/"},"apache-2_0":{nom:"  .",abr:". .",lien:"https://choosealicense.com/licenses/apache-2.0/"},"artistic-2_0":{nom:"  .",abr:". .",lien:"https://choosealicense.com/licenses/artistic-2.0/"},"bsd-2-clause":{nom:" -    ",abr:"...",lien:"https://choosealicense.com/licenses/bsd-2-clause/"},"bsd-3-clause-clear":{nom:"-     ",abr:"... ",lien:"https://choosealicense.com/licenses/bsd-3-clause-clear/"},"bsd-3-clause":{nom:"    - ",abr:"....- ",lien:"https://choosealicense.com/licenses/bsd-3-clause/"},"bsd-4-clause":{nom:" -    ",abr:"...  -",lien:"https://choosealicense.com/licenses/bsd-4-clause/"},"bsl-1_0":{nom:"   .",abr:".  . ",lien:"https://choosealicense.com/licenses/bsl-1.0/"},"cecill-2_1":{nom:"    ,",abr:"... ,",lien:"https://choosealicense.com/licenses/cecill-2.1/"},"ecl-2_0":{nom:"   ,",abr:".. ,",lien:"https://choosealicense.com/licenses/ecl-2.0/"},"epl-1_0":{nom:"   ,",abr:".. ,",lien:"https://choosealicense.com/licenses/epl-1.0/"},"epl-2_0":{nom:"   ,0",abr:".. ,",lien:"https://choosealicense.com/licenses/epl-2.0/"},"eupl-1_0":{nom:"    ,",abr:"... ,",lien:"https://choosealicense.com/licenses/eupl-1.1/"},"eupl-1_2":{nom:"    ,",abr:"... ,",lien:"https://choosealicense.com/licenses/eupl-1.2/"},"gpl-2_0":{nom:"   ,",abr:"..  ,",lien:"https://choosealicense.com/licenses/gpl-2.0/"},"gpl-3_0":{nom:"   ,",abr:"..  ,",lien:"https://choosealicense.com/licenses/gpl-3.0/"},isc:{nom:"   ",abr:".. ",lien:"https://choosealicense.com/licenses/isc/"},"lgpl-2_1":{nom:"    ,",abr:"..  ,",lien:"https://choosealicense.com/licenses/lgpl-2.1/"},"lgpl-3_0":{nom:"     ,",abr:"..  ,",lien:"https://choosealicense.com/licenses/lgpl-3.0/"},"lppl-1_3c":{nom:"   LaTeX ,",abr:".. LaTeX ,",lien:"https://choosealicense.com/licenses/lppl-1.3c/"},"mit-0":{nom:"    ",abr:"..  ",lien:"https://choosealicense.com/licenses/mit-0/"},mit:{nom:"  ",abr:"..",lien:"https://choosealicense.com/licenses/mit/"},"mpl-2_0":{nom:"   ,",abr:".. ,",lien:"https://choosealicense.com/licenses/mpl-2.0/"},"ms-pl":{nom:"  ",abr:". ",lien:"https://choosealicense.com/licenses/ms-pl/"},"ms-rl":{nom:"  ",abr:". ",lien:"https://choosealicense.com/licenses/ms-rl/"},"mulanpsl-2_0":{nom:"   ,  ",abr:"...,  ",lien:"https://choosealicense.com/licenses/mulanpsl-2.0/"},ncsa:{nom:"       / ",abr:"... ",lien:"https://choosealicense.com/licenses/ncsa/"},"osl-3_0":{nom:"   ,",abr:".. ,",lien:"https://choosealicense.com/licenses/osl-3.0/"},postgresql:{nom:" ",abr:".",lien:"https://choosealicense.com/licenses/postgresql/"},unlicence:{nom:" ",abr:".",lien:"https://choosealicense.com/licenses/unlicense/"},"upl-1_0":{nom:"   ,",abr:".. ,",lien:"https://choosealicense.com/licenses/upl-1.0/"},vim:{nom:" ",abr:".",lien:"https://choosealicense.com/licenses/vim/"},wtfpl:{nom:"   ",abr:".. ",lien:"https://choosealicense.com/licenses/wtfpl/"},zlib:{nom:" ",abr:".",lien:"https://choosealicense.com/licenses/zlib/"},"ofl-1_1":{nom:"       ,",abr:"... .. ,",lien:"https://choosealicense.com/licenses/ofl-1.1/"},introuvable:{nom:" ",abr:""}},dtails:{droits:{partager:"Vous pouvez distribuer ces donnes",adapter:"Vous pouvez modifier ces donnes",usageComercial:"Vous pouvez utiliser ces donnes  des fins commerciales",usagePriv:"Vous pouvez modifier et utiliser les donnes  des fins d'utilisation prive",usageBrevets:"Les contributeurs vous offrent explicitement des droits au brevets"},limitations:{aucuneResponsabilit:"Limite la resposabilit des auteurs",aucuneGarantie:"Mentionne qu'aucune garantie n'est offerte ",marqueCommerce:"Exclut explicitement les marques de commerce des permissions octroyes par la licence",brevetExclu:"Exclut explicitement les brevets des permissions octroyes par la licence",sousLicence:"N'autorise pas la concession de sous-licences"},conditions:{attribution:"Les auteurs originaux du matriel doivent tre mentionns dans les redistributions",partagegal:"Les modifications doivent tre partags sous la mme licence",inclureDroitDauteur:"Une notice de droit d'auteur doit tre incluse avec le matriel s'il est distribu",indiquerChangements:"Les modifications au matriel doivent tre indiques lorsqu'il est redistribu",partagerCodeSource:"Le code source doit tre partag avec les distributions du matriel",usageRseau:"L'utilisation du matriel pour offrir des services en ligne est considre en tant que distribution"}},droits:{sousTitre:"",aucune:" ",partager:" ",adapter:"",usageComercial:" ",usagePriv:" ",usageBrevets:""},conditions:{sousTitre:"",aucune:" ",attribution:"",partagegal:" ",inclureDroitDauteur:"",indiquerChangements:" ",partagerCodeSource:" ",usageRseau:"  "},limitations:{sousTitre:"",aucune:" ",aucuneResponsabilit:" ",aucuneGarantie:" ",marqueCommerce:" ",brevetExclu:"",sousLicence:" "},avertissement:"         .    .     .",lire:" ",aucunLien:" ",carte:{titre:""}}},kaq,cst,:{communs:{constellation:""}},:{communs:{constellation:""}}},kilimukku=_({_:"fr",_:messages}),localisation=gnrerLocalisation({langue:"fr"});function isObject(r){return typeof r=="object"&&r!==null}function normalizeOptions(r,n){return r=isObject(r)?r:Object.create(null),new Proxy(r,{get(_,x,S){return x==="key"?Reflect.get(_,x,S):Reflect.get(_,x,S)||Reflect.get(n,x,S)}})}function get(r,n){return n.reduce((_,x)=>_?.[x],r)}function set(r,n,_){return n.slice(0,-1).reduce((x,S)=>/^(__proto__)$/.test(S)?{}:x[S]=x[S]||{},r)[n[n.length-1]]=_,r}function pick(r,n){return n.reduce((_,x)=>{const S=x.split(".");return set(_,S,get(r,S))},{})}function hydrateStore(r,{storage:n,serializer:_,key:x,debug:S}){try{const E=n?.getItem(x);E&&r.$patch(_?.deserialize(E))}catch(E){S&&console.error(E)}}function persistState(r,{storage:n,serializer:_,key:x,paths:S,debug:E}){try{const C=Array.isArray(S)?pick(r,S):r;n.setItem(x,_.serialize(C))}catch(C){E&&console.error(C)}}function createPersistedState(r={}){return n=>{const{auto:_=!1}=r,{options:{persist:x=_},store:S,pinia:E}=n;if(!x)return;if(!(S.$id in E.state.value)){const T=E._s.get(S.$id.replace("__hot:",""));T&&Promise.resolve().then(()=>T.$persist());return}const C=(Array.isArray(x)?x.map(T=>normalizeOptions(T,r)):[normalizeOptions(x,r)]).map(({storage:T=localStorage,beforeRestore:B=null,afterRestore:A=null,serializer:I={serialize:JSON.stringify,deserialize:JSON.parse},key:N=S.$id,paths:V=null,debug:D=!1})=>{var O;return{storage:T,beforeRestore:B,afterRestore:A,serializer:I,key:((O=r.key)!=null?O:F=>F)(typeof N=="string"?N:N(S.$id)),paths:V,debug:D}});S.$persist=()=>{C.forEach(T=>{persistState(S.$state,T)})},S.$hydrate=({runHooks:T=!0}={})=>{C.forEach(B=>{const{beforeRestore:A,afterRestore:I}=B;T&&A?.(n),hydrateStore(S,B),T&&I?.(n)})},C.forEach(T=>{const{beforeRestore:B,afterRestore:A}=T;B?.(n),hydrateStore(S,T),A?.(n),S.$subscribe((I,N)=>{persistState(N,T)},{detached:!0})})}}var src_default=createPersistedState();const pinia=createPinia();pinia.use(src_default);function registerPlugins(r){loadFonts(),r.use(pinia),r.use(i18n),r.use(vuetify),r.use(routeur),r.use(localisation),r.use(kilimukku)}function inscrireExtentions(r){r.use(constellationNavigateur),registerPlugins(r)}const app=createApp(_sfc_main$13);inscrireExtentions(app);app.mount("#app");export{isBrowser$1 as $,enumeration as A,message as B,encodeMessage as C,decodeMessage as D,forge$n as E,util$3 as F,ReaderBufferClass as G,WriterBufferClass as H,CodeError as I,global$1 as J,compare$1 as K,Level as L,aspromise as M,base64$2 as N,eventemitter as O,float as P,inquire_1 as Q,ReaderClass as R,utf8$5 as S,TimeoutError as T,pool_1 as U,forgePbkdf2 as V,WriterClass as W,forgeUtil as X,eventsExports as Y,retimer$2 as Z,forge$m as _,require$$0$2 as a,isNode as a0,isElectronMain as a1,isWebWorker as a2,isElectronRenderer as a3,isReactNative as a4,requireBrowser$b as a5,__vitePreload as a6,path$1 as a7,browserExports as a8,Buffer$5 as a9,browser$1$1 as b,allocUnsafe as c,debug as d,asUint8Array as e,concat$3 as f,alloc$2 as g,equals$2 as h,getDefaultExportFromCjs as i,pushable as j,fromString$1 as k,pushableV as l,commonjsGlobal as m,commonjsRequire as n,isElectron_1 as o,pDefer as p,requireMinimal as q,requireCryptoBrowserify as r,writer_buffer as s,toString$5 as t,reader$1 as u,reader_buffer as v,writer$1 as w,timeoutAbortController as x,pTimeout as y,getAugmentedNamespace as z};
//# sourceMappingURL=index-9d686756.js.map
