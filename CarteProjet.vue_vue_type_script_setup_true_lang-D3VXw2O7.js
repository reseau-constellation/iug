import{d as J,p as K,n as de,ம as pe,r as z,s as U,q as r,ey as w,c as E,a as F,x as ce,h as t,w as a,b as s,V as fe,i as ve,e as me,f as V,t as P,y as L,j as M,R as I,m as je,z as n,G as T,ez as C,e0 as f,as as O,ac as R,ad as G,aj as ge,ak as be,al as _e,H as Q,I as W,J as X,eA as Pe,P as xe,K as Ve,b2 as H}from"./index-DYEsu9Ri.js";const qe={class:"font-weight-bold"},we={class:"mb-2"},Te={class:"font-weight-bold"},Ce={class:"font-weight-bold"},Ue={class:"font-weight-bold"},ye=J({__name:"ÉpinglerProjet",props:{idProjet:{}},setup(m){const o=m,l=K(),{mdAndUp:q}=de(),{$மொ:d}=pe(),j=z(!1),g=z(!1),b=U(l.projets.suivreÉpingleProjet,{idProjet:r(()=>o.idProjet)}),{sélection:_,dispositifs:p,spécifiques:c,valide:u,modifié:v}=w(r(()=>b.value?.base),"TOUS"),{sélection:x,dispositifs:Y,spécifiques:y,valide:Z,modifié:h}=w(r(()=>b.value?.bds.base),"TOUS"),{sélection:A,dispositifs:ee,spécifiques:D,valide:se,modifié:ie}=w(r(()=>b.value?.bds.données.tableaux),"INSTALLÉ"),{sélection:N,dispositifs:te,spécifiques:B,valide:ae,modifié:oe}=w(r(()=>b.value?.bds.données.fichiers),"INSTALLÉ"),le=r(()=>u&&Z&&se&&ae),ne=r(()=>v.value||h.value||ie.value||oe.value),S=z(!1),re=async()=>{if(S.value=!0,p.value!=="AUCUN"){const k={type:"projet",base:p.value,bds:{type:"bd",base:Y.value,données:{tableaux:ee.value,fichiers:te.value}}};await l.projets.épinglerProjet({idProjet:o.idProjet,options:k})}else await ue();$()},ue=async()=>{await l.favoris.désépinglerFavori({idObjet:o.idProjet})},$=()=>{j.value=!1,S.value=!1};return(k,e)=>(F(),E(ce,{modelValue:j.value,"onUpdate:modelValue":e[10]||(e[10]=i=>j.value=i),"max-width":t(q)?500:300},{activator:a(({props:i})=>[Q(k.$slots,"activateur",W(X({props:i})))]),default:a(()=>[s(fe,null,{default:a(()=>[s(ve,null,{default:a(()=>[s(me,{class:"d-flex align-center"},{default:a(()=>[V(P(t(d)("épingler.titre"))+" ",1),s(L),s(M,{icon:"mdi-close",size:"small",variant:"flat",onClick:$})]),_:1})]),_:1}),s(I),s(je,{style:{"overflow-y":"scroll"}},{default:a(()=>[s(T,{start:""},{default:a(()=>[...e[11]||(e[11]=[V("mdi-pin-outline",-1)])]),_:1}),n("span",qe,P(t(d)("épingler.dispositifsÉpingle")),1),s(C,{selection:t(_),"onUpdate:selection":e[0]||(e[0]=i=>f(_)?_.value=i:null),specifiques:t(c),"onUpdate:specifiques":e[1]||(e[1]=i=>f(c)?c.value=i:null),class:"ms-4"},null,8,["selection","specifiques"]),s(O,null,{default:a(()=>[R(n("div",null,[n("p",we,[n("span",null,P(t(d)("épingler.optionsAvancées")),1),s(M,{icon:g.value?"mdi-chevron-up":"mdi-chevron-down",size:"xsmall",variant:"flat",onClick:e[2]||(e[2]=()=>g.value=!g.value)},null,8,["icon"])]),s(O,null,{default:a(()=>[R(n("div",null,[s(I,{class:"mb-2"}),n("p",null,[s(T,{start:""},{default:a(()=>[...e[12]||(e[12]=[V("mdi-database",-1)])]),_:1}),n("span",Te,P(t(d)("épingler.dispositifsÉpingleBds")),1)]),s(C,{selection:t(x),"onUpdate:selection":e[3]||(e[3]=i=>f(x)?x.value=i:null),specifiques:t(y),"onUpdate:specifiques":e[4]||(e[4]=i=>f(y)?y.value=i:null),class:"ms-4"},null,8,["selection","specifiques"]),n("p",null,[s(T,{start:""},{default:a(()=>[...e[13]||(e[13]=[V("mdi-table-multiple",-1)])]),_:1}),n("span",Ce,P(t(d)("épingler.dispositifsÉpingleDonnées")),1)]),s(C,{selection:t(A),"onUpdate:selection":e[5]||(e[5]=i=>f(A)?A.value=i:null),specifiques:t(D),"onUpdate:specifiques":e[6]||(e[6]=i=>f(D)?D.value=i:null),class:"ms-4"},null,8,["selection","specifiques"]),n("p",null,[s(T,{start:""},{default:a(()=>[...e[14]||(e[14]=[V("mdi-image-multiple-outline",-1)])]),_:1}),n("span",Ue,P(t(d)("épingler.dispositifsÉpingleDocuments")),1)]),s(C,{selection:t(N),"onUpdate:selection":e[7]||(e[7]=i=>f(N)?N.value=i:null),specifiques:t(B),"onUpdate:specifiques":e[8]||(e[8]=i=>f(B)?B.value=i:null),class:"ms-4"},null,8,["selection","specifiques"])],512),[[G,g.value]])]),_:1})],512),[[G,t(_)!=="AUCUN"]])]),_:1})]),_:1}),s(I),s(ge,null,{default:a(()=>[s(L),s(be,{onClick:$}),s(_e,{actif:le.value&&ne.value,"en-attente":S.value,onClick:e[9]||(e[9]=()=>re())},null,8,["actif","en-attente"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),De=J({__name:"CarteProjet",props:{id:{}},setup(m){const o=m,l=K(),q=U(l.projets.suivreNomsProjet,{idProjet:r(()=>o.id)},{}),d=async p=>{const{àEffacer:c,àAjouter:u}=H({anciennes:q.value,nouvelles:p});for(const v of c)await l.projets.effacerNomProjet({idProjet:o.id,langue:v});await l.projets.sauvegarderNomsProjet({idProjet:o.id,noms:u})},j=U(l.projets.suivreDescriptionsProjet,{idProjet:r(()=>o.id)},{}),g=async p=>{const{àEffacer:c,àAjouter:u}=H({anciennes:j.value,nouvelles:p});for(const v of c)await l.projets.effacerDescriptionProjet({idProjet:o.id,langue:v});await l.projets.sauvegarderDescriptionsProjet({idProjet:o.id,descriptions:u})},b=U(l.réseau.suivreAuteursProjet,{idProjet:r(()=>o.id)}),_=async()=>{await l.projets.effacerProjet({idProjet:o.id})};return(p,c)=>(F(),E(Pe,{id:m.id,noms:t(q),descriptions:t(j),auteurs:t(b),"fichiers-epinglables":!0,onAjusterNoms:d,onAjusterDescriptions:g,onEffacer:_},{activateur:a(({props:u})=>[Q(p.$slots,"activateur",W(X({props:u})))]),epingler:a(({activateur:u,epingle:v})=>[s(ye,{"id-projet":m.id},{activateur:a(({props:x})=>[(F(),E(xe(u),Ve(x,{id:m.id,epingle:v}),null,16,["id","epingle"]))]),_:2},1032,["id-projet"])]),_:3},8,["id","noms","descriptions","auteurs"]))}});export{De as _,ye as a};
//# sourceMappingURL=CarteProjet.vue_vue_type_script_setup_true_lang-D3VXw2O7.js.map
