import{d as Y,q,a as r,c as p,w as t,x as De,y as ge,z as xe,n as Ae,p as ve,r as A,s as C,b as e,h as Be,V as Ce,e as j,t as k,f as a,A as G,i as x,l as fe,S as Me,L as J,Z as re,D as K,bz as te,O as ce,bA as qe,W as D,H,m as z,I as ke,க as pe,v as Ee,bB as Ze,ao as he,bC as ze,bD as Je,bE as Ke,as as Fe,aP as Ye,bF as ea,M as me,J as g,am as Se,P as aa,$ as ta,an as le,bG as Ge,B as N,u as ia,ம as la,o as na,bH as oa,aH as sa,aG as da,bI as ua,aZ as ra,a_ as ca,a$ as Ie,b0 as ma,br as Ne,bJ as fa,bs as va,bK as Le,C as ie,bL as pa,bM as ba,aa as _a,bN as ya,bt as Pe,bO as ga,bu as xa,N as we,X as je,a3 as Ba,b1 as Ca,aF as ka,Q as Ta,b2 as Oe,R as Va}from"./index-Bj2l6ASh.js";import{u as wa}from"./historiqueDocuments-CImj7Mgh.js";import{_ as ja,t as $a,E as ha,a as Da,V as Aa,b as He,c as Qe,d as Ea,e as Sa,f as Ia,g as Na,h as La,i as Pa,j as Oa,k as Ua,l as Ue}from"./VBreadcrumbs-DT81gIwc.js";import{_ as Ra}from"./ChoisirStatut.vue_vue_type_script_setup_true_lang-BudSwakj.js";import{b as Ma,c as $e}from"./SélecteurNuée.vue_vue_type_script_setup_true_lang-BInkuloQ.js";import{_ as qa}from"./OptionsDocumentsExportation.vue_vue_type_script_setup_true_lang-Bq-9oo6D.js";import{_ as za}from"./ÉpinglerBd.vue_vue_type_script_setup_true_lang-DwSCp8iO.js";import{V as Fa,a as Ga}from"./VTabs-BfoZrbu_.js";import{V as Re}from"./VSlideGroupItem-yu6V1lI0.js";import"./RésultatRechercheNuée.vue_vue_type_script_setup_true_lang-Tc4QAFah.js";import"./RésultatRechercheProjet.vue_vue_type_script_setup_true_lang-Dx4LBM9h.js";import"./CarteProjet.vue_vue_type_script_setup_true_lang-CvxQlmaq.js";import"./NouveauProjet.vue_vue_type_script_setup_true_lang-CaSz4RRP.js";import"./_baseClone-DwPii5S7.js";const Ha=Y({__name:"CarteCodeBd",props:{id:{}},setup(S){const u=S,o=q(()=>({ts:`import { créerConstellation } from "@constl/ipa";

const client = créerConstellation();

const monAnalyse = async (données) => {
  console.log(données)
  // Faire quelque chose...
}

const fOublier = client.bds.suivreDonnéesExportation({
  idBd: "${u.id}",
  f: monAnalyse
})
`,py:`from constellationPy import Serveur, ClientSync
    
with Serveur():
    client = ClientSync()

    données = client.bds.suivreDonnéesExportation(
      idBd="${u.id}"
    )
`,julia:`import Constellation

Constellation.avecServeur() do port
  Constellation.avecClient(port) do client

    oublier = Constellation.suivre(
        client, 
        "bds.suivreDonnéesExportation", 
        Dict([("idBd","${u.id}")])
    ) do résultat
        print(résultat)
    end
  end
end
`,r:`library(constellationR)

constellationR::avecClientEtServeur(
  function (client) {
    
    données <- client$appeler(
      "bds.suivreDonnéesExportation", 
      list(idBd="${u.id}")
    )
  }
)
`}));return(v,_)=>(r(),p(ja,{codes:o.value},{activator:t(({props:B})=>[De(v.$slots,"activator",ge(xe({props:B})))]),_:3},8,["codes"]))}}),Qa=Y({__name:"CarteQualitéBd",props:{idBd:{}},setup(S){const{mdAndUp:u}=Ae(),{மொழியாக்கம்_பயன்படுத்து:o}=pe(),{$மொ:v}=o(),_=S,B=ve(),s=A(!1),y=C(B.bds.suivreQualitéBd,{idBd:_.idBd}),E=C(B.bds.suivreLicenceBd,{idBd:_.idBd}),Q=C(B.bds.suivreLicenceContenuBd,{idBd:_.idBd}),L=C(B.suivrePermission,{idObjet:_.idBd});return(w,V)=>(r(),p(ke,{modelValue:s.value,"onUpdate:modelValue":V[1]||(V[1]=h=>s.value=h),"max-width":a(u)?500:300},{activator:t(({props:h})=>[De(w.$slots,"activator",ge(xe({props:h})))]),default:t(()=>[e(z,null,{default:t(()=>[e(Be,null,{default:t(()=>[e(Ce,{class:"d-flex"},{default:t(()=>[j(k(a(v)("bds.qualité.titre"))+" ",1),e(G),e(x,{icon:"mdi-close",size:"small",variant:"flat",onClick:V[0]||(V[0]=h=>s.value=!1)})]),_:1})]),_:1}),e(fe,null,{default:t(()=>[e(Me,null,{default:t(()=>[e(J,null,{prepend:t(()=>[e(re,null,{default:t(()=>[e(K,{"model-value":(a(y)?.total||0)*100,width:5,indeterminate:a(y)?.total===void 0,color:a(te)(a(y)?.total).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>V[2]||(V[2]=[j("Score total")])),_:1}),e(ce),e(J,null,{prepend:t(()=>[e(re,null,{default:t(()=>[e(K,{"model-value":(a(y)?.accès||0)*100,width:5,indeterminate:a(y)?.accès===void 0,color:a(te)(a(y)?.accès).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>V[3]||(V[3]=[j("Accessibilité")])),_:1}),e(qe,{licence:a(E),"licence-contenu":a(Q),"permission-modifier":!!a(L)},{activator:t(({props:h})=>[e(J,ge(xe(h)),{prepend:t(()=>[e(re,null,{default:t(()=>[a(y)?.licence===void 0?(r(),p(K,{key:0,width:5,indeterminate:"",color:a(te)(a(y)?.licence).couleur},null,8,["color"])):D("",!0),e(H,{icon:a(y)?.licence?"mdi-check":"mdi-alert-circle-outline",color:a(te)(a(y)?.licence).couleur},null,8,["icon","color"])]),_:1})]),title:t(()=>[j(k(a(y)?.licence===void 0?a(v)("bds.qualité.rechercheLicence"):a(y).licence?a(v)("bds.qualité.licenceOuverte"):a(v)("bds.qualité.licenceNonReconnue")),1)]),_:2},1040)]),_:1},8,["licence","licence-contenu","permission-modifier"]),e(J,null,{prepend:t(()=>[e(re,null,{default:t(()=>[e(K,{"model-value":(a(y)?.valide||0)*100,width:5,indeterminate:a(y)?.valide===void 0,color:a(te)(a(y)?.valide).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>V[4]||(V[4]=[j("Validation données")])),_:1}),e(J,null,{prepend:t(()=>[e(re,null,{default:t(()=>[e(K,{"model-value":(a(y)?.couverture||0)*100,width:5,indeterminate:a(y)?.couverture===void 0,color:a(te)(a(y)?.couverture).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>V[5]||(V[5]=[j("Couverture tests")])),_:1})]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),Wa=Y({__name:"CarteStatutBd",props:{idBd:{}},setup(S){const u=S,{மொழியாக்கம்_பயன்படுத்து:o}=pe(),{$மொ:v}=o(),{mdAndUp:_}=Ae(),B=ve(),s=A(!1),y=C(B.bds.suivreStatutBd,{idBd:u.idBd}),E=A();Ee(()=>{E.value=y.value});const Q=q(()=>y.value?.statut!==E.value?.statut||y.value?.idNouvelle!==E.value?.idNouvelle),L=A(!1),w=async()=>{L.value=!0,E.value&&await B.bds.changerStatutBd({idBd:u.idBd,statut:ze(E.value)}),L.value=!1,s.value=!1};return(V,h)=>(r(),p(ke,{modelValue:s.value,"onUpdate:modelValue":h[2]||(h[2]=I=>s.value=I)},{activator:t(({props:I})=>[De(V.$slots,"activator",ge(xe({props:I})))]),default:t(()=>[e(z,{class:"mx-auto","min-width":a(_)?500:300},{default:t(()=>[e(Be,null,{default:t(()=>[e(Ce,null,{default:t(()=>[j(k(a(v)("données.statut.carte.titre")),1)]),_:1})]),_:1}),e(fe,null,{default:t(()=>[e(Ra,{initial:E.value,onChoisir:h[0]||(h[0]=I=>E.value=I)},{sélecteur:t(({choisirNouvelle:I})=>[e(Ze,{multiples:!1,onSelectionnee:F=>I(F[0])},null,8,["onSelectionnee"])]),_:1},8,["initial"])]),_:1}),e(he,null,{default:t(()=>[e(G),e(x,{disabled:!Q.value,loading:L.value,variant:"flat",color:"primary",onClick:w},{default:t(()=>[j(k(a(v)("communs.sauvegarder")),1)]),_:1},8,["disabled","loading"]),e(x,{variant:"flat","append-icon":"mdi-close",onClick:h[1]||(h[1]=I=>s.value=!1)},{default:t(()=>[j(k(a(v)("communs.fermer")),1)]),_:1})]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),Xa=Y({__name:"ItemQualitéBd",props:{id:{}},setup(S){return(u,o)=>(r(),p(J,null,{prepend:t(()=>[e(Je,{id:u.id},null,8,["id"])]),default:t(()=>[e(Fe,null,{default:t(()=>[e(Ke,{id:u.id},null,8,["id"])]),_:1})]),_:1}))}}),Za=Y({__name:"ItemLicence",props:{licence:{}},setup(S){const u=ve(),{மொழியாக்கம்_பயன்படுத்து:o}=pe(),{$மொ:v}=o(),_=S,B=C(u.licences.suivreLicences),s=q(()=>_.licence&&B.value&&Object.keys(B.value).includes(_.licence));return(y,E)=>(r(),p(J,null,{prepend:t(()=>[e(H,{start:"",color:s.value?"primary":"error"},{default:t(()=>[j(k(s.value?"mdi-scale-balance":"mdi-alert"),1)]),_:1},8,["color"])]),default:t(()=>[e(Fe,null,{default:t(()=>[j(k(s.value?a(v)(`licences.info.${y.licence}.abr`):y.licence),1)]),_:1})]),_:1}))}}),Ja={class:"my-4 text-h6 text-disabled"},Ka=Y({__name:"TableauBd",props:{idTableau:{},idBd:{}},setup(S){const{மொழியாக்கம்_பயன்படுத்து:u}=pe(),{$மொ:o}=u(),v=ve(),_=S,B=C(v.suivrePermission,{idObjet:_.idTableau}),s=C(v.tableaux.suivreNomsTableau,{idTableau:_.idTableau}),y=C(v.tableaux.suivreVariables,{idTableau:_.idTableau}),E=C(v.tableaux.suivreColonnesTableau,{idTableau:_.idTableau}),Q=C(v.tableaux.suivreColonnesTableau,{idTableau:_.idTableau,catégories:!0}),L=q(()=>(E.value||[]).map(d=>{const n=Q.value?.find(l=>l.id===d.id)?.catégorie;return{key:d.id,sortable:n===void 0||(n?.type==="simple"?$a(n.catégorie):!1),info:{index:d.index,catégorie:n,variable:d.variable}}})),w=q(()=>{const d={key:"actions",sortable:!1,info:{}};return[...L.value,d]}),V=async({idVariable:d,idColonne:n,index:l,règles:f})=>{n=await v.tableaux.ajouterColonneTableau({idTableau:_.idTableau,idVariable:d,idColonne:n}),l&&await v.tableaux.changerColIndex({idTableau:_.idTableau,idColonne:n,val:!0});for(const T of f)await v.tableaux.ajouterRègleTableau({idTableau:_.idTableau,idColonne:n,règle:T})},h=async({idColonne:d,index:n,règles:l})=>{await v.tableaux.changerColIndex({idTableau:_.idTableau,idColonne:d,val:n});for(const f of l.nouvelles)await v.tableaux.ajouterRègleTableau({idTableau:_.idTableau,idColonne:d,règle:f});for(const f of l.àEffacer)await v.tableaux.effacerRègleTableau({idTableau:_.idTableau,idRègle:f})},I=async({idColonne:d})=>{await v.tableaux.effacerColonneTableau({idTableau:_.idTableau,idColonne:d})},F=C(v.tableaux.suivreDonnées,{idTableau:_.idTableau}),be=q(()=>{const d=F.value?.toSorted((l,f)=>ne.value&&ne.value.map(T=>l.données[T.key]===void 0?f.données[T.key]===void 0?0:T.order==="asc"?1:-1:f.données[T.key]===void 0?l.données[T.key]===void 0?0:T.order==="asc"?-1:1:l.données[T.key]>f.données[T.key]?T.order==="asc"?1:-1:l.données[T.key]<f.données[T.key]?T.order==="asc"?-1:1:0).find(T=>T!==0)||0),n={id:"-1",données:{}};return W.value&&d?[n,...d]:d}),ne=A(),O=A([]),Te=C(v.tableaux.suivreRègles,{idTableau:_.idTableau}),W=A(!1),ee=A(!1),X=A(),U=q(()=>{const d=[];for(const[n,l]of Object.entries(X.value||{})){const f=F.value?.find(T=>T.id===n);f&&R({modifs:l,original:f.données})&&d.push({idÉlément:n,vals:l})}return d}),oe=q(()=>U.value.length+(Object.keys($.value).length?1:0)),R=({modifs:d,original:n})=>Object.keys(d).some(l=>n[l]!==d[l]),$=A({});Ee(()=>{W.value||($.value={})});const P=q(()=>Object.keys($.value).length>0),se=({val:d,idCol:n,idÉlément:l})=>{if(l==="-1")d!==void 0?$.value[n]=d:delete $.value[n];else{const f=X.value||{};f[l]||(f[l]={}),f[l][n]=d,X.value=f}},de=async({vals:d})=>Object.fromEntries(await Promise.all(Object.entries(d).map(async([n,l])=>{if(l instanceof File){const f=await v.ajouterÀSFIP({contenu:new Uint8Array(await l.arrayBuffer()),nomFichier:l.name});return[n,f]}else return[n,l]}))),_e=async()=>{ee.value=!0;for(const{idÉlément:d,vals:n}of U.value)await v.tableaux.modifierÉlément({idTableau:_.idTableau,idÉlément:d,vals:await de({vals:n})});P.value&&await ye(),X.value=void 0,ee.value=!1},ye=async()=>{await v.tableaux.ajouterÉlément({idTableau:_.idTableau,vals:await de({vals:$.value})}),$.value={}},ae=A(!1),Z=A(!1),M=A(!1),c=A(!1),b=A(!1);Ye([c,b],()=>{ae.value=Z.value});const i=async({idÉlément:d})=>{M.value=!0,await v.tableaux.effacerÉlément({idTableau:_.idTableau,idÉlément:d}),M.value=!1},m=async()=>{M.value=!0,await Promise.all(O.value.map(d=>i({idÉlément:d}))),O.value=[],M.value=!1},ue=async()=>{await v.bds.effacerTableauBd({idBd:_.idBd,idTableau:_.idTableau})};return(d,n)=>(r(),p(Ea,{modelValue:O.value,"onUpdate:modelValue":n[13]||(n[13]=l=>O.value=l),headers:w.value,items:be.value,"show-select":!!a(B),"multi-sort":"","onUpdate:sortBy":n[14]||(n[14]=l=>ne.value=l)},ea({top:t(()=>[e(Aa,{flat:"",density:"compact"},{default:t(()=>[e(G),a(B)?(r(),p(x,{key:0,icon:"",disabled:!oe.value,onClick:n[0]||(n[0]=()=>_e())},{default:t(()=>[oe.value?(r(),p(aa,{key:0,color:"success",content:oe.value},{default:t(()=>[e(H,{color:"primary",icon:"mdi-content-save-outline"})]),_:1},8,["content"])):(r(),p(H,{key:1,color:"primary",icon:"mdi-content-save-check-outline"}))]),_:1},8,["disabled"])):D("",!0),a(B)?(r(),p(ta,{key:1,modelValue:W.value,"onUpdate:modelValue":n[1]||(n[1]=l=>W.value=l),class:"me-4",density:"compact",color:"primary","true-icon":"mdi-pencil-outline","false-icon":"mdi-pencil-off-outline","hide-details":""},null,8,["modelValue"])):D("",!0),a(B)?(r(),p(Ma,{key:2,"id-tableau":d.idTableau,"variables-interdites":a(y),onNouvelle:n[2]||(n[2]=l=>V(l))},{activator:t(({props:l})=>[e(x,g(l,{icon:"mdi-table-column-plus-after"}),null,16)]),_:1},8,["id-tableau","variables-interdites"])):D("",!0),e(He,{"id-objet":d.idTableau,"type-objet":"tableau"},{activator:t(({props:l})=>[e(le,{text:a(o)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:f})=>[e(x,g({...l,...f},{icon:"mdi-sync"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet"]),e(Qe,{"id-objet":d.idTableau,"noms-objet":a(s),"type-objet":"tableau"},{activator:t(({props:l})=>[e(le,{text:a(o)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:f})=>[e(x,g({...l,...f},{icon:"mdi-download"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet","noms-objet"]),a(B)?(r(),p(Ge,{key:3,onEffacer:n[3]||(n[3]=()=>ue())},{activator:t(({props:l})=>[e(x,g(l,{icon:"mdi-delete",color:"error"}),null,16)]),_:1})):D("",!0)]),_:1})]),"no-data":t(()=>[N("p",Ja,k(a(o)("tableaux.aucuneDonnée")),1),e(qa,{type:"importation","info-objet":{id:d.idTableau,typeObjet:"tableau"},"id-tableau":d.idTableau,"colonnes-tableau":a(E)||[]},{activator:t(({props:l})=>[e(x,g(l,{class:"mb-4","prepend-icon":"mdi-import",variant:"outlined"}),{default:t(()=>[j(k(a(o)("tableaux.importer")),1)]),_:2},1040)]),_:1},8,["info-objet","id-tableau","colonnes-tableau"])]),"item.actions":t(({item:l})=>[l.id==="-1"?(r(),p(x,{key:0,disabled:!P.value,icon:"mdi-content-save-outline",size:"small",variant:"flat",onClick:n[9]||(n[9]=()=>ye())},null,8,["disabled"])):ae.value&&a(B)?(r(),p(x,{key:1,size:"small",icon:"mdi-delete",variant:"flat",loading:M.value,onClick:()=>i({idÉlément:l.id})},null,8,["loading","onClick"])):a(B)?(r(),p(ke,{key:2,modelValue:c.value,"onUpdate:modelValue":n[12]||(n[12]=f=>c.value=f)},{activator:t(({props:f})=>[e(x,g(f,{variant:"flat",icon:"mdi-delete",size:"small",loading:M.value}),null,16,["loading"])]),default:t(()=>[e(z,{class:"mx-auto","max-width":"450"},{default:t(()=>[e(Be,null,{default:t(()=>[e(Ce,null,{default:t(()=>[j(k(a(o)("tableaux.données.titreEffacer")),1)]),_:1})]),_:1}),e(fe,null,{default:t(()=>[e(Se,{modelValue:Z.value,"onUpdate:modelValue":n[10]||(n[10]=f=>Z.value=f),label:a(o)("tableaux.données.nePlusConfirmerEffacer")},null,8,["modelValue","label"])]),_:1}),e(he,null,{default:t(()=>[e(G),e(x,{variant:"text",text:a(o)("communs.oui"),onClick:()=>{i({idÉlément:l.id}),c.value=!1}},null,8,["text","onClick"]),e(x,{variant:"text",color:"primary",text:a(o)("communs.non"),onClick:n[11]||(n[11]=f=>c.value=!1)},null,8,["text"]),e(G)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])):D("",!0)]),_:2},[me(L.value||[],l=>({name:`header.${l.key}`,fn:t(({column:f,isSorted:T,getSortIcon:We,toggleSort:Xe})=>[e(ha,{"id-colonne":l.key,"id-variable":l.info.variable,"id-tableau":d.idTableau,index:!!l.info.index,regles:a(Te)?.filter(Ve=>Ve.colonne===l.key),"permission-modifier":!!a(B),ordonnable:f.sortable,"est-ordonnee":T(f),"icone-ordonner":We(f),onBasculerOrdonner:()=>Xe(f),onSauvegarder:Ve=>h({idColonne:l.key,...Ve}),onEffacer:()=>I({idColonne:l.key})},null,8,["id-colonne","id-variable","id-tableau","index","regles","permission-modifier","ordonnable","est-ordonnee","icone-ordonner","onBasculerOrdonner","onSauvegarder","onEffacer"])])})),a(B)?{name:"header.actions",fn:t(()=>[ae.value?(r(),p(x,{key:0,icon:"mdi-delete",variant:"flat",size:"small",loading:M.value,readonly:!O.value.length,onClick:n[4]||(n[4]=()=>m())},null,8,["loading","readonly"])):(r(),p(ke,{key:1,modelValue:b.value,"onUpdate:modelValue":n[8]||(n[8]=l=>b.value=l)},{activator:t(({props:l})=>[e(x,g(l,{icon:"",variant:"flat",size:"small",readonly:!O.value.length,loading:M.value}),{default:t(()=>[e(H,{icon:"mdi-delete",color:O.value.length?void 0:"disabled"},null,8,["color"])]),_:2},1040,["readonly","loading"])]),default:t(()=>[e(z,{class:"mx-auto","max-width":"450"},{default:t(()=>[e(Be,null,{default:t(()=>[e(Ce,null,{default:t(()=>[j(k(a(o)("tableaux.données.titreEffacerSélectionnées",O.value.length)),1)]),_:1})]),_:1}),e(fe,null,{default:t(()=>[e(Se,{modelValue:Z.value,"onUpdate:modelValue":n[5]||(n[5]=l=>Z.value=l),label:a(o)("tableaux.données.nePlusConfirmerEffacer")},null,8,["modelValue","label"])]),_:1}),e(he,null,{default:t(()=>[e(G),e(x,{variant:"text",text:a(o)("communs.oui"),onClick:n[6]||(n[6]=()=>{m(),b.value=!1})},null,8,["text"]),e(x,{variant:"text",color:"primary",text:a(o)("communs.non"),onClick:n[7]||(n[7]=l=>b.value=!1)},null,8,["text"]),e(G)]),_:1})]),_:1})]),_:1},8,["modelValue"]))]),key:"0"}:void 0,me(L.value,l=>({name:`item.${l.key}`,fn:t(({item:f})=>[e(Da,{categorie:l.info.catégorie?.catégorie,val:f.données[l.key],editable:!!a(B)&&W.value,onModifiee:({val:T})=>se({idCol:l.key,idÉlément:f.id,val:T})},null,8,["categorie","val","editable","onModifiee"])])}))]),1032,["modelValue","headers","items","show-select"]))}}),Ya={class:"text-center"},et={class:"text-center"},at={key:0,class:"text-disabled"},tt={class:"text-center"},it={class:"mt-6 text-h5"},lt={class:"d-flex flex-wrap"},nt={class:"mt-6 text-h5"},ot={key:0,class:"text-disabled"},st={class:"mt-6 text-h5"},dt={key:2,class:"text-center"},ut={class:"text-h5 mt-5"},Tt=Y({__name:"PageBD",props:{id:{}},setup(S){const u=S,o=ve(),{mdAndUp:v}=Ae(),{isRtl:_}=ia(),{மொழியாக்கம்_பயன்படுத்து:B}=pe(),{$மொ:s}=B(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:y}=la(),{obtImageDéco:E}=da(),Q=wa();na(()=>{Q.documentOuvert({id:u.id,à:Date.now()})});const L=E("vide"),w=C(o.suivrePermission,{idObjet:u.id}),V=C(o.bds.suivreNomsBd,{idBd:u.id}),h=y(V),I=async c=>{const{àEffacer:b,àAjouter:i}=Oe({anciennes:V.value,nouvelles:c});for(const m of b)await o.bds.effacerNomBd({idBd:u.id,langue:m});await o.bds.sauvegarderNomsBd({idBd:u.id,noms:i})},F=C(o.bds.suivreDescriptionsBd,{idBd:u.id}),be=y(F),ne=async c=>{const{àEffacer:b,àAjouter:i}=Oe({anciennes:F.value,nouvelles:c});for(const m of b)await o.bds.effacerDescriptionBd({idBd:u.id,langue:m});await o.bds.sauvegarderDescriptionsBd({idBd:u.id,descriptions:i})},O=oa(C(o.bds.suivreImage,{idBd:u.id})),Te=E("logoBD"),W=async c=>{c?await o.bds.sauvegarderImage({idBd:u.id,image:{contenu:new Uint8Array(c.contenu),nomFichier:c.fichier}}):await o.bds.effacerImage({idBd:u.id})},ee=C(o.bds.suivreStatutBd,{idBd:u.id}),X=C(o.bds.suivreVariablesBd,{idBd:u.id}),U=C(o.bds.suivreMotsClefsBd,{idBd:u.id}),oe=async c=>{const b=c.filter(m=>!U.value?.includes(m)),i=U.value?.filter(m=>!c.includes(m))||[];await o.bds.ajouterMotsClefsBd({idBd:u.id,idsMotsClefs:b}),await Promise.all(i.map(m=>o.bds.effacerMotClefBd({idBd:u.id,idMotClef:m})))},R=C(o.bds.suivreTableauxBd,{idBd:u.id}),$=A();Ee(()=>{!$.value&&R.value?.length&&($.value=R.value[0].clef),$.value&&!R.value?.map(c=>c.clef).includes($.value)&&($.value=void 0)});const P=A(!1),se=async({noms:c,cols:b})=>{P.value=!0;try{const i=await o.bds.ajouterTableauBd({idBd:u.id});await o.tableaux.sauvegarderNomsTableau({idTableau:i,noms:ze(c)}),await Promise.all(b.map(async m=>{await o.tableaux.ajouterColonneTableau({idTableau:i,idColonne:m.info.id,idVariable:m.info.variable}),m.info.index&&await o.tableaux.changerColIndex({idTableau:i,idColonne:m.info.id,val:!0}),await Promise.all(m.règles.map(async ue=>await o.tableaux.ajouterRègleTableau({idTableau:i,idColonne:m.info.id,règle:ue})))}))}finally{P.value=!1}},de=C(o.réseau.suivreAuteursBd,{idBd:u.id}),_e=C(o.bds.suivreLicenceBd,{idBd:u.id}),ye=C(o.bds.suivreLicenceContenuBd,{idBd:u.id}),ae=async({licence:c,licenceContenu:b})=>{await o.bds.changerLicenceBd({idBd:u.id,licence:c}),b&&await o.bds.changerLicenceContenuBd({idBd:u.id,licenceContenu:b})},Z=q(()=>[{title:s("navigation.données"),href:encodeURI("/données/")},{title:h.value||s("bds.sansNom"),disabled:!0}]),M=async()=>{await o.bds.effacerBd({idBd:u.id})};return(c,b)=>(r(),p(sa,null,{default:t(()=>[N("div",null,[a(v)?(r(),p(Sa,{key:0,items:Z.value,class:"pa-0"},{divider:t(()=>[e(H,null,{default:t(()=>[j(k(a(_)?"mdi-chevron-left":"mdi-chevron-right"),1)]),_:1})]),title:t(({item:i})=>[e(Ia,{disabled:i.disabled,onClick:m=>i.href&&c.$router.push(i.href)},{default:t(()=>[e(ua,{texte:i.title,"longueur-max":35},null,8,["texte"])]),_:2},1032,["disabled","onClick"])]),_:1},8,["items"])):(r(),p(x,{key:1,icon:"mdi-arrow-left-top",variant:"flat",onClick:b[0]||(b[0]=()=>c.$router.push(encodeURI("/données/")))}))]),e(ca,{"src-image":a(O),"img-defaut":a(Te),editable:!!a(w),"taille-avatar":a(v)?275:175,"max-taille-image":a(ra),onImageChangee:b[1]||(b[1]=i=>W(i))},null,8,["src-image","img-defaut","editable","taille-avatar","max-taille-image"]),N("div",Ya,[e(Ie,{"etiquette-nom":a(s)("objet.étiquetteNom"),"indice-nom":a(s)("objet.indiceNom"),"indice-langue":a(s)("objet.indiceLangue"),"texte-aucun-nom":a(s)("objet.texteAucunNom"),"noms-initiaux":a(V),titre:a(s)("objet.titreDialogueNoms"),"sous-titre":a(s)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!a(w),onAjusterNoms:I},{activator:t(({props:i})=>[N("span",g(i,{class:"text-h4"}),[j(k(a(h)||a(s)("bds.sansNom"))+" ",1),e(x,{icon:a(w)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),e(ma,{id:c.id},null,8,["id"]),e(G)]),N("div",et,[e(Le,{"n-max":5,items:a(U)},{jeton:t(({id:i})=>[e(Ne,{id:i},{activator:t(({props:m})=>[e(fa,g(m,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:t(({id:i})=>[e(Ne,{id:i},{activator:t(({props:m})=>[e(va,g(m,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),a(U)&&!a(U).length?(r(),ie("span",at,k(a(s)("bds.aucunMotClef")),1)):D("",!0),a(w)&&a(U)?(r(),p(pa,{key:1,originaux:a(U),onSauvegarder:b[2]||(b[2]=i=>oe(i))},null,8,["originaux"])):D("",!0)]),N("div",tt,[e(za,{"id-bd":c.id},{activator:t(({props:i})=>[e(le,{"open-delay":"200",location:"bottom",text:a(s)("épingler.épingler")},{activator:t(({props:m})=>[e(x,g({...i,...m},{icon:"",variant:"flat"}),{default:t(()=>[e(ba,{id:c.id},null,8,["id"])]),_:2},1040)]),_:2},1032,["text"])]),_:1},8,["id-bd"]),e(Qe,{"id-objet":c.id,"noms-objet":a(V),"type-objet":"bd"},{activator:t(({props:i})=>[e(le,{text:a(s)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:m})=>[e(x,g({...i,...m},{icon:"mdi-download",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet","noms-objet"]),e(Ha,{id:c.id},{activator:t(({props:i})=>[e(le,{text:a(s)("code.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:m})=>[e(x,g({...i,...m},{icon:"mdi-xml",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id"]),D("",!0),a(w)?(r(),p(Ge,{key:1,onEffacer:M},{activator:t(({props:i})=>[e(le,{"open-delay":"200",location:"bottom",text:a(s)("effacer.indice")},{activator:t(({props:m})=>[e(x,g({...i,...m},{variant:"flat",icon:""}),{default:t(()=>[e(H,{color:"error"},{default:t(()=>b[7]||(b[7]=[j("mdi-delete")])),_:1})]),_:2},1040)]),_:2},1032,["text"])]),_:1})):D("",!0)]),e(ce),e(fe,null,{default:t(()=>[e(Ie,{"etiquette-nom":a(s)("objet.étiquetteDescription"),"indice-nom":a(s)("objet.indiceDescription"),"indice-langue":a(s)("objet.indiceLangue"),"texte-aucun-nom":a(s)("objet.texteAucuneDescription"),"noms-initiaux":a(F),titre:a(s)("objet.titreDialogueDescriptions"),"sous-titre":a(s)("objet.sousTitreDialogueDescriptions"),"autorisation-modification":!!a(w),longue:"",onAjusterNoms:ne},{activator:t(({props:i})=>[N("span",{class:_a({"text-disabled":!a(be)})},k(a(be)||a(s)("communs.baseCarteObjet.sansDescription")),3),e(x,g(i,{icon:a(w)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"}),null,16,["icon"])]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),N("p",it,k(a(s)("bds.info")),1),e(ce,{class:"mb-2"}),N("div",lt,[a(ee)&&(a(ee).statut!=="active"||a(w))?(r(),p(z,{key:0,flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(Wa,{"id-bd":c.id},{activator:t(({props:i})=>[e(Na,g(i,{"type-objet":"bd",statut:a(ee)}),null,16,["statut"])]),_:1},8,["id-bd"])]),_:1})):D("",!0),e(z,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(Qa,{"id-bd":c.id},{activator:t(({props:i})=>[e(Xa,g(i,{id:c.id}),null,16,["id"])]),_:1},8,["id-bd"])]),_:1}),e(z,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(ya,{id:c.id,auteurs:a(de),"permission-moderateur":a(w)==="MODÉRATEUR"},{activator:t(({props:i})=>[e(La,g(i,{auteurs:a(de)}),null,16,["auteurs"])]),_:1},8,["id","auteurs","permission-moderateur"])]),_:1}),e(z,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(qe,{licence:a(_e),"licence-contenu":a(ye),"permission-modifier":a(w)==="MODÉRATEUR",onChangerLicence:ae},{activator:t(({props:i})=>[e(Za,g(i,{licence:a(_e),onChangerLicence:ae}),null,16,["licence"])]),_:1},8,["licence","licence-contenu","permission-modifier"])]),_:1}),e(z,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(Pa,{id:c.id},{activator:t(({props:i})=>[e(Oa,g(i,{id:c.id}),null,16,["id"])]),_:1},8,["id"])]),_:1}),e(z,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(He,{"id-objet":c.id,permission:a(w),"type-objet":"bd"},{activator:t(({props:i})=>[e(Ua,g(i,{"id-objet":c.id}),null,16,["id-objet"])]),_:1},8,["id-objet","permission"])]),_:1})]),N("p",nt,k(a(s)("bds.variables")),1),e(ce,{class:"mb-2"}),e(Le,{"n-max":5,items:a(X)},{jeton:t(({id:i})=>[e(Pe,{id:i},{activator:t(({props:m})=>[e(ga,g(m,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:t(({id:i})=>[e(Pe,{id:i},{activator:t(({props:m})=>[e(xa,g(m,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),a(X)?.length?D("",!0):(r(),ie("p",ot,k(a(s)("bds.aucuneVariable")),1)),e(Me,null,{default:t(()=>[N("p",st,k(a(s)("bds.tableaux")),1),e(ce),a(v)?(r(),p(Fa,{key:0,modelValue:$.value,"onUpdate:modelValue":b[4]||(b[4]=i=>$.value=i),class:"mt-2"},{default:t(()=>[(r(!0),ie(we,null,me(a(R),i=>(r(),p(Ga,{key:i.clef,value:i.clef,color:"primary",size:"small",density:"compact"},{default:t(()=>[e(Ue,{id:i.id,clef:i.clef},null,8,["id","clef"])]),_:2},1032,["value"]))),128)),e($e,{onSauvegarder:se},{activator:t(({props:i})=>[a(w)?(r(),p(je,g({key:0},i,{"append-icon":P.value?void 0:"mdi-plus",disabled:P.value,variant:"text",class:"mx-1 my-auto",size:"x-large",label:"",onClick:b[3]||(b[3]=Ba(()=>{},["stop"]))}),{default:t(()=>[j(k(a(s)("tableaux.nouveau"))+" ",1),P.value?(r(),p(K,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):D("",!0)]),_:2},1040,["append-icon","disabled"])):D("",!0)]),_:1})]),_:1},8,["modelValue"])):(r(),p(Ca,{key:1,modelValue:$.value,"onUpdate:modelValue":b[5]||(b[5]=i=>$.value=i),class:"mt-4","show-arrows":"","center-active":""},{default:t(()=>[(r(!0),ie(we,null,me(a(R),i=>(r(),p(Re,{key:i.clef,value:i.clef},{default:t(({isSelected:m,toggle:ue})=>[e(je,{class:"mx-1",variant:"tonal",label:"",active:!1,color:m?"primary":"",onClick:ue},{default:t(()=>[e(Ue,{id:i.id,clef:i.clef},null,8,["id","clef"])]),_:2},1032,["color","onClick"])]),_:2},1032,["value"]))),128)),e(Re,{key:"nouveau",value:"nouveau"},{default:t(()=>[e($e,{onSauvegarder:se},{activator:t(({props:i})=>[a(w)?(r(),p(je,g({key:0},i,{"append-icon":P.value?void 0:"mdi-plus",variant:"tonal",class:"mx-1",label:"",disabled:P.value}),{default:t(()=>[j(k(a(s)("tableaux.nouveau"))+" ",1),P.value?(r(),p(K,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):D("",!0)]),_:2},1040,["append-icon","disabled"])):D("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])),a(R)&&!a(R).length?(r(),ie("div",dt,[N("p",ut,k(a(s)("tableaux.aucun")),1),e(ka,{src:a(L),class:"my-5",contain:"",height:"175px"},null,8,["src"]),e($e,{onSauvegarder:se},{activator:t(({props:i})=>[a(w)?(r(),p(x,g({key:0},i,{color:"primary",class:"mx-2",variant:"outlined"}),{prepend:t(()=>[e(H,{icon:"mdi-table",start:""})]),default:t(()=>[j(" "+k(a(s)("tableaux.nouveau")),1)]),_:2},1040)):D("",!0)]),_:1})])):D("",!0)]),_:1}),e(Ta,{modelValue:$.value,"onUpdate:modelValue":b[6]||(b[6]=i=>$.value=i)},{default:t(()=>[(r(!0),ie(we,null,me(a(R),i=>(r(),p(Va,{key:i.clef,value:i.clef},{default:t(()=>[e(Ka,{"id-tableau":i.id,"id-bd":c.id},null,8,["id-tableau","id-bd"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});export{Tt as default};
//# sourceMappingURL=PageBD-C6pXf7Wp.js.map
