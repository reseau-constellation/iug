import{d as O,c as f,a as u,ag as De,w as a,b as e,j as A,ம as Q,n as de,p as ee,r as z,s as I,q as m,v as _e,x as le,V as U,h as t,i as be,e as Ne,f as E,t as N,y as Z,m as Y,z as x,A as q,F as j,R as G,aJ as Je,aK as ye,M as ce,K as T,X as re,N as H,Q as W,aj as Ae,ak as Ee,al as Pe,H as ue,I as ae,J as te,an as ge,c1 as Oe,az as Ce,aq as Me,bH as Ue,c2 as ze,G as X,c3 as Le,ai as oe,bI as Se,u as Fe,o as Ge,bJ as He,aB as Ke,aF as We,bK as Qe,aY as Xe,aZ as Ye,a_ as xe,a$ as Ze,bt as $e,bu as ea,bL as aa,bM as Te,bN as ta,bO as sa,a8 as ia,bQ as na,c4 as oa,bv as ke,bw as ua,bS as la,a2 as ra,B as we,b0 as da,O as he,aE as ca,T as ma,b1 as Ve,W as pa}from"./index-ChjjMrlm.js";import{a as Be,t as fa,V as va,E as _a,b as ba,d as Na,e as ga,f as Ca,c as ya,g as xa,h as $a,i as Ta,_ as ka,j as wa,k as ha}from"./VBreadcrumbs-CZIoSAVX.js";import{_ as Va}from"./SélecteurMembre.vue_vue_type_script_setup_true_lang-CtJ63j8r.js";import{_ as ja}from"./NouvelleBd.vue_vue_type_script_setup_true_lang-DaLwsHT6.js";import{c as Ia,a as Da,b as ve}from"./SélecteurNuée.vue_vue_type_script_setup_true_lang-Bepe6lvA.js";import{_ as Aa}from"./ChoisirStatut.vue_vue_type_script_setup_true_lang-xsKVXuTz.js";import{a as Ea}from"./CarteNuée.vue_vue_type_script_setup_true_lang-CaW45GJ3.js";import{u as Pa}from"./historiqueDocuments-ZqCETLkh.js";import{V as Ma,a as je}from"./VTabs-Bwvn37ox.js";import{V as Ie}from"./VSlideGroupItem-4m9C382l.js";import"./OptionsFormatExportation.vue_vue_type_script_setup_true_lang-DcNntu87.js";import"./RésultatRechercheProjet.vue_vue_type_script_setup_true_lang-yEDFp36D.js";import"./CarteProjet.vue_vue_type_script_setup_true_lang-DbGrFpm0.js";import"./NouveauProjet.vue_vue_type_script_setup_true_lang-DZXx-wUT.js";import"./RésultatRechercheNuée.vue_vue_type_script_setup_true_lang-B9_z1WBA.js";const Sa=O({__name:"ItemMembreExclusNuée",props:{idCompte:{}},emits:["effacer"],setup(V,{emit:n}){const i=n;return(l,v)=>(u(),f(De,{compte:l.idCompte,"montrer-anonymes":""},{fin:a(()=>[e(A,{icon:"mdi-cancel",size:"small",variant:"flat",onClick:v[0]||(v[0]=()=>i("effacer",l.idCompte))})]),_:1},8,["compte"]))}}),Ba=O({__name:"ItemMembreAcceptéNuée",props:{idCompte:{}},emits:["effacer"],setup(V,{emit:n}){const i=n;return(l,v)=>(u(),f(De,{compte:l.idCompte,"montrer-anonymes":""},{fin:a(()=>[e(A,{icon:"mdi-cancel",size:"small",variant:"flat",onClick:v[0]||(v[0]=()=>i("effacer",l.idCompte))})]),_:1},8,["compte"]))}}),qa={class:"mt-2 font-weight-bold"},Ra={class:"text-disabled"},Ja={class:"text-disabled"},Oa={class:"mt-2 font-weight-bold"},Ua={key:0,class:"text-h6 text-disabled text-center"},za={class:"text-center"},La={class:"text-h5"},Fa={class:"text-disabled text-h6"},Ga=O({__name:"CarteAutorisationsNuée",props:{idNuee:{}},setup(V){const n=V,{$மொ:i}=Q(),{mdAndUp:l}=de(),v=ee(),o=z(!1),g=I(v.suivrePermission,{idObjet:m(()=>n.idNuee)}),k=I(v.nuées.suivrePhilosophieAutorisation,{idNuée:m(()=>n.idNuee)}),C=z(k.value);_e(()=>{C.value=k.value});const w=I(v.nuées.suivreAutorisationsMembresDeNuée,{idNuée:m(()=>n.idNuee)}),M=m(()=>w.value?.filter(h=>h.statut==="accepté").map(h=>h.idCompte)),R=m(()=>w.value?.filter(h=>h.statut==="exclus").map(h=>h.idCompte)),P=async h=>{C.value==="CJPI"?await Promise.all(h.map(async $=>await v.nuées.accepterMembreNuée({idNuée:n.idNuee,idCompte:$}))):C.value==="IJPC"&&await Promise.all(h.map(async $=>await v.nuées.exclureMembreDeNuée({idNuée:n.idNuee,idCompte:$})))},D=async h=>{await v.nuées.révoquerExclusionMembreNuée({idNuée:n.idNuee,idCompte:h})},L=async h=>{await v.nuées.révoquerAcceptationMembreNuée({idNuée:n.idNuee,idCompte:h})},se=m(()=>C.value!==k.value),ie=()=>{};return(h,$)=>(u(),f(le,{modelValue:o.value,"onUpdate:modelValue":$[7]||($[7]=r=>o.value=r)},{activator:a(({props:r})=>[ue(h.$slots,"activateur",ae(te({props:r})))]),default:a(()=>[e(U,{class:"mx-auto","min-width":t(l)?500:300},{default:a(()=>[e(be,null,{default:a(()=>[e(Ne,{class:"d-flex align-center"},{default:a(()=>[E(N(t(i)("nuées.autorisations.carte.titre"))+" ",1),e(Z),e(A,{icon:"mdi-close",size:"small",variant:"flat",onClick:$[0]||($[0]=r=>o.value=!1)})]),_:1})]),_:1}),t(g)?(u(),f(Y,{key:0},{default:a(()=>[x("p",qa,N(t(i)("nuées.autorisations.philosophie")),1),e(G),e(Je,{modelValue:C.value,"onUpdate:modelValue":$[1]||($[1]=r=>C.value=r)},{default:a(()=>[e(ye,{value:"CJPI",class:"my-2"},{label:a(()=>[x("div",null,[x("p",null,N(t(i)("nuées.nouvelle.parInvitation")),1),x("p",Ra,N(t(i)("nuées.nouvelle.indiceParInvitation")),1)])]),_:1}),e(ye,{value:"IJPC",class:"my-2"},{label:a(()=>[x("div",null,[x("p",null,N(t(i)("nuées.nouvelle.ouverteÀTous")),1),x("p",Ja,N(t(i)("nuées.nouvelle.indiceOuverteÀTous")),1)])]),_:1})]),_:1},8,["modelValue"]),x("p",Oa,N(t(i)(`nuées.autorisations.${C.value==="CJPI"?"membresAutorisés":"membresBloqués"}`)),1),e(G),e(le,null,{activator:a(({props:r})=>[e(ce,T(r,{"prepend-icon":C.value==="CJPI"?"mdi-account-plus-outline":"mdi-account-cancel-outline"}),{default:a(()=>[E(N(t(i)(`nuées.autorisations.${C.value==="CJPI"?"ajouterMembreAccepté":"ajouterMembreExclus"}`)),1)]),_:2},1040,["prepend-icon"])]),default:a(()=>[e(U,{class:"mx-auto","max-width":500,"min-width":300},{default:a(()=>[e(Y,null,{default:a(()=>[e(Va,{multiples:"",interdits:C.value==="CJPI"?M.value:R.value,onSelectionnee:$[2]||($[2]=r=>P(r))},null,8,["interdits"])]),_:1})]),_:1})]),_:1}),(C.value==="CJPI"?!M.value?.length:!R.value?.length)?(u(),q("p",Ua,N(t(i)(`nuées.autorisations.${C.value==="CJPI"?"aucunMembreAccepté":"aucunMembreExclus"}`)),1)):j("",!0),C.value==="CJPI"?(u(),f(re,{key:1},{default:a(()=>[(u(!0),q(W,null,H(M.value,r=>(u(),f(Ba,{key:r,"id-compte":r,onEffacer:$[3]||($[3]=c=>L(c))},null,8,["id-compte"]))),128))]),_:1})):C.value==="IJPC"?(u(),f(re,{key:2},{default:a(()=>[(u(!0),q(W,null,H(R.value,r=>(u(),f(Sa,{key:r,"id-compte":r,onEffacer:$[4]||($[4]=c=>D(c))},null,8,["id-compte"]))),128))]),_:1})):j("",!0)]),_:1})):(u(),f(Y,{key:1},{default:a(()=>[x("div",za,[x("p",La,N(C.value==="CJPI"?t(i)("nuées.autorisations.parInvitation"):t(i)("nuées.autorisations.ouverteÀTous")),1),x("p",Fa,N(C.value==="CJPI"?t(i)("nuées.autorisations.indiceParInvitation"):t(i)("nuées.autorisations.indiceOuverteÀTous")),1)])]),_:1})),e(Ae,null,{default:a(()=>[e(Z),e(Ee,{onClick:$[5]||($[5]=r=>o.value=!1)}),e(Pe,{actif:se.value,onClick:$[6]||($[6]=()=>ie())},null,8,["actif"])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),Ha={class:"text-center"},Ka={key:0,class:"my-4 text-h6 text-disabled"},Wa=O({__name:"CarteBdsDeNuée",props:{idNuee:{}},setup(V){const n=V,{$மொ:i}=Q(),{mdAndUp:l}=de(),v=ee(),o=z(!1),{résultats:g}=ge(v.nuées.suivreBdsCorrespondantes,{idNuée:m(()=>n.idNuee)});return(k,C)=>(u(),f(le,{modelValue:o.value,"onUpdate:modelValue":C[1]||(C[1]=w=>o.value=w)},{activator:a(({props:w})=>[ue(k.$slots,"activateur",ae(te({props:w})))]),default:a(()=>[e(U,{class:"mx-auto","min-width":t(l)?500:300},{default:a(()=>[e(be,null,{default:a(()=>[e(Ne,{class:"d-flex align-center"},{default:a(()=>[E(N(t(i)("nuées.bds.carte.titre"))+" ",1),e(Z),e(A,{icon:"mdi-close",size:"small",variant:"flat",onClick:C[0]||(C[0]=w=>o.value=!1)})]),_:1})]),_:1}),e(Y,null,{default:a(()=>[e(re,null,{default:a(()=>[e(ja,{init:{type:"nuée",id:k.idNuee}},{activateur:a(({props:w})=>[e(ce,T(w,{"prepend-icon":"mdi-database-plus-outline"}),{default:a(()=>[E(N(t(i)("nuées.bds.créer")),1)]),_:2},1040)]),_:1},8,["init"]),e(G),(u(!0),q(W,null,H(t(g),w=>(u(),f(Oe,{id:w,key:w},null,8,["id"]))),128)),x("div",Ha,[t(g)?.length?j("",!0):(u(),q("p",Ka,N(t(i)("nuées.bds.aucuneBd")),1))])]),_:1})]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),Qa=O({__name:"CarteStatutNuée",props:{idNuee:{}},setup(V){const n=V,{$மொ:i}=Q(),{mdAndUp:l}=de(),v=ee(),o=z(!1),g=I(v.nuées.suivreStatutNuée,{idNuée:m(()=>n.idNuee)}),k=z();_e(()=>{k.value=g.value});const C=m(()=>g.value?.statut!==k.value?.statut||g.value?.idNouvelle!==k.value?.idNouvelle),w=z(!1),M=async()=>{w.value=!0,k.value&&await v.nuées.changerStatutNuée({idNuée:n.idNuee,statut:k.value}),w.value=!1,o.value=!1};return(R,P)=>(u(),f(le,{modelValue:o.value,"onUpdate:modelValue":P[3]||(P[3]=D=>o.value=D)},{activator:a(({props:D})=>[ue(R.$slots,"activateur",ae(te({props:D})))]),default:a(()=>[e(U,{class:"mx-auto","min-width":t(l)?500:300},{default:a(()=>[e(be,null,{default:a(()=>[e(Ne,null,{default:a(()=>[E(N(t(i)("nuées.statut.carte.titre")),1)]),_:1})]),_:1}),e(Y,null,{default:a(()=>[e(Aa,{initial:k.value,onChoisir:P[0]||(P[0]=D=>k.value=D)},{sélecteur:a(({choisirNouvelle:D})=>[e(Ia,{multiples:!1,onSelectionnee:L=>D(L[0])},null,8,["onSelectionnee"])]),_:1},8,["initial"])]),_:1}),e(Ae,null,{default:a(()=>[e(Z),e(Ee,{onClick:P[1]||(P[1]=D=>o.value=!1)}),e(Pe,{actif:C.value,"en-attente":w.value,onClick:P[2]||(P[2]=()=>M())},null,8,["actif","en-attente"])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),Xa=O({__name:"CarteCodeNuée",props:{id:{}},setup(V){const{மொழி:n,மாற்றுமொழிகள்:i}=Ce(),l=m(()=>[n.value,...i.value]),v=V,o=m(()=>({ts:`import { créerConstellation, type nuées } from "@constl/ipa";

const client = créerConstellation();

const analyser = async (données: nuées.donnéesNuéeExportation) => {
    console.log(données)  // Faire quelque chose de plus intelligent ici :)
}
const fOublierDonnées = await client.nuées.suivreDonnéesExportation({
    idNuée: "${v.id}",
    // Modifier langues selon vos besoins
    langues: [${l.value.map(g=>'"'+g+'"').join(", ")}],
    f: analyser
});
`,py:`from constellationPy import Serveur, ClientSync

with Serveur():
    client = ClientSync()

    données = client.obt_données_nuée(
        id_nuée="${v.id}",
        # Modifier langues selon vos besoins
        langues=[${l.value.map(g=>'"'+g+'"').join(", ")}]
    )

    # Analyser ou sauvegarder les données ici, par exemple...
    données.exporter("fichier.ods")  # ou bien "fichier.xlsx" pour Excel

    # Accéder à un tableau en format pandas
    données_tableau = tableau_exporté_à_pandas(données["Un tableau"])
`,julia:`import Constellation

Constellation.avecServeur() do port
    Constellation.avecClient(port) do client
        donnéesRéseau = Constellation.obtDonnéesTableauNuée(
          client, 
          "${v.id}", 
          // Modifier langues selon vos besoins
          [${l.value.map(g=>'"'+g+'"').join(", ")}]
        )
    end
end`,r:`library(constellationR)

constellationR::avecClientEtServeur(
  function (client) {
    f <- function(résultats) {
      print(résultats)

      # Analyser les données ici...
    }

    oublier <- client$obtDonnéesTableauNuée(
      f=f,
      idNuée="${v.id}",
    )
  }
)
`}));return(g,k)=>(u(),f(Be,{codes:o.value,"langage-defaut":"py"},{activateur:a(({props:C})=>[ue(g.$slots,"activateur",ae(te({props:C})))]),_:3},8,["codes"]))}}),Ya=O({__name:"ItemAutorisationsNuée",props:{idNuee:{}},setup(V){const{$மொ:n}=Q();return(i,l)=>(u(),f(ce,{"prepend-icon":"mdi-account-multiple-check-outline"},{default:a(()=>[e(Me,null,{default:a(()=>[E(N(t(n)("nuées.autorisations.item.titre")),1)]),_:1})]),_:1}))}}),Za=O({__name:"ItemBdsDeNuée",props:{idNuee:{}},setup(V){const n=V,{$மொ:i}=Q(),l=ee(),{résultats:v}=ge(l.nuées.suivreBdsCorrespondantes,{idNuée:m(()=>n.idNuee)}),o=m(()=>v.value?.length);return(g,k)=>(u(),f(ce,{"prepend-icon":"mdi-database-check-outline"},{default:a(()=>[e(Me,null,{default:a(()=>[E(N(t(i)("nuées.bds.item.titre",o.value)),1)]),_:1})]),_:1}))}}),et=O({__name:"CarteCodeTableauNuée",props:{idNuee:{},clefTableau:{}},setup(V){const n=V,{மொழி:i,மாற்றுமொழிகள்:l}=Ce(),v=m(()=>[i.value,...l.value]),o={ts:`import { créerConstellation } from "@constl/ipa";

const client = créerConstellation();

const monAnalyse = async (données) => {
  console.log(données)
  // Faire quelque chose...
}

const fOublier = client.nuées.suivreDonnéesExportationTableau({
  idNuée: "${n.idNuee}",
  clefTableau: "${n.clefTableau}",
  langues: [${v.value.map(g=>'"'+g+'"').join(", ")}],  // Modifier langues selon vos besoins
  f: monAnalyse
});
`,py:`from constellationPy import Serveur, ClientSync

with Serveur():
    client = ClientSync()

    données = client.obt_données_tableau_nuée(
      idNuée: "${n.idNuee}",
      clefTableau: "${n.clefTableau}",
      # Modifier langues selon vos besoins
      langues=[${v.value.map(g=>'"'+g+'"').join(", ")}]
    )

    # Analyser ou sauvegarder les données ici...
    données.to_excel("./MesDonnéesExportées.xlsx")
`,julia:`import Constellation

Constellation.avecServeur() do port
  Constellation.avecClient(port) do client

    oublier = Constellation.suivre(
        client, 
        "nuées.suivreDonnéesExportationTableau", 
        Dict([
          ("idNuée","${n.idNuee}"),
          ("clefTableau","${n.clefTableau}"),
          ("langues", [${v.value.map(g=>'"'+g+'"').join(", ")}])
        ])
    ) do résultat
        print(résultat)
    end
  end
end

`,r:`library(constellationR)

constellationR::avecClientEtServeur(
  function (client) {
    
    données <- client$appeler(
      "tableaux.suivreDonnéesExportation", 
      list(
        idNuée="${n.idNuee}",
        clefTableau="${n.clefTableau}",
        langues=c(${v.value.map(g=>'"'+g+'"').join(", ")})
      )
    )
  }
)

`};return(g,k)=>(u(),f(Be,{codes:o,"langage-defaut":"py"},{activateur:a(({props:C})=>[ue(g.$slots,"activateur",ae(te({props:C})))]),_:3}))}}),at={class:"text-h6 text-disabled"},tt=["onClick"],st=O({__name:"TableauNuée",props:{idNuee:{},idTableau:{},clefTableau:{}},setup(V){const{$மொ:n}=Q(),i=ee(),l=V,v=I(i.suivrePermission,{idObjet:m(()=>l.idTableau)}),o=I(i.tableaux.suivreVariables,{idTableau:m(()=>l.idTableau)}),g=I(i.nuées.suivreRèglesTableauNuée,{idNuée:m(()=>l.idNuee),clefTableau:m(()=>l.clefTableau)}),{résultats:k}=ge(i.nuées.suivreDonnéesTableauNuée,{idNuée:m(()=>l.idNuee),clefTableau:m(()=>l.clefTableau)}),C=m(()=>k.value?.map(r=>Object.assign({},r.élément.données,{idCompte:r.idCompte}))),w=m(()=>C.value?.toSorted((c,d)=>M.value&&M.value.map(b=>c[b.key]===void 0?d[b.key]===void 0?0:b.order==="asc"?1:-1:d[b.key]===void 0?c[b.key]===void 0?0:b.order==="asc"?-1:1:c[b.key]>d[b.key]?b.order==="asc"?1:-1:c[b.key]<d[b.key]?b.order==="asc"?-1:1:0).find(b=>b!==0)||0)),M=z(),R=I(i.nuées.suivreColonnesTableauNuée,{idNuée:m(()=>l.idNuee),clefTableau:m(()=>l.clefTableau)}),P=I(i.nuées.suivreColonnesEtCatégoriesTableauNuée,{idNuée:m(()=>l.idNuee),clefTableau:m(()=>l.clefTableau)}),D=m(()=>(R.value||[]).map(r=>{const c=P.value?.find(d=>d.id===r.id)?.catégorie;return{key:r.id,sortable:c===void 0||(c?.type==="simple"?fa(c.catégorie):!1),info:{index:r.index,catégorie:c,variable:r.variable}}})),L=m(()=>[...(R.value||[]).map(r=>({key:r.id})),{key:"idCompte"}]),se=async({idVariable:r,idColonne:c,index:d,règles:b})=>{c=await i.nuées.ajouterColonneTableauNuée({idTableau:l.idTableau,idVariable:r,idColonne:c}),d&&await i.nuées.changerColIndexTableauNuée({idTableau:l.idTableau,idColonne:c,val:!0});for(const S of b)await i.nuées.ajouterRègleTableauNuée({idTableau:l.idTableau,idColonne:c,règle:S})},ie=async({idColonne:r,index:c,règles:d})=>{await i.nuées.changerColIndexTableauNuée({idTableau:l.idTableau,idColonne:r,val:c});for(const b of d.nouvelles)await i.nuées.ajouterRègleTableauNuée({idTableau:l.idTableau,idColonne:r,règle:b});for(const b of d.àEffacer)await i.nuées.effacerRègleTableauNuée({idTableau:l.idTableau,idRègle:b})},h=async({idColonne:r})=>{await i.nuées.effacerColonneTableauNuée({idTableau:l.idTableau,idColonne:r})},$=async()=>{await i.nuées.effacerTableauNuée({idNuée:l.idNuee,idTableau:l.idTableau})};return(r,c)=>(u(),f(va,{headers:L.value,items:w.value},Ue({top:a(()=>[e(Na,{flat:"",density:"compact"},{default:a(()=>[e(Z),t(v)?(u(),f(Da,{key:0,"id-tableau":r.idTableau,"variables-interdites":t(o),onNouvelle:c[0]||(c[0]=d=>se(d))},{activateur:a(({props:d})=>[e(A,T(d,{icon:"mdi-table-column-plus-after"}),null,16)]),_:1},8,["id-tableau","variables-interdites"])):j("",!0),e(et,{"id-nuee":r.idNuee,"clef-tableau":r.clefTableau},{activateur:a(({props:d})=>[e(oe,{text:t(n)("code.indice"),"open-delay":200,location:"bottom"},{activator:a(({props:b})=>[e(A,T({...d,...b},{icon:"mdi-xml"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-nuee","clef-tableau"]),t(v)?(u(),f(Se,{key:1,onEffacer:c[1]||(c[1]=()=>$())},{activateurctivator:a(({props:d})=>[e(A,T(d,{icon:"mdi-delete",color:"error"}),null,16)]),_:1})):j("",!0)]),_:1})]),"no-data":a(()=>[x("span",at,N(t(n)("tableaux.aucuneDonnée")),1)]),"header.idCompte":a(({column:d,isSorted:b,getSortIcon:S,toggleSort:ne})=>[x("span",{onClick:()=>ne(d)},[e(Le,null,{default:a(({isHovering:K,props:B})=>[x("span",ae(te(B)),[E(N(t(n)("nuées.tableau.entêteContributrice"))+" ",1),d.sortable?(u(),q(W,{key:0},[b(d)?(u(),f(X,{key:0,icon:S(d)},null,8,["icon"])):(u(),f(X,{key:1,icon:"mdi-arrow-up",color:K?"disabled":"rgba(255,255,255,0)"},null,8,["color"]))],64)):j("",!0)],16)]),_:2},1024)],8,tt)]),"item.idCompte":a(({item:d})=>[e(ze,{compte:d.idCompte},null,8,["compte"])]),_:2},[H(D.value,d=>({name:`header.${d.key}`,fn:a(({column:b,isSorted:S,getSortIcon:ne,toggleSort:K})=>[e(_a,{"id-colonne":d.key,"id-variable":d.info.variable,"id-tableau":r.idTableau,index:!!d.info.index,regles:t(g)?.filter(B=>B.colonne===d.key),"permission-modifier":!!t(v),ordonnable:b.sortable,"est-ordonnee":S(b),"icone-ordonner":ne(b),onBasculerOrdonner:()=>K(b),onSauvegarder:B=>ie({idColonne:d.key,...B}),onEffacer:()=>h({idColonne:d.key})},null,8,["id-colonne","id-variable","id-tableau","index","regles","permission-modifier","ordonnable","est-ordonnee","icone-ordonner","onBasculerOrdonner","onSauvegarder","onEffacer"])])})),H(D.value,d=>({name:`item.${d.key}`,fn:a(({item:b})=>[e(ba,{categorie:d.info.catégorie?.catégorie,val:b[d.key],editable:!1},null,8,["categorie","val"])])}))]),1032,["headers","items"]))}}),it={class:"text-center"},nt={class:"text-center"},ot={key:0,class:"text-disabled"},ut={class:"text-center"},lt={class:"mt-6 text-h5"},rt={class:"d-flex flex-wrap"},dt={class:"mt-6 text-h5"},ct={key:0,class:"text-disabled"},mt={class:"mt-6 text-h5"},pt={class:"d-flex flex-wrap"},ft={class:"mt-6 text-h5"},vt={key:2,class:"text-center"},_t={class:"text-h5 mt-5"},At=O({__name:"PageNuée",props:{id:{}},setup(V){const n=V,i=ee(),{mdAndUp:l}=de(),{isRtl:v}=Fe(),{$மொ:o}=Q(),g=Pa(),{obtImageDéco:k}=Ke();Ge(()=>{g.documentOuvert({id:n.id,à:Date.now()})});const C=m(()=>[{title:o("navigation.données"),href:encodeURI("/données/")},{title:R.value||o("nuées.sansNom"),disabled:!0}]),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:w}=Ce(),M=I(i.nuées.suivreNomsNuée,{idNuée:m(()=>n.id)}),R=w(M),P=async p=>{const{àEffacer:y,àAjouter:s}=Ve({anciennes:M.value,nouvelles:p});for(const _ of y)await i.nuées.effacerNomNuée({idNuée:n.id,langue:_});await i.nuées.sauvegarderNomsNuée({idNuée:n.id,noms:s})},D=I(i.nuées.suivreDescriptionsNuée,{idNuée:m(()=>n.id)}),L=w(D),se=async p=>{const{àEffacer:y,àAjouter:s}=Ve({anciennes:D.value,nouvelles:p});for(const _ of y)await i.nuées.effacerDescriptionNuée({idNuée:n.id,langue:_});await i.nuées.sauvegarderDescriptionsNuée({idNuée:n.id,descriptions:s})},ie=He(I(i.nuées.suivreImage,{idNuée:m(()=>n.id)})),h=k("logoBD"),$=async p=>{p?await i.nuées.sauvegarderImage({idNuée:n.id,image:{contenu:new Uint8Array(p.contenu),nomFichier:p.fichier}}):await i.nuées.effacerImage({idNuée:n.id})},r=k("vide"),c=I(i.suivrePermission,{idObjet:m(()=>n.id)}),d=I(i.réseau.suivreAuteursNuée,{idNuée:m(()=>n.id)}),b=I(i.nuées.suivreVariablesNuée,{idNuée:m(()=>n.id)}),S=I(i.nuées.suivreMotsClefsNuée,{idNuée:m(()=>n.id)}),ne=async p=>{const y=p.filter(_=>!S.value?.includes(_)),s=S.value?.filter(_=>!p.includes(_))||[];await i.nuées.ajouterMotsClefsNuée({idNuée:n.id,idsMotsClefs:y}),await Promise.all(s.map(_=>i.nuées.effacerMotClefNuée({idNuée:n.id,idMotClef:_})))},K=I(i.nuées.suivreStatutNuée,{idNuée:m(()=>n.id)}),B=I(i.nuées.suivreTableauxNuée,{idNuée:m(()=>n.id)}),me=m(()=>{if(B.value)return[...B.value].sort((p,y)=>p.id>y.id?-1:1)}),J=z();_e(()=>{!J.value&&me.value?.length&&(J.value=me.value[0].clef),J.value&&!me.value?.map(p=>p.clef).includes(J.value)&&(J.value=void 0)});const F=z(!1),pe=async({noms:p,cols:y})=>{F.value=!0;try{const s=await i.bds.ajouterTableauBd({idBd:n.id});await i.nuées.sauvegarderNomsTableauNuée({idTableau:s,noms:p}),await Promise.all(y.map(async _=>{await i.nuées.ajouterColonneTableauNuée({idTableau:s,idColonne:_.info.id,idVariable:_.info.variable}),_.info.index&&await i.nuées.changerColIndexTableauNuée({idTableau:s,idColonne:_.info.id,val:!0}),await Promise.all(_.règles.map(async fe=>await i.nuées.ajouterRègleTableauNuée({idTableau:s,idColonne:_.info.id,règle:fe})))}))}finally{F.value=!1}},qe=async p=>{await i.nuées.effacerTableauNuée({idNuée:n.id,idTableau:p})},Re=async()=>{await i.nuées.effacerNuée({idNuée:n.id})};return(p,y)=>(u(),f(We,null,{default:a(()=>[x("div",null,[t(l)?(u(),f(ga,{key:0,items:C.value,class:"pa-0"},{divider:a(()=>[e(X,null,{default:a(()=>[E(N(t(v)?"mdi-chevron-left":"mdi-chevron-right"),1)]),_:1})]),title:a(({item:s})=>[e(Ca,{disabled:s.disabled,onClick:_=>s.href&&p.$router.push(s.href)},{default:a(()=>[e(Qe,{texte:s.title,"longueur-max":35},null,8,["texte"])]),_:2},1032,["disabled","onClick"])]),_:1},8,["items"])):(u(),f(A,{key:1,icon:"mdi-arrow-left-top",variant:"flat",onClick:y[0]||(y[0]=()=>p.$router.push(encodeURI("/données/")))}))]),e(Ye,{"src-image":t(ie),"img-defaut":t(h),editable:!!t(c),"taille-avatar":t(l)?275:175,"max-taille-image":t(Xe),onImageChangee:y[1]||(y[1]=s=>$(s))},null,8,["src-image","img-defaut","editable","taille-avatar","max-taille-image"]),x("div",it,[e(xe,{"etiquette-nom":t(o)("objet.étiquetteNom"),"indice-nom":t(o)("objet.indiceNom"),"indice-langue":t(o)("objet.indiceLangue"),"texte-aucun-nom":t(o)("objet.texteAucunNom"),"noms-initiaux":t(M),titre:t(o)("objet.titreDialogueNoms"),"sous-titre":t(o)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!t(c),onAjusterNoms:P},{activateur:a(({props:s})=>[x("span",T(s,{class:"text-h4"}),[E(N(t(R)||t(o)("nuées.sansNom"))+" ",1),e(A,{icon:t(c)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),e(Ze,{id:p.id},null,8,["id"]),e(Z)]),x("div",nt,[e(Te,{"n-max":5,items:t(S)},{jeton:a(({id:s})=>[e($e,{id:s},{activateur:a(({props:_})=>[e(aa,T(_,{id:s,class:"me-1 mb-1"}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:a(({id:s})=>[e($e,{id:s},{activateur:a(({props:_})=>[e(ea,T(_,{id:s}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),t(S)&&!t(S).length?(u(),q("span",ot,N(t(o)("nuées.aucunMotClef")),1)):j("",!0),t(c)&&t(S)?(u(),f(ta,{key:1,originaux:t(S),onSauvegarder:y[2]||(y[2]=s=>ne(s))},null,8,["originaux"])):j("",!0)]),x("div",ut,[e(Ea,{"id-nuee":p.id},{activateur:a(({props:s})=>[e(oe,{"open-delay":"200",location:"bottom",text:t(o)("épingler.épingler")},{activator:a(({props:_})=>[e(A,T({...s,..._},{icon:"",variant:"flat"}),{default:a(()=>[e(sa,{id:p.id},null,8,["id"])]),_:2},1040)]),_:2},1032,["text"])]),_:1},8,["id-nuee"]),e(ya,{"id-objet":p.id,"noms-objet":t(M),"type-objet":"nuée"},{activateur:a(({props:s})=>[e(oe,{text:t(o)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:a(({props:_})=>[e(A,T({...s,..._},{icon:"mdi-download",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet","noms-objet"]),e(Xa,{id:p.id},{activateur:a(({props:s})=>[e(oe,{text:t(o)("code.indice"),"open-delay":200,location:"bottom"},{activator:a(({props:_})=>[e(A,T({...s,..._},{icon:"mdi-xml",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id"]),j("",!0),t(c)?(u(),f(Se,{key:1,onEffacer:y[3]||(y[3]=()=>Re())},{activateur:a(({props:s})=>[e(oe,{"open-delay":"200",location:"bottom",text:t(o)("effacer.indice")},{activator:a(({props:_})=>[e(A,T({...s,..._},{variant:"flat",icon:""}),{default:a(()=>[e(X,{color:"error"},{default:a(()=>y[8]||(y[8]=[E("mdi-delete")])),_:1,__:[8]})]),_:2},1040)]),_:2},1032,["text"])]),_:1})):j("",!0)]),e(G),e(Y,null,{default:a(()=>[e(xe,{"etiquette-nom":t(o)("objet.étiquetteDescription"),"indice-nom":t(o)("objet.indiceDescription"),"indice-langue":t(o)("objet.indiceLangue"),"texte-aucun-nom":t(o)("objet.texteAucuneDescription"),"noms-initiaux":t(D),titre:t(o)("objet.titreDialogueDescriptions"),"sous-titre":t(o)("objet.sousTitreDialogueDescriptions"),"autorisation-modification":!!t(c),longue:"",onAjusterNoms:se},{activateur:a(({props:s})=>[x("span",{class:ia({"text-disabled":!t(L)})},N(t(L)||t(o)("communs.baseCarteObjet.sansDescription")),3),e(A,T(s,{icon:t(c)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"}),null,16,["icon"])]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),x("p",lt,N(t(o)("nuées.info")),1),e(G,{class:"mb-2"}),x("div",rt,[t(K)&&(t(K).statut!=="active"||t(c))?(u(),f(U,{key:0,flat:"",width:"200",class:"mb-3"},{default:a(()=>[e(Qa,{"id-nuee":p.id},{activateur:a(({props:s})=>[e(xa,T(s,{"type-objet":"nuée",statut:t(K)}),null,16,["statut"])]),_:1},8,["id-nuee"])]),_:1})):j("",!0),e(U,{flat:"",width:"200",class:"mb-3"},{default:a(()=>[e(na,{id:p.id,auteurs:t(d),"permission-moderateur":t(c)==="MODÉRATEUR"},{activateur:a(({props:s})=>[e($a,T(s,{auteurs:t(d)}),null,16,["auteurs"])]),_:1},8,["id","auteurs","permission-moderateur"])]),_:1}),e(U,{flat:"",width:"200",class:"mb-3"},{default:a(()=>[e(oa,{id:p.id},{activateur:a(({props:s})=>[e(Ta,T(s,{id:p.id}),null,16,["id"])]),_:1},8,["id"])]),_:1}),e(U,{flat:"",width:"200",class:"mb-3"},{default:a(()=>[e(ka,{"id-objet":p.id,permission:t(c),"type-objet":"bd"},{activateur:a(({props:s})=>[e(wa,T(s,{"id-objet":p.id}),null,16,["id-objet"])]),_:1},8,["id-objet","permission"])]),_:1})]),x("p",dt,N(t(o)("nuées.variables")),1),e(G,{class:"mb-2"}),e(Te,{"n-max":5,items:t(b)},{jeton:a(({id:s})=>[e(ke,{id:s},{activateur:a(({props:_})=>[e(la,T(_,{id:s,class:"me-1 mb-1"}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:a(({id:s})=>[e(ke,{id:s},{activateur:a(({props:_})=>[e(ua,T(_,{id:s}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),t(b)?.length?j("",!0):(u(),q("p",ct,N(t(o)("nuées.aucuneVariable")),1)),x("p",mt,N(t(o)("nuées.gestion")),1),e(G,{class:"mb-2"}),x("div",pt,[e(U,{flat:"",width:"200",class:"mb-3"},{default:a(()=>[e(Ga,{"id-nuee":p.id},{activateur:a(({props:s})=>[e(Ya,T(s,{"id-nuee":p.id}),null,16,["id-nuee"])]),_:1},8,["id-nuee"])]),_:1}),e(U,{flat:"",width:"200",class:"mb-3"},{default:a(()=>[e(Wa,{"id-nuee":p.id},{activateur:a(({props:s})=>[e(Za,T(s,{"id-nuee":p.id}),null,16,["id-nuee"])]),_:1},8,["id-nuee"])]),_:1})]),e(re,null,{default:a(()=>[x("p",ft,N(t(o)("nuées.tableaux")),1),e(G),t(l)?(u(),f(Ma,{key:0,modelValue:J.value,"onUpdate:modelValue":y[5]||(y[5]=s=>J.value=s),class:"mt-2"},{default:a(()=>[(u(!0),q(W,null,H(t(B),s=>(u(),f(je,{key:s.clef,value:s.clef,color:"primary",size:"small"},{default:a(()=>[e(ha,{id:s.id,clef:s.clef,onEffacer:()=>qe(s.id)},null,8,["id","clef","onEffacer"])]),_:2},1032,["value"]))),128)),e(ve,{onSauvegarder:pe},{activateur:a(({props:s})=>[t(c)?(u(),f(je,T({key:0},s,{"append-icon":F.value?void 0:"mdi-plus",disabled:F.value,variant:"tonal",class:"mx-1",label:"",onClick:y[4]||(y[4]=ra(()=>{},["stop"]))}),{default:a(()=>[E(N(t(o)("tableaux.nouveau"))+" ",1),F.value?(u(),f(we,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):j("",!0)]),_:2},1040,["append-icon","disabled"])):j("",!0)]),_:1})]),_:1},8,["modelValue"])):(u(),f(da,{key:1,modelValue:J.value,"onUpdate:modelValue":y[6]||(y[6]=s=>J.value=s),class:"mt-4","show-arrows":"","center-active":""},{default:a(()=>[(u(!0),q(W,null,H(t(B),s=>(u(),f(Ie,{key:s.clef,value:s.clef},{default:a(({isSelected:_,toggle:fe})=>[e(he,{class:"mx-1",variant:"tonal",label:"",active:!1,color:_?"primary":"",onClick:fe},{default:a(()=>[E(N(s.clef.slice(0,10))+" ",1),e(X,{class:"ms-2",icon:"mdi-pencil",variant:"flat",size:"x-small"})]),_:2},1032,["color","onClick"])]),_:2},1032,["value"]))),128)),e(Ie,{key:"nouveau",value:"nouveau"},{default:a(()=>[e(ve,{onSauvegarder:pe},{activateur:a(({props:s})=>[t(c)?(u(),f(he,T({key:0},s,{"append-icon":F.value?void 0:"mdi-plus",variant:"tonal",class:"mx-1",label:"",disabled:F.value}),{default:a(()=>[E(N(t(o)("tableaux.nouveau"))+" ",1),F.value?(u(),f(we,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):j("",!0)]),_:2},1040,["append-icon","disabled"])):j("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])),t(B)&&!t(B).length?(u(),q("div",vt,[x("p",_t,N(t(o)("tableaux.aucun")),1),e(ca,{src:t(r),class:"my-5",contain:"",height:"175px"},null,8,["src"]),e(ve,{onSauvegarder:pe},{activateur:a(({props:s})=>[t(c)?(u(),f(A,T({key:0},s,{color:"primary",class:"mx-2",variant:"outlined"}),{prepend:a(()=>[e(X,{icon:"mdi-table",start:""})]),default:a(()=>[E(" "+N(t(o)("tableaux.nouveau")),1)]),_:2},1040)):j("",!0)]),_:1})])):j("",!0)]),_:1}),e(ma,{modelValue:J.value,"onUpdate:modelValue":y[7]||(y[7]=s=>J.value=s)},{default:a(()=>[(u(!0),q(W,null,H(t(B),s=>(u(),f(pa,{key:s.clef,value:s.clef},{default:a(()=>[e(st,{"id-tableau":s.id,"clef-tableau":s.clef,"id-nuee":p.id},null,8,["id-tableau","clef-tableau","id-nuee"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});export{At as default};
//# sourceMappingURL=PageNuée-P6M7gFr-.js.map
