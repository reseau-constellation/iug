import{d as K,p as Q,n as pe,ம as W,r as z,s as T,q as p,e8 as w,c as E,a as F,x as fe,h as i,w as a,b as s,V as ce,i as ve,e as me,f as _,t as g,y as M,j as L,R as U,m as ge,z as r,G as x,e9 as C,dy as v,as as O,ac as G,ad as H,aj as Ne,ak as be,al as _e,H as X,I as Y,J as Z,ea as Ve,P as qe,K as we,b1 as J}from"./index-wjx8jMps.js";const xe={class:"font-weight-bold"},Ce={class:"mb-2"},Te={class:"font-weight-bold"},Ue={class:"font-weight-bold"},ye={class:"font-weight-bold"},De=K({__name:"ÉpinglerNuée",props:{idNuee:{}},setup(y){const u=y,d=Q(),{mdAndUp:D}=pe(),{$மொ:f}=W(),V=z(!1),m=z(!1),N=T(d.nuées.suivreÉpingleNuée,{idNuée:p(()=>u.idNuee)}),{sélection:b,dispositifs:q,spécifiques:l,valide:t,modifié:o}=w(p(()=>N.value?.base),"TOUS"),{sélection:c,dispositifs:A,spécifiques:B,valide:h,modifié:ee}=w(p(()=>N.value?.données.base),"TOUS"),{sélection:$,dispositifs:se,spécifiques:j,valide:ie,modifié:ne}=w(p(()=>N.value?.données.données.tableaux),"INSTALLÉ"),{sélection:k,dispositifs:ae,spécifiques:S,valide:le,modifié:te}=w(p(()=>N.value?.données.données.fichiers),"INSTALLÉ"),oe=p(()=>t&&h&&ie&&le),ue=p(()=>o.value||ee.value||ne.value||te.value),I=z(!1),de=async()=>{if(I.value=!0,q.value!=="AUCUN"){const R={type:"nuée",base:q.value,données:{type:"bd",base:A.value,données:{tableaux:se.value,fichiers:ae.value}}};await d.nuées.épinglerNuée({idNuée:u.idNuee,options:R})}else await re();P()},re=async()=>{await d.favoris.désépinglerFavori({idObjet:u.idNuee})},P=()=>{V.value=!1,I.value=!1};return(R,e)=>(F(),E(fe,{modelValue:V.value,"onUpdate:modelValue":e[10]||(e[10]=n=>V.value=n),"max-width":i(D)?500:300},{activator:a(({props:n})=>[X(R.$slots,"activateur",Y(Z({props:n})))]),default:a(()=>[s(ce,null,{default:a(()=>[s(ve,null,{default:a(()=>[s(me,{class:"d-flex align-center"},{default:a(()=>[_(g(i(f)("épingler.titre"))+" ",1),s(M),s(L,{icon:"mdi-close",size:"small",variant:"flat",onClick:P})]),_:1})]),_:1}),s(U),s(ge,{style:{"overflow-y":"scroll"}},{default:a(()=>[s(x,{start:""},{default:a(()=>e[11]||(e[11]=[_("mdi-pin-outline")])),_:1}),r("span",xe,g(i(f)("épingler.dispositifsÉpingle")),1),s(C,{selection:i(b),"onUpdate:selection":e[0]||(e[0]=n=>v(b)?b.value=n:null),specifiques:i(l),"onUpdate:specifiques":e[1]||(e[1]=n=>v(l)?l.value=n:null),class:"ms-4"},null,8,["selection","specifiques"]),s(O,null,{default:a(()=>[G(r("div",null,[r("p",Ce,[r("span",null,g(i(f)("épingler.optionsAvancées")),1),s(L,{icon:m.value?"mdi-chevron-up":"mdi-chevron-down",size:"xsmall",variant:"flat",onClick:e[2]||(e[2]=()=>m.value=!m.value)},null,8,["icon"])]),s(O,null,{default:a(()=>[G(r("div",null,[s(U,{class:"mb-2"}),r("p",null,[s(x,{start:""},{default:a(()=>e[12]||(e[12]=[_("mdi-database-outline")])),_:1}),r("span",Te,g(i(f)("épingler.dispositifsÉpingleBds")),1)]),s(C,{selection:i(c),"onUpdate:selection":e[3]||(e[3]=n=>v(c)?c.value=n:null),specifiques:i(B),"onUpdate:specifiques":e[4]||(e[4]=n=>v(B)?B.value=n:null),class:"ms-4"},null,8,["selection","specifiques"]),r("p",null,[s(x,{start:""},{default:a(()=>e[13]||(e[13]=[_("mdi-table-multiple")])),_:1}),r("span",Ue,g(i(f)("épingler.dispositifsÉpingleDonnées")),1)]),s(C,{selection:i($),"onUpdate:selection":e[5]||(e[5]=n=>v($)?$.value=n:null),specifiques:i(j),"onUpdate:specifiques":e[6]||(e[6]=n=>v(j)?j.value=n:null),class:"ms-4"},null,8,["selection","specifiques"]),r("p",null,[s(x,{start:""},{default:a(()=>e[14]||(e[14]=[_("mdi-image-multiple-outline")])),_:1}),r("span",ye,g(i(f)("épingler.dispositifsÉpingleDocuments")),1)]),s(C,{selection:i(k),"onUpdate:selection":e[7]||(e[7]=n=>v(k)?k.value=n:null),specifiques:i(S),"onUpdate:specifiques":e[8]||(e[8]=n=>v(S)?S.value=n:null),class:"ms-4"},null,8,["selection","specifiques"])],512),[[H,m.value]])]),_:1})],512),[[H,i(b)!=="AUCUN"]])]),_:1})]),_:1}),s(U),s(Ne,null,{default:a(()=>[s(M),s(be,{onClick:P}),s(_e,{actif:oe.value&&ue.value,"en-attent":I.value,onClick:e[9]||(e[9]=()=>de())},null,8,["actif","en-attent"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),Ae={class:"text-center"},$e=K({__name:"CarteNuée",props:{id:{}},setup(y){const u=y,d=Q(),{$மொ:D}=W(),f=T(d.nuées.suivreNomsNuée,{idNuée:p(()=>u.id)},{}),V=async l=>{const{àEffacer:t,àAjouter:o}=J({anciennes:f.value,nouvelles:l});for(const c of t)await d.nuées.effacerNomNuée({idNuée:u.id,langue:c});await d.nuées.sauvegarderNomsNuée({idNuée:u.id,noms:o})},m=T(d.nuées.suivreDescriptionsNuée,{idNuée:p(()=>u.id)},{}),N=async l=>{const{àEffacer:t,àAjouter:o}=J({anciennes:m.value,nouvelles:l});for(const c of t)await d.nuées.effacerDescriptionNuée({idNuée:u.id,langue:c});await d.nuées.sauvegarderDescriptionsNuée({idNuée:u.id,descriptions:o})},b=T(d.réseau.suivreAuteursBd,{idBd:p(()=>u.id)}),q=async()=>{await d.nuées.effacerNuée({idNuée:u.id})};return(l,t)=>(F(),E(Ve,{id:l.id,noms:i(f),descriptions:i(m),auteurs:i(b),"fichiers-epinglables":!0,onAjusterNoms:t[1]||(t[1]=o=>V(o)),onAjusterDescriptions:t[2]||(t[2]=o=>N(o)),onEffacer:t[3]||(t[3]=()=>q())},{activateur:a(({props:o})=>[X(l.$slots,"activateur",Y(Z({props:o})))]),epingler:a(({activateur:o,epingle:c})=>[s(De,{"id-nuee":l.id},{activateur:a(({props:A})=>[(F(),E(qe(o),we(A,{id:l.id,epingle:c}),null,16,["id","epingle"]))]),_:2},1032,["id-nuee"])]),default:a(()=>[s(U,{class:"mb-2"}),r("div",Ae,[s(L,{variant:"outlined","append-icon":"mdi-open-in-new",onClick:t[0]||(t[0]=o=>l.$router.push(encodeURI(`/données/nuée/${encodeURIComponent(l.id)}`)))},{default:a(()=>[_(g(i(D)("nuées.carteNuée.ouvrirNuée")),1)]),_:1})])]),_:3},8,["id","noms","descriptions","auteurs"]))}});export{$e as _,De as a};
//# sourceMappingURL=CarteNuée.vue_vue_type_script_setup_true_lang-k7tzkUR0.js.map
