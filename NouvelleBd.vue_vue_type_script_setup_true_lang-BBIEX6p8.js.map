{"version":3,"file":"NouvelleBd.vue_vue_type_script_setup_true_lang-BBIEX6p8.js","sources":["../../src/components/bds/NouvelleBd.vue"],"sourcesContent":["<template>\n  <v-dialog v-model=\"dialogue\">\n    <template #activator=\"{props: propsActivateur}\">\n      <slot\n        name=\"activateur\"\n        v-bind=\"{props: propsActivateur}\"\n      ></slot>\n    </template>\n\n    <v-card\n      class=\"mx-auto\"\n      :min-width=\"mdAndUp ? 750 : 300\"\n    >\n      <v-card-item>\n        <v-card-title class=\"text-h5 justify-space-between\">\n          <span>{{ t(titreCarte) }}</span>\n        </v-card-title>\n        <v-card-subtitle> {{ t(sousTitreCarte) }} </v-card-subtitle>\n      </v-card-item>\n      <v-card-text>\n        <v-window\n          v-model=\"étape\"\n          style=\"overflow-y: scroll\"\n        >\n          <v-window-item :key=\"listeÉtapes.indexOf('cheminement')\">\n            <v-list>\n              <v-list-item\n                prepend-icon=\"mdi-creation-outline\"\n                :append-icon=\"isRtl ? 'mdi-chevron-left' : 'mdi-chevron-right'\"\n                :title=\"t('bds.nouvelle.créerNouvelle')\"\n                @click=\"() => suivreCheminementNouvelle()\"\n              />\n              <v-list-item\n                prepend-icon=\"mdi-table\"\n                :append-icon=\"isRtl ? 'mdi-chevron-left' : 'mdi-chevron-right'\"\n                :title=\"t('bds.nouvelle.copierDeBd')\"\n                @click=\"() => suivreCheminementGabarit('bd')\"\n              />\n              <v-list-item\n                prepend-icon=\"mdi-table-multiple\"\n                :append-icon=\"isRtl ? 'mdi-chevron-left' : 'mdi-chevron-right'\"\n                :title=\"t('bds.nouvelle.copierDeNuée')\"\n                @click=\"() => suivreCheminementGabarit('nuée')\"\n              />\n            </v-list>\n          </v-window-item>\n          <v-window-item :value=\"listeÉtapes.indexOf('gabaritBd')\">\n            <SelecteurBd\n              :multiples=\"false\"\n              @selectionnee=\"ids => ids[0] && choisirGabaritBd(ids[0])\"\n            ></SelecteurBd>\n            <v-checkbox\n              v-model=\"copierDonnées\"\n              :label=\"t('bds.copier.copierDonnées')\"\n              color=\"primary\"\n            />\n          </v-window-item>\n          <v-window-item :value=\"listeÉtapes.indexOf('gabaritNuée')\">\n            <selecteur-nuee\n              :multiples=\"false\"\n              @selectionnee=\"id => id.length && choisirGabaritNuée(id[0])\"\n            />\n          </v-window-item>\n          <v-window-item :value=\"listeÉtapes.indexOf('noms')\">\n            <liste-noms\n              :texte-aucun-nom=\"t('communs.texteAucunNom')\"\n              :indice-langue=\"t('communs.indiceLangue')\"\n              :etiquette-nom=\"t('communs.étiquetteNom')\"\n              :indice-nom=\"t('bds.nouvelle.texteIndiceNom')\"\n              :noms-initiaux=\"noms\"\n              :autorisation-modification=\"true\"\n              @ajuster-noms=\"ajusterNoms\"\n            />\n          </v-window-item>\n          <v-window-item :value=\"listeÉtapes.indexOf('descriptions')\">\n            <liste-noms\n              :texte-aucun-nom=\"t('bds.nouvelle.texteAucuneDescription')\"\n              :indice-langue=\"t('communs.indiceLangue')\"\n              :etiquette-nom=\"t('bds.nouvelle.texteÉtiquetteDescription')\"\n              :indice-nom=\"t('bds.nouvelle.texteIndiceDescription')\"\n              :noms-initiaux=\"descriptions\"\n              :autorisation-modification=\"true\"\n              longue\n              @ajuster-noms=\"ajusterDescriptions\"\n            />\n          </v-window-item>\n          <v-window-item :value=\"5\">\n            <selecteur-mot-clef\n              multiples\n              :originaux=\"motsClefs\"\n              @selectionnee=\"ids => (motsClefs = ids)\"\n            />\n          </v-window-item>\n          <v-window-item :value=\"listeÉtapes.indexOf('licence')\">\n            <v-alert\n              v-if=\"partageÉgale\"\n              class=\"mb-4\"\n              variant=\"outlined\"\n              type=\"info\"\n              density=\"compact\"\n              :title=\"t('licences.titrePartageÉgale')\"\n              :text=\"t('licences.infoPartageÉgale')\"\n            />\n            <choix-licence\n              :licence=\"licence\"\n              :permission-modifier=\"!partageÉgale\"\n              @changer-licence=\"l => (licence = l)\"\n            />\n            <v-checkbox\n              v-show=\"licence\"\n              v-model=\"licenceContenuPareil\"\n              :label=\"t('licences.pareilPourContenu')\"\n              :disabled=\"!!partageÉgale\"\n              color=\"primary\"\n            />\n          </v-window-item>\n          <v-window-item :value=\"listeÉtapes.indexOf('licenceContenu')\">\n            <v-alert\n              v-if=\"partageÉgaleContenu && copierDonnées\"\n              class=\"mb-4\"\n              variant=\"outlined\"\n              type=\"info\"\n              density=\"compact\"\n              :title=\"t('licences.titrePartageÉgale')\"\n              :text=\"t('licences.infoPartageÉgale')\"\n            />\n            <choix-licence\n              :licence=\"licenceContenu\"\n              :permission-modifier=\"!partageÉgale\"\n              @changer-licence=\"l => (licenceContenu = l)\"\n            />\n          </v-window-item>\n          <v-window-item :value=\"listeÉtapes.indexOf('statut')\">\n            <choisir-statut\n              :initial=\"statut\"\n              @choisir=\"stt => (statut = stt)\"\n            >\n              <template #sélecteur=\"{choisirNouvelle}\">\n                <selecteur-bd\n                  :multiples=\"false\"\n                  @selectionnee=\"ids => choisirNouvelle(ids[0])\"\n                />\n              </template>\n            </choisir-statut>\n          </v-window-item>\n          <v-window-item :value=\"listeÉtapes.indexOf('confirmation')\">\n            <div class=\"text-center\">\n              <v-btn\n                class=\"mt-3\"\n                variant=\"outlined\"\n                :loading=\"enCréation\"\n                @click=\"() => créerBd()\"\n              >\n                {{ t('bds.nouvelle.texteBtnCréation') }}\n              </v-btn>\n              <v-checkbox\n                v-model=\"ouvrirAprèsCréation\"\n                color=\"primary\"\n                :label=\"t('bds.nouvelle.ouvrirAprèsCréation')\"\n              />\n            </div>\n          </v-window-item>\n        </v-window>\n      </v-card-text>\n      <v-divider></v-divider>\n\n      <v-card-actions>\n        <btn-retour\n          :visible=\"retourActif.visible\"\n          :actif=\"retourActif.actif\"\n          @retour=\"retour\"\n        />\n        <v-spacer></v-spacer>\n        <btn-suivant\n          :visible=\"suivantActif.visible\"\n          :actif=\"suivantActif.actif\"\n          @suivant=\"suivant\"\n        />\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script setup lang=\"ts\">\nimport type {bds, types} from '@constl/ipa';\n\nimport {suivre} from '@constl/vue';\nimport {computed, ref, watchEffect} from 'vue';\nimport {useRouter} from 'vue-router';\nimport {useDisplay, useRtl} from 'vuetify';\n\nimport {மொழியாக்கத்தைப்_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport {utiliserConstellation} from '../utils';\nimport SelecteurBd from './SélecteurBd.vue';\nimport BtnRetour from '/@/components/communs/BtnRetour.vue';\nimport BtnSuivant from '/@/components/communs/BtnSuivant.vue';\nimport ChoisirStatut from '/@/components/communs/ChoisirStatut.vue';\nimport ListeNoms from '/@/components/communs/listeNoms/ListeNoms.vue';\nimport ChoixLicence from '/@/components/licences/ChoixLicence.vue';\nimport SelecteurMotClef from '/@/components/motsClefs/SélecteurMotClef.vue';\nimport SelecteurNuee from '/@/components/nuées/SélecteurNuée.vue';\n\nconst props = defineProps<{init?: {type: 'nuée' | 'bd'; id: string}}>();\nconst émettre = defineEmits<{(é: 'nouvelle', id: string): void}>();\n\nconst constl = utiliserConstellation();\n\nconst {$மொ: t} = மொழியாக்கத்தைப்_பயன்படுத்து();\nconst routeur = useRouter();\nconst {isRtl} = useRtl();\nconst {mdAndUp} = useDisplay();\n\n// Navigation\nconst dialogue = ref(false);\n\nconst listeÉtapes = [\n  'cheminement',\n  'gabaritBd',\n  'gabaritNuée',\n  'noms',\n  'descriptions',\n  'motsClefs',\n  'licence',\n  'licenceContenu',\n  'statut',\n  'confirmation',\n] as const;\nconst étape = ref(props.init?.type === undefined ? 0 : listeÉtapes.indexOf('statut'));\n\nconst titreCarte = computed(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'cheminement':\n      return 'bds.nouvelle.titreCheminement';\n    case 'gabaritBd':\n      return 'bds.nouvelle.titreGabaritBd';\n    case 'gabaritNuée':\n      return 'bds.nouvelle.titreGabaritNuée';\n    case 'noms':\n      return 'bds.nouvelle.titreNoms';\n    case 'descriptions':\n      return 'bds.nouvelle.titreDescriptions';\n    case 'motsClefs':\n      return 'bds.nouvelle.titreMotsClefs';\n    case 'licence':\n      return 'bds.nouvelle.titreLicence';\n    case 'licenceContenu':\n      return 'bds.nouvelle.titreLicenceContenu';\n    case 'statut':\n      return 'bds.nouvelle.titreStatut';\n    case 'confirmation':\n      return 'bds.nouvelle.titreConfirmation';\n    default:\n      return '';\n  }\n});\n\nconst sousTitreCarte = computed(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'cheminement':\n      return 'bds.nouvelle.sousTitreCheminement';\n    case 'gabaritBd':\n      return 'bds.nouvelle.sousTitreGabaritBd';\n    case 'gabaritNuée':\n      return 'bds.nouvelle.sousTitreGabaritNuée';\n    case 'noms':\n      return 'bds.nouvelle.sousTitreNoms';\n    case 'descriptions':\n      return 'bds.nouvelle.sousTitreDescriptions';\n    case 'motsClefs':\n      return 'bds.nouvelle.sousTitreMotsClefs';\n    case 'licence':\n      return 'bds.nouvelle.sousTitreLicence';\n    case 'licenceContenu':\n      return 'bds.nouvelle.sousTitreLicenceContenu';\n    case 'statut':\n      return 'bds.nouvelle.sousTitreStatut';\n    case 'confirmation':\n      return 'bds.nouvelle.sousTitreConfirmation';\n    default:\n      return '';\n  }\n});\n\nconst cheminement = ref<'nouvelle' | 'bd' | 'nuée' | undefined>(props.init?.type);\nconst suivreCheminementGabarit = (type: 'nuée' | 'bd') => {\n  cheminement.value = type;\n  étape.value = listeÉtapes.indexOf(type === 'bd' ? 'gabaritBd' : 'gabaritNuée');\n};\nconst suivreCheminementNouvelle = () => {\n  cheminement.value = 'nouvelle';\n  étape.value = listeÉtapes.indexOf('noms');\n};\n\nconst suivant = () => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'gabaritBd':\n    case 'gabaritNuée':\n      // On saute directement à la confirmation de la licence pour les gabarits\n      étape.value = listeÉtapes.indexOf('licence');\n      break;\n\n    case 'licence':\n      étape.value = listeÉtapes.indexOf(licenceContenuPareil.value ? 'statut' : 'licenceContenu');\n      break;\n\n    default:\n      étape.value++;\n      break;\n  }\n};\n\nconst retour = () => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'gabaritBd':\n    case 'gabaritNuée':\n    case 'noms':\n      étape.value = listeÉtapes.indexOf('cheminement');\n      break;\n\n    case 'licence':\n      étape.value = listeÉtapes.indexOf(\n        cheminement.value === 'bd'\n          ? 'gabaritBd'\n          : cheminement.value === 'nuée'\n            ? 'gabaritNuée'\n            : 'motsClefs',\n      );\n      break;\n\n    case 'statut':\n      étape.value = listeÉtapes.indexOf(licenceContenuPareil.value ? 'licence' : 'licenceContenu');\n      break;\n\n    default:\n      étape.value--;\n      break;\n  }\n};\n\nconst suivantActif = computed<{actif: boolean; visible: boolean}>(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'cheminement':\n      return {actif: false, visible: false};\n    case 'gabaritBd':\n      return {actif: !!idBdÀCopier.value, visible: true};\n    case 'gabaritNuée':\n      return {actif: !!gabaritNuée.value, visible: true};\n    case 'noms':\n      return {actif: Object.keys(noms.value).length > 0, visible: true};\n    case 'licence':\n      return {actif: !!licence.value, visible: true};\n    case 'licenceContenu':\n      return {actif: !!licenceContenu.value, visible: true};\n    case 'confirmation':\n      return {actif: false, visible: false};\n    default:\n      return {actif: true, visible: true};\n  }\n});\n\nconst retourActif = computed<{actif: boolean; visible: boolean}>(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'statut':\n      return {actif: !props.init, visible: !props.init};\n    case 'cheminement':\n      return {actif: false, visible: false};\n    case 'confirmation':\n      return {actif: !enCréation.value, visible: true};\n    default:\n      return {actif: true, visible: true};\n  }\n});\n\n// Gabarits\nconst gabaritNuée = ref<bds.schémaSpécificationBd>();\nconst idBdÀCopier = ref<string>();\n\nconst choisirGabaritBd = async (idBd: string) => {\n  idBdÀCopier.value = idBd;\n};\nconst choisirGabaritNuée = async (idNuée: string) => {\n  const schéma = await constl.nuées.générerSchémaBdNuée({\n    idNuée,\n    licence: 'ODbl-1_0', // À faire : incorporer dans la spécification de la nuée\n  });\n  if (schéma) {\n    gabaritNuée.value = schéma;\n    licence.value = schéma.licence;\n    licenceContenu.value = schéma.licenceContenu;\n  }\n};\nconst copierDonnées = ref(true);\n\nwatchEffect(() => {\n  if (props.init) {\n    if (props.init.type === 'bd') choisirGabaritBd(props.init.id);\n    else if (props.init.type === 'nuée') choisirGabaritNuée(props.init.id);\n  }\n});\n\n// Noms\nconst noms = ref<{[lng: string]: string}>({});\nconst ajusterNoms = (nms: {[lng: string]: string}) => {\n  noms.value = nms;\n};\n\n// Descriptions\nconst descriptions = ref<{[lng: string]: string}>({});\nconst ajusterDescriptions = (desrc: {[lng: string]: string}) => {\n  descriptions.value = desrc;\n};\n\n// Mots-clefs\nconst motsClefs = ref<string[]>([]);\n\n// Licences\nconst infoLicences = suivre(constl.licences.suivreLicences);\n\nconst licence = ref<string>();\nconst licenceContenuPareil = ref(true);\nconst licenceContenu = ref<string>();\n\nconst licenceBdÀCopier = suivre(constl.bds.suivreLicenceBd, {idBd: idBdÀCopier});\nconst partageÉgale = computed(() => {\n  return (\n    licenceBdÀCopier.value &&\n    infoLicences.value?.[licenceBdÀCopier.value]?.conditions.includes('partageÉgal')\n  );\n});\nwatchEffect(() => {\n  if (partageÉgale.value) licence.value = licenceBdÀCopier.value;\n});\n\nconst licenceContenuBdÀCopier = suivre(constl.bds.suivreLicenceContenuBd, {idBd: idBdÀCopier});\nconst partageÉgaleContenu = computed(() => {\n  return (\n    licenceContenuBdÀCopier.value &&\n    infoLicences.value?.[licenceContenuBdÀCopier.value]?.conditions.includes('partageÉgal')\n  );\n});\nwatchEffect(() => {\n  if (partageÉgaleContenu.value) licenceContenu.value = licenceContenuBdÀCopier.value;\n});\n\n// Statut\nconst statut = ref<types.schémaStatut>({statut: 'active'});\n\n// Création\nconst prêtÀCréer = computed(() => {\n  if (!licence.value) return undefined;\n  return {licenceChoisie: licence.value};\n});\n\nconst ouvrirAprèsCréation = ref(true);\n\nconst enCréation = ref(false);\n\nconst créerBd = async () => {\n  enCréation.value = true;\n\n  let idBd: string | undefined;\n\n  if (cheminement.value === 'nouvelle') {\n    if (!prêtÀCréer.value) return;\n    const {licenceChoisie} = prêtÀCréer.value;\n    idBd = await constl.bds.créerBd({\n      licence: licenceChoisie,\n      licenceContenu: licenceContenu.value,\n    });\n    if (!idBd) throw new Error('Bd non créée.');\n\n    await constl.bds.sauvegarderNomsBd({\n      idBd,\n      noms: Object.fromEntries(Object.entries(noms.value)),\n    });\n    await constl.bds.sauvegarderDescriptionsBd({\n      idBd,\n      descriptions: Object.fromEntries(Object.entries(descriptions.value)),\n    });\n    await constl.bds.ajouterMotsClefsBd({idBd, idsMotsClefs: motsClefs.value});\n  } else if (cheminement.value === 'nuée') {\n    if (!gabaritNuée.value) return;\n    idBd = await constl.bds.créerBdDeSchéma({schéma: gabaritNuée.value});\n  } else {\n    if (!idBdÀCopier.value) return;\n    idBd = await constl.bds.copierBd({\n      idBd: idBdÀCopier.value,\n      copierDonnées: copierDonnées.value,\n    });\n  }\n\n  await constl.bds.changerStatutBd({\n    idBd,\n    statut: statut.value,\n  });\n\n  émettre('nouvelle', idBd);\n  fermer();\n  if (ouvrirAprèsCréation.value) routeur.push(encodeURI(`/données/bd/${encodeURIComponent(idBd)}`));\n};\n\n// Fermer\nconst fermer = () => {\n  noms.value = {};\n  descriptions.value = {};\n  licence.value = undefined;\n  licenceContenu.value = undefined;\n  motsClefs.value = [];\n  étape.value = 0;\n  enCréation.value = false;\n  dialogue.value = false;\n};\n</script>\n"],"names":["props","__props","émettre","__emit","constl","utiliserConstellation","t","மொழியாக்கத்தைப்_பயன்படுத்து","routeur","useRouter","isRtl","useRtl","mdAndUp","useDisplay","dialogue","ref","listeÉtapes","étape","titreCarte","computed","sousTitreCarte","cheminement","suivreCheminementGabarit","type","suivreCheminementNouvelle","suivant","licenceContenuPareil","retour","suivantActif","idBdÀCopier","gabaritNuée","noms","licence","licenceContenu","retourActif","enCréation","choisirGabaritBd","idBd","choisirGabaritNuée","idNuée","schéma","copierDonnées","watchEffect","ajusterNoms","nms","descriptions","ajusterDescriptions","desrc","motsClefs","infoLicences","suivre","licenceBdÀCopier","partageÉgale","licenceContenuBdÀCopier","partageÉgaleContenu","statut","prêtÀCréer","ouvrirAprèsCréation","créerBd","licenceChoisie","fermer","_createBlock","_component_v_dialog","$event","_withCtx","propsActivateur","_renderSlot","_ctx","_createVNode","_component_v_card","_unref","_component_v_card_item","_component_v_card_title","_createElementVNode","_toDisplayString","_component_v_card_subtitle","_createTextVNode","_component_v_card_text","_component_v_window","_component_v_window_item","_component_v_list","_component_v_list_item","SelecteurBd","ids","_component_v_checkbox","SelecteurNuee","_cache","id","ListeNoms","SelecteurMotClef","_component_v_alert","ChoixLicence","l","ChoisirStatut","stt","choisirNouvelle","_hoisted_1","_component_v_btn","_component_v_divider","_component_v_card_actions","BtnRetour","_component_v_spacer","BtnSuivant"],"mappings":"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"}