import{d as ee,q as b,c as v,a as u,w as t,H as De,I as ge,J as xe,n as Ae,க as ve,p as pe,r as E,s as C,x as Be,h as a,b as e,V as F,i as Ce,e as ke,f as D,t as V,y as Q,j as B,m as fe,X as qe,M as J,Z as ue,B as Y,bB as ie,R as ce,bC as ze,F as h,G as H,v as Ee,bD as Xe,ao as he,bE as Fe,as as Ge,bF as Ze,bG as Je,aO as Ye,bH as ea,N as me,am as Se,K as x,z as P,S as aa,an as ne,bI as Qe,u as ta,ம as ia,o as la,aC as na,bJ as oa,aG as sa,bK as da,aY as ra,aZ as ua,a_ as Ie,a$ as ca,A as le,bt as Ne,bu as ma,bL as fa,bM as Le,bN as va,bO as pa,bP as ba,a8 as _a,bQ as ya,bR as Pe,bv as Oe,bw as ga,bS as xa,Q as we,O as je,a2 as Ba,b0 as Ca,aF as ka,T as Va,b1 as Re,W as Ta}from"./index-DawdXn0w.js";import{u as wa}from"./historiqueDocuments-BX0HftXR.js";import{_ as ja,t as $a,V as ha,E as Da,a as Aa,b as Ea,c as He,d as Sa,e as Ia,f as Na,g as La,h as Pa,i as Oa,j as Ra,k as Ue}from"./VBreadcrumbs-CD9QYe-M.js";import{_ as Ua}from"./ChoisirStatut.vue_vue_type_script_setup_true_lang-CPEe_Dwi.js";import{a as Ma,b as $e}from"./SélecteurNuée.vue_vue_type_script_setup_true_lang-DVanH00p.js";import{V as qa}from"./VSwitch-FwGIcUCt.js";import{V as za,a as Fa}from"./VTabs-C_vUIlwT.js";import{V as Me}from"./VSlideGroupItem-DjXKXF09.js";import"./NouvelleImportation.vue_vue_type_script_setup_true_lang-CSAdPnZA.js";import"./RésultatRechercheProjet.vue_vue_type_script_setup_true_lang-CMspVejb.js";import"./CarteProjet.vue_vue_type_script_setup_true_lang-APcxl9oW.js";import"./NouveauProjet.vue_vue_type_script_setup_true_lang-3P36EM7C.js";import"./RésultatRechercheNuée.vue_vue_type_script_setup_true_lang-BJYPmQYN.js";import"./CarteNuée.vue_vue_type_script_setup_true_lang-C709jdKo.js";const Ga=ee({__name:"CarteCodeBd",props:{id:{}},setup(N){const r=N,s=b(()=>({ts:`import { créerConstellation } from "@constl/ipa";

const client = créerConstellation();

const monAnalyse = async (données) => {
  console.log(données)
  // Faire quelque chose...
}

const fOublier = client.bds.suivreDonnéesExportation({
  idBd: "${r.id}",
  f: monAnalyse
})
`,py:`from constellationPy import Serveur, ClientSync
    
with Serveur():
    client = ClientSync()

    données = client.bds.suivreDonnéesExportation(
      idBd="${r.id}"
    )
`,julia:`import Constellation

Constellation.avecServeur() do port
  Constellation.avecClient(port) do client

    oublier = Constellation.suivre(
        client, 
        "bds.suivreDonnéesExportation", 
        Dict([("idBd","${r.id}")])
    ) do résultat
        print(résultat)
    end
  end
end
`,r:`library(constellationR)

constellationR::avecClientEtServeur(
  function (client) {
    
    données <- client$appeler(
      "bds.suivreDonnéesExportation", 
      list(idBd="${r.id}")
    )
  }
)
`}));return(f,_)=>(u(),v(ja,{codes:s.value},{activator:t(({props:g})=>[De(f.$slots,"activator",ge(xe({props:g})))]),_:3},8,["codes"]))}}),Qa=ee({__name:"CarteQualitéBd",props:{idBd:{}},setup(N){const{mdAndUp:r}=Ae(),{மொழியாக்கம்_பயன்படுத்து:s}=ve(),{$மொ:f}=s(),_=N,g=pe(),d=E(!1),y=C(g.bds.suivreQualitéBd,{idBd:b(()=>_.idBd)}),I=C(g.bds.suivreLicenceBd,{idBd:b(()=>_.idBd)}),W=C(g.bds.suivreLicenceContenuBd,{idBd:b(()=>_.idBd)}),O=C(g.suivrePermission,{idObjet:b(()=>_.idBd)});return(j,T)=>(u(),v(Be,{modelValue:d.value,"onUpdate:modelValue":T[1]||(T[1]=A=>d.value=A),"max-width":a(r)?500:300},{activator:t(({props:A})=>[De(j.$slots,"activator",ge(xe({props:A})))]),default:t(()=>[e(F,null,{default:t(()=>[e(Ce,null,{default:t(()=>[e(ke,{class:"d-flex"},{default:t(()=>[D(V(a(f)("bds.qualité.titre"))+" ",1),e(Q),e(B,{icon:"mdi-close",size:"small",variant:"flat",onClick:T[0]||(T[0]=A=>d.value=!1)})]),_:1})]),_:1}),e(fe,null,{default:t(()=>[e(qe,null,{default:t(()=>[e(J,null,{prepend:t(()=>[e(ue,null,{default:t(()=>[e(Y,{"model-value":(a(y)?.total||0)*100,width:5,indeterminate:a(y)?.total===void 0,color:a(ie)(a(y)?.total).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>T[2]||(T[2]=[D("Score total")])),_:1}),e(ce),e(J,null,{prepend:t(()=>[e(ue,null,{default:t(()=>[e(Y,{"model-value":(a(y)?.accès||0)*100,width:5,indeterminate:a(y)?.accès===void 0,color:a(ie)(a(y)?.accès).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>T[3]||(T[3]=[D("Accessibilité")])),_:1}),e(ze,{licence:a(I),"licence-contenu":a(W),"permission-modifier":!!a(O)},{activator:t(({props:A})=>[e(J,ge(xe(A)),{prepend:t(()=>[e(ue,null,{default:t(()=>[a(y)?.licence===void 0?(u(),v(Y,{key:0,width:5,indeterminate:"",color:a(ie)(a(y)?.licence).couleur},null,8,["color"])):h("",!0),e(H,{icon:a(y)?.licence?"mdi-check":"mdi-alert-circle-outline",color:a(ie)(a(y)?.licence).couleur},null,8,["icon","color"])]),_:1})]),title:t(()=>[D(V(a(y)?.licence===void 0?a(f)("bds.qualité.rechercheLicence"):a(y).licence?a(f)("bds.qualité.licenceOuverte"):a(f)("bds.qualité.licenceNonReconnue")),1)]),_:2},1040)]),_:1},8,["licence","licence-contenu","permission-modifier"]),e(J,null,{prepend:t(()=>[e(ue,null,{default:t(()=>[e(Y,{"model-value":(a(y)?.valide||0)*100,width:5,indeterminate:a(y)?.valide===void 0,color:a(ie)(a(y)?.valide).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>T[4]||(T[4]=[D("Validation données")])),_:1}),e(J,null,{prepend:t(()=>[e(ue,null,{default:t(()=>[e(Y,{"model-value":(a(y)?.couverture||0)*100,width:5,indeterminate:a(y)?.couverture===void 0,color:a(ie)(a(y)?.couverture).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>T[5]||(T[5]=[D("Couverture tests")])),_:1})]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),Ha=ee({__name:"CarteStatutBd",props:{idBd:{}},setup(N){const r=N,{மொழியாக்கம்_பயன்படுத்து:s}=ve(),{$மொ:f}=s(),{mdAndUp:_}=Ae(),g=pe(),d=E(!1),y=C(g.bds.suivreStatutBd,{idBd:b(()=>r.idBd)}),I=E();Ee(()=>{I.value=y.value});const W=b(()=>y.value?.statut!==I.value?.statut||y.value?.idNouvelle!==I.value?.idNouvelle),O=E(!1),j=async()=>{O.value=!0,I.value&&await g.bds.changerStatutBd({idBd:r.idBd,statut:Fe(I.value)}),O.value=!1,d.value=!1};return(T,A)=>(u(),v(Be,{modelValue:d.value,"onUpdate:modelValue":A[2]||(A[2]=L=>d.value=L)},{activator:t(({props:L})=>[De(T.$slots,"activator",ge(xe({props:L})))]),default:t(()=>[e(F,{class:"mx-auto","min-width":a(_)?500:300},{default:t(()=>[e(Ce,null,{default:t(()=>[e(ke,null,{default:t(()=>[D(V(a(f)("données.statut.carte.titre")),1)]),_:1})]),_:1}),e(fe,null,{default:t(()=>[e(Ua,{initial:I.value,onChoisir:A[0]||(A[0]=L=>I.value=L)},{sélecteur:t(({choisirNouvelle:L})=>[e(Xe,{multiples:!1,onSelectionnee:G=>L(G[0])},null,8,["onSelectionnee"])]),_:1},8,["initial"])]),_:1}),e(he,null,{default:t(()=>[e(Q),e(B,{disabled:!W.value,loading:O.value,variant:"flat",color:"primary",onClick:j},{default:t(()=>[D(V(a(f)("communs.sauvegarder")),1)]),_:1},8,["disabled","loading"]),e(B,{variant:"flat","append-icon":"mdi-close",onClick:A[1]||(A[1]=L=>d.value=!1)},{default:t(()=>[D(V(a(f)("communs.fermer")),1)]),_:1})]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),Wa=ee({__name:"ItemQualitéBd",props:{id:{}},setup(N){return(r,s)=>(u(),v(J,null,{prepend:t(()=>[e(Je,{id:r.id},null,8,["id"])]),default:t(()=>[e(Ge,null,{default:t(()=>[e(Ze,{id:r.id},null,8,["id"])]),_:1})]),_:1}))}}),Ka=ee({__name:"ItemLicence",props:{licence:{}},setup(N){const r=pe(),{மொழியாக்கம்_பயன்படுத்து:s}=ve(),{$மொ:f}=s(),_=N,g=C(r.licences.suivreLicences),d=b(()=>_.licence&&g.value&&Object.keys(g.value).includes(_.licence));return(y,I)=>(u(),v(J,null,{prepend:t(()=>[e(H,{start:"",color:d.value?"primary":"error"},{default:t(()=>[D(V(d.value?"mdi-scale-balance":"mdi-alert"),1)]),_:1},8,["color"])]),default:t(()=>[e(Ge,null,{default:t(()=>[D(V(d.value?a(f)(`licences.info.${y.licence}.abr`):y.licence),1)]),_:1})]),_:1}))}}),Xa={class:"my-4 text-h6 text-disabled"},Za=ee({__name:"TableauBd",props:{idTableau:{},idBd:{}},setup(N){const{மொழியாக்கம்_பயன்படுத்து:r}=ve(),{$மொ:s}=r(),f=pe(),_=N,g=C(f.suivrePermission,{idObjet:b(()=>_.idTableau)}),d=C(f.tableaux.suivreNomsTableau,{idTableau:b(()=>_.idTableau)}),y=C(f.tableaux.suivreVariables,{idTableau:b(()=>_.idTableau)}),I=C(f.tableaux.suivreColonnesTableau,{idTableau:b(()=>_.idTableau)}),W=C(f.tableaux.suivreColonnesEtCatégoriesTableau,{idTableau:b(()=>_.idTableau)}),O=b(()=>(I.value||[]).map(n=>{const o=W.value?.find(l=>l.id===n.id)?.catégorie;return{key:n.id,sortable:o===void 0||(o?.type==="simple"?$a(o.catégorie):!1),info:{index:n.index,catégorie:o,variable:n.variable}}})),j=b(()=>{const n={key:"actions",sortable:!1,info:{}};return[...O.value,n]}),T=async({idVariable:n,idColonne:o,index:l,règles:m})=>{o=await f.tableaux.ajouterColonneTableau({idTableau:_.idTableau,idVariable:n,idColonne:o}),l&&await f.tableaux.changerColIndex({idTableau:_.idTableau,idColonne:o,val:!0});for(const k of m)await f.tableaux.ajouterRègleTableau({idTableau:_.idTableau,idColonne:o,règle:k})},A=async({idColonne:n,index:o,règles:l})=>{await f.tableaux.changerColIndex({idTableau:_.idTableau,idColonne:n,val:o});for(const m of l.nouvelles)await f.tableaux.ajouterRègleTableau({idTableau:_.idTableau,idColonne:n,règle:m});for(const m of l.àEffacer)await f.tableaux.effacerRègleTableau({idTableau:_.idTableau,idRègle:m})},L=async({idColonne:n})=>{await f.tableaux.effacerColonneTableau({idTableau:_.idTableau,idColonne:n})},G=C(f.tableaux.suivreDonnées,{idTableau:b(()=>_.idTableau)}),be=b(()=>{const n=G.value?.toSorted((l,m)=>oe.value&&oe.value.map(k=>l.données[k.key]===void 0?m.données[k.key]===void 0?0:k.order==="asc"?1:-1:m.données[k.key]===void 0?l.données[k.key]===void 0?0:k.order==="asc"?-1:1:l.données[k.key]>m.données[k.key]?k.order==="asc"?1:-1:l.données[k.key]<m.données[k.key]?k.order==="asc"?-1:1:0).find(k=>k!==0)||0),o={id:"-1",données:{}};return K.value&&n?[o,...n]:n}),oe=E(),U=E([]),Ve=C(f.tableaux.suivreRègles,{idTableau:b(()=>_.idTableau)}),K=E(!1),ae=E(!1),X=E(),M=b(()=>{const n=[];for(const[o,l]of Object.entries(X.value||{})){const m=G.value?.find(k=>k.id===o);m&&q({modifs:l,original:m.données})&&n.push({idÉlément:o,vals:l})}return n}),se=b(()=>M.value.length+(Object.keys($.value).length?1:0)),q=({modifs:n,original:o})=>Object.keys(n).some(l=>o[l]!==n[l]),$=E({});Ee(()=>{K.value||($.value={})});const R=b(()=>Object.keys($.value).length>0),de=({val:n,idCol:o,idÉlément:l})=>{if(l==="-1")n!==void 0?$.value[o]=n:delete $.value[o];else{const m=X.value||{};m[l]||(m[l]={}),m[l][o]=n,X.value=m}},re=async({vals:n})=>Object.fromEntries(await Promise.all(Object.entries(n).map(async([o,l])=>{if(l instanceof File){const m=await f.ajouterÀSFIP({contenu:new Uint8Array(await l.arrayBuffer()),nomFichier:l.name});return[o,m]}else return[o,l]}))),_e=async()=>{ae.value=!0;for(const{idÉlément:n,vals:o}of M.value)await f.tableaux.modifierÉlément({idTableau:_.idTableau,idÉlément:n,vals:await re({vals:o})});R.value&&await ye(),X.value=void 0,ae.value=!1},ye=async()=>{await f.tableaux.ajouterÉlément({idTableau:_.idTableau,vals:await re({vals:$.value})}),$.value={}},te=E(!1),Z=E(!1),z=E(!1),c=E(!1),p=E(!1);Ye([c,p],()=>{te.value=Z.value});const S=async({idÉlément:n})=>{z.value=!0,await f.tableaux.effacerÉlément({idTableau:_.idTableau,idÉlément:n}),z.value=!1},w=async()=>{z.value=!0,await Promise.all(U.value.map(n=>S({idÉlément:n}))),U.value=[],z.value=!1},i=async()=>{await f.bds.effacerTableauBd({idBd:_.idBd,idTableau:_.idTableau})};return(n,o)=>(u(),v(ha,{modelValue:U.value,"onUpdate:modelValue":o[13]||(o[13]=l=>U.value=l),headers:j.value,items:be.value,"show-select":!!a(g),"multi-sort":"","onUpdate:sortBy":o[14]||(o[14]=l=>oe.value=l)},ea({top:t(()=>[e(Sa,{flat:"",density:"compact"},{default:t(()=>[e(Q),a(g)?(u(),v(B,{key:0,icon:"",disabled:!se.value,onClick:o[0]||(o[0]=()=>_e())},{default:t(()=>[se.value?(u(),v(aa,{key:0,color:"success",content:se.value},{default:t(()=>[e(H,{color:"primary",icon:"mdi-content-save-outline"})]),_:1},8,["content"])):(u(),v(H,{key:1,color:"primary",icon:"mdi-content-save-check-outline"}))]),_:1},8,["disabled"])):h("",!0),a(g)?(u(),v(qa,{key:1,modelValue:K.value,"onUpdate:modelValue":o[1]||(o[1]=l=>K.value=l),class:"me-4",density:"compact",color:"primary","true-icon":"mdi-pencil-outline","false-icon":"mdi-pencil-off-outline","hide-details":""},null,8,["modelValue"])):h("",!0),a(g)?(u(),v(Ma,{key:2,"id-tableau":n.idTableau,"variables-interdites":a(y),onNouvelle:o[2]||(o[2]=l=>T(l))},{activator:t(({props:l})=>[e(B,x(l,{icon:"mdi-table-column-plus-after"}),null,16)]),_:1},8,["id-tableau","variables-interdites"])):h("",!0),e(Ea,{"id-objet":n.idTableau,"type-objet":"tableau"},{activator:t(({props:l})=>[e(ne,{text:a(s)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:m})=>[e(B,x({...l,...m},{icon:"mdi-sync"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet"]),e(He,{"id-objet":n.idTableau,"noms-objet":a(d),"type-objet":"tableau"},{activator:t(({props:l})=>[e(ne,{text:a(s)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:m})=>[e(B,x({...l,...m},{icon:"mdi-download"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet","noms-objet"]),a(g)?(u(),v(Qe,{key:3,onEffacer:o[3]||(o[3]=()=>i())},{activator:t(({props:l})=>[e(B,x(l,{icon:"mdi-delete",color:"error"}),null,16)]),_:1})):h("",!0)]),_:1})]),"no-data":t(()=>[P("p",Xa,V(a(s)("tableaux.aucuneDonnée")),1),h("",!0)]),"item.actions":t(({item:l})=>[l.id==="-1"?(u(),v(B,{key:0,disabled:!R.value,icon:"mdi-content-save-outline",size:"small",variant:"flat",onClick:o[9]||(o[9]=()=>ye())},null,8,["disabled"])):te.value&&a(g)?(u(),v(B,{key:1,size:"small",icon:"mdi-delete",variant:"flat",loading:z.value,onClick:()=>S({idÉlément:l.id})},null,8,["loading","onClick"])):a(g)?(u(),v(Be,{key:2,modelValue:c.value,"onUpdate:modelValue":o[12]||(o[12]=m=>c.value=m)},{activator:t(({props:m})=>[e(B,x(m,{variant:"flat",icon:"mdi-delete",size:"small",loading:z.value}),null,16,["loading"])]),default:t(()=>[e(F,{class:"mx-auto","max-width":"450"},{default:t(()=>[e(Ce,null,{default:t(()=>[e(ke,null,{default:t(()=>[D(V(a(s)("tableaux.données.titreEffacer")),1)]),_:1})]),_:1}),e(fe,null,{default:t(()=>[e(Se,{modelValue:Z.value,"onUpdate:modelValue":o[10]||(o[10]=m=>Z.value=m),label:a(s)("tableaux.données.nePlusConfirmerEffacer")},null,8,["modelValue","label"])]),_:1}),e(he,null,{default:t(()=>[e(Q),e(B,{variant:"text",text:a(s)("communs.oui"),onClick:()=>{S({idÉlément:l.id}),c.value=!1}},null,8,["text","onClick"]),e(B,{variant:"text",color:"primary",text:a(s)("communs.non"),onClick:o[11]||(o[11]=m=>c.value=!1)},null,8,["text"]),e(Q)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])):h("",!0)]),_:2},[me(O.value||[],l=>({name:`header.${l.key}`,fn:t(({column:m,isSorted:k,getSortIcon:We,toggleSort:Ke})=>[e(Da,{"id-colonne":l.key,"id-variable":l.info.variable,"id-tableau":n.idTableau,index:!!l.info.index,regles:a(Ve)?.filter(Te=>Te.colonne===l.key),"permission-modifier":!!a(g),ordonnable:m.sortable,"est-ordonnee":k(m),"icone-ordonner":We(m),onBasculerOrdonner:()=>Ke(m),onSauvegarder:Te=>A({idColonne:l.key,...Te}),onEffacer:()=>L({idColonne:l.key})},null,8,["id-colonne","id-variable","id-tableau","index","regles","permission-modifier","ordonnable","est-ordonnee","icone-ordonner","onBasculerOrdonner","onSauvegarder","onEffacer"])])})),a(g)?{name:"header.actions",fn:t(()=>[te.value?(u(),v(B,{key:0,icon:"mdi-delete",variant:"flat",size:"small",loading:z.value,readonly:!U.value.length,onClick:o[4]||(o[4]=()=>w())},null,8,["loading","readonly"])):(u(),v(Be,{key:1,modelValue:p.value,"onUpdate:modelValue":o[8]||(o[8]=l=>p.value=l)},{activator:t(({props:l})=>[e(B,x(l,{icon:"",variant:"flat",size:"small",readonly:!U.value.length,loading:z.value}),{default:t(()=>[e(H,{icon:"mdi-delete",color:U.value.length?void 0:"disabled"},null,8,["color"])]),_:2},1040,["readonly","loading"])]),default:t(()=>[e(F,{class:"mx-auto","max-width":"450"},{default:t(()=>[e(Ce,null,{default:t(()=>[e(ke,null,{default:t(()=>[D(V(a(s)("tableaux.données.titreEffacerSélectionnées",U.value.length)),1)]),_:1})]),_:1}),e(fe,null,{default:t(()=>[e(Se,{modelValue:Z.value,"onUpdate:modelValue":o[5]||(o[5]=l=>Z.value=l),label:a(s)("tableaux.données.nePlusConfirmerEffacer")},null,8,["modelValue","label"])]),_:1}),e(he,null,{default:t(()=>[e(Q),e(B,{variant:"text",text:a(s)("communs.oui"),onClick:o[6]||(o[6]=()=>{w(),p.value=!1})},null,8,["text"]),e(B,{variant:"text",color:"primary",text:a(s)("communs.non"),onClick:o[7]||(o[7]=l=>p.value=!1)},null,8,["text"]),e(Q)]),_:1})]),_:1})]),_:1},8,["modelValue"]))]),key:"0"}:void 0,me(O.value,l=>({name:`item.${l.key}`,fn:t(({item:m})=>[e(Aa,{categorie:l.info.catégorie?.catégorie,val:m.données[l.key],editable:!!a(g)&&K.value,onModifiee:({val:k})=>de({idCol:l.key,idÉlément:m.id,val:k})},null,8,["categorie","val","editable","onModifiee"])])}))]),1032,["modelValue","headers","items","show-select"]))}}),Ja={class:"text-center"},Ya={class:"text-center"},et={key:0,class:"text-disabled"},at={class:"text-center"},tt={class:"mt-6 text-h5"},it={class:"d-flex flex-wrap"},lt={class:"mt-6 text-h5"},nt={key:0,class:"text-disabled"},ot={class:"mt-6 text-h5"},st={key:2,class:"text-center"},dt={class:"text-h5 mt-5"},kt=ee({__name:"PageBd",props:{id:{}},setup(N){const r=N,s=pe(),{mdAndUp:f}=Ae(),{isRtl:_}=ta(),{மொழியாக்கம்_பயன்படுத்து:g}=ve(),{$மொ:d}=g(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:y}=ia(),{obtImageDéco:I}=na(),W=wa();la(()=>{W.documentOuvert({id:r.id,à:Date.now()})});const O=I("vide"),j=C(s.suivrePermission,{idObjet:b(()=>r.id)}),T=C(s.bds.suivreNomsBd,{idBd:b(()=>r.id)}),A=y(T),L=async c=>{const{àEffacer:p,àAjouter:S}=Re({anciennes:T.value,nouvelles:c});for(const w of p)await s.bds.effacerNomBd({idBd:r.id,langue:w});await s.bds.sauvegarderNomsBd({idBd:r.id,noms:S})},G=C(s.bds.suivreDescriptionsBd,{idBd:b(()=>r.id)}),be=y(G),oe=async c=>{const{àEffacer:p,àAjouter:S}=Re({anciennes:G.value,nouvelles:c});for(const w of p)await s.bds.effacerDescriptionBd({idBd:r.id,langue:w});await s.bds.sauvegarderDescriptionsBd({idBd:r.id,descriptions:S})},U=oa(C(s.bds.suivreImage,{idBd:b(()=>r.id)})),Ve=I("logoBD"),K=async c=>{c?await s.bds.sauvegarderImage({idBd:r.id,image:{contenu:new Uint8Array(c.contenu),nomFichier:c.fichier}}):await s.bds.effacerImage({idBd:r.id})},ae=C(s.bds.suivreStatutBd,{idBd:b(()=>r.id)}),X=C(s.bds.suivreVariablesBd,{idBd:b(()=>r.id)}),M=C(s.bds.suivreMotsClefsBd,{idBd:b(()=>r.id)}),se=async c=>{const p=c.filter(w=>!M.value?.includes(w)),S=M.value?.filter(w=>!c.includes(w))||[];await s.bds.ajouterMotsClefsBd({idBd:r.id,idsMotsClefs:p}),await Promise.all(S.map(w=>s.bds.effacerMotClefBd({idBd:r.id,idMotClef:w})))},q=C(s.bds.suivreTableauxBd,{idBd:b(()=>r.id)}),$=E();Ee(()=>{!$.value&&q.value?.length&&($.value=q.value[0].clef),$.value&&!q.value?.map(c=>c.clef).includes($.value)&&($.value=void 0)});const R=E(!1),de=async({noms:c,cols:p})=>{R.value=!0;try{const S=await s.bds.ajouterTableauBd({idBd:r.id});await s.tableaux.sauvegarderNomsTableau({idTableau:S,noms:Fe(c)}),await Promise.all(p.map(async w=>{await s.tableaux.ajouterColonneTableau({idTableau:S,idColonne:w.info.id,idVariable:w.info.variable}),w.info.index&&await s.tableaux.changerColIndex({idTableau:S,idColonne:w.info.id,val:!0}),await Promise.all(w.règles.map(async i=>await s.tableaux.ajouterRègleTableau({idTableau:S,idColonne:w.info.id,règle:i})))}))}finally{R.value=!1}},re=C(s.réseau.suivreAuteursBd,{idBd:b(()=>r.id)}),_e=C(s.bds.suivreLicenceBd,{idBd:b(()=>r.id)}),ye=C(s.bds.suivreLicenceContenuBd,{idBd:b(()=>r.id)}),te=async({licence:c,licenceContenu:p})=>{await s.bds.changerLicenceBd({idBd:r.id,licence:c}),p&&await s.bds.changerLicenceContenuBd({idBd:r.id,licenceContenu:p})},Z=b(()=>[{title:d("navigation.données"),href:encodeURI("/données/")},{title:A.value||d("bds.sansNom"),disabled:!0}]),z=async()=>{await s.bds.effacerBd({idBd:r.id})};return(c,p)=>{const S=Pe("carte-replications-objet"),w=Pe("carte-automatisations-bd");return u(),v(sa,null,{default:t(()=>[P("div",null,[a(f)?(u(),v(Ia,{key:0,items:Z.value,class:"pa-0"},{divider:t(()=>[e(H,null,{default:t(()=>[D(V(a(_)?"mdi-chevron-left":"mdi-chevron-right"),1)]),_:1})]),title:t(({item:i})=>[e(Na,{disabled:i.disabled,onClick:n=>i.href&&c.$router.push(i.href)},{default:t(()=>[e(da,{texte:i.title,"longueur-max":35},null,8,["texte"])]),_:2},1032,["disabled","onClick"])]),_:1},8,["items"])):(u(),v(B,{key:1,icon:"mdi-arrow-left-top",variant:"flat",onClick:p[0]||(p[0]=()=>c.$router.push(encodeURI("/données/")))}))]),e(ua,{"src-image":a(U),"img-defaut":a(Ve),editable:!!a(j),"taille-avatar":a(f)?275:175,"max-taille-image":a(ra),onImageChangee:p[1]||(p[1]=i=>K(i))},null,8,["src-image","img-defaut","editable","taille-avatar","max-taille-image"]),P("div",Ja,[e(Ie,{"etiquette-nom":a(d)("objet.étiquetteNom"),"indice-nom":a(d)("objet.indiceNom"),"indice-langue":a(d)("objet.indiceLangue"),"texte-aucun-nom":a(d)("objet.texteAucunNom"),"noms-initiaux":a(T),titre:a(d)("objet.titreDialogueNoms"),"sous-titre":a(d)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!a(j),onAjusterNoms:L},{activator:t(({props:i})=>[P("span",x(i,{class:"text-h4"}),[D(V(a(A)||a(d)("bds.sansNom"))+" ",1),e(B,{icon:a(j)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),e(ca,{id:c.id},null,8,["id"]),e(Q)]),P("div",Ya,[e(Le,{"n-max":5,items:a(M)},{jeton:t(({id:i})=>[e(Ne,{id:i},{activator:t(({props:n})=>[e(fa,x(n,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:t(({id:i})=>[e(Ne,{id:i},{activator:t(({props:n})=>[e(ma,x(n,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),a(M)&&!a(M).length?(u(),le("span",et,V(a(d)("bds.aucunMotClef")),1)):h("",!0),a(j)&&a(M)?(u(),v(va,{key:1,originaux:a(M),onSauvegarder:p[2]||(p[2]=i=>se(i))},null,8,["originaux"])):h("",!0)]),P("div",at,[e(ba,{"id-bd":c.id},{activator:t(({props:i})=>[e(ne,{"open-delay":"200",location:"bottom",text:a(d)("épingler.épingler")},{activator:t(({props:n})=>[e(B,x({...i,...n},{icon:"",variant:"flat"}),{default:t(()=>[e(pa,{id:c.id},null,8,["id"])]),_:2},1040)]),_:2},1032,["text"])]),_:1},8,["id-bd"]),e(He,{"id-objet":c.id,"noms-objet":a(T),"type-objet":"bd"},{activator:t(({props:i})=>[e(ne,{text:a(d)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:n})=>[e(B,x({...i,...n},{icon:"mdi-download",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet","noms-objet"]),e(Ga,{id:c.id},{activator:t(({props:i})=>[e(ne,{text:a(d)("code.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:n})=>[e(B,x({...i,...n},{icon:"mdi-xml",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id"]),h("",!0),a(j)?(u(),v(Qe,{key:1,onEffacer:z},{activator:t(({props:i})=>[e(ne,{"open-delay":"200",location:"bottom",text:a(d)("effacer.indice")},{activator:t(({props:n})=>[e(B,x({...i,...n},{variant:"flat",icon:""}),{default:t(()=>[e(H,{color:"error"},{default:t(()=>p[7]||(p[7]=[D("mdi-delete")])),_:1})]),_:2},1040)]),_:2},1032,["text"])]),_:1})):h("",!0)]),e(ce),e(fe,null,{default:t(()=>[e(Ie,{"etiquette-nom":a(d)("objet.étiquetteDescription"),"indice-nom":a(d)("objet.indiceDescription"),"indice-langue":a(d)("objet.indiceLangue"),"texte-aucun-nom":a(d)("objet.texteAucuneDescription"),"noms-initiaux":a(G),titre:a(d)("objet.titreDialogueDescriptions"),"sous-titre":a(d)("objet.sousTitreDialogueDescriptions"),"autorisation-modification":!!a(j),longue:"",onAjusterNoms:oe},{activator:t(({props:i})=>[P("span",{class:_a({"text-disabled":!a(be)})},V(a(be)||a(d)("communs.baseCarteObjet.sansDescription")),3),e(B,x(i,{icon:a(j)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"}),null,16,["icon"])]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),P("p",tt,V(a(d)("bds.info")),1),e(ce,{class:"mb-2"}),P("div",it,[a(ae)&&(a(ae).statut!=="active"||a(j))?(u(),v(F,{key:0,flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(Ha,{"id-bd":c.id},{activator:t(({props:i})=>[e(La,x(i,{"type-objet":"bd",statut:a(ae)}),null,16,["statut"])]),_:1},8,["id-bd"])]),_:1})):h("",!0),e(F,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(Qa,{"id-bd":c.id},{activator:t(({props:i})=>[e(Wa,x(i,{id:c.id}),null,16,["id"])]),_:1},8,["id-bd"])]),_:1}),e(F,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(ya,{id:c.id,auteurs:a(re),"permission-moderateur":a(j)==="MODÉRATEUR"},{activator:t(({props:i})=>[e(Pa,x(i,{auteurs:a(re)}),null,16,["auteurs"])]),_:1},8,["id","auteurs","permission-moderateur"])]),_:1}),e(F,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(ze,{licence:a(_e),"licence-contenu":a(ye),"permission-modifier":a(j)==="MODÉRATEUR",onChangerLicence:te},{activator:t(({props:i})=>[e(Ka,x(i,{licence:a(_e),onChangerLicence:te}),null,16,["licence"])]),_:1},8,["licence","licence-contenu","permission-modifier"])]),_:1}),e(F,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(S,{id:c.id},{activator:t(({props:i})=>[e(Oa,x(i,{id:c.id}),null,16,["id"])]),_:1},8,["id"])]),_:1}),e(F,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(w,{"id-objet":c.id,permission:a(j),"type-objet":"bd"},{activator:t(({props:i})=>[e(Ra,x(i,{"id-objet":c.id}),null,16,["id-objet"])]),_:1},8,["id-objet","permission"])]),_:1})]),P("p",lt,V(a(d)("bds.variables")),1),e(ce,{class:"mb-2"}),e(Le,{"n-max":5,items:a(X)},{jeton:t(({id:i})=>[e(Oe,{id:i},{activator:t(({props:n})=>[e(xa,x(n,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:t(({id:i})=>[e(Oe,{id:i},{activator:t(({props:n})=>[e(ga,x(n,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),a(X)?.length?h("",!0):(u(),le("p",nt,V(a(d)("bds.aucuneVariable")),1)),e(qe,null,{default:t(()=>[P("p",ot,V(a(d)("bds.tableaux")),1),e(ce),a(f)?(u(),v(za,{key:0,modelValue:$.value,"onUpdate:modelValue":p[4]||(p[4]=i=>$.value=i),class:"mt-2"},{default:t(()=>[(u(!0),le(we,null,me(a(q),i=>(u(),v(Fa,{key:i.clef,value:i.clef,color:"primary",size:"small",density:"compact"},{default:t(()=>[e(Ue,{id:i.id,clef:i.clef},null,8,["id","clef"])]),_:2},1032,["value"]))),128)),e($e,{onSauvegarder:de},{activator:t(({props:i})=>[a(j)?(u(),v(je,x({key:0},i,{"append-icon":R.value?void 0:"mdi-plus",disabled:R.value,variant:"text",class:"mx-1 my-auto",size:"x-large",label:"",onClick:p[3]||(p[3]=Ba(()=>{},["stop"]))}),{default:t(()=>[D(V(a(d)("tableaux.nouveau"))+" ",1),R.value?(u(),v(Y,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):h("",!0)]),_:2},1040,["append-icon","disabled"])):h("",!0)]),_:1})]),_:1},8,["modelValue"])):(u(),v(Ca,{key:1,modelValue:$.value,"onUpdate:modelValue":p[5]||(p[5]=i=>$.value=i),class:"mt-4","show-arrows":"","center-active":""},{default:t(()=>[(u(!0),le(we,null,me(a(q),i=>(u(),v(Me,{key:i.clef,value:i.clef},{default:t(({isSelected:n,toggle:o})=>[e(je,{class:"mx-1",variant:"tonal",label:"",active:!1,color:n?"primary":"",onClick:o},{default:t(()=>[e(Ue,{id:i.id,clef:i.clef},null,8,["id","clef"])]),_:2},1032,["color","onClick"])]),_:2},1032,["value"]))),128)),e(Me,{key:"nouveau",value:"nouveau"},{default:t(()=>[e($e,{onSauvegarder:de},{activator:t(({props:i})=>[a(j)?(u(),v(je,x({key:0},i,{"append-icon":R.value?void 0:"mdi-plus",variant:"tonal",class:"mx-1",label:"",disabled:R.value}),{default:t(()=>[D(V(a(d)("tableaux.nouveau"))+" ",1),R.value?(u(),v(Y,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):h("",!0)]),_:2},1040,["append-icon","disabled"])):h("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])),a(q)&&!a(q).length?(u(),le("div",st,[P("p",dt,V(a(d)("tableaux.aucun")),1),e(ka,{src:a(O),class:"my-5",contain:"",height:"175px"},null,8,["src"]),e($e,{onSauvegarder:de},{activator:t(({props:i})=>[a(j)?(u(),v(B,x({key:0},i,{color:"primary",class:"mx-2",variant:"outlined"}),{prepend:t(()=>[e(H,{icon:"mdi-table",start:""})]),default:t(()=>[D(" "+V(a(d)("tableaux.nouveau")),1)]),_:2},1040)):h("",!0)]),_:1})])):h("",!0)]),_:1}),e(Va,{modelValue:$.value,"onUpdate:modelValue":p[6]||(p[6]=i=>$.value=i)},{default:t(()=>[(u(!0),le(we,null,me(a(q),i=>(u(),v(Ta,{key:i.clef,value:i.clef},{default:t(()=>[e(Za,{"id-tableau":i.id,"id-bd":c.id},null,8,["id-tableau","id-bd"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{kt as default};
//# sourceMappingURL=PageBd-DPCfQzRI.js.map
