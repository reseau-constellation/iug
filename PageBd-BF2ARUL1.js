import{d as H,ம as de,p as re,s as C,q as v,c as b,a as r,w as t,f as A,b as e,t as T,h as a,R as ae,X as Ce,A as F,F as w,M as Q,K as B,N as ie,Q as be,aq as Ae,H as xe,I as se,J as ue,az as De,n as Se,r as S,x as Te,V as G,i as ke,e as je,y as J,j as k,m as _e,Z as ve,B as ee,bB as oe,bC as ze,G as K,v as Ie,bD as Xe,aj as Ee,ak as Ze,al as Ye,bE as Fe,bF as ea,bG as aa,aO as ta,bH as ia,ah as Ne,z as M,S as na,ai as te,bI as Ge,u as la,o as oa,aB as sa,bJ as ua,aF as da,bK as ra,aY as ca,aZ as ma,a_ as Pe,a$ as fa,bt as Le,bu as pa,bL as va,bM as Me,bN as ba,bO as _a,bP as xa,a8 as ya,bQ as ga,bR as Ba,bv as Oe,bw as Ca,bS as Ta,O as we,a2 as ka,b0 as ja,aE as Va,T as $a,b1 as Re,W as wa}from"./index-BdoT-3OI.js";import{u as ha}from"./historiqueDocuments-BRTavNO9.js";import{_ as Qe,a as He,t as Ea,V as Aa,E as Da,b as Sa,c as We,d as Ia,e as Na,f as Pa,g as La,h as Ma,i as Oa,j as Ra,k as Ue}from"./VBreadcrumbs-BR2tmbFC.js";import{_ as Ua,a as qa,b as za,c as Fa}from"./OptionsFormatExportation.vue_vue_type_script_setup_true_lang-C8XTL7s7.js";import{_ as Ga}from"./ChoisirStatut.vue_vue_type_script_setup_true_lang-BCBRkNNi.js";import{a as Qa,b as he}from"./SélecteurNuée.vue_vue_type_script_setup_true_lang-CQsdaRUD.js";import{V as Ha}from"./VSwitch-CsKfk7Sw.js";import{V as Wa,a as Ja}from"./VTabs-CjFPSpmy.js";import{V as qe}from"./VSlideGroupItem-DC0QCrnk.js";import"./RésultatRechercheProjet.vue_vue_type_script_setup_true_lang-CCE531uA.js";import"./CarteProjet.vue_vue_type_script_setup_true_lang-BE3_ixyA.js";import"./NouveauProjet.vue_vue_type_script_setup_true_lang-C8TpYpUf.js";import"./RésultatRechercheNuée.vue_vue_type_script_setup_true_lang-C1CSmXXZ.js";import"./CarteNuée.vue_vue_type_script_setup_true_lang-Dp9Kjtg1.js";const Ka={key:0,class:"text-disabled text-h6 text-center"},Xa={key:0,class:"text-disabled text-h6 text-center"},Za=H({__name:"CarteAutomatisationsBd",props:{idBd:{}},setup(I){const o=I,{$மொ:l}=de(),f=re(),_=C(f.automatisations.suivreAutomatisations),u=C(f.bds.suivreTableauxBd,{idBd:v(()=>o.idBd)}),d=v(()=>{const V=(u.value||[]).filter(g=>g.id).map(g=>g.id);return _.value?.filter(g=>V.includes(g.type==="exportation"?g.idObjet:g.idTableau))}),h=v(()=>d.value?.filter(V=>V.type==="importation")||[]),P=v(()=>d.value?.filter(V=>V.type==="exportation")||[]);return(V,g)=>(r(),b(Qe,{"type-objet":"bd","id-objet":V.idBd},{activateur:t(({props:x})=>[xe(V.$slots,"activateur",se(ue({props:x})))]),default:t(()=>[A(" "+T(a(l)("automatisations.carte.importations"))+" ",1),e(ae),e(Ce,null,{default:t(()=>[e(Ua,{"id-bd":V.idBd},{activateur:t(({props:x})=>[e(Q,B(x,{"prepend-icon":"mdi-upload-outline",title:a(l)("automatisations.carte.bds.ajouterImportationTableau")}),null,16,["title"])]),_:1},8,["id-bd"]),(r(!0),F(be,null,ie(h.value,x=>(r(),b(za,{key:x.id,specification:x},null,8,["specification"]))),128)),h.value.length?w("",!0):(r(),F("p",Ka,T(a(l)("automatisations.carte.bds.aucuneImportationTableau")),1))]),_:1}),A(" "+T(a(l)("automatisations.carte.bds.exportationsTableaux"))+" ",1),e(ae),e(Ce,null,{default:t(()=>[e(qa,{"id-bd":V.idBd},{activateur:t(({props:x})=>[e(Q,B({"prepend-icon":"mdi-download-outline"},x),{default:t(()=>[e(Ae,null,{default:t(()=>[A(T(a(l)("automatisations.carte.bds.ajouterExportationTableau")),1)]),_:1})]),_:2},1040)]),_:1},8,["id-bd"]),(r(!0),F(be,null,ie(P.value,x=>(r(),b(Fa,{key:x.id,specification:x},null,8,["specification"]))),128)),P.value.length?w("",!0):(r(),F("p",Xa,T(a(l)("automatisations.carte.bds.aucuneExportationTableau")),1))]),_:1})]),_:3},8,["id-objet"]))}}),Ya=H({__name:"CarteCodeBd",props:{id:{}},setup(I){const o=I,{மொழி:l,மாற்றுமொழிகள்:f}=De(),_=v(()=>[l.value,...f.value]),u=v(()=>({ts:`import { créerConstellation } from "@constl/ipa";

const client = créerConstellation();

const monAnalyse = async (données) => {
  console.log(données)
  // Faire quelque chose...
}

const fOublier = client.bds.suivreDonnéesExportation({
  idBd: "${o.id}",
  langues: [${_.value.map(d=>'"'+d+'"').join(", ")}]  // Modifier langues selon vos besoins
  f: monAnalyse
})
`,py:`from constellationPy import Serveur, ClientSync, tableau_exporté_à_pandas
    
with Serveur():
    client = ClientSync()

    données = client.obt_données_bd(
      idBd="${o.id}",
      # Modifier langues selon vos besoins
      langues=[${_.value.map(d=>'"'+d+'"').join(", ")}]
    )

    # Exporter les données
    données.exporter("fichier.ods")  # ou bien "fichier.xlsx" pour Excel

    # Accéder à un tableau en format pandas
    données_tableau = tableau_exporté_à_pandas(données["Un tableau"])
    
`,julia:`import Constellation

Constellation.avecServeur() do port
  Constellation.avecClient(port) do client

    oublier = Constellation.suivre(
        client, 
        "bds.suivreDonnéesExportation", 
        Dict([("idBd","${o.id}")])
    ) do résultat
        print(résultat)
    end
  end
end
`,r:`library(constellationR)

constellationR::avecClientEtServeur(
  function (client) {
    
    données <- client$appeler(
      "bds.suivreDonnéesExportation", 
      list(idBd="${o.id}")
    )
  }
)
`}));return(d,h)=>(r(),b(He,{codes:u.value,"langage-defaut":"py"},{activateur:t(({props:P})=>[xe(d.$slots,"activateur",se(ue({props:P})))]),_:3},8,["codes"]))}}),et=H({__name:"CarteQualitéBd",props:{idBd:{}},setup(I){const{mdAndUp:o}=Se(),{$மொ:l}=de(),f=I,_=re(),u=S(!1),d=C(_.bds.suivreQualitéBd,{idBd:v(()=>f.idBd)}),h=C(_.bds.suivreLicenceBd,{idBd:v(()=>f.idBd)}),P=C(_.bds.suivreLicenceContenuBd,{idBd:v(()=>f.idBd)}),V=C(_.suivrePermission,{idObjet:v(()=>f.idBd)});return(g,x)=>(r(),b(Te,{modelValue:u.value,"onUpdate:modelValue":x[1]||(x[1]=E=>u.value=E),"max-width":a(o)?500:300},{activator:t(({props:E})=>[xe(g.$slots,"activateur",se(ue({props:E})))]),default:t(()=>[e(G,null,{default:t(()=>[e(ke,null,{default:t(()=>[e(je,{class:"d-flex align-center"},{default:t(()=>[A(T(a(l)("bds.qualité.titre"))+" ",1),e(J),e(k,{icon:"mdi-close",size:"small",variant:"flat",onClick:x[0]||(x[0]=E=>u.value=!1)})]),_:1})]),_:1}),e(_e,null,{default:t(()=>[e(Ce,null,{default:t(()=>[e(Q,null,{prepend:t(()=>[e(ve,null,{default:t(()=>[e(ee,{"model-value":(a(d)?.total||0)*100,width:5,indeterminate:a(d)?.total===void 0,color:a(oe)(a(d)?.total).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>x[2]||(x[2]=[A("Score total")])),_:1}),e(ae),e(Q,null,{prepend:t(()=>[e(ve,null,{default:t(()=>[e(ee,{"model-value":(a(d)?.accès||0)*100,width:5,indeterminate:a(d)?.accès===void 0,color:a(oe)(a(d)?.accès).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>x[3]||(x[3]=[A("Accessibilité")])),_:1}),e(ze,{licence:a(h),"licence-contenu":a(P),"permission-modifier":!!a(V)},{activateur:t(({props:E})=>[e(Q,se(ue(E)),{prepend:t(()=>[e(ve,null,{default:t(()=>[a(d)?.licence===void 0?(r(),b(ee,{key:0,width:5,indeterminate:"",color:a(oe)(a(d)?.licence).couleur},null,8,["color"])):w("",!0),e(K,{icon:a(d)?.licence?"mdi-check":"mdi-alert-circle-outline",color:a(oe)(a(d)?.licence).couleur},null,8,["icon","color"])]),_:1})]),title:t(()=>[A(T(a(d)?.licence===void 0?a(l)("bds.qualité.rechercheLicence"):a(d).licence?a(l)("bds.qualité.licenceOuverte"):a(l)("bds.qualité.licenceNonReconnue")),1)]),_:2},1040)]),_:1},8,["licence","licence-contenu","permission-modifier"]),e(Q,null,{prepend:t(()=>[e(ve,null,{default:t(()=>[e(ee,{"model-value":(a(d)?.valide||0)*100,width:5,indeterminate:a(d)?.valide===void 0,color:a(oe)(a(d)?.valide).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>x[4]||(x[4]=[A("Validation données")])),_:1}),e(Q,null,{prepend:t(()=>[e(ve,null,{default:t(()=>[e(ee,{"model-value":(a(d)?.couverture||0)*100,width:5,indeterminate:a(d)?.couverture===void 0,color:a(oe)(a(d)?.couverture).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>x[5]||(x[5]=[A("Couverture tests")])),_:1})]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),at=H({__name:"CarteStatutBd",props:{idBd:{}},setup(I){const o=I,{$மொ:l}=de(),{mdAndUp:f}=Se(),_=re(),u=S(!1),d=C(_.bds.suivreStatutBd,{idBd:v(()=>o.idBd)}),h=S();Ie(()=>{h.value=d.value});const P=v(()=>d.value?.statut!==h.value?.statut||d.value?.idNouvelle!==h.value?.idNouvelle),V=S(!1),g=async()=>{V.value=!0,h.value&&await _.bds.changerStatutBd({idBd:o.idBd,statut:Fe(h.value)}),V.value=!1,u.value=!1};return(x,E)=>(r(),b(Te,{modelValue:u.value,"onUpdate:modelValue":E[3]||(E[3]=L=>u.value=L)},{activator:t(({props:L})=>[xe(x.$slots,"activateur",se(ue({props:L})))]),default:t(()=>[e(G,{class:"mx-auto","min-width":a(f)?500:300},{default:t(()=>[e(ke,null,{default:t(()=>[e(je,null,{default:t(()=>[A(T(a(l)("données.statut.carte.titre")),1)]),_:1})]),_:1}),e(_e,null,{default:t(()=>[e(Ga,{initial:h.value,onChoisir:E[0]||(E[0]=L=>h.value=L)},{sélecteur:t(({choisirNouvelle:L})=>[e(Xe,{multiples:!1,onSelectionnee:W=>L(W[0])},null,8,["onSelectionnee"])]),_:1},8,["initial"])]),_:1}),e(Ee,null,{default:t(()=>[e(J),e(Ze,{onClick:E[1]||(E[1]=L=>u.value=!1)}),e(Ye,{actif:P.value,"en-attente":V.value,onClick:E[2]||(E[2]=()=>g())},null,8,["actif","en-attente"])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),tt=H({__name:"ItemQualitéBd",props:{id:{}},setup(I){return(o,l)=>(r(),b(Q,null,{prepend:t(()=>[e(aa,{id:o.id},null,8,["id"])]),default:t(()=>[e(Ae,null,{default:t(()=>[e(ea,{id:o.id},null,8,["id"])]),_:1})]),_:1}))}}),it=H({__name:"ItemLicence",props:{licence:{}},setup(I){const o=re(),{$மொ:l}=de(),f=I,_=C(o.licences.suivreLicences),u=v(()=>!!(f.licence&&_.value&&Object.keys(_.value).includes(f.licence)));return(d,h)=>(r(),b(Q,null,{prepend:t(()=>[e(K,{start:"",color:u.value?"primary":"error"},{default:t(()=>[A(T(u.value?"mdi-scale-balance":"mdi-alert"),1)]),_:1},8,["color"])]),default:t(()=>[e(Ae,null,{default:t(()=>[A(T(u.value?a(l)(`licences.info.${d.licence}.abr`):d.licence),1)]),_:1})]),_:1}))}}),nt=H({__name:"CarteCodeTableau",props:{idTableau:{}},setup(I){const o=I,{மொழி:l,மாற்றுமொழிகள்:f}=De(),_=v(()=>[l.value,...f.value]),u={ts:`import { créerConstellation } from "@constl/ipa";

const client = créerConstellation();

const monAnalyse = async (données) => {
  console.log(données)
  // Faire quelque chose...
}

const fOublier = client.tableaux.suivreDonnéesExportation({
  idTableau: "${o.idTableau}",
  langues: [${_.value.map(d=>'"'+d+'"').join(", ")}]  // Modifier langues selon vos besoins
  f: monAnalyse
});
`,py:`from constellationPy import Serveur, ClientSync

with Serveur():
    client = ClientSync()

    données = client.obt_données_tableau(
      idTableau="${o.idTableau}"
      # Modifier langues selon vos besoins
      langues=[${_.value.map(d=>'"'+d+'"').join(", ")}]
    )

    # Analyser ou sauvegarder les données ici...
    données.to_excel("./MesDonnéesExportées.xlsx")
`,julia:`import Constellation

Constellation.avecServeur() do port
  Constellation.avecClient(port) do client

    oublier = Constellation.suivre(
        client, 
        "tableaux.suivreDonnéesExportation", 
        Dict([
          ("idTableau","${o.idTableau}"),
          ("langues", [${_.value.map(d=>'"'+d+'"').join(", ")}])
        ])
    ) do résultat
        print(résultat)
    end
  end
end

`,r:`library(constellationR)

constellationR::avecClientEtServeur(
  function (client) {
    
    données <- client$appeler(
      "tableaux.suivreDonnéesExportation", 
      list(
        idTableau="${o.idTableau}",
        langues=c(${_.value.map(d=>'"'+d+'"').join(", ")})
      )
    )
  }
)

`};return(d,h)=>(r(),b(He,{codes:u,"langage-defaut":"py"},{activateur:t(({props:P})=>[xe(d.$slots,"activateur",se(ue({props:P})))]),_:3}))}}),lt={class:"my-4 text-h6 text-disabled"},ot=H({__name:"TableauBd",props:{idTableau:{},idBd:{}},setup(I){const{$மொ:o}=de(),l=re(),f=I,_=C(l.suivrePermission,{idObjet:v(()=>f.idTableau)}),u=C(l.tableaux.suivreNomsTableau,{idTableau:v(()=>f.idTableau)}),d=C(l.tableaux.suivreVariables,{idTableau:v(()=>f.idTableau)}),h=C(l.tableaux.suivreColonnesTableau,{idTableau:v(()=>f.idTableau)}),P=C(l.tableaux.suivreColonnesEtCatégoriesTableau,{idTableau:v(()=>f.idTableau)}),V=v(()=>(h.value||[]).map(c=>{const s=P.value?.find(n=>n.id===c.id)?.catégorie;return{key:c.id,sortable:s===void 0||(s?.type==="simple"?Ea(s.catégorie):!1),info:{index:c.index,catégorie:s,variable:c.variable}}})),g=v(()=>{const c={key:"actions",sortable:!1,info:{}};return[...V.value,c]}),x=async({idVariable:c,idColonne:s,index:n,règles:m})=>{s=await l.tableaux.ajouterColonneTableau({idTableau:f.idTableau,idVariable:c,idColonne:s}),n&&await l.tableaux.changerColIndex({idTableau:f.idTableau,idColonne:s,val:!0});for(const $ of m)await l.tableaux.ajouterRègleTableau({idTableau:f.idTableau,idColonne:s,règle:$})},E=async({idColonne:c,index:s,règles:n})=>{await l.tableaux.changerColIndex({idTableau:f.idTableau,idColonne:c,val:s});for(const m of n.nouvelles)await l.tableaux.ajouterRègleTableau({idTableau:f.idTableau,idColonne:c,règle:m});for(const m of n.àEffacer)await l.tableaux.effacerRègleTableau({idTableau:f.idTableau,idRègle:m})},L=async({idColonne:c})=>{await l.tableaux.effacerColonneTableau({idTableau:f.idTableau,idColonne:c})},W=C(l.tableaux.suivreDonnées,{idTableau:v(()=>f.idTableau)}),ye=v(()=>{const c=W.value?.toSorted((n,m)=>ce.value&&ce.value.map($=>n.données[$.key]===void 0?m.données[$.key]===void 0?0:$.order==="asc"?1:-1:m.données[$.key]===void 0?n.données[$.key]===void 0?0:$.order==="asc"?-1:1:n.données[$.key]>m.données[$.key]?$.order==="asc"?1:-1:n.données[$.key]<m.données[$.key]?$.order==="asc"?-1:1:0).find($=>$!==0)||0),s={id:"-1",données:{}};return X.value&&c?[s,...c]:c}),ce=S(),R=S([]),Ve=C(l.tableaux.suivreRègles,{idTableau:v(()=>f.idTableau)}),X=S(!1),ne=S(!1),Z=S(),U=v(()=>{const c=[];for(const[s,n]of Object.entries(Z.value||{})){const m=W.value?.find($=>$.id===s);m&&q({modifs:n,original:m.données})&&c.push({idÉlément:s,vals:n})}return c}),me=v(()=>U.value.length+(Object.keys(D.value).length?1:0)),q=({modifs:c,original:s})=>Object.keys(c).some(n=>s[n]!==c[n]),D=S({});Ie(()=>{X.value||(D.value={})});const O=v(()=>Object.keys(D.value).length>0),fe=({val:c,idCol:s,idÉlément:n})=>{if(n==="-1")c!==void 0?D.value[s]=c:delete D.value[s];else{const m=Z.value||{};m[n]||(m[n]={}),m[n][s]=c,Z.value=m}},pe=async({vals:c})=>Object.fromEntries(await Promise.all(Object.entries(c).map(async([s,n])=>{if(n instanceof File){const m=await l.ajouterÀSFIP({contenu:new Uint8Array(await n.arrayBuffer()),nomFichier:n.name});return[s,m]}else return[s,n]}))),ge=async()=>{ne.value=!0;for(const{idÉlément:c,vals:s}of U.value)await l.tableaux.modifierÉlément({idTableau:f.idTableau,idÉlément:c,vals:await pe({vals:s})});O.value&&await Be(),Z.value=void 0,ne.value=!1},Be=async()=>{await l.tableaux.ajouterÉlément({idTableau:f.idTableau,vals:await pe({vals:D.value})}),D.value={}},le=S(!1),Y=S(!1),z=S(!1),p=S(!1),y=S(!1);ta([p,y],()=>{le.value=Y.value});const N=async({idÉlément:c})=>{z.value=!0,await l.tableaux.effacerÉlément({idTableau:f.idTableau,idÉlément:c}),z.value=!1},i=async()=>{z.value=!0,await Promise.all(R.value.map(c=>N({idÉlément:c}))),R.value=[],z.value=!1},j=async()=>{await l.bds.effacerTableauBd({idBd:f.idBd,idTableau:f.idTableau})};return(c,s)=>(r(),b(Aa,{modelValue:R.value,"onUpdate:modelValue":s[13]||(s[13]=n=>R.value=n),headers:g.value,items:ye.value,"show-select":!!a(_),"multi-sort":"","onUpdate:sortBy":s[14]||(s[14]=n=>ce.value=n)},ia({top:t(()=>[e(Ia,{flat:"",density:"compact"},{default:t(()=>[e(J),a(_)?(r(),b(k,{key:0,icon:"",disabled:!me.value,onClick:s[0]||(s[0]=()=>ge())},{default:t(()=>[me.value?(r(),b(na,{key:0,color:"success",content:me.value},{default:t(()=>[e(K,{color:"primary",icon:"mdi-content-save-outline"})]),_:1},8,["content"])):(r(),b(K,{key:1,color:"primary",icon:"mdi-content-save-check-outline"}))]),_:1},8,["disabled"])):w("",!0),a(_)?(r(),b(Ha,{key:1,modelValue:X.value,"onUpdate:modelValue":s[1]||(s[1]=n=>X.value=n),class:"me-4",density:"compact",color:"primary","true-icon":"mdi-pencil-outline","false-icon":"mdi-pencil-off-outline","hide-details":""},null,8,["modelValue"])):w("",!0),a(_)?(r(),b(Qa,{key:2,"id-tableau":c.idTableau,"variables-interdites":a(d),onNouvelle:s[2]||(s[2]=n=>x(n))},{activateur:t(({props:n})=>[e(k,B(n,{icon:"mdi-table-column-plus-after"}),null,16)]),_:1},8,["id-tableau","variables-interdites"])):w("",!0),e(nt,{"id-tableau":c.idTableau,"pour-nuee":!1},{activateur:t(({props:n})=>[e(te,{text:a(o)("code.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:m})=>[e(k,B({...n,...m},{icon:"mdi-xml",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-tableau"]),e(Qe,{"id-objet":c.idTableau,"type-objet":"tableau"},{activateur:t(({props:n})=>[e(te,{text:a(o)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:m})=>[e(k,B({...n,...m},{icon:"mdi-sync"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet"]),e(We,{"id-objet":c.idTableau,"noms-objet":a(u),"type-objet":"tableau"},{activateur:t(({props:n})=>[e(te,{text:a(o)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:m})=>[e(k,B({...n,...m},{icon:"mdi-download"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet","noms-objet"]),a(_)?(r(),b(Ge,{key:3,onEffacer:s[3]||(s[3]=()=>j())},{activateur:t(({props:n})=>[e(k,B(n,{icon:"mdi-delete",color:"error"}),null,16)]),_:1})):w("",!0)]),_:1})]),"no-data":t(()=>[M("p",lt,T(a(o)("tableaux.aucuneDonnée")),1),w("",!0)]),"item.actions":t(({item:n})=>[n.id==="-1"?(r(),b(k,{key:0,disabled:!O.value,icon:"mdi-content-save-outline",size:"small",variant:"flat",onClick:s[9]||(s[9]=()=>Be())},null,8,["disabled"])):le.value&&a(_)?(r(),b(k,{key:1,size:"small",icon:"mdi-delete",variant:"flat",loading:z.value,onClick:()=>N({idÉlément:n.id})},null,8,["loading","onClick"])):a(_)?(r(),b(Te,{key:2,modelValue:p.value,"onUpdate:modelValue":s[12]||(s[12]=m=>p.value=m)},{activator:t(({props:m})=>[e(k,B(m,{variant:"flat",icon:"mdi-delete",size:"small",loading:z.value}),null,16,["loading"])]),default:t(()=>[e(G,{class:"mx-auto","max-width":"450"},{default:t(()=>[e(ke,null,{default:t(()=>[e(je,null,{default:t(()=>[A(T(a(o)("tableaux.données.titreEffacer")),1)]),_:1})]),_:1}),e(_e,null,{default:t(()=>[e(Ne,{modelValue:Y.value,"onUpdate:modelValue":s[10]||(s[10]=m=>Y.value=m),label:a(o)("tableaux.données.nePlusConfirmerEffacer")},null,8,["modelValue","label"])]),_:1}),e(Ee,null,{default:t(()=>[e(J),e(k,{variant:"text",text:a(o)("communs.oui"),onClick:()=>{N({idÉlément:n.id}),p.value=!1}},null,8,["text","onClick"]),e(k,{variant:"text",color:"primary",text:a(o)("communs.non"),onClick:s[11]||(s[11]=m=>p.value=!1)},null,8,["text"]),e(J)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])):w("",!0)]),_:2},[ie(V.value||[],n=>({name:`header.${n.key}`,fn:t(({column:m,isSorted:$,getSortIcon:Je,toggleSort:Ke})=>[e(Da,{"id-colonne":n.key,"id-variable":n.info.variable,"id-tableau":c.idTableau,index:!!n.info.index,regles:a(Ve)?.filter($e=>$e.colonne===n.key),"permission-modifier":!!a(_),ordonnable:m.sortable,"est-ordonnee":$(m),"icone-ordonner":Je(m),onBasculerOrdonner:()=>Ke(m),onSauvegarder:$e=>E({idColonne:n.key,...$e}),onEffacer:()=>L({idColonne:n.key})},null,8,["id-colonne","id-variable","id-tableau","index","regles","permission-modifier","ordonnable","est-ordonnee","icone-ordonner","onBasculerOrdonner","onSauvegarder","onEffacer"])])})),a(_)?{name:"header.actions",fn:t(()=>[le.value?(r(),b(k,{key:0,icon:"mdi-delete",variant:"flat",size:"small",loading:z.value,readonly:!R.value.length,onClick:s[4]||(s[4]=()=>i())},null,8,["loading","readonly"])):(r(),b(Te,{key:1,modelValue:y.value,"onUpdate:modelValue":s[8]||(s[8]=n=>y.value=n)},{activator:t(({props:n})=>[e(k,B(n,{icon:"",variant:"flat",size:"small",readonly:!R.value.length,loading:z.value}),{default:t(()=>[e(K,{icon:"mdi-delete",color:R.value.length?void 0:"disabled"},null,8,["color"])]),_:2},1040,["readonly","loading"])]),default:t(()=>[e(G,{class:"mx-auto","max-width":"450"},{default:t(()=>[e(ke,null,{default:t(()=>[e(je,null,{default:t(()=>[A(T(a(o)("tableaux.données.titreEffacerSélectionnées",R.value.length)),1)]),_:1})]),_:1}),e(_e,null,{default:t(()=>[e(Ne,{modelValue:Y.value,"onUpdate:modelValue":s[5]||(s[5]=n=>Y.value=n),label:a(o)("tableaux.données.nePlusConfirmerEffacer")},null,8,["modelValue","label"])]),_:1}),e(Ee,null,{default:t(()=>[e(J),e(k,{variant:"text",text:a(o)("communs.oui"),onClick:s[6]||(s[6]=()=>{i(),y.value=!1})},null,8,["text"]),e(k,{variant:"text",color:"primary",text:a(o)("communs.non"),onClick:s[7]||(s[7]=n=>y.value=!1)},null,8,["text"]),e(J)]),_:1})]),_:1})]),_:1},8,["modelValue"]))]),key:"0"}:void 0,ie(V.value,n=>({name:`item.${n.key}`,fn:t(({item:m})=>[e(Sa,{categorie:n.info.catégorie?.catégorie,val:m.données[n.key],editable:!!a(_)&&X.value,onModifiee:({val:$})=>fe({idCol:n.key,idÉlément:m.id,val:$})},null,8,["categorie","val","editable","onModifiee"])])}))]),1032,["modelValue","headers","items","show-select"]))}}),st={class:"text-center"},ut={class:"text-center"},dt={key:0,class:"text-disabled"},rt={class:"text-center"},ct={class:"mt-6 text-h5"},mt={class:"d-flex flex-wrap"},ft={class:"mt-6 text-h5"},pt={key:0,class:"text-disabled"},vt={class:"mt-6 text-h5"},bt={key:2,class:"text-center"},_t={class:"text-h5 mt-5"},Dt=H({__name:"PageBd",props:{id:{}},setup(I){const o=I,l=re(),{mdAndUp:f}=Se(),{isRtl:_}=la(),{$மொ:u}=de(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:d}=De(),{obtImageDéco:h}=sa(),P=ha();oa(()=>{P.documentOuvert({id:o.id,à:Date.now()})});const V=h("vide"),g=C(l.suivrePermission,{idObjet:v(()=>o.id)}),x=C(l.bds.suivreNomsBd,{idBd:v(()=>o.id)}),E=d(x),L=async p=>{const{àEffacer:y,àAjouter:N}=Re({anciennes:x.value,nouvelles:p});for(const i of y)await l.bds.effacerNomBd({idBd:o.id,langue:i});await l.bds.sauvegarderNomsBd({idBd:o.id,noms:N})},W=C(l.bds.suivreDescriptionsBd,{idBd:v(()=>o.id)}),ye=d(W),ce=async p=>{const{àEffacer:y,àAjouter:N}=Re({anciennes:W.value,nouvelles:p});for(const i of y)await l.bds.effacerDescriptionBd({idBd:o.id,langue:i});await l.bds.sauvegarderDescriptionsBd({idBd:o.id,descriptions:N})},R=ua(C(l.bds.suivreImage,{idBd:v(()=>o.id)})),Ve=h("logoBD"),X=async p=>{p?await l.bds.sauvegarderImage({idBd:o.id,image:{contenu:new Uint8Array(p.contenu),nomFichier:p.fichier}}):await l.bds.effacerImage({idBd:o.id})},ne=C(l.bds.suivreStatutBd,{idBd:v(()=>o.id)}),Z=C(l.bds.suivreVariablesBd,{idBd:v(()=>o.id)}),U=C(l.bds.suivreMotsClefsBd,{idBd:v(()=>o.id)}),me=async p=>{const y=p.filter(i=>!U.value?.includes(i)),N=U.value?.filter(i=>!p.includes(i))||[];await l.bds.ajouterMotsClefsBd({idBd:o.id,idsMotsClefs:y}),await Promise.all(N.map(i=>l.bds.effacerMotClefBd({idBd:o.id,idMotClef:i})))},q=C(l.bds.suivreTableauxBd,{idBd:v(()=>o.id)}),D=S();Ie(()=>{!D.value&&q.value?.length&&(D.value=q.value[0].clef),D.value&&!q.value?.map(p=>p.clef).includes(D.value)&&(D.value=void 0)});const O=S(!1),fe=async({noms:p,cols:y})=>{O.value=!0;try{const N=await l.bds.ajouterTableauBd({idBd:o.id});await l.tableaux.sauvegarderNomsTableau({idTableau:N,noms:Fe(p)}),await Promise.all(y.map(async i=>{await l.tableaux.ajouterColonneTableau({idTableau:N,idColonne:i.info.id,idVariable:i.info.variable}),i.info.index&&await l.tableaux.changerColIndex({idTableau:N,idColonne:i.info.id,val:!0}),await Promise.all(i.règles.map(async j=>await l.tableaux.ajouterRègleTableau({idTableau:N,idColonne:i.info.id,règle:j})))}))}finally{O.value=!1}},pe=C(l.réseau.suivreAuteursBd,{idBd:v(()=>o.id)}),ge=C(l.bds.suivreLicenceBd,{idBd:v(()=>o.id)}),Be=C(l.bds.suivreLicenceContenuBd,{idBd:v(()=>o.id)}),le=async({licence:p,licenceContenu:y})=>{await l.bds.changerLicenceBd({idBd:o.id,licence:p}),y&&await l.bds.changerLicenceContenuBd({idBd:o.id,licenceContenu:y})},Y=v(()=>[{title:u("navigation.données"),href:encodeURI("/données/")},{title:E.value||u("bds.sansNom"),disabled:!0}]),z=async()=>{await l.bds.effacerBd({idBd:o.id})};return(p,y)=>{const N=Ba("carte-replications-objet");return r(),b(da,null,{default:t(()=>[M("div",null,[a(f)?(r(),b(Na,{key:0,items:Y.value,class:"pa-0"},{divider:t(()=>[e(K,null,{default:t(()=>[A(T(a(_)?"mdi-chevron-left":"mdi-chevron-right"),1)]),_:1})]),title:t(({item:i})=>[e(Pa,{disabled:i.disabled,onClick:j=>i.href&&p.$router.push(i.href)},{default:t(()=>[e(ra,{texte:i.title,"longueur-max":35},null,8,["texte"])]),_:2},1032,["disabled","onClick"])]),_:1},8,["items"])):(r(),b(k,{key:1,icon:"mdi-arrow-left-top",variant:"flat",onClick:y[0]||(y[0]=()=>p.$router.push(encodeURI("/données/")))}))]),e(ma,{"src-image":a(R),"img-defaut":a(Ve),editable:!!a(g),"taille-avatar":a(f)?275:175,"max-taille-image":a(ca),onImageChangee:y[1]||(y[1]=i=>X(i))},null,8,["src-image","img-defaut","editable","taille-avatar","max-taille-image"]),M("div",st,[e(Pe,{"etiquette-nom":a(u)("objet.étiquetteNom"),"indice-nom":a(u)("objet.indiceNom"),"indice-langue":a(u)("objet.indiceLangue"),"texte-aucun-nom":a(u)("objet.texteAucunNom"),"noms-initiaux":a(x),titre:a(u)("objet.titreDialogueNoms"),"sous-titre":a(u)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!a(g),onAjusterNoms:L},{activateur:t(({props:i})=>[M("span",B(i,{class:"text-h4"}),[A(T(a(E)||a(u)("bds.sansNom"))+" ",1),e(k,{icon:a(g)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),e(fa,{id:p.id},null,8,["id"]),e(J)]),M("div",ut,[e(Me,{"n-max":5,items:a(U)},{jeton:t(({id:i})=>[e(Le,{id:i},{activateur:t(({props:j})=>[e(va,B(j,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:t(({id:i})=>[e(Le,{id:i},{activateur:t(({props:j})=>[e(pa,B(j,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),a(U)&&!a(U).length?(r(),F("span",dt,T(a(u)("bds.aucunMotClef")),1)):w("",!0),a(g)&&a(U)?(r(),b(ba,{key:1,originaux:a(U),onSauvegarder:y[2]||(y[2]=i=>me(i))},null,8,["originaux"])):w("",!0)]),M("div",rt,[e(xa,{"id-bd":p.id},{activateur:t(({props:i})=>[e(te,{"open-delay":"200",location:"bottom",text:a(u)("épingler.épingler")},{activator:t(({props:j})=>[e(k,B({...i,...j},{icon:"",variant:"flat"}),{default:t(()=>[e(_a,{id:p.id},null,8,["id"])]),_:2},1040)]),_:2},1032,["text"])]),_:1},8,["id-bd"]),e(We,{"id-objet":p.id,"noms-objet":a(x),"type-objet":"bd"},{activateur:t(({props:i})=>[e(te,{text:a(u)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:j})=>[e(k,B({...i,...j},{icon:"mdi-download",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet","noms-objet"]),e(Ya,{id:p.id},{activateur:t(({props:i})=>[e(te,{text:a(u)("code.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:j})=>[e(k,B({...i,...j},{icon:"mdi-xml",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id"]),w("",!0),a(g)?(r(),b(Ge,{key:1,onEffacer:z},{activateur:t(({props:i})=>[e(te,{"open-delay":"200",location:"bottom",text:a(u)("effacer.indice")},{activator:t(({props:j})=>[e(k,B({...i,...j},{variant:"flat",icon:""}),{default:t(()=>[e(K,{color:"error"},{default:t(()=>y[7]||(y[7]=[A("mdi-delete")])),_:1})]),_:2},1040)]),_:2},1032,["text"])]),_:1})):w("",!0)]),e(ae),e(_e,null,{default:t(()=>[e(Pe,{"etiquette-nom":a(u)("objet.étiquetteDescription"),"indice-nom":a(u)("objet.indiceDescription"),"indice-langue":a(u)("objet.indiceLangue"),"texte-aucun-nom":a(u)("objet.texteAucuneDescription"),"noms-initiaux":a(W),titre:a(u)("objet.titreDialogueDescriptions"),"sous-titre":a(u)("objet.sousTitreDialogueDescriptions"),"autorisation-modification":!!a(g),longue:"",onAjusterNoms:ce},{activateur:t(({props:i})=>[M("span",{class:ya({"text-disabled":!a(ye)})},T(a(ye)||a(u)("communs.baseCarteObjet.sansDescription")),3),e(k,B(i,{icon:a(g)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"}),null,16,["icon"])]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),M("p",ct,T(a(u)("bds.info")),1),e(ae,{class:"mb-2"}),M("div",mt,[a(ne)&&(a(ne).statut!=="active"||a(g))?(r(),b(G,{key:0,flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(at,{"id-bd":p.id},{activateur:t(({props:i})=>[e(La,B(i,{"type-objet":"bd",statut:a(ne)}),null,16,["statut"])]),_:1},8,["id-bd"])]),_:1})):w("",!0),e(G,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(et,{"id-bd":p.id},{activateur:t(({props:i})=>[e(tt,B(i,{id:p.id}),null,16,["id"])]),_:1},8,["id-bd"])]),_:1}),e(G,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(ga,{id:p.id,auteurs:a(pe),"permission-moderateur":a(g)==="MODÉRATEUR"},{activateur:t(({props:i})=>[e(Ma,B(i,{auteurs:a(pe)}),null,16,["auteurs"])]),_:1},8,["id","auteurs","permission-moderateur"])]),_:1}),e(G,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(ze,{licence:a(ge),"licence-contenu":a(Be),"permission-modifier":a(g)==="MODÉRATEUR",onChangerLicence:le},{activateur:t(({props:i})=>[e(it,B(i,{licence:a(ge),onChangerLicence:le}),null,16,["licence"])]),_:1},8,["licence","licence-contenu","permission-modifier"])]),_:1}),e(G,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(N,{id:p.id},{activator:t(({props:i})=>[e(Oa,B(i,{id:p.id}),null,16,["id"])]),_:1},8,["id"])]),_:1}),e(G,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(Za,{"id-bd":p.id,permission:a(g),"type-objet":"bd"},{activateur:t(({props:i})=>[e(Ra,B(i,{"id-objet":p.id}),null,16,["id-objet"])]),_:1},8,["id-bd","permission"])]),_:1})]),M("p",ft,T(a(u)("bds.variables")),1),e(ae,{class:"mb-2"}),e(Me,{"n-max":5,items:a(Z)},{jeton:t(({id:i})=>[e(Oe,{id:i},{activateur:t(({props:j})=>[e(Ta,B(j,{id:i,class:"me-1 mb-1"}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:t(({id:i})=>[e(Oe,{id:i},{activateur:t(({props:j})=>[e(Ca,B(j,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),a(Z)?.length?w("",!0):(r(),F("p",pt,T(a(u)("bds.aucuneVariable")),1)),e(Ce,null,{default:t(()=>[M("p",vt,T(a(u)("bds.tableaux")),1),e(ae),a(f)?(r(),b(Wa,{key:0,modelValue:D.value,"onUpdate:modelValue":y[4]||(y[4]=i=>D.value=i),class:"mt-2"},{default:t(()=>[(r(!0),F(be,null,ie(a(q),i=>(r(),b(Ja,{key:i.clef,value:i.clef,color:"primary",size:"small",density:"compact"},{default:t(()=>[e(Ue,{id:i.id,clef:i.clef},null,8,["id","clef"])]),_:2},1032,["value"]))),128)),e(he,{onSauvegarder:fe},{activateur:t(({props:i})=>[a(g)?(r(),b(we,B({key:0},i,{"append-icon":O.value?void 0:"mdi-plus",disabled:O.value,variant:"text",class:"mx-1 my-auto",size:"x-large",label:"",onClick:y[3]||(y[3]=ka(()=>{},["stop"]))}),{default:t(()=>[A(T(a(u)("tableaux.nouveau"))+" ",1),O.value?(r(),b(ee,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):w("",!0)]),_:2},1040,["append-icon","disabled"])):w("",!0)]),_:1})]),_:1},8,["modelValue"])):(r(),b(ja,{key:1,modelValue:D.value,"onUpdate:modelValue":y[5]||(y[5]=i=>D.value=i),class:"mt-4","show-arrows":"","center-active":""},{default:t(()=>[(r(!0),F(be,null,ie(a(q),i=>(r(),b(qe,{key:i.clef,value:i.clef},{default:t(({isSelected:j,toggle:c})=>[e(we,{class:"mx-1",variant:"tonal",label:"",active:!1,color:j?"primary":"",onClick:c},{default:t(()=>[e(Ue,{id:i.id,clef:i.clef},null,8,["id","clef"])]),_:2},1032,["color","onClick"])]),_:2},1032,["value"]))),128)),e(qe,{key:"nouveau",value:"nouveau"},{default:t(()=>[e(he,{onSauvegarder:fe},{activateur:t(({props:i})=>[a(g)?(r(),b(we,B({key:0},i,{"append-icon":O.value?void 0:"mdi-plus",variant:"tonal",class:"mx-1",label:"",disabled:O.value}),{default:t(()=>[A(T(a(u)("tableaux.nouveau"))+" ",1),O.value?(r(),b(ee,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):w("",!0)]),_:2},1040,["append-icon","disabled"])):w("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])),a(q)&&!a(q).length?(r(),F("div",bt,[M("p",_t,T(a(u)("tableaux.aucun")),1),e(Va,{src:a(V),class:"my-5",contain:"",height:"175px"},null,8,["src"]),e(he,{onSauvegarder:fe},{activateur:t(({props:i})=>[a(g)?(r(),b(k,B({key:0},i,{color:"primary",class:"mx-2",variant:"outlined"}),{prepend:t(()=>[e(K,{icon:"mdi-table",start:""})]),default:t(()=>[A(" "+T(a(u)("tableaux.nouveau")),1)]),_:2},1040)):w("",!0)]),_:1})])):w("",!0)]),_:1}),e($a,{modelValue:D.value,"onUpdate:modelValue":y[6]||(y[6]=i=>D.value=i)},{default:t(()=>[(r(!0),F(be,null,ie(a(q),i=>(r(),b(wa,{key:i.clef,value:i.clef},{default:t(()=>[e(ot,{"id-tableau":i.id,"id-bd":p.id},null,8,["id-tableau","id-bd"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{Dt as default};
//# sourceMappingURL=PageBd-BF2ARUL1.js.map
