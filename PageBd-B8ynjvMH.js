import{d as J,க as de,p as ue,s as T,q as p,c as v,a as s,w as t,f as A,b as e,t as k,h as a,R as te,X as Ce,A as G,F as h,M as H,K as C,N as ie,Q as pe,au as De,H as we,I as be,J as _e,n as Ie,r as S,x as Te,V as Q,i as ke,e as Ve,y as K,j as w,m as ye,Z as ve,B as ae,bD as oe,bE as ze,G as X,v as Se,bF as Xe,ao as Ae,ap as Je,aq as Ze,bG as Fe,bH as Ye,bI as ea,aQ as aa,bJ as ta,am as Ne,z as O,S as ia,an as se,bK as Ge,u as la,ம as na,o as oa,aE as sa,bL as da,aI as ua,bM as ra,a_ as ca,a$ as ma,b0 as Le,b1 as fa,bv as Pe,bw as va,bN as pa,bO as Oe,bP as ba,bQ as _a,bR as ya,a8 as xa,bS as ga,bT as Ba,bx as Ue,by as Ca,bU as Ta,O as he,a2 as ka,b2 as Va,aH as wa,T as ja,b3 as Re,W as $a}from"./index-DTXzon30.js";import{u as ha}from"./historiqueDocuments-BkbmvKPc.js";import{_ as Qe,a as Ea,t as Aa,V as Da,E as Ia,b as Sa,c as He,d as Na,e as La,f as Pa,g as Oa,h as Ua,i as Ra,j as Ma,k as Me}from"./VBreadcrumbs-Dhgevr3U.js";import{_ as qa,a as za,b as Fa,c as Ga}from"./OptionsFormatExportation.vue_vue_type_script_setup_true_lang-D5S-OKB7.js";import{_ as Qa}from"./ChoisirStatut.vue_vue_type_script_setup_true_lang-uer8S95U.js";import{a as Ha,b as Ee}from"./SélecteurNuée.vue_vue_type_script_setup_true_lang-C9Eq5tXR.js";import{V as Wa}from"./VSwitch-Bodtg22a.js";import{V as Ka,a as Xa}from"./VTabs-DtqiHtmI.js";import{V as qe}from"./VSlideGroupItem-CeEeN_2-.js";import"./RésultatRechercheProjet.vue_vue_type_script_setup_true_lang-BEFI3gX2.js";import"./CarteProjet.vue_vue_type_script_setup_true_lang-BXt6vThV.js";import"./NouveauProjet.vue_vue_type_script_setup_true_lang-zU1WhDzQ.js";import"./RésultatRechercheNuée.vue_vue_type_script_setup_true_lang-Ch1QqMMO.js";import"./CarteNuée.vue_vue_type_script_setup_true_lang-D9YWjjL7.js";const Ja={key:0,class:"text-disabled text-h6 text-center"},Za={key:0,class:"text-disabled text-h6 text-center"},Ya=J({__name:"CarteAutomatisationsBd",props:{idBd:{}},setup(L){const u=L,{மொழியாக்கம்_பயன்படுத்து:o}=de(),{$மொ:c}=o(),b=ue(),B=T(b.automatisations.suivreAutomatisations),d=T(b.bds.suivreTableauxBd,{idBd:p(()=>u.idBd)}),_=p(()=>{const j=(d.value||[]).filter(g=>g.id).map(g=>g.id);return B.value?.filter(g=>j.includes(g.type==="exportation"?g.idObjet:g.idTableau))}),I=p(()=>_.value?.filter(j=>j.type==="importation")||[]),R=p(()=>_.value?.filter(j=>j.type==="exportation")||[]);return(j,g)=>(s(),v(Qe,{"type-objet":"bd","id-objet":j.idBd},{activator:t(({props:y})=>[we(j.$slots,"activator",be(_e({props:y})))]),default:t(()=>[A(" "+k(a(c)("automatisations.carte.importations"))+" ",1),e(te),e(Ce,null,{default:t(()=>[e(qa,{"id-bd":j.idBd},{activator:t(({props:y})=>[e(H,C(y,{"prepend-icon":"mdi-upload-outline",title:a(c)("automatisations.carte.bds.ajouterImportationTableau")}),null,16,["title"])]),_:1},8,["id-bd"]),(s(!0),G(pe,null,ie(I.value,y=>(s(),v(Fa,{key:y.id,specification:y},null,8,["specification"]))),128)),I.value.length?h("",!0):(s(),G("p",Ja,k(a(c)("automatisations.carte.bds.aucuneImportationTableau")),1))]),_:1}),A(" "+k(a(c)("automatisations.carte.bds.exportationsTableaux"))+" ",1),e(te),e(Ce,null,{default:t(()=>[e(za,{"id-bd":j.idBd},{activator:t(({props:y})=>[e(H,C({"prepend-icon":"mdi-download-outline"},y),{default:t(()=>[e(De,null,{default:t(()=>[A(k(a(c)("automatisations.carte.bds.ajouterExportationTableau")),1)]),_:1})]),_:2},1040)]),_:1},8,["id-bd"]),(s(!0),G(pe,null,ie(R.value,y=>(s(),v(Ga,{key:y.id,specification:y},null,8,["specification"]))),128)),R.value.length?h("",!0):(s(),G("p",Za,k(a(c)("automatisations.carte.bds.aucuneExportationTableau")),1))]),_:1})]),_:3},8,["id-objet"]))}}),et=J({__name:"CarteCodeBd",props:{id:{}},setup(L){const u=L,o=p(()=>({ts:`import { créerConstellation } from "@constl/ipa";

const client = créerConstellation();

const monAnalyse = async (données) => {
  console.log(données)
  // Faire quelque chose...
}

const fOublier = client.bds.suivreDonnéesExportation({
  idBd: "${u.id}",
  f: monAnalyse
})
`,py:`from constellationPy import Serveur, ClientSync
    
with Serveur():
    client = ClientSync()

    données = client.bds.suivreDonnéesExportation(
      idBd="${u.id}"
    )
`,julia:`import Constellation

Constellation.avecServeur() do port
  Constellation.avecClient(port) do client

    oublier = Constellation.suivre(
        client, 
        "bds.suivreDonnéesExportation", 
        Dict([("idBd","${u.id}")])
    ) do résultat
        print(résultat)
    end
  end
end
`,r:`library(constellationR)

constellationR::avecClientEtServeur(
  function (client) {
    
    données <- client$appeler(
      "bds.suivreDonnéesExportation", 
      list(idBd="${u.id}")
    )
  }
)
`}));return(c,b)=>(s(),v(Ea,{codes:o.value},{activator:t(({props:B})=>[we(c.$slots,"activator",be(_e({props:B})))]),_:3},8,["codes"]))}}),at=J({__name:"CarteQualitéBd",props:{idBd:{}},setup(L){const{mdAndUp:u}=Ie(),{மொழியாக்கம்_பயன்படுத்து:o}=de(),{$மொ:c}=o(),b=L,B=ue(),d=S(!1),_=T(B.bds.suivreQualitéBd,{idBd:p(()=>b.idBd)}),I=T(B.bds.suivreLicenceBd,{idBd:p(()=>b.idBd)}),R=T(B.bds.suivreLicenceContenuBd,{idBd:p(()=>b.idBd)}),j=T(B.suivrePermission,{idObjet:p(()=>b.idBd)});return(g,y)=>(s(),v(Te,{modelValue:d.value,"onUpdate:modelValue":y[1]||(y[1]=E=>d.value=E),"max-width":a(u)?500:300},{activator:t(({props:E})=>[we(g.$slots,"activator",be(_e({props:E})))]),default:t(()=>[e(Q,null,{default:t(()=>[e(ke,null,{default:t(()=>[e(Ve,{class:"d-flex align-center"},{default:t(()=>[A(k(a(c)("bds.qualité.titre"))+" ",1),e(K),e(w,{icon:"mdi-close",size:"small",variant:"flat",onClick:y[0]||(y[0]=E=>d.value=!1)})]),_:1})]),_:1}),e(ye,null,{default:t(()=>[e(Ce,null,{default:t(()=>[e(H,null,{prepend:t(()=>[e(ve,null,{default:t(()=>[e(ae,{"model-value":(a(_)?.total||0)*100,width:5,indeterminate:a(_)?.total===void 0,color:a(oe)(a(_)?.total).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>y[2]||(y[2]=[A("Score total")])),_:1}),e(te),e(H,null,{prepend:t(()=>[e(ve,null,{default:t(()=>[e(ae,{"model-value":(a(_)?.accès||0)*100,width:5,indeterminate:a(_)?.accès===void 0,color:a(oe)(a(_)?.accès).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>y[3]||(y[3]=[A("Accessibilité")])),_:1}),e(ze,{licence:a(I),"licence-contenu":a(R),"permission-modifier":!!a(j)},{activator:t(({props:E})=>[e(H,be(_e(E)),{prepend:t(()=>[e(ve,null,{default:t(()=>[a(_)?.licence===void 0?(s(),v(ae,{key:0,width:5,indeterminate:"",color:a(oe)(a(_)?.licence).couleur},null,8,["color"])):h("",!0),e(X,{icon:a(_)?.licence?"mdi-check":"mdi-alert-circle-outline",color:a(oe)(a(_)?.licence).couleur},null,8,["icon","color"])]),_:1})]),title:t(()=>[A(k(a(_)?.licence===void 0?a(c)("bds.qualité.rechercheLicence"):a(_).licence?a(c)("bds.qualité.licenceOuverte"):a(c)("bds.qualité.licenceNonReconnue")),1)]),_:2},1040)]),_:1},8,["licence","licence-contenu","permission-modifier"]),e(H,null,{prepend:t(()=>[e(ve,null,{default:t(()=>[e(ae,{"model-value":(a(_)?.valide||0)*100,width:5,indeterminate:a(_)?.valide===void 0,color:a(oe)(a(_)?.valide).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>y[4]||(y[4]=[A("Validation données")])),_:1}),e(H,null,{prepend:t(()=>[e(ve,null,{default:t(()=>[e(ae,{"model-value":(a(_)?.couverture||0)*100,width:5,indeterminate:a(_)?.couverture===void 0,color:a(oe)(a(_)?.couverture).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>y[5]||(y[5]=[A("Couverture tests")])),_:1})]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),tt=J({__name:"CarteStatutBd",props:{idBd:{}},setup(L){const u=L,{மொழியாக்கம்_பயன்படுத்து:o}=de(),{$மொ:c}=o(),{mdAndUp:b}=Ie(),B=ue(),d=S(!1),_=T(B.bds.suivreStatutBd,{idBd:p(()=>u.idBd)}),I=S();Se(()=>{I.value=_.value});const R=p(()=>_.value?.statut!==I.value?.statut||_.value?.idNouvelle!==I.value?.idNouvelle),j=S(!1),g=async()=>{j.value=!0,I.value&&await B.bds.changerStatutBd({idBd:u.idBd,statut:Fe(I.value)}),j.value=!1,d.value=!1};return(y,E)=>(s(),v(Te,{modelValue:d.value,"onUpdate:modelValue":E[3]||(E[3]=P=>d.value=P)},{activator:t(({props:P})=>[we(y.$slots,"activator",be(_e({props:P})))]),default:t(()=>[e(Q,{class:"mx-auto","min-width":a(b)?500:300},{default:t(()=>[e(ke,null,{default:t(()=>[e(Ve,null,{default:t(()=>[A(k(a(c)("données.statut.carte.titre")),1)]),_:1})]),_:1}),e(ye,null,{default:t(()=>[e(Qa,{initial:I.value,onChoisir:E[0]||(E[0]=P=>I.value=P)},{sélecteur:t(({choisirNouvelle:P})=>[e(Xe,{multiples:!1,onSelectionnee:W=>P(W[0])},null,8,["onSelectionnee"])]),_:1},8,["initial"])]),_:1}),e(Ae,null,{default:t(()=>[e(K),e(Je,{onClick:E[1]||(E[1]=P=>d.value=!1)}),e(Ze,{actif:R.value,"en-attente":j.value,onClick:E[2]||(E[2]=()=>g())},null,8,["actif","en-attente"])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),it=J({__name:"ItemQualitéBd",props:{id:{}},setup(L){return(u,o)=>(s(),v(H,null,{prepend:t(()=>[e(ea,{id:u.id},null,8,["id"])]),default:t(()=>[e(De,null,{default:t(()=>[e(Ye,{id:u.id},null,8,["id"])]),_:1})]),_:1}))}}),lt=J({__name:"ItemLicence",props:{licence:{}},setup(L){const u=ue(),{மொழியாக்கம்_பயன்படுத்து:o}=de(),{$மொ:c}=o(),b=L,B=T(u.licences.suivreLicences),d=p(()=>!!(b.licence&&B.value&&Object.keys(B.value).includes(b.licence)));return(_,I)=>(s(),v(H,null,{prepend:t(()=>[e(X,{start:"",color:d.value?"primary":"error"},{default:t(()=>[A(k(d.value?"mdi-scale-balance":"mdi-alert"),1)]),_:1},8,["color"])]),default:t(()=>[e(De,null,{default:t(()=>[A(k(d.value?a(c)(`licences.info.${_.licence}.abr`):_.licence),1)]),_:1})]),_:1}))}}),nt={class:"my-4 text-h6 text-disabled"},ot=J({__name:"TableauBd",props:{idTableau:{},idBd:{}},setup(L){const{மொழியாக்கம்_பயன்படுத்து:u}=de(),{$மொ:o}=u(),c=ue(),b=L,B=T(c.suivrePermission,{idObjet:p(()=>b.idTableau)}),d=T(c.tableaux.suivreNomsTableau,{idTableau:p(()=>b.idTableau)}),_=T(c.tableaux.suivreVariables,{idTableau:p(()=>b.idTableau)}),I=T(c.tableaux.suivreColonnesTableau,{idTableau:p(()=>b.idTableau)}),R=T(c.tableaux.suivreColonnesEtCatégoriesTableau,{idTableau:p(()=>b.idTableau)}),j=p(()=>(I.value||[]).map(r=>{const n=R.value?.find(l=>l.id===r.id)?.catégorie;return{key:r.id,sortable:n===void 0||(n?.type==="simple"?Aa(n.catégorie):!1),info:{index:r.index,catégorie:n,variable:r.variable}}})),g=p(()=>{const r={key:"actions",sortable:!1,info:{}};return[...j.value,r]}),y=async({idVariable:r,idColonne:n,index:l,règles:f})=>{n=await c.tableaux.ajouterColonneTableau({idTableau:b.idTableau,idVariable:r,idColonne:n}),l&&await c.tableaux.changerColIndex({idTableau:b.idTableau,idColonne:n,val:!0});for(const $ of f)await c.tableaux.ajouterRègleTableau({idTableau:b.idTableau,idColonne:n,règle:$})},E=async({idColonne:r,index:n,règles:l})=>{await c.tableaux.changerColIndex({idTableau:b.idTableau,idColonne:r,val:n});for(const f of l.nouvelles)await c.tableaux.ajouterRègleTableau({idTableau:b.idTableau,idColonne:r,règle:f});for(const f of l.àEffacer)await c.tableaux.effacerRègleTableau({idTableau:b.idTableau,idRègle:f})},P=async({idColonne:r})=>{await c.tableaux.effacerColonneTableau({idTableau:b.idTableau,idColonne:r})},W=T(c.tableaux.suivreDonnées,{idTableau:p(()=>b.idTableau)}),xe=p(()=>{const r=W.value?.toSorted((l,f)=>re.value&&re.value.map($=>l.données[$.key]===void 0?f.données[$.key]===void 0?0:$.order==="asc"?1:-1:f.données[$.key]===void 0?l.données[$.key]===void 0?0:$.order==="asc"?-1:1:l.données[$.key]>f.données[$.key]?$.order==="asc"?1:-1:l.données[$.key]<f.données[$.key]?$.order==="asc"?-1:1:0).find($=>$!==0)||0),n={id:"-1",données:{}};return Z.value&&r?[n,...r]:r}),re=S(),M=S([]),je=T(c.tableaux.suivreRègles,{idTableau:p(()=>b.idTableau)}),Z=S(!1),le=S(!1),Y=S(),q=p(()=>{const r=[];for(const[n,l]of Object.entries(Y.value||{})){const f=W.value?.find($=>$.id===n);f&&z({modifs:l,original:f.données})&&r.push({idÉlément:n,vals:l})}return r}),ce=p(()=>q.value.length+(Object.keys(D.value).length?1:0)),z=({modifs:r,original:n})=>Object.keys(r).some(l=>n[l]!==r[l]),D=S({});Se(()=>{Z.value||(D.value={})});const U=p(()=>Object.keys(D.value).length>0),me=({val:r,idCol:n,idÉlément:l})=>{if(l==="-1")r!==void 0?D.value[n]=r:delete D.value[n];else{const f=Y.value||{};f[l]||(f[l]={}),f[l][n]=r,Y.value=f}},fe=async({vals:r})=>Object.fromEntries(await Promise.all(Object.entries(r).map(async([n,l])=>{if(l instanceof File){const f=await c.ajouterÀSFIP({contenu:new Uint8Array(await l.arrayBuffer()),nomFichier:l.name});return[n,f]}else return[n,l]}))),ge=async()=>{le.value=!0;for(const{idÉlément:r,vals:n}of q.value)await c.tableaux.modifierÉlément({idTableau:b.idTableau,idÉlément:r,vals:await fe({vals:n})});U.value&&await Be(),Y.value=void 0,le.value=!1},Be=async()=>{await c.tableaux.ajouterÉlément({idTableau:b.idTableau,vals:await fe({vals:D.value})}),D.value={}},ne=S(!1),ee=S(!1),F=S(!1),m=S(!1),x=S(!1);aa([m,x],()=>{ne.value=ee.value});const N=async({idÉlément:r})=>{F.value=!0,await c.tableaux.effacerÉlément({idTableau:b.idTableau,idÉlément:r}),F.value=!1},i=async()=>{F.value=!0,await Promise.all(M.value.map(r=>N({idÉlément:r}))),M.value=[],F.value=!1},V=async()=>{await c.bds.effacerTableauBd({idBd:b.idBd,idTableau:b.idTableau})};return(r,n)=>(s(),v(Da,{modelValue:M.value,"onUpdate:modelValue":n[13]||(n[13]=l=>M.value=l),headers:g.value,items:xe.value,"show-select":!!a(B),"multi-sort":"","onUpdate:sortBy":n[14]||(n[14]=l=>re.value=l)},ta({top:t(()=>[e(Na,{flat:"",density:"compact"},{default:t(()=>[e(K),a(B)?(s(),v(w,{key:0,icon:"",disabled:!ce.value,onClick:n[0]||(n[0]=()=>ge())},{default:t(()=>[ce.value?(s(),v(ia,{key:0,color:"success",content:ce.value},{default:t(()=>[e(X,{color:"primary",icon:"mdi-content-save-outline"})]),_:1},8,["content"])):(s(),v(X,{key:1,color:"primary",icon:"mdi-content-save-check-outline"}))]),_:1},8,["disabled"])):h("",!0),a(B)?(s(),v(Wa,{key:1,modelValue:Z.value,"onUpdate:modelValue":n[1]||(n[1]=l=>Z.value=l),class:"me-4",density:"compact",color:"primary","true-icon":"mdi-pencil-outline","false-icon":"mdi-pencil-off-outline","hide-details":""},null,8,["modelValue"])):h("",!0),a(B)?(s(),v(Ha,{key:2,"id-tableau":r.idTableau,"variables-interdites":a(_),onNouvelle:n[2]||(n[2]=l=>y(l))},{activator:t(({props:l})=>[e(w,C(l,{icon:"mdi-table-column-plus-after"}),null,16)]),_:1},8,["id-tableau","variables-interdites"])):h("",!0),e(Qe,{"id-objet":r.idTableau,"type-objet":"tableau"},{activator:t(({props:l})=>[e(se,{text:a(o)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:f})=>[e(w,C({...l,...f},{icon:"mdi-sync"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet"]),e(He,{"id-objet":r.idTableau,"noms-objet":a(d),"type-objet":"tableau"},{activator:t(({props:l})=>[e(se,{text:a(o)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:f})=>[e(w,C({...l,...f},{icon:"mdi-download"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet","noms-objet"]),a(B)?(s(),v(Ge,{key:3,onEffacer:n[3]||(n[3]=()=>V())},{activator:t(({props:l})=>[e(w,C(l,{icon:"mdi-delete",color:"error"}),null,16)]),_:1})):h("",!0)]),_:1})]),"no-data":t(()=>[O("p",nt,k(a(o)("tableaux.aucuneDonnée")),1),h("",!0)]),"item.actions":t(({item:l})=>[l.id==="-1"?(s(),v(w,{key:0,disabled:!U.value,icon:"mdi-content-save-outline",size:"small",variant:"flat",onClick:n[9]||(n[9]=()=>Be())},null,8,["disabled"])):ne.value&&a(B)?(s(),v(w,{key:1,size:"small",icon:"mdi-delete",variant:"flat",loading:F.value,onClick:()=>N({idÉlément:l.id})},null,8,["loading","onClick"])):a(B)?(s(),v(Te,{key:2,modelValue:m.value,"onUpdate:modelValue":n[12]||(n[12]=f=>m.value=f)},{activator:t(({props:f})=>[e(w,C(f,{variant:"flat",icon:"mdi-delete",size:"small",loading:F.value}),null,16,["loading"])]),default:t(()=>[e(Q,{class:"mx-auto","max-width":"450"},{default:t(()=>[e(ke,null,{default:t(()=>[e(Ve,null,{default:t(()=>[A(k(a(o)("tableaux.données.titreEffacer")),1)]),_:1})]),_:1}),e(ye,null,{default:t(()=>[e(Ne,{modelValue:ee.value,"onUpdate:modelValue":n[10]||(n[10]=f=>ee.value=f),label:a(o)("tableaux.données.nePlusConfirmerEffacer")},null,8,["modelValue","label"])]),_:1}),e(Ae,null,{default:t(()=>[e(K),e(w,{variant:"text",text:a(o)("communs.oui"),onClick:()=>{N({idÉlément:l.id}),m.value=!1}},null,8,["text","onClick"]),e(w,{variant:"text",color:"primary",text:a(o)("communs.non"),onClick:n[11]||(n[11]=f=>m.value=!1)},null,8,["text"]),e(K)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])):h("",!0)]),_:2},[ie(j.value||[],l=>({name:`header.${l.key}`,fn:t(({column:f,isSorted:$,getSortIcon:We,toggleSort:Ke})=>[e(Ia,{"id-colonne":l.key,"id-variable":l.info.variable,"id-tableau":r.idTableau,index:!!l.info.index,regles:a(je)?.filter($e=>$e.colonne===l.key),"permission-modifier":!!a(B),ordonnable:f.sortable,"est-ordonnee":$(f),"icone-ordonner":We(f),onBasculerOrdonner:()=>Ke(f),onSauvegarder:$e=>E({idColonne:l.key,...$e}),onEffacer:()=>P({idColonne:l.key})},null,8,["id-colonne","id-variable","id-tableau","index","regles","permission-modifier","ordonnable","est-ordonnee","icone-ordonner","onBasculerOrdonner","onSauvegarder","onEffacer"])])})),a(B)?{name:"header.actions",fn:t(()=>[ne.value?(s(),v(w,{key:0,icon:"mdi-delete",variant:"flat",size:"small",loading:F.value,readonly:!M.value.length,onClick:n[4]||(n[4]=()=>i())},null,8,["loading","readonly"])):(s(),v(Te,{key:1,modelValue:x.value,"onUpdate:modelValue":n[8]||(n[8]=l=>x.value=l)},{activator:t(({props:l})=>[e(w,C(l,{icon:"",variant:"flat",size:"small",readonly:!M.value.length,loading:F.value}),{default:t(()=>[e(X,{icon:"mdi-delete",color:M.value.length?void 0:"disabled"},null,8,["color"])]),_:2},1040,["readonly","loading"])]),default:t(()=>[e(Q,{class:"mx-auto","max-width":"450"},{default:t(()=>[e(ke,null,{default:t(()=>[e(Ve,null,{default:t(()=>[A(k(a(o)("tableaux.données.titreEffacerSélectionnées",M.value.length)),1)]),_:1})]),_:1}),e(ye,null,{default:t(()=>[e(Ne,{modelValue:ee.value,"onUpdate:modelValue":n[5]||(n[5]=l=>ee.value=l),label:a(o)("tableaux.données.nePlusConfirmerEffacer")},null,8,["modelValue","label"])]),_:1}),e(Ae,null,{default:t(()=>[e(K),e(w,{variant:"text",text:a(o)("communs.oui"),onClick:n[6]||(n[6]=()=>{i(),x.value=!1})},null,8,["text"]),e(w,{variant:"text",color:"primary",text:a(o)("communs.non"),onClick:n[7]||(n[7]=l=>x.value=!1)},null,8,["text"]),e(K)]),_:1})]),_:1})]),_:1},8,["modelValue"]))]),key:"0"}:void 0,ie(j.value,l=>({name:`item.${l.key}`,fn:t(({item:f})=>[e(Sa,{categorie:l.info.catégorie?.catégorie,val:f.données[l.key],editable:!!a(B)&&Z.value,onModifiee:({val:$})=>me({idCol:l.key,idÉlément:f.id,val:$})},null,8,["categorie","val","editable","onModifiee"])])}))]),1032,["modelValue","headers","items","show-select"]))}}),st={class:"text-center"},dt={class:"text-center"},ut={key:0,class:"text-disabled"},rt={class:"text-center"},ct={class:"mt-6 text-h5"},mt={class:"d-flex flex-wrap"},ft={class:"mt-6 text-h5"},vt={key:0,class:"text-disabled"},pt={class:"mt-6 text-h5"},bt={key:2,class:"text-center"},_t={class:"text-h5 mt-5"},Dt=J({__name:"PageBd",props:{id:{}},setup(L){const u=L,o=ue(),{mdAndUp:c}=Ie(),{isRtl:b}=la(),{மொழியாக்கம்_பயன்படுத்து:B}=de(),{$மொ:d}=B(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:_}=na(),{obtImageDéco:I}=sa(),R=ha();oa(()=>{R.documentOuvert({id:u.id,à:Date.now()})});const j=I("vide"),g=T(o.suivrePermission,{idObjet:p(()=>u.id)}),y=T(o.bds.suivreNomsBd,{idBd:p(()=>u.id)}),E=_(y),P=async m=>{const{àEffacer:x,àAjouter:N}=Re({anciennes:y.value,nouvelles:m});for(const i of x)await o.bds.effacerNomBd({idBd:u.id,langue:i});await o.bds.sauvegarderNomsBd({idBd:u.id,noms:N})},W=T(o.bds.suivreDescriptionsBd,{idBd:p(()=>u.id)}),xe=_(W),re=async m=>{const{àEffacer:x,àAjouter:N}=Re({anciennes:W.value,nouvelles:m});for(const i of x)await o.bds.effacerDescriptionBd({idBd:u.id,langue:i});await o.bds.sauvegarderDescriptionsBd({idBd:u.id,descriptions:N})},M=da(T(o.bds.suivreImage,{idBd:p(()=>u.id)})),je=I("logoBD"),Z=async m=>{m?await o.bds.sauvegarderImage({idBd:u.id,image:{contenu:new Uint8Array(m.contenu),nomFichier:m.fichier}}):await o.bds.effacerImage({idBd:u.id})},le=T(o.bds.suivreStatutBd,{idBd:p(()=>u.id)}),Y=T(o.bds.suivreVariablesBd,{idBd:p(()=>u.id)}),q=T(o.bds.suivreMotsClefsBd,{idBd:p(()=>u.id)}),ce=async m=>{const x=m.filter(i=>!q.value?.includes(i)),N=q.value?.filter(i=>!m.includes(i))||[];await o.bds.ajouterMotsClefsBd({idBd:u.id,idsMotsClefs:x}),await Promise.all(N.map(i=>o.bds.effacerMotClefBd({idBd:u.id,idMotClef:i})))},z=T(o.bds.suivreTableauxBd,{idBd:p(()=>u.id)}),D=S();Se(()=>{!D.value&&z.value?.length&&(D.value=z.value[0].clef),D.value&&!z.value?.map(m=>m.clef).includes(D.value)&&(D.value=void 0)});const U=S(!1),me=async({noms:m,cols:x})=>{U.value=!0;try{const N=await o.bds.ajouterTableauBd({idBd:u.id});await o.tableaux.sauvegarderNomsTableau({idTableau:N,noms:Fe(m)}),await Promise.all(x.map(async i=>{await o.tableaux.ajouterColonneTableau({idTableau:N,idColonne:i.info.id,idVariable:i.info.variable}),i.info.index&&await o.tableaux.changerColIndex({idTableau:N,idColonne:i.info.id,val:!0}),await Promise.all(i.règles.map(async V=>await o.tableaux.ajouterRègleTableau({idTableau:N,idColonne:i.info.id,règle:V})))}))}finally{U.value=!1}},fe=T(o.réseau.suivreAuteursBd,{idBd:p(()=>u.id)}),ge=T(o.bds.suivreLicenceBd,{idBd:p(()=>u.id)}),Be=T(o.bds.suivreLicenceContenuBd,{idBd:p(()=>u.id)}),ne=async({licence:m,licenceContenu:x})=>{await o.bds.changerLicenceBd({idBd:u.id,licence:m}),x&&await o.bds.changerLicenceContenuBd({idBd:u.id,licenceContenu:x})},ee=p(()=>[{title:d("navigation.données"),href:encodeURI("/données/")},{title:E.value||d("bds.sansNom"),disabled:!0}]),F=async()=>{await o.bds.effacerBd({idBd:u.id})};return(m,x)=>{const N=Ba("carte-replications-objet");return s(),v(ua,null,{default:t(()=>[O("div",null,[a(c)?(s(),v(La,{key:0,items:ee.value,class:"pa-0"},{divider:t(()=>[e(X,null,{default:t(()=>[A(k(a(b)?"mdi-chevron-left":"mdi-chevron-right"),1)]),_:1})]),title:t(({item:i})=>[e(Pa,{disabled:i.disabled,onClick:V=>i.href&&m.$router.push(i.href)},{default:t(()=>[e(ra,{texte:i.title,"longueur-max":35},null,8,["texte"])]),_:2},1032,["disabled","onClick"])]),_:1},8,["items"])):(s(),v(w,{key:1,icon:"mdi-arrow-left-top",variant:"flat",onClick:x[0]||(x[0]=()=>m.$router.push(encodeURI("/données/")))}))]),e(ma,{"src-image":a(M),"img-defaut":a(je),editable:!!a(g),"taille-avatar":a(c)?275:175,"max-taille-image":a(ca),onImageChangee:x[1]||(x[1]=i=>Z(i))},null,8,["src-image","img-defaut","editable","taille-avatar","max-taille-image"]),O("div",st,[e(Le,{"etiquette-nom":a(d)("objet.étiquetteNom"),"indice-nom":a(d)("objet.indiceNom"),"indice-langue":a(d)("objet.indiceLangue"),"texte-aucun-nom":a(d)("objet.texteAucunNom"),"noms-initiaux":a(y),titre:a(d)("objet.titreDialogueNoms"),"sous-titre":a(d)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!a(g),onAjusterNoms:P},{activator:t(({props:i})=>[O("span",C(i,{class:"text-h4"}),[A(k(a(E)||a(d)("bds.sansNom"))+" ",1),e(w,{icon:a(g)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),e(fa,{id:m.id},null,8,["id"]),e(K)]),O("div",dt,[e(Oe,{"n-max":5,items:a(q)},{jeton:t(({id:i})=>[e(Pe,{id:i},{activator:t(({props:V})=>[e(pa,C(V,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:t(({id:i})=>[e(Pe,{id:i},{activator:t(({props:V})=>[e(va,C(V,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),a(q)&&!a(q).length?(s(),G("span",ut,k(a(d)("bds.aucunMotClef")),1)):h("",!0),a(g)&&a(q)?(s(),v(ba,{key:1,originaux:a(q),onSauvegarder:x[2]||(x[2]=i=>ce(i))},null,8,["originaux"])):h("",!0)]),O("div",rt,[e(ya,{"id-bd":m.id},{activator:t(({props:i})=>[e(se,{"open-delay":"200",location:"bottom",text:a(d)("épingler.épingler")},{activator:t(({props:V})=>[e(w,C({...i,...V},{icon:"",variant:"flat"}),{default:t(()=>[e(_a,{id:m.id},null,8,["id"])]),_:2},1040)]),_:2},1032,["text"])]),_:1},8,["id-bd"]),e(He,{"id-objet":m.id,"noms-objet":a(y),"type-objet":"bd"},{activator:t(({props:i})=>[e(se,{text:a(d)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:V})=>[e(w,C({...i,...V},{icon:"mdi-download",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet","noms-objet"]),e(et,{id:m.id},{activator:t(({props:i})=>[e(se,{text:a(d)("code.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:V})=>[e(w,C({...i,...V},{icon:"mdi-xml",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id"]),h("",!0),a(g)?(s(),v(Ge,{key:1,onEffacer:F},{activator:t(({props:i})=>[e(se,{"open-delay":"200",location:"bottom",text:a(d)("effacer.indice")},{activator:t(({props:V})=>[e(w,C({...i,...V},{variant:"flat",icon:""}),{default:t(()=>[e(X,{color:"error"},{default:t(()=>x[7]||(x[7]=[A("mdi-delete")])),_:1})]),_:2},1040)]),_:2},1032,["text"])]),_:1})):h("",!0)]),e(te),e(ye,null,{default:t(()=>[e(Le,{"etiquette-nom":a(d)("objet.étiquetteDescription"),"indice-nom":a(d)("objet.indiceDescription"),"indice-langue":a(d)("objet.indiceLangue"),"texte-aucun-nom":a(d)("objet.texteAucuneDescription"),"noms-initiaux":a(W),titre:a(d)("objet.titreDialogueDescriptions"),"sous-titre":a(d)("objet.sousTitreDialogueDescriptions"),"autorisation-modification":!!a(g),longue:"",onAjusterNoms:re},{activator:t(({props:i})=>[O("span",{class:xa({"text-disabled":!a(xe)})},k(a(xe)||a(d)("communs.baseCarteObjet.sansDescription")),3),e(w,C(i,{icon:a(g)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"}),null,16,["icon"])]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),O("p",ct,k(a(d)("bds.info")),1),e(te,{class:"mb-2"}),O("div",mt,[a(le)&&(a(le).statut!=="active"||a(g))?(s(),v(Q,{key:0,flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(tt,{"id-bd":m.id},{activator:t(({props:i})=>[e(Oa,C(i,{"type-objet":"bd",statut:a(le)}),null,16,["statut"])]),_:1},8,["id-bd"])]),_:1})):h("",!0),e(Q,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(at,{"id-bd":m.id},{activator:t(({props:i})=>[e(it,C(i,{id:m.id}),null,16,["id"])]),_:1},8,["id-bd"])]),_:1}),e(Q,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(ga,{id:m.id,auteurs:a(fe),"permission-moderateur":a(g)==="MODÉRATEUR"},{activator:t(({props:i})=>[e(Ua,C(i,{auteurs:a(fe)}),null,16,["auteurs"])]),_:1},8,["id","auteurs","permission-moderateur"])]),_:1}),e(Q,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(ze,{licence:a(ge),"licence-contenu":a(Be),"permission-modifier":a(g)==="MODÉRATEUR",onChangerLicence:ne},{activator:t(({props:i})=>[e(lt,C(i,{licence:a(ge),onChangerLicence:ne}),null,16,["licence"])]),_:1},8,["licence","licence-contenu","permission-modifier"])]),_:1}),e(Q,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(N,{id:m.id},{activator:t(({props:i})=>[e(Ra,C(i,{id:m.id}),null,16,["id"])]),_:1},8,["id"])]),_:1}),e(Q,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(Ya,{"id-bd":m.id,permission:a(g),"type-objet":"bd"},{activator:t(({props:i})=>[e(Ma,C(i,{"id-objet":m.id}),null,16,["id-objet"])]),_:1},8,["id-bd","permission"])]),_:1})]),O("p",ft,k(a(d)("bds.variables")),1),e(te,{class:"mb-2"}),e(Oe,{"n-max":5,items:a(Y)},{jeton:t(({id:i})=>[e(Ue,{id:i},{activator:t(({props:V})=>[e(Ta,C(V,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:t(({id:i})=>[e(Ue,{id:i},{activator:t(({props:V})=>[e(Ca,C(V,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),a(Y)?.length?h("",!0):(s(),G("p",vt,k(a(d)("bds.aucuneVariable")),1)),e(Ce,null,{default:t(()=>[O("p",pt,k(a(d)("bds.tableaux")),1),e(te),a(c)?(s(),v(Ka,{key:0,modelValue:D.value,"onUpdate:modelValue":x[4]||(x[4]=i=>D.value=i),class:"mt-2"},{default:t(()=>[(s(!0),G(pe,null,ie(a(z),i=>(s(),v(Xa,{key:i.clef,value:i.clef,color:"primary",size:"small",density:"compact"},{default:t(()=>[e(Me,{id:i.id,clef:i.clef},null,8,["id","clef"])]),_:2},1032,["value"]))),128)),e(Ee,{onSauvegarder:me},{activator:t(({props:i})=>[a(g)?(s(),v(he,C({key:0},i,{"append-icon":U.value?void 0:"mdi-plus",disabled:U.value,variant:"text",class:"mx-1 my-auto",size:"x-large",label:"",onClick:x[3]||(x[3]=ka(()=>{},["stop"]))}),{default:t(()=>[A(k(a(d)("tableaux.nouveau"))+" ",1),U.value?(s(),v(ae,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):h("",!0)]),_:2},1040,["append-icon","disabled"])):h("",!0)]),_:1})]),_:1},8,["modelValue"])):(s(),v(Va,{key:1,modelValue:D.value,"onUpdate:modelValue":x[5]||(x[5]=i=>D.value=i),class:"mt-4","show-arrows":"","center-active":""},{default:t(()=>[(s(!0),G(pe,null,ie(a(z),i=>(s(),v(qe,{key:i.clef,value:i.clef},{default:t(({isSelected:V,toggle:r})=>[e(he,{class:"mx-1",variant:"tonal",label:"",active:!1,color:V?"primary":"",onClick:r},{default:t(()=>[e(Me,{id:i.id,clef:i.clef},null,8,["id","clef"])]),_:2},1032,["color","onClick"])]),_:2},1032,["value"]))),128)),e(qe,{key:"nouveau",value:"nouveau"},{default:t(()=>[e(Ee,{onSauvegarder:me},{activator:t(({props:i})=>[a(g)?(s(),v(he,C({key:0},i,{"append-icon":U.value?void 0:"mdi-plus",variant:"tonal",class:"mx-1",label:"",disabled:U.value}),{default:t(()=>[A(k(a(d)("tableaux.nouveau"))+" ",1),U.value?(s(),v(ae,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):h("",!0)]),_:2},1040,["append-icon","disabled"])):h("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])),a(z)&&!a(z).length?(s(),G("div",bt,[O("p",_t,k(a(d)("tableaux.aucun")),1),e(wa,{src:a(j),class:"my-5",contain:"",height:"175px"},null,8,["src"]),e(Ee,{onSauvegarder:me},{activator:t(({props:i})=>[a(g)?(s(),v(w,C({key:0},i,{color:"primary",class:"mx-2",variant:"outlined"}),{prepend:t(()=>[e(X,{icon:"mdi-table",start:""})]),default:t(()=>[A(" "+k(a(d)("tableaux.nouveau")),1)]),_:2},1040)):h("",!0)]),_:1})])):h("",!0)]),_:1}),e(ja,{modelValue:D.value,"onUpdate:modelValue":x[6]||(x[6]=i=>D.value=i)},{default:t(()=>[(s(!0),G(pe,null,ie(a(z),i=>(s(),v($a,{key:i.clef,value:i.clef},{default:t(()=>[e(ot,{"id-tableau":i.id,"id-bd":m.id},null,8,["id-tableau","id-bd"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{Dt as default};
//# sourceMappingURL=PageBd-B8ynjvMH.js.map
