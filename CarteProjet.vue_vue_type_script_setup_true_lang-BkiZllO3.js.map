{"version":3,"file":"CarteProjet.vue_vue_type_script_setup_true_lang-BkiZllO3.js","sources":["../../src/components/projets/CarteProjet.vue"],"sourcesContent":["<template>\n  <base-carte-objet\n    :id=\"id\"\n    :noms=\"noms\"\n    :descriptions=\"descriptions\"\n    :auteurs=\"auteurs\"\n    :fichiers-epinglables=\"true\"\n    @ajuster-noms=\"ajusterNoms\"\n    @ajuster-descriptions=\"ajusterDescriptions\"\n    @effacer=\"effacerProjet\"\n  >\n    <template #activator=\"{props: propsActivateur}\">\n      <slot\n        name=\"activator\"\n        v-bind=\"{props: propsActivateur}\"\n      ></slot>\n    </template>\n  </base-carte-objet>\n</template>\n<script setup lang=\"ts\">\nimport {suivre} from '@constl/vue';\n\nimport BaseCarteObjet from '../communs/BaseCarteObjet.vue';\nimport {utiliserConstellation} from '/@/components/utils';\nimport {ajusterTexteTraductible} from '/@/utils';\n\nconst props = defineProps<{id: string}>();\n\nconst constl = utiliserConstellation();\n\n// Nom projet\nconst noms = suivre(constl.projets.suivreNomsProjet, {idProjet: props.id}, {});\nconst ajusterNoms = async (nms: {[langue: string]: string}) => {\n  const {àEffacer, àAjouter} = ajusterTexteTraductible({anciennes: noms.value, nouvelles: nms});\n  for (const langue of àEffacer) {\n    await constl.projets.effacerNomProjet({idProjet: props.id, langue});\n  }\n  await constl.projets.sauvegarderNomsProjet({\n    idProjet: props.id,\n    noms: àAjouter,\n  });\n};\n\n// Descriptions projet\nconst descriptions = suivre(constl.projets.suivreDescriptionsProjet, {idProjet: props.id}, {});\n\nconst ajusterDescriptions = async (descrs: {[langue: string]: string}) => {\n  const {àEffacer, àAjouter} = ajusterTexteTraductible({\n    anciennes: descriptions.value,\n    nouvelles: descrs,\n  });\n  for (const langue of àEffacer) {\n    await constl.projets.effacerDescriptionProjet({idProjet: props.id, langue});\n  }\n  await constl.projets.sauvegarderDescriptionsProjet({\n    idProjet: props.id,\n    descriptions: àAjouter,\n  });\n};\n\n// Auteurs\nconst auteurs = suivre(constl.réseau.suivreAuteursProjet, {idProjet: props.id});\n\n// Effacer\nconst effacerProjet = async () => {\n  await constl.projets.effacerProjet({idProjet: props.id});\n};\n</script>\n"],"names":["props","__props","constl","utiliserConstellation","noms","suivre","ajusterNoms","nms","àEffacer","àAjouter","ajusterTexteTraductible","langue","descriptions","ajusterDescriptions","descrs","auteurs","effacerProjet"],"mappings":"8KA0BA,MAAMA,EAAQC,EAERC,EAASC,EAAsB,EAG/BC,EAAOC,EAAOH,EAAO,QAAQ,iBAAkB,CAAC,SAAUF,EAAM,EAAK,EAAA,EAAE,EACvEM,EAAc,MAAOC,GAAoC,CACvD,KAAA,CAAC,SAAAC,EAAU,SAAAC,CAAY,EAAAC,EAAwB,CAAC,UAAWN,EAAK,MAAO,UAAWG,EAAI,EAC5F,UAAWI,KAAUH,EACb,MAAAN,EAAO,QAAQ,iBAAiB,CAAC,SAAUF,EAAM,GAAI,OAAAW,EAAO,EAE9D,MAAAT,EAAO,QAAQ,sBAAsB,CACzC,SAAUF,EAAM,GAChB,KAAMS,CAAA,CACP,CACH,EAGMG,EAAeP,EAAOH,EAAO,QAAQ,yBAA0B,CAAC,SAAUF,EAAM,EAAK,EAAA,EAAE,EAEvFa,EAAsB,MAAOC,GAAuC,CACxE,KAAM,CAAC,SAAAN,EAAU,SAAAC,CAAQ,EAAIC,EAAwB,CACnD,UAAWE,EAAa,MACxB,UAAWE,CAAA,CACZ,EACD,UAAWH,KAAUH,EACb,MAAAN,EAAO,QAAQ,yBAAyB,CAAC,SAAUF,EAAM,GAAI,OAAAW,EAAO,EAEtE,MAAAT,EAAO,QAAQ,8BAA8B,CACjD,SAAUF,EAAM,GAChB,aAAcS,CAAA,CACf,CACH,EAGMM,EAAUV,EAAOH,EAAO,OAAO,oBAAqB,CAAC,SAAUF,EAAM,GAAG,EAGxEgB,EAAgB,SAAY,CAChC,MAAMd,EAAO,QAAQ,cAAc,CAAC,SAAUF,EAAM,GAAG,CACzD"}