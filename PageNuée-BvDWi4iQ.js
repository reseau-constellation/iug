import{d as R,c,a as o,ag as Ue,w as a,b as e,j as M,ம as F,n as oe,p as se,r as P,s as A,q as y,v as $e,x as le,V as z,h as t,i as pe,e as fe,f as E,t as _,y as ne,m as W,z as $,A as q,F as D,R as J,aK as Re,aL as ve,M as ue,K as w,X as me,N as L,Q as X,aj as xe,ak as Te,al as Ve,H as ie,I as Q,J as Z,an as ke,cs as He,ct as Ke,ah as We,az as we,aq as Be,c7 as qe,cu as Xe,G as te,cv as Qe,ai as ae,c8 as ze,a5 as _e,a1 as ge,a4 as Oe,u as Ze,o as Ye,aB as ea,aC as aa,aG as ta,c9 as na,aZ as sa,a_ as ia,a$ as he,b0 as la,bx as je,by as oa,ca as ua,cb as Ie,cc as ra,cd as da,a8 as ca,cf as ma,cg as pa,bz as De,bA as fa,ch as va,a2 as _a,B as Ae,b1 as ba,O as Ee,aF as Na,T as ya,b2 as Me,W as Ca}from"./index-Dm5yWyzV.js";import{a as Je,t as ga,V as $a,E as xa,b as Ta,d as Va,e as ka,f as wa,c as ha,g as ja,h as Ia,i as Da,_ as Aa,j as Ea,k as Ma}from"./VBreadcrumbs-DrHyLZ7x.js";import{_ as Pa}from"./SélecteurMembre.vue_vue_type_script_setup_true_lang-DTwRtoxd.js";import{_ as Sa}from"./NouvelleBd.vue_vue_type_script_setup_true_lang-Be3Pw2jb.js";import{c as Ua,a as Ra,b as Ce}from"./SélecteurNuée.vue_vue_type_script_setup_true_lang-Jvzno9Ie.js";import{_ as Ba}from"./ChoisirStatut.vue_vue_type_script_setup_true_lang-CpSimCsX.js";import{a as qa}from"./CarteNuée.vue_vue_type_script_setup_true_lang-BrmMcDdu.js";import{u as za}from"./historiqueDocuments-DNqnXWGN.js";import{V as Oa,a as Pe}from"./VTabs-Dl1qdvXk.js";import{V as Se}from"./VSlideGroupItem-7jhnpx9L.js";import"./OptionsFormatExportation.vue_vue_type_script_setup_true_lang-CkUuhgBv.js";import"./RésultatRechercheProjet.vue_vue_type_script_setup_true_lang-Bnf3PFYG.js";import"./CarteProjet.vue_vue_type_script_setup_true_lang-qpCt-fpL.js";import"./NouveauProjet.vue_vue_type_script_setup_true_lang-nhIsMI38.js";import"./RésultatRechercheNuée.vue_vue_type_script_setup_true_lang-C_W5QCvv.js";const Ja=R({__name:"ItemMembreAcceptéNuée",props:{idCompte:{}},emits:["effacer"],setup(j,{emit:i}){const s=i;return(u,r)=>(o(),c(Ue,{compte:u.idCompte,"montrer-anonymes":""},{fin:a(()=>[e(M,{icon:"mdi-cancel",size:"small",variant:"flat",onClick:r[0]||(r[0]=()=>s("effacer",u.idCompte))})]),_:1},8,["compte"]))}}),La=R({__name:"ItemMembreExclusNuée",props:{idCompte:{}},emits:["effacer"],setup(j,{emit:i}){const s=i;return(u,r)=>(o(),c(Ue,{compte:u.idCompte,"montrer-anonymes":""},{fin:a(()=>[e(M,{icon:"mdi-cancel",size:"small",variant:"flat",onClick:r[0]||(r[0]=()=>s("effacer",u.idCompte))})]),_:1},8,["compte"]))}}),Fa={class:"mt-2 font-weight-bold"},Ga={class:"text-disabled"},Ha={class:"text-disabled"},Ka={class:"mt-2 font-weight-bold"},Wa={key:0,class:"text-h6 text-disabled text-center"},Xa={class:"text-center"},Qa={class:"text-h5"},Za={class:"text-disabled text-h6"},Ya=R({__name:"CarteAutorisationsNuée",props:{idNuee:{}},setup(j){const i=j,{$மொ:s}=F(),{mdAndUp:u}=oe(),r=se(),l=P(!1),p=A(r.suivrePermission,{idObjet:y(()=>i.idNuee)}),x=A(r.nuées.suivrePhilosophieAutorisation,{idNuée:y(()=>i.idNuee)}),d=P(x.value);$e(()=>{d.value=x.value});const f=A(r.nuées.suivreAutorisationsMembresDeNuée,{idNuée:y(()=>i.idNuee)}),S=y(()=>f.value?.filter(I=>I.statut==="accepté").map(I=>I.idCompte)),U=y(()=>f.value?.filter(I=>I.statut==="exclus").map(I=>I.idCompte)),V=async I=>{d.value==="CJPI"?await Promise.all(I.map(async h=>await r.nuées.accepterMembreNuée({idNuée:i.idNuee,idCompte:h}))):d.value==="IJPC"&&await Promise.all(I.map(async h=>await r.nuées.exclureMembreDeNuée({idNuée:i.idNuee,idCompte:h})))},k=async I=>{await r.nuées.révoquerExclusionMembreNuée({idNuée:i.idNuee,idCompte:I})},G=async I=>{await r.nuées.révoquerAcceptationMembreNuée({idNuée:i.idNuee,idCompte:I})},re=y(()=>d.value!==x.value),de=()=>{};return(I,h)=>(o(),c(le,{modelValue:l.value,"onUpdate:modelValue":h[7]||(h[7]=m=>l.value=m)},{activator:a(({props:m})=>[ie(I.$slots,"activateur",Q(Z({props:m})))]),default:a(()=>[e(z,{class:"mx-auto","min-width":t(u)?500:300},{default:a(()=>[e(pe,null,{default:a(()=>[e(fe,{class:"d-flex align-center"},{default:a(()=>[E(_(t(s)("nuées.autorisations.carte.titre"))+" ",1),e(ne),e(M,{icon:"mdi-close",size:"small",variant:"flat",onClick:h[0]||(h[0]=m=>l.value=!1)})]),_:1})]),_:1}),t(p)?(o(),c(W,{key:0},{default:a(()=>[$("p",Fa,_(t(s)("nuées.autorisations.philosophie")),1),e(J),e(Re,{modelValue:d.value,"onUpdate:modelValue":h[1]||(h[1]=m=>d.value=m)},{default:a(()=>[e(ve,{value:"CJPI",class:"my-2"},{label:a(()=>[$("div",null,[$("p",null,_(t(s)("nuées.nouvelle.parInvitation")),1),$("p",Ga,_(t(s)("nuées.nouvelle.indiceParInvitation")),1)])]),_:1}),e(ve,{value:"IJPC",class:"my-2"},{label:a(()=>[$("div",null,[$("p",null,_(t(s)("nuées.nouvelle.ouverteÀTous")),1),$("p",Ha,_(t(s)("nuées.nouvelle.indiceOuverteÀTous")),1)])]),_:1})]),_:1},8,["modelValue"]),$("p",Ka,_(t(s)(`nuées.autorisations.${d.value==="CJPI"?"membresAutorisés":"membresBloqués"}`)),1),e(J),e(le,null,{activator:a(({props:m})=>[e(ue,w(m,{"prepend-icon":d.value==="CJPI"?"mdi-account-plus-outline":"mdi-account-cancel-outline"}),{default:a(()=>[E(_(t(s)(`nuées.autorisations.${d.value==="CJPI"?"ajouterMembreAccepté":"ajouterMembreExclus"}`)),1)]),_:2},1040,["prepend-icon"])]),default:a(()=>[e(z,{class:"mx-auto","max-width":500,"min-width":300},{default:a(()=>[e(W,null,{default:a(()=>[e(Pa,{multiples:"",interdits:d.value==="CJPI"?S.value:U.value,onSelectionnee:h[2]||(h[2]=m=>V(m))},null,8,["interdits"])]),_:1})]),_:1})]),_:1}),(d.value==="CJPI"?!S.value?.length:!U.value?.length)?(o(),q("p",Wa,_(t(s)(`nuées.autorisations.${d.value==="CJPI"?"aucunMembreAccepté":"aucunMembreExclus"}`)),1)):D("",!0),d.value==="CJPI"?(o(),c(me,{key:1},{default:a(()=>[(o(!0),q(X,null,L(S.value,m=>(o(),c(Ja,{key:m,"id-compte":m,onEffacer:h[3]||(h[3]=b=>G(b))},null,8,["id-compte"]))),128))]),_:1})):d.value==="IJPC"?(o(),c(me,{key:2},{default:a(()=>[(o(!0),q(X,null,L(U.value,m=>(o(),c(La,{key:m,"id-compte":m,onEffacer:h[4]||(h[4]=b=>k(b))},null,8,["id-compte"]))),128))]),_:1})):D("",!0)]),_:1})):(o(),c(W,{key:1},{default:a(()=>[$("div",Xa,[$("p",Qa,_(d.value==="CJPI"?t(s)("nuées.autorisations.parInvitation"):t(s)("nuées.autorisations.ouverteÀTous")),1),$("p",Za,_(d.value==="CJPI"?t(s)("nuées.autorisations.indiceParInvitation"):t(s)("nuées.autorisations.indiceOuverteÀTous")),1)])]),_:1})),e(xe,null,{default:a(()=>[e(ne),e(Te,{onClick:h[5]||(h[5]=m=>l.value=!1)}),e(Ve,{actif:re.value,onClick:h[6]||(h[6]=()=>de())},null,8,["actif"])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),et={class:"text-center"},at={key:0,class:"my-4 text-h6 text-disabled"},tt=R({__name:"CarteBdsDeNuée",props:{idNuee:{}},setup(j){const i=j,{$மொ:s}=F(),{mdAndUp:u}=oe(),r=se(),l=P(!1),{résultats:p}=ke(r.nuées.suivreBdsCorrespondantes,{idNuée:y(()=>i.idNuee)});return(x,d)=>(o(),c(le,{modelValue:l.value,"onUpdate:modelValue":d[1]||(d[1]=f=>l.value=f)},{activator:a(({props:f})=>[ie(x.$slots,"activateur",Q(Z({props:f})))]),default:a(()=>[e(z,{class:"mx-auto","min-width":t(u)?500:300},{default:a(()=>[e(pe,null,{default:a(()=>[e(fe,{class:"d-flex align-center"},{default:a(()=>[E(_(t(s)("nuées.bds.carte.titre"))+" ",1),e(ne),e(M,{icon:"mdi-close",size:"small",variant:"flat",onClick:d[0]||(d[0]=f=>l.value=!1)})]),_:1})]),_:1}),e(W,null,{default:a(()=>[e(me,null,{default:a(()=>[e(Sa,{init:{type:"nuée",id:x.idNuee}},{activateur:a(({props:f})=>[e(ue,w(f,{"prepend-icon":"mdi-database-plus-outline"}),{default:a(()=>[E(_(t(s)("nuées.bds.créer")),1)]),_:2},1040)]),_:1},8,["init"]),e(J),(o(!0),q(X,null,L(t(p),f=>(o(),c(He,{id:f,key:f},null,8,["id"]))),128)),$("div",et,[t(p)?.length?D("",!0):(o(),q("p",at,_(t(s)("nuées.bds.aucuneBd")),1))])]),_:1})]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),nt={class:"font-weight-bold"},st={class:"text-medium-emphasis text-caption"},it={class:"font-weight-bold"},lt={class:"text-medium-emphasis text-caption"},ot=R({__name:"CarteCopierNuée",props:{idNuee:{}},setup(j){const i=j,s=Ke(),{mdAndUp:u}=oe(),r=se(),{$மொ:l}=F(),p=P(!1),x=P(!1),d=P("dépendante"),f=P(!0),S=async()=>{x.value=!0;const U=d.value==="indépendante"?await r.nuées.copierNuée({idNuée:i.idNuee}):await r.nuées.créerNuée({nuéeParent:i.idNuee});x.value=!1,p.value=!1,f.value&&s.push(encodeURI(`/données/nuée/${encodeURIComponent(U)}`))};return(U,V)=>(o(),c(le,{modelValue:p.value,"onUpdate:modelValue":V[5]||(V[5]=k=>p.value=k)},{activator:a(({props:k})=>[ie(U.$slots,"activateur",Q(Z({props:k})))]),default:a(()=>[e(z,{class:"mx-auto",width:t(u)?500:300},{default:a(()=>[e(pe,null,{default:a(()=>[e(fe,{class:"d-flex align-center"},{default:a(()=>[E(_(t(l)("nuées.copier.titre"))+" ",1),e(ne),e(M,{icon:"mdi-close",size:"small",variant:"flat",onClick:V[0]||(V[0]=k=>p.value=!1)})]),_:1})]),_:1}),e(W,null,{default:a(()=>[e(Re,{modelValue:d.value,"onUpdate:modelValue":V[1]||(V[1]=k=>d.value=k)},{default:a(()=>[e(ve,{value:"indépendante",class:"my-2"},{label:a(()=>[$("div",null,[$("p",nt,_(t(l)("nuées.copier.indépendante")),1),$("p",st,_(t(l)("nuées.copier.indiceIndépendante")),1)])]),_:1}),e(ve,{value:"dépendante",class:"my-2"},{label:a(()=>[$("div",null,[$("p",it,_(t(l)("nuées.copier.dépendante")),1),$("p",lt,_(t(l)("nuées.copier.indiceDépendante")),1)])]),_:1})]),_:1},8,["modelValue"]),e(We,{modelValue:f.value,"onUpdate:modelValue":V[2]||(V[2]=k=>f.value=k),color:"primary",label:t(l)("nuées.copier.ouvrirCopie")},null,8,["modelValue","label"])]),_:1}),e(J),e(xe,null,{default:a(()=>[e(Ve,{actif:"","en-attente":x.value,onClick:V[3]||(V[3]=()=>S())},null,8,["en-attente"]),e(Te,{onClick:V[4]||(V[4]=k=>p.value=!1)})]),_:1})]),_:1},8,["width"])]),_:3},8,["modelValue"]))}}),ut=R({__name:"CarteStatutNuée",props:{idNuee:{}},setup(j){const i=j,{$மொ:s}=F(),{mdAndUp:u}=oe(),r=se(),l=P(!1),p=A(r.nuées.suivreStatutNuée,{idNuée:y(()=>i.idNuee)}),x=P();$e(()=>{x.value=p.value});const d=y(()=>p.value?.statut!==x.value?.statut||p.value?.idNouvelle!==x.value?.idNouvelle),f=P(!1),S=async()=>{f.value=!0,x.value&&await r.nuées.changerStatutNuée({idNuée:i.idNuee,statut:x.value}),f.value=!1,l.value=!1};return(U,V)=>(o(),c(le,{modelValue:l.value,"onUpdate:modelValue":V[3]||(V[3]=k=>l.value=k)},{activator:a(({props:k})=>[ie(U.$slots,"activateur",Q(Z({props:k})))]),default:a(()=>[e(z,{class:"mx-auto","min-width":t(u)?500:300},{default:a(()=>[e(pe,null,{default:a(()=>[e(fe,null,{default:a(()=>[E(_(t(s)("nuées.statut.carte.titre")),1)]),_:1})]),_:1}),e(W,null,{default:a(()=>[e(Ba,{initial:x.value,onChoisir:V[0]||(V[0]=k=>x.value=k)},{sélecteur:a(({choisirNouvelle:k})=>[e(Ua,{multiples:!1,onSelectionnee:G=>k(G[0])},null,8,["onSelectionnee"])]),_:1},8,["initial"])]),_:1}),e(xe,null,{default:a(()=>[e(ne),e(Te,{onClick:V[1]||(V[1]=k=>l.value=!1)}),e(Ve,{actif:d.value,"en-attente":f.value,onClick:V[2]||(V[2]=()=>S())},null,8,["actif","en-attente"])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),rt=R({__name:"CarteCodeNuée",props:{id:{}},setup(j){const{மொழி:i,மாற்றுமொழிகள்:s}=we(),u=y(()=>[i.value,...s.value]),r=j,l=y(()=>({ts:`import { créerConstellation, type nuées } from "@constl/ipa";

const client = créerConstellation();

const analyser = async (données: nuées.donnéesNuéeExportation) => {
    console.log(données)  // Faire quelque chose de plus intelligent ici :)
}
const fOublierDonnées = await client.nuées.suivreDonnéesExportation({
    idNuée: "${r.id}",
    // Modifier langues selon vos besoins
    langues: [${u.value.map(p=>'"'+p+'"').join(", ")}],
    f: analyser
});
`,py:`from constellationPy import Serveur, ClientSync

with Serveur():
    client = ClientSync()

    données = client.obt_données_nuée(
        id_nuée="${r.id}",
        # Modifier langues selon vos besoins
        langues=[${u.value.map(p=>'"'+p+'"').join(", ")}]
    )

    # Analyser ou sauvegarder les données ici, par exemple...
    données.exporter("fichier.ods")  # ou bien "fichier.xlsx" pour Excel

    # Accéder à un tableau en format pandas
    données_tableau = tableau_exporté_à_pandas(données["Un tableau"])
`,julia:`import Constellation

Constellation.avecServeur() do port
    Constellation.avecClient(port) do client
        donnéesRéseau = Constellation.obtDonnéesTableauNuée(
          client, 
          "${r.id}", 
          // Modifier langues selon vos besoins
          [${u.value.map(p=>'"'+p+'"').join(", ")}]
        )
    end
end`,r:`library(constellationR)

constellationR::avecClientEtServeur(
  function (client) {
    f <- function(résultats) {
      print(résultats)

      # Analyser les données ici...
    }

    oublier <- client$obtDonnéesTableauNuée(
      f=f,
      idNuée="${r.id}",
    )
  }
)
`}));return(p,x)=>(o(),c(Je,{codes:l.value,"langage-defaut":"py"},{activateur:a(({props:d})=>[ie(p.$slots,"activateur",Q(Z({props:d})))]),_:3},8,["codes"]))}}),dt=R({__name:"ItemAutorisationsNuée",props:{idNuee:{}},setup(j){const{$மொ:i}=F();return(s,u)=>(o(),c(ue,{"prepend-icon":"mdi-account-multiple-check-outline"},{default:a(()=>[e(Be,null,{default:a(()=>[E(_(t(i)("nuées.autorisations.item.titre")),1)]),_:1})]),_:1}))}}),ct=R({__name:"ItemBdsDeNuée",props:{idNuee:{}},setup(j){const i=j,{$மொ:s}=F(),u=se(),{résultats:r}=ke(u.nuées.suivreBdsCorrespondantes,{idNuée:y(()=>i.idNuee)}),l=y(()=>r.value?.length);return(p,x)=>(o(),c(ue,{"prepend-icon":"mdi-database-check-outline"},{default:a(()=>[e(Be,null,{default:a(()=>[E(_(t(s)("nuées.bds.item.titre",l.value)),1)]),_:1})]),_:1}))}}),mt=R({__name:"CarteCodeTableauNuée",props:{idNuee:{},clefTableau:{}},setup(j){const i=j,{மொழி:s,மாற்றுமொழிகள்:u}=we(),r=y(()=>[s.value,...u.value]),l={ts:`import { créerConstellation } from "@constl/ipa";

const client = créerConstellation();

const monAnalyse = async (données) => {
  console.log(données)
  // Faire quelque chose...
}

const fOublier = client.nuées.suivreDonnéesExportationTableau({
  idNuée: "${i.idNuee}",
  clefTableau: "${i.clefTableau}",
  langues: [${r.value.map(p=>'"'+p+'"').join(", ")}],  // Modifier langues selon vos besoins
  f: monAnalyse
});
`,py:`from constellationPy import Serveur, ClientSync

with Serveur():
    client = ClientSync()

    données = client.obt_données_tableau_nuée(
      idNuée: "${i.idNuee}",
      clefTableau: "${i.clefTableau}",
      # Modifier langues selon vos besoins
      langues=[${r.value.map(p=>'"'+p+'"').join(", ")}]
    )

    # Analyser ou sauvegarder les données ici...
    données.to_excel("./MesDonnéesExportées.xlsx")
`,julia:`import Constellation

Constellation.avecServeur() do port
  Constellation.avecClient(port) do client

    oublier = Constellation.suivre(
        client, 
        "nuées.suivreDonnéesExportationTableau", 
        Dict([
          ("idNuée","${i.idNuee}"),
          ("clefTableau","${i.clefTableau}"),
          ("langues", [${r.value.map(p=>'"'+p+'"').join(", ")}])
        ])
    ) do résultat
        print(résultat)
    end
  end
end

`,r:`library(constellationR)

constellationR::avecClientEtServeur(
  function (client) {
    
    données <- client$appeler(
      "tableaux.suivreDonnéesExportation", 
      list(
        idNuée="${i.idNuee}",
        clefTableau="${i.clefTableau}",
        langues=c(${r.value.map(p=>'"'+p+'"').join(", ")})
      )
    )
  }
)

`};return(p,x)=>(o(),c(Je,{codes:l,"langage-defaut":"py"},{activateur:a(({props:d})=>[ie(p.$slots,"activateur",Q(Z({props:d})))]),_:3}))}}),pt={class:"text-h6 text-disabled"},ft=["onClick"],vt=R({__name:"TableauNuée",props:{idNuee:{},idTableau:{},clefTableau:{}},setup(j){const{$மொ:i}=F(),s=se(),u=j,r=A(s.suivrePermission,{idObjet:y(()=>u.idTableau)}),l=A(s.tableaux.suivreVariables,{idTableau:y(()=>u.idTableau)}),p=A(s.nuées.suivreRèglesTableauNuée,{idNuée:y(()=>u.idNuee),clefTableau:y(()=>u.clefTableau)}),{résultats:x}=ke(s.nuées.suivreDonnéesTableauNuée,{idNuée:y(()=>u.idNuee),clefTableau:y(()=>u.clefTableau)}),d=y(()=>x.value?.map(m=>Object.assign({},m.élément.données,{idCompte:m.idCompte}))),f=y(()=>d.value?.toSorted((b,v)=>S.value&&S.value.map(g=>b[g.key]===void 0?v[g.key]===void 0?0:g.order==="asc"?1:-1:v[g.key]===void 0?b[g.key]===void 0?0:g.order==="asc"?-1:1:b[g.key]>v[g.key]?g.order==="asc"?1:-1:b[g.key]<v[g.key]?g.order==="asc"?-1:1:0).find(g=>g!==0)||0)),S=P(),U=A(s.nuées.suivreColonnesTableauNuée,{idNuée:y(()=>u.idNuee),clefTableau:y(()=>u.clefTableau)}),V=A(s.nuées.suivreColonnesEtCatégoriesTableauNuée,{idNuée:y(()=>u.idNuee),clefTableau:y(()=>u.clefTableau)}),k=y(()=>(U.value||[]).map(m=>{const b=V.value?.find(v=>v.id===m.id)?.catégorie;return{key:m.id,sortable:b===void 0||(b?.type==="simple"?ga(b.catégorie):!1),info:{index:m.index,catégorie:b,variable:m.variable}}})),G=y(()=>[...(U.value||[]).map(m=>({key:m.id})),{key:"idCompte"}]),re=async({idVariable:m,idColonne:b,index:v,règles:g})=>{b=await s.nuées.ajouterColonneTableauNuée({idTableau:u.idTableau,idVariable:m,idColonne:b}),v&&await s.nuées.changerColIndexTableauNuée({idTableau:u.idTableau,idColonne:b,val:!0});for(const B of g)await s.nuées.ajouterRègleTableauNuée({idTableau:u.idTableau,idColonne:b,règle:B})},de=async({idColonne:m,index:b,règles:v})=>{await s.nuées.changerColIndexTableauNuée({idTableau:u.idTableau,idColonne:m,val:b});for(const g of v.nouvelles)await s.nuées.ajouterRègleTableauNuée({idTableau:u.idTableau,idColonne:m,règle:g});for(const g of v.àEffacer)await s.nuées.effacerRègleTableauNuée({idTableau:u.idTableau,idRègle:g})},I=async({idColonne:m})=>{await s.nuées.effacerColonneTableauNuée({idTableau:u.idTableau,idColonne:m})},h=async()=>{await s.nuées.effacerTableauNuée({idNuée:u.idNuee,idTableau:u.idTableau})};return(m,b)=>(o(),c($a,{headers:G.value,items:f.value},qe({top:a(()=>[e(Va,{flat:"",density:"compact"},{default:a(()=>[e(ne),t(r)?(o(),c(Ra,{key:0,"id-tableau":m.idTableau,"variables-interdites":t(l),onNouvelle:b[0]||(b[0]=v=>re(v))},{activateur:a(({props:v})=>[e(M,w(v,{icon:"mdi-table-column-plus-after"}),null,16)]),_:1},8,["id-tableau","variables-interdites"])):D("",!0),e(mt,{"id-nuee":m.idNuee,"clef-tableau":m.clefTableau},{activateur:a(({props:v})=>[e(ae,{text:t(i)("code.indice"),"open-delay":200,location:"bottom"},{activator:a(({props:g})=>[e(M,w({...v,...g},{icon:"mdi-xml"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-nuee","clef-tableau"]),t(r)?(o(),c(ze,{key:1,onEffacer:b[1]||(b[1]=()=>h())},{activateurctivator:a(({props:v})=>[e(M,w(v,{icon:"mdi-delete",color:"error"}),null,16)]),_:1})):D("",!0)]),_:1})]),"no-data":a(()=>[$("span",pt,_(t(i)("tableaux.aucuneDonnée")),1)]),"header.idCompte":a(({column:v,isSorted:g,getSortIcon:B,toggleSort:ce})=>[$("span",{onClick:()=>ce(v)},[e(Qe,null,{default:a(({isHovering:Y,props:H})=>[$("span",Q(Z(H)),[E(_(t(i)("nuées.tableau.entêteContributrice"))+" ",1),v.sortable?(o(),q(X,{key:0},[g(v)?(o(),c(te,{key:0,icon:B(v)},null,8,["icon"])):(o(),c(te,{key:1,icon:"mdi-arrow-up",color:Y?"disabled":"rgba(255,255,255,0)"},null,8,["color"]))],64)):D("",!0)],16)]),_:2},1024)],8,ft)]),"item.idCompte":a(({item:v})=>[e(Xe,{compte:v.idCompte},null,8,["compte"])]),_:2},[L(k.value,v=>({name:`header.${v.key}`,fn:a(({column:g,isSorted:B,getSortIcon:ce,toggleSort:Y})=>[e(xa,{"id-colonne":v.key,"id-variable":v.info.variable,"id-tableau":m.idTableau,index:!!v.info.index,regles:t(p)?.filter(H=>H.colonne===v.key),"permission-modifier":!!t(r),ordonnable:g.sortable,"est-ordonnee":B(g),"icone-ordonner":ce(g),onBasculerOrdonner:()=>Y(g),onSauvegarder:H=>de({idColonne:v.key,...H}),onEffacer:()=>I({idColonne:v.key})},null,8,["id-colonne","id-variable","id-tableau","index","regles","permission-modifier","ordonnable","est-ordonnee","icone-ordonner","onBasculerOrdonner","onSauvegarder","onEffacer"])])})),L(k.value,v=>({name:`item.${v.key}`,fn:a(({item:g})=>[e(Ta,{categorie:v.info.catégorie?.catégorie,val:g[v.key],editable:!1},null,8,["categorie","val"])])}))]),1032,["headers","items"]))}}),_t=R({__name:"ItemMétadonnées",props:{id:{},clef:{},val:{},modifiable:{type:Boolean}},emits:["modifiee","effacee"],setup(j,{emit:i}){const s=j,u=i,r=P(),l=P(s.clef),p=()=>{u("modifiee",{clef:l.value,val:r.value})},x=()=>u("effacee");return(d,f)=>(o(),c(ue,null,qe({default:a(()=>[e(Oe,null,{default:a(()=>[e(_e,null,{default:a(()=>[E(_(d.clef),1)]),_:1}),e(_e,null,{default:a(()=>[e(ge,{modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=S=>r.value=S),readonly:!d.modifiable,onBlur:p},{default:a(()=>[E(_(d.val),1)]),_:1},8,["modelValue","readonly"])]),_:1})]),_:1})]),_:2},[d.modifiable?{name:"append",fn:a(()=>[e(te,{icon:"mdi-delete",onClick:x})]),key:"0"}:void 0]),1024))}}),bt=R({__name:"CarteMétadonnées",props:{modifiable:{type:Boolean},metadonnees:{}},setup(j){const{$மொ:i}=F(),s=oe(),u=P(!1),r=P(""),l=P(""),p=()=>{r.value="",l.value=""};return(x,d)=>(o(),c(le,{modelValue:u.value,"onUpdate:modelValue":d[2]||(d[2]=f=>u.value=f)},{activator:a(({props:f})=>[ie(x.$slots,"activateur",Q(Z({props:f})))]),default:a(()=>[e(z,{"min-width":t(s)?500:300,class:"mx-auto"},{default:a(()=>[e(pe,null,{default:a(()=>[e(fe,null,{default:a(()=>[E(_(t(i)("communs.métadonnées.titreCarte")),1)]),_:1})]),_:1}),e(W,null,{default:a(()=>[e(me,null,{default:a(()=>[x.modifiable?(o(),c(ue,{key:0},{default:a(()=>[e(Oe,null,{default:a(()=>[e(_e,{cols:4},{default:a(()=>[e(ge,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=f=>r.value=f),label:t(i)("communs.métadonnées.indiceClef"),variant:"outlined","hide-details":"",density:"compact"},null,8,["modelValue","label"])]),_:1}),e(_e,{cols:8},{default:a(()=>[e(ge,{modelValue:l.value,"onUpdate:modelValue":d[1]||(d[1]=f=>l.value=f),label:t(i)("communs.métadonnées.indiceVal"),variant:"outlined","hide-details":"",density:"compact","append-icon":"mdi-content-save-outline","onClick:append":p},null,8,["modelValue","label"])]),_:1})]),_:1}),e(J,{class:"my-2"})]),_:1})):D("",!0),(o(!0),q(X,null,L(Object.entries(x.metadonnees),f=>(o(),c(_t,{id:f[0],key:f[0],clef:f[0],val:f[1],modifiable:x.modifiable},null,8,["id","clef","val","modifiable"]))),128))]),_:1})]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),Nt={class:"text-center"},yt={class:"text-center"},Ct={key:0,class:"text-disabled"},gt={class:"text-center"},$t={class:"mt-6 text-h5"},xt={class:"d-flex flex-wrap"},Tt={class:"mt-6 text-h5"},Vt={key:0,class:"text-disabled"},kt={class:"mt-6 text-h5"},wt={class:"d-flex flex-wrap"},ht={class:"mt-6 text-h5"},jt={key:2,class:"text-center"},It={class:"text-h5 mt-5"},Gt=R({__name:"PageNuée",props:{id:{}},setup(j){const i=j,s=se(),{mdAndUp:u}=oe(),{isRtl:r}=Ze(),{$மொ:l}=F(),p=za(),{obtImageDéco:x}=aa();Ye(()=>{p.documentOuvert({id:i.id,à:Date.now()})});const d=y(()=>[{title:l("navigation.données"),href:encodeURI("/données/")},{title:U.value||l("nuées.sansNom"),disabled:!0}]),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:f}=we(),S=A(s.nuées.suivreNomsNuée,{idNuée:y(()=>i.id)}),U=f(S),V=async N=>{const{àEffacer:T,àAjouter:n}=Me({anciennes:S.value,nouvelles:N});for(const C of T)await s.nuées.effacerNomNuée({idNuée:i.id,langue:C});await s.nuées.sauvegarderNomsNuée({idNuée:i.id,noms:n})},k=A(s.nuées.suivreDescriptionsNuée,{idNuée:y(()=>i.id)}),G=f(k),re=async N=>{const{àEffacer:T,àAjouter:n}=Me({anciennes:k.value,nouvelles:N});for(const C of T)await s.nuées.effacerDescriptionNuée({idNuée:i.id,langue:C});await s.nuées.sauvegarderDescriptionsNuée({idNuée:i.id,descriptions:n})},de=ea(A(s.nuées.suivreImage,{idNuée:y(()=>i.id)})),I=x("logoBD"),h=async N=>{N?await s.nuées.sauvegarderImage({idNuée:i.id,image:{contenu:new Uint8Array(N.contenu),nomFichier:N.fichier}}):await s.nuées.effacerImage({idNuée:i.id})},m=x("vide"),b=A(s.suivrePermission,{idObjet:y(()=>i.id)}),v=A(s.réseau.suivreAuteursNuée,{idNuée:y(()=>i.id)}),g=A(s.nuées.suivreVariablesNuée,{idNuée:y(()=>i.id)}),B=A(s.nuées.suivreMotsClefsNuée,{idNuée:y(()=>i.id)}),ce=async N=>{const T=N.filter(C=>!B.value?.includes(C)),n=B.value?.filter(C=>!N.includes(C))||[];await s.nuées.ajouterMotsClefsNuée({idNuée:i.id,idsMotsClefs:T}),await Promise.all(n.map(C=>s.nuées.effacerMotClefNuée({idNuée:i.id,idMotClef:C})))},Y=A(s.nuées.suivreStatutNuée,{idNuée:y(()=>i.id)}),H=A(s.nuées.suivreMétadonnéesNuée,{idNuée:y(()=>i.id)}),Le=async({clef:N,val:T})=>{await s.nuées.sauvegarderMétadonnéeNuée({idNuée:i.id,clef:N,métadonnée:T})},ee=A(s.nuées.suivreTableauxNuée,{idNuée:y(()=>i.id)}),be=y(()=>{if(ee.value)return[...ee.value].sort((N,T)=>N.id>T.id?-1:1)}),O=P();$e(()=>{!O.value&&be.value?.length&&(O.value=be.value[0].clef),O.value&&!be.value?.map(N=>N.clef).includes(O.value)&&(O.value=void 0)});const K=P(!1),Ne=async({noms:N,cols:T})=>{K.value=!0;try{const n=await s.bds.ajouterTableauBd({idBd:i.id});await s.nuées.sauvegarderNomsTableauNuée({idTableau:n,noms:N}),await Promise.all(T.map(async C=>{await s.nuées.ajouterColonneTableauNuée({idTableau:n,idColonne:C.info.id,idVariable:C.info.variable}),C.info.index&&await s.nuées.changerColIndexTableauNuée({idTableau:n,idColonne:C.info.id,val:!0}),await Promise.all(C.règles.map(async ye=>await s.nuées.ajouterRègleTableauNuée({idTableau:n,idColonne:C.info.id,règle:ye})))}))}finally{K.value=!1}},Fe=async N=>{await s.nuées.effacerTableauNuée({idNuée:i.id,idTableau:N})},Ge=async()=>{await s.nuées.effacerNuée({idNuée:i.id})};return(N,T)=>(o(),c(ta,null,{default:a(()=>[$("div",null,[t(u)?(o(),c(ka,{key:0,items:d.value,class:"pa-0"},{divider:a(()=>[e(te,null,{default:a(()=>[E(_(t(r)?"mdi-chevron-left":"mdi-chevron-right"),1)]),_:1})]),title:a(({item:n})=>[e(wa,{disabled:n.disabled,onClick:C=>n.href&&N.$router.push(n.href)},{default:a(()=>[e(na,{texte:n.title,"longueur-max":35},null,8,["texte"])]),_:2},1032,["disabled","onClick"])]),_:1},8,["items"])):(o(),c(M,{key:1,icon:"mdi-arrow-left-top",variant:"flat",onClick:T[0]||(T[0]=()=>N.$router.push(encodeURI("/données/")))}))]),e(ia,{"src-image":t(de),"img-defaut":t(I),editable:!!t(b),"taille-avatar":t(u)?275:175,"max-taille-image":t(sa),onImageChangee:T[1]||(T[1]=n=>h(n))},null,8,["src-image","img-defaut","editable","taille-avatar","max-taille-image"]),$("div",Nt,[e(he,{"etiquette-nom":t(l)("objet.étiquetteNom"),"indice-nom":t(l)("objet.indiceNom"),"indice-langue":t(l)("objet.indiceLangue"),"texte-aucun-nom":t(l)("objet.texteAucunNom"),"noms-initiaux":t(S),titre:t(l)("objet.titreDialogueNoms"),"sous-titre":t(l)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!t(b),onAjusterNoms:V},{activateur:a(({props:n})=>[$("span",w(n,{class:"text-h4"}),[E(_(t(U)||t(l)("nuées.sansNom"))+" ",1),e(M,{icon:t(b)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),e(la,{id:N.id},null,8,["id"]),e(ne)]),$("div",yt,[e(Ie,{"n-max":5,items:t(B)},{jeton:a(({id:n})=>[e(je,{id:n},{activateur:a(({props:C})=>[e(ua,w(C,{id:n,class:"me-1 mb-1"}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:a(({id:n})=>[e(je,{id:n},{activateur:a(({props:C})=>[e(oa,w(C,{id:n}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),t(B)&&!t(B).length?(o(),q("span",Ct,_(t(l)("nuées.aucunMotClef")),1)):D("",!0),t(b)&&t(B)?(o(),c(ra,{key:1,originaux:t(B),onSauvegarder:T[2]||(T[2]=n=>ce(n))},null,8,["originaux"])):D("",!0)]),$("div",gt,[e(qa,{"id-nuee":N.id},{activateur:a(({props:n})=>[e(ae,{"open-delay":"200",location:"bottom",text:t(l)("épingler.épingler")},{activator:a(({props:C})=>[e(M,w({...n,...C},{icon:"",variant:"flat"}),{default:a(()=>[e(da,{id:N.id},null,8,["id"])]),_:2},1040)]),_:2},1032,["text"])]),_:1},8,["id-nuee"]),e(ha,{"id-objet":N.id,"noms-objet":t(S),"type-objet":"nuée"},{activateur:a(({props:n})=>[e(ae,{text:t(l)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:a(({props:C})=>[e(M,w({...n,...C},{icon:"mdi-download",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet","noms-objet"]),e(rt,{id:N.id},{activateur:a(({props:n})=>[e(ae,{text:t(l)("code.indice"),"open-delay":200,location:"bottom"},{activator:a(({props:C})=>[e(M,w({...n,...C},{icon:"mdi-xml",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id"]),e(ot,{"id-nuee":N.id},{activateur:a(({props:n})=>[e(ae,{"open-delay":"200",location:"bottom",text:t(l)("nuées.copier.indice")},{activator:a(({props:C})=>[e(M,w({...n,...C},{icon:"mdi-content-copy",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-nuee"]),t(H)?(o(),c(bt,{key:0,metadonnees:t(H),modifiable:!!t(b),onSauvegarde:T[3]||(T[3]=n=>Le(n))},{activateur:a(({props:n})=>[e(ae,{"open-delay":"200",location:"bottom",text:t(l)("nuées.métadonnéees.indice")},{activator:a(({props:C})=>[e(M,w({...n,...C},{icon:"mdi-bracket",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["metadonnees","modifiable"])):D("",!0),t(b)?(o(),c(ze,{key:1,onEffacer:T[4]||(T[4]=()=>Ge())},{activateur:a(({props:n})=>[e(ae,{"open-delay":"200",location:"bottom",text:t(l)("effacer.indice")},{activator:a(({props:C})=>[e(M,w({...n,...C},{variant:"flat",icon:""}),{default:a(()=>[e(te,{color:"error"},{default:a(()=>T[9]||(T[9]=[E("mdi-delete")])),_:1,__:[9]})]),_:2},1040)]),_:2},1032,["text"])]),_:1})):D("",!0)]),e(J),e(W,null,{default:a(()=>[e(he,{"etiquette-nom":t(l)("objet.étiquetteDescription"),"indice-nom":t(l)("objet.indiceDescription"),"indice-langue":t(l)("objet.indiceLangue"),"texte-aucun-nom":t(l)("objet.texteAucuneDescription"),"noms-initiaux":t(k),titre:t(l)("objet.titreDialogueDescriptions"),"sous-titre":t(l)("objet.sousTitreDialogueDescriptions"),"autorisation-modification":!!t(b),longue:"",onAjusterNoms:re},{activateur:a(({props:n})=>[$("span",{class:ca({"text-disabled":!t(G)})},_(t(G)||t(l)("communs.baseCarteObjet.sansDescription")),3),e(M,w(n,{icon:t(b)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"}),null,16,["icon"])]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),$("p",$t,_(t(l)("nuées.info")),1),e(J,{class:"mb-2"}),$("div",xt,[t(Y)&&(t(Y).statut!=="active"||t(b))?(o(),c(z,{key:0,flat:"",width:"200",class:"mb-3"},{default:a(()=>[e(ut,{"id-nuee":N.id},{activateur:a(({props:n})=>[e(ja,w(n,{"type-objet":"nuée",statut:t(Y)}),null,16,["statut"])]),_:1},8,["id-nuee"])]),_:1})):D("",!0),e(z,{flat:"",width:"200",class:"mb-3"},{default:a(()=>[e(ma,{id:N.id,auteurs:t(v),"permission-moderateur":t(b)==="MODÉRATEUR"},{activateur:a(({props:n})=>[e(Ia,w(n,{auteurs:t(v)}),null,16,["auteurs"])]),_:1},8,["id","auteurs","permission-moderateur"])]),_:1}),e(z,{flat:"",width:"200",class:"mb-3"},{default:a(()=>[e(pa,{id:N.id},{activateur:a(({props:n})=>[e(Da,w(n,{id:N.id}),null,16,["id"])]),_:1},8,["id"])]),_:1}),e(z,{flat:"",width:"200",class:"mb-3"},{default:a(()=>[e(Aa,{"id-objet":N.id,permission:t(b),"type-objet":"bd"},{activateur:a(({props:n})=>[e(Ea,w(n,{"id-objet":N.id}),null,16,["id-objet"])]),_:1},8,["id-objet","permission"])]),_:1})]),$("p",Tt,_(t(l)("nuées.variables")),1),e(J,{class:"mb-2"}),e(Ie,{"n-max":5,items:t(g)},{jeton:a(({id:n})=>[e(De,{id:n},{activateur:a(({props:C})=>[e(va,w(C,{id:n,class:"me-1 mb-1"}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:a(({id:n})=>[e(De,{id:n},{activateur:a(({props:C})=>[e(fa,w(C,{id:n}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),t(g)?.length?D("",!0):(o(),q("p",Vt,_(t(l)("nuées.aucuneVariable")),1)),$("p",kt,_(t(l)("nuées.gestion")),1),e(J,{class:"mb-2"}),$("div",wt,[e(z,{flat:"",width:"200",class:"mb-3"},{default:a(()=>[e(Ya,{"id-nuee":N.id},{activateur:a(({props:n})=>[e(dt,w(n,{"id-nuee":N.id}),null,16,["id-nuee"])]),_:1},8,["id-nuee"])]),_:1}),e(z,{flat:"",width:"200",class:"mb-3"},{default:a(()=>[e(tt,{"id-nuee":N.id},{activateur:a(({props:n})=>[e(ct,w(n,{"id-nuee":N.id}),null,16,["id-nuee"])]),_:1},8,["id-nuee"])]),_:1})]),e(me,null,{default:a(()=>[$("p",ht,_(t(l)("nuées.tableaux")),1),e(J),t(u)?(o(),c(Oa,{key:0,modelValue:O.value,"onUpdate:modelValue":T[6]||(T[6]=n=>O.value=n),class:"mt-2"},{default:a(()=>[(o(!0),q(X,null,L(t(ee),n=>(o(),c(Pe,{key:n.clef,value:n.clef,color:"primary",size:"small"},{default:a(()=>[e(Ma,{id:n.id,clef:n.clef,onEffacer:()=>Fe(n.id)},null,8,["id","clef","onEffacer"])]),_:2},1032,["value"]))),128)),e(Ce,{onSauvegarder:Ne},{activateur:a(({props:n})=>[t(b)?(o(),c(Pe,w({key:0},n,{"append-icon":K.value?void 0:"mdi-plus",disabled:K.value,variant:"tonal",class:"mx-1",label:"",onClick:T[5]||(T[5]=_a(()=>{},["stop"]))}),{default:a(()=>[E(_(t(l)("tableaux.nouveau"))+" ",1),K.value?(o(),c(Ae,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):D("",!0)]),_:2},1040,["append-icon","disabled"])):D("",!0)]),_:1})]),_:1},8,["modelValue"])):(o(),c(ba,{key:1,modelValue:O.value,"onUpdate:modelValue":T[7]||(T[7]=n=>O.value=n),class:"mt-4","show-arrows":"","center-active":""},{default:a(()=>[(o(!0),q(X,null,L(t(ee),n=>(o(),c(Se,{key:n.clef,value:n.clef},{default:a(({isSelected:C,toggle:ye})=>[e(Ee,{class:"mx-1",variant:"tonal",label:"",active:!1,color:C?"primary":"",onClick:ye},{default:a(()=>[E(_(n.clef.slice(0,10))+" ",1),e(te,{class:"ms-2",icon:"mdi-pencil",variant:"flat",size:"x-small"})]),_:2},1032,["color","onClick"])]),_:2},1032,["value"]))),128)),e(Se,{key:"nouveau",value:"nouveau"},{default:a(()=>[e(Ce,{onSauvegarder:Ne},{activateur:a(({props:n})=>[t(b)?(o(),c(Ee,w({key:0},n,{"append-icon":K.value?void 0:"mdi-plus",variant:"tonal",class:"mx-1",label:"",disabled:K.value}),{default:a(()=>[E(_(t(l)("tableaux.nouveau"))+" ",1),K.value?(o(),c(Ae,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):D("",!0)]),_:2},1040,["append-icon","disabled"])):D("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])),t(ee)&&!t(ee).length?(o(),q("div",jt,[$("p",It,_(t(l)("tableaux.aucun")),1),e(Na,{src:t(m),class:"my-5",contain:"",height:"175px"},null,8,["src"]),e(Ce,{onSauvegarder:Ne},{activateur:a(({props:n})=>[t(b)?(o(),c(M,w({key:0},n,{color:"primary",class:"mx-2",variant:"outlined"}),{prepend:a(()=>[e(te,{icon:"mdi-table",start:""})]),default:a(()=>[E(" "+_(t(l)("tableaux.nouveau")),1)]),_:2},1040)):D("",!0)]),_:1})])):D("",!0)]),_:1}),e(ya,{modelValue:O.value,"onUpdate:modelValue":T[8]||(T[8]=n=>O.value=n)},{default:a(()=>[(o(!0),q(X,null,L(t(ee),n=>(o(),c(Ca,{key:n.clef,value:n.clef},{default:a(()=>[e(vt,{"id-tableau":n.id,"clef-tableau":n.clef,"id-nuee":N.id},null,8,["id-tableau","clef-tableau","id-nuee"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});export{Gt as default};
//# sourceMappingURL=PageNuée-BvDWi4iQ.js.map
