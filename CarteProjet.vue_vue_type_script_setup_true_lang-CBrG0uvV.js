import{d as J,p as K,n as ds,ம as ps,r as z,s as U,q as r,ex as w,c as E,a as F,x as cs,h as t,w as a,b as e,V as fs,i as vs,e as ms,f as V,t as P,y as L,j as M,R as I,m as js,z as n,G as T,ey as C,d$ as f,as as O,ac as R,ad as G,aj as gs,ak as bs,al as _s,H as Q,I as W,J as X,ez as Ps,P as xs,K as Vs,b2 as H}from"./index-6ArONUkI.js";const qs={class:"font-weight-bold"},ws={class:"mb-2"},Ts={class:"font-weight-bold"},Cs={class:"font-weight-bold"},Us={class:"font-weight-bold"},ys=J({__name:"ÉpinglerProjet",props:{idProjet:{}},setup(m){const o=m,l=K(),{mdAndUp:q}=ds(),{$மொ:d}=ps(),j=z(!1),g=z(!1),b=U(l.projets.suivreÉpingleProjet,{idProjet:r(()=>o.idProjet)}),{sélection:_,dispositifs:p,spécifiques:c,valide:u,modifié:v}=w(r(()=>b.value?.base),"TOUS"),{sélection:x,dispositifs:Y,spécifiques:y,valide:Z,modifié:h}=w(r(()=>b.value?.bds.base),"TOUS"),{sélection:D,dispositifs:ss,spécifiques:A,valide:es,modifié:is}=w(r(()=>b.value?.bds.données.tableaux),"INSTALLÉ"),{sélection:N,dispositifs:ts,spécifiques:B,valide:as,modifié:os}=w(r(()=>b.value?.bds.données.fichiers),"INSTALLÉ"),ls=r(()=>u&&Z&&es&&as),ns=r(()=>v.value||h.value||is.value||os.value),$=z(!1),rs=async()=>{if($.value=!0,p.value!=="AUCUN"){const k={type:"projet",base:p.value,bds:{type:"bd",base:Y.value,données:{tableaux:ss.value,fichiers:ts.value}}};await l.projets.épinglerProjet({idProjet:o.idProjet,options:k})}else await us();S()},us=async()=>{await l.favoris.désépinglerFavori({idObjet:o.idProjet})},S=()=>{j.value=!1,$.value=!1};return(k,s)=>(F(),E(cs,{modelValue:j.value,"onUpdate:modelValue":s[10]||(s[10]=i=>j.value=i),"max-width":t(q)?500:300},{activator:a(({props:i})=>[Q(k.$slots,"activateur",W(X({props:i})))]),default:a(()=>[e(fs,null,{default:a(()=>[e(vs,null,{default:a(()=>[e(ms,{class:"d-flex align-center"},{default:a(()=>[V(P(t(d)("épingler.titre"))+" ",1),e(L),e(M,{icon:"mdi-close",size:"small",variant:"flat",onClick:S})]),_:1})]),_:1}),e(I),e(js,{style:{"overflow-y":"scroll"}},{default:a(()=>[e(T,{start:""},{default:a(()=>[...s[11]||(s[11]=[V("mdi-pin-outline",-1)])]),_:1}),n("span",qs,P(t(d)("épingler.dispositifsÉpingle")),1),e(C,{selection:t(_),"onUpdate:selection":s[0]||(s[0]=i=>f(_)?_.value=i:null),specifiques:t(c),"onUpdate:specifiques":s[1]||(s[1]=i=>f(c)?c.value=i:null),class:"ms-4"},null,8,["selection","specifiques"]),e(O,null,{default:a(()=>[R(n("div",null,[n("p",ws,[n("span",null,P(t(d)("épingler.optionsAvancées")),1),e(M,{icon:g.value?"mdi-chevron-up":"mdi-chevron-down",size:"xsmall",variant:"flat",onClick:s[2]||(s[2]=()=>g.value=!g.value)},null,8,["icon"])]),e(O,null,{default:a(()=>[R(n("div",null,[e(I,{class:"mb-2"}),n("p",null,[e(T,{start:""},{default:a(()=>[...s[12]||(s[12]=[V("mdi-database",-1)])]),_:1}),n("span",Ts,P(t(d)("épingler.dispositifsÉpingleBds")),1)]),e(C,{selection:t(x),"onUpdate:selection":s[3]||(s[3]=i=>f(x)?x.value=i:null),specifiques:t(y),"onUpdate:specifiques":s[4]||(s[4]=i=>f(y)?y.value=i:null),class:"ms-4"},null,8,["selection","specifiques"]),n("p",null,[e(T,{start:""},{default:a(()=>[...s[13]||(s[13]=[V("mdi-table-multiple",-1)])]),_:1}),n("span",Cs,P(t(d)("épingler.dispositifsÉpingleDonnées")),1)]),e(C,{selection:t(D),"onUpdate:selection":s[5]||(s[5]=i=>f(D)?D.value=i:null),specifiques:t(A),"onUpdate:specifiques":s[6]||(s[6]=i=>f(A)?A.value=i:null),class:"ms-4"},null,8,["selection","specifiques"]),n("p",null,[e(T,{start:""},{default:a(()=>[...s[14]||(s[14]=[V("mdi-image-multiple-outline",-1)])]),_:1}),n("span",Us,P(t(d)("épingler.dispositifsÉpingleDocuments")),1)]),e(C,{selection:t(N),"onUpdate:selection":s[7]||(s[7]=i=>f(N)?N.value=i:null),specifiques:t(B),"onUpdate:specifiques":s[8]||(s[8]=i=>f(B)?B.value=i:null),class:"ms-4"},null,8,["selection","specifiques"])],512),[[G,g.value]])]),_:1})],512),[[G,t(_)!=="AUCUN"]])]),_:1})]),_:1}),e(I),e(gs,null,{default:a(()=>[e(L),e(bs,{onClick:S}),e(_s,{actif:ls.value&&ns.value,"en-attente":$.value,onClick:s[9]||(s[9]=()=>rs())},null,8,["actif","en-attente"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),As=J({__name:"CarteProjet",props:{id:{}},setup(m){const o=m,l=K(),q=U(l.projets.suivreNomsProjet,{idProjet:r(()=>o.id)},{}),d=async p=>{const{àEffacer:c,àAjouter:u}=H({anciennes:q.value,nouvelles:p});for(const v of c)await l.projets.effacerNomProjet({idProjet:o.id,langue:v});await l.projets.sauvegarderNomsProjet({idProjet:o.id,noms:u})},j=U(l.projets.suivreDescriptionsProjet,{idProjet:r(()=>o.id)},{}),g=async p=>{const{àEffacer:c,àAjouter:u}=H({anciennes:j.value,nouvelles:p});for(const v of c)await l.projets.effacerDescriptionProjet({idProjet:o.id,langue:v});await l.projets.sauvegarderDescriptionsProjet({idProjet:o.id,descriptions:u})},b=U(l.réseau.suivreAuteursProjet,{idProjet:r(()=>o.id)}),_=async()=>{await l.projets.effacerProjet({idProjet:o.id})};return(p,c)=>(F(),E(Ps,{id:m.id,noms:t(q),descriptions:t(j),auteurs:t(b),"fichiers-epinglables":!0,onAjusterNoms:d,onAjusterDescriptions:g,onEffacer:_},{activateur:a(({props:u})=>[Q(p.$slots,"activateur",W(X({props:u})))]),epingler:a(({activateur:u,epingle:v})=>[e(ys,{"id-projet":m.id},{activateur:a(({props:x})=>[(F(),E(xs(u),Vs(x,{id:m.id,epingle:v}),null,16,["id","epingle"]))]),_:2},1032,["id-projet"])]),_:3},8,["id","noms","descriptions","auteurs"]))}});export{As as _,ys as a};
//# sourceMappingURL=CarteProjet.vue_vue_type_script_setup_true_lang-CBrG0uvV.js.map
