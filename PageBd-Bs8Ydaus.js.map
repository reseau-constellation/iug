{"version":3,"file":"PageBd-Bs8Ydaus.js","sources":["../../src/components/automatisations/CarteAutomatisationsBd.vue","../../src/components/bds/CarteCodeBd.vue","../../src/components/bds/CarteQualitéBd.vue","../../src/components/bds/CarteStatutBd.vue","../../src/components/licences/ItemLicence.vue","../../src/components/tableaux/TableauBd.vue","../../src/vues/données/PageBd.vue"],"sourcesContent":["<template>\n  <carte-automatisations-objet\n    type-objet=\"bd\"\n    :id-objet=\"idBd\"\n  >\n    <template #activator=\"{props: propsActivateur}\">\n      <slot\n        name=\"activator\"\n        v-bind=\"{props: propsActivateur}\"\n      ></slot>\n    </template>\n    {{ t('automatisations.carte.importations') }}\n    <v-divider />\n    <v-list>\n      <nouvelle-importation :id-bd=\"idBd\">\n        <template #activator=\"{props: propsActivateur}\">\n          <v-list-item\n            v-bind=\"propsActivateur\"\n            prepend-icon=\"mdi-upload-outline\"\n            :title=\"t('automatisations.carte.bds.ajouterImportationTableau')\"\n          />\n        </template>\n      </nouvelle-importation>\n      <item-automatisation-importation\n        v-for=\"auto in automatisationsImportationTableau\"\n        :key=\"auto.id\"\n        :specification=\"auto\"\n      />\n      <p\n        v-if=\"!automatisationsImportationTableau.length\"\n        class=\"text-disabled text-h6 text-center\"\n      >\n        {{ t('automatisations.carte.bds.aucuneImportationTableau') }}\n      </p>\n    </v-list>\n\n    {{ t('automatisations.carte.bds.exportationsTableaux') }}\n    <v-divider />\n    <v-list>\n      <nouvelle-exportation :id-bd=\"idBd\">\n        <template #activator=\"{props: propsActivateur}\">\n          <v-list-item\n            prepend-icon=\"mdi-download-outline\"\n            v-bind=\"propsActivateur\"\n          >\n            <v-list-item-title>\n              {{ t('automatisations.carte.bds.ajouterExportationTableau') }}\n            </v-list-item-title>\n          </v-list-item>\n        </template>\n      </nouvelle-exportation>\n      <item-automatisation-exportation\n        v-for=\"auto in automatisationsExportationTableau\"\n        :key=\"auto.id\"\n        :specification=\"auto\"\n      />\n      <p\n        v-if=\"!automatisationsExportationTableau.length\"\n        class=\"text-disabled text-h6 text-center\"\n      >\n        {{ t('automatisations.carte.bds.aucuneExportationTableau') }}\n      </p>\n    </v-list>\n  </carte-automatisations-objet>\n</template>\n<script setup lang=\"ts\">\nimport {suivre} from '@constl/vue';\nimport {computed} from 'vue';\n\nimport {மொழியாக்கத்தைப்_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport {utiliserConstellation} from '/@/components/utils';\n\nimport type {automatisation as typeAutomatisation} from '@constl/ipa';\nimport CarteAutomatisationsObjet from './CarteAutomatisationsObjet.vue';\nimport ItemAutomatisationExportation from './ItemAutomatisationExportation.vue';\nimport ItemAutomatisationImportation from './ItemAutomatisationImportation.vue';\nimport NouvelleExportation from '/@/components/automatisations/NouvelleExportation.vue';\nimport NouvelleImportation from '/@/components/automatisations/NouvelleImportation.vue';\n\nconst props = defineProps<{\n  idBd: string;\n}>();\n\nconst {$மொ: t} = மொழியாக்கத்தைப்_பயன்படுத்து();\n\nconst constl = utiliserConstellation();\n\n// Automatisations\nconst automatisations = suivre(constl.automatisations.suivreAutomatisations);\n\n// Cas spécial pour les bases de données - on inclut aussi les tableaux !\nconst tableauxBd = suivre(constl.bds.suivreTableauxBd, {\n  idBd: computed(() => props.idBd),\n});\n\nconst automatisationsTableaux = computed(() => {\n  const idsÀInclure = (tableauxBd.value || []).filter(t => t.id).map(t => t.id);\n  return automatisations.value?.filter(a =>\n    idsÀInclure.includes(a.type === 'exportation' ? a.idObjet : a.idTableau),\n  );\n});\n\nconst automatisationsImportationTableau = computed(() => {\n  return (automatisationsTableaux.value?.filter(a => a.type === 'importation') ||\n    []) as typeAutomatisation.SpécificationImporter[];\n});\nconst automatisationsExportationTableau = computed(() => {\n  return (automatisationsTableaux.value?.filter(a => a.type === 'exportation') ||\n    []) as typeAutomatisation.SpécificationExporter[];\n});\n</script>\n","<template>\n  <carte-code :codes=\"codes\">\n    <template #activator=\"{props: propsActivateur}\">\n      <slot\n        name=\"activator\"\n        v-bind=\"{props: propsActivateur}\"\n      ></slot>\n    </template>\n  </carte-code>\n</template>\n<script setup lang=\"ts\">\nimport {computed} from 'vue';\nimport CarteCode from '/@/components/communs/CarteCode.vue';\n\nconst props = defineProps<{id: string}>();\n\nconst codes = computed(() => {\n  return {\n    ts: `import { créerConstellation } from \"@constl/ipa\";\n\nconst client = créerConstellation();\n\nconst monAnalyse = async (données) => {\n  console.log(données)\n  // Faire quelque chose...\n}\n\nconst fOublier = client.bds.suivreDonnéesExportation({\n  idBd: \"${props.id}\",\n  f: monAnalyse\n})\n`,\n    py: `from constellationPy import Serveur, ClientSync\n    \nwith Serveur():\n    client = ClientSync()\n\n    données = client.bds.suivreDonnéesExportation(\n      idBd=\"${props.id}\"\n    )\n`,\n    julia: `import Constellation\n\nConstellation.avecServeur() do port\n  Constellation.avecClient(port) do client\n\n    oublier = Constellation.suivre(\n        client, \n        \"bds.suivreDonnéesExportation\", \n        Dict([(\"idBd\",\"${props.id}\")])\n    ) do résultat\n        print(résultat)\n    end\n  end\nend\n`,\n    r: `library(constellationR)\n\nconstellationR::avecClientEtServeur(\n  function (client) {\n    \n    données <- client$appeler(\n      \"bds.suivreDonnéesExportation\", \n      list(idBd=\"${props.id}\")\n    )\n  }\n)\n`,\n  };\n});\n</script>\n","<template>\n  <v-dialog\n    v-model=\"dialogue\"\n    :max-width=\"mdAndUp ? 500 : 300\"\n  >\n    <template #activator=\"{props: propsActivateur}\">\n      <slot\n        name=\"activator\"\n        v-bind=\"{props: propsActivateur}\"\n      ></slot>\n    </template>\n    <v-card>\n      <v-card-item>\n        <v-card-title class=\"d-flex align-center\">\n          {{ t('bds.qualité.titre') }}\n          <v-spacer />\n          <v-btn\n            icon=\"mdi-close\"\n            size=\"small\"\n            variant=\"flat\"\n            @click=\"dialogue = false\"\n          />\n        </v-card-title>\n      </v-card-item>\n      <v-card-text>\n        <v-list>\n          <v-list-item>\n            <template #prepend>\n              <v-avatar>\n                <v-progress-circular\n                  :model-value=\"(qualité?.total || 0) * 100\"\n                  :width=\"5\"\n                  :indeterminate=\"qualité?.total === undefined\"\n                  :color=\"couleurScore(qualité?.total).couleur\"\n                />\n              </v-avatar>\n            </template>\n            <template #title>Score total</template>\n          </v-list-item>\n          <v-divider />\n          <v-list-item>\n            <template #prepend>\n              <v-avatar>\n                <v-progress-circular\n                  :model-value=\"(qualité?.accès || 0) * 100\"\n                  :width=\"5\"\n                  :indeterminate=\"qualité?.accès === undefined\"\n                  :color=\"couleurScore(qualité?.accès).couleur\"\n                />\n              </v-avatar>\n            </template>\n            <template #title>Accessibilité</template>\n          </v-list-item>\n          <dialogue-licence\n            :licence=\"licenceBd\"\n            :licence-contenu=\"licenceContenuBd\"\n            :permission-modifier=\"!!monAutorisation\"\n          >\n            <template #activator=\"{props: propsActivateur}\">\n              <v-list-item v-bind=\"propsActivateur\">\n                <template #prepend>\n                  <v-avatar>\n                    <v-progress-circular\n                      v-if=\"qualité?.licence === undefined\"\n                      :width=\"5\"\n                      indeterminate\n                      :color=\"couleurScore(qualité?.licence).couleur\"\n                    />\n                    <v-icon\n                      :icon=\"qualité?.licence ? 'mdi-check' : 'mdi-alert-circle-outline'\"\n                      :color=\"couleurScore(qualité?.licence).couleur\"\n                    />\n                  </v-avatar>\n                </template>\n                <template #title>\n                  {{\n                    qualité?.licence === undefined\n                      ? t('bds.qualité.rechercheLicence')\n                      : qualité.licence\n                        ? t('bds.qualité.licenceOuverte')\n                        : t('bds.qualité.licenceNonReconnue')\n                  }}\n                </template>\n              </v-list-item>\n            </template>\n          </dialogue-licence>\n          <v-list-item>\n            <template #prepend>\n              <v-avatar>\n                <v-progress-circular\n                  :model-value=\"(qualité?.valide || 0) * 100\"\n                  :width=\"5\"\n                  :indeterminate=\"qualité?.valide === undefined\"\n                  :color=\"couleurScore(qualité?.valide).couleur\"\n                />\n              </v-avatar>\n            </template>\n            <template #title>Validation données</template>\n          </v-list-item>\n          <v-list-item>\n            <template #prepend>\n              <v-avatar>\n                <v-progress-circular\n                  :model-value=\"(qualité?.couverture || 0) * 100\"\n                  :width=\"5\"\n                  :indeterminate=\"qualité?.couverture === undefined\"\n                  :color=\"couleurScore(qualité?.couverture).couleur\"\n                />\n              </v-avatar>\n            </template>\n            <template #title>Couverture tests</template>\n          </v-list-item>\n        </v-list>\n      </v-card-text>\n    </v-card>\n  </v-dialog>\n</template>\n<script setup lang=\"ts\">\nimport {suivre} from '@constl/vue';\nimport {computed, ref} from 'vue';\nimport {useDisplay} from 'vuetify';\n\nimport {மொழியாக்கத்தைப்_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport DialogueLicence from '../licences/DialogueLicence.vue';\nimport {utiliserConstellation} from '/@/components/utils';\nimport {couleurScore} from '/@/utils';\n\nconst {mdAndUp} = useDisplay();\n\nconst {$மொ: t} = மொழியாக்கத்தைப்_பயன்படுத்து();\n\nconst props = defineProps<{idBd: string}>();\n\nconst constl = utiliserConstellation();\n\n// Navigation\nconst dialogue = ref(false);\n\n// Qualité\nconst qualité = suivre(constl.bds.suivreQualitéBd, {idBd: computed(() => props.idBd)});\n\n// Licence\nconst licenceBd = suivre(constl.bds.suivreLicenceBd, {idBd: computed(() => props.idBd)});\nconst licenceContenuBd = suivre(constl.bds.suivreLicenceContenuBd, {\n  idBd: computed(() => props.idBd),\n});\n\n// Permissions\nconst monAutorisation = suivre(constl.suivrePermission, {idObjet: computed(() => props.idBd)});\n</script>\n","<template>\n  <v-dialog v-model=\"dialogue\">\n    <template #activator=\"{props: propsActivateur}\">\n      <slot\n        name=\"activator\"\n        v-bind=\"{props: propsActivateur}\"\n      ></slot>\n    </template>\n    <v-card\n      class=\"mx-auto\"\n      :min-width=\"mdAndUp ? 500 : 300\"\n    >\n      <v-card-item>\n        <v-card-title>{{ t('données.statut.carte.titre') }}</v-card-title>\n      </v-card-item>\n      <v-card-text>\n        <choisir-statut\n          :initial=\"statutChoisi\"\n          @choisir=\"stt => (statutChoisi = stt)\"\n        >\n          <template #sélecteur=\"{choisirNouvelle}\">\n            <selecteur-bd\n              :multiples=\"false\"\n              @selectionnee=\"ids => choisirNouvelle(ids[0])\"\n            />\n          </template>\n        </choisir-statut>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer />\n        <btn-annuler @click=\"dialogue = false\" />\n        <btn-sauvegarder\n          :actif=\"modifié\"\n          :en-attente=\"enModification\"\n          @click=\"() => sauvegarder()\"\n        />\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script setup lang=\"ts\">\nimport {suivre} from '@constl/vue';\nimport {computed, ref, toRaw} from 'vue';\nimport {useDisplay} from 'vuetify';\n\nimport type {types} from '@constl/ipa';\nimport {மொழியாக்கத்தைப்_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport {watchEffect} from 'vue';\nimport {utiliserConstellation} from '../utils';\nimport SelecteurBd from './SélecteurBd.vue';\nimport BtnAnnuler from '/@/components/communs/BtnAnnuler.vue';\nimport BtnSauvegarder from '/@/components/communs/BtnSauvegarder.vue';\nimport ChoisirStatut from '/@/components/communs/ChoisirStatut.vue';\n\nconst props = defineProps<{idBd: string}>();\n\nconst {$மொ: t} = மொழியாக்கத்தைப்_பயன்படுத்து();\nconst {mdAndUp} = useDisplay();\n\nconst constl = utiliserConstellation();\n\n// Navigation\nconst dialogue = ref(false);\n\n// Statut\nconst statut = suivre(constl.bds.suivreStatutBd, {idBd: computed(() => props.idBd)});\nconst statutChoisi = ref<types.schémaStatut>();\nwatchEffect(() => {\n  statutChoisi.value = statut.value;\n});\nconst modifié = computed(() => {\n  return (\n    statut.value?.statut !== statutChoisi.value?.statut ||\n    statut.value?.idNouvelle !== statutChoisi.value?.idNouvelle\n  );\n});\nconst enModification = ref(false);\nconst sauvegarder = async () => {\n  enModification.value = true;\n  if (statutChoisi.value)\n    await constl.bds.changerStatutBd({\n      idBd: props.idBd,\n      statut: toRaw(statutChoisi.value),\n    });\n  enModification.value = false;\n  dialogue.value = false;\n};\n</script>\n","<template>\n  <v-list-item>\n    <template #prepend>\n      <v-icon\n        start\n        :color=\"licenceApprouvée ? 'primary' : 'error'\"\n      >\n        {{ licenceApprouvée ? 'mdi-scale-balance' : 'mdi-alert' }}\n      </v-icon>\n    </template>\n    <v-list-item-title>\n      {{ licenceApprouvée ? t(`licences.info.${licence}.abr`) : licence }}\n    </v-list-item-title>\n  </v-list-item>\n</template>\n<script setup lang=\"ts\">\nimport {suivre} from '@constl/vue';\nimport {computed} from 'vue';\n\nimport {மொழியாக்கத்தைப்_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport {utiliserConstellation} from '/@/components/utils';\n\nconst constl = utiliserConstellation();\n\nconst {$மொ: t} = மொழியாக்கத்தைப்_பயன்படுத்து();\n\nconst props = defineProps<{licence: string | undefined}>();\n\n// Info licence\nconst infoLicences = suivre(constl.licences.suivreLicences);\nconst licenceApprouvée = computed(() => {\n  return !!(\n    props.licence &&\n    infoLicences.value &&\n    Object.keys(infoLicences.value).includes(props.licence)\n  );\n});\n</script>\n","<template>\n  <v-data-table\n    v-model=\"sélectionnées\"\n    :headers=\"entêtes\"\n    :items=\"filesTableau\"\n    :show-select=\"!!autorisation\"\n    multi-sort\n    @update:sort-by=\"val => (ordonnerPar = val)\"\n  >\n    <template #top>\n      <v-toolbar\n        flat\n        density=\"compact\"\n      >\n        <v-spacer />\n        <v-btn\n          v-if=\"autorisation\"\n          icon\n          :disabled=\"!nFilesModifiées\"\n          @click=\"() => sauvegarderModifications()\"\n        >\n          <v-badge\n            v-if=\"nFilesModifiées\"\n            color=\"success\"\n            :content=\"nFilesModifiées\"\n          >\n            <v-icon\n              color=\"primary\"\n              icon=\"mdi-content-save-outline\"\n            />\n          </v-badge>\n          <v-icon\n            v-else\n            color=\"primary\"\n            icon=\"mdi-content-save-check-outline\"\n          />\n        </v-btn>\n        <v-switch\n          v-if=\"autorisation\"\n          v-model=\"édition\"\n          class=\"me-4\"\n          density=\"compact\"\n          color=\"primary\"\n          true-icon=\"mdi-pencil-outline\"\n          false-icon=\"mdi-pencil-off-outline\"\n          hide-details\n        />\n\n        <nouvelle-colonne\n          v-if=\"autorisation\"\n          :id-tableau=\"idTableau\"\n          :variables-interdites=\"variables\"\n          @nouvelle=\"col => ajouterColonne(col)\"\n        >\n          <template #activator=\"{props: propsActivateur}\">\n            <v-btn\n              v-bind=\"propsActivateur\"\n              icon=\"mdi-table-column-plus-after\"\n            ></v-btn>\n          </template>\n        </nouvelle-colonne>\n        <carte-automatisations-objet\n          :id-objet=\"idTableau\"\n          type-objet=\"tableau\"\n        >\n          <template #activator=\"{props: propsActivateurCarte}\">\n            <v-tooltip\n              :text=\"t('exportations.indice')\"\n              :open-delay=\"200\"\n              location=\"bottom\"\n            >\n              <template #activator=\"{props: propsActivateurIndice}\">\n                <v-btn\n                  v-bind=\"{...propsActivateurCarte, ...propsActivateurIndice}\"\n                  icon=\"mdi-sync\"\n                />\n              </template>\n            </v-tooltip>\n          </template>\n        </carte-automatisations-objet>\n        <carte-exportation-objet\n          :id-objet=\"idTableau\"\n          :noms-objet=\"noms\"\n          type-objet=\"tableau\"\n        >\n          <template #activator=\"{props: propsActivateurCarte}\">\n            <v-tooltip\n              :text=\"t('exportations.indice')\"\n              :open-delay=\"200\"\n              location=\"bottom\"\n            >\n              <template #activator=\"{props: propsActivateurIndice}\">\n                <v-btn\n                  v-bind=\"{...propsActivateurCarte, ...propsActivateurIndice}\"\n                  icon=\"mdi-download\"\n                />\n              </template>\n            </v-tooltip>\n          </template>\n        </carte-exportation-objet>\n        <carte-effacer\n          v-if=\"autorisation\"\n          @effacer=\"() => effacerTableau()\"\n        >\n          <template #activator=\"{props: propsActivateur}\">\n            <v-btn\n              v-bind=\"propsActivateur\"\n              icon=\"mdi-delete\"\n              color=\"error\"\n            />\n          </template>\n        </carte-effacer>\n      </v-toolbar>\n    </template>\n\n    <template #no-data>\n      <p class=\"my-4 text-h6 text-disabled\">{{ t('tableaux.aucuneDonnée') }}</p>\n      <nouvelle-importation\n        v-if=\"false\"\n        type=\"importation\"\n        :info-objet=\"{id: idTableau, typeObjet: 'tableau'}\"\n        :id-tableau=\"idTableau\"\n        :colonnes-tableau=\"colonnes || []\"\n      >\n        <template #activator=\"{props: propsActivateur}\">\n          <v-btn\n            v-bind=\"propsActivateur\"\n            class=\"mb-4\"\n            prepend-icon=\"mdi-import\"\n            variant=\"outlined\"\n          >\n            {{ t('tableaux.importer') }}\n          </v-btn>\n        </template>\n      </nouvelle-importation>\n    </template>\n\n    <template\n      v-for=\"c in colonnesVariables || []\"\n      :key=\"c.key\"\n      #[`header.${c.key}`]=\"{column, isSorted, getSortIcon, toggleSort}\"\n    >\n      <entete-colonne-tableau\n        :id-colonne=\"c.key\"\n        :id-variable=\"c.info.variable\"\n        :id-tableau=\"idTableau\"\n        :index=\"!!c.info.index\"\n        :regles=\"règles?.filter(r => r.colonne === c.key)\"\n        :permission-modifier=\"!!autorisation\"\n        :ordonnable=\"column.sortable\"\n        :est-ordonnee=\"isSorted(column)\"\n        :icone-ordonner=\"getSortIcon(column) as string\"\n        @basculer-ordonner=\"() => toggleSort(column)\"\n        @sauvegarder=\"info => modifierColonne({idColonne: c.key, ...info})\"\n        @effacer=\"() => effacerColonne({idColonne: c.key})\"\n      />\n    </template>\n\n    <template\n      v-if=\"autorisation\"\n      #[`header.actions`]\n    >\n      <v-btn\n        v-if=\"plusConfirmer\"\n        icon=\"mdi-delete\"\n        variant=\"flat\"\n        size=\"small\"\n        :loading=\"enEffaçage\"\n        :readonly=\"!sélectionnées.length\"\n        @click=\"() => effacerSélectionnées()\"\n      />\n      <v-dialog\n        v-else\n        v-model=\"dialogueEffacerSélectionnées\"\n      >\n        <template #activator=\"{props: propsActivateur}\">\n          <v-btn\n            v-bind=\"propsActivateur\"\n            icon\n            variant=\"flat\"\n            size=\"small\"\n            :readonly=\"!sélectionnées.length\"\n            :loading=\"enEffaçage\"\n          >\n            <v-icon\n              icon=\"mdi-delete\"\n              :color=\"sélectionnées.length ? undefined : 'disabled'\"\n            />\n          </v-btn>\n        </template>\n        <v-card\n          class=\"mx-auto\"\n          max-width=\"450\"\n        >\n          <v-card-item>\n            <v-card-title>\n              {{ t('tableaux.données.titreEffacerSélectionnées', sélectionnées.length) }}\n            </v-card-title>\n          </v-card-item>\n          <v-card-text>\n            <v-checkbox\n              v-model=\"choixPlusConfirmer\"\n              :label=\"t('tableaux.données.nePlusConfirmerEffacer')\"\n            ></v-checkbox>\n          </v-card-text>\n          <v-card-actions>\n            <v-spacer />\n            <v-btn\n              variant=\"text\"\n              :text=\"t('communs.oui')\"\n              @click=\"\n                () => {\n                  effacerSélectionnées();\n                  dialogueEffacerSélectionnées = false;\n                }\n              \"\n            />\n            <v-btn\n              variant=\"text\"\n              color=\"primary\"\n              :text=\"t('communs.non')\"\n              @click=\"dialogueEffacerSélectionnées = false\"\n            />\n            <v-spacer />\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </template>\n\n    <template\n      v-for=\"c in colonnesVariables\"\n      :key=\"c.key\"\n      #[`item.${c.key}`]=\"{item}\"\n    >\n      <cellule-tableau\n        :categorie=\"c.info.catégorie?.catégorie\"\n        :val=\"item.données[c.key]\"\n        :editable=\"!!autorisation && édition\"\n        @modifiee=\"({val}) => celluleModifiée({idCol: c.key, idÉlément: item.id, val})\"\n      />\n    </template>\n\n    <template #[`item.actions`]=\"{item}\">\n      <v-btn\n        v-if=\"item.id === '-1'\"\n        :disabled=\"!valeursÀAjouter\"\n        icon=\"mdi-content-save-outline\"\n        size=\"small\"\n        variant=\"flat\"\n        @click=\"() => ajouterLigne()\"\n      />\n      <v-btn\n        v-else-if=\"plusConfirmer && autorisation\"\n        size=\"small\"\n        icon=\"mdi-delete\"\n        variant=\"flat\"\n        :loading=\"enEffaçage\"\n        @click=\"() => effacerÉlément({idÉlément: item.id})\"\n      />\n      <v-dialog\n        v-else-if=\"autorisation\"\n        v-model=\"dialogueEffacer\"\n      >\n        <template #activator=\"{props: propsActivateur}\">\n          <v-btn\n            v-bind=\"propsActivateur\"\n            variant=\"flat\"\n            icon=\"mdi-delete\"\n            size=\"small\"\n            :loading=\"enEffaçage\"\n          />\n        </template>\n        <v-card\n          class=\"mx-auto\"\n          max-width=\"450\"\n        >\n          <v-card-item>\n            <v-card-title>\n              {{ t('tableaux.données.titreEffacer') }}\n            </v-card-title>\n          </v-card-item>\n          <v-card-text>\n            <v-checkbox\n              v-model=\"choixPlusConfirmer\"\n              :label=\"t('tableaux.données.nePlusConfirmerEffacer')\"\n            ></v-checkbox>\n          </v-card-text>\n          <v-card-actions>\n            <v-spacer />\n            <v-btn\n              variant=\"text\"\n              :text=\"t('communs.oui')\"\n              @click=\"\n                () => {\n                  effacerÉlément({idÉlément: item.id});\n                  dialogueEffacer = false;\n                }\n              \"\n            />\n            <v-btn\n              variant=\"text\"\n              color=\"primary\"\n              :text=\"t('communs.non')\"\n              @click=\"dialogueEffacer = false\"\n            />\n            <v-spacer />\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </template>\n  </v-data-table>\n</template>\n<script setup lang=\"ts\">\nimport type {tableaux, types, valid} from '@constl/ipa';\n\nimport {suivre} from '@constl/vue';\nimport {computed, ref, watch} from 'vue';\n\nimport {மொழியாக்கத்தைப்_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport {utiliserConstellation} from '../utils';\n\nimport EnteteColonneTableau from './EntêteColonneTableau.vue';\nimport NouvelleColonne from './NouvelleColonne.vue';\nimport CarteAutomatisationsObjet from '/@/components/automatisations/CarteAutomatisationsObjet.vue';\nimport CarteExportationObjet from '/@/components/automatisations/CarteExportationObjet.vue';\nimport NouvelleImportation from '/@/components/automatisations/NouvelleImportation.vue';\n\nimport {watchEffect} from 'vue';\nimport CelluleTableau from './cellules/CelluleTableau.vue';\nimport {triable} from './utils';\nimport CarteEffacer from '/@/components/communs/CarteEffacer.vue';\n\nconst {$மொ: t} = மொழியாக்கத்தைப்_பயன்படுத்து();\n\nconst constl = utiliserConstellation();\nconst props = defineProps<{idTableau: string; idBd: string}>();\n\n// Autorisation\nconst autorisation = suivre(constl.suivrePermission, {idObjet: computed(() => props.idTableau)});\n\n// Noms\nconst noms = suivre(constl.tableaux.suivreNomsTableau, {\n  idTableau: computed(() => props.idTableau),\n});\n\n// Variables\nconst variables = suivre(constl.tableaux.suivreVariables, {\n  idTableau: computed(() => props.idTableau),\n});\n\n// Colonnes\nconst colonnes = suivre(constl.tableaux.suivreColonnesTableau, {\n  idTableau: computed(() => props.idTableau),\n});\nconst colonnesAvecCatégories = suivre(constl.tableaux.suivreColonnesEtCatégoriesTableau, {\n  idTableau: computed(() => props.idTableau),\n});\n\nconst colonnesVariables = computed(() => {\n  return (colonnes.value || []).map(c => {\n    const catégorie = colonnesAvecCatégories.value?.find(col => col.id === c.id)?.catégorie;\n    return {\n      key: c.id,\n      sortable:\n        catégorie === undefined ||\n        (catégorie?.type === 'simple' ? triable(catégorie.catégorie) : false),\n      info: {\n        index: c.index,\n        catégorie,\n        variable: c.variable,\n      },\n    };\n  });\n});\n\nconst entêtes = computed(() => {\n  const colonneActions = {\n    key: 'actions',\n    sortable: false,\n    info: {},\n  };\n  return [...colonnesVariables.value, colonneActions];\n});\n\nconst ajouterColonne = async ({\n  idVariable,\n  idColonne,\n  index,\n  règles,\n}: {\n  idVariable: string;\n  idColonne?: string | undefined;\n  index: boolean;\n  règles: valid.règleVariable[];\n}) => {\n  idColonne = await constl.tableaux.ajouterColonneTableau({\n    idTableau: props.idTableau,\n    idVariable,\n    idColonne,\n  });\n  if (index)\n    await constl.tableaux.changerColIndex({\n      idTableau: props.idTableau,\n      idColonne,\n      val: true,\n    });\n  for (const règle of règles) {\n    await constl.tableaux.ajouterRègleTableau({\n      idTableau: props.idTableau,\n      idColonne,\n      règle,\n    });\n  }\n};\n\nconst modifierColonne = async ({\n  idColonne,\n  index,\n  // variable,  // à faire\n  règles,\n}: {\n  idColonne: string;\n  index: boolean;\n  // variable: string;\n  règles: {\n    nouvelles: valid.règleVariable[];\n    àEffacer: string[];\n  };\n}) => {\n  await constl.tableaux.changerColIndex({idTableau: props.idTableau, idColonne, val: index});\n  for (const r of règles.nouvelles)\n    await constl.tableaux.ajouterRègleTableau({\n      idTableau: props.idTableau,\n      idColonne,\n      règle: r,\n    });\n  // await constl.tableaux.changerVariableColonne({idTableau: props.idTableau, idColonne, variable})\n  for (const r of règles.àEffacer)\n    await constl.tableaux.effacerRègleTableau({\n      idTableau: props.idTableau,\n      idRègle: r,\n    });\n};\n\nconst effacerColonne = async ({idColonne}: {idColonne: string}) => {\n  await constl.tableaux.effacerColonneTableau({\n    idTableau: props.idTableau,\n    idColonne,\n  });\n};\n\n// Données\nconst données = suivre(constl.tableaux.suivreDonnées<tableaux.élémentBdListeDonnées>, {\n  idTableau: computed(() => props.idTableau),\n});\nconst filesTableau = computed(() => {\n  const ordonnées = données.value?.toSorted((a, b) => {\n    if (!ordonnerPar.value) return 0;\n    else {\n      return (\n        ordonnerPar.value\n          .map(o => {\n            if (a.données[o.key] === undefined)\n              return b.données[o.key] === undefined ? 0 : o.order === 'asc' ? 1 : -1;\n            else if (b.données[o.key] === undefined)\n              return a.données[o.key] === undefined ? 0 : o.order === 'asc' ? -1 : 1;\n            return a.données[o.key] > b.données[o.key]\n              ? o.order === 'asc'\n                ? 1\n                : -1\n              : a.données[o.key] < b.données[o.key]\n                ? o.order === 'asc'\n                  ? -1\n                  : 1\n                : 0;\n          })\n          .find(x => x !== 0) || 0\n      );\n    }\n  });\n\n  const nouvelleFile: tableaux.élémentDonnées<tableaux.élémentBdListeDonnées> = {\n    id: '-1',\n    données: {},\n  };\n  return édition.value && ordonnées ? [nouvelleFile, ...ordonnées] : ordonnées;\n});\n\nconst ordonnerPar = ref<{key: string; order: 'asc' | 'desc'}[]>();\n\n// Sélection files\nconst sélectionnées = ref<string[]>([]);\n\n// Règles\nconst règles = suivre(constl.tableaux.suivreRègles, {idTableau: computed(() => props.idTableau)});\n\n// Modification valeurs\nconst édition = ref(false);\n\nconst modifsEnCours = ref(false);\nconst modifications = ref<{\n  [idÉlément: string]: {[idCol: string]: types.élémentsBd | File | undefined};\n}>();\nconst modificationsDéfinitives = computed<\n  {idÉlément: string; vals: {[idCol: string]: types.élémentsBd | File | undefined}}[]\n>(() => {\n  const définitives: {\n    idÉlément: string;\n    vals: {[idCol: string]: types.élémentsBd | File | undefined};\n  }[] = [];\n  for (const [idÉlément, modifsÉlément] of Object.entries(modifications.value || {})) {\n    const élémentExistant = données.value?.find(d => d.id === idÉlément);\n    if (!élémentExistant) continue; // Ne devrait pas arriver\n    if (différence({modifs: modifsÉlément, original: élémentExistant.données})) {\n      définitives.push({\n        idÉlément,\n        vals: modifsÉlément,\n      });\n    }\n  }\n  return définitives;\n});\nconst nFilesModifiées = computed(() => {\n  return modificationsDéfinitives.value.length + (Object.keys(nouvelleLigne.value).length ? 1 : 0);\n});\n\nconst différence = ({\n  modifs,\n  original,\n}: {\n  modifs: {\n    [idCol: string]: types.élémentsBd | File | undefined;\n  };\n  original: {\n    [idCol: string]: types.élémentsBd | File | undefined;\n  };\n}): boolean => {\n  return Object.keys(modifs).some(idCol => {\n    return original[idCol] !== modifs[idCol];\n  });\n};\n\nconst nouvelleLigne = ref<{[idCol: string]: types.élémentsBd | File}>({});\nwatchEffect(() => {\n  if (!édition.value) nouvelleLigne.value = {};\n});\nconst valeursÀAjouter = computed(() => {\n  return Object.keys(nouvelleLigne.value).length > 0;\n});\n\nconst celluleModifiée = ({\n  val,\n  idCol,\n  idÉlément,\n}: {\n  val: types.élémentsBd | File | undefined;\n  idCol: string;\n  idÉlément: string;\n}) => {\n  if (idÉlément === '-1') {\n    if (val !== undefined) nouvelleLigne.value[idCol] = val;\n    else delete nouvelleLigne.value[idCol];\n  } else {\n    const modifs = modifications.value || {};\n    if (!modifs[idÉlément]) modifs[idÉlément] = {};\n    modifs[idÉlément][idCol] = val;\n    modifications.value = modifs;\n  }\n};\n\nconst sfipifierFichiers = async <T,>({\n  vals,\n}: {\n  vals: {[idCol: string]: T | File};\n}): Promise<{[idCol: string]: T}> => {\n  return Object.fromEntries(\n    await Promise.all(\n      Object.entries(vals).map(async ([idCol, val]) => {\n        if (val instanceof File) {\n          const id = await constl.ajouterÀSFIP({\n            contenu: new Uint8Array(await val.arrayBuffer()),\n            nomFichier: val.name,\n          });\n          return [idCol, id];\n        } else {\n          return [idCol, val];\n        }\n      }),\n    ),\n  );\n};\n\nconst sauvegarderModifications = async () => {\n  modifsEnCours.value = true;\n\n  for (const {idÉlément, vals} of modificationsDéfinitives.value) {\n    await constl.tableaux.modifierÉlément({\n      idTableau: props.idTableau,\n      idÉlément,\n      vals: await sfipifierFichiers({vals}),\n    });\n  }\n  if (valeursÀAjouter.value) await ajouterLigne();\n  modifications.value = undefined;\n  modifsEnCours.value = false;\n};\n\nconst ajouterLigne = async () => {\n  await constl.tableaux.ajouterÉlément({\n    idTableau: props.idTableau,\n    vals: await sfipifierFichiers({vals: nouvelleLigne.value}),\n  });\n  nouvelleLigne.value = {};\n};\n\n// Effacer données\nconst plusConfirmer = ref(false);\nconst choixPlusConfirmer = ref(false);\nconst enEffaçage = ref(false);\n\nconst dialogueEffacer = ref(false);\nconst dialogueEffacerSélectionnées = ref(false);\n\nwatch([dialogueEffacer, dialogueEffacerSélectionnées], () => {\n  // Il faut faire ça ici, car sinon on désactive le dialogue en cliquant sur l'option \"Ne plus me demander\"\n  plusConfirmer.value = choixPlusConfirmer.value;\n});\n\nconst effacerÉlément = async ({idÉlément}: {idÉlément: string}) => {\n  enEffaçage.value = true;\n  await constl.tableaux.effacerÉlément({idTableau: props.idTableau, idÉlément});\n  enEffaçage.value = false;\n};\n\nconst effacerSélectionnées = async () => {\n  enEffaçage.value = true;\n  await Promise.all(sélectionnées.value.map(idÉlément => effacerÉlément({idÉlément})));\n  sélectionnées.value = [];\n  enEffaçage.value = false;\n};\n\n// Effacer tableau\nconst effacerTableau = async () => {\n  await constl.bds.effacerTableauBd({idBd: props.idBd, idTableau: props.idTableau});\n};\n</script>\n","<template>\n  <v-container>\n    <div>\n      <v-breadcrumbs\n        v-if=\"mdAndUp\"\n        :items=\"petitPousset\"\n        class=\"pa-0\"\n      >\n        <template #divider>\n          <v-icon>{{ isRtl ? 'mdi-chevron-left' : 'mdi-chevron-right' }}</v-icon>\n        </template>\n        <template #title=\"{item}\">\n          <v-breadcrumbs-item\n            :disabled=\"item.disabled\"\n            @click=\"item.href && $router.push(item.href)\"\n          >\n            <TexteTronque\n              :texte=\"item.title\"\n              :longueur-max=\"35\"\n            />\n          </v-breadcrumbs-item>\n        </template>\n      </v-breadcrumbs>\n      <v-btn\n        v-else\n        icon=\"mdi-arrow-left-top\"\n        variant=\"flat\"\n        @click=\"() => $router.push(encodeURI('/données/'))\"\n      />\n    </div>\n\n    <image-editable\n      :src-image=\"image\"\n      :img-defaut=\"imgDéfaut\"\n      :editable=\"!!monAutorisation\"\n      :taille-avatar=\"mdAndUp ? 275 : 175\"\n      :max-taille-image=\"MAX_TAILLE_IMAGE\"\n      @image-changee=\"image => modifierImage(image)\"\n    />\n\n    <div class=\"text-center\">\n      <DialogueNoms\n        :etiquette-nom=\"t('objet.étiquetteNom')\"\n        :indice-nom=\"t('objet.indiceNom')\"\n        :indice-langue=\"t('objet.indiceLangue')\"\n        :texte-aucun-nom=\"t('objet.texteAucunNom')\"\n        :noms-initiaux=\"noms\"\n        :titre=\"t('objet.titreDialogueNoms')\"\n        :sous-titre=\"t('objet.sousTitreDialogueNoms')\"\n        :autorisation-modification=\"!!monAutorisation\"\n        @ajuster-noms=\"ajusterNoms\"\n      >\n        <template #activator=\"{props: propsActivateur}\">\n          <span\n            v-bind=\"propsActivateur\"\n            class=\"text-h4\"\n          >\n            {{ nomTraduit || t('bds.sansNom') }}\n            <v-btn\n              :icon=\"monAutorisation ? 'mdi-pencil' : 'mdi-earth'\"\n              variant=\"flat\"\n              size=\"small\"\n            ></v-btn>\n          </span>\n        </template>\n      </DialogueNoms>\n      <lien-objet :id=\"id\" />\n\n      <v-spacer />\n    </div>\n\n    <div class=\"text-center\">\n      <SérieJetons\n        :n-max=\"5\"\n        :items=\"motsClefs\"\n      >\n        <template #jeton=\"{id: idMotClef}\">\n          <carte-mot-clef :id=\"idMotClef\">\n            <template #activator=\"{props: propsActivateur}\">\n              <JetonMotClef\n                v-bind=\"propsActivateur\"\n                :id=\"idMotClef\"\n              />\n            </template>\n          </carte-mot-clef>\n        </template>\n        <template #itemListe=\"{id: idMotClef}\">\n          <carte-mot-clef :id=\"idMotClef\">\n            <template #activator=\"{props: propsActivateur}\">\n              <item-mot-clef\n                v-bind=\"propsActivateur\"\n                :id=\"idMotClef\"\n              />\n            </template>\n          </carte-mot-clef>\n        </template>\n      </SérieJetons>\n      <span\n        v-if=\"motsClefs && !motsClefs.length\"\n        class=\"text-disabled\"\n      >\n        {{ t('bds.aucunMotClef') }}\n      </span>\n      <EditeurMotsClefs\n        v-if=\"monAutorisation && motsClefs\"\n        :originaux=\"motsClefs\"\n        @sauvegarder=\"ids => sauvegarderMotsClefs(ids)\"\n      />\n    </div>\n\n    <div class=\"text-center\">\n      <epingler-bd :id-bd=\"id\">\n        <template #activator=\"{props: propsActivateurCarte}\">\n          <v-tooltip\n            open-delay=\"200\"\n            location=\"bottom\"\n            :text=\"t('épingler.épingler')\"\n          >\n            <template #activator=\"{props: propsActivateurIndice}\">\n              <v-btn\n                v-bind=\"{...propsActivateurCarte, ...propsActivateurIndice}\"\n                icon\n                variant=\"flat\"\n              >\n                <IconeEpingle :id=\"id\" />\n              </v-btn>\n            </template>\n          </v-tooltip>\n        </template>\n      </epingler-bd>\n\n      <carte-exportation-objet\n        :id-objet=\"id\"\n        :noms-objet=\"noms\"\n        type-objet=\"bd\"\n      >\n        <template #activator=\"{props: propsActivateurCarte}\">\n          <v-tooltip\n            :text=\"t('exportations.indice')\"\n            :open-delay=\"200\"\n            location=\"bottom\"\n          >\n            <template #activator=\"{props: propsActivateurIndice}\">\n              <v-btn\n                v-bind=\"{...propsActivateurCarte, ...propsActivateurIndice}\"\n                icon=\"mdi-download\"\n                variant=\"flat\"\n              />\n            </template>\n          </v-tooltip>\n        </template>\n      </carte-exportation-objet>\n\n      <carte-code-bd :id=\"id\">\n        <template #activator=\"{props: propsActivateurCarte}\">\n          <v-tooltip\n            :text=\"t('code.indice')\"\n            :open-delay=\"200\"\n            location=\"bottom\"\n          >\n            <template #activator=\"{props: propsActivateurIndice}\">\n              <v-btn\n                v-bind=\"{...propsActivateurCarte, ...propsActivateurIndice}\"\n                icon=\"mdi-xml\"\n                variant=\"flat\"\n              />\n            </template>\n          </v-tooltip>\n        </template>\n      </carte-code-bd>\n\n      <carte-copier\n        v-if=\"false\"\n        :id=\"id\"\n      >\n        <template #activator=\"{props: propsActivateurCarte}\">\n          <v-tooltip\n            open-delay=\"200\"\n            location=\"bottom\"\n            :text=\"t('copier.indice')\"\n          >\n            <template #activator=\"{props: propsActivateurIndice}\">\n              <v-btn\n                v-bind=\"{...propsActivateurCarte, ...propsActivateurIndice}\"\n                icon=\"mdi-content-copy\"\n                variant=\"flat\"\n              />\n            </template>\n          </v-tooltip>\n        </template>\n      </carte-copier>\n\n      <carte-effacer\n        v-if=\"!!monAutorisation\"\n        @effacer=\"effacerBd\"\n      >\n        <template #activator=\"{props: propsActivateurCarte}\">\n          <v-tooltip\n            open-delay=\"200\"\n            location=\"bottom\"\n            :text=\"t('effacer.indice')\"\n          >\n            <template #activator=\"{props: propsActivateurIndice}\">\n              <v-btn\n                v-bind=\"{...propsActivateurCarte, ...propsActivateurIndice}\"\n                variant=\"flat\"\n                icon\n              >\n                <v-icon color=\"error\">mdi-delete</v-icon>\n              </v-btn>\n            </template>\n          </v-tooltip>\n        </template>\n      </carte-effacer>\n    </div>\n\n    <v-divider />\n    <v-card-text>\n      <DialogueNoms\n        :etiquette-nom=\"t('objet.étiquetteDescription')\"\n        :indice-nom=\"t('objet.indiceDescription')\"\n        :indice-langue=\"t('objet.indiceLangue')\"\n        :texte-aucun-nom=\"t('objet.texteAucuneDescription')\"\n        :noms-initiaux=\"descriptions\"\n        :titre=\"t('objet.titreDialogueDescriptions')\"\n        :sous-titre=\"t('objet.sousTitreDialogueDescriptions')\"\n        :autorisation-modification=\"!!monAutorisation\"\n        longue\n        @ajuster-noms=\"ajusterDescriptions\"\n      >\n        <template #activator=\"{props: propsActivateur}\">\n          <span :class=\"{'text-disabled': !descrTraduite}\">{{\n            descrTraduite || t('communs.baseCarteObjet.sansDescription')\n          }}</span>\n          <v-btn\n            v-bind=\"propsActivateur\"\n            :icon=\"monAutorisation ? 'mdi-pencil' : 'mdi-earth'\"\n            variant=\"flat\"\n            size=\"small\"\n          ></v-btn>\n        </template>\n      </DialogueNoms>\n\n      <p class=\"mt-6 text-h5\">\n        {{ t('bds.info') }}\n      </p>\n      <v-divider class=\"mb-2\" />\n      <div class=\"d-flex flex-wrap\">\n        <v-card\n          v-if=\"statut && (statut.statut !== 'active' || monAutorisation)\"\n          flat\n          width=\"200\"\n          class=\"mb-3\"\n        >\n          <carte-statut-bd :id-bd=\"id\">\n            <template #activator=\"{props: propsActivateur}\">\n              <item-statut\n                v-bind=\"propsActivateur\"\n                type-objet=\"bd\"\n                :statut=\"statut\"\n              />\n            </template>\n          </carte-statut-bd>\n        </v-card>\n        <v-card\n          flat\n          width=\"200\"\n          class=\"mb-3\"\n        >\n          <carte-qualite-bd :id-bd=\"id\">\n            <template #activator=\"{props: propsActivateur}\">\n              <item-qualite-bd\n                v-bind=\"propsActivateur\"\n                :id=\"id\"\n              />\n            </template>\n          </carte-qualite-bd>\n        </v-card>\n        <v-card\n          flat\n          width=\"200\"\n          class=\"mb-3\"\n        >\n          <gerer-auteurs\n            :id=\"id\"\n            :auteurs=\"auteurs\"\n            :permission-moderateur=\"monAutorisation === 'MODÉRATEUR'\"\n          >\n            <template #activator=\"{props: propsActivateur}\">\n              <item-auteurs\n                v-bind=\"propsActivateur\"\n                :auteurs=\"auteurs\"\n              />\n            </template>\n          </gerer-auteurs>\n        </v-card>\n        <v-card\n          flat\n          width=\"200\"\n          class=\"mb-3\"\n        >\n          <dialogue-licence\n            :licence=\"licence\"\n            :licence-contenu=\"licenceContenu\"\n            :permission-modifier=\"monAutorisation === 'MODÉRATEUR'\"\n            @changer-licence=\"changerLicence\"\n          >\n            <template #activator=\"{props: propsActivateur}\">\n              <item-licence\n                v-bind=\"propsActivateur\"\n                :licence=\"licence\"\n                @changer-licence=\"changerLicence\"\n              />\n            </template>\n          </dialogue-licence>\n        </v-card>\n        <v-card\n          flat\n          width=\"200\"\n          class=\"mb-3\"\n        >\n          <carte-replications-objet :id=\"id\">\n            <template #activator=\"{props: propsActivateur}\">\n              <item-replications-objet\n                v-bind=\"propsActivateur\"\n                :id=\"id\"\n              />\n            </template>\n          </carte-replications-objet>\n        </v-card>\n        <v-card\n          flat\n          width=\"200\"\n          class=\"mb-3\"\n        >\n          <carte-automatisations-bd\n            :id-bd=\"id\"\n            :permission=\"monAutorisation\"\n            type-objet=\"bd\"\n          >\n            <template #activator=\"{props: propsActivateur}\">\n              <item-automatisations-objet\n                v-bind=\"propsActivateur\"\n                :id-objet=\"id\"\n              />\n            </template>\n          </carte-automatisations-bd>\n        </v-card>\n      </div>\n      <p class=\"mt-6 text-h5\">\n        {{ t('bds.variables') }}\n      </p>\n      <v-divider class=\"mb-2\" />\n      <SérieJetons\n        :n-max=\"5\"\n        :items=\"variables\"\n      >\n        <template #jeton=\"{id: idVariable}\">\n          <carte-variable :id=\"idVariable\">\n            <template #activator=\"{props: propsActivateur}\">\n              <JetonVariable\n                v-bind=\"propsActivateur\"\n                :id=\"idVariable\"\n              />\n            </template>\n          </carte-variable>\n        </template>\n        <template #itemListe=\"{id: idVariable}\">\n          <carte-variable :id=\"idVariable\">\n            <template #activator=\"{props: propsActivateur}\">\n              <ItemVariable\n                v-bind=\"propsActivateur\"\n                :id=\"idVariable\"\n              />\n            </template>\n          </carte-variable>\n        </template>\n      </SérieJetons>\n      <p\n        v-if=\"!variables?.length\"\n        class=\"text-disabled\"\n      >\n        {{ t('bds.aucuneVariable') }}\n      </p>\n      <v-list>\n        <p class=\"mt-6 text-h5\">\n          {{ t('bds.tableaux') }}\n        </p>\n        <v-divider />\n        <v-tabs\n          v-if=\"mdAndUp\"\n          v-model=\"tableauActif\"\n          class=\"mt-2\"\n        >\n          <v-tab\n            v-for=\"ong in tableaux\"\n            :key=\"ong.clef\"\n            :value=\"ong.clef\"\n            color=\"primary\"\n            size=\"small\"\n            density=\"compact\"\n          >\n            <entete-tableau\n              :id=\"ong.id\"\n              :clef=\"ong.clef\"\n            />\n          </v-tab>\n\n          <nouveau-tableau @sauvegarder=\"ajouterTableau\">\n            <template #activator=\"{props: propsActivateur}\">\n              <v-chip\n                v-if=\"monAutorisation\"\n                v-bind=\"propsActivateur\"\n                :append-icon=\"!ajoutTableauEnCours ? 'mdi-plus' : undefined\"\n                :disabled=\"ajoutTableauEnCours\"\n                variant=\"text\"\n                class=\"mx-1 my-auto\"\n                size=\"x-large\"\n                label\n                @click.stop\n              >\n                {{ t('tableaux.nouveau') }}\n                <v-progress-circular\n                  v-if=\"ajoutTableauEnCours\"\n                  class=\"ms-2\"\n                  size=\"15\"\n                  width=\"1\"\n                  indeterminate\n                />\n              </v-chip>\n            </template>\n          </nouveau-tableau>\n        </v-tabs>\n\n        <v-slide-group\n          v-else\n          v-model=\"tableauActif\"\n          class=\"mt-4\"\n          show-arrows\n          center-active\n        >\n          <v-slide-group-item\n            v-for=\"ong in tableaux\"\n            v-slot=\"{isSelected, toggle}\"\n            :key=\"ong.clef\"\n            :value=\"ong.clef\"\n          >\n            <v-chip\n              class=\"mx-1\"\n              variant=\"tonal\"\n              label\n              :active=\"false\"\n              :color=\"isSelected ? 'primary' : ''\"\n              @click=\"toggle\"\n            >\n              <entete-tableau\n                :id=\"ong.id\"\n                :clef=\"ong.clef\"\n              />\n            </v-chip>\n          </v-slide-group-item>\n          <v-slide-group-item\n            key=\"nouveau\"\n            value=\"nouveau\"\n          >\n            <nouveau-tableau @sauvegarder=\"ajouterTableau\">\n              <template #activator=\"{props: propsActivateur}\">\n                <v-chip\n                  v-if=\"monAutorisation\"\n                  v-bind=\"propsActivateur\"\n                  :append-icon=\"!ajoutTableauEnCours ? 'mdi-plus' : undefined\"\n                  variant=\"tonal\"\n                  class=\"mx-1\"\n                  label\n                  :disabled=\"ajoutTableauEnCours\"\n                >\n                  {{ t('tableaux.nouveau') }}\n                  <v-progress-circular\n                    v-if=\"ajoutTableauEnCours\"\n                    class=\"ms-2\"\n                    size=\"15\"\n                    width=\"1\"\n                    indeterminate\n                  />\n                </v-chip>\n              </template>\n            </nouveau-tableau>\n          </v-slide-group-item>\n        </v-slide-group>\n\n        <div\n          v-if=\"tableaux && !tableaux.length\"\n          class=\"text-center\"\n        >\n          <p class=\"text-h5 mt-5\">\n            {{ t('tableaux.aucun') }}\n          </p>\n          <v-img\n            :src=\"imageVide\"\n            class=\"my-5\"\n            contain\n            height=\"175px\"\n          />\n          <nouveau-tableau @sauvegarder=\"ajouterTableau\">\n            <template #activator=\"{props: propsActivateur}\">\n              <v-btn\n                v-if=\"monAutorisation\"\n                v-bind=\"propsActivateur\"\n                color=\"primary\"\n                class=\"mx-2\"\n                variant=\"outlined\"\n              >\n                <template #prepend>\n                  <v-icon\n                    icon=\"mdi-table\"\n                    start\n                  />\n                </template>\n                {{ t('tableaux.nouveau') }}\n              </v-btn>\n            </template>\n          </nouveau-tableau>\n        </div>\n      </v-list>\n      <v-window v-model=\"tableauActif\">\n        <v-window-item\n          v-for=\"tableau in tableaux\"\n          :key=\"tableau.clef\"\n          :value=\"tableau.clef\"\n        >\n          <tableau-bd\n            :id-tableau=\"tableau.id\"\n            :id-bd=\"id\"\n          />\n        </v-window-item>\n      </v-window>\n    </v-card-text>\n  </v-container>\n</template>\n<script setup lang=\"ts\">\nimport type {tableaux as typesTableaux} from '@constl/ipa';\n\nimport {useDisplay, useRtl} from 'vuetify';\n\nimport {suivre} from '@constl/vue';\nimport {மொழிகளைப்_பயன்படுத்து, மொழியாக்கத்தைப்_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport {computed, onMounted, ref, toRaw, watchEffect} from 'vue';\n\nimport {MAX_TAILLE_IMAGE} from '/@/consts';\n\nimport {utiliserConstellation} from '/@/components/utils';\nimport {utiliserImagesDéco} from '/@/composables/images';\nimport {utiliserHistoriqueDocuments} from '/@/état/historiqueDocuments';\n\nimport CarteAutomatisationsBd from '/@/components/automatisations/CarteAutomatisationsBd.vue';\nimport CarteExportationObjet from '/@/components/automatisations/CarteExportationObjet.vue';\nimport ItemAutomatisationsObjet from '/@/components/automatisations/ItemAutomatisationsObjet.vue';\nimport CarteCodeBd from '/@/components/bds/CarteCodeBd.vue';\nimport CarteQualiteBd from '/@/components/bds/CarteQualitéBd.vue';\nimport CarteStatutBd from '/@/components/bds/CarteStatutBd.vue';\nimport ItemQualiteBd from '/@/components/bds/ItemQualitéBd.vue';\nimport CarteCopier from '/@/components/communs/CarteCopier.vue';\nimport CarteEffacer from '/@/components/communs/CarteEffacer.vue';\nimport GererAuteurs from '/@/components/communs/GererAuteurs.vue';\nimport ImageEditable from '/@/components/communs/ImageEditable.vue';\nimport ItemAuteurs from '/@/components/communs/ItemAuteurs.vue';\nimport ItemStatut from '/@/components/communs/ItemStatut.vue';\nimport LienObjet from '/@/components/communs/LienObjet.vue';\nimport SérieJetons from '/@/components/communs/SérieJetons.vue';\nimport TexteTronque from '/@/components/communs/TexteTronqué.vue';\nimport DialogueNoms from '/@/components/communs/listeNoms/DialogueNoms.vue';\nimport DialogueLicence from '/@/components/licences/DialogueLicence.vue';\nimport ItemLicence from '/@/components/licences/ItemLicence.vue';\nimport CarteMotClef from '/@/components/motsClefs/CarteMotClef.vue';\nimport ItemMotClef from '/@/components/motsClefs/ItemMotClef.vue';\nimport JetonMotClef from '/@/components/motsClefs/JetonMotClef.vue';\nimport EditeurMotsClefs from '/@/components/motsClefs/ÉditeurMotsClefs.vue';\nimport EnteteTableau from '/@/components/tableaux/EntêteTableau.vue';\nimport NouveauTableau from '/@/components/tableaux/NouveauTableau.vue';\nimport TableauBd from '/@/components/tableaux/TableauBd.vue';\nimport CarteVariable from '/@/components/variables/CarteVariable.vue';\nimport ItemVariable from '/@/components/variables/ItemVariable.vue';\nimport JetonVariable from '/@/components/variables/JetonVariable.vue';\nimport IconeEpingle from '/@/components/épingles/IcôneÉpingle.vue';\nimport ItemReplicationsObjet from '/@/components/épingles/ItemRéplicationsObjet.vue';\nimport EpinglerBd from '/@/components/épingles/ÉpinglerBd.vue';\n\nimport type {valid} from '@constl/ipa';\nimport {ajusterTexteTraductible, sourceImage} from '/@/utils';\n\nconst props = defineProps<{id: string}>();\n\nconst constl = utiliserConstellation();\n\nconst {mdAndUp} = useDisplay();\nconst {isRtl} = useRtl();\n\nconst {$மொ: t} = மொழியாக்கத்தைப்_பயன்படுத்து();\nconst {அகராதியிலிருந்து_மொழிபெயர்ப்பு} = மொழிகளைப்_பயன்படுத்து();\nconst {obtImageDéco} = utiliserImagesDéco();\nconst historiqueDocuments = utiliserHistoriqueDocuments();\n\nonMounted(() => {\n  historiqueDocuments.documentOuvert({id: props.id, à: Date.now()});\n});\n\n// Visualisation\nconst imageVide = obtImageDéco('vide');\n\n// Autorisation\nconst monAutorisation = suivre(constl.suivrePermission, {idObjet: computed(() => props.id)});\n\n// Nom de la Bd\nconst noms = suivre(constl.bds.suivreNomsBd, {idBd: computed(() => props.id)});\nconst nomTraduit = அகராதியிலிருந்து_மொழிபெயர்ப்பு(noms);\n\nconst ajusterNoms = async (nms: {[langue: string]: string}) => {\n  const {àEffacer, àAjouter} = ajusterTexteTraductible({anciennes: noms.value, nouvelles: nms});\n  for (const langue of àEffacer) {\n    await constl.bds.effacerNomBd({idBd: props.id, langue});\n  }\n  await constl.bds.sauvegarderNomsBd({\n    idBd: props.id,\n    noms: àAjouter,\n  });\n};\n\n// Description de la Bd\nconst descriptions = suivre(constl.bds.suivreDescriptionsBd, {\n  idBd: computed(() => props.id),\n});\nconst descrTraduite = அகராதியிலிருந்து_மொழிபெயர்ப்பு(descriptions);\n\nconst ajusterDescriptions = async (descrs: {[langue: string]: string}) => {\n  const {àEffacer, àAjouter} = ajusterTexteTraductible({\n    anciennes: descriptions.value,\n    nouvelles: descrs,\n  });\n  for (const langue of àEffacer) {\n    await constl.bds.effacerDescriptionBd({idBd: props.id, langue});\n  }\n  await constl.bds.sauvegarderDescriptionsBd({\n    idBd: props.id,\n    descriptions: àAjouter,\n  });\n};\n\n// Image\nconst image = sourceImage(suivre(constl.bds.suivreImage, {idBd: computed(() => props.id)}));\n\nconst imgDéfaut = obtImageDéco('logoBD');\n\nconst modifierImage = async (image?: {contenu: ArrayBuffer; fichier: string}) => {\n  if (image) {\n    await constl.bds.sauvegarderImage({\n      idBd: props.id,\n      image: {contenu: new Uint8Array(image.contenu), nomFichier: image.fichier},\n    });\n  } else {\n    await constl.bds.effacerImage({idBd: props.id});\n  }\n};\n\n// Statut\nconst statut = suivre(constl.bds.suivreStatutBd, {idBd: computed(() => props.id)});\n\n// Variables\nconst variables = suivre(constl.bds.suivreVariablesBd, {idBd: computed(() => props.id)});\n\n// Mots-clefs\nconst motsClefs = suivre(constl.bds.suivreMotsClefsBd, {idBd: computed(() => props.id)});\nconst sauvegarderMotsClefs = async (àJour: string[]) => {\n  const nouveaux = àJour.filter(m => !motsClefs.value?.includes(m));\n  const àEnlever = motsClefs.value?.filter(m => !àJour.includes(m)) || [];\n  await constl.bds.ajouterMotsClefsBd({\n    idBd: props.id,\n    idsMotsClefs: nouveaux,\n  });\n  await Promise.all(àEnlever.map(m => constl.bds.effacerMotClefBd({idBd: props.id, idMotClef: m})));\n};\n\n// Géographie\n/* À faire\ncosnt géog = suivre(\n  constl.bds.suivreGéographieBd, \n  {\n    idBd: props.id\n  },\n);\n*/\n\n// Tableaux\nconst tableaux = suivre(constl.bds.suivreTableauxBd, {idBd: computed(() => props.id)});\nconst tableauActif = ref<string>();\nwatchEffect(() => {\n  if (!tableauActif.value && tableaux.value?.length) {\n    tableauActif.value = tableaux.value[0].clef;\n  }\n  if (tableauActif.value && !tableaux.value?.map(t => t.clef).includes(tableauActif.value)) {\n    tableauActif.value = undefined;\n  }\n});\n\nconst ajoutTableauEnCours = ref(false);\nconst ajouterTableau = async ({\n  noms,\n  cols,\n}: {\n  noms: {\n    [langue: string]: string;\n  };\n  cols: {\n    info: typesTableaux.InfoCol;\n    règles: valid.règleVariable[];\n  }[];\n}) => {\n  ajoutTableauEnCours.value = true;\n  try {\n    const idTableau = await constl.bds.ajouterTableauBd({idBd: props.id});\n    await constl.tableaux.sauvegarderNomsTableau({\n      idTableau,\n      noms: toRaw(noms),\n    });\n\n    await Promise.all(\n      cols.map(async col => {\n        await constl.tableaux.ajouterColonneTableau({\n          idTableau,\n          idColonne: col.info.id,\n          idVariable: col.info.variable,\n        });\n        if (col.info.index) {\n          await constl.tableaux.changerColIndex({\n            idTableau,\n            idColonne: col.info.id,\n            val: true,\n          });\n        }\n        await Promise.all(\n          col.règles.map(\n            async r =>\n              await constl.tableaux.ajouterRègleTableau({\n                idTableau,\n                idColonne: col.info.id,\n                règle: r,\n              }),\n          ),\n        );\n      }),\n    );\n  } finally {\n    ajoutTableauEnCours.value = false;\n  }\n};\n\n// Auteurs\nconst auteurs = suivre(constl.réseau.suivreAuteursBd, {idBd: computed(() => props.id)});\n\n// Licence\nconst licence = suivre(constl.bds.suivreLicenceBd, {idBd: computed(() => props.id)});\nconst licenceContenu = suivre(constl.bds.suivreLicenceContenuBd, {idBd: computed(() => props.id)});\nconst changerLicence = async ({\n  licence: nouvelleLicence,\n  licenceContenu: nouvelleLicenceContenu,\n}: {\n  licence: string;\n  licenceContenu?: string | undefined;\n}) => {\n  await constl.bds.changerLicenceBd({idBd: props.id, licence: nouvelleLicence});\n  if (nouvelleLicenceContenu) {\n    await constl.bds.changerLicenceContenuBd({\n      idBd: props.id,\n      licenceContenu: nouvelleLicenceContenu,\n    });\n  }\n};\n\n// Navigation\nconst petitPousset = computed<{title: string; href?: string; disabled?: boolean}[]>(() => [\n  {title: t('navigation.données') as string, href: encodeURI('/données/')},\n  {title: nomTraduit.value || t('bds.sansNom'), disabled: true},\n]);\n\n// Actions\nconst effacerBd = async () => {\n  await constl.bds.effacerBd({idBd: props.id});\n};\n</script>\n"],"names":["props","__props","t","மொழியாக்கத்தைப்_பயன்படுத்து","constl","utiliserConstellation","automatisations","suivre","tableauxBd","computed","automatisationsTableaux","idsÀInclure","a","automatisationsImportationTableau","automatisationsExportationTableau","codes","mdAndUp","useDisplay","dialogue","ref","qualité","licenceBd","licenceContenuBd","monAutorisation","statut","statutChoisi","watchEffect","modifié","enModification","sauvegarder","toRaw","infoLicences","licenceApprouvée","autorisation","noms","variables","colonnes","colonnesAvecCatégories","colonnesVariables","c","catégorie","col","triable","entêtes","colonneActions","ajouterColonne","idVariable","idColonne","index","règles","règle","modifierColonne","r","effacerColonne","données","filesTableau","ordonnées","b","ordonnerPar","o","x","nouvelleFile","édition","sélectionnées","modifsEnCours","modifications","modificationsDéfinitives","définitives","idÉlément","modifsÉlément","élémentExistant","d","différence","nFilesModifiées","nouvelleLigne","modifs","original","idCol","valeursÀAjouter","celluleModifiée","val","sfipifierFichiers","vals","id","sauvegarderModifications","ajouterLigne","plusConfirmer","choixPlusConfirmer","enEffaçage","dialogueEffacer","dialogueEffacerSélectionnées","watch","effacerÉlément","effacerSélectionnées","effacerTableau","isRtl","useRtl","அகராதியிலிருந்து_மொழிபெயர்ப்பு","மொழிகளைப்_பயன்படுத்து","obtImageDéco","utiliserImagesDéco","historiqueDocuments","utiliserHistoriqueDocuments","onMounted","imageVide","nomTraduit","ajusterNoms","nms","àEffacer","àAjouter","ajusterTexteTraductible","langue","descriptions","descrTraduite","ajusterDescriptions","descrs","image","sourceImage","imgDéfaut","modifierImage","motsClefs","sauvegarderMotsClefs","àJour","nouveaux","m","àEnlever","tableaux","tableauActif","ajoutTableauEnCours","ajouterTableau","cols","idTableau","auteurs","licence","licenceContenu","changerLicence","nouvelleLicence","nouvelleLicenceContenu","petitPousset","effacerBd"],"mappings":"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"}