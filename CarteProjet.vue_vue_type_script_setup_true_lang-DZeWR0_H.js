import{d as K,p as Q,n as ps,க as cs,r as E,s as T,q as p,e6 as q,c as L,a as M,x as fs,h as i,w as o,b as e,V as vs,i as ms,e as js,f as j,t as c,y as O,j as w,R as F,m as gs,z as u,G as P,e7 as x,dw as f,au as R,ac as G,ad as H,ao as bs,H as W,I as X,J as Y,e8 as Ps,P as _s,K as Vs,b1 as J}from"./index-fdjmi-3N.js";const qs={class:"font-weight-bold"},ws={class:"mb-2"},xs={class:"font-weight-bold"},Ts={class:"font-weight-bold"},Cs={class:"font-weight-bold"},Us=K({__name:"ÉpinglerProjet",props:{idProjet:{}},setup(C){const l=C,n=Q(),{mdAndUp:V}=ps(),{மொழியாக்கம்_பயன்படுத்து:U}=cs(),{$மொ:r}=U(),_=E(!1),g=E(!1),b=T(n.projets.suivreÉpingleProjet,{idProjet:p(()=>l.idProjet)}),{sélection:a,dispositifs:v,spécifiques:d,valide:m,modifié:y}=q(p(()=>b.value?.base),"TOUS"),{sélection:D,dispositifs:Z,spécifiques:A,valide:h,modifié:ss}=q(p(()=>b.value?.bds.base),"TOUS"),{sélection:N,dispositifs:es,spécifiques:B,valide:is,modifié:ts}=q(p(()=>b.value?.bds.données.tableaux),"INSTALLÉ"),{sélection:S,dispositifs:os,spécifiques:k,valide:as,modifié:ls}=q(p(()=>b.value?.bds.données.fichiers),"INSTALLÉ"),ns=p(()=>m&&h&&is&&as),rs=p(()=>y.value||ss.value||ts.value||ls.value),$=E(!1),ds=async()=>{if($.value=!0,v.value!=="AUCUN"){const z={type:"projet",base:v.value,bds:{type:"bd",base:Z.value,données:{tableaux:es.value,fichiers:os.value}}};await n.projets.épinglerProjet({idProjet:l.idProjet,options:z})}else await us();I()},us=async()=>{await n.favoris.désépinglerFavori({idObjet:l.idProjet})},I=()=>{_.value=!1,$.value=!1};return(z,s)=>(M(),L(fs,{modelValue:_.value,"onUpdate:modelValue":s[10]||(s[10]=t=>_.value=t),"max-width":i(V)?500:300},{activator:o(({props:t})=>[W(z.$slots,"activator",X(Y({props:t})))]),default:o(()=>[e(vs,null,{default:o(()=>[e(ms,null,{default:o(()=>[e(js,{class:"d-flex"},{default:o(()=>[j(c(i(r)("épingler.titre"))+" ",1),e(O),e(w,{icon:"mdi-close",size:"small",variant:"flat",onClick:I})]),_:1})]),_:1}),e(F),e(gs,{style:{"overflow-y":"scroll"}},{default:o(()=>[e(P,{start:""},{default:o(()=>s[11]||(s[11]=[j("mdi-pin-outline")])),_:1}),u("span",qs,c(i(r)("épingler.dispositifsÉpingle")),1),e(x,{selection:i(a),"onUpdate:selection":s[0]||(s[0]=t=>f(a)?a.value=t:null),specifiques:i(d),"onUpdate:specifiques":s[1]||(s[1]=t=>f(d)?d.value=t:null),class:"ms-4"},null,8,["selection","specifiques"]),e(R,null,{default:o(()=>[G(u("div",null,[u("p",ws,[u("span",null,c(i(r)("épingler.optionsAvancées")),1),e(w,{icon:g.value?"mdi-chevron-up":"mdi-chevron-down",size:"xsmall",variant:"flat",onClick:s[2]||(s[2]=()=>g.value=!g.value)},null,8,["icon"])]),e(R,null,{default:o(()=>[G(u("div",null,[e(F,{class:"mb-2"}),u("p",null,[e(P,{start:""},{default:o(()=>s[12]||(s[12]=[j("mdi-database")])),_:1}),u("span",xs,c(i(r)("épingler.dispositifsÉpingleBds")),1)]),e(x,{selection:i(D),"onUpdate:selection":s[3]||(s[3]=t=>f(D)?D.value=t:null),specifiques:i(A),"onUpdate:specifiques":s[4]||(s[4]=t=>f(A)?A.value=t:null),class:"ms-4"},null,8,["selection","specifiques"]),u("p",null,[e(P,{start:""},{default:o(()=>s[13]||(s[13]=[j("mdi-table-multiple")])),_:1}),u("span",Ts,c(i(r)("épingler.dispositifsÉpingleDonnées")),1)]),e(x,{selection:i(N),"onUpdate:selection":s[5]||(s[5]=t=>f(N)?N.value=t:null),specifiques:i(B),"onUpdate:specifiques":s[6]||(s[6]=t=>f(B)?B.value=t:null),class:"ms-4"},null,8,["selection","specifiques"]),u("p",null,[e(P,{start:""},{default:o(()=>s[14]||(s[14]=[j("mdi-image-multiple-outline")])),_:1}),u("span",Cs,c(i(r)("épingler.dispositifsÉpingleDocuments")),1)]),e(x,{selection:i(S),"onUpdate:selection":s[7]||(s[7]=t=>f(S)?S.value=t:null),specifiques:i(k),"onUpdate:specifiques":s[8]||(s[8]=t=>f(k)?k.value=t:null),class:"ms-4"},null,8,["selection","specifiques"])],512),[[H,g.value]])]),_:1})],512),[[H,i(a)!=="AUCUN"]])]),_:1})]),_:1}),e(F),e(bs,null,{default:o(()=>[e(O),e(w,{variant:"outlined",onClick:I},{default:o(()=>[j(c(i(r)("communs.fermer"))+" ",1),e(P,{icon:"mdi-close",end:""})]),_:1}),e(w,{color:"primary",variant:"outlined",loading:$.value,disabled:!ns.value||!rs.value,onClick:s[9]||(s[9]=()=>ds())},{default:o(()=>[j(c(i(r)("communs.sauvegarder"))+" ",1),e(P,{icon:"mdi-check",end:""})]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),Ds=K({__name:"CarteProjet",props:{id:{}},setup(C){const l=C,n=Q(),V=T(n.projets.suivreNomsProjet,{idProjet:p(()=>l.id)},{}),U=async a=>{const{àEffacer:v,àAjouter:d}=J({anciennes:V.value,nouvelles:a});for(const m of v)await n.projets.effacerNomProjet({idProjet:l.id,langue:m});await n.projets.sauvegarderNomsProjet({idProjet:l.id,noms:d})},r=T(n.projets.suivreDescriptionsProjet,{idProjet:p(()=>l.id)},{}),_=async a=>{const{àEffacer:v,àAjouter:d}=J({anciennes:r.value,nouvelles:a});for(const m of v)await n.projets.effacerDescriptionProjet({idProjet:l.id,langue:m});await n.projets.sauvegarderDescriptionsProjet({idProjet:l.id,descriptions:d})},g=T(n.réseau.suivreAuteursProjet,{idProjet:p(()=>l.id)}),b=async()=>{await n.projets.effacerProjet({idProjet:l.id})};return(a,v)=>(M(),L(Ps,{id:a.id,noms:i(V),descriptions:i(r),auteurs:i(g),"fichiers-epinglables":!0,onAjusterNoms:U,onAjusterDescriptions:_,onEffacer:b},{activator:o(({props:d})=>[W(a.$slots,"activator",X(Y({props:d})))]),epingler:o(({activateur:d,epingle:m})=>[e(Us,{"id-projet":a.id},{activator:o(({props:y})=>[(M(),L(_s(d),Vs(y,{id:a.id,epingle:m}),null,16,["id","epingle"]))]),_:2},1032,["id-projet"])]),_:3},8,["id","noms","descriptions","auteurs"]))}});export{Ds as _,Us as a};
//# sourceMappingURL=CarteProjet.vue_vue_type_script_setup_true_lang-DZeWR0_H.js.map
