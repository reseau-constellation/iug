{"version":3,"file":"SélecteurNuée.vue_vue_type_script_setup_true_lang-DS2LbELM.js","sources":["../../src/components/tableaux/NouvelleColonne.vue","../../src/components/tableaux/ItemSpécificationColonne.vue","../../src/components/tableaux/NouveauTableau.vue","../../src/components/tableaux/ItemSpécificationTableau.vue","../../src/components/nuées/NouvelleNuée.vue","../../src/components/nuées/SélecteurNuée.vue"],"sourcesContent":["<template>\n  <v-dialog v-model=\"dialogue\">\n    <template #activator=\"{props: propsActivateur}\">\n      <slot\n        name=\"activator\"\n        v-bind=\"{props: propsActivateur}\"\n      ></slot>\n    </template>\n    <v-card\n      class=\"mx-auto\"\n      :min-width=\"mdAndUp ? 500 : 300\"\n    >\n      <v-card-item>\n        <v-card-title class=\"d-flex\">\n          <span>{{ t(titreCarte) }}</span>\n          <v-spacer />\n          <v-btn\n            variant=\"flat\"\n            size=\"small\"\n            icon=\"mdi-close\"\n            @click=\"fermer\"\n          />\n        </v-card-title>\n        <v-card-subtitle> {{ t(sousTitreCarte) }} </v-card-subtitle>\n      </v-card-item>\n      <v-card-text>\n        <v-window\n          v-model=\"étape\"\n          style=\"overflow-y: scroll\"\n        >\n          <v-window-item :value=\"0\">\n            <SelecteurVariable\n              :interdites=\"variablesInterdites\"\n              :multiples=\"false\"\n              @selectionnee=\"ids => choisirVariable(ids[0])\"\n            />\n          </v-window-item>\n          <v-window-item :value=\"1\">\n            <v-checkbox\n              v-model=\"index\"\n              :label=\"t('colonnes.nouvelle.index')\"\n              color=\"primary\"\n            ></v-checkbox>\n          </v-window-item>\n          <v-window-item :value=\"2\">\n            <v-list>\n              <NouvelleRegle\n                :source=\"{\n                  type: 'tableau',\n                  idTableau,\n                }\"\n                :categorie-variable=\"catégorieBaseVariableChoisie\"\n                @sauvegarder=\"r => ajouterRègle(r)\"\n              >\n                <template #activator=\"{props: propsActivateurNouvelleRègle}\">\n                  <v-list-item\n                    v-bind=\"propsActivateurNouvelleRègle\"\n                    prepend-icon=\"mdi-plus\"\n                  >\n                    <v-list-item-title>\n                      {{ t('tableaux.règles.nouvelle') }}\n                    </v-list-item-title>\n                  </v-list-item>\n                </template>\n              </NouvelleRegle>\n\n              <item-regle\n                v-for=\"règle in règlesColonne\"\n                :key=\"règle.id\"\n                :regle=\"règle\"\n                effacable\n                :autorisation-modifier=\"true\"\n                @effacer=\"() => effacerRègle(règle.id)\"\n              />\n\n              <item-regle\n                v-for=\"règle in règlesVariable\"\n                :key=\"règle.id\"\n                :regle=\"règle\"\n                :effacable=\"false\"\n                :autorisation-modifier=\"false\"\n              />\n            </v-list>\n          </v-window-item>\n          <v-window-item\n            :value=\"3\"\n            class=\"text-center\"\n          >\n            <v-btn\n              variant=\"outlined\"\n              @click=\"() => créerColonne()\"\n            >\n              {{ t('colonnes.nouvelle.texteBtnCréation') }}\n            </v-btn>\n          </v-window-item>\n        </v-window>\n      </v-card-text>\n      <v-divider></v-divider>\n\n      <v-card-actions>\n        <btn-retour\n          :visible=\"retourActif.visible\"\n          :actif=\"retourActif.actif\"\n          @retour=\"retour\"\n        />\n        <v-spacer></v-spacer>\n        <btn-suivant\n          :visible=\"suivantActif.visible\"\n          :actif=\"suivantActif.actif\"\n          @suivant=\"suivant\"\n        />\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script setup lang=\"ts\">\nimport type {valid} from '@constl/ipa';\n\nimport {suivre} from '@constl/vue';\nimport {computed, ref} from 'vue';\nimport {useDisplay} from 'vuetify';\n\nimport {v4 as uuidv4} from 'uuid';\n\nimport {utiliserConstellation} from '/@/components/utils';\nimport SelecteurVariable from '/@/components/variables/SélecteurVariable.vue';\n\nimport {கிளிமூக்கை_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport BtnRetour from '/@/components/communs/BtnRetour.vue';\nimport BtnSuivant from '/@/components/communs/BtnSuivant.vue';\nimport ItemRegle from '/@/components/règles/ItemRègle.vue';\nimport NouvelleRegle from '/@/components/règles/NouvelleRègle.vue';\n\nconst props = defineProps<{\n  idTableau?: string;\n  idVariable?: string;\n  idColonne?: string;\n  variablesInterdites?: string[];\n}>();\n\nconst émettre = defineEmits<{\n  (\n    é: 'nouvelle',\n    info: {\n      idVariable: string;\n      idColonne?: string;\n      index: boolean;\n      règles: valid.règleVariable[];\n    },\n  ): void;\n}>();\n\nconst {mdAndUp} = useDisplay();\nconst {மொழியாக்கம்_பயன்படுத்து} = கிளிமூக்கை_பயன்படுத்து();\nconst {$மொ: t} = மொழியாக்கம்_பயன்படுத்து();\n\nconst constl = utiliserConstellation();\n\n// Navigation\nconst dialogue = ref(false);\n\nconst étape = ref(0);\nconst listeÉtapes = ['variable', 'index', 'règles', 'confirmation'] as const;\n\nconst titreCarte = computed(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'variable':\n      return 'colonnes.nouvelle.titreVariable';\n    case 'index':\n      return 'colonnes.nouvelle.titreIndex';\n    case 'règles':\n      return 'colonnes.nouvelle.titreRègles';\n    case 'confirmation':\n      return 'colonnes.nouvelle.titreConfirmation';\n    default:\n      return '';\n  }\n});\n\nconst sousTitreCarte = computed(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'variable':\n      return 'colonnes.nouvelle.sousTitreVariable';\n    case 'index':\n      return 'colonnes.nouvelle.sousTitreIndex';\n    case 'règles':\n      return 'colonnes.nouvelle.sousTitreRègles';\n    case 'confirmation':\n      return 'colonnes.nouvelle.sousTitreConfirmation';\n    default:\n      return '';\n  }\n});\n\nconst suivant = () => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    default:\n      étape.value++;\n      break;\n  }\n};\n\nconst retour = () => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    default:\n      étape.value--;\n      break;\n  }\n};\n\nconst suivantActif = computed<{actif: boolean; visible: boolean}>(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'variable':\n      return {actif: !!idVariableChoisie.value, visible: true};\n    case 'confirmation':\n      return {actif: false, visible: false};\n    default:\n      return {actif: true, visible: true};\n  }\n});\n\nconst retourActif = computed<{actif: boolean; visible: boolean}>(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'variable':\n      return {actif: false, visible: false};\n    default:\n      return {actif: true, visible: true};\n  }\n});\n\n// Variable\nconst idVariableChoisie = ref(props.idVariable);\nconst choisirVariable = (idVar: string) => (idVariableChoisie.value = idVar);\n\n// Catégorie variable\nconst catégorieVariableChoisie = suivre(constl.variables.suivreCatégorieVariable, {\n  idVariable: idVariableChoisie,\n});\nconst catégorieBaseVariableChoisie = computed(() => catégorieVariableChoisie.value?.catégorie);\n\n// Index\nconst index = ref(false);\n\n// Règles variable associée\nconst règlesVariable = suivre(constl.variables.suivreRèglesVariable, {\n  idVariable: idVariableChoisie,\n});\n\n// Règles colonne\nconst règlesColonne = ref<valid.règleVariableAvecId[]>([]);\n\nconst ajouterRègle = (règle: valid.règleVariable) => {\n  const idRègle = uuidv4();\n  règlesColonne.value = [...règlesColonne.value, {règle: règle, id: idRègle}];\n};\nconst effacerRègle = (idRègle: string) => {\n  règlesColonne.value = règlesColonne.value.filter(r => r.id !== idRègle);\n};\n\n// Créer colonne\nconst prèteÀCréér = computed<{idVariable: string} | undefined>(() => {\n  return idVariableChoisie.value ? {idVariable: idVariableChoisie.value} : undefined;\n});\n\nconst créerColonne = async () => {\n  if (!prèteÀCréér.value) return;\n  const {idVariable} = prèteÀCréér.value;\n\n  émettre('nouvelle', {\n    idVariable,\n    index: index.value,\n    idColonne: props.idColonne,\n    règles: règlesColonne.value.map(r => r.règle),\n  });\n\n  fermer();\n};\n\nconst fermer = () => {\n  idVariableChoisie.value = undefined;\n  index.value = false;\n  règlesColonne.value = [];\n\n  dialogue.value = false;\n  étape.value = 0;\n};\n</script>\n","<template>\n  <v-list-item>\n    <v-list-item-title>\n      {{ nomVariableTraduit }}\n    </v-list-item-title>\n\n    <template #append>\n      <v-btn\n        v-if=\"modificationPermise\"\n        icon=\"mdi-delete\"\n        variant=\"flat\"\n        @click=\"effacerColonne\"\n      />\n    </template>\n  </v-list-item>\n</template>\n<script setup lang=\"ts\">\nimport type {valid} from '@constl/ipa';\n\nimport {suivre} from '@constl/vue';\nimport {computed, ref, watchEffect} from 'vue';\n\nimport {மொழிகளைப்_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport {utiliserConstellation} from '/@/components/utils';\n\nconst {அகராதியிலிருந்து_மொழிபெயர்ப்பு} = மொழிகளைப்_பயன்படுத்து();\n\nconst props = defineProps<{\n  idVariable?: string;\n  index?: boolean;\n  modificationPermise: boolean;\n  règles: valid.règleVariable[];\n}>();\n\nconst émettre = defineEmits<{\n  (é: 'modifier-colonne', info: {idVariable?: string; index?: boolean}): void;\n  (é: 'effacer-colonne'): void;\n}>();\n\nconst constl = utiliserConstellation();\n\nconst choixVariable = ref(props.idVariable);\nwatchEffect(() => {\n  choixVariable.value = props.idVariable;\n});\n\n// Nom variable\nconst nomsVariable = suivre(constl.variables.suivreNomsVariable, {\n  idVariable: computed(() => props.idVariable),\n});\nconst nomVariableTraduit = அகராதியிலிருந்து_மொழிபெயர்ப்பு(nomsVariable);\n\n// Index\nconst choixIndex = ref<boolean>(props.index);\nwatchEffect(() => {\n  choixIndex.value = props.index;\n});\n\n// Modification\nwatchEffect(() => {\n  const spécColonne = {\n    idVariable: choixVariable.value,\n    index: choixIndex.value,\n  };\n  émettre('modifier-colonne', spécColonne);\n});\nconst effacerColonne = () => émettre('effacer-colonne');\n</script>\n","<template>\n  <v-dialog v-model=\"dialogue\">\n    <template #activator=\"{props: propsActivateur}\">\n      <slot\n        name=\"activator\"\n        v-bind=\"{props: propsActivateur}\"\n      ></slot>\n    </template>\n\n    <v-card\n      class=\"mx-auto\"\n      :width=\"mdAndUp ? 500 : 300\"\n    >\n      <v-card-item>\n        <v-card-title class=\"d-flex\">\n          {{ t(titreCarte) }}\n          <v-spacer />\n          <v-btn\n            icon=\"mdi-close\"\n            size=\"small\"\n            variant=\"flat\"\n            @click=\"() => (dialogue = false)\"\n          ></v-btn>\n        </v-card-title>\n        <v-card-subtitle> {{ t(sousTitreCarte) }} </v-card-subtitle>\n      </v-card-item>\n      <v-card-text>\n        <v-window\n          v-model=\"étape\"\n          style=\"overflow-y: scroll\"\n        >\n          <v-window-item :value=\"0\">\n            <liste-noms\n              :texte-aucun-nom=\"t('communs.texteAucunNom')\"\n              :indice-langue=\"t('communs.indiceLangue')\"\n              :etiquette-nom=\"t('communs.étiquetteNom')\"\n              :indice-nom=\"t('tableaux.nouveau.texteIndiceNom')\"\n              :noms-initiaux=\"noms\"\n              :autorisation-modification=\"true\"\n              @ajuster-noms=\"ajusterNoms\"\n            />\n          </v-window-item>\n          <v-window-item :value=\"1\">\n            <v-list>\n              <nouvelle-colonne\n                :variables-interdites=\"variablesDéjàAjoutées\"\n                @nouvelle=\"col => ajouterColonne(col)\"\n              >\n                <template #activator=\"{props: propsActivateur}\">\n                  <v-list-item\n                    v-bind=\"propsActivateur\"\n                    :title=\"t('tableaux.nouveau.ajouterColonne')\"\n                    prepend-icon=\"mdi-table-column-plus-after\"\n                  ></v-list-item>\n                </template>\n              </nouvelle-colonne>\n              <ItemSpecificationColonne\n                v-for=\"col in colonnes\"\n                :id=\"col.info.id\"\n                :key=\"col.info.id\"\n                :id-variable=\"col.info.variable\"\n                :index=\"col.info.index\"\n                :règles=\"col.règles\"\n                modification-permise\n                @modifier-colonne=\"modifierColonne\"\n                @effacer-colonne=\"() => effacerColonne(col.info.id)\"\n              />\n            </v-list>\n          </v-window-item>\n          <v-window-item :value=\"2\">\n            <div class=\"text-center\">\n              <v-btn\n                class=\"mt-3\"\n                variant=\"outlined\"\n                @click=\"confirmer\"\n              >\n                {{ t('tableaux.nouveau.texteBtnCréation') }}\n              </v-btn>\n            </div>\n          </v-window-item>\n        </v-window>\n      </v-card-text>\n      <v-card-actions>\n        <btn-retour\n          :visible=\"retourActif.visible\"\n          :actif=\"retourActif.actif\"\n          @retour=\"retour\"\n        />\n        <v-spacer></v-spacer>\n        <btn-suivant\n          :visible=\"suivantActif.visible\"\n          :actif=\"suivantActif.actif\"\n          @suivant=\"suivant\"\n        />\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script setup lang=\"ts\">\nimport type {tableaux as tblx, valid} from '@constl/ipa';\n\nimport {computed, ref} from 'vue';\nimport {useDisplay} from 'vuetify';\n\nimport {கிளிமூக்கை_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport {v4 as uuidv4} from 'uuid';\n\nimport NouvelleColonne from './NouvelleColonne.vue';\nimport BtnRetour from '/@/components/communs/BtnRetour.vue';\nimport BtnSuivant from '/@/components/communs/BtnSuivant.vue';\nimport ListeNoms from '/@/components/communs/listeNoms/ListeNoms.vue';\nimport ItemSpecificationColonne from '/@/components/tableaux/ItemSpécificationColonne.vue';\n\nconst émettre = defineEmits<{\n  (\n    é: 'sauvegarder',\n    args: {\n      noms: {[langue: string]: string};\n      cols: {info: tblx.InfoCol; règles: valid.règleVariable[]}[];\n    },\n  ): void;\n}>();\n\nconst {mdAndUp} = useDisplay();\n\nconst {மொழியாக்கம்_பயன்படுத்து} = கிளிமூக்கை_பயன்படுத்து();\nconst {$மொ: t} = மொழியாக்கம்_பயன்படுத்து();\n\n// Navigation\nconst dialogue = ref(false);\n\nconst étape = ref(0);\nconst listeÉtapes = ['noms', 'colonnnes', 'confirmation'] as const;\n\nconst titreCarte = computed(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'noms':\n      return 'tableaux.nouveau.titreNoms';\n    case 'colonnnes':\n      return 'tableaux.nouveau.titreColonnes';\n    case 'confirmation':\n      return 'tableaux.nouveau.titreConfirmation';\n    default:\n      return '';\n  }\n});\n\nconst sousTitreCarte = computed(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'noms':\n      return 'tableaux.nouveau.sousTitreNoms';\n    case 'colonnnes':\n      return 'tableaux.nouveau.sousTitreColonnes';\n    case 'confirmation':\n      return 'tableaux.nouveau.sousTitreConfirmation';\n    default:\n      return '';\n  }\n});\n\nconst retour = () => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    default:\n      étape.value--;\n      break;\n  }\n};\n\nconst suivant = () => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    default:\n      étape.value++;\n      break;\n  }\n};\n\nconst suivantActif = computed<{actif: boolean; visible: boolean}>(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'noms':\n      return {actif: !!Object.keys(noms.value).length, visible: true};\n    case 'confirmation':\n      return {actif: false, visible: false};\n    default:\n      return {actif: true, visible: true};\n  }\n});\n\nconst retourActif = computed<{actif: boolean; visible: boolean}>(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'noms':\n      return {actif: false, visible: false};\n    default:\n      return {actif: true, visible: true};\n  }\n});\n\n// Noms tableau\nconst noms = ref<{[langue: string]: string}>({});\nconst ajusterNoms = (nms: {[lng: string]: string}) => {\n  noms.value = nms;\n};\n\n// Colonnes\nconst colonnes = ref<{info: tblx.InfoCol; règles: valid.règleVariable[]}[]>([]);\nconst ajouterColonne = ({\n  idVariable,\n  idColonne,\n  index,\n  règles,\n}: {\n  idVariable: string;\n  idColonne?: string | undefined;\n  index: boolean;\n  règles: valid.règleVariable[];\n}) => {\n  colonnes.value = [\n    ...colonnes.value,\n    {\n      info: {\n        id: idColonne || uuidv4(),\n        variable: idVariable,\n        index,\n      },\n      règles,\n    },\n  ];\n};\nconst modifierColonne = () => {};\nconst effacerColonne = (idColonne: string) => {\n  colonnes.value = colonnes.value.filter(c => c.info.id !== idColonne);\n};\n\nconst variablesDéjàAjoutées = computed(() => {\n  return colonnes.value.map(c => c.info.variable).filter(v => !!v) as string[];\n});\n\n// Confirmation\nconst confirmer = () => {\n  émettre('sauvegarder', {\n    noms: noms.value,\n    cols: colonnes.value || [],\n  });\n  fermer();\n};\n\nconst fermer = () => {\n  noms.value = {};\n  colonnes.value = [];\n\n  étape.value = 0;\n  dialogue.value = false;\n};\n</script>\n","<template>\n  <v-list-group :value=\"clef\">\n    <template #activator=\"{props: propsActivateur}\">\n      <v-list-item\n        v-bind=\"propsActivateur\"\n        prepend-icon=\"mdi-table\"\n      >\n        <v-list-item-title>\n          <DialogueNoms\n            :etiquette-nom=\"t('listeNomsProfil.étiquetteNom')\"\n            :indice-nom=\"t('listeNomsProfil.indiceNom')\"\n            :indice-langue=\"t('listeNomsProfil.indiceLangue')\"\n            :texte-aucun-nom=\"t('listeNomsProfil.texteAucunNom')\"\n            :titre=\"t('tableaux.spécification.titreDialogueNoms')\"\n            :sous-titre=\"t('tableaux.spécification.sousTitreDialogueNoms')\"\n            :noms-initiaux=\"noms\"\n            :autorisation-modification=\"modificationPermise\"\n            @ajuster-noms=\"modifierNoms\"\n          >\n            <template #activator=\"{props: propsActivateurDialogueNoms}\">\n              <span v-bind=\"propsActivateurDialogueNoms\">\n                {{ nomTraduit || t('communs.baseCarteObjet.sansNom') }}\n                <v-btn\n                  :icon=\"modificationPermise ? 'mdi-pencil' : 'mdi-earth'\"\n                  variant=\"flat\"\n                  size=\"small\"\n                ></v-btn>\n              </span>\n            </template>\n          </DialogueNoms>\n        </v-list-item-title>\n      </v-list-item>\n    </template>\n    <NouvelleColonne\n      :variables-interdites=\"variablesDéjàAjoutées\"\n      @nouvelle=\"ajouterColonne\"\n    >\n      <template #activator=\"{props: propsActivateur}\">\n        <v-list-item v-bind=\"propsActivateur\">\n          <template #prepend>\n            <v-icon> mdi-plus </v-icon>\n          </template>\n          <template #title>\n            {{ t('tableaux.spécification.nouvelleColonne') }}\n          </template>\n        </v-list-item>\n      </template>\n    </NouvelleColonne>\n\n    <ItemSpecificationColonne\n      v-for=\"col in colonnes\"\n      :id=\"col.info.id\"\n      :key=\"col.info.id\"\n      :id-variable=\"col.info.variable\"\n      :index=\"col.info.index\"\n      :règles=\"col.règles\"\n      :modification-permise=\"modificationPermise\"\n      @modifier-colonne=\"info => modifierColonne(col.info.id, info)\"\n      @effacer-colonne=\"() => effacerColonne(col.info.id)\"\n    />\n  </v-list-group>\n</template>\n\n<script setup lang=\"ts\">\nimport type {tableaux, valid} from '@constl/ipa';\n\nimport {கிளிமூக்கை_பயன்படுத்து, மொழிகளைப்_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport {computed} from 'vue';\nimport ItemSpecificationColonne from './ItemSpécificationColonne.vue';\nimport NouvelleColonne from './NouvelleColonne.vue';\nimport DialogueNoms from '/@/components/communs/listeNoms/DialogueNoms.vue';\n\nconst {மொழியாக்கம்_பயன்படுத்து} = கிளிமூக்கை_பயன்படுத்து();\nconst {$மொ: t} = மொழியாக்கம்_பயன்படுத்து();\nconst {அகராதியிலிருந்து_மொழிபெயர்ப்பு} = மொழிகளைப்_பயன்படுத்து();\n\nconst props = defineProps<{\n  clef: string;\n  noms: {[langue: string]: string};\n  idTableau?: string;\n  colonnes: {info: tableaux.InfoCol; règles: valid.règleVariable[]}[];\n  modificationPermise: boolean;\n}>();\nconst émettre = defineEmits<{\n  (é: 'modifier-noms', noms: {[langue: string]: string}): void;\n  (\n    é: 'nouvelle-colonne',\n    info: {idVariable: string; index?: boolean; règles: valid.règleVariable[]},\n  ): void;\n  (é: 'modifier-colonne', info: {idColonne: string; idVariable?: string; index?: boolean}): void;\n  (é: 'effacer-colonne', idColonne: string): void;\n}>();\n\n// Noms\nconst modifierNoms = (noms_: {[langue: string]: string}) => {\n  émettre('modifier-noms', noms_);\n};\nconst nomTraduit = அகராதியிலிருந்து_மொழிபெயர்ப்பு(computed(() => props.noms));\n\n// Variables déjà ajoutées au tableau, qu'on ne veut pas associer à de nouvelles colonnes\nconst variablesDéjàAjoutées = computed(() => {\n  return props.colonnes.map(c => c.info.variable).filter(v => v) as string[];\n});\n\n// Modification colonnes\nconst modifierColonne = (idColonne: string, info: {idVariable?: string; index?: boolean}) => {\n  émettre('modifier-colonne', {idColonne, ...info});\n};\nconst effacerColonne = (idColonne: string) => {\n  émettre('effacer-colonne', idColonne);\n};\nconst ajouterColonne = (info: {\n  idVariable: string;\n  index?: boolean;\n  règles: valid.règleVariable[];\n}) => {\n  émettre('nouvelle-colonne', info);\n};\n</script>\n","<template>\n  <v-dialog v-model=\"dialogue\">\n    <template #activator=\"{props: propsActivateur}\">\n      <slot\n        name=\"activator\"\n        v-bind=\"{props: propsActivateur}\"\n      ></slot>\n    </template>\n\n    <v-card\n      class=\"mx-auto\"\n      :min-width=\"mdAndUp ? 500 : 300\"\n    >\n      <v-card-item>\n        <v-card-title class=\"d-flex\">\n          {{ t(titreCarte) }}\n          <v-spacer />\n          <v-btn\n            variant=\"flat\"\n            size=\"small\"\n            icon=\"mdi-close\"\n            @click=\"fermer\"\n          />\n        </v-card-title>\n        <v-card-subtitle> {{ t(sousTitreCarte) }} </v-card-subtitle>\n      </v-card-item>\n      <v-card-text>\n        <v-window\n          v-model=\"étape\"\n          style=\"overflow-y: scroll\"\n        >\n          <v-window-item :key=\"0\">\n            <liste-noms\n              :texte-aucun-nom=\"t('communs.texteAucunNom')\"\n              :indice-langue=\"t('communs.indiceLangue')\"\n              :etiquette-nom=\"t('communs.étiquetteNom')\"\n              :indice-nom=\"t('nuées.nouvelle.texteIndiceNom')\"\n              :noms-initiaux=\"noms\"\n              :autorisation-modification=\"true\"\n              @ajuster-noms=\"ajusterNoms\"\n            />\n          </v-window-item>\n          <v-window-item :key=\"1\">\n            <liste-noms\n              :texte-aucun-nom=\"t('nuées.nouvelle.texteAucuneDescription')\"\n              :indice-langue=\"t('communs.indiceLangue')\"\n              :etiquette-nom=\"t('nuées.nouvelle.texteÉtiquetteDescription')\"\n              :indice-nom=\"t('nuées.nouvelle.texteIndiceDescription')\"\n              :noms-initiaux=\"descriptions\"\n              :autorisation-modification=\"true\"\n              longue\n              @ajuster-noms=\"ajusterDescriptions\"\n            />\n          </v-window-item>\n          <v-window-item :key=\"2\">\n            <v-radio-group v-model=\"autorisation\">\n              <v-radio\n                value=\"CJPI\"\n                class=\"my-2\"\n              >\n                <template #label>\n                  <div>\n                    <p class=\"font-weight-bold\">{{ t('nuées.nouvelle.parInvitation') }}</p>\n                    <p class=\"text-medium-emphasis text-caption\">\n                      {{ t('nuées.nouvelle.indiceParInvitation') }}\n                    </p>\n                  </div>\n                </template>\n              </v-radio>\n              <v-radio\n                value=\"IJPC\"\n                class=\"my-2\"\n              >\n                <template #label>\n                  <div>\n                    <p class=\"font-weight-bold\">{{ t('nuées.nouvelle.ouverteÀTous') }}</p>\n                    <p class=\"text-medium-emphasis text-caption\">\n                      {{ t('nuées.nouvelle.indiceOuverteÀTous') }}\n                    </p>\n                  </div>\n                </template>\n              </v-radio>\n            </v-radio-group>\n          </v-window-item>\n          <v-window-item :key=\"3\">\n            <v-list>\n              <nouveau-tableau\n                :importation-permise=\"false\"\n                @sauvegarder=\"ajouterTableau\"\n              >\n                <template #activator=\"{props: propsActivateur}\">\n                  <v-list-item\n                    v-bind=\"propsActivateur\"\n                    :title=\"t('nuées.nouvelle.ajoutTableau')\"\n                    prepend-icon=\"mdi-plus\"\n                  >\n                  </v-list-item>\n                </template>\n              </nouveau-tableau>\n              <ItemSpecificationTableau\n                v-for=\"tbl in tableaux\"\n                :key=\"tbl.clef\"\n                :clef=\"tbl.clef\"\n                :noms=\"tbl.noms\"\n                :colonnes=\"tbl.cols\"\n                modification-permise\n                @modifier-noms=\"noms => modifierNomsTableau({clefTableau: tbl.clef, noms})\"\n                @nouvelle-colonne=\"\n                  col =>\n                    ajouterColonneTableau({\n                      clefTableau: tbl.clef,\n                      idVariable: col.idVariable,\n                      index: col.index,\n                      règles: col.règles,\n                    })\n                \"\n                @effacer-colonne=\"\n                  idColonne => effacerColonneTableau({clefTableau: tbl.clef, idColonne})\n                \"\n                @effacer-tableau=\"() => effacerTableau(tbl.clef)\"\n              />\n            </v-list>\n          </v-window-item>\n          <v-window-item :key=\"4\">\n            <div class=\"text-center\">\n              <v-btn\n                class=\"mt-3\"\n                variant=\"outlined\"\n                :loading=\"enCréation\"\n                @click=\"() => créerNuée()\"\n              >\n                {{ t('nuées.nouvelle.texteBtnCréation') }}\n              </v-btn>\n              <v-checkbox\n                v-model=\"ouvrirAprèsCréation\"\n                :label=\"t('nuées.nouvelle.ouvrirAprèsCréation')\"\n              >\n              </v-checkbox>\n            </div>\n          </v-window-item>\n        </v-window>\n      </v-card-text>\n      <v-card-actions>\n        <btn-retour\n          :visible=\"retourActif.visible\"\n          :actif=\"retourActif.actif\"\n          @retour=\"retour\"\n        />\n        <v-spacer></v-spacer>\n        <btn-suivant\n          :visible=\"suivantActif.visible\"\n          :actif=\"suivantActif.actif\"\n          @suivant=\"suivant\"\n        />\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script setup lang=\"ts\">\nimport {type tableaux as tblx, type valid} from '@constl/ipa';\n\nimport {v4 as uuidv4} from 'uuid';\n\nimport {கிளிமூக்கை_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport {computed, ref} from 'vue';\nimport {useRouter} from 'vue-router';\nimport {useDisplay} from 'vuetify';\nimport ListeNoms from '../communs/listeNoms/ListeNoms.vue';\nimport NouveauTableau from '../tableaux/NouveauTableau.vue';\nimport BtnRetour from '/@/components/communs/BtnRetour.vue';\nimport BtnSuivant from '/@/components/communs/BtnSuivant.vue';\nimport ItemSpecificationTableau from '/@/components/tableaux/ItemSpécificationTableau.vue';\nimport {utiliserConstellation} from '/@/components/utils';\n\nconst {mdAndUp} = useDisplay();\n\nconst {மொழியாக்கம்_பயன்படுத்து} = கிளிமூக்கை_பயன்படுத்து();\nconst {$மொ: t} = மொழியாக்கம்_பயன்படுத்து();\nconst router = useRouter();\n\nconst émettre = defineEmits<{(é: 'nouvelle', id: string): void}>();\n\nconst constl = utiliserConstellation();\n\n// Navigation\nconst dialogue = ref(false);\n\nconst étape = ref(0);\nconst listeÉtapes = ['noms', 'descriptions', 'autorisation', 'tableaux', 'confirmation'] as const;\n\nconst titreCarte = computed(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'noms':\n      return 'nuées.nouvelle.titreNoms';\n    case 'descriptions':\n      return 'nuées.nouvelle.titreDescriptions';\n    case 'autorisation':\n      return 'nuées.nouvelle.titreAutorisation';\n    case 'tableaux':\n      return 'nuées.nouvelle.titreTableaux';\n    case 'confirmation':\n      return 'nuées.nouvelle.titreConfirmation';\n    default:\n      return '';\n  }\n});\n\nconst sousTitreCarte = computed(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'noms':\n      return 'nuées.nouvelle.sousTitreNoms';\n    case 'descriptions':\n      return 'nuées.nouvelle.sousTitreDescriptions';\n    case 'autorisation':\n      return 'nuées.nouvelle.sousTitreAutorisation';\n    case 'tableaux':\n      return 'nuées.nouvelle.sousTitreTableaux';\n    case 'confirmation':\n      return 'nuées.nouvelle.sousTitreConfirmation';\n    default:\n      return '';\n  }\n});\n\nconst retour = () => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    default:\n      étape.value--;\n      break;\n  }\n};\n\nconst suivant = () => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    default:\n      étape.value++;\n      break;\n  }\n};\n\nconst suivantActif = computed<{actif: boolean; visible: boolean}>(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'noms':\n      return {actif: !!Object.keys(noms.value).length, visible: true};\n    case 'autorisation':\n      return {actif: autorisation.value !== undefined, visible: true};\n    case 'confirmation':\n      return {actif: false, visible: false};\n    default:\n      return {actif: true, visible: true};\n  }\n});\n\nconst retourActif = computed<{actif: boolean; visible: boolean}>(() => {\n  const é = listeÉtapes[étape.value];\n  switch (é) {\n    case 'noms':\n      return {actif: false, visible: false};\n    case 'confirmation':\n      return {actif: !enCréation.value, visible: true};\n    default:\n      return {actif: true, visible: true};\n  }\n});\n\n// Noms\nconst noms = ref<{[lng: string]: string}>({});\nconst ajusterNoms = (nms: {[lng: string]: string}) => {\n  noms.value = nms;\n};\n\n// Descriptions\nconst descriptions = ref<{[lng: string]: string}>({});\nconst ajusterDescriptions = (desrc: {[lng: string]: string}) => {\n  descriptions.value = desrc;\n};\n\n// Autorisation\nconst autorisation = ref<'CJPI' | 'IJPC'>('IJPC');\n\n// Tableaux\nconst tableaux = ref<\n  {\n    clef: string;\n    noms: {[langue: string]: string};\n    cols: {\n      info: tblx.InfoCol;\n      règles: valid.règleVariable[];\n    }[];\n  }[]\n>([]);\n\nconst ajouterTableau = ({\n  noms,\n  cols,\n}: {\n  noms: {[langue: string]: string};\n  cols: {info: tblx.InfoCol; règles: valid.règleVariable[]}[];\n}) => {\n  tableaux.value = [...tableaux.value, {clef: uuidv4(), noms, cols}];\n};\n\nconst effacerTableau = (clef: string) => {\n  tableaux.value = tableaux.value.filter(t => t.clef !== clef);\n};\n\nconst modifierNomsTableau = ({\n  clefTableau,\n  noms,\n}: {\n  clefTableau: string;\n  noms: {[langue: string]: string};\n}) => {\n  tableaux.value = tableaux.value.map(t => {\n    return t.clef === clefTableau ? {...t, noms} : t;\n  });\n};\n\n// Colonnes tableaux\nconst ajouterColonneTableau = ({\n  clefTableau,\n  idVariable,\n  index,\n  règles,\n}: {\n  clefTableau: string;\n  idVariable: string;\n  index?: boolean;\n  règles: valid.règleVariable[];\n}) => {\n  const nouvelleColonne = {\n    id: uuidv4(),\n    variable: idVariable,\n    index,\n  };\n  tableaux.value = tableaux.value.map(t => {\n    return t.clef === clefTableau\n      ? {clef: t.clef, noms: t.noms, cols: [...t.cols, {info: nouvelleColonne, règles}]}\n      : t;\n  });\n};\n\nconst effacerColonneTableau = ({\n  clefTableau,\n  idColonne,\n}: {\n  clefTableau: string;\n  idColonne: string;\n}) => {\n  tableaux.value = tableaux.value.map(t => {\n    return t.clef === clefTableau\n      ? {clef: t.clef, noms: t.noms, cols: t.cols.filter(c => c.info.id !== idColonne)}\n      : t;\n  });\n};\n\n// Création\nconst ouvrirAprèsCréation = ref(false);\n\nconst enCréation = ref(false);\n\nconst créerNuée = async () => {\n  enCréation.value = true;\n\n  const idNuée = await constl.nuées.créerNuée({\n    autorisation: autorisation.value,\n  });\n  if (!idNuée) throw new Error('Nuée non créée.');\n\n  await constl.nuées.sauvegarderNomsNuée({\n    idNuée,\n    noms: Object.fromEntries(Object.entries(noms.value)),\n  });\n  await constl.nuées.sauvegarderDescriptionsNuée({\n    idNuée,\n    descriptions: Object.fromEntries(Object.entries(descriptions.value)),\n  });\n\n  // Ajouter les tableaux\n  for (const tbl of tableaux.value) {\n    const idTableau = await constl.nuées.ajouterTableauNuée({\n      idNuée,\n      clefTableau: tbl.clef,\n    });\n    if (!idTableau) return;\n\n    await constl.nuées.sauvegarderNomsTableauNuée({\n      idTableau,\n      noms: tbl.noms,\n    });\n\n    // Ajouter les colonnes\n    for (const col of tbl.cols) {\n      const idColonne = col.info.id;\n      await constl.nuées.ajouterColonneTableauNuée({\n        idTableau,\n        idVariable: col.info.variable,\n        idColonne,\n      });\n      if (col.info.index)\n        await constl.nuées.changerColIndexTableauNuée({\n          idTableau,\n          idColonne,\n          val: col.info.index,\n        });\n\n      // Ajotuer les règles colonne\n      for (const règle of col.règles) {\n        await constl.nuées.ajouterRègleTableauNuée({\n          idTableau,\n          idColonne,\n          règle,\n        });\n      }\n    }\n  }\n\n  émettre('nouvelle', idNuée);\n\n  fermer();\n\n  if (ouvrirAprèsCréation.value)\n    router.push(encodeURI(`/données/nuée/${encodeURIComponent(idNuée)}`));\n};\n\n// Fermer\nconst fermer = () => {\n  noms.value = {};\n  descriptions.value = {};\n  autorisation.value = 'IJPC';\n  tableaux.value = [];\n\n  étape.value = 0;\n  dialogue.value = false;\n  enCréation.value = false;\n};\n</script>\n","<template>\n  <selecteur-objet\n    :multiples=\"multiples\"\n    :originaux=\"originales\"\n    :resultats-recherche=\"résultats\"\n    :on-travaille=\"onTravaille\"\n    :texte-etiquette-recherche=\"t('nuées.recherche.étiquette')\"\n    :texte-aucun-résultat=\"t('nuées.recherche.aucunRésultat')\"\n    @selectionnee=\"ids => (idsNuéesSélectionnées = ids)\"\n    @requete-modifiee=\"r => (requête = r)\"\n  >\n    <template #résultat=\"{résultat, click}\">\n      <ResultatRechercheNuée\n        :résultat=\"résultat\"\n        @click=\"click\"\n      />\n    </template>\n    <template #jeton-objet=\"{id, deselectionner}\">\n      <carte-nuée :id=\"id\">\n        <template #activator=\"{props: propsActivateur}\">\n          <jeton-nuee\n            :id=\"id\"\n            v-bind=\"{props: propsActivateur}\"\n          >\n            <v-icon\n              class=\"ms-2\"\n              icon=\"mdi-close\"\n              size=\"small\"\n              variant=\"flat\"\n              @click=\"() => deselectionner({id})\"\n            />\n          </jeton-nuee>\n        </template>\n      </carte-nuée>\n    </template>\n    <template #nouveau=\"{nouveau}\">\n      <nouvelle-nuée @nouvelle=\"nouveau\">\n        <template #activator=\"{props: propsActivateur}\">\n          <v-list-item\n            v-bind=\"propsActivateur\"\n            :title=\"t('nuées.nouveau.btn')\"\n            prepend-icon=\"mdi-plus\"\n          >\n          </v-list-item>\n        </template>\n      </nouvelle-nuée>\n    </template>\n  </selecteur-objet>\n</template>\n<script setup lang=\"ts\">\nimport {rechercher} from '@constl/vue';\nimport {ref, watchEffect} from 'vue';\n\nimport SelecteurObjet from '/@/components/communs/SélecteurObjet.vue';\nimport ResultatRechercheNuée from '/@/components/recherche/RésultatRechercheNuée.vue';\n\nimport {utiliserConstellation} from '/@/components/utils';\n\nimport {கிளிமூக்கை_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport CarteNuée from './CarteNuée.vue';\nimport JetonNuee from './JetonNuée.vue';\nimport NouvelleNuée from './NouvelleNuée.vue';\n\ndefineProps<{multiples: boolean; originales?: string[]}>();\nconst émettre = defineEmits<{\n  (é: 'selectionnee', idsNuées: string[]): void;\n}>();\n\nconst {மொழியாக்கம்_பயன்படுத்து} = கிளிமூக்கை_பயன்படுத்து();\nconst {$மொ: t} = மொழியாக்கம்_பயன்படுத்து();\n\nconst constl = utiliserConstellation();\n\n// Sélection\nconst idsNuéesSélectionnées = ref<string[]>([]);\nwatchEffect(() => {\n  émettre('selectionnee', idsNuéesSélectionnées.value);\n});\n\n// Contrôles recherche\nconst requête = ref('');\nconst {résultats, onTravaille} = rechercher(constl.recherche.rechercherNuéesSelonTexte, {\n  texte: requête,\n});\n</script>\n"],"names":["props","__props","émettre","__emit","mdAndUp","useDisplay","மொழியாக்கம்_பயன்படுத்து","கிளிமூக்கை_பயன்படுத்து","t","constl","utiliserConstellation","dialogue","ref","étape","listeÉtapes","titreCarte","computed","sousTitreCarte","suivant","é","retour","suivantActif","idVariableChoisie","retourActif","choisirVariable","idVar","catégorieVariableChoisie","suivre","catégorieBaseVariableChoisie","index","règlesVariable","règlesColonne","ajouterRègle","règle","idRègle","uuidv4","effacerRègle","r","prèteÀCréér","créerColonne","idVariable","fermer","அகராதியிலிருந்து_மொழிபெயர்ப்பு","மொழிகளைப்_பயன்படுத்து","choixVariable","watchEffect","nomsVariable","nomVariableTraduit","choixIndex","spécColonne","effacerColonne","noms","ajusterNoms","nms","colonnes","ajouterColonne","idColonne","règles","modifierColonne","c","variablesDéjàAjoutées","confirmer","modifierNoms","noms_","nomTraduit","v","info","router","useRouter","autorisation","enCréation","descriptions","ajusterDescriptions","desrc","tableaux","ajouterTableau","cols","effacerTableau","clef","modifierNomsTableau","clefTableau","ajouterColonneTableau","nouvelleColonne","effacerColonneTableau","ouvrirAprèsCréation","créerNuée","idNuée","tbl","idTableau","col","idsNuéesSélectionnées","requête","résultats","onTravaille","rechercher"],"mappings":"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"}