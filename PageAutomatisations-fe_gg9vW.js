import{q as $,h as n,d as E,p as N,க as M,r as x,o as ue,cq as le,c as w,a as v,M as A,w as t,F as D,b as e,j as R,f as q,t as F,G as te,ds as re,n as B,cu as ce,v as me,A as T,aY as P,a8 as de,bJ as pe,dt as fe,a1 as ee,K as U,du as z,aw as ve,Q as O,s as J,dv as _e,x as L,i as X,e as G,y as se,m as H,aO as I,R as ae,ao as Ve,ap as ye,aq as xe,V as K,H as Q,I as Y,J as W,c5 as ge,bT as be,X as ie,aE as qe,aI as $e,z as we,N as ke}from"./index-DTXzon30.js";import{o as je}from"./action-B-jcbhzt.js";import{g as ne,d as Ce,e as De,f as Fe,h as Se,i as Ue,j as he,_ as Te,a as Ae,c as Ee,b as Me}from"./OptionsFormatExportation.vue_vue_type_script_setup_true_lang-D5S-OKB7.js";import{a as Ie}from"./index-DynzS7jk.js";import{_ as Ne}from"./TitrePage.vue_vue_type_script_setup_true_lang-Ch1ptsOR.js";import"./SélecteurNuée.vue_vue_type_script_setup_true_lang-C9Eq5tXR.js";import"./RésultatRechercheNuée.vue_vue_type_script_setup_true_lang-Ch1QqMMO.js";import"./CarteNuée.vue_vue_type_script_setup_true_lang-D9YWjjL7.js";import"./RésultatRechercheProjet.vue_vue_type_script_setup_true_lang-BEFI3gX2.js";import"./CarteProjet.vue_vue_type_script_setup_true_lang-BXt6vThV.js";import"./NouveauProjet.vue_vue_type_script_setup_true_lang-zU1WhDzQ.js";const Be=()=>{const g=Ie();return p=>{const c=n(p),o=$(()=>c?g.value.getTime()-c:void 0);return $(()=>{if(o.value!==void 0){const s=Math.abs(o.value),i=o.value<0?-1:1;return s<1e3?{unité:"millisecondes",n:s*i}:s<1e3*60?{unité:"secondes",n:Math.floor(s/1e3)*i}:s<1e3*60*60?{unité:"minutes",n:Math.floor(s/(1e3*60))*i}:s<1e3*60*60*24?{unité:"heures",n:Math.floor(s/(1e3*60*60))*i}:s<1e3*60*60*24*7?{unité:"jours",n:Math.floor(s/(1e3*60*60*24))*i}:s<1e3*60*60*24*30?{unité:"semaines",n:Math.floor(s/(1e3*60*60*24*7))*i}:s<1e3*60*60*24*365.25?{unité:"mois",n:Math.floor(s/(1e3*60*60*24*30))*i}:{unité:"années",n:Math.floor(s/(1e3*60*60*24*365.25))*i}}})}},Pe=({t:g,clefs:p={dans:{millisecondes:"communs.temps.dans.ms",secondes:"communs.temps.dans.secondes",minutes:"communs.temps.dans.minutes",heures:"communs.temps.dans.heures",jours:"communs.temps.dans.jours",semaines:"communs.temps.dans.semaines",mois:"communs.temps.dans.mois",années:"communs.temps.dans.années"},depuis:{millisecondes:"communs.temps.depuis.ms",secondes:"communs.temps.depuis.secondes",minutes:"communs.temps.depuis.minutes",heures:"communs.temps.depuis.heures",jours:"communs.temps.depuis.jours",semaines:"communs.temps.depuis.semaines",mois:"communs.temps.depuis.mois",années:"communs.temps.depuis.années"}}})=>{const c=Be();return o=>{const a=c(o);return $(()=>{if(a.value)return g(p[a.value.n<0?"dans":"depuis"][a.value.unité],{n:Math.abs(a.value.n)})})}},ze=E({__name:"ItemStatutAutomatisation",props:{statut:{},spécification:{}},setup(g){const p=N(),{மொழியாக்கம்_பயன்படுத்து:c}=M(),{$மொ:o}=c(),a=Pe({t:o}),s=g,i=$(()=>{switch(s.statut.type){case"erreur":return{icône:"mdi-alert",couleur:"error"};case"programmée":return{icône:"mdi-check",couleur:"success"};case"sync":return{icône:"mdi-sync",couleur:"primary"};case"écoute":return{icône:"",couleur:"success"};default:throw new Error(JSON.stringify(s.statut))}}),l=x(new Date().getTime());let _;ue(()=>{_=window.setInterval(()=>l.value=new Date().getTime(),1e3)}),le(()=>{_&&clearInterval(_)});const r=async()=>{},f=a($(()=>s.statut.type==="programmée"?s.statut.à:s.statut.type==="erreur"?s.statut.prochaineProgramméeÀ:void 0)),j=a($(()=>s.statut.type==="sync"?s.statut.depuis:void 0)),b=$(()=>{switch(s.statut.type){case"écoute":return"automatisations.jetonStatut.écoute";case"sync":return o("automatisations.jetonStatut.sync",{depuis:j.value});case"programmée":return o("automatisations.jetonStatut.programmée",{dans:f.value});case"erreur":return s.statut.prochaineProgramméeÀ?o("automatisations.jetonStatut.erreurRéssayer",{dans:f.value}):"automatisations.jetonStatut.erreur";default:throw new Error(s.statut)}}),h=async()=>await p.automatisations.lancerManuellement({id:s.spécification.id});return(C,m)=>(v(),w(A,{title:"Ce dispositif"},{prepend:t(()=>[e(te,{start:"",color:i.value.couleur},{default:t(()=>[q(F(i.value.icône),1)]),_:1},8,["color"])]),subtitle:t(()=>[q(F(n(o)(b.value)),1)]),default:t(()=>[C.spécification?.type==="exportation"?(v(),w(ne,{key:0,class:"my-2",spécification:C.spécification,onClick:m[0]||(m[0]=()=>r())},null,8,["spécification"])):D("",!0),e(R,{class:"my-2",size:"small",variant:"outlined","append-icon":"mdi-refresh",onClick:h},{default:t(()=>m[1]||(m[1]=[q(' "Relancer" ')])),_:1})]),_:1}))}}),Oe={key:0},Re={key:0,class:"d-flex"},Je={key:0,class:"d-flex mb-4"},Le=E({__name:"OptionsFréquenceExportation",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(g){const p=re(g,"modelValue"),{mdAndUp:c}=B(),{மொழியாக்கம்_பயன்படுத்து:o}=M(),{$மொ:a}=o(),s=ce(),i=[{value:"manuelle",title:"automatisations.fréquence.manuelle",sélection:"automatisations.exportation.fréquence.sélection.manuelle"},{value:"dynamique",title:"automatisations.fréquence.dynamique",sélection:"automatisations.exportation.fréquence.sélection.dynamique"},{value:"fixe",title:"automatisations.fréquence.fixe",sélection:"automatisations.exportation.fréquence.sélection.fixe"}],l=x(z?"manuelle":"fixe"),_=x(p.value?.type==="fixe"?p.value.détails.n.toString():"1"),r=$(()=>s.எண்ணுக்கு({உரை:_.value})),f=x("jours"),j=["années","mois","semaines","jours","heures","minutes","secondes","millisecondes"],b=m=>{try{return s.எண்ணுக்கு({உரை:m}),!0}catch{return a("règles.numérique")}},h=m=>(m|0)===m,C=()=>r.value!==void 0&&r.value>0&&h(r.value)?!0:a("règles.nombreEntierPositif");return me(()=>{switch(l.value){case"manuelle":{const m={type:"manuelle"};p.value=m;break}case"dynamique":{const m={type:"dynamique"};p.value=m;break}case"fixe":{const m={type:"fixe",détails:{unités:f.value,n:r.value}};p.value=m;break}}}),(m,y)=>(v(),T(O,null,[e(P,{modelValue:l.value,"onUpdate:modelValue":y[2]||(y[2]=u=>l.value=u),class:de(n(c)?["mb-4"]:["mb-2"]),items:i,variant:"outlined",density:"compact","hide-details":""},pe({item:t(({props:u,item:k})=>[e(A,U({...u,title:n(a)(k.title)},{disabled:n(z)&&(k.value==="manuelle"||k.value==="dynamique")}),{default:t(()=>[n(z)&&(k.value==="manuelle"||k.value==="dynamique")?(v(),T("span",Oe,[e(te,{size:"small",start:""},{default:t(()=>y[5]||(y[5]=[q(" mdi-alert-outline ")])),_:1}),q(" "+F(n(a)("automatisations.fréquence.pasSurNavig")),1)])):D("",!0)]),_:2},1040,["disabled"])]),selection:t(({item:u})=>[q(F(n(a)(u.raw.sélection)),1)]),_:2},[n(c)?{name:"append",fn:t(()=>[e(fe,null,{default:t(()=>[l.value==="fixe"?(v(),T("div",Re,[e(ee,{modelValue:_.value,"onUpdate:modelValue":y[0]||(y[0]=u=>_.value=u),variant:"outlined",density:"compact","hide-details":"",rules:[b,C]},null,8,["modelValue","rules"]),e(P,{modelValue:f.value,"onUpdate:modelValue":y[1]||(y[1]=u=>f.value=u),items:j,class:"ms-2",variant:"outlined",density:"compact","hide-details":""},{selection:t(({item:u})=>[q(F(n(a)(`automatisations.fréquence.unités.${u.raw}`)),1)]),item:t(({item:u,props:k})=>[e(A,U(k,{title:n(a)(`automatisations.fréquence.unités.${u.raw}`)}),null,16,["title"])]),_:1},8,["modelValue"])])):D("",!0)]),_:1})]),key:"0"}:void 0]),1032,["modelValue","class"]),n(c)?D("",!0):(v(),w(ve,{key:0},{default:t(()=>[l.value==="fixe"?(v(),T("div",Je,[e(ee,{modelValue:_.value,"onUpdate:modelValue":y[3]||(y[3]=u=>_.value=u),variant:"outlined",density:"compact","hide-details":"",rules:[b,C]},null,8,["modelValue","rules"]),e(P,{modelValue:f.value,"onUpdate:modelValue":y[4]||(y[4]=u=>f.value=u),items:j,class:"ms-2",variant:"outlined",density:"compact","hide-details":""},{selection:t(({item:u})=>[q(F(n(a)(`automatisations.fréquence.unités.${u.raw}`)),1)]),item:t(({item:u,props:k})=>[e(A,U(k,{title:n(a)(`automatisations.fréquence.unités.${u.raw}`)}),null,16,["title"])]),_:1},8,["modelValue"])])):D("",!0)]),_:1}))],64))}}),Xe=E({__name:"CarteAutomatisationExportation",props:{spécification:{},objetModifiable:{type:Boolean}},setup(g){const{மொழியாக்கம்_பயன்படுத்து:p}=M(),{$மொ:c}=p(),{mdAndUp:o}=B(),a=g,s=N(),i=x(!1),l=je(s.obtIdDispositif),_=J(s.automatisations.suivreÉtatAutomatisations),r=$(()=>_.value?.[a.spécification.id]),f=x(a.spécification.langues),j=x(a.spécification.dossier),b=x(a.spécification.fréquence),h=x(a.spécification.formatDoc),C=x(a.spécification.inclureDocuments),m=x(a.spécification.copies),y=x(a.spécification.dispositifs),u=$(()=>({id:a.spécification.id,type:"exportation",fréquence:b.value,idObjet:a.spécification.idObjet,typeObjet:a.spécification.typeObjet,formatDoc:h.value,dossier:j.value,langues:f.value,dispositifs:y.value,inclureDocuments:C.value,copies:m.value})),k=async()=>{const S=await ge();S&&(j.value=S)},Z=$(()=>!_e(u.value,a.spécification)),oe=async()=>{Z.value&&await s.automatisations.modifierAutomatisation({id:a.spécification.id,automatisation:u.value})};return(S,d)=>(v(),w(L,{modelValue:i.value,"onUpdate:modelValue":d[9]||(d[9]=V=>i.value=V)},{activator:t(({props:V})=>[Q(S.$slots,"activator",Y(W({props:V})))]),default:t(()=>[e(K,{class:"mx-auto","max-width":n(o)?500:300},{default:t(()=>[e(X,null,{default:t(()=>[e(G,{class:"d-flex align-center"},{default:t(()=>[q(F(n(c)("automatisations.exportation.titreCarte"))+" ",1),e(se),e(R,{icon:"mdi-close",size:"small",variant:"flat",onClick:d[0]||(d[0]=V=>i.value=!1)})]),_:1})]),_:1}),e(H,{style:{"overflow-y":"scroll"}},{default:t(()=>[e(I,{titre:n(c)("automatisations.exportation.sousSections.statut"),"en-attente":!1},null,8,["titre"]),r.value?(v(),w(ze,{key:0,statut:r.value,spécification:S.spécification},null,8,["statut","spécification"])):D("",!0),n(l)&&S.spécification.dispositifs.includes(n(l))?(v(),w(ne,{key:1,class:"my-2",spécification:S.spécification,onClick:d[1]||(d[1]=()=>k())},null,8,["spécification"])):D("",!0),e(I,{titre:n(c)("automatisations.exportation.sousSections.format"),"en-attente":!1},null,8,["titre"]),e(Ce,{modelValue:h.value,"onUpdate:modelValue":d[2]||(d[2]=V=>h.value=V)},null,8,["modelValue"]),e(De,{modelValue:f.value,"onUpdate:modelValue":d[3]||(d[3]=V=>f.value=V)},null,8,["modelValue"]),e(Fe,{modelValue:C.value,"onUpdate:modelValue":d[4]||(d[4]=V=>C.value=V)},null,8,["modelValue"]),e(I,{titre:n(c)("automatisations.exportation.sousSections.fréquence"),"en-attente":!1},null,8,["titre"]),e(Le,{modelValue:b.value,"onUpdate:modelValue":d[5]||(d[5]=V=>b.value=V)},null,8,["modelValue"]),e(Se,{modelValue:m.value,"onUpdate:modelValue":d[6]||(d[6]=V=>m.value=V)},null,8,["modelValue"])]),_:1}),e(ae),e(Ve,null,{default:t(()=>[e(ye,{onClick:d[7]||(d[7]=V=>i.value=!1)}),e(xe,{actif:Z.value,onClick:d[8]||(d[8]=()=>oe())},null,8,["actif"])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),Ge=E({__name:"CarteAutomatisationImportation",props:{specification:{}},setup(g){const{மொழியாக்கம்_பயன்படுத்து:p}=M(),{$மொ:c}=p(),{mdAndUp:o}=B(),a=g,s=N(),i=x(!1),l=J(s.automatisations.suivreÉtatAutomatisations),_=$(()=>l.value?.[a.specification.id]);return(r,f)=>{const j=be("nom-tableau");return v(),w(L,{modelValue:i.value,"onUpdate:modelValue":f[0]||(f[0]=b=>i.value=b)},{activator:t(({props:b})=>[Q(r.$slots,"activator",Y(W({props:b})))]),default:t(()=>[e(K,{class:"mx-auto","max-width":n(o)?500:300},{default:t(()=>[e(X,null,{default:t(()=>[e(G,null,{default:t(()=>[e(j,{"id-tableau":r.specification.idTableau},null,8,["id-tableau"])]),_:1})]),_:1}),e(H,null,{default:t(()=>[e(I,{titre:n(c)("automatisations.statut"),"en-attente":!1},null,8,["titre"]),_.value?(v(),w(Ue,{key:0,statut:_.value},null,8,["statut"])):D("",!0),e(he,{spécification:r.specification},null,8,["spécification"])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"])}}}),He=E({__name:"NouvelleAutomatisation",setup(g){const{மொழியாக்கம்_பயன்படுத்து:p}=M(),{$மொ:c}=p(),{mdAndUp:o}=B(),a=x(!1);return(s,i)=>(v(),w(L,{modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=l=>a.value=l)},{activator:t(({props:l})=>[Q(s.$slots,"activator",Y(W({props:l})))]),default:t(()=>[e(K,{class:"mx-auto","max-width":n(o)?500:300},{default:t(()=>[e(X,null,{default:t(()=>[e(G,{class:"d-flex align-center"},{default:t(()=>[q(F(n(c)(""))+" Ajout d'automatisation ",1),e(se),e(R,{icon:"mdi-close",size:"small",variant:"flat",onClick:i[0]||(i[0]=l=>a.value=!1)})]),_:1})]),_:1}),e(H,null,{default:t(()=>[e(ie,null,{default:t(()=>[e(Te,null,{activator:t(({props:l})=>[e(A,U({"prepend-icon":"mdi-import"},l),{default:t(()=>i[2]||(i[2]=[q(" Importer ")])),_:2},1040)]),_:1}),e(Ae,null,{activator:t(({props:l})=>[e(A,U({"prepend-icon":"mdi-export"},l),{default:t(()=>i[3]||(i[3]=[q(" Exporter ")])),_:2},1040)]),_:1})]),_:1})]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),Ke={key:0},Qe={class:"my-6 text-center text-h5 text-disabled"},lt=E({__name:"PageAutomatisations",setup(g){const p=N(),{மொழியாக்கம்_பயன்படுத்து:c}=M(),{$மொ:o}=c(),{obtImageDéco:a}=qe(),s=a("automatisation"),i=J(p.automatisations.suivreAutomatisations);return(l,_)=>(v(),w($e,{class:"text-center"},{default:t(()=>[e(Ne,{titre:n(o)("pages.automatisations.titre"),image:n(s),"sous-titre":n(o)("pages.automatisations.sousTitre")},null,8,["titre","image","sous-titre"]),e(ie,{class:"text-start"},{default:t(()=>[e(He,{automatiser:""},{activator:t(({props:r})=>[e(A,U(r,{"prepend-icon":"mdi-plus",title:n(o)("pages.automatisations.ajouterNouvelle.titre"),subtitle:n(o)("pages.automatisations.ajouterNouvelle.sousTitre")}),null,16,["title","subtitle"])]),_:1}),e(ae),n(i)?.length?D("",!0):(v(),T("div",Ke,[we("p",Qe,F(n(o)("pages.automatisations.aucune")),1)])),(v(!0),T(O,null,ke(n(i),r=>(v(),T(O,{key:r.id},[r.type==="exportation"?(v(),w(Xe,{key:0,spécification:r,"objet-modifiable":""},{activator:t(({props:f})=>[e(Ee,U({ref_for:!0},f,{specification:r}),null,16,["specification"])]),_:2},1032,["spécification"])):(v(),w(Ge,{key:1,specification:r,"objet-modifiable":""},{activator:t(({props:f})=>[e(Me,U({ref_for:!0},f,{specification:r}),null,16,["specification"])]),_:2},1032,["specification"]))],64))),128))]),_:1})]),_:1}))}});export{lt as default};
//# sourceMappingURL=PageAutomatisations-fe_gg9vW.js.map
