import{d as J,p as K,n as ds,ம as ps,r as I,s as C,q as u,eu as w,c as E,a as F,x as cs,h as t,w as a,b as e,V as fs,i as vs,e as ms,f as V,t as b,y as L,j as M,R as z,m as js,z as r,G as x,ev as T,dW as f,as as O,ac as R,ad as G,aj as _s,ak as gs,al as bs,H as W,I as Q,J as X,ew as Ps,P as Vs,K as qs,b2 as H}from"./index-vTWNlU7D.js";const ws={class:"font-weight-bold"},xs={class:"mb-2"},Ts={class:"font-weight-bold"},Cs={class:"font-weight-bold"},Us={class:"font-weight-bold"},Ds=J({__name:"ÉpinglerProjet",props:{idProjet:{}},setup(U){const o=U,l=K(),{mdAndUp:q}=ds(),{$மொ:p}=ps(),m=I(!1),j=I(!1),_=C(l.projets.suivreÉpingleProjet,{idProjet:u(()=>o.idProjet)}),{sélection:g,dispositifs:n,spécifiques:c,valide:d,modifié:v}=w(u(()=>_.value?.base),"TOUS"),{sélection:P,dispositifs:Y,spécifiques:D,valide:Z,modifié:h}=w(u(()=>_.value?.bds.base),"TOUS"),{sélection:y,dispositifs:ss,spécifiques:A,valide:es,modifié:is}=w(u(()=>_.value?.bds.données.tableaux),"INSTALLÉ"),{sélection:N,dispositifs:ts,spécifiques:B,valide:as,modifié:os}=w(u(()=>_.value?.bds.données.fichiers),"INSTALLÉ"),ls=u(()=>d&&Z&&es&&as),ns=u(()=>v.value||h.value||is.value||os.value),S=I(!1),rs=async()=>{if(S.value=!0,n.value!=="AUCUN"){const k={type:"projet",base:n.value,bds:{type:"bd",base:Y.value,données:{tableaux:ss.value,fichiers:ts.value}}};await l.projets.épinglerProjet({idProjet:o.idProjet,options:k})}else await us();$()},us=async()=>{await l.favoris.désépinglerFavori({idObjet:o.idProjet})},$=()=>{m.value=!1,S.value=!1};return(k,s)=>(F(),E(cs,{modelValue:m.value,"onUpdate:modelValue":s[10]||(s[10]=i=>m.value=i),"max-width":t(q)?500:300},{activator:a(({props:i})=>[W(k.$slots,"activateur",Q(X({props:i})))]),default:a(()=>[e(fs,null,{default:a(()=>[e(vs,null,{default:a(()=>[e(ms,{class:"d-flex align-center"},{default:a(()=>[V(b(t(p)("épingler.titre"))+" ",1),e(L),e(M,{icon:"mdi-close",size:"small",variant:"flat",onClick:$})]),_:1})]),_:1}),e(z),e(js,{style:{"overflow-y":"scroll"}},{default:a(()=>[e(x,{start:""},{default:a(()=>s[11]||(s[11]=[V("mdi-pin-outline")])),_:1,__:[11]}),r("span",ws,b(t(p)("épingler.dispositifsÉpingle")),1),e(T,{selection:t(g),"onUpdate:selection":s[0]||(s[0]=i=>f(g)?g.value=i:null),specifiques:t(c),"onUpdate:specifiques":s[1]||(s[1]=i=>f(c)?c.value=i:null),class:"ms-4"},null,8,["selection","specifiques"]),e(O,null,{default:a(()=>[R(r("div",null,[r("p",xs,[r("span",null,b(t(p)("épingler.optionsAvancées")),1),e(M,{icon:j.value?"mdi-chevron-up":"mdi-chevron-down",size:"xsmall",variant:"flat",onClick:s[2]||(s[2]=()=>j.value=!j.value)},null,8,["icon"])]),e(O,null,{default:a(()=>[R(r("div",null,[e(z,{class:"mb-2"}),r("p",null,[e(x,{start:""},{default:a(()=>s[12]||(s[12]=[V("mdi-database")])),_:1,__:[12]}),r("span",Ts,b(t(p)("épingler.dispositifsÉpingleBds")),1)]),e(T,{selection:t(P),"onUpdate:selection":s[3]||(s[3]=i=>f(P)?P.value=i:null),specifiques:t(D),"onUpdate:specifiques":s[4]||(s[4]=i=>f(D)?D.value=i:null),class:"ms-4"},null,8,["selection","specifiques"]),r("p",null,[e(x,{start:""},{default:a(()=>s[13]||(s[13]=[V("mdi-table-multiple")])),_:1,__:[13]}),r("span",Cs,b(t(p)("épingler.dispositifsÉpingleDonnées")),1)]),e(T,{selection:t(y),"onUpdate:selection":s[5]||(s[5]=i=>f(y)?y.value=i:null),specifiques:t(A),"onUpdate:specifiques":s[6]||(s[6]=i=>f(A)?A.value=i:null),class:"ms-4"},null,8,["selection","specifiques"]),r("p",null,[e(x,{start:""},{default:a(()=>s[14]||(s[14]=[V("mdi-image-multiple-outline")])),_:1,__:[14]}),r("span",Us,b(t(p)("épingler.dispositifsÉpingleDocuments")),1)]),e(T,{selection:t(N),"onUpdate:selection":s[7]||(s[7]=i=>f(N)?N.value=i:null),specifiques:t(B),"onUpdate:specifiques":s[8]||(s[8]=i=>f(B)?B.value=i:null),class:"ms-4"},null,8,["selection","specifiques"])],512),[[G,j.value]])]),_:1})],512),[[G,t(g)!=="AUCUN"]])]),_:1})]),_:1}),e(z),e(_s,null,{default:a(()=>[e(L),e(gs,{onClick:$}),e(bs,{actif:ls.value&&ns.value,"en-attente":S.value,onClick:s[9]||(s[9]=()=>rs())},null,8,["actif","en-attente"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),As=J({__name:"CarteProjet",props:{id:{}},setup(U){const o=U,l=K(),q=C(l.projets.suivreNomsProjet,{idProjet:u(()=>o.id)},{}),p=async n=>{const{àEffacer:c,àAjouter:d}=H({anciennes:q.value,nouvelles:n});for(const v of c)await l.projets.effacerNomProjet({idProjet:o.id,langue:v});await l.projets.sauvegarderNomsProjet({idProjet:o.id,noms:d})},m=C(l.projets.suivreDescriptionsProjet,{idProjet:u(()=>o.id)},{}),j=async n=>{const{àEffacer:c,àAjouter:d}=H({anciennes:m.value,nouvelles:n});for(const v of c)await l.projets.effacerDescriptionProjet({idProjet:o.id,langue:v});await l.projets.sauvegarderDescriptionsProjet({idProjet:o.id,descriptions:d})},_=C(l.réseau.suivreAuteursProjet,{idProjet:u(()=>o.id)}),g=async()=>{await l.projets.effacerProjet({idProjet:o.id})};return(n,c)=>(F(),E(Ps,{id:n.id,noms:t(q),descriptions:t(m),auteurs:t(_),"fichiers-epinglables":!0,onAjusterNoms:p,onAjusterDescriptions:j,onEffacer:g},{activateur:a(({props:d})=>[W(n.$slots,"activateur",Q(X({props:d})))]),epingler:a(({activateur:d,epingle:v})=>[e(Ds,{"id-projet":n.id},{activateur:a(({props:P})=>[(F(),E(Vs(d),qs(P,{id:n.id,epingle:v}),null,16,["id","epingle"]))]),_:2},1032,["id-projet"])]),_:3},8,["id","noms","descriptions","auteurs"]))}});export{As as _,Ds as a};
//# sourceMappingURL=CarteProjet.vue_vue_type_script_setup_true_lang-BcKybqkp.js.map
