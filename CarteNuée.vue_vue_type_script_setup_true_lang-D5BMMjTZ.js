import{d as K,p as Q,n as pe,ம as W,r as R,s as U,q as p,ex as w,c as E,a as F,x as fe,h as i,w as a,b as s,V as ce,i as ve,e as me,f as x,t as N,y as M,j as L,R as y,m as ge,z as d,G as C,ey as T,d$ as v,as as O,ac as G,ad as H,aj as Ne,ak as be,al as _e,H as X,I as Y,J as Z,ez as xe,P as Ve,K as qe,b2 as J}from"./index-CegiRbNH.js";const we={class:"font-weight-bold"},Ce={class:"mb-2"},Te={class:"font-weight-bold"},Ue={class:"font-weight-bold"},ye={class:"font-weight-bold"},De=K({__name:"ÉpinglerNuée",props:{idNuee:{}},setup(m){const o=m,u=Q(),{mdAndUp:D}=pe(),{$மொ:f}=W(),V=R(!1),g=R(!1),b=U(u.nuées.suivreÉpingleNuée,{idNuée:p(()=>o.idNuee)}),{sélection:_,dispositifs:q,spécifiques:r,valide:t,modifié:l}=w(p(()=>b.value?.base),"TOUS"),{sélection:c,dispositifs:$,spécifiques:A,valide:h,modifié:ee}=w(p(()=>b.value?.données.base),"TOUS"),{sélection:B,dispositifs:se,spécifiques:j,valide:ie,modifié:ne}=w(p(()=>b.value?.données.données.tableaux),"INSTALLÉ"),{sélection:k,dispositifs:ae,spécifiques:S,valide:te,modifié:le}=w(p(()=>b.value?.données.données.fichiers),"INSTALLÉ"),oe=p(()=>t&&h&&ie&&te),ue=p(()=>l.value||ee.value||ne.value||le.value),I=R(!1),de=async()=>{if(I.value=!0,q.value!=="AUCUN"){const P={type:"nuée",base:q.value,données:{type:"bd",base:$.value,données:{tableaux:se.value,fichiers:ae.value}}};await u.nuées.épinglerNuée({idNuée:o.idNuee,options:P})}else await re();z()},re=async()=>{await u.favoris.désépinglerFavori({idObjet:o.idNuee})},z=()=>{V.value=!1,I.value=!1};return(P,e)=>(F(),E(fe,{modelValue:V.value,"onUpdate:modelValue":e[10]||(e[10]=n=>V.value=n),"max-width":i(D)?500:300},{activator:a(({props:n})=>[X(P.$slots,"activateur",Y(Z({props:n})))]),default:a(()=>[s(ce,null,{default:a(()=>[s(ve,null,{default:a(()=>[s(me,{class:"d-flex align-center"},{default:a(()=>[x(N(i(f)("épingler.titre"))+" ",1),s(M),s(L,{icon:"mdi-close",size:"small",variant:"flat",onClick:z})]),_:1})]),_:1}),s(y),s(ge,{style:{"overflow-y":"scroll"}},{default:a(()=>[s(C,{start:""},{default:a(()=>[...e[11]||(e[11]=[x("mdi-pin-outline",-1)])]),_:1}),d("span",we,N(i(f)("épingler.dispositifsÉpingle")),1),s(T,{selection:i(_),"onUpdate:selection":e[0]||(e[0]=n=>v(_)?_.value=n:null),specifiques:i(r),"onUpdate:specifiques":e[1]||(e[1]=n=>v(r)?r.value=n:null),class:"ms-4"},null,8,["selection","specifiques"]),s(O,null,{default:a(()=>[G(d("div",null,[d("p",Ce,[d("span",null,N(i(f)("épingler.optionsAvancées")),1),s(L,{icon:g.value?"mdi-chevron-up":"mdi-chevron-down",size:"xsmall",variant:"flat",onClick:e[2]||(e[2]=()=>g.value=!g.value)},null,8,["icon"])]),s(O,null,{default:a(()=>[G(d("div",null,[s(y,{class:"mb-2"}),d("p",null,[s(C,{start:""},{default:a(()=>[...e[12]||(e[12]=[x("mdi-database-outline",-1)])]),_:1}),d("span",Te,N(i(f)("épingler.dispositifsÉpingleBds")),1)]),s(T,{selection:i(c),"onUpdate:selection":e[3]||(e[3]=n=>v(c)?c.value=n:null),specifiques:i(A),"onUpdate:specifiques":e[4]||(e[4]=n=>v(A)?A.value=n:null),class:"ms-4"},null,8,["selection","specifiques"]),d("p",null,[s(C,{start:""},{default:a(()=>[...e[13]||(e[13]=[x("mdi-table-multiple",-1)])]),_:1}),d("span",Ue,N(i(f)("épingler.dispositifsÉpingleDonnées")),1)]),s(T,{selection:i(B),"onUpdate:selection":e[5]||(e[5]=n=>v(B)?B.value=n:null),specifiques:i(j),"onUpdate:specifiques":e[6]||(e[6]=n=>v(j)?j.value=n:null),class:"ms-4"},null,8,["selection","specifiques"]),d("p",null,[s(C,{start:""},{default:a(()=>[...e[14]||(e[14]=[x("mdi-image-multiple-outline",-1)])]),_:1}),d("span",ye,N(i(f)("épingler.dispositifsÉpingleDocuments")),1)]),s(T,{selection:i(k),"onUpdate:selection":e[7]||(e[7]=n=>v(k)?k.value=n:null),specifiques:i(S),"onUpdate:specifiques":e[8]||(e[8]=n=>v(S)?S.value=n:null),class:"ms-4"},null,8,["selection","specifiques"])],512),[[H,g.value]])]),_:1})],512),[[H,i(_)!=="AUCUN"]])]),_:1})]),_:1}),s(y),s(Ne,null,{default:a(()=>[s(M),s(be,{onClick:z}),s(_e,{actif:oe.value&&ue.value,"en-attent":I.value,onClick:e[9]||(e[9]=()=>de())},null,8,["actif","en-attent"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),$e={class:"text-center"},Be=K({__name:"CarteNuée",props:{id:{}},setup(m){const o=m,u=Q(),{$மொ:D}=W(),f=U(u.nuées.suivreNomsNuée,{idNuée:p(()=>o.id)},{}),V=async r=>{const{àEffacer:t,àAjouter:l}=J({anciennes:f.value,nouvelles:r});for(const c of t)await u.nuées.effacerNomNuée({idNuée:o.id,langue:c});await u.nuées.sauvegarderNomsNuée({idNuée:o.id,noms:l})},g=U(u.nuées.suivreDescriptionsNuée,{idNuée:p(()=>o.id)},{}),b=async r=>{const{àEffacer:t,àAjouter:l}=J({anciennes:g.value,nouvelles:r});for(const c of t)await u.nuées.effacerDescriptionNuée({idNuée:o.id,langue:c});await u.nuées.sauvegarderDescriptionsNuée({idNuée:o.id,descriptions:l})},_=U(u.réseau.suivreAuteursBd,{idBd:p(()=>o.id)}),q=async()=>{await u.nuées.effacerNuée({idNuée:o.id})};return(r,t)=>(F(),E(xe,{id:m.id,noms:i(f),descriptions:i(g),auteurs:i(_),"fichiers-epinglables":!0,onAjusterNoms:t[1]||(t[1]=l=>V(l)),onAjusterDescriptions:t[2]||(t[2]=l=>b(l)),onEffacer:t[3]||(t[3]=()=>q())},{activateur:a(({props:l})=>[X(r.$slots,"activateur",Y(Z({props:l})))]),epingler:a(({activateur:l,epingle:c})=>[s(De,{"id-nuee":m.id},{activateur:a(({props:$})=>[(F(),E(Ve(l),qe($,{id:m.id,epingle:c}),null,16,["id","epingle"]))]),_:2},1032,["id-nuee"])]),default:a(()=>[s(y,{class:"mb-2"}),d("div",$e,[s(L,{variant:"outlined","append-icon":"mdi-open-in-new",onClick:t[0]||(t[0]=l=>r.$router.push(encodeURI(`/données/nuée/${encodeURIComponent(m.id)}`)))},{default:a(()=>[x(N(i(D)("nuées.carteNuée.ouvrirNuée")),1)]),_:1})])]),_:3},8,["id","noms","descriptions","auteurs"]))}});export{Be as _,De as a};
//# sourceMappingURL=CarteNuée.vue_vue_type_script_setup_true_lang-D5BMMjTZ.js.map
