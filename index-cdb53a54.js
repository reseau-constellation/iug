var bm=Object.defineProperty;var _m=(t,n,_)=>n in t?bm(t,n,{enumerable:!0,configurable:!0,writable:!0,value:_}):t[n]=_;var wt=(t,n,_)=>(_m(t,typeof n!="symbol"?n+"":n,_),_),rl=(t,n,_)=>{if(!n.has(t))throw TypeError("Cannot "+_)};var il=(t,n,_)=>(rl(t,n,"read from private field"),_?_.call(t):n.get(t)),al=(t,n,_)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,_)},ol=(t,n,_,x)=>(rl(t,n,"write to private field"),x?x.call(t,_):n.set(t,_),_);function _mergeNamespaces(t,n){for(var _=0;_<n.length;_++){const x=n[_];if(typeof x!="string"&&!Array.isArray(x)){for(const E in x)if(E!=="default"&&!(E in t)){const S=Object.getOwnPropertyDescriptor(x,E);S&&Object.defineProperty(t,E,S.get?S:{enumerable:!0,get:()=>x[E]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const E of document.querySelectorAll('link[rel="modulepreload"]'))x(E);new MutationObserver(E=>{for(const S of E)if(S.type==="childList")for(const C of S.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&x(C)}).observe(document,{childList:!0,subtree:!0});function _(E){const S={};return E.integrity&&(S.integrity=E.integrity),E.referrerPolicy&&(S.referrerPolicy=E.referrerPolicy),E.crossOrigin==="use-credentials"?S.credentials="include":E.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function x(E){if(E.ep)return;E.ep=!0;const S=_(E);fetch(E.href,S)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var n=t.default;if(typeof n=="function"){var _=function x(){return this instanceof x?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};_.prototype=n.prototype}else _={};return Object.defineProperty(_,"__esModule",{value:!0}),Object.keys(t).forEach(function(x){var E=Object.getOwnPropertyDescriptor(t,x);Object.defineProperty(_,x,E.get?E:{enumerable:!0,get:function(){return t[x]}})}),_}var browser$g={exports:{}},process$1=browser$g.exports={},cachedSetTimeout$1,cachedClearTimeout$1;function defaultSetTimout$1(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout$1(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout$1=setTimeout:cachedSetTimeout$1=defaultSetTimout$1}catch{cachedSetTimeout$1=defaultSetTimout$1}try{typeof clearTimeout=="function"?cachedClearTimeout$1=clearTimeout:cachedClearTimeout$1=defaultClearTimeout$1}catch{cachedClearTimeout$1=defaultClearTimeout$1}})();function runTimeout$1(t){if(cachedSetTimeout$1===setTimeout)return setTimeout(t,0);if((cachedSetTimeout$1===defaultSetTimout$1||!cachedSetTimeout$1)&&setTimeout)return cachedSetTimeout$1=setTimeout,setTimeout(t,0);try{return cachedSetTimeout$1(t,0)}catch{try{return cachedSetTimeout$1.call(null,t,0)}catch{return cachedSetTimeout$1.call(this,t,0)}}}function runClearTimeout$1(t){if(cachedClearTimeout$1===clearTimeout)return clearTimeout(t);if((cachedClearTimeout$1===defaultClearTimeout$1||!cachedClearTimeout$1)&&clearTimeout)return cachedClearTimeout$1=clearTimeout,clearTimeout(t);try{return cachedClearTimeout$1(t)}catch{try{return cachedClearTimeout$1.call(null,t)}catch{return cachedClearTimeout$1.call(this,t)}}}var queue$2=[],draining$1=!1,currentQueue$1,queueIndex$1=-1;function cleanUpNextTick$1(){!draining$1||!currentQueue$1||(draining$1=!1,currentQueue$1.length?queue$2=currentQueue$1.concat(queue$2):queueIndex$1=-1,queue$2.length&&drainQueue$1())}function drainQueue$1(){if(!draining$1){var t=runTimeout$1(cleanUpNextTick$1);draining$1=!0;for(var n=queue$2.length;n;){for(currentQueue$1=queue$2,queue$2=[];++queueIndex$1<n;)currentQueue$1&&currentQueue$1[queueIndex$1].run();queueIndex$1=-1,n=queue$2.length}currentQueue$1=null,draining$1=!1,runClearTimeout$1(t)}}process$1.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)n[_-1]=arguments[_];queue$2.push(new Item$1(t,n)),queue$2.length===1&&!draining$1&&runTimeout$1(drainQueue$1)};function Item$1(t,n){this.fun=t,this.array=n}Item$1.prototype.run=function(){this.fun.apply(null,this.array)};process$1.title="browser";process$1.browser=!0;process$1.env={};process$1.argv=[];process$1.version="";process$1.versions={};function noop$9(){}process$1.on=noop$9;process$1.addListener=noop$9;process$1.once=noop$9;process$1.off=noop$9;process$1.removeListener=noop$9;process$1.removeAllListeners=noop$9;process$1.emit=noop$9;process$1.prependListener=noop$9;process$1.prependOnceListener=noop$9;process$1.listeners=function(t){return[]};process$1.binding=function(t){throw new Error("process.binding is not supported")};process$1.cwd=function(){return"/"};process$1.chdir=function(t){throw new Error("process.chdir is not supported")};process$1.umask=function(){return 0};var browserExports$1=browser$g.exports;const process$2=getDefaultExportFromCjs(browserExports$1);var buffer$3={},base64Js={};base64Js.byteLength=byteLength$2;base64Js.toByteArray=toByteArray$1;base64Js.fromByteArray=fromByteArray$1;var lookup$2=[],revLookup$1=[],Arr$1=typeof Uint8Array<"u"?Uint8Array:Array,code$a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code$a.length;i$1<len;++i$1)lookup$2[i$1]=code$a[i$1],revLookup$1[code$a.charCodeAt(i$1)]=i$1;revLookup$1["-".charCodeAt(0)]=62;revLookup$1["_".charCodeAt(0)]=63;function getLens(t){var n=t.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=t.indexOf("=");_===-1&&(_=n);var x=_===n?0:4-_%4;return[_,x]}function byteLength$2(t){var n=getLens(t),_=n[0],x=n[1];return(_+x)*3/4-x}function _byteLength(t,n,_){return(n+_)*3/4-_}function toByteArray$1(t){var n,_=getLens(t),x=_[0],E=_[1],S=new Arr$1(_byteLength(t,x,E)),C=0,T=E>0?x-4:x,B;for(B=0;B<T;B+=4)n=revLookup$1[t.charCodeAt(B)]<<18|revLookup$1[t.charCodeAt(B+1)]<<12|revLookup$1[t.charCodeAt(B+2)]<<6|revLookup$1[t.charCodeAt(B+3)],S[C++]=n>>16&255,S[C++]=n>>8&255,S[C++]=n&255;return E===2&&(n=revLookup$1[t.charCodeAt(B)]<<2|revLookup$1[t.charCodeAt(B+1)]>>4,S[C++]=n&255),E===1&&(n=revLookup$1[t.charCodeAt(B)]<<10|revLookup$1[t.charCodeAt(B+1)]<<4|revLookup$1[t.charCodeAt(B+2)]>>2,S[C++]=n>>8&255,S[C++]=n&255),S}function tripletToBase64$1(t){return lookup$2[t>>18&63]+lookup$2[t>>12&63]+lookup$2[t>>6&63]+lookup$2[t&63]}function encodeChunk$1(t,n,_){for(var x,E=[],S=n;S<_;S+=3)x=(t[S]<<16&16711680)+(t[S+1]<<8&65280)+(t[S+2]&255),E.push(tripletToBase64$1(x));return E.join("")}function fromByteArray$1(t){for(var n,_=t.length,x=_%3,E=[],S=16383,C=0,T=_-x;C<T;C+=S)E.push(encodeChunk$1(t,C,C+S>T?T:C+S));return x===1?(n=t[_-1],E.push(lookup$2[n>>2]+lookup$2[n<<4&63]+"==")):x===2&&(n=(t[_-2]<<8)+t[_-1],E.push(lookup$2[n>>10]+lookup$2[n>>4&63]+lookup$2[n<<2&63]+"=")),E.join("")}var ieee754$2={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754$2.read=function(t,n,_,x,E){var S,C,T=E*8-x-1,B=(1<<T)-1,A=B>>1,I=-7,D=_?E-1:0,M=_?-1:1,V=t[n+D];for(D+=M,S=V&(1<<-I)-1,V>>=-I,I+=T;I>0;S=S*256+t[n+D],D+=M,I-=8);for(C=S&(1<<-I)-1,S>>=-I,I+=x;I>0;C=C*256+t[n+D],D+=M,I-=8);if(S===0)S=1-A;else{if(S===B)return C?NaN:(V?-1:1)*(1/0);C=C+Math.pow(2,x),S=S-A}return(V?-1:1)*C*Math.pow(2,S-x)};ieee754$2.write=function(t,n,_,x,E,S){var C,T,B,A=S*8-E-1,I=(1<<A)-1,D=I>>1,M=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=x?0:S-1,L=x?1:-1,F=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(T=isNaN(n)?1:0,C=I):(C=Math.floor(Math.log(n)/Math.LN2),n*(B=Math.pow(2,-C))<1&&(C--,B*=2),C+D>=1?n+=M/B:n+=M*Math.pow(2,1-D),n*B>=2&&(C++,B/=2),C+D>=I?(T=0,C=I):C+D>=1?(T=(n*B-1)*Math.pow(2,E),C=C+D):(T=n*Math.pow(2,D-1)*Math.pow(2,E),C=0));E>=8;t[_+V]=T&255,V+=L,T/=256,E-=8);for(C=C<<E|T,A+=E;A>0;t[_+V]=C&255,V+=L,C/=256,A-=8);t[_+V-L]|=F*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const n=base64Js,_=ieee754$2,x=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=T,t.SlowBuffer=H,t.INSPECT_MAX_BYTES=50;const E=2147483647;t.kMaxLength=E,T.TYPED_ARRAY_SUPPORT=S(),!T.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function S(){try{const Ie=new Uint8Array(1),be={foo:function(){return 42}};return Object.setPrototypeOf(be,Uint8Array.prototype),Object.setPrototypeOf(Ie,be),Ie.foo()===42}catch{return!1}}Object.defineProperty(T.prototype,"parent",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.buffer}}),Object.defineProperty(T.prototype,"offset",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.byteOffset}});function C(Ie){if(Ie>E)throw new RangeError('The value "'+Ie+'" is invalid for option "size"');const be=new Uint8Array(Ie);return Object.setPrototypeOf(be,T.prototype),be}function T(Ie,be,Te){if(typeof Ie=="number"){if(typeof be=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return D(Ie)}return B(Ie,be,Te)}T.poolSize=8192;function B(Ie,be,Te){if(typeof Ie=="string")return M(Ie,be);if(ArrayBuffer.isView(Ie))return L(Ie);if(Ie==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ie);if(He(Ie,ArrayBuffer)||Ie&&He(Ie.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(He(Ie,SharedArrayBuffer)||Ie&&He(Ie.buffer,SharedArrayBuffer)))return F(Ie,be,Te);if(typeof Ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Le=Ie.valueOf&&Ie.valueOf();if(Le!=null&&Le!==Ie)return T.from(Le,be,Te);const We=j(Ie);if(We)return We;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ie[Symbol.toPrimitive]=="function")return T.from(Ie[Symbol.toPrimitive]("string"),be,Te);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ie)}T.from=function(Ie,be,Te){return B(Ie,be,Te)},Object.setPrototypeOf(T.prototype,Uint8Array.prototype),Object.setPrototypeOf(T,Uint8Array);function A(Ie){if(typeof Ie!="number")throw new TypeError('"size" argument must be of type number');if(Ie<0)throw new RangeError('The value "'+Ie+'" is invalid for option "size"')}function I(Ie,be,Te){return A(Ie),Ie<=0?C(Ie):be!==void 0?typeof Te=="string"?C(Ie).fill(be,Te):C(Ie).fill(be):C(Ie)}T.alloc=function(Ie,be,Te){return I(Ie,be,Te)};function D(Ie){return A(Ie),C(Ie<0?0:U(Ie)|0)}T.allocUnsafe=function(Ie){return D(Ie)},T.allocUnsafeSlow=function(Ie){return D(Ie)};function M(Ie,be){if((typeof be!="string"||be==="")&&(be="utf8"),!T.isEncoding(be))throw new TypeError("Unknown encoding: "+be);const Te=Y(Ie,be)|0;let Le=C(Te);const We=Le.write(Ie,be);return We!==Te&&(Le=Le.slice(0,We)),Le}function V(Ie){const be=Ie.length<0?0:U(Ie.length)|0,Te=C(be);for(let Le=0;Le<be;Le+=1)Te[Le]=Ie[Le]&255;return Te}function L(Ie){if(He(Ie,Uint8Array)){const be=new Uint8Array(Ie);return F(be.buffer,be.byteOffset,be.byteLength)}return V(Ie)}function F(Ie,be,Te){if(be<0||Ie.byteLength<be)throw new RangeError('"offset" is outside of buffer bounds');if(Ie.byteLength<be+(Te||0))throw new RangeError('"length" is outside of buffer bounds');let Le;return be===void 0&&Te===void 0?Le=new Uint8Array(Ie):Te===void 0?Le=new Uint8Array(Ie,be):Le=new Uint8Array(Ie,be,Te),Object.setPrototypeOf(Le,T.prototype),Le}function j(Ie){if(T.isBuffer(Ie)){const be=U(Ie.length)|0,Te=C(be);return Te.length===0||Ie.copy(Te,0,0,be),Te}if(Ie.length!==void 0)return typeof Ie.length!="number"||Ge(Ie.length)?C(0):V(Ie);if(Ie.type==="Buffer"&&Array.isArray(Ie.data))return V(Ie.data)}function U(Ie){if(Ie>=E)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+E.toString(16)+" bytes");return Ie|0}function H(Ie){return+Ie!=Ie&&(Ie=0),T.alloc(+Ie)}T.isBuffer=function(be){return be!=null&&be._isBuffer===!0&&be!==T.prototype},T.compare=function(be,Te){if(He(be,Uint8Array)&&(be=T.from(be,be.offset,be.byteLength)),He(Te,Uint8Array)&&(Te=T.from(Te,Te.offset,Te.byteLength)),!T.isBuffer(be)||!T.isBuffer(Te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(be===Te)return 0;let Le=be.length,We=Te.length;for(let Ze=0,Qe=Math.min(Le,We);Ze<Qe;++Ze)if(be[Ze]!==Te[Ze]){Le=be[Ze],We=Te[Ze];break}return Le<We?-1:We<Le?1:0},T.isEncoding=function(be){switch(String(be).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.concat=function(be,Te){if(!Array.isArray(be))throw new TypeError('"list" argument must be an Array of Buffers');if(be.length===0)return T.alloc(0);let Le;if(Te===void 0)for(Te=0,Le=0;Le<be.length;++Le)Te+=be[Le].length;const We=T.allocUnsafe(Te);let Ze=0;for(Le=0;Le<be.length;++Le){let Qe=be[Le];if(He(Qe,Uint8Array))Ze+Qe.length>We.length?(T.isBuffer(Qe)||(Qe=T.from(Qe)),Qe.copy(We,Ze)):Uint8Array.prototype.set.call(We,Qe,Ze);else if(T.isBuffer(Qe))Qe.copy(We,Ze);else throw new TypeError('"list" argument must be an Array of Buffers');Ze+=Qe.length}return We};function Y(Ie,be){if(T.isBuffer(Ie))return Ie.length;if(ArrayBuffer.isView(Ie)||He(Ie,ArrayBuffer))return Ie.byteLength;if(typeof Ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ie);const Te=Ie.length,Le=arguments.length>2&&arguments[2]===!0;if(!Le&&Te===0)return 0;let We=!1;for(;;)switch(be){case"ascii":case"latin1":case"binary":return Te;case"utf8":case"utf-8":return Pe(Ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te*2;case"hex":return Te>>>1;case"base64":return qe(Ie).length;default:if(We)return Le?-1:Pe(Ie).length;be=(""+be).toLowerCase(),We=!0}}T.byteLength=Y;function Z(Ie,be,Te){let Le=!1;if((be===void 0||be<0)&&(be=0),be>this.length||((Te===void 0||Te>this.length)&&(Te=this.length),Te<=0)||(Te>>>=0,be>>>=0,Te<=be))return"";for(Ie||(Ie="utf8");;)switch(Ie){case"hex":return oe(this,be,Te);case"utf8":case"utf-8":return O(this,be,Te);case"ascii":return ee(this,be,Te);case"latin1":case"binary":return ae(this,be,Te);case"base64":return W(this,be,Te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,be,Te);default:if(Le)throw new TypeError("Unknown encoding: "+Ie);Ie=(Ie+"").toLowerCase(),Le=!0}}T.prototype._isBuffer=!0;function ne(Ie,be,Te){const Le=Ie[be];Ie[be]=Ie[Te],Ie[Te]=Le}T.prototype.swap16=function(){const be=this.length;if(be%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Te=0;Te<be;Te+=2)ne(this,Te,Te+1);return this},T.prototype.swap32=function(){const be=this.length;if(be%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Te=0;Te<be;Te+=4)ne(this,Te,Te+3),ne(this,Te+1,Te+2);return this},T.prototype.swap64=function(){const be=this.length;if(be%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Te=0;Te<be;Te+=8)ne(this,Te,Te+7),ne(this,Te+1,Te+6),ne(this,Te+2,Te+5),ne(this,Te+3,Te+4);return this},T.prototype.toString=function(){const be=this.length;return be===0?"":arguments.length===0?O(this,0,be):Z.apply(this,arguments)},T.prototype.toLocaleString=T.prototype.toString,T.prototype.equals=function(be){if(!T.isBuffer(be))throw new TypeError("Argument must be a Buffer");return this===be?!0:T.compare(this,be)===0},T.prototype.inspect=function(){let be="";const Te=t.INSPECT_MAX_BYTES;return be=this.toString("hex",0,Te).replace(/(.{2})/g,"$1 ").trim(),this.length>Te&&(be+=" ... "),"<Buffer "+be+">"},x&&(T.prototype[x]=T.prototype.inspect),T.prototype.compare=function(be,Te,Le,We,Ze){if(He(be,Uint8Array)&&(be=T.from(be,be.offset,be.byteLength)),!T.isBuffer(be))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof be);if(Te===void 0&&(Te=0),Le===void 0&&(Le=be?be.length:0),We===void 0&&(We=0),Ze===void 0&&(Ze=this.length),Te<0||Le>be.length||We<0||Ze>this.length)throw new RangeError("out of range index");if(We>=Ze&&Te>=Le)return 0;if(We>=Ze)return-1;if(Te>=Le)return 1;if(Te>>>=0,Le>>>=0,We>>>=0,Ze>>>=0,this===be)return 0;let Qe=Ze-We,St=Le-Te;const pt=Math.min(Qe,St),ft=this.slice(We,Ze),Ut=be.slice(Te,Le);for(let $t=0;$t<pt;++$t)if(ft[$t]!==Ut[$t]){Qe=ft[$t],St=Ut[$t];break}return Qe<St?-1:St<Qe?1:0};function re(Ie,be,Te,Le,We){if(Ie.length===0)return-1;if(typeof Te=="string"?(Le=Te,Te=0):Te>2147483647?Te=2147483647:Te<-2147483648&&(Te=-2147483648),Te=+Te,Ge(Te)&&(Te=We?0:Ie.length-1),Te<0&&(Te=Ie.length+Te),Te>=Ie.length){if(We)return-1;Te=Ie.length-1}else if(Te<0)if(We)Te=0;else return-1;if(typeof be=="string"&&(be=T.from(be,Le)),T.isBuffer(be))return be.length===0?-1:X(Ie,be,Te,Le,We);if(typeof be=="number")return be=be&255,typeof Uint8Array.prototype.indexOf=="function"?We?Uint8Array.prototype.indexOf.call(Ie,be,Te):Uint8Array.prototype.lastIndexOf.call(Ie,be,Te):X(Ie,[be],Te,Le,We);throw new TypeError("val must be string, number or Buffer")}function X(Ie,be,Te,Le,We){let Ze=1,Qe=Ie.length,St=be.length;if(Le!==void 0&&(Le=String(Le).toLowerCase(),Le==="ucs2"||Le==="ucs-2"||Le==="utf16le"||Le==="utf-16le")){if(Ie.length<2||be.length<2)return-1;Ze=2,Qe/=2,St/=2,Te/=2}function pt(Ut,$t){return Ze===1?Ut[$t]:Ut.readUInt16BE($t*Ze)}let ft;if(We){let Ut=-1;for(ft=Te;ft<Qe;ft++)if(pt(Ie,ft)===pt(be,Ut===-1?0:ft-Ut)){if(Ut===-1&&(Ut=ft),ft-Ut+1===St)return Ut*Ze}else Ut!==-1&&(ft-=ft-Ut),Ut=-1}else for(Te+St>Qe&&(Te=Qe-St),ft=Te;ft>=0;ft--){let Ut=!0;for(let $t=0;$t<St;$t++)if(pt(Ie,ft+$t)!==pt(be,$t)){Ut=!1;break}if(Ut)return ft}return-1}T.prototype.includes=function(be,Te,Le){return this.indexOf(be,Te,Le)!==-1},T.prototype.indexOf=function(be,Te,Le){return re(this,be,Te,Le,!0)},T.prototype.lastIndexOf=function(be,Te,Le){return re(this,be,Te,Le,!1)};function ce(Ie,be,Te,Le){Te=Number(Te)||0;const We=Ie.length-Te;Le?(Le=Number(Le),Le>We&&(Le=We)):Le=We;const Ze=be.length;Le>Ze/2&&(Le=Ze/2);let Qe;for(Qe=0;Qe<Le;++Qe){const St=parseInt(be.substr(Qe*2,2),16);if(Ge(St))return Qe;Ie[Te+Qe]=St}return Qe}function ue(Ie,be,Te,Le){return Ke(Pe(be,Ie.length-Te),Ie,Te,Le)}function _e(Ie,be,Te,Le){return Ke(Re(be),Ie,Te,Le)}function ye(Ie,be,Te,Le){return Ke(qe(be),Ie,Te,Le)}function ie(Ie,be,Te,Le){return Ke(Ne(be,Ie.length-Te),Ie,Te,Le)}T.prototype.write=function(be,Te,Le,We){if(Te===void 0)We="utf8",Le=this.length,Te=0;else if(Le===void 0&&typeof Te=="string")We=Te,Le=this.length,Te=0;else if(isFinite(Te))Te=Te>>>0,isFinite(Le)?(Le=Le>>>0,We===void 0&&(We="utf8")):(We=Le,Le=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ze=this.length-Te;if((Le===void 0||Le>Ze)&&(Le=Ze),be.length>0&&(Le<0||Te<0)||Te>this.length)throw new RangeError("Attempt to write outside buffer bounds");We||(We="utf8");let Qe=!1;for(;;)switch(We){case"hex":return ce(this,be,Te,Le);case"utf8":case"utf-8":return ue(this,be,Te,Le);case"ascii":case"latin1":case"binary":return _e(this,be,Te,Le);case"base64":return ye(this,be,Te,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,be,Te,Le);default:if(Qe)throw new TypeError("Unknown encoding: "+We);We=(""+We).toLowerCase(),Qe=!0}},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W(Ie,be,Te){return be===0&&Te===Ie.length?n.fromByteArray(Ie):n.fromByteArray(Ie.slice(be,Te))}function O(Ie,be,Te){Te=Math.min(Ie.length,Te);const Le=[];let We=be;for(;We<Te;){const Ze=Ie[We];let Qe=null,St=Ze>239?4:Ze>223?3:Ze>191?2:1;if(We+St<=Te){let pt,ft,Ut,$t;switch(St){case 1:Ze<128&&(Qe=Ze);break;case 2:pt=Ie[We+1],(pt&192)===128&&($t=(Ze&31)<<6|pt&63,$t>127&&(Qe=$t));break;case 3:pt=Ie[We+1],ft=Ie[We+2],(pt&192)===128&&(ft&192)===128&&($t=(Ze&15)<<12|(pt&63)<<6|ft&63,$t>2047&&($t<55296||$t>57343)&&(Qe=$t));break;case 4:pt=Ie[We+1],ft=Ie[We+2],Ut=Ie[We+3],(pt&192)===128&&(ft&192)===128&&(Ut&192)===128&&($t=(Ze&15)<<18|(pt&63)<<12|(ft&63)<<6|Ut&63,$t>65535&&$t<1114112&&(Qe=$t))}}Qe===null?(Qe=65533,St=1):Qe>65535&&(Qe-=65536,Le.push(Qe>>>10&1023|55296),Qe=56320|Qe&1023),Le.push(Qe),We+=St}return J(Le)}const z=4096;function J(Ie){const be=Ie.length;if(be<=z)return String.fromCharCode.apply(String,Ie);let Te="",Le=0;for(;Le<be;)Te+=String.fromCharCode.apply(String,Ie.slice(Le,Le+=z));return Te}function ee(Ie,be,Te){let Le="";Te=Math.min(Ie.length,Te);for(let We=be;We<Te;++We)Le+=String.fromCharCode(Ie[We]&127);return Le}function ae(Ie,be,Te){let Le="";Te=Math.min(Ie.length,Te);for(let We=be;We<Te;++We)Le+=String.fromCharCode(Ie[We]);return Le}function oe(Ie,be,Te){const Le=Ie.length;(!be||be<0)&&(be=0),(!Te||Te<0||Te>Le)&&(Te=Le);let We="";for(let Ze=be;Ze<Te;++Ze)We+=rt[Ie[Ze]];return We}function se(Ie,be,Te){const Le=Ie.slice(be,Te);let We="";for(let Ze=0;Ze<Le.length-1;Ze+=2)We+=String.fromCharCode(Le[Ze]+Le[Ze+1]*256);return We}T.prototype.slice=function(be,Te){const Le=this.length;be=~~be,Te=Te===void 0?Le:~~Te,be<0?(be+=Le,be<0&&(be=0)):be>Le&&(be=Le),Te<0?(Te+=Le,Te<0&&(Te=0)):Te>Le&&(Te=Le),Te<be&&(Te=be);const We=this.subarray(be,Te);return Object.setPrototypeOf(We,T.prototype),We};function G(Ie,be,Te){if(Ie%1!==0||Ie<0)throw new RangeError("offset is not uint");if(Ie+be>Te)throw new RangeError("Trying to access beyond buffer length")}T.prototype.readUintLE=T.prototype.readUIntLE=function(be,Te,Le){be=be>>>0,Te=Te>>>0,Le||G(be,Te,this.length);let We=this[be],Ze=1,Qe=0;for(;++Qe<Te&&(Ze*=256);)We+=this[be+Qe]*Ze;return We},T.prototype.readUintBE=T.prototype.readUIntBE=function(be,Te,Le){be=be>>>0,Te=Te>>>0,Le||G(be,Te,this.length);let We=this[be+--Te],Ze=1;for(;Te>0&&(Ze*=256);)We+=this[be+--Te]*Ze;return We},T.prototype.readUint8=T.prototype.readUInt8=function(be,Te){return be=be>>>0,Te||G(be,1,this.length),this[be]},T.prototype.readUint16LE=T.prototype.readUInt16LE=function(be,Te){return be=be>>>0,Te||G(be,2,this.length),this[be]|this[be+1]<<8},T.prototype.readUint16BE=T.prototype.readUInt16BE=function(be,Te){return be=be>>>0,Te||G(be,2,this.length),this[be]<<8|this[be+1]},T.prototype.readUint32LE=T.prototype.readUInt32LE=function(be,Te){return be=be>>>0,Te||G(be,4,this.length),(this[be]|this[be+1]<<8|this[be+2]<<16)+this[be+3]*16777216},T.prototype.readUint32BE=T.prototype.readUInt32BE=function(be,Te){return be=be>>>0,Te||G(be,4,this.length),this[be]*16777216+(this[be+1]<<16|this[be+2]<<8|this[be+3])},T.prototype.readBigUInt64LE=st(function(be){be=be>>>0,Be(be,"offset");const Te=this[be],Le=this[be+7];(Te===void 0||Le===void 0)&&ve(be,this.length-8);const We=Te+this[++be]*2**8+this[++be]*2**16+this[++be]*2**24,Ze=this[++be]+this[++be]*2**8+this[++be]*2**16+Le*2**24;return BigInt(We)+(BigInt(Ze)<<BigInt(32))}),T.prototype.readBigUInt64BE=st(function(be){be=be>>>0,Be(be,"offset");const Te=this[be],Le=this[be+7];(Te===void 0||Le===void 0)&&ve(be,this.length-8);const We=Te*2**24+this[++be]*2**16+this[++be]*2**8+this[++be],Ze=this[++be]*2**24+this[++be]*2**16+this[++be]*2**8+Le;return(BigInt(We)<<BigInt(32))+BigInt(Ze)}),T.prototype.readIntLE=function(be,Te,Le){be=be>>>0,Te=Te>>>0,Le||G(be,Te,this.length);let We=this[be],Ze=1,Qe=0;for(;++Qe<Te&&(Ze*=256);)We+=this[be+Qe]*Ze;return Ze*=128,We>=Ze&&(We-=Math.pow(2,8*Te)),We},T.prototype.readIntBE=function(be,Te,Le){be=be>>>0,Te=Te>>>0,Le||G(be,Te,this.length);let We=Te,Ze=1,Qe=this[be+--We];for(;We>0&&(Ze*=256);)Qe+=this[be+--We]*Ze;return Ze*=128,Qe>=Ze&&(Qe-=Math.pow(2,8*Te)),Qe},T.prototype.readInt8=function(be,Te){return be=be>>>0,Te||G(be,1,this.length),this[be]&128?(255-this[be]+1)*-1:this[be]},T.prototype.readInt16LE=function(be,Te){be=be>>>0,Te||G(be,2,this.length);const Le=this[be]|this[be+1]<<8;return Le&32768?Le|4294901760:Le},T.prototype.readInt16BE=function(be,Te){be=be>>>0,Te||G(be,2,this.length);const Le=this[be+1]|this[be]<<8;return Le&32768?Le|4294901760:Le},T.prototype.readInt32LE=function(be,Te){return be=be>>>0,Te||G(be,4,this.length),this[be]|this[be+1]<<8|this[be+2]<<16|this[be+3]<<24},T.prototype.readInt32BE=function(be,Te){return be=be>>>0,Te||G(be,4,this.length),this[be]<<24|this[be+1]<<16|this[be+2]<<8|this[be+3]},T.prototype.readBigInt64LE=st(function(be){be=be>>>0,Be(be,"offset");const Te=this[be],Le=this[be+7];(Te===void 0||Le===void 0)&&ve(be,this.length-8);const We=this[be+4]+this[be+5]*2**8+this[be+6]*2**16+(Le<<24);return(BigInt(We)<<BigInt(32))+BigInt(Te+this[++be]*2**8+this[++be]*2**16+this[++be]*2**24)}),T.prototype.readBigInt64BE=st(function(be){be=be>>>0,Be(be,"offset");const Te=this[be],Le=this[be+7];(Te===void 0||Le===void 0)&&ve(be,this.length-8);const We=(Te<<24)+this[++be]*2**16+this[++be]*2**8+this[++be];return(BigInt(We)<<BigInt(32))+BigInt(this[++be]*2**24+this[++be]*2**16+this[++be]*2**8+Le)}),T.prototype.readFloatLE=function(be,Te){return be=be>>>0,Te||G(be,4,this.length),_.read(this,be,!0,23,4)},T.prototype.readFloatBE=function(be,Te){return be=be>>>0,Te||G(be,4,this.length),_.read(this,be,!1,23,4)},T.prototype.readDoubleLE=function(be,Te){return be=be>>>0,Te||G(be,8,this.length),_.read(this,be,!0,52,8)},T.prototype.readDoubleBE=function(be,Te){return be=be>>>0,Te||G(be,8,this.length),_.read(this,be,!1,52,8)};function q(Ie,be,Te,Le,We,Ze){if(!T.isBuffer(Ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(be>We||be<Ze)throw new RangeError('"value" argument is out of bounds');if(Te+Le>Ie.length)throw new RangeError("Index out of range")}T.prototype.writeUintLE=T.prototype.writeUIntLE=function(be,Te,Le,We){if(be=+be,Te=Te>>>0,Le=Le>>>0,!We){const St=Math.pow(2,8*Le)-1;q(this,be,Te,Le,St,0)}let Ze=1,Qe=0;for(this[Te]=be&255;++Qe<Le&&(Ze*=256);)this[Te+Qe]=be/Ze&255;return Te+Le},T.prototype.writeUintBE=T.prototype.writeUIntBE=function(be,Te,Le,We){if(be=+be,Te=Te>>>0,Le=Le>>>0,!We){const St=Math.pow(2,8*Le)-1;q(this,be,Te,Le,St,0)}let Ze=Le-1,Qe=1;for(this[Te+Ze]=be&255;--Ze>=0&&(Qe*=256);)this[Te+Ze]=be/Qe&255;return Te+Le},T.prototype.writeUint8=T.prototype.writeUInt8=function(be,Te,Le){return be=+be,Te=Te>>>0,Le||q(this,be,Te,1,255,0),this[Te]=be&255,Te+1},T.prototype.writeUint16LE=T.prototype.writeUInt16LE=function(be,Te,Le){return be=+be,Te=Te>>>0,Le||q(this,be,Te,2,65535,0),this[Te]=be&255,this[Te+1]=be>>>8,Te+2},T.prototype.writeUint16BE=T.prototype.writeUInt16BE=function(be,Te,Le){return be=+be,Te=Te>>>0,Le||q(this,be,Te,2,65535,0),this[Te]=be>>>8,this[Te+1]=be&255,Te+2},T.prototype.writeUint32LE=T.prototype.writeUInt32LE=function(be,Te,Le){return be=+be,Te=Te>>>0,Le||q(this,be,Te,4,4294967295,0),this[Te+3]=be>>>24,this[Te+2]=be>>>16,this[Te+1]=be>>>8,this[Te]=be&255,Te+4},T.prototype.writeUint32BE=T.prototype.writeUInt32BE=function(be,Te,Le){return be=+be,Te=Te>>>0,Le||q(this,be,Te,4,4294967295,0),this[Te]=be>>>24,this[Te+1]=be>>>16,this[Te+2]=be>>>8,this[Te+3]=be&255,Te+4};function te(Ie,be,Te,Le,We){me(be,Le,We,Ie,Te,7);let Ze=Number(be&BigInt(4294967295));Ie[Te++]=Ze,Ze=Ze>>8,Ie[Te++]=Ze,Ze=Ze>>8,Ie[Te++]=Ze,Ze=Ze>>8,Ie[Te++]=Ze;let Qe=Number(be>>BigInt(32)&BigInt(4294967295));return Ie[Te++]=Qe,Qe=Qe>>8,Ie[Te++]=Qe,Qe=Qe>>8,Ie[Te++]=Qe,Qe=Qe>>8,Ie[Te++]=Qe,Te}function fe(Ie,be,Te,Le,We){me(be,Le,We,Ie,Te,7);let Ze=Number(be&BigInt(4294967295));Ie[Te+7]=Ze,Ze=Ze>>8,Ie[Te+6]=Ze,Ze=Ze>>8,Ie[Te+5]=Ze,Ze=Ze>>8,Ie[Te+4]=Ze;let Qe=Number(be>>BigInt(32)&BigInt(4294967295));return Ie[Te+3]=Qe,Qe=Qe>>8,Ie[Te+2]=Qe,Qe=Qe>>8,Ie[Te+1]=Qe,Qe=Qe>>8,Ie[Te]=Qe,Te+8}T.prototype.writeBigUInt64LE=st(function(be,Te=0){return te(this,be,Te,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeBigUInt64BE=st(function(be,Te=0){return fe(this,be,Te,BigInt(0),BigInt("0xffffffffffffffff"))}),T.prototype.writeIntLE=function(be,Te,Le,We){if(be=+be,Te=Te>>>0,!We){const pt=Math.pow(2,8*Le-1);q(this,be,Te,Le,pt-1,-pt)}let Ze=0,Qe=1,St=0;for(this[Te]=be&255;++Ze<Le&&(Qe*=256);)be<0&&St===0&&this[Te+Ze-1]!==0&&(St=1),this[Te+Ze]=(be/Qe>>0)-St&255;return Te+Le},T.prototype.writeIntBE=function(be,Te,Le,We){if(be=+be,Te=Te>>>0,!We){const pt=Math.pow(2,8*Le-1);q(this,be,Te,Le,pt-1,-pt)}let Ze=Le-1,Qe=1,St=0;for(this[Te+Ze]=be&255;--Ze>=0&&(Qe*=256);)be<0&&St===0&&this[Te+Ze+1]!==0&&(St=1),this[Te+Ze]=(be/Qe>>0)-St&255;return Te+Le},T.prototype.writeInt8=function(be,Te,Le){return be=+be,Te=Te>>>0,Le||q(this,be,Te,1,127,-128),be<0&&(be=255+be+1),this[Te]=be&255,Te+1},T.prototype.writeInt16LE=function(be,Te,Le){return be=+be,Te=Te>>>0,Le||q(this,be,Te,2,32767,-32768),this[Te]=be&255,this[Te+1]=be>>>8,Te+2},T.prototype.writeInt16BE=function(be,Te,Le){return be=+be,Te=Te>>>0,Le||q(this,be,Te,2,32767,-32768),this[Te]=be>>>8,this[Te+1]=be&255,Te+2},T.prototype.writeInt32LE=function(be,Te,Le){return be=+be,Te=Te>>>0,Le||q(this,be,Te,4,2147483647,-2147483648),this[Te]=be&255,this[Te+1]=be>>>8,this[Te+2]=be>>>16,this[Te+3]=be>>>24,Te+4},T.prototype.writeInt32BE=function(be,Te,Le){return be=+be,Te=Te>>>0,Le||q(this,be,Te,4,2147483647,-2147483648),be<0&&(be=4294967295+be+1),this[Te]=be>>>24,this[Te+1]=be>>>16,this[Te+2]=be>>>8,this[Te+3]=be&255,Te+4},T.prototype.writeBigInt64LE=st(function(be,Te=0){return te(this,be,Te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),T.prototype.writeBigInt64BE=st(function(be,Te=0){return fe(this,be,Te,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function he(Ie,be,Te,Le,We,Ze){if(Te+Le>Ie.length)throw new RangeError("Index out of range");if(Te<0)throw new RangeError("Index out of range")}function Ee(Ie,be,Te,Le,We){return be=+be,Te=Te>>>0,We||he(Ie,be,Te,4),_.write(Ie,be,Te,Le,23,4),Te+4}T.prototype.writeFloatLE=function(be,Te,Le){return Ee(this,be,Te,!0,Le)},T.prototype.writeFloatBE=function(be,Te,Le){return Ee(this,be,Te,!1,Le)};function we(Ie,be,Te,Le,We){return be=+be,Te=Te>>>0,We||he(Ie,be,Te,8),_.write(Ie,be,Te,Le,52,8),Te+8}T.prototype.writeDoubleLE=function(be,Te,Le){return we(this,be,Te,!0,Le)},T.prototype.writeDoubleBE=function(be,Te,Le){return we(this,be,Te,!1,Le)},T.prototype.copy=function(be,Te,Le,We){if(!T.isBuffer(be))throw new TypeError("argument should be a Buffer");if(Le||(Le=0),!We&&We!==0&&(We=this.length),Te>=be.length&&(Te=be.length),Te||(Te=0),We>0&&We<Le&&(We=Le),We===Le||be.length===0||this.length===0)return 0;if(Te<0)throw new RangeError("targetStart out of bounds");if(Le<0||Le>=this.length)throw new RangeError("Index out of range");if(We<0)throw new RangeError("sourceEnd out of bounds");We>this.length&&(We=this.length),be.length-Te<We-Le&&(We=be.length-Te+Le);const Ze=We-Le;return this===be&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Te,Le,We):Uint8Array.prototype.set.call(be,this.subarray(Le,We),Te),Ze},T.prototype.fill=function(be,Te,Le,We){if(typeof be=="string"){if(typeof Te=="string"?(We=Te,Te=0,Le=this.length):typeof Le=="string"&&(We=Le,Le=this.length),We!==void 0&&typeof We!="string")throw new TypeError("encoding must be a string");if(typeof We=="string"&&!T.isEncoding(We))throw new TypeError("Unknown encoding: "+We);if(be.length===1){const Qe=be.charCodeAt(0);(We==="utf8"&&Qe<128||We==="latin1")&&(be=Qe)}}else typeof be=="number"?be=be&255:typeof be=="boolean"&&(be=Number(be));if(Te<0||this.length<Te||this.length<Le)throw new RangeError("Out of range index");if(Le<=Te)return this;Te=Te>>>0,Le=Le===void 0?this.length:Le>>>0,be||(be=0);let Ze;if(typeof be=="number")for(Ze=Te;Ze<Le;++Ze)this[Ze]=be;else{const Qe=T.isBuffer(be)?be:T.from(be,We),St=Qe.length;if(St===0)throw new TypeError('The value "'+be+'" is invalid for argument "value"');for(Ze=0;Ze<Le-Te;++Ze)this[Ze+Te]=Qe[Ze%St]}return this};const xe={};function $e(Ie,be,Te){xe[Ie]=class extends Te{constructor(){super(),Object.defineProperty(this,"message",{value:be.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ie}]`,this.stack,delete this.name}get code(){return Ie}set code(We){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:We,writable:!0})}toString(){return`${this.name} [${Ie}]: ${this.message}`}}}$e("ERR_BUFFER_OUT_OF_BOUNDS",function(Ie){return Ie?`${Ie} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),$e("ERR_INVALID_ARG_TYPE",function(Ie,be){return`The "${Ie}" argument must be of type number. Received type ${typeof be}`},TypeError),$e("ERR_OUT_OF_RANGE",function(Ie,be,Te){let Le=`The value of "${Ie}" is out of range.`,We=Te;return Number.isInteger(Te)&&Math.abs(Te)>2**32?We=ge(String(Te)):typeof Te=="bigint"&&(We=String(Te),(Te>BigInt(2)**BigInt(32)||Te<-(BigInt(2)**BigInt(32)))&&(We=ge(We)),We+="n"),Le+=` It must be ${be}. Received ${We}`,Le},RangeError);function ge(Ie){let be="",Te=Ie.length;const Le=Ie[0]==="-"?1:0;for(;Te>=Le+4;Te-=3)be=`_${Ie.slice(Te-3,Te)}${be}`;return`${Ie.slice(0,Te)}${be}`}function Se(Ie,be,Te){Be(be,"offset"),(Ie[be]===void 0||Ie[be+Te]===void 0)&&ve(be,Ie.length-(Te+1))}function me(Ie,be,Te,Le,We,Ze){if(Ie>Te||Ie<be){const Qe=typeof be=="bigint"?"n":"";let St;throw Ze>3?be===0||be===BigInt(0)?St=`>= 0${Qe} and < 2${Qe} ** ${(Ze+1)*8}${Qe}`:St=`>= -(2${Qe} ** ${(Ze+1)*8-1}${Qe}) and < 2 ** ${(Ze+1)*8-1}${Qe}`:St=`>= ${be}${Qe} and <= ${Te}${Qe}`,new xe.ERR_OUT_OF_RANGE("value",St,Ie)}Se(Le,We,Ze)}function Be(Ie,be){if(typeof Ie!="number")throw new xe.ERR_INVALID_ARG_TYPE(be,"number",Ie)}function ve(Ie,be,Te){throw Math.floor(Ie)!==Ie?(Be(Ie,Te),new xe.ERR_OUT_OF_RANGE(Te||"offset","an integer",Ie)):be<0?new xe.ERR_BUFFER_OUT_OF_BOUNDS:new xe.ERR_OUT_OF_RANGE(Te||"offset",`>= ${Te?1:0} and <= ${be}`,Ie)}const Ae=/[^+/0-9A-Za-z-_]/g;function Ve(Ie){if(Ie=Ie.split("=")[0],Ie=Ie.trim().replace(Ae,""),Ie.length<2)return"";for(;Ie.length%4!==0;)Ie=Ie+"=";return Ie}function Pe(Ie,be){be=be||1/0;let Te;const Le=Ie.length;let We=null;const Ze=[];for(let Qe=0;Qe<Le;++Qe){if(Te=Ie.charCodeAt(Qe),Te>55295&&Te<57344){if(!We){if(Te>56319){(be-=3)>-1&&Ze.push(239,191,189);continue}else if(Qe+1===Le){(be-=3)>-1&&Ze.push(239,191,189);continue}We=Te;continue}if(Te<56320){(be-=3)>-1&&Ze.push(239,191,189),We=Te;continue}Te=(We-55296<<10|Te-56320)+65536}else We&&(be-=3)>-1&&Ze.push(239,191,189);if(We=null,Te<128){if((be-=1)<0)break;Ze.push(Te)}else if(Te<2048){if((be-=2)<0)break;Ze.push(Te>>6|192,Te&63|128)}else if(Te<65536){if((be-=3)<0)break;Ze.push(Te>>12|224,Te>>6&63|128,Te&63|128)}else if(Te<1114112){if((be-=4)<0)break;Ze.push(Te>>18|240,Te>>12&63|128,Te>>6&63|128,Te&63|128)}else throw new Error("Invalid code point")}return Ze}function Re(Ie){const be=[];for(let Te=0;Te<Ie.length;++Te)be.push(Ie.charCodeAt(Te)&255);return be}function Ne(Ie,be){let Te,Le,We;const Ze=[];for(let Qe=0;Qe<Ie.length&&!((be-=2)<0);++Qe)Te=Ie.charCodeAt(Qe),Le=Te>>8,We=Te%256,Ze.push(We),Ze.push(Le);return Ze}function qe(Ie){return n.toByteArray(Ve(Ie))}function Ke(Ie,be,Te,Le){let We;for(We=0;We<Le&&!(We+Te>=be.length||We>=Ie.length);++We)be[We+Te]=Ie[We];return We}function He(Ie,be){return Ie instanceof be||Ie!=null&&Ie.constructor!=null&&Ie.constructor.name!=null&&Ie.constructor.name===be.name}function Ge(Ie){return Ie!==Ie}const rt=function(){const Ie="0123456789abcdef",be=new Array(256);for(let Te=0;Te<16;++Te){const Le=Te*16;for(let We=0;We<16;++We)be[Le+We]=Ie[Te]+Ie[We]}return be}();function st(Ie){return typeof BigInt>"u"?Je:Ie}function Je(){throw new Error("BigInt not supported")}})(buffer$3);window.Buffer=buffer$3.Buffer;window.process=process$2;const global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function makeMap(t,n){const _=Object.create(null),x=t.split(",");for(let E=0;E<x.length;E++)_[x[E]]=!0;return n?E=>!!_[E.toLowerCase()]:E=>!!_[E]}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE$1=/^on[^a-z]/,isOn$1=t=>onRE$1.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend$1=Object.assign,remove=(t,n)=>{const _=t.indexOf(n);_>-1&&t.splice(_,1)},hasOwnProperty$5=Object.prototype.hasOwnProperty,hasOwn$3=(t,n)=>hasOwnProperty$5.call(t,n),isArray$9=Array.isArray,isMap$4=t=>toTypeString$2(t)==="[object Map]",isSet$4=t=>toTypeString$2(t)==="[object Set]",isFunction$4=t=>typeof t=="function",isString$6=t=>typeof t=="string",isSymbol$3=t=>typeof t=="symbol",isObject$5=t=>t!==null&&typeof t=="object",isPromise=t=>isObject$5(t)&&isFunction$4(t.then)&&isFunction$4(t.catch),objectToString$2=Object.prototype.toString,toTypeString$2=t=>objectToString$2.call(t),toRawType=t=>toTypeString$2(t).slice(8,-1),isPlainObject$3=t=>toTypeString$2(t)==="[object Object]",isIntegerKey=t=>isString$6(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const n=Object.create(null);return _=>n[_]||(n[_]=t(_))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(n,_)=>_?_.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize$1(t)}`:""),hasChanged=(t,n)=>!Object.is(t,n),invokeArrayFns=(t,n)=>{for(let _=0;_<t.length;_++)t[_](n)},def$t=(t,n,_)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value:_})},looseToNumber=t=>{const n=parseFloat(t);return isNaN(n)?t:n},toNumber=t=>{const n=isString$6(t)?Number(t):NaN;return isNaN(n)?t:n};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global$1<"u"?global$1:{});function normalizeStyle(t){if(isArray$9(t)){const n={};for(let _=0;_<t.length;_++){const x=t[_],E=isString$6(x)?parseStringStyle(x):normalizeStyle(x);if(E)for(const S in E)n[S]=E[S]}return n}else{if(isString$6(t))return t;if(isObject$5(t))return t}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const n={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(_=>{if(_){const x=_.split(propertyDelimiterRE);x.length>1&&(n[x[0].trim()]=x[1].trim())}}),n}function normalizeClass(t){let n="";if(isString$6(t))n=t;else if(isArray$9(t))for(let _=0;_<t.length;_++){const x=normalizeClass(t[_]);x&&(n+=x+" ")}else if(isObject$5(t))for(const _ in t)t[_]&&(n+=_+" ");return n.trim()}function normalizeProps(t){if(!t)return null;let{class:n,style:_}=t;return n&&!isString$6(n)&&(t.class=normalizeClass(n)),_&&(t.style=normalizeStyle(_)),t}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const toDisplayString$1=t=>isString$6(t)?t:t==null?"":isArray$9(t)||isObject$5(t)&&(t.toString===objectToString$2||!isFunction$4(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,n)=>n&&n.__v_isRef?replacer(t,n.value):isMap$4(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((_,[x,E])=>(_[`${x} =>`]=E,_),{})}:isSet$4(n)?{[`Set(${n.size})`]:[...n.values()]}:isObject$5(n)&&!isArray$9(n)&&!isPlainObject$3(n)?String(n):n;let activeEffectScope;class EffectScope{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!n&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const _=activeEffectScope;try{return activeEffectScope=this,n()}finally{activeEffectScope=_}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(n){if(this._active){let _,x;for(_=0,x=this.effects.length;_<x;_++)this.effects[_].stop();for(_=0,x=this.cleanups.length;_<x;_++)this.cleanups[_]();if(this.scopes)for(_=0,x=this.scopes.length;_<x;_++)this.scopes[_].stop(!0);if(!this.detached&&this.parent&&!n){const E=this.parent.scopes.pop();E&&E!==this&&(this.parent.scopes[this.index]=E,E.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(t){return new EffectScope(t)}function recordEffectScope(t,n=activeEffectScope){n&&n.active&&n.effects.push(t)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(t){activeEffectScope&&activeEffectScope.cleanups.push(t)}const createDep=t=>{const n=new Set(t);return n.w=0,n.n=0,n},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let n=0;n<t.length;n++)t[n].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:n}=t;if(n.length){let _=0;for(let x=0;x<n.length;x++){const E=n[x];wasTracked(E)&&!newTracked(E)?E.delete(t):n[_++]=E,E.w&=~trackOpBit,E.n&=~trackOpBit}n.length=_}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(n,_=null,x){this.fn=n,this.scheduler=_,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,x)}run(){if(!this.active)return this.fn();let n=activeEffect,_=shouldTrack;for(;n;){if(n===this)return;n=n.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=_,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:n}=t;if(n.length){for(let _=0;_<n.length;_++)n[_].delete(t);n.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,n,_){if(shouldTrack&&activeEffect){let x=targetMap.get(t);x||targetMap.set(t,x=new Map);let E=x.get(_);E||x.set(_,E=createDep()),trackEffects(E)}}function trackEffects(t,n){let _=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,_=!wasTracked(t)):_=!t.has(activeEffect),_&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger(t,n,_,x,E,S){const C=targetMap.get(t);if(!C)return;let T=[];if(n==="clear")T=[...C.values()];else if(_==="length"&&isArray$9(t)){const B=Number(x);C.forEach((A,I)=>{(I==="length"||I>=B)&&T.push(A)})}else switch(_!==void 0&&T.push(C.get(_)),n){case"add":isArray$9(t)?isIntegerKey(_)&&T.push(C.get("length")):(T.push(C.get(ITERATE_KEY)),isMap$4(t)&&T.push(C.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$9(t)||(T.push(C.get(ITERATE_KEY)),isMap$4(t)&&T.push(C.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$4(t)&&T.push(C.get(ITERATE_KEY));break}if(T.length===1)T[0]&&triggerEffects(T[0]);else{const B=[];for(const A of T)A&&B.push(...A);triggerEffects(createDep(B))}}function triggerEffects(t,n){const _=isArray$9(t)?t:[...t];for(const x of _)x.computed&&triggerEffect(x);for(const x of _)x.computed||triggerEffect(x)}function triggerEffect(t,n){(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function getDepFromReactive(t,n){var _;return(_=targetMap.get(t))==null?void 0:_.get(n)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol$3)),get$1$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(n=>{t[n]=function(..._){const x=toRaw(this);for(let S=0,C=this.length;S<C;S++)track(x,"get",S+"");const E=x[n](..._);return E===-1||E===!1?x[n](..._.map(toRaw)):E}}),["push","pop","shift","unshift","splice"].forEach(n=>{t[n]=function(..._){pauseTracking();const x=toRaw(this)[n].apply(this,_);return resetTracking(),x}}),t}function hasOwnProperty$4(t){const n=toRaw(this);return track(n,"has",t),n.hasOwnProperty(t)}function createGetter(t=!1,n=!1){return function(x,E,S){if(E==="__v_isReactive")return!t;if(E==="__v_isReadonly")return t;if(E==="__v_isShallow")return n;if(E==="__v_raw"&&S===(t?n?shallowReadonlyMap:readonlyMap:n?shallowReactiveMap:reactiveMap).get(x))return x;const C=isArray$9(x);if(!t){if(C&&hasOwn$3(arrayInstrumentations,E))return Reflect.get(arrayInstrumentations,E,S);if(E==="hasOwnProperty")return hasOwnProperty$4}const T=Reflect.get(x,E,S);return(isSymbol$3(E)?builtInSymbols.has(E):isNonTrackableKeys(E))||(t||track(x,"get",E),n)?T:isRef(T)?C&&isIntegerKey(E)?T:T.value:isObject$5(T)?t?readonly$3(T):reactive(T):T}}const set$1$1=createSetter(),shallowSet=createSetter(!0);function createSetter(t=!1){return function(_,x,E,S){let C=_[x];if(isReadonly(C)&&isRef(C)&&!isRef(E))return!1;if(!t&&(!isShallow(E)&&!isReadonly(E)&&(C=toRaw(C),E=toRaw(E)),!isArray$9(_)&&isRef(C)&&!isRef(E)))return C.value=E,!0;const T=isArray$9(_)&&isIntegerKey(x)?Number(x)<_.length:hasOwn$3(_,x),B=Reflect.set(_,x,E,S);return _===toRaw(S)&&(T?hasChanged(E,C)&&trigger(_,"set",x,E):trigger(_,"add",x,E)),B}}function deleteProperty(t,n){const _=hasOwn$3(t,n);t[n];const x=Reflect.deleteProperty(t,n);return x&&_&&trigger(t,"delete",n,void 0),x}function has$1$1(t,n){const _=Reflect.has(t,n);return(!isSymbol$3(n)||!builtInSymbols.has(n))&&track(t,"has",n),_}function ownKeys(t){return track(t,"iterate",isArray$9(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}const mutableHandlers={get:get$1$1,set:set$1$1,deleteProperty,has:has$1$1,ownKeys},readonlyHandlers={get:readonlyGet,set(t,n){return!0},deleteProperty(t,n){return!0}},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=t=>t,getProto$3=t=>Reflect.getPrototypeOf(t);function get$4(t,n,_=!1,x=!1){t=t.__v_raw;const E=toRaw(t),S=toRaw(n);_||(n!==S&&track(E,"get",n),track(E,"get",S));const{has:C}=getProto$3(E),T=x?toShallow:_?toReadonly:toReactive;if(C.call(E,n))return T(t.get(n));if(C.call(E,S))return T(t.get(S));t!==E&&t.get(n)}function has$4(t,n=!1){const _=this.__v_raw,x=toRaw(_),E=toRaw(t);return n||(t!==E&&track(x,"has",t),track(x,"has",E)),t===E?_.has(t):_.has(t)||_.has(E)}function size(t,n=!1){return t=t.__v_raw,!n&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add$1(t){t=toRaw(t);const n=toRaw(this);return getProto$3(n).has.call(n,t)||(n.add(t),trigger(n,"add",t,t)),this}function set$2(t,n){n=toRaw(n);const _=toRaw(this),{has:x,get:E}=getProto$3(_);let S=x.call(_,t);S||(t=toRaw(t),S=x.call(_,t));const C=E.call(_,t);return _.set(t,n),S?hasChanged(n,C)&&trigger(_,"set",t,n):trigger(_,"add",t,n),this}function deleteEntry(t){const n=toRaw(this),{has:_,get:x}=getProto$3(n);let E=_.call(n,t);E||(t=toRaw(t),E=_.call(n,t)),x&&x.call(n,t);const S=n.delete(t);return E&&trigger(n,"delete",t,void 0),S}function clear$2(){const t=toRaw(this),n=t.size!==0,_=t.clear();return n&&trigger(t,"clear",void 0,void 0),_}function createForEach(t,n){return function(x,E){const S=this,C=S.__v_raw,T=toRaw(C),B=n?toShallow:t?toReadonly:toReactive;return!t&&track(T,"iterate",ITERATE_KEY),C.forEach((A,I)=>x.call(E,B(A),B(I),S))}}function createIterableMethod(t,n,_){return function(...x){const E=this.__v_raw,S=toRaw(E),C=isMap$4(S),T=t==="entries"||t===Symbol.iterator&&C,B=t==="keys"&&C,A=E[t](...x),I=_?toShallow:n?toReadonly:toReactive;return!n&&track(S,"iterate",B?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:D,done:M}=A.next();return M?{value:D,done:M}:{value:T?[I(D[0]),I(D[1])]:I(D),done:M}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...n){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(S){return get$4(this,S)},get size(){return size(this)},has:has$4,add:add$1,set:set$2,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!1)},n={get(S){return get$4(this,S,!1,!0)},get size(){return size(this)},has:has$4,add:add$1,set:set$2,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!0)},_={get(S){return get$4(this,S,!0)},get size(){return size(this,!0)},has(S){return has$4.call(this,S,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},x={get(S){return get$4(this,S,!0,!0)},get size(){return size(this,!0)},has(S){return has$4.call(this,S,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(S=>{t[S]=createIterableMethod(S,!1,!1),_[S]=createIterableMethod(S,!0,!1),n[S]=createIterableMethod(S,!1,!0),x[S]=createIterableMethod(S,!0,!0)}),[t,_,n,x]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,n){const _=n?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(x,E,S)=>E==="__v_isReactive"?!t:E==="__v_isReadonly"?t:E==="__v_raw"?x:Reflect.get(hasOwn$3(_,E)&&E in x?_:x,E,S)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly$3(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,n,_,x,E){if(!isObject$5(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const S=E.get(t);if(S)return S;const C=getTargetType(t);if(C===0)return t;const T=new Proxy(t,C===2?x:_);return E.set(t,T),T}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const n=t&&t.__v_raw;return n?toRaw(n):t}function markRaw(t){return def$t(t,"__v_skip",!0),t}const toReactive=t=>isObject$5(t)?reactive(t):t,toReadonly=t=>isObject$5(t)?readonly$3(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,n){t=toRaw(t);const _=t.dep;_&&triggerEffects(_)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref$1(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,n){return isRef(t)?t:new RefImpl(t,n)}class RefImpl{constructor(n,_){this.__v_isShallow=_,this.dep=void 0,this.__v_isRef=!0,this._rawValue=_?n:toRaw(n),this._value=_?n:toReactive(n)}get value(){return trackRefValue(this),this._value}set value(n){const _=this.__v_isShallow||isShallow(n)||isReadonly(n);n=_?n:toRaw(n),hasChanged(n,this._rawValue)&&(this._rawValue=n,this._value=_?n:toReactive(n),triggerRefValue(this))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,n,_)=>unref(Reflect.get(t,n,_)),set:(t,n,_,x)=>{const E=t[n];return isRef(E)&&!isRef(_)?(E.value=_,!0):Reflect.set(t,n,_,x)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}function toRefs(t){const n=isArray$9(t)?new Array(t.length):{};for(const _ in t)n[_]=propertyToRef(t,_);return n}class ObjectRefImpl{constructor(n,_,x){this._object=n,this._key=_,this._defaultValue=x,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(t,n,_){return isRef(t)?t:isFunction$4(t)?new GetterRefImpl(t):isObject$5(t)&&arguments.length>1?propertyToRef(t,n,_):ref$1(t)}function propertyToRef(t,n,_){const x=t[n];return isRef(x)?x:new ObjectRefImpl(t,n,_)}class ComputedRefImpl{constructor(n,_,x,E){this._setter=_,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ReactiveEffect(n,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!E,this.__v_isReadonly=x}get value(){const n=toRaw(this);return trackRefValue(n),(n._dirty||!n._cacheable)&&(n._dirty=!1,n._value=n.effect.run()),n._value}set value(n){this._setter(n)}}function computed$1(t,n,_=!1){let x,E;const S=isFunction$4(t);return S?(x=t,E=NOOP):(x=t.get,E=t.set),new ComputedRefImpl(x,E,S||!E,_)}function warn$1(t,...n){}function callWithErrorHandling(t,n,_,x){let E;try{E=x?t(...x):t()}catch(S){handleError(S,n,_)}return E}function callWithAsyncErrorHandling(t,n,_,x){if(isFunction$4(t)){const S=callWithErrorHandling(t,n,_,x);return S&&isPromise(S)&&S.catch(C=>{handleError(C,n,_)}),S}const E=[];for(let S=0;S<t.length;S++)E.push(callWithAsyncErrorHandling(t[S],n,_,x));return E}function handleError(t,n,_,x=!0){const E=n?n.vnode:null;if(n){let S=n.parent;const C=n.proxy,T=_;for(;S;){const A=S.ec;if(A){for(let I=0;I<A.length;I++)if(A[I](t,C,T)===!1)return}S=S.parent}const B=n.appContext.config.errorHandler;if(B){callWithErrorHandling(B,null,10,[t,C,T]);return}}logError(t,_,E,x)}function logError(t,n,_,x=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue$1=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick$2(t){const n=currentFlushPromise||resolvedPromise;return t?n.then(this?t.bind(this):t):n}function findInsertionIndex(t){let n=flushIndex+1,_=queue$1.length;for(;n<_;){const x=n+_>>>1;getId(queue$1[x])<t?n=x+1:_=x}return n}function queueJob(t){(!queue$1.length||!queue$1.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue$1.push(t):queue$1.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const n=queue$1.indexOf(t);n>flushIndex&&queue$1.splice(n,1)}function queuePostFlushCb(t){isArray$9(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,n=isFlushing?flushIndex+1:0){for(;n<queue$1.length;n++){const _=queue$1[n];_&&_.pre&&(queue$1.splice(n,1),n--,_())}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const n=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...n);return}for(activePostFlushCbs=n,activePostFlushCbs.sort((_,x)=>getId(_)-getId(x)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,n)=>{const _=getId(t)-getId(n);if(_===0){if(t.pre&&!n.pre)return-1;if(n.pre&&!t.pre)return 1}return _};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue$1.sort(comparator);const n=NOOP;try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const _=queue$1[flushIndex];_&&_.active!==!1&&callWithErrorHandling(_,null,14)}}finally{flushIndex=0,queue$1.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue$1.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(t,n,..._){if(t.isUnmounted)return;const x=t.vnode.props||EMPTY_OBJ;let E=_;const S=n.startsWith("update:"),C=S&&n.slice(7);if(C&&C in x){const I=`${C==="modelValue"?"model":C}Modifiers`,{number:D,trim:M}=x[I]||EMPTY_OBJ;M&&(E=_.map(V=>isString$6(V)?V.trim():V)),D&&(E=_.map(looseToNumber))}let T,B=x[T=toHandlerKey(n)]||x[T=toHandlerKey(camelize(n))];!B&&S&&(B=x[T=toHandlerKey(hyphenate(n))]),B&&callWithAsyncErrorHandling(B,t,6,E);const A=x[T+"Once"];if(A){if(!t.emitted)t.emitted={};else if(t.emitted[T])return;t.emitted[T]=!0,callWithAsyncErrorHandling(A,t,6,E)}}function normalizeEmitsOptions(t,n,_=!1){const x=n.emitsCache,E=x.get(t);if(E!==void 0)return E;const S=t.emits;let C={},T=!1;if(!isFunction$4(t)){const B=A=>{const I=normalizeEmitsOptions(A,n,!0);I&&(T=!0,extend$1(C,I))};!_&&n.mixins.length&&n.mixins.forEach(B),t.extends&&B(t.extends),t.mixins&&t.mixins.forEach(B)}return!S&&!T?(isObject$5(t)&&x.set(t,null),null):(isArray$9(S)?S.forEach(B=>C[B]=null):extend$1(C,S),isObject$5(t)&&x.set(t,C),C)}function isEmitListener(t,n){return!t||!isOn$1(n)?!1:(n=n.slice(2).replace(/Once$/,""),hasOwn$3(t,n[0].toLowerCase()+n.slice(1))||hasOwn$3(t,hyphenate(n))||hasOwn$3(t,n))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const n=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,n}function withCtx(t,n=currentRenderingInstance,_){if(!n||t._n)return t;const x=(...E)=>{x._d&&setBlockTracking(-1);const S=setCurrentRenderingInstance(n);let C;try{C=t(...E)}finally{setCurrentRenderingInstance(S),x._d&&setBlockTracking(1)}return C};return x._n=!0,x._c=!0,x._d=!0,x}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:n,vnode:_,proxy:x,withProxy:E,props:S,propsOptions:[C],slots:T,attrs:B,emit:A,render:I,renderCache:D,data:M,setupState:V,ctx:L,inheritAttrs:F}=t;let j,U;const H=setCurrentRenderingInstance(t);try{if(_.shapeFlag&4){const Z=E||x;j=normalizeVNode(I.call(Z,Z,D,S,V,M,L)),U=B}else{const Z=n;j=normalizeVNode(Z.length>1?Z(S,{attrs:B,slots:T,emit:A}):Z(S,null)),U=n.props?B:getFunctionalFallthrough(B)}}catch(Z){blockStack.length=0,handleError(Z,t,1),j=createVNode(Comment)}let Y=j;if(U&&F!==!1){const Z=Object.keys(U),{shapeFlag:ne}=Y;Z.length&&ne&7&&(C&&Z.some(isModelListener)&&(U=filterModelListeners(U,C)),Y=cloneVNode(Y,U))}return _.dirs&&(Y=cloneVNode(Y),Y.dirs=Y.dirs?Y.dirs.concat(_.dirs):_.dirs),_.transition&&(Y.transition=_.transition),j=Y,setCurrentRenderingInstance(H),j}const getFunctionalFallthrough=t=>{let n;for(const _ in t)(_==="class"||_==="style"||isOn$1(_))&&((n||(n={}))[_]=t[_]);return n},filterModelListeners=(t,n)=>{const _={};for(const x in t)(!isModelListener(x)||!(x.slice(9)in n))&&(_[x]=t[x]);return _};function shouldUpdateComponent(t,n,_){const{props:x,children:E,component:S}=t,{props:C,children:T,patchFlag:B}=n,A=S.emitsOptions;if(n.dirs||n.transition)return!0;if(_&&B>=0){if(B&1024)return!0;if(B&16)return x?hasPropsChanged(x,C,A):!!C;if(B&8){const I=n.dynamicProps;for(let D=0;D<I.length;D++){const M=I[D];if(C[M]!==x[M]&&!isEmitListener(A,M))return!0}}}else return(E||T)&&(!T||!T.$stable)?!0:x===C?!1:x?C?hasPropsChanged(x,C,A):!0:!!C;return!1}function hasPropsChanged(t,n,_){const x=Object.keys(n);if(x.length!==Object.keys(t).length)return!0;for(let E=0;E<x.length;E++){const S=x[E];if(n[S]!==t[S]&&!isEmitListener(_,S))return!0}return!1}function updateHOCHostEl({vnode:t,parent:n},_){for(;n&&n.subTree===t;)(t=n.vnode).el=_,n=n.parent}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,n){n&&n.pendingBranch?isArray$9(t)?n.effects.push(...t):n.effects.push(t):queuePostFlushCb(t)}function watchEffect(t,n){return doWatch(t,null,n)}const INITIAL_WATCHER_VALUE={};function watch(t,n,_){return doWatch(t,n,_)}function doWatch(t,n,{immediate:_,deep:x,flush:E,onTrack:S,onTrigger:C}=EMPTY_OBJ){var T;const B=getCurrentScope()===((T=currentInstance)==null?void 0:T.scope)?currentInstance:null;let A,I=!1,D=!1;if(isRef(t)?(A=()=>t.value,I=isShallow(t)):isReactive(t)?(A=()=>t,x=!0):isArray$9(t)?(D=!0,I=t.some(Z=>isReactive(Z)||isShallow(Z)),A=()=>t.map(Z=>{if(isRef(Z))return Z.value;if(isReactive(Z))return traverse$2(Z);if(isFunction$4(Z))return callWithErrorHandling(Z,B,2)})):isFunction$4(t)?n?A=()=>callWithErrorHandling(t,B,2):A=()=>{if(!(B&&B.isUnmounted))return M&&M(),callWithAsyncErrorHandling(t,B,3,[V])}:A=NOOP,n&&x){const Z=A;A=()=>traverse$2(Z())}let M,V=Z=>{M=H.onStop=()=>{callWithErrorHandling(Z,B,4)}},L;if(isInSSRComponentSetup)if(V=NOOP,n?_&&callWithAsyncErrorHandling(n,B,3,[A(),D?[]:void 0,V]):A(),E==="sync"){const Z=useSSRContext();L=Z.__watcherHandles||(Z.__watcherHandles=[])}else return NOOP;let F=D?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const j=()=>{if(H.active)if(n){const Z=H.run();(x||I||(D?Z.some((ne,re)=>hasChanged(ne,F[re])):hasChanged(Z,F)))&&(M&&M(),callWithAsyncErrorHandling(n,B,3,[Z,F===INITIAL_WATCHER_VALUE?void 0:D&&F[0]===INITIAL_WATCHER_VALUE?[]:F,V]),F=Z)}else H.run()};j.allowRecurse=!!n;let U;E==="sync"?U=j:E==="post"?U=()=>queuePostRenderEffect(j,B&&B.suspense):(j.pre=!0,B&&(j.id=B.uid),U=()=>queueJob(j));const H=new ReactiveEffect(A,U);n?_?j():F=H.run():E==="post"?queuePostRenderEffect(H.run.bind(H),B&&B.suspense):H.run();const Y=()=>{H.stop(),B&&B.scope&&remove(B.scope.effects,H)};return L&&L.push(Y),Y}function instanceWatch(t,n,_){const x=this.proxy,E=isString$6(t)?t.includes(".")?createPathGetter(x,t):()=>x[t]:t.bind(x,x);let S;isFunction$4(n)?S=n:(S=n.handler,_=n);const C=currentInstance;setCurrentInstance(this);const T=doWatch(E,S.bind(x),_);return C?setCurrentInstance(C):unsetCurrentInstance(),T}function createPathGetter(t,n){const _=n.split(".");return()=>{let x=t;for(let E=0;E<_.length&&x;E++)x=x[_[E]];return x}}function traverse$2(t,n){if(!isObject$5(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),isRef(t))traverse$2(t.value,n);else if(isArray$9(t))for(let _=0;_<t.length;_++)traverse$2(t[_],n);else if(isSet$4(t)||isMap$4(t))t.forEach(_=>{traverse$2(_,n)});else if(isPlainObject$3(t))for(const _ in t)traverse$2(t[_],n);return t}function withDirectives(t,n){const _=currentRenderingInstance;if(_===null)return t;const x=getExposeProxy(_)||_.proxy,E=t.dirs||(t.dirs=[]);for(let S=0;S<n.length;S++){let[C,T,B,A=EMPTY_OBJ]=n[S];C&&(isFunction$4(C)&&(C={mounted:C,updated:C}),C.deep&&traverse$2(T),E.push({dir:C,instance:x,value:T,oldValue:void 0,arg:B,modifiers:A}))}return t}function invokeDirectiveHook(t,n,_,x){const E=t.dirs,S=n&&n.dirs;for(let C=0;C<E.length;C++){const T=E[C];S&&(T.oldValue=S[C].value);let B=T.dir[x];B&&(pauseTracking(),callWithAsyncErrorHandling(B,_,8,[t.el,T,t,n]),resetTracking())}}function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(t,{slots:n}){const _=getCurrentInstance$1(),x=useTransitionState();let E;return()=>{const S=n.default&&getTransitionRawChildren(n.default(),!0);if(!S||!S.length)return;let C=S[0];if(S.length>1){for(const F of S)if(F.type!==Comment){C=F;break}}const T=toRaw(t),{mode:B}=T;if(x.isLeaving)return emptyPlaceholder(C);const A=getKeepAliveChild(C);if(!A)return emptyPlaceholder(C);const I=resolveTransitionHooks(A,T,x,_);setTransitionHooks(A,I);const D=_.subTree,M=D&&getKeepAliveChild(D);let V=!1;const{getTransitionKey:L}=A.type;if(L){const F=L();E===void 0?E=F:F!==E&&(E=F,V=!0)}if(M&&M.type!==Comment&&(!isSameVNodeType(A,M)||V)){const F=resolveTransitionHooks(M,T,x,_);if(setTransitionHooks(M,F),B==="out-in")return x.isLeaving=!0,F.afterLeave=()=>{x.isLeaving=!1,_.update.active!==!1&&_.update()},emptyPlaceholder(C);B==="in-out"&&A.type!==Comment&&(F.delayLeave=(j,U,H)=>{const Y=getLeavingNodesForType(x,M);Y[String(M.key)]=M,j._leaveCb=()=>{U(),j._leaveCb=void 0,delete I.delayedLeave},I.delayedLeave=H})}return C}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,n){const{leavingVNodes:_}=t;let x=_.get(n.type);return x||(x=Object.create(null),_.set(n.type,x)),x}function resolveTransitionHooks(t,n,_,x){const{appear:E,mode:S,persisted:C=!1,onBeforeEnter:T,onEnter:B,onAfterEnter:A,onEnterCancelled:I,onBeforeLeave:D,onLeave:M,onAfterLeave:V,onLeaveCancelled:L,onBeforeAppear:F,onAppear:j,onAfterAppear:U,onAppearCancelled:H}=n,Y=String(t.key),Z=getLeavingNodesForType(_,t),ne=(ce,ue)=>{ce&&callWithAsyncErrorHandling(ce,x,9,ue)},re=(ce,ue)=>{const _e=ue[1];ne(ce,ue),isArray$9(ce)?ce.every(ye=>ye.length<=1)&&_e():ce.length<=1&&_e()},X={mode:S,persisted:C,beforeEnter(ce){let ue=T;if(!_.isMounted)if(E)ue=F||T;else return;ce._leaveCb&&ce._leaveCb(!0);const _e=Z[Y];_e&&isSameVNodeType(t,_e)&&_e.el._leaveCb&&_e.el._leaveCb(),ne(ue,[ce])},enter(ce){let ue=B,_e=A,ye=I;if(!_.isMounted)if(E)ue=j||B,_e=U||A,ye=H||I;else return;let ie=!1;const W=ce._enterCb=O=>{ie||(ie=!0,O?ne(ye,[ce]):ne(_e,[ce]),X.delayedLeave&&X.delayedLeave(),ce._enterCb=void 0)};ue?re(ue,[ce,W]):W()},leave(ce,ue){const _e=String(t.key);if(ce._enterCb&&ce._enterCb(!0),_.isUnmounting)return ue();ne(D,[ce]);let ye=!1;const ie=ce._leaveCb=W=>{ye||(ye=!0,ue(),W?ne(L,[ce]):ne(V,[ce]),ce._leaveCb=void 0,Z[_e]===t&&delete Z[_e])};Z[_e]=t,M?re(M,[ce,ie]):ie()},clone(ce){return resolveTransitionHooks(ce,n,_,x)}};return X}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,n){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,n):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}function getTransitionRawChildren(t,n=!1,_){let x=[],E=0;for(let S=0;S<t.length;S++){let C=t[S];const T=_==null?C.key:String(_)+String(C.key!=null?C.key:S);C.type===Fragment?(C.patchFlag&128&&E++,x=x.concat(getTransitionRawChildren(C.children,n,T))):(n||C.type!==Comment)&&x.push(T!=null?cloneVNode(C,{key:T}):C)}if(E>1)for(let S=0;S<x.length;S++)x[S].patchFlag=-2;return x}function defineComponent$1(t,n){return isFunction$4(t)?(()=>extend$1({name:t.name},n,{setup:t}))():t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,n){registerKeepAliveHook(t,"a",n)}function onDeactivated(t,n){registerKeepAliveHook(t,"da",n)}function registerKeepAliveHook(t,n,_=currentInstance){const x=t.__wdc||(t.__wdc=()=>{let E=_;for(;E;){if(E.isDeactivated)return;E=E.parent}return t()});if(injectHook(n,x,_),_){let E=_.parent;for(;E&&E.parent;)isKeepAlive(E.parent.vnode)&&injectToKeepAliveRoot(x,n,_,E),E=E.parent}}function injectToKeepAliveRoot(t,n,_,x){const E=injectHook(n,t,x,!0);onUnmounted(()=>{remove(x[n],E)},_)}function injectHook(t,n,_=currentInstance,x=!1){if(_){const E=_[t]||(_[t]=[]),S=n.__weh||(n.__weh=(...C)=>{if(_.isUnmounted)return;pauseTracking(),setCurrentInstance(_);const T=callWithAsyncErrorHandling(n,_,t,C);return unsetCurrentInstance(),resetTracking(),T});return x?E.unshift(S):E.push(S),S}}const createHook=t=>(n,_=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...x)=>n(...x),_),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,n=currentInstance){injectHook("ec",t,n)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(t,n){return resolveAsset(COMPONENTS,t,!0,n)||t}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(t){return isString$6(t)?resolveAsset(COMPONENTS,t,!1)||t:t||NULL_DYNAMIC_COMPONENT}function resolveDirective(t){return resolveAsset(DIRECTIVES,t)}function resolveAsset(t,n,_=!0,x=!1){const E=currentRenderingInstance||currentInstance;if(E){const S=E.type;if(t===COMPONENTS){const T=getComponentName(S,!1);if(T&&(T===n||T===camelize(n)||T===capitalize$1(camelize(n))))return S}const C=resolve$3(E[t]||S[t],n)||resolve$3(E.appContext[t],n);return!C&&x?S:C}}function resolve$3(t,n){return t&&(t[n]||t[camelize(n)]||t[capitalize$1(camelize(n))])}function renderList(t,n,_,x){let E;const S=_&&_[x];if(isArray$9(t)||isString$6(t)){E=new Array(t.length);for(let C=0,T=t.length;C<T;C++)E[C]=n(t[C],C,void 0,S&&S[C])}else if(typeof t=="number"){E=new Array(t);for(let C=0;C<t;C++)E[C]=n(C+1,C,void 0,S&&S[C])}else if(isObject$5(t))if(t[Symbol.iterator])E=Array.from(t,(C,T)=>n(C,T,void 0,S&&S[T]));else{const C=Object.keys(t);E=new Array(C.length);for(let T=0,B=C.length;T<B;T++){const A=C[T];E[T]=n(t[A],A,T,S&&S[T])}}else E=[];return _&&(_[x]=E),E}function createSlots(t,n){for(let _=0;_<n.length;_++){const x=n[_];if(isArray$9(x))for(let E=0;E<x.length;E++)t[x[E].name]=x[E].fn;else x&&(t[x.name]=x.key?(...E)=>{const S=x.fn(...E);return S&&(S.key=x.key),S}:x.fn)}return t}function renderSlot(t,n,_={},x,E){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return n!=="default"&&(_.name=n),createVNode("slot",_,x&&x());let S=t[n];S&&S._c&&(S._d=!1),openBlock();const C=S&&ensureValidVNode(S(_)),T=createBlock(Fragment,{key:_.key||C&&C.key||`_${n}`},C||(x?x():[]),C&&t._===1?64:-2);return!E&&T.scopeId&&(T.slotScopeIds=[T.scopeId+"-s"]),S&&S._c&&(S._d=!0),T}function ensureValidVNode(t){return t.some(n=>isVNode$1(n)?!(n.type===Comment||n.type===Fragment&&!ensureValidVNode(n.children)):!0)?t:null}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>queueJob(t.update)),$nextTick:t=>t.n||(t.n=nextTick$2.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,n)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn$3(t,n),PublicInstanceProxyHandlers={get({_:t},n){const{ctx:_,setupState:x,data:E,props:S,accessCache:C,type:T,appContext:B}=t;let A;if(n[0]!=="$"){const V=C[n];if(V!==void 0)switch(V){case 1:return x[n];case 2:return E[n];case 4:return _[n];case 3:return S[n]}else{if(hasSetupBinding(x,n))return C[n]=1,x[n];if(E!==EMPTY_OBJ&&hasOwn$3(E,n))return C[n]=2,E[n];if((A=t.propsOptions[0])&&hasOwn$3(A,n))return C[n]=3,S[n];if(_!==EMPTY_OBJ&&hasOwn$3(_,n))return C[n]=4,_[n];shouldCacheAccess&&(C[n]=0)}}const I=publicPropertiesMap[n];let D,M;if(I)return n==="$attrs"&&track(t,"get",n),I(t);if((D=T.__cssModules)&&(D=D[n]))return D;if(_!==EMPTY_OBJ&&hasOwn$3(_,n))return C[n]=4,_[n];if(M=B.config.globalProperties,hasOwn$3(M,n))return M[n]},set({_:t},n,_){const{data:x,setupState:E,ctx:S}=t;return hasSetupBinding(E,n)?(E[n]=_,!0):x!==EMPTY_OBJ&&hasOwn$3(x,n)?(x[n]=_,!0):hasOwn$3(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(S[n]=_,!0)},has({_:{data:t,setupState:n,accessCache:_,ctx:x,appContext:E,propsOptions:S}},C){let T;return!!_[C]||t!==EMPTY_OBJ&&hasOwn$3(t,C)||hasSetupBinding(n,C)||(T=S[0])&&hasOwn$3(T,C)||hasOwn$3(x,C)||hasOwn$3(publicPropertiesMap,C)||hasOwn$3(E.config.globalProperties,C)},defineProperty(t,n,_){return _.get!=null?t._.accessCache[n]=0:hasOwn$3(_,"value")&&this.set(t,n,_.value,null),Reflect.defineProperty(t,n,_)}};function normalizePropsOrEmits(t){return isArray$9(t)?t.reduce((n,_)=>(n[_]=null,n),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const n=resolveMergedOptions(t),_=t.proxy,x=t.ctx;shouldCacheAccess=!1,n.beforeCreate&&callHook$1(n.beforeCreate,t,"bc");const{data:E,computed:S,methods:C,watch:T,provide:B,inject:A,created:I,beforeMount:D,mounted:M,beforeUpdate:V,updated:L,activated:F,deactivated:j,beforeDestroy:U,beforeUnmount:H,destroyed:Y,unmounted:Z,render:ne,renderTracked:re,renderTriggered:X,errorCaptured:ce,serverPrefetch:ue,expose:_e,inheritAttrs:ye,components:ie,directives:W,filters:O}=n;if(A&&resolveInjections(A,x,null),C)for(const ee in C){const ae=C[ee];isFunction$4(ae)&&(x[ee]=ae.bind(_))}if(E){const ee=E.call(_,_);isObject$5(ee)&&(t.data=reactive(ee))}if(shouldCacheAccess=!0,S)for(const ee in S){const ae=S[ee],oe=isFunction$4(ae)?ae.bind(_,_):isFunction$4(ae.get)?ae.get.bind(_,_):NOOP,se=!isFunction$4(ae)&&isFunction$4(ae.set)?ae.set.bind(_):NOOP,G=computed({get:oe,set:se});Object.defineProperty(x,ee,{enumerable:!0,configurable:!0,get:()=>G.value,set:q=>G.value=q})}if(T)for(const ee in T)createWatcher(T[ee],x,_,ee);if(B){const ee=isFunction$4(B)?B.call(_):B;Reflect.ownKeys(ee).forEach(ae=>{provide(ae,ee[ae])})}I&&callHook$1(I,t,"c");function J(ee,ae){isArray$9(ae)?ae.forEach(oe=>ee(oe.bind(_))):ae&&ee(ae.bind(_))}if(J(onBeforeMount,D),J(onMounted,M),J(onBeforeUpdate,V),J(onUpdated,L),J(onActivated,F),J(onDeactivated,j),J(onErrorCaptured,ce),J(onRenderTracked,re),J(onRenderTriggered,X),J(onBeforeUnmount,H),J(onUnmounted,Z),J(onServerPrefetch,ue),isArray$9(_e))if(_e.length){const ee=t.exposed||(t.exposed={});_e.forEach(ae=>{Object.defineProperty(ee,ae,{get:()=>_[ae],set:oe=>_[ae]=oe})})}else t.exposed||(t.exposed={});ne&&t.render===NOOP&&(t.render=ne),ye!=null&&(t.inheritAttrs=ye),ie&&(t.components=ie),W&&(t.directives=W)}function resolveInjections(t,n,_=NOOP){isArray$9(t)&&(t=normalizeInject(t));for(const x in t){const E=t[x];let S;isObject$5(E)?"default"in E?S=inject$1(E.from||x,E.default,!0):S=inject$1(E.from||x):S=inject$1(E),isRef(S)?Object.defineProperty(n,x,{enumerable:!0,configurable:!0,get:()=>S.value,set:C=>S.value=C}):n[x]=S}}function callHook$1(t,n,_){callWithAsyncErrorHandling(isArray$9(t)?t.map(x=>x.bind(n.proxy)):t.bind(n.proxy),n,_)}function createWatcher(t,n,_,x){const E=x.includes(".")?createPathGetter(_,x):()=>_[x];if(isString$6(t)){const S=n[t];isFunction$4(S)&&watch(E,S)}else if(isFunction$4(t))watch(E,t.bind(_));else if(isObject$5(t))if(isArray$9(t))t.forEach(S=>createWatcher(S,n,_,x));else{const S=isFunction$4(t.handler)?t.handler.bind(_):n[t.handler];isFunction$4(S)&&watch(E,S,t)}}function resolveMergedOptions(t){const n=t.type,{mixins:_,extends:x}=n,{mixins:E,optionsCache:S,config:{optionMergeStrategies:C}}=t.appContext,T=S.get(n);let B;return T?B=T:!E.length&&!_&&!x?B=n:(B={},E.length&&E.forEach(A=>mergeOptions$1(B,A,C,!0)),mergeOptions$1(B,n,C)),isObject$5(n)&&S.set(n,B),B}function mergeOptions$1(t,n,_,x=!1){const{mixins:E,extends:S}=n;S&&mergeOptions$1(t,S,_,!0),E&&E.forEach(C=>mergeOptions$1(t,C,_,!0));for(const C in n)if(!(x&&C==="expose")){const T=internalOptionMergeStrats[C]||_&&_[C];t[C]=T?T(t[C],n[C]):n[C]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,n){return n?t?function(){return extend$1(isFunction$4(t)?t.call(this,this):t,isFunction$4(n)?n.call(this,this):n)}:n:t}function mergeInject(t,n){return mergeObjectOptions(normalizeInject(t),normalizeInject(n))}function normalizeInject(t){if(isArray$9(t)){const n={};for(let _=0;_<t.length;_++)n[t[_]]=t[_];return n}return t}function mergeAsArray(t,n){return t?[...new Set([].concat(t,n))]:n}function mergeObjectOptions(t,n){return t?extend$1(Object.create(null),t,n):n}function mergeEmitsOrPropsOptions(t,n){return t?isArray$9(t)&&isArray$9(n)?[...new Set([...t,...n])]:extend$1(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(n??{})):n}function mergeWatchOptions(t,n){if(!t)return n;if(!n)return t;const _=extend$1(Object.create(null),t);for(const x in n)_[x]=mergeAsArray(t[x],n[x]);return _}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,n){return function(x,E=null){isFunction$4(x)||(x=extend$1({},x)),E!=null&&!isObject$5(E)&&(E=null);const S=createAppContext(),C=new Set;let T=!1;const B=S.app={_uid:uid$1++,_component:x,_props:E,_container:null,_context:S,_instance:null,version:version$m,get config(){return S.config},set config(A){},use(A,...I){return C.has(A)||(A&&isFunction$4(A.install)?(C.add(A),A.install(B,...I)):isFunction$4(A)&&(C.add(A),A(B,...I))),B},mixin(A){return S.mixins.includes(A)||S.mixins.push(A),B},component(A,I){return I?(S.components[A]=I,B):S.components[A]},directive(A,I){return I?(S.directives[A]=I,B):S.directives[A]},mount(A,I,D){if(!T){const M=createVNode(x,E);return M.appContext=S,I&&n?n(M,A):t(M,A,D),T=!0,B._container=A,A.__vue_app__=B,getExposeProxy(M.component)||M.component.proxy}},unmount(){T&&(t(null,B._container),delete B._container.__vue_app__)},provide(A,I){return S.provides[A]=I,B},runWithContext(A){currentApp=B;try{return A()}finally{currentApp=null}}};return B}}let currentApp=null;function provide(t,n){if(currentInstance){let _=currentInstance.provides;const x=currentInstance.parent&&currentInstance.parent.provides;x===_&&(_=currentInstance.provides=Object.create(x)),_[t]=n}}function inject$1(t,n,_=!1){const x=currentInstance||currentRenderingInstance;if(x||currentApp){const E=x?x.parent==null?x.vnode.appContext&&x.vnode.appContext.provides:x.parent.provides:currentApp._context.provides;if(E&&t in E)return E[t];if(arguments.length>1)return _&&isFunction$4(n)?n.call(x&&x.proxy):n}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}function initProps(t,n,_,x=!1){const E={},S={};def$t(S,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,n,E,S);for(const C in t.propsOptions[0])C in E||(E[C]=void 0);_?t.props=x?E:shallowReactive(E):t.type.props?t.props=E:t.props=S,t.attrs=S}function updateProps(t,n,_,x){const{props:E,attrs:S,vnode:{patchFlag:C}}=t,T=toRaw(E),[B]=t.propsOptions;let A=!1;if((x||C>0)&&!(C&16)){if(C&8){const I=t.vnode.dynamicProps;for(let D=0;D<I.length;D++){let M=I[D];if(isEmitListener(t.emitsOptions,M))continue;const V=n[M];if(B)if(hasOwn$3(S,M))V!==S[M]&&(S[M]=V,A=!0);else{const L=camelize(M);E[L]=resolvePropValue(B,T,L,V,t,!1)}else V!==S[M]&&(S[M]=V,A=!0)}}}else{setFullProps(t,n,E,S)&&(A=!0);let I;for(const D in T)(!n||!hasOwn$3(n,D)&&((I=hyphenate(D))===D||!hasOwn$3(n,I)))&&(B?_&&(_[D]!==void 0||_[I]!==void 0)&&(E[D]=resolvePropValue(B,T,D,void 0,t,!0)):delete E[D]);if(S!==T)for(const D in S)(!n||!hasOwn$3(n,D))&&(delete S[D],A=!0)}A&&trigger(t,"set","$attrs")}function setFullProps(t,n,_,x){const[E,S]=t.propsOptions;let C=!1,T;if(n)for(let B in n){if(isReservedProp(B))continue;const A=n[B];let I;E&&hasOwn$3(E,I=camelize(B))?!S||!S.includes(I)?_[I]=A:(T||(T={}))[I]=A:isEmitListener(t.emitsOptions,B)||(!(B in x)||A!==x[B])&&(x[B]=A,C=!0)}if(S){const B=toRaw(_),A=T||EMPTY_OBJ;for(let I=0;I<S.length;I++){const D=S[I];_[D]=resolvePropValue(E,B,D,A[D],t,!hasOwn$3(A,D))}}return C}function resolvePropValue(t,n,_,x,E,S){const C=t[_];if(C!=null){const T=hasOwn$3(C,"default");if(T&&x===void 0){const B=C.default;if(C.type!==Function&&!C.skipFactory&&isFunction$4(B)){const{propsDefaults:A}=E;_ in A?x=A[_]:(setCurrentInstance(E),x=A[_]=B.call(null,n),unsetCurrentInstance())}else x=B}C[0]&&(S&&!T?x=!1:C[1]&&(x===""||x===hyphenate(_))&&(x=!0))}return x}function normalizePropsOptions(t,n,_=!1){const x=n.propsCache,E=x.get(t);if(E)return E;const S=t.props,C={},T=[];let B=!1;if(!isFunction$4(t)){const I=D=>{B=!0;const[M,V]=normalizePropsOptions(D,n,!0);extend$1(C,M),V&&T.push(...V)};!_&&n.mixins.length&&n.mixins.forEach(I),t.extends&&I(t.extends),t.mixins&&t.mixins.forEach(I)}if(!S&&!B)return isObject$5(t)&&x.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$9(S))for(let I=0;I<S.length;I++){const D=camelize(S[I]);validatePropName(D)&&(C[D]=EMPTY_OBJ)}else if(S)for(const I in S){const D=camelize(I);if(validatePropName(D)){const M=S[I],V=C[D]=isArray$9(M)||isFunction$4(M)?{type:M}:extend$1({},M);if(V){const L=getTypeIndex(Boolean,V.type),F=getTypeIndex(String,V.type);V[0]=L>-1,V[1]=F<0||L<F,(L>-1||hasOwn$3(V,"default"))&&T.push(D)}}}const A=[C,T];return isObject$5(t)&&x.set(t,A),A}function validatePropName(t){return t[0]!=="$"}function getType(t){const n=t&&t.toString().match(/^\s*(function|class) (\w+)/);return n?n[2]:t===null?"null":""}function isSameType(t,n){return getType(t)===getType(n)}function getTypeIndex(t,n){return isArray$9(n)?n.findIndex(_=>isSameType(_,t)):isFunction$4(n)&&isSameType(n,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray$9(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot$1=(t,n,_)=>{if(n._n)return n;const x=withCtx((...E)=>normalizeSlotValue(n(...E)),_);return x._c=!1,x},normalizeObjectSlots=(t,n,_)=>{const x=t._ctx;for(const E in t){if(isInternalKey(E))continue;const S=t[E];if(isFunction$4(S))n[E]=normalizeSlot$1(E,S,x);else if(S!=null){const C=normalizeSlotValue(S);n[E]=()=>C}}},normalizeVNodeSlots=(t,n)=>{const _=normalizeSlotValue(n);t.slots.default=()=>_},initSlots=(t,n)=>{if(t.vnode.shapeFlag&32){const _=n._;_?(t.slots=toRaw(n),def$t(n,"_",_)):normalizeObjectSlots(n,t.slots={})}else t.slots={},n&&normalizeVNodeSlots(t,n);def$t(t.slots,InternalObjectKey,1)},updateSlots=(t,n,_)=>{const{vnode:x,slots:E}=t;let S=!0,C=EMPTY_OBJ;if(x.shapeFlag&32){const T=n._;T?_&&T===1?S=!1:(extend$1(E,n),!_&&T===1&&delete E._):(S=!n.$stable,normalizeObjectSlots(n,E)),C=n}else n&&(normalizeVNodeSlots(t,n),C={default:1});if(S)for(const T in E)!isInternalKey(T)&&!(T in C)&&delete E[T]};function setRef(t,n,_,x,E=!1){if(isArray$9(t)){t.forEach((M,V)=>setRef(M,n&&(isArray$9(n)?n[V]:n),_,x,E));return}if(isAsyncWrapper(x)&&!E)return;const S=x.shapeFlag&4?getExposeProxy(x.component)||x.component.proxy:x.el,C=E?null:S,{i:T,r:B}=t,A=n&&n.r,I=T.refs===EMPTY_OBJ?T.refs={}:T.refs,D=T.setupState;if(A!=null&&A!==B&&(isString$6(A)?(I[A]=null,hasOwn$3(D,A)&&(D[A]=null)):isRef(A)&&(A.value=null)),isFunction$4(B))callWithErrorHandling(B,T,12,[C,I]);else{const M=isString$6(B),V=isRef(B);if(M||V){const L=()=>{if(t.f){const F=M?hasOwn$3(D,B)?D[B]:I[B]:B.value;E?isArray$9(F)&&remove(F,S):isArray$9(F)?F.includes(S)||F.push(S):M?(I[B]=[S],hasOwn$3(D,B)&&(D[B]=I[B])):(B.value=[S],t.k&&(I[t.k]=B.value))}else M?(I[B]=C,hasOwn$3(D,B)&&(D[B]=C)):V&&(B.value=C,t.k&&(I[t.k]=C))};C?(L.id=-1,queuePostRenderEffect(L,_)):L()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,n){const _=getGlobalThis$1();_.__VUE__=!0;const{insert:x,remove:E,patchProp:S,createElement:C,createText:T,createComment:B,setText:A,setElementText:I,parentNode:D,nextSibling:M,setScopeId:V=NOOP,insertStaticContent:L}=t,F=(me,Be,ve,Ae=null,Ve=null,Pe=null,Re=!1,Ne=null,qe=!!Be.dynamicChildren)=>{if(me===Be)return;me&&!isSameVNodeType(me,Be)&&(Ae=we(me),q(me,Ve,Pe,!0),me=null),Be.patchFlag===-2&&(qe=!1,Be.dynamicChildren=null);const{type:Ke,ref:He,shapeFlag:Ge}=Be;switch(Ke){case Text:j(me,Be,ve,Ae);break;case Comment:U(me,Be,ve,Ae);break;case Static:me==null&&H(Be,ve,Ae,Re);break;case Fragment:ie(me,Be,ve,Ae,Ve,Pe,Re,Ne,qe);break;default:Ge&1?ne(me,Be,ve,Ae,Ve,Pe,Re,Ne,qe):Ge&6?W(me,Be,ve,Ae,Ve,Pe,Re,Ne,qe):(Ge&64||Ge&128)&&Ke.process(me,Be,ve,Ae,Ve,Pe,Re,Ne,qe,$e)}He!=null&&Ve&&setRef(He,me&&me.ref,Pe,Be||me,!Be)},j=(me,Be,ve,Ae)=>{if(me==null)x(Be.el=T(Be.children),ve,Ae);else{const Ve=Be.el=me.el;Be.children!==me.children&&A(Ve,Be.children)}},U=(me,Be,ve,Ae)=>{me==null?x(Be.el=B(Be.children||""),ve,Ae):Be.el=me.el},H=(me,Be,ve,Ae)=>{[me.el,me.anchor]=L(me.children,Be,ve,Ae,me.el,me.anchor)},Y=({el:me,anchor:Be},ve,Ae)=>{let Ve;for(;me&&me!==Be;)Ve=M(me),x(me,ve,Ae),me=Ve;x(Be,ve,Ae)},Z=({el:me,anchor:Be})=>{let ve;for(;me&&me!==Be;)ve=M(me),E(me),me=ve;E(Be)},ne=(me,Be,ve,Ae,Ve,Pe,Re,Ne,qe)=>{Re=Re||Be.type==="svg",me==null?re(Be,ve,Ae,Ve,Pe,Re,Ne,qe):ue(me,Be,Ve,Pe,Re,Ne,qe)},re=(me,Be,ve,Ae,Ve,Pe,Re,Ne)=>{let qe,Ke;const{type:He,props:Ge,shapeFlag:rt,transition:st,dirs:Je}=me;if(qe=me.el=C(me.type,Pe,Ge&&Ge.is,Ge),rt&8?I(qe,me.children):rt&16&&ce(me.children,qe,null,Ae,Ve,Pe&&He!=="foreignObject",Re,Ne),Je&&invokeDirectiveHook(me,null,Ae,"created"),X(qe,me,me.scopeId,Re,Ae),Ge){for(const be in Ge)be!=="value"&&!isReservedProp(be)&&S(qe,be,null,Ge[be],Pe,me.children,Ae,Ve,Ee);"value"in Ge&&S(qe,"value",null,Ge.value),(Ke=Ge.onVnodeBeforeMount)&&invokeVNodeHook(Ke,Ae,me)}Je&&invokeDirectiveHook(me,null,Ae,"beforeMount");const Ie=(!Ve||Ve&&!Ve.pendingBranch)&&st&&!st.persisted;Ie&&st.beforeEnter(qe),x(qe,Be,ve),((Ke=Ge&&Ge.onVnodeMounted)||Ie||Je)&&queuePostRenderEffect(()=>{Ke&&invokeVNodeHook(Ke,Ae,me),Ie&&st.enter(qe),Je&&invokeDirectiveHook(me,null,Ae,"mounted")},Ve)},X=(me,Be,ve,Ae,Ve)=>{if(ve&&V(me,ve),Ae)for(let Pe=0;Pe<Ae.length;Pe++)V(me,Ae[Pe]);if(Ve){let Pe=Ve.subTree;if(Be===Pe){const Re=Ve.vnode;X(me,Re,Re.scopeId,Re.slotScopeIds,Ve.parent)}}},ce=(me,Be,ve,Ae,Ve,Pe,Re,Ne,qe=0)=>{for(let Ke=qe;Ke<me.length;Ke++){const He=me[Ke]=Ne?cloneIfMounted(me[Ke]):normalizeVNode(me[Ke]);F(null,He,Be,ve,Ae,Ve,Pe,Re,Ne)}},ue=(me,Be,ve,Ae,Ve,Pe,Re)=>{const Ne=Be.el=me.el;let{patchFlag:qe,dynamicChildren:Ke,dirs:He}=Be;qe|=me.patchFlag&16;const Ge=me.props||EMPTY_OBJ,rt=Be.props||EMPTY_OBJ;let st;ve&&toggleRecurse(ve,!1),(st=rt.onVnodeBeforeUpdate)&&invokeVNodeHook(st,ve,Be,me),He&&invokeDirectiveHook(Be,me,ve,"beforeUpdate"),ve&&toggleRecurse(ve,!0);const Je=Ve&&Be.type!=="foreignObject";if(Ke?_e(me.dynamicChildren,Ke,Ne,ve,Ae,Je,Pe):Re||ae(me,Be,Ne,null,ve,Ae,Je,Pe,!1),qe>0){if(qe&16)ye(Ne,Be,Ge,rt,ve,Ae,Ve);else if(qe&2&&Ge.class!==rt.class&&S(Ne,"class",null,rt.class,Ve),qe&4&&S(Ne,"style",Ge.style,rt.style,Ve),qe&8){const Ie=Be.dynamicProps;for(let be=0;be<Ie.length;be++){const Te=Ie[be],Le=Ge[Te],We=rt[Te];(We!==Le||Te==="value")&&S(Ne,Te,Le,We,Ve,me.children,ve,Ae,Ee)}}qe&1&&me.children!==Be.children&&I(Ne,Be.children)}else!Re&&Ke==null&&ye(Ne,Be,Ge,rt,ve,Ae,Ve);((st=rt.onVnodeUpdated)||He)&&queuePostRenderEffect(()=>{st&&invokeVNodeHook(st,ve,Be,me),He&&invokeDirectiveHook(Be,me,ve,"updated")},Ae)},_e=(me,Be,ve,Ae,Ve,Pe,Re)=>{for(let Ne=0;Ne<Be.length;Ne++){const qe=me[Ne],Ke=Be[Ne],He=qe.el&&(qe.type===Fragment||!isSameVNodeType(qe,Ke)||qe.shapeFlag&70)?D(qe.el):ve;F(qe,Ke,He,null,Ae,Ve,Pe,Re,!0)}},ye=(me,Be,ve,Ae,Ve,Pe,Re)=>{if(ve!==Ae){if(ve!==EMPTY_OBJ)for(const Ne in ve)!isReservedProp(Ne)&&!(Ne in Ae)&&S(me,Ne,ve[Ne],null,Re,Be.children,Ve,Pe,Ee);for(const Ne in Ae){if(isReservedProp(Ne))continue;const qe=Ae[Ne],Ke=ve[Ne];qe!==Ke&&Ne!=="value"&&S(me,Ne,Ke,qe,Re,Be.children,Ve,Pe,Ee)}"value"in Ae&&S(me,"value",ve.value,Ae.value)}},ie=(me,Be,ve,Ae,Ve,Pe,Re,Ne,qe)=>{const Ke=Be.el=me?me.el:T(""),He=Be.anchor=me?me.anchor:T("");let{patchFlag:Ge,dynamicChildren:rt,slotScopeIds:st}=Be;st&&(Ne=Ne?Ne.concat(st):st),me==null?(x(Ke,ve,Ae),x(He,ve,Ae),ce(Be.children,ve,He,Ve,Pe,Re,Ne,qe)):Ge>0&&Ge&64&&rt&&me.dynamicChildren?(_e(me.dynamicChildren,rt,ve,Ve,Pe,Re,Ne),(Be.key!=null||Ve&&Be===Ve.subTree)&&traverseStaticChildren(me,Be,!0)):ae(me,Be,ve,He,Ve,Pe,Re,Ne,qe)},W=(me,Be,ve,Ae,Ve,Pe,Re,Ne,qe)=>{Be.slotScopeIds=Ne,me==null?Be.shapeFlag&512?Ve.ctx.activate(Be,ve,Ae,Re,qe):O(Be,ve,Ae,Ve,Pe,Re,qe):z(me,Be,qe)},O=(me,Be,ve,Ae,Ve,Pe,Re)=>{const Ne=me.component=createComponentInstance(me,Ae,Ve);if(isKeepAlive(me)&&(Ne.ctx.renderer=$e),setupComponent(Ne),Ne.asyncDep){if(Ve&&Ve.registerDep(Ne,J),!me.el){const qe=Ne.subTree=createVNode(Comment);U(null,qe,Be,ve)}return}J(Ne,me,Be,ve,Ve,Pe,Re)},z=(me,Be,ve)=>{const Ae=Be.component=me.component;if(shouldUpdateComponent(me,Be,ve))if(Ae.asyncDep&&!Ae.asyncResolved){ee(Ae,Be,ve);return}else Ae.next=Be,invalidateJob(Ae.update),Ae.update();else Be.el=me.el,Ae.vnode=Be},J=(me,Be,ve,Ae,Ve,Pe,Re)=>{const Ne=()=>{if(me.isMounted){let{next:He,bu:Ge,u:rt,parent:st,vnode:Je}=me,Ie=He,be;toggleRecurse(me,!1),He?(He.el=Je.el,ee(me,He,Re)):He=Je,Ge&&invokeArrayFns(Ge),(be=He.props&&He.props.onVnodeBeforeUpdate)&&invokeVNodeHook(be,st,He,Je),toggleRecurse(me,!0);const Te=renderComponentRoot(me),Le=me.subTree;me.subTree=Te,F(Le,Te,D(Le.el),we(Le),me,Ve,Pe),He.el=Te.el,Ie===null&&updateHOCHostEl(me,Te.el),rt&&queuePostRenderEffect(rt,Ve),(be=He.props&&He.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(be,st,He,Je),Ve)}else{let He;const{el:Ge,props:rt}=Be,{bm:st,m:Je,parent:Ie}=me,be=isAsyncWrapper(Be);if(toggleRecurse(me,!1),st&&invokeArrayFns(st),!be&&(He=rt&&rt.onVnodeBeforeMount)&&invokeVNodeHook(He,Ie,Be),toggleRecurse(me,!0),Ge&&Se){const Te=()=>{me.subTree=renderComponentRoot(me),Se(Ge,me.subTree,me,Ve,null)};be?Be.type.__asyncLoader().then(()=>!me.isUnmounted&&Te()):Te()}else{const Te=me.subTree=renderComponentRoot(me);F(null,Te,ve,Ae,me,Ve,Pe),Be.el=Te.el}if(Je&&queuePostRenderEffect(Je,Ve),!be&&(He=rt&&rt.onVnodeMounted)){const Te=Be;queuePostRenderEffect(()=>invokeVNodeHook(He,Ie,Te),Ve)}(Be.shapeFlag&256||Ie&&isAsyncWrapper(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&me.a&&queuePostRenderEffect(me.a,Ve),me.isMounted=!0,Be=ve=Ae=null}},qe=me.effect=new ReactiveEffect(Ne,()=>queueJob(Ke),me.scope),Ke=me.update=()=>qe.run();Ke.id=me.uid,toggleRecurse(me,!0),Ke()},ee=(me,Be,ve)=>{Be.component=me;const Ae=me.vnode.props;me.vnode=Be,me.next=null,updateProps(me,Be.props,Ae,ve),updateSlots(me,Be.children,ve),pauseTracking(),flushPreFlushCbs(),resetTracking()},ae=(me,Be,ve,Ae,Ve,Pe,Re,Ne,qe=!1)=>{const Ke=me&&me.children,He=me?me.shapeFlag:0,Ge=Be.children,{patchFlag:rt,shapeFlag:st}=Be;if(rt>0){if(rt&128){se(Ke,Ge,ve,Ae,Ve,Pe,Re,Ne,qe);return}else if(rt&256){oe(Ke,Ge,ve,Ae,Ve,Pe,Re,Ne,qe);return}}st&8?(He&16&&Ee(Ke,Ve,Pe),Ge!==Ke&&I(ve,Ge)):He&16?st&16?se(Ke,Ge,ve,Ae,Ve,Pe,Re,Ne,qe):Ee(Ke,Ve,Pe,!0):(He&8&&I(ve,""),st&16&&ce(Ge,ve,Ae,Ve,Pe,Re,Ne,qe))},oe=(me,Be,ve,Ae,Ve,Pe,Re,Ne,qe)=>{me=me||EMPTY_ARR,Be=Be||EMPTY_ARR;const Ke=me.length,He=Be.length,Ge=Math.min(Ke,He);let rt;for(rt=0;rt<Ge;rt++){const st=Be[rt]=qe?cloneIfMounted(Be[rt]):normalizeVNode(Be[rt]);F(me[rt],st,ve,null,Ve,Pe,Re,Ne,qe)}Ke>He?Ee(me,Ve,Pe,!0,!1,Ge):ce(Be,ve,Ae,Ve,Pe,Re,Ne,qe,Ge)},se=(me,Be,ve,Ae,Ve,Pe,Re,Ne,qe)=>{let Ke=0;const He=Be.length;let Ge=me.length-1,rt=He-1;for(;Ke<=Ge&&Ke<=rt;){const st=me[Ke],Je=Be[Ke]=qe?cloneIfMounted(Be[Ke]):normalizeVNode(Be[Ke]);if(isSameVNodeType(st,Je))F(st,Je,ve,null,Ve,Pe,Re,Ne,qe);else break;Ke++}for(;Ke<=Ge&&Ke<=rt;){const st=me[Ge],Je=Be[rt]=qe?cloneIfMounted(Be[rt]):normalizeVNode(Be[rt]);if(isSameVNodeType(st,Je))F(st,Je,ve,null,Ve,Pe,Re,Ne,qe);else break;Ge--,rt--}if(Ke>Ge){if(Ke<=rt){const st=rt+1,Je=st<He?Be[st].el:Ae;for(;Ke<=rt;)F(null,Be[Ke]=qe?cloneIfMounted(Be[Ke]):normalizeVNode(Be[Ke]),ve,Je,Ve,Pe,Re,Ne,qe),Ke++}}else if(Ke>rt)for(;Ke<=Ge;)q(me[Ke],Ve,Pe,!0),Ke++;else{const st=Ke,Je=Ke,Ie=new Map;for(Ke=Je;Ke<=rt;Ke++){const pt=Be[Ke]=qe?cloneIfMounted(Be[Ke]):normalizeVNode(Be[Ke]);pt.key!=null&&Ie.set(pt.key,Ke)}let be,Te=0;const Le=rt-Je+1;let We=!1,Ze=0;const Qe=new Array(Le);for(Ke=0;Ke<Le;Ke++)Qe[Ke]=0;for(Ke=st;Ke<=Ge;Ke++){const pt=me[Ke];if(Te>=Le){q(pt,Ve,Pe,!0);continue}let ft;if(pt.key!=null)ft=Ie.get(pt.key);else for(be=Je;be<=rt;be++)if(Qe[be-Je]===0&&isSameVNodeType(pt,Be[be])){ft=be;break}ft===void 0?q(pt,Ve,Pe,!0):(Qe[ft-Je]=Ke+1,ft>=Ze?Ze=ft:We=!0,F(pt,Be[ft],ve,null,Ve,Pe,Re,Ne,qe),Te++)}const St=We?getSequence(Qe):EMPTY_ARR;for(be=St.length-1,Ke=Le-1;Ke>=0;Ke--){const pt=Je+Ke,ft=Be[pt],Ut=pt+1<He?Be[pt+1].el:Ae;Qe[Ke]===0?F(null,ft,ve,Ut,Ve,Pe,Re,Ne,qe):We&&(be<0||Ke!==St[be]?G(ft,ve,Ut,2):be--)}}},G=(me,Be,ve,Ae,Ve=null)=>{const{el:Pe,type:Re,transition:Ne,children:qe,shapeFlag:Ke}=me;if(Ke&6){G(me.component.subTree,Be,ve,Ae);return}if(Ke&128){me.suspense.move(Be,ve,Ae);return}if(Ke&64){Re.move(me,Be,ve,$e);return}if(Re===Fragment){x(Pe,Be,ve);for(let Ge=0;Ge<qe.length;Ge++)G(qe[Ge],Be,ve,Ae);x(me.anchor,Be,ve);return}if(Re===Static){Y(me,Be,ve);return}if(Ae!==2&&Ke&1&&Ne)if(Ae===0)Ne.beforeEnter(Pe),x(Pe,Be,ve),queuePostRenderEffect(()=>Ne.enter(Pe),Ve);else{const{leave:Ge,delayLeave:rt,afterLeave:st}=Ne,Je=()=>x(Pe,Be,ve),Ie=()=>{Ge(Pe,()=>{Je(),st&&st()})};rt?rt(Pe,Je,Ie):Ie()}else x(Pe,Be,ve)},q=(me,Be,ve,Ae=!1,Ve=!1)=>{const{type:Pe,props:Re,ref:Ne,children:qe,dynamicChildren:Ke,shapeFlag:He,patchFlag:Ge,dirs:rt}=me;if(Ne!=null&&setRef(Ne,null,ve,me,!0),He&256){Be.ctx.deactivate(me);return}const st=He&1&&rt,Je=!isAsyncWrapper(me);let Ie;if(Je&&(Ie=Re&&Re.onVnodeBeforeUnmount)&&invokeVNodeHook(Ie,Be,me),He&6)he(me.component,ve,Ae);else{if(He&128){me.suspense.unmount(ve,Ae);return}st&&invokeDirectiveHook(me,null,Be,"beforeUnmount"),He&64?me.type.remove(me,Be,ve,Ve,$e,Ae):Ke&&(Pe!==Fragment||Ge>0&&Ge&64)?Ee(Ke,Be,ve,!1,!0):(Pe===Fragment&&Ge&384||!Ve&&He&16)&&Ee(qe,Be,ve),Ae&&te(me)}(Je&&(Ie=Re&&Re.onVnodeUnmounted)||st)&&queuePostRenderEffect(()=>{Ie&&invokeVNodeHook(Ie,Be,me),st&&invokeDirectiveHook(me,null,Be,"unmounted")},ve)},te=me=>{const{type:Be,el:ve,anchor:Ae,transition:Ve}=me;if(Be===Fragment){fe(ve,Ae);return}if(Be===Static){Z(me);return}const Pe=()=>{E(ve),Ve&&!Ve.persisted&&Ve.afterLeave&&Ve.afterLeave()};if(me.shapeFlag&1&&Ve&&!Ve.persisted){const{leave:Re,delayLeave:Ne}=Ve,qe=()=>Re(ve,Pe);Ne?Ne(me.el,Pe,qe):qe()}else Pe()},fe=(me,Be)=>{let ve;for(;me!==Be;)ve=M(me),E(me),me=ve;E(Be)},he=(me,Be,ve)=>{const{bum:Ae,scope:Ve,update:Pe,subTree:Re,um:Ne}=me;Ae&&invokeArrayFns(Ae),Ve.stop(),Pe&&(Pe.active=!1,q(Re,me,Be,ve)),Ne&&queuePostRenderEffect(Ne,Be),queuePostRenderEffect(()=>{me.isUnmounted=!0},Be),Be&&Be.pendingBranch&&!Be.isUnmounted&&me.asyncDep&&!me.asyncResolved&&me.suspenseId===Be.pendingId&&(Be.deps--,Be.deps===0&&Be.resolve())},Ee=(me,Be,ve,Ae=!1,Ve=!1,Pe=0)=>{for(let Re=Pe;Re<me.length;Re++)q(me[Re],Be,ve,Ae,Ve)},we=me=>me.shapeFlag&6?we(me.component.subTree):me.shapeFlag&128?me.suspense.next():M(me.anchor||me.el),xe=(me,Be,ve)=>{me==null?Be._vnode&&q(Be._vnode,null,null,!0):F(Be._vnode||null,me,Be,null,null,null,ve),flushPreFlushCbs(),flushPostFlushCbs(),Be._vnode=me},$e={p:F,um:q,m:G,r:te,mt:O,mc:ce,pc:ae,pbc:_e,n:we,o:t};let ge,Se;return n&&([ge,Se]=n($e)),{render:xe,hydrate:ge,createApp:createAppAPI(xe,ge)}}function toggleRecurse({effect:t,update:n},_){t.allowRecurse=n.allowRecurse=_}function traverseStaticChildren(t,n,_=!1){const x=t.children,E=n.children;if(isArray$9(x)&&isArray$9(E))for(let S=0;S<x.length;S++){const C=x[S];let T=E[S];T.shapeFlag&1&&!T.dynamicChildren&&((T.patchFlag<=0||T.patchFlag===32)&&(T=E[S]=cloneIfMounted(E[S]),T.el=C.el),_||traverseStaticChildren(C,T)),T.type===Text&&(T.el=C.el)}}function getSequence(t){const n=t.slice(),_=[0];let x,E,S,C,T;const B=t.length;for(x=0;x<B;x++){const A=t[x];if(A!==0){if(E=_[_.length-1],t[E]<A){n[x]=E,_.push(x);continue}for(S=0,C=_.length-1;S<C;)T=S+C>>1,t[_[T]]<A?S=T+1:C=T;A<t[_[S]]&&(S>0&&(n[x]=_[S-1]),_[S]=x)}}for(S=_.length,C=_[S-1];S-- >0;)_[S]=C,C=n[C];return _}const isTeleport=t=>t.__isTeleport,isTeleportDisabled=t=>t&&(t.disabled||t.disabled===""),isTargetSVG=t=>typeof SVGElement<"u"&&t instanceof SVGElement,resolveTarget=(t,n)=>{const _=t&&t.to;return isString$6(_)?n?n(_):null:_},TeleportImpl={__isTeleport:!0,process(t,n,_,x,E,S,C,T,B,A){const{mc:I,pc:D,pbc:M,o:{insert:V,querySelector:L,createText:F,createComment:j}}=A,U=isTeleportDisabled(n.props);let{shapeFlag:H,children:Y,dynamicChildren:Z}=n;if(t==null){const ne=n.el=F(""),re=n.anchor=F("");V(ne,_,x),V(re,_,x);const X=n.target=resolveTarget(n.props,L),ce=n.targetAnchor=F("");X&&(V(ce,X),C=C||isTargetSVG(X));const ue=(_e,ye)=>{H&16&&I(Y,_e,ye,E,S,C,T,B)};U?ue(_,re):X&&ue(X,ce)}else{n.el=t.el;const ne=n.anchor=t.anchor,re=n.target=t.target,X=n.targetAnchor=t.targetAnchor,ce=isTeleportDisabled(t.props),ue=ce?_:re,_e=ce?ne:X;if(C=C||isTargetSVG(re),Z?(M(t.dynamicChildren,Z,ue,E,S,C,T),traverseStaticChildren(t,n,!0)):B||D(t,n,ue,_e,E,S,C,T,!1),U)ce||moveTeleport(n,_,ne,A,1);else if((n.props&&n.props.to)!==(t.props&&t.props.to)){const ye=n.target=resolveTarget(n.props,L);ye&&moveTeleport(n,ye,null,A,0)}else ce&&moveTeleport(n,re,X,A,1)}updateCssVars(n)},remove(t,n,_,x,{um:E,o:{remove:S}},C){const{shapeFlag:T,children:B,anchor:A,targetAnchor:I,target:D,props:M}=t;if(D&&S(I),(C||!isTeleportDisabled(M))&&(S(A),T&16))for(let V=0;V<B.length;V++){const L=B[V];E(L,n,_,!0,!!L.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(t,n,_,{o:{insert:x},m:E},S=2){S===0&&x(t.targetAnchor,n,_);const{el:C,anchor:T,shapeFlag:B,children:A,props:I}=t,D=S===2;if(D&&x(C,n,_),(!D||isTeleportDisabled(I))&&B&16)for(let M=0;M<A.length;M++)E(A[M],n,_,2);D&&x(T,n,_)}function hydrateTeleport(t,n,_,x,E,S,{o:{nextSibling:C,parentNode:T,querySelector:B}},A){const I=n.target=resolveTarget(n.props,B);if(I){const D=I._lpa||I.firstChild;if(n.shapeFlag&16)if(isTeleportDisabled(n.props))n.anchor=A(C(t),n,T(t),_,x,E,S),n.targetAnchor=D;else{n.anchor=C(t);let M=D;for(;M;)if(M=C(M),M&&M.nodeType===8&&M.data==="teleport anchor"){n.targetAnchor=M,I._lpa=n.targetAnchor&&C(n.targetAnchor);break}A(D,n,I,_,x,E,S)}updateCssVars(n)}return n.anchor&&C(n.anchor)}const Teleport=TeleportImpl;function updateCssVars(t){const n=t.ctx;if(n&&n.ut){let _=t.children[0].el;for(;_!==t.targetAnchor;)_.nodeType===1&&_.setAttribute("data-v-owner",n.uid),_=_.nextSibling;n.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,n,_,x,E,S){return setupBlock(createBaseVNode(t,n,_,x,E,S,!0))}function createBlock(t,n,_,x,E){return setupBlock(createVNode(t,n,_,x,E,!0))}function isVNode$1(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,n){return t.type===n.type&&t.key===n.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:n,ref_for:_})=>(typeof t=="number"&&(t=""+t),t!=null?isString$6(t)||isRef(t)||isFunction$4(t)?{i:currentRenderingInstance,r:t,k:n,f:!!_}:t:null);function createBaseVNode(t,n=null,_=null,x=0,E=null,S=t===Fragment?0:1,C=!1,T=!1){const B={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&normalizeKey(n),ref:n&&normalizeRef(n),scopeId:currentScopeId,slotScopeIds:null,children:_,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:S,patchFlag:x,dynamicProps:E,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return T?(normalizeChildren(B,_),S&128&&t.normalize(B)):_&&(B.shapeFlag|=isString$6(_)?8:16),isBlockTreeEnabled>0&&!C&&currentBlock&&(B.patchFlag>0||S&6)&&B.patchFlag!==32&&currentBlock.push(B),B}const createVNode=_createVNode;function _createVNode(t,n=null,_=null,x=0,E=null,S=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode$1(t)){const T=cloneVNode(t,n,!0);return _&&normalizeChildren(T,_),isBlockTreeEnabled>0&&!S&&currentBlock&&(T.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=T:currentBlock.push(T)),T.patchFlag|=-2,T}if(isClassComponent(t)&&(t=t.__vccOpts),n){n=guardReactiveProps(n);let{class:T,style:B}=n;T&&!isString$6(T)&&(n.class=normalizeClass(T)),isObject$5(B)&&(isProxy(B)&&!isArray$9(B)&&(B=extend$1({},B)),n.style=normalizeStyle(B))}const C=isString$6(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject$5(t)?4:isFunction$4(t)?2:0;return createBaseVNode(t,n,_,x,E,C,S,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend$1({},t):t:null}function cloneVNode(t,n,_=!1){const{props:x,ref:E,patchFlag:S,children:C}=t,T=n?mergeProps(x||{},n):x;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:T,key:T&&normalizeKey(T),ref:n&&n.ref?_&&E?isArray$9(E)?E.concat(normalizeRef(n)):[E,normalizeRef(n)]:normalizeRef(n):E,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:C,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==Fragment?S===-1?16:S|16:S,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function createTextVNode(t=" ",n=0){return createVNode(Text,null,t,n)}function createCommentVNode(t="",n=!1){return n?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$9(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,n){let _=0;const{shapeFlag:x}=t;if(n==null)n=null;else if(isArray$9(n))_=16;else if(typeof n=="object")if(x&65){const E=n.default;E&&(E._c&&(E._d=!1),normalizeChildren(t,E()),E._c&&(E._d=!0));return}else{_=32;const E=n._;!E&&!(InternalObjectKey in n)?n._ctx=currentRenderingInstance:E===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else isFunction$4(n)?(n={default:n,_ctx:currentRenderingInstance},_=32):(n=String(n),x&64?(_=16,n=[createTextVNode(n)]):_=8);t.children=n,t.shapeFlag|=_}function mergeProps(...t){const n={};for(let _=0;_<t.length;_++){const x=t[_];for(const E in x)if(E==="class")n.class!==x.class&&(n.class=normalizeClass([n.class,x.class]));else if(E==="style")n.style=normalizeStyle([n.style,x.style]);else if(isOn$1(E)){const S=n[E],C=x[E];C&&S!==C&&!(isArray$9(S)&&S.includes(C))&&(n[E]=S?[].concat(S,C):C)}else E!==""&&(n[E]=x[E])}return n}function invokeVNodeHook(t,n,_,x=null){callWithAsyncErrorHandling(t,n,7,[_,x])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,n,_){const x=t.type,E=(n?n.appContext:t.appContext)||emptyAppContext,S={uid:uid++,vnode:t,type:x,parent:n,appContext:E,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(E.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(x,E),emitsOptions:normalizeEmitsOptions(x,E),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:x.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:_,suspenseId:_?_.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return S.ctx={_:S},S.root=n?n.root:S,S.emit=emit$1.bind(null,S),t.ce&&t.ce(S),S}let currentInstance=null;const getCurrentInstance$1=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,globalCurrentInstanceSetters,settersKey="__VUE_INSTANCE_SETTERS__";(globalCurrentInstanceSetters=getGlobalThis$1()[settersKey])||(globalCurrentInstanceSetters=getGlobalThis$1()[settersKey]=[]),globalCurrentInstanceSetters.push(t=>currentInstance=t),internalSetCurrentInstance=t=>{globalCurrentInstanceSetters.length>1?globalCurrentInstanceSetters.forEach(n=>n(t)):globalCurrentInstanceSetters[0](t)};const setCurrentInstance=t=>{internalSetCurrentInstance(t),t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,n=!1){isInSSRComponentSetup=n;const{props:_,children:x}=t.vnode,E=isStatefulComponent(t);initProps(t,_,E,n),initSlots(t,x);const S=E?setupStatefulComponent(t,n):void 0;return isInSSRComponentSetup=!1,S}function setupStatefulComponent(t,n){const _=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:x}=_;if(x){const E=t.setupContext=x.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const S=callWithErrorHandling(x,t,0,[t.props,E]);if(resetTracking(),unsetCurrentInstance(),isPromise(S)){if(S.then(unsetCurrentInstance,unsetCurrentInstance),n)return S.then(C=>{handleSetupResult(t,C,n)}).catch(C=>{handleError(C,t,0)});t.asyncDep=S}else handleSetupResult(t,S,n)}else finishComponentSetup(t,n)}function handleSetupResult(t,n,_){isFunction$4(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:isObject$5(n)&&(t.setupState=proxyRefs(n)),finishComponentSetup(t,_)}let compile$1;function finishComponentSetup(t,n,_){const x=t.type;if(!t.render){if(!n&&compile$1&&!x.render){const E=x.template||resolveMergedOptions(t).template;if(E){const{isCustomElement:S,compilerOptions:C}=t.appContext.config,{delimiters:T,compilerOptions:B}=x,A=extend$1(extend$1({isCustomElement:S,delimiters:T},C),B);x.render=compile$1(E,A)}}t.render=x.render||NOOP}setCurrentInstance(t),pauseTracking(),applyOptions(t),resetTracking(),unsetCurrentInstance()}function getAttrsProxy(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(n,_){return track(t,"get","$attrs"),n[_]}}))}function createSetupContext(t){const n=_=>{t.exposed=_||{}};return{get attrs(){return getAttrsProxy(t)},slots:t.slots,emit:t.emit,expose:n}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(n,_){if(_ in n)return n[_];if(_ in publicPropertiesMap)return publicPropertiesMap[_](t)},has(n,_){return _ in n||_ in publicPropertiesMap}}))}function getComponentName(t,n=!0){return isFunction$4(t)?t.displayName||t.name:t.name||n&&t.__name}function isClassComponent(t){return isFunction$4(t)&&"__vccOpts"in t}const computed=(t,n)=>computed$1(t,n,isInSSRComponentSetup);function h$1(t,n,_){const x=arguments.length;return x===2?isObject$5(n)&&!isArray$9(n)?isVNode$1(n)?createVNode(t,null,[n]):createVNode(t,n):createVNode(t,null,n):(x>3?_=Array.prototype.slice.call(arguments,2):x===3&&isVNode$1(_)&&(_=[_]),createVNode(t,n,_))}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject$1(ssrContextKey),version$m="3.3.4",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,n,_)=>{n.insertBefore(t,_||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,_,x)=>{const E=n?doc.createElementNS(svgNS,t):doc.createElement(t,_?{is:_}:void 0);return t==="select"&&x&&x.multiple!=null&&E.setAttribute("multiple",x.multiple),E},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,_,x,E,S){const C=_?_.previousSibling:n.lastChild;if(E&&(E===S||E.nextSibling))for(;n.insertBefore(E.cloneNode(!0),_),!(E===S||!(E=E.nextSibling)););else{templateContainer.innerHTML=x?`<svg>${t}</svg>`:t;const T=templateContainer.content;if(x){const B=T.firstChild;for(;B.firstChild;)T.appendChild(B.firstChild);T.removeChild(B)}n.insertBefore(T,_)}return[C?C.nextSibling:n.firstChild,_?_.previousSibling:n.lastChild]}};function patchClass(t,n,_){const x=t._vtc;x&&(n=(n?[n,...x]:[...x]).join(" ")),n==null?t.removeAttribute("class"):_?t.setAttribute("class",n):t.className=n}function patchStyle(t,n,_){const x=t.style,E=isString$6(_);if(_&&!E){if(n&&!isString$6(n))for(const S in n)_[S]==null&&setStyle(x,S,"");for(const S in _)setStyle(x,S,_[S])}else{const S=x.display;E?n!==_&&(x.cssText=_):n&&t.removeAttribute("style"),"_vod"in t&&(x.display=S)}}const importantRE=/\s*!important$/;function setStyle(t,n,_){if(isArray$9(_))_.forEach(x=>setStyle(t,n,x));else if(_==null&&(_=""),n.startsWith("--"))t.setProperty(n,_);else{const x=autoPrefix(t,n);importantRE.test(_)?t.setProperty(hyphenate(x),_.replace(importantRE,""),"important"):t[x]=_}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,n){const _=prefixCache[n];if(_)return _;let x=camelize(n);if(x!=="filter"&&x in t)return prefixCache[n]=x;x=capitalize$1(x);for(let E=0;E<prefixes.length;E++){const S=prefixes[E]+x;if(S in t)return prefixCache[n]=S}return n}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,n,_,x,E){if(x&&n.startsWith("xlink:"))_==null?t.removeAttributeNS(xlinkNS,n.slice(6,n.length)):t.setAttributeNS(xlinkNS,n,_);else{const S=isSpecialBooleanAttr(n);_==null||S&&!includeBooleanAttr(_)?t.removeAttribute(n):t.setAttribute(n,S?"":_)}}function patchDOMProp(t,n,_,x,E,S,C){if(n==="innerHTML"||n==="textContent"){x&&C(x,E,S),t[n]=_??"";return}const T=t.tagName;if(n==="value"&&T!=="PROGRESS"&&!T.includes("-")){t._value=_;const A=T==="OPTION"?t.getAttribute("value"):t.value,I=_??"";A!==I&&(t.value=I),_==null&&t.removeAttribute(n);return}let B=!1;if(_===""||_==null){const A=typeof t[n];A==="boolean"?_=includeBooleanAttr(_):_==null&&A==="string"?(_="",B=!0):A==="number"&&(_=0,B=!0)}try{t[n]=_}catch{}B&&t.removeAttribute(n)}function addEventListener(t,n,_,x){t.addEventListener(n,_,x)}function removeEventListener(t,n,_,x){t.removeEventListener(n,_,x)}function patchEvent(t,n,_,x,E=null){const S=t._vei||(t._vei={}),C=S[n];if(x&&C)C.value=x;else{const[T,B]=parseName(n);if(x){const A=S[n]=createInvoker(x,E);addEventListener(t,T,A,B)}else C&&(removeEventListener(t,T,C,B),S[n]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let n;if(optionsModifierRE.test(t)){n={};let x;for(;x=t.match(optionsModifierRE);)t=t.slice(0,t.length-x[0].length),n[x[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),n]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,n){const _=x=>{if(!x._vts)x._vts=Date.now();else if(x._vts<=_.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(x,_.value),n,5,[x])};return _.value=t,_.attached=getNow(),_}function patchStopImmediatePropagation(t,n){if(isArray$9(n)){const _=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{_.call(t),t._stopped=!0},n.map(x=>E=>!E._stopped&&x&&x(E))}else return n}const nativeOnRE=/^on[a-z]/,patchProp=(t,n,_,x,E=!1,S,C,T,B)=>{n==="class"?patchClass(t,x,E):n==="style"?patchStyle(t,_,x):isOn$1(n)?isModelListener(n)||patchEvent(t,n,_,x,C):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):shouldSetAsProp(t,n,x,E))?patchDOMProp(t,n,x,S,C,T,B):(n==="true-value"?t._trueValue=x:n==="false-value"&&(t._falseValue=x),patchAttr(t,n,x,E))};function shouldSetAsProp(t,n,_,x){return x?!!(n==="innerHTML"||n==="textContent"||n in t&&nativeOnRE.test(n)&&isFunction$4(_)):n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(n)&&isString$6(_)?!1:n in t}const TRANSITION="transition",ANIMATION="animation",Transition=(t,{slots:n})=>h$1(BaseTransition,resolveTransitionProps(t),n);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),callHook=(t,n=[])=>{isArray$9(t)?t.forEach(_=>_(...n)):t&&t(...n)},hasExplicitCallback=t=>t?isArray$9(t)?t.some(n=>n.length>1):t.length>1:!1;function resolveTransitionProps(t){const n={};for(const ie in t)ie in DOMTransitionPropsValidators||(n[ie]=t[ie]);if(t.css===!1)return n;const{name:_="v",type:x,duration:E,enterFromClass:S=`${_}-enter-from`,enterActiveClass:C=`${_}-enter-active`,enterToClass:T=`${_}-enter-to`,appearFromClass:B=S,appearActiveClass:A=C,appearToClass:I=T,leaveFromClass:D=`${_}-leave-from`,leaveActiveClass:M=`${_}-leave-active`,leaveToClass:V=`${_}-leave-to`}=t,L=normalizeDuration(E),F=L&&L[0],j=L&&L[1],{onBeforeEnter:U,onEnter:H,onEnterCancelled:Y,onLeave:Z,onLeaveCancelled:ne,onBeforeAppear:re=U,onAppear:X=H,onAppearCancelled:ce=Y}=n,ue=(ie,W,O)=>{removeTransitionClass(ie,W?I:T),removeTransitionClass(ie,W?A:C),O&&O()},_e=(ie,W)=>{ie._isLeaving=!1,removeTransitionClass(ie,D),removeTransitionClass(ie,V),removeTransitionClass(ie,M),W&&W()},ye=ie=>(W,O)=>{const z=ie?X:H,J=()=>ue(W,ie,O);callHook(z,[W,J]),nextFrame(()=>{removeTransitionClass(W,ie?B:S),addTransitionClass(W,ie?I:T),hasExplicitCallback(z)||whenTransitionEnds(W,x,F,J)})};return extend$1(n,{onBeforeEnter(ie){callHook(U,[ie]),addTransitionClass(ie,S),addTransitionClass(ie,C)},onBeforeAppear(ie){callHook(re,[ie]),addTransitionClass(ie,B),addTransitionClass(ie,A)},onEnter:ye(!1),onAppear:ye(!0),onLeave(ie,W){ie._isLeaving=!0;const O=()=>_e(ie,W);addTransitionClass(ie,D),forceReflow(),addTransitionClass(ie,M),nextFrame(()=>{ie._isLeaving&&(removeTransitionClass(ie,D),addTransitionClass(ie,V),hasExplicitCallback(Z)||whenTransitionEnds(ie,x,j,O))}),callHook(Z,[ie,O])},onEnterCancelled(ie){ue(ie,!1),callHook(Y,[ie])},onAppearCancelled(ie){ue(ie,!0),callHook(ce,[ie])},onLeaveCancelled(ie){_e(ie),callHook(ne,[ie])}})}function normalizeDuration(t){if(t==null)return null;if(isObject$5(t))return[NumberOf(t.enter),NumberOf(t.leave)];{const n=NumberOf(t);return[n,n]}}function NumberOf(t){return toNumber(t)}function addTransitionClass(t,n){n.split(/\s+/).forEach(_=>_&&t.classList.add(_)),(t._vtc||(t._vtc=new Set)).add(n)}function removeTransitionClass(t,n){n.split(/\s+/).forEach(x=>x&&t.classList.remove(x));const{_vtc:_}=t;_&&(_.delete(n),_.size||(t._vtc=void 0))}function nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let endId=0;function whenTransitionEnds(t,n,_,x){const E=t._endId=++endId,S=()=>{E===t._endId&&x()};if(_)return setTimeout(S,_);const{type:C,timeout:T,propCount:B}=getTransitionInfo(t,n);if(!C)return x();const A=C+"end";let I=0;const D=()=>{t.removeEventListener(A,M),S()},M=V=>{V.target===t&&++I>=B&&D()};setTimeout(()=>{I<B&&D()},T+1),t.addEventListener(A,M)}function getTransitionInfo(t,n){const _=window.getComputedStyle(t),x=L=>(_[L]||"").split(", "),E=x(`${TRANSITION}Delay`),S=x(`${TRANSITION}Duration`),C=getTimeout(E,S),T=x(`${ANIMATION}Delay`),B=x(`${ANIMATION}Duration`),A=getTimeout(T,B);let I=null,D=0,M=0;n===TRANSITION?C>0&&(I=TRANSITION,D=C,M=S.length):n===ANIMATION?A>0&&(I=ANIMATION,D=A,M=B.length):(D=Math.max(C,A),I=D>0?C>A?TRANSITION:ANIMATION:null,M=I?I===TRANSITION?S.length:B.length:0);const V=I===TRANSITION&&/\b(transform|all)(,|$)/.test(x(`${TRANSITION}Property`).toString());return{type:I,timeout:D,propCount:M,hasTransform:V}}function getTimeout(t,n){for(;t.length<n.length;)t=t.concat(t);return Math.max(...n.map((_,x)=>toMs(_)+toMs(t[x])))}function toMs(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend$1({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(t,{slots:n}){const _=getCurrentInstance$1(),x=useTransitionState();let E,S;return onUpdated(()=>{if(!E.length)return;const C=t.moveClass||`${t.name||"v"}-move`;if(!hasCSSTransform(E[0].el,_.vnode.el,C))return;E.forEach(callPendingCbs),E.forEach(recordPosition);const T=E.filter(applyTranslation);forceReflow(),T.forEach(B=>{const A=B.el,I=A.style;addTransitionClass(A,C),I.transform=I.webkitTransform=I.transitionDuration="";const D=A._moveCb=M=>{M&&M.target!==A||(!M||/transform$/.test(M.propertyName))&&(A.removeEventListener("transitionend",D),A._moveCb=null,removeTransitionClass(A,C))};A.addEventListener("transitionend",D)})}),()=>{const C=toRaw(t),T=resolveTransitionProps(C);let B=C.tag||Fragment;E=S,S=n.default?getTransitionRawChildren(n.default()):[];for(let A=0;A<S.length;A++){const I=S[A];I.key!=null&&setTransitionHooks(I,resolveTransitionHooks(I,T,x,_))}if(E)for(let A=0;A<E.length;A++){const I=E[A];setTransitionHooks(I,resolveTransitionHooks(I,T,x,_)),positionMap.set(I,I.el.getBoundingClientRect())}return createVNode(B,null,S)}}},removeMode=t=>delete t.mode;TransitionGroupImpl.props;const TransitionGroup=TransitionGroupImpl;function callPendingCbs(t){const n=t.el;n._moveCb&&n._moveCb(),n._enterCb&&n._enterCb()}function recordPosition(t){newPositionMap.set(t,t.el.getBoundingClientRect())}function applyTranslation(t){const n=positionMap.get(t),_=newPositionMap.get(t),x=n.left-_.left,E=n.top-_.top;if(x||E){const S=t.el.style;return S.transform=S.webkitTransform=`translate(${x}px,${E}px)`,S.transitionDuration="0s",t}}function hasCSSTransform(t,n,_){const x=t.cloneNode();t._vtc&&t._vtc.forEach(C=>{C.split(/\s+/).forEach(T=>T&&x.classList.remove(T))}),_.split(/\s+/).forEach(C=>C&&x.classList.add(C)),x.style.display="none";const E=n.nodeType===1?n:n.parentNode;E.appendChild(x);const{hasTransform:S}=getTransitionInfo(x);return E.removeChild(x),S}const getModelAssigner=t=>{const n=t.props["onUpdate:modelValue"]||!1;return isArray$9(n)?_=>invokeArrayFns(n,_):n};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const vModelText={created(t,{modifiers:{lazy:n,trim:_,number:x}},E){t._assign=getModelAssigner(E);const S=x||E.props&&E.props.type==="number";addEventListener(t,n?"change":"input",C=>{if(C.target.composing)return;let T=t.value;_&&(T=T.trim()),S&&(T=looseToNumber(T)),t._assign(T)}),_&&addEventListener(t,"change",()=>{t.value=t.value.trim()}),n||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,modifiers:{lazy:_,trim:x,number:E}},S){if(t._assign=getModelAssigner(S),t.composing||document.activeElement===t&&t.type!=="range"&&(_||x&&t.value.trim()===n||(E||t.type==="number")&&looseToNumber(t.value)===n))return;const C=n??"";t.value!==C&&(t.value=C)}},systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>systemModifiers.some(_=>t[`${_}Key`]&&!n.includes(_))},withModifiers=(t,n)=>(_,...x)=>{for(let E=0;E<n.length;E++){const S=modifierGuards[n[E]];if(S&&S(_,n))return}return t(_,...x)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(t,n)=>_=>{if(!("key"in _))return;const x=hyphenate(_.key);if(n.some(E=>E===x||keyNames[E]===x))return t(_)},vShow={beforeMount(t,{value:n},{transition:_}){t._vod=t.style.display==="none"?"":t.style.display,_&&n?_.beforeEnter(t):setDisplay(t,n)},mounted(t,{value:n},{transition:_}){_&&n&&_.enter(t)},updated(t,{value:n,oldValue:_},{transition:x}){!n!=!_&&(x?n?(x.beforeEnter(t),setDisplay(t,!0),x.enter(t)):x.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,n))},beforeUnmount(t,{value:n}){setDisplay(t,n)}};function setDisplay(t,n){t.style.display=n?t._vod:"none"}const rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const n=ensureRenderer().createApp(...t),{mount:_}=n;return n.mount=x=>{const E=normalizeContainer(x);if(!E)return;const S=n._component;!isFunction$4(S)&&!S.render&&!S.template&&(S.template=E.innerHTML),E.innerHTML="";const C=_(E,!1,E instanceof SVGElement);return E instanceof Element&&(E.removeAttribute("v-cloak"),E.setAttribute("data-v-app","")),C},n};function normalizeContainer(t){return isString$6(t)?document.querySelector(t):t}/*! js-cookie v3.0.5 | MIT */function assign$5(t){for(var n=1;n<arguments.length;n++){var _=arguments[n];for(var x in _)t[x]=_[x]}return t}var defaultConverter={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init$2(t,n){function _(E,S,C){if(!(typeof document>"u")){C=assign$5({},n,C),typeof C.expires=="number"&&(C.expires=new Date(Date.now()+C.expires*864e5)),C.expires&&(C.expires=C.expires.toUTCString()),E=encodeURIComponent(E).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var T="";for(var B in C)C[B]&&(T+="; "+B,C[B]!==!0&&(T+="="+C[B].split(";")[0]));return document.cookie=E+"="+t.write(S,E)+T}}function x(E){if(!(typeof document>"u"||arguments.length&&!E)){for(var S=document.cookie?document.cookie.split("; "):[],C={},T=0;T<S.length;T++){var B=S[T].split("="),A=B.slice(1).join("=");try{var I=decodeURIComponent(B[0]);if(C[I]=t.read(A,I),E===I)break}catch{}}return E?C[E]:C}}return Object.create({set:_,get:x,remove:function(E,S){_(E,"",assign$5({},S,{expires:-1}))},withAttributes:function(E){return init$2(this.converter,assign$5({},this.attributes,E))},withConverter:function(E){return init$2(assign$5({},this.converter,E),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}var api$3=init$2(defaultConverter,{path:"/"}),events$1={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(n,_,x){return Function.prototype.apply.call(n,_,x)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:ReflectOwnKeys=function(n){return Object.getOwnPropertyNames(n)};function ProcessEmitWarning(t){console&&console.warn&&console.warn(t)}var NumberIsNaN=Number.isNaN||function(n){return n!==n};function EventEmitter$4(){EventEmitter$4.init.call(this)}events$1.exports=EventEmitter$4;var once_1=events$1.exports.once=once$1;EventEmitter$4.EventEmitter=EventEmitter$4;EventEmitter$4.prototype._events=void 0;EventEmitter$4.prototype._eventsCount=0;EventEmitter$4.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(EventEmitter$4,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(t){if(typeof t!="number"||t<0||NumberIsNaN(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");defaultMaxListeners=t}});EventEmitter$4.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$4.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||NumberIsNaN(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};function _getMaxListeners(t){return t._maxListeners===void 0?EventEmitter$4.defaultMaxListeners:t._maxListeners}EventEmitter$4.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$4.prototype.emit=function(n){for(var _=[],x=1;x<arguments.length;x++)_.push(arguments[x]);var E=n==="error",S=this._events;if(S!==void 0)E=E&&S.error===void 0;else if(!E)return!1;if(E){var C;if(_.length>0&&(C=_[0]),C instanceof Error)throw C;var T=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw T.context=C,T}var B=S[n];if(B===void 0)return!1;if(typeof B=="function")ReflectApply(B,this,_);else for(var A=B.length,I=arrayClone(B,A),x=0;x<A;++x)ReflectApply(I[x],this,_);return!0};function _addListener(t,n,_,x){var E,S,C;if(checkListener(_),S=t._events,S===void 0?(S=t._events=Object.create(null),t._eventsCount=0):(S.newListener!==void 0&&(t.emit("newListener",n,_.listener?_.listener:_),S=t._events),C=S[n]),C===void 0)C=S[n]=_,++t._eventsCount;else if(typeof C=="function"?C=S[n]=x?[_,C]:[C,_]:x?C.unshift(_):C.push(_),E=_getMaxListeners(t),E>0&&C.length>E&&!C.warned){C.warned=!0;var T=new Error("Possible EventEmitter memory leak detected. "+C.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");T.name="MaxListenersExceededWarning",T.emitter=t,T.type=n,T.count=C.length,ProcessEmitWarning(T)}return t}EventEmitter$4.prototype.addListener=function(n,_){return _addListener(this,n,_,!1)};EventEmitter$4.prototype.on=EventEmitter$4.prototype.addListener;EventEmitter$4.prototype.prependListener=function(n,_){return _addListener(this,n,_,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(t,n,_){var x={fired:!1,wrapFn:void 0,target:t,type:n,listener:_},E=onceWrapper.bind(x);return E.listener=_,x.wrapFn=E,E}EventEmitter$4.prototype.once=function(n,_){return checkListener(_),this.on(n,_onceWrap(this,n,_)),this};EventEmitter$4.prototype.prependOnceListener=function(n,_){return checkListener(_),this.prependListener(n,_onceWrap(this,n,_)),this};EventEmitter$4.prototype.removeListener=function(n,_){var x,E,S,C,T;if(checkListener(_),E=this._events,E===void 0)return this;if(x=E[n],x===void 0)return this;if(x===_||x.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete E[n],E.removeListener&&this.emit("removeListener",n,x.listener||_));else if(typeof x!="function"){for(S=-1,C=x.length-1;C>=0;C--)if(x[C]===_||x[C].listener===_){T=x[C].listener,S=C;break}if(S<0)return this;S===0?x.shift():spliceOne(x,S),x.length===1&&(E[n]=x[0]),E.removeListener!==void 0&&this.emit("removeListener",n,T||_)}return this};EventEmitter$4.prototype.off=EventEmitter$4.prototype.removeListener;EventEmitter$4.prototype.removeAllListeners=function(n){var _,x,E;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[n]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[n]),this;if(arguments.length===0){var S=Object.keys(x),C;for(E=0;E<S.length;++E)C=S[E],C!=="removeListener"&&this.removeAllListeners(C);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_=x[n],typeof _=="function")this.removeListener(n,_);else if(_!==void 0)for(E=_.length-1;E>=0;E--)this.removeListener(n,_[E]);return this};function _listeners(t,n,_){var x=t._events;if(x===void 0)return[];var E=x[n];return E===void 0?[]:typeof E=="function"?_?[E.listener||E]:[E]:_?unwrapListeners(E):arrayClone(E,E.length)}EventEmitter$4.prototype.listeners=function(n){return _listeners(this,n,!0)};EventEmitter$4.prototype.rawListeners=function(n){return _listeners(this,n,!1)};EventEmitter$4.listenerCount=function(t,n){return typeof t.listenerCount=="function"?t.listenerCount(n):listenerCount$1.call(t,n)};EventEmitter$4.prototype.listenerCount=listenerCount$1;function listenerCount$1(t){var n=this._events;if(n!==void 0){var _=n[t];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}EventEmitter$4.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(t,n){for(var _=new Array(n),x=0;x<n;++x)_[x]=t[x];return _}function spliceOne(t,n){for(;n+1<t.length;n++)t[n]=t[n+1];t.pop()}function unwrapListeners(t){for(var n=new Array(t.length),_=0;_<n.length;++_)n[_]=t[_].listener||t[_];return n}function once$1(t,n){return new Promise(function(_,x){function E(C){t.removeListener(n,S),x(C)}function S(){typeof t.removeListener=="function"&&t.removeListener("error",E),_([].slice.call(arguments))}eventTargetAgnosticAddListener(t,n,S,{once:!0}),n!=="error"&&addErrorHandlerIfEventEmitter(t,E,{once:!0})})}function addErrorHandlerIfEventEmitter(t,n,_){typeof t.on=="function"&&eventTargetAgnosticAddListener(t,"error",n,_)}function eventTargetAgnosticAddListener(t,n,_,x){if(typeof t.on=="function")x.once?t.once(n,_):t.on(n,_);else if(typeof t.addEventListener=="function")t.addEventListener(n,function E(S){x.once&&t.removeEventListener(n,E),_(S)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var eventsExports=events$1.exports;const EventEmitter$5=getDefaultExportFromCjs(eventsExports);var isMergeableObject=function(n){return isNonNullObject(n)&&!isSpecial(n)};function isNonNullObject(t){return!!t&&typeof t=="object"}function isSpecial(t){var n=Object.prototype.toString.call(t);return n==="[object RegExp]"||n==="[object Date]"||isReactElement(t)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(t){return t.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(t){return Array.isArray(t)?[]:{}}function cloneUnlessOtherwiseSpecified(t,n){return n.clone!==!1&&n.isMergeableObject(t)?deepmerge(emptyTarget(t),t,n):t}function defaultArrayMerge(t,n,_){return t.concat(n).map(function(x){return cloneUnlessOtherwiseSpecified(x,_)})}function getMergeFunction(t,n){if(!n.customMerge)return deepmerge;var _=n.customMerge(t);return typeof _=="function"?_:deepmerge}function getEnumerableOwnPropertySymbols(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(n){return Object.propertyIsEnumerable.call(t,n)}):[]}function getKeys(t){return Object.keys(t).concat(getEnumerableOwnPropertySymbols(t))}function propertyIsOnObject(t,n){try{return n in t}catch{return!1}}function propertyIsUnsafe(t,n){return propertyIsOnObject(t,n)&&!(Object.hasOwnProperty.call(t,n)&&Object.propertyIsEnumerable.call(t,n))}function mergeObject(t,n,_){var x={};return _.isMergeableObject(t)&&getKeys(t).forEach(function(E){x[E]=cloneUnlessOtherwiseSpecified(t[E],_)}),getKeys(n).forEach(function(E){propertyIsUnsafe(t,E)||(propertyIsOnObject(t,E)&&_.isMergeableObject(n[E])?x[E]=getMergeFunction(E,_)(t[E],n[E],_):x[E]=cloneUnlessOtherwiseSpecified(n[E],_))}),x}function deepmerge(t,n,_){_=_||{},_.arrayMerge=_.arrayMerge||defaultArrayMerge,_.isMergeableObject=_.isMergeableObject||isMergeableObject,_.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var x=Array.isArray(n),E=Array.isArray(t),S=x===E;return S?x?_.arrayMerge(t,n,_):mergeObject(t,n,_):cloneUnlessOtherwiseSpecified(n,_)}deepmerge.all=function(n,_){if(!Array.isArray(n))throw new Error("first argument should be an array");return n.reduce(function(x,E){return deepmerge(x,E,_)},{})};var deepmerge_1=deepmerge,cjs=deepmerge_1;const merge$1=getDefaultExportFromCjs(cjs),___=" ",__="",__="/orbitdb/zdpuAqBsFnWsRo4DRZjyvDbuHXPck4PsD99GqUqnDaVMYYdRy/df20365f-e180-400f-b97c-945542c690f4",__="",__="/orbitdb/zdpuAtyjCoieAwksiuuvaYgVQfzFYSsB4isz5LuJqiiEnVdfS/283c823e-24ad-4881-9782-99fc753e5161",={___,__,__,__,__},scriptRel="modulepreload",assetsURL=function(t){return"/iug/"+t},seen={},__vitePreload=function(n,_,x){if(!_||_.length===0)return n();const E=document.getElementsByTagName("link");return Promise.all(_.map(S=>{if(S=assetsURL(S),S in seen)return;seen[S]=!0;const C=S.endsWith(".css"),T=C?'[rel="stylesheet"]':"";if(!!x)for(let I=E.length-1;I>=0;I--){const D=E[I];if(D.href===S&&(!C||D.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${S}"]${T}`))return;const A=document.createElement("link");if(A.rel=C?"stylesheet":scriptRel,C||(A.as="script",A.crossOrigin=""),A.href=S,document.head.appendChild(A),C)return new Promise((I,D)=>{A.addEventListener("load",I),A.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${S}`)))})})).then(()=>n()).catch(S=>{const C=new Event("vite:preloadError",{cancelable:!0});if(C.payload=S,window.dispatchEvent(C),!C.defaultPrevented)throw S})};var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init$1(){inited=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,_=t.length;n<_;++n)lookup$1[n]=t[n],revLookup[t.charCodeAt(n)]=n;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(t){inited||init$1();var n,_,x,E,S,C,T=t.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");S=t[T-2]==="="?2:t[T-1]==="="?1:0,C=new Arr(T*3/4-S),x=S>0?T-4:T;var B=0;for(n=0,_=0;n<x;n+=4,_+=3)E=revLookup[t.charCodeAt(n)]<<18|revLookup[t.charCodeAt(n+1)]<<12|revLookup[t.charCodeAt(n+2)]<<6|revLookup[t.charCodeAt(n+3)],C[B++]=E>>16&255,C[B++]=E>>8&255,C[B++]=E&255;return S===2?(E=revLookup[t.charCodeAt(n)]<<2|revLookup[t.charCodeAt(n+1)]>>4,C[B++]=E&255):S===1&&(E=revLookup[t.charCodeAt(n)]<<10|revLookup[t.charCodeAt(n+1)]<<4|revLookup[t.charCodeAt(n+2)]>>2,C[B++]=E>>8&255,C[B++]=E&255),C}function tripletToBase64(t){return lookup$1[t>>18&63]+lookup$1[t>>12&63]+lookup$1[t>>6&63]+lookup$1[t&63]}function encodeChunk(t,n,_){for(var x,E=[],S=n;S<_;S+=3)x=(t[S]<<16)+(t[S+1]<<8)+t[S+2],E.push(tripletToBase64(x));return E.join("")}function fromByteArray(t){inited||init$1();for(var n,_=t.length,x=_%3,E="",S=[],C=16383,T=0,B=_-x;T<B;T+=C)S.push(encodeChunk(t,T,T+C>B?B:T+C));return x===1?(n=t[_-1],E+=lookup$1[n>>2],E+=lookup$1[n<<4&63],E+="=="):x===2&&(n=(t[_-2]<<8)+t[_-1],E+=lookup$1[n>>10],E+=lookup$1[n>>4&63],E+=lookup$1[n<<2&63],E+="="),S.push(E),S.join("")}function read$9(t,n,_,x,E){var S,C,T=E*8-x-1,B=(1<<T)-1,A=B>>1,I=-7,D=_?E-1:0,M=_?-1:1,V=t[n+D];for(D+=M,S=V&(1<<-I)-1,V>>=-I,I+=T;I>0;S=S*256+t[n+D],D+=M,I-=8);for(C=S&(1<<-I)-1,S>>=-I,I+=x;I>0;C=C*256+t[n+D],D+=M,I-=8);if(S===0)S=1-A;else{if(S===B)return C?NaN:(V?-1:1)*(1/0);C=C+Math.pow(2,x),S=S-A}return(V?-1:1)*C*Math.pow(2,S-x)}function write$4(t,n,_,x,E,S){var C,T,B,A=S*8-E-1,I=(1<<A)-1,D=I>>1,M=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=x?0:S-1,L=x?1:-1,F=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(T=isNaN(n)?1:0,C=I):(C=Math.floor(Math.log(n)/Math.LN2),n*(B=Math.pow(2,-C))<1&&(C--,B*=2),C+D>=1?n+=M/B:n+=M*Math.pow(2,1-D),n*B>=2&&(C++,B/=2),C+D>=I?(T=0,C=I):C+D>=1?(T=(n*B-1)*Math.pow(2,E),C=C+D):(T=n*Math.pow(2,D-1)*Math.pow(2,E),C=0));E>=8;t[_+V]=T&255,V+=L,T/=256,E-=8);for(C=C<<E|T,A+=E;A>0;t[_+V]=C&255,V+=L,C/=256,A-=8);t[_+V-L]|=F*128}var toString$b={}.toString,isArray$8=Array.isArray||function(t){return toString$b.call(t)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var INSPECT_MAX_BYTES=50;Buffer$5.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==void 0?global$1.TYPED_ARRAY_SUPPORT:!0;kMaxLength();function kMaxLength(){return Buffer$5.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,n){if(kMaxLength()<n)throw new RangeError("Invalid typed array length");return Buffer$5.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=Buffer$5.prototype):(t===null&&(t=new Buffer$5(n)),t.length=n),t}function Buffer$5(t,n,_){if(!Buffer$5.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer$5))return new Buffer$5(t,n,_);if(typeof t=="number"){if(typeof n=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe$3(this,t)}return from$a(this,t,n,_)}Buffer$5.poolSize=8192;Buffer$5._augment=function(t){return t.__proto__=Buffer$5.prototype,t};function from$a(t,n,_,x){if(typeof n=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer?fromArrayBuffer(t,n,_,x):typeof n=="string"?fromString$7(t,n,_):fromObject(t,n)}Buffer$5.from=function(t,n,_){return from$a(null,t,n,_)};Buffer$5.TYPED_ARRAY_SUPPORT&&(Buffer$5.prototype.__proto__=Uint8Array.prototype,Buffer$5.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer$5[Symbol.species]);function assertSize(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function alloc$3(t,n,_,x){return assertSize(n),n<=0?createBuffer(t,n):_!==void 0?typeof x=="string"?createBuffer(t,n).fill(_,x):createBuffer(t,n).fill(_):createBuffer(t,n)}Buffer$5.alloc=function(t,n,_){return alloc$3(null,t,n,_)};function allocUnsafe$3(t,n){if(assertSize(n),t=createBuffer(t,n<0?0:checked(n)|0),!Buffer$5.TYPED_ARRAY_SUPPORT)for(var _=0;_<n;++_)t[_]=0;return t}Buffer$5.allocUnsafe=function(t){return allocUnsafe$3(null,t)};Buffer$5.allocUnsafeSlow=function(t){return allocUnsafe$3(null,t)};function fromString$7(t,n,_){if((typeof _!="string"||_==="")&&(_="utf8"),!Buffer$5.isEncoding(_))throw new TypeError('"encoding" must be a valid string encoding');var x=byteLength$1(n,_)|0;t=createBuffer(t,x);var E=t.write(n,_);return E!==x&&(t=t.slice(0,E)),t}function fromArrayLike(t,n){var _=n.length<0?0:checked(n.length)|0;t=createBuffer(t,_);for(var x=0;x<_;x+=1)t[x]=n[x]&255;return t}function fromArrayBuffer(t,n,_,x){if(n.byteLength,_<0||n.byteLength<_)throw new RangeError("'offset' is out of bounds");if(n.byteLength<_+(x||0))throw new RangeError("'length' is out of bounds");return _===void 0&&x===void 0?n=new Uint8Array(n):x===void 0?n=new Uint8Array(n,_):n=new Uint8Array(n,_,x),Buffer$5.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=Buffer$5.prototype):t=fromArrayLike(t,n),t}function fromObject(t,n){if(internalIsBuffer(n)){var _=checked(n.length)|0;return t=createBuffer(t,_),t.length===0||n.copy(t,0,0,_),t}if(n){if(typeof ArrayBuffer<"u"&&n.buffer instanceof ArrayBuffer||"length"in n)return typeof n.length!="number"||isnan(n.length)?createBuffer(t,0):fromArrayLike(t,n);if(n.type==="Buffer"&&isArray$8(n.data))return fromArrayLike(t,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return t|0}Buffer$5.isBuffer=isBuffer$7;function internalIsBuffer(t){return!!(t!=null&&t._isBuffer)}Buffer$5.compare=function(n,_){if(!internalIsBuffer(n)||!internalIsBuffer(_))throw new TypeError("Arguments must be Buffers");if(n===_)return 0;for(var x=n.length,E=_.length,S=0,C=Math.min(x,E);S<C;++S)if(n[S]!==_[S]){x=n[S],E=_[S];break}return x<E?-1:E<x?1:0};Buffer$5.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer$5.concat=function(n,_){if(!isArray$8(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return Buffer$5.alloc(0);var x;if(_===void 0)for(_=0,x=0;x<n.length;++x)_+=n[x].length;var E=Buffer$5.allocUnsafe(_),S=0;for(x=0;x<n.length;++x){var C=n[x];if(!internalIsBuffer(C))throw new TypeError('"list" argument must be an Array of Buffers');C.copy(E,S),S+=C.length}return E};function byteLength$1(t,n){if(internalIsBuffer(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var _=t.length;if(_===0)return 0;for(var x=!1;;)switch(n){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":case void 0:return utf8ToBytes$2(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _*2;case"hex":return _>>>1;case"base64":return base64ToBytes$1(t).length;default:if(x)return utf8ToBytes$2(t).length;n=(""+n).toLowerCase(),x=!0}}Buffer$5.byteLength=byteLength$1;function slowToString(t,n,_){var x=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((_===void 0||_>this.length)&&(_=this.length),_<=0)||(_>>>=0,n>>>=0,_<=n))return"";for(t||(t="utf8");;)switch(t){case"hex":return hexSlice(this,n,_);case"utf8":case"utf-8":return utf8Slice$2(this,n,_);case"ascii":return asciiSlice(this,n,_);case"latin1":case"binary":return latin1Slice(this,n,_);case"base64":return base64Slice(this,n,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,n,_);default:if(x)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),x=!0}}Buffer$5.prototype._isBuffer=!0;function swap(t,n,_){var x=t[n];t[n]=t[_],t[_]=x}Buffer$5.prototype.swap16=function(){var n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var _=0;_<n;_+=2)swap(this,_,_+1);return this};Buffer$5.prototype.swap32=function(){var n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var _=0;_<n;_+=4)swap(this,_,_+3),swap(this,_+1,_+2);return this};Buffer$5.prototype.swap64=function(){var n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var _=0;_<n;_+=8)swap(this,_,_+7),swap(this,_+1,_+6),swap(this,_+2,_+5),swap(this,_+3,_+4);return this};Buffer$5.prototype.toString=function(){var n=this.length|0;return n===0?"":arguments.length===0?utf8Slice$2(this,0,n):slowToString.apply(this,arguments)};Buffer$5.prototype.equals=function(n){if(!internalIsBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:Buffer$5.compare(this,n)===0};Buffer$5.prototype.inspect=function(){var n="",_=INSPECT_MAX_BYTES;return this.length>0&&(n=this.toString("hex",0,_).match(/.{2}/g).join(" "),this.length>_&&(n+=" ... ")),"<Buffer "+n+">"};Buffer$5.prototype.compare=function(n,_,x,E,S){if(!internalIsBuffer(n))throw new TypeError("Argument must be a Buffer");if(_===void 0&&(_=0),x===void 0&&(x=n?n.length:0),E===void 0&&(E=0),S===void 0&&(S=this.length),_<0||x>n.length||E<0||S>this.length)throw new RangeError("out of range index");if(E>=S&&_>=x)return 0;if(E>=S)return-1;if(_>=x)return 1;if(_>>>=0,x>>>=0,E>>>=0,S>>>=0,this===n)return 0;for(var C=S-E,T=x-_,B=Math.min(C,T),A=this.slice(E,S),I=n.slice(_,x),D=0;D<B;++D)if(A[D]!==I[D]){C=A[D],T=I[D];break}return C<T?-1:T<C?1:0};function bidirectionalIndexOf(t,n,_,x,E){if(t.length===0)return-1;if(typeof _=="string"?(x=_,_=0):_>2147483647?_=2147483647:_<-2147483648&&(_=-2147483648),_=+_,isNaN(_)&&(_=E?0:t.length-1),_<0&&(_=t.length+_),_>=t.length){if(E)return-1;_=t.length-1}else if(_<0)if(E)_=0;else return-1;if(typeof n=="string"&&(n=Buffer$5.from(n,x)),internalIsBuffer(n))return n.length===0?-1:arrayIndexOf(t,n,_,x,E);if(typeof n=="number")return n=n&255,Buffer$5.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?E?Uint8Array.prototype.indexOf.call(t,n,_):Uint8Array.prototype.lastIndexOf.call(t,n,_):arrayIndexOf(t,[n],_,x,E);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,n,_,x,E){var S=1,C=t.length,T=n.length;if(x!==void 0&&(x=String(x).toLowerCase(),x==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(t.length<2||n.length<2)return-1;S=2,C/=2,T/=2,_/=2}function B(V,L){return S===1?V[L]:V.readUInt16BE(L*S)}var A;if(E){var I=-1;for(A=_;A<C;A++)if(B(t,A)===B(n,I===-1?0:A-I)){if(I===-1&&(I=A),A-I+1===T)return I*S}else I!==-1&&(A-=A-I),I=-1}else for(_+T>C&&(_=C-T),A=_;A>=0;A--){for(var D=!0,M=0;M<T;M++)if(B(t,A+M)!==B(n,M)){D=!1;break}if(D)return A}return-1}Buffer$5.prototype.includes=function(n,_,x){return this.indexOf(n,_,x)!==-1};Buffer$5.prototype.indexOf=function(n,_,x){return bidirectionalIndexOf(this,n,_,x,!0)};Buffer$5.prototype.lastIndexOf=function(n,_,x){return bidirectionalIndexOf(this,n,_,x,!1)};function hexWrite(t,n,_,x){_=Number(_)||0;var E=t.length-_;x?(x=Number(x),x>E&&(x=E)):x=E;var S=n.length;if(S%2!==0)throw new TypeError("Invalid hex string");x>S/2&&(x=S/2);for(var C=0;C<x;++C){var T=parseInt(n.substr(C*2,2),16);if(isNaN(T))return C;t[_+C]=T}return C}function utf8Write(t,n,_,x){return blitBuffer(utf8ToBytes$2(n,t.length-_),t,_,x)}function asciiWrite(t,n,_,x){return blitBuffer(asciiToBytes(n),t,_,x)}function latin1Write(t,n,_,x){return asciiWrite(t,n,_,x)}function base64Write(t,n,_,x){return blitBuffer(base64ToBytes$1(n),t,_,x)}function ucs2Write(t,n,_,x){return blitBuffer(utf16leToBytes(n,t.length-_),t,_,x)}Buffer$5.prototype.write=function(n,_,x,E){if(_===void 0)E="utf8",x=this.length,_=0;else if(x===void 0&&typeof _=="string")E=_,x=this.length,_=0;else if(isFinite(_))_=_|0,isFinite(x)?(x=x|0,E===void 0&&(E="utf8")):(E=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var S=this.length-_;if((x===void 0||x>S)&&(x=S),n.length>0&&(x<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");for(var C=!1;;)switch(E){case"hex":return hexWrite(this,n,_,x);case"utf8":case"utf-8":return utf8Write(this,n,_,x);case"ascii":return asciiWrite(this,n,_,x);case"latin1":case"binary":return latin1Write(this,n,_,x);case"base64":return base64Write(this,n,_,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,n,_,x);default:if(C)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),C=!0}};Buffer$5.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(t,n,_){return n===0&&_===t.length?fromByteArray(t):fromByteArray(t.slice(n,_))}function utf8Slice$2(t,n,_){_=Math.min(t.length,_);for(var x=[],E=n;E<_;){var S=t[E],C=null,T=S>239?4:S>223?3:S>191?2:1;if(E+T<=_){var B,A,I,D;switch(T){case 1:S<128&&(C=S);break;case 2:B=t[E+1],(B&192)===128&&(D=(S&31)<<6|B&63,D>127&&(C=D));break;case 3:B=t[E+1],A=t[E+2],(B&192)===128&&(A&192)===128&&(D=(S&15)<<12|(B&63)<<6|A&63,D>2047&&(D<55296||D>57343)&&(C=D));break;case 4:B=t[E+1],A=t[E+2],I=t[E+3],(B&192)===128&&(A&192)===128&&(I&192)===128&&(D=(S&15)<<18|(B&63)<<12|(A&63)<<6|I&63,D>65535&&D<1114112&&(C=D))}}C===null?(C=65533,T=1):C>65535&&(C-=65536,x.push(C>>>10&1023|55296),C=56320|C&1023),x.push(C),E+=T}return decodeCodePointsArray$2(x)}var MAX_ARGUMENTS_LENGTH$2=4096;function decodeCodePointsArray$2(t){var n=t.length;if(n<=MAX_ARGUMENTS_LENGTH$2)return String.fromCharCode.apply(String,t);for(var _="",x=0;x<n;)_+=String.fromCharCode.apply(String,t.slice(x,x+=MAX_ARGUMENTS_LENGTH$2));return _}function asciiSlice(t,n,_){var x="";_=Math.min(t.length,_);for(var E=n;E<_;++E)x+=String.fromCharCode(t[E]&127);return x}function latin1Slice(t,n,_){var x="";_=Math.min(t.length,_);for(var E=n;E<_;++E)x+=String.fromCharCode(t[E]);return x}function hexSlice(t,n,_){var x=t.length;(!n||n<0)&&(n=0),(!_||_<0||_>x)&&(_=x);for(var E="",S=n;S<_;++S)E+=toHex$3(t[S]);return E}function utf16leSlice(t,n,_){for(var x=t.slice(n,_),E="",S=0;S<x.length;S+=2)E+=String.fromCharCode(x[S]+x[S+1]*256);return E}Buffer$5.prototype.slice=function(n,_){var x=this.length;n=~~n,_=_===void 0?x:~~_,n<0?(n+=x,n<0&&(n=0)):n>x&&(n=x),_<0?(_+=x,_<0&&(_=0)):_>x&&(_=x),_<n&&(_=n);var E;if(Buffer$5.TYPED_ARRAY_SUPPORT)E=this.subarray(n,_),E.__proto__=Buffer$5.prototype;else{var S=_-n;E=new Buffer$5(S,void 0);for(var C=0;C<S;++C)E[C]=this[C+n]}return E};function checkOffset(t,n,_){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+n>_)throw new RangeError("Trying to access beyond buffer length")}Buffer$5.prototype.readUIntLE=function(n,_,x){n=n|0,_=_|0,x||checkOffset(n,_,this.length);for(var E=this[n],S=1,C=0;++C<_&&(S*=256);)E+=this[n+C]*S;return E};Buffer$5.prototype.readUIntBE=function(n,_,x){n=n|0,_=_|0,x||checkOffset(n,_,this.length);for(var E=this[n+--_],S=1;_>0&&(S*=256);)E+=this[n+--_]*S;return E};Buffer$5.prototype.readUInt8=function(n,_){return _||checkOffset(n,1,this.length),this[n]};Buffer$5.prototype.readUInt16LE=function(n,_){return _||checkOffset(n,2,this.length),this[n]|this[n+1]<<8};Buffer$5.prototype.readUInt16BE=function(n,_){return _||checkOffset(n,2,this.length),this[n]<<8|this[n+1]};Buffer$5.prototype.readUInt32LE=function(n,_){return _||checkOffset(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216};Buffer$5.prototype.readUInt32BE=function(n,_){return _||checkOffset(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])};Buffer$5.prototype.readIntLE=function(n,_,x){n=n|0,_=_|0,x||checkOffset(n,_,this.length);for(var E=this[n],S=1,C=0;++C<_&&(S*=256);)E+=this[n+C]*S;return S*=128,E>=S&&(E-=Math.pow(2,8*_)),E};Buffer$5.prototype.readIntBE=function(n,_,x){n=n|0,_=_|0,x||checkOffset(n,_,this.length);for(var E=_,S=1,C=this[n+--E];E>0&&(S*=256);)C+=this[n+--E]*S;return S*=128,C>=S&&(C-=Math.pow(2,8*_)),C};Buffer$5.prototype.readInt8=function(n,_){return _||checkOffset(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]};Buffer$5.prototype.readInt16LE=function(n,_){_||checkOffset(n,2,this.length);var x=this[n]|this[n+1]<<8;return x&32768?x|4294901760:x};Buffer$5.prototype.readInt16BE=function(n,_){_||checkOffset(n,2,this.length);var x=this[n+1]|this[n]<<8;return x&32768?x|4294901760:x};Buffer$5.prototype.readInt32LE=function(n,_){return _||checkOffset(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24};Buffer$5.prototype.readInt32BE=function(n,_){return _||checkOffset(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]};Buffer$5.prototype.readFloatLE=function(n,_){return _||checkOffset(n,4,this.length),read$9(this,n,!0,23,4)};Buffer$5.prototype.readFloatBE=function(n,_){return _||checkOffset(n,4,this.length),read$9(this,n,!1,23,4)};Buffer$5.prototype.readDoubleLE=function(n,_){return _||checkOffset(n,8,this.length),read$9(this,n,!0,52,8)};Buffer$5.prototype.readDoubleBE=function(n,_){return _||checkOffset(n,8,this.length),read$9(this,n,!1,52,8)};function checkInt(t,n,_,x,E,S){if(!internalIsBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>E||n<S)throw new RangeError('"value" argument is out of bounds');if(_+x>t.length)throw new RangeError("Index out of range")}Buffer$5.prototype.writeUIntLE=function(n,_,x,E){if(n=+n,_=_|0,x=x|0,!E){var S=Math.pow(2,8*x)-1;checkInt(this,n,_,x,S,0)}var C=1,T=0;for(this[_]=n&255;++T<x&&(C*=256);)this[_+T]=n/C&255;return _+x};Buffer$5.prototype.writeUIntBE=function(n,_,x,E){if(n=+n,_=_|0,x=x|0,!E){var S=Math.pow(2,8*x)-1;checkInt(this,n,_,x,S,0)}var C=x-1,T=1;for(this[_+C]=n&255;--C>=0&&(T*=256);)this[_+C]=n/T&255;return _+x};Buffer$5.prototype.writeUInt8=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,1,255,0),Buffer$5.TYPED_ARRAY_SUPPORT||(n=Math.floor(n)),this[_]=n&255,_+1};function objectWriteUInt16(t,n,_,x){n<0&&(n=65535+n+1);for(var E=0,S=Math.min(t.length-_,2);E<S;++E)t[_+E]=(n&255<<8*(x?E:1-E))>>>(x?E:1-E)*8}Buffer$5.prototype.writeUInt16LE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,2,65535,0),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n&255,this[_+1]=n>>>8):objectWriteUInt16(this,n,_,!0),_+2};Buffer$5.prototype.writeUInt16BE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,2,65535,0),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n>>>8,this[_+1]=n&255):objectWriteUInt16(this,n,_,!1),_+2};function objectWriteUInt32(t,n,_,x){n<0&&(n=4294967295+n+1);for(var E=0,S=Math.min(t.length-_,4);E<S;++E)t[_+E]=n>>>(x?E:3-E)*8&255}Buffer$5.prototype.writeUInt32LE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,4,4294967295,0),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_+3]=n>>>24,this[_+2]=n>>>16,this[_+1]=n>>>8,this[_]=n&255):objectWriteUInt32(this,n,_,!0),_+4};Buffer$5.prototype.writeUInt32BE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,4,4294967295,0),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n>>>24,this[_+1]=n>>>16,this[_+2]=n>>>8,this[_+3]=n&255):objectWriteUInt32(this,n,_,!1),_+4};Buffer$5.prototype.writeIntLE=function(n,_,x,E){if(n=+n,_=_|0,!E){var S=Math.pow(2,8*x-1);checkInt(this,n,_,x,S-1,-S)}var C=0,T=1,B=0;for(this[_]=n&255;++C<x&&(T*=256);)n<0&&B===0&&this[_+C-1]!==0&&(B=1),this[_+C]=(n/T>>0)-B&255;return _+x};Buffer$5.prototype.writeIntBE=function(n,_,x,E){if(n=+n,_=_|0,!E){var S=Math.pow(2,8*x-1);checkInt(this,n,_,x,S-1,-S)}var C=x-1,T=1,B=0;for(this[_+C]=n&255;--C>=0&&(T*=256);)n<0&&B===0&&this[_+C+1]!==0&&(B=1),this[_+C]=(n/T>>0)-B&255;return _+x};Buffer$5.prototype.writeInt8=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,1,127,-128),Buffer$5.TYPED_ARRAY_SUPPORT||(n=Math.floor(n)),n<0&&(n=255+n+1),this[_]=n&255,_+1};Buffer$5.prototype.writeInt16LE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,2,32767,-32768),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n&255,this[_+1]=n>>>8):objectWriteUInt16(this,n,_,!0),_+2};Buffer$5.prototype.writeInt16BE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,2,32767,-32768),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n>>>8,this[_+1]=n&255):objectWriteUInt16(this,n,_,!1),_+2};Buffer$5.prototype.writeInt32LE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,4,2147483647,-2147483648),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n&255,this[_+1]=n>>>8,this[_+2]=n>>>16,this[_+3]=n>>>24):objectWriteUInt32(this,n,_,!0),_+4};Buffer$5.prototype.writeInt32BE=function(n,_,x){return n=+n,_=_|0,x||checkInt(this,n,_,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),Buffer$5.TYPED_ARRAY_SUPPORT?(this[_]=n>>>24,this[_+1]=n>>>16,this[_+2]=n>>>8,this[_+3]=n&255):objectWriteUInt32(this,n,_,!1),_+4};function checkIEEE754(t,n,_,x,E,S){if(_+x>t.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("Index out of range")}function writeFloat(t,n,_,x,E){return E||checkIEEE754(t,n,_,4),write$4(t,n,_,x,23,4),_+4}Buffer$5.prototype.writeFloatLE=function(n,_,x){return writeFloat(this,n,_,!0,x)};Buffer$5.prototype.writeFloatBE=function(n,_,x){return writeFloat(this,n,_,!1,x)};function writeDouble(t,n,_,x,E){return E||checkIEEE754(t,n,_,8),write$4(t,n,_,x,52,8),_+8}Buffer$5.prototype.writeDoubleLE=function(n,_,x){return writeDouble(this,n,_,!0,x)};Buffer$5.prototype.writeDoubleBE=function(n,_,x){return writeDouble(this,n,_,!1,x)};Buffer$5.prototype.copy=function(n,_,x,E){if(x||(x=0),!E&&E!==0&&(E=this.length),_>=n.length&&(_=n.length),_||(_=0),E>0&&E<x&&(E=x),E===x||n.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("sourceStart out of bounds");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),n.length-_<E-x&&(E=n.length-_+x);var S=E-x,C;if(this===n&&x<_&&_<E)for(C=S-1;C>=0;--C)n[C+_]=this[C+x];else if(S<1e3||!Buffer$5.TYPED_ARRAY_SUPPORT)for(C=0;C<S;++C)n[C+_]=this[C+x];else Uint8Array.prototype.set.call(n,this.subarray(x,x+S),_);return S};Buffer$5.prototype.fill=function(n,_,x,E){if(typeof n=="string"){if(typeof _=="string"?(E=_,_=0,x=this.length):typeof x=="string"&&(E=x,x=this.length),n.length===1){var S=n.charCodeAt(0);S<256&&(n=S)}if(E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!Buffer$5.isEncoding(E))throw new TypeError("Unknown encoding: "+E)}else typeof n=="number"&&(n=n&255);if(_<0||this.length<_||this.length<x)throw new RangeError("Out of range index");if(x<=_)return this;_=_>>>0,x=x===void 0?this.length:x>>>0,n||(n=0);var C;if(typeof n=="number")for(C=_;C<x;++C)this[C]=n;else{var T=internalIsBuffer(n)?n:utf8ToBytes$2(new Buffer$5(n,E).toString()),B=T.length;for(C=0;C<x-_;++C)this[C+_]=T[C%B]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex$3(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes$2(t,n){n=n||1/0;for(var _,x=t.length,E=null,S=[],C=0;C<x;++C){if(_=t.charCodeAt(C),_>55295&&_<57344){if(!E){if(_>56319){(n-=3)>-1&&S.push(239,191,189);continue}else if(C+1===x){(n-=3)>-1&&S.push(239,191,189);continue}E=_;continue}if(_<56320){(n-=3)>-1&&S.push(239,191,189),E=_;continue}_=(E-55296<<10|_-56320)+65536}else E&&(n-=3)>-1&&S.push(239,191,189);if(E=null,_<128){if((n-=1)<0)break;S.push(_)}else if(_<2048){if((n-=2)<0)break;S.push(_>>6|192,_&63|128)}else if(_<65536){if((n-=3)<0)break;S.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((n-=4)<0)break;S.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return S}function asciiToBytes(t){for(var n=[],_=0;_<t.length;++_)n.push(t.charCodeAt(_)&255);return n}function utf16leToBytes(t,n){for(var _,x,E,S=[],C=0;C<t.length&&!((n-=2)<0);++C)_=t.charCodeAt(C),x=_>>8,E=_%256,S.push(E),S.push(x);return S}function base64ToBytes$1(t){return toByteArray(base64clean(t))}function blitBuffer(t,n,_,x){for(var E=0;E<x&&!(E+_>=n.length||E>=t.length);++E)n[E+_]=t[E];return E}function isnan(t){return t!==t}function isBuffer$7(t){return t!=null&&(!!t._isBuffer||isFastBuffer(t)||isSlowBuffer(t))}function isFastBuffer(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function isSlowBuffer(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&isFastBuffer(t.slice(0,0))}function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;typeof global$1.setTimeout=="function"&&(cachedSetTimeout=setTimeout);typeof global$1.clearTimeout=="function"&&(cachedClearTimeout=clearTimeout);function runTimeout(t){if(cachedSetTimeout===setTimeout)return setTimeout(t,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(t,0);try{return cachedSetTimeout(t,0)}catch{try{return cachedSetTimeout.call(null,t,0)}catch{return cachedSetTimeout.call(this,t,0)}}}function runClearTimeout(t){if(cachedClearTimeout===clearTimeout)return clearTimeout(t);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(t);try{return cachedClearTimeout(t)}catch{try{return cachedClearTimeout.call(null,t)}catch{return cachedClearTimeout.call(this,t)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var t=runTimeout(cleanUpNextTick);draining=!0;for(var n=queue.length;n;){for(currentQueue=queue,queue=[];++queueIndex<n;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,n=queue.length}currentQueue=null,draining=!1,runClearTimeout(t)}}function nextTick$1(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)n[_-1]=arguments[_];queue.push(new Item(t,n)),queue.length===1&&!draining&&runTimeout(drainQueue)}function Item(t,n){this.fun=t,this.array=n}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title$1="browser",platform$2="browser",browser$f=!0,env={},argv=[],version$l="",versions={},release$1={},config={};function noop$8(){}var on=noop$8,addListener=noop$8,once=noop$8,off=noop$8,removeListener=noop$8,removeAllListeners=noop$8,emit=noop$8;function binding(t){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(t){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance$1=global$1.performance||{},performanceNow=performance$1.now||performance$1.mozNow||performance$1.msNow||performance$1.oNow||performance$1.webkitNow||function(){return new Date().getTime()};function hrtime(t){var n=performanceNow.call(performance$1)*.001,_=Math.floor(n),x=Math.floor(n%1*1e9);return t&&(_=_-t[0],x=x-t[1],x<0&&(_--,x+=1e9)),[_,x]}var startTime=new Date;function uptime$1(){var t=new Date,n=t-startTime;return n/1e3}var browser$1$1={nextTick:nextTick$1,title:title$1,browser:browser$f,env,argv,version:version$l,versions,on,addListener,once,off,removeListener,removeAllListeners,emit,binding,cwd,chdir,umask,hrtime,platform:platform$2,release:release$1,config,uptime:uptime$1};function commonjsRequire$1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jszip_min={exports:{}};(function(t,n){(function(_){t.exports=_()})(function(){return function _(x,E,S){function C(A,I){if(!E[A]){if(!x[A]){var D=typeof commonjsRequire$1=="function"&&commonjsRequire$1;if(!I&&D)return D(A,!0);if(T)return T(A,!0);var M=new Error("Cannot find module '"+A+"'");throw M.code="MODULE_NOT_FOUND",M}var V=E[A]={exports:{}};x[A][0].call(V.exports,function(L){var F=x[A][1][L];return C(F||L)},V,V.exports,_,x,E,S)}return E[A].exports}for(var T=typeof commonjsRequire$1=="function"&&commonjsRequire$1,B=0;B<S.length;B++)C(S[B]);return C}({1:[function(_,x,E){var S=_("./utils"),C=_("./support"),T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";E.encode=function(B){for(var A,I,D,M,V,L,F,j=[],U=0,H=B.length,Y=H,Z=S.getTypeOf(B)!=="string";U<B.length;)Y=H-U,D=Z?(A=B[U++],I=U<H?B[U++]:0,U<H?B[U++]:0):(A=B.charCodeAt(U++),I=U<H?B.charCodeAt(U++):0,U<H?B.charCodeAt(U++):0),M=A>>2,V=(3&A)<<4|I>>4,L=1<Y?(15&I)<<2|D>>6:64,F=2<Y?63&D:64,j.push(T.charAt(M)+T.charAt(V)+T.charAt(L)+T.charAt(F));return j.join("")},E.decode=function(B){var A,I,D,M,V,L,F=0,j=0,U="data:";if(B.substr(0,U.length)===U)throw new Error("Invalid base64 input, it looks like a data url.");var H,Y=3*(B=B.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(B.charAt(B.length-1)===T.charAt(64)&&Y--,B.charAt(B.length-2)===T.charAt(64)&&Y--,Y%1!=0)throw new Error("Invalid base64 input, bad content length.");for(H=C.uint8array?new Uint8Array(0|Y):new Array(0|Y);F<B.length;)A=T.indexOf(B.charAt(F++))<<2|(M=T.indexOf(B.charAt(F++)))>>4,I=(15&M)<<4|(V=T.indexOf(B.charAt(F++)))>>2,D=(3&V)<<6|(L=T.indexOf(B.charAt(F++))),H[j++]=A,V!==64&&(H[j++]=I),L!==64&&(H[j++]=D);return H}},{"./support":30,"./utils":32}],2:[function(_,x,E){var S=_("./external"),C=_("./stream/DataWorker"),T=_("./stream/Crc32Probe"),B=_("./stream/DataLengthProbe");function A(I,D,M,V,L){this.compressedSize=I,this.uncompressedSize=D,this.crc32=M,this.compression=V,this.compressedContent=L}A.prototype={getContentWorker:function(){var I=new C(S.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new B("data_length")),D=this;return I.on("end",function(){if(this.streamInfo.data_length!==D.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),I},getCompressedWorker:function(){return new C(S.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},A.createWorkerFrom=function(I,D,M){return I.pipe(new T).pipe(new B("uncompressedSize")).pipe(D.compressWorker(M)).pipe(new B("compressedSize")).withStreamInfo("compression",D)},x.exports=A},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(_,x,E){var S=_("./stream/GenericWorker");E.STORE={magic:"\0\0",compressWorker:function(){return new S("STORE compression")},uncompressWorker:function(){return new S("STORE decompression")}},E.DEFLATE=_("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(_,x,E){var S=_("./utils"),C=function(){for(var T,B=[],A=0;A<256;A++){T=A;for(var I=0;I<8;I++)T=1&T?3988292384^T>>>1:T>>>1;B[A]=T}return B}();x.exports=function(T,B){return T!==void 0&&T.length?S.getTypeOf(T)!=="string"?function(A,I,D,M){var V=C,L=M+D;A^=-1;for(var F=M;F<L;F++)A=A>>>8^V[255&(A^I[F])];return-1^A}(0|B,T,T.length,0):function(A,I,D,M){var V=C,L=M+D;A^=-1;for(var F=M;F<L;F++)A=A>>>8^V[255&(A^I.charCodeAt(F))];return-1^A}(0|B,T,T.length,0):0}},{"./utils":32}],5:[function(_,x,E){E.base64=!1,E.binary=!1,E.dir=!1,E.createFolders=!0,E.date=null,E.compression=null,E.compressionOptions=null,E.comment=null,E.unixPermissions=null,E.dosPermissions=null},{}],6:[function(_,x,E){var S=null;S=typeof Promise<"u"?Promise:_("lie"),x.exports={Promise:S}},{lie:37}],7:[function(_,x,E){var S=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",C=_("pako"),T=_("./utils"),B=_("./stream/GenericWorker"),A=S?"uint8array":"array";function I(D,M){B.call(this,"FlateWorker/"+D),this._pako=null,this._pakoAction=D,this._pakoOptions=M,this.meta={}}E.magic="\b\0",T.inherits(I,B),I.prototype.processChunk=function(D){this.meta=D.meta,this._pako===null&&this._createPako(),this._pako.push(T.transformTo(A,D.data),!1)},I.prototype.flush=function(){B.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},I.prototype.cleanUp=function(){B.prototype.cleanUp.call(this),this._pako=null},I.prototype._createPako=function(){this._pako=new C[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var D=this;this._pako.onData=function(M){D.push({data:M,meta:D.meta})}},E.compressWorker=function(D){return new I("Deflate",D)},E.uncompressWorker=function(){return new I("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(_,x,E){function S(V,L){var F,j="";for(F=0;F<L;F++)j+=String.fromCharCode(255&V),V>>>=8;return j}function C(V,L,F,j,U,H){var Y,Z,ne=V.file,re=V.compression,X=H!==A.utf8encode,ce=T.transformTo("string",H(ne.name)),ue=T.transformTo("string",A.utf8encode(ne.name)),_e=ne.comment,ye=T.transformTo("string",H(_e)),ie=T.transformTo("string",A.utf8encode(_e)),W=ue.length!==ne.name.length,O=ie.length!==_e.length,z="",J="",ee="",ae=ne.dir,oe=ne.date,se={crc32:0,compressedSize:0,uncompressedSize:0};L&&!F||(se.crc32=V.crc32,se.compressedSize=V.compressedSize,se.uncompressedSize=V.uncompressedSize);var G=0;L&&(G|=8),X||!W&&!O||(G|=2048);var q=0,te=0;ae&&(q|=16),U==="UNIX"?(te=798,q|=function(he,Ee){var we=he;return he||(we=Ee?16893:33204),(65535&we)<<16}(ne.unixPermissions,ae)):(te=20,q|=function(he){return 63&(he||0)}(ne.dosPermissions)),Y=oe.getUTCHours(),Y<<=6,Y|=oe.getUTCMinutes(),Y<<=5,Y|=oe.getUTCSeconds()/2,Z=oe.getUTCFullYear()-1980,Z<<=4,Z|=oe.getUTCMonth()+1,Z<<=5,Z|=oe.getUTCDate(),W&&(J=S(1,1)+S(I(ce),4)+ue,z+="up"+S(J.length,2)+J),O&&(ee=S(1,1)+S(I(ye),4)+ie,z+="uc"+S(ee.length,2)+ee);var fe="";return fe+=`
\0`,fe+=S(G,2),fe+=re.magic,fe+=S(Y,2),fe+=S(Z,2),fe+=S(se.crc32,4),fe+=S(se.compressedSize,4),fe+=S(se.uncompressedSize,4),fe+=S(ce.length,2),fe+=S(z.length,2),{fileRecord:D.LOCAL_FILE_HEADER+fe+ce+z,dirRecord:D.CENTRAL_FILE_HEADER+S(te,2)+fe+S(ye.length,2)+"\0\0\0\0"+S(q,4)+S(j,4)+ce+z+ye}}var T=_("../utils"),B=_("../stream/GenericWorker"),A=_("../utf8"),I=_("../crc32"),D=_("../signature");function M(V,L,F,j){B.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=L,this.zipPlatform=F,this.encodeFileName=j,this.streamFiles=V,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}T.inherits(M,B),M.prototype.push=function(V){var L=V.meta.percent||0,F=this.entriesCount,j=this._sources.length;this.accumulate?this.contentBuffer.push(V):(this.bytesWritten+=V.data.length,B.prototype.push.call(this,{data:V.data,meta:{currentFile:this.currentFile,percent:F?(L+100*(F-j-1))/F:100}}))},M.prototype.openedSource=function(V){this.currentSourceOffset=this.bytesWritten,this.currentFile=V.file.name;var L=this.streamFiles&&!V.file.dir;if(L){var F=C(V,L,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:F.fileRecord,meta:{percent:0}})}else this.accumulate=!0},M.prototype.closedSource=function(V){this.accumulate=!1;var L=this.streamFiles&&!V.file.dir,F=C(V,L,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(F.dirRecord),L)this.push({data:function(j){return D.DATA_DESCRIPTOR+S(j.crc32,4)+S(j.compressedSize,4)+S(j.uncompressedSize,4)}(V),meta:{percent:100}});else for(this.push({data:F.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},M.prototype.flush=function(){for(var V=this.bytesWritten,L=0;L<this.dirRecords.length;L++)this.push({data:this.dirRecords[L],meta:{percent:100}});var F=this.bytesWritten-V,j=function(U,H,Y,Z,ne){var re=T.transformTo("string",ne(Z));return D.CENTRAL_DIRECTORY_END+"\0\0\0\0"+S(U,2)+S(U,2)+S(H,4)+S(Y,4)+S(re.length,2)+re}(this.dirRecords.length,F,V,this.zipComment,this.encodeFileName);this.push({data:j,meta:{percent:100}})},M.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},M.prototype.registerPrevious=function(V){this._sources.push(V);var L=this;return V.on("data",function(F){L.processChunk(F)}),V.on("end",function(){L.closedSource(L.previous.streamInfo),L._sources.length?L.prepareNextSource():L.end()}),V.on("error",function(F){L.error(F)}),this},M.prototype.resume=function(){return!!B.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},M.prototype.error=function(V){var L=this._sources;if(!B.prototype.error.call(this,V))return!1;for(var F=0;F<L.length;F++)try{L[F].error(V)}catch{}return!0},M.prototype.lock=function(){B.prototype.lock.call(this);for(var V=this._sources,L=0;L<V.length;L++)V[L].lock()},x.exports=M},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(_,x,E){var S=_("../compressions"),C=_("./ZipFileWorker");E.generateWorker=function(T,B,A){var I=new C(B.streamFiles,A,B.platform,B.encodeFileName),D=0;try{T.forEach(function(M,V){D++;var L=function(H,Y){var Z=H||Y,ne=S[Z];if(!ne)throw new Error(Z+" is not a valid compression method !");return ne}(V.options.compression,B.compression),F=V.options.compressionOptions||B.compressionOptions||{},j=V.dir,U=V.date;V._compressWorker(L,F).withStreamInfo("file",{name:M,dir:j,date:U,comment:V.comment||"",unixPermissions:V.unixPermissions,dosPermissions:V.dosPermissions}).pipe(I)}),I.entriesCount=D}catch(M){I.error(M)}return I}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(_,x,E){function S(){if(!(this instanceof S))return new S;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var C=new S;for(var T in this)typeof this[T]!="function"&&(C[T]=this[T]);return C}}(S.prototype=_("./object")).loadAsync=_("./load"),S.support=_("./support"),S.defaults=_("./defaults"),S.version="3.10.1",S.loadAsync=function(C,T){return new S().loadAsync(C,T)},S.external=_("./external"),x.exports=S},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(_,x,E){var S=_("./utils"),C=_("./external"),T=_("./utf8"),B=_("./zipEntries"),A=_("./stream/Crc32Probe"),I=_("./nodejsUtils");function D(M){return new C.Promise(function(V,L){var F=M.decompressed.getContentWorker().pipe(new A);F.on("error",function(j){L(j)}).on("end",function(){F.streamInfo.crc32!==M.decompressed.crc32?L(new Error("Corrupted zip : CRC32 mismatch")):V()}).resume()})}x.exports=function(M,V){var L=this;return V=S.extend(V||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:T.utf8decode}),I.isNode&&I.isStream(M)?C.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):S.prepareContent("the loaded zip file",M,!0,V.optimizedBinaryString,V.base64).then(function(F){var j=new B(V);return j.load(F),j}).then(function(F){var j=[C.Promise.resolve(F)],U=F.files;if(V.checkCRC32)for(var H=0;H<U.length;H++)j.push(D(U[H]));return C.Promise.all(j)}).then(function(F){for(var j=F.shift(),U=j.files,H=0;H<U.length;H++){var Y=U[H],Z=Y.fileNameStr,ne=S.resolve(Y.fileNameStr);L.file(ne,Y.decompressed,{binary:!0,optimizedBinaryString:!0,date:Y.date,dir:Y.dir,comment:Y.fileCommentStr.length?Y.fileCommentStr:null,unixPermissions:Y.unixPermissions,dosPermissions:Y.dosPermissions,createFolders:V.createFolders}),Y.dir||(L.file(ne).unsafeOriginalName=Z)}return j.zipComment.length&&(L.comment=j.zipComment),L})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(_,x,E){var S=_("../utils"),C=_("../stream/GenericWorker");function T(B,A){C.call(this,"Nodejs stream input adapter for "+B),this._upstreamEnded=!1,this._bindStream(A)}S.inherits(T,C),T.prototype._bindStream=function(B){var A=this;(this._stream=B).pause(),B.on("data",function(I){A.push({data:I,meta:{percent:0}})}).on("error",function(I){A.isPaused?this.generatedError=I:A.error(I)}).on("end",function(){A.isPaused?A._upstreamEnded=!0:A.end()})},T.prototype.pause=function(){return!!C.prototype.pause.call(this)&&(this._stream.pause(),!0)},T.prototype.resume=function(){return!!C.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},x.exports=T},{"../stream/GenericWorker":28,"../utils":32}],13:[function(_,x,E){var S=_("readable-stream").Readable;function C(T,B,A){S.call(this,B),this._helper=T;var I=this;T.on("data",function(D,M){I.push(D)||I._helper.pause(),A&&A(M)}).on("error",function(D){I.emit("error",D)}).on("end",function(){I.push(null)})}_("../utils").inherits(C,S),C.prototype._read=function(){this._helper.resume()},x.exports=C},{"../utils":32,"readable-stream":16}],14:[function(_,x,E){x.exports={isNode:typeof Buffer$5<"u",newBufferFrom:function(S,C){if(Buffer$5.from&&Buffer$5.from!==Uint8Array.from)return Buffer$5.from(S,C);if(typeof S=="number")throw new Error('The "data" argument must not be a number');return new Buffer$5(S,C)},allocBuffer:function(S){if(Buffer$5.alloc)return Buffer$5.alloc(S);var C=new Buffer$5(S);return C.fill(0),C},isBuffer:function(S){return Buffer$5.isBuffer(S)},isStream:function(S){return S&&typeof S.on=="function"&&typeof S.pause=="function"&&typeof S.resume=="function"}}},{}],15:[function(_,x,E){function S(ne,re,X){var ce,ue=T.getTypeOf(re),_e=T.extend(X||{},I);_e.date=_e.date||new Date,_e.compression!==null&&(_e.compression=_e.compression.toUpperCase()),typeof _e.unixPermissions=="string"&&(_e.unixPermissions=parseInt(_e.unixPermissions,8)),_e.unixPermissions&&16384&_e.unixPermissions&&(_e.dir=!0),_e.dosPermissions&&16&_e.dosPermissions&&(_e.dir=!0),_e.dir&&(ne=U(ne)),_e.createFolders&&(ce=j(ne))&&H.call(this,ce,!0);var ye=ue==="string"&&_e.binary===!1&&_e.base64===!1;X&&X.binary!==void 0||(_e.binary=!ye),(re instanceof D&&re.uncompressedSize===0||_e.dir||!re||re.length===0)&&(_e.base64=!1,_e.binary=!0,re="",_e.compression="STORE",ue="string");var ie=null;ie=re instanceof D||re instanceof B?re:L.isNode&&L.isStream(re)?new F(ne,re):T.prepareContent(ne,re,_e.binary,_e.optimizedBinaryString,_e.base64);var W=new M(ne,ie,_e);this.files[ne]=W}var C=_("./utf8"),T=_("./utils"),B=_("./stream/GenericWorker"),A=_("./stream/StreamHelper"),I=_("./defaults"),D=_("./compressedObject"),M=_("./zipObject"),V=_("./generate"),L=_("./nodejsUtils"),F=_("./nodejs/NodejsStreamInputAdapter"),j=function(ne){ne.slice(-1)==="/"&&(ne=ne.substring(0,ne.length-1));var re=ne.lastIndexOf("/");return 0<re?ne.substring(0,re):""},U=function(ne){return ne.slice(-1)!=="/"&&(ne+="/"),ne},H=function(ne,re){return re=re!==void 0?re:I.createFolders,ne=U(ne),this.files[ne]||S.call(this,ne,null,{dir:!0,createFolders:re}),this.files[ne]};function Y(ne){return Object.prototype.toString.call(ne)==="[object RegExp]"}var Z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ne){var re,X,ce;for(re in this.files)ce=this.files[re],(X=re.slice(this.root.length,re.length))&&re.slice(0,this.root.length)===this.root&&ne(X,ce)},filter:function(ne){var re=[];return this.forEach(function(X,ce){ne(X,ce)&&re.push(ce)}),re},file:function(ne,re,X){if(arguments.length!==1)return ne=this.root+ne,S.call(this,ne,re,X),this;if(Y(ne)){var ce=ne;return this.filter(function(_e,ye){return!ye.dir&&ce.test(_e)})}var ue=this.files[this.root+ne];return ue&&!ue.dir?ue:null},folder:function(ne){if(!ne)return this;if(Y(ne))return this.filter(function(ue,_e){return _e.dir&&ne.test(ue)});var re=this.root+ne,X=H.call(this,re),ce=this.clone();return ce.root=X.name,ce},remove:function(ne){ne=this.root+ne;var re=this.files[ne];if(re||(ne.slice(-1)!=="/"&&(ne+="/"),re=this.files[ne]),re&&!re.dir)delete this.files[ne];else for(var X=this.filter(function(ue,_e){return _e.name.slice(0,ne.length)===ne}),ce=0;ce<X.length;ce++)delete this.files[X[ce].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ne){var re,X={};try{if((X=T.extend(ne||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:C.utf8encode})).type=X.type.toLowerCase(),X.compression=X.compression.toUpperCase(),X.type==="binarystring"&&(X.type="string"),!X.type)throw new Error("No output type specified.");T.checkSupport(X.type),X.platform!=="darwin"&&X.platform!=="freebsd"&&X.platform!=="linux"&&X.platform!=="sunos"||(X.platform="UNIX"),X.platform==="win32"&&(X.platform="DOS");var ce=X.comment||this.comment||"";re=V.generateWorker(this,X,ce)}catch(ue){(re=new B("error")).error(ue)}return new A(re,X.type||"string",X.mimeType)},generateAsync:function(ne,re){return this.generateInternalStream(ne).accumulate(re)},generateNodeStream:function(ne,re){return(ne=ne||{}).type||(ne.type="nodebuffer"),this.generateInternalStream(ne).toNodejsStream(re)}};x.exports=Z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(_,x,E){x.exports=_("stream")},{stream:void 0}],17:[function(_,x,E){var S=_("./DataReader");function C(T){S.call(this,T);for(var B=0;B<this.data.length;B++)T[B]=255&T[B]}_("../utils").inherits(C,S),C.prototype.byteAt=function(T){return this.data[this.zero+T]},C.prototype.lastIndexOfSignature=function(T){for(var B=T.charCodeAt(0),A=T.charCodeAt(1),I=T.charCodeAt(2),D=T.charCodeAt(3),M=this.length-4;0<=M;--M)if(this.data[M]===B&&this.data[M+1]===A&&this.data[M+2]===I&&this.data[M+3]===D)return M-this.zero;return-1},C.prototype.readAndCheckSignature=function(T){var B=T.charCodeAt(0),A=T.charCodeAt(1),I=T.charCodeAt(2),D=T.charCodeAt(3),M=this.readData(4);return B===M[0]&&A===M[1]&&I===M[2]&&D===M[3]},C.prototype.readData=function(T){if(this.checkOffset(T),T===0)return[];var B=this.data.slice(this.zero+this.index,this.zero+this.index+T);return this.index+=T,B},x.exports=C},{"../utils":32,"./DataReader":18}],18:[function(_,x,E){var S=_("../utils");function C(T){this.data=T,this.length=T.length,this.index=0,this.zero=0}C.prototype={checkOffset:function(T){this.checkIndex(this.index+T)},checkIndex:function(T){if(this.length<this.zero+T||T<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+T+"). Corrupted zip ?")},setIndex:function(T){this.checkIndex(T),this.index=T},skip:function(T){this.setIndex(this.index+T)},byteAt:function(){},readInt:function(T){var B,A=0;for(this.checkOffset(T),B=this.index+T-1;B>=this.index;B--)A=(A<<8)+this.byteAt(B);return this.index+=T,A},readString:function(T){return S.transformTo("string",this.readData(T))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var T=this.readInt(4);return new Date(Date.UTC(1980+(T>>25&127),(T>>21&15)-1,T>>16&31,T>>11&31,T>>5&63,(31&T)<<1))}},x.exports=C},{"../utils":32}],19:[function(_,x,E){var S=_("./Uint8ArrayReader");function C(T){S.call(this,T)}_("../utils").inherits(C,S),C.prototype.readData=function(T){this.checkOffset(T);var B=this.data.slice(this.zero+this.index,this.zero+this.index+T);return this.index+=T,B},x.exports=C},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(_,x,E){var S=_("./DataReader");function C(T){S.call(this,T)}_("../utils").inherits(C,S),C.prototype.byteAt=function(T){return this.data.charCodeAt(this.zero+T)},C.prototype.lastIndexOfSignature=function(T){return this.data.lastIndexOf(T)-this.zero},C.prototype.readAndCheckSignature=function(T){return T===this.readData(4)},C.prototype.readData=function(T){this.checkOffset(T);var B=this.data.slice(this.zero+this.index,this.zero+this.index+T);return this.index+=T,B},x.exports=C},{"../utils":32,"./DataReader":18}],21:[function(_,x,E){var S=_("./ArrayReader");function C(T){S.call(this,T)}_("../utils").inherits(C,S),C.prototype.readData=function(T){if(this.checkOffset(T),T===0)return new Uint8Array(0);var B=this.data.subarray(this.zero+this.index,this.zero+this.index+T);return this.index+=T,B},x.exports=C},{"../utils":32,"./ArrayReader":17}],22:[function(_,x,E){var S=_("../utils"),C=_("../support"),T=_("./ArrayReader"),B=_("./StringReader"),A=_("./NodeBufferReader"),I=_("./Uint8ArrayReader");x.exports=function(D){var M=S.getTypeOf(D);return S.checkSupport(M),M!=="string"||C.uint8array?M==="nodebuffer"?new A(D):C.uint8array?new I(S.transformTo("uint8array",D)):new T(S.transformTo("array",D)):new B(D)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(_,x,E){E.LOCAL_FILE_HEADER="PK",E.CENTRAL_FILE_HEADER="PK",E.CENTRAL_DIRECTORY_END="PK",E.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",E.ZIP64_CENTRAL_DIRECTORY_END="PK",E.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(_,x,E){var S=_("./GenericWorker"),C=_("../utils");function T(B){S.call(this,"ConvertWorker to "+B),this.destType=B}C.inherits(T,S),T.prototype.processChunk=function(B){this.push({data:C.transformTo(this.destType,B.data),meta:B.meta})},x.exports=T},{"../utils":32,"./GenericWorker":28}],25:[function(_,x,E){var S=_("./GenericWorker"),C=_("../crc32");function T(){S.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}_("../utils").inherits(T,S),T.prototype.processChunk=function(B){this.streamInfo.crc32=C(B.data,this.streamInfo.crc32||0),this.push(B)},x.exports=T},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(_,x,E){var S=_("../utils"),C=_("./GenericWorker");function T(B){C.call(this,"DataLengthProbe for "+B),this.propName=B,this.withStreamInfo(B,0)}S.inherits(T,C),T.prototype.processChunk=function(B){if(B){var A=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=A+B.data.length}C.prototype.processChunk.call(this,B)},x.exports=T},{"../utils":32,"./GenericWorker":28}],27:[function(_,x,E){var S=_("../utils"),C=_("./GenericWorker");function T(B){C.call(this,"DataWorker");var A=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,B.then(function(I){A.dataIsReady=!0,A.data=I,A.max=I&&I.length||0,A.type=S.getTypeOf(I),A.isPaused||A._tickAndRepeat()},function(I){A.error(I)})}S.inherits(T,C),T.prototype.cleanUp=function(){C.prototype.cleanUp.call(this),this.data=null},T.prototype.resume=function(){return!!C.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,S.delay(this._tickAndRepeat,[],this)),!0)},T.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(S.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},T.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var B=null,A=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":B=this.data.substring(this.index,A);break;case"uint8array":B=this.data.subarray(this.index,A);break;case"array":case"nodebuffer":B=this.data.slice(this.index,A)}return this.index=A,this.push({data:B,meta:{percent:this.max?this.index/this.max*100:0}})},x.exports=T},{"../utils":32,"./GenericWorker":28}],28:[function(_,x,E){function S(C){this.name=C||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}S.prototype={push:function(C){this.emit("data",C)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(C){this.emit("error",C)}return!0},error:function(C){return!this.isFinished&&(this.isPaused?this.generatedError=C:(this.isFinished=!0,this.emit("error",C),this.previous&&this.previous.error(C),this.cleanUp()),!0)},on:function(C,T){return this._listeners[C].push(T),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(C,T){if(this._listeners[C])for(var B=0;B<this._listeners[C].length;B++)this._listeners[C][B].call(this,T)},pipe:function(C){return C.registerPrevious(this)},registerPrevious:function(C){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=C.streamInfo,this.mergeStreamInfo(),this.previous=C;var T=this;return C.on("data",function(B){T.processChunk(B)}),C.on("end",function(){T.end()}),C.on("error",function(B){T.error(B)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var C=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),C=!0),this.previous&&this.previous.resume(),!C},flush:function(){},processChunk:function(C){this.push(C)},withStreamInfo:function(C,T){return this.extraStreamInfo[C]=T,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var C in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,C)&&(this.streamInfo[C]=this.extraStreamInfo[C])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var C="Worker "+this.name;return this.previous?this.previous+" -> "+C:C}},x.exports=S},{}],29:[function(_,x,E){var S=_("../utils"),C=_("./ConvertWorker"),T=_("./GenericWorker"),B=_("../base64"),A=_("../support"),I=_("../external"),D=null;if(A.nodestream)try{D=_("../nodejs/NodejsStreamOutputAdapter")}catch{}function M(L,F){return new I.Promise(function(j,U){var H=[],Y=L._internalType,Z=L._outputType,ne=L._mimeType;L.on("data",function(re,X){H.push(re),F&&F(X)}).on("error",function(re){H=[],U(re)}).on("end",function(){try{var re=function(X,ce,ue){switch(X){case"blob":return S.newBlob(S.transformTo("arraybuffer",ce),ue);case"base64":return B.encode(ce);default:return S.transformTo(X,ce)}}(Z,function(X,ce){var ue,_e=0,ye=null,ie=0;for(ue=0;ue<ce.length;ue++)ie+=ce[ue].length;switch(X){case"string":return ce.join("");case"array":return Array.prototype.concat.apply([],ce);case"uint8array":for(ye=new Uint8Array(ie),ue=0;ue<ce.length;ue++)ye.set(ce[ue],_e),_e+=ce[ue].length;return ye;case"nodebuffer":return Buffer$5.concat(ce);default:throw new Error("concat : unsupported type '"+X+"'")}}(Y,H),ne);j(re)}catch(X){U(X)}H=[]}).resume()})}function V(L,F,j){var U=F;switch(F){case"blob":case"arraybuffer":U="uint8array";break;case"base64":U="string"}try{this._internalType=U,this._outputType=F,this._mimeType=j,S.checkSupport(U),this._worker=L.pipe(new C(U)),L.lock()}catch(H){this._worker=new T("error"),this._worker.error(H)}}V.prototype={accumulate:function(L){return M(this,L)},on:function(L,F){var j=this;return L==="data"?this._worker.on(L,function(U){F.call(j,U.data,U.meta)}):this._worker.on(L,function(){S.delay(F,arguments,j)}),this},resume:function(){return S.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(L){if(S.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new D(this,{objectMode:this._outputType!=="nodebuffer"},L)}},x.exports=V},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(_,x,E){if(E.base64=!0,E.array=!0,E.string=!0,E.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",E.nodebuffer=typeof Buffer$5<"u",E.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")E.blob=!1;else{var S=new ArrayBuffer(0);try{E.blob=new Blob([S],{type:"application/zip"}).size===0}catch{try{var C=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);C.append(S),E.blob=C.getBlob("application/zip").size===0}catch{E.blob=!1}}}try{E.nodestream=!!_("readable-stream").Readable}catch{E.nodestream=!1}},{"readable-stream":16}],31:[function(_,x,E){for(var S=_("./utils"),C=_("./support"),T=_("./nodejsUtils"),B=_("./stream/GenericWorker"),A=new Array(256),I=0;I<256;I++)A[I]=252<=I?6:248<=I?5:240<=I?4:224<=I?3:192<=I?2:1;A[254]=A[254]=1;function D(){B.call(this,"utf-8 decode"),this.leftOver=null}function M(){B.call(this,"utf-8 encode")}E.utf8encode=function(V){return C.nodebuffer?T.newBufferFrom(V,"utf-8"):function(L){var F,j,U,H,Y,Z=L.length,ne=0;for(H=0;H<Z;H++)(64512&(j=L.charCodeAt(H)))==55296&&H+1<Z&&(64512&(U=L.charCodeAt(H+1)))==56320&&(j=65536+(j-55296<<10)+(U-56320),H++),ne+=j<128?1:j<2048?2:j<65536?3:4;for(F=C.uint8array?new Uint8Array(ne):new Array(ne),H=Y=0;Y<ne;H++)(64512&(j=L.charCodeAt(H)))==55296&&H+1<Z&&(64512&(U=L.charCodeAt(H+1)))==56320&&(j=65536+(j-55296<<10)+(U-56320),H++),j<128?F[Y++]=j:(j<2048?F[Y++]=192|j>>>6:(j<65536?F[Y++]=224|j>>>12:(F[Y++]=240|j>>>18,F[Y++]=128|j>>>12&63),F[Y++]=128|j>>>6&63),F[Y++]=128|63&j);return F}(V)},E.utf8decode=function(V){return C.nodebuffer?S.transformTo("nodebuffer",V).toString("utf-8"):function(L){var F,j,U,H,Y=L.length,Z=new Array(2*Y);for(F=j=0;F<Y;)if((U=L[F++])<128)Z[j++]=U;else if(4<(H=A[U]))Z[j++]=65533,F+=H-1;else{for(U&=H===2?31:H===3?15:7;1<H&&F<Y;)U=U<<6|63&L[F++],H--;1<H?Z[j++]=65533:U<65536?Z[j++]=U:(U-=65536,Z[j++]=55296|U>>10&1023,Z[j++]=56320|1023&U)}return Z.length!==j&&(Z.subarray?Z=Z.subarray(0,j):Z.length=j),S.applyFromCharCode(Z)}(V=S.transformTo(C.uint8array?"uint8array":"array",V))},S.inherits(D,B),D.prototype.processChunk=function(V){var L=S.transformTo(C.uint8array?"uint8array":"array",V.data);if(this.leftOver&&this.leftOver.length){if(C.uint8array){var F=L;(L=new Uint8Array(F.length+this.leftOver.length)).set(this.leftOver,0),L.set(F,this.leftOver.length)}else L=this.leftOver.concat(L);this.leftOver=null}var j=function(H,Y){var Z;for((Y=Y||H.length)>H.length&&(Y=H.length),Z=Y-1;0<=Z&&(192&H[Z])==128;)Z--;return Z<0||Z===0?Y:Z+A[H[Z]]>Y?Z:Y}(L),U=L;j!==L.length&&(C.uint8array?(U=L.subarray(0,j),this.leftOver=L.subarray(j,L.length)):(U=L.slice(0,j),this.leftOver=L.slice(j,L.length))),this.push({data:E.utf8decode(U),meta:V.meta})},D.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:E.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},E.Utf8DecodeWorker=D,S.inherits(M,B),M.prototype.processChunk=function(V){this.push({data:E.utf8encode(V.data),meta:V.meta})},E.Utf8EncodeWorker=M},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(_,x,E){var S=_("./support"),C=_("./base64"),T=_("./nodejsUtils"),B=_("./external");function A(F){return F}function I(F,j){for(var U=0;U<F.length;++U)j[U]=255&F.charCodeAt(U);return j}_("setimmediate"),E.newBlob=function(F,j){E.checkSupport("blob");try{return new Blob([F],{type:j})}catch{try{var U=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return U.append(F),U.getBlob(j)}catch{throw new Error("Bug : can't construct the Blob.")}}};var D={stringifyByChunk:function(F,j,U){var H=[],Y=0,Z=F.length;if(Z<=U)return String.fromCharCode.apply(null,F);for(;Y<Z;)j==="array"||j==="nodebuffer"?H.push(String.fromCharCode.apply(null,F.slice(Y,Math.min(Y+U,Z)))):H.push(String.fromCharCode.apply(null,F.subarray(Y,Math.min(Y+U,Z)))),Y+=U;return H.join("")},stringifyByChar:function(F){for(var j="",U=0;U<F.length;U++)j+=String.fromCharCode(F[U]);return j},applyCanBeUsed:{uint8array:function(){try{return S.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return S.nodebuffer&&String.fromCharCode.apply(null,T.allocBuffer(1)).length===1}catch{return!1}}()}};function M(F){var j=65536,U=E.getTypeOf(F),H=!0;if(U==="uint8array"?H=D.applyCanBeUsed.uint8array:U==="nodebuffer"&&(H=D.applyCanBeUsed.nodebuffer),H)for(;1<j;)try{return D.stringifyByChunk(F,U,j)}catch{j=Math.floor(j/2)}return D.stringifyByChar(F)}function V(F,j){for(var U=0;U<F.length;U++)j[U]=F[U];return j}E.applyFromCharCode=M;var L={};L.string={string:A,array:function(F){return I(F,new Array(F.length))},arraybuffer:function(F){return L.string.uint8array(F).buffer},uint8array:function(F){return I(F,new Uint8Array(F.length))},nodebuffer:function(F){return I(F,T.allocBuffer(F.length))}},L.array={string:M,array:A,arraybuffer:function(F){return new Uint8Array(F).buffer},uint8array:function(F){return new Uint8Array(F)},nodebuffer:function(F){return T.newBufferFrom(F)}},L.arraybuffer={string:function(F){return M(new Uint8Array(F))},array:function(F){return V(new Uint8Array(F),new Array(F.byteLength))},arraybuffer:A,uint8array:function(F){return new Uint8Array(F)},nodebuffer:function(F){return T.newBufferFrom(new Uint8Array(F))}},L.uint8array={string:M,array:function(F){return V(F,new Array(F.length))},arraybuffer:function(F){return F.buffer},uint8array:A,nodebuffer:function(F){return T.newBufferFrom(F)}},L.nodebuffer={string:M,array:function(F){return V(F,new Array(F.length))},arraybuffer:function(F){return L.nodebuffer.uint8array(F).buffer},uint8array:function(F){return V(F,new Uint8Array(F.length))},nodebuffer:A},E.transformTo=function(F,j){if(j=j||"",!F)return j;E.checkSupport(F);var U=E.getTypeOf(j);return L[U][F](j)},E.resolve=function(F){for(var j=F.split("/"),U=[],H=0;H<j.length;H++){var Y=j[H];Y==="."||Y===""&&H!==0&&H!==j.length-1||(Y===".."?U.pop():U.push(Y))}return U.join("/")},E.getTypeOf=function(F){return typeof F=="string"?"string":Object.prototype.toString.call(F)==="[object Array]"?"array":S.nodebuffer&&T.isBuffer(F)?"nodebuffer":S.uint8array&&F instanceof Uint8Array?"uint8array":S.arraybuffer&&F instanceof ArrayBuffer?"arraybuffer":void 0},E.checkSupport=function(F){if(!S[F.toLowerCase()])throw new Error(F+" is not supported by this platform")},E.MAX_VALUE_16BITS=65535,E.MAX_VALUE_32BITS=-1,E.pretty=function(F){var j,U,H="";for(U=0;U<(F||"").length;U++)H+="\\x"+((j=F.charCodeAt(U))<16?"0":"")+j.toString(16).toUpperCase();return H},E.delay=function(F,j,U){setImmediate(function(){F.apply(U||null,j||[])})},E.inherits=function(F,j){function U(){}U.prototype=j.prototype,F.prototype=new U},E.extend=function(){var F,j,U={};for(F=0;F<arguments.length;F++)for(j in arguments[F])Object.prototype.hasOwnProperty.call(arguments[F],j)&&U[j]===void 0&&(U[j]=arguments[F][j]);return U},E.prepareContent=function(F,j,U,H,Y){return B.Promise.resolve(j).then(function(Z){return S.blob&&(Z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Z))!==-1)&&typeof FileReader<"u"?new B.Promise(function(ne,re){var X=new FileReader;X.onload=function(ce){ne(ce.target.result)},X.onerror=function(ce){re(ce.target.error)},X.readAsArrayBuffer(Z)}):Z}).then(function(Z){var ne=E.getTypeOf(Z);return ne?(ne==="arraybuffer"?Z=E.transformTo("uint8array",Z):ne==="string"&&(Y?Z=C.decode(Z):U&&H!==!0&&(Z=function(re){return I(re,S.uint8array?new Uint8Array(re.length):new Array(re.length))}(Z))),Z):B.Promise.reject(new Error("Can't read the data of '"+F+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(_,x,E){var S=_("./reader/readerFor"),C=_("./utils"),T=_("./signature"),B=_("./zipEntry"),A=_("./support");function I(D){this.files=[],this.loadOptions=D}I.prototype={checkSignature:function(D){if(!this.reader.readAndCheckSignature(D)){this.reader.index-=4;var M=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+C.pretty(M)+", expected "+C.pretty(D)+")")}},isSignature:function(D,M){var V=this.reader.index;this.reader.setIndex(D);var L=this.reader.readString(4)===M;return this.reader.setIndex(V),L},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var D=this.reader.readData(this.zipCommentLength),M=A.uint8array?"uint8array":"array",V=C.transformTo(M,D);this.zipComment=this.loadOptions.decodeFileName(V)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var D,M,V,L=this.zip64EndOfCentralSize-44;0<L;)D=this.reader.readInt(2),M=this.reader.readInt(4),V=this.reader.readData(M),this.zip64ExtensibleData[D]={id:D,length:M,value:V}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var D,M;for(D=0;D<this.files.length;D++)M=this.files[D],this.reader.setIndex(M.localHeaderOffset),this.checkSignature(T.LOCAL_FILE_HEADER),M.readLocalPart(this.reader),M.handleUTF8(),M.processAttributes()},readCentralDir:function(){var D;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(T.CENTRAL_FILE_HEADER);)(D=new B({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(D);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var D=this.reader.lastIndexOfSignature(T.CENTRAL_DIRECTORY_END);if(D<0)throw this.isSignature(0,T.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(D);var M=D;if(this.checkSignature(T.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===C.MAX_VALUE_16BITS||this.diskWithCentralDirStart===C.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===C.MAX_VALUE_16BITS||this.centralDirRecords===C.MAX_VALUE_16BITS||this.centralDirSize===C.MAX_VALUE_32BITS||this.centralDirOffset===C.MAX_VALUE_32BITS){if(this.zip64=!0,(D=this.reader.lastIndexOfSignature(T.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(D),this.checkSignature(T.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,T.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(T.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(T.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var V=this.centralDirOffset+this.centralDirSize;this.zip64&&(V+=20,V+=12+this.zip64EndOfCentralSize);var L=M-V;if(0<L)this.isSignature(M,T.CENTRAL_FILE_HEADER)||(this.reader.zero=L);else if(L<0)throw new Error("Corrupted zip: missing "+Math.abs(L)+" bytes.")},prepareReader:function(D){this.reader=S(D)},load:function(D){this.prepareReader(D),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},x.exports=I},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(_,x,E){var S=_("./reader/readerFor"),C=_("./utils"),T=_("./compressedObject"),B=_("./crc32"),A=_("./utf8"),I=_("./compressions"),D=_("./support");function M(V,L){this.options=V,this.loadOptions=L}M.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(V){var L,F;if(V.skip(22),this.fileNameLength=V.readInt(2),F=V.readInt(2),this.fileName=V.readData(this.fileNameLength),V.skip(F),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((L=function(j){for(var U in I)if(Object.prototype.hasOwnProperty.call(I,U)&&I[U].magic===j)return I[U];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+C.pretty(this.compressionMethod)+" unknown (inner file : "+C.transformTo("string",this.fileName)+")");this.decompressed=new T(this.compressedSize,this.uncompressedSize,this.crc32,L,V.readData(this.compressedSize))},readCentralPart:function(V){this.versionMadeBy=V.readInt(2),V.skip(2),this.bitFlag=V.readInt(2),this.compressionMethod=V.readString(2),this.date=V.readDate(),this.crc32=V.readInt(4),this.compressedSize=V.readInt(4),this.uncompressedSize=V.readInt(4);var L=V.readInt(2);if(this.extraFieldsLength=V.readInt(2),this.fileCommentLength=V.readInt(2),this.diskNumberStart=V.readInt(2),this.internalFileAttributes=V.readInt(2),this.externalFileAttributes=V.readInt(4),this.localHeaderOffset=V.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");V.skip(L),this.readExtraFields(V),this.parseZIP64ExtraField(V),this.fileComment=V.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var V=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),V==0&&(this.dosPermissions=63&this.externalFileAttributes),V==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var V=S(this.extraFields[1].value);this.uncompressedSize===C.MAX_VALUE_32BITS&&(this.uncompressedSize=V.readInt(8)),this.compressedSize===C.MAX_VALUE_32BITS&&(this.compressedSize=V.readInt(8)),this.localHeaderOffset===C.MAX_VALUE_32BITS&&(this.localHeaderOffset=V.readInt(8)),this.diskNumberStart===C.MAX_VALUE_32BITS&&(this.diskNumberStart=V.readInt(4))}},readExtraFields:function(V){var L,F,j,U=V.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});V.index+4<U;)L=V.readInt(2),F=V.readInt(2),j=V.readData(F),this.extraFields[L]={id:L,length:F,value:j};V.setIndex(U)},handleUTF8:function(){var V=D.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=A.utf8decode(this.fileName),this.fileCommentStr=A.utf8decode(this.fileComment);else{var L=this.findExtraFieldUnicodePath();if(L!==null)this.fileNameStr=L;else{var F=C.transformTo(V,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(F)}var j=this.findExtraFieldUnicodeComment();if(j!==null)this.fileCommentStr=j;else{var U=C.transformTo(V,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(U)}}},findExtraFieldUnicodePath:function(){var V=this.extraFields[28789];if(V){var L=S(V.value);return L.readInt(1)!==1||B(this.fileName)!==L.readInt(4)?null:A.utf8decode(L.readData(V.length-5))}return null},findExtraFieldUnicodeComment:function(){var V=this.extraFields[25461];if(V){var L=S(V.value);return L.readInt(1)!==1||B(this.fileComment)!==L.readInt(4)?null:A.utf8decode(L.readData(V.length-5))}return null}},x.exports=M},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(_,x,E){function S(L,F,j){this.name=L,this.dir=j.dir,this.date=j.date,this.comment=j.comment,this.unixPermissions=j.unixPermissions,this.dosPermissions=j.dosPermissions,this._data=F,this._dataBinary=j.binary,this.options={compression:j.compression,compressionOptions:j.compressionOptions}}var C=_("./stream/StreamHelper"),T=_("./stream/DataWorker"),B=_("./utf8"),A=_("./compressedObject"),I=_("./stream/GenericWorker");S.prototype={internalStream:function(L){var F=null,j="string";try{if(!L)throw new Error("No output type specified.");var U=(j=L.toLowerCase())==="string"||j==="text";j!=="binarystring"&&j!=="text"||(j="string"),F=this._decompressWorker();var H=!this._dataBinary;H&&!U&&(F=F.pipe(new B.Utf8EncodeWorker)),!H&&U&&(F=F.pipe(new B.Utf8DecodeWorker))}catch(Y){(F=new I("error")).error(Y)}return new C(F,j,"")},async:function(L,F){return this.internalStream(L).accumulate(F)},nodeStream:function(L,F){return this.internalStream(L||"nodebuffer").toNodejsStream(F)},_compressWorker:function(L,F){if(this._data instanceof A&&this._data.compression.magic===L.magic)return this._data.getCompressedWorker();var j=this._decompressWorker();return this._dataBinary||(j=j.pipe(new B.Utf8EncodeWorker)),A.createWorkerFrom(j,L,F)},_decompressWorker:function(){return this._data instanceof A?this._data.getContentWorker():this._data instanceof I?this._data:new T(this._data)}};for(var D=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],M=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},V=0;V<D.length;V++)S.prototype[D[V]]=M;x.exports=S},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(_,x,E){(function(S){var C,T,B=S.MutationObserver||S.WebKitMutationObserver;if(B){var A=0,I=new B(L),D=S.document.createTextNode("");I.observe(D,{characterData:!0}),C=function(){D.data=A=++A%2}}else if(S.setImmediate||S.MessageChannel===void 0)C="document"in S&&"onreadystatechange"in S.document.createElement("script")?function(){var F=S.document.createElement("script");F.onreadystatechange=function(){L(),F.onreadystatechange=null,F.parentNode.removeChild(F),F=null},S.document.documentElement.appendChild(F)}:function(){setTimeout(L,0)};else{var M=new S.MessageChannel;M.port1.onmessage=L,C=function(){M.port2.postMessage(0)}}var V=[];function L(){var F,j;T=!0;for(var U=V.length;U;){for(j=V,V=[],F=-1;++F<U;)j[F]();U=V.length}T=!1}x.exports=function(F){V.push(F)!==1||T||C()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(_,x,E){var S=_("immediate");function C(){}var T={},B=["REJECTED"],A=["FULFILLED"],I=["PENDING"];function D(U){if(typeof U!="function")throw new TypeError("resolver must be a function");this.state=I,this.queue=[],this.outcome=void 0,U!==C&&F(this,U)}function M(U,H,Y){this.promise=U,typeof H=="function"&&(this.onFulfilled=H,this.callFulfilled=this.otherCallFulfilled),typeof Y=="function"&&(this.onRejected=Y,this.callRejected=this.otherCallRejected)}function V(U,H,Y){S(function(){var Z;try{Z=H(Y)}catch(ne){return T.reject(U,ne)}Z===U?T.reject(U,new TypeError("Cannot resolve promise with itself")):T.resolve(U,Z)})}function L(U){var H=U&&U.then;if(U&&(typeof U=="object"||typeof U=="function")&&typeof H=="function")return function(){H.apply(U,arguments)}}function F(U,H){var Y=!1;function Z(X){Y||(Y=!0,T.reject(U,X))}function ne(X){Y||(Y=!0,T.resolve(U,X))}var re=j(function(){H(ne,Z)});re.status==="error"&&Z(re.value)}function j(U,H){var Y={};try{Y.value=U(H),Y.status="success"}catch(Z){Y.status="error",Y.value=Z}return Y}(x.exports=D).prototype.finally=function(U){if(typeof U!="function")return this;var H=this.constructor;return this.then(function(Y){return H.resolve(U()).then(function(){return Y})},function(Y){return H.resolve(U()).then(function(){throw Y})})},D.prototype.catch=function(U){return this.then(null,U)},D.prototype.then=function(U,H){if(typeof U!="function"&&this.state===A||typeof H!="function"&&this.state===B)return this;var Y=new this.constructor(C);return this.state!==I?V(Y,this.state===A?U:H,this.outcome):this.queue.push(new M(Y,U,H)),Y},M.prototype.callFulfilled=function(U){T.resolve(this.promise,U)},M.prototype.otherCallFulfilled=function(U){V(this.promise,this.onFulfilled,U)},M.prototype.callRejected=function(U){T.reject(this.promise,U)},M.prototype.otherCallRejected=function(U){V(this.promise,this.onRejected,U)},T.resolve=function(U,H){var Y=j(L,H);if(Y.status==="error")return T.reject(U,Y.value);var Z=Y.value;if(Z)F(U,Z);else{U.state=A,U.outcome=H;for(var ne=-1,re=U.queue.length;++ne<re;)U.queue[ne].callFulfilled(H)}return U},T.reject=function(U,H){U.state=B,U.outcome=H;for(var Y=-1,Z=U.queue.length;++Y<Z;)U.queue[Y].callRejected(H);return U},D.resolve=function(U){return U instanceof this?U:T.resolve(new this(C),U)},D.reject=function(U){var H=new this(C);return T.reject(H,U)},D.all=function(U){var H=this;if(Object.prototype.toString.call(U)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Y=U.length,Z=!1;if(!Y)return this.resolve([]);for(var ne=new Array(Y),re=0,X=-1,ce=new this(C);++X<Y;)ue(U[X],X);return ce;function ue(_e,ye){H.resolve(_e).then(function(ie){ne[ye]=ie,++re!==Y||Z||(Z=!0,T.resolve(ce,ne))},function(ie){Z||(Z=!0,T.reject(ce,ie))})}},D.race=function(U){var H=this;if(Object.prototype.toString.call(U)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Y=U.length,Z=!1;if(!Y)return this.resolve([]);for(var ne=-1,re=new this(C);++ne<Y;)X=U[ne],H.resolve(X).then(function(ce){Z||(Z=!0,T.resolve(re,ce))},function(ce){Z||(Z=!0,T.reject(re,ce))});var X;return re}},{immediate:36}],38:[function(_,x,E){var S={};(0,_("./lib/utils/common").assign)(S,_("./lib/deflate"),_("./lib/inflate"),_("./lib/zlib/constants")),x.exports=S},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(_,x,E){var S=_("./zlib/deflate"),C=_("./utils/common"),T=_("./utils/strings"),B=_("./zlib/messages"),A=_("./zlib/zstream"),I=Object.prototype.toString,D=0,M=-1,V=0,L=8;function F(U){if(!(this instanceof F))return new F(U);this.options=C.assign({level:M,method:L,chunkSize:16384,windowBits:15,memLevel:8,strategy:V,to:""},U||{});var H=this.options;H.raw&&0<H.windowBits?H.windowBits=-H.windowBits:H.gzip&&0<H.windowBits&&H.windowBits<16&&(H.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var Y=S.deflateInit2(this.strm,H.level,H.method,H.windowBits,H.memLevel,H.strategy);if(Y!==D)throw new Error(B[Y]);if(H.header&&S.deflateSetHeader(this.strm,H.header),H.dictionary){var Z;if(Z=typeof H.dictionary=="string"?T.string2buf(H.dictionary):I.call(H.dictionary)==="[object ArrayBuffer]"?new Uint8Array(H.dictionary):H.dictionary,(Y=S.deflateSetDictionary(this.strm,Z))!==D)throw new Error(B[Y]);this._dict_set=!0}}function j(U,H){var Y=new F(H);if(Y.push(U,!0),Y.err)throw Y.msg||B[Y.err];return Y.result}F.prototype.push=function(U,H){var Y,Z,ne=this.strm,re=this.options.chunkSize;if(this.ended)return!1;Z=H===~~H?H:H===!0?4:0,typeof U=="string"?ne.input=T.string2buf(U):I.call(U)==="[object ArrayBuffer]"?ne.input=new Uint8Array(U):ne.input=U,ne.next_in=0,ne.avail_in=ne.input.length;do{if(ne.avail_out===0&&(ne.output=new C.Buf8(re),ne.next_out=0,ne.avail_out=re),(Y=S.deflate(ne,Z))!==1&&Y!==D)return this.onEnd(Y),!(this.ended=!0);ne.avail_out!==0&&(ne.avail_in!==0||Z!==4&&Z!==2)||(this.options.to==="string"?this.onData(T.buf2binstring(C.shrinkBuf(ne.output,ne.next_out))):this.onData(C.shrinkBuf(ne.output,ne.next_out)))}while((0<ne.avail_in||ne.avail_out===0)&&Y!==1);return Z===4?(Y=S.deflateEnd(this.strm),this.onEnd(Y),this.ended=!0,Y===D):Z!==2||(this.onEnd(D),!(ne.avail_out=0))},F.prototype.onData=function(U){this.chunks.push(U)},F.prototype.onEnd=function(U){U===D&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=C.flattenChunks(this.chunks)),this.chunks=[],this.err=U,this.msg=this.strm.msg},E.Deflate=F,E.deflate=j,E.deflateRaw=function(U,H){return(H=H||{}).raw=!0,j(U,H)},E.gzip=function(U,H){return(H=H||{}).gzip=!0,j(U,H)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(_,x,E){var S=_("./zlib/inflate"),C=_("./utils/common"),T=_("./utils/strings"),B=_("./zlib/constants"),A=_("./zlib/messages"),I=_("./zlib/zstream"),D=_("./zlib/gzheader"),M=Object.prototype.toString;function V(F){if(!(this instanceof V))return new V(F);this.options=C.assign({chunkSize:16384,windowBits:0,to:""},F||{});var j=this.options;j.raw&&0<=j.windowBits&&j.windowBits<16&&(j.windowBits=-j.windowBits,j.windowBits===0&&(j.windowBits=-15)),!(0<=j.windowBits&&j.windowBits<16)||F&&F.windowBits||(j.windowBits+=32),15<j.windowBits&&j.windowBits<48&&!(15&j.windowBits)&&(j.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new I,this.strm.avail_out=0;var U=S.inflateInit2(this.strm,j.windowBits);if(U!==B.Z_OK)throw new Error(A[U]);this.header=new D,S.inflateGetHeader(this.strm,this.header)}function L(F,j){var U=new V(j);if(U.push(F,!0),U.err)throw U.msg||A[U.err];return U.result}V.prototype.push=function(F,j){var U,H,Y,Z,ne,re,X=this.strm,ce=this.options.chunkSize,ue=this.options.dictionary,_e=!1;if(this.ended)return!1;H=j===~~j?j:j===!0?B.Z_FINISH:B.Z_NO_FLUSH,typeof F=="string"?X.input=T.binstring2buf(F):M.call(F)==="[object ArrayBuffer]"?X.input=new Uint8Array(F):X.input=F,X.next_in=0,X.avail_in=X.input.length;do{if(X.avail_out===0&&(X.output=new C.Buf8(ce),X.next_out=0,X.avail_out=ce),(U=S.inflate(X,B.Z_NO_FLUSH))===B.Z_NEED_DICT&&ue&&(re=typeof ue=="string"?T.string2buf(ue):M.call(ue)==="[object ArrayBuffer]"?new Uint8Array(ue):ue,U=S.inflateSetDictionary(this.strm,re)),U===B.Z_BUF_ERROR&&_e===!0&&(U=B.Z_OK,_e=!1),U!==B.Z_STREAM_END&&U!==B.Z_OK)return this.onEnd(U),!(this.ended=!0);X.next_out&&(X.avail_out!==0&&U!==B.Z_STREAM_END&&(X.avail_in!==0||H!==B.Z_FINISH&&H!==B.Z_SYNC_FLUSH)||(this.options.to==="string"?(Y=T.utf8border(X.output,X.next_out),Z=X.next_out-Y,ne=T.buf2string(X.output,Y),X.next_out=Z,X.avail_out=ce-Z,Z&&C.arraySet(X.output,X.output,Y,Z,0),this.onData(ne)):this.onData(C.shrinkBuf(X.output,X.next_out)))),X.avail_in===0&&X.avail_out===0&&(_e=!0)}while((0<X.avail_in||X.avail_out===0)&&U!==B.Z_STREAM_END);return U===B.Z_STREAM_END&&(H=B.Z_FINISH),H===B.Z_FINISH?(U=S.inflateEnd(this.strm),this.onEnd(U),this.ended=!0,U===B.Z_OK):H!==B.Z_SYNC_FLUSH||(this.onEnd(B.Z_OK),!(X.avail_out=0))},V.prototype.onData=function(F){this.chunks.push(F)},V.prototype.onEnd=function(F){F===B.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=C.flattenChunks(this.chunks)),this.chunks=[],this.err=F,this.msg=this.strm.msg},E.Inflate=V,E.inflate=L,E.inflateRaw=function(F,j){return(j=j||{}).raw=!0,L(F,j)},E.ungzip=L},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(_,x,E){var S=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";E.assign=function(B){for(var A=Array.prototype.slice.call(arguments,1);A.length;){var I=A.shift();if(I){if(typeof I!="object")throw new TypeError(I+"must be non-object");for(var D in I)I.hasOwnProperty(D)&&(B[D]=I[D])}}return B},E.shrinkBuf=function(B,A){return B.length===A?B:B.subarray?B.subarray(0,A):(B.length=A,B)};var C={arraySet:function(B,A,I,D,M){if(A.subarray&&B.subarray)B.set(A.subarray(I,I+D),M);else for(var V=0;V<D;V++)B[M+V]=A[I+V]},flattenChunks:function(B){var A,I,D,M,V,L;for(A=D=0,I=B.length;A<I;A++)D+=B[A].length;for(L=new Uint8Array(D),A=M=0,I=B.length;A<I;A++)V=B[A],L.set(V,M),M+=V.length;return L}},T={arraySet:function(B,A,I,D,M){for(var V=0;V<D;V++)B[M+V]=A[I+V]},flattenChunks:function(B){return[].concat.apply([],B)}};E.setTyped=function(B){B?(E.Buf8=Uint8Array,E.Buf16=Uint16Array,E.Buf32=Int32Array,E.assign(E,C)):(E.Buf8=Array,E.Buf16=Array,E.Buf32=Array,E.assign(E,T))},E.setTyped(S)},{}],42:[function(_,x,E){var S=_("./common"),C=!0,T=!0;try{String.fromCharCode.apply(null,[0])}catch{C=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{T=!1}for(var B=new S.Buf8(256),A=0;A<256;A++)B[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;function I(D,M){if(M<65537&&(D.subarray&&T||!D.subarray&&C))return String.fromCharCode.apply(null,S.shrinkBuf(D,M));for(var V="",L=0;L<M;L++)V+=String.fromCharCode(D[L]);return V}B[254]=B[254]=1,E.string2buf=function(D){var M,V,L,F,j,U=D.length,H=0;for(F=0;F<U;F++)(64512&(V=D.charCodeAt(F)))==55296&&F+1<U&&(64512&(L=D.charCodeAt(F+1)))==56320&&(V=65536+(V-55296<<10)+(L-56320),F++),H+=V<128?1:V<2048?2:V<65536?3:4;for(M=new S.Buf8(H),F=j=0;j<H;F++)(64512&(V=D.charCodeAt(F)))==55296&&F+1<U&&(64512&(L=D.charCodeAt(F+1)))==56320&&(V=65536+(V-55296<<10)+(L-56320),F++),V<128?M[j++]=V:(V<2048?M[j++]=192|V>>>6:(V<65536?M[j++]=224|V>>>12:(M[j++]=240|V>>>18,M[j++]=128|V>>>12&63),M[j++]=128|V>>>6&63),M[j++]=128|63&V);return M},E.buf2binstring=function(D){return I(D,D.length)},E.binstring2buf=function(D){for(var M=new S.Buf8(D.length),V=0,L=M.length;V<L;V++)M[V]=D.charCodeAt(V);return M},E.buf2string=function(D,M){var V,L,F,j,U=M||D.length,H=new Array(2*U);for(V=L=0;V<U;)if((F=D[V++])<128)H[L++]=F;else if(4<(j=B[F]))H[L++]=65533,V+=j-1;else{for(F&=j===2?31:j===3?15:7;1<j&&V<U;)F=F<<6|63&D[V++],j--;1<j?H[L++]=65533:F<65536?H[L++]=F:(F-=65536,H[L++]=55296|F>>10&1023,H[L++]=56320|1023&F)}return I(H,L)},E.utf8border=function(D,M){var V;for((M=M||D.length)>D.length&&(M=D.length),V=M-1;0<=V&&(192&D[V])==128;)V--;return V<0||V===0?M:V+B[D[V]]>M?V:M}},{"./common":41}],43:[function(_,x,E){x.exports=function(S,C,T,B){for(var A=65535&S|0,I=S>>>16&65535|0,D=0;T!==0;){for(T-=D=2e3<T?2e3:T;I=I+(A=A+C[B++]|0)|0,--D;);A%=65521,I%=65521}return A|I<<16|0}},{}],44:[function(_,x,E){x.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(_,x,E){var S=function(){for(var C,T=[],B=0;B<256;B++){C=B;for(var A=0;A<8;A++)C=1&C?3988292384^C>>>1:C>>>1;T[B]=C}return T}();x.exports=function(C,T,B,A){var I=S,D=A+B;C^=-1;for(var M=A;M<D;M++)C=C>>>8^I[255&(C^T[M])];return-1^C}},{}],46:[function(_,x,E){var S,C=_("../utils/common"),T=_("./trees"),B=_("./adler32"),A=_("./crc32"),I=_("./messages"),D=0,M=4,V=0,L=-2,F=-1,j=4,U=2,H=8,Y=9,Z=286,ne=30,re=19,X=2*Z+1,ce=15,ue=3,_e=258,ye=_e+ue+1,ie=42,W=113,O=1,z=2,J=3,ee=4;function ae(ve,Ae){return ve.msg=I[Ae],Ae}function oe(ve){return(ve<<1)-(4<ve?9:0)}function se(ve){for(var Ae=ve.length;0<=--Ae;)ve[Ae]=0}function G(ve){var Ae=ve.state,Ve=Ae.pending;Ve>ve.avail_out&&(Ve=ve.avail_out),Ve!==0&&(C.arraySet(ve.output,Ae.pending_buf,Ae.pending_out,Ve,ve.next_out),ve.next_out+=Ve,Ae.pending_out+=Ve,ve.total_out+=Ve,ve.avail_out-=Ve,Ae.pending-=Ve,Ae.pending===0&&(Ae.pending_out=0))}function q(ve,Ae){T._tr_flush_block(ve,0<=ve.block_start?ve.block_start:-1,ve.strstart-ve.block_start,Ae),ve.block_start=ve.strstart,G(ve.strm)}function te(ve,Ae){ve.pending_buf[ve.pending++]=Ae}function fe(ve,Ae){ve.pending_buf[ve.pending++]=Ae>>>8&255,ve.pending_buf[ve.pending++]=255&Ae}function he(ve,Ae){var Ve,Pe,Re=ve.max_chain_length,Ne=ve.strstart,qe=ve.prev_length,Ke=ve.nice_match,He=ve.strstart>ve.w_size-ye?ve.strstart-(ve.w_size-ye):0,Ge=ve.window,rt=ve.w_mask,st=ve.prev,Je=ve.strstart+_e,Ie=Ge[Ne+qe-1],be=Ge[Ne+qe];ve.prev_length>=ve.good_match&&(Re>>=2),Ke>ve.lookahead&&(Ke=ve.lookahead);do if(Ge[(Ve=Ae)+qe]===be&&Ge[Ve+qe-1]===Ie&&Ge[Ve]===Ge[Ne]&&Ge[++Ve]===Ge[Ne+1]){Ne+=2,Ve++;do;while(Ge[++Ne]===Ge[++Ve]&&Ge[++Ne]===Ge[++Ve]&&Ge[++Ne]===Ge[++Ve]&&Ge[++Ne]===Ge[++Ve]&&Ge[++Ne]===Ge[++Ve]&&Ge[++Ne]===Ge[++Ve]&&Ge[++Ne]===Ge[++Ve]&&Ge[++Ne]===Ge[++Ve]&&Ne<Je);if(Pe=_e-(Je-Ne),Ne=Je-_e,qe<Pe){if(ve.match_start=Ae,Ke<=(qe=Pe))break;Ie=Ge[Ne+qe-1],be=Ge[Ne+qe]}}while((Ae=st[Ae&rt])>He&&--Re!=0);return qe<=ve.lookahead?qe:ve.lookahead}function Ee(ve){var Ae,Ve,Pe,Re,Ne,qe,Ke,He,Ge,rt,st=ve.w_size;do{if(Re=ve.window_size-ve.lookahead-ve.strstart,ve.strstart>=st+(st-ye)){for(C.arraySet(ve.window,ve.window,st,st,0),ve.match_start-=st,ve.strstart-=st,ve.block_start-=st,Ae=Ve=ve.hash_size;Pe=ve.head[--Ae],ve.head[Ae]=st<=Pe?Pe-st:0,--Ve;);for(Ae=Ve=st;Pe=ve.prev[--Ae],ve.prev[Ae]=st<=Pe?Pe-st:0,--Ve;);Re+=st}if(ve.strm.avail_in===0)break;if(qe=ve.strm,Ke=ve.window,He=ve.strstart+ve.lookahead,Ge=Re,rt=void 0,rt=qe.avail_in,Ge<rt&&(rt=Ge),Ve=rt===0?0:(qe.avail_in-=rt,C.arraySet(Ke,qe.input,qe.next_in,rt,He),qe.state.wrap===1?qe.adler=B(qe.adler,Ke,rt,He):qe.state.wrap===2&&(qe.adler=A(qe.adler,Ke,rt,He)),qe.next_in+=rt,qe.total_in+=rt,rt),ve.lookahead+=Ve,ve.lookahead+ve.insert>=ue)for(Ne=ve.strstart-ve.insert,ve.ins_h=ve.window[Ne],ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[Ne+1])&ve.hash_mask;ve.insert&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[Ne+ue-1])&ve.hash_mask,ve.prev[Ne&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=Ne,Ne++,ve.insert--,!(ve.lookahead+ve.insert<ue)););}while(ve.lookahead<ye&&ve.strm.avail_in!==0)}function we(ve,Ae){for(var Ve,Pe;;){if(ve.lookahead<ye){if(Ee(ve),ve.lookahead<ye&&Ae===D)return O;if(ve.lookahead===0)break}if(Ve=0,ve.lookahead>=ue&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+ue-1])&ve.hash_mask,Ve=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),Ve!==0&&ve.strstart-Ve<=ve.w_size-ye&&(ve.match_length=he(ve,Ve)),ve.match_length>=ue)if(Pe=T._tr_tally(ve,ve.strstart-ve.match_start,ve.match_length-ue),ve.lookahead-=ve.match_length,ve.match_length<=ve.max_lazy_match&&ve.lookahead>=ue){for(ve.match_length--;ve.strstart++,ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+ue-1])&ve.hash_mask,Ve=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart,--ve.match_length!=0;);ve.strstart++}else ve.strstart+=ve.match_length,ve.match_length=0,ve.ins_h=ve.window[ve.strstart],ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+1])&ve.hash_mask;else Pe=T._tr_tally(ve,0,ve.window[ve.strstart]),ve.lookahead--,ve.strstart++;if(Pe&&(q(ve,!1),ve.strm.avail_out===0))return O}return ve.insert=ve.strstart<ue-1?ve.strstart:ue-1,Ae===M?(q(ve,!0),ve.strm.avail_out===0?J:ee):ve.last_lit&&(q(ve,!1),ve.strm.avail_out===0)?O:z}function xe(ve,Ae){for(var Ve,Pe,Re;;){if(ve.lookahead<ye){if(Ee(ve),ve.lookahead<ye&&Ae===D)return O;if(ve.lookahead===0)break}if(Ve=0,ve.lookahead>=ue&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+ue-1])&ve.hash_mask,Ve=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),ve.prev_length=ve.match_length,ve.prev_match=ve.match_start,ve.match_length=ue-1,Ve!==0&&ve.prev_length<ve.max_lazy_match&&ve.strstart-Ve<=ve.w_size-ye&&(ve.match_length=he(ve,Ve),ve.match_length<=5&&(ve.strategy===1||ve.match_length===ue&&4096<ve.strstart-ve.match_start)&&(ve.match_length=ue-1)),ve.prev_length>=ue&&ve.match_length<=ve.prev_length){for(Re=ve.strstart+ve.lookahead-ue,Pe=T._tr_tally(ve,ve.strstart-1-ve.prev_match,ve.prev_length-ue),ve.lookahead-=ve.prev_length-1,ve.prev_length-=2;++ve.strstart<=Re&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+ue-1])&ve.hash_mask,Ve=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),--ve.prev_length!=0;);if(ve.match_available=0,ve.match_length=ue-1,ve.strstart++,Pe&&(q(ve,!1),ve.strm.avail_out===0))return O}else if(ve.match_available){if((Pe=T._tr_tally(ve,0,ve.window[ve.strstart-1]))&&q(ve,!1),ve.strstart++,ve.lookahead--,ve.strm.avail_out===0)return O}else ve.match_available=1,ve.strstart++,ve.lookahead--}return ve.match_available&&(Pe=T._tr_tally(ve,0,ve.window[ve.strstart-1]),ve.match_available=0),ve.insert=ve.strstart<ue-1?ve.strstart:ue-1,Ae===M?(q(ve,!0),ve.strm.avail_out===0?J:ee):ve.last_lit&&(q(ve,!1),ve.strm.avail_out===0)?O:z}function $e(ve,Ae,Ve,Pe,Re){this.good_length=ve,this.max_lazy=Ae,this.nice_length=Ve,this.max_chain=Pe,this.func=Re}function ge(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=H,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new C.Buf16(2*X),this.dyn_dtree=new C.Buf16(2*(2*ne+1)),this.bl_tree=new C.Buf16(2*(2*re+1)),se(this.dyn_ltree),se(this.dyn_dtree),se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new C.Buf16(ce+1),this.heap=new C.Buf16(2*Z+1),se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new C.Buf16(2*Z+1),se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Se(ve){var Ae;return ve&&ve.state?(ve.total_in=ve.total_out=0,ve.data_type=U,(Ae=ve.state).pending=0,Ae.pending_out=0,Ae.wrap<0&&(Ae.wrap=-Ae.wrap),Ae.status=Ae.wrap?ie:W,ve.adler=Ae.wrap===2?0:1,Ae.last_flush=D,T._tr_init(Ae),V):ae(ve,L)}function me(ve){var Ae=Se(ve);return Ae===V&&function(Ve){Ve.window_size=2*Ve.w_size,se(Ve.head),Ve.max_lazy_match=S[Ve.level].max_lazy,Ve.good_match=S[Ve.level].good_length,Ve.nice_match=S[Ve.level].nice_length,Ve.max_chain_length=S[Ve.level].max_chain,Ve.strstart=0,Ve.block_start=0,Ve.lookahead=0,Ve.insert=0,Ve.match_length=Ve.prev_length=ue-1,Ve.match_available=0,Ve.ins_h=0}(ve.state),Ae}function Be(ve,Ae,Ve,Pe,Re,Ne){if(!ve)return L;var qe=1;if(Ae===F&&(Ae=6),Pe<0?(qe=0,Pe=-Pe):15<Pe&&(qe=2,Pe-=16),Re<1||Y<Re||Ve!==H||Pe<8||15<Pe||Ae<0||9<Ae||Ne<0||j<Ne)return ae(ve,L);Pe===8&&(Pe=9);var Ke=new ge;return(ve.state=Ke).strm=ve,Ke.wrap=qe,Ke.gzhead=null,Ke.w_bits=Pe,Ke.w_size=1<<Ke.w_bits,Ke.w_mask=Ke.w_size-1,Ke.hash_bits=Re+7,Ke.hash_size=1<<Ke.hash_bits,Ke.hash_mask=Ke.hash_size-1,Ke.hash_shift=~~((Ke.hash_bits+ue-1)/ue),Ke.window=new C.Buf8(2*Ke.w_size),Ke.head=new C.Buf16(Ke.hash_size),Ke.prev=new C.Buf16(Ke.w_size),Ke.lit_bufsize=1<<Re+6,Ke.pending_buf_size=4*Ke.lit_bufsize,Ke.pending_buf=new C.Buf8(Ke.pending_buf_size),Ke.d_buf=1*Ke.lit_bufsize,Ke.l_buf=3*Ke.lit_bufsize,Ke.level=Ae,Ke.strategy=Ne,Ke.method=Ve,me(ve)}S=[new $e(0,0,0,0,function(ve,Ae){var Ve=65535;for(Ve>ve.pending_buf_size-5&&(Ve=ve.pending_buf_size-5);;){if(ve.lookahead<=1){if(Ee(ve),ve.lookahead===0&&Ae===D)return O;if(ve.lookahead===0)break}ve.strstart+=ve.lookahead,ve.lookahead=0;var Pe=ve.block_start+Ve;if((ve.strstart===0||ve.strstart>=Pe)&&(ve.lookahead=ve.strstart-Pe,ve.strstart=Pe,q(ve,!1),ve.strm.avail_out===0)||ve.strstart-ve.block_start>=ve.w_size-ye&&(q(ve,!1),ve.strm.avail_out===0))return O}return ve.insert=0,Ae===M?(q(ve,!0),ve.strm.avail_out===0?J:ee):(ve.strstart>ve.block_start&&(q(ve,!1),ve.strm.avail_out),O)}),new $e(4,4,8,4,we),new $e(4,5,16,8,we),new $e(4,6,32,32,we),new $e(4,4,16,16,xe),new $e(8,16,32,32,xe),new $e(8,16,128,128,xe),new $e(8,32,128,256,xe),new $e(32,128,258,1024,xe),new $e(32,258,258,4096,xe)],E.deflateInit=function(ve,Ae){return Be(ve,Ae,H,15,8,0)},E.deflateInit2=Be,E.deflateReset=me,E.deflateResetKeep=Se,E.deflateSetHeader=function(ve,Ae){return ve&&ve.state?ve.state.wrap!==2?L:(ve.state.gzhead=Ae,V):L},E.deflate=function(ve,Ae){var Ve,Pe,Re,Ne;if(!ve||!ve.state||5<Ae||Ae<0)return ve?ae(ve,L):L;if(Pe=ve.state,!ve.output||!ve.input&&ve.avail_in!==0||Pe.status===666&&Ae!==M)return ae(ve,ve.avail_out===0?-5:L);if(Pe.strm=ve,Ve=Pe.last_flush,Pe.last_flush=Ae,Pe.status===ie)if(Pe.wrap===2)ve.adler=0,te(Pe,31),te(Pe,139),te(Pe,8),Pe.gzhead?(te(Pe,(Pe.gzhead.text?1:0)+(Pe.gzhead.hcrc?2:0)+(Pe.gzhead.extra?4:0)+(Pe.gzhead.name?8:0)+(Pe.gzhead.comment?16:0)),te(Pe,255&Pe.gzhead.time),te(Pe,Pe.gzhead.time>>8&255),te(Pe,Pe.gzhead.time>>16&255),te(Pe,Pe.gzhead.time>>24&255),te(Pe,Pe.level===9?2:2<=Pe.strategy||Pe.level<2?4:0),te(Pe,255&Pe.gzhead.os),Pe.gzhead.extra&&Pe.gzhead.extra.length&&(te(Pe,255&Pe.gzhead.extra.length),te(Pe,Pe.gzhead.extra.length>>8&255)),Pe.gzhead.hcrc&&(ve.adler=A(ve.adler,Pe.pending_buf,Pe.pending,0)),Pe.gzindex=0,Pe.status=69):(te(Pe,0),te(Pe,0),te(Pe,0),te(Pe,0),te(Pe,0),te(Pe,Pe.level===9?2:2<=Pe.strategy||Pe.level<2?4:0),te(Pe,3),Pe.status=W);else{var qe=H+(Pe.w_bits-8<<4)<<8;qe|=(2<=Pe.strategy||Pe.level<2?0:Pe.level<6?1:Pe.level===6?2:3)<<6,Pe.strstart!==0&&(qe|=32),qe+=31-qe%31,Pe.status=W,fe(Pe,qe),Pe.strstart!==0&&(fe(Pe,ve.adler>>>16),fe(Pe,65535&ve.adler)),ve.adler=1}if(Pe.status===69)if(Pe.gzhead.extra){for(Re=Pe.pending;Pe.gzindex<(65535&Pe.gzhead.extra.length)&&(Pe.pending!==Pe.pending_buf_size||(Pe.gzhead.hcrc&&Pe.pending>Re&&(ve.adler=A(ve.adler,Pe.pending_buf,Pe.pending-Re,Re)),G(ve),Re=Pe.pending,Pe.pending!==Pe.pending_buf_size));)te(Pe,255&Pe.gzhead.extra[Pe.gzindex]),Pe.gzindex++;Pe.gzhead.hcrc&&Pe.pending>Re&&(ve.adler=A(ve.adler,Pe.pending_buf,Pe.pending-Re,Re)),Pe.gzindex===Pe.gzhead.extra.length&&(Pe.gzindex=0,Pe.status=73)}else Pe.status=73;if(Pe.status===73)if(Pe.gzhead.name){Re=Pe.pending;do{if(Pe.pending===Pe.pending_buf_size&&(Pe.gzhead.hcrc&&Pe.pending>Re&&(ve.adler=A(ve.adler,Pe.pending_buf,Pe.pending-Re,Re)),G(ve),Re=Pe.pending,Pe.pending===Pe.pending_buf_size)){Ne=1;break}Ne=Pe.gzindex<Pe.gzhead.name.length?255&Pe.gzhead.name.charCodeAt(Pe.gzindex++):0,te(Pe,Ne)}while(Ne!==0);Pe.gzhead.hcrc&&Pe.pending>Re&&(ve.adler=A(ve.adler,Pe.pending_buf,Pe.pending-Re,Re)),Ne===0&&(Pe.gzindex=0,Pe.status=91)}else Pe.status=91;if(Pe.status===91)if(Pe.gzhead.comment){Re=Pe.pending;do{if(Pe.pending===Pe.pending_buf_size&&(Pe.gzhead.hcrc&&Pe.pending>Re&&(ve.adler=A(ve.adler,Pe.pending_buf,Pe.pending-Re,Re)),G(ve),Re=Pe.pending,Pe.pending===Pe.pending_buf_size)){Ne=1;break}Ne=Pe.gzindex<Pe.gzhead.comment.length?255&Pe.gzhead.comment.charCodeAt(Pe.gzindex++):0,te(Pe,Ne)}while(Ne!==0);Pe.gzhead.hcrc&&Pe.pending>Re&&(ve.adler=A(ve.adler,Pe.pending_buf,Pe.pending-Re,Re)),Ne===0&&(Pe.status=103)}else Pe.status=103;if(Pe.status===103&&(Pe.gzhead.hcrc?(Pe.pending+2>Pe.pending_buf_size&&G(ve),Pe.pending+2<=Pe.pending_buf_size&&(te(Pe,255&ve.adler),te(Pe,ve.adler>>8&255),ve.adler=0,Pe.status=W)):Pe.status=W),Pe.pending!==0){if(G(ve),ve.avail_out===0)return Pe.last_flush=-1,V}else if(ve.avail_in===0&&oe(Ae)<=oe(Ve)&&Ae!==M)return ae(ve,-5);if(Pe.status===666&&ve.avail_in!==0)return ae(ve,-5);if(ve.avail_in!==0||Pe.lookahead!==0||Ae!==D&&Pe.status!==666){var Ke=Pe.strategy===2?function(He,Ge){for(var rt;;){if(He.lookahead===0&&(Ee(He),He.lookahead===0)){if(Ge===D)return O;break}if(He.match_length=0,rt=T._tr_tally(He,0,He.window[He.strstart]),He.lookahead--,He.strstart++,rt&&(q(He,!1),He.strm.avail_out===0))return O}return He.insert=0,Ge===M?(q(He,!0),He.strm.avail_out===0?J:ee):He.last_lit&&(q(He,!1),He.strm.avail_out===0)?O:z}(Pe,Ae):Pe.strategy===3?function(He,Ge){for(var rt,st,Je,Ie,be=He.window;;){if(He.lookahead<=_e){if(Ee(He),He.lookahead<=_e&&Ge===D)return O;if(He.lookahead===0)break}if(He.match_length=0,He.lookahead>=ue&&0<He.strstart&&(st=be[Je=He.strstart-1])===be[++Je]&&st===be[++Je]&&st===be[++Je]){Ie=He.strstart+_e;do;while(st===be[++Je]&&st===be[++Je]&&st===be[++Je]&&st===be[++Je]&&st===be[++Je]&&st===be[++Je]&&st===be[++Je]&&st===be[++Je]&&Je<Ie);He.match_length=_e-(Ie-Je),He.match_length>He.lookahead&&(He.match_length=He.lookahead)}if(He.match_length>=ue?(rt=T._tr_tally(He,1,He.match_length-ue),He.lookahead-=He.match_length,He.strstart+=He.match_length,He.match_length=0):(rt=T._tr_tally(He,0,He.window[He.strstart]),He.lookahead--,He.strstart++),rt&&(q(He,!1),He.strm.avail_out===0))return O}return He.insert=0,Ge===M?(q(He,!0),He.strm.avail_out===0?J:ee):He.last_lit&&(q(He,!1),He.strm.avail_out===0)?O:z}(Pe,Ae):S[Pe.level].func(Pe,Ae);if(Ke!==J&&Ke!==ee||(Pe.status=666),Ke===O||Ke===J)return ve.avail_out===0&&(Pe.last_flush=-1),V;if(Ke===z&&(Ae===1?T._tr_align(Pe):Ae!==5&&(T._tr_stored_block(Pe,0,0,!1),Ae===3&&(se(Pe.head),Pe.lookahead===0&&(Pe.strstart=0,Pe.block_start=0,Pe.insert=0))),G(ve),ve.avail_out===0))return Pe.last_flush=-1,V}return Ae!==M?V:Pe.wrap<=0?1:(Pe.wrap===2?(te(Pe,255&ve.adler),te(Pe,ve.adler>>8&255),te(Pe,ve.adler>>16&255),te(Pe,ve.adler>>24&255),te(Pe,255&ve.total_in),te(Pe,ve.total_in>>8&255),te(Pe,ve.total_in>>16&255),te(Pe,ve.total_in>>24&255)):(fe(Pe,ve.adler>>>16),fe(Pe,65535&ve.adler)),G(ve),0<Pe.wrap&&(Pe.wrap=-Pe.wrap),Pe.pending!==0?V:1)},E.deflateEnd=function(ve){var Ae;return ve&&ve.state?(Ae=ve.state.status)!==ie&&Ae!==69&&Ae!==73&&Ae!==91&&Ae!==103&&Ae!==W&&Ae!==666?ae(ve,L):(ve.state=null,Ae===W?ae(ve,-3):V):L},E.deflateSetDictionary=function(ve,Ae){var Ve,Pe,Re,Ne,qe,Ke,He,Ge,rt=Ae.length;if(!ve||!ve.state||(Ne=(Ve=ve.state).wrap)===2||Ne===1&&Ve.status!==ie||Ve.lookahead)return L;for(Ne===1&&(ve.adler=B(ve.adler,Ae,rt,0)),Ve.wrap=0,rt>=Ve.w_size&&(Ne===0&&(se(Ve.head),Ve.strstart=0,Ve.block_start=0,Ve.insert=0),Ge=new C.Buf8(Ve.w_size),C.arraySet(Ge,Ae,rt-Ve.w_size,Ve.w_size,0),Ae=Ge,rt=Ve.w_size),qe=ve.avail_in,Ke=ve.next_in,He=ve.input,ve.avail_in=rt,ve.next_in=0,ve.input=Ae,Ee(Ve);Ve.lookahead>=ue;){for(Pe=Ve.strstart,Re=Ve.lookahead-(ue-1);Ve.ins_h=(Ve.ins_h<<Ve.hash_shift^Ve.window[Pe+ue-1])&Ve.hash_mask,Ve.prev[Pe&Ve.w_mask]=Ve.head[Ve.ins_h],Ve.head[Ve.ins_h]=Pe,Pe++,--Re;);Ve.strstart=Pe,Ve.lookahead=ue-1,Ee(Ve)}return Ve.strstart+=Ve.lookahead,Ve.block_start=Ve.strstart,Ve.insert=Ve.lookahead,Ve.lookahead=0,Ve.match_length=Ve.prev_length=ue-1,Ve.match_available=0,ve.next_in=Ke,ve.input=He,ve.avail_in=qe,Ve.wrap=Ne,V},E.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(_,x,E){x.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(_,x,E){x.exports=function(S,C){var T,B,A,I,D,M,V,L,F,j,U,H,Y,Z,ne,re,X,ce,ue,_e,ye,ie,W,O,z;T=S.state,B=S.next_in,O=S.input,A=B+(S.avail_in-5),I=S.next_out,z=S.output,D=I-(C-S.avail_out),M=I+(S.avail_out-257),V=T.dmax,L=T.wsize,F=T.whave,j=T.wnext,U=T.window,H=T.hold,Y=T.bits,Z=T.lencode,ne=T.distcode,re=(1<<T.lenbits)-1,X=(1<<T.distbits)-1;e:do{Y<15&&(H+=O[B++]<<Y,Y+=8,H+=O[B++]<<Y,Y+=8),ce=Z[H&re];t:for(;;){if(H>>>=ue=ce>>>24,Y-=ue,(ue=ce>>>16&255)===0)z[I++]=65535&ce;else{if(!(16&ue)){if(!(64&ue)){ce=Z[(65535&ce)+(H&(1<<ue)-1)];continue t}if(32&ue){T.mode=12;break e}S.msg="invalid literal/length code",T.mode=30;break e}_e=65535&ce,(ue&=15)&&(Y<ue&&(H+=O[B++]<<Y,Y+=8),_e+=H&(1<<ue)-1,H>>>=ue,Y-=ue),Y<15&&(H+=O[B++]<<Y,Y+=8,H+=O[B++]<<Y,Y+=8),ce=ne[H&X];r:for(;;){if(H>>>=ue=ce>>>24,Y-=ue,!(16&(ue=ce>>>16&255))){if(!(64&ue)){ce=ne[(65535&ce)+(H&(1<<ue)-1)];continue r}S.msg="invalid distance code",T.mode=30;break e}if(ye=65535&ce,Y<(ue&=15)&&(H+=O[B++]<<Y,(Y+=8)<ue&&(H+=O[B++]<<Y,Y+=8)),V<(ye+=H&(1<<ue)-1)){S.msg="invalid distance too far back",T.mode=30;break e}if(H>>>=ue,Y-=ue,(ue=I-D)<ye){if(F<(ue=ye-ue)&&T.sane){S.msg="invalid distance too far back",T.mode=30;break e}if(W=U,(ie=0)===j){if(ie+=L-ue,ue<_e){for(_e-=ue;z[I++]=U[ie++],--ue;);ie=I-ye,W=z}}else if(j<ue){if(ie+=L+j-ue,(ue-=j)<_e){for(_e-=ue;z[I++]=U[ie++],--ue;);if(ie=0,j<_e){for(_e-=ue=j;z[I++]=U[ie++],--ue;);ie=I-ye,W=z}}}else if(ie+=j-ue,ue<_e){for(_e-=ue;z[I++]=U[ie++],--ue;);ie=I-ye,W=z}for(;2<_e;)z[I++]=W[ie++],z[I++]=W[ie++],z[I++]=W[ie++],_e-=3;_e&&(z[I++]=W[ie++],1<_e&&(z[I++]=W[ie++]))}else{for(ie=I-ye;z[I++]=z[ie++],z[I++]=z[ie++],z[I++]=z[ie++],2<(_e-=3););_e&&(z[I++]=z[ie++],1<_e&&(z[I++]=z[ie++]))}break}}break}}while(B<A&&I<M);B-=_e=Y>>3,H&=(1<<(Y-=_e<<3))-1,S.next_in=B,S.next_out=I,S.avail_in=B<A?A-B+5:5-(B-A),S.avail_out=I<M?M-I+257:257-(I-M),T.hold=H,T.bits=Y}},{}],49:[function(_,x,E){var S=_("../utils/common"),C=_("./adler32"),T=_("./crc32"),B=_("./inffast"),A=_("./inftrees"),I=1,D=2,M=0,V=-2,L=1,F=852,j=592;function U(ie){return(ie>>>24&255)+(ie>>>8&65280)+((65280&ie)<<8)+((255&ie)<<24)}function H(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new S.Buf16(320),this.work=new S.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Y(ie){var W;return ie&&ie.state?(W=ie.state,ie.total_in=ie.total_out=W.total=0,ie.msg="",W.wrap&&(ie.adler=1&W.wrap),W.mode=L,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new S.Buf32(F),W.distcode=W.distdyn=new S.Buf32(j),W.sane=1,W.back=-1,M):V}function Z(ie){var W;return ie&&ie.state?((W=ie.state).wsize=0,W.whave=0,W.wnext=0,Y(ie)):V}function ne(ie,W){var O,z;return ie&&ie.state?(z=ie.state,W<0?(O=0,W=-W):(O=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?V:(z.window!==null&&z.wbits!==W&&(z.window=null),z.wrap=O,z.wbits=W,Z(ie))):V}function re(ie,W){var O,z;return ie?(z=new H,(ie.state=z).window=null,(O=ne(ie,W))!==M&&(ie.state=null),O):V}var X,ce,ue=!0;function _e(ie){if(ue){var W;for(X=new S.Buf32(512),ce=new S.Buf32(32),W=0;W<144;)ie.lens[W++]=8;for(;W<256;)ie.lens[W++]=9;for(;W<280;)ie.lens[W++]=7;for(;W<288;)ie.lens[W++]=8;for(A(I,ie.lens,0,288,X,0,ie.work,{bits:9}),W=0;W<32;)ie.lens[W++]=5;A(D,ie.lens,0,32,ce,0,ie.work,{bits:5}),ue=!1}ie.lencode=X,ie.lenbits=9,ie.distcode=ce,ie.distbits=5}function ye(ie,W,O,z){var J,ee=ie.state;return ee.window===null&&(ee.wsize=1<<ee.wbits,ee.wnext=0,ee.whave=0,ee.window=new S.Buf8(ee.wsize)),z>=ee.wsize?(S.arraySet(ee.window,W,O-ee.wsize,ee.wsize,0),ee.wnext=0,ee.whave=ee.wsize):(z<(J=ee.wsize-ee.wnext)&&(J=z),S.arraySet(ee.window,W,O-z,J,ee.wnext),(z-=J)?(S.arraySet(ee.window,W,O-z,z,0),ee.wnext=z,ee.whave=ee.wsize):(ee.wnext+=J,ee.wnext===ee.wsize&&(ee.wnext=0),ee.whave<ee.wsize&&(ee.whave+=J))),0}E.inflateReset=Z,E.inflateReset2=ne,E.inflateResetKeep=Y,E.inflateInit=function(ie){return re(ie,15)},E.inflateInit2=re,E.inflate=function(ie,W){var O,z,J,ee,ae,oe,se,G,q,te,fe,he,Ee,we,xe,$e,ge,Se,me,Be,ve,Ae,Ve,Pe,Re=0,Ne=new S.Buf8(4),qe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ie||!ie.state||!ie.output||!ie.input&&ie.avail_in!==0)return V;(O=ie.state).mode===12&&(O.mode=13),ae=ie.next_out,J=ie.output,se=ie.avail_out,ee=ie.next_in,z=ie.input,oe=ie.avail_in,G=O.hold,q=O.bits,te=oe,fe=se,Ae=M;e:for(;;)switch(O.mode){case L:if(O.wrap===0){O.mode=13;break}for(;q<16;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}if(2&O.wrap&&G===35615){Ne[O.check=0]=255&G,Ne[1]=G>>>8&255,O.check=T(O.check,Ne,2,0),q=G=0,O.mode=2;break}if(O.flags=0,O.head&&(O.head.done=!1),!(1&O.wrap)||(((255&G)<<8)+(G>>8))%31){ie.msg="incorrect header check",O.mode=30;break}if((15&G)!=8){ie.msg="unknown compression method",O.mode=30;break}if(q-=4,ve=8+(15&(G>>>=4)),O.wbits===0)O.wbits=ve;else if(ve>O.wbits){ie.msg="invalid window size",O.mode=30;break}O.dmax=1<<ve,ie.adler=O.check=1,O.mode=512&G?10:12,q=G=0;break;case 2:for(;q<16;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}if(O.flags=G,(255&O.flags)!=8){ie.msg="unknown compression method",O.mode=30;break}if(57344&O.flags){ie.msg="unknown header flags set",O.mode=30;break}O.head&&(O.head.text=G>>8&1),512&O.flags&&(Ne[0]=255&G,Ne[1]=G>>>8&255,O.check=T(O.check,Ne,2,0)),q=G=0,O.mode=3;case 3:for(;q<32;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}O.head&&(O.head.time=G),512&O.flags&&(Ne[0]=255&G,Ne[1]=G>>>8&255,Ne[2]=G>>>16&255,Ne[3]=G>>>24&255,O.check=T(O.check,Ne,4,0)),q=G=0,O.mode=4;case 4:for(;q<16;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}O.head&&(O.head.xflags=255&G,O.head.os=G>>8),512&O.flags&&(Ne[0]=255&G,Ne[1]=G>>>8&255,O.check=T(O.check,Ne,2,0)),q=G=0,O.mode=5;case 5:if(1024&O.flags){for(;q<16;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}O.length=G,O.head&&(O.head.extra_len=G),512&O.flags&&(Ne[0]=255&G,Ne[1]=G>>>8&255,O.check=T(O.check,Ne,2,0)),q=G=0}else O.head&&(O.head.extra=null);O.mode=6;case 6:if(1024&O.flags&&(oe<(he=O.length)&&(he=oe),he&&(O.head&&(ve=O.head.extra_len-O.length,O.head.extra||(O.head.extra=new Array(O.head.extra_len)),S.arraySet(O.head.extra,z,ee,he,ve)),512&O.flags&&(O.check=T(O.check,z,he,ee)),oe-=he,ee+=he,O.length-=he),O.length))break e;O.length=0,O.mode=7;case 7:if(2048&O.flags){if(oe===0)break e;for(he=0;ve=z[ee+he++],O.head&&ve&&O.length<65536&&(O.head.name+=String.fromCharCode(ve)),ve&&he<oe;);if(512&O.flags&&(O.check=T(O.check,z,he,ee)),oe-=he,ee+=he,ve)break e}else O.head&&(O.head.name=null);O.length=0,O.mode=8;case 8:if(4096&O.flags){if(oe===0)break e;for(he=0;ve=z[ee+he++],O.head&&ve&&O.length<65536&&(O.head.comment+=String.fromCharCode(ve)),ve&&he<oe;);if(512&O.flags&&(O.check=T(O.check,z,he,ee)),oe-=he,ee+=he,ve)break e}else O.head&&(O.head.comment=null);O.mode=9;case 9:if(512&O.flags){for(;q<16;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}if(G!==(65535&O.check)){ie.msg="header crc mismatch",O.mode=30;break}q=G=0}O.head&&(O.head.hcrc=O.flags>>9&1,O.head.done=!0),ie.adler=O.check=0,O.mode=12;break;case 10:for(;q<32;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}ie.adler=O.check=U(G),q=G=0,O.mode=11;case 11:if(O.havedict===0)return ie.next_out=ae,ie.avail_out=se,ie.next_in=ee,ie.avail_in=oe,O.hold=G,O.bits=q,2;ie.adler=O.check=1,O.mode=12;case 12:if(W===5||W===6)break e;case 13:if(O.last){G>>>=7&q,q-=7&q,O.mode=27;break}for(;q<3;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}switch(O.last=1&G,q-=1,3&(G>>>=1)){case 0:O.mode=14;break;case 1:if(_e(O),O.mode=20,W!==6)break;G>>>=2,q-=2;break e;case 2:O.mode=17;break;case 3:ie.msg="invalid block type",O.mode=30}G>>>=2,q-=2;break;case 14:for(G>>>=7&q,q-=7&q;q<32;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}if((65535&G)!=(G>>>16^65535)){ie.msg="invalid stored block lengths",O.mode=30;break}if(O.length=65535&G,q=G=0,O.mode=15,W===6)break e;case 15:O.mode=16;case 16:if(he=O.length){if(oe<he&&(he=oe),se<he&&(he=se),he===0)break e;S.arraySet(J,z,ee,he,ae),oe-=he,ee+=he,se-=he,ae+=he,O.length-=he;break}O.mode=12;break;case 17:for(;q<14;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}if(O.nlen=257+(31&G),G>>>=5,q-=5,O.ndist=1+(31&G),G>>>=5,q-=5,O.ncode=4+(15&G),G>>>=4,q-=4,286<O.nlen||30<O.ndist){ie.msg="too many length or distance symbols",O.mode=30;break}O.have=0,O.mode=18;case 18:for(;O.have<O.ncode;){for(;q<3;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}O.lens[qe[O.have++]]=7&G,G>>>=3,q-=3}for(;O.have<19;)O.lens[qe[O.have++]]=0;if(O.lencode=O.lendyn,O.lenbits=7,Ve={bits:O.lenbits},Ae=A(0,O.lens,0,19,O.lencode,0,O.work,Ve),O.lenbits=Ve.bits,Ae){ie.msg="invalid code lengths set",O.mode=30;break}O.have=0,O.mode=19;case 19:for(;O.have<O.nlen+O.ndist;){for(;$e=(Re=O.lencode[G&(1<<O.lenbits)-1])>>>16&255,ge=65535&Re,!((xe=Re>>>24)<=q);){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}if(ge<16)G>>>=xe,q-=xe,O.lens[O.have++]=ge;else{if(ge===16){for(Pe=xe+2;q<Pe;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}if(G>>>=xe,q-=xe,O.have===0){ie.msg="invalid bit length repeat",O.mode=30;break}ve=O.lens[O.have-1],he=3+(3&G),G>>>=2,q-=2}else if(ge===17){for(Pe=xe+3;q<Pe;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}q-=xe,ve=0,he=3+(7&(G>>>=xe)),G>>>=3,q-=3}else{for(Pe=xe+7;q<Pe;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}q-=xe,ve=0,he=11+(127&(G>>>=xe)),G>>>=7,q-=7}if(O.have+he>O.nlen+O.ndist){ie.msg="invalid bit length repeat",O.mode=30;break}for(;he--;)O.lens[O.have++]=ve}}if(O.mode===30)break;if(O.lens[256]===0){ie.msg="invalid code -- missing end-of-block",O.mode=30;break}if(O.lenbits=9,Ve={bits:O.lenbits},Ae=A(I,O.lens,0,O.nlen,O.lencode,0,O.work,Ve),O.lenbits=Ve.bits,Ae){ie.msg="invalid literal/lengths set",O.mode=30;break}if(O.distbits=6,O.distcode=O.distdyn,Ve={bits:O.distbits},Ae=A(D,O.lens,O.nlen,O.ndist,O.distcode,0,O.work,Ve),O.distbits=Ve.bits,Ae){ie.msg="invalid distances set",O.mode=30;break}if(O.mode=20,W===6)break e;case 20:O.mode=21;case 21:if(6<=oe&&258<=se){ie.next_out=ae,ie.avail_out=se,ie.next_in=ee,ie.avail_in=oe,O.hold=G,O.bits=q,B(ie,fe),ae=ie.next_out,J=ie.output,se=ie.avail_out,ee=ie.next_in,z=ie.input,oe=ie.avail_in,G=O.hold,q=O.bits,O.mode===12&&(O.back=-1);break}for(O.back=0;$e=(Re=O.lencode[G&(1<<O.lenbits)-1])>>>16&255,ge=65535&Re,!((xe=Re>>>24)<=q);){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}if($e&&!(240&$e)){for(Se=xe,me=$e,Be=ge;$e=(Re=O.lencode[Be+((G&(1<<Se+me)-1)>>Se)])>>>16&255,ge=65535&Re,!(Se+(xe=Re>>>24)<=q);){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}G>>>=Se,q-=Se,O.back+=Se}if(G>>>=xe,q-=xe,O.back+=xe,O.length=ge,$e===0){O.mode=26;break}if(32&$e){O.back=-1,O.mode=12;break}if(64&$e){ie.msg="invalid literal/length code",O.mode=30;break}O.extra=15&$e,O.mode=22;case 22:if(O.extra){for(Pe=O.extra;q<Pe;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}O.length+=G&(1<<O.extra)-1,G>>>=O.extra,q-=O.extra,O.back+=O.extra}O.was=O.length,O.mode=23;case 23:for(;$e=(Re=O.distcode[G&(1<<O.distbits)-1])>>>16&255,ge=65535&Re,!((xe=Re>>>24)<=q);){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}if(!(240&$e)){for(Se=xe,me=$e,Be=ge;$e=(Re=O.distcode[Be+((G&(1<<Se+me)-1)>>Se)])>>>16&255,ge=65535&Re,!(Se+(xe=Re>>>24)<=q);){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}G>>>=Se,q-=Se,O.back+=Se}if(G>>>=xe,q-=xe,O.back+=xe,64&$e){ie.msg="invalid distance code",O.mode=30;break}O.offset=ge,O.extra=15&$e,O.mode=24;case 24:if(O.extra){for(Pe=O.extra;q<Pe;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}O.offset+=G&(1<<O.extra)-1,G>>>=O.extra,q-=O.extra,O.back+=O.extra}if(O.offset>O.dmax){ie.msg="invalid distance too far back",O.mode=30;break}O.mode=25;case 25:if(se===0)break e;if(he=fe-se,O.offset>he){if((he=O.offset-he)>O.whave&&O.sane){ie.msg="invalid distance too far back",O.mode=30;break}Ee=he>O.wnext?(he-=O.wnext,O.wsize-he):O.wnext-he,he>O.length&&(he=O.length),we=O.window}else we=J,Ee=ae-O.offset,he=O.length;for(se<he&&(he=se),se-=he,O.length-=he;J[ae++]=we[Ee++],--he;);O.length===0&&(O.mode=21);break;case 26:if(se===0)break e;J[ae++]=O.length,se--,O.mode=21;break;case 27:if(O.wrap){for(;q<32;){if(oe===0)break e;oe--,G|=z[ee++]<<q,q+=8}if(fe-=se,ie.total_out+=fe,O.total+=fe,fe&&(ie.adler=O.check=O.flags?T(O.check,J,fe,ae-fe):C(O.check,J,fe,ae-fe)),fe=se,(O.flags?G:U(G))!==O.check){ie.msg="incorrect data check",O.mode=30;break}q=G=0}O.mode=28;case 28:if(O.wrap&&O.flags){for(;q<32;){if(oe===0)break e;oe--,G+=z[ee++]<<q,q+=8}if(G!==(4294967295&O.total)){ie.msg="incorrect length check",O.mode=30;break}q=G=0}O.mode=29;case 29:Ae=1;break e;case 30:Ae=-3;break e;case 31:return-4;case 32:default:return V}return ie.next_out=ae,ie.avail_out=se,ie.next_in=ee,ie.avail_in=oe,O.hold=G,O.bits=q,(O.wsize||fe!==ie.avail_out&&O.mode<30&&(O.mode<27||W!==4))&&ye(ie,ie.output,ie.next_out,fe-ie.avail_out)?(O.mode=31,-4):(te-=ie.avail_in,fe-=ie.avail_out,ie.total_in+=te,ie.total_out+=fe,O.total+=fe,O.wrap&&fe&&(ie.adler=O.check=O.flags?T(O.check,J,fe,ie.next_out-fe):C(O.check,J,fe,ie.next_out-fe)),ie.data_type=O.bits+(O.last?64:0)+(O.mode===12?128:0)+(O.mode===20||O.mode===15?256:0),(te==0&&fe===0||W===4)&&Ae===M&&(Ae=-5),Ae)},E.inflateEnd=function(ie){if(!ie||!ie.state)return V;var W=ie.state;return W.window&&(W.window=null),ie.state=null,M},E.inflateGetHeader=function(ie,W){var O;return ie&&ie.state&&2&(O=ie.state).wrap?((O.head=W).done=!1,M):V},E.inflateSetDictionary=function(ie,W){var O,z=W.length;return ie&&ie.state?(O=ie.state).wrap!==0&&O.mode!==11?V:O.mode===11&&C(1,W,z,0)!==O.check?-3:ye(ie,W,z,z)?(O.mode=31,-4):(O.havedict=1,M):V},E.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(_,x,E){var S=_("../utils/common"),C=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],T=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],B=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],A=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];x.exports=function(I,D,M,V,L,F,j,U){var H,Y,Z,ne,re,X,ce,ue,_e,ye=U.bits,ie=0,W=0,O=0,z=0,J=0,ee=0,ae=0,oe=0,se=0,G=0,q=null,te=0,fe=new S.Buf16(16),he=new S.Buf16(16),Ee=null,we=0;for(ie=0;ie<=15;ie++)fe[ie]=0;for(W=0;W<V;W++)fe[D[M+W]]++;for(J=ye,z=15;1<=z&&fe[z]===0;z--);if(z<J&&(J=z),z===0)return L[F++]=20971520,L[F++]=20971520,U.bits=1,0;for(O=1;O<z&&fe[O]===0;O++);for(J<O&&(J=O),ie=oe=1;ie<=15;ie++)if(oe<<=1,(oe-=fe[ie])<0)return-1;if(0<oe&&(I===0||z!==1))return-1;for(he[1]=0,ie=1;ie<15;ie++)he[ie+1]=he[ie]+fe[ie];for(W=0;W<V;W++)D[M+W]!==0&&(j[he[D[M+W]]++]=W);if(X=I===0?(q=Ee=j,19):I===1?(q=C,te-=257,Ee=T,we-=257,256):(q=B,Ee=A,-1),ie=O,re=F,ae=W=G=0,Z=-1,ne=(se=1<<(ee=J))-1,I===1&&852<se||I===2&&592<se)return 1;for(;;){for(ce=ie-ae,_e=j[W]<X?(ue=0,j[W]):j[W]>X?(ue=Ee[we+j[W]],q[te+j[W]]):(ue=96,0),H=1<<ie-ae,O=Y=1<<ee;L[re+(G>>ae)+(Y-=H)]=ce<<24|ue<<16|_e|0,Y!==0;);for(H=1<<ie-1;G&H;)H>>=1;if(H!==0?(G&=H-1,G+=H):G=0,W++,--fe[ie]==0){if(ie===z)break;ie=D[M+j[W]]}if(J<ie&&(G&ne)!==Z){for(ae===0&&(ae=J),re+=O,oe=1<<(ee=ie-ae);ee+ae<z&&!((oe-=fe[ee+ae])<=0);)ee++,oe<<=1;if(se+=1<<ee,I===1&&852<se||I===2&&592<se)return 1;L[Z=G&ne]=J<<24|ee<<16|re-F|0}}return G!==0&&(L[re+G]=ie-ae<<24|64<<16|0),U.bits=J,0}},{"../utils/common":41}],51:[function(_,x,E){x.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(_,x,E){var S=_("../utils/common"),C=0,T=1;function B(Re){for(var Ne=Re.length;0<=--Ne;)Re[Ne]=0}var A=0,I=29,D=256,M=D+1+I,V=30,L=19,F=2*M+1,j=15,U=16,H=7,Y=256,Z=16,ne=17,re=18,X=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ce=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],_e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ye=new Array(2*(M+2));B(ye);var ie=new Array(2*V);B(ie);var W=new Array(512);B(W);var O=new Array(256);B(O);var z=new Array(I);B(z);var J,ee,ae,oe=new Array(V);function se(Re,Ne,qe,Ke,He){this.static_tree=Re,this.extra_bits=Ne,this.extra_base=qe,this.elems=Ke,this.max_length=He,this.has_stree=Re&&Re.length}function G(Re,Ne){this.dyn_tree=Re,this.max_code=0,this.stat_desc=Ne}function q(Re){return Re<256?W[Re]:W[256+(Re>>>7)]}function te(Re,Ne){Re.pending_buf[Re.pending++]=255&Ne,Re.pending_buf[Re.pending++]=Ne>>>8&255}function fe(Re,Ne,qe){Re.bi_valid>U-qe?(Re.bi_buf|=Ne<<Re.bi_valid&65535,te(Re,Re.bi_buf),Re.bi_buf=Ne>>U-Re.bi_valid,Re.bi_valid+=qe-U):(Re.bi_buf|=Ne<<Re.bi_valid&65535,Re.bi_valid+=qe)}function he(Re,Ne,qe){fe(Re,qe[2*Ne],qe[2*Ne+1])}function Ee(Re,Ne){for(var qe=0;qe|=1&Re,Re>>>=1,qe<<=1,0<--Ne;);return qe>>>1}function we(Re,Ne,qe){var Ke,He,Ge=new Array(j+1),rt=0;for(Ke=1;Ke<=j;Ke++)Ge[Ke]=rt=rt+qe[Ke-1]<<1;for(He=0;He<=Ne;He++){var st=Re[2*He+1];st!==0&&(Re[2*He]=Ee(Ge[st]++,st))}}function xe(Re){var Ne;for(Ne=0;Ne<M;Ne++)Re.dyn_ltree[2*Ne]=0;for(Ne=0;Ne<V;Ne++)Re.dyn_dtree[2*Ne]=0;for(Ne=0;Ne<L;Ne++)Re.bl_tree[2*Ne]=0;Re.dyn_ltree[2*Y]=1,Re.opt_len=Re.static_len=0,Re.last_lit=Re.matches=0}function $e(Re){8<Re.bi_valid?te(Re,Re.bi_buf):0<Re.bi_valid&&(Re.pending_buf[Re.pending++]=Re.bi_buf),Re.bi_buf=0,Re.bi_valid=0}function ge(Re,Ne,qe,Ke){var He=2*Ne,Ge=2*qe;return Re[He]<Re[Ge]||Re[He]===Re[Ge]&&Ke[Ne]<=Ke[qe]}function Se(Re,Ne,qe){for(var Ke=Re.heap[qe],He=qe<<1;He<=Re.heap_len&&(He<Re.heap_len&&ge(Ne,Re.heap[He+1],Re.heap[He],Re.depth)&&He++,!ge(Ne,Ke,Re.heap[He],Re.depth));)Re.heap[qe]=Re.heap[He],qe=He,He<<=1;Re.heap[qe]=Ke}function me(Re,Ne,qe){var Ke,He,Ge,rt,st=0;if(Re.last_lit!==0)for(;Ke=Re.pending_buf[Re.d_buf+2*st]<<8|Re.pending_buf[Re.d_buf+2*st+1],He=Re.pending_buf[Re.l_buf+st],st++,Ke===0?he(Re,He,Ne):(he(Re,(Ge=O[He])+D+1,Ne),(rt=X[Ge])!==0&&fe(Re,He-=z[Ge],rt),he(Re,Ge=q(--Ke),qe),(rt=ce[Ge])!==0&&fe(Re,Ke-=oe[Ge],rt)),st<Re.last_lit;);he(Re,Y,Ne)}function Be(Re,Ne){var qe,Ke,He,Ge=Ne.dyn_tree,rt=Ne.stat_desc.static_tree,st=Ne.stat_desc.has_stree,Je=Ne.stat_desc.elems,Ie=-1;for(Re.heap_len=0,Re.heap_max=F,qe=0;qe<Je;qe++)Ge[2*qe]!==0?(Re.heap[++Re.heap_len]=Ie=qe,Re.depth[qe]=0):Ge[2*qe+1]=0;for(;Re.heap_len<2;)Ge[2*(He=Re.heap[++Re.heap_len]=Ie<2?++Ie:0)]=1,Re.depth[He]=0,Re.opt_len--,st&&(Re.static_len-=rt[2*He+1]);for(Ne.max_code=Ie,qe=Re.heap_len>>1;1<=qe;qe--)Se(Re,Ge,qe);for(He=Je;qe=Re.heap[1],Re.heap[1]=Re.heap[Re.heap_len--],Se(Re,Ge,1),Ke=Re.heap[1],Re.heap[--Re.heap_max]=qe,Re.heap[--Re.heap_max]=Ke,Ge[2*He]=Ge[2*qe]+Ge[2*Ke],Re.depth[He]=(Re.depth[qe]>=Re.depth[Ke]?Re.depth[qe]:Re.depth[Ke])+1,Ge[2*qe+1]=Ge[2*Ke+1]=He,Re.heap[1]=He++,Se(Re,Ge,1),2<=Re.heap_len;);Re.heap[--Re.heap_max]=Re.heap[1],function(be,Te){var Le,We,Ze,Qe,St,pt,ft=Te.dyn_tree,Ut=Te.max_code,$t=Te.stat_desc.static_tree,Nt=Te.stat_desc.has_stree,lr=Te.stat_desc.extra_bits,Gt=Te.stat_desc.extra_base,Rt=Te.stat_desc.max_length,Qt=0;for(Qe=0;Qe<=j;Qe++)be.bl_count[Qe]=0;for(ft[2*be.heap[be.heap_max]+1]=0,Le=be.heap_max+1;Le<F;Le++)Rt<(Qe=ft[2*ft[2*(We=be.heap[Le])+1]+1]+1)&&(Qe=Rt,Qt++),ft[2*We+1]=Qe,Ut<We||(be.bl_count[Qe]++,St=0,Gt<=We&&(St=lr[We-Gt]),pt=ft[2*We],be.opt_len+=pt*(Qe+St),Nt&&(be.static_len+=pt*($t[2*We+1]+St)));if(Qt!==0){do{for(Qe=Rt-1;be.bl_count[Qe]===0;)Qe--;be.bl_count[Qe]--,be.bl_count[Qe+1]+=2,be.bl_count[Rt]--,Qt-=2}while(0<Qt);for(Qe=Rt;Qe!==0;Qe--)for(We=be.bl_count[Qe];We!==0;)Ut<(Ze=be.heap[--Le])||(ft[2*Ze+1]!==Qe&&(be.opt_len+=(Qe-ft[2*Ze+1])*ft[2*Ze],ft[2*Ze+1]=Qe),We--)}}(Re,Ne),we(Ge,Ie,Re.bl_count)}function ve(Re,Ne,qe){var Ke,He,Ge=-1,rt=Ne[1],st=0,Je=7,Ie=4;for(rt===0&&(Je=138,Ie=3),Ne[2*(qe+1)+1]=65535,Ke=0;Ke<=qe;Ke++)He=rt,rt=Ne[2*(Ke+1)+1],++st<Je&&He===rt||(st<Ie?Re.bl_tree[2*He]+=st:He!==0?(He!==Ge&&Re.bl_tree[2*He]++,Re.bl_tree[2*Z]++):st<=10?Re.bl_tree[2*ne]++:Re.bl_tree[2*re]++,Ge=He,Ie=(st=0)===rt?(Je=138,3):He===rt?(Je=6,3):(Je=7,4))}function Ae(Re,Ne,qe){var Ke,He,Ge=-1,rt=Ne[1],st=0,Je=7,Ie=4;for(rt===0&&(Je=138,Ie=3),Ke=0;Ke<=qe;Ke++)if(He=rt,rt=Ne[2*(Ke+1)+1],!(++st<Je&&He===rt)){if(st<Ie)for(;he(Re,He,Re.bl_tree),--st!=0;);else He!==0?(He!==Ge&&(he(Re,He,Re.bl_tree),st--),he(Re,Z,Re.bl_tree),fe(Re,st-3,2)):st<=10?(he(Re,ne,Re.bl_tree),fe(Re,st-3,3)):(he(Re,re,Re.bl_tree),fe(Re,st-11,7));Ge=He,Ie=(st=0)===rt?(Je=138,3):He===rt?(Je=6,3):(Je=7,4)}}B(oe);var Ve=!1;function Pe(Re,Ne,qe,Ke){fe(Re,(A<<1)+(Ke?1:0),3),function(He,Ge,rt,st){$e(He),st&&(te(He,rt),te(He,~rt)),S.arraySet(He.pending_buf,He.window,Ge,rt,He.pending),He.pending+=rt}(Re,Ne,qe,!0)}E._tr_init=function(Re){Ve||(function(){var Ne,qe,Ke,He,Ge,rt=new Array(j+1);for(He=Ke=0;He<I-1;He++)for(z[He]=Ke,Ne=0;Ne<1<<X[He];Ne++)O[Ke++]=He;for(O[Ke-1]=He,He=Ge=0;He<16;He++)for(oe[He]=Ge,Ne=0;Ne<1<<ce[He];Ne++)W[Ge++]=He;for(Ge>>=7;He<V;He++)for(oe[He]=Ge<<7,Ne=0;Ne<1<<ce[He]-7;Ne++)W[256+Ge++]=He;for(qe=0;qe<=j;qe++)rt[qe]=0;for(Ne=0;Ne<=143;)ye[2*Ne+1]=8,Ne++,rt[8]++;for(;Ne<=255;)ye[2*Ne+1]=9,Ne++,rt[9]++;for(;Ne<=279;)ye[2*Ne+1]=7,Ne++,rt[7]++;for(;Ne<=287;)ye[2*Ne+1]=8,Ne++,rt[8]++;for(we(ye,M+1,rt),Ne=0;Ne<V;Ne++)ie[2*Ne+1]=5,ie[2*Ne]=Ee(Ne,5);J=new se(ye,X,D+1,M,j),ee=new se(ie,ce,0,V,j),ae=new se(new Array(0),ue,0,L,H)}(),Ve=!0),Re.l_desc=new G(Re.dyn_ltree,J),Re.d_desc=new G(Re.dyn_dtree,ee),Re.bl_desc=new G(Re.bl_tree,ae),Re.bi_buf=0,Re.bi_valid=0,xe(Re)},E._tr_stored_block=Pe,E._tr_flush_block=function(Re,Ne,qe,Ke){var He,Ge,rt=0;0<Re.level?(Re.strm.data_type===2&&(Re.strm.data_type=function(st){var Je,Ie=4093624447;for(Je=0;Je<=31;Je++,Ie>>>=1)if(1&Ie&&st.dyn_ltree[2*Je]!==0)return C;if(st.dyn_ltree[18]!==0||st.dyn_ltree[20]!==0||st.dyn_ltree[26]!==0)return T;for(Je=32;Je<D;Je++)if(st.dyn_ltree[2*Je]!==0)return T;return C}(Re)),Be(Re,Re.l_desc),Be(Re,Re.d_desc),rt=function(st){var Je;for(ve(st,st.dyn_ltree,st.l_desc.max_code),ve(st,st.dyn_dtree,st.d_desc.max_code),Be(st,st.bl_desc),Je=L-1;3<=Je&&st.bl_tree[2*_e[Je]+1]===0;Je--);return st.opt_len+=3*(Je+1)+5+5+4,Je}(Re),He=Re.opt_len+3+7>>>3,(Ge=Re.static_len+3+7>>>3)<=He&&(He=Ge)):He=Ge=qe+5,qe+4<=He&&Ne!==-1?Pe(Re,Ne,qe,Ke):Re.strategy===4||Ge===He?(fe(Re,2+(Ke?1:0),3),me(Re,ye,ie)):(fe(Re,4+(Ke?1:0),3),function(st,Je,Ie,be){var Te;for(fe(st,Je-257,5),fe(st,Ie-1,5),fe(st,be-4,4),Te=0;Te<be;Te++)fe(st,st.bl_tree[2*_e[Te]+1],3);Ae(st,st.dyn_ltree,Je-1),Ae(st,st.dyn_dtree,Ie-1)}(Re,Re.l_desc.max_code+1,Re.d_desc.max_code+1,rt+1),me(Re,Re.dyn_ltree,Re.dyn_dtree)),xe(Re),Ke&&$e(Re)},E._tr_tally=function(Re,Ne,qe){return Re.pending_buf[Re.d_buf+2*Re.last_lit]=Ne>>>8&255,Re.pending_buf[Re.d_buf+2*Re.last_lit+1]=255&Ne,Re.pending_buf[Re.l_buf+Re.last_lit]=255&qe,Re.last_lit++,Ne===0?Re.dyn_ltree[2*qe]++:(Re.matches++,Ne--,Re.dyn_ltree[2*(O[qe]+D+1)]++,Re.dyn_dtree[2*q(Ne)]++),Re.last_lit===Re.lit_bufsize-1},E._tr_align=function(Re){fe(Re,2,3),he(Re,Y,ye),function(Ne){Ne.bi_valid===16?(te(Ne,Ne.bi_buf),Ne.bi_buf=0,Ne.bi_valid=0):8<=Ne.bi_valid&&(Ne.pending_buf[Ne.pending++]=255&Ne.bi_buf,Ne.bi_buf>>=8,Ne.bi_valid-=8)}(Re)}},{"../utils/common":41}],53:[function(_,x,E){x.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(_,x,E){(function(S){(function(C,T){if(!C.setImmediate){var B,A,I,D,M=1,V={},L=!1,F=C.document,j=Object.getPrototypeOf&&Object.getPrototypeOf(C);j=j&&j.setTimeout?j:C,B={}.toString.call(C.process)==="[object process]"?function(Z){browser$1$1.nextTick(function(){H(Z)})}:function(){if(C.postMessage&&!C.importScripts){var Z=!0,ne=C.onmessage;return C.onmessage=function(){Z=!1},C.postMessage("","*"),C.onmessage=ne,Z}}()?(D="setImmediate$"+Math.random()+"$",C.addEventListener?C.addEventListener("message",Y,!1):C.attachEvent("onmessage",Y),function(Z){C.postMessage(D+Z,"*")}):C.MessageChannel?((I=new MessageChannel).port1.onmessage=function(Z){H(Z.data)},function(Z){I.port2.postMessage(Z)}):F&&"onreadystatechange"in F.createElement("script")?(A=F.documentElement,function(Z){var ne=F.createElement("script");ne.onreadystatechange=function(){H(Z),ne.onreadystatechange=null,A.removeChild(ne),ne=null},A.appendChild(ne)}):function(Z){setTimeout(H,0,Z)},j.setImmediate=function(Z){typeof Z!="function"&&(Z=new Function(""+Z));for(var ne=new Array(arguments.length-1),re=0;re<ne.length;re++)ne[re]=arguments[re+1];var X={callback:Z,args:ne};return V[M]=X,B(M),M++},j.clearImmediate=U}function U(Z){delete V[Z]}function H(Z){if(L)setTimeout(H,0,Z);else{var ne=V[Z];if(ne){L=!0;try{(function(re){var X=re.callback,ce=re.args;switch(ce.length){case 0:X();break;case 1:X(ce[0]);break;case 2:X(ce[0],ce[1]);break;case 3:X(ce[0],ce[1],ce[2]);break;default:X.apply(T,ce)}})(ne)}finally{U(Z),L=!1}}}}function Y(Z){Z.source===C&&typeof Z.data=="string"&&Z.data.indexOf(D)===0&&H(+Z.data.slice(D.length))}})(typeof self>"u"?S===void 0?this:S:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);var jszip_minExports=jszip_min.exports;const JSZip=getDefaultExportFromCjs(jszip_minExports),e=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{}catch{return!1}return"showOpenFilePicker"in self})();e?Promise.resolve().then(function(){return l}):Promise.resolve().then(function(){return v$1});e?Promise.resolve().then(function(){return y}):Promise.resolve().then(function(){return b});const a=e?Promise.resolve().then(function(){return m}):Promise.resolve().then(function(){return k});async function o(...t){return(await a).default(...t)}const s$2=async t=>{const n=await t.getFile();return n.handle=t,n};var c$1=async(t=[{}])=>{Array.isArray(t)||(t=[t]);const n=[];t.forEach((E,S)=>{n[S]={description:E.description||"Files",accept:{}},E.mimeTypes?E.mimeTypes.map(C=>{n[S].accept[C]=E.extensions||[]}):n[S].accept["*/*"]=E.extensions||[]});const _=await window.showOpenFilePicker({id:t[0].id,startIn:t[0].startIn,types:n,multiple:t[0].multiple||!1,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1}),x=await Promise.all(_.map(s$2));return t[0].multiple?x:x[0]},l={__proto__:null,default:c$1};function u(t){function n(_){if(Object(_)!==_)return Promise.reject(new TypeError(_+" is not an object."));var x=_.done;return Promise.resolve(_.value).then(function(E){return{value:E,done:x}})}return u=function(_){this.s=_,this.n=_.next},u.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(_){var x=this.s.return;return x===void 0?Promise.resolve({value:_,done:!0}):n(x.apply(this.s,arguments))},throw:function(_){var x=this.s.return;return x===void 0?Promise.reject(_):n(x.apply(this.s,arguments))}},new u(t)}const p=async(t,n,_=t.name,x)=>{const E=[],S=[];var C,T=!1,B=!1;try{for(var A,I=function(D){var M,V,L,F=2;for(typeof Symbol<"u"&&(V=Symbol.asyncIterator,L=Symbol.iterator);F--;){if(V&&(M=D[V])!=null)return M.call(D);if(L&&(M=D[L])!=null)return new u(M.call(D));V="@@asyncIterator",L="@@iterator"}throw new TypeError("Object is not async iterable")}(t.values());T=!(A=await I.next()).done;T=!1){const D=A.value,M=`${_}/${D.name}`;D.kind==="file"?S.push(D.getFile().then(V=>(V.directoryHandle=t,V.handle=D,Object.defineProperty(V,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>M})))):D.kind!=="directory"||!n||x&&x(D)||E.push(p(D,n,M,x))}}catch(D){B=!0,C=D}finally{try{T&&I.return!=null&&await I.return()}finally{if(B)throw C}}return[...(await Promise.all(E)).flat(),...await Promise.all(S)]};var d=async(t={})=>{t.recursive=t.recursive||!1,t.mode=t.mode||"read";const n=await window.showDirectoryPicker({id:t.id,startIn:t.startIn,mode:t.mode});return(await(await n.values()).next()).done?[n]:p(n,t.recursive,void 0,t.skipDirectory)},y={__proto__:null,default:d},f$1=async(t,n=[{}],_=null,x=!1,E=null)=>{Array.isArray(n)||(n=[n]),n[0].fileName=n[0].fileName||"Untitled";const S=[];let C=null;if(t instanceof Blob&&t.type?C=t.type:t.headers&&t.headers.get("content-type")&&(C=t.headers.get("content-type")),n.forEach((A,I)=>{S[I]={description:A.description||"Files",accept:{}},A.mimeTypes?(I===0&&C&&A.mimeTypes.push(C),A.mimeTypes.map(D=>{S[I].accept[D]=A.extensions||[]})):C?S[I].accept[C]=A.extensions||[]:S[I].accept["*/*"]=A.extensions||[]}),_)try{await _.getFile()}catch(A){if(_=null,x)throw A}const T=_||await window.showSaveFilePicker({suggestedName:n[0].fileName,id:n[0].id,startIn:n[0].startIn,types:S,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1});!_&&E&&E(T);const B=await T.createWritable();return"stream"in t?(await t.stream().pipeTo(B),T):"body"in t?(await t.body.pipeTo(B),T):(await B.write(await t),await B.close(),T)},m={__proto__:null,default:f$1},w=async(t=[{}])=>(Array.isArray(t)||(t=[t]),new Promise((n,_)=>{const x=document.createElement("input");x.type="file";const E=[...t.map(B=>B.mimeTypes||[]),...t.map(B=>B.extensions||[])].join();x.multiple=t[0].multiple||!1,x.accept=E||"",x.style.display="none",document.body.append(x);const S=B=>{typeof C=="function"&&C(),n(B)},C=t[0].legacySetup&&t[0].legacySetup(S,()=>C(_),x),T=()=>{window.removeEventListener("focus",T),x.remove()};x.addEventListener("click",()=>{window.addEventListener("focus",T)}),x.addEventListener("change",()=>{window.removeEventListener("focus",T),x.remove(),S(x.multiple?Array.from(x.files):x.files[0])}),"showPicker"in HTMLInputElement.prototype?x.showPicker():x.click()})),v$1={__proto__:null,default:w},h=async(t=[{}])=>(Array.isArray(t)||(t=[t]),t[0].recursive=t[0].recursive||!1,new Promise((n,_)=>{const x=document.createElement("input");x.type="file",x.webkitdirectory=!0;const E=C=>{typeof S=="function"&&S(),n(C)},S=t[0].legacySetup&&t[0].legacySetup(E,()=>S(_),x);x.addEventListener("change",()=>{let C=Array.from(x.files);t[0].recursive?t[0].recursive&&t[0].skipDirectory&&(C=C.filter(T=>T.webkitRelativePath.split("/").every(B=>!t[0].skipDirectory({name:B,kind:"directory"})))):C=C.filter(T=>T.webkitRelativePath.split("/").length===2),E(C)}),"showPicker"in HTMLInputElement.prototype?x.showPicker():x.click()})),b={__proto__:null,default:h},P=async(t,n={})=>{Array.isArray(n)&&(n=n[0]);const _=document.createElement("a");let x=t;"body"in t&&(x=await async function(C,T){const B=C.getReader(),A=new ReadableStream({start:M=>async function V(){return B.read().then(({done:L,value:F})=>{if(!L)return M.enqueue(F),V();M.close()})}()}),I=new Response(A),D=await I.blob();return B.releaseLock(),new Blob([D],{type:T})}(t.body,t.headers.get("content-type"))),_.download=n.fileName||"Untitled",_.href=URL.createObjectURL(await x);const E=()=>{typeof S=="function"&&S()},S=n.legacySetup&&n.legacySetup(E,()=>S(),_);return _.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(_.href),3e4),E()}),_.click(),null},k={__proto__:null,default:P};function normalizeArray(t,n){for(var _=0,x=t.length-1;x>=0;x--){var E=t[x];E==="."?t.splice(x,1):E===".."?(t.splice(x,1),_++):_&&(t.splice(x,1),_--)}if(n)for(;_--;_)t.unshift("..");return t}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(t){return splitPathRe.exec(t).slice(1)};function resolve$2(){for(var t="",n=!1,_=arguments.length-1;_>=-1&&!n;_--){var x=_>=0?arguments[_]:"/";if(typeof x!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!x)continue;t=x+"/"+t,n=x.charAt(0)==="/"}return t=normalizeArray(filter$1(t.split("/"),function(E){return!!E}),!n).join("/"),(n?"/":"")+t||"."}function normalize(t){var n=isAbsolute(t),_=substr(t,-1)==="/";return t=normalizeArray(filter$1(t.split("/"),function(x){return!!x}),!n).join("/"),!t&&!n&&(t="."),t&&_&&(t+="/"),(n?"/":"")+t}function isAbsolute(t){return t.charAt(0)==="/"}function join$1(){var t=Array.prototype.slice.call(arguments,0);return normalize(filter$1(t,function(n,_){if(typeof n!="string")throw new TypeError("Arguments to path.join must be strings");return n}).join("/"))}function relative(t,n){t=resolve$2(t).substr(1),n=resolve$2(n).substr(1);function _(A){for(var I=0;I<A.length&&A[I]==="";I++);for(var D=A.length-1;D>=0&&A[D]==="";D--);return I>D?[]:A.slice(I,D-I+1)}for(var x=_(t.split("/")),E=_(n.split("/")),S=Math.min(x.length,E.length),C=S,T=0;T<S;T++)if(x[T]!==E[T]){C=T;break}for(var B=[],T=C;T<x.length;T++)B.push("..");return B=B.concat(E.slice(C)),B.join("/")}var sep="/",delimiter=":";function dirname(t){var n=splitPath(t),_=n[0],x=n[1];return!_&&!x?".":(x&&(x=x.substr(0,x.length-1)),_+x)}function basename(t,n){var _=splitPath(t)[2];return n&&_.substr(-1*n.length)===n&&(_=_.substr(0,_.length-n.length)),_}function extname(t){return splitPath(t)[3]}const path={extname,basename,dirname,sep,delimiter,relative,join:join$1,isAbsolute,normalize,resolve:resolve$2};function filter$1(t,n){if(t.filter)return t.filter(n);for(var _=[],x=0;x<t.length;x++)n(t[x],x,t)&&_.push(t[x]);return _}var substr="ab".substr(-1)==="b"?function(t,n,_){return t.substr(n,_)}:function(t,n,_){return n<0&&(n=t.length+n),t.substr(n,_)};const path$1=Object.freeze(Object.defineProperty({__proto__:null,basename,default:path,delimiter,dirname,extname,isAbsolute,join:join$1,normalize,relative,resolve:resolve$2,sep},Symbol.toStringTag,{value:"Module"}));function isElectron$1(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof browser$1$1<"u"&&typeof browser$1$1.versions=="object"&&browser$1$1.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var isElectron_1=isElectron$1;const detectElectron=getDefaultExportFromCjs(isElectron_1),isEnvWithDom=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,isElectron=detectElectron(),isBrowser$1=isEnvWithDom&&!isElectron,isElectronMain=isElectron&&!isEnvWithDom,isElectronRenderer$1=isElectron&&isEnvWithDom,isNode=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!isElectron,isWebWorker=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;typeof globalThis.process<"u"&&typeof globalThis.process.env<"u"&&globalThis.process.env["NODE"+(()=>"_")()+"ENV"];const isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";function traduire(t,n){const _=n.find(E=>t[E]!==void 0);return _?t[_]:void 0}async function zipper(t,n,_){_.endsWith(".zip")||(_=`${_}.zip`);const x=new JSZip;for(const S of t)x.file(S.nom,S.octets);const E=x.folder("sfip");for(const S of n)E.file(S.nom,S.octets);await sauvegarderFichierZip({fichierZip:x,nomFichier:_})}async function sauvegarderFichierZip({fichierZip:t,nomFichier:n}){if(isNode||isElectronMain){const _=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),x=t.generateNodeStream();_.mkdirSync(path.dirname(n),{recursive:!0});const E=_.createWriteStream(n),S=x.pipe(E);return new Promise(C=>S.on("finish",C))}else{const _=await t.generateAsync({type:"blob"});await o(_,{fileName:n})}}var encode_1$6=encode$t,MSB$5=128,REST$5=127,MSBALL$4=~REST$5,INT$4=Math.pow(2,31);function encode$t(t,n,_){n=n||[],_=_||0;for(var x=_;t>=INT$4;)n[_++]=t&255|MSB$5,t/=128;for(;t&MSBALL$4;)n[_++]=t&255|MSB$5,t>>>=7;return n[_]=t|0,encode$t.bytes=_-x+1,n}var decode$w=read$8,MSB$1$4=128,REST$1$4=127;function read$8(t,x){var _=0,x=x||0,E=0,S=x,C,T=t.length;do{if(S>=T)throw read$8.bytes=0,new RangeError("Could not decode varint");C=t[S++],_+=E<28?(C&REST$1$4)<<E:(C&REST$1$4)*Math.pow(2,E),E+=7}while(C>=MSB$1$4);return read$8.bytes=S-x,_}var N1$4=Math.pow(2,7),N2$4=Math.pow(2,14),N3$4=Math.pow(2,21),N4$4=Math.pow(2,28),N5$4=Math.pow(2,35),N6$4=Math.pow(2,42),N7$4=Math.pow(2,49),N8$4=Math.pow(2,56),N9$4=Math.pow(2,63),length$4=function(t){return t<N1$4?1:t<N2$4?2:t<N3$4?3:t<N4$4?4:t<N5$4?5:t<N6$4?6:t<N7$4?7:t<N8$4?8:t<N9$4?9:10},varint$4={encode:encode_1$6,decode:decode$w,encodingLength:length$4},_brrp_varint$4=varint$4;const decode$v=(t,n=0)=>[_brrp_varint$4.decode(t,n),_brrp_varint$4.decode.bytes],encodeTo$4=(t,n,_=0)=>(_brrp_varint$4.encode(t,n,_),n),encodingLength$4=t=>_brrp_varint$4.encodingLength(t),equals$8=(t,n)=>{if(t===n)return!0;if(t.byteLength!==n.byteLength)return!1;for(let _=0;_<t.byteLength;_++)if(t[_]!==n[_])return!1;return!0},coerce$5=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$6=t=>new TextEncoder().encode(t),toString$a=t=>new TextDecoder().decode(t),create$7=(t,n)=>{const _=n.byteLength,x=encodingLength$4(t),E=x+encodingLength$4(_),S=new Uint8Array(E+_);return encodeTo$4(t,S,0),encodeTo$4(_,S,x),S.set(n,E),new Digest$4(t,_,n,S)},decode$u=t=>{const n=coerce$5(t),[_,x]=decode$v(n),[E,S]=decode$v(n.subarray(x)),C=n.subarray(x+S);if(C.byteLength!==E)throw new Error("Incorrect length");return new Digest$4(_,E,C,n)},equals$7=(t,n)=>t===n?!0:t.code===n.code&&t.size===n.size&&equals$8(t.bytes,n.bytes);let Digest$4=class{constructor(n,_,x,E){this.code=n,this.size=_,this.digest=x,this.bytes=E}};function base$8(t,n){if(t.length>=255)throw new TypeError("Alphabet too long");for(var _=new Uint8Array(256),x=0;x<_.length;x++)_[x]=255;for(var E=0;E<t.length;E++){var S=t.charAt(E),C=S.charCodeAt(0);if(_[C]!==255)throw new TypeError(S+" is ambiguous");_[C]=E}var T=t.length,B=t.charAt(0),A=Math.log(T)/Math.log(256),I=Math.log(256)/Math.log(T);function D(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var F=0,j=0,U=0,H=L.length;U!==H&&L[U]===0;)U++,F++;for(var Y=(H-U)*I+1>>>0,Z=new Uint8Array(Y);U!==H;){for(var ne=L[U],re=0,X=Y-1;(ne!==0||re<j)&&X!==-1;X--,re++)ne+=256*Z[X]>>>0,Z[X]=ne%T>>>0,ne=ne/T>>>0;if(ne!==0)throw new Error("Non-zero carry");j=re,U++}for(var ce=Y-j;ce!==Y&&Z[ce]===0;)ce++;for(var ue=B.repeat(F);ce<Y;++ce)ue+=t.charAt(Z[ce]);return ue}function M(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var F=0;if(L[F]!==" "){for(var j=0,U=0;L[F]===B;)j++,F++;for(var H=(L.length-F)*A+1>>>0,Y=new Uint8Array(H);L[F];){var Z=_[L.charCodeAt(F)];if(Z===255)return;for(var ne=0,re=H-1;(Z!==0||ne<U)&&re!==-1;re--,ne++)Z+=T*Y[re]>>>0,Y[re]=Z%256>>>0,Z=Z/256>>>0;if(Z!==0)throw new Error("Non-zero carry");U=ne,F++}if(L[F]!==" "){for(var X=H-U;X!==H&&Y[X]===0;)X++;for(var ce=new Uint8Array(j+(H-X)),ue=j;X!==H;)ce[ue++]=Y[X++];return ce}}}function V(L){var F=M(L);if(F)return F;throw new Error(`Non-${n} character`)}return{encode:D,decodeUnsafe:M,decode:V}}var src$8=base$8,_brrp__multiformats_scope_baseX$5=src$8;let Encoder$6=class{constructor(n,_,x){this.name=n,this.prefix=_,this.baseEncode=x}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}},Decoder$6=class{constructor(n,_,x){if(this.name=n,this.prefix=_,_.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=_.codePointAt(0),this.baseDecode=x}decode(n){if(typeof n=="string"){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(n){return or$5(this,n)}},ComposedDecoder$5=class{constructor(n){this.decoders=n}or(n){return or$5(this,n)}decode(n){const _=n[0],x=this.decoders[_];if(x)return x.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$5=(t,n)=>new ComposedDecoder$5({...t.decoders||{[t.prefix]:t},...n.decoders||{[n.prefix]:n}});let Codec$6=class{constructor(n,_,x,E){this.name=n,this.prefix=_,this.baseEncode=x,this.baseDecode=E,this.encoder=new Encoder$6(n,_,x),this.decoder=new Decoder$6(n,_,E)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}};const from$9=({name:t,prefix:n,encode:_,decode:x})=>new Codec$6(t,n,_,x),baseX$5=({prefix:t,name:n,alphabet:_})=>{const{encode:x,decode:E}=_brrp__multiformats_scope_baseX$5(_,n);return from$9({prefix:t,name:n,encode:x,decode:S=>coerce$5(E(S))})},decode$t=(t,n,_,x)=>{const E={};for(let I=0;I<n.length;++I)E[n[I]]=I;let S=t.length;for(;t[S-1]==="=";)--S;const C=new Uint8Array(S*_/8|0);let T=0,B=0,A=0;for(let I=0;I<S;++I){const D=E[t[I]];if(D===void 0)throw new SyntaxError(`Non-${x} character`);B=B<<_|D,T+=_,T>=8&&(T-=8,C[A++]=255&B>>T)}if(T>=_||255&B<<8-T)throw new SyntaxError("Unexpected end of data");return C},encode$s=(t,n,_)=>{const x=n[n.length-1]==="=",E=(1<<_)-1;let S="",C=0,T=0;for(let B=0;B<t.length;++B)for(T=T<<8|t[B],C+=8;C>_;)C-=_,S+=n[E&T>>C];if(C&&(S+=n[E&T<<_-C]),x)for(;S.length*_&7;)S+="=";return S},rfc4648$5=({name:t,prefix:n,bitsPerChar:_,alphabet:x})=>from$9({prefix:n,name:t,encode(E){return encode$s(E,x,_)},decode(E){return decode$t(E,x,_,t)}}),base58btc$5=baseX$5({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$1=baseX$5({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$5,base58flickr:base58flickr$1},Symbol.toStringTag,{value:"Module"})),base32$5=rfc4648$5({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$1=rfc4648$5({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$1=rfc4648$5({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$1=rfc4648$5({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$1=rfc4648$5({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$1=rfc4648$5({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$1=rfc4648$5({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$1=rfc4648$5({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$1=rfc4648$5({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$6=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$5,base32hex:base32hex$1,base32hexpad:base32hexpad$1,base32hexpadupper:base32hexpadupper$1,base32hexupper:base32hexupper$1,base32pad:base32pad$1,base32padupper:base32padupper$1,base32upper:base32upper$1,base32z:base32z$1},Symbol.toStringTag,{value:"Module"}));let CID$3=class mn{constructor(n,_,x,E){this.code=_,this.version=n,this.multihash=x,this.bytes=E,this.byteOffset=E.byteOffset,this.byteLength=E.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly$2,version:readonly$2,multihash:readonly$2,bytes:readonly$2,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:n,multihash:_}=this;if(n!==DAG_PB_CODE$3)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(_.code!==SHA_256_CODE$3)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return mn.createV0(_)}}}toV1(){switch(this.version){case 0:{const{code:n,digest:_}=this.multihash,x=create$7(n,_);return mn.createV1(this.code,x)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(n){return n&&this.code===n.code&&this.version===n.version&&equals$7(this.multihash,n.multihash)}toString(n){const{bytes:_,version:x,_baseCache:E}=this;switch(x){case 0:return toStringV0$3(_,E,n||base58btc$5.encoder);default:return toStringV1$3(_,E,n||base32$5.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(n){return deprecate$1(/^0\.0/,IS_CID_DEPRECATION),!!(n&&(n[cidSymbol$3]||n.asCID===n))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(n){if(n instanceof mn)return n;if(n!=null&&n.asCID===n){const{version:_,code:x,multihash:E,bytes:S}=n;return new mn(_,x,E,S||encodeCID$3(_,x,E.bytes))}else if(n!=null&&n[cidSymbol$3]===!0){const{version:_,multihash:x,code:E}=n,S=decode$u(x);return mn.create(_,E,S)}else return null}static create(n,_,x){if(typeof _!="number")throw new Error("String codecs are no longer supported");switch(n){case 0:{if(_!==DAG_PB_CODE$3)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$3}) block encoding`);return new mn(n,_,x,x.bytes)}case 1:{const E=encodeCID$3(n,_,x.bytes);return new mn(n,_,x,E)}default:throw new Error("Invalid version")}}static createV0(n){return mn.create(0,DAG_PB_CODE$3,n)}static createV1(n,_){return mn.create(1,n,_)}static decode(n){const[_,x]=mn.decodeFirst(n);if(x.length)throw new Error("Incorrect length");return _}static decodeFirst(n){const _=mn.inspectBytes(n),x=_.size-_.multihashSize,E=coerce$5(n.subarray(x,x+_.multihashSize));if(E.byteLength!==_.multihashSize)throw new Error("Incorrect length");const S=E.subarray(_.multihashSize-_.digestSize),C=new Digest$4(_.multihashCode,_.digestSize,S,E);return[_.version===0?mn.createV0(C):mn.createV1(_.codec,C),n.subarray(_.size)]}static inspectBytes(n){let _=0;const x=()=>{const[D,M]=decode$v(n.subarray(_));return _+=M,D};let E=x(),S=DAG_PB_CODE$3;if(E===18?(E=0,_=0):E===1&&(S=x()),E!==0&&E!==1)throw new RangeError(`Invalid CID version ${E}`);const C=_,T=x(),B=x(),A=_+B,I=A-C;return{version:E,codec:S,multihashCode:T,digestSize:B,multihashSize:I,size:A}}static parse(n,_){const[x,E]=parseCIDtoBytes$3(n,_),S=mn.decode(E);return S._baseCache.set(x,n),S}};const parseCIDtoBytes$3=(t,n)=>{switch(t[0]){case"Q":{const _=n||base58btc$5;return[base58btc$5.prefix,_.decode(`${base58btc$5.prefix}${t}`)]}case base58btc$5.prefix:{const _=n||base58btc$5;return[base58btc$5.prefix,_.decode(t)]}case base32$5.prefix:{const _=n||base32$5;return[base32$5.prefix,_.decode(t)]}default:{if(n==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],n.decode(t)]}}},toStringV0$3=(t,n,_)=>{const{prefix:x}=_;if(x!==base58btc$5.prefix)throw Error(`Cannot string encode V0 in ${_.name} encoding`);const E=n.get(x);if(E==null){const S=_.encode(t).slice(1);return n.set(x,S),S}else return E},toStringV1$3=(t,n,_)=>{const{prefix:x}=_,E=n.get(x);if(E==null){const S=_.encode(t);return n.set(x,S),S}else return E},DAG_PB_CODE$3=112,SHA_256_CODE$3=18,encodeCID$3=(t,n,_)=>{const x=encodingLength$4(t),E=x+encodingLength$4(n),S=new Uint8Array(E+_.byteLength);return encodeTo$4(t,S,0),encodeTo$4(n,S,x),S.set(_,E),S},cidSymbol$3=Symbol.for("@ipld/js-cid/CID"),readonly$2={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version$k="0.0.0-dev",deprecate$1=(t,n)=>{if(t.test(version$k))console.warn(n);else throw new Error(n)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;function asUint8Array$2(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function alloc$2(t=0){return globalThis.Buffer?.alloc!=null?asUint8Array$2(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function allocUnsafe$2(t=0){return globalThis.Buffer?.allocUnsafe!=null?asUint8Array$2(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function concat$5(t,n){n==null&&(n=t.reduce((E,S)=>E+S.length,0));const _=allocUnsafe$2(n);let x=0;for(const E of t)_.set(E,x),x+=E.length;return asUint8Array$2(_)}function cidValide(t){if(typeof t=="string")try{return CID$3.parse(t),!0}catch{return!1}return!1}async function toBuffer$2(t,n){let _=new Uint8Array(0);for await(const x of t)if(_=concat$5([_,x],_.length+x.length),n!==void 0&&_.length>n)return null;return _}const orbitdb_isValidAdresse=t=>{const n=C=>C!==""&&C!==" ";t=t.toString().replace(/\\/g,"/");const _=(C,T)=>!((T===0||T===1)&&t.toString().indexOf("/orbit")===0&&C==="orbitdb"),x=t.toString().split("/").filter(_).filter(n);let E;const S=C=>{const T=["zd","Qm","ba","k5"];for(const B of T)if(C.indexOf(B)>-1)return!0;return!1};try{E=S(x[0])?CID$3.parse(x[0]).toString():null}catch{return!1}return E!==null};function adresseOrbiteValide(t){return typeof t=="string"&&t.startsWith("/orbitdb/")&&orbitdb_isValidAdresse(t)}class metteurUneFois extends eventsExports.EventEmitter{constructor(_,x){super();wt(this,"condition");wt(this,"rsultatPrt");wt(this,"fOublier");wt(this,"rsultat");wt(this,"f");this.condition=x||(()=>!0),this.rsultatPrt=!1,this.f=_,this.initialiser()}async initialiser(){const _=async x=>{this.condition(x)&&(this.rsultat=x,this.rsultatPrt=!0,this.fOublier&&this.lorsquePrt())};this.fOublier=await this.f(_),this.lorsquePrt()}lorsquePrt(){if(this.rsultatPrt){if(!this.fOublier)throw new Error("Fuite !!");this.fOublier&&this.fOublier(),this.emit("fini",this.rsultat)}}}const suivreBdDeFonction=async({fRacine:t,f:n,fSuivre:_})=>{let x,E,S=!0;const C=await t({fSuivreRacine:async T=>{T===void 0&&S&&(S=!1,await n(void 0)),T!==E&&(E=T,x&&await x(),E?x=await _({id:E,fSuivreBd:n}):(await n(void 0),x=void 0))}});return async()=>{await C(),x&&await x()}},uneFois=async function(t,n){const _=new metteurUneFois(t,n);return(await once_1(_,"fini"))[0]},faisRien=async()=>{},ignorerNonDfinis=t=>async n=>{if(n!==void 0)return await t(n)};var typeDetect$1={exports:{}};(function(t,n){(function(_,x){t.exports=x()})(commonjsGlobal,function(){var _=typeof Promise=="function",x=typeof self=="object"?self:commonjsGlobal,E=typeof Symbol<"u",S=typeof Map<"u",C=typeof Set<"u",T=typeof WeakMap<"u",B=typeof WeakSet<"u",A=typeof DataView<"u",I=E&&typeof Symbol.iterator<"u",D=E&&typeof Symbol.toStringTag<"u",M=C&&typeof Set.prototype.entries=="function",V=S&&typeof Map.prototype.entries=="function",L=M&&Object.getPrototypeOf(new Set().entries()),F=V&&Object.getPrototypeOf(new Map().entries()),j=I&&typeof Array.prototype[Symbol.iterator]=="function",U=j&&Object.getPrototypeOf([][Symbol.iterator]()),H=I&&typeof String.prototype[Symbol.iterator]=="function",Y=H&&Object.getPrototypeOf(""[Symbol.iterator]()),Z=8,ne=-1;function re(X){var ce=typeof X;if(ce!=="object")return ce;if(X===null)return"null";if(X===x)return"global";if(Array.isArray(X)&&(D===!1||!(Symbol.toStringTag in X)))return"Array";if(typeof window=="object"&&window!==null){if(typeof window.location=="object"&&X===window.location)return"Location";if(typeof window.document=="object"&&X===window.document)return"Document";if(typeof window.navigator=="object"){if(typeof window.navigator.mimeTypes=="object"&&X===window.navigator.mimeTypes)return"MimeTypeArray";if(typeof window.navigator.plugins=="object"&&X===window.navigator.plugins)return"PluginArray"}if((typeof window.HTMLElement=="function"||typeof window.HTMLElement=="object")&&X instanceof window.HTMLElement){if(X.tagName==="BLOCKQUOTE")return"HTMLQuoteElement";if(X.tagName==="TD")return"HTMLTableDataCellElement";if(X.tagName==="TH")return"HTMLTableHeaderCellElement"}}var ue=D&&X[Symbol.toStringTag];if(typeof ue=="string")return ue;var _e=Object.getPrototypeOf(X);return _e===RegExp.prototype?"RegExp":_e===Date.prototype?"Date":_&&_e===Promise.prototype?"Promise":C&&_e===Set.prototype?"Set":S&&_e===Map.prototype?"Map":B&&_e===WeakSet.prototype?"WeakSet":T&&_e===WeakMap.prototype?"WeakMap":A&&_e===DataView.prototype?"DataView":S&&_e===F?"Map Iterator":C&&_e===L?"Set Iterator":j&&_e===U?"Array Iterator":H&&_e===Y?"String Iterator":_e===null?"Object":Object.prototype.toString.call(X).slice(Z,ne)}return re})})(typeDetect$1);var typeDetectExports=typeDetect$1.exports;const typeDetect=getDefaultExportFromCjs(typeDetectExports),isBufferExists=typeof Buffer<"u",isBufferFromExists=isBufferExists&&typeof Buffer.from<"u",isBuffer$6=isBufferExists?function(n){return Buffer.isBuffer(n)}:function(){return!1},copy$2=isBufferFromExists?function(n){return Buffer.from(n)}:isBufferExists?function(n){return new Buffer(n)}:function(n){return n};function detectType(t){return isBuffer$6(t)?"Buffer":typeDetect(t)}const collectionTypeSet=new Set(["Arguments","Array","Map","Object","Set"]);function get$3(t,n,_=null){switch(_||detectType(t)){case"Arguments":case"Array":case"Object":return t[n];case"Map":return t.get(n);case"Set":return n}}function isCollection(t){return collectionTypeSet.has(t)}function set$1(t,n,_,x=null){switch(x||detectType(t)){case"Arguments":case"Array":case"Object":t[n]=_;break;case"Map":t.set(n,_);break;case"Set":t.add(_);break}return t}const freeGlobalThis=typeof globalThis<"u"&&globalThis!==null&&globalThis.Object===Object&&globalThis,freeGlobal=typeof global<"u"&&global!==null&&global.Object===Object&&global,freeSelf=typeof self<"u"&&self!==null&&self.Object===Object&&self,globalObject=freeGlobalThis||freeGlobal||freeSelf||Function("return this")();function copyArrayBuffer(t){return t.slice(0)}function copyBoolean(t){return new Boolean(t.valueOf())}function copyDataView(t){return new DataView(t.buffer)}function copyBuffer(t){return copy$2(t)}function copyDate(t){return new Date(t.getTime())}function copyNumber(t){return new Number(t)}function copyRegExp(t){return new RegExp(t.source,t.flags)}function copyString(t){return new String(t)}function copyTypedArray(t,n){return globalObject[n].from?globalObject[n].from(t):new globalObject[n](t)}function shallowCopy$1(t){return t}function getEmptyArray(){return[]}function getEmptyMap(){return new Map}function getEmptyObject(){return{}}function getEmptySet(){return new Set}const copyMap=new Map([["ArrayBuffer",copyArrayBuffer],["Boolean",copyBoolean],["Buffer",copyBuffer],["DataView",copyDataView],["Date",copyDate],["Number",copyNumber],["RegExp",copyRegExp],["String",copyString],["Float32Array",copyTypedArray],["Float64Array",copyTypedArray],["Int16Array",copyTypedArray],["Int32Array",copyTypedArray],["Int8Array",copyTypedArray],["Uint16Array",copyTypedArray],["Uint32Array",copyTypedArray],["Uint8Array",copyTypedArray],["Uint8ClampedArray",copyTypedArray],["Array Iterator",shallowCopy$1],["Map Iterator",shallowCopy$1],["Promise",shallowCopy$1],["Set Iterator",shallowCopy$1],["String Iterator",shallowCopy$1],["function",shallowCopy$1],["global",shallowCopy$1],["WeakMap",shallowCopy$1],["WeakSet",shallowCopy$1],["boolean",shallowCopy$1],["null",shallowCopy$1],["number",shallowCopy$1],["string",shallowCopy$1],["symbol",shallowCopy$1],["undefined",shallowCopy$1],["Arguments",getEmptyArray],["Array",getEmptyArray],["Map",getEmptyMap],["Object",getEmptyObject],["Set",getEmptySet]]);function noop$7(){}function copy$1(t,n=null,_=noop$7){arguments.length===2&&typeof n=="function"&&(_=n,n=null);const x=n||detectType(t),E=copyMap.get(x);if(x==="Object"){const S=_(t,x);if(S!==void 0)return S}return E?E(t,x):t}function deepcopy(t,n={}){typeof n=="function"&&(n={customizer:n});const{customizer:_}=n,x=detectType(t);if(!isCollection(x))return recursiveCopy(t,null,null,null);const E=copy$1(t,x,_),S=new WeakMap([[t,E]]),C=new WeakSet([t]);return recursiveCopy(t,E,S,C)}function recursiveCopy(t,n,_,x,E){const S=detectType(t),C=copy$1(t,S);if(!isCollection(S))return C;let T;switch(S){case"Arguments":case"Array":T=Object.keys(t);break;case"Object":T=Object.keys(t),T.push(...Object.getOwnPropertySymbols(t));break;case"Map":case"Set":T=t.keys();break}for(let B of T){const A=get$3(t,B,S);if(x.has(A))set$1(n,B,_.get(A),S);else{const I=detectType(A),D=copy$1(A,I);isCollection(I)&&(_.set(A,D),x.add(A)),set$1(n,B,recursiveCopy(A,D,_,x),S)}}return n}class {constructor({:n,_:_,_:x,:E,:S}){wt(this,"");wt(this,"_");wt(this,"_");wt(this,"");wt(this,"");this.=n,this._=_,this._=x,this.=._({:E,_:_,_:x,:S}),this.=Object.assign({},,S)}static _({:n,_:_,_:x,:E}){const S=deepcopy(n),C=S.tableaux.find(B=>B.clef===_);if(!C)throw new Error("    .");return C.cols.find(B=>B.idColonne===(E?.__||__))||(C.cols.push({idVariable:E?.__||__,idColonne:E?.__||__}),S.tableaux=S.tableaux.map(B=>B.clef===_?C:B)),S.nues||(S.nues=[]),S.nues.includes(x)||S.nues.push(x),S}static async ({:n,:_,_:x,:E}){if(!n.nues||!n.bds)throw new Error(" ");const S=await n.nues.crerNue({});_=this._({:_,_:x,_:S,:E});for(const B of _.tableaux){const A=await n.nues.ajouterTableauNue({idNue:S,clefTableau:B.clef});for(const I of B.cols)await n.nues.ajouterColonneTableauNue({idTableau:A,idVariable:I.idVariable,idColonne:I.idColonne}),I.index&&await n.nues.changerColIndexTableauNue({idTableau:A,idColonne:I.idColonne,val:!0});_.motsClefs&&await n.nues.ajouterMotsClefsNue({idNue:S,idsMotsClefs:_.motsClefs})}const C={licence:_.licence,motsClefs:_.motsClefs,nues:[S],tableaux:_.tableaux.map(B=>B.clef===x?{clef:B.clef,cols:[...B.cols,{idColonne:E?.__||__,idVariable:E?.__||__,index:!0}]}:B)},T=await n.bds.crerBdDeSchma({schma:C});return await n.nues.sauvegarderMtadonneNue({idNue:S,clef:___,valeur:T}),S}async __({:n}){return suivreBdDeFonction({fRacine:async({fSuivreRacine:_})=>await this.__({:_}),f:ignorerNonDfinis(n),fSuivre:async({id:_,fSuivreBd:x})=>await this..bds.suivreDonnesDeTableauParClef({idBd:_,clefTableau:this._,f:x})})}async _({:n}){return await this..nues.suivreDonnesTableauNue({idNue:this._,clefTableau:this._,f:async _=>{await n(_.map(x=>({:x.idCompte,:x.lment.empreinte,:x.lment.donnes})))},nRsultatsDsirs:1e3})}async __({:n}){return await this..bds.suivreDonnesDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,f:async _=>{const x=await this..obtIdCompte();await n(_.map(E=>({:x,:E.empreinte,:E.donnes})))}})}async ({:n}){const _=x=>x[this..__]?x:{...x,[this..__]:Date.now()};await this..bds.ajouterlmentTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,vals:_(n)})}async _({:n}){return await this..bds.effacerlmentDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,empreinte:n})}async _({:n,:_}){await this..bds.modifierlmentDeTableauUnique({schmaBd:this.,idNueUnique:this._,clefTableau:this._,vals:n,empreintePrcdente:_})}async __({:n}){const _=async x=>{const E=x[this..___];if(typeof E=="string")return await n(E)};return await this..nues.suivreMtadonnesNue({idNue:this._,f:_})}async __(){return await uneFois(async _=>await this.__({:_}))}async ({:n}){const _=await this.__(),x=Object.assign({},n.,{[this..__]:n.});await this..bds.ajouterlmentTableauParClef({idBd:_,clefTableau:this._,vals:x})}async __({:n}){const _=await this.__();await this..bds.effacerlmentDeTableauParClef({idBd:_,clefTableau:this._,empreintelment:n})}async __({:n,:_}){const x=await this.__();await this..bds.modifierlmentDeTableauParClef({idBd:x,clefTableau:this._,empreintelment:_,vals:n})}async _({:n,:_=""}){const x={:[],:[]},E=this..tableaux.find(B=>B.clef===this._)?.cols.filter(B=>B.index).map(B=>B.idColonne)||[],S=async()=>{const B=[...x.];for(const A of x.){const I=B.find(D=>E.every(M=>D[M]===A[M]));if(I){const D=I[this..__],M=A[this..__];D&&M&&M>D&&B.push(A)}else B.push(A)}return await n(B)},T=[await this.__({:async B=>{x.=B.map(A=>A.donnes),await S()}})];if(_===""){const B=await this._({:async A=>{x.=A.map(I=>({[this..__]:I.,...I.})),await S()}});T.push(B.fOublier)}else if(_===""){const B=await this.__({:async A=>{x.=A.map(I=>({[this..__]:I.,...I.})),await S()}});T.push(B)}return async()=>{await Promise.all(T.map(B=>B()))}}}const jaqblKikajtzkChabl="chab'l",jaqblKikajtzkTzibanem="tzib'anem",runukMolajKel="",retalTzibNuchabl="/orbitdb/zdpuAqGK5ndjkaYFM5wkyEk4S6FpDH5hvpEWLq79edP9MmMpY/c0e399ba-391c-4b85-b69c-7e8fe5eda4a1",runukRucheelRunukChabl="runukChabl",runukRucheelRajilankChabl="rajilankChabl",runukRucheelRubiChabl="rubiChabl",runukRucheelRutzibanemChabl="rutzibanemChabl",runukRucheelRunukGlChabl="gl",runukRucheelRunukI1Chabl="i1",runukRucheelRunukI2Chabl="i2",runukRucheelRunukI3Chabl="i3",runukRujalojRunukChabl="/orbitdb/zdpuAqAZSmXwDoEPn4r94LP7yYvaY6kvxofyU2gchbAzkTEjN/7affb315-cbda-471b-ab38-4b510be31f80",runukRujalojRajilankChabl="/orbitdb/zdpuAx2asNr8YFLvEy8nP5u16SshcbMAhyHkZQm3hqEX2CEP6/c6a6924c-4b92-4a7f-b259-eb725e97706e",runukRujalojRubiChabl="/orbitdb/zdpuAxRf1zitq3gpB6BnMrSuwcMLeFEUuUUGZZyhCwhjNqUjM/23617e18-1cd6-4e98-9eb8-f779c6ac54db",runukRujalojRutzibanemChabl="/orbitdb/zdpuAp5wKQEHAh8L5VGJr4Jdzn5363rX6zZmeFawBS4vRBihV/2c33ece9-a19c-4713-aac0-104478e142ae",runukRujalojRunukGlChabl="/orbitdb/zdpuApxEECg9CrBGKtGqkYMU4zU51q6M1UuRvzz1PhQ5XTQWt/ed95ff2b-0f30-41a4-8efd-92196b65dab7",runukRujalojRunukI1Chabl="/orbitdb/zdpuApSr92X1P9KQS5EzJVrWTqA8RZ4rjZnPJwH5DTNmw35CY/62569dba-f8d3-4c7a-ba3d-d07fac9d55e0",runukRujalojRunukI2Chabl="/orbitdb/zdpuAv9jLJJzgo5FafC3ZeG2nGggEWttcb8hMbfwwbRQKW1DS/43cd5ea5-8080-4d55-b5a1-8b782509423f",runukRujalojRunukI3Chabl="/orbitdb/zdpuApqihbDFFCdHudZaM64ahUMDwkpb38fpjw5gqYkP4xGJC/430bb19c-b541-4b88-85a0-e4ef9b8b9b29",runukRucheelRunukTzib="runukTzib",runukRucheelRajilankTzib="rajilankTzib",runukRucheelRubiTzib="rubiTzib",runukRucheelRucholanemTzib="rucholanemTzib",runukRucheelRutzibTzib="rutzibTzib",runukRujalojRunukTzib="/orbitdb/zdpuB1o5fEEZFicWiQTL7RE8xv7v7X2SS5A7tNUAXaHQ9c58P/5e71fe3b-3eb9-4574-b2b5-d8d9f3f82a63",runukRujalojRajilankTzib="/orbitdb/zdpuAt4noCPbhfzRAZncCMndUPSCiYS5KnHDCPg17RFqV8qou/03c04f10-4807-43f1-8e7e-1e43c048ef34",runukRujalojRubiTzib="/orbitdb/zdpuApC8sYxrezNAdgNFcLDcrEZhzMi7pv5A7VMZrCCiv2rb6/e45c68b2-2387-4092-b6be-3c50b3a5e884",runukRujalojRucholanemTzib="/orbitdb/zdpuB14vFuP6aHNaXxoeWZvq1NRyx6HCUReoT4sxSk3kAFdZe/026952f2-38f5-4d18-95ca-d99114e2cc1e",runukRujalojRutzibTzib="/orbitdb/zdpuAnXpasEMduNSXHxaeyGdZGmyU4NEwA3SEydj7jCDCY3Kz/3212b086-1480-4c9a-aa0e-0b5e98247ce4",RubanikilRuxeelTzij={licence:"ODbl-1_0",motsClefs:[retalTzibNuchabl],tableaux:[{cols:[{idColonne:runukRucheelRunukChabl,idVariable:runukRujalojRunukChabl,index:!0},{idColonne:runukRucheelRajilankChabl,idVariable:runukRujalojRajilankChabl},{idColonne:runukRucheelRubiChabl,idVariable:runukRujalojRubiChabl},{idColonne:runukRucheelRutzibanemChabl,idVariable:runukRujalojRutzibanemChabl},{idColonne:runukRucheelRunukGlChabl,idVariable:runukRujalojRunukGlChabl},{idColonne:runukRucheelRunukI1Chabl,idVariable:runukRujalojRunukI1Chabl},{idColonne:runukRucheelRunukI2Chabl,idVariable:runukRujalojRunukI2Chabl},{idColonne:runukRucheelRunukI3Chabl,idVariable:runukRujalojRunukI3Chabl}],clef:jaqblKikajtzkChabl},{cols:[{idColonne:runukRucheelRunukTzib,idVariable:runukRujalojRunukTzib,index:!0},{idColonne:runukRucheelRajilankTzib,idVariable:runukRujalojRajilankTzib},{idColonne:runukRucheelRubiTzib,idVariable:runukRujalojRubiTzib},{idColonne:runukRucheelRucholanemTzib,idVariable:runukRujalojRucholanemTzib},{idColonne:runukRucheelRutzibTzib,idVariable:runukRujalojRutzibTzib}],clef:jaqblKikajtzkTzibanem}]},tachojmisajKel=({chumil:t})=>{const n=new ({:t,_:jaqblKikajtzkChabl,:RubanikilRuxeelTzij,_:runukMolajKel}),_=new ({:t,_:jaqblKikajtzkTzibanem,:RubanikilRuxeelTzij,_:runukMolajKel});return{kelChabl:n,kelTzibanem:_}},kaq$1={aj:"Mayab'","rb'":"Kaqchikel",tz:"ltn",rn:{gl:"kaqc1270",i3:"cak"}},fr$1={aj:"latin","rb'":"franais",tz:"ltn",rn:{gl:"stan1290",i1:"fr",i2:"fra",i3:"fra"}},cst={aj:"latin","rb'":"castellano",rn:{gl:"stan1288",i1:"es"}},nl={aj:"latin","rb'":"Nederlands",rn:{gl:"dutc1256",i1:"nl"}},en$1={aj:"latin","rb'":"English",rn:{gl:"stan1293",i1:"en",i3:"eng"}},kny={"rb'":"Kanyen'k:ha",ajilank:"latin",rn:{}},sw={aj:"latin","rb'":"Kiswahili",rn:{}},yo={aj:"latin","rb'":"Yorb",rn:{gl:"yoru1245",i1:"yo"}},rw={"rb'":"Kinyarwanda",rn:{gl:"kiny1244",i1:"rw"},aj:"latin"},de={"rb'":"Deutsch",rn:{i1:"de",gl:"mode1258"},aj:"latin"},_retamablChabl={kaq:kaq$1,fr:fr$1,:{aj:"","rb'":"",tz:"",rn:{gl:"tami1289",i1:"ta",i2:"tam",i3:"tam"}},cst,nl,en:en$1,:{aj:"","rb'":"",tz:"",rn:{gl:"west2386",i3:"pnb"}},:{aj:"","rb'":"",tz:"",rn:{gl:"panj1256",i1:"pa"}},:{aj:"","rb'":"",rn:{gl:"",i1:"hi"}},:{aj:"","rb'":"",rn:{gl:"guja1252",i1:"gu"}},:{aj:"","rb'":"",rn:{gl:"beng1280",i1:"bn"}},:{"rb'":"",rn:{gl:"telu1262",i1:"te"},aj:""},:{"rb'":"",rn:{},aj:""},:{"rb'":"",rn:{i1:"ar"},aj:""},:{aj:"","rb'":"",tz:"",rn:{gl:"urdu1245",i1:"ur"}},:{aj:"","rb'":"",tz:"",rn:{gl:"west2369",i1:"fa"}},:{aj:"","rb'":"",rn:{gl:"mara1378",i1:"mr"}},:{aj:"","rb'":"",rn:{gl:"mala1464",i1:"ml"}},:{aj:"","rb'":"",rn:{gl:"nepa1254",i1:"ne"}},:{"rb'":"",aj:"",rn:{}},"k'i":{aj:"Mayab'","rb'":"K'iche'",rn:{gl:"kich1262",i3:"quc"}},"tz'u":{aj:"Mayab'","rb'":"Tz'utujil",rn:{gl:"tzut1248",i3:"tzj"}},kny,:{aj:"","rb'":"",tz:"",rn:{gl:"sini1245",i1:"zh"}},:{aj:"","rb'":"",tz:"",rn:{gl:"taib1240",i3:"goyu"}},:{aj:"","rb'":"",rn:{gl:"nucl1643",i1:"ja"}},sw,yo,rw,de},ltn={"rb'":"latin",ch:"",aj:"latin",tz:"[A-Za-z-----------------------]|\uD801[\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]"},_retamablTzibanem={ltn,:{"rb'":"",ch:"",aj:"",tz:"[---------]|\uD807[\uDFC0-\uDFF1\uDFFF]"},:{"rb'":"",ch:"",aj:"",tz:"[--------------------]|\uD803[\uDE60-\uDE7E\uDEFD-\uDEFF]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1]"},:{"rb'":"",ch:"",aj:""},:{"rb'":"",ch:"",aj:"",tz:"[------------]"},:{"rb'":"",ch:"",aj:"",tz:"[-----------]"},:{"rb'":"",ch:"",aj:"",tz:"[---------]"},:{"rb'":"",ch:"",aj:"",tz:"[----]"},:{"rb'":"",ch:"",aj:"",tz:"[----]|\uD806[\uDF00-\uDF09]"},:{"rb'":"",ch:"",aj:"",tz:"[---------]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]"},:{"rb'":"",ch:"",aj:"",tz:"[---------]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]"},:{"rb'":"",ch:"",aj:"",tz:"[--]|\uD82C[\uDC01-\uDD1F\uDD32\uDD50-\uDD52]||[-------]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00\uDD20-\uDD22\uDD55\uDD64-\uDD67]|[--]"}};class Nuchabl{constructor({chumil:n}){wt(this,"retamablChablChumil");wt(this,"retamablTzibanemChumil");wt(this,"vnements");wt(this,"chumil");wt(this,"tamestajKel");this.chumil=n,this.retamablChablChumil={},this.retamablTzibanemChumil={},this.vnements=new eventsExports.EventEmitter,this._tachojmisajKel()}async _tachojmisajKel(){if(this.chumil){const{kelChabl:n,kelTzibanem:_}=tachojmisajKel({chumil:this.chumil}),x=await n.__({:S=>{this.retamablChablChumil=tajalPaRubanikilRetamabalChabl(S),this.xujalRi()}}),E=await _.__({:S=>{this.retamablTzibanemChumil=tajalPaRubanikilRetamabalTzibanem(S),this.xujalRi()}});this.tamestajKel=async()=>{await Promise.all([x(),E()])}}}xujalRi(){this.vnements.emit("xujalRi'")}get retamablChabl(){return merge$1(_retamablChabl,this.retamablChablChumil)}get retamablTzibanem(){return merge$1(_retamablTzibanem,this.retamablTzibanemChumil)}get konojelChabl(){return Object.keys(this.retamablChabl)}get konojelTzibanem(){return Object.keys(this.retamablTzibanem)}runukChabl({chabl:n,runukulem:_}){const x=Object.keys(this.retamablChabl).find(S=>this.retamablChabl[S]["rb'"]===n);if(!_||!x)return x;_=_.toLowerCase();const E=this.retamablChabl[x].rn;return _==="iso"?[E.i1,E.i2,E.i3].find(S=>S):E[rkxnkNklm[_]||_]}rubiChabl({runuk:n,runukulem:_}){const x=_?.toLowerCase();let E;return x===void 0?E=this.retamablChabl[n]:x==="iso"?E=Object.values(this.retamablChabl).find(S=>[S.rn.i1,S.rn.i2,S.rn.i3].some(C=>C===n)):Object.keys(rkxnkNklm).includes(x)&&(E=Object.values(this.retamablChabl).find(S=>S.rn[rkxnkNklm[x]]===n)),E?E["rb'"]:void 0}rutzibanemChabl({runuk:n}){const x=this.retamablChabl[n]?.tz;if(x)return x;for(const E in this.konojelTzibanem){const S=this.rutzibTzibanem({runuk:E});if(S&&n.match(new RegExp(S,"g")))return E}}rajilankChabl({runuk:n}){const _=this.retamablChabl[n];if(_)return _.aj;const x=this.rutzibanemChabl({runuk:n});return x?this.rajilankTzibanem({runuk:x}):void 0}rubiTzibanem({runuk:n}){const _=this.retamablTzibanem[n];return _?_["rb'"]:void 0}runukTzibanem({tzibanem:n}){return Object.keys(this.retamablTzibanem).find(_=>this.retamablChabl[_]["rb'"]===n)}rucholanemTzibanem({runuk:n}){return this.retamablTzibanem[n]?.ch}rutzibTzibanem({runuk:n}){return this.retamablTzibanem[n]?.tz}rajilankTzibanem({runuk:n}){return this.retamablTzibanem[n]?.aj}tatzeqelbej(n){return this.vnements.on("xujalRi'",n),n(),()=>{this.vnements.off("xujalRi'",n)}}tatzeqelbejRetamablChabl({sm:n}){return this.tatzeqelbej(()=>n(this.retamablChabl))}tatzeqelbejRetamablTzibanem({sm:n}){return this.tatzeqelbej(()=>n(this.retamablTzibanem))}tatzeqelbejKonojelChabl({sm:n}){return this.tatzeqelbej(()=>n(this.konojelChabl))}tatzeqelbejKonojelTzibanem({sm:n}){return this.tatzeqelbej(()=>n(this.konojelTzibanem))}tatzeqelbejRunukChabl({sm:n,chabl:_,runukulem:x}){return this.tatzeqelbej(()=>n(this.runukChabl({chabl:_,runukulem:x})))}tatzeqelbejRubiChabl({sm:n,runuk:_,runukulem:x}){return this.tatzeqelbej(()=>n(this.rubiChabl({runuk:_,runukulem:x})))}tatzeqelbejRutzibanemChabl({sm:n,runuk:_}){return this.tatzeqelbej(()=>n(this.rutzibanemChabl({runuk:_})))}tatzeqelbejRajilankChabl({sm:n,runuk:_}){return this.tatzeqelbej(()=>n(this.rajilankChabl({runuk:_})))}tatzeqelbejRubiTzibanem({sm:n,runuk:_}){return this.tatzeqelbej(()=>n(this.rubiTzibanem({runuk:_})))}tatzeqelbejRunukTzibanem({sm:n,tzibanem:_}){return this.tatzeqelbej(()=>n(this.runukTzibanem({tzibanem:_})))}tatzeqelbejRucholanemTzibanem({sm:n,runuk:_}){return this.tatzeqelbej(()=>n(this.rucholanemTzibanem({runuk:_})))}tatzeqelbejRajilankTzibanem({sm:n,runuk:_}){return this.tatzeqelbej(()=>n(this.rajilankTzibanem({runuk:_})))}async tatzapij(){this.tamestajKel&&await this.tamestajKel()}}const rkxnkNklm={glottologue:"gl",iso1:"i1",iso2:"i2",iso3:"i3"},tajalPaRubanikilRetamabalChabl=t=>{const n={};for(const _ of t)n[_.donnes[runukRucheelRunukChabl]]={aj:_.donnes[runukRucheelRajilankChabl],"rb'":_.donnes[runukRucheelRubiChabl],tz:_.donnes[runukRucheelRutzibanemChabl],rn:{gl:_.donnes[runukRucheelRunukGlChabl],i1:_.donnes[runukRucheelRunukI1Chabl],i2:_.donnes[runukRucheelRunukI2Chabl],i3:_.donnes[runukRucheelRunukI3Chabl]}};return n},tajalPaRubanikilRetamabalTzibanem=t=>{const n={};for(const _ of t)n[_.donnes[runukRucheelRunukTzib]]={aj:_.donnes[runukRucheelRajilankTzib],"rb'":_.donnes[runukRucheelRubiTzib],ch:_.donnes[runukRucheelRucholanemTzib],tz:_.donnes[runukRucheelRutzibTzib]};return n},latin={:"",:"latn",:"0123456789",:"eE",:"."},_={latin,"Mayab'":{:"",:null,:""},:{:"",:null,:""},:{:"",:"deva",:"",:""},:{:"",:"guru",:"",:""},:{:"",:"gujr",:""}," ":{:"",:"mlym",:""},:{:"",:null,:"",:{"":10,"":100,"":1e3}},:{:"",:"taml",:"",:"",:{"":10,"":100,"":1e3}}," ":{:"",:"tamldec",:"",:""},:{:"",:"arabext",:"",:"",:"."},:{:"",:"arab",:"",:"",:"."},:{:"",:"orya",:""},:{:"",:"beng",:"",:""},:{:"",:"knda",:""},:{:"",:"telu",:""},"":{:"",:"brah",:""},"":{:"",:"cakm",:""},"":{:"",:"nkoo",:""},"":{:"",:"saur",:""}," ":{:"",:"olck",:""}," ":{:"",:"sinh",:""},:{:"",:null,:"",:{"":10,"":100,"":1e3}},"":{:"",:"bali",:""},"":{:"",:"cham",:""},"":{:"",:"java",:""},:{:"",:"thai",:"",:""},:{:"",:"laoo",:""},"":{:"",:"tibt",:""},"":{:"",:"mymrshan",:""},"":{:"",:"mymrtlng",:""},"":{:"",:"mymr",:""}," ":{:"",:"kali",:""},"":{:"",:"talu",:""},"":{:"",:"ahom",:""},"":{:"",:"bhks",:""},"":{:"",:"gong",:""},"":{:"",:"gonm",:""},"":{:"",:"rohg",:""},"  ":{:"",:"hmng",:""},"":{:"",:"hmng",:""},:{:"",:"khmr",:""}," - lek nai tam":{:"",:"lana",:""}," - lek hora":{:"",:"lanatham",:""},"":{:"",:"lepc",:""}," ":{:"",:"limb",:""}," ":{:"",:"mong",:""},"":{:"",:"mtei",:""},"":{:"",:"sund",:""},"":{:"",:"sind",:""},"":{:"",:"modi",:""},"":{:"",:"mroo",:""}," ":{:"",:"newa",:""},"":{:"",:"vaii",:""},"":{:"",:"osma",:""},"":{:"",:"shrd",:""},:{:"",:"ethi",:"0",:{"":10,"":20,"":30,"":40,"":50,"":60,"":70,"":80,"":90,"":100,"":1e4}}," ":{:"",:"sora",:""},"":{:"",:"takr",:""},"":{:"",:"tirh",:""}," ":{:"",:"wara",:""},"":{:"",:null,:""},"":{:"",:"wcho",:""},"":{:"",:"adlm",:""},:{:"",:"hans",:"",:"",:".",:{:10,:100,:1e3,:1e4,:1e8,:1e12,:1e16,:1e20,:1e24,:1e28,:1e32,:1e36,:1e40,:1e44}},:{:"",:"hanidec",:"",:"",:"."},:{:"",:null,:""}},_="",__="",__="/orbitdb/zdpuAwiHHcXVqXtC5d2zTBC3kP8LkpMxHyp1BjjxVCboH6nPb/b4949e9f-bab6-4057-b13a-1d66ae6e93ee",___="",___="",____="",___="",___="",___="",___="",___="/orbitdb/zdpuAx2asNr8YFLvEy8nP5u16SshcbMAhyHkZQm3hqEX2CEP6/c6a6924c-4b92-4a7f-b259-eb725e97706e",___="/orbitdb/zdpuAmMYvS8f9WH95y3tyxDPgLsWjXu2zoB2bAy78JNsMkCWn/aa379217-bb8f-4050-b807-3394e46dab51",____="/orbitdb/zdpuApW3gaGcGNtppzQQyzuzygfKiQ1WVtVpjQa21ALjqRUNo/02e278a4-d9cd-4548-9148-f69a91e7bb99",___="/orbitdb/zdpuAzeaU4DA5WCaKBr1B23UA9gtvMoRiUtPgA1PsuRJvtA6k/53411a0f-a4ab-4c0f-93bd-1fa9dcdd9acb",___="/orbitdb/zdpuB2xXUJ3kcsmzqhqbvUDNRrRH63dLoj6jw238Xu85oSVJp/e4d10758-41fd-4e97-92a8-e6fff65d402e",___="/orbitdb/zdpuAq1CqRxiFvcy7sUuB9wLPJ5Ex9Vrp6uFiyP7YB8G3T74s/0f17278e-5ffd-45ee-b55e-6ad061f55350",___="/orbitdb/zdpuAwi62CTtS6Tpu8Zf2pBFKEUGo3F27QZXCib4CVGXyBPVa/77be95cc-c216-4f86-b794-29a3037aa953",_={licence:"ODbl-1_0",motsClefs:[__],tableaux:[{cols:[{idColonne:___,idVariable:___,index:!0},{idColonne:___,idVariable:___},{idColonne:____,idVariable:____},{idColonne:___,idVariable:___},{idColonne:___,idVariable:___},{idColonne:___,idVariable:___},{idColonne:___,idVariable:___}],clef:_}]},_=({:t})=>new ({:t,_,:_,_:__});class {constructor({:n}){wt(this,"_");wt(this,"");wt(this,"");wt(this,"_");this.=n,this._={},this.=new eventsExports.EventEmitter,this.__()}async __(){if(this.){const n=_({:this.});this._=await n.__({:_=>{this._=___(_),this._()}})}}_(){this..emit("")}get (){return merge$1(_,this._)}get (){return Object.keys(this.)}_({:n}){const _=this.[n];if(!_)throw Error(`   ${n}`);return _}_({:n,_:_}){const{:x,:E}=_,S=_.||".",C=[...x],T=n<0;n=Math.abs(n);const B=n.toString().split(".")[1];let A=this.__(n,C,E);return A.length===0&&(A=C[0]),T&&(A="-"+A),B&&(A+=S[0]+[...B].map(I=>x[parseInt(I)]).join("")),A}_({:n,_:_}){const x=_.,E=[..._.],S=_.||".",C=n[0]==="-";C?n=n.slice(1):n=n.replace(/^\++/,"");const[T,B]=n.split(S[0]);let A=0;if(T){const I=[...T].map(M=>x[M]||E.indexOf(M)).reverse(),D=M=>{const V=M[0],L=M.slice(1).find(Z=>Z>V),F=(L?M.slice(1).indexOf(L):M.slice(1).length)+1,j=M.slice(1,F),U=j.length?D(j):1,H=M.slice(F),Y=H.length?D(H):0;return V*U+Y};A=D(I)}return B!==void 0&&B.length&&(A+=parseFloat("."+[...B].map(I=>E.indexOf(I).toString()).join(""))),C&&(A*=-1),A}_({:n,_:_}){const x=[..._.],E=x.length,S=(_.||".")[0];if(E===10){let I=n.toString();return I.includes(".")&&(I=I.replace(".",S)),Array.prototype.map.call(I,D=>D===S?D:x[parseInt(D)]).join("")}if(n===0)return x[0];const C=n<0;let T=n%1;T=parseFloat(T.toFixed(_(n))),n=Math.abs(n);let B="";for(;n;)B=x[Math.floor(n%E)]+B,n=Math.floor(n/E);T&&(B+=S);let A;for(;T!==0;)A=_(T),T*=E,B+=x[Math.floor(T)],T-=Math.floor(T),T=parseFloat(T.toFixed(A));return C&&(B="-"+B),B}_({:n,:_,_:x}){const E=[...x.],S=x.||"eE",C=E.length,T=x.||".";if(n=n.replace(/^\++/,""),S.split("").some(B=>n.includes(B))){const[B,A]=n.split(RegExp(S));return this._({:B,:_,_:x})*C**this.({:A,:_})}if(C===10){for(const[B,A]of E.entries())n=n.replace(A,B.toString());for(const B of T.split(""))n=n.replace(B,".");return parseFloat(n)}else{let B=0;const A=n.split(/\./);let I=A[0];const D=A[1],M=I[0]==="-";if(I=I.replace(/^-+/,""),I)for(const V of I)B*=C,B+=E.indexOf(V);if(D){let V=C;for(const L of D)B+=E.indexOf(L)/V,B=parseFloat(B.toFixed(_(1/V))),V*=C}return B=M?-B:B,B}}({:n,:_}){const x=this._({:_});return x.===""?this._({:n,_:x}):this._({:n,_:x})}({:n,:_}){const x=_?[_]:this.;for(const E of x)try{const S=this._({:E});return this._({:n,:E,_:S})}catch{continue}throw new Error(`${n}    .`)}_({:n,:_,_:x}){const E=x.;if(E==="")return this._({:n,:_,_:x});if(E==="")return this._({:n,_:x});throw Error(`    ${E}`)}__(n,_,x){let E=n,S="";for(const[C,T]of Object.entries(x).sort((B,A)=>A[1]-B[1])){const B=Math.floor(E/T);B&&(E-=B*T,B!==1&&(S+=this.__(B,_,x)),S+=C)}return E&&(S=S+_[Math.floor(E)]),S}(n){return this..on("",n),n(),()=>{this..off("",n)}}_({:n}){return this.(()=>n(this.))}_({:n,:_,:x}){return this.(()=>x(this.({:n,:_})))}_({:n,:_,:x}){return this.(()=>x(this.({:n,:_})))}async (){this._&&await this._()}}function _(t){const n=t.toString();if(n.includes("e")){const[_,x]=n.split("e-");return parseInt(x)+_.length}else return n.length}function ___(t){const n={};for(const _ of t){const x=_.donnes[___],E=_.donnes[___];if(x===""){const S={:x,:_.donnes[___],:_.donnes[____],:_.donnes[___],:_.donnes[___]};n[E]=S}else if(x===""){const S=_.donnes[___];if(!S)throw new Error(`${E}     .`);const C={:x,:_.donnes[___],:_.donnes[____],:_.donnes[___],:JSON.parse(S),:_.donnes[___]};n[E]=C}}return n}const crerNuchabl=({constellation:t})=>new Nuchabl({chumil:t}),crerEnnikai=({constellation:t})=>new ({:t}),crerLocales=({langue:t,languesAlternatives:n=[]})=>{const _=api$3.get("paramtres.langue");let x;try{x=_?JSON.parse(_):void 0}catch{}const E=ref$1(Array.isArray(x)?x:[t,...n]),S=ref$1();return{langueEtAlternatives:E,slectionNumration:S}},utiliserLangues=()=>{const t=inject$1("locales");if(!t)throw new Error("Locales non installes");const n=t.locales.langueEtAlternatives,_=computed(()=>n.value[0]),x=computed(()=>n.value.slice(1));return{langue:_,languesAlternatives:x,choisirLangues:T=>{Array.isArray(T)?T.length&&(n.value=T):n.value=[T,...n.value.filter(B=>B!==T)],api$3.set("paramtres.langue",JSON.stringify(n.value))},traduireNom:T=>{const A=inject$1("locales")?.nuchabl;return computed(()=>{for(const D of n.value)if(T.value[D])return T.value[D];const I=A?.rutzibanemChabl({runuk:n.value[0]});for(const D of n.value)if(I&&I===A?.rutzibanemChabl({runuk:D}))return T.value[D];return Object.values(T.value)[0]})},langueDroiteGauche:()=>{const B=inject$1("locales")?.nuchabl;return computed(()=>{const A=B?.rutzibanemChabl({runuk:_.value});if(!A)return!1;const I=B?.rucholanemTzibanem({runuk:A});return I?I==="":!1})}}},utiliserNumration=()=>{const t=inject$1("locales");if(!t)throw new Error("Locales non installes");const n=t.nuchabl,_=t.,{langue:x}=utiliserLangues(),E=ref$1(n.rajilankChabl({runuk:x.value}));let S;watchEffect(()=>{S&&S(),S=n?.tatzeqelbejRajilankChabl({runuk:x.value,sm:M=>E.value=M})}),onUnmounted(()=>{S&&S()});const C=ref$1(_.);let T;watchEffect(()=>{T=_._({:M=>C.value=M})}),onUnmounted(()=>{T&&T()});const B=computed(()=>t.locales.slectionNumration.value||E.value||"latin");if(n){let M;watchEffect(()=>{M=n.tatzeqelbejRajilankChabl({runuk:x.value,sm:V=>E.value=V})}),onUnmounted(()=>{M&&M()})}const A=(M,V)=>computed(()=>_.({:typeof M=="number"?M:M.value,:V||B.value})),I=(M,V)=>computed(()=>[...typeof M=="string"?M:M.value].map(j=>{if(j===" "||j===""||j==="+")return j;try{const U=_.({:j});return _.({:U,:V||B.value})}catch{return j}}).join("")),D=M=>computed(()=>B.value?M.split(".").map(L=>_.({:parseInt(L),:B.value})).join("."):void 0);return{numration:B,systmesNumration:C,slectionNumration:t?.locales.slectionNumration,formatterChiffre:A,formatterNumro:I,formatterVersion:D}},gnrerLocalisation=({langue:t,languesAlternatives:n=[]})=>({install:_=>{const x=_.config.globalProperties.$constl,E=crerNuchabl({constellation:x}),S=crerEnnikai({constellation:x});_.provide("locales",{nuchabl:E,:S,locales:crerLocales({langue:t,languesAlternatives:n})})}});var lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */lodash.exports;(function(t,n){(function(){var _,x="4.17.21",E=200,S="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",C="Expected a function",T="Invalid `variable` option passed into `_.template`",B="__lodash_hash_undefined__",A=500,I="__lodash_placeholder__",D=1,M=2,V=4,L=1,F=2,j=1,U=2,H=4,Y=8,Z=16,ne=32,re=64,X=128,ce=256,ue=512,_e=30,ye="...",ie=800,W=16,O=1,z=2,J=3,ee=1/0,ae=9007199254740991,oe=17976931348623157e292,se=0/0,G=4294967295,q=G-1,te=G>>>1,fe=[["ary",X],["bind",j],["bindKey",U],["curry",Y],["curryRight",Z],["flip",ue],["partial",ne],["partialRight",re],["rearg",ce]],he="[object Arguments]",Ee="[object Array]",we="[object AsyncFunction]",xe="[object Boolean]",$e="[object Date]",ge="[object DOMException]",Se="[object Error]",me="[object Function]",Be="[object GeneratorFunction]",ve="[object Map]",Ae="[object Number]",Ve="[object Null]",Pe="[object Object]",Re="[object Promise]",Ne="[object Proxy]",qe="[object RegExp]",Ke="[object Set]",He="[object String]",Ge="[object Symbol]",rt="[object Undefined]",st="[object WeakMap]",Je="[object WeakSet]",Ie="[object ArrayBuffer]",be="[object DataView]",Te="[object Float32Array]",Le="[object Float64Array]",We="[object Int8Array]",Ze="[object Int16Array]",Qe="[object Int32Array]",St="[object Uint8Array]",pt="[object Uint8ClampedArray]",ft="[object Uint16Array]",Ut="[object Uint32Array]",$t=/\b__p \+= '';/g,Nt=/\b(__p \+=) '' \+/g,lr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gt=/&(?:amp|lt|gt|quot|#39);/g,Rt=/[&<>"']/g,Qt=RegExp(Gt.source),Pt=RegExp(Rt.source),kt=/<%-([\s\S]+?)%>/g,er=/<%([\s\S]+?)%>/g,Lt=/<%=([\s\S]+?)%>/g,Bt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ir=/^\w*$/,jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ct=/[\\^$.*+?()[\]{}|]/g,nr=RegExp(Ct.source),je=/^\s+/,De=/\s/,Me=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pe=/\{\n\/\* \[wrapped with (.+)\] \*/,ke=/,? & /,Oe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fe=/[()=,{}\[\]\/\s]/,ze=/\\(\\)?/g,Xe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,tt=/\w*$/,it=/^[-+]0x[0-9a-f]+$/i,ot=/^0b[01]+$/i,at=/^\[object .+?Constructor\]$/,ct=/^0o[0-7]+$/i,dt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Et=/($^)/,mt=/['\n\r\u2028\u2029\\]/g,xt="\\ud800-\\udfff",Mt="\\u0300-\\u036f",Ot="\\ufe20-\\ufe2f",Ht="\\u20d0-\\u20ff",Ft=Mt+Ot+Ht,Wt="\\u2700-\\u27bf",Jt="a-z\\xdf-\\xf6\\xf8-\\xff",Kt="\\xac\\xb1\\xd7\\xf7",gt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_t="\\u2000-\\u206f",It=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",At="A-Z\\xc0-\\xd6\\xd8-\\xde",Vt="\\ufe0e\\ufe0f",Xt=Kt+gt+_t+It,ar="[']",gr="["+xt+"]",yr="["+Xt+"]",ur="["+Ft+"]",ut="\\d+",wr="["+Wt+"]",kr="["+Jt+"]",Br="[^"+xt+Xt+ut+Wt+Jt+At+"]",br="\\ud83c[\\udffb-\\udfff]",Ar="(?:"+ur+"|"+br+")",Cr="[^"+xt+"]",Fr="(?:\\ud83c[\\udde6-\\uddff]){2}",Pr="[\\ud800-\\udbff][\\udc00-\\udfff]",Mr="["+At+"]",Ur="\\u200d",jr="(?:"+kr+"|"+Br+")",Wr="(?:"+Mr+"|"+Br+")",Jr="(?:"+ar+"(?:d|ll|m|re|s|t|ve))?",Zr="(?:"+ar+"(?:D|LL|M|RE|S|T|VE))?",Qr=Ar+"?",zs="["+Vt+"]?",dl="(?:"+Ur+"(?:"+[Cr,Fr,Pr].join("|")+")"+zs+Qr+")*",pl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ml="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Hs=zs+Qr+dl,vl="(?:"+[wr,Fr,Pr].join("|")+")"+Hs,gl="(?:"+[Cr+ur+"?",ur,Fr,Pr,gr].join("|")+")",yl=RegExp(ar,"g"),bl=RegExp(ur,"g"),Ia=RegExp(br+"(?="+br+")|"+gl+Hs,"g"),_l=RegExp([Mr+"?"+kr+"+"+Jr+"(?="+[yr,Mr,"$"].join("|")+")",Wr+"+"+Zr+"(?="+[yr,Mr+jr,"$"].join("|")+")",Mr+"?"+jr+"+"+Jr,Mr+"+"+Zr,ml,pl,ut,vl].join("|"),"g"),xl=RegExp("["+Ur+xt+Ft+Vt+"]"),wl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,El=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Sl=-1,qr={};qr[Te]=qr[Le]=qr[We]=qr[Ze]=qr[Qe]=qr[St]=qr[pt]=qr[ft]=qr[Ut]=!0,qr[he]=qr[Ee]=qr[Ie]=qr[xe]=qr[be]=qr[$e]=qr[Se]=qr[me]=qr[ve]=qr[Ae]=qr[Pe]=qr[qe]=qr[Ke]=qr[He]=qr[st]=!1;var Lr={};Lr[he]=Lr[Ee]=Lr[Ie]=Lr[be]=Lr[xe]=Lr[$e]=Lr[Te]=Lr[Le]=Lr[We]=Lr[Ze]=Lr[Qe]=Lr[ve]=Lr[Ae]=Lr[Pe]=Lr[qe]=Lr[Ke]=Lr[He]=Lr[Ge]=Lr[St]=Lr[pt]=Lr[ft]=Lr[Ut]=!0,Lr[Se]=Lr[me]=Lr[st]=!1;var $l={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Cl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},kl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Al=parseFloat,Nl=parseInt,Ks=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Il=typeof self=="object"&&self&&self.Object===Object&&self,an=Ks||Il||Function("return this")(),Pa=n&&!n.nodeType&&n,oi=Pa&&!0&&t&&!t.nodeType&&t,Gs=oi&&oi.exports===Pa,Ra=Gs&&Ks.process,Tn=function(){try{var vt=oi&&oi.require&&oi.require("util").types;return vt||Ra&&Ra.binding&&Ra.binding("util")}catch{}}(),Ws=Tn&&Tn.isArrayBuffer,Xs=Tn&&Tn.isDate,Ys=Tn&&Tn.isMap,Js=Tn&&Tn.isRegExp,Zs=Tn&&Tn.isSet,Qs=Tn&&Tn.isTypedArray;function xn(vt,Dt,Tt){switch(Tt.length){case 0:return vt.call(Dt);case 1:return vt.call(Dt,Tt[0]);case 2:return vt.call(Dt,Tt[0],Tt[1]);case 3:return vt.call(Dt,Tt[0],Tt[1],Tt[2])}return vt.apply(Dt,Tt)}function Pl(vt,Dt,Tt,tr){for(var _r=-1,Rr=vt==null?0:vt.length;++_r<Rr;){var tn=vt[_r];Dt(tr,tn,Tt(tn),vt)}return tr}function kn(vt,Dt){for(var Tt=-1,tr=vt==null?0:vt.length;++Tt<tr&&Dt(vt[Tt],Tt,vt)!==!1;);return vt}function Rl(vt,Dt){for(var Tt=vt==null?0:vt.length;Tt--&&Dt(vt[Tt],Tt,vt)!==!1;);return vt}function eo(vt,Dt){for(var Tt=-1,tr=vt==null?0:vt.length;++Tt<tr;)if(!Dt(vt[Tt],Tt,vt))return!1;return!0}function Jn(vt,Dt){for(var Tt=-1,tr=vt==null?0:vt.length,_r=0,Rr=[];++Tt<tr;){var tn=vt[Tt];Dt(tn,Tt,vt)&&(Rr[_r++]=tn)}return Rr}function Ki(vt,Dt){var Tt=vt==null?0:vt.length;return!!Tt&&vi(vt,Dt,0)>-1}function Da(vt,Dt,Tt){for(var tr=-1,_r=vt==null?0:vt.length;++tr<_r;)if(Tt(Dt,vt[tr]))return!0;return!1}function Hr(vt,Dt){for(var Tt=-1,tr=vt==null?0:vt.length,_r=Array(tr);++Tt<tr;)_r[Tt]=Dt(vt[Tt],Tt,vt);return _r}function Zn(vt,Dt){for(var Tt=-1,tr=Dt.length,_r=vt.length;++Tt<tr;)vt[_r+Tt]=Dt[Tt];return vt}function Ma(vt,Dt,Tt,tr){var _r=-1,Rr=vt==null?0:vt.length;for(tr&&Rr&&(Tt=vt[++_r]);++_r<Rr;)Tt=Dt(Tt,vt[_r],_r,vt);return Tt}function Dl(vt,Dt,Tt,tr){var _r=vt==null?0:vt.length;for(tr&&_r&&(Tt=vt[--_r]);_r--;)Tt=Dt(Tt,vt[_r],_r,vt);return Tt}function Oa(vt,Dt){for(var Tt=-1,tr=vt==null?0:vt.length;++Tt<tr;)if(Dt(vt[Tt],Tt,vt))return!0;return!1}var Ml=Va("length");function Ol(vt){return vt.split("")}function Vl(vt){return vt.match(Oe)||[]}function to(vt,Dt,Tt){var tr;return Tt(vt,function(_r,Rr,tn){if(Dt(_r,Rr,tn))return tr=Rr,!1}),tr}function Gi(vt,Dt,Tt,tr){for(var _r=vt.length,Rr=Tt+(tr?1:-1);tr?Rr--:++Rr<_r;)if(Dt(vt[Rr],Rr,vt))return Rr;return-1}function vi(vt,Dt,Tt){return Dt===Dt?Jl(vt,Dt,Tt):Gi(vt,ro,Tt)}function Ll(vt,Dt,Tt,tr){for(var _r=Tt-1,Rr=vt.length;++_r<Rr;)if(tr(vt[_r],Dt))return _r;return-1}function ro(vt){return vt!==vt}function no(vt,Dt){var Tt=vt==null?0:vt.length;return Tt?Fa(vt,Dt)/Tt:se}function Va(vt){return function(Dt){return Dt==null?_:Dt[vt]}}function La(vt){return function(Dt){return vt==null?_:vt[Dt]}}function io(vt,Dt,Tt,tr,_r){return _r(vt,function(Rr,tn,Vr){Tt=tr?(tr=!1,Rr):Dt(Tt,Rr,tn,Vr)}),Tt}function Fl(vt,Dt){var Tt=vt.length;for(vt.sort(Dt);Tt--;)vt[Tt]=vt[Tt].value;return vt}function Fa(vt,Dt){for(var Tt,tr=-1,_r=vt.length;++tr<_r;){var Rr=Dt(vt[tr]);Rr!==_&&(Tt=Tt===_?Rr:Tt+Rr)}return Tt}function Ua(vt,Dt){for(var Tt=-1,tr=Array(vt);++Tt<vt;)tr[Tt]=Dt(Tt);return tr}function Ul(vt,Dt){return Hr(Dt,function(Tt){return[Tt,vt[Tt]]})}function ao(vt){return vt&&vt.slice(0,lo(vt)+1).replace(je,"")}function wn(vt){return function(Dt){return vt(Dt)}}function ja(vt,Dt){return Hr(Dt,function(Tt){return vt[Tt]})}function Ai(vt,Dt){return vt.has(Dt)}function so(vt,Dt){for(var Tt=-1,tr=vt.length;++Tt<tr&&vi(Dt,vt[Tt],0)>-1;);return Tt}function oo(vt,Dt){for(var Tt=vt.length;Tt--&&vi(Dt,vt[Tt],0)>-1;);return Tt}function jl(vt,Dt){for(var Tt=vt.length,tr=0;Tt--;)vt[Tt]===Dt&&++tr;return tr}var ql=La($l),Hl=La(Cl);function Kl(vt){return"\\"+kl[vt]}function Gl(vt,Dt){return vt==null?_:vt[Dt]}function gi(vt){return xl.test(vt)}function Wl(vt){return wl.test(vt)}function Xl(vt){for(var Dt,Tt=[];!(Dt=vt.next()).done;)Tt.push(Dt.value);return Tt}function qa(vt){var Dt=-1,Tt=Array(vt.size);return vt.forEach(function(tr,_r){Tt[++Dt]=[_r,tr]}),Tt}function co(vt,Dt){return function(Tt){return vt(Dt(Tt))}}function Qn(vt,Dt){for(var Tt=-1,tr=vt.length,_r=0,Rr=[];++Tt<tr;){var tn=vt[Tt];(tn===Dt||tn===I)&&(vt[Tt]=I,Rr[_r++]=Tt)}return Rr}function Wi(vt){var Dt=-1,Tt=Array(vt.size);return vt.forEach(function(tr){Tt[++Dt]=tr}),Tt}function Yl(vt){var Dt=-1,Tt=Array(vt.size);return vt.forEach(function(tr){Tt[++Dt]=[tr,tr]}),Tt}function Jl(vt,Dt,Tt){for(var tr=Tt-1,_r=vt.length;++tr<_r;)if(vt[tr]===Dt)return tr;return-1}function Zl(vt,Dt,Tt){for(var tr=Tt+1;tr--;)if(vt[tr]===Dt)return tr;return tr}function yi(vt){return gi(vt)?eu(vt):Ml(vt)}function Dn(vt){return gi(vt)?tu(vt):Ol(vt)}function lo(vt){for(var Dt=vt.length;Dt--&&De.test(vt.charAt(Dt)););return Dt}var Ql=La(Tl);function eu(vt){for(var Dt=Ia.lastIndex=0;Ia.test(vt);)++Dt;return Dt}function tu(vt){return vt.match(Ia)||[]}function ru(vt){return vt.match(_l)||[]}var nu=function vt(Dt){Dt=Dt==null?an:bi.defaults(an.Object(),Dt,bi.pick(an,El));var Tt=Dt.Array,tr=Dt.Date,_r=Dt.Error,Rr=Dt.Function,tn=Dt.Math,Vr=Dt.Object,za=Dt.RegExp,iu=Dt.String,Bn=Dt.TypeError,Xi=Tt.prototype,au=Rr.prototype,_i=Vr.prototype,Yi=Dt["__core-js_shared__"],Ji=au.toString,Or=_i.hasOwnProperty,su=0,uo=function(){var Q=/[^.]+$/.exec(Yi&&Yi.keys&&Yi.keys.IE_PROTO||"");return Q?"Symbol(src)_1."+Q:""}(),Zi=_i.toString,ou=Ji.call(Vr),cu=an._,lu=za("^"+Ji.call(Or).replace(Ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qi=Gs?Dt.Buffer:_,ei=Dt.Symbol,ea=Dt.Uint8Array,fo=Qi?Qi.allocUnsafe:_,ta=co(Vr.getPrototypeOf,Vr),ho=Vr.create,po=_i.propertyIsEnumerable,ra=Xi.splice,mo=ei?ei.isConcatSpreadable:_,Ni=ei?ei.iterator:_,ci=ei?ei.toStringTag:_,na=function(){try{var Q=hi(Vr,"defineProperty");return Q({},"",{}),Q}catch{}}(),uu=Dt.clearTimeout!==an.clearTimeout&&Dt.clearTimeout,fu=tr&&tr.now!==an.Date.now&&tr.now,du=Dt.setTimeout!==an.setTimeout&&Dt.setTimeout,ia=tn.ceil,aa=tn.floor,Ha=Vr.getOwnPropertySymbols,hu=Qi?Qi.isBuffer:_,vo=Dt.isFinite,pu=Xi.join,mu=co(Vr.keys,Vr),rn=tn.max,cn=tn.min,vu=tr.now,gu=Dt.parseInt,go=tn.random,yu=Xi.reverse,Ka=hi(Dt,"DataView"),Ii=hi(Dt,"Map"),Ga=hi(Dt,"Promise"),xi=hi(Dt,"Set"),Pi=hi(Dt,"WeakMap"),Ri=hi(Vr,"create"),sa=Pi&&new Pi,wi={},bu=pi(Ka),_u=pi(Ii),xu=pi(Ga),wu=pi(xi),Eu=pi(Pi),oa=ei?ei.prototype:_,Di=oa?oa.valueOf:_,bo=oa?oa.toString:_;function et(Q){if(Gr(Q)&&!xr(Q)&&!(Q instanceof Nr)){if(Q instanceof An)return Q;if(Or.call(Q,"__wrapped__"))return xc(Q)}return new An(Q)}var Ei=function(){function Q(){}return function(le){if(!Kr(le))return{};if(ho)return ho(le);Q.prototype=le;var Ce=new Q;return Q.prototype=_,Ce}}();function ca(){}function An(Q,le){this.__wrapped__=Q,this.__actions__=[],this.__chain__=!!le,this.__index__=0,this.__values__=_}et.templateSettings={escape:kt,evaluate:er,interpolate:Lt,variable:"",imports:{_:et}},et.prototype=ca.prototype,et.prototype.constructor=et,An.prototype=Ei(ca.prototype),An.prototype.constructor=An;function Nr(Q){this.__wrapped__=Q,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G,this.__views__=[]}function Su(){var Q=new Nr(this.__wrapped__);return Q.__actions__=vn(this.__actions__),Q.__dir__=this.__dir__,Q.__filtered__=this.__filtered__,Q.__iteratees__=vn(this.__iteratees__),Q.__takeCount__=this.__takeCount__,Q.__views__=vn(this.__views__),Q}function $u(){if(this.__filtered__){var Q=new Nr(this);Q.__dir__=-1,Q.__filtered__=!0}else Q=this.clone(),Q.__dir__*=-1;return Q}function Cu(){var Q=this.__wrapped__.value(),le=this.__dir__,Ce=xr(Q),Ue=le<0,Ye=Ce?Q.length:0,nt=Lf(0,Ye,this.__views__),lt=nt.start,ht=nt.end,bt=ht-lt,qt=Ue?ht:lt-1,zt=this.__iteratees__,Yt=zt.length,Zt=0,cr=cn(bt,this.__takeCount__);if(!Ce||!Ue&&Ye==bt&&cr==bt)return qo(Q,this.__actions__);var pr=[];e:for(;bt--&&Zt<cr;){qt+=le;for(var Sr=-1,vr=Q[qt];++Sr<Yt;){var Tr=zt[Sr],Ir=Tr.iteratee,$n=Tr.type,pn=Ir(vr);if($n==z)vr=pn;else if(!pn){if($n==O)continue e;break e}}pr[Zt++]=vr}return pr}Nr.prototype=Ei(ca.prototype),Nr.prototype.constructor=Nr;function li(Q){var le=-1,Ce=Q==null?0:Q.length;for(this.clear();++le<Ce;){var Ue=Q[le];this.set(Ue[0],Ue[1])}}function Tu(){this.__data__=Ri?Ri(null):{},this.size=0}function ku(Q){var le=this.has(Q)&&delete this.__data__[Q];return this.size-=le?1:0,le}function Bu(Q){var le=this.__data__;if(Ri){var Ce=le[Q];return Ce===B?_:Ce}return Or.call(le,Q)?le[Q]:_}function Au(Q){var le=this.__data__;return Ri?le[Q]!==_:Or.call(le,Q)}function Nu(Q,le){var Ce=this.__data__;return this.size+=this.has(Q)?0:1,Ce[Q]=Ri&&le===_?B:le,this}li.prototype.clear=Tu,li.prototype.delete=ku,li.prototype.get=Bu,li.prototype.has=Au,li.prototype.set=Nu;function jn(Q){var le=-1,Ce=Q==null?0:Q.length;for(this.clear();++le<Ce;){var Ue=Q[le];this.set(Ue[0],Ue[1])}}function Iu(){this.__data__=[],this.size=0}function Pu(Q){var le=this.__data__,Ce=la(le,Q);if(Ce<0)return!1;var Ue=le.length-1;return Ce==Ue?le.pop():ra.call(le,Ce,1),--this.size,!0}function Ru(Q){var le=this.__data__,Ce=la(le,Q);return Ce<0?_:le[Ce][1]}function Du(Q){return la(this.__data__,Q)>-1}function Mu(Q,le){var Ce=this.__data__,Ue=la(Ce,Q);return Ue<0?(++this.size,Ce.push([Q,le])):Ce[Ue][1]=le,this}jn.prototype.clear=Iu,jn.prototype.delete=Pu,jn.prototype.get=Ru,jn.prototype.has=Du,jn.prototype.set=Mu;function qn(Q){var le=-1,Ce=Q==null?0:Q.length;for(this.clear();++le<Ce;){var Ue=Q[le];this.set(Ue[0],Ue[1])}}function Ou(){this.size=0,this.__data__={hash:new li,map:new(Ii||jn),string:new li}}function Vu(Q){var le=xa(this,Q).delete(Q);return this.size-=le?1:0,le}function Lu(Q){return xa(this,Q).get(Q)}function Fu(Q){return xa(this,Q).has(Q)}function Uu(Q,le){var Ce=xa(this,Q),Ue=Ce.size;return Ce.set(Q,le),this.size+=Ce.size==Ue?0:1,this}qn.prototype.clear=Ou,qn.prototype.delete=Vu,qn.prototype.get=Lu,qn.prototype.has=Fu,qn.prototype.set=Uu;function ui(Q){var le=-1,Ce=Q==null?0:Q.length;for(this.__data__=new qn;++le<Ce;)this.add(Q[le])}function ju(Q){return this.__data__.set(Q,B),this}function qu(Q){return this.__data__.has(Q)}ui.prototype.add=ui.prototype.push=ju,ui.prototype.has=qu;function Mn(Q){var le=this.__data__=new jn(Q);this.size=le.size}function zu(){this.__data__=new jn,this.size=0}function Hu(Q){var le=this.__data__,Ce=le.delete(Q);return this.size=le.size,Ce}function Ku(Q){return this.__data__.get(Q)}function Gu(Q){return this.__data__.has(Q)}function Wu(Q,le){var Ce=this.__data__;if(Ce instanceof jn){var Ue=Ce.__data__;if(!Ii||Ue.length<E-1)return Ue.push([Q,le]),this.size=++Ce.size,this;Ce=this.__data__=new qn(Ue)}return Ce.set(Q,le),this.size=Ce.size,this}Mn.prototype.clear=zu,Mn.prototype.delete=Hu,Mn.prototype.get=Ku,Mn.prototype.has=Gu,Mn.prototype.set=Wu;function _o(Q,le){var Ce=xr(Q),Ue=!Ce&&mi(Q),Ye=!Ce&&!Ue&&ai(Q),nt=!Ce&&!Ue&&!Ye&&Ti(Q),lt=Ce||Ue||Ye||nt,ht=lt?Ua(Q.length,iu):[],bt=ht.length;for(var qt in Q)(le||Or.call(Q,qt))&&!(lt&&(qt=="length"||Ye&&(qt=="offset"||qt=="parent")||nt&&(qt=="buffer"||qt=="byteLength"||qt=="byteOffset")||Gn(qt,bt)))&&ht.push(qt);return ht}function xo(Q){var le=Q.length;return le?Q[ss(0,le-1)]:_}function Xu(Q,le){return wa(vn(Q),fi(le,0,Q.length))}function Yu(Q){return wa(vn(Q))}function Wa(Q,le,Ce){(Ce!==_&&!On(Q[le],Ce)||Ce===_&&!(le in Q))&&zn(Q,le,Ce)}function Mi(Q,le,Ce){var Ue=Q[le];(!(Or.call(Q,le)&&On(Ue,Ce))||Ce===_&&!(le in Q))&&zn(Q,le,Ce)}function la(Q,le){for(var Ce=Q.length;Ce--;)if(On(Q[Ce][0],le))return Ce;return-1}function Ju(Q,le,Ce,Ue){return ti(Q,function(Ye,nt,lt){le(Ue,Ye,Ce(Ye),lt)}),Ue}function wo(Q,le){return Q&&Fn(le,nn(le),Q)}function Zu(Q,le){return Q&&Fn(le,yn(le),Q)}function zn(Q,le,Ce){le=="__proto__"&&na?na(Q,le,{configurable:!0,enumerable:!0,value:Ce,writable:!0}):Q[le]=Ce}function Xa(Q,le){for(var Ce=-1,Ue=le.length,Ye=Tt(Ue),nt=Q==null;++Ce<Ue;)Ye[Ce]=nt?_:Rs(Q,le[Ce]);return Ye}function fi(Q,le,Ce){return Q===Q&&(Ce!==_&&(Q=Q<=Ce?Q:Ce),le!==_&&(Q=Q>=le?Q:le)),Q}function Nn(Q,le,Ce,Ue,Ye,nt){var lt,ht=le&D,bt=le&M,qt=le&V;if(Ce&&(lt=Ye?Ce(Q,Ue,Ye,nt):Ce(Q)),lt!==_)return lt;if(!Kr(Q))return Q;var zt=xr(Q);if(zt){if(lt=Uf(Q),!ht)return vn(Q,lt)}else{var Yt=ln(Q),Zt=Yt==me||Yt==Be;if(ai(Q))return Ko(Q,ht);if(Yt==Pe||Yt==he||Zt&&!Ye){if(lt=bt||Zt?{}:dc(Q),!ht)return bt?Af(Q,Zu(lt,Q)):Bf(Q,wo(lt,Q))}else{if(!Lr[Yt])return Ye?Q:{};lt=jf(Q,Yt,ht)}}nt||(nt=new Mn);var cr=nt.get(Q);if(cr)return cr;nt.set(Q,lt),Uc(Q)?Q.forEach(function(vr){lt.add(Nn(vr,le,Ce,vr,Q,nt))}):Lc(Q)&&Q.forEach(function(vr,Tr){lt.set(Tr,Nn(vr,le,Ce,Tr,Q,nt))});var pr=qt?bt?_s:bs:bt?yn:nn,Sr=zt?_:pr(Q);return kn(Sr||Q,function(vr,Tr){Sr&&(Tr=vr,vr=Q[Tr]),Mi(lt,Tr,Nn(vr,le,Ce,Tr,Q,nt))}),lt}function Qu(Q){var le=nn(Q);return function(Ce){return Eo(Ce,Q,le)}}function Eo(Q,le,Ce){var Ue=Ce.length;if(Q==null)return!Ue;for(Q=Vr(Q);Ue--;){var Ye=Ce[Ue],nt=le[Ye],lt=Q[Ye];if(lt===_&&!(Ye in Q)||!nt(lt))return!1}return!0}function So(Q,le,Ce){if(typeof Q!="function")throw new Bn(C);return qi(function(){Q.apply(_,Ce)},le)}function Oi(Q,le,Ce,Ue){var Ye=-1,nt=Ki,lt=!0,ht=Q.length,bt=[],qt=le.length;if(!ht)return bt;Ce&&(le=Hr(le,wn(Ce))),Ue?(nt=Da,lt=!1):le.length>=E&&(nt=Ai,lt=!1,le=new ui(le));e:for(;++Ye<ht;){var zt=Q[Ye],Yt=Ce==null?zt:Ce(zt);if(zt=Ue||zt!==0?zt:0,lt&&Yt===Yt){for(var Zt=qt;Zt--;)if(le[Zt]===Yt)continue e;bt.push(zt)}else nt(le,Yt,Ue)||bt.push(zt)}return bt}var ti=Jo(Ln),$o=Jo(Ja,!0);function ef(Q,le){var Ce=!0;return ti(Q,function(Ue,Ye,nt){return Ce=!!le(Ue,Ye,nt),Ce}),Ce}function ua(Q,le,Ce){for(var Ue=-1,Ye=Q.length;++Ue<Ye;){var nt=Q[Ue],lt=le(nt);if(lt!=null&&(ht===_?lt===lt&&!Sn(lt):Ce(lt,ht)))var ht=lt,bt=nt}return bt}function tf(Q,le,Ce,Ue){var Ye=Q.length;for(Ce=Er(Ce),Ce<0&&(Ce=-Ce>Ye?0:Ye+Ce),Ue=Ue===_||Ue>Ye?Ye:Er(Ue),Ue<0&&(Ue+=Ye),Ue=Ce>Ue?0:qc(Ue);Ce<Ue;)Q[Ce++]=le;return Q}function Co(Q,le){var Ce=[];return ti(Q,function(Ue,Ye,nt){le(Ue,Ye,nt)&&Ce.push(Ue)}),Ce}function sn(Q,le,Ce,Ue,Ye){var nt=-1,lt=Q.length;for(Ce||(Ce=zf),Ye||(Ye=[]);++nt<lt;){var ht=Q[nt];le>0&&Ce(ht)?le>1?sn(ht,le-1,Ce,Ue,Ye):Zn(Ye,ht):Ue||(Ye[Ye.length]=ht)}return Ye}var Ya=Zo(),To=Zo(!0);function Ln(Q,le){return Q&&Ya(Q,le,nn)}function Ja(Q,le){return Q&&To(Q,le,nn)}function fa(Q,le){return Jn(le,function(Ce){return Wn(Q[Ce])})}function di(Q,le){le=ni(le,Q);for(var Ce=0,Ue=le.length;Q!=null&&Ce<Ue;)Q=Q[Un(le[Ce++])];return Ce&&Ce==Ue?Q:_}function ko(Q,le,Ce){var Ue=le(Q);return xr(Q)?Ue:Zn(Ue,Ce(Q))}function dn(Q){return Q==null?Q===_?rt:Ve:ci&&ci in Vr(Q)?Vf(Q):Jf(Q)}function Za(Q,le){return Q>le}function rf(Q,le){return Q!=null&&Or.call(Q,le)}function nf(Q,le){return Q!=null&&le in Vr(Q)}function af(Q,le,Ce){return Q>=cn(le,Ce)&&Q<rn(le,Ce)}function Qa(Q,le,Ce){for(var Ue=Ce?Da:Ki,Ye=Q[0].length,nt=Q.length,lt=nt,ht=Tt(nt),bt=1/0,qt=[];lt--;){var zt=Q[lt];lt&&le&&(zt=Hr(zt,wn(le))),bt=cn(zt.length,bt),ht[lt]=!Ce&&(le||Ye>=120&&zt.length>=120)?new ui(lt&&zt):_}zt=Q[0];var Yt=-1,Zt=ht[0];e:for(;++Yt<Ye&&qt.length<bt;){var cr=zt[Yt],pr=le?le(cr):cr;if(cr=Ce||cr!==0?cr:0,!(Zt?Ai(Zt,pr):Ue(qt,pr,Ce))){for(lt=nt;--lt;){var Sr=ht[lt];if(!(Sr?Ai(Sr,pr):Ue(Q[lt],pr,Ce)))continue e}Zt&&Zt.push(pr),qt.push(cr)}}return qt}function sf(Q,le,Ce,Ue){return Ln(Q,function(Ye,nt,lt){le(Ue,Ce(Ye),nt,lt)}),Ue}function Vi(Q,le,Ce){le=ni(le,Q),Q=vc(Q,le);var Ue=Q==null?Q:Q[Un(Pn(le))];return Ue==null?_:xn(Ue,Q,Ce)}function Bo(Q){return Gr(Q)&&dn(Q)==he}function of(Q){return Gr(Q)&&dn(Q)==Ie}function cf(Q){return Gr(Q)&&dn(Q)==$e}function Li(Q,le,Ce,Ue,Ye){return Q===le?!0:Q==null||le==null||!Gr(Q)&&!Gr(le)?Q!==Q&&le!==le:lf(Q,le,Ce,Ue,Li,Ye)}function lf(Q,le,Ce,Ue,Ye,nt){var lt=xr(Q),ht=xr(le),bt=lt?Ee:ln(Q),qt=ht?Ee:ln(le);bt=bt==he?Pe:bt,qt=qt==he?Pe:qt;var zt=bt==Pe,Yt=qt==Pe,Zt=bt==qt;if(Zt&&ai(Q)){if(!ai(le))return!1;lt=!0,zt=!1}if(Zt&&!zt)return nt||(nt=new Mn),lt||Ti(Q)?lc(Q,le,Ce,Ue,Ye,nt):Mf(Q,le,bt,Ce,Ue,Ye,nt);if(!(Ce&L)){var cr=zt&&Or.call(Q,"__wrapped__"),pr=Yt&&Or.call(le,"__wrapped__");if(cr||pr){var Sr=cr?Q.value():Q,vr=pr?le.value():le;return nt||(nt=new Mn),Ye(Sr,vr,Ce,Ue,nt)}}return Zt?(nt||(nt=new Mn),Of(Q,le,Ce,Ue,Ye,nt)):!1}function uf(Q){return Gr(Q)&&ln(Q)==ve}function ts(Q,le,Ce,Ue){var Ye=Ce.length,nt=Ye,lt=!Ue;if(Q==null)return!nt;for(Q=Vr(Q);Ye--;){var ht=Ce[Ye];if(lt&&ht[2]?ht[1]!==Q[ht[0]]:!(ht[0]in Q))return!1}for(;++Ye<nt;){ht=Ce[Ye];var bt=ht[0],qt=Q[bt],zt=ht[1];if(lt&&ht[2]){if(qt===_&&!(bt in Q))return!1}else{var Yt=new Mn;if(Ue)var Zt=Ue(qt,zt,bt,Q,le,Yt);if(!(Zt===_?Li(zt,qt,L|F,Ue,Yt):Zt))return!1}}return!0}function Ao(Q){if(!Kr(Q)||Kf(Q))return!1;var le=Wn(Q)?lu:at;return le.test(pi(Q))}function ff(Q){return Gr(Q)&&dn(Q)==qe}function df(Q){return Gr(Q)&&ln(Q)==Ke}function hf(Q){return Gr(Q)&&ka(Q.length)&&!!qr[dn(Q)]}function No(Q){return typeof Q=="function"?Q:Q==null?_n:typeof Q=="object"?xr(Q)?Ro(Q[0],Q[1]):Po(Q):el(Q)}function rs(Q){if(!ji(Q))return mu(Q);var le=[];for(var Ce in Vr(Q))Or.call(Q,Ce)&&Ce!="constructor"&&le.push(Ce);return le}function pf(Q){if(!Kr(Q))return Yf(Q);var le=ji(Q),Ce=[];for(var Ue in Q)Ue=="constructor"&&(le||!Or.call(Q,Ue))||Ce.push(Ue);return Ce}function ns(Q,le){return Q<le}function Io(Q,le){var Ce=-1,Ue=gn(Q)?Tt(Q.length):[];return ti(Q,function(Ye,nt,lt){Ue[++Ce]=le(Ye,nt,lt)}),Ue}function Po(Q){var le=ws(Q);return le.length==1&&le[0][2]?pc(le[0][0],le[0][1]):function(Ce){return Ce===Q||ts(Ce,Q,le)}}function Ro(Q,le){return Ss(Q)&&hc(le)?pc(Un(Q),le):function(Ce){var Ue=Rs(Ce,Q);return Ue===_&&Ue===le?Ds(Ce,Q):Li(le,Ue,L|F)}}function da(Q,le,Ce,Ue,Ye){Q!==le&&Ya(le,function(nt,lt){if(Ye||(Ye=new Mn),Kr(nt))mf(Q,le,lt,Ce,da,Ue,Ye);else{var ht=Ue?Ue(Cs(Q,lt),nt,lt+"",Q,le,Ye):_;ht===_&&(ht=nt),Wa(Q,lt,ht)}},yn)}function mf(Q,le,Ce,Ue,Ye,nt,lt){var ht=Cs(Q,Ce),bt=Cs(le,Ce),qt=lt.get(bt);if(qt){Wa(Q,Ce,qt);return}var zt=nt?nt(ht,bt,Ce+"",Q,le,lt):_,Yt=zt===_;if(Yt){var Zt=xr(bt),cr=!Zt&&ai(bt),pr=!Zt&&!cr&&Ti(bt);zt=bt,Zt||cr||pr?xr(ht)?zt=ht:Xr(ht)?zt=vn(ht):cr?(Yt=!1,zt=Ko(bt,!0)):pr?(Yt=!1,zt=Go(bt,!0)):zt=[]:zi(bt)||mi(bt)?(zt=ht,mi(ht)?zt=zc(ht):(!Kr(ht)||Wn(ht))&&(zt=dc(bt))):Yt=!1}Yt&&(lt.set(bt,zt),Ye(zt,bt,Ue,nt,lt),lt.delete(bt)),Wa(Q,Ce,zt)}function Do(Q,le){var Ce=Q.length;if(Ce)return le+=le<0?Ce:0,Gn(le,Ce)?Q[le]:_}function Mo(Q,le,Ce){le.length?le=Hr(le,function(nt){return xr(nt)?function(lt){return di(lt,nt.length===1?nt[0]:nt)}:nt}):le=[_n];var Ue=-1;le=Hr(le,wn(dr()));var Ye=Io(Q,function(nt,lt,ht){var bt=Hr(le,function(qt){return qt(nt)});return{criteria:bt,index:++Ue,value:nt}});return Fl(Ye,function(nt,lt){return kf(nt,lt,Ce)})}function vf(Q,le){return Oo(Q,le,function(Ce,Ue){return Ds(Q,Ue)})}function Oo(Q,le,Ce){for(var Ue=-1,Ye=le.length,nt={};++Ue<Ye;){var lt=le[Ue],ht=di(Q,lt);Ce(ht,lt)&&Fi(nt,ni(lt,Q),ht)}return nt}function gf(Q){return function(le){return di(le,Q)}}function as(Q,le,Ce,Ue){var Ye=Ue?Ll:vi,nt=-1,lt=le.length,ht=Q;for(Q===le&&(le=vn(le)),Ce&&(ht=Hr(Q,wn(Ce)));++nt<lt;)for(var bt=0,qt=le[nt],zt=Ce?Ce(qt):qt;(bt=Ye(ht,zt,bt,Ue))>-1;)ht!==Q&&ra.call(ht,bt,1),ra.call(Q,bt,1);return Q}function Vo(Q,le){for(var Ce=Q?le.length:0,Ue=Ce-1;Ce--;){var Ye=le[Ce];if(Ce==Ue||Ye!==nt){var nt=Ye;Gn(Ye)?ra.call(Q,Ye,1):us(Q,Ye)}}return Q}function ss(Q,le){return Q+aa(go()*(le-Q+1))}function yf(Q,le,Ce,Ue){for(var Ye=-1,nt=rn(ia((le-Q)/(Ce||1)),0),lt=Tt(nt);nt--;)lt[Ue?nt:++Ye]=Q,Q+=Ce;return lt}function cs(Q,le){var Ce="";if(!Q||le<1||le>ae)return Ce;do le%2&&(Ce+=Q),le=aa(le/2),le&&(Q+=Q);while(le);return Ce}function $r(Q,le){return Ts(mc(Q,le,_n),Q+"")}function bf(Q){return xo(ki(Q))}function _f(Q,le){var Ce=ki(Q);return wa(Ce,fi(le,0,Ce.length))}function Fi(Q,le,Ce,Ue){if(!Kr(Q))return Q;le=ni(le,Q);for(var Ye=-1,nt=le.length,lt=nt-1,ht=Q;ht!=null&&++Ye<nt;){var bt=Un(le[Ye]),qt=Ce;if(bt==="__proto__"||bt==="constructor"||bt==="prototype")return Q;if(Ye!=lt){var zt=ht[bt];qt=Ue?Ue(zt,bt,ht):_,qt===_&&(qt=Kr(zt)?zt:Gn(le[Ye+1])?[]:{})}Mi(ht,bt,qt),ht=ht[bt]}return Q}var Lo=sa?function(Q,le){return sa.set(Q,le),Q}:_n,xf=na?function(Q,le){return na(Q,"toString",{configurable:!0,enumerable:!1,value:Os(le),writable:!0})}:_n;function wf(Q){return wa(ki(Q))}function In(Q,le,Ce){var Ue=-1,Ye=Q.length;le<0&&(le=-le>Ye?0:Ye+le),Ce=Ce>Ye?Ye:Ce,Ce<0&&(Ce+=Ye),Ye=le>Ce?0:Ce-le>>>0,le>>>=0;for(var nt=Tt(Ye);++Ue<Ye;)nt[Ue]=Q[Ue+le];return nt}function Ef(Q,le){var Ce;return ti(Q,function(Ue,Ye,nt){return Ce=le(Ue,Ye,nt),!Ce}),!!Ce}function ha(Q,le,Ce){var Ue=0,Ye=Q==null?Ue:Q.length;if(typeof le=="number"&&le===le&&Ye<=te){for(;Ue<Ye;){var nt=Ue+Ye>>>1,lt=Q[nt];lt!==null&&!Sn(lt)&&(Ce?lt<=le:lt<le)?Ue=nt+1:Ye=nt}return Ye}return ls(Q,le,_n,Ce)}function ls(Q,le,Ce,Ue){var Ye=0,nt=Q==null?0:Q.length;if(nt===0)return 0;le=Ce(le);for(var lt=le!==le,ht=le===null,bt=Sn(le),qt=le===_;Ye<nt;){var zt=aa((Ye+nt)/2),Yt=Ce(Q[zt]),Zt=Yt!==_,cr=Yt===null,pr=Yt===Yt,Sr=Sn(Yt);if(lt)var vr=Ue||pr;else qt?vr=pr&&(Ue||Zt):ht?vr=pr&&Zt&&(Ue||!cr):bt?vr=pr&&Zt&&!cr&&(Ue||!Sr):cr||Sr?vr=!1:vr=Ue?Yt<=le:Yt<le;vr?Ye=zt+1:nt=zt}return cn(nt,q)}function Fo(Q,le){for(var Ce=-1,Ue=Q.length,Ye=0,nt=[];++Ce<Ue;){var lt=Q[Ce],ht=le?le(lt):lt;if(!Ce||!On(ht,bt)){var bt=ht;nt[Ye++]=lt===0?0:lt}}return nt}function Uo(Q){return typeof Q=="number"?Q:Sn(Q)?se:+Q}function En(Q){if(typeof Q=="string")return Q;if(xr(Q))return Hr(Q,En)+"";if(Sn(Q))return bo?bo.call(Q):"";var le=Q+"";return le=="0"&&1/Q==-ee?"-0":le}function ri(Q,le,Ce){var Ue=-1,Ye=Ki,nt=Q.length,lt=!0,ht=[],bt=ht;if(Ce)lt=!1,Ye=Da;else if(nt>=E){var qt=le?null:Rf(Q);if(qt)return Wi(qt);lt=!1,Ye=Ai,bt=new ui}else bt=le?[]:ht;e:for(;++Ue<nt;){var zt=Q[Ue],Yt=le?le(zt):zt;if(zt=Ce||zt!==0?zt:0,lt&&Yt===Yt){for(var Zt=bt.length;Zt--;)if(bt[Zt]===Yt)continue e;le&&bt.push(Yt),ht.push(zt)}else Ye(bt,Yt,Ce)||(bt!==ht&&bt.push(Yt),ht.push(zt))}return ht}function us(Q,le){return le=ni(le,Q),Q=vc(Q,le),Q==null||delete Q[Un(Pn(le))]}function jo(Q,le,Ce,Ue){return Fi(Q,le,Ce(di(Q,le)),Ue)}function pa(Q,le,Ce,Ue){for(var Ye=Q.length,nt=Ue?Ye:-1;(Ue?nt--:++nt<Ye)&&le(Q[nt],nt,Q););return Ce?In(Q,Ue?0:nt,Ue?nt+1:Ye):In(Q,Ue?nt+1:0,Ue?Ye:nt)}function qo(Q,le){var Ce=Q;return Ce instanceof Nr&&(Ce=Ce.value()),Ma(le,function(Ue,Ye){return Ye.func.apply(Ye.thisArg,Zn([Ue],Ye.args))},Ce)}function ds(Q,le,Ce){var Ue=Q.length;if(Ue<2)return Ue?ri(Q[0]):[];for(var Ye=-1,nt=Tt(Ue);++Ye<Ue;)for(var lt=Q[Ye],ht=-1;++ht<Ue;)ht!=Ye&&(nt[Ye]=Oi(nt[Ye]||lt,Q[ht],le,Ce));return ri(sn(nt,1),le,Ce)}function zo(Q,le,Ce){for(var Ue=-1,Ye=Q.length,nt=le.length,lt={};++Ue<Ye;){var ht=Ue<nt?le[Ue]:_;Ce(lt,Q[Ue],ht)}return lt}function hs(Q){return Xr(Q)?Q:[]}function ps(Q){return typeof Q=="function"?Q:_n}function ni(Q,le){return xr(Q)?Q:Ss(Q,le)?[Q]:_c(Dr(Q))}var Sf=$r;function ii(Q,le,Ce){var Ue=Q.length;return Ce=Ce===_?Ue:Ce,!le&&Ce>=Ue?Q:In(Q,le,Ce)}var Ho=uu||function(Q){return an.clearTimeout(Q)};function Ko(Q,le){if(le)return Q.slice();var Ce=Q.length,Ue=fo?fo(Ce):new Q.constructor(Ce);return Q.copy(Ue),Ue}function vs(Q){var le=new Q.constructor(Q.byteLength);return new ea(le).set(new ea(Q)),le}function $f(Q,le){var Ce=le?vs(Q.buffer):Q.buffer;return new Q.constructor(Ce,Q.byteOffset,Q.byteLength)}function Cf(Q){var le=new Q.constructor(Q.source,tt.exec(Q));return le.lastIndex=Q.lastIndex,le}function Tf(Q){return Di?Vr(Di.call(Q)):{}}function Go(Q,le){var Ce=le?vs(Q.buffer):Q.buffer;return new Q.constructor(Ce,Q.byteOffset,Q.length)}function Wo(Q,le){if(Q!==le){var Ce=Q!==_,Ue=Q===null,Ye=Q===Q,nt=Sn(Q),lt=le!==_,ht=le===null,bt=le===le,qt=Sn(le);if(!ht&&!qt&&!nt&&Q>le||nt&&lt&&bt&&!ht&&!qt||Ue&&lt&&bt||!Ce&&bt||!Ye)return 1;if(!Ue&&!nt&&!qt&&Q<le||qt&&Ce&&Ye&&!Ue&&!nt||ht&&Ce&&Ye||!lt&&Ye||!bt)return-1}return 0}function kf(Q,le,Ce){for(var Ue=-1,Ye=Q.criteria,nt=le.criteria,lt=Ye.length,ht=Ce.length;++Ue<lt;){var bt=Wo(Ye[Ue],nt[Ue]);if(bt){if(Ue>=ht)return bt;var qt=Ce[Ue];return bt*(qt=="desc"?-1:1)}}return Q.index-le.index}function Xo(Q,le,Ce,Ue){for(var Ye=-1,nt=Q.length,lt=Ce.length,ht=-1,bt=le.length,qt=rn(nt-lt,0),zt=Tt(bt+qt),Yt=!Ue;++ht<bt;)zt[ht]=le[ht];for(;++Ye<lt;)(Yt||Ye<nt)&&(zt[Ce[Ye]]=Q[Ye]);for(;qt--;)zt[ht++]=Q[Ye++];return zt}function Yo(Q,le,Ce,Ue){for(var Ye=-1,nt=Q.length,lt=-1,ht=Ce.length,bt=-1,qt=le.length,zt=rn(nt-ht,0),Yt=Tt(zt+qt),Zt=!Ue;++Ye<zt;)Yt[Ye]=Q[Ye];for(var cr=Ye;++bt<qt;)Yt[cr+bt]=le[bt];for(;++lt<ht;)(Zt||Ye<nt)&&(Yt[cr+Ce[lt]]=Q[Ye++]);return Yt}function vn(Q,le){var Ce=-1,Ue=Q.length;for(le||(le=Tt(Ue));++Ce<Ue;)le[Ce]=Q[Ce];return le}function Fn(Q,le,Ce,Ue){var Ye=!Ce;Ce||(Ce={});for(var nt=-1,lt=le.length;++nt<lt;){var ht=le[nt],bt=Ue?Ue(Ce[ht],Q[ht],ht,Ce,Q):_;bt===_&&(bt=Q[ht]),Ye?zn(Ce,ht,bt):Mi(Ce,ht,bt)}return Ce}function Bf(Q,le){return Fn(Q,Es(Q),le)}function Af(Q,le){return Fn(Q,uc(Q),le)}function ma(Q,le){return function(Ce,Ue){var Ye=xr(Ce)?Pl:Ju,nt=le?le():{};return Ye(Ce,Q,dr(Ue,2),nt)}}function Si(Q){return $r(function(le,Ce){var Ue=-1,Ye=Ce.length,nt=Ye>1?Ce[Ye-1]:_,lt=Ye>2?Ce[2]:_;for(nt=Q.length>3&&typeof nt=="function"?(Ye--,nt):_,lt&&hn(Ce[0],Ce[1],lt)&&(nt=Ye<3?_:nt,Ye=1),le=Vr(le);++Ue<Ye;){var ht=Ce[Ue];ht&&Q(le,ht,Ue,nt)}return le})}function Jo(Q,le){return function(Ce,Ue){if(Ce==null)return Ce;if(!gn(Ce))return Q(Ce,Ue);for(var Ye=Ce.length,nt=le?Ye:-1,lt=Vr(Ce);(le?nt--:++nt<Ye)&&Ue(lt[nt],nt,lt)!==!1;);return Ce}}function Zo(Q){return function(le,Ce,Ue){for(var Ye=-1,nt=Vr(le),lt=Ue(le),ht=lt.length;ht--;){var bt=lt[Q?ht:++Ye];if(Ce(nt[bt],bt,nt)===!1)break}return le}}function Nf(Q,le,Ce){var Ue=le&j,Ye=Ui(Q);function nt(){var lt=this&&this!==an&&this instanceof nt?Ye:Q;return lt.apply(Ue?Ce:this,arguments)}return nt}function Qo(Q){return function(le){le=Dr(le);var Ce=gi(le)?Dn(le):_,Ue=Ce?Ce[0]:le.charAt(0),Ye=Ce?ii(Ce,1).join(""):le.slice(1);return Ue[Q]()+Ye}}function $i(Q){return function(le){return Ma(Zc(Jc(le).replace(yl,"")),Q,"")}}function Ui(Q){return function(){var le=arguments;switch(le.length){case 0:return new Q;case 1:return new Q(le[0]);case 2:return new Q(le[0],le[1]);case 3:return new Q(le[0],le[1],le[2]);case 4:return new Q(le[0],le[1],le[2],le[3]);case 5:return new Q(le[0],le[1],le[2],le[3],le[4]);case 6:return new Q(le[0],le[1],le[2],le[3],le[4],le[5]);case 7:return new Q(le[0],le[1],le[2],le[3],le[4],le[5],le[6])}var Ce=Ei(Q.prototype),Ue=Q.apply(Ce,le);return Kr(Ue)?Ue:Ce}}function If(Q,le,Ce){var Ue=Ui(Q);function Ye(){for(var nt=arguments.length,lt=Tt(nt),ht=nt,bt=Ci(Ye);ht--;)lt[ht]=arguments[ht];var qt=nt<3&&lt[0]!==bt&&lt[nt-1]!==bt?[]:Qn(lt,bt);if(nt-=qt.length,nt<Ce)return ac(Q,le,va,Ye.placeholder,_,lt,qt,_,_,Ce-nt);var zt=this&&this!==an&&this instanceof Ye?Ue:Q;return xn(zt,this,lt)}return Ye}function tc(Q){return function(le,Ce,Ue){var Ye=Vr(le);if(!gn(le)){var nt=dr(Ce,3);le=nn(le),Ce=function(ht){return nt(Ye[ht],ht,Ye)}}var lt=Q(le,Ce,Ue);return lt>-1?Ye[nt?le[lt]:lt]:_}}function rc(Q){return Kn(function(le){var Ce=le.length,Ue=Ce,Ye=An.prototype.thru;for(Q&&le.reverse();Ue--;){var nt=le[Ue];if(typeof nt!="function")throw new Bn(C);if(Ye&&!lt&&_a(nt)=="wrapper")var lt=new An([],!0)}for(Ue=lt?Ue:Ce;++Ue<Ce;){nt=le[Ue];var ht=_a(nt),bt=ht=="wrapper"?xs(nt):_;bt&&$s(bt[0])&&bt[1]==(X|Y|ne|ce)&&!bt[4].length&&bt[9]==1?lt=lt[_a(bt[0])].apply(lt,bt[3]):lt=nt.length==1&&$s(nt)?lt[ht]():lt.thru(nt)}return function(){var qt=arguments,zt=qt[0];if(lt&&qt.length==1&&xr(zt))return lt.plant(zt).value();for(var Yt=0,Zt=Ce?le[Yt].apply(this,qt):zt;++Yt<Ce;)Zt=le[Yt].call(this,Zt);return Zt}})}function va(Q,le,Ce,Ue,Ye,nt,lt,ht,bt,qt){var zt=le&X,Yt=le&j,Zt=le&U,cr=le&(Y|Z),pr=le&ue,Sr=Zt?_:Ui(Q);function vr(){for(var Tr=arguments.length,Ir=Tt(Tr),$n=Tr;$n--;)Ir[$n]=arguments[$n];if(cr)var pn=Ci(vr),Cn=jl(Ir,pn);if(Ue&&(Ir=Xo(Ir,Ue,Ye,cr)),nt&&(Ir=Yo(Ir,nt,lt,cr)),Tr-=Cn,cr&&Tr<qt){var Yr=Qn(Ir,pn);return ac(Q,le,va,vr.placeholder,Ce,Ir,Yr,ht,bt,qt-Tr)}var Vn=Yt?Ce:this,Yn=Zt?Vn[Q]:Q;return Tr=Ir.length,ht?Ir=Zf(Ir,ht):pr&&Tr>1&&Ir.reverse(),zt&&bt<Tr&&(Ir.length=bt),this&&this!==an&&this instanceof vr&&(Yn=Sr||Ui(Yn)),Yn.apply(Vn,Ir)}return vr}function nc(Q,le){return function(Ce,Ue){return sf(Ce,Q,le(Ue),{})}}function ga(Q,le){return function(Ce,Ue){var Ye;if(Ce===_&&Ue===_)return le;if(Ce!==_&&(Ye=Ce),Ue!==_){if(Ye===_)return Ue;typeof Ce=="string"||typeof Ue=="string"?(Ce=En(Ce),Ue=En(Ue)):(Ce=Uo(Ce),Ue=Uo(Ue)),Ye=Q(Ce,Ue)}return Ye}}function gs(Q){return Kn(function(le){return le=Hr(le,wn(dr())),$r(function(Ce){var Ue=this;return Q(le,function(Ye){return xn(Ye,Ue,Ce)})})})}function ya(Q,le){le=le===_?" ":En(le);var Ce=le.length;if(Ce<2)return Ce?cs(le,Q):le;var Ue=cs(le,ia(Q/yi(le)));return gi(le)?ii(Dn(Ue),0,Q).join(""):Ue.slice(0,Q)}function Pf(Q,le,Ce,Ue){var Ye=le&j,nt=Ui(Q);function lt(){for(var ht=-1,bt=arguments.length,qt=-1,zt=Ue.length,Yt=Tt(zt+bt),Zt=this&&this!==an&&this instanceof lt?nt:Q;++qt<zt;)Yt[qt]=Ue[qt];for(;bt--;)Yt[qt++]=arguments[++ht];return xn(Zt,Ye?Ce:this,Yt)}return lt}function ic(Q){return function(le,Ce,Ue){return Ue&&typeof Ue!="number"&&hn(le,Ce,Ue)&&(Ce=Ue=_),le=Xn(le),Ce===_?(Ce=le,le=0):Ce=Xn(Ce),Ue=Ue===_?le<Ce?1:-1:Xn(Ue),yf(le,Ce,Ue,Q)}}function ba(Q){return function(le,Ce){return typeof le=="string"&&typeof Ce=="string"||(le=Rn(le),Ce=Rn(Ce)),Q(le,Ce)}}function ac(Q,le,Ce,Ue,Ye,nt,lt,ht,bt,qt){var zt=le&Y,Yt=zt?lt:_,Zt=zt?_:lt,cr=zt?nt:_,pr=zt?_:nt;le|=zt?ne:re,le&=~(zt?re:ne),le&H||(le&=~(j|U));var Sr=[Q,le,Ye,cr,Yt,pr,Zt,ht,bt,qt],vr=Ce.apply(_,Sr);return $s(Q)&&gc(vr,Sr),vr.placeholder=Ue,yc(vr,Q,le)}function ys(Q){var le=tn[Q];return function(Ce,Ue){if(Ce=Rn(Ce),Ue=Ue==null?0:cn(Er(Ue),292),Ue&&vo(Ce)){var Ye=(Dr(Ce)+"e").split("e"),nt=le(Ye[0]+"e"+(+Ye[1]+Ue));return Ye=(Dr(nt)+"e").split("e"),+(Ye[0]+"e"+(+Ye[1]-Ue))}return le(Ce)}}var Rf=xi&&1/Wi(new xi([,-0]))[1]==ee?function(Q){return new xi(Q)}:Fs;function sc(Q){return function(le){var Ce=ln(le);return Ce==ve?qa(le):Ce==Ke?Yl(le):Ul(le,Q(le))}}function Hn(Q,le,Ce,Ue,Ye,nt,lt,ht){var bt=le&U;if(!bt&&typeof Q!="function")throw new Bn(C);var qt=Ue?Ue.length:0;if(qt||(le&=~(ne|re),Ue=Ye=_),lt=lt===_?lt:rn(Er(lt),0),ht=ht===_?ht:Er(ht),qt-=Ye?Ye.length:0,le&re){var zt=Ue,Yt=Ye;Ue=Ye=_}var Zt=bt?_:xs(Q),cr=[Q,le,Ce,Ue,Ye,zt,Yt,nt,lt,ht];if(Zt&&Xf(cr,Zt),Q=cr[0],le=cr[1],Ce=cr[2],Ue=cr[3],Ye=cr[4],ht=cr[9]=cr[9]===_?bt?0:Q.length:rn(cr[9]-qt,0),!ht&&le&(Y|Z)&&(le&=~(Y|Z)),!le||le==j)var pr=Nf(Q,le,Ce);else le==Y||le==Z?pr=If(Q,le,ht):(le==ne||le==(j|ne))&&!Ye.length?pr=Pf(Q,le,Ce,Ue):pr=va.apply(_,cr);var Sr=Zt?Lo:gc;return yc(Sr(pr,cr),Q,le)}function oc(Q,le,Ce,Ue){return Q===_||On(Q,_i[Ce])&&!Or.call(Ue,Ce)?le:Q}function cc(Q,le,Ce,Ue,Ye,nt){return Kr(Q)&&Kr(le)&&(nt.set(le,Q),da(Q,le,_,cc,nt),nt.delete(le)),Q}function Df(Q){return zi(Q)?_:Q}function lc(Q,le,Ce,Ue,Ye,nt){var lt=Ce&L,ht=Q.length,bt=le.length;if(ht!=bt&&!(lt&&bt>ht))return!1;var qt=nt.get(Q),zt=nt.get(le);if(qt&&zt)return qt==le&&zt==Q;var Yt=-1,Zt=!0,cr=Ce&F?new ui:_;for(nt.set(Q,le),nt.set(le,Q);++Yt<ht;){var pr=Q[Yt],Sr=le[Yt];if(Ue)var vr=lt?Ue(Sr,pr,Yt,le,Q,nt):Ue(pr,Sr,Yt,Q,le,nt);if(vr!==_){if(vr)continue;Zt=!1;break}if(cr){if(!Oa(le,function(Tr,Ir){if(!Ai(cr,Ir)&&(pr===Tr||Ye(pr,Tr,Ce,Ue,nt)))return cr.push(Ir)})){Zt=!1;break}}else if(!(pr===Sr||Ye(pr,Sr,Ce,Ue,nt))){Zt=!1;break}}return nt.delete(Q),nt.delete(le),Zt}function Mf(Q,le,Ce,Ue,Ye,nt,lt){switch(Ce){case be:if(Q.byteLength!=le.byteLength||Q.byteOffset!=le.byteOffset)return!1;Q=Q.buffer,le=le.buffer;case Ie:return!(Q.byteLength!=le.byteLength||!nt(new ea(Q),new ea(le)));case xe:case $e:case Ae:return On(+Q,+le);case Se:return Q.name==le.name&&Q.message==le.message;case qe:case He:return Q==le+"";case ve:var ht=qa;case Ke:var bt=Ue&L;if(ht||(ht=Wi),Q.size!=le.size&&!bt)return!1;var qt=lt.get(Q);if(qt)return qt==le;Ue|=F,lt.set(Q,le);var zt=lc(ht(Q),ht(le),Ue,Ye,nt,lt);return lt.delete(Q),zt;case Ge:if(Di)return Di.call(Q)==Di.call(le)}return!1}function Of(Q,le,Ce,Ue,Ye,nt){var lt=Ce&L,ht=bs(Q),bt=ht.length,qt=bs(le),zt=qt.length;if(bt!=zt&&!lt)return!1;for(var Yt=bt;Yt--;){var Zt=ht[Yt];if(!(lt?Zt in le:Or.call(le,Zt)))return!1}var cr=nt.get(Q),pr=nt.get(le);if(cr&&pr)return cr==le&&pr==Q;var Sr=!0;nt.set(Q,le),nt.set(le,Q);for(var vr=lt;++Yt<bt;){Zt=ht[Yt];var Tr=Q[Zt],Ir=le[Zt];if(Ue)var $n=lt?Ue(Ir,Tr,Zt,le,Q,nt):Ue(Tr,Ir,Zt,Q,le,nt);if(!($n===_?Tr===Ir||Ye(Tr,Ir,Ce,Ue,nt):$n)){Sr=!1;break}vr||(vr=Zt=="constructor")}if(Sr&&!vr){var pn=Q.constructor,Cn=le.constructor;pn!=Cn&&"constructor"in Q&&"constructor"in le&&!(typeof pn=="function"&&pn instanceof pn&&typeof Cn=="function"&&Cn instanceof Cn)&&(Sr=!1)}return nt.delete(Q),nt.delete(le),Sr}function Kn(Q){return Ts(mc(Q,_,Sc),Q+"")}function bs(Q){return ko(Q,nn,Es)}function _s(Q){return ko(Q,yn,uc)}var xs=sa?function(Q){return sa.get(Q)}:Fs;function _a(Q){for(var le=Q.name+"",Ce=wi[le],Ue=Or.call(wi,le)?Ce.length:0;Ue--;){var Ye=Ce[Ue],nt=Ye.func;if(nt==null||nt==Q)return Ye.name}return le}function Ci(Q){var le=Or.call(et,"placeholder")?et:Q;return le.placeholder}function dr(){var Q=et.iteratee||Vs;return Q=Q===Vs?No:Q,arguments.length?Q(arguments[0],arguments[1]):Q}function xa(Q,le){var Ce=Q.__data__;return Hf(le)?Ce[typeof le=="string"?"string":"hash"]:Ce.map}function ws(Q){for(var le=nn(Q),Ce=le.length;Ce--;){var Ue=le[Ce],Ye=Q[Ue];le[Ce]=[Ue,Ye,hc(Ye)]}return le}function hi(Q,le){var Ce=Gl(Q,le);return Ao(Ce)?Ce:_}function Vf(Q){var le=Or.call(Q,ci),Ce=Q[ci];try{Q[ci]=_;var Ue=!0}catch{}var Ye=Zi.call(Q);return Ue&&(le?Q[ci]=Ce:delete Q[ci]),Ye}var Es=Ha?function(Q){return Q==null?[]:(Q=Vr(Q),Jn(Ha(Q),function(le){return po.call(Q,le)}))}:Us,uc=Ha?function(Q){for(var le=[];Q;)Zn(le,Es(Q)),Q=ta(Q);return le}:Us,ln=dn;(Ka&&ln(new Ka(new ArrayBuffer(1)))!=be||Ii&&ln(new Ii)!=ve||Ga&&ln(Ga.resolve())!=Re||xi&&ln(new xi)!=Ke||Pi&&ln(new Pi)!=st)&&(ln=function(Q){var le=dn(Q),Ce=le==Pe?Q.constructor:_,Ue=Ce?pi(Ce):"";if(Ue)switch(Ue){case bu:return be;case _u:return ve;case xu:return Re;case wu:return Ke;case Eu:return st}return le});function Lf(Q,le,Ce){for(var Ue=-1,Ye=Ce.length;++Ue<Ye;){var nt=Ce[Ue],lt=nt.size;switch(nt.type){case"drop":Q+=lt;break;case"dropRight":le-=lt;break;case"take":le=cn(le,Q+lt);break;case"takeRight":Q=rn(Q,le-lt);break}}return{start:Q,end:le}}function Ff(Q){var le=Q.match(pe);return le?le[1].split(ke):[]}function fc(Q,le,Ce){le=ni(le,Q);for(var Ue=-1,Ye=le.length,nt=!1;++Ue<Ye;){var lt=Un(le[Ue]);if(!(nt=Q!=null&&Ce(Q,lt)))break;Q=Q[lt]}return nt||++Ue!=Ye?nt:(Ye=Q==null?0:Q.length,!!Ye&&ka(Ye)&&Gn(lt,Ye)&&(xr(Q)||mi(Q)))}function Uf(Q){var le=Q.length,Ce=new Q.constructor(le);return le&&typeof Q[0]=="string"&&Or.call(Q,"index")&&(Ce.index=Q.index,Ce.input=Q.input),Ce}function dc(Q){return typeof Q.constructor=="function"&&!ji(Q)?Ei(ta(Q)):{}}function jf(Q,le,Ce){var Ue=Q.constructor;switch(le){case Ie:return vs(Q);case xe:case $e:return new Ue(+Q);case be:return $f(Q,Ce);case Te:case Le:case We:case Ze:case Qe:case St:case pt:case ft:case Ut:return Go(Q,Ce);case ve:return new Ue;case Ae:case He:return new Ue(Q);case qe:return Cf(Q);case Ke:return new Ue;case Ge:return Tf(Q)}}function qf(Q,le){var Ce=le.length;if(!Ce)return Q;var Ue=Ce-1;return le[Ue]=(Ce>1?"& ":"")+le[Ue],le=le.join(Ce>2?", ":" "),Q.replace(Me,`{
/* [wrapped with `+le+`] */
`)}function zf(Q){return xr(Q)||mi(Q)||!!(mo&&Q&&Q[mo])}function Gn(Q,le){var Ce=typeof Q;return le=le??ae,!!le&&(Ce=="number"||Ce!="symbol"&&dt.test(Q))&&Q>-1&&Q%1==0&&Q<le}function hn(Q,le,Ce){if(!Kr(Ce))return!1;var Ue=typeof le;return(Ue=="number"?gn(Ce)&&Gn(le,Ce.length):Ue=="string"&&le in Ce)?On(Ce[le],Q):!1}function Ss(Q,le){if(xr(Q))return!1;var Ce=typeof Q;return Ce=="number"||Ce=="symbol"||Ce=="boolean"||Q==null||Sn(Q)?!0:ir.test(Q)||!Bt.test(Q)||le!=null&&Q in Vr(le)}function Hf(Q){var le=typeof Q;return le=="string"||le=="number"||le=="symbol"||le=="boolean"?Q!=="__proto__":Q===null}function $s(Q){var le=_a(Q),Ce=et[le];if(typeof Ce!="function"||!(le in Nr.prototype))return!1;if(Q===Ce)return!0;var Ue=xs(Ce);return!!Ue&&Q===Ue[0]}function Kf(Q){return!!uo&&uo in Q}var Gf=Yi?Wn:js;function ji(Q){var le=Q&&Q.constructor,Ce=typeof le=="function"&&le.prototype||_i;return Q===Ce}function hc(Q){return Q===Q&&!Kr(Q)}function pc(Q,le){return function(Ce){return Ce==null?!1:Ce[Q]===le&&(le!==_||Q in Vr(Ce))}}function Wf(Q){var le=Ca(Q,function(Ue){return Ce.size===A&&Ce.clear(),Ue}),Ce=le.cache;return le}function Xf(Q,le){var Ce=Q[1],Ue=le[1],Ye=Ce|Ue,nt=Ye<(j|U|X),lt=Ue==X&&Ce==Y||Ue==X&&Ce==ce&&Q[7].length<=le[8]||Ue==(X|ce)&&le[7].length<=le[8]&&Ce==Y;if(!(nt||lt))return Q;Ue&j&&(Q[2]=le[2],Ye|=Ce&j?0:H);var ht=le[3];if(ht){var bt=Q[3];Q[3]=bt?Xo(bt,ht,le[4]):ht,Q[4]=bt?Qn(Q[3],I):le[4]}return ht=le[5],ht&&(bt=Q[5],Q[5]=bt?Yo(bt,ht,le[6]):ht,Q[6]=bt?Qn(Q[5],I):le[6]),ht=le[7],ht&&(Q[7]=ht),Ue&X&&(Q[8]=Q[8]==null?le[8]:cn(Q[8],le[8])),Q[9]==null&&(Q[9]=le[9]),Q[0]=le[0],Q[1]=Ye,Q}function Yf(Q){var le=[];if(Q!=null)for(var Ce in Vr(Q))le.push(Ce);return le}function Jf(Q){return Zi.call(Q)}function mc(Q,le,Ce){return le=rn(le===_?Q.length-1:le,0),function(){for(var Ue=arguments,Ye=-1,nt=rn(Ue.length-le,0),lt=Tt(nt);++Ye<nt;)lt[Ye]=Ue[le+Ye];Ye=-1;for(var ht=Tt(le+1);++Ye<le;)ht[Ye]=Ue[Ye];return ht[le]=Ce(lt),xn(Q,this,ht)}}function vc(Q,le){return le.length<2?Q:di(Q,In(le,0,-1))}function Zf(Q,le){for(var Ce=Q.length,Ue=cn(le.length,Ce),Ye=vn(Q);Ue--;){var nt=le[Ue];Q[Ue]=Gn(nt,Ce)?Ye[nt]:_}return Q}function Cs(Q,le){if(!(le==="constructor"&&typeof Q[le]=="function")&&le!="__proto__")return Q[le]}var gc=bc(Lo),qi=du||function(Q,le){return an.setTimeout(Q,le)},Ts=bc(xf);function yc(Q,le,Ce){var Ue=le+"";return Ts(Q,qf(Ue,Qf(Ff(Ue),Ce)))}function bc(Q){var le=0,Ce=0;return function(){var Ue=vu(),Ye=W-(Ue-Ce);if(Ce=Ue,Ye>0){if(++le>=ie)return arguments[0]}else le=0;return Q.apply(_,arguments)}}function wa(Q,le){var Ce=-1,Ue=Q.length,Ye=Ue-1;for(le=le===_?Ue:le;++Ce<le;){var nt=ss(Ce,Ye),lt=Q[nt];Q[nt]=Q[Ce],Q[Ce]=lt}return Q.length=le,Q}var _c=Wf(function(Q){var le=[];return Q.charCodeAt(0)===46&&le.push(""),Q.replace(jt,function(Ce,Ue,Ye,nt){le.push(Ye?nt.replace(ze,"$1"):Ue||Ce)}),le});function Un(Q){if(typeof Q=="string"||Sn(Q))return Q;var le=Q+"";return le=="0"&&1/Q==-ee?"-0":le}function pi(Q){if(Q!=null){try{return Ji.call(Q)}catch{}try{return Q+""}catch{}}return""}function Qf(Q,le){return kn(fe,function(Ce){var Ue="_."+Ce[0];le&Ce[1]&&!Ki(Q,Ue)&&Q.push(Ue)}),Q.sort()}function xc(Q){if(Q instanceof Nr)return Q.clone();var le=new An(Q.__wrapped__,Q.__chain__);return le.__actions__=vn(Q.__actions__),le.__index__=Q.__index__,le.__values__=Q.__values__,le}function ed(Q,le,Ce){(Ce?hn(Q,le,Ce):le===_)?le=1:le=rn(Er(le),0);var Ue=Q==null?0:Q.length;if(!Ue||le<1)return[];for(var Ye=0,nt=0,lt=Tt(ia(Ue/le));Ye<Ue;)lt[nt++]=In(Q,Ye,Ye+=le);return lt}function td(Q){for(var le=-1,Ce=Q==null?0:Q.length,Ue=0,Ye=[];++le<Ce;){var nt=Q[le];nt&&(Ye[Ue++]=nt)}return Ye}function rd(){var Q=arguments.length;if(!Q)return[];for(var le=Tt(Q-1),Ce=arguments[0],Ue=Q;Ue--;)le[Ue-1]=arguments[Ue];return Zn(xr(Ce)?vn(Ce):[Ce],sn(le,1))}var nd=$r(function(Q,le){return Xr(Q)?Oi(Q,sn(le,1,Xr,!0)):[]}),ad=$r(function(Q,le){var Ce=Pn(le);return Xr(Ce)&&(Ce=_),Xr(Q)?Oi(Q,sn(le,1,Xr,!0),dr(Ce,2)):[]}),sd=$r(function(Q,le){var Ce=Pn(le);return Xr(Ce)&&(Ce=_),Xr(Q)?Oi(Q,sn(le,1,Xr,!0),_,Ce):[]});function od(Q,le,Ce){var Ue=Q==null?0:Q.length;return Ue?(le=Ce||le===_?1:Er(le),In(Q,le<0?0:le,Ue)):[]}function cd(Q,le,Ce){var Ue=Q==null?0:Q.length;return Ue?(le=Ce||le===_?1:Er(le),le=Ue-le,In(Q,0,le<0?0:le)):[]}function ld(Q,le){return Q&&Q.length?pa(Q,dr(le,3),!0,!0):[]}function ud(Q,le){return Q&&Q.length?pa(Q,dr(le,3),!0):[]}function fd(Q,le,Ce,Ue){var Ye=Q==null?0:Q.length;return Ye?(Ce&&typeof Ce!="number"&&hn(Q,le,Ce)&&(Ce=0,Ue=Ye),tf(Q,le,Ce,Ue)):[]}function wc(Q,le,Ce){var Ue=Q==null?0:Q.length;if(!Ue)return-1;var Ye=Ce==null?0:Er(Ce);return Ye<0&&(Ye=rn(Ue+Ye,0)),Gi(Q,dr(le,3),Ye)}function Ec(Q,le,Ce){var Ue=Q==null?0:Q.length;if(!Ue)return-1;var Ye=Ue-1;return Ce!==_&&(Ye=Er(Ce),Ye=Ce<0?rn(Ue+Ye,0):cn(Ye,Ue-1)),Gi(Q,dr(le,3),Ye,!0)}function Sc(Q){var le=Q==null?0:Q.length;return le?sn(Q,1):[]}function dd(Q){var le=Q==null?0:Q.length;return le?sn(Q,ee):[]}function hd(Q,le){var Ce=Q==null?0:Q.length;return Ce?(le=le===_?1:Er(le),sn(Q,le)):[]}function pd(Q){for(var le=-1,Ce=Q==null?0:Q.length,Ue={};++le<Ce;){var Ye=Q[le];Ue[Ye[0]]=Ye[1]}return Ue}function $c(Q){return Q&&Q.length?Q[0]:_}function md(Q,le,Ce){var Ue=Q==null?0:Q.length;if(!Ue)return-1;var Ye=Ce==null?0:Er(Ce);return Ye<0&&(Ye=rn(Ue+Ye,0)),vi(Q,le,Ye)}function vd(Q){var le=Q==null?0:Q.length;return le?In(Q,0,-1):[]}var gd=$r(function(Q){var le=Hr(Q,hs);return le.length&&le[0]===Q[0]?Qa(le):[]}),yd=$r(function(Q){var le=Pn(Q),Ce=Hr(Q,hs);return le===Pn(Ce)?le=_:Ce.pop(),Ce.length&&Ce[0]===Q[0]?Qa(Ce,dr(le,2)):[]}),bd=$r(function(Q){var le=Pn(Q),Ce=Hr(Q,hs);return le=typeof le=="function"?le:_,le&&Ce.pop(),Ce.length&&Ce[0]===Q[0]?Qa(Ce,_,le):[]});function _d(Q,le){return Q==null?"":pu.call(Q,le)}function Pn(Q){var le=Q==null?0:Q.length;return le?Q[le-1]:_}function xd(Q,le,Ce){var Ue=Q==null?0:Q.length;if(!Ue)return-1;var Ye=Ue;return Ce!==_&&(Ye=Er(Ce),Ye=Ye<0?rn(Ue+Ye,0):cn(Ye,Ue-1)),le===le?Zl(Q,le,Ye):Gi(Q,ro,Ye,!0)}function wd(Q,le){return Q&&Q.length?Do(Q,Er(le)):_}var Ed=$r(Cc);function Cc(Q,le){return Q&&Q.length&&le&&le.length?as(Q,le):Q}function Sd(Q,le,Ce){return Q&&Q.length&&le&&le.length?as(Q,le,dr(Ce,2)):Q}function $d(Q,le,Ce){return Q&&Q.length&&le&&le.length?as(Q,le,_,Ce):Q}var Cd=Kn(function(Q,le){var Ce=Q==null?0:Q.length,Ue=Xa(Q,le);return Vo(Q,Hr(le,function(Ye){return Gn(Ye,Ce)?+Ye:Ye}).sort(Wo)),Ue});function Td(Q,le){var Ce=[];if(!(Q&&Q.length))return Ce;var Ue=-1,Ye=[],nt=Q.length;for(le=dr(le,3);++Ue<nt;){var lt=Q[Ue];le(lt,Ue,Q)&&(Ce.push(lt),Ye.push(Ue))}return Vo(Q,Ye),Ce}function ks(Q){return Q==null?Q:yu.call(Q)}function kd(Q,le,Ce){var Ue=Q==null?0:Q.length;return Ue?(Ce&&typeof Ce!="number"&&hn(Q,le,Ce)?(le=0,Ce=Ue):(le=le==null?0:Er(le),Ce=Ce===_?Ue:Er(Ce)),In(Q,le,Ce)):[]}function Bd(Q,le){return ha(Q,le)}function Ad(Q,le,Ce){return ls(Q,le,dr(Ce,2))}function Nd(Q,le){var Ce=Q==null?0:Q.length;if(Ce){var Ue=ha(Q,le);if(Ue<Ce&&On(Q[Ue],le))return Ue}return-1}function Id(Q,le){return ha(Q,le,!0)}function Pd(Q,le,Ce){return ls(Q,le,dr(Ce,2),!0)}function Rd(Q,le){var Ce=Q==null?0:Q.length;if(Ce){var Ue=ha(Q,le,!0)-1;if(On(Q[Ue],le))return Ue}return-1}function Dd(Q){return Q&&Q.length?Fo(Q):[]}function Md(Q,le){return Q&&Q.length?Fo(Q,dr(le,2)):[]}function Od(Q){var le=Q==null?0:Q.length;return le?In(Q,1,le):[]}function Vd(Q,le,Ce){return Q&&Q.length?(le=Ce||le===_?1:Er(le),In(Q,0,le<0?0:le)):[]}function Ld(Q,le,Ce){var Ue=Q==null?0:Q.length;return Ue?(le=Ce||le===_?1:Er(le),le=Ue-le,In(Q,le<0?0:le,Ue)):[]}function Fd(Q,le){return Q&&Q.length?pa(Q,dr(le,3),!1,!0):[]}function Ud(Q,le){return Q&&Q.length?pa(Q,dr(le,3)):[]}var jd=$r(function(Q){return ri(sn(Q,1,Xr,!0))}),qd=$r(function(Q){var le=Pn(Q);return Xr(le)&&(le=_),ri(sn(Q,1,Xr,!0),dr(le,2))}),zd=$r(function(Q){var le=Pn(Q);return le=typeof le=="function"?le:_,ri(sn(Q,1,Xr,!0),_,le)});function Hd(Q){return Q&&Q.length?ri(Q):[]}function Kd(Q,le){return Q&&Q.length?ri(Q,dr(le,2)):[]}function Gd(Q,le){return le=typeof le=="function"?le:_,Q&&Q.length?ri(Q,_,le):[]}function Bs(Q){if(!(Q&&Q.length))return[];var le=0;return Q=Jn(Q,function(Ce){if(Xr(Ce))return le=rn(Ce.length,le),!0}),Ua(le,function(Ce){return Hr(Q,Va(Ce))})}function Tc(Q,le){if(!(Q&&Q.length))return[];var Ce=Bs(Q);return le==null?Ce:Hr(Ce,function(Ue){return xn(le,_,Ue)})}var Wd=$r(function(Q,le){return Xr(Q)?Oi(Q,le):[]}),Xd=$r(function(Q){return ds(Jn(Q,Xr))}),Yd=$r(function(Q){var le=Pn(Q);return Xr(le)&&(le=_),ds(Jn(Q,Xr),dr(le,2))}),Jd=$r(function(Q){var le=Pn(Q);return le=typeof le=="function"?le:_,ds(Jn(Q,Xr),_,le)}),Zd=$r(Bs);function Qd(Q,le){return zo(Q||[],le||[],Mi)}function eh(Q,le){return zo(Q||[],le||[],Fi)}var th=$r(function(Q){var le=Q.length,Ce=le>1?Q[le-1]:_;return Ce=typeof Ce=="function"?(Q.pop(),Ce):_,Tc(Q,Ce)});function kc(Q){var le=et(Q);return le.__chain__=!0,le}function nh(Q,le){return le(Q),Q}function Ea(Q,le){return le(Q)}var ih=Kn(function(Q){var le=Q.length,Ce=le?Q[0]:0,Ue=this.__wrapped__,Ye=function(nt){return Xa(nt,Q)};return le>1||this.__actions__.length||!(Ue instanceof Nr)||!Gn(Ce)?this.thru(Ye):(Ue=Ue.slice(Ce,+Ce+(le?1:0)),Ue.__actions__.push({func:Ea,args:[Ye],thisArg:_}),new An(Ue,this.__chain__).thru(function(nt){return le&&!nt.length&&nt.push(_),nt}))});function ah(){return kc(this)}function oh(){return new An(this.value(),this.__chain__)}function ch(){this.__values__===_&&(this.__values__=jc(this.value()));var Q=this.__index__>=this.__values__.length,le=Q?_:this.__values__[this.__index__++];return{done:Q,value:le}}function lh(){return this}function uh(Q){for(var le,Ce=this;Ce instanceof ca;){var Ue=xc(Ce);Ue.__index__=0,Ue.__values__=_,le?Ye.__wrapped__=Ue:le=Ue;var Ye=Ue;Ce=Ce.__wrapped__}return Ye.__wrapped__=Q,le}function fh(){var Q=this.__wrapped__;if(Q instanceof Nr){var le=Q;return this.__actions__.length&&(le=new Nr(this)),le=le.reverse(),le.__actions__.push({func:Ea,args:[ks],thisArg:_}),new An(le,this.__chain__)}return this.thru(ks)}function hh(){return qo(this.__wrapped__,this.__actions__)}var ph=ma(function(Q,le,Ce){Or.call(Q,Ce)?++Q[Ce]:zn(Q,Ce,1)});function mh(Q,le,Ce){var Ue=xr(Q)?eo:ef;return Ce&&hn(Q,le,Ce)&&(le=_),Ue(Q,dr(le,3))}function vh(Q,le){var Ce=xr(Q)?Jn:Co;return Ce(Q,dr(le,3))}var gh=tc(wc),yh=tc(Ec);function bh(Q,le){return sn(Sa(Q,le),1)}function _h(Q,le){return sn(Sa(Q,le),ee)}function xh(Q,le,Ce){return Ce=Ce===_?1:Er(Ce),sn(Sa(Q,le),Ce)}function Bc(Q,le){var Ce=xr(Q)?kn:ti;return Ce(Q,dr(le,3))}function Ac(Q,le){var Ce=xr(Q)?Rl:$o;return Ce(Q,dr(le,3))}var wh=ma(function(Q,le,Ce){Or.call(Q,Ce)?Q[Ce].push(le):zn(Q,Ce,[le])});function Eh(Q,le,Ce,Ue){Q=gn(Q)?Q:ki(Q),Ce=Ce&&!Ue?Er(Ce):0;var Ye=Q.length;return Ce<0&&(Ce=rn(Ye+Ce,0)),Ba(Q)?Ce<=Ye&&Q.indexOf(le,Ce)>-1:!!Ye&&vi(Q,le,Ce)>-1}var Sh=$r(function(Q,le,Ce){var Ue=-1,Ye=typeof le=="function",nt=gn(Q)?Tt(Q.length):[];return ti(Q,function(lt){nt[++Ue]=Ye?xn(le,lt,Ce):Vi(lt,le,Ce)}),nt}),$h=ma(function(Q,le,Ce){zn(Q,Ce,le)});function Sa(Q,le){var Ce=xr(Q)?Hr:Io;return Ce(Q,dr(le,3))}function Ch(Q,le,Ce,Ue){return Q==null?[]:(xr(le)||(le=le==null?[]:[le]),Ce=Ue?_:Ce,xr(Ce)||(Ce=Ce==null?[]:[Ce]),Mo(Q,le,Ce))}var Th=ma(function(Q,le,Ce){Q[Ce?0:1].push(le)},function(){return[[],[]]});function kh(Q,le,Ce){var Ue=xr(Q)?Ma:io,Ye=arguments.length<3;return Ue(Q,dr(le,4),Ce,Ye,ti)}function Bh(Q,le,Ce){var Ue=xr(Q)?Dl:io,Ye=arguments.length<3;return Ue(Q,dr(le,4),Ce,Ye,$o)}function Ah(Q,le){var Ce=xr(Q)?Jn:Co;return Ce(Q,Ta(dr(le,3)))}function Nh(Q){var le=xr(Q)?xo:bf;return le(Q)}function Ih(Q,le,Ce){(Ce?hn(Q,le,Ce):le===_)?le=1:le=Er(le);var Ue=xr(Q)?Xu:_f;return Ue(Q,le)}function Ph(Q){var le=xr(Q)?Yu:wf;return le(Q)}function Rh(Q){if(Q==null)return 0;if(gn(Q))return Ba(Q)?yi(Q):Q.length;var le=ln(Q);return le==ve||le==Ke?Q.size:rs(Q).length}function Dh(Q,le,Ce){var Ue=xr(Q)?Oa:Ef;return Ce&&hn(Q,le,Ce)&&(le=_),Ue(Q,dr(le,3))}var Mh=$r(function(Q,le){if(Q==null)return[];var Ce=le.length;return Ce>1&&hn(Q,le[0],le[1])?le=[]:Ce>2&&hn(le[0],le[1],le[2])&&(le=[le[0]]),Mo(Q,sn(le,1),[])}),$a=fu||function(){return an.Date.now()};function Oh(Q,le){if(typeof le!="function")throw new Bn(C);return Q=Er(Q),function(){if(--Q<1)return le.apply(this,arguments)}}function Nc(Q,le,Ce){return le=Ce?_:le,le=Q&&le==null?Q.length:le,Hn(Q,X,_,_,_,_,le)}function Ic(Q,le){var Ce;if(typeof le!="function")throw new Bn(C);return Q=Er(Q),function(){return--Q>0&&(Ce=le.apply(this,arguments)),Q<=1&&(le=_),Ce}}var As=$r(function(Q,le,Ce){var Ue=j;if(Ce.length){var Ye=Qn(Ce,Ci(As));Ue|=ne}return Hn(Q,Ue,le,Ce,Ye)}),Pc=$r(function(Q,le,Ce){var Ue=j|U;if(Ce.length){var Ye=Qn(Ce,Ci(Pc));Ue|=ne}return Hn(le,Ue,Q,Ce,Ye)});function Rc(Q,le,Ce){le=Ce?_:le;var Ue=Hn(Q,Y,_,_,_,_,_,le);return Ue.placeholder=Rc.placeholder,Ue}function Dc(Q,le,Ce){le=Ce?_:le;var Ue=Hn(Q,Z,_,_,_,_,_,le);return Ue.placeholder=Dc.placeholder,Ue}function Mc(Q,le,Ce){var Ue,Ye,nt,lt,ht,bt,qt=0,zt=!1,Yt=!1,Zt=!0;if(typeof Q!="function")throw new Bn(C);le=Rn(le)||0,Kr(Ce)&&(zt=!!Ce.leading,Yt="maxWait"in Ce,nt=Yt?rn(Rn(Ce.maxWait)||0,le):nt,Zt="trailing"in Ce?!!Ce.trailing:Zt);function cr(Yr){var Vn=Ue,Yn=Ye;return Ue=Ye=_,qt=Yr,lt=Q.apply(Yn,Vn),lt}function pr(Yr){return qt=Yr,ht=qi(Tr,le),zt?cr(Yr):lt}function Sr(Yr){var Vn=Yr-bt,Yn=Yr-qt,tl=le-Vn;return Yt?cn(tl,nt-Yn):tl}function vr(Yr){var Vn=Yr-bt,Yn=Yr-qt;return bt===_||Vn>=le||Vn<0||Yt&&Yn>=nt}function Tr(){var Yr=$a();if(vr(Yr))return Ir(Yr);ht=qi(Tr,Sr(Yr))}function Ir(Yr){return ht=_,Zt&&Ue?cr(Yr):(Ue=Ye=_,lt)}function $n(){ht!==_&&Ho(ht),qt=0,Ue=bt=Ye=ht=_}function pn(){return ht===_?lt:Ir($a())}function Cn(){var Yr=$a(),Vn=vr(Yr);if(Ue=arguments,Ye=this,bt=Yr,Vn){if(ht===_)return pr(bt);if(Yt)return Ho(ht),ht=qi(Tr,le),cr(bt)}return ht===_&&(ht=qi(Tr,le)),lt}return Cn.cancel=$n,Cn.flush=pn,Cn}var Vh=$r(function(Q,le){return So(Q,1,le)}),Lh=$r(function(Q,le,Ce){return So(Q,Rn(le)||0,Ce)});function Fh(Q){return Hn(Q,ue)}function Ca(Q,le){if(typeof Q!="function"||le!=null&&typeof le!="function")throw new Bn(C);var Ce=function(){var Ue=arguments,Ye=le?le.apply(this,Ue):Ue[0],nt=Ce.cache;if(nt.has(Ye))return nt.get(Ye);var lt=Q.apply(this,Ue);return Ce.cache=nt.set(Ye,lt)||nt,lt};return Ce.cache=new(Ca.Cache||qn),Ce}Ca.Cache=qn;function Ta(Q){if(typeof Q!="function")throw new Bn(C);return function(){var le=arguments;switch(le.length){case 0:return!Q.call(this);case 1:return!Q.call(this,le[0]);case 2:return!Q.call(this,le[0],le[1]);case 3:return!Q.call(this,le[0],le[1],le[2])}return!Q.apply(this,le)}}function Uh(Q){return Ic(2,Q)}var jh=Sf(function(Q,le){le=le.length==1&&xr(le[0])?Hr(le[0],wn(dr())):Hr(sn(le,1),wn(dr()));var Ce=le.length;return $r(function(Ue){for(var Ye=-1,nt=cn(Ue.length,Ce);++Ye<nt;)Ue[Ye]=le[Ye].call(this,Ue[Ye]);return xn(Q,this,Ue)})}),Ns=$r(function(Q,le){var Ce=Qn(le,Ci(Ns));return Hn(Q,ne,_,le,Ce)}),Oc=$r(function(Q,le){var Ce=Qn(le,Ci(Oc));return Hn(Q,re,_,le,Ce)}),qh=Kn(function(Q,le){return Hn(Q,ce,_,_,_,le)});function zh(Q,le){if(typeof Q!="function")throw new Bn(C);return le=le===_?le:Er(le),$r(Q,le)}function Hh(Q,le){if(typeof Q!="function")throw new Bn(C);return le=le==null?0:rn(Er(le),0),$r(function(Ce){var Ue=Ce[le],Ye=ii(Ce,0,le);return Ue&&Zn(Ye,Ue),xn(Q,this,Ye)})}function Gh(Q,le,Ce){var Ue=!0,Ye=!0;if(typeof Q!="function")throw new Bn(C);return Kr(Ce)&&(Ue="leading"in Ce?!!Ce.leading:Ue,Ye="trailing"in Ce?!!Ce.trailing:Ye),Mc(Q,le,{leading:Ue,maxWait:le,trailing:Ye})}function Wh(Q){return Nc(Q,1)}function Xh(Q,le){return Ns(ps(le),Q)}function Yh(){if(!arguments.length)return[];var Q=arguments[0];return xr(Q)?Q:[Q]}function Jh(Q){return Nn(Q,V)}function Zh(Q,le){return le=typeof le=="function"?le:_,Nn(Q,V,le)}function Qh(Q){return Nn(Q,D|V)}function e0(Q,le){return le=typeof le=="function"?le:_,Nn(Q,D|V,le)}function t0(Q,le){return le==null||Eo(Q,le,nn(le))}function On(Q,le){return Q===le||Q!==Q&&le!==le}var r0=ba(Za),n0=ba(function(Q,le){return Q>=le}),mi=Bo(function(){return arguments}())?Bo:function(Q){return Gr(Q)&&Or.call(Q,"callee")&&!po.call(Q,"callee")},xr=Tt.isArray,i0=Ws?wn(Ws):of;function gn(Q){return Q!=null&&ka(Q.length)&&!Wn(Q)}function Xr(Q){return Gr(Q)&&gn(Q)}function a0(Q){return Q===!0||Q===!1||Gr(Q)&&dn(Q)==xe}var ai=hu||js,s0=Xs?wn(Xs):cf;function o0(Q){return Gr(Q)&&Q.nodeType===1&&!zi(Q)}function c0(Q){if(Q==null)return!0;if(gn(Q)&&(xr(Q)||typeof Q=="string"||typeof Q.splice=="function"||ai(Q)||Ti(Q)||mi(Q)))return!Q.length;var le=ln(Q);if(le==ve||le==Ke)return!Q.size;if(ji(Q))return!rs(Q).length;for(var Ce in Q)if(Or.call(Q,Ce))return!1;return!0}function l0(Q,le){return Li(Q,le)}function u0(Q,le,Ce){Ce=typeof Ce=="function"?Ce:_;var Ue=Ce?Ce(Q,le):_;return Ue===_?Li(Q,le,_,Ce):!!Ue}function Is(Q){if(!Gr(Q))return!1;var le=dn(Q);return le==Se||le==ge||typeof Q.message=="string"&&typeof Q.name=="string"&&!zi(Q)}function f0(Q){return typeof Q=="number"&&vo(Q)}function Wn(Q){if(!Kr(Q))return!1;var le=dn(Q);return le==me||le==Be||le==we||le==Ne}function Vc(Q){return typeof Q=="number"&&Q==Er(Q)}function ka(Q){return typeof Q=="number"&&Q>-1&&Q%1==0&&Q<=ae}function Kr(Q){var le=typeof Q;return Q!=null&&(le=="object"||le=="function")}function Gr(Q){return Q!=null&&typeof Q=="object"}var Lc=Ys?wn(Ys):uf;function d0(Q,le){return Q===le||ts(Q,le,ws(le))}function h0(Q,le,Ce){return Ce=typeof Ce=="function"?Ce:_,ts(Q,le,ws(le),Ce)}function p0(Q){return Fc(Q)&&Q!=+Q}function m0(Q){if(Gf(Q))throw new _r(S);return Ao(Q)}function g0(Q){return Q===null}function y0(Q){return Q==null}function Fc(Q){return typeof Q=="number"||Gr(Q)&&dn(Q)==Ae}function zi(Q){if(!Gr(Q)||dn(Q)!=Pe)return!1;var le=ta(Q);if(le===null)return!0;var Ce=Or.call(le,"constructor")&&le.constructor;return typeof Ce=="function"&&Ce instanceof Ce&&Ji.call(Ce)==ou}var Ps=Js?wn(Js):ff;function b0(Q){return Vc(Q)&&Q>=-ae&&Q<=ae}var Uc=Zs?wn(Zs):df;function Ba(Q){return typeof Q=="string"||!xr(Q)&&Gr(Q)&&dn(Q)==He}function Sn(Q){return typeof Q=="symbol"||Gr(Q)&&dn(Q)==Ge}var Ti=Qs?wn(Qs):hf;function _0(Q){return Q===_}function x0(Q){return Gr(Q)&&ln(Q)==st}function w0(Q){return Gr(Q)&&dn(Q)==Je}var E0=ba(ns),S0=ba(function(Q,le){return Q<=le});function jc(Q){if(!Q)return[];if(gn(Q))return Ba(Q)?Dn(Q):vn(Q);if(Ni&&Q[Ni])return Xl(Q[Ni]());var le=ln(Q),Ce=le==ve?qa:le==Ke?Wi:ki;return Ce(Q)}function Xn(Q){if(!Q)return Q===0?Q:0;if(Q=Rn(Q),Q===ee||Q===-ee){var le=Q<0?-1:1;return le*oe}return Q===Q?Q:0}function Er(Q){var le=Xn(Q),Ce=le%1;return le===le?Ce?le-Ce:le:0}function qc(Q){return Q?fi(Er(Q),0,G):0}function Rn(Q){if(typeof Q=="number")return Q;if(Sn(Q))return se;if(Kr(Q)){var le=typeof Q.valueOf=="function"?Q.valueOf():Q;Q=Kr(le)?le+"":le}if(typeof Q!="string")return Q===0?Q:+Q;Q=ao(Q);var Ce=ot.test(Q);return Ce||ct.test(Q)?Nl(Q.slice(2),Ce?2:8):it.test(Q)?se:+Q}function zc(Q){return Fn(Q,yn(Q))}function $0(Q){return Q?fi(Er(Q),-ae,ae):Q===0?Q:0}function Dr(Q){return Q==null?"":En(Q)}var C0=Si(function(Q,le){if(ji(le)||gn(le)){Fn(le,nn(le),Q);return}for(var Ce in le)Or.call(le,Ce)&&Mi(Q,Ce,le[Ce])}),Hc=Si(function(Q,le){Fn(le,yn(le),Q)}),Aa=Si(function(Q,le,Ce,Ue){Fn(le,yn(le),Q,Ue)}),T0=Si(function(Q,le,Ce,Ue){Fn(le,nn(le),Q,Ue)}),k0=Kn(Xa);function B0(Q,le){var Ce=Ei(Q);return le==null?Ce:wo(Ce,le)}var A0=$r(function(Q,le){Q=Vr(Q);var Ce=-1,Ue=le.length,Ye=Ue>2?le[2]:_;for(Ye&&hn(le[0],le[1],Ye)&&(Ue=1);++Ce<Ue;)for(var nt=le[Ce],lt=yn(nt),ht=-1,bt=lt.length;++ht<bt;){var qt=lt[ht],zt=Q[qt];(zt===_||On(zt,_i[qt])&&!Or.call(Q,qt))&&(Q[qt]=nt[qt])}return Q}),N0=$r(function(Q){return Q.push(_,cc),xn(Kc,_,Q)});function I0(Q,le){return to(Q,dr(le,3),Ln)}function P0(Q,le){return to(Q,dr(le,3),Ja)}function R0(Q,le){return Q==null?Q:Ya(Q,dr(le,3),yn)}function D0(Q,le){return Q==null?Q:To(Q,dr(le,3),yn)}function M0(Q,le){return Q&&Ln(Q,dr(le,3))}function O0(Q,le){return Q&&Ja(Q,dr(le,3))}function V0(Q){return Q==null?[]:fa(Q,nn(Q))}function L0(Q){return Q==null?[]:fa(Q,yn(Q))}function Rs(Q,le,Ce){var Ue=Q==null?_:di(Q,le);return Ue===_?Ce:Ue}function F0(Q,le){return Q!=null&&fc(Q,le,rf)}function Ds(Q,le){return Q!=null&&fc(Q,le,nf)}var U0=nc(function(Q,le,Ce){le!=null&&typeof le.toString!="function"&&(le=Zi.call(le)),Q[le]=Ce},Os(_n)),j0=nc(function(Q,le,Ce){le!=null&&typeof le.toString!="function"&&(le=Zi.call(le)),Or.call(Q,le)?Q[le].push(Ce):Q[le]=[Ce]},dr),q0=$r(Vi);function nn(Q){return gn(Q)?_o(Q):rs(Q)}function yn(Q){return gn(Q)?_o(Q,!0):pf(Q)}function z0(Q,le){var Ce={};return le=dr(le,3),Ln(Q,function(Ue,Ye,nt){zn(Ce,le(Ue,Ye,nt),Ue)}),Ce}function H0(Q,le){var Ce={};return le=dr(le,3),Ln(Q,function(Ue,Ye,nt){zn(Ce,Ye,le(Ue,Ye,nt))}),Ce}var K0=Si(function(Q,le,Ce){da(Q,le,Ce)}),Kc=Si(function(Q,le,Ce,Ue){da(Q,le,Ce,Ue)}),G0=Kn(function(Q,le){var Ce={};if(Q==null)return Ce;var Ue=!1;le=Hr(le,function(nt){return nt=ni(nt,Q),Ue||(Ue=nt.length>1),nt}),Fn(Q,_s(Q),Ce),Ue&&(Ce=Nn(Ce,D|M|V,Df));for(var Ye=le.length;Ye--;)us(Ce,le[Ye]);return Ce});function W0(Q,le){return Gc(Q,Ta(dr(le)))}var X0=Kn(function(Q,le){return Q==null?{}:vf(Q,le)});function Gc(Q,le){if(Q==null)return{};var Ce=Hr(_s(Q),function(Ue){return[Ue]});return le=dr(le),Oo(Q,Ce,function(Ue,Ye){return le(Ue,Ye[0])})}function Y0(Q,le,Ce){le=ni(le,Q);var Ue=-1,Ye=le.length;for(Ye||(Ye=1,Q=_);++Ue<Ye;){var nt=Q==null?_:Q[Un(le[Ue])];nt===_&&(Ue=Ye,nt=Ce),Q=Wn(nt)?nt.call(Q):nt}return Q}function J0(Q,le,Ce){return Q==null?Q:Fi(Q,le,Ce)}function Z0(Q,le,Ce,Ue){return Ue=typeof Ue=="function"?Ue:_,Q==null?Q:Fi(Q,le,Ce,Ue)}var Wc=sc(nn),Xc=sc(yn);function Q0(Q,le,Ce){var Ue=xr(Q),Ye=Ue||ai(Q)||Ti(Q);if(le=dr(le,4),Ce==null){var nt=Q&&Q.constructor;Ye?Ce=Ue?new nt:[]:Kr(Q)?Ce=Wn(nt)?Ei(ta(Q)):{}:Ce={}}return(Ye?kn:Ln)(Q,function(lt,ht,bt){return le(Ce,lt,ht,bt)}),Ce}function ep(Q,le){return Q==null?!0:us(Q,le)}function tp(Q,le,Ce){return Q==null?Q:jo(Q,le,ps(Ce))}function rp(Q,le,Ce,Ue){return Ue=typeof Ue=="function"?Ue:_,Q==null?Q:jo(Q,le,ps(Ce),Ue)}function ki(Q){return Q==null?[]:ja(Q,nn(Q))}function np(Q){return Q==null?[]:ja(Q,yn(Q))}function ip(Q,le,Ce){return Ce===_&&(Ce=le,le=_),Ce!==_&&(Ce=Rn(Ce),Ce=Ce===Ce?Ce:0),le!==_&&(le=Rn(le),le=le===le?le:0),fi(Rn(Q),le,Ce)}function ap(Q,le,Ce){return le=Xn(le),Ce===_?(Ce=le,le=0):Ce=Xn(Ce),Q=Rn(Q),af(Q,le,Ce)}function sp(Q,le,Ce){if(Ce&&typeof Ce!="boolean"&&hn(Q,le,Ce)&&(le=Ce=_),Ce===_&&(typeof le=="boolean"?(Ce=le,le=_):typeof Q=="boolean"&&(Ce=Q,Q=_)),Q===_&&le===_?(Q=0,le=1):(Q=Xn(Q),le===_?(le=Q,Q=0):le=Xn(le)),Q>le){var Ue=Q;Q=le,le=Ue}if(Ce||Q%1||le%1){var Ye=go();return cn(Q+Ye*(le-Q+Al("1e-"+((Ye+"").length-1))),le)}return ss(Q,le)}var op=$i(function(Q,le,Ce){return le=le.toLowerCase(),Q+(Ce?Yc(le):le)});function Yc(Q){return Ms(Dr(Q).toLowerCase())}function Jc(Q){return Q=Dr(Q),Q&&Q.replace(yt,ql).replace(bl,"")}function cp(Q,le,Ce){Q=Dr(Q),le=En(le);var Ue=Q.length;Ce=Ce===_?Ue:fi(Er(Ce),0,Ue);var Ye=Ce;return Ce-=le.length,Ce>=0&&Q.slice(Ce,Ye)==le}function lp(Q){return Q=Dr(Q),Q&&Pt.test(Q)?Q.replace(Rt,Hl):Q}function up(Q){return Q=Dr(Q),Q&&nr.test(Q)?Q.replace(Ct,"\\$&"):Q}var fp=$i(function(Q,le,Ce){return Q+(Ce?"-":"")+le.toLowerCase()}),dp=$i(function(Q,le,Ce){return Q+(Ce?" ":"")+le.toLowerCase()}),hp=Qo("toLowerCase");function pp(Q,le,Ce){Q=Dr(Q),le=Er(le);var Ue=le?yi(Q):0;if(!le||Ue>=le)return Q;var Ye=(le-Ue)/2;return ya(aa(Ye),Ce)+Q+ya(ia(Ye),Ce)}function mp(Q,le,Ce){Q=Dr(Q),le=Er(le);var Ue=le?yi(Q):0;return le&&Ue<le?Q+ya(le-Ue,Ce):Q}function vp(Q,le,Ce){Q=Dr(Q),le=Er(le);var Ue=le?yi(Q):0;return le&&Ue<le?ya(le-Ue,Ce)+Q:Q}function gp(Q,le,Ce){return Ce||le==null?le=0:le&&(le=+le),gu(Dr(Q).replace(je,""),le||0)}function yp(Q,le,Ce){return(Ce?hn(Q,le,Ce):le===_)?le=1:le=Er(le),cs(Dr(Q),le)}function bp(){var Q=arguments,le=Dr(Q[0]);return Q.length<3?le:le.replace(Q[1],Q[2])}var _p=$i(function(Q,le,Ce){return Q+(Ce?"_":"")+le.toLowerCase()});function xp(Q,le,Ce){return Ce&&typeof Ce!="number"&&hn(Q,le,Ce)&&(le=Ce=_),Ce=Ce===_?G:Ce>>>0,Ce?(Q=Dr(Q),Q&&(typeof le=="string"||le!=null&&!Ps(le))&&(le=En(le),!le&&gi(Q))?ii(Dn(Q),0,Ce):Q.split(le,Ce)):[]}var wp=$i(function(Q,le,Ce){return Q+(Ce?" ":"")+Ms(le)});function Ep(Q,le,Ce){return Q=Dr(Q),Ce=Ce==null?0:fi(Er(Ce),0,Q.length),le=En(le),Q.slice(Ce,Ce+le.length)==le}function Sp(Q,le,Ce){var Ue=et.templateSettings;Ce&&hn(Q,le,Ce)&&(le=_),Q=Dr(Q),le=Aa({},le,Ue,oc);var Ye=Aa({},le.imports,Ue.imports,oc),nt=nn(Ye),lt=ja(Ye,nt),ht,bt,qt=0,zt=le.interpolate||Et,Yt="__p += '",Zt=za((le.escape||Et).source+"|"+zt.source+"|"+(zt===Lt?Xe:Et).source+"|"+(le.evaluate||Et).source+"|$","g"),cr="//# sourceURL="+(Or.call(le,"sourceURL")?(le.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Sl+"]")+`
`;Q.replace(Zt,function(vr,Tr,Ir,$n,pn,Cn){return Ir||(Ir=$n),Yt+=Q.slice(qt,Cn).replace(mt,Kl),Tr&&(ht=!0,Yt+=`' +
__e(`+Tr+`) +
'`),pn&&(bt=!0,Yt+=`';
`+pn+`;
__p += '`),Ir&&(Yt+=`' +
((__t = (`+Ir+`)) == null ? '' : __t) +
'`),qt=Cn+vr.length,vr}),Yt+=`';
`;var pr=Or.call(le,"variable")&&le.variable;if(!pr)Yt=`with (obj) {
`+Yt+`
}
`;else if(Fe.test(pr))throw new _r(T);Yt=(bt?Yt.replace($t,""):Yt).replace(Nt,"$1").replace(lr,"$1;"),Yt="function("+(pr||"obj")+`) {
`+(pr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ht?", __e = _.escape":"")+(bt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Yt+`return __p
}`;var Sr=Qc(function(){return Rr(nt,cr+"return "+Yt).apply(_,lt)});if(Sr.source=Yt,Is(Sr))throw Sr;return Sr}function $p(Q){return Dr(Q).toLowerCase()}function Cp(Q){return Dr(Q).toUpperCase()}function Tp(Q,le,Ce){if(Q=Dr(Q),Q&&(Ce||le===_))return ao(Q);if(!Q||!(le=En(le)))return Q;var Ue=Dn(Q),Ye=Dn(le),nt=so(Ue,Ye),lt=oo(Ue,Ye)+1;return ii(Ue,nt,lt).join("")}function kp(Q,le,Ce){if(Q=Dr(Q),Q&&(Ce||le===_))return Q.slice(0,lo(Q)+1);if(!Q||!(le=En(le)))return Q;var Ue=Dn(Q),Ye=oo(Ue,Dn(le))+1;return ii(Ue,0,Ye).join("")}function Bp(Q,le,Ce){if(Q=Dr(Q),Q&&(Ce||le===_))return Q.replace(je,"");if(!Q||!(le=En(le)))return Q;var Ue=Dn(Q),Ye=so(Ue,Dn(le));return ii(Ue,Ye).join("")}function Ap(Q,le){var Ce=_e,Ue=ye;if(Kr(le)){var Ye="separator"in le?le.separator:Ye;Ce="length"in le?Er(le.length):Ce,Ue="omission"in le?En(le.omission):Ue}Q=Dr(Q);var nt=Q.length;if(gi(Q)){var lt=Dn(Q);nt=lt.length}if(Ce>=nt)return Q;var ht=Ce-yi(Ue);if(ht<1)return Ue;var bt=lt?ii(lt,0,ht).join(""):Q.slice(0,ht);if(Ye===_)return bt+Ue;if(lt&&(ht+=bt.length-ht),Ps(Ye)){if(Q.slice(ht).search(Ye)){var qt,zt=bt;for(Ye.global||(Ye=za(Ye.source,Dr(tt.exec(Ye))+"g")),Ye.lastIndex=0;qt=Ye.exec(zt);)var Yt=qt.index;bt=bt.slice(0,Yt===_?ht:Yt)}}else if(Q.indexOf(En(Ye),ht)!=ht){var Zt=bt.lastIndexOf(Ye);Zt>-1&&(bt=bt.slice(0,Zt))}return bt+Ue}function Np(Q){return Q=Dr(Q),Q&&Qt.test(Q)?Q.replace(Gt,Ql):Q}var Ip=$i(function(Q,le,Ce){return Q+(Ce?" ":"")+le.toUpperCase()}),Ms=Qo("toUpperCase");function Zc(Q,le,Ce){return Q=Dr(Q),le=Ce?_:le,le===_?Wl(Q)?ru(Q):Vl(Q):Q.match(le)||[]}var Qc=$r(function(Q,le){try{return xn(Q,_,le)}catch(Ce){return Is(Ce)?Ce:new _r(Ce)}}),Pp=Kn(function(Q,le){return kn(le,function(Ce){Ce=Un(Ce),zn(Q,Ce,As(Q[Ce],Q))}),Q});function Rp(Q){var le=Q==null?0:Q.length,Ce=dr();return Q=le?Hr(Q,function(Ue){if(typeof Ue[1]!="function")throw new Bn(C);return[Ce(Ue[0]),Ue[1]]}):[],$r(function(Ue){for(var Ye=-1;++Ye<le;){var nt=Q[Ye];if(xn(nt[0],this,Ue))return xn(nt[1],this,Ue)}})}function Dp(Q){return Qu(Nn(Q,D))}function Os(Q){return function(){return Q}}function Mp(Q,le){return Q==null||Q!==Q?le:Q}var Vp=rc(),Lp=rc(!0);function _n(Q){return Q}function Vs(Q){return No(typeof Q=="function"?Q:Nn(Q,D))}function Fp(Q){return Po(Nn(Q,D))}function Up(Q,le){return Ro(Q,Nn(le,D))}var jp=$r(function(Q,le){return function(Ce){return Vi(Ce,Q,le)}}),qp=$r(function(Q,le){return function(Ce){return Vi(Q,Ce,le)}});function Ls(Q,le,Ce){var Ue=nn(le),Ye=fa(le,Ue);Ce==null&&!(Kr(le)&&(Ye.length||!Ue.length))&&(Ce=le,le=Q,Q=this,Ye=fa(le,nn(le)));var nt=!(Kr(Ce)&&"chain"in Ce)||!!Ce.chain,lt=Wn(Q);return kn(Ye,function(ht){var bt=le[ht];Q[ht]=bt,lt&&(Q.prototype[ht]=function(){var qt=this.__chain__;if(nt||qt){var zt=Q(this.__wrapped__),Yt=zt.__actions__=vn(this.__actions__);return Yt.push({func:bt,args:arguments,thisArg:Q}),zt.__chain__=qt,zt}return bt.apply(Q,Zn([this.value()],arguments))})}),Q}function zp(){return an._===this&&(an._=cu),this}function Fs(){}function Hp(Q){return Q=Er(Q),$r(function(le){return Do(le,Q)})}var Kp=gs(Hr),Gp=gs(eo),Wp=gs(Oa);function el(Q){return Ss(Q)?Va(Un(Q)):gf(Q)}function Xp(Q){return function(le){return Q==null?_:di(Q,le)}}var Yp=ic(),Jp=ic(!0);function Us(){return[]}function js(){return!1}function Zp(){return{}}function Qp(){return""}function em(){return!0}function tm(Q,le){if(Q=Er(Q),Q<1||Q>ae)return[];var Ce=G,Ue=cn(Q,G);le=dr(le),Q-=G;for(var Ye=Ua(Ue,le);++Ce<Q;)le(Ce);return Ye}function rm(Q){return xr(Q)?Hr(Q,Un):Sn(Q)?[Q]:vn(_c(Dr(Q)))}function nm(Q){var le=++su;return Dr(Q)+le}var im=ga(function(Q,le){return Q+le},0),am=ys("ceil"),sm=ga(function(Q,le){return Q/le},1),om=ys("floor");function cm(Q){return Q&&Q.length?ua(Q,_n,Za):_}function lm(Q,le){return Q&&Q.length?ua(Q,dr(le,2),Za):_}function um(Q){return no(Q,_n)}function fm(Q,le){return no(Q,dr(le,2))}function dm(Q){return Q&&Q.length?ua(Q,_n,ns):_}function hm(Q,le){return Q&&Q.length?ua(Q,dr(le,2),ns):_}var pm=ga(function(Q,le){return Q*le},1),mm=ys("round"),vm=ga(function(Q,le){return Q-le},0);function gm(Q){return Q&&Q.length?Fa(Q,_n):0}function ym(Q,le){return Q&&Q.length?Fa(Q,dr(le,2)):0}return et.after=Oh,et.ary=Nc,et.assign=C0,et.assignIn=Hc,et.assignInWith=Aa,et.assignWith=T0,et.at=k0,et.before=Ic,et.bind=As,et.bindAll=Pp,et.bindKey=Pc,et.castArray=Yh,et.chain=kc,et.chunk=ed,et.compact=td,et.concat=rd,et.cond=Rp,et.conforms=Dp,et.constant=Os,et.countBy=ph,et.create=B0,et.curry=Rc,et.curryRight=Dc,et.debounce=Mc,et.defaults=A0,et.defaultsDeep=N0,et.defer=Vh,et.delay=Lh,et.difference=nd,et.differenceBy=ad,et.differenceWith=sd,et.drop=od,et.dropRight=cd,et.dropRightWhile=ld,et.dropWhile=ud,et.fill=fd,et.filter=vh,et.flatMap=bh,et.flatMapDeep=_h,et.flatMapDepth=xh,et.flatten=Sc,et.flattenDeep=dd,et.flattenDepth=hd,et.flip=Fh,et.flow=Vp,et.flowRight=Lp,et.fromPairs=pd,et.functions=V0,et.functionsIn=L0,et.groupBy=wh,et.initial=vd,et.intersection=gd,et.intersectionBy=yd,et.intersectionWith=bd,et.invert=U0,et.invertBy=j0,et.invokeMap=Sh,et.iteratee=Vs,et.keyBy=$h,et.keys=nn,et.keysIn=yn,et.map=Sa,et.mapKeys=z0,et.mapValues=H0,et.matches=Fp,et.matchesProperty=Up,et.memoize=Ca,et.merge=K0,et.mergeWith=Kc,et.method=jp,et.methodOf=qp,et.mixin=Ls,et.negate=Ta,et.nthArg=Hp,et.omit=G0,et.omitBy=W0,et.once=Uh,et.orderBy=Ch,et.over=Kp,et.overArgs=jh,et.overEvery=Gp,et.overSome=Wp,et.partial=Ns,et.partialRight=Oc,et.partition=Th,et.pick=X0,et.pickBy=Gc,et.property=el,et.propertyOf=Xp,et.pull=Ed,et.pullAll=Cc,et.pullAllBy=Sd,et.pullAllWith=$d,et.pullAt=Cd,et.range=Yp,et.rangeRight=Jp,et.rearg=qh,et.reject=Ah,et.remove=Td,et.rest=zh,et.reverse=ks,et.sampleSize=Ih,et.set=J0,et.setWith=Z0,et.shuffle=Ph,et.slice=kd,et.sortBy=Mh,et.sortedUniq=Dd,et.sortedUniqBy=Md,et.split=xp,et.spread=Hh,et.tail=Od,et.take=Vd,et.takeRight=Ld,et.takeRightWhile=Fd,et.takeWhile=Ud,et.tap=nh,et.throttle=Gh,et.thru=Ea,et.toArray=jc,et.toPairs=Wc,et.toPairsIn=Xc,et.toPath=rm,et.toPlainObject=zc,et.transform=Q0,et.unary=Wh,et.union=jd,et.unionBy=qd,et.unionWith=zd,et.uniq=Hd,et.uniqBy=Kd,et.uniqWith=Gd,et.unset=ep,et.unzip=Bs,et.unzipWith=Tc,et.update=tp,et.updateWith=rp,et.values=ki,et.valuesIn=np,et.without=Wd,et.words=Zc,et.wrap=Xh,et.xor=Xd,et.xorBy=Yd,et.xorWith=Jd,et.zip=Zd,et.zipObject=Qd,et.zipObjectDeep=eh,et.zipWith=th,et.entries=Wc,et.entriesIn=Xc,et.extend=Hc,et.extendWith=Aa,Ls(et,et),et.add=im,et.attempt=Qc,et.camelCase=op,et.capitalize=Yc,et.ceil=am,et.clamp=ip,et.clone=Jh,et.cloneDeep=Qh,et.cloneDeepWith=e0,et.cloneWith=Zh,et.conformsTo=t0,et.deburr=Jc,et.defaultTo=Mp,et.divide=sm,et.endsWith=cp,et.eq=On,et.escape=lp,et.escapeRegExp=up,et.every=mh,et.find=gh,et.findIndex=wc,et.findKey=I0,et.findLast=yh,et.findLastIndex=Ec,et.findLastKey=P0,et.floor=om,et.forEach=Bc,et.forEachRight=Ac,et.forIn=R0,et.forInRight=D0,et.forOwn=M0,et.forOwnRight=O0,et.get=Rs,et.gt=r0,et.gte=n0,et.has=F0,et.hasIn=Ds,et.head=$c,et.identity=_n,et.includes=Eh,et.indexOf=md,et.inRange=ap,et.invoke=q0,et.isArguments=mi,et.isArray=xr,et.isArrayBuffer=i0,et.isArrayLike=gn,et.isArrayLikeObject=Xr,et.isBoolean=a0,et.isBuffer=ai,et.isDate=s0,et.isElement=o0,et.isEmpty=c0,et.isEqual=l0,et.isEqualWith=u0,et.isError=Is,et.isFinite=f0,et.isFunction=Wn,et.isInteger=Vc,et.isLength=ka,et.isMap=Lc,et.isMatch=d0,et.isMatchWith=h0,et.isNaN=p0,et.isNative=m0,et.isNil=y0,et.isNull=g0,et.isNumber=Fc,et.isObject=Kr,et.isObjectLike=Gr,et.isPlainObject=zi,et.isRegExp=Ps,et.isSafeInteger=b0,et.isSet=Uc,et.isString=Ba,et.isSymbol=Sn,et.isTypedArray=Ti,et.isUndefined=_0,et.isWeakMap=x0,et.isWeakSet=w0,et.join=_d,et.kebabCase=fp,et.last=Pn,et.lastIndexOf=xd,et.lowerCase=dp,et.lowerFirst=hp,et.lt=E0,et.lte=S0,et.max=cm,et.maxBy=lm,et.mean=um,et.meanBy=fm,et.min=dm,et.minBy=hm,et.stubArray=Us,et.stubFalse=js,et.stubObject=Zp,et.stubString=Qp,et.stubTrue=em,et.multiply=pm,et.nth=wd,et.noConflict=zp,et.noop=Fs,et.now=$a,et.pad=pp,et.padEnd=mp,et.padStart=vp,et.parseInt=gp,et.random=sp,et.reduce=kh,et.reduceRight=Bh,et.repeat=yp,et.replace=bp,et.result=Y0,et.round=mm,et.runInContext=vt,et.sample=Nh,et.size=Rh,et.snakeCase=_p,et.some=Dh,et.sortedIndex=Bd,et.sortedIndexBy=Ad,et.sortedIndexOf=Nd,et.sortedLastIndex=Id,et.sortedLastIndexBy=Pd,et.sortedLastIndexOf=Rd,et.startCase=wp,et.startsWith=Ep,et.subtract=vm,et.sum=gm,et.sumBy=ym,et.template=Sp,et.times=tm,et.toFinite=Xn,et.toInteger=Er,et.toLength=qc,et.toLower=$p,et.toNumber=Rn,et.toSafeInteger=$0,et.toString=Dr,et.toUpper=Cp,et.trim=Tp,et.trimEnd=kp,et.trimStart=Bp,et.truncate=Ap,et.unescape=Np,et.uniqueId=nm,et.upperCase=Ip,et.upperFirst=Ms,et.each=Bc,et.eachRight=Ac,et.first=$c,Ls(et,function(){var Q={};return Ln(et,function(le,Ce){Or.call(et.prototype,Ce)||(Q[Ce]=le)}),Q}(),{chain:!1}),et.VERSION=x,kn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(Q){et[Q].placeholder=et}),kn(["drop","take"],function(Q,le){Nr.prototype[Q]=function(Ce){Ce=Ce===_?1:rn(Er(Ce),0);var Ue=this.__filtered__&&!le?new Nr(this):this.clone();return Ue.__filtered__?Ue.__takeCount__=cn(Ce,Ue.__takeCount__):Ue.__views__.push({size:cn(Ce,G),type:Q+(Ue.__dir__<0?"Right":"")}),Ue},Nr.prototype[Q+"Right"]=function(Ce){return this.reverse()[Q](Ce).reverse()}}),kn(["filter","map","takeWhile"],function(Q,le){var Ce=le+1,Ue=Ce==O||Ce==J;Nr.prototype[Q]=function(Ye){var nt=this.clone();return nt.__iteratees__.push({iteratee:dr(Ye,3),type:Ce}),nt.__filtered__=nt.__filtered__||Ue,nt}}),kn(["head","last"],function(Q,le){var Ce="take"+(le?"Right":"");Nr.prototype[Q]=function(){return this[Ce](1).value()[0]}}),kn(["initial","tail"],function(Q,le){var Ce="drop"+(le?"":"Right");Nr.prototype[Q]=function(){return this.__filtered__?new Nr(this):this[Ce](1)}}),Nr.prototype.compact=function(){return this.filter(_n)},Nr.prototype.find=function(Q){return this.filter(Q).head()},Nr.prototype.findLast=function(Q){return this.reverse().find(Q)},Nr.prototype.invokeMap=$r(function(Q,le){return typeof Q=="function"?new Nr(this):this.map(function(Ce){return Vi(Ce,Q,le)})}),Nr.prototype.reject=function(Q){return this.filter(Ta(dr(Q)))},Nr.prototype.slice=function(Q,le){Q=Er(Q);var Ce=this;return Ce.__filtered__&&(Q>0||le<0)?new Nr(Ce):(Q<0?Ce=Ce.takeRight(-Q):Q&&(Ce=Ce.drop(Q)),le!==_&&(le=Er(le),Ce=le<0?Ce.dropRight(-le):Ce.take(le-Q)),Ce)},Nr.prototype.takeRightWhile=function(Q){return this.reverse().takeWhile(Q).reverse()},Nr.prototype.toArray=function(){return this.take(G)},Ln(Nr.prototype,function(Q,le){var Ce=/^(?:filter|find|map|reject)|While$/.test(le),Ue=/^(?:head|last)$/.test(le),Ye=et[Ue?"take"+(le=="last"?"Right":""):le],nt=Ue||/^find/.test(le);Ye&&(et.prototype[le]=function(){var lt=this.__wrapped__,ht=Ue?[1]:arguments,bt=lt instanceof Nr,qt=ht[0],zt=bt||xr(lt),Yt=function(Tr){var Ir=Ye.apply(et,Zn([Tr],ht));return Ue&&Zt?Ir[0]:Ir};zt&&Ce&&typeof qt=="function"&&qt.length!=1&&(bt=zt=!1);var Zt=this.__chain__,cr=!!this.__actions__.length,pr=nt&&!Zt,Sr=bt&&!cr;if(!nt&&zt){lt=Sr?lt:new Nr(this);var vr=Q.apply(lt,ht);return vr.__actions__.push({func:Ea,args:[Yt],thisArg:_}),new An(vr,Zt)}return pr&&Sr?Q.apply(this,ht):(vr=this.thru(Yt),pr?Ue?vr.value()[0]:vr.value():vr)})}),kn(["pop","push","shift","sort","splice","unshift"],function(Q){var le=Xi[Q],Ce=/^(?:push|sort|unshift)$/.test(Q)?"tap":"thru",Ue=/^(?:pop|shift)$/.test(Q);et.prototype[Q]=function(){var Ye=arguments;if(Ue&&!this.__chain__){var nt=this.value();return le.apply(xr(nt)?nt:[],Ye)}return this[Ce](function(lt){return le.apply(xr(lt)?lt:[],Ye)})}}),Ln(Nr.prototype,function(Q,le){var Ce=et[le];if(Ce){var Ue=Ce.name+"";Or.call(wi,Ue)||(wi[Ue]=[]),wi[Ue].push({name:le,func:Ce})}}),wi[va(_,U).name]=[{name:"wrapper",func:_}],Nr.prototype.clone=Su,Nr.prototype.reverse=$u,Nr.prototype.value=Cu,et.prototype.at=ih,et.prototype.chain=ah,et.prototype.commit=oh,et.prototype.next=ch,et.prototype.plant=uh,et.prototype.reverse=fh,et.prototype.toJSON=et.prototype.valueOf=et.prototype.value=hh,et.prototype.first=et.prototype.head,Ni&&(et.prototype[Ni]=lh),et},bi=nu();oi?((oi.exports=bi)._=bi,Pa._=bi):an._=bi}).call(commonjsGlobal)})(lodash,lodash.exports);var lodashExports=lodash.exports;const __="",__="",___="_",___="_",___="_",__="",_="/orbitdb/zdpuAt9PVUHGEyrL43tWDmpBUrgoPPWZHX7AGXWk4ZhEZ1oik/841abe65-93f5-4539-b721-2f8085a18cc5",__="/orbitdb/zdpuAt9PVUHGEyrL43tWDmpBUrgoPPWZHX7AGXWk4ZhEZ1oik/841abe65-93f5-4539-b721-2f8085a18cc5",___="/orbitdb/zdpuAtmGaeNicerk2ByPa4oQMtSPgdNovQp6ZC6c2fJqF64Sb/6462ccb9-25ca-44e5-b81a-ea6d5df09709",___="/orbitdb/zdpuAyBg5f4Lxabv7YHVrxpNbBQW6dzxwH6wfQVMKZjECnkry/f536d48e-e040-48bf-9efb-539321804f4f",__="/orbitdb/zdpuAnEhqhCW51yfohfHWzjLgDPyuY2ySVmTBW7upAidVbwnX/954f02c8-e2ea-433b-89e2-6e670fd8873b",___="/orbitdb/zdpuAoNDXakfzK2DxJAozuR2V9TYha5bvzjQHN5VnAm4jvL6S/736889ad-a29b-4e6f-94fa-a78f8e92978d",___="/orbitdb/zdpuAsViPqnpRhUwN6kL7cSyLFaxSEkK233cJAChJMtc2vwLT/fe6ab45c-dd39-4ca9-a695-f151d922704f",__={motsClefs:[___,___],licence:"ODbl-1_0",tableaux:[{clef:__,cols:[{idVariable:__,idColonne:__},{idVariable:___,idColonne:___},{idVariable:___,idColonne:___},{idVariable:___,idColonne:___},{idVariable:__,idColonne:__},{idVariable:__,idColonne:__}]}]},___=t=>({:t.donnes[__],:t.donnes[__]?new Date(t.donnes[__]):void 0,:t.donnes[__],:t.donnes[__],_:t.donnes[___],_:t.donnes[___],_:t.donnes[___],:t.empreinte}),___=t=>({:t.,:t.,:{:t.[__],:t.[__]?new Date(t.[__]):void 0,:t.[__],_:t.[___],_:t.[___],_:t.[___]}}),__=t=>{const n=new Set(t.map(x=>x.)),_={};for(const x of n){_[x]||(_[x]={});const E=t.filter(S=>S.===x);for(const S of E)_[x][S._]=S.}return _},_=(...t)=>{const n={};for(const _ of t)for(const x of Object.keys(_)){n[x]||(n[x]={});for(const[E,S]of Object.entries(_[x]))n[x][E]=S}return n},__=t=>{const n={};for(const _ in t){const x=_.split(".");for(const E of Object.keys(t[_])){n[E]||(n[E]={});let S=n[E];for(const[C,T]of x.entries())C===x.length-1?S[T]=t[_][E]:((S[T]===void 0||typeof S[T]=="string")&&(S[T]={}),S=S[T])}}return n},__=t=>{const n={};function*_({:x,:E}){E=E||[];for(const[S,C]of Object.entries(x)){const T=[...E,S];if(typeof C=="string")yield{:T.join("."),:C};else for(const{:B,:A}of _({:C,:T}))yield{:B,:A}}}for(const x of Object.keys(t))for(const{:E,:S}of _({:t[x]}))n[E]||(n[E]={}),n[E][x]=S;return n};class  extends {constructor({:_,_:x,_:E,:S}){super({:_,_:S?._||__,_:S?._||_,:S?.__||__});wt(this,"_");wt(this,"_");this._=x,this._=E}static async ({:_}){return await .({:_,:__,_:__})}async _({:_}){const x={:Object.keys(this._),:[]};return await this._({:async S=>(x.=Object.keys(S),await _([...new Set(Object.values(x).flat())]))})}async _({:_=!0,:x}){const E={:Object.values(this._).map(B=>Object.keys(B)).flat()},S=async()=>{await x([...new Set(Object.values(E).flat())])};S();const T=[await this.__({:async B=>{E.=B.map(A=>A.donnes[___]),await S()}})];return _&&T.push((await this._({:async B=>{E.=B.map(A=>A.[___]),await S()}})).fOublier),async()=>{await Promise.all(T.map(B=>B()))}}async __({:_}){const x={:[]},E=async()=>{const S=_(__(x..map(C=>___(C))),this._);await _(S)};return await E(),await this.__({:async S=>{x.=S,await E()}})}async _({:_,:x}){await _(this._);const E={},S=await this..obtIdCompte(),C=async()=>{let A=[];(E.||[]).forEach(M=>{const V=A.find(L=>L..===M..);V?(M.===S&&V.!==S||(M..||0)>(V..||0))&&(A=[M,...A.filter(L=>L.!==V.)]):A.push(M)});const I=__(A.map(M=>M.)),D=_(this._,E.||{},I);return await _(D)},B=[await this.__({:async A=>{const I=__(A.map(___)),D=_(this._,I);E.=D}})];return x===""?B.push(await this.___({:async A=>{E.=A,await C()}})):x===""&&B.push((await this.__({:async A=>{E.=A,await C()}})).fOublier),async()=>{await Promise.all(B.map(A=>A()))}}async __({:_,:x,:E}){return await this._({:async S=>await E(S.filter(C=>(!_||C.[__]===_)&&(!x||C.[___]===x)).map(___))})}async ___({:_}){return await this.__({:x=>_(x.map(E=>___(E)))})}async _({:_,:x,:E}){const S={},C=async()=>{if(S.)if(x===""){const I=S..length,D=S..filter(V=>S.?.[V]?.[_]),M=S.?.filter(V=>V.._===_&&!D.includes(V..))||[];return await E({:I,:D.length,:M.length})}else{if(!S.||!S.)return;const I=Object.fromEntries(S..map(L=>[L,S.?.[L]?.[this._]?.length||(S.?.[L]?Object.values(S.?.[L])[0]?.length:0)])),D=Object.values(I).reduce((L,F)=>L+F,0),M=Object.entries(S.).filter(L=>L[1][_]).map(([L,F])=>I[L]).reduce((L,F)=>L+F,0),V=S.?.map(L=>I[L..]||0).reduce((L,F)=>L+F,0)||0;return await E({:D,:M,:V})}},T=await Promise.all([this._({:async I=>{S.=I,await C()}}),this._({:async I=>{S.=I,await C()}})]),B=(await this.__({:_,:async I=>{S.=I,await C()}})).fOublier;return async()=>{await Promise.all(T.map(I=>I())),await B}}async _({:_,:x,_:E,_:S,_:C}){const T={[__]:_,[__]:x,[___]:E,[___]:S,[___]:C};await this.({:T})}async ({:_,:x,:E,:S}){const C={},T=async()=>{const I=C.?.[_]?.[x];if(I)return await E(I);{const D=await this..obtIdCompte(),M=(C.||[]).filter(L=>L..===_&&L.._===x),V=M.find(L=>L.===D);return await E((V||M[0])?.?.)}},A=[await this._({:async I=>{C.=I,await T()}})];return S===""?A.push(await this.___({:async I=>{C.=I,await T()}})):S===""&&A.push((await this.__({:async I=>{C.=I,await T()}})).fOublier),async()=>{await Promise.all(A.map(I=>I()))}}}/*!
  * shared v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const inBrowser=typeof window<"u",makeSymbol=(t,n=!1)=>n?Symbol.for(t):Symbol(t),generateFormatCacheKey=(t,n,_)=>friendlyJSONstringify({l:t,k:n,s:_}),friendlyJSONstringify=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber$3=t=>typeof t=="number"&&isFinite(t),isDate$3=t=>toTypeString$1(t)==="[object Date]",isRegExp$2=t=>toTypeString$1(t)==="[object RegExp]",isEmptyObject=t=>isPlainObject$2(t)&&Object.keys(t).length===0;function warn(t,n){typeof console<"u"&&(console.warn("[intlify] "+t),n&&console.warn(n.stack))}const assign$4=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function escapeHtml(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty$3=Object.prototype.hasOwnProperty;function hasOwn$2(t,n){return hasOwnProperty$3.call(t,n)}const isArray$7=Array.isArray,isFunction$3=t=>typeof t=="function",isString$5=t=>typeof t=="string",isBoolean$4=t=>typeof t=="boolean",isObject$4=t=>t!==null&&typeof t=="object",objectToString$1=Object.prototype.toString,toTypeString$1=t=>objectToString$1.call(t),isPlainObject$2=t=>toTypeString$1(t)==="[object Object]",toDisplayString=t=>t==null?"":isArray$7(t)||isPlainObject$2(t)&&t.toString===objectToString$1?JSON.stringify(t,null,2):String(t);/*!
  * message-compiler v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15};function createCompileError(t,n,_={}){const{domain:x,messages:E,args:S}=_,C=t,T=new SyntaxError(String(C));return T.code=t,n&&(T.location=n),T.domain=x,T}function defaultOnError(t){throw t}function createPosition(t,n,_){return{line:t,column:n,offset:_}}function createLocation(t,n,_){const x={start:t,end:n};return _!=null&&(x.source=_),x}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS=String.fromCharCode(8232),CHAR_PS=String.fromCharCode(8233);function createScanner(t){const n=t;let _=0,x=1,E=1,S=0;const C=X=>n[X]===CHAR_CR&&n[X+1]===CHAR_LF,T=X=>n[X]===CHAR_LF,B=X=>n[X]===CHAR_PS,A=X=>n[X]===CHAR_LS,I=X=>C(X)||T(X)||B(X)||A(X),D=()=>_,M=()=>x,V=()=>E,L=()=>S,F=X=>C(X)||B(X)||A(X)?CHAR_LF:n[X],j=()=>F(_),U=()=>F(_+S);function H(){return S=0,I(_)&&(x++,E=0),C(_)&&_++,_++,E++,n[_]}function Y(){return C(_+S)&&S++,S++,n[_+S]}function Z(){_=0,x=1,E=1,S=0}function ne(X=0){S=X}function re(){const X=_+S;for(;X!==_;)H();S=0}return{index:D,line:M,column:V,peekOffset:L,charAt:F,currentChar:j,currentPeek:U,next:H,peek:Y,reset:Z,resetPeek:ne,skipToPeek:re}}const EOF=void 0,LITERAL_DELIMITER="'",ERROR_DOMAIN$1="tokenizer";function createTokenizer(t,n={}){const _=n.location!==!1,x=createScanner(t),E=()=>x.index(),S=()=>createPosition(x.line(),x.column(),x.index()),C=S(),T=E(),B={currentType:14,offset:T,startLoc:C,endLoc:C,lastType:14,lastOffset:T,lastStartLoc:C,lastEndLoc:C,braceNest:0,inLinked:!1,text:""},A=()=>B,{onError:I}=n;function D(Be,ve,Ae,...Ve){const Pe=A();if(ve.column+=Ae,ve.offset+=Ae,I){const Re=createLocation(Pe.startLoc,ve),Ne=createCompileError(Be,Re,{domain:ERROR_DOMAIN$1,args:Ve});I(Ne)}}function M(Be,ve,Ae){Be.endLoc=S(),Be.currentType=ve;const Ve={type:ve};return _&&(Ve.loc=createLocation(Be.startLoc,Be.endLoc)),Ae!=null&&(Ve.value=Ae),Ve}const V=Be=>M(Be,14);function L(Be,ve){return Be.currentChar()===ve?(Be.next(),ve):(D(CompileErrorCodes.EXPECTED_TOKEN,S(),0,ve),"")}function F(Be){let ve="";for(;Be.currentPeek()===CHAR_SP||Be.currentPeek()===CHAR_LF;)ve+=Be.currentPeek(),Be.peek();return ve}function j(Be){const ve=F(Be);return Be.skipToPeek(),ve}function U(Be){if(Be===EOF)return!1;const ve=Be.charCodeAt(0);return ve>=97&&ve<=122||ve>=65&&ve<=90||ve===95}function H(Be){if(Be===EOF)return!1;const ve=Be.charCodeAt(0);return ve>=48&&ve<=57}function Y(Be,ve){const{currentType:Ae}=ve;if(Ae!==2)return!1;F(Be);const Ve=U(Be.currentPeek());return Be.resetPeek(),Ve}function Z(Be,ve){const{currentType:Ae}=ve;if(Ae!==2)return!1;F(Be);const Ve=Be.currentPeek()==="-"?Be.peek():Be.currentPeek(),Pe=H(Ve);return Be.resetPeek(),Pe}function ne(Be,ve){const{currentType:Ae}=ve;if(Ae!==2)return!1;F(Be);const Ve=Be.currentPeek()===LITERAL_DELIMITER;return Be.resetPeek(),Ve}function re(Be,ve){const{currentType:Ae}=ve;if(Ae!==8)return!1;F(Be);const Ve=Be.currentPeek()===".";return Be.resetPeek(),Ve}function X(Be,ve){const{currentType:Ae}=ve;if(Ae!==9)return!1;F(Be);const Ve=U(Be.currentPeek());return Be.resetPeek(),Ve}function ce(Be,ve){const{currentType:Ae}=ve;if(!(Ae===8||Ae===12))return!1;F(Be);const Ve=Be.currentPeek()===":";return Be.resetPeek(),Ve}function ue(Be,ve){const{currentType:Ae}=ve;if(Ae!==10)return!1;const Ve=()=>{const Re=Be.currentPeek();return Re==="{"?U(Be.peek()):Re==="@"||Re==="%"||Re==="|"||Re===":"||Re==="."||Re===CHAR_SP||!Re?!1:Re===CHAR_LF?(Be.peek(),Ve()):U(Re)},Pe=Ve();return Be.resetPeek(),Pe}function _e(Be){F(Be);const ve=Be.currentPeek()==="|";return Be.resetPeek(),ve}function ye(Be){const ve=F(Be),Ae=Be.currentPeek()==="%"&&Be.peek()==="{";return Be.resetPeek(),{isModulo:Ae,hasSpace:ve.length>0}}function ie(Be,ve=!0){const Ae=(Pe=!1,Re="",Ne=!1)=>{const qe=Be.currentPeek();return qe==="{"?Re==="%"?!1:Pe:qe==="@"||!qe?Re==="%"?!0:Pe:qe==="%"?(Be.peek(),Ae(Pe,"%",!0)):qe==="|"?Re==="%"||Ne?!0:!(Re===CHAR_SP||Re===CHAR_LF):qe===CHAR_SP?(Be.peek(),Ae(!0,CHAR_SP,Ne)):qe===CHAR_LF?(Be.peek(),Ae(!0,CHAR_LF,Ne)):!0},Ve=Ae();return ve&&Be.resetPeek(),Ve}function W(Be,ve){const Ae=Be.currentChar();return Ae===EOF?EOF:ve(Ae)?(Be.next(),Ae):null}function O(Be){return W(Be,Ae=>{const Ve=Ae.charCodeAt(0);return Ve>=97&&Ve<=122||Ve>=65&&Ve<=90||Ve>=48&&Ve<=57||Ve===95||Ve===36})}function z(Be){return W(Be,Ae=>{const Ve=Ae.charCodeAt(0);return Ve>=48&&Ve<=57})}function J(Be){return W(Be,Ae=>{const Ve=Ae.charCodeAt(0);return Ve>=48&&Ve<=57||Ve>=65&&Ve<=70||Ve>=97&&Ve<=102})}function ee(Be){let ve="",Ae="";for(;ve=z(Be);)Ae+=ve;return Ae}function ae(Be){j(Be);const ve=Be.currentChar();return ve!=="%"&&D(CompileErrorCodes.EXPECTED_TOKEN,S(),0,ve),Be.next(),"%"}function oe(Be){let ve="";for(;;){const Ae=Be.currentChar();if(Ae==="{"||Ae==="}"||Ae==="@"||Ae==="|"||!Ae)break;if(Ae==="%")if(ie(Be))ve+=Ae,Be.next();else break;else if(Ae===CHAR_SP||Ae===CHAR_LF)if(ie(Be))ve+=Ae,Be.next();else{if(_e(Be))break;ve+=Ae,Be.next()}else ve+=Ae,Be.next()}return ve}function se(Be){j(Be);let ve="",Ae="";for(;ve=O(Be);)Ae+=ve;return Be.currentChar()===EOF&&D(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,S(),0),Ae}function G(Be){j(Be);let ve="";return Be.currentChar()==="-"?(Be.next(),ve+=`-${ee(Be)}`):ve+=ee(Be),Be.currentChar()===EOF&&D(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,S(),0),ve}function q(Be){j(Be),L(Be,"'");let ve="",Ae="";const Ve=Re=>Re!==LITERAL_DELIMITER&&Re!==CHAR_LF;for(;ve=W(Be,Ve);)ve==="\\"?Ae+=te(Be):Ae+=ve;const Pe=Be.currentChar();return Pe===CHAR_LF||Pe===EOF?(D(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,S(),0),Pe===CHAR_LF&&(Be.next(),L(Be,"'")),Ae):(L(Be,"'"),Ae)}function te(Be){const ve=Be.currentChar();switch(ve){case"\\":case"'":return Be.next(),`\\${ve}`;case"u":return fe(Be,ve,4);case"U":return fe(Be,ve,6);default:return D(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,S(),0,ve),""}}function fe(Be,ve,Ae){L(Be,ve);let Ve="";for(let Pe=0;Pe<Ae;Pe++){const Re=J(Be);if(!Re){D(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,S(),0,`\\${ve}${Ve}${Be.currentChar()}`);break}Ve+=Re}return`\\${ve}${Ve}`}function he(Be){j(Be);let ve="",Ae="";const Ve=Pe=>Pe!=="{"&&Pe!=="}"&&Pe!==CHAR_SP&&Pe!==CHAR_LF;for(;ve=W(Be,Ve);)Ae+=ve;return Ae}function Ee(Be){let ve="",Ae="";for(;ve=O(Be);)Ae+=ve;return Ae}function we(Be){const ve=(Ae=!1,Ve)=>{const Pe=Be.currentChar();return Pe==="{"||Pe==="%"||Pe==="@"||Pe==="|"||!Pe||Pe===CHAR_SP?Ve:Pe===CHAR_LF?(Ve+=Pe,Be.next(),ve(Ae,Ve)):(Ve+=Pe,Be.next(),ve(!0,Ve))};return ve(!1,"")}function xe(Be){j(Be);const ve=L(Be,"|");return j(Be),ve}function $e(Be,ve){let Ae=null;switch(Be.currentChar()){case"{":return ve.braceNest>=1&&D(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,S(),0),Be.next(),Ae=M(ve,2,"{"),j(Be),ve.braceNest++,Ae;case"}":return ve.braceNest>0&&ve.currentType===2&&D(CompileErrorCodes.EMPTY_PLACEHOLDER,S(),0),Be.next(),Ae=M(ve,3,"}"),ve.braceNest--,ve.braceNest>0&&j(Be),ve.inLinked&&ve.braceNest===0&&(ve.inLinked=!1),Ae;case"@":return ve.braceNest>0&&D(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,S(),0),Ae=ge(Be,ve)||V(ve),ve.braceNest=0,Ae;default:let Pe=!0,Re=!0,Ne=!0;if(_e(Be))return ve.braceNest>0&&D(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,S(),0),Ae=M(ve,1,xe(Be)),ve.braceNest=0,ve.inLinked=!1,Ae;if(ve.braceNest>0&&(ve.currentType===5||ve.currentType===6||ve.currentType===7))return D(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,S(),0),ve.braceNest=0,Se(Be,ve);if(Pe=Y(Be,ve))return Ae=M(ve,5,se(Be)),j(Be),Ae;if(Re=Z(Be,ve))return Ae=M(ve,6,G(Be)),j(Be),Ae;if(Ne=ne(Be,ve))return Ae=M(ve,7,q(Be)),j(Be),Ae;if(!Pe&&!Re&&!Ne)return Ae=M(ve,13,he(Be)),D(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,S(),0,Ae.value),j(Be),Ae;break}return Ae}function ge(Be,ve){const{currentType:Ae}=ve;let Ve=null;const Pe=Be.currentChar();switch((Ae===8||Ae===9||Ae===12||Ae===10)&&(Pe===CHAR_LF||Pe===CHAR_SP)&&D(CompileErrorCodes.INVALID_LINKED_FORMAT,S(),0),Pe){case"@":return Be.next(),Ve=M(ve,8,"@"),ve.inLinked=!0,Ve;case".":return j(Be),Be.next(),M(ve,9,".");case":":return j(Be),Be.next(),M(ve,10,":");default:return _e(Be)?(Ve=M(ve,1,xe(Be)),ve.braceNest=0,ve.inLinked=!1,Ve):re(Be,ve)||ce(Be,ve)?(j(Be),ge(Be,ve)):X(Be,ve)?(j(Be),M(ve,12,Ee(Be))):ue(Be,ve)?(j(Be),Pe==="{"?$e(Be,ve)||Ve:M(ve,11,we(Be))):(Ae===8&&D(CompileErrorCodes.INVALID_LINKED_FORMAT,S(),0),ve.braceNest=0,ve.inLinked=!1,Se(Be,ve))}}function Se(Be,ve){let Ae={type:14};if(ve.braceNest>0)return $e(Be,ve)||V(ve);if(ve.inLinked)return ge(Be,ve)||V(ve);switch(Be.currentChar()){case"{":return $e(Be,ve)||V(ve);case"}":return D(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,S(),0),Be.next(),M(ve,3,"}");case"@":return ge(Be,ve)||V(ve);default:if(_e(Be))return Ae=M(ve,1,xe(Be)),ve.braceNest=0,ve.inLinked=!1,Ae;const{isModulo:Pe,hasSpace:Re}=ye(Be);if(Pe)return Re?M(ve,0,oe(Be)):M(ve,4,ae(Be));if(ie(Be))return M(ve,0,oe(Be));break}return Ae}function me(){const{currentType:Be,offset:ve,startLoc:Ae,endLoc:Ve}=B;return B.lastType=Be,B.lastOffset=ve,B.lastStartLoc=Ae,B.lastEndLoc=Ve,B.offset=E(),B.startLoc=S(),x.currentChar()===EOF?M(B,14):Se(x,B)}return{nextToken:me,currentOffset:E,currentPosition:S,context:A}}const ERROR_DOMAIN="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(t,n,_){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const x=parseInt(n||_,16);return x<=55295||x>=57344?String.fromCodePoint(x):""}}}function createParser(t={}){const n=t.location!==!1,{onError:_}=t;function x(U,H,Y,Z,...ne){const re=U.currentPosition();if(re.offset+=Z,re.column+=Z,_){const X=createLocation(Y,re),ce=createCompileError(H,X,{domain:ERROR_DOMAIN,args:ne});_(ce)}}function E(U,H,Y){const Z={type:U,start:H,end:H};return n&&(Z.loc={start:Y,end:Y}),Z}function S(U,H,Y,Z){U.end=H,Z&&(U.type=Z),n&&U.loc&&(U.loc.end=Y)}function C(U,H){const Y=U.context(),Z=E(3,Y.offset,Y.startLoc);return Z.value=H,S(Z,U.currentOffset(),U.currentPosition()),Z}function T(U,H){const Y=U.context(),{lastOffset:Z,lastStartLoc:ne}=Y,re=E(5,Z,ne);return re.index=parseInt(H,10),U.nextToken(),S(re,U.currentOffset(),U.currentPosition()),re}function B(U,H){const Y=U.context(),{lastOffset:Z,lastStartLoc:ne}=Y,re=E(4,Z,ne);return re.key=H,U.nextToken(),S(re,U.currentOffset(),U.currentPosition()),re}function A(U,H){const Y=U.context(),{lastOffset:Z,lastStartLoc:ne}=Y,re=E(9,Z,ne);return re.value=H.replace(KNOWN_ESCAPES,fromEscapeSequence),U.nextToken(),S(re,U.currentOffset(),U.currentPosition()),re}function I(U){const H=U.nextToken(),Y=U.context(),{lastOffset:Z,lastStartLoc:ne}=Y,re=E(8,Z,ne);return H.type!==12?(x(U,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,Y.lastStartLoc,0),re.value="",S(re,Z,ne),{nextConsumeToken:H,node:re}):(H.value==null&&x(U,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,Y.lastStartLoc,0,getTokenCaption(H)),re.value=H.value||"",S(re,U.currentOffset(),U.currentPosition()),{node:re})}function D(U,H){const Y=U.context(),Z=E(7,Y.offset,Y.startLoc);return Z.value=H,S(Z,U.currentOffset(),U.currentPosition()),Z}function M(U){const H=U.context(),Y=E(6,H.offset,H.startLoc);let Z=U.nextToken();if(Z.type===9){const ne=I(U);Y.modifier=ne.node,Z=ne.nextConsumeToken||U.nextToken()}switch(Z.type!==10&&x(U,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,H.lastStartLoc,0,getTokenCaption(Z)),Z=U.nextToken(),Z.type===2&&(Z=U.nextToken()),Z.type){case 11:Z.value==null&&x(U,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,H.lastStartLoc,0,getTokenCaption(Z)),Y.key=D(U,Z.value||"");break;case 5:Z.value==null&&x(U,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,H.lastStartLoc,0,getTokenCaption(Z)),Y.key=B(U,Z.value||"");break;case 6:Z.value==null&&x(U,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,H.lastStartLoc,0,getTokenCaption(Z)),Y.key=T(U,Z.value||"");break;case 7:Z.value==null&&x(U,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,H.lastStartLoc,0,getTokenCaption(Z)),Y.key=A(U,Z.value||"");break;default:x(U,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,H.lastStartLoc,0);const ne=U.context(),re=E(7,ne.offset,ne.startLoc);return re.value="",S(re,ne.offset,ne.startLoc),Y.key=re,S(Y,ne.offset,ne.startLoc),{nextConsumeToken:Z,node:Y}}return S(Y,U.currentOffset(),U.currentPosition()),{node:Y}}function V(U){const H=U.context(),Y=H.currentType===1?U.currentOffset():H.offset,Z=H.currentType===1?H.endLoc:H.startLoc,ne=E(2,Y,Z);ne.items=[];let re=null;do{const ue=re||U.nextToken();switch(re=null,ue.type){case 0:ue.value==null&&x(U,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,H.lastStartLoc,0,getTokenCaption(ue)),ne.items.push(C(U,ue.value||""));break;case 6:ue.value==null&&x(U,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,H.lastStartLoc,0,getTokenCaption(ue)),ne.items.push(T(U,ue.value||""));break;case 5:ue.value==null&&x(U,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,H.lastStartLoc,0,getTokenCaption(ue)),ne.items.push(B(U,ue.value||""));break;case 7:ue.value==null&&x(U,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,H.lastStartLoc,0,getTokenCaption(ue)),ne.items.push(A(U,ue.value||""));break;case 8:const _e=M(U);ne.items.push(_e.node),re=_e.nextConsumeToken||null;break}}while(H.currentType!==14&&H.currentType!==1);const X=H.currentType===1?H.lastOffset:U.currentOffset(),ce=H.currentType===1?H.lastEndLoc:U.currentPosition();return S(ne,X,ce),ne}function L(U,H,Y,Z){const ne=U.context();let re=Z.items.length===0;const X=E(1,H,Y);X.cases=[],X.cases.push(Z);do{const ce=V(U);re||(re=ce.items.length===0),X.cases.push(ce)}while(ne.currentType!==14);return re&&x(U,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,Y,0),S(X,U.currentOffset(),U.currentPosition()),X}function F(U){const H=U.context(),{offset:Y,startLoc:Z}=H,ne=V(U);return H.currentType===14?ne:L(U,Y,Z,ne)}function j(U){const H=createTokenizer(U,assign$4({},t)),Y=H.context(),Z=E(0,Y.offset,Y.startLoc);return n&&Z.loc&&(Z.loc.source=U),Z.body=F(H),Y.currentType!==14&&x(H,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,Y.lastStartLoc,0,U[Y.offset]||""),S(Z,H.currentOffset(),H.currentPosition()),Z}return{parse:j}}function getTokenCaption(t){if(t.type===14)return"EOF";const n=(t.value||"").replace(/\r?\n/gu,"\\n");return n.length>10?n.slice(0,9)+"":n}function createTransformer(t,n={}){const _={ast:t,helpers:new Set};return{context:()=>_,helper:S=>(_.helpers.add(S),S)}}function traverseNodes(t,n){for(let _=0;_<t.length;_++)traverseNode(t[_],n)}function traverseNode(t,n){switch(t.type){case 1:traverseNodes(t.cases,n),n.helper("plural");break;case 2:traverseNodes(t.items,n);break;case 6:traverseNode(t.key,n),n.helper("linked"),n.helper("type");break;case 5:n.helper("interpolate"),n.helper("list");break;case 4:n.helper("interpolate"),n.helper("named");break}}function transform$1(t,n={}){const _=createTransformer(t);_.helper("normalize"),t.body&&traverseNode(t.body,_);const x=_.context();t.helpers=Array.from(x.helpers)}function createCodeGenerator(t,n){const{sourceMap:_,filename:x,breakLineCode:E,needIndent:S}=n,C={source:t.loc.source,filename:x,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:E,needIndent:S,indentLevel:0},T=()=>C;function B(F,j){C.code+=F}function A(F,j=!0){const U=j?E:"";B(S?U+"  ".repeat(F):U)}function I(F=!0){const j=++C.indentLevel;F&&A(j)}function D(F=!0){const j=--C.indentLevel;F&&A(j)}function M(){A(C.indentLevel)}return{context:T,push:B,indent:I,deindent:D,newline:M,helper:F=>`_${F}`,needIndent:()=>C.needIndent}}function generateLinkedNode(t,n){const{helper:_}=t;t.push(`${_("linked")}(`),generateNode(t,n.key),n.modifier?(t.push(", "),generateNode(t,n.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function generateMessageNode(t,n){const{helper:_,needIndent:x}=t;t.push(`${_("normalize")}([`),t.indent(x());const E=n.items.length;for(let S=0;S<E&&(generateNode(t,n.items[S]),S!==E-1);S++)t.push(", ");t.deindent(x()),t.push("])")}function generatePluralNode(t,n){const{helper:_,needIndent:x}=t;if(n.cases.length>1){t.push(`${_("plural")}([`),t.indent(x());const E=n.cases.length;for(let S=0;S<E&&(generateNode(t,n.cases[S]),S!==E-1);S++)t.push(", ");t.deindent(x()),t.push("])")}}function generateResource(t,n){n.body?generateNode(t,n.body):t.push("null")}function generateNode(t,n){const{helper:_}=t;switch(n.type){case 0:generateResource(t,n);break;case 1:generatePluralNode(t,n);break;case 2:generateMessageNode(t,n);break;case 6:generateLinkedNode(t,n);break;case 8:t.push(JSON.stringify(n.value),n);break;case 7:t.push(JSON.stringify(n.value),n);break;case 5:t.push(`${_("interpolate")}(${_("list")}(${n.index}))`,n);break;case 4:t.push(`${_("interpolate")}(${_("named")}(${JSON.stringify(n.key)}))`,n);break;case 9:t.push(JSON.stringify(n.value),n);break;case 3:t.push(JSON.stringify(n.value),n);break}}const generate=(t,n={})=>{const _=isString$5(n.mode)?n.mode:"normal",x=isString$5(n.filename)?n.filename:"message.intl",E=!!n.sourceMap,S=n.breakLineCode!=null?n.breakLineCode:_==="arrow"?";":`
`,C=n.needIndent?n.needIndent:_!=="arrow",T=t.helpers||[],B=createCodeGenerator(t,{mode:_,filename:x,sourceMap:E,breakLineCode:S,needIndent:C});B.push(_==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),B.indent(C),T.length>0&&(B.push(`const { ${T.map(D=>`${D}: _${D}`).join(", ")} } = ctx`),B.newline()),B.push("return "),generateNode(B,t),B.deindent(C),B.push("}");const{code:A,map:I}=B.context();return{ast:t,code:A,map:I?I.toJSON():void 0}};function baseCompile(t,n={}){const _=assign$4({},n),E=createParser(_).parse(t);return transform$1(E,_),generate(E,_)}/*!
  * devtools-if v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const IntlifyDevToolsHooks={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * core-base v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],"[":[4],o:[7]};pathStateMachine[1]={w:[1],".":[2],"[":[4],o:[7]};pathStateMachine[2]={w:[2],i:[3,0],0:[3,0]};pathStateMachine[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};pathStateMachine[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};pathStateMachine[5]={"'":[4,0],o:8,l:[5,0]};pathStateMachine[6]={'"':[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(t){return literalValueRE.test(t)}function stripQuotes(t){const n=t.charCodeAt(0),_=t.charCodeAt(t.length-1);return n===_&&(n===34||n===39)?t.slice(1,-1):t}function getPathCharType(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(t){const n=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:isLiteral(n)?stripQuotes(n):"*"+n}function parse$2(t){const n=[];let _=-1,x=0,E=0,S,C,T,B,A,I,D;const M=[];M[0]=()=>{C===void 0?C=T:C+=T},M[1]=()=>{C!==void 0&&(n.push(C),C=void 0)},M[2]=()=>{M[0](),E++},M[3]=()=>{if(E>0)E--,x=4,M[0]();else{if(E=0,C===void 0||(C=formatSubPath(C),C===!1))return!1;M[1]()}};function V(){const L=t[_+1];if(x===5&&L==="'"||x===6&&L==='"')return _++,T="\\"+L,M[0](),!0}for(;x!==null;)if(_++,S=t[_],!(S==="\\"&&V())){if(B=getPathCharType(S),D=pathStateMachine[x],A=D[B]||D.l||8,A===8||(x=A[0],A[1]!==void 0&&(I=M[A[1]],I&&(T=S,I()===!1))))return;if(x===7)return n}}const cache$5=new Map;function resolveWithKeyValue(t,n){return isObject$4(t)?t[n]:null}function resolveValue(t,n){if(!isObject$4(t))return null;let _=cache$5.get(n);if(_||(_=parse$2(n),_&&cache$5.set(n,_)),!_)return null;const x=_.length;let E=t,S=0;for(;S<x;){const C=E[_[S]];if(C===void 0)return null;E=C,S++}return E}const DEFAULT_MODIFIER=t=>t,DEFAULT_MESSAGE=t=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=t=>t.length===0?"":t.join(""),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(t,n){return t=Math.abs(t),n===2?t?t>1?1:0:1:t?Math.min(t,2):0}function getPluralIndex(t){const n=isNumber$3(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(isNumber$3(t.named.count)||isNumber$3(t.named.n))?isNumber$3(t.named.count)?t.named.count:isNumber$3(t.named.n)?t.named.n:n:n}function normalizeNamed(t,n){n.count||(n.count=t),n.n||(n.n=t)}function createMessageContext(t={}){const n=t.locale,_=getPluralIndex(t),x=isObject$4(t.pluralRules)&&isString$5(n)&&isFunction$3(t.pluralRules[n])?t.pluralRules[n]:pluralDefault,E=isObject$4(t.pluralRules)&&isString$5(n)&&isFunction$3(t.pluralRules[n])?pluralDefault:void 0,S=U=>U[x(_,U.length,E)],C=t.list||[],T=U=>C[U],B=t.named||{};isNumber$3(t.pluralIndex)&&normalizeNamed(_,B);const A=U=>B[U];function I(U){const H=isFunction$3(t.messages)?t.messages(U):isObject$4(t.messages)?t.messages[U]:!1;return H||(t.parent?t.parent.message(U):DEFAULT_MESSAGE)}const D=U=>t.modifiers?t.modifiers[U]:DEFAULT_MODIFIER,M=isPlainObject$2(t.processor)&&isFunction$3(t.processor.normalize)?t.processor.normalize:DEFAULT_NORMALIZE,V=isPlainObject$2(t.processor)&&isFunction$3(t.processor.interpolate)?t.processor.interpolate:DEFAULT_INTERPOLATE,L=isPlainObject$2(t.processor)&&isString$5(t.processor.type)?t.processor.type:DEFAULT_MESSAGE_DATA_TYPE,j={list:T,named:A,plural:S,linked:(U,...H)=>{const[Y,Z]=H;let ne="text",re="";H.length===1?isObject$4(Y)?(re=Y.modifier||re,ne=Y.type||ne):isString$5(Y)&&(re=Y||re):H.length===2&&(isString$5(Y)&&(re=Y||re),isString$5(Z)&&(ne=Z||ne));let X=I(U)(j);return ne==="vnode"&&isArray$7(X)&&re&&(X=X[0]),re?D(re)(X,ne):X},message:I,type:L,interpolate:V,normalize:M};return j}let devtools=null;function setDevToolsHook(t){devtools=t}function initI18nDevTools(t,n,_){devtools&&devtools.emit(IntlifyDevToolsHooks.I18nInit,{timestamp:Date.now(),i18n:t,version:n,meta:_})}const translateDevTools=createDevToolsHook(IntlifyDevToolsHooks.FunctionTranslate);function createDevToolsHook(t){return n=>devtools&&devtools.emit(t,n)}function fallbackWithSimple(t,n,_){return[...new Set([_,...isArray$7(n)?n:isObject$4(n)?Object.keys(n):isString$5(n)?[n]:[_]])]}function fallbackWithLocaleChain(t,n,_){const x=isString$5(_)?_:DEFAULT_LOCALE,E=t;E.__localeChainCache||(E.__localeChainCache=new Map);let S=E.__localeChainCache.get(x);if(!S){S=[];let C=[_];for(;isArray$7(C);)C=appendBlockToChain(S,C,n);const T=isArray$7(n)||!isPlainObject$2(n)?n:n.default?n.default:null;C=isString$5(T)?[T]:T,isArray$7(C)&&appendBlockToChain(S,C,!1),E.__localeChainCache.set(x,S)}return S}function appendBlockToChain(t,n,_){let x=!0;for(let E=0;E<n.length&&isBoolean$4(x);E++){const S=n[E];isString$5(S)&&(x=appendLocaleToChain(t,n[E],_))}return x}function appendLocaleToChain(t,n,_){let x;const E=n.split("-");do{const S=E.join("-");x=appendItemToChain(t,S,_),E.splice(-1,1)}while(E.length&&x===!0);return x}function appendItemToChain(t,n,_){let x=!1;if(!t.includes(n)&&(x=!0,n)){x=n[n.length-1]!=="!";const E=n.replace(/!/g,"");t.push(E),(isArray$7(_)||isPlainObject$2(_))&&_[E]&&(x=_[E])}return x}const VERSION$2="9.3.0-beta.16",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(t,n)=>n==="text"&&isString$5(t)?t.toUpperCase():n==="vnode"&&isObject$4(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,n)=>n==="text"&&isString$5(t)?t.toLowerCase():n==="vnode"&&isObject$4(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,n)=>n==="text"&&isString$5(t)?capitalize(t):n==="vnode"&&isObject$4(t)&&"__v_isVNode"in t?capitalize(t.children):t}}let _compiler;function registerMessageCompiler(t){_compiler=t}let _resolver;function registerMessageResolver(t){_resolver=t}let _fallbacker;function registerLocaleFallbacker(t){_fallbacker=t}let _additionalMeta=null;const setAdditionalMeta=t=>{_additionalMeta=t},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=t=>{_fallbackContext=t},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(t={}){const n=isString$5(t.version)?t.version:VERSION$2,_=isString$5(t.locale)?t.locale:DEFAULT_LOCALE,x=isArray$7(t.fallbackLocale)||isPlainObject$2(t.fallbackLocale)||isString$5(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:_,E=isPlainObject$2(t.messages)?t.messages:{[_]:{}},S=isPlainObject$2(t.datetimeFormats)?t.datetimeFormats:{[_]:{}},C=isPlainObject$2(t.numberFormats)?t.numberFormats:{[_]:{}},T=assign$4({},t.modifiers||{},getDefaultLinkedModifiers()),B=t.pluralRules||{},A=isFunction$3(t.missing)?t.missing:null,I=isBoolean$4(t.missingWarn)||isRegExp$2(t.missingWarn)?t.missingWarn:!0,D=isBoolean$4(t.fallbackWarn)||isRegExp$2(t.fallbackWarn)?t.fallbackWarn:!0,M=!!t.fallbackFormat,V=!!t.unresolving,L=isFunction$3(t.postTranslation)?t.postTranslation:null,F=isPlainObject$2(t.processor)?t.processor:null,j=isBoolean$4(t.warnHtmlMessage)?t.warnHtmlMessage:!0,U=!!t.escapeParameter,H=isFunction$3(t.messageCompiler)?t.messageCompiler:_compiler,Y=isFunction$3(t.messageResolver)?t.messageResolver:_resolver||resolveWithKeyValue,Z=isFunction$3(t.localeFallbacker)?t.localeFallbacker:_fallbacker||fallbackWithSimple,ne=isObject$4(t.fallbackContext)?t.fallbackContext:void 0,re=isFunction$3(t.onWarn)?t.onWarn:warn,X=t,ce=isObject$4(X.__datetimeFormatters)?X.__datetimeFormatters:new Map,ue=isObject$4(X.__numberFormatters)?X.__numberFormatters:new Map,_e=isObject$4(X.__meta)?X.__meta:{};_cid++;const ye={version:n,cid:_cid,locale:_,fallbackLocale:x,messages:E,modifiers:T,pluralRules:B,missing:A,missingWarn:I,fallbackWarn:D,fallbackFormat:M,unresolving:V,postTranslation:L,processor:F,warnHtmlMessage:j,escapeParameter:U,messageCompiler:H,messageResolver:Y,localeFallbacker:Z,fallbackContext:ne,onWarn:re,__meta:_e};return ye.datetimeFormats=S,ye.numberFormats=C,ye.__datetimeFormatters=ce,ye.__numberFormatters=ue,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(ye,n,_e),ye}function handleMissing(t,n,_,x,E){const{missing:S,onWarn:C}=t;if(S!==null){const T=S(t,_,n,E);return isString$5(T)?T:n}else return n}function updateFallbackLocale(t,n,_){const x=t;x.__localeChainCache=new Map,t.localeFallbacker(t,_,n)}const defaultOnCacheKey=t=>t;let compileCache=Object.create(null);function compileToFunction(t,n={}){{const x=(n.onCacheKey||defaultOnCacheKey)(t),E=compileCache[x];if(E)return E;let S=!1;const C=n.onError||defaultOnError;n.onError=A=>{S=!0,C(A)};const{code:T}=baseCompile(t,n),B=new Function(`return ${T}`)();return S?B:compileCache[x]=B}}let code$9=CompileErrorCodes.__EXTEND_POINT__;const inc$1=()=>++code$9,CoreErrorCodes={INVALID_ARGUMENT:code$9,INVALID_DATE_ARGUMENT:inc$1(),INVALID_ISO_DATE_ARGUMENT:inc$1(),__EXTEND_POINT__:inc$1()};function createCoreError(t){return createCompileError(t,null,void 0)}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=t=>isFunction$3(t);function translate(t,...n){const{fallbackFormat:_,postTranslation:x,unresolving:E,messageCompiler:S,fallbackLocale:C,messages:T}=t,[B,A]=parseTranslateArgs(...n),I=isBoolean$4(A.missingWarn)?A.missingWarn:t.missingWarn,D=isBoolean$4(A.fallbackWarn)?A.fallbackWarn:t.fallbackWarn,M=isBoolean$4(A.escapeParameter)?A.escapeParameter:t.escapeParameter,V=!!A.resolvedMessage,L=isString$5(A.default)||isBoolean$4(A.default)?isBoolean$4(A.default)?S?B:()=>B:A.default:_?S?B:()=>B:"",F=_||L!=="",j=isString$5(A.locale)?A.locale:t.locale;M&&escapeParams(A);let[U,H,Y]=V?[B,j,T[j]||{}]:resolveMessageFormat(t,B,j,C,D,I),Z=U,ne=B;if(!V&&!(isString$5(Z)||isMessageFunction(Z))&&F&&(Z=L,ne=Z),!V&&(!(isString$5(Z)||isMessageFunction(Z))||!isString$5(H)))return E?NOT_REOSLVED:B;let re=!1;const X=()=>{re=!0},ce=isMessageFunction(Z)?Z:compileMessageFormat(t,B,H,Z,ne,X);if(re)return Z;const ue=getMessageContextOptions(t,H,Y,A),_e=createMessageContext(ue),ye=evaluateMessage(t,ce,_e),ie=x?x(ye,B):ye;if(__INTLIFY_PROD_DEVTOOLS__){const W={timestamp:Date.now(),key:isString$5(B)?B:isMessageFunction(Z)?Z.key:"",locale:H||(isMessageFunction(Z)?Z.locale:""),format:isString$5(Z)?Z:isMessageFunction(Z)?Z.source:"",message:ie};W.meta=assign$4({},t.__meta,getAdditionalMeta()||{}),translateDevTools(W)}return ie}function escapeParams(t){isArray$7(t.list)?t.list=t.list.map(n=>isString$5(n)?escapeHtml(n):n):isObject$4(t.named)&&Object.keys(t.named).forEach(n=>{isString$5(t.named[n])&&(t.named[n]=escapeHtml(t.named[n]))})}function resolveMessageFormat(t,n,_,x,E,S){const{messages:C,onWarn:T,messageResolver:B,localeFallbacker:A}=t,I=A(t,x,_);let D={},M,V=null;const L="translate";for(let F=0;F<I.length&&(M=I[F],D=C[M]||{},(V=B(D,n))===null&&(V=D[n]),!(isString$5(V)||isFunction$3(V)));F++){const j=handleMissing(t,n,M,S,L);j!==n&&(V=j)}return[V,M,D]}function compileMessageFormat(t,n,_,x,E,S){const{messageCompiler:C,warnHtmlMessage:T}=t;if(isMessageFunction(x)){const A=x;return A.locale=A.locale||_,A.key=A.key||n,A}if(C==null){const A=()=>x;return A.locale=_,A.key=n,A}const B=C(x,getCompileOptions(t,_,E,x,T,S));return B.locale=_,B.key=n,B.source=x,B}function evaluateMessage(t,n,_){return n(_)}function parseTranslateArgs(...t){const[n,_,x]=t,E={};if(!isString$5(n)&&!isNumber$3(n)&&!isMessageFunction(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const S=isNumber$3(n)?String(n):(isMessageFunction(n),n);return isNumber$3(_)?E.plural=_:isString$5(_)?E.default=_:isPlainObject$2(_)&&!isEmptyObject(_)?E.named=_:isArray$7(_)&&(E.list=_),isNumber$3(x)?E.plural=x:isString$5(x)?E.default=x:isPlainObject$2(x)&&assign$4(E,x),[S,E]}function getCompileOptions(t,n,_,x,E,S){return{warnHtmlMessage:E,onError:C=>{throw S&&S(C),C},onCacheKey:C=>generateFormatCacheKey(n,_,C)}}function getMessageContextOptions(t,n,_,x){const{modifiers:E,pluralRules:S,messageResolver:C,fallbackLocale:T,fallbackWarn:B,missingWarn:A,fallbackContext:I}=t,M={locale:n,modifiers:E,pluralRules:S,messages:V=>{let L=C(_,V);if(L==null&&I){const[,,F]=resolveMessageFormat(I,V,n,T,B,A);L=C(F,V)}if(isString$5(L)){let F=!1;const U=compileMessageFormat(t,V,n,L,V,()=>{F=!0});return F?NOOP_MESSAGE_FUNCTION:U}else return isMessageFunction(L)?L:NOOP_MESSAGE_FUNCTION}};return t.processor&&(M.processor=t.processor),x.list&&(M.list=x.list),x.named&&(M.named=x.named),isNumber$3(x.plural)&&(M.pluralIndex=x.plural),M}function datetime(t,...n){const{datetimeFormats:_,unresolving:x,fallbackLocale:E,onWarn:S,localeFallbacker:C}=t,{__datetimeFormatters:T}=t,[B,A,I,D]=parseDateTimeArgs(...n),M=isBoolean$4(I.missingWarn)?I.missingWarn:t.missingWarn;isBoolean$4(I.fallbackWarn)?I.fallbackWarn:t.fallbackWarn;const V=!!I.part,L=isString$5(I.locale)?I.locale:t.locale,F=C(t,E,L);if(!isString$5(B)||B==="")return new Intl.DateTimeFormat(L,D).format(A);let j={},U,H=null;const Y="datetime format";for(let re=0;re<F.length&&(U=F[re],j=_[U]||{},H=j[B],!isPlainObject$2(H));re++)handleMissing(t,B,U,M,Y);if(!isPlainObject$2(H)||!isString$5(U))return x?NOT_REOSLVED:B;let Z=`${U}__${B}`;isEmptyObject(D)||(Z=`${Z}__${JSON.stringify(D)}`);let ne=T.get(Z);return ne||(ne=new Intl.DateTimeFormat(U,assign$4({},H,D)),T.set(Z,ne)),V?ne.formatToParts(A):ne.format(A)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...t){const[n,_,x,E]=t,S={};let C={},T;if(isString$5(n)){const B=n.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!B)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const A=B[3]?B[3].trim().startsWith("T")?`${B[1].trim()}${B[3].trim()}`:`${B[1].trim()}T${B[3].trim()}`:B[1].trim();T=new Date(A);try{T.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate$3(n)){if(isNaN(n.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);T=n}else if(isNumber$3(n))T=n;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$5(_)?S.key=_:isPlainObject$2(_)&&Object.keys(_).forEach(B=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(B)?C[B]=_[B]:S[B]=_[B]}),isString$5(x)?S.locale=x:isPlainObject$2(x)&&(C=x),isPlainObject$2(E)&&(C=E),[S.key||"",T,S,C]}function clearDateTimeFormat(t,n,_){const x=t;for(const E in _){const S=`${n}__${E}`;x.__datetimeFormatters.has(S)&&x.__datetimeFormatters.delete(S)}}function number(t,...n){const{numberFormats:_,unresolving:x,fallbackLocale:E,onWarn:S,localeFallbacker:C}=t,{__numberFormatters:T}=t,[B,A,I,D]=parseNumberArgs(...n),M=isBoolean$4(I.missingWarn)?I.missingWarn:t.missingWarn;isBoolean$4(I.fallbackWarn)?I.fallbackWarn:t.fallbackWarn;const V=!!I.part,L=isString$5(I.locale)?I.locale:t.locale,F=C(t,E,L);if(!isString$5(B)||B==="")return new Intl.NumberFormat(L,D).format(A);let j={},U,H=null;const Y="number format";for(let re=0;re<F.length&&(U=F[re],j=_[U]||{},H=j[B],!isPlainObject$2(H));re++)handleMissing(t,B,U,M,Y);if(!isPlainObject$2(H)||!isString$5(U))return x?NOT_REOSLVED:B;let Z=`${U}__${B}`;isEmptyObject(D)||(Z=`${Z}__${JSON.stringify(D)}`);let ne=T.get(Z);return ne||(ne=new Intl.NumberFormat(U,assign$4({},H,D)),T.set(Z,ne)),V?ne.formatToParts(A):ne.format(A)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...t){const[n,_,x,E]=t,S={};let C={};if(!isNumber$3(n))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const T=n;return isString$5(_)?S.key=_:isPlainObject$2(_)&&Object.keys(_).forEach(B=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(B)?C[B]=_[B]:S[B]=_[B]}),isString$5(x)?S.locale=x:isPlainObject$2(x)&&(C=x),isPlainObject$2(E)&&(C=E),[S.key||"",T,S,C]}function clearNumberFormat(t,n,_){const x=t;for(const E in _){const S=`${n}__${E}`;x.__numberFormatters.has(S)&&x.__numberFormatters.delete(S)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1);/*!
  * vue-i18n v9.3.0-beta.16
  * (c) 2023 kazuya kawaguchi
  * Released under the MIT License.
  */const VERSION$1="9.3.0-beta.16";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}let code$8=CompileErrorCodes.__EXTEND_POINT__;const inc=()=>++code$8,I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code$8,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSLALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSLALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(t,...n){return createCompileError(t,null,void 0)}const TranslateVNodeSymbol=makeSymbol("__translateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules"),InejctWithOption=makeSymbol("__injectWithOption");function handleFlatJson(t){if(!isObject$4(t))return t;for(const n in t)if(hasOwn$2(t,n))if(!n.includes("."))isObject$4(t[n])&&handleFlatJson(t[n]);else{const _=n.split("."),x=_.length-1;let E=t;for(let S=0;S<x;S++)_[S]in E||(E[_[S]]={}),E=E[_[S]];E[_[x]]=t[n],delete t[n],isObject$4(E[_[x]])&&handleFlatJson(E[_[x]])}return t}function getLocaleMessages(t,n){const{messages:_,__i18n:x,messageResolver:E,flatJson:S}=n,C=isPlainObject$2(_)?_:isArray$7(x)?{}:{[t]:{}};if(isArray$7(x)&&x.forEach(T=>{if("locale"in T&&"resource"in T){const{locale:B,resource:A}=T;B?(C[B]=C[B]||{},deepCopy$1(A,C[B])):deepCopy$1(A,C)}else isString$5(T)&&deepCopy$1(JSON.parse(T),C)}),E==null&&S)for(const T in C)hasOwn$2(C,T)&&handleFlatJson(C[T]);return C}const isNotObjectOrIsArray=t=>!isObject$4(t)||isArray$7(t);function deepCopy$1(t,n){if(isNotObjectOrIsArray(t)||isNotObjectOrIsArray(n))throw createI18nError(I18nErrorCodes.INVALID_VALUE);for(const _ in t)hasOwn$2(t,_)&&(isNotObjectOrIsArray(t[_])||isNotObjectOrIsArray(n[_])?n[_]=t[_]:deepCopy$1(t[_],n[_]))}function getComponentOptions(t){return t.type}function adjustI18nResources(t,n,_){let x=isObject$4(n.messages)?n.messages:{};"__i18nGlobal"in _&&(x=getLocaleMessages(t.locale.value,{messages:x,__i18n:_.__i18nGlobal}));const E=Object.keys(x);E.length&&E.forEach(S=>{t.mergeLocaleMessage(S,x[S])});{if(isObject$4(n.datetimeFormats)){const S=Object.keys(n.datetimeFormats);S.length&&S.forEach(C=>{t.mergeDateTimeFormat(C,n.datetimeFormats[C])})}if(isObject$4(n.numberFormats)){const S=Object.keys(n.numberFormats);S.length&&S.forEach(C=>{t.mergeNumberFormat(C,n.numberFormats[C])})}}}function createTextNode(t){return createVNode(Text,null,t,0)}const DEVTOOLS_META="__INTLIFY_META__";let composerID=0;function defineCoreMissingHandler(t){return(n,_,x,E)=>t(_,x,getCurrentInstance$1()||void 0,E)}const getMetaInfo=()=>{const t=getCurrentInstance$1();let n=null;return t&&(n=getComponentOptions(t)[DEVTOOLS_META])?{[DEVTOOLS_META]:n}:null};function createComposer(t={},n){const{__root:_}=t,x=_===void 0;let E=isBoolean$4(t.inheritLocale)?t.inheritLocale:!0;const S=ref$1(_&&E?_.locale.value:isString$5(t.locale)?t.locale:DEFAULT_LOCALE),C=ref$1(_&&E?_.fallbackLocale.value:isString$5(t.fallbackLocale)||isArray$7(t.fallbackLocale)||isPlainObject$2(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:S.value),T=ref$1(getLocaleMessages(S.value,t)),B=ref$1(isPlainObject$2(t.datetimeFormats)?t.datetimeFormats:{[S.value]:{}}),A=ref$1(isPlainObject$2(t.numberFormats)?t.numberFormats:{[S.value]:{}});let I=_?_.missingWarn:isBoolean$4(t.missingWarn)||isRegExp$2(t.missingWarn)?t.missingWarn:!0,D=_?_.fallbackWarn:isBoolean$4(t.fallbackWarn)||isRegExp$2(t.fallbackWarn)?t.fallbackWarn:!0,M=_?_.fallbackRoot:isBoolean$4(t.fallbackRoot)?t.fallbackRoot:!0,V=!!t.fallbackFormat,L=isFunction$3(t.missing)?t.missing:null,F=isFunction$3(t.missing)?defineCoreMissingHandler(t.missing):null,j=isFunction$3(t.postTranslation)?t.postTranslation:null,U=_?_.warnHtmlMessage:isBoolean$4(t.warnHtmlMessage)?t.warnHtmlMessage:!0,H=!!t.escapeParameter;const Y=_?_.modifiers:isPlainObject$2(t.modifiers)?t.modifiers:{};let Z=t.pluralRules||_&&_.pluralRules,ne;ne=(()=>{x&&setFallbackContext(null);const He={version:VERSION$1,locale:S.value,fallbackLocale:C.value,messages:T.value,modifiers:Y,pluralRules:Z,missing:F===null?void 0:F,missingWarn:I,fallbackWarn:D,fallbackFormat:V,unresolving:!0,postTranslation:j===null?void 0:j,warnHtmlMessage:U,escapeParameter:H,messageResolver:t.messageResolver,__meta:{framework:"vue"}};He.datetimeFormats=B.value,He.numberFormats=A.value,He.__datetimeFormatters=isPlainObject$2(ne)?ne.__datetimeFormatters:void 0,He.__numberFormatters=isPlainObject$2(ne)?ne.__numberFormatters:void 0;const Ge=createCoreContext(He);return x&&setFallbackContext(Ge),Ge})(),updateFallbackLocale(ne,S.value,C.value);function X(){return[S.value,C.value,T.value,B.value,A.value]}const ce=computed({get:()=>S.value,set:He=>{S.value=He,ne.locale=S.value}}),ue=computed({get:()=>C.value,set:He=>{C.value=He,ne.fallbackLocale=C.value,updateFallbackLocale(ne,S.value,He)}}),_e=computed(()=>T.value),ye=computed(()=>B.value),ie=computed(()=>A.value);function W(){return isFunction$3(j)?j:null}function O(He){j=He,ne.postTranslation=He}function z(){return L}function J(He){He!==null&&(F=defineCoreMissingHandler(He)),L=He,ne.missing=F}const ee=(He,Ge,rt,st,Je,Ie)=>{X();let be;if(__INTLIFY_PROD_DEVTOOLS__)try{setAdditionalMeta(getMetaInfo()),x||(ne.fallbackContext=_?getFallbackContext():void 0),be=He(ne)}finally{setAdditionalMeta(null),x||(ne.fallbackContext=void 0)}else be=He(ne);if(isNumber$3(be)&&be===NOT_REOSLVED){const[Te,Le]=Ge();return _&&M?st(_):Je(Te)}else{if(Ie(be))return be;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function ae(...He){return ee(Ge=>Reflect.apply(translate,null,[Ge,...He]),()=>parseTranslateArgs(...He),"translate",Ge=>Reflect.apply(Ge.t,Ge,[...He]),Ge=>Ge,Ge=>isString$5(Ge))}function oe(...He){const[Ge,rt,st]=He;if(st&&!isObject$4(st))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return ae(Ge,rt,assign$4({resolvedMessage:!0},st||{}))}function se(...He){return ee(Ge=>Reflect.apply(datetime,null,[Ge,...He]),()=>parseDateTimeArgs(...He),"datetime format",Ge=>Reflect.apply(Ge.d,Ge,[...He]),()=>MISSING_RESOLVE_VALUE,Ge=>isString$5(Ge))}function G(...He){return ee(Ge=>Reflect.apply(number,null,[Ge,...He]),()=>parseNumberArgs(...He),"number format",Ge=>Reflect.apply(Ge.n,Ge,[...He]),()=>MISSING_RESOLVE_VALUE,Ge=>isString$5(Ge))}function q(He){return He.map(Ge=>isString$5(Ge)||isNumber$3(Ge)||isBoolean$4(Ge)?createTextNode(String(Ge)):Ge)}const fe={normalize:q,interpolate:He=>He,type:"vnode"};function he(...He){return ee(Ge=>{let rt;const st=Ge;try{st.processor=fe,rt=Reflect.apply(translate,null,[st,...He])}finally{st.processor=null}return rt},()=>parseTranslateArgs(...He),"translate",Ge=>Ge[TranslateVNodeSymbol](...He),Ge=>[createTextNode(Ge)],Ge=>isArray$7(Ge))}function Ee(...He){return ee(Ge=>Reflect.apply(number,null,[Ge,...He]),()=>parseNumberArgs(...He),"number format",Ge=>Ge[NumberPartsSymbol](...He),()=>[],Ge=>isString$5(Ge)||isArray$7(Ge))}function we(...He){return ee(Ge=>Reflect.apply(datetime,null,[Ge,...He]),()=>parseDateTimeArgs(...He),"datetime format",Ge=>Ge[DatetimePartsSymbol](...He),()=>[],Ge=>isString$5(Ge)||isArray$7(Ge))}function xe(He){Z=He,ne.pluralRules=Z}function $e(He,Ge){const rt=isString$5(Ge)?Ge:S.value,st=me(rt);return ne.messageResolver(st,He)!==null}function ge(He){let Ge=null;const rt=fallbackWithLocaleChain(ne,C.value,S.value);for(let st=0;st<rt.length;st++){const Je=T.value[rt[st]]||{},Ie=ne.messageResolver(Je,He);if(Ie!=null){Ge=Ie;break}}return Ge}function Se(He){const Ge=ge(He);return Ge??(_?_.tm(He)||{}:{})}function me(He){return T.value[He]||{}}function Be(He,Ge){T.value[He]=Ge,ne.messages=T.value}function ve(He,Ge){T.value[He]=T.value[He]||{},deepCopy$1(Ge,T.value[He]),ne.messages=T.value}function Ae(He){return B.value[He]||{}}function Ve(He,Ge){B.value[He]=Ge,ne.datetimeFormats=B.value,clearDateTimeFormat(ne,He,Ge)}function Pe(He,Ge){B.value[He]=assign$4(B.value[He]||{},Ge),ne.datetimeFormats=B.value,clearDateTimeFormat(ne,He,Ge)}function Re(He){return A.value[He]||{}}function Ne(He,Ge){A.value[He]=Ge,ne.numberFormats=A.value,clearNumberFormat(ne,He,Ge)}function qe(He,Ge){A.value[He]=assign$4(A.value[He]||{},Ge),ne.numberFormats=A.value,clearNumberFormat(ne,He,Ge)}composerID++,_&&inBrowser&&(watch(_.locale,He=>{E&&(S.value=He,ne.locale=He,updateFallbackLocale(ne,S.value,C.value))}),watch(_.fallbackLocale,He=>{E&&(C.value=He,ne.fallbackLocale=He,updateFallbackLocale(ne,S.value,C.value))}));const Ke={id:composerID,locale:ce,fallbackLocale:ue,get inheritLocale(){return E},set inheritLocale(He){E=He,He&&_&&(S.value=_.locale.value,C.value=_.fallbackLocale.value,updateFallbackLocale(ne,S.value,C.value))},get availableLocales(){return Object.keys(T.value).sort()},messages:_e,get modifiers(){return Y},get pluralRules(){return Z||{}},get isGlobal(){return x},get missingWarn(){return I},set missingWarn(He){I=He,ne.missingWarn=I},get fallbackWarn(){return D},set fallbackWarn(He){D=He,ne.fallbackWarn=D},get fallbackRoot(){return M},set fallbackRoot(He){M=He},get fallbackFormat(){return V},set fallbackFormat(He){V=He,ne.fallbackFormat=V},get warnHtmlMessage(){return U},set warnHtmlMessage(He){U=He,ne.warnHtmlMessage=He},get escapeParameter(){return H},set escapeParameter(He){H=He,ne.escapeParameter=He},t:ae,getLocaleMessage:me,setLocaleMessage:Be,mergeLocaleMessage:ve,getPostTranslationHandler:W,setPostTranslationHandler:O,getMissingHandler:z,setMissingHandler:J,[SetPluralRulesSymbol]:xe};return Ke.datetimeFormats=ye,Ke.numberFormats=ie,Ke.rt=oe,Ke.te=$e,Ke.tm=Se,Ke.d=se,Ke.n=G,Ke.getDateTimeFormat=Ae,Ke.setDateTimeFormat=Ve,Ke.mergeDateTimeFormat=Pe,Ke.getNumberFormat=Re,Ke.setNumberFormat=Ne,Ke.mergeNumberFormat=qe,Ke[InejctWithOption]=t.__injectWithOption,Ke[TranslateVNodeSymbol]=he,Ke[DatetimePartsSymbol]=we,Ke[NumberPartsSymbol]=Ee,Ke}function convertComposerOptions(t){const n=isString$5(t.locale)?t.locale:DEFAULT_LOCALE,_=isString$5(t.fallbackLocale)||isArray$7(t.fallbackLocale)||isPlainObject$2(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:n,x=isFunction$3(t.missing)?t.missing:void 0,E=isBoolean$4(t.silentTranslationWarn)||isRegExp$2(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,S=isBoolean$4(t.silentFallbackWarn)||isRegExp$2(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,C=isBoolean$4(t.fallbackRoot)?t.fallbackRoot:!0,T=!!t.formatFallbackMessages,B=isPlainObject$2(t.modifiers)?t.modifiers:{},A=t.pluralizationRules,I=isFunction$3(t.postTranslation)?t.postTranslation:void 0,D=isString$5(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,M=!!t.escapeParameterHtml,V=isBoolean$4(t.sync)?t.sync:!0;let L=t.messages;if(isPlainObject$2(t.sharedMessages)){const ne=t.sharedMessages;L=Object.keys(ne).reduce((X,ce)=>{const ue=X[ce]||(X[ce]={});return assign$4(ue,ne[ce]),X},L||{})}const{__i18n:F,__root:j,__injectWithOption:U}=t,H=t.datetimeFormats,Y=t.numberFormats,Z=t.flatJson;return{locale:n,fallbackLocale:_,messages:L,flatJson:Z,datetimeFormats:H,numberFormats:Y,missing:x,missingWarn:E,fallbackWarn:S,fallbackRoot:C,fallbackFormat:T,modifiers:B,pluralRules:A,postTranslation:I,warnHtmlMessage:D,escapeParameter:M,messageResolver:t.messageResolver,inheritLocale:V,__i18n:F,__root:j,__injectWithOption:U}}function createVueI18n(t={},n){{const _=createComposer(convertComposerOptions(t)),x={id:_.id,get locale(){return _.locale.value},set locale(E){_.locale.value=E},get fallbackLocale(){return _.fallbackLocale.value},set fallbackLocale(E){_.fallbackLocale.value=E},get messages(){return _.messages.value},get datetimeFormats(){return _.datetimeFormats.value},get numberFormats(){return _.numberFormats.value},get availableLocales(){return _.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(E){},get missing(){return _.getMissingHandler()},set missing(E){_.setMissingHandler(E)},get silentTranslationWarn(){return isBoolean$4(_.missingWarn)?!_.missingWarn:_.missingWarn},set silentTranslationWarn(E){_.missingWarn=isBoolean$4(E)?!E:E},get silentFallbackWarn(){return isBoolean$4(_.fallbackWarn)?!_.fallbackWarn:_.fallbackWarn},set silentFallbackWarn(E){_.fallbackWarn=isBoolean$4(E)?!E:E},get modifiers(){return _.modifiers},get formatFallbackMessages(){return _.fallbackFormat},set formatFallbackMessages(E){_.fallbackFormat=E},get postTranslation(){return _.getPostTranslationHandler()},set postTranslation(E){_.setPostTranslationHandler(E)},get sync(){return _.inheritLocale},set sync(E){_.inheritLocale=E},get warnHtmlInMessage(){return _.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(E){_.warnHtmlMessage=E!=="off"},get escapeParameterHtml(){return _.escapeParameter},set escapeParameterHtml(E){_.escapeParameter=E},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(E){},get pluralizationRules(){return _.pluralRules||{}},__composer:_,t(...E){const[S,C,T]=E,B={};let A=null,I=null;if(!isString$5(S))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const D=S;return isString$5(C)?B.locale=C:isArray$7(C)?A=C:isPlainObject$2(C)&&(I=C),isArray$7(T)?A=T:isPlainObject$2(T)&&(I=T),Reflect.apply(_.t,_,[D,A||I||{},B])},rt(...E){return Reflect.apply(_.rt,_,[...E])},tc(...E){const[S,C,T]=E,B={plural:1};let A=null,I=null;if(!isString$5(S))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const D=S;return isString$5(C)?B.locale=C:isNumber$3(C)?B.plural=C:isArray$7(C)?A=C:isPlainObject$2(C)&&(I=C),isString$5(T)?B.locale=T:isArray$7(T)?A=T:isPlainObject$2(T)&&(I=T),Reflect.apply(_.t,_,[D,A||I||{},B])},te(E,S){return _.te(E,S)},tm(E){return _.tm(E)},getLocaleMessage(E){return _.getLocaleMessage(E)},setLocaleMessage(E,S){_.setLocaleMessage(E,S)},mergeLocaleMessage(E,S){_.mergeLocaleMessage(E,S)},d(...E){return Reflect.apply(_.d,_,[...E])},getDateTimeFormat(E){return _.getDateTimeFormat(E)},setDateTimeFormat(E,S){_.setDateTimeFormat(E,S)},mergeDateTimeFormat(E,S){_.mergeDateTimeFormat(E,S)},n(...E){return Reflect.apply(_.n,_,[...E])},getNumberFormat(E){return _.getNumberFormat(E)},setNumberFormat(E,S){_.setNumberFormat(E,S)},mergeNumberFormat(E,S){_.mergeNumberFormat(E,S)},getChoiceIndex(E,S){return-1},__onComponentInstanceCreated(E){const{componentInstanceCreatedListener:S}=t;S&&S(E,x)}};return x}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:t},n){return n.length===1&&n[0]==="default"?(t.default?t.default():[]).reduce((x,E)=>[...x,...E.type===Fragment?E.children:[E]],[]):n.reduce((_,x)=>{const E=t[x];return E&&(_[x]=E()),_},{})}function getFragmentableTag(t){return Fragment}const TranslationImpl=defineComponent$1({name:"i18n-t",props:assign$4({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>isNumber$3(t)||!isNaN(t)}},baseFormatProps),setup(t,n){const{slots:_,attrs:x}=n,E=t.i18n||useI18n({useScope:t.scope,__useComponent:!0});return()=>{const S=Object.keys(_).filter(D=>D!=="_"),C={};t.locale&&(C.locale=t.locale),t.plural!==void 0&&(C.plural=isString$5(t.plural)?+t.plural:t.plural);const T=getInterpolateArg(n,S),B=E[TranslateVNodeSymbol](t.keypath,T,C),A=assign$4({},x),I=isString$5(t.tag)||isObject$4(t.tag)?t.tag:getFragmentableTag();return h$1(I,A,B)}}}),Translation=TranslationImpl;function isVNode(t){return isArray$7(t)&&!isString$5(t[0])}function renderFormatter(t,n,_,x){const{slots:E,attrs:S}=n;return()=>{const C={part:!0};let T={};t.locale&&(C.locale=t.locale),isString$5(t.format)?C.key=t.format:isObject$4(t.format)&&(isString$5(t.format.key)&&(C.key=t.format.key),T=Object.keys(t.format).reduce((M,V)=>_.includes(V)?assign$4({},M,{[V]:t.format[V]}):M,{}));const B=x(t.value,C,T);let A=[C.key];isArray$7(B)?A=B.map((M,V)=>{const L=E[M.type],F=L?L({[M.type]:M.value,index:V,parts:B}):[M.value];return isVNode(F)&&(F[0].key=`${M.type}-${V}`),F}):isString$5(B)&&(A=[B]);const I=assign$4({},S),D=isString$5(t.tag)||isObject$4(t.tag)?t.tag:getFragmentableTag();return h$1(D,I,A)}}const NumberFormatImpl=defineComponent$1({name:"i18n-n",props:assign$4({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(t,n){const _=t.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(t,n,NUMBER_FORMAT_OPTIONS_KEYS,(...x)=>_[NumberPartsSymbol](...x))}}),NumberFormat=NumberFormatImpl,DatetimeFormatImpl=defineComponent$1({name:"i18n-d",props:assign$4({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(t,n){const _=t.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(t,n,DATETIME_FORMAT_OPTIONS_KEYS,(...x)=>_[DatetimePartsSymbol](...x))}}),DatetimeFormat=DatetimeFormatImpl;function getComposer$2(t,n){const _=t;if(t.mode==="composition")return _.__getInstance(n)||t.global;{const x=_.__getInstance(n);return x!=null?x.__composer:t.global.__composer}}function vTDirective(t){const n=C=>{const{instance:T,modifiers:B,value:A}=C;if(!T||!T.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const I=getComposer$2(t,T.$),D=parseValue(A);return[Reflect.apply(I.t,I,[...makeParams(D)]),I]};return{created:(C,T)=>{const[B,A]=n(T);inBrowser&&t.global===A&&(C.__i18nWatcher=watch(A.locale,()=>{T.instance&&T.instance.$forceUpdate()})),C.__composer=A,C.textContent=B},unmounted:C=>{inBrowser&&C.__i18nWatcher&&(C.__i18nWatcher(),C.__i18nWatcher=void 0,delete C.__i18nWatcher),C.__composer&&(C.__composer=void 0,delete C.__composer)},beforeUpdate:(C,{value:T})=>{if(C.__composer){const B=C.__composer,A=parseValue(T);C.textContent=Reflect.apply(B.t,B,[...makeParams(A)])}},getSSRProps:C=>{const[T]=n(C);return{textContent:T}}}}function parseValue(t){if(isString$5(t))return{path:t};if(isPlainObject$2(t)){if(!("path"in t))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return t}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(t){const{path:n,locale:_,args:x,choice:E,plural:S}=t,C={},T=x||{};return isString$5(_)&&(C.locale=_),isNumber$3(E)&&(C.plural=E),isNumber$3(S)&&(C.plural=S),[n,T,C]}function apply(t,n,..._){const x=isPlainObject$2(_[0])?_[0]:{},E=!!x.useI18nComponentName;(isBoolean$4(x.globalInstall)?x.globalInstall:!0)&&(t.component(E?"i18n":Translation.name,Translation),t.component(NumberFormat.name,NumberFormat),t.component(DatetimeFormat.name,DatetimeFormat)),t.directive("t",vTDirective(n))}function defineMixin(t,n,_){return{beforeCreate(){const x=getCurrentInstance$1();if(!x)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const E=this.$options;if(E.i18n){const S=E.i18n;E.__i18n&&(S.__i18n=E.__i18n),S.__root=n,this===this.$root?this.$i18n=mergeToRoot(t,S):(S.__injectWithOption=!0,this.$i18n=createVueI18n(S))}else E.__i18n?this===this.$root?this.$i18n=mergeToRoot(t,E):this.$i18n=createVueI18n({__i18n:E.__i18n,__injectWithOption:!0,__root:n}):this.$i18n=t;E.__i18nGlobal&&adjustI18nResources(n,E,E),t.__onComponentInstanceCreated(this.$i18n),_.__setInstance(x,this.$i18n),this.$t=(...S)=>this.$i18n.t(...S),this.$rt=(...S)=>this.$i18n.rt(...S),this.$tc=(...S)=>this.$i18n.tc(...S),this.$te=(S,C)=>this.$i18n.te(S,C),this.$d=(...S)=>this.$i18n.d(...S),this.$n=(...S)=>this.$i18n.n(...S),this.$tm=S=>this.$i18n.tm(S),this!==this.$root&&!this.$i18n.__extended__&&_.__vueI18nExtend&&(_.__vueI18nExtend(this.$i18n),this.$i18n.__extended__=!0)},mounted(){},unmounted(){const x=getCurrentInstance$1();if(!x)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,_.__deleteInstance(x),delete this.$i18n}}}function mergeToRoot(t,n){t.locale=n.locale||t.locale,t.fallbackLocale=n.fallbackLocale||t.fallbackLocale,t.missing=n.missing||t.missing,t.silentTranslationWarn=n.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=n.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=n.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=n.postTranslation||t.postTranslation,t.warnHtmlInMessage=n.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=n.escapeParameterHtml||t.escapeParameterHtml,t.sync=n.sync||t.sync,t.__composer[SetPluralRulesSymbol](n.pluralizationRules||t.pluralizationRules);const _=getLocaleMessages(t.locale,{messages:n.messages,__i18n:n.__i18n});return Object.keys(_).forEach(x=>t.mergeLocaleMessage(x,_[x])),n.datetimeFormats&&Object.keys(n.datetimeFormats).forEach(x=>t.mergeDateTimeFormat(x,n.datetimeFormats[x])),n.numberFormats&&Object.keys(n.numberFormats).forEach(x=>t.mergeNumberFormat(x,n.numberFormats[x])),t}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(t={},n){const _=__VUE_I18N_LEGACY_API__&&isBoolean$4(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,x=isBoolean$4(t.globalInjection)?t.globalInjection:!0,E=__VUE_I18N_LEGACY_API__&&_?!!t.allowComposition:!0,S=new Map,[C,T]=createGlobal(t,_),B=makeSymbol("");function A(M){return S.get(M)||null}function I(M,V){S.set(M,V)}function D(M){S.delete(M)}{const M={get mode(){return __VUE_I18N_LEGACY_API__&&_?"legacy":"composition"},get allowComposition(){return E},async install(V,...L){if(V.__VUE_I18N_SYMBOL__=B,V.provide(V.__VUE_I18N_SYMBOL__,M),isPlainObject$2(L[0])){const j=L[0];M.__composerExtend=j.__composerExtend,M.__vueI18nExtend=j.__vueI18nExtend}!_&&x&&injectGlobalFields(V,M.global),__VUE_I18N_FULL_INSTALL__&&apply(V,M,...L),__VUE_I18N_LEGACY_API__&&_&&V.mixin(defineMixin(T,T.__composer,M));const F=V.unmount;V.unmount=()=>{M.dispose(),F()}},get global(){return T},dispose(){C.stop()},__instances:S,__getInstance:A,__setInstance:I,__deleteInstance:D};return M}}function useI18n(t={}){const n=getCurrentInstance$1();if(n==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!n.isCE&&n.appContext.app!=null&&!n.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSLALLED);const _=getI18nInstance(n),x=getGlobalComposer(_),E=getComponentOptions(n),S=getScope(t,E);if(__VUE_I18N_LEGACY_API__&&_.mode==="legacy"&&!t.__useComponent){if(!_.allowComposition)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE);return useI18nForLegacy(n,S,x,t)}if(S==="global")return adjustI18nResources(x,t,E),x;if(S==="parent"){let B=getComposer(_,n,t.__useComponent);return B==null&&(B=x),B}const C=_;let T=C.__getInstance(n);if(T==null){const B=assign$4({},t);"__i18n"in E&&(B.__i18n=E.__i18n),x&&(B.__root=x),T=createComposer(B),C.__composerExtend&&C.__composerExtend(T),setupLifeCycle(C,n),C.__setInstance(n,T)}return T}function createGlobal(t,n,_){const x=effectScope();{const E=__VUE_I18N_LEGACY_API__&&n?x.run(()=>createVueI18n(t)):x.run(()=>createComposer(t));if(E==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[x,E]}}function getI18nInstance(t){{const n=inject$1(t.isCE?I18nInjectionKey:t.appContext.app.__VUE_I18N_SYMBOL__);if(!n)throw createI18nError(t.isCE?I18nErrorCodes.NOT_INSLALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return n}}function getScope(t,n){return isEmptyObject(t)?"__i18n"in n?"local":"global":t.useScope?t.useScope:"local"}function getGlobalComposer(t){return t.mode==="composition"?t.global:t.global.__composer}function getComposer(t,n,_=!1){let x=null;const E=n.root;let S=n.parent;for(;S!=null;){const C=t;if(t.mode==="composition")x=C.__getInstance(S);else if(__VUE_I18N_LEGACY_API__){const T=C.__getInstance(S);T!=null&&(x=T.__composer,_&&x&&!x[InejctWithOption]&&(x=null))}if(x!=null||E===S)break;S=S.parent}return x}function setupLifeCycle(t,n,_){onMounted(()=>{},n),onUnmounted(()=>{t.__deleteInstance(n)},n)}function useI18nForLegacy(t,n,_,x={}){const E=n==="local",S=shallowRef(null);if(E&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const C=isBoolean$4(x.inheritLocale)?x.inheritLocale:!0,T=ref$1(E&&C?_.locale.value:isString$5(x.locale)?x.locale:DEFAULT_LOCALE),B=ref$1(E&&C?_.fallbackLocale.value:isString$5(x.fallbackLocale)||isArray$7(x.fallbackLocale)||isPlainObject$2(x.fallbackLocale)||x.fallbackLocale===!1?x.fallbackLocale:T.value),A=ref$1(getLocaleMessages(T.value,x)),I=ref$1(isPlainObject$2(x.datetimeFormats)?x.datetimeFormats:{[T.value]:{}}),D=ref$1(isPlainObject$2(x.numberFormats)?x.numberFormats:{[T.value]:{}}),M=E?_.missingWarn:isBoolean$4(x.missingWarn)||isRegExp$2(x.missingWarn)?x.missingWarn:!0,V=E?_.fallbackWarn:isBoolean$4(x.fallbackWarn)||isRegExp$2(x.fallbackWarn)?x.fallbackWarn:!0,L=E?_.fallbackRoot:isBoolean$4(x.fallbackRoot)?x.fallbackRoot:!0,F=!!x.fallbackFormat,j=isFunction$3(x.missing)?x.missing:null,U=isFunction$3(x.postTranslation)?x.postTranslation:null,H=E?_.warnHtmlMessage:isBoolean$4(x.warnHtmlMessage)?x.warnHtmlMessage:!0,Y=!!x.escapeParameter,Z=E?_.modifiers:isPlainObject$2(x.modifiers)?x.modifiers:{},ne=x.pluralRules||E&&_.pluralRules;function re(){return[T.value,B.value,A.value,I.value,D.value]}const X=computed({get:()=>S.value?S.value.locale.value:T.value,set:ve=>{S.value&&(S.value.locale.value=ve),T.value=ve}}),ce=computed({get:()=>S.value?S.value.fallbackLocale.value:B.value,set:ve=>{S.value&&(S.value.fallbackLocale.value=ve),B.value=ve}}),ue=computed(()=>S.value?S.value.messages.value:A.value),_e=computed(()=>I.value),ye=computed(()=>D.value);function ie(){return S.value?S.value.getPostTranslationHandler():U}function W(ve){S.value&&S.value.setPostTranslationHandler(ve)}function O(){return S.value?S.value.getMissingHandler():j}function z(ve){S.value&&S.value.setMissingHandler(ve)}function J(ve){return re(),ve()}function ee(...ve){return S.value?J(()=>Reflect.apply(S.value.t,null,[...ve])):J(()=>"")}function ae(...ve){return S.value?Reflect.apply(S.value.rt,null,[...ve]):""}function oe(...ve){return S.value?J(()=>Reflect.apply(S.value.d,null,[...ve])):J(()=>"")}function se(...ve){return S.value?J(()=>Reflect.apply(S.value.n,null,[...ve])):J(()=>"")}function G(ve){return S.value?S.value.tm(ve):{}}function q(ve,Ae){return S.value?S.value.te(ve,Ae):!1}function te(ve){return S.value?S.value.getLocaleMessage(ve):{}}function fe(ve,Ae){S.value&&(S.value.setLocaleMessage(ve,Ae),A.value[ve]=Ae)}function he(ve,Ae){S.value&&S.value.mergeLocaleMessage(ve,Ae)}function Ee(ve){return S.value?S.value.getDateTimeFormat(ve):{}}function we(ve,Ae){S.value&&(S.value.setDateTimeFormat(ve,Ae),I.value[ve]=Ae)}function xe(ve,Ae){S.value&&S.value.mergeDateTimeFormat(ve,Ae)}function $e(ve){return S.value?S.value.getNumberFormat(ve):{}}function ge(ve,Ae){S.value&&(S.value.setNumberFormat(ve,Ae),D.value[ve]=Ae)}function Se(ve,Ae){S.value&&S.value.mergeNumberFormat(ve,Ae)}const me={get id(){return S.value?S.value.id:-1},locale:X,fallbackLocale:ce,messages:ue,datetimeFormats:_e,numberFormats:ye,get inheritLocale(){return S.value?S.value.inheritLocale:C},set inheritLocale(ve){S.value&&(S.value.inheritLocale=ve)},get availableLocales(){return S.value?S.value.availableLocales:Object.keys(A.value)},get modifiers(){return S.value?S.value.modifiers:Z},get pluralRules(){return S.value?S.value.pluralRules:ne},get isGlobal(){return S.value?S.value.isGlobal:!1},get missingWarn(){return S.value?S.value.missingWarn:M},set missingWarn(ve){S.value&&(S.value.missingWarn=ve)},get fallbackWarn(){return S.value?S.value.fallbackWarn:V},set fallbackWarn(ve){S.value&&(S.value.missingWarn=ve)},get fallbackRoot(){return S.value?S.value.fallbackRoot:L},set fallbackRoot(ve){S.value&&(S.value.fallbackRoot=ve)},get fallbackFormat(){return S.value?S.value.fallbackFormat:F},set fallbackFormat(ve){S.value&&(S.value.fallbackFormat=ve)},get warnHtmlMessage(){return S.value?S.value.warnHtmlMessage:H},set warnHtmlMessage(ve){S.value&&(S.value.warnHtmlMessage=ve)},get escapeParameter(){return S.value?S.value.escapeParameter:Y},set escapeParameter(ve){S.value&&(S.value.escapeParameter=ve)},t:ee,getPostTranslationHandler:ie,setPostTranslationHandler:W,getMissingHandler:O,setMissingHandler:z,rt:ae,d:oe,n:se,tm:G,te:q,getLocaleMessage:te,setLocaleMessage:fe,mergeLocaleMessage:he,getDateTimeFormat:Ee,setDateTimeFormat:we,mergeDateTimeFormat:xe,getNumberFormat:$e,setNumberFormat:ge,mergeNumberFormat:Se};function Be(ve){ve.locale.value=T.value,ve.fallbackLocale.value=B.value,Object.keys(A.value).forEach(Ae=>{ve.mergeLocaleMessage(Ae,A.value[Ae])}),Object.keys(I.value).forEach(Ae=>{ve.mergeDateTimeFormat(Ae,I.value[Ae])}),Object.keys(D.value).forEach(Ae=>{ve.mergeNumberFormat(Ae,D.value[Ae])}),ve.escapeParameter=Y,ve.fallbackFormat=F,ve.fallbackRoot=L,ve.fallbackWarn=V,ve.missingWarn=M,ve.warnHtmlMessage=H}return onBeforeMount(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const ve=S.value=t.proxy.$i18n.__composer;n==="global"?(T.value=ve.locale.value,B.value=ve.fallbackLocale.value,A.value=ve.messages.value,I.value=ve.datetimeFormats.value,D.value=ve.numberFormats.value):E&&Be(ve)}),me}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(t,n){const _=Object.create(null);globalExportProps.forEach(x=>{const E=Object.getOwnPropertyDescriptor(n,x);if(!E)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const S=isRef(E.value)?{get(){return E.value.value},set(C){E.value.value=C}}:{get(){return E.get&&E.get()}};Object.defineProperty(_,x,S)}),t.config.globalProperties.$i18n=_,globalExportMethods.forEach(x=>{const E=Object.getOwnPropertyDescriptor(n,x);if(!E||!E.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${x}`,E)})}registerMessageCompiler(compileToFunction);registerMessageResolver(resolveValue);registerLocaleFallbacker(fallbackWithLocaleChain);initFeatureFlags();if(__INTLIFY_PROD_DEVTOOLS__){const t=getGlobalThis();t.__INTLIFY__=!0,setDevToolsHook(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const useI18n_=()=>{const{langue:t,languesAlternatives:n}=utiliserLangues(),_=inject$1(""),{codesLanguesDisponibles:x}=__(),E=useI18n({messages:_?.value||{}});watchEffect(()=>{E.locale.value=t.value});const S=computed(()=>[...n.value,...x.value.filter(C=>C!==t.value&&!n.value.includes(C))]);return watch([S],()=>{E.fallbackLocale.value=S.value}),E.fallbackLocale.value=S.value,{...E,$t:E.t}},__=()=>{const t=inject$1(""),n=inject$1("locales")?.nuchabl;if(!t)throw new Error(" .");if(!n)throw new Error("Nuch'ab'l .");const _=ref$1([]);let x;onMounted(async()=>{x=await t._({:M=>_.value=M})}),onUnmounted(async()=>{x&&await x()});const E=[],S=inject$1(""),C=ref$1([]);S&&S._({:M=>{lodashExports.isEqual(M,C.value)||(C.value=M)},:!0}).then(M=>E.push(M));const T=ref$1([]),B=n.tatzeqelbejKonojelChabl({sm:M=>T.value=M});E.push(B),onUnmounted(async()=>{await Promise.all(E.map(M=>M()))});const A=computed(()=>[...new Set([...T.value,...C.value])]),I=computed(()=>A.value.map(M=>({code:M,lng:n.rubiChabl({runuk:M})})).filter(M=>M.lng));return{codesLanguesDisponibles:A,languesEtCodes:I,nomLangue:M=>computed(()=>{const V=typeof M=="string"?M:M.value;if(M)return I.value.find(L=>L.code===V)?.lng}),_:_}},__=({:t,:n=""})=>{const _=inject$1("");if(!_)throw new Error(" .");const x=ref$1();let E;return onMounted(async()=>{typeof t=="string"?E=await _._({:t,:n,:S=>x.value=S}):t.value&&(E=await _._({:t.value,:n,:S=>x.value=S}))}),onUnmounted(async()=>{E&&await E()}),typeof t!="string"&&watchEffect(async()=>{E&&await E(),t.value?E=await _._({:t.value,:n,:S=>x.value=S}):(x.value=void 0,E=void 0)}),{_:x}},_=()=>{const t=inject$1("");if(!t)throw new Error(" .");const n=ref$1();let _;return onMounted(async()=>{_=await t._({:x=>n.value=x})}),onUnmounted(async()=>{_&&await _()}),{:n}},_=()=>{const t=inject$1("");if(!t)throw new Error(" .");const n=ref$1({});let _;return onMounted(async()=>{_=await t.__({:x=>n.value=x})}),onUnmounted(async()=>{_&&await _()}),{_:n}},_=()=>{const t=inject$1("");if(!t)throw new Error(" .");const n=ref$1([]);let _;return onMounted(async()=>{_=(await t.__({:x=>n.value=x})).fOublier}),onUnmounted(async()=>{_&&await _()}),{:n}},_=({_:t,_:n})=>({install:_=>{const x=_.config.globalProperties.$constl;if(!x)throw Error(" .");const E=new ({:x,_:__(n),_:t}),S=ref$1({});E._({:C=>{S.value=__(C)},:""}),_.config.globalProperties.$=E,_.provide("",S),_.provide("",E)}}),_=()=>({__,__,_,_,_,useI18n:useI18n_}),enregistrercoute=t=>{let n;const _=new EventEmitter$5;let x;const E=new Promise(S=>{once_1(_,"prt").then(()=>{S(x)})});return onMounted(async()=>{x=await t,x instanceof Function?n=x:n=x?.fOublier,_.emit("prt")}),onUnmounted(async()=>{n&&await n()}),E},enregistrercouteDynamique=({params:t,fcoute:n})=>{const _=ref$1();let x;const E=computed(()=>{const C=Object.fromEntries(Object.entries(t).map(([T,B])=>[T,B.value]));if(Object.values(C).every(T=>T!==void 0))return C}),S=async()=>{x&&await x(),E.value?x=await enregistrercoute(n(E.value,C=>_.value=C)):_.value=void 0};return watch(Object.values(t),S),S(),computed(()=>_.value)},enregistrerRecherche=({requte:t,rfRsultat:n,fRecherche:_,fRechercheDfaut:x})=>{let E,S;const C=ref$1(10),T=A=>!!A.fChangerProfondeur,B=async()=>{if(E&&await E(),t.value){const A=await _({requte:t.value,nOuProfondeur:C.value,rfRsultat:n});A&&(E=A.fOublier,S=T(A)?A.fChangerProfondeur:A.fChangerN)}else if(x){const A=await x({nOuProfondeur:C.value,rfRsultat:n});A&&(E=A.fOublier,S=T(A)?A.fChangerProfondeur:A.fChangerN)}else n.value=[]};return watch(t,B),B(),watchEffect(async()=>{S&&S(C.value)}),onUnmounted(async()=>{E&&await E()}),C};class MultiChercheur{constructor(){wt(this,"nOuProfondeur");wt(this,"fOublierRecherche");this.nOuProfondeur=ref$1(10),onUnmounted(async()=>{this.fOublierRecherche&&await this.fOublierRecherche()})}async lancerRecherche({requte:n,rfRsultat:_,fRecherche:x,fRechercheDfaut:E}){this.fOublierRecherche&&(await this.fOublierRecherche(),this.fOublierRecherche=void 0);let S,C;const T=A=>!!A.fChangerProfondeur,B=async()=>{if(S&&await S(),n.value){const A=await x({requte:n.value,nOuProfondeur:this.nOuProfondeur.value,rfRsultat:_});A&&(S=A.fOublier,C=T(A)?A.fChangerProfondeur:A.fChangerN)}else if(E){const A=await E({nOuProfondeur:this.nOuProfondeur.value,rfRsultat:_});A&&(S=A.fOublier,C=T(A)?A.fChangerProfondeur:A.fChangerN)}else _.value=[]};watch(n,B),B(),watchEffect(async()=>{C&&C(this.nOuProfondeur.value)}),this.fOublierRecherche=S}}var isVue2=!1;/*!
 * pinia v2.1.6
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=t=>activePinia=t,piniaSymbol=Symbol();function isPlainObject$1(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var MutationType;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const t=effectScope(!0),n=t.run(()=>ref$1({}));let _=[],x=[];const E=markRaw({install(S){setActivePinia(E),E._a=S,S.provide(piniaSymbol,E),S.config.globalProperties.$pinia=E,x.forEach(C=>_.push(C)),x=[]},use(S){return!this._a&&!isVue2?x.push(S):_.push(S),this},_p:_,_a:null,_e:t,_s:new Map,state:n});return E}const noop$6=()=>{};function addSubscription(t,n,_,x=noop$6){t.push(n);const E=()=>{const S=t.indexOf(n);S>-1&&(t.splice(S,1),x())};return!_&&getCurrentScope()&&onScopeDispose(E),E}function triggerSubscriptions(t,...n){t.slice().forEach(_=>{_(...n)})}const fallbackRunWithContext=t=>t();function mergeReactiveObjects(t,n){t instanceof Map&&n instanceof Map&&n.forEach((_,x)=>t.set(x,_)),t instanceof Set&&n instanceof Set&&n.forEach(t.add,t);for(const _ in n){if(!n.hasOwnProperty(_))continue;const x=n[_],E=t[_];isPlainObject$1(E)&&isPlainObject$1(x)&&t.hasOwnProperty(_)&&!isRef(x)&&!isReactive(x)?t[_]=mergeReactiveObjects(E,x):t[_]=x}return t}const skipHydrateSymbol=Symbol();function shouldHydrate(t){return!isPlainObject$1(t)||!t.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$3}=Object;function isComputed(t){return!!(isRef(t)&&t.effect)}function createOptionsStore(t,n,_,x){const{state:E,actions:S,getters:C}=n,T=_.state.value[t];let B;function A(){T||(_.state.value[t]=E?E():{});const I=toRefs(_.state.value[t]);return assign$3(I,S,Object.keys(C||{}).reduce((D,M)=>(D[M]=markRaw(computed(()=>{setActivePinia(_);const V=_._s.get(t);return C[M].call(V,V)})),D),{}))}return B=createSetupStore(t,A,n,_,x,!0),B}function createSetupStore(t,n,_={},x,E,S){let C;const T=assign$3({actions:{}},_),B={deep:!0};let A,I,D=[],M=[],V;const L=x.state.value[t];!S&&!L&&(x.state.value[t]={}),ref$1({});let F;function j(ce){let ue;A=I=!1,typeof ce=="function"?(ce(x.state.value[t]),ue={type:MutationType.patchFunction,storeId:t,events:V}):(mergeReactiveObjects(x.state.value[t],ce),ue={type:MutationType.patchObject,payload:ce,storeId:t,events:V});const _e=F=Symbol();nextTick$2().then(()=>{F===_e&&(A=!0)}),I=!0,triggerSubscriptions(D,ue,x.state.value[t])}const U=S?function(){const{state:ue}=_,_e=ue?ue():{};this.$patch(ye=>{assign$3(ye,_e)})}:noop$6;function H(){C.stop(),D=[],M=[],x._s.delete(t)}function Y(ce,ue){return function(){setActivePinia(x);const _e=Array.from(arguments),ye=[],ie=[];function W(J){ye.push(J)}function O(J){ie.push(J)}triggerSubscriptions(M,{args:_e,name:ce,store:ne,after:W,onError:O});let z;try{z=ue.apply(this&&this.$id===t?this:ne,_e)}catch(J){throw triggerSubscriptions(ie,J),J}return z instanceof Promise?z.then(J=>(triggerSubscriptions(ye,J),J)).catch(J=>(triggerSubscriptions(ie,J),Promise.reject(J))):(triggerSubscriptions(ye,z),z)}}const Z={_p:x,$id:t,$onAction:addSubscription.bind(null,M),$patch:j,$reset:U,$subscribe(ce,ue={}){const _e=addSubscription(D,ce,ue.detached,()=>ye()),ye=C.run(()=>watch(()=>x.state.value[t],ie=>{(ue.flush==="sync"?I:A)&&ce({storeId:t,type:MutationType.direct,events:V},ie)},assign$3({},B,ue)));return _e},$dispose:H},ne=reactive(Z);x._s.set(t,ne);const re=x._a&&x._a.runWithContext||fallbackRunWithContext,X=x._e.run(()=>(C=effectScope(),re(()=>C.run(n))));for(const ce in X){const ue=X[ce];if(isRef(ue)&&!isComputed(ue)||isReactive(ue))S||(L&&shouldHydrate(ue)&&(isRef(ue)?ue.value=L[ce]:mergeReactiveObjects(ue,L[ce])),x.state.value[t][ce]=ue);else if(typeof ue=="function"){const _e=Y(ce,ue);X[ce]=_e,T.actions[ce]=ue}}return assign$3(ne,X),assign$3(toRaw(ne),X),Object.defineProperty(ne,"$state",{get:()=>x.state.value[t],set:ce=>{j(ue=>{assign$3(ue,ce)})}}),x._p.forEach(ce=>{assign$3(ne,C.run(()=>ce({store:ne,app:x._a,pinia:x,options:T})))}),L&&S&&_.hydrate&&_.hydrate(ne.$state,L),A=!0,I=!0,ne}function defineStore(t,n,_){let x,E;const S=typeof n=="function";typeof t=="string"?(x=t,E=S?_:n):(E=t,x=t.id);function C(T,B){const A=hasInjectionContext();return T=T||(A?inject$1(piniaSymbol,null):null),T&&setActivePinia(T),T=activePinia,T._s.has(x)||(S?createSetupStore(x,n,E,T):createOptionsStore(x,E,T)),T._s.get(x)}return C.$id=x,C}function storeToRefs(t){{t=toRaw(t);const n={};for(const _ in t){const x=t[_];(isRef(x)||isReactive(x))&&(n[_]=toRef(t,_))}return n}}const IN_BROWSER=typeof window<"u",SUPPORTS_INTERSECTION=IN_BROWSER&&"IntersectionObserver"in window,SUPPORTS_TOUCH=IN_BROWSER&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);function _classPrivateFieldInitSpec(t,n,_){_checkPrivateRedeclaration$1(t,n),n.set(t,_)}function _checkPrivateRedeclaration$1(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet$1(t,n,_){var x=_classExtractFieldDescriptor$1(t,n,"set");return _classApplyDescriptorSet$1(t,x,_),_}function _classApplyDescriptorSet$1(t,n,_){if(n.set)n.set.call(t,_);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=_}}function _classPrivateFieldGet$1(t,n){var _=_classExtractFieldDescriptor$1(t,n,"get");return _classApplyDescriptorGet$1(t,_)}function _classExtractFieldDescriptor$1(t,n,_){if(!n.has(t))throw new TypeError("attempted to "+_+" private field on non-instance");return n.get(t)}function _classApplyDescriptorGet$1(t,n){return n.get?n.get.call(t):n.value}function getNestedValue(t,n,_){const x=n.length-1;if(x<0)return t===void 0?_:t;for(let E=0;E<x;E++){if(t==null)return _;t=t[n[E]]}return t==null||t[n[x]]===void 0?_:t[n[x]]}function deepEqual$3(t,n){if(t===n)return!0;if(t instanceof Date&&n instanceof Date&&t.getTime()!==n.getTime()||t!==Object(t)||n!==Object(n))return!1;const _=Object.keys(t);return _.length!==Object.keys(n).length?!1:_.every(x=>deepEqual$3(t[x],n[x]))}function getObjectValueByPath(t,n,_){return t==null||!n||typeof n!="string"?_:t[n]!==void 0?t[n]:(n=n.replace(/\[(\w+)\]/g,".$1"),n=n.replace(/^\./,""),getNestedValue(t,n.split("."),_))}function getPropertyFromItem(t,n,_){if(n==null)return t===void 0?_:t;if(t!==Object(t)){if(typeof n!="function")return _;const E=n(t,_);return typeof E>"u"?_:E}if(typeof n=="string")return getObjectValueByPath(t,n,_);if(Array.isArray(n))return getNestedValue(t,n,_);if(typeof n!="function")return _;const x=n(t,_);return typeof x>"u"?_:x}function createRange(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:t},(_,x)=>n+x)}function convertToUnit(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(t==null||t===""))return isNaN(+t)?String(t):isFinite(+t)?`${Number(t)}${n}`:void 0}function isObject$3(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function refElement(t){return t&&"$el"in t?t.$el:t}const keyCodes=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function keys$4(t){return Object.keys(t)}function has$3(t,n){return n.every(_=>t.hasOwnProperty(_))}function pick$1(t,n,_){const x=Object.create(null),E=Object.create(null);for(const S in t)n.some(C=>C instanceof RegExp?C.test(S):C===S)&&!_?.some(C=>C===S)?x[S]=t[S]:E[S]=t[S];return[x,E]}function omit(t,n){const _={...t};return n.forEach(x=>delete _[x]),_}const onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),bubblingEvents=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"];function filterInputAttrs(t){const[n,_]=pick$1(t,[onRE]),x=omit(n,bubblingEvents),[E,S]=pick$1(_,["class","style","id",/^data-/]);return Object.assign(E,n),Object.assign(S,x),[E,S]}function wrapInArray(t){return t==null?[]:Array.isArray(t)?t:[t]}function clamp(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(n,Math.min(_,t))}function padEnd(t,n){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return t+_.repeat(Math.max(0,n-t.length))}function chunk(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const _=[];let x=0;for(;x<t.length;)_.push(t.substr(x,n)),x+=n;return _}function mergeDeep(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2?arguments[2]:void 0;const x={};for(const E in t)x[E]=t[E];for(const E in n){const S=t[E],C=n[E];if(isObject$3(S)&&isObject$3(C)){x[E]=mergeDeep(S,C,_);continue}if(Array.isArray(S)&&Array.isArray(C)&&_){x[E]=_(S,C);continue}x[E]=C}return x}function flattenFragments(t){return t.map(n=>n.type===Fragment?flattenFragments(n.children):n).flat()}function toKebabCase(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(toKebabCase.cache.has(t))return toKebabCase.cache.get(t);const n=t.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return toKebabCase.cache.set(t,n),n}toKebabCase.cache=new Map;function findChildrenWithProvide(t,n){if(!n||typeof n!="object")return[];if(Array.isArray(n))return n.map(_=>findChildrenWithProvide(t,_)).flat(1);if(Array.isArray(n.children))return n.children.map(_=>findChildrenWithProvide(t,_)).flat(1);if(n.component){if(Object.getOwnPropertySymbols(n.component.provides).includes(t))return[n.component];if(n.component.subTree)return findChildrenWithProvide(t,n.component.subTree).flat(1)}return[]}var _arr=new WeakMap,_pointer=new WeakMap;class CircularBuffer{constructor(n){_classPrivateFieldInitSpec(this,_arr,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,_pointer,{writable:!0,value:0}),this.size=n}push(n){_classPrivateFieldGet$1(this,_arr)[_classPrivateFieldGet$1(this,_pointer)]=n,_classPrivateFieldSet$1(this,_pointer,(_classPrivateFieldGet$1(this,_pointer)+1)%this.size)}values(){return _classPrivateFieldGet$1(this,_arr).slice(_classPrivateFieldGet$1(this,_pointer)).concat(_classPrivateFieldGet$1(this,_arr).slice(0,_classPrivateFieldGet$1(this,_pointer)))}}function destructComputed(t){const n=reactive({}),_=computed(t);return watchEffect(()=>{for(const x in _.value)n[x]=_.value[x]},{flush:"sync"}),toRefs(n)}function includes(t,n){return t.includes(n)}function eventName(t){return t[2].toLowerCase()+t.slice(3)}const EventProp=()=>[Function,Array];function hasEvent(t,n){return n="on"+capitalize$1(n),!!(t[n]||t[`${n}Once`]||t[`${n}Capture`]||t[`${n}OnceCapture`]||t[`${n}CaptureOnce`])}function callEvent(t){for(var n=arguments.length,_=new Array(n>1?n-1:0),x=1;x<n;x++)_[x-1]=arguments[x];if(Array.isArray(t))for(const E of t)E(..._);else typeof t=="function"&&t(..._)}function focusableChildren(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const _=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(x=>`${x}${n?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...t.querySelectorAll(_)]}function getNextElement(t,n,_){let x,E=t.indexOf(document.activeElement);const S=n==="next"?1:-1;do E+=S,x=t[E];while((!x||x.offsetParent==null||!(_?.(x)??!0))&&E<t.length&&E>=0);return x}function focusChild(t,n){const _=focusableChildren(t);if(!n)(t===document.activeElement||!t.contains(document.activeElement))&&_[0]?.focus();else if(n==="first")_[0]?.focus();else if(n==="last")_.at(-1)?.focus();else if(typeof n=="number")_[n]?.focus();else{const x=getNextElement(_,n);x?x.focus():focusChild(t,n==="next"?"first":"last")}}function isEmpty(t){return t==null||typeof t=="string"&&t.trim()===""}function noop$5(){}function matchesSelector(t,n){if(!(IN_BROWSER&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${n})`)))return null;try{return!!t&&t.matches(n)}catch{return null}}const block=["top","bottom"],inline=["start","end","left","right"];function parseAnchor(t,n){let[_,x]=t.split(" ");return x||(x=includes(block,_)?"start":includes(inline,_)?"top":"center"),{side:toPhysical(_,n),align:toPhysical(x,n)}}function toPhysical(t,n){return t==="start"?n?"right":"left":t==="end"?n?"left":"right":t}function flipSide(t){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.side],align:t.align}}function flipAlign(t){return{side:t.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.align]}}function flipCorner(t){return{side:t.align,align:t.side}}function getAxis(t){return includes(block,t.side)?"y":"x"}class Box{constructor(n){let{x:_,y:x,width:E,height:S}=n;this.x=_,this.y=x,this.width=E,this.height=S}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function getOverflow(t,n){return{x:{before:Math.max(0,n.left-t.left),after:Math.max(0,t.right-n.right)},y:{before:Math.max(0,n.top-t.top),after:Math.max(0,t.bottom-n.bottom)}}}function nullifyTransforms(t){const n=t.getBoundingClientRect(),_=getComputedStyle(t),x=_.transform;if(x){let E,S,C,T,B;if(x.startsWith("matrix3d("))E=x.slice(9,-1).split(/, /),S=+E[0],C=+E[5],T=+E[12],B=+E[13];else if(x.startsWith("matrix("))E=x.slice(7,-1).split(/, /),S=+E[0],C=+E[3],T=+E[4],B=+E[5];else return new Box(n);const A=_.transformOrigin,I=n.x-T-(1-S)*parseFloat(A),D=n.y-B-(1-C)*parseFloat(A.slice(A.indexOf(" ")+1)),M=S?n.width/S:t.offsetWidth+1,V=C?n.height/C:t.offsetHeight+1;return new Box({x:I,y:D,width:M,height:V})}else return new Box(n)}function animate(t,n,_){if(typeof t.animate>"u")return{finished:Promise.resolve()};let x;try{x=t.animate(n,_)}catch{return{finished:Promise.resolve()}}return typeof x.finished>"u"&&(x.finished=new Promise(E=>{x.onfinish=()=>{E(x)}})),x}const handlers=new WeakMap;function bindProps(t,n){Object.keys(n).forEach(_=>{if(isOn(_)){const x=eventName(_),E=handlers.get(t);if(n[_]==null)E?.forEach(S=>{const[C,T]=S;C===x&&(t.removeEventListener(x,T),E.delete(S))});else if(!E||![...E].some(S=>S[0]===x&&S[1]===n[_])){t.addEventListener(x,n[_]);const S=E||new Set;S.add([x,n[_]]),handlers.has(t)||handlers.set(t,S)}}else n[_]==null?t.removeAttribute(_):t.setAttribute(_,n[_])})}function unbindProps(t,n){Object.keys(n).forEach(_=>{if(isOn(_)){const x=eventName(_),E=handlers.get(t);E?.forEach(S=>{const[C,T]=S;C===x&&(t.removeEventListener(x,T),E.delete(S))})}else t.removeAttribute(_)})}const mainTRC=2.4,Rco=.2126729,Gco=.7151522,Bco=.072175,normBG=.55,normTXT=.58,revTXT=.57,revBG=.62,blkThrs=.03,blkClmp=1.45,deltaYmin=5e-4,scaleBoW=1.25,scaleWoB=1.25,loConThresh=.078,loConFactor=12.82051282051282,loConOffset=.06,loClip=.001;function APCAcontrast(t,n){const _=(t.r/255)**mainTRC,x=(t.g/255)**mainTRC,E=(t.b/255)**mainTRC,S=(n.r/255)**mainTRC,C=(n.g/255)**mainTRC,T=(n.b/255)**mainTRC;let B=_*Rco+x*Gco+E*Bco,A=S*Rco+C*Gco+T*Bco;if(B<=blkThrs&&(B+=(blkThrs-B)**blkClmp),A<=blkThrs&&(A+=(blkThrs-A)**blkClmp),Math.abs(A-B)<deltaYmin)return 0;let I;if(A>B){const D=(A**normBG-B**normTXT)*scaleBoW;I=D<loClip?0:D<loConThresh?D-D*loConFactor*loConOffset:D-loConOffset}else{const D=(A**revBG-B**revTXT)*scaleWoB;I=D>-loClip?0:D>-loConThresh?D-D*loConFactor*loConOffset:D+loConOffset}return I*100}function consoleWarn(t){}function deprecate(t,n){n=Array.isArray(n)?n.slice(0,-1).map(_=>`'${_}'`).join(", ")+` or '${n.at(-1)}'`:`'${n}'`}const delta=.20689655172413793,cielabForwardTransform=t=>t>delta**3?Math.cbrt(t):t/(3*delta**2)+4/29,cielabReverseTransform=t=>t>delta?t**3:3*delta**2*(t-4/29);function fromXYZ$1(t){const n=cielabForwardTransform,_=n(t[1]);return[116*_-16,500*(n(t[0]/.95047)-_),200*(_-n(t[2]/1.08883))]}function toXYZ$1(t){const n=cielabReverseTransform,_=(t[0]+16)/116;return[n(_+t[1]/500)*.95047,n(_),n(_-t[2]/200)*1.08883]}const srgbForwardMatrix=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],srgbForwardTransform=t=>t<=.0031308?t*12.92:1.055*t**(1/2.4)-.055,srgbReverseMatrix=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],srgbReverseTransform=t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4;function fromXYZ(t){const n=Array(3),_=srgbForwardTransform,x=srgbForwardMatrix;for(let E=0;E<3;++E)n[E]=Math.round(clamp(_(x[E][0]*t[0]+x[E][1]*t[1]+x[E][2]*t[2]))*255);return{r:n[0],g:n[1],b:n[2]}}function toXYZ(t){let{r:n,g:_,b:x}=t;const E=[0,0,0],S=srgbReverseTransform,C=srgbReverseMatrix;n=S(n/255),_=S(_/255),x=S(x/255);for(let T=0;T<3;++T)E[T]=C[T][0]*n+C[T][1]*_+C[T][2]*x;return E}function isCssColor(t){return!!t&&/^(#|var\(--|(rgb|hsl)a?\()/.test(t)}const cssColorRe=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,mappers={rgb:(t,n,_,x)=>({r:t,g:n,b:_,a:x}),rgba:(t,n,_,x)=>({r:t,g:n,b:_,a:x}),hsl:(t,n,_,x)=>HSLtoRGB({h:t,s:n,l:_,a:x}),hsla:(t,n,_,x)=>HSLtoRGB({h:t,s:n,l:_,a:x}),hsv:(t,n,_,x)=>HSVtoRGB({h:t,s:n,v:_,a:x}),hsva:(t,n,_,x)=>HSVtoRGB({h:t,s:n,v:_,a:x})};function parseColor(t){if(typeof t=="number")return{r:(t&16711680)>>16,g:(t&65280)>>8,b:t&255};if(typeof t=="string"&&cssColorRe.test(t)){const{groups:n}=t.match(cssColorRe),{fn:_,values:x}=n,E=x.split(/,\s*/).map(S=>S.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(_)?parseFloat(S)/100:parseFloat(S));return mappers[_](...E)}else if(typeof t=="string"){let n=t.startsWith("#")?t.slice(1):t;return[3,4].includes(n.length)?n=n.split("").map(_=>_+_).join(""):[6,8].includes(n.length),HexToRGB(n)}else if(typeof t=="object"){if(has$3(t,["r","g","b"]))return t;if(has$3(t,["h","s","l"]))return HSVtoRGB(HSLtoHSV(t));if(has$3(t,["h","s","v"]))return HSVtoRGB(t)}throw new TypeError(`Invalid color: ${t==null?t:String(t)||t.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function HSVtoRGB(t){const{h:n,s:_,v:x,a:E}=t,S=T=>{const B=(T+n/60)%6;return x-x*_*Math.max(Math.min(B,4-B,1),0)},C=[S(5),S(3),S(1)].map(T=>Math.round(T*255));return{r:C[0],g:C[1],b:C[2],a:E}}function HSLtoRGB(t){return HSVtoRGB(HSLtoHSV(t))}function HSLtoHSV(t){const{h:n,s:_,l:x,a:E}=t,S=x+_*Math.min(x,1-x),C=S===0?0:2-2*x/S;return{h:n,s:C,v:S,a:E}}function toHex$2(t){const n=Math.round(t).toString(16);return("00".substr(0,2-n.length)+n).toUpperCase()}function RGBtoHex(t){let{r:n,g:_,b:x,a:E}=t;return`#${[toHex$2(n),toHex$2(_),toHex$2(x),E!==void 0?toHex$2(Math.round(E*255)):""].join("")}`}function HexToRGB(t){t=parseHex(t);let[n,_,x,E]=chunk(t,2).map(S=>parseInt(S,16));return E=E===void 0?E:E/255,{r:n,g:_,b:x,a:E}}function parseHex(t){return t.startsWith("#")&&(t=t.slice(1)),t=t.replace(/([^0-9a-f])/gi,"F"),(t.length===3||t.length===4)&&(t=t.split("").map(n=>n+n).join("")),t.length!==6&&(t=padEnd(padEnd(t,6),8,"F")),t}function lighten(t,n){const _=fromXYZ$1(toXYZ(t));return _[0]=_[0]+n*10,fromXYZ(toXYZ$1(_))}function darken(t,n){const _=fromXYZ$1(toXYZ(t));return _[0]=_[0]-n*10,fromXYZ(toXYZ$1(_))}function getLuma(t){const n=parseColor(t);return toXYZ(n)[1]}function getForeground(t){const n=Math.abs(APCAcontrast(parseColor(0),parseColor(t)));return Math.abs(APCAcontrast(parseColor(16777215),parseColor(t)))>Math.min(n,50)?"#fff":"#000"}function propsFactory(t,n){return _=>Object.keys(t).reduce((x,E)=>{const C=typeof t[E]=="object"&&t[E]!=null&&!Array.isArray(t[E])?t[E]:{type:t[E]};return _&&E in _?x[E]={...C,default:_[E]}:x[E]=C,n&&!x[E].source&&(x[E].source=n),x},{})}const makeComponentProps=propsFactory({class:[String,Array],style:{type:[String,Array,Object],default:null}},"component");function defineComponent(t){if(t._setup=t._setup??t.setup,!t.name)return t;if(t._setup){t.props=propsFactory(t.props??{},t.name)();const n=Object.keys(t.props);t.filterProps=function(x){return pick$1(x,n,["class","style"])},t.props._as=String,t.setup=function(x,E){const S=injectDefaults();if(!S.value)return t._setup(x,E);const{props:C,provideSubDefaults:T}=internalUseDefaults(x,x._as??t.name,S),B=t._setup(C,E);return T(),B}}return t}function genericComponent(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n=>(t?defineComponent:defineComponent$1)(n)}function defineFunctionalComponent(t,n){return n.props=t,n}function createSimpleFunctional(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",_=arguments.length>2?arguments[2]:void 0;return genericComponent()({name:_??capitalize$1(camelize(t.replace(/__/g,"-"))),props:{tag:{type:String,default:n},...makeComponentProps()},setup(x,E){let{slots:S}=E;return()=>h$1(x.tag,{class:[t,x.class],style:x.style},S.default?.())}})}function attachedRoot(t){if(typeof t.getRootNode!="function"){for(;t.parentNode;)t=t.parentNode;return t!==document?null:document}const n=t.getRootNode();return n!==document&&n.getRootNode({composed:!0})!==document?null:n}const standardEasing="cubic-bezier(0.4, 0, 0.2, 1)",deceleratedEasing="cubic-bezier(0.0, 0, 0.2, 1)",acceleratedEasing="cubic-bezier(0.4, 0, 1, 1)";function getCurrentInstance(t,n){const _=getCurrentInstance$1();if(!_)throw new Error(`[Vuetify] ${t} ${n||"must be called from inside a setup function"}`);return _}function getCurrentInstanceName(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const n=getCurrentInstance(t).type;return toKebabCase(n?.aliasName||n?.name)}let _uid=0,_map=new WeakMap;function getUid(){const t=getCurrentInstance("getUid");if(_map.has(t))return _map.get(t);{const n=_uid++;return _map.set(t,n),n}}getUid.reset=()=>{_uid=0,_map=new WeakMap};function getScrollParent(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;t;){if(n?isPotentiallyScrollable(t):hasScrollbar(t))return t;t=t.parentElement}return document.scrollingElement}function getScrollParents(t,n){const _=[];if(n&&t&&!n.contains(t))return _;for(;t&&(hasScrollbar(t)&&_.push(t),t!==n);)t=t.parentElement;return _}function hasScrollbar(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(t);return n.overflowY==="scroll"||n.overflowY==="auto"&&t.scrollHeight>t.clientHeight}function isPotentiallyScrollable(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const n=window.getComputedStyle(t);return["scroll","auto"].includes(n.overflowY)}function injectSelf(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstance("injectSelf");const{provides:_}=n;if(_&&t in _)return _[t]}function isFixedPosition(t){for(;t;){if(window.getComputedStyle(t).position==="fixed")return!0;t=t.offsetParent}return!1}function useRender(t){const n=getCurrentInstance("useRender");n.render=t}const DefaultsSymbol=Symbol.for("vuetify:defaults");function createDefaults(t){return ref$1(t)}function injectDefaults(){const t=inject$1(DefaultsSymbol);if(!t)throw new Error("[Vuetify] Could not find defaults instance");return t}function provideDefaults(t,n){const _=injectDefaults(),x=ref$1(t),E=computed(()=>{if(unref(n?.disabled))return _.value;const C=unref(n?.scoped),T=unref(n?.reset),B=unref(n?.root);if(x.value==null&&!(C||T||B))return _.value;let A=mergeDeep(x.value,{prev:_.value});if(C)return A;if(T||B){const I=Number(T||1/0);for(let D=0;D<=I&&!(!A||!("prev"in A));D++)A=A.prev;return A&&typeof B=="string"&&B in A&&(A=mergeDeep(mergeDeep(A,{prev:A}),A[B])),A}return A.prev?mergeDeep(A.prev,A):A});return provide(DefaultsSymbol,E),E}function propIsDefined(t,n){return typeof t.props?.[n]<"u"||typeof t.props?.[toKebabCase(n)]<"u"}function internalUseDefaults(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:injectDefaults();const x=getCurrentInstance("useDefaults");if(n=n??x.type.name??x.type.__name,!n)throw new Error("[Vuetify] Could not determine component name");const E=computed(()=>_.value?.[t._as??n]),S=new Proxy(t,{get(B,A){const I=Reflect.get(B,A);return A==="class"||A==="style"?[E.value?.[A],I].filter(D=>D!=null):typeof A=="string"&&!propIsDefined(x.vnode,A)?E.value?.[A]??_.value?.global?.[A]??I:I}}),C=shallowRef();watchEffect(()=>{if(E.value){const B=Object.entries(E.value).filter(A=>{let[I]=A;return I.startsWith(I[0].toUpperCase())});C.value=B.length?Object.fromEntries(B):void 0}else C.value=void 0});function T(){const B=injectSelf(DefaultsSymbol,x);provide(DefaultsSymbol,computed(()=>C.value?mergeDeep(B?.value??{},C.value):B?.value))}return{props:S,provideSubDefaults:T}}const breakpoints=["sm","md","lg","xl","xxl"],DisplaySymbol=Symbol.for("vuetify:display"),defaultDisplayOptions={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},parseDisplayOptions=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultDisplayOptions;return mergeDeep(defaultDisplayOptions,t)};function getClientWidth(t){return IN_BROWSER&&!t?window.innerWidth:typeof t=="object"&&t.clientWidth||0}function getClientHeight(t){return IN_BROWSER&&!t?window.innerHeight:typeof t=="object"&&t.clientHeight||0}function getPlatform(t){const n=IN_BROWSER&&!t?window.navigator.userAgent:"ssr";function _(L){return!!n.match(L)}const x=_(/android/i),E=_(/iphone|ipad|ipod/i),S=_(/cordova/i),C=_(/electron/i),T=_(/chrome/i),B=_(/edge/i),A=_(/firefox/i),I=_(/opera/i),D=_(/win/i),M=_(/mac/i),V=_(/linux/i);return{android:x,ios:E,cordova:S,electron:C,chrome:T,edge:B,firefox:A,opera:I,win:D,mac:M,linux:V,touch:SUPPORTS_TOUCH,ssr:n==="ssr"}}function createDisplay(t,n){const{thresholds:_,mobileBreakpoint:x}=parseDisplayOptions(t),E=shallowRef(getClientHeight(n)),S=shallowRef(getPlatform(n)),C=reactive({}),T=shallowRef(getClientWidth(n));function B(){E.value=getClientHeight(),T.value=getClientWidth()}function A(){B(),S.value=getPlatform()}return watchEffect(()=>{const I=T.value<_.sm,D=T.value<_.md&&!I,M=T.value<_.lg&&!(D||I),V=T.value<_.xl&&!(M||D||I),L=T.value<_.xxl&&!(V||M||D||I),F=T.value>=_.xxl,j=I?"xs":D?"sm":M?"md":V?"lg":L?"xl":"xxl",U=typeof x=="number"?x:_[x],H=T.value<U;C.xs=I,C.sm=D,C.md=M,C.lg=V,C.xl=L,C.xxl=F,C.smAndUp=!I,C.mdAndUp=!(I||D),C.lgAndUp=!(I||D||M),C.xlAndUp=!(I||D||M||V),C.smAndDown=!(M||V||L||F),C.mdAndDown=!(V||L||F),C.lgAndDown=!(L||F),C.xlAndDown=!F,C.name=j,C.height=E.value,C.width=T.value,C.mobile=H,C.mobileBreakpoint=x,C.platform=S.value,C.thresholds=_}),IN_BROWSER&&window.addEventListener("resize",B,{passive:!0}),{...toRefs(C),update:A,ssr:!!n}}function useDisplay(){const t=inject$1(DisplaySymbol);if(!t)throw new Error("Could not find Vuetify display injection");return t}const aliases$1={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar"},mdi={component:t=>h$1(VClassIcon,{...t,class:"mdi"})},IconValue=[String,Function,Object,Array],IconSymbol=Symbol.for("vuetify:icons"),makeIconProps=propsFactory({icon:{type:IconValue},tag:{type:String,required:!0}},"icon"),VComponentIcon=genericComponent()({name:"VComponentIcon",props:makeIconProps(),setup(t,n){let{slots:_}=n;return()=>{const x=t.icon;return createVNode(t.tag,null,{default:()=>[t.icon?createVNode(x,null,null):_.default?.()]})}}}),VSvgIcon=defineComponent({name:"VSvgIcon",inheritAttrs:!1,props:makeIconProps(),setup(t,n){let{attrs:_}=n;return()=>createVNode(t.tag,mergeProps(_,{style:null}),{default:()=>[createVNode("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(t.icon)?t.icon.map(x=>Array.isArray(x)?createVNode("path",{d:x[0],"fill-opacity":x[1]},null):createVNode("path",{d:x},null)):createVNode("path",{d:t.icon},null)])]})}});defineComponent({name:"VLigatureIcon",props:makeIconProps(),setup(t){return()=>createVNode(t.tag,null,{default:()=>[t.icon]})}});const VClassIcon=defineComponent({name:"VClassIcon",props:makeIconProps(),setup(t){return()=>createVNode(t.tag,{class:t.icon},null)}}),defaultSets={svg:{component:VSvgIcon},class:{component:VClassIcon}};function createIcons(t){return mergeDeep({defaultSet:"mdi",sets:{...defaultSets,mdi},aliases:{...aliases$1,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z"}},t)}const useIcon=t=>{const n=inject$1(IconSymbol);if(!n)throw new Error("Missing Vuetify Icons provide!");return{iconData:computed(()=>{const x=unref(t);if(!x)return{component:VComponentIcon};let E=x;if(typeof E=="string"&&(E=E.trim(),E.startsWith("$")&&(E=n.aliases?.[E.slice(1)])),!E)throw new Error(`Could not find aliased icon "${x}"`);if(Array.isArray(E))return{component:VSvgIcon,icon:E};if(typeof E!="string")return{component:VComponentIcon,icon:E};const S=Object.keys(n.sets).find(B=>typeof E=="string"&&E.startsWith(`${B}:`)),C=S?E.slice(S.length+1):E;return{component:n.sets[S??n.defaultSet].component,icon:C}})}},en={badge:"Badge",open:"Open",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{ok:"OK",cancel:"Cancel",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},defaultRtl={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1};function useToggleScope(t,n){let _;function x(){_=effectScope(),_.run(()=>n.length?n(()=>{_?.stop(),x()}):n())}watch(t,E=>{E&&!_?x():E||(_?.stop(),_=void 0)},{immediate:!0}),onScopeDispose(()=>{_?.stop()})}function useProxiedModel(t,n,_){let x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:D=>D,E=arguments.length>4&&arguments[4]!==void 0?arguments[4]:D=>D;const S=getCurrentInstance("useProxiedModel"),C=ref$1(t[n]!==void 0?t[n]:_),T=toKebabCase(n),A=computed(T!==n?()=>(t[n],!!((S.vnode.props?.hasOwnProperty(n)||S.vnode.props?.hasOwnProperty(T))&&(S.vnode.props?.hasOwnProperty(`onUpdate:${n}`)||S.vnode.props?.hasOwnProperty(`onUpdate:${T}`)))):()=>(t[n],!!(S.vnode.props?.hasOwnProperty(n)&&S.vnode.props?.hasOwnProperty(`onUpdate:${n}`))));useToggleScope(()=>!A.value,()=>{watch(()=>t[n],D=>{C.value=D})});const I=computed({get(){const D=t[n];return x(A.value?D:C.value)},set(D){const M=E(D),V=toRaw(A.value?t[n]:C.value);V===M||x(V)===D||(C.value=M,S?.emit(`update:${n}`,M))}});return Object.defineProperty(I,"externalValue",{get:()=>A.value?t[n]:C.value}),I}const LANG_PREFIX="$vuetify.",replace=(t,n)=>t.replace(/\{(\d+)\}/g,(_,x)=>String(n[+x])),createTranslateFunction=(t,n,_)=>function(x){for(var E=arguments.length,S=new Array(E>1?E-1:0),C=1;C<E;C++)S[C-1]=arguments[C];if(!x.startsWith(LANG_PREFIX))return replace(x,S);const T=x.replace(LANG_PREFIX,""),B=t.value&&_.value[t.value],A=n.value&&_.value[n.value];let I=getObjectValueByPath(B,T,null);return I||(`${x}${t.value}`,I=getObjectValueByPath(A,T,null)),I||(I=x),typeof I!="string"&&(I=x),replace(I,S)};function createNumberFunction(t,n){return(_,x)=>new Intl.NumberFormat([t.value,n.value],x).format(_)}function useProvided(t,n,_){const x=useProxiedModel(t,n,t[n]??_.value);return x.value=t[n]??_.value,watch(_,E=>{t[n]==null&&(x.value=_.value)}),x}function createProvideFunction(t){return n=>{const _=useProvided(n,"locale",t.current),x=useProvided(n,"fallback",t.fallback),E=useProvided(n,"messages",t.messages);return{name:"vuetify",current:_,fallback:x,messages:E,t:createTranslateFunction(_,x,E),n:createNumberFunction(_,x),provide:createProvideFunction({current:_,fallback:x,messages:E})}}}function createVuetifyAdapter(t){const n=shallowRef(t?.locale??"en"),_=shallowRef(t?.fallback??"en"),x=ref$1({en,...t?.messages});return{name:"vuetify",current:n,fallback:_,messages:x,t:createTranslateFunction(n,_,x),n:createNumberFunction(n,_),provide:createProvideFunction({current:n,fallback:_,messages:x})}}const LocaleSymbol=Symbol.for("vuetify:locale");function isLocaleInstance(t){return t.name!=null}function createLocale(t){const n=t?.adapter&&isLocaleInstance(t?.adapter)?t?.adapter:createVuetifyAdapter(t),_=createRtl(n,t);return{...n,..._}}function useLocale(){const t=inject$1(LocaleSymbol);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");return t}function provideLocale(t){const n=inject$1(LocaleSymbol);if(!n)throw new Error("[Vuetify] Could not find injected locale instance");const _=n.provide(t),x=provideRtl(_,n.rtl,t),E={..._,...x};return provide(LocaleSymbol,E),E}function createRtl(t,n){const _=ref$1(n?.rtl??defaultRtl),x=computed(()=>_.value[t.current.value]??!1);return{isRtl:x,rtl:_,rtlClasses:computed(()=>`v-locale--is-${x.value?"rtl":"ltr"}`)}}function provideRtl(t,n,_){const x=computed(()=>_.rtl??n.value[t.current.value]??!1);return{isRtl:x,rtl:n,rtlClasses:computed(()=>`v-locale--is-${x.value?"rtl":"ltr"}`)}}function useRtl(){const t=inject$1(LocaleSymbol);if(!t)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:t.isRtl,rtlClasses:t.rtlClasses}}const ThemeSymbol=Symbol.for("vuetify:theme"),makeThemeProps=propsFactory({theme:String},"theme"),defaultThemeOptions={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function parseThemeOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultThemeOptions;if(!t)return{...defaultThemeOptions,isDisabled:!0};const n={};for(const[_,x]of Object.entries(t.themes??{})){const E=x.dark||_==="dark"?defaultThemeOptions.themes?.dark:defaultThemeOptions.themes?.light;n[_]=mergeDeep(E,x)}return mergeDeep(defaultThemeOptions,{...t,themes:n})}function createTheme(t){const n=parseThemeOptions(t),_=ref$1(n.defaultTheme),x=ref$1(n.themes),E=computed(()=>{const I={};for(const[D,M]of Object.entries(x.value)){const V=I[D]={...M,colors:{...M.colors}};if(n.variations)for(const L of n.variations.colors){const F=V.colors[L];if(F)for(const j of["lighten","darken"]){const U=j==="lighten"?lighten:darken;for(const H of createRange(n.variations[j],1))V.colors[`${L}-${j}-${H}`]=RGBtoHex(U(parseColor(F),H))}}for(const L of Object.keys(V.colors)){if(/^on-[a-z]/.test(L)||V.colors[`on-${L}`])continue;const F=`on-${L}`,j=parseColor(V.colors[L]);V.colors[F]=getForeground(j)}}return I}),S=computed(()=>E.value[_.value]),C=computed(()=>{const I=[];S.value.dark&&createCssClass(I,":root",["color-scheme: dark"]),createCssClass(I,":root",genCssVariables(S.value));for(const[L,F]of Object.entries(E.value))createCssClass(I,`.v-theme--${L}`,[`color-scheme: ${F.dark?"dark":"normal"}`,...genCssVariables(F)]);const D=[],M=[],V=new Set(Object.values(E.value).flatMap(L=>Object.keys(L.colors)));for(const L of V)/^on-[a-z]/.test(L)?createCssClass(M,`.${L}`,[`color: rgb(var(--v-theme-${L})) !important`]):(createCssClass(D,`.bg-${L}`,[`--v-theme-overlay-multiplier: var(--v-theme-${L}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${L})) !important`,`color: rgb(var(--v-theme-on-${L})) !important`]),createCssClass(M,`.text-${L}`,[`color: rgb(var(--v-theme-${L})) !important`]),createCssClass(M,`.border-${L}`,[`--v-border-color: var(--v-theme-${L})`]));return I.push(...D,...M),I.map((L,F)=>F===0?L:`    ${L}`).join("")});function T(){return{style:[{children:C.value,id:"vuetify-theme-stylesheet",nonce:n.cspNonce||!1}]}}function B(I){if(n.isDisabled)return;const D=I._context.provides.usehead;if(D)if(D.push){const M=D.push(T);IN_BROWSER&&watch(C,()=>{M.patch(T)})}else IN_BROWSER?(D.addHeadObjs(computed(T)),watchEffect(()=>D.updateDOM())):D.addHeadObjs(T());else{let V=function(){if(typeof document<"u"&&!M){const L=document.createElement("style");L.type="text/css",L.id="vuetify-theme-stylesheet",n.cspNonce&&L.setAttribute("nonce",n.cspNonce),M=L,document.head.appendChild(M)}M&&(M.innerHTML=C.value)},M=IN_BROWSER?document.getElementById("vuetify-theme-stylesheet"):null;IN_BROWSER?watch(C,V,{immediate:!0}):V()}}const A=computed(()=>n.isDisabled?void 0:`v-theme--${_.value}`);return{install:B,isDisabled:n.isDisabled,name:_,themes:x,current:S,computedThemes:E,themeClasses:A,styles:C,global:{name:_,current:S}}}function provideTheme(t){getCurrentInstance("provideTheme");const n=inject$1(ThemeSymbol,null);if(!n)throw new Error("Could not find Vuetify theme injection");const _=computed(()=>t.theme??n?.name.value),x=computed(()=>n.isDisabled?void 0:`v-theme--${_.value}`),E={...n,name:_,themeClasses:x};return provide(ThemeSymbol,E),E}function useTheme(){getCurrentInstance("useTheme");const t=inject$1(ThemeSymbol,null);if(!t)throw new Error("Could not find Vuetify theme injection");return t}function createCssClass(t,n,_){t.push(`${n} {
`,..._.map(x=>`  ${x};
`),`}
`)}function genCssVariables(t){const n=t.dark?2:1,_=t.dark?1:2,x=[];for(const[E,S]of Object.entries(t.colors)){const C=parseColor(S);x.push(`--v-theme-${E}: ${C.r},${C.g},${C.b}`),E.startsWith("on-")||x.push(`--v-theme-${E}-overlay-multiplier: ${getLuma(S)>.18?n:_}`)}for(const[E,S]of Object.entries(t.variables)){const C=typeof S=="string"&&S.startsWith("#")?parseColor(S):void 0,T=C?`${C.r}, ${C.g}, ${C.b}`:void 0;x.push(`--v-${E}: ${T??S}`)}return x}const firstDay={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function getWeekArray(t,n){const _=[];let x=[];const E=startOfMonth(t),S=endOfMonth(t),C=E.getDay()-firstDay[n.slice(-2).toUpperCase()],T=S.getDay()-firstDay[n.slice(-2).toUpperCase()];for(let B=0;B<C;B++){const A=new Date(E);A.setDate(A.getDate()-(C-B)),x.push(A)}for(let B=1;B<=S.getDate();B++){const A=new Date(t.getFullYear(),t.getMonth(),B);x.push(A),x.length===7&&(_.push(x),x=[])}for(let B=1;B<7-T;B++){const A=new Date(S);A.setDate(A.getDate()+B),x.push(A)}return _.push(x),_}function startOfMonth(t){return new Date(t.getFullYear(),t.getMonth(),1)}function endOfMonth(t){return new Date(t.getFullYear(),t.getMonth()+1,0)}function parseLocalDate(t){const n=t.split("-").map(Number);return new Date(n[0],n[1]-1,n[2])}const _YYYMMDD=/([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))/;function date(t){if(t==null)return new Date;if(t instanceof Date)return t;if(typeof t=="string"){let n;if(_YYYMMDD.test(t))return parseLocalDate(t);if(n=Date.parse(t),!isNaN(n))return new Date(n)}return null}const sundayJanuarySecond2000=new Date(2e3,0,2);function getWeekdays(t){const n=firstDay[t.slice(-2).toUpperCase()];return createRange(7).map(_=>{const x=new Date(sundayJanuarySecond2000);return x.setDate(sundayJanuarySecond2000.getDate()+n+_),new Intl.DateTimeFormat(t,{weekday:"narrow"}).format(x)})}function format$7(t,n,_){const x=new Date(t);let E={};switch(n){case"fullDateWithWeekday":E={weekday:"long",day:"numeric",month:"long",year:"numeric"};break;case"normalDateWithWeekday":E={weekday:"short",day:"numeric",month:"short"};break;case"keyboardDate":E={};break;case"monthAndDate":E={month:"long",day:"numeric"};break;case"monthAndYear":E={month:"long",year:"numeric"};break;case"dayOfMonth":E={day:"numeric"};break;default:E={timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(_,E).format(x)}function addDays(t,n){const _=new Date(t);return _.setDate(_.getDate()+n),_}function addMonths(t,n){const _=new Date(t);return _.setMonth(_.getMonth()+n),_}function getYear(t){return t.getFullYear()}function getMonth(t){return t.getMonth()}function startOfYear(t){return new Date(t.getFullYear(),0,1)}function endOfYear(t){return new Date(t.getFullYear(),11,31)}function isWithinRange(t,n){return isAfter(t,n[0])&&isBefore(t,n[1])}function isValid(t){const n=new Date(t);return n instanceof Date&&!isNaN(n.getTime())}function isAfter(t,n){return t.getTime()>n.getTime()}function isBefore(t,n){return t.getTime()<n.getTime()}function isEqual(t,n){return t.getTime()===n.getTime()}function isSameDay(t,n){return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}function isSameMonth(t,n){return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}function getDiff(t,n,_){const x=new Date(t),E=new Date(n);return _==="month"?x.getMonth()-E.getMonth()+(x.getFullYear()-E.getFullYear())*12:Math.floor((x.getTime()-E.getTime())/(1e3*60*60*24))}function setYear(t,n){const _=new Date(t);return _.setFullYear(n),_}class VuetifyDateAdapter{constructor(n){this.locale=n.locale}date(n){return date(n)}toJsDate(n){return n}addDays(n,_){return addDays(n,_)}addMonths(n,_){return addMonths(n,_)}getWeekArray(n){return getWeekArray(n,this.locale)}startOfMonth(n){return startOfMonth(n)}endOfMonth(n){return endOfMonth(n)}format(n,_){return format$7(n,_,this.locale)}isEqual(n,_){return isEqual(n,_)}isValid(n){return isValid(n)}isWithinRange(n,_){return isWithinRange(n,_)}isAfter(n,_){return isAfter(n,_)}isBefore(n,_){return!isAfter(n,_)&&!isEqual(n,_)}isSameDay(n,_){return isSameDay(n,_)}isSameMonth(n,_){return isSameMonth(n,_)}setYear(n,_){return setYear(n,_)}getDiff(n,_,x){return getDiff(n,_,x)}getWeekdays(){return getWeekdays(this.locale)}getYear(n){return getYear(n)}getMonth(n){return getMonth(n)}startOfYear(n){return startOfYear(n)}endOfYear(n){return endOfYear(n)}}const DateAdapterSymbol=Symbol.for("vuetify:date-adapter");function createDate(t){return mergeDeep({adapter:VuetifyDateAdapter,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"nn-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},t)}function useResizeObserver(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const _=ref$1(),x=ref$1();if(IN_BROWSER){const E=new ResizeObserver(S=>{t?.(S,E),S.length&&(n==="content"?x.value=S[0].contentRect:x.value=S[0].target.getBoundingClientRect())});onBeforeUnmount(()=>{E.disconnect()}),watch(_,(S,C)=>{C&&(E.unobserve(refElement(C)),x.value=void 0),S&&E.observe(refElement(S))},{flush:"post"})}return{resizeRef:_,contentRect:readonly$3(x)}}const VuetifyLayoutKey=Symbol.for("vuetify:layout"),VuetifyLayoutItemKey=Symbol.for("vuetify:layout-item"),ROOT_ZINDEX=1e3,makeLayoutProps=propsFactory({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),makeLayoutItemProps=propsFactory({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function useLayout(){const t=inject$1(VuetifyLayoutKey);if(!t)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:t.getLayoutItem,mainRect:t.mainRect,mainStyles:t.mainStyles}}function useLayoutItem(t){const n=inject$1(VuetifyLayoutKey);if(!n)throw new Error("[Vuetify] Could not find injected layout");const _=t.id??`layout-item-${getUid()}`,x=getCurrentInstance("useLayoutItem");provide(VuetifyLayoutItemKey,{id:_});const E=shallowRef(!1);onDeactivated(()=>E.value=!0),onActivated(()=>E.value=!1);const{layoutItemStyles:S,layoutItemScrimStyles:C}=n.register(x,{...t,active:computed(()=>E.value?!1:t.active.value),id:_});return onBeforeUnmount(()=>n.unregister(_)),{layoutItemStyles:S,layoutRect:n.layoutRect,layoutItemScrimStyles:C}}const generateLayers=(t,n,_,x)=>{let E={top:0,left:0,right:0,bottom:0};const S=[{id:"",layer:{...E}}];for(const C of t){const T=n.get(C),B=_.get(C),A=x.get(C);if(!T||!B||!A)continue;const I={...E,[T.value]:parseInt(E[T.value],10)+(A.value?parseInt(B.value,10):0)};S.push({id:C,layer:I}),E=I}return S};function createLayout(t){const n=inject$1(VuetifyLayoutKey,null),_=computed(()=>n?n.rootZIndex.value-100:ROOT_ZINDEX),x=ref$1([]),E=reactive(new Map),S=reactive(new Map),C=reactive(new Map),T=reactive(new Map),B=reactive(new Map),{resizeRef:A,contentRect:I}=useResizeObserver(),D=computed(()=>{const re=new Map,X=t.overlaps??[];for(const ce of X.filter(ue=>ue.includes(":"))){const[ue,_e]=ce.split(":");if(!x.value.includes(ue)||!x.value.includes(_e))continue;const ye=E.get(ue),ie=E.get(_e),W=S.get(ue),O=S.get(_e);!ye||!ie||!W||!O||(re.set(_e,{position:ye.value,amount:parseInt(W.value,10)}),re.set(ue,{position:ie.value,amount:-parseInt(O.value,10)}))}return re}),M=computed(()=>{const re=[...new Set([...C.values()].map(ce=>ce.value))].sort((ce,ue)=>ce-ue),X=[];for(const ce of re){const ue=x.value.filter(_e=>C.get(_e)?.value===ce);X.push(...ue)}return generateLayers(X,E,S,T)}),V=computed(()=>!Array.from(B.values()).some(re=>re.value)),L=computed(()=>M.value[M.value.length-1].layer),F=computed(()=>({"--v-layout-left":convertToUnit(L.value.left),"--v-layout-right":convertToUnit(L.value.right),"--v-layout-top":convertToUnit(L.value.top),"--v-layout-bottom":convertToUnit(L.value.bottom),...V.value?void 0:{transition:"none"}})),j=computed(()=>M.value.slice(1).map((re,X)=>{let{id:ce}=re;const{layer:ue}=M.value[X],_e=S.get(ce),ye=E.get(ce);return{id:ce,...ue,size:Number(_e.value),position:ye.value}})),U=re=>j.value.find(X=>X.id===re),H=getCurrentInstance("createLayout"),Y=shallowRef(!1);onMounted(()=>{Y.value=!0}),provide(VuetifyLayoutKey,{register:(re,X)=>{let{id:ce,order:ue,position:_e,layoutSize:ye,elementSize:ie,active:W,disableTransitions:O,absolute:z}=X;C.set(ce,ue),E.set(ce,_e),S.set(ce,ye),T.set(ce,W),O&&B.set(ce,O);const ee=findChildrenWithProvide(VuetifyLayoutItemKey,H?.vnode).indexOf(re);ee>-1?x.value.splice(ee,0,ce):x.value.push(ce);const ae=computed(()=>j.value.findIndex(q=>q.id===ce)),oe=computed(()=>_.value+M.value.length*2-ae.value*2),se=computed(()=>{const q=_e.value==="left"||_e.value==="right",te=_e.value==="right",fe=_e.value==="bottom",he={[_e.value]:0,zIndex:oe.value,transform:`translate${q?"X":"Y"}(${(W.value?0:-110)*(te||fe?-1:1)}%)`,position:z.value||_.value!==ROOT_ZINDEX?"absolute":"fixed",...V.value?void 0:{transition:"none"}};if(!Y.value)return he;const Ee=j.value[ae.value];if(!Ee)throw new Error(`[Vuetify] Could not find layout item "${ce}"`);const we=D.value.get(ce);return we&&(Ee[we.position]+=we.amount),{...he,height:q?`calc(100% - ${Ee.top}px - ${Ee.bottom}px)`:ie.value?`${ie.value}px`:void 0,left:te?void 0:`${Ee.left}px`,right:te?`${Ee.right}px`:void 0,top:_e.value!=="bottom"?`${Ee.top}px`:void 0,bottom:_e.value!=="top"?`${Ee.bottom}px`:void 0,width:q?ie.value?`${ie.value}px`:void 0:`calc(100% - ${Ee.left}px - ${Ee.right}px)`}}),G=computed(()=>({zIndex:oe.value-1}));return{layoutItemStyles:se,layoutItemScrimStyles:G,zIndex:oe}},unregister:re=>{C.delete(re),E.delete(re),S.delete(re),T.delete(re),B.delete(re),x.value=x.value.filter(X=>X!==re)},mainRect:L,mainStyles:F,getLayoutItem:U,items:j,layoutRect:I,rootZIndex:_});const Z=computed(()=>["v-layout",{"v-layout--full-height":t.fullHeight}]),ne=computed(()=>({zIndex:_.value,position:n?"relative":void 0,overflow:n?"hidden":void 0}));return{layoutClasses:Z,layoutStyles:ne,getLayoutItem:U,items:j,layoutRect:I,layoutRef:A}}function createVuetify(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:n,..._}=t,x=mergeDeep(n,_),{aliases:E={},components:S={},directives:C={}}=x,T=createDefaults(x.defaults),B=createDisplay(x.display,x.ssr),A=createTheme(x.theme),I=createIcons(x.icons),D=createLocale(x.locale),M=createDate(x.date);return{install:L=>{for(const F in C)L.directive(F,C[F]);for(const F in S)L.component(F,S[F]);for(const F in E)L.component(F,defineComponent({...E[F],name:F,aliasName:E[F].name}));if(A.install(L),L.provide(DefaultsSymbol,T),L.provide(DisplaySymbol,B),L.provide(ThemeSymbol,A),L.provide(IconSymbol,I),L.provide(LocaleSymbol,D),L.provide(DateAdapterSymbol,M),IN_BROWSER&&x.ssr)if(L.$nuxt)L.$nuxt.hook("app:suspense:resolve",()=>{B.update()});else{const{mount:F}=L;L.mount=function(){const j=F(...arguments);return nextTick$2(()=>B.update()),L.mount=F,j}}getUid.reset(),L.mixin({computed:{$vuetify(){return reactive({defaults:inject.call(this,DefaultsSymbol),display:inject.call(this,DisplaySymbol),theme:inject.call(this,ThemeSymbol),icons:inject.call(this,IconSymbol),locale:inject.call(this,LocaleSymbol),date:inject.call(this,DateAdapterSymbol)})}}})},defaults:T,display:B,theme:A,icons:I,locale:D,date:M}}const version$j="3.3.14";createVuetify.version=version$j;function inject(t){const n=this.$,_=n.parent?.provides??n.vnode.appContext?.provides;if(_&&t in _)return _[t]}const changerThmeVuetify=t=>{const n=useTheme();n.global.name.value=t},utilisertatThme=defineStore("thme",{state:()=>({couleur:"light",thmeImages:"",langue:[]}),persist:{afterRestore:t=>{changerThmeVuetify(t.store.$state.couleur)}}}),imagesThme={constr:{unDraw:__vitePreload(()=>import("./undraw_under_construction_46pa-ba38e05e.js"),[]),:__vitePreload(()=>import("./-2a20e0e5.js"),[])},docs:{unDraw:__vitePreload(()=>import("./undraw_book_lover_mkck-788aab09.js"),[]),:__vitePreload(()=>import("./-15867725.js"),[])},recherche:{unDraw:__vitePreload(()=>import("./undraw_not_found_60pq-993e595f.js"),[]),:__vitePreload(()=>import("./-cf519b1b.js"),[])},message:{:__vitePreload(()=>import("./_-d6ffe67b.js"),[])},profilFemme:{unDraw:__vitePreload(()=>import("./undraw_female_avatar_w3jk-890ef1f0.js"),[]),:__vitePreload(()=>import("./__-679ac0c0.js"),[])},profilHomme:{unDraw:__vitePreload(()=>import("./undraw_male_avatar_323b-4544a09a.js"),[]),:__vitePreload(()=>import("./__-d62f10ac.js"),[])},automatisation:{unDraw:__vitePreload(()=>import("./undraw_real-time_sync_o57k-3422d6b8.js"),[])},problme:{unDraw:__vitePreload(()=>import("./undraw_towing_6yy4-bb468316.js"),[]),:__vitePreload(()=>import("./-5d3bcb3a.js"),[])},favoris:{unDraw:__vitePreload(()=>import("./undraw_Appreciation_re_p6rl-4c2e7d58.js"),[]),:__vitePreload(()=>import("./-1b959c2a.js"),[])},conditions:{unDraw:__vitePreload(()=>import("./undraw_Terms_re_6ak4-d50e32b8.js"),[]),:__vitePreload(()=>import("./_-8ebaa886.js"),[])},logoBD:{unDraw:__vitePreload(()=>import("./undraw_Projections_re_1mrh-7f57c189.js"),[])},dispositif:{unDraw:__vitePreload(()=>import("./undraw_Mobile_re_q4nk-c3480435.js"),[])},vide:{unDraw:__vitePreload(()=>import("./undraw_adventure_map_hnin-a1140a56.js"),[]),:__vitePreload(()=>import("./-56794b69.js"),[])}},utiliserImagesDco=function(t){return{obtImageDco:_=>{const x=utilisertatThme(),{thmeImages:E}=storeToRefs(x),S=ref$1(),C=computed(()=>t||E.value);return watchEffect(()=>{if(_==="profil"){const T=["profilFemme","profilHomme"];_=T[Math.floor(Math.random()*T.length)]}imagesThme[_]&&(imagesThme[_][C.value]||Object.values(imagesThme[_])[0]).then(T=>S.value=T?.default)}),S}}},VAvatar$1="",VIcon$1="";function useColor(t){return destructComputed(()=>{const n=[],_={};if(t.value.background)if(isCssColor(t.value.background)){if(_.backgroundColor=t.value.background,!t.value.text){const x=getForeground(_.backgroundColor);_.color=x,_.caretColor=x}}else n.push(`bg-${t.value.background}`);return t.value.text&&(isCssColor(t.value.text)?(_.color=t.value.text,_.caretColor=t.value.text):n.push(`text-${t.value.text}`)),{colorClasses:n,colorStyles:_}})}function useTextColor(t,n){const _=computed(()=>({text:isRef(t)?t.value:n?t[n]:null})),{colorClasses:x,colorStyles:E}=useColor(_);return{textColorClasses:x,textColorStyles:E}}function useBackgroundColor(t,n){const _=computed(()=>({background:isRef(t)?t.value:n?t[n]:null})),{colorClasses:x,colorStyles:E}=useColor(_);return{backgroundColorClasses:x,backgroundColorStyles:E}}const predefinedSizes=["x-small","small","default","large","x-large"],makeSizeProps=propsFactory({size:{type:[String,Number],default:"default"}},"size");function useSize(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return destructComputed(()=>{let _,x;return includes(predefinedSizes,t.size)?_=`${n}--size-${t.size}`:t.size&&(x={width:convertToUnit(t.size),height:convertToUnit(t.size)}),{sizeClasses:_,sizeStyles:x}})}const makeTagProps=propsFactory({tag:{type:String,default:"div"}},"tag"),makeVIconProps=propsFactory({color:String,start:Boolean,end:Boolean,icon:IconValue,...makeComponentProps(),...makeSizeProps(),...makeTagProps({tag:"i"}),...makeThemeProps()},"VIcon"),VIcon=genericComponent()({name:"VIcon",props:makeVIconProps(),setup(t,n){let{attrs:_,slots:x}=n;const E=ref$1(),{themeClasses:S}=provideTheme(t),{iconData:C}=useIcon(computed(()=>E.value||t.icon)),{sizeClasses:T}=useSize(t),{textColorClasses:B,textColorStyles:A}=useTextColor(toRef(t,"color"));return useRender(()=>{const I=x.default?.();return I&&(E.value=flattenFragments(I).filter(D=>D.type===Text&&D.children&&typeof D.children=="string")[0]?.children),createVNode(C.value.component,{tag:t.tag,icon:C.value.icon,class:["v-icon","notranslate",S.value,T.value,B.value,{"v-icon--clickable":!!_.onClick,"v-icon--start":t.start,"v-icon--end":t.end},t.class],style:[T.value?void 0:{fontSize:convertToUnit(t.size),height:convertToUnit(t.size),width:convertToUnit(t.size)},A.value,t.style],role:_.onClick?"button":void 0,"aria-hidden":!_.onClick},{default:()=>[I]})}),{}}}),VImg$1="",VResponsive$1="",makeDimensionProps=propsFactory({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function useDimension(t){return{dimensionStyles:computed(()=>({height:convertToUnit(t.height),maxHeight:convertToUnit(t.maxHeight),maxWidth:convertToUnit(t.maxWidth),minHeight:convertToUnit(t.minHeight),minWidth:convertToUnit(t.minWidth),width:convertToUnit(t.width)}))}}function useAspectStyles(t){return{aspectStyles:computed(()=>{const n=Number(t.aspectRatio);return n?{paddingBottom:String(1/n*100)+"%"}:void 0})}}const makeVResponsiveProps=propsFactory({aspectRatio:[String,Number],contentClass:String,inline:Boolean,...makeComponentProps(),...makeDimensionProps()},"VResponsive"),VResponsive=genericComponent()({name:"VResponsive",props:makeVResponsiveProps(),setup(t,n){let{slots:_}=n;const{aspectStyles:x}=useAspectStyles(t),{dimensionStyles:E}=useDimension(t);return useRender(()=>createVNode("div",{class:["v-responsive",{"v-responsive--inline":t.inline},t.class],style:[E.value,t.style]},[createVNode("div",{class:"v-responsive__sizer",style:x.value},null),_.additional?.(),_.default&&createVNode("div",{class:["v-responsive__content",t.contentClass]},[_.default()])])),{}}}),makeTransitionProps$1=propsFactory({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:t=>t!==!0}},"transition"),MaybeTransition=(t,n)=>{let{slots:_}=n;const{transition:x,disabled:E,...S}=t,{component:C=Transition,...T}=typeof x=="object"?x:{};return h$1(C,mergeProps(typeof x=="string"?{name:E?"":x}:T,S,{disabled:E}),_)};function mounted$2(t,n){if(!SUPPORTS_INTERSECTION)return;const _=n.modifiers||{},x=n.value,{handler:E,options:S}=typeof x=="object"?x:{handler:x,options:{}},C=new IntersectionObserver(function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments.length>1?arguments[1]:void 0;const A=t._observe?.[n.instance.$.uid];if(!A)return;const I=T.some(D=>D.isIntersecting);E&&(!_.quiet||A.init)&&(!_.once||I||A.init)&&E(I,T,B),I&&_.once?unmounted$2(t,n):A.init=!0},S);t._observe=Object(t._observe),t._observe[n.instance.$.uid]={init:!1,observer:C},C.observe(t)}function unmounted$2(t,n){const _=t._observe?.[n.instance.$.uid];_&&(_.observer.unobserve(t),delete t._observe[n.instance.$.uid])}const Intersect={mounted:mounted$2,unmounted:unmounted$2},Intersect$1=Intersect,makeVImgProps=propsFactory({alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,...makeVResponsiveProps(),...makeComponentProps(),...makeTransitionProps$1()},"VImg"),VImg=genericComponent()({name:"VImg",directives:{intersect:Intersect$1},props:makeVImgProps(),emits:{loadstart:t=>!0,load:t=>!0,error:t=>!0},setup(t,n){let{emit:_,slots:x}=n;const E=shallowRef(""),S=ref$1(),C=shallowRef(t.eager?"loading":"idle"),T=shallowRef(),B=shallowRef(),A=computed(()=>t.src&&typeof t.src=="object"?{src:t.src.src,srcset:t.srcset||t.src.srcset,lazySrc:t.lazySrc||t.src.lazySrc,aspect:Number(t.aspectRatio||t.src.aspect||0)}:{src:t.src,srcset:t.srcset,lazySrc:t.lazySrc,aspect:Number(t.aspectRatio||0)}),I=computed(()=>A.value.aspect||T.value/B.value||0);watch(()=>t.src,()=>{D(C.value!=="idle")}),watch(I,(ce,ue)=>{!ce&&ue&&S.value&&j(S.value)}),onBeforeMount(()=>D());function D(ce){if(!(t.eager&&ce)&&!(SUPPORTS_INTERSECTION&&!ce&&!t.eager)){if(C.value="loading",A.value.lazySrc){const ue=new Image;ue.src=A.value.lazySrc,j(ue,null)}A.value.src&&nextTick$2(()=>{if(_("loadstart",S.value?.currentSrc||A.value.src),S.value?.complete){if(S.value.naturalWidth||V(),C.value==="error")return;I.value||j(S.value,null),M()}else I.value||j(S.value),L()})}}function M(){L(),C.value="loaded",_("load",S.value?.currentSrc||A.value.src)}function V(){C.value="error",_("error",S.value?.currentSrc||A.value.src)}function L(){const ce=S.value;ce&&(E.value=ce.currentSrc||ce.src)}let F=-1;function j(ce){let ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const _e=()=>{clearTimeout(F);const{naturalHeight:ye,naturalWidth:ie}=ce;ye||ie?(T.value=ie,B.value=ye):!ce.complete&&C.value==="loading"&&ue!=null?F=window.setTimeout(_e,ue):(ce.currentSrc.endsWith(".svg")||ce.currentSrc.startsWith("data:image/svg+xml"))&&(T.value=1,B.value=1)};_e()}const U=computed(()=>({"v-img__img--cover":t.cover,"v-img__img--contain":!t.cover})),H=()=>{if(!A.value.src||C.value==="idle")return null;const ce=createVNode("img",{class:["v-img__img",U.value],src:A.value.src,srcset:A.value.srcset,alt:t.alt,sizes:t.sizes,ref:S,onLoad:M,onError:V},null),ue=x.sources?.();return createVNode(MaybeTransition,{transition:t.transition,appear:!0},{default:()=>[withDirectives(ue?createVNode("picture",{class:"v-img__picture"},[ue,ce]):ce,[[vShow,C.value==="loaded"]])]})},Y=()=>createVNode(MaybeTransition,{transition:t.transition},{default:()=>[A.value.lazySrc&&C.value!=="loaded"&&createVNode("img",{class:["v-img__img","v-img__img--preload",U.value],src:A.value.lazySrc,alt:t.alt},null)]}),Z=()=>x.placeholder?createVNode(MaybeTransition,{transition:t.transition,appear:!0},{default:()=>[(C.value==="loading"||C.value==="error"&&!x.error)&&createVNode("div",{class:"v-img__placeholder"},[x.placeholder()])]}):null,ne=()=>x.error?createVNode(MaybeTransition,{transition:t.transition,appear:!0},{default:()=>[C.value==="error"&&createVNode("div",{class:"v-img__error"},[x.error()])]}):null,re=()=>t.gradient?createVNode("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${t.gradient})`}},null):null,X=shallowRef(!1);{const ce=watch(I,ue=>{ue&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{X.value=!0})}),ce())})}return useRender(()=>{const[ce]=VResponsive.filterProps(t);return withDirectives(createVNode(VResponsive,mergeProps({class:["v-img",{"v-img--booting":!X.value},t.class],style:[{width:convertToUnit(t.width==="auto"?T.value:t.width)},t.style]},ce,{aspectRatio:I.value,"aria-label":t.alt,role:t.alt?"img":void 0}),{additional:()=>createVNode(Fragment,null,[createVNode(H,null,null),createVNode(Y,null,null),createVNode(re,null,null),createVNode(Z,null,null),createVNode(ne,null,null)]),default:x.default}),[[resolveDirective("intersect"),{handler:D,options:t.options},null,{once:!0}]])}),{currentSrc:E,image:S,state:C,naturalWidth:T,naturalHeight:B}}}),allowedDensities$1=[null,"default","comfortable","compact"],makeDensityProps=propsFactory({density:{type:String,default:"default",validator:t=>allowedDensities$1.includes(t)}},"density");function useDensity(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{densityClasses:computed(()=>`${n}--density-${t.density}`)}}const makeRoundedProps=propsFactory({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function useRounded(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{roundedClasses:computed(()=>{const x=isRef(t)?t.value:t.rounded,E=[];if(x===!0||x==="")E.push(`${n}--rounded`);else if(typeof x=="string"||x===0)for(const S of String(x).split(" "))E.push(`rounded-${S}`);return E})}}const allowedVariants$1=["elevated","flat","tonal","outlined","text","plain"];function genOverlays(t,n){return createVNode(Fragment,null,[t&&createVNode("span",{key:"overlay",class:`${n}__overlay`},null),createVNode("span",{key:"underlay",class:`${n}__underlay`},null)])}const makeVariantProps=propsFactory({color:String,variant:{type:String,default:"elevated",validator:t=>allowedVariants$1.includes(t)}},"variant");function useVariant(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();const _=computed(()=>{const{variant:S}=unref(t);return`${n}--variant-${S}`}),{colorClasses:x,colorStyles:E}=useColor(computed(()=>{const{variant:S,color:C}=unref(t);return{[["elevated","flat"].includes(S)?"background":"text"]:C}}));return{colorClasses:x,colorStyles:E,variantClasses:_}}const makeVAvatarProps=propsFactory({start:Boolean,end:Boolean,icon:IconValue,image:String,...makeComponentProps(),...makeDensityProps(),...makeRoundedProps(),...makeSizeProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"flat"})},"VAvatar"),VAvatar=genericComponent()({name:"VAvatar",props:makeVAvatarProps(),setup(t,n){let{slots:_}=n;const{themeClasses:x}=provideTheme(t),{colorClasses:E,colorStyles:S,variantClasses:C}=useVariant(t),{densityClasses:T}=useDensity(t),{roundedClasses:B}=useRounded(t),{sizeClasses:A,sizeStyles:I}=useSize(t);return useRender(()=>createVNode(t.tag,{class:["v-avatar",{"v-avatar--start":t.start,"v-avatar--end":t.end},x.value,E.value,T.value,B.value,A.value,C.value,t.class],style:[S.value,I.value,t.style]},{default:()=>[t.image?createVNode(VImg,{key:"image",src:t.image,alt:"",cover:!0},null):t.icon?createVNode(VIcon,{key:"icon",icon:t.icon},null):_.default?.(),genOverlays(!1,"v-avatar")]})),{}}}),_sfc_main$24=defineComponent$1({__name:"ImageProfil",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),x=ref$1(),E=computed(()=>{if(x.value)return URL.createObjectURL(new Blob([x.value],{type:"image"}))});enregistrercoute(_?.profil.suivreImage({idCompte:n.id,f:T=>x.value=T}));const{obtImageDco:S}=utiliserImagesDco(),C=S("profil");return(T,B)=>(openBlock(),createBlock(VAvatar,mergeProps({image:E.value||unref(C)},n),null,16,["image"]))}}),obtIcneContact=({type:t})=>{switch(t){case"siteInternet":return"mdi-open-in-new";case"whatsapp":return"mdi-whatsapp";case"tlphone":return"mdi-phone";case"tlgramme":return"mdi-send";case"courriel":return"mdi-email-outline";default:return"mdi-account-outline"}},utiliserNomEtTypeDispositif=({idDispositif:t,idCompte:n})=>{const _=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),S=ref$1();enregistrercoute(_?.suivreIdCompte({f:I=>S.value=I}));const C=ref$1();let T;watchEffect(async()=>{T&&await T();const I=(typeof n=="string"?n:n?.value)||S.value,D=typeof t=="string"?t:t.value;D&&(T=await enregistrercoute(_?.suivreNomDispositif({idCompte:I,idDispositif:D,f:M=>C.value=M})))});const B=computed(()=>{if(!C.value)return;const{nom:I,type:D}=C.value;return I||(D?E(nomGnriqueTypeDispositif(D)):void 0)}),A=computed(()=>C.value?.type);return{nomDispositif:B,typeDispositif:A}},nomGnriqueTypeDispositif=t=>{switch(t){case"tlphone":return"dispositifs.type.tlphone";case"navigateur":return"dispositifs.type.navigateur";case"tablette":return"dispositifs.type.tablette";case"ordinateur":return"dispositifs.type.ordinateur";case"serveur":return"dispositifs.type.serveur";default:return"dispositifs.type.autre"}},obtIcneDispositifDeType=t=>t==="tlphone"?"mdi-cellphone":t==="navigateur"?"mdi-application-outline":t==="tablette"?"mdi-tablet":t==="ordinateur"?"mdi-monitor":t==="serveur"?"mdi-server":"mdi-monitor-cellphone",utiliserIlYA=({vu:t,t:n,clefs:_={enLigne:"membres.vu.enLigne",Linstant:"membres.vu.Linstant",ilYAMinutes:"membres.vu.ilYAMinutes",ilYAHeures:"membres.vu.ilYAHeures",ilYAJours:"membres.vu.ilYAJours",ilYASemaines:"membres.vu.ilYASemaines",ilYAMois:"membres.vu.ilYAMois",ilYALongtemps:"membres.vu.ilYALongtemps"}})=>{const{formatterChiffre:x}=utiliserNumration(),E=ref$1(new Date().getTime());let S;onMounted(()=>{S=window.setInterval(()=>{E.value=new Date().getTime()},1e3)}),onUnmounted(()=>{S&&clearInterval(S)});const C=computed(()=>t?E.value-t:void 0),T=computed(()=>C.value===void 0?{ilYA:0,texte:_.enLigne}:C.value<1e3*60*2?{ilYA:0,texte:_.Linstant}:C.value<1e3*60*60?{ilYA:Math.floor(C.value/(1e3*60)),texte:_.ilYAMinutes}:C.value<1e3*60*60*24?{ilYA:Math.floor(C.value/(1e3*60*60)),texte:_.ilYAHeures}:C.value<1e3*60*60*24*7?{ilYA:Math.floor(C.value/(1e3*60*60*24)),texte:_.ilYAJours}:C.value<1e3*60*60*24*30?{ilYA:Math.floor(C.value/(1e3*60*60*24*7)),texte:_.ilYASemaines}:C.value<1e3*60*60*24*365.25?{ilYA:Math.floor(C.value/(1e3*60*60*24*30)),texte:_.ilYAMois}:{ilYA:0,texte:_.ilYALongtemps}),B=x(computed(()=>T.value.ilYA||0)),A=computed(()=>T.value.ilYA?n(T.value.texte,{n:B.value},T.value.ilYA):n(T.value.texte));return{ilYA:computed(()=>T.value.ilYA),texte:A,ilYAMs:C}},_sfc_main$23=defineComponent$1({__name:"TexteTronqu",props:{texte:{},longueurMax:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),E=computed(()=>[...n.texte].length>n.longueurMax?n.texte.slice(0,Math.max(n.longueurMax-3,3))+x("communs.troisPetitsPoints"):n.texte);return(S,C)=>(openBlock(),createElementBlock("span",null,toDisplayString$1(E.value),1))}}),VDivider$1="",makeVDividerProps=propsFactory({color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...makeComponentProps(),...makeThemeProps()},"VDivider"),VDivider=genericComponent()({name:"VDivider",props:makeVDividerProps(),setup(t,n){let{attrs:_}=n;const{themeClasses:x}=provideTheme(t),{textColorClasses:E,textColorStyles:S}=useTextColor(toRef(t,"color")),C=computed(()=>{const T={};return t.length&&(T[t.vertical?"maxHeight":"maxWidth"]=convertToUnit(t.length)),t.thickness&&(T[t.vertical?"borderRightWidth":"borderTopWidth"]=convertToUnit(t.thickness)),T});return useRender(()=>createVNode("hr",{class:[{"v-divider":!0,"v-divider--inset":t.inset,"v-divider--vertical":t.vertical},x.value,E.value,t.class],style:[C.value,S.value,t.style],"aria-orientation":!_.role||_.role==="separator"?t.vertical?"vertical":"horizontal":void 0,role:`${_.role||"separator"}`},null)),{}}}),VList$1="",makeTransitionProps=propsFactory({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function createCssTransition(t,n,_){return genericComponent()({name:t,props:makeTransitionProps({mode:_,origin:n}),setup(x,E){let{slots:S}=E;const C={onBeforeEnter(T){x.origin&&(T.style.transformOrigin=x.origin)},onLeave(T){if(x.leaveAbsolute){const{offsetTop:B,offsetLeft:A,offsetWidth:I,offsetHeight:D}=T;T._transitionInitialStyles={position:T.style.position,top:T.style.top,left:T.style.left,width:T.style.width,height:T.style.height},T.style.position="absolute",T.style.top=`${B}px`,T.style.left=`${A}px`,T.style.width=`${I}px`,T.style.height=`${D}px`}x.hideOnLeave&&T.style.setProperty("display","none","important")},onAfterLeave(T){if(x.leaveAbsolute&&T?._transitionInitialStyles){const{position:B,top:A,left:I,width:D,height:M}=T._transitionInitialStyles;delete T._transitionInitialStyles,T.style.position=B||"",T.style.top=A||"",T.style.left=I||"",T.style.width=D||"",T.style.height=M||""}}};return()=>{const T=x.group?TransitionGroup:Transition;return h$1(T,{name:x.disabled?"":t,css:!x.disabled,...x.group?void 0:{mode:x.mode},...x.disabled?{}:C},S.default)}}})}function createJavascriptTransition(t,n){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return genericComponent()({name:t,props:{mode:{type:String,default:_},disabled:Boolean},setup(x,E){let{slots:S}=E;return()=>h$1(Transition,{name:x.disabled?"":t,css:!x.disabled,...x.disabled?{}:n},S.default)}})}function ExpandTransitionGenerator(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const _=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",x=camelize(`offset-${_}`);return{onBeforeEnter(C){C._parent=C.parentNode,C._initialStyle={transition:C.style.transition,overflow:C.style.overflow,[_]:C.style[_]}},onEnter(C){const T=C._initialStyle;C.style.setProperty("transition","none","important"),C.style.overflow="hidden";const B=`${C[x]}px`;C.style[_]="0",C.offsetHeight,C.style.transition=T.transition,t&&C._parent&&C._parent.classList.add(t),requestAnimationFrame(()=>{C.style[_]=B})},onAfterEnter:S,onEnterCancelled:S,onLeave(C){C._initialStyle={transition:"",overflow:C.style.overflow,[_]:C.style[_]},C.style.overflow="hidden",C.style[_]=`${C[x]}px`,C.offsetHeight,requestAnimationFrame(()=>C.style[_]="0")},onAfterLeave:E,onLeaveCancelled:E};function E(C){t&&C._parent&&C._parent.classList.remove(t),S(C)}function S(C){const T=C._initialStyle[_];C.style.overflow=C._initialStyle.overflow,T!=null&&(C.style[_]=T),delete C._initialStyle}}const makeVDialogTransitionProps=propsFactory({target:Object},"v-dialog-transition"),VDialogTransition=genericComponent()({name:"VDialogTransition",props:makeVDialogTransitionProps(),setup(t,n){let{slots:_}=n;const x={onBeforeEnter(E){E.style.pointerEvents="none",E.style.visibility="hidden"},async onEnter(E,S){await new Promise(M=>requestAnimationFrame(M)),await new Promise(M=>requestAnimationFrame(M)),E.style.visibility="";const{x:C,y:T,sx:B,sy:A,speed:I}=getDimensions(t.target,E),D=animate(E,[{transform:`translate(${C}px, ${T}px) scale(${B}, ${A})`,opacity:0},{}],{duration:225*I,easing:deceleratedEasing});getChildren(E)?.forEach(M=>{animate(M,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*I,easing:standardEasing})}),D.finished.then(()=>S())},onAfterEnter(E){E.style.removeProperty("pointer-events")},onBeforeLeave(E){E.style.pointerEvents="none"},async onLeave(E,S){await new Promise(M=>requestAnimationFrame(M));const{x:C,y:T,sx:B,sy:A,speed:I}=getDimensions(t.target,E);animate(E,[{},{transform:`translate(${C}px, ${T}px) scale(${B}, ${A})`,opacity:0}],{duration:125*I,easing:acceleratedEasing}).finished.then(()=>S()),getChildren(E)?.forEach(M=>{animate(M,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*I,easing:standardEasing})})},onAfterLeave(E){E.style.removeProperty("pointer-events")}};return()=>t.target?createVNode(Transition,mergeProps({name:"dialog-transition"},x,{css:!1}),_):createVNode(Transition,{name:"dialog-transition"},_)}});function getChildren(t){const n=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return n&&[...n]}function getDimensions(t,n){const _=t.getBoundingClientRect(),x=nullifyTransforms(n),[E,S]=getComputedStyle(n).transformOrigin.split(" ").map(U=>parseFloat(U)),[C,T]=getComputedStyle(n).getPropertyValue("--v-overlay-anchor-origin").split(" ");let B=_.left+_.width/2;C==="left"||T==="left"?B-=_.width/2:(C==="right"||T==="right")&&(B+=_.width/2);let A=_.top+_.height/2;C==="top"||T==="top"?A-=_.height/2:(C==="bottom"||T==="bottom")&&(A+=_.height/2);const I=_.width/x.width,D=_.height/x.height,M=Math.max(1,I,D),V=I/M||0,L=D/M||0,F=x.width*x.height/(window.innerWidth*window.innerHeight),j=F>.12?Math.min(1.5,(F-.12)*10+1):1;return{x:B-(E+x.left),y:A-(S+x.top),sx:V,sy:L,speed:j}}createCssTransition("fab-transition","center center","out-in");createCssTransition("dialog-bottom-transition");createCssTransition("dialog-top-transition");const VFadeTransition=createCssTransition("fade-transition"),VScaleTransition=createCssTransition("scale-transition");createCssTransition("scroll-x-transition");createCssTransition("scroll-x-reverse-transition");const VScrollYTransition=createCssTransition("scroll-y-transition");createCssTransition("scroll-y-reverse-transition");const VSlideXTransition=createCssTransition("slide-x-transition");createCssTransition("slide-x-reverse-transition");const VSlideYTransition=createCssTransition("slide-y-transition");createCssTransition("slide-y-reverse-transition");const VExpandTransition=createJavascriptTransition("expand-transition",ExpandTransitionGenerator()),VExpandXTransition=createJavascriptTransition("expand-x-transition",ExpandTransitionGenerator("",!0)),makeVDefaultsProviderProps=propsFactory({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),VDefaultsProvider=genericComponent(!1)({name:"VDefaultsProvider",props:makeVDefaultsProviderProps(),setup(t,n){let{slots:_}=n;const{defaults:x,disabled:E,reset:S,root:C,scoped:T}=toRefs(t);return provideDefaults(x,{reset:S,root:C,scoped:T,disabled:E}),()=>_.default?.()}}),ListKey=Symbol.for("vuetify:list");function createList(){const t=inject$1(ListKey,{hasPrepend:shallowRef(!1),updateHasPrepend:()=>null}),n={hasPrepend:shallowRef(!1),updateHasPrepend:_=>{_&&(n.hasPrepend.value=_)}};return provide(ListKey,n),t}function useList(){return inject$1(ListKey,null)}const singleOpenStrategy={open:t=>{let{id:n,value:_,opened:x,parents:E}=t;if(_){const S=new Set;S.add(n);let C=E.get(n);for(;C!=null;)S.add(C),C=E.get(C);return S}else return x.delete(n),x},select:()=>null},multipleOpenStrategy={open:t=>{let{id:n,value:_,opened:x,parents:E}=t;if(_){let S=E.get(n);for(x.add(n);S!=null&&S!==n;)x.add(S),S=E.get(S);return x}else x.delete(n);return x},select:()=>null},listOpenStrategy={open:multipleOpenStrategy.open,select:t=>{let{id:n,value:_,opened:x,parents:E}=t;if(!_)return x;const S=[];let C=E.get(n);for(;C!=null;)S.push(C),C=E.get(C);return new Set(S)}},independentSelectStrategy=t=>{const n={select:_=>{let{id:x,value:E,selected:S}=_;if(x=toRaw(x),t&&!E){const C=Array.from(S.entries()).reduce((T,B)=>{let[A,I]=B;return I==="on"?[...T,A]:T},[]);if(C.length===1&&C[0]===x)return S}return S.set(x,E?"on":"off"),S},in:(_,x,E)=>{let S=new Map;for(const C of _||[])S=n.select({id:C,value:!0,selected:new Map(S),children:x,parents:E});return S},out:_=>{const x=[];for(const[E,S]of _.entries())S==="on"&&x.push(E);return x}};return n},independentSingleSelectStrategy=t=>{const n=independentSelectStrategy(t);return{select:x=>{let{selected:E,id:S,...C}=x;S=toRaw(S);const T=E.has(S)?new Map([[S,E.get(S)]]):new Map;return n.select({...C,id:S,selected:T})},in:(x,E,S)=>{let C=new Map;return x?.length&&(C=n.in(x.slice(0,1),E,S)),C},out:(x,E,S)=>n.out(x,E,S)}},leafSelectStrategy=t=>{const n=independentSelectStrategy(t);return{select:x=>{let{id:E,selected:S,children:C,...T}=x;return E=toRaw(E),C.has(E)?S:n.select({id:E,selected:S,children:C,...T})},in:n.in,out:n.out}},leafSingleSelectStrategy=t=>{const n=independentSingleSelectStrategy(t);return{select:x=>{let{id:E,selected:S,children:C,...T}=x;return E=toRaw(E),C.has(E)?S:n.select({id:E,selected:S,children:C,...T})},in:n.in,out:n.out}},classicSelectStrategy=t=>{const n={select:_=>{let{id:x,value:E,selected:S,children:C,parents:T}=_;x=toRaw(x);const B=new Map(S),A=[x];for(;A.length;){const D=A.shift();S.set(D,E?"on":"off"),C.has(D)&&A.push(...C.get(D))}let I=T.get(x);for(;I;){const D=C.get(I),M=D.every(L=>S.get(L)==="on"),V=D.every(L=>!S.has(L)||S.get(L)==="off");S.set(I,M?"on":V?"off":"indeterminate"),I=T.get(I)}return t&&!E&&Array.from(S.entries()).reduce((M,V)=>{let[L,F]=V;return F==="on"?[...M,L]:M},[]).length===0?B:S},in:(_,x,E)=>{let S=new Map;for(const C of _||[])S=n.select({id:C,value:!0,selected:new Map(S),children:x,parents:E});return S},out:(_,x)=>{const E=[];for(const[S,C]of _.entries())C==="on"&&!x.has(S)&&E.push(S);return E}};return n},VNestedSymbol=Symbol.for("vuetify:nested"),emptyNested={id:shallowRef(),root:{register:()=>null,unregister:()=>null,parents:ref$1(new Map),children:ref$1(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:ref$1(new Set),selected:ref$1(new Map),selectedValues:ref$1([])}},makeNestedProps=propsFactory({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),useNested=t=>{let n=!1;const _=ref$1(new Map),x=ref$1(new Map),E=useProxiedModel(t,"opened",t.opened,D=>new Set(D),D=>[...D.values()]),S=computed(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;switch(t.selectStrategy){case"single-leaf":return leafSingleSelectStrategy(t.mandatory);case"leaf":return leafSelectStrategy(t.mandatory);case"independent":return independentSelectStrategy(t.mandatory);case"single-independent":return independentSingleSelectStrategy(t.mandatory);case"classic":default:return classicSelectStrategy(t.mandatory)}}),C=computed(()=>{if(typeof t.openStrategy=="object")return t.openStrategy;switch(t.openStrategy){case"list":return listOpenStrategy;case"single":return singleOpenStrategy;case"multiple":default:return multipleOpenStrategy}}),T=useProxiedModel(t,"selected",t.selected,D=>S.value.in(D,_.value,x.value),D=>S.value.out(D,_.value,x.value));onBeforeUnmount(()=>{n=!0});function B(D){const M=[];let V=D;for(;V!=null;)M.unshift(V),V=x.value.get(V);return M}const A=getCurrentInstance("nested"),I={id:shallowRef(),root:{opened:E,selected:T,selectedValues:computed(()=>{const D=[];for(const[M,V]of T.value.entries())V==="on"&&D.push(M);return D}),register:(D,M,V)=>{M&&D!==M&&x.value.set(D,M),V&&_.value.set(D,[]),M!=null&&_.value.set(M,[..._.value.get(M)||[],D])},unregister:D=>{if(n)return;_.value.delete(D);const M=x.value.get(D);if(M){const V=_.value.get(M)??[];_.value.set(M,V.filter(L=>L!==D))}x.value.delete(D),E.value.delete(D)},open:(D,M,V)=>{A.emit("click:open",{id:D,value:M,path:B(D),event:V});const L=C.value.open({id:D,value:M,opened:new Set(E.value),children:_.value,parents:x.value,event:V});L&&(E.value=L)},openOnSelect:(D,M,V)=>{const L=C.value.select({id:D,value:M,selected:new Map(T.value),opened:new Set(E.value),children:_.value,parents:x.value,event:V});L&&(E.value=L)},select:(D,M,V)=>{A.emit("click:select",{id:D,value:M,path:B(D),event:V});const L=S.value.select({id:D,value:M,selected:new Map(T.value),children:_.value,parents:x.value,event:V});L&&(T.value=L),I.root.openOnSelect(D,M,V)},children:_,parents:x}};return provide(VNestedSymbol,I),I.root},useNestedItem=(t,n)=>{const _=inject$1(VNestedSymbol,emptyNested),x=Symbol(getUid()),E=computed(()=>t.value!==void 0?t.value:x),S={..._,id:E,open:(C,T)=>_.root.open(E.value,C,T),openOnSelect:(C,T)=>_.root.openOnSelect(E.value,C,T),isOpen:computed(()=>_.root.opened.value.has(E.value)),parent:computed(()=>_.root.parents.value.get(E.value)),select:(C,T)=>_.root.select(E.value,C,T),isSelected:computed(()=>_.root.selected.value.get(toRaw(E.value))==="on"),isIndeterminate:computed(()=>_.root.selected.value.get(E.value)==="indeterminate"),isLeaf:computed(()=>!_.root.children.value.get(E.value)),isGroupActivator:_.isGroupActivator};return!_.isGroupActivator&&_.root.register(E.value,_.id.value,n),onBeforeUnmount(()=>{!_.isGroupActivator&&_.root.unregister(E.value)}),n&&provide(VNestedSymbol,S),S},useNestedGroupActivator=()=>{const t=inject$1(VNestedSymbol,emptyNested);provide(VNestedSymbol,{...t,isGroupActivator:!0})};function useSsrBoot(){const t=shallowRef(!1);return onMounted(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:computed(()=>t.value?void 0:{transition:"none !important"}),isBooted:readonly$3(t)}}const VListGroupActivator=defineComponent({name:"VListGroupActivator",setup(t,n){let{slots:_}=n;return useNestedGroupActivator(),()=>_.default?.()}}),makeVListGroupProps=propsFactory({activeColor:String,baseColor:String,color:String,collapseIcon:{type:IconValue,default:"$collapse"},expandIcon:{type:IconValue,default:"$expand"},prependIcon:IconValue,appendIcon:IconValue,fluid:Boolean,subgroup:Boolean,title:String,value:null,...makeComponentProps(),...makeTagProps()},"VListGroup"),VListGroup=genericComponent()({name:"VListGroup",props:makeVListGroupProps(),setup(t,n){let{slots:_}=n;const{isOpen:x,open:E,id:S}=useNestedItem(toRef(t,"value"),!0),C=computed(()=>`v-list-group--id-${String(S.value)}`),T=useList(),{isBooted:B}=useSsrBoot();function A(V){E(!x.value,V)}const I=computed(()=>({onClick:A,class:"v-list-group__header",id:C.value})),D=computed(()=>x.value?t.collapseIcon:t.expandIcon),M=computed(()=>({VListItem:{active:x.value,activeColor:t.activeColor,baseColor:t.baseColor,color:t.color,prependIcon:t.prependIcon||t.subgroup&&D.value,appendIcon:t.appendIcon||!t.subgroup&&D.value,title:t.title,value:t.value}}));return useRender(()=>createVNode(t.tag,{class:["v-list-group",{"v-list-group--prepend":T?.hasPrepend.value,"v-list-group--fluid":t.fluid,"v-list-group--subgroup":t.subgroup,"v-list-group--open":x.value},t.class],style:t.style},{default:()=>[_.activator&&createVNode(VDefaultsProvider,{defaults:M.value},{default:()=>[createVNode(VListGroupActivator,null,{default:()=>[_.activator({props:I.value,isOpen:x.value})]})]}),createVNode(MaybeTransition,{transition:{component:VExpandTransition},disabled:!B.value},{default:()=>[withDirectives(createVNode("div",{class:"v-list-group__items",role:"group","aria-labelledby":C.value},[_.default?.()]),[[vShow,x.value]])]})]})),{}}}),VListItem$1="",VListItemSubtitle=createSimpleFunctional("v-list-item-subtitle"),VListItemTitle=createSimpleFunctional("v-list-item-title"),makeBorderProps=propsFactory({border:[Boolean,Number,String]},"border");function useBorder(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{borderClasses:computed(()=>{const x=isRef(t)?t.value:t.border,E=[];if(x===!0||x==="")E.push(`${n}--border`);else if(typeof x=="string"||x===0)for(const S of String(x).split(" "))E.push(`border-${S}`);return E})}}const makeElevationProps=propsFactory({elevation:{type:[Number,String],validator(t){const n=parseInt(t);return!isNaN(n)&&n>=0&&n<=24}}},"elevation");function useElevation(t){return{elevationClasses:computed(()=>{const _=isRef(t)?t.value:t.elevation,x=[];return _==null||x.push(`elevation-${_}`),x})}}function useRouter$1(){return getCurrentInstance("useRouter")?.proxy?.$router}function useLink$1(t,n){const _=resolveDynamicComponent("RouterLink"),x=computed(()=>!!(t.href||t.to)),E=computed(()=>x?.value||hasEvent(n,"click")||hasEvent(t,"click"));if(typeof _=="string")return{isLink:x,isClickable:E,href:toRef(t,"href")};const S=t.to?_.useLink(t):void 0;return{isLink:x,isClickable:E,route:S?.route,navigate:S?.navigate,isActive:S&&computed(()=>t.exact?S.isExactActive?.value:S.isActive?.value),href:computed(()=>t.to?S?.route.value.href:t.href)}}const makeRouterProps=propsFactory({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let inTransition=!1;function useBackButton(t,n){let _=!1,x,E;IN_BROWSER&&(nextTick$2(()=>{window.addEventListener("popstate",S),x=t?.beforeEach((C,T,B)=>{inTransition?_?n(B):B():setTimeout(()=>_?n(B):B()),inTransition=!0}),E=t?.afterEach(()=>{inTransition=!1})}),onScopeDispose(()=>{window.removeEventListener("popstate",S),x?.(),E?.()}));function S(C){C.state?.replaced||(_=!0,setTimeout(()=>_=!1))}}const VRipple="",stopSymbol=Symbol("rippleStop"),DELAY_RIPPLE=80;function transform(t,n){t.style.transform=n,t.style.webkitTransform=n}function isTouchEvent(t){return t.constructor.name==="TouchEvent"}function isKeyboardEvent(t){return t.constructor.name==="KeyboardEvent"}const calculate=function(t,n){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},x=0,E=0;if(!isKeyboardEvent(t)){const D=n.getBoundingClientRect(),M=isTouchEvent(t)?t.touches[t.touches.length-1]:t;x=M.clientX-D.left,E=M.clientY-D.top}let S=0,C=.3;n._ripple?.circle?(C=.15,S=n.clientWidth/2,S=_.center?S:S+Math.sqrt((x-S)**2+(E-S)**2)/4):S=Math.sqrt(n.clientWidth**2+n.clientHeight**2)/2;const T=`${(n.clientWidth-S*2)/2}px`,B=`${(n.clientHeight-S*2)/2}px`,A=_.center?T:`${x-S}px`,I=_.center?B:`${E-S}px`;return{radius:S,scale:C,x:A,y:I,centerX:T,centerY:B}},ripples={show(t,n){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!n?._ripple?.enabled)return;const x=document.createElement("span"),E=document.createElement("span");x.appendChild(E),x.className="v-ripple__container",_.class&&(x.className+=` ${_.class}`);const{radius:S,scale:C,x:T,y:B,centerX:A,centerY:I}=calculate(t,n,_),D=`${S*2}px`;E.className="v-ripple__animation",E.style.width=D,E.style.height=D,n.appendChild(x);const M=window.getComputedStyle(n);M&&M.position==="static"&&(n.style.position="relative",n.dataset.previousPosition="static"),E.classList.add("v-ripple__animation--enter"),E.classList.add("v-ripple__animation--visible"),transform(E,`translate(${T}, ${B}) scale3d(${C},${C},${C})`),E.dataset.activated=String(performance.now()),setTimeout(()=>{E.classList.remove("v-ripple__animation--enter"),E.classList.add("v-ripple__animation--in"),transform(E,`translate(${A}, ${I}) scale3d(1,1,1)`)},0)},hide(t){if(!t?._ripple?.enabled)return;const n=t.getElementsByClassName("v-ripple__animation");if(n.length===0)return;const _=n[n.length-1];if(_.dataset.isHiding)return;_.dataset.isHiding="true";const x=performance.now()-Number(_.dataset.activated),E=Math.max(250-x,0);setTimeout(()=>{_.classList.remove("v-ripple__animation--in"),_.classList.add("v-ripple__animation--out"),setTimeout(()=>{t.getElementsByClassName("v-ripple__animation").length===1&&t.dataset.previousPosition&&(t.style.position=t.dataset.previousPosition,delete t.dataset.previousPosition),_.parentNode?.parentNode===t&&t.removeChild(_.parentNode)},300)},E)}};function isRippleEnabled(t){return typeof t>"u"||!!t}function rippleShow(t){const n={},_=t.currentTarget;if(!(!_?._ripple||_._ripple.touched||t[stopSymbol])){if(t[stopSymbol]=!0,isTouchEvent(t))_._ripple.touched=!0,_._ripple.isTouch=!0;else if(_._ripple.isTouch)return;if(n.center=_._ripple.centered||isKeyboardEvent(t),_._ripple.class&&(n.class=_._ripple.class),isTouchEvent(t)){if(_._ripple.showTimerCommit)return;_._ripple.showTimerCommit=()=>{ripples.show(t,_,n)},_._ripple.showTimer=window.setTimeout(()=>{_?._ripple?.showTimerCommit&&(_._ripple.showTimerCommit(),_._ripple.showTimerCommit=null)},DELAY_RIPPLE)}else ripples.show(t,_,n)}}function rippleStop(t){t[stopSymbol]=!0}function rippleHide(t){const n=t.currentTarget;if(n?._ripple){if(window.clearTimeout(n._ripple.showTimer),t.type==="touchend"&&n._ripple.showTimerCommit){n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null,n._ripple.showTimer=window.setTimeout(()=>{rippleHide(t)});return}window.setTimeout(()=>{n._ripple&&(n._ripple.touched=!1)}),ripples.hide(n)}}function rippleCancelShow(t){const n=t.currentTarget;n?._ripple&&(n._ripple.showTimerCommit&&(n._ripple.showTimerCommit=null),window.clearTimeout(n._ripple.showTimer))}let keyboardRipple=!1;function keyboardRippleShow(t){!keyboardRipple&&(t.keyCode===keyCodes.enter||t.keyCode===keyCodes.space)&&(keyboardRipple=!0,rippleShow(t))}function keyboardRippleHide(t){keyboardRipple=!1,rippleHide(t)}function focusRippleHide(t){keyboardRipple&&(keyboardRipple=!1,rippleHide(t))}function updateRipple(t,n,_){const{value:x,modifiers:E}=n,S=isRippleEnabled(x);if(S||ripples.hide(t),t._ripple=t._ripple??{},t._ripple.enabled=S,t._ripple.centered=E.center,t._ripple.circle=E.circle,isObject$3(x)&&x.class&&(t._ripple.class=x.class),S&&!_){if(E.stop){t.addEventListener("touchstart",rippleStop,{passive:!0}),t.addEventListener("mousedown",rippleStop);return}t.addEventListener("touchstart",rippleShow,{passive:!0}),t.addEventListener("touchend",rippleHide,{passive:!0}),t.addEventListener("touchmove",rippleCancelShow,{passive:!0}),t.addEventListener("touchcancel",rippleHide),t.addEventListener("mousedown",rippleShow),t.addEventListener("mouseup",rippleHide),t.addEventListener("mouseleave",rippleHide),t.addEventListener("keydown",keyboardRippleShow),t.addEventListener("keyup",keyboardRippleHide),t.addEventListener("blur",focusRippleHide),t.addEventListener("dragstart",rippleHide,{passive:!0})}else!S&&_&&removeListeners(t)}function removeListeners(t){t.removeEventListener("mousedown",rippleShow),t.removeEventListener("touchstart",rippleShow),t.removeEventListener("touchend",rippleHide),t.removeEventListener("touchmove",rippleCancelShow),t.removeEventListener("touchcancel",rippleHide),t.removeEventListener("mouseup",rippleHide),t.removeEventListener("mouseleave",rippleHide),t.removeEventListener("keydown",keyboardRippleShow),t.removeEventListener("keyup",keyboardRippleHide),t.removeEventListener("dragstart",rippleHide),t.removeEventListener("blur",focusRippleHide)}function mounted$1(t,n){updateRipple(t,n,!1)}function unmounted$1(t){delete t._ripple,removeListeners(t)}function updated(t,n){if(n.value===n.oldValue)return;const _=isRippleEnabled(n.oldValue);updateRipple(t,n,_)}const Ripple={mounted:mounted$1,unmounted:unmounted$1,updated},makeVListItemProps=propsFactory({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:IconValue,baseColor:String,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:IconValue,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number,Boolean],title:[String,Number,Boolean],value:null,onClick:EventProp(),onClickOnce:EventProp(),...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeRoundedProps(),...makeRouterProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"text"})},"VListItem"),VListItem=genericComponent()({name:"VListItem",directives:{Ripple},props:makeVListItemProps(),emits:{click:t=>!0},setup(t,n){let{attrs:_,slots:x,emit:E}=n;const S=useLink$1(t,_),C=computed(()=>t.value===void 0?S.href.value:t.value),{select:T,isSelected:B,isIndeterminate:A,isGroupActivator:I,root:D,parent:M,openOnSelect:V}=useNestedItem(C,!1),L=useList(),F=computed(()=>t.active!==!1&&(t.active||S.isActive?.value||B.value)),j=computed(()=>t.link!==!1&&S.isLink.value),U=computed(()=>!t.disabled&&t.link!==!1&&(t.link||S.isClickable.value||t.value!=null&&!!L)),H=computed(()=>t.rounded||t.nav),Y=computed(()=>t.color??t.activeColor),Z=computed(()=>({color:F.value?Y.value??t.baseColor:t.baseColor,variant:t.variant}));watch(()=>S.isActive?.value,ae=>{ae&&M.value!=null&&D.open(M.value,!0),ae&&V(ae)},{immediate:!0});const{themeClasses:ne}=provideTheme(t),{borderClasses:re}=useBorder(t),{colorClasses:X,colorStyles:ce,variantClasses:ue}=useVariant(Z),{densityClasses:_e}=useDensity(t),{dimensionStyles:ye}=useDimension(t),{elevationClasses:ie}=useElevation(t),{roundedClasses:W}=useRounded(H),O=computed(()=>t.lines?`v-list-item--${t.lines}-line`:void 0),z=computed(()=>({isActive:F.value,select:T,isSelected:B.value,isIndeterminate:A.value}));function J(ae){E("click",ae),!(I||!U.value)&&(S.navigate?.(ae),t.value!=null&&T(!B.value,ae))}function ee(ae){(ae.key==="Enter"||ae.key===" ")&&(ae.preventDefault(),J(ae))}return useRender(()=>{const ae=j.value?"a":t.tag,oe=x.title||t.title,se=x.subtitle||t.subtitle,G=!!(t.appendAvatar||t.appendIcon),q=!!(G||x.append),te=!!(t.prependAvatar||t.prependIcon),fe=!!(te||x.prepend);return L?.updateHasPrepend(fe),t.activeColor&&deprecate("active-color",["color","base-color"]),withDirectives(createVNode(ae,{class:["v-list-item",{"v-list-item--active":F.value,"v-list-item--disabled":t.disabled,"v-list-item--link":U.value,"v-list-item--nav":t.nav,"v-list-item--prepend":!fe&&L?.hasPrepend.value,[`${t.activeClass}`]:t.activeClass&&F.value},ne.value,re.value,X.value,_e.value,ie.value,O.value,W.value,ue.value,t.class],style:[ce.value,ye.value,t.style],href:S.href.value,tabindex:U.value?L?-2:0:void 0,onClick:J,onKeydown:U.value&&!j.value&&ee},{default:()=>[genOverlays(U.value||F.value,"v-list-item"),fe&&createVNode("div",{key:"prepend",class:"v-list-item__prepend"},[x.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!te,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon},VListItemAction:{start:!0}}},{default:()=>[x.prepend?.(z.value)]}):createVNode(Fragment,null,[t.prependAvatar&&createVNode(VAvatar,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&createVNode(VIcon,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)]),createVNode("div",{class:"v-list-item__spacer"},null)]),createVNode("div",{class:"v-list-item__content","data-no-activator":""},[oe&&createVNode(VListItemTitle,{key:"title"},{default:()=>[x.title?.({title:t.title})??t.title]}),se&&createVNode(VListItemSubtitle,{key:"subtitle"},{default:()=>[x.subtitle?.({subtitle:t.subtitle})??t.subtitle]}),x.default?.(z.value)]),q&&createVNode("div",{key:"append",class:"v-list-item__append"},[x.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!G,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon},VListItemAction:{end:!0}}},{default:()=>[x.append?.(z.value)]}):createVNode(Fragment,null,[t.appendIcon&&createVNode(VIcon,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&createVNode(VAvatar,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)]),createVNode("div",{class:"v-list-item__spacer"},null)])]}),[[resolveDirective("ripple"),U.value&&t.ripple]])}),{}}}),makeVListSubheaderProps=propsFactory({color:String,inset:Boolean,sticky:Boolean,title:String,...makeComponentProps(),...makeTagProps()},"VListSubheader"),VListSubheader=genericComponent()({name:"VListSubheader",props:makeVListSubheaderProps(),setup(t,n){let{slots:_}=n;const{textColorClasses:x,textColorStyles:E}=useTextColor(toRef(t,"color"));return useRender(()=>{const S=!!(_.default||t.title);return createVNode(t.tag,{class:["v-list-subheader",{"v-list-subheader--inset":t.inset,"v-list-subheader--sticky":t.sticky},x.value,t.class],style:[{textColorStyles:E},t.style]},{default:()=>[S&&createVNode("div",{class:"v-list-subheader__text"},[_.default?.()??t.title])]})}),{}}}),makeVListChildrenProps=propsFactory({items:Array},"VListChildren"),VListChildren=genericComponent()({name:"VListChildren",props:makeVListChildrenProps(),setup(t,n){let{slots:_}=n;return createList(),()=>_.default?.()??t.items?.map(x=>{let{children:E,props:S,type:C,raw:T}=x;if(C==="divider")return _.divider?.({props:S})??createVNode(VDivider,S,null);if(C==="subheader")return _.subheader?.({props:S})??createVNode(VListSubheader,S,null);const B={subtitle:_.subtitle?D=>_.subtitle?.({...D,item:T}):void 0,prepend:_.prepend?D=>_.prepend?.({...D,item:T}):void 0,append:_.append?D=>_.append?.({...D,item:T}):void 0,title:_.title?D=>_.title?.({...D,item:T}):void 0},[A,I]=VListGroup.filterProps(S);return E?createVNode(VListGroup,mergeProps({value:S?.value},A),{activator:D=>{let{props:M}=D;return _.header?_.header({props:{...S,...M}}):createVNode(VListItem,mergeProps(S,M),B)},default:()=>createVNode(VListChildren,{items:E},_)}):_.item?_.item({props:S}):createVNode(VListItem,S,B)})}}),makeItemsProps=propsFactory({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean},"list-items");function transformItem$2(t,n){const _=getPropertyFromItem(n,t.itemTitle,n),x=t.returnObject?n:getPropertyFromItem(n,t.itemValue,_),E=getPropertyFromItem(n,t.itemChildren),S=t.itemProps===!0?typeof n=="object"&&n!=null&&!Array.isArray(n)?"children"in n?pick$1(n,["children"])[1]:n:void 0:getPropertyFromItem(n,t.itemProps),C={title:_,value:x,...S};return{title:String(C.title??""),value:C.value,props:C,children:Array.isArray(E)?transformItems$2(t,E):void 0,raw:n}}function transformItems$2(t,n){const _=[];for(const x of n)_.push(transformItem$2(t,x));return _}function useItems(t){const n=computed(()=>transformItems$2(t,t.items));return useTransformItems(n,_=>transformItem$2(t,_))}function useTransformItems(t,n){function _(E){return E.filter(S=>S!==null||t.value.some(C=>C.value===null)).map(S=>t.value.find(T=>deepEqual$3(S,T.value))??n(S))}function x(E){return E.map(S=>{let{value:C}=S;return C})}return{items:t,transformIn:_,transformOut:x}}function isPrimitive$1(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"}function transformItem$1(t,n){const _=getPropertyFromItem(n,t.itemType,"item"),x=isPrimitive$1(n)?n:getPropertyFromItem(n,t.itemTitle),E=getPropertyFromItem(n,t.itemValue,void 0),S=getPropertyFromItem(n,t.itemChildren),C=t.itemProps===!0?pick$1(n,["children"])[1]:getPropertyFromItem(n,t.itemProps),T={title:x,value:E,...C};return{type:_,title:T.title,value:T.value,props:T,children:_==="item"&&S?transformItems$1(t,S):void 0,raw:n}}function transformItems$1(t,n){const _=[];for(const x of n)_.push(transformItem$1(t,x));return _}function useListItems(t){return{items:computed(()=>transformItems$1(t,t.items))}}const makeVListProps=propsFactory({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},nav:Boolean,...makeNestedProps({selectStrategy:"single-leaf",openStrategy:"list"}),...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),itemType:{type:String,default:"type"},...makeItemsProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"text"})},"VList"),VList=genericComponent()({name:"VList",props:makeVListProps(),emits:{"update:selected":t=>!0,"update:opened":t=>!0,"click:open":t=>!0,"click:select":t=>!0},setup(t,n){let{slots:_}=n;const{items:x}=useListItems(t),{themeClasses:E}=provideTheme(t),{backgroundColorClasses:S,backgroundColorStyles:C}=useBackgroundColor(toRef(t,"bgColor")),{borderClasses:T}=useBorder(t),{densityClasses:B}=useDensity(t),{dimensionStyles:A}=useDimension(t),{elevationClasses:I}=useElevation(t),{roundedClasses:D}=useRounded(t),{open:M,select:V}=useNested(t),L=computed(()=>t.lines?`v-list--${t.lines}-line`:void 0),F=toRef(t,"activeColor"),j=toRef(t,"baseColor"),U=toRef(t,"color");createList(),provideDefaults({VListGroup:{activeColor:F,baseColor:j,color:U},VListItem:{activeClass:toRef(t,"activeClass"),activeColor:F,baseColor:j,color:U,density:toRef(t,"density"),disabled:toRef(t,"disabled"),lines:toRef(t,"lines"),nav:toRef(t,"nav"),variant:toRef(t,"variant")}});const H=shallowRef(!1),Y=ref$1();function Z(ue){H.value=!0}function ne(ue){H.value=!1}function re(ue){!H.value&&!(ue.relatedTarget&&Y.value?.contains(ue.relatedTarget))&&ce()}function X(ue){if(Y.value){if(ue.key==="ArrowDown")ce("next");else if(ue.key==="ArrowUp")ce("prev");else if(ue.key==="Home")ce("first");else if(ue.key==="End")ce("last");else return;ue.preventDefault()}}function ce(ue){if(Y.value)return focusChild(Y.value,ue)}return useRender(()=>createVNode(t.tag,{ref:Y,class:["v-list",{"v-list--disabled":t.disabled,"v-list--nav":t.nav},E.value,S.value,T.value,B.value,I.value,L.value,D.value,t.class],style:[C.value,A.value,t.style],tabindex:t.disabled||H.value?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:Z,onFocusout:ne,onFocus:re,onKeydown:X},{default:()=>[createVNode(VListChildren,{items:x.value},_)]})),{open:M,select:V,focus:ce}}}),makeVListItemActionProps=propsFactory({start:Boolean,end:Boolean,...makeComponentProps(),...makeTagProps()},"VListItemAction"),VListItemAction=genericComponent()({name:"VListItemAction",props:makeVListItemActionProps(),setup(t,n){let{slots:_}=n;return useRender(()=>createVNode(t.tag,{class:["v-list-item-action",{"v-list-item-action--start":t.start,"v-list-item-action--end":t.end},t.class],style:t.style},_)),{}}}),VNavigationDrawer$1="";function useSticky(t){let{rootEl:n,isSticky:_,layoutItemStyles:x}=t;const E=shallowRef(!1),S=shallowRef(0),C=computed(()=>{const A=typeof E.value=="boolean"?"top":E.value;return[_.value?{top:"auto",bottom:"auto",height:void 0}:void 0,E.value?{[A]:convertToUnit(S.value)}:{top:x.value.top}]});onMounted(()=>{watch(_,A=>{A?window.addEventListener("scroll",B,{passive:!0}):window.removeEventListener("scroll",B)},{immediate:!0})}),onBeforeUnmount(()=>{window.removeEventListener("scroll",B)});let T=0;function B(){const A=T>window.scrollY?"up":"down",I=n.value.getBoundingClientRect(),D=parseFloat(x.value.top??0),M=window.scrollY-Math.max(0,S.value-D),V=I.height+Math.max(S.value,D)-window.scrollY-window.innerHeight,L=parseFloat(getComputedStyle(n.value).getPropertyValue("--v-body-scroll-y"))||0;I.height<window.innerHeight-D?(E.value="top",S.value=D):A==="up"&&E.value==="bottom"||A==="down"&&E.value==="top"?(S.value=window.scrollY+I.top-L,E.value=!0):A==="down"&&V<=0?(S.value=0,E.value="bottom"):A==="up"&&M<=0&&(L?E.value!=="top"&&(S.value=-M+L+D,E.value="top"):(S.value=I.top+M,E.value="top")),T=window.scrollY}return{isStuck:E,stickyStyles:C}}const HORIZON=100,HISTORY=20;function kineticEnergyToVelocity(t){const n=1.41421356237;return(t<0?-1:1)*Math.sqrt(Math.abs(t))*n}function calculateImpulseVelocity(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let n=0;for(let _=t.length-1;_>0;_--){if(t[_].t===t[_-1].t)continue;const x=kineticEnergyToVelocity(n),E=(t[_].d-t[_-1].d)/(t[_].t-t[_-1].t);n+=(E-x)*Math.abs(E),_===t.length-1&&(n*=.5)}return kineticEnergyToVelocity(n)*1e3}function useVelocity(){const t={};function n(E){Array.from(E.changedTouches).forEach(S=>{(t[S.identifier]??(t[S.identifier]=new CircularBuffer(HISTORY))).push([E.timeStamp,S])})}function _(E){Array.from(E.changedTouches).forEach(S=>{delete t[S.identifier]})}function x(E){const S=t[E]?.values().reverse();if(!S)throw new Error(`No samples for touch id ${E}`);const C=S[0],T=[],B=[];for(const A of S){if(C[0]-A[0]>HORIZON)break;T.push({t:A[0],d:A[1].clientX}),B.push({t:A[0],d:A[1].clientY})}return{x:calculateImpulseVelocity(T),y:calculateImpulseVelocity(B),get direction(){const{x:A,y:I}=this,[D,M]=[Math.abs(A),Math.abs(I)];return D>M&&A>=0?"right":D>M&&A<=0?"left":M>D&&I>=0?"down":M>D&&I<=0?"up":oops$1()}}}return{addMovement:n,endTouch:_,getVelocity:x}}function oops$1(){throw new Error}function useTouch(t){let{isActive:n,isTemporary:_,width:x,touchless:E,position:S}=t;onMounted(()=>{window.addEventListener("touchstart",U,{passive:!0}),window.addEventListener("touchmove",H,{passive:!1}),window.addEventListener("touchend",Y,{passive:!0})}),onBeforeUnmount(()=>{window.removeEventListener("touchstart",U),window.removeEventListener("touchmove",H),window.removeEventListener("touchend",Y)});const C=computed(()=>["left","right"].includes(S.value)),{addMovement:T,endTouch:B,getVelocity:A}=useVelocity();let I=!1;const D=shallowRef(!1),M=shallowRef(0),V=shallowRef(0);let L;function F(ne,re){return(S.value==="left"?ne:S.value==="right"?document.documentElement.clientWidth-ne:S.value==="top"?ne:S.value==="bottom"?document.documentElement.clientHeight-ne:oops())-(re?x.value:0)}function j(ne){let re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const X=S.value==="left"?(ne-V.value)/x.value:S.value==="right"?(document.documentElement.clientWidth-ne-V.value)/x.value:S.value==="top"?(ne-V.value)/x.value:S.value==="bottom"?(document.documentElement.clientHeight-ne-V.value)/x.value:oops();return re?Math.max(0,Math.min(1,X)):X}function U(ne){if(E.value)return;const re=ne.changedTouches[0].clientX,X=ne.changedTouches[0].clientY,ce=25,ue=S.value==="left"?re<ce:S.value==="right"?re>document.documentElement.clientWidth-ce:S.value==="top"?X<ce:S.value==="bottom"?X>document.documentElement.clientHeight-ce:oops(),_e=n.value&&(S.value==="left"?re<x.value:S.value==="right"?re>document.documentElement.clientWidth-x.value:S.value==="top"?X<x.value:S.value==="bottom"?X>document.documentElement.clientHeight-x.value:oops());(ue||_e||n.value&&_.value)&&(I=!0,L=[re,X],V.value=F(C.value?re:X,n.value),M.value=j(C.value?re:X),B(ne),T(ne))}function H(ne){const re=ne.changedTouches[0].clientX,X=ne.changedTouches[0].clientY;if(I){if(!ne.cancelable){I=!1;return}const ue=Math.abs(re-L[0]),_e=Math.abs(X-L[1]);(C.value?ue>_e&&ue>3:_e>ue&&_e>3)?(D.value=!0,I=!1):(C.value?_e:ue)>3&&(I=!1)}if(!D.value)return;ne.preventDefault(),T(ne);const ce=j(C.value?re:X,!1);M.value=Math.max(0,Math.min(1,ce)),ce>1?V.value=F(C.value?re:X,!0):ce<0&&(V.value=F(C.value?re:X,!1))}function Y(ne){if(I=!1,!D.value)return;T(ne),D.value=!1;const re=A(ne.changedTouches[0].identifier),X=Math.abs(re.x),ce=Math.abs(re.y);(C.value?X>ce&&X>400:ce>X&&ce>3)?n.value=re.direction===({left:"right",right:"left",top:"down",bottom:"up"}[S.value]||oops()):n.value=M.value>.5}const Z=computed(()=>D.value?{transform:S.value==="left"?`translateX(calc(-100% + ${M.value*x.value}px))`:S.value==="right"?`translateX(calc(100% - ${M.value*x.value}px))`:S.value==="top"?`translateY(calc(-100% + ${M.value*x.value}px))`:S.value==="bottom"?`translateY(calc(100% - ${M.value*x.value}px))`:oops(),transition:"none"}:void 0);return{isDragging:D,dragProgress:M,dragStyles:Z}}function oops(){throw new Error}function useScopeId(){const n=getCurrentInstance("useScopeId").vnode.scopeId;return{scopeId:n?{[n]:""}:void 0}}const locations=["start","end","left","right","top","bottom"],makeVNavigationDrawerProps=propsFactory({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>locations.includes(t)},sticky:Boolean,...makeBorderProps(),...makeComponentProps(),...makeElevationProps(),...makeLayoutItemProps(),...makeRoundedProps(),...makeTagProps({tag:"nav"}),...makeThemeProps()},"VNavigationDrawer"),VNavigationDrawer=genericComponent()({name:"VNavigationDrawer",props:makeVNavigationDrawerProps(),emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,n){let{attrs:_,emit:x,slots:E}=n;const{isRtl:S}=useRtl(),{themeClasses:C}=provideTheme(t),{borderClasses:T}=useBorder(t),{backgroundColorClasses:B,backgroundColorStyles:A}=useBackgroundColor(toRef(t,"color")),{elevationClasses:I}=useElevation(t),{mobile:D}=useDisplay(),{roundedClasses:M}=useRounded(t),V=useRouter$1(),L=useProxiedModel(t,"modelValue",null,oe=>!!oe),{ssrBootStyles:F}=useSsrBoot(),{scopeId:j}=useScopeId(),U=ref$1(),H=shallowRef(!1),Y=computed(()=>t.rail&&t.expandOnHover&&H.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),Z=computed(()=>toPhysical(t.location,S.value)),ne=computed(()=>!t.permanent&&(D.value||t.temporary)),re=computed(()=>t.sticky&&!ne.value&&Z.value!=="bottom");t.expandOnHover&&t.rail!=null&&watch(H,oe=>x("update:rail",!oe)),t.disableResizeWatcher||watch(ne,oe=>!t.permanent&&nextTick$2(()=>L.value=!oe)),!t.disableRouteWatcher&&V&&watch(V.currentRoute,()=>ne.value&&(L.value=!1)),watch(()=>t.permanent,oe=>{oe&&(L.value=!0)}),onBeforeMount(()=>{t.modelValue!=null||ne.value||(L.value=t.permanent||!D.value)});const{isDragging:X,dragProgress:ce,dragStyles:ue}=useTouch({isActive:L,isTemporary:ne,width:Y,touchless:toRef(t,"touchless"),position:Z}),_e=computed(()=>{const oe=ne.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):Y.value;return X.value?oe*ce.value:oe}),{layoutItemStyles:ye,layoutItemScrimStyles:ie}=useLayoutItem({id:t.name,order:computed(()=>parseInt(t.order,10)),position:Z,layoutSize:_e,elementSize:Y,active:computed(()=>L.value||X.value),disableTransitions:computed(()=>X.value),absolute:computed(()=>t.absolute||re.value&&typeof W.value!="string")}),{isStuck:W,stickyStyles:O}=useSticky({rootEl:U,isSticky:re,layoutItemStyles:ye}),z=useBackgroundColor(computed(()=>typeof t.scrim=="string"?t.scrim:null)),J=computed(()=>({...X.value?{opacity:ce.value*.2,transition:"none"}:void 0,...ie.value}));provideDefaults({VList:{bgColor:"transparent"}});function ee(){H.value=!0}function ae(){H.value=!1}return useRender(()=>{const oe=E.image||t.image;return createVNode(Fragment,null,[createVNode(t.tag,mergeProps({ref:U,onMouseenter:ee,onMouseleave:ae,class:["v-navigation-drawer",`v-navigation-drawer--${Z.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":H.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":ne.value,"v-navigation-drawer--active":L.value,"v-navigation-drawer--sticky":re.value},C.value,B.value,T.value,I.value,M.value,t.class],style:[A.value,ye.value,ue.value,F.value,O.value,t.style]},j,_),{default:()=>[oe&&createVNode("div",{key:"image",class:"v-navigation-drawer__img"},[E.image?E.image?.({image:t.image}):createVNode("img",{src:t.image,alt:""},null)]),E.prepend&&createVNode("div",{class:"v-navigation-drawer__prepend"},[E.prepend?.()]),createVNode("div",{class:"v-navigation-drawer__content"},[E.default?.()]),E.append&&createVNode("div",{class:"v-navigation-drawer__append"},[E.append?.()])]}),createVNode(Transition,{name:"fade-transition"},{default:()=>[ne.value&&(X.value||L.value)&&!!t.scrim&&createVNode("div",mergeProps({class:["v-navigation-drawer__scrim",z.backgroundColorClasses.value],style:[J.value,z.backgroundColorStyles.value],onClick:()=>L.value=!1},j),null)]})])}),{isStuck:W}}}),_sfc_main$22=defineComponent$1({__name:"NavigationPrincipale",setup(t){const{useI18n:n}=_(),{t:_}=n(),x=inject$1("constl"),{traduireNom:E}=utiliserLangues(),S=ref$1({}),C=E(S);enregistrercoute(x?.profil.suivreNoms({f:M=>S.value=M}));const T=ref$1();onMounted(async()=>{T.value=await x?.obtIdDispositif()});const{nomDispositif:B,typeDispositif:A}=utiliserNomEtTypeDispositif({idDispositif:T}),I=computed(()=>obtIcneDispositifDeType(A.value)),D=[{icne:"mdi-home",texte:_("navigation.accueil"),chemin:"/"},{icne:"mdi-database",texte:_("navigation.donnes"),chemin:"/donnes"},{icne:"mdi-pin",texte:_("navigation.favoris"),chemin:"/favoris"},{icne:"mdi-magnify",texte:_("navigation.recherche"),chemin:"/recherche"},{icne:"mdi-lightning-bolt",texte:_("navigation.automatisations"),chemin:"/automatisations"},{icne:"mdi-bug",texte:_("navigation.signalements"),chemin:"/signalements"}];return(M,V)=>(openBlock(),createBlock(VNavigationDrawer,{"expand-on-hover":"",permanent:"",rail:""},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{title:unref(C),onClick:V[0]||(V[0]=L=>M.$router.push({path:"/compte"}))},{prepend:withCtx(()=>[createVNode(_sfc_main$24)]),subtitle:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(I.value),1)]),_:1}),createVNode(_sfc_main$23,{texte:unref(B)||unref(_)("dispositifs.sansNom"),"longueur-max":20},null,8,["texte"])]),_:1},8,["title"])]),_:1}),createVNode(VDivider),createVNode(VList,{density:"compact",class:"align-start",nav:""},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(D,L=>createVNode(VListItem,{key:L.chemin,"prepend-icon":L.icne,title:L.texte,onClick:F=>M.$router.push(encodeURI(L.chemin))},null,8,["prepend-icon","title","onClick"])),64))]),_:1})]),_:1}))}}),_sfc_main$21=defineComponent$1({__name:"PagePrincipale",setup(t){return(n,_)=>{const x=resolveComponent("router-view");return openBlock(),createElementBlock("div",null,[createVNode(_sfc_main$22),createVNode(x,null,{default:withCtx(({Component:E})=>[createVNode(Transition,{name:"fade"},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(E)))]),_:2},1024)]),_:1})])}}});let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let t=0;t<256;++t)byteToHex.push((t+256).toString(16).slice(1));function unsafeStringify(t,n=0){return(byteToHex[t[n+0]]+byteToHex[t[n+1]]+byteToHex[t[n+2]]+byteToHex[t[n+3]]+"-"+byteToHex[t[n+4]]+byteToHex[t[n+5]]+"-"+byteToHex[t[n+6]]+byteToHex[t[n+7]]+"-"+byteToHex[t[n+8]]+byteToHex[t[n+9]]+"-"+byteToHex[t[n+10]]+byteToHex[t[n+11]]+byteToHex[t[n+12]]+byteToHex[t[n+13]]+byteToHex[t[n+14]]+byteToHex[t[n+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(t,n,_){if(native.randomUUID&&!n&&!t)return native.randomUUID();t=t||{};const x=t.random||(t.rng||rng)();if(x[6]=x[6]&15|64,x[8]=x[8]&63|128,n){_=_||0;for(let E=0;E<16;++E)n[_+E]=x[E];return n}return unsafeStringify(x)}const _hoisted_1$M=["width"],_hoisted_2$y=createBaseVNode("title",null,"Logo Constellation",-1),_hoisted_3$l=["x1","y1","x2","y2"],_hoisted_4$b=["cx","cy"],_hoisted_5$a=["to","dur","begin"],_sfc_main$20=defineComponent$1({__name:"LogoAnim",props:{largeur:{},delai:{},debut:{}},setup(t){const n=t,_=computed(()=>n.delai.toString()+"s"),x=ref$1([{cls:"cls-1",x:70.1742129851985,y:1.87,r:2},{cls:"cls-2",x:67.306684713793,y:16.47,r:5},{cls:"cls-3",x:34.3464829934943,y:10.01,r:3},{cls:"cls-4",x:22.5783740121382,y:31.93,r:3},{cls:"cls-1",x:13.8115094092477,y:56.91,r:2},{cls:"cls-2",x:46.9376282583068,y:69.76,r:6},{cls:"cls-3",x:86.0040169410121,y:61.32,r:4},{cls:"cls-4",x:91.0120944854386,y:54.13,r:2},{cls:"cls-1",x:112.68938567,y:63.71,r:5},{cls:"cls-2",x:100.419159062132,y:66.3,r:2},{cls:"cls-3",x:88.4938654324761,y:82.18,r:4},{cls:"cls-4",x:97.9593284722526,y:84.1,r:3},{cls:"cls-1",x:69.5525695323757,y:90.44,r:5},{cls:"cls-2",x:64.1411605466533,y:94.6,r:2},{cls:"cls-3",x:157.031284111252,y:83.37,r:3},{cls:"cls-4",x:136.188490590752,y:68.42,r:5},{cls:"cls-1",x:142.952888267913,y:53.85,r:2},{cls:"cls-2",x:162.02953761516,y:50.8,r:4},{cls:"cls-3",x:185.910142776055,y:57.71,r:4},{cls:"cls-4",x:137.021896694756,y:38.01,r:5},{cls:"cls-1",x:142.973627909008,y:29.65,r:3}].map(S=>Object.assign({},S,{begin:`${Math.random()*n.debut}s`,i:v4()}))),E=ref$1([{x1:70.1742129851985,y1:1.87,x2:34.3464829934943,y2:10.01,i:v4()},{x1:67.306684713793,y1:16.47,x2:34.3464829934943,y2:10.01,i:v4()},{x1:34.3464829934943,y1:10.01,x2:22.5783740121382,y2:31.93,i:v4()},{x1:22.5783740121382,y1:31.93,x2:13.8115094092477,y2:56.91,i:v4()},{x1:13.8115094092477,y1:56.91,x2:46.9376282583068,y2:69.76,i:v4()},{x1:46.9376282583068,y1:69.76,x2:86.0040169410121,y2:61.32,i:v4()},{x1:86.0040169410121,y1:61.32,x2:91.0120944854386,y2:54.13,i:v4()},{x1:86.0040169410121,y1:61.32,x2:100.419159062132,y2:66.3,i:v4()},{x1:91.0120944854386,y1:54.13,x2:112.68938567,y2:63.71,i:v4()},{x1:100.419159062132,y1:66.3,x2:112.68938567,y2:63.71,i:v4()},{x1:112.68938567,y1:63.71,x2:97.9593284722526,y2:84.1,i:v4()},{x1:97.9593284722526,y1:84.1,x2:88.4938654324761,y2:82.18,i:v4()},{x1:88.4938654324761,y1:82.18,x2:69.5525695323757,y2:90.44,i:v4()},{x1:69.5525695323757,y1:90.44,x2:64.1411605466533,y2:94.6,i:v4()},{x1:112.68938567,y1:63.71,x2:136.188490590752,y2:68.42,i:v4()},{x1:136.188490590752,y1:68.42,x2:157.031284111252,y2:83.37,i:v4()},{x1:136.188490590752,y1:68.42,x2:142.952888267913,y2:53.85,i:v4()},{x1:112.68938567,y1:63.71,x2:142.952888267913,y2:53.85,i:v4()},{x1:142.952888267913,y1:53.85,x2:137.021896694756,y2:38.01,i:v4()},{x1:91.0120944854386,y1:54.13,x2:137.021896694756,y2:38.01,i:v4()},{x1:137.021896694756,y1:38.01,x2:142.973627909008,y2:29.65,i:v4()},{x1:137.021896694756,y1:38.01,x2:162.02953761516,y2:50.8,i:v4()},{x1:142.952888267913,y1:53.85,x2:162.02953761516,y2:50.8,i:v4()},{x1:162.02953761516,y1:50.8,x2:185.910142776055,y2:57.71,i:v4()}]);return(S,C)=>(openBlock(),createElementBlock("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -10 200 110",width:S.largeur},[_hoisted_2$y,(openBlock(!0),createElementBlock(Fragment,null,renderList(E.value,T=>(openBlock(),createElementBlock("line",{key:T.i,class:"l",x1:T.x1,y1:T.y1,x2:T.x2,y2:T.y2},null,8,_hoisted_3$l))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(x.value,T=>(openBlock(),createElementBlock("circle",{key:T.i,class:normalizeClass(T.cls),cx:T.x,cy:T.y},[createBaseVNode("animate",{attributeName:"r",to:T.r,dur:_.value,begin:T.begin,fill:"freeze",repeatCount:"1"},null,8,_hoisted_5$a)],10,_hoisted_4$b))),128))],8,_hoisted_1$M))}}),LogoAnim__vue_vue_type_style_index_0_lang="",URL_SIGNALEMENTS="https://github.com/reseau-constellation/iug/issues",URL_TLCHARGEMENTS="https://github.com/reseau-constellation/iug/releases",IPA_TLCHARGEMENTS="https://api.github.com/repos/reseau-constellation/iug/releases",COURRIEL_SIGNALEMENTS="julien.malard@mail.mcgill.ca",MAX_TAILLE_IMAGE$4=500*1e3,GABARIT_CODE="https://github.com/reseau-constellation/gabarits/archive/refs/heads/main.zip";var imageFileResize=function({file:t,width:n,height:_,type:x}){return new Promise(function(E,S){let C=["jpg","gif","bmp","png","jpeg","svg"];try{if(t.name&&t.name.split(".").reverse()[0]&&C.includes(t.name.split(".").reverse()[0].toLowerCase())&&t.size&&t.type){let T=x||"jpeg";const B=n||500,A=_||300,I=t.name,D=new FileReader;D.readAsDataURL(t),D.onload=M=>{const V=new Image;V.src=M.target.result,V.onload=()=>{const L=document.createElement("canvas");L.width=B,L.height=A;const F=L.getContext("2d");F.drawImage(V,0,0,B,A),F.canvas.toBlob(j=>{const U=new File([j],I,{type:`image/${T.toLowerCase()}`,lastModified:Date.now()});E(U)},"image/jpeg",1)},D.onerror=L=>S(L)}}else S("File not supported!")}catch(T){console.log("Error while image resize: ",T),S(T)}})};const convert$2=getDefaultExportFromCjs(imageFileResize),VBtn$1="",VBtnToggle$1="",VBtnGroup$1="",makeVBtnGroupProps=propsFactory({divided:Boolean,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeElevationProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps()},"VBtnGroup"),VBtnGroup=genericComponent()({name:"VBtnGroup",props:makeVBtnGroupProps(),setup(t,n){let{slots:_}=n;const{themeClasses:x}=provideTheme(t),{densityClasses:E}=useDensity(t),{borderClasses:S}=useBorder(t),{elevationClasses:C}=useElevation(t),{roundedClasses:T}=useRounded(t);provideDefaults({VBtn:{height:"auto",color:toRef(t,"color"),density:toRef(t,"density"),flat:!0,variant:toRef(t,"variant")}}),useRender(()=>createVNode(t.tag,{class:["v-btn-group",{"v-btn-group--divided":t.divided},x.value,S.value,E.value,C.value,T.value,t.class],style:t.style},_))}}),makeGroupProps=propsFactory({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),makeGroupItemProps=propsFactory({value:null,disabled:Boolean,selectedClass:String},"group-item");function useGroupItem(t,n){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const x=getCurrentInstance("useGroupItem");if(!x)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const E=getUid();provide(Symbol.for(`${n.description}:id`),E);const S=inject$1(n,null);if(!S){if(!_)return S;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${n.description}`)}const C=toRef(t,"value"),T=computed(()=>!!(S.disabled.value||t.disabled));S.register({id:E,value:C,disabled:T},x),onBeforeUnmount(()=>{S.unregister(E)});const B=computed(()=>S.isSelected(E)),A=computed(()=>B.value&&[S.selectedClass.value,t.selectedClass]);return watch(B,I=>{x.emit("group:selected",{value:I})}),{id:E,isSelected:B,toggle:()=>S.select(E,!B.value),select:I=>S.select(E,I),selectedClass:A,value:C,disabled:T,group:S}}function useGroup(t,n){let _=!1;const x=reactive([]),E=useProxiedModel(t,"modelValue",[],M=>M==null?[]:getIds(x,wrapInArray(M)),M=>{const V=getValues(x,M);return t.multiple?V:V[0]}),S=getCurrentInstance("useGroup");function C(M,V){const L=M,F=Symbol.for(`${n.description}:id`),U=findChildrenWithProvide(F,S?.vnode).indexOf(V);U>-1?x.splice(U,0,L):x.push(L)}function T(M){if(_)return;B();const V=x.findIndex(L=>L.id===M);x.splice(V,1)}function B(){const M=x.find(V=>!V.disabled);M&&t.mandatory==="force"&&!E.value.length&&(E.value=[M.id])}onMounted(()=>{B()}),onBeforeUnmount(()=>{_=!0});function A(M,V){const L=x.find(F=>F.id===M);if(!(V&&L?.disabled))if(t.multiple){const F=E.value.slice(),j=F.findIndex(H=>H===M),U=~j;if(V=V??!U,U&&t.mandatory&&F.length<=1||!U&&t.max!=null&&F.length+1>t.max)return;j<0&&V?F.push(M):j>=0&&!V&&F.splice(j,1),E.value=F}else{const F=E.value.includes(M);if(t.mandatory&&F)return;E.value=V??!F?[M]:[]}}function I(M){if(t.multiple,E.value.length){const V=E.value[0],L=x.findIndex(U=>U.id===V);let F=(L+M)%x.length,j=x[F];for(;j.disabled&&F!==L;)F=(F+M)%x.length,j=x[F];if(j.disabled)return;E.value=[x[F].id]}else{const V=x.find(L=>!L.disabled);V&&(E.value=[V.id])}}const D={register:C,unregister:T,selected:E,select:A,disabled:toRef(t,"disabled"),prev:()=>I(x.length-1),next:()=>I(1),isSelected:M=>E.value.includes(M),selectedClass:computed(()=>t.selectedClass),items:computed(()=>x),getItemIndex:M=>getItemIndex(x,M)};return provide(n,D),D}function getItemIndex(t,n){const _=getIds(t,[n]);return _.length?t.findIndex(x=>x.id===_[0]):-1}function getIds(t,n){const _=[];return n.forEach(x=>{const E=t.find(C=>deepEqual$3(x,C.value)),S=t[x];E?.value!=null?_.push(E.id):S!=null&&_.push(S.id)}),_}function getValues(t,n){const _=[];return n.forEach(x=>{const E=t.findIndex(S=>S.id===x);if(~E){const S=t[E];_.push(S.value!=null?S.value:E)}}),_}const VBtnToggleSymbol=Symbol.for("vuetify:v-btn-toggle"),makeVBtnToggleProps=propsFactory({...makeVBtnGroupProps(),...makeGroupProps()},"VBtnToggle"),VBtnToggle=genericComponent()({name:"VBtnToggle",props:makeVBtnToggleProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{slots:_}=n;const{isSelected:x,next:E,prev:S,select:C,selected:T}=useGroup(t,VBtnToggleSymbol);return useRender(()=>{const[B]=VBtnGroup.filterProps(t);return createVNode(VBtnGroup,mergeProps({class:["v-btn-toggle",t.class]},B,{style:t.style}),{default:()=>[_.default?.({isSelected:x,next:E,prev:S,select:C,selected:T})]})}),{next:E,prev:S,select:C}}}),VProgressCircular$1="";function useIntersectionObserver(t,n){const _=ref$1(),x=shallowRef(!1);if(SUPPORTS_INTERSECTION){const E=new IntersectionObserver(S=>{t?.(S,E),x.value=!!S.find(C=>C.isIntersecting)},n);onBeforeUnmount(()=>{E.disconnect()}),watch(_,(S,C)=>{C&&(E.unobserve(C),x.value=!1),S&&E.observe(S)},{flush:"post"})}return{intersectionRef:_,isIntersecting:x}}const makeVProgressCircularProps=propsFactory({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...makeComponentProps(),...makeSizeProps(),...makeTagProps({tag:"div"}),...makeThemeProps()},"VProgressCircular"),VProgressCircular=genericComponent()({name:"VProgressCircular",props:makeVProgressCircularProps(),setup(t,n){let{slots:_}=n;const x=20,E=2*Math.PI*x,S=ref$1(),{themeClasses:C}=provideTheme(t),{sizeClasses:T,sizeStyles:B}=useSize(t),{textColorClasses:A,textColorStyles:I}=useTextColor(toRef(t,"color")),{textColorClasses:D,textColorStyles:M}=useTextColor(toRef(t,"bgColor")),{intersectionRef:V,isIntersecting:L}=useIntersectionObserver(),{resizeRef:F,contentRect:j}=useResizeObserver(),U=computed(()=>Math.max(0,Math.min(100,parseFloat(t.modelValue)))),H=computed(()=>Number(t.width)),Y=computed(()=>B.value?Number(t.size):j.value?j.value.width:Math.max(H.value,32)),Z=computed(()=>x/(1-H.value/Y.value)*2),ne=computed(()=>H.value/Y.value*Z.value),re=computed(()=>convertToUnit((100-U.value)/100*E));return watchEffect(()=>{V.value=S.value,F.value=S.value}),useRender(()=>createVNode(t.tag,{ref:S,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!t.indeterminate,"v-progress-circular--visible":L.value,"v-progress-circular--disable-shrink":t.indeterminate==="disable-shrink"},C.value,T.value,A.value,t.class],style:[B.value,I.value,t.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t.indeterminate?void 0:U.value},{default:()=>[createVNode("svg",{style:{transform:`rotate(calc(-90deg + ${Number(t.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${Z.value} ${Z.value}`},[createVNode("circle",{class:["v-progress-circular__underlay",D.value],style:M.value,fill:"transparent",cx:"50%",cy:"50%",r:x,"stroke-width":ne.value,"stroke-dasharray":E,"stroke-dashoffset":0},null),createVNode("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:x,"stroke-width":ne.value,"stroke-dasharray":E,"stroke-dashoffset":re.value},null)]),_.default&&createVNode("div",{class:"v-progress-circular__content"},[_.default({value:U.value})])]})),{}}}),VProgressLinear$1="",oppositeMap={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},makeLocationProps=propsFactory({location:String},"location");function useLocation(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=arguments.length>2?arguments[2]:void 0;const{isRtl:x}=useRtl();return{locationStyles:computed(()=>{if(!t.location)return{};const{side:S,align:C}=parseAnchor(t.location.split(" ").length>1?t.location:`${t.location} center`,x.value);function T(A){return _?_(A):0}const B={};return S!=="center"&&(n?B[oppositeMap[S]]=`calc(100% - ${T(S)}px)`:B[S]=0),C!=="center"?n?B[oppositeMap[C]]=`calc(100% - ${T(C)}px)`:B[C]=0:(S==="center"?B.top=B.left="50%":B[{top:"left",bottom:"left",left:"top",right:"top"}[S]]="50%",B.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[S]),B})}}const makeVProgressLinearProps=propsFactory({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...makeComponentProps(),...makeLocationProps({location:"top"}),...makeRoundedProps(),...makeTagProps(),...makeThemeProps()},"VProgressLinear"),VProgressLinear=genericComponent()({name:"VProgressLinear",props:makeVProgressLinearProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{slots:_}=n;const x=useProxiedModel(t,"modelValue"),{isRtl:E,rtlClasses:S}=useRtl(),{themeClasses:C}=provideTheme(t),{locationStyles:T}=useLocation(t),{textColorClasses:B,textColorStyles:A}=useTextColor(t,"color"),{backgroundColorClasses:I,backgroundColorStyles:D}=useBackgroundColor(computed(()=>t.bgColor||t.color)),{backgroundColorClasses:M,backgroundColorStyles:V}=useBackgroundColor(t,"color"),{roundedClasses:L}=useRounded(t),{intersectionRef:F,isIntersecting:j}=useIntersectionObserver(),U=computed(()=>parseInt(t.max,10)),H=computed(()=>parseInt(t.height,10)),Y=computed(()=>parseFloat(t.bufferValue)/U.value*100),Z=computed(()=>parseFloat(x.value)/U.value*100),ne=computed(()=>E.value!==t.reverse),re=computed(()=>t.indeterminate?"fade-transition":"slide-x-transition"),X=computed(()=>t.bgOpacity==null?t.bgOpacity:parseFloat(t.bgOpacity));function ce(ue){if(!F.value)return;const{left:_e,right:ye,width:ie}=F.value.getBoundingClientRect(),W=ne.value?ie-ue.clientX+(ye-ie):ue.clientX-_e;x.value=Math.round(W/ie*U.value)}return useRender(()=>createVNode(t.tag,{ref:F,class:["v-progress-linear",{"v-progress-linear--absolute":t.absolute,"v-progress-linear--active":t.active&&j.value,"v-progress-linear--reverse":ne.value,"v-progress-linear--rounded":t.rounded,"v-progress-linear--rounded-bar":t.roundedBar,"v-progress-linear--striped":t.striped},L.value,C.value,S.value,t.class],style:[{bottom:t.location==="bottom"?0:void 0,top:t.location==="top"?0:void 0,height:t.active?convertToUnit(H.value):0,"--v-progress-linear-height":convertToUnit(H.value),...T.value},t.style],role:"progressbar","aria-hidden":t.active?"false":"true","aria-valuemin":"0","aria-valuemax":t.max,"aria-valuenow":t.indeterminate?void 0:Z.value,onClick:t.clickable&&ce},{default:()=>[t.stream&&createVNode("div",{key:"stream",class:["v-progress-linear__stream",B.value],style:{...A.value,[ne.value?"left":"right"]:convertToUnit(-H.value),borderTop:`${convertToUnit(H.value/2)} dotted`,opacity:X.value,top:`calc(50% - ${convertToUnit(H.value/4)})`,width:convertToUnit(100-Y.value,"%"),"--v-progress-linear-stream-to":convertToUnit(H.value*(ne.value?1:-1))}},null),createVNode("div",{class:["v-progress-linear__background",I.value],style:[D.value,{opacity:X.value,width:convertToUnit(t.stream?Y.value:100,"%")}]},null),createVNode(Transition,{name:re.value},{default:()=>[t.indeterminate?createVNode("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(ue=>createVNode("div",{key:ue,class:["v-progress-linear__indeterminate",ue,M.value],style:V.value},null))]):createVNode("div",{class:["v-progress-linear__determinate",M.value],style:[V.value,{width:convertToUnit(Z.value,"%")}]},null)]}),_.default&&createVNode("div",{class:"v-progress-linear__content"},[_.default({value:Z.value,buffer:Y.value})])]})),{}}}),makeLoaderProps=propsFactory({loading:[Boolean,String]},"loader");function useLoader(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{loaderClasses:computed(()=>({[`${n}--loading`]:t.loading}))}}function LoaderSlot(t,n){let{slots:_}=n;return createVNode("div",{class:`${t.name}__loader`},[_.default?.({color:t.color,isActive:t.active})||createVNode(VProgressLinear,{active:t.active,color:t.color,height:"2",indeterminate:!0},null)])}const positionValues=["static","relative","fixed","absolute","sticky"],makePositionProps=propsFactory({position:{type:String,validator:t=>positionValues.includes(t)}},"position");function usePosition(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{positionClasses:computed(()=>t.position?`${n}--${t.position}`:void 0)}}function useSelectLink(t,n){watch(()=>t.isActive?.value,_=>{t.isLink.value&&_&&n&&nextTick$2(()=>{n(!0)})},{immediate:!0})}const makeVBtnProps=propsFactory({active:{type:Boolean,default:void 0},symbol:{type:null,default:VBtnToggleSymbol},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:IconValue,appendIcon:IconValue,block:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:String,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeGroupItemProps(),...makeLoaderProps(),...makeLocationProps(),...makePositionProps(),...makeRoundedProps(),...makeRouterProps(),...makeSizeProps(),...makeTagProps({tag:"button"}),...makeThemeProps(),...makeVariantProps({variant:"elevated"})},"VBtn"),VBtn=genericComponent()({name:"VBtn",directives:{Ripple},props:makeVBtnProps(),emits:{"group:selected":t=>!0},setup(t,n){let{attrs:_,slots:x}=n;const{themeClasses:E}=provideTheme(t),{borderClasses:S}=useBorder(t),{colorClasses:C,colorStyles:T,variantClasses:B}=useVariant(t),{densityClasses:A}=useDensity(t),{dimensionStyles:I}=useDimension(t),{elevationClasses:D}=useElevation(t),{loaderClasses:M}=useLoader(t),{locationStyles:V}=useLocation(t),{positionClasses:L}=usePosition(t),{roundedClasses:F}=useRounded(t),{sizeClasses:j,sizeStyles:U}=useSize(t),H=useGroupItem(t,t.symbol,!1),Y=useLink$1(t,_),Z=computed(()=>t.active!==void 0?t.active:Y.isLink.value?Y.isActive?.value:H?.isSelected.value),ne=computed(()=>H?.disabled.value||t.disabled),re=computed(()=>t.variant==="elevated"&&!(t.disabled||t.flat||t.border)),X=computed(()=>{if(t.value!==void 0)return Object(t.value)===t.value?JSON.stringify(t.value,null,0):t.value});function ce(ue){ne.value||Y.isLink.value&&(ue.metaKey||ue.ctrlKey||ue.shiftKey||ue.button!==0||_.target==="_blank")||(Y.navigate?.(ue),H?.toggle())}return useSelectLink(Y,H?.select),useRender(()=>{const ue=Y.isLink.value?"a":t.tag,_e=!!(t.prependIcon||x.prepend),ye=!!(t.appendIcon||x.append),ie=!!(t.icon&&t.icon!==!0),W=H?.isSelected.value&&(!Y.isLink.value||Y.isActive?.value)||!H||Y.isActive?.value;return withDirectives(createVNode(ue,{type:ue==="a"?void 0:"button",class:["v-btn",H?.selectedClass.value,{"v-btn--active":Z.value,"v-btn--block":t.block,"v-btn--disabled":ne.value,"v-btn--elevated":re.value,"v-btn--flat":t.flat,"v-btn--icon":!!t.icon,"v-btn--loading":t.loading,"v-btn--stacked":t.stacked},E.value,S.value,W?C.value:void 0,A.value,D.value,M.value,L.value,F.value,j.value,B.value,t.class],style:[W?T.value:void 0,I.value,V.value,U.value,t.style],disabled:ne.value||void 0,href:Y.href.value,onClick:ce,value:X.value},{default:()=>[genOverlays(!0,"v-btn"),!t.icon&&_e&&createVNode("span",{key:"prepend",class:"v-btn__prepend"},[x.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!t.prependIcon,defaults:{VIcon:{icon:t.prependIcon}}},x.prepend):createVNode(VIcon,{key:"prepend-icon",icon:t.prependIcon},null)]),createVNode("span",{class:"v-btn__content","data-no-activator":""},[!x.default&&ie?createVNode(VIcon,{key:"content-icon",icon:t.icon},null):createVNode(VDefaultsProvider,{key:"content-defaults",disabled:!ie,defaults:{VIcon:{icon:t.icon}}},{default:()=>[x.default?.()??t.text]})]),!t.icon&&ye&&createVNode("span",{key:"append",class:"v-btn__append"},[x.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!t.appendIcon,defaults:{VIcon:{icon:t.appendIcon}}},x.append):createVNode(VIcon,{key:"append-icon",icon:t.appendIcon},null)]),!!t.loading&&createVNode("span",{key:"loader",class:"v-btn__loader"},[x.loader?.()??createVNode(VProgressCircular,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,size:"23",width:"2"},null)])]}),[[resolveDirective("ripple"),!ne.value&&t.ripple,null]])}),{}}}),VGrid="",makeVContainerProps=propsFactory({fluid:{type:Boolean,default:!1},...makeComponentProps(),...makeTagProps()},"VContainer"),VContainer=genericComponent()({name:"VContainer",props:makeVContainerProps(),setup(t,n){let{slots:_}=n;const{rtlClasses:x}=useRtl();return useRender(()=>createVNode(t.tag,{class:["v-container",{"v-container--fluid":t.fluid},x.value,t.class],style:t.style},_)),{}}}),breakpointProps=(()=>breakpoints.reduce((t,n)=>(t[n]={type:[Boolean,String,Number],default:!1},t),{}))(),offsetProps=(()=>breakpoints.reduce((t,n)=>{const _="offset"+capitalize$1(n);return t[_]={type:[String,Number],default:null},t},{}))(),orderProps=(()=>breakpoints.reduce((t,n)=>{const _="order"+capitalize$1(n);return t[_]={type:[String,Number],default:null},t},{}))(),propMap$1={col:Object.keys(breakpointProps),offset:Object.keys(offsetProps),order:Object.keys(orderProps)};function breakpointClass$1(t,n,_){let x=t;if(!(_==null||_===!1)){if(n){const E=n.replace(t,"");x+=`-${E}`}return t==="col"&&(x="v-"+x),t==="col"&&(_===""||_===!0)||(x+=`-${_}`),x.toLowerCase()}}const ALIGN_SELF_VALUES=["auto","start","end","center","baseline","stretch"],makeVColProps=propsFactory({cols:{type:[Boolean,String,Number],default:!1},...breakpointProps,offset:{type:[String,Number],default:null},...offsetProps,order:{type:[String,Number],default:null},...orderProps,alignSelf:{type:String,default:null,validator:t=>ALIGN_SELF_VALUES.includes(t)},...makeComponentProps(),...makeTagProps()},"VCol"),VCol=genericComponent()({name:"VCol",props:makeVColProps(),setup(t,n){let{slots:_}=n;const x=computed(()=>{const E=[];let S;for(S in propMap$1)propMap$1[S].forEach(T=>{const B=t[T],A=breakpointClass$1(S,T,B);A&&E.push(A)});const C=E.some(T=>T.startsWith("v-col-"));return E.push({"v-col":!C||!t.cols,[`v-col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),E});return()=>h$1(t.tag,{class:[x.value,t.class],style:t.style},_.default?.())}}),ALIGNMENT=["start","end","center"],SPACE=["space-between","space-around","space-evenly"];function makeRowProps(t,n){return breakpoints.reduce((_,x)=>{const E=t+capitalize$1(x);return _[E]=n(),_},{})}const ALIGN_VALUES=[...ALIGNMENT,"baseline","stretch"],alignValidator=t=>ALIGN_VALUES.includes(t),alignProps=makeRowProps("align",()=>({type:String,default:null,validator:alignValidator})),JUSTIFY_VALUES=[...ALIGNMENT,...SPACE],justifyValidator=t=>JUSTIFY_VALUES.includes(t),justifyProps=makeRowProps("justify",()=>({type:String,default:null,validator:justifyValidator})),ALIGN_CONTENT_VALUES=[...ALIGNMENT,...SPACE,"stretch"],alignContentValidator=t=>ALIGN_CONTENT_VALUES.includes(t),alignContentProps=makeRowProps("alignContent",()=>({type:String,default:null,validator:alignContentValidator})),propMap={align:Object.keys(alignProps),justify:Object.keys(justifyProps),alignContent:Object.keys(alignContentProps)},classMap={align:"align",justify:"justify",alignContent:"align-content"};function breakpointClass(t,n,_){let x=classMap[t];if(_!=null){if(n){const E=n.replace(t,"");x+=`-${E}`}return x+=`-${_}`,x.toLowerCase()}}const makeVRowProps=propsFactory({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:alignValidator},...alignProps,justify:{type:String,default:null,validator:justifyValidator},...justifyProps,alignContent:{type:String,default:null,validator:alignContentValidator},...alignContentProps,...makeComponentProps(),...makeTagProps()},"VRow"),VRow=genericComponent()({name:"VRow",props:makeVRowProps(),setup(t,n){let{slots:_}=n;const x=computed(()=>{const E=[];let S;for(S in propMap)propMap[S].forEach(C=>{const T=t[C],B=breakpointClass(S,C,T);B&&E.push(B)});return E.push({"v-row--no-gutters":t.noGutters,"v-row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),E});return()=>h$1(t.tag,{class:["v-row",x.value,t.class],style:t.style},_.default?.())}}),VSpacer=createSimpleFunctional("v-spacer","div","VSpacer"),makeDelayProps=propsFactory({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function useDelay(t,n){const _={},x=E=>()=>{if(!IN_BROWSER)return Promise.resolve(!0);const S=E==="openDelay";return _.closeDelay&&window.clearTimeout(_.closeDelay),delete _.closeDelay,_.openDelay&&window.clearTimeout(_.openDelay),delete _.openDelay,new Promise(C=>{const T=parseInt(t[E]??0,10);_[E]=window.setTimeout(()=>{n?.(S),C(S)},T)})};return{runCloseDelay:x("closeDelay"),runOpenDelay:x("openDelay")}}const makeVHoverProps=propsFactory({disabled:Boolean,modelValue:{type:Boolean,default:void 0},...makeDelayProps()},"VHover"),VHover=genericComponent()({name:"VHover",props:makeVHoverProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{slots:_}=n;const x=useProxiedModel(t,"modelValue"),{runOpenDelay:E,runCloseDelay:S}=useDelay(t,C=>!t.disabled&&(x.value=C));return()=>_.default?.({isHovering:x.value,props:{onMouseenter:E,onMouseleave:S}})}}),VSnackbar$1="",VOverlay$1="";function elementToViewport(t,n){return{x:t.x+n.x,y:t.y+n.y}}function getOffset(t,n){return{x:t.x-n.x,y:t.y-n.y}}function anchorToPoint(t,n){if(t.side==="top"||t.side==="bottom"){const{side:_,align:x}=t,E=x==="left"?0:x==="center"?n.width/2:x==="right"?n.width:x,S=_==="top"?0:_==="bottom"?n.height:_;return elementToViewport({x:E,y:S},n)}else if(t.side==="left"||t.side==="right"){const{side:_,align:x}=t,E=_==="left"?0:_==="right"?n.width:_,S=x==="top"?0:x==="center"?n.height/2:x==="bottom"?n.height:x;return elementToViewport({x:E,y:S},n)}return elementToViewport({x:n.width/2,y:n.height/2},n)}const locationStrategies={static:staticLocationStrategy,connected:connectedLocationStrategy},makeLocationStrategyProps=propsFactory({locationStrategy:{type:[String,Function],default:"static",validator:t=>typeof t=="function"||t in locationStrategies},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function useLocationStrategies(t,n){const _=ref$1({}),x=ref$1();IN_BROWSER&&(useToggleScope(()=>!!(n.isActive.value&&t.locationStrategy),S=>{watch(()=>t.locationStrategy,S),onScopeDispose(()=>{x.value=void 0}),typeof t.locationStrategy=="function"?x.value=t.locationStrategy(n,t,_)?.updateLocation:x.value=locationStrategies[t.locationStrategy](n,t,_)?.updateLocation}),window.addEventListener("resize",E,{passive:!0}),onScopeDispose(()=>{window.removeEventListener("resize",E),x.value=void 0}));function E(S){x.value?.(S)}return{contentStyles:_,updateLocation:x}}function staticLocationStrategy(){}function getIntrinsicSize(t,n){n?t.style.removeProperty("left"):t.style.removeProperty("right");const _=nullifyTransforms(t);return n?_.x+=parseFloat(t.style.right||0):_.x-=parseFloat(t.style.left||0),_.y-=parseFloat(t.style.top||0),_}function connectedLocationStrategy(t,n,_){isFixedPosition(t.activatorEl.value)&&Object.assign(_.value,{position:"fixed",top:0,[t.isRtl.value?"right":"left"]:0});const{preferredAnchor:E,preferredOrigin:S}=destructComputed(()=>{const L=parseAnchor(n.location,t.isRtl.value),F=n.origin==="overlap"?L:n.origin==="auto"?flipSide(L):parseAnchor(n.origin,t.isRtl.value);return L.side===F.side&&L.align===flipAlign(F).align?{preferredAnchor:flipCorner(L),preferredOrigin:flipCorner(F)}:{preferredAnchor:L,preferredOrigin:F}}),[C,T,B,A]=["minWidth","minHeight","maxWidth","maxHeight"].map(L=>computed(()=>{const F=parseFloat(n[L]);return isNaN(F)?1/0:F})),I=computed(()=>{if(Array.isArray(n.offset))return n.offset;if(typeof n.offset=="string"){const L=n.offset.split(" ").map(parseFloat);return L.length<2&&L.push(0),L}return typeof n.offset=="number"?[n.offset,0]:[0,0]});let D=!1;const M=new ResizeObserver(()=>{D&&V()});watch([t.activatorEl,t.contentEl],(L,F)=>{let[j,U]=L,[H,Y]=F;H&&M.unobserve(H),j&&M.observe(j),Y&&M.unobserve(Y),U&&M.observe(U)},{immediate:!0}),onScopeDispose(()=>{M.disconnect()});function V(){if(D=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>D=!0)}),!t.activatorEl.value||!t.contentEl.value)return;const L=t.activatorEl.value.getBoundingClientRect(),F=getIntrinsicSize(t.contentEl.value,t.isRtl.value),j=getScrollParents(t.contentEl.value),U=12;j.length||(j.push(document.documentElement),t.contentEl.value.style.top&&t.contentEl.value.style.left||(F.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),F.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const H=j.reduce((ye,ie)=>{const W=ie.getBoundingClientRect(),O=new Box({x:ie===document.documentElement?0:W.x,y:ie===document.documentElement?0:W.y,width:ie.clientWidth,height:ie.clientHeight});return ye?new Box({x:Math.max(ye.left,O.left),y:Math.max(ye.top,O.top),width:Math.min(ye.right,O.right)-Math.max(ye.left,O.left),height:Math.min(ye.bottom,O.bottom)-Math.max(ye.top,O.top)}):O},void 0);H.x+=U,H.y+=U,H.width-=U*2,H.height-=U*2;let Y={anchor:E.value,origin:S.value};function Z(ye){const ie=new Box(F),W=anchorToPoint(ye.anchor,L),O=anchorToPoint(ye.origin,ie);let{x:z,y:J}=getOffset(W,O);switch(ye.anchor.side){case"top":J-=I.value[0];break;case"bottom":J+=I.value[0];break;case"left":z-=I.value[0];break;case"right":z+=I.value[0];break}switch(ye.anchor.align){case"top":J-=I.value[1];break;case"bottom":J+=I.value[1];break;case"left":z-=I.value[1];break;case"right":z+=I.value[1];break}return ie.x+=z,ie.y+=J,ie.width=Math.min(ie.width,B.value),ie.height=Math.min(ie.height,A.value),{overflows:getOverflow(ie,H),x:z,y:J}}let ne=0,re=0;const X={x:0,y:0},ce={x:!1,y:!1};let ue=-1;for(;!(ue++>10);){const{x:ye,y:ie,overflows:W}=Z(Y);ne+=ye,re+=ie,F.x+=ye,F.y+=ie;{const O=getAxis(Y.anchor),z=W.x.before||W.x.after,J=W.y.before||W.y.after;let ee=!1;if(["x","y"].forEach(ae=>{if(ae==="x"&&z&&!ce.x||ae==="y"&&J&&!ce.y){const oe={anchor:{...Y.anchor},origin:{...Y.origin}},se=ae==="x"?O==="y"?flipAlign:flipSide:O==="y"?flipSide:flipAlign;oe.anchor=se(oe.anchor),oe.origin=se(oe.origin);const{overflows:G}=Z(oe);(G[ae].before<=W[ae].before&&G[ae].after<=W[ae].after||G[ae].before+G[ae].after<(W[ae].before+W[ae].after)/2)&&(Y=oe,ee=ce[ae]=!0)}}),ee)continue}W.x.before&&(ne+=W.x.before,F.x+=W.x.before),W.x.after&&(ne-=W.x.after,F.x-=W.x.after),W.y.before&&(re+=W.y.before,F.y+=W.y.before),W.y.after&&(re-=W.y.after,F.y-=W.y.after);{const O=getOverflow(F,H);X.x=H.width-O.x.before-O.x.after,X.y=H.height-O.y.before-O.y.after,ne+=O.x.before,F.x+=O.x.before,re+=O.y.before,F.y+=O.y.before}break}const _e=getAxis(Y.anchor);return Object.assign(_.value,{"--v-overlay-anchor-origin":`${Y.anchor.side} ${Y.anchor.align}`,transformOrigin:`${Y.origin.side} ${Y.origin.align}`,top:convertToUnit(pixelRound(re)),left:t.isRtl.value?void 0:convertToUnit(pixelRound(ne)),right:t.isRtl.value?convertToUnit(pixelRound(-ne)):void 0,minWidth:convertToUnit(_e==="y"?Math.min(C.value,L.width):C.value),maxWidth:convertToUnit(pixelCeil(clamp(X.x,C.value===1/0?0:C.value,B.value))),maxHeight:convertToUnit(pixelCeil(clamp(X.y,T.value===1/0?0:T.value,A.value)))}),{available:X,contentBox:F}}return watch(()=>[E.value,S.value,n.offset,n.minWidth,n.minHeight,n.maxWidth,n.maxHeight],()=>V()),nextTick$2(()=>{const L=V();if(!L)return;const{available:F,contentBox:j}=L;j.height>F.y&&requestAnimationFrame(()=>{V(),requestAnimationFrame(()=>{V()})})}),{updateLocation:V}}function pixelRound(t){return Math.round(t*devicePixelRatio)/devicePixelRatio}function pixelCeil(t){return Math.ceil(t*devicePixelRatio)/devicePixelRatio}let clean=!0;const frames=[];function requestNewFrame(t){!clean||frames.length?(frames.push(t),run$1()):(clean=!1,t(),run$1())}let raf=-1;function run$1(){cancelAnimationFrame(raf),raf=requestAnimationFrame(()=>{const t=frames.shift();t&&t(),frames.length?run$1():clean=!0})}const scrollStrategies={none:null,close:closeScrollStrategy,block:blockScrollStrategy,reposition:repositionScrollStrategy},makeScrollStrategyProps=propsFactory({scrollStrategy:{type:[String,Function],default:"block",validator:t=>typeof t=="function"||t in scrollStrategies}},"VOverlay-scroll-strategies");function useScrollStrategies(t,n){if(!IN_BROWSER)return;let _;watchEffect(async()=>{_?.stop(),n.isActive.value&&t.scrollStrategy&&(_=effectScope(),await nextTick$2(),_.active&&_.run(()=>{typeof t.scrollStrategy=="function"?t.scrollStrategy(n,t,_):scrollStrategies[t.scrollStrategy]?.(n,t,_)}))}),onScopeDispose(()=>{_?.stop()})}function closeScrollStrategy(t){function n(_){t.isActive.value=!1}bindScroll(t.activatorEl.value??t.contentEl.value,n)}function blockScrollStrategy(t,n){const _=t.root.value?.offsetParent,x=[...new Set([...getScrollParents(t.activatorEl.value,n.contained?_:void 0),...getScrollParents(t.contentEl.value,n.contained?_:void 0)])].filter(C=>!C.classList.contains("v-overlay-scroll-blocked")),E=window.innerWidth-document.documentElement.offsetWidth,S=(C=>hasScrollbar(C)&&C)(_||document.documentElement);S&&t.root.value.classList.add("v-overlay--scroll-blocked"),x.forEach((C,T)=>{C.style.setProperty("--v-body-scroll-x",convertToUnit(-C.scrollLeft)),C.style.setProperty("--v-body-scroll-y",convertToUnit(-C.scrollTop)),C!==document.documentElement&&C.style.setProperty("--v-scrollbar-offset",convertToUnit(E)),C.classList.add("v-overlay-scroll-blocked")}),onScopeDispose(()=>{x.forEach((C,T)=>{const B=parseFloat(C.style.getPropertyValue("--v-body-scroll-x")),A=parseFloat(C.style.getPropertyValue("--v-body-scroll-y"));C.style.removeProperty("--v-body-scroll-x"),C.style.removeProperty("--v-body-scroll-y"),C.style.removeProperty("--v-scrollbar-offset"),C.classList.remove("v-overlay-scroll-blocked"),C.scrollLeft=-B,C.scrollTop=-A}),S&&t.root.value.classList.remove("v-overlay--scroll-blocked")})}function repositionScrollStrategy(t,n,_){let x=!1,E=-1,S=-1;function C(T){requestNewFrame(()=>{const B=performance.now();t.updateLocation.value?.(T),x=(performance.now()-B)/(1e3/60)>2})}S=(typeof requestIdleCallback>"u"?T=>T():requestIdleCallback)(()=>{_.run(()=>{bindScroll(t.activatorEl.value??t.contentEl.value,T=>{x?(cancelAnimationFrame(E),E=requestAnimationFrame(()=>{E=requestAnimationFrame(()=>{C(T)})})):C(T)})})}),onScopeDispose(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(S),cancelAnimationFrame(E)})}function bindScroll(t,n){const _=[document,...getScrollParents(t)];_.forEach(x=>{x.addEventListener("scroll",n,{passive:!0})}),onScopeDispose(()=>{_.forEach(x=>{x.removeEventListener("scroll",n)})})}const VMenuSymbol=Symbol.for("vuetify:v-menu"),makeActivatorProps=propsFactory({activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...makeDelayProps()},"VOverlay-activator");function useActivator(t,n){let{isActive:_,isTop:x}=n;const E=ref$1();let S=!1,C=!1,T=!0;const B=computed(()=>t.openOnFocus||t.openOnFocus==null&&t.openOnHover),A=computed(()=>t.openOnClick||t.openOnClick==null&&!t.openOnHover&&!B.value),{runOpenDelay:I,runCloseDelay:D}=useDelay(t,Y=>{Y===(t.openOnHover&&S||B.value&&C)&&!(t.openOnHover&&_.value&&!x.value)&&(_.value!==Y&&(T=!0),_.value=Y)}),M={onClick:Y=>{Y.stopPropagation(),E.value=Y.currentTarget||Y.target,_.value=!_.value},onMouseenter:Y=>{Y.sourceCapabilities?.firesTouchEvents||(S=!0,E.value=Y.currentTarget||Y.target,I())},onMouseleave:Y=>{S=!1,D()},onFocus:Y=>{matchesSelector(Y.target,":focus-visible")!==!1&&(C=!0,Y.stopPropagation(),E.value=Y.currentTarget||Y.target,I())},onBlur:Y=>{C=!1,Y.stopPropagation(),D()}},V=computed(()=>{const Y={};return A.value&&(Y.onClick=M.onClick),t.openOnHover&&(Y.onMouseenter=M.onMouseenter,Y.onMouseleave=M.onMouseleave),B.value&&(Y.onFocus=M.onFocus,Y.onBlur=M.onBlur),Y}),L=computed(()=>{const Y={};if(t.openOnHover&&(Y.onMouseenter=()=>{S=!0,I()},Y.onMouseleave=()=>{S=!1,D()}),B.value&&(Y.onFocusin=()=>{C=!0,I()},Y.onFocusout=()=>{C=!1,D()}),t.closeOnContentClick){const Z=inject$1(VMenuSymbol,null);Y.onClick=()=>{_.value=!1,Z?.closeParents()}}return Y}),F=computed(()=>{const Y={};return t.openOnHover&&(Y.onMouseenter=()=>{T&&(S=!0,T=!1,I())},Y.onMouseleave=()=>{S=!1,D()}),Y});watch(x,Y=>{Y&&(t.openOnHover&&!S&&(!B.value||!C)||B.value&&!C&&(!t.openOnHover||!S))&&(_.value=!1)});const j=ref$1();watchEffect(()=>{j.value&&nextTick$2(()=>{E.value=refElement(j.value)})});const U=getCurrentInstance("useActivator");let H;return watch(()=>!!t.activator,Y=>{Y&&IN_BROWSER?(H=effectScope(),H.run(()=>{_useActivator(t,U,{activatorEl:E,activatorEvents:V})})):H&&H.stop()},{flush:"post",immediate:!0}),onScopeDispose(()=>{H?.stop()}),{activatorEl:E,activatorRef:j,activatorEvents:V,contentEvents:L,scrimEvents:F}}function _useActivator(t,n,_){let{activatorEl:x,activatorEvents:E}=_;watch(()=>t.activator,(B,A)=>{if(A&&B!==A){const I=T(A);I&&C(I)}B&&nextTick$2(()=>S())},{immediate:!0}),watch(()=>t.activatorProps,()=>{S()}),onScopeDispose(()=>{C()});function S(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T(),A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;B&&bindProps(B,mergeProps(E.value,A))}function C(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T(),A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;B&&unbindProps(B,mergeProps(E.value,A))}function T(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.activator,A;if(B)if(B==="parent"){let I=n?.proxy?.$el?.parentNode;for(;I.hasAttribute("data-no-activator");)I=I.parentNode;A=I}else typeof B=="string"?A=document.querySelector(B):"$el"in B?A=B.$el:A=B;return x.value=A?.nodeType===Node.ELEMENT_NODE?A:null,x.value}}function useHydration(){if(!IN_BROWSER)return shallowRef(!1);const{ssr:t}=useDisplay();if(t){const n=shallowRef(!1);return onMounted(()=>{n.value=!0}),n}else return shallowRef(!0)}const makeLazyProps=propsFactory({eager:Boolean},"lazy");function useLazy(t,n){const _=shallowRef(!1),x=computed(()=>_.value||t.eager||n.value);watch(n,()=>_.value=!0);function E(){t.eager||(_.value=!1)}return{isBooted:_,hasContent:x,onAfterLeave:E}}const StackSymbol=Symbol.for("vuetify:stack"),globalStack=reactive([]);function useStack(t,n,_){const x=getCurrentInstance("useStack"),E=!_,S=inject$1(StackSymbol,void 0),C=reactive({activeChildren:new Set});provide(StackSymbol,C);const T=shallowRef(+n.value);useToggleScope(t,()=>{const I=globalStack.at(-1)?.[1];T.value=I?I+10:+n.value,E&&globalStack.push([x.uid,T.value]),S?.activeChildren.add(x.uid),onScopeDispose(()=>{if(E){const D=toRaw(globalStack).findIndex(M=>M[0]===x.uid);globalStack.splice(D,1)}S?.activeChildren.delete(x.uid)})});const B=shallowRef(!0);E&&watchEffect(()=>{const I=globalStack.at(-1)?.[0]===x.uid;setTimeout(()=>B.value=I)});const A=computed(()=>!C.activeChildren.size);return{globalTop:readonly$3(B),localTop:A,stackStyles:computed(()=>({zIndex:T.value}))}}function useTeleport(t){return{teleportTarget:computed(()=>{const _=t.value;if(_===!0||!IN_BROWSER)return;const x=_===!1?document.body:typeof _=="string"?document.querySelector(_):_;if(x==null)return;let E=x.querySelector(":scope > .v-overlay-container");return E||(E=document.createElement("div"),E.className="v-overlay-container",x.appendChild(E)),E})}}function defaultConditional(){return!0}function checkEvent(t,n,_){if(!t||checkIsActive(t,_)===!1)return!1;const x=attachedRoot(n);if(typeof ShadowRoot<"u"&&x instanceof ShadowRoot&&x.host===t.target)return!1;const E=(typeof _.value=="object"&&_.value.include||(()=>[]))();return E.push(n),!E.some(S=>S?.contains(t.target))}function checkIsActive(t,n){return(typeof n.value=="object"&&n.value.closeConditional||defaultConditional)(t)}function directive(t,n,_){const x=typeof _.value=="function"?_.value:_.value.handler;n._clickOutside.lastMousedownWasOutside&&checkEvent(t,n,_)&&setTimeout(()=>{checkIsActive(t,_)&&x&&x(t)},0)}function handleShadow(t,n){const _=attachedRoot(t);n(document),typeof ShadowRoot<"u"&&_ instanceof ShadowRoot&&n(_)}const ClickOutside={mounted(t,n){const _=E=>directive(E,t,n),x=E=>{t._clickOutside.lastMousedownWasOutside=checkEvent(E,t,n)};handleShadow(t,E=>{E.addEventListener("click",_,!0),E.addEventListener("mousedown",x,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!1}),t._clickOutside[n.instance.$.uid]={onClick:_,onMousedown:x}},unmounted(t,n){t._clickOutside&&(handleShadow(t,_=>{if(!_||!t._clickOutside?.[n.instance.$.uid])return;const{onClick:x,onMousedown:E}=t._clickOutside[n.instance.$.uid];_.removeEventListener("click",x,!0),_.removeEventListener("mousedown",E,!0)}),delete t._clickOutside[n.instance.$.uid])}};function Scrim(t){const{modelValue:n,color:_,...x}=t;return createVNode(Transition,{name:"fade-transition",appear:!0},{default:()=>[t.modelValue&&createVNode("div",mergeProps({class:["v-overlay__scrim",t.color.backgroundColorClasses.value],style:t.color.backgroundColorStyles.value},x),null)]})}const makeVOverlayProps=propsFactory({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...makeActivatorProps(),...makeComponentProps(),...makeDimensionProps(),...makeLazyProps(),...makeLocationStrategyProps(),...makeScrollStrategyProps(),...makeThemeProps(),...makeTransitionProps$1()},"VOverlay"),VOverlay=genericComponent()({name:"VOverlay",directives:{ClickOutside},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...makeVOverlayProps()},emits:{"click:outside":t=>!0,"update:modelValue":t=>!0,afterLeave:()=>!0},setup(t,n){let{slots:_,attrs:x,emit:E}=n;const S=useProxiedModel(t,"modelValue"),C=computed({get:()=>S.value,set:oe=>{oe&&t.disabled||(S.value=oe)}}),{teleportTarget:T}=useTeleport(computed(()=>t.attach||t.contained)),{themeClasses:B}=provideTheme(t),{rtlClasses:A,isRtl:I}=useRtl(),{hasContent:D,onAfterLeave:M}=useLazy(t,C),V=useBackgroundColor(computed(()=>typeof t.scrim=="string"?t.scrim:null)),{globalTop:L,localTop:F,stackStyles:j}=useStack(C,toRef(t,"zIndex"),t._disableGlobalStack),{activatorEl:U,activatorRef:H,activatorEvents:Y,contentEvents:Z,scrimEvents:ne}=useActivator(t,{isActive:C,isTop:F}),{dimensionStyles:re}=useDimension(t),X=useHydration(),{scopeId:ce}=useScopeId();watch(()=>t.disabled,oe=>{oe&&(C.value=!1)});const ue=ref$1(),_e=ref$1(),{contentStyles:ye,updateLocation:ie}=useLocationStrategies(t,{isRtl:I,contentEl:_e,activatorEl:U,isActive:C});useScrollStrategies(t,{root:ue,contentEl:_e,activatorEl:U,isActive:C,updateLocation:ie});function W(oe){E("click:outside",oe),t.persistent?ae():C.value=!1}function O(){return C.value&&L.value}IN_BROWSER&&watch(C,oe=>{oe?window.addEventListener("keydown",z):window.removeEventListener("keydown",z)},{immediate:!0});function z(oe){oe.key==="Escape"&&L.value&&(t.persistent?ae():(C.value=!1,_e.value?.contains(document.activeElement)&&U.value?.focus()))}const J=useRouter$1();useToggleScope(()=>t.closeOnBack,()=>{useBackButton(J,oe=>{L.value&&C.value?(oe(!1),t.persistent?ae():C.value=!1):oe()})});const ee=ref$1();watch(()=>C.value&&(t.absolute||t.contained)&&T.value==null,oe=>{if(oe){const se=getScrollParent(ue.value);se&&se!==document.scrollingElement&&(ee.value=se.scrollTop)}});function ae(){t.noClickAnimation||_e.value&&animate(_e.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:standardEasing})}return useRender(()=>createVNode(Fragment,null,[_.activator?.({isActive:C.value,props:mergeProps({ref:H},Y.value,t.activatorProps)}),X.value&&D.value&&createVNode(Teleport,{disabled:!T.value,to:T.value},{default:()=>[createVNode("div",mergeProps({class:["v-overlay",{"v-overlay--absolute":t.absolute||t.contained,"v-overlay--active":C.value,"v-overlay--contained":t.contained},B.value,A.value,t.class],style:[j.value,{top:convertToUnit(ee.value)},t.style],ref:ue},ce,x),[createVNode(Scrim,mergeProps({color:V,modelValue:C.value&&!!t.scrim},ne.value),null),createVNode(MaybeTransition,{appear:!0,persisted:!0,transition:t.transition,target:U.value,onAfterLeave:()=>{M(),E("afterLeave")}},{default:()=>[withDirectives(createVNode("div",mergeProps({ref:_e,class:["v-overlay__content",t.contentClass],style:[re.value,ye.value]},Z.value,t.contentProps),[_.default?.({isActive:C})]),[[vShow,C.value],[resolveDirective("click-outside"),{handler:W,closeConditional:O,include:()=>[U.value]}]])]})])]})])),{activatorEl:U,animateClick:ae,contentEl:_e,globalTop:L,localTop:F,updateLocation:ie}}}),Refs=Symbol("Forwarded refs");function getDescriptor(t,n){let _=t;for(;_;){const x=Reflect.getOwnPropertyDescriptor(_,n);if(x)return x;_=Object.getPrototypeOf(_)}}function forwardRefs(t){for(var n=arguments.length,_=new Array(n>1?n-1:0),x=1;x<n;x++)_[x-1]=arguments[x];return t[Refs]=_,new Proxy(t,{get(E,S){if(Reflect.has(E,S))return Reflect.get(E,S);if(!(typeof S=="symbol"||S.startsWith("__"))){for(const C of _)if(C.value&&Reflect.has(C.value,S)){const T=Reflect.get(C.value,S);return typeof T=="function"?T.bind(C.value):T}}},has(E,S){if(Reflect.has(E,S))return!0;if(typeof S=="symbol"||S.startsWith("__"))return!1;for(const C of _)if(C.value&&Reflect.has(C.value,S))return!0;return!1},set(E,S,C){if(Reflect.has(E,S))return Reflect.set(E,S,C);if(typeof S=="symbol"||S.startsWith("__"))return!1;for(const T of _)if(T.value&&Reflect.has(T.value,S))return Reflect.set(T.value,S,C);return!1},getOwnPropertyDescriptor(E,S){const C=Reflect.getOwnPropertyDescriptor(E,S);if(C)return C;if(!(typeof S=="symbol"||S.startsWith("__"))){for(const T of _){if(!T.value)continue;const B=getDescriptor(T.value,S)??("_"in T.value?getDescriptor(T.value._?.setupState,S):void 0);if(B)return B}for(const T of _){const B=T.value&&T.value[Refs];if(!B)continue;const A=B.slice();for(;A.length;){const I=A.shift(),D=getDescriptor(I.value,S);if(D)return D;const M=I.value&&I.value[Refs];M&&A.push(...M)}}}}})}const makeVSnackbarProps=propsFactory({multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...makeLocationProps({location:"bottom"}),...makePositionProps(),...makeRoundedProps(),...makeVariantProps(),...makeThemeProps(),...omit(makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),VSnackbar=genericComponent()({name:"VSnackbar",props:makeVSnackbarProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{slots:_}=n;const x=useProxiedModel(t,"modelValue"),{locationStyles:E}=useLocation(t),{positionClasses:S}=usePosition(t),{scopeId:C}=useScopeId(),{themeClasses:T}=provideTheme(t),{colorClasses:B,colorStyles:A,variantClasses:I}=useVariant(t),{roundedClasses:D}=useRounded(t),M=ref$1();watch(x,L),watch(()=>t.timeout,L),onMounted(()=>{x.value&&L()});let V=-1;function L(){window.clearTimeout(V);const j=Number(t.timeout);!x.value||j===-1||(V=window.setTimeout(()=>{x.value=!1},j))}function F(){window.clearTimeout(V)}return useRender(()=>{const[j]=VOverlay.filterProps(t);return createVNode(VOverlay,mergeProps({ref:M,class:["v-snackbar",{"v-snackbar--active":x.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--vertical":t.vertical},S.value,t.class],style:t.style},j,{modelValue:x.value,"onUpdate:modelValue":U=>x.value=U,contentProps:mergeProps({class:["v-snackbar__wrapper",T.value,B.value,D.value,I.value],style:[E.value,A.value],onPointerenter:F,onPointerleave:L},j.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},C),{default:()=>[genOverlays(!1,"v-snackbar"),_.default&&createVNode("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[_.default()]),_.actions&&createVNode(VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[createVNode("div",{class:"v-snackbar__actions"},[_.actions()])]})],activator:_.activator})}),forwardRefs({},M)}}),_hoisted_1$L={class:"align-self-center",style:{height:"100%"}},_hoisted_2$x={class:"my-auto"},_sfc_main$1$=defineComponent$1({__name:"ImageEditable",props:{srcImage:{},imgDefaut:{},maxTailleImage:{},tailleAvatar:{},editable:{type:Boolean}},emits:["imageChangee"],setup(t,{emit:n}){const _=t,{useI18n:x}=_(),{t:E}=x(),S=ref$1(),C=()=>{S.value?.click()},T=ref$1(),B=ref$1(),A=ref$1(),I=computed(()=>B.value?B.value.size>_.maxTailleImage:!1),D=()=>{n("imageChangee",void 0)},M=async()=>{S.value?.files?.length&&(T.value=S.value.files[0])},V=L=>new Promise(F=>{const j=URL.createObjectURL(L),U=new Image;U.onload=()=>{F({hauteur:U.height,largeur:U.width})},U.src=j});return watchEffect(async()=>{if(T.value)if(T.value.size>_.maxTailleImage){const{hauteur:L,largeur:F}=await V(T.value),j=L*F*16/(8*1024)/_.maxTailleImage;try{B.value=convert$2({file:T.value,height:j*L,width:j*F})}catch{B.value=T.value;return}}else B.value=T.value}),watchEffect(async()=>{A.value=await B.value?.arrayBuffer()}),watchEffect(async()=>{A.value&&(I.value||n("imageChangee",A.value))}),(L,F)=>(openBlock(),createBlock(VRow,{class:"text-center"},{default:withCtx(()=>[createBaseVNode("input",{ref_key:"HTMLChoixFichier",ref:S,type:"file",style:{display:"none"},accept:"image/*",onChange:M},null,544),createVNode(VSnackbar,{modelValue:I.value,"onUpdate:modelValue":F[0]||(F[0]=j=>I.value=j),timeout:"5000",color:"error",outlined:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("imageditable.imageTropGrande",{tailleMaxKO:L.maxTailleImage/1e3})),1)]),_:1},8,["modelValue"]),createVNode(VCol,{cols:"12"},{default:withCtx(()=>[createVNode(VHover,{disabled:!L.editable},{default:withCtx(({isHovering:j,props:U})=>[createVNode(VAvatar,mergeProps(U,{class:"mb-3",size:L.tailleAvatar,elevation:j?12:2}),{default:withCtx(()=>[createVNode(VImg,{src:L.srcImage||L.imgDefaut,contain:""},{default:withCtx(()=>[createVNode(VRow,{class:normalizeClass({"ma-0":!0,"on-hover":j,"align-self-center":!0,"fill-height":!0,"flex-column":!0,fond:!0}),style:{"background-color":"black"}},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$L,[createVNode(VRow,{class:"flex-column fill-height ma-0"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$x,[createVNode(VBtn,{class:normalizeClass([{"show-btns":j,"mx-2":!0},"align-self-center"]),color:"rgba(255, 255, 255, 0)",icon:"",large:"",onClick:F[1]||(F[1]=()=>C())},{default:withCtx(()=>[createVNode(VIcon,{class:normalizeClass({"show-btns":j}),color:"rgba(255, 255, 255, 0)",large:""},{default:withCtx(()=>[createTextVNode(" mdi-camera-outline ")]),_:2},1032,["class"])]),_:2},1032,["class"]),L.srcImage?(openBlock(),createBlock(VBtn,{key:0,class:normalizeClass([{"show-btns":j,"mx-2":!0},"align-self-center"]),color:"rgba(255, 255, 255, 0)",icon:"",large:"",onClick:F[2]||(F[2]=()=>D())},{default:withCtx(()=>[createVNode(VIcon,{class:normalizeClass({"show-btns":j}),color:"rgba(255, 255, 255, 0)",large:""},{default:withCtx(()=>[createTextVNode(" mdi-close ")]),_:2},1032,["class"])]),_:2},1032,["class"])):createCommentVNode("",!0)])]),_:2},1024)])]),_:2},1032,["class"])]),_:2},1032,["src"])]),_:2},1040,["size","elevation"])]),_:1},8,["disabled"])]),_:1})]),_:1}))}}),ImageEditable_vue_vue_type_style_index_0_scoped_b8325bd3_lang="",_export_sfc=(t,n)=>{const _=t.__vccOpts||t;for(const[x,E]of n)_[x]=E;return _},ImageEditable=_export_sfc(_sfc_main$1$,[["__scopeId","data-v-b8325bd3"]]),VAutocomplete$1="",VCheckbox$1="",VSelectionControl$1="",VLabel$1="",makeVLabelProps=propsFactory({text:String,clickable:Boolean,...makeComponentProps(),...makeThemeProps()},"VLabel"),VLabel=genericComponent()({name:"VLabel",props:makeVLabelProps(),setup(t,n){let{slots:_}=n;return useRender(()=>createVNode("label",{class:["v-label",{"v-label--clickable":t.clickable},t.class],style:t.style},[t.text,_.default?.()])),{}}}),VSelectionControlGroup$1="",VSelectionControlGroupSymbol=Symbol.for("vuetify:selection-control-group"),makeSelectionControlGroupProps=propsFactory({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:IconValue,trueIcon:IconValue,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:Boolean,modelValue:null,type:String,valueComparator:{type:Function,default:deepEqual$3},...makeComponentProps(),...makeDensityProps(),...makeThemeProps()},"SelectionControlGroup"),makeVSelectionControlGroupProps=propsFactory({...makeSelectionControlGroupProps({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),VSelectionControlGroup=genericComponent()({name:"VSelectionControlGroup",props:makeVSelectionControlGroupProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{slots:_}=n;const x=useProxiedModel(t,"modelValue"),E=getUid(),S=computed(()=>t.id||`v-selection-control-group-${E}`),C=computed(()=>t.name||S.value),T=new Set;return provide(VSelectionControlGroupSymbol,{modelValue:x,forceUpdate:()=>{T.forEach(B=>B())},onForceUpdate:B=>{T.add(B),onScopeDispose(()=>{T.delete(B)})}}),provideDefaults({[t.defaultsTarget]:{color:toRef(t,"color"),disabled:toRef(t,"disabled"),density:toRef(t,"density"),error:toRef(t,"error"),inline:toRef(t,"inline"),modelValue:x,multiple:computed(()=>!!t.multiple||t.multiple==null&&Array.isArray(x.value)),name:C,falseIcon:toRef(t,"falseIcon"),trueIcon:toRef(t,"trueIcon"),readonly:toRef(t,"readonly"),ripple:toRef(t,"ripple"),type:toRef(t,"type"),valueComparator:toRef(t,"valueComparator")}}),useRender(()=>createVNode("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":t.inline},t.class],style:t.style,role:t.type==="radio"?"radiogroup":void 0},[_.default?.()])),{}}}),makeVSelectionControlProps=propsFactory({label:String,trueValue:null,falseValue:null,value:null,...makeComponentProps(),...makeSelectionControlGroupProps()},"VSelectionControl");function useSelectionControl(t){const n=inject$1(VSelectionControlGroupSymbol,void 0),{densityClasses:_}=useDensity(t),x=useProxiedModel(t,"modelValue"),E=computed(()=>t.trueValue!==void 0?t.trueValue:t.value!==void 0?t.value:!0),S=computed(()=>t.falseValue!==void 0?t.falseValue:!1),C=computed(()=>!!t.multiple||t.multiple==null&&Array.isArray(x.value)),T=computed({get(){const D=n?n.modelValue.value:x.value;return C.value?D.some(M=>t.valueComparator(M,E.value)):t.valueComparator(D,E.value)},set(D){if(t.readonly)return;const M=D?E.value:S.value;let V=M;C.value&&(V=D?[...wrapInArray(x.value),M]:wrapInArray(x.value).filter(L=>!t.valueComparator(L,E.value))),n?n.modelValue.value=V:x.value=V}}),{textColorClasses:B,textColorStyles:A}=useTextColor(computed(()=>T.value&&!t.error&&!t.disabled?t.color:void 0)),I=computed(()=>T.value?t.trueIcon:t.falseIcon);return{group:n,densityClasses:_,trueValue:E,falseValue:S,model:T,textColorClasses:B,textColorStyles:A,icon:I}}const VSelectionControl=genericComponent()({name:"VSelectionControl",directives:{Ripple},inheritAttrs:!1,props:makeVSelectionControlProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{attrs:_,slots:x}=n;const{group:E,densityClasses:S,icon:C,model:T,textColorClasses:B,textColorStyles:A,trueValue:I}=useSelectionControl(t),D=getUid(),M=computed(()=>t.id||`input-${D}`),V=shallowRef(!1),L=shallowRef(!1),F=ref$1();E?.onForceUpdate(()=>{F.value&&(F.value.checked=T.value)});function j(Y){V.value=!0,matchesSelector(Y.target,":focus-visible")!==!1&&(L.value=!0)}function U(){V.value=!1,L.value=!1}function H(Y){t.readonly&&E&&nextTick$2(()=>E.forceUpdate()),T.value=Y.target.checked}return useRender(()=>{const Y=x.label?x.label({label:t.label,props:{for:M.value}}):t.label,[Z,ne]=filterInputAttrs(_),re=createVNode("input",mergeProps({ref:F,checked:T.value,disabled:!!(t.readonly||t.disabled),id:M.value,onBlur:U,onFocus:j,onInput:H,"aria-disabled":!!(t.readonly||t.disabled),type:t.type,value:I.value,name:t.name,"aria-checked":t.type==="checkbox"?T.value:void 0},ne),null);return createVNode("div",mergeProps({class:["v-selection-control",{"v-selection-control--dirty":T.value,"v-selection-control--disabled":t.disabled,"v-selection-control--error":t.error,"v-selection-control--focused":V.value,"v-selection-control--focus-visible":L.value,"v-selection-control--inline":t.inline},S.value,t.class]},Z,{style:t.style}),[createVNode("div",{class:["v-selection-control__wrapper",B.value],style:A.value},[x.default?.(),withDirectives(createVNode("div",{class:["v-selection-control__input"]},[x.input?.({model:T,textColorClasses:B,textColorStyles:A,inputNode:re,icon:C.value,props:{onFocus:j,onBlur:U,id:M.value}})??createVNode(Fragment,null,[C.value&&createVNode(VIcon,{key:"icon",icon:C.value},null),re])]),[[resolveDirective("ripple"),t.ripple&&[!t.disabled&&!t.readonly,null,["center","circle"]]]])]),Y&&createVNode(VLabel,{for:M.value,clickable:!0,onClick:X=>X.stopPropagation()},{default:()=>[Y]})])}),{isFocused:V,input:F}}}),makeVCheckboxBtnProps=propsFactory({indeterminate:Boolean,indeterminateIcon:{type:IconValue,default:"$checkboxIndeterminate"},...makeVSelectionControlProps({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),VCheckboxBtn=genericComponent()({name:"VCheckboxBtn",props:makeVCheckboxBtnProps(),emits:{"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,n){let{slots:_}=n;const x=useProxiedModel(t,"indeterminate"),E=useProxiedModel(t,"modelValue");function S(B){x.value&&(x.value=!1)}const C=computed(()=>x.value?t.indeterminateIcon:t.falseIcon),T=computed(()=>x.value?t.indeterminateIcon:t.trueIcon);return useRender(()=>{const B=omit(VSelectionControl.filterProps(t)[0],["modelValue"]);return createVNode(VSelectionControl,mergeProps(B,{modelValue:E.value,"onUpdate:modelValue":[A=>E.value=A,S],class:["v-checkbox-btn",t.class],style:t.style,type:"checkbox",falseIcon:C.value,trueIcon:T.value,"aria-checked":x.value?"mixed":void 0}),_)}),{}}}),VInput$1="";function useInputIcon(t){const{t:n}=useLocale();function _(x){let{name:E}=x;const S={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[E],C=t[`onClick:${E}`],T=C&&S?n(`$vuetify.input.${S}`,t.label??""):void 0;return createVNode(VIcon,{icon:t[`${E}Icon`],"aria-label":T,onClick:C},null)}return{InputIcon:_}}const VMessages$1="",makeVMessagesProps=propsFactory({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...makeComponentProps(),...makeTransitionProps$1({transition:{component:VSlideYTransition,leaveAbsolute:!0,group:!0}})},"VMessages"),VMessages=genericComponent()({name:"VMessages",props:makeVMessagesProps(),setup(t,n){let{slots:_}=n;const x=computed(()=>wrapInArray(t.messages)),{textColorClasses:E,textColorStyles:S}=useTextColor(computed(()=>t.color));return useRender(()=>createVNode(MaybeTransition,{transition:t.transition,tag:"div",class:["v-messages",E.value,t.class],style:[S.value,t.style],role:"alert","aria-live":"polite"},{default:()=>[t.active&&x.value.map((C,T)=>createVNode("div",{class:"v-messages__message",key:`${T}-${x.value}`},[_.message?_.message({message:C}):C]))]})),{}}}),makeFocusProps=propsFactory({focused:Boolean,"onUpdate:focused":EventProp()},"focus");function useFocus(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();const _=useProxiedModel(t,"focused"),x=computed(()=>({[`${n}--focused`]:_.value}));function E(){_.value=!0}function S(){_.value=!1}return{focusClasses:x,isFocused:_,focus:E,blur:S}}const FormKey=Symbol.for("vuetify:form");function useForm(){return inject$1(FormKey,null)}const makeValidationProps=propsFactory({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...makeFocusProps()},"validation");function useValidation(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName(),_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:getUid();const x=useProxiedModel(t,"modelValue"),E=computed(()=>t.validationValue===void 0?x.value:t.validationValue),S=useForm(),C=ref$1([]),T=shallowRef(!0),B=computed(()=>!!(wrapInArray(x.value===""?null:x.value).length||wrapInArray(E.value===""?null:E.value).length)),A=computed(()=>!!(t.disabled??S?.isDisabled.value)),I=computed(()=>!!(t.readonly??S?.isReadonly.value)),D=computed(()=>t.errorMessages.length?wrapInArray(t.errorMessages).slice(0,Math.max(0,+t.maxErrors)):C.value),M=computed(()=>{let Z=(t.validateOn??S?.validateOn.value)||"input";Z==="lazy"&&(Z="input lazy");const ne=new Set(Z?.split(" ")??[]);return{blur:ne.has("blur")||ne.has("input"),input:ne.has("input"),submit:ne.has("submit"),lazy:ne.has("lazy")}}),V=computed(()=>t.error||t.errorMessages.length?!1:t.rules.length?T.value?C.value.length||M.value.lazy?null:!0:!C.value.length:!0),L=shallowRef(!1),F=computed(()=>({[`${n}--error`]:V.value===!1,[`${n}--dirty`]:B.value,[`${n}--disabled`]:A.value,[`${n}--readonly`]:I.value})),j=computed(()=>t.name??unref(_));onBeforeMount(()=>{S?.register({id:j.value,validate:Y,reset:U,resetValidation:H})}),onBeforeUnmount(()=>{S?.unregister(j.value)}),onMounted(async()=>{M.value.lazy||await Y(!0),S?.update(j.value,V.value,D.value)}),useToggleScope(()=>M.value.input,()=>{watch(E,()=>{if(E.value!=null)Y();else if(t.focused){const Z=watch(()=>t.focused,ne=>{ne||Y(),Z()})}})}),useToggleScope(()=>M.value.blur,()=>{watch(()=>t.focused,Z=>{Z||Y()})}),watch(V,()=>{S?.update(j.value,V.value,D.value)});function U(){x.value=null,nextTick$2(H)}function H(){T.value=!0,M.value.lazy?C.value=[]:Y(!0)}async function Y(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const ne=[];L.value=!0;for(const re of t.rules){if(ne.length>=+(t.maxErrors??1))break;const ce=await(typeof re=="function"?re:()=>re)(E.value);if(ce!==!0){if(ce!==!1&&typeof ce!="string"){console.warn(`${ce} is not a valid value. Rule functions must return boolean true or a string.`);continue}ne.push(ce||"")}}return C.value=ne,L.value=!1,T.value=Z,C.value}return{errorMessages:D,isDirty:B,isDisabled:A,isReadonly:I,isPristine:T,isValid:V,isValidating:L,reset:U,resetValidation:H,validate:Y,validationClasses:F}}const makeVInputProps=propsFactory({id:String,appendIcon:IconValue,centerAffix:{type:Boolean,default:!0},prependIcon:IconValue,hideDetails:[Boolean,String],hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:t=>["horizontal","vertical"].includes(t)},"onClick:prepend":EventProp(),"onClick:append":EventProp(),...makeComponentProps(),...makeDensityProps(),...makeValidationProps()},"VInput"),VInput=genericComponent()({name:"VInput",props:{...makeVInputProps()},emits:{"update:modelValue":t=>!0},setup(t,n){let{attrs:_,slots:x,emit:E}=n;const{densityClasses:S}=useDensity(t),{rtlClasses:C}=useRtl(),{InputIcon:T}=useInputIcon(t),B=getUid(),A=computed(()=>t.id||`input-${B}`),I=computed(()=>`${A.value}-messages`),{errorMessages:D,isDirty:M,isDisabled:V,isReadonly:L,isPristine:F,isValid:j,isValidating:U,reset:H,resetValidation:Y,validate:Z,validationClasses:ne}=useValidation(t,"v-input",A),re=computed(()=>({id:A,messagesId:I,isDirty:M,isDisabled:V,isReadonly:L,isPristine:F,isValid:j,isValidating:U,reset:H,resetValidation:Y,validate:Z})),X=computed(()=>t.errorMessages?.length||!F.value&&D.value.length?D.value:t.hint&&(t.persistentHint||t.focused)?t.hint:t.messages);return useRender(()=>{const ce=!!(x.prepend||t.prependIcon),ue=!!(x.append||t.appendIcon),_e=X.value.length>0,ye=!t.hideDetails||t.hideDetails==="auto"&&(_e||!!x.details);return createVNode("div",{class:["v-input",`v-input--${t.direction}`,{"v-input--center-affix":t.centerAffix},S.value,C.value,ne.value,t.class],style:t.style},[ce&&createVNode("div",{key:"prepend",class:"v-input__prepend"},[x.prepend?.(re.value),t.prependIcon&&createVNode(T,{key:"prepend-icon",name:"prepend"},null)]),x.default&&createVNode("div",{class:"v-input__control"},[x.default?.(re.value)]),ue&&createVNode("div",{key:"append",class:"v-input__append"},[t.appendIcon&&createVNode(T,{key:"append-icon",name:"append"},null),x.append?.(re.value)]),ye&&createVNode("div",{class:"v-input__details"},[createVNode(VMessages,{id:I.value,active:_e,messages:X.value},{message:x.message}),x.details?.(re.value)])])}),{reset:H,resetValidation:Y,validate:Z}}}),makeVCheckboxProps=propsFactory({...makeVInputProps(),...omit(makeVCheckboxBtnProps(),["inline"])},"VCheckbox"),VCheckbox=genericComponent()({name:"VCheckbox",inheritAttrs:!1,props:makeVCheckboxProps(),emits:{"update:modelValue":t=>!0,"update:focused":t=>!0},setup(t,n){let{attrs:_,slots:x}=n;const E=useProxiedModel(t,"modelValue"),{isFocused:S,focus:C,blur:T}=useFocus(t),B=getUid(),A=computed(()=>t.id||`checkbox-${B}`);return useRender(()=>{const[I,D]=filterInputAttrs(_),[M,V]=VInput.filterProps(t),[L,F]=VCheckboxBtn.filterProps(t);return createVNode(VInput,mergeProps({class:["v-checkbox",t.class]},I,M,{modelValue:E.value,"onUpdate:modelValue":j=>E.value=j,id:A.value,focused:S.value,style:t.style}),{...x,default:j=>{let{id:U,messagesId:H,isDisabled:Y,isReadonly:Z}=j;return createVNode(VCheckboxBtn,mergeProps(L,{id:U.value,"aria-describedby":H.value,disabled:Y.value,readonly:Z.value},D,{modelValue:E.value,"onUpdate:modelValue":ne=>E.value=ne,onFocus:C,onBlur:T}),x)}})}),{}}}),VChip$1="",VChipGroup$1="",VChipGroupSymbol=Symbol.for("vuetify:v-chip-group"),makeVChipGroupProps=propsFactory({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:deepEqual$3},...makeComponentProps(),...makeGroupProps({selectedClass:"v-chip--selected"}),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"tonal"})},"VChipGroup"),VChipGroup=genericComponent()({name:"VChipGroup",props:makeVChipGroupProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{slots:_}=n;const{themeClasses:x}=provideTheme(t),{isSelected:E,select:S,next:C,prev:T,selected:B}=useGroup(t,VChipGroupSymbol);return provideDefaults({VChip:{color:toRef(t,"color"),disabled:toRef(t,"disabled"),filter:toRef(t,"filter"),variant:toRef(t,"variant")}}),useRender(()=>createVNode(t.tag,{class:["v-chip-group",{"v-chip-group--column":t.column},x.value,t.class],style:t.style},{default:()=>[_.default?.({isSelected:E,select:S,next:C,prev:T,selected:B.value})]})),{}}}),makeVChipProps=propsFactory({activeClass:String,appendAvatar:String,appendIcon:IconValue,closable:Boolean,closeIcon:{type:IconValue,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:IconValue,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:EventProp(),onClickOnce:EventProp(),...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeElevationProps(),...makeGroupItemProps(),...makeRoundedProps(),...makeRouterProps(),...makeSizeProps(),...makeTagProps({tag:"span"}),...makeThemeProps(),...makeVariantProps({variant:"tonal"})},"VChip"),VChip=genericComponent()({name:"VChip",directives:{Ripple},props:makeVChipProps(),emits:{"click:close":t=>!0,"update:modelValue":t=>!0,"group:selected":t=>!0,click:t=>!0},setup(t,n){let{attrs:_,emit:x,slots:E}=n;const{t:S}=useLocale(),{borderClasses:C}=useBorder(t),{colorClasses:T,colorStyles:B,variantClasses:A}=useVariant(t),{densityClasses:I}=useDensity(t),{elevationClasses:D}=useElevation(t),{roundedClasses:M}=useRounded(t),{sizeClasses:V}=useSize(t),{themeClasses:L}=provideTheme(t),F=useProxiedModel(t,"modelValue"),j=useGroupItem(t,VChipGroupSymbol,!1),U=useLink$1(t,_),H=computed(()=>t.link!==!1&&U.isLink.value),Y=computed(()=>!t.disabled&&t.link!==!1&&(!!j||t.link||U.isClickable.value)),Z=computed(()=>({"aria-label":S(t.closeLabel),onClick(X){X.stopPropagation(),F.value=!1,x("click:close",X)}}));function ne(X){x("click",X),Y.value&&(U.navigate?.(X),j?.toggle())}function re(X){(X.key==="Enter"||X.key===" ")&&(X.preventDefault(),ne(X))}return()=>{const X=U.isLink.value?"a":t.tag,ce=!!(t.appendIcon||t.appendAvatar),ue=!!(ce||E.append),_e=!!(E.close||t.closable),ye=!!(E.filter||t.filter)&&j,ie=!!(t.prependIcon||t.prependAvatar),W=!!(ie||E.prepend),O=!j||j.isSelected.value;return F.value&&withDirectives(createVNode(X,{class:["v-chip",{"v-chip--disabled":t.disabled,"v-chip--label":t.label,"v-chip--link":Y.value,"v-chip--filter":ye,"v-chip--pill":t.pill},L.value,C.value,O?T.value:void 0,I.value,D.value,M.value,V.value,A.value,j?.selectedClass.value,t.class],style:[O?B.value:void 0,t.style],disabled:t.disabled||void 0,draggable:t.draggable,href:U.href.value,tabindex:Y.value?0:void 0,onClick:ne,onKeydown:Y.value&&!H.value&&re},{default:()=>[genOverlays(Y.value,"v-chip"),ye&&createVNode(VExpandXTransition,{key:"filter"},{default:()=>[withDirectives(createVNode("div",{class:"v-chip__filter"},[E.filter?createVNode(VDefaultsProvider,{key:"filter-defaults",disabled:!t.filterIcon,defaults:{VIcon:{icon:t.filterIcon}}},E.filter):createVNode(VIcon,{key:"filter-icon",icon:t.filterIcon},null)]),[[vShow,j.isSelected.value]])]}),W&&createVNode("div",{key:"prepend",class:"v-chip__prepend"},[E.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!ie,defaults:{VAvatar:{image:t.prependAvatar,start:!0},VIcon:{icon:t.prependIcon,start:!0}}},E.prepend):createVNode(Fragment,null,[t.prependIcon&&createVNode(VIcon,{key:"prepend-icon",icon:t.prependIcon,start:!0},null),t.prependAvatar&&createVNode(VAvatar,{key:"prepend-avatar",image:t.prependAvatar,start:!0},null)])]),createVNode("div",{class:"v-chip__content"},[E.default?.({isSelected:j?.isSelected.value,selectedClass:j?.selectedClass.value,select:j?.select,toggle:j?.toggle,value:j?.value.value,disabled:t.disabled})??t.text]),ue&&createVNode("div",{key:"append",class:"v-chip__append"},[E.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!ce,defaults:{VAvatar:{end:!0,image:t.appendAvatar},VIcon:{end:!0,icon:t.appendIcon}}},E.append):createVNode(Fragment,null,[t.appendIcon&&createVNode(VIcon,{key:"append-icon",end:!0,icon:t.appendIcon},null),t.appendAvatar&&createVNode(VAvatar,{key:"append-avatar",end:!0,image:t.appendAvatar},null)])]),_e&&createVNode("div",mergeProps({key:"close",class:"v-chip__close"},Z.value),[E.close?createVNode(VDefaultsProvider,{key:"close-defaults",defaults:{VIcon:{icon:t.closeIcon,size:"x-small"}}},E.close):createVNode(VIcon,{key:"close-icon",icon:t.closeIcon,size:"x-small"},null)])]}),[[resolveDirective("ripple"),Y.value&&t.ripple,null]])}}}),VMenu$1="",makeVMenuProps=propsFactory({id:String,...omit(makeVOverlayProps({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:VDialogTransition}}),["absolute"])},"VMenu"),VMenu=genericComponent()({name:"VMenu",props:makeVMenuProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{slots:_}=n;const x=useProxiedModel(t,"modelValue"),{scopeId:E}=useScopeId(),S=getUid(),C=computed(()=>t.id||`v-menu-${S}`),T=ref$1(),B=inject$1(VMenuSymbol,null),A=shallowRef(0);provide(VMenuSymbol,{register(){++A.value},unregister(){--A.value},closeParents(){setTimeout(()=>{A.value||(x.value=!1,B?.closeParents())},40)}});async function I(F){const j=F.relatedTarget,U=F.target;await nextTick$2(),x.value&&j!==U&&T.value?.contentEl&&T.value?.globalTop&&![document,T.value.contentEl].includes(U)&&!T.value.contentEl.contains(U)&&focusableChildren(T.value.contentEl)[0]?.focus()}watch(x,F=>{F?(B?.register(),document.addEventListener("focusin",I,{once:!0})):(B?.unregister(),document.removeEventListener("focusin",I))});function D(){B?.closeParents()}function M(F){t.disabled||F.key==="Tab"&&(getNextElement(focusableChildren(T.value?.contentEl,!1),F.shiftKey?"prev":"next",U=>U.tabIndex>=0)||(x.value=!1,T.value?.activatorEl?.focus()))}function V(F){if(t.disabled)return;const j=T.value?.contentEl;j&&x.value?F.key==="ArrowDown"?(F.preventDefault(),focusChild(j,"next")):F.key==="ArrowUp"&&(F.preventDefault(),focusChild(j,"prev")):["ArrowDown","ArrowUp"].includes(F.key)&&(x.value=!0,F.preventDefault(),setTimeout(()=>setTimeout(()=>V(F))))}const L=computed(()=>mergeProps({"aria-haspopup":"menu","aria-expanded":String(x.value),"aria-owns":C.value,onKeydown:V},t.activatorProps));return useRender(()=>{const[F]=VOverlay.filterProps(t);return createVNode(VOverlay,mergeProps({ref:T,class:["v-menu",t.class],style:t.style},F,{modelValue:x.value,"onUpdate:modelValue":j=>x.value=j,absolute:!0,activatorProps:L.value,"onClick:outside":D,onKeydown:M},E),{activator:_.activator,default:function(){for(var j=arguments.length,U=new Array(j),H=0;H<j;H++)U[H]=arguments[H];return createVNode(VDefaultsProvider,{root:"VMenu"},{default:()=>[_.default?.(...U)]})}})}),forwardRefs({id:C,openChildren:A},T)}}),VSelect$1="",VTextField$1="",VCounter$1="",makeVCounterProps=propsFactory({active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...makeComponentProps(),...makeTransitionProps$1({transition:{component:VSlideYTransition}})},"VCounter"),VCounter=genericComponent()({name:"VCounter",functional:!0,props:makeVCounterProps(),setup(t,n){let{slots:_}=n;const x=computed(()=>t.max?`${t.value} / ${t.max}`:String(t.value));return useRender(()=>createVNode(MaybeTransition,{transition:t.transition},{default:()=>[withDirectives(createVNode("div",{class:["v-counter",t.class],style:t.style},[_.default?_.default({counter:x.value,max:t.max,value:t.value}):x.value]),[[vShow,t.active]])]})),{}}}),VField$1="",makeVFieldLabelProps=propsFactory({floating:Boolean,...makeComponentProps()},"VFieldLabel"),VFieldLabel=genericComponent()({name:"VFieldLabel",props:makeVFieldLabelProps(),setup(t,n){let{slots:_}=n;return useRender(()=>createVNode(VLabel,{class:["v-field-label",{"v-field-label--floating":t.floating},t.class],style:t.style,"aria-hidden":t.floating||void 0},_)),{}}}),allowedVariants=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],makeVFieldProps=propsFactory({appendInnerIcon:IconValue,bgColor:String,clearable:Boolean,clearIcon:{type:IconValue,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:IconValue,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:t=>allowedVariants.includes(t)},"onClick:clear":EventProp(),"onClick:appendInner":EventProp(),"onClick:prependInner":EventProp(),...makeComponentProps(),...makeLoaderProps(),...makeRoundedProps(),...makeThemeProps()},"VField"),VField=genericComponent()({name:"VField",inheritAttrs:!1,props:{id:String,...makeFocusProps(),...makeVFieldProps()},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,n){let{attrs:_,emit:x,slots:E}=n;const{themeClasses:S}=provideTheme(t),{loaderClasses:C}=useLoader(t),{focusClasses:T,isFocused:B,focus:A,blur:I}=useFocus(t),{InputIcon:D}=useInputIcon(t),{roundedClasses:M}=useRounded(t),{rtlClasses:V}=useRtl(),L=computed(()=>t.dirty||t.active),F=computed(()=>!t.singleLine&&!!(t.label||E.label)),j=getUid(),U=computed(()=>t.id||`input-${j}`),H=computed(()=>`${U.value}-messages`),Y=ref$1(),Z=ref$1(),ne=ref$1(),re=computed(()=>["plain","underlined"].includes(t.variant)),{backgroundColorClasses:X,backgroundColorStyles:ce}=useBackgroundColor(toRef(t,"bgColor")),{textColorClasses:ue,textColorStyles:_e}=useTextColor(computed(()=>t.error||t.disabled?void 0:L.value&&B.value?t.color:t.baseColor));watch(L,W=>{if(F.value){const O=Y.value.$el,z=Z.value.$el;requestAnimationFrame(()=>{const J=nullifyTransforms(O),ee=z.getBoundingClientRect(),ae=ee.x-J.x,oe=ee.y-J.y-(J.height/2-ee.height/2),se=ee.width/.75,G=Math.abs(se-J.width)>1?{maxWidth:convertToUnit(se)}:void 0,q=getComputedStyle(O),te=getComputedStyle(z),fe=parseFloat(q.transitionDuration)*1e3||150,he=parseFloat(te.getPropertyValue("--v-field-label-scale")),Ee=te.getPropertyValue("color");O.style.visibility="visible",z.style.visibility="hidden",animate(O,{transform:`translate(${ae}px, ${oe}px) scale(${he})`,color:Ee,...G},{duration:fe,easing:standardEasing,direction:W?"normal":"reverse"}).finished.then(()=>{O.style.removeProperty("visibility"),z.style.removeProperty("visibility")})})}},{flush:"post"});const ye=computed(()=>({isActive:L,isFocused:B,controlRef:ne,blur:I,focus:A}));function ie(W){W.target!==document.activeElement&&W.preventDefault()}return useRender(()=>{const W=t.variant==="outlined",O=E["prepend-inner"]||t.prependInnerIcon,z=!!(t.clearable||E.clear),J=!!(E["append-inner"]||t.appendInnerIcon||z),ee=E.label?E.label({...ye.value,label:t.label,props:{for:U.value}}):t.label;return createVNode("div",mergeProps({class:["v-field",{"v-field--active":L.value,"v-field--appended":J,"v-field--center-affix":t.centerAffix??!re.value,"v-field--disabled":t.disabled,"v-field--dirty":t.dirty,"v-field--error":t.error,"v-field--flat":t.flat,"v-field--has-background":!!t.bgColor,"v-field--persistent-clear":t.persistentClear,"v-field--prepended":O,"v-field--reverse":t.reverse,"v-field--single-line":t.singleLine,"v-field--no-label":!ee,[`v-field--variant-${t.variant}`]:!0},S.value,X.value,T.value,C.value,M.value,V.value,t.class],style:[ce.value,t.style],onClick:ie},_),[createVNode("div",{class:"v-field__overlay"},null),createVNode(LoaderSlot,{name:"v-field",active:!!t.loading,color:t.error?"error":typeof t.loading=="string"?t.loading:t.color},{default:E.loader}),O&&createVNode("div",{key:"prepend",class:"v-field__prepend-inner"},[t.prependInnerIcon&&createVNode(D,{key:"prepend-icon",name:"prependInner"},null),E["prepend-inner"]?.(ye.value)]),createVNode("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(t.variant)&&F.value&&createVNode(VFieldLabel,{key:"floating-label",ref:Z,class:[ue.value],floating:!0,for:U.value,style:_e.value},{default:()=>[ee]}),createVNode(VFieldLabel,{ref:Y,for:U.value},{default:()=>[ee]}),E.default?.({...ye.value,props:{id:U.value,class:"v-field__input","aria-describedby":H.value},focus:A,blur:I})]),z&&createVNode(VExpandXTransition,{key:"clear"},{default:()=>[withDirectives(createVNode("div",{class:"v-field__clearable",onMousedown:ae=>{ae.preventDefault(),ae.stopPropagation()}},[E.clear?E.clear():createVNode(D,{name:"clear"},null)]),[[vShow,t.dirty]])]}),J&&createVNode("div",{key:"append",class:"v-field__append-inner"},[E["append-inner"]?.(ye.value),t.appendInnerIcon&&createVNode(D,{key:"append-icon",name:"appendInner"},null)]),createVNode("div",{class:["v-field__outline",ue.value],style:_e.value},[W&&createVNode(Fragment,null,[createVNode("div",{class:"v-field__outline__start"},null),F.value&&createVNode("div",{class:"v-field__outline__notch"},[createVNode(VFieldLabel,{ref:Z,floating:!0,for:U.value},{default:()=>[ee]})]),createVNode("div",{class:"v-field__outline__end"},null)]),re.value&&F.value&&createVNode(VFieldLabel,{ref:Z,floating:!0,for:U.value},{default:()=>[ee]})])])}),{controlRef:ne}}});function filterFieldProps(t){const n=Object.keys(VField.props).filter(_=>!isOn(_)&&_!=="class"&&_!=="style");return pick$1(t,n)}const activeTypes=["color","file","time","date","datetime-local","week","month"],makeVTextFieldProps=propsFactory({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...makeVInputProps(),...makeVFieldProps()},"VTextField"),VTextField=genericComponent()({name:"VTextField",directives:{Intersect:Intersect$1},inheritAttrs:!1,props:makeVTextFieldProps(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,n){let{attrs:_,emit:x,slots:E}=n;const S=useProxiedModel(t,"modelValue"),{isFocused:C,focus:T,blur:B}=useFocus(t),A=computed(()=>typeof t.counterValue=="function"?t.counterValue(S.value):(S.value??"").toString().length),I=computed(()=>{if(_.maxlength)return _.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter}),D=computed(()=>["plain","underlined"].includes(t.variant));function M(re,X){!t.autofocus||!re||X[0].target?.focus?.()}const V=ref$1(),L=ref$1(),F=ref$1(),j=computed(()=>activeTypes.includes(t.type)||t.persistentPlaceholder||C.value||t.active);function U(){F.value!==document.activeElement&&F.value?.focus(),C.value||T()}function H(re){x("mousedown:control",re),re.target!==F.value&&(U(),re.preventDefault())}function Y(re){U(),x("click:control",re)}function Z(re){re.stopPropagation(),U(),nextTick$2(()=>{S.value=null,callEvent(t["onClick:clear"],re)})}function ne(re){const X=re.target;if(S.value=X.value,t.modelModifiers?.trim&&["text","search","password","tel","url"].includes(t.type)){const ce=[X.selectionStart,X.selectionEnd];nextTick$2(()=>{X.selectionStart=ce[0],X.selectionEnd=ce[1]})}}return useRender(()=>{const re=!!(E.counter||t.counter||t.counterValue),X=!!(re||E.details),[ce,ue]=filterInputAttrs(_),[{modelValue:_e,...ye}]=VInput.filterProps(t),[ie]=filterFieldProps(t);return createVNode(VInput,mergeProps({ref:V,modelValue:S.value,"onUpdate:modelValue":W=>S.value=W,class:["v-text-field",{"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-text-field--plain-underlined":["plain","underlined"].includes(t.variant)},t.class],style:t.style},ce,ye,{centerAffix:!D.value,focused:C.value}),{...E,default:W=>{let{id:O,isDisabled:z,isDirty:J,isReadonly:ee,isValid:ae}=W;return createVNode(VField,mergeProps({ref:L,onMousedown:H,onClick:Y,"onClick:clear":Z,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"],role:t.role},ie,{id:O.value,active:j.value||J.value,dirty:J.value||t.dirty,disabled:z.value,focused:C.value,error:ae.value===!1}),{...E,default:oe=>{let{props:{class:se,...G}}=oe;const q=withDirectives(createVNode("input",mergeProps({ref:F,value:S.value,onInput:ne,autofocus:t.autofocus,readonly:ee.value,disabled:z.value,name:t.name,placeholder:t.placeholder,size:1,type:t.type,onFocus:U,onBlur:B},G,ue),null),[[resolveDirective("intersect"),{handler:M},null,{once:!0}]]);return createVNode(Fragment,null,[t.prefix&&createVNode("span",{class:"v-text-field__prefix"},[createVNode("span",{class:"v-text-field__prefix__text"},[t.prefix])]),E.default?createVNode("div",{class:se,"data-no-activator":""},[E.default(),q]):cloneVNode(q,{class:se}),t.suffix&&createVNode("span",{class:"v-text-field__suffix"},[createVNode("span",{class:"v-text-field__suffix__text"},[t.suffix])])])}})},details:X?W=>createVNode(Fragment,null,[E.details?.(W),re&&createVNode(Fragment,null,[createVNode("span",null,null),createVNode(VCounter,{active:t.persistentCounter||C.value,value:A.value,max:I.value},E.counter)])]):void 0})}),forwardRefs({},V,L,F)}}),VVirtualScroll$1="",makeVVirtualScrollItemProps=propsFactory({renderless:Boolean,...makeComponentProps()},"VVirtualScrollItem"),VVirtualScrollItem=genericComponent()({name:"VVirtualScrollItem",inheritAttrs:!1,props:makeVVirtualScrollItemProps(),emits:{"update:height":t=>!0},setup(t,n){let{attrs:_,emit:x,slots:E}=n;const{resizeRef:S,contentRect:C}=useResizeObserver(void 0,"border");watch(()=>C.value?.height,T=>{T!=null&&x("update:height",T)}),useRender(()=>t.renderless?createVNode(Fragment,null,[E.default?.({itemRef:S})]):createVNode("div",mergeProps({ref:S,class:["v-virtual-scroll__item",t.class],style:t.style},_),[E.default?.()]))}}),UP=-1,DOWN=1,makeVirtualProps=propsFactory({itemHeight:{type:[Number,String],default:48}},"virtual");function useVirtual(t,n,_){const x=shallowRef(0),E=shallowRef(t.itemHeight),S=computed({get:()=>parseInt(E.value??0,10),set(X){E.value=X}}),C=ref$1(),{resizeRef:T,contentRect:B}=useResizeObserver();watchEffect(()=>{T.value=C.value});const A=useDisplay(),I=new Map;let D=Array.from({length:n.value.length});const M=computed(()=>{const X=(!B.value||C.value===document.documentElement?A.height.value:B.value.height)-(_?.value??0);return Math.ceil(X/S.value*1.7+1)});function V(X,ce){S.value=Math.max(S.value,ce),D[X]=ce,I.set(n.value[X],ce)}function L(X){return D.slice(0,X).reduce((ce,ue)=>ce+(ue||S.value),0)}function F(X){const ce=n.value.length;let ue=0,_e=0;for(;_e<X&&ue<ce;)_e+=D[ue++]||S.value;return ue-1}let j=0;function U(){if(!C.value||!B.value)return;const X=B.value.height-56,ce=C.value.scrollTop,ue=ce<j?UP:DOWN,_e=F(ce+X/2),ye=Math.round(M.value/3),ie=_e-ye,W=x.value+ye*2-1;ue===UP&&_e<=W?x.value=clamp(ie,0,n.value.length):ue===DOWN&&_e>=W&&(x.value=clamp(ie,0,n.value.length-M.value)),j=ce}function H(X){if(!C.value)return;const ce=L(X);C.value.scrollTop=ce}const Y=computed(()=>Math.min(n.value.length,x.value+M.value)),Z=computed(()=>n.value.slice(x.value,Y.value).map((X,ce)=>({raw:X,index:ce+x.value}))),ne=computed(()=>L(x.value)),re=computed(()=>L(n.value.length)-L(Y.value));return watch(()=>n.value.length,()=>{D=createRange(n.value.length).map(()=>S.value),I.forEach((X,ce)=>{const ue=n.value.indexOf(ce);ue===-1?I.delete(ce):D[ue]=X})}),{containerRef:C,computedItems:Z,itemHeight:S,paddingTop:ne,paddingBottom:re,scrollToIndex:H,handleScroll:U,handleItemResize:V}}const makeVVirtualScrollProps=propsFactory({items:{type:Array,default:()=>[]},renderless:Boolean,...makeVirtualProps(),...makeComponentProps(),...makeDimensionProps()},"VVirtualScroll"),VVirtualScroll=genericComponent()({name:"VVirtualScroll",props:makeVVirtualScrollProps(),setup(t,n){let{slots:_}=n;const x=getCurrentInstance("VVirtualScroll"),{dimensionStyles:E}=useDimension(t),{containerRef:S,handleScroll:C,handleItemResize:T,scrollToIndex:B,paddingTop:A,paddingBottom:I,computedItems:D}=useVirtual(t,toRef(t,"items"));return useToggleScope(()=>t.renderless,()=>{onMounted(()=>{S.value=getScrollParent(x.vnode.el,!0),S.value?.addEventListener("scroll",C)}),onScopeDispose(()=>{S.value?.removeEventListener("scroll",C)})}),useRender(()=>{const M=D.value.map(V=>createVNode(VVirtualScrollItem,{key:V.index,renderless:t.renderless,"onUpdate:height":L=>T(V.index,L)},{default:L=>_.default?.({item:V.raw,index:V.index,...L})}));return t.renderless?createVNode(Fragment,null,[createVNode("div",{class:"v-virtual-scroll__spacer",style:{paddingTop:convertToUnit(A.value)}},null),M,createVNode("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:convertToUnit(I.value)}},null)]):createVNode("div",{ref:S,class:["v-virtual-scroll",t.class],onScroll:C,style:[E.value,t.style]},[createVNode("div",{class:"v-virtual-scroll__container",style:{paddingTop:convertToUnit(A.value),paddingBottom:convertToUnit(I.value)}},[M])])}),{scrollToIndex:B}}});function useScrolling(t,n){const _=shallowRef(!1);let x;function E(T){cancelAnimationFrame(x),_.value=!0,x=requestAnimationFrame(()=>{x=requestAnimationFrame(()=>{_.value=!1})})}async function S(){await new Promise(T=>requestAnimationFrame(T)),await new Promise(T=>requestAnimationFrame(T)),await new Promise(T=>requestAnimationFrame(T)),await new Promise(T=>{if(_.value){const B=watch(_,()=>{B(),T()})}else T()})}async function C(T){if(T.key==="Tab"&&n.value?.focus(),!["PageDown","PageUp","Home","End"].includes(T.key))return;const B=t.value?.$el;if(!B)return;(T.key==="Home"||T.key==="End")&&B.scrollTo({top:T.key==="Home"?0:B.scrollHeight,behavior:"smooth"}),await S();const A=B.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(T.key==="PageDown"||T.key==="Home"){const I=B.getBoundingClientRect().top;for(const D of A)if(D.getBoundingClientRect().top>=I){D.focus();break}}else{const I=B.getBoundingClientRect().bottom;for(const D of[...A].reverse())if(D.getBoundingClientRect().bottom<=I){D.focus();break}}}return{onListScroll:E,onListKeydown:C}}const makeSelectProps=propsFactory({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:IconValue,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:deepEqual$3},itemColor:String,...makeItemsProps({itemChildren:!1})},"Select"),makeVSelectProps=propsFactory({...makeSelectProps(),...omit(makeVTextFieldProps({modelValue:null,role:"button"}),["validationValue","dirty","appendInnerIcon"]),...makeTransitionProps$1({transition:{component:VDialogTransition}})},"VSelect"),VSelect=genericComponent()({name:"VSelect",props:makeVSelectProps(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,n){let{slots:_}=n;const{t:x}=useLocale(),E=ref$1(),S=ref$1(),C=ref$1(),T=useProxiedModel(t,"menu"),B=computed({get:()=>T.value,set:ee=>{T.value&&!ee&&S.value?.openChildren||(T.value=ee)}}),{items:A,transformIn:I,transformOut:D}=useItems(t),M=useProxiedModel(t,"modelValue",[],ee=>I(ee===null?[null]:wrapInArray(ee)),ee=>{const ae=D(ee);return t.multiple?ae:ae[0]??null}),V=useForm(),L=computed(()=>M.value.map(ee=>A.value.find(ae=>{const oe=getPropertyFromItem(ae.raw,t.itemValue),se=getPropertyFromItem(ee.raw,t.itemValue);return oe===void 0||se===void 0?!1:t.returnObject?t.valueComparator(oe,se):t.valueComparator(ae.value,ee.value)})||ee)),F=computed(()=>L.value.map(ee=>ee.props.value)),j=shallowRef(!1),U=computed(()=>B.value?t.closeText:t.openText);let H="",Y;const Z=computed(()=>t.hideSelected?A.value.filter(ee=>!L.value.some(ae=>ae===ee)):A.value),ne=computed(()=>t.hideNoData&&!A.value.length||t.readonly||V?.isReadonly.value),re=ref$1(),{onListScroll:X,onListKeydown:ce}=useScrolling(re,E);function ue(ee){t.openOnClear&&(B.value=!0)}function _e(){ne.value||(B.value=!B.value)}function ye(ee){if(!ee.key||t.readonly||V?.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(ee.key)&&ee.preventDefault(),["Enter","ArrowDown"," "].includes(ee.key)&&(B.value=!0),["Escape","Tab"].includes(ee.key)&&(B.value=!1),ee.key==="Home"?re.value?.focus("first"):ee.key==="End"&&re.value?.focus("last");const ae=1e3;function oe(q){const te=q.key.length===1,fe=!q.ctrlKey&&!q.metaKey&&!q.altKey;return te&&fe}if(t.multiple||!oe(ee))return;const se=performance.now();se-Y>ae&&(H=""),H+=ee.key.toLowerCase(),Y=se;const G=A.value.find(q=>q.title.toLowerCase().startsWith(H));G!==void 0&&(M.value=[G])}function ie(ee){if(t.multiple){const ae=F.value.findIndex(oe=>t.valueComparator(oe,ee.value));if(ae===-1)M.value=[...M.value,ee];else{const oe=[...M.value];oe.splice(ae,1),M.value=oe}}else M.value=[ee],B.value=!1}function W(ee){re.value?.$el.contains(ee.relatedTarget)||(B.value=!1)}function O(){j.value&&E.value?.focus()}function z(ee){j.value=!0}function J(ee){if(ee==null)M.value=[];else if(matchesSelector(E.value,":autofill")||matchesSelector(E.value,":-webkit-autofill")){const ae=A.value.find(oe=>oe.title===ee);ae&&ie(ae)}else E.value&&(E.value.value="")}return watch(B,()=>{if(!t.hideSelected&&B.value&&L.value.length){const ee=Z.value.findIndex(ae=>L.value.some(oe=>ae.value===oe.value));IN_BROWSER&&window.requestAnimationFrame(()=>{ee>=0&&C.value?.scrollToIndex(ee)})}}),useRender(()=>{const ee=!!(t.chips||_.chip),ae=!!(!t.hideNoData||Z.value.length||_["prepend-item"]||_["append-item"]||_["no-data"]),oe=M.value.length>0,[se]=VTextField.filterProps(t),G=oe||!j.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return createVNode(VTextField,mergeProps({ref:E},se,{modelValue:M.value.map(q=>q.props.value).join(", "),"onUpdate:modelValue":J,focused:j.value,"onUpdate:focused":q=>j.value=q,validationValue:M.externalValue,dirty:oe,class:["v-select",{"v-select--active-menu":B.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":M.value.length,"v-select--selection-slot":!!_.selection},t.class],style:t.style,inputmode:"none",placeholder:G,"onClick:clear":ue,"onMousedown:control":_e,onBlur:W,onKeydown:ye,"aria-label":x(U.value),title:x(U.value)}),{..._,default:()=>createVNode(Fragment,null,[createVNode(VMenu,mergeProps({ref:S,modelValue:B.value,"onUpdate:modelValue":q=>B.value=q,activator:"parent",contentClass:"v-select__content",disabled:ne.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterLeave:O},t.menuProps),{default:()=>[ae&&createVNode(VList,{ref:re,selected:F.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:q=>q.preventDefault(),onKeydown:ce,onFocusin:z,onScrollPassive:X,tabindex:"-1",color:t.itemColor??t.color},{default:()=>[_["prepend-item"]?.(),!Z.value.length&&!t.hideNoData&&(_["no-data"]?.()??createVNode(VListItem,{title:x(t.noDataText)},null)),createVNode(VVirtualScroll,{ref:C,renderless:!0,items:Z.value},{default:q=>{let{item:te,index:fe,itemRef:he}=q;const Ee=mergeProps(te.props,{ref:he,key:fe,onClick:()=>ie(te)});return _.item?.({item:te,index:fe,props:Ee})??createVNode(VListItem,Ee,{prepend:we=>{let{isSelected:xe}=we;return createVNode(Fragment,null,[t.multiple&&!t.hideSelected?createVNode(VCheckboxBtn,{key:te.value,modelValue:xe,ripple:!1,tabindex:"-1"},null):void 0,te.props.prependIcon&&createVNode(VIcon,{icon:te.props.prependIcon},null)])}})}}),_["append-item"]?.()]})]}),L.value.map((q,te)=>{function fe(Ee){Ee.stopPropagation(),Ee.preventDefault(),ie(q)}const he={"onClick:close":fe,onMousedown(Ee){Ee.preventDefault(),Ee.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return createVNode("div",{key:q.value,class:"v-select__selection"},[ee?_.chip?createVNode(VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:q.title}}},{default:()=>[_.chip?.({item:q,index:te,props:he})]}):createVNode(VChip,mergeProps({key:"chip",closable:t.closableChips,size:"small",text:q.title},he),null):_.selection?.({item:q,index:te})??createVNode("span",{class:"v-select__selection-text"},[q.title,t.multiple&&te<L.value.length-1&&createVNode("span",{class:"v-select__selection-comma"},[createTextVNode(",")])])])})]),"append-inner":function(){for(var q=arguments.length,te=new Array(q),fe=0;fe<q;fe++)te[fe]=arguments[fe];return createVNode(Fragment,null,[_["append-inner"]?.(...te),t.menuIcon?createVNode(VIcon,{class:"v-select__menu-icon",icon:t.menuIcon},null):void 0])}})}),forwardRefs({isFocused:j,menu:B,select:ie},E)}}),defaultFilter=(t,n,_)=>t==null||n==null?-1:t.toString().toLocaleLowerCase().indexOf(n.toString().toLocaleLowerCase()),makeFilterProps=propsFactory({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function filterItems(t,n,_){const x=[],E=_?.default??defaultFilter,S=_?.filterKeys?wrapInArray(_.filterKeys):!1,C=Object.keys(_?.customKeyFilter??{}).length;if(!t?.length)return x;e:for(let T=0;T<t.length;T++){const B=t[T],A={},I={};let D=-1;if(n&&!_?.noFilter){if(typeof B=="object"){const L=S||Object.keys(B);for(const F of L){const j=getPropertyFromItem(B,F,B),U=_?.customKeyFilter?.[F];if(D=U?U(j,n,B):E(j,n,B),D!==-1&&D!==!1)U?A[F]=D:I[F]=D;else if(_?.filterMode==="every")continue e}}else D=E(B,n,B),D!==-1&&D!==!1&&(I.title=D);const M=Object.keys(I).length,V=Object.keys(A).length;if(!M&&!V||_?.filterMode==="union"&&V!==C&&!M||_?.filterMode==="intersection"&&(V!==C||!M))continue}x.push({index:T,matches:{...I,...A}})}return x}function useFilter(t,n,_,x){const E=ref$1([]),S=ref$1(new Map),C=computed(()=>x?.transform?unref(n).map(x?.transform):unref(n));watchEffect(()=>{const B=typeof _=="function"?_():unref(_),A=typeof B!="string"&&typeof B!="number"?"":String(B),I=filterItems(C.value,A,{customKeyFilter:t.customKeyFilter,default:t.customFilter,filterKeys:t.filterKeys,filterMode:t.filterMode,noFilter:t.noFilter}),D=unref(n),M=[],V=new Map;I.forEach(L=>{let{index:F,matches:j}=L;const U=D[F];M.push(U),V.set(U.value,j)}),E.value=M,S.value=V});function T(B){return S.value.get(B.value)}return{filteredItems:E,filteredMatches:S,getMatches:T}}function highlightResult$1(t,n,_){if(n==null)return t;if(Array.isArray(n))throw new Error("Multiple matches is not implemented");return typeof n=="number"&&~n?createVNode(Fragment,null,[createVNode("span",{class:"v-autocomplete__unmask"},[t.substr(0,n)]),createVNode("span",{class:"v-autocomplete__mask"},[t.substr(n,_)]),createVNode("span",{class:"v-autocomplete__unmask"},[t.substr(n+_)])]):t}const makeVAutocompleteProps=propsFactory({autoSelectFirst:{type:[Boolean,String]},search:String,...makeFilterProps({filterKeys:["title"]}),...makeSelectProps(),...omit(makeVTextFieldProps({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...makeTransitionProps$1({transition:!1})},"VAutocomplete"),VAutocomplete=genericComponent()({name:"VAutocomplete",props:makeVAutocompleteProps(),emits:{"update:focused":t=>!0,"update:search":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,n){let{slots:_}=n;const{t:x}=useLocale(),E=ref$1(),S=shallowRef(!1),C=shallowRef(!0),T=shallowRef(!1),B=ref$1(),A=ref$1(),I=useProxiedModel(t,"menu"),D=computed({get:()=>I.value,set:ge=>{I.value&&!ge&&B.value?.openChildren||(I.value=ge)}}),M=shallowRef(-1),V=computed(()=>E.value?.color),L=computed(()=>D.value?t.closeText:t.openText),{items:F,transformIn:j,transformOut:U}=useItems(t),{textColorClasses:H,textColorStyles:Y}=useTextColor(V),Z=useProxiedModel(t,"search",""),ne=useProxiedModel(t,"modelValue",[],ge=>j(ge===null?[null]:wrapInArray(ge)),ge=>{const Se=U(ge);return t.multiple?Se:Se[0]??null}),re=useForm(),{filteredItems:X,getMatches:ce}=useFilter(t,F,()=>C.value?"":Z.value),ue=computed(()=>ne.value.map(ge=>F.value.find(Se=>{const me=getPropertyFromItem(Se.raw,t.itemValue),Be=getPropertyFromItem(ge.raw,t.itemValue);return me===void 0||Be===void 0?!1:t.returnObject?t.valueComparator(me,Be):t.valueComparator(Se.value,ge.value)})||ge)),_e=computed(()=>t.hideSelected?X.value.filter(ge=>!ue.value.some(Se=>Se.value===ge.value)):X.value),ye=computed(()=>ue.value.map(ge=>ge.props.value)),ie=computed(()=>ue.value[M.value]),W=computed(()=>(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&Z.value===_e.value[0]?.title)&&_e.value.length>0&&!C.value&&!T.value),O=computed(()=>t.hideNoData&&!F.value.length||t.readonly||re?.isReadonly.value),z=ref$1(),{onListScroll:J,onListKeydown:ee}=useScrolling(z,E);function ae(ge){t.openOnClear&&(D.value=!0),Z.value=""}function oe(){O.value||(D.value=!0)}function se(ge){O.value||(S.value&&(ge.preventDefault(),ge.stopPropagation()),D.value=!D.value)}function G(ge){if(t.readonly||re?.isReadonly.value)return;const Se=E.value.selectionStart,me=ye.value.length;if((M.value>-1||["Enter","ArrowDown","ArrowUp"].includes(ge.key))&&ge.preventDefault(),["Enter","ArrowDown"].includes(ge.key)&&(D.value=!0),["Escape"].includes(ge.key)&&(D.value=!1),W.value&&["Enter","Tab"].includes(ge.key)&&$e(_e.value[0]),ge.key==="ArrowDown"&&W.value&&z.value?.focus("next"),!!t.multiple){if(["Backspace","Delete"].includes(ge.key)){if(M.value<0){ge.key==="Backspace"&&!Z.value&&(M.value=me-1);return}const Be=M.value;ie.value&&$e(ie.value),M.value=Be>=me-1?me-2:Be}if(ge.key==="ArrowLeft"){if(M.value<0&&Se>0)return;const Be=M.value>-1?M.value-1:me-1;ue.value[Be]?M.value=Be:(M.value=-1,E.value.setSelectionRange(Z.value?.length,Z.value?.length))}if(ge.key==="ArrowRight"){if(M.value<0)return;const Be=M.value+1;ue.value[Be]?M.value=Be:(M.value=-1,E.value.setSelectionRange(0,0))}}}function q(ge){Z.value=ge.target.value}function te(ge){if(matchesSelector(E.value,":autofill")||matchesSelector(E.value,":-webkit-autofill")){const Se=F.value.find(me=>me.title===ge.target.value);Se&&$e(Se)}}function fe(){S.value&&(C.value=!0,E.value?.focus())}function he(ge){S.value=!0,setTimeout(()=>{T.value=!0})}function Ee(ge){T.value=!1}function we(ge){(ge==null||ge===""&&!t.multiple)&&(ne.value=[])}const xe=shallowRef(!1);function $e(ge){if(t.multiple){const Se=ye.value.findIndex(me=>t.valueComparator(me,ge.value));if(Se===-1)ne.value=[...ne.value,ge];else{const me=[...ne.value];me.splice(Se,1),ne.value=me}}else ne.value=[ge],xe.value=!0,Z.value=ge.title,D.value=!1,C.value=!0,nextTick$2(()=>xe.value=!1)}return watch(S,(ge,Se)=>{ge!==Se&&(ge?(xe.value=!0,Z.value=t.multiple?"":String(ue.value.at(-1)?.props.title??""),C.value=!0,nextTick$2(()=>xe.value=!1)):(!t.multiple&&!Z.value?ne.value=[]:W.value&&!T.value&&!ue.value.some(me=>{let{value:Be}=me;return Be===_e.value[0].value})&&$e(_e.value[0]),D.value=!1,Z.value="",M.value=-1))}),watch(Z,ge=>{!S.value||xe.value||(ge&&(D.value=!0),C.value=!ge)}),watch(D,()=>{if(!t.hideSelected&&D.value&&ue.value.length){const ge=_e.value.findIndex(Se=>ue.value.some(me=>Se.value===me.value));IN_BROWSER&&window.requestAnimationFrame(()=>{ge>=0&&A.value?.scrollToIndex(ge)})}}),useRender(()=>{const ge=!!(t.chips||_.chip),Se=!!(!t.hideNoData||_e.value.length||_["prepend-item"]||_["append-item"]||_["no-data"]),me=ne.value.length>0,[Be]=VTextField.filterProps(t);return createVNode(VTextField,mergeProps({ref:E},Be,{modelValue:Z.value,"onUpdate:modelValue":we,focused:S.value,"onUpdate:focused":ve=>S.value=ve,validationValue:ne.externalValue,dirty:me,onInput:q,onChange:te,class:["v-autocomplete",`v-autocomplete--${t.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":D.value,"v-autocomplete--chips":!!t.chips,"v-autocomplete--selection-slot":!!_.selection,"v-autocomplete--selecting-index":M.value>-1},t.class],style:t.style,readonly:t.readonly,placeholder:me?void 0:t.placeholder,"onClick:clear":ae,"onMousedown:control":oe,onKeydown:G}),{..._,default:()=>createVNode(Fragment,null,[createVNode(VMenu,mergeProps({ref:B,modelValue:D.value,"onUpdate:modelValue":ve=>D.value=ve,activator:"parent",contentClass:"v-autocomplete__content",disabled:O.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterLeave:fe},t.menuProps),{default:()=>[Se&&createVNode(VList,{ref:z,selected:ye.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:ve=>ve.preventDefault(),onKeydown:ee,onFocusin:he,onFocusout:Ee,onScrollPassive:J,tabindex:"-1",color:t.itemColor??t.color},{default:()=>[_["prepend-item"]?.(),!_e.value.length&&!t.hideNoData&&(_["no-data"]?.()??createVNode(VListItem,{title:x(t.noDataText)},null)),createVNode(VVirtualScroll,{ref:A,renderless:!0,items:_e.value},{default:ve=>{let{item:Ae,index:Ve,itemRef:Pe}=ve;const Re=mergeProps(Ae.props,{ref:Pe,key:Ve,active:W.value&&Ve===0?!0:void 0,onClick:()=>$e(Ae)});return _.item?.({item:Ae,index:Ve,props:Re})??createVNode(VListItem,Re,{prepend:Ne=>{let{isSelected:qe}=Ne;return createVNode(Fragment,null,[t.multiple&&!t.hideSelected?createVNode(VCheckboxBtn,{key:Ae.value,modelValue:qe,ripple:!1,tabindex:"-1"},null):void 0,Ae.props.prependIcon&&createVNode(VIcon,{icon:Ae.props.prependIcon},null)])},title:()=>C.value?Ae.title:highlightResult$1(Ae.title,ce(Ae)?.title,Z.value?.length??0)})}}),_["append-item"]?.()]})]}),ue.value.map((ve,Ae)=>{function Ve(Re){Re.stopPropagation(),Re.preventDefault(),$e(ve)}const Pe={"onClick:close":Ve,onMousedown(Re){Re.preventDefault(),Re.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return createVNode("div",{key:ve.value,class:["v-autocomplete__selection",Ae===M.value&&["v-autocomplete__selection--selected",H.value]],style:Ae===M.value?Y.value:{}},[ge?_.chip?createVNode(VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:ve.title}}},{default:()=>[_.chip?.({item:ve,index:Ae,props:Pe})]}):createVNode(VChip,mergeProps({key:"chip",closable:t.closableChips,size:"small",text:ve.title},Pe),null):_.selection?.({item:ve,index:Ae})??createVNode("span",{class:"v-autocomplete__selection-text"},[ve.title,t.multiple&&Ae<ue.value.length-1&&createVNode("span",{class:"v-autocomplete__selection-comma"},[createTextVNode(",")])])])})]),"append-inner":function(){for(var ve=arguments.length,Ae=new Array(ve),Ve=0;Ve<ve;Ve++)Ae[Ve]=arguments[Ve];return createVNode(Fragment,null,[_["append-inner"]?.(...Ae),t.menuIcon?createVNode(VIcon,{class:"v-autocomplete__menu-icon",icon:t.menuIcon,onMousedown:se,onClick:noop$5,"aria-label":x(L.value),title:x(L.value)},null):void 0])}})}),forwardRefs({isFocused:S,isPristine:C,menu:D,search:Z,filteredItems:X,select:$e},E)}}),_sfc_main$1_=defineComponent$1({__name:"ItemNom",props:{langue:{},nom:{},id:{},indiceNom:{},indiceLangue:{},autorisationModification:{type:Boolean}},emits:["changerNom","effacer"],setup(t,{emit:n}){const _=t,{__:x,useI18n:E}=_(),{languesEtCodes:S,nomLangue:C}=x(),{t:T}=E(),B=new Nuchabl({}),A=ref$1(""),I=ref$1("");onMounted(()=>{A.value=_.nom,I.value=_.langue});const D=C(I),M=computed(()=>{if(!A.value?.length||!I.value)return;const F=B.rutzibTzibanem({runuk:I.value});return F&&!A.value.match(new RegExp(F,"g"))?[T("communs.erreurLangue",{langue:D.value})]:void 0}),V=()=>{n("effacer",{id:_.id})},L=()=>{!I.value||!A.value||M.value?.length||A.value.trim()===_.nom.trim()&&I.value===_.langue||n("changerNom",{id:_.id,nom:A.value,lng:I.value})};return watchEffect(()=>{I.value!==_.langue&&L()}),(F,j)=>(openBlock(),createBlock(VListItem,null,{append:withCtx(()=>[F.autorisationModification?(openBlock(),createBlock(VBtn,{key:0,class:"mb-3",icon:"mdi-delete",variant:"text",onClick:V})):createCommentVNode("",!0)]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:"4",class:"pb-0"},{default:withCtx(()=>[createVNode(VAutocomplete,{modelValue:I.value,"onUpdate:modelValue":j[0]||(j[0]=U=>I.value=U),class:"pt-1",density:"compact",variant:"outlined","item-title":"lng","item-value":"code",readonly:!F.autorisationModification,items:unref(S),label:F.indiceLangue},null,8,["modelValue","readonly","items","label"])]),_:1}),createVNode(VCol,{cols:"8",class:"pb-0"},{default:withCtx(()=>[createVNode(VTextField,{modelValue:A.value,"onUpdate:modelValue":j[1]||(j[1]=U=>A.value=U),class:"pt-1",density:"compact",variant:"outlined",readonly:!F.autorisationModification,rules:M.value,label:F.indiceNom,onBlur:L},null,8,["modelValue","readonly","rules","label"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),_hoisted_1$K={key:0,class:"text-center mt-3 text-h6"},_sfc_main$1Z=defineComponent$1({__name:"ListeNoms",props:{nomsInitiaux:{},indiceNom:{},indiceLangue:{},texteAucunNom:{},autorisationModification:{type:Boolean}},emits:["ajusterNoms"],setup(t,{emit:n}){const _=t,{__:x,useI18n:E}=_(),{t:S}=E(),{languesEtCodes:C,nomLangue:T}=x(),B=new Nuchabl({}),A=ref$1({});onMounted(()=>{A.value=Object.fromEntries(Object.entries(_.nomsInitiaux))});const I=ref$1([]);watchEffect(()=>{I.value=Object.entries(A.value).map(([ne,re])=>({lng:ne,nom:re,id:v4()}))});const D=computed(()=>C.value.filter(ne=>!I.value.some(re=>re.lng===ne.code))),M=()=>{const ne=Object.fromEntries(I.value.map(re=>[re.lng,re.nom]));n("ajusterNoms",ne)},V=({id:ne,nom:re,lng:X})=>{X===j.value&&(j.value=void 0),I.value=I.value.filter(ce=>ce.lng!==X||ce.id===ne).map(ce=>ce.id===ne?{lng:X,nom:re,id:ce.id}:ce),M()},L=({id:ne})=>{I.value=I.value.filter(re=>re.id!==ne),M()},F=ref$1(),j=ref$1(),U=T(j);watchEffect(()=>{j.value===void 0&&(j.value=D.value[0]?.code)});const H=computed(()=>{if(!F.value?.length||!j.value)return;const ne=B.rutzibTzibanem({runuk:j.value});return ne&&!F.value.match(new RegExp(ne,"g"))?[S("communs.erreurLangue",{langue:U.value})]:void 0}),Y=computed(()=>!!(j.value&&F.value)&&!H.value?.length),Z=()=>{j.value&&F.value&&(H.value?.length||(I.value=[{nom:F.value,lng:j.value,id:v4()},...I.value],j.value=void 0,F.value=void 0,M()))};return(ne,re)=>(openBlock(),createElementBlock(Fragment,null,[ne.autorisationModification?(openBlock(),createBlock(VList,{key:0,class:"pb-0"},{default:withCtx(()=>[createVNode(VListItem,null,{append:withCtx(()=>[createVNode(VBtn,{icon:"mdi-plus",variant:"text",class:"mb-2",disabled:!Y.value,onClick:Z},null,8,["disabled"])]),default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:"4"},{default:withCtx(()=>[createVNode(VSelect,{modelValue:j.value,"onUpdate:modelValue":re[0]||(re[0]=X=>j.value=X),class:"pt-1",density:"compact",variant:"outlined","item-title":"lng","item-value":"code",items:D.value,label:ne.indiceLangue},null,8,["modelValue","items","label"])]),_:1}),createVNode(VCol,{cols:"8"},{default:withCtx(()=>[createVNode(VTextField,{modelValue:F.value,"onUpdate:modelValue":re[1]||(re[1]=X=>F.value=X),class:"pt-1",density:"compact",variant:"outlined",rules:H.value,label:ne.indiceNom,onBlur:Z,onKeydown:withKeys(Z,["enter"])},null,8,["modelValue","rules","label","onKeydown"])]),_:1})]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0),createVNode(VList,{"max-height":"200",style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VDivider,{class:"mb-2"}),createVNode(VScrollYTransition,{group:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(I.value,X=>(openBlock(),createBlock(_sfc_main$1_,{id:X.id,key:X.id,langue:X.lng,nom:X.nom,"indice-langue":ne.indiceLangue,"indice-nom":ne.indiceNom,"autorisation-modification":ne.autorisationModification,onChangerNom:V,onEffacer:L},null,8,["id","langue","nom","indice-langue","indice-nom","autorisation-modification"]))),128)),I.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_1$K,toDisplayString$1(ne.texteAucunNom),1))]),_:1})]),_:1})],64))}}),ouvrirLien=t=>{window.open(t)};async function copier(t){await navigator.clipboard?.writeText(t)}function couleurScore(t){return t===null?{couleur:"#666666",note:"?"}:(t*=100,t>=95?{couleur:"#1e7145",note:"A"}:t>=90?{couleur:"#00a300",note:"A-"}:t>=85?{couleur:"#99b433",note:"B"}:t>=80?{couleur:"#ffc40d",note:"B-"}:t>=70?{couleur:"#e3a21a",note:"C+"}:t>=60?{couleur:"#da532c",note:"C"}:t>=55?{couleur:"#ee1111",note:"D"}:{couleur:"#b91d47",note:"F"})}const couper=(t,n,_)=>t.length<=n?t:t.slice(0,20)+_,ajusterTexteTraductible=({anciennes:t,nouvelles:n})=>{const _=Object.keys(t).filter(E=>!Object.keys(n).includes(E)),x=Object.fromEntries(Object.entries(n).filter(([E,S])=>t[E]!==S));return{Effacer:_,Ajouter:x}},VTooltip$1="",makeVTooltipProps=propsFactory({id:String,text:String,...omit(makeVOverlayProps({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),VTooltip=genericComponent()({name:"VTooltip",props:makeVTooltipProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{slots:_}=n;const x=useProxiedModel(t,"modelValue"),{scopeId:E}=useScopeId(),S=getUid(),C=computed(()=>t.id||`v-tooltip-${S}`),T=ref$1(),B=computed(()=>t.location.split(" ").length>1?t.location:t.location+" center"),A=computed(()=>t.origin==="auto"||t.origin==="overlap"||t.origin.split(" ").length>1||t.location.split(" ").length>1?t.origin:t.origin+" center"),I=computed(()=>t.transition?t.transition:x.value?"scale-transition":"fade-transition"),D=computed(()=>mergeProps({"aria-describedby":C.value},t.activatorProps));return useRender(()=>{const[M]=VOverlay.filterProps(t);return createVNode(VOverlay,mergeProps({ref:T,class:["v-tooltip",t.class],style:t.style,id:C.value},M,{modelValue:x.value,"onUpdate:modelValue":V=>x.value=V,transition:I.value,absolute:!0,location:B.value,origin:A.value,persistent:!0,role:"tooltip",activatorProps:D.value,_disableGlobalStack:!0},E),{activator:_.activator,default:function(){for(var V=arguments.length,L=new Array(V),F=0;F<V;F++)L[F]=arguments[F];return _.default?.(...L)??t.text}})}),forwardRefs({},T)}}),_sfc_main$1Y=defineComponent$1({__name:"LienObjet",props:{id:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),E=ref$1(!1),S=async()=>{await copier(n.id),E.value=!0};return(C,T)=>(openBlock(),createBlock(VMenu,null,{activator:withCtx(({props:B})=>[createVNode(VTooltip,{text:unref(x)("lienObjet.indice")},{activator:withCtx(({props:A})=>[createVNode(VBtn,mergeProps(mergeProps(B,A),{icon:"mdi-link",size:"small",variant:"flat"}),null,16)]),_:2},1032,["text"])]),default:withCtx(()=>[createVNode(VList,{onClick:T[0]||(T[0]=withModifiers(()=>{},["stop"]))},{default:withCtx(()=>[createVNode(VListItem,null,{title:withCtx(()=>[createTextVNode(toDisplayString$1(C.id),1)]),append:withCtx(()=>[createVNode(VBtn,{icon:E.value?"mdi-check":"mdi-content-copy",size:"small",variant:"flat",onClick:S},null,8,["icon"])]),_:1})]),_:1})]),_:1}))}}),_sfc_main$1X=defineComponent$1({__name:"ItemMembre",props:{compte:{},montrerAnonymes:{type:Boolean}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=ref$1({}),T=S(C);enregistrercoute(_?.profil.suivreNoms({idCompte:n.compte,f:A=>C.value=A}));const B=computed(()=>n.montrerAnonymes||T.value);return(A,I)=>withDirectives((openBlock(),createBlock(VListItem,{class:"text-start",density:"compact"},{prepend:withCtx(()=>[createVNode(_sfc_main$24,{id:A.compte},null,8,["id"])]),title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(T)||unref(E)("communs.anonyme")),1)]),append:withCtx(()=>[createVNode(_sfc_main$1Y,{id:A.compte},null,8,["id"])]),_:1},512)),[[vShow,B.value]])}}),_sfc_main$1W=defineComponent$1({__name:"JetonMembre",props:{compte:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=ref$1({}),T=S(C);enregistrercoute(_?.profil.suivreNoms({idCompte:n.compte,f:V=>C.value=V}));const B=ref$1();enregistrercoute(_?.suivreIdCompte({f:V=>B.value=V}));const A=ref$1(0);enregistrercoute(_?.rseau?.suivreConfianceMonRseauPourMembre({idCompte:n.compte,f:V=>A.value=V,profondeur:5}));const I=computed(()=>A.value<0?E("membres.confiance.bloqu"):A.value===0?E("membres.confiance.inconnu"):A.value<.33?E("membres.confiance.peuDinteraction"):A.value<.67?E("membres.confiance.interactionMoyenne"):A.value<1?E("membres.confiance.beaucoupDinteraction"):A.value===1?n.compte===B.value?E("membres.moi"):E("membres.confiance.connaissance"):""),D=computed(()=>A.value<0?"mdi-cancel":n.compte===B.value?"mdi-check":"mdi-hands-pray"),M=computed(()=>A.value<0?"error":A.value===1?"success":`rgba(22, 151, 246, ${.1+A.value*.9})`);return(V,L)=>(openBlock(),createBlock(VChip,{variant:"outlined",class:"me-2 mb-2"},{append:withCtx(()=>[createVNode(VTooltip,{text:I.value,location:"bottom"},{activator:withCtx(({props:F})=>[createVNode(VIcon,mergeProps(F,{color:M.value,size:"small",end:""}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(D.value),1)]),_:2},1040,["color"])]),_:1},8,["text"]),renderSlot(V.$slots,"post")]),default:withCtx(()=>[createVNode(_sfc_main$24,{id:V.compte,start:""},null,8,["id"]),createTextVNode(" "+toDisplayString$1(unref(T)||unref(E)("communs.anonyme"))+" ",1)]),_:3}))}}),VCard$1="",VCardActions=genericComponent()({name:"VCardActions",props:makeComponentProps(),setup(t,n){let{slots:_}=n;return provideDefaults({VBtn:{variant:"text"}}),useRender(()=>createVNode("div",{class:["v-card-actions",t.class],style:t.style},[_.default?.()])),{}}}),VCardSubtitle=createSimpleFunctional("v-card-subtitle"),VCardTitle=createSimpleFunctional("v-card-title"),makeCardItemProps=propsFactory({appendAvatar:String,appendIcon:IconValue,prependAvatar:String,prependIcon:IconValue,subtitle:String,title:String,...makeComponentProps(),...makeDensityProps()},"VCardItem"),VCardItem=genericComponent()({name:"VCardItem",props:makeCardItemProps(),setup(t,n){let{slots:_}=n;return useRender(()=>{const x=!!(t.prependAvatar||t.prependIcon),E=!!(x||_.prepend),S=!!(t.appendAvatar||t.appendIcon),C=!!(S||_.append),T=!!(t.title||_.title),B=!!(t.subtitle||_.subtitle);return createVNode("div",{class:["v-card-item",t.class],style:t.style},[E&&createVNode("div",{key:"prepend",class:"v-card-item__prepend"},[_.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!x,defaults:{VAvatar:{density:t.density,icon:t.prependIcon,image:t.prependAvatar}}},_.prepend):x&&createVNode(VAvatar,{key:"prepend-avatar",density:t.density,icon:t.prependIcon,image:t.prependAvatar},null)]),createVNode("div",{class:"v-card-item__content"},[T&&createVNode(VCardTitle,{key:"title"},{default:()=>[_.title?.()??t.title]}),B&&createVNode(VCardSubtitle,{key:"subtitle"},{default:()=>[_.subtitle?.()??t.subtitle]}),_.default?.()]),C&&createVNode("div",{key:"append",class:"v-card-item__append"},[_.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!S,defaults:{VAvatar:{density:t.density,icon:t.appendIcon,image:t.appendAvatar}}},_.append):S&&createVNode(VAvatar,{key:"append-avatar",density:t.density,icon:t.appendIcon,image:t.appendAvatar},null)])])}),{}}}),VCardText=createSimpleFunctional("v-card-text"),makeVCardProps=propsFactory({appendAvatar:String,appendIcon:IconValue,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:IconValue,ripple:{type:[Boolean,Object],default:!0},subtitle:String,text:String,title:String,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeLoaderProps(),...makeLocationProps(),...makePositionProps(),...makeRoundedProps(),...makeRouterProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"elevated"})},"VCard"),VCard=genericComponent()({name:"VCard",directives:{Ripple},props:makeVCardProps(),setup(t,n){let{attrs:_,slots:x}=n;const{themeClasses:E}=provideTheme(t),{borderClasses:S}=useBorder(t),{colorClasses:C,colorStyles:T,variantClasses:B}=useVariant(t),{densityClasses:A}=useDensity(t),{dimensionStyles:I}=useDimension(t),{elevationClasses:D}=useElevation(t),{loaderClasses:M}=useLoader(t),{locationStyles:V}=useLocation(t),{positionClasses:L}=usePosition(t),{roundedClasses:F}=useRounded(t),j=useLink$1(t,_),U=computed(()=>t.link!==!1&&j.isLink.value),H=computed(()=>!t.disabled&&t.link!==!1&&(t.link||j.isClickable.value));return useRender(()=>{const Y=U.value?"a":t.tag,Z=!!(x.title||t.title),ne=!!(x.subtitle||t.subtitle),re=Z||ne,X=!!(x.append||t.appendAvatar||t.appendIcon),ce=!!(x.prepend||t.prependAvatar||t.prependIcon),ue=!!(x.image||t.image),_e=re||ce||X,ye=!!(x.text||t.text);return withDirectives(createVNode(Y,{class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":H.value},E.value,S.value,C.value,A.value,D.value,M.value,L.value,F.value,B.value,t.class],style:[T.value,I.value,V.value,t.style],href:j.href.value,onClick:H.value&&j.navigate,tabindex:t.disabled?-1:void 0},{default:()=>[ue&&createVNode("div",{key:"image",class:"v-card__image"},[x.image?createVNode(VDefaultsProvider,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},x.image):createVNode(VImg,{key:"image-img",cover:!0,src:t.image},null)]),createVNode(LoaderSlot,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:x.loader}),_e&&createVNode(VCardItem,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:x.item,prepend:x.prepend,title:x.title,subtitle:x.subtitle,append:x.append}),ye&&createVNode(VCardText,{key:"text"},{default:()=>[x.text?.()??t.text]}),x.default?.(),x.actions&&createVNode(VCardActions,null,{default:x.actions}),genOverlays(H.value,"v-card")]}),[[resolveDirective("ripple"),H.value&&t.ripple]])}),{}}}),VDialog$1="",makeVDialogProps=propsFactory({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...makeVOverlayProps({origin:"center center",scrollStrategy:"block",transition:{component:VDialogTransition},zIndex:2400})},"VDialog"),VDialog=genericComponent()({name:"VDialog",props:makeVDialogProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{slots:_}=n;const x=useProxiedModel(t,"modelValue"),{scopeId:E}=useScopeId(),S=ref$1();function C(B){const A=B.relatedTarget,I=B.target;if(A!==I&&S.value?.contentEl&&S.value?.globalTop&&![document,S.value.contentEl].includes(I)&&!S.value.contentEl.contains(I)){const D=focusableChildren(S.value.contentEl);if(!D.length)return;const M=D[0],V=D[D.length-1];A===M?V.focus():M.focus()}}IN_BROWSER&&watch(()=>x.value&&t.retainFocus,B=>{B?document.addEventListener("focusin",C):document.removeEventListener("focusin",C)},{immediate:!0}),watch(x,async B=>{await nextTick$2(),B?S.value.contentEl?.focus({preventScroll:!0}):S.value.activatorEl?.focus({preventScroll:!0})});const T=computed(()=>mergeProps({"aria-haspopup":"dialog","aria-expanded":String(x.value)},t.activatorProps));return useRender(()=>{const[B]=VOverlay.filterProps(t);return createVNode(VOverlay,mergeProps({ref:S,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},B,{modelValue:x.value,"onUpdate:modelValue":A=>x.value=A,"aria-modal":"true",activatorProps:T.value,role:"dialog"},E),{activator:_.activator,default:function(){for(var A=arguments.length,I=new Array(A),D=0;D<A;D++)I[D]=arguments[D];return createVNode(VDefaultsProvider,{root:"VDialog"},{default:()=>[_.default?.(...I)]})}})}),forwardRefs({},S)}}),VWindow$1="",handleGesture=t=>{const{touchstartX:n,touchendX:_,touchstartY:x,touchendY:E}=t,S=.5,C=16;t.offsetX=_-n,t.offsetY=E-x,Math.abs(t.offsetY)<S*Math.abs(t.offsetX)&&(t.left&&_<n-C&&t.left(t),t.right&&_>n+C&&t.right(t)),Math.abs(t.offsetX)<S*Math.abs(t.offsetY)&&(t.up&&E<x-C&&t.up(t),t.down&&E>x+C&&t.down(t))};function touchstart(t,n){const _=t.changedTouches[0];n.touchstartX=_.clientX,n.touchstartY=_.clientY,n.start?.({originalEvent:t,...n})}function touchend(t,n){const _=t.changedTouches[0];n.touchendX=_.clientX,n.touchendY=_.clientY,n.end?.({originalEvent:t,...n}),handleGesture(n)}function touchmove(t,n){const _=t.changedTouches[0];n.touchmoveX=_.clientX,n.touchmoveY=_.clientY,n.move?.({originalEvent:t,...n})}function createHandlers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:_=>touchstart(_,n),touchend:_=>touchend(_,n),touchmove:_=>touchmove(_,n)}}function mounted(t,n){const _=n.value,x=_?.parent?t.parentElement:t,E=_?.options??{passive:!0},S=n.instance?.$.uid;if(!x||!S)return;const C=createHandlers(n.value);x._touchHandlers=x._touchHandlers??Object.create(null),x._touchHandlers[S]=C,keys$4(C).forEach(T=>{x.addEventListener(T,C[T],E)})}function unmounted(t,n){const _=n.value?.parent?t.parentElement:t,x=n.instance?.$.uid;if(!_?._touchHandlers||!x)return;const E=_._touchHandlers[x];keys$4(E).forEach(S=>{_.removeEventListener(S,E[S])}),delete _._touchHandlers[x]}const Touch={mounted,unmounted},Touch$1=Touch,VWindowSymbol=Symbol.for("vuetify:v-window"),VWindowGroupSymbol=Symbol.for("vuetify:v-window-group"),makeVWindowProps=propsFactory({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...makeComponentProps(),...makeTagProps(),...makeThemeProps()},"VWindow"),VWindow=genericComponent()({name:"VWindow",directives:{Touch},props:makeVWindowProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{slots:_}=n;const{themeClasses:x}=provideTheme(t),{isRtl:E}=useRtl(),{t:S}=useLocale(),C=useGroup(t,VWindowGroupSymbol),T=ref$1(),B=computed(()=>E.value?!t.reverse:t.reverse),A=shallowRef(!1),I=computed(()=>{const Z=t.direction==="vertical"?"y":"x",re=(B.value?!A.value:A.value)?"-reverse":"";return`v-window-${Z}${re}-transition`}),D=shallowRef(0),M=ref$1(void 0),V=computed(()=>C.items.value.findIndex(Z=>C.selected.value.includes(Z.id)));watch(V,(Z,ne)=>{const re=C.items.value.length,X=re-1;re<=2?A.value=Z<ne:Z===X&&ne===0?A.value=!0:Z===0&&ne===X?A.value=!1:A.value=Z<ne}),provide(VWindowSymbol,{transition:I,isReversed:A,transitionCount:D,transitionHeight:M,rootRef:T});const L=computed(()=>t.continuous||V.value!==0),F=computed(()=>t.continuous||V.value!==C.items.value.length-1);function j(){L.value&&C.prev()}function U(){F.value&&C.next()}const H=computed(()=>{const Z=[],ne={icon:E.value?t.nextIcon:t.prevIcon,class:`v-window__${B.value?"right":"left"}`,onClick:C.prev,ariaLabel:S("$vuetify.carousel.prev")};Z.push(L.value?_.prev?_.prev({props:ne}):createVNode(VBtn,ne,null):createVNode("div",null,null));const re={icon:E.value?t.prevIcon:t.nextIcon,class:`v-window__${B.value?"left":"right"}`,onClick:C.next,ariaLabel:S("$vuetify.carousel.next")};return Z.push(F.value?_.next?_.next({props:re}):createVNode(VBtn,re,null):createVNode("div",null,null)),Z}),Y=computed(()=>t.touch===!1?t.touch:{...{left:()=>{B.value?j():U()},right:()=>{B.value?U():j()},start:ne=>{let{originalEvent:re}=ne;re.stopPropagation()}},...t.touch===!0?{}:t.touch});return useRender(()=>withDirectives(createVNode(t.tag,{ref:T,class:["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover"},x.value,t.class],style:t.style},{default:()=>[createVNode("div",{class:"v-window__container",style:{height:M.value}},[_.default?.({group:C}),t.showArrows!==!1&&createVNode("div",{class:"v-window__controls"},[H.value])]),_.additional?.({group:C})]}),[[resolveDirective("touch"),Y.value]])),{group:C}}}),makeVWindowItemProps=propsFactory({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...makeComponentProps(),...makeGroupItemProps(),...makeLazyProps()},"VWindowItem"),VWindowItem=genericComponent()({name:"VWindowItem",directives:{Touch:Touch$1},props:makeVWindowItemProps(),emits:{"group:selected":t=>!0},setup(t,n){let{slots:_}=n;const x=inject$1(VWindowSymbol),E=useGroupItem(t,VWindowGroupSymbol),{isBooted:S}=useSsrBoot();if(!x||!E)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const C=shallowRef(!1),T=computed(()=>S.value&&(x.isReversed.value?t.reverseTransition!==!1:t.transition!==!1));function B(){!C.value||!x||(C.value=!1,x.transitionCount.value>0&&(x.transitionCount.value-=1,x.transitionCount.value===0&&(x.transitionHeight.value=void 0)))}function A(){C.value||!x||(C.value=!0,x.transitionCount.value===0&&(x.transitionHeight.value=convertToUnit(x.rootRef.value?.clientHeight)),x.transitionCount.value+=1)}function I(){B()}function D(L){C.value&&nextTick$2(()=>{!T.value||!C.value||!x||(x.transitionHeight.value=convertToUnit(L.clientHeight))})}const M=computed(()=>{const L=x.isReversed.value?t.reverseTransition:t.transition;return T.value?{name:typeof L!="string"?x.transition.value:L,onBeforeEnter:A,onAfterEnter:B,onEnterCancelled:I,onBeforeLeave:A,onAfterLeave:B,onLeaveCancelled:I,onEnter:D}:!1}),{hasContent:V}=useLazy(t,E.isSelected);return useRender(()=>createVNode(MaybeTransition,{transition:M.value,disabled:!S.value},{default:()=>[withDirectives(createVNode("div",{class:["v-window-item",E.selectedClass.value,t.class],style:t.style},[V.value&&_.default?.()]),[[vShow,E.isSelected.value]])]})),{groupItem:E}}}),_hoisted_1$J={class:"text-center"},_hoisted_2$w={class:"mt-3 text-center text-caption"},_hoisted_3$k={class:"mb-4"},_hoisted_4$a={class:"my-3 text-disabled"},_hoisted_5$9={class:"mb-4"},_hoisted_6$8={class:"mb-4"},_hoisted_7$4={class:"mb-4"},_hoisted_8$4={class:"mb-4"},_hoisted_9$4={key:0,class:"text-center"},_hoisted_10$2={key:1,class:"text-center"},_hoisted_11$2={class:"text-center"},_hoisted_12$1={class:"text-h6 font-weight-light mb-2"},_hoisted_13={class:"text-caption text-grey"},_sfc_main$1V=defineComponent$1({__name:"InitialiserCompte",setup(t){const{useI18n:n}=_(),{t:_}=n(),{mdAndUp:x}=useDisplay(),{obtImageDco:E}=utiliserImagesDco(),S=inject$1("constl"),C=ref$1(!1),T=ref$1(0),B=["cheminement","noms","image","compteRejoindre","motDePasse","persister","cestParti"],A=ref$1(),I=()=>{switch(B[T.value]){case"image":T.value=B.indexOf(isBrowser$1?"persister":"cestParti");break;case"motDePasse":T.value=B.indexOf(isBrowser$1?"persister":"cestParti");break;default:T.value++;break}},D=()=>{switch(B[T.value]){case"compteRejoindre":T.value=B.indexOf("cheminement");break;case"cestParti":T.value=B.indexOf(isBrowser$1?"persister":A.value==="connecter"?"motDePasse":"image");break;case"persister":T.value=B.indexOf(A.value==="connecter"?"motDePasse":"image");break;default:T.value--;break}},M=computed(()=>{switch(B[T.value]){case"cheminement":return{actif:!1,visible:!1};case"noms":return{actif:Object.keys(H.value).length>0,visible:!0};case"compteRejoindre":return{actif:!!ue.value,visible:!0};case"motDePasse":return{actif:!!ce.value,visible:!0};case"cestParti":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),V=computed(()=>{switch(B[T.value]){case"cheminement":return{actif:!1,visible:!1};case"cestParti":return{actif:!J.value,visible:!0};default:return{actif:!0,visible:!0}}}),L=()=>{A.value="nouveau",T.value=B.indexOf("noms")},F=()=>{A.value="connecter",T.value=B.indexOf("compteRejoindre")},j=computed(()=>{switch(B[T.value]){case"cheminement":return _("accueil.initialiserCompte.titreCheminement");case"noms":return _("accueil.initialiserCompte.titreNoms");case"image":return _("accueil.initialiserCompte.titreImage");case"compteRejoindre":return _("accueil.initialiserCompte.titreCompteRejoindre");case"motDePasse":return _("accueil.initialiserCompte.titreMotDePasse");case"persister":return _("accueil.initialiserCompte.titrePersister");case"cestParti":return _("accueil.initialiserCompte.titreCestParti");default:return""}}),U=computed(()=>{switch(B[T.value]){case"cheminement":return _("accueil.initialiserCompte.sousTitreCheminement");case"noms":return _("accueil.initialiserCompte.sousTitreNoms");default:return""}}),H=ref$1({}),Y=oe=>{H.value=oe},Z=ref$1(),ne=computed(()=>{if(Z.value)return URL.createObjectURL(new Blob([Z.value],{type:"image"}))}),re=E("profil"),X=oe=>{Z.value=oe},ce=ref$1(),ue=ref$1(),_e=ref$1([]),ye=ref$1([]),ie=ref$1();enregistrercoute(S?.rseau?.suivreConnexionsPostesSFIP({f:oe=>ye.value=oe})),enregistrercoute(S?.suivreIdCompte({f:oe=>ie.value=oe})),enregistrercoute(S?.rseau?.suivreComptesRseauEtEnLigne({f:oe=>_e.value=oe.filter(se=>se.idCompte!==ie.value),profondeur:1/0}));const W=async()=>{await navigator.storage.persist()&&(I(),O.value=!0)},O=ref$1(!1);navigator.storage.persisted().then(oe=>O.value=oe);const z=ref$1();__vitePreload(()=>import("./logo-43f5caa3.js"),[]).then(oe=>z.value=oe.default);const J=ref$1(!1),ee=async()=>{if(J.value=!0,!!S){if(A.value==="nouveau"){for(const[oe,se]of Object.entries(H.value))await S.profil?.sauvegarderNom({langue:oe,nom:se});Z.value&&await S.profil?.sauvegarderImage({image:Z.value})}else{if(!ue.value||!ce.value)return;await S.demanderEtPuisRejoindreCompte({idCompte:ue.value,codeSecret:ce.value})}J.value=!1}},ae=ref$1();return S?.suivreIdCompte({f:oe=>ae.value=oe}),(oe,se)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":se[8]||(se[8]=G=>C.value=G)},{activator:withCtx(({props:G})=>[renderSlot(oe.$slots,"activator",normalizeProps(guardReactiveProps({props:G})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","min-width":unref(x)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(j.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(U.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:T.value,"onUpdate:modelValue":se[7]||(se[7]=G=>T.value=G),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$J,[createVNode(VBtn,{class:"ma-3",variant:"flat",color:"primary",onClick:L},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("accueil.initialiserCompte.nouveauCompte")),1)]),_:1}),createVNode(VBtn,{class:"ma-3",variant:"outlined",onClick:F},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("accueil.initialiserCompte.connecter")),1)]),_:1})])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"noms-initiaux":H.value,"indice-nom":unref(_)("listeNomsProfil.indiceNom"),"indice-langue":unref(_)("communs.indiceLangue"),"texte-aucun-nom":unref(_)("communs.texteAucunNom"),"autorisation-modification":"",onAjusterNoms:Y},null,8,["noms-initiaux","indice-nom","indice-langue","texte-aucun-nom"])]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(ImageEditable,{editable:!0,"src-image":ne.value,"img-defaut":unref(re),"max-taille-image":unref(MAX_TAILLE_IMAGE$4),"taille-avatar":150,onImageChangee:se[0]||(se[0]=G=>X(G))},null,8,["src-image","img-defaut","max-taille-image"]),createBaseVNode("p",_hoisted_2$w,toDisplayString$1(unref(_)("accueil.initialiserCompte.texteImage")),1)]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(VFadeTransition,null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",null,[createBaseVNode("p",_hoisted_3$k,toDisplayString$1(unref(_)("accueil.initialiserCompte.texteCompteRejoindre")),1),createVNode(VSelect,{modelValue:ue.value,"onUpdate:modelValue":se[1]||(se[1]=G=>ue.value=G),items:_e.value.map(G=>G.idCompte),loading:!_e.value.length,disabled:!_e.value.length,label:unref(_)("accueil.initialiserCompte.indiceCompte"),variant:"outlined"},{selection:withCtx(({item:G})=>[createVNode(_sfc_main$1W,{compte:G.value},null,8,["compte"])]),item:withCtx(({item:G,props:q})=>[createVNode(_sfc_main$1X,mergeProps(q,{compte:G.value,"montrer-anonymes":!0,simple:""}),null,16,["compte"])]),_:1},8,["modelValue","items","loading","disabled","label"]),createBaseVNode("p",_hoisted_4$a,toDisplayString$1((_e.value.length?unref(_)("accueil.initialiserCompte.indiceComptePasVu"):unref(_)("accueil.initialiserCompte.indiceRechercheComptes"))+unref(_)("accueil.initialiserCompte.indiceEssaieDeConnecter")),1)],512),[[vShow,ye.value.length]])]),_:1}),createVNode(VFadeTransition,null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",null,toDisplayString$1(unref(_)("accueil.initialiserCompte.texteEnConnexion")),513),[[vShow,!ye.value.length]])]),_:1})]),_:1}),createVNode(VWindowItem,{value:4},{default:withCtx(()=>[createBaseVNode("p",_hoisted_5$9,toDisplayString$1(unref(_)("accueil.initialiserCompte.texteCodeSecret")),1),createVNode(VTextField,{modelValue:ce.value,"onUpdate:modelValue":se[2]||(se[2]=G=>ce.value=G),label:unref(_)("accueil.initialiserCompte.indiceCodeSecret"),variant:"outlined"},null,8,["modelValue","label"])]),_:1}),createVNode(VWindowItem,{value:5},{default:withCtx(()=>[createBaseVNode("p",_hoisted_6$8,toDisplayString$1(unref(_)("accueil.initialiserCompte.textePersister.1")),1),createBaseVNode("p",_hoisted_7$4,toDisplayString$1(unref(_)("accueil.initialiserCompte.textePersister.2")),1),createBaseVNode("p",_hoisted_8$4,toDisplayString$1(unref(_)("accueil.initialiserCompte.textePersister.3")),1),O.value?(openBlock(),createElementBlock("div",_hoisted_9$4,[createVNode(VBtn,{class:"mt-3 mx-3",variant:"outlined",onClick:se[3]||(se[3]=G=>T.value++)},{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1}),createTextVNode(" "+toDisplayString$1(unref(_)("accueil.initialiserCompte.djPersistes")),1)]),_:1})])):(openBlock(),createElementBlock("div",_hoisted_10$2,[createVNode(VBtn,{class:"mt-3 mx-3",color:"primary",variant:"flat",onClick:se[4]||(se[4]=()=>W())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("accueil.initialiserCompte.persister")),1)]),_:1}),createVNode(VBtn,{class:"mt-3 mx-3",variant:"outlined",onClick:se[5]||(se[5]=G=>T.value++)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("accueil.initialiserCompte.pasPersister")),1)]),_:1})]))]),_:1}),createVNode(VWindowItem,{value:6},{default:withCtx(()=>[createVNode(VImg,{class:"mb-4",contain:"",height:"128",src:z.value},null,8,["src"]),createBaseVNode("div",_hoisted_11$2,[createBaseVNode("h3",_hoisted_12$1,toDisplayString$1(unref(_)("accueil.initialiserCompte.bienvenu")),1),createBaseVNode("span",_hoisted_13,toDisplayString$1(unref(_)("accueil.initialiserCompte.sousTitreBienvenu")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:J.value,onClick:se[6]||(se[6]=()=>ee())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("accueil.initialiserCompte.cestParti")),1)]),_:1},8,["loading"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!V.value.actif,onClick:D},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,V.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!M.value.actif,onClick:I},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,M.value.visible]])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),VFooter$1="",makeVFooterProps=propsFactory({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...makeBorderProps(),...makeComponentProps(),...makeElevationProps(),...makeLayoutItemProps(),...makeRoundedProps(),...makeTagProps({tag:"footer"}),...makeThemeProps()},"VFooter"),VFooter=genericComponent()({name:"VFooter",props:makeVFooterProps(),setup(t,n){let{slots:_}=n;const{themeClasses:x}=provideTheme(t),{backgroundColorClasses:E,backgroundColorStyles:S}=useBackgroundColor(toRef(t,"color")),{borderClasses:C}=useBorder(t),{elevationClasses:T}=useElevation(t),{roundedClasses:B}=useRounded(t),A=shallowRef(32),{resizeRef:I}=useResizeObserver(V=>{V.length&&(A.value=V[0].target.clientHeight)}),D=computed(()=>t.height==="auto"?A.value:parseInt(t.height,10)),{layoutItemStyles:M}=useLayoutItem({id:t.name,order:computed(()=>parseInt(t.order,10)),position:computed(()=>"bottom"),layoutSize:D,elementSize:computed(()=>t.height==="auto"?void 0:D.value),active:computed(()=>t.app),absolute:toRef(t,"absolute")});return useRender(()=>createVNode(t.tag,{ref:I,class:["v-footer",x.value,E.value,C.value,T.value,B.value,t.class],style:[S.value,t.app?M.value:{height:convertToUnit(t.height)},t.style]},_)),{}}}),_hoisted_1$I={class:"text-subtitle-1 text-disabled"},_hoisted_2$v={class:"my-6",style:{height:"150px"}},_hoisted_3$j={class:"text-disabled"},_sfc_main$1U=defineComponent$1({__name:"AccueilInitial",emits:["entrer"],setup(t,{emit:n}){const{mdAndUp:_}=useDisplay(),{useI18n:x}=_(),{t:E}=x(),S=inject$1("constl"),C="0.2.1",{formatterVersion:T}=utiliserNumration(),B=T(C),A=()=>n("entrer"),I=ref$1(3),D=ref$1(2),M=ref$1(!1);onMounted(()=>{setTimeout(()=>M.value=!0,(I.value+D.value)*1e3)});const V=ref$1(!1);S?.obtIdCompte().then(()=>V.value=!0);const L=ref$1();return enregistrercoute(S?.profil.suivreNoms({f:F=>L.value=F})),watchEffect(()=>{M.value&&L.value&&Object.keys(L.value).length&&A()}),(F,j)=>(openBlock(),createElementBlock("div",null,[createVNode(VContainer,{class:"text-center",style:{height:"100%"}},{default:withCtx(()=>[createVNode(VRow,{align:"center","no-gutters":"",style:{height:"80%"}},{default:withCtx(()=>[createVNode(VCol,null,{default:withCtx(()=>[createVNode(_sfc_main$20,{largeur:unref(_)?500:250,delai:I.value,debut:D.value},null,8,["largeur","delai","debut"]),createBaseVNode("h1",{class:normalizeClass(["mt-6",unref(_)?"text-h1":"text-h3"])},toDisplayString$1(unref(E)("communs.constellation")),3),createBaseVNode("p",_hoisted_1$I,toDisplayString$1(unref(E)("accueil.version",{version:unref(B)})),1),createBaseVNode("div",_hoisted_2$v,[createVNode(_sfc_main$1V,null,{activator:withCtx(({props:U})=>[createVNode(VFadeTransition,mergeProps(U,{"leave-absolute":""}),{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"outlined"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("accueil.dmarrer")),1)]),_:1},512),[[vShow,M.value&&V.value]])]),_:2},1040)]),_:1})])]),_:1})]),_:1})]),_:1}),createVNode(VFooter,null,{default:withCtx(()=>[createVNode(VContainer,{class:"text-center",style:{height:"100%"}},{default:withCtx(()=>[createBaseVNode("p",_hoisted_3$j,toDisplayString$1(unref(E)("accueil.piedDePage")),1)]),_:1})]),_:1})]))}}),_sfc_main$1T=defineComponent$1({__name:"ItemLangueProgrs",props:{code:{},selectionnee:{type:Boolean}},setup(t){const n=t,{__:_,__:x}=_(),{nomLangue:E}=_(),{_:S}=x({:n.code,:""}),C=computed(()=>(S.value?.||0)/(S.value?.||0)),T=E(n.code).value;return(B,A)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[B.selectionnee?(openBlock(),createBlock(VIcon,{key:0,color:"primary"},{default:withCtx(()=>[createTextVNode(" mdi-check-bold ")]),_:1})):createCommentVNode("",!0)]),title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(T)||B.code),1)]),append:withCtx(()=>[C.value===1?(openBlock(),createBlock(VIcon,{key:0,color:"primary"},{default:withCtx(()=>[createTextVNode(" mdi-check-circle ")]),_:1})):(openBlock(),createBlock(VProgressCircular,{key:1,"model-value":C.value*100,size:"20",color:"primary"},null,8,["model-value"]))]),_:1}))}}),_sfc_main$1S=defineComponent$1({__name:"JetonLangue",props:{code:{}},setup(t){const n=t,{__:_,__:x}=_(),{nomLangue:E}=_(),{_:S}=x({:n.code,:""}),C=computed(()=>(S.value?.||0)/(S.value?.||0)),T=E(n.code).value;return(B,A)=>(openBlock(),createBlock(VChip,{variant:"outlined",size:"small"},{append:withCtx(()=>[C.value===1?(openBlock(),createBlock(VIcon,{key:0,end:"",color:"primary"},{default:withCtx(()=>[createTextVNode(" mdi-check-circle ")]),_:1})):(openBlock(),createBlock(VIcon,{key:1,end:""},{default:withCtx(()=>[createVNode(VProgressCircular,{"model-value":C.value*100,size:"15",color:"primary"},null,8,["model-value"])]),_:1}))]),default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(T)||B.code)+" ",1)]),_:1}))}}),VBadge$1="",makeVBadgeProps=propsFactory({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:IconValue,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...makeComponentProps(),...makeLocationProps({location:"top end"}),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeTransitionProps$1({transition:"scale-rotate-transition"})},"VBadge"),VBadge=genericComponent()({name:"VBadge",inheritAttrs:!1,props:makeVBadgeProps(),setup(t,n){const{backgroundColorClasses:_,backgroundColorStyles:x}=useBackgroundColor(toRef(t,"color")),{roundedClasses:E}=useRounded(t),{t:S}=useLocale(),{textColorClasses:C,textColorStyles:T}=useTextColor(toRef(t,"textColor")),{themeClasses:B}=useTheme(),{locationStyles:A}=useLocation(t,!0,I=>(t.floating?t.dot?2:4:t.dot?8:12)+(["top","bottom"].includes(I)?+(t.offsetY??0):["left","right"].includes(I)?+(t.offsetX??0):0));return useRender(()=>{const I=Number(t.content),D=!t.max||isNaN(I)?t.content:I<=+t.max?I:`${t.max}+`,[M,V]=pick$1(n.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return createVNode(t.tag,mergeProps({class:["v-badge",{"v-badge--bordered":t.bordered,"v-badge--dot":t.dot,"v-badge--floating":t.floating,"v-badge--inline":t.inline},t.class]},V,{style:t.style}),{default:()=>[createVNode("div",{class:"v-badge__wrapper"},[n.slots.default?.(),createVNode(MaybeTransition,{transition:t.transition},{default:()=>[withDirectives(createVNode("span",mergeProps({class:["v-badge__badge",B.value,_.value,E.value,C.value],style:[x.value,T.value,t.inline?{}:A.value],"aria-atomic":"true","aria-label":S(t.label,I),"aria-live":"polite",role:"status"},M),[t.dot?void 0:n.slots.badge?n.slots.badge?.():t.icon?createVNode(VIcon,{icon:t.icon},null):D]),[[vShow,t.modelValue]])]})])]})}),{}}}),_sfc_main$1R=defineComponent$1({__name:"ItemMessageTraduction",props:{clef:{},actif:{type:Boolean},traductionApprouvee:{},traductionLangueSource:{},suggestions:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),{formatterChiffre:E}=utiliserNumration(),S=computed(()=>n.suggestions.length),C=E(S);return(T,B)=>(openBlock(),createBlock(VListItem,{active:T.actif},{append:withCtx(()=>[T.traductionApprouvee?(openBlock(),createBlock(VIcon,{key:0,color:"primary",icon:"mdi-check"})):T.suggestions.length?(openBlock(),createBlock(VBadge,{key:1,content:unref(C),color:"secondary",location:"bottom end"},{default:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-hand-pointing-up")]),_:1})]),_:1},8,["content"])):createCommentVNode("",!0)]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(T.traductionLangueSource||unref(x)("languesInterface.dialogueContribuer.aucuneTraduction")),1)]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(T.clef),1)]),_:1})]),_:1},8,["active"]))}}),_sfc_main$1Q=defineComponent$1({__name:"SrieJetons",props:{nMax:{},items:{}},setup(t){const n=t,{formatterChiffre:_}=utiliserNumration(),x=B=>typeof B=="string"?{id:B}:B,E=computed(()=>n.items?.slice(0,n.nMax).map(x)||[]),S=computed(()=>n.items?.slice(n.nMax).map(x)||[]),C=computed(()=>S.value.length),T=_(C);return(B,A)=>(openBlock(),createElementBlock("span",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(E.value,I=>(openBlock(),createElementBlock("span",{key:I.id},[renderSlot(B.$slots,"jeton",normalizeProps(guardReactiveProps(I)))]))),128)),S.value.length?(openBlock(),createBlock(VMenu,{key:0},{activator:withCtx(({props:I})=>[createVNode(VChip,mergeProps(I,{variant:"outlined",class:"me-2 mb-2"}),{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1}),createTextVNode(" "+toDisplayString$1(unref(T)),1)]),_:2},1040)]),default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(S.value,I=>(openBlock(),createElementBlock("li",{key:I.id},[renderSlot(B.$slots,"itemListe",normalizeProps(guardReactiveProps(I)))]))),128))]),_:3})]),_:3})):createCommentVNode("",!0)]))}}),catgoriesBase=["numrique","horoDatage","intervaleTemps","chane","chaneNonTraductible","boolen","gojson","vido","audio","image","fichier"],icneCatgorieVariable=t=>{if(t.type==="simple")switch(t.catgorie){case"numrique":return"mdi-numeric";case"chaneNonTraductible":case"chane":return"mdi-text-short";case"boolen":return"mdi-order-bool-ascending-variant";case"gojson":return"mdi-map-marker";case"fichier":return"mdi-file";case"vido":return"mdi-play-box-outline";case"audio":return"mdi-waveform";case"image":return"mdi-image";case"intervaleTemps":return"mdi-calendar-range-outline";case"horoDatage":return"mdi-calendar-clock";default:return""}else return"mdi-list"},_sfc_main$1P=defineComponent$1({__name:"JetonVariable",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=computed(()=>T.value?icneCatgorieVariable(T.value):"mdi-variable"),T=ref$1();enregistrercoute(_?.variables.suivreCatgorieVariable({idVariable:n.id,f:I=>T.value=I}));const B=ref$1({}),A=S(B);return enregistrercoute(_?.variables.suivreNomsVariable({idVariable:n.id,f:I=>B.value=I})),(I,D)=>(openBlock(),createBlock(VChip,{class:"mb-2 me-2","prepend-icon":C.value,variant:"outlined",size:"small"},{default:withCtx(()=>[renderSlot(I.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(unref(A)||unref(E)("variables.sansNom")),1)])]),_:3},8,["prepend-icon"]))}}),_sfc_main$1O=defineComponent$1({__name:"JetonDispositif",props:{idDispositif:{},idCompte:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),{nomDispositif:E,typeDispositif:S}=utiliserNomEtTypeDispositif({idDispositif:n.idDispositif,idCompte:n.idCompte}),C=computed(()=>obtIcneDispositifDeType(S.value));return(T,B)=>(openBlock(),createBlock(VChip,{"prepend-icon":C.value,variant:"outlined"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)||unref(x)("dispositifs.sansNom")),1)]),_:1},8,["prepend-icon"]))}}),_sfc_main$1N=defineComponent$1({__name:"ItemDispositif",props:{idDispositif:{},idCompte:{},vuA:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),E=inject$1("constl"),{nomDispositif:S,typeDispositif:C}=utiliserNomEtTypeDispositif({idDispositif:n.idDispositif,idCompte:n.idCompte}),T=computed(()=>obtIcneDispositifDeType(C.value)),{ilYAMs:B,texte:A}=utiliserIlYA({vu:n.vuA,t:x}),I=ref$1();onMounted(async()=>{I.value=await E?.obtIdDispositif()});const D=computed(()=>n.idDispositif===I.value?x("dispositifs.ceDispositif"):A.value),M=computed(()=>{if(B.value===void 0||B.value<=1e3*60*5)return"success";if(B.value<=1e3*60*30)return"warning"});return(V,L)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[M.value?(openBlock(),createBlock(VBadge,{key:0,dot:"",color:M.value,location:"bottom end"},{default:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(T.value),1)]),_:1})]),_:1},8,["color"])):(openBlock(),createBlock(VIcon,{key:1},{default:withCtx(()=>[createTextVNode(toDisplayString$1(T.value),1)]),_:1}))]),_:1})]),title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)||unref(x)("dispositifs.sansNom")),1)]),subtitle:withCtx(()=>[createTextVNode(toDisplayString$1(D.value),1)]),append:withCtx(()=>[createVNode(_sfc_main$1Y,{id:V.idDispositif},null,8,["id"])]),default:withCtx(()=>[V.idCompte?(openBlock(),createBlock(_sfc_main$1W,{key:0,compte:V.idCompte},null,8,["compte"])):createCommentVNode("",!0),renderSlot(V.$slots,"default")]),_:3}))}}),makeVRadioProps=propsFactory({...makeVSelectionControlProps({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),VRadio=genericComponent()({name:"VRadio",props:makeVRadioProps(),setup(t,n){let{slots:_}=n;return useRender(()=>createVNode(VSelectionControl,mergeProps(t,{class:["v-radio",t.class],style:t.style,type:"radio"}),_)),{}}}),VRadioGroup$1="",makeVRadioGroupProps=propsFactory({height:{type:[Number,String],default:"auto"},...makeVInputProps(),...omit(makeSelectionControlGroupProps(),["multiple"]),trueIcon:{type:IconValue,default:"$radioOn"},falseIcon:{type:IconValue,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),VRadioGroup=genericComponent()({name:"VRadioGroup",inheritAttrs:!1,props:makeVRadioGroupProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{attrs:_,slots:x}=n;const E=getUid(),S=computed(()=>t.id||`radio-group-${E}`),C=useProxiedModel(t,"modelValue");return useRender(()=>{const[T,B]=filterInputAttrs(_),[A,I]=VInput.filterProps(t),[D,M]=VSelectionControl.filterProps(t),V=x.label?x.label({label:t.label,props:{for:S.value}}):t.label;return createVNode(VInput,mergeProps({class:["v-radio-group",t.class],style:t.style},T,A,{modelValue:C.value,"onUpdate:modelValue":L=>C.value=L,id:S.value}),{...x,default:L=>{let{id:F,messagesId:j,isDisabled:U,isReadonly:H}=L;return createVNode(Fragment,null,[V&&createVNode(VLabel,{id:F.value},{default:()=>[V]}),createVNode(VSelectionControlGroup,mergeProps(D,{id:F.value,"aria-describedby":j.value,defaultsTarget:"VRadio",trueIcon:t.trueIcon,falseIcon:t.falseIcon,type:t.type,disabled:U.value,readonly:H.value,"aria-labelledby":V?F.value:void 0,multiple:!1},B,{modelValue:C.value,"onUpdate:modelValue":Y=>C.value=Y}),x)])}})}),{}}}),_hoisted_1$H={class:"mb-0 text-h6"},_hoisted_2$u={class:"font-weight-bold"},_hoisted_3$i={key:0},_hoisted_4$9={class:"mb-0 text-h6"},_hoisted_5$8={class:"font-weight-bold"},_sfc_main$1M=defineComponent$1({__name:"Cartepingler",props:{id:{type:String,required:!0},optionFichiers:{type:Boolean,default:!0}},setup(t){const n=t,_=inject$1("constl"),{mdAndUp:x}=useDisplay(),{useI18n:E}=_(),{t:S}=E(),C=ref$1(!1),T=ref$1("TOUS"),B=ref$1("INSTALL"),A=ref$1([]),I=ref$1([]),D=[{titre:S("pingler.aucun"),sousTitre:S("pingler.indiceAucun"),icne:"mdi-cancel",valeur:"AUCUN"},{titre:S("pingler.tous"),sousTitre:S("pingler.indiceTous"),icne:"mdi-devices",valeur:"TOUS"},{titre:S("pingler.install"),sousTitre:S("pingler.indiceInstall"),icne:"mdi-monitor",valeur:"INSTALL"},{titre:S("pingler.dispositifsSpcifiques"),sousTitre:S("pingler.indiceDispositifsSpcifiques"),icne:"mdi-monitor-cellphone-star",valeur:"SPCIFIQUES"}],M=ref$1();enregistrercoute(_?.suivreDispositifs({f:X=>M.value=X}));const V=ref$1();enregistrercoute(_?.favoris.suivretatFavori({idObjet:n.id,f:X=>V.value=X})),watch(V,()=>{V.value?(typeof V.value.dispositifs=="string"&&["TOUS","INSTALL","AUCUN"].includes(V.value.dispositifs)?T.value=V.value.dispositifs:(T.value="SPCIFIQUES",A.value=typeof V.value.dispositifs=="string"?[V.value.dispositifs]:V.value.dispositifs),typeof V.value.dispositifsFichiers=="string"&&["TOUS","INSTALL","AUCUN"].includes(V.value.dispositifsFichiers)?B.value=V.value.dispositifsFichiers:V.value.dispositifsFichiers?(B.value="SPCIFIQUES",I.value=typeof V.value.dispositifsFichiers=="string"?[V.value.dispositifsFichiers]:V.value.dispositifsFichiers):B.value="AUCUN"):(T.value="AUCUN",B.value="INSTALL",A.value=[],I.value=[])});const L=computed(()=>{if(T.value!=="AUCUN")return T.value==="SPCIFIQUES"?A.value:T.value}),F=computed(()=>{if(B.value!=="AUCUN")return B.value==="SPCIFIQUES"?I.value:B.value}),j=computed(()=>V.value?L.value!==V.value.dispositifs||F.value!==V.value.dispositifsFichiers:T.value!=="AUCUN"),U=computed(()=>{const X=T.value==="SPCIFIQUES"?!!A.value.length:!0,ce=B.value==="SPCIFIQUES"?!!I.value.length:!0;return X&&ce&&j.value}),H=computed(()=>{if(!V.value)return!0;const{dispositifs:X,dispositifsFichiers:ce}=V.value,ue=Array.isArray(X)?new Set(X)!==new Set(A.value):X!==T.value,_e=Array.isArray(ce)?new Set(ce)!==new Set(I.value):ce!==B.value;return ue||_e}),Y=ref$1(!1),Z=async()=>{if(Y.value=!0,L.value){const X={idObjet:n.id,dispositifs:L.value,rcursif:!0};F.value&&(X.dispositifsFichiers=F.value),await _?.favoris.pinglerFavori(X)}else await ne();re()},ne=async()=>{await _?.favoris.dspinglerFavori({idObjet:n.id})},re=()=>{C.value=!1,Y.value=!1};return(X,ce)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":ce[5]||(ce[5]=ue=>C.value=ue),"max-width":unref(x)?500:300},{activator:withCtx(({props:ue})=>[renderSlot(X.$slots,"activator",normalizeProps(guardReactiveProps({props:ue})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("pingler.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:re})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$H,toDisplayString$1(unref(S)("pingler.dispositifspingle")),1),createVNode(VRadioGroup,{modelValue:T.value,"onUpdate:modelValue":ce[0]||(ce[0]=ue=>T.value=ue)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(D,ue=>(openBlock(),createBlock(VRadio,{key:ue.valeur,value:ue.valeur},{label:withCtx(()=>[createBaseVNode("div",null,[createVNode(VListItem,{subtitle:ue.sousTitre},{title:withCtx(()=>[createVNode(VIcon,{icon:ue.icne,start:"",size:"small"},null,8,["icon"]),createBaseVNode("span",_hoisted_2$u,toDisplayString$1(ue.titre),1)]),_:2},1032,["subtitle"])])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),createVNode(VExpandTransition,null,{default:withCtx(()=>[withDirectives(createVNode(VAutocomplete,{modelValue:A.value,"onUpdate:modelValue":ce[1]||(ce[1]=ue=>A.value=ue),items:M.value||[],disabled:!M.value,loading:!M.value,label:unref(S)("pingler.indiceSlectionnerDispositif"),density:"compact",variant:"outlined",multiple:"",chips:"","closable-chips":""},{chip:withCtx(({props:ue,item:_e})=>[createVNode(_sfc_main$1O,mergeProps(ue,{"id-dispositif":_e.title}),null,16,["id-dispositif"])]),item:withCtx(({props:ue,item:_e})=>[createVNode(_sfc_main$1N,mergeProps(ue,{"id-dispositif":_e.title}),null,16,["id-dispositif"])]),_:1},8,["modelValue","items","disabled","loading","label"]),[[vShow,T.value==="SPCIFIQUES"]])]),_:1}),t.optionFichiers?(openBlock(),createElementBlock("span",_hoisted_3$i,[createBaseVNode("p",_hoisted_4$9,toDisplayString$1(unref(S)("pingler.dispositifspingleFichier")),1),createVNode(VRadioGroup,{modelValue:B.value,"onUpdate:modelValue":ce[2]||(ce[2]=ue=>B.value=ue),disabled:T.value==="AUCUN"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(D,ue=>(openBlock(),createBlock(VRadio,{key:ue.valeur,value:ue.valeur},{label:withCtx(()=>[createBaseVNode("div",null,[createVNode(VListItem,{subtitle:ue.sousTitre},{title:withCtx(()=>[createVNode(VIcon,{icon:ue.icne,start:"",size:"small"},null,8,["icon"]),createBaseVNode("span",_hoisted_5$8,toDisplayString$1(ue.titre),1)]),_:2},1032,["subtitle"])])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","disabled"]),createVNode(VExpandTransition,null,{default:withCtx(()=>[withDirectives(createVNode(VAutocomplete,{modelValue:I.value,"onUpdate:modelValue":ce[3]||(ce[3]=ue=>I.value=ue),items:M.value,label:unref(S)("pingler.indiceSlectionnerDispositif"),"hide-details":"",chips:"","closable-chips":"",density:"compact",variant:"outlined",multiple:""},{chip:withCtx(({props:ue,item:_e})=>[createVNode(_sfc_main$1O,mergeProps(ue,{"id-dispositif":_e.title}),null,16,["id-dispositif"])]),item:withCtx(({props:ue,item:_e})=>[createVNode(_sfc_main$1N,mergeProps(ue,{"id-dispositif":_e.title}),null,16,["id-dispositif"])]),_:1},8,["modelValue","items","label"]),[[vShow,B.value==="SPCIFIQUES"]])]),_:1})])):createCommentVNode("",!0)]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:re},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.fermer"))+" ",1),createVNode(VIcon,{icon:"mdi-close",end:""})]),_:1}),createVNode(VBtn,{color:"primary",variant:"outlined",loading:Y.value,disabled:!U.value||!H.value,onClick:ce[4]||(ce[4]=()=>Z())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{icon:"mdi-check",end:""})]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_sfc_main$1L=defineComponent$1({__name:"Icnepingle",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),S=ref$1();enregistrercoute(_?.favoris.suivretatFavori({idObjet:n.id,f:A=>S.value=A}));const C=ref$1(!1);enregistrercoute(_?.favoris.suivreEstpinglSurDispositif({idObjet:n.id,f:A=>C.value=A.bd}));const T=computed(()=>S.value?C.value?"mdi-pin":"mdi-pin-outline":"mdi-pin-off-outline"),B=computed(()=>S.value?C.value?E("pingles.icne.pinglSurCeDispositif"):E("pingles.icne.pinglSurDAutresDispositifs"):E("pingles.icne.paspingl"));return(A,I)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(VTooltip,{text:B.value},{activator:withCtx(({props:D})=>[renderSlot(A.$slots,"activator",normalizeProps(guardReactiveProps({props:D})))]),_:3},8,["text"]),createVNode(VIcon,{icon:T.value},null,8,["icon"])],64))}}),_hoisted_1$G={class:"text-h6"},_sfc_main$1K=defineComponent$1({__name:"DivisionCarte",props:{titre:{},enAttente:{type:Boolean}},setup(t){return(n,_)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("p",_hoisted_1$G,toDisplayString$1(n.titre),1),n.enAttente?(openBlock(),createBlock(VProgressLinear,{key:0,class:"mb-2",indeterminate:"",height:1})):(openBlock(),createBlock(VDivider,{key:1,class:"mb-2"}))],64))}}),_sfc_main$1J=defineComponent$1({__name:"JetonContactMembre",props:{type:{},contact:{}},setup(t){const n=t,{formatterNumro:_}=utiliserNumration(),x=computed(()=>obtIcneContact({type:n.type})),E=_(n.contact),S=computed(()=>{switch(n.type){case"tlphone":case"whatsapp":case"telegram":return E.value;default:return n.contact}});return(C,T)=>(openBlock(),createBlock(VChip,{class:"ma-2",variant:"outlined",label:"","prepend-icon":x.value},{default:withCtx(()=>[createTextVNode(toDisplayString$1(S.value),1)]),_:1},8,["prepend-icon"]))}}),_hoisted_1$F={key:0},_hoisted_2$t={class:"highlight-yellow"},_hoisted_3$h={key:1},TAILLE_MIN_TEXTE_AVANT=4,_sfc_main$1I=defineComponent$1({__name:"TexteSurlignRecherche",props:{info:{},maxTaille:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),E=computed(()=>{const{texte:S,dbut:C,fin:T}=n.info,B=S.slice(C,T),A=S.slice(0,n.info.dbut),I=S.slice(T);if(n.maxTaille){if(n.maxTaille-S.length>=0)return{texteAvant:A,texteSurlign:B,texteAprs:I,coupAvant:!1,coupAprs:!1};{const M=Math.min(B.length,n.maxTaille-Math.min(TAILLE_MIN_TEXTE_AVANT,A.length)),V=Math.max(TAILLE_MIN_TEXTE_AVANT,n.maxTaille-M),L=Math.max(0,n.maxTaille-Math.min(V,A.length)-M),F=B.length>M||I.length>L;return{texteAvant:A.slice(Math.max(0,A.length-V),A.length),texteSurlign:B.slice(0,M),texteAprs:I.slice(0,L),coupAvant:A.length>V,coupAprs:F}}}else return{texteAvant:A,texteSurlign:B,texteAprs:I,coupAvant:!1,coupAprs:!1}});return(S,C)=>(openBlock(),createElementBlock("span",null,[E.value.coupAvant?(openBlock(),createElementBlock("span",_hoisted_1$F,toDisplayString$1(unref(x)("communs.troisPetitsPoints")),1)):createCommentVNode("",!0),createBaseVNode("span",null,toDisplayString$1(E.value.texteAvant),1),createBaseVNode("span",_hoisted_2$t,toDisplayString$1(E.value.texteSurlign),1),createBaseVNode("span",null,toDisplayString$1(E.value.texteAprs),1),E.value.coupAprs?(openBlock(),createElementBlock("span",_hoisted_3$h,toDisplayString$1(unref(x)("communs.troisPetitsPoints")),1)):createCommentVNode("",!0)]))}}),TexteSurlign_Recherche_vue_vue_type_style_index_0_lang="",_hoisted_1$E={key:1},_sfc_main$1H=defineComponent$1({__name:"RsultatRechercheProfil",props:{rsultat:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{traduireNom:E}=utiliserLangues(),{t:S}=x(),C=computed(()=>n.rsultat.rsultatObjectif.de),T=ref$1({}),B=E(T);return enregistrercoute(_?.profil.suivreNoms({idCompte:n.rsultat.id,f:A=>T.value=A})),(A,I)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(_sfc_main$24,{id:A.rsultat.id,start:""},null,8,["id"])]),title:withCtx(()=>[C.value==="nom"?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:A.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1$E,toDisplayString$1(unref(B)||unref(S)("communs.anonyme")),1))]),default:withCtx(()=>[C.value==="id"?(openBlock(),createBlock(VChip,{key:0,variant:"outlined",label:"",size:"small","prepend-icon":"mdi-link"},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:A.rsultat.rsultatObjectif.info,"max-taille":25},null,8,["info"])]),_:1})):createCommentVNode("",!0),C.value==="contact"&&A.rsultat.rsultatObjectif.clef?(openBlock(),createBlock(_sfc_main$1J,{key:1,contact:A.rsultat.rsultatObjectif.info.texte,type:A.rsultat.rsultatObjectif.clef},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:A.rsultat.rsultatObjectif.info},null,8,["info"])]),_:1},8,["contact","type"])):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$1G=defineComponent$1({__name:"GererAuteurs",props:{id:{},auteurs:{},permissionModerateur:{type:Boolean}},emits:["sauvegarder"],setup(t,{emit:n}){const _=t,{mdAndUp:x}=useDisplay(),{useI18n:E}=_(),{t:S}=E(),C=inject$1("constl"),T=ref$1(!1),B=()=>{T.value=!1},A=ref$1(!1),I=ref$1(),D=ref$1();enregistrerRecherche({requte:D,rfRsultat:I,fRecherche:async({requte:j,nOuProfondeur:U,rfRsultat:H})=>C?.recherche.rechercherProfilsSelonTexte({texte:j,nRsultatsDsirs:U,f:Y=>H.value=Y.sort((Z,ne)=>Z.rsultatObjectif.score>ne.rsultatObjectif.score?-1:Z.rsultatObjectif.score<ne.rsultatObjectif.score?1:0)}),fRechercheDfaut:async({nOuProfondeur:j,rfRsultat:U})=>C?.rseau?.rechercherMembres({nRsultatsDsirs:j,f:H=>U.value=H.sort((Y,Z)=>Y.rsultatObjectif.score>Z.rsultatObjectif.score?-1:Y.rsultatObjectif.score<Z.rsultatObjectif.score?1:0)})});const M=computed(()=>I.value?.filter(j=>V.value.includes(j.id)?!1:A.value?_.auteurs?.find(U=>U.idCompte===j.id)?.rle!=="MODRATEUR":!_.auteurs?.map(U=>U.idCompte).includes(j.id))),V=ref$1([]),L=j=>{V.value=[...V.value,j]},F=j=>{V.value=V.value.filter(U=>U!==j)};return(j,U)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":U[3]||(U[3]=H=>T.value=H),"max-width":unref(x)?500:300},{activator:withCtx(({props:H})=>[renderSlot(j.$slots,"activator",normalizeProps(guardReactiveProps({props:H})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("auteurs.carteGrer.titre")),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("auteurs.carteGrer.sousTitre")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VMenu,null,{activator:withCtx(({props:H})=>[createVNode(VTextField,mergeProps(H,{modelValue:D.value,"onUpdate:modelValue":U[0]||(U[0]=Y=>D.value=Y),"hide-details":"",variant:"outlined",density:"compact"}),null,16,["modelValue"])]),default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[M.value?.length?createCommentVNode("",!0):(openBlock(),createBlock(VListItem,{key:0},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("auteurs.carteGrer.aucunRsultat")),1)]),_:1})]),_:1})),(openBlock(!0),createElementBlock(Fragment,null,renderList(M.value,H=>(openBlock(),createBlock(_sfc_main$1H,{key:H.id,rsultat:H,onClick:()=>L(H.id)},null,8,["rsultat","onClick"]))),128))]),_:1})]),_:1}),createVNode(_sfc_main$1K,{titre:unref(S)("auteurs.carteGrer.nouveaux"),"en-attente":!1},null,8,["titre"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(V.value,H=>(openBlock(),createBlock(_sfc_main$1W,{key:H,compte:H},{post:withCtx(()=>[createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"x-small",onClick:()=>F(H)},null,8,["onClick"])]),_:2},1032,["compte"]))),128)),createVNode(VCheckbox,{modelValue:A.value,"onUpdate:modelValue":U[1]||(U[1]=H=>A.value=H),color:"primary",label:unref(S)("auteurs.carteGrer.ajouterCommeModrateur")},null,8,["modelValue","label"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:B},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1}),createVNode(VBtn,{variant:"outlined",color:"primary",disabled:!V.value.length,onClick:U[2]||(U[2]=()=>n("sauvegarder"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_sfc_main$1F=defineComponent$1({__name:"AuteursObjet",props:{auteurs:{type:Array,default:()=>[]},nMax:{type:Number,default:3}},setup(t){const n=t,_=computed(()=>n.auteurs?.map(x=>({id:x.idCompte,...x})));return(x,E)=>(openBlock(),createBlock(_sfc_main$1Q,{items:_.value,"n-max":t.nMax},{jeton:withCtx(({idCompte:S})=>[createVNode(_sfc_main$17,{id:S},{activator:withCtx(({props:C})=>[createVNode(_sfc_main$1W,mergeProps(C,{compte:S}),null,16,["compte"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:S})=>[createVNode(_sfc_main$17,{id:S},{activator:withCtx(({props:C})=>[createVNode(_sfc_main$1X,mergeProps(C,{compte:S,"montrer-anonymes":!0}),null,16,["compte"])]),_:2},1032,["id"])]),_:1},8,["items","n-max"]))}});var toStr$a=Object.prototype.toString,isArguments$3=function(n){var _=toStr$a.call(n),x=_==="[object Arguments]";return x||(x=_!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&toStr$a.call(n.callee)==="[object Function]"),x},implementation$b,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation$b;hasRequiredImplementation=1;var t;if(!Object.keys){var n=Object.prototype.hasOwnProperty,_=Object.prototype.toString,x=isArguments$3,E=Object.prototype.propertyIsEnumerable,S=!E.call({toString:null},"toString"),C=E.call(function(){},"prototype"),T=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],B=function(M){var V=M.constructor;return V&&V.prototype===M},A={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},I=function(){if(typeof window>"u")return!1;for(var M in window)try{if(!A["$"+M]&&n.call(window,M)&&window[M]!==null&&typeof window[M]=="object")try{B(window[M])}catch{return!0}}catch{return!0}return!1}(),D=function(M){if(typeof window>"u"||!I)return B(M);try{return B(M)}catch{return!1}};t=function(V){var L=V!==null&&typeof V=="object",F=_.call(V)==="[object Function]",j=x(V),U=L&&_.call(V)==="[object String]",H=[];if(!L&&!F&&!j)throw new TypeError("Object.keys called on a non-object");var Y=C&&F;if(U&&V.length>0&&!n.call(V,0))for(var Z=0;Z<V.length;++Z)H.push(String(Z));if(j&&V.length>0)for(var ne=0;ne<V.length;++ne)H.push(String(ne));else for(var re in V)!(Y&&re==="prototype")&&n.call(V,re)&&H.push(String(re));if(S)for(var X=D(V),ce=0;ce<T.length;++ce)!(X&&T[ce]==="constructor")&&n.call(V,T[ce])&&H.push(T[ce]);return H}}return implementation$b=t,implementation$b}var slice$3=Array.prototype.slice,isArgs=isArguments$3,origKeys=Object.keys,keysShim=origKeys?function(n){return origKeys(n)}:requireImplementation(),originalKeys=Object.keys;keysShim.shim=function(){if(Object.keys){var n=function(){var _=Object.keys(arguments);return _&&_.length===arguments.length}(1,2);n||(Object.keys=function(x){return isArgs(x)?originalKeys(slice$3.call(x)):originalKeys(x)})}else Object.keys=keysShim;return Object.keys||keysShim};var objectKeys$3=keysShim,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var n={},_=Symbol("test"),x=Object(_);if(typeof _=="string"||Object.prototype.toString.call(_)!=="[object Symbol]"||Object.prototype.toString.call(x)!=="[object Symbol]")return!1;var E=42;n[_]=E;for(_ in n)return!1;if(typeof Object.keys=="function"&&Object.keys(n).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(n).length!==0)return!1;var S=Object.getOwnPropertySymbols(n);if(S.length!==1||S[0]!==_||!Object.prototype.propertyIsEnumerable.call(n,_))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var C=Object.getOwnPropertyDescriptor(n,_);if(C.value!==E||C.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$5=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={foo:{}},$Object=Object,hasProto$1=function(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object)},ERROR_MESSAGE$1="Function.prototype.bind called on incompatible ",slice$2=Array.prototype.slice,toStr$9=Object.prototype.toString,funcType="[object Function]",implementation$a=function(n){var _=this;if(typeof _!="function"||toStr$9.call(_)!==funcType)throw new TypeError(ERROR_MESSAGE$1+_);for(var x=slice$2.call(arguments,1),E,S=function(){if(this instanceof E){var I=_.apply(this,x.concat(slice$2.call(arguments)));return Object(I)===I?I:this}else return _.apply(n,x.concat(slice$2.call(arguments)))},C=Math.max(0,_.length-x.length),T=[],B=0;B<C;B++)T.push("$"+B);if(E=Function("binder","return function ("+T.join(",")+"){ return binder.apply(this,arguments); }")(S),_.prototype){var A=function(){};A.prototype=_.prototype,E.prototype=new A,A.prototype=null}return E},implementation$9=implementation$a,functionBind=Function.prototype.bind||implementation$9,bind$2=functionBind,src$7=bind$2.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError$1=SyntaxError,$Function=Function,$TypeError$2=TypeError,getEvalledConstructor=function(t){try{return $Function('"use strict"; return ('+t+").constructor;")()}catch{}},$gOPD$2=Object.getOwnPropertyDescriptor;if($gOPD$2)try{$gOPD$2({},"")}catch{$gOPD$2=null}var throwTypeError=function(){throw new $TypeError$2},ThrowTypeError=$gOPD$2?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$2(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols$4=hasSymbols$5(),hasProto=hasProto$1(),getProto$2=Object.getPrototypeOf||(hasProto?function(t){return t.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto$2?undefined$1:getProto$2(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols$4&&getProto$2?getProto$2([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$4&&getProto$2?getProto$2(getProto$2([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols$4||!getProto$2?undefined$1:getProto$2(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols$4||!getProto$2?undefined$1:getProto$2(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols$4&&getProto$2?getProto$2(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols$4?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$2,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto$2)try{null.error}catch(t){var errorProto=getProto$2(getProto$2(t));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function t(n){var _;if(n==="%AsyncFunction%")_=getEvalledConstructor("async function () {}");else if(n==="%GeneratorFunction%")_=getEvalledConstructor("function* () {}");else if(n==="%AsyncGeneratorFunction%")_=getEvalledConstructor("async function* () {}");else if(n==="%AsyncGenerator%"){var x=t("%AsyncGeneratorFunction%");x&&(_=x.prototype)}else if(n==="%AsyncIteratorPrototype%"){var E=t("%AsyncGenerator%");E&&getProto$2&&(_=getProto$2(E.prototype))}return INTRINSICS[n]=_,_},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind$1=functionBind,hasOwn$1=src$7,$concat$1=bind$1.call(Function.call,Array.prototype.concat),$spliceApply=bind$1.call(Function.apply,Array.prototype.splice),$replace$1=bind$1.call(Function.call,String.prototype.replace),$strSlice=bind$1.call(Function.call,String.prototype.slice),$exec$1=bind$1.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(n){var _=$strSlice(n,0,1),x=$strSlice(n,-1);if(_==="%"&&x!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(x==="%"&&_!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var E=[];return $replace$1(n,rePropName,function(S,C,T,B){E[E.length]=T?$replace$1(B,reEscapeChar,"$1"):C||S}),E},getBaseIntrinsic=function(n,_){var x=n,E;if(hasOwn$1(LEGACY_ALIASES,x)&&(E=LEGACY_ALIASES[x],x="%"+E[0]+"%"),hasOwn$1(INTRINSICS,x)){var S=INTRINSICS[x];if(S===needsEval&&(S=doEval(x)),typeof S>"u"&&!_)throw new $TypeError$2("intrinsic "+n+" exists, but is not available. Please file an issue!");return{alias:E,name:x,value:S}}throw new $SyntaxError$1("intrinsic "+n+" does not exist!")},getIntrinsic=function(n,_){if(typeof n!="string"||n.length===0)throw new $TypeError$2("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof _!="boolean")throw new $TypeError$2('"allowMissing" argument must be a boolean');if($exec$1(/^%?[^%]*%?$/,n)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var x=stringToPath(n),E=x.length>0?x[0]:"",S=getBaseIntrinsic("%"+E+"%",_),C=S.name,T=S.value,B=!1,A=S.alias;A&&(E=A[0],$spliceApply(x,$concat$1([0,1],A)));for(var I=1,D=!0;I<x.length;I+=1){var M=x[I],V=$strSlice(M,0,1),L=$strSlice(M,-1);if((V==='"'||V==="'"||V==="`"||L==='"'||L==="'"||L==="`")&&V!==L)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((M==="constructor"||!D)&&(B=!0),E+="."+M,C="%"+E+"%",hasOwn$1(INTRINSICS,C))T=INTRINSICS[C];else if(T!=null){if(!(M in T)){if(!_)throw new $TypeError$2("base intrinsic for "+n+" exists, but the property is not available.");return}if($gOPD$2&&I+1>=x.length){var F=$gOPD$2(T,M);D=!!F,D&&"get"in F&&!("originalValue"in F.get)?T=F.get:T=T[M]}else D=hasOwn$1(T,M),T=T[M];D&&!B&&(INTRINSICS[C]=T)}}return T},GetIntrinsic$8=getIntrinsic,$defineProperty=GetIntrinsic$8("%Object.defineProperty%",!0),hasPropertyDescriptors$1=function(){if($defineProperty)try{return $defineProperty({},"a",{value:1}),!0}catch{return!1}return!1};hasPropertyDescriptors$1.hasArrayLengthDefineBug=function(){if(!hasPropertyDescriptors$1())return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors$1,keys$3=objectKeys$3,hasSymbols$3=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",toStr$8=Object.prototype.toString,concat$4=Array.prototype.concat,origDefineProperty=Object.defineProperty,isFunction$2=function(t){return typeof t=="function"&&toStr$8.call(t)==="[object Function]"},hasPropertyDescriptors=hasPropertyDescriptors_1(),supportsDescriptors$2=origDefineProperty&&hasPropertyDescriptors,defineProperty$1=function(t,n,_,x){if(n in t){if(x===!0){if(t[n]===_)return}else if(!isFunction$2(x)||!x())return}supportsDescriptors$2?origDefineProperty(t,n,{configurable:!0,enumerable:!1,value:_,writable:!0}):t[n]=_},defineProperties$1=function(t,n){var _=arguments.length>2?arguments[2]:{},x=keys$3(n);hasSymbols$3&&(x=concat$4.call(x,Object.getOwnPropertySymbols(n)));for(var E=0;E<x.length;E+=1)defineProperty$1(t,x[E],n[x[E]],_[x[E]])};defineProperties$1.supportsDescriptors=!!supportsDescriptors$2;var defineProperties_1=defineProperties$1,callBind$6={exports:{}};(function(t){var n=functionBind,_=getIntrinsic,x=_("%Function.prototype.apply%"),E=_("%Function.prototype.call%"),S=_("%Reflect.apply%",!0)||n.call(E,x),C=_("%Object.getOwnPropertyDescriptor%",!0),T=_("%Object.defineProperty%",!0),B=_("%Math.max%");if(T)try{T({},"a",{value:1})}catch{T=null}t.exports=function(D){var M=S(n,E,arguments);if(C&&T){var V=C(M,"length");V.configurable&&T(M,"length",{value:1+B(0,D.length-(arguments.length-1))})}return M};var A=function(){return S(n,x,arguments)};T?T(t.exports,"apply",{value:A}):t.exports.apply=A})(callBind$6);var callBindExports=callBind$6.exports,GetIntrinsic$7=getIntrinsic,callBind$5=callBindExports,$indexOf$1=callBind$5(GetIntrinsic$7("String.prototype.indexOf")),callBound$c=function(n,_){var x=GetIntrinsic$7(n,!!_);return typeof x=="function"&&$indexOf$1(n,".prototype.")>-1?callBind$5(x):x},objectKeys$2=objectKeys$3,hasSymbols$2=shams$1(),callBound$b=callBound$c,toObject=Object,$push=callBound$b("Array.prototype.push"),$propIsEnumerable=callBound$b("Object.prototype.propertyIsEnumerable"),originalGetSymbols=hasSymbols$2?Object.getOwnPropertySymbols:null,implementation$8=function(n,_){if(n==null)throw new TypeError("target must be an object");var x=toObject(n);if(arguments.length===1)return x;for(var E=1;E<arguments.length;++E){var S=toObject(arguments[E]),C=objectKeys$2(S),T=hasSymbols$2&&(Object.getOwnPropertySymbols||originalGetSymbols);if(T)for(var B=T(S),A=0;A<B.length;++A){var I=B[A];$propIsEnumerable(S,I)&&$push(C,I)}for(var D=0;D<C.length;++D){var M=C[D];if($propIsEnumerable(S,M)){var V=S[M];x[M]=V}}}return x},implementation$7=implementation$8,lacksProperEnumerationOrder=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",n=t.split(""),_={},x=0;x<n.length;++x)_[n[x]]=n[x];var E=Object.assign({},_),S="";for(var C in E)S+=C;return t!==S},assignHasPendingExceptions=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},polyfill$4=function(){return!Object.assign||lacksProperEnumerationOrder()||assignHasPendingExceptions()?implementation$7:Object.assign},define$3=defineProperties_1,getPolyfill$5=polyfill$4,shim$5=function(){var n=getPolyfill$5();return define$3(Object,{assign:n},{assign:function(){return Object.assign!==n}}),n},defineProperties=defineProperties_1,callBind$4=callBindExports,implementation$6=implementation$8,getPolyfill$4=polyfill$4,shim$4=shim$5,polyfill$3=callBind$4.apply(getPolyfill$4()),bound=function(n,_){return polyfill$3(Object,arguments)};defineProperties(bound,{getPolyfill:getPolyfill$4,implementation:implementation$6,shim:shim$4});var object_assign=bound,implementation$5={exports:{}},functionsHaveNames$1=function(){return typeof function(){}.name=="string"},gOPD$3=Object.getOwnPropertyDescriptor;if(gOPD$3)try{gOPD$3([],"length")}catch{gOPD$3=null}functionsHaveNames$1.functionsHaveConfigurableNames=function(){if(!functionsHaveNames$1()||!gOPD$3)return!1;var n=gOPD$3(function(){},"name");return!!n&&!!n.configurable};var $bind=Function.prototype.bind;functionsHaveNames$1.boundFunctionsHaveNames=function(){return functionsHaveNames$1()&&typeof $bind=="function"&&function(){}.bind().name!==""};var functionsHaveNames_1=functionsHaveNames$1;(function(t){var n=functionsHaveNames_1.functionsHaveConfigurableNames(),_=Object,x=TypeError;t.exports=function(){if(this!=null&&this!==_(this))throw new x("RegExp.prototype.flags getter called on non-object");var S="";return this.hasIndices&&(S+="d"),this.global&&(S+="g"),this.ignoreCase&&(S+="i"),this.multiline&&(S+="m"),this.dotAll&&(S+="s"),this.unicode&&(S+="u"),this.unicodeSets&&(S+="v"),this.sticky&&(S+="y"),S},n&&Object.defineProperty&&Object.defineProperty(t.exports,"name",{value:"get flags"})})(implementation$5);var implementationExports=implementation$5.exports,implementation$4=implementationExports,supportsDescriptors$1=defineProperties_1.supportsDescriptors,$gOPD$1=Object.getOwnPropertyDescriptor,polyfill$2=function(){if(supportsDescriptors$1&&/a/mig.flags==="gim"){var n=$gOPD$1(RegExp.prototype,"flags");if(n&&typeof n.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var _="",x={};if(Object.defineProperty(x,"hasIndices",{get:function(){_+="d"}}),Object.defineProperty(x,"sticky",{get:function(){_+="y"}}),_==="dy")return n.get}}return implementation$4},supportsDescriptors=defineProperties_1.supportsDescriptors,getPolyfill$3=polyfill$2,gOPD$2=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,TypeErr=TypeError,getProto$1=Object.getPrototypeOf,regex$1=/a/,shim$3=function(){if(!supportsDescriptors||!getProto$1)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var n=getPolyfill$3(),_=getProto$1(regex$1),x=gOPD$2(_,"flags");return(!x||x.get!==n)&&defineProperty(_,"flags",{configurable:!0,enumerable:!1,get:n}),n},define$2=defineProperties_1,callBind$3=callBindExports,implementation$3=implementationExports,getPolyfill$2=polyfill$2,shim$2=shim$3,flagsBound=callBind$3(getPolyfill$2());define$2(flagsBound,{getPolyfill:getPolyfill$2,implementation:implementation$3,shim:shim$2});var regexp_prototype_flags=flagsBound,esGetIterator={exports:{}},hasSymbols$1=shams$1,shams=function(){return hasSymbols$1()&&!!Symbol.toStringTag},hasToStringTag$8=shams(),callBound$a=callBound$c,$toString$3=callBound$a("Object.prototype.toString"),isStandardArguments=function(n){return hasToStringTag$8&&n&&typeof n=="object"&&Symbol.toStringTag in n?!1:$toString$3(n)==="[object Arguments]"},isLegacyArguments=function(n){return isStandardArguments(n)?!0:n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&$toString$3(n)!=="[object Array]"&&$toString$3(n.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments$2=supportsStandardArguments?isStandardArguments:isLegacyArguments;const globSourceImport={},fs_=Object.freeze(Object.defineProperty({__proto__:null,default:globSourceImport},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(fs_);var hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice$1=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf$1=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO$1=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function addNumericSeparator(t,n){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||$test.call(/e/,n))return n;var _=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var x=t<0?-$floor(-t):$floor(t);if(x!==t){var E=String(x),S=$slice$1.call(n,E.length+1);return $replace.call(E,_,"$&_")+"."+$replace.call($replace.call(S,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(n,_,"$&_")}var utilInspect=require$$0$2,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol$2(inspectCustom)?inspectCustom:null,objectInspect=function t(n,_,x,E){var S=_||{};if(has$2(S,"quoteStyle")&&S.quoteStyle!=="single"&&S.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$2(S,"maxStringLength")&&(typeof S.maxStringLength=="number"?S.maxStringLength<0&&S.maxStringLength!==1/0:S.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var C=has$2(S,"customInspect")?S.customInspect:!0;if(typeof C!="boolean"&&C!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$2(S,"indent")&&S.indent!==null&&S.indent!=="	"&&!(parseInt(S.indent,10)===S.indent&&S.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$2(S,"numericSeparator")&&typeof S.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var T=S.numericSeparator;if(typeof n>"u")return"undefined";if(n===null)return"null";if(typeof n=="boolean")return n?"true":"false";if(typeof n=="string")return inspectString(n,S);if(typeof n=="number"){if(n===0)return 1/0/n>0?"0":"-0";var B=String(n);return T?addNumericSeparator(n,B):B}if(typeof n=="bigint"){var A=String(n)+"n";return T?addNumericSeparator(n,A):A}var I=typeof S.depth>"u"?5:S.depth;if(typeof x>"u"&&(x=0),x>=I&&I>0&&typeof n=="object")return isArray$6(n)?"[Array]":"[Object]";var D=getIndent(S,x);if(typeof E>"u")E=[];else if(indexOf$1(E,n)>=0)return"[Circular]";function M(W,O,z){if(O&&(E=$arrSlice.call(E),E.push(O)),z){var J={depth:S.depth};return has$2(S,"quoteStyle")&&(J.quoteStyle=S.quoteStyle),t(W,J,x+1,E)}return t(W,S,x+1,E)}if(typeof n=="function"&&!isRegExp$1(n)){var V=nameOf(n),L=arrObjKeys(n,M);return"[Function"+(V?": "+V:" (anonymous)")+"]"+(L.length>0?" { "+$join.call(L,", ")+" }":"")}if(isSymbol$2(n)){var F=hasShammedSymbols?$replace.call(String(n),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(n);return typeof n=="object"&&!hasShammedSymbols?markBoxed(F):F}if(isElement(n)){for(var j="<"+$toLowerCase.call(String(n.nodeName)),U=n.attributes||[],H=0;H<U.length;H++)j+=" "+U[H].name+"="+wrapQuotes(quote(U[H].value),"double",S);return j+=">",n.childNodes&&n.childNodes.length&&(j+="..."),j+="</"+$toLowerCase.call(String(n.nodeName))+">",j}if(isArray$6(n)){if(n.length===0)return"[]";var Y=arrObjKeys(n,M);return D&&!singleLineValues(Y)?"["+indentedJoin(Y,D)+"]":"[ "+$join.call(Y,", ")+" ]"}if(isError(n)){var Z=arrObjKeys(n,M);return!("cause"in Error.prototype)&&"cause"in n&&!isEnumerable.call(n,"cause")?"{ ["+String(n)+"] "+$join.call($concat.call("[cause]: "+M(n.cause),Z),", ")+" }":Z.length===0?"["+String(n)+"]":"{ ["+String(n)+"] "+$join.call(Z,", ")+" }"}if(typeof n=="object"&&C){if(inspectSymbol&&typeof n[inspectSymbol]=="function"&&utilInspect)return utilInspect(n,{depth:I-x});if(C!=="symbol"&&typeof n.inspect=="function")return n.inspect()}if(isMap$3(n)){var ne=[];return mapForEach&&mapForEach.call(n,function(W,O){ne.push(M(O,n,!0)+" => "+M(W,n))}),collectionOf("Map",mapSize.call(n),ne,D)}if(isSet$3(n)){var re=[];return setForEach&&setForEach.call(n,function(W){re.push(M(W,n))}),collectionOf("Set",setSize.call(n),re,D)}if(isWeakMap$1(n))return weakCollectionOf("WeakMap");if(isWeakSet$1(n))return weakCollectionOf("WeakSet");if(isWeakRef(n))return weakCollectionOf("WeakRef");if(isNumber$2(n))return markBoxed(M(Number(n)));if(isBigInt$1(n))return markBoxed(M(bigIntValueOf$1.call(n)));if(isBoolean$3(n))return markBoxed(booleanValueOf.call(n));if(isString$4(n))return markBoxed(M(String(n)));if(!isDate$2(n)&&!isRegExp$1(n)){var X=arrObjKeys(n,M),ce=gPO$1?gPO$1(n)===Object.prototype:n instanceof Object||n.constructor===Object,ue=n instanceof Object?"":"null prototype",_e=!ce&&toStringTag&&Object(n)===n&&toStringTag in n?$slice$1.call(toStr$7(n),8,-1):ue?"Object":"",ye=ce||typeof n.constructor!="function"?"":n.constructor.name?n.constructor.name+" ":"",ie=ye+(_e||ue?"["+$join.call($concat.call([],_e||[],ue||[]),": ")+"] ":"");return X.length===0?ie+"{}":D?ie+"{"+indentedJoin(X,D)+"}":ie+"{ "+$join.call(X,", ")+" }"}return String(n)};function wrapQuotes(t,n,_){var x=(_.quoteStyle||n)==="double"?'"':"'";return x+t+x}function quote(t){return $replace.call(String(t),/"/g,"&quot;")}function isArray$6(t){return toStr$7(t)==="[object Array]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isDate$2(t){return toStr$7(t)==="[object Date]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isRegExp$1(t){return toStr$7(t)==="[object RegExp]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isError(t){return toStr$7(t)==="[object Error]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isString$4(t){return toStr$7(t)==="[object String]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isNumber$2(t){return toStr$7(t)==="[object Number]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isBoolean$3(t){return toStr$7(t)==="[object Boolean]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isSymbol$2(t){if(hasShammedSymbols)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!symToString)return!1;try{return symToString.call(t),!0}catch{}return!1}function isBigInt$1(t){if(!t||typeof t!="object"||!bigIntValueOf$1)return!1;try{return bigIntValueOf$1.call(t),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(t){return t in this};function has$2(t,n){return hasOwn.call(t,n)}function toStr$7(t){return objectToString.call(t)}function nameOf(t){if(t.name)return t.name;var n=$match.call(functionToString.call(t),/^function\s*([\w$]+)/);return n?n[1]:null}function indexOf$1(t,n){if(t.indexOf)return t.indexOf(n);for(var _=0,x=t.length;_<x;_++)if(t[_]===n)return _;return-1}function isMap$3(t){if(!mapSize||!t||typeof t!="object")return!1;try{mapSize.call(t);try{setSize.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function isWeakMap$1(t){if(!weakMapHas||!t||typeof t!="object")return!1;try{weakMapHas.call(t,weakMapHas);try{weakSetHas.call(t,weakSetHas)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function isWeakRef(t){if(!weakRefDeref||!t||typeof t!="object")return!1;try{return weakRefDeref.call(t),!0}catch{}return!1}function isSet$3(t){if(!setSize||!t||typeof t!="object")return!1;try{setSize.call(t);try{mapSize.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function isWeakSet$1(t){if(!weakSetHas||!t||typeof t!="object")return!1;try{weakSetHas.call(t,weakSetHas);try{weakMapHas.call(t,weakMapHas)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function isElement(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function inspectString(t,n){if(t.length>n.maxStringLength){var _=t.length-n.maxStringLength,x="... "+_+" more character"+(_>1?"s":"");return inspectString($slice$1.call(t,0,n.maxStringLength),n)+x}var E=$replace.call($replace.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(E,"single",n)}function lowbyte(t){var n=t.charCodeAt(0),_={8:"b",9:"t",10:"n",12:"f",13:"r"}[n];return _?"\\"+_:"\\x"+(n<16?"0":"")+$toUpperCase.call(n.toString(16))}function markBoxed(t){return"Object("+t+")"}function weakCollectionOf(t){return t+" { ? }"}function collectionOf(t,n,_,x){var E=x?indentedJoin(_,x):$join.call(_,", ");return t+" ("+n+") {"+E+"}"}function singleLineValues(t){for(var n=0;n<t.length;n++)if(indexOf$1(t[n],`
`)>=0)return!1;return!0}function getIndent(t,n){var _;if(t.indent==="	")_="	";else if(typeof t.indent=="number"&&t.indent>0)_=$join.call(Array(t.indent+1)," ");else return null;return{base:_,prev:$join.call(Array(n+1),_)}}function indentedJoin(t,n){if(t.length===0)return"";var _=`
`+n.prev+n.base;return _+$join.call(t,","+_)+`
`+n.prev}function arrObjKeys(t,n){var _=isArray$6(t),x=[];if(_){x.length=t.length;for(var E=0;E<t.length;E++)x[E]=has$2(t,E)?n(t[E],t):""}var S=typeof gOPS=="function"?gOPS(t):[],C;if(hasShammedSymbols){C={};for(var T=0;T<S.length;T++)C["$"+S[T]]=S[T]}for(var B in t)has$2(t,B)&&(_&&String(Number(B))===B&&B<t.length||hasShammedSymbols&&C["$"+B]instanceof Symbol||($test.call(/[^\w$]/,B)?x.push(n(B,t)+": "+n(t[B],t)):x.push(B+": "+n(t[B],t))));if(typeof gOPS=="function")for(var A=0;A<S.length;A++)isEnumerable.call(t,S[A])&&x.push("["+n(S[A])+"]: "+n(t[S[A]],t));return x}var GetIntrinsic$6=getIntrinsic,callBound$9=callBound$c,inspect$1=objectInspect,$TypeError$1=GetIntrinsic$6("%TypeError%"),$WeakMap$1=GetIntrinsic$6("%WeakMap%",!0),$Map$3=GetIntrinsic$6("%Map%",!0),$weakMapGet=callBound$9("WeakMap.prototype.get",!0),$weakMapSet=callBound$9("WeakMap.prototype.set",!0),$weakMapHas=callBound$9("WeakMap.prototype.has",!0),$mapGet$1=callBound$9("Map.prototype.get",!0),$mapSet=callBound$9("Map.prototype.set",!0),$mapHas$5=callBound$9("Map.prototype.has",!0),listGetNode=function(t,n){for(var _=t,x;(x=_.next)!==null;_=x)if(x.key===n)return _.next=x.next,x.next=t.next,t.next=x,x},listGet=function(t,n){var _=listGetNode(t,n);return _&&_.value},listSet=function(t,n,_){var x=listGetNode(t,n);x?x.value=_:t.next={key:n,next:t.next,value:_}},listHas=function(t,n){return!!listGetNode(t,n)},sideChannel=function(){var n,_,x,E={assert:function(S){if(!E.has(S))throw new $TypeError$1("Side channel does not contain "+inspect$1(S))},get:function(S){if($WeakMap$1&&S&&(typeof S=="object"||typeof S=="function")){if(n)return $weakMapGet(n,S)}else if($Map$3){if(_)return $mapGet$1(_,S)}else if(x)return listGet(x,S)},has:function(S){if($WeakMap$1&&S&&(typeof S=="object"||typeof S=="function")){if(n)return $weakMapHas(n,S)}else if($Map$3){if(_)return $mapHas$5(_,S)}else if(x)return listHas(x,S);return!1},set:function(S,C){$WeakMap$1&&S&&(typeof S=="object"||typeof S=="function")?(n||(n=new $WeakMap$1),$weakMapSet(n,S,C)):$Map$3?(_||(_=new $Map$3),$mapSet(_,S,C)):(x||(x={key:{},next:null}),listSet(x,S,C))}};return E},GetIntrinsic$5=getIntrinsic,has$1=src$7,channel=sideChannel(),$TypeError=GetIntrinsic$5("%TypeError%"),SLOT$1={assert:function(t,n){if(!t||typeof t!="object"&&typeof t!="function")throw new $TypeError("`O` is not an object");if(typeof n!="string")throw new $TypeError("`slot` must be a string");if(channel.assert(t),!SLOT$1.has(t,n))throw new $TypeError("`"+n+"` is not present on `O`")},get:function(t,n){if(!t||typeof t!="object"&&typeof t!="function")throw new $TypeError("`O` is not an object");if(typeof n!="string")throw new $TypeError("`slot` must be a string");var _=channel.get(t);return _&&_["$"+n]},has:function(t,n){if(!t||typeof t!="object"&&typeof t!="function")throw new $TypeError("`O` is not an object");if(typeof n!="string")throw new $TypeError("`slot` must be a string");var _=channel.get(t);return!!_&&has$1(_,"$"+n)},set:function(t,n,_){if(!t||typeof t!="object"&&typeof t!="function")throw new $TypeError("`O` is not an object");if(typeof n!="string")throw new $TypeError("`slot` must be a string");var x=channel.get(t);x||(x={},channel.set(t,x)),x["$"+n]=_}};Object.freeze&&Object.freeze(SLOT$1);var internalSlot=SLOT$1,SLOT=internalSlot,$SyntaxError=SyntaxError,$StopIteration=typeof StopIteration=="object"?StopIteration:null,stopIterationIterator=function(n){if(!$StopIteration)throw new $SyntaxError("this environment lacks StopIteration");SLOT.set(n,"[[Done]]",!1);var _={next:function(){var E=SLOT.get(this,"[[Iterator]]"),S=SLOT.get(E,"[[Done]]");try{return{done:S,value:S?void 0:E.next()}}catch(C){if(SLOT.set(E,"[[Done]]",!0),C!==$StopIteration)throw C;return{done:!0,value:void 0}}}};return SLOT.set(_,"[[Iterator]]",n),_},isarray$2,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray$2;hasRequiredIsarray=1;var t={}.toString;return isarray$2=Array.isArray||function(n){return t.call(n)=="[object Array]"},isarray$2}var strValue=String.prototype.valueOf,tryStringObject=function(n){try{return strValue.call(n),!0}catch{return!1}},toStr$6=Object.prototype.toString,strClass="[object String]",hasToStringTag$7=shams(),isString$3=function(n){return typeof n=="string"?!0:typeof n!="object"?!1:hasToStringTag$7?tryStringObject(n):toStr$6.call(n)===strClass},$Map$2=typeof Map=="function"&&Map.prototype?Map:null,$Set$3=typeof Set=="function"&&Set.prototype?Set:null,exported$2;$Map$2||(exported$2=function(n){return!1});var $mapHas$4=$Map$2?Map.prototype.has:null,$setHas$4=$Set$3?Set.prototype.has:null;!exported$2&&!$mapHas$4&&(exported$2=function(n){return!1});var isMap$2=exported$2||function(n){if(!n||typeof n!="object")return!1;try{if($mapHas$4.call(n),$setHas$4)try{$setHas$4.call(n)}catch{return!0}return n instanceof $Map$2}catch{}return!1},$Map$1=typeof Map=="function"&&Map.prototype?Map:null,$Set$2=typeof Set=="function"&&Set.prototype?Set:null,exported$1;$Set$2||(exported$1=function(n){return!1});var $mapHas$3=$Map$1?Map.prototype.has:null,$setHas$3=$Set$2?Set.prototype.has:null;!exported$1&&!$setHas$3&&(exported$1=function(n){return!1});var isSet$2=exported$1||function(n){if(!n||typeof n!="object")return!1;try{if($setHas$3.call(n),$mapHas$3)try{$mapHas$3.call(n)}catch{return!0}return n instanceof $Set$2}catch{}return!1},isArguments$1=isArguments$2,getStopIterationIterator=stopIterationIterator;if(hasSymbols$5()||shams$1()){var $iterator=Symbol.iterator;esGetIterator.exports=function(n){if(n!=null&&typeof n[$iterator]<"u")return n[$iterator]();if(isArguments$1(n))return Array.prototype[$iterator].call(n)}}else{var isArray$5=requireIsarray(),isString$2=isString$3,GetIntrinsic$4=getIntrinsic,$Map=GetIntrinsic$4("%Map%",!0),$Set$1=GetIntrinsic$4("%Set%",!0),callBound$8=callBound$c,$arrayPush=callBound$8("Array.prototype.push"),$charCodeAt=callBound$8("String.prototype.charCodeAt"),$stringSlice=callBound$8("String.prototype.slice"),advanceStringIndex=function(n,_){var x=n.length;if(_+1>=x)return _+1;var E=$charCodeAt(n,_);if(E<55296||E>56319)return _+1;var S=$charCodeAt(n,_+1);return S<56320||S>57343?_+1:_+2},getArrayIterator=function(n){var _=0;return{next:function(){var E=_>=n.length,S;return E||(S=n[_],_+=1),{done:E,value:S}}}},getNonCollectionIterator=function(n,_){if(isArray$5(n)||isArguments$1(n))return getArrayIterator(n);if(isString$2(n)){var x=0;return{next:function(){var S=advanceStringIndex(n,x),C=$stringSlice(n,x,S);return x=S,{done:S>n.length,value:C}}}}if(_&&typeof n["_es6-shim iterator_"]<"u")return n["_es6-shim iterator_"]()};if(!$Map&&!$Set$1)esGetIterator.exports=function(n){if(n!=null)return getNonCollectionIterator(n,!0)};else{var isMap$1=isMap$2,isSet$1=isSet$2,$mapForEach=callBound$8("Map.prototype.forEach",!0),$setForEach=callBound$8("Set.prototype.forEach",!0);if(typeof browser$1$1>"u"||!browser$1$1.versions||!browser$1$1.versions.node)var $mapIterator=callBound$8("Map.prototype.iterator",!0),$setIterator=callBound$8("Set.prototype.iterator",!0);var $mapAtAtIterator=callBound$8("Map.prototype.@@iterator",!0)||callBound$8("Map.prototype._es6-shim iterator_",!0),$setAtAtIterator=callBound$8("Set.prototype.@@iterator",!0)||callBound$8("Set.prototype._es6-shim iterator_",!0),getCollectionIterator=function(n){if(isMap$1(n)){if($mapIterator)return getStopIterationIterator($mapIterator(n));if($mapAtAtIterator)return $mapAtAtIterator(n);if($mapForEach){var _=[];return $mapForEach(n,function(E,S){$arrayPush(_,[S,E])}),getArrayIterator(_)}}if(isSet$1(n)){if($setIterator)return getStopIterationIterator($setIterator(n));if($setAtAtIterator)return $setAtAtIterator(n);if($setForEach){var x=[];return $setForEach(n,function(E){$arrayPush(x,E)}),getArrayIterator(x)}}};esGetIterator.exports=function(n){return getCollectionIterator(n)||getNonCollectionIterator(n)}}}var esGetIteratorExports=esGetIterator.exports,numberIsNaN=function(t){return t!==t},implementation$2=function(n,_){return n===0&&_===0?1/n===1/_:!!(n===_||numberIsNaN(n)&&numberIsNaN(_))},implementation$1=implementation$2,polyfill$1=function(){return typeof Object.is=="function"?Object.is:implementation$1},getPolyfill$1=polyfill$1,define$1=defineProperties_1,shim$1=function(){var n=getPolyfill$1();return define$1(Object,{is:n},{is:function(){return Object.is!==n}}),n},define=defineProperties_1,callBind$2=callBindExports,implementation=implementation$2,getPolyfill=polyfill$1,shim=shim$1,polyfill=callBind$2(getPolyfill(),Object);define(polyfill,{getPolyfill,implementation,shim});var objectIs=polyfill,toString$9={}.toString,isarray$1=Array.isArray||function(t){return toString$9.call(t)=="[object Array]"},fnToStr$1=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(t){t!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(n){try{var _=fnToStr$1.call(n);return constructorRegex.test(_)}catch{return!1}},tryFunctionObject=function(n){try{return isES6ClassFn(n)?!1:(fnToStr$1.call(n),!0)}catch{return!1}},toStr$5=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag$6=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function(){return!1};if(typeof document=="object"){var all=document.all;toStr$5.call(all)===toStr$5.call(document.all)&&(isDDA=function(n){if((isIE68||!n)&&(typeof n>"u"||typeof n=="object"))try{var _=toStr$5.call(n);return(_===ddaClass||_===ddaClass2||_===ddaClass3||_===objectClass)&&n("")==null}catch{}return!1})}var isCallable$1=reflectApply?function(n){if(isDDA(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;try{reflectApply(n,null,badArrayLike)}catch(_){if(_!==isCallableMarker)return!1}return!isES6ClassFn(n)&&tryFunctionObject(n)}:function(n){if(isDDA(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;if(hasToStringTag$6)return tryFunctionObject(n);if(isES6ClassFn(n))return!1;var _=toStr$5.call(n);return _!==fnClass&&_!==genClass&&!/^\[object HTML/.test(_)?!1:tryFunctionObject(n)},isCallable=isCallable$1,toStr$4=Object.prototype.toString,hasOwnProperty$2=Object.prototype.hasOwnProperty,forEachArray=function(n,_,x){for(var E=0,S=n.length;E<S;E++)hasOwnProperty$2.call(n,E)&&(x==null?_(n[E],E,n):_.call(x,n[E],E,n))},forEachString=function(n,_,x){for(var E=0,S=n.length;E<S;E++)x==null?_(n.charAt(E),E,n):_.call(x,n.charAt(E),E,n)},forEachObject=function(n,_,x){for(var E in n)hasOwnProperty$2.call(n,E)&&(x==null?_(n[E],E,n):_.call(x,n[E],E,n))},forEach$3=function(n,_,x){if(!isCallable(_))throw new TypeError("iterator must be a function");var E;arguments.length>=3&&(E=x),toStr$4.call(n)==="[object Array]"?forEachArray(n,_,E):typeof n=="string"?forEachString(n,_,E):forEachObject(n,_,E)},forEach_1=forEach$3,possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],g$1=typeof globalThis>"u"?commonjsGlobal:globalThis,availableTypedArrays$1=function(){for(var n=[],_=0;_<possibleNames.length;_++)typeof g$1[possibleNames[_]]=="function"&&(n[n.length]=possibleNames[_]);return n},GetIntrinsic$3=getIntrinsic,$gOPD=GetIntrinsic$3("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd=$gOPD,forEach$2=forEach_1,availableTypedArrays=availableTypedArrays$1,callBind$1=callBindExports,callBound$7=callBound$c,gOPD$1=gopd,$toString$2=callBound$7("Object.prototype.toString"),hasToStringTag$5=shams(),g=typeof globalThis>"u"?commonjsGlobal:globalThis,typedArrays=availableTypedArrays(),$slice=callBound$7("String.prototype.slice"),getPrototypeOf$1=Object.getPrototypeOf,$indexOf=callBound$7("Array.prototype.indexOf",!0)||function(n,_){for(var x=0;x<n.length;x+=1)if(n[x]===_)return x;return-1},cache$4={__proto__:null};hasToStringTag$5&&gOPD$1&&getPrototypeOf$1?forEach$2(typedArrays,function(t){var n=new g[t];if(Symbol.toStringTag in n){var _=getPrototypeOf$1(n),x=gOPD$1(_,Symbol.toStringTag);if(!x){var E=getPrototypeOf$1(_);x=gOPD$1(E,Symbol.toStringTag)}cache$4["$"+t]=callBind$1(x.get)}}):forEach$2(typedArrays,function(t){var n=new g[t];cache$4["$"+t]=callBind$1(n.slice)});var tryTypedArrays=function(n){var _=!1;return forEach$2(cache$4,function(x,E){if(!_)try{"$"+x(n)===E&&(_=$slice(E,1))}catch{}}),_},trySlices=function(n){var _=!1;return forEach$2(cache$4,function(x,E){if(!_)try{x(n),_=$slice(E,1)}catch{}}),_},whichTypedArray$2=function(n){if(!n||typeof n!="object")return!1;if(!hasToStringTag$5){var _=$slice($toString$2(n),8,-1);return $indexOf(typedArrays,_)>-1?_:_!=="Object"?!1:trySlices(n)}return gOPD$1?tryTypedArrays(n):null},whichTypedArray$1=whichTypedArray$2,isTypedArray$2=function(n){return!!whichTypedArray$1(n)},callBind=callBindExports,callBound$6=callBound$c,GetIntrinsic$2=getIntrinsic,isTypedArray$1=isTypedArray$2,$ArrayBuffer=GetIntrinsic$2("ArrayBuffer",!0),$Float32Array=GetIntrinsic$2("Float32Array",!0),$byteLength$2=callBound$6("ArrayBuffer.prototype.byteLength",!0),abSlice=$ArrayBuffer&&!$byteLength$2&&new $ArrayBuffer().slice,$abSlice=abSlice&&callBind(abSlice),isArrayBuffer$3=$byteLength$2||$abSlice?function(n){if(!n||typeof n!="object")return!1;try{return $byteLength$2?$byteLength$2(n):$abSlice(n,0),!0}catch{return!1}}:$Float32Array?function(n){try{return new $Float32Array(n).buffer===n&&!isTypedArray$1(n)}catch(_){return typeof n=="object"&&_.name==="RangeError"}}:function(n){return!1},getDay=Date.prototype.getDay,tryDateObject=function(n){try{return getDay.call(n),!0}catch{return!1}},toStr$3=Object.prototype.toString,dateClass="[object Date]",hasToStringTag$4=shams(),isDateObject=function(n){return typeof n!="object"||n===null?!1:hasToStringTag$4?tryDateObject(n):toStr$3.call(n)===dateClass},callBound$5=callBound$c,hasToStringTag$3=shams(),has,$exec,isRegexMarker,badStringifier;if(hasToStringTag$3){has=callBound$5("Object.prototype.hasOwnProperty"),$exec=callBound$5("RegExp.prototype.exec"),isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},typeof Symbol.toPrimitive=="symbol"&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker)}var $toString$1=callBound$5("Object.prototype.toString"),gOPD=Object.getOwnPropertyDescriptor,regexClass="[object RegExp]",isRegex$2=hasToStringTag$3?function(n){if(!n||typeof n!="object")return!1;var _=gOPD(n,"lastIndex"),x=_&&has(_,"value");if(!x)return!1;try{$exec(n,badStringifier)}catch(E){return E===isRegexMarker}}:function(n){return!n||typeof n!="object"&&typeof n!="function"?!1:$toString$1(n)===regexClass},callBound$4=callBound$c,$byteLength$1=callBound$4("SharedArrayBuffer.prototype.byteLength",!0),isSharedArrayBuffer$1=$byteLength$1?function(n){if(!n||typeof n!="object")return!1;try{return $byteLength$1(n),!0}catch{return!1}}:function(n){return!1},numToStr=Number.prototype.toString,tryNumberObject=function(n){try{return numToStr.call(n),!0}catch{return!1}},toStr$2=Object.prototype.toString,numClass="[object Number]",hasToStringTag$2=shams(),isNumberObject=function(n){return typeof n=="number"?!0:typeof n!="object"?!1:hasToStringTag$2?tryNumberObject(n):toStr$2.call(n)===numClass},callBound$3=callBound$c,$boolToStr=callBound$3("Boolean.prototype.toString"),$toString=callBound$3("Object.prototype.toString"),tryBooleanObject=function(n){try{return $boolToStr(n),!0}catch{return!1}},boolClass="[object Boolean]",hasToStringTag$1=shams(),isBooleanObject=function(n){return typeof n=="boolean"?!0:n===null||typeof n!="object"?!1:hasToStringTag$1&&Symbol.toStringTag in n?tryBooleanObject(n):$toString(n)===boolClass},isSymbol$1={exports:{}},toStr$1=Object.prototype.toString,hasSymbols=hasSymbols$5();if(hasSymbols){var symToStr=Symbol.prototype.toString,symStringRegex=/^Symbol\(.*\)$/,isSymbolObject=function(n){return typeof n.valueOf()!="symbol"?!1:symStringRegex.test(symToStr.call(n))};isSymbol$1.exports=function(n){if(typeof n=="symbol")return!0;if(toStr$1.call(n)!=="[object Symbol]")return!1;try{return isSymbolObject(n)}catch{return!1}}}else isSymbol$1.exports=function(n){return!1};var isSymbolExports=isSymbol$1.exports,isBigint={exports:{}},$BigInt=typeof BigInt<"u"&&BigInt,hasBigints=function(){return typeof $BigInt=="function"&&typeof BigInt=="function"&&typeof $BigInt(42)=="bigint"&&typeof BigInt(42)=="bigint"},hasBigInts=hasBigints();if(hasBigInts){var bigIntValueOf=BigInt.prototype.valueOf,tryBigInt=function(n){try{return bigIntValueOf.call(n),!0}catch{}return!1};isBigint.exports=function(n){return n===null||typeof n>"u"||typeof n=="boolean"||typeof n=="string"||typeof n=="number"||typeof n=="symbol"||typeof n=="function"?!1:typeof n=="bigint"?!0:tryBigInt(n)}}else isBigint.exports=function(n){return!1};var isBigintExports=isBigint.exports,isString$1=isString$3,isNumber$1=isNumberObject,isBoolean$2=isBooleanObject,isSymbol=isSymbolExports,isBigInt=isBigintExports,whichBoxedPrimitive$1=function(n){if(n==null||typeof n!="object"&&typeof n!="function")return null;if(isString$1(n))return"String";if(isNumber$1(n))return"Number";if(isBoolean$2(n))return"Boolean";if(isSymbol(n))return"Symbol";if(isBigInt(n))return"BigInt"},$WeakMap=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,$WeakSet$1=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,exported;$WeakMap||(exported=function(n){return!1});var $mapHas$2=$WeakMap?$WeakMap.prototype.has:null,$setHas$2=$WeakSet$1?$WeakSet$1.prototype.has:null;!exported&&!$mapHas$2&&(exported=function(n){return!1});var isWeakmap=exported||function(n){if(!n||typeof n!="object")return!1;try{if($mapHas$2.call(n,$mapHas$2),$setHas$2)try{$setHas$2.call(n,$setHas$2)}catch{return!0}return n instanceof $WeakMap}catch{}return!1},isWeakset={exports:{}},GetIntrinsic$1=getIntrinsic,callBound$2=callBound$c,$WeakSet=GetIntrinsic$1("%WeakSet%",!0),$setHas$1=callBound$2("WeakSet.prototype.has",!0);if($setHas$1){var $mapHas$1=callBound$2("WeakMap.prototype.has",!0);isWeakset.exports=function(n){if(!n||typeof n!="object")return!1;try{if($setHas$1(n,$setHas$1),$mapHas$1)try{$mapHas$1(n,$mapHas$1)}catch{return!0}return n instanceof $WeakSet}catch{}return!1}}else isWeakset.exports=function(n){return!1};var isWeaksetExports=isWeakset.exports,isMap=isMap$2,isSet=isSet$2,isWeakMap=isWeakmap,isWeakSet=isWeaksetExports,whichCollection$1=function(n){if(n&&typeof n=="object"){if(isMap(n))return"Map";if(isSet(n))return"Set";if(isWeakMap(n))return"WeakMap";if(isWeakSet(n))return"WeakSet"}return!1},callBound$1=callBound$c,$byteLength=callBound$1("ArrayBuffer.prototype.byteLength",!0),isArrayBuffer$2=isArrayBuffer$3,arrayBufferByteLength=function(n){return isArrayBuffer$2(n)?$byteLength?$byteLength(n):n.byteLength:NaN},assign$2=object_assign,callBound=callBound$c,flags=regexp_prototype_flags,GetIntrinsic=getIntrinsic,getIterator=esGetIteratorExports,getSideChannel=sideChannel,is$3=objectIs,isArguments=isArguments$2,isArray$4=isarray$1,isArrayBuffer$1=isArrayBuffer$3,isDate$1=isDateObject,isRegex$1=isRegex$2,isSharedArrayBuffer=isSharedArrayBuffer$1,objectKeys$1=objectKeys$3,whichBoxedPrimitive=whichBoxedPrimitive$1,whichCollection=whichCollection$1,whichTypedArray=whichTypedArray$2,byteLength=arrayBufferByteLength,sabByteLength=callBound("SharedArrayBuffer.prototype.byteLength",!0),$getTime=callBound("Date.prototype.getTime"),gPO=Object.getPrototypeOf,$objToString=callBound("Object.prototype.toString"),$Set=GetIntrinsic("%Set%",!0),$mapHas=callBound("Map.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSize=callBound("Map.prototype.size",!0),$setAdd=callBound("Set.prototype.add",!0),$setDelete=callBound("Set.prototype.delete",!0),$setHas=callBound("Set.prototype.has",!0),$setSize=callBound("Set.prototype.size",!0);function setHasEqualElement(t,n,_,x){for(var E=getIterator(t),S;(S=E.next())&&!S.done;)if(internalDeepEqual(n,S.value,_,x))return $setDelete(t,S.value),!0;return!1}function findLooseMatchingPrimitives(t){if(typeof t>"u")return null;if(typeof t!="object")return typeof t=="symbol"?!1:typeof t=="string"||typeof t=="number"?+t==+t:!0}function mapMightHaveLoosePrim(t,n,_,x,E,S){var C=findLooseMatchingPrimitives(_);if(C!=null)return C;var T=$mapGet(n,C),B=assign$2({},E,{strict:!1});return typeof T>"u"&&!$mapHas(n,C)||!internalDeepEqual(x,T,B,S)?!1:!$mapHas(t,C)&&internalDeepEqual(x,T,B,S)}function setMightHaveLoosePrim(t,n,_){var x=findLooseMatchingPrimitives(_);return x??($setHas(n,x)&&!$setHas(t,x))}function mapHasEqualEntry(t,n,_,x,E,S){for(var C=getIterator(t),T,B;(T=C.next())&&!T.done;)if(B=T.value,internalDeepEqual(_,B,E,S)&&internalDeepEqual(x,$mapGet(n,B),E,S))return $setDelete(t,B),!0;return!1}function internalDeepEqual(t,n,_,x){var E=_||{};if(E.strict?is$3(t,n):t===n)return!0;var S=whichBoxedPrimitive(t),C=whichBoxedPrimitive(n);if(S!==C)return!1;if(!t||!n||typeof t!="object"&&typeof n!="object")return E.strict?is$3(t,n):t==n;var T=x.has(t),B=x.has(n),A;if(T&&B){if(x.get(t)===x.get(n))return!0}else A={};return T||x.set(t,A),B||x.set(n,A),objEquiv(t,n,E,x)}function isBuffer$5(t){return!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function setEquiv(t,n,_,x){if($setSize(t)!==$setSize(n))return!1;for(var E=getIterator(t),S=getIterator(n),C,T,B;(C=E.next())&&!C.done;)if(C.value&&typeof C.value=="object")B||(B=new $Set),$setAdd(B,C.value);else if(!$setHas(n,C.value)){if(_.strict||!setMightHaveLoosePrim(t,n,C.value))return!1;B||(B=new $Set),$setAdd(B,C.value)}if(B){for(;(T=S.next())&&!T.done;)if(T.value&&typeof T.value=="object"){if(!setHasEqualElement(B,T.value,_.strict,x))return!1}else if(!_.strict&&!$setHas(t,T.value)&&!setHasEqualElement(B,T.value,_.strict,x))return!1;return $setSize(B)===0}return!0}function mapEquiv(t,n,_,x){if($mapSize(t)!==$mapSize(n))return!1;for(var E=getIterator(t),S=getIterator(n),C,T,B,A,I,D;(C=E.next())&&!C.done;)if(A=C.value[0],I=C.value[1],A&&typeof A=="object")B||(B=new $Set),$setAdd(B,A);else if(D=$mapGet(n,A),typeof D>"u"&&!$mapHas(n,A)||!internalDeepEqual(I,D,_,x)){if(_.strict||!mapMightHaveLoosePrim(t,n,A,I,_,x))return!1;B||(B=new $Set),$setAdd(B,A)}if(B){for(;(T=S.next())&&!T.done;)if(A=T.value[0],D=T.value[1],A&&typeof A=="object"){if(!mapHasEqualEntry(B,t,A,D,_,x))return!1}else if(!_.strict&&(!t.has(A)||!internalDeepEqual($mapGet(t,A),D,_,x))&&!mapHasEqualEntry(B,t,A,D,assign$2({},_,{strict:!1}),x))return!1;return $setSize(B)===0}return!0}function objEquiv(t,n,_,x){var E,S;if(typeof t!=typeof n||t==null||n==null||$objToString(t)!==$objToString(n)||isArguments(t)!==isArguments(n))return!1;var C=isArray$4(t),T=isArray$4(n);if(C!==T)return!1;var B=t instanceof Error,A=n instanceof Error;if(B!==A||(B||A)&&(t.name!==n.name||t.message!==n.message))return!1;var I=isRegex$1(t),D=isRegex$1(n);if(I!==D||(I||D)&&(t.source!==n.source||flags(t)!==flags(n)))return!1;var M=isDate$1(t),V=isDate$1(n);if(M!==V||(M||V)&&$getTime(t)!==$getTime(n)||_.strict&&gPO&&gPO(t)!==gPO(n))return!1;var L=whichTypedArray(t),F=whichTypedArray(n);if(L!==F)return!1;if(L||F){if(t.length!==n.length)return!1;for(E=0;E<t.length;E++)if(t[E]!==n[E])return!1;return!0}var j=isBuffer$5(t),U=isBuffer$5(n);if(j!==U)return!1;if(j||U){if(t.length!==n.length)return!1;for(E=0;E<t.length;E++)if(t[E]!==n[E])return!1;return!0}var H=isArrayBuffer$1(t),Y=isArrayBuffer$1(n);if(H!==Y)return!1;if(H||Y)return byteLength(t)!==byteLength(n)?!1:typeof Uint8Array=="function"&&internalDeepEqual(new Uint8Array(t),new Uint8Array(n),_,x);var Z=isSharedArrayBuffer(t),ne=isSharedArrayBuffer(n);if(Z!==ne)return!1;if(Z||ne)return sabByteLength(t)!==sabByteLength(n)?!1:typeof Uint8Array=="function"&&internalDeepEqual(new Uint8Array(t),new Uint8Array(n),_,x);if(typeof t!=typeof n)return!1;var re=objectKeys$1(t),X=objectKeys$1(n);if(re.length!==X.length)return!1;for(re.sort(),X.sort(),E=re.length-1;E>=0;E--)if(re[E]!=X[E])return!1;for(E=re.length-1;E>=0;E--)if(S=re[E],!internalDeepEqual(t[S],n[S],_,x))return!1;var ce=whichCollection(t),ue=whichCollection(n);return ce!==ue?!1:ce==="Set"||ue==="Set"?setEquiv(t,n,_,x):ce==="Map"?mapEquiv(t,n,_,x):!0}var deepEqual$1=function(n,_,x){return internalDeepEqual(n,_,x,getSideChannel())};const deepEqual$2=getDefaultExportFromCjs(deepEqual$1),_sfc_main$1E=defineComponent$1({__name:"DialogueNoms",props:{titre:{},sousTitre:{},nomsInitiaux:{},indiceNom:{},indiceLangue:{},texteAucunNom:{},autorisationModification:{type:Boolean}},emits:["ajusterNoms"],setup(t,{emit:n}){const _=t,{useI18n:x}=_(),{t:E}=x(),{mdAndUp:S}=useDisplay(),C=ref$1(!1),T=()=>{C.value=!1,A.value=_.nomsInitiaux},B=()=>{n("ajusterNoms",A.value),C.value=!1},A=ref$1(_.nomsInitiaux),I=M=>{A.value=M},D=computed(()=>!deepEqual$2(A.value,_.nomsInitiaux));return(M,V)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":V[0]||(V[0]=L=>C.value=L)},{activator:withCtx(({props:L})=>[renderSlot(M.$slots,"activator",normalizeProps(guardReactiveProps({props:L})))]),default:withCtx(()=>[createVNode(VCard,{"max-width":unref(S)?500:300,class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(M.titre),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(M.sousTitre),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"noms-initiaux":M.nomsInitiaux,"texte-aucun-nom":M.texteAucunNom,"indice-langue":M.indiceLangue,"indice-nom":M.indiceNom,"autorisation-modification":M.autorisationModification,onAjusterNoms:I},null,8,["noms-initiaux","texte-aucun-nom","indice-langue","indice-nom","autorisation-modification"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"text","append-icon":"mdi-close",onClick:T},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.fermer")),1)]),_:1}),M.autorisationModification?(openBlock(),createBlock(VBtn,{key:0,color:"primary",variant:"outlined","append-icon":"mdi-check",disabled:!D.value,onClick:B},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.sauvegarder")),1)]),_:1},8,["disabled"])):createCommentVNode("",!0)]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$1D=defineComponent$1({__name:"CarteCopier",setup(t){const{mdAndUp:n}=useDisplay(),_=ref$1(!1);return(x,E)=>(openBlock(),createBlock(VDialog,{modelValue:_.value,"onUpdate:modelValue":E[0]||(E[0]=S=>_.value=S),"max-width":unref(n)?500:300},{activator:withCtx(({props:S})=>[renderSlot(x.$slots,"activator",normalizeProps(guardReactiveProps({props:S})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle)]),_:1}),createVNode(VCardText)]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_hoisted_1$D={class:"text-error"},_hoisted_2$s={class:"text-error font-weight-bold"},_sfc_main$1C=defineComponent$1({__name:"CarteEffacer",props:{titre:{},explication:{}},emits:["effacer"],setup(t,{emit:n}){const{mdAndUp:_}=useDisplay(),{useI18n:x}=_(),{t:E}=x(),S=ref$1(!1),C=()=>{n("effacer"),S.value=!1};return(T,B)=>(openBlock(),createBlock(VDialog,{modelValue:S.value,"onUpdate:modelValue":B[2]||(B[2]=A=>S.value=A),"max-width":unref(_)?500:300},{activator:withCtx(({props:A})=>[renderSlot(T.$slots,"activator",normalizeProps(guardReactiveProps({props:A})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$D,toDisplayString$1(T.titre||unref(E)("effacer.titre")),1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:B[0]||(B[0]=A=>S.value=!1)})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("span",_hoisted_2$s,toDisplayString$1(unref(E)("effacer.avertissement")),1),createTextVNode(" "+toDisplayString$1(T.explication||unref(E)("effacer.explication")),1)]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:B[1]||(B[1]=A=>S.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.annuler")),1)]),_:1}),createVNode(VBtn,{color:"error",variant:"flat","append-icon":"mdi-delete",onClick:C},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("effacer.effacer")),1)]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_sfc_main$1B=defineComponent$1({__name:"BaseCarteObjet",props:{id:{},noms:{},descriptions:{},fichiersEpinglables:{type:Boolean},auteurs:{},sauvegardePossible:{type:Boolean}},emits:["ajusterNoms","ajusterDescriptions","effacer","copier","sauvegarder"],setup(t,{emit:n}){const _=t,x=inject$1("constl"),{mdAndUp:E}=useDisplay(),{useI18n:S}=_(),{t:C}=S(),{traduireNom:T}=utiliserLangues(),B=ref$1(!1),A=ref$1();enregistrercoute(x?.suivrePermission({idObjet:_.id,f:F=>A.value=F}));const I=T(computed(()=>_.noms)),D=T(computed(()=>_.descriptions)),M=async()=>{n("effacer"),B.value=!1},V=async()=>{n("copier"),B.value=!1},L=async()=>{n("sauvegarder"),B.value=!1};return(F,j)=>(openBlock(),createBlock(VDialog,{modelValue:B.value,"onUpdate:modelValue":j[3]||(j[3]=U=>B.value=U)},{activator:withCtx(({props:U})=>[renderSlot(F.$slots,"activator",normalizeProps(guardReactiveProps({props:U})))]),default:withCtx(()=>[createVNode(VCard,{"max-width":unref(E)?700:300,class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createVNode(_sfc_main$1E,{"indice-nom":unref(C)("objet.indiceNom"),"indice-langue":unref(C)("objet.indiceLangue"),"texte-aucun-nom":unref(C)("objet.texteAucunNom"),"noms-initiaux":F.noms,titre:unref(C)("objet.titreDialogueNoms"),"sous-titre":unref(C)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!A.value,onAjusterNoms:j[0]||(j[0]=U=>n("ajusterNoms",U))},{activator:withCtx(({props:U})=>[createBaseVNode("span",normalizeProps(guardReactiveProps(U)),[createTextVNode(toDisplayString$1(unref(I)||unref(C)("communs.baseCarteObjet.sansNom"))+" ",1),createVNode(VBtn,{icon:A.value?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),createVNode(VSpacer),createVNode(_sfc_main$1Y,{id:F.id},null,8,["id"]),createVNode(VBtn,{icon:"",variant:"flat",size:"small"},{default:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-dots-horizontal")]),_:1}),createVNode(VMenu,{activator:"parent"},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(_sfc_main$1D,{onCopier:V},{activator:withCtx(({props:U})=>[createVNode(VListItem,mergeProps(U,{"prepend-icon":"mdi-content-copy"}),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.copier")),1)]),_:1})]),_:2},1040)]),_:1}),createVNode(_sfc_main$1M,{id:F.id,"option-fichiers":F.fichiersEpinglables},{activator:withCtx(({props:U})=>[createVNode(VListItem,mergeProps(U,{"prepend-icon":"mdi-pin"}),{prepend:withCtx(()=>[createVNode(_sfc_main$1L,{id:F.id},null,8,["id"])]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.pingler")),1)]),_:1})]),_:2},1040)]),_:1},8,["id","option-fichiers"]),A.value?(openBlock(),createBlock(_sfc_main$1C,{key:0,onEffacer:M},{activator:withCtx(({props:U})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(U)),{prepend:withCtx(()=>[createVNode(VIcon,{icon:"mdi-delete",color:"error"})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.effacer")),1)]),_:1})]),_:2},1040)]),_:1})):createCommentVNode("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(_sfc_main$1K,{titre:unref(C)("communs.baseCarteObjet.description"),"en-attente":!F.descriptions},null,8,["titre","en-attente"]),createBaseVNode("span",{class:normalizeClass({"text-disabled":!unref(D)})},toDisplayString$1(unref(D)||unref(C)("communs.baseCarteObjet.sansDescription")),3),createVNode(_sfc_main$1E,{"indice-nom":unref(C)("objet.indiceDescription"),"indice-langue":unref(C)("objet.indiceLangue"),"texte-aucun-nom":unref(C)("objet.texteAucuneDescription"),"noms-initiaux":F.descriptions,titre:unref(C)("objet.titreDialogueDescriptions"),"sous-titre":unref(C)("objet.sousTitreDialogueDescriptions"),"autorisation-modification":!!A.value,onAjusterNoms:j[1]||(j[1]=U=>n("ajusterDescriptions",U))},{activator:withCtx(({props:U})=>[createVNode(VBtn,mergeProps(U,{icon:A.value?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"}),null,16,["icon"])]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),createVNode(_sfc_main$1K,{titre:unref(C)("communs.baseCarteObjet.auteurs"),"en-attente":!F.auteurs},null,8,["titre","en-attente"]),createVNode(_sfc_main$1F,{auteurs:F.auteurs},null,8,["auteurs"]),A.value==="MODRATEUR"?(openBlock(),createBlock(_sfc_main$1G,{key:0,id:F.id,auteurs:F.auteurs,"permission-moderateur":A.value==="MODRATEUR"},{activator:withCtx(({props:U})=>[createVNode(VChip,mergeProps(U,{variant:"outlined","prepend-icon":"mdi-plus",class:"me-2 mb-2"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.baseCarteObjet.ajouterAuteur")),1)]),_:2},1040)]),_:1},8,["id","auteurs","permission-moderateur"])):createCommentVNode("",!0),renderSlot(F.$slots,"default")]),_:3}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),F.sauvegardePossible?(openBlock(),createBlock(VBtn,{key:0,variant:"flat",color:"primary",onClick:L},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.sauvegarder")),1)]),_:1})):createCommentVNode("",!0),createVNode(VBtn,{variant:"flat","append-icon":"mdi-close",onClick:j[2]||(j[2]=U=>B.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("communs.fermer")),1)]),_:1})]),_:1})]),_:3},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$1A=defineComponent$1({__name:"ItemRgle",props:{regle:{},effacable:{type:Boolean}},emits:["effacer"],setup(t,{emit:n}){const _=t,{useI18n:x}=_(),{t:E}=x(),S=computed(()=>{switch(_.regle.rgle.typeRgle){case"catgorie":return E("rgles.types.catgorie");case"bornes":return E("rgles.types.bornes");case"existe":return E("rgles.types.existe");case"valeurCatgorique":return E("rgles.types.valeurCatgorique");default:return""}}),C=computed(()=>{const{rgle:T}=_.regle;switch(T.typeRgle){case"catgorie":return E("rgles.infos.catgorie",{categorie:E(`variables.catgories.${T.dtails.catgorie.catgorie}`)});case"bornes":return E("rgles.infos.bornes",{val:T.dtails.val,op:T.dtails.op});case"existe":return E("rgles.infos.existe");case"valeurCatgorique":return E("rgles.infos.valeurCatgorique");default:return""}});return(T,B)=>(openBlock(),createBlock(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(S.value),1)]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.value),1)]),_:1}),createVNode(VListItemAction,null,{default:withCtx(()=>[T.effacable?(openBlock(),createBlock(VBtn,{key:0,icon:"mdi-delete",color:"error",variant:"outlined",onClick:B[0]||(B[0]=()=>n("effacer"))})):createCommentVNode("",!0)]),_:1})]),_:1}))}}),_hoisted_1$C={key:0},_sfc_main$1z=defineComponent$1({__name:"CarteVariable",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),S=ref$1();enregistrercoute(_?.suivrePermission({idObjet:n.id,f:Z=>S.value=Z}));const C=ref$1({});enregistrercoute(_?.variables.suivreNomsVariable({idVariable:n.id,f:Z=>C.value=Z}));const T=async Z=>{const{Effacer:ne,Ajouter:re}=ajusterTexteTraductible({anciennes:C.value,nouvelles:Z});for(const X of ne)await _?.variables.effacerNomVariable({idVariable:n.id,langue:X});return await _?.variables.sauvegarderNomsVariable({idVariable:n.id,noms:re})},B=ref$1({});enregistrercoute(_?.variables.suivreDescrVariable({idVariable:n.id,f:Z=>B.value=Z}));const A=async Z=>{const{Effacer:ne,Ajouter:re}=ajusterTexteTraductible({anciennes:B.value,nouvelles:Z});for(const X of ne)await _?.variables.effacerDescriptionVariable({idVariable:n.id,langue:X});return await _?.variables.sauvegarderDescriptionsVariable({idVariable:n.id,descriptions:re})},I=computed(()=>D.value?icneCatgorieVariable(D.value):"mdi-variable"),D=ref$1();enregistrercoute(_?.variables.suivreCatgorieVariable({idVariable:n.id,f:Z=>D.value=Z}));const M=ref$1(!1),V=ref$1(),L=computed(()=>{if(V.value)return{type:M.value?"liste":"simple",catgorie:V.value}});watchEffect(()=>{M.value=D.value?.type==="liste",V.value=D.value?.catgorie});const F=computed(()=>{if(L.value){const{type:Z,catgorie:ne}=L.value;return Z!==D.value?.type||ne!==D.value.catgorie}else return!1}),j=async()=>{L.value&&F.value&&await _?.variables.sauvegarderCatgorieVariable({idVariable:n.id,catgorie:L.value})},U=ref$1();enregistrercoute(_?.rseau?.suivreAuteursVariable({idVariable:n.id,f:Z=>U.value=Z}));const H=ref$1();enregistrercoute(_?.variables.suivreRglesVariable({idVariable:n.id,f:Z=>H.value=Z}));const Y=async()=>{await _?.variables.effacerVariable({idVariable:n.id})};return(Z,ne)=>(openBlock(),createBlock(_sfc_main$1B,{id:Z.id,noms:C.value,descriptions:B.value,auteurs:U.value,"fichiers-epinglables":!1,"sauvegarde-possible":"",onEffacer:Y,onAjusterNoms:ne[2]||(ne[2]=re=>T(re)),onAjusterDescriptions:ne[3]||(ne[3]=re=>A(re)),onSauvegarder:ne[4]||(ne[4]=()=>j())},{activator:withCtx(({props:re})=>[renderSlot(Z.$slots,"activator",normalizeProps(guardReactiveProps({props:re})))]),default:withCtx(()=>[createVNode(_sfc_main$1K,{titre:unref(E)("variables.catgorie"),"en-attente":!D.value},null,8,["titre","en-attente"]),S.value&&D.value?(openBlock(),createElementBlock("span",_hoisted_1$C,[createVNode(VSelect,{modelValue:V.value,"onUpdate:modelValue":ne[0]||(ne[0]=re=>V.value=re),items:unref(catgoriesBase),label:unref(E)("variables.catgorie"),variant:"outlined"},{selection:withCtx(({item:re})=>[createVNode(VIcon,{start:"",icon:unref(icneCatgorieVariable)({type:"simple",catgorie:re.raw})||"mdi-variable"},null,8,["icon"]),createTextVNode(" "+toDisplayString$1(unref(E)(`variables.catgories.${re.raw}`)),1)]),item:withCtx(({item:re,props:X})=>[createVNode(VListItem,mergeProps(X,{title:unref(E)(`variables.catgories.${re.raw}`),subtitle:unref(E)(`variables.indicesCatgories.${re.raw}`),"prepend-icon":unref(icneCatgorieVariable)({type:"simple",catgorie:re.raw})||"mdi-variable"}),null,16,["title","subtitle","prepend-icon"])]),_:1},8,["modelValue","items","label"]),createVNode(VCheckbox,{modelValue:M.value,"onUpdate:modelValue":ne[1]||(ne[1]=re=>M.value=re),label:unref(E)("variables.nouvelle.typeListe")},null,8,["modelValue","label"])])):D.value?(openBlock(),createBlock(VChip,{key:1,label:"",variant:"outlined","prepend-icon":I.value},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)(`variables.catgories.${D.value.catgorie}`)),1)]),_:1},8,["prepend-icon"])):createCommentVNode("",!0),createVNode(_sfc_main$1K,{titre:unref(E)("variables.rgles"),"en-attente":!H.value},null,8,["titre","en-attente"]),H.value?(openBlock(),createBlock(VList,{key:2},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(H.value,re=>(openBlock(),createBlock(_sfc_main$1A,{key:re.id,regle:re},null,8,["regle"]))),128))]),_:1})):createCommentVNode("",!0)]),_:3},8,["id","noms","descriptions","auteurs"]))}}),_sfc_main$1y=defineComponent$1({__name:"ItemVariable",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=computed(()=>T.value?icneCatgorieVariable(T.value):"mdi-variable"),T=ref$1();enregistrercoute(_?.variables.suivreCatgorieVariable({idVariable:n.id,f:I=>T.value=I}));const B=ref$1({}),A=S(B);return enregistrercoute(_?.variables.suivreNomsVariable({idVariable:n.id,f:I=>B.value=I})),(I,D)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.value),1)]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[renderSlot(I.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(unref(A)||unref(E)("variables.sansNom")),1)])]),_:3})]),_:3}))}}),_sfc_main$1x=defineComponent$1({__name:"ItemBd",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=ref$1({}),T=S(C);enregistrercoute(_?.bds.suivreNomsBd({idBd:n.id,f:F=>C.value=F}));const B=ref$1({}),A=S(B);enregistrercoute(_?.bds.suivreDescriptionsBd({idBd:n.id,f:F=>B.value=F}));const I=ref$1(),D=computed(()=>{if(I.value)return URL.createObjectURL(new Blob([I.value],{type:"image"}))});enregistrercoute(_?.bds.suivreImage({idBd:n.id,f:F=>I.value=F}));const{obtImageDco:M}=utiliserImagesDco(),V=M("logoBD"),L=ref$1();return enregistrercoute(_?.bds.suivreVariablesBd({idBd:n.id,f:F=>L.value=F})),(F,j)=>(openBlock(),createBlock(VListItem,{"prepend-avatar":D.value||unref(V),title:unref(T)||unref(E)("bds.sansNom"),subtitle:unref(A)},{default:withCtx(()=>[createVNode(_sfc_main$1Q,{"n-max":3,items:L.value},{jeton:withCtx(({id:U})=>[createVNode(_sfc_main$1z,{id:U},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$1P,mergeProps(H,{id:U,size:"small"}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:U})=>[createVNode(_sfc_main$1z,{id:U},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$1y,mergeProps(H,{id:U}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"])]),_:1},8,["prepend-avatar","title","subtitle"]))}}),_sfc_main$1w=defineComponent$1({__name:"JetonBd",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=ref$1({}),T=S(C);enregistrercoute(_?.bds.suivreNomsBd({idBd:n.id,f:M=>C.value=M}));const B=ref$1(),A=computed(()=>{if(B.value)return URL.createObjectURL(new Blob([B.value],{type:"image"}))});enregistrercoute(_?.bds.suivreImage({idBd:n.id,f:M=>B.value=M}));const{obtImageDco:I}=utiliserImagesDco(),D=I("logoBD");return(M,V)=>(openBlock(),createBlock(VChip,{variant:"outlined",class:"me-2 mb-2"},{default:withCtx(()=>[createVNode(VAvatar,{start:""},{default:withCtx(()=>[createVNode(VImg,{src:A.value||unref(D)},null,8,["src"])]),_:1}),createTextVNode(" "+toDisplayString$1(unref(T)||unref(E)("bds.sansNom")),1)]),_:1}))}}),_sfc_main$1v=defineComponent$1({__name:"JetonProjet",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=ref$1({}),T=S(C);enregistrercoute(_?.projets.suivreNomsProjet({idProjet:n.id,f:M=>C.value=M}));const B=ref$1(),A=computed(()=>{if(B.value)return URL.createObjectURL(new Blob([B.value],{type:"image"}))});enregistrercoute(_?.projets.suivreImage({idProjet:n.id,f:M=>B.value=M}));const{obtImageDco:I}=utiliserImagesDco(),D=I("logoBD");return(M,V)=>(openBlock(),createBlock(VChip,{variant:"outlined"},{default:withCtx(()=>[createVNode(VAvatar,{start:""},{default:withCtx(()=>[createVNode(VImg,{src:A.value||unref(D)},null,8,["src"])]),_:1}),createTextVNode(" "+toDisplayString$1(unref(T)||unref(E)("projets.sansNom")),1)]),_:1}))}}),_sfc_main$1u=defineComponent$1({__name:"ItemProjet",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{traduireNom:x}=utiliserLangues(),E=ref$1({}),S=x(E);enregistrercoute(_?.projets.suivreNomsProjet({idProjet:n.id,f:M=>E.value=M}));const C=ref$1({}),T=x(C);enregistrercoute(_?.projets.suivreDescriptionsProjet({idProjet:n.id,f:M=>E.value=M}));const B=ref$1(),A=computed(()=>{if(B.value)return URL.createObjectURL(new Blob([B.value],{type:"image"}))});enregistrercoute(_?.projets.suivreImage({idProjet:n.id,f:M=>B.value=M}));const{obtImageDco:I}=utiliserImagesDco(),D=I("logoBD");return(M,V)=>(openBlock(),createBlock(VListItem,{"prepend-avatar":A.value||unref(D),title:unref(S),subtitle:unref(T)},{default:withCtx(()=>[renderSlot(M.$slots,"default")]),_:3},8,["prepend-avatar","title","subtitle"]))}}),_sfc_main$1t=defineComponent$1({__name:"JetonNue",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=ref$1({}),T=S(C);enregistrercoute(_?.nues.suivreNomsNue({idNue:n.id,f:M=>C.value=M}));const B=ref$1(),A=computed(()=>{if(B.value)return URL.createObjectURL(new Blob([B.value],{type:"image"}))}),{obtImageDco:I}=utiliserImagesDco(),D=I("logoBD");return(M,V)=>(openBlock(),createBlock(VChip,{variant:"outlined"},{default:withCtx(()=>[createVNode(VAvatar,{start:""},{default:withCtx(()=>[createVNode(VImg,{src:A.value||unref(D)},null,8,["src"])]),_:1}),createTextVNode(" "+toDisplayString$1(unref(T)||unref(E)("nues.sansNom")),1)]),_:1}))}}),_sfc_main$1s=defineComponent$1({__name:"ItemNue",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=ref$1({}),T=S(C);enregistrercoute(_?.nues.suivreNomsNue({idNue:n.id,f:L=>C.value=L}));const B=ref$1({}),A=S(B);enregistrercoute(_?.nues.suivreDescriptionsNue({idNue:n.id,f:L=>B.value=L}));const I=ref$1(),D=computed(()=>{if(I.value)return URL.createObjectURL(new Blob([I.value],{type:"image"}))}),{obtImageDco:M}=utiliserImagesDco(),V=M("logoBD");return(L,F)=>(openBlock(),createBlock(VListItem,{"prepend-avatar":D.value||unref(V),title:unref(T)||unref(E)("nues.sansNom"),subtitle:unref(A)||unref(E)("communs.baseCarteObjet.sansDescription")},{append:withCtx(()=>[createVNode(_sfc_main$1Y,{id:L.id},null,8,["id"])]),_:1},8,["prepend-avatar","title","subtitle"]))}}),_sfc_main$1r=defineComponent$1({__name:"IcneConfiance",props:{confiance:{},cestMoi:{type:Boolean}},setup(t){const n=t,_=computed(()=>n.confiance<0?"mdi-cancel":n.cestMoi?"mdi-check":"mdi-hands-pray"),x=computed(()=>n.confiance<0?"error":n.confiance===1?"success":`rgba(22, 151, 246, ${.1+n.confiance*.9})`);return(E,S)=>(openBlock(),createBlock(VIcon,{color:x.value,start:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(_.value),1)]),_:1},8,["color"]))}}),_hoisted_1$B={class:"my-2"},_hoisted_2$r={class:"font-weight-bold"},_hoisted_3$g={class:"text-medium-emphasis text-caption"},_hoisted_4$8={class:"font-weight-bold"},_hoisted_5$7={class:"text-medium-emphasis text-caption"},_hoisted_6$7={class:"font-weight-bold"},_hoisted_7$3={class:"text-medium-emphasis text-caption"},_hoisted_8$3={class:"font-weight-bold"},_hoisted_9$3={class:"text-medium-emphasis text-caption"},_sfc_main$1q=defineComponent$1({__name:"CarteConfianceMembre",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{mdAndUp:S}=useDisplay(),C=ref$1(!1),T=ref$1(),B=ref$1();enregistrercoute(_?.rseau?.suivreBloqus({f:M=>B.value=M})),enregistrercoute(_?.rseau?.suivreFiables({f:M=>T.value=M}));const A=computed(()=>{if(T.value?.includes(n.id))return"fiable";{const M=B.value?.find(V=>V.idCompte===n.id);return M?M.priv?"bloquPriv":"bloquPublique":"inconnu"}}),I=ref$1(A.value);watchEffect(()=>{I.value=A.value});const D=async()=>{switch(I.value){case"fiable":await _?.rseau?.faireConfianceAuMembre({idCompte:n.id});break;case"bloquPublique":case"bloquPriv":await _?.rseau?.bloquerMembre({idCompte:n.id,priv:I.value==="bloquPriv"});break;case"inconnu":A.value==="fiable"?await _?.rseau?.nePlusFaireConfianceAuMembre({idCompte:n.id}):await _?.rseau?.dbloquerMembre({idCompte:n.id});break}};return(M,V)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":V[2]||(V[2]=L=>C.value=L)},{activator:withCtx(({props:L})=>[renderSlot(M.$slots,"activator",normalizeProps(guardReactiveProps({props:L})))]),default:withCtx(()=>[createVNode(VCard,{"max-width":unref(S)?500:300,class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("membres.confiance.titreCarte")),1)]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$B,[createVNode(_sfc_main$1W,{compte:M.id},null,8,["compte"])]),createTextVNode(" "+toDisplayString$1(unref(E)("membres.confiance.question"))+" ",1),createVNode(VRadioGroup,{modelValue:I.value,"onUpdate:modelValue":V[0]||(V[0]=L=>I.value=L)},{default:withCtx(()=>[createVNode(VRadio,{value:"inconnu",class:"my-2"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_2$r,[createVNode(VIcon,{icon:"mdi-account-question-outline",start:"",size:"small"}),createTextVNode(" "+toDisplayString$1(unref(E)("membres.confiance.inconnu")),1)]),createBaseVNode("p",_hoisted_3$g,toDisplayString$1(unref(E)("membres.confiance.indiceInconnu")),1)])]),_:1}),createVNode(VRadio,{value:"fiable",class:"my-2",color:"success"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_4$8,[createVNode(VIcon,{icon:"mdi-account-check",color:"success",start:"",size:"small"}),createTextVNode(" "+toDisplayString$1(unref(E)("membres.confiance.faireConfiance")),1)]),createBaseVNode("p",_hoisted_5$7,toDisplayString$1(unref(E)("membres.confiance.indiceFaireConfiance")),1)])]),_:1}),createVNode(VRadio,{value:"bloquPublique",class:"my-2",color:"error"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_6$7,[createVNode(VIcon,{icon:"mdi-account-cancel",color:"error",size:"small",start:""}),createTextVNode(" "+toDisplayString$1(unref(E)("membres.confiance.bloquerPublique")),1)]),createBaseVNode("p",_hoisted_7$3,toDisplayString$1(unref(E)("membres.confiance.indiceBloquerPublique")),1)])]),_:1}),createVNode(VRadio,{value:"bloquPriv",class:"my-2",color:"error"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_8$3,[createVNode(VIcon,{icon:"mdi-account-cancel-outline",color:"error",start:"",size:"small"}),createTextVNode(" "+toDisplayString$1(unref(E)("membres.confiance.bloquerPriv")),1)]),createBaseVNode("p",_hoisted_9$3,toDisplayString$1(unref(E)("membres.confiance.indiceBloquerPriv")),1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:V[1]||(V[1]=L=>C.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1}),createVNode(VBtn,{variant:"outlined",color:"primary",disabled:A.value===I.value,onClick:D},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$1p=defineComponent$1({__name:"JetonConfiance",props:{id:{},styleJeton:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),S=ref$1();enregistrercoute(_?.suivreIdCompte({f:B=>S.value=B}));const C=ref$1(0);enregistrercoute(_?.rseau?.suivreConfianceMonRseauPourMembre({idCompte:n.id,f:B=>C.value=B,profondeur:5}));const T=computed(()=>C.value<0?E("membres.confiance.bloqu"):C.value===0?E("membres.confiance.inconnu"):C.value<.33?E("membres.confiance.peuDinteraction"):C.value<.67?E("membres.confiance.interactionMoyenne"):C.value<1?E("membres.confiance.beaucoupDinteraction"):C.value===1?n.id===S.value?E("membres.moi"):E("membres.confiance.connaissance"):"");return(B,A)=>B.id!==S.value?(openBlock(),createBlock(_sfc_main$1q,{key:0,id:B.id},{activator:withCtx(({props:I})=>[B.styleJeton==="icne"?(openBlock(),createBlock(_sfc_main$1r,mergeProps({key:0},I,{confiance:C.value,"cest-moi":B.id===S.value}),null,16,["confiance","cest-moi"])):(openBlock(),createBlock(VChip,mergeProps({key:1},I,{label:"",variant:"outlined",size:"small"}),{prepend:withCtx(()=>[createVNode(_sfc_main$1r,{confiance:C.value,"cest-moi":B.id===S.value},null,8,["confiance","cest-moi"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(T.value),1)]),_:2},1040))]),_:1},8,["id"])):(openBlock(),createBlock(VTooltip,{key:1,text:T.value},{activator:withCtx(({props:I})=>[B.styleJeton==="icne"?(openBlock(),createBlock(_sfc_main$1r,mergeProps({key:0},I,{confiance:C.value,"cest-moi":B.id===S.value}),null,16,["confiance","cest-moi"])):(openBlock(),createBlock(VChip,mergeProps({key:1},I,{label:"",variant:"outlined",size:"small"}),{prepend:withCtx(()=>[createVNode(_sfc_main$1r,{confiance:C.value,"cest-moi":B.id===S.value},null,8,["confiance","cest-moi"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(T.value),1)]),_:2},1040))]),_:1},8,["text"]))}}),_sfc_main$1o=defineComponent$1({__name:"JetonLicence",props:{licence:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),S=ref$1();enregistrercoute(_?.licences.suivreLicences({f:T=>S.value=T}));const C=computed(()=>n.licence&&S.value&&Object.keys(S.value).includes(n.licence));return(T,B)=>(openBlock(),createBlock(VChip,{class:"mb-2 me-2",variant:"outlined",label:""},{prepend:withCtx(()=>[createVNode(VIcon,{start:"",color:C.value?"primary":"error"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.value?"mdi-scale-balance":"mdi-alert"),1)]),_:1},8,["color"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(C.value?unref(E)(`licences.info.${T.licence}.abr`):T.licence),1)]),_:1}))}}),_sfc_main$1n=defineComponent$1({__name:"JetonMotClef",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=ref$1({}),T=S(C);return enregistrercoute(_?.motsClefs.suivreNomsMotClef({idMotClef:n.id,f:B=>C.value=B})),(B,A)=>(openBlock(),createBlock(VChip,{class:"mb-2 me-2","prepend-icon":"mdi-key",variant:"outlined",size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(T)||unref(E)("motsClefs.sansNom")),1)]),_:1}))}}),_sfc_main$1m=defineComponent$1({__name:"ItemMotClef",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=ref$1({}),T=S(C);enregistrercoute(_?.motsClefs.suivreNomsMotClef({idMotClef:n.id,f:I=>C.value=I}));const B=ref$1({}),A=S(B);return enregistrercoute(_?.motsClefs.suivreDescriptionsMotClef({idMotClef:n.id,f:I=>B.value=I})),(I,D)=>(openBlock(),createBlock(VListItem,{class:"text-start","prepend-icon":"mdi-key",density:"compact"},{title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(T)||unref(E)("motsClefs.sansNom")),1)]),subtitle:withCtx(()=>[createTextVNode(toDisplayString$1(unref(A)||unref(E)("communs.baseCarteObjet.sansDescription")),1)]),append:withCtx(()=>[createVNode(_sfc_main$1Y,{id:I.id},null,8,["id"])]),_:1}))}}),_sfc_main$1l=defineComponent$1({__name:"ItemTableau",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=ref$1({});enregistrercoute(_?.tableaux.suivreNomsTableau({idTableau:n.id,f:A=>C.value=A}));const T=S(C),B=ref$1();return enregistrercoute(_?.tableaux.suivreVariables({idTableau:n.id,f:A=>B.value=A})),(A,I)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-table")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,{class:"mb-2"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(T)||unref(E)("tableaux.sansNom")),1)]),_:1}),createVNode(_sfc_main$1Q,{items:B.value,"n-max":3},{jeton:withCtx(({id:D})=>[createVNode(_sfc_main$1z,{id:D},{activator:withCtx(({props:M})=>[createVNode(_sfc_main$1P,mergeProps(M,{id:D,size:"small"}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:D})=>[createVNode(_sfc_main$1z,{id:D},{activator:withCtx(({props:M})=>[createVNode(_sfc_main$1y,mergeProps(M,{id:D}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"])]),_:1}))}}),_hoisted_1$A={class:"text-center"},_hoisted_2$q={class:"text-h6 font-weight-light mb-2"},_sfc_main$1k=defineComponent$1({__name:"NouveauMotClef",setup(t){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{mdAndUp:E}=useDisplay(),S=ref$1(!1),C=ref$1(0),T=["noms","descriptions","confirmation"],B=computed(()=>{switch(T[C.value]){case"noms":return x("motsClefs.nouveau.titreNoms");case"descriptions":return x("motsClefs.nouveau.titreDescriptions");case"confirmation":return x("motsClefs.nouveau.titreConfirmation");default:return""}}),A=computed(()=>{switch(T[C.value]){case"noms":return x("motsClefs.nouveau.sousTitreNoms");case"descriptions":return x("motsClefs.nouveau.sousTitreDescriptions");case"confirmation":return x("motsClefs.nouveau.sousTitreConfirmation");default:return""}}),I=()=>{switch(T[C.value]){default:C.value--;break}},D=()=>{switch(T[C.value]){default:C.value++;break}},M=computed(()=>{switch(T[C.value]){case"noms":return{actif:!!Object.keys(L.value).length,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),V=computed(()=>{switch(T[C.value]){case"noms":return{actif:!1,visible:!1};case"confirmation":return{actif:!H.value,visible:!0};default:return{actif:!0,visible:!0}}}),L=ref$1({}),F=ne=>{L.value=ne},j=ref$1({}),U=ne=>{j.value=ne},H=ref$1(!1),Y=async()=>{H.value=!0;const ne=await n?.motsClefs.crerMotClef();if(!ne)throw new Error("Mot clef non cr.");await n?.motsClefs.sauvegarderNomsMotClef({idMotClef:ne,noms:Object.fromEntries(Object.entries(L.value))}),await n?.motsClefs.sauvegarderDescriptionsMotClef({idMotClef:ne,descriptions:Object.fromEntries(Object.entries(j.value))}),Z()},Z=()=>{L.value={},j.value={},C.value=0,H.value=!1,S.value=!1};return(ne,re)=>(openBlock(),createBlock(VDialog,{modelValue:S.value,"onUpdate:modelValue":re[2]||(re[2]=X=>S.value=X)},{activator:withCtx(({props:X})=>[renderSlot(ne.$slots,"activator",normalizeProps(guardReactiveProps({props:X})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(E)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(B.value)+" ",1),createVNode(VSpacer),createVNode(VBtn,{variant:"flat",size:"small",icon:"mdi-close",onClick:Z})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:C.value,"onUpdate:modelValue":re[1]||(re[1]=X=>C.value=X),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[(openBlock(),createBlock(VWindowItem,{key:0},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("communs.texteAucunNom"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("communs.indiceNom"),"noms-initiaux":L.value,"autorisation-modification":!0,onAjusterNoms:F},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1})),(openBlock(),createBlock(VWindowItem,{key:1},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("motsClefs.nouveau.texteAucuneDescription"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("motsClefs.nouveau.texteIndiceDescription"),"noms-initiaux":j.value,"autorisation-modification":!0,onAjusterNoms:U},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1})),(openBlock(),createBlock(VWindowItem,{key:2},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$A,[createBaseVNode("h3",_hoisted_2$q,toDisplayString$1(unref(x)("motsClefs.nouveau.texteCrer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:H.value,onClick:re[0]||(re[0]=()=>Y())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("motsClefs.nouveau.texteBtnCration")),1)]),_:1},8,["loading"])])])]),_:1}))]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!V.value.actif,onClick:I},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,V.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!M.value.actif,onClick:D},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,M.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$1j=defineComponent$1({__name:"GrerMotsClefsObjet",props:{originaux:{}},emits:["sauvegarder"],setup(t,{emit:n}){const _=t,{useI18n:x}=_(),{t:E}=x(),{mdAndUp:S}=useDisplay(),C=inject$1("constl"),T=ref$1(!1),B=ref$1(!1),A=ref$1(_.originaux),I=U=>{A.value=A.value.filter(H=>H!==U)},D=U=>{U&&A.value.push(U)},M=()=>{n("sauvegarder",A.value)},V=ref$1(),L=ref$1(),F=ref$1();let j;return watchEffect(async()=>{if(j&&await j(),L.value){const U=await C?.recherche.rechercherMotsClefsSelonTexte({texte:L.value,f:H=>F.value=H,nRsultatsDsirs:10});U&&(j=U.fOublier)}else F.value=[]}),onUnmounted(async()=>{j&&await j()}),(U,H)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":H[4]||(H[4]=Y=>T.value=Y)},{activator:withCtx(({props:Y})=>[createVNode(VChip,mergeProps(Y,{class:"mb-2 me-2",variant:"outlined","prepend-icon":"mdi-pencil-outline",size:"small"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("motsClefs.grerMotsClefsObjet")),1)]),_:2},1040)]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(S)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("motsClefs.grerMotsClefsObjet.titreCarte")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VDialog,{modelValue:B.value,"onUpdate:modelValue":H[3]||(H[3]=Y=>B.value=Y)},{activator:withCtx(({props:Y})=>[createVNode(VChip,mergeProps(Y,{variant:"outlined","prepend-icon":"mdi-plus"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("motsClefs.ajouterObjet")),1)]),_:2},1040)]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(S)?500:300},{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VTextField,{modelValue:L.value,"onUpdate:modelValue":H[0]||(H[0]=Y=>L.value=Y),variant:"outlined"},null,8,["modelValue"]),createVNode(VSelect,{modelValue:V.value,"onUpdate:modelValue":H[1]||(H[1]=Y=>V.value=Y),items:F.value,variant:"outlined"},{selection:withCtx(({item:Y})=>[createVNode(_sfc_main$1n,{id:Y.value},null,8,["id"])]),item:withCtx(({item:Y,props:Z})=>[createVNode(_sfc_main$1m,mergeProps(Z,{id:Y.value}),null,16,["id"])]),_:1},8,["modelValue","items"]),createVNode(_sfc_main$1k,null,{default:withCtx(()=>[createVNode(VBtn,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("motsClefs.nouveauMotClef")),1)]),_:1})]),_:1})]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VBtn,{onClick:H[2]||(H[2]=()=>D(V.value))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.sauvegarder")),1)]),_:1})]),_:1})]),_:1},8,["max-width"])]),_:1},8,["modelValue"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(A.value,Y=>(openBlock(),createBlock(_sfc_main$1m,{id:Y,key:Y,effacable:!0,onEffacer:I},null,8,["id"]))),128))]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VBtn,{onClick:M})]),_:1})]),_:1},8,["max-width"])]),_:1},8,["modelValue"]))}}),_hoisted_1$z={key:0},_sfc_main$1i=defineComponent$1({__name:"JetonRplications",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{formatterChiffre:S}=utiliserNumration(),C=ref$1();enregistrercoute(_?.rseau?.suivreRplications({idObjet:n.id,f:D=>C.value=D,profondeur:5}));const T=computed(()=>C.value?.dispositifs.length||0),B=S(T),A=computed(()=>C.value?.dispositifs.filter(D=>!D.vu).length||0),I=S(A);return(D,M)=>(openBlock(),createBlock(VChip,{class:"mb-2 me-2",variant:"outlined",label:""},{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode("mdi-pin-outline")]),_:1}),createTextVNode(" "+toDisplayString$1(unref(B))+" "+toDisplayString$1(unref(E)("rplications.rplications",T.value))+" ",1),T.value>0?(openBlock(),createElementBlock("span",_hoisted_1$z,toDisplayString$1(unref(E)("rplications.rplicationsEnLigne",[unref(I)])),1)):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$1h=defineComponent$1({__name:"CarteMotClef",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),x=ref$1({});enregistrercoute(_?.motsClefs.suivreNomsMotClef({idMotClef:n.id,f:A=>x.value=A}));const E=async A=>{const{Effacer:I,Ajouter:D}=ajusterTexteTraductible({anciennes:x.value,nouvelles:A});for(const M of I)await _?.motsClefs.effacerNomMotClef({idMotClef:n.id,langue:M});return await _?.motsClefs.sauvegarderNomsMotClef({idMotClef:n.id,noms:D})},S=ref$1({});enregistrercoute(_?.motsClefs.suivreDescriptionsMotClef({idMotClef:n.id,f:A=>S.value=A}));const C=async A=>{const{Effacer:I,Ajouter:D}=ajusterTexteTraductible({anciennes:S.value,nouvelles:A});for(const M of I)await _?.motsClefs.effacerDescriptionMotClef({id:n.id,langue:M});return await _?.motsClefs.sauvegarderDescriptionsMotClef({idMotClef:n.id,descriptions:D})},T=ref$1();enregistrercoute(_?.rseau?.suivreAuteursMotClef({idMotClef:n.id,f:A=>T.value=A}));const B=async()=>{await _?.motsClefs.effacerMotClef({idMotClef:n.id})};return(A,I)=>(openBlock(),createBlock(_sfc_main$1B,{id:A.id,noms:x.value,descriptions:S.value,auteurs:T.value,"fichiers-epinglables":!1,onAjusterNoms:I[0]||(I[0]=D=>E(D)),onAjusterDescriptions:I[1]||(I[1]=D=>C(D)),onEffacer:B},{activator:withCtx(({props:D})=>[renderSlot(A.$slots,"activator",normalizeProps(guardReactiveProps({props:D})))]),_:3},8,["id","noms","descriptions","auteurs"]))}}),VSkeletonLoader$1="",rootTypes={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function genBone(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return createVNode("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${t}`]},[n])}function genBones(t){const[n,_]=t.split("@");return Array.from({length:_}).map(()=>genStructure(n))}function genStructure(t){let n=[];if(!t)return n;const _=rootTypes[t];if(t!==_){if(t.includes(","))return mapBones(t);if(t.includes("@"))return genBones(t);_.includes(",")?n=mapBones(_):_.includes("@")?n=genBones(_):_&&n.push(genStructure(_))}return[genBone(t,n)]}function mapBones(t){return t.replace(/\s/g,"").split(",").map(genStructure)}const makeVSkeletonLoaderProps=propsFactory({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"image"},...makeDimensionProps(),...makeElevationProps(),...makeThemeProps()},"VSkeletonLoader"),VSkeletonLoader=genericComponent()({name:"VSkeletonLoader",props:makeVSkeletonLoaderProps(),setup(t,n){let{slots:_}=n;const{backgroundColorClasses:x,backgroundColorStyles:E}=useBackgroundColor(toRef(t,"color")),{dimensionStyles:S}=useDimension(t),{elevationClasses:C}=useElevation(t),{themeClasses:T}=provideTheme(t),{t:B}=useLocale(),A=computed(()=>genStructure(wrapInArray(t.type).join(",")));return useRender(()=>{const I=!_.default||t.loading;return createVNode("div",{class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":t.boilerplate},T.value,x.value,C.value],style:[E.value,I?S.value:{}],"aria-busy":t.boilerplate?void 0:I,"aria-live":t.boilerplate?void 0:"polite","aria-label":t.boilerplate?void 0:B(t.loadingText),role:t.boilerplate?void 0:"alert"},[I?A.value:_.default?.()])}),{}}}),_sfc_main$1g=defineComponent$1({__name:"JetonDroitLicence",props:{droit:{}},setup(t){const{useI18n:n}=_(),{t:_}=n();return(x,E)=>(openBlock(),createBlock(VTooltip,{location:"bottom"},{activator:withCtx(({props:S})=>[createVNode(VChip,mergeProps(S,{variant:"outlined",size:"small",label:"",class:"ma-1 my-1"}),{default:withCtx(()=>[createVNode(VIcon,{start:"",color:"success"},{default:withCtx(()=>[createTextVNode(" mdi-check ")]),_:1}),createTextVNode(" "+toDisplayString$1(unref(_)(`licences.droits.${x.droit}`)),1)]),_:2},1040)]),default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(_)(`licences.dtails.droits.${x.droit}`)),1)]),_:1}))}}),_sfc_main$1f=defineComponent$1({__name:"JetonLimitationLicence",props:{limitation:{}},setup(t){const{useI18n:n}=_(),{t:_}=n();return(x,E)=>(openBlock(),createBlock(VTooltip,{location:"bottom"},{activator:withCtx(({props:S})=>[createVNode(VChip,mergeProps(S,{variant:"outlined",size:"small",label:"",class:"ma-1 my-1"}),{default:withCtx(()=>[createVNode(VIcon,{start:"",color:"error"},{default:withCtx(()=>[createTextVNode(" mdi-close ")]),_:1}),createTextVNode(" "+toDisplayString$1(unref(_)(`licences.limitations.${x.limitation}`)),1)]),_:2},1040)]),default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(_)(`licences.dtails.limitations.${x.limitation}`)),1)]),_:1}))}}),_sfc_main$1e=defineComponent$1({__name:"JetonConditionLicence",props:{condition:{}},setup(t){const{useI18n:n}=_(),{t:_}=n();return(x,E)=>(openBlock(),createBlock(VTooltip,{location:"bottom"},{activator:withCtx(({props:S})=>[createVNode(VChip,mergeProps(S,{variant:"outlined",size:"small",label:"",class:"ma-1 my-1"}),{default:withCtx(()=>[createVNode(VIcon,{start:"",color:"blue"},{default:withCtx(()=>[createTextVNode(" mdi-information-outline ")]),_:1}),createTextVNode(" "+toDisplayString$1(unref(_)(`licences.conditions.${x.condition}`)),1)]),_:2},1040)]),default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(_)(`licences.dtails.conditions.${x.condition}`)),1)]),_:1}))}}),VAlert$1="",VAlertTitle=createSimpleFunctional("v-alert-title"),allowedTypes=["success","info","warning","error"],makeVAlertProps=propsFactory({border:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["top","end","bottom","start"].includes(t)},borderColor:String,closable:Boolean,closeIcon:{type:IconValue,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:t=>allowedTypes.includes(t)},...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeLocationProps(),...makePositionProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"flat"})},"VAlert"),VAlert=genericComponent()({name:"VAlert",props:makeVAlertProps(),emits:{"click:close":t=>!0,"update:modelValue":t=>!0},setup(t,n){let{emit:_,slots:x}=n;const E=useProxiedModel(t,"modelValue"),S=computed(()=>{if(t.icon!==!1)return t.type?t.icon??`$${t.type}`:t.icon}),C=computed(()=>({color:t.color??t.type,variant:t.variant})),{themeClasses:T}=provideTheme(t),{colorClasses:B,colorStyles:A,variantClasses:I}=useVariant(C),{densityClasses:D}=useDensity(t),{dimensionStyles:M}=useDimension(t),{elevationClasses:V}=useElevation(t),{locationStyles:L}=useLocation(t),{positionClasses:F}=usePosition(t),{roundedClasses:j}=useRounded(t),{textColorClasses:U,textColorStyles:H}=useTextColor(toRef(t,"borderColor")),{t:Y}=useLocale(),Z=computed(()=>({"aria-label":Y(t.closeLabel),onClick(ne){E.value=!1,_("click:close",ne)}}));return()=>{const ne=!!(x.prepend||S.value),re=!!(x.title||t.title),X=!!(x.close||t.closable);return E.value&&createVNode(t.tag,{class:["v-alert",t.border&&{"v-alert--border":!!t.border,[`v-alert--border-${t.border===!0?"start":t.border}`]:!0},{"v-alert--prominent":t.prominent},T.value,B.value,D.value,V.value,F.value,j.value,I.value,t.class],style:[A.value,M.value,L.value,t.style],role:"alert"},{default:()=>[genOverlays(!1,"v-alert"),t.border&&createVNode("div",{key:"border",class:["v-alert__border",U.value],style:H.value},null),ne&&createVNode("div",{key:"prepend",class:"v-alert__prepend"},[x.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!S.value,defaults:{VIcon:{density:t.density,icon:S.value,size:t.prominent?44:28}}},x.prepend):createVNode(VIcon,{key:"prepend-icon",density:t.density,icon:S.value,size:t.prominent?44:28},null)]),createVNode("div",{class:"v-alert__content"},[re&&createVNode(VAlertTitle,{key:"title"},{default:()=>[x.title?.()??t.title]}),x.text?.()??t.text,x.default?.()]),x.append&&createVNode("div",{key:"append",class:"v-alert__append"},[x.append()]),X&&createVNode("div",{key:"close",class:"v-alert__close"},[x.close?createVNode(VDefaultsProvider,{key:"close-defaults",defaults:{VBtn:{icon:t.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[x.close?.({props:Z.value})]}):createVNode(VBtn,mergeProps({key:"close-btn",icon:t.closeIcon,size:"x-small",variant:"text"},Z.value),null)])]})}}}),_hoisted_1$y={class:"mt-3 mb-0"},_hoisted_2$p={key:0},_hoisted_3$f={key:1},_hoisted_4$7={class:"mb-0 text-h6"},_hoisted_5$6={key:1,class:"text--disabled"},_hoisted_6$6={class:"mb-0 text-h6"},_hoisted_7$2={key:3,class:"text--disabled"},_hoisted_8$2={class:"mb-0 text-h6"},_hoisted_9$2={key:5,class:"text--disabled"},_sfc_main$1d=defineComponent$1({__name:"DialogueLicence",props:{licence:{type:String,required:!1,default:void 0},permissionModifier:{default:!1,type:Boolean}},emits:["changerLicence"],setup(t,{emit:n}){const _=t,x=inject$1("constl"),{useI18n:E}=_(),{t:S}=E(),C=ref$1(!1),T=ref$1(_.licence);watchEffect(()=>{T.value=_.licence});const B=computed(()=>T.value!==_.licence),A=ref$1();enregistrercoute(x?.licences.suivreLicences({f:Z=>A.value=Z}));const I=computed(()=>A.value?Object.keys(A.value):[]),D=computed(()=>T.value?A.value?.[T.value]?.droits:void 0),M=computed(()=>T.value?A.value?.[T.value]?.conditions:void 0),V=computed(()=>T.value?A.value?.[T.value]?.limitations:void 0),L=Z=>S(`licences.info.${Z||"introuvable"}.nom`),F=Z=>S(`licences.info.${Z||"introuvable"}.abr`),j=Z=>{if(!Z)return;const ne=`licences.info.${Z}.lien`,re=S(ne);if(re!==ne)return re},U=Z=>{const ne=j(Z);ne&&ouvrirLien(ne)},H=()=>{T.value&&n("changerLicence",T.value),C.value=!1},Y=()=>{C.value=!1,T.value=_.licence};return(Z,ne)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":ne[3]||(ne[3]=re=>C.value=re),scrollable:"","max-width":"500"},{activator:withCtx(({props:re})=>[renderSlot(Z.$slots,"activator",normalizeProps(guardReactiveProps({props:re})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("licences.carte.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"small",onClick:ne[0]||(ne[0]=re=>C.value=!1)})]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VSelect,{modelValue:T.value,"onUpdate:modelValue":ne[1]||(ne[1]=re=>T.value=re),items:I.value,variant:"outlined",density:"compact",disabled:!t.permissionModifier},{item:withCtx(({item:re,props:X})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(X)),{title:withCtx(()=>[createVNode(VListItemTitle,{class:normalizeClass({"font-weight-bold":re.value===T.value})},{default:withCtx(()=>[createTextVNode(toDisplayString$1(L(re.value)),1)]),_:2},1032,["class"])]),subtitle:withCtx(()=>[createTextVNode(toDisplayString$1(F(re.value)),1)]),_:2},1040)]),selection:withCtx(({item:re})=>[createTextVNode(toDisplayString$1(F(re.value)),1)]),_:1},8,["modelValue","items","disabled"]),createBaseVNode("p",_hoisted_1$y,[createVNode(VAlert,{text:unref(S)("licences.avertissement"),type:"warning",variant:"outlined",density:"compact"},{default:withCtx(()=>[createBaseVNode("div",null,[createVNode(VBtn,{class:"mx-auto my-3",variant:"outlined",size:"small",disabled:!j(t.licence),onClick:ne[2]||(ne[2]=re=>U(t.licence))},{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode("mdi-scale-balance")]),_:1}),j(t.licence)?(openBlock(),createElementBlock("div",_hoisted_2$p,[createTextVNode(toDisplayString$1(unref(S)("licences.lire"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-open-in-new")]),_:1})])):(openBlock(),createElementBlock("div",_hoisted_3$f,toDisplayString$1(unref(S)("licences.aucunLien")),1))]),_:1},8,["disabled"])])]),_:1},8,["text"])]),createVNode(VDivider),createBaseVNode("p",_hoisted_4$7,toDisplayString$1(unref(S)("licences.droits.sousTitre")),1),D.value?D.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_5$6,toDisplayString$1(unref(S)("licences.droits.aucune")),1)):(openBlock(),createBlock(unref(VSkeletonLoader),{key:0,type:"chip@3"})),(openBlock(!0),createElementBlock(Fragment,null,renderList(D.value,re=>(openBlock(),createBlock(_sfc_main$1g,{key:re,droit:re},null,8,["droit"]))),128)),createBaseVNode("p",_hoisted_6$6,toDisplayString$1(unref(S)("licences.conditions.sousTitre")),1),M.value?M.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_7$2,toDisplayString$1(unref(S)("licences.conditions.aucune")),1)):(openBlock(),createBlock(unref(VSkeletonLoader),{key:2,type:"chip@3"})),(openBlock(!0),createElementBlock(Fragment,null,renderList(M.value,re=>(openBlock(),createBlock(_sfc_main$1e,{key:re,condition:re},null,8,["condition"]))),128)),createBaseVNode("p",_hoisted_8$2,toDisplayString$1(unref(S)("licences.limitations.sousTitre")),1),V.value?V.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_9$2,toDisplayString$1(unref(S)("licences.limitations.aucune")),1)):(openBlock(),createBlock(unref(VSkeletonLoader),{key:4,type:"chip@3"})),(openBlock(!0),createElementBlock(Fragment,null,renderList(V.value,re=>(openBlock(),createBlock(_sfc_main$1f,{key:re,limitation:re},null,8,["limitation"]))),128))]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:Y},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1}),createVNode(VBtn,{color:"primary",variant:"outlined",disabled:!B.value,onClick:H},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["modelValue"]))}}),_sfc_main$1c=defineComponent$1({__name:"IcneQualitBd",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),x=ref$1();enregistrercoute(_?.bds.suivreQualitBd({idBd:n.id,f:S=>x.value=S}));const E=computed(()=>x.value?.total);return(S,C)=>(openBlock(),createBlock(VProgressCircular,{rotate:E.value?270:void 0,value:E.value?E.value*100:0,indeterminate:!E.value,color:E.value?unref(couleurScore)(E.value).couleur:"grey lighten-2",size:15,width:3},null,8,["rotate","value","indeterminate","color"]))}}),_hoisted_1$x={class:"ms-2"},_sfc_main$1b=defineComponent$1({__name:"TexteQualitBd",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),S=ref$1();enregistrercoute(_?.bds.suivreQualitBd({idBd:n.id,f:T=>S.value=T}));const C=computed(()=>S.value?.total);return(T,B)=>(openBlock(),createElementBlock("span",_hoisted_1$x,[createTextVNode(toDisplayString$1(unref(E)("bds.qualit"))+": ",1),createBaseVNode("span",{style:normalizeStyle(`color:${unref(couleurScore)(C.value?C.value:null).couleur}`),class:"font-weight-bold"},toDisplayString$1(C.value?unref(E)("bds.note."+unref(couleurScore)(C.value).note):unref(E)("communs.pointInterrogation")),5)]))}}),_sfc_main$1a=defineComponent$1({__name:"JetonQualitBd",props:{id:{}},setup(t){return(n,_)=>(openBlock(),createBlock(VChip,{class:"mb-2 me-2",variant:"outlined",label:""},{prepend:withCtx(()=>[createVNode(_sfc_main$1c,{id:n.id},null,8,["id"])]),default:withCtx(()=>[createVNode(_sfc_main$1b,{id:n.id},null,8,["id"])]),_:1}))}}),_hoisted_1$w={key:1},_hoisted_2$o={key:2},_hoisted_3$e={class:"text-center"},_sfc_main$19=defineComponent$1({__name:"CarteBd",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),S=ref$1();enregistrercoute(_?.suivrePermission({idObjet:n.id,f:Y=>S.value=Y}));const C=ref$1({});enregistrercoute(_?.bds.suivreNomsBd({idBd:n.id,f:Y=>C.value=Y}));const T=async Y=>{const{Effacer:Z,Ajouter:ne}=ajusterTexteTraductible({anciennes:C.value,nouvelles:Y});for(const re of Z)await _?.bds.effacerNomBd({idBd:n.id,langue:re});await _?.bds.sauvegarderNomsBd({idBd:n.id,noms:ne})},B=ref$1({});enregistrercoute(_?.bds.suivreNomsBd({idBd:n.id,f:Y=>B.value=Y}));const A=async Y=>{const{Effacer:Z,Ajouter:ne}=ajusterTexteTraductible({anciennes:B.value,nouvelles:Y});for(const re of Z)await _?.bds.effacerDescriptionBd({idBd:n.id,langue:re});await _?.bds.sauvegarderDescriptionsBd({idBd:n.id,descriptions:ne})},I=ref$1();enregistrercoute(_?.rseau?.suivreAuteursBd({idBd:n.id,f:Y=>I.value=Y}));const D=ref$1();enregistrercoute(_?.bds.suivreLicenceBd({idBd:n.id,f:Y=>D.value=Y}));const M=async Y=>{await _?.bds.changerLicenceBd({idBd:n.id,licence:Y})},V=ref$1();enregistrercoute(_?.bds.suivreVariablesBd({idBd:n.id,f:Y=>V.value=Y}));const L=ref$1();enregistrercoute(_?.bds.suivreMotsClefsBd({idBd:n.id,f:Y=>L.value=Y}));const F=async Y=>{const Z=Y.filter(re=>!L.value?.includes(re)),ne=L.value?.filter(re=>!Y.includes(re))||[];await _?.bds.ajouterMotsClefsBd({idBd:n.id,idsMotsClefs:Z}),await Promise.all(ne.map(re=>_?.bds.effacerMotClefBd({idBd:n.id,idMotClef:re})))},j=ref$1();enregistrercoute(_?.bds.suivreTableauxBd({idBd:n.id,f:Y=>j.value=Y.sort((Z,ne)=>Z.position<ne.position?-1:1)}));const U=computed(()=>{const Y=j.value;return Y?.sort((Z,ne)=>Z.position&&ne.position?Z.position>ne.position?1:-1:0),Y||[]}),H=async()=>{await _?.bds.effacerBd({idBd:n.id})};return(Y,Z)=>(openBlock(),createBlock(_sfc_main$1B,{id:Y.id,noms:C.value,descriptions:B.value,auteurs:I.value,"fichiers-epinglables":!0,onAjusterNoms:T,onAjusterDescriptions:A,onEffacer:H},{activator:withCtx(({props:ne})=>[renderSlot(Y.$slots,"activator",normalizeProps(guardReactiveProps({props:ne})))]),default:withCtx(()=>[createVNode(_sfc_main$1K,{titre:unref(E)("bds.carteBd.infos"),"en-attente":!1},null,8,["titre"]),createVNode(_sfc_main$1d,{licence:D.value,"permission-modifier":!!S.value,onChangerLicence:M},{activator:withCtx(({props:ne})=>[createVNode(_sfc_main$1o,mergeProps(ne,{licence:D.value}),null,16,["licence"])]),_:1},8,["licence","permission-modifier"]),createVNode(_sfc_main$1a,{id:Y.id},null,8,["id"]),createVNode(_sfc_main$1i,{id:Y.id},null,8,["id"]),createVNode(_sfc_main$1K,{titre:unref(E)("bds.carteBd.variables"),"en-attente":!V.value},null,8,["titre","en-attente"]),createVNode(_sfc_main$1Q,{"n-max":5,items:V.value},{jeton:withCtx(({id:ne})=>[createVNode(_sfc_main$1z,{id:ne},{activator:withCtx(({props:re})=>[createVNode(_sfc_main$1P,mergeProps(re,{id:ne}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:ne})=>[createVNode(_sfc_main$1z,{id:ne},{activator:withCtx(({props:re})=>[createVNode(_sfc_main$1y,mergeProps(re,{id:ne}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),createVNode(_sfc_main$1K,{titre:unref(E)("bds.carteBd.motsClefs"),"en-attente":!L.value},null,8,["titre","en-attente"]),createVNode(_sfc_main$1Q,{"n-max":5,items:L.value},{jeton:withCtx(({id:ne})=>[createVNode(_sfc_main$1h,{id:ne},{activator:withCtx(({props:re})=>[createVNode(_sfc_main$1n,mergeProps(re,{id:ne}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:ne})=>[createVNode(_sfc_main$1h,{id:ne},{activator:withCtx(({props:re})=>[createVNode(_sfc_main$1m,mergeProps(re,{id:ne}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),S.value&&L.value?(openBlock(),createBlock(_sfc_main$1j,{key:0,originaux:L.value,onSauvegarder:Z[0]||(Z[0]=ne=>F(ne))},null,8,["originaux"])):createCommentVNode("",!0),createVNode(_sfc_main$1K,{titre:unref(E)("bds.carteBd.tableaux"),"en-attente":!j.value},null,8,["titre","en-attente"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(U.value,ne=>(openBlock(),createBlock(_sfc_main$1l,{id:ne.id,key:ne.clef},null,8,["id"]))),128)),j.value?j.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_2$o,toDisplayString$1(unref(E)("bds.carteBd.aucunTableaux")),1)):(openBlock(),createElementBlock("p",_hoisted_1$w,toDisplayString$1(unref(E)("bds.carteBd.attenteTableaux")),1)),createVNode(VDivider,{class:"mb-2"}),createBaseVNode("div",_hoisted_3$e,[createVNode(VBtn,{variant:"outlined","append-icon":"mdi-open-in-new",onClick:Z[1]||(Z[1]=ne=>Y.$router.push(encodeURI(`/donnes/bd/${encodeURIComponent(Y.id)}`)))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("bds.carteBd.ouvrirBd")),1)]),_:1})])]),_:3},8,["id","noms","descriptions","auteurs"]))}}),_sfc_main$18=defineComponent$1({__name:"MenuContactMembre",props:{type:{},contact:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),{formatterNumro:E}=utiliserNumration(),S=computed(()=>obtIcneContact({type:n.type})),C=computed(()=>["siteInternet","tlgramme","tlphone","courriel","whatsapp"].includes(n.type)),T=async()=>{await copier(n.contact)},B=E(n.contact,"latin"),A=()=>{switch(n.type){case"siteInternet":ouvrirLien(n.contact);break;case"courriel":ouvrirLien(`mailto://${n.contact}`);break;case"whatsapp":{const I=x("membres.menuContact.messageSalut");ouvrirLien(`whatsapp://send?text=${I}&phone=${B.value}`);break}case"tlphone":{ouvrirLien(`tel://${n.contact}`);break}case"tlgrame":{ouvrirLien(`tg://resolve?phone=${B.value}`);break}}};return(I,D)=>(openBlock(),createBlock(VMenu,null,{activator:withCtx(({props:M})=>[renderSlot(I.$slots,"activator",normalizeProps(guardReactiveProps({props:M})))]),default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-content-copy",onClick:T},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("membres.menuContact.copier")),1)]),_:1})]),_:1}),C.value?(openBlock(),createBlock(VListItem,{key:0,"prepend-icon":S.value,onClick:A},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("membres.menuContact.contacter")),1)]),_:1})]),_:1},8,["prepend-icon"])):createCommentVNode("",!0)]),_:1})]),_:3}))}}),_hoisted_1$v={class:"mx-4"},_hoisted_2$n={key:1},_hoisted_3$d={key:2,class:"text-disabled"},_hoisted_4$6={key:4,class:"text-disabled"},_hoisted_5$5={key:6,class:"text-disabled"},_hoisted_6$5={key:8,class:"text-disabled"},_sfc_main$17=defineComponent$1({__name:"CarteMembre",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{mdAndUp:S}=useDisplay(),C=ref$1(!1),{traduireNom:T}=utiliserLangues(),B=ref$1({}),A=T(B);enregistrercoute(_?.profil.suivreNoms({f:L=>B.value=L}));const I=ref$1();enregistrercoute(_?.profil.suivreContacts({f:L=>I.value=L}));const D=ref$1();enregistrercoute(_?.rseau?.suivreBdsMembre({idCompte:n.id,f:L=>D.value=L}));const M=ref$1();enregistrercoute(_?.rseau?.suivreProjetsMembre({idCompte:n.id,f:L=>M.value=L}));const V=ref$1();return enregistrercoute(_?.rseau?.suivreNuesMembre({idCompte:n.id,f:L=>V.value=L})),(L,F)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":F[1]||(F[1]=j=>C.value=j),"max-width":unref(S)?500:300},{activator:withCtx(({props:j})=>[renderSlot(L.$slots,"activator",normalizeProps(guardReactiveProps({props:j})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createVNode(_sfc_main$24,{id:L.id},null,8,["id"]),createBaseVNode("span",_hoisted_1$v,toDisplayString$1(unref(A)||unref(E)("communs.anonyme")),1),unref(S)?(openBlock(),createBlock(_sfc_main$1p,{key:0,id:L.id,"style-jeton":"jeton"},null,8,["id"])):createCommentVNode("",!0)]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[unref(S)?createCommentVNode("",!0):(openBlock(),createBlock(_sfc_main$1p,{key:0,id:L.id,"style-jeton":"jeton"},null,8,["id"])),createVNode(_sfc_main$1K,{titre:unref(E)("membres.contacts"),"en-attente":!I.value},null,8,["titre","en-attente"]),I.value?(openBlock(),createElementBlock("span",_hoisted_2$n,[(openBlock(!0),createElementBlock(Fragment,null,renderList(I.value,({type:j,contact:U})=>(openBlock(),createBlock(_sfc_main$18,{key:j,type:j,contact:U},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$1J,mergeProps(H,{type:j,contact:U,size:"small"}),null,16,["type","contact"])]),_:2},1032,["type","contact"]))),128))])):(openBlock(),createElementBlock("p",_hoisted_3$d,toDisplayString$1(unref(E)("membres.aucunContact")),1)),createVNode(_sfc_main$1K,{titre:unref(E)("membres.bds"),"en-attente":!D.value},null,8,["titre","en-attente"]),D.value?.length?(openBlock(),createBlock(_sfc_main$1Q,{key:3,items:D.value,"n-max":2},{jeton:withCtx(({id:j})=>[createVNode(_sfc_main$19,{id:j},{activator:withCtx(({props:U})=>[createVNode(_sfc_main$1w,mergeProps(U,{id:j}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:j})=>[createVNode(_sfc_main$19,{id:j},{activator:withCtx(({props:U})=>[createVNode(_sfc_main$1x,mergeProps(U,{id:j,"montrer-anonymes":!0}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"])):(openBlock(),createElementBlock("p",_hoisted_4$6,toDisplayString$1(unref(E)("membres.aucuneBd")),1)),createVNode(_sfc_main$1K,{titre:unref(E)("membres.projets"),"en-attente":!M.value},null,8,["titre","en-attente"]),M.value?.length?(openBlock(),createBlock(_sfc_main$1Q,{key:5,items:M.value,"n-max":5},{jeton:withCtx(({id:j})=>[createVNode(_sfc_main$1v,{id:j},null,8,["id"])]),itemListe:withCtx(({id:j})=>[createVNode(_sfc_main$1u,{id:j,"montrer-anonymes":!0},null,8,["id"])]),_:1},8,["items"])):(openBlock(),createElementBlock("p",_hoisted_5$5,toDisplayString$1(unref(E)("membres.aucunProjet")),1)),createVNode(_sfc_main$1K,{titre:unref(E)("membres.nues"),"en-attente":!V.value},null,8,["titre","en-attente"]),V.value?.length?(openBlock(),createBlock(_sfc_main$1Q,{key:7,items:V.value,"n-max":5},{jeton:withCtx(({id:j})=>[createVNode(_sfc_main$1t,{id:j},null,8,["id"])]),itemListe:withCtx(({id:j})=>[createVNode(_sfc_main$1s,{id:j,"montrer-anonymes":!0},null,8,["id"])]),_:1},8,["items"])):(openBlock(),createElementBlock("p",_hoisted_6$5,toDisplayString$1(unref(E)("membres.aucuneNue")),1))]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:F[0]||(F[0]=j=>C.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_sfc_main$16=defineComponent$1({__name:"ItemSuggestionTraduction",props:{suggestion:{},compte:{}},emits:["utiliser","effacer"],setup(t,{emit:n}){const _=t,x=inject$1("constl"),E=()=>{n("utiliser")},S=()=>{n("effacer")},C=ref$1();enregistrercoute(x?.suivreIdCompte({f:B=>C.value=B}));const T=computed(()=>_.compte===C.value);return(B,A)=>(openBlock(),createBlock(VListItem,{lines:"three",onClick:E},{prepend:withCtx(()=>[createVNode(_sfc_main$17,{id:B.compte},{activator:withCtx(({props:I})=>[createVNode(_sfc_main$24,mergeProps(I,{id:B.compte}),null,16,["id"])]),_:1},8,["id"])]),default:withCtx(()=>[createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(B.suggestion..?.toLocaleDateString()),1)]),_:1}),createVNode(VDivider,{class:"my-2"}),createTextVNode(" "+toDisplayString$1(B.suggestion...repeat(52))+" ",1),T.value?(openBlock(),createBlock(VListItemAction,{key:0},{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{icon:"",variant:"flat",size:"small",onClick:withModifiers(S,["stop"])},{default:withCtx(()=>[createVNode(VIcon,{color:"error"},{default:withCtx(()=>[createTextVNode("mdi-delete")]),_:1})]),_:1},8,["onClick"])]),_:1})):createCommentVNode("",!0)]),_:1}))}}),VSwitch$1="",makeVSwitchProps=propsFactory({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...makeVInputProps(),...makeVSelectionControlProps()},"VSwitch"),VSwitch=genericComponent()({name:"VSwitch",inheritAttrs:!1,props:makeVSwitchProps(),emits:{"update:focused":t=>!0,"update:modelValue":()=>!0,"update:indeterminate":t=>!0},setup(t,n){let{attrs:_,slots:x}=n;const E=useProxiedModel(t,"indeterminate"),S=useProxiedModel(t,"modelValue"),{loaderClasses:C}=useLoader(t),{isFocused:T,focus:B,blur:A}=useFocus(t),I=ref$1(),D=computed(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),M=getUid(),V=computed(()=>t.id||`switch-${M}`);function L(){E.value&&(E.value=!1)}function F(j){j.stopPropagation(),j.preventDefault(),I.value?.input?.click()}return useRender(()=>{const[j,U]=filterInputAttrs(_),[H,Y]=VInput.filterProps(t),[Z,ne]=VSelectionControl.filterProps(t);return createVNode(VInput,mergeProps({class:["v-switch",{"v-switch--inset":t.inset},{"v-switch--indeterminate":E.value},C.value,t.class],style:t.style},j,H,{id:V.value,focused:T.value}),{...x,default:re=>{let{id:X,messagesId:ce,isDisabled:ue,isReadonly:_e,isValid:ye}=re;return createVNode(VSelectionControl,mergeProps({ref:I},Z,{modelValue:S.value,"onUpdate:modelValue":[ie=>S.value=ie,L],id:X.value,"aria-describedby":ce.value,type:"checkbox","aria-checked":E.value?"mixed":void 0,disabled:ue.value,readonly:_e.value,onFocus:B,onBlur:A},U),{...x,default:()=>createVNode("div",{class:"v-switch__track",onClick:F},null),input:ie=>{let{inputNode:W,icon:O}=ie;return createVNode(Fragment,null,[W,createVNode("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":O||t.loading}]},[createVNode(VScaleTransition,null,{default:()=>[t.loading?createVNode(LoaderSlot,{name:"v-switch",active:!0,color:ye.value===!1?void 0:D.value},{default:z=>x.loader?x.loader(z):createVNode(VProgressCircular,{active:z.isActive,color:z.color,indeterminate:!0,size:"16",width:"2"},null)}):O&&createVNode(VIcon,{key:O,icon:O,size:"x-small"},null)]})])])}})}})}),{}}}),VTextarea$1="",makeVTextareaProps=propsFactory({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseFloat(t))},maxRows:{type:[Number,String],validator:t=>!isNaN(parseFloat(t))},suffix:String,modelModifiers:Object,...makeVInputProps(),...makeVFieldProps()},"VTextarea"),VTextarea=genericComponent()({name:"VTextarea",directives:{Intersect:Intersect$1},inheritAttrs:!1,props:makeVTextareaProps(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,n){let{attrs:_,emit:x,slots:E}=n;const S=useProxiedModel(t,"modelValue"),{isFocused:C,focus:T,blur:B}=useFocus(t),A=computed(()=>typeof t.counterValue=="function"?t.counterValue(S.value):(S.value||"").toString().length),I=computed(()=>{if(_.maxlength)return _.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter});function D(ye,ie){!t.autofocus||!ye||ie[0].target?.focus?.()}const M=ref$1(),V=ref$1(),L=shallowRef(""),F=ref$1(),j=computed(()=>t.persistentPlaceholder||C.value||t.active);function U(){F.value!==document.activeElement&&F.value?.focus(),C.value||T()}function H(ye){U(),x("click:control",ye)}function Y(ye){x("mousedown:control",ye)}function Z(ye){ye.stopPropagation(),U(),nextTick$2(()=>{S.value="",callEvent(t["onClick:clear"],ye)})}function ne(ye){const ie=ye.target;if(S.value=ie.value,t.modelModifiers?.trim){const W=[ie.selectionStart,ie.selectionEnd];nextTick$2(()=>{ie.selectionStart=W[0],ie.selectionEnd=W[1]})}}const re=ref$1(),X=ref$1(+t.rows),ce=computed(()=>["plain","underlined"].includes(t.variant));watchEffect(()=>{t.autoGrow||(X.value=+t.rows)});function ue(){t.autoGrow&&nextTick$2(()=>{if(!re.value||!V.value)return;const ye=getComputedStyle(re.value),ie=getComputedStyle(V.value.$el),W=parseFloat(ye.getPropertyValue("--v-field-padding-top"))+parseFloat(ye.getPropertyValue("--v-input-padding-top"))+parseFloat(ye.getPropertyValue("--v-field-padding-bottom")),O=re.value.scrollHeight,z=parseFloat(ye.lineHeight),J=Math.max(parseFloat(t.rows)*z+W,parseFloat(ie.getPropertyValue("--v-input-control-height"))),ee=parseFloat(t.maxRows)*z+W||1/0,ae=clamp(O??0,J,ee);X.value=Math.floor((ae-W)/z),L.value=convertToUnit(ae)})}onMounted(ue),watch(S,ue),watch(()=>t.rows,ue),watch(()=>t.maxRows,ue),watch(()=>t.density,ue);let _e;return watch(re,ye=>{ye?(_e=new ResizeObserver(ue),_e.observe(re.value)):_e?.disconnect()}),onBeforeUnmount(()=>{_e?.disconnect()}),useRender(()=>{const ye=!!(E.counter||t.counter||t.counterValue),ie=!!(ye||E.details),[W,O]=filterInputAttrs(_),[{modelValue:z,...J}]=VInput.filterProps(t),[ee]=filterFieldProps(t);return createVNode(VInput,mergeProps({ref:M,modelValue:S.value,"onUpdate:modelValue":ae=>S.value=ae,class:["v-textarea v-text-field",{"v-textarea--prefixed":t.prefix,"v-textarea--suffixed":t.suffix,"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-textarea--auto-grow":t.autoGrow,"v-textarea--no-resize":t.noResize||t.autoGrow,"v-text-field--plain-underlined":ce.value},t.class],style:t.style},W,J,{centerAffix:X.value===1&&!ce.value,focused:C.value}),{...E,default:ae=>{let{isDisabled:oe,isDirty:se,isReadonly:G,isValid:q}=ae;return createVNode(VField,mergeProps({ref:V,style:{"--v-textarea-control-height":L.value},onClick:H,onMousedown:Y,"onClick:clear":Z,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"]},ee,{active:j.value||se.value,centerAffix:X.value===1&&!ce.value,dirty:se.value||t.dirty,disabled:oe.value,focused:C.value,error:q.value===!1}),{...E,default:te=>{let{props:{class:fe,...he}}=te;return createVNode(Fragment,null,[t.prefix&&createVNode("span",{class:"v-text-field__prefix"},[t.prefix]),withDirectives(createVNode("textarea",mergeProps({ref:F,class:fe,value:S.value,onInput:ne,autofocus:t.autofocus,readonly:G.value,disabled:oe.value,placeholder:t.placeholder,rows:t.rows,name:t.name,onFocus:U,onBlur:B},he,O),null),[[resolveDirective("intersect"),{handler:D},null,{once:!0}]]),t.autoGrow&&withDirectives(createVNode("textarea",{class:[fe,"v-textarea__sizer"],"onUpdate:modelValue":Ee=>S.value=Ee,ref:re,readonly:!0,"aria-hidden":"true"},null),[[vModelText,S.value]]),t.suffix&&createVNode("span",{class:"v-text-field__suffix"},[t.suffix])])}})},details:ie?ae=>createVNode(Fragment,null,[E.details?.(ae),ye&&createVNode(Fragment,null,[createVNode("span",null,null),createVNode(VCounter,{active:t.persistentCounter||C.value,value:A.value,max:I.value},E.counter)])]):void 0})}),forwardRefs({},M,V,F)}}),_hoisted_1$u={key:0},_hoisted_2$m={class:"text-right"},_hoisted_3$c={key:1,class:"text-center"},_hoisted_4$5=["src","width"],_hoisted_5$4=createBaseVNode("p",{class:"my-2"},"Pour commencer, choisissez un message  traduire.",-1),_hoisted_6$4={class:"text-center"},_hoisted_7$1={class:"text-h4"},_hoisted_8$1={key:0},_hoisted_9$1={key:1,class:"text-center"},_hoisted_10$1=["src","width"],_hoisted_11$1=createBaseVNode("p",{class:"my-2"}," Nous n'avons trouv aucune suggestion communautaire pour ce message. ",-1),_sfc_main$15=defineComponent$1({__name:"ContribuerTraductions",setup(t){const n=inject$1("constl"),_=inject$1(""),{mdAndUp:x}=useDisplay(),{langue:E,languesAlternatives:S}=utiliserLangues(),{formatterChiffre:C}=utiliserNumration(),{useI18n:T,__:B,_:A,_:I,_:D}=_(),{t:M}=T(),{codesLanguesDisponibles:V}=B(),L=ref$1(!1),F=ref$1();onMounted(async()=>{F.value=await n?.obtIdCompte()});const j=ref$1(E.value),U=ref$1(S.value[0]),H=ref$1(!1),Y=ref$1(""),Z=()=>{const ge=U.value;U.value=j.value,j.value=ge},{__:ne}=_(),{_:re}=ne({:U,:""}),X=computed(()=>re.value?re.value./re.value.:0),ce=computed(()=>re.value?re.value./re.value.:0),{:ue}=A(),_e=computed(()=>{if(!ue.value)return;let ge=[];return H.value?ge=ue.value:ge=ue.value?.filter(Se=>!W.value[Se]),Y.value&&(ge=ge.filter(Se=>Se.includes(Y.value)||Object.values(ie.value[Se]||{}).some(me=>me.includes(Y.value)))),ge}),ye=ref$1();watch(ye,()=>{ee.value=""});const{_:ie}=I(),W=computed(()=>{const{value:ge}=U;return ge&&Object.fromEntries(Object.keys(ie.value).map(Se=>[Se,ie.value[Se][ge]]))||{}}),O=computed(()=>{if(ye.value)return W.value[ye.value]}),{obtImageDco:z}=utiliserImagesDco(),J=z("message"),ee=ref$1(),ae=computed(()=>{if(ye.value)return ie.value[ye.value]?.[j.value]}),oe=ref$1(!1),se=async()=>{oe.value=!0,ye.value&&ee.value&&U.value&&await _?._({:ye.value,:ee.value.trim(),_:U.value,_:j.value,_:ae.value}),ee.value="",oe.value=!1},G=z("vide"),{:q}=D(),te=computed(()=>{const{value:ge}=U;return ge&&q.value.filter(Se=>Se.._===ge&&Se..===ye.value)||[]}),fe=async ge=>{await _?._({:ge})},he=computed(()=>te.value.length),Ee=C(he),we=ref$1();enregistrercoute(_?._({:ge=>{ye.value&&(we.value=ge[ye.value])}}));const xe=computed(()=>{if(we.value)return Object.entries(we.value).map(([ge,Se])=>({lng:ge,traduc:Se}))}),$e=C(computed(()=>xe.value?xe.value.length:0));return(ge,Se)=>(openBlock(),createBlock(VDialog,{modelValue:L.value,"onUpdate:modelValue":Se[13]||(Se[13]=me=>L.value=me)},{activator:withCtx(({props:me})=>[renderSlot(ge.$slots,"activator",normalizeProps(guardReactiveProps({props:me})))]),default:withCtx(()=>[createTextVNode(" x "),createVNode(VCard,{class:"mx-auto","min-width":unref(x)?1e3:void 0},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(M)("languesInterface.dialogueContribuer.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"outlined",onClick:Se[0]||(Se[0]=me=>L.value=!1)})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(M)("languesInterface.dialogueContribuer.sousTitre")),1)]),_:1}),createVNode(VDivider,{class:"my-3"})]),_:1}),createVNode(VCardText,{class:"overflow-auto"},{default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:unref(x)?4:12},{default:withCtx(()=>[createVNode(VSelect,{modelValue:j.value,"onUpdate:modelValue":Se[1]||(Se[1]=me=>j.value=me),variant:"outlined","hide-details":"",items:unref(V),label:unref(M)("languesInterface.dialogueContribuer.langueSource")},{item:withCtx(({item:me,props:Be})=>[createVNode(_sfc_main$1T,mergeProps(Be,{code:me.value,selectionnee:!1}),null,16,["code"])]),selection:withCtx(({item:me})=>[createVNode(_sfc_main$1S,{code:me.value},null,8,["code"])]),_:1},8,["modelValue","items","label"])]),_:1},8,["cols"]),unref(x)?(openBlock(),createBlock(VCol,{key:0,cols:1,class:"text-center"},{default:withCtx(()=>[createVNode(VBtn,{icon:"mdi-swap-horizontal",variant:"flat",onClick:Se[2]||(Se[2]=()=>Z())})]),_:1})):createCommentVNode("",!0),createVNode(VCol,{cols:unref(x)?4:12},{default:withCtx(()=>[createVNode(VSelect,{modelValue:U.value,"onUpdate:modelValue":Se[3]||(Se[3]=me=>U.value=me),variant:"outlined","hide-details":"",items:unref(V),label:unref(M)("languesInterface.dialogueContribuer.langueCible")},{item:withCtx(({item:me,props:Be})=>[createVNode(_sfc_main$1T,mergeProps(Be,{code:me.value,selectionnee:!1}),null,16,["code"])]),selection:withCtx(({item:me})=>[createVNode(_sfc_main$1S,{code:me.value},null,8,["code"])]),_:1},8,["modelValue","items","label"])]),_:1},8,["cols"]),createVNode(VCol,{cols:unref(x)?2:12},{default:withCtx(()=>[createVNode(VSwitch,{modelValue:H.value,"onUpdate:modelValue":Se[4]||(Se[4]=me=>H.value=me),color:"primary","hide-details":"",label:unref(M)("languesInterface.dialogueContribuer.montrerTraduites")},null,8,["modelValue","label"])]),_:1},8,["cols"])]),_:1}),createVNode(VProgressLinear,{absolute:!unref(x),class:normalizeClass({"my-3":unref(x)}),color:"primary","model-value":X.value*100,"buffer-value":(X.value+ce.value)*100},null,8,["absolute","class","model-value","buffer-value"]),createVNode(VRow,{class:"fill-height"},{default:withCtx(()=>[createVNode(VCol,{cols:unref(x)?3:12},{default:withCtx(()=>[unref(x)?(openBlock(),createBlock(VList,{key:0},{default:withCtx(()=>[createVNode(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createVNode(VTextField,{modelValue:Y.value,"onUpdate:modelValue":Se[5]||(Se[5]=me=>Y.value=me),variant:"outlined",label:"Rechercher","hide-details":"",clearable:"","prepend-inner-icon":"mdi-magnify"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0),unref(x)?(openBlock(),createBlock(VList,{key:1,"max-height":"350px"},{default:withCtx(()=>[createVNode(VFadeTransition,{group:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(_e.value,me=>(openBlock(),createBlock(_sfc_main$1R,{key:me,actif:me===ye.value,clef:me,"traduction-approuvee":unref(ie)[me]?.[U.value],"traduction-langue-source":unref(ie)[me]?.[j.value],suggestions:unref(q).filter(Be=>Be..===me&&Be.._===U.value),onClick:Be=>ye.value=me===ye.value?void 0:me},null,8,["actif","clef","traduction-approuvee","traduction-langue-source","suggestions","onClick"]))),128))]),_:1})]),_:1})):(openBlock(),createBlock(VSelect,{key:2,modelValue:ye.value,"onUpdate:modelValue":Se[6]||(Se[6]=me=>ye.value=me),items:_e.value,label:"Message",variant:"outlined"},{item:withCtx(({item:me,props:Be})=>[createVNode(VListItem,mergeProps(Be,{active:me.value===ye.value}),{title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(ie)[me.value][j.value]||"[Aucune traduction]"),1)]),subtitle:withCtx(()=>[createTextVNode(toDisplayString$1(me.value),1)]),_:2},1040,["active"])]),selection:withCtx(({item:me})=>[createTextVNode(toDisplayString$1(unref(couper)(unref(ie)[me.value][j.value]||me.value,20,unref(M)("communs.troisPetitsPoints"))),1)]),_:1},8,["modelValue","items"]))]),_:1},8,["cols"]),createVNode(VCol,{cols:unref(x)?ye.value?5:9:12,class:"pt-6"},{default:withCtx(()=>[ye.value?(openBlock(),createElementBlock("div",_hoisted_1$u,[createVNode(VTextarea,{modelValue:ee.value,"onUpdate:modelValue":Se[7]||(Se[7]=me=>ee.value=me),label:"Suggrez une traduction ici","no-resize":"",variant:"outlined"},null,8,["modelValue"]),createBaseVNode("div",_hoisted_2$m,[createVNode(VBtn,{class:"mx-2",color:"primary",variant:"outlined",disabled:!ee.value,loading:oe.value,onClick:Se[8]||(Se[8]=()=>se())},{default:withCtx(()=>[createTextVNode(" Suggrer "),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-upload")]),_:1})]),_:1},8,["disabled","loading"]),createVNode(VBtn,{class:"ml-2",variant:"outlined",disabled:!ee.value||oe.value,onClick:Se[9]||(Se[9]=me=>ee.value="")},{default:withCtx(()=>[createTextVNode(" Effacer "),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1},8,["disabled"])]),createVNode(VTextarea,{modelValue:ae.value,"onUpdate:modelValue":Se[10]||(Se[10]=me=>ae.value=me),class:"mt-4","append-inner-icon":"mdi-content-copy",label:"Text original",readonly:"","no-resize":"",variant:"outlined","onClick:appendInner":Se[11]||(Se[11]=me=>ee.value=ae.value)},null,8,["modelValue"])])):(openBlock(),createElementBlock("div",_hoisted_3$c,[createBaseVNode("img",{src:unref(J),contain:"",width:unref(x)?400:250},null,8,_hoisted_4$5),_hoisted_5$4]))]),_:1},8,["cols"]),ye.value?(openBlock(),createBlock(VCol,{key:0,cols:unref(x)?4:12,class:"pt-6"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_6$4,[createBaseVNode("h2",_hoisted_7$1,toDisplayString$1(unref(M)("languesInterface.dialogueContribuer.titreSuggestions")),1)]),te.value.length||xe.value?.length?(openBlock(),createElementBlock("div",_hoisted_8$1,[createVNode(VList,{"max-height":"350px"},{default:withCtx(()=>[O.value?(openBlock(),createBlock(VListItem,{key:0,onClick:Se[12]||(Se[12]=me=>ee.value=O.value)},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode("   ")]),_:1}),createTextVNode(" "+toDisplayString$1(O.value),1)]),_:1})):createCommentVNode("",!0),te.value.length?(openBlock(),createBlock(VListGroup,{key:1},{activator:withCtx(({props:me})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(me)),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode("   "),createVNode(VAvatar,{class:"mx-2",color:"primary",size:"20"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(Ee)),1)]),_:1})]),_:1})]),_:2},1040)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(te.value,me=>(openBlock(),createBlock(_sfc_main$16,{key:me.,suggestion:me,compte:me.,onUtiliser:Be=>ee.value=me..,onEffacer:Be=>fe(me.)},null,8,["suggestion","compte","onUtiliser","onEffacer"]))),128))]),_:1})):createCommentVNode("",!0),createVNode(VListGroup,null,{activator:withCtx(({props:me})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(me)),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode("   "),createVNode(VAvatar,{class:"mx-2",color:"primary",size:"20"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(Ee)),1)]),_:1})]),_:1})]),_:2},1040)]),_:1}),createVNode(VListGroup,null,{activator:withCtx(({props:me})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(me)),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode("   "),createVNode(VAvatar,{class:"mx-2",color:"primary",size:"20"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref($e)),1)]),_:1})]),_:1})]),_:2},1040)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(xe.value,({lng:me,traduc:Be})=>(openBlock(),createBlock(VListItem,{key:me},{default:withCtx(()=>[createTextVNode(toDisplayString$1(Be)+" ",1),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(me),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):ye.value?(openBlock(),createElementBlock("div",_hoisted_9$1,[createBaseVNode("img",{src:unref(G),contain:"",width:unref(x)?300:200,class:"my-4"},null,8,_hoisted_10$1),_hoisted_11$1])):createCommentVNode("",!0)]),_:1},8,["cols"])):createCommentVNode("",!0)]),_:1}),createVNode(VBtn,{variant:"outlined"},{default:withCtx(()=>[createTextVNode("Grer traductions")]),_:1})]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$14=defineComponent$1({__name:"MenuLangues",setup(t){const n=inject$1("constl"),_=ref$1(!1);n?.obtIdCompte().then(()=>_.value=!0);const{useI18n:x,__:E}=_(),{t:S}=x(),{isRtl:C}=useRtl(),{langue:T,choisirLangues:B}=utiliserLangues(),{codesLanguesDisponibles:A}=E();return(I,D)=>(openBlock(),createBlock(VBtn,{style:normalizeStyle("position: absolute;"+(unref(C)?"left:":"right:")+"20px; top: 20px"),icon:"mdi-earth",size:"small"},{default:withCtx(()=>[createVNode(VIcon,{size:"large"}),createVNode(VMenu,{activator:"parent","open-on-hover":"",offset:"10px","min-width":"225",location:unref(C)?"bottom right":"bottom left"},{default:withCtx(()=>[createVNode(VList,{class:"overflow-y-auto","max-height":"500px","min-width":"200px"},{default:withCtx(()=>[createVNode(_sfc_main$15,null,{activator:withCtx(({props:M})=>[createVNode(VListItem,mergeProps(M,{disabled:!_.value}),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(" mdi-plus ")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("languesInterface.contribuer")),1)]),_:1})]),_:2},1040,["disabled"])]),_:1}),_.value?(openBlock(),createBlock(VDivider,{key:1})):(openBlock(),createBlock(VProgressLinear,{key:0,height:"1",color:"primary",indeterminate:!_.value},null,8,["indeterminate"])),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(A),M=>(openBlock(),createBlock(_sfc_main$1T,{key:M,code:M,selectionnee:M===unref(T),onClick:()=>unref(B)(M)},null,8,["code","selectionnee","onClick"]))),128))]),_:1})]),_:1},8,["location"])]),_:1},8,["style"]))}}),VApp$1="",makeVAppProps=propsFactory({...makeComponentProps(),...makeLayoutProps({fullHeight:!0}),...makeThemeProps()},"VApp"),VApp=genericComponent()({name:"VApp",props:makeVAppProps(),setup(t,n){let{slots:_}=n;const x=provideTheme(t),{layoutClasses:E,layoutStyles:S,getLayoutItem:C,items:T,layoutRef:B}=createLayout(t),{rtlClasses:A}=useRtl();return useRender(()=>createVNode("div",{ref:B,class:["v-application",x.themeClasses.value,E.value,A.value,t.class],style:[S.value,t.style]},[createVNode("div",{class:"v-application__wrap"},[_.default?.()])])),{getLayoutItem:C,items:T,theme:x}}}),VLocaleProvider$1="",makeVLocaleProviderProps=propsFactory({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...makeComponentProps()},"VLocaleProvider"),VLocaleProvider=genericComponent()({name:"VLocaleProvider",props:makeVLocaleProviderProps(),setup(t,n){let{slots:_}=n;const{rtlClasses:x}=provideLocale(t);return useRender(()=>createVNode("div",{class:["v-locale-provider",x.value,t.class],style:t.style},[_.default?.()])),{}}}),VMain$1="",makeVMainProps=propsFactory({scrollable:Boolean,...makeComponentProps(),...makeTagProps({tag:"main"})},"VMain"),VMain=genericComponent()({name:"VMain",props:makeVMainProps(),setup(t,n){let{slots:_}=n;const{mainStyles:x}=useLayout(),{ssrBootStyles:E}=useSsrBoot();return useRender(()=>createVNode(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable},t.class],style:[x.value,E.value,t.style]},{default:()=>[t.scrollable?createVNode("div",{class:"v-main__scroller"},[_.default?.()]):_.default?.()]})),{}}}),_sfc_main$13=defineComponent$1({__name:"App",setup(t){const n=ref$1(!1),{langueDroiteGauche:_}=utiliserLangues(),x=_();return(E,S)=>(openBlock(),createBlock(VApp,null,{default:withCtx(()=>[createVNode(VLocaleProvider,{rtl:unref(x)},{default:withCtx(()=>[createVNode(VMain,null,{default:withCtx(()=>[createVNode(_sfc_main$14),createVNode(VFadeTransition,{"leave-absolute":""},{default:withCtx(()=>[n.value?(openBlock(),createBlock(_sfc_main$21,{key:1})):(openBlock(),createBlock(_sfc_main$1U,{key:0,onEntrer:S[0]||(S[0]=C=>n.value=!0)}))]),_:1})]),_:1})]),_:1},8,["rtl"])]),_:1}))}});let AccessController$1=class extends eventsExports.EventEmitter{static async create(n,_){}static get type(){throw new Error("'static get type ()' needs to be defined in the inheriting class")}get type(){return this.constructor.type}get address(){}async canAppend(n,_){}async grant(n,_){return!1}async revoke(n,_){return!1}async load(n){}async save(){}async close(){}};var encode_1$5=encode$r,MSB$4=128,REST$4=127,MSBALL$3=~REST$4,INT$3=Math.pow(2,31);function encode$r(t,n,_){n=n||[],_=_||0;for(var x=_;t>=INT$3;)n[_++]=t&255|MSB$4,t/=128;for(;t&MSBALL$3;)n[_++]=t&255|MSB$4,t>>>=7;return n[_]=t|0,encode$r.bytes=_-x+1,n}var decode$s=read$7,MSB$1$3=128,REST$1$3=127;function read$7(t,x){var _=0,x=x||0,E=0,S=x,C,T=t.length;do{if(S>=T)throw read$7.bytes=0,new RangeError("Could not decode varint");C=t[S++],_+=E<28?(C&REST$1$3)<<E:(C&REST$1$3)*Math.pow(2,E),E+=7}while(C>=MSB$1$3);return read$7.bytes=S-x,_}var N1$3=Math.pow(2,7),N2$3=Math.pow(2,14),N3$3=Math.pow(2,21),N4$3=Math.pow(2,28),N5$3=Math.pow(2,35),N6$3=Math.pow(2,42),N7$3=Math.pow(2,49),N8$3=Math.pow(2,56),N9$3=Math.pow(2,63),length$3=function(t){return t<N1$3?1:t<N2$3?2:t<N3$3?3:t<N4$3?4:t<N5$3?5:t<N6$3?6:t<N7$3?7:t<N8$3?8:t<N9$3?9:10},varint$3={encode:encode_1$5,decode:decode$s,encodingLength:length$3},_brrp_varint$3=varint$3;const decode$r=(t,n=0)=>[_brrp_varint$3.decode(t,n),_brrp_varint$3.decode.bytes],encodeTo$3=(t,n,_=0)=>(_brrp_varint$3.encode(t,n,_),n),encodingLength$3=t=>_brrp_varint$3.encodingLength(t),equals$6=(t,n)=>{if(t===n)return!0;if(t.byteLength!==n.byteLength)return!1;for(let _=0;_<t.byteLength;_++)if(t[_]!==n[_])return!1;return!0},coerce$4=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},create$6=(t,n)=>{const _=n.byteLength,x=encodingLength$3(t),E=x+encodingLength$3(_),S=new Uint8Array(E+_);return encodeTo$3(t,S,0),encodeTo$3(_,S,x),S.set(n,E),new Digest$3(t,_,n,S)},decode$q=t=>{const n=coerce$4(t),[_,x]=decode$r(n),[E,S]=decode$r(n.subarray(x)),C=n.subarray(x+S);if(C.byteLength!==E)throw new Error("Incorrect length");return new Digest$3(_,E,C,n)},equals$5=(t,n)=>{if(t===n)return!0;{const _=n;return t.code===_.code&&t.size===_.size&&_.bytes instanceof Uint8Array&&equals$6(t.bytes,_.bytes)}};let Digest$3=class{constructor(n,_,x,E){this.code=n,this.size=_,this.digest=x,this.bytes=E}};function base$7(t,n){if(t.length>=255)throw new TypeError("Alphabet too long");for(var _=new Uint8Array(256),x=0;x<_.length;x++)_[x]=255;for(var E=0;E<t.length;E++){var S=t.charAt(E),C=S.charCodeAt(0);if(_[C]!==255)throw new TypeError(S+" is ambiguous");_[C]=E}var T=t.length,B=t.charAt(0),A=Math.log(T)/Math.log(256),I=Math.log(256)/Math.log(T);function D(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var F=0,j=0,U=0,H=L.length;U!==H&&L[U]===0;)U++,F++;for(var Y=(H-U)*I+1>>>0,Z=new Uint8Array(Y);U!==H;){for(var ne=L[U],re=0,X=Y-1;(ne!==0||re<j)&&X!==-1;X--,re++)ne+=256*Z[X]>>>0,Z[X]=ne%T>>>0,ne=ne/T>>>0;if(ne!==0)throw new Error("Non-zero carry");j=re,U++}for(var ce=Y-j;ce!==Y&&Z[ce]===0;)ce++;for(var ue=B.repeat(F);ce<Y;++ce)ue+=t.charAt(Z[ce]);return ue}function M(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var F=0;if(L[F]!==" "){for(var j=0,U=0;L[F]===B;)j++,F++;for(var H=(L.length-F)*A+1>>>0,Y=new Uint8Array(H);L[F];){var Z=_[L.charCodeAt(F)];if(Z===255)return;for(var ne=0,re=H-1;(Z!==0||ne<U)&&re!==-1;re--,ne++)Z+=T*Y[re]>>>0,Y[re]=Z%256>>>0,Z=Z/256>>>0;if(Z!==0)throw new Error("Non-zero carry");U=ne,F++}if(L[F]!==" "){for(var X=H-U;X!==H&&Y[X]===0;)X++;for(var ce=new Uint8Array(j+(H-X)),ue=j;X!==H;)ce[ue++]=Y[X++];return ce}}}function V(L){var F=M(L);if(F)return F;throw new Error(`Non-${n} character`)}return{encode:D,decodeUnsafe:M,decode:V}}var src$6=base$7,_brrp__multiformats_scope_baseX$4=src$6;let Encoder$5=class{constructor(n,_,x){this.name=n,this.prefix=_,this.baseEncode=x}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}},Decoder$5=class{constructor(n,_,x){if(this.name=n,this.prefix=_,_.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=_.codePointAt(0),this.baseDecode=x}decode(n){if(typeof n=="string"){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(n){return or$4(this,n)}},ComposedDecoder$4=class{constructor(n){this.decoders=n}or(n){return or$4(this,n)}decode(n){const _=n[0],x=this.decoders[_];if(x)return x.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$4=(t,n)=>new ComposedDecoder$4({...t.decoders||{[t.prefix]:t},...n.decoders||{[n.prefix]:n}});let Codec$5=class{constructor(n,_,x,E){this.name=n,this.prefix=_,this.baseEncode=x,this.baseDecode=E,this.encoder=new Encoder$5(n,_,x),this.decoder=new Decoder$5(n,_,E)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}};const from$8=({name:t,prefix:n,encode:_,decode:x})=>new Codec$5(t,n,_,x),baseX$4=({prefix:t,name:n,alphabet:_})=>{const{encode:x,decode:E}=_brrp__multiformats_scope_baseX$4(_,n);return from$8({prefix:t,name:n,encode:x,decode:S=>coerce$4(E(S))})},decode$p=(t,n,_,x)=>{const E={};for(let I=0;I<n.length;++I)E[n[I]]=I;let S=t.length;for(;t[S-1]==="=";)--S;const C=new Uint8Array(S*_/8|0);let T=0,B=0,A=0;for(let I=0;I<S;++I){const D=E[t[I]];if(D===void 0)throw new SyntaxError(`Non-${x} character`);B=B<<_|D,T+=_,T>=8&&(T-=8,C[A++]=255&B>>T)}if(T>=_||255&B<<8-T)throw new SyntaxError("Unexpected end of data");return C},encode$q=(t,n,_)=>{const x=n[n.length-1]==="=",E=(1<<_)-1;let S="",C=0,T=0;for(let B=0;B<t.length;++B)for(T=T<<8|t[B],C+=8;C>_;)C-=_,S+=n[E&T>>C];if(C&&(S+=n[E&T<<_-C]),x)for(;S.length*_&7;)S+="=";return S},rfc4648$4=({name:t,prefix:n,bitsPerChar:_,alphabet:x})=>from$8({prefix:n,name:t,encode(E){return encode$q(E,x,_)},decode(E){return decode$p(E,x,_,t)}}),base58btc$4=baseX$4({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$4({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32$4=rfc4648$4({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$4({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$4({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$4({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$4({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$4({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$4({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$4({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$4({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const format$6=(t,n)=>{const{bytes:_,version:x}=t;switch(x){case 0:return toStringV0$2(_,baseCache$2(t),n||base58btc$4.encoder);default:return toStringV1$2(_,baseCache$2(t),n||base32$4.encoder)}},cache$3=new WeakMap,baseCache$2=t=>{const n=cache$3.get(t);if(n==null){const _=new Map;return cache$3.set(t,_),_}return n};let CID$2=class un{constructor(n,_,x,E){this.code=_,this.version=n,this.multihash=x,this.bytes=E,this["/"]=E}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:n,multihash:_}=this;if(n!==DAG_PB_CODE$2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(_.code!==SHA_256_CODE$2)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return un.createV0(_)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:n,digest:_}=this.multihash,x=create$6(n,_);return un.createV1(this.code,x)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(n){return un.equals(this,n)}static equals(n,_){const x=_;return x&&n.code===x.code&&n.version===x.version&&equals$5(n.multihash,x.multihash)}toString(n){return format$6(this,n)}toJSON(){return{"/":format$6(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(n){if(n==null)return null;const _=n;if(_ instanceof un)return _;if(_["/"]!=null&&_["/"]===_.bytes||_.asCID===_){const{version:x,code:E,multihash:S,bytes:C}=_;return new un(x,E,S,C||encodeCID$2(x,E,S.bytes))}else if(_[cidSymbol$2]===!0){const{version:x,multihash:E,code:S}=_,C=decode$q(E);return un.create(x,S,C)}else return null}static create(n,_,x){if(typeof _!="number")throw new Error("String codecs are no longer supported");if(!(x.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(n){case 0:{if(_!==DAG_PB_CODE$2)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$2}) block encoding`);return new un(n,_,x,x.bytes)}case 1:{const E=encodeCID$2(n,_,x.bytes);return new un(n,_,x,E)}default:throw new Error("Invalid version")}}static createV0(n){return un.create(0,DAG_PB_CODE$2,n)}static createV1(n,_){return un.create(1,n,_)}static decode(n){const[_,x]=un.decodeFirst(n);if(x.length)throw new Error("Incorrect length");return _}static decodeFirst(n){const _=un.inspectBytes(n),x=_.size-_.multihashSize,E=coerce$4(n.subarray(x,x+_.multihashSize));if(E.byteLength!==_.multihashSize)throw new Error("Incorrect length");const S=E.subarray(_.multihashSize-_.digestSize),C=new Digest$3(_.multihashCode,_.digestSize,S,E);return[_.version===0?un.createV0(C):un.createV1(_.codec,C),n.subarray(_.size)]}static inspectBytes(n){let _=0;const x=()=>{const[D,M]=decode$r(n.subarray(_));return _+=M,D};let E=x(),S=DAG_PB_CODE$2;if(E===18?(E=0,_=0):S=x(),E!==0&&E!==1)throw new RangeError(`Invalid CID version ${E}`);const C=_,T=x(),B=x(),A=_+B,I=A-C;return{version:E,codec:S,multihashCode:T,digestSize:B,multihashSize:I,size:A}}static parse(n,_){const[x,E]=parseCIDtoBytes$2(n,_),S=un.decode(E);if(S.version===0&&n[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$2(S).set(x,n),S}};const parseCIDtoBytes$2=(t,n)=>{switch(t[0]){case"Q":{const _=n||base58btc$4;return[base58btc$4.prefix,_.decode(`${base58btc$4.prefix}${t}`)]}case base58btc$4.prefix:{const _=n||base58btc$4;return[base58btc$4.prefix,_.decode(t)]}case base32$4.prefix:{const _=n||base32$4;return[base32$4.prefix,_.decode(t)]}default:{if(n==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],n.decode(t)]}}},toStringV0$2=(t,n,_)=>{const{prefix:x}=_;if(x!==base58btc$4.prefix)throw Error(`Cannot string encode V0 in ${_.name} encoding`);const E=n.get(x);if(E==null){const S=_.encode(t).slice(1);return n.set(x,S),S}else return E},toStringV1$2=(t,n,_)=>{const{prefix:x}=_,E=n.get(x);if(E==null){const S=_.encode(t);return n.set(x,S),S}else return E},DAG_PB_CODE$2=112,SHA_256_CODE$2=18,encodeCID$2=(t,n,_)=>{const x=encodingLength$3(t),E=x+encodingLength$3(n),S=new Uint8Array(E+_.byteLength);return encodeTo$3(t,S,0),encodeTo$3(n,S,x),S.set(_,E),S},cidSymbol$2=Symbol.for("@ipld/js-cid/CID"),from$7=({name:t,code:n,encode:_})=>new Hasher$2(t,n,_);let Hasher$2=class{constructor(n,_,x){this.name=n,this.code=_,this.encode=x}digest(n){if(n instanceof Uint8Array){const _=this.encode(n);return _ instanceof Uint8Array?create$6(this.code,_):_.then(x=>create$6(this.code,x))}else throw Error("Unknown type, must be binary type")}};function readonly$1({enumerable:t=!0,configurable:n=!1}={}){return{enumerable:t,configurable:n,writable:!1}}function*linksWithin(t,n){if(n!=null&&typeof n=="object")if(Array.isArray(n))for(const[_,x]of n.entries()){const E=[...t,_],S=CID$2.asCID(x);S?yield[E.join("/"),S]:typeof x=="object"&&(yield*links$1(x,E))}else{const _=CID$2.asCID(n);_?yield[t.join("/"),_]:yield*links$1(n,t)}}function*links$1(t,n){if(t==null||t instanceof Uint8Array)return;const _=CID$2.asCID(t);_&&(yield[n.join("/"),_]);for(const[x,E]of Object.entries(t)){const S=[...n,x];yield*linksWithin(S,E)}}function*treeWithin(t,n){if(Array.isArray(n))for(const[_,x]of n.entries()){const E=[...t,_];yield E.join("/"),typeof x=="object"&&!CID$2.asCID(x)&&(yield*tree$1(x,E))}else yield*tree$1(n,t)}function*tree$1(t,n){if(!(t==null||typeof t!="object"))for(const[_,x]of Object.entries(t)){const E=[...n,_];yield E.join("/"),x!=null&&!(x instanceof Uint8Array)&&typeof x=="object"&&!CID$2.asCID(x)&&(yield*treeWithin(E,x))}}function get$2(t,n){let _=t;for(const[x,E]of n.entries()){if(_=_[E],_==null)throw new Error(`Object has no property at ${n.slice(0,x+1).map(C=>`[${JSON.stringify(C)}]`).join("")}`);const S=CID$2.asCID(_);if(S)return{value:S,remaining:n.slice(x+1).join("/")}}return{value:_}}let Block$1=class{constructor({cid:n,bytes:_,value:x}){if(!n||!_||typeof x>"u")throw new Error("Missing required argument");this.cid=n,this.bytes=_,this.value=x,this.asBlock=this,Object.defineProperties(this,{cid:readonly$1(),bytes:readonly$1(),value:readonly$1(),asBlock:readonly$1()})}links(){return links$1(this.value,[])}tree(){return tree$1(this.value,[])}get(n="/"){return get$2(this.value,n.split("/").filter(Boolean))}};async function encode$p({value:t,codec:n,hasher:_}){if(typeof t>"u")throw new Error('Missing required argument "value"');if(!n||!_)throw new Error("Missing required argument: codec or hasher");const x=n.encode(t),E=await _.digest(x),S=CID$2.create(1,n.code,E);return new Block$1({value:t,bytes:x,cid:S})}async function decode$o({bytes:t,codec:n,hasher:_}){if(!t)throw new Error('Missing required argument "bytes"');if(!n||!_)throw new Error("Missing required argument: codec or hasher");const x=n.decode(t),E=await _.digest(t),S=CID$2.create(1,n.code,E);return new Block$1({value:x,bytes:t,cid:S})}var encode_1$4=encode$o,MSB$3=128,REST$3=127,MSBALL$2=~REST$3,INT$2=Math.pow(2,31);function encode$o(t,n,_){n=n||[],_=_||0;for(var x=_;t>=INT$2;)n[_++]=t&255|MSB$3,t/=128;for(;t&MSBALL$2;)n[_++]=t&255|MSB$3,t>>>=7;return n[_]=t|0,encode$o.bytes=_-x+1,n}var decode$n=read$6,MSB$1$2=128,REST$1$2=127;function read$6(t,x){var _=0,x=x||0,E=0,S=x,C,T=t.length;do{if(S>=T)throw read$6.bytes=0,new RangeError("Could not decode varint");C=t[S++],_+=E<28?(C&REST$1$2)<<E:(C&REST$1$2)*Math.pow(2,E),E+=7}while(C>=MSB$1$2);return read$6.bytes=S-x,_}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$2=function(t){return t<N1$2?1:t<N2$2?2:t<N3$2?3:t<N4$2?4:t<N5$2?5:t<N6$2?6:t<N7$2?7:t<N8$2?8:t<N9$2?9:10},varint$2={encode:encode_1$4,decode:decode$n,encodingLength:length$2},_brrp_varint$2=varint$2;const decode$m=(t,n=0)=>[_brrp_varint$2.decode(t,n),_brrp_varint$2.decode.bytes],encodeTo$2=(t,n,_=0)=>(_brrp_varint$2.encode(t,n,_),n),encodingLength$2=t=>_brrp_varint$2.encodingLength(t),equals$4=(t,n)=>{if(t===n)return!0;if(t.byteLength!==n.byteLength)return!1;for(let _=0;_<t.byteLength;_++)if(t[_]!==n[_])return!1;return!0},coerce$3=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},create$5=(t,n)=>{const _=n.byteLength,x=encodingLength$2(t),E=x+encodingLength$2(_),S=new Uint8Array(E+_);return encodeTo$2(t,S,0),encodeTo$2(_,S,x),S.set(n,E),new Digest$2(t,_,n,S)},decode$l=t=>{const n=coerce$3(t),[_,x]=decode$m(n),[E,S]=decode$m(n.subarray(x)),C=n.subarray(x+S);if(C.byteLength!==E)throw new Error("Incorrect length");return new Digest$2(_,E,C,n)},equals$3=(t,n)=>{if(t===n)return!0;{const _=n;return t.code===_.code&&t.size===_.size&&_.bytes instanceof Uint8Array&&equals$4(t.bytes,_.bytes)}};let Digest$2=class{constructor(n,_,x,E){this.code=n,this.size=_,this.digest=x,this.bytes=E}};function base$6(t,n){if(t.length>=255)throw new TypeError("Alphabet too long");for(var _=new Uint8Array(256),x=0;x<_.length;x++)_[x]=255;for(var E=0;E<t.length;E++){var S=t.charAt(E),C=S.charCodeAt(0);if(_[C]!==255)throw new TypeError(S+" is ambiguous");_[C]=E}var T=t.length,B=t.charAt(0),A=Math.log(T)/Math.log(256),I=Math.log(256)/Math.log(T);function D(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var F=0,j=0,U=0,H=L.length;U!==H&&L[U]===0;)U++,F++;for(var Y=(H-U)*I+1>>>0,Z=new Uint8Array(Y);U!==H;){for(var ne=L[U],re=0,X=Y-1;(ne!==0||re<j)&&X!==-1;X--,re++)ne+=256*Z[X]>>>0,Z[X]=ne%T>>>0,ne=ne/T>>>0;if(ne!==0)throw new Error("Non-zero carry");j=re,U++}for(var ce=Y-j;ce!==Y&&Z[ce]===0;)ce++;for(var ue=B.repeat(F);ce<Y;++ce)ue+=t.charAt(Z[ce]);return ue}function M(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var F=0;if(L[F]!==" "){for(var j=0,U=0;L[F]===B;)j++,F++;for(var H=(L.length-F)*A+1>>>0,Y=new Uint8Array(H);L[F];){var Z=_[L.charCodeAt(F)];if(Z===255)return;for(var ne=0,re=H-1;(Z!==0||ne<U)&&re!==-1;re--,ne++)Z+=T*Y[re]>>>0,Y[re]=Z%256>>>0,Z=Z/256>>>0;if(Z!==0)throw new Error("Non-zero carry");U=ne,F++}if(L[F]!==" "){for(var X=H-U;X!==H&&Y[X]===0;)X++;for(var ce=new Uint8Array(j+(H-X)),ue=j;X!==H;)ce[ue++]=Y[X++];return ce}}}function V(L){var F=M(L);if(F)return F;throw new Error(`Non-${n} character`)}return{encode:D,decodeUnsafe:M,decode:V}}var src$5=base$6,_brrp__multiformats_scope_baseX$3=src$5;let Encoder$4=class{constructor(n,_,x){this.name=n,this.prefix=_,this.baseEncode=x}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}},Decoder$4=class{constructor(n,_,x){if(this.name=n,this.prefix=_,_.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=_.codePointAt(0),this.baseDecode=x}decode(n){if(typeof n=="string"){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(n){return or$3(this,n)}},ComposedDecoder$3=class{constructor(n){this.decoders=n}or(n){return or$3(this,n)}decode(n){const _=n[0],x=this.decoders[_];if(x)return x.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$3=(t,n)=>new ComposedDecoder$3({...t.decoders||{[t.prefix]:t},...n.decoders||{[n.prefix]:n}});let Codec$4=class{constructor(n,_,x,E){this.name=n,this.prefix=_,this.baseEncode=x,this.baseDecode=E,this.encoder=new Encoder$4(n,_,x),this.decoder=new Decoder$4(n,_,E)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}};const from$6=({name:t,prefix:n,encode:_,decode:x})=>new Codec$4(t,n,_,x),baseX$3=({prefix:t,name:n,alphabet:_})=>{const{encode:x,decode:E}=_brrp__multiformats_scope_baseX$3(_,n);return from$6({prefix:t,name:n,encode:x,decode:S=>coerce$3(E(S))})},decode$k=(t,n,_,x)=>{const E={};for(let I=0;I<n.length;++I)E[n[I]]=I;let S=t.length;for(;t[S-1]==="=";)--S;const C=new Uint8Array(S*_/8|0);let T=0,B=0,A=0;for(let I=0;I<S;++I){const D=E[t[I]];if(D===void 0)throw new SyntaxError(`Non-${x} character`);B=B<<_|D,T+=_,T>=8&&(T-=8,C[A++]=255&B>>T)}if(T>=_||255&B<<8-T)throw new SyntaxError("Unexpected end of data");return C},encode$n=(t,n,_)=>{const x=n[n.length-1]==="=",E=(1<<_)-1;let S="",C=0,T=0;for(let B=0;B<t.length;++B)for(T=T<<8|t[B],C+=8;C>_;)C-=_,S+=n[E&T>>C];if(C&&(S+=n[E&T<<_-C]),x)for(;S.length*_&7;)S+="=";return S},rfc4648$3=({name:t,prefix:n,bitsPerChar:_,alphabet:x})=>from$6({prefix:n,name:t,encode(E){return encode$n(E,x,_)},decode(E){return decode$k(E,x,_,t)}}),base58btc$3=baseX$3({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$3({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32$3=rfc4648$3({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$3({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$3({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$3({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$3({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$3({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$3({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$3({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$3({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const format$5=(t,n)=>{const{bytes:_,version:x}=t;switch(x){case 0:return toStringV0$1(_,baseCache$1(t),n||base58btc$3.encoder);default:return toStringV1$1(_,baseCache$1(t),n||base32$3.encoder)}},cache$2=new WeakMap,baseCache$1=t=>{const n=cache$2.get(t);if(n==null){const _=new Map;return cache$2.set(t,_),_}return n};let CID$1=class fn{constructor(n,_,x,E){this.code=_,this.version=n,this.multihash=x,this.bytes=E,this["/"]=E}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:n,multihash:_}=this;if(n!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(_.code!==SHA_256_CODE$1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return fn.createV0(_)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:n,digest:_}=this.multihash,x=create$5(n,_);return fn.createV1(this.code,x)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(n){return fn.equals(this,n)}static equals(n,_){const x=_;return x&&n.code===x.code&&n.version===x.version&&equals$3(n.multihash,x.multihash)}toString(n){return format$5(this,n)}toJSON(){return{"/":format$5(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(n){if(n==null)return null;const _=n;if(_ instanceof fn)return _;if(_["/"]!=null&&_["/"]===_.bytes||_.asCID===_){const{version:x,code:E,multihash:S,bytes:C}=_;return new fn(x,E,S,C||encodeCID$1(x,E,S.bytes))}else if(_[cidSymbol$1]===!0){const{version:x,multihash:E,code:S}=_,C=decode$l(E);return fn.create(x,S,C)}else return null}static create(n,_,x){if(typeof _!="number")throw new Error("String codecs are no longer supported");if(!(x.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(n){case 0:{if(_!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new fn(n,_,x,x.bytes)}case 1:{const E=encodeCID$1(n,_,x.bytes);return new fn(n,_,x,E)}default:throw new Error("Invalid version")}}static createV0(n){return fn.create(0,DAG_PB_CODE$1,n)}static createV1(n,_){return fn.create(1,n,_)}static decode(n){const[_,x]=fn.decodeFirst(n);if(x.length)throw new Error("Incorrect length");return _}static decodeFirst(n){const _=fn.inspectBytes(n),x=_.size-_.multihashSize,E=coerce$3(n.subarray(x,x+_.multihashSize));if(E.byteLength!==_.multihashSize)throw new Error("Incorrect length");const S=E.subarray(_.multihashSize-_.digestSize),C=new Digest$2(_.multihashCode,_.digestSize,S,E);return[_.version===0?fn.createV0(C):fn.createV1(_.codec,C),n.subarray(_.size)]}static inspectBytes(n){let _=0;const x=()=>{const[D,M]=decode$m(n.subarray(_));return _+=M,D};let E=x(),S=DAG_PB_CODE$1;if(E===18?(E=0,_=0):S=x(),E!==0&&E!==1)throw new RangeError(`Invalid CID version ${E}`);const C=_,T=x(),B=x(),A=_+B,I=A-C;return{version:E,codec:S,multihashCode:T,digestSize:B,multihashSize:I,size:A}}static parse(n,_){const[x,E]=parseCIDtoBytes$1(n,_),S=fn.decode(E);if(S.version===0&&n[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$1(S).set(x,n),S}};const parseCIDtoBytes$1=(t,n)=>{switch(t[0]){case"Q":{const _=n||base58btc$3;return[base58btc$3.prefix,_.decode(`${base58btc$3.prefix}${t}`)]}case base58btc$3.prefix:{const _=n||base58btc$3;return[base58btc$3.prefix,_.decode(t)]}case base32$3.prefix:{const _=n||base32$3;return[base32$3.prefix,_.decode(t)]}default:{if(n==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],n.decode(t)]}}},toStringV0$1=(t,n,_)=>{const{prefix:x}=_;if(x!==base58btc$3.prefix)throw Error(`Cannot string encode V0 in ${_.name} encoding`);const E=n.get(x);if(E==null){const S=_.encode(t).slice(1);return n.set(x,S),S}else return E},toStringV1$1=(t,n,_)=>{const{prefix:x}=_,E=n.get(x);if(E==null){const S=_.encode(t);return n.set(x,S),S}else return E},DAG_PB_CODE$1=112,SHA_256_CODE$1=18,encodeCID$1=(t,n,_)=>{const x=encodingLength$2(t),E=x+encodingLength$2(n),S=new Uint8Array(E+_.byteLength);return encodeTo$2(t,S,0),encodeTo$2(n,S,x),S.set(_,E),S},cidSymbol$1=Symbol.for("@ipld/js-cid/CID"),textDecoder$3=new TextDecoder;function decodeVarint(t,n){let _=0;for(let x=0;;x+=7){if(x>=64)throw new Error("protobuf: varint overflow");if(n>=t.length)throw new Error("protobuf: unexpected end of data");const E=t[n++];if(_+=x<28?(E&127)<<x:(E&127)*2**x,E<128)break}return[_,n]}function decodeBytes(t,n){let _;[_,n]=decodeVarint(t,n);const x=n+_;if(_<0||x<0)throw new Error("protobuf: invalid length");if(x>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(n,x),x]}function decodeKey(t,n){let _;return[_,n]=decodeVarint(t,n),[_&7,_>>3,n]}function decodeLink(t){const n={},_=t.length;let x=0;for(;x<_;){let E,S;if([E,S,x]=decodeKey(t,x),S===1){if(n.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(E!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${E}) for Hash`);if(n.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(n.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[n.Hash,x]=decodeBytes(t,x)}else if(S===2){if(n.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(E!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${E}) for Name`);if(n.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let C;[C,x]=decodeBytes(t,x),n.Name=textDecoder$3.decode(C)}else if(S===3){if(n.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(E!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${E}) for Tsize`);[n.Tsize,x]=decodeVarint(t,x)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${S}`)}if(x>_)throw new Error("protobuf: (PBLink) unexpected end of data");return n}function decodeNode(t){const n=t.length;let _=0,x,E=!1,S;for(;_<n;){let T,B;if([T,B,_]=decodeKey(t,_),T!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${T}`);if(B===1){if(S)throw new Error("protobuf: (PBNode) duplicate Data section");[S,_]=decodeBytes(t,_),x&&(E=!0)}else if(B===2){if(E)throw new Error("protobuf: (PBNode) duplicate Links section");x||(x=[]);let A;[A,_]=decodeBytes(t,_),x.push(decodeLink(A))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${B}`)}if(_>n)throw new Error("protobuf: (PBNode) unexpected end of data");const C={};return S&&(C.Data=S),C.Links=x||[],C}const textEncoder$5=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(t,n){let _=n.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");_=encodeVarint(n,_,t.Tsize)-1,n[_]=24}if(typeof t.Name=="string"){const x=textEncoder$5.encode(t.Name);_-=x.length,n.set(x,_),_=encodeVarint(n,_,x.length)-1,n[_]=18}return t.Hash&&(_-=t.Hash.length,n.set(t.Hash,_),_=encodeVarint(n,_,t.Hash.length)-1,n[_]=10),n.length-_}function encodeNode(t){const n=sizeNode(t),_=new Uint8Array(n);let x=n;if(t.Data&&(x-=t.Data.length,_.set(t.Data,x),x=encodeVarint(_,x,t.Data.length)-1,_[x]=10),t.Links)for(let E=t.Links.length-1;E>=0;E--){const S=encodeLink(t.Links[E],_.subarray(0,x));x-=S,x=encodeVarint(_,x,S)-1,_[x]=18}return _}function sizeLink(t){let n=0;if(t.Hash){const _=t.Hash.length;n+=1+_+sov(_)}if(typeof t.Name=="string"){const _=textEncoder$5.encode(t.Name).length;n+=1+_+sov(_)}return typeof t.Tsize=="number"&&(n+=1+sov(t.Tsize)),n}function sizeNode(t){let n=0;if(t.Data){const _=t.Data.length;n+=1+_+sov(_)}if(t.Links)for(const _ of t.Links){const x=sizeLink(_);n+=1+x+sov(x)}return n}function encodeVarint(t,n,_){n-=sov(_);const x=n;for(;_>=maxUInt32;)t[n++]=_&127|128,_/=128;for(;_>=128;)t[n++]=_&127|128,_>>>=7;return t[n]=_,x}function sov(t){return t%2===0&&t++,Math.floor((len64(t)+6)/7)}function len64(t){let n=0;return t>=maxInt32&&(t=Math.floor(t/maxInt32),n=32),t>=65536&&(t>>>=16,n+=16),t>=256&&(t>>>=8,n+=8),n+len8tab[t]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder$4=new TextEncoder;function linkComparator(t,n){if(t===n)return 0;const _=t.Name?textEncoder$4.encode(t.Name):[],x=n.Name?textEncoder$4.encode(n.Name):[];let E=_.length,S=x.length;for(let C=0,T=Math.min(E,S);C<T;++C)if(_[C]!==x[C]){E=_[C],S=x[C];break}return E<S?-1:S<E?1:0}function hasOnlyProperties(t,n){return!Object.keys(t).some(_=>!n.includes(_))}function asLink(t){if(typeof t.asCID=="object"){const _=CID$1.asCID(t);if(!_)throw new TypeError("Invalid DAG-PB form");return{Hash:_}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const n={};if(t.Hash){let _=CID$1.asCID(t.Hash);try{_||(typeof t.Hash=="string"?_=CID$1.parse(t.Hash):t.Hash instanceof Uint8Array&&(_=CID$1.decode(t.Hash)))}catch(x){throw new TypeError(`Invalid DAG-PB form: ${x.message}`)}_&&(n.Hash=_)}if(!n.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(n.Name=t.Name),typeof t.Tsize=="number"&&(n.Tsize=t.Tsize),n}function prepare(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const n={};if(t.Data!==void 0)if(typeof t.Data=="string")n.Data=textEncoder$4.encode(t.Data);else if(t.Data instanceof Uint8Array)n.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))n.Links=t.Links.map(asLink),n.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else n.Links=[];return n}function validate$1(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(t,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let n=0;n<t.Links.length;n++){const _=t.Links[n];if(!_||typeof _!="object"||Array.isArray(_)||_ instanceof Uint8Array||_["/"]&&_["/"]===_.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!hasOnlyProperties(_,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(_.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(_.Hash==null||!_.Hash["/"]||_.Hash["/"]!==_.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(_.Name!==void 0&&typeof _.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(_.Tsize!==void 0){if(typeof _.Tsize!="number"||_.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(_.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(n>0&&linkComparator(_,t.Links[n-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(t,n=[]){return prepare({Data:t,Links:n})}function createLink(t,n,_){return asLink({Hash:_,Name:t,Tsize:n})}const name$6="dag-pb",code$7=112;function encode$m(t){validate$1(t);const n={};return t.Links&&(n.Links=t.Links.map(_=>{const x={};return _.Hash&&(x.Hash=_.Hash.bytes),_.Name!==void 0&&(x.Name=_.Name),_.Tsize!==void 0&&(x.Tsize=_.Tsize),x})),t.Data&&(n.Data=t.Data),encodeNode(n)}function decode$j(t){const n=decodeNode(t),_={};return n.Data&&(_.Data=n.Data),n.Links&&(_.Links=n.Links.map(x=>{const E={};try{E.Hash=CID$1.decode(x.Hash)}catch{}if(!E.Hash)throw new Error("Invalid Hash field found in link, expected CID");return x.Name!==void 0&&(E.Name=x.Name),x.Tsize!==void 0&&(E.Tsize=x.Tsize),E})),_}const dagPB=Object.freeze(Object.defineProperty({__proto__:null,code:code$7,createLink,createNode,decode:decode$j,encode:encode$m,name:name$6,prepare,validate:validate$1},Symbol.toStringTag,{value:"Module"})),typeofs$1=["string","number","bigint","symbol"],objectTypeNames$1=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is$2(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const n=typeof t;if(typeofs$1.includes(n))return n;if(n==="function")return"Function";if(Array.isArray(t))return"Array";if(isBuffer$4(t))return"Buffer";const _=getObjectType$1(t);return _||"Object"}function isBuffer$4(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function getObjectType$1(t){const n=Object.prototype.toString.call(t).slice(8,-1);if(objectTypeNames$1.includes(n))return n}let Type$1=class{constructor(n,_,x){this.major=n,this.majorEncoded=n<<5,this.name=_,this.terminal=x}toString(){return`Type[${this.major}].${this.name}`}compare(n){return this.major<n.major?-1:this.major>n.major?1:0}};Type$1.uint=new Type$1(0,"uint",!0);Type$1.negint=new Type$1(1,"negint",!0);Type$1.bytes=new Type$1(2,"bytes",!0);Type$1.string=new Type$1(3,"string",!0);Type$1.array=new Type$1(4,"array",!1);Type$1.map=new Type$1(5,"map",!1);Type$1.tag=new Type$1(6,"tag",!1);Type$1.float=new Type$1(7,"float",!0);Type$1.false=new Type$1(7,"false",!0);Type$1.true=new Type$1(7,"true",!0);Type$1.null=new Type$1(7,"null",!0);Type$1.undefined=new Type$1(7,"undefined",!0);Type$1.break=new Type$1(7,"break",!0);let Token$1=class{constructor(n,_,x){this.type=n,this.value=_,this.encodedLength=x,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};const useBuffer$1=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$2=new TextDecoder,textEncoder$3=new TextEncoder;function isBuffer$3(t){return useBuffer$1&&globalThis.Buffer.isBuffer(t)}function asU8A$1(t){return t instanceof Uint8Array?isBuffer$3(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const toString$8=useBuffer$1?(t,n,_)=>_-n>64?globalThis.Buffer.from(t.subarray(n,_)).toString("utf8"):utf8Slice$1(t,n,_):(t,n,_)=>_-n>64?textDecoder$2.decode(t.subarray(n,_)):utf8Slice$1(t,n,_),fromString$5=useBuffer$1?t=>t.length>64?globalThis.Buffer.from(t):utf8ToBytes$1(t):t=>t.length>64?textEncoder$3.encode(t):utf8ToBytes$1(t),fromArray$1=t=>Uint8Array.from(t),slice$1=useBuffer$1?(t,n,_)=>isBuffer$3(t)?new Uint8Array(t.subarray(n,_)):t.slice(n,_):(t,n,_)=>t.slice(n,_),concat$3=useBuffer$1?(t,n)=>(t=t.map(_=>_ instanceof Uint8Array?_:globalThis.Buffer.from(_)),asU8A$1(globalThis.Buffer.concat(t,n))):(t,n)=>{const _=new Uint8Array(n);let x=0;for(let E of t)x+E.length>_.length&&(E=E.subarray(0,_.length-x)),_.set(E,x),x+=E.length;return _},alloc$1=useBuffer$1?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function compare$3(t,n){if(isBuffer$3(t)&&isBuffer$3(n))return t.compare(n);for(let _=0;_<t.length;_++)if(t[_]!==n[_])return t[_]<n[_]?-1:1;return 0}function utf8ToBytes$1(t,n=1/0){let _;const x=t.length;let E=null;const S=[];for(let C=0;C<x;++C){if(_=t.charCodeAt(C),_>55295&&_<57344){if(!E){if(_>56319){(n-=3)>-1&&S.push(239,191,189);continue}else if(C+1===x){(n-=3)>-1&&S.push(239,191,189);continue}E=_;continue}if(_<56320){(n-=3)>-1&&S.push(239,191,189),E=_;continue}_=(E-55296<<10|_-56320)+65536}else E&&(n-=3)>-1&&S.push(239,191,189);if(E=null,_<128){if((n-=1)<0)break;S.push(_)}else if(_<2048){if((n-=2)<0)break;S.push(_>>6|192,_&63|128)}else if(_<65536){if((n-=3)<0)break;S.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((n-=4)<0)break;S.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return S}function utf8Slice$1(t,n,_){const x=[];for(;n<_;){const E=t[n];let S=null,C=E>239?4:E>223?3:E>191?2:1;if(n+C<=_){let T,B,A,I;switch(C){case 1:E<128&&(S=E);break;case 2:T=t[n+1],(T&192)===128&&(I=(E&31)<<6|T&63,I>127&&(S=I));break;case 3:T=t[n+1],B=t[n+2],(T&192)===128&&(B&192)===128&&(I=(E&15)<<12|(T&63)<<6|B&63,I>2047&&(I<55296||I>57343)&&(S=I));break;case 4:T=t[n+1],B=t[n+2],A=t[n+3],(T&192)===128&&(B&192)===128&&(A&192)===128&&(I=(E&15)<<18|(T&63)<<12|(B&63)<<6|A&63,I>65535&&I<1114112&&(S=I))}}S===null?(S=65533,C=1):S>65535&&(S-=65536,x.push(S>>>10&1023|55296),S=56320|S&1023),x.push(S),n+=C}return decodeCodePointsArray$1(x)}const MAX_ARGUMENTS_LENGTH$1=4096;function decodeCodePointsArray$1(t){const n=t.length;if(n<=MAX_ARGUMENTS_LENGTH$1)return String.fromCharCode.apply(String,t);let _="",x=0;for(;x<n;)_+=String.fromCharCode.apply(String,t.slice(x,x+=MAX_ARGUMENTS_LENGTH$1));return _}const defaultChunkSize$1=256;let Bl$1=class{constructor(n=defaultChunkSize$1){this.chunkSize=n,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(n){let _=this.chunks[this.chunks.length-1];if(this.cursor+n.length<=this.maxCursor+1){const E=_.length-(this.maxCursor-this.cursor)-1;_.set(n,E)}else{if(_){const E=_.length-(this.maxCursor-this.cursor)-1;E<_.length&&(this.chunks[this.chunks.length-1]=_.subarray(0,E),this.maxCursor=this.cursor-1)}n.length<64&&n.length<this.chunkSize?(_=alloc$1(this.chunkSize),this.chunks.push(_),this.maxCursor+=_.length,this._initReuseChunk===null&&(this._initReuseChunk=_),_.set(n,0)):(this.chunks.push(n),this.maxCursor+=n.length)}this.cursor+=n.length}toBytes(n=!1){let _;if(this.chunks.length===1){const x=this.chunks[0];n&&this.cursor>x.length/2?(_=this.cursor===x.length?x:x.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):_=slice$1(x,0,this.cursor)}else _=concat$3(this.chunks,this.cursor);return n&&this.reset(),_}};const decodeErrPrefix$1="CBOR decode error:",encodeErrPrefix$1="CBOR encode error:";function assertEnoughData$1(t,n,_){if(t.length-n<_)throw new Error(`${decodeErrPrefix$1} not enough data for type`)}const uintBoundaries$1=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8$1(t,n,_){assertEnoughData$1(t,n,1);const x=t[n];if(_.strict===!0&&x<uintBoundaries$1[0])throw new Error(`${decodeErrPrefix$1} integer encoded in more bytes than necessary (strict decode)`);return x}function readUint16$1(t,n,_){assertEnoughData$1(t,n,2);const x=t[n]<<8|t[n+1];if(_.strict===!0&&x<uintBoundaries$1[1])throw new Error(`${decodeErrPrefix$1} integer encoded in more bytes than necessary (strict decode)`);return x}function readUint32$1(t,n,_){assertEnoughData$1(t,n,4);const x=t[n]*16777216+(t[n+1]<<16)+(t[n+2]<<8)+t[n+3];if(_.strict===!0&&x<uintBoundaries$1[2])throw new Error(`${decodeErrPrefix$1} integer encoded in more bytes than necessary (strict decode)`);return x}function readUint64$1(t,n,_){assertEnoughData$1(t,n,8);const x=t[n]*16777216+(t[n+1]<<16)+(t[n+2]<<8)+t[n+3],E=t[n+4]*16777216+(t[n+5]<<16)+(t[n+6]<<8)+t[n+7],S=(BigInt(x)<<BigInt(32))+BigInt(E);if(_.strict===!0&&S<uintBoundaries$1[3])throw new Error(`${decodeErrPrefix$1} integer encoded in more bytes than necessary (strict decode)`);if(S<=Number.MAX_SAFE_INTEGER)return Number(S);if(_.allowBigInt===!0)return S;throw new Error(`${decodeErrPrefix$1} integers outside of the safe integer range are not supported`)}function decodeUint8$1(t,n,_,x){return new Token$1(Type$1.uint,readUint8$1(t,n+1,x),2)}function decodeUint16$1(t,n,_,x){return new Token$1(Type$1.uint,readUint16$1(t,n+1,x),3)}function decodeUint32$1(t,n,_,x){return new Token$1(Type$1.uint,readUint32$1(t,n+1,x),5)}function decodeUint64$1(t,n,_,x){return new Token$1(Type$1.uint,readUint64$1(t,n+1,x),9)}function encodeUint$1(t,n){return encodeUintValue$1(t,0,n.value)}function encodeUintValue$1(t,n,_){if(_<uintBoundaries$1[0]){const x=Number(_);t.push([n|x])}else if(_<uintBoundaries$1[1]){const x=Number(_);t.push([n|24,x])}else if(_<uintBoundaries$1[2]){const x=Number(_);t.push([n|25,x>>>8,x&255])}else if(_<uintBoundaries$1[3]){const x=Number(_);t.push([n|26,x>>>24&255,x>>>16&255,x>>>8&255,x&255])}else{const x=BigInt(_);if(x<uintBoundaries$1[4]){const E=[n|27,0,0,0,0,0,0,0];let S=Number(x&BigInt(4294967295)),C=Number(x>>BigInt(32)&BigInt(4294967295));E[8]=S&255,S=S>>8,E[7]=S&255,S=S>>8,E[6]=S&255,S=S>>8,E[5]=S&255,E[4]=C&255,C=C>>8,E[3]=C&255,C=C>>8,E[2]=C&255,C=C>>8,E[1]=C&255,t.push(E)}else throw new Error(`${decodeErrPrefix$1} encountered BigInt larger than allowable range`)}}encodeUint$1.encodedSize=function(n){return encodeUintValue$1.encodedSize(n.value)};encodeUintValue$1.encodedSize=function(n){return n<uintBoundaries$1[0]?1:n<uintBoundaries$1[1]?2:n<uintBoundaries$1[2]?3:n<uintBoundaries$1[3]?5:9};encodeUint$1.compareTokens=function(n,_){return n.value<_.value?-1:n.value>_.value?1:0};function decodeNegint8$1(t,n,_,x){return new Token$1(Type$1.negint,-1-readUint8$1(t,n+1,x),2)}function decodeNegint16$1(t,n,_,x){return new Token$1(Type$1.negint,-1-readUint16$1(t,n+1,x),3)}function decodeNegint32$1(t,n,_,x){return new Token$1(Type$1.negint,-1-readUint32$1(t,n+1,x),5)}const neg1b$1=BigInt(-1),pos1b$1=BigInt(1);function decodeNegint64$1(t,n,_,x){const E=readUint64$1(t,n+1,x);if(typeof E!="bigint"){const S=-1-E;if(S>=Number.MIN_SAFE_INTEGER)return new Token$1(Type$1.negint,S,9)}if(x.allowBigInt!==!0)throw new Error(`${decodeErrPrefix$1} integers outside of the safe integer range are not supported`);return new Token$1(Type$1.negint,neg1b$1-BigInt(E),9)}function encodeNegint$1(t,n){const _=n.value,x=typeof _=="bigint"?_*neg1b$1-pos1b$1:_*-1-1;encodeUintValue$1(t,n.type.majorEncoded,x)}encodeNegint$1.encodedSize=function(n){const _=n.value,x=typeof _=="bigint"?_*neg1b$1-pos1b$1:_*-1-1;return x<uintBoundaries$1[0]?1:x<uintBoundaries$1[1]?2:x<uintBoundaries$1[2]?3:x<uintBoundaries$1[3]?5:9};encodeNegint$1.compareTokens=function(n,_){return n.value<_.value?1:n.value>_.value?-1:0};function toToken$7(t,n,_,x){assertEnoughData$1(t,n,_+x);const E=slice$1(t,n+_,n+_+x);return new Token$1(Type$1.bytes,E,_+x)}function decodeBytesCompact$1(t,n,_,x){return toToken$7(t,n,1,_)}function decodeBytes8$1(t,n,_,x){return toToken$7(t,n,2,readUint8$1(t,n+1,x))}function decodeBytes16$1(t,n,_,x){return toToken$7(t,n,3,readUint16$1(t,n+1,x))}function decodeBytes32$1(t,n,_,x){return toToken$7(t,n,5,readUint32$1(t,n+1,x))}function decodeBytes64$1(t,n,_,x){const E=readUint64$1(t,n+1,x);if(typeof E=="bigint")throw new Error(`${decodeErrPrefix$1} 64-bit integer bytes lengths not supported`);return toToken$7(t,n,9,E)}function tokenBytes$1(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===Type$1.string?fromString$5(t.value):t.value),t.encodedBytes}function encodeBytes$1(t,n){const _=tokenBytes$1(n);encodeUintValue$1(t,n.type.majorEncoded,_.length),t.push(_)}encodeBytes$1.encodedSize=function(n){const _=tokenBytes$1(n);return encodeUintValue$1.encodedSize(_.length)+_.length};encodeBytes$1.compareTokens=function(n,_){return compareBytes$1(tokenBytes$1(n),tokenBytes$1(_))};function compareBytes$1(t,n){return t.length<n.length?-1:t.length>n.length?1:compare$3(t,n)}function toToken$6(t,n,_,x,E){const S=_+x;assertEnoughData$1(t,n,S);const C=new Token$1(Type$1.string,toString$8(t,n+_,n+S),S);return E.retainStringBytes===!0&&(C.byteValue=slice$1(t,n+_,n+S)),C}function decodeStringCompact$1(t,n,_,x){return toToken$6(t,n,1,_,x)}function decodeString8$1(t,n,_,x){return toToken$6(t,n,2,readUint8$1(t,n+1,x),x)}function decodeString16$1(t,n,_,x){return toToken$6(t,n,3,readUint16$1(t,n+1,x),x)}function decodeString32$1(t,n,_,x){return toToken$6(t,n,5,readUint32$1(t,n+1,x),x)}function decodeString64$1(t,n,_,x){const E=readUint64$1(t,n+1,x);if(typeof E=="bigint")throw new Error(`${decodeErrPrefix$1} 64-bit integer string lengths not supported`);return toToken$6(t,n,9,E,x)}const encodeString$1=encodeBytes$1;function toToken$5(t,n,_,x){return new Token$1(Type$1.array,x,_)}function decodeArrayCompact$1(t,n,_,x){return toToken$5(t,n,1,_)}function decodeArray8$1(t,n,_,x){return toToken$5(t,n,2,readUint8$1(t,n+1,x))}function decodeArray16$1(t,n,_,x){return toToken$5(t,n,3,readUint16$1(t,n+1,x))}function decodeArray32$1(t,n,_,x){return toToken$5(t,n,5,readUint32$1(t,n+1,x))}function decodeArray64$1(t,n,_,x){const E=readUint64$1(t,n+1,x);if(typeof E=="bigint")throw new Error(`${decodeErrPrefix$1} 64-bit integer array lengths not supported`);return toToken$5(t,n,9,E)}function decodeArrayIndefinite$1(t,n,_,x){if(x.allowIndefinite===!1)throw new Error(`${decodeErrPrefix$1} indefinite length items not allowed`);return toToken$5(t,n,1,1/0)}function encodeArray$1(t,n){encodeUintValue$1(t,Type$1.array.majorEncoded,n.value)}encodeArray$1.compareTokens=encodeUint$1.compareTokens;encodeArray$1.encodedSize=function(n){return encodeUintValue$1.encodedSize(n.value)};function toToken$4(t,n,_,x){return new Token$1(Type$1.map,x,_)}function decodeMapCompact$1(t,n,_,x){return toToken$4(t,n,1,_)}function decodeMap8$1(t,n,_,x){return toToken$4(t,n,2,readUint8$1(t,n+1,x))}function decodeMap16$1(t,n,_,x){return toToken$4(t,n,3,readUint16$1(t,n+1,x))}function decodeMap32$1(t,n,_,x){return toToken$4(t,n,5,readUint32$1(t,n+1,x))}function decodeMap64$1(t,n,_,x){const E=readUint64$1(t,n+1,x);if(typeof E=="bigint")throw new Error(`${decodeErrPrefix$1} 64-bit integer map lengths not supported`);return toToken$4(t,n,9,E)}function decodeMapIndefinite$1(t,n,_,x){if(x.allowIndefinite===!1)throw new Error(`${decodeErrPrefix$1} indefinite length items not allowed`);return toToken$4(t,n,1,1/0)}function encodeMap$1(t,n){encodeUintValue$1(t,Type$1.map.majorEncoded,n.value)}encodeMap$1.compareTokens=encodeUint$1.compareTokens;encodeMap$1.encodedSize=function(n){return encodeUintValue$1.encodedSize(n.value)};function decodeTagCompact$1(t,n,_,x){return new Token$1(Type$1.tag,_,1)}function decodeTag8$1(t,n,_,x){return new Token$1(Type$1.tag,readUint8$1(t,n+1,x),2)}function decodeTag16$1(t,n,_,x){return new Token$1(Type$1.tag,readUint16$1(t,n+1,x),3)}function decodeTag32$1(t,n,_,x){return new Token$1(Type$1.tag,readUint32$1(t,n+1,x),5)}function decodeTag64$1(t,n,_,x){return new Token$1(Type$1.tag,readUint64$1(t,n+1,x),9)}function encodeTag$1(t,n){encodeUintValue$1(t,Type$1.tag.majorEncoded,n.value)}encodeTag$1.compareTokens=encodeUint$1.compareTokens;encodeTag$1.encodedSize=function(n){return encodeUintValue$1.encodedSize(n.value)};const MINOR_FALSE$1=20,MINOR_TRUE$1=21,MINOR_NULL$1=22,MINOR_UNDEFINED$1=23;function decodeUndefined$1(t,n,_,x){if(x.allowUndefined===!1)throw new Error(`${decodeErrPrefix$1} undefined values are not supported`);return x.coerceUndefinedToNull===!0?new Token$1(Type$1.null,null,1):new Token$1(Type$1.undefined,void 0,1)}function decodeBreak$1(t,n,_,x){if(x.allowIndefinite===!1)throw new Error(`${decodeErrPrefix$1} indefinite length items not allowed`);return new Token$1(Type$1.break,void 0,1)}function createToken$1(t,n,_){if(_){if(_.allowNaN===!1&&Number.isNaN(t))throw new Error(`${decodeErrPrefix$1} NaN values are not supported`);if(_.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${decodeErrPrefix$1} Infinity values are not supported`)}return new Token$1(Type$1.float,t,n)}function decodeFloat16$1(t,n,_,x){return createToken$1(readFloat16$1(t,n+1),3,x)}function decodeFloat32$1(t,n,_,x){return createToken$1(readFloat32$1(t,n+1),5,x)}function decodeFloat64$1(t,n,_,x){return createToken$1(readFloat64$1(t,n+1),9,x)}function encodeFloat$1(t,n,_){const x=n.value;if(x===!1)t.push([Type$1.float.majorEncoded|MINOR_FALSE$1]);else if(x===!0)t.push([Type$1.float.majorEncoded|MINOR_TRUE$1]);else if(x===null)t.push([Type$1.float.majorEncoded|MINOR_NULL$1]);else if(x===void 0)t.push([Type$1.float.majorEncoded|MINOR_UNDEFINED$1]);else{let E,S=!1;(!_||_.float64!==!0)&&(encodeFloat16$1(x),E=readFloat16$1(ui8a$1,1),x===E||Number.isNaN(x)?(ui8a$1[0]=249,t.push(ui8a$1.slice(0,3)),S=!0):(encodeFloat32$1(x),E=readFloat32$1(ui8a$1,1),x===E&&(ui8a$1[0]=250,t.push(ui8a$1.slice(0,5)),S=!0))),S||(encodeFloat64$1(x),E=readFloat64$1(ui8a$1,1),ui8a$1[0]=251,t.push(ui8a$1.slice(0,9)))}}encodeFloat$1.encodedSize=function(n,_){const x=n.value;if(x===!1||x===!0||x===null||x===void 0)return 1;if(!_||_.float64!==!0){encodeFloat16$1(x);let E=readFloat16$1(ui8a$1,1);if(x===E||Number.isNaN(x))return 3;if(encodeFloat32$1(x),E=readFloat32$1(ui8a$1,1),x===E)return 5}return 9};const buffer$2=new ArrayBuffer(9),dataView$1=new DataView(buffer$2,1),ui8a$1=new Uint8Array(buffer$2,0);function encodeFloat16$1(t){if(t===1/0)dataView$1.setUint16(0,31744,!1);else if(t===-1/0)dataView$1.setUint16(0,64512,!1);else if(Number.isNaN(t))dataView$1.setUint16(0,32256,!1);else{dataView$1.setFloat32(0,t);const n=dataView$1.getUint32(0),_=(n&2139095040)>>23,x=n&8388607;if(_===255)dataView$1.setUint16(0,31744,!1);else if(_===0)dataView$1.setUint16(0,(t&2147483648)>>16|x>>13,!1);else{const E=_-127;E<-24?dataView$1.setUint16(0,0):E<-14?dataView$1.setUint16(0,(n&2147483648)>>16|1<<24+E,!1):dataView$1.setUint16(0,(n&2147483648)>>16|E+15<<10|x>>13,!1)}}}function readFloat16$1(t,n){if(t.length-n<2)throw new Error(`${decodeErrPrefix$1} not enough data for float16`);const _=(t[n]<<8)+t[n+1];if(_===31744)return 1/0;if(_===64512)return-1/0;if(_===32256)return NaN;const x=_>>10&31,E=_&1023;let S;return x===0?S=E*2**-24:x!==31?S=(E+1024)*2**(x-25):S=E===0?1/0:NaN,_&32768?-S:S}function encodeFloat32$1(t){dataView$1.setFloat32(0,t,!1)}function readFloat32$1(t,n){if(t.length-n<4)throw new Error(`${decodeErrPrefix$1} not enough data for float32`);const _=(t.byteOffset||0)+n;return new DataView(t.buffer,_,4).getFloat32(0,!1)}function encodeFloat64$1(t){dataView$1.setFloat64(0,t,!1)}function readFloat64$1(t,n){if(t.length-n<8)throw new Error(`${decodeErrPrefix$1} not enough data for float64`);const _=(t.byteOffset||0)+n;return new DataView(t.buffer,_,8).getFloat64(0,!1)}encodeFloat$1.compareTokens=encodeUint$1.compareTokens;function invalidMinor$1(t,n,_){throw new Error(`${decodeErrPrefix$1} encountered invalid minor (${_}) for major ${t[n]>>>5}`)}function errorer$1(t){return()=>{throw new Error(`${decodeErrPrefix$1} ${t}`)}}const jump$1=[];for(let t=0;t<=23;t++)jump$1[t]=invalidMinor$1;jump$1[24]=decodeUint8$1;jump$1[25]=decodeUint16$1;jump$1[26]=decodeUint32$1;jump$1[27]=decodeUint64$1;jump$1[28]=invalidMinor$1;jump$1[29]=invalidMinor$1;jump$1[30]=invalidMinor$1;jump$1[31]=invalidMinor$1;for(let t=32;t<=55;t++)jump$1[t]=invalidMinor$1;jump$1[56]=decodeNegint8$1;jump$1[57]=decodeNegint16$1;jump$1[58]=decodeNegint32$1;jump$1[59]=decodeNegint64$1;jump$1[60]=invalidMinor$1;jump$1[61]=invalidMinor$1;jump$1[62]=invalidMinor$1;jump$1[63]=invalidMinor$1;for(let t=64;t<=87;t++)jump$1[t]=decodeBytesCompact$1;jump$1[88]=decodeBytes8$1;jump$1[89]=decodeBytes16$1;jump$1[90]=decodeBytes32$1;jump$1[91]=decodeBytes64$1;jump$1[92]=invalidMinor$1;jump$1[93]=invalidMinor$1;jump$1[94]=invalidMinor$1;jump$1[95]=errorer$1("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)jump$1[t]=decodeStringCompact$1;jump$1[120]=decodeString8$1;jump$1[121]=decodeString16$1;jump$1[122]=decodeString32$1;jump$1[123]=decodeString64$1;jump$1[124]=invalidMinor$1;jump$1[125]=invalidMinor$1;jump$1[126]=invalidMinor$1;jump$1[127]=errorer$1("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)jump$1[t]=decodeArrayCompact$1;jump$1[152]=decodeArray8$1;jump$1[153]=decodeArray16$1;jump$1[154]=decodeArray32$1;jump$1[155]=decodeArray64$1;jump$1[156]=invalidMinor$1;jump$1[157]=invalidMinor$1;jump$1[158]=invalidMinor$1;jump$1[159]=decodeArrayIndefinite$1;for(let t=160;t<=183;t++)jump$1[t]=decodeMapCompact$1;jump$1[184]=decodeMap8$1;jump$1[185]=decodeMap16$1;jump$1[186]=decodeMap32$1;jump$1[187]=decodeMap64$1;jump$1[188]=invalidMinor$1;jump$1[189]=invalidMinor$1;jump$1[190]=invalidMinor$1;jump$1[191]=decodeMapIndefinite$1;for(let t=192;t<=215;t++)jump$1[t]=decodeTagCompact$1;jump$1[216]=decodeTag8$1;jump$1[217]=decodeTag16$1;jump$1[218]=decodeTag32$1;jump$1[219]=decodeTag64$1;jump$1[220]=invalidMinor$1;jump$1[221]=invalidMinor$1;jump$1[222]=invalidMinor$1;jump$1[223]=invalidMinor$1;for(let t=224;t<=243;t++)jump$1[t]=errorer$1("simple values are not supported");jump$1[244]=invalidMinor$1;jump$1[245]=invalidMinor$1;jump$1[246]=invalidMinor$1;jump$1[247]=decodeUndefined$1;jump$1[248]=errorer$1("simple values are not supported");jump$1[249]=decodeFloat16$1;jump$1[250]=decodeFloat32$1;jump$1[251]=decodeFloat64$1;jump$1[252]=invalidMinor$1;jump$1[253]=invalidMinor$1;jump$1[254]=invalidMinor$1;jump$1[255]=decodeBreak$1;const quick$1=[];for(let t=0;t<24;t++)quick$1[t]=new Token$1(Type$1.uint,t,1);for(let t=-1;t>=-24;t--)quick$1[31-t]=new Token$1(Type$1.negint,t,1);quick$1[64]=new Token$1(Type$1.bytes,new Uint8Array(0),1);quick$1[96]=new Token$1(Type$1.string,"",1);quick$1[128]=new Token$1(Type$1.array,0,1);quick$1[160]=new Token$1(Type$1.map,0,1);quick$1[244]=new Token$1(Type$1.false,!1,1);quick$1[245]=new Token$1(Type$1.true,!0,1);quick$1[246]=new Token$1(Type$1.null,null,1);function quickEncodeToken$1(t){switch(t.type){case Type$1.false:return fromArray$1([244]);case Type$1.true:return fromArray$1([245]);case Type$1.null:return fromArray$1([246]);case Type$1.bytes:return t.value.length?void 0:fromArray$1([64]);case Type$1.string:return t.value===""?fromArray$1([96]):void 0;case Type$1.array:return t.value===0?fromArray$1([128]):void 0;case Type$1.map:return t.value===0?fromArray$1([160]):void 0;case Type$1.uint:return t.value<24?fromArray$1([Number(t.value)]):void 0;case Type$1.negint:if(t.value>=-24)return fromArray$1([31-Number(t.value)])}}const defaultEncodeOptions$1={float64:!1,mapSorter:mapSorter$1,quickEncodeToken:quickEncodeToken$1};function makeCborEncoders$1(){const t=[];return t[Type$1.uint.major]=encodeUint$1,t[Type$1.negint.major]=encodeNegint$1,t[Type$1.bytes.major]=encodeBytes$1,t[Type$1.string.major]=encodeString$1,t[Type$1.array.major]=encodeArray$1,t[Type$1.map.major]=encodeMap$1,t[Type$1.tag.major]=encodeTag$1,t[Type$1.float.major]=encodeFloat$1,t}const cborEncoders$1=makeCborEncoders$1(),buf$1=new Bl$1;let Ref$1=class ll{constructor(n,_){this.obj=n,this.parent=_}includes(n){let _=this;do if(_.obj===n)return!0;while(_=_.parent);return!1}static createCheck(n,_){if(n&&n.includes(_))throw new Error(`${encodeErrPrefix$1} object contains circular references`);return new ll(_,n)}};const simpleTokens$1={null:new Token$1(Type$1.null,null),undefined:new Token$1(Type$1.undefined,void 0),true:new Token$1(Type$1.true,!0),false:new Token$1(Type$1.false,!1),emptyArray:new Token$1(Type$1.array,0),emptyMap:new Token$1(Type$1.map,0)},typeEncoders$1={number(t,n,_,x){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Token$1(Type$1.float,t):t>=0?new Token$1(Type$1.uint,t):new Token$1(Type$1.negint,t)},bigint(t,n,_,x){return t>=BigInt(0)?new Token$1(Type$1.uint,t):new Token$1(Type$1.negint,t)},Uint8Array(t,n,_,x){return new Token$1(Type$1.bytes,t)},string(t,n,_,x){return new Token$1(Type$1.string,t)},boolean(t,n,_,x){return t?simpleTokens$1.true:simpleTokens$1.false},null(t,n,_,x){return simpleTokens$1.null},undefined(t,n,_,x){return simpleTokens$1.undefined},ArrayBuffer(t,n,_,x){return new Token$1(Type$1.bytes,new Uint8Array(t))},DataView(t,n,_,x){return new Token$1(Type$1.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,n,_,x){if(!t.length)return _.addBreakTokens===!0?[simpleTokens$1.emptyArray,new Token$1(Type$1.break)]:simpleTokens$1.emptyArray;x=Ref$1.createCheck(x,t);const E=[];let S=0;for(const C of t)E[S++]=objectToTokens$1(C,_,x);return _.addBreakTokens?[new Token$1(Type$1.array,t.length),E,new Token$1(Type$1.break)]:[new Token$1(Type$1.array,t.length),E]},Object(t,n,_,x){const E=n!=="Object",S=E?t.keys():Object.keys(t),C=E?t.size:S.length;if(!C)return _.addBreakTokens===!0?[simpleTokens$1.emptyMap,new Token$1(Type$1.break)]:simpleTokens$1.emptyMap;x=Ref$1.createCheck(x,t);const T=[];let B=0;for(const A of S)T[B++]=[objectToTokens$1(A,_,x),objectToTokens$1(E?t.get(A):t[A],_,x)];return sortMapEntries$1(T,_),_.addBreakTokens?[new Token$1(Type$1.map,C),T,new Token$1(Type$1.break)]:[new Token$1(Type$1.map,C),T]}};typeEncoders$1.Map=typeEncoders$1.Object;typeEncoders$1.Buffer=typeEncoders$1.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders$1[`${t}Array`]=typeEncoders$1.DataView;function objectToTokens$1(t,n={},_){const x=is$2(t),E=n&&n.typeEncoders&&n.typeEncoders[x]||typeEncoders$1[x];if(typeof E=="function"){const C=E(t,x,n,_);if(C!=null)return C}const S=typeEncoders$1[x];if(!S)throw new Error(`${encodeErrPrefix$1} unsupported type: ${x}`);return S(t,x,n,_)}function sortMapEntries$1(t,n){n.mapSorter&&t.sort(n.mapSorter)}function mapSorter$1(t,n){const _=Array.isArray(t[0])?t[0][0]:t[0],x=Array.isArray(n[0])?n[0][0]:n[0];if(_.type!==x.type)return _.type.compare(x.type);const E=_.type.major,S=cborEncoders$1[E].compareTokens(_,x);return S===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),S}function tokensToEncoded$1(t,n,_,x){if(Array.isArray(n))for(const E of n)tokensToEncoded$1(t,E,_,x);else _[n.type.major](t,n,x)}function encodeCustom$1(t,n,_){const x=objectToTokens$1(t,_);if(!Array.isArray(x)&&_.quickEncodeToken){const E=_.quickEncodeToken(x);if(E)return E;const S=n[x.type.major];if(S.encodedSize){const C=S.encodedSize(x,_),T=new Bl$1(C);if(S(T,x,_),T.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${x} was wrong`);return asU8A$1(T.chunks[0])}}return buf$1.reset(),tokensToEncoded$1(buf$1,x,n,_),buf$1.toBytes(!0)}function encode$l(t,n){return n=Object.assign({},defaultEncodeOptions$1,n),encodeCustom$1(t,cborEncoders$1,n)}const defaultDecodeOptions$1={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};let Tokeniser$1=class{constructor(n,_={}){this.pos=0,this.data=n,this.options=_}done(){return this.pos>=this.data.length}next(){const n=this.data[this.pos];let _=quick$1[n];if(_===void 0){const x=jump$1[n];if(!x)throw new Error(`${decodeErrPrefix$1} no decoder for major type ${n>>>5} (byte 0x${n.toString(16).padStart(2,"0")})`);const E=n&31;_=x(this.data,this.pos,E,this.options)}return this.pos+=_.encodedLength,_}};const DONE$1=Symbol.for("DONE"),BREAK$1=Symbol.for("BREAK");function tokenToArray$1(t,n,_){const x=[];for(let E=0;E<t.value;E++){const S=tokensToObject$1(n,_);if(S===BREAK$1){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix$1} got unexpected break to lengthed array`)}if(S===DONE$1)throw new Error(`${decodeErrPrefix$1} found array but not enough entries (got ${E}, expected ${t.value})`);x[E]=S}return x}function tokenToMap$1(t,n,_){const x=_.useMaps===!0,E=x?void 0:{},S=x?new Map:void 0;for(let C=0;C<t.value;C++){const T=tokensToObject$1(n,_);if(T===BREAK$1){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix$1} got unexpected break to lengthed map`)}if(T===DONE$1)throw new Error(`${decodeErrPrefix$1} found map but not enough entries (got ${C} [no key], expected ${t.value})`);if(x!==!0&&typeof T!="string")throw new Error(`${decodeErrPrefix$1} non-string keys not supported (got ${typeof T})`);if(_.rejectDuplicateMapKeys===!0&&(x&&S.has(T)||!x&&T in E))throw new Error(`${decodeErrPrefix$1} found repeat map key "${T}"`);const B=tokensToObject$1(n,_);if(B===DONE$1)throw new Error(`${decodeErrPrefix$1} found map but not enough entries (got ${C} [no value], expected ${t.value})`);x?S.set(T,B):E[T]=B}return x?S:E}function tokensToObject$1(t,n){if(t.done())return DONE$1;const _=t.next();if(_.type===Type$1.break)return BREAK$1;if(_.type.terminal)return _.value;if(_.type===Type$1.array)return tokenToArray$1(_,t,n);if(_.type===Type$1.map)return tokenToMap$1(_,t,n);if(_.type===Type$1.tag){if(n.tags&&typeof n.tags[_.value]=="function"){const x=tokensToObject$1(t,n);return n.tags[_.value](x)}throw new Error(`${decodeErrPrefix$1} tag not supported (${_.value})`)}throw new Error("unsupported")}function decode$i(t,n){if(!(t instanceof Uint8Array))throw new Error(`${decodeErrPrefix$1} data to decode must be a Uint8Array`);n=Object.assign({},defaultDecodeOptions$1,n);const _=n.tokenizer||new Tokeniser$1(t,n),x=tokensToObject$1(_,n);if(x===DONE$1)throw new Error(`${decodeErrPrefix$1} did not find any content to decode`);if(x===BREAK$1)throw new Error(`${decodeErrPrefix$1} got unexpected break`);if(!_.done())throw new Error(`${decodeErrPrefix$1} too many terminals, data makes no sense`);return x}var encode_1$3=encode$k,MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$k(t,n,_){n=n||[],_=_||0;for(var x=_;t>=INT$1;)n[_++]=t&255|MSB$2,t/=128;for(;t&MSBALL$1;)n[_++]=t&255|MSB$2,t>>>=7;return n[_]=t|0,encode$k.bytes=_-x+1,n}var decode$h=read$5,MSB$1$1=128,REST$1$1=127;function read$5(t,x){var _=0,x=x||0,E=0,S=x,C,T=t.length;do{if(S>=T)throw read$5.bytes=0,new RangeError("Could not decode varint");C=t[S++],_+=E<28?(C&REST$1$1)<<E:(C&REST$1$1)*Math.pow(2,E),E+=7}while(C>=MSB$1$1);return read$5.bytes=S-x,_}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(t){return t<N1$1?1:t<N2$1?2:t<N3$1?3:t<N4$1?4:t<N5$1?5:t<N6$1?6:t<N7$1?7:t<N8$1?8:t<N9$1?9:10},varint$1={encode:encode_1$3,decode:decode$h,encodingLength:length$1},_brrp_varint$1=varint$1;const decode$g=(t,n=0)=>[_brrp_varint$1.decode(t,n),_brrp_varint$1.decode.bytes],encodeTo$1=(t,n,_=0)=>(_brrp_varint$1.encode(t,n,_),n),encodingLength$1=t=>_brrp_varint$1.encodingLength(t),equals$2=(t,n)=>{if(t===n)return!0;if(t.byteLength!==n.byteLength)return!1;for(let _=0;_<t.byteLength;_++)if(t[_]!==n[_])return!1;return!0},coerce$2=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},create$4=(t,n)=>{const _=n.byteLength,x=encodingLength$1(t),E=x+encodingLength$1(_),S=new Uint8Array(E+_);return encodeTo$1(t,S,0),encodeTo$1(_,S,x),S.set(n,E),new Digest$1(t,_,n,S)},decode$f=t=>{const n=coerce$2(t),[_,x]=decode$g(n),[E,S]=decode$g(n.subarray(x)),C=n.subarray(x+S);if(C.byteLength!==E)throw new Error("Incorrect length");return new Digest$1(_,E,C,n)},equals$1=(t,n)=>{if(t===n)return!0;{const _=n;return t.code===_.code&&t.size===_.size&&_.bytes instanceof Uint8Array&&equals$2(t.bytes,_.bytes)}};let Digest$1=class{constructor(n,_,x,E){this.code=n,this.size=_,this.digest=x,this.bytes=E}};function base$5(t,n){if(t.length>=255)throw new TypeError("Alphabet too long");for(var _=new Uint8Array(256),x=0;x<_.length;x++)_[x]=255;for(var E=0;E<t.length;E++){var S=t.charAt(E),C=S.charCodeAt(0);if(_[C]!==255)throw new TypeError(S+" is ambiguous");_[C]=E}var T=t.length,B=t.charAt(0),A=Math.log(T)/Math.log(256),I=Math.log(256)/Math.log(T);function D(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var F=0,j=0,U=0,H=L.length;U!==H&&L[U]===0;)U++,F++;for(var Y=(H-U)*I+1>>>0,Z=new Uint8Array(Y);U!==H;){for(var ne=L[U],re=0,X=Y-1;(ne!==0||re<j)&&X!==-1;X--,re++)ne+=256*Z[X]>>>0,Z[X]=ne%T>>>0,ne=ne/T>>>0;if(ne!==0)throw new Error("Non-zero carry");j=re,U++}for(var ce=Y-j;ce!==Y&&Z[ce]===0;)ce++;for(var ue=B.repeat(F);ce<Y;++ce)ue+=t.charAt(Z[ce]);return ue}function M(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var F=0;if(L[F]!==" "){for(var j=0,U=0;L[F]===B;)j++,F++;for(var H=(L.length-F)*A+1>>>0,Y=new Uint8Array(H);L[F];){var Z=_[L.charCodeAt(F)];if(Z===255)return;for(var ne=0,re=H-1;(Z!==0||ne<U)&&re!==-1;re--,ne++)Z+=T*Y[re]>>>0,Y[re]=Z%256>>>0,Z=Z/256>>>0;if(Z!==0)throw new Error("Non-zero carry");U=ne,F++}if(L[F]!==" "){for(var X=H-U;X!==H&&Y[X]===0;)X++;for(var ce=new Uint8Array(j+(H-X)),ue=j;X!==H;)ce[ue++]=Y[X++];return ce}}}function V(L){var F=M(L);if(F)return F;throw new Error(`Non-${n} character`)}return{encode:D,decodeUnsafe:M,decode:V}}var src$4=base$5,_brrp__multiformats_scope_baseX$2=src$4;let Encoder$3=class{constructor(n,_,x){this.name=n,this.prefix=_,this.baseEncode=x}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}},Decoder$3=class{constructor(n,_,x){if(this.name=n,this.prefix=_,_.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=_.codePointAt(0),this.baseDecode=x}decode(n){if(typeof n=="string"){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(n){return or$2(this,n)}},ComposedDecoder$2=class{constructor(n){this.decoders=n}or(n){return or$2(this,n)}decode(n){const _=n[0],x=this.decoders[_];if(x)return x.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$2=(t,n)=>new ComposedDecoder$2({...t.decoders||{[t.prefix]:t},...n.decoders||{[n.prefix]:n}});let Codec$3=class{constructor(n,_,x,E){this.name=n,this.prefix=_,this.baseEncode=x,this.baseDecode=E,this.encoder=new Encoder$3(n,_,x),this.decoder=new Decoder$3(n,_,E)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}};const from$5=({name:t,prefix:n,encode:_,decode:x})=>new Codec$3(t,n,_,x),baseX$2=({prefix:t,name:n,alphabet:_})=>{const{encode:x,decode:E}=_brrp__multiformats_scope_baseX$2(_,n);return from$5({prefix:t,name:n,encode:x,decode:S=>coerce$2(E(S))})},decode$e=(t,n,_,x)=>{const E={};for(let I=0;I<n.length;++I)E[n[I]]=I;let S=t.length;for(;t[S-1]==="=";)--S;const C=new Uint8Array(S*_/8|0);let T=0,B=0,A=0;for(let I=0;I<S;++I){const D=E[t[I]];if(D===void 0)throw new SyntaxError(`Non-${x} character`);B=B<<_|D,T+=_,T>=8&&(T-=8,C[A++]=255&B>>T)}if(T>=_||255&B<<8-T)throw new SyntaxError("Unexpected end of data");return C},encode$j=(t,n,_)=>{const x=n[n.length-1]==="=",E=(1<<_)-1;let S="",C=0,T=0;for(let B=0;B<t.length;++B)for(T=T<<8|t[B],C+=8;C>_;)C-=_,S+=n[E&T>>C];if(C&&(S+=n[E&T<<_-C]),x)for(;S.length*_&7;)S+="=";return S},rfc4648$2=({name:t,prefix:n,bitsPerChar:_,alphabet:x})=>from$5({prefix:n,name:t,encode(E){return encode$j(E,x,_)},decode(E){return decode$e(E,x,_,t)}}),base58btc$2=baseX$2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32$2=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const format$4=(t,n)=>{const{bytes:_,version:x}=t;switch(x){case 0:return toStringV0(_,baseCache(t),n||base58btc$2.encoder);default:return toStringV1(_,baseCache(t),n||base32$2.encoder)}},cache$1=new WeakMap,baseCache=t=>{const n=cache$1.get(t);if(n==null){const _=new Map;return cache$1.set(t,_),_}return n};class CID{constructor(n,_,x,E){this.code=_,this.version=n,this.multihash=x,this.bytes=E,this["/"]=E}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:n,multihash:_}=this;if(n!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(_.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(_)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:n,digest:_}=this.multihash,x=create$4(n,_);return CID.createV1(this.code,x)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(n){return CID.equals(this,n)}static equals(n,_){const x=_;return x&&n.code===x.code&&n.version===x.version&&equals$1(n.multihash,x.multihash)}toString(n){return format$4(this,n)}toJSON(){return{"/":format$4(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(n){if(n==null)return null;const _=n;if(_ instanceof CID)return _;if(_["/"]!=null&&_["/"]===_.bytes||_.asCID===_){const{version:x,code:E,multihash:S,bytes:C}=_;return new CID(x,E,S,C||encodeCID(x,E,S.bytes))}else if(_[cidSymbol]===!0){const{version:x,multihash:E,code:S}=_,C=decode$f(E);return CID.create(x,S,C)}else return null}static create(n,_,x){if(typeof _!="number")throw new Error("String codecs are no longer supported");if(!(x.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(n){case 0:{if(_!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(n,_,x,x.bytes)}case 1:{const E=encodeCID(n,_,x.bytes);return new CID(n,_,x,E)}default:throw new Error("Invalid version")}}static createV0(n){return CID.create(0,DAG_PB_CODE,n)}static createV1(n,_){return CID.create(1,n,_)}static decode(n){const[_,x]=CID.decodeFirst(n);if(x.length)throw new Error("Incorrect length");return _}static decodeFirst(n){const _=CID.inspectBytes(n),x=_.size-_.multihashSize,E=coerce$2(n.subarray(x,x+_.multihashSize));if(E.byteLength!==_.multihashSize)throw new Error("Incorrect length");const S=E.subarray(_.multihashSize-_.digestSize),C=new Digest$1(_.multihashCode,_.digestSize,S,E);return[_.version===0?CID.createV0(C):CID.createV1(_.codec,C),n.subarray(_.size)]}static inspectBytes(n){let _=0;const x=()=>{const[D,M]=decode$g(n.subarray(_));return _+=M,D};let E=x(),S=DAG_PB_CODE;if(E===18?(E=0,_=0):S=x(),E!==0&&E!==1)throw new RangeError(`Invalid CID version ${E}`);const C=_,T=x(),B=x(),A=_+B,I=A-C;return{version:E,codec:S,multihashCode:T,digestSize:B,multihashSize:I,size:A}}static parse(n,_){const[x,E]=parseCIDtoBytes(n,_),S=CID.decode(E);if(S.version===0&&n[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache(S).set(x,n),S}}const parseCIDtoBytes=(t,n)=>{switch(t[0]){case"Q":{const _=n||base58btc$2;return[base58btc$2.prefix,_.decode(`${base58btc$2.prefix}${t}`)]}case base58btc$2.prefix:{const _=n||base58btc$2;return[base58btc$2.prefix,_.decode(t)]}case base32$2.prefix:{const _=n||base32$2;return[base32$2.prefix,_.decode(t)]}default:{if(n==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],n.decode(t)]}}},toStringV0=(t,n,_)=>{const{prefix:x}=_;if(x!==base58btc$2.prefix)throw Error(`Cannot string encode V0 in ${_.name} encoding`);const E=n.get(x);if(E==null){const S=_.encode(t).slice(1);return n.set(x,S),S}else return E},toStringV1=(t,n,_)=>{const{prefix:x}=_,E=n.get(x);if(E==null){const S=_.encode(t);return n.set(x,S),S}else return E},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(t,n,_)=>{const x=encodingLength$1(t),E=x+encodingLength$1(n),S=new Uint8Array(E+_.byteLength);return encodeTo$1(t,S,0),encodeTo$1(n,S,x),S.set(_,E),S},cidSymbol=Symbol.for("@ipld/js-cid/CID"),CID_CBOR_TAG$2=42;function cidEncoder$2(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const n=CID.asCID(t);if(!n)return null;const _=new Uint8Array(n.bytes.byteLength+1);return _.set(n.bytes,1),[new Token$1(Type$1.tag,CID_CBOR_TAG$2),new Token$1(Type$1.bytes,_)]}function undefinedEncoder$2(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$2(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$2={float64:!0,typeEncoders:{Object:cidEncoder$2,undefined:undefinedEncoder$2,number:numberEncoder$2}};function cidDecoder$2(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(t.subarray(1))}const decodeOptions$2={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions$2.tags[CID_CBOR_TAG$2]=cidDecoder$2;const name$5="dag-cbor",code$6=113,encode$i=t=>encode$l(t,encodeOptions$2),decode$d=t=>decode$i(t,decodeOptions$2),dagCBOR$1=Object.freeze(Object.defineProperty({__proto__:null,code:code$6,decode:decode$d,encode:encode$i,name:name$5},Symbol.toStringTag,{value:"Module"})),sha$4=t=>async n=>new Uint8Array(await crypto.subtle.digest(t,n)),sha256$a=from$7({name:"sha2-256",code:18,encode:sha$4("SHA-256")}),mhtype="sha2-256",defaultBase=base58btc$4,unsupportedCodecError=()=>new Error("unsupported codec"),cidifyString=t=>t&&(Array.isArray(t)?t.map(cidifyString):CID$2.parse(t)),stringifyCid=(t,n={})=>{if(!t||typeof t=="string")return t;if(Array.isArray(t))return t.map(stringifyCid);const _=n.base||defaultBase;return t.toString(_)},codecCodes={[code$7]:dagPB,[code$6]:dagCBOR$1},codecMap={raw:dagCBOR$1,"dag-pb":dagPB,"dag-cbor":dagCBOR$1};async function read$4(t,n,_={}){n=cidifyString(stringifyCid(n));const x=codecCodes[n.code];if(!x)throw unsupportedCodecError();const E=await t.block.get(n,{timeout:_.timeout}),S=await decode$o({bytes:E,codec:x,hasher:sha256$a});if(S.cid.code===code$7)return JSON.parse(new TextDecoder().decode(S.value.Data));if(S.cid.code===code$6){const C=S.value;return(_.links||[]).forEach(B=>{C[B]&&(C[B]=stringifyCid(C[B],_))}),C}}async function write$3(t,n,_,x={}){x.format==="dag-pb"&&(n=x.format);const E=codecMap[n];if(!E)throw unsupportedCodecError();E.code===code$7&&(_=typeof _=="string"?_:JSON.stringify(_),_={Data:new TextEncoder().encode(_),Links:[]}),E.code===code$6&&(x.links||[]).forEach(B=>{_[B]&&(_[B]=cidifyString(_[B]))});const S=await encode$p({value:_,codec:E,hasher:sha256$a});return await t.block.put(S.bytes,{cid:S.cid.bytes,version:S.cid.version,format:n,mhtype,pin:x.pin,timeout:x.timeout}),(E.code===code$7?S.cid.toV0():S.cid).toString(x.base||defaultBase)}class AccessControllerManifest{constructor(n,_={}){this.type=n,this.params=_}static async resolve(n,_,x={}){if(x.skipManifest){if(!x.type)throw new Error("No manifest, access-controller type required");return new AccessControllerManifest(x.type,{address:_})}else{_.indexOf("/ipfs")===0&&(_=_.split("/")[2]);const{type:E,params:S}=await read$4(n,_);return new AccessControllerManifest(E,S)}}static async create(n,_,x){return x.skipManifest?x.address:write$3(n,"dag-cbor",{type:_,params:x})}}var safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,n){var _=buffer$3,x=_.Buffer;function E(C,T){for(var B in C)T[B]=C[B]}x.from&&x.alloc&&x.allocUnsafe&&x.allocUnsafeSlow?t.exports=_:(E(_,n),n.Buffer=S);function S(C,T,B){return x(C,T,B)}S.prototype=Object.create(x.prototype),E(x,S),S.from=function(C,T,B){if(typeof C=="number")throw new TypeError("Argument must not be a number");return x(C,T,B)},S.alloc=function(C,T,B){if(typeof C!="number")throw new TypeError("Argument must be a number");var A=x(C);return T!==void 0?typeof B=="string"?A.fill(T,B):A.fill(T):A.fill(0),A},S.allocUnsafe=function(C){if(typeof C!="number")throw new TypeError("Argument must be a number");return x(C)},S.allocUnsafeSlow=function(C){if(typeof C!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(C)}})(safeBuffer,safeBuffer.exports);var safeBufferExports=safeBuffer.exports;const type$8="legacy-ipfs";class LegacyIPFSAccessController extends AccessController$1{constructor(n,_){super(),this._ipfs=n,this._write=Array.from(_.write||[])}static get type(){return type$8}get write(){return this._write}async canAppend(n,_){const x=n.key;return!!(this.write.includes(x)||this.write.includes("*"))}async load(n){n.indexOf("/ipfs")===0&&(n=n.split("/")[2]);try{const _=await read$4(this._ipfs,n);this._write=_.write}catch(_){console.log("LegacyIPFSAccessController.load ERROR:",_)}}async save(n){let _;const x={admin:[],write:this.write,read:[]};try{_=await write$3(this._ipfs,"raw",safeBufferExports.Buffer.from(JSON.stringify(x,null,2)),{format:"dag-pb"})}catch(E){console.log("LegacyIPFSAccessController.save ERROR:",E)}return{address:_,skipManifest:!0}}static async create(n,_={}){return _={..._,write:_.write||[n.identity.publicKey]},new LegacyIPFSAccessController(n._ipfs,_)}}const read$3=async(t,n,_={})=>{const x=await read$4(t,n,_);return typeof x.write=="string"?JSON.parse(x.write):x.write},write$2=write$3,type$7="ipfs";class IPFSAccessController extends AccessController$1{constructor(n,_){super(),this._ipfs=n,this._write=Array.from(_.write||[])}static get type(){return type$7}get write(){return this._write}async canAppend(n,_){const x=n.identity.id;return this.write.includes(x)||this.write.includes("*")?_.verifyIdentity(n.identity):!1}async load(n){n.indexOf("/ipfs")===0&&(n=n.split("/")[2]);try{this._write=await read$3(this._ipfs,n)}catch(_){console.log("IPFSAccessController.load ERROR:",_)}}async save(){let n;try{n=await write$2(this._ipfs,"dag-cbor",{write:JSON.stringify(this.write,null,2)})}catch(_){console.log("IPFSAccessController.save ERROR:",_)}return{address:n}}static async create(n,_={}){return _={..._,write:_.write||[n.identity.id]},new IPFSAccessController(n._ipfs,_)}}async function pMapSeries(t,n){const _=[];let x=0;for(const E of t)_.push(await n(await E,x++));return _}const ensureAddress$1=t=>t.toString().split("/").pop()==="_access"?t:path.join(t,"/_access"),type$6="orbitdb";class OrbitDBAccessController extends AccessController$1{constructor(n,_){super(),this._orbitdb=n,this._db=null,this._options=_||{}}static get type(){return type$6}get address(){return this._db.address}async canAppend(n,_){const x=new Set([...this.get("write"),...this.get("admin")]);return x.has(n.identity.id)||x.has("*")?await _.verifyIdentity(n.identity):!1}get capabilities(){if(this._db){const n=this._db.index,_=x=>{const E=x[0];n[E]=new Set([...n[E]||[],...x[1]])};return Object.entries({...n,admin:new Set([...n.admin||[],...this._db.access.write])}).forEach(_),n}return{}}get(n){return this.capabilities[n]||new Set([])}async close(){await this._db.close()}async load(n){this._db&&await this._db.close(),this._db=await this._orbitdb.keyvalue(ensureAddress$1(n),{accessController:{type:"ipfs",write:this._options.admin||[this._orbitdb.identity.id]},sync:!0}),this._db.events.on("ready",this._onUpdate.bind(this)),this._db.events.on("write",this._onUpdate.bind(this)),this._db.events.on("replicated",this._onUpdate.bind(this)),await this._db.load()}async save(){return{address:this._db.address.toString()}}async hasCapability(n,_){const x=new Set(this.get(n));return x.has(_.id)||x.has("*")}async grant(n,_){const x=new Set([...this._db.get(n)||[],_]);await this._db.put(n,Array.from(x.values()))}async revoke(n,_){const x=new Set(this._db.get(n)||[]);x.delete(_),x.size>0?await this._db.put(n,Array.from(x.values())):await this._db.del(n)}_onUpdate(){this.emit("updated")}static async create(n,_={}){const x=new OrbitDBAccessController(n,_);return await x.load(_.address||_.name||"default-access-controller"),_.write&&!_.address&&await pMapSeries(_.write,async E=>x.grant("write",E)),x}}const supportedTypes$1={"legacy-ipfs":LegacyIPFSAccessController,ipfs:IPFSAccessController,orbitdb:OrbitDBAccessController},getHandlerFor$1=t=>{if(!AccessControllers$1.isSupported(t))throw new Error(`AccessController type '${t}' is not supported`);return supportedTypes$1[t]};let AccessControllers$1=class ul{static get AccessController(){return AccessController$1}static isSupported(n){return Object.keys(supportedTypes$1).includes(n)}static addAccessController(n){if(!n.AccessController)throw new Error("AccessController class needs to be given as an option");if(!n.AccessController.type||typeof n.AccessController.type!="string")throw new Error("Given AccessController class needs to implement: static get type() { /* return a string */}.");supportedTypes$1[n.AccessController.type]=n.AccessController}static addAccessControllers(n){const _=n.AccessControllers;if(!_)throw new Error("AccessController classes need to be given as an option");_.forEach(x=>{ul.addAccessController({AccessController:x})})}static removeAccessController(n){delete supportedTypes$1[n]}static async resolve(n,_,x={}){const{type:E,params:S}=await AccessControllerManifest.resolve(n._ipfs,_,x),T=await getHandlerFor$1(E).create(n,Object.assign({},x,S));return await T.load(S.address),T}static async create(n,_,x={}){const C=await(await getHandlerFor$1(_).create(n,x)).save();return await AccessControllerManifest.create(n._ipfs,_,C)}};const pEachSeries=async(t,n)=>{let _=0;for(const x of t)if(await n(await x,_++)===pEachSeries.stop)break;return t};pEachSeries.stop=Symbol("pEachSeries.stop");var eventemitter3={exports:{}};(function(t){var n=Object.prototype.hasOwnProperty,_="~";function x(){}Object.create&&(x.prototype=Object.create(null),new x().__proto__||(_=!1));function E(B,A,I){this.fn=B,this.context=A,this.once=I||!1}function S(B,A,I,D,M){if(typeof I!="function")throw new TypeError("The listener must be a function");var V=new E(I,D||B,M),L=_?_+A:A;return B._events[L]?B._events[L].fn?B._events[L]=[B._events[L],V]:B._events[L].push(V):(B._events[L]=V,B._eventsCount++),B}function C(B,A){--B._eventsCount===0?B._events=new x:delete B._events[A]}function T(){this._events=new x,this._eventsCount=0}T.prototype.eventNames=function(){var A=[],I,D;if(this._eventsCount===0)return A;for(D in I=this._events)n.call(I,D)&&A.push(_?D.slice(1):D);return Object.getOwnPropertySymbols?A.concat(Object.getOwnPropertySymbols(I)):A},T.prototype.listeners=function(A){var I=_?_+A:A,D=this._events[I];if(!D)return[];if(D.fn)return[D.fn];for(var M=0,V=D.length,L=new Array(V);M<V;M++)L[M]=D[M].fn;return L},T.prototype.listenerCount=function(A){var I=_?_+A:A,D=this._events[I];return D?D.fn?1:D.length:0},T.prototype.emit=function(A,I,D,M,V,L){var F=_?_+A:A;if(!this._events[F])return!1;var j=this._events[F],U=arguments.length,H,Y;if(j.fn){switch(j.once&&this.removeListener(A,j.fn,void 0,!0),U){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,I),!0;case 3:return j.fn.call(j.context,I,D),!0;case 4:return j.fn.call(j.context,I,D,M),!0;case 5:return j.fn.call(j.context,I,D,M,V),!0;case 6:return j.fn.call(j.context,I,D,M,V,L),!0}for(Y=1,H=new Array(U-1);Y<U;Y++)H[Y-1]=arguments[Y];j.fn.apply(j.context,H)}else{var Z=j.length,ne;for(Y=0;Y<Z;Y++)switch(j[Y].once&&this.removeListener(A,j[Y].fn,void 0,!0),U){case 1:j[Y].fn.call(j[Y].context);break;case 2:j[Y].fn.call(j[Y].context,I);break;case 3:j[Y].fn.call(j[Y].context,I,D);break;case 4:j[Y].fn.call(j[Y].context,I,D,M);break;default:if(!H)for(ne=1,H=new Array(U-1);ne<U;ne++)H[ne-1]=arguments[ne];j[Y].fn.apply(j[Y].context,H)}}return!0},T.prototype.on=function(A,I,D){return S(this,A,I,D,!1)},T.prototype.once=function(A,I,D){return S(this,A,I,D,!0)},T.prototype.removeListener=function(A,I,D,M){var V=_?_+A:A;if(!this._events[V])return this;if(!I)return C(this,V),this;var L=this._events[V];if(L.fn)L.fn===I&&(!M||L.once)&&(!D||L.context===D)&&C(this,V);else{for(var F=0,j=[],U=L.length;F<U;F++)(L[F].fn!==I||M&&!L[F].once||D&&L[F].context!==D)&&j.push(L[F]);j.length?this._events[V]=j.length===1?j[0]:j:C(this,V)}return this},T.prototype.removeAllListeners=function(A){var I;return A?(I=_?_+A:A,this._events[I]&&C(this,I)):(this._events=new x,this._eventsCount=0),this},T.prototype.off=T.prototype.removeListener,T.prototype.addListener=T.prototype.on,T.prefixed=_,T.EventEmitter=T,t.exports=T})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter$3=getDefaultExportFromCjs(eventemitter3Exports);class TimeoutError extends Error{constructor(n){super(n),this.name="TimeoutError"}}let AbortError$3=class extends Error{constructor(n){super(),this.name="AbortError",this.message=n}};const getDOMException$1=t=>globalThis.DOMException===void 0?new AbortError$3(t):new DOMException(t),getAbortedReason$1=t=>{const n=t.reason===void 0?getDOMException$1("This operation was aborted."):t.reason;return n instanceof Error?n:getDOMException$1(n)};function pTimeout(t,n,_,x){let E;const S=new Promise((C,T)=>{if(typeof n!="number"||Math.sign(n)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(n===Number.POSITIVE_INFINITY){C(t);return}if(x={customTimers:{setTimeout,clearTimeout},...x},x.signal){const{signal:B}=x;B.aborted&&T(getAbortedReason$1(B)),B.addEventListener("abort",()=>{T(getAbortedReason$1(B))})}E=x.customTimers.setTimeout.call(void 0,()=>{if(typeof _=="function"){try{C(_())}catch(I){T(I)}return}const B=typeof _=="string"?_:`Promise timed out after ${n} milliseconds`,A=_ instanceof Error?_:new TimeoutError(B);typeof t.cancel=="function"&&t.cancel(),T(A)},n),(async()=>{try{C(await t)}catch(B){T(B)}finally{x.customTimers.clearTimeout.call(void 0,E)}})()});return S.clear=()=>{clearTimeout(E),E=void 0},S}function lowerBound(t,n,_){let x=0,E=t.length;for(;E>0;){const S=Math.trunc(E/2);let C=x+S;_(t[C],n)<=0?(x=++C,E-=S+1):E=S}return x}var __classPrivateFieldGet$1=globalThis&&globalThis.__classPrivateFieldGet||function(t,n,_,x){if(_==="a"&&!x)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?t!==n||!x:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return _==="m"?x:_==="a"?x.call(t):x?x.value:n.get(t)},_PriorityQueue_queue;class PriorityQueue{constructor(){_PriorityQueue_queue.set(this,[])}enqueue(n,_){_={priority:0,..._};const x={priority:_.priority,run:n};if(this.size&&__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f")[this.size-1].priority>=_.priority){__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").push(x);return}const E=lowerBound(__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f"),x,(S,C)=>C.priority-S.priority);__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").splice(E,0,x)}dequeue(){const n=__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").shift();return n?.run}filter(n){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").filter(_=>_.priority===n.priority).map(_=>_.run)}get size(){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").length}}_PriorityQueue_queue=new WeakMap;var __classPrivateFieldSet=globalThis&&globalThis.__classPrivateFieldSet||function(t,n,_,x,E){if(x==="m")throw new TypeError("Private method is not writable");if(x==="a"&&!E)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?t!==n||!E:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return x==="a"?E.call(t,_):E?E.value=_:n.set(t,_),_},__classPrivateFieldGet=globalThis&&globalThis.__classPrivateFieldGet||function(t,n,_,x){if(_==="a"&&!x)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?t!==n||!x:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return _==="m"?x:_==="a"?x.call(t):x?x.value:n.get(t)},_PQueue_instances,_PQueue_carryoverConcurrencyCount,_PQueue_isIntervalIgnored,_PQueue_intervalCount,_PQueue_intervalCap,_PQueue_interval,_PQueue_intervalEnd,_PQueue_intervalId,_PQueue_timeoutId,_PQueue_queue,_PQueue_queueClass,_PQueue_pending,_PQueue_concurrency,_PQueue_isPaused,_PQueue_throwOnTimeout,_PQueue_doesIntervalAllowAnother_get,_PQueue_doesConcurrentAllowAnother_get,_PQueue_next,_PQueue_onResumeInterval,_PQueue_isIntervalPaused_get,_PQueue_tryToStartAnother,_PQueue_initializeIntervalIfNeeded,_PQueue_onInterval,_PQueue_processQueue,_PQueue_throwOnAbort,_PQueue_onEvent;let AbortError$2=class extends Error{};class PQueue extends EventEmitter$3{constructor(n){var _,x,E,S;if(super(),_PQueue_instances.add(this),_PQueue_carryoverConcurrencyCount.set(this,void 0),_PQueue_isIntervalIgnored.set(this,void 0),_PQueue_intervalCount.set(this,0),_PQueue_intervalCap.set(this,void 0),_PQueue_interval.set(this,void 0),_PQueue_intervalEnd.set(this,0),_PQueue_intervalId.set(this,void 0),_PQueue_timeoutId.set(this,void 0),_PQueue_queue.set(this,void 0),_PQueue_queueClass.set(this,void 0),_PQueue_pending.set(this,0),_PQueue_concurrency.set(this,void 0),_PQueue_isPaused.set(this,void 0),_PQueue_throwOnTimeout.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue,...n},!(typeof n.intervalCap=="number"&&n.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(x=(_=n.intervalCap)===null||_===void 0?void 0:_.toString())!==null&&x!==void 0?x:""}\` (${typeof n.intervalCap})`);if(n.interval===void 0||!(Number.isFinite(n.interval)&&n.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(S=(E=n.interval)===null||E===void 0?void 0:E.toString())!==null&&S!==void 0?S:""}\` (${typeof n.interval})`);__classPrivateFieldSet(this,_PQueue_carryoverConcurrencyCount,n.carryoverConcurrencyCount,"f"),__classPrivateFieldSet(this,_PQueue_isIntervalIgnored,n.intervalCap===Number.POSITIVE_INFINITY||n.interval===0,"f"),__classPrivateFieldSet(this,_PQueue_intervalCap,n.intervalCap,"f"),__classPrivateFieldSet(this,_PQueue_interval,n.interval,"f"),__classPrivateFieldSet(this,_PQueue_queue,new n.queueClass,"f"),__classPrivateFieldSet(this,_PQueue_queueClass,n.queueClass,"f"),this.concurrency=n.concurrency,this.timeout=n.timeout,__classPrivateFieldSet(this,_PQueue_throwOnTimeout,n.throwOnTimeout===!0,"f"),__classPrivateFieldSet(this,_PQueue_isPaused,n.autoStart===!1,"f")}get concurrency(){return __classPrivateFieldGet(this,_PQueue_concurrency,"f")}set concurrency(n){if(!(typeof n=="number"&&n>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${n}\` (${typeof n})`);__classPrivateFieldSet(this,_PQueue_concurrency,n,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)}async add(n,_={}){return _={timeout:this.timeout,throwOnTimeout:__classPrivateFieldGet(this,_PQueue_throwOnTimeout,"f"),..._},new Promise((x,E)=>{__classPrivateFieldGet(this,_PQueue_queue,"f").enqueue(async()=>{var S,C,T;__classPrivateFieldSet(this,_PQueue_pending,(C=__classPrivateFieldGet(this,_PQueue_pending,"f"),C++,C),"f"),__classPrivateFieldSet(this,_PQueue_intervalCount,(T=__classPrivateFieldGet(this,_PQueue_intervalCount,"f"),T++,T),"f");try{if(!((S=_.signal)===null||S===void 0)&&S.aborted)throw new AbortError$2("The task was aborted.");let B=n({signal:_.signal});_.timeout&&(B=pTimeout(Promise.resolve(B),_.timeout)),_.signal&&(B=Promise.race([B,__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_throwOnAbort).call(this,_.signal)]));const A=await B;x(A),this.emit("completed",A)}catch(B){if(B instanceof TimeoutError&&!_.throwOnTimeout){x();return}E(B),this.emit("error",B)}finally{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_next).call(this)}},_),this.emit("add"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this)})}async addAll(n,_){return Promise.all(n.map(async x=>this.add(x,_)))}start(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")?(__classPrivateFieldSet(this,_PQueue_isPaused,!1,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this),this):this}pause(){__classPrivateFieldSet(this,_PQueue_isPaused,!0,"f")}clear(){__classPrivateFieldSet(this,_PQueue_queue,new(__classPrivateFieldGet(this,_PQueue_queueClass,"f")),"f")}async onEmpty(){__classPrivateFieldGet(this,_PQueue_queue,"f").size!==0&&await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"empty")}async onSizeLessThan(n){__classPrivateFieldGet(this,_PQueue_queue,"f").size<n||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"next",()=>__classPrivateFieldGet(this,_PQueue_queue,"f").size<n)}async onIdle(){__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&__classPrivateFieldGet(this,_PQueue_queue,"f").size===0||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"idle")}get size(){return __classPrivateFieldGet(this,_PQueue_queue,"f").size}sizeBy(n){return __classPrivateFieldGet(this,_PQueue_queue,"f").filter(n).length}get pending(){return __classPrivateFieldGet(this,_PQueue_pending,"f")}get isPaused(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")}}_PQueue_carryoverConcurrencyCount=new WeakMap,_PQueue_isIntervalIgnored=new WeakMap,_PQueue_intervalCount=new WeakMap,_PQueue_intervalCap=new WeakMap,_PQueue_interval=new WeakMap,_PQueue_intervalEnd=new WeakMap,_PQueue_intervalId=new WeakMap,_PQueue_timeoutId=new WeakMap,_PQueue_queue=new WeakMap,_PQueue_queueClass=new WeakMap,_PQueue_pending=new WeakMap,_PQueue_concurrency=new WeakMap,_PQueue_isPaused=new WeakMap,_PQueue_throwOnTimeout=new WeakMap,_PQueue_instances=new WeakSet,_PQueue_doesIntervalAllowAnother_get=function(){return __classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalCount,"f")<__classPrivateFieldGet(this,_PQueue_intervalCap,"f")},_PQueue_doesConcurrentAllowAnother_get=function(){return __classPrivateFieldGet(this,_PQueue_pending,"f")<__classPrivateFieldGet(this,_PQueue_concurrency,"f")},_PQueue_next=function(){var n;__classPrivateFieldSet(this,_PQueue_pending,(n=__classPrivateFieldGet(this,_PQueue_pending,"f"),n--,n),"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("next")},_PQueue_onResumeInterval=function(){__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),__classPrivateFieldSet(this,_PQueue_timeoutId,void 0,"f")},_PQueue_isIntervalPaused_get=function(){const n=Date.now();if(__classPrivateFieldGet(this,_PQueue_intervalId,"f")===void 0){const _=__classPrivateFieldGet(this,_PQueue_intervalEnd,"f")-n;if(_<0)__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pending,"f"):0,"f");else return __classPrivateFieldGet(this,_PQueue_timeoutId,"f")===void 0&&__classPrivateFieldSet(this,_PQueue_timeoutId,setTimeout(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onResumeInterval).call(this)},_),"f"),!0}return!1},_PQueue_tryToStartAnother=function(){if(__classPrivateFieldGet(this,_PQueue_queue,"f").size===0)return __classPrivateFieldGet(this,_PQueue_intervalId,"f")&&clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f"),this.emit("empty"),__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&this.emit("idle"),!1;if(!__classPrivateFieldGet(this,_PQueue_isPaused,"f")){const n=!__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_isIntervalPaused_get);if(__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesIntervalAllowAnother_get)&&__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesConcurrentAllowAnother_get)){const _=__classPrivateFieldGet(this,_PQueue_queue,"f").dequeue();return _?(this.emit("active"),_(),n&&__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),!0):!1}}return!1},_PQueue_initializeIntervalIfNeeded=function(){__classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalId,"f")!==void 0||(__classPrivateFieldSet(this,_PQueue_intervalId,setInterval(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this)},__classPrivateFieldGet(this,_PQueue_interval,"f")),"f"),__classPrivateFieldSet(this,_PQueue_intervalEnd,Date.now()+__classPrivateFieldGet(this,_PQueue_interval,"f"),"f"))},_PQueue_onInterval=function(){__classPrivateFieldGet(this,_PQueue_intervalCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&__classPrivateFieldGet(this,_PQueue_intervalId,"f")&&(clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f")),__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pending,"f"):0,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)},_PQueue_processQueue=function(){for(;__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this););},_PQueue_throwOnAbort=async function(n){return new Promise((_,x)=>{n.addEventListener("abort",()=>{x(new AbortError$2("The task was aborted."))},{once:!0})})},_PQueue_onEvent=async function(n,_){return new Promise(x=>{const E=()=>{_&&!_()||(this.off(n,E),x())};this.on(n,E)})};class Index{constructor(n){this.id=n,this._index=[]}get(){return this._index}async updateIndex(n,_){this._index=n.values}}function indentString(t,n=1,_={}){const{indent:x=" ",includeEmptyLines:E=!1}=_;if(typeof t!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if(typeof n!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof n}\``);if(n<0)throw new RangeError(`Expected \`count\` to be at least 0, got \`${n}\``);if(typeof x!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof x}\``);if(n===0)return t;const S=E?/^/gm:/^(?!\s*$)/gm;return t.replace(S,x.repeat(n))}var _endianness;function endianness(){if(typeof _endianness>"u"){var t=new ArrayBuffer(2),n=new Uint8Array(t),_=new Uint16Array(t);if(n[0]=1,n[1]=2,_[0]===258)_endianness="BE";else if(_[0]===513)_endianness="LE";else throw new Error("unable to figure out endianess")}return _endianness}function hostname(){return typeof global$1.location<"u"?global$1.location.hostname:""}function loadavg(){return[]}function uptime(){return 0}function freemem(){return Number.MAX_VALUE}function totalmem(){return Number.MAX_VALUE}function cpus(){return[]}function type$5(){return"Browser"}function release(){return typeof global$1.navigator<"u"?global$1.navigator.appVersion:""}function networkInterfaces(){}function getNetworkInterfaces(){}function arch(){return"javascript"}function platform$1(){return"browser"}function tmpDir(){return"/tmp"}var tmpdir=tmpDir,EOL=`
`;const os={EOL,tmpdir,tmpDir,networkInterfaces,getNetworkInterfaces,release,type:type$5,cpus,totalmem,freemem,uptime,loadavg,hostname,endianness},os$1=Object.freeze(Object.defineProperty({__proto__:null,EOL,arch,cpus,default:os,endianness,freemem,getNetworkInterfaces,hostname,loadavg,networkInterfaces,platform:platform$1,release,tmpDir,tmpdir,totalmem,type:type$5,uptime},Symbol.toStringTag,{value:"Module"}));function escapeStringRegexp(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const extractPathRegex=/\s+at.*[(\s](.*)\)?/,pathRegex=/^(?:(?:(?:node|node:[\w/]+|(?:(?:node:)?internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)(?:\.js)?:\d+:\d+)|native)/,homeDir=typeof os.homedir>"u"?"":os.homedir().replace(/\\/g,"/");function cleanStack(t,{pretty:n=!1,basePath:_}={}){const x=_&&new RegExp(`(at | \\()${escapeStringRegexp(_.replace(/\\/g,"/"))}`,"g");if(typeof t=="string")return t.replace(/\\/g,"/").split(`
`).filter(E=>{const S=E.match(extractPathRegex);if(S===null||!S[1])return!0;const C=S[1];return C.includes(".app/Contents/Resources/electron.asar")||C.includes(".app/Contents/Resources/default_app.asar")||C.includes("node_modules/electron/dist/resources/electron.asar")||C.includes("node_modules/electron/dist/resources/default_app.asar")?!1:!pathRegex.test(C)}).filter(E=>E.trim()!=="").map(E=>(x&&(E=E.replace(x,"$1")),n&&(E=E.replace(extractPathRegex,(S,C)=>S.replace(C,C.replace(homeDir,"~")))),E)).join(`
`)}const cleanInternalStack=t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,"");var Hi,cl;let AggregateError$1=(cl=class extends Error{constructor(_){if(!Array.isArray(_))throw new TypeError(`Expected input to be an Array, got ${typeof _}`);_=_.map(E=>E instanceof Error?E:E!==null&&typeof E=="object"?Object.assign(new Error(E.message),E):new Error(E));let x=_.map(E=>typeof E.stack=="string"&&E.stack.length>0?cleanInternalStack(cleanStack(E.stack)):String(E)).join(`
`);x=`
`+indentString(x,4);super(x);al(this,Hi,void 0);wt(this,"name","AggregateError");ol(this,Hi,_)}get errors(){return il(this,Hi).slice()}},Hi=new WeakMap,cl),AbortError$1=class extends Error{constructor(n){super(),this.name="AbortError",this.message=n}};const getDOMException=t=>globalThis.DOMException===void 0?new AbortError$1(t):new DOMException(t),getAbortedReason=t=>{const n=t.reason===void 0?getDOMException("This operation was aborted."):t.reason;return n instanceof Error?n:getDOMException(n)};async function pMap$2(t,n,{concurrency:_=Number.POSITIVE_INFINITY,stopOnError:x=!0,signal:E}={}){return new Promise((S,C)=>{if(t[Symbol.iterator]===void 0&&t[Symbol.asyncIterator]===void 0)throw new TypeError(`Expected \`input\` to be either an \`Iterable\` or \`AsyncIterable\`, got (${typeof t})`);if(typeof n!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(_)||_===Number.POSITIVE_INFINITY)&&_>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${_}\` (${typeof _})`);const T=[],B=[],A=new Map;let I=!1,D=!1,M=!1,V=0,L=0;const F=t[Symbol.iterator]===void 0?t[Symbol.asyncIterator]():t[Symbol.iterator](),j=H=>{I=!0,D=!0,C(H)};E&&(E.aborted&&j(getAbortedReason(E)),E.addEventListener("abort",()=>{j(getAbortedReason(E))}));const U=async()=>{if(D)return;const H=await F.next(),Y=L;if(L++,H.done){if(M=!0,V===0&&!D){if(!x&&B.length>0){j(new AggregateError$1(B));return}if(D=!0,A.size===0){S(T);return}const Z=[];for(const[ne,re]of T.entries())A.get(ne)!==pMapSkip&&Z.push(re);S(Z)}return}V++,(async()=>{try{const Z=await H.value;if(D)return;const ne=await n(Z,Y);ne===pMapSkip&&A.set(Y,ne),T[Y]=ne,V--,await U()}catch(Z){if(x)j(Z);else{B.push(Z),V--;try{await U()}catch(ne){j(ne)}}}})()};(async()=>{for(let H=0;H<_;H++){try{await U()}catch(Y){j(Y);break}if(M||I)break}})()})}const pMapSkip=Symbol("skip");class GSet{constructor(n){}append(n){}merge(n){}get(n){}has(n){}get values(){}get length(){}}class LamportClock{constructor(n,_){this.id=n,this.time=_||0}tick(){return new LamportClock(this.id,++this.time)}merge(n){return this.time=Math.max(this.time,n.time),new LamportClock(this.id,this.time)}clone(){return new LamportClock(this.id,this.time)}static compare(n,_){const x=n.time-_.time;return x===0&&n.id!==_.id?n.id<_.id?-1:1:x}}function difference$1(t,n,_){const x={},E={},S=T=>E[_?T[_]:T]=!0;t.forEach(S);const C=(T,B)=>{const A=E[_?B[_]:B]!==void 0,I=x[_?B[_]:B]!==void 0;return!A&&!I&&(T.push(B),x[_?B[_]:B]=!0),T};return n.reduce(C,[])}function findUniques(t,n){const _={},x=S=>_[S],E=S=>_[n?S[n]:S]=S;return t.forEach(E),Object.keys(_).map(x)}const isDefined$2=t=>t!=null;var defaults$3={space:"",cycles:!1,replacer:(t,n)=>n,stringify:JSON.stringify},util$a={isArray:Array.isArray,assign:Object.assign,isObject:t=>typeof t=="object",isFunction:t=>typeof t=="function",isBoolean:t=>typeof t=="boolean",isRegex:t=>t instanceof RegExp,keys:Object.keys};const DEFAULTS=defaults$3,isFunction$1=util$a.isFunction,isBoolean$1=util$a.isBoolean,isObject$2=util$a.isObject,isArray$3=util$a.isArray,isRegex=util$a.isRegex,assign$1=util$a.assign,keys$2=util$a.keys;function serialize$1(t){return t==null?t:isRegex(t)?t.toString():t.toJSON?t.toJSON():t}function stringifyDeterministic(t,n){n=n||assign$1({},DEFAULTS),isFunction$1(n)&&(n={compare:n});const _=n.space||DEFAULTS.space,x=isBoolean$1(n.cycles)?n.cycles:DEFAULTS.cycles,E=n.replacer||DEFAULTS.replacer,S=n.stringify||DEFAULTS.stringify,C=n.compare&&function(B){return function(A){return function(I,D){const M={key:I,value:A[I]},V={key:D,value:A[D]};return B(M,V)}}}(n.compare);x||S(t);const T=[];return function B(A,I,D,M){const V=_?`
`+new Array(M+1).join(_):"",L=_?": ":":";if(D=serialize$1(D),D=E.call(A,I,D),D!==void 0){if(!isObject$2(D)||D===null)return S(D);if(isArray$3(D)){const F=[];for(let j=0;j<D.length;j++){const U=B(D,j,D[j],M+1)||S(null);F.push(V+_+U)}return"["+F.join(",")+V+"]"}else{if(x){if(T.indexOf(D)!==-1)return S("[Circular]");T.push(D)}const F=keys$2(D).sort(C&&C(D)),j=[];for(let U=0;U<F.length;U++){const H=F[U],Y=B(D,H,D[H],M+1);if(!Y)continue;const Z=S(H)+L+Y;j.push(V+_+Z)}return T.splice(T.indexOf(D),1),"{"+j.join(",")+V+"}"}}}({"":t},"",t,0)}var lib$2=stringifyDeterministic;const stringify$2=getDefaultExportFromCjs(lib$2),IpfsNotDefinedError=()=>new Error("Ipfs instance not defined"),IPLD_LINKS$1=["next","refs"],getWriteFormatForVersion=t=>t===0?"dag-pb":"dag-cbor",getWriteFormat=t=>Entry.isEntry(t)?getWriteFormatForVersion(t.v):getWriteFormatForVersion(t);class Entry{static async create(n,_,x,E,S=[],C,T=[],B){if(!isDefined$2(n))throw IpfsNotDefinedError();if(!isDefined$2(_))throw new Error("Identity is required, cannot create entry");if(!isDefined$2(x))throw new Error("Entry requires an id");if(!isDefined$2(E))throw new Error("Entry requires data");if(!isDefined$2(S)||!Array.isArray(S))throw new Error("'next' argument is not an array");const A=V=>V.hash?V.hash:V,I=S.filter(isDefined$2).map(A),D={hash:null,id:x,payload:E,next:I,refs:T,v:2,clock:C||new LamportClock(_.publicKey)},M=await _.provider.sign(_,Entry.toBuffer(D));return D.key=_.publicKey,D.identity=_.toJSON(),D.sig=M,D.hash=await Entry.toMultihash(n,D,B),D}static async verify(n,_){if(!n)throw new Error("Identity-provider is required, cannot verify entry");if(!Entry.isEntry(_))throw new Error("Invalid Log entry");if(!_.key)throw new Error("Entry doesn't have a key");if(!_.sig)throw new Error("Entry doesn't have a signature");const x=Entry.toEntry(_,{presigned:!0}),E=_.v<1?"v0":"v1";return n.verify(_.sig,_.key,Entry.toBuffer(x),E)}static toBuffer(n){const _=n.v===0?JSON.stringify(n):stringify$2(n);return Buffer$5.from(_)}static async toMultihash(n,_,x=!1){if(!n)throw IpfsNotDefinedError();if(!Entry.isEntry(_))throw new Error("Invalid object format, cannot generate entry hash");const E=Entry.toEntry(_);return write$3(n,getWriteFormat(E.v),E,{links:IPLD_LINKS$1,pin:x})}static toEntry(n,{presigned:_=!1,includeHash:x=!1}={}){const E={hash:x?n.hash:null,id:n.id,payload:n.payload,next:n.next},S=n.v;return S>1&&(E.refs=n.refs),E.v=n.v,E.clock=new LamportClock(n.clock.id,n.clock.time),_||(E.key=n.key,S>0&&(E.identity=n.identity),E.sig=n.sig),E}static async fromMultihash(n,_){if(!n)throw IpfsNotDefinedError();if(!_)throw new Error(`Invalid hash: ${_}`);const x=await read$4(n,_,{links:IPLD_LINKS$1}),E=Entry.toEntry(x);return E.hash=_,E}static isEntry(n){return n&&n.id!==void 0&&n.next!==void 0&&n.payload!==void 0&&n.v!==void 0&&n.hash!==void 0&&n.clock!==void 0&&(n.refs!==void 0||n.v<2)}static compare(n,_){const x=LamportClock.compare(n.clock,_.clock);return x===0?n.clock.id<_.clock.id?-1:1:x}static isEqual(n,_){return n.hash===_.hash}static isParent(n,_){return _.next.indexOf(n.hash)>-1}static findChildren(n,_){let x=[],E=_.find(C=>Entry.isParent(n,C)),S=n;for(;E;)x.push(E),S=E,E=_.find(C=>Entry.isParent(S,C));return x=x.sort((C,T)=>C.clock.time>T.clock.time),x}}async function pDoWhilst(t,n){const _=await t();if(n(_))return pDoWhilst(t,n)}const{isEntry:isEntry$1,fromMultihash}=Entry,hasItems=t=>t&&t.length>0;class EntryIO{static async fetchParallel(n,_,{length:x,exclude:E=[],shouldExclude:S,timeout:C,concurrency:T,onProgressCallback:B}){const A=async V=>EntryIO.fetchAll(n,V,{length:x,exclude:E,shouldExclude:S,timeout:C,onProgressCallback:B,concurrency:T}),I=(V,L)=>V.concat(L),D=V=>V.reduce(I,[]),M=await pMap$2(_,A,{concurrency:Math.max(T||_.length,1)});return D(M)}static async fetchAll(n,_,{length:x=-1,exclude:E=[],shouldExclude:S,timeout:C,onProgressCallback:T,onStartProgressCallback:B,concurrency:A=32,delay:I=0}={}){const D=[],M={},V={},L=Array.isArray(_)?{0:_.slice()}:{0:[_]};let F=0,j=0,U=0;S=S||(()=>!1);const H=()=>Object.values(L).find(hasItems)!==void 0,Y=(ce,ue)=>{!V[ce]&&!S(ce)&&(L[ue]||(L[ue]=[]),L[ue].includes(ce)||L[ue].push(ce),V[ce]=!0)},Z=(ce=1)=>{const ue=(_e,ye,ie)=>{const W=L[ye];for(;W.length>0&&_e.length<ce;){const O=W.shift();_e.push(O)}return W.length===0&&delete L[ye],_e};return Object.keys(L).reduce(ue,[])},ne=ce=>{M[ce.hash||ce]=!0},re=async ce=>{if(!(!ce||M[ce]||S(ce)))return new Promise(async(ue,_e)=>{const ye=C&&C>0?setTimeout(()=>{console.warn(`Warning: Couldn't fetch entry '${ce}', request timed out (${C}ms)`),ue()},C):null,ie=W=>{if(isEntry$1(W)&&!M[W.hash]&&!S(W.hash)){const O=W.clock.time;j=Math.max(j,O),U=D.length>0?Math.min(D[D.length-1].clock.time,U):j;const z=D.length>=x&&O>=U,J=ee=>j-O+(ee+1)*ee;(x<0||D.length<x||z)&&!S(W.hash)&&!M[W.hash]&&(D.push(W),M[W.hash]=!0,T&&T(W)),x<0?(W.next.forEach(Y),W.refs&&W.refs.forEach(Y)):((D.length<x||O>U||O===U&&!M[W.hash]&&!S(W.hash))&&W.next.forEach(ee=>Y(ee,J(0))),W.refs&&D.length+W.refs.length<=x&&W.refs.forEach((ee,ae)=>Y(ee,J(ae))))}};B&&B(ce,null,0,D.length);try{const W=await fromMultihash(n,ce);I>0&&await((z=0)=>new Promise(J=>setTimeout(J,z)))(I),ie(W),ue()}catch(W){_e(W)}finally{clearTimeout(ye)}})},X=async()=>{if(F<A){const ce=Z(A);F+=ce.length,await pMap$2(ce,re,{concurrency:A}),F-=ce.length}};return E.forEach(ne),await pDoWhilst(X,H),D}}function LastWriteWins$2(t,n){const _=(S,C)=>S,x=(S,C)=>SortByClockId(S,C,_);return((S,C)=>SortByClocks(S,C,x))(t,n)}function SortByEntryHash(t,n){const _=(S,C)=>S.hash<C.hash?-1:1,x=(S,C)=>SortByClockId(S,C,_);return((S,C)=>SortByClocks(S,C,x))(t,n)}function SortByClocks(t,n,_){const x=LamportClock.compare(t.clock,n.clock);return x===0?_(t,n):x}function SortByClockId(t,n,_){return t.clock.id===n.clock.id?_(t,n):t.clock.id<n.clock.id?-1:1}function NoZeroes$2(t){const n=`Your log's tiebreaker function, ${t.name}, has returned zero and therefore cannot be`;return(x,E)=>{const S=t(x,E);if(S===0)throw Error(n);return S}}const Sorting={SortByClocks,SortByClockId,LastWriteWins:LastWriteWins$2,SortByEntryHash,NoZeroes:NoZeroes$2},IPFSNotDefinedError=()=>new Error("IPFS instance not defined"),LogNotDefinedError=()=>new Error("Log instance not defined"),NotALogError=()=>new Error("Given argument is not an instance of Log"),LtOrLteMustBeStringOrArray=()=>new Error("lt or lte must be a string or array of Entries"),{LastWriteWins:LastWriteWins$1,NoZeroes:NoZeroes$1}=Sorting,{fetchAll,fetchParallel}=EntryIO,{compare:compare$2,isEntry}=Entry,IPLD_LINKS=["heads"],last=(t,n)=>t.slice(t.length-Math.min(t.length,n),t.length);class LogIO{static async toMultihash(n,_,{format:x}={}){if(!isDefined$2(n))throw IPFSNotDefinedError();if(!isDefined$2(_))throw LogNotDefinedError();if(isDefined$2(x)||(x="dag-cbor"),_.values.length<1)throw new Error("Can't serialize an empty log");return write$3(n,x,_.toJSON(),{links:IPLD_LINKS})}static async fromMultihash(n,_,{length:x=-1,exclude:E=[],shouldExclude:S,timeout:C,concurrency:T,sortFn:B,onProgressCallback:A}){if(!isDefined$2(n))throw IPFSNotDefinedError();if(!isDefined$2(_))throw new Error(`Invalid hash: ${_}`);const I=await read$4(n,_,{links:IPLD_LINKS});if(!I.heads||!I.id)throw NotALogError();B=B||NoZeroes$1(LastWriteWins$1);const D=j=>I.heads.includes(j.hash),M=await fetchAll(n,I.heads,{length:x,exclude:E,shouldExclude:S,timeout:C,concurrency:T,onProgressCallback:A}),V=I.id,L=x>-1?last(M.sort(B),x):M,F=L.filter(D);return{logId:V,entries:L,heads:F}}static async fromEntryHash(n,_,{length:x=-1,exclude:E=[],shouldExclude:S,timeout:C,concurrency:T,sortFn:B,onProgressCallback:A}){if(!isDefined$2(n))throw IPFSNotDefinedError();if(!isDefined$2(_))throw new Error("'hash' must be defined");const I=Array.isArray(_)?_:[_];x=x>-1?Math.max(x,1):x;const D=await fetchParallel(n,I,{length:x,exclude:E,shouldExclude:S,timeout:C,concurrency:T,onProgressCallback:A});return B=B||NoZeroes$1(LastWriteWins$1),{entries:x>-1?last(D.sort(B),x):D}}static async fromJSON(n,_,{length:x=-1,timeout:E,concurrency:S,onProgressCallback:C}){if(!isDefined$2(n))throw IPFSNotDefinedError();const{id:T,heads:B}=_,A=B.map(M=>M.hash),D=(await fetchParallel(n,A,{length:x,timeout:E,concurrency:S,onProgressCallback:C})).sort(compare$2);return{logId:T,entries:D,heads:B}}static async fromEntry(n,_,{length:x=-1,exclude:E=[],shouldExclude:S,timeout:C,concurrency:T,onProgressCallback:B}){if(!isDefined$2(n))throw IPFSNotDefinedError();if(!isDefined$2(_))throw new Error("'sourceEntries' must be defined");if(!Array.isArray(_)&&!isEntry(_))throw new Error("'sourceEntries' argument must be an array of Entry instances or a single Entry");Array.isArray(_)||(_=[_]),x=x>-1?Math.max(x,_.length):x;const A=_.map(H=>H.hash),I=await fetchParallel(n,A,{length:x,exclude:E,shouldExclude:S,timeout:C,concurrency:T,onProgressCallback:B}),D=_.concat(I).concat(E),M=findUniques(D,"hash").sort(compare$2),V=M.slice(x>-1?-x:-M.length),L=difference$1(V,_,"hash"),j=((H,Y)=>{const Z=H.slice(Y.length,H.length);return Y.concat(Z)})(V,L);return{logId:j[j.length-1].id,entries:j}}}class AccessController{async canAppend(n,_){return!0}}class EntryIndex{constructor(n={}){this._cache=n}set(n,_){this._cache[n]=_}get(n){return this._cache[n]}delete(n){return delete this._cache[n]}add(n){this._cache=Object.assign(this._cache,n)}get length(){return Object.values(this._cache).length}}const{LastWriteWins,NoZeroes}=Sorting,randomId=()=>new Date().getTime().toString(),getHash=t=>t.hash,flatMap$1=(t,n)=>t.concat(n),getNextPointers=t=>t.next,maxClockTimeReducer=(t,n)=>Math.max(t,n.clock.time),uniqueEntriesReducer=(t,n)=>(t[n.hash]=n,t);class Log extends GSet{constructor(n,_,{logId:x,access:E,entries:S,heads:C,clock:T,sortFn:B,concurrency:A}={}){if(!isDefined$2(n))throw IPFSNotDefinedError();if(!isDefined$2(_))throw new Error("Identity is required");if(isDefined$2(E)||(E=new AccessController),isDefined$2(S)&&!Array.isArray(S))throw new Error("'entries' argument must be an array of Entry instances");if(isDefined$2(C)&&!Array.isArray(C))throw new Error("'heads' argument must be an array");isDefined$2(B)||(B=LastWriteWins),super(),this._sortFn=NoZeroes(B),this._storage=n,this._id=x||randomId(),this._access=E,this._identity=_;const I=(S||[]).reduce(uniqueEntriesReducer,{});this._entryIndex=new EntryIndex(I),S=Object.values(I)||[],C=C||Log.findHeads(S),this._headsIndex=C.reduce(uniqueEntriesReducer,{}),this._nextsIndex={};const D=V=>V.next.forEach(L=>this._nextsIndex[L]=V.hash);S.forEach(D),this._length=S.length;const M=Math.max(T?T.time:0,this.heads.reduce(maxClockTimeReducer,0));this._clock=new LamportClock(this._identity.publicKey,M),this.joinConcurrency=A||16}get id(){return this._id}get clock(){return this._clock}get length(){return this._length}get values(){return Object.values(this.traverse(this.heads)).reverse()}get heads(){return Object.values(this._headsIndex).sort(this._sortFn).reverse()}get tails(){return Log.findTails(this.values)}get tailHashes(){return Log.findTailHashes(this.values)}setIdentity(n){this._identity=n;const _=Math.max(this.clock.time,this.heads.reduce(maxClockTimeReducer,0));this._clock=new LamportClock(this._identity.publicKey,_)}get(n){return this._entryIndex.get(n)}has(n){return this._entryIndex.get(n.hash||n)!==void 0}traverse(n,_=-1,x){let E=n.sort(this._sortFn).reverse(),S={};const C={};let T=0;const B=D=>this.get(D),A=D=>{!D||S[D.hash]||(E=[D,...E].sort(this._sortFn).reverse(),S[D.hash]=!0)},I=D=>{C[D.hash]=D,S[D.hash]=!0,T++};for(;E.length>0&&(T<_||_<0);){const D=E.shift();if(I(D),x&&x===D.hash)break;D.next.map(B).filter(isDefined$2).forEach(A)}return E=[],S={},C}async append(n,_=1,x=!1){const E=Math.max(this.clock.time,this.heads.reduce(maxClockTimeReducer,0))+1;this._clock=new LamportClock(this.clock.id,E);const S=Object.values(this.traverse(this.heads,Math.max(_,this.heads.length))),T=(V=>{const L=new Set;for(let F=1;F<=V;F*=2){const j=Math.min(F-1,S.length-1);L.add(S[j])}return L})(Math.min(_,S.length));S.length<_&&S[S.length-1]&&T.add(S[S.length-1]);const B=Object.keys(this.heads.reverse().reduce(uniqueEntriesReducer,{})),A=V=>!B.includes(V),I=Array.from(T).map(getHash).filter(A),D=await Entry.create(this._storage,this._identity,this.id,n,B,this.clock,I,x);if(!await this._access.canAppend(D,this._identity.provider))throw new Error(`Could not append entry, key "${this._identity.id}" is not allowed to write to the log`);return this._entryIndex.set(D.hash,D),B.forEach(V=>this._nextsIndex[V]=D.hash),this._headsIndex={},this._headsIndex[D.hash]=D,this._length++,D}iterator({gt:n=void 0,gte:_=void 0,lt:x=void 0,lte:E=void 0,amount:S=-1}={}){if(S===0)return function*(){}();if(typeof E=="string"&&(E=[this.get(E)]),typeof x=="string"&&(x=[this.get(this.get(x).next[0])]),E&&!Array.isArray(E)||x&&!Array.isArray(x))throw LtOrLteMustBeStringOrArray();const C=(E||x||this.heads).filter(isDefined$2),T=_?this.get(_).hash:n?this.get(n).hash:null,B=T?-1:S||-1,A=this.traverse(C,B,T);let I=Object.values(A);return n&&I.pop(),(n||_)&&S>-1&&(I=I.slice(I.length-S,I.length)),function*(){for(const D in I)yield I[D]}()}async join(n,_=-1){if(!isDefined$2(n))throw LogNotDefinedError();if(!Log.isLog(n))throw NotALogError();if(this.id!==n.id)return;const x=Log.difference(n,this),E=this._identity.provider,S=async L=>{if(!await this._access.canAppend(L,E))throw new Error(`Could not append entry, key "${L.identity.id}" is not allowed to write to the log`)},C=async L=>{const F=await Entry.verify(E,L),j=L.identity?L.identity.publicKey:L.key;if(!F)throw new Error(`Could not validate signature "${L.sig}" for entry "${L.hash}" and key "${j}"`)},T=Object.values(x);await pMap$2(T,async L=>{await S(L),await C(L)},{concurrency:this.joinConcurrency});const B=L=>{this.get(L.hash)||this._length++,L.next.forEach(j=>this._nextsIndex[j]=L.hash)};Object.values(x).forEach(B),this._entryIndex.add(x);const A=L=>!D.find(F=>F===L.hash),I=L=>!this._nextsIndex[L.hash],D=Object.values(x).map(getNextPointers).reduce(flatMap$1,[]),M=Log.findHeads(Object.values(Object.assign({},this._headsIndex,n._headsIndex))).filter(A).filter(I).reduce(uniqueEntriesReducer,{});if(this._headsIndex=M,_>-1){let L=this.values;L=L.slice(-_),this._entryIndex=null,this._entryIndex=new EntryIndex(L.reduce(uniqueEntriesReducer,{})),this._headsIndex=Log.findHeads(L).reduce(uniqueEntriesReducer,{}),this._length=this._entryIndex.length}const V=Object.values(this._headsIndex).reduce(maxClockTimeReducer,0);return this._clock=new LamportClock(this.clock.id,Math.max(this.clock.time,V)),this}toJSON(){return{id:this.id,heads:this.heads.sort(this._sortFn).reverse().map(getHash)}}toSnapshot(){return{id:this.id,heads:this.heads,values:this.values}}toBuffer(){return Buffer$5.from(JSON.stringify(this.toJSON()))}toString(n){return this.values.slice().reverse().map((_,x)=>{const S=Entry.findChildren(_,this.values).length;let C=new Array(Math.max(S-1,0));return C=S>1?C.fill("  "):C,C=S>0?C.concat([""]):C,C.join("")+(n?n(_.payload):_.payload)}).join(`
`)}static isLog(n){return n.id!==void 0&&n.heads!==void 0&&n._entryIndex!==void 0}toMultihash({format:n}={}){return LogIO.toMultihash(this._storage,this,{format:n})}static async fromMultihash(n,_,x,{access:E,length:S=-1,exclude:C=[],shouldExclude:T,timeout:B,concurrency:A,sortFn:I,onProgressCallback:D}={}){const{logId:M,entries:V,heads:L}=await LogIO.fromMultihash(n,x,{length:S,exclude:C,shouldExclude:T,timeout:B,onProgressCallback:D,concurrency:A,sortFn:I});return new Log(n,_,{logId:M,access:E,entries:V,heads:L,sortFn:I})}static async fromEntryHash(n,_,x,{logId:E,access:S,length:C=-1,exclude:T=[],shouldExclude:B,timeout:A,concurrency:I,sortFn:D,onProgressCallback:M}={}){const{entries:V}=await LogIO.fromEntryHash(n,x,{length:C,exclude:T,shouldExclude:B,timeout:A,concurrency:I,onProgressCallback:M});return new Log(n,_,{logId:E,access:S,entries:V,sortFn:D})}static async fromJSON(n,_,x,{access:E,length:S=-1,timeout:C,sortFn:T,onProgressCallback:B}={}){const{logId:A,entries:I}=await LogIO.fromJSON(n,x,{length:S,timeout:C,onProgressCallback:B});return new Log(n,_,{logId:A,access:E,entries:I,sortFn:T})}static async fromEntry(n,_,x,{access:E,length:S=-1,exclude:C=[],timeout:T,concurrency:B,sortFn:A,onProgressCallback:I}={}){const{logId:D,entries:M}=await LogIO.fromEntry(n,x,{length:S,exclude:C,timeout:T,concurrency:B,onProgressCallback:I});return new Log(n,_,{logId:D,access:E,entries:M,sortFn:A})}static findHeads(n){const _=(C,T,B,A)=>{const I=D=>C[D]=T.hash;return T.next.forEach(I),C},x=n.reduce(_,{}),E=C=>x[C.hash]===void 0,S=(C,T)=>C.clock.id>T.clock.id;return n.filter(E).sort(S)}static findTails(n){const _={},x=[],E={};let S=[];const C=D=>{D.next.length===0&&x.push(D);const M=V=>{_[V]||(_[V]=[]),_[V].push(D)};D.next.forEach(M),S=S.concat(D.next),E[D.hash]=!0};n.forEach(C);const T=(D,M,V,L)=>D.concat(findUniques(M,"hash")),B=D=>E[D]===void 0,A=D=>_[D],I=S.filter(B).map(A).reduce(T,[]).concat(x);return findUniques(I,"hash").sort(Entry.compare)}static findTailHashes(n){const _={},x=S=>_[S.hash]=!0,E=(S,C,T,B)=>{const A=I=>{_[I]===void 0&&S.splice(0,0,I)};return C.next.reverse().forEach(A),S};return n.forEach(x),n.reduce(E,[])}static difference(n,_){const x=Object.keys(n._headsIndex),E={},S={},C=T=>{!E[T]&&!_.get(T)&&(x.push(T),E[T]=!0)};for(;x.length>0;){const T=x.shift(),B=n.get(T);B&&!_.get(T)&&B.id===_.id&&(S[B.hash]=B,E[B.hash]=!0,B.next.concat(B.refs).forEach(C))}return S}}const getNextAndRefsUnion=t=>[...new Set([...t.next,...t.refs])],flatMap=(t,n)=>t.concat(n),defaultConcurrency=32;class Replicator{constructor(n,_){this._store=n,this._concurrency=_||defaultConcurrency,this._q=new PQueue({concurrency:this._concurrency}),this._logs=[],this._fetching={},this._fetched={},this._q.on("idle",async()=>{const x=this._logs.slice();if(this._logs=[],this.onReplicationComplete&&x.length>0&&this._store._oplog)try{await this.onReplicationComplete(x),x.forEach(E=>E.values.forEach(S=>delete this._fetched[S.hash]))}catch(E){console.error(E)}})}get tasksRunning(){return this._q.pending}get tasksQueued(){return this._q.size}get unfinished(){return Object.keys(this._fetching)}async load(n){try{this._addToQueue(n)}catch(_){console.error(_)}}async _addToQueue(n){const _=E=>E&&this._store._oplog&&(this._store._oplog.has(E)||this._fetching[E]!==void 0||this._fetched[E]),x=E=>(this._fetching[E.hash||E]=!0,async()=>{E.hash&&this.onReplicationQueued&&this.onReplicationQueued(E);try{const S=await this._replicateLog(E);this._logs.push(S)}catch(S){throw console.error(S),S}delete this._fetching[E.hash||E]});if(n.length>0){const E=n.filter(S=>!_(S.hash||S)).map(S=>x(S));E.length>0&&this._q.addAll(E)}}async stop(){this._q.pause(),this._q.clear(),await this._q.onIdle(),this._logs=[],this._fetching={},this._fetched={}}async _replicateLog(n){const _=n.hash||n,x=T=>{this._fetched[T.hash]=!0,this.onReplicationProgress&&this.onReplicationProgress(T)},E=T=>T&&T!==_&&this._store._oplog&&(this._store._oplog.has(T)||this._fetching[T]!==void 0||this._fetched[T]!==void 0),S=await Log.fromEntryHash(this._store._ipfs,this._store.identity,_,{logId:this._store.id,access:this._store.access,length:-1,exclude:[],shouldExclude:E,concurrency:this._concurrency,onProgressCallback:x}),C=S.values.map(getNextAndRefsUnion).reduce(flatMap,[]);try{this._addToQueue(C)}catch(T){throw console.error(T),T}return S}}class ReplicationInfo{constructor(){this.progress=0,this.max=0}reset(){this.progress=0,this.max=0}}var util$9={},types$1={},toStr=Object.prototype.toString,fnToStr=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag=shams(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function(n){if(typeof n!="function")return!1;if(isFnRegex.test(fnToStr.call(n)))return!0;if(!hasToStringTag){var _=toStr.call(n);return _==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var x=getGeneratorFunc();GeneratorFunction=x?getProto(x):!1}return getProto(n)===GeneratorFunction};(function(t){var n=isArguments$2,_=isGeneratorFunction,x=whichTypedArray$2,E=isTypedArray$2;function S(Ne){return Ne.call.bind(Ne)}var C=typeof BigInt<"u",T=typeof Symbol<"u",B=S(Object.prototype.toString),A=S(Number.prototype.valueOf),I=S(String.prototype.valueOf),D=S(Boolean.prototype.valueOf);if(C)var M=S(BigInt.prototype.valueOf);if(T)var V=S(Symbol.prototype.valueOf);function L(Ne,qe){if(typeof Ne!="object")return!1;try{return qe(Ne),!0}catch{return!1}}t.isArgumentsObject=n,t.isGeneratorFunction=_,t.isTypedArray=E;function F(Ne){return typeof Promise<"u"&&Ne instanceof Promise||Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"&&typeof Ne.catch=="function"}t.isPromise=F;function j(Ne){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(Ne):E(Ne)||te(Ne)}t.isArrayBufferView=j;function U(Ne){return x(Ne)==="Uint8Array"}t.isUint8Array=U;function H(Ne){return x(Ne)==="Uint8ClampedArray"}t.isUint8ClampedArray=H;function Y(Ne){return x(Ne)==="Uint16Array"}t.isUint16Array=Y;function Z(Ne){return x(Ne)==="Uint32Array"}t.isUint32Array=Z;function ne(Ne){return x(Ne)==="Int8Array"}t.isInt8Array=ne;function re(Ne){return x(Ne)==="Int16Array"}t.isInt16Array=re;function X(Ne){return x(Ne)==="Int32Array"}t.isInt32Array=X;function ce(Ne){return x(Ne)==="Float32Array"}t.isFloat32Array=ce;function ue(Ne){return x(Ne)==="Float64Array"}t.isFloat64Array=ue;function _e(Ne){return x(Ne)==="BigInt64Array"}t.isBigInt64Array=_e;function ye(Ne){return x(Ne)==="BigUint64Array"}t.isBigUint64Array=ye;function ie(Ne){return B(Ne)==="[object Map]"}ie.working=typeof Map<"u"&&ie(new Map);function W(Ne){return typeof Map>"u"?!1:ie.working?ie(Ne):Ne instanceof Map}t.isMap=W;function O(Ne){return B(Ne)==="[object Set]"}O.working=typeof Set<"u"&&O(new Set);function z(Ne){return typeof Set>"u"?!1:O.working?O(Ne):Ne instanceof Set}t.isSet=z;function J(Ne){return B(Ne)==="[object WeakMap]"}J.working=typeof WeakMap<"u"&&J(new WeakMap);function ee(Ne){return typeof WeakMap>"u"?!1:J.working?J(Ne):Ne instanceof WeakMap}t.isWeakMap=ee;function ae(Ne){return B(Ne)==="[object WeakSet]"}ae.working=typeof WeakSet<"u"&&ae(new WeakSet);function oe(Ne){return ae(Ne)}t.isWeakSet=oe;function se(Ne){return B(Ne)==="[object ArrayBuffer]"}se.working=typeof ArrayBuffer<"u"&&se(new ArrayBuffer);function G(Ne){return typeof ArrayBuffer>"u"?!1:se.working?se(Ne):Ne instanceof ArrayBuffer}t.isArrayBuffer=G;function q(Ne){return B(Ne)==="[object DataView]"}q.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&q(new DataView(new ArrayBuffer(1),0,1));function te(Ne){return typeof DataView>"u"?!1:q.working?q(Ne):Ne instanceof DataView}t.isDataView=te;var fe=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function he(Ne){return B(Ne)==="[object SharedArrayBuffer]"}function Ee(Ne){return typeof fe>"u"?!1:(typeof he.working>"u"&&(he.working=he(new fe)),he.working?he(Ne):Ne instanceof fe)}t.isSharedArrayBuffer=Ee;function we(Ne){return B(Ne)==="[object AsyncFunction]"}t.isAsyncFunction=we;function xe(Ne){return B(Ne)==="[object Map Iterator]"}t.isMapIterator=xe;function $e(Ne){return B(Ne)==="[object Set Iterator]"}t.isSetIterator=$e;function ge(Ne){return B(Ne)==="[object Generator]"}t.isGeneratorObject=ge;function Se(Ne){return B(Ne)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=Se;function me(Ne){return L(Ne,A)}t.isNumberObject=me;function Be(Ne){return L(Ne,I)}t.isStringObject=Be;function ve(Ne){return L(Ne,D)}t.isBooleanObject=ve;function Ae(Ne){return C&&L(Ne,M)}t.isBigIntObject=Ae;function Ve(Ne){return T&&L(Ne,V)}t.isSymbolObject=Ve;function Pe(Ne){return me(Ne)||Be(Ne)||ve(Ne)||Ae(Ne)||Ve(Ne)}t.isBoxedPrimitive=Pe;function Re(Ne){return typeof Uint8Array<"u"&&(G(Ne)||Ee(Ne))}t.isAnyArrayBuffer=Re,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(Ne){Object.defineProperty(t,Ne,{enumerable:!1,value:function(){throw new Error(Ne+" is not supported in userland")}})})})(types$1);var isBufferBrowser=function(n){return n&&typeof n=="object"&&typeof n.copy=="function"&&typeof n.fill=="function"&&typeof n.readUInt8=="function"},inherits_browser$1={exports:{}};typeof Object.create=="function"?inherits_browser$1.exports=function(n,_){_&&(n.super_=_,n.prototype=Object.create(_.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser$1.exports=function(n,_){if(_){n.super_=_;var x=function(){};x.prototype=_.prototype,n.prototype=new x,n.prototype.constructor=n}};var inherits_browserExports=inherits_browser$1.exports;(function(t){var n=Object.getOwnPropertyDescriptors||function(te){for(var fe=Object.keys(te),he={},Ee=0;Ee<fe.length;Ee++)he[fe[Ee]]=Object.getOwnPropertyDescriptor(te,fe[Ee]);return he},_=/%[sdj%]/g;t.format=function(q){if(!ne(q)){for(var te=[],fe=0;fe<arguments.length;fe++)te.push(C(arguments[fe]));return te.join(" ")}for(var fe=1,he=arguments,Ee=he.length,we=String(q).replace(_,function($e){if($e==="%%")return"%";if(fe>=Ee)return $e;switch($e){case"%s":return String(he[fe++]);case"%d":return Number(he[fe++]);case"%j":try{return JSON.stringify(he[fe++])}catch{return"[Circular]"}default:return $e}}),xe=he[fe];fe<Ee;xe=he[++fe])H(xe)||!ue(xe)?we+=" "+xe:we+=" "+C(xe);return we},t.deprecate=function(q,te){if(typeof browser$1$1<"u"&&browser$1$1.noDeprecation===!0)return q;if(typeof browser$1$1>"u")return function(){return t.deprecate(q,te).apply(this,arguments)};var fe=!1;function he(){if(!fe){if(browser$1$1.throwDeprecation)throw new Error(te);browser$1$1.traceDeprecation?console.trace(te):console.error(te),fe=!0}return q.apply(this,arguments)}return he};var x={},E=/^$/;if({}.NODE_DEBUG){var S={}.NODE_DEBUG;S=S.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),E=new RegExp("^"+S+"$","i")}t.debuglog=function(q){if(q=q.toUpperCase(),!x[q])if(E.test(q)){var te=browser$1$1.pid;x[q]=function(){var fe=t.format.apply(t,arguments);console.error("%s %d: %s",q,te,fe)}}else x[q]=function(){};return x[q]};function C(q,te){var fe={seen:[],stylize:B};return arguments.length>=3&&(fe.depth=arguments[2]),arguments.length>=4&&(fe.colors=arguments[3]),U(te)?fe.showHidden=te:te&&t._extend(fe,te),X(fe.showHidden)&&(fe.showHidden=!1),X(fe.depth)&&(fe.depth=2),X(fe.colors)&&(fe.colors=!1),X(fe.customInspect)&&(fe.customInspect=!0),fe.colors&&(fe.stylize=T),I(fe,q,fe.depth)}t.inspect=C,C.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},C.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function T(q,te){var fe=C.styles[te];return fe?"\x1B["+C.colors[fe][0]+"m"+q+"\x1B["+C.colors[fe][1]+"m":q}function B(q,te){return q}function A(q){var te={};return q.forEach(function(fe,he){te[fe]=!0}),te}function I(q,te,fe){if(q.customInspect&&te&&ie(te.inspect)&&te.inspect!==t.inspect&&!(te.constructor&&te.constructor.prototype===te)){var he=te.inspect(fe,q);return ne(he)||(he=I(q,he,fe)),he}var Ee=D(q,te);if(Ee)return Ee;var we=Object.keys(te),xe=A(we);if(q.showHidden&&(we=Object.getOwnPropertyNames(te)),ye(te)&&(we.indexOf("message")>=0||we.indexOf("description")>=0))return M(te);if(we.length===0){if(ie(te)){var $e=te.name?": "+te.name:"";return q.stylize("[Function"+$e+"]","special")}if(ce(te))return q.stylize(RegExp.prototype.toString.call(te),"regexp");if(_e(te))return q.stylize(Date.prototype.toString.call(te),"date");if(ye(te))return M(te)}var ge="",Se=!1,me=["{","}"];if(j(te)&&(Se=!0,me=["[","]"]),ie(te)){var Be=te.name?": "+te.name:"";ge=" [Function"+Be+"]"}if(ce(te)&&(ge=" "+RegExp.prototype.toString.call(te)),_e(te)&&(ge=" "+Date.prototype.toUTCString.call(te)),ye(te)&&(ge=" "+M(te)),we.length===0&&(!Se||te.length==0))return me[0]+ge+me[1];if(fe<0)return ce(te)?q.stylize(RegExp.prototype.toString.call(te),"regexp"):q.stylize("[Object]","special");q.seen.push(te);var ve;return Se?ve=V(q,te,fe,xe,we):ve=we.map(function(Ae){return L(q,te,fe,xe,Ae,Se)}),q.seen.pop(),F(ve,ge,me)}function D(q,te){if(X(te))return q.stylize("undefined","undefined");if(ne(te)){var fe="'"+JSON.stringify(te).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return q.stylize(fe,"string")}if(Z(te))return q.stylize(""+te,"number");if(U(te))return q.stylize(""+te,"boolean");if(H(te))return q.stylize("null","null")}function M(q){return"["+Error.prototype.toString.call(q)+"]"}function V(q,te,fe,he,Ee){for(var we=[],xe=0,$e=te.length;xe<$e;++xe)ae(te,String(xe))?we.push(L(q,te,fe,he,String(xe),!0)):we.push("");return Ee.forEach(function(ge){ge.match(/^\d+$/)||we.push(L(q,te,fe,he,ge,!0))}),we}function L(q,te,fe,he,Ee,we){var xe,$e,ge;if(ge=Object.getOwnPropertyDescriptor(te,Ee)||{value:te[Ee]},ge.get?ge.set?$e=q.stylize("[Getter/Setter]","special"):$e=q.stylize("[Getter]","special"):ge.set&&($e=q.stylize("[Setter]","special")),ae(he,Ee)||(xe="["+Ee+"]"),$e||(q.seen.indexOf(ge.value)<0?(H(fe)?$e=I(q,ge.value,null):$e=I(q,ge.value,fe-1),$e.indexOf(`
`)>-1&&(we?$e=$e.split(`
`).map(function(Se){return"  "+Se}).join(`
`).slice(2):$e=`
`+$e.split(`
`).map(function(Se){return"   "+Se}).join(`
`))):$e=q.stylize("[Circular]","special")),X(xe)){if(we&&Ee.match(/^\d+$/))return $e;xe=JSON.stringify(""+Ee),xe.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(xe=xe.slice(1,-1),xe=q.stylize(xe,"name")):(xe=xe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),xe=q.stylize(xe,"string"))}return xe+": "+$e}function F(q,te,fe){var he=q.reduce(function(Ee,we){return we.indexOf(`
`)>=0,Ee+we.replace(/\u001b\[\d\d?m/g,"").length+1},0);return he>60?fe[0]+(te===""?"":te+`
 `)+" "+q.join(`,
  `)+" "+fe[1]:fe[0]+te+" "+q.join(", ")+" "+fe[1]}t.types=types$1;function j(q){return Array.isArray(q)}t.isArray=j;function U(q){return typeof q=="boolean"}t.isBoolean=U;function H(q){return q===null}t.isNull=H;function Y(q){return q==null}t.isNullOrUndefined=Y;function Z(q){return typeof q=="number"}t.isNumber=Z;function ne(q){return typeof q=="string"}t.isString=ne;function re(q){return typeof q=="symbol"}t.isSymbol=re;function X(q){return q===void 0}t.isUndefined=X;function ce(q){return ue(q)&&O(q)==="[object RegExp]"}t.isRegExp=ce,t.types.isRegExp=ce;function ue(q){return typeof q=="object"&&q!==null}t.isObject=ue;function _e(q){return ue(q)&&O(q)==="[object Date]"}t.isDate=_e,t.types.isDate=_e;function ye(q){return ue(q)&&(O(q)==="[object Error]"||q instanceof Error)}t.isError=ye,t.types.isNativeError=ye;function ie(q){return typeof q=="function"}t.isFunction=ie;function W(q){return q===null||typeof q=="boolean"||typeof q=="number"||typeof q=="string"||typeof q=="symbol"||typeof q>"u"}t.isPrimitive=W,t.isBuffer=isBufferBrowser;function O(q){return Object.prototype.toString.call(q)}function z(q){return q<10?"0"+q.toString(10):q.toString(10)}var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ee(){var q=new Date,te=[z(q.getHours()),z(q.getMinutes()),z(q.getSeconds())].join(":");return[q.getDate(),J[q.getMonth()],te].join(" ")}t.log=function(){console.log("%s - %s",ee(),t.format.apply(t,arguments))},t.inherits=inherits_browserExports,t._extend=function(q,te){if(!te||!ue(te))return q;for(var fe=Object.keys(te),he=fe.length;he--;)q[fe[he]]=te[fe[he]];return q};function ae(q,te){return Object.prototype.hasOwnProperty.call(q,te)}var oe=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(te){if(typeof te!="function")throw new TypeError('The "original" argument must be of type Function');if(oe&&te[oe]){var fe=te[oe];if(typeof fe!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(fe,oe,{value:fe,enumerable:!1,writable:!1,configurable:!0}),fe}function fe(){for(var he,Ee,we=new Promise(function(ge,Se){he=ge,Ee=Se}),xe=[],$e=0;$e<arguments.length;$e++)xe.push(arguments[$e]);xe.push(function(ge,Se){ge?Ee(ge):he(Se)});try{te.apply(this,xe)}catch(ge){Ee(ge)}return we}return Object.setPrototypeOf(fe,Object.getPrototypeOf(te)),oe&&Object.defineProperty(fe,oe,{value:fe,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(fe,n(te))},t.promisify.custom=oe;function se(q,te){if(!q){var fe=new Error("Promise was rejected with a falsy value");fe.reason=q,q=fe}return te(q)}function G(q){if(typeof q!="function")throw new TypeError('The "original" argument must be of type Function');function te(){for(var fe=[],he=0;he<arguments.length;he++)fe.push(arguments[he]);var Ee=fe.pop();if(typeof Ee!="function")throw new TypeError("The last argument must be of type Function");var we=this,xe=function(){return Ee.apply(we,arguments)};q.apply(this,fe).then(function($e){browser$1$1.nextTick(xe.bind(null,null,$e))},function($e){browser$1$1.nextTick(se.bind(null,$e,xe))})}return Object.setPrototypeOf(te,Object.getPrototypeOf(q)),Object.defineProperties(te,n(q)),te}t.callbackify=G})(util$9);const fs$1=require$$0$2,format$3=util$9.format,EventEmitter$2=eventsExports.EventEmitter;let isElectronRenderer=browser$1$1.type&&browser$1$1.type==="renderer",isNodejs=!!(!isElectronRenderer&&browser$1$1.version);const LogLevels$1={DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",NONE:"NONE"};let GlobalLogLevel=LogLevels$1.DEBUG,GlobalLogfile=null,GlobalEvents=new EventEmitter$2,Colors={Black:0,Red:1,Green:2,Yellow:3,Blue:4,Magenta:5,Cyan:6,Grey:7,White:9,Default:9};isNodejs||(Colors={Black:"Black",Red:"IndianRed",Green:"LimeGreen",Yellow:"Orange",Blue:"RoyalBlue",Magenta:"Orchid",Cyan:"SkyBlue",Grey:"DimGrey",White:"White",Default:"Black"});const loglevelColors=[Colors.Cyan,Colors.Green,Colors.Yellow,Colors.Red,Colors.Default],defaultOptions={useColors:!0,color:Colors.Default,showTimestamp:!0,useLocalTime:!1,showLevel:!0,filename:GlobalLogfile,appendFile:!0};let Logger$1=class{constructor(n,_){this.category=n;let x={};Object.assign(x,defaultOptions),Object.assign(x,_),this.options=x,this.debug=this.debug.bind(this),this.log=this.log.bind(this),this.info=this.info.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this)}debug(){this._shouldLog(LogLevels$1.DEBUG)&&this._write(LogLevels$1.DEBUG,format$3.apply(null,arguments))}log(){this._shouldLog(LogLevels$1.DEBUG)&&this.debug.apply(this,arguments)}info(){this._shouldLog(LogLevels$1.INFO)&&this._write(LogLevels$1.INFO,format$3.apply(null,arguments))}warn(){this._shouldLog(LogLevels$1.WARN)&&this._write(LogLevels$1.WARN,format$3.apply(null,arguments))}error(){this._shouldLog(LogLevels$1.ERROR)&&this._write(LogLevels$1.ERROR,format$3.apply(null,arguments))}_write(n,_){(this.options.filename||GlobalLogfile)&&!this.fileWriter&&isNodejs&&(this.fileWriter=fs$1.openSync(this.options.filename||GlobalLogfile,this.options.appendFile?"a+":"w+"));let x=this._format(n,_),E=this._createLogMessage(n,_),S=this._createLogMessage(n,_,x.timestamp,x.level,x.category,x.text);this.fileWriter&&isNodejs&&fs$1.writeSync(this.fileWriter,E+`
`,null,"utf-8"),isNodejs||!this.options.useColors?(console.log(S),GlobalEvents.emit("data",this.category,n,_)):n===LogLevels$1.ERROR?this.options.showTimestamp&&this.options.showLevel?console.error(S,x.timestamp,x.level,x.category,x.text):this.options.showTimestamp&&!this.options.showLevel?console.error(S,x.timestamp,x.category,x.text):!this.options.showTimestamp&&this.options.showLevel?console.error(S,x.level,x.category,x.text):console.error(S,x.category,x.text):this.options.showTimestamp&&this.options.showLevel?console.log(S,x.timestamp,x.level,x.category,x.text):this.options.showTimestamp&&!this.options.showLevel?console.log(S,x.timestamp,x.category,x.text):!this.options.showTimestamp&&this.options.showLevel?console.log(S,x.level,x.category,x.text):console.log(S,x.category,x.text)}_format(n,_){let x="",E="",S="",C=": ";if(this.options.useColors){const T=Object.keys(LogLevels$1).map(A=>LogLevels$1[A]).indexOf(n),B=this.options.color;isNodejs?(this.options.showTimestamp&&(x="\x1B[3"+Colors.Grey+"m"),this.options.showLevel&&(E="\x1B[3"+loglevelColors[T]+";22m"),S="\x1B[3"+B+";1m",C="\x1B[0m: "):(this.options.showTimestamp&&(x="color:"+Colors.Grey),this.options.showLevel&&(E="color:"+loglevelColors[T]),S="color:"+B+"; font-weight: bold")}return{timestamp:x,level:E,category:S,text:C}}_createLogMessage(n,_,x,E,S,C){x=x||"",E=E||"",S=S||"",C=C||": ",!isNodejs&&this.options.useColors&&(this.options.showTimestamp&&(x="%c"),this.options.showLevel&&(E="%c"),S="%c",C=": %c");let T="";return this.options.showTimestamp&&!this.options.useLocalTime&&(T+=""+new Date().toISOString()+" "),this.options.showTimestamp&&this.options.useLocalTime&&(T+=""+new Date().toLocaleString()+" "),T=x+T,this.options.showLevel&&(T+=E+"["+n+"]"+(n===LogLevels$1.INFO||n===LogLevels$1.WARN?" ":"")+" "),T+=S+this.category,T+=C+_,T}_shouldLog(n){let _=typeof browser$1$1<"u"&&browser$1$1.env!==void 0&&{}.LOG!==void 0?{}.LOG.toUpperCase():null;_=typeof window<"u"&&window.LOG?window.LOG.toUpperCase():_;const x=_||GlobalLogLevel,E=Object.keys(LogLevels$1).map(T=>LogLevels$1[T]),S=E.indexOf(n),C=E.indexOf(x);return S>=C}};var src$3={Colors,LogLevels:LogLevels$1,setLogLevel:t=>{GlobalLogLevel=t},setLogfile:t=>{GlobalLogfile=t},create:(t,n)=>new Logger$1(t,n),forceBrowserMode:t=>isNodejs=!t,events:GlobalEvents};const Logger$2=getDefaultExportFromCjs(src$3),logger$n=Logger$2.create("orbit-db.store",{color:Logger$2.Colors.Blue});Logger$2.setLogLevel("ERROR");const DefaultOptions={Index,maxHistory:-1,fetchEntryTimeout:null,referenceCount:32,replicationConcurrency:32,syncLocal:!1,sortFn:void 0};class Store{constructor(n,_,x,E){if(!_)throw new Error("Identity required");const S=Object.assign({},DefaultOptions);Object.assign(S,E),this.options=S,this._type="store",this.id=x.toString(),this.identity=_,this.address=x,this.dbname=x.path||"",this.events=new eventsExports.EventEmitter,this.remoteHeadsPath=path.join(this.id,"_remoteHeads"),this.localHeadsPath=path.join(this.id,"_localHeads"),this.snapshotPath=path.join(this.id,"snapshot"),this.queuePath=path.join(this.id,"queue"),this.manifestPath=path.join(this.id,"_manifest"),this._ipfs=n,this._cache=E.cache;const C={canAppend:T=>T.identity.publicKey===_.publicKey};this.access=E.accessController||C,this._oplog=new Log(this._ipfs,this.identity,{logId:this.id,access:this.access,sortFn:this.options.sortFn}),this._queue=new PQueue({concurrency:1}),this._index=new this.options.Index(this.address.root),this._replicationStatus=new ReplicationInfo,this._stats={snapshot:{bytesLoaded:-1},syncRequestsReceieved:0};try{const T=async I=>{this._recalculateReplicationMax(I.clock?I.clock.time:0),this.events.emit("replicate",this.address.toString(),I)},B=async I=>{const D=this.replicationStatus.progress,M=this.replicationStatus.max;this._recalculateReplicationStatus(I.clock.time),(this._oplog.length+1>this.replicationStatus.progress||this.replicationStatus.progress>D||this.replicationStatus.max>M)&&this.events.emit("replicate.progress",this.address.toString(),I.hash,I,this.replicationStatus.progress,this.replicationStatus.max)},A=async I=>{const D=async()=>{try{if(this._oplog&&I.length>0){for(const V of I)await this._oplog.join(V);const M=this._oplog.heads;await this._cache.set(this.remoteHeadsPath,M),logger$n.debug(`Saved heads ${M.length} [${M.map(V=>V.hash).join(", ")}]`),await this._updateIndex(),this._oplog.length>this.replicationStatus.progress&&this._recalculateReplicationStatus(this._oplog.length),this.events.emit("replicated",this.address.toString(),I.length,this)}}catch(M){console.error(M)}};await this._queue.add(D.bind(this))};this._replicator=new Replicator(this,this.options.replicationConcurrency),this._loader=this._replicator,this._replicator.onReplicationQueued=T,this._replicator.onReplicationProgress=B,this._replicator.onReplicationComplete=A}catch(T){console.error("Store Error:",T)}this.events.on("replicated.progress",(T,B,A,I,D)=>{this._procEntry(A)}),this.events.on("write",(T,B,A)=>{this._procEntry(B)})}get all(){return Array.isArray(this._index._index)?this._index._index:Object.keys(this._index._index).map(n=>this._index._index[n])}get index(){return this._index._index}get type(){return this._type}get key(){return this._key}get replicationStatus(){return this._replicationStatus}setIdentity(n){this.identity=n,this._oplog.setIdentity(n)}async close(){await this._replicator.stop(),await this._queue.onIdle(),this._replicationStatus.reset(),this._stats={snapshot:{bytesLoaded:-1},syncRequestsReceieved:0},this.options.onClose&&await this.options.onClose(this),this.access.close&&await this.access.close();for(const n in this.events._events)this.events.removeAllListeners(n);return this._oplog=null,this.events.emit("closed",this.address.toString()),Promise.resolve()}async drop(){this.options.onDrop&&await this.options.onDrop(this),await this._cache.del(this.localHeadsPath),await this._cache.del(this.remoteHeadsPath),await this._cache.del(this.snapshotPath),await this._cache.del(this.queuePath),await this._cache.del(this.manifestPath),await this.close(),this._index=new this.options.Index(this.address.root),this._oplog=new Log(this._ipfs,this.identity,{logId:this.id,access:this.access,sortFn:this.options.sortFn}),this._cache=this.options.cache}async load(n,_={}){typeof n=="object"&&(_=n,n=void 0),n=n||this.options.maxHistory;const x=_.fetchEntryTimeout||this.options.fetchEntryTimeout;this.options.onLoad&&await this.options.onLoad(this);const E=await this._cache.get(this.localHeadsPath)||[],S=await this._cache.get(this.remoteHeadsPath)||[],C=E.concat(S);C.length>0&&this.events.emit("load",this.address.toString(),C),C.forEach(B=>this._recalculateReplicationMax(B.clock.time));const T=await Log.fromEntryHash(this._ipfs,this.identity,C.map(B=>B.hash),{logId:this.id,access:this.access,sortFn:this.options.sortFn,length:n,onProgressCallback:this._onLoadProgress.bind(this),timeout:x,concurrency:this.options.replicationConcurrency});this._oplog=T,C.length>0&&await this._updateIndex(),this.events.emit("ready",this.address.toString(),this._oplog.heads)}async sync(n){return this._stats.syncRequestsReceieved+=1,logger$n.debug(`Sync request #${this._stats.syncRequestsReceieved} ${n.length}`),n.length===0?void 0:pEachSeries(n,async x=>{if(!x)return console.warn("Warning: Given input entry was 'null'."),Promise.resolve(null);const E=this.identity.provider;if(!E)throw new Error("Identity-provider is required, cannot verify entry");if(!await this.access.canAppend(x,E))return console.warn("Warning: Given input entry is not allowed in this log and was discarded (no write access)."),Promise.resolve(null);const C=Entry.toEntry(x);return await write$3(this._ipfs,getWriteFormat(C),C,{links:IPLD_LINKS$1,onlyHash:!0})!==x.hash&&console.warn(`"WARNING! Head hash didn't match the contents`),x}).then(async x=>this._replicator.load(x.filter(E=>E!==null)))}loadMoreFrom(n,_){this._replicator.load(_)}async saveSnapshot(){const n=this._replicator.unfinished,_=this._oplog.toSnapshot(),x=Buffer$5.from(JSON.stringify({id:_.id,heads:_.heads,size:_.values.length,values:_.values,type:this.type})),E=await this._ipfs.add(x);return E.hash=E.cid.toString(),await this._cache.set(this.snapshotPath,E),await this._cache.set(this.queuePath,n),logger$n.debug(`Saved snapshot: ${E.hash}, queue length: ${n.length}`),[E]}async loadFromSnapshot(n){this.options.onLoad&&await this.options.onLoad(this),this.events.emit("load",this.address.toString());const _=(S,C)=>Math.max(S,C.clock.time),x=await this._cache.get(this.queuePath);this.sync(x||[]);const E=await this._cache.get(this.snapshotPath);if(E){const S=[];for await(const B of this._ipfs.cat(E.hash))S.push(B);const C=Buffer$5.concat(S),T=JSON.parse(C.toString());this._recalculateReplicationMax(T.values.reduce(_,0)),T&&(this._oplog=await Log.fromJSON(this._ipfs,this.identity,T,{access:this.access,sortFn:this.options.sortFn,length:-1,timeout:1e3,onProgressCallback:this._onLoadProgress.bind(this)}),await this._updateIndex(),this.events.emit("replicated",this.address.toString())),this.events.emit("ready",this.address.toString(),this._oplog.heads)}else throw new Error(`Snapshot for ${this.address} not found!`);return this}async _updateIndex(){await this._index.updateIndex(this._oplog)}async syncLocal(){const n=await this._cache.get(this.localHeadsPath)||[],_=await this._cache.get(this.remoteHeadsPath)||[],x=n.concat(_);for(let E=0;E<x.length;E++){const S=x[E];if(!this._oplog.heads.includes(S)){await this.load();break}}}async _addOperation(n,{onProgressCallback:_,pin:x=!1}={}){async function E(){if(this._oplog){this.options.syncLocal&&await this.syncLocal();const S=await this._oplog.append(n,this.options.referenceCount,x);return this._recalculateReplicationStatus(S.clock.time),await this._cache.set(this.localHeadsPath,[S]),await this._updateIndex(),this.events.emit("write",this.address.toString(),S,this._oplog.heads),_&&_(S),S.hash}}return this._queue.add(E.bind(this))}_addOperationBatch(n,_,x,E){throw new Error("Not implemented!")}_procEntry(n){const{payload:_,hash:x}=n,{op:E}=_;E?this.events.emit(`log.op.${E}`,this.address.toString(),x,_):this.events.emit("log.op.none",this.address.toString(),x,_),this.events.emit("log.op",E,this.address.toString(),x,_)}_recalculateReplicationProgress(){this._replicationStatus.progress=Math.max(Math.min(this._replicationStatus.progress+1,this._replicationStatus.max),this._oplog?this._oplog.length:0)}_recalculateReplicationMax(n){this._replicationStatus.max=Math.max.apply(null,[this.replicationStatus.max,this._oplog?this._oplog.length:0,n||0])}_recalculateReplicationStatus(n){this._recalculateReplicationMax(n),this._recalculateReplicationProgress()}_onLoadProgress(n){this._recalculateReplicationStatus(n.clock.time),this.events.emit("load.progress",this.address.toString(),n.hash,n,this.replicationStatus.progress,this.replicationStatus.max)}}class EventIndex{constructor(){this._index=null}get(){return this._index?this._index.values:[]}updateIndex(n){this._index=n}}class EventStore extends Store{constructor(n,_,x,E={}){E.Index===void 0&&Object.assign(E,{Index:EventIndex}),super(n,_,x,E),this._type="eventlog",this.events.on("log.op.ADD",(S,C,T)=>{this.events.emit("db.append",T.value)})}add(n,_={}){return this._addOperation({op:"ADD",key:null,value:n},_)}get(n){return this.iterator({gte:n,limit:1}).collect()[0]}iterator(n){const _=this._query(n);let x=0;return{[Symbol.iterator](){return this},next(){let S={value:null,done:!0};return x<_.length&&(S={value:_[x],done:!1},x++),S},collect:()=>_}}_query(n){n||(n={});const _=n.limit?n.limit>-1?n.limit:this._index.get().length:1,x=this._index.get().slice();let E=[];return n.gt||n.gte?E=this._read(x,n.gt?n.gt:n.gte,_,!!n.gte):E=this._read(x.reverse(),n.lt?n.lt:n.lte,_,n.lte||!n.lt).reverse(),n.reverse&&E.reverse(),E}_read(n,_,x,E){const S=n.map(B=>B.hash).indexOf(_);let C=Math.max(S,0);return C+=E?0:1,n.slice(C).slice(0,x)}}class FeedIndex{constructor(){this._index={}}get(){return Object.keys(this._index).map(n=>this._index[n])}updateIndex(n){this._index={},n.values.reduce((_,x)=>(_.includes(x.hash)||(_.push(x.hash),x.payload.op==="ADD"?this._index[x.hash]=x:x.payload.op==="DEL"&&delete this._index[x.payload.value]),_),[])}}class FeedStore extends EventStore{constructor(n,_,x,E){E||(E={}),E.Index||Object.assign(E,{Index:FeedIndex}),super(n,_,x,E),this._type="feed"}remove(n,_={}){return this.del(n,_)}del(n,_={}){const x={op:"DEL",key:null,value:n};return this._addOperation(x,_)}}class KeyValueIndex{constructor(){this._index={}}get(n){return this._index[n]}updateIndex(n){const _=n.values,x={};for(let E=_.length-1;E>=0;E--){const S=_[E];if(!x[S.payload.key]){if(x[S.payload.key]=!0,S.payload.op==="PUT"){this._index[S.payload.key]=S.payload.value;continue}if(S.payload.op==="DEL"){delete this._index[S.payload.key];continue}}}}}class KeyValueStore extends Store{constructor(n,_,x,E){const S=Object.assign({},{Index:KeyValueIndex});Object.assign(S,E),super(n,_,x,S),this._type="keyvalue"}get all(){return this._index._index}get(n){return this._index.get(n)}set(n,_,x={}){return this.put(n,_,x)}put(n,_,x={}){return this._addOperation({op:"PUT",key:n,value:_},x)}del(n,_={}){return this._addOperation({op:"DEL",key:n,value:null},_)}}const deepEqual=(t,n)=>{const _=Object.getOwnPropertyNames(t),x=Object.getOwnPropertyNames(n);if(_.length!==x.length)return!1;for(let E=0;E<_.length;E++){const S=_[E];if(t[S]!==n[S])return!1}return!0},sum$3=(t,n)=>t+n;class GCounter{constructor(n,_){this.id=n,this._counters=_||{},this._counters[this.id]=this._counters[this.id]?this._counters[this.id]:0}get value(){return Object.values(this._counters).reduce(sum$3,0)}increment(n){n&&n<1||(n==null&&(n=1),this._counters[this.id]=this._counters[this.id]+n)}merge(n){Object.entries(n._counters).forEach(([_,x])=>{this._counters[_]=Math.max(this._counters[_]||0,x)})}toJSON(){return{id:this.id,counters:this._counters}}isEqual(n){return GCounter.isEqual(this,n)}static from(n){return new GCounter(n.id,n.counters)}static isEqual(n,_){return n.id!==_.id?!1:deepEqual(n._counters,_._counters)}}class CounterIndex{constructor(n){this._index=new GCounter(n)}get(){return this._index}updateIndex(n){if(this._index){const _=E=>E.payload.value.counters,x=E=>this._index.merge({_counters:E});n.values.filter(E=>E&&E.payload.op==="COUNTER").map(_).forEach(x)}}}class CounterStore extends Store{constructor(n,_,x,E={}){E.Index||Object.assign(E,{Index:CounterIndex}),super(n,_,x,E),this._index=new this.options.Index(this.identity.publicKey),this._type="counter"}get value(){return this._index.get().value}inc(n,_={}){const x=new GCounter(this.identity.publicKey,Object.assign({},this._index.get()._counters));return x.increment(n),this._addOperation({op:"COUNTER",key:null,value:x.toJSON()},_)}}class DocumentIndex{constructor(){this._index={}}get(n,_=!1){return _?this._index[n]:this._index[n]?this._index[n].payload.value:null}updateIndex(n,_){const x=(E,S,C)=>{if(S.payload.op==="PUTALL"&&S.payload.docs[Symbol.iterator])for(const T of S.payload.docs)T&&E[T.key]!==!0&&(E[T.key]=!0,this._index[T.key]={payload:{op:"PUT",key:T.key,value:T.value}});else E[S.payload.key]!==!0&&(E[S.payload.key]=!0,S.payload.op==="PUT"?this._index[S.payload.key]=S:S.payload.op==="DEL"&&delete this._index[S.payload.key]);return _&&_(S,C),E};n.values.slice().reverse().reduce(x,{})}}var pMap=(t,n,_)=>new Promise((x,E)=>{_=Object.assign({concurrency:1/0},_);const S=_.concurrency;if(S<1)throw new TypeError("Expected `concurrency` to be a number from 1 and up");const C=[],T=t[Symbol.iterator]();let B=!1,A=!1,I=0,D=0;const M=()=>{if(B)return;const V=T.next(),L=D;if(D++,V.done){A=!0,I===0&&x(C);return}I++,Promise.resolve(V.value).then(F=>n(F,L)).then(F=>{C[L]=F,I--,M()},F=>{B=!0,E(F)})};for(let V=0;V<S&&(M(),!A);V++);});const pMap$1=getDefaultExportFromCjs(pMap),replaceAll=(t,n,_)=>t.toString().split(n).join(_);class DocumentStore extends Store{constructor(n,_,x,E){E||(E={}),E.indexBy||Object.assign(E,{indexBy:"_id"}),E.Index||Object.assign(E,{Index:DocumentIndex}),super(n,_,x,E),this._type="docstore"}get(n,_=!1){n=n.toString();const x=n.split(" ");n=x.length>1?replaceAll(n,"."," ").toLowerCase():n.toLowerCase();const E=T=>x.length>1?replaceAll(T,"."," ").toLowerCase().indexOf(n)!==-1:T.toLowerCase().indexOf(n)!==-1,S=T=>this._index.get(T),C=T=>_?T.indexOf(n)!==-1:E(T);return Object.keys(this._index._index).filter(C).map(S)}query(n,_={}){const x=_.fullOp||!1;return Object.keys(this._index._index).map(E=>this._index.get(E,x)).filter(n)}batchPut(n,_){return pMap$1(n,(E,S)=>this._addOperationBatch({op:"PUT",key:E[this.options.indexBy],value:E},!0,S===n.length-1,_),{concurrency:1}).then(()=>this.saveSnapshot())}put(n,_={}){if(!n[this.options.indexBy])throw new Error(`The provided document doesn't contain field '${this.options.indexBy}'`);return this._addOperation({op:"PUT",key:n[this.options.indexBy],value:n},_)}putAll(n,_={}){if(Array.isArray(n)||(n=[n]),!n.every(x=>x[this.options.indexBy]))throw new Error(`The provided document doesn't contain field '${this.options.indexBy}'`);return this._addOperation({op:"PUTALL",docs:n.map(x=>({key:x[this.options.indexBy],value:x}))},_)}del(n,_={}){if(!this._index.get(n))throw new Error(`No entry with key '${n}' in the database`);return this._addOperation({op:"DEL",key:n,value:null},_)}}var pReduce$1=(t,n,_)=>new Promise((x,E)=>{const S=t[Symbol.iterator]();let C=0;const T=B=>{const A=S.next();if(A.done){x(B);return}Promise.all([B,A.value]).then(I=>{T(n(I[0],I[1],C++))}).catch(E)};T(_)}),dist$1={exports:{}};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0});const _=util$9,x=Object.prototype.toString,E=B=>A=>typeof A===B,S=B=>{const A=x.call(B).slice(8,-1);return A||null},C=B=>A=>S(A)===B;function T(B){if(B===null)return"null";if(B===!0||B===!1)return"boolean";const A=typeof B;if(A==="undefined")return"undefined";if(A==="string")return"string";if(A==="number")return"number";if(A==="symbol")return"symbol";if(T.function_(B))return"Function";if(Array.isArray(B))return"Array";if(Buffer$5.isBuffer(B))return"Buffer";const I=S(B);if(I)return I;if(B instanceof String||B instanceof Boolean||B instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}(function(B){const A=ue=>typeof ue=="object";B.undefined=E("undefined"),B.string=E("string"),B.number=E("number"),B.function_=E("function"),B.null_=ue=>ue===null,B.class_=ue=>B.function_(ue)&&ue.toString().startsWith("class "),B.boolean=ue=>ue===!0||ue===!1,B.symbol=E("symbol"),B.array=Array.isArray,B.buffer=Buffer$5.isBuffer,B.nullOrUndefined=ue=>B.null_(ue)||B.undefined(ue),B.object=ue=>!B.nullOrUndefined(ue)&&(B.function_(ue)||A(ue)),B.iterable=ue=>!B.nullOrUndefined(ue)&&B.function_(ue[Symbol.iterator]),B.generator=ue=>B.iterable(ue)&&B.function_(ue.next)&&B.function_(ue.throw),B.nativePromise=C("Promise");const I=ue=>!B.null_(ue)&&A(ue)&&B.function_(ue.then)&&B.function_(ue.catch);B.promise=ue=>B.nativePromise(ue)||I(ue);const D=ue=>_e=>B.function_(_e)&&B.function_(_e.constructor)&&_e.constructor.name===ue;B.generatorFunction=D("GeneratorFunction"),B.asyncFunction=D("AsyncFunction"),B.boundFunction=ue=>B.function_(ue)&&!ue.hasOwnProperty("prototype"),B.regExp=C("RegExp"),B.date=C("Date"),B.error=C("Error"),B.map=C("Map"),B.set=C("Set"),B.weakMap=C("WeakMap"),B.weakSet=C("WeakSet"),B.int8Array=C("Int8Array"),B.uint8Array=C("Uint8Array"),B.uint8ClampedArray=C("Uint8ClampedArray"),B.int16Array=C("Int16Array"),B.uint16Array=C("Uint16Array"),B.int32Array=C("Int32Array"),B.uint32Array=C("Uint32Array"),B.float32Array=C("Float32Array"),B.float64Array=C("Float64Array"),B.arrayBuffer=C("ArrayBuffer"),B.sharedArrayBuffer=C("SharedArrayBuffer"),B.dataView=C("DataView"),B.directInstanceOf=(ue,_e)=>B.object(ue)&&B.object(_e)&&Object.getPrototypeOf(ue)===_e.prototype,B.truthy=ue=>!!ue,B.falsy=ue=>!ue,B.nan=ue=>Number.isNaN(ue);const M=new Set(["undefined","string","number","boolean","symbol"]);B.primitive=ue=>B.null_(ue)||M.has(typeof ue),B.integer=ue=>Number.isInteger(ue),B.safeInteger=ue=>Number.isSafeInteger(ue),B.plainObject=ue=>{let _e;return S(ue)==="Object"&&(_e=Object.getPrototypeOf(ue),_e===null||_e===Object.getPrototypeOf({}))};const V=new Set(["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"]);B.typedArray=ue=>{const _e=S(ue);return _e===null?!1:V.has(_e)};const L=ue=>B.safeInteger(ue)&&ue>-1;B.arrayLike=ue=>!B.nullOrUndefined(ue)&&!B.function_(ue)&&L(ue.length),B.inRange=(ue,_e)=>{if(B.number(_e))return ue>=Math.min(0,_e)&&ue<=Math.max(_e,0);if(B.array(_e)&&_e.length===2)return ue>=Math.min.apply(null,_e)&&ue<=Math.max.apply(null,_e);throw new TypeError(`Invalid range: ${_.inspect(_e)}`)};const F=1,j=["innerHTML","ownerDocument","style","attributes","nodeValue"];B.domElement=ue=>B.object(ue)&&ue.nodeType===F&&B.string(ue.nodeName)&&!B.plainObject(ue)&&j.every(_e=>_e in ue),B.nodeStream=ue=>!B.nullOrUndefined(ue)&&A(ue)&&B.function_(ue.pipe),B.infinite=ue=>ue===1/0||ue===-1/0;const U=ue=>_e=>B.integer(_e)&&Math.abs(_e%2)===ue;B.even=U(0),B.odd=U(1);const H=ue=>B.string(ue)&&/\S/.test(ue)===!1,Y=ue=>(B.string(ue)||B.array(ue))&&ue.length===0,Z=ue=>!B.map(ue)&&!B.set(ue)&&B.object(ue)&&Object.keys(ue).length===0,ne=ue=>(B.map(ue)||B.set(ue))&&ue.size===0;B.empty=ue=>B.falsy(ue)||Y(ue)||Z(ue)||ne(ue),B.emptyOrWhitespace=ue=>B.empty(ue)||H(ue);const re=(ue,_e,ye)=>{const ie=Array.prototype.slice.call(ye,1);if(B.function_(_e)===!1)throw new TypeError(`Invalid predicate: ${_.inspect(_e)}`);if(ie.length===0)throw new TypeError("Invalid number of values");return ue.call(ie,_e)};function X(ue){return re(Array.prototype.some,ue,arguments)}B.any=X;function ce(ue){return re(Array.prototype.every,ue,arguments)}B.all=ce})(T||(T={})),Object.defineProperties(T,{class:{value:T.class_},function:{value:T.function_},null:{value:T.null_}}),n.default=T,t.exports=T,t.exports.default=T})(dist$1,dist$1.exports);var distExports=dist$1.exports;const pReduce=pReduce$1,is$1=distExports;var pSeries=t=>{const n=[];for(const _ of t){const x=is$1(_);if(x!=="Function")return Promise.reject(new TypeError(`Expected task to be a \`Function\`, received \`${x}\``))}return pReduce(t,(_,x)=>Promise.resolve().then(x).then(E=>{n.push(E)})).then(()=>n)};const pSeries$1=getDefaultExportFromCjs(pSeries),difference=(t,n)=>new Set([...t].filter(_=>!n.has(_))),DEFAULT_OPTIONS={start:!0,pollInterval:1e3};class IpfsPubsubPeerMonitor extends EventEmitter$5{constructor(n,_,x){super(),this._pubsub=n,this._topic=_,this._options=Object.assign({},DEFAULT_OPTIONS,x),this._peers=[],this._interval=null,this._options.start&&this.start()}get started(){return this._interval!==null}set started(n){throw new Error("'started' is read-only")}start(){this._interval&&this.stop(),this._interval=setInterval(this._pollPeers.bind(this),this._options.pollInterval),this._pollPeers()}stop(){clearInterval(this._interval),this._interval=null,this.removeAllListeners("error"),this.removeAllListeners("join"),this.removeAllListeners("leave")}async getPeers(){return this._peers=await this._pubsub.peers(this._topic),this._peers.slice()}hasPeer(n){return this._peers.includes(n)}async _pollPeers(){try{const n=await this._pubsub.peers(this._topic);IpfsPubsubPeerMonitor._emitJoinsAndLeaves(new Set(this._peers),new Set(n),this),this._peers=n}catch(n){clearInterval(this._interval),this.emit("error",n)}}static _emitJoinsAndLeaves(n,_,x){const E=C=>x.emit("join",C),S=C=>x.emit("leave",C);difference(_,n).forEach(E),difference(n,_).forEach(S)}}const logger$m=Logger$2.create("pubsub",{color:Logger$2.Colors.Yellow});Logger$2.setLogLevel("ERROR");const maxTopicsOpen=256;let topicsOpenCount=0;class IPFSPubsub{constructor(n,_){this._ipfs=n,this._id=_,this._subscriptions={},this._ipfs.pubsub===null&&logger$m.error("The provided version of ipfs doesn't have pubsub support. Messages will not be exchanged."),this._handleMessage=this._handleMessage.bind(this),this._ipfs.setMaxListeners&&this._ipfs.setMaxListeners(maxTopicsOpen)}async subscribe(n,_,x,E={}){if(!this._subscriptions[n]&&this._ipfs.pubsub){await this._ipfs.pubsub.subscribe(n,this._handleMessage,E);const S=new IpfsPubsubPeerMonitor(this._ipfs.pubsub,n);S.on("join",C=>{logger$m.debug(`Peer joined ${n}:`),logger$m.debug(C),this._subscriptions[n]?x(n,C):(logger$m.warn("Peer joined a room we don't have a subscription for"),logger$m.warn(n,C))}),S.on("leave",C=>logger$m.debug(`Peer ${C} left ${n}`)),S.on("error",C=>logger$m.error(C)),this._subscriptions[n]={topicMonitor:S,onMessage:_,onNewPeer:x},topicsOpenCount++,logger$m.debug("Topics open:",topicsOpenCount)}}async unsubscribe(n){this._subscriptions[n]&&(await this._ipfs.pubsub.unsubscribe(n,this._handleMessage),this._subscriptions[n].topicMonitor.stop(),delete this._subscriptions[n],logger$m.debug(`Unsubscribed from '${n}'`),topicsOpenCount--,logger$m.debug("Topics open:",topicsOpenCount))}publish(n,_,x={}){if(this._subscriptions[n]&&this._ipfs.pubsub){let E;Buffer$5.isBuffer(_)||typeof _=="string"?E=_:E=JSON.stringify(_),this._ipfs.pubsub.publish(n,Buffer$5.from(E),x)}}async disconnect(){const n=Object.keys(this._subscriptions);await pSeries$1(n.map(_=>this.unsubscribe.bind(this,_))),this._subscriptions={}}async _handleMessage(n){if(String(n.from)===this._id)return;let _;const x=n.topic?n.topic:n.topicIDs[0];try{_=JSON.parse(Buffer$5.from(n.data).toString())}catch{_=n.data}const E=this._subscriptions[x];E&&E.onMessage&&_&&await E.onMessage(x,_,n.from)}}const logger$l=Logger$2.create("cache",{color:Logger$2.Colors.Magenta});Logger$2.setLogLevel("ERROR");class Cache{constructor(n){this._store=n}get status(){return this._store.status}async close(){if(!this._store)throw new Error("No cache store found to close");this.status==="open"&&await this._store.close()}async open(){if(!this._store)throw new Error("No cache store found to open");this.status!=="open"&&await this._store.open()}async get(n){try{return JSON.parse(await this._store.get(n))}catch(_){if(_.code==="LEVEL_NOT_FOUND"||_.cause!==void 0&&_.cause.code==="LEVEL_NOT_FOUND")return null;throw _}}async set(n,_){await this._store.put(n,JSON.stringify(_)),logger$l.debug(`cache: Set ${n} to ${JSON.stringify(_)}`)}load(){}destroy(){}async del(n){await this._store.del(n)}}var browserLevel={},abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function(...n){const _=n.reduce((x,E)=>Object.assign(x,E),{});return Object.assign(_,{snapshots:_.snapshots||!1,permanence:_.permanence||!1,seek:_.seek||!1,clear:_.clear||!1,getMany:_.getMany||!1,keyIterator:_.keyIterator||!1,valueIterator:_.valueIterator||!1,iteratorNextv:_.iteratorNextv||!1,iteratorAll:_.iteratorAll||!1,status:_.status||!1,createIfMissing:_.createIfMissing||!1,errorIfExists:_.errorIfExists||!1,deferredOpen:_.deferredOpen||!1,promises:_.promises||!1,streams:_.streams||!1,encodings:Object.assign({},_.encodings),events:Object.assign({},_.events),additionalMethods:Object.assign({},_.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(n,_){super(n||""),typeof _=="object"&&_!==null&&(_.code&&(this.code=String(_.code)),_.expected&&(this.expected=!0),_.transient&&(this.transient=!0),_.cause&&(this.cause=_.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$2={};let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);let Encoding$2=class{constructor(n){if(this.encode=n.encode||this.encode,this.decode=n.decode||this.decode,this.name=n.name||this.name,this.format=n.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");n.createViewTranscoder&&(this.createViewTranscoder=n.createViewTranscoder),n.createBufferTranscoder&&(this.createBufferTranscoder=n.createBufferTranscoder),n.createUTF8Transcoder&&(this.createUTF8Transcoder=n.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};encoding.Encoding=Encoding$2;const{Buffer:Buffer$4}=buffer$3||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;let BufferFormat$2=class extends Encoding$1{constructor(n){super({...n,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:n=>this.decode(Buffer$4.from(n.buffer,n.byteOffset,n.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ViewFormat$2=class extends Encoding$1{constructor(n){super({...n,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:n=>{const _=this.encode(n);return Buffer$4.from(_.buffer,_.byteOffset,_.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},UTF8Format$2=class extends Encoding$1{constructor(n){super({...n,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:n=>Buffer$4.from(this.encode(n),"utf8"),decode:n=>this.decode(n.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:n,textDecoder:_}=textEndec();return new ViewFormat$2({encode:x=>n.encode(this.encode(x)),decode:x=>this.decode(_.decode(x)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer:Buffer$3}=buffer$3||{Buffer:{isBuffer:()=>!1}},{textEncoder:textEncoder$2,textDecoder:textDecoder$1}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity$6=t=>t;encodings$2.utf8=new UTF8Format$1({encode:function(t){return Buffer$3.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?textDecoder$1.decode(t):String(t)},decode:identity$6,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder$2.encode(t)},decode:function(t){return textDecoder$1.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer$3.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$3.from(t.buffer,t.byteOffset,t.byteLength):Buffer$3.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});encodings$2.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$2.buffer=new BufferFormat$1({encode:function(t){return Buffer$3.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$3.from(t.buffer,t.byteOffset,t.byteLength):Buffer$3.from(String(t),"utf8")},decode:identity$6,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:Buffer$3.from(String(t),"utf8")},decode:function(t){return Buffer$3.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});encodings$2.view=new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder$2.encode(t)},decode:identity$6,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer$3.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$3.from(t.buffer,t.byteOffset,t.byteLength):Buffer$3.from(String(t),"utf8")},decode:identity$6,name:`${this.name}+buffer`})}});encodings$2.hex=new BufferFormat$1({encode:function(t){return Buffer$3.isBuffer(t)?t:Buffer$3.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});encodings$2.base64=new BufferFormat$1({encode:function(t){return Buffer$3.isBuffer(t)?t:Buffer$3.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings$1=encodings$2,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);let Transcoder$1=class{constructor(n){if(Array.isArray(n)){if(!n.every(_=>validFormats.has(_)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(n);for(const _ in encodings$1)try{this.encoding(_)}catch(x){if(x.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw x}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(n){let _=this[kEncodings].get(n);if(_===void 0){if(typeof n=="string"&&n!==""){if(_=lookup[n],!_)throw new ModuleError$7(`Encoding '${n}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof n!="object"||n===null)throw new TypeError("First argument 'encoding' must be a string or object");_=from$4(n)}const{name:x,format:E}=_;if(!this[kFormats].has(E))if(this[kFormats].has("view"))_=_.createViewTranscoder();else if(this[kFormats].has("buffer"))_=_.createBufferTranscoder();else if(this[kFormats].has("utf8"))_=_.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${x}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const S of[n,x,_.name,_.commonName])this[kEncodings].set(S,_)}return _}};levelTranscoder.Transcoder=Transcoder$1;function from$4(t){if(t instanceof Encoding)return t;const n="type"in t&&typeof t.type=="string"?t.type:void 0,_=t.name||n||`anonymous-${anonymousCount++}`;switch(detectFormat(t)){case"view":return new ViewFormat({...t,name:_});case"utf8":return new UTF8Format({...t,name:_});case"buffer":return new BufferFormat({...t,name:_});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}const aliases={binary:encodings$1.buffer,"utf-8":encodings$1.utf8},lookup={...encodings$1,...aliases};let anonymousCount=0;var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t),nextTick=nextTickBrowser$1;catering.fromCallback=function(t,n){if(t===void 0){var _=new Promise(function(x,E){t=function(S,C){S?E(S):x(C)}});t[n!==void 0?n:"promise"]=_}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};catering.fromPromise=function(t,n){if(n===void 0)return t;t.then(function(_){nextTick(()=>n(null,_))}).catch(function(_){nextTick(()=>n(_))})};var abstractIterator={},common$7={};common$7.getCallback=function(t,n){return typeof t=="function"?t:n};common$7.getOptions=function(t,n){return typeof t=="object"&&t!==null?t:n!==void 0?n:{}};const{fromCallback:fromCallback$3}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common$7,kPromise$3=Symbol("promise"),kCallback$1=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions$1=Object.freeze({}),noop$4=()=>{};let warnedEnd=!1;class CommonIterator{constructor(n,_,x){if(typeof n!="object"||n===null){const E=n===null?"null":typeof n;throw new TypeError(`The first argument must be an abstract-level database, received ${E}`)}if(typeof _!="object"||_===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$1]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=_[kKeyEncoding$1],this[kValueEncoding$1]=_[kValueEncoding$1],this[kLegacy]=x,this[kLimit]=Number.isInteger(_.limit)&&_.limit>=0?_.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!_.abortOnClose,this.db=n,this.db.attachResource(this),this.nextTick=n.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(n){let _;if(n===void 0)_=new Promise((x,E)=>{n=(S,C,T)=>{S?E(S):this[kLegacy]?C===void 0&&T===void 0?x():x([C,T]):x(C)}});else if(typeof n!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(n,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(n,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=n,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),_}_next(n){this.nextTick(n)}nextv(n,_,x){return x=getCallback$2(_,x),x=fromCallback$3(x,kPromise$3),_=getOptions$2(_,emptyOptions$1),Number.isInteger(n)?(this[kClosing]?this.nextTick(x,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(x,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(n<1&&(n=1),this[kLimit]<1/0&&(n=Math.min(n,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$1]=x,n<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(n,_,this[kHandleMany$1])),x[kPromise$3]):(this.nextTick(x,new TypeError("The first argument 'size' must be an integer")),x[kPromise$3])}_nextv(n,_,x){const E=[],S=(C,T,B)=>{if(C)return x(C);if(this[kLegacy]?T===void 0&&B===void 0:T===void 0)return x(null,E);E.push(this[kLegacy]?[T,B]:T),E.length===n?x(null,E):this._next(S)};this._next(S)}all(n,_){return _=getCallback$2(n,_),_=fromCallback$3(_,kPromise$3),n=getOptions$2(n,emptyOptions$1),this[kClosing]?this.nextTick(_,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(_,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=_,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(n,this[kHandleMany$1])),_[kPromise$3]}_all(n,_){let x=this[kCount];const E=[],S=()=>{const T=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-x):1e3;T<=0?this.nextTick(_,null,E):this._nextv(T,emptyOptions$1,C)},C=(T,B)=>{T?_(T):B.length===0?_(null,E):(E.push.apply(E,B),x+=B.length,S())};S()}[kFinishWork](){const n=this[kCallback$1];return this[kAbortOnClose]&&n===null?noop$4:(this[kWorking]=!1,this[kCallback$1]=null,this[kClosing]&&this._close(this[kHandleClose]),n)}[kReturnMany](n,_,x){this[kAutoClose]?this.close(n.bind(null,_,x)):n(_,x)}seek(n,_){if(_=getOptions$2(_,emptyOptions$1),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const x=this.db.keyEncoding(_.keyEncoding||this[kKeyEncoding$1]),E=x.format;_.keyEncoding!==E&&(_={..._,keyEncoding:E});const S=this.db.prefixKey(x.encode(n),E);this._seek(S,_)}}}_seek(n,_){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(n){return n=fromCallback$3(n,kPromise$3),this[kClosed]?this.nextTick(n):this[kClosing]?this[kCloseCallbacks$1].push(n):(this[kClosing]=!0,this[kCloseCallbacks$1].push(n),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),n[kPromise$3]}_close(n){this.nextTick(n)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const n=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const _ of n)_()}async*[Symbol.asyncIterator](){try{let n;for(;(n=await this.next())!==void 0;)yield n}finally{this[kClosed]||await this.close()}}}let AbstractIterator$3=class extends CommonIterator{constructor(n,_){super(n,_,!0),this[kKeys]=_.keys!==!1,this[kValues]=_.values!==!1}[kHandleOne$1](n,_,x){const E=this[kFinishWork]();if(n)return E(n);try{_=this[kKeys]&&_!==void 0?this[kKeyEncoding$1].decode(_):void 0,x=this[kValues]&&x!==void 0?this[kValueEncoding$1].decode(x):void 0}catch(S){return E(new IteratorDecodeError("entry",S))}_===void 0&&x===void 0||this[kCount]++,E(null,_,x)}[kHandleMany$1](n,_){const x=this[kFinishWork]();if(n)return this[kReturnMany](x,n);try{for(const E of _){const S=E[0],C=E[1];E[0]=this[kKeys]&&S!==void 0?this[kKeyEncoding$1].decode(S):void 0,E[1]=this[kValues]&&C!==void 0?this[kValueEncoding$1].decode(C):void 0}}catch(E){return this[kReturnMany](x,new IteratorDecodeError("entries",E))}this[kCount]+=_.length,this[kReturnMany](x,null,_)}end(n){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(n)}},AbstractKeyIterator$2=class extends CommonIterator{constructor(n,_){super(n,_,!1)}[kHandleOne$1](n,_){const x=this[kFinishWork]();if(n)return x(n);try{_=_!==void 0?this[kKeyEncoding$1].decode(_):void 0}catch(E){return x(new IteratorDecodeError("key",E))}_!==void 0&&this[kCount]++,x(null,_)}[kHandleMany$1](n,_){const x=this[kFinishWork]();if(n)return this[kReturnMany](x,n);try{for(let E=0;E<_.length;E++){const S=_[E];_[E]=S!==void 0?this[kKeyEncoding$1].decode(S):void 0}}catch(E){return this[kReturnMany](x,new IteratorDecodeError("keys",E))}this[kCount]+=_.length,this[kReturnMany](x,null,_)}},AbstractValueIterator$2=class extends CommonIterator{constructor(n,_){super(n,_,!1)}[kHandleOne$1](n,_){const x=this[kFinishWork]();if(n)return x(n);try{_=_!==void 0?this[kValueEncoding$1].decode(_):void 0}catch(E){return x(new IteratorDecodeError("value",E))}_!==void 0&&this[kCount]++,x(null,_)}[kHandleMany$1](n,_){const x=this[kFinishWork]();if(n)return this[kReturnMany](x,n);try{for(let E=0;E<_.length;E++){const S=_[E];_[E]=S!==void 0?this[kValueEncoding$1].decode(S):void 0}}catch(E){return this[kReturnMany](x,new IteratorDecodeError("values",E))}this[kCount]+=_.length,this[kReturnMany](x,null,_)}};class IteratorDecodeError extends ModuleError$6{constructor(n,_){super(`Iterator could not decode ${n}`,{code:"LEVEL_DECODE_ERROR",cause:_})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,t.split(" ")[0],{get(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$2;abstractIterator.AbstractValueIterator=AbstractValueIterator$2;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,kIterator=Symbol("iterator"),kCallback=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");let DefaultKeyIterator$1=class extends AbstractKeyIterator$1{constructor(n,_){super(n,_),this[kIterator]=n.iterator({..._,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}},DefaultValueIterator$1=class extends AbstractValueIterator$1{constructor(n,_){super(n,_),this[kIterator]=n.iterator({..._,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}};for(const t of[DefaultKeyIterator$1,DefaultValueIterator$1]){const n=t===DefaultKeyIterator$1,_=n?x=>x[0]:x=>x[1];t.prototype._next=function(x){this[kCallback]=x,this[kIterator].next(this[kHandleOne])},t.prototype[kHandleOne]=function(x,E,S){const C=this[kCallback];x?C(x):C(null,n?E:S)},t.prototype._nextv=function(x,E,S){this[kCallback]=S,this[kIterator].nextv(x,E,this[kHandleMany])},t.prototype._all=function(x,E){this[kCallback]=E,this[kIterator].all(x,this[kHandleMany])},t.prototype[kHandleMany]=function(x,E){const S=this[kCallback];x?S(x):S(null,E.map(_))},t.prototype._seek=function(x,E){this[kIterator].seek(x,E)},t.prototype._close=function(x){this[kIterator].close(x)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator,AbstractValueIterator}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");let DeferredIterator$1=class extends AbstractIterator$2{constructor(n,_){super(n,_),this[kNut]=null,this[kFactory]=()=>n.iterator(_),this.db.defer(()=>this[kUndefer$1]())}},DeferredKeyIterator$1=class extends AbstractKeyIterator{constructor(n,_){super(n,_),this[kNut]=null,this[kFactory]=()=>n.keys(_),this.db.defer(()=>this[kUndefer$1]())}},DeferredValueIterator$1=class extends AbstractValueIterator{constructor(n,_){super(n,_),this[kNut]=null,this[kFactory]=()=>n.values(_),this.db.defer(()=>this[kUndefer$1]())}};for(const t of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])t.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},t.prototype._next=function(n){this[kNut]!==null?this[kNut].next(n):this.db.status==="opening"?this.db.defer(()=>this._next(n)):this.nextTick(n,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(n,_,x){this[kNut]!==null?this[kNut].nextv(n,_,x):this.db.status==="opening"?this.db.defer(()=>this._nextv(n,_,x)):this.nextTick(x,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(n,_){this[kNut]!==null?this[kNut].all(_):this.db.status==="opening"?this.db.defer(()=>this._all(n,_)):this.nextTick(_,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(n,_){this[kNut]!==null?this[kNut]._seek(n,_):this.db.status==="opening"&&this.db.defer(()=>this._seek(n,_))},t.prototype._close=function(n){this[kNut]!==null?this[kNut].close(n):this.db.status==="opening"?this.db.defer(()=>this._close(n)):this.nextTick(n)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$2}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common$7,kPromise$2=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");let AbstractChainedBatch$1=class{constructor(n){if(typeof n!="object"||n===null){const _=n===null?"null":typeof n;throw new TypeError(`The first argument must be an abstract-level database, received ${_}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=n,this.db.attachResource(this),this.nextTick=n.nextTick}get length(){return this[kOperations$1].length}put(n,_,x){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const E=this.db._checkKey(n)||this.db._checkValue(_);if(E)throw E;const S=x&&x.sublevel!=null?x.sublevel:this.db,C=x,T=S.keyEncoding(x&&x.keyEncoding),B=S.valueEncoding(x&&x.valueEncoding),A=T.format;x={...x,keyEncoding:A,valueEncoding:B.format},S!==this.db&&(x.sublevel=null);const I=S.prefixKey(T.encode(n),A),D=B.encode(_);return this._put(I,D,x),this[kOperations$1].push({...C,type:"put",key:n,value:_}),this}_put(n,_,x){}del(n,_){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const x=this.db._checkKey(n);if(x)throw x;const E=_&&_.sublevel!=null?_.sublevel:this.db,S=_,C=E.keyEncoding(_&&_.keyEncoding),T=C.format;return _={..._,keyEncoding:T},E!==this.db&&(_.sublevel=null),this._del(E.prefixKey(C.encode(n),T),_),this[kOperations$1].push({...S,type:"del",key:n}),this}_del(n,_){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(n,_){return _=getCallback$1(n,_),_=fromCallback$2(_,kPromise$2),n=getOptions$1(n),this[kStatus$1]!=="open"?this.nextTick(_,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(_):(this[kStatus$1]="writing",this._write(n,x=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>_(x)),x||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),_[kPromise$2]}_write(n,_){}close(n){return n=fromCallback$2(n,kPromise$2),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(n):this[kStatus$1]==="closed"?this.nextTick(n):(this[kCloseCallbacks].push(n),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),n[kPromise$2]}_close(n){this.nextTick(n)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const n=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const _ of n)_()}};abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");let DefaultChainedBatch$1=class extends AbstractChainedBatch{constructor(n){super(n),this[kEncoded]=[]}_put(n,_,x){this[kEncoded].push({...x,type:"put",key:n,value:_})}_del(n,_){this[kEncoded].push({..._,type:"del",key:n})}_clear(){this[kEncoded]=[]}_write(n,_){this.db.status==="opening"?this.db.defer(()=>this._write(n,_)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick(_):this.db._batch(this[kEncoded],n,_):this.nextTick(_,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty$1=Object.prototype.hasOwnProperty,rangeOptions$1=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(t,n){const _={};for(const x in t)if(hasOwnProperty$1.call(t,x)&&!(x==="keyEncoding"||x==="valueEncoding")){if(x==="start"||x==="end")throw new ModuleError$2(`The legacy range option '${x}' has been removed`,{code:"LEVEL_LEGACY"});if(x==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$1.has(x)?_[x]=n.encode(t[x]):_[x]=t[x]}return _.reverse=!!_.reverse,_.limit=Number.isInteger(_.limit)&&_.limit>=0?_.limit:-1,_};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let promise;var queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):t=>(promise||(promise=Promise.resolve())).then(t).catch(n=>setTimeout(()=>{throw n},0)),nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const t=queueMicrotask_1;return nextTickBrowser=function(n,..._){_.length===0?t(n):t(()=>n(..._))},nextTickBrowser}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:t,AbstractKeyIterator:n,AbstractValueIterator:_}=abstractIterator,x=Symbol("unfix"),E=Symbol("iterator"),S=Symbol("handleOne"),C=Symbol("handleMany"),T=Symbol("callback");class B extends t{constructor(M,V,L,F){super(M,V),this[E]=L,this[x]=F,this[S]=this[S].bind(this),this[C]=this[C].bind(this),this[T]=null}[S](M,V,L){const F=this[T];if(M)return F(M);V!==void 0&&(V=this[x](V)),F(M,V,L)}[C](M,V){const L=this[T];if(M)return L(M);for(const F of V){const j=F[0];j!==void 0&&(F[0]=this[x](j))}L(M,V)}}class A extends n{constructor(M,V,L,F){super(M,V),this[E]=L,this[x]=F,this[S]=this[S].bind(this),this[C]=this[C].bind(this),this[T]=null}[S](M,V){const L=this[T];if(M)return L(M);V!==void 0&&(V=this[x](V)),L(M,V)}[C](M,V){const L=this[T];if(M)return L(M);for(let F=0;F<V.length;F++){const j=V[F];j!==void 0&&(V[F]=this[x](j))}L(M,V)}}class I extends _{constructor(M,V,L){super(M,V),this[E]=L}}for(const D of[B,A])D.prototype._next=function(M){this[T]=M,this[E].next(this[S])},D.prototype._nextv=function(M,V,L){this[T]=L,this[E].nextv(M,V,this[C])},D.prototype._all=function(M,V){this[T]=V,this[E].all(M,this[C])};for(const D of[I])D.prototype._next=function(M){this[E].next(M)},D.prototype._nextv=function(M,V,L){this[E].nextv(M,V,L)},D.prototype._all=function(M,V){this[E].all(M,V)};for(const D of[B,A,I])D.prototype._seek=function(M,V){this[E].seek(M,V)},D.prototype._close=function(M){this[E].close(M)};return abstractSublevelIterator.AbstractSublevelIterator=B,abstractSublevelIterator.AbstractSublevelKeyIterator=A,abstractSublevelIterator.AbstractSublevelValueIterator=I,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const t=moduleError,{Buffer:n}=buffer$3||{},{AbstractSublevelIterator:_,AbstractSublevelKeyIterator:x,AbstractSublevelValueIterator:E}=requireAbstractSublevelIterator(),S=Symbol("prefix"),C=Symbol("upperBound"),T=Symbol("prefixRange"),B=Symbol("parent"),A=Symbol("unfix"),I=new TextEncoder,D={separator:"!"};abstractSublevel=function({AbstractLevel:U}){class H extends U{static defaults(Z){if(typeof Z=="string")throw new t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(Z&&Z.open)throw new t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return Z==null?D:Z.separator?Z:{...Z,separator:"!"}}constructor(Z,ne,re){const{separator:X,manifest:ce,...ue}=H.defaults(re);ne=j(ne,X);const _e=X.charCodeAt(0)+1,ye=Z[B]||Z;if(!I.encode(ne).every(O=>O>_e&&O<127))throw new t(`Prefix must use bytes > ${_e} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(M(ye,ce),ue);const ie=(Z.prefix||"")+X+ne+X,W=ie.slice(0,-1)+String.fromCharCode(_e);this[B]=ye,this[S]=new L(ie),this[C]=new L(W),this[A]=new F,this.nextTick=ye.nextTick}prefixKey(Z,ne){if(ne==="utf8")return this[S].utf8+Z;if(Z.byteLength===0)return this[S][ne];if(ne==="view"){const re=this[S].view,X=new Uint8Array(re.byteLength+Z.byteLength);return X.set(re,0),X.set(Z,re.byteLength),X}else{const re=this[S].buffer;return n.concat([re,Z],re.byteLength+Z.byteLength)}}[T](Z,ne){Z.gte!==void 0?Z.gte=this.prefixKey(Z.gte,ne):Z.gt!==void 0?Z.gt=this.prefixKey(Z.gt,ne):Z.gte=this[S][ne],Z.lte!==void 0?Z.lte=this.prefixKey(Z.lte,ne):Z.lt!==void 0?Z.lt=this.prefixKey(Z.lt,ne):Z.lte=this[C][ne]}get prefix(){return this[S].utf8}get db(){return this[B]}_open(Z,ne){this[B].open({passive:!0},ne)}_put(Z,ne,re,X){this[B].put(Z,ne,re,X)}_get(Z,ne,re){this[B].get(Z,ne,re)}_getMany(Z,ne,re){this[B].getMany(Z,ne,re)}_del(Z,ne,re){this[B].del(Z,ne,re)}_batch(Z,ne,re){this[B].batch(Z,ne,re)}_clear(Z,ne){this[T](Z,Z.keyEncoding),this[B].clear(Z,ne)}_iterator(Z){this[T](Z,Z.keyEncoding);const ne=this[B].iterator(Z),re=this[A].get(this[S].utf8.length,Z.keyEncoding);return new _(this,Z,ne,re)}_keys(Z){this[T](Z,Z.keyEncoding);const ne=this[B].keys(Z),re=this[A].get(this[S].utf8.length,Z.keyEncoding);return new x(this,Z,ne,re)}_values(Z){this[T](Z,Z.keyEncoding);const ne=this[B].values(Z);return new E(this,Z,ne)}}return{AbstractSublevel:H}};const M=function(U,H){return{...U.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...H,encodings:{utf8:V(U,"utf8"),buffer:V(U,"buffer"),view:V(U,"view")}}},V=function(U,H){return U.supports.encodings[H]?U.keyEncoding(H).name===H:!1};class L{constructor(H){this.utf8=H,this.view=I.encode(H),this.buffer=n?n.from(this.view.buffer,0,this.view.byteLength):{}}}class F{constructor(){this.cache=new Map}get(H,Y){let Z=this.cache.get(Y);return Z===void 0&&(Y==="view"?Z=function(ne,re){return re.subarray(ne)}.bind(null,H):Z=function(ne,re){return re.slice(ne)}.bind(null,H),this.cache.set(Y,Z)),Z}}const j=function(U,H){let Y=0,Z=U.length;for(;Y<Z&&U[Y]===H;)Y++;for(;Z>Y&&U[Z-1]===H;)Z--;return U.slice(Y,Z)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter:EventEmitter$1}=eventsExports,{fromCallback:fromCallback$1}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common$7,rangeOptions=rangeOptions_1,kPromise$1=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop$3=()=>{};let AbstractLevel$1=class extends EventEmitter$1{constructor(n,_){if(super(),typeof n!="object"||n===null)throw new TypeError("The first argument 'manifest' must be an object");_=getOptions(_);const{keyEncoding:x,valueEncoding:E,passive:S,...C}=_;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=C,this[kStatus]="opening",this.supports=supports(n,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:n.snapshots!==!1,permanence:n.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:n.encodings||{},events:Object.assign({},n.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(x||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(E||"utf8");for(const T of this[kTranscoder].encodings())this.supports.encodings[T.commonName]||(this.supports.encodings[T.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop$3)})}get status(){return this[kStatus]}keyEncoding(n){return this[kTranscoder].encoding(n??this[kKeyEncoding])}valueEncoding(n){return this[kTranscoder].encoding(n??this[kValueEncoding])}open(n,_){_=getCallback(n,_),_=fromCallback$1(_,kPromise$1),n={...this[kOptions$1],...getOptions(n)},n.createIfMissing=n.createIfMissing!==!1,n.errorIfExists=!!n.errorIfExists;const x=E=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,E?()=>x(E):x):this[kStatus]!=="open"?_(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:E})):_()};return n.passive?this[kStatus]==="opening"?this.once(kLanded,x):this.nextTick(x):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(n,E=>{if(E){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),x(E)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),x()})):this[kStatus]==="open"?this.nextTick(x):this.once(kLanded,()=>this.open(n,_)),_[kPromise$1]}_open(n,_){this.nextTick(_)}close(n){n=fromCallback$1(n,kPromise$1);const _=x=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,x?_(x):_):this[kStatus]!=="closed"?n(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:x})):n()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const x=E=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),_(E)};this[kCloseResources](()=>{this._close(E=>{if(E)return x(E);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),_()})})}else this[kStatus]==="closed"?this.nextTick(_):this.once(kLanded,()=>this.close(n));return n[kPromise$1]}[kCloseResources](n){if(this[kResources].size===0)return this.nextTick(n);let _=this[kResources].size,x=!0;const E=()=>{--_===0&&(x?this.nextTick(n):n())};for(const S of this[kResources])S.close(E);x=!1,this[kResources].clear()}_close(n){this.nextTick(n)}get(n,_,x){if(x=getCallback(_,x),x=fromCallback$1(x,kPromise$1),_=getOptions(_,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(n,_,x)),x[kPromise$1];if(maybeError(this,x))return x[kPromise$1];const E=this._checkKey(n);if(E)return this.nextTick(x,E),x[kPromise$1];const S=this.keyEncoding(_.keyEncoding),C=this.valueEncoding(_.valueEncoding),T=S.format,B=C.format;return(_.keyEncoding!==T||_.valueEncoding!==B)&&(_=Object.assign({},_,{keyEncoding:T,valueEncoding:B})),this._get(this.prefixKey(S.encode(n),T),_,(A,I)=>{if(A)return(A.code==="LEVEL_NOT_FOUND"||A.notFound||/NotFound/i.test(A))&&(A.code||(A.code="LEVEL_NOT_FOUND"),A.notFound||(A.notFound=!0),A.status||(A.status=404)),x(A);try{I=C.decode(I)}catch(D){return x(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:D}))}x(null,I)}),x[kPromise$1]}_get(n,_,x){this.nextTick(x,new Error("NotFound"))}getMany(n,_,x){if(x=getCallback(_,x),x=fromCallback$1(x,kPromise$1),_=getOptions(_,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(n,_,x)),x[kPromise$1];if(maybeError(this,x))return x[kPromise$1];if(!Array.isArray(n))return this.nextTick(x,new TypeError("The first argument 'keys' must be an array")),x[kPromise$1];if(n.length===0)return this.nextTick(x,null,[]),x[kPromise$1];const E=this.keyEncoding(_.keyEncoding),S=this.valueEncoding(_.valueEncoding),C=E.format,T=S.format;(_.keyEncoding!==C||_.valueEncoding!==T)&&(_=Object.assign({},_,{keyEncoding:C,valueEncoding:T}));const B=new Array(n.length);for(let A=0;A<n.length;A++){const I=n[A],D=this._checkKey(I);if(D)return this.nextTick(x,D),x[kPromise$1];B[A]=this.prefixKey(E.encode(I),C)}return this._getMany(B,_,(A,I)=>{if(A)return x(A);try{for(let D=0;D<I.length;D++)I[D]!==void 0&&(I[D]=S.decode(I[D]))}catch(D){return x(new ModuleError$1(`Could not decode one or more of ${I.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:D}))}x(null,I)}),x[kPromise$1]}_getMany(n,_,x){this.nextTick(x,null,new Array(n.length).fill(void 0))}put(n,_,x,E){if(E=getCallback(x,E),E=fromCallback$1(E,kPromise$1),x=getOptions(x,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(n,_,x,E)),E[kPromise$1];if(maybeError(this,E))return E[kPromise$1];const S=this._checkKey(n)||this._checkValue(_);if(S)return this.nextTick(E,S),E[kPromise$1];const C=this.keyEncoding(x.keyEncoding),T=this.valueEncoding(x.valueEncoding),B=C.format,A=T.format;(x.keyEncoding!==B||x.valueEncoding!==A)&&(x=Object.assign({},x,{keyEncoding:B,valueEncoding:A}));const I=this.prefixKey(C.encode(n),B),D=T.encode(_);return this._put(I,D,x,M=>{if(M)return E(M);this.emit("put",n,_),E()}),E[kPromise$1]}_put(n,_,x,E){this.nextTick(E)}del(n,_,x){if(x=getCallback(_,x),x=fromCallback$1(x,kPromise$1),_=getOptions(_,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(n,_,x)),x[kPromise$1];if(maybeError(this,x))return x[kPromise$1];const E=this._checkKey(n);if(E)return this.nextTick(x,E),x[kPromise$1];const S=this.keyEncoding(_.keyEncoding),C=S.format;return _.keyEncoding!==C&&(_=Object.assign({},_,{keyEncoding:C})),this._del(this.prefixKey(S.encode(n),C),_,T=>{if(T)return x(T);this.emit("del",n),x()}),x[kPromise$1]}_del(n,_,x){this.nextTick(x)}batch(n,_,x){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof n=="function"?x=n:x=getCallback(_,x),x=fromCallback$1(x,kPromise$1),_=getOptions(_,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(n,_,x)),x[kPromise$1];if(maybeError(this,x))return x[kPromise$1];if(!Array.isArray(n))return this.nextTick(x,new TypeError("The first argument 'operations' must be an array")),x[kPromise$1];if(n.length===0)return this.nextTick(x),x[kPromise$1];const E=new Array(n.length),{keyEncoding:S,valueEncoding:C,...T}=_;for(let B=0;B<n.length;B++){if(typeof n[B]!="object"||n[B]===null)return this.nextTick(x,new TypeError("A batch operation must be an object")),x[kPromise$1];const A=Object.assign({},n[B]);if(A.type!=="put"&&A.type!=="del")return this.nextTick(x,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),x[kPromise$1];const I=this._checkKey(A.key);if(I)return this.nextTick(x,I),x[kPromise$1];const D=A.sublevel!=null?A.sublevel:this,M=D.keyEncoding(A.keyEncoding||S),V=M.format;if(A.key=D.prefixKey(M.encode(A.key),V),A.keyEncoding=V,A.type==="put"){const L=this._checkValue(A.value);if(L)return this.nextTick(x,L),x[kPromise$1];const F=D.valueEncoding(A.valueEncoding||C);A.value=F.encode(A.value),A.valueEncoding=F.format}D!==this&&(A.sublevel=null),E[B]=A}return this._batch(E,T,B=>{if(B)return x(B);this.emit("batch",n),x()}),x[kPromise$1]}_batch(n,_,x){this.nextTick(x)}sublevel(n,_){return this._sublevel(n,AbstractSublevel.defaults(_))}_sublevel(n,_){return new AbstractSublevel(this,n,_)}prefixKey(n,_){return n}clear(n,_){if(_=getCallback(n,_),_=fromCallback$1(_,kPromise$1),n=getOptions(n,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(n,_)),_[kPromise$1];if(maybeError(this,_))return _[kPromise$1];const x=n,E=this.keyEncoding(n.keyEncoding);return n=rangeOptions(n,E),n.keyEncoding=E.format,n.limit===0?this.nextTick(_):this._clear(n,S=>{if(S)return _(S);this.emit("clear",x),_()}),_[kPromise$1]}_clear(n,_){this.nextTick(_)}iterator(n){const _=this.keyEncoding(n&&n.keyEncoding),x=this.valueEncoding(n&&n.valueEncoding);if(n=rangeOptions(n,_),n.keys=n.keys!==!1,n.values=n.values!==!1,n[AbstractIterator$1.keyEncoding]=_,n[AbstractIterator$1.valueEncoding]=x,n.keyEncoding=_.format,n.valueEncoding=x.format,this[kStatus]==="opening")return new DeferredIterator(this,n);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(n)}_iterator(n){return new AbstractIterator$1(this,n)}keys(n){const _=this.keyEncoding(n&&n.keyEncoding),x=this.valueEncoding(n&&n.valueEncoding);if(n=rangeOptions(n,_),n[AbstractIterator$1.keyEncoding]=_,n[AbstractIterator$1.valueEncoding]=x,n.keyEncoding=_.format,n.valueEncoding=x.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,n);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(n)}_keys(n){return new DefaultKeyIterator(this,n)}values(n){const _=this.keyEncoding(n&&n.keyEncoding),x=this.valueEncoding(n&&n.valueEncoding);if(n=rangeOptions(n,_),n[AbstractIterator$1.keyEncoding]=_,n[AbstractIterator$1.valueEncoding]=x,n.keyEncoding=_.format,n.valueEncoding=x.format,this[kStatus]==="opening")return new DeferredValueIterator(this,n);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(n)}_values(n){return new DefaultValueIterator(this,n)}defer(n){if(typeof n!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(n)}[kUndefer](){if(this[kOperations].length===0)return;const n=this[kOperations];this[kOperations]=[];for(const _ of n)_()}attachResource(n){if(typeof n!="object"||n===null||typeof n.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(n)}detachResource(n){this[kResources].delete(n)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(n){if(n==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(n){if(n==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(t,n){return t[kStatus]!=="open"?(t.nextTick(n,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(t){return Object.keys(t.supports.encodings).filter(n=>!!t.supports.encodings[n])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var runParallelLimit_1=runParallelLimit;const queueMicrotask$1=queueMicrotask_1;function runParallelLimit(t,n,_){if(typeof n!="number")throw new Error("second argument must be a Number");let x,E,S,C,T,B=!0,A;Array.isArray(t)?(x=[],S=E=t.length):(C=Object.keys(t),x={},S=E=C.length);function I(M){function V(){_&&_(M,x),_=null}B?queueMicrotask$1(V):V()}function D(M,V,L){if(x[M]=L,V&&(T=!0),--S===0||V)I(V);else if(!T&&A<E){let F;C?(F=C[A],A+=1,t[F](function(j,U){D(F,j,U)})):(F=A,A+=1,t[F](function(j,U){D(F,j,U)}))}}A=n,S?C?C.some(function(M,V){return t[M](function(L,F){D(M,L,F)}),V===n-1}):t.some(function(M,V){return M(function(L,F){D(V,L,F)}),V===n-1}):I(null),B=!1}var iterator={},keyRange=function(n){const _=n.gte!==void 0?n.gte:n.gt!==void 0?n.gt:void 0,x=n.lte!==void 0?n.lte:n.lt!==void 0?n.lt:void 0,E=n.gte===void 0,S=n.lte===void 0;return _!==void 0&&x!==void 0?IDBKeyRange.bound(_,x,E,S):_!==void 0?IDBKeyRange.lowerBound(_,E):x!==void 0?IDBKeyRange.upperBound(x,S):null};const textEncoder$1=new TextEncoder;var deserialize$2=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):textEncoder$1.encode(t)};const{AbstractIterator}=abstractLevel$1,createKeyRange$1=keyRange,deserialize$1=deserialize$2,kCache=Symbol("cache"),kFinished=Symbol("finished"),kOptions=Symbol("options"),kCurrentOptions=Symbol("currentOptions"),kPosition=Symbol("position"),kLocation$1=Symbol("location"),kFirst=Symbol("first"),emptyOptions={};let Iterator$1=class extends AbstractIterator{constructor(n,_,x){super(n,x),this[kCache]=[],this[kFinished]=this.limit===0,this[kOptions]=x,this[kCurrentOptions]={...x},this[kPosition]=void 0,this[kLocation$1]=_,this[kFirst]=!0}_nextv(n,_,x){if(this[kFirst]=!1,this[kFinished])return this.nextTick(x,null,[]);if(this[kCache].length>0)return n=Math.min(n,this[kCache].length),this.nextTick(x,null,this[kCache].splice(0,n));this[kPosition]!==void 0&&(this[kOptions].reverse?(this[kCurrentOptions].lt=this[kPosition],this[kCurrentOptions].lte=void 0):(this[kCurrentOptions].gt=this[kPosition],this[kCurrentOptions].gte=void 0));let E;try{E=createKeyRange$1(this[kCurrentOptions])}catch{return this[kFinished]=!0,this.nextTick(x,null,[])}const S=this.db.db.transaction([this[kLocation$1]],"readonly"),C=S.objectStore(this[kLocation$1]),T=[];if(this[kOptions].reverse){const B=!this[kOptions].values&&C.openKeyCursor?"openKeyCursor":"openCursor";C[B](E,"prev").onsuccess=A=>{const I=A.target.result;if(I){const{key:D,value:M}=I;this[kPosition]=D,T.push([this[kOptions].keys&&D!==void 0?deserialize$1(D):void 0,this[kOptions].values&&M!==void 0?deserialize$1(M):void 0]),T.length<n?I.continue():maybeCommit(S)}else this[kFinished]=!0}}else{let B,A;const I=()=>{if(B===void 0||A===void 0)return;const D=Math.max(B.length,A.length);D===0||n===1/0?this[kFinished]=!0:this[kPosition]=B[D-1],T.length=D;for(let M=0;M<D;M++){const V=B[M],L=A[M];T[M]=[this[kOptions].keys&&V!==void 0?deserialize$1(V):void 0,this[kOptions].values&&L!==void 0?deserialize$1(L):void 0]}maybeCommit(S)};this[kOptions].keys||n<1/0?C.getAllKeys(E,n<1/0?n:void 0).onsuccess=D=>{B=D.target.result,I()}:(B=[],this.nextTick(I)),this[kOptions].values?C.getAll(E,n<1/0?n:void 0).onsuccess=D=>{A=D.target.result,I()}:(A=[],this.nextTick(I))}S.onabort=()=>{x(S.error||new Error("aborted by user")),x=null},S.oncomplete=()=>{x(null,T),x=null}}_next(n){if(this[kCache].length>0){const[_,x]=this[kCache].shift();this.nextTick(n,null,_,x)}else if(this[kFinished])this.nextTick(n);else{let _=Math.min(100,this.limit-this.count);this[kFirst]&&(this[kFirst]=!1,_=1),this._nextv(_,emptyOptions,(x,E)=>{if(x)return n(x);this[kCache]=E,this._next(n)})}}_all(n,_){this[kFirst]=!1;const x=this[kCache].splice(0,this[kCache].length),E=this.limit-this.count-x.length;if(E<=0)return this.nextTick(_,null,x);this._nextv(E,emptyOptions,(S,C)=>{if(S)return _(S);x.length>0&&(C=x.concat(C)),_(null,C)})}_seek(n,_){this[kFirst]=!0,this[kCache]=[],this[kFinished]=!1,this[kPosition]=void 0,this[kCurrentOptions]={...this[kOptions]};let x;try{x=createKeyRange$1(this[kOptions])}catch{this[kFinished]=!0;return}x!==null&&!x.includes(n)?this[kFinished]=!0:this[kOptions].reverse?this[kCurrentOptions].lte=n:this[kCurrentOptions].gte=n}};iterator.Iterator=Iterator$1;function maybeCommit(t){typeof t.commit=="function"&&t.commit()}var clear$1=function(n,_,x,E,S){if(E.limit===0)return n.nextTick(S);const C=n.db.transaction([_],"readwrite"),T=C.objectStore(_);let B=0;C.oncomplete=function(){S()},C.onabort=function(){S(C.error||new Error("aborted by user"))};const A=T.openKeyCursor?"openKeyCursor":"openCursor",I=E.reverse?"prev":"next";T[A](x,I).onsuccess=function(D){const M=D.target.result;M&&(T.delete(M.key).onsuccess=function(){(E.limit<=0||++B<E.limit)&&M.continue()})}};const{AbstractLevel}=abstractLevel$1,ModuleError=moduleError,parallel=runParallelLimit_1,{fromCallback}=catering,{Iterator}=iterator,deserialize=deserialize$2,clear=clear$1,createKeyRange=keyRange,DEFAULT_PREFIX="level-js-",kIDB=Symbol("idb"),kNamePrefix=Symbol("namePrefix"),kLocation=Symbol("location"),kVersion=Symbol("version"),kStore=Symbol("store"),kOnComplete=Symbol("onComplete"),kPromise=Symbol("promise");class BrowserLevel extends AbstractLevel{constructor(n,_,x){if(typeof _=="function"||typeof x=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:E,version:S,...C}=_||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},C),typeof n!="string")throw new Error("constructor requires a location string argument");this[kLocation]=n,this[kNamePrefix]=E??DEFAULT_PREFIX,this[kVersion]=parseInt(S||1,10),this[kIDB]=null}get location(){return this[kLocation]}get namePrefix(){return this[kNamePrefix]}get version(){return this[kVersion]}get db(){return this[kIDB]}get type(){return"browser-level"}_open(n,_){const x=indexedDB.open(this[kNamePrefix]+this[kLocation],this[kVersion]);x.onerror=function(){_(x.error||new Error("unknown error"))},x.onsuccess=()=>{this[kIDB]=x.result,_()},x.onupgradeneeded=E=>{const S=E.target.result;S.objectStoreNames.contains(this[kLocation])||S.createObjectStore(this[kLocation])}}[kStore](n){return this[kIDB].transaction([this[kLocation]],n).objectStore(this[kLocation])}[kOnComplete](n,_){const x=n.transaction;x.onabort=function(){_(x.error||new Error("aborted by user"))},x.oncomplete=function(){_(null,n.result)}}_get(n,_,x){const E=this[kStore]("readonly");let S;try{S=E.get(n)}catch(C){return this.nextTick(x,C)}this[kOnComplete](S,function(C,T){if(C)return x(C);if(T===void 0)return x(new ModuleError("Entry not found",{code:"LEVEL_NOT_FOUND"}));x(null,deserialize(T))})}_getMany(n,_,x){const E=this[kStore]("readonly"),S=n.map(C=>T=>{let B;try{B=E.get(C)}catch(A){return T(A)}B.onsuccess=()=>{const A=B.result;T(null,A===void 0?A:deserialize(A))},B.onerror=A=>{A.stopPropagation(),T(B.error)}});parallel(S,16,x)}_del(n,_,x){const E=this[kStore]("readwrite");let S;try{S=E.delete(n)}catch(C){return this.nextTick(x,C)}this[kOnComplete](S,x)}_put(n,_,x,E){const S=this[kStore]("readwrite");let C;try{C=S.put(_,n)}catch(T){return this.nextTick(E,T)}this[kOnComplete](C,E)}_iterator(n){return new Iterator(this,this[kLocation],n)}_batch(n,_,x){const E=this[kStore]("readwrite"),S=E.transaction;let C=0,T;S.onabort=function(){x(T||S.error||new Error("aborted by user"))},S.oncomplete=function(){x()};function B(){const A=n[C++],I=A.key;let D;try{D=A.type==="del"?E.delete(I):E.put(A.value,I)}catch(M){T=M,S.abort();return}C<n.length?D.onsuccess=B:typeof S.commit=="function"&&S.commit()}B()}_clear(n,_){let x,E;try{x=createKeyRange(n)}catch{return this.nextTick(_)}if(n.limit>=0)return clear(this,this[kLocation],x,n,_);try{const S=this[kStore]("readwrite");E=x?S.delete(x):S.clear()}catch(S){return this.nextTick(_,S)}this[kOnComplete](E,_)}_close(n){this[kIDB].close(),this.nextTick(n)}}BrowserLevel.destroy=function(t,n,_){typeof n=="function"&&(_=n,n=DEFAULT_PREFIX),_=fromCallback(_,kPromise);const x=indexedDB.deleteDatabase(n+t);return x.onsuccess=function(){_()},x.onerror=function(E){_(E)},_[kPromise]};browserLevel.BrowserLevel=BrowserLevel;var Level=browserLevel.BrowserLevel;const Bi=class Bi extends Error{constructor(_="The operation was aborted"){super(_);wt(this,"code");wt(this,"type");this.code=Bi.code,this.type=Bi.type}};wt(Bi,"code","ABORT_ERR"),wt(Bi,"type","aborted");let AbortError=Bi;class CodeError extends Error{constructor(_,x,E){super(_);wt(this,"code");wt(this,"props");this.code=x,this.name=E?.name??"CodeError",this.props=E??{}}}var forge$m={options:{usePureJavaScript:!1}};const forge$n=getDefaultExportFromCjs(forge$m);var util$8={exports:{}},api$2={},baseN$1=api$2,_reverseAlphabets={};api$2.encode=function(t,n,_){if(typeof n!="string")throw new TypeError('"alphabet" must be a string.');if(_!==void 0&&typeof _!="number")throw new TypeError('"maxline" must be a number.');var x="";if(!(t instanceof Uint8Array))x=_encodeWithByteBuffer(t,n);else{var E=0,S=n.length,C=n.charAt(0),T=[0];for(E=0;E<t.length;++E){for(var B=0,A=t[E];B<T.length;++B)A+=T[B]<<8,T[B]=A%S,A=A/S|0;for(;A>0;)T.push(A%S),A=A/S|0}for(E=0;t[E]===0&&E<t.length-1;++E)x+=C;for(E=T.length-1;E>=0;--E)x+=n[T[E]]}if(_){var I=new RegExp(".{1,"+_+"}","g");x=x.match(I).join(`\r
`)}return x};api$2.decode=function(t,n){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof n!="string")throw new TypeError('"alphabet" must be a string.');var _=_reverseAlphabets[n];if(!_){_=_reverseAlphabets[n]=[];for(var x=0;x<n.length;++x)_[n.charCodeAt(x)]=x}t=t.replace(/\s/g,"");for(var E=n.length,S=n.charAt(0),C=[0],x=0;x<t.length;x++){var T=_[t.charCodeAt(x)];if(T===void 0)return;for(var B=0,A=T;B<C.length;++B)A+=C[B]*E,C[B]=A&255,A>>=8;for(;A>0;)C.push(A&255),A>>=8}for(var I=0;t[I]===S&&I<t.length-1;++I)C.push(0);return typeof Buffer$5<"u"?Buffer$5.from(C.reverse()):new Uint8Array(C.reverse())};function _encodeWithByteBuffer(t,n){var _=0,x=n.length,E=n.charAt(0),S=[0];for(_=0;_<t.length();++_){for(var C=0,T=t.at(_);C<S.length;++C)T+=S[C]<<8,S[C]=T%x,T=T/x|0;for(;T>0;)S.push(T%x),T=T/x|0}var B="";for(_=0;t.at(_)===0&&_<t.length()-1;++_)B+=E;for(_=S.length-1;_>=0;--_)B+=n[S[_]];return B}var forge$l=forge$m,baseN=baseN$1,util$7=util$8.exports=forge$l.util=forge$l.util||{};(function(){if(typeof browser$1$1<"u"&&browser$1$1.nextTick&&!browser$1$1.browser){util$7.nextTick=browser$1$1.nextTick,typeof setImmediate=="function"?util$7.setImmediate=setImmediate:util$7.setImmediate=util$7.nextTick;return}if(typeof setImmediate=="function"){util$7.setImmediate=function(){return setImmediate.apply(void 0,arguments)},util$7.nextTick=function(C){return setImmediate(C)};return}if(util$7.setImmediate=function(C){setTimeout(C,0)},typeof window<"u"&&typeof window.postMessage=="function"){let C=function(T){if(T.source===window&&T.data===t){T.stopPropagation();var B=n.slice();n.length=0,B.forEach(function(A){A()})}};var t="forge.setImmediate",n=[];util$7.setImmediate=function(T){n.push(T),n.length===1&&window.postMessage(t,"*")},window.addEventListener("message",C,!0)}if(typeof MutationObserver<"u"){var _=Date.now(),x=!0,E=document.createElement("div"),n=[];new MutationObserver(function(){var T=n.slice();n.length=0,T.forEach(function(B){B()})}).observe(E,{attributes:!0});var S=util$7.setImmediate;util$7.setImmediate=function(T){Date.now()-_>15?(_=Date.now(),S(T)):(n.push(T),n.length===1&&E.setAttribute("a",x=!x))}}util$7.nextTick=util$7.setImmediate})();util$7.isNodejs=typeof browser$1$1<"u"&&browser$1$1.versions&&browser$1$1.versions.node;util$7.globalScope=function(){return util$7.isNodejs?commonjsGlobal:typeof self>"u"?window:self}();util$7.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};util$7.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};util$7.isArrayBufferView=function(t){return t&&util$7.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function _checkBitsParam(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}util$7.ByteBuffer=ByteStringBuffer;function ByteStringBuffer(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(util$7.isArrayBuffer(t)||util$7.isArrayBufferView(t))if(typeof Buffer$5<"u"&&t instanceof Buffer$5)this.data=t.toString("binary");else{var n=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,n)}catch{for(var _=0;_<n.length;++_)this.putByte(n[_])}}else(t instanceof ByteStringBuffer||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}util$7.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;util$7.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)};util$7.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};util$7.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};util$7.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};util$7.ByteStringBuffer.prototype.fillWithByte=function(t,n){t=String.fromCharCode(t);for(var _=this.data;n>0;)n&1&&(_+=t),n>>>=1,n>0&&(t+=t);return this.data=_,this._optimizeConstructedString(n),this};util$7.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};util$7.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(util$7.encodeUtf8(t))};util$7.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};util$7.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};util$7.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};util$7.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};util$7.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};util$7.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};util$7.ByteStringBuffer.prototype.putInt=function(t,n){_checkBitsParam(n);var _="";do n-=8,_+=String.fromCharCode(t>>n&255);while(n>0);return this.putBytes(_)};util$7.ByteStringBuffer.prototype.putSignedInt=function(t,n){return t<0&&(t+=2<<n-1),this.putInt(t,n)};util$7.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};util$7.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};util$7.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};util$7.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};util$7.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};util$7.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};util$7.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};util$7.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};util$7.ByteStringBuffer.prototype.getInt=function(t){_checkBitsParam(t);var n=0;do n=(n<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return n};util$7.ByteStringBuffer.prototype.getSignedInt=function(t){var n=this.getInt(t),_=2<<t-2;return n>=_&&(n-=_<<1),n};util$7.ByteStringBuffer.prototype.getBytes=function(t){var n;return t?(t=Math.min(this.length(),t),n=this.data.slice(this.read,this.read+t),this.read+=t):t===0?n="":(n=this.read===0?this.data:this.data.slice(this.read),this.clear()),n};util$7.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};util$7.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};util$7.ByteStringBuffer.prototype.setAt=function(t,n){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(n)+this.data.substr(this.read+t+1),this};util$7.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};util$7.ByteStringBuffer.prototype.copy=function(){var t=util$7.createBuffer(this.data);return t.read=this.read,t};util$7.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};util$7.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};util$7.ByteStringBuffer.prototype.truncate=function(t){var n=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,n),this.read=0,this};util$7.ByteStringBuffer.prototype.toHex=function(){for(var t="",n=this.read;n<this.data.length;++n){var _=this.data.charCodeAt(n);_<16&&(t+="0"),t+=_.toString(16)}return t};util$7.ByteStringBuffer.prototype.toString=function(){return util$7.decodeUtf8(this.bytes())};function DataBuffer(t,n){n=n||{},this.read=n.readOffset||0,this.growSize=n.growSize||1024;var _=util$7.isArrayBuffer(t),x=util$7.isArrayBufferView(t);if(_||x){_?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in n?n.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in n&&(this.write=n.writeOffset)}util$7.DataBuffer=DataBuffer;util$7.DataBuffer.prototype.length=function(){return this.write-this.read};util$7.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};util$7.DataBuffer.prototype.accommodate=function(t,n){if(this.length()>=t)return this;n=Math.max(n||this.growSize,t);var _=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),x=new Uint8Array(this.length()+n);return x.set(_),this.data=new DataView(x.buffer),this};util$7.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};util$7.DataBuffer.prototype.fillWithByte=function(t,n){this.accommodate(n);for(var _=0;_<n;++_)this.data.setUint8(t);return this};util$7.DataBuffer.prototype.putBytes=function(t,n){if(util$7.isArrayBufferView(t)){var _=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),x=_.byteLength-_.byteOffset;this.accommodate(x);var E=new Uint8Array(this.data.buffer,this.write);return E.set(_),this.write+=x,this}if(util$7.isArrayBuffer(t)){var _=new Uint8Array(t);this.accommodate(_.byteLength);var E=new Uint8Array(this.data.buffer);return E.set(_,this.write),this.write+=_.byteLength,this}if(t instanceof util$7.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&util$7.isArrayBufferView(t.data)){var _=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(_.byteLength);var E=new Uint8Array(t.data.byteLength,this.write);return E.set(_),this.write+=_.byteLength,this}if(t instanceof util$7.ByteStringBuffer&&(t=t.data,n="binary"),n=n||"binary",typeof t=="string"){var S;if(n==="hex")return this.accommodate(Math.ceil(t.length/2)),S=new Uint8Array(this.data.buffer,this.write),this.write+=util$7.binary.hex.decode(t,S,this.write),this;if(n==="base64")return this.accommodate(Math.ceil(t.length/4)*3),S=new Uint8Array(this.data.buffer,this.write),this.write+=util$7.binary.base64.decode(t,S,this.write),this;if(n==="utf8"&&(t=util$7.encodeUtf8(t),n="binary"),n==="binary"||n==="raw")return this.accommodate(t.length),S=new Uint8Array(this.data.buffer,this.write),this.write+=util$7.binary.raw.decode(S),this;if(n==="utf16")return this.accommodate(t.length*2),S=new Uint16Array(this.data.buffer,this.write),this.write+=util$7.text.utf16.encode(S),this;throw new Error("Invalid encoding: "+n)}throw Error("Invalid parameter: "+t)};util$7.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};util$7.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};util$7.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};util$7.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};util$7.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};util$7.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};util$7.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};util$7.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};util$7.DataBuffer.prototype.putInt=function(t,n){_checkBitsParam(n),this.accommodate(n/8);do n-=8,this.data.setInt8(this.write++,t>>n&255);while(n>0);return this};util$7.DataBuffer.prototype.putSignedInt=function(t,n){return _checkBitsParam(n),this.accommodate(n/8),t<0&&(t+=2<<n-1),this.putInt(t,n)};util$7.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};util$7.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};util$7.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};util$7.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};util$7.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};util$7.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};util$7.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};util$7.DataBuffer.prototype.getInt=function(t){_checkBitsParam(t);var n=0;do n=(n<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return n};util$7.DataBuffer.prototype.getSignedInt=function(t){var n=this.getInt(t),_=2<<t-2;return n>=_&&(n-=_<<1),n};util$7.DataBuffer.prototype.getBytes=function(t){var n;return t?(t=Math.min(this.length(),t),n=this.data.slice(this.read,this.read+t),this.read+=t):t===0?n="":(n=this.read===0?this.data:this.data.slice(this.read),this.clear()),n};util$7.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};util$7.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};util$7.DataBuffer.prototype.setAt=function(t,n){return this.data.setUint8(t,n),this};util$7.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};util$7.DataBuffer.prototype.copy=function(){return new util$7.DataBuffer(this)};util$7.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),n=new Uint8Array(t.byteLength);n.set(t),this.data=new DataView(n),this.write-=this.read,this.read=0}return this};util$7.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};util$7.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};util$7.DataBuffer.prototype.toHex=function(){for(var t="",n=this.read;n<this.data.byteLength;++n){var _=this.data.getUint8(n);_<16&&(t+="0"),t+=_.toString(16)}return t};util$7.DataBuffer.prototype.toString=function(t){var n=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return util$7.binary.raw.encode(n);if(t==="hex")return util$7.binary.hex.encode(n);if(t==="base64")return util$7.binary.base64.encode(n);if(t==="utf8")return util$7.text.utf8.decode(n);if(t==="utf16")return util$7.text.utf16.decode(n);throw new Error("Invalid encoding: "+t)};util$7.createBuffer=function(t,n){return n=n||"raw",t!==void 0&&n==="utf8"&&(t=util$7.encodeUtf8(t)),new util$7.ByteBuffer(t)};util$7.fillString=function(t,n){for(var _="";n>0;)n&1&&(_+=t),n>>>=1,n>0&&(t+=t);return _};util$7.xorBytes=function(t,n,_){for(var x="",E="",S="",C=0,T=0;_>0;--_,++C)E=t.charCodeAt(C)^n.charCodeAt(C),T>=10&&(x+=S,S="",T=0),S+=String.fromCharCode(E),++T;return x+=S,x};util$7.hexToBytes=function(t){var n="",_=0;for(t.length&!0&&(_=1,n+=String.fromCharCode(parseInt(t[0],16)));_<t.length;_+=2)n+=String.fromCharCode(parseInt(t.substr(_,2),16));return n};util$7.bytesToHex=function(t){return util$7.createBuffer(t).toHex()};util$7.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";util$7.encode64=function(t,n){for(var _="",x="",E,S,C,T=0;T<t.length;)E=t.charCodeAt(T++),S=t.charCodeAt(T++),C=t.charCodeAt(T++),_+=_base64.charAt(E>>2),_+=_base64.charAt((E&3)<<4|S>>4),isNaN(S)?_+="==":(_+=_base64.charAt((S&15)<<2|C>>6),_+=isNaN(C)?"=":_base64.charAt(C&63)),n&&_.length>n&&(x+=_.substr(0,n)+`\r
`,_=_.substr(n));return x+=_,x};util$7.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var n="",_,x,E,S,C=0;C<t.length;)_=_base64Idx[t.charCodeAt(C++)-43],x=_base64Idx[t.charCodeAt(C++)-43],E=_base64Idx[t.charCodeAt(C++)-43],S=_base64Idx[t.charCodeAt(C++)-43],n+=String.fromCharCode(_<<2|x>>4),E!==64&&(n+=String.fromCharCode((x&15)<<4|E>>2),S!==64&&(n+=String.fromCharCode((E&3)<<6|S)));return n};util$7.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};util$7.decodeUtf8=function(t){return decodeURIComponent(escape(t))};util$7.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}};util$7.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};util$7.binary.raw.decode=function(t,n,_){var x=n;x||(x=new Uint8Array(t.length)),_=_||0;for(var E=_,S=0;S<t.length;++S)x[E++]=t.charCodeAt(S);return n?E-_:x};util$7.binary.hex.encode=util$7.bytesToHex;util$7.binary.hex.decode=function(t,n,_){var x=n;x||(x=new Uint8Array(Math.ceil(t.length/2))),_=_||0;var E=0,S=_;for(t.length&1&&(E=1,x[S++]=parseInt(t[0],16));E<t.length;E+=2)x[S++]=parseInt(t.substr(E,2),16);return n?S-_:x};util$7.binary.base64.encode=function(t,n){for(var _="",x="",E,S,C,T=0;T<t.byteLength;)E=t[T++],S=t[T++],C=t[T++],_+=_base64.charAt(E>>2),_+=_base64.charAt((E&3)<<4|S>>4),isNaN(S)?_+="==":(_+=_base64.charAt((S&15)<<2|C>>6),_+=isNaN(C)?"=":_base64.charAt(C&63)),n&&_.length>n&&(x+=_.substr(0,n)+`\r
`,_=_.substr(n));return x+=_,x};util$7.binary.base64.decode=function(t,n,_){var x=n;x||(x=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),_=_||0;for(var E,S,C,T,B=0,A=_;B<t.length;)E=_base64Idx[t.charCodeAt(B++)-43],S=_base64Idx[t.charCodeAt(B++)-43],C=_base64Idx[t.charCodeAt(B++)-43],T=_base64Idx[t.charCodeAt(B++)-43],x[A++]=E<<2|S>>4,C!==64&&(x[A++]=(S&15)<<4|C>>2,T!==64&&(x[A++]=(C&3)<<6|T));return n?A-_:x.subarray(0,A)};util$7.binary.base58.encode=function(t,n){return util$7.binary.baseN.encode(t,_base58,n)};util$7.binary.base58.decode=function(t,n){return util$7.binary.baseN.decode(t,_base58,n)};util$7.text={utf8:{},utf16:{}};util$7.text.utf8.encode=function(t,n,_){t=util$7.encodeUtf8(t);var x=n;x||(x=new Uint8Array(t.length)),_=_||0;for(var E=_,S=0;S<t.length;++S)x[E++]=t.charCodeAt(S);return n?E-_:x};util$7.text.utf8.decode=function(t){return util$7.decodeUtf8(String.fromCharCode.apply(null,t))};util$7.text.utf16.encode=function(t,n,_){var x=n;x||(x=new Uint8Array(t.length*2));var E=new Uint16Array(x.buffer);_=_||0;for(var S=_,C=_,T=0;T<t.length;++T)E[C++]=t.charCodeAt(T),S+=2;return n?S-_:x};util$7.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};util$7.deflate=function(t,n,_){if(n=util$7.decode64(t.deflate(util$7.encode64(n)).rval),_){var x=2,E=n.charCodeAt(1);E&32&&(x=6),n=n.substring(x,n.length-4)}return n};util$7.inflate=function(t,n,_){var x=t.inflate(util$7.encode64(n)).rval;return x===null?null:util$7.decode64(x)};var _setStorageObject=function(t,n,_){if(!t)throw new Error("WebStorage not available.");var x;if(_===null?x=t.removeItem(n):(_=util$7.encode64(JSON.stringify(_)),x=t.setItem(n,_)),typeof x<"u"&&x.rval!==!0){var E=new Error(x.error.message);throw E.id=x.error.id,E.name=x.error.name,E}},_getStorageObject=function(t,n){if(!t)throw new Error("WebStorage not available.");var _=t.getItem(n);if(t.init)if(_.rval===null){if(_.error){var x=new Error(_.error.message);throw x.id=_.error.id,x.name=_.error.name,x}_=null}else _=_.rval;return _!==null&&(_=JSON.parse(util$7.decode64(_))),_},_setItem=function(t,n,_,x){var E=_getStorageObject(t,n);E===null&&(E={}),E[_]=x,_setStorageObject(t,n,E)},_getItem=function(t,n,_){var x=_getStorageObject(t,n);return x!==null&&(x=_ in x?x[_]:null),x},_removeItem=function(t,n,_){var x=_getStorageObject(t,n);if(x!==null&&_ in x){delete x[_];var E=!0;for(var S in x){E=!1;break}E&&(x=null),_setStorageObject(t,n,x)}},_clearItems=function(t,n){_setStorageObject(t,n,null)},_callStorageFunction=function(t,n,_){var x=null;typeof _>"u"&&(_=["web","flash"]);var E,S=!1,C=null;for(var T in _){E=_[T];try{if(E==="flash"||E==="both"){if(n[0]===null)throw new Error("Flash local storage not available.");x=t.apply(this,n),S=E==="flash"}(E==="web"||E==="both")&&(n[0]=localStorage,x=t.apply(this,n),S=!0)}catch(B){C=B}if(S)break}if(!S)throw C;return x};util$7.setItem=function(t,n,_,x,E){_callStorageFunction(_setItem,arguments,E)};util$7.getItem=function(t,n,_,x){return _callStorageFunction(_getItem,arguments,x)};util$7.removeItem=function(t,n,_,x){_callStorageFunction(_removeItem,arguments,x)};util$7.clearItems=function(t,n,_){_callStorageFunction(_clearItems,arguments,_)};util$7.isEmpty=function(t){for(var n in t)if(t.hasOwnProperty(n))return!1;return!0};util$7.format=function(t){for(var n=/%./g,_,x,E=0,S=[],C=0;_=n.exec(t);){x=t.substring(C,n.lastIndex-2),x.length>0&&S.push(x),C=n.lastIndex;var T=_[0][1];switch(T){case"s":case"o":E<arguments.length?S.push(arguments[E+++1]):S.push("<?>");break;case"%":S.push("%");break;default:S.push("<%"+T+"?>")}}return S.push(t.substring(C)),S.join("")};util$7.formatNumber=function(t,n,_,x){var E=t,S=isNaN(n=Math.abs(n))?2:n,C=_===void 0?",":_,T=x===void 0?".":x,B=E<0?"-":"",A=parseInt(E=Math.abs(+E||0).toFixed(S),10)+"",I=A.length>3?A.length%3:0;return B+(I?A.substr(0,I)+T:"")+A.substr(I).replace(/(\d{3})(?=\d)/g,"$1"+T)+(S?C+Math.abs(E-A).toFixed(S).slice(2):"")};util$7.formatSize=function(t){return t>=1073741824?t=util$7.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=util$7.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=util$7.formatNumber(t/1024,0)+" KiB":t=util$7.formatNumber(t,0)+" bytes",t};util$7.bytesFromIP=function(t){return t.indexOf(".")!==-1?util$7.bytesFromIPv4(t):t.indexOf(":")!==-1?util$7.bytesFromIPv6(t):null};util$7.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var n=util$7.createBuffer(),_=0;_<t.length;++_){var x=parseInt(t[_],10);if(isNaN(x))return null;n.putByte(x)}return n.getBytes()};util$7.bytesFromIPv6=function(t){var n=0;t=t.split(":").filter(function(C){return C.length===0&&++n,!0});for(var _=(8-t.length+n)*2,x=util$7.createBuffer(),E=0;E<8;++E){if(!t[E]||t[E].length===0){x.fillWithByte(0,_),_=0;continue}var S=util$7.hexToBytes(t[E]);S.length<2&&x.putByte(0),x.putBytes(S)}return x.getBytes()};util$7.bytesToIP=function(t){return t.length===4?util$7.bytesToIPv4(t):t.length===16?util$7.bytesToIPv6(t):null};util$7.bytesToIPv4=function(t){if(t.length!==4)return null;for(var n=[],_=0;_<t.length;++_)n.push(t.charCodeAt(_));return n.join(".")};util$7.bytesToIPv6=function(t){if(t.length!==16)return null;for(var n=[],_=[],x=0,E=0;E<t.length;E+=2){for(var S=util$7.bytesToHex(t[E]+t[E+1]);S[0]==="0"&&S!=="0";)S=S.substr(1);if(S==="0"){var C=_[_.length-1],T=n.length;!C||T!==C.end+1?_.push({start:T,end:T}):(C.end=T,C.end-C.start>_[x].end-_[x].start&&(x=_.length-1))}n.push(S)}if(_.length>0){var B=_[x];B.end-B.start>0&&(n.splice(B.start,B.end-B.start+1,""),B.start===0&&n.unshift(""),B.end===7&&n.push(""))}return n.join(":")};util$7.estimateCores=function(t,n){if(typeof t=="function"&&(n=t,t={}),t=t||{},"cores"in util$7&&!t.update)return n(null,util$7.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return util$7.cores=navigator.hardwareConcurrency,n(null,util$7.cores);if(typeof Worker>"u")return util$7.cores=1,n(null,util$7.cores);if(typeof Blob>"u")return util$7.cores=2,n(null,util$7.cores);var _=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(C){var T=Date.now(),B=T+4;self.postMessage({st:T,et:B})})}.toString(),")()"],{type:"application/javascript"}));x([],5,16);function x(C,T,B){if(T===0){var A=Math.floor(C.reduce(function(I,D){return I+D},0)/C.length);return util$7.cores=Math.max(1,A),URL.revokeObjectURL(_),n(null,util$7.cores)}E(B,function(I,D){C.push(S(B,D)),x(C,T-1,B)})}function E(C,T){for(var B=[],A=[],I=0;I<C;++I){var D=new Worker(_);D.addEventListener("message",function(M){if(A.push(M.data),A.length===C){for(var V=0;V<C;++V)B[V].terminate();T(null,A)}}),B.push(D)}for(var I=0;I<C;++I)B[I].postMessage(I)}function S(C,T){for(var B=[],A=0;A<C;++A)for(var I=T[A],D=B[A]=[],M=0;M<C;++M)if(A!==M){var V=T[M];(I.st>V.st&&I.st<V.et||V.st>I.st&&V.st<I.et)&&D.push(M)}return B.reduce(function(L,F){return Math.max(L,F.length)},0)}};var utilExports=util$8.exports;const forgeUtil=getDefaultExportFromCjs(utilExports);var forge$k=forge$m;forge$k.cipher=forge$k.cipher||{};forge$k.cipher.algorithms=forge$k.cipher.algorithms||{};forge$k.cipher.createCipher=function(t,n){var _=t;if(typeof _=="string"&&(_=forge$k.cipher.getAlgorithm(_),_&&(_=_())),!_)throw new Error("Unsupported algorithm: "+t);return new forge$k.cipher.BlockCipher({algorithm:_,key:n,decrypt:!1})};forge$k.cipher.createDecipher=function(t,n){var _=t;if(typeof _=="string"&&(_=forge$k.cipher.getAlgorithm(_),_&&(_=_())),!_)throw new Error("Unsupported algorithm: "+t);return new forge$k.cipher.BlockCipher({algorithm:_,key:n,decrypt:!0})};forge$k.cipher.registerAlgorithm=function(t,n){t=t.toUpperCase(),forge$k.cipher.algorithms[t]=n};forge$k.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in forge$k.cipher.algorithms?forge$k.cipher.algorithms[t]:null};var BlockCipher=forge$k.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};BlockCipher.prototype.start=function(t){t=t||{};var n={};for(var _ in t)n[_]=t[_];n.decrypt=this._decrypt,this._finish=!1,this._input=forge$k.util.createBuffer(),this.output=t.output||forge$k.util.createBuffer(),this.mode.start(n)};BlockCipher.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};BlockCipher.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(_){return t(this.blockSize,_,!1)},this.mode.unpad=function(_){return t(this.blockSize,_,!0)});var n={};return n.decrypt=this._decrypt,n.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,n)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,n))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,n))};var forge$j=forge$m;forge$j.cipher=forge$j.cipher||{};var modes$1=forge$j.cipher.modes=forge$j.cipher.modes||{};modes$1.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes$1.ecb.prototype.start=function(t){};modes$1.ecb.prototype.encrypt=function(t,n,_){if(t.length()<this.blockSize&&!(_&&t.length()>0))return!0;for(var x=0;x<this._ints;++x)this._inBlock[x]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var x=0;x<this._ints;++x)n.putInt32(this._outBlock[x])};modes$1.ecb.prototype.decrypt=function(t,n,_){if(t.length()<this.blockSize&&!(_&&t.length()>0))return!0;for(var x=0;x<this._ints;++x)this._inBlock[x]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var x=0;x<this._ints;++x)n.putInt32(this._outBlock[x])};modes$1.ecb.prototype.pad=function(t,n){var _=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(_,_),!0};modes$1.ecb.prototype.unpad=function(t,n){if(n.overflow>0)return!1;var _=t.length(),x=t.at(_-1);return x>this.blockSize<<2?!1:(t.truncate(x),!0)};modes$1.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes$1.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=transformIV(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};modes$1.cbc.prototype.encrypt=function(t,n,_){if(t.length()<this.blockSize&&!(_&&t.length()>0))return!0;for(var x=0;x<this._ints;++x)this._inBlock[x]=this._prev[x]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var x=0;x<this._ints;++x)n.putInt32(this._outBlock[x]);this._prev=this._outBlock};modes$1.cbc.prototype.decrypt=function(t,n,_){if(t.length()<this.blockSize&&!(_&&t.length()>0))return!0;for(var x=0;x<this._ints;++x)this._inBlock[x]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var x=0;x<this._ints;++x)n.putInt32(this._prev[x]^this._outBlock[x]);this._prev=this._inBlock.slice(0)};modes$1.cbc.prototype.pad=function(t,n){var _=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(_,_),!0};modes$1.cbc.prototype.unpad=function(t,n){if(n.overflow>0)return!1;var _=t.length(),x=t.at(_-1);return x>this.blockSize<<2?!1:(t.truncate(x),!0)};modes$1.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes$1.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=transformIV(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.cfb.prototype.encrypt=function(t,n,_){var x=t.length();if(x===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&x>=this.blockSize){for(var E=0;E<this._ints;++E)this._inBlock[E]=t.getInt32()^this._outBlock[E],n.putInt32(this._inBlock[E]);return}var S=(this.blockSize-x)%this.blockSize;S>0&&(S=this.blockSize-S),this._partialOutput.clear();for(var E=0;E<this._ints;++E)this._partialBlock[E]=t.getInt32()^this._outBlock[E],this._partialOutput.putInt32(this._partialBlock[E]);if(S>0)t.read-=this.blockSize;else for(var E=0;E<this._ints;++E)this._inBlock[E]=this._partialBlock[E];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),S>0&&!_)return n.putBytes(this._partialOutput.getBytes(S-this._partialBytes)),this._partialBytes=S,!0;n.putBytes(this._partialOutput.getBytes(x-this._partialBytes)),this._partialBytes=0};modes$1.cfb.prototype.decrypt=function(t,n,_){var x=t.length();if(x===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&x>=this.blockSize){for(var E=0;E<this._ints;++E)this._inBlock[E]=t.getInt32(),n.putInt32(this._inBlock[E]^this._outBlock[E]);return}var S=(this.blockSize-x)%this.blockSize;S>0&&(S=this.blockSize-S),this._partialOutput.clear();for(var E=0;E<this._ints;++E)this._partialBlock[E]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[E]^this._outBlock[E]);if(S>0)t.read-=this.blockSize;else for(var E=0;E<this._ints;++E)this._inBlock[E]=this._partialBlock[E];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),S>0&&!_)return n.putBytes(this._partialOutput.getBytes(S-this._partialBytes)),this._partialBytes=S,!0;n.putBytes(this._partialOutput.getBytes(x-this._partialBytes)),this._partialBytes=0};modes$1.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes$1.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=transformIV(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.ofb.prototype.encrypt=function(t,n,_){var x=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&x>=this.blockSize){for(var E=0;E<this._ints;++E)n.putInt32(t.getInt32()^this._outBlock[E]),this._inBlock[E]=this._outBlock[E];return}var S=(this.blockSize-x)%this.blockSize;S>0&&(S=this.blockSize-S),this._partialOutput.clear();for(var E=0;E<this._ints;++E)this._partialOutput.putInt32(t.getInt32()^this._outBlock[E]);if(S>0)t.read-=this.blockSize;else for(var E=0;E<this._ints;++E)this._inBlock[E]=this._outBlock[E];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),S>0&&!_)return n.putBytes(this._partialOutput.getBytes(S-this._partialBytes)),this._partialBytes=S,!0;n.putBytes(this._partialOutput.getBytes(x-this._partialBytes)),this._partialBytes=0};modes$1.ofb.prototype.decrypt=modes$1.ofb.prototype.encrypt;modes$1.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes$1.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=transformIV(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.ctr.prototype.encrypt=function(t,n,_){var x=t.length();if(x===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&x>=this.blockSize)for(var E=0;E<this._ints;++E)n.putInt32(t.getInt32()^this._outBlock[E]);else{var S=(this.blockSize-x)%this.blockSize;S>0&&(S=this.blockSize-S),this._partialOutput.clear();for(var E=0;E<this._ints;++E)this._partialOutput.putInt32(t.getInt32()^this._outBlock[E]);if(S>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),S>0&&!_)return n.putBytes(this._partialOutput.getBytes(S-this._partialBytes)),this._partialBytes=S,!0;n.putBytes(this._partialOutput.getBytes(x-this._partialBytes)),this._partialBytes=0}inc32(this._inBlock)};modes$1.ctr.prototype.decrypt=modes$1.ctr.prototype.encrypt;modes$1.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0,this._R=3774873600};modes$1.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var n=forge$j.util.createBuffer(t.iv);this._cipherLength=0;var _;if("additionalData"in t?_=forge$j.util.createBuffer(t.additionalData):_=forge$j.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=forge$j.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var x=n.length();if(x===12)this._j0=[n.getInt32(),n.getInt32(),n.getInt32(),1];else{for(this._j0=[0,0,0,0];n.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(from64To32(x*8)))}this._inBlock=this._j0.slice(0),inc32(this._inBlock),this._partialBytes=0,_=forge$j.util.createBuffer(_),this._aDataLength=from64To32(_.length()*8);var E=_.length()%this.blockSize;for(E&&_.fillWithByte(0,this.blockSize-E),this._s=[0,0,0,0];_.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[_.getInt32(),_.getInt32(),_.getInt32(),_.getInt32()])};modes$1.gcm.prototype.encrypt=function(t,n,_){var x=t.length();if(x===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&x>=this.blockSize){for(var E=0;E<this._ints;++E)n.putInt32(this._outBlock[E]^=t.getInt32());this._cipherLength+=this.blockSize}else{var S=(this.blockSize-x)%this.blockSize;S>0&&(S=this.blockSize-S),this._partialOutput.clear();for(var E=0;E<this._ints;++E)this._partialOutput.putInt32(t.getInt32()^this._outBlock[E]);if(S<=0||_){if(_){var C=x%this.blockSize;this._cipherLength+=C,this._partialOutput.truncate(this.blockSize-C)}else this._cipherLength+=this.blockSize;for(var E=0;E<this._ints;++E)this._outBlock[E]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),S>0&&!_)return t.read-=this.blockSize,n.putBytes(this._partialOutput.getBytes(S-this._partialBytes)),this._partialBytes=S,!0;n.putBytes(this._partialOutput.getBytes(x-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),inc32(this._inBlock)};modes$1.gcm.prototype.decrypt=function(t,n,_){var x=t.length();if(x<this.blockSize&&!(_&&x>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),inc32(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var E=0;E<this._ints;++E)n.putInt32(this._outBlock[E]^this._hashBlock[E]);x<this.blockSize?this._cipherLength+=x%this.blockSize:this._cipherLength+=this.blockSize};modes$1.gcm.prototype.afterFinish=function(t,n){var _=!0;n.decrypt&&n.overflow&&t.truncate(this.blockSize-n.overflow),this.tag=forge$j.util.createBuffer();var x=this._aDataLength.concat(from64To32(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,x);var E=[];this.cipher.encrypt(this._j0,E);for(var S=0;S<this._ints;++S)this.tag.putInt32(this._s[S]^E[S]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),n.decrypt&&this.tag.bytes()!==this._tag&&(_=!1),_};modes$1.gcm.prototype.multiply=function(t,n){for(var _=[0,0,0,0],x=n.slice(0),E=0;E<128;++E){var S=t[E/32|0]&1<<31-E%32;S&&(_[0]^=x[0],_[1]^=x[1],_[2]^=x[2],_[3]^=x[3]),this.pow(x,x)}return _};modes$1.gcm.prototype.pow=function(t,n){for(var _=t[3]&1,x=3;x>0;--x)n[x]=t[x]>>>1|(t[x-1]&1)<<31;n[0]=t[0]>>>1,_&&(n[0]^=this._R)};modes$1.gcm.prototype.tableMultiply=function(t){for(var n=[0,0,0,0],_=0;_<32;++_){var x=_/8|0,E=t[x]>>>(7-_%8)*4&15,S=this._m[_][E];n[0]^=S[0],n[1]^=S[1],n[2]^=S[2],n[3]^=S[3]}return n};modes$1.gcm.prototype.ghash=function(t,n,_){return n[0]^=_[0],n[1]^=_[1],n[2]^=_[2],n[3]^=_[3],this.tableMultiply(n)};modes$1.gcm.prototype.generateHashTable=function(t,n){for(var _=8/n,x=4*_,E=16*_,S=new Array(E),C=0;C<E;++C){var T=[0,0,0,0],B=C/x|0,A=(x-1-C%x)*n;T[B]=1<<n-1<<A,S[C]=this.generateSubHashTable(this.multiply(T,t),n)}return S};modes$1.gcm.prototype.generateSubHashTable=function(t,n){var _=1<<n,x=_>>>1,E=new Array(_);E[x]=t.slice(0);for(var S=x>>>1;S>0;)this.pow(E[2*S],E[S]=[]),S>>=1;for(S=2;S<x;){for(var C=1;C<S;++C){var T=E[S],B=E[C];E[S+C]=[T[0]^B[0],T[1]^B[1],T[2]^B[2],T[3]^B[3]]}S*=2}for(E[0]=[0,0,0,0],S=x+1;S<_;++S){var A=E[S^x];E[S]=[t[0]^A[0],t[1]^A[1],t[2]^A[2],t[3]^A[3]]}return E};function transformIV(t,n){if(typeof t=="string"&&(t=forge$j.util.createBuffer(t)),forge$j.util.isArray(t)&&t.length>4){var _=t;t=forge$j.util.createBuffer();for(var x=0;x<_.length;++x)t.putByte(_[x])}if(t.length()<n)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+n+" bytes.");if(!forge$j.util.isArray(t)){for(var E=[],S=n/4,x=0;x<S;++x)E.push(t.getInt32());t=E}return t}function inc32(t){t[t.length-1]=t[t.length-1]+1&4294967295}function from64To32(t){return[t/4294967296|0,t&4294967295]}var forge$i=forge$m;forge$i.aes=forge$i.aes||{};forge$i.aes.startEncrypting=function(t,n,_,x){var E=_createCipher$1({key:t,output:_,decrypt:!1,mode:x});return E.start(n),E};forge$i.aes.createEncryptionCipher=function(t,n){return _createCipher$1({key:t,output:null,decrypt:!1,mode:n})};forge$i.aes.startDecrypting=function(t,n,_,x){var E=_createCipher$1({key:t,output:_,decrypt:!0,mode:x});return E.start(n),E};forge$i.aes.createDecryptionCipher=function(t,n){return _createCipher$1({key:t,output:null,decrypt:!0,mode:n})};forge$i.aes.Algorithm=function(t,n){init||initialize();var _=this;_.name=t,_.mode=new n({blockSize:16,cipher:{encrypt:function(x,E){return _updateBlock$1(_._w,x,E,!1)},decrypt:function(x,E){return _updateBlock$1(_._w,x,E,!0)}}}),_._init=!1};forge$i.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var n=t.key,_;if(typeof n=="string"&&(n.length===16||n.length===24||n.length===32))n=forge$i.util.createBuffer(n);else if(forge$i.util.isArray(n)&&(n.length===16||n.length===24||n.length===32)){_=n,n=forge$i.util.createBuffer();for(var x=0;x<_.length;++x)n.putByte(_[x])}if(!forge$i.util.isArray(n)){_=n,n=[];var E=_.length();if(E===16||E===24||E===32){E=E>>>2;for(var x=0;x<E;++x)n.push(_.getInt32())}}if(!forge$i.util.isArray(n)||!(n.length===4||n.length===6||n.length===8))throw new Error("Invalid key parameter.");var S=this.mode.name,C=["CFB","OFB","CTR","GCM"].indexOf(S)!==-1;this._w=_expandKey(n,t.decrypt&&!C),this._init=!0}};forge$i.aes._expandKey=function(t,n){return init||initialize(),_expandKey(t,n)};forge$i.aes._updateBlock=_updateBlock$1;registerAlgorithm$1("AES-ECB",forge$i.cipher.modes.ecb);registerAlgorithm$1("AES-CBC",forge$i.cipher.modes.cbc);registerAlgorithm$1("AES-CFB",forge$i.cipher.modes.cfb);registerAlgorithm$1("AES-OFB",forge$i.cipher.modes.ofb);registerAlgorithm$1("AES-CTR",forge$i.cipher.modes.ctr);registerAlgorithm$1("AES-GCM",forge$i.cipher.modes.gcm);function registerAlgorithm$1(t,n){var _=function(){return new forge$i.aes.Algorithm(t,n)};forge$i.cipher.registerAlgorithm(t,_)}var init=!1,Nb=4,sbox,isbox,rcon,mix,imix;function initialize(){init=!0,rcon=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),n=0;n<128;++n)t[n]=n<<1,t[n+128]=n+128<<1^283;sbox=new Array(256),isbox=new Array(256),mix=new Array(4),imix=new Array(4);for(var n=0;n<4;++n)mix[n]=new Array(256),imix[n]=new Array(256);for(var _=0,x=0,E,S,C,T,B,A,I,n=0;n<256;++n){T=x^x<<1^x<<2^x<<3^x<<4,T=T>>8^T&255^99,sbox[_]=T,isbox[T]=_,B=t[T],E=t[_],S=t[E],C=t[S],A=B<<24^T<<16^T<<8^(T^B),I=(E^S^C)<<24^(_^C)<<16^(_^S^C)<<8^(_^E^C);for(var D=0;D<4;++D)mix[D][_]=A,imix[D][T]=I,A=A<<24|A>>>8,I=I<<24|I>>>8;_===0?_=x=1:(_=E^t[t[t[E^C]]],x^=t[t[x]])}}function _expandKey(t,n){for(var _=t.slice(0),x,E=1,S=_.length,C=S+6+1,T=Nb*C,B=S;B<T;++B)x=_[B-1],B%S===0?(x=sbox[x>>>16&255]<<24^sbox[x>>>8&255]<<16^sbox[x&255]<<8^sbox[x>>>24]^rcon[E]<<24,E++):S>6&&B%S===4&&(x=sbox[x>>>24]<<24^sbox[x>>>16&255]<<16^sbox[x>>>8&255]<<8^sbox[x&255]),_[B]=_[B-S]^x;if(n){var A,I=imix[0],D=imix[1],M=imix[2],V=imix[3],L=_.slice(0);T=_.length;for(var B=0,F=T-Nb;B<T;B+=Nb,F-=Nb)if(B===0||B===T-Nb)L[B]=_[F],L[B+1]=_[F+3],L[B+2]=_[F+2],L[B+3]=_[F+1];else for(var j=0;j<Nb;++j)A=_[F+j],L[B+(3&-j)]=I[sbox[A>>>24]]^D[sbox[A>>>16&255]]^M[sbox[A>>>8&255]]^V[sbox[A&255]];_=L}return _}function _updateBlock$1(t,n,_,x){var E=t.length/4-1,S,C,T,B,A;x?(S=imix[0],C=imix[1],T=imix[2],B=imix[3],A=isbox):(S=mix[0],C=mix[1],T=mix[2],B=mix[3],A=sbox);var I,D,M,V,L,F,j;I=n[0]^t[0],D=n[x?3:1]^t[1],M=n[2]^t[2],V=n[x?1:3]^t[3];for(var U=3,H=1;H<E;++H)L=S[I>>>24]^C[D>>>16&255]^T[M>>>8&255]^B[V&255]^t[++U],F=S[D>>>24]^C[M>>>16&255]^T[V>>>8&255]^B[I&255]^t[++U],j=S[M>>>24]^C[V>>>16&255]^T[I>>>8&255]^B[D&255]^t[++U],V=S[V>>>24]^C[I>>>16&255]^T[D>>>8&255]^B[M&255]^t[++U],I=L,D=F,M=j;_[0]=A[I>>>24]<<24^A[D>>>16&255]<<16^A[M>>>8&255]<<8^A[V&255]^t[++U],_[x?3:1]=A[D>>>24]<<24^A[M>>>16&255]<<16^A[V>>>8&255]<<8^A[I&255]^t[++U],_[2]=A[M>>>24]<<24^A[V>>>16&255]<<16^A[I>>>8&255]<<8^A[D&255]^t[++U],_[x?1:3]=A[V>>>24]<<24^A[I>>>16&255]<<16^A[D>>>8&255]<<8^A[M&255]^t[++U]}function _createCipher$1(t){t=t||{};var n=(t.mode||"CBC").toUpperCase(),_="AES-"+n,x;t.decrypt?x=forge$i.cipher.createDecipher(_,t.key):x=forge$i.cipher.createCipher(_,t.key);var E=x.start;return x.start=function(S,C){var T=null;C instanceof forge$i.util.ByteBuffer&&(T=C,C={}),C=C||{},C.output=T,C.iv=S,E.call(x,C)},x}function base$4(t,n){if(t.length>=255)throw new TypeError("Alphabet too long");for(var _=new Uint8Array(256),x=0;x<_.length;x++)_[x]=255;for(var E=0;E<t.length;E++){var S=t.charAt(E),C=S.charCodeAt(0);if(_[C]!==255)throw new TypeError(S+" is ambiguous");_[C]=E}var T=t.length,B=t.charAt(0),A=Math.log(T)/Math.log(256),I=Math.log(256)/Math.log(T);function D(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var F=0,j=0,U=0,H=L.length;U!==H&&L[U]===0;)U++,F++;for(var Y=(H-U)*I+1>>>0,Z=new Uint8Array(Y);U!==H;){for(var ne=L[U],re=0,X=Y-1;(ne!==0||re<j)&&X!==-1;X--,re++)ne+=256*Z[X]>>>0,Z[X]=ne%T>>>0,ne=ne/T>>>0;if(ne!==0)throw new Error("Non-zero carry");j=re,U++}for(var ce=Y-j;ce!==Y&&Z[ce]===0;)ce++;for(var ue=B.repeat(F);ce<Y;++ce)ue+=t.charAt(Z[ce]);return ue}function M(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var F=0;if(L[F]!==" "){for(var j=0,U=0;L[F]===B;)j++,F++;for(var H=(L.length-F)*A+1>>>0,Y=new Uint8Array(H);L[F];){var Z=_[L.charCodeAt(F)];if(Z===255)return;for(var ne=0,re=H-1;(Z!==0||ne<U)&&re!==-1;re--,ne++)Z+=T*Y[re]>>>0,Y[re]=Z%256>>>0,Z=Z/256>>>0;if(Z!==0)throw new Error("Non-zero carry");U=ne,F++}if(L[F]!==" "){for(var X=H-U;X!==H&&Y[X]===0;)X++;for(var ce=new Uint8Array(j+(H-X)),ue=j;X!==H;)ce[ue++]=Y[X++];return ce}}}function V(L){var F=M(L);if(F)return F;throw new Error(`Non-${n} character`)}return{encode:D,decodeUnsafe:M,decode:V}}var src$2=base$4,_brrp__multiformats_scope_baseX$1=src$2;const coerce$1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$4=t=>new TextEncoder().encode(t),toString$7=t=>new TextDecoder().decode(t);let Encoder$2=class{constructor(n,_,x){this.name=n,this.prefix=_,this.baseEncode=x}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}},Decoder$2=class{constructor(n,_,x){if(this.name=n,this.prefix=_,_.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=_.codePointAt(0),this.baseDecode=x}decode(n){if(typeof n=="string"){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(n){return or$1(this,n)}},ComposedDecoder$1=class{constructor(n){this.decoders=n}or(n){return or$1(this,n)}decode(n){const _=n[0],x=this.decoders[_];if(x)return x.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$1=(t,n)=>new ComposedDecoder$1({...t.decoders||{[t.prefix]:t},...n.decoders||{[n.prefix]:n}});let Codec$2=class{constructor(n,_,x,E){this.name=n,this.prefix=_,this.baseEncode=x,this.baseDecode=E,this.encoder=new Encoder$2(n,_,x),this.decoder=new Decoder$2(n,_,E)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}};const from$3=({name:t,prefix:n,encode:_,decode:x})=>new Codec$2(t,n,_,x),baseX$1=({prefix:t,name:n,alphabet:_})=>{const{encode:x,decode:E}=_brrp__multiformats_scope_baseX$1(_,n);return from$3({prefix:t,name:n,encode:x,decode:S=>coerce$1(E(S))})},decode$c=(t,n,_,x)=>{const E={};for(let I=0;I<n.length;++I)E[n[I]]=I;let S=t.length;for(;t[S-1]==="=";)--S;const C=new Uint8Array(S*_/8|0);let T=0,B=0,A=0;for(let I=0;I<S;++I){const D=E[t[I]];if(D===void 0)throw new SyntaxError(`Non-${x} character`);B=B<<_|D,T+=_,T>=8&&(T-=8,C[A++]=255&B>>T)}if(T>=_||255&B<<8-T)throw new SyntaxError("Unexpected end of data");return C},encode$h=(t,n,_)=>{const x=n[n.length-1]==="=",E=(1<<_)-1;let S="",C=0,T=0;for(let B=0;B<t.length;++B)for(T=T<<8|t[B],C+=8;C>_;)C-=_,S+=n[E&T>>C];if(C&&(S+=n[E&T<<_-C]),x)for(;S.length*_&7;)S+="=";return S},rfc4648$1=({name:t,prefix:n,bitsPerChar:_,alphabet:x})=>from$3({prefix:n,name:t,encode(E){return encode$h(E,x,_)},decode(E){return decode$c(E,x,_,t)}}),identity$5=from$3({prefix:"\0",name:"identity",encode:t=>toString$7(t),decode:t=>fromString$4(t)}),identityBase$1=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$5},Symbol.toStringTag,{value:"Module"})),base2$2=rfc4648$1({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$3=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$2},Symbol.toStringTag,{value:"Module"})),base8$2=rfc4648$1({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$3=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$2},Symbol.toStringTag,{value:"Module"})),base10$2=baseX$1({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$3=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$2},Symbol.toStringTag,{value:"Module"})),base16$2=rfc4648$1({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$1=rfc4648$1({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$3=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$2,base16upper:base16upper$1},Symbol.toStringTag,{value:"Module"})),base32=rfc4648$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$1=Object.freeze(Object.defineProperty({__proto__:null,base32,base32hex,base32hexpad,base32hexpadupper,base32hexupper,base32pad,base32padupper,base32upper,base32z},Symbol.toStringTag,{value:"Module"})),base36$2=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$1=baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$3=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$2,base36upper:base36upper$1},Symbol.toStringTag,{value:"Module"})),base58btc$1=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$1,base58flickr},Symbol.toStringTag,{value:"Module"})),base64$6=rfc4648$1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$1=rfc4648$1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$1=rfc4648$1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$1=rfc4648$1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$7=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$6,base64pad:base64pad$1,base64url:base64url$1,base64urlpad:base64urlpad$1},Symbol.toStringTag,{value:"Module"})),alphabet$1=Array.from(""),alphabetBytesToChars$1=alphabet$1.reduce((t,n,_)=>(t[_]=n,t),[]),alphabetCharsToBytes$1=alphabet$1.reduce((t,n,_)=>(t[n.codePointAt(0)]=_,t),[]);function encode$g(t){return t.reduce((n,_)=>(n+=alphabetBytesToChars$1[_],n),"")}function decode$b(t){const n=[];for(const _ of t){const x=alphabetCharsToBytes$1[_.codePointAt(0)];if(x===void 0)throw new Error(`Non-base256emoji character: ${_}`);n.push(x)}return new Uint8Array(n)}const base256emoji$2=from$3({prefix:"",name:"base256emoji",encode:encode$g,decode:decode$b}),base256emoji$3=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$2},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases$1={...identityBase$1,...base2$3,...base8$3,...base10$3,...base16$3,...base32$1,...base36$3,...base58,...base64$7,...base256emoji$3};function createCodec$4(t,n,_,x){return{name:t,prefix:n,encoder:{name:t,prefix:n,encode:_},decoder:{decode:x}}}const string$2=createCodec$4("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii$2=createCodec$4("ascii","a",t=>{let n="a";for(let _=0;_<t.length;_++)n+=String.fromCharCode(t[_]);return n},t=>{t=t.substring(1);const n=allocUnsafe$2(t.length);for(let _=0;_<t.length;_++)n[_]=t.charCodeAt(_);return n}),BASES$2={utf8:string$2,"utf-8":string$2,hex:bases$1.base16,latin1:ascii$2,ascii:ascii$2,binary:ascii$2,...bases$1};function fromString$3(t,n="utf8"){const _=BASES$2[n];if(_==null)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$2(globalThis.Buffer.from(t,"utf-8")):_.decoder.decode(`${_.prefix}${t}`)}function toString$6(t,n="utf8"){const _=BASES$2[n];if(_==null)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):_.encoder.encode(t).substring(1)}const webcrypto={get(t=globalThis){const n=t.crypto;if(n==null||n.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return n}};var forge$h=forge$m;forge$h.pki=forge$h.pki||{};var oids$1=forge$h.pki.oids=forge$h.oids=forge$h.oids||{};function _IN(t,n){oids$1[t]=n,oids$1[n]=t}function _I_(t,n){oids$1[t]=n}_IN("1.2.840.113549.1.1.1","rsaEncryption");_IN("1.2.840.113549.1.1.4","md5WithRSAEncryption");_IN("1.2.840.113549.1.1.5","sha1WithRSAEncryption");_IN("1.2.840.113549.1.1.7","RSAES-OAEP");_IN("1.2.840.113549.1.1.8","mgf1");_IN("1.2.840.113549.1.1.9","pSpecified");_IN("1.2.840.113549.1.1.10","RSASSA-PSS");_IN("1.2.840.113549.1.1.11","sha256WithRSAEncryption");_IN("1.2.840.113549.1.1.12","sha384WithRSAEncryption");_IN("1.2.840.113549.1.1.13","sha512WithRSAEncryption");_IN("1.3.101.112","EdDSA25519");_IN("1.2.840.10040.4.3","dsa-with-sha1");_IN("1.3.14.3.2.7","desCBC");_IN("1.3.14.3.2.26","sha1");_IN("1.3.14.3.2.29","sha1WithRSASignature");_IN("2.16.840.1.101.3.4.2.1","sha256");_IN("2.16.840.1.101.3.4.2.2","sha384");_IN("2.16.840.1.101.3.4.2.3","sha512");_IN("2.16.840.1.101.3.4.2.4","sha224");_IN("2.16.840.1.101.3.4.2.5","sha512-224");_IN("2.16.840.1.101.3.4.2.6","sha512-256");_IN("1.2.840.113549.2.2","md2");_IN("1.2.840.113549.2.5","md5");_IN("1.2.840.113549.1.7.1","data");_IN("1.2.840.113549.1.7.2","signedData");_IN("1.2.840.113549.1.7.3","envelopedData");_IN("1.2.840.113549.1.7.4","signedAndEnvelopedData");_IN("1.2.840.113549.1.7.5","digestedData");_IN("1.2.840.113549.1.7.6","encryptedData");_IN("1.2.840.113549.1.9.1","emailAddress");_IN("1.2.840.113549.1.9.2","unstructuredName");_IN("1.2.840.113549.1.9.3","contentType");_IN("1.2.840.113549.1.9.4","messageDigest");_IN("1.2.840.113549.1.9.5","signingTime");_IN("1.2.840.113549.1.9.6","counterSignature");_IN("1.2.840.113549.1.9.7","challengePassword");_IN("1.2.840.113549.1.9.8","unstructuredAddress");_IN("1.2.840.113549.1.9.14","extensionRequest");_IN("1.2.840.113549.1.9.20","friendlyName");_IN("1.2.840.113549.1.9.21","localKeyId");_IN("1.2.840.113549.1.9.22.1","x509Certificate");_IN("1.2.840.113549.1.12.10.1.1","keyBag");_IN("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");_IN("1.2.840.113549.1.12.10.1.3","certBag");_IN("1.2.840.113549.1.12.10.1.4","crlBag");_IN("1.2.840.113549.1.12.10.1.5","secretBag");_IN("1.2.840.113549.1.12.10.1.6","safeContentsBag");_IN("1.2.840.113549.1.5.13","pkcs5PBES2");_IN("1.2.840.113549.1.5.12","pkcs5PBKDF2");_IN("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");_IN("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");_IN("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");_IN("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");_IN("1.2.840.113549.2.7","hmacWithSHA1");_IN("1.2.840.113549.2.8","hmacWithSHA224");_IN("1.2.840.113549.2.9","hmacWithSHA256");_IN("1.2.840.113549.2.10","hmacWithSHA384");_IN("1.2.840.113549.2.11","hmacWithSHA512");_IN("1.2.840.113549.3.7","des-EDE3-CBC");_IN("2.16.840.1.101.3.4.1.2","aes128-CBC");_IN("2.16.840.1.101.3.4.1.22","aes192-CBC");_IN("2.16.840.1.101.3.4.1.42","aes256-CBC");_IN("2.5.4.3","commonName");_IN("2.5.4.4","surname");_IN("2.5.4.5","serialNumber");_IN("2.5.4.6","countryName");_IN("2.5.4.7","localityName");_IN("2.5.4.8","stateOrProvinceName");_IN("2.5.4.9","streetAddress");_IN("2.5.4.10","organizationName");_IN("2.5.4.11","organizationalUnitName");_IN("2.5.4.12","title");_IN("2.5.4.13","description");_IN("2.5.4.15","businessCategory");_IN("2.5.4.17","postalCode");_IN("2.5.4.42","givenName");_IN("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");_IN("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");_IN("2.16.840.1.113730.1.1","nsCertType");_IN("2.16.840.1.113730.1.13","nsComment");_I_("2.5.29.1","authorityKeyIdentifier");_I_("2.5.29.2","keyAttributes");_I_("2.5.29.3","certificatePolicies");_I_("2.5.29.4","keyUsageRestriction");_I_("2.5.29.5","policyMapping");_I_("2.5.29.6","subtreesConstraint");_I_("2.5.29.7","subjectAltName");_I_("2.5.29.8","issuerAltName");_I_("2.5.29.9","subjectDirectoryAttributes");_I_("2.5.29.10","basicConstraints");_I_("2.5.29.11","nameConstraints");_I_("2.5.29.12","policyConstraints");_I_("2.5.29.13","basicConstraints");_IN("2.5.29.14","subjectKeyIdentifier");_IN("2.5.29.15","keyUsage");_I_("2.5.29.16","privateKeyUsagePeriod");_IN("2.5.29.17","subjectAltName");_IN("2.5.29.18","issuerAltName");_IN("2.5.29.19","basicConstraints");_I_("2.5.29.20","cRLNumber");_I_("2.5.29.21","cRLReason");_I_("2.5.29.22","expirationDate");_I_("2.5.29.23","instructionCode");_I_("2.5.29.24","invalidityDate");_I_("2.5.29.25","cRLDistributionPoints");_I_("2.5.29.26","issuingDistributionPoint");_I_("2.5.29.27","deltaCRLIndicator");_I_("2.5.29.28","issuingDistributionPoint");_I_("2.5.29.29","certificateIssuer");_I_("2.5.29.30","nameConstraints");_IN("2.5.29.31","cRLDistributionPoints");_IN("2.5.29.32","certificatePolicies");_I_("2.5.29.33","policyMappings");_I_("2.5.29.34","policyConstraints");_IN("2.5.29.35","authorityKeyIdentifier");_I_("2.5.29.36","policyConstraints");_IN("2.5.29.37","extKeyUsage");_I_("2.5.29.46","freshestCRL");_I_("2.5.29.54","inhibitAnyPolicy");_IN("1.3.6.1.4.1.11129.2.4.2","timestampList");_IN("1.3.6.1.5.5.7.1.1","authorityInfoAccess");_IN("1.3.6.1.5.5.7.3.1","serverAuth");_IN("1.3.6.1.5.5.7.3.2","clientAuth");_IN("1.3.6.1.5.5.7.3.3","codeSigning");_IN("1.3.6.1.5.5.7.3.4","emailProtection");_IN("1.3.6.1.5.5.7.3.8","timeStamping");var forge$g=forge$m,asn1$4=forge$g.asn1=forge$g.asn1||{};asn1$4.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};asn1$4.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};asn1$4.create=function(t,n,_,x,E){if(forge$g.util.isArray(x)){for(var S=[],C=0;C<x.length;++C)x[C]!==void 0&&S.push(x[C]);x=S}var T={tagClass:t,type:n,constructed:_,composed:_||forge$g.util.isArray(x),value:x};return E&&"bitStringContents"in E&&(T.bitStringContents=E.bitStringContents,T.original=asn1$4.copy(T)),T};asn1$4.copy=function(t,n){var _;if(forge$g.util.isArray(t)){_=[];for(var x=0;x<t.length;++x)_.push(asn1$4.copy(t[x],n));return _}return typeof t=="string"?t:(_={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:asn1$4.copy(t.value,n)},n&&!n.excludeBitStringContents&&(_.bitStringContents=t.bitStringContents),_)};asn1$4.equals=function(t,n,_){if(forge$g.util.isArray(t)){if(!forge$g.util.isArray(n)||t.length!==n.length)return!1;for(var x=0;x<t.length;++x)if(!asn1$4.equals(t[x],n[x]))return!1;return!0}if(typeof t!=typeof n)return!1;if(typeof t=="string")return t===n;var E=t.tagClass===n.tagClass&&t.type===n.type&&t.constructed===n.constructed&&t.composed===n.composed&&asn1$4.equals(t.value,n.value);return _&&_.includeBitStringContents&&(E=E&&t.bitStringContents===n.bitStringContents),E};asn1$4.getBerValueLength=function(t){var n=t.getByte();if(n!==128){var _,x=n&128;return x?_=t.getInt((n&127)<<3):_=n,_}};function _checkBufferLength(t,n,_){if(_>n){var x=new Error("Too few bytes to parse DER.");throw x.available=t.length(),x.remaining=n,x.requested=_,x}}var _getValueLength=function(t,n){var _=t.getByte();if(n--,_!==128){var x,E=_&128;if(!E)x=_;else{var S=_&127;_checkBufferLength(t,n,S),x=t.getInt(S<<3)}if(x<0)throw new Error("Negative length: "+x);return x}};asn1$4.fromDer=function(t,n){n===void 0&&(n={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof n=="boolean"&&(n={strict:n,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in n||(n.strict=!0),"parseAllBytes"in n||(n.parseAllBytes=!0),"decodeBitStrings"in n||(n.decodeBitStrings=!0),typeof t=="string"&&(t=forge$g.util.createBuffer(t));var _=t.length(),x=_fromDer(t,t.length(),0,n);if(n.parseAllBytes&&t.length()!==0){var E=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw E.byteCount=_,E.remaining=t.length(),E}return x};function _fromDer(t,n,_,x){var E;_checkBufferLength(t,n,2);var S=t.getByte();n--;var C=S&192,T=S&31;E=t.length();var B=_getValueLength(t,n);if(n-=E-t.length(),B!==void 0&&B>n){if(x.strict){var A=new Error("Too few bytes to read ASN.1 value.");throw A.available=t.length(),A.remaining=n,A.requested=B,A}B=n}var I,D,M=(S&32)===32;if(M)if(I=[],B===void 0)for(;;){if(_checkBufferLength(t,n,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),n-=2;break}E=t.length(),I.push(_fromDer(t,n,_+1,x)),n-=E-t.length()}else for(;B>0;)E=t.length(),I.push(_fromDer(t,B,_+1,x)),n-=E-t.length(),B-=E-t.length();if(I===void 0&&C===asn1$4.Class.UNIVERSAL&&T===asn1$4.Type.BITSTRING&&(D=t.bytes(B)),I===void 0&&x.decodeBitStrings&&C===asn1$4.Class.UNIVERSAL&&T===asn1$4.Type.BITSTRING&&B>1){var V=t.read,L=n,F=0;if(T===asn1$4.Type.BITSTRING&&(_checkBufferLength(t,n,1),F=t.getByte(),n--),F===0)try{E=t.length();var j={strict:!0,decodeBitStrings:!0},U=_fromDer(t,n,_+1,j),H=E-t.length();n-=H,T==asn1$4.Type.BITSTRING&&H++;var Y=U.tagClass;H===B&&(Y===asn1$4.Class.UNIVERSAL||Y===asn1$4.Class.CONTEXT_SPECIFIC)&&(I=[U])}catch{}I===void 0&&(t.read=V,n=L)}if(I===void 0){if(B===void 0){if(x.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");B=n}if(T===asn1$4.Type.BMPSTRING)for(I="";B>0;B-=2)_checkBufferLength(t,n,2),I+=String.fromCharCode(t.getInt16()),n-=2;else I=t.getBytes(B),n-=B}var Z=D===void 0?null:{bitStringContents:D};return asn1$4.create(C,T,M,I,Z)}asn1$4.toDer=function(t){var n=forge$g.util.createBuffer(),_=t.tagClass|t.type,x=forge$g.util.createBuffer(),E=!1;if("bitStringContents"in t&&(E=!0,t.original&&(E=asn1$4.equals(t,t.original))),E)x.putBytes(t.bitStringContents);else if(t.composed){t.constructed?_|=32:x.putByte(0);for(var S=0;S<t.value.length;++S)t.value[S]!==void 0&&x.putBuffer(asn1$4.toDer(t.value[S]))}else if(t.type===asn1$4.Type.BMPSTRING)for(var S=0;S<t.value.length;++S)x.putInt16(t.value.charCodeAt(S));else t.type===asn1$4.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?x.putBytes(t.value.substr(1)):x.putBytes(t.value);if(n.putByte(_),x.length()<=127)n.putByte(x.length()&127);else{var C=x.length(),T="";do T+=String.fromCharCode(C&255),C=C>>>8;while(C>0);n.putByte(T.length|128);for(var S=T.length-1;S>=0;--S)n.putByte(T.charCodeAt(S))}return n.putBuffer(x),n};asn1$4.oidToDer=function(t){var n=t.split("."),_=forge$g.util.createBuffer();_.putByte(40*parseInt(n[0],10)+parseInt(n[1],10));for(var x,E,S,C,T=2;T<n.length;++T){x=!0,E=[],S=parseInt(n[T],10);do C=S&127,S=S>>>7,x||(C|=128),E.push(C),x=!1;while(S>0);for(var B=E.length-1;B>=0;--B)_.putByte(E[B])}return _};asn1$4.derToOid=function(t){var n;typeof t=="string"&&(t=forge$g.util.createBuffer(t));var _=t.getByte();n=Math.floor(_/40)+"."+_%40;for(var x=0;t.length()>0;)_=t.getByte(),x=x<<7,_&128?x+=_&127:(n+="."+(x+_),x=0);return n};asn1$4.utcTimeToDate=function(t){var n=new Date,_=parseInt(t.substr(0,2),10);_=_>=50?1900+_:2e3+_;var x=parseInt(t.substr(2,2),10)-1,E=parseInt(t.substr(4,2),10),S=parseInt(t.substr(6,2),10),C=parseInt(t.substr(8,2),10),T=0;if(t.length>11){var B=t.charAt(10),A=10;B!=="+"&&B!=="-"&&(T=parseInt(t.substr(10,2),10),A+=2)}if(n.setUTCFullYear(_,x,E),n.setUTCHours(S,C,T,0),A&&(B=t.charAt(A),B==="+"||B==="-")){var I=parseInt(t.substr(A+1,2),10),D=parseInt(t.substr(A+4,2),10),M=I*60+D;M*=6e4,B==="+"?n.setTime(+n-M):n.setTime(+n+M)}return n};asn1$4.generalizedTimeToDate=function(t){var n=new Date,_=parseInt(t.substr(0,4),10),x=parseInt(t.substr(4,2),10)-1,E=parseInt(t.substr(6,2),10),S=parseInt(t.substr(8,2),10),C=parseInt(t.substr(10,2),10),T=parseInt(t.substr(12,2),10),B=0,A=0,I=!1;t.charAt(t.length-1)==="Z"&&(I=!0);var D=t.length-5,M=t.charAt(D);if(M==="+"||M==="-"){var V=parseInt(t.substr(D+1,2),10),L=parseInt(t.substr(D+4,2),10);A=V*60+L,A*=6e4,M==="+"&&(A*=-1),I=!0}return t.charAt(14)==="."&&(B=parseFloat(t.substr(14),10)*1e3),I?(n.setUTCFullYear(_,x,E),n.setUTCHours(S,C,T,B),n.setTime(+n+A)):(n.setFullYear(_,x,E),n.setHours(S,C,T,B)),n};asn1$4.dateToUtcTime=function(t){if(typeof t=="string")return t;var n="",_=[];_.push((""+t.getUTCFullYear()).substr(2)),_.push(""+(t.getUTCMonth()+1)),_.push(""+t.getUTCDate()),_.push(""+t.getUTCHours()),_.push(""+t.getUTCMinutes()),_.push(""+t.getUTCSeconds());for(var x=0;x<_.length;++x)_[x].length<2&&(n+="0"),n+=_[x];return n+="Z",n};asn1$4.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var n="",_=[];_.push(""+t.getUTCFullYear()),_.push(""+(t.getUTCMonth()+1)),_.push(""+t.getUTCDate()),_.push(""+t.getUTCHours()),_.push(""+t.getUTCMinutes()),_.push(""+t.getUTCSeconds());for(var x=0;x<_.length;++x)_[x].length<2&&(n+="0"),n+=_[x];return n+="Z",n};asn1$4.integerToDer=function(t){var n=forge$g.util.createBuffer();if(t>=-128&&t<128)return n.putSignedInt(t,8);if(t>=-32768&&t<32768)return n.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return n.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return n.putSignedInt(t,32);var _=new Error("Integer too large; max is 32-bits.");throw _.integer=t,_};asn1$4.derToInteger=function(t){typeof t=="string"&&(t=forge$g.util.createBuffer(t));var n=t.length()*8;if(n>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(n)};asn1$4.validate=function(t,n,_,x){var E=!1;if((t.tagClass===n.tagClass||typeof n.tagClass>"u")&&(t.type===n.type||typeof n.type>"u"))if(t.constructed===n.constructed||typeof n.constructed>"u"){if(E=!0,n.value&&forge$g.util.isArray(n.value))for(var S=0,C=0;E&&C<n.value.length;++C)E=n.value[C].optional||!1,t.value[S]&&(E=asn1$4.validate(t.value[S],n.value[C],_,x),E?++S:n.value[C].optional&&(E=!0)),!E&&x&&x.push("["+n.name+'] Tag class "'+n.tagClass+'", type "'+n.type+'" expected value length "'+n.value.length+'", got "'+t.value.length+'"');if(E&&_&&(n.capture&&(_[n.capture]=t.value),n.captureAsn1&&(_[n.captureAsn1]=t),n.captureBitStringContents&&"bitStringContents"in t&&(_[n.captureBitStringContents]=t.bitStringContents),n.captureBitStringValue&&"bitStringContents"in t))if(t.bitStringContents.length<2)_[n.captureBitStringValue]="";else{var T=t.bitStringContents.charCodeAt(0);if(T!==0)throw new Error("captureBitStringValue only supported for zero unused bits");_[n.captureBitStringValue]=t.bitStringContents.slice(1)}}else x&&x.push("["+n.name+'] Expected constructed "'+n.constructed+'", got "'+t.constructed+'"');else x&&(t.tagClass!==n.tagClass&&x.push("["+n.name+'] Expected tag class "'+n.tagClass+'", got "'+t.tagClass+'"'),t.type!==n.type&&x.push("["+n.name+'] Expected type "'+n.type+'", got "'+t.type+'"'));return E};var _nonLatinRegex=/[^\\u0000-\\u00ff]/;asn1$4.prettyPrint=function(t,n,_){var x="";n=n||0,_=_||2,n>0&&(x+=`
`);for(var E="",S=0;S<n*_;++S)E+=" ";switch(x+=E+"Tag: ",t.tagClass){case asn1$4.Class.UNIVERSAL:x+="Universal:";break;case asn1$4.Class.APPLICATION:x+="Application:";break;case asn1$4.Class.CONTEXT_SPECIFIC:x+="Context-Specific:";break;case asn1$4.Class.PRIVATE:x+="Private:";break}if(t.tagClass===asn1$4.Class.UNIVERSAL)switch(x+=t.type,t.type){case asn1$4.Type.NONE:x+=" (None)";break;case asn1$4.Type.BOOLEAN:x+=" (Boolean)";break;case asn1$4.Type.INTEGER:x+=" (Integer)";break;case asn1$4.Type.BITSTRING:x+=" (Bit string)";break;case asn1$4.Type.OCTETSTRING:x+=" (Octet string)";break;case asn1$4.Type.NULL:x+=" (Null)";break;case asn1$4.Type.OID:x+=" (Object Identifier)";break;case asn1$4.Type.ODESC:x+=" (Object Descriptor)";break;case asn1$4.Type.EXTERNAL:x+=" (External or Instance of)";break;case asn1$4.Type.REAL:x+=" (Real)";break;case asn1$4.Type.ENUMERATED:x+=" (Enumerated)";break;case asn1$4.Type.EMBEDDED:x+=" (Embedded PDV)";break;case asn1$4.Type.UTF8:x+=" (UTF8)";break;case asn1$4.Type.ROID:x+=" (Relative Object Identifier)";break;case asn1$4.Type.SEQUENCE:x+=" (Sequence)";break;case asn1$4.Type.SET:x+=" (Set)";break;case asn1$4.Type.PRINTABLESTRING:x+=" (Printable String)";break;case asn1$4.Type.IA5String:x+=" (IA5String (ASCII))";break;case asn1$4.Type.UTCTIME:x+=" (UTC time)";break;case asn1$4.Type.GENERALIZEDTIME:x+=" (Generalized time)";break;case asn1$4.Type.BMPSTRING:x+=" (BMP String)";break}else x+=t.type;if(x+=`
`,x+=E+"Constructed: "+t.constructed+`
`,t.composed){for(var C=0,T="",S=0;S<t.value.length;++S)t.value[S]!==void 0&&(C+=1,T+=asn1$4.prettyPrint(t.value[S],n+1,_),S+1<t.value.length&&(T+=","));x+=E+"Sub values: "+C+T}else{if(x+=E+"Value: ",t.type===asn1$4.Type.OID){var B=asn1$4.derToOid(t.value);x+=B,forge$g.pki&&forge$g.pki.oids&&B in forge$g.pki.oids&&(x+=" ("+forge$g.pki.oids[B]+") ")}if(t.type===asn1$4.Type.INTEGER)try{x+=asn1$4.derToInteger(t.value)}catch{x+="0x"+forge$g.util.bytesToHex(t.value)}else if(t.type===asn1$4.Type.BITSTRING){if(t.value.length>1?x+="0x"+forge$g.util.bytesToHex(t.value.slice(1)):x+="(none)",t.value.length>0){var A=t.value.charCodeAt(0);A==1?x+=" (1 unused bit shown)":A>1&&(x+=" ("+A+" unused bits shown)")}}else if(t.type===asn1$4.Type.OCTETSTRING)_nonLatinRegex.test(t.value)||(x+="("+t.value+") "),x+="0x"+forge$g.util.bytesToHex(t.value);else if(t.type===asn1$4.Type.UTF8)try{x+=forge$g.util.decodeUtf8(t.value)}catch(I){if(I.message==="URI malformed")x+="0x"+forge$g.util.bytesToHex(t.value)+" (malformed UTF8)";else throw I}else t.type===asn1$4.Type.PRINTABLESTRING||t.type===asn1$4.Type.IA5String?x+=t.value:_nonLatinRegex.test(t.value)?x+="0x"+forge$g.util.bytesToHex(t.value):t.value.length===0?x+="[null]":x+=t.value}return x};var forge$f=forge$m;forge$f.des=forge$f.des||{};forge$f.des.startEncrypting=function(t,n,_,x){var E=_createCipher({key:t,output:_,decrypt:!1,mode:x||(n===null?"ECB":"CBC")});return E.start(n),E};forge$f.des.createEncryptionCipher=function(t,n){return _createCipher({key:t,output:null,decrypt:!1,mode:n})};forge$f.des.startDecrypting=function(t,n,_,x){var E=_createCipher({key:t,output:_,decrypt:!0,mode:x||(n===null?"ECB":"CBC")});return E.start(n),E};forge$f.des.createDecryptionCipher=function(t,n){return _createCipher({key:t,output:null,decrypt:!0,mode:n})};forge$f.des.Algorithm=function(t,n){var _=this;_.name=t,_.mode=new n({blockSize:8,cipher:{encrypt:function(x,E){return _updateBlock(_._keys,x,E,!1)},decrypt:function(x,E){return _updateBlock(_._keys,x,E,!0)}}}),_._init=!1};forge$f.des.Algorithm.prototype.initialize=function(t){if(!this._init){var n=forge$f.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&n.length()!==24)throw new Error("Invalid Triple-DES key size: "+n.length()*8);this._keys=_createKeys(n),this._init=!0}};registerAlgorithm("DES-ECB",forge$f.cipher.modes.ecb);registerAlgorithm("DES-CBC",forge$f.cipher.modes.cbc);registerAlgorithm("DES-CFB",forge$f.cipher.modes.cfb);registerAlgorithm("DES-OFB",forge$f.cipher.modes.ofb);registerAlgorithm("DES-CTR",forge$f.cipher.modes.ctr);registerAlgorithm("3DES-ECB",forge$f.cipher.modes.ecb);registerAlgorithm("3DES-CBC",forge$f.cipher.modes.cbc);registerAlgorithm("3DES-CFB",forge$f.cipher.modes.cfb);registerAlgorithm("3DES-OFB",forge$f.cipher.modes.ofb);registerAlgorithm("3DES-CTR",forge$f.cipher.modes.ctr);function registerAlgorithm(t,n){var _=function(){return new forge$f.des.Algorithm(t,n)};forge$f.cipher.registerAlgorithm(t,_)}var spfunction1=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],spfunction2=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],spfunction3=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],spfunction4=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],spfunction5=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],spfunction6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],spfunction7=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],spfunction8=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function _createKeys(t){for(var n=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],_=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],x=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],E=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],S=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],C=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],T=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],B=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],A=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],I=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],D=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],M=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],V=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],L=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],F=t.length()>8?3:1,j=[],U=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],H=0,Y,Z=0;Z<F;Z++){var ne=t.getInt32(),re=t.getInt32();Y=(ne>>>4^re)&252645135,re^=Y,ne^=Y<<4,Y=(re>>>-16^ne)&65535,ne^=Y,re^=Y<<-16,Y=(ne>>>2^re)&858993459,re^=Y,ne^=Y<<2,Y=(re>>>-16^ne)&65535,ne^=Y,re^=Y<<-16,Y=(ne>>>1^re)&1431655765,re^=Y,ne^=Y<<1,Y=(re>>>8^ne)&16711935,ne^=Y,re^=Y<<8,Y=(ne>>>1^re)&1431655765,re^=Y,ne^=Y<<1,Y=ne<<8|re>>>20&240,ne=re<<24|re<<8&16711680|re>>>8&65280|re>>>24&240,re=Y;for(var X=0;X<U.length;++X){U[X]?(ne=ne<<2|ne>>>26,re=re<<2|re>>>26):(ne=ne<<1|ne>>>27,re=re<<1|re>>>27),ne&=-15,re&=-15;var ce=n[ne>>>28]|_[ne>>>24&15]|x[ne>>>20&15]|E[ne>>>16&15]|S[ne>>>12&15]|C[ne>>>8&15]|T[ne>>>4&15],ue=B[re>>>28]|A[re>>>24&15]|I[re>>>20&15]|D[re>>>16&15]|M[re>>>12&15]|V[re>>>8&15]|L[re>>>4&15];Y=(ue>>>16^ce)&65535,j[H++]=ce^Y,j[H++]=ue^Y<<16}}return j}function _updateBlock(t,n,_,x){var E=t.length===32?3:9,S;E===3?S=x?[30,-2,-2]:[0,32,2]:S=x?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var C,T=n[0],B=n[1];C=(T>>>4^B)&252645135,B^=C,T^=C<<4,C=(T>>>16^B)&65535,B^=C,T^=C<<16,C=(B>>>2^T)&858993459,T^=C,B^=C<<2,C=(B>>>8^T)&16711935,T^=C,B^=C<<8,C=(T>>>1^B)&1431655765,B^=C,T^=C<<1,T=T<<1|T>>>31,B=B<<1|B>>>31;for(var A=0;A<E;A+=3){for(var I=S[A+1],D=S[A+2],M=S[A];M!=I;M+=D){var V=B^t[M],L=(B>>>4|B<<28)^t[M+1];C=T,T=B,B=C^(spfunction2[V>>>24&63]|spfunction4[V>>>16&63]|spfunction6[V>>>8&63]|spfunction8[V&63]|spfunction1[L>>>24&63]|spfunction3[L>>>16&63]|spfunction5[L>>>8&63]|spfunction7[L&63])}C=T,T=B,B=C}T=T>>>1|T<<31,B=B>>>1|B<<31,C=(T>>>1^B)&1431655765,B^=C,T^=C<<1,C=(B>>>8^T)&16711935,T^=C,B^=C<<8,C=(B>>>2^T)&858993459,T^=C,B^=C<<2,C=(T>>>16^B)&65535,B^=C,T^=C<<16,C=(T>>>4^B)&252645135,B^=C,T^=C<<4,_[0]=T,_[1]=B}function _createCipher(t){t=t||{};var n=(t.mode||"CBC").toUpperCase(),_="DES-"+n,x;t.decrypt?x=forge$f.cipher.createDecipher(_,t.key):x=forge$f.cipher.createCipher(_,t.key);var E=x.start;return x.start=function(S,C){var T=null;C instanceof forge$f.util.ByteBuffer&&(T=C,C={}),C=C||{},C.output=T,C.iv=S,E.call(x,C)},x}var forge$e=forge$m;forge$e.md=forge$e.md||{};forge$e.md.algorithms=forge$e.md.algorithms||{};var forge$d=forge$m,hmac$1=forge$d.hmac=forge$d.hmac||{};hmac$1.create=function(){var t=null,n=null,_=null,x=null,E={};return E.start=function(S,C){if(S!==null)if(typeof S=="string")if(S=S.toLowerCase(),S in forge$d.md.algorithms)n=forge$d.md.algorithms[S].create();else throw new Error('Unknown hash algorithm "'+S+'"');else n=S;if(C===null)C=t;else{if(typeof C=="string")C=forge$d.util.createBuffer(C);else if(forge$d.util.isArray(C)){var T=C;C=forge$d.util.createBuffer();for(var B=0;B<T.length;++B)C.putByte(T[B])}var A=C.length();A>n.blockLength&&(n.start(),n.update(C.bytes()),C=n.digest()),_=forge$d.util.createBuffer(),x=forge$d.util.createBuffer(),A=C.length();for(var B=0;B<A;++B){var T=C.at(B);_.putByte(54^T),x.putByte(92^T)}if(A<n.blockLength)for(var T=n.blockLength-A,B=0;B<T;++B)_.putByte(54),x.putByte(92);t=C,_=_.bytes(),x=x.bytes()}n.start(),n.update(_)},E.update=function(S){n.update(S)},E.getMac=function(){var S=n.digest().bytes();return n.start(),n.update(x),n.update(S),n.digest()},E.digest=E.getMac,E};var cryptoBrowserify={},browser$e={exports:{}},hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$e.exports;hasRequiredBrowser$b=1;var t=65536,n=4294967295;function _(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var x=safeBufferExports.Buffer,E=commonjsGlobal.crypto||commonjsGlobal.msCrypto;E&&E.getRandomValues?browser$e.exports=S:browser$e.exports=_;function S(C,T){if(C>n)throw new RangeError("requested too many random bytes");var B=x.allocUnsafe(C);if(C>0)if(C>t)for(var A=0;A<C;A+=t)E.getRandomValues(B.slice(A,A+t));else E.getRandomValues(B);return typeof T=="function"?browser$1$1.nextTick(function(){T(null,B)}):B}return browser$e.exports}var readableBrowser={exports:{}},streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=eventsExports.EventEmitter),streamBrowser}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function t(L,F){var j=Object.keys(L);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(L);F&&(U=U.filter(function(H){return Object.getOwnPropertyDescriptor(L,H).enumerable})),j.push.apply(j,U)}return j}function n(L){for(var F=1;F<arguments.length;F++){var j=arguments[F]!=null?arguments[F]:{};F%2?t(Object(j),!0).forEach(function(U){_(L,U,j[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(j)):t(Object(j)).forEach(function(U){Object.defineProperty(L,U,Object.getOwnPropertyDescriptor(j,U))})}return L}function _(L,F,j){return F=C(F),F in L?Object.defineProperty(L,F,{value:j,enumerable:!0,configurable:!0,writable:!0}):L[F]=j,L}function x(L,F){if(!(L instanceof F))throw new TypeError("Cannot call a class as a function")}function E(L,F){for(var j=0;j<F.length;j++){var U=F[j];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(L,C(U.key),U)}}function S(L,F,j){return F&&E(L.prototype,F),j&&E(L,j),Object.defineProperty(L,"prototype",{writable:!1}),L}function C(L){var F=T(L,"string");return typeof F=="symbol"?F:String(F)}function T(L,F){if(typeof L!="object"||L===null)return L;var j=L[Symbol.toPrimitive];if(j!==void 0){var U=j.call(L,F||"default");if(typeof U!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(L)}var B=buffer$3,A=B.Buffer,I=require$$0$2,D=I.inspect,M=D&&D.custom||"inspect";function V(L,F,j){A.prototype.copy.call(L,F,j)}return buffer_list=function(){function L(){x(this,L),this.head=null,this.tail=null,this.length=0}return S(L,[{key:"push",value:function(j){var U={data:j,next:null};this.length>0?this.tail.next=U:this.head=U,this.tail=U,++this.length}},{key:"unshift",value:function(j){var U={data:j,next:this.head};this.length===0&&(this.tail=U),this.head=U,++this.length}},{key:"shift",value:function(){if(this.length!==0){var j=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,j}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(j){if(this.length===0)return"";for(var U=this.head,H=""+U.data;U=U.next;)H+=j+U.data;return H}},{key:"concat",value:function(j){if(this.length===0)return A.alloc(0);for(var U=A.allocUnsafe(j>>>0),H=this.head,Y=0;H;)V(H.data,U,Y),Y+=H.data.length,H=H.next;return U}},{key:"consume",value:function(j,U){var H;return j<this.head.data.length?(H=this.head.data.slice(0,j),this.head.data=this.head.data.slice(j)):j===this.head.data.length?H=this.shift():H=U?this._getString(j):this._getBuffer(j),H}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(j){var U=this.head,H=1,Y=U.data;for(j-=Y.length;U=U.next;){var Z=U.data,ne=j>Z.length?Z.length:j;if(ne===Z.length?Y+=Z:Y+=Z.slice(0,j),j-=ne,j===0){ne===Z.length?(++H,U.next?this.head=U.next:this.head=this.tail=null):(this.head=U,U.data=Z.slice(ne));break}++H}return this.length-=H,Y}},{key:"_getBuffer",value:function(j){var U=A.allocUnsafe(j),H=this.head,Y=1;for(H.data.copy(U),j-=H.data.length;H=H.next;){var Z=H.data,ne=j>Z.length?Z.length:j;if(Z.copy(U,U.length-j,0,ne),j-=ne,j===0){ne===Z.length?(++Y,H.next?this.head=H.next:this.head=this.tail=null):(this.head=H,H.data=Z.slice(ne));break}++Y}return this.length-=Y,U}},{key:M,value:function(j,U){return D(this,n(n({},U),{},{depth:0,customInspect:!1}))}}]),L}(),buffer_list}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;function t(C,T){var B=this,A=this._readableState&&this._readableState.destroyed,I=this._writableState&&this._writableState.destroyed;return A||I?(T?T(C):C&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,browser$1$1.nextTick(E,this,C)):browser$1$1.nextTick(E,this,C)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(C||null,function(D){!T&&D?B._writableState?B._writableState.errorEmitted?browser$1$1.nextTick(_,B):(B._writableState.errorEmitted=!0,browser$1$1.nextTick(n,B,D)):browser$1$1.nextTick(n,B,D):T?(browser$1$1.nextTick(_,B),T(D)):browser$1$1.nextTick(_,B)}),this)}function n(C,T){E(C,T),_(C)}function _(C){C._writableState&&!C._writableState.emitClose||C._readableState&&!C._readableState.emitClose||C.emit("close")}function x(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function E(C,T){C.emit("error",T)}function S(C,T){var B=C._readableState,A=C._writableState;B&&B.autoDestroy||A&&A.autoDestroy?C.destroy(T):C.emit("error",T)}return destroy_1={destroy:t,undestroy:x,errorOrDestroy:S},destroy_1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function t(T,B){T.prototype=Object.create(B.prototype),T.prototype.constructor=T,T.__proto__=B}var n={};function _(T,B,A){A||(A=Error);function I(M,V,L){return typeof B=="string"?B:B(M,V,L)}var D=function(M){t(V,M);function V(L,F,j){return M.call(this,I(L,F,j))||this}return V}(A);D.prototype.name=A.name,D.prototype.code=T,n[T]=D}function x(T,B){if(Array.isArray(T)){var A=T.length;return T=T.map(function(I){return String(I)}),A>2?"one of ".concat(B," ").concat(T.slice(0,A-1).join(", "),", or ")+T[A-1]:A===2?"one of ".concat(B," ").concat(T[0]," or ").concat(T[1]):"of ".concat(B," ").concat(T[0])}else return"of ".concat(B," ").concat(String(T))}function E(T,B,A){return T.substr(!A||A<0?0:+A,B.length)===B}function S(T,B,A){return(A===void 0||A>T.length)&&(A=T.length),T.substring(A-B.length,A)===B}function C(T,B,A){return typeof A!="number"&&(A=0),A+B.length>T.length?!1:T.indexOf(B,A)!==-1}return _("ERR_INVALID_OPT_VALUE",function(T,B){return'The value "'+B+'" is invalid for option "'+T+'"'},TypeError),_("ERR_INVALID_ARG_TYPE",function(T,B,A){var I;typeof B=="string"&&E(B,"not ")?(I="must not be",B=B.replace(/^not /,"")):I="must be";var D;if(S(T," argument"))D="The ".concat(T," ").concat(I," ").concat(x(B,"type"));else{var M=C(T,".")?"property":"argument";D='The "'.concat(T,'" ').concat(M," ").concat(I," ").concat(x(B,"type"))}return D+=". Received type ".concat(typeof A),D},TypeError),_("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),_("ERR_METHOD_NOT_IMPLEMENTED",function(T){return"The "+T+" method is not implemented"}),_("ERR_STREAM_PREMATURE_CLOSE","Premature close"),_("ERR_STREAM_DESTROYED",function(T){return"Cannot call "+T+" after a stream was destroyed"}),_("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),_("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),_("ERR_STREAM_WRITE_AFTER_END","write after end"),_("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),_("ERR_UNKNOWN_ENCODING",function(T){return"Unknown encoding: "+T},TypeError),_("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=n,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var t=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function n(x,E,S){return x.highWaterMark!=null?x.highWaterMark:E?x[S]:null}function _(x,E,S,C){var T=n(E,C,S);if(T!=null){if(!(isFinite(T)&&Math.floor(T)===T)||T<0){var B=C?S:"highWaterMark";throw new t(B,T)}return Math.floor(T)}return x.objectMode?16:16*1024}return state={getHighWaterMark:_},state}var browser$d,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$d;hasRequiredBrowser$a=1,browser$d=t;function t(_,x){if(n("noDeprecation"))return _;var E=!1;function S(){if(!E){if(n("throwDeprecation"))throw new Error(x);n("traceDeprecation")?console.trace(x):console.warn(x),E=!0}return _.apply(this,arguments)}return S}function n(_){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var x=commonjsGlobal.localStorage[_];return x==null?!1:String(x).toLowerCase()==="true"}return browser$d}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=ce;function t(Ee){var we=this;this.next=null,this.entry=null,this.finish=function(){he(we,Ee)}}var n;ce.WritableState=re;var _={deprecate:requireBrowser$a()},x=requireStreamBrowser(),E=buffer$3.Buffer,S=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function C(Ee){return E.from(Ee)}function T(Ee){return E.isBuffer(Ee)||Ee instanceof S}var B=requireDestroy(),A=requireState(),I=A.getHighWaterMark,D=requireErrorsBrowser().codes,M=D.ERR_INVALID_ARG_TYPE,V=D.ERR_METHOD_NOT_IMPLEMENTED,L=D.ERR_MULTIPLE_CALLBACK,F=D.ERR_STREAM_CANNOT_PIPE,j=D.ERR_STREAM_DESTROYED,U=D.ERR_STREAM_NULL_VALUES,H=D.ERR_STREAM_WRITE_AFTER_END,Y=D.ERR_UNKNOWN_ENCODING,Z=B.errorOrDestroy;inherits_browserExports(ce,x);function ne(){}function re(Ee,we,xe){n=n||require_stream_duplex(),Ee=Ee||{},typeof xe!="boolean"&&(xe=we instanceof n),this.objectMode=!!Ee.objectMode,xe&&(this.objectMode=this.objectMode||!!Ee.writableObjectMode),this.highWaterMark=I(this,Ee,"writableHighWaterMark",xe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var $e=Ee.decodeStrings===!1;this.decodeStrings=!$e,this.defaultEncoding=Ee.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ge){J(we,ge)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Ee.emitClose!==!1,this.autoDestroy=!!Ee.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}re.prototype.getBuffer=function(){for(var we=this.bufferedRequest,xe=[];we;)xe.push(we),we=we.next;return xe},function(){try{Object.defineProperty(re.prototype,"buffer",{get:_.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var X;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(X=Function.prototype[Symbol.hasInstance],Object.defineProperty(ce,Symbol.hasInstance,{value:function(we){return X.call(this,we)?!0:this!==ce?!1:we&&we._writableState instanceof re}})):X=function(we){return we instanceof this};function ce(Ee){n=n||require_stream_duplex();var we=this instanceof n;if(!we&&!X.call(ce,this))return new ce(Ee);this._writableState=new re(Ee,this,we),this.writable=!0,Ee&&(typeof Ee.write=="function"&&(this._write=Ee.write),typeof Ee.writev=="function"&&(this._writev=Ee.writev),typeof Ee.destroy=="function"&&(this._destroy=Ee.destroy),typeof Ee.final=="function"&&(this._final=Ee.final)),x.call(this)}ce.prototype.pipe=function(){Z(this,new F)};function ue(Ee,we){var xe=new H;Z(Ee,xe),browser$1$1.nextTick(we,xe)}function _e(Ee,we,xe,$e){var ge;return xe===null?ge=new U:typeof xe!="string"&&!we.objectMode&&(ge=new M("chunk",["string","Buffer"],xe)),ge?(Z(Ee,ge),browser$1$1.nextTick($e,ge),!1):!0}ce.prototype.write=function(Ee,we,xe){var $e=this._writableState,ge=!1,Se=!$e.objectMode&&T(Ee);return Se&&!E.isBuffer(Ee)&&(Ee=C(Ee)),typeof we=="function"&&(xe=we,we=null),Se?we="buffer":we||(we=$e.defaultEncoding),typeof xe!="function"&&(xe=ne),$e.ending?ue(this,xe):(Se||_e(this,$e,Ee,xe))&&($e.pendingcb++,ge=ie(this,$e,Se,Ee,we,xe)),ge},ce.prototype.cork=function(){this._writableState.corked++},ce.prototype.uncork=function(){var Ee=this._writableState;Ee.corked&&(Ee.corked--,!Ee.writing&&!Ee.corked&&!Ee.bufferProcessing&&Ee.bufferedRequest&&oe(this,Ee))},ce.prototype.setDefaultEncoding=function(we){if(typeof we=="string"&&(we=we.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((we+"").toLowerCase())>-1))throw new Y(we);return this._writableState.defaultEncoding=we,this},Object.defineProperty(ce.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ye(Ee,we,xe){return!Ee.objectMode&&Ee.decodeStrings!==!1&&typeof we=="string"&&(we=E.from(we,xe)),we}Object.defineProperty(ce.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ie(Ee,we,xe,$e,ge,Se){if(!xe){var me=ye(we,$e,ge);$e!==me&&(xe=!0,ge="buffer",$e=me)}var Be=we.objectMode?1:$e.length;we.length+=Be;var ve=we.length<we.highWaterMark;if(ve||(we.needDrain=!0),we.writing||we.corked){var Ae=we.lastBufferedRequest;we.lastBufferedRequest={chunk:$e,encoding:ge,isBuf:xe,callback:Se,next:null},Ae?Ae.next=we.lastBufferedRequest:we.bufferedRequest=we.lastBufferedRequest,we.bufferedRequestCount+=1}else W(Ee,we,!1,Be,$e,ge,Se);return ve}function W(Ee,we,xe,$e,ge,Se,me){we.writelen=$e,we.writecb=me,we.writing=!0,we.sync=!0,we.destroyed?we.onwrite(new j("write")):xe?Ee._writev(ge,we.onwrite):Ee._write(ge,Se,we.onwrite),we.sync=!1}function O(Ee,we,xe,$e,ge){--we.pendingcb,xe?(browser$1$1.nextTick(ge,$e),browser$1$1.nextTick(te,Ee,we),Ee._writableState.errorEmitted=!0,Z(Ee,$e)):(ge($e),Ee._writableState.errorEmitted=!0,Z(Ee,$e),te(Ee,we))}function z(Ee){Ee.writing=!1,Ee.writecb=null,Ee.length-=Ee.writelen,Ee.writelen=0}function J(Ee,we){var xe=Ee._writableState,$e=xe.sync,ge=xe.writecb;if(typeof ge!="function")throw new L;if(z(xe),we)O(Ee,xe,$e,we,ge);else{var Se=se(xe)||Ee.destroyed;!Se&&!xe.corked&&!xe.bufferProcessing&&xe.bufferedRequest&&oe(Ee,xe),$e?browser$1$1.nextTick(ee,Ee,xe,Se,ge):ee(Ee,xe,Se,ge)}}function ee(Ee,we,xe,$e){xe||ae(Ee,we),we.pendingcb--,$e(),te(Ee,we)}function ae(Ee,we){we.length===0&&we.needDrain&&(we.needDrain=!1,Ee.emit("drain"))}function oe(Ee,we){we.bufferProcessing=!0;var xe=we.bufferedRequest;if(Ee._writev&&xe&&xe.next){var $e=we.bufferedRequestCount,ge=new Array($e),Se=we.corkedRequestsFree;Se.entry=xe;for(var me=0,Be=!0;xe;)ge[me]=xe,xe.isBuf||(Be=!1),xe=xe.next,me+=1;ge.allBuffers=Be,W(Ee,we,!0,we.length,ge,"",Se.finish),we.pendingcb++,we.lastBufferedRequest=null,Se.next?(we.corkedRequestsFree=Se.next,Se.next=null):we.corkedRequestsFree=new t(we),we.bufferedRequestCount=0}else{for(;xe;){var ve=xe.chunk,Ae=xe.encoding,Ve=xe.callback,Pe=we.objectMode?1:ve.length;if(W(Ee,we,!1,Pe,ve,Ae,Ve),xe=xe.next,we.bufferedRequestCount--,we.writing)break}xe===null&&(we.lastBufferedRequest=null)}we.bufferedRequest=xe,we.bufferProcessing=!1}ce.prototype._write=function(Ee,we,xe){xe(new V("_write()"))},ce.prototype._writev=null,ce.prototype.end=function(Ee,we,xe){var $e=this._writableState;return typeof Ee=="function"?(xe=Ee,Ee=null,we=null):typeof we=="function"&&(xe=we,we=null),Ee!=null&&this.write(Ee,we),$e.corked&&($e.corked=1,this.uncork()),$e.ending||fe(this,$e,xe),this},Object.defineProperty(ce.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function se(Ee){return Ee.ending&&Ee.length===0&&Ee.bufferedRequest===null&&!Ee.finished&&!Ee.writing}function G(Ee,we){Ee._final(function(xe){we.pendingcb--,xe&&Z(Ee,xe),we.prefinished=!0,Ee.emit("prefinish"),te(Ee,we)})}function q(Ee,we){!we.prefinished&&!we.finalCalled&&(typeof Ee._final=="function"&&!we.destroyed?(we.pendingcb++,we.finalCalled=!0,browser$1$1.nextTick(G,Ee,we)):(we.prefinished=!0,Ee.emit("prefinish")))}function te(Ee,we){var xe=se(we);if(xe&&(q(Ee,we),we.pendingcb===0&&(we.finished=!0,Ee.emit("finish"),we.autoDestroy))){var $e=Ee._readableState;(!$e||$e.autoDestroy&&$e.endEmitted)&&Ee.destroy()}return xe}function fe(Ee,we,xe){we.ending=!0,te(Ee,we),xe&&(we.finished?browser$1$1.nextTick(xe):Ee.once("finish",xe)),we.ended=!0,Ee.writable=!1}function he(Ee,we,xe){var $e=Ee.entry;for(Ee.entry=null;$e;){var ge=$e.callback;we.pendingcb--,ge(xe),$e=$e.next}we.corkedRequestsFree.next=Ee}return Object.defineProperty(ce.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(we){this._writableState&&(this._writableState.destroyed=we)}}),ce.prototype.destroy=B.destroy,ce.prototype._undestroy=B.undestroy,ce.prototype._destroy=function(Ee,we){we(Ee)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var t=Object.keys||function(A){var I=[];for(var D in A)I.push(D);return I};_stream_duplex=C;var n=require_stream_readable(),_=require_stream_writable();inherits_browserExports(C,n);for(var x=t(_.prototype),E=0;E<x.length;E++){var S=x[E];C.prototype[S]||(C.prototype[S]=_.prototype[S])}function C(A){if(!(this instanceof C))return new C(A);n.call(this,A),_.call(this,A),this.allowHalfOpen=!0,A&&(A.readable===!1&&(this.readable=!1),A.writable===!1&&(this.writable=!1),A.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",T)))}Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function T(){this._writableState.ended||browser$1$1.nextTick(B,this)}function B(A){A.end()}return Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(I){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=I,this._writableState.destroyed=I)}}),_stream_duplex}var string_decoder={},Buffer$2=safeBufferExports.Buffer,isEncoding=Buffer$2.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(t){if(!t)return"utf8";for(var n;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(n)return;t=(""+t).toLowerCase(),n=!0}}function normalizeEncoding(t){var n=_normalizeEncoding(t);if(typeof n!="string"&&(Buffer$2.isEncoding===isEncoding||!isEncoding(t)))throw new Error("Unknown encoding: "+t);return n||t}var StringDecoder_1=string_decoder.StringDecoder=StringDecoder;function StringDecoder(t){this.encoding=normalizeEncoding(t);var n;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,n=4;break;case"utf8":this.fillLast=utf8FillLast,n=4;break;case"base64":this.text=base64Text,this.end=base64End,n=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$2.allocUnsafe(n)}StringDecoder.prototype.write=function(t){if(t.length===0)return"";var n,_;if(this.lastNeed){if(n=this.fillLast(t),n===void 0)return"";_=this.lastNeed,this.lastNeed=0}else _=0;return _<t.length?n?n+this.text(t,_):this.text(t,_):n||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function utf8CheckByte(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function utf8CheckIncomplete(t,n,_){var x=n.length-1;if(x<_)return 0;var E=utf8CheckByte(n[x]);return E>=0?(E>0&&(t.lastNeed=E-1),E):--x<_||E===-2?0:(E=utf8CheckByte(n[x]),E>=0?(E>0&&(t.lastNeed=E-2),E):--x<_||E===-2?0:(E=utf8CheckByte(n[x]),E>=0?(E>0&&(E===2?E=0:t.lastNeed=E-3),E):0))}function utf8CheckExtraBytes(t,n,_){if((n[0]&192)!==128)return t.lastNeed=0,"";if(t.lastNeed>1&&n.length>1){if((n[1]&192)!==128)return t.lastNeed=1,"";if(t.lastNeed>2&&n.length>2&&(n[2]&192)!==128)return t.lastNeed=2,""}}function utf8FillLast(t){var n=this.lastTotal-this.lastNeed,_=utf8CheckExtraBytes(this,t);if(_!==void 0)return _;if(this.lastNeed<=t.length)return t.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,n,0,t.length),this.lastNeed-=t.length}function utf8Text(t,n){var _=utf8CheckIncomplete(this,t,n);if(!this.lastNeed)return t.toString("utf8",n);this.lastTotal=_;var x=t.length-(_-this.lastNeed);return t.copy(this.lastChar,0,x),t.toString("utf8",n,x)}function utf8End(t){var n=t&&t.length?this.write(t):"";return this.lastNeed?n+"":n}function utf16Text(t,n){if((t.length-n)%2===0){var _=t.toString("utf16le",n);if(_){var x=_.charCodeAt(_.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],_.slice(0,-1)}return _}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",n,t.length-1)}function utf16End(t){var n=t&&t.length?this.write(t):"";if(this.lastNeed){var _=this.lastTotal-this.lastNeed;return n+this.lastChar.toString("utf16le",0,_)}return n}function base64Text(t,n){var _=(t.length-n)%3;return _===0?t.toString("base64",n):(this.lastNeed=3-_,this.lastTotal=3,_===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",n,t.length-_))}function base64End(t){var n=t&&t.length?this.write(t):"";return this.lastNeed?n+this.lastChar.toString("base64",0,3-this.lastNeed):n}function simpleWrite(t){return t.toString(this.encoding)}function simpleEnd(t){return t&&t.length?this.write(t):""}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var t=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function n(S){var C=!1;return function(){if(!C){C=!0;for(var T=arguments.length,B=new Array(T),A=0;A<T;A++)B[A]=arguments[A];S.apply(this,B)}}}function _(){}function x(S){return S.setHeader&&typeof S.abort=="function"}function E(S,C,T){if(typeof C=="function")return E(S,null,C);C||(C={}),T=n(T||_);var B=C.readable||C.readable!==!1&&S.readable,A=C.writable||C.writable!==!1&&S.writable,I=function(){S.writable||M()},D=S._writableState&&S._writableState.finished,M=function(){A=!1,D=!0,B||T.call(S)},V=S._readableState&&S._readableState.endEmitted,L=function(){B=!1,V=!0,A||T.call(S)},F=function(Y){T.call(S,Y)},j=function(){var Y;if(B&&!V)return(!S._readableState||!S._readableState.ended)&&(Y=new t),T.call(S,Y);if(A&&!D)return(!S._writableState||!S._writableState.ended)&&(Y=new t),T.call(S,Y)},U=function(){S.req.on("finish",M)};return x(S)?(S.on("complete",M),S.on("abort",j),S.req?U():S.on("request",U)):A&&!S._writableState&&(S.on("end",I),S.on("close",I)),S.on("end",L),S.on("finish",M),C.error!==!1&&S.on("error",F),S.on("close",j),function(){S.removeListener("complete",M),S.removeListener("abort",j),S.removeListener("request",U),S.req&&S.req.removeListener("finish",M),S.removeListener("end",I),S.removeListener("close",I),S.removeListener("finish",M),S.removeListener("end",L),S.removeListener("error",F),S.removeListener("close",j)}}return endOfStream=E,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var t;function n(Y,Z,ne){return Z=_(Z),Z in Y?Object.defineProperty(Y,Z,{value:ne,enumerable:!0,configurable:!0,writable:!0}):Y[Z]=ne,Y}function _(Y){var Z=x(Y,"string");return typeof Z=="symbol"?Z:String(Z)}function x(Y,Z){if(typeof Y!="object"||Y===null)return Y;var ne=Y[Symbol.toPrimitive];if(ne!==void 0){var re=ne.call(Y,Z||"default");if(typeof re!="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Z==="string"?String:Number)(Y)}var E=requireEndOfStream(),S=Symbol("lastResolve"),C=Symbol("lastReject"),T=Symbol("error"),B=Symbol("ended"),A=Symbol("lastPromise"),I=Symbol("handlePromise"),D=Symbol("stream");function M(Y,Z){return{value:Y,done:Z}}function V(Y){var Z=Y[S];if(Z!==null){var ne=Y[D].read();ne!==null&&(Y[A]=null,Y[S]=null,Y[C]=null,Z(M(ne,!1)))}}function L(Y){browser$1$1.nextTick(V,Y)}function F(Y,Z){return function(ne,re){Y.then(function(){if(Z[B]){ne(M(void 0,!0));return}Z[I](ne,re)},re)}}var j=Object.getPrototypeOf(function(){}),U=Object.setPrototypeOf((t={get stream(){return this[D]},next:function(){var Z=this,ne=this[T];if(ne!==null)return Promise.reject(ne);if(this[B])return Promise.resolve(M(void 0,!0));if(this[D].destroyed)return new Promise(function(ue,_e){browser$1$1.nextTick(function(){Z[T]?_e(Z[T]):ue(M(void 0,!0))})});var re=this[A],X;if(re)X=new Promise(F(re,this));else{var ce=this[D].read();if(ce!==null)return Promise.resolve(M(ce,!1));X=new Promise(this[I])}return this[A]=X,X}},n(t,Symbol.asyncIterator,function(){return this}),n(t,"return",function(){var Z=this;return new Promise(function(ne,re){Z[D].destroy(null,function(X){if(X){re(X);return}ne(M(void 0,!0))})})}),t),j),H=function(Z){var ne,re=Object.create(U,(ne={},n(ne,D,{value:Z,writable:!0}),n(ne,S,{value:null,writable:!0}),n(ne,C,{value:null,writable:!0}),n(ne,T,{value:null,writable:!0}),n(ne,B,{value:Z._readableState.endEmitted,writable:!0}),n(ne,I,{value:function(ce,ue){var _e=re[D].read();_e?(re[A]=null,re[S]=null,re[C]=null,ce(M(_e,!1))):(re[S]=ce,re[C]=ue)},writable:!0}),ne));return re[A]=null,E(Z,function(X){if(X&&X.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ce=re[C];ce!==null&&(re[A]=null,re[S]=null,re[C]=null,ce(X)),re[T]=X;return}var ue=re[S];ue!==null&&(re[A]=null,re[S]=null,re[C]=null,ue(M(void 0,!0))),re[B]=!0}),Z.on("readable",L.bind(null,re)),re};return async_iterator=H,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=ue;var t;ue.ReadableState=ce,eventsExports.EventEmitter;var n=function(me,Be){return me.listeners(Be).length},_=requireStreamBrowser(),x=buffer$3.Buffer,E=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function S(Se){return x.from(Se)}function C(Se){return x.isBuffer(Se)||Se instanceof E}var T=require$$0$2,B;T&&T.debuglog?B=T.debuglog("stream"):B=function(){};var A=requireBuffer_list(),I=requireDestroy(),D=requireState(),M=D.getHighWaterMark,V=requireErrorsBrowser().codes,L=V.ERR_INVALID_ARG_TYPE,F=V.ERR_STREAM_PUSH_AFTER_EOF,j=V.ERR_METHOD_NOT_IMPLEMENTED,U=V.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,H,Y,Z;inherits_browserExports(ue,_);var ne=I.errorOrDestroy,re=["error","close","destroy","pause","resume"];function X(Se,me,Be){if(typeof Se.prependListener=="function")return Se.prependListener(me,Be);!Se._events||!Se._events[me]?Se.on(me,Be):Array.isArray(Se._events[me])?Se._events[me].unshift(Be):Se._events[me]=[Be,Se._events[me]]}function ce(Se,me,Be){t=t||require_stream_duplex(),Se=Se||{},typeof Be!="boolean"&&(Be=me instanceof t),this.objectMode=!!Se.objectMode,Be&&(this.objectMode=this.objectMode||!!Se.readableObjectMode),this.highWaterMark=M(this,Se,"readableHighWaterMark",Be),this.buffer=new A,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Se.emitClose!==!1,this.autoDestroy=!!Se.autoDestroy,this.destroyed=!1,this.defaultEncoding=Se.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Se.encoding&&(H||(H=string_decoder.StringDecoder),this.decoder=new H(Se.encoding),this.encoding=Se.encoding)}function ue(Se){if(t=t||require_stream_duplex(),!(this instanceof ue))return new ue(Se);var me=this instanceof t;this._readableState=new ce(Se,this,me),this.readable=!0,Se&&(typeof Se.read=="function"&&(this._read=Se.read),typeof Se.destroy=="function"&&(this._destroy=Se.destroy)),_.call(this)}Object.defineProperty(ue.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(me){this._readableState&&(this._readableState.destroyed=me)}}),ue.prototype.destroy=I.destroy,ue.prototype._undestroy=I.undestroy,ue.prototype._destroy=function(Se,me){me(Se)},ue.prototype.push=function(Se,me){var Be=this._readableState,ve;return Be.objectMode?ve=!0:typeof Se=="string"&&(me=me||Be.defaultEncoding,me!==Be.encoding&&(Se=x.from(Se,me),me=""),ve=!0),_e(this,Se,me,!1,ve)},ue.prototype.unshift=function(Se){return _e(this,Se,null,!0,!1)};function _e(Se,me,Be,ve,Ae){B("readableAddChunk",me);var Ve=Se._readableState;if(me===null)Ve.reading=!1,J(Se,Ve);else{var Pe;if(Ae||(Pe=ie(Ve,me)),Pe)ne(Se,Pe);else if(Ve.objectMode||me&&me.length>0)if(typeof me!="string"&&!Ve.objectMode&&Object.getPrototypeOf(me)!==x.prototype&&(me=S(me)),ve)Ve.endEmitted?ne(Se,new U):ye(Se,Ve,me,!0);else if(Ve.ended)ne(Se,new F);else{if(Ve.destroyed)return!1;Ve.reading=!1,Ve.decoder&&!Be?(me=Ve.decoder.write(me),Ve.objectMode||me.length!==0?ye(Se,Ve,me,!1):oe(Se,Ve)):ye(Se,Ve,me,!1)}else ve||(Ve.reading=!1,oe(Se,Ve))}return!Ve.ended&&(Ve.length<Ve.highWaterMark||Ve.length===0)}function ye(Se,me,Be,ve){me.flowing&&me.length===0&&!me.sync?(me.awaitDrain=0,Se.emit("data",Be)):(me.length+=me.objectMode?1:Be.length,ve?me.buffer.unshift(Be):me.buffer.push(Be),me.needReadable&&ee(Se)),oe(Se,me)}function ie(Se,me){var Be;return!C(me)&&typeof me!="string"&&me!==void 0&&!Se.objectMode&&(Be=new L("chunk",["string","Buffer","Uint8Array"],me)),Be}ue.prototype.isPaused=function(){return this._readableState.flowing===!1},ue.prototype.setEncoding=function(Se){H||(H=string_decoder.StringDecoder);var me=new H(Se);this._readableState.decoder=me,this._readableState.encoding=this._readableState.decoder.encoding;for(var Be=this._readableState.buffer.head,ve="";Be!==null;)ve+=me.write(Be.data),Be=Be.next;return this._readableState.buffer.clear(),ve!==""&&this._readableState.buffer.push(ve),this._readableState.length=ve.length,this};var W=1073741824;function O(Se){return Se>=W?Se=W:(Se--,Se|=Se>>>1,Se|=Se>>>2,Se|=Se>>>4,Se|=Se>>>8,Se|=Se>>>16,Se++),Se}function z(Se,me){return Se<=0||me.length===0&&me.ended?0:me.objectMode?1:Se!==Se?me.flowing&&me.length?me.buffer.head.data.length:me.length:(Se>me.highWaterMark&&(me.highWaterMark=O(Se)),Se<=me.length?Se:me.ended?me.length:(me.needReadable=!0,0))}ue.prototype.read=function(Se){B("read",Se),Se=parseInt(Se,10);var me=this._readableState,Be=Se;if(Se!==0&&(me.emittedReadable=!1),Se===0&&me.needReadable&&((me.highWaterMark!==0?me.length>=me.highWaterMark:me.length>0)||me.ended))return B("read: emitReadable",me.length,me.ended),me.length===0&&me.ended?xe(this):ee(this),null;if(Se=z(Se,me),Se===0&&me.ended)return me.length===0&&xe(this),null;var ve=me.needReadable;B("need readable",ve),(me.length===0||me.length-Se<me.highWaterMark)&&(ve=!0,B("length less than watermark",ve)),me.ended||me.reading?(ve=!1,B("reading or ended",ve)):ve&&(B("do read"),me.reading=!0,me.sync=!0,me.length===0&&(me.needReadable=!0),this._read(me.highWaterMark),me.sync=!1,me.reading||(Se=z(Be,me)));var Ae;return Se>0?Ae=we(Se,me):Ae=null,Ae===null?(me.needReadable=me.length<=me.highWaterMark,Se=0):(me.length-=Se,me.awaitDrain=0),me.length===0&&(me.ended||(me.needReadable=!0),Be!==Se&&me.ended&&xe(this)),Ae!==null&&this.emit("data",Ae),Ae};function J(Se,me){if(B("onEofChunk"),!me.ended){if(me.decoder){var Be=me.decoder.end();Be&&Be.length&&(me.buffer.push(Be),me.length+=me.objectMode?1:Be.length)}me.ended=!0,me.sync?ee(Se):(me.needReadable=!1,me.emittedReadable||(me.emittedReadable=!0,ae(Se)))}}function ee(Se){var me=Se._readableState;B("emitReadable",me.needReadable,me.emittedReadable),me.needReadable=!1,me.emittedReadable||(B("emitReadable",me.flowing),me.emittedReadable=!0,browser$1$1.nextTick(ae,Se))}function ae(Se){var me=Se._readableState;B("emitReadable_",me.destroyed,me.length,me.ended),!me.destroyed&&(me.length||me.ended)&&(Se.emit("readable"),me.emittedReadable=!1),me.needReadable=!me.flowing&&!me.ended&&me.length<=me.highWaterMark,Ee(Se)}function oe(Se,me){me.readingMore||(me.readingMore=!0,browser$1$1.nextTick(se,Se,me))}function se(Se,me){for(;!me.reading&&!me.ended&&(me.length<me.highWaterMark||me.flowing&&me.length===0);){var Be=me.length;if(B("maybeReadMore read 0"),Se.read(0),Be===me.length)break}me.readingMore=!1}ue.prototype._read=function(Se){ne(this,new j("_read()"))},ue.prototype.pipe=function(Se,me){var Be=this,ve=this._readableState;switch(ve.pipesCount){case 0:ve.pipes=Se;break;case 1:ve.pipes=[ve.pipes,Se];break;default:ve.pipes.push(Se);break}ve.pipesCount+=1,B("pipe count=%d opts=%j",ve.pipesCount,me);var Ae=(!me||me.end!==!1)&&Se!==browser$1$1.stdout&&Se!==browser$1$1.stderr,Ve=Ae?Re:Je;ve.endEmitted?browser$1$1.nextTick(Ve):Be.once("end",Ve),Se.on("unpipe",Pe);function Pe(Ie,be){B("onunpipe"),Ie===Be&&be&&be.hasUnpiped===!1&&(be.hasUnpiped=!0,Ke())}function Re(){B("onend"),Se.end()}var Ne=G(Be);Se.on("drain",Ne);var qe=!1;function Ke(){B("cleanup"),Se.removeListener("close",rt),Se.removeListener("finish",st),Se.removeListener("drain",Ne),Se.removeListener("error",Ge),Se.removeListener("unpipe",Pe),Be.removeListener("end",Re),Be.removeListener("end",Je),Be.removeListener("data",He),qe=!0,ve.awaitDrain&&(!Se._writableState||Se._writableState.needDrain)&&Ne()}Be.on("data",He);function He(Ie){B("ondata");var be=Se.write(Ie);B("dest.write",be),be===!1&&((ve.pipesCount===1&&ve.pipes===Se||ve.pipesCount>1&&ge(ve.pipes,Se)!==-1)&&!qe&&(B("false write response, pause",ve.awaitDrain),ve.awaitDrain++),Be.pause())}function Ge(Ie){B("onerror",Ie),Je(),Se.removeListener("error",Ge),n(Se,"error")===0&&ne(Se,Ie)}X(Se,"error",Ge);function rt(){Se.removeListener("finish",st),Je()}Se.once("close",rt);function st(){B("onfinish"),Se.removeListener("close",rt),Je()}Se.once("finish",st);function Je(){B("unpipe"),Be.unpipe(Se)}return Se.emit("pipe",Be),ve.flowing||(B("pipe resume"),Be.resume()),Se};function G(Se){return function(){var Be=Se._readableState;B("pipeOnDrain",Be.awaitDrain),Be.awaitDrain&&Be.awaitDrain--,Be.awaitDrain===0&&n(Se,"data")&&(Be.flowing=!0,Ee(Se))}}ue.prototype.unpipe=function(Se){var me=this._readableState,Be={hasUnpiped:!1};if(me.pipesCount===0)return this;if(me.pipesCount===1)return Se&&Se!==me.pipes?this:(Se||(Se=me.pipes),me.pipes=null,me.pipesCount=0,me.flowing=!1,Se&&Se.emit("unpipe",this,Be),this);if(!Se){var ve=me.pipes,Ae=me.pipesCount;me.pipes=null,me.pipesCount=0,me.flowing=!1;for(var Ve=0;Ve<Ae;Ve++)ve[Ve].emit("unpipe",this,{hasUnpiped:!1});return this}var Pe=ge(me.pipes,Se);return Pe===-1?this:(me.pipes.splice(Pe,1),me.pipesCount-=1,me.pipesCount===1&&(me.pipes=me.pipes[0]),Se.emit("unpipe",this,Be),this)},ue.prototype.on=function(Se,me){var Be=_.prototype.on.call(this,Se,me),ve=this._readableState;return Se==="data"?(ve.readableListening=this.listenerCount("readable")>0,ve.flowing!==!1&&this.resume()):Se==="readable"&&!ve.endEmitted&&!ve.readableListening&&(ve.readableListening=ve.needReadable=!0,ve.flowing=!1,ve.emittedReadable=!1,B("on readable",ve.length,ve.reading),ve.length?ee(this):ve.reading||browser$1$1.nextTick(te,this)),Be},ue.prototype.addListener=ue.prototype.on,ue.prototype.removeListener=function(Se,me){var Be=_.prototype.removeListener.call(this,Se,me);return Se==="readable"&&browser$1$1.nextTick(q,this),Be},ue.prototype.removeAllListeners=function(Se){var me=_.prototype.removeAllListeners.apply(this,arguments);return(Se==="readable"||Se===void 0)&&browser$1$1.nextTick(q,this),me};function q(Se){var me=Se._readableState;me.readableListening=Se.listenerCount("readable")>0,me.resumeScheduled&&!me.paused?me.flowing=!0:Se.listenerCount("data")>0&&Se.resume()}function te(Se){B("readable nexttick read 0"),Se.read(0)}ue.prototype.resume=function(){var Se=this._readableState;return Se.flowing||(B("resume"),Se.flowing=!Se.readableListening,fe(this,Se)),Se.paused=!1,this};function fe(Se,me){me.resumeScheduled||(me.resumeScheduled=!0,browser$1$1.nextTick(he,Se,me))}function he(Se,me){B("resume",me.reading),me.reading||Se.read(0),me.resumeScheduled=!1,Se.emit("resume"),Ee(Se),me.flowing&&!me.reading&&Se.read(0)}ue.prototype.pause=function(){return B("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(B("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Ee(Se){var me=Se._readableState;for(B("flow",me.flowing);me.flowing&&Se.read()!==null;);}ue.prototype.wrap=function(Se){var me=this,Be=this._readableState,ve=!1;Se.on("end",function(){if(B("wrapped end"),Be.decoder&&!Be.ended){var Pe=Be.decoder.end();Pe&&Pe.length&&me.push(Pe)}me.push(null)}),Se.on("data",function(Pe){if(B("wrapped data"),Be.decoder&&(Pe=Be.decoder.write(Pe)),!(Be.objectMode&&Pe==null)&&!(!Be.objectMode&&(!Pe||!Pe.length))){var Re=me.push(Pe);Re||(ve=!0,Se.pause())}});for(var Ae in Se)this[Ae]===void 0&&typeof Se[Ae]=="function"&&(this[Ae]=function(Re){return function(){return Se[Re].apply(Se,arguments)}}(Ae));for(var Ve=0;Ve<re.length;Ve++)Se.on(re[Ve],this.emit.bind(this,re[Ve]));return this._read=function(Pe){B("wrapped _read",Pe),ve&&(ve=!1,Se.resume())},this},typeof Symbol=="function"&&(ue.prototype[Symbol.asyncIterator]=function(){return Y===void 0&&(Y=requireAsync_iterator()),Y(this)}),Object.defineProperty(ue.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ue.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ue.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(me){this._readableState&&(this._readableState.flowing=me)}}),ue._fromList=we,Object.defineProperty(ue.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function we(Se,me){if(me.length===0)return null;var Be;return me.objectMode?Be=me.buffer.shift():!Se||Se>=me.length?(me.decoder?Be=me.buffer.join(""):me.buffer.length===1?Be=me.buffer.first():Be=me.buffer.concat(me.length),me.buffer.clear()):Be=me.buffer.consume(Se,me.decoder),Be}function xe(Se){var me=Se._readableState;B("endReadable",me.endEmitted),me.endEmitted||(me.ended=!0,browser$1$1.nextTick($e,me,Se))}function $e(Se,me){if(B("endReadableNT",Se.endEmitted,Se.length),!Se.endEmitted&&Se.length===0&&(Se.endEmitted=!0,me.readable=!1,me.emit("end"),Se.autoDestroy)){var Be=me._writableState;(!Be||Be.autoDestroy&&Be.finished)&&me.destroy()}}typeof Symbol=="function"&&(ue.from=function(Se,me){return Z===void 0&&(Z=requireFromBrowser()),Z(ue,Se,me)});function ge(Se,me){for(var Be=0,ve=Se.length;Be<ve;Be++)if(Se[Be]===me)return Be;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=T;var t=requireErrorsBrowser().codes,n=t.ERR_METHOD_NOT_IMPLEMENTED,_=t.ERR_MULTIPLE_CALLBACK,x=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,E=t.ERR_TRANSFORM_WITH_LENGTH_0,S=require_stream_duplex();inherits_browserExports(T,S);function C(I,D){var M=this._transformState;M.transforming=!1;var V=M.writecb;if(V===null)return this.emit("error",new _);M.writechunk=null,M.writecb=null,D!=null&&this.push(D),V(I);var L=this._readableState;L.reading=!1,(L.needReadable||L.length<L.highWaterMark)&&this._read(L.highWaterMark)}function T(I){if(!(this instanceof T))return new T(I);S.call(this,I),this._transformState={afterTransform:C.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,I&&(typeof I.transform=="function"&&(this._transform=I.transform),typeof I.flush=="function"&&(this._flush=I.flush)),this.on("prefinish",B)}function B(){var I=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(D,M){A(I,D,M)}):A(this,null,null)}T.prototype.push=function(I,D){return this._transformState.needTransform=!1,S.prototype.push.call(this,I,D)},T.prototype._transform=function(I,D,M){M(new n("_transform()"))},T.prototype._write=function(I,D,M){var V=this._transformState;if(V.writecb=M,V.writechunk=I,V.writeencoding=D,!V.transforming){var L=this._readableState;(V.needTransform||L.needReadable||L.length<L.highWaterMark)&&this._read(L.highWaterMark)}},T.prototype._read=function(I){var D=this._transformState;D.writechunk!==null&&!D.transforming?(D.transforming=!0,this._transform(D.writechunk,D.writeencoding,D.afterTransform)):D.needTransform=!0},T.prototype._destroy=function(I,D){S.prototype._destroy.call(this,I,function(M){D(M)})};function A(I,D,M){if(D)return I.emit("error",D);if(M!=null&&I.push(M),I._writableState.length)throw new E;if(I._transformState.transforming)throw new x;return I.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=n;var t=require_stream_transform();inherits_browserExports(n,t);function n(_){if(!(this instanceof n))return new n(_);t.call(this,_)}return n.prototype._transform=function(_,x,E){E(null,_)},_stream_passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var t;function n(M){var V=!1;return function(){V||(V=!0,M.apply(void 0,arguments))}}var _=requireErrorsBrowser().codes,x=_.ERR_MISSING_ARGS,E=_.ERR_STREAM_DESTROYED;function S(M){if(M)throw M}function C(M){return M.setHeader&&typeof M.abort=="function"}function T(M,V,L,F){F=n(F);var j=!1;M.on("close",function(){j=!0}),t===void 0&&(t=requireEndOfStream()),t(M,{readable:V,writable:L},function(H){if(H)return F(H);j=!0,F()});var U=!1;return function(H){if(!j&&!U){if(U=!0,C(M))return M.abort();if(typeof M.destroy=="function")return M.destroy();F(H||new E("pipe"))}}}function B(M){M()}function A(M,V){return M.pipe(V)}function I(M){return!M.length||typeof M[M.length-1]!="function"?S:M.pop()}function D(){for(var M=arguments.length,V=new Array(M),L=0;L<M;L++)V[L]=arguments[L];var F=I(V);if(Array.isArray(V[0])&&(V=V[0]),V.length<2)throw new x("streams");var j,U=V.map(function(H,Y){var Z=Y<V.length-1,ne=Y>0;return T(H,Z,ne,function(re){j||(j=re),re&&U.forEach(B),!Z&&(U.forEach(B),F(j))})});return V.reduce(A)}return pipeline_1=D,pipeline_1}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(t,n){n=t.exports=require_stream_readable(),n.Stream=n,n.Readable=n,n.Writable=require_stream_writable(),n.Duplex=require_stream_duplex(),n.Transform=require_stream_transform(),n.PassThrough=require_stream_passthrough(),n.finished=requireEndOfStream(),n.pipeline=requirePipeline()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var t=safeBufferExports.Buffer,n=requireReadableBrowser().Transform,_=inherits_browserExports;function x(S,C){if(!t.isBuffer(S)&&typeof S!="string")throw new TypeError(C+" must be a string or a buffer")}function E(S){n.call(this),this._block=t.allocUnsafe(S),this._blockSize=S,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return _(E,n),E.prototype._transform=function(S,C,T){var B=null;try{this.update(S,C)}catch(A){B=A}T(B)},E.prototype._flush=function(S){var C=null;try{this.push(this.digest())}catch(T){C=T}S(C)},E.prototype.update=function(S,C){if(x(S,"Data"),this._finalized)throw new Error("Digest already called");t.isBuffer(S)||(S=t.from(S,C));for(var T=this._block,B=0;this._blockOffset+S.length-B>=this._blockSize;){for(var A=this._blockOffset;A<this._blockSize;)T[A++]=S[B++];this._update(),this._blockOffset=0}for(;B<S.length;)T[this._blockOffset++]=S[B++];for(var I=0,D=S.length*8;D>0;++I)this._length[I]+=D,D=this._length[I]/4294967296|0,D>0&&(this._length[I]-=4294967296*D);return this},E.prototype._update=function(){throw new Error("_update is not implemented")},E.prototype.digest=function(S){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var C=this._digest();S!==void 0&&(C=C.toString(S)),this._block.fill(0),this._blockOffset=0;for(var T=0;T<4;++T)this._length[T]=0;return C},E.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=E,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var t=inherits_browserExports,n=requireHashBase(),_=safeBufferExports.Buffer,x=new Array(16);function E(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}t(E,n),E.prototype._update=function(){for(var I=x,D=0;D<16;++D)I[D]=this._block.readInt32LE(D*4);var M=this._a,V=this._b,L=this._c,F=this._d;M=C(M,V,L,F,I[0],3614090360,7),F=C(F,M,V,L,I[1],3905402710,12),L=C(L,F,M,V,I[2],606105819,17),V=C(V,L,F,M,I[3],3250441966,22),M=C(M,V,L,F,I[4],4118548399,7),F=C(F,M,V,L,I[5],1200080426,12),L=C(L,F,M,V,I[6],2821735955,17),V=C(V,L,F,M,I[7],4249261313,22),M=C(M,V,L,F,I[8],1770035416,7),F=C(F,M,V,L,I[9],2336552879,12),L=C(L,F,M,V,I[10],4294925233,17),V=C(V,L,F,M,I[11],2304563134,22),M=C(M,V,L,F,I[12],1804603682,7),F=C(F,M,V,L,I[13],4254626195,12),L=C(L,F,M,V,I[14],2792965006,17),V=C(V,L,F,M,I[15],1236535329,22),M=T(M,V,L,F,I[1],4129170786,5),F=T(F,M,V,L,I[6],3225465664,9),L=T(L,F,M,V,I[11],643717713,14),V=T(V,L,F,M,I[0],3921069994,20),M=T(M,V,L,F,I[5],3593408605,5),F=T(F,M,V,L,I[10],38016083,9),L=T(L,F,M,V,I[15],3634488961,14),V=T(V,L,F,M,I[4],3889429448,20),M=T(M,V,L,F,I[9],568446438,5),F=T(F,M,V,L,I[14],3275163606,9),L=T(L,F,M,V,I[3],4107603335,14),V=T(V,L,F,M,I[8],1163531501,20),M=T(M,V,L,F,I[13],2850285829,5),F=T(F,M,V,L,I[2],4243563512,9),L=T(L,F,M,V,I[7],1735328473,14),V=T(V,L,F,M,I[12],2368359562,20),M=B(M,V,L,F,I[5],4294588738,4),F=B(F,M,V,L,I[8],2272392833,11),L=B(L,F,M,V,I[11],1839030562,16),V=B(V,L,F,M,I[14],4259657740,23),M=B(M,V,L,F,I[1],2763975236,4),F=B(F,M,V,L,I[4],1272893353,11),L=B(L,F,M,V,I[7],4139469664,16),V=B(V,L,F,M,I[10],3200236656,23),M=B(M,V,L,F,I[13],681279174,4),F=B(F,M,V,L,I[0],3936430074,11),L=B(L,F,M,V,I[3],3572445317,16),V=B(V,L,F,M,I[6],76029189,23),M=B(M,V,L,F,I[9],3654602809,4),F=B(F,M,V,L,I[12],3873151461,11),L=B(L,F,M,V,I[15],530742520,16),V=B(V,L,F,M,I[2],3299628645,23),M=A(M,V,L,F,I[0],4096336452,6),F=A(F,M,V,L,I[7],1126891415,10),L=A(L,F,M,V,I[14],2878612391,15),V=A(V,L,F,M,I[5],4237533241,21),M=A(M,V,L,F,I[12],1700485571,6),F=A(F,M,V,L,I[3],2399980690,10),L=A(L,F,M,V,I[10],4293915773,15),V=A(V,L,F,M,I[1],2240044497,21),M=A(M,V,L,F,I[8],1873313359,6),F=A(F,M,V,L,I[15],4264355552,10),L=A(L,F,M,V,I[6],2734768916,15),V=A(V,L,F,M,I[13],1309151649,21),M=A(M,V,L,F,I[4],4149444226,6),F=A(F,M,V,L,I[11],3174756917,10),L=A(L,F,M,V,I[2],718787259,15),V=A(V,L,F,M,I[9],3951481745,21),this._a=this._a+M|0,this._b=this._b+V|0,this._c=this._c+L|0,this._d=this._d+F|0},E.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var I=_.allocUnsafe(16);return I.writeInt32LE(this._a,0),I.writeInt32LE(this._b,4),I.writeInt32LE(this._c,8),I.writeInt32LE(this._d,12),I};function S(I,D){return I<<D|I>>>32-D}function C(I,D,M,V,L,F,j){return S(I+(D&M|~D&V)+L+F|0,j)+D|0}function T(I,D,M,V,L,F,j){return S(I+(D&V|M&~V)+L+F|0,j)+D|0}function B(I,D,M,V,L,F,j){return S(I+(D^M^V)+L+F|0,j)+D|0}function A(I,D,M,V,L,F,j){return S(I+(M^(D|~V))+L+F|0,j)+D|0}return md5_js=E,md5_js}var ripemd160$2,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160$2;hasRequiredRipemd160=1;var t=buffer$3.Buffer,n=inherits_browserExports,_=requireHashBase(),x=new Array(16),E=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],S=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],C=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],T=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],B=[0,1518500249,1859775393,2400959708,2840853838],A=[1352829926,1548603684,1836072691,2053994217,0];function I(){_.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}n(I,_),I.prototype._update=function(){for(var U=x,H=0;H<16;++H)U[H]=this._block.readInt32LE(H*4);for(var Y=this._a|0,Z=this._b|0,ne=this._c|0,re=this._d|0,X=this._e|0,ce=this._a|0,ue=this._b|0,_e=this._c|0,ye=this._d|0,ie=this._e|0,W=0;W<80;W+=1){var O,z;W<16?(O=M(Y,Z,ne,re,X,U[E[W]],B[0],C[W]),z=j(ce,ue,_e,ye,ie,U[S[W]],A[0],T[W])):W<32?(O=V(Y,Z,ne,re,X,U[E[W]],B[1],C[W]),z=F(ce,ue,_e,ye,ie,U[S[W]],A[1],T[W])):W<48?(O=L(Y,Z,ne,re,X,U[E[W]],B[2],C[W]),z=L(ce,ue,_e,ye,ie,U[S[W]],A[2],T[W])):W<64?(O=F(Y,Z,ne,re,X,U[E[W]],B[3],C[W]),z=V(ce,ue,_e,ye,ie,U[S[W]],A[3],T[W])):(O=j(Y,Z,ne,re,X,U[E[W]],B[4],C[W]),z=M(ce,ue,_e,ye,ie,U[S[W]],A[4],T[W])),Y=X,X=re,re=D(ne,10),ne=Z,Z=O,ce=ie,ie=ye,ye=D(_e,10),_e=ue,ue=z}var J=this._b+ne+ye|0;this._b=this._c+re+ie|0,this._c=this._d+X+ce|0,this._d=this._e+Y+ue|0,this._e=this._a+Z+_e|0,this._a=J},I.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var U=t.alloc?t.alloc(20):new t(20);return U.writeInt32LE(this._a,0),U.writeInt32LE(this._b,4),U.writeInt32LE(this._c,8),U.writeInt32LE(this._d,12),U.writeInt32LE(this._e,16),U};function D(U,H){return U<<H|U>>>32-H}function M(U,H,Y,Z,ne,re,X,ce){return D(U+(H^Y^Z)+re+X|0,ce)+ne|0}function V(U,H,Y,Z,ne,re,X,ce){return D(U+(H&Y|~H&Z)+re+X|0,ce)+ne|0}function L(U,H,Y,Z,ne,re,X,ce){return D(U+((H|~Y)^Z)+re+X|0,ce)+ne|0}function F(U,H,Y,Z,ne,re,X,ce){return D(U+(H&Z|Y&~Z)+re+X|0,ce)+ne|0}function j(U,H,Y,Z,ne,re,X,ce){return D(U+(H^(Y|~Z))+re+X|0,ce)+ne|0}return ripemd160$2=I,ripemd160$2}var sha_js={exports:{}},hash$5,hasRequiredHash;function requireHash(){if(hasRequiredHash)return hash$5;hasRequiredHash=1;var t=safeBufferExports.Buffer;function n(_,x){this._block=t.alloc(_),this._finalSize=x,this._blockSize=_,this._len=0}return n.prototype.update=function(_,x){typeof _=="string"&&(x=x||"utf8",_=t.from(_,x));for(var E=this._block,S=this._blockSize,C=_.length,T=this._len,B=0;B<C;){for(var A=T%S,I=Math.min(C-B,S-A),D=0;D<I;D++)E[A+D]=_[B+D];T+=I,B+=I,T%S===0&&this._update(E)}return this._len+=C,this},n.prototype.digest=function(_){var x=this._len%this._blockSize;this._block[x]=128,this._block.fill(0,x+1),x>=this._finalSize&&(this._update(this._block),this._block.fill(0));var E=this._len*8;if(E<=4294967295)this._block.writeUInt32BE(E,this._blockSize-4);else{var S=(E&4294967295)>>>0,C=(E-S)/4294967296;this._block.writeUInt32BE(C,this._blockSize-8),this._block.writeUInt32BE(S,this._blockSize-4)}this._update(this._block);var T=this._hash();return _?T.toString(_):T},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$5=n,hash$5}var sha$3,hasRequiredSha;function requireSha(){if(hasRequiredSha)return sha$3;hasRequiredSha=1;var t=inherits_browserExports,n=requireHash(),_=safeBufferExports.Buffer,x=[1518500249,1859775393,-1894007588,-899497514],E=new Array(80);function S(){this.init(),this._w=E,n.call(this,64,56)}t(S,n),S.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function C(A){return A<<5|A>>>27}function T(A){return A<<30|A>>>2}function B(A,I,D,M){return A===0?I&D|~I&M:A===2?I&D|I&M|D&M:I^D^M}return S.prototype._update=function(A){for(var I=this._w,D=this._a|0,M=this._b|0,V=this._c|0,L=this._d|0,F=this._e|0,j=0;j<16;++j)I[j]=A.readInt32BE(j*4);for(;j<80;++j)I[j]=I[j-3]^I[j-8]^I[j-14]^I[j-16];for(var U=0;U<80;++U){var H=~~(U/20),Y=C(D)+B(H,M,V,L)+F+I[U]+x[H]|0;F=L,L=V,V=T(M),M=D,D=Y}this._a=D+this._a|0,this._b=M+this._b|0,this._c=V+this._c|0,this._d=L+this._d|0,this._e=F+this._e|0},S.prototype._hash=function(){var A=_.allocUnsafe(20);return A.writeInt32BE(this._a|0,0),A.writeInt32BE(this._b|0,4),A.writeInt32BE(this._c|0,8),A.writeInt32BE(this._d|0,12),A.writeInt32BE(this._e|0,16),A},sha$3=S,sha$3}var sha1$1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1$1;hasRequiredSha1=1;var t=inherits_browserExports,n=requireHash(),_=safeBufferExports.Buffer,x=[1518500249,1859775393,-1894007588,-899497514],E=new Array(80);function S(){this.init(),this._w=E,n.call(this,64,56)}t(S,n),S.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function C(I){return I<<1|I>>>31}function T(I){return I<<5|I>>>27}function B(I){return I<<30|I>>>2}function A(I,D,M,V){return I===0?D&M|~D&V:I===2?D&M|D&V|M&V:D^M^V}return S.prototype._update=function(I){for(var D=this._w,M=this._a|0,V=this._b|0,L=this._c|0,F=this._d|0,j=this._e|0,U=0;U<16;++U)D[U]=I.readInt32BE(U*4);for(;U<80;++U)D[U]=C(D[U-3]^D[U-8]^D[U-14]^D[U-16]);for(var H=0;H<80;++H){var Y=~~(H/20),Z=T(M)+A(Y,V,L,F)+j+D[H]+x[Y]|0;j=F,F=L,L=B(V),V=M,M=Z}this._a=M+this._a|0,this._b=V+this._b|0,this._c=L+this._c|0,this._d=F+this._d|0,this._e=j+this._e|0},S.prototype._hash=function(){var I=_.allocUnsafe(20);return I.writeInt32BE(this._a|0,0),I.writeInt32BE(this._b|0,4),I.writeInt32BE(this._c|0,8),I.writeInt32BE(this._d|0,12),I.writeInt32BE(this._e|0,16),I},sha1$1=S,sha1$1}var sha256$9,hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$9;hasRequiredSha256=1;var t=inherits_browserExports,n=requireHash(),_=safeBufferExports.Buffer,x=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],E=new Array(64);function S(){this.init(),this._w=E,n.call(this,64,56)}t(S,n),S.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function C(M,V,L){return L^M&(V^L)}function T(M,V,L){return M&V|L&(M|V)}function B(M){return(M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10)}function A(M){return(M>>>6|M<<26)^(M>>>11|M<<21)^(M>>>25|M<<7)}function I(M){return(M>>>7|M<<25)^(M>>>18|M<<14)^M>>>3}function D(M){return(M>>>17|M<<15)^(M>>>19|M<<13)^M>>>10}return S.prototype._update=function(M){for(var V=this._w,L=this._a|0,F=this._b|0,j=this._c|0,U=this._d|0,H=this._e|0,Y=this._f|0,Z=this._g|0,ne=this._h|0,re=0;re<16;++re)V[re]=M.readInt32BE(re*4);for(;re<64;++re)V[re]=D(V[re-2])+V[re-7]+I(V[re-15])+V[re-16]|0;for(var X=0;X<64;++X){var ce=ne+A(H)+C(H,Y,Z)+x[X]+V[X]|0,ue=B(L)+T(L,F,j)|0;ne=Z,Z=Y,Y=H,H=U+ce|0,U=j,j=F,F=L,L=ce+ue|0}this._a=L+this._a|0,this._b=F+this._b|0,this._c=j+this._c|0,this._d=U+this._d|0,this._e=H+this._e|0,this._f=Y+this._f|0,this._g=Z+this._g|0,this._h=ne+this._h|0},S.prototype._hash=function(){var M=_.allocUnsafe(32);return M.writeInt32BE(this._a,0),M.writeInt32BE(this._b,4),M.writeInt32BE(this._c,8),M.writeInt32BE(this._d,12),M.writeInt32BE(this._e,16),M.writeInt32BE(this._f,20),M.writeInt32BE(this._g,24),M.writeInt32BE(this._h,28),M},sha256$9=S,sha256$9}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var t=inherits_browserExports,n=requireSha256(),_=requireHash(),x=safeBufferExports.Buffer,E=new Array(64);function S(){this.init(),this._w=E,_.call(this,64,56)}return t(S,n),S.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},S.prototype._hash=function(){var C=x.allocUnsafe(28);return C.writeInt32BE(this._a,0),C.writeInt32BE(this._b,4),C.writeInt32BE(this._c,8),C.writeInt32BE(this._d,12),C.writeInt32BE(this._e,16),C.writeInt32BE(this._f,20),C.writeInt32BE(this._g,24),C},sha224$1=S,sha224$1}var sha512$3,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$3;hasRequiredSha512=1;var t=inherits_browserExports,n=requireHash(),_=safeBufferExports.Buffer,x=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],E=new Array(160);function S(){this.init(),this._w=E,n.call(this,128,112)}t(S,n),S.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function C(F,j,U){return U^F&(j^U)}function T(F,j,U){return F&j|U&(F|j)}function B(F,j){return(F>>>28|j<<4)^(j>>>2|F<<30)^(j>>>7|F<<25)}function A(F,j){return(F>>>14|j<<18)^(F>>>18|j<<14)^(j>>>9|F<<23)}function I(F,j){return(F>>>1|j<<31)^(F>>>8|j<<24)^F>>>7}function D(F,j){return(F>>>1|j<<31)^(F>>>8|j<<24)^(F>>>7|j<<25)}function M(F,j){return(F>>>19|j<<13)^(j>>>29|F<<3)^F>>>6}function V(F,j){return(F>>>19|j<<13)^(j>>>29|F<<3)^(F>>>6|j<<26)}function L(F,j){return F>>>0<j>>>0?1:0}return S.prototype._update=function(F){for(var j=this._w,U=this._ah|0,H=this._bh|0,Y=this._ch|0,Z=this._dh|0,ne=this._eh|0,re=this._fh|0,X=this._gh|0,ce=this._hh|0,ue=this._al|0,_e=this._bl|0,ye=this._cl|0,ie=this._dl|0,W=this._el|0,O=this._fl|0,z=this._gl|0,J=this._hl|0,ee=0;ee<32;ee+=2)j[ee]=F.readInt32BE(ee*4),j[ee+1]=F.readInt32BE(ee*4+4);for(;ee<160;ee+=2){var ae=j[ee-30],oe=j[ee-15*2+1],se=I(ae,oe),G=D(oe,ae);ae=j[ee-2*2],oe=j[ee-2*2+1];var q=M(ae,oe),te=V(oe,ae),fe=j[ee-7*2],he=j[ee-7*2+1],Ee=j[ee-16*2],we=j[ee-16*2+1],xe=G+he|0,$e=se+fe+L(xe,G)|0;xe=xe+te|0,$e=$e+q+L(xe,te)|0,xe=xe+we|0,$e=$e+Ee+L(xe,we)|0,j[ee]=$e,j[ee+1]=xe}for(var ge=0;ge<160;ge+=2){$e=j[ge],xe=j[ge+1];var Se=T(U,H,Y),me=T(ue,_e,ye),Be=B(U,ue),ve=B(ue,U),Ae=A(ne,W),Ve=A(W,ne),Pe=x[ge],Re=x[ge+1],Ne=C(ne,re,X),qe=C(W,O,z),Ke=J+Ve|0,He=ce+Ae+L(Ke,J)|0;Ke=Ke+qe|0,He=He+Ne+L(Ke,qe)|0,Ke=Ke+Re|0,He=He+Pe+L(Ke,Re)|0,Ke=Ke+xe|0,He=He+$e+L(Ke,xe)|0;var Ge=ve+me|0,rt=Be+Se+L(Ge,ve)|0;ce=X,J=z,X=re,z=O,re=ne,O=W,W=ie+Ke|0,ne=Z+He+L(W,ie)|0,Z=Y,ie=ye,Y=H,ye=_e,H=U,_e=ue,ue=Ke+Ge|0,U=He+rt+L(ue,Ke)|0}this._al=this._al+ue|0,this._bl=this._bl+_e|0,this._cl=this._cl+ye|0,this._dl=this._dl+ie|0,this._el=this._el+W|0,this._fl=this._fl+O|0,this._gl=this._gl+z|0,this._hl=this._hl+J|0,this._ah=this._ah+U+L(this._al,ue)|0,this._bh=this._bh+H+L(this._bl,_e)|0,this._ch=this._ch+Y+L(this._cl,ye)|0,this._dh=this._dh+Z+L(this._dl,ie)|0,this._eh=this._eh+ne+L(this._el,W)|0,this._fh=this._fh+re+L(this._fl,O)|0,this._gh=this._gh+X+L(this._gl,z)|0,this._hh=this._hh+ce+L(this._hl,J)|0},S.prototype._hash=function(){var F=_.allocUnsafe(64);function j(U,H,Y){F.writeInt32BE(U,Y),F.writeInt32BE(H,Y+4)}return j(this._ah,this._al,0),j(this._bh,this._bl,8),j(this._ch,this._cl,16),j(this._dh,this._dl,24),j(this._eh,this._el,32),j(this._fh,this._fl,40),j(this._gh,this._gl,48),j(this._hh,this._hl,56),F},sha512$3=S,sha512$3}var sha384$2,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$2;hasRequiredSha384=1;var t=inherits_browserExports,n=requireSha512(),_=requireHash(),x=safeBufferExports.Buffer,E=new Array(160);function S(){this.init(),this._w=E,_.call(this,128,112)}return t(S,n),S.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},S.prototype._hash=function(){var C=x.allocUnsafe(48);function T(B,A,I){C.writeInt32BE(B,I),C.writeInt32BE(A,I+4)}return T(this._ah,this._al,0),T(this._bh,this._bl,8),T(this._ch,this._cl,16),T(this._dh,this._dl,24),T(this._eh,this._el,32),T(this._fh,this._fl,40),C},sha384$2=S,sha384$2}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var t=sha_js.exports=function(_){_=_.toLowerCase();var x=t[_];if(!x)throw new Error(_+" is not supported (we accept pull requests)");return new x};return t.sha=requireSha(),t.sha1=requireSha1(),t.sha224=requireSha224(),t.sha256=requireSha256(),t.sha384=requireSha384(),t.sha512=requireSha512(),sha_js.exports}function BufferList(){this.head=null,this.tail=null,this.length=0}BufferList.prototype.push=function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length};BufferList.prototype.unshift=function(t){var n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length};BufferList.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}};BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0};BufferList.prototype.join=function(t){if(this.length===0)return"";for(var n=this.head,_=""+n.data;n=n.next;)_+=t+n.data;return _};BufferList.prototype.concat=function(t){if(this.length===0)return buffer$3.Buffer.alloc(0);if(this.length===1)return this.head.data;for(var n=buffer$3.Buffer.allocUnsafe(t>>>0),_=this.head,x=0;_;)_.data.copy(n,x),x+=_.data.length,_=_.next;return n};Readable.ReadableState=ReadableState;var debug$1=util$9.debuglog("stream");util$9.inherits(Readable,EventEmitter$5);function prependListener(t,n,_){if(typeof t.prependListener=="function")return t.prependListener(n,_);!t._events||!t._events[n]?t.on(n,_):Array.isArray(t._events[n])?t._events[n].unshift(_):t._events[n]=[_,t._events[n]]}function listenerCount(t,n){return t.listeners(n).length}function ReadableState(t,n){t=t||{},this.objectMode=!!t.objectMode,n instanceof Duplex&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var _=t.highWaterMark,x=this.objectMode?16:16*1024;this.highWaterMark=_||_===0?_:x,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new StringDecoder_1(t.encoding),this.encoding=t.encoding)}function Readable(t){if(!(this instanceof Readable))return new Readable(t);this._readableState=new ReadableState(t,this),this.readable=!0,t&&typeof t.read=="function"&&(this._read=t.read),EventEmitter$5.call(this)}Readable.prototype.push=function(t,n){var _=this._readableState;return!_.objectMode&&typeof t=="string"&&(n=n||_.defaultEncoding,n!==_.encoding&&(t=Buffer$5.from(t,n),n="")),readableAddChunk(this,_,t,n,!1)};Readable.prototype.unshift=function(t){var n=this._readableState;return readableAddChunk(this,n,t,"",!0)};Readable.prototype.isPaused=function(){return this._readableState.flowing===!1};function readableAddChunk(t,n,_,x,E){var S=chunkInvalid(n,_);if(S)t.emit("error",S);else if(_===null)n.reading=!1,onEofChunk(t,n);else if(n.objectMode||_&&_.length>0)if(n.ended&&!E){var C=new Error("stream.push() after EOF");t.emit("error",C)}else if(n.endEmitted&&E){var T=new Error("stream.unshift() after end event");t.emit("error",T)}else{var B;n.decoder&&!E&&!x&&(_=n.decoder.write(_),B=!n.objectMode&&_.length===0),E||(n.reading=!1),B||(n.flowing&&n.length===0&&!n.sync?(t.emit("data",_),t.read(0)):(n.length+=n.objectMode?1:_.length,E?n.buffer.unshift(_):n.buffer.push(_),n.needReadable&&emitReadable(t))),maybeReadMore(t,n)}else E||(n.reading=!1);return needMoreData(n)}function needMoreData(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}Readable.prototype.setEncoding=function(t){return this._readableState.decoder=new StringDecoder_1(t),this._readableState.encoding=t,this};var MAX_HWM=8388608;function computeNewHighWaterMark(t){return t>=MAX_HWM?t=MAX_HWM:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function howMuchToRead(t,n){return t<=0||n.length===0&&n.ended?0:n.objectMode?1:t!==t?n.flowing&&n.length?n.buffer.head.data.length:n.length:(t>n.highWaterMark&&(n.highWaterMark=computeNewHighWaterMark(t)),t<=n.length?t:n.ended?n.length:(n.needReadable=!0,0))}Readable.prototype.read=function(t){debug$1("read",t),t=parseInt(t,10);var n=this._readableState,_=t;if(t!==0&&(n.emittedReadable=!1),t===0&&n.needReadable&&(n.length>=n.highWaterMark||n.ended))return debug$1("read: emitReadable",n.length,n.ended),n.length===0&&n.ended?endReadable(this):emitReadable(this),null;if(t=howMuchToRead(t,n),t===0&&n.ended)return n.length===0&&endReadable(this),null;var x=n.needReadable;debug$1("need readable",x),(n.length===0||n.length-t<n.highWaterMark)&&(x=!0,debug$1("length less than watermark",x)),n.ended||n.reading?(x=!1,debug$1("reading or ended",x)):x&&(debug$1("do read"),n.reading=!0,n.sync=!0,n.length===0&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,n.reading||(t=howMuchToRead(_,n)));var E;return t>0?E=fromList(t,n):E=null,E===null?(n.needReadable=!0,t=0):n.length-=t,n.length===0&&(n.ended||(n.needReadable=!0),_!==t&&n.ended&&endReadable(this)),E!==null&&this.emit("data",E),E};function chunkInvalid(t,n){var _=null;return!Buffer$5.isBuffer(n)&&typeof n!="string"&&n!==null&&n!==void 0&&!t.objectMode&&(_=new TypeError("Invalid non-string/buffer chunk")),_}function onEofChunk(t,n){if(!n.ended){if(n.decoder){var _=n.decoder.end();_&&_.length&&(n.buffer.push(_),n.length+=n.objectMode?1:_.length)}n.ended=!0,emitReadable(t)}}function emitReadable(t){var n=t._readableState;n.needReadable=!1,n.emittedReadable||(debug$1("emitReadable",n.flowing),n.emittedReadable=!0,n.sync?browserExports$1.nextTick(emitReadable_,t):emitReadable_(t))}function emitReadable_(t){debug$1("emit readable"),t.emit("readable"),flow(t)}function maybeReadMore(t,n){n.readingMore||(n.readingMore=!0,browserExports$1.nextTick(maybeReadMore_,t,n))}function maybeReadMore_(t,n){for(var _=n.length;!n.reading&&!n.flowing&&!n.ended&&n.length<n.highWaterMark&&(debug$1("maybeReadMore read 0"),t.read(0),_!==n.length);)_=n.length;n.readingMore=!1}Readable.prototype._read=function(t){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(t,n){var _=this,x=this._readableState;switch(x.pipesCount){case 0:x.pipes=t;break;case 1:x.pipes=[x.pipes,t];break;default:x.pipes.push(t);break}x.pipesCount+=1,debug$1("pipe count=%d opts=%j",x.pipesCount,n);var E=!n||n.end!==!1,S=E?T:I;x.endEmitted?browserExports$1.nextTick(S):_.once("end",S),t.on("unpipe",C);function C(U){debug$1("onunpipe"),U===_&&I()}function T(){debug$1("onend"),t.end()}var B=pipeOnDrain(_);t.on("drain",B);var A=!1;function I(){debug$1("cleanup"),t.removeListener("close",L),t.removeListener("finish",F),t.removeListener("drain",B),t.removeListener("error",V),t.removeListener("unpipe",C),_.removeListener("end",T),_.removeListener("end",I),_.removeListener("data",M),A=!0,x.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&B()}var D=!1;_.on("data",M);function M(U){debug$1("ondata"),D=!1;var H=t.write(U);H===!1&&!D&&((x.pipesCount===1&&x.pipes===t||x.pipesCount>1&&indexOf(x.pipes,t)!==-1)&&!A&&(debug$1("false write response, pause",_._readableState.awaitDrain),_._readableState.awaitDrain++,D=!0),_.pause())}function V(U){debug$1("onerror",U),j(),t.removeListener("error",V),listenerCount(t,"error")===0&&t.emit("error",U)}prependListener(t,"error",V);function L(){t.removeListener("finish",F),j()}t.once("close",L);function F(){debug$1("onfinish"),t.removeListener("close",L),j()}t.once("finish",F);function j(){debug$1("unpipe"),_.unpipe(t)}return t.emit("pipe",_),x.flowing||(debug$1("pipe resume"),_.resume()),t};function pipeOnDrain(t){return function(){var n=t._readableState;debug$1("pipeOnDrain",n.awaitDrain),n.awaitDrain&&n.awaitDrain--,n.awaitDrain===0&&t.listeners("data").length&&(n.flowing=!0,flow(t))}}Readable.prototype.unpipe=function(t){var n=this._readableState;if(n.pipesCount===0)return this;if(n.pipesCount===1)return t&&t!==n.pipes?this:(t||(t=n.pipes),n.pipes=null,n.pipesCount=0,n.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var _=n.pipes,x=n.pipesCount;n.pipes=null,n.pipesCount=0,n.flowing=!1;for(var E=0;E<x;E++)_[E].emit("unpipe",this);return this}var S=indexOf(n.pipes,t);return S===-1?this:(n.pipes.splice(S,1),n.pipesCount-=1,n.pipesCount===1&&(n.pipes=n.pipes[0]),t.emit("unpipe",this),this)};Readable.prototype.on=function(t,n){var _=EventEmitter$5.prototype.on.call(this,t,n);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var x=this._readableState;!x.endEmitted&&!x.readableListening&&(x.readableListening=x.needReadable=!0,x.emittedReadable=!1,x.reading?x.length&&emitReadable(this):browserExports$1.nextTick(nReadingNextTick,this))}return _};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(t){debug$1("readable nexttick read 0"),t.read(0)}Readable.prototype.resume=function(){var t=this._readableState;return t.flowing||(debug$1("resume"),t.flowing=!0,resume(this,t)),this};function resume(t,n){n.resumeScheduled||(n.resumeScheduled=!0,browserExports$1.nextTick(resume_,t,n))}function resume_(t,n){n.reading||(debug$1("resume read 0"),t.read(0)),n.resumeScheduled=!1,n.awaitDrain=0,t.emit("resume"),flow(t),n.flowing&&!n.reading&&t.read(0)}Readable.prototype.pause=function(){return debug$1("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(debug$1("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function flow(t){var n=t._readableState;for(debug$1("flow",n.flowing);n.flowing&&t.read()!==null;);}Readable.prototype.wrap=function(t){var n=this._readableState,_=!1,x=this;t.on("end",function(){if(debug$1("wrapped end"),n.decoder&&!n.ended){var C=n.decoder.end();C&&C.length&&x.push(C)}x.push(null)}),t.on("data",function(C){if(debug$1("wrapped data"),n.decoder&&(C=n.decoder.write(C)),!(n.objectMode&&C==null)&&!(!n.objectMode&&(!C||!C.length))){var T=x.push(C);T||(_=!0,t.pause())}});for(var E in t)this[E]===void 0&&typeof t[E]=="function"&&(this[E]=function(C){return function(){return t[C].apply(t,arguments)}}(E));var S=["error","close","destroy","pause","resume"];return forEach$1(S,function(C){t.on(C,x.emit.bind(x,C))}),x._read=function(C){debug$1("wrapped _read",C),_&&(_=!1,t.resume())},x};Readable._fromList=fromList;function fromList(t,n){if(n.length===0)return null;var _;return n.objectMode?_=n.buffer.shift():!t||t>=n.length?(n.decoder?_=n.buffer.join(""):n.buffer.length===1?_=n.buffer.head.data:_=n.buffer.concat(n.length),n.buffer.clear()):_=fromListPartial(t,n.buffer,n.decoder),_}function fromListPartial(t,n,_){var x;return t<n.head.data.length?(x=n.head.data.slice(0,t),n.head.data=n.head.data.slice(t)):t===n.head.data.length?x=n.shift():x=_?copyFromBufferString(t,n):copyFromBuffer(t,n),x}function copyFromBufferString(t,n){var _=n.head,x=1,E=_.data;for(t-=E.length;_=_.next;){var S=_.data,C=t>S.length?S.length:t;if(C===S.length?E+=S:E+=S.slice(0,t),t-=C,t===0){C===S.length?(++x,_.next?n.head=_.next:n.head=n.tail=null):(n.head=_,_.data=S.slice(C));break}++x}return n.length-=x,E}function copyFromBuffer(t,n){var _=Buffer$5.allocUnsafe(t),x=n.head,E=1;for(x.data.copy(_),t-=x.data.length;x=x.next;){var S=x.data,C=t>S.length?S.length:t;if(S.copy(_,_.length-t,0,C),t-=C,t===0){C===S.length?(++E,x.next?n.head=x.next:n.head=n.tail=null):(n.head=x,x.data=S.slice(C));break}++E}return n.length-=E,_}function endReadable(t){var n=t._readableState;if(n.length>0)throw new Error('"endReadable()" called on non-empty stream');n.endEmitted||(n.ended=!0,browserExports$1.nextTick(endReadableNT,n,t))}function endReadableNT(t,n){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,n.readable=!1,n.emit("end"))}function forEach$1(t,n){for(var _=0,x=t.length;_<x;_++)n(t[_],_)}function indexOf(t,n){for(var _=0,x=t.length;_<x;_++)if(t[_]===n)return _;return-1}Writable.WritableState=WritableState;util$9.inherits(Writable,eventsExports.EventEmitter);function nop(){}function WriteReq(t,n,_){this.chunk=t,this.encoding=n,this.callback=_,this.next=null}function WritableState(t,n){Object.defineProperty(this,"buffer",{get:util$9.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,n instanceof Duplex&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var _=t.highWaterMark,x=this.objectMode?16:16*1024;this.highWaterMark=_||_===0?_:x,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var E=t.decodeStrings===!1;this.decodeStrings=!E,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(S){onwrite(n,S)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function(){for(var n=this.bufferedRequest,_=[];n;)_.push(n),n=n.next;return _};function Writable(t){if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(t);this._writableState=new WritableState(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev)),eventsExports.EventEmitter.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(t,n){var _=new Error("write after end");t.emit("error",_),browserExports$1.nextTick(n,_)}function validChunk(t,n,_,x){var E=!0,S=!1;return _===null?S=new TypeError("May not write null values to stream"):!buffer$3.Buffer.isBuffer(_)&&typeof _!="string"&&_!==void 0&&!n.objectMode&&(S=new TypeError("Invalid non-string/buffer chunk")),S&&(t.emit("error",S),browserExports$1.nextTick(x,S),E=!1),E}Writable.prototype.write=function(t,n,_){var x=this._writableState,E=!1;return typeof n=="function"&&(_=n,n=null),buffer$3.Buffer.isBuffer(t)?n="buffer":n||(n=x.defaultEncoding),typeof _!="function"&&(_=nop),x.ended?writeAfterEnd(this,_):validChunk(this,x,t,_)&&(x.pendingcb++,E=writeOrBuffer(this,x,t,n,_)),E};Writable.prototype.cork=function(){var t=this._writableState;t.corked++};Writable.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&clearBuffer(this,t))};Writable.prototype.setDefaultEncoding=function(n){if(typeof n=="string"&&(n=n.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((n+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+n);return this._writableState.defaultEncoding=n,this};function decodeChunk(t,n,_){return!t.objectMode&&t.decodeStrings!==!1&&typeof n=="string"&&(n=buffer$3.Buffer.from(n,_)),n}function writeOrBuffer(t,n,_,x,E){_=decodeChunk(n,_,x),buffer$3.Buffer.isBuffer(_)&&(x="buffer");var S=n.objectMode?1:_.length;n.length+=S;var C=n.length<n.highWaterMark;if(C||(n.needDrain=!0),n.writing||n.corked){var T=n.lastBufferedRequest;n.lastBufferedRequest=new WriteReq(_,x,E),T?T.next=n.lastBufferedRequest:n.bufferedRequest=n.lastBufferedRequest,n.bufferedRequestCount+=1}else doWrite(t,n,!1,S,_,x,E);return C}function doWrite(t,n,_,x,E,S,C){n.writelen=x,n.writecb=C,n.writing=!0,n.sync=!0,_?t._writev(E,n.onwrite):t._write(E,S,n.onwrite),n.sync=!1}function onwriteError(t,n,_,x,E){--n.pendingcb,_?browserExports$1.nextTick(E,x):E(x),t._writableState.errorEmitted=!0,t.emit("error",x)}function onwriteStateUpdate(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function onwrite(t,n){var _=t._writableState,x=_.sync,E=_.writecb;if(onwriteStateUpdate(_),n)onwriteError(t,_,x,n,E);else{var S=needFinish(_);!S&&!_.corked&&!_.bufferProcessing&&_.bufferedRequest&&clearBuffer(t,_),x?browserExports$1.nextTick(afterWrite,t,_,S,E):afterWrite(t,_,S,E)}}function afterWrite(t,n,_,x){_||onwriteDrain(t,n),n.pendingcb--,x(),finishMaybe(t,n)}function onwriteDrain(t,n){n.length===0&&n.needDrain&&(n.needDrain=!1,t.emit("drain"))}function clearBuffer(t,n){n.bufferProcessing=!0;var _=n.bufferedRequest;if(t._writev&&_&&_.next){var x=n.bufferedRequestCount,E=new Array(x),S=n.corkedRequestsFree;S.entry=_;for(var C=0;_;)E[C]=_,_=_.next,C+=1;doWrite(t,n,!0,n.length,E,"",S.finish),n.pendingcb++,n.lastBufferedRequest=null,S.next?(n.corkedRequestsFree=S.next,S.next=null):n.corkedRequestsFree=new CorkedRequest(n)}else{for(;_;){var T=_.chunk,B=_.encoding,A=_.callback,I=n.objectMode?1:T.length;if(doWrite(t,n,!1,I,T,B,A),_=_.next,n.writing)break}_===null&&(n.lastBufferedRequest=null)}n.bufferedRequestCount=0,n.bufferedRequest=_,n.bufferProcessing=!1}Writable.prototype._write=function(t,n,_){_(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(t,n,_){var x=this._writableState;typeof t=="function"?(_=t,t=null,n=null):typeof n=="function"&&(_=n,n=null),t!=null&&this.write(t,n),x.corked&&(x.corked=1,this.uncork()),!x.ending&&!x.finished&&endWritable(this,x,_)};function needFinish(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function prefinish(t,n){n.prefinished||(n.prefinished=!0,t.emit("prefinish"))}function finishMaybe(t,n){var _=needFinish(n);return _&&(n.pendingcb===0?(prefinish(t,n),n.finished=!0,t.emit("finish")):prefinish(t,n)),_}function endWritable(t,n,_){n.ending=!0,finishMaybe(t,n),_&&(n.finished?browserExports$1.nextTick(_):t.once("finish",_)),n.ended=!0,t.writable=!1}function CorkedRequest(t){var n=this;this.next=null,this.entry=null,this.finish=function(_){var x=n.entry;for(n.entry=null;x;){var E=x.callback;t.pendingcb--,E(_),x=x.next}t.corkedRequestsFree?t.corkedRequestsFree.next=n:t.corkedRequestsFree=n}}util$9.inherits(Duplex,Readable);var keys$1=Object.keys(Writable.prototype);for(var v=0;v<keys$1.length;v++){var method=keys$1[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(t){if(!(this instanceof Duplex))return new Duplex(t);Readable.call(this,t),Writable.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||browserExports$1.nextTick(onEndNT,this)}function onEndNT(t){t.end()}util$9.inherits(Transform,Duplex);function TransformState(t){this.afterTransform=function(n,_){return afterTransform(t,n,_)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(t,n,_){var x=t._transformState;x.transforming=!1;var E=x.writecb;if(!E)return t.emit("error",new Error("no writecb in Transform class"));x.writechunk=null,x.writecb=null,_!=null&&t.push(_),E(n);var S=t._readableState;S.reading=!1,(S.needReadable||S.length<S.highWaterMark)&&t._read(S.highWaterMark)}function Transform(t){if(!(this instanceof Transform))return new Transform(t);Duplex.call(this,t),this._transformState=new TransformState(this);var n=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(_){done(n,_)}):done(n)})}Transform.prototype.push=function(t,n){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,t,n)};Transform.prototype._transform=function(t,n,_){throw new Error("Not implemented")};Transform.prototype._write=function(t,n,_){var x=this._transformState;if(x.writecb=_,x.writechunk=t,x.writeencoding=n,!x.transforming){var E=this._readableState;(x.needTransform||E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}};Transform.prototype._read=function(t){var n=this._transformState;n.writechunk!==null&&n.writecb&&!n.transforming?(n.transforming=!0,this._transform(n.writechunk,n.writeencoding,n.afterTransform)):n.needTransform=!0};function done(t,n){if(n)return t.emit("error",n);var _=t._writableState,x=t._transformState;if(_.length)throw new Error("Calling transform done when ws.length != 0");if(x.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}util$9.inherits(PassThrough,Transform);function PassThrough(t){if(!(this instanceof PassThrough))return new PassThrough(t);Transform.call(this,t)}PassThrough.prototype._transform=function(t,n,_){_(null,t)};util$9.inherits(Stream,EventEmitter$5);Stream.Readable=Readable;Stream.Writable=Writable;Stream.Duplex=Duplex;Stream.Transform=Transform;Stream.PassThrough=PassThrough;Stream.Stream=Stream;function Stream(){EventEmitter$5.call(this)}Stream.prototype.pipe=function(t,n){var _=this;function x(I){t.writable&&t.write(I)===!1&&_.pause&&_.pause()}_.on("data",x);function E(){_.readable&&_.resume&&_.resume()}t.on("drain",E),!t._isStdio&&(!n||n.end!==!1)&&(_.on("end",C),_.on("close",T));var S=!1;function C(){S||(S=!0,t.end())}function T(){S||(S=!0,typeof t.destroy=="function"&&t.destroy())}function B(I){if(A(),EventEmitter$5.listenerCount(this,"error")===0)throw I}_.on("error",B),t.on("error",B);function A(){_.removeListener("data",x),t.removeListener("drain",E),_.removeListener("end",C),_.removeListener("close",T),_.removeListener("error",B),t.removeListener("error",B),_.removeListener("end",A),_.removeListener("close",A),t.removeListener("close",A)}return _.on("end",A),_.on("close",A),t.on("close",A),t.emit("pipe",_),t};const stream$2=Object.freeze(Object.defineProperty({__proto__:null,Duplex,PassThrough,Readable,Stream,Transform,Writable,default:Stream},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(stream$2);var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var t=safeBufferExports.Buffer,n=require$$0$1.Transform,_=string_decoder.StringDecoder,x=inherits_browserExports;function E(S){n.call(this),this.hashMode=typeof S=="string",this.hashMode?this[S]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return x(E,n),E.prototype.update=function(S,C,T){typeof S=="string"&&(S=t.from(S,C));var B=this._update(S);return this.hashMode?this:(T&&(B=this._toString(B,T)),B)},E.prototype.setAutoPadding=function(){},E.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},E.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},E.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},E.prototype._transform=function(S,C,T){var B;try{this.hashMode?this._update(S):this.push(this._update(S))}catch(A){B=A}finally{T(B)}},E.prototype._flush=function(S){var C;try{this.push(this.__final())}catch(T){C=T}S(C)},E.prototype._finalOrDigest=function(S){var C=this.__final()||t.alloc(0);return S&&(C=this._toString(C,S,!0)),C},E.prototype._toString=function(S,C,T){if(this._decoder||(this._decoder=new _(C),this._encoding=C),this._encoding!==C)throw new Error("can't switch encodings");var B=this._decoder.write(S);return T&&(B+=this._decoder.end()),B},cipherBase=E,cipherBase}var browser$c,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$c;hasRequiredBrowser$9=1;var t=inherits_browserExports,n=requireMd5_js(),_=requireRipemd160(),x=requireSha_js(),E=requireCipherBase();function S(C){E.call(this,"digest"),this._hash=C}return t(S,E),S.prototype._update=function(C){this._hash.update(C)},S.prototype._final=function(){return this._hash.digest()},browser$c=function(T){return T=T.toLowerCase(),T==="md5"?new n:T==="rmd160"||T==="ripemd160"?new _:new S(x(T))},browser$c}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var t=inherits_browserExports,n=safeBufferExports.Buffer,_=requireCipherBase(),x=n.alloc(128),E=64;function S(C,T){_.call(this,"digest"),typeof T=="string"&&(T=n.from(T)),this._alg=C,this._key=T,T.length>E?T=C(T):T.length<E&&(T=n.concat([T,x],E));for(var B=this._ipad=n.allocUnsafe(E),A=this._opad=n.allocUnsafe(E),I=0;I<E;I++)B[I]=T[I]^54,A[I]=T[I]^92;this._hash=[B]}return t(S,_),S.prototype._update=function(C){this._hash.push(C)},S.prototype._final=function(){var C=this._alg(n.concat(this._hash));return this._alg(n.concat([this._opad,C]))},legacy=S,legacy}var md5$2,hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5$2;hasRequiredMd5=1;var t=requireMd5_js();return md5$2=function(n){return new t().update(n).digest()},md5$2}var browser$b,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$b;hasRequiredBrowser$8=1;var t=inherits_browserExports,n=requireLegacy(),_=requireCipherBase(),x=safeBufferExports.Buffer,E=requireMd5(),S=requireRipemd160(),C=requireSha_js(),T=x.alloc(128);function B(A,I){_.call(this,"digest"),typeof I=="string"&&(I=x.from(I));var D=A==="sha512"||A==="sha384"?128:64;if(this._alg=A,this._key=I,I.length>D){var M=A==="rmd160"?new S:C(A);I=M.update(I).digest()}else I.length<D&&(I=x.concat([I,T],D));for(var V=this._ipad=x.allocUnsafe(D),L=this._opad=x.allocUnsafe(D),F=0;F<D;F++)V[F]=I[F]^54,L[F]=I[F]^92;this._hash=A==="rmd160"?new S:C(A),this._hash.update(V)}return t(B,_),B.prototype._update=function(A){this._hash.update(A)},B.prototype._final=function(){var A=this._hash.digest(),I=this._alg==="rmd160"?new S:C(this._alg);return I.update(this._opad).update(A).digest()},browser$b=function(I,D){return I=I.toLowerCase(),I==="rmd160"||I==="ripemd160"?new B("rmd160",D):I==="md5"?new n(E,D):new B(I,D)},browser$b}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$8={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384$1={sign:"ecdsa",hash:"sha384",id:""},sha512$2={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$8,sha224,sha384:sha384$1,sha512:sha512$2,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6),algos}var browser$a={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var t=Math.pow(2,30)-1;return precondition=function(n,_){if(typeof n!="number")throw new TypeError("Iterations not a number");if(n<0)throw new TypeError("Bad iterations");if(typeof _!="number")throw new TypeError("Key length not a number");if(_<0||_>t||_!==_)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var t;if(commonjsGlobal.process&&commonjsGlobal.process.browser)t="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var n=parseInt(browser$1$1.version.split(".")[0].slice(1),10);t=n>=6?"utf-8":"binary"}else t="utf-8";return defaultEncoding_1=t,defaultEncoding_1}var toBuffer$1,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer$1;hasRequiredToBuffer=1;var t=safeBufferExports.Buffer;return toBuffer$1=function(n,_,x){if(t.isBuffer(n))return n;if(typeof n=="string")return t.from(n,_);if(ArrayBuffer.isView(n))return t.from(n.buffer);throw new TypeError(x+" must be a string, a Buffer, a typed array or a DataView")},toBuffer$1}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var t=requireMd5(),n=requireRipemd160(),_=requireSha_js(),x=safeBufferExports.Buffer,E=requirePrecondition(),S=requireDefaultEncoding(),C=requireToBuffer(),T=x.alloc(128),B={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function A(M,V,L){var F=I(M),j=M==="sha512"||M==="sha384"?128:64;V.length>j?V=F(V):V.length<j&&(V=x.concat([V,T],j));for(var U=x.allocUnsafe(j+B[M]),H=x.allocUnsafe(j+B[M]),Y=0;Y<j;Y++)U[Y]=V[Y]^54,H[Y]=V[Y]^92;var Z=x.allocUnsafe(j+L+4);U.copy(Z,0,0,j),this.ipad1=Z,this.ipad2=U,this.opad=H,this.alg=M,this.blocksize=j,this.hash=F,this.size=B[M]}A.prototype.run=function(M,V){M.copy(V,this.blocksize);var L=this.hash(V);return L.copy(this.opad,this.blocksize),this.hash(this.opad)};function I(M){function V(F){return _(M).update(F).digest()}function L(F){return new n().update(F).digest()}return M==="rmd160"||M==="ripemd160"?L:M==="md5"?t:V}function D(M,V,L,F,j){E(L,F),M=C(M,S,"Password"),V=C(V,S,"Salt"),j=j||"sha1";var U=new A(j,M,V.length),H=x.allocUnsafe(F),Y=x.allocUnsafe(V.length+4);V.copy(Y,0,0,V.length);for(var Z=0,ne=B[j],re=Math.ceil(F/ne),X=1;X<=re;X++){Y.writeUInt32BE(X,V.length);for(var ce=U.run(Y,U.ipad1),ue=ce,_e=1;_e<L;_e++){ue=U.run(ue,U.ipad2);for(var ye=0;ye<ne;ye++)ce[ye]^=ue[ye]}ce.copy(H,Z),Z+=ne}return H}return syncBrowser=D,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var t=safeBufferExports.Buffer,n=requirePrecondition(),_=requireDefaultEncoding(),x=requireSyncBrowser(),E=requireToBuffer(),S,C=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,T={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},B=[];function A(L){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!C||!C.importKey||!C.deriveBits)return Promise.resolve(!1);if(B[L]!==void 0)return B[L];S=S||t.alloc(8);var F=M(S,S,10,128,L).then(function(){return!0}).catch(function(){return!1});return B[L]=F,F}var I;function D(){return I||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?I=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?I=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?I=commonjsGlobal.setImmediate:I=commonjsGlobal.setTimeout,I)}function M(L,F,j,U,H){return C.importKey("raw",L,{name:"PBKDF2"},!1,["deriveBits"]).then(function(Y){return C.deriveBits({name:"PBKDF2",salt:F,iterations:j,hash:{name:H}},Y,U<<3)}).then(function(Y){return t.from(Y)})}function V(L,F){L.then(function(j){D()(function(){F(null,j)})},function(j){D()(function(){F(j)})})}return async=function(L,F,j,U,H,Y){typeof H=="function"&&(Y=H,H=void 0),H=H||"sha1";var Z=T[H.toLowerCase()];if(!Z||typeof commonjsGlobal.Promise!="function"){D()(function(){var ne;try{ne=x(L,F,j,U,H)}catch(re){return Y(re)}Y(null,ne)});return}if(n(j,U),L=E(L,_,"Password"),F=E(F,_,"Salt"),typeof Y!="function")throw new Error("No callback provided to pbkdf2");V(A(Z).then(function(ne){return ne?M(L,F,j,U,Z):x(L,F,j,U,H)}),Y)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$a.pbkdf2=requireAsync(),browser$a.pbkdf2Sync=requireSyncBrowser()),browser$a}var browser$9={},des$1={},utils$q={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils$q;hasRequiredUtils=1,utils$q.readUInt32BE=function(E,S){var C=E[0+S]<<24|E[1+S]<<16|E[2+S]<<8|E[3+S];return C>>>0},utils$q.writeUInt32BE=function(E,S,C){E[0+C]=S>>>24,E[1+C]=S>>>16&255,E[2+C]=S>>>8&255,E[3+C]=S&255},utils$q.ip=function(E,S,C,T){for(var B=0,A=0,I=6;I>=0;I-=2){for(var D=0;D<=24;D+=8)B<<=1,B|=S>>>D+I&1;for(var D=0;D<=24;D+=8)B<<=1,B|=E>>>D+I&1}for(var I=6;I>=0;I-=2){for(var D=1;D<=25;D+=8)A<<=1,A|=S>>>D+I&1;for(var D=1;D<=25;D+=8)A<<=1,A|=E>>>D+I&1}C[T+0]=B>>>0,C[T+1]=A>>>0},utils$q.rip=function(E,S,C,T){for(var B=0,A=0,I=0;I<4;I++)for(var D=24;D>=0;D-=8)B<<=1,B|=S>>>D+I&1,B<<=1,B|=E>>>D+I&1;for(var I=4;I<8;I++)for(var D=24;D>=0;D-=8)A<<=1,A|=S>>>D+I&1,A<<=1,A|=E>>>D+I&1;C[T+0]=B>>>0,C[T+1]=A>>>0},utils$q.pc1=function(E,S,C,T){for(var B=0,A=0,I=7;I>=5;I--){for(var D=0;D<=24;D+=8)B<<=1,B|=S>>D+I&1;for(var D=0;D<=24;D+=8)B<<=1,B|=E>>D+I&1}for(var D=0;D<=24;D+=8)B<<=1,B|=S>>D+I&1;for(var I=1;I<=3;I++){for(var D=0;D<=24;D+=8)A<<=1,A|=S>>D+I&1;for(var D=0;D<=24;D+=8)A<<=1,A|=E>>D+I&1}for(var D=0;D<=24;D+=8)A<<=1,A|=E>>D+I&1;C[T+0]=B>>>0,C[T+1]=A>>>0},utils$q.r28shl=function(E,S){return E<<S&268435455|E>>>28-S};var t=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$q.pc2=function(E,S,C,T){for(var B=0,A=0,I=t.length>>>1,D=0;D<I;D++)B<<=1,B|=E>>>t[D]&1;for(var D=I;D<t.length;D++)A<<=1,A|=S>>>t[D]&1;C[T+0]=B>>>0,C[T+1]=A>>>0},utils$q.expand=function(E,S,C){var T=0,B=0;T=(E&1)<<5|E>>>27;for(var A=23;A>=15;A-=4)T<<=6,T|=E>>>A&63;for(var A=11;A>=3;A-=4)B|=E>>>A&63,B<<=6;B|=(E&31)<<1|E>>>31,S[C+0]=T>>>0,S[C+1]=B>>>0};var n=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$q.substitute=function(E,S){for(var C=0,T=0;T<4;T++){var B=E>>>18-T*6&63,A=n[T*64+B];C<<=4,C|=A}for(var T=0;T<4;T++){var B=S>>>18-T*6&63,A=n[4*64+T*64+B];C<<=4,C|=A}return C>>>0};var _=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$q.permute=function(E){for(var S=0,C=0;C<_.length;C++)S<<=1,S|=E>>>_[C]&1;return S>>>0},utils$q.padSplit=function(E,S,C){for(var T=E.toString(2);T.length<S;)T="0"+T;for(var B=[],A=0;A<S;A+=C)B.push(T.slice(A,A+C));return B.join(" ")},utils$q}var minimalisticAssert$1=assert$l;function assert$l(t,n){if(!t)throw new Error(n||"Assertion failed")}assert$l.equal=function(n,_,x){if(n!=_)throw new Error(x||"Assertion failed: "+n+" != "+_)};var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var t=minimalisticAssert$1;function n(_){this.options=_,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=_.padding!==!1}return cipher=n,n.prototype._init=function(){},n.prototype.update=function(x){return x.length===0?[]:this.type==="decrypt"?this._updateDecrypt(x):this._updateEncrypt(x)},n.prototype._buffer=function(x,E){for(var S=Math.min(this.buffer.length-this.bufferOff,x.length-E),C=0;C<S;C++)this.buffer[this.bufferOff+C]=x[E+C];return this.bufferOff+=S,S},n.prototype._flushBuffer=function(x,E){return this._update(this.buffer,0,x,E),this.bufferOff=0,this.blockSize},n.prototype._updateEncrypt=function(x){var E=0,S=0,C=(this.bufferOff+x.length)/this.blockSize|0,T=new Array(C*this.blockSize);this.bufferOff!==0&&(E+=this._buffer(x,E),this.bufferOff===this.buffer.length&&(S+=this._flushBuffer(T,S)));for(var B=x.length-(x.length-E)%this.blockSize;E<B;E+=this.blockSize)this._update(x,E,T,S),S+=this.blockSize;for(;E<x.length;E++,this.bufferOff++)this.buffer[this.bufferOff]=x[E];return T},n.prototype._updateDecrypt=function(x){for(var E=0,S=0,C=Math.ceil((this.bufferOff+x.length)/this.blockSize)-1,T=new Array(C*this.blockSize);C>0;C--)E+=this._buffer(x,E),S+=this._flushBuffer(T,S);return E+=this._buffer(x,E),T},n.prototype.final=function(x){var E;x&&(E=this.update(x));var S;return this.type==="encrypt"?S=this._finalEncrypt():S=this._finalDecrypt(),E?E.concat(S):S},n.prototype._pad=function(x,E){if(E===0)return!1;for(;E<x.length;)x[E++]=0;return!0},n.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var x=new Array(this.blockSize);return this._update(this.buffer,0,x,0),x},n.prototype._unpad=function(x){return x},n.prototype._finalDecrypt=function(){t.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var x=new Array(this.blockSize);return this._flushBuffer(x,0),this._unpad(x)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var t=minimalisticAssert$1,n=inherits_browserExports,_=requireUtils(),x=requireCipher();function E(){this.tmp=new Array(2),this.keys=null}function S(T){x.call(this,T);var B=new E;this._desState=B,this.deriveKeys(B,T.key)}n(S,x),des=S,S.create=function(B){return new S(B)};var C=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return S.prototype.deriveKeys=function(B,A){B.keys=new Array(16*2),t.equal(A.length,this.blockSize,"Invalid key length");var I=_.readUInt32BE(A,0),D=_.readUInt32BE(A,4);_.pc1(I,D,B.tmp,0),I=B.tmp[0],D=B.tmp[1];for(var M=0;M<B.keys.length;M+=2){var V=C[M>>>1];I=_.r28shl(I,V),D=_.r28shl(D,V),_.pc2(I,D,B.keys,M)}},S.prototype._update=function(B,A,I,D){var M=this._desState,V=_.readUInt32BE(B,A),L=_.readUInt32BE(B,A+4);_.ip(V,L,M.tmp,0),V=M.tmp[0],L=M.tmp[1],this.type==="encrypt"?this._encrypt(M,V,L,M.tmp,0):this._decrypt(M,V,L,M.tmp,0),V=M.tmp[0],L=M.tmp[1],_.writeUInt32BE(I,V,D),_.writeUInt32BE(I,L,D+4)},S.prototype._pad=function(B,A){if(this.padding===!1)return!1;for(var I=B.length-A,D=A;D<B.length;D++)B[D]=I;return!0},S.prototype._unpad=function(B){if(this.padding===!1)return B;for(var A=B[B.length-1],I=B.length-A;I<B.length;I++)t.equal(B[I],A);return B.slice(0,B.length-A)},S.prototype._encrypt=function(B,A,I,D,M){for(var V=A,L=I,F=0;F<B.keys.length;F+=2){var j=B.keys[F],U=B.keys[F+1];_.expand(L,B.tmp,0),j^=B.tmp[0],U^=B.tmp[1];var H=_.substitute(j,U),Y=_.permute(H),Z=L;L=(V^Y)>>>0,V=Z}_.rip(L,V,D,M)},S.prototype._decrypt=function(B,A,I,D,M){for(var V=I,L=A,F=B.keys.length-2;F>=0;F-=2){var j=B.keys[F],U=B.keys[F+1];_.expand(V,B.tmp,0),j^=B.tmp[0],U^=B.tmp[1];var H=_.substitute(j,U),Y=_.permute(H),Z=V;V=(L^Y)>>>0,L=Z}_.rip(V,L,D,M)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var t=minimalisticAssert$1,n=inherits_browserExports,_={};function x(S){t.equal(S.length,8,"Invalid IV length"),this.iv=new Array(8);for(var C=0;C<this.iv.length;C++)this.iv[C]=S[C]}function E(S){function C(I){S.call(this,I),this._cbcInit()}n(C,S);for(var T=Object.keys(_),B=0;B<T.length;B++){var A=T[B];C.prototype[A]=_[A]}return C.create=function(D){return new C(D)},C}return cbc$1.instantiate=E,_._cbcInit=function(){var C=new x(this.options.iv);this._cbcState=C},_._update=function(C,T,B,A){var I=this._cbcState,D=this.constructor.super_.prototype,M=I.iv;if(this.type==="encrypt"){for(var V=0;V<this.blockSize;V++)M[V]^=C[T+V];D._update.call(this,M,0,B,A);for(var V=0;V<this.blockSize;V++)M[V]=B[A+V]}else{D._update.call(this,C,T,B,A);for(var V=0;V<this.blockSize;V++)B[A+V]^=M[V];for(var V=0;V<this.blockSize;V++)M[V]=C[T+V]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var t=minimalisticAssert$1,n=inherits_browserExports,_=requireCipher(),x=requireDes$1();function E(C,T){t.equal(T.length,24,"Invalid key length");var B=T.slice(0,8),A=T.slice(8,16),I=T.slice(16,24);C==="encrypt"?this.ciphers=[x.create({type:"encrypt",key:B}),x.create({type:"decrypt",key:A}),x.create({type:"encrypt",key:I})]:this.ciphers=[x.create({type:"decrypt",key:I}),x.create({type:"encrypt",key:A}),x.create({type:"decrypt",key:B})]}function S(C){_.call(this,C);var T=new E(this.type,this.options.key);this._edeState=T}return n(S,_),ede=S,S.create=function(T){return new S(T)},S.prototype._update=function(T,B,A,I){var D=this._edeState;D.ciphers[0]._update(T,B,A,I),D.ciphers[1]._update(A,I,A,I),D.ciphers[2]._update(A,I,A,I)},S.prototype._pad=x.prototype._pad,S.prototype._unpad=x.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var t=requireCipherBase(),n=requireDes(),_=inherits_browserExports,x=safeBufferExports.Buffer,E={"des-ede3-cbc":n.CBC.instantiate(n.EDE),"des-ede3":n.EDE,"des-ede-cbc":n.CBC.instantiate(n.EDE),"des-ede":n.EDE,"des-cbc":n.CBC.instantiate(n.DES),"des-ecb":n.DES};E.des=E["des-cbc"],E.des3=E["des-ede3-cbc"],browserifyDes=S,_(S,t);function S(C){t.call(this);var T=C.mode.toLowerCase(),B=E[T],A;C.decrypt?A="decrypt":A="encrypt";var I=C.key;x.isBuffer(I)||(I=x.from(I)),(T==="des-ede"||T==="des-ede-cbc")&&(I=x.concat([I,I.slice(0,8)]));var D=C.iv;x.isBuffer(D)||(D=x.from(D)),this._des=B.create({key:I,iv:D,type:A})}return S.prototype._update=function(C){return x.from(this._des.update(C))},S.prototype._final=function(){return x.from(this._des.final())},browserifyDes}var browser$8={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(t,n){return t._cipher.encryptBlock(n)},ecb.decrypt=function(t,n){return t._cipher.decryptBlock(n)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(n,_){for(var x=Math.min(n.length,_.length),E=new Buffer$5(x),S=0;S<x;++S)E[S]=n[S]^_[S];return E}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var t=requireBufferXor();return cbc.encrypt=function(n,_){var x=t(_,n._prev);return n._prev=n._cipher.encryptBlock(x),n._prev},cbc.decrypt=function(n,_){var x=n._prev;n._prev=_;var E=n._cipher.decryptBlock(_);return t(E,x)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var t=safeBufferExports.Buffer,n=requireBufferXor();function _(x,E,S){var C=E.length,T=n(E,x._cache);return x._cache=x._cache.slice(C),x._prev=t.concat([x._prev,S?E:T]),T}return cfb.encrypt=function(x,E,S){for(var C=t.allocUnsafe(0),T;E.length;)if(x._cache.length===0&&(x._cache=x._cipher.encryptBlock(x._prev),x._prev=t.allocUnsafe(0)),x._cache.length<=E.length)T=x._cache.length,C=t.concat([C,_(x,E.slice(0,T),S)]),E=E.slice(T);else{C=t.concat([C,_(x,E,S)]);break}return C},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var t=safeBufferExports.Buffer;function n(_,x,E){var S=_._cipher.encryptBlock(_._prev),C=S[0]^x;return _._prev=t.concat([_._prev.slice(1),t.from([E?x:C])]),C}return cfb8.encrypt=function(_,x,E){for(var S=x.length,C=t.allocUnsafe(S),T=-1;++T<S;)C[T]=n(_,x[T],E);return C},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var t=safeBufferExports.Buffer;function n(x,E,S){for(var C,T=-1,B=8,A=0,I,D;++T<B;)C=x._cipher.encryptBlock(x._prev),I=E&1<<7-T?128:0,D=C[0]^I,A+=(D&128)>>T%8,x._prev=_(x._prev,S?I:D);return A}function _(x,E){var S=x.length,C=-1,T=t.allocUnsafe(x.length);for(x=t.concat([x,t.from([E])]);++C<S;)T[C]=x[C]<<1|x[C+1]>>7;return T}return cfb1.encrypt=function(x,E,S){for(var C=E.length,T=t.allocUnsafe(C),B=-1;++B<C;)T[B]=n(x,E[B],S);return T},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var t=requireBufferXor();function n(_){return _._prev=_._cipher.encryptBlock(_._prev),_._prev}return ofb.encrypt=function(_,x){for(;_._cache.length<x.length;)_._cache=Buffer$5.concat([_._cache,n(_)]);var E=_._cache.slice(0,x.length);return _._cache=_._cache.slice(x.length),t(x,E)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function t(n){for(var _=n.length,x;_--;)if(x=n.readUInt8(_),x===255)n.writeUInt8(0,_);else{x++,n.writeUInt8(x,_);break}}return incr32_1=t,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var t=requireBufferXor(),n=safeBufferExports.Buffer,_=requireIncr32();function x(S){var C=S._cipher.encryptBlockRaw(S._prev);return _(S._prev),C}var E=16;return ctr.encrypt=function(S,C){var T=Math.ceil(C.length/E),B=S._cache.length;S._cache=n.concat([S._cache,n.allocUnsafe(T*E)]);for(var A=0;A<T;A++){var I=x(S),D=B+A*E;S._cache.writeUInt32BE(I[0],D+0),S._cache.writeUInt32BE(I[1],D+4),S._cache.writeUInt32BE(I[2],D+8),S._cache.writeUInt32BE(I[3],D+12)}var M=S._cache.slice(0,C.length);return S._cache=S._cache.slice(C.length),t(C,M)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var t={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},n=require$$2;for(var _ in n)n[_].module=t[n[_].mode];return modes_1=n,modes_1}var aes$1={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes$1;hasRequiredAes=1;var t=safeBufferExports.Buffer;function n(T){t.isBuffer(T)||(T=t.from(T));for(var B=T.length/4|0,A=new Array(B),I=0;I<B;I++)A[I]=T.readUInt32BE(I*4);return A}function _(T){for(var B=0;B<T.length;T++)T[B]=0}function x(T,B,A,I,D){for(var M=A[0],V=A[1],L=A[2],F=A[3],j=T[0]^B[0],U=T[1]^B[1],H=T[2]^B[2],Y=T[3]^B[3],Z,ne,re,X,ce=4,ue=1;ue<D;ue++)Z=M[j>>>24]^V[U>>>16&255]^L[H>>>8&255]^F[Y&255]^B[ce++],ne=M[U>>>24]^V[H>>>16&255]^L[Y>>>8&255]^F[j&255]^B[ce++],re=M[H>>>24]^V[Y>>>16&255]^L[j>>>8&255]^F[U&255]^B[ce++],X=M[Y>>>24]^V[j>>>16&255]^L[U>>>8&255]^F[H&255]^B[ce++],j=Z,U=ne,H=re,Y=X;return Z=(I[j>>>24]<<24|I[U>>>16&255]<<16|I[H>>>8&255]<<8|I[Y&255])^B[ce++],ne=(I[U>>>24]<<24|I[H>>>16&255]<<16|I[Y>>>8&255]<<8|I[j&255])^B[ce++],re=(I[H>>>24]<<24|I[Y>>>16&255]<<16|I[j>>>8&255]<<8|I[U&255])^B[ce++],X=(I[Y>>>24]<<24|I[j>>>16&255]<<16|I[U>>>8&255]<<8|I[H&255])^B[ce++],Z=Z>>>0,ne=ne>>>0,re=re>>>0,X=X>>>0,[Z,ne,re,X]}var E=[0,1,2,4,8,16,32,64,128,27,54],S=function(){for(var T=new Array(256),B=0;B<256;B++)B<128?T[B]=B<<1:T[B]=B<<1^283;for(var A=[],I=[],D=[[],[],[],[]],M=[[],[],[],[]],V=0,L=0,F=0;F<256;++F){var j=L^L<<1^L<<2^L<<3^L<<4;j=j>>>8^j&255^99,A[V]=j,I[j]=V;var U=T[V],H=T[U],Y=T[H],Z=T[j]*257^j*16843008;D[0][V]=Z<<24|Z>>>8,D[1][V]=Z<<16|Z>>>16,D[2][V]=Z<<8|Z>>>24,D[3][V]=Z,Z=Y*16843009^H*65537^U*257^V*16843008,M[0][j]=Z<<24|Z>>>8,M[1][j]=Z<<16|Z>>>16,M[2][j]=Z<<8|Z>>>24,M[3][j]=Z,V===0?V=L=1:(V=U^T[T[T[Y^U]]],L^=T[T[L]])}return{SBOX:A,INV_SBOX:I,SUB_MIX:D,INV_SUB_MIX:M}}();function C(T){this._key=n(T),this._reset()}return C.blockSize=4*4,C.keySize=256/8,C.prototype.blockSize=C.blockSize,C.prototype.keySize=C.keySize,C.prototype._reset=function(){for(var T=this._key,B=T.length,A=B+6,I=(A+1)*4,D=[],M=0;M<B;M++)D[M]=T[M];for(M=B;M<I;M++){var V=D[M-1];M%B===0?(V=V<<8|V>>>24,V=S.SBOX[V>>>24]<<24|S.SBOX[V>>>16&255]<<16|S.SBOX[V>>>8&255]<<8|S.SBOX[V&255],V^=E[M/B|0]<<24):B>6&&M%B===4&&(V=S.SBOX[V>>>24]<<24|S.SBOX[V>>>16&255]<<16|S.SBOX[V>>>8&255]<<8|S.SBOX[V&255]),D[M]=D[M-B]^V}for(var L=[],F=0;F<I;F++){var j=I-F,U=D[j-(F%4?0:4)];F<4||j<=4?L[F]=U:L[F]=S.INV_SUB_MIX[0][S.SBOX[U>>>24]]^S.INV_SUB_MIX[1][S.SBOX[U>>>16&255]]^S.INV_SUB_MIX[2][S.SBOX[U>>>8&255]]^S.INV_SUB_MIX[3][S.SBOX[U&255]]}this._nRounds=A,this._keySchedule=D,this._invKeySchedule=L},C.prototype.encryptBlockRaw=function(T){return T=n(T),x(T,this._keySchedule,S.SUB_MIX,S.SBOX,this._nRounds)},C.prototype.encryptBlock=function(T){var B=this.encryptBlockRaw(T),A=t.allocUnsafe(16);return A.writeUInt32BE(B[0],0),A.writeUInt32BE(B[1],4),A.writeUInt32BE(B[2],8),A.writeUInt32BE(B[3],12),A},C.prototype.decryptBlock=function(T){T=n(T);var B=T[1];T[1]=T[3],T[3]=B;var A=x(T,this._invKeySchedule,S.INV_SUB_MIX,S.INV_SBOX,this._nRounds),I=t.allocUnsafe(16);return I.writeUInt32BE(A[0],0),I.writeUInt32BE(A[3],4),I.writeUInt32BE(A[2],8),I.writeUInt32BE(A[1],12),I},C.prototype.scrub=function(){_(this._keySchedule),_(this._invKeySchedule),_(this._key)},aes$1.AES=C,aes$1}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var t=safeBufferExports.Buffer,n=t.alloc(16,0);function _(S){return[S.readUInt32BE(0),S.readUInt32BE(4),S.readUInt32BE(8),S.readUInt32BE(12)]}function x(S){var C=t.allocUnsafe(16);return C.writeUInt32BE(S[0]>>>0,0),C.writeUInt32BE(S[1]>>>0,4),C.writeUInt32BE(S[2]>>>0,8),C.writeUInt32BE(S[3]>>>0,12),C}function E(S){this.h=S,this.state=t.alloc(16,0),this.cache=t.allocUnsafe(0)}return E.prototype.ghash=function(S){for(var C=-1;++C<S.length;)this.state[C]^=S[C];this._multiply()},E.prototype._multiply=function(){for(var S=_(this.h),C=[0,0,0,0],T,B,A,I=-1;++I<128;){for(B=(this.state[~~(I/8)]&1<<7-I%8)!==0,B&&(C[0]^=S[0],C[1]^=S[1],C[2]^=S[2],C[3]^=S[3]),A=(S[3]&1)!==0,T=3;T>0;T--)S[T]=S[T]>>>1|(S[T-1]&1)<<31;S[0]=S[0]>>>1,A&&(S[0]=S[0]^225<<24)}this.state=x(C)},E.prototype.update=function(S){this.cache=t.concat([this.cache,S]);for(var C;this.cache.length>=16;)C=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(C)},E.prototype.final=function(S,C){return this.cache.length&&this.ghash(t.concat([this.cache,n],16)),this.ghash(x([0,S,0,C])),this.state},ghash=E,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var t=requireAes(),n=safeBufferExports.Buffer,_=requireCipherBase(),x=inherits_browserExports,E=requireGhash(),S=requireBufferXor(),C=requireIncr32();function T(I,D){var M=0;I.length!==D.length&&M++;for(var V=Math.min(I.length,D.length),L=0;L<V;++L)M+=I[L]^D[L];return M}function B(I,D,M){if(D.length===12)return I._finID=n.concat([D,n.from([0,0,0,1])]),n.concat([D,n.from([0,0,0,2])]);var V=new E(M),L=D.length,F=L%16;V.update(D),F&&(F=16-F,V.update(n.alloc(F,0))),V.update(n.alloc(8,0));var j=L*8,U=n.alloc(8);U.writeUIntBE(j,0,8),V.update(U),I._finID=V.state;var H=n.from(I._finID);return C(H),H}function A(I,D,M,V){_.call(this);var L=n.alloc(4,0);this._cipher=new t.AES(D);var F=this._cipher.encryptBlock(L);this._ghash=new E(F),M=B(this,M,F),this._prev=n.from(M),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=V,this._alen=0,this._len=0,this._mode=I,this._authTag=null,this._called=!1}return x(A,_),A.prototype._update=function(I){if(!this._called&&this._alen){var D=16-this._alen%16;D<16&&(D=n.alloc(D,0),this._ghash.update(D))}this._called=!0;var M=this._mode.encrypt(this,I);return this._decrypt?this._ghash.update(I):this._ghash.update(M),this._len+=I.length,M},A.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var I=S(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&T(I,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=I,this._cipher.scrub()},A.prototype.getAuthTag=function(){if(this._decrypt||!n.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},A.prototype.setAuthTag=function(D){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=D},A.prototype.setAAD=function(D){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(D),this._alen+=D.length},authCipher=A,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var t=requireAes(),n=safeBufferExports.Buffer,_=requireCipherBase(),x=inherits_browserExports;function E(S,C,T,B){_.call(this),this._cipher=new t.AES(C),this._prev=n.from(T),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=B,this._mode=S}return x(E,_),E.prototype._update=function(S){return this._mode.encrypt(this,S,this._decrypt)},E.prototype._final=function(){this._cipher.scrub()},streamCipher=E,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var t=safeBufferExports.Buffer,n=requireMd5_js();function _(x,E,S,C){if(t.isBuffer(x)||(x=t.from(x,"binary")),E&&(t.isBuffer(E)||(E=t.from(E,"binary")),E.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var T=S/8,B=t.alloc(T),A=t.alloc(C||0),I=t.alloc(0);T>0||C>0;){var D=new n;D.update(I),D.update(x),E&&D.update(E),I=D.digest();var M=0;if(T>0){var V=B.length-T;M=Math.min(T,I.length),I.copy(B,V,0,M),T-=M}if(M<I.length&&C>0){var L=A.length-C,F=Math.min(C,I.length-M);I.copy(A,L,M,M+F),C-=F}}return I.fill(0),{key:B,iv:A}}return evp_bytestokey=_,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var t=requireModes$1(),n=requireAuthCipher(),_=safeBufferExports.Buffer,x=requireStreamCipher(),E=requireCipherBase(),S=requireAes(),C=requireEvp_bytestokey(),T=inherits_browserExports;function B(V,L,F){E.call(this),this._cache=new I,this._cipher=new S.AES(L),this._prev=_.from(F),this._mode=V,this._autopadding=!0}T(B,E),B.prototype._update=function(V){this._cache.add(V);for(var L,F,j=[];L=this._cache.get();)F=this._mode.encrypt(this,L),j.push(F);return _.concat(j)};var A=_.alloc(16,16);B.prototype._final=function(){var V=this._cache.flush();if(this._autopadding)return V=this._mode.encrypt(this,V),this._cipher.scrub(),V;if(!V.equals(A))throw this._cipher.scrub(),new Error("data not multiple of block length")},B.prototype.setAutoPadding=function(V){return this._autopadding=!!V,this};function I(){this.cache=_.allocUnsafe(0)}I.prototype.add=function(V){this.cache=_.concat([this.cache,V])},I.prototype.get=function(){if(this.cache.length>15){var V=this.cache.slice(0,16);return this.cache=this.cache.slice(16),V}return null},I.prototype.flush=function(){for(var V=16-this.cache.length,L=_.allocUnsafe(V),F=-1;++F<V;)L.writeUInt8(V,F);return _.concat([this.cache,L])};function D(V,L,F){var j=t[V.toLowerCase()];if(!j)throw new TypeError("invalid suite type");if(typeof L=="string"&&(L=_.from(L)),L.length!==j.key/8)throw new TypeError("invalid key length "+L.length);if(typeof F=="string"&&(F=_.from(F)),j.mode!=="GCM"&&F.length!==j.iv)throw new TypeError("invalid iv length "+F.length);return j.type==="stream"?new x(j.module,L,F):j.type==="auth"?new n(j.module,L,F):new B(j.module,L,F)}function M(V,L){var F=t[V.toLowerCase()];if(!F)throw new TypeError("invalid suite type");var j=C(L,!1,F.key,F.iv);return D(V,j.key,j.iv)}return encrypter.createCipheriv=D,encrypter.createCipher=M,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var t=requireAuthCipher(),n=safeBufferExports.Buffer,_=requireModes$1(),x=requireStreamCipher(),E=requireCipherBase(),S=requireAes(),C=requireEvp_bytestokey(),T=inherits_browserExports;function B(V,L,F){E.call(this),this._cache=new A,this._last=void 0,this._cipher=new S.AES(L),this._prev=n.from(F),this._mode=V,this._autopadding=!0}T(B,E),B.prototype._update=function(V){this._cache.add(V);for(var L,F,j=[];L=this._cache.get(this._autopadding);)F=this._mode.decrypt(this,L),j.push(F);return n.concat(j)},B.prototype._final=function(){var V=this._cache.flush();if(this._autopadding)return I(this._mode.decrypt(this,V));if(V)throw new Error("data not multiple of block length")},B.prototype.setAutoPadding=function(V){return this._autopadding=!!V,this};function A(){this.cache=n.allocUnsafe(0)}A.prototype.add=function(V){this.cache=n.concat([this.cache,V])},A.prototype.get=function(V){var L;if(V){if(this.cache.length>16)return L=this.cache.slice(0,16),this.cache=this.cache.slice(16),L}else if(this.cache.length>=16)return L=this.cache.slice(0,16),this.cache=this.cache.slice(16),L;return null},A.prototype.flush=function(){if(this.cache.length)return this.cache};function I(V){var L=V[15];if(L<1||L>16)throw new Error("unable to decrypt data");for(var F=-1;++F<L;)if(V[F+(16-L)]!==L)throw new Error("unable to decrypt data");if(L!==16)return V.slice(0,16-L)}function D(V,L,F){var j=_[V.toLowerCase()];if(!j)throw new TypeError("invalid suite type");if(typeof F=="string"&&(F=n.from(F)),j.mode!=="GCM"&&F.length!==j.iv)throw new TypeError("invalid iv length "+F.length);if(typeof L=="string"&&(L=n.from(L)),L.length!==j.key/8)throw new TypeError("invalid key length "+L.length);return j.type==="stream"?new x(j.module,L,F,!0):j.type==="auth"?new t(j.module,L,F,!0):new B(j.module,L,F)}function M(V,L){var F=_[V.toLowerCase()];if(!F)throw new TypeError("invalid suite type");var j=C(L,!1,F.key,F.iv);return D(V,j.key,j.iv)}return decrypter.createDecipher=M,decrypter.createDecipheriv=D,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$8;hasRequiredBrowser$6=1;var t=requireEncrypter(),n=requireDecrypter(),_=require$$2;function x(){return Object.keys(_)}return browser$8.createCipher=browser$8.Cipher=t.createCipher,browser$8.createCipheriv=browser$8.Cipheriv=t.createCipheriv,browser$8.createDecipher=browser$8.Decipher=n.createDecipher,browser$8.createDecipheriv=browser$8.Decipheriv=n.createDecipheriv,browser$8.listCiphers=browser$8.getCiphers=x,browser$8}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$9;hasRequiredBrowser$5=1;var t=requireBrowserifyDes(),n=requireBrowser$6(),_=requireModes$1(),x=requireModes(),E=requireEvp_bytestokey();function S(I,D){I=I.toLowerCase();var M,V;if(_[I])M=_[I].key,V=_[I].iv;else if(x[I])M=x[I].key*8,V=x[I].iv;else throw new TypeError("invalid suite type");var L=E(D,!1,M,V);return T(I,L.key,L.iv)}function C(I,D){I=I.toLowerCase();var M,V;if(_[I])M=_[I].key,V=_[I].iv;else if(x[I])M=x[I].key*8,V=x[I].iv;else throw new TypeError("invalid suite type");var L=E(D,!1,M,V);return B(I,L.key,L.iv)}function T(I,D,M){if(I=I.toLowerCase(),_[I])return n.createCipheriv(I,D,M);if(x[I])return new t({key:D,iv:M,mode:I});throw new TypeError("invalid suite type")}function B(I,D,M){if(I=I.toLowerCase(),_[I])return n.createDecipheriv(I,D,M);if(x[I])return new t({key:D,iv:M,mode:I,decrypt:!0});throw new TypeError("invalid suite type")}function A(){return Object.keys(x).concat(n.getCiphers())}return browser$9.createCipher=browser$9.Cipher=S,browser$9.createCipheriv=browser$9.Cipheriv=T,browser$9.createDecipher=browser$9.Decipher=C,browser$9.createDecipheriv=browser$9.Decipheriv=B,browser$9.listCiphers=browser$9.getCiphers=A,browser$9}var browser$7={},bn$4={exports:{}};bn$4.exports;(function(t){(function(n,_){function x(ye,ie){if(!ye)throw new Error(ie||"Assertion failed")}function E(ye,ie){ye.super_=ie;var W=function(){};W.prototype=ie.prototype,ye.prototype=new W,ye.prototype.constructor=ye}function S(ye,ie,W){if(S.isBN(ye))return ye;this.negative=0,this.words=null,this.length=0,this.red=null,ye!==null&&((ie==="le"||ie==="be")&&(W=ie,ie=10),this._init(ye||0,ie||10,W||"be"))}typeof n=="object"?n.exports=S:_.BN=S,S.BN=S,S.wordSize=26;var C;try{typeof window<"u"&&typeof window.Buffer<"u"?C=window.Buffer:C=require$$0$2.Buffer}catch{}S.isBN=function(ie){return ie instanceof S?!0:ie!==null&&typeof ie=="object"&&ie.constructor.wordSize===S.wordSize&&Array.isArray(ie.words)},S.max=function(ie,W){return ie.cmp(W)>0?ie:W},S.min=function(ie,W){return ie.cmp(W)<0?ie:W},S.prototype._init=function(ie,W,O){if(typeof ie=="number")return this._initNumber(ie,W,O);if(typeof ie=="object")return this._initArray(ie,W,O);W==="hex"&&(W=16),x(W===(W|0)&&W>=2&&W<=36),ie=ie.toString().replace(/\s+/g,"");var z=0;ie[0]==="-"&&(z++,this.negative=1),z<ie.length&&(W===16?this._parseHex(ie,z,O):(this._parseBase(ie,W,z),O==="le"&&this._initArray(this.toArray(),W,O)))},S.prototype._initNumber=function(ie,W,O){ie<0&&(this.negative=1,ie=-ie),ie<67108864?(this.words=[ie&67108863],this.length=1):ie<4503599627370496?(this.words=[ie&67108863,ie/67108864&67108863],this.length=2):(x(ie<9007199254740992),this.words=[ie&67108863,ie/67108864&67108863,1],this.length=3),O==="le"&&this._initArray(this.toArray(),W,O)},S.prototype._initArray=function(ie,W,O){if(x(typeof ie.length=="number"),ie.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(ie.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var J,ee,ae=0;if(O==="be")for(z=ie.length-1,J=0;z>=0;z-=3)ee=ie[z]|ie[z-1]<<8|ie[z-2]<<16,this.words[J]|=ee<<ae&67108863,this.words[J+1]=ee>>>26-ae&67108863,ae+=24,ae>=26&&(ae-=26,J++);else if(O==="le")for(z=0,J=0;z<ie.length;z+=3)ee=ie[z]|ie[z+1]<<8|ie[z+2]<<16,this.words[J]|=ee<<ae&67108863,this.words[J+1]=ee>>>26-ae&67108863,ae+=24,ae>=26&&(ae-=26,J++);return this.strip()};function T(ye,ie){var W=ye.charCodeAt(ie);return W>=65&&W<=70?W-55:W>=97&&W<=102?W-87:W-48&15}function B(ye,ie,W){var O=T(ye,W);return W-1>=ie&&(O|=T(ye,W-1)<<4),O}S.prototype._parseHex=function(ie,W,O){this.length=Math.ceil((ie.length-W)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var J=0,ee=0,ae;if(O==="be")for(z=ie.length-1;z>=W;z-=2)ae=B(ie,W,z)<<J,this.words[ee]|=ae&67108863,J>=18?(J-=18,ee+=1,this.words[ee]|=ae>>>26):J+=8;else{var oe=ie.length-W;for(z=oe%2===0?W+1:W;z<ie.length;z+=2)ae=B(ie,W,z)<<J,this.words[ee]|=ae&67108863,J>=18?(J-=18,ee+=1,this.words[ee]|=ae>>>26):J+=8}this.strip()};function A(ye,ie,W,O){for(var z=0,J=Math.min(ye.length,W),ee=ie;ee<J;ee++){var ae=ye.charCodeAt(ee)-48;z*=O,ae>=49?z+=ae-49+10:ae>=17?z+=ae-17+10:z+=ae}return z}S.prototype._parseBase=function(ie,W,O){this.words=[0],this.length=1;for(var z=0,J=1;J<=67108863;J*=W)z++;z--,J=J/W|0;for(var ee=ie.length-O,ae=ee%z,oe=Math.min(ee,ee-ae)+O,se=0,G=O;G<oe;G+=z)se=A(ie,G,G+z,W),this.imuln(J),this.words[0]+se<67108864?this.words[0]+=se:this._iaddn(se);if(ae!==0){var q=1;for(se=A(ie,G,ie.length,W),G=0;G<ae;G++)q*=W;this.imuln(q),this.words[0]+se<67108864?this.words[0]+=se:this._iaddn(se)}this.strip()},S.prototype.copy=function(ie){ie.words=new Array(this.length);for(var W=0;W<this.length;W++)ie.words[W]=this.words[W];ie.length=this.length,ie.negative=this.negative,ie.red=this.red},S.prototype.clone=function(){var ie=new S(null);return this.copy(ie),ie},S.prototype._expand=function(ie){for(;this.length<ie;)this.words[this.length++]=0;return this},S.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},S.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},S.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];S.prototype.toString=function(ie,W){ie=ie||10,W=W|0||1;var O;if(ie===16||ie==="hex"){O="";for(var z=0,J=0,ee=0;ee<this.length;ee++){var ae=this.words[ee],oe=((ae<<z|J)&16777215).toString(16);J=ae>>>24-z&16777215,J!==0||ee!==this.length-1?O=I[6-oe.length]+oe+O:O=oe+O,z+=2,z>=26&&(z-=26,ee--)}for(J!==0&&(O=J.toString(16)+O);O.length%W!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}if(ie===(ie|0)&&ie>=2&&ie<=36){var se=D[ie],G=M[ie];O="";var q=this.clone();for(q.negative=0;!q.isZero();){var te=q.modn(G).toString(ie);q=q.idivn(G),q.isZero()?O=te+O:O=I[se-te.length]+te+O}for(this.isZero()&&(O="0"+O);O.length%W!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}x(!1,"Base should be between 2 and 36")},S.prototype.toNumber=function(){var ie=this.words[0];return this.length===2?ie+=this.words[1]*67108864:this.length===3&&this.words[2]===1?ie+=4503599627370496+this.words[1]*67108864:this.length>2&&x(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-ie:ie},S.prototype.toJSON=function(){return this.toString(16)},S.prototype.toBuffer=function(ie,W){return x(typeof C<"u"),this.toArrayLike(C,ie,W)},S.prototype.toArray=function(ie,W){return this.toArrayLike(Array,ie,W)},S.prototype.toArrayLike=function(ie,W,O){var z=this.byteLength(),J=O||Math.max(1,z);x(z<=J,"byte array longer than desired length"),x(J>0,"Requested array length <= 0"),this.strip();var ee=W==="le",ae=new ie(J),oe,se,G=this.clone();if(ee){for(se=0;!G.isZero();se++)oe=G.andln(255),G.iushrn(8),ae[se]=oe;for(;se<J;se++)ae[se]=0}else{for(se=0;se<J-z;se++)ae[se]=0;for(se=0;!G.isZero();se++)oe=G.andln(255),G.iushrn(8),ae[J-se-1]=oe}return ae},Math.clz32?S.prototype._countBits=function(ie){return 32-Math.clz32(ie)}:S.prototype._countBits=function(ie){var W=ie,O=0;return W>=4096&&(O+=13,W>>>=13),W>=64&&(O+=7,W>>>=7),W>=8&&(O+=4,W>>>=4),W>=2&&(O+=2,W>>>=2),O+W},S.prototype._zeroBits=function(ie){if(ie===0)return 26;var W=ie,O=0;return W&8191||(O+=13,W>>>=13),W&127||(O+=7,W>>>=7),W&15||(O+=4,W>>>=4),W&3||(O+=2,W>>>=2),W&1||O++,O},S.prototype.bitLength=function(){var ie=this.words[this.length-1],W=this._countBits(ie);return(this.length-1)*26+W};function V(ye){for(var ie=new Array(ye.bitLength()),W=0;W<ie.length;W++){var O=W/26|0,z=W%26;ie[W]=(ye.words[O]&1<<z)>>>z}return ie}S.prototype.zeroBits=function(){if(this.isZero())return 0;for(var ie=0,W=0;W<this.length;W++){var O=this._zeroBits(this.words[W]);if(ie+=O,O!==26)break}return ie},S.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},S.prototype.toTwos=function(ie){return this.negative!==0?this.abs().inotn(ie).iaddn(1):this.clone()},S.prototype.fromTwos=function(ie){return this.testn(ie-1)?this.notn(ie).iaddn(1).ineg():this.clone()},S.prototype.isNeg=function(){return this.negative!==0},S.prototype.neg=function(){return this.clone().ineg()},S.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},S.prototype.iuor=function(ie){for(;this.length<ie.length;)this.words[this.length++]=0;for(var W=0;W<ie.length;W++)this.words[W]=this.words[W]|ie.words[W];return this.strip()},S.prototype.ior=function(ie){return x((this.negative|ie.negative)===0),this.iuor(ie)},S.prototype.or=function(ie){return this.length>ie.length?this.clone().ior(ie):ie.clone().ior(this)},S.prototype.uor=function(ie){return this.length>ie.length?this.clone().iuor(ie):ie.clone().iuor(this)},S.prototype.iuand=function(ie){var W;this.length>ie.length?W=ie:W=this;for(var O=0;O<W.length;O++)this.words[O]=this.words[O]&ie.words[O];return this.length=W.length,this.strip()},S.prototype.iand=function(ie){return x((this.negative|ie.negative)===0),this.iuand(ie)},S.prototype.and=function(ie){return this.length>ie.length?this.clone().iand(ie):ie.clone().iand(this)},S.prototype.uand=function(ie){return this.length>ie.length?this.clone().iuand(ie):ie.clone().iuand(this)},S.prototype.iuxor=function(ie){var W,O;this.length>ie.length?(W=this,O=ie):(W=ie,O=this);for(var z=0;z<O.length;z++)this.words[z]=W.words[z]^O.words[z];if(this!==W)for(;z<W.length;z++)this.words[z]=W.words[z];return this.length=W.length,this.strip()},S.prototype.ixor=function(ie){return x((this.negative|ie.negative)===0),this.iuxor(ie)},S.prototype.xor=function(ie){return this.length>ie.length?this.clone().ixor(ie):ie.clone().ixor(this)},S.prototype.uxor=function(ie){return this.length>ie.length?this.clone().iuxor(ie):ie.clone().iuxor(this)},S.prototype.inotn=function(ie){x(typeof ie=="number"&&ie>=0);var W=Math.ceil(ie/26)|0,O=ie%26;this._expand(W),O>0&&W--;for(var z=0;z<W;z++)this.words[z]=~this.words[z]&67108863;return O>0&&(this.words[z]=~this.words[z]&67108863>>26-O),this.strip()},S.prototype.notn=function(ie){return this.clone().inotn(ie)},S.prototype.setn=function(ie,W){x(typeof ie=="number"&&ie>=0);var O=ie/26|0,z=ie%26;return this._expand(O+1),W?this.words[O]=this.words[O]|1<<z:this.words[O]=this.words[O]&~(1<<z),this.strip()},S.prototype.iadd=function(ie){var W;if(this.negative!==0&&ie.negative===0)return this.negative=0,W=this.isub(ie),this.negative^=1,this._normSign();if(this.negative===0&&ie.negative!==0)return ie.negative=0,W=this.isub(ie),ie.negative=1,W._normSign();var O,z;this.length>ie.length?(O=this,z=ie):(O=ie,z=this);for(var J=0,ee=0;ee<z.length;ee++)W=(O.words[ee]|0)+(z.words[ee]|0)+J,this.words[ee]=W&67108863,J=W>>>26;for(;J!==0&&ee<O.length;ee++)W=(O.words[ee]|0)+J,this.words[ee]=W&67108863,J=W>>>26;if(this.length=O.length,J!==0)this.words[this.length]=J,this.length++;else if(O!==this)for(;ee<O.length;ee++)this.words[ee]=O.words[ee];return this},S.prototype.add=function(ie){var W;return ie.negative!==0&&this.negative===0?(ie.negative=0,W=this.sub(ie),ie.negative^=1,W):ie.negative===0&&this.negative!==0?(this.negative=0,W=ie.sub(this),this.negative=1,W):this.length>ie.length?this.clone().iadd(ie):ie.clone().iadd(this)},S.prototype.isub=function(ie){if(ie.negative!==0){ie.negative=0;var W=this.iadd(ie);return ie.negative=1,W._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(ie),this.negative=1,this._normSign();var O=this.cmp(ie);if(O===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,J;O>0?(z=this,J=ie):(z=ie,J=this);for(var ee=0,ae=0;ae<J.length;ae++)W=(z.words[ae]|0)-(J.words[ae]|0)+ee,ee=W>>26,this.words[ae]=W&67108863;for(;ee!==0&&ae<z.length;ae++)W=(z.words[ae]|0)+ee,ee=W>>26,this.words[ae]=W&67108863;if(ee===0&&ae<z.length&&z!==this)for(;ae<z.length;ae++)this.words[ae]=z.words[ae];return this.length=Math.max(this.length,ae),z!==this&&(this.negative=1),this.strip()},S.prototype.sub=function(ie){return this.clone().isub(ie)};function L(ye,ie,W){W.negative=ie.negative^ye.negative;var O=ye.length+ie.length|0;W.length=O,O=O-1|0;var z=ye.words[0]|0,J=ie.words[0]|0,ee=z*J,ae=ee&67108863,oe=ee/67108864|0;W.words[0]=ae;for(var se=1;se<O;se++){for(var G=oe>>>26,q=oe&67108863,te=Math.min(se,ie.length-1),fe=Math.max(0,se-ye.length+1);fe<=te;fe++){var he=se-fe|0;z=ye.words[he]|0,J=ie.words[fe]|0,ee=z*J+q,G+=ee/67108864|0,q=ee&67108863}W.words[se]=q|0,oe=G|0}return oe!==0?W.words[se]=oe|0:W.length--,W.strip()}var F=function(ie,W,O){var z=ie.words,J=W.words,ee=O.words,ae=0,oe,se,G,q=z[0]|0,te=q&8191,fe=q>>>13,he=z[1]|0,Ee=he&8191,we=he>>>13,xe=z[2]|0,$e=xe&8191,ge=xe>>>13,Se=z[3]|0,me=Se&8191,Be=Se>>>13,ve=z[4]|0,Ae=ve&8191,Ve=ve>>>13,Pe=z[5]|0,Re=Pe&8191,Ne=Pe>>>13,qe=z[6]|0,Ke=qe&8191,He=qe>>>13,Ge=z[7]|0,rt=Ge&8191,st=Ge>>>13,Je=z[8]|0,Ie=Je&8191,be=Je>>>13,Te=z[9]|0,Le=Te&8191,We=Te>>>13,Ze=J[0]|0,Qe=Ze&8191,St=Ze>>>13,pt=J[1]|0,ft=pt&8191,Ut=pt>>>13,$t=J[2]|0,Nt=$t&8191,lr=$t>>>13,Gt=J[3]|0,Rt=Gt&8191,Qt=Gt>>>13,Pt=J[4]|0,kt=Pt&8191,er=Pt>>>13,Lt=J[5]|0,Bt=Lt&8191,ir=Lt>>>13,jt=J[6]|0,Ct=jt&8191,nr=jt>>>13,je=J[7]|0,De=je&8191,Me=je>>>13,pe=J[8]|0,ke=pe&8191,Oe=pe>>>13,Fe=J[9]|0,ze=Fe&8191,Xe=Fe>>>13;O.negative=ie.negative^W.negative,O.length=19,oe=Math.imul(te,Qe),se=Math.imul(te,St),se=se+Math.imul(fe,Qe)|0,G=Math.imul(fe,St);var tt=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(tt>>>26)|0,tt&=67108863,oe=Math.imul(Ee,Qe),se=Math.imul(Ee,St),se=se+Math.imul(we,Qe)|0,G=Math.imul(we,St),oe=oe+Math.imul(te,ft)|0,se=se+Math.imul(te,Ut)|0,se=se+Math.imul(fe,ft)|0,G=G+Math.imul(fe,Ut)|0;var it=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(it>>>26)|0,it&=67108863,oe=Math.imul($e,Qe),se=Math.imul($e,St),se=se+Math.imul(ge,Qe)|0,G=Math.imul(ge,St),oe=oe+Math.imul(Ee,ft)|0,se=se+Math.imul(Ee,Ut)|0,se=se+Math.imul(we,ft)|0,G=G+Math.imul(we,Ut)|0,oe=oe+Math.imul(te,Nt)|0,se=se+Math.imul(te,lr)|0,se=se+Math.imul(fe,Nt)|0,G=G+Math.imul(fe,lr)|0;var ot=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(ot>>>26)|0,ot&=67108863,oe=Math.imul(me,Qe),se=Math.imul(me,St),se=se+Math.imul(Be,Qe)|0,G=Math.imul(Be,St),oe=oe+Math.imul($e,ft)|0,se=se+Math.imul($e,Ut)|0,se=se+Math.imul(ge,ft)|0,G=G+Math.imul(ge,Ut)|0,oe=oe+Math.imul(Ee,Nt)|0,se=se+Math.imul(Ee,lr)|0,se=se+Math.imul(we,Nt)|0,G=G+Math.imul(we,lr)|0,oe=oe+Math.imul(te,Rt)|0,se=se+Math.imul(te,Qt)|0,se=se+Math.imul(fe,Rt)|0,G=G+Math.imul(fe,Qt)|0;var at=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(at>>>26)|0,at&=67108863,oe=Math.imul(Ae,Qe),se=Math.imul(Ae,St),se=se+Math.imul(Ve,Qe)|0,G=Math.imul(Ve,St),oe=oe+Math.imul(me,ft)|0,se=se+Math.imul(me,Ut)|0,se=se+Math.imul(Be,ft)|0,G=G+Math.imul(Be,Ut)|0,oe=oe+Math.imul($e,Nt)|0,se=se+Math.imul($e,lr)|0,se=se+Math.imul(ge,Nt)|0,G=G+Math.imul(ge,lr)|0,oe=oe+Math.imul(Ee,Rt)|0,se=se+Math.imul(Ee,Qt)|0,se=se+Math.imul(we,Rt)|0,G=G+Math.imul(we,Qt)|0,oe=oe+Math.imul(te,kt)|0,se=se+Math.imul(te,er)|0,se=se+Math.imul(fe,kt)|0,G=G+Math.imul(fe,er)|0;var ct=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(ct>>>26)|0,ct&=67108863,oe=Math.imul(Re,Qe),se=Math.imul(Re,St),se=se+Math.imul(Ne,Qe)|0,G=Math.imul(Ne,St),oe=oe+Math.imul(Ae,ft)|0,se=se+Math.imul(Ae,Ut)|0,se=se+Math.imul(Ve,ft)|0,G=G+Math.imul(Ve,Ut)|0,oe=oe+Math.imul(me,Nt)|0,se=se+Math.imul(me,lr)|0,se=se+Math.imul(Be,Nt)|0,G=G+Math.imul(Be,lr)|0,oe=oe+Math.imul($e,Rt)|0,se=se+Math.imul($e,Qt)|0,se=se+Math.imul(ge,Rt)|0,G=G+Math.imul(ge,Qt)|0,oe=oe+Math.imul(Ee,kt)|0,se=se+Math.imul(Ee,er)|0,se=se+Math.imul(we,kt)|0,G=G+Math.imul(we,er)|0,oe=oe+Math.imul(te,Bt)|0,se=se+Math.imul(te,ir)|0,se=se+Math.imul(fe,Bt)|0,G=G+Math.imul(fe,ir)|0;var dt=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(dt>>>26)|0,dt&=67108863,oe=Math.imul(Ke,Qe),se=Math.imul(Ke,St),se=se+Math.imul(He,Qe)|0,G=Math.imul(He,St),oe=oe+Math.imul(Re,ft)|0,se=se+Math.imul(Re,Ut)|0,se=se+Math.imul(Ne,ft)|0,G=G+Math.imul(Ne,Ut)|0,oe=oe+Math.imul(Ae,Nt)|0,se=se+Math.imul(Ae,lr)|0,se=se+Math.imul(Ve,Nt)|0,G=G+Math.imul(Ve,lr)|0,oe=oe+Math.imul(me,Rt)|0,se=se+Math.imul(me,Qt)|0,se=se+Math.imul(Be,Rt)|0,G=G+Math.imul(Be,Qt)|0,oe=oe+Math.imul($e,kt)|0,se=se+Math.imul($e,er)|0,se=se+Math.imul(ge,kt)|0,G=G+Math.imul(ge,er)|0,oe=oe+Math.imul(Ee,Bt)|0,se=se+Math.imul(Ee,ir)|0,se=se+Math.imul(we,Bt)|0,G=G+Math.imul(we,ir)|0,oe=oe+Math.imul(te,Ct)|0,se=se+Math.imul(te,nr)|0,se=se+Math.imul(fe,Ct)|0,G=G+Math.imul(fe,nr)|0;var yt=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(yt>>>26)|0,yt&=67108863,oe=Math.imul(rt,Qe),se=Math.imul(rt,St),se=se+Math.imul(st,Qe)|0,G=Math.imul(st,St),oe=oe+Math.imul(Ke,ft)|0,se=se+Math.imul(Ke,Ut)|0,se=se+Math.imul(He,ft)|0,G=G+Math.imul(He,Ut)|0,oe=oe+Math.imul(Re,Nt)|0,se=se+Math.imul(Re,lr)|0,se=se+Math.imul(Ne,Nt)|0,G=G+Math.imul(Ne,lr)|0,oe=oe+Math.imul(Ae,Rt)|0,se=se+Math.imul(Ae,Qt)|0,se=se+Math.imul(Ve,Rt)|0,G=G+Math.imul(Ve,Qt)|0,oe=oe+Math.imul(me,kt)|0,se=se+Math.imul(me,er)|0,se=se+Math.imul(Be,kt)|0,G=G+Math.imul(Be,er)|0,oe=oe+Math.imul($e,Bt)|0,se=se+Math.imul($e,ir)|0,se=se+Math.imul(ge,Bt)|0,G=G+Math.imul(ge,ir)|0,oe=oe+Math.imul(Ee,Ct)|0,se=se+Math.imul(Ee,nr)|0,se=se+Math.imul(we,Ct)|0,G=G+Math.imul(we,nr)|0,oe=oe+Math.imul(te,De)|0,se=se+Math.imul(te,Me)|0,se=se+Math.imul(fe,De)|0,G=G+Math.imul(fe,Me)|0;var Et=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(Et>>>26)|0,Et&=67108863,oe=Math.imul(Ie,Qe),se=Math.imul(Ie,St),se=se+Math.imul(be,Qe)|0,G=Math.imul(be,St),oe=oe+Math.imul(rt,ft)|0,se=se+Math.imul(rt,Ut)|0,se=se+Math.imul(st,ft)|0,G=G+Math.imul(st,Ut)|0,oe=oe+Math.imul(Ke,Nt)|0,se=se+Math.imul(Ke,lr)|0,se=se+Math.imul(He,Nt)|0,G=G+Math.imul(He,lr)|0,oe=oe+Math.imul(Re,Rt)|0,se=se+Math.imul(Re,Qt)|0,se=se+Math.imul(Ne,Rt)|0,G=G+Math.imul(Ne,Qt)|0,oe=oe+Math.imul(Ae,kt)|0,se=se+Math.imul(Ae,er)|0,se=se+Math.imul(Ve,kt)|0,G=G+Math.imul(Ve,er)|0,oe=oe+Math.imul(me,Bt)|0,se=se+Math.imul(me,ir)|0,se=se+Math.imul(Be,Bt)|0,G=G+Math.imul(Be,ir)|0,oe=oe+Math.imul($e,Ct)|0,se=se+Math.imul($e,nr)|0,se=se+Math.imul(ge,Ct)|0,G=G+Math.imul(ge,nr)|0,oe=oe+Math.imul(Ee,De)|0,se=se+Math.imul(Ee,Me)|0,se=se+Math.imul(we,De)|0,G=G+Math.imul(we,Me)|0,oe=oe+Math.imul(te,ke)|0,se=se+Math.imul(te,Oe)|0,se=se+Math.imul(fe,ke)|0,G=G+Math.imul(fe,Oe)|0;var mt=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(mt>>>26)|0,mt&=67108863,oe=Math.imul(Le,Qe),se=Math.imul(Le,St),se=se+Math.imul(We,Qe)|0,G=Math.imul(We,St),oe=oe+Math.imul(Ie,ft)|0,se=se+Math.imul(Ie,Ut)|0,se=se+Math.imul(be,ft)|0,G=G+Math.imul(be,Ut)|0,oe=oe+Math.imul(rt,Nt)|0,se=se+Math.imul(rt,lr)|0,se=se+Math.imul(st,Nt)|0,G=G+Math.imul(st,lr)|0,oe=oe+Math.imul(Ke,Rt)|0,se=se+Math.imul(Ke,Qt)|0,se=se+Math.imul(He,Rt)|0,G=G+Math.imul(He,Qt)|0,oe=oe+Math.imul(Re,kt)|0,se=se+Math.imul(Re,er)|0,se=se+Math.imul(Ne,kt)|0,G=G+Math.imul(Ne,er)|0,oe=oe+Math.imul(Ae,Bt)|0,se=se+Math.imul(Ae,ir)|0,se=se+Math.imul(Ve,Bt)|0,G=G+Math.imul(Ve,ir)|0,oe=oe+Math.imul(me,Ct)|0,se=se+Math.imul(me,nr)|0,se=se+Math.imul(Be,Ct)|0,G=G+Math.imul(Be,nr)|0,oe=oe+Math.imul($e,De)|0,se=se+Math.imul($e,Me)|0,se=se+Math.imul(ge,De)|0,G=G+Math.imul(ge,Me)|0,oe=oe+Math.imul(Ee,ke)|0,se=se+Math.imul(Ee,Oe)|0,se=se+Math.imul(we,ke)|0,G=G+Math.imul(we,Oe)|0,oe=oe+Math.imul(te,ze)|0,se=se+Math.imul(te,Xe)|0,se=se+Math.imul(fe,ze)|0,G=G+Math.imul(fe,Xe)|0;var xt=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(xt>>>26)|0,xt&=67108863,oe=Math.imul(Le,ft),se=Math.imul(Le,Ut),se=se+Math.imul(We,ft)|0,G=Math.imul(We,Ut),oe=oe+Math.imul(Ie,Nt)|0,se=se+Math.imul(Ie,lr)|0,se=se+Math.imul(be,Nt)|0,G=G+Math.imul(be,lr)|0,oe=oe+Math.imul(rt,Rt)|0,se=se+Math.imul(rt,Qt)|0,se=se+Math.imul(st,Rt)|0,G=G+Math.imul(st,Qt)|0,oe=oe+Math.imul(Ke,kt)|0,se=se+Math.imul(Ke,er)|0,se=se+Math.imul(He,kt)|0,G=G+Math.imul(He,er)|0,oe=oe+Math.imul(Re,Bt)|0,se=se+Math.imul(Re,ir)|0,se=se+Math.imul(Ne,Bt)|0,G=G+Math.imul(Ne,ir)|0,oe=oe+Math.imul(Ae,Ct)|0,se=se+Math.imul(Ae,nr)|0,se=se+Math.imul(Ve,Ct)|0,G=G+Math.imul(Ve,nr)|0,oe=oe+Math.imul(me,De)|0,se=se+Math.imul(me,Me)|0,se=se+Math.imul(Be,De)|0,G=G+Math.imul(Be,Me)|0,oe=oe+Math.imul($e,ke)|0,se=se+Math.imul($e,Oe)|0,se=se+Math.imul(ge,ke)|0,G=G+Math.imul(ge,Oe)|0,oe=oe+Math.imul(Ee,ze)|0,se=se+Math.imul(Ee,Xe)|0,se=se+Math.imul(we,ze)|0,G=G+Math.imul(we,Xe)|0;var Mt=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,oe=Math.imul(Le,Nt),se=Math.imul(Le,lr),se=se+Math.imul(We,Nt)|0,G=Math.imul(We,lr),oe=oe+Math.imul(Ie,Rt)|0,se=se+Math.imul(Ie,Qt)|0,se=se+Math.imul(be,Rt)|0,G=G+Math.imul(be,Qt)|0,oe=oe+Math.imul(rt,kt)|0,se=se+Math.imul(rt,er)|0,se=se+Math.imul(st,kt)|0,G=G+Math.imul(st,er)|0,oe=oe+Math.imul(Ke,Bt)|0,se=se+Math.imul(Ke,ir)|0,se=se+Math.imul(He,Bt)|0,G=G+Math.imul(He,ir)|0,oe=oe+Math.imul(Re,Ct)|0,se=se+Math.imul(Re,nr)|0,se=se+Math.imul(Ne,Ct)|0,G=G+Math.imul(Ne,nr)|0,oe=oe+Math.imul(Ae,De)|0,se=se+Math.imul(Ae,Me)|0,se=se+Math.imul(Ve,De)|0,G=G+Math.imul(Ve,Me)|0,oe=oe+Math.imul(me,ke)|0,se=se+Math.imul(me,Oe)|0,se=se+Math.imul(Be,ke)|0,G=G+Math.imul(Be,Oe)|0,oe=oe+Math.imul($e,ze)|0,se=se+Math.imul($e,Xe)|0,se=se+Math.imul(ge,ze)|0,G=G+Math.imul(ge,Xe)|0;var Ot=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,oe=Math.imul(Le,Rt),se=Math.imul(Le,Qt),se=se+Math.imul(We,Rt)|0,G=Math.imul(We,Qt),oe=oe+Math.imul(Ie,kt)|0,se=se+Math.imul(Ie,er)|0,se=se+Math.imul(be,kt)|0,G=G+Math.imul(be,er)|0,oe=oe+Math.imul(rt,Bt)|0,se=se+Math.imul(rt,ir)|0,se=se+Math.imul(st,Bt)|0,G=G+Math.imul(st,ir)|0,oe=oe+Math.imul(Ke,Ct)|0,se=se+Math.imul(Ke,nr)|0,se=se+Math.imul(He,Ct)|0,G=G+Math.imul(He,nr)|0,oe=oe+Math.imul(Re,De)|0,se=se+Math.imul(Re,Me)|0,se=se+Math.imul(Ne,De)|0,G=G+Math.imul(Ne,Me)|0,oe=oe+Math.imul(Ae,ke)|0,se=se+Math.imul(Ae,Oe)|0,se=se+Math.imul(Ve,ke)|0,G=G+Math.imul(Ve,Oe)|0,oe=oe+Math.imul(me,ze)|0,se=se+Math.imul(me,Xe)|0,se=se+Math.imul(Be,ze)|0,G=G+Math.imul(Be,Xe)|0;var Ht=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,oe=Math.imul(Le,kt),se=Math.imul(Le,er),se=se+Math.imul(We,kt)|0,G=Math.imul(We,er),oe=oe+Math.imul(Ie,Bt)|0,se=se+Math.imul(Ie,ir)|0,se=se+Math.imul(be,Bt)|0,G=G+Math.imul(be,ir)|0,oe=oe+Math.imul(rt,Ct)|0,se=se+Math.imul(rt,nr)|0,se=se+Math.imul(st,Ct)|0,G=G+Math.imul(st,nr)|0,oe=oe+Math.imul(Ke,De)|0,se=se+Math.imul(Ke,Me)|0,se=se+Math.imul(He,De)|0,G=G+Math.imul(He,Me)|0,oe=oe+Math.imul(Re,ke)|0,se=se+Math.imul(Re,Oe)|0,se=se+Math.imul(Ne,ke)|0,G=G+Math.imul(Ne,Oe)|0,oe=oe+Math.imul(Ae,ze)|0,se=se+Math.imul(Ae,Xe)|0,se=se+Math.imul(Ve,ze)|0,G=G+Math.imul(Ve,Xe)|0;var Ft=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,oe=Math.imul(Le,Bt),se=Math.imul(Le,ir),se=se+Math.imul(We,Bt)|0,G=Math.imul(We,ir),oe=oe+Math.imul(Ie,Ct)|0,se=se+Math.imul(Ie,nr)|0,se=se+Math.imul(be,Ct)|0,G=G+Math.imul(be,nr)|0,oe=oe+Math.imul(rt,De)|0,se=se+Math.imul(rt,Me)|0,se=se+Math.imul(st,De)|0,G=G+Math.imul(st,Me)|0,oe=oe+Math.imul(Ke,ke)|0,se=se+Math.imul(Ke,Oe)|0,se=se+Math.imul(He,ke)|0,G=G+Math.imul(He,Oe)|0,oe=oe+Math.imul(Re,ze)|0,se=se+Math.imul(Re,Xe)|0,se=se+Math.imul(Ne,ze)|0,G=G+Math.imul(Ne,Xe)|0;var Wt=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,oe=Math.imul(Le,Ct),se=Math.imul(Le,nr),se=se+Math.imul(We,Ct)|0,G=Math.imul(We,nr),oe=oe+Math.imul(Ie,De)|0,se=se+Math.imul(Ie,Me)|0,se=se+Math.imul(be,De)|0,G=G+Math.imul(be,Me)|0,oe=oe+Math.imul(rt,ke)|0,se=se+Math.imul(rt,Oe)|0,se=se+Math.imul(st,ke)|0,G=G+Math.imul(st,Oe)|0,oe=oe+Math.imul(Ke,ze)|0,se=se+Math.imul(Ke,Xe)|0,se=se+Math.imul(He,ze)|0,G=G+Math.imul(He,Xe)|0;var Jt=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,oe=Math.imul(Le,De),se=Math.imul(Le,Me),se=se+Math.imul(We,De)|0,G=Math.imul(We,Me),oe=oe+Math.imul(Ie,ke)|0,se=se+Math.imul(Ie,Oe)|0,se=se+Math.imul(be,ke)|0,G=G+Math.imul(be,Oe)|0,oe=oe+Math.imul(rt,ze)|0,se=se+Math.imul(rt,Xe)|0,se=se+Math.imul(st,ze)|0,G=G+Math.imul(st,Xe)|0;var Kt=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,oe=Math.imul(Le,ke),se=Math.imul(Le,Oe),se=se+Math.imul(We,ke)|0,G=Math.imul(We,Oe),oe=oe+Math.imul(Ie,ze)|0,se=se+Math.imul(Ie,Xe)|0,se=se+Math.imul(be,ze)|0,G=G+Math.imul(be,Xe)|0;var gt=(ae+oe|0)+((se&8191)<<13)|0;ae=(G+(se>>>13)|0)+(gt>>>26)|0,gt&=67108863,oe=Math.imul(Le,ze),se=Math.imul(Le,Xe),se=se+Math.imul(We,ze)|0,G=Math.imul(We,Xe);var _t=(ae+oe|0)+((se&8191)<<13)|0;return ae=(G+(se>>>13)|0)+(_t>>>26)|0,_t&=67108863,ee[0]=tt,ee[1]=it,ee[2]=ot,ee[3]=at,ee[4]=ct,ee[5]=dt,ee[6]=yt,ee[7]=Et,ee[8]=mt,ee[9]=xt,ee[10]=Mt,ee[11]=Ot,ee[12]=Ht,ee[13]=Ft,ee[14]=Wt,ee[15]=Jt,ee[16]=Kt,ee[17]=gt,ee[18]=_t,ae!==0&&(ee[19]=ae,O.length++),O};Math.imul||(F=L);function j(ye,ie,W){W.negative=ie.negative^ye.negative,W.length=ye.length+ie.length;for(var O=0,z=0,J=0;J<W.length-1;J++){var ee=z;z=0;for(var ae=O&67108863,oe=Math.min(J,ie.length-1),se=Math.max(0,J-ye.length+1);se<=oe;se++){var G=J-se,q=ye.words[G]|0,te=ie.words[se]|0,fe=q*te,he=fe&67108863;ee=ee+(fe/67108864|0)|0,he=he+ae|0,ae=he&67108863,ee=ee+(he>>>26)|0,z+=ee>>>26,ee&=67108863}W.words[J]=ae,O=ee,ee=z}return O!==0?W.words[J]=O:W.length--,W.strip()}function U(ye,ie,W){var O=new H;return O.mulp(ye,ie,W)}S.prototype.mulTo=function(ie,W){var O,z=this.length+ie.length;return this.length===10&&ie.length===10?O=F(this,ie,W):z<63?O=L(this,ie,W):z<1024?O=j(this,ie,W):O=U(this,ie,W),O};function H(ye,ie){this.x=ye,this.y=ie}H.prototype.makeRBT=function(ie){for(var W=new Array(ie),O=S.prototype._countBits(ie)-1,z=0;z<ie;z++)W[z]=this.revBin(z,O,ie);return W},H.prototype.revBin=function(ie,W,O){if(ie===0||ie===O-1)return ie;for(var z=0,J=0;J<W;J++)z|=(ie&1)<<W-J-1,ie>>=1;return z},H.prototype.permute=function(ie,W,O,z,J,ee){for(var ae=0;ae<ee;ae++)z[ae]=W[ie[ae]],J[ae]=O[ie[ae]]},H.prototype.transform=function(ie,W,O,z,J,ee){this.permute(ee,ie,W,O,z,J);for(var ae=1;ae<J;ae<<=1)for(var oe=ae<<1,se=Math.cos(2*Math.PI/oe),G=Math.sin(2*Math.PI/oe),q=0;q<J;q+=oe)for(var te=se,fe=G,he=0;he<ae;he++){var Ee=O[q+he],we=z[q+he],xe=O[q+he+ae],$e=z[q+he+ae],ge=te*xe-fe*$e;$e=te*$e+fe*xe,xe=ge,O[q+he]=Ee+xe,z[q+he]=we+$e,O[q+he+ae]=Ee-xe,z[q+he+ae]=we-$e,he!==oe&&(ge=se*te-G*fe,fe=se*fe+G*te,te=ge)}},H.prototype.guessLen13b=function(ie,W){var O=Math.max(W,ie)|1,z=O&1,J=0;for(O=O/2|0;O;O=O>>>1)J++;return 1<<J+1+z},H.prototype.conjugate=function(ie,W,O){if(!(O<=1))for(var z=0;z<O/2;z++){var J=ie[z];ie[z]=ie[O-z-1],ie[O-z-1]=J,J=W[z],W[z]=-W[O-z-1],W[O-z-1]=-J}},H.prototype.normalize13b=function(ie,W){for(var O=0,z=0;z<W/2;z++){var J=Math.round(ie[2*z+1]/W)*8192+Math.round(ie[2*z]/W)+O;ie[z]=J&67108863,J<67108864?O=0:O=J/67108864|0}return ie},H.prototype.convert13b=function(ie,W,O,z){for(var J=0,ee=0;ee<W;ee++)J=J+(ie[ee]|0),O[2*ee]=J&8191,J=J>>>13,O[2*ee+1]=J&8191,J=J>>>13;for(ee=2*W;ee<z;++ee)O[ee]=0;x(J===0),x((J&-8192)===0)},H.prototype.stub=function(ie){for(var W=new Array(ie),O=0;O<ie;O++)W[O]=0;return W},H.prototype.mulp=function(ie,W,O){var z=2*this.guessLen13b(ie.length,W.length),J=this.makeRBT(z),ee=this.stub(z),ae=new Array(z),oe=new Array(z),se=new Array(z),G=new Array(z),q=new Array(z),te=new Array(z),fe=O.words;fe.length=z,this.convert13b(ie.words,ie.length,ae,z),this.convert13b(W.words,W.length,G,z),this.transform(ae,ee,oe,se,z,J),this.transform(G,ee,q,te,z,J);for(var he=0;he<z;he++){var Ee=oe[he]*q[he]-se[he]*te[he];se[he]=oe[he]*te[he]+se[he]*q[he],oe[he]=Ee}return this.conjugate(oe,se,z),this.transform(oe,se,fe,ee,z,J),this.conjugate(fe,ee,z),this.normalize13b(fe,z),O.negative=ie.negative^W.negative,O.length=ie.length+W.length,O.strip()},S.prototype.mul=function(ie){var W=new S(null);return W.words=new Array(this.length+ie.length),this.mulTo(ie,W)},S.prototype.mulf=function(ie){var W=new S(null);return W.words=new Array(this.length+ie.length),U(this,ie,W)},S.prototype.imul=function(ie){return this.clone().mulTo(ie,this)},S.prototype.imuln=function(ie){x(typeof ie=="number"),x(ie<67108864);for(var W=0,O=0;O<this.length;O++){var z=(this.words[O]|0)*ie,J=(z&67108863)+(W&67108863);W>>=26,W+=z/67108864|0,W+=J>>>26,this.words[O]=J&67108863}return W!==0&&(this.words[O]=W,this.length++),this},S.prototype.muln=function(ie){return this.clone().imuln(ie)},S.prototype.sqr=function(){return this.mul(this)},S.prototype.isqr=function(){return this.imul(this.clone())},S.prototype.pow=function(ie){var W=V(ie);if(W.length===0)return new S(1);for(var O=this,z=0;z<W.length&&W[z]===0;z++,O=O.sqr());if(++z<W.length)for(var J=O.sqr();z<W.length;z++,J=J.sqr())W[z]!==0&&(O=O.mul(J));return O},S.prototype.iushln=function(ie){x(typeof ie=="number"&&ie>=0);var W=ie%26,O=(ie-W)/26,z=67108863>>>26-W<<26-W,J;if(W!==0){var ee=0;for(J=0;J<this.length;J++){var ae=this.words[J]&z,oe=(this.words[J]|0)-ae<<W;this.words[J]=oe|ee,ee=ae>>>26-W}ee&&(this.words[J]=ee,this.length++)}if(O!==0){for(J=this.length-1;J>=0;J--)this.words[J+O]=this.words[J];for(J=0;J<O;J++)this.words[J]=0;this.length+=O}return this.strip()},S.prototype.ishln=function(ie){return x(this.negative===0),this.iushln(ie)},S.prototype.iushrn=function(ie,W,O){x(typeof ie=="number"&&ie>=0);var z;W?z=(W-W%26)/26:z=0;var J=ie%26,ee=Math.min((ie-J)/26,this.length),ae=67108863^67108863>>>J<<J,oe=O;if(z-=ee,z=Math.max(0,z),oe){for(var se=0;se<ee;se++)oe.words[se]=this.words[se];oe.length=ee}if(ee!==0)if(this.length>ee)for(this.length-=ee,se=0;se<this.length;se++)this.words[se]=this.words[se+ee];else this.words[0]=0,this.length=1;var G=0;for(se=this.length-1;se>=0&&(G!==0||se>=z);se--){var q=this.words[se]|0;this.words[se]=G<<26-J|q>>>J,G=q&ae}return oe&&G!==0&&(oe.words[oe.length++]=G),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},S.prototype.ishrn=function(ie,W,O){return x(this.negative===0),this.iushrn(ie,W,O)},S.prototype.shln=function(ie){return this.clone().ishln(ie)},S.prototype.ushln=function(ie){return this.clone().iushln(ie)},S.prototype.shrn=function(ie){return this.clone().ishrn(ie)},S.prototype.ushrn=function(ie){return this.clone().iushrn(ie)},S.prototype.testn=function(ie){x(typeof ie=="number"&&ie>=0);var W=ie%26,O=(ie-W)/26,z=1<<W;if(this.length<=O)return!1;var J=this.words[O];return!!(J&z)},S.prototype.imaskn=function(ie){x(typeof ie=="number"&&ie>=0);var W=ie%26,O=(ie-W)/26;if(x(this.negative===0,"imaskn works only with positive numbers"),this.length<=O)return this;if(W!==0&&O++,this.length=Math.min(O,this.length),W!==0){var z=67108863^67108863>>>W<<W;this.words[this.length-1]&=z}return this.strip()},S.prototype.maskn=function(ie){return this.clone().imaskn(ie)},S.prototype.iaddn=function(ie){return x(typeof ie=="number"),x(ie<67108864),ie<0?this.isubn(-ie):this.negative!==0?this.length===1&&(this.words[0]|0)<ie?(this.words[0]=ie-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(ie),this.negative=1,this):this._iaddn(ie)},S.prototype._iaddn=function(ie){this.words[0]+=ie;for(var W=0;W<this.length&&this.words[W]>=67108864;W++)this.words[W]-=67108864,W===this.length-1?this.words[W+1]=1:this.words[W+1]++;return this.length=Math.max(this.length,W+1),this},S.prototype.isubn=function(ie){if(x(typeof ie=="number"),x(ie<67108864),ie<0)return this.iaddn(-ie);if(this.negative!==0)return this.negative=0,this.iaddn(ie),this.negative=1,this;if(this.words[0]-=ie,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var W=0;W<this.length&&this.words[W]<0;W++)this.words[W]+=67108864,this.words[W+1]-=1;return this.strip()},S.prototype.addn=function(ie){return this.clone().iaddn(ie)},S.prototype.subn=function(ie){return this.clone().isubn(ie)},S.prototype.iabs=function(){return this.negative=0,this},S.prototype.abs=function(){return this.clone().iabs()},S.prototype._ishlnsubmul=function(ie,W,O){var z=ie.length+O,J;this._expand(z);var ee,ae=0;for(J=0;J<ie.length;J++){ee=(this.words[J+O]|0)+ae;var oe=(ie.words[J]|0)*W;ee-=oe&67108863,ae=(ee>>26)-(oe/67108864|0),this.words[J+O]=ee&67108863}for(;J<this.length-O;J++)ee=(this.words[J+O]|0)+ae,ae=ee>>26,this.words[J+O]=ee&67108863;if(ae===0)return this.strip();for(x(ae===-1),ae=0,J=0;J<this.length;J++)ee=-(this.words[J]|0)+ae,ae=ee>>26,this.words[J]=ee&67108863;return this.negative=1,this.strip()},S.prototype._wordDiv=function(ie,W){var O=this.length-ie.length,z=this.clone(),J=ie,ee=J.words[J.length-1]|0,ae=this._countBits(ee);O=26-ae,O!==0&&(J=J.ushln(O),z.iushln(O),ee=J.words[J.length-1]|0);var oe=z.length-J.length,se;if(W!=="mod"){se=new S(null),se.length=oe+1,se.words=new Array(se.length);for(var G=0;G<se.length;G++)se.words[G]=0}var q=z.clone()._ishlnsubmul(J,1,oe);q.negative===0&&(z=q,se&&(se.words[oe]=1));for(var te=oe-1;te>=0;te--){var fe=(z.words[J.length+te]|0)*67108864+(z.words[J.length+te-1]|0);for(fe=Math.min(fe/ee|0,67108863),z._ishlnsubmul(J,fe,te);z.negative!==0;)fe--,z.negative=0,z._ishlnsubmul(J,1,te),z.isZero()||(z.negative^=1);se&&(se.words[te]=fe)}return se&&se.strip(),z.strip(),W!=="div"&&O!==0&&z.iushrn(O),{div:se||null,mod:z}},S.prototype.divmod=function(ie,W,O){if(x(!ie.isZero()),this.isZero())return{div:new S(0),mod:new S(0)};var z,J,ee;return this.negative!==0&&ie.negative===0?(ee=this.neg().divmod(ie,W),W!=="mod"&&(z=ee.div.neg()),W!=="div"&&(J=ee.mod.neg(),O&&J.negative!==0&&J.iadd(ie)),{div:z,mod:J}):this.negative===0&&ie.negative!==0?(ee=this.divmod(ie.neg(),W),W!=="mod"&&(z=ee.div.neg()),{div:z,mod:ee.mod}):this.negative&ie.negative?(ee=this.neg().divmod(ie.neg(),W),W!=="div"&&(J=ee.mod.neg(),O&&J.negative!==0&&J.isub(ie)),{div:ee.div,mod:J}):ie.length>this.length||this.cmp(ie)<0?{div:new S(0),mod:this}:ie.length===1?W==="div"?{div:this.divn(ie.words[0]),mod:null}:W==="mod"?{div:null,mod:new S(this.modn(ie.words[0]))}:{div:this.divn(ie.words[0]),mod:new S(this.modn(ie.words[0]))}:this._wordDiv(ie,W)},S.prototype.div=function(ie){return this.divmod(ie,"div",!1).div},S.prototype.mod=function(ie){return this.divmod(ie,"mod",!1).mod},S.prototype.umod=function(ie){return this.divmod(ie,"mod",!0).mod},S.prototype.divRound=function(ie){var W=this.divmod(ie);if(W.mod.isZero())return W.div;var O=W.div.negative!==0?W.mod.isub(ie):W.mod,z=ie.ushrn(1),J=ie.andln(1),ee=O.cmp(z);return ee<0||J===1&&ee===0?W.div:W.div.negative!==0?W.div.isubn(1):W.div.iaddn(1)},S.prototype.modn=function(ie){x(ie<=67108863);for(var W=(1<<26)%ie,O=0,z=this.length-1;z>=0;z--)O=(W*O+(this.words[z]|0))%ie;return O},S.prototype.idivn=function(ie){x(ie<=67108863);for(var W=0,O=this.length-1;O>=0;O--){var z=(this.words[O]|0)+W*67108864;this.words[O]=z/ie|0,W=z%ie}return this.strip()},S.prototype.divn=function(ie){return this.clone().idivn(ie)},S.prototype.egcd=function(ie){x(ie.negative===0),x(!ie.isZero());var W=this,O=ie.clone();W.negative!==0?W=W.umod(ie):W=W.clone();for(var z=new S(1),J=new S(0),ee=new S(0),ae=new S(1),oe=0;W.isEven()&&O.isEven();)W.iushrn(1),O.iushrn(1),++oe;for(var se=O.clone(),G=W.clone();!W.isZero();){for(var q=0,te=1;!(W.words[0]&te)&&q<26;++q,te<<=1);if(q>0)for(W.iushrn(q);q-- >0;)(z.isOdd()||J.isOdd())&&(z.iadd(se),J.isub(G)),z.iushrn(1),J.iushrn(1);for(var fe=0,he=1;!(O.words[0]&he)&&fe<26;++fe,he<<=1);if(fe>0)for(O.iushrn(fe);fe-- >0;)(ee.isOdd()||ae.isOdd())&&(ee.iadd(se),ae.isub(G)),ee.iushrn(1),ae.iushrn(1);W.cmp(O)>=0?(W.isub(O),z.isub(ee),J.isub(ae)):(O.isub(W),ee.isub(z),ae.isub(J))}return{a:ee,b:ae,gcd:O.iushln(oe)}},S.prototype._invmp=function(ie){x(ie.negative===0),x(!ie.isZero());var W=this,O=ie.clone();W.negative!==0?W=W.umod(ie):W=W.clone();for(var z=new S(1),J=new S(0),ee=O.clone();W.cmpn(1)>0&&O.cmpn(1)>0;){for(var ae=0,oe=1;!(W.words[0]&oe)&&ae<26;++ae,oe<<=1);if(ae>0)for(W.iushrn(ae);ae-- >0;)z.isOdd()&&z.iadd(ee),z.iushrn(1);for(var se=0,G=1;!(O.words[0]&G)&&se<26;++se,G<<=1);if(se>0)for(O.iushrn(se);se-- >0;)J.isOdd()&&J.iadd(ee),J.iushrn(1);W.cmp(O)>=0?(W.isub(O),z.isub(J)):(O.isub(W),J.isub(z))}var q;return W.cmpn(1)===0?q=z:q=J,q.cmpn(0)<0&&q.iadd(ie),q},S.prototype.gcd=function(ie){if(this.isZero())return ie.abs();if(ie.isZero())return this.abs();var W=this.clone(),O=ie.clone();W.negative=0,O.negative=0;for(var z=0;W.isEven()&&O.isEven();z++)W.iushrn(1),O.iushrn(1);do{for(;W.isEven();)W.iushrn(1);for(;O.isEven();)O.iushrn(1);var J=W.cmp(O);if(J<0){var ee=W;W=O,O=ee}else if(J===0||O.cmpn(1)===0)break;W.isub(O)}while(!0);return O.iushln(z)},S.prototype.invm=function(ie){return this.egcd(ie).a.umod(ie)},S.prototype.isEven=function(){return(this.words[0]&1)===0},S.prototype.isOdd=function(){return(this.words[0]&1)===1},S.prototype.andln=function(ie){return this.words[0]&ie},S.prototype.bincn=function(ie){x(typeof ie=="number");var W=ie%26,O=(ie-W)/26,z=1<<W;if(this.length<=O)return this._expand(O+1),this.words[O]|=z,this;for(var J=z,ee=O;J!==0&&ee<this.length;ee++){var ae=this.words[ee]|0;ae+=J,J=ae>>>26,ae&=67108863,this.words[ee]=ae}return J!==0&&(this.words[ee]=J,this.length++),this},S.prototype.isZero=function(){return this.length===1&&this.words[0]===0},S.prototype.cmpn=function(ie){var W=ie<0;if(this.negative!==0&&!W)return-1;if(this.negative===0&&W)return 1;this.strip();var O;if(this.length>1)O=1;else{W&&(ie=-ie),x(ie<=67108863,"Number is too big");var z=this.words[0]|0;O=z===ie?0:z<ie?-1:1}return this.negative!==0?-O|0:O},S.prototype.cmp=function(ie){if(this.negative!==0&&ie.negative===0)return-1;if(this.negative===0&&ie.negative!==0)return 1;var W=this.ucmp(ie);return this.negative!==0?-W|0:W},S.prototype.ucmp=function(ie){if(this.length>ie.length)return 1;if(this.length<ie.length)return-1;for(var W=0,O=this.length-1;O>=0;O--){var z=this.words[O]|0,J=ie.words[O]|0;if(z!==J){z<J?W=-1:z>J&&(W=1);break}}return W},S.prototype.gtn=function(ie){return this.cmpn(ie)===1},S.prototype.gt=function(ie){return this.cmp(ie)===1},S.prototype.gten=function(ie){return this.cmpn(ie)>=0},S.prototype.gte=function(ie){return this.cmp(ie)>=0},S.prototype.ltn=function(ie){return this.cmpn(ie)===-1},S.prototype.lt=function(ie){return this.cmp(ie)===-1},S.prototype.lten=function(ie){return this.cmpn(ie)<=0},S.prototype.lte=function(ie){return this.cmp(ie)<=0},S.prototype.eqn=function(ie){return this.cmpn(ie)===0},S.prototype.eq=function(ie){return this.cmp(ie)===0},S.red=function(ie){return new ue(ie)},S.prototype.toRed=function(ie){return x(!this.red,"Already a number in reduction context"),x(this.negative===0,"red works only with positives"),ie.convertTo(this)._forceRed(ie)},S.prototype.fromRed=function(){return x(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},S.prototype._forceRed=function(ie){return this.red=ie,this},S.prototype.forceRed=function(ie){return x(!this.red,"Already a number in reduction context"),this._forceRed(ie)},S.prototype.redAdd=function(ie){return x(this.red,"redAdd works only with red numbers"),this.red.add(this,ie)},S.prototype.redIAdd=function(ie){return x(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,ie)},S.prototype.redSub=function(ie){return x(this.red,"redSub works only with red numbers"),this.red.sub(this,ie)},S.prototype.redISub=function(ie){return x(this.red,"redISub works only with red numbers"),this.red.isub(this,ie)},S.prototype.redShl=function(ie){return x(this.red,"redShl works only with red numbers"),this.red.shl(this,ie)},S.prototype.redMul=function(ie){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,ie),this.red.mul(this,ie)},S.prototype.redIMul=function(ie){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,ie),this.red.imul(this,ie)},S.prototype.redSqr=function(){return x(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},S.prototype.redISqr=function(){return x(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},S.prototype.redSqrt=function(){return x(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},S.prototype.redInvm=function(){return x(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},S.prototype.redNeg=function(){return x(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},S.prototype.redPow=function(ie){return x(this.red&&!ie.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,ie)};var Y={k256:null,p224:null,p192:null,p25519:null};function Z(ye,ie){this.name=ye,this.p=new S(ie,16),this.n=this.p.bitLength(),this.k=new S(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Z.prototype._tmp=function(){var ie=new S(null);return ie.words=new Array(Math.ceil(this.n/13)),ie},Z.prototype.ireduce=function(ie){var W=ie,O;do this.split(W,this.tmp),W=this.imulK(W),W=W.iadd(this.tmp),O=W.bitLength();while(O>this.n);var z=O<this.n?-1:W.ucmp(this.p);return z===0?(W.words[0]=0,W.length=1):z>0?W.isub(this.p):W.strip!==void 0?W.strip():W._strip(),W},Z.prototype.split=function(ie,W){ie.iushrn(this.n,0,W)},Z.prototype.imulK=function(ie){return ie.imul(this.k)};function ne(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}E(ne,Z),ne.prototype.split=function(ie,W){for(var O=4194303,z=Math.min(ie.length,9),J=0;J<z;J++)W.words[J]=ie.words[J];if(W.length=z,ie.length<=9){ie.words[0]=0,ie.length=1;return}var ee=ie.words[9];for(W.words[W.length++]=ee&O,J=10;J<ie.length;J++){var ae=ie.words[J]|0;ie.words[J-10]=(ae&O)<<4|ee>>>22,ee=ae}ee>>>=22,ie.words[J-10]=ee,ee===0&&ie.length>10?ie.length-=10:ie.length-=9},ne.prototype.imulK=function(ie){ie.words[ie.length]=0,ie.words[ie.length+1]=0,ie.length+=2;for(var W=0,O=0;O<ie.length;O++){var z=ie.words[O]|0;W+=z*977,ie.words[O]=W&67108863,W=z*64+(W/67108864|0)}return ie.words[ie.length-1]===0&&(ie.length--,ie.words[ie.length-1]===0&&ie.length--),ie};function re(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}E(re,Z);function X(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}E(X,Z);function ce(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}E(ce,Z),ce.prototype.imulK=function(ie){for(var W=0,O=0;O<ie.length;O++){var z=(ie.words[O]|0)*19+W,J=z&67108863;z>>>=26,ie.words[O]=J,W=z}return W!==0&&(ie.words[ie.length++]=W),ie},S._prime=function(ie){if(Y[ie])return Y[ie];var W;if(ie==="k256")W=new ne;else if(ie==="p224")W=new re;else if(ie==="p192")W=new X;else if(ie==="p25519")W=new ce;else throw new Error("Unknown prime "+ie);return Y[ie]=W,W};function ue(ye){if(typeof ye=="string"){var ie=S._prime(ye);this.m=ie.p,this.prime=ie}else x(ye.gtn(1),"modulus must be greater than 1"),this.m=ye,this.prime=null}ue.prototype._verify1=function(ie){x(ie.negative===0,"red works only with positives"),x(ie.red,"red works only with red numbers")},ue.prototype._verify2=function(ie,W){x((ie.negative|W.negative)===0,"red works only with positives"),x(ie.red&&ie.red===W.red,"red works only with red numbers")},ue.prototype.imod=function(ie){return this.prime?this.prime.ireduce(ie)._forceRed(this):ie.umod(this.m)._forceRed(this)},ue.prototype.neg=function(ie){return ie.isZero()?ie.clone():this.m.sub(ie)._forceRed(this)},ue.prototype.add=function(ie,W){this._verify2(ie,W);var O=ie.add(W);return O.cmp(this.m)>=0&&O.isub(this.m),O._forceRed(this)},ue.prototype.iadd=function(ie,W){this._verify2(ie,W);var O=ie.iadd(W);return O.cmp(this.m)>=0&&O.isub(this.m),O},ue.prototype.sub=function(ie,W){this._verify2(ie,W);var O=ie.sub(W);return O.cmpn(0)<0&&O.iadd(this.m),O._forceRed(this)},ue.prototype.isub=function(ie,W){this._verify2(ie,W);var O=ie.isub(W);return O.cmpn(0)<0&&O.iadd(this.m),O},ue.prototype.shl=function(ie,W){return this._verify1(ie),this.imod(ie.ushln(W))},ue.prototype.imul=function(ie,W){return this._verify2(ie,W),this.imod(ie.imul(W))},ue.prototype.mul=function(ie,W){return this._verify2(ie,W),this.imod(ie.mul(W))},ue.prototype.isqr=function(ie){return this.imul(ie,ie.clone())},ue.prototype.sqr=function(ie){return this.mul(ie,ie)},ue.prototype.sqrt=function(ie){if(ie.isZero())return ie.clone();var W=this.m.andln(3);if(x(W%2===1),W===3){var O=this.m.add(new S(1)).iushrn(2);return this.pow(ie,O)}for(var z=this.m.subn(1),J=0;!z.isZero()&&z.andln(1)===0;)J++,z.iushrn(1);x(!z.isZero());var ee=new S(1).toRed(this),ae=ee.redNeg(),oe=this.m.subn(1).iushrn(1),se=this.m.bitLength();for(se=new S(2*se*se).toRed(this);this.pow(se,oe).cmp(ae)!==0;)se.redIAdd(ae);for(var G=this.pow(se,z),q=this.pow(ie,z.addn(1).iushrn(1)),te=this.pow(ie,z),fe=J;te.cmp(ee)!==0;){for(var he=te,Ee=0;he.cmp(ee)!==0;Ee++)he=he.redSqr();x(Ee<fe);var we=this.pow(G,new S(1).iushln(fe-Ee-1));q=q.redMul(we),G=we.redSqr(),te=te.redMul(G),fe=Ee}return q},ue.prototype.invm=function(ie){var W=ie._invmp(this.m);return W.negative!==0?(W.negative=0,this.imod(W).redNeg()):this.imod(W)},ue.prototype.pow=function(ie,W){if(W.isZero())return new S(1).toRed(this);if(W.cmpn(1)===0)return ie.clone();var O=4,z=new Array(1<<O);z[0]=new S(1).toRed(this),z[1]=ie;for(var J=2;J<z.length;J++)z[J]=this.mul(z[J-1],ie);var ee=z[0],ae=0,oe=0,se=W.bitLength()%26;for(se===0&&(se=26),J=W.length-1;J>=0;J--){for(var G=W.words[J],q=se-1;q>=0;q--){var te=G>>q&1;if(ee!==z[0]&&(ee=this.sqr(ee)),te===0&&ae===0){oe=0;continue}ae<<=1,ae|=te,oe++,!(oe!==O&&(J!==0||q!==0))&&(ee=this.mul(ee,z[ae]),oe=0,ae=0)}se=26}return ee},ue.prototype.convertTo=function(ie){var W=ie.umod(this.m);return W===ie?W.clone():W},ue.prototype.convertFrom=function(ie){var W=ie.clone();return W.red=null,W},S.mont=function(ie){return new _e(ie)};function _e(ye){ue.call(this,ye),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new S(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E(_e,ue),_e.prototype.convertTo=function(ie){return this.imod(ie.ushln(this.shift))},_e.prototype.convertFrom=function(ie){var W=this.imod(ie.mul(this.rinv));return W.red=null,W},_e.prototype.imul=function(ie,W){if(ie.isZero()||W.isZero())return ie.words[0]=0,ie.length=1,ie;var O=ie.imul(W),z=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),J=O.isub(z).iushrn(this.shift),ee=J;return J.cmp(this.m)>=0?ee=J.isub(this.m):J.cmpn(0)<0&&(ee=J.iadd(this.m)),ee._forceRed(this)},_e.prototype.mul=function(ie,W){if(ie.isZero()||W.isZero())return new S(0)._forceRed(this);var O=ie.mul(W),z=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),J=O.isub(z).iushrn(this.shift),ee=J;return J.cmp(this.m)>=0?ee=J.isub(this.m):J.cmpn(0)<0&&(ee=J.iadd(this.m)),ee._forceRed(this)},_e.prototype.invm=function(ie){var W=this.imod(ie._invmp(this.m).mul(this.r2));return W._forceRed(this)}})(t,commonjsGlobal)})(bn$4);var bnExports$2=bn$4.exports,brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var t;brorand.exports=function(E){return t||(t=new n(null)),t.generate(E)};function n(x){this.rand=x}if(brorand.exports.Rand=n,n.prototype.generate=function(E){return this._rand(E)},n.prototype._rand=function(E){if(this.rand.getBytes)return this.rand.getBytes(E);for(var S=new Uint8Array(E),C=0;C<S.length;C++)S[C]=this.rand.getByte();return S},typeof self=="object")self.crypto&&self.crypto.getRandomValues?n.prototype._rand=function(E){var S=new Uint8Array(E);return self.crypto.getRandomValues(S),S}:self.msCrypto&&self.msCrypto.getRandomValues?n.prototype._rand=function(E){var S=new Uint8Array(E);return self.msCrypto.getRandomValues(S),S}:typeof window=="object"&&(n.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var _=requireCryptoBrowserify();if(typeof _.randomBytes!="function")throw new Error("Not supported");n.prototype._rand=function(E){return _.randomBytes(E)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var t=bnExports$2,n=requireBrorand();function _(x){this.rand=x||new n.Rand}return mr=_,_.create=function(E){return new _(E)},_.prototype._randbelow=function(E){var S=E.bitLength(),C=Math.ceil(S/8);do var T=new t(this.rand.generate(C));while(T.cmp(E)>=0);return T},_.prototype._randrange=function(E,S){var C=S.sub(E);return E.add(this._randbelow(C))},_.prototype.test=function(E,S,C){var T=E.bitLength(),B=t.mont(E),A=new t(1).toRed(B);S||(S=Math.max(1,T/48|0));for(var I=E.subn(1),D=0;!I.testn(D);D++);for(var M=E.shrn(D),V=I.toRed(B),L=!0;S>0;S--){var F=this._randrange(new t(2),I);C&&C(F);var j=F.toRed(B).redPow(M);if(!(j.cmp(A)===0||j.cmp(V)===0)){for(var U=1;U<D;U++){if(j=j.redSqr(),j.cmp(A)===0)return!1;if(j.cmp(V)===0)break}if(U===D)return!1}}return L},_.prototype.getDivisor=function(E,S){var C=E.bitLength(),T=t.mont(E),B=new t(1).toRed(T);S||(S=Math.max(1,C/48|0));for(var A=E.subn(1),I=0;!A.testn(I);I++);for(var D=E.shrn(I),M=A.toRed(T);S>0;S--){var V=this._randrange(new t(2),A),L=E.gcd(V);if(L.cmpn(1)!==0)return L;var F=V.toRed(T).redPow(D);if(!(F.cmp(B)===0||F.cmp(M)===0)){for(var j=1;j<I;j++){if(F=F.redSqr(),F.cmp(B)===0)return F.fromRed().subn(1).gcd(E);if(F.cmp(M)===0)break}if(j===I)return F=F.redSqr(),F.fromRed().subn(1).gcd(E)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var t=requireBrowser$b();generatePrime=j,j.simpleSieve=L,j.fermatTest=F;var n=bnExports$2,_=new n(24),x=requireMr(),E=new x,S=new n(1),C=new n(2),T=new n(5);new n(16),new n(8);var B=new n(10),A=new n(3);new n(7);var I=new n(11),D=new n(4);new n(12);var M=null;function V(){if(M!==null)return M;var U=1048576,H=[];H[0]=2;for(var Y=1,Z=3;Z<U;Z+=2){for(var ne=Math.ceil(Math.sqrt(Z)),re=0;re<Y&&H[re]<=ne&&Z%H[re]!==0;re++);Y!==re&&H[re]<=ne||(H[Y++]=Z)}return M=H,H}function L(U){for(var H=V(),Y=0;Y<H.length;Y++)if(U.modn(H[Y])===0)return U.cmpn(H[Y])===0;return!0}function F(U){var H=n.mont(U);return C.toRed(H).redPow(U.subn(1)).fromRed().cmpn(1)===0}function j(U,H){if(U<16)return H===2||H===5?new n([140,123]):new n([140,39]);H=new n(H);for(var Y,Z;;){for(Y=new n(t(Math.ceil(U/8)));Y.bitLength()>U;)Y.ishrn(1);if(Y.isEven()&&Y.iadd(S),Y.testn(1)||Y.iadd(C),H.cmp(C)){if(!H.cmp(T))for(;Y.mod(B).cmp(A);)Y.iadd(D)}else for(;Y.mod(_).cmp(I);)Y.iadd(D);if(Z=Y.shrn(1),L(Z)&&L(Y)&&F(Z)&&F(Y)&&E.test(Z)&&E.test(Y))return Y}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var t=bnExports$2,n=requireMr(),_=new n,x=new t(24),E=new t(11),S=new t(10),C=new t(3),T=new t(7),B=requireGeneratePrime(),A=requireBrowser$b();dh=L;function I(j,U){return U=U||"utf8",Buffer$5.isBuffer(j)||(j=new Buffer$5(j,U)),this._pub=new t(j),this}function D(j,U){return U=U||"utf8",Buffer$5.isBuffer(j)||(j=new Buffer$5(j,U)),this._priv=new t(j),this}var M={};function V(j,U){var H=U.toString("hex"),Y=[H,j.toString(16)].join("_");if(Y in M)return M[Y];var Z=0;if(j.isEven()||!B.simpleSieve||!B.fermatTest(j)||!_.test(j))return Z+=1,H==="02"||H==="05"?Z+=8:Z+=4,M[Y]=Z,Z;_.test(j.shrn(1))||(Z+=2);var ne;switch(H){case"02":j.mod(x).cmp(E)&&(Z+=8);break;case"05":ne=j.mod(S),ne.cmp(C)&&ne.cmp(T)&&(Z+=8);break;default:Z+=4}return M[Y]=Z,Z}function L(j,U,H){this.setGenerator(U),this.__prime=new t(j),this._prime=t.mont(this.__prime),this._primeLen=j.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,H?(this.setPublicKey=I,this.setPrivateKey=D):this._primeCode=8}Object.defineProperty(L.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=V(this.__prime,this.__gen)),this._primeCode}}),L.prototype.generateKeys=function(){return this._priv||(this._priv=new t(A(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},L.prototype.computeSecret=function(j){j=new t(j),j=j.toRed(this._prime);var U=j.redPow(this._priv).fromRed(),H=new Buffer$5(U.toArray()),Y=this.getPrime();if(H.length<Y.length){var Z=new Buffer$5(Y.length-H.length);Z.fill(0),H=Buffer$5.concat([Z,H])}return H},L.prototype.getPublicKey=function(U){return F(this._pub,U)},L.prototype.getPrivateKey=function(U){return F(this._priv,U)},L.prototype.getPrime=function(j){return F(this.__prime,j)},L.prototype.getGenerator=function(j){return F(this._gen,j)},L.prototype.setGenerator=function(j,U){return U=U||"utf8",Buffer$5.isBuffer(j)||(j=new Buffer$5(j,U)),this.__gen=j,this._gen=new t(j),this};function F(j,U){var H=new Buffer$5(j.toArray());return U?H.toString(U):H}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$7;hasRequiredBrowser$4=1;var t=requireGeneratePrime(),n=require$$1$1,_=requireDh();function x(C){var T=new Buffer$5(n[C].prime,"hex"),B=new Buffer$5(n[C].gen,"hex");return new _(T,B)}var E={binary:!0,hex:!0,base64:!0};function S(C,T,B,A){return Buffer$5.isBuffer(T)||E[T]===void 0?S(C,"binary",T,B):(T=T||"binary",A=A||"binary",B=B||new Buffer$5([2]),Buffer$5.isBuffer(B)||(B=new Buffer$5(B,A)),typeof C=="number"?new _(t(C,B),B,!0):(Buffer$5.isBuffer(C)||(C=new Buffer$5(C,T)),new _(C,B,!0)))}return browser$7.DiffieHellmanGroup=browser$7.createDiffieHellmanGroup=browser$7.getDiffieHellman=x,browser$7.createDiffieHellman=browser$7.DiffieHellman=S,browser$7}var sign$2={exports:{}},bn$3={exports:{}};bn$3.exports;var hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(t){(function(n,_){function x(W,O){if(!W)throw new Error(O||"Assertion failed")}function E(W,O){W.super_=O;var z=function(){};z.prototype=O.prototype,W.prototype=new z,W.prototype.constructor=W}function S(W,O,z){if(S.isBN(W))return W;this.negative=0,this.words=null,this.length=0,this.red=null,W!==null&&((O==="le"||O==="be")&&(z=O,O=10),this._init(W||0,O||10,z||"be"))}typeof n=="object"?n.exports=S:_.BN=S,S.BN=S,S.wordSize=26;var C;try{typeof window<"u"&&typeof window.Buffer<"u"?C=window.Buffer:C=require$$0$2.Buffer}catch{}S.isBN=function(O){return O instanceof S?!0:O!==null&&typeof O=="object"&&O.constructor.wordSize===S.wordSize&&Array.isArray(O.words)},S.max=function(O,z){return O.cmp(z)>0?O:z},S.min=function(O,z){return O.cmp(z)<0?O:z},S.prototype._init=function(O,z,J){if(typeof O=="number")return this._initNumber(O,z,J);if(typeof O=="object")return this._initArray(O,z,J);z==="hex"&&(z=16),x(z===(z|0)&&z>=2&&z<=36),O=O.toString().replace(/\s+/g,"");var ee=0;O[0]==="-"&&(ee++,this.negative=1),ee<O.length&&(z===16?this._parseHex(O,ee,J):(this._parseBase(O,z,ee),J==="le"&&this._initArray(this.toArray(),z,J)))},S.prototype._initNumber=function(O,z,J){O<0&&(this.negative=1,O=-O),O<67108864?(this.words=[O&67108863],this.length=1):O<4503599627370496?(this.words=[O&67108863,O/67108864&67108863],this.length=2):(x(O<9007199254740992),this.words=[O&67108863,O/67108864&67108863,1],this.length=3),J==="le"&&this._initArray(this.toArray(),z,J)},S.prototype._initArray=function(O,z,J){if(x(typeof O.length=="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=new Array(this.length);for(var ee=0;ee<this.length;ee++)this.words[ee]=0;var ae,oe,se=0;if(J==="be")for(ee=O.length-1,ae=0;ee>=0;ee-=3)oe=O[ee]|O[ee-1]<<8|O[ee-2]<<16,this.words[ae]|=oe<<se&67108863,this.words[ae+1]=oe>>>26-se&67108863,se+=24,se>=26&&(se-=26,ae++);else if(J==="le")for(ee=0,ae=0;ee<O.length;ee+=3)oe=O[ee]|O[ee+1]<<8|O[ee+2]<<16,this.words[ae]|=oe<<se&67108863,this.words[ae+1]=oe>>>26-se&67108863,se+=24,se>=26&&(se-=26,ae++);return this._strip()};function T(W,O){var z=W.charCodeAt(O);if(z>=48&&z<=57)return z-48;if(z>=65&&z<=70)return z-55;if(z>=97&&z<=102)return z-87;x(!1,"Invalid character in "+W)}function B(W,O,z){var J=T(W,z);return z-1>=O&&(J|=T(W,z-1)<<4),J}S.prototype._parseHex=function(O,z,J){this.length=Math.ceil((O.length-z)/6),this.words=new Array(this.length);for(var ee=0;ee<this.length;ee++)this.words[ee]=0;var ae=0,oe=0,se;if(J==="be")for(ee=O.length-1;ee>=z;ee-=2)se=B(O,z,ee)<<ae,this.words[oe]|=se&67108863,ae>=18?(ae-=18,oe+=1,this.words[oe]|=se>>>26):ae+=8;else{var G=O.length-z;for(ee=G%2===0?z+1:z;ee<O.length;ee+=2)se=B(O,z,ee)<<ae,this.words[oe]|=se&67108863,ae>=18?(ae-=18,oe+=1,this.words[oe]|=se>>>26):ae+=8}this._strip()};function A(W,O,z,J){for(var ee=0,ae=0,oe=Math.min(W.length,z),se=O;se<oe;se++){var G=W.charCodeAt(se)-48;ee*=J,G>=49?ae=G-49+10:G>=17?ae=G-17+10:ae=G,x(G>=0&&ae<J,"Invalid character"),ee+=ae}return ee}S.prototype._parseBase=function(O,z,J){this.words=[0],this.length=1;for(var ee=0,ae=1;ae<=67108863;ae*=z)ee++;ee--,ae=ae/z|0;for(var oe=O.length-J,se=oe%ee,G=Math.min(oe,oe-se)+J,q=0,te=J;te<G;te+=ee)q=A(O,te,te+ee,z),this.imuln(ae),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q);if(se!==0){var fe=1;for(q=A(O,te,O.length,z),te=0;te<se;te++)fe*=z;this.imuln(fe),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q)}this._strip()},S.prototype.copy=function(O){O.words=new Array(this.length);for(var z=0;z<this.length;z++)O.words[z]=this.words[z];O.length=this.length,O.negative=this.negative,O.red=this.red};function I(W,O){W.words=O.words,W.length=O.length,W.negative=O.negative,W.red=O.red}if(S.prototype._move=function(O){I(O,this)},S.prototype.clone=function(){var O=new S(null);return this.copy(O),O},S.prototype._expand=function(O){for(;this.length<O;)this.words[this.length++]=0;return this},S.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},S.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{S.prototype[Symbol.for("nodejs.util.inspect.custom")]=D}catch{S.prototype.inspect=D}else S.prototype.inspect=D;function D(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],V=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],L=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];S.prototype.toString=function(O,z){O=O||10,z=z|0||1;var J;if(O===16||O==="hex"){J="";for(var ee=0,ae=0,oe=0;oe<this.length;oe++){var se=this.words[oe],G=((se<<ee|ae)&16777215).toString(16);ae=se>>>24-ee&16777215,ee+=2,ee>=26&&(ee-=26,oe--),ae!==0||oe!==this.length-1?J=M[6-G.length]+G+J:J=G+J}for(ae!==0&&(J=ae.toString(16)+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}if(O===(O|0)&&O>=2&&O<=36){var q=V[O],te=L[O];J="";var fe=this.clone();for(fe.negative=0;!fe.isZero();){var he=fe.modrn(te).toString(O);fe=fe.idivn(te),fe.isZero()?J=he+J:J=M[q-he.length]+he+J}for(this.isZero()&&(J="0"+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}x(!1,"Base should be between 2 and 36")},S.prototype.toNumber=function(){var O=this.words[0];return this.length===2?O+=this.words[1]*67108864:this.length===3&&this.words[2]===1?O+=4503599627370496+this.words[1]*67108864:this.length>2&&x(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-O:O},S.prototype.toJSON=function(){return this.toString(16,2)},C&&(S.prototype.toBuffer=function(O,z){return this.toArrayLike(C,O,z)}),S.prototype.toArray=function(O,z){return this.toArrayLike(Array,O,z)};var F=function(O,z){return O.allocUnsafe?O.allocUnsafe(z):new O(z)};S.prototype.toArrayLike=function(O,z,J){this._strip();var ee=this.byteLength(),ae=J||Math.max(1,ee);x(ee<=ae,"byte array longer than desired length"),x(ae>0,"Requested array length <= 0");var oe=F(O,ae),se=z==="le"?"LE":"BE";return this["_toArrayLike"+se](oe,ee),oe},S.prototype._toArrayLikeLE=function(O,z){for(var J=0,ee=0,ae=0,oe=0;ae<this.length;ae++){var se=this.words[ae]<<oe|ee;O[J++]=se&255,J<O.length&&(O[J++]=se>>8&255),J<O.length&&(O[J++]=se>>16&255),oe===6?(J<O.length&&(O[J++]=se>>24&255),ee=0,oe=0):(ee=se>>>24,oe+=2)}if(J<O.length)for(O[J++]=ee;J<O.length;)O[J++]=0},S.prototype._toArrayLikeBE=function(O,z){for(var J=O.length-1,ee=0,ae=0,oe=0;ae<this.length;ae++){var se=this.words[ae]<<oe|ee;O[J--]=se&255,J>=0&&(O[J--]=se>>8&255),J>=0&&(O[J--]=se>>16&255),oe===6?(J>=0&&(O[J--]=se>>24&255),ee=0,oe=0):(ee=se>>>24,oe+=2)}if(J>=0)for(O[J--]=ee;J>=0;)O[J--]=0},Math.clz32?S.prototype._countBits=function(O){return 32-Math.clz32(O)}:S.prototype._countBits=function(O){var z=O,J=0;return z>=4096&&(J+=13,z>>>=13),z>=64&&(J+=7,z>>>=7),z>=8&&(J+=4,z>>>=4),z>=2&&(J+=2,z>>>=2),J+z},S.prototype._zeroBits=function(O){if(O===0)return 26;var z=O,J=0;return z&8191||(J+=13,z>>>=13),z&127||(J+=7,z>>>=7),z&15||(J+=4,z>>>=4),z&3||(J+=2,z>>>=2),z&1||J++,J},S.prototype.bitLength=function(){var O=this.words[this.length-1],z=this._countBits(O);return(this.length-1)*26+z};function j(W){for(var O=new Array(W.bitLength()),z=0;z<O.length;z++){var J=z/26|0,ee=z%26;O[z]=W.words[J]>>>ee&1}return O}S.prototype.zeroBits=function(){if(this.isZero())return 0;for(var O=0,z=0;z<this.length;z++){var J=this._zeroBits(this.words[z]);if(O+=J,J!==26)break}return O},S.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},S.prototype.toTwos=function(O){return this.negative!==0?this.abs().inotn(O).iaddn(1):this.clone()},S.prototype.fromTwos=function(O){return this.testn(O-1)?this.notn(O).iaddn(1).ineg():this.clone()},S.prototype.isNeg=function(){return this.negative!==0},S.prototype.neg=function(){return this.clone().ineg()},S.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},S.prototype.iuor=function(O){for(;this.length<O.length;)this.words[this.length++]=0;for(var z=0;z<O.length;z++)this.words[z]=this.words[z]|O.words[z];return this._strip()},S.prototype.ior=function(O){return x((this.negative|O.negative)===0),this.iuor(O)},S.prototype.or=function(O){return this.length>O.length?this.clone().ior(O):O.clone().ior(this)},S.prototype.uor=function(O){return this.length>O.length?this.clone().iuor(O):O.clone().iuor(this)},S.prototype.iuand=function(O){var z;this.length>O.length?z=O:z=this;for(var J=0;J<z.length;J++)this.words[J]=this.words[J]&O.words[J];return this.length=z.length,this._strip()},S.prototype.iand=function(O){return x((this.negative|O.negative)===0),this.iuand(O)},S.prototype.and=function(O){return this.length>O.length?this.clone().iand(O):O.clone().iand(this)},S.prototype.uand=function(O){return this.length>O.length?this.clone().iuand(O):O.clone().iuand(this)},S.prototype.iuxor=function(O){var z,J;this.length>O.length?(z=this,J=O):(z=O,J=this);for(var ee=0;ee<J.length;ee++)this.words[ee]=z.words[ee]^J.words[ee];if(this!==z)for(;ee<z.length;ee++)this.words[ee]=z.words[ee];return this.length=z.length,this._strip()},S.prototype.ixor=function(O){return x((this.negative|O.negative)===0),this.iuxor(O)},S.prototype.xor=function(O){return this.length>O.length?this.clone().ixor(O):O.clone().ixor(this)},S.prototype.uxor=function(O){return this.length>O.length?this.clone().iuxor(O):O.clone().iuxor(this)},S.prototype.inotn=function(O){x(typeof O=="number"&&O>=0);var z=Math.ceil(O/26)|0,J=O%26;this._expand(z),J>0&&z--;for(var ee=0;ee<z;ee++)this.words[ee]=~this.words[ee]&67108863;return J>0&&(this.words[ee]=~this.words[ee]&67108863>>26-J),this._strip()},S.prototype.notn=function(O){return this.clone().inotn(O)},S.prototype.setn=function(O,z){x(typeof O=="number"&&O>=0);var J=O/26|0,ee=O%26;return this._expand(J+1),z?this.words[J]=this.words[J]|1<<ee:this.words[J]=this.words[J]&~(1<<ee),this._strip()},S.prototype.iadd=function(O){var z;if(this.negative!==0&&O.negative===0)return this.negative=0,z=this.isub(O),this.negative^=1,this._normSign();if(this.negative===0&&O.negative!==0)return O.negative=0,z=this.isub(O),O.negative=1,z._normSign();var J,ee;this.length>O.length?(J=this,ee=O):(J=O,ee=this);for(var ae=0,oe=0;oe<ee.length;oe++)z=(J.words[oe]|0)+(ee.words[oe]|0)+ae,this.words[oe]=z&67108863,ae=z>>>26;for(;ae!==0&&oe<J.length;oe++)z=(J.words[oe]|0)+ae,this.words[oe]=z&67108863,ae=z>>>26;if(this.length=J.length,ae!==0)this.words[this.length]=ae,this.length++;else if(J!==this)for(;oe<J.length;oe++)this.words[oe]=J.words[oe];return this},S.prototype.add=function(O){var z;return O.negative!==0&&this.negative===0?(O.negative=0,z=this.sub(O),O.negative^=1,z):O.negative===0&&this.negative!==0?(this.negative=0,z=O.sub(this),this.negative=1,z):this.length>O.length?this.clone().iadd(O):O.clone().iadd(this)},S.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var z=this.iadd(O);return O.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var J=this.cmp(O);if(J===0)return this.negative=0,this.length=1,this.words[0]=0,this;var ee,ae;J>0?(ee=this,ae=O):(ee=O,ae=this);for(var oe=0,se=0;se<ae.length;se++)z=(ee.words[se]|0)-(ae.words[se]|0)+oe,oe=z>>26,this.words[se]=z&67108863;for(;oe!==0&&se<ee.length;se++)z=(ee.words[se]|0)+oe,oe=z>>26,this.words[se]=z&67108863;if(oe===0&&se<ee.length&&ee!==this)for(;se<ee.length;se++)this.words[se]=ee.words[se];return this.length=Math.max(this.length,se),ee!==this&&(this.negative=1),this._strip()},S.prototype.sub=function(O){return this.clone().isub(O)};function U(W,O,z){z.negative=O.negative^W.negative;var J=W.length+O.length|0;z.length=J,J=J-1|0;var ee=W.words[0]|0,ae=O.words[0]|0,oe=ee*ae,se=oe&67108863,G=oe/67108864|0;z.words[0]=se;for(var q=1;q<J;q++){for(var te=G>>>26,fe=G&67108863,he=Math.min(q,O.length-1),Ee=Math.max(0,q-W.length+1);Ee<=he;Ee++){var we=q-Ee|0;ee=W.words[we]|0,ae=O.words[Ee]|0,oe=ee*ae+fe,te+=oe/67108864|0,fe=oe&67108863}z.words[q]=fe|0,G=te|0}return G!==0?z.words[q]=G|0:z.length--,z._strip()}var H=function(O,z,J){var ee=O.words,ae=z.words,oe=J.words,se=0,G,q,te,fe=ee[0]|0,he=fe&8191,Ee=fe>>>13,we=ee[1]|0,xe=we&8191,$e=we>>>13,ge=ee[2]|0,Se=ge&8191,me=ge>>>13,Be=ee[3]|0,ve=Be&8191,Ae=Be>>>13,Ve=ee[4]|0,Pe=Ve&8191,Re=Ve>>>13,Ne=ee[5]|0,qe=Ne&8191,Ke=Ne>>>13,He=ee[6]|0,Ge=He&8191,rt=He>>>13,st=ee[7]|0,Je=st&8191,Ie=st>>>13,be=ee[8]|0,Te=be&8191,Le=be>>>13,We=ee[9]|0,Ze=We&8191,Qe=We>>>13,St=ae[0]|0,pt=St&8191,ft=St>>>13,Ut=ae[1]|0,$t=Ut&8191,Nt=Ut>>>13,lr=ae[2]|0,Gt=lr&8191,Rt=lr>>>13,Qt=ae[3]|0,Pt=Qt&8191,kt=Qt>>>13,er=ae[4]|0,Lt=er&8191,Bt=er>>>13,ir=ae[5]|0,jt=ir&8191,Ct=ir>>>13,nr=ae[6]|0,je=nr&8191,De=nr>>>13,Me=ae[7]|0,pe=Me&8191,ke=Me>>>13,Oe=ae[8]|0,Fe=Oe&8191,ze=Oe>>>13,Xe=ae[9]|0,tt=Xe&8191,it=Xe>>>13;J.negative=O.negative^z.negative,J.length=19,G=Math.imul(he,pt),q=Math.imul(he,ft),q=q+Math.imul(Ee,pt)|0,te=Math.imul(Ee,ft);var ot=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(ot>>>26)|0,ot&=67108863,G=Math.imul(xe,pt),q=Math.imul(xe,ft),q=q+Math.imul($e,pt)|0,te=Math.imul($e,ft),G=G+Math.imul(he,$t)|0,q=q+Math.imul(he,Nt)|0,q=q+Math.imul(Ee,$t)|0,te=te+Math.imul(Ee,Nt)|0;var at=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(at>>>26)|0,at&=67108863,G=Math.imul(Se,pt),q=Math.imul(Se,ft),q=q+Math.imul(me,pt)|0,te=Math.imul(me,ft),G=G+Math.imul(xe,$t)|0,q=q+Math.imul(xe,Nt)|0,q=q+Math.imul($e,$t)|0,te=te+Math.imul($e,Nt)|0,G=G+Math.imul(he,Gt)|0,q=q+Math.imul(he,Rt)|0,q=q+Math.imul(Ee,Gt)|0,te=te+Math.imul(Ee,Rt)|0;var ct=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(ct>>>26)|0,ct&=67108863,G=Math.imul(ve,pt),q=Math.imul(ve,ft),q=q+Math.imul(Ae,pt)|0,te=Math.imul(Ae,ft),G=G+Math.imul(Se,$t)|0,q=q+Math.imul(Se,Nt)|0,q=q+Math.imul(me,$t)|0,te=te+Math.imul(me,Nt)|0,G=G+Math.imul(xe,Gt)|0,q=q+Math.imul(xe,Rt)|0,q=q+Math.imul($e,Gt)|0,te=te+Math.imul($e,Rt)|0,G=G+Math.imul(he,Pt)|0,q=q+Math.imul(he,kt)|0,q=q+Math.imul(Ee,Pt)|0,te=te+Math.imul(Ee,kt)|0;var dt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(dt>>>26)|0,dt&=67108863,G=Math.imul(Pe,pt),q=Math.imul(Pe,ft),q=q+Math.imul(Re,pt)|0,te=Math.imul(Re,ft),G=G+Math.imul(ve,$t)|0,q=q+Math.imul(ve,Nt)|0,q=q+Math.imul(Ae,$t)|0,te=te+Math.imul(Ae,Nt)|0,G=G+Math.imul(Se,Gt)|0,q=q+Math.imul(Se,Rt)|0,q=q+Math.imul(me,Gt)|0,te=te+Math.imul(me,Rt)|0,G=G+Math.imul(xe,Pt)|0,q=q+Math.imul(xe,kt)|0,q=q+Math.imul($e,Pt)|0,te=te+Math.imul($e,kt)|0,G=G+Math.imul(he,Lt)|0,q=q+Math.imul(he,Bt)|0,q=q+Math.imul(Ee,Lt)|0,te=te+Math.imul(Ee,Bt)|0;var yt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(yt>>>26)|0,yt&=67108863,G=Math.imul(qe,pt),q=Math.imul(qe,ft),q=q+Math.imul(Ke,pt)|0,te=Math.imul(Ke,ft),G=G+Math.imul(Pe,$t)|0,q=q+Math.imul(Pe,Nt)|0,q=q+Math.imul(Re,$t)|0,te=te+Math.imul(Re,Nt)|0,G=G+Math.imul(ve,Gt)|0,q=q+Math.imul(ve,Rt)|0,q=q+Math.imul(Ae,Gt)|0,te=te+Math.imul(Ae,Rt)|0,G=G+Math.imul(Se,Pt)|0,q=q+Math.imul(Se,kt)|0,q=q+Math.imul(me,Pt)|0,te=te+Math.imul(me,kt)|0,G=G+Math.imul(xe,Lt)|0,q=q+Math.imul(xe,Bt)|0,q=q+Math.imul($e,Lt)|0,te=te+Math.imul($e,Bt)|0,G=G+Math.imul(he,jt)|0,q=q+Math.imul(he,Ct)|0,q=q+Math.imul(Ee,jt)|0,te=te+Math.imul(Ee,Ct)|0;var Et=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Et>>>26)|0,Et&=67108863,G=Math.imul(Ge,pt),q=Math.imul(Ge,ft),q=q+Math.imul(rt,pt)|0,te=Math.imul(rt,ft),G=G+Math.imul(qe,$t)|0,q=q+Math.imul(qe,Nt)|0,q=q+Math.imul(Ke,$t)|0,te=te+Math.imul(Ke,Nt)|0,G=G+Math.imul(Pe,Gt)|0,q=q+Math.imul(Pe,Rt)|0,q=q+Math.imul(Re,Gt)|0,te=te+Math.imul(Re,Rt)|0,G=G+Math.imul(ve,Pt)|0,q=q+Math.imul(ve,kt)|0,q=q+Math.imul(Ae,Pt)|0,te=te+Math.imul(Ae,kt)|0,G=G+Math.imul(Se,Lt)|0,q=q+Math.imul(Se,Bt)|0,q=q+Math.imul(me,Lt)|0,te=te+Math.imul(me,Bt)|0,G=G+Math.imul(xe,jt)|0,q=q+Math.imul(xe,Ct)|0,q=q+Math.imul($e,jt)|0,te=te+Math.imul($e,Ct)|0,G=G+Math.imul(he,je)|0,q=q+Math.imul(he,De)|0,q=q+Math.imul(Ee,je)|0,te=te+Math.imul(Ee,De)|0;var mt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(mt>>>26)|0,mt&=67108863,G=Math.imul(Je,pt),q=Math.imul(Je,ft),q=q+Math.imul(Ie,pt)|0,te=Math.imul(Ie,ft),G=G+Math.imul(Ge,$t)|0,q=q+Math.imul(Ge,Nt)|0,q=q+Math.imul(rt,$t)|0,te=te+Math.imul(rt,Nt)|0,G=G+Math.imul(qe,Gt)|0,q=q+Math.imul(qe,Rt)|0,q=q+Math.imul(Ke,Gt)|0,te=te+Math.imul(Ke,Rt)|0,G=G+Math.imul(Pe,Pt)|0,q=q+Math.imul(Pe,kt)|0,q=q+Math.imul(Re,Pt)|0,te=te+Math.imul(Re,kt)|0,G=G+Math.imul(ve,Lt)|0,q=q+Math.imul(ve,Bt)|0,q=q+Math.imul(Ae,Lt)|0,te=te+Math.imul(Ae,Bt)|0,G=G+Math.imul(Se,jt)|0,q=q+Math.imul(Se,Ct)|0,q=q+Math.imul(me,jt)|0,te=te+Math.imul(me,Ct)|0,G=G+Math.imul(xe,je)|0,q=q+Math.imul(xe,De)|0,q=q+Math.imul($e,je)|0,te=te+Math.imul($e,De)|0,G=G+Math.imul(he,pe)|0,q=q+Math.imul(he,ke)|0,q=q+Math.imul(Ee,pe)|0,te=te+Math.imul(Ee,ke)|0;var xt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(xt>>>26)|0,xt&=67108863,G=Math.imul(Te,pt),q=Math.imul(Te,ft),q=q+Math.imul(Le,pt)|0,te=Math.imul(Le,ft),G=G+Math.imul(Je,$t)|0,q=q+Math.imul(Je,Nt)|0,q=q+Math.imul(Ie,$t)|0,te=te+Math.imul(Ie,Nt)|0,G=G+Math.imul(Ge,Gt)|0,q=q+Math.imul(Ge,Rt)|0,q=q+Math.imul(rt,Gt)|0,te=te+Math.imul(rt,Rt)|0,G=G+Math.imul(qe,Pt)|0,q=q+Math.imul(qe,kt)|0,q=q+Math.imul(Ke,Pt)|0,te=te+Math.imul(Ke,kt)|0,G=G+Math.imul(Pe,Lt)|0,q=q+Math.imul(Pe,Bt)|0,q=q+Math.imul(Re,Lt)|0,te=te+Math.imul(Re,Bt)|0,G=G+Math.imul(ve,jt)|0,q=q+Math.imul(ve,Ct)|0,q=q+Math.imul(Ae,jt)|0,te=te+Math.imul(Ae,Ct)|0,G=G+Math.imul(Se,je)|0,q=q+Math.imul(Se,De)|0,q=q+Math.imul(me,je)|0,te=te+Math.imul(me,De)|0,G=G+Math.imul(xe,pe)|0,q=q+Math.imul(xe,ke)|0,q=q+Math.imul($e,pe)|0,te=te+Math.imul($e,ke)|0,G=G+Math.imul(he,Fe)|0,q=q+Math.imul(he,ze)|0,q=q+Math.imul(Ee,Fe)|0,te=te+Math.imul(Ee,ze)|0;var Mt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,G=Math.imul(Ze,pt),q=Math.imul(Ze,ft),q=q+Math.imul(Qe,pt)|0,te=Math.imul(Qe,ft),G=G+Math.imul(Te,$t)|0,q=q+Math.imul(Te,Nt)|0,q=q+Math.imul(Le,$t)|0,te=te+Math.imul(Le,Nt)|0,G=G+Math.imul(Je,Gt)|0,q=q+Math.imul(Je,Rt)|0,q=q+Math.imul(Ie,Gt)|0,te=te+Math.imul(Ie,Rt)|0,G=G+Math.imul(Ge,Pt)|0,q=q+Math.imul(Ge,kt)|0,q=q+Math.imul(rt,Pt)|0,te=te+Math.imul(rt,kt)|0,G=G+Math.imul(qe,Lt)|0,q=q+Math.imul(qe,Bt)|0,q=q+Math.imul(Ke,Lt)|0,te=te+Math.imul(Ke,Bt)|0,G=G+Math.imul(Pe,jt)|0,q=q+Math.imul(Pe,Ct)|0,q=q+Math.imul(Re,jt)|0,te=te+Math.imul(Re,Ct)|0,G=G+Math.imul(ve,je)|0,q=q+Math.imul(ve,De)|0,q=q+Math.imul(Ae,je)|0,te=te+Math.imul(Ae,De)|0,G=G+Math.imul(Se,pe)|0,q=q+Math.imul(Se,ke)|0,q=q+Math.imul(me,pe)|0,te=te+Math.imul(me,ke)|0,G=G+Math.imul(xe,Fe)|0,q=q+Math.imul(xe,ze)|0,q=q+Math.imul($e,Fe)|0,te=te+Math.imul($e,ze)|0,G=G+Math.imul(he,tt)|0,q=q+Math.imul(he,it)|0,q=q+Math.imul(Ee,tt)|0,te=te+Math.imul(Ee,it)|0;var Ot=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,G=Math.imul(Ze,$t),q=Math.imul(Ze,Nt),q=q+Math.imul(Qe,$t)|0,te=Math.imul(Qe,Nt),G=G+Math.imul(Te,Gt)|0,q=q+Math.imul(Te,Rt)|0,q=q+Math.imul(Le,Gt)|0,te=te+Math.imul(Le,Rt)|0,G=G+Math.imul(Je,Pt)|0,q=q+Math.imul(Je,kt)|0,q=q+Math.imul(Ie,Pt)|0,te=te+Math.imul(Ie,kt)|0,G=G+Math.imul(Ge,Lt)|0,q=q+Math.imul(Ge,Bt)|0,q=q+Math.imul(rt,Lt)|0,te=te+Math.imul(rt,Bt)|0,G=G+Math.imul(qe,jt)|0,q=q+Math.imul(qe,Ct)|0,q=q+Math.imul(Ke,jt)|0,te=te+Math.imul(Ke,Ct)|0,G=G+Math.imul(Pe,je)|0,q=q+Math.imul(Pe,De)|0,q=q+Math.imul(Re,je)|0,te=te+Math.imul(Re,De)|0,G=G+Math.imul(ve,pe)|0,q=q+Math.imul(ve,ke)|0,q=q+Math.imul(Ae,pe)|0,te=te+Math.imul(Ae,ke)|0,G=G+Math.imul(Se,Fe)|0,q=q+Math.imul(Se,ze)|0,q=q+Math.imul(me,Fe)|0,te=te+Math.imul(me,ze)|0,G=G+Math.imul(xe,tt)|0,q=q+Math.imul(xe,it)|0,q=q+Math.imul($e,tt)|0,te=te+Math.imul($e,it)|0;var Ht=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,G=Math.imul(Ze,Gt),q=Math.imul(Ze,Rt),q=q+Math.imul(Qe,Gt)|0,te=Math.imul(Qe,Rt),G=G+Math.imul(Te,Pt)|0,q=q+Math.imul(Te,kt)|0,q=q+Math.imul(Le,Pt)|0,te=te+Math.imul(Le,kt)|0,G=G+Math.imul(Je,Lt)|0,q=q+Math.imul(Je,Bt)|0,q=q+Math.imul(Ie,Lt)|0,te=te+Math.imul(Ie,Bt)|0,G=G+Math.imul(Ge,jt)|0,q=q+Math.imul(Ge,Ct)|0,q=q+Math.imul(rt,jt)|0,te=te+Math.imul(rt,Ct)|0,G=G+Math.imul(qe,je)|0,q=q+Math.imul(qe,De)|0,q=q+Math.imul(Ke,je)|0,te=te+Math.imul(Ke,De)|0,G=G+Math.imul(Pe,pe)|0,q=q+Math.imul(Pe,ke)|0,q=q+Math.imul(Re,pe)|0,te=te+Math.imul(Re,ke)|0,G=G+Math.imul(ve,Fe)|0,q=q+Math.imul(ve,ze)|0,q=q+Math.imul(Ae,Fe)|0,te=te+Math.imul(Ae,ze)|0,G=G+Math.imul(Se,tt)|0,q=q+Math.imul(Se,it)|0,q=q+Math.imul(me,tt)|0,te=te+Math.imul(me,it)|0;var Ft=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,G=Math.imul(Ze,Pt),q=Math.imul(Ze,kt),q=q+Math.imul(Qe,Pt)|0,te=Math.imul(Qe,kt),G=G+Math.imul(Te,Lt)|0,q=q+Math.imul(Te,Bt)|0,q=q+Math.imul(Le,Lt)|0,te=te+Math.imul(Le,Bt)|0,G=G+Math.imul(Je,jt)|0,q=q+Math.imul(Je,Ct)|0,q=q+Math.imul(Ie,jt)|0,te=te+Math.imul(Ie,Ct)|0,G=G+Math.imul(Ge,je)|0,q=q+Math.imul(Ge,De)|0,q=q+Math.imul(rt,je)|0,te=te+Math.imul(rt,De)|0,G=G+Math.imul(qe,pe)|0,q=q+Math.imul(qe,ke)|0,q=q+Math.imul(Ke,pe)|0,te=te+Math.imul(Ke,ke)|0,G=G+Math.imul(Pe,Fe)|0,q=q+Math.imul(Pe,ze)|0,q=q+Math.imul(Re,Fe)|0,te=te+Math.imul(Re,ze)|0,G=G+Math.imul(ve,tt)|0,q=q+Math.imul(ve,it)|0,q=q+Math.imul(Ae,tt)|0,te=te+Math.imul(Ae,it)|0;var Wt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,G=Math.imul(Ze,Lt),q=Math.imul(Ze,Bt),q=q+Math.imul(Qe,Lt)|0,te=Math.imul(Qe,Bt),G=G+Math.imul(Te,jt)|0,q=q+Math.imul(Te,Ct)|0,q=q+Math.imul(Le,jt)|0,te=te+Math.imul(Le,Ct)|0,G=G+Math.imul(Je,je)|0,q=q+Math.imul(Je,De)|0,q=q+Math.imul(Ie,je)|0,te=te+Math.imul(Ie,De)|0,G=G+Math.imul(Ge,pe)|0,q=q+Math.imul(Ge,ke)|0,q=q+Math.imul(rt,pe)|0,te=te+Math.imul(rt,ke)|0,G=G+Math.imul(qe,Fe)|0,q=q+Math.imul(qe,ze)|0,q=q+Math.imul(Ke,Fe)|0,te=te+Math.imul(Ke,ze)|0,G=G+Math.imul(Pe,tt)|0,q=q+Math.imul(Pe,it)|0,q=q+Math.imul(Re,tt)|0,te=te+Math.imul(Re,it)|0;var Jt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,G=Math.imul(Ze,jt),q=Math.imul(Ze,Ct),q=q+Math.imul(Qe,jt)|0,te=Math.imul(Qe,Ct),G=G+Math.imul(Te,je)|0,q=q+Math.imul(Te,De)|0,q=q+Math.imul(Le,je)|0,te=te+Math.imul(Le,De)|0,G=G+Math.imul(Je,pe)|0,q=q+Math.imul(Je,ke)|0,q=q+Math.imul(Ie,pe)|0,te=te+Math.imul(Ie,ke)|0,G=G+Math.imul(Ge,Fe)|0,q=q+Math.imul(Ge,ze)|0,q=q+Math.imul(rt,Fe)|0,te=te+Math.imul(rt,ze)|0,G=G+Math.imul(qe,tt)|0,q=q+Math.imul(qe,it)|0,q=q+Math.imul(Ke,tt)|0,te=te+Math.imul(Ke,it)|0;var Kt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,G=Math.imul(Ze,je),q=Math.imul(Ze,De),q=q+Math.imul(Qe,je)|0,te=Math.imul(Qe,De),G=G+Math.imul(Te,pe)|0,q=q+Math.imul(Te,ke)|0,q=q+Math.imul(Le,pe)|0,te=te+Math.imul(Le,ke)|0,G=G+Math.imul(Je,Fe)|0,q=q+Math.imul(Je,ze)|0,q=q+Math.imul(Ie,Fe)|0,te=te+Math.imul(Ie,ze)|0,G=G+Math.imul(Ge,tt)|0,q=q+Math.imul(Ge,it)|0,q=q+Math.imul(rt,tt)|0,te=te+Math.imul(rt,it)|0;var gt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(gt>>>26)|0,gt&=67108863,G=Math.imul(Ze,pe),q=Math.imul(Ze,ke),q=q+Math.imul(Qe,pe)|0,te=Math.imul(Qe,ke),G=G+Math.imul(Te,Fe)|0,q=q+Math.imul(Te,ze)|0,q=q+Math.imul(Le,Fe)|0,te=te+Math.imul(Le,ze)|0,G=G+Math.imul(Je,tt)|0,q=q+Math.imul(Je,it)|0,q=q+Math.imul(Ie,tt)|0,te=te+Math.imul(Ie,it)|0;var _t=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(_t>>>26)|0,_t&=67108863,G=Math.imul(Ze,Fe),q=Math.imul(Ze,ze),q=q+Math.imul(Qe,Fe)|0,te=Math.imul(Qe,ze),G=G+Math.imul(Te,tt)|0,q=q+Math.imul(Te,it)|0,q=q+Math.imul(Le,tt)|0,te=te+Math.imul(Le,it)|0;var It=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(It>>>26)|0,It&=67108863,G=Math.imul(Ze,tt),q=Math.imul(Ze,it),q=q+Math.imul(Qe,tt)|0,te=Math.imul(Qe,it);var At=(se+G|0)+((q&8191)<<13)|0;return se=(te+(q>>>13)|0)+(At>>>26)|0,At&=67108863,oe[0]=ot,oe[1]=at,oe[2]=ct,oe[3]=dt,oe[4]=yt,oe[5]=Et,oe[6]=mt,oe[7]=xt,oe[8]=Mt,oe[9]=Ot,oe[10]=Ht,oe[11]=Ft,oe[12]=Wt,oe[13]=Jt,oe[14]=Kt,oe[15]=gt,oe[16]=_t,oe[17]=It,oe[18]=At,se!==0&&(oe[19]=se,J.length++),J};Math.imul||(H=U);function Y(W,O,z){z.negative=O.negative^W.negative,z.length=W.length+O.length;for(var J=0,ee=0,ae=0;ae<z.length-1;ae++){var oe=ee;ee=0;for(var se=J&67108863,G=Math.min(ae,O.length-1),q=Math.max(0,ae-W.length+1);q<=G;q++){var te=ae-q,fe=W.words[te]|0,he=O.words[q]|0,Ee=fe*he,we=Ee&67108863;oe=oe+(Ee/67108864|0)|0,we=we+se|0,se=we&67108863,oe=oe+(we>>>26)|0,ee+=oe>>>26,oe&=67108863}z.words[ae]=se,J=oe,oe=ee}return J!==0?z.words[ae]=J:z.length--,z._strip()}function Z(W,O,z){return Y(W,O,z)}S.prototype.mulTo=function(O,z){var J,ee=this.length+O.length;return this.length===10&&O.length===10?J=H(this,O,z):ee<63?J=U(this,O,z):ee<1024?J=Y(this,O,z):J=Z(this,O,z),J},S.prototype.mul=function(O){var z=new S(null);return z.words=new Array(this.length+O.length),this.mulTo(O,z)},S.prototype.mulf=function(O){var z=new S(null);return z.words=new Array(this.length+O.length),Z(this,O,z)},S.prototype.imul=function(O){return this.clone().mulTo(O,this)},S.prototype.imuln=function(O){var z=O<0;z&&(O=-O),x(typeof O=="number"),x(O<67108864);for(var J=0,ee=0;ee<this.length;ee++){var ae=(this.words[ee]|0)*O,oe=(ae&67108863)+(J&67108863);J>>=26,J+=ae/67108864|0,J+=oe>>>26,this.words[ee]=oe&67108863}return J!==0&&(this.words[ee]=J,this.length++),z?this.ineg():this},S.prototype.muln=function(O){return this.clone().imuln(O)},S.prototype.sqr=function(){return this.mul(this)},S.prototype.isqr=function(){return this.imul(this.clone())},S.prototype.pow=function(O){var z=j(O);if(z.length===0)return new S(1);for(var J=this,ee=0;ee<z.length&&z[ee]===0;ee++,J=J.sqr());if(++ee<z.length)for(var ae=J.sqr();ee<z.length;ee++,ae=ae.sqr())z[ee]!==0&&(J=J.mul(ae));return J},S.prototype.iushln=function(O){x(typeof O=="number"&&O>=0);var z=O%26,J=(O-z)/26,ee=67108863>>>26-z<<26-z,ae;if(z!==0){var oe=0;for(ae=0;ae<this.length;ae++){var se=this.words[ae]&ee,G=(this.words[ae]|0)-se<<z;this.words[ae]=G|oe,oe=se>>>26-z}oe&&(this.words[ae]=oe,this.length++)}if(J!==0){for(ae=this.length-1;ae>=0;ae--)this.words[ae+J]=this.words[ae];for(ae=0;ae<J;ae++)this.words[ae]=0;this.length+=J}return this._strip()},S.prototype.ishln=function(O){return x(this.negative===0),this.iushln(O)},S.prototype.iushrn=function(O,z,J){x(typeof O=="number"&&O>=0);var ee;z?ee=(z-z%26)/26:ee=0;var ae=O%26,oe=Math.min((O-ae)/26,this.length),se=67108863^67108863>>>ae<<ae,G=J;if(ee-=oe,ee=Math.max(0,ee),G){for(var q=0;q<oe;q++)G.words[q]=this.words[q];G.length=oe}if(oe!==0)if(this.length>oe)for(this.length-=oe,q=0;q<this.length;q++)this.words[q]=this.words[q+oe];else this.words[0]=0,this.length=1;var te=0;for(q=this.length-1;q>=0&&(te!==0||q>=ee);q--){var fe=this.words[q]|0;this.words[q]=te<<26-ae|fe>>>ae,te=fe&se}return G&&te!==0&&(G.words[G.length++]=te),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},S.prototype.ishrn=function(O,z,J){return x(this.negative===0),this.iushrn(O,z,J)},S.prototype.shln=function(O){return this.clone().ishln(O)},S.prototype.ushln=function(O){return this.clone().iushln(O)},S.prototype.shrn=function(O){return this.clone().ishrn(O)},S.prototype.ushrn=function(O){return this.clone().iushrn(O)},S.prototype.testn=function(O){x(typeof O=="number"&&O>=0);var z=O%26,J=(O-z)/26,ee=1<<z;if(this.length<=J)return!1;var ae=this.words[J];return!!(ae&ee)},S.prototype.imaskn=function(O){x(typeof O=="number"&&O>=0);var z=O%26,J=(O-z)/26;if(x(this.negative===0,"imaskn works only with positive numbers"),this.length<=J)return this;if(z!==0&&J++,this.length=Math.min(J,this.length),z!==0){var ee=67108863^67108863>>>z<<z;this.words[this.length-1]&=ee}return this._strip()},S.prototype.maskn=function(O){return this.clone().imaskn(O)},S.prototype.iaddn=function(O){return x(typeof O=="number"),x(O<67108864),O<0?this.isubn(-O):this.negative!==0?this.length===1&&(this.words[0]|0)<=O?(this.words[0]=O-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(O),this.negative=1,this):this._iaddn(O)},S.prototype._iaddn=function(O){this.words[0]+=O;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},S.prototype.isubn=function(O){if(x(typeof O=="number"),x(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this._strip()},S.prototype.addn=function(O){return this.clone().iaddn(O)},S.prototype.subn=function(O){return this.clone().isubn(O)},S.prototype.iabs=function(){return this.negative=0,this},S.prototype.abs=function(){return this.clone().iabs()},S.prototype._ishlnsubmul=function(O,z,J){var ee=O.length+J,ae;this._expand(ee);var oe,se=0;for(ae=0;ae<O.length;ae++){oe=(this.words[ae+J]|0)+se;var G=(O.words[ae]|0)*z;oe-=G&67108863,se=(oe>>26)-(G/67108864|0),this.words[ae+J]=oe&67108863}for(;ae<this.length-J;ae++)oe=(this.words[ae+J]|0)+se,se=oe>>26,this.words[ae+J]=oe&67108863;if(se===0)return this._strip();for(x(se===-1),se=0,ae=0;ae<this.length;ae++)oe=-(this.words[ae]|0)+se,se=oe>>26,this.words[ae]=oe&67108863;return this.negative=1,this._strip()},S.prototype._wordDiv=function(O,z){var J=this.length-O.length,ee=this.clone(),ae=O,oe=ae.words[ae.length-1]|0,se=this._countBits(oe);J=26-se,J!==0&&(ae=ae.ushln(J),ee.iushln(J),oe=ae.words[ae.length-1]|0);var G=ee.length-ae.length,q;if(z!=="mod"){q=new S(null),q.length=G+1,q.words=new Array(q.length);for(var te=0;te<q.length;te++)q.words[te]=0}var fe=ee.clone()._ishlnsubmul(ae,1,G);fe.negative===0&&(ee=fe,q&&(q.words[G]=1));for(var he=G-1;he>=0;he--){var Ee=(ee.words[ae.length+he]|0)*67108864+(ee.words[ae.length+he-1]|0);for(Ee=Math.min(Ee/oe|0,67108863),ee._ishlnsubmul(ae,Ee,he);ee.negative!==0;)Ee--,ee.negative=0,ee._ishlnsubmul(ae,1,he),ee.isZero()||(ee.negative^=1);q&&(q.words[he]=Ee)}return q&&q._strip(),ee._strip(),z!=="div"&&J!==0&&ee.iushrn(J),{div:q||null,mod:ee}},S.prototype.divmod=function(O,z,J){if(x(!O.isZero()),this.isZero())return{div:new S(0),mod:new S(0)};var ee,ae,oe;return this.negative!==0&&O.negative===0?(oe=this.neg().divmod(O,z),z!=="mod"&&(ee=oe.div.neg()),z!=="div"&&(ae=oe.mod.neg(),J&&ae.negative!==0&&ae.iadd(O)),{div:ee,mod:ae}):this.negative===0&&O.negative!==0?(oe=this.divmod(O.neg(),z),z!=="mod"&&(ee=oe.div.neg()),{div:ee,mod:oe.mod}):this.negative&O.negative?(oe=this.neg().divmod(O.neg(),z),z!=="div"&&(ae=oe.mod.neg(),J&&ae.negative!==0&&ae.isub(O)),{div:oe.div,mod:ae}):O.length>this.length||this.cmp(O)<0?{div:new S(0),mod:this}:O.length===1?z==="div"?{div:this.divn(O.words[0]),mod:null}:z==="mod"?{div:null,mod:new S(this.modrn(O.words[0]))}:{div:this.divn(O.words[0]),mod:new S(this.modrn(O.words[0]))}:this._wordDiv(O,z)},S.prototype.div=function(O){return this.divmod(O,"div",!1).div},S.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},S.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},S.prototype.divRound=function(O){var z=this.divmod(O);if(z.mod.isZero())return z.div;var J=z.div.negative!==0?z.mod.isub(O):z.mod,ee=O.ushrn(1),ae=O.andln(1),oe=J.cmp(ee);return oe<0||ae===1&&oe===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},S.prototype.modrn=function(O){var z=O<0;z&&(O=-O),x(O<=67108863);for(var J=(1<<26)%O,ee=0,ae=this.length-1;ae>=0;ae--)ee=(J*ee+(this.words[ae]|0))%O;return z?-ee:ee},S.prototype.modn=function(O){return this.modrn(O)},S.prototype.idivn=function(O){var z=O<0;z&&(O=-O),x(O<=67108863);for(var J=0,ee=this.length-1;ee>=0;ee--){var ae=(this.words[ee]|0)+J*67108864;this.words[ee]=ae/O|0,J=ae%O}return this._strip(),z?this.ineg():this},S.prototype.divn=function(O){return this.clone().idivn(O)},S.prototype.egcd=function(O){x(O.negative===0),x(!O.isZero());var z=this,J=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var ee=new S(1),ae=new S(0),oe=new S(0),se=new S(1),G=0;z.isEven()&&J.isEven();)z.iushrn(1),J.iushrn(1),++G;for(var q=J.clone(),te=z.clone();!z.isZero();){for(var fe=0,he=1;!(z.words[0]&he)&&fe<26;++fe,he<<=1);if(fe>0)for(z.iushrn(fe);fe-- >0;)(ee.isOdd()||ae.isOdd())&&(ee.iadd(q),ae.isub(te)),ee.iushrn(1),ae.iushrn(1);for(var Ee=0,we=1;!(J.words[0]&we)&&Ee<26;++Ee,we<<=1);if(Ee>0)for(J.iushrn(Ee);Ee-- >0;)(oe.isOdd()||se.isOdd())&&(oe.iadd(q),se.isub(te)),oe.iushrn(1),se.iushrn(1);z.cmp(J)>=0?(z.isub(J),ee.isub(oe),ae.isub(se)):(J.isub(z),oe.isub(ee),se.isub(ae))}return{a:oe,b:se,gcd:J.iushln(G)}},S.prototype._invmp=function(O){x(O.negative===0),x(!O.isZero());var z=this,J=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var ee=new S(1),ae=new S(0),oe=J.clone();z.cmpn(1)>0&&J.cmpn(1)>0;){for(var se=0,G=1;!(z.words[0]&G)&&se<26;++se,G<<=1);if(se>0)for(z.iushrn(se);se-- >0;)ee.isOdd()&&ee.iadd(oe),ee.iushrn(1);for(var q=0,te=1;!(J.words[0]&te)&&q<26;++q,te<<=1);if(q>0)for(J.iushrn(q);q-- >0;)ae.isOdd()&&ae.iadd(oe),ae.iushrn(1);z.cmp(J)>=0?(z.isub(J),ee.isub(ae)):(J.isub(z),ae.isub(ee))}var fe;return z.cmpn(1)===0?fe=ee:fe=ae,fe.cmpn(0)<0&&fe.iadd(O),fe},S.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var z=this.clone(),J=O.clone();z.negative=0,J.negative=0;for(var ee=0;z.isEven()&&J.isEven();ee++)z.iushrn(1),J.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;J.isEven();)J.iushrn(1);var ae=z.cmp(J);if(ae<0){var oe=z;z=J,J=oe}else if(ae===0||J.cmpn(1)===0)break;z.isub(J)}while(!0);return J.iushln(ee)},S.prototype.invm=function(O){return this.egcd(O).a.umod(O)},S.prototype.isEven=function(){return(this.words[0]&1)===0},S.prototype.isOdd=function(){return(this.words[0]&1)===1},S.prototype.andln=function(O){return this.words[0]&O},S.prototype.bincn=function(O){x(typeof O=="number");var z=O%26,J=(O-z)/26,ee=1<<z;if(this.length<=J)return this._expand(J+1),this.words[J]|=ee,this;for(var ae=ee,oe=J;ae!==0&&oe<this.length;oe++){var se=this.words[oe]|0;se+=ae,ae=se>>>26,se&=67108863,this.words[oe]=se}return ae!==0&&(this.words[oe]=ae,this.length++),this},S.prototype.isZero=function(){return this.length===1&&this.words[0]===0},S.prototype.cmpn=function(O){var z=O<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this._strip();var J;if(this.length>1)J=1;else{z&&(O=-O),x(O<=67108863,"Number is too big");var ee=this.words[0]|0;J=ee===O?0:ee<O?-1:1}return this.negative!==0?-J|0:J},S.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var z=this.ucmp(O);return this.negative!==0?-z|0:z},S.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;for(var z=0,J=this.length-1;J>=0;J--){var ee=this.words[J]|0,ae=O.words[J]|0;if(ee!==ae){ee<ae?z=-1:ee>ae&&(z=1);break}}return z},S.prototype.gtn=function(O){return this.cmpn(O)===1},S.prototype.gt=function(O){return this.cmp(O)===1},S.prototype.gten=function(O){return this.cmpn(O)>=0},S.prototype.gte=function(O){return this.cmp(O)>=0},S.prototype.ltn=function(O){return this.cmpn(O)===-1},S.prototype.lt=function(O){return this.cmp(O)===-1},S.prototype.lten=function(O){return this.cmpn(O)<=0},S.prototype.lte=function(O){return this.cmp(O)<=0},S.prototype.eqn=function(O){return this.cmpn(O)===0},S.prototype.eq=function(O){return this.cmp(O)===0},S.red=function(O){return new ye(O)},S.prototype.toRed=function(O){return x(!this.red,"Already a number in reduction context"),x(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},S.prototype.fromRed=function(){return x(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},S.prototype._forceRed=function(O){return this.red=O,this},S.prototype.forceRed=function(O){return x(!this.red,"Already a number in reduction context"),this._forceRed(O)},S.prototype.redAdd=function(O){return x(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},S.prototype.redIAdd=function(O){return x(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},S.prototype.redSub=function(O){return x(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},S.prototype.redISub=function(O){return x(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},S.prototype.redShl=function(O){return x(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},S.prototype.redMul=function(O){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},S.prototype.redIMul=function(O){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},S.prototype.redSqr=function(){return x(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},S.prototype.redISqr=function(){return x(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},S.prototype.redSqrt=function(){return x(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},S.prototype.redInvm=function(){return x(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},S.prototype.redNeg=function(){return x(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},S.prototype.redPow=function(O){return x(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var ne={k256:null,p224:null,p192:null,p25519:null};function re(W,O){this.name=W,this.p=new S(O,16),this.n=this.p.bitLength(),this.k=new S(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}re.prototype._tmp=function(){var O=new S(null);return O.words=new Array(Math.ceil(this.n/13)),O},re.prototype.ireduce=function(O){var z=O,J;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),J=z.bitLength();while(J>this.n);var ee=J<this.n?-1:z.ucmp(this.p);return ee===0?(z.words[0]=0,z.length=1):ee>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},re.prototype.split=function(O,z){O.iushrn(this.n,0,z)},re.prototype.imulK=function(O){return O.imul(this.k)};function X(){re.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}E(X,re),X.prototype.split=function(O,z){for(var J=4194303,ee=Math.min(O.length,9),ae=0;ae<ee;ae++)z.words[ae]=O.words[ae];if(z.length=ee,O.length<=9){O.words[0]=0,O.length=1;return}var oe=O.words[9];for(z.words[z.length++]=oe&J,ae=10;ae<O.length;ae++){var se=O.words[ae]|0;O.words[ae-10]=(se&J)<<4|oe>>>22,oe=se}oe>>>=22,O.words[ae-10]=oe,oe===0&&O.length>10?O.length-=10:O.length-=9},X.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;for(var z=0,J=0;J<O.length;J++){var ee=O.words[J]|0;z+=ee*977,O.words[J]=z&67108863,z=ee*64+(z/67108864|0)}return O.words[O.length-1]===0&&(O.length--,O.words[O.length-1]===0&&O.length--),O};function ce(){re.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}E(ce,re);function ue(){re.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}E(ue,re);function _e(){re.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}E(_e,re),_e.prototype.imulK=function(O){for(var z=0,J=0;J<O.length;J++){var ee=(O.words[J]|0)*19+z,ae=ee&67108863;ee>>>=26,O.words[J]=ae,z=ee}return z!==0&&(O.words[O.length++]=z),O},S._prime=function(O){if(ne[O])return ne[O];var z;if(O==="k256")z=new X;else if(O==="p224")z=new ce;else if(O==="p192")z=new ue;else if(O==="p25519")z=new _e;else throw new Error("Unknown prime "+O);return ne[O]=z,z};function ye(W){if(typeof W=="string"){var O=S._prime(W);this.m=O.p,this.prime=O}else x(W.gtn(1),"modulus must be greater than 1"),this.m=W,this.prime=null}ye.prototype._verify1=function(O){x(O.negative===0,"red works only with positives"),x(O.red,"red works only with red numbers")},ye.prototype._verify2=function(O,z){x((O.negative|z.negative)===0,"red works only with positives"),x(O.red&&O.red===z.red,"red works only with red numbers")},ye.prototype.imod=function(O){return this.prime?this.prime.ireduce(O)._forceRed(this):(I(O,O.umod(this.m)._forceRed(this)),O)},ye.prototype.neg=function(O){return O.isZero()?O.clone():this.m.sub(O)._forceRed(this)},ye.prototype.add=function(O,z){this._verify2(O,z);var J=O.add(z);return J.cmp(this.m)>=0&&J.isub(this.m),J._forceRed(this)},ye.prototype.iadd=function(O,z){this._verify2(O,z);var J=O.iadd(z);return J.cmp(this.m)>=0&&J.isub(this.m),J},ye.prototype.sub=function(O,z){this._verify2(O,z);var J=O.sub(z);return J.cmpn(0)<0&&J.iadd(this.m),J._forceRed(this)},ye.prototype.isub=function(O,z){this._verify2(O,z);var J=O.isub(z);return J.cmpn(0)<0&&J.iadd(this.m),J},ye.prototype.shl=function(O,z){return this._verify1(O),this.imod(O.ushln(z))},ye.prototype.imul=function(O,z){return this._verify2(O,z),this.imod(O.imul(z))},ye.prototype.mul=function(O,z){return this._verify2(O,z),this.imod(O.mul(z))},ye.prototype.isqr=function(O){return this.imul(O,O.clone())},ye.prototype.sqr=function(O){return this.mul(O,O)},ye.prototype.sqrt=function(O){if(O.isZero())return O.clone();var z=this.m.andln(3);if(x(z%2===1),z===3){var J=this.m.add(new S(1)).iushrn(2);return this.pow(O,J)}for(var ee=this.m.subn(1),ae=0;!ee.isZero()&&ee.andln(1)===0;)ae++,ee.iushrn(1);x(!ee.isZero());var oe=new S(1).toRed(this),se=oe.redNeg(),G=this.m.subn(1).iushrn(1),q=this.m.bitLength();for(q=new S(2*q*q).toRed(this);this.pow(q,G).cmp(se)!==0;)q.redIAdd(se);for(var te=this.pow(q,ee),fe=this.pow(O,ee.addn(1).iushrn(1)),he=this.pow(O,ee),Ee=ae;he.cmp(oe)!==0;){for(var we=he,xe=0;we.cmp(oe)!==0;xe++)we=we.redSqr();x(xe<Ee);var $e=this.pow(te,new S(1).iushln(Ee-xe-1));fe=fe.redMul($e),te=$e.redSqr(),he=he.redMul(te),Ee=xe}return fe},ye.prototype.invm=function(O){var z=O._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},ye.prototype.pow=function(O,z){if(z.isZero())return new S(1).toRed(this);if(z.cmpn(1)===0)return O.clone();var J=4,ee=new Array(1<<J);ee[0]=new S(1).toRed(this),ee[1]=O;for(var ae=2;ae<ee.length;ae++)ee[ae]=this.mul(ee[ae-1],O);var oe=ee[0],se=0,G=0,q=z.bitLength()%26;for(q===0&&(q=26),ae=z.length-1;ae>=0;ae--){for(var te=z.words[ae],fe=q-1;fe>=0;fe--){var he=te>>fe&1;if(oe!==ee[0]&&(oe=this.sqr(oe)),he===0&&se===0){G=0;continue}se<<=1,se|=he,G++,!(G!==J&&(ae!==0||fe!==0))&&(oe=this.mul(oe,ee[se]),G=0,se=0)}q=26}return oe},ye.prototype.convertTo=function(O){var z=O.umod(this.m);return z===O?z.clone():z},ye.prototype.convertFrom=function(O){var z=O.clone();return z.red=null,z},S.mont=function(O){return new ie(O)};function ie(W){ye.call(this,W),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new S(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E(ie,ye),ie.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},ie.prototype.convertFrom=function(O){var z=this.imod(O.mul(this.rinv));return z.red=null,z},ie.prototype.imul=function(O,z){if(O.isZero()||z.isZero())return O.words[0]=0,O.length=1,O;var J=O.imul(z),ee=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ae=J.isub(ee).iushrn(this.shift),oe=ae;return ae.cmp(this.m)>=0?oe=ae.isub(this.m):ae.cmpn(0)<0&&(oe=ae.iadd(this.m)),oe._forceRed(this)},ie.prototype.mul=function(O,z){if(O.isZero()||z.isZero())return new S(0)._forceRed(this);var J=O.mul(z),ee=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ae=J.isub(ee).iushrn(this.shift),oe=ae;return ae.cmp(this.m)>=0?oe=ae.isub(this.m):ae.cmpn(0)<0&&(oe=ae.iadd(this.m)),oe._forceRed(this)},ie.prototype.invm=function(O){var z=this.imod(O._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(t,commonjsGlobal)}(bn$3)),bn$3.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var t=requireBn$1(),n=requireBrowser$b();function _(S){var C=x(S),T=C.toRed(t.mont(S.modulus)).redPow(new t(S.publicExponent)).fromRed();return{blinder:T,unblinder:C.invm(S.modulus)}}function x(S){var C=S.modulus.byteLength(),T;do T=new t(n(C));while(T.cmp(S.modulus)>=0||!T.umod(S.prime1)||!T.umod(S.prime2));return T}function E(S,C){var T=_(C),B=C.modulus.byteLength(),A=new t(S).mul(T.blinder).umod(C.modulus),I=A.toRed(t.mont(C.prime1)),D=A.toRed(t.mont(C.prime2)),M=C.coefficient,V=C.prime1,L=C.prime2,F=I.redPow(C.exponent1).fromRed(),j=D.redPow(C.exponent2).fromRed(),U=F.isub(j).imul(M).umod(V).imul(L);return j.iadd(U).imul(T.unblinder).umod(C.modulus).toArrayLike(Buffer$5,"be",B)}return E.getr=x,browserifyRsa=E,browserifyRsa}var elliptic$3={};const name$4="elliptic",version$i="6.5.4",description$1="EC cryptography",main$1="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies$1={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0={name:name$4,version:version$i,description:description$1,main:main$1,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies:dependencies$1};var utils$p={},utils$o={};(function(t){var n=t;function _(S,C){if(Array.isArray(S))return S.slice();if(!S)return[];var T=[];if(typeof S!="string"){for(var B=0;B<S.length;B++)T[B]=S[B]|0;return T}if(C==="hex"){S=S.replace(/[^a-z0-9]+/ig,""),S.length%2!==0&&(S="0"+S);for(var B=0;B<S.length;B+=2)T.push(parseInt(S[B]+S[B+1],16))}else for(var B=0;B<S.length;B++){var A=S.charCodeAt(B),I=A>>8,D=A&255;I?T.push(I,D):T.push(D)}return T}n.toArray=_;function x(S){return S.length===1?"0"+S:S}n.zero2=x;function E(S){for(var C="",T=0;T<S.length;T++)C+=x(S[T].toString(16));return C}n.toHex=E,n.encode=function(C,T){return T==="hex"?E(C):C}})(utils$o);(function(t){var n=t,_=bnExports$2,x=minimalisticAssert$1,E=utils$o;n.assert=x,n.toArray=E.toArray,n.zero2=E.zero2,n.toHex=E.toHex,n.encode=E.encode;function S(I,D,M){var V=new Array(Math.max(I.bitLength(),M)+1);V.fill(0);for(var L=1<<D+1,F=I.clone(),j=0;j<V.length;j++){var U,H=F.andln(L-1);F.isOdd()?(H>(L>>1)-1?U=(L>>1)-H:U=H,F.isubn(U)):U=0,V[j]=U,F.iushrn(1)}return V}n.getNAF=S;function C(I,D){var M=[[],[]];I=I.clone(),D=D.clone();for(var V=0,L=0,F;I.cmpn(-V)>0||D.cmpn(-L)>0;){var j=I.andln(3)+V&3,U=D.andln(3)+L&3;j===3&&(j=-1),U===3&&(U=-1);var H;j&1?(F=I.andln(7)+V&7,(F===3||F===5)&&U===2?H=-j:H=j):H=0,M[0].push(H);var Y;U&1?(F=D.andln(7)+L&7,(F===3||F===5)&&j===2?Y=-U:Y=U):Y=0,M[1].push(Y),2*V===H+1&&(V=1-V),2*L===Y+1&&(L=1-L),I.iushrn(1),D.iushrn(1)}return M}n.getJSF=C;function T(I,D,M){var V="_"+D;I.prototype[D]=function(){return this[V]!==void 0?this[V]:this[V]=M.call(this)}}n.cachedProperty=T;function B(I){return typeof I=="string"?n.toArray(I,"hex"):I}n.parseBytes=B;function A(I){return new _(I,"hex","le")}n.intFromLE=A})(utils$p);var curve={},BN$9=bnExports$2,utils$n=utils$p,getNAF$1=utils$n.getNAF,getJSF$1=utils$n.getJSF,assert$k=utils$n.assert;function BaseCurve$1(t,n){this.type=t,this.p=new BN$9(n.p,16),this.red=n.prime?BN$9.red(n.prime):BN$9.mont(this.p),this.zero=new BN$9(0).toRed(this.red),this.one=new BN$9(1).toRed(this.red),this.two=new BN$9(2).toRed(this.red),this.n=n.n&&new BN$9(n.n,16),this.g=n.g&&this.pointFromJSON(n.g,n.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var _=this.n&&this.p.div(this.n);!_||_.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$3=BaseCurve$1;BaseCurve$1.prototype.point=function(){throw new Error("Not implemented")};BaseCurve$1.prototype.validate=function(){throw new Error("Not implemented")};BaseCurve$1.prototype._fixedNafMul=function(n,_){assert$k(n.precomputed);var x=n._getDoubles(),E=getNAF$1(_,1,this._bitLength),S=(1<<x.step+1)-(x.step%2===0?2:1);S/=3;var C=[],T,B;for(T=0;T<E.length;T+=x.step){B=0;for(var A=T+x.step-1;A>=T;A--)B=(B<<1)+E[A];C.push(B)}for(var I=this.jpoint(null,null,null),D=this.jpoint(null,null,null),M=S;M>0;M--){for(T=0;T<C.length;T++)B=C[T],B===M?D=D.mixedAdd(x.points[T]):B===-M&&(D=D.mixedAdd(x.points[T].neg()));I=I.add(D)}return I.toP()};BaseCurve$1.prototype._wnafMul=function(n,_){var x=4,E=n._getNAFPoints(x);x=E.wnd;for(var S=E.points,C=getNAF$1(_,x,this._bitLength),T=this.jpoint(null,null,null),B=C.length-1;B>=0;B--){for(var A=0;B>=0&&C[B]===0;B--)A++;if(B>=0&&A++,T=T.dblp(A),B<0)break;var I=C[B];assert$k(I!==0),n.type==="affine"?I>0?T=T.mixedAdd(S[I-1>>1]):T=T.mixedAdd(S[-I-1>>1].neg()):I>0?T=T.add(S[I-1>>1]):T=T.add(S[-I-1>>1].neg())}return n.type==="affine"?T.toP():T};BaseCurve$1.prototype._wnafMulAdd=function(n,_,x,E,S){var C=this._wnafT1,T=this._wnafT2,B=this._wnafT3,A=0,I,D,M;for(I=0;I<E;I++){M=_[I];var V=M._getNAFPoints(n);C[I]=V.wnd,T[I]=V.points}for(I=E-1;I>=1;I-=2){var L=I-1,F=I;if(C[L]!==1||C[F]!==1){B[L]=getNAF$1(x[L],C[L],this._bitLength),B[F]=getNAF$1(x[F],C[F],this._bitLength),A=Math.max(B[L].length,A),A=Math.max(B[F].length,A);continue}var j=[_[L],null,null,_[F]];_[L].y.cmp(_[F].y)===0?(j[1]=_[L].add(_[F]),j[2]=_[L].toJ().mixedAdd(_[F].neg())):_[L].y.cmp(_[F].y.redNeg())===0?(j[1]=_[L].toJ().mixedAdd(_[F]),j[2]=_[L].add(_[F].neg())):(j[1]=_[L].toJ().mixedAdd(_[F]),j[2]=_[L].toJ().mixedAdd(_[F].neg()));var U=[-3,-1,-5,-7,0,7,5,1,3],H=getJSF$1(x[L],x[F]);for(A=Math.max(H[0].length,A),B[L]=new Array(A),B[F]=new Array(A),D=0;D<A;D++){var Y=H[0][D]|0,Z=H[1][D]|0;B[L][D]=U[(Y+1)*3+(Z+1)],B[F][D]=0,T[L]=j}}var ne=this.jpoint(null,null,null),re=this._wnafT4;for(I=A;I>=0;I--){for(var X=0;I>=0;){var ce=!0;for(D=0;D<E;D++)re[D]=B[D][I]|0,re[D]!==0&&(ce=!1);if(!ce)break;X++,I--}if(I>=0&&X++,ne=ne.dblp(X),I<0)break;for(D=0;D<E;D++){var ue=re[D];ue!==0&&(ue>0?M=T[D][ue-1>>1]:ue<0&&(M=T[D][-ue-1>>1].neg()),M.type==="affine"?ne=ne.mixedAdd(M):ne=ne.add(M))}}for(I=0;I<E;I++)T[I]=null;return S?ne:ne.toP()};function BasePoint$1(t,n){this.curve=t,this.type=n,this.precomputed=null}BaseCurve$1.BasePoint=BasePoint$1;BasePoint$1.prototype.eq=function(){throw new Error("Not implemented")};BasePoint$1.prototype.validate=function(){return this.curve.validate(this)};BaseCurve$1.prototype.decodePoint=function(n,_){n=utils$n.toArray(n,_);var x=this.p.byteLength();if((n[0]===4||n[0]===6||n[0]===7)&&n.length-1===2*x){n[0]===6?assert$k(n[n.length-1]%2===0):n[0]===7&&assert$k(n[n.length-1]%2===1);var E=this.point(n.slice(1,1+x),n.slice(1+x,1+2*x));return E}else if((n[0]===2||n[0]===3)&&n.length-1===x)return this.pointFromX(n.slice(1,1+x),n[0]===3);throw new Error("Unknown point format")};BasePoint$1.prototype.encodeCompressed=function(n){return this.encode(n,!0)};BasePoint$1.prototype._encode=function(n){var _=this.curve.p.byteLength(),x=this.getX().toArray("be",_);return n?[this.getY().isEven()?2:3].concat(x):[4].concat(x,this.getY().toArray("be",_))};BasePoint$1.prototype.encode=function(n,_){return utils$n.encode(this._encode(_),n)};BasePoint$1.prototype.precompute=function(n){if(this.precomputed)return this;var _={doubles:null,naf:null,beta:null};return _.naf=this._getNAFPoints(8),_.doubles=this._getDoubles(4,n),_.beta=this._getBeta(),this.precomputed=_,this};BasePoint$1.prototype._hasDoubles=function(n){if(!this.precomputed)return!1;var _=this.precomputed.doubles;return _?_.points.length>=Math.ceil((n.bitLength()+1)/_.step):!1};BasePoint$1.prototype._getDoubles=function(n,_){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var x=[this],E=this,S=0;S<_;S+=n){for(var C=0;C<n;C++)E=E.dbl();x.push(E)}return{step:n,points:x}};BasePoint$1.prototype._getNAFPoints=function(n){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var _=[this],x=(1<<n)-1,E=x===1?null:this.dbl(),S=1;S<x;S++)_[S]=_[S-1].add(E);return{wnd:n,points:_}};BasePoint$1.prototype._getBeta=function(){return null};BasePoint$1.prototype.dblp=function(n){for(var _=this,x=0;x<n;x++)_=_.dbl();return _};var utils$m=utils$p,BN$8=bnExports$2,inherits$5=inherits_browserExports,Base$2=base$3,assert$j=utils$m.assert;function ShortCurve$1(t){Base$2.call(this,"short",t),this.a=new BN$8(t.a,16).toRed(this.red),this.b=new BN$8(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$5(ShortCurve$1,Base$2);var short=ShortCurve$1;ShortCurve$1.prototype._getEndomorphism=function(n){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var _,x;if(n.beta)_=new BN$8(n.beta,16).toRed(this.red);else{var E=this._getEndoRoots(this.p);_=E[0].cmp(E[1])<0?E[0]:E[1],_=_.toRed(this.red)}if(n.lambda)x=new BN$8(n.lambda,16);else{var S=this._getEndoRoots(this.n);this.g.mul(S[0]).x.cmp(this.g.x.redMul(_))===0?x=S[0]:(x=S[1],assert$j(this.g.mul(x).x.cmp(this.g.x.redMul(_))===0))}var C;return n.basis?C=n.basis.map(function(T){return{a:new BN$8(T.a,16),b:new BN$8(T.b,16)}}):C=this._getEndoBasis(x),{beta:_,lambda:x,basis:C}}};ShortCurve$1.prototype._getEndoRoots=function(n){var _=n===this.p?this.red:BN$8.mont(n),x=new BN$8(2).toRed(_).redInvm(),E=x.redNeg(),S=new BN$8(3).toRed(_).redNeg().redSqrt().redMul(x),C=E.redAdd(S).fromRed(),T=E.redSub(S).fromRed();return[C,T]};ShortCurve$1.prototype._getEndoBasis=function(n){for(var _=this.n.ushrn(Math.floor(this.n.bitLength()/2)),x=n,E=this.n.clone(),S=new BN$8(1),C=new BN$8(0),T=new BN$8(0),B=new BN$8(1),A,I,D,M,V,L,F,j=0,U,H;x.cmpn(0)!==0;){var Y=E.div(x);U=E.sub(Y.mul(x)),H=T.sub(Y.mul(S));var Z=B.sub(Y.mul(C));if(!D&&U.cmp(_)<0)A=F.neg(),I=S,D=U.neg(),M=H;else if(D&&++j===2)break;F=U,E=x,x=U,T=S,S=H,B=C,C=Z}V=U.neg(),L=H;var ne=D.sqr().add(M.sqr()),re=V.sqr().add(L.sqr());return re.cmp(ne)>=0&&(V=A,L=I),D.negative&&(D=D.neg(),M=M.neg()),V.negative&&(V=V.neg(),L=L.neg()),[{a:D,b:M},{a:V,b:L}]};ShortCurve$1.prototype._endoSplit=function(n){var _=this.endo.basis,x=_[0],E=_[1],S=E.b.mul(n).divRound(this.n),C=x.b.neg().mul(n).divRound(this.n),T=S.mul(x.a),B=C.mul(E.a),A=S.mul(x.b),I=C.mul(E.b),D=n.sub(T).sub(B),M=A.add(I).neg();return{k1:D,k2:M}};ShortCurve$1.prototype.pointFromX=function(n,_){n=new BN$8(n,16),n.red||(n=n.toRed(this.red));var x=n.redSqr().redMul(n).redIAdd(n.redMul(this.a)).redIAdd(this.b),E=x.redSqrt();if(E.redSqr().redSub(x).cmp(this.zero)!==0)throw new Error("invalid point");var S=E.fromRed().isOdd();return(_&&!S||!_&&S)&&(E=E.redNeg()),this.point(n,E)};ShortCurve$1.prototype.validate=function(n){if(n.inf)return!0;var _=n.x,x=n.y,E=this.a.redMul(_),S=_.redSqr().redMul(_).redIAdd(E).redIAdd(this.b);return x.redSqr().redISub(S).cmpn(0)===0};ShortCurve$1.prototype._endoWnafMulAdd=function(n,_,x){for(var E=this._endoWnafT1,S=this._endoWnafT2,C=0;C<n.length;C++){var T=this._endoSplit(_[C]),B=n[C],A=B._getBeta();T.k1.negative&&(T.k1.ineg(),B=B.neg(!0)),T.k2.negative&&(T.k2.ineg(),A=A.neg(!0)),E[C*2]=B,E[C*2+1]=A,S[C*2]=T.k1,S[C*2+1]=T.k2}for(var I=this._wnafMulAdd(1,E,S,C*2,x),D=0;D<C*2;D++)E[D]=null,S[D]=null;return I};function Point$5(t,n,_,x){Base$2.BasePoint.call(this,t,"affine"),n===null&&_===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$8(n,16),this.y=new BN$8(_,16),x&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$5(Point$5,Base$2.BasePoint);ShortCurve$1.prototype.point=function(n,_,x){return new Point$5(this,n,_,x)};ShortCurve$1.prototype.pointFromJSON=function(n,_){return Point$5.fromJSON(this,n,_)};Point$5.prototype._getBeta=function(){if(this.curve.endo){var n=this.precomputed;if(n&&n.beta)return n.beta;var _=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(n){var x=this.curve,E=function(S){return x.point(S.x.redMul(x.endo.beta),S.y)};n.beta=_,_.precomputed={beta:null,naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(E)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(E)}}}return _}};Point$5.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$5.fromJSON=function(n,_,x){typeof _=="string"&&(_=JSON.parse(_));var E=n.point(_[0],_[1],x);if(!_[2])return E;function S(T){return n.point(T[0],T[1],x)}var C=_[2];return E.precomputed={beta:null,doubles:C.doubles&&{step:C.doubles.step,points:[E].concat(C.doubles.points.map(S))},naf:C.naf&&{wnd:C.naf.wnd,points:[E].concat(C.naf.points.map(S))}},E};Point$5.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$5.prototype.isInfinity=function(){return this.inf};Point$5.prototype.add=function(n){if(this.inf)return n;if(n.inf)return this;if(this.eq(n))return this.dbl();if(this.neg().eq(n))return this.curve.point(null,null);if(this.x.cmp(n.x)===0)return this.curve.point(null,null);var _=this.y.redSub(n.y);_.cmpn(0)!==0&&(_=_.redMul(this.x.redSub(n.x).redInvm()));var x=_.redSqr().redISub(this.x).redISub(n.x),E=_.redMul(this.x.redSub(x)).redISub(this.y);return this.curve.point(x,E)};Point$5.prototype.dbl=function(){if(this.inf)return this;var n=this.y.redAdd(this.y);if(n.cmpn(0)===0)return this.curve.point(null,null);var _=this.curve.a,x=this.x.redSqr(),E=n.redInvm(),S=x.redAdd(x).redIAdd(x).redIAdd(_).redMul(E),C=S.redSqr().redISub(this.x.redAdd(this.x)),T=S.redMul(this.x.redSub(C)).redISub(this.y);return this.curve.point(C,T)};Point$5.prototype.getX=function(){return this.x.fromRed()};Point$5.prototype.getY=function(){return this.y.fromRed()};Point$5.prototype.mul=function(n){return n=new BN$8(n,16),this.isInfinity()?this:this._hasDoubles(n)?this.curve._fixedNafMul(this,n):this.curve.endo?this.curve._endoWnafMulAdd([this],[n]):this.curve._wnafMul(this,n)};Point$5.prototype.mulAdd=function(n,_,x){var E=[this,_],S=[n,x];return this.curve.endo?this.curve._endoWnafMulAdd(E,S):this.curve._wnafMulAdd(1,E,S,2)};Point$5.prototype.jmulAdd=function(n,_,x){var E=[this,_],S=[n,x];return this.curve.endo?this.curve._endoWnafMulAdd(E,S,!0):this.curve._wnafMulAdd(1,E,S,2,!0)};Point$5.prototype.eq=function(n){return this===n||this.inf===n.inf&&(this.inf||this.x.cmp(n.x)===0&&this.y.cmp(n.y)===0)};Point$5.prototype.neg=function(n){if(this.inf)return this;var _=this.curve.point(this.x,this.y.redNeg());if(n&&this.precomputed){var x=this.precomputed,E=function(S){return S.neg()};_.precomputed={naf:x.naf&&{wnd:x.naf.wnd,points:x.naf.points.map(E)},doubles:x.doubles&&{step:x.doubles.step,points:x.doubles.points.map(E)}}}return _};Point$5.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var n=this.curve.jpoint(this.x,this.y,this.curve.one);return n};function JPoint$1(t,n,_,x){Base$2.BasePoint.call(this,t,"jacobian"),n===null&&_===null&&x===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$8(0)):(this.x=new BN$8(n,16),this.y=new BN$8(_,16),this.z=new BN$8(x,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$5(JPoint$1,Base$2.BasePoint);ShortCurve$1.prototype.jpoint=function(n,_,x){return new JPoint$1(this,n,_,x)};JPoint$1.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var n=this.z.redInvm(),_=n.redSqr(),x=this.x.redMul(_),E=this.y.redMul(_).redMul(n);return this.curve.point(x,E)};JPoint$1.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint$1.prototype.add=function(n){if(this.isInfinity())return n;if(n.isInfinity())return this;var _=n.z.redSqr(),x=this.z.redSqr(),E=this.x.redMul(_),S=n.x.redMul(x),C=this.y.redMul(_.redMul(n.z)),T=n.y.redMul(x.redMul(this.z)),B=E.redSub(S),A=C.redSub(T);if(B.cmpn(0)===0)return A.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var I=B.redSqr(),D=I.redMul(B),M=E.redMul(I),V=A.redSqr().redIAdd(D).redISub(M).redISub(M),L=A.redMul(M.redISub(V)).redISub(C.redMul(D)),F=this.z.redMul(n.z).redMul(B);return this.curve.jpoint(V,L,F)};JPoint$1.prototype.mixedAdd=function(n){if(this.isInfinity())return n.toJ();if(n.isInfinity())return this;var _=this.z.redSqr(),x=this.x,E=n.x.redMul(_),S=this.y,C=n.y.redMul(_).redMul(this.z),T=x.redSub(E),B=S.redSub(C);if(T.cmpn(0)===0)return B.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=T.redSqr(),I=A.redMul(T),D=x.redMul(A),M=B.redSqr().redIAdd(I).redISub(D).redISub(D),V=B.redMul(D.redISub(M)).redISub(S.redMul(I)),L=this.z.redMul(T);return this.curve.jpoint(M,V,L)};JPoint$1.prototype.dblp=function(n){if(n===0)return this;if(this.isInfinity())return this;if(!n)return this.dbl();var _;if(this.curve.zeroA||this.curve.threeA){var x=this;for(_=0;_<n;_++)x=x.dbl();return x}var E=this.curve.a,S=this.curve.tinv,C=this.x,T=this.y,B=this.z,A=B.redSqr().redSqr(),I=T.redAdd(T);for(_=0;_<n;_++){var D=C.redSqr(),M=I.redSqr(),V=M.redSqr(),L=D.redAdd(D).redIAdd(D).redIAdd(E.redMul(A)),F=C.redMul(M),j=L.redSqr().redISub(F.redAdd(F)),U=F.redISub(j),H=L.redMul(U);H=H.redIAdd(H).redISub(V);var Y=I.redMul(B);_+1<n&&(A=A.redMul(V)),C=j,B=Y,I=H}return this.curve.jpoint(C,I.redMul(S),B)};JPoint$1.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint$1.prototype._zeroDbl=function(){var n,_,x;if(this.zOne){var E=this.x.redSqr(),S=this.y.redSqr(),C=S.redSqr(),T=this.x.redAdd(S).redSqr().redISub(E).redISub(C);T=T.redIAdd(T);var B=E.redAdd(E).redIAdd(E),A=B.redSqr().redISub(T).redISub(T),I=C.redIAdd(C);I=I.redIAdd(I),I=I.redIAdd(I),n=A,_=B.redMul(T.redISub(A)).redISub(I),x=this.y.redAdd(this.y)}else{var D=this.x.redSqr(),M=this.y.redSqr(),V=M.redSqr(),L=this.x.redAdd(M).redSqr().redISub(D).redISub(V);L=L.redIAdd(L);var F=D.redAdd(D).redIAdd(D),j=F.redSqr(),U=V.redIAdd(V);U=U.redIAdd(U),U=U.redIAdd(U),n=j.redISub(L).redISub(L),_=F.redMul(L.redISub(n)).redISub(U),x=this.y.redMul(this.z),x=x.redIAdd(x)}return this.curve.jpoint(n,_,x)};JPoint$1.prototype._threeDbl=function(){var n,_,x;if(this.zOne){var E=this.x.redSqr(),S=this.y.redSqr(),C=S.redSqr(),T=this.x.redAdd(S).redSqr().redISub(E).redISub(C);T=T.redIAdd(T);var B=E.redAdd(E).redIAdd(E).redIAdd(this.curve.a),A=B.redSqr().redISub(T).redISub(T);n=A;var I=C.redIAdd(C);I=I.redIAdd(I),I=I.redIAdd(I),_=B.redMul(T.redISub(A)).redISub(I),x=this.y.redAdd(this.y)}else{var D=this.z.redSqr(),M=this.y.redSqr(),V=this.x.redMul(M),L=this.x.redSub(D).redMul(this.x.redAdd(D));L=L.redAdd(L).redIAdd(L);var F=V.redIAdd(V);F=F.redIAdd(F);var j=F.redAdd(F);n=L.redSqr().redISub(j),x=this.y.redAdd(this.z).redSqr().redISub(M).redISub(D);var U=M.redSqr();U=U.redIAdd(U),U=U.redIAdd(U),U=U.redIAdd(U),_=L.redMul(F.redISub(n)).redISub(U)}return this.curve.jpoint(n,_,x)};JPoint$1.prototype._dbl=function(){var n=this.curve.a,_=this.x,x=this.y,E=this.z,S=E.redSqr().redSqr(),C=_.redSqr(),T=x.redSqr(),B=C.redAdd(C).redIAdd(C).redIAdd(n.redMul(S)),A=_.redAdd(_);A=A.redIAdd(A);var I=A.redMul(T),D=B.redSqr().redISub(I.redAdd(I)),M=I.redISub(D),V=T.redSqr();V=V.redIAdd(V),V=V.redIAdd(V),V=V.redIAdd(V);var L=B.redMul(M).redISub(V),F=x.redAdd(x).redMul(E);return this.curve.jpoint(D,L,F)};JPoint$1.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var n=this.x.redSqr(),_=this.y.redSqr(),x=this.z.redSqr(),E=_.redSqr(),S=n.redAdd(n).redIAdd(n),C=S.redSqr(),T=this.x.redAdd(_).redSqr().redISub(n).redISub(E);T=T.redIAdd(T),T=T.redAdd(T).redIAdd(T),T=T.redISub(C);var B=T.redSqr(),A=E.redIAdd(E);A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var I=S.redIAdd(T).redSqr().redISub(C).redISub(B).redISub(A),D=_.redMul(I);D=D.redIAdd(D),D=D.redIAdd(D);var M=this.x.redMul(B).redISub(D);M=M.redIAdd(M),M=M.redIAdd(M);var V=this.y.redMul(I.redMul(A.redISub(I)).redISub(T.redMul(B)));V=V.redIAdd(V),V=V.redIAdd(V),V=V.redIAdd(V);var L=this.z.redAdd(T).redSqr().redISub(x).redISub(B);return this.curve.jpoint(M,V,L)};JPoint$1.prototype.mul=function(n,_){return n=new BN$8(n,_),this.curve._wnafMul(this,n)};JPoint$1.prototype.eq=function(n){if(n.type==="affine")return this.eq(n.toJ());if(this===n)return!0;var _=this.z.redSqr(),x=n.z.redSqr();if(this.x.redMul(x).redISub(n.x.redMul(_)).cmpn(0)!==0)return!1;var E=_.redMul(this.z),S=x.redMul(n.z);return this.y.redMul(S).redISub(n.y.redMul(E)).cmpn(0)===0};JPoint$1.prototype.eqXToP=function(n){var _=this.z.redSqr(),x=n.toRed(this.curve.red).redMul(_);if(this.x.cmp(x)===0)return!0;for(var E=n.clone(),S=this.curve.redN.redMul(_);;){if(E.iadd(this.curve.n),E.cmp(this.curve.p)>=0)return!1;if(x.redIAdd(S),this.x.cmp(x)===0)return!0}};JPoint$1.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint$1.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var BN$7=bnExports$2,inherits$4=inherits_browserExports,Base$1=base$3,utils$l=utils$p;function MontCurve(t){Base$1.call(this,"mont",t),this.a=new BN$7(t.a,16).toRed(this.red),this.b=new BN$7(t.b,16).toRed(this.red),this.i4=new BN$7(4).toRed(this.red).redInvm(),this.two=new BN$7(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$4(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function(n){var _=n.normalize().x,x=_.redSqr(),E=x.redMul(_).redAdd(x.redMul(this.a)).redAdd(_),S=E.redSqrt();return S.redSqr().cmp(E)===0};function Point$4(t,n,_){Base$1.BasePoint.call(this,t,"projective"),n===null&&_===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$7(n,16),this.z=new BN$7(_,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$4(Point$4,Base$1.BasePoint);MontCurve.prototype.decodePoint=function(n,_){return this.point(utils$l.toArray(n,_),1)};MontCurve.prototype.point=function(n,_){return new Point$4(this,n,_)};MontCurve.prototype.pointFromJSON=function(n){return Point$4.fromJSON(this,n)};Point$4.prototype.precompute=function(){};Point$4.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Point$4.fromJSON=function(n,_){return new Point$4(n,_[0],_[1]||n.one)};Point$4.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$4.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Point$4.prototype.dbl=function(){var n=this.x.redAdd(this.z),_=n.redSqr(),x=this.x.redSub(this.z),E=x.redSqr(),S=_.redSub(E),C=_.redMul(E),T=S.redMul(E.redAdd(this.curve.a24.redMul(S)));return this.curve.point(C,T)};Point$4.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.diffAdd=function(n,_){var x=this.x.redAdd(this.z),E=this.x.redSub(this.z),S=n.x.redAdd(n.z),C=n.x.redSub(n.z),T=C.redMul(x),B=S.redMul(E),A=_.z.redMul(T.redAdd(B).redSqr()),I=_.x.redMul(T.redISub(B).redSqr());return this.curve.point(A,I)};Point$4.prototype.mul=function(n){for(var _=n.clone(),x=this,E=this.curve.point(null,null),S=this,C=[];_.cmpn(0)!==0;_.iushrn(1))C.push(_.andln(1));for(var T=C.length-1;T>=0;T--)C[T]===0?(x=x.diffAdd(E,S),E=E.dbl()):(E=x.diffAdd(E,S),x=x.dbl());return E};Point$4.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.eq=function(n){return this.getX().cmp(n.getX())===0};Point$4.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Point$4.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var utils$k=utils$p,BN$6=bnExports$2,inherits$3=inherits_browserExports,Base=base$3,assert$i=utils$k.assert;function EdwardsCurve(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Base.call(this,"edwards",t),this.a=new BN$6(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$6(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$6(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$i(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}inherits$3(EdwardsCurve,Base);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function(n){return this.mOneA?n.redNeg():this.a.redMul(n)};EdwardsCurve.prototype._mulC=function(n){return this.oneC?n:this.c.redMul(n)};EdwardsCurve.prototype.jpoint=function(n,_,x,E){return this.point(n,_,x,E)};EdwardsCurve.prototype.pointFromX=function(n,_){n=new BN$6(n,16),n.red||(n=n.toRed(this.red));var x=n.redSqr(),E=this.c2.redSub(this.a.redMul(x)),S=this.one.redSub(this.c2.redMul(this.d).redMul(x)),C=E.redMul(S.redInvm()),T=C.redSqrt();if(T.redSqr().redSub(C).cmp(this.zero)!==0)throw new Error("invalid point");var B=T.fromRed().isOdd();return(_&&!B||!_&&B)&&(T=T.redNeg()),this.point(n,T)};EdwardsCurve.prototype.pointFromY=function(n,_){n=new BN$6(n,16),n.red||(n=n.toRed(this.red));var x=n.redSqr(),E=x.redSub(this.c2),S=x.redMul(this.d).redMul(this.c2).redSub(this.a),C=E.redMul(S.redInvm());if(C.cmp(this.zero)===0){if(_)throw new Error("invalid point");return this.point(this.zero,n)}var T=C.redSqrt();if(T.redSqr().redSub(C).cmp(this.zero)!==0)throw new Error("invalid point");return T.fromRed().isOdd()!==_&&(T=T.redNeg()),this.point(T,n)};EdwardsCurve.prototype.validate=function(n){if(n.isInfinity())return!0;n.normalize();var _=n.x.redSqr(),x=n.y.redSqr(),E=_.redMul(this.a).redAdd(x),S=this.c2.redMul(this.one.redAdd(this.d.redMul(_).redMul(x)));return E.cmp(S)===0};function Point$3(t,n,_,x,E){Base.BasePoint.call(this,t,"projective"),n===null&&_===null&&x===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$6(n,16),this.y=new BN$6(_,16),this.z=x?new BN$6(x,16):this.curve.one,this.t=E&&new BN$6(E,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits$3(Point$3,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function(n){return Point$3.fromJSON(this,n)};EdwardsCurve.prototype.point=function(n,_,x,E){return new Point$3(this,n,_,x,E)};Point$3.fromJSON=function(n,_){return new Point$3(n,_[0],_[1],_[2])};Point$3.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$3.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point$3.prototype._extDbl=function(){var n=this.x.redSqr(),_=this.y.redSqr(),x=this.z.redSqr();x=x.redIAdd(x);var E=this.curve._mulA(n),S=this.x.redAdd(this.y).redSqr().redISub(n).redISub(_),C=E.redAdd(_),T=C.redSub(x),B=E.redSub(_),A=S.redMul(T),I=C.redMul(B),D=S.redMul(B),M=T.redMul(C);return this.curve.point(A,I,M,D)};Point$3.prototype._projDbl=function(){var n=this.x.redAdd(this.y).redSqr(),_=this.x.redSqr(),x=this.y.redSqr(),E,S,C,T,B,A;if(this.curve.twisted){T=this.curve._mulA(_);var I=T.redAdd(x);this.zOne?(E=n.redSub(_).redSub(x).redMul(I.redSub(this.curve.two)),S=I.redMul(T.redSub(x)),C=I.redSqr().redSub(I).redSub(I)):(B=this.z.redSqr(),A=I.redSub(B).redISub(B),E=n.redSub(_).redISub(x).redMul(A),S=I.redMul(T.redSub(x)),C=I.redMul(A))}else T=_.redAdd(x),B=this.curve._mulC(this.z).redSqr(),A=T.redSub(B).redSub(B),E=this.curve._mulC(n.redISub(T)).redMul(A),S=this.curve._mulC(T).redMul(_.redISub(x)),C=T.redMul(A);return this.curve.point(E,S,C)};Point$3.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Point$3.prototype._extAdd=function(n){var _=this.y.redSub(this.x).redMul(n.y.redSub(n.x)),x=this.y.redAdd(this.x).redMul(n.y.redAdd(n.x)),E=this.t.redMul(this.curve.dd).redMul(n.t),S=this.z.redMul(n.z.redAdd(n.z)),C=x.redSub(_),T=S.redSub(E),B=S.redAdd(E),A=x.redAdd(_),I=C.redMul(T),D=B.redMul(A),M=C.redMul(A),V=T.redMul(B);return this.curve.point(I,D,V,M)};Point$3.prototype._projAdd=function(n){var _=this.z.redMul(n.z),x=_.redSqr(),E=this.x.redMul(n.x),S=this.y.redMul(n.y),C=this.curve.d.redMul(E).redMul(S),T=x.redSub(C),B=x.redAdd(C),A=this.x.redAdd(this.y).redMul(n.x.redAdd(n.y)).redISub(E).redISub(S),I=_.redMul(T).redMul(A),D,M;return this.curve.twisted?(D=_.redMul(B).redMul(S.redSub(this.curve._mulA(E))),M=T.redMul(B)):(D=_.redMul(B).redMul(S.redSub(E)),M=this.curve._mulC(T).redMul(B)),this.curve.point(I,D,M)};Point$3.prototype.add=function(n){return this.isInfinity()?n:n.isInfinity()?this:this.curve.extended?this._extAdd(n):this._projAdd(n)};Point$3.prototype.mul=function(n){return this._hasDoubles(n)?this.curve._fixedNafMul(this,n):this.curve._wnafMul(this,n)};Point$3.prototype.mulAdd=function(n,_,x){return this.curve._wnafMulAdd(1,[this,_],[n,x],2,!1)};Point$3.prototype.jmulAdd=function(n,_,x){return this.curve._wnafMulAdd(1,[this,_],[n,x],2,!0)};Point$3.prototype.normalize=function(){if(this.zOne)return this;var n=this.z.redInvm();return this.x=this.x.redMul(n),this.y=this.y.redMul(n),this.t&&(this.t=this.t.redMul(n)),this.z=this.curve.one,this.zOne=!0,this};Point$3.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point$3.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Point$3.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Point$3.prototype.eq=function(n){return this===n||this.getX().cmp(n.getX())===0&&this.getY().cmp(n.getY())===0};Point$3.prototype.eqXToP=function(n){var _=n.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(_)===0)return!0;for(var x=n.clone(),E=this.curve.redN.redMul(this.z);;){if(x.iadd(this.curve.n),x.cmp(this.curve.p)>=0)return!1;if(_.redIAdd(E),this.x.cmp(_)===0)return!0}};Point$3.prototype.toP=Point$3.prototype.normalize;Point$3.prototype.mixedAdd=Point$3.prototype.add;(function(t){var n=t;n.base=base$3,n.short=short,n.mont=mont,n.edwards=edwards})(curve);var curves$1={},hash$4={},utils$j={},assert$h=minimalisticAssert$1,inherits$2=inherits_browserExports;utils$j.inherits=inherits$2;function isSurrogatePair(t,n){return(t.charCodeAt(n)&64512)!==55296||n<0||n+1>=t.length?!1:(t.charCodeAt(n+1)&64512)===56320}function toArray$1(t,n){if(Array.isArray(t))return t.slice();if(!t)return[];var _=[];if(typeof t=="string")if(n){if(n==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),E=0;E<t.length;E+=2)_.push(parseInt(t[E]+t[E+1],16))}else for(var x=0,E=0;E<t.length;E++){var S=t.charCodeAt(E);S<128?_[x++]=S:S<2048?(_[x++]=S>>6|192,_[x++]=S&63|128):isSurrogatePair(t,E)?(S=65536+((S&1023)<<10)+(t.charCodeAt(++E)&1023),_[x++]=S>>18|240,_[x++]=S>>12&63|128,_[x++]=S>>6&63|128,_[x++]=S&63|128):(_[x++]=S>>12|224,_[x++]=S>>6&63|128,_[x++]=S&63|128)}else for(E=0;E<t.length;E++)_[E]=t[E]|0;return _}utils$j.toArray=toArray$1;function toHex$1(t){for(var n="",_=0;_<t.length;_++)n+=zero2(t[_].toString(16));return n}utils$j.toHex=toHex$1;function htonl(t){var n=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return n>>>0}utils$j.htonl=htonl;function toHex32(t,n){for(var _="",x=0;x<t.length;x++){var E=t[x];n==="little"&&(E=htonl(E)),_+=zero8(E.toString(16))}return _}utils$j.toHex32=toHex32;function zero2(t){return t.length===1?"0"+t:t}utils$j.zero2=zero2;function zero8(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}utils$j.zero8=zero8;function join32(t,n,_,x){var E=_-n;assert$h(E%4===0);for(var S=new Array(E/4),C=0,T=n;C<S.length;C++,T+=4){var B;x==="big"?B=t[T]<<24|t[T+1]<<16|t[T+2]<<8|t[T+3]:B=t[T+3]<<24|t[T+2]<<16|t[T+1]<<8|t[T],S[C]=B>>>0}return S}utils$j.join32=join32;function split32(t,n){for(var _=new Array(t.length*4),x=0,E=0;x<t.length;x++,E+=4){var S=t[x];n==="big"?(_[E]=S>>>24,_[E+1]=S>>>16&255,_[E+2]=S>>>8&255,_[E+3]=S&255):(_[E+3]=S>>>24,_[E+2]=S>>>16&255,_[E+1]=S>>>8&255,_[E]=S&255)}return _}utils$j.split32=split32;function rotr32$1(t,n){return t>>>n|t<<32-n}utils$j.rotr32=rotr32$1;function rotl32$2(t,n){return t<<n|t>>>32-n}utils$j.rotl32=rotl32$2;function sum32$3(t,n){return t+n>>>0}utils$j.sum32=sum32$3;function sum32_3$1(t,n,_){return t+n+_>>>0}utils$j.sum32_3=sum32_3$1;function sum32_4$2(t,n,_,x){return t+n+_+x>>>0}utils$j.sum32_4=sum32_4$2;function sum32_5$2(t,n,_,x,E){return t+n+_+x+E>>>0}utils$j.sum32_5=sum32_5$2;function sum64$1(t,n,_,x){var E=t[n],S=t[n+1],C=x+S>>>0,T=(C<x?1:0)+_+E;t[n]=T>>>0,t[n+1]=C}utils$j.sum64=sum64$1;function sum64_hi$1(t,n,_,x){var E=n+x>>>0,S=(E<n?1:0)+t+_;return S>>>0}utils$j.sum64_hi=sum64_hi$1;function sum64_lo$1(t,n,_,x){var E=n+x;return E>>>0}utils$j.sum64_lo=sum64_lo$1;function sum64_4_hi$1(t,n,_,x,E,S,C,T){var B=0,A=n;A=A+x>>>0,B+=A<n?1:0,A=A+S>>>0,B+=A<S?1:0,A=A+T>>>0,B+=A<T?1:0;var I=t+_+E+C+B;return I>>>0}utils$j.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(t,n,_,x,E,S,C,T){var B=n+x+S+T;return B>>>0}utils$j.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(t,n,_,x,E,S,C,T,B,A){var I=0,D=n;D=D+x>>>0,I+=D<n?1:0,D=D+S>>>0,I+=D<S?1:0,D=D+T>>>0,I+=D<T?1:0,D=D+A>>>0,I+=D<A?1:0;var M=t+_+E+C+B+I;return M>>>0}utils$j.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(t,n,_,x,E,S,C,T,B,A){var I=n+x+S+T+A;return I>>>0}utils$j.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(t,n,_){var x=n<<32-_|t>>>_;return x>>>0}utils$j.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(t,n,_){var x=t<<32-_|n>>>_;return x>>>0}utils$j.rotr64_lo=rotr64_lo$1;function shr64_hi$1(t,n,_){return t>>>_}utils$j.shr64_hi=shr64_hi$1;function shr64_lo$1(t,n,_){var x=t<<32-_|n>>>_;return x>>>0}utils$j.shr64_lo=shr64_lo$1;var common$6={},utils$i=utils$j,assert$g=minimalisticAssert$1;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$6.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function(n,_){if(n=utils$i.toArray(n,_),this.pending?this.pending=this.pending.concat(n):this.pending=n,this.pendingTotal+=n.length,this.pending.length>=this._delta8){n=this.pending;var x=n.length%this._delta8;this.pending=n.slice(n.length-x,n.length),this.pending.length===0&&(this.pending=null),n=utils$i.join32(n,0,n.length-x,this.endian);for(var E=0;E<n.length;E+=this._delta32)this._update(n,E,E+this._delta32)}return this};BlockHash$4.prototype.digest=function(n){return this.update(this._pad()),assert$g(this.pending===null),this._digest(n)};BlockHash$4.prototype._pad=function(){var n=this.pendingTotal,_=this._delta8,x=_-(n+this.padLength)%_,E=new Array(x+this.padLength);E[0]=128;for(var S=1;S<x;S++)E[S]=0;if(n<<=3,this.endian==="big"){for(var C=8;C<this.padLength;C++)E[S++]=0;E[S++]=0,E[S++]=0,E[S++]=0,E[S++]=0,E[S++]=n>>>24&255,E[S++]=n>>>16&255,E[S++]=n>>>8&255,E[S++]=n&255}else for(E[S++]=n&255,E[S++]=n>>>8&255,E[S++]=n>>>16&255,E[S++]=n>>>24&255,E[S++]=0,E[S++]=0,E[S++]=0,E[S++]=0,C=8;C<this.padLength;C++)E[S++]=0;return E};var sha$2={},common$5={},utils$h=utils$j,rotr32=utils$h.rotr32;function ft_1$1(t,n,_,x){if(t===0)return ch32$1(n,_,x);if(t===1||t===3)return p32(n,_,x);if(t===2)return maj32$1(n,_,x)}common$5.ft_1=ft_1$1;function ch32$1(t,n,_){return t&n^~t&_}common$5.ch32=ch32$1;function maj32$1(t,n,_){return t&n^t&_^n&_}common$5.maj32=maj32$1;function p32(t,n,_){return t^n^_}common$5.p32=p32;function s0_256$1(t){return rotr32(t,2)^rotr32(t,13)^rotr32(t,22)}common$5.s0_256=s0_256$1;function s1_256$1(t){return rotr32(t,6)^rotr32(t,11)^rotr32(t,25)}common$5.s1_256=s1_256$1;function g0_256$1(t){return rotr32(t,7)^rotr32(t,18)^t>>>3}common$5.g0_256=g0_256$1;function g1_256$1(t){return rotr32(t,17)^rotr32(t,19)^t>>>10}common$5.g1_256=g1_256$1;var utils$g=utils$j,common$4=common$6,shaCommon$1=common$5,rotl32$1=utils$g.rotl32,sum32$2=utils$g.sum32,sum32_5$1=utils$g.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$4.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$g.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function(n,_){for(var x=this.W,E=0;E<16;E++)x[E]=n[_+E];for(;E<x.length;E++)x[E]=rotl32$1(x[E-3]^x[E-8]^x[E-14]^x[E-16],1);var S=this.h[0],C=this.h[1],T=this.h[2],B=this.h[3],A=this.h[4];for(E=0;E<x.length;E++){var I=~~(E/20),D=sum32_5$1(rotl32$1(S,5),ft_1(I,C,T,B),A,x[E],sha1_K[I]);A=B,B=T,T=rotl32$1(C,30),C=S,S=D}this.h[0]=sum32$2(this.h[0],S),this.h[1]=sum32$2(this.h[1],C),this.h[2]=sum32$2(this.h[2],T),this.h[3]=sum32$2(this.h[3],B),this.h[4]=sum32$2(this.h[4],A)};SHA1.prototype._digest=function(n){return n==="hex"?utils$g.toHex32(this.h,"big"):utils$g.split32(this.h,"big")};var utils$f=utils$j,common$3=common$6,shaCommon=common$5,assert$f=minimalisticAssert$1,sum32$1=utils$f.sum32,sum32_4$1=utils$f.sum32_4,sum32_5=utils$f.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$3.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$f.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function(n,_){for(var x=this.W,E=0;E<16;E++)x[E]=n[_+E];for(;E<x.length;E++)x[E]=sum32_4$1(g1_256(x[E-2]),x[E-7],g0_256(x[E-15]),x[E-16]);var S=this.h[0],C=this.h[1],T=this.h[2],B=this.h[3],A=this.h[4],I=this.h[5],D=this.h[6],M=this.h[7];for(assert$f(this.k.length===x.length),E=0;E<x.length;E++){var V=sum32_5(M,s1_256(A),ch32(A,I,D),this.k[E],x[E]),L=sum32$1(s0_256(S),maj32(S,C,T));M=D,D=I,I=A,A=sum32$1(B,V),B=T,T=C,C=S,S=sum32$1(V,L)}this.h[0]=sum32$1(this.h[0],S),this.h[1]=sum32$1(this.h[1],C),this.h[2]=sum32$1(this.h[2],T),this.h[3]=sum32$1(this.h[3],B),this.h[4]=sum32$1(this.h[4],A),this.h[5]=sum32$1(this.h[5],I),this.h[6]=sum32$1(this.h[6],D),this.h[7]=sum32$1(this.h[7],M)};SHA256$1.prototype._digest=function(n){return n==="hex"?utils$f.toHex32(this.h,"big"):utils$f.split32(this.h,"big")};var utils$e=utils$j,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$e.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function(n){return n==="hex"?utils$e.toHex32(this.h.slice(0,7),"big"):utils$e.split32(this.h.slice(0,7),"big")};var utils$d=utils$j,common$2=common$6,assert$e=minimalisticAssert$1,rotr64_hi=utils$d.rotr64_hi,rotr64_lo=utils$d.rotr64_lo,shr64_hi=utils$d.shr64_hi,shr64_lo=utils$d.shr64_lo,sum64=utils$d.sum64,sum64_hi=utils$d.sum64_hi,sum64_lo=utils$d.sum64_lo,sum64_4_hi=utils$d.sum64_4_hi,sum64_4_lo=utils$d.sum64_4_lo,sum64_5_hi=utils$d.sum64_5_hi,sum64_5_lo=utils$d.sum64_5_lo,BlockHash$1=common$2.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$d.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function(n,_){for(var x=this.W,E=0;E<32;E++)x[E]=n[_+E];for(;E<x.length;E+=2){var S=g1_512_hi(x[E-4],x[E-3]),C=g1_512_lo(x[E-4],x[E-3]),T=x[E-14],B=x[E-13],A=g0_512_hi(x[E-30],x[E-29]),I=g0_512_lo(x[E-30],x[E-29]),D=x[E-32],M=x[E-31];x[E]=sum64_4_hi(S,C,T,B,A,I,D,M),x[E+1]=sum64_4_lo(S,C,T,B,A,I,D,M)}};SHA512$1.prototype._update=function(n,_){this._prepareBlock(n,_);var x=this.W,E=this.h[0],S=this.h[1],C=this.h[2],T=this.h[3],B=this.h[4],A=this.h[5],I=this.h[6],D=this.h[7],M=this.h[8],V=this.h[9],L=this.h[10],F=this.h[11],j=this.h[12],U=this.h[13],H=this.h[14],Y=this.h[15];assert$e(this.k.length===x.length);for(var Z=0;Z<x.length;Z+=2){var ne=H,re=Y,X=s1_512_hi(M,V),ce=s1_512_lo(M,V),ue=ch64_hi(M,V,L,F,j),_e=ch64_lo(M,V,L,F,j,U),ye=this.k[Z],ie=this.k[Z+1],W=x[Z],O=x[Z+1],z=sum64_5_hi(ne,re,X,ce,ue,_e,ye,ie,W,O),J=sum64_5_lo(ne,re,X,ce,ue,_e,ye,ie,W,O);ne=s0_512_hi(E,S),re=s0_512_lo(E,S),X=maj64_hi(E,S,C,T,B),ce=maj64_lo(E,S,C,T,B,A);var ee=sum64_hi(ne,re,X,ce),ae=sum64_lo(ne,re,X,ce);H=j,Y=U,j=L,U=F,L=M,F=V,M=sum64_hi(I,D,z,J),V=sum64_lo(D,D,z,J),I=B,D=A,B=C,A=T,C=E,T=S,E=sum64_hi(z,J,ee,ae),S=sum64_lo(z,J,ee,ae)}sum64(this.h,0,E,S),sum64(this.h,2,C,T),sum64(this.h,4,B,A),sum64(this.h,6,I,D),sum64(this.h,8,M,V),sum64(this.h,10,L,F),sum64(this.h,12,j,U),sum64(this.h,14,H,Y)};SHA512$1.prototype._digest=function(n){return n==="hex"?utils$d.toHex32(this.h,"big"):utils$d.split32(this.h,"big")};function ch64_hi(t,n,_,x,E){var S=t&_^~t&E;return S<0&&(S+=4294967296),S}function ch64_lo(t,n,_,x,E,S){var C=n&x^~n&S;return C<0&&(C+=4294967296),C}function maj64_hi(t,n,_,x,E){var S=t&_^t&E^_&E;return S<0&&(S+=4294967296),S}function maj64_lo(t,n,_,x,E,S){var C=n&x^n&S^x&S;return C<0&&(C+=4294967296),C}function s0_512_hi(t,n){var _=rotr64_hi(t,n,28),x=rotr64_hi(n,t,2),E=rotr64_hi(n,t,7),S=_^x^E;return S<0&&(S+=4294967296),S}function s0_512_lo(t,n){var _=rotr64_lo(t,n,28),x=rotr64_lo(n,t,2),E=rotr64_lo(n,t,7),S=_^x^E;return S<0&&(S+=4294967296),S}function s1_512_hi(t,n){var _=rotr64_hi(t,n,14),x=rotr64_hi(t,n,18),E=rotr64_hi(n,t,9),S=_^x^E;return S<0&&(S+=4294967296),S}function s1_512_lo(t,n){var _=rotr64_lo(t,n,14),x=rotr64_lo(t,n,18),E=rotr64_lo(n,t,9),S=_^x^E;return S<0&&(S+=4294967296),S}function g0_512_hi(t,n){var _=rotr64_hi(t,n,1),x=rotr64_hi(t,n,8),E=shr64_hi(t,n,7),S=_^x^E;return S<0&&(S+=4294967296),S}function g0_512_lo(t,n){var _=rotr64_lo(t,n,1),x=rotr64_lo(t,n,8),E=shr64_lo(t,n,7),S=_^x^E;return S<0&&(S+=4294967296),S}function g1_512_hi(t,n){var _=rotr64_hi(t,n,19),x=rotr64_hi(n,t,29),E=shr64_hi(t,n,6),S=_^x^E;return S<0&&(S+=4294967296),S}function g1_512_lo(t,n){var _=rotr64_lo(t,n,19),x=rotr64_lo(n,t,29),E=shr64_lo(t,n,6),S=_^x^E;return S<0&&(S+=4294967296),S}var utils$c=utils$j,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$c.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function(n){return n==="hex"?utils$c.toHex32(this.h.slice(0,12),"big"):utils$c.split32(this.h.slice(0,12),"big")};sha$2.sha1=_1;sha$2.sha224=_224;sha$2.sha256=_256;sha$2.sha384=_384;sha$2.sha512=_512;var ripemd={},utils$b=utils$j,common$1=common$6,rotl32=utils$b.rotl32,sum32=utils$b.sum32,sum32_3=utils$b.sum32_3,sum32_4=utils$b.sum32_4,BlockHash=common$1.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$b.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function(n,_){for(var x=this.h[0],E=this.h[1],S=this.h[2],C=this.h[3],T=this.h[4],B=x,A=E,I=S,D=C,M=T,V=0;V<80;V++){var L=sum32(rotl32(sum32_4(x,f(V,E,S,C),n[r[V]+_],K(V)),s$1[V]),T);x=T,T=C,C=rotl32(S,10),S=E,E=L,L=sum32(rotl32(sum32_4(B,f(79-V,A,I,D),n[rh[V]+_],Kh(V)),sh[V]),M),B=M,M=D,D=rotl32(I,10),I=A,A=L}L=sum32_3(this.h[1],S,D),this.h[1]=sum32_3(this.h[2],C,M),this.h[2]=sum32_3(this.h[3],T,B),this.h[3]=sum32_3(this.h[4],x,A),this.h[4]=sum32_3(this.h[0],E,I),this.h[0]=L};RIPEMD160.prototype._digest=function(n){return n==="hex"?utils$b.toHex32(this.h,"little"):utils$b.split32(this.h,"little")};function f(t,n,_,x){return t<=15?n^_^x:t<=31?n&_|~n&x:t<=47?(n|~_)^x:t<=63?n&x|_&~x:n^(_|~x)}function K(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Kh(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$1=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$a=utils$j,assert$d=minimalisticAssert$1;function Hmac(t,n,_){if(!(this instanceof Hmac))return new Hmac(t,n,_);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(utils$a.toArray(n,_))}var hmac=Hmac;Hmac.prototype._init=function(n){n.length>this.blockSize&&(n=new this.Hash().update(n).digest()),assert$d(n.length<=this.blockSize);for(var _=n.length;_<this.blockSize;_++)n.push(0);for(_=0;_<n.length;_++)n[_]^=54;for(this.inner=new this.Hash().update(n),_=0;_<n.length;_++)n[_]^=106;this.outer=new this.Hash().update(n)};Hmac.prototype.update=function(n,_){return this.inner.update(n,_),this};Hmac.prototype.digest=function(n){return this.outer.update(this.inner.digest()),this.outer.digest(n)};(function(t){var n=t;n.utils=utils$j,n.common=common$6,n.sha=sha$2,n.ripemd=ripemd,n.hmac=hmac,n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160})(hash$4);const hash$3=getDefaultExportFromCjs(hash$4);var secp256k1$2,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1$2={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1$2}(function(t){var n=t,_=hash$4,x=curve,E=utils$p,S=E.assert;function C(A){A.type==="short"?this.curve=new x.short(A):A.type==="edwards"?this.curve=new x.edwards(A):this.curve=new x.mont(A),this.g=this.curve.g,this.n=this.curve.n,this.hash=A.hash,S(this.g.validate(),"Invalid curve"),S(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}n.PresetCurve=C;function T(A,I){Object.defineProperty(n,A,{configurable:!0,enumerable:!0,get:function(){var D=new C(I);return Object.defineProperty(n,A,{configurable:!0,enumerable:!0,value:D}),D}})}T("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:_.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),T("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:_.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),T("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:_.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),T("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:_.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),T("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:_.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),T("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:_.sha256,gRed:!1,g:["9"]}),T("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:_.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var B;try{B=requireSecp256k1()}catch{B=void 0}T("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:_.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",B]})})(curves$1);var hash$2=hash$4,utils$9=utils$o,assert$c=minimalisticAssert$1;function HmacDRBG$1(t){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var n=utils$9.toArray(t.entropy,t.entropyEnc||"hex"),_=utils$9.toArray(t.nonce,t.nonceEnc||"hex"),x=utils$9.toArray(t.pers,t.persEnc||"hex");assert$c(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(n,_,x)}var hmacDrbg$1=HmacDRBG$1;HmacDRBG$1.prototype._init=function(n,_,x){var E=n.concat(_).concat(x);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var S=0;S<this.V.length;S++)this.K[S]=0,this.V[S]=1;this._update(E),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG$1.prototype._hmac=function(){return new hash$2.hmac(this.hash,this.K)};HmacDRBG$1.prototype._update=function(n){var _=this._hmac().update(this.V).update([0]);n&&(_=_.update(n)),this.K=_.digest(),this.V=this._hmac().update(this.V).digest(),n&&(this.K=this._hmac().update(this.V).update([1]).update(n).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG$1.prototype.reseed=function(n,_,x,E){typeof _!="string"&&(E=x,x=_,_=null),n=utils$9.toArray(n,_),x=utils$9.toArray(x,E),assert$c(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(n.concat(x||[])),this._reseed=1};HmacDRBG$1.prototype.generate=function(n,_,x,E){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof _!="string"&&(E=x,x=_,_=null),x&&(x=utils$9.toArray(x,E||"hex"),this._update(x));for(var S=[];S.length<n;)this.V=this._hmac().update(this.V).digest(),S=S.concat(this.V);var C=S.slice(0,n);return this._update(x),this._reseed++,utils$9.encode(C,_)};var BN$5=bnExports$2,utils$8=utils$p,assert$b=utils$8.assert;function KeyPair$3(t,n){this.ec=t,this.priv=null,this.pub=null,n.priv&&this._importPrivate(n.priv,n.privEnc),n.pub&&this._importPublic(n.pub,n.pubEnc)}var key$2=KeyPair$3;KeyPair$3.fromPublic=function(n,_,x){return _ instanceof KeyPair$3?_:new KeyPair$3(n,{pub:_,pubEnc:x})};KeyPair$3.fromPrivate=function(n,_,x){return _ instanceof KeyPair$3?_:new KeyPair$3(n,{priv:_,privEnc:x})};KeyPair$3.prototype.validate=function(){var n=this.getPublic();return n.isInfinity()?{result:!1,reason:"Invalid public key"}:n.validate()?n.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$3.prototype.getPublic=function(n,_){return typeof n=="string"&&(_=n,n=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),_?this.pub.encode(_,n):this.pub};KeyPair$3.prototype.getPrivate=function(n){return n==="hex"?this.priv.toString(16,2):this.priv};KeyPair$3.prototype._importPrivate=function(n,_){this.priv=new BN$5(n,_||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$3.prototype._importPublic=function(n,_){if(n.x||n.y){this.ec.curve.type==="mont"?assert$b(n.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$b(n.x&&n.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(n.x,n.y);return}this.pub=this.ec.curve.decodePoint(n,_)};KeyPair$3.prototype.derive=function(n){return n.validate()||assert$b(n.validate(),"public point not validated"),n.mul(this.priv).getX()};KeyPair$3.prototype.sign=function(n,_,x){return this.ec.sign(n,this,_,x)};KeyPair$3.prototype.verify=function(n,_){return this.ec.verify(n,_,this)};KeyPair$3.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$4=bnExports$2,utils$7=utils$p,assert$a=utils$7.assert;function Signature$5(t,n){if(t instanceof Signature$5)return t;this._importDER(t,n)||(assert$a(t.r&&t.s,"Signature without r or s"),this.r=new BN$4(t.r,16),this.s=new BN$4(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var signature$2=Signature$5;function Position$1(){this.place=0}function getLength$1(t,n){var _=t[n.place++];if(!(_&128))return _;var x=_&15;if(x===0||x>4)return!1;for(var E=0,S=0,C=n.place;S<x;S++,C++)E<<=8,E|=t[C],E>>>=0;return E<=127?!1:(n.place=C,E)}function rmPadding$1(t){for(var n=0,_=t.length-1;!t[n]&&!(t[n+1]&128)&&n<_;)n++;return n===0?t:t.slice(n)}Signature$5.prototype._importDER=function(n,_){n=utils$7.toArray(n,_);var x=new Position$1;if(n[x.place++]!==48)return!1;var E=getLength$1(n,x);if(E===!1||E+x.place!==n.length||n[x.place++]!==2)return!1;var S=getLength$1(n,x);if(S===!1)return!1;var C=n.slice(x.place,S+x.place);if(x.place+=S,n[x.place++]!==2)return!1;var T=getLength$1(n,x);if(T===!1||n.length!==T+x.place)return!1;var B=n.slice(x.place,T+x.place);if(C[0]===0)if(C[1]&128)C=C.slice(1);else return!1;if(B[0]===0)if(B[1]&128)B=B.slice(1);else return!1;return this.r=new BN$4(C),this.s=new BN$4(B),this.recoveryParam=null,!0};function constructLength$1(t,n){if(n<128){t.push(n);return}var _=1+(Math.log(n)/Math.LN2>>>3);for(t.push(_|128);--_;)t.push(n>>>(_<<3)&255);t.push(n)}Signature$5.prototype.toDER=function(n){var _=this.r.toArray(),x=this.s.toArray();for(_[0]&128&&(_=[0].concat(_)),x[0]&128&&(x=[0].concat(x)),_=rmPadding$1(_),x=rmPadding$1(x);!x[0]&&!(x[1]&128);)x=x.slice(1);var E=[2];constructLength$1(E,_.length),E=E.concat(_),E.push(2),constructLength$1(E,x.length);var S=E.concat(x),C=[48];return constructLength$1(C,S.length),C=C.concat(S),utils$7.encode(C,n)};var ec$3,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec$3;hasRequiredEc=1;var t=bnExports$2,n=hmacDrbg$1,_=utils$p,x=curves$1,E=requireBrorand(),S=_.assert,C=key$2,T=signature$2;function B(A){if(!(this instanceof B))return new B(A);typeof A=="string"&&(S(Object.prototype.hasOwnProperty.call(x,A),"Unknown curve "+A),A=x[A]),A instanceof x.PresetCurve&&(A={curve:A}),this.curve=A.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=A.curve.g,this.g.precompute(A.curve.n.bitLength()+1),this.hash=A.hash||A.curve.hash}return ec$3=B,B.prototype.keyPair=function(I){return new C(this,I)},B.prototype.keyFromPrivate=function(I,D){return C.fromPrivate(this,I,D)},B.prototype.keyFromPublic=function(I,D){return C.fromPublic(this,I,D)},B.prototype.genKeyPair=function(I){I||(I={});for(var D=new n({hash:this.hash,pers:I.pers,persEnc:I.persEnc||"utf8",entropy:I.entropy||E(this.hash.hmacStrength),entropyEnc:I.entropy&&I.entropyEnc||"utf8",nonce:this.n.toArray()}),M=this.n.byteLength(),V=this.n.sub(new t(2));;){var L=new t(D.generate(M));if(!(L.cmp(V)>0))return L.iaddn(1),this.keyFromPrivate(L)}},B.prototype._truncateToN=function(I,D){var M=I.byteLength()*8-this.n.bitLength();return M>0&&(I=I.ushrn(M)),!D&&I.cmp(this.n)>=0?I.sub(this.n):I},B.prototype.sign=function(I,D,M,V){typeof M=="object"&&(V=M,M=null),V||(V={}),D=this.keyFromPrivate(D,M),I=this._truncateToN(new t(I,16));for(var L=this.n.byteLength(),F=D.getPrivate().toArray("be",L),j=I.toArray("be",L),U=new n({hash:this.hash,entropy:F,nonce:j,pers:V.pers,persEnc:V.persEnc||"utf8"}),H=this.n.sub(new t(1)),Y=0;;Y++){var Z=V.k?V.k(Y):new t(U.generate(this.n.byteLength()));if(Z=this._truncateToN(Z,!0),!(Z.cmpn(1)<=0||Z.cmp(H)>=0)){var ne=this.g.mul(Z);if(!ne.isInfinity()){var re=ne.getX(),X=re.umod(this.n);if(X.cmpn(0)!==0){var ce=Z.invm(this.n).mul(X.mul(D.getPrivate()).iadd(I));if(ce=ce.umod(this.n),ce.cmpn(0)!==0){var ue=(ne.getY().isOdd()?1:0)|(re.cmp(X)!==0?2:0);return V.canonical&&ce.cmp(this.nh)>0&&(ce=this.n.sub(ce),ue^=1),new T({r:X,s:ce,recoveryParam:ue})}}}}}},B.prototype.verify=function(I,D,M,V){I=this._truncateToN(new t(I,16)),M=this.keyFromPublic(M,V),D=new T(D,"hex");var L=D.r,F=D.s;if(L.cmpn(1)<0||L.cmp(this.n)>=0||F.cmpn(1)<0||F.cmp(this.n)>=0)return!1;var j=F.invm(this.n),U=j.mul(I).umod(this.n),H=j.mul(L).umod(this.n),Y;return this.curve._maxwellTrick?(Y=this.g.jmulAdd(U,M.getPublic(),H),Y.isInfinity()?!1:Y.eqXToP(L)):(Y=this.g.mulAdd(U,M.getPublic(),H),Y.isInfinity()?!1:Y.getX().umod(this.n).cmp(L)===0)},B.prototype.recoverPubKey=function(A,I,D,M){S((3&D)===D,"The recovery param is more than two bits"),I=new T(I,M);var V=this.n,L=new t(A),F=I.r,j=I.s,U=D&1,H=D>>1;if(F.cmp(this.curve.p.umod(this.curve.n))>=0&&H)throw new Error("Unable to find sencond key candinate");H?F=this.curve.pointFromX(F.add(this.curve.n),U):F=this.curve.pointFromX(F,U);var Y=I.r.invm(V),Z=V.sub(L).mul(Y).umod(V),ne=j.mul(Y).umod(V);return this.g.mulAdd(Z,F,ne)},B.prototype.getKeyRecoveryParam=function(A,I,D,M){if(I=new T(I,M),I.recoveryParam!==null)return I.recoveryParam;for(var V=0;V<4;V++){var L;try{L=this.recoverPubKey(A,I,V)}catch{continue}if(L.eq(D))return V}throw new Error("Unable to find valid recovery factor")},ec$3}var utils$6=utils$p,assert$9=utils$6.assert,parseBytes$2=utils$6.parseBytes,cachedProperty$1=utils$6.cachedProperty;function KeyPair$2(t,n){this.eddsa=t,this._secret=parseBytes$2(n.secret),t.isPoint(n.pub)?this._pub=n.pub:this._pubBytes=parseBytes$2(n.pub)}KeyPair$2.fromPublic=function(n,_){return _ instanceof KeyPair$2?_:new KeyPair$2(n,{pub:_})};KeyPair$2.fromSecret=function(n,_){return _ instanceof KeyPair$2?_:new KeyPair$2(n,{secret:_})};KeyPair$2.prototype.secret=function(){return this._secret};cachedProperty$1(KeyPair$2,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});cachedProperty$1(KeyPair$2,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cachedProperty$1(KeyPair$2,"privBytes",function(){var n=this.eddsa,_=this.hash(),x=n.encodingLength-1,E=_.slice(0,n.encodingLength);return E[0]&=248,E[x]&=127,E[x]|=64,E});cachedProperty$1(KeyPair$2,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty$1(KeyPair$2,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty$1(KeyPair$2,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair$2.prototype.sign=function(n){return assert$9(this._secret,"KeyPair can only verify"),this.eddsa.sign(n,this)};KeyPair$2.prototype.verify=function(n,_){return this.eddsa.verify(n,_,this)};KeyPair$2.prototype.getSecret=function(n){return assert$9(this._secret,"KeyPair is public only"),utils$6.encode(this.secret(),n)};KeyPair$2.prototype.getPublic=function(n){return utils$6.encode(this.pubBytes(),n)};var key$1=KeyPair$2,BN$3=bnExports$2,utils$5=utils$p,assert$8=utils$5.assert,cachedProperty=utils$5.cachedProperty,parseBytes$1=utils$5.parseBytes;function Signature$4(t,n){this.eddsa=t,typeof n!="object"&&(n=parseBytes$1(n)),Array.isArray(n)&&(n={R:n.slice(0,t.encodingLength),S:n.slice(t.encodingLength)}),assert$8(n.R&&n.S,"Signature without R or S"),t.isPoint(n.R)&&(this._R=n.R),n.S instanceof BN$3&&(this._S=n.S),this._Rencoded=Array.isArray(n.R)?n.R:n.Rencoded,this._Sencoded=Array.isArray(n.S)?n.S:n.Sencoded}cachedProperty(Signature$4,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature$4,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature$4,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature$4,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Signature$4.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Signature$4.prototype.toHex=function(){return utils$5.encode(this.toBytes(),"hex").toUpperCase()};var signature$1=Signature$4,hash$1=hash$4,curves=curves$1,utils$4=utils$p,assert$7=utils$4.assert,parseBytes=utils$4.parseBytes,KeyPair$1=key$1,Signature$3=signature$1;function EDDSA(t){if(assert$7(t==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(t);t=curves[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=hash$1.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function(n,_){n=parseBytes(n);var x=this.keyFromSecret(_),E=this.hashInt(x.messagePrefix(),n),S=this.g.mul(E),C=this.encodePoint(S),T=this.hashInt(C,x.pubBytes(),n).mul(x.priv()),B=E.add(T).umod(this.curve.n);return this.makeSignature({R:S,S:B,Rencoded:C})};EDDSA.prototype.verify=function(n,_,x){n=parseBytes(n),_=this.makeSignature(_);var E=this.keyFromPublic(x),S=this.hashInt(_.Rencoded(),E.pubBytes(),n),C=this.g.mul(_.S()),T=_.R().add(E.pub().mul(S));return T.eq(C)};EDDSA.prototype.hashInt=function(){for(var n=this.hash(),_=0;_<arguments.length;_++)n.update(arguments[_]);return utils$4.intFromLE(n.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function(n){return KeyPair$1.fromPublic(this,n)};EDDSA.prototype.keyFromSecret=function(n){return KeyPair$1.fromSecret(this,n)};EDDSA.prototype.makeSignature=function(n){return n instanceof Signature$3?n:new Signature$3(this,n)};EDDSA.prototype.encodePoint=function(n){var _=n.getY().toArray("le",this.encodingLength);return _[this.encodingLength-1]|=n.getX().isOdd()?128:0,_};EDDSA.prototype.decodePoint=function(n){n=utils$4.parseBytes(n);var _=n.length-1,x=n.slice(0,_).concat(n[_]&-129),E=(n[_]&128)!==0,S=utils$4.intFromLE(x);return this.curve.pointFromY(S,E)};EDDSA.prototype.encodeInt=function(n){return n.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function(n){return utils$4.intFromLE(n)};EDDSA.prototype.isPoint=function(n){return n instanceof this.pointClass};var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(t){var n=t;n.version=require$$0.version,n.utils=utils$p,n.rand=requireBrorand(),n.curve=curve,n.curves=curves$1,n.ec=requireEc(),n.eddsa=eddsa}(elliptic$3)),elliptic$3}var bn$2={exports:{}};bn$2.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(t){(function(n,_){function x(W,O){if(!W)throw new Error(O||"Assertion failed")}function E(W,O){W.super_=O;var z=function(){};z.prototype=O.prototype,W.prototype=new z,W.prototype.constructor=W}function S(W,O,z){if(S.isBN(W))return W;this.negative=0,this.words=null,this.length=0,this.red=null,W!==null&&((O==="le"||O==="be")&&(z=O,O=10),this._init(W||0,O||10,z||"be"))}typeof n=="object"?n.exports=S:_.BN=S,S.BN=S,S.wordSize=26;var C;try{typeof window<"u"&&typeof window.Buffer<"u"?C=window.Buffer:C=require$$0$2.Buffer}catch{}S.isBN=function(O){return O instanceof S?!0:O!==null&&typeof O=="object"&&O.constructor.wordSize===S.wordSize&&Array.isArray(O.words)},S.max=function(O,z){return O.cmp(z)>0?O:z},S.min=function(O,z){return O.cmp(z)<0?O:z},S.prototype._init=function(O,z,J){if(typeof O=="number")return this._initNumber(O,z,J);if(typeof O=="object")return this._initArray(O,z,J);z==="hex"&&(z=16),x(z===(z|0)&&z>=2&&z<=36),O=O.toString().replace(/\s+/g,"");var ee=0;O[0]==="-"&&(ee++,this.negative=1),ee<O.length&&(z===16?this._parseHex(O,ee,J):(this._parseBase(O,z,ee),J==="le"&&this._initArray(this.toArray(),z,J)))},S.prototype._initNumber=function(O,z,J){O<0&&(this.negative=1,O=-O),O<67108864?(this.words=[O&67108863],this.length=1):O<4503599627370496?(this.words=[O&67108863,O/67108864&67108863],this.length=2):(x(O<9007199254740992),this.words=[O&67108863,O/67108864&67108863,1],this.length=3),J==="le"&&this._initArray(this.toArray(),z,J)},S.prototype._initArray=function(O,z,J){if(x(typeof O.length=="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=new Array(this.length);for(var ee=0;ee<this.length;ee++)this.words[ee]=0;var ae,oe,se=0;if(J==="be")for(ee=O.length-1,ae=0;ee>=0;ee-=3)oe=O[ee]|O[ee-1]<<8|O[ee-2]<<16,this.words[ae]|=oe<<se&67108863,this.words[ae+1]=oe>>>26-se&67108863,se+=24,se>=26&&(se-=26,ae++);else if(J==="le")for(ee=0,ae=0;ee<O.length;ee+=3)oe=O[ee]|O[ee+1]<<8|O[ee+2]<<16,this.words[ae]|=oe<<se&67108863,this.words[ae+1]=oe>>>26-se&67108863,se+=24,se>=26&&(se-=26,ae++);return this._strip()};function T(W,O){var z=W.charCodeAt(O);if(z>=48&&z<=57)return z-48;if(z>=65&&z<=70)return z-55;if(z>=97&&z<=102)return z-87;x(!1,"Invalid character in "+W)}function B(W,O,z){var J=T(W,z);return z-1>=O&&(J|=T(W,z-1)<<4),J}S.prototype._parseHex=function(O,z,J){this.length=Math.ceil((O.length-z)/6),this.words=new Array(this.length);for(var ee=0;ee<this.length;ee++)this.words[ee]=0;var ae=0,oe=0,se;if(J==="be")for(ee=O.length-1;ee>=z;ee-=2)se=B(O,z,ee)<<ae,this.words[oe]|=se&67108863,ae>=18?(ae-=18,oe+=1,this.words[oe]|=se>>>26):ae+=8;else{var G=O.length-z;for(ee=G%2===0?z+1:z;ee<O.length;ee+=2)se=B(O,z,ee)<<ae,this.words[oe]|=se&67108863,ae>=18?(ae-=18,oe+=1,this.words[oe]|=se>>>26):ae+=8}this._strip()};function A(W,O,z,J){for(var ee=0,ae=0,oe=Math.min(W.length,z),se=O;se<oe;se++){var G=W.charCodeAt(se)-48;ee*=J,G>=49?ae=G-49+10:G>=17?ae=G-17+10:ae=G,x(G>=0&&ae<J,"Invalid character"),ee+=ae}return ee}S.prototype._parseBase=function(O,z,J){this.words=[0],this.length=1;for(var ee=0,ae=1;ae<=67108863;ae*=z)ee++;ee--,ae=ae/z|0;for(var oe=O.length-J,se=oe%ee,G=Math.min(oe,oe-se)+J,q=0,te=J;te<G;te+=ee)q=A(O,te,te+ee,z),this.imuln(ae),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q);if(se!==0){var fe=1;for(q=A(O,te,O.length,z),te=0;te<se;te++)fe*=z;this.imuln(fe),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q)}this._strip()},S.prototype.copy=function(O){O.words=new Array(this.length);for(var z=0;z<this.length;z++)O.words[z]=this.words[z];O.length=this.length,O.negative=this.negative,O.red=this.red};function I(W,O){W.words=O.words,W.length=O.length,W.negative=O.negative,W.red=O.red}if(S.prototype._move=function(O){I(O,this)},S.prototype.clone=function(){var O=new S(null);return this.copy(O),O},S.prototype._expand=function(O){for(;this.length<O;)this.words[this.length++]=0;return this},S.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},S.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{S.prototype[Symbol.for("nodejs.util.inspect.custom")]=D}catch{S.prototype.inspect=D}else S.prototype.inspect=D;function D(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],V=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],L=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];S.prototype.toString=function(O,z){O=O||10,z=z|0||1;var J;if(O===16||O==="hex"){J="";for(var ee=0,ae=0,oe=0;oe<this.length;oe++){var se=this.words[oe],G=((se<<ee|ae)&16777215).toString(16);ae=se>>>24-ee&16777215,ee+=2,ee>=26&&(ee-=26,oe--),ae!==0||oe!==this.length-1?J=M[6-G.length]+G+J:J=G+J}for(ae!==0&&(J=ae.toString(16)+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}if(O===(O|0)&&O>=2&&O<=36){var q=V[O],te=L[O];J="";var fe=this.clone();for(fe.negative=0;!fe.isZero();){var he=fe.modrn(te).toString(O);fe=fe.idivn(te),fe.isZero()?J=he+J:J=M[q-he.length]+he+J}for(this.isZero()&&(J="0"+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}x(!1,"Base should be between 2 and 36")},S.prototype.toNumber=function(){var O=this.words[0];return this.length===2?O+=this.words[1]*67108864:this.length===3&&this.words[2]===1?O+=4503599627370496+this.words[1]*67108864:this.length>2&&x(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-O:O},S.prototype.toJSON=function(){return this.toString(16,2)},C&&(S.prototype.toBuffer=function(O,z){return this.toArrayLike(C,O,z)}),S.prototype.toArray=function(O,z){return this.toArrayLike(Array,O,z)};var F=function(O,z){return O.allocUnsafe?O.allocUnsafe(z):new O(z)};S.prototype.toArrayLike=function(O,z,J){this._strip();var ee=this.byteLength(),ae=J||Math.max(1,ee);x(ee<=ae,"byte array longer than desired length"),x(ae>0,"Requested array length <= 0");var oe=F(O,ae),se=z==="le"?"LE":"BE";return this["_toArrayLike"+se](oe,ee),oe},S.prototype._toArrayLikeLE=function(O,z){for(var J=0,ee=0,ae=0,oe=0;ae<this.length;ae++){var se=this.words[ae]<<oe|ee;O[J++]=se&255,J<O.length&&(O[J++]=se>>8&255),J<O.length&&(O[J++]=se>>16&255),oe===6?(J<O.length&&(O[J++]=se>>24&255),ee=0,oe=0):(ee=se>>>24,oe+=2)}if(J<O.length)for(O[J++]=ee;J<O.length;)O[J++]=0},S.prototype._toArrayLikeBE=function(O,z){for(var J=O.length-1,ee=0,ae=0,oe=0;ae<this.length;ae++){var se=this.words[ae]<<oe|ee;O[J--]=se&255,J>=0&&(O[J--]=se>>8&255),J>=0&&(O[J--]=se>>16&255),oe===6?(J>=0&&(O[J--]=se>>24&255),ee=0,oe=0):(ee=se>>>24,oe+=2)}if(J>=0)for(O[J--]=ee;J>=0;)O[J--]=0},Math.clz32?S.prototype._countBits=function(O){return 32-Math.clz32(O)}:S.prototype._countBits=function(O){var z=O,J=0;return z>=4096&&(J+=13,z>>>=13),z>=64&&(J+=7,z>>>=7),z>=8&&(J+=4,z>>>=4),z>=2&&(J+=2,z>>>=2),J+z},S.prototype._zeroBits=function(O){if(O===0)return 26;var z=O,J=0;return z&8191||(J+=13,z>>>=13),z&127||(J+=7,z>>>=7),z&15||(J+=4,z>>>=4),z&3||(J+=2,z>>>=2),z&1||J++,J},S.prototype.bitLength=function(){var O=this.words[this.length-1],z=this._countBits(O);return(this.length-1)*26+z};function j(W){for(var O=new Array(W.bitLength()),z=0;z<O.length;z++){var J=z/26|0,ee=z%26;O[z]=W.words[J]>>>ee&1}return O}S.prototype.zeroBits=function(){if(this.isZero())return 0;for(var O=0,z=0;z<this.length;z++){var J=this._zeroBits(this.words[z]);if(O+=J,J!==26)break}return O},S.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},S.prototype.toTwos=function(O){return this.negative!==0?this.abs().inotn(O).iaddn(1):this.clone()},S.prototype.fromTwos=function(O){return this.testn(O-1)?this.notn(O).iaddn(1).ineg():this.clone()},S.prototype.isNeg=function(){return this.negative!==0},S.prototype.neg=function(){return this.clone().ineg()},S.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},S.prototype.iuor=function(O){for(;this.length<O.length;)this.words[this.length++]=0;for(var z=0;z<O.length;z++)this.words[z]=this.words[z]|O.words[z];return this._strip()},S.prototype.ior=function(O){return x((this.negative|O.negative)===0),this.iuor(O)},S.prototype.or=function(O){return this.length>O.length?this.clone().ior(O):O.clone().ior(this)},S.prototype.uor=function(O){return this.length>O.length?this.clone().iuor(O):O.clone().iuor(this)},S.prototype.iuand=function(O){var z;this.length>O.length?z=O:z=this;for(var J=0;J<z.length;J++)this.words[J]=this.words[J]&O.words[J];return this.length=z.length,this._strip()},S.prototype.iand=function(O){return x((this.negative|O.negative)===0),this.iuand(O)},S.prototype.and=function(O){return this.length>O.length?this.clone().iand(O):O.clone().iand(this)},S.prototype.uand=function(O){return this.length>O.length?this.clone().iuand(O):O.clone().iuand(this)},S.prototype.iuxor=function(O){var z,J;this.length>O.length?(z=this,J=O):(z=O,J=this);for(var ee=0;ee<J.length;ee++)this.words[ee]=z.words[ee]^J.words[ee];if(this!==z)for(;ee<z.length;ee++)this.words[ee]=z.words[ee];return this.length=z.length,this._strip()},S.prototype.ixor=function(O){return x((this.negative|O.negative)===0),this.iuxor(O)},S.prototype.xor=function(O){return this.length>O.length?this.clone().ixor(O):O.clone().ixor(this)},S.prototype.uxor=function(O){return this.length>O.length?this.clone().iuxor(O):O.clone().iuxor(this)},S.prototype.inotn=function(O){x(typeof O=="number"&&O>=0);var z=Math.ceil(O/26)|0,J=O%26;this._expand(z),J>0&&z--;for(var ee=0;ee<z;ee++)this.words[ee]=~this.words[ee]&67108863;return J>0&&(this.words[ee]=~this.words[ee]&67108863>>26-J),this._strip()},S.prototype.notn=function(O){return this.clone().inotn(O)},S.prototype.setn=function(O,z){x(typeof O=="number"&&O>=0);var J=O/26|0,ee=O%26;return this._expand(J+1),z?this.words[J]=this.words[J]|1<<ee:this.words[J]=this.words[J]&~(1<<ee),this._strip()},S.prototype.iadd=function(O){var z;if(this.negative!==0&&O.negative===0)return this.negative=0,z=this.isub(O),this.negative^=1,this._normSign();if(this.negative===0&&O.negative!==0)return O.negative=0,z=this.isub(O),O.negative=1,z._normSign();var J,ee;this.length>O.length?(J=this,ee=O):(J=O,ee=this);for(var ae=0,oe=0;oe<ee.length;oe++)z=(J.words[oe]|0)+(ee.words[oe]|0)+ae,this.words[oe]=z&67108863,ae=z>>>26;for(;ae!==0&&oe<J.length;oe++)z=(J.words[oe]|0)+ae,this.words[oe]=z&67108863,ae=z>>>26;if(this.length=J.length,ae!==0)this.words[this.length]=ae,this.length++;else if(J!==this)for(;oe<J.length;oe++)this.words[oe]=J.words[oe];return this},S.prototype.add=function(O){var z;return O.negative!==0&&this.negative===0?(O.negative=0,z=this.sub(O),O.negative^=1,z):O.negative===0&&this.negative!==0?(this.negative=0,z=O.sub(this),this.negative=1,z):this.length>O.length?this.clone().iadd(O):O.clone().iadd(this)},S.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var z=this.iadd(O);return O.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var J=this.cmp(O);if(J===0)return this.negative=0,this.length=1,this.words[0]=0,this;var ee,ae;J>0?(ee=this,ae=O):(ee=O,ae=this);for(var oe=0,se=0;se<ae.length;se++)z=(ee.words[se]|0)-(ae.words[se]|0)+oe,oe=z>>26,this.words[se]=z&67108863;for(;oe!==0&&se<ee.length;se++)z=(ee.words[se]|0)+oe,oe=z>>26,this.words[se]=z&67108863;if(oe===0&&se<ee.length&&ee!==this)for(;se<ee.length;se++)this.words[se]=ee.words[se];return this.length=Math.max(this.length,se),ee!==this&&(this.negative=1),this._strip()},S.prototype.sub=function(O){return this.clone().isub(O)};function U(W,O,z){z.negative=O.negative^W.negative;var J=W.length+O.length|0;z.length=J,J=J-1|0;var ee=W.words[0]|0,ae=O.words[0]|0,oe=ee*ae,se=oe&67108863,G=oe/67108864|0;z.words[0]=se;for(var q=1;q<J;q++){for(var te=G>>>26,fe=G&67108863,he=Math.min(q,O.length-1),Ee=Math.max(0,q-W.length+1);Ee<=he;Ee++){var we=q-Ee|0;ee=W.words[we]|0,ae=O.words[Ee]|0,oe=ee*ae+fe,te+=oe/67108864|0,fe=oe&67108863}z.words[q]=fe|0,G=te|0}return G!==0?z.words[q]=G|0:z.length--,z._strip()}var H=function(O,z,J){var ee=O.words,ae=z.words,oe=J.words,se=0,G,q,te,fe=ee[0]|0,he=fe&8191,Ee=fe>>>13,we=ee[1]|0,xe=we&8191,$e=we>>>13,ge=ee[2]|0,Se=ge&8191,me=ge>>>13,Be=ee[3]|0,ve=Be&8191,Ae=Be>>>13,Ve=ee[4]|0,Pe=Ve&8191,Re=Ve>>>13,Ne=ee[5]|0,qe=Ne&8191,Ke=Ne>>>13,He=ee[6]|0,Ge=He&8191,rt=He>>>13,st=ee[7]|0,Je=st&8191,Ie=st>>>13,be=ee[8]|0,Te=be&8191,Le=be>>>13,We=ee[9]|0,Ze=We&8191,Qe=We>>>13,St=ae[0]|0,pt=St&8191,ft=St>>>13,Ut=ae[1]|0,$t=Ut&8191,Nt=Ut>>>13,lr=ae[2]|0,Gt=lr&8191,Rt=lr>>>13,Qt=ae[3]|0,Pt=Qt&8191,kt=Qt>>>13,er=ae[4]|0,Lt=er&8191,Bt=er>>>13,ir=ae[5]|0,jt=ir&8191,Ct=ir>>>13,nr=ae[6]|0,je=nr&8191,De=nr>>>13,Me=ae[7]|0,pe=Me&8191,ke=Me>>>13,Oe=ae[8]|0,Fe=Oe&8191,ze=Oe>>>13,Xe=ae[9]|0,tt=Xe&8191,it=Xe>>>13;J.negative=O.negative^z.negative,J.length=19,G=Math.imul(he,pt),q=Math.imul(he,ft),q=q+Math.imul(Ee,pt)|0,te=Math.imul(Ee,ft);var ot=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(ot>>>26)|0,ot&=67108863,G=Math.imul(xe,pt),q=Math.imul(xe,ft),q=q+Math.imul($e,pt)|0,te=Math.imul($e,ft),G=G+Math.imul(he,$t)|0,q=q+Math.imul(he,Nt)|0,q=q+Math.imul(Ee,$t)|0,te=te+Math.imul(Ee,Nt)|0;var at=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(at>>>26)|0,at&=67108863,G=Math.imul(Se,pt),q=Math.imul(Se,ft),q=q+Math.imul(me,pt)|0,te=Math.imul(me,ft),G=G+Math.imul(xe,$t)|0,q=q+Math.imul(xe,Nt)|0,q=q+Math.imul($e,$t)|0,te=te+Math.imul($e,Nt)|0,G=G+Math.imul(he,Gt)|0,q=q+Math.imul(he,Rt)|0,q=q+Math.imul(Ee,Gt)|0,te=te+Math.imul(Ee,Rt)|0;var ct=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(ct>>>26)|0,ct&=67108863,G=Math.imul(ve,pt),q=Math.imul(ve,ft),q=q+Math.imul(Ae,pt)|0,te=Math.imul(Ae,ft),G=G+Math.imul(Se,$t)|0,q=q+Math.imul(Se,Nt)|0,q=q+Math.imul(me,$t)|0,te=te+Math.imul(me,Nt)|0,G=G+Math.imul(xe,Gt)|0,q=q+Math.imul(xe,Rt)|0,q=q+Math.imul($e,Gt)|0,te=te+Math.imul($e,Rt)|0,G=G+Math.imul(he,Pt)|0,q=q+Math.imul(he,kt)|0,q=q+Math.imul(Ee,Pt)|0,te=te+Math.imul(Ee,kt)|0;var dt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(dt>>>26)|0,dt&=67108863,G=Math.imul(Pe,pt),q=Math.imul(Pe,ft),q=q+Math.imul(Re,pt)|0,te=Math.imul(Re,ft),G=G+Math.imul(ve,$t)|0,q=q+Math.imul(ve,Nt)|0,q=q+Math.imul(Ae,$t)|0,te=te+Math.imul(Ae,Nt)|0,G=G+Math.imul(Se,Gt)|0,q=q+Math.imul(Se,Rt)|0,q=q+Math.imul(me,Gt)|0,te=te+Math.imul(me,Rt)|0,G=G+Math.imul(xe,Pt)|0,q=q+Math.imul(xe,kt)|0,q=q+Math.imul($e,Pt)|0,te=te+Math.imul($e,kt)|0,G=G+Math.imul(he,Lt)|0,q=q+Math.imul(he,Bt)|0,q=q+Math.imul(Ee,Lt)|0,te=te+Math.imul(Ee,Bt)|0;var yt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(yt>>>26)|0,yt&=67108863,G=Math.imul(qe,pt),q=Math.imul(qe,ft),q=q+Math.imul(Ke,pt)|0,te=Math.imul(Ke,ft),G=G+Math.imul(Pe,$t)|0,q=q+Math.imul(Pe,Nt)|0,q=q+Math.imul(Re,$t)|0,te=te+Math.imul(Re,Nt)|0,G=G+Math.imul(ve,Gt)|0,q=q+Math.imul(ve,Rt)|0,q=q+Math.imul(Ae,Gt)|0,te=te+Math.imul(Ae,Rt)|0,G=G+Math.imul(Se,Pt)|0,q=q+Math.imul(Se,kt)|0,q=q+Math.imul(me,Pt)|0,te=te+Math.imul(me,kt)|0,G=G+Math.imul(xe,Lt)|0,q=q+Math.imul(xe,Bt)|0,q=q+Math.imul($e,Lt)|0,te=te+Math.imul($e,Bt)|0,G=G+Math.imul(he,jt)|0,q=q+Math.imul(he,Ct)|0,q=q+Math.imul(Ee,jt)|0,te=te+Math.imul(Ee,Ct)|0;var Et=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Et>>>26)|0,Et&=67108863,G=Math.imul(Ge,pt),q=Math.imul(Ge,ft),q=q+Math.imul(rt,pt)|0,te=Math.imul(rt,ft),G=G+Math.imul(qe,$t)|0,q=q+Math.imul(qe,Nt)|0,q=q+Math.imul(Ke,$t)|0,te=te+Math.imul(Ke,Nt)|0,G=G+Math.imul(Pe,Gt)|0,q=q+Math.imul(Pe,Rt)|0,q=q+Math.imul(Re,Gt)|0,te=te+Math.imul(Re,Rt)|0,G=G+Math.imul(ve,Pt)|0,q=q+Math.imul(ve,kt)|0,q=q+Math.imul(Ae,Pt)|0,te=te+Math.imul(Ae,kt)|0,G=G+Math.imul(Se,Lt)|0,q=q+Math.imul(Se,Bt)|0,q=q+Math.imul(me,Lt)|0,te=te+Math.imul(me,Bt)|0,G=G+Math.imul(xe,jt)|0,q=q+Math.imul(xe,Ct)|0,q=q+Math.imul($e,jt)|0,te=te+Math.imul($e,Ct)|0,G=G+Math.imul(he,je)|0,q=q+Math.imul(he,De)|0,q=q+Math.imul(Ee,je)|0,te=te+Math.imul(Ee,De)|0;var mt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(mt>>>26)|0,mt&=67108863,G=Math.imul(Je,pt),q=Math.imul(Je,ft),q=q+Math.imul(Ie,pt)|0,te=Math.imul(Ie,ft),G=G+Math.imul(Ge,$t)|0,q=q+Math.imul(Ge,Nt)|0,q=q+Math.imul(rt,$t)|0,te=te+Math.imul(rt,Nt)|0,G=G+Math.imul(qe,Gt)|0,q=q+Math.imul(qe,Rt)|0,q=q+Math.imul(Ke,Gt)|0,te=te+Math.imul(Ke,Rt)|0,G=G+Math.imul(Pe,Pt)|0,q=q+Math.imul(Pe,kt)|0,q=q+Math.imul(Re,Pt)|0,te=te+Math.imul(Re,kt)|0,G=G+Math.imul(ve,Lt)|0,q=q+Math.imul(ve,Bt)|0,q=q+Math.imul(Ae,Lt)|0,te=te+Math.imul(Ae,Bt)|0,G=G+Math.imul(Se,jt)|0,q=q+Math.imul(Se,Ct)|0,q=q+Math.imul(me,jt)|0,te=te+Math.imul(me,Ct)|0,G=G+Math.imul(xe,je)|0,q=q+Math.imul(xe,De)|0,q=q+Math.imul($e,je)|0,te=te+Math.imul($e,De)|0,G=G+Math.imul(he,pe)|0,q=q+Math.imul(he,ke)|0,q=q+Math.imul(Ee,pe)|0,te=te+Math.imul(Ee,ke)|0;var xt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(xt>>>26)|0,xt&=67108863,G=Math.imul(Te,pt),q=Math.imul(Te,ft),q=q+Math.imul(Le,pt)|0,te=Math.imul(Le,ft),G=G+Math.imul(Je,$t)|0,q=q+Math.imul(Je,Nt)|0,q=q+Math.imul(Ie,$t)|0,te=te+Math.imul(Ie,Nt)|0,G=G+Math.imul(Ge,Gt)|0,q=q+Math.imul(Ge,Rt)|0,q=q+Math.imul(rt,Gt)|0,te=te+Math.imul(rt,Rt)|0,G=G+Math.imul(qe,Pt)|0,q=q+Math.imul(qe,kt)|0,q=q+Math.imul(Ke,Pt)|0,te=te+Math.imul(Ke,kt)|0,G=G+Math.imul(Pe,Lt)|0,q=q+Math.imul(Pe,Bt)|0,q=q+Math.imul(Re,Lt)|0,te=te+Math.imul(Re,Bt)|0,G=G+Math.imul(ve,jt)|0,q=q+Math.imul(ve,Ct)|0,q=q+Math.imul(Ae,jt)|0,te=te+Math.imul(Ae,Ct)|0,G=G+Math.imul(Se,je)|0,q=q+Math.imul(Se,De)|0,q=q+Math.imul(me,je)|0,te=te+Math.imul(me,De)|0,G=G+Math.imul(xe,pe)|0,q=q+Math.imul(xe,ke)|0,q=q+Math.imul($e,pe)|0,te=te+Math.imul($e,ke)|0,G=G+Math.imul(he,Fe)|0,q=q+Math.imul(he,ze)|0,q=q+Math.imul(Ee,Fe)|0,te=te+Math.imul(Ee,ze)|0;var Mt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,G=Math.imul(Ze,pt),q=Math.imul(Ze,ft),q=q+Math.imul(Qe,pt)|0,te=Math.imul(Qe,ft),G=G+Math.imul(Te,$t)|0,q=q+Math.imul(Te,Nt)|0,q=q+Math.imul(Le,$t)|0,te=te+Math.imul(Le,Nt)|0,G=G+Math.imul(Je,Gt)|0,q=q+Math.imul(Je,Rt)|0,q=q+Math.imul(Ie,Gt)|0,te=te+Math.imul(Ie,Rt)|0,G=G+Math.imul(Ge,Pt)|0,q=q+Math.imul(Ge,kt)|0,q=q+Math.imul(rt,Pt)|0,te=te+Math.imul(rt,kt)|0,G=G+Math.imul(qe,Lt)|0,q=q+Math.imul(qe,Bt)|0,q=q+Math.imul(Ke,Lt)|0,te=te+Math.imul(Ke,Bt)|0,G=G+Math.imul(Pe,jt)|0,q=q+Math.imul(Pe,Ct)|0,q=q+Math.imul(Re,jt)|0,te=te+Math.imul(Re,Ct)|0,G=G+Math.imul(ve,je)|0,q=q+Math.imul(ve,De)|0,q=q+Math.imul(Ae,je)|0,te=te+Math.imul(Ae,De)|0,G=G+Math.imul(Se,pe)|0,q=q+Math.imul(Se,ke)|0,q=q+Math.imul(me,pe)|0,te=te+Math.imul(me,ke)|0,G=G+Math.imul(xe,Fe)|0,q=q+Math.imul(xe,ze)|0,q=q+Math.imul($e,Fe)|0,te=te+Math.imul($e,ze)|0,G=G+Math.imul(he,tt)|0,q=q+Math.imul(he,it)|0,q=q+Math.imul(Ee,tt)|0,te=te+Math.imul(Ee,it)|0;var Ot=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,G=Math.imul(Ze,$t),q=Math.imul(Ze,Nt),q=q+Math.imul(Qe,$t)|0,te=Math.imul(Qe,Nt),G=G+Math.imul(Te,Gt)|0,q=q+Math.imul(Te,Rt)|0,q=q+Math.imul(Le,Gt)|0,te=te+Math.imul(Le,Rt)|0,G=G+Math.imul(Je,Pt)|0,q=q+Math.imul(Je,kt)|0,q=q+Math.imul(Ie,Pt)|0,te=te+Math.imul(Ie,kt)|0,G=G+Math.imul(Ge,Lt)|0,q=q+Math.imul(Ge,Bt)|0,q=q+Math.imul(rt,Lt)|0,te=te+Math.imul(rt,Bt)|0,G=G+Math.imul(qe,jt)|0,q=q+Math.imul(qe,Ct)|0,q=q+Math.imul(Ke,jt)|0,te=te+Math.imul(Ke,Ct)|0,G=G+Math.imul(Pe,je)|0,q=q+Math.imul(Pe,De)|0,q=q+Math.imul(Re,je)|0,te=te+Math.imul(Re,De)|0,G=G+Math.imul(ve,pe)|0,q=q+Math.imul(ve,ke)|0,q=q+Math.imul(Ae,pe)|0,te=te+Math.imul(Ae,ke)|0,G=G+Math.imul(Se,Fe)|0,q=q+Math.imul(Se,ze)|0,q=q+Math.imul(me,Fe)|0,te=te+Math.imul(me,ze)|0,G=G+Math.imul(xe,tt)|0,q=q+Math.imul(xe,it)|0,q=q+Math.imul($e,tt)|0,te=te+Math.imul($e,it)|0;var Ht=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,G=Math.imul(Ze,Gt),q=Math.imul(Ze,Rt),q=q+Math.imul(Qe,Gt)|0,te=Math.imul(Qe,Rt),G=G+Math.imul(Te,Pt)|0,q=q+Math.imul(Te,kt)|0,q=q+Math.imul(Le,Pt)|0,te=te+Math.imul(Le,kt)|0,G=G+Math.imul(Je,Lt)|0,q=q+Math.imul(Je,Bt)|0,q=q+Math.imul(Ie,Lt)|0,te=te+Math.imul(Ie,Bt)|0,G=G+Math.imul(Ge,jt)|0,q=q+Math.imul(Ge,Ct)|0,q=q+Math.imul(rt,jt)|0,te=te+Math.imul(rt,Ct)|0,G=G+Math.imul(qe,je)|0,q=q+Math.imul(qe,De)|0,q=q+Math.imul(Ke,je)|0,te=te+Math.imul(Ke,De)|0,G=G+Math.imul(Pe,pe)|0,q=q+Math.imul(Pe,ke)|0,q=q+Math.imul(Re,pe)|0,te=te+Math.imul(Re,ke)|0,G=G+Math.imul(ve,Fe)|0,q=q+Math.imul(ve,ze)|0,q=q+Math.imul(Ae,Fe)|0,te=te+Math.imul(Ae,ze)|0,G=G+Math.imul(Se,tt)|0,q=q+Math.imul(Se,it)|0,q=q+Math.imul(me,tt)|0,te=te+Math.imul(me,it)|0;var Ft=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,G=Math.imul(Ze,Pt),q=Math.imul(Ze,kt),q=q+Math.imul(Qe,Pt)|0,te=Math.imul(Qe,kt),G=G+Math.imul(Te,Lt)|0,q=q+Math.imul(Te,Bt)|0,q=q+Math.imul(Le,Lt)|0,te=te+Math.imul(Le,Bt)|0,G=G+Math.imul(Je,jt)|0,q=q+Math.imul(Je,Ct)|0,q=q+Math.imul(Ie,jt)|0,te=te+Math.imul(Ie,Ct)|0,G=G+Math.imul(Ge,je)|0,q=q+Math.imul(Ge,De)|0,q=q+Math.imul(rt,je)|0,te=te+Math.imul(rt,De)|0,G=G+Math.imul(qe,pe)|0,q=q+Math.imul(qe,ke)|0,q=q+Math.imul(Ke,pe)|0,te=te+Math.imul(Ke,ke)|0,G=G+Math.imul(Pe,Fe)|0,q=q+Math.imul(Pe,ze)|0,q=q+Math.imul(Re,Fe)|0,te=te+Math.imul(Re,ze)|0,G=G+Math.imul(ve,tt)|0,q=q+Math.imul(ve,it)|0,q=q+Math.imul(Ae,tt)|0,te=te+Math.imul(Ae,it)|0;var Wt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,G=Math.imul(Ze,Lt),q=Math.imul(Ze,Bt),q=q+Math.imul(Qe,Lt)|0,te=Math.imul(Qe,Bt),G=G+Math.imul(Te,jt)|0,q=q+Math.imul(Te,Ct)|0,q=q+Math.imul(Le,jt)|0,te=te+Math.imul(Le,Ct)|0,G=G+Math.imul(Je,je)|0,q=q+Math.imul(Je,De)|0,q=q+Math.imul(Ie,je)|0,te=te+Math.imul(Ie,De)|0,G=G+Math.imul(Ge,pe)|0,q=q+Math.imul(Ge,ke)|0,q=q+Math.imul(rt,pe)|0,te=te+Math.imul(rt,ke)|0,G=G+Math.imul(qe,Fe)|0,q=q+Math.imul(qe,ze)|0,q=q+Math.imul(Ke,Fe)|0,te=te+Math.imul(Ke,ze)|0,G=G+Math.imul(Pe,tt)|0,q=q+Math.imul(Pe,it)|0,q=q+Math.imul(Re,tt)|0,te=te+Math.imul(Re,it)|0;var Jt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,G=Math.imul(Ze,jt),q=Math.imul(Ze,Ct),q=q+Math.imul(Qe,jt)|0,te=Math.imul(Qe,Ct),G=G+Math.imul(Te,je)|0,q=q+Math.imul(Te,De)|0,q=q+Math.imul(Le,je)|0,te=te+Math.imul(Le,De)|0,G=G+Math.imul(Je,pe)|0,q=q+Math.imul(Je,ke)|0,q=q+Math.imul(Ie,pe)|0,te=te+Math.imul(Ie,ke)|0,G=G+Math.imul(Ge,Fe)|0,q=q+Math.imul(Ge,ze)|0,q=q+Math.imul(rt,Fe)|0,te=te+Math.imul(rt,ze)|0,G=G+Math.imul(qe,tt)|0,q=q+Math.imul(qe,it)|0,q=q+Math.imul(Ke,tt)|0,te=te+Math.imul(Ke,it)|0;var Kt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,G=Math.imul(Ze,je),q=Math.imul(Ze,De),q=q+Math.imul(Qe,je)|0,te=Math.imul(Qe,De),G=G+Math.imul(Te,pe)|0,q=q+Math.imul(Te,ke)|0,q=q+Math.imul(Le,pe)|0,te=te+Math.imul(Le,ke)|0,G=G+Math.imul(Je,Fe)|0,q=q+Math.imul(Je,ze)|0,q=q+Math.imul(Ie,Fe)|0,te=te+Math.imul(Ie,ze)|0,G=G+Math.imul(Ge,tt)|0,q=q+Math.imul(Ge,it)|0,q=q+Math.imul(rt,tt)|0,te=te+Math.imul(rt,it)|0;var gt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(gt>>>26)|0,gt&=67108863,G=Math.imul(Ze,pe),q=Math.imul(Ze,ke),q=q+Math.imul(Qe,pe)|0,te=Math.imul(Qe,ke),G=G+Math.imul(Te,Fe)|0,q=q+Math.imul(Te,ze)|0,q=q+Math.imul(Le,Fe)|0,te=te+Math.imul(Le,ze)|0,G=G+Math.imul(Je,tt)|0,q=q+Math.imul(Je,it)|0,q=q+Math.imul(Ie,tt)|0,te=te+Math.imul(Ie,it)|0;var _t=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(_t>>>26)|0,_t&=67108863,G=Math.imul(Ze,Fe),q=Math.imul(Ze,ze),q=q+Math.imul(Qe,Fe)|0,te=Math.imul(Qe,ze),G=G+Math.imul(Te,tt)|0,q=q+Math.imul(Te,it)|0,q=q+Math.imul(Le,tt)|0,te=te+Math.imul(Le,it)|0;var It=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(It>>>26)|0,It&=67108863,G=Math.imul(Ze,tt),q=Math.imul(Ze,it),q=q+Math.imul(Qe,tt)|0,te=Math.imul(Qe,it);var At=(se+G|0)+((q&8191)<<13)|0;return se=(te+(q>>>13)|0)+(At>>>26)|0,At&=67108863,oe[0]=ot,oe[1]=at,oe[2]=ct,oe[3]=dt,oe[4]=yt,oe[5]=Et,oe[6]=mt,oe[7]=xt,oe[8]=Mt,oe[9]=Ot,oe[10]=Ht,oe[11]=Ft,oe[12]=Wt,oe[13]=Jt,oe[14]=Kt,oe[15]=gt,oe[16]=_t,oe[17]=It,oe[18]=At,se!==0&&(oe[19]=se,J.length++),J};Math.imul||(H=U);function Y(W,O,z){z.negative=O.negative^W.negative,z.length=W.length+O.length;for(var J=0,ee=0,ae=0;ae<z.length-1;ae++){var oe=ee;ee=0;for(var se=J&67108863,G=Math.min(ae,O.length-1),q=Math.max(0,ae-W.length+1);q<=G;q++){var te=ae-q,fe=W.words[te]|0,he=O.words[q]|0,Ee=fe*he,we=Ee&67108863;oe=oe+(Ee/67108864|0)|0,we=we+se|0,se=we&67108863,oe=oe+(we>>>26)|0,ee+=oe>>>26,oe&=67108863}z.words[ae]=se,J=oe,oe=ee}return J!==0?z.words[ae]=J:z.length--,z._strip()}function Z(W,O,z){return Y(W,O,z)}S.prototype.mulTo=function(O,z){var J,ee=this.length+O.length;return this.length===10&&O.length===10?J=H(this,O,z):ee<63?J=U(this,O,z):ee<1024?J=Y(this,O,z):J=Z(this,O,z),J},S.prototype.mul=function(O){var z=new S(null);return z.words=new Array(this.length+O.length),this.mulTo(O,z)},S.prototype.mulf=function(O){var z=new S(null);return z.words=new Array(this.length+O.length),Z(this,O,z)},S.prototype.imul=function(O){return this.clone().mulTo(O,this)},S.prototype.imuln=function(O){var z=O<0;z&&(O=-O),x(typeof O=="number"),x(O<67108864);for(var J=0,ee=0;ee<this.length;ee++){var ae=(this.words[ee]|0)*O,oe=(ae&67108863)+(J&67108863);J>>=26,J+=ae/67108864|0,J+=oe>>>26,this.words[ee]=oe&67108863}return J!==0&&(this.words[ee]=J,this.length++),z?this.ineg():this},S.prototype.muln=function(O){return this.clone().imuln(O)},S.prototype.sqr=function(){return this.mul(this)},S.prototype.isqr=function(){return this.imul(this.clone())},S.prototype.pow=function(O){var z=j(O);if(z.length===0)return new S(1);for(var J=this,ee=0;ee<z.length&&z[ee]===0;ee++,J=J.sqr());if(++ee<z.length)for(var ae=J.sqr();ee<z.length;ee++,ae=ae.sqr())z[ee]!==0&&(J=J.mul(ae));return J},S.prototype.iushln=function(O){x(typeof O=="number"&&O>=0);var z=O%26,J=(O-z)/26,ee=67108863>>>26-z<<26-z,ae;if(z!==0){var oe=0;for(ae=0;ae<this.length;ae++){var se=this.words[ae]&ee,G=(this.words[ae]|0)-se<<z;this.words[ae]=G|oe,oe=se>>>26-z}oe&&(this.words[ae]=oe,this.length++)}if(J!==0){for(ae=this.length-1;ae>=0;ae--)this.words[ae+J]=this.words[ae];for(ae=0;ae<J;ae++)this.words[ae]=0;this.length+=J}return this._strip()},S.prototype.ishln=function(O){return x(this.negative===0),this.iushln(O)},S.prototype.iushrn=function(O,z,J){x(typeof O=="number"&&O>=0);var ee;z?ee=(z-z%26)/26:ee=0;var ae=O%26,oe=Math.min((O-ae)/26,this.length),se=67108863^67108863>>>ae<<ae,G=J;if(ee-=oe,ee=Math.max(0,ee),G){for(var q=0;q<oe;q++)G.words[q]=this.words[q];G.length=oe}if(oe!==0)if(this.length>oe)for(this.length-=oe,q=0;q<this.length;q++)this.words[q]=this.words[q+oe];else this.words[0]=0,this.length=1;var te=0;for(q=this.length-1;q>=0&&(te!==0||q>=ee);q--){var fe=this.words[q]|0;this.words[q]=te<<26-ae|fe>>>ae,te=fe&se}return G&&te!==0&&(G.words[G.length++]=te),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},S.prototype.ishrn=function(O,z,J){return x(this.negative===0),this.iushrn(O,z,J)},S.prototype.shln=function(O){return this.clone().ishln(O)},S.prototype.ushln=function(O){return this.clone().iushln(O)},S.prototype.shrn=function(O){return this.clone().ishrn(O)},S.prototype.ushrn=function(O){return this.clone().iushrn(O)},S.prototype.testn=function(O){x(typeof O=="number"&&O>=0);var z=O%26,J=(O-z)/26,ee=1<<z;if(this.length<=J)return!1;var ae=this.words[J];return!!(ae&ee)},S.prototype.imaskn=function(O){x(typeof O=="number"&&O>=0);var z=O%26,J=(O-z)/26;if(x(this.negative===0,"imaskn works only with positive numbers"),this.length<=J)return this;if(z!==0&&J++,this.length=Math.min(J,this.length),z!==0){var ee=67108863^67108863>>>z<<z;this.words[this.length-1]&=ee}return this._strip()},S.prototype.maskn=function(O){return this.clone().imaskn(O)},S.prototype.iaddn=function(O){return x(typeof O=="number"),x(O<67108864),O<0?this.isubn(-O):this.negative!==0?this.length===1&&(this.words[0]|0)<=O?(this.words[0]=O-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(O),this.negative=1,this):this._iaddn(O)},S.prototype._iaddn=function(O){this.words[0]+=O;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},S.prototype.isubn=function(O){if(x(typeof O=="number"),x(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this._strip()},S.prototype.addn=function(O){return this.clone().iaddn(O)},S.prototype.subn=function(O){return this.clone().isubn(O)},S.prototype.iabs=function(){return this.negative=0,this},S.prototype.abs=function(){return this.clone().iabs()},S.prototype._ishlnsubmul=function(O,z,J){var ee=O.length+J,ae;this._expand(ee);var oe,se=0;for(ae=0;ae<O.length;ae++){oe=(this.words[ae+J]|0)+se;var G=(O.words[ae]|0)*z;oe-=G&67108863,se=(oe>>26)-(G/67108864|0),this.words[ae+J]=oe&67108863}for(;ae<this.length-J;ae++)oe=(this.words[ae+J]|0)+se,se=oe>>26,this.words[ae+J]=oe&67108863;if(se===0)return this._strip();for(x(se===-1),se=0,ae=0;ae<this.length;ae++)oe=-(this.words[ae]|0)+se,se=oe>>26,this.words[ae]=oe&67108863;return this.negative=1,this._strip()},S.prototype._wordDiv=function(O,z){var J=this.length-O.length,ee=this.clone(),ae=O,oe=ae.words[ae.length-1]|0,se=this._countBits(oe);J=26-se,J!==0&&(ae=ae.ushln(J),ee.iushln(J),oe=ae.words[ae.length-1]|0);var G=ee.length-ae.length,q;if(z!=="mod"){q=new S(null),q.length=G+1,q.words=new Array(q.length);for(var te=0;te<q.length;te++)q.words[te]=0}var fe=ee.clone()._ishlnsubmul(ae,1,G);fe.negative===0&&(ee=fe,q&&(q.words[G]=1));for(var he=G-1;he>=0;he--){var Ee=(ee.words[ae.length+he]|0)*67108864+(ee.words[ae.length+he-1]|0);for(Ee=Math.min(Ee/oe|0,67108863),ee._ishlnsubmul(ae,Ee,he);ee.negative!==0;)Ee--,ee.negative=0,ee._ishlnsubmul(ae,1,he),ee.isZero()||(ee.negative^=1);q&&(q.words[he]=Ee)}return q&&q._strip(),ee._strip(),z!=="div"&&J!==0&&ee.iushrn(J),{div:q||null,mod:ee}},S.prototype.divmod=function(O,z,J){if(x(!O.isZero()),this.isZero())return{div:new S(0),mod:new S(0)};var ee,ae,oe;return this.negative!==0&&O.negative===0?(oe=this.neg().divmod(O,z),z!=="mod"&&(ee=oe.div.neg()),z!=="div"&&(ae=oe.mod.neg(),J&&ae.negative!==0&&ae.iadd(O)),{div:ee,mod:ae}):this.negative===0&&O.negative!==0?(oe=this.divmod(O.neg(),z),z!=="mod"&&(ee=oe.div.neg()),{div:ee,mod:oe.mod}):this.negative&O.negative?(oe=this.neg().divmod(O.neg(),z),z!=="div"&&(ae=oe.mod.neg(),J&&ae.negative!==0&&ae.isub(O)),{div:oe.div,mod:ae}):O.length>this.length||this.cmp(O)<0?{div:new S(0),mod:this}:O.length===1?z==="div"?{div:this.divn(O.words[0]),mod:null}:z==="mod"?{div:null,mod:new S(this.modrn(O.words[0]))}:{div:this.divn(O.words[0]),mod:new S(this.modrn(O.words[0]))}:this._wordDiv(O,z)},S.prototype.div=function(O){return this.divmod(O,"div",!1).div},S.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},S.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},S.prototype.divRound=function(O){var z=this.divmod(O);if(z.mod.isZero())return z.div;var J=z.div.negative!==0?z.mod.isub(O):z.mod,ee=O.ushrn(1),ae=O.andln(1),oe=J.cmp(ee);return oe<0||ae===1&&oe===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},S.prototype.modrn=function(O){var z=O<0;z&&(O=-O),x(O<=67108863);for(var J=(1<<26)%O,ee=0,ae=this.length-1;ae>=0;ae--)ee=(J*ee+(this.words[ae]|0))%O;return z?-ee:ee},S.prototype.modn=function(O){return this.modrn(O)},S.prototype.idivn=function(O){var z=O<0;z&&(O=-O),x(O<=67108863);for(var J=0,ee=this.length-1;ee>=0;ee--){var ae=(this.words[ee]|0)+J*67108864;this.words[ee]=ae/O|0,J=ae%O}return this._strip(),z?this.ineg():this},S.prototype.divn=function(O){return this.clone().idivn(O)},S.prototype.egcd=function(O){x(O.negative===0),x(!O.isZero());var z=this,J=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var ee=new S(1),ae=new S(0),oe=new S(0),se=new S(1),G=0;z.isEven()&&J.isEven();)z.iushrn(1),J.iushrn(1),++G;for(var q=J.clone(),te=z.clone();!z.isZero();){for(var fe=0,he=1;!(z.words[0]&he)&&fe<26;++fe,he<<=1);if(fe>0)for(z.iushrn(fe);fe-- >0;)(ee.isOdd()||ae.isOdd())&&(ee.iadd(q),ae.isub(te)),ee.iushrn(1),ae.iushrn(1);for(var Ee=0,we=1;!(J.words[0]&we)&&Ee<26;++Ee,we<<=1);if(Ee>0)for(J.iushrn(Ee);Ee-- >0;)(oe.isOdd()||se.isOdd())&&(oe.iadd(q),se.isub(te)),oe.iushrn(1),se.iushrn(1);z.cmp(J)>=0?(z.isub(J),ee.isub(oe),ae.isub(se)):(J.isub(z),oe.isub(ee),se.isub(ae))}return{a:oe,b:se,gcd:J.iushln(G)}},S.prototype._invmp=function(O){x(O.negative===0),x(!O.isZero());var z=this,J=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var ee=new S(1),ae=new S(0),oe=J.clone();z.cmpn(1)>0&&J.cmpn(1)>0;){for(var se=0,G=1;!(z.words[0]&G)&&se<26;++se,G<<=1);if(se>0)for(z.iushrn(se);se-- >0;)ee.isOdd()&&ee.iadd(oe),ee.iushrn(1);for(var q=0,te=1;!(J.words[0]&te)&&q<26;++q,te<<=1);if(q>0)for(J.iushrn(q);q-- >0;)ae.isOdd()&&ae.iadd(oe),ae.iushrn(1);z.cmp(J)>=0?(z.isub(J),ee.isub(ae)):(J.isub(z),ae.isub(ee))}var fe;return z.cmpn(1)===0?fe=ee:fe=ae,fe.cmpn(0)<0&&fe.iadd(O),fe},S.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var z=this.clone(),J=O.clone();z.negative=0,J.negative=0;for(var ee=0;z.isEven()&&J.isEven();ee++)z.iushrn(1),J.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;J.isEven();)J.iushrn(1);var ae=z.cmp(J);if(ae<0){var oe=z;z=J,J=oe}else if(ae===0||J.cmpn(1)===0)break;z.isub(J)}while(!0);return J.iushln(ee)},S.prototype.invm=function(O){return this.egcd(O).a.umod(O)},S.prototype.isEven=function(){return(this.words[0]&1)===0},S.prototype.isOdd=function(){return(this.words[0]&1)===1},S.prototype.andln=function(O){return this.words[0]&O},S.prototype.bincn=function(O){x(typeof O=="number");var z=O%26,J=(O-z)/26,ee=1<<z;if(this.length<=J)return this._expand(J+1),this.words[J]|=ee,this;for(var ae=ee,oe=J;ae!==0&&oe<this.length;oe++){var se=this.words[oe]|0;se+=ae,ae=se>>>26,se&=67108863,this.words[oe]=se}return ae!==0&&(this.words[oe]=ae,this.length++),this},S.prototype.isZero=function(){return this.length===1&&this.words[0]===0},S.prototype.cmpn=function(O){var z=O<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this._strip();var J;if(this.length>1)J=1;else{z&&(O=-O),x(O<=67108863,"Number is too big");var ee=this.words[0]|0;J=ee===O?0:ee<O?-1:1}return this.negative!==0?-J|0:J},S.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var z=this.ucmp(O);return this.negative!==0?-z|0:z},S.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;for(var z=0,J=this.length-1;J>=0;J--){var ee=this.words[J]|0,ae=O.words[J]|0;if(ee!==ae){ee<ae?z=-1:ee>ae&&(z=1);break}}return z},S.prototype.gtn=function(O){return this.cmpn(O)===1},S.prototype.gt=function(O){return this.cmp(O)===1},S.prototype.gten=function(O){return this.cmpn(O)>=0},S.prototype.gte=function(O){return this.cmp(O)>=0},S.prototype.ltn=function(O){return this.cmpn(O)===-1},S.prototype.lt=function(O){return this.cmp(O)===-1},S.prototype.lten=function(O){return this.cmpn(O)<=0},S.prototype.lte=function(O){return this.cmp(O)<=0},S.prototype.eqn=function(O){return this.cmpn(O)===0},S.prototype.eq=function(O){return this.cmp(O)===0},S.red=function(O){return new ye(O)},S.prototype.toRed=function(O){return x(!this.red,"Already a number in reduction context"),x(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},S.prototype.fromRed=function(){return x(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},S.prototype._forceRed=function(O){return this.red=O,this},S.prototype.forceRed=function(O){return x(!this.red,"Already a number in reduction context"),this._forceRed(O)},S.prototype.redAdd=function(O){return x(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},S.prototype.redIAdd=function(O){return x(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},S.prototype.redSub=function(O){return x(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},S.prototype.redISub=function(O){return x(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},S.prototype.redShl=function(O){return x(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},S.prototype.redMul=function(O){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},S.prototype.redIMul=function(O){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},S.prototype.redSqr=function(){return x(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},S.prototype.redISqr=function(){return x(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},S.prototype.redSqrt=function(){return x(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},S.prototype.redInvm=function(){return x(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},S.prototype.redNeg=function(){return x(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},S.prototype.redPow=function(O){return x(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var ne={k256:null,p224:null,p192:null,p25519:null};function re(W,O){this.name=W,this.p=new S(O,16),this.n=this.p.bitLength(),this.k=new S(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}re.prototype._tmp=function(){var O=new S(null);return O.words=new Array(Math.ceil(this.n/13)),O},re.prototype.ireduce=function(O){var z=O,J;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),J=z.bitLength();while(J>this.n);var ee=J<this.n?-1:z.ucmp(this.p);return ee===0?(z.words[0]=0,z.length=1):ee>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},re.prototype.split=function(O,z){O.iushrn(this.n,0,z)},re.prototype.imulK=function(O){return O.imul(this.k)};function X(){re.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}E(X,re),X.prototype.split=function(O,z){for(var J=4194303,ee=Math.min(O.length,9),ae=0;ae<ee;ae++)z.words[ae]=O.words[ae];if(z.length=ee,O.length<=9){O.words[0]=0,O.length=1;return}var oe=O.words[9];for(z.words[z.length++]=oe&J,ae=10;ae<O.length;ae++){var se=O.words[ae]|0;O.words[ae-10]=(se&J)<<4|oe>>>22,oe=se}oe>>>=22,O.words[ae-10]=oe,oe===0&&O.length>10?O.length-=10:O.length-=9},X.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;for(var z=0,J=0;J<O.length;J++){var ee=O.words[J]|0;z+=ee*977,O.words[J]=z&67108863,z=ee*64+(z/67108864|0)}return O.words[O.length-1]===0&&(O.length--,O.words[O.length-1]===0&&O.length--),O};function ce(){re.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}E(ce,re);function ue(){re.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}E(ue,re);function _e(){re.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}E(_e,re),_e.prototype.imulK=function(O){for(var z=0,J=0;J<O.length;J++){var ee=(O.words[J]|0)*19+z,ae=ee&67108863;ee>>>=26,O.words[J]=ae,z=ee}return z!==0&&(O.words[O.length++]=z),O},S._prime=function(O){if(ne[O])return ne[O];var z;if(O==="k256")z=new X;else if(O==="p224")z=new ce;else if(O==="p192")z=new ue;else if(O==="p25519")z=new _e;else throw new Error("Unknown prime "+O);return ne[O]=z,z};function ye(W){if(typeof W=="string"){var O=S._prime(W);this.m=O.p,this.prime=O}else x(W.gtn(1),"modulus must be greater than 1"),this.m=W,this.prime=null}ye.prototype._verify1=function(O){x(O.negative===0,"red works only with positives"),x(O.red,"red works only with red numbers")},ye.prototype._verify2=function(O,z){x((O.negative|z.negative)===0,"red works only with positives"),x(O.red&&O.red===z.red,"red works only with red numbers")},ye.prototype.imod=function(O){return this.prime?this.prime.ireduce(O)._forceRed(this):(I(O,O.umod(this.m)._forceRed(this)),O)},ye.prototype.neg=function(O){return O.isZero()?O.clone():this.m.sub(O)._forceRed(this)},ye.prototype.add=function(O,z){this._verify2(O,z);var J=O.add(z);return J.cmp(this.m)>=0&&J.isub(this.m),J._forceRed(this)},ye.prototype.iadd=function(O,z){this._verify2(O,z);var J=O.iadd(z);return J.cmp(this.m)>=0&&J.isub(this.m),J},ye.prototype.sub=function(O,z){this._verify2(O,z);var J=O.sub(z);return J.cmpn(0)<0&&J.iadd(this.m),J._forceRed(this)},ye.prototype.isub=function(O,z){this._verify2(O,z);var J=O.isub(z);return J.cmpn(0)<0&&J.iadd(this.m),J},ye.prototype.shl=function(O,z){return this._verify1(O),this.imod(O.ushln(z))},ye.prototype.imul=function(O,z){return this._verify2(O,z),this.imod(O.imul(z))},ye.prototype.mul=function(O,z){return this._verify2(O,z),this.imod(O.mul(z))},ye.prototype.isqr=function(O){return this.imul(O,O.clone())},ye.prototype.sqr=function(O){return this.mul(O,O)},ye.prototype.sqrt=function(O){if(O.isZero())return O.clone();var z=this.m.andln(3);if(x(z%2===1),z===3){var J=this.m.add(new S(1)).iushrn(2);return this.pow(O,J)}for(var ee=this.m.subn(1),ae=0;!ee.isZero()&&ee.andln(1)===0;)ae++,ee.iushrn(1);x(!ee.isZero());var oe=new S(1).toRed(this),se=oe.redNeg(),G=this.m.subn(1).iushrn(1),q=this.m.bitLength();for(q=new S(2*q*q).toRed(this);this.pow(q,G).cmp(se)!==0;)q.redIAdd(se);for(var te=this.pow(q,ee),fe=this.pow(O,ee.addn(1).iushrn(1)),he=this.pow(O,ee),Ee=ae;he.cmp(oe)!==0;){for(var we=he,xe=0;we.cmp(oe)!==0;xe++)we=we.redSqr();x(xe<Ee);var $e=this.pow(te,new S(1).iushln(Ee-xe-1));fe=fe.redMul($e),te=$e.redSqr(),he=he.redMul(te),Ee=xe}return fe},ye.prototype.invm=function(O){var z=O._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},ye.prototype.pow=function(O,z){if(z.isZero())return new S(1).toRed(this);if(z.cmpn(1)===0)return O.clone();var J=4,ee=new Array(1<<J);ee[0]=new S(1).toRed(this),ee[1]=O;for(var ae=2;ae<ee.length;ae++)ee[ae]=this.mul(ee[ae-1],O);var oe=ee[0],se=0,G=0,q=z.bitLength()%26;for(q===0&&(q=26),ae=z.length-1;ae>=0;ae--){for(var te=z.words[ae],fe=q-1;fe>=0;fe--){var he=te>>fe&1;if(oe!==ee[0]&&(oe=this.sqr(oe)),he===0&&se===0){G=0;continue}se<<=1,se|=he,G++,!(G!==J&&(ae!==0||fe!==0))&&(oe=this.mul(oe,ee[se]),G=0,se=0)}q=26}return oe},ye.prototype.convertTo=function(O){var z=O.umod(this.m);return z===O?z.clone():z},ye.prototype.convertFrom=function(O){var z=O.clone();return z.red=null,z},S.mont=function(O){return new ie(O)};function ie(W){ye.call(this,W),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new S(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E(ie,ye),ie.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},ie.prototype.convertFrom=function(O){var z=this.imod(O.mul(this.rinv));return z.red=null,z},ie.prototype.imul=function(O,z){if(O.isZero()||z.isZero())return O.words[0]=0,O.length=1,O;var J=O.imul(z),ee=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ae=J.isub(ee).iushrn(this.shift),oe=ae;return ae.cmp(this.m)>=0?oe=ae.isub(this.m):ae.cmpn(0)<0&&(oe=ae.iadd(this.m)),oe._forceRed(this)},ie.prototype.mul=function(O,z){if(O.isZero()||z.isZero())return new S(0)._forceRed(this);var J=O.mul(z),ee=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ae=J.isub(ee).iushrn(this.shift),oe=ae;return ae.cmp(this.m)>=0?oe=ae.isub(this.m):ae.cmpn(0)<0&&(oe=ae.iadd(this.m)),oe._forceRed(this)},ie.prototype.invm=function(O){var z=this.imod(O._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(t,commonjsGlobal)}(bn$2)),bn$2.exports}var asn1$3={},asn1$2={},api$1={},encoders={},safer_1,hasRequiredSafer;function requireSafer(){if(hasRequiredSafer)return safer_1;hasRequiredSafer=1;var t=buffer$3,n=t.Buffer,_={},x;for(x in t)t.hasOwnProperty(x)&&(x==="SlowBuffer"||x==="Buffer"||(_[x]=t[x]));var E=_.Buffer={};for(x in n)n.hasOwnProperty(x)&&(x==="allocUnsafe"||x==="allocUnsafeSlow"||(E[x]=n[x]));if(_.Buffer.prototype=n.prototype,(!E.from||E.from===Uint8Array.from)&&(E.from=function(S,C,T){if(typeof S=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof S);if(S&&typeof S.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof S);return n(S,C,T)}),E.alloc||(E.alloc=function(S,C,T){if(typeof S!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof S);if(S<0||S>=2*(1<<30))throw new RangeError('The value "'+S+'" is invalid for option "size"');var B=n(S);return!C||C.length===0?B.fill(0):typeof T=="string"?B.fill(C,T):B.fill(C),B}),!_.kStringMaxLength)try{_.kStringMaxLength=browser$1$1.binding("buffer").kStringMaxLength}catch{}return _.constants||(_.constants={MAX_LENGTH:_.kMaxLength},_.kStringMaxLength&&(_.constants.MAX_STRING_LENGTH=_.kStringMaxLength)),safer_1=_,safer_1}var reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;const t=inherits_browserExports;function n(x){this._reporterState={obj:null,path:[],options:x||{},errors:[]}}reporter.Reporter=n,n.prototype.isError=function(E){return E instanceof _},n.prototype.save=function(){const E=this._reporterState;return{obj:E.obj,pathLen:E.path.length}},n.prototype.restore=function(E){const S=this._reporterState;S.obj=E.obj,S.path=S.path.slice(0,E.pathLen)},n.prototype.enterKey=function(E){return this._reporterState.path.push(E)},n.prototype.exitKey=function(E){const S=this._reporterState;S.path=S.path.slice(0,E-1)},n.prototype.leaveKey=function(E,S,C){const T=this._reporterState;this.exitKey(E),T.obj!==null&&(T.obj[S]=C)},n.prototype.path=function(){return this._reporterState.path.join("/")},n.prototype.enterObject=function(){const E=this._reporterState,S=E.obj;return E.obj={},S},n.prototype.leaveObject=function(E){const S=this._reporterState,C=S.obj;return S.obj=E,C},n.prototype.error=function(E){let S;const C=this._reporterState,T=E instanceof _;if(T?S=E:S=new _(C.path.map(function(B){return"["+JSON.stringify(B)+"]"}).join(""),E.message||E,E.stack),!C.options.partial)throw S;return T||C.errors.push(S),S},n.prototype.wrapResult=function(E){const S=this._reporterState;return S.options.partial?{result:this.isError(E)?null:E,errors:S.errors}:E};function _(x,E){this.path=x,this.rethrow(E)}return t(_,Error),_.prototype.rethrow=function(E){if(this.message=E+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,_),!this.stack)try{throw new Error(this.message)}catch(S){this.stack=S.stack}return this},reporter}var buffer$1={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer$1;hasRequiredBuffer=1;const t=inherits_browserExports,n=requireReporter().Reporter,_=requireSafer().Buffer;function x(S,C){if(n.call(this,C),!_.isBuffer(S)){this.error("Input not Buffer");return}this.base=S,this.offset=0,this.length=S.length}t(x,n),buffer$1.DecoderBuffer=x,x.isDecoderBuffer=function(C){return C instanceof x?!0:typeof C=="object"&&_.isBuffer(C.base)&&C.constructor.name==="DecoderBuffer"&&typeof C.offset=="number"&&typeof C.length=="number"&&typeof C.save=="function"&&typeof C.restore=="function"&&typeof C.isEmpty=="function"&&typeof C.readUInt8=="function"&&typeof C.skip=="function"&&typeof C.raw=="function"},x.prototype.save=function(){return{offset:this.offset,reporter:n.prototype.save.call(this)}},x.prototype.restore=function(C){const T=new x(this.base);return T.offset=C.offset,T.length=this.offset,this.offset=C.offset,n.prototype.restore.call(this,C.reporter),T},x.prototype.isEmpty=function(){return this.offset===this.length},x.prototype.readUInt8=function(C){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(C||"DecoderBuffer overrun")},x.prototype.skip=function(C,T){if(!(this.offset+C<=this.length))return this.error(T||"DecoderBuffer overrun");const B=new x(this.base);return B._reporterState=this._reporterState,B.offset=this.offset,B.length=this.offset+C,this.offset+=C,B},x.prototype.raw=function(C){return this.base.slice(C?C.offset:this.offset,this.length)};function E(S,C){if(Array.isArray(S))this.length=0,this.value=S.map(function(T){return E.isEncoderBuffer(T)||(T=new E(T,C)),this.length+=T.length,T},this);else if(typeof S=="number"){if(!(0<=S&&S<=255))return C.error("non-byte EncoderBuffer value");this.value=S,this.length=1}else if(typeof S=="string")this.value=S,this.length=_.byteLength(S);else if(_.isBuffer(S))this.value=S,this.length=S.length;else return C.error("Unsupported type: "+typeof S)}return buffer$1.EncoderBuffer=E,E.isEncoderBuffer=function(C){return C instanceof E?!0:typeof C=="object"&&C.constructor.name==="EncoderBuffer"&&typeof C.length=="number"&&typeof C.join=="function"},E.prototype.join=function(C,T){return C||(C=_.alloc(this.length)),T||(T=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(B){B.join(C,T),T+=B.length}):(typeof this.value=="number"?C[T]=this.value:typeof this.value=="string"?C.write(this.value,T):_.isBuffer(this.value)&&this.value.copy(C,T),T+=this.length)),C},buffer$1}var node$1,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node$1;hasRequiredNode=1;const t=requireReporter().Reporter,n=requireBuffer().EncoderBuffer,_=requireBuffer().DecoderBuffer,x=minimalisticAssert$1,E=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],S=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(E),C=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function T(A,I,D){const M={};this._baseState=M,M.name=D,M.enc=A,M.parent=I||null,M.children=null,M.tag=null,M.args=null,M.reverseArgs=null,M.choice=null,M.optional=!1,M.any=!1,M.obj=!1,M.use=null,M.useDecoder=null,M.key=null,M.default=null,M.explicit=null,M.implicit=null,M.contains=null,M.parent||(M.children=[],this._wrap())}node$1=T;const B=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return T.prototype.clone=function(){const I=this._baseState,D={};B.forEach(function(V){D[V]=I[V]});const M=new this.constructor(D.parent);return M._baseState=D,M},T.prototype._wrap=function(){const I=this._baseState;S.forEach(function(D){this[D]=function(){const V=new this.constructor(this);return I.children.push(V),V[D].apply(V,arguments)}},this)},T.prototype._init=function(I){const D=this._baseState;x(D.parent===null),I.call(this),D.children=D.children.filter(function(M){return M._baseState.parent===this},this),x.equal(D.children.length,1,"Root node can have only one child")},T.prototype._useArgs=function(I){const D=this._baseState,M=I.filter(function(V){return V instanceof this.constructor},this);I=I.filter(function(V){return!(V instanceof this.constructor)},this),M.length!==0&&(x(D.children===null),D.children=M,M.forEach(function(V){V._baseState.parent=this},this)),I.length!==0&&(x(D.args===null),D.args=I,D.reverseArgs=I.map(function(V){if(typeof V!="object"||V.constructor!==Object)return V;const L={};return Object.keys(V).forEach(function(F){F==(F|0)&&(F|=0);const j=V[F];L[j]=F}),L}))},C.forEach(function(A){T.prototype[A]=function(){const D=this._baseState;throw new Error(A+" not implemented for encoding: "+D.enc)}}),E.forEach(function(A){T.prototype[A]=function(){const D=this._baseState,M=Array.prototype.slice.call(arguments);return x(D.tag===null),D.tag=A,this._useArgs(M),this}}),T.prototype.use=function(I){x(I);const D=this._baseState;return x(D.use===null),D.use=I,this},T.prototype.optional=function(){const I=this._baseState;return I.optional=!0,this},T.prototype.def=function(I){const D=this._baseState;return x(D.default===null),D.default=I,D.optional=!0,this},T.prototype.explicit=function(I){const D=this._baseState;return x(D.explicit===null&&D.implicit===null),D.explicit=I,this},T.prototype.implicit=function(I){const D=this._baseState;return x(D.explicit===null&&D.implicit===null),D.implicit=I,this},T.prototype.obj=function(){const I=this._baseState,D=Array.prototype.slice.call(arguments);return I.obj=!0,D.length!==0&&this._useArgs(D),this},T.prototype.key=function(I){const D=this._baseState;return x(D.key===null),D.key=I,this},T.prototype.any=function(){const I=this._baseState;return I.any=!0,this},T.prototype.choice=function(I){const D=this._baseState;return x(D.choice===null),D.choice=I,this._useArgs(Object.keys(I).map(function(M){return I[M]})),this},T.prototype.contains=function(I){const D=this._baseState;return x(D.use===null),D.contains=I,this},T.prototype._decode=function(I,D){const M=this._baseState;if(M.parent===null)return I.wrapResult(M.children[0]._decode(I,D));let V=M.default,L=!0,F=null;if(M.key!==null&&(F=I.enterKey(M.key)),M.optional){let U=null;if(M.explicit!==null?U=M.explicit:M.implicit!==null?U=M.implicit:M.tag!==null&&(U=M.tag),U===null&&!M.any){const H=I.save();try{M.choice===null?this._decodeGeneric(M.tag,I,D):this._decodeChoice(I,D),L=!0}catch{L=!1}I.restore(H)}else if(L=this._peekTag(I,U,M.any),I.isError(L))return L}let j;if(M.obj&&L&&(j=I.enterObject()),L){if(M.explicit!==null){const H=this._decodeTag(I,M.explicit);if(I.isError(H))return H;I=H}const U=I.offset;if(M.use===null&&M.choice===null){let H;M.any&&(H=I.save());const Y=this._decodeTag(I,M.implicit!==null?M.implicit:M.tag,M.any);if(I.isError(Y))return Y;M.any?V=I.raw(H):I=Y}if(D&&D.track&&M.tag!==null&&D.track(I.path(),U,I.length,"tagged"),D&&D.track&&M.tag!==null&&D.track(I.path(),I.offset,I.length,"content"),M.any||(M.choice===null?V=this._decodeGeneric(M.tag,I,D):V=this._decodeChoice(I,D)),I.isError(V))return V;if(!M.any&&M.choice===null&&M.children!==null&&M.children.forEach(function(Y){Y._decode(I,D)}),M.contains&&(M.tag==="octstr"||M.tag==="bitstr")){const H=new _(V);V=this._getUse(M.contains,I._reporterState.obj)._decode(H,D)}}return M.obj&&L&&(V=I.leaveObject(j)),M.key!==null&&(V!==null||L===!0)?I.leaveKey(F,M.key,V):F!==null&&I.exitKey(F),V},T.prototype._decodeGeneric=function(I,D,M){const V=this._baseState;return I==="seq"||I==="set"?null:I==="seqof"||I==="setof"?this._decodeList(D,I,V.args[0],M):/str$/.test(I)?this._decodeStr(D,I,M):I==="objid"&&V.args?this._decodeObjid(D,V.args[0],V.args[1],M):I==="objid"?this._decodeObjid(D,null,null,M):I==="gentime"||I==="utctime"?this._decodeTime(D,I,M):I==="null_"?this._decodeNull(D,M):I==="bool"?this._decodeBool(D,M):I==="objDesc"?this._decodeStr(D,I,M):I==="int"||I==="enum"?this._decodeInt(D,V.args&&V.args[0],M):V.use!==null?this._getUse(V.use,D._reporterState.obj)._decode(D,M):D.error("unknown tag: "+I)},T.prototype._getUse=function(I,D){const M=this._baseState;return M.useDecoder=this._use(I,D),x(M.useDecoder._baseState.parent===null),M.useDecoder=M.useDecoder._baseState.children[0],M.implicit!==M.useDecoder._baseState.implicit&&(M.useDecoder=M.useDecoder.clone(),M.useDecoder._baseState.implicit=M.implicit),M.useDecoder},T.prototype._decodeChoice=function(I,D){const M=this._baseState;let V=null,L=!1;return Object.keys(M.choice).some(function(F){const j=I.save(),U=M.choice[F];try{const H=U._decode(I,D);if(I.isError(H))return!1;V={type:F,value:H},L=!0}catch{return I.restore(j),!1}return!0},this),L?V:I.error("Choice not matched")},T.prototype._createEncoderBuffer=function(I){return new n(I,this.reporter)},T.prototype._encode=function(I,D,M){const V=this._baseState;if(V.default!==null&&V.default===I)return;const L=this._encodeValue(I,D,M);if(L!==void 0&&!this._skipDefault(L,D,M))return L},T.prototype._encodeValue=function(I,D,M){const V=this._baseState;if(V.parent===null)return V.children[0]._encode(I,D||new t);let L=null;if(this.reporter=D,V.optional&&I===void 0)if(V.default!==null)I=V.default;else return;let F=null,j=!1;if(V.any)L=this._createEncoderBuffer(I);else if(V.choice)L=this._encodeChoice(I,D);else if(V.contains)F=this._getUse(V.contains,M)._encode(I,D),j=!0;else if(V.children)F=V.children.map(function(U){if(U._baseState.tag==="null_")return U._encode(null,D,I);if(U._baseState.key===null)return D.error("Child should have a key");const H=D.enterKey(U._baseState.key);if(typeof I!="object")return D.error("Child expected, but input is not object");const Y=U._encode(I[U._baseState.key],D,I);return D.leaveKey(H),Y},this).filter(function(U){return U}),F=this._createEncoderBuffer(F);else if(V.tag==="seqof"||V.tag==="setof"){if(!(V.args&&V.args.length===1))return D.error("Too many args for : "+V.tag);if(!Array.isArray(I))return D.error("seqof/setof, but data is not Array");const U=this.clone();U._baseState.implicit=null,F=this._createEncoderBuffer(I.map(function(H){const Y=this._baseState;return this._getUse(Y.args[0],I)._encode(H,D)},U))}else V.use!==null?L=this._getUse(V.use,M)._encode(I,D):(F=this._encodePrimitive(V.tag,I),j=!0);if(!V.any&&V.choice===null){const U=V.implicit!==null?V.implicit:V.tag,H=V.implicit===null?"universal":"context";U===null?V.use===null&&D.error("Tag could be omitted only for .use()"):V.use===null&&(L=this._encodeComposite(U,j,H,F))}return V.explicit!==null&&(L=this._encodeComposite(V.explicit,!1,"context",L)),L},T.prototype._encodeChoice=function(I,D){const M=this._baseState,V=M.choice[I.type];return V||x(!1,I.type+" not found in "+JSON.stringify(Object.keys(M.choice))),V._encode(I.value,D)},T.prototype._encodePrimitive=function(I,D){const M=this._baseState;if(/str$/.test(I))return this._encodeStr(D,I);if(I==="objid"&&M.args)return this._encodeObjid(D,M.reverseArgs[0],M.args[1]);if(I==="objid")return this._encodeObjid(D,null,null);if(I==="gentime"||I==="utctime")return this._encodeTime(D,I);if(I==="null_")return this._encodeNull();if(I==="int"||I==="enum")return this._encodeInt(D,M.args&&M.reverseArgs[0]);if(I==="bool")return this._encodeBool(D);if(I==="objDesc")return this._encodeStr(D,I);throw new Error("Unsupported tag: "+I)},T.prototype._isNumstr=function(I){return/^[0-9 ]*$/.test(I)},T.prototype._isPrintstr=function(I){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(I)},node$1}var der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(t){function n(_){const x={};return Object.keys(_).forEach(function(E){(E|0)==E&&(E=E|0);const S=_[E];x[S]=E}),x}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=n(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=n(t.tag)}(der)),der}var der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;const t=inherits_browserExports,n=requireSafer().Buffer,_=requireNode(),x=requireDer$2();function E(B){this.enc="der",this.name=B.name,this.entity=B,this.tree=new S,this.tree._init(B.body)}der_1$1=E,E.prototype.encode=function(A,I){return this.tree._encode(A,I).join()};function S(B){_.call(this,"der",B)}t(S,_),S.prototype._encodeComposite=function(A,I,D,M){const V=T(A,I,D,this.reporter);if(M.length<128){const j=n.alloc(2);return j[0]=V,j[1]=M.length,this._createEncoderBuffer([j,M])}let L=1;for(let j=M.length;j>=256;j>>=8)L++;const F=n.alloc(1+1+L);F[0]=V,F[1]=128|L;for(let j=1+L,U=M.length;U>0;j--,U>>=8)F[j]=U&255;return this._createEncoderBuffer([F,M])},S.prototype._encodeStr=function(A,I){if(I==="bitstr")return this._createEncoderBuffer([A.unused|0,A.data]);if(I==="bmpstr"){const D=n.alloc(A.length*2);for(let M=0;M<A.length;M++)D.writeUInt16BE(A.charCodeAt(M),M*2);return this._createEncoderBuffer(D)}else return I==="numstr"?this._isNumstr(A)?this._createEncoderBuffer(A):this.reporter.error("Encoding of string type: numstr supports only digits and space"):I==="printstr"?this._isPrintstr(A)?this._createEncoderBuffer(A):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(I)?this._createEncoderBuffer(A):I==="objDesc"?this._createEncoderBuffer(A):this.reporter.error("Encoding of string type: "+I+" unsupported")},S.prototype._encodeObjid=function(A,I,D){if(typeof A=="string"){if(!I)return this.reporter.error("string objid given, but no values map found");if(!I.hasOwnProperty(A))return this.reporter.error("objid not found in values map");A=I[A].split(/[\s.]+/g);for(let F=0;F<A.length;F++)A[F]|=0}else if(Array.isArray(A)){A=A.slice();for(let F=0;F<A.length;F++)A[F]|=0}if(!Array.isArray(A))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(A));if(!D){if(A[1]>=40)return this.reporter.error("Second objid identifier OOB");A.splice(0,2,A[0]*40+A[1])}let M=0;for(let F=0;F<A.length;F++){let j=A[F];for(M++;j>=128;j>>=7)M++}const V=n.alloc(M);let L=V.length-1;for(let F=A.length-1;F>=0;F--){let j=A[F];for(V[L--]=j&127;(j>>=7)>0;)V[L--]=128|j&127}return this._createEncoderBuffer(V)};function C(B){return B<10?"0"+B:B}S.prototype._encodeTime=function(A,I){let D;const M=new Date(A);return I==="gentime"?D=[C(M.getUTCFullYear()),C(M.getUTCMonth()+1),C(M.getUTCDate()),C(M.getUTCHours()),C(M.getUTCMinutes()),C(M.getUTCSeconds()),"Z"].join(""):I==="utctime"?D=[C(M.getUTCFullYear()%100),C(M.getUTCMonth()+1),C(M.getUTCDate()),C(M.getUTCHours()),C(M.getUTCMinutes()),C(M.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+I+" time is not supported yet"),this._encodeStr(D,"octstr")},S.prototype._encodeNull=function(){return this._createEncoderBuffer("")},S.prototype._encodeInt=function(A,I){if(typeof A=="string"){if(!I)return this.reporter.error("String int or enum given, but no values map");if(!I.hasOwnProperty(A))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(A));A=I[A]}if(typeof A!="number"&&!n.isBuffer(A)){const V=A.toArray();!A.sign&&V[0]&128&&V.unshift(0),A=n.from(V)}if(n.isBuffer(A)){let V=A.length;A.length===0&&V++;const L=n.alloc(V);return A.copy(L),A.length===0&&(L[0]=0),this._createEncoderBuffer(L)}if(A<128)return this._createEncoderBuffer(A);if(A<256)return this._createEncoderBuffer([0,A]);let D=1;for(let V=A;V>=256;V>>=8)D++;const M=new Array(D);for(let V=M.length-1;V>=0;V--)M[V]=A&255,A>>=8;return M[0]&128&&M.unshift(0),this._createEncoderBuffer(n.from(M))},S.prototype._encodeBool=function(A){return this._createEncoderBuffer(A?255:0)},S.prototype._use=function(A,I){return typeof A=="function"&&(A=A(I)),A._getEncoder("der").tree},S.prototype._skipDefault=function(A,I,D){const M=this._baseState;let V;if(M.default===null)return!1;const L=A.join();if(M.defaultBuffer===void 0&&(M.defaultBuffer=this._encodeValue(M.default,I,D).join()),L.length!==M.defaultBuffer.length)return!1;for(V=0;V<L.length;V++)if(L[V]!==M.defaultBuffer[V])return!1;return!0};function T(B,A,I,D){let M;if(B==="seqof"?B="seq":B==="setof"&&(B="set"),x.tagByName.hasOwnProperty(B))M=x.tagByName[B];else if(typeof B=="number"&&(B|0)===B)M=B;else return D.error("Unknown tag: "+B);return M>=31?D.error("Multi-octet tag encoding unsupported"):(A||(M|=32),M|=x.tagClassByName[I||"universal"]<<6,M)}return der_1$1}var pem$2,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$2;hasRequiredPem$1=1;const t=inherits_browserExports,n=requireDer$1();function _(x){n.call(this,x),this.enc="pem"}return t(_,n),pem$2=_,_.prototype.encode=function(E,S){const T=n.prototype.encode.call(this,E).toString("base64"),B=["-----BEGIN "+S.label+"-----"];for(let A=0;A<T.length;A+=64)B.push(T.slice(A,A+64));return B.push("-----END "+S.label+"-----"),B.join(`
`)},pem$2}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(t){const n=t;n.der=requireDer$1(),n.pem=requirePem$1()}(encoders)),encoders}var decoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;const t=inherits_browserExports,n=bnExports$2,_=requireBuffer().DecoderBuffer,x=requireNode(),E=requireDer$2();function S(A){this.enc="der",this.name=A.name,this.entity=A,this.tree=new C,this.tree._init(A.body)}der_1=S,S.prototype.decode=function(I,D){return _.isDecoderBuffer(I)||(I=new _(I,D)),this.tree._decode(I,D)};function C(A){x.call(this,"der",A)}t(C,x),C.prototype._peekTag=function(I,D,M){if(I.isEmpty())return!1;const V=I.save(),L=T(I,'Failed to peek tag: "'+D+'"');return I.isError(L)?L:(I.restore(V),L.tag===D||L.tagStr===D||L.tagStr+"of"===D||M)},C.prototype._decodeTag=function(I,D,M){const V=T(I,'Failed to decode tag of "'+D+'"');if(I.isError(V))return V;let L=B(I,V.primitive,'Failed to get length of "'+D+'"');if(I.isError(L))return L;if(!M&&V.tag!==D&&V.tagStr!==D&&V.tagStr+"of"!==D)return I.error('Failed to match tag: "'+D+'"');if(V.primitive||L!==null)return I.skip(L,'Failed to match body of: "'+D+'"');const F=I.save(),j=this._skipUntilEnd(I,'Failed to skip indefinite length body: "'+this.tag+'"');return I.isError(j)?j:(L=I.offset-F.offset,I.restore(F),I.skip(L,'Failed to match body of: "'+D+'"'))},C.prototype._skipUntilEnd=function(I,D){for(;;){const M=T(I,D);if(I.isError(M))return M;const V=B(I,M.primitive,D);if(I.isError(V))return V;let L;if(M.primitive||V!==null?L=I.skip(V):L=this._skipUntilEnd(I,D),I.isError(L))return L;if(M.tagStr==="end")break}},C.prototype._decodeList=function(I,D,M,V){const L=[];for(;!I.isEmpty();){const F=this._peekTag(I,"end");if(I.isError(F))return F;const j=M.decode(I,"der",V);if(I.isError(j)&&F)break;L.push(j)}return L},C.prototype._decodeStr=function(I,D){if(D==="bitstr"){const M=I.readUInt8();return I.isError(M)?M:{unused:M,data:I.raw()}}else if(D==="bmpstr"){const M=I.raw();if(M.length%2===1)return I.error("Decoding of string type: bmpstr length mismatch");let V="";for(let L=0;L<M.length/2;L++)V+=String.fromCharCode(M.readUInt16BE(L*2));return V}else if(D==="numstr"){const M=I.raw().toString("ascii");return this._isNumstr(M)?M:I.error("Decoding of string type: numstr unsupported characters")}else{if(D==="octstr")return I.raw();if(D==="objDesc")return I.raw();if(D==="printstr"){const M=I.raw().toString("ascii");return this._isPrintstr(M)?M:I.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(D)?I.raw().toString():I.error("Decoding of string type: "+D+" unsupported")}},C.prototype._decodeObjid=function(I,D,M){let V;const L=[];let F=0,j=0;for(;!I.isEmpty();)j=I.readUInt8(),F<<=7,F|=j&127,j&128||(L.push(F),F=0);j&128&&L.push(F);const U=L[0]/40|0,H=L[0]%40;if(M?V=L:V=[U,H].concat(L.slice(1)),D){let Y=D[V.join(" ")];Y===void 0&&(Y=D[V.join(".")]),Y!==void 0&&(V=Y)}return V},C.prototype._decodeTime=function(I,D){const M=I.raw().toString();let V,L,F,j,U,H;if(D==="gentime")V=M.slice(0,4)|0,L=M.slice(4,6)|0,F=M.slice(6,8)|0,j=M.slice(8,10)|0,U=M.slice(10,12)|0,H=M.slice(12,14)|0;else if(D==="utctime")V=M.slice(0,2)|0,L=M.slice(2,4)|0,F=M.slice(4,6)|0,j=M.slice(6,8)|0,U=M.slice(8,10)|0,H=M.slice(10,12)|0,V<70?V=2e3+V:V=1900+V;else return I.error("Decoding "+D+" time is not supported yet");return Date.UTC(V,L-1,F,j,U,H,0)},C.prototype._decodeNull=function(){return null},C.prototype._decodeBool=function(I){const D=I.readUInt8();return I.isError(D)?D:D!==0},C.prototype._decodeInt=function(I,D){const M=I.raw();let V=new n(M);return D&&(V=D[V.toString(10)]||V),V},C.prototype._use=function(I,D){return typeof I=="function"&&(I=I(D)),I._getDecoder("der").tree};function T(A,I){let D=A.readUInt8(I);if(A.isError(D))return D;const M=E.tagClass[D>>6],V=(D&32)===0;if((D&31)===31){let F=D;for(D=0;(F&128)===128;){if(F=A.readUInt8(I),A.isError(F))return F;D<<=7,D|=F&127}}else D&=31;const L=E.tag[D];return{cls:M,primitive:V,tag:D,tagStr:L}}function B(A,I,D){let M=A.readUInt8(D);if(A.isError(M))return M;if(!I&&M===128)return null;if(!(M&128))return M;const V=M&127;if(V>4)return A.error("length octect is too long");M=0;for(let L=0;L<V;L++){M<<=8;const F=A.readUInt8(D);if(A.isError(F))return F;M|=F}return M}return der_1}var pem$1,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem$1;hasRequiredPem=1;const t=inherits_browserExports,n=requireSafer().Buffer,_=requireDer();function x(E){_.call(this,E),this.enc="pem"}return t(x,_),pem$1=x,x.prototype.decode=function(S,C){const T=S.toString().split(/[\r\n]+/g),B=C.label.toUpperCase(),A=/^-----(BEGIN|END) ([^-]+)-----$/;let I=-1,D=-1;for(let L=0;L<T.length;L++){const F=T[L].match(A);if(F!==null&&F[2]===B)if(I===-1){if(F[1]!=="BEGIN")break;I=L}else{if(F[1]!=="END")break;D=L;break}}if(I===-1||D===-1)throw new Error("PEM section not found for: "+B);const M=T.slice(I+1,D).join("");M.replace(/[^a-z0-9+/=]+/gi,"");const V=n.from(M,"base64");return _.prototype.decode.call(this,V,C)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(t){const n=t;n.der=requireDer(),n.pem=requirePem()}(decoders)),decoders}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(t){const n=requireEncoders(),_=requireDecoders(),x=inherits_browserExports,E=t;E.define=function(T,B){return new S(T,B)};function S(C,T){this.name=C,this.body=T,this.decoders={},this.encoders={}}S.prototype._createNamed=function(T){const B=this.name;function A(I){this._initNamed(I,B)}return x(A,T),A.prototype._initNamed=function(D,M){T.call(this,D,M)},new A(this)},S.prototype._getDecoder=function(T){return T=T||"der",this.decoders.hasOwnProperty(T)||(this.decoders[T]=this._createNamed(_[T])),this.decoders[T]},S.prototype.decode=function(T,B,A){return this._getDecoder(B).decode(T,A)},S.prototype._getEncoder=function(T){return T=T||"der",this.encoders.hasOwnProperty(T)||(this.encoders[T]=this._createNamed(n[T])),this.encoders[T]},S.prototype.encode=function(T,B,A){return this._getEncoder(B).encode(T,A)}}(api$1)),api$1}var base$2={},hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(t){const n=t;n.Reporter=requireReporter().Reporter,n.DecoderBuffer=requireBuffer().DecoderBuffer,n.EncoderBuffer=requireBuffer().EncoderBuffer,n.Node=requireNode()}(base$2)),base$2}var constants={},hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(t){const n=t;n._reverse=function(x){const E={};return Object.keys(x).forEach(function(S){(S|0)==S&&(S=S|0);const C=x[S];E[C]=S}),E},n.der=requireDer$2()}(constants)),constants}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(t){const n=t;n.bignum=bnExports$2,n.define=requireApi().define,n.base=requireBase(),n.constants=requireConstants(),n.decoders=requireDecoders(),n.encoders=requireEncoders()}(asn1$2)),asn1$2}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var t=requireAsn1$1(),n=t.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),_=t.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),x=t.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),E=t.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(x),this.key("subjectPublicKey").bitstr())}),S=t.define("RelativeDistinguishedName",function(){this.setof(_)}),C=t.define("RDNSequence",function(){this.seqof(S)}),T=t.define("Name",function(){this.choice({rdnSequence:this.use(C)})}),B=t.define("Validity",function(){this.seq().obj(this.key("notBefore").use(n),this.key("notAfter").use(n))}),A=t.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),I=t.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(x),this.key("issuer").use(T),this.key("validity").use(B),this.key("subject").use(T),this.key("subjectPublicKeyInfo").use(E),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(A).optional())}),D=t.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(I),this.key("signatureAlgorithm").use(x),this.key("signatureValue").bitstr())});return certificate=D,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$3;hasRequiredAsn1=1;var t=requireAsn1$1();asn1$3.certificate=requireCertificate();var n=t.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$3.RSAPrivateKey=n;var _=t.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$3.RSAPublicKey=_;var x=t.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(E),this.key("subjectPublicKey").bitstr())});asn1$3.PublicKey=x;var E=t.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),S=t.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(E),this.key("subjectPrivateKey").octstr())});asn1$3.PrivateKey=S;var C=t.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$3.EncryptedPrivateKey=C;var T=t.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$3.DSAPrivateKey=T,asn1$3.DSAparam=t.define("DSAparam",function(){this.int()});var B=t.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(A),this.key("publicKey").optional().explicit(1).bitstr())});asn1$3.ECPrivateKey=B;var A=t.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});return asn1$3.signature=t.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$3}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var t=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,_=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,x=requireEvp_bytestokey(),E=requireBrowser$6(),S=safeBufferExports.Buffer;return fixProc=function(C,T){var B=C.toString(),A=B.match(t),I;if(A){var M="aes"+A[1],V=S.from(A[2],"hex"),L=S.from(A[3].replace(/[\r\n]/g,""),"base64"),F=x(T,V.slice(0,8),parseInt(A[1],10)).key,j=[],U=E.createDecipheriv(M,F,V);j.push(U.update(L)),j.push(U.final()),I=S.concat(j)}else{var D=B.match(_);I=S.from(D[2].replace(/[\r\n]/g,""),"base64")}var H=B.match(n)[1];return{tag:H,data:I}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var t=requireAsn1(),n=require$$1,_=requireFixProc(),x=requireBrowser$6(),E=requireBrowser$7(),S=safeBufferExports.Buffer;parseAsn1=C;function C(B){var A;typeof B=="object"&&!S.isBuffer(B)&&(A=B.passphrase,B=B.key),typeof B=="string"&&(B=S.from(B));var I=_(B,A),D=I.tag,M=I.data,V,L;switch(D){case"CERTIFICATE":L=t.certificate.decode(M,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(L||(L=t.PublicKey.decode(M,"der")),V=L.algorithm.algorithm.join("."),V){case"1.2.840.113549.1.1.1":return t.RSAPublicKey.decode(L.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return L.subjectPrivateKey=L.subjectPublicKey,{type:"ec",data:L};case"1.2.840.10040.4.1":return L.algorithm.params.pub_key=t.DSAparam.decode(L.subjectPublicKey.data,"der"),{type:"dsa",data:L.algorithm.params};default:throw new Error("unknown key id "+V)}case"ENCRYPTED PRIVATE KEY":M=t.EncryptedPrivateKey.decode(M,"der"),M=T(M,A);case"PRIVATE KEY":switch(L=t.PrivateKey.decode(M,"der"),V=L.algorithm.algorithm.join("."),V){case"1.2.840.113549.1.1.1":return t.RSAPrivateKey.decode(L.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:L.algorithm.curve,privateKey:t.ECPrivateKey.decode(L.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return L.algorithm.params.priv_key=t.DSAparam.decode(L.subjectPrivateKey,"der"),{type:"dsa",params:L.algorithm.params};default:throw new Error("unknown key id "+V)}case"RSA PUBLIC KEY":return t.RSAPublicKey.decode(M,"der");case"RSA PRIVATE KEY":return t.RSAPrivateKey.decode(M,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:t.DSAPrivateKey.decode(M,"der")};case"EC PRIVATE KEY":return M=t.ECPrivateKey.decode(M,"der"),{curve:M.parameters.value,privateKey:M.privateKey};default:throw new Error("unknown key type "+D)}}C.signature=t.signature;function T(B,A){var I=B.algorithm.decrypt.kde.kdeparams.salt,D=parseInt(B.algorithm.decrypt.kde.kdeparams.iters.toString(),10),M=n[B.algorithm.decrypt.cipher.algo.join(".")],V=B.algorithm.decrypt.cipher.iv,L=B.subjectPrivateKey,F=parseInt(M.split("-")[1],10)/8,j=E.pbkdf2Sync(A,I,D,F,"sha1"),U=x.createDecipheriv(M,j,V),H=[];return H.push(U.update(L)),H.push(U.final()),S.concat(H)}return parseAsn1}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$2.exports;hasRequiredSign=1;var t=safeBufferExports.Buffer,n=requireBrowser$8(),_=requireBrowserifyRsa(),x=requireElliptic().ec,E=requireBn(),S=requireParseAsn1(),C=require$$4;function T(j,U,H,Y,Z){var ne=S(U);if(ne.curve){if(Y!=="ecdsa"&&Y!=="ecdsa/rsa")throw new Error("wrong private key type");return B(j,ne)}else if(ne.type==="dsa"){if(Y!=="dsa")throw new Error("wrong private key type");return A(j,ne,H)}else if(Y!=="rsa"&&Y!=="ecdsa/rsa")throw new Error("wrong private key type");j=t.concat([Z,j]);for(var re=ne.modulus.byteLength(),X=[0,1];j.length+X.length+1<re;)X.push(255);X.push(0);for(var ce=-1;++ce<j.length;)X.push(j[ce]);var ue=_(X,ne);return ue}function B(j,U){var H=C[U.curve.join(".")];if(!H)throw new Error("unknown curve "+U.curve.join("."));var Y=new x(H),Z=Y.keyFromPrivate(U.privateKey),ne=Z.sign(j);return t.from(ne.toDER())}function A(j,U,H){for(var Y=U.params.priv_key,Z=U.params.p,ne=U.params.q,re=U.params.g,X=new E(0),ce,ue=M(j,ne).mod(ne),_e=!1,ye=D(Y,ne,j,H);_e===!1;)ce=L(ne,ye,H),X=F(re,ce,Z,ne),_e=ce.invm(ne).imul(ue.add(Y.mul(X))).mod(ne),_e.cmpn(0)===0&&(_e=!1,X=new E(0));return I(X,_e)}function I(j,U){j=j.toArray(),U=U.toArray(),j[0]&128&&(j=[0].concat(j)),U[0]&128&&(U=[0].concat(U));var H=j.length+U.length+4,Y=[48,H,2,j.length];return Y=Y.concat(j,[2,U.length],U),t.from(Y)}function D(j,U,H,Y){if(j=t.from(j.toArray()),j.length<U.byteLength()){var Z=t.alloc(U.byteLength()-j.length);j=t.concat([Z,j])}var ne=H.length,re=V(H,U),X=t.alloc(ne);X.fill(1);var ce=t.alloc(ne);return ce=n(Y,ce).update(X).update(t.from([0])).update(j).update(re).digest(),X=n(Y,ce).update(X).digest(),ce=n(Y,ce).update(X).update(t.from([1])).update(j).update(re).digest(),X=n(Y,ce).update(X).digest(),{k:ce,v:X}}function M(j,U){var H=new E(j),Y=(j.length<<3)-U.bitLength();return Y>0&&H.ishrn(Y),H}function V(j,U){j=M(j,U),j=j.mod(U);var H=t.from(j.toArray());if(H.length<U.byteLength()){var Y=t.alloc(U.byteLength()-H.length);H=t.concat([Y,H])}return H}function L(j,U,H){var Y,Z;do{for(Y=t.alloc(0);Y.length*8<j.bitLength();)U.v=n(H,U.k).update(U.v).digest(),Y=t.concat([Y,U.v]);Z=M(Y,j),U.k=n(H,U.k).update(U.v).update(t.from([0])).digest(),U.v=n(H,U.k).update(U.v).digest()}while(Z.cmp(j)!==-1);return Z}function F(j,U,H,Y){return j.toRed(E.mont(H)).redPow(U).fromRed().mod(Y)}return sign$2.exports=T,sign$2.exports.getKey=D,sign$2.exports.makeKey=L,sign$2.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var t=safeBufferExports.Buffer,n=requireBn(),_=requireElliptic().ec,x=requireParseAsn1(),E=require$$4;function S(A,I,D,M,V){var L=x(D);if(L.type==="ec"){if(M!=="ecdsa"&&M!=="ecdsa/rsa")throw new Error("wrong public key type");return C(A,I,L)}else if(L.type==="dsa"){if(M!=="dsa")throw new Error("wrong public key type");return T(A,I,L)}else if(M!=="rsa"&&M!=="ecdsa/rsa")throw new Error("wrong public key type");I=t.concat([V,I]);for(var F=L.modulus.byteLength(),j=[1],U=0;I.length+j.length+2<F;)j.push(255),U++;j.push(0);for(var H=-1;++H<I.length;)j.push(I[H]);j=t.from(j);var Y=n.mont(L.modulus);A=new n(A).toRed(Y),A=A.redPow(new n(L.publicExponent)),A=t.from(A.fromRed().toArray());var Z=U<8?1:0;for(F=Math.min(A.length,j.length),A.length!==j.length&&(Z=1),H=-1;++H<F;)Z|=A[H]^j[H];return Z===0}function C(A,I,D){var M=E[D.data.algorithm.curve.join(".")];if(!M)throw new Error("unknown curve "+D.data.algorithm.curve.join("."));var V=new _(M),L=D.data.subjectPrivateKey.data;return V.verify(I,A,L)}function T(A,I,D){var M=D.data.p,V=D.data.q,L=D.data.g,F=D.data.pub_key,j=x.signature.decode(A,"der"),U=j.s,H=j.r;B(U,V),B(H,V);var Y=n.mont(M),Z=U.invm(V),ne=L.toRed(Y).redPow(new n(I).mul(Z).mod(V)).fromRed().mul(F.toRed(Y).redPow(H.mul(Z).mod(V)).fromRed()).mod(M).mod(V);return ne.cmp(H)===0}function B(A,I){if(A.cmpn(0)<=0)throw new Error("invalid sig");if(A.cmp(I)>=I)throw new Error("invalid sig")}return verify_1=S,verify_1}var browser$6,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$6;hasRequiredBrowser$3=1;var t=safeBufferExports.Buffer,n=requireBrowser$9(),_=requireReadableBrowser(),x=inherits_browserExports,E=requireSign(),S=requireVerify(),C=require$$6;Object.keys(C).forEach(function(D){C[D].id=t.from(C[D].id,"hex"),C[D.toLowerCase()]=C[D]});function T(D){_.Writable.call(this);var M=C[D];if(!M)throw new Error("Unknown message digest");this._hashType=M.hash,this._hash=n(M.hash),this._tag=M.id,this._signType=M.sign}x(T,_.Writable),T.prototype._write=function(M,V,L){this._hash.update(M),L()},T.prototype.update=function(M,V){return typeof M=="string"&&(M=t.from(M,V)),this._hash.update(M),this},T.prototype.sign=function(M,V){this.end();var L=this._hash.digest(),F=E(L,M,this._hashType,this._signType,this._tag);return V?F.toString(V):F};function B(D){_.Writable.call(this);var M=C[D];if(!M)throw new Error("Unknown message digest");this._hash=n(M.hash),this._tag=M.id,this._signType=M.sign}x(B,_.Writable),B.prototype._write=function(M,V,L){this._hash.update(M),L()},B.prototype.update=function(M,V){return typeof M=="string"&&(M=t.from(M,V)),this._hash.update(M),this},B.prototype.verify=function(M,V,L){typeof V=="string"&&(V=t.from(V,L)),this.end();var F=this._hash.digest();return S(V,F,M,this._signType,this._tag)};function A(D){return new T(D)}function I(D){return new B(D)}return browser$6={Sign:A,Verify:I,createSign:A,createVerify:I},browser$6}var browser$5,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$5;hasRequiredBrowser$2=1;var t=requireElliptic(),n=bnExports$2;browser$5=function(C){return new x(C)};var _={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};_.p224=_.secp224r1,_.p256=_.secp256r1=_.prime256v1,_.p192=_.secp192r1=_.prime192v1,_.p384=_.secp384r1,_.p521=_.secp521r1;function x(S){this.curveType=_[S],this.curveType||(this.curveType={name:S}),this.curve=new t.ec(this.curveType.name),this.keys=void 0}x.prototype.generateKeys=function(S,C){return this.keys=this.curve.genKeyPair(),this.getPublicKey(S,C)},x.prototype.computeSecret=function(S,C,T){C=C||"utf8",Buffer$5.isBuffer(S)||(S=new Buffer$5(S,C));var B=this.curve.keyFromPublic(S).getPublic(),A=B.mul(this.keys.getPrivate()).getX();return E(A,T,this.curveType.byteLength)},x.prototype.getPublicKey=function(S,C){var T=this.keys.getPublic(C==="compressed",!0);return C==="hybrid"&&(T[T.length-1]%2?T[0]=7:T[0]=6),E(T,S)},x.prototype.getPrivateKey=function(S){return E(this.keys.getPrivate(),S)},x.prototype.setPublicKey=function(S,C){return C=C||"utf8",Buffer$5.isBuffer(S)||(S=new Buffer$5(S,C)),this.keys._importPublic(S),this},x.prototype.setPrivateKey=function(S,C){C=C||"utf8",Buffer$5.isBuffer(S)||(S=new Buffer$5(S,C));var T=new n(S);return T=T.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(T),this};function E(S,C,T){Array.isArray(S)||(S=S.toArray());var B=new Buffer$5(S);if(T&&B.length<T){var A=new Buffer$5(T-B.length);A.fill(0),B=Buffer$5.concat([A,B])}return C?B.toString(C):B}return browser$5}var browser$4={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var t=requireBrowser$9(),n=safeBufferExports.Buffer;mgf=function(x,E){for(var S=n.alloc(0),C=0,T;S.length<E;)T=_(C++),S=n.concat([S,t("sha1").update(x).update(T).digest()]);return S.slice(0,E)};function _(x){var E=n.allocUnsafe(4);return E.writeUInt32BE(x,0),E}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function(n,_){for(var x=n.length,E=-1;++E<x;)n[E]^=_[E];return n}),xor}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var t=bnExports$2,n=safeBufferExports.Buffer;function _(x,E){return n.from(x.toRed(t.mont(E.modulus)).redPow(new t(E.publicExponent)).fromRed().toArray())}return withPublic_1=_,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var t=requireParseAsn1(),n=requireBrowser$b(),_=requireBrowser$9(),x=requireMgf(),E=requireXor(),S=bnExports$2,C=requireWithPublic(),T=requireBrowserifyRsa(),B=safeBufferExports.Buffer;publicEncrypt=function(V,L,F){var j;V.padding?j=V.padding:F?j=1:j=4;var U=t(V),H;if(j===4)H=A(U,L);else if(j===1)H=I(U,L,F);else if(j===3){if(H=new S(L),H.cmp(U.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return F?T(H,U):C(H,U)};function A(M,V){var L=M.modulus.byteLength(),F=V.length,j=_("sha1").update(B.alloc(0)).digest(),U=j.length,H=2*U;if(F>L-H-2)throw new Error("message too long");var Y=B.alloc(L-F-H-2),Z=L-U-1,ne=n(U),re=E(B.concat([j,Y,B.alloc(1,1),V],Z),x(ne,Z)),X=E(ne,x(re,U));return new S(B.concat([B.alloc(1),X,re],L))}function I(M,V,L){var F=V.length,j=M.modulus.byteLength();if(F>j-11)throw new Error("message too long");var U;return L?U=B.alloc(j-F-3,255):U=D(j-F-3),new S(B.concat([B.from([0,L?1:2]),U,B.alloc(1),V],j))}function D(M){for(var V=B.allocUnsafe(M),L=0,F=n(M*2),j=0,U;L<M;)j===F.length&&(F=n(M*2),j=0),U=F[j++],U&&(V[L++]=U);return V}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var t=requireParseAsn1(),n=requireMgf(),_=requireXor(),x=bnExports$2,E=requireBrowserifyRsa(),S=requireBrowser$9(),C=requireWithPublic(),T=safeBufferExports.Buffer;privateDecrypt=function(M,V,L){var F;M.padding?F=M.padding:L?F=1:F=4;var j=t(M),U=j.modulus.byteLength();if(V.length>U||new x(V).cmp(j.modulus)>=0)throw new Error("decryption error");var H;L?H=C(new x(V),j):H=E(V,j);var Y=T.alloc(U-H.length);if(H=T.concat([Y,H],U),F===4)return B(j,H);if(F===1)return A(j,H,L);if(F===3)return H;throw new Error("unknown padding")};function B(D,M){var V=D.modulus.byteLength(),L=S("sha1").update(T.alloc(0)).digest(),F=L.length;if(M[0]!==0)throw new Error("decryption error");var j=M.slice(1,F+1),U=M.slice(F+1),H=_(j,n(U,F)),Y=_(U,n(H,V-F-1));if(I(L,Y.slice(0,F)))throw new Error("decryption error");for(var Z=F;Y[Z]===0;)Z++;if(Y[Z++]!==1)throw new Error("decryption error");return Y.slice(Z)}function A(D,M,V){for(var L=M.slice(0,2),F=2,j=0;M[F++]!==0;)if(F>=M.length){j++;break}var U=M.slice(2,F-1);if((L.toString("hex")!=="0002"&&!V||L.toString("hex")!=="0001"&&V)&&j++,U.length<8&&j++,j)throw new Error("decryption error");return M.slice(F)}function I(D,M){D=T.from(D),M=T.from(M);var V=0,L=D.length;D.length!==M.length&&(V++,L=Math.min(D.length,M.length));for(var F=-1;++F<L;)V+=D[F]^M[F];return V}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(t){t.publicEncrypt=requirePublicEncrypt(),t.privateDecrypt=requirePrivateDecrypt(),t.privateEncrypt=function(_,x){return t.publicEncrypt(_,x,!0)},t.publicDecrypt=function(_,x){return t.privateDecrypt(_,x,!0)}}(browser$4)),browser$4}var browser$3={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$3;hasRequiredBrowser=1;function t(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var n=safeBufferExports,_=requireBrowser$b(),x=n.Buffer,E=n.kMaxLength,S=commonjsGlobal.crypto||commonjsGlobal.msCrypto,C=Math.pow(2,32)-1;function T(M,V){if(typeof M!="number"||M!==M)throw new TypeError("offset must be a number");if(M>C||M<0)throw new TypeError("offset must be a uint32");if(M>E||M>V)throw new RangeError("offset out of range")}function B(M,V,L){if(typeof M!="number"||M!==M)throw new TypeError("size must be a number");if(M>C||M<0)throw new TypeError("size must be a uint32");if(M+V>L||M>E)throw new RangeError("buffer too small")}S&&S.getRandomValues||!browser$1$1.browser?(browser$3.randomFill=A,browser$3.randomFillSync=D):(browser$3.randomFill=t,browser$3.randomFillSync=t);function A(M,V,L,F){if(!x.isBuffer(M)&&!(M instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof V=="function")F=V,V=0,L=M.length;else if(typeof L=="function")F=L,L=M.length-V;else if(typeof F!="function")throw new TypeError('"cb" argument must be a function');return T(V,M.length),B(L,V,M.length),I(M,V,L,F)}function I(M,V,L,F){if(browser$1$1.browser){var j=M.buffer,U=new Uint8Array(j,V,L);if(S.getRandomValues(U),F){browser$1$1.nextTick(function(){F(null,M)});return}return M}if(F){_(L,function(Y,Z){if(Y)return F(Y);Z.copy(M,V),F(null,M)});return}var H=_(L);return H.copy(M,V),M}function D(M,V,L){if(typeof V>"u"&&(V=0),!x.isBuffer(M)&&!(M instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return T(V,M.length),L===void 0&&(L=M.length-V),B(L,V,M.length),I(M,V,L)}return browser$3}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$b(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var t=requireAlgos(),n=Object.keys(t),_=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(n);cryptoBrowserify.getHashes=function(){return _};var x=requireBrowser$7();cryptoBrowserify.pbkdf2=x.pbkdf2,cryptoBrowserify.pbkdf2Sync=x.pbkdf2Sync;var E=requireBrowser$5();cryptoBrowserify.Cipher=E.Cipher,cryptoBrowserify.createCipher=E.createCipher,cryptoBrowserify.Cipheriv=E.Cipheriv,cryptoBrowserify.createCipheriv=E.createCipheriv,cryptoBrowserify.Decipher=E.Decipher,cryptoBrowserify.createDecipher=E.createDecipher,cryptoBrowserify.Decipheriv=E.Decipheriv,cryptoBrowserify.createDecipheriv=E.createDecipheriv,cryptoBrowserify.getCiphers=E.getCiphers,cryptoBrowserify.listCiphers=E.listCiphers;var S=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=S.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=S.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=S.getDiffieHellman,cryptoBrowserify.createDiffieHellman=S.createDiffieHellman,cryptoBrowserify.DiffieHellman=S.DiffieHellman;var C=requireBrowser$3();cryptoBrowserify.createSign=C.createSign,cryptoBrowserify.Sign=C.Sign,cryptoBrowserify.createVerify=C.createVerify,cryptoBrowserify.Verify=C.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var T=requireBrowser$1();cryptoBrowserify.publicEncrypt=T.publicEncrypt,cryptoBrowserify.privateEncrypt=T.privateEncrypt,cryptoBrowserify.publicDecrypt=T.publicDecrypt,cryptoBrowserify.privateDecrypt=T.privateDecrypt;var B=requireBrowser();return cryptoBrowserify.randomFill=B.randomFill,cryptoBrowserify.randomFillSync=B.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var forge$c=forge$m,pkcs5=forge$c.pkcs5=forge$c.pkcs5||{},crypto$4;forge$c.util.isNodejs&&!forge$c.options.usePureJavaScript&&(crypto$4=requireCryptoBrowserify());var pbkdf2$2=forge$c.pbkdf2=pkcs5.pbkdf2=function(t,n,_,x,E,S){if(typeof E=="function"&&(S=E,E=null),forge$c.util.isNodejs&&!forge$c.options.usePureJavaScript&&crypto$4.pbkdf2&&(E===null||typeof E!="object")&&(crypto$4.pbkdf2Sync.length>4||!E||E==="sha1"))return typeof E!="string"&&(E="sha1"),t=Buffer$5.from(t,"binary"),n=Buffer$5.from(n,"binary"),S?crypto$4.pbkdf2Sync.length===4?crypto$4.pbkdf2(t,n,_,x,function(Y,Z){if(Y)return S(Y);S(null,Z.toString("binary"))}):crypto$4.pbkdf2(t,n,_,x,E,function(Y,Z){if(Y)return S(Y);S(null,Z.toString("binary"))}):crypto$4.pbkdf2Sync.length===4?crypto$4.pbkdf2Sync(t,n,_,x).toString("binary"):crypto$4.pbkdf2Sync(t,n,_,x,E).toString("binary");if((typeof E>"u"||E===null)&&(E="sha1"),typeof E=="string"){if(!(E in forge$c.md.algorithms))throw new Error("Unknown hash algorithm: "+E);E=forge$c.md[E].create()}var C=E.digestLength;if(x>4294967295*C){var T=new Error("Derived key is too long.");if(S)return S(T);throw T}var B=Math.ceil(x/C),A=x-(B-1)*C,I=forge$c.hmac.create();I.start(E,t);var D="",M,V,L;if(!S){for(var F=1;F<=B;++F){I.start(null,null),I.update(n),I.update(forge$c.util.int32ToBytes(F)),M=L=I.digest().getBytes();for(var j=2;j<=_;++j)I.start(null,null),I.update(L),V=I.digest().getBytes(),M=forge$c.util.xorBytes(M,V,C),L=V;D+=F<B?M:M.substr(0,A)}return D}var F=1,j;function U(){if(F>B)return S(null,D);I.start(null,null),I.update(n),I.update(forge$c.util.int32ToBytes(F)),M=L=I.digest().getBytes(),j=2,H()}function H(){if(j<=_)return I.start(null,null),I.update(L),V=I.digest().getBytes(),M=forge$c.util.xorBytes(M,V,C),L=V,++j,forge$c.util.setImmediate(H);D+=F<B?M:M.substr(0,A),++F,U()}U()};const forgePbkdf2=getDefaultExportFromCjs(pbkdf2$2);var forge$b=forge$m,pem=forge$b.pem=forge$b.pem||{};pem.encode=function(t,n){n=n||{};var _="-----BEGIN "+t.type+`-----\r
`,x;if(t.procType&&(x={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},_+=foldHeader(x)),t.contentDomain&&(x={name:"Content-Domain",values:[t.contentDomain]},_+=foldHeader(x)),t.dekInfo&&(x={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&x.values.push(t.dekInfo.parameters),_+=foldHeader(x)),t.headers)for(var E=0;E<t.headers.length;++E)_+=foldHeader(t.headers[E]);return t.procType&&(_+=`\r
`),_+=forge$b.util.encode64(t.body,n.maxline||64)+`\r
`,_+="-----END "+t.type+`-----\r
`,_};pem.decode=function(t){for(var n=[],_=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,x=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,E=/\r?\n/,S;S=_.exec(t),!!S;){var C=S[1];C==="NEW CERTIFICATE REQUEST"&&(C="CERTIFICATE REQUEST");var T={type:C,procType:null,contentDomain:null,dekInfo:null,headers:[],body:forge$b.util.decode64(S[3])};if(n.push(T),!!S[2]){for(var B=S[2].split(E),A=0;S&&A<B.length;){for(var I=B[A].replace(/\s+$/,""),D=A+1;D<B.length;++D){var M=B[D];if(!/\s/.test(M[0]))break;I+=M,A=D}if(S=I.match(x),S){for(var V={name:S[1],values:[]},L=S[2].split(","),F=0;F<L.length;++F)V.values.push(ltrim(L[F]));if(T.procType)if(!T.contentDomain&&V.name==="Content-Domain")T.contentDomain=L[0]||"";else if(!T.dekInfo&&V.name==="DEK-Info"){if(V.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');T.dekInfo={algorithm:L[0],parameters:L[1]||null}}else T.headers.push(V);else{if(V.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(V.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');T.procType={version:L[0],type:L[1]}}}++A}if(T.procType==="ENCRYPTED"&&!T.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(n.length===0)throw new Error("Invalid PEM formatted message.");return n};function foldHeader(t){for(var n=t.name+": ",_=[],x=function(B,A){return" "+A},E=0;E<t.values.length;++E)_.push(t.values[E].replace(/^(\S+\r\n)/,x));n+=_.join(",")+`\r
`;for(var S=0,C=-1,E=0;E<n.length;++E,++S)if(S>65&&C!==-1){var T=n[C];T===","?(++C,n=n.substr(0,C)+`\r
 `+n.substr(C)):n=n.substr(0,C)+`\r
`+T+n.substr(C+1),S=E-C-1,C=-1,++E}else(n[E]===" "||n[E]==="	"||n[E]===",")&&(C=E);return n}function ltrim(t){return t.replace(/^\s+/,"")}var forge$a=forge$m,sha256$7=forge$a.sha256=forge$a.sha256||{};forge$a.md.sha256=forge$a.md.algorithms.sha256=sha256$7;sha256$7.create=function(){_initialized$2||_init$2();var t=null,n=forge$a.util.createBuffer(),_=new Array(64),x={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return x.start=function(){x.messageLength=0,x.fullMessageLength=x.messageLength64=[];for(var E=x.messageLengthSize/4,S=0;S<E;++S)x.fullMessageLength.push(0);return n=forge$a.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},x},x.start(),x.update=function(E,S){S==="utf8"&&(E=forge$a.util.encodeUtf8(E));var C=E.length;x.messageLength+=C,C=[C/4294967296>>>0,C>>>0];for(var T=x.fullMessageLength.length-1;T>=0;--T)x.fullMessageLength[T]+=C[1],C[1]=C[0]+(x.fullMessageLength[T]/4294967296>>>0),x.fullMessageLength[T]=x.fullMessageLength[T]>>>0,C[0]=C[1]/4294967296>>>0;return n.putBytes(E),_update$2(t,_,n),(n.read>2048||n.length()===0)&&n.compact(),x},x.digest=function(){var E=forge$a.util.createBuffer();E.putBytes(n.bytes());var S=x.fullMessageLength[x.fullMessageLength.length-1]+x.messageLengthSize,C=S&x.blockLength-1;E.putBytes(_padding$2.substr(0,x.blockLength-C));for(var T,B,A=x.fullMessageLength[0]*8,I=0;I<x.fullMessageLength.length-1;++I)T=x.fullMessageLength[I+1]*8,B=T/4294967296>>>0,A+=B,E.putInt32(A>>>0),A=T>>>0;E.putInt32(A);var D={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};_update$2(D,_,E);var M=forge$a.util.createBuffer();return M.putInt32(D.h0),M.putInt32(D.h1),M.putInt32(D.h2),M.putInt32(D.h3),M.putInt32(D.h4),M.putInt32(D.h5),M.putInt32(D.h6),M.putInt32(D.h7),M},x};var _padding$2=null,_initialized$2=!1,_k$1=null;function _init$2(){_padding$2=String.fromCharCode(128),_padding$2+=forge$a.util.fillString(String.fromCharCode(0),64),_k$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized$2=!0}function _update$2(t,n,_){for(var x,E,S,C,T,B,A,I,D,M,V,L,F,j,U,H=_.length();H>=64;){for(A=0;A<16;++A)n[A]=_.getInt32();for(;A<64;++A)x=n[A-2],x=(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10,E=n[A-15],E=(E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3,n[A]=x+n[A-7]+E+n[A-16]|0;for(I=t.h0,D=t.h1,M=t.h2,V=t.h3,L=t.h4,F=t.h5,j=t.h6,U=t.h7,A=0;A<64;++A)C=(L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7),T=j^L&(F^j),S=(I>>>2|I<<30)^(I>>>13|I<<19)^(I>>>22|I<<10),B=I&D|M&(I^D),x=U+C+T+_k$1[A]+n[A],E=S+B,U=j,j=F,F=L,L=V+x>>>0,V=M,M=D,D=I,I=x+E>>>0;t.h0=t.h0+I|0,t.h1=t.h1+D|0,t.h2=t.h2+M|0,t.h3=t.h3+V|0,t.h4=t.h4+L|0,t.h5=t.h5+F|0,t.h6=t.h6+j|0,t.h7=t.h7+U|0,H-=64}}var forge$9=forge$m,_crypto$1=null;forge$9.util.isNodejs&&!forge$9.options.usePureJavaScript&&!browser$1$1.versions["node-webkit"]&&(_crypto$1=requireCryptoBrowserify());var prng=forge$9.prng=forge$9.prng||{};prng.create=function(t){for(var n={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},_=t.md,x=new Array(32),E=0;E<32;++E)x[E]=_.create();n.pools=x,n.pool=0,n.generate=function(A,I){if(!I)return n.generateSync(A);var D=n.plugin.cipher,M=n.plugin.increment,V=n.plugin.formatKey,L=n.plugin.formatSeed,F=forge$9.util.createBuffer();n.key=null,j();function j(U){if(U)return I(U);if(F.length()>=A)return I(null,F.getBytes(A));if(n.generated>1048575&&(n.key=null),n.key===null)return forge$9.util.nextTick(function(){S(j)});var H=D(n.key,n.seed);n.generated+=H.length,F.putBytes(H),n.key=V(D(n.key,M(n.seed))),n.seed=L(D(n.key,n.seed)),forge$9.util.setImmediate(j)}},n.generateSync=function(A){var I=n.plugin.cipher,D=n.plugin.increment,M=n.plugin.formatKey,V=n.plugin.formatSeed;n.key=null;for(var L=forge$9.util.createBuffer();L.length()<A;){n.generated>1048575&&(n.key=null),n.key===null&&C();var F=I(n.key,n.seed);n.generated+=F.length,L.putBytes(F),n.key=M(I(n.key,D(n.seed))),n.seed=V(I(n.key,n.seed))}return L.getBytes(A)};function S(A){if(n.pools[0].messageLength>=32)return T(),A();var I=32-n.pools[0].messageLength<<5;n.seedFile(I,function(D,M){if(D)return A(D);n.collect(M),T(),A()})}function C(){if(n.pools[0].messageLength>=32)return T();var A=32-n.pools[0].messageLength<<5;n.collect(n.seedFileSync(A)),T()}function T(){n.reseeds=n.reseeds===4294967295?0:n.reseeds+1;var A=n.plugin.md.create();A.update(n.keyBytes);for(var I=1,D=0;D<32;++D)n.reseeds%I===0&&(A.update(n.pools[D].digest().getBytes()),n.pools[D].start()),I=I<<1;n.keyBytes=A.digest().getBytes(),A.start(),A.update(n.keyBytes);var M=A.digest().getBytes();n.key=n.plugin.formatKey(n.keyBytes),n.seed=n.plugin.formatSeed(M),n.generated=0}function B(A){var I=null,D=forge$9.util.globalScope,M=D.crypto||D.msCrypto;M&&M.getRandomValues&&(I=function(ne){return M.getRandomValues(ne)});var V=forge$9.util.createBuffer();if(I)for(;V.length()<A;){var L=Math.max(1,Math.min(A-V.length(),65536)/4),F=new Uint32Array(Math.floor(L));try{I(F);for(var j=0;j<F.length;++j)V.putInt32(F[j])}catch(ne){if(!(typeof QuotaExceededError<"u"&&ne instanceof QuotaExceededError))throw ne}}if(V.length()<A)for(var U,H,Y,Z=Math.floor(Math.random()*65536);V.length()<A;){H=16807*(Z&65535),U=16807*(Z>>16),H+=(U&32767)<<16,H+=U>>15,H=(H&2147483647)+(H>>31),Z=H&4294967295;for(var j=0;j<3;++j)Y=Z>>>(j<<3),Y^=Math.floor(Math.random()*256),V.putByte(Y&255)}return V.getBytes(A)}return _crypto$1?(n.seedFile=function(A,I){_crypto$1.randomBytes(A,function(D,M){if(D)return I(D);I(null,M.toString())})},n.seedFileSync=function(A){return _crypto$1.randomBytes(A).toString()}):(n.seedFile=function(A,I){try{I(null,B(A))}catch(D){I(D)}},n.seedFileSync=B),n.collect=function(A){for(var I=A.length,D=0;D<I;++D)n.pools[n.pool].update(A.substr(D,1)),n.pool=n.pool===31?0:n.pool+1},n.collectInt=function(A,I){for(var D="",M=0;M<I;M+=8)D+=String.fromCharCode(A>>M&255);n.collect(D)},n.registerWorker=function(A){if(A===self)n.seedFile=function(D,M){function V(L){var F=L.data;F.forge&&F.forge.prng&&(self.removeEventListener("message",V),M(F.forge.prng.err,F.forge.prng.bytes))}self.addEventListener("message",V),self.postMessage({forge:{prng:{needed:D}}})};else{var I=function(D){var M=D.data;M.forge&&M.forge.prng&&n.seedFile(M.forge.prng.needed,function(V,L){A.postMessage({forge:{prng:{err:V,bytes:L}}})})};A.addEventListener("message",I)}},n};var forge$8=forge$m;(function(){if(forge$8.random&&forge$8.random.getBytes){forge$8.random;return}(function(t){var n={},_=new Array(4),x=forge$8.util.createBuffer();n.formatKey=function(D){var M=forge$8.util.createBuffer(D);return D=new Array(4),D[0]=M.getInt32(),D[1]=M.getInt32(),D[2]=M.getInt32(),D[3]=M.getInt32(),forge$8.aes._expandKey(D,!1)},n.formatSeed=function(D){var M=forge$8.util.createBuffer(D);return D=new Array(4),D[0]=M.getInt32(),D[1]=M.getInt32(),D[2]=M.getInt32(),D[3]=M.getInt32(),D},n.cipher=function(D,M){return forge$8.aes._updateBlock(D,M,_,!1),x.putInt32(_[0]),x.putInt32(_[1]),x.putInt32(_[2]),x.putInt32(_[3]),x.getBytes()},n.increment=function(D){return++D[3],D},n.md=forge$8.md.sha256;function E(){var D=forge$8.prng.create(n);return D.getBytes=function(M,V){return D.generate(M,V)},D.getBytesSync=function(M){return D.generate(M)},D}var S=E(),C=null,T=forge$8.util.globalScope,B=T.crypto||T.msCrypto;if(B&&B.getRandomValues&&(C=function(D){return B.getRandomValues(D)}),forge$8.options.usePureJavaScript||!forge$8.util.isNodejs&&!C){if(S.collectInt(+new Date,32),typeof navigator<"u"){var A="";for(var I in navigator)try{typeof navigator[I]=="string"&&(A+=navigator[I])}catch{}S.collect(A),A=null}t&&(t().mousemove(function(D){S.collectInt(D.clientX,16),S.collectInt(D.clientY,16)}),t().keypress(function(D){S.collectInt(D.charCode,8)}))}if(!forge$8.random)forge$8.random=S;else for(var I in S)forge$8.random[I]=S[I];forge$8.random.createInstance=E,forge$8.random})(typeof jQuery<"u"?jQuery:null)})();var forge$7=forge$m,piTable=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],rol=function(t,n){return t<<n&65535|(t&65535)>>16-n},ror=function(t,n){return(t&65535)>>n|t<<16-n&65535};forge$7.rc2=forge$7.rc2||{};forge$7.rc2.expandKey=function(t,n){typeof t=="string"&&(t=forge$7.util.createBuffer(t)),n=n||128;var _=t,x=t.length(),E=n,S=Math.ceil(E/8),C=255>>(E&7),T;for(T=x;T<128;T++)_.putByte(piTable[_.at(T-1)+_.at(T-x)&255]);for(_.setAt(128-S,piTable[_.at(128-S)&C]),T=127-S;T>=0;T--)_.setAt(T,piTable[_.at(T+1)^_.at(T+S)]);return _};var createCipher=function(t,n,_){var x=!1,E=null,S=null,C=null,T,B,A,I,D=[];for(t=forge$7.rc2.expandKey(t,n),A=0;A<64;A++)D.push(t.getInt16Le());_?(T=function(L){for(A=0;A<4;A++)L[A]+=D[I]+(L[(A+3)%4]&L[(A+2)%4])+(~L[(A+3)%4]&L[(A+1)%4]),L[A]=rol(L[A],s[A]),I++},B=function(L){for(A=0;A<4;A++)L[A]+=D[L[(A+3)%4]&63]}):(T=function(L){for(A=3;A>=0;A--)L[A]=ror(L[A],s[A]),L[A]-=D[I]+(L[(A+3)%4]&L[(A+2)%4])+(~L[(A+3)%4]&L[(A+1)%4]),I--},B=function(L){for(A=3;A>=0;A--)L[A]-=D[L[(A+3)%4]&63]});var M=function(L){var F=[];for(A=0;A<4;A++){var j=E.getInt16Le();C!==null&&(_?j^=C.getInt16Le():C.putInt16Le(j)),F.push(j&65535)}I=_?0:63;for(var U=0;U<L.length;U++)for(var H=0;H<L[U][0];H++)L[U][1](F);for(A=0;A<4;A++)C!==null&&(_?C.putInt16Le(F[A]):F[A]^=C.getInt16Le()),S.putInt16Le(F[A])},V=null;return V={start:function(L,F){L&&typeof L=="string"&&(L=forge$7.util.createBuffer(L)),x=!1,E=forge$7.util.createBuffer(),S=F||new forge$7.util.createBuffer,C=L,V.output=S},update:function(L){for(x||E.putBuffer(L);E.length()>=8;)M([[5,T],[1,B],[6,T],[1,B],[5,T]])},finish:function(L){var F=!0;if(_)if(L)F=L(8,E,!_);else{var j=E.length()===8?8:8-E.length();E.fillWithByte(j,j)}if(F&&(x=!0,V.update()),!_&&(F=E.length()===0,F))if(L)F=L(8,S,!_);else{var U=S.length(),H=S.at(U-1);H>U?F=!1:S.truncate(H)}return F}},V};forge$7.rc2.startEncrypting=function(t,n,_){var x=forge$7.rc2.createEncryptionCipher(t,128);return x.start(n,_),x};forge$7.rc2.createEncryptionCipher=function(t,n){return createCipher(t,n,!0)};forge$7.rc2.startDecrypting=function(t,n,_){var x=forge$7.rc2.createDecryptionCipher(t,128);return x.start(n,_),x};forge$7.rc2.createDecryptionCipher=function(t,n){return createCipher(t,n,!1)};var forge$6=forge$m;forge$6.jsbn=forge$6.jsbn||{};var dbits;function BigInteger$2(t,n,_){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,n,_):n==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,n))}forge$6.jsbn.BigInteger=BigInteger$2;function nbi(){return new BigInteger$2(null)}function am1(t,n,_,x,E,S){for(;--S>=0;){var C=n*this.data[t++]+_.data[x]+E;E=Math.floor(C/67108864),_.data[x++]=C&67108863}return E}function am2(t,n,_,x,E,S){for(var C=n&32767,T=n>>15;--S>=0;){var B=this.data[t]&32767,A=this.data[t++]>>15,I=T*B+A*C;B=C*B+((I&32767)<<15)+_.data[x]+(E&1073741823),E=(B>>>30)+(I>>>15)+T*A+(E>>>30),_.data[x++]=B&1073741823}return E}function am3(t,n,_,x,E,S){for(var C=n&16383,T=n>>14;--S>=0;){var B=this.data[t]&16383,A=this.data[t++]>>14,I=T*B+A*C;B=C*B+((I&16383)<<14)+_.data[x]+E,E=(B>>28)+(I>>14)+T*A,_.data[x++]=B&268435455}return E}typeof navigator>"u"?(BigInteger$2.prototype.am=am3,dbits=28):navigator.appName=="Microsoft Internet Explorer"?(BigInteger$2.prototype.am=am2,dbits=30):navigator.appName!="Netscape"?(BigInteger$2.prototype.am=am1,dbits=26):(BigInteger$2.prototype.am=am3,dbits=28);BigInteger$2.prototype.DB=dbits;BigInteger$2.prototype.DM=(1<<dbits)-1;BigInteger$2.prototype.DV=1<<dbits;var BI_FP=52;BigInteger$2.prototype.FV=Math.pow(2,BI_FP);BigInteger$2.prototype.F1=BI_FP-dbits;BigInteger$2.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(t){return BI_RM.charAt(t)}function intAt(t,n){var _=BI_RC[t.charCodeAt(n)];return _??-1}function bnpCopyTo(t){for(var n=this.t-1;n>=0;--n)t.data[n]=this.data[n];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function nbv(t){var n=nbi();return n.fromInt(t),n}function bnpFromString(t,n){var _;if(n==16)_=4;else if(n==8)_=3;else if(n==256)_=8;else if(n==2)_=1;else if(n==32)_=5;else if(n==4)_=2;else{this.fromRadix(t,n);return}this.t=0,this.s=0;for(var x=t.length,E=!1,S=0;--x>=0;){var C=_==8?t[x]&255:intAt(t,x);if(C<0){t.charAt(x)=="-"&&(E=!0);continue}E=!1,S==0?this.data[this.t++]=C:S+_>this.DB?(this.data[this.t-1]|=(C&(1<<this.DB-S)-1)<<S,this.data[this.t++]=C>>this.DB-S):this.data[this.t-1]|=C<<S,S+=_,S>=this.DB&&(S-=this.DB)}_==8&&t[0]&128&&(this.s=-1,S>0&&(this.data[this.t-1]|=(1<<this.DB-S)-1<<S)),this.clamp(),E&&BigInteger$2.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var n;if(t==16)n=4;else if(t==8)n=3;else if(t==2)n=1;else if(t==32)n=5;else if(t==4)n=2;else return this.toRadix(t);var _=(1<<n)-1,x,E=!1,S="",C=this.t,T=this.DB-C*this.DB%n;if(C-- >0)for(T<this.DB&&(x=this.data[C]>>T)>0&&(E=!0,S=int2char(x));C>=0;)T<n?(x=(this.data[C]&(1<<T)-1)<<n-T,x|=this.data[--C]>>(T+=this.DB-n)):(x=this.data[C]>>(T-=n)&_,T<=0&&(T+=this.DB,--C)),x>0&&(E=!0),E&&(S+=int2char(x));return E?S:"0"}function bnNegate(){var t=nbi();return BigInteger$2.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var n=this.s-t.s;if(n!=0)return n;var _=this.t;if(n=_-t.t,n!=0)return this.s<0?-n:n;for(;--_>=0;)if((n=this.data[_]-t.data[_])!=0)return n;return 0}function nbits(t){var n=1,_;return(_=t>>>16)!=0&&(t=_,n+=16),(_=t>>8)!=0&&(t=_,n+=8),(_=t>>4)!=0&&(t=_,n+=4),(_=t>>2)!=0&&(t=_,n+=2),(_=t>>1)!=0&&(t=_,n+=1),n}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this.data[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,n){var _;for(_=this.t-1;_>=0;--_)n.data[_+t]=this.data[_];for(_=t-1;_>=0;--_)n.data[_]=0;n.t=this.t+t,n.s=this.s}function bnpDRShiftTo(t,n){for(var _=t;_<this.t;++_)n.data[_-t]=this.data[_];n.t=Math.max(this.t-t,0),n.s=this.s}function bnpLShiftTo(t,n){var _=t%this.DB,x=this.DB-_,E=(1<<x)-1,S=Math.floor(t/this.DB),C=this.s<<_&this.DM,T;for(T=this.t-1;T>=0;--T)n.data[T+S+1]=this.data[T]>>x|C,C=(this.data[T]&E)<<_;for(T=S-1;T>=0;--T)n.data[T]=0;n.data[S]=C,n.t=this.t+S+1,n.s=this.s,n.clamp()}function bnpRShiftTo(t,n){n.s=this.s;var _=Math.floor(t/this.DB);if(_>=this.t){n.t=0;return}var x=t%this.DB,E=this.DB-x,S=(1<<x)-1;n.data[0]=this.data[_]>>x;for(var C=_+1;C<this.t;++C)n.data[C-_-1]|=(this.data[C]&S)<<E,n.data[C-_]=this.data[C]>>x;x>0&&(n.data[this.t-_-1]|=(this.s&S)<<E),n.t=this.t-_,n.clamp()}function bnpSubTo(t,n){for(var _=0,x=0,E=Math.min(t.t,this.t);_<E;)x+=this.data[_]-t.data[_],n.data[_++]=x&this.DM,x>>=this.DB;if(t.t<this.t){for(x-=t.s;_<this.t;)x+=this.data[_],n.data[_++]=x&this.DM,x>>=this.DB;x+=this.s}else{for(x+=this.s;_<t.t;)x-=t.data[_],n.data[_++]=x&this.DM,x>>=this.DB;x-=t.s}n.s=x<0?-1:0,x<-1?n.data[_++]=this.DV+x:x>0&&(n.data[_++]=x),n.t=_,n.clamp()}function bnpMultiplyTo(t,n){var _=this.abs(),x=t.abs(),E=_.t;for(n.t=E+x.t;--E>=0;)n.data[E]=0;for(E=0;E<x.t;++E)n.data[E+_.t]=_.am(0,x.data[E],n,E,0,_.t);n.s=0,n.clamp(),this.s!=t.s&&BigInteger$2.ZERO.subTo(n,n)}function bnpSquareTo(t){for(var n=this.abs(),_=t.t=2*n.t;--_>=0;)t.data[_]=0;for(_=0;_<n.t-1;++_){var x=n.am(_,n.data[_],t,2*_,0,1);(t.data[_+n.t]+=n.am(_+1,2*n.data[_],t,2*_+1,x,n.t-_-1))>=n.DV&&(t.data[_+n.t]-=n.DV,t.data[_+n.t+1]=1)}t.t>0&&(t.data[t.t-1]+=n.am(_,n.data[_],t,2*_,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,n,_){var x=t.abs();if(!(x.t<=0)){var E=this.abs();if(E.t<x.t){n?.fromInt(0),_!=null&&this.copyTo(_);return}_==null&&(_=nbi());var S=nbi(),C=this.s,T=t.s,B=this.DB-nbits(x.data[x.t-1]);B>0?(x.lShiftTo(B,S),E.lShiftTo(B,_)):(x.copyTo(S),E.copyTo(_));var A=S.t,I=S.data[A-1];if(I!=0){var D=I*(1<<this.F1)+(A>1?S.data[A-2]>>this.F2:0),M=this.FV/D,V=(1<<this.F1)/D,L=1<<this.F2,F=_.t,j=F-A,U=n??nbi();for(S.dlShiftTo(j,U),_.compareTo(U)>=0&&(_.data[_.t++]=1,_.subTo(U,_)),BigInteger$2.ONE.dlShiftTo(A,U),U.subTo(S,S);S.t<A;)S.data[S.t++]=0;for(;--j>=0;){var H=_.data[--F]==I?this.DM:Math.floor(_.data[F]*M+(_.data[F-1]+L)*V);if((_.data[F]+=S.am(0,H,_,j,0,A))<H)for(S.dlShiftTo(j,U),_.subTo(U,_);_.data[F]<--H;)_.subTo(U,_)}n!=null&&(_.drShiftTo(A,n),C!=T&&BigInteger$2.ZERO.subTo(n,n)),_.t=A,_.clamp(),B>0&&_.rShiftTo(B,_),C<0&&BigInteger$2.ZERO.subTo(_,_)}}}function bnMod(t){var n=nbi();return this.abs().divRemTo(t,null,n),this.s<0&&n.compareTo(BigInteger$2.ZERO)>0&&t.subTo(n,n),n}function Classic(t){this.m=t}function cConvert(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,n,_){t.multiplyTo(n,_),this.reduce(_)}function cSqrTo(t,n){t.squareTo(n),this.reduce(n)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var n=t&3;return n=n*(2-(t&15)*n)&15,n=n*(2-(t&255)*n)&255,n=n*(2-((t&65535)*n&65535))&65535,n=n*(2-t*n%this.DV)%this.DV,n>0?this.DV-n:-n}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var n=nbi();return t.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),t.s<0&&n.compareTo(BigInteger$2.ZERO)>0&&this.m.subTo(n,n),n}function montRevert(t){var n=nbi();return t.copyTo(n),this.reduce(n),n}function montReduce(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var n=0;n<this.m.t;++n){var _=t.data[n]&32767,x=_*this.mpl+((_*this.mph+(t.data[n]>>15)*this.mpl&this.um)<<15)&t.DM;for(_=n+this.m.t,t.data[_]+=this.m.am(0,x,t,n,0,this.m.t);t.data[_]>=t.DV;)t.data[_]-=t.DV,t.data[++_]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function montSqrTo(t,n){t.squareTo(n),this.reduce(n)}function montMulTo(t,n,_){t.multiplyTo(n,_),this.reduce(_)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this.data[0]&1:this.s)==0}function bnpExp(t,n){if(t>4294967295||t<1)return BigInteger$2.ONE;var _=nbi(),x=nbi(),E=n.convert(this),S=nbits(t)-1;for(E.copyTo(_);--S>=0;)if(n.sqrTo(_,x),(t&1<<S)>0)n.mulTo(x,E,_);else{var C=_;_=x,x=C}return n.revert(_)}function bnModPowInt(t,n){var _;return t<256||n.isEven()?_=new Classic(n):_=new Montgomery(n),this.exp(t,_)}BigInteger$2.prototype.copyTo=bnpCopyTo;BigInteger$2.prototype.fromInt=bnpFromInt;BigInteger$2.prototype.fromString=bnpFromString;BigInteger$2.prototype.clamp=bnpClamp;BigInteger$2.prototype.dlShiftTo=bnpDLShiftTo;BigInteger$2.prototype.drShiftTo=bnpDRShiftTo;BigInteger$2.prototype.lShiftTo=bnpLShiftTo;BigInteger$2.prototype.rShiftTo=bnpRShiftTo;BigInteger$2.prototype.subTo=bnpSubTo;BigInteger$2.prototype.multiplyTo=bnpMultiplyTo;BigInteger$2.prototype.squareTo=bnpSquareTo;BigInteger$2.prototype.divRemTo=bnpDivRemTo;BigInteger$2.prototype.invDigit=bnpInvDigit;BigInteger$2.prototype.isEven=bnpIsEven;BigInteger$2.prototype.exp=bnpExp;BigInteger$2.prototype.toString=bnToString;BigInteger$2.prototype.negate=bnNegate;BigInteger$2.prototype.abs=bnAbs;BigInteger$2.prototype.compareTo=bnCompareTo;BigInteger$2.prototype.bitLength=bnBitLength;BigInteger$2.prototype.mod=bnMod;BigInteger$2.prototype.modPowInt=bnModPowInt;BigInteger$2.ZERO=nbv(0);BigInteger$2.ONE=nbv(1);function bnClone(){var t=nbi();return this.copyTo(t),t}function bnIntValue(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function bnByteValue(){return this.t==0?this.s:this.data[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this.data[0]<<16>>16}function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function bnpToRadix(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var n=this.chunkSize(t),_=Math.pow(t,n),x=nbv(_),E=nbi(),S=nbi(),C="";for(this.divRemTo(x,E,S);E.signum()>0;)C=(_+S.intValue()).toString(t).substr(1)+C,E.divRemTo(x,E,S);return S.intValue().toString(t)+C}function bnpFromRadix(t,n){this.fromInt(0),n==null&&(n=10);for(var _=this.chunkSize(n),x=Math.pow(n,_),E=!1,S=0,C=0,T=0;T<t.length;++T){var B=intAt(t,T);if(B<0){t.charAt(T)=="-"&&this.signum()==0&&(E=!0);continue}C=n*C+B,++S>=_&&(this.dMultiply(x),this.dAddOffset(C,0),S=0,C=0)}S>0&&(this.dMultiply(Math.pow(n,S)),this.dAddOffset(C,0)),E&&BigInteger$2.ZERO.subTo(this,this)}function bnpFromNumber(t,n,_){if(typeof n=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,_),this.testBit(t-1)||this.bitwiseTo(BigInteger$2.ONE.shiftLeft(t-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(n);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(BigInteger$2.ONE.shiftLeft(t-1),this);else{var x=new Array,E=t&7;x.length=(t>>3)+1,n.nextBytes(x),E>0?x[0]&=(1<<E)-1:x[0]=0,this.fromString(x,256)}}function bnToByteArray(){var t=this.t,n=new Array;n[0]=this.s;var _=this.DB-t*this.DB%8,x,E=0;if(t-- >0)for(_<this.DB&&(x=this.data[t]>>_)!=(this.s&this.DM)>>_&&(n[E++]=x|this.s<<this.DB-_);t>=0;)_<8?(x=(this.data[t]&(1<<_)-1)<<8-_,x|=this.data[--t]>>(_+=this.DB-8)):(x=this.data[t]>>(_-=8)&255,_<=0&&(_+=this.DB,--t)),x&128&&(x|=-256),E==0&&(this.s&128)!=(x&128)&&++E,(E>0||x!=this.s)&&(n[E++]=x);return n}function bnEquals(t){return this.compareTo(t)==0}function bnMin(t){return this.compareTo(t)<0?this:t}function bnMax(t){return this.compareTo(t)>0?this:t}function bnpBitwiseTo(t,n,_){var x,E,S=Math.min(t.t,this.t);for(x=0;x<S;++x)_.data[x]=n(this.data[x],t.data[x]);if(t.t<this.t){for(E=t.s&this.DM,x=S;x<this.t;++x)_.data[x]=n(this.data[x],E);_.t=this.t}else{for(E=this.s&this.DM,x=S;x<t.t;++x)_.data[x]=n(E,t.data[x]);_.t=t.t}_.s=n(this.s,t.s),_.clamp()}function op_and(t,n){return t&n}function bnAnd(t){var n=nbi();return this.bitwiseTo(t,op_and,n),n}function op_or(t,n){return t|n}function bnOr(t){var n=nbi();return this.bitwiseTo(t,op_or,n),n}function op_xor(t,n){return t^n}function bnXor(t){var n=nbi();return this.bitwiseTo(t,op_xor,n),n}function op_andnot(t,n){return t&~n}function bnAndNot(t){var n=nbi();return this.bitwiseTo(t,op_andnot,n),n}function bnNot(){for(var t=nbi(),n=0;n<this.t;++n)t.data[n]=this.DM&~this.data[n];return t.t=this.t,t.s=~this.s,t}function bnShiftLeft(t){var n=nbi();return t<0?this.rShiftTo(-t,n):this.lShiftTo(t,n),n}function bnShiftRight(t){var n=nbi();return t<0?this.lShiftTo(-t,n):this.rShiftTo(t,n),n}function lbit(t){if(t==0)return-1;var n=0;return t&65535||(t>>=16,n+=16),t&255||(t>>=8,n+=8),t&15||(t>>=4,n+=4),t&3||(t>>=2,n+=2),t&1||++n,n}function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+lbit(this.data[t]);return this.s<0?this.t*this.DB:-1}function cbit(t){for(var n=0;t!=0;)t&=t-1,++n;return n}function bnBitCount(){for(var t=0,n=this.s&this.DM,_=0;_<this.t;++_)t+=cbit(this.data[_]^n);return t}function bnTestBit(t){var n=Math.floor(t/this.DB);return n>=this.t?this.s!=0:(this.data[n]&1<<t%this.DB)!=0}function bnpChangeBit(t,n){var _=BigInteger$2.ONE.shiftLeft(t);return this.bitwiseTo(_,n,_),_}function bnSetBit(t){return this.changeBit(t,op_or)}function bnClearBit(t){return this.changeBit(t,op_andnot)}function bnFlipBit(t){return this.changeBit(t,op_xor)}function bnpAddTo(t,n){for(var _=0,x=0,E=Math.min(t.t,this.t);_<E;)x+=this.data[_]+t.data[_],n.data[_++]=x&this.DM,x>>=this.DB;if(t.t<this.t){for(x+=t.s;_<this.t;)x+=this.data[_],n.data[_++]=x&this.DM,x>>=this.DB;x+=this.s}else{for(x+=this.s;_<t.t;)x+=t.data[_],n.data[_++]=x&this.DM,x>>=this.DB;x+=t.s}n.s=x<0?-1:0,x>0?n.data[_++]=x:x<-1&&(n.data[_++]=this.DV+x),n.t=_,n.clamp()}function bnAdd(t){var n=nbi();return this.addTo(t,n),n}function bnSubtract(t){var n=nbi();return this.subTo(t,n),n}function bnMultiply(t){var n=nbi();return this.multiplyTo(t,n),n}function bnDivide(t){var n=nbi();return this.divRemTo(t,n,null),n}function bnRemainder(t){var n=nbi();return this.divRemTo(t,null,n),n}function bnDivideAndRemainder(t){var n=nbi(),_=nbi();return this.divRemTo(t,n,_),new Array(n,_)}function bnpDMultiply(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(t,n){if(t!=0){for(;this.t<=n;)this.data[this.t++]=0;for(this.data[n]+=t;this.data[n]>=this.DV;)this.data[n]-=this.DV,++n>=this.t&&(this.data[this.t++]=0),++this.data[n]}}function NullExp(){}function nNop(t){return t}function nMulTo(t,n,_){t.multiplyTo(n,_)}function nSqrTo(t,n){t.squareTo(n)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(t){return this.exp(t,new NullExp)}function bnpMultiplyLowerTo(t,n,_){var x=Math.min(this.t+t.t,n);for(_.s=0,_.t=x;x>0;)_.data[--x]=0;var E;for(E=_.t-this.t;x<E;++x)_.data[x+this.t]=this.am(0,t.data[x],_,x,0,this.t);for(E=Math.min(t.t,n);x<E;++x)this.am(0,t.data[x],_,x,0,n-x);_.clamp()}function bnpMultiplyUpperTo(t,n,_){--n;var x=_.t=this.t+t.t-n;for(_.s=0;--x>=0;)_.data[x]=0;for(x=Math.max(n-this.t,0);x<t.t;++x)_.data[this.t+x-n]=this.am(n-x,t.data[x],_,0,0,this.t+x-n);_.clamp(),_.drShiftTo(1,_)}function Barrett(t){this.r2=nbi(),this.q3=nbi(),BigInteger$2.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var n=nbi();return t.copyTo(n),this.reduce(n),n}function barrettRevert(t){return t}function barrettReduce(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function barrettSqrTo(t,n){t.squareTo(n),this.reduce(n)}function barrettMulTo(t,n,_){t.multiplyTo(n,_),this.reduce(_)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(t,n){var _=t.bitLength(),x,E=nbv(1),S;if(_<=0)return E;_<18?x=1:_<48?x=3:_<144?x=4:_<768?x=5:x=6,_<8?S=new Classic(n):n.isEven()?S=new Barrett(n):S=new Montgomery(n);var C=new Array,T=3,B=x-1,A=(1<<x)-1;if(C[1]=S.convert(this),x>1){var I=nbi();for(S.sqrTo(C[1],I);T<=A;)C[T]=nbi(),S.mulTo(I,C[T-2],C[T]),T+=2}var D=t.t-1,M,V=!0,L=nbi(),F;for(_=nbits(t.data[D])-1;D>=0;){for(_>=B?M=t.data[D]>>_-B&A:(M=(t.data[D]&(1<<_+1)-1)<<B-_,D>0&&(M|=t.data[D-1]>>this.DB+_-B)),T=x;!(M&1);)M>>=1,--T;if((_-=T)<0&&(_+=this.DB,--D),V)C[M].copyTo(E),V=!1;else{for(;T>1;)S.sqrTo(E,L),S.sqrTo(L,E),T-=2;T>0?S.sqrTo(E,L):(F=E,E=L,L=F),S.mulTo(L,C[M],E)}for(;D>=0&&!(t.data[D]&1<<_);)S.sqrTo(E,L),F=E,E=L,L=F,--_<0&&(_=this.DB-1,--D)}return S.revert(E)}function bnGCD(t){var n=this.s<0?this.negate():this.clone(),_=t.s<0?t.negate():t.clone();if(n.compareTo(_)<0){var x=n;n=_,_=x}var E=n.getLowestSetBit(),S=_.getLowestSetBit();if(S<0)return n;for(E<S&&(S=E),S>0&&(n.rShiftTo(S,n),_.rShiftTo(S,_));n.signum()>0;)(E=n.getLowestSetBit())>0&&n.rShiftTo(E,n),(E=_.getLowestSetBit())>0&&_.rShiftTo(E,_),n.compareTo(_)>=0?(n.subTo(_,n),n.rShiftTo(1,n)):(_.subTo(n,_),_.rShiftTo(1,_));return S>0&&_.lShiftTo(S,_),_}function bnpModInt(t){if(t<=0)return 0;var n=this.DV%t,_=this.s<0?t-1:0;if(this.t>0)if(n==0)_=this.data[0]%t;else for(var x=this.t-1;x>=0;--x)_=(n*_+this.data[x])%t;return _}function bnModInverse(t){var n=t.isEven();if(this.isEven()&&n||t.signum()==0)return BigInteger$2.ZERO;for(var _=t.clone(),x=this.clone(),E=nbv(1),S=nbv(0),C=nbv(0),T=nbv(1);_.signum()!=0;){for(;_.isEven();)_.rShiftTo(1,_),n?((!E.isEven()||!S.isEven())&&(E.addTo(this,E),S.subTo(t,S)),E.rShiftTo(1,E)):S.isEven()||S.subTo(t,S),S.rShiftTo(1,S);for(;x.isEven();)x.rShiftTo(1,x),n?((!C.isEven()||!T.isEven())&&(C.addTo(this,C),T.subTo(t,T)),C.rShiftTo(1,C)):T.isEven()||T.subTo(t,T),T.rShiftTo(1,T);_.compareTo(x)>=0?(_.subTo(x,_),n&&E.subTo(C,E),S.subTo(T,S)):(x.subTo(_,x),n&&C.subTo(E,C),T.subTo(S,T))}if(x.compareTo(BigInteger$2.ONE)!=0)return BigInteger$2.ZERO;if(T.compareTo(t)>=0)return T.subtract(t);if(T.signum()<0)T.addTo(t,T);else return T;return T.signum()<0?T.add(t):T}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var n,_=this.abs();if(_.t==1&&_.data[0]<=lowprimes[lowprimes.length-1]){for(n=0;n<lowprimes.length;++n)if(_.data[0]==lowprimes[n])return!0;return!1}if(_.isEven())return!1;for(n=1;n<lowprimes.length;){for(var x=lowprimes[n],E=n+1;E<lowprimes.length&&x<lplim;)x*=lowprimes[E++];for(x=_.modInt(x);n<E;)if(x%lowprimes[n++]==0)return!1}return _.millerRabin(t)}function bnpMillerRabin(t){var n=this.subtract(BigInteger$2.ONE),_=n.getLowestSetBit();if(_<=0)return!1;for(var x=n.shiftRight(_),E=bnGetPrng(),S,C=0;C<t;++C){do S=new BigInteger$2(this.bitLength(),E);while(S.compareTo(BigInteger$2.ONE)<=0||S.compareTo(n)>=0);var T=S.modPow(x,this);if(T.compareTo(BigInteger$2.ONE)!=0&&T.compareTo(n)!=0){for(var B=1;B++<_&&T.compareTo(n)!=0;)if(T=T.modPowInt(2,this),T.compareTo(BigInteger$2.ONE)==0)return!1;if(T.compareTo(n)!=0)return!1}}return!0}function bnGetPrng(){return{nextBytes:function(t){for(var n=0;n<t.length;++n)t[n]=Math.floor(Math.random()*256)}}}BigInteger$2.prototype.chunkSize=bnpChunkSize;BigInteger$2.prototype.toRadix=bnpToRadix;BigInteger$2.prototype.fromRadix=bnpFromRadix;BigInteger$2.prototype.fromNumber=bnpFromNumber;BigInteger$2.prototype.bitwiseTo=bnpBitwiseTo;BigInteger$2.prototype.changeBit=bnpChangeBit;BigInteger$2.prototype.addTo=bnpAddTo;BigInteger$2.prototype.dMultiply=bnpDMultiply;BigInteger$2.prototype.dAddOffset=bnpDAddOffset;BigInteger$2.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger$2.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger$2.prototype.modInt=bnpModInt;BigInteger$2.prototype.millerRabin=bnpMillerRabin;BigInteger$2.prototype.clone=bnClone;BigInteger$2.prototype.intValue=bnIntValue;BigInteger$2.prototype.byteValue=bnByteValue;BigInteger$2.prototype.shortValue=bnShortValue;BigInteger$2.prototype.signum=bnSigNum;BigInteger$2.prototype.toByteArray=bnToByteArray;BigInteger$2.prototype.equals=bnEquals;BigInteger$2.prototype.min=bnMin;BigInteger$2.prototype.max=bnMax;BigInteger$2.prototype.and=bnAnd;BigInteger$2.prototype.or=bnOr;BigInteger$2.prototype.xor=bnXor;BigInteger$2.prototype.andNot=bnAndNot;BigInteger$2.prototype.not=bnNot;BigInteger$2.prototype.shiftLeft=bnShiftLeft;BigInteger$2.prototype.shiftRight=bnShiftRight;BigInteger$2.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger$2.prototype.bitCount=bnBitCount;BigInteger$2.prototype.testBit=bnTestBit;BigInteger$2.prototype.setBit=bnSetBit;BigInteger$2.prototype.clearBit=bnClearBit;BigInteger$2.prototype.flipBit=bnFlipBit;BigInteger$2.prototype.add=bnAdd;BigInteger$2.prototype.subtract=bnSubtract;BigInteger$2.prototype.multiply=bnMultiply;BigInteger$2.prototype.divide=bnDivide;BigInteger$2.prototype.remainder=bnRemainder;BigInteger$2.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger$2.prototype.modPow=bnModPow;BigInteger$2.prototype.modInverse=bnModInverse;BigInteger$2.prototype.pow=bnPow;BigInteger$2.prototype.gcd=bnGCD;BigInteger$2.prototype.isProbablePrime=bnIsProbablePrime;var forge$5=forge$m,sha1=forge$5.sha1=forge$5.sha1||{};forge$5.md.sha1=forge$5.md.algorithms.sha1=sha1;sha1.create=function(){_initialized$1||_init$1();var t=null,n=forge$5.util.createBuffer(),_=new Array(80),x={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return x.start=function(){x.messageLength=0,x.fullMessageLength=x.messageLength64=[];for(var E=x.messageLengthSize/4,S=0;S<E;++S)x.fullMessageLength.push(0);return n=forge$5.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},x},x.start(),x.update=function(E,S){S==="utf8"&&(E=forge$5.util.encodeUtf8(E));var C=E.length;x.messageLength+=C,C=[C/4294967296>>>0,C>>>0];for(var T=x.fullMessageLength.length-1;T>=0;--T)x.fullMessageLength[T]+=C[1],C[1]=C[0]+(x.fullMessageLength[T]/4294967296>>>0),x.fullMessageLength[T]=x.fullMessageLength[T]>>>0,C[0]=C[1]/4294967296>>>0;return n.putBytes(E),_update$1(t,_,n),(n.read>2048||n.length()===0)&&n.compact(),x},x.digest=function(){var E=forge$5.util.createBuffer();E.putBytes(n.bytes());var S=x.fullMessageLength[x.fullMessageLength.length-1]+x.messageLengthSize,C=S&x.blockLength-1;E.putBytes(_padding$1.substr(0,x.blockLength-C));for(var T,B,A=x.fullMessageLength[0]*8,I=0;I<x.fullMessageLength.length-1;++I)T=x.fullMessageLength[I+1]*8,B=T/4294967296>>>0,A+=B,E.putInt32(A>>>0),A=T>>>0;E.putInt32(A);var D={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};_update$1(D,_,E);var M=forge$5.util.createBuffer();return M.putInt32(D.h0),M.putInt32(D.h1),M.putInt32(D.h2),M.putInt32(D.h3),M.putInt32(D.h4),M},x};var _padding$1=null,_initialized$1=!1;function _init$1(){_padding$1=String.fromCharCode(128),_padding$1+=forge$5.util.fillString(String.fromCharCode(0),64),_initialized$1=!0}function _update$1(t,n,_){for(var x,E,S,C,T,B,A,I,D=_.length();D>=64;){for(E=t.h0,S=t.h1,C=t.h2,T=t.h3,B=t.h4,I=0;I<16;++I)x=_.getInt32(),n[I]=x,A=T^S&(C^T),x=(E<<5|E>>>27)+A+B+1518500249+x,B=T,T=C,C=(S<<30|S>>>2)>>>0,S=E,E=x;for(;I<20;++I)x=n[I-3]^n[I-8]^n[I-14]^n[I-16],x=x<<1|x>>>31,n[I]=x,A=T^S&(C^T),x=(E<<5|E>>>27)+A+B+1518500249+x,B=T,T=C,C=(S<<30|S>>>2)>>>0,S=E,E=x;for(;I<32;++I)x=n[I-3]^n[I-8]^n[I-14]^n[I-16],x=x<<1|x>>>31,n[I]=x,A=S^C^T,x=(E<<5|E>>>27)+A+B+1859775393+x,B=T,T=C,C=(S<<30|S>>>2)>>>0,S=E,E=x;for(;I<40;++I)x=n[I-6]^n[I-16]^n[I-28]^n[I-32],x=x<<2|x>>>30,n[I]=x,A=S^C^T,x=(E<<5|E>>>27)+A+B+1859775393+x,B=T,T=C,C=(S<<30|S>>>2)>>>0,S=E,E=x;for(;I<60;++I)x=n[I-6]^n[I-16]^n[I-28]^n[I-32],x=x<<2|x>>>30,n[I]=x,A=S&C|T&(S^C),x=(E<<5|E>>>27)+A+B+2400959708+x,B=T,T=C,C=(S<<30|S>>>2)>>>0,S=E,E=x;for(;I<80;++I)x=n[I-6]^n[I-16]^n[I-28]^n[I-32],x=x<<2|x>>>30,n[I]=x,A=S^C^T,x=(E<<5|E>>>27)+A+B+3395469782+x,B=T,T=C,C=(S<<30|S>>>2)>>>0,S=E,E=x;t.h0=t.h0+E|0,t.h1=t.h1+S|0,t.h2=t.h2+C|0,t.h3=t.h3+T|0,t.h4=t.h4+B|0,D-=64}}var forge$4=forge$m,pkcs1=forge$4.pkcs1=forge$4.pkcs1||{};pkcs1.encode_rsa_oaep=function(t,n,_){var x,E,S,C;typeof _=="string"?(x=_,E=arguments[3]||void 0,S=arguments[4]||void 0):_&&(x=_.label||void 0,E=_.seed||void 0,S=_.md||void 0,_.mgf1&&_.mgf1.md&&(C=_.mgf1.md)),S?S.start():S=forge$4.md.sha1.create(),C||(C=S);var T=Math.ceil(t.n.bitLength()/8),B=T-2*S.digestLength-2;if(n.length>B){var A=new Error("RSAES-OAEP input message length is too long.");throw A.length=n.length,A.maxLength=B,A}x||(x=""),S.update(x,"raw");for(var I=S.digest(),D="",M=B-n.length,V=0;V<M;V++)D+="\0";var L=I.getBytes()+D+""+n;if(!E)E=forge$4.random.getBytes(S.digestLength);else if(E.length!==S.digestLength){var A=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw A.seedLength=E.length,A.digestLength=S.digestLength,A}var F=rsa_mgf1(E,T-S.digestLength-1,C),j=forge$4.util.xorBytes(L,F,L.length),U=rsa_mgf1(j,S.digestLength,C),H=forge$4.util.xorBytes(E,U,E.length);return"\0"+H+j};pkcs1.decode_rsa_oaep=function(t,n,_){var x,E,S;typeof _=="string"?(x=_,E=arguments[3]||void 0):_&&(x=_.label||void 0,E=_.md||void 0,_.mgf1&&_.mgf1.md&&(S=_.mgf1.md));var C=Math.ceil(t.n.bitLength()/8);if(n.length!==C){var j=new Error("RSAES-OAEP encoded message length is invalid.");throw j.length=n.length,j.expectedLength=C,j}if(E===void 0?E=forge$4.md.sha1.create():E.start(),S||(S=E),C<2*E.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");x||(x=""),E.update(x,"raw");for(var T=E.digest().getBytes(),B=n.charAt(0),A=n.substring(1,E.digestLength+1),I=n.substring(1+E.digestLength),D=rsa_mgf1(I,E.digestLength,S),M=forge$4.util.xorBytes(A,D,A.length),V=rsa_mgf1(M,C-E.digestLength-1,S),L=forge$4.util.xorBytes(I,V,I.length),F=L.substring(0,E.digestLength),j=B!=="\0",U=0;U<E.digestLength;++U)j|=T.charAt(U)!==F.charAt(U);for(var H=1,Y=E.digestLength,Z=E.digestLength;Z<L.length;Z++){var ne=L.charCodeAt(Z),re=ne&1^1,X=H?65534:0;j|=ne&X,H=H&re,Y+=H}if(j||L.charCodeAt(Y)!==1)throw new Error("Invalid RSAES-OAEP padding.");return L.substring(Y+1)};function rsa_mgf1(t,n,_){_||(_=forge$4.md.sha1.create());for(var x="",E=Math.ceil(n/_.digestLength),S=0;S<E;++S){var C=String.fromCharCode(S>>24&255,S>>16&255,S>>8&255,S&255);_.start(),_.update(t+C),x+=_.digest().getBytes()}return x.substring(0,n)}var forge$3=forge$m;(function(){if(forge$3.prime){forge$3.prime;return}var t=forge$3.prime=forge$3.prime||{},n=forge$3.jsbn.BigInteger,_=[6,4,2,4,2,4,6,2],x=new n(null);x.fromInt(30);var E=function(D,M){return D|M};t.generateProbablePrime=function(D,M,V){typeof M=="function"&&(V=M,M={}),M=M||{};var L=M.algorithm||"PRIMEINC";typeof L=="string"&&(L={name:L}),L.options=L.options||{};var F=M.prng||forge$3.random,j={nextBytes:function(U){for(var H=F.getBytesSync(U.length),Y=0;Y<U.length;++Y)U[Y]=H.charCodeAt(Y)}};if(L.name==="PRIMEINC")return S(D,j,L.options,V);throw new Error("Invalid prime generation algorithm: "+L.name)};function S(D,M,V,L){return"workers"in V?B(D,M,V,L):C(D,M,V,L)}function C(D,M,V,L){var F=A(D,M),j=0,U=I(F.bitLength());"millerRabinTests"in V&&(U=V.millerRabinTests);var H=10;"maxBlockTime"in V&&(H=V.maxBlockTime),T(F,D,M,j,U,H,L)}function T(D,M,V,L,F,j,U){var H=+new Date;do{if(D.bitLength()>M&&(D=A(M,V)),D.isProbablePrime(F))return U(null,D);D.dAddOffset(_[L++%8],0)}while(j<0||+new Date-H<j);forge$3.util.setImmediate(function(){T(D,M,V,L,F,j,U)})}function B(D,M,V,L){if(typeof Worker>"u")return C(D,M,V,L);var F=A(D,M),j=V.workers,U=V.workLoad||100,H=U*30/8,Y=V.workerScript||"forge/prime.worker.js";if(j===-1)return forge$3.util.estimateCores(function(ne,re){ne&&(re=2),j=re-1,Z()});Z();function Z(){j=Math.max(1,j);for(var ne=[],re=0;re<j;++re)ne[re]=new Worker(Y);for(var re=0;re<j;++re)ne[re].addEventListener("message",ce);var X=!1;function ce(ue){if(!X){var _e=ue.data;if(_e.found){for(var ye=0;ye<ne.length;++ye)ne[ye].terminate();return X=!0,L(null,new n(_e.prime,16))}F.bitLength()>D&&(F=A(D,M));var ie=F.toString(16);ue.target.postMessage({hex:ie,workLoad:U}),F.dAddOffset(H,0)}}}}function A(D,M){var V=new n(D,M),L=D-1;return V.testBit(L)||V.bitwiseTo(n.ONE.shiftLeft(L),E,V),V.dAddOffset(31-V.mod(x).byteValue(),0),V}function I(D){return D<=100?27:D<=150?18:D<=200?15:D<=250?12:D<=300?9:D<=350?8:D<=400?7:D<=500?6:D<=600?5:D<=800?4:D<=1250?3:2}})();var forge$2=forge$m;if(typeof BigInteger$1>"u")var BigInteger$1=forge$2.jsbn.BigInteger;var _crypto=forge$2.util.isNodejs?requireCryptoBrowserify():null,asn1$1=forge$2.asn1,util$6=forge$2.util;forge$2.pki=forge$2.pki||{};forge$2.pki.rsa=forge$2.rsa=forge$2.rsa||{};var pki$1=forge$2.pki,GCD_30_DELTA=[6,4,2,4,2,4,6,2],privateKeyValidator={name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},rsaPrivateKeyValidator={name:"RSAPrivateKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},rsaPublicKeyValidator={name:"RSAPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},publicKeyValidator=forge$2.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},digestInfoValidator={name:"DigestInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},emsaPkcs1v15encode=function(t){var n;if(t.algorithm in pki$1.oids)n=pki$1.oids[t.algorithm];else{var _=new Error("Unknown message digest algorithm.");throw _.algorithm=t.algorithm,_}var x=asn1$1.oidToDer(n).getBytes(),E=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]),S=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]);S.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,x)),S.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,""));var C=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,t.digest().getBytes());return E.value.push(S),E.value.push(C),asn1$1.toDer(E).getBytes()},_modPow=function(t,n,_){if(_)return t.modPow(n.e,n.n);if(!n.p||!n.q)return t.modPow(n.d,n.n);n.dP||(n.dP=n.d.mod(n.p.subtract(BigInteger$1.ONE))),n.dQ||(n.dQ=n.d.mod(n.q.subtract(BigInteger$1.ONE))),n.qInv||(n.qInv=n.q.modInverse(n.p));var x;do x=new BigInteger$1(forge$2.util.bytesToHex(forge$2.random.getBytes(n.n.bitLength()/8)),16);while(x.compareTo(n.n)>=0||!x.gcd(n.n).equals(BigInteger$1.ONE));t=t.multiply(x.modPow(n.e,n.n)).mod(n.n);for(var E=t.mod(n.p).modPow(n.dP,n.p),S=t.mod(n.q).modPow(n.dQ,n.q);E.compareTo(S)<0;)E=E.add(n.p);var C=E.subtract(S).multiply(n.qInv).mod(n.p).multiply(n.q).add(S);return C=C.multiply(x.modInverse(n.n)).mod(n.n),C};pki$1.rsa.encrypt=function(t,n,_){var x=_,E,S=Math.ceil(n.n.bitLength()/8);_!==!1&&_!==!0?(x=_===2,E=_encodePkcs1_v1_5(t,n,_)):(E=forge$2.util.createBuffer(),E.putBytes(t));for(var C=new BigInteger$1(E.toHex(),16),T=_modPow(C,n,x),B=T.toString(16),A=forge$2.util.createBuffer(),I=S-Math.ceil(B.length/2);I>0;)A.putByte(0),--I;return A.putBytes(forge$2.util.hexToBytes(B)),A.getBytes()};pki$1.rsa.decrypt=function(t,n,_,x){var E=Math.ceil(n.n.bitLength()/8);if(t.length!==E){var S=new Error("Encrypted message length is invalid.");throw S.length=t.length,S.expected=E,S}var C=new BigInteger$1(forge$2.util.createBuffer(t).toHex(),16);if(C.compareTo(n.n)>=0)throw new Error("Encrypted message is invalid.");for(var T=_modPow(C,n,_),B=T.toString(16),A=forge$2.util.createBuffer(),I=E-Math.ceil(B.length/2);I>0;)A.putByte(0),--I;return A.putBytes(forge$2.util.hexToBytes(B)),x!==!1?_decodePkcs1_v1_5(A.getBytes(),n,_):A.getBytes()};pki$1.rsa.createKeyPairGenerationState=function(t,n,_){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,_=_||{};var x=_.prng||forge$2.random,E={nextBytes:function(T){for(var B=x.getBytesSync(T.length),A=0;A<T.length;++A)T[A]=B.charCodeAt(A)}},S=_.algorithm||"PRIMEINC",C;if(S==="PRIMEINC")C={algorithm:S,state:0,bits:t,rng:E,eInt:n||65537,e:new BigInteger$1(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},C.e.fromInt(C.eInt);else throw new Error("Invalid key generation algorithm: "+S);return C};pki$1.rsa.stepKeyPairGenerationState=function(t,n){"algorithm"in t||(t.algorithm="PRIMEINC");var _=new BigInteger$1(null);_.fromInt(30);for(var x=0,E=function(D,M){return D|M},S=+new Date,C,T=0;t.keys===null&&(n<=0||T<n);){if(t.state===0){var B=t.p===null?t.pBits:t.qBits,A=B-1;t.pqState===0?(t.num=new BigInteger$1(B,t.rng),t.num.testBit(A)||t.num.bitwiseTo(BigInteger$1.ONE.shiftLeft(A),E,t.num),t.num.dAddOffset(31-t.num.mod(_).byteValue(),0),x=0,++t.pqState):t.pqState===1?t.num.bitLength()>B?t.pqState=0:t.num.isProbablePrime(_getMillerRabinTests(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(GCD_30_DELTA[x++%8],0):t.pqState===2?t.pqState=t.num.subtract(BigInteger$1.ONE).gcd(t.e).compareTo(BigInteger$1.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(BigInteger$1.ONE),t.q1=t.q.subtract(BigInteger$1.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(BigInteger$1.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var I=t.e.modInverse(t.phi);t.keys={privateKey:pki$1.rsa.setPrivateKey(t.n,t.e,I,t.p,t.q,I.mod(t.p1),I.mod(t.q1),t.q.modInverse(t.p)),publicKey:pki$1.rsa.setPublicKey(t.n,t.e)}}C=+new Date,T+=C-S,S=C}return t.keys!==null};pki$1.rsa.generateKeyPair=function(t,n,_,x){if(arguments.length===1?typeof t=="object"?(_=t,t=void 0):typeof t=="function"&&(x=t,t=void 0):arguments.length===2?typeof t=="number"?typeof n=="function"?(x=n,n=void 0):typeof n!="number"&&(_=n,n=void 0):(_=t,x=n,t=void 0,n=void 0):arguments.length===3&&(typeof n=="number"?typeof _=="function"&&(x=_,_=void 0):(x=_,_=n,n=void 0)),_=_||{},t===void 0&&(t=_.bits||2048),n===void 0&&(n=_.e||65537),!forge$2.options.usePureJavaScript&&!_.prng&&t>=256&&t<=16384&&(n===65537||n===3)){if(x){if(_detectNodeCrypto("generateKeyPair"))return _crypto.generateKeyPair("rsa",{modulusLength:t,publicExponent:n,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(T,B,A){if(T)return x(T);x(null,{privateKey:pki$1.privateKeyFromPem(A),publicKey:pki$1.publicKeyFromPem(B)})});if(_detectSubtleCrypto("generateKey")&&_detectSubtleCrypto("exportKey"))return util$6.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:_intToUint8Array(n),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(T){return util$6.globalScope.crypto.subtle.exportKey("pkcs8",T.privateKey)}).then(void 0,function(T){x(T)}).then(function(T){if(T){var B=pki$1.privateKeyFromAsn1(asn1$1.fromDer(forge$2.util.createBuffer(T)));x(null,{privateKey:B,publicKey:pki$1.setRsaPublicKey(B.n,B.e)})}});if(_detectSubtleMsCrypto("generateKey")&&_detectSubtleMsCrypto("exportKey")){var E=util$6.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:_intToUint8Array(n),hash:{name:"SHA-256"}},!0,["sign","verify"]);E.oncomplete=function(T){var B=T.target.result,A=util$6.globalScope.msCrypto.subtle.exportKey("pkcs8",B.privateKey);A.oncomplete=function(I){var D=I.target.result,M=pki$1.privateKeyFromAsn1(asn1$1.fromDer(forge$2.util.createBuffer(D)));x(null,{privateKey:M,publicKey:pki$1.setRsaPublicKey(M.n,M.e)})},A.onerror=function(I){x(I)}},E.onerror=function(T){x(T)};return}}else if(_detectNodeCrypto("generateKeyPairSync")){var S=_crypto.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:n,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:pki$1.privateKeyFromPem(S.privateKey),publicKey:pki$1.publicKeyFromPem(S.publicKey)}}}var C=pki$1.rsa.createKeyPairGenerationState(t,n,_);if(!x)return pki$1.rsa.stepKeyPairGenerationState(C,0),C.keys;_generateKeyPair(C,_,x)};pki$1.setRsaPublicKey=pki$1.rsa.setPublicKey=function(t,n){var _={n:t,e:n};return _.encrypt=function(x,E,S){if(typeof E=="string"?E=E.toUpperCase():E===void 0&&(E="RSAES-PKCS1-V1_5"),E==="RSAES-PKCS1-V1_5")E={encode:function(T,B,A){return _encodePkcs1_v1_5(T,B,2).getBytes()}};else if(E==="RSA-OAEP"||E==="RSAES-OAEP")E={encode:function(T,B){return forge$2.pkcs1.encode_rsa_oaep(B,T,S)}};else if(["RAW","NONE","NULL",null].indexOf(E)!==-1)E={encode:function(T){return T}};else if(typeof E=="string")throw new Error('Unsupported encryption scheme: "'+E+'".');var C=E.encode(x,_,!0);return pki$1.rsa.encrypt(C,_,!0)},_.verify=function(x,E,S,C){typeof S=="string"?S=S.toUpperCase():S===void 0&&(S="RSASSA-PKCS1-V1_5"),C===void 0&&(C={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in C||(C._parseAllDigestBytes=!0),S==="RSASSA-PKCS1-V1_5"?S={verify:function(B,A){A=_decodePkcs1_v1_5(A,_,!0);var I=asn1$1.fromDer(A,{parseAllBytes:C._parseAllDigestBytes}),D={},M=[];if(!asn1$1.validate(I,digestInfoValidator,D,M)){var V=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw V.errors=M,V}var L=asn1$1.derToOid(D.algorithmIdentifier);if(!(L===forge$2.oids.md2||L===forge$2.oids.md5||L===forge$2.oids.sha1||L===forge$2.oids.sha224||L===forge$2.oids.sha256||L===forge$2.oids.sha384||L===forge$2.oids.sha512||L===forge$2.oids["sha512-224"]||L===forge$2.oids["sha512-256"])){var V=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw V.oid=L,V}if((L===forge$2.oids.md2||L===forge$2.oids.md5)&&!("parameters"in D))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return B===D.digest}}:(S==="NONE"||S==="NULL"||S===null)&&(S={verify:function(B,A){return A=_decodePkcs1_v1_5(A,_,!0),B===A}});var T=pki$1.rsa.decrypt(E,_,!0,!1);return S.verify(x,T,_.n.bitLength())},_};pki$1.setRsaPrivateKey=pki$1.rsa.setPrivateKey=function(t,n,_,x,E,S,C,T){var B={n:t,e:n,d:_,p:x,q:E,dP:S,dQ:C,qInv:T};return B.decrypt=function(A,I,D){typeof I=="string"?I=I.toUpperCase():I===void 0&&(I="RSAES-PKCS1-V1_5");var M=pki$1.rsa.decrypt(A,B,!1,!1);if(I==="RSAES-PKCS1-V1_5")I={decode:_decodePkcs1_v1_5};else if(I==="RSA-OAEP"||I==="RSAES-OAEP")I={decode:function(V,L){return forge$2.pkcs1.decode_rsa_oaep(L,V,D)}};else if(["RAW","NONE","NULL",null].indexOf(I)!==-1)I={decode:function(V){return V}};else throw new Error('Unsupported encryption scheme: "'+I+'".');return I.decode(M,B,!1)},B.sign=function(A,I){var D=!1;typeof I=="string"&&(I=I.toUpperCase()),I===void 0||I==="RSASSA-PKCS1-V1_5"?(I={encode:emsaPkcs1v15encode},D=1):(I==="NONE"||I==="NULL"||I===null)&&(I={encode:function(){return A}},D=1);var M=I.encode(A,B.n.bitLength());return pki$1.rsa.encrypt(M,B,D)},B};pki$1.wrapRsaPrivateKey=function(t){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(0).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(pki$1.oids.rsaEncryption).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,asn1$1.toDer(t).getBytes())])};pki$1.privateKeyFromAsn1=function(t){var n={},_=[];if(asn1$1.validate(t,privateKeyValidator,n,_)&&(t=asn1$1.fromDer(forge$2.util.createBuffer(n.privateKey))),n={},_=[],!asn1$1.validate(t,rsaPrivateKeyValidator,n,_)){var x=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw x.errors=_,x}var E,S,C,T,B,A,I,D;return E=forge$2.util.createBuffer(n.privateKeyModulus).toHex(),S=forge$2.util.createBuffer(n.privateKeyPublicExponent).toHex(),C=forge$2.util.createBuffer(n.privateKeyPrivateExponent).toHex(),T=forge$2.util.createBuffer(n.privateKeyPrime1).toHex(),B=forge$2.util.createBuffer(n.privateKeyPrime2).toHex(),A=forge$2.util.createBuffer(n.privateKeyExponent1).toHex(),I=forge$2.util.createBuffer(n.privateKeyExponent2).toHex(),D=forge$2.util.createBuffer(n.privateKeyCoefficient).toHex(),pki$1.setRsaPrivateKey(new BigInteger$1(E,16),new BigInteger$1(S,16),new BigInteger$1(C,16),new BigInteger$1(T,16),new BigInteger$1(B,16),new BigInteger$1(A,16),new BigInteger$1(I,16),new BigInteger$1(D,16))};pki$1.privateKeyToAsn1=pki$1.privateKeyToRSAPrivateKey=function(t){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(0).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.n)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.e)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.d)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.p)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.q)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.dP)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.dQ)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.qInv))])};pki$1.publicKeyFromAsn1=function(t){var n={},_=[];if(asn1$1.validate(t,publicKeyValidator,n,_)){var x=asn1$1.derToOid(n.publicKeyOid);if(x!==pki$1.oids.rsaEncryption){var E=new Error("Cannot read public key. Unknown OID.");throw E.oid=x,E}t=n.rsaPublicKey}if(_=[],!asn1$1.validate(t,rsaPublicKeyValidator,n,_)){var E=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw E.errors=_,E}var S=forge$2.util.createBuffer(n.publicKeyModulus).toHex(),C=forge$2.util.createBuffer(n.publicKeyExponent).toHex();return pki$1.setRsaPublicKey(new BigInteger$1(S,16),new BigInteger$1(C,16))};pki$1.publicKeyToAsn1=pki$1.publicKeyToSubjectPublicKeyInfo=function(t){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(pki$1.oids.rsaEncryption).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BITSTRING,!1,[pki$1.publicKeyToRSAPublicKey(t)])])};pki$1.publicKeyToRSAPublicKey=function(t){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.n)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.e))])};function _encodePkcs1_v1_5(t,n,_){var x=forge$2.util.createBuffer(),E=Math.ceil(n.n.bitLength()/8);if(t.length>E-11){var S=new Error("Message is too long for PKCS#1 v1.5 padding.");throw S.length=t.length,S.max=E-11,S}x.putByte(0),x.putByte(_);var C=E-3-t.length,T;if(_===0||_===1){T=_===0?0:255;for(var B=0;B<C;++B)x.putByte(T)}else for(;C>0;){for(var A=0,I=forge$2.random.getBytes(C),B=0;B<C;++B)T=I.charCodeAt(B),T===0?++A:x.putByte(T);C=A}return x.putByte(0),x.putBytes(t),x}function _decodePkcs1_v1_5(t,n,_,x){var E=Math.ceil(n.n.bitLength()/8),S=forge$2.util.createBuffer(t),C=S.getByte(),T=S.getByte();if(C!==0||_&&T!==0&&T!==1||!_&&T!=2||_&&T===0&&typeof x>"u")throw new Error("Encryption block is invalid.");var B=0;if(T===0){B=E-3-x;for(var A=0;A<B;++A)if(S.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(T===1)for(B=0;S.length()>1;){if(S.getByte()!==255){--S.read;break}++B}else if(T===2)for(B=0;S.length()>1;){if(S.getByte()===0){--S.read;break}++B}var I=S.getByte();if(I!==0||B!==E-3-S.length())throw new Error("Encryption block is invalid.");return S.getBytes()}function _generateKeyPair(t,n,_){typeof n=="function"&&(_=n,n={}),n=n||{};var x={algorithm:{name:n.algorithm||"PRIMEINC",options:{workers:n.workers||2,workLoad:n.workLoad||100,workerScript:n.workerScript}}};"prng"in n&&(x.prng=n.prng),E();function E(){S(t.pBits,function(T,B){if(T)return _(T);if(t.p=B,t.q!==null)return C(T,t.q);S(t.qBits,C)})}function S(T,B){forge$2.prime.generateProbablePrime(T,x,B)}function C(T,B){if(T)return _(T);if(t.q=B,t.p.compareTo(t.q)<0){var A=t.p;t.p=t.q,t.q=A}if(t.p.subtract(BigInteger$1.ONE).gcd(t.e).compareTo(BigInteger$1.ONE)!==0){t.p=null,E();return}if(t.q.subtract(BigInteger$1.ONE).gcd(t.e).compareTo(BigInteger$1.ONE)!==0){t.q=null,S(t.qBits,C);return}if(t.p1=t.p.subtract(BigInteger$1.ONE),t.q1=t.q.subtract(BigInteger$1.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(BigInteger$1.ONE)!==0){t.p=t.q=null,E();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,S(t.qBits,C);return}var I=t.e.modInverse(t.phi);t.keys={privateKey:pki$1.rsa.setPrivateKey(t.n,t.e,I,t.p,t.q,I.mod(t.p1),I.mod(t.q1),t.q.modInverse(t.p)),publicKey:pki$1.rsa.setPublicKey(t.n,t.e)},_(null,t.keys)}}function _bnToBytes(t){var n=t.toString(16);n[0]>="8"&&(n="00"+n);var _=forge$2.util.hexToBytes(n);return _.length>1&&(_.charCodeAt(0)===0&&!(_.charCodeAt(1)&128)||_.charCodeAt(0)===255&&(_.charCodeAt(1)&128)===128)?_.substr(1):_}function _getMillerRabinTests(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function _detectNodeCrypto(t){return forge$2.util.isNodejs&&typeof _crypto[t]=="function"}function _detectSubtleCrypto(t){return typeof util$6.globalScope<"u"&&typeof util$6.globalScope.crypto=="object"&&typeof util$6.globalScope.crypto.subtle=="object"&&typeof util$6.globalScope.crypto.subtle[t]=="function"}function _detectSubtleMsCrypto(t){return typeof util$6.globalScope<"u"&&typeof util$6.globalScope.msCrypto=="object"&&typeof util$6.globalScope.msCrypto.subtle=="object"&&typeof util$6.globalScope.msCrypto.subtle[t]=="function"}function _intToUint8Array(t){for(var n=forge$2.util.hexToBytes(t.toString(16)),_=new Uint8Array(n.length),x=0;x<n.length;++x)_[x]=n.charCodeAt(x);return _}var forge$1=forge$m;if(typeof BigInteger>"u")var BigInteger=forge$1.jsbn.BigInteger;var asn1=forge$1.asn1,pki=forge$1.pki=forge$1.pki||{};pki.pbe=forge$1.pbe=forge$1.pbe||{};var oids=pki.oids,encryptedPrivateKeyValidator={name:"EncryptedPrivateKeyInfo",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},PBES2AlgorithmsValidator={name:"PBES2Algorithms",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pkcs12PbeParamsValidator={name:"pkcs-12PbeParams",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"iterations"}]};pki.encryptPrivateKeyInfo=function(t,n,_){_=_||{},_.saltSize=_.saltSize||8,_.count=_.count||2048,_.algorithm=_.algorithm||"aes128",_.prfAlgorithm=_.prfAlgorithm||"sha1";var x=forge$1.random.getBytesSync(_.saltSize),E=_.count,S=asn1.integerToDer(E),C,T,B;if(_.algorithm.indexOf("aes")===0||_.algorithm==="des"){var A,I,D;switch(_.algorithm){case"aes128":C=16,A=16,I=oids["aes128-CBC"],D=forge$1.aes.createEncryptionCipher;break;case"aes192":C=24,A=16,I=oids["aes192-CBC"],D=forge$1.aes.createEncryptionCipher;break;case"aes256":C=32,A=16,I=oids["aes256-CBC"],D=forge$1.aes.createEncryptionCipher;break;case"des":C=8,A=8,I=oids.desCBC,D=forge$1.des.createEncryptionCipher;break;default:var M=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw M.algorithm=_.algorithm,M}var V="hmacWith"+_.prfAlgorithm.toUpperCase(),L=prfAlgorithmToMessageDigest(V),F=forge$1.pkcs5.pbkdf2(n,x,E,C,L),j=forge$1.random.getBytesSync(A),U=D(F);U.start(j),U.update(asn1.toDer(t)),U.finish(),B=U.output.getBytes();var H=createPbkdf2Params(x,S,C,V);T=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids.pkcs5PBES2).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids.pkcs5PBKDF2).getBytes()),H]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(I).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,j)])])])}else if(_.algorithm==="3des"){C=24;var Y=new forge$1.util.ByteBuffer(x),F=pki.pbe.generatePkcs12Key(n,Y,1,E,C),j=pki.pbe.generatePkcs12Key(n,Y,2,E,C),U=forge$1.des.createEncryptionCipher(F);U.start(j),U.update(asn1.toDer(t)),U.finish(),B=U.output.getBytes(),T=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,x),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,S.getBytes())])])}else{var M=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw M.algorithm=_.algorithm,M}var Z=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[T,asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,B)]);return Z};pki.decryptPrivateKeyInfo=function(t,n){var _=null,x={},E=[];if(!asn1.validate(t,encryptedPrivateKeyValidator,x,E)){var S=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw S.errors=E,S}var C=asn1.derToOid(x.encryptionOid),T=pki.pbe.getCipher(C,x.encryptionParams,n),B=forge$1.util.createBuffer(x.encryptedData);return T.update(B),T.finish()&&(_=asn1.fromDer(T.output)),_};pki.encryptedPrivateKeyToPem=function(t,n){var _={type:"ENCRYPTED PRIVATE KEY",body:asn1.toDer(t).getBytes()};return forge$1.pem.encode(_,{maxline:n})};pki.encryptedPrivateKeyFromPem=function(t){var n=forge$1.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"){var _=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw _.headerType=n.type,_}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return asn1.fromDer(n.body)};pki.encryptRsaPrivateKey=function(t,n,_){if(_=_||{},!_.legacy){var x=pki.wrapRsaPrivateKey(pki.privateKeyToAsn1(t));return x=pki.encryptPrivateKeyInfo(x,n,_),pki.encryptedPrivateKeyToPem(x)}var E,S,C,T;switch(_.algorithm){case"aes128":E="AES-128-CBC",C=16,S=forge$1.random.getBytesSync(16),T=forge$1.aes.createEncryptionCipher;break;case"aes192":E="AES-192-CBC",C=24,S=forge$1.random.getBytesSync(16),T=forge$1.aes.createEncryptionCipher;break;case"aes256":E="AES-256-CBC",C=32,S=forge$1.random.getBytesSync(16),T=forge$1.aes.createEncryptionCipher;break;case"3des":E="DES-EDE3-CBC",C=24,S=forge$1.random.getBytesSync(8),T=forge$1.des.createEncryptionCipher;break;case"des":E="DES-CBC",C=8,S=forge$1.random.getBytesSync(8),T=forge$1.des.createEncryptionCipher;break;default:var B=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+_.algorithm+'".');throw B.algorithm=_.algorithm,B}var A=forge$1.pbe.opensslDeriveBytes(n,S.substr(0,8),C),I=T(A);I.start(S),I.update(asn1.toDer(pki.privateKeyToAsn1(t))),I.finish();var D={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:E,parameters:forge$1.util.bytesToHex(S).toUpperCase()},body:I.output.getBytes()};return forge$1.pem.encode(D)};pki.decryptRsaPrivateKey=function(t,n){var _=null,x=forge$1.pem.decode(t)[0];if(x.type!=="ENCRYPTED PRIVATE KEY"&&x.type!=="PRIVATE KEY"&&x.type!=="RSA PRIVATE KEY"){var E=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw E.headerType=E,E}if(x.procType&&x.procType.type==="ENCRYPTED"){var S,C;switch(x.dekInfo.algorithm){case"DES-CBC":S=8,C=forge$1.des.createDecryptionCipher;break;case"DES-EDE3-CBC":S=24,C=forge$1.des.createDecryptionCipher;break;case"AES-128-CBC":S=16,C=forge$1.aes.createDecryptionCipher;break;case"AES-192-CBC":S=24,C=forge$1.aes.createDecryptionCipher;break;case"AES-256-CBC":S=32,C=forge$1.aes.createDecryptionCipher;break;case"RC2-40-CBC":S=5,C=function(D){return forge$1.rc2.createDecryptionCipher(D,40)};break;case"RC2-64-CBC":S=8,C=function(D){return forge$1.rc2.createDecryptionCipher(D,64)};break;case"RC2-128-CBC":S=16,C=function(D){return forge$1.rc2.createDecryptionCipher(D,128)};break;default:var E=new Error('Could not decrypt private key; unsupported encryption algorithm "'+x.dekInfo.algorithm+'".');throw E.algorithm=x.dekInfo.algorithm,E}var T=forge$1.util.hexToBytes(x.dekInfo.parameters),B=forge$1.pbe.opensslDeriveBytes(n,T.substr(0,8),S),A=C(B);if(A.start(T),A.update(forge$1.util.createBuffer(x.body)),A.finish())_=A.output.getBytes();else return _}else _=x.body;return x.type==="ENCRYPTED PRIVATE KEY"?_=pki.decryptPrivateKeyInfo(asn1.fromDer(_),n):_=asn1.fromDer(_),_!==null&&(_=pki.privateKeyFromAsn1(_)),_};pki.pbe.generatePkcs12Key=function(t,n,_,x,E,S){var C,T;if(typeof S>"u"||S===null){if(!("sha1"in forge$1.md))throw new Error('"sha1" hash algorithm unavailable.');S=forge$1.md.sha1.create()}var B=S.digestLength,A=S.blockLength,I=new forge$1.util.ByteBuffer,D=new forge$1.util.ByteBuffer;if(t!=null){for(T=0;T<t.length;T++)D.putInt16(t.charCodeAt(T));D.putInt16(0)}var M=D.length(),V=n.length(),L=new forge$1.util.ByteBuffer;L.fillWithByte(_,A);var F=A*Math.ceil(V/A),j=new forge$1.util.ByteBuffer;for(T=0;T<F;T++)j.putByte(n.at(T%V));var U=A*Math.ceil(M/A),H=new forge$1.util.ByteBuffer;for(T=0;T<U;T++)H.putByte(D.at(T%M));var Y=j;Y.putBuffer(H);for(var Z=Math.ceil(E/B),ne=1;ne<=Z;ne++){var re=new forge$1.util.ByteBuffer;re.putBytes(L.bytes()),re.putBytes(Y.bytes());for(var X=0;X<x;X++)S.start(),S.update(re.getBytes()),re=S.digest();var ce=new forge$1.util.ByteBuffer;for(T=0;T<A;T++)ce.putByte(re.at(T%B));var ue=Math.ceil(V/A)+Math.ceil(M/A),_e=new forge$1.util.ByteBuffer;for(C=0;C<ue;C++){var ye=new forge$1.util.ByteBuffer(Y.getBytes(A)),ie=511;for(T=ce.length()-1;T>=0;T--)ie=ie>>8,ie+=ce.at(T)+ye.at(T),ye.setAt(T,ie&255);_e.putBuffer(ye)}Y=_e,I.putBuffer(re)}return I.truncate(I.length()-E),I};pki.pbe.getCipher=function(t,n,_){switch(t){case pki.oids.pkcs5PBES2:return pki.pbe.getCipherForPBES2(t,n,_);case pki.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pki.oids["pbewithSHAAnd40BitRC2-CBC"]:return pki.pbe.getCipherForPKCS12PBE(t,n,_);default:var x=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw x.oid=t,x.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],x}};pki.pbe.getCipherForPBES2=function(t,n,_){var x={},E=[];if(!asn1.validate(n,PBES2AlgorithmsValidator,x,E)){var S=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw S.errors=E,S}if(t=asn1.derToOid(x.kdfOid),t!==pki.oids.pkcs5PBKDF2){var S=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw S.oid=t,S.supportedOids=["pkcs5PBKDF2"],S}if(t=asn1.derToOid(x.encOid),t!==pki.oids["aes128-CBC"]&&t!==pki.oids["aes192-CBC"]&&t!==pki.oids["aes256-CBC"]&&t!==pki.oids["des-EDE3-CBC"]&&t!==pki.oids.desCBC){var S=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw S.oid=t,S.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],S}var C=x.kdfSalt,T=forge$1.util.createBuffer(x.kdfIterationCount);T=T.getInt(T.length()<<3);var B,A;switch(pki.oids[t]){case"aes128-CBC":B=16,A=forge$1.aes.createDecryptionCipher;break;case"aes192-CBC":B=24,A=forge$1.aes.createDecryptionCipher;break;case"aes256-CBC":B=32,A=forge$1.aes.createDecryptionCipher;break;case"des-EDE3-CBC":B=24,A=forge$1.des.createDecryptionCipher;break;case"desCBC":B=8,A=forge$1.des.createDecryptionCipher;break}var I=prfOidToMessageDigest(x.prfOid),D=forge$1.pkcs5.pbkdf2(_,C,T,B,I),M=x.encIv,V=A(D);return V.start(M),V};pki.pbe.getCipherForPKCS12PBE=function(t,n,_){var x={},E=[];if(!asn1.validate(n,pkcs12PbeParamsValidator,x,E)){var S=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw S.errors=E,S}var C=forge$1.util.createBuffer(x.salt),T=forge$1.util.createBuffer(x.iterations);T=T.getInt(T.length()<<3);var B,A,I;switch(t){case pki.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:B=24,A=8,I=forge$1.des.startDecrypting;break;case pki.oids["pbewithSHAAnd40BitRC2-CBC"]:B=5,A=8,I=function(F,j){var U=forge$1.rc2.createDecryptionCipher(F,40);return U.start(j,null),U};break;default:var S=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw S.oid=t,S}var D=prfOidToMessageDigest(x.prfOid),M=pki.pbe.generatePkcs12Key(_,C,1,T,B,D);D.start();var V=pki.pbe.generatePkcs12Key(_,C,2,T,A,D);return I(M,V)};pki.pbe.opensslDeriveBytes=function(t,n,_,x){if(typeof x>"u"||x===null){if(!("md5"in forge$1.md))throw new Error('"md5" hash algorithm unavailable.');x=forge$1.md.md5.create()}n===null&&(n="");for(var E=[hash(x,t+n)],S=16,C=1;S<_;++C,S+=16)E.push(hash(x,E[C-1]+t+n));return E.join("").substr(0,_)};function hash(t,n){return t.start().update(n).digest().getBytes()}function prfOidToMessageDigest(t){var n;if(!t)n="hmacWithSHA1";else if(n=pki.oids[asn1.derToOid(t)],!n){var _=new Error("Unsupported PRF OID.");throw _.oid=t,_.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],_}return prfAlgorithmToMessageDigest(n)}function prfAlgorithmToMessageDigest(t){var n=forge$1.md;switch(t){case"hmacWithSHA224":n=forge$1.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var _=new Error("Unsupported PRF algorithm.");throw _.algorithm=t,_.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],_}if(!n||!(t in n))throw new Error("Unknown hash algorithm: "+t);return n[t].create()}function createPbkdf2Params(t,n,_,x){var E=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,t),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,n.getBytes())]);return x!=="hmacWithSHA1"&&E.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge$1.util.hexToBytes(_.toString(16))),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(pki.oids[x]).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])),E}function base$1(t,n){if(t.length>=255)throw new TypeError("Alphabet too long");for(var _=new Uint8Array(256),x=0;x<_.length;x++)_[x]=255;for(var E=0;E<t.length;E++){var S=t.charAt(E),C=S.charCodeAt(0);if(_[C]!==255)throw new TypeError(S+" is ambiguous");_[C]=E}var T=t.length,B=t.charAt(0),A=Math.log(T)/Math.log(256),I=Math.log(256)/Math.log(T);function D(L){if(L instanceof Uint8Array||(ArrayBuffer.isView(L)?L=new Uint8Array(L.buffer,L.byteOffset,L.byteLength):Array.isArray(L)&&(L=Uint8Array.from(L))),!(L instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(L.length===0)return"";for(var F=0,j=0,U=0,H=L.length;U!==H&&L[U]===0;)U++,F++;for(var Y=(H-U)*I+1>>>0,Z=new Uint8Array(Y);U!==H;){for(var ne=L[U],re=0,X=Y-1;(ne!==0||re<j)&&X!==-1;X--,re++)ne+=256*Z[X]>>>0,Z[X]=ne%T>>>0,ne=ne/T>>>0;if(ne!==0)throw new Error("Non-zero carry");j=re,U++}for(var ce=Y-j;ce!==Y&&Z[ce]===0;)ce++;for(var ue=B.repeat(F);ce<Y;++ce)ue+=t.charAt(Z[ce]);return ue}function M(L){if(typeof L!="string")throw new TypeError("Expected String");if(L.length===0)return new Uint8Array;var F=0;if(L[F]!==" "){for(var j=0,U=0;L[F]===B;)j++,F++;for(var H=(L.length-F)*A+1>>>0,Y=new Uint8Array(H);L[F];){var Z=_[L.charCodeAt(F)];if(Z===255)return;for(var ne=0,re=H-1;(Z!==0||ne<U)&&re!==-1;re--,ne++)Z+=T*Y[re]>>>0,Y[re]=Z%256>>>0,Z=Z/256>>>0;if(Z!==0)throw new Error("Non-zero carry");U=ne,F++}if(L[F]!==" "){for(var X=H-U;X!==H&&Y[X]===0;)X++;for(var ce=new Uint8Array(j+(H-X)),ue=j;X!==H;)ce[ue++]=Y[X++];return ce}}}function V(L){var F=M(L);if(F)return F;throw new Error(`Non-${n} character`)}return{encode:D,decodeUnsafe:M,decode:V}}var src$1=base$1,_brrp__multiformats_scope_baseX=src$1;const coerce=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};let Encoder$1=class{constructor(n,_,x){this.name=n,this.prefix=_,this.baseEncode=x}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}},Decoder$1=class{constructor(n,_,x){if(this.name=n,this.prefix=_,_.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=_.codePointAt(0),this.baseDecode=x}decode(n){if(typeof n=="string"){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(n){return or(this,n)}};class ComposedDecoder{constructor(n){this.decoders=n}or(n){return or(this,n)}decode(n){const _=n[0],x=this.decoders[_];if(x)return x.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(t,n)=>new ComposedDecoder({...t.decoders||{[t.prefix]:t},...n.decoders||{[n.prefix]:n}});let Codec$1=class{constructor(n,_,x,E){this.name=n,this.prefix=_,this.baseEncode=x,this.baseDecode=E,this.encoder=new Encoder$1(n,_,x),this.decoder=new Decoder$1(n,_,E)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}};const from$2=({name:t,prefix:n,encode:_,decode:x})=>new Codec$1(t,n,_,x),baseX=({prefix:t,name:n,alphabet:_})=>{const{encode:x,decode:E}=_brrp__multiformats_scope_baseX(_,n);return from$2({prefix:t,name:n,encode:x,decode:S=>coerce(E(S))})},decode$a=(t,n,_,x)=>{const E={};for(let I=0;I<n.length;++I)E[n[I]]=I;let S=t.length;for(;t[S-1]==="=";)--S;const C=new Uint8Array(S*_/8|0);let T=0,B=0,A=0;for(let I=0;I<S;++I){const D=E[t[I]];if(D===void 0)throw new SyntaxError(`Non-${x} character`);B=B<<_|D,T+=_,T>=8&&(T-=8,C[A++]=255&B>>T)}if(T>=_||255&B<<8-T)throw new SyntaxError("Unexpected end of data");return C},encode$f=(t,n,_)=>{const x=n[n.length-1]==="=",E=(1<<_)-1;let S="",C=0,T=0;for(let B=0;B<t.length;++B)for(T=T<<8|t[B],C+=8;C>_;)C-=_,S+=n[E&T>>C];if(C&&(S+=n[E&T<<_-C]),x)for(;S.length*_&7;)S+="=";return S},rfc4648=({name:t,prefix:n,bitsPerChar:_,alphabet:x})=>from$2({prefix:n,name:t,encode(E){return encode$f(E,x,_)},decode(E){return decode$a(E,x,_,t)}}),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var encode_1$2=encode$e,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode$e(t,n,_){n=n||[],_=_||0;for(var x=_;t>=INT;)n[_++]=t&255|MSB,t/=128;for(;t&MSBALL;)n[_++]=t&255|MSB,t>>>=7;return n[_]=t|0,encode$e.bytes=_-x+1,n}var decode$9=read$2,MSB$1=128,REST$1=127;function read$2(t,x){var _=0,x=x||0,E=0,S=x,C,T=t.length;do{if(S>=T)throw read$2.bytes=0,new RangeError("Could not decode varint");C=t[S++],_+=E<28?(C&REST$1)<<E:(C&REST$1)*Math.pow(2,E),E+=7}while(C>=MSB$1);return read$2.bytes=S-x,_}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(t){return t<N1?1:t<N2?2:t<N3?3:t<N4?4:t<N5?5:t<N6?6:t<N7?7:t<N8?8:t<N9?9:10},varint={encode:encode_1$2,decode:decode$9,encodingLength:length},_brrp_varint=varint;const encodeTo=(t,n,_=0)=>(_brrp_varint.encode(t,n,_),n),encodingLength=t=>_brrp_varint.encodingLength(t),create$3=(t,n)=>{const _=n.byteLength,x=encodingLength(t),E=x+encodingLength(_),S=new Uint8Array(E+_);return encodeTo(t,S,0),encodeTo(_,S,x),S.set(n,E),new Digest(t,_,n,S)};class Digest{constructor(n,_,x,E){this.code=n,this.size=_,this.digest=x,this.bytes=E}}const code$5=0,name$3="identity",encode$d=coerce,digest$1=t=>create$3(code$5,encode$d(t)),identity$4={code:code$5,name:name$3,encode:encode$d,digest:digest$1},from$1=({name:t,code:n,encode:_})=>new Hasher$1(t,n,_);let Hasher$1=class{constructor(n,_,x){this.name=n,this.code=_,this.encode=x}digest(n){if(n instanceof Uint8Array){const _=this.encode(n);return _ instanceof Uint8Array?create$3(this.code,_):_.then(x=>create$3(this.code,x))}else throw Error("Unknown type, must be binary type")}};const sha$1=t=>async n=>new Uint8Array(await crypto.subtle.digest(t,n)),sha256$6=from$1({name:"sha2-256",code:18,encode:sha$1("SHA-256")});function equals(t,n){if(t===n)return!0;if(t.byteLength!==n.byteLength)return!1;for(let _=0;_<t.byteLength;_++)if(t[_]!==n[_])return!1;return!0}var cryptoBrowserifyExports=requireCryptoBrowserify();const index=getDefaultExportFromCjs(cryptoBrowserifyExports),nodeCrypto=_mergeNamespaces({__proto__:null,default:index},[cryptoBrowserifyExports]);/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const _0n$1=BigInt(0),_1n$1=BigInt(1),_2n$1=BigInt(2),_8n$1=BigInt(8),CU_O=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),CURVE$1=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:CU_O,n:CU_O,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),POW_2_256$1=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const SQRT_AD_MINUS_ONE=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),INVSQRT_A_MINUS_D=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ONE_MINUS_D_SQ=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),D_MINUS_ONE_SQ=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class ExtendedPoint{constructor(n,_,x,E){this.x=n,this.y=_,this.z=x,this.t=E}static fromAffine(n){if(!(n instanceof Point$2))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return n.equals(Point$2.ZERO)?ExtendedPoint.ZERO:new ExtendedPoint(n.x,n.y,_1n$1,mod$1(n.x*n.y))}static toAffineBatch(n){const _=invertBatch$1(n.map(x=>x.z));return n.map((x,E)=>x.toAffine(_[E]))}static normalizeZ(n){return this.toAffineBatch(n).map(this.fromAffine)}equals(n){assertExtPoint(n);const{x:_,y:x,z:E}=this,{x:S,y:C,z:T}=n,B=mod$1(_*T),A=mod$1(S*E),I=mod$1(x*T),D=mod$1(C*E);return B===A&&I===D}negate(){return new ExtendedPoint(mod$1(-this.x),this.y,this.z,mod$1(-this.t))}double(){const{x:n,y:_,z:x}=this,{a:E}=CURVE$1,S=mod$1(n*n),C=mod$1(_*_),T=mod$1(_2n$1*mod$1(x*x)),B=mod$1(E*S),A=n+_,I=mod$1(mod$1(A*A)-S-C),D=B+C,M=D-T,V=B-C,L=mod$1(I*M),F=mod$1(D*V),j=mod$1(I*V),U=mod$1(M*D);return new ExtendedPoint(L,F,U,j)}add(n){assertExtPoint(n);const{x:_,y:x,z:E,t:S}=this,{x:C,y:T,z:B,t:A}=n,I=mod$1((x-_)*(T+C)),D=mod$1((x+_)*(T-C)),M=mod$1(D-I);if(M===_0n$1)return this.double();const V=mod$1(E*_2n$1*A),L=mod$1(S*_2n$1*B),F=L+V,j=D+I,U=L-V,H=mod$1(F*M),Y=mod$1(j*U),Z=mod$1(F*U),ne=mod$1(M*j);return new ExtendedPoint(H,Y,ne,Z)}subtract(n){return this.add(n.negate())}precomputeWindow(n){const _=1+256/n,x=[];let E=this,S=E;for(let C=0;C<_;C++){S=E,x.push(S);for(let T=1;T<2**(n-1);T++)S=S.add(E),x.push(S);E=S.double()}return x}wNAF(n,_){!_&&this.equals(ExtendedPoint.BASE)&&(_=Point$2.BASE);const x=_&&_._WINDOW_SIZE||1;if(256%x)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let E=_&&pointPrecomputes$1.get(_);E||(E=this.precomputeWindow(x),_&&x!==1&&(E=ExtendedPoint.normalizeZ(E),pointPrecomputes$1.set(_,E)));let S=ExtendedPoint.ZERO,C=ExtendedPoint.BASE;const T=1+256/x,B=2**(x-1),A=BigInt(2**x-1),I=2**x,D=BigInt(x);for(let M=0;M<T;M++){const V=M*B;let L=Number(n&A);n>>=D,L>B&&(L-=I,n+=_1n$1);const F=V,j=V+Math.abs(L)-1,U=M%2!==0,H=L<0;L===0?C=C.add(constTimeNegate$1(U,E[F])):S=S.add(constTimeNegate$1(H,E[j]))}return ExtendedPoint.normalizeZ([S,C])[0]}multiply(n,_){return this.wNAF(normalizeScalar$1(n,CURVE$1.l),_)}multiplyUnsafe(n){let _=normalizeScalar$1(n,CURVE$1.l,!1);const x=ExtendedPoint.BASE,E=ExtendedPoint.ZERO;if(_===_0n$1)return E;if(this.equals(E)||_===_1n$1)return this;if(this.equals(x))return this.wNAF(_);let S=E,C=this;for(;_>_0n$1;)_&_1n$1&&(S=S.add(C)),C=C.double(),_>>=_1n$1;return S}isSmallOrder(){return this.multiplyUnsafe(CURVE$1.h).equals(ExtendedPoint.ZERO)}isTorsionFree(){let n=this.multiplyUnsafe(CURVE$1.l/_2n$1).double();return CURVE$1.l%_2n$1&&(n=n.add(this)),n.equals(ExtendedPoint.ZERO)}toAffine(n){const{x:_,y:x,z:E}=this,S=this.equals(ExtendedPoint.ZERO);n==null&&(n=S?_8n$1:invert$1(E));const C=mod$1(_*n),T=mod$1(x*n),B=mod$1(E*n);if(S)return Point$2.ZERO;if(B!==_1n$1)throw new Error("invZ was invalid");return new Point$2(C,T)}fromRistrettoBytes(){legacyRist()}toRistrettoBytes(){legacyRist()}fromRistrettoHash(){legacyRist()}}ExtendedPoint.BASE=new ExtendedPoint(CURVE$1.Gx,CURVE$1.Gy,_1n$1,mod$1(CURVE$1.Gx*CURVE$1.Gy));ExtendedPoint.ZERO=new ExtendedPoint(_0n$1,_1n$1,_1n$1,_0n$1);function constTimeNegate$1(t,n){const _=n.negate();return t?_:n}function assertExtPoint(t){if(!(t instanceof ExtendedPoint))throw new TypeError("ExtendedPoint expected")}function assertRstPoint(t){if(!(t instanceof RistrettoPoint))throw new TypeError("RistrettoPoint expected")}function legacyRist(){throw new Error("Legacy method: switch to RistrettoPoint")}class RistrettoPoint{constructor(n){this.ep=n}static calcElligatorRistrettoMap(n){const{d:_}=CURVE$1,x=mod$1(SQRT_M1*n*n),E=mod$1((x+_1n$1)*ONE_MINUS_D_SQ);let S=BigInt(-1);const C=mod$1((S-_*x)*mod$1(x+_));let{isValid:T,value:B}=uvRatio(E,C),A=mod$1(B*n);edIsNegative(A)||(A=mod$1(-A)),T||(B=A),T||(S=x);const I=mod$1(S*(x-_1n$1)*D_MINUS_ONE_SQ-C),D=B*B,M=mod$1((B+B)*C),V=mod$1(I*SQRT_AD_MINUS_ONE),L=mod$1(_1n$1-D),F=mod$1(_1n$1+D);return new ExtendedPoint(mod$1(M*F),mod$1(L*V),mod$1(V*F),mod$1(M*L))}static hashToCurve(n){n=ensureBytes$1(n,64);const _=bytes255ToNumberLE(n.slice(0,32)),x=this.calcElligatorRistrettoMap(_),E=bytes255ToNumberLE(n.slice(32,64)),S=this.calcElligatorRistrettoMap(E);return new RistrettoPoint(x.add(S))}static fromHex(n){n=ensureBytes$1(n,32);const{a:_,d:x}=CURVE$1,E="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",S=bytes255ToNumberLE(n);if(!equalBytes(numberTo32BytesLE(S),n)||edIsNegative(S))throw new Error(E);const C=mod$1(S*S),T=mod$1(_1n$1+_*C),B=mod$1(_1n$1-_*C),A=mod$1(T*T),I=mod$1(B*B),D=mod$1(_*x*A-I),{isValid:M,value:V}=invertSqrt(mod$1(D*I)),L=mod$1(V*B),F=mod$1(V*L*D);let j=mod$1((S+S)*L);edIsNegative(j)&&(j=mod$1(-j));const U=mod$1(T*F),H=mod$1(j*U);if(!M||edIsNegative(H)||U===_0n$1)throw new Error(E);return new RistrettoPoint(new ExtendedPoint(j,U,_1n$1,H))}toRawBytes(){let{x:n,y:_,z:x,t:E}=this.ep;const S=mod$1(mod$1(x+_)*mod$1(x-_)),C=mod$1(n*_),T=mod$1(C*C),{value:B}=invertSqrt(mod$1(S*T)),A=mod$1(B*S),I=mod$1(B*C),D=mod$1(A*I*E);let M;if(edIsNegative(E*D)){let L=mod$1(_*SQRT_M1),F=mod$1(n*SQRT_M1);n=L,_=F,M=mod$1(A*INVSQRT_A_MINUS_D)}else M=I;edIsNegative(n*D)&&(_=mod$1(-_));let V=mod$1((x-_)*M);return edIsNegative(V)&&(V=mod$1(-V)),numberTo32BytesLE(V)}toHex(){return bytesToHex$2(this.toRawBytes())}toString(){return this.toHex()}equals(n){assertRstPoint(n);const _=this.ep,x=n.ep,E=mod$1(_.x*x.y)===mod$1(_.y*x.x),S=mod$1(_.y*x.y)===mod$1(_.x*x.x);return E||S}add(n){return assertRstPoint(n),new RistrettoPoint(this.ep.add(n.ep))}subtract(n){return assertRstPoint(n),new RistrettoPoint(this.ep.subtract(n.ep))}multiply(n){return new RistrettoPoint(this.ep.multiply(n))}multiplyUnsafe(n){return new RistrettoPoint(this.ep.multiplyUnsafe(n))}}RistrettoPoint.BASE=new RistrettoPoint(ExtendedPoint.BASE);RistrettoPoint.ZERO=new RistrettoPoint(ExtendedPoint.ZERO);const pointPrecomputes$1=new WeakMap;let Point$2=class qs{constructor(n,_){this.x=n,this.y=_}_setWindowSize(n){this._WINDOW_SIZE=n,pointPrecomputes$1.delete(this)}static fromHex(n,_=!0){const{d:x,P:E}=CURVE$1;n=ensureBytes$1(n,32);const S=n.slice();S[31]=n[31]&-129;const C=bytesToNumberLE(S);if(_&&C>=E)throw new Error("Expected 0 < hex < P");if(!_&&C>=POW_2_256$1)throw new Error("Expected 0 < hex < 2**256");const T=mod$1(C*C),B=mod$1(T-_1n$1),A=mod$1(x*T+_1n$1);let{isValid:I,value:D}=uvRatio(B,A);if(!I)throw new Error("Point.fromHex: invalid y coordinate");const M=(D&_1n$1)===_1n$1;return(n[31]&128)!==0!==M&&(D=mod$1(-D)),new qs(D,C)}static async fromPrivateKey(n){return(await getExtendedPublicKey(n)).point}toRawBytes(){const n=numberTo32BytesLE(this.y);return n[31]|=this.x&_1n$1?128:0,n}toHex(){return bytesToHex$2(this.toRawBytes())}toX25519(){const{y:n}=this,_=mod$1((_1n$1+n)*invert$1(_1n$1-n));return numberTo32BytesLE(_)}isTorsionFree(){return ExtendedPoint.fromAffine(this).isTorsionFree()}equals(n){return this.x===n.x&&this.y===n.y}negate(){return new qs(mod$1(-this.x),this.y)}add(n){return ExtendedPoint.fromAffine(this).add(ExtendedPoint.fromAffine(n)).toAffine()}subtract(n){return this.add(n.negate())}multiply(n){return ExtendedPoint.fromAffine(this).multiply(n,this).toAffine()}};Point$2.BASE=new Point$2(CURVE$1.Gx,CURVE$1.Gy);Point$2.ZERO=new Point$2(_0n$1,_1n$1);let Signature$2=class fl{constructor(n,_){this.r=n,this.s=_,this.assertValidity()}static fromHex(n){const _=ensureBytes$1(n,64),x=Point$2.fromHex(_.slice(0,32),!1),E=bytesToNumberLE(_.slice(32,64));return new fl(x,E)}assertValidity(){const{r:n,s:_}=this;if(!(n instanceof Point$2))throw new Error("Expected Point instance");return normalizeScalar$1(_,CURVE$1.l,!1),this}toRawBytes(){const n=new Uint8Array(64);return n.set(this.r.toRawBytes()),n.set(numberTo32BytesLE(this.s),32),n}toHex(){return bytesToHex$2(this.toRawBytes())}};function concatBytes$1(...t){if(!t.every(x=>x instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(t.length===1)return t[0];const n=t.reduce((x,E)=>x+E.length,0),_=new Uint8Array(n);for(let x=0,E=0;x<t.length;x++){const S=t[x];_.set(S,E),E+=S.length}return _}const hexes$1=Array.from({length:256},(t,n)=>n.toString(16).padStart(2,"0"));function bytesToHex$2(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let n="";for(let _=0;_<t.length;_++)n+=hexes$1[t[_]];return n}function hexToBytes$2(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const n=new Uint8Array(t.length/2);for(let _=0;_<n.length;_++){const x=_*2,E=t.slice(x,x+2),S=Number.parseInt(E,16);if(Number.isNaN(S)||S<0)throw new Error("Invalid byte sequence");n[_]=S}return n}function numberTo32BytesBE(t){const _=t.toString(16).padStart(64,"0");return hexToBytes$2(_)}function numberTo32BytesLE(t){return numberTo32BytesBE(t).reverse()}function edIsNegative(t){return(mod$1(t)&_1n$1)===_1n$1}function bytesToNumberLE(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+bytesToHex$2(Uint8Array.from(t).reverse()))}const MAX_255B=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function bytes255ToNumberLE(t){return mod$1(bytesToNumberLE(t)&MAX_255B)}function mod$1(t,n=CURVE$1.P){const _=t%n;return _>=_0n$1?_:n+_}function invert$1(t,n=CURVE$1.P){if(t===_0n$1||n<=_0n$1)throw new Error(`invert: expected positive integers, got n=${t} mod=${n}`);let _=mod$1(t,n),x=n,E=_0n$1,S=_1n$1;for(;_!==_0n$1;){const T=x/_,B=x%_,A=E-S*T;x=_,_=B,E=S,S=A}if(x!==_1n$1)throw new Error("invert: does not exist");return mod$1(E,n)}function invertBatch$1(t,n=CURVE$1.P){const _=new Array(t.length),x=t.reduce((S,C,T)=>C===_0n$1?S:(_[T]=S,mod$1(S*C,n)),_1n$1),E=invert$1(x,n);return t.reduceRight((S,C,T)=>C===_0n$1?S:(_[T]=mod$1(S*_[T],n),mod$1(S*C,n)),E),_}function pow2$1(t,n){const{P:_}=CURVE$1;let x=t;for(;n-- >_0n$1;)x*=x,x%=_;return x}function pow_2_252_3(t){const{P:n}=CURVE$1,_=BigInt(5),x=BigInt(10),E=BigInt(20),S=BigInt(40),C=BigInt(80),B=t*t%n*t%n,A=pow2$1(B,_2n$1)*B%n,I=pow2$1(A,_1n$1)*t%n,D=pow2$1(I,_)*I%n,M=pow2$1(D,x)*D%n,V=pow2$1(M,E)*M%n,L=pow2$1(V,S)*V%n,F=pow2$1(L,C)*L%n,j=pow2$1(F,C)*L%n,U=pow2$1(j,x)*D%n;return{pow_p_5_8:pow2$1(U,_2n$1)*t%n,b2:B}}function uvRatio(t,n){const _=mod$1(n*n*n),x=mod$1(_*_*n),E=pow_2_252_3(t*x).pow_p_5_8;let S=mod$1(t*_*E);const C=mod$1(n*S*S),T=S,B=mod$1(S*SQRT_M1),A=C===t,I=C===mod$1(-t),D=C===mod$1(-t*SQRT_M1);return A&&(S=T),(I||D)&&(S=B),edIsNegative(S)&&(S=mod$1(-S)),{isValid:A||I,value:S}}function invertSqrt(t){return uvRatio(_1n$1,t)}function modlLE(t){return mod$1(bytesToNumberLE(t),CURVE$1.l)}function equalBytes(t,n){if(t.length!==n.length)return!1;for(let _=0;_<t.length;_++)if(t[_]!==n[_])return!1;return!0}function ensureBytes$1(t,n){const _=t instanceof Uint8Array?Uint8Array.from(t):hexToBytes$2(t);if(typeof n=="number"&&_.length!==n)throw new Error(`Expected ${n} bytes`);return _}function normalizeScalar$1(t,n,_=!0){if(!n)throw new TypeError("Specify max value");if(typeof t=="number"&&Number.isSafeInteger(t)&&(t=BigInt(t)),typeof t=="bigint"&&t<n){if(_){if(_0n$1<t)return t}else if(_0n$1<=t)return t}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function adjustBytes25519(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function checkPrivateKey(t){if(t=typeof t=="bigint"||typeof t=="number"?numberTo32BytesBE(normalizeScalar$1(t,POW_2_256$1)):ensureBytes$1(t),t.length!==32)throw new Error("Expected 32 bytes");return t}function getKeyFromHash(t){const n=adjustBytes25519(t.slice(0,32)),_=t.slice(32,64),x=modlLE(n),E=Point$2.BASE.multiply(x),S=E.toRawBytes();return{head:n,prefix:_,scalar:x,point:E,pointBytes:S}}let _sha512Sync;async function getExtendedPublicKey(t){return getKeyFromHash(await utils$3.sha512(checkPrivateKey(t)))}async function getPublicKey$1(t){return(await getExtendedPublicKey(t)).pointBytes}async function sign$1(t,n){t=ensureBytes$1(t);const{prefix:_,scalar:x,pointBytes:E}=await getExtendedPublicKey(n),S=modlLE(await utils$3.sha512(_,t)),C=Point$2.BASE.multiply(S),T=modlLE(await utils$3.sha512(C.toRawBytes(),E,t)),B=mod$1(S+T*x,CURVE$1.l);return new Signature$2(C,B).toRawBytes()}function prepareVerification(t,n,_){n=ensureBytes$1(n),_ instanceof Point$2||(_=Point$2.fromHex(_,!1));const{r:x,s:E}=t instanceof Signature$2?t.assertValidity():Signature$2.fromHex(t),S=ExtendedPoint.BASE.multiplyUnsafe(E);return{r:x,s:E,SB:S,pub:_,msg:n}}function finishVerification(t,n,_,x){const E=modlLE(x),S=ExtendedPoint.fromAffine(t).multiplyUnsafe(E);return ExtendedPoint.fromAffine(n).add(S).subtract(_).multiplyUnsafe(CURVE$1.h).equals(ExtendedPoint.ZERO)}async function verify$3(t,n,_){const{r:x,SB:E,msg:S,pub:C}=prepareVerification(t,n,_),T=await utils$3.sha512(x.toRawBytes(),C.toRawBytes(),S);return finishVerification(C,x,E,T)}Point$2.BASE._setWindowSize(8);const crypto$3={node:nodeCrypto,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},utils$3={bytesToHex:bytesToHex$2,hexToBytes:hexToBytes$2,concatBytes:concatBytes$1,getExtendedPublicKey,mod:mod$1,invert:invert$1,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:t=>{if(t=ensureBytes$1(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return mod$1(bytesToNumberLE(t),CURVE$1.l-_1n$1)+_1n$1},randomBytes:(t=32)=>{if(crypto$3.web)return crypto$3.web.getRandomValues(new Uint8Array(t));if(crypto$3.node){const{randomBytes:n}=crypto$3.node;return new Uint8Array(n(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>utils$3.randomBytes(32),sha512:async(...t)=>{const n=concatBytes$1(...t);if(crypto$3.web){const _=await crypto$3.web.subtle.digest("SHA-512",n.buffer);return new Uint8Array(_)}else{if(crypto$3.node)return Uint8Array.from(crypto$3.node.createHash("sha512").update(n).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,n=Point$2.BASE){const _=n.equals(Point$2.BASE)?n:new Point$2(n.x,n.y);return _._setWindowSize(t),_.multiply(_2n$1),_},sha512Sync:void 0};Object.defineProperties(utils$3,{sha512Sync:{configurable:!1,get(){return _sha512Sync},set(t){_sha512Sync||(_sha512Sync=t)}}});const PUBLIC_KEY_BYTE_LENGTH=32,PRIVATE_KEY_BYTE_LENGTH=64,KEYS_BYTE_LENGTH=32;async function generateKey$2(){const t=utils$3.randomPrivateKey(),n=await getPublicKey$1(t);return{privateKey:concatKeys(t,n),publicKey:n}}async function generateKeyFromSeed(t){if(t.length!==KEYS_BYTE_LENGTH)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const n=t,_=await getPublicKey$1(n);return{privateKey:concatKeys(n,_),publicKey:_}}async function hashAndSign$2(t,n){const _=t.subarray(0,KEYS_BYTE_LENGTH);return sign$1(n,_)}async function hashAndVerify$2(t,n,_){return verify$3(n,_,t)}function concatKeys(t,n){const _=new Uint8Array(PRIVATE_KEY_BYTE_LENGTH);for(let x=0;x<KEYS_BYTE_LENGTH;x++)_[x]=t[x],_[KEYS_BYTE_LENGTH+x]=n[x];return _}const base64$5=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});const derivedEmptyPasswordKey={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function create$2(t){const n=t?.algorithm??"AES-GCM";let _=t?.keyLength??16;const x=t?.nonceLength??12,E=t?.digest??"SHA-256",S=t?.saltLength??16,C=t?.iterations??32767,T=webcrypto.get();_*=8;async function B(D,M){const V=T.getRandomValues(new Uint8Array(S)),L=T.getRandomValues(new Uint8Array(x)),F={name:n,iv:L};typeof M=="string"&&(M=fromString$3(M));let j;if(M.length===0){j=await T.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["encrypt"]);try{const H={name:"PBKDF2",salt:V,iterations:C,hash:{name:E}},Y=await T.subtle.importKey("raw",M,{name:"PBKDF2"},!1,["deriveKey"]);j=await T.subtle.deriveKey(H,Y,{name:n,length:_},!0,["encrypt"])}catch{j=await T.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["encrypt"])}}else{const H={name:"PBKDF2",salt:V,iterations:C,hash:{name:E}},Y=await T.subtle.importKey("raw",M,{name:"PBKDF2"},!1,["deriveKey"]);j=await T.subtle.deriveKey(H,Y,{name:n,length:_},!0,["encrypt"])}const U=await T.subtle.encrypt(F,j,D);return concat$5([V,F.iv,new Uint8Array(U)])}async function A(D,M){const V=D.subarray(0,S),L=D.subarray(S,S+x),F=D.subarray(S+x),j={name:n,iv:L};typeof M=="string"&&(M=fromString$3(M));let U;if(M.length===0)try{const Y={name:"PBKDF2",salt:V,iterations:C,hash:{name:E}},Z=await T.subtle.importKey("raw",M,{name:"PBKDF2"},!1,["deriveKey"]);U=await T.subtle.deriveKey(Y,Z,{name:n,length:_},!0,["decrypt"])}catch{U=await T.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["decrypt"])}else{const Y={name:"PBKDF2",salt:V,iterations:C,hash:{name:E}},Z=await T.subtle.importKey("raw",M,{name:"PBKDF2"},!1,["deriveKey"]);U=await T.subtle.deriveKey(Y,Z,{name:n,length:_},!0,["decrypt"])}const H=await T.subtle.decrypt(j,U,F);return new Uint8Array(H)}return{encrypt:B,decrypt:A}}async function exporter(t,n){const x=await create$2().encrypt(t,n);return base64$5.encode(x)}var minimal={},aspromise=asPromise;function asPromise(t,n){for(var _=new Array(arguments.length-1),x=0,E=2,S=!0;E<arguments.length;)_[x++]=arguments[E++];return new Promise(function(T,B){_[x]=function(I){if(S)if(S=!1,I)B(I);else{for(var D=new Array(arguments.length-1),M=0;M<D.length;)D[M++]=arguments[M];T.apply(null,D)}};try{t.apply(n||null,_)}catch(A){S&&(S=!1,B(A))}})}var base64$4={};(function(t){var n=t;n.length=function(T){var B=T.length;if(!B)return 0;for(var A=0;--B%4>1&&T.charAt(B)==="=";)++A;return Math.ceil(T.length*3)/4-A};for(var _=new Array(64),x=new Array(123),E=0;E<64;)x[_[E]=E<26?E+65:E<52?E+71:E<62?E-4:E-59|43]=E++;n.encode=function(T,B,A){for(var I=null,D=[],M=0,V=0,L;B<A;){var F=T[B++];switch(V){case 0:D[M++]=_[F>>2],L=(F&3)<<4,V=1;break;case 1:D[M++]=_[L|F>>4],L=(F&15)<<2,V=2;break;case 2:D[M++]=_[L|F>>6],D[M++]=_[F&63],V=0;break}M>8191&&((I||(I=[])).push(String.fromCharCode.apply(String,D)),M=0)}return V&&(D[M++]=_[L],D[M++]=61,V===1&&(D[M++]=61)),I?(M&&I.push(String.fromCharCode.apply(String,D.slice(0,M))),I.join("")):String.fromCharCode.apply(String,D.slice(0,M))};var S="invalid encoding";n.decode=function(T,B,A){for(var I=A,D=0,M,V=0;V<T.length;){var L=T.charCodeAt(V++);if(L===61&&D>1)break;if((L=x[L])===void 0)throw Error(S);switch(D){case 0:M=L,D=1;break;case 1:B[A++]=M<<2|(L&48)>>4,M=L,D=2;break;case 2:B[A++]=(M&15)<<4|(L&60)>>2,M=L,D=3;break;case 3:B[A++]=(M&3)<<6|L,D=0;break}}if(D===1)throw Error(S);return A-I},n.test=function(T){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(T)}})(base64$4);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(n,_,x){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:_,ctx:x||this}),this};EventEmitter.prototype.off=function(n,_){if(n===void 0)this._listeners={};else if(_===void 0)this._listeners[n]=[];else for(var x=this._listeners[n],E=0;E<x.length;)x[E].fn===_?x.splice(E,1):++E;return this};EventEmitter.prototype.emit=function(n){var _=this._listeners[n];if(_){for(var x=[],E=1;E<arguments.length;)x.push(arguments[E++]);for(E=0;E<_.length;)_[E].fn.apply(_[E++].ctx,x)}return this};var float=factory(factory);function factory(t){return typeof Float32Array<"u"?function(){var n=new Float32Array([-0]),_=new Uint8Array(n.buffer),x=_[3]===128;function E(B,A,I){n[0]=B,A[I]=_[0],A[I+1]=_[1],A[I+2]=_[2],A[I+3]=_[3]}function S(B,A,I){n[0]=B,A[I]=_[3],A[I+1]=_[2],A[I+2]=_[1],A[I+3]=_[0]}t.writeFloatLE=x?E:S,t.writeFloatBE=x?S:E;function C(B,A){return _[0]=B[A],_[1]=B[A+1],_[2]=B[A+2],_[3]=B[A+3],n[0]}function T(B,A){return _[3]=B[A],_[2]=B[A+1],_[1]=B[A+2],_[0]=B[A+3],n[0]}t.readFloatLE=x?C:T,t.readFloatBE=x?T:C}():function(){function n(x,E,S,C){var T=E<0?1:0;if(T&&(E=-E),E===0)x(1/E>0?0:2147483648,S,C);else if(isNaN(E))x(2143289344,S,C);else if(E>34028234663852886e22)x((T<<31|2139095040)>>>0,S,C);else if(E<11754943508222875e-54)x((T<<31|Math.round(E/1401298464324817e-60))>>>0,S,C);else{var B=Math.floor(Math.log(E)/Math.LN2),A=Math.round(E*Math.pow(2,-B)*8388608)&8388607;x((T<<31|B+127<<23|A)>>>0,S,C)}}t.writeFloatLE=n.bind(null,writeUintLE$1),t.writeFloatBE=n.bind(null,writeUintBE$1);function _(x,E,S){var C=x(E,S),T=(C>>31)*2+1,B=C>>>23&255,A=C&8388607;return B===255?A?NaN:T*(1/0):B===0?T*1401298464324817e-60*A:T*Math.pow(2,B-150)*(A+8388608)}t.readFloatLE=_.bind(null,readUintLE$1),t.readFloatBE=_.bind(null,readUintBE$1)}(),typeof Float64Array<"u"?function(){var n=new Float64Array([-0]),_=new Uint8Array(n.buffer),x=_[7]===128;function E(B,A,I){n[0]=B,A[I]=_[0],A[I+1]=_[1],A[I+2]=_[2],A[I+3]=_[3],A[I+4]=_[4],A[I+5]=_[5],A[I+6]=_[6],A[I+7]=_[7]}function S(B,A,I){n[0]=B,A[I]=_[7],A[I+1]=_[6],A[I+2]=_[5],A[I+3]=_[4],A[I+4]=_[3],A[I+5]=_[2],A[I+6]=_[1],A[I+7]=_[0]}t.writeDoubleLE=x?E:S,t.writeDoubleBE=x?S:E;function C(B,A){return _[0]=B[A],_[1]=B[A+1],_[2]=B[A+2],_[3]=B[A+3],_[4]=B[A+4],_[5]=B[A+5],_[6]=B[A+6],_[7]=B[A+7],n[0]}function T(B,A){return _[7]=B[A],_[6]=B[A+1],_[5]=B[A+2],_[4]=B[A+3],_[3]=B[A+4],_[2]=B[A+5],_[1]=B[A+6],_[0]=B[A+7],n[0]}t.readDoubleLE=x?C:T,t.readDoubleBE=x?T:C}():function(){function n(x,E,S,C,T,B){var A=C<0?1:0;if(A&&(C=-C),C===0)x(0,T,B+E),x(1/C>0?0:2147483648,T,B+S);else if(isNaN(C))x(0,T,B+E),x(2146959360,T,B+S);else if(C>17976931348623157e292)x(0,T,B+E),x((A<<31|2146435072)>>>0,T,B+S);else{var I;if(C<22250738585072014e-324)I=C/5e-324,x(I>>>0,T,B+E),x((A<<31|I/4294967296)>>>0,T,B+S);else{var D=Math.floor(Math.log(C)/Math.LN2);D===1024&&(D=1023),I=C*Math.pow(2,-D),x(I*4503599627370496>>>0,T,B+E),x((A<<31|D+1023<<20|I*1048576&1048575)>>>0,T,B+S)}}}t.writeDoubleLE=n.bind(null,writeUintLE$1,0,4),t.writeDoubleBE=n.bind(null,writeUintBE$1,4,0);function _(x,E,S,C,T){var B=x(C,T+E),A=x(C,T+S),I=(A>>31)*2+1,D=A>>>20&2047,M=4294967296*(A&1048575)+B;return D===2047?M?NaN:I*(1/0):D===0?I*5e-324*M:I*Math.pow(2,D-1075)*(M+4503599627370496)}t.readDoubleLE=_.bind(null,readUintLE$1,0,4),t.readDoubleBE=_.bind(null,readUintBE$1,4,0)}(),t}function writeUintLE$1(t,n,_){n[_]=t&255,n[_+1]=t>>>8&255,n[_+2]=t>>>16&255,n[_+3]=t>>>24}function writeUintBE$1(t,n,_){n[_]=t>>>24,n[_+1]=t>>>16&255,n[_+2]=t>>>8&255,n[_+3]=t&255}function readUintLE$1(t,n){return(t[n]|t[n+1]<<8|t[n+2]<<16|t[n+3]<<24)>>>0}function readUintBE$1(t,n){return(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}var utf8$5={};(function(t){var n=t;n.length=function(x){for(var E=0,S=0,C=0;C<x.length;++C)S=x.charCodeAt(C),S<128?E+=1:S<2048?E+=2:(S&64512)===55296&&(x.charCodeAt(C+1)&64512)===56320?(++C,E+=4):E+=3;return E},n.read=function(x,E,S){var C=S-E;if(C<1)return"";for(var T=null,B=[],A=0,I;E<S;)I=x[E++],I<128?B[A++]=I:I>191&&I<224?B[A++]=(I&31)<<6|x[E++]&63:I>239&&I<365?(I=((I&7)<<18|(x[E++]&63)<<12|(x[E++]&63)<<6|x[E++]&63)-65536,B[A++]=55296+(I>>10),B[A++]=56320+(I&1023)):B[A++]=(I&15)<<12|(x[E++]&63)<<6|x[E++]&63,A>8191&&((T||(T=[])).push(String.fromCharCode.apply(String,B)),A=0);return T?(A&&T.push(String.fromCharCode.apply(String,B.slice(0,A))),T.join("")):String.fromCharCode.apply(String,B.slice(0,A))},n.write=function(x,E,S){for(var C=S,T,B,A=0;A<x.length;++A)T=x.charCodeAt(A),T<128?E[S++]=T:T<2048?(E[S++]=T>>6|192,E[S++]=T&63|128):(T&64512)===55296&&((B=x.charCodeAt(A+1))&64512)===56320?(T=65536+((T&1023)<<10)+(B&1023),++A,E[S++]=T>>18|240,E[S++]=T>>12&63|128,E[S++]=T>>6&63|128,E[S++]=T&63|128):(E[S++]=T>>12|224,E[S++]=T>>6&63|128,E[S++]=T&63|128);return S-C}})(utf8$5);var pool_1=pool;function pool(t,n,_){var x=_||8192,E=x>>>1,S=null,C=x;return function(B){if(B<1||B>E)return t(B);C+B>x&&(S=t(x),C=0);var A=n.call(S,C,C+=B);return C&7&&(C=(C|7)+1),A}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=n;var t=requireMinimal();function n(S,C){this.lo=S>>>0,this.hi=C>>>0}var _=n.zero=new n(0,0);_.toNumber=function(){return 0},_.zzEncode=_.zzDecode=function(){return this},_.length=function(){return 1};var x=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(C){if(C===0)return _;var T=C<0;T&&(C=-C);var B=C>>>0,A=(C-B)/4294967296>>>0;return T&&(A=~A>>>0,B=~B>>>0,++B>4294967295&&(B=0,++A>4294967295&&(A=0))),new n(B,A)},n.from=function(C){if(typeof C=="number")return n.fromNumber(C);if(t.isString(C))if(t.Long)C=t.Long.fromString(C);else return n.fromNumber(parseInt(C,10));return C.low||C.high?new n(C.low>>>0,C.high>>>0):_},n.prototype.toNumber=function(C){if(!C&&this.hi>>>31){var T=~this.lo+1>>>0,B=~this.hi>>>0;return T||(B=B+1>>>0),-(T+B*4294967296)}return this.lo+this.hi*4294967296},n.prototype.toLong=function(C){return t.Long?new t.Long(this.lo|0,this.hi|0,!!C):{low:this.lo|0,high:this.hi|0,unsigned:!!C}};var E=String.prototype.charCodeAt;return n.fromHash=function(C){return C===x?_:new n((E.call(C,0)|E.call(C,1)<<8|E.call(C,2)<<16|E.call(C,3)<<24)>>>0,(E.call(C,4)|E.call(C,5)<<8|E.call(C,6)<<16|E.call(C,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var C=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^C)>>>0,this.lo=(this.lo<<1^C)>>>0,this},n.prototype.zzDecode=function(){var C=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^C)>>>0,this.hi=(this.hi>>>1^C)>>>0,this},n.prototype.length=function(){var C=this.lo,T=(this.lo>>>28|this.hi<<4)>>>0,B=this.hi>>>24;return B===0?T===0?C<16384?C<128?1:2:C<2097152?3:4:T<16384?T<128?5:6:T<2097152?7:8:B<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(t){var n=t;n.asPromise=aspromise,n.base64=base64$4,n.EventEmitter=eventemitter,n.float=float,n.inquire=inquire_1,n.utf8=utf8$5,n.pool=pool_1,n.LongBits=requireLongbits(),n.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),n.global=n.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(S){return typeof S=="number"&&isFinite(S)&&Math.floor(S)===S},n.isString=function(S){return typeof S=="string"||S instanceof String},n.isObject=function(S){return S&&typeof S=="object"},n.isset=n.isSet=function(S,C){var T=S[C];return T!=null&&S.hasOwnProperty(C)?typeof T!="object"||(Array.isArray(T)?T.length:Object.keys(T).length)>0:!1},n.Buffer=function(){try{var E=n.inquire("buffer").Buffer;return E.prototype.utf8Write?E:null}catch{return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(S){return typeof S=="number"?n.Buffer?n._Buffer_allocUnsafe(S):new n.Array(S):n.Buffer?n._Buffer_from(S):typeof Uint8Array>"u"?S:new Uint8Array(S)},n.Array=typeof Uint8Array<"u"?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(S){return S?n.LongBits.from(S).toHash():n.LongBits.zeroHash},n.longFromHash=function(S,C){var T=n.LongBits.fromHash(S);return n.Long?n.Long.fromBits(T.lo,T.hi,C):T.toNumber(!!C)};function _(E,S,C){for(var T=Object.keys(S),B=0;B<T.length;++B)(E[T[B]]===void 0||!C)&&(E[T[B]]=S[T[B]]);return E}n.merge=_,n.lcFirst=function(S){return S.charAt(0).toLowerCase()+S.substring(1)};function x(E){function S(C,T){if(!(this instanceof S))return new S(C,T);Object.defineProperty(this,"message",{get:function(){return C}}),Error.captureStackTrace?Error.captureStackTrace(this,S):Object.defineProperty(this,"stack",{value:new Error().stack||""}),T&&_(this,T)}return S.prototype=Object.create(Error.prototype,{constructor:{value:S,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return E},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),S}n.newError=x,n.ProtocolError=x("ProtocolError"),n.oneOfGetter=function(S){for(var C={},T=0;T<S.length;++T)C[S[T]]=1;return function(){for(var B=Object.keys(this),A=B.length-1;A>-1;--A)if(C[B[A]]===1&&this[B[A]]!==void 0&&this[B[A]]!==null)return B[A]}},n.oneOfSetter=function(S){return function(C){for(var T=0;T<S.length;++T)S[T]!==C&&delete this[S[T]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var E=n.Buffer;if(!E){n._Buffer_from=n._Buffer_allocUnsafe=null;return}n._Buffer_from=E.from!==Uint8Array.from&&E.from||function(C,T){return new E(C,T)},n._Buffer_allocUnsafe=E.allocUnsafe||function(C){return new E(C)}}}(minimal)),minimal}var reader$1=Reader$1,util$5=requireMinimal(),BufferReader$1,LongBits$1=util$5.LongBits,utf8$4=util$5.utf8;function indexOutOfRange(t,n){return RangeError("index out of range: "+t.pos+" + "+(n||1)+" > "+t.len)}function Reader$1(t){this.buf=t,this.pos=0,this.len=t.length}var create_array=typeof Uint8Array<"u"?function t(n){if(n instanceof Uint8Array||Array.isArray(n))return new Reader$1(n);throw Error("illegal buffer")}:function t(n){if(Array.isArray(n))return new Reader$1(n);throw Error("illegal buffer")},create$1=function t(){return util$5.Buffer?function(_){return(Reader$1.create=function(E){return util$5.Buffer.isBuffer(E)?new BufferReader$1(E):create_array(E)})(_)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$5.Array.prototype.subarray||util$5.Array.prototype.slice;Reader$1.prototype.uint32=function t(){var n=4294967295;return function(){if(n=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(n=(n|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(n=(n|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return n;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return n}}();Reader$1.prototype.int32=function t(){return this.uint32()|0};Reader$1.prototype.sint32=function t(){var n=this.uint32();return n>>>1^-(n&1)|0};function readLongVarint(){var t=new LongBits$1(0,0),n=0;if(this.len-this.pos>4){for(;n<4;++n)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<n*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;n=0}else{for(;n<3;++n){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<n*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<n*7)>>>0,t}if(this.len-this.pos>4){for(;n<5;++n)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<n*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;n<5;++n){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<n*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function t(){return this.uint32()!==0};function readFixed32_end(t,n){return(t[n-4]|t[n-3]<<8|t[n-2]<<16|t[n-1]<<24)>>>0}Reader$1.prototype.fixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$1(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var n=util$5.float.readFloatLE(this.buf,this.pos);return this.pos+=4,n};Reader$1.prototype.double=function t(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var n=util$5.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,n};Reader$1.prototype.bytes=function t(){var n=this.uint32(),_=this.pos,x=this.pos+n;if(x>this.len)throw indexOutOfRange(this,n);if(this.pos+=n,Array.isArray(this.buf))return this.buf.slice(_,x);if(_===x){var E=util$5.Buffer;return E?E.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,_,x)};Reader$1.prototype.string=function t(){var n=this.bytes();return utf8$4.read(n,0,n.length)};Reader$1.prototype.skip=function t(n){if(typeof n=="number"){if(this.pos+n>this.len)throw indexOutOfRange(this,n);this.pos+=n}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Reader$1._configure=function(t){BufferReader$1=t,Reader$1.create=create$1(),BufferReader$1._configure();var n=util$5.Long?"toLong":"toNumber";util$5.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[n](!1)},uint64:function(){return readLongVarint.call(this)[n](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[n](!1)},fixed64:function(){return readFixed64.call(this)[n](!0)},sfixed64:function(){return readFixed64.call(this)[n](!1)}})};const ReaderClass=getDefaultExportFromCjs(reader$1);var reader_buffer=BufferReader,Reader=reader$1;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$4=requireMinimal();function BufferReader(t){Reader.call(this,t)}BufferReader._configure=function(){util$4.Buffer&&(BufferReader.prototype._slice=util$4.Buffer.prototype.slice)};BufferReader.prototype.string=function t(){var n=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+n,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+n,this.len))};BufferReader._configure();const ReaderBufferClass=getDefaultExportFromCjs(reader_buffer);var minimalExports=requireMinimal();const util$3=getDefaultExportFromCjs(minimalExports);var writer$1=Writer$1,util$2=requireMinimal(),BufferWriter$1,LongBits=util$2.LongBits,base64$3=util$2.base64,utf8$3=util$2.utf8;function Op(t,n,_){this.fn=t,this.len=n,this.next=void 0,this.val=_}function noop$2(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer$1(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create=function t(){return util$2.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create();Writer$1.alloc=function t(n){return new util$2.Array(n)};util$2.Array!==Array&&(Writer$1.alloc=util$2.pool(Writer$1.alloc,util$2.Array.prototype.subarray));Writer$1.prototype._push=function t(n,_,x){return this.tail=this.tail.next=new Op(n,_,x),this.len+=_,this};function writeByte(t,n,_){n[_]=t&255}function writeVarint32(t,n,_){for(;t>127;)n[_++]=t&127|128,t>>>=7;n[_]=t}function VarintOp(t,n){this.len=t,this.next=void 0,this.val=n}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function t(n){return this.len+=(this.tail=this.tail.next=new VarintOp((n=n>>>0)<128?1:n<16384?2:n<2097152?3:n<268435456?4:5,n)).len,this};Writer$1.prototype.int32=function t(n){return n<0?this._push(writeVarint64,10,LongBits.fromNumber(n)):this.uint32(n)};Writer$1.prototype.sint32=function t(n){return this.uint32((n<<1^n>>31)>>>0)};function writeVarint64(t,n,_){for(;t.hi;)n[_++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)n[_++]=t.lo&127|128,t.lo=t.lo>>>7;n[_++]=t.lo}Writer$1.prototype.uint64=function t(n){var _=LongBits.from(n);return this._push(writeVarint64,_.length(),_)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function t(n){var _=LongBits.from(n).zzEncode();return this._push(writeVarint64,_.length(),_)};Writer$1.prototype.bool=function t(n){return this._push(writeByte,1,n?1:0)};function writeFixed32(t,n,_){n[_]=t&255,n[_+1]=t>>>8&255,n[_+2]=t>>>16&255,n[_+3]=t>>>24}Writer$1.prototype.fixed32=function t(n){return this._push(writeFixed32,4,n>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function t(n){var _=LongBits.from(n);return this._push(writeFixed32,4,_.lo)._push(writeFixed32,4,_.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function t(n){return this._push(util$2.float.writeFloatLE,4,n)};Writer$1.prototype.double=function t(n){return this._push(util$2.float.writeDoubleLE,8,n)};var writeBytes=util$2.Array.prototype.set?function t(n,_,x){_.set(n,x)}:function t(n,_,x){for(var E=0;E<n.length;++E)_[x+E]=n[E]};Writer$1.prototype.bytes=function t(n){var _=n.length>>>0;if(!_)return this._push(writeByte,1,0);if(util$2.isString(n)){var x=Writer$1.alloc(_=base64$3.length(n));base64$3.decode(n,x,0),n=x}return this.uint32(_)._push(writeBytes,_,n)};Writer$1.prototype.string=function t(n){var _=utf8$3.length(n);return _?this.uint32(_)._push(utf8$3.write,_,n):this._push(writeByte,1,0)};Writer$1.prototype.fork=function t(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this};Writer$1.prototype.reset=function t(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this};Writer$1.prototype.ldelim=function t(){var n=this.head,_=this.tail,x=this.len;return this.reset().uint32(x),x&&(this.tail.next=n.next,this.tail=_,this.len+=x),this};Writer$1.prototype.finish=function t(){for(var n=this.head.next,_=this.constructor.alloc(this.len),x=0;n;)n.fn(n.val,_,x),x+=n.len,n=n.next;return _};Writer$1._configure=function(t){BufferWriter$1=t,Writer$1.create=create(),BufferWriter$1._configure()};const WriterClass=getDefaultExportFromCjs(writer$1);var writer_buffer=BufferWriter,Writer=writer$1;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$1=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$1._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$1.Buffer&&util$1.Buffer.prototype instanceof Uint8Array&&util$1.Buffer.prototype.set.name==="set"?function(n,_,x){_.set(n,x)}:function(n,_,x){if(n.copy)n.copy(_,x,0,n.length);else for(var E=0;E<n.length;)_[x++]=n[E++]}};BufferWriter.prototype.bytes=function t(n){util$1.isString(n)&&(n=util$1._Buffer_from(n,"base64"));var _=n.length>>>0;return this.uint32(_),_&&this._push(BufferWriter.writeBytesBuffer,_,n),this};function writeStringBuffer(t,n,_){t.length<40?util$1.utf8.write(t,n,_):n.utf8Write?n.utf8Write(t,_):n.write(t,_)}BufferWriter.prototype.string=function t(n){var _=util$1.Buffer.byteLength(n);return this.uint32(_),_&&this._push(writeStringBuffer,_,n),this};BufferWriter._configure();const WriterBufferClass=getDefaultExportFromCjs(writer_buffer);function configure(){util$3._configure(),ReaderClass._configure(ReaderBufferClass),WriterClass._configure(WriterBufferClass)}configure();const methods=["uint64","int64","sint64","fixed64","sfixed64"];function patchReader(t){for(const n of methods){if(t[n]==null)continue;const _=t[n];t[n]=function(){return BigInt(_.call(this).toString())}}return t}function reader(t){return patchReader(new ReaderClass(t))}function patchWriter(t){for(const n of methods){if(t[n]==null)continue;const _=t[n];t[n]=function(x){return _.call(this,x.toString())}}return t}function writer(){return patchWriter(WriterClass.create())}function decodeMessage(t,n){const _=reader(t instanceof Uint8Array?t:t.subarray());return n.decode(_)}function encodeMessage(t,n){const _=writer();return n.encode(t,_,{lengthDelimited:!1}),_.finish()}var CODEC_TYPES;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(CODEC_TYPES||(CODEC_TYPES={}));function createCodec$3(t,n,_,x){return{name:t,type:n,encode:_,decode:x}}function enumeration(t){function n(E){if(t[E.toString()]==null)throw new Error("Invalid enum value");return t[E]}const _=function(S,C){const T=n(S);C.int32(T)},x=function(S){const C=S.int32();return n(C)};return createCodec$3("enum",CODEC_TYPES.VARINT,_,x)}function message(t,n){return createCodec$3("message",CODEC_TYPES.LENGTH_DELIMITED,t,n)}var KeyType$1;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"})(KeyType$1||(KeyType$1={}));var __KeyTypeValues;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"})(__KeyTypeValues||(__KeyTypeValues={}));(function(t){t.codec=()=>enumeration(__KeyTypeValues)})(KeyType$1||(KeyType$1={}));var PublicKey;(function(t){let n;t.codec=()=>(n==null&&(n=message((_,x,E={})=>{E.lengthDelimited!==!1&&x.fork(),_.Type!=null&&(x.uint32(8),KeyType$1.codec().encode(_.Type,x)),_.Data!=null&&(x.uint32(18),x.bytes(_.Data)),E.lengthDelimited!==!1&&x.ldelim()},(_,x)=>{const E={},S=x==null?_.len:_.pos+x;for(;_.pos<S;){const C=_.uint32();switch(C>>>3){case 1:E.Type=KeyType$1.codec().decode(_);break;case 2:E.Data=_.bytes();break;default:_.skipType(C&7);break}}return E})),n),t.encode=_=>encodeMessage(_,t.codec()),t.decode=_=>decodeMessage(_,t.codec())})(PublicKey||(PublicKey={}));var PrivateKey;(function(t){let n;t.codec=()=>(n==null&&(n=message((_,x,E={})=>{E.lengthDelimited!==!1&&x.fork(),_.Type!=null&&(x.uint32(8),KeyType$1.codec().encode(_.Type,x)),_.Data!=null&&(x.uint32(18),x.bytes(_.Data)),E.lengthDelimited!==!1&&x.ldelim()},(_,x)=>{const E={},S=x==null?_.len:_.pos+x;for(;_.pos<S;){const C=_.uint32();switch(C>>>3){case 1:E.Type=KeyType$1.codec().decode(_);break;case 2:E.Data=_.bytes();break;default:_.skipType(C&7);break}}return E})),n),t.encode=_=>encodeMessage(_,t.codec()),t.decode=_=>decodeMessage(_,t.codec())})(PrivateKey||(PrivateKey={}));class Ed25519PublicKey{constructor(n){wt(this,"_key");this._key=ensureKey(n,PUBLIC_KEY_BYTE_LENGTH)}async verify(n,_){return hashAndVerify$2(this._key,_,n)}marshal(){return this._key}get bytes(){return PublicKey.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(n){return equals(this.bytes,n.bytes)}async hash(){const{bytes:n}=await sha256$6.digest(this.bytes);return n}}class Ed25519PrivateKey{constructor(n,_){wt(this,"_key");wt(this,"_publicKey");this._key=ensureKey(n,PRIVATE_KEY_BYTE_LENGTH),this._publicKey=ensureKey(_,PUBLIC_KEY_BYTE_LENGTH)}async sign(n){return hashAndSign$2(this._key,n)}get public(){return new Ed25519PublicKey(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(n){return equals(this.bytes,n.bytes)}async hash(){const{bytes:n}=await sha256$6.digest(this.bytes);return n}async id(){const n=identity$4.digest(this.public.bytes);return base58btc.encode(n.bytes).substring(1)}async export(n,_="libp2p-key"){if(_==="libp2p-key")return exporter(this.bytes,n);throw new CodeError(`export format '${_}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function unmarshalEd25519PrivateKey(t){if(t.length>PRIVATE_KEY_BYTE_LENGTH){t=ensureKey(t,PRIVATE_KEY_BYTE_LENGTH+PUBLIC_KEY_BYTE_LENGTH);const x=t.subarray(0,PRIVATE_KEY_BYTE_LENGTH),E=t.subarray(PRIVATE_KEY_BYTE_LENGTH,t.length);return new Ed25519PrivateKey(x,E)}t=ensureKey(t,PRIVATE_KEY_BYTE_LENGTH);const n=t.subarray(0,PRIVATE_KEY_BYTE_LENGTH),_=t.subarray(PUBLIC_KEY_BYTE_LENGTH);return new Ed25519PrivateKey(n,_)}function unmarshalEd25519PublicKey(t){return t=ensureKey(t,PUBLIC_KEY_BYTE_LENGTH),new Ed25519PublicKey(t)}async function generateKeyPair$3(){const{privateKey:t,publicKey:n}=await generateKey$2();return new Ed25519PrivateKey(t,n)}async function generateKeyPairFromSeed(t){const{privateKey:n,publicKey:_}=await generateKeyFromSeed(t);return new Ed25519PrivateKey(n,_)}function ensureKey(t,n){if(t=Uint8Array.from(t??[]),t.length!==n)throw new CodeError(`Key must be a Uint8Array of length ${n}, got ${t.length}`,"ERR_INVALID_KEY_TYPE");return t}const Ed25519=Object.freeze(Object.defineProperty({__proto__:null,Ed25519PrivateKey,Ed25519PublicKey,generateKeyPair:generateKeyPair$3,generateKeyPairFromSeed,unmarshalEd25519PrivateKey,unmarshalEd25519PublicKey},Symbol.toStringTag,{value:"Module"}));function bigIntegerToUintBase64url(t,n){let _=Uint8Array.from(t.abs().toByteArray());if(_=_[0]===0?_.subarray(1):_,n!=null){if(_.length>n)throw new Error("byte array longer than desired length");_=concat$5([new Uint8Array(n-_.length),_])}return toString$6(_,"base64url")}function base64urlToBigInteger(t){const n=base64urlToBuffer(t);return new forge$n.jsbn.BigInteger(toString$6(n,"base16"),16)}function base64urlToBuffer(t,n){let _=fromString$3(t,"base64urlpad");if(n!=null){if(_.length>n)throw new Error("byte array longer than desired length");_=concat$5([new Uint8Array(n-_.length),_])}return _}const bits={"P-256":256,"P-384":384,"P-521":521},curveTypes=Object.keys(bits);curveTypes.join(" / ");async function importer(t,n){const _=base64$5.decode(t);return create$2().decrypt(_,n)}var forge=forge$m,sha512$1=forge.sha512=forge.sha512||{};forge.md.sha512=forge.md.algorithms.sha512=sha512$1;var sha384=forge.sha384=forge.sha512.sha384=forge.sha512.sha384||{};sha384.create=function(){return sha512$1.create("SHA-384")};forge.md.sha384=forge.md.algorithms.sha384=sha384;forge.sha512.sha256=forge.sha512.sha256||{create:function(){return sha512$1.create("SHA-512/256")}};forge.md["sha512/256"]=forge.md.algorithms["sha512/256"]=forge.sha512.sha256;forge.sha512.sha224=forge.sha512.sha224||{create:function(){return sha512$1.create("SHA-512/224")}};forge.md["sha512/224"]=forge.md.algorithms["sha512/224"]=forge.sha512.sha224;sha512$1.create=function(t){if(_initialized||_init(),typeof t>"u"&&(t="SHA-512"),!(t in _states))throw new Error("Invalid SHA-512 algorithm: "+t);for(var n=_states[t],_=null,x=forge.util.createBuffer(),E=new Array(80),S=0;S<80;++S)E[S]=new Array(2);var C=64;switch(t){case"SHA-384":C=48;break;case"SHA-512/256":C=32;break;case"SHA-512/224":C=28;break}var T={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:C,messageLength:0,fullMessageLength:null,messageLengthSize:16};return T.start=function(){T.messageLength=0,T.fullMessageLength=T.messageLength128=[];for(var B=T.messageLengthSize/4,A=0;A<B;++A)T.fullMessageLength.push(0);x=forge.util.createBuffer(),_=new Array(n.length);for(var A=0;A<n.length;++A)_[A]=n[A].slice(0);return T},T.start(),T.update=function(B,A){A==="utf8"&&(B=forge.util.encodeUtf8(B));var I=B.length;T.messageLength+=I,I=[I/4294967296>>>0,I>>>0];for(var D=T.fullMessageLength.length-1;D>=0;--D)T.fullMessageLength[D]+=I[1],I[1]=I[0]+(T.fullMessageLength[D]/4294967296>>>0),T.fullMessageLength[D]=T.fullMessageLength[D]>>>0,I[0]=I[1]/4294967296>>>0;return x.putBytes(B),_update(_,E,x),(x.read>2048||x.length()===0)&&x.compact(),T},T.digest=function(){var B=forge.util.createBuffer();B.putBytes(x.bytes());var A=T.fullMessageLength[T.fullMessageLength.length-1]+T.messageLengthSize,I=A&T.blockLength-1;B.putBytes(_padding.substr(0,T.blockLength-I));for(var D,M,V=T.fullMessageLength[0]*8,L=0;L<T.fullMessageLength.length-1;++L)D=T.fullMessageLength[L+1]*8,M=D/4294967296>>>0,V+=M,B.putInt32(V>>>0),V=D>>>0;B.putInt32(V);for(var F=new Array(_.length),L=0;L<_.length;++L)F[L]=_[L].slice(0);_update(F,E,B);var j=forge.util.createBuffer(),U;t==="SHA-512"?U=F.length:t==="SHA-384"?U=F.length-2:U=F.length-4;for(var L=0;L<U;++L)j.putInt32(F[L][0]),(L!==U-1||t!=="SHA-512/224")&&j.putInt32(F[L][1]);return j},T};var _padding=null,_initialized=!1,_k=null,_states=null;function _init(){_padding=String.fromCharCode(128),_padding+=forge.util.fillString(String.fromCharCode(0),128),_k=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],_states={},_states["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],_states["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],_states["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],_states["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],_initialized=!0}function _update(t,n,_){for(var x,E,S,C,T,B,A,I,D,M,V,L,F,j,U,H,Y,Z,ne,re,X,ce,ue,_e,ye,ie,W,O,z,J,ee,ae,oe,se,G,q=_.length();q>=128;){for(z=0;z<16;++z)n[z][0]=_.getInt32()>>>0,n[z][1]=_.getInt32()>>>0;for(;z<80;++z)ae=n[z-2],J=ae[0],ee=ae[1],x=((J>>>19|ee<<13)^(ee>>>29|J<<3)^J>>>6)>>>0,E=((J<<13|ee>>>19)^(ee<<3|J>>>29)^(J<<26|ee>>>6))>>>0,se=n[z-15],J=se[0],ee=se[1],S=((J>>>1|ee<<31)^(J>>>8|ee<<24)^J>>>7)>>>0,C=((J<<31|ee>>>1)^(J<<24|ee>>>8)^(J<<25|ee>>>7))>>>0,oe=n[z-7],G=n[z-16],ee=E+oe[1]+C+G[1],n[z][0]=x+oe[0]+S+G[0]+(ee/4294967296>>>0)>>>0,n[z][1]=ee>>>0;for(F=t[0][0],j=t[0][1],U=t[1][0],H=t[1][1],Y=t[2][0],Z=t[2][1],ne=t[3][0],re=t[3][1],X=t[4][0],ce=t[4][1],ue=t[5][0],_e=t[5][1],ye=t[6][0],ie=t[6][1],W=t[7][0],O=t[7][1],z=0;z<80;++z)A=((X>>>14|ce<<18)^(X>>>18|ce<<14)^(ce>>>9|X<<23))>>>0,I=((X<<18|ce>>>14)^(X<<14|ce>>>18)^(ce<<23|X>>>9))>>>0,D=(ye^X&(ue^ye))>>>0,M=(ie^ce&(_e^ie))>>>0,T=((F>>>28|j<<4)^(j>>>2|F<<30)^(j>>>7|F<<25))>>>0,B=((F<<4|j>>>28)^(j<<30|F>>>2)^(j<<25|F>>>7))>>>0,V=(F&U|Y&(F^U))>>>0,L=(j&H|Z&(j^H))>>>0,ee=O+I+M+_k[z][1]+n[z][1],x=W+A+D+_k[z][0]+n[z][0]+(ee/4294967296>>>0)>>>0,E=ee>>>0,ee=B+L,S=T+V+(ee/4294967296>>>0)>>>0,C=ee>>>0,W=ye,O=ie,ye=ue,ie=_e,ue=X,_e=ce,ee=re+E,X=ne+x+(ee/4294967296>>>0)>>>0,ce=ee>>>0,ne=Y,re=Z,Y=U,Z=H,U=F,H=j,ee=E+C,F=x+S+(ee/4294967296>>>0)>>>0,j=ee>>>0;ee=t[0][1]+j,t[0][0]=t[0][0]+F+(ee/4294967296>>>0)>>>0,t[0][1]=ee>>>0,ee=t[1][1]+H,t[1][0]=t[1][0]+U+(ee/4294967296>>>0)>>>0,t[1][1]=ee>>>0,ee=t[2][1]+Z,t[2][0]=t[2][0]+Y+(ee/4294967296>>>0)>>>0,t[2][1]=ee>>>0,ee=t[3][1]+re,t[3][0]=t[3][0]+ne+(ee/4294967296>>>0)>>>0,t[3][1]=ee>>>0,ee=t[4][1]+ce,t[4][0]=t[4][0]+X+(ee/4294967296>>>0)>>>0,t[4][1]=ee>>>0,ee=t[5][1]+_e,t[5][0]=t[5][0]+ue+(ee/4294967296>>>0)>>>0,t[5][1]=ee>>>0,ee=t[6][1]+ie,t[6][0]=t[6][0]+ye+(ee/4294967296>>>0)>>>0,t[6][1]=ee>>>0,ee=t[7][1]+O,t[7][0]=t[7][0]+W+(ee/4294967296>>>0)>>>0,t[7][1]=ee>>>0,q-=128}}/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const _0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),_3n=BigInt(3),_8n=BigInt(8),CURVE=Object.freeze({a:_0n,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:_1n,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),divNearest=(t,n)=>(t+n/_2n)/n,endo={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){const{n}=CURVE,_=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),x=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),E=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),S=_,C=BigInt("0x100000000000000000000000000000000"),T=divNearest(S*t,n),B=divNearest(-x*t,n);let A=mod(t-T*_-B*E,n),I=mod(-T*x-B*S,n);const D=A>C,M=I>C;if(D&&(A=n-A),M&&(I=n-I),A>C||I>C)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:D,k1:A,k2neg:M,k2:I}}},fieldLen=32,groupLen=32,hashLen=32,compressedLen=fieldLen+1,uncompressedLen=2*fieldLen+1;function weierstrass(t){const{a:n,b:_}=CURVE,x=mod(t*t),E=mod(x*t);return mod(E+n*t+_)}const USE_ENDOMORPHISM=CURVE.a===_0n;class ShaError extends Error{constructor(n){super(n)}}function assertJacPoint(t){if(!(t instanceof JacobianPoint))throw new TypeError("JacobianPoint expected")}class JacobianPoint{constructor(n,_,x){this.x=n,this.y=_,this.z=x}static fromAffine(n){if(!(n instanceof Point$1))throw new TypeError("JacobianPoint#fromAffine: expected Point");return n.equals(Point$1.ZERO)?JacobianPoint.ZERO:new JacobianPoint(n.x,n.y,_1n)}static toAffineBatch(n){const _=invertBatch(n.map(x=>x.z));return n.map((x,E)=>x.toAffine(_[E]))}static normalizeZ(n){return JacobianPoint.toAffineBatch(n).map(JacobianPoint.fromAffine)}equals(n){assertJacPoint(n);const{x:_,y:x,z:E}=this,{x:S,y:C,z:T}=n,B=mod(E*E),A=mod(T*T),I=mod(_*A),D=mod(S*B),M=mod(mod(x*T)*A),V=mod(mod(C*E)*B);return I===D&&M===V}negate(){return new JacobianPoint(this.x,mod(-this.y),this.z)}double(){const{x:n,y:_,z:x}=this,E=mod(n*n),S=mod(_*_),C=mod(S*S),T=n+S,B=mod(_2n*(mod(T*T)-E-C)),A=mod(_3n*E),I=mod(A*A),D=mod(I-_2n*B),M=mod(A*(B-D)-_8n*C),V=mod(_2n*_*x);return new JacobianPoint(D,M,V)}add(n){assertJacPoint(n);const{x:_,y:x,z:E}=this,{x:S,y:C,z:T}=n;if(S===_0n||C===_0n)return this;if(_===_0n||x===_0n)return n;const B=mod(E*E),A=mod(T*T),I=mod(_*A),D=mod(S*B),M=mod(mod(x*T)*A),V=mod(mod(C*E)*B),L=mod(D-I),F=mod(V-M);if(L===_0n)return F===_0n?this.double():JacobianPoint.ZERO;const j=mod(L*L),U=mod(L*j),H=mod(I*j),Y=mod(F*F-U-_2n*H),Z=mod(F*(H-Y)-M*U),ne=mod(E*T*L);return new JacobianPoint(Y,Z,ne)}subtract(n){return this.add(n.negate())}multiplyUnsafe(n){const _=JacobianPoint.ZERO;if(typeof n=="bigint"&&n===_0n)return _;let x=normalizeScalar(n);if(x===_1n)return this;if(!USE_ENDOMORPHISM){let D=_,M=this;for(;x>_0n;)x&_1n&&(D=D.add(M)),M=M.double(),x>>=_1n;return D}let{k1neg:E,k1:S,k2neg:C,k2:T}=endo.splitScalar(x),B=_,A=_,I=this;for(;S>_0n||T>_0n;)S&_1n&&(B=B.add(I)),T&_1n&&(A=A.add(I)),I=I.double(),S>>=_1n,T>>=_1n;return E&&(B=B.negate()),C&&(A=A.negate()),A=new JacobianPoint(mod(A.x*endo.beta),A.y,A.z),B.add(A)}precomputeWindow(n){const _=USE_ENDOMORPHISM?128/n+1:256/n+1,x=[];let E=this,S=E;for(let C=0;C<_;C++){S=E,x.push(S);for(let T=1;T<2**(n-1);T++)S=S.add(E),x.push(S);E=S.double()}return x}wNAF(n,_){!_&&this.equals(JacobianPoint.BASE)&&(_=Point$1.BASE);const x=_&&_._WINDOW_SIZE||1;if(256%x)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let E=_&&pointPrecomputes.get(_);E||(E=this.precomputeWindow(x),_&&x!==1&&(E=JacobianPoint.normalizeZ(E),pointPrecomputes.set(_,E)));let S=JacobianPoint.ZERO,C=JacobianPoint.BASE;const T=1+(USE_ENDOMORPHISM?128/x:256/x),B=2**(x-1),A=BigInt(2**x-1),I=2**x,D=BigInt(x);for(let M=0;M<T;M++){const V=M*B;let L=Number(n&A);n>>=D,L>B&&(L-=I,n+=_1n);const F=V,j=V+Math.abs(L)-1,U=M%2!==0,H=L<0;L===0?C=C.add(constTimeNegate(U,E[F])):S=S.add(constTimeNegate(H,E[j]))}return{p:S,f:C}}multiply(n,_){let x=normalizeScalar(n),E,S;if(USE_ENDOMORPHISM){const{k1neg:C,k1:T,k2neg:B,k2:A}=endo.splitScalar(x);let{p:I,f:D}=this.wNAF(T,_),{p:M,f:V}=this.wNAF(A,_);I=constTimeNegate(C,I),M=constTimeNegate(B,M),M=new JacobianPoint(mod(M.x*endo.beta),M.y,M.z),E=I.add(M),S=D.add(V)}else{const{p:C,f:T}=this.wNAF(x,_);E=C,S=T}return JacobianPoint.normalizeZ([E,S])[0]}toAffine(n){const{x:_,y:x,z:E}=this,S=this.equals(JacobianPoint.ZERO);n==null&&(n=S?_8n:invert(E));const C=n,T=mod(C*C),B=mod(T*C),A=mod(_*T),I=mod(x*B),D=mod(E*C);if(S)return Point$1.ZERO;if(D!==_1n)throw new Error("invZ was invalid");return new Point$1(A,I)}}JacobianPoint.BASE=new JacobianPoint(CURVE.Gx,CURVE.Gy,_1n);JacobianPoint.ZERO=new JacobianPoint(_0n,_1n,_0n);function constTimeNegate(t,n){const _=n.negate();return t?_:n}const pointPrecomputes=new WeakMap;let Point$1=class si{constructor(n,_){this.x=n,this.y=_}_setWindowSize(n){this._WINDOW_SIZE=n,pointPrecomputes.delete(this)}hasEvenY(){return this.y%_2n===_0n}static fromCompressedHex(n){const _=n.length===32,x=bytesToNumber(_?n:n.subarray(1));if(!isValidFieldElement(x))throw new Error("Point is not on curve");const E=weierstrass(x);let S=sqrtMod(E);const C=(S&_1n)===_1n;_?C&&(S=mod(-S)):(n[0]&1)===1!==C&&(S=mod(-S));const T=new si(x,S);return T.assertValidity(),T}static fromUncompressedHex(n){const _=bytesToNumber(n.subarray(1,fieldLen+1)),x=bytesToNumber(n.subarray(fieldLen+1,fieldLen*2+1)),E=new si(_,x);return E.assertValidity(),E}static fromHex(n){const _=ensureBytes(n),x=_.length,E=_[0];if(x===fieldLen)return this.fromCompressedHex(_);if(x===compressedLen&&(E===2||E===3))return this.fromCompressedHex(_);if(x===uncompressedLen&&E===4)return this.fromUncompressedHex(_);throw new Error(`Point.fromHex: received invalid point. Expected 32-${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes, not ${x}`)}static fromPrivateKey(n){return si.BASE.multiply(normalizePrivateKey(n))}static fromSignature(n,_,x){const{r:E,s:S}=normalizeSignature(_);if(![0,1,2,3].includes(x))throw new Error("Cannot recover: invalid recovery bit");const C=truncateHash(ensureBytes(n)),{n:T}=CURVE,B=x===2||x===3?E+T:E,A=invert(B,T),I=mod(-C*A,T),D=mod(S*A,T),M=x&1?"03":"02",V=si.fromHex(M+numTo32bStr(B)),L=si.BASE.multiplyAndAddUnsafe(V,I,D);if(!L)throw new Error("Cannot recover signature: point at infinify");return L.assertValidity(),L}toRawBytes(n=!1){return hexToBytes$1(this.toHex(n))}toHex(n=!1){const _=numTo32bStr(this.x);return n?`${this.hasEvenY()?"02":"03"}${_}`:`04${_}${numTo32bStr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const n="Point is not on elliptic curve",{x:_,y:x}=this;if(!isValidFieldElement(_)||!isValidFieldElement(x))throw new Error(n);const E=mod(x*x),S=weierstrass(_);if(mod(E-S)!==_0n)throw new Error(n)}equals(n){return this.x===n.x&&this.y===n.y}negate(){return new si(this.x,mod(-this.y))}double(){return JacobianPoint.fromAffine(this).double().toAffine()}add(n){return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(n)).toAffine()}subtract(n){return this.add(n.negate())}multiply(n){return JacobianPoint.fromAffine(this).multiply(n,this).toAffine()}multiplyAndAddUnsafe(n,_,x){const E=JacobianPoint.fromAffine(this),S=_===_0n||_===_1n||this!==si.BASE?E.multiplyUnsafe(_):E.multiply(_),C=JacobianPoint.fromAffine(n).multiplyUnsafe(x),T=S.add(C);return T.equals(JacobianPoint.ZERO)?void 0:T.toAffine()}};Point$1.BASE=new Point$1(CURVE.Gx,CURVE.Gy);Point$1.ZERO=new Point$1(_0n,_0n);function sliceDER(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function parseDERInt(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${bytesToHex$1(t)}`);const n=t[1],_=t.subarray(2,n+2);if(!n||_.length!==n)throw new Error("Invalid signature integer: wrong length");if(_[0]===0&&_[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:bytesToNumber(_),left:t.subarray(n+2)}}function parseDERSignature(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${bytesToHex$1(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:n,left:_}=parseDERInt(t.subarray(2)),{data:x,left:E}=parseDERInt(_);if(E.length)throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex$1(E)}`);return{r:n,s:x}}let Signature$1=class Na{constructor(n,_){this.r=n,this.s=_,this.assertValidity()}static fromCompact(n){const _=n instanceof Uint8Array,x="Signature.fromCompact";if(typeof n!="string"&&!_)throw new TypeError(`${x}: Expected string or Uint8Array`);const E=_?bytesToHex$1(n):n;if(E.length!==128)throw new Error(`${x}: Expected 64-byte hex`);return new Na(hexToNumber(E.slice(0,64)),hexToNumber(E.slice(64,128)))}static fromDER(n){const _=n instanceof Uint8Array;if(typeof n!="string"&&!_)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:x,s:E}=parseDERSignature(_?n:hexToBytes$1(n));return new Na(x,E)}static fromHex(n){return this.fromDER(n)}assertValidity(){const{r:n,s:_}=this;if(!isWithinCurveOrder(n))throw new Error("Invalid Signature: r must be 0 < r < n");if(!isWithinCurveOrder(_))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const n=CURVE.n>>_1n;return this.s>n}normalizeS(){return this.hasHighS()?new Na(this.r,mod(-this.s,CURVE.n)):this}toDERRawBytes(){return hexToBytes$1(this.toDERHex())}toDERHex(){const n=sliceDER(numberToHexUnpadded(this.s)),_=sliceDER(numberToHexUnpadded(this.r)),x=n.length/2,E=_.length/2,S=numberToHexUnpadded(x),C=numberToHexUnpadded(E);return`30${numberToHexUnpadded(E+x+4)}02${C}${_}02${S}${n}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return hexToBytes$1(this.toCompactHex())}toCompactHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}};function concatBytes(...t){if(!t.every(x=>x instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const n=t.reduce((x,E)=>x+E.length,0),_=new Uint8Array(n);for(let x=0,E=0;x<t.length;x++){const S=t[x];_.set(S,E),E+=S.length}return _}const hexes=Array.from({length:256},(t,n)=>n.toString(16).padStart(2,"0"));function bytesToHex$1(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let n="";for(let _=0;_<t.length;_++)n+=hexes[t[_]];return n}const POW_2_256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function numTo32bStr(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(_0n<=t&&t<POW_2_256))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function numTo32b(t){const n=hexToBytes$1(numTo32bStr(t));if(n.length!==32)throw new Error("Error: expected 32 bytes");return n}function numberToHexUnpadded(t){const n=t.toString(16);return n.length&1?`0${n}`:n}function hexToNumber(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function hexToBytes$1(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const n=new Uint8Array(t.length/2);for(let _=0;_<n.length;_++){const x=_*2,E=t.slice(x,x+2),S=Number.parseInt(E,16);if(Number.isNaN(S)||S<0)throw new Error("Invalid byte sequence");n[_]=S}return n}function bytesToNumber(t){return hexToNumber(bytesToHex$1(t))}function ensureBytes(t){return t instanceof Uint8Array?Uint8Array.from(t):hexToBytes$1(t)}function normalizeScalar(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&isWithinCurveOrder(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function mod(t,n=CURVE.P){const _=t%n;return _>=_0n?_:n+_}function pow2(t,n){const{P:_}=CURVE;let x=t;for(;n-- >_0n;)x*=x,x%=_;return x}function sqrtMod(t){const{P:n}=CURVE,_=BigInt(6),x=BigInt(11),E=BigInt(22),S=BigInt(23),C=BigInt(44),T=BigInt(88),B=t*t*t%n,A=B*B*t%n,I=pow2(A,_3n)*A%n,D=pow2(I,_3n)*A%n,M=pow2(D,_2n)*B%n,V=pow2(M,x)*M%n,L=pow2(V,E)*V%n,F=pow2(L,C)*L%n,j=pow2(F,T)*F%n,U=pow2(j,C)*L%n,H=pow2(U,_3n)*A%n,Y=pow2(H,S)*V%n,Z=pow2(Y,_)*B%n,ne=pow2(Z,_2n);if(ne*ne%n!==t)throw new Error("Cannot find square root");return ne}function invert(t,n=CURVE.P){if(t===_0n||n<=_0n)throw new Error(`invert: expected positive integers, got n=${t} mod=${n}`);let _=mod(t,n),x=n,E=_0n,S=_1n;for(;_!==_0n;){const T=x/_,B=x%_,A=E-S*T;x=_,_=B,E=S,S=A}if(x!==_1n)throw new Error("invert: does not exist");return mod(E,n)}function invertBatch(t,n=CURVE.P){const _=new Array(t.length),x=t.reduce((S,C,T)=>C===_0n?S:(_[T]=S,mod(S*C,n)),_1n),E=invert(x,n);return t.reduceRight((S,C,T)=>C===_0n?S:(_[T]=mod(S*_[T],n),mod(S*C,n)),E),_}function bits2int_2(t){const n=t.length*8-groupLen*8,_=bytesToNumber(t);return n>0?_>>BigInt(n):_}function truncateHash(t,n=!1){const _=bits2int_2(t);if(n)return _;const{n:x}=CURVE;return _>=x?_-x:_}let _sha256Sync,_hmacSha256Sync;class HmacDrbg{constructor(n,_){if(this.hashLen=n,this.qByteLen=_,typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof _!="number"||_<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(n).fill(1),this.k=new Uint8Array(n).fill(0),this.counter=0}hmac(...n){return utils$2.hmacSha256(this.k,...n)}hmacSync(...n){return _hmacSha256Sync(this.k,...n)}checkSync(){if(typeof _hmacSha256Sync!="function")throw new ShaError("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(n=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),n),this.v=await this.hmac(this.v),n.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),n),this.v=await this.hmac(this.v))}reseedSync(n=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),n),this.v=this.hmacSync(this.v),n.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),n),this.v=this.hmacSync(this.v))}async generate(){this.incr();let n=0;const _=[];for(;n<this.qByteLen;){this.v=await this.hmac(this.v);const x=this.v.slice();_.push(x),n+=this.v.length}return concatBytes(..._)}generateSync(){this.checkSync(),this.incr();let n=0;const _=[];for(;n<this.qByteLen;){this.v=this.hmacSync(this.v);const x=this.v.slice();_.push(x),n+=this.v.length}return concatBytes(..._)}}function isWithinCurveOrder(t){return _0n<t&&t<CURVE.n}function isValidFieldElement(t){return _0n<t&&t<CURVE.P}function kmdToSig(t,n,_,x=!0){const{n:E}=CURVE,S=truncateHash(t,!0);if(!isWithinCurveOrder(S))return;const C=invert(S,E),T=Point$1.BASE.multiply(S),B=mod(T.x,E);if(B===_0n)return;const A=mod(C*mod(n+_*B,E),E);if(A===_0n)return;let I=new Signature$1(B,A),D=(T.x===I.r?0:2)|Number(T.y&_1n);return x&&I.hasHighS()&&(I=I.normalizeS(),D^=1),{sig:I,recovery:D}}function normalizePrivateKey(t){let n;if(typeof t=="bigint")n=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)n=BigInt(t);else if(typeof t=="string"){if(t.length!==2*groupLen)throw new Error("Expected 32 bytes of private key");n=hexToNumber(t)}else if(t instanceof Uint8Array){if(t.length!==groupLen)throw new Error("Expected 32 bytes of private key");n=bytesToNumber(t)}else throw new TypeError("Expected valid private key");if(!isWithinCurveOrder(n))throw new Error("Expected private key: 0 < key < n");return n}function normalizePublicKey(t){return t instanceof Point$1?(t.assertValidity(),t):Point$1.fromHex(t)}function normalizeSignature(t){if(t instanceof Signature$1)return t.assertValidity(),t;try{return Signature$1.fromDER(t)}catch{return Signature$1.fromCompact(t)}}function getPublicKey(t,n=!1){return Point$1.fromPrivateKey(t).toRawBytes(n)}function bits2int(t){const n=t.length>fieldLen?t.slice(0,fieldLen):t;return bytesToNumber(n)}function bits2octets(t){const n=bits2int(t),_=mod(n,CURVE.n);return int2octets(_<_0n?n:_)}function int2octets(t){return numTo32b(t)}function initSigArgs(t,n,_){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);const x=ensureBytes(t),E=normalizePrivateKey(n),S=[int2octets(E),bits2octets(x)];if(_!=null){_===!0&&(_=utils$2.randomBytes(fieldLen));const B=ensureBytes(_);if(B.length!==fieldLen)throw new Error(`sign: Expected ${fieldLen} bytes of extra data`);S.push(B)}const C=concatBytes(...S),T=bits2int(x);return{seed:C,m:T,d:E}}function finalizeSig(t,n){const{sig:_,recovery:x}=t,{der:E,recovered:S}=Object.assign({canonical:!0,der:!0},n),C=E?_.toDERRawBytes():_.toCompactRawBytes();return S?[C,x]:C}async function sign(t,n,_={}){const{seed:x,m:E,d:S}=initSigArgs(t,n,_.extraEntropy),C=new HmacDrbg(hashLen,groupLen);await C.reseed(x);let T;for(;!(T=kmdToSig(await C.generate(),E,S,_.canonical));)await C.reseed();return finalizeSig(T,_)}const vopts={strict:!0};function verify$2(t,n,_,x=vopts){let E;try{E=normalizeSignature(t),n=ensureBytes(n)}catch{return!1}const{r:S,s:C}=E;if(x.strict&&E.hasHighS())return!1;const T=truncateHash(n);let B;try{B=normalizePublicKey(_)}catch{return!1}const{n:A}=CURVE,I=invert(C,A),D=mod(T*I,A),M=mod(S*I,A),V=Point$1.BASE.multiplyAndAddUnsafe(B,D,M);return V?mod(V.x,A)===S:!1}Point$1.BASE._setWindowSize(8);const crypto$2={node:nodeCrypto,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},TAGGED_HASH_PREFIXES={},utils$2={bytesToHex:bytesToHex$1,hexToBytes:hexToBytes$1,concatBytes,mod,invert,isValidPrivateKey(t){try{return normalizePrivateKey(t),!0}catch{return!1}},_bigintTo32Bytes:numTo32b,_normalizePrivateKey:normalizePrivateKey,hashToPrivateKey:t=>{t=ensureBytes(t);const n=groupLen+8;if(t.length<n||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const _=mod(bytesToNumber(t),CURVE.n-_1n)+_1n;return numTo32b(_)},randomBytes:(t=32)=>{if(crypto$2.web)return crypto$2.web.getRandomValues(new Uint8Array(t));if(crypto$2.node){const{randomBytes:n}=crypto$2.node;return Uint8Array.from(n(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>utils$2.hashToPrivateKey(utils$2.randomBytes(groupLen+8)),precompute(t=8,n=Point$1.BASE){const _=n===Point$1.BASE?n:new Point$1(n.x,n.y);return _._setWindowSize(t),_.multiply(_3n),_},sha256:async(...t)=>{if(crypto$2.web){const n=await crypto$2.web.subtle.digest("SHA-256",concatBytes(...t));return new Uint8Array(n)}else if(crypto$2.node){const{createHash:n}=crypto$2.node,_=n("sha256");return t.forEach(x=>_.update(x)),Uint8Array.from(_.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...n)=>{if(crypto$2.web){const _=await crypto$2.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),x=concatBytes(...n),E=await crypto$2.web.subtle.sign("HMAC",_,x);return new Uint8Array(E)}else if(crypto$2.node){const{createHmac:_}=crypto$2.node,x=_("sha256",t);return n.forEach(E=>x.update(E)),Uint8Array.from(x.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...n)=>{let _=TAGGED_HASH_PREFIXES[t];if(_===void 0){const x=await utils$2.sha256(Uint8Array.from(t,E=>E.charCodeAt(0)));_=concatBytes(x,x),TAGGED_HASH_PREFIXES[t]=_}return utils$2.sha256(_,...n)},taggedHashSync:(t,...n)=>{if(typeof _sha256Sync!="function")throw new ShaError("sha256Sync is undefined, you need to set it");let _=TAGGED_HASH_PREFIXES[t];if(_===void 0){const x=_sha256Sync(Uint8Array.from(t,E=>E.charCodeAt(0)));_=concatBytes(x,x),TAGGED_HASH_PREFIXES[t]=_}return _sha256Sync(_,...n)},_JacobianPoint:JacobianPoint};Object.defineProperties(utils$2,{sha256Sync:{configurable:!1,get(){return _sha256Sync},set(t){_sha256Sync||(_sha256Sync=t)}},hmacSha256Sync:{configurable:!1,get(){return _hmacSha256Sync},set(t){_hmacSha256Sync||(_hmacSha256Sync=t)}}});function randomBytes$1(t){if(isNaN(t)||t<=0)throw new CodeError("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return utils$2.randomBytes(t)}function convert$1(t,n){return n.map(_=>base64urlToBigInteger(t[_]))}function jwk2priv(t){return forge$n.pki.setRsaPrivateKey(...convert$1(t,["n","e","d","p","q","dp","dq","qi"]))}function jwk2pub(t){return forge$n.pki.setRsaPublicKey(...convert$1(t,["n","e"]))}function pkcs1ToJwk(t){const n=forge$n.asn1.fromDer(toString$6(t,"ascii")),_=forge$n.pki.privateKeyFromAsn1(n);return{kty:"RSA",n:bigIntegerToUintBase64url(_.n),e:bigIntegerToUintBase64url(_.e),d:bigIntegerToUintBase64url(_.d),p:bigIntegerToUintBase64url(_.p),q:bigIntegerToUintBase64url(_.q),dp:bigIntegerToUintBase64url(_.dP),dq:bigIntegerToUintBase64url(_.dQ),qi:bigIntegerToUintBase64url(_.qInv),alg:"RS256"}}function jwkToPkcs1(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw new CodeError("JWK was missing components","ERR_INVALID_PARAMETERS");const n=forge$n.pki.privateKeyToAsn1({n:base64urlToBigInteger(t.n),e:base64urlToBigInteger(t.e),d:base64urlToBigInteger(t.d),p:base64urlToBigInteger(t.p),q:base64urlToBigInteger(t.q),dP:base64urlToBigInteger(t.dp),dQ:base64urlToBigInteger(t.dq),qInv:base64urlToBigInteger(t.qi)});return fromString$3(forge$n.asn1.toDer(n).getBytes(),"ascii")}function pkixToJwk(t){const n=forge$n.asn1.fromDer(toString$6(t,"ascii")),_=forge$n.pki.publicKeyFromAsn1(n);return{kty:"RSA",n:bigIntegerToUintBase64url(_.n),e:bigIntegerToUintBase64url(_.e)}}function jwkToPkix(t){if(t.n==null||t.e==null)throw new CodeError("JWK was missing components","ERR_INVALID_PARAMETERS");const n=forge$n.pki.publicKeyToAsn1({n:base64urlToBigInteger(t.n),e:base64urlToBigInteger(t.e)});return fromString$3(forge$n.asn1.toDer(n).getBytes(),"ascii")}async function generateKey$1(t){const n=await webcrypto.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),_=await exportKey(n);return{privateKey:_[0],publicKey:_[1]}}async function unmarshalPrivateKey$1(t){const _=[await webcrypto.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await derivePublicFromPrivate(t)],x=await exportKey({privateKey:_[0],publicKey:_[1]});return{privateKey:x[0],publicKey:x[1]}}async function hashAndSign$1(t,n){const _=await webcrypto.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),x=await webcrypto.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},_,Uint8Array.from(n));return new Uint8Array(x,0,x.byteLength)}async function hashAndVerify$1(t,n,_){const x=await webcrypto.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return webcrypto.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},x,n,_)}async function exportKey(t){if(t.privateKey==null||t.publicKey==null)throw new CodeError("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([webcrypto.get().subtle.exportKey("jwk",t.privateKey),webcrypto.get().subtle.exportKey("jwk",t.publicKey)])}async function derivePublicFromPrivate(t){return webcrypto.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function convertKey(t,n,_,x){const E=n?jwk2pub(t):jwk2priv(t),S=toString$6(Uint8Array.from(_),"ascii"),C=x(S,E);return fromString$3(C,"ascii")}function encrypt$2(t,n){return convertKey(t,!0,n,(_,x)=>x.encrypt(_))}function decrypt$3(t,n){return convertKey(t,!1,n,(_,x)=>x.decrypt(_))}class RsaPublicKey{constructor(n){wt(this,"_key");this._key=n}async verify(n,_){return hashAndVerify$1(this._key,_,n)}marshal(){return jwkToPkix(this._key)}get bytes(){return PublicKey.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}encrypt(n){return encrypt$2(this._key,n)}equals(n){return equals(this.bytes,n.bytes)}async hash(){const{bytes:n}=await sha256$6.digest(this.bytes);return n}}class RsaPrivateKey{constructor(n,_){wt(this,"_key");wt(this,"_publicKey");this._key=n,this._publicKey=_}genSecret(){return randomBytes$1(16)}async sign(n){return hashAndSign$1(this._key,n)}get public(){if(this._publicKey==null)throw new CodeError("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new RsaPublicKey(this._publicKey)}decrypt(n){return decrypt$3(this._key,n)}marshal(){return jwkToPkcs1(this._key)}get bytes(){return PrivateKey.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}equals(n){return equals(this.bytes,n.bytes)}async hash(){const{bytes:n}=await sha256$6.digest(this.bytes);return n}async id(){const n=await this.public.hash();return toString$6(n,"base58btc")}async export(n,_="pkcs-8"){if(_==="pkcs-8"){const x=new forge$n.util.ByteBuffer(this.marshal()),E=forge$n.asn1.fromDer(x),S=forge$n.pki.privateKeyFromAsn1(E),C={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return forge$n.pki.encryptRsaPrivateKey(S,n,C)}else{if(_==="libp2p-key")return exporter(this.bytes,n);throw new CodeError(`export format '${_}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}}async function unmarshalRsaPrivateKey(t){const n=pkcs1ToJwk(t),_=await unmarshalPrivateKey$1(n);return new RsaPrivateKey(_.privateKey,_.publicKey)}function unmarshalRsaPublicKey(t){const n=pkixToJwk(t);return new RsaPublicKey(n)}async function fromJwk(t){const n=await unmarshalPrivateKey$1(t);return new RsaPrivateKey(n.privateKey,n.publicKey)}async function generateKeyPair$2(t){const n=await generateKey$1(t);return new RsaPrivateKey(n.privateKey,n.publicKey)}const RSA=Object.freeze(Object.defineProperty({__proto__:null,RsaPrivateKey,RsaPublicKey,fromJwk,generateKeyPair:generateKeyPair$2,unmarshalRsaPrivateKey,unmarshalRsaPublicKey},Symbol.toStringTag,{value:"Module"}));function generateKey(){return utils$2.randomPrivateKey()}async function hashAndSign(t,n){const{digest:_}=await sha256$6.digest(n);try{return await sign(_,t)}catch(x){throw new CodeError(String(x),"ERR_INVALID_INPUT")}}async function hashAndVerify(t,n,_){try{const{digest:x}=await sha256$6.digest(_);return verify$2(n,x,t)}catch(x){throw new CodeError(String(x),"ERR_INVALID_INPUT")}}function compressPublicKey(t){return Point$1.fromHex(t).toRawBytes(!0)}function validatePrivateKey(t){try{getPublicKey(t,!0)}catch(n){throw new CodeError(String(n),"ERR_INVALID_PRIVATE_KEY")}}function validatePublicKey(t){try{Point$1.fromHex(t)}catch(n){throw new CodeError(String(n),"ERR_INVALID_PUBLIC_KEY")}}function computePublicKey$1(t){try{return getPublicKey(t,!0)}catch(n){throw new CodeError(String(n),"ERR_INVALID_PRIVATE_KEY")}}class Secp256k1PublicKey{constructor(n){wt(this,"_key");validatePublicKey(n),this._key=n}async verify(n,_){return hashAndVerify(this._key,_,n)}marshal(){return compressPublicKey(this._key)}get bytes(){return PublicKey.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(n){return equals(this.bytes,n.bytes)}async hash(){const{bytes:n}=await sha256$6.digest(this.bytes);return n}}class Secp256k1PrivateKey{constructor(n,_){wt(this,"_key");wt(this,"_publicKey");this._key=n,this._publicKey=_??computePublicKey$1(n),validatePrivateKey(this._key),validatePublicKey(this._publicKey)}async sign(n){return hashAndSign(this._key,n)}get public(){return new Secp256k1PublicKey(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(n){return equals(this.bytes,n.bytes)}async hash(){const{bytes:n}=await sha256$6.digest(this.bytes);return n}async id(){const n=await this.public.hash();return toString$6(n,"base58btc")}async export(n,_="libp2p-key"){if(_==="libp2p-key")return exporter(this.bytes,n);throw new CodeError(`export format '${_}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}function unmarshalSecp256k1PrivateKey(t){return new Secp256k1PrivateKey(t)}function unmarshalSecp256k1PublicKey(t){return new Secp256k1PublicKey(t)}async function generateKeyPair$1(){const t=generateKey();return new Secp256k1PrivateKey(t)}const Secp256k1=Object.freeze(Object.defineProperty({__proto__:null,Secp256k1PrivateKey,Secp256k1PublicKey,generateKeyPair:generateKeyPair$1,unmarshalSecp256k1PrivateKey,unmarshalSecp256k1PublicKey},Symbol.toStringTag,{value:"Module"})),supportedKeys={rsa:RSA,ed25519:Ed25519,secp256k1:Secp256k1};function unsupportedKey(t){const n=Object.keys(supportedKeys).join(" / ");return new CodeError(`invalid or unsupported key type ${t}. Must be ${n}`,"ERR_UNSUPPORTED_KEY_TYPE")}function typeToKey(t){if(t=t.toLowerCase(),t==="rsa"||t==="ed25519"||t==="secp256k1")return supportedKeys[t];throw unsupportedKey(t)}async function generateKeyPair(t,n){return typeToKey(t).generateKeyPair(n??2048)}function unmarshalPublicKey(t){const n=PublicKey.decode(t),_=n.Data??new Uint8Array;switch(n.Type){case KeyType$1.RSA:return supportedKeys.rsa.unmarshalRsaPublicKey(_);case KeyType$1.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PublicKey(_);case KeyType$1.Secp256k1:return supportedKeys.secp256k1.unmarshalSecp256k1PublicKey(_);default:throw unsupportedKey(n.Type??"RSA")}}function marshalPublicKey(t,n){return n=(n??"rsa").toLowerCase(),typeToKey(n),t.bytes}async function unmarshalPrivateKey(t){const n=PrivateKey.decode(t),_=n.Data??new Uint8Array;switch(n.Type){case KeyType$1.RSA:return supportedKeys.rsa.unmarshalRsaPrivateKey(_);case KeyType$1.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PrivateKey(_);case KeyType$1.Secp256k1:return supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey(_);default:throw unsupportedKey(n.Type??"RSA")}}function marshalPrivateKey(t,n){return n=(n??"rsa").toLowerCase(),typeToKey(n),t.bytes}async function importKey(t,n){try{const E=await importer(t,n);return await unmarshalPrivateKey(E)}catch{}const _=forge$n.pki.decryptRsaPrivateKey(t,n);if(_===null)throw new CodeError("Cannot read the key, most likely the password is wrong or not a RSA key","ERR_CANNOT_DECRYPT_PEM");let x=forge$n.asn1.toDer(forge$n.pki.privateKeyToAsn1(_));return x=fromString$3(x.getBytes(),"ascii"),supportedKeys.rsa.unmarshalRsaPrivateKey(x)}const errors$1={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function assert$6(t,n){if(!t)throw new Error(n)}function isUint8Array(t,n,_){if(assert$6(n instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),_!==void 0)if(Array.isArray(_)){const x=_.join(", "),E=`Expected ${t} to be an Uint8Array with length [${x}]`;assert$6(_.includes(n.length),E)}else{const x=`Expected ${t} to be an Uint8Array with length ${_}`;assert$6(n.length===_,x)}}function isCompressed(t){assert$6(toTypeString(t)==="Boolean","Expected compressed to be a Boolean")}function getAssertedOutput(t=_=>new Uint8Array(_),n){return typeof t=="function"&&(t=t(n)),isUint8Array("output",t,n),t}function toTypeString(t){return Object.prototype.toString.call(t).slice(8,-1)}var lib$1=t=>({contextRandomize(n){switch(assert$6(n===null||n instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),n!==null&&isUint8Array("seed",n,32),t.contextRandomize(n)){case 1:throw new Error(errors$1.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(n){return isUint8Array("private key",n,32),t.privateKeyVerify(n)===0},privateKeyNegate(n){switch(isUint8Array("private key",n,32),t.privateKeyNegate(n)){case 0:return n;case 1:throw new Error(errors$1.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(n,_){switch(isUint8Array("private key",n,32),isUint8Array("tweak",_,32),t.privateKeyTweakAdd(n,_)){case 0:return n;case 1:throw new Error(errors$1.TWEAK_ADD)}},privateKeyTweakMul(n,_){switch(isUint8Array("private key",n,32),isUint8Array("tweak",_,32),t.privateKeyTweakMul(n,_)){case 0:return n;case 1:throw new Error(errors$1.TWEAK_MUL)}},publicKeyVerify(n){return isUint8Array("public key",n,[33,65]),t.publicKeyVerify(n)===0},publicKeyCreate(n,_=!0,x){switch(isUint8Array("private key",n,32),isCompressed(_),x=getAssertedOutput(x,_?33:65),t.publicKeyCreate(x,n)){case 0:return x;case 1:throw new Error(errors$1.SECKEY_INVALID);case 2:throw new Error(errors$1.PUBKEY_SERIALIZE)}},publicKeyConvert(n,_=!0,x){switch(isUint8Array("public key",n,[33,65]),isCompressed(_),x=getAssertedOutput(x,_?33:65),t.publicKeyConvert(x,n)){case 0:return x;case 1:throw new Error(errors$1.PUBKEY_PARSE);case 2:throw new Error(errors$1.PUBKEY_SERIALIZE)}},publicKeyNegate(n,_=!0,x){switch(isUint8Array("public key",n,[33,65]),isCompressed(_),x=getAssertedOutput(x,_?33:65),t.publicKeyNegate(x,n)){case 0:return x;case 1:throw new Error(errors$1.PUBKEY_PARSE);case 2:throw new Error(errors$1.IMPOSSIBLE_CASE);case 3:throw new Error(errors$1.PUBKEY_SERIALIZE)}},publicKeyCombine(n,_=!0,x){assert$6(Array.isArray(n),"Expected public keys to be an Array"),assert$6(n.length>0,"Expected public keys array will have more than zero items");for(const E of n)isUint8Array("public key",E,[33,65]);switch(isCompressed(_),x=getAssertedOutput(x,_?33:65),t.publicKeyCombine(x,n)){case 0:return x;case 1:throw new Error(errors$1.PUBKEY_PARSE);case 2:throw new Error(errors$1.PUBKEY_COMBINE);case 3:throw new Error(errors$1.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(n,_,x=!0,E){switch(isUint8Array("public key",n,[33,65]),isUint8Array("tweak",_,32),isCompressed(x),E=getAssertedOutput(E,x?33:65),t.publicKeyTweakAdd(E,n,_)){case 0:return E;case 1:throw new Error(errors$1.PUBKEY_PARSE);case 2:throw new Error(errors$1.TWEAK_ADD)}},publicKeyTweakMul(n,_,x=!0,E){switch(isUint8Array("public key",n,[33,65]),isUint8Array("tweak",_,32),isCompressed(x),E=getAssertedOutput(E,x?33:65),t.publicKeyTweakMul(E,n,_)){case 0:return E;case 1:throw new Error(errors$1.PUBKEY_PARSE);case 2:throw new Error(errors$1.TWEAK_MUL)}},signatureNormalize(n){switch(isUint8Array("signature",n,64),t.signatureNormalize(n)){case 0:return n;case 1:throw new Error(errors$1.SIG_PARSE)}},signatureExport(n,_){isUint8Array("signature",n,64),_=getAssertedOutput(_,72);const x={output:_,outputlen:72};switch(t.signatureExport(x,n)){case 0:return _.slice(0,x.outputlen);case 1:throw new Error(errors$1.SIG_PARSE);case 2:throw new Error(errors$1.IMPOSSIBLE_CASE)}},signatureImport(n,_){switch(isUint8Array("signature",n),_=getAssertedOutput(_,64),t.signatureImport(_,n)){case 0:return _;case 1:throw new Error(errors$1.SIG_PARSE);case 2:throw new Error(errors$1.IMPOSSIBLE_CASE)}},ecdsaSign(n,_,x={},E){isUint8Array("message",n,32),isUint8Array("private key",_,32),assert$6(toTypeString(x)==="Object","Expected options to be an Object"),x.data!==void 0&&isUint8Array("options.data",x.data),x.noncefn!==void 0&&assert$6(toTypeString(x.noncefn)==="Function","Expected options.noncefn to be a Function"),E=getAssertedOutput(E,64);const S={signature:E,recid:null};switch(t.ecdsaSign(S,n,_,x.data,x.noncefn)){case 0:return S;case 1:throw new Error(errors$1.SIGN);case 2:throw new Error(errors$1.IMPOSSIBLE_CASE)}},ecdsaVerify(n,_,x){switch(isUint8Array("signature",n,64),isUint8Array("message",_,32),isUint8Array("public key",x,[33,65]),t.ecdsaVerify(n,_,x)){case 0:return!0;case 3:return!1;case 1:throw new Error(errors$1.SIG_PARSE);case 2:throw new Error(errors$1.PUBKEY_PARSE)}},ecdsaRecover(n,_,x,E=!0,S){switch(isUint8Array("signature",n,64),assert$6(toTypeString(_)==="Number"&&_>=0&&_<=3,"Expected recovery id to be a Number within interval [0, 3]"),isUint8Array("message",x,32),isCompressed(E),S=getAssertedOutput(S,E?33:65),t.ecdsaRecover(S,n,_,x)){case 0:return S;case 1:throw new Error(errors$1.SIG_PARSE);case 2:throw new Error(errors$1.RECOVER);case 3:throw new Error(errors$1.IMPOSSIBLE_CASE)}},ecdh(n,_,x={},E){switch(isUint8Array("public key",n,[33,65]),isUint8Array("private key",_,32),assert$6(toTypeString(x)==="Object","Expected options to be an Object"),x.data!==void 0&&isUint8Array("options.data",x.data),x.hashfn!==void 0?(assert$6(toTypeString(x.hashfn)==="Function","Expected options.hashfn to be a Function"),x.xbuf!==void 0&&isUint8Array("options.xbuf",x.xbuf,32),x.ybuf!==void 0&&isUint8Array("options.ybuf",x.ybuf,32),isUint8Array("output",E)):E=getAssertedOutput(E,32),t.ecdh(E,n,_,x.data,x.hashfn,x.xbuf,x.ybuf)){case 0:return E;case 1:throw new Error(errors$1.PUBKEY_PARSE);case 2:throw new Error(errors$1.ECDH)}}});const EC$5=requireElliptic().ec,ec$2=new EC$5("secp256k1"),ecparams=ec$2.curve,BN$2=ecparams.n.constructor;function loadCompressedPublicKey(t,n){let _=new BN$2(n);if(_.cmp(ecparams.p)>=0)return null;_=_.toRed(ecparams.red);let x=_.redSqr().redIMul(_).redIAdd(ecparams.b).redSqrt();return t===3!==x.isOdd()&&(x=x.redNeg()),ec$2.keyPair({pub:{x:_,y:x}})}function loadUncompressedPublicKey(t,n,_){let x=new BN$2(n),E=new BN$2(_);if(x.cmp(ecparams.p)>=0||E.cmp(ecparams.p)>=0||(x=x.toRed(ecparams.red),E=E.toRed(ecparams.red),(t===6||t===7)&&E.isOdd()!==(t===7)))return null;const S=x.redSqr().redIMul(x);return E.redSqr().redISub(S.redIAdd(ecparams.b)).isZero()?ec$2.keyPair({pub:{x,y:E}}):null}function loadPublicKey(t){const n=t[0];switch(n){case 2:case 3:return t.length!==33?null:loadCompressedPublicKey(n,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:loadUncompressedPublicKey(n,t.subarray(1,33),t.subarray(33,65));default:return null}}function savePublicKey(t,n){const _=n.encode(null,t.length===33);for(let x=0;x<t.length;++x)t[x]=_[x]}var elliptic$2={contextRandomize(){return 0},privateKeyVerify(t){const n=new BN$2(t);return n.cmp(ecparams.n)<0&&!n.isZero()?0:1},privateKeyNegate(t){const n=new BN$2(t),_=ecparams.n.sub(n).umod(ecparams.n).toArrayLike(Uint8Array,"be",32);return t.set(_),0},privateKeyTweakAdd(t,n){const _=new BN$2(n);if(_.cmp(ecparams.n)>=0||(_.iadd(new BN$2(t)),_.cmp(ecparams.n)>=0&&_.isub(ecparams.n),_.isZero()))return 1;const x=_.toArrayLike(Uint8Array,"be",32);return t.set(x),0},privateKeyTweakMul(t,n){let _=new BN$2(n);if(_.cmp(ecparams.n)>=0||_.isZero())return 1;_.imul(new BN$2(t)),_.cmp(ecparams.n)>=0&&(_=_.umod(ecparams.n));const x=_.toArrayLike(Uint8Array,"be",32);return t.set(x),0},publicKeyVerify(t){return loadPublicKey(t)===null?1:0},publicKeyCreate(t,n){const _=new BN$2(n);if(_.cmp(ecparams.n)>=0||_.isZero())return 1;const x=ec$2.keyFromPrivate(n).getPublic();return savePublicKey(t,x),0},publicKeyConvert(t,n){const _=loadPublicKey(n);if(_===null)return 1;const x=_.getPublic();return savePublicKey(t,x),0},publicKeyNegate(t,n){const _=loadPublicKey(n);if(_===null)return 1;const x=_.getPublic();return x.y=x.y.redNeg(),savePublicKey(t,x),0},publicKeyCombine(t,n){const _=new Array(n.length);for(let E=0;E<n.length;++E)if(_[E]=loadPublicKey(n[E]),_[E]===null)return 1;let x=_[0].getPublic();for(let E=1;E<_.length;++E)x=x.add(_[E].pub);return x.isInfinity()?2:(savePublicKey(t,x),0)},publicKeyTweakAdd(t,n,_){const x=loadPublicKey(n);if(x===null)return 1;if(_=new BN$2(_),_.cmp(ecparams.n)>=0)return 2;const E=x.getPublic().add(ecparams.g.mul(_));return E.isInfinity()?2:(savePublicKey(t,E),0)},publicKeyTweakMul(t,n,_){const x=loadPublicKey(n);if(x===null)return 1;if(_=new BN$2(_),_.cmp(ecparams.n)>=0||_.isZero())return 2;const E=x.getPublic().mul(_);return savePublicKey(t,E),0},signatureNormalize(t){const n=new BN$2(t.subarray(0,32)),_=new BN$2(t.subarray(32,64));return n.cmp(ecparams.n)>=0||_.cmp(ecparams.n)>=0?1:(_.cmp(ec$2.nh)===1&&t.set(ecparams.n.sub(_).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,n){const _=n.subarray(0,32),x=n.subarray(32,64);if(new BN$2(_).cmp(ecparams.n)>=0||new BN$2(x).cmp(ecparams.n)>=0)return 1;const{output:E}=t;let S=E.subarray(4,4+33);S[0]=0,S.set(_,1);let C=33,T=0;for(;C>1&&S[T]===0&&!(S[T+1]&128);--C,++T);if(S=S.subarray(T),S[0]&128||C>1&&S[0]===0&&!(S[1]&128))return 1;let B=E.subarray(6+33,6+33+33);B[0]=0,B.set(x,1);let A=33,I=0;for(;A>1&&B[I]===0&&!(B[I+1]&128);--A,++I);return B=B.subarray(I),B[0]&128||A>1&&B[0]===0&&!(B[1]&128)?1:(t.outputlen=6+C+A,E[0]=48,E[1]=t.outputlen-2,E[2]=2,E[3]=S.length,E.set(S,4),E[4+C]=2,E[5+C]=B.length,E.set(B,6+C),0)},signatureImport(t,n){if(n.length<8||n.length>72||n[0]!==48||n[1]!==n.length-2||n[2]!==2)return 1;const _=n[3];if(_===0||5+_>=n.length||n[4+_]!==2)return 1;const x=n[5+_];if(x===0||6+_+x!==n.length||n[4]&128||_>1&&n[4]===0&&!(n[5]&128)||n[_+6]&128||x>1&&n[_+6]===0&&!(n[_+7]&128))return 1;let E=n.subarray(4,4+_);if(E.length===33&&E[0]===0&&(E=E.subarray(1)),E.length>32)return 1;let S=n.subarray(6+_);if(S.length===33&&S[0]===0&&(S=S.slice(1)),S.length>32)throw new Error("S length is too long");let C=new BN$2(E);C.cmp(ecparams.n)>=0&&(C=new BN$2(0));let T=new BN$2(n.subarray(6+_));return T.cmp(ecparams.n)>=0&&(T=new BN$2(0)),t.set(C.toArrayLike(Uint8Array,"be",32),0),t.set(T.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,n,_,x,E){if(E){const T=E;E=B=>{const A=T(n,_,null,x,B);if(!(A instanceof Uint8Array&&A.length===32))throw new Error("This is the way");return new BN$2(A)}}const S=new BN$2(_);if(S.cmp(ecparams.n)>=0||S.isZero())return 1;let C;try{C=ec$2.sign(n,_,{canonical:!0,k:E,pers:x})}catch{return 1}return t.signature.set(C.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(C.s.toArrayLike(Uint8Array,"be",32),32),t.recid=C.recoveryParam,0},ecdsaVerify(t,n,_){const x={r:t.subarray(0,32),s:t.subarray(32,64)},E=new BN$2(x.r),S=new BN$2(x.s);if(E.cmp(ecparams.n)>=0||S.cmp(ecparams.n)>=0)return 1;if(S.cmp(ec$2.nh)===1||E.isZero()||S.isZero())return 3;const C=loadPublicKey(_);if(C===null)return 2;const T=C.getPublic();return ec$2.verify(n,x,T)?0:3},ecdsaRecover(t,n,_,x){const E={r:n.slice(0,32),s:n.slice(32,64)},S=new BN$2(E.r),C=new BN$2(E.s);if(S.cmp(ecparams.n)>=0||C.cmp(ecparams.n)>=0)return 1;if(S.isZero()||C.isZero())return 2;let T;try{T=ec$2.recoverPubKey(x,E,_)}catch{return 2}return savePublicKey(t,T),0},ecdh(t,n,_,x,E,S,C){const T=loadPublicKey(n);if(T===null)return 1;const B=new BN$2(_);if(B.cmp(ecparams.n)>=0||B.isZero())return 2;const A=T.getPublic().mul(B);if(E===void 0){const I=A.encode(null,!0),D=ec$2.hash().update(I).digest();for(let M=0;M<32;++M)t[M]=D[M]}else{S||(S=new Uint8Array(32));const I=A.getX().toArray("be",32);for(let L=0;L<32;++L)S[L]=I[L];C||(C=new Uint8Array(32));const D=A.getY().toArray("be",32);for(let L=0;L<32;++L)C[L]=D[L];const M=E(S,C,x);if(!(M instanceof Uint8Array&&M.length===t.length))return 2;t.set(M)}return 0}},elliptic$1=lib$1(elliptic$2);const secp256k1$1=getDefaultExportFromCjs(elliptic$1);var events=eventsExports,inherits$1=inherits_browserExports,lru=LRU;function LRU(t){if(!(this instanceof LRU))return new LRU(t);typeof t=="number"&&(t={max:t}),t||(t={}),events.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=t.max||1e3,this.maxAge=t.maxAge||0}inherits$1(LRU,events.EventEmitter);Object.defineProperty(LRU.prototype,"keys",{get:function(){return Object.keys(this.cache)}});LRU.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0};LRU.prototype.remove=function(t){if(typeof t!="string"&&(t=""+t),!!this.cache.hasOwnProperty(t)){var n=this.cache[t];return delete this.cache[t],this._unlink(t,n.prev,n.next),n.value}};LRU.prototype._unlink=function(t,n,_){this.length--,this.length===0?this.head=this.tail=null:this.head===t?(this.head=n,this.cache[this.head].next=null):this.tail===t?(this.tail=_,this.cache[this.tail].prev=null):(this.cache[n].next=_,this.cache[_].prev=n)};LRU.prototype.peek=function(t){if(this.cache.hasOwnProperty(t)){var n=this.cache[t];if(this._checkAge(t,n))return n.value}};LRU.prototype.set=function(t,n){typeof t!="string"&&(t=""+t);var _;if(this.cache.hasOwnProperty(t)){if(_=this.cache[t],_.value=n,this.maxAge&&(_.modified=Date.now()),t===this.head)return n;this._unlink(t,_.prev,_.next)}else _={value:n,modified:0,next:null,prev:null},this.maxAge&&(_.modified=Date.now()),this.cache[t]=_,this.length===this.max&&this.evict();return this.length++,_.next=null,_.prev=this.head,this.head&&(this.cache[this.head].next=t),this.head=t,this.tail||(this.tail=t),n};LRU.prototype._checkAge=function(t,n){return this.maxAge&&Date.now()-n.modified>this.maxAge?(this.remove(t),this.emit("evict",{key:t,value:n.value}),!1):!0};LRU.prototype.get=function(t){if(typeof t!="string"&&(t=""+t),!!this.cache.hasOwnProperty(t)){var n=this.cache[t];if(this._checkAge(t,n))return this.head!==t&&(t===this.tail?(this.tail=n.next,this.cache[this.tail].prev=null):this.cache[n.prev].next=n.next,this.cache[n.next].prev=n.prev,this.cache[this.head].next=t,n.prev=this.head,n.next=null,this.head=t),n.value}};LRU.prototype.evict=function(){if(this.tail){var t=this.tail,n=this.remove(this.tail);this.emit("evict",{key:t,value:n})}};const LRU$1=getDefaultExportFromCjs(lru);var ellipticExports=requireElliptic();const elliptic=getDefaultExportFromCjs(ellipticExports),{ec:EC$4}=elliptic,verify$1=async(t,n,_)=>{if(!t)throw new Error("No signature given");if(!n)throw new Error("Given publicKey was undefined");if(!_)throw new Error("Given input data was undefined");let x=!1;const E=new EC$4("secp256k1"),S=E.keyPair({pub:n,pubEnc:"hex"});try{x=E.verify(_,t,S)}catch{}return Promise.resolve(x)},v0=Object.freeze(Object.defineProperty({__proto__:null,verify:verify$1},Symbol.toStringTag,{value:"Module"})),unmarshal$1=supportedKeys.secp256k1.unmarshalSecp256k1PublicKey,verify=async(t,n,_)=>{if(!t)throw new Error("No signature given");if(!n)throw new Error("Given publicKey was undefined");if(!_)throw new Error("Given input data was undefined");safeBufferExports.Buffer.isBuffer(_)||(_=safeBufferExports.Buffer.from(_));const x=(S,C,T)=>S.verify(C,T);let E=!1;try{const S=unmarshal$1(safeBufferExports.Buffer.from(n,"hex"));E=await x(S,_,safeBufferExports.Buffer.from(t,"hex"))}catch{}return Promise.resolve(E)},v1=Object.freeze(Object.defineProperty({__proto__:null,verify},Symbol.toStringTag,{value:"Module"})),verifiers$1={v0,v1},verifier=t=>verifiers$1[t],{ec:EC$3}=elliptic,ec$1=new EC$3("secp256k1"),unmarshal=supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey;function createStore(t="./keystore"){return globSourceImport&&globSourceImport.mkdirSync&&globSourceImport.mkdirSync(t,{recursive:!0}),new Level(t,{})}const verifiedCache=new LRU$1(1e3);class Keystore{constructor(n={}){typeof n=="string"?this._store=createStore(n):typeof n.open=="function"?this._store=n:typeof n.store=="string"?this._store=createStore(n.store):this._store=n.store||createStore(),this._cache=n.cache||new LRU$1(100)}async open(){if(!this._store)throw new Error("Keystore: No store found to open");await this._store.open()}async close(){this._store&&await this._store.close()}async hasKey(n){if(!n)throw new Error("id needed to check a key");if(this._store.status&&this._store.status!=="open")return null;let _=!1;try{const x=this._cache.get(n)||await this._store.get(n);_=x!=null}catch{console.error("Error: ENOENT: no such file or directory")}return _}async createKey(n,{entropy:_}={}){if(!n)throw new Error("id needed to create a key");if(this._store.status&&this._store.status!=="open")return null;const x=ec$1.genKeyPair({entropy:_}).getPrivate().toArrayLike(safeBufferExports.Buffer),E=safeBufferExports.Buffer.alloc(32);x.copy(E,E.length-x.length);const S=await unmarshal(E),C=S.public.marshal(),T=secp256k1$1.publicKeyConvert(safeBufferExports.Buffer.from(C),!1),B={publicKey:safeBufferExports.Buffer.from(T).toString("hex"),privateKey:safeBufferExports.Buffer.from(S.marshal()).toString("hex")};try{await this._store.put(n,JSON.stringify(B))}catch(A){console.log(A)}return this._cache.set(n,B),S}async getKey(n){if(!n)throw new Error("id needed to get a key");if(this._store||await this.open(),this._store.status&&this._store.status!=="open")return null;const _=this._cache.get(n);let x;try{x=_||await this._store.get(n)}catch{}if(!x)return;const E=_||JSON.parse(x);if(E)return _||this._cache.set(n,E),unmarshal(safeBufferExports.Buffer.from(E.privateKey,"hex"))}async sign(n,_){if(!n)throw new Error("No signing key given");if(!_)throw new Error("Given input data was undefined");return safeBufferExports.Buffer.isBuffer(_)||(_=safeBufferExports.Buffer.from(_)),safeBufferExports.Buffer.from(await n.sign(_)).toString("hex")}getPublic(n,_={}){const x=["hex","buffer"],E=typeof _.decompress>"u"?!0:_.decompress,S=_.format||"hex";if(x.indexOf(S)===-1)throw new Error("Supported formats are `hex` and `buffer`");let C=n.public.marshal();return E&&(C=secp256k1$1.publicKeyConvert(safeBufferExports.Buffer.from(C),!1)),C=safeBufferExports.Buffer.from(C),S==="buffer"?C:C.toString("hex")}async verify(n,_,x,E="v1"){return Keystore.verify(n,_,x,E)}static async verify(n,_,x,E="v1"){const S=verifiedCache.get(n);let C=!1;if(S){const T=(B,A,I)=>{let D;return I==="v0"?D=safeBufferExports.Buffer.compare(safeBufferExports.Buffer.alloc(30,B),safeBufferExports.Buffer.alloc(30,A))===0:D=safeBufferExports.Buffer.isBuffer(A)?safeBufferExports.Buffer.compare(B,A)===0:B===A,D};C=S.publicKey===_&&T(S.data,x,E)}else{const T=await verifier(E).verify(n,_,x);C=T,T&&verifiedCache.set(n,{publicKey:_,data:x})}return C}}const isDefined$1=t=>t!=null;class Identity{constructor(n,_,x,E,S,C){if(!isDefined$1(n))throw new Error("Identity id is required");if(!isDefined$1(_))throw new Error("Invalid public key");if(!isDefined$1(x))throw new Error("Signature of the id (idSignature) is required");if(!isDefined$1(E))throw new Error("Signature of (publicKey + idSignature) is required");if(!isDefined$1(S))throw new Error("Identity type is required");if(!isDefined$1(C))throw new Error("Identity provider is required");this._id=n,this._publicKey=_,this._signatures=Object.assign({},{id:x},{publicKey:E}),this._type=S,this._provider=C}get id(){return this._id}get publicKey(){return this._publicKey}get signatures(){return this._signatures}get type(){return this._type}get provider(){return this._provider}toJSON(){return{id:this.id,publicKey:this.publicKey,signatures:this.signatures,type:this.type}}static isIdentity(n){return n.id!==void 0&&n.publicKey!==void 0&&n.signatures!==void 0&&n.signatures.id!==void 0&&n.signatures.publicKey!==void 0&&n.type!==void 0}static toJSON(n){return{id:n.id,publicKey:n.publicKey,signatures:n.signatures,type:n.type}}}class IdentityProvider{async getId(n){}async signIdentity(n,_){}static async verifyIdentity(n){}static get type(){throw new Error("'static get type ()' needs to be defined in the inheriting class")}get type(){return this.constructor.type}}const type$4="orbitdb";class OrbitDBIdentityProvider extends IdentityProvider{constructor(n){if(super(),!n)throw new Error("OrbitDBIdentityProvider requires a keystore");this._keystore=n}static get type(){return type$4}async getId(n={}){const _=n.id;if(!_)throw new Error("id is required");const x=this._keystore,E=await x.getKey(_)||await x.createKey(_);return Buffer$5.from(E.public.marshal()).toString("hex")}async signIdentity(n,_={}){const x=_.id;if(!x)throw new Error("id is required");const E=this._keystore,S=await E.getKey(x);if(!S)throw new Error(`Signing key for '${x}' not found`);return E.sign(S,n)}static async verifyIdentity(n){return Keystore.verify(n.signatures.publicKey,n.id,n.publicKey+n.signatures.id)}}function _catch(t,n){try{var _=t()}catch(x){return n(x)}return _&&_.then?_.then(void 0,n):_}function inMemoryCache(){const t=new Map;return function(n,_){try{let E=function(C){if(x)return C;const T=t.get(n.didUrl);return T!==void 0?T:Promise.resolve(_()).then(function(B){var A;return((A=B.didResolutionMetadata)==null?void 0:A.error)!=="notFound"&&t.set(n.didUrl,B),B})},x;const S=function(){if(n.params&&n.params["no-cache"]==="true")return Promise.resolve(_()).then(function(C){return x=1,C})}();return Promise.resolve(S&&S.then?S.then(E):E(S))}catch(x){return Promise.reject(x)}}}function noCache(t,n){return n()}const PCT_ENCODED="(?:%[0-9a-fA-F]{2})",ID_CHAR=`(?:[a-zA-Z0-9._-]|${PCT_ENCODED})`,METHOD="([a-z0-9]+)",METHOD_ID=`((?:${ID_CHAR}*:)*(${ID_CHAR}+))`,PARAM_CHAR="[a-zA-Z0-9_.:%-]",PARAM=`;${PARAM_CHAR}+=${PARAM_CHAR}*`,PARAMS=`((${PARAM})*)`,PATH="(/[^#?]*)?",QUERY="([?][^#]*)?",FRAGMENT="(#.*)?",DID_MATCHER=new RegExp(`^did:${METHOD}:${METHOD_ID}${PARAMS}${PATH}${QUERY}${FRAGMENT}$`);function parse$1(t){if(t===""||!t)return null;const n=t.match(DID_MATCHER);if(n){const _={did:`did:${n[1]}:${n[2]}`,method:n[1],id:n[2],didUrl:t};if(n[4]){const x=n[4].slice(1).split(";");_.params={};for(const E of x){const S=E.split("=");_.params[S[0]]=S[1]}}return n[6]&&(_.path=n[6]),n[7]&&(_.query=n[7].slice(1)),n[8]&&(_.fragment=n[8].slice(1)),_}return null}const EMPTY_RESULT={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};function wrapLegacyResolver(t){return function(n,_,x){try{return Promise.resolve(_catch(function(){return Promise.resolve(t(n,_,x)).then(function(E){return{...EMPTY_RESULT,didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:E}})},function(E){return{...EMPTY_RESULT,didResolutionMetadata:{error:"notFound",message:E.toString()}}}))}catch(E){return Promise.reject(E)}}}class Resolver{constructor(n={},_={}){this.registry=void 0,this.cache=void 0,this.registry=n,this.cache=_.cache===!0?inMemoryCache():_.cache||noCache,_.legacyResolvers&&Object.keys(_.legacyResolvers).map(x=>{this.registry[x]||(this.registry[x]=wrapLegacyResolver(_.legacyResolvers[x]))})}resolve(n,_={}){try{const x=this,E=parse$1(n);if(E===null)return Promise.resolve({...EMPTY_RESULT,didResolutionMetadata:{error:"invalidDid"}});const S=x.registry[E.method];return S?Promise.resolve(x.cache(E,()=>S(E.did,E,x,_))):Promise.resolve({...EMPTY_RESULT,didResolutionMetadata:{error:"unsupportedDidMethod"}})}catch(x){return Promise.reject(x)}}}function asUint8Array$1(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe$1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array$1(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function concat$2(t,n){n||(n=t.reduce((E,S)=>E+S.length,0));const _=allocUnsafe$1(n);let x=0;for(const E of t)_.set(E,x),x+=E.length;return asUint8Array$1(_)}const identity$3=from$9({prefix:"\0",name:"identity",encode:t=>toString$a(t),decode:t=>fromString$6(t)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$3},Symbol.toStringTag,{value:"Module"})),base2=rfc4648$5({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648$5({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX$5({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648$5({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$5({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base36=baseX$5({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$5({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base64$1=rfc4648$5({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$5({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$5({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$5({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$2=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$1,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from(""),alphabetBytesToChars=alphabet.reduce((t,n,_)=>(t[_]=n,t),[]),alphabetCharsToBytes=alphabet.reduce((t,n,_)=>(t[n.codePointAt(0)]=_,t),[]);function encode$c(t){return t.reduce((n,_)=>(n+=alphabetBytesToChars[_],n),"")}function decode$8(t){const n=[];for(const _ of t){const x=alphabetCharsToBytes[_.codePointAt(0)];if(x===void 0)throw new Error(`Non-base256emoji character: ${_}`);n.push(x)}return new Uint8Array(n)}const base256emoji=from$9({prefix:"",name:"base256emoji",encode:encode$c,decode:decode$8}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"})),from=({name:t,code:n,encode:_})=>new Hasher(t,n,_);class Hasher{constructor(n,_,x){this.name=n,this.code=_,this.encode=x}digest(n){if(n instanceof Uint8Array){const _=this.encode(n);return _ instanceof Uint8Array?create$7(this.code,_):_.then(x=>create$7(this.code,x))}else throw Error("Unknown type, must be binary type")}}const sha=t=>async n=>new Uint8Array(await crypto.subtle.digest(t,n)),sha256$5=from({name:"sha2-256",code:18,encode:sha("SHA-256")}),code$4=0,name$2="identity",encode$b=coerce$5,digest=t=>create$7(code$4,encode$b(t)),identity$2={code:code$4,name:name$2,encode:encode$b,digest};new TextEncoder;new TextDecoder;const bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$6,...base36$1,...base58$1,...base64$2,...base256emoji$1};function createCodec$2(t,n,_,x){return{name:t,prefix:n,encoder:{name:t,prefix:n,encode:_},decoder:{decode:x}}}const string$1=createCodec$2("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii$1=createCodec$2("ascii","a",t=>{let n="a";for(let _=0;_<t.length;_++)n+=String.fromCharCode(t[_]);return n},t=>{t=t.substring(1);const n=allocUnsafe$1(t.length);for(let _=0;_<t.length;_++)n[_]=t.charCodeAt(_);return n}),BASES$1={utf8:string$1,"utf-8":string$1,hex:bases.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases};function fromString$2(t,n="utf8"){const _=BASES$1[n];if(!_)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$1(globalThis.Buffer.from(t,"utf-8")):_.decoder.decode(`${_.prefix}${t}`)}function toString$5(t,n="utf8"){const _=BASES$1[n];if(!_)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):_.encoder.encode(t).substring(1)}var sha256$4={},binary={},int={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function n(T,B){var A=T>>>16&65535,I=T&65535,D=B>>>16&65535,M=B&65535;return I*M+(A*M+I*D<<16>>>0)|0}t.mul=Math.imul||n;function _(T,B){return T+B|0}t.add=_;function x(T,B){return T-B|0}t.sub=x;function E(T,B){return T<<B|T>>>32-B}t.rotl=E;function S(T,B){return T<<32-B|T>>>B}t.rotr=S;function C(T){return typeof T=="number"&&isFinite(T)&&Math.floor(T)===T}t.isInteger=Number.isInteger||C,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(T){return t.isInteger(T)&&T>=-t.MAX_SAFE_INTEGER&&T<=t.MAX_SAFE_INTEGER}})(int);Object.defineProperty(binary,"__esModule",{value:!0});var int_1=int;function readInt16BE(t,n){return n===void 0&&(n=0),(t[n+0]<<8|t[n+1])<<16>>16}binary.readInt16BE=readInt16BE;function readUint16BE(t,n){return n===void 0&&(n=0),(t[n+0]<<8|t[n+1])>>>0}binary.readUint16BE=readUint16BE;function readInt16LE(t,n){return n===void 0&&(n=0),(t[n+1]<<8|t[n])<<16>>16}binary.readInt16LE=readInt16LE;function readUint16LE(t,n){return n===void 0&&(n=0),(t[n+1]<<8|t[n])>>>0}binary.readUint16LE=readUint16LE;function writeUint16BE(t,n,_){return n===void 0&&(n=new Uint8Array(2)),_===void 0&&(_=0),n[_+0]=t>>>8,n[_+1]=t>>>0,n}binary.writeUint16BE=writeUint16BE;binary.writeInt16BE=writeUint16BE;function writeUint16LE(t,n,_){return n===void 0&&(n=new Uint8Array(2)),_===void 0&&(_=0),n[_+0]=t>>>0,n[_+1]=t>>>8,n}binary.writeUint16LE=writeUint16LE;binary.writeInt16LE=writeUint16LE;function readInt32BE(t,n){return n===void 0&&(n=0),t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]}binary.readInt32BE=readInt32BE;function readUint32BE(t,n){return n===void 0&&(n=0),(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3])>>>0}binary.readUint32BE=readUint32BE;function readInt32LE(t,n){return n===void 0&&(n=0),t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]}binary.readInt32LE=readInt32LE;function readUint32LE(t,n){return n===void 0&&(n=0),(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n])>>>0}binary.readUint32LE=readUint32LE;function writeUint32BE$1(t,n,_){return n===void 0&&(n=new Uint8Array(4)),_===void 0&&(_=0),n[_+0]=t>>>24,n[_+1]=t>>>16,n[_+2]=t>>>8,n[_+3]=t>>>0,n}binary.writeUint32BE=writeUint32BE$1;binary.writeInt32BE=writeUint32BE$1;function writeUint32LE(t,n,_){return n===void 0&&(n=new Uint8Array(4)),_===void 0&&(_=0),n[_+0]=t>>>0,n[_+1]=t>>>8,n[_+2]=t>>>16,n[_+3]=t>>>24,n}binary.writeUint32LE=writeUint32LE;binary.writeInt32LE=writeUint32LE;function readInt64BE$1(t,n){n===void 0&&(n=0);var _=readInt32BE(t,n),x=readInt32BE(t,n+4);return _*4294967296+x-(x>>31)*4294967296}binary.readInt64BE=readInt64BE$1;function readUint64BE(t,n){n===void 0&&(n=0);var _=readUint32BE(t,n),x=readUint32BE(t,n+4);return _*4294967296+x}binary.readUint64BE=readUint64BE;function readInt64LE(t,n){n===void 0&&(n=0);var _=readInt32LE(t,n),x=readInt32LE(t,n+4);return x*4294967296+_-(_>>31)*4294967296}binary.readInt64LE=readInt64LE;function readUint64LE(t,n){n===void 0&&(n=0);var _=readUint32LE(t,n),x=readUint32LE(t,n+4);return x*4294967296+_}binary.readUint64LE=readUint64LE;function writeUint64BE(t,n,_){return n===void 0&&(n=new Uint8Array(8)),_===void 0&&(_=0),writeUint32BE$1(t/4294967296>>>0,n,_),writeUint32BE$1(t>>>0,n,_+4),n}binary.writeUint64BE=writeUint64BE;binary.writeInt64BE=writeUint64BE;function writeUint64LE(t,n,_){return n===void 0&&(n=new Uint8Array(8)),_===void 0&&(_=0),writeUint32LE(t>>>0,n,_),writeUint32LE(t/4294967296>>>0,n,_+4),n}binary.writeUint64LE=writeUint64LE;binary.writeInt64LE=writeUint64LE;function readUintBE(t,n,_){if(_===void 0&&(_=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>n.length-_)throw new Error("readUintBE: array is too short for the given bitLength");for(var x=0,E=1,S=t/8+_-1;S>=_;S--)x+=n[S]*E,E*=256;return x}binary.readUintBE=readUintBE;function readUintLE(t,n,_){if(_===void 0&&(_=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>n.length-_)throw new Error("readUintLE: array is too short for the given bitLength");for(var x=0,E=1,S=_;S<_+t/8;S++)x+=n[S]*E,E*=256;return x}binary.readUintLE=readUintLE;function writeUintBE(t,n,_,x){if(_===void 0&&(_=new Uint8Array(t/8)),x===void 0&&(x=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(n))throw new Error("writeUintBE value must be an integer");for(var E=1,S=t/8+x-1;S>=x;S--)_[S]=n/E&255,E*=256;return _}binary.writeUintBE=writeUintBE;function writeUintLE(t,n,_,x){if(_===void 0&&(_=new Uint8Array(t/8)),x===void 0&&(x=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(n))throw new Error("writeUintLE value must be an integer");for(var E=1,S=x;S<x+t/8;S++)_[S]=n/E&255,E*=256;return _}binary.writeUintLE=writeUintLE;function readFloat32BE(t,n){n===void 0&&(n=0);var _=new DataView(t.buffer,t.byteOffset,t.byteLength);return _.getFloat32(n)}binary.readFloat32BE=readFloat32BE;function readFloat32LE(t,n){n===void 0&&(n=0);var _=new DataView(t.buffer,t.byteOffset,t.byteLength);return _.getFloat32(n,!0)}binary.readFloat32LE=readFloat32LE;function readFloat64BE(t,n){n===void 0&&(n=0);var _=new DataView(t.buffer,t.byteOffset,t.byteLength);return _.getFloat64(n)}binary.readFloat64BE=readFloat64BE;function readFloat64LE(t,n){n===void 0&&(n=0);var _=new DataView(t.buffer,t.byteOffset,t.byteLength);return _.getFloat64(n,!0)}binary.readFloat64LE=readFloat64LE;function writeFloat32BE(t,n,_){n===void 0&&(n=new Uint8Array(4)),_===void 0&&(_=0);var x=new DataView(n.buffer,n.byteOffset,n.byteLength);return x.setFloat32(_,t),n}binary.writeFloat32BE=writeFloat32BE;function writeFloat32LE(t,n,_){n===void 0&&(n=new Uint8Array(4)),_===void 0&&(_=0);var x=new DataView(n.buffer,n.byteOffset,n.byteLength);return x.setFloat32(_,t,!0),n}binary.writeFloat32LE=writeFloat32LE;function writeFloat64BE(t,n,_){n===void 0&&(n=new Uint8Array(8)),_===void 0&&(_=0);var x=new DataView(n.buffer,n.byteOffset,n.byteLength);return x.setFloat64(_,t),n}binary.writeFloat64BE=writeFloat64BE;function writeFloat64LE(t,n,_){n===void 0&&(n=new Uint8Array(8)),_===void 0&&(_=0);var x=new DataView(n.buffer,n.byteOffset,n.byteLength);return x.setFloat64(_,t,!0),n}binary.writeFloat64LE=writeFloat64LE;var wipe$1={};Object.defineProperty(wipe$1,"__esModule",{value:!0});function wipe(t){for(var n=0;n<t.length;n++)t[n]=0;return t}wipe$1.wipe=wipe;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var n=binary,_=wipe$1;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var x=function(){function T(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return T.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},T.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},T.prototype.clean=function(){_.wipe(this._buffer),_.wipe(this._temp),this.reset()},T.prototype.update=function(B,A){if(A===void 0&&(A=B.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var I=0;if(this._bytesHashed+=A,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&A>0;)this._buffer[this._bufferLength++]=B[I++],A--;this._bufferLength===this.blockSize&&(S(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(A>=this.blockSize&&(I=S(this._temp,this._state,B,I,A),A%=this.blockSize);A>0;)this._buffer[this._bufferLength++]=B[I++],A--;return this},T.prototype.finish=function(B){if(!this._finished){var A=this._bytesHashed,I=this._bufferLength,D=A/536870912|0,M=A<<3,V=A%64<56?64:128;this._buffer[I]=128;for(var L=I+1;L<V-8;L++)this._buffer[L]=0;n.writeUint32BE(D,this._buffer,V-8),n.writeUint32BE(M,this._buffer,V-4),S(this._temp,this._state,this._buffer,0,V),this._finished=!0}for(var L=0;L<this.digestLength/4;L++)n.writeUint32BE(this._state[L],B,L*4);return this},T.prototype.digest=function(){var B=new Uint8Array(this.digestLength);return this.finish(B),B},T.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},T.prototype.restoreState=function(B){return this._state.set(B.state),this._bufferLength=B.bufferLength,B.buffer&&this._buffer.set(B.buffer),this._bytesHashed=B.bytesHashed,this._finished=!1,this},T.prototype.cleanSavedState=function(B){_.wipe(B.state),B.buffer&&_.wipe(B.buffer),B.bufferLength=0,B.bytesHashed=0},T}();t.SHA256=x;var E=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function S(T,B,A,I,D){for(;D>=64;){for(var M=B[0],V=B[1],L=B[2],F=B[3],j=B[4],U=B[5],H=B[6],Y=B[7],Z=0;Z<16;Z++){var ne=I+Z*4;T[Z]=n.readUint32BE(A,ne)}for(var Z=16;Z<64;Z++){var re=T[Z-2],X=(re>>>17|re<<32-17)^(re>>>19|re<<32-19)^re>>>10;re=T[Z-15];var ce=(re>>>7|re<<32-7)^(re>>>18|re<<32-18)^re>>>3;T[Z]=(X+T[Z-7]|0)+(ce+T[Z-16]|0)}for(var Z=0;Z<64;Z++){var X=(((j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7))+(j&U^~j&H)|0)+(Y+(E[Z]+T[Z]|0)|0)|0,ce=((M>>>2|M<<32-2)^(M>>>13|M<<32-13)^(M>>>22|M<<32-22))+(M&V^M&L^V&L)|0;Y=H,H=U,U=j,j=F+X|0,F=L,L=V,V=M,M=X+ce|0}B[0]+=M,B[1]+=V,B[2]+=L,B[3]+=F,B[4]+=j,B[5]+=U,B[6]+=H,B[7]+=Y,I+=64,D-=64}return I}function C(T){var B=new x;B.update(T);var A=B.digest();return B.clean(),A}t.hash=C})(sha256$4);var sha3$1={exports:{}};(function(t){(function(){var n="input is invalid type",_="finalize already called",x=typeof window=="object",E=x?window:{};E.JS_SHA3_NO_WINDOW&&(x=!1);var S=!x&&typeof self=="object",C=!E.JS_SHA3_NO_NODE_JS&&typeof browser$1$1=="object"&&browser$1$1.versions&&browser$1$1.versions.node;C?E=commonjsGlobal:S&&(E=self);var T=!E.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,B=!E.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",A="0123456789abcdef".split(""),I=[31,7936,2031616,520093696],D=[4,1024,262144,67108864],M=[1,256,65536,16777216],V=[6,1536,393216,100663296],L=[0,8,16,24],F=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],j=[224,256,384,512],U=[128,256],H=["hex","buffer","arrayBuffer","array","digest"],Y={128:168,256:136};(E.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(he){return Object.prototype.toString.call(he)==="[object Array]"}),B&&(E.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(he){return typeof he=="object"&&he.buffer&&he.buffer.constructor===ArrayBuffer});for(var Z=function(he,Ee,we){return function(xe){return new q(he,Ee,he).update(xe)[we]()}},ne=function(he,Ee,we){return function(xe,$e){return new q(he,Ee,$e).update(xe)[we]()}},re=function(he,Ee,we){return function(xe,$e,ge,Se){return O["cshake"+he].update(xe,$e,ge,Se)[we]()}},X=function(he,Ee,we){return function(xe,$e,ge,Se){return O["kmac"+he].update(xe,$e,ge,Se)[we]()}},ce=function(he,Ee,we,xe){for(var $e=0;$e<H.length;++$e){var ge=H[$e];he[ge]=Ee(we,xe,ge)}return he},ue=function(he,Ee){var we=Z(he,Ee,"hex");return we.create=function(){return new q(he,Ee,he)},we.update=function(xe){return we.create().update(xe)},ce(we,Z,he,Ee)},_e=function(he,Ee){var we=ne(he,Ee,"hex");return we.create=function(xe){return new q(he,Ee,xe)},we.update=function(xe,$e){return we.create($e).update(xe)},ce(we,ne,he,Ee)},ye=function(he,Ee){var we=Y[he],xe=re(he,Ee,"hex");return xe.create=function($e,ge,Se){return!ge&&!Se?O["shake"+he].create($e):new q(he,Ee,$e).bytepad([ge,Se],we)},xe.update=function($e,ge,Se,me){return xe.create(ge,Se,me).update($e)},ce(xe,re,he,Ee)},ie=function(he,Ee){var we=Y[he],xe=X(he,Ee,"hex");return xe.create=function($e,ge,Se){return new te(he,Ee,ge).bytepad(["KMAC",Se],we).bytepad([$e],we)},xe.update=function($e,ge,Se,me){return xe.create($e,Se,me).update(ge)},ce(xe,X,he,Ee)},W=[{name:"keccak",padding:M,bits:j,createMethod:ue},{name:"sha3",padding:V,bits:j,createMethod:ue},{name:"shake",padding:I,bits:U,createMethod:_e},{name:"cshake",padding:D,bits:U,createMethod:ye},{name:"kmac",padding:D,bits:U,createMethod:ie}],O={},z=[],J=0;J<W.length;++J)for(var ee=W[J],ae=ee.bits,oe=0;oe<ae.length;++oe){var se=ee.name+"_"+ae[oe];if(z.push(se),O[se]=ee.createMethod(ae[oe],ee.padding),ee.name!=="sha3"){var G=ee.name+ae[oe];z.push(G),O[G]=O[se]}}function q(he,Ee,we){this.blocks=[],this.s=[],this.padding=Ee,this.outputBits=we,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(he<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=we>>5,this.extraBytes=(we&31)>>3;for(var xe=0;xe<50;++xe)this.s[xe]=0}q.prototype.update=function(he){if(this.finalized)throw new Error(_);var Ee,we=typeof he;if(we!=="string"){if(we==="object"){if(he===null)throw new Error(n);if(B&&he.constructor===ArrayBuffer)he=new Uint8Array(he);else if(!Array.isArray(he)&&(!B||!ArrayBuffer.isView(he)))throw new Error(n)}else throw new Error(n);Ee=!0}for(var xe=this.blocks,$e=this.byteCount,ge=he.length,Se=this.blockCount,me=0,Be=this.s,ve,Ae;me<ge;){if(this.reset)for(this.reset=!1,xe[0]=this.block,ve=1;ve<Se+1;++ve)xe[ve]=0;if(Ee)for(ve=this.start;me<ge&&ve<$e;++me)xe[ve>>2]|=he[me]<<L[ve++&3];else for(ve=this.start;me<ge&&ve<$e;++me)Ae=he.charCodeAt(me),Ae<128?xe[ve>>2]|=Ae<<L[ve++&3]:Ae<2048?(xe[ve>>2]|=(192|Ae>>6)<<L[ve++&3],xe[ve>>2]|=(128|Ae&63)<<L[ve++&3]):Ae<55296||Ae>=57344?(xe[ve>>2]|=(224|Ae>>12)<<L[ve++&3],xe[ve>>2]|=(128|Ae>>6&63)<<L[ve++&3],xe[ve>>2]|=(128|Ae&63)<<L[ve++&3]):(Ae=65536+((Ae&1023)<<10|he.charCodeAt(++me)&1023),xe[ve>>2]|=(240|Ae>>18)<<L[ve++&3],xe[ve>>2]|=(128|Ae>>12&63)<<L[ve++&3],xe[ve>>2]|=(128|Ae>>6&63)<<L[ve++&3],xe[ve>>2]|=(128|Ae&63)<<L[ve++&3]);if(this.lastByteIndex=ve,ve>=$e){for(this.start=ve-$e,this.block=xe[Se],ve=0;ve<Se;++ve)Be[ve]^=xe[ve];fe(Be),this.reset=!0}else this.start=ve}return this},q.prototype.encode=function(he,Ee){var we=he&255,xe=1,$e=[we];for(he=he>>8,we=he&255;we>0;)$e.unshift(we),he=he>>8,we=he&255,++xe;return Ee?$e.push(xe):$e.unshift(xe),this.update($e),$e.length},q.prototype.encodeString=function(he){var Ee,we=typeof he;if(we!=="string"){if(we==="object"){if(he===null)throw new Error(n);if(B&&he.constructor===ArrayBuffer)he=new Uint8Array(he);else if(!Array.isArray(he)&&(!B||!ArrayBuffer.isView(he)))throw new Error(n)}else throw new Error(n);Ee=!0}var xe=0,$e=he.length;if(Ee)xe=$e;else for(var ge=0;ge<he.length;++ge){var Se=he.charCodeAt(ge);Se<128?xe+=1:Se<2048?xe+=2:Se<55296||Se>=57344?xe+=3:(Se=65536+((Se&1023)<<10|he.charCodeAt(++ge)&1023),xe+=4)}return xe+=this.encode(xe*8),this.update(he),xe},q.prototype.bytepad=function(he,Ee){for(var we=this.encode(Ee),xe=0;xe<he.length;++xe)we+=this.encodeString(he[xe]);var $e=Ee-we%Ee,ge=[];return ge.length=$e,this.update(ge),this},q.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var he=this.blocks,Ee=this.lastByteIndex,we=this.blockCount,xe=this.s;if(he[Ee>>2]|=this.padding[Ee&3],this.lastByteIndex===this.byteCount)for(he[0]=he[we],Ee=1;Ee<we+1;++Ee)he[Ee]=0;for(he[we-1]|=2147483648,Ee=0;Ee<we;++Ee)xe[Ee]^=he[Ee];fe(xe)}},q.prototype.toString=q.prototype.hex=function(){this.finalize();for(var he=this.blockCount,Ee=this.s,we=this.outputBlocks,xe=this.extraBytes,$e=0,ge=0,Se="",me;ge<we;){for($e=0;$e<he&&ge<we;++$e,++ge)me=Ee[$e],Se+=A[me>>4&15]+A[me&15]+A[me>>12&15]+A[me>>8&15]+A[me>>20&15]+A[me>>16&15]+A[me>>28&15]+A[me>>24&15];ge%he===0&&(fe(Ee),$e=0)}return xe&&(me=Ee[$e],Se+=A[me>>4&15]+A[me&15],xe>1&&(Se+=A[me>>12&15]+A[me>>8&15]),xe>2&&(Se+=A[me>>20&15]+A[me>>16&15])),Se},q.prototype.arrayBuffer=function(){this.finalize();var he=this.blockCount,Ee=this.s,we=this.outputBlocks,xe=this.extraBytes,$e=0,ge=0,Se=this.outputBits>>3,me;xe?me=new ArrayBuffer(we+1<<2):me=new ArrayBuffer(Se);for(var Be=new Uint32Array(me);ge<we;){for($e=0;$e<he&&ge<we;++$e,++ge)Be[ge]=Ee[$e];ge%he===0&&fe(Ee)}return xe&&(Be[$e]=Ee[$e],me=me.slice(0,Se)),me},q.prototype.buffer=q.prototype.arrayBuffer,q.prototype.digest=q.prototype.array=function(){this.finalize();for(var he=this.blockCount,Ee=this.s,we=this.outputBlocks,xe=this.extraBytes,$e=0,ge=0,Se=[],me,Be;ge<we;){for($e=0;$e<he&&ge<we;++$e,++ge)me=ge<<2,Be=Ee[$e],Se[me]=Be&255,Se[me+1]=Be>>8&255,Se[me+2]=Be>>16&255,Se[me+3]=Be>>24&255;ge%he===0&&fe(Ee)}return xe&&(me=ge<<2,Be=Ee[$e],Se[me]=Be&255,xe>1&&(Se[me+1]=Be>>8&255),xe>2&&(Se[me+2]=Be>>16&255)),Se};function te(he,Ee,we){q.call(this,he,Ee,we)}te.prototype=new q,te.prototype.finalize=function(){return this.encode(this.outputBits,!0),q.prototype.finalize.call(this)};var fe=function(he){var Ee,we,xe,$e,ge,Se,me,Be,ve,Ae,Ve,Pe,Re,Ne,qe,Ke,He,Ge,rt,st,Je,Ie,be,Te,Le,We,Ze,Qe,St,pt,ft,Ut,$t,Nt,lr,Gt,Rt,Qt,Pt,kt,er,Lt,Bt,ir,jt,Ct,nr,je,De,Me,pe,ke,Oe,Fe,ze,Xe,tt,it,ot,at,ct,dt,yt;for(xe=0;xe<48;xe+=2)$e=he[0]^he[10]^he[20]^he[30]^he[40],ge=he[1]^he[11]^he[21]^he[31]^he[41],Se=he[2]^he[12]^he[22]^he[32]^he[42],me=he[3]^he[13]^he[23]^he[33]^he[43],Be=he[4]^he[14]^he[24]^he[34]^he[44],ve=he[5]^he[15]^he[25]^he[35]^he[45],Ae=he[6]^he[16]^he[26]^he[36]^he[46],Ve=he[7]^he[17]^he[27]^he[37]^he[47],Pe=he[8]^he[18]^he[28]^he[38]^he[48],Re=he[9]^he[19]^he[29]^he[39]^he[49],Ee=Pe^(Se<<1|me>>>31),we=Re^(me<<1|Se>>>31),he[0]^=Ee,he[1]^=we,he[10]^=Ee,he[11]^=we,he[20]^=Ee,he[21]^=we,he[30]^=Ee,he[31]^=we,he[40]^=Ee,he[41]^=we,Ee=$e^(Be<<1|ve>>>31),we=ge^(ve<<1|Be>>>31),he[2]^=Ee,he[3]^=we,he[12]^=Ee,he[13]^=we,he[22]^=Ee,he[23]^=we,he[32]^=Ee,he[33]^=we,he[42]^=Ee,he[43]^=we,Ee=Se^(Ae<<1|Ve>>>31),we=me^(Ve<<1|Ae>>>31),he[4]^=Ee,he[5]^=we,he[14]^=Ee,he[15]^=we,he[24]^=Ee,he[25]^=we,he[34]^=Ee,he[35]^=we,he[44]^=Ee,he[45]^=we,Ee=Be^(Pe<<1|Re>>>31),we=ve^(Re<<1|Pe>>>31),he[6]^=Ee,he[7]^=we,he[16]^=Ee,he[17]^=we,he[26]^=Ee,he[27]^=we,he[36]^=Ee,he[37]^=we,he[46]^=Ee,he[47]^=we,Ee=Ae^($e<<1|ge>>>31),we=Ve^(ge<<1|$e>>>31),he[8]^=Ee,he[9]^=we,he[18]^=Ee,he[19]^=we,he[28]^=Ee,he[29]^=we,he[38]^=Ee,he[39]^=we,he[48]^=Ee,he[49]^=we,Ne=he[0],qe=he[1],Ct=he[11]<<4|he[10]>>>28,nr=he[10]<<4|he[11]>>>28,Qe=he[20]<<3|he[21]>>>29,St=he[21]<<3|he[20]>>>29,at=he[31]<<9|he[30]>>>23,ct=he[30]<<9|he[31]>>>23,Lt=he[40]<<18|he[41]>>>14,Bt=he[41]<<18|he[40]>>>14,Nt=he[2]<<1|he[3]>>>31,lr=he[3]<<1|he[2]>>>31,Ke=he[13]<<12|he[12]>>>20,He=he[12]<<12|he[13]>>>20,je=he[22]<<10|he[23]>>>22,De=he[23]<<10|he[22]>>>22,pt=he[33]<<13|he[32]>>>19,ft=he[32]<<13|he[33]>>>19,dt=he[42]<<2|he[43]>>>30,yt=he[43]<<2|he[42]>>>30,Fe=he[5]<<30|he[4]>>>2,ze=he[4]<<30|he[5]>>>2,Gt=he[14]<<6|he[15]>>>26,Rt=he[15]<<6|he[14]>>>26,Ge=he[25]<<11|he[24]>>>21,rt=he[24]<<11|he[25]>>>21,Me=he[34]<<15|he[35]>>>17,pe=he[35]<<15|he[34]>>>17,Ut=he[45]<<29|he[44]>>>3,$t=he[44]<<29|he[45]>>>3,Te=he[6]<<28|he[7]>>>4,Le=he[7]<<28|he[6]>>>4,Xe=he[17]<<23|he[16]>>>9,tt=he[16]<<23|he[17]>>>9,Qt=he[26]<<25|he[27]>>>7,Pt=he[27]<<25|he[26]>>>7,st=he[36]<<21|he[37]>>>11,Je=he[37]<<21|he[36]>>>11,ke=he[47]<<24|he[46]>>>8,Oe=he[46]<<24|he[47]>>>8,ir=he[8]<<27|he[9]>>>5,jt=he[9]<<27|he[8]>>>5,We=he[18]<<20|he[19]>>>12,Ze=he[19]<<20|he[18]>>>12,it=he[29]<<7|he[28]>>>25,ot=he[28]<<7|he[29]>>>25,kt=he[38]<<8|he[39]>>>24,er=he[39]<<8|he[38]>>>24,Ie=he[48]<<14|he[49]>>>18,be=he[49]<<14|he[48]>>>18,he[0]=Ne^~Ke&Ge,he[1]=qe^~He&rt,he[10]=Te^~We&Qe,he[11]=Le^~Ze&St,he[20]=Nt^~Gt&Qt,he[21]=lr^~Rt&Pt,he[30]=ir^~Ct&je,he[31]=jt^~nr&De,he[40]=Fe^~Xe&it,he[41]=ze^~tt&ot,he[2]=Ke^~Ge&st,he[3]=He^~rt&Je,he[12]=We^~Qe&pt,he[13]=Ze^~St&ft,he[22]=Gt^~Qt&kt,he[23]=Rt^~Pt&er,he[32]=Ct^~je&Me,he[33]=nr^~De&pe,he[42]=Xe^~it&at,he[43]=tt^~ot&ct,he[4]=Ge^~st&Ie,he[5]=rt^~Je&be,he[14]=Qe^~pt&Ut,he[15]=St^~ft&$t,he[24]=Qt^~kt&Lt,he[25]=Pt^~er&Bt,he[34]=je^~Me&ke,he[35]=De^~pe&Oe,he[44]=it^~at&dt,he[45]=ot^~ct&yt,he[6]=st^~Ie&Ne,he[7]=Je^~be&qe,he[16]=pt^~Ut&Te,he[17]=ft^~$t&Le,he[26]=kt^~Lt&Nt,he[27]=er^~Bt&lr,he[36]=Me^~ke&ir,he[37]=pe^~Oe&jt,he[46]=at^~dt&Fe,he[47]=ct^~yt&ze,he[8]=Ie^~Ne&Ke,he[9]=be^~qe&He,he[18]=Ut^~Te&We,he[19]=$t^~Le&Ze,he[28]=Lt^~Nt&Gt,he[29]=Bt^~lr&Rt,he[38]=ke^~ir&Ct,he[39]=Oe^~jt&nr,he[48]=dt^~Fe&Xe,he[49]=yt^~ze&tt,he[0]^=F[xe],he[1]^=F[xe+1]};if(T)t.exports=O;else for(J=0;J<z.length;++J)E[z[J]]=O[z[J]]})()})(sha3$1);var sha3Exports=sha3$1.exports;const sha3=getDefaultExportFromCjs(sha3Exports);var ed25519={},random={},system={},browser$2={};Object.defineProperty(browser$2,"__esModule",{value:!0});browser$2.BrowserRandomSource=void 0;const QUOTA=65536;class BrowserRandomSource{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const n=typeof self<"u"?self.crypto||self.msCrypto:null;n&&n.getRandomValues!==void 0&&(this._crypto=n,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(n){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const _=new Uint8Array(n);for(let x=0;x<_.length;x+=QUOTA)this._crypto.getRandomValues(_.subarray(x,x+Math.min(_.length-x,QUOTA)));return _}}browser$2.BrowserRandomSource=BrowserRandomSource;var node={};Object.defineProperty(node,"__esModule",{value:!0});node.NodeRandomSource=void 0;const wipe_1$2=wipe$1;class NodeRandomSource{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof commonjsRequire$1<"u"){const n=requireCryptoBrowserify();n&&n.randomBytes&&(this._crypto=n,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(n){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let _=this._crypto.randomBytes(n);if(_.length!==n)throw new Error("NodeRandomSource: got fewer bytes than requested");const x=new Uint8Array(n);for(let E=0;E<x.length;E++)x[E]=_[E];return(0,wipe_1$2.wipe)(_),x}}node.NodeRandomSource=NodeRandomSource;Object.defineProperty(system,"__esModule",{value:!0});system.SystemRandomSource=void 0;const browser_1=browser$2,node_1=node;class SystemRandomSource{constructor(){if(this.isAvailable=!1,this.name="",this._source=new browser_1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new node_1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(n){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(n)}}system.SystemRandomSource=SystemRandomSource;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const n=system,_=binary,x=wipe$1;t.defaultRandomSource=new n.SystemRandomSource;function E(A,I=t.defaultRandomSource){return I.randomBytes(A)}t.randomBytes=E;function S(A=t.defaultRandomSource){const I=E(4,A),D=(0,_.readUint32LE)(I);return(0,x.wipe)(I),D}t.randomUint32=S;const C="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function T(A,I=C,D=t.defaultRandomSource){if(I.length<2)throw new Error("randomString charset is too short");if(I.length>256)throw new Error("randomString charset is too long");let M="";const V=I.length,L=256-256%V;for(;A>0;){const F=E(Math.ceil(A*256/L),D);for(let j=0;j<F.length&&A>0;j++){const U=F[j];U<L&&(M+=I.charAt(U%V),A--)}(0,x.wipe)(F)}return M}t.randomString=T;function B(A,I=C,D=t.defaultRandomSource){const M=Math.ceil(A/(Math.log(I.length)/Math.LN2));return T(M,I,D)}t.randomStringForEntropy=B})(random);var sha512={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var n=binary,_=wipe$1;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var x=function(){function T(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return T.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},T.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},T.prototype.clean=function(){_.wipe(this._buffer),_.wipe(this._tempHi),_.wipe(this._tempLo),this.reset()},T.prototype.update=function(B,A){if(A===void 0&&(A=B.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var I=0;if(this._bytesHashed+=A,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&A>0;)this._buffer[this._bufferLength++]=B[I++],A--;this._bufferLength===this.blockSize&&(S(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(A>=this.blockSize&&(I=S(this._tempHi,this._tempLo,this._stateHi,this._stateLo,B,I,A),A%=this.blockSize);A>0;)this._buffer[this._bufferLength++]=B[I++],A--;return this},T.prototype.finish=function(B){if(!this._finished){var A=this._bytesHashed,I=this._bufferLength,D=A/536870912|0,M=A<<3,V=A%128<112?128:256;this._buffer[I]=128;for(var L=I+1;L<V-8;L++)this._buffer[L]=0;n.writeUint32BE(D,this._buffer,V-8),n.writeUint32BE(M,this._buffer,V-4),S(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,V),this._finished=!0}for(var L=0;L<this.digestLength/8;L++)n.writeUint32BE(this._stateHi[L],B,L*8),n.writeUint32BE(this._stateLo[L],B,L*8+4);return this},T.prototype.digest=function(){var B=new Uint8Array(this.digestLength);return this.finish(B),B},T.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},T.prototype.restoreState=function(B){return this._stateHi.set(B.stateHi),this._stateLo.set(B.stateLo),this._bufferLength=B.bufferLength,B.buffer&&this._buffer.set(B.buffer),this._bytesHashed=B.bytesHashed,this._finished=!1,this},T.prototype.cleanSavedState=function(B){_.wipe(B.stateHi),_.wipe(B.stateLo),B.buffer&&_.wipe(B.buffer),B.bufferLength=0,B.bytesHashed=0},T}();t.SHA512=x;var E=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function S(T,B,A,I,D,M,V){for(var L=A[0],F=A[1],j=A[2],U=A[3],H=A[4],Y=A[5],Z=A[6],ne=A[7],re=I[0],X=I[1],ce=I[2],ue=I[3],_e=I[4],ye=I[5],ie=I[6],W=I[7],O,z,J,ee,ae,oe,se,G;V>=128;){for(var q=0;q<16;q++){var te=8*q+M;T[q]=n.readUint32BE(D,te),B[q]=n.readUint32BE(D,te+4)}for(var q=0;q<80;q++){var fe=L,he=F,Ee=j,we=U,xe=H,$e=Y,ge=Z,Se=ne,me=re,Be=X,ve=ce,Ae=ue,Ve=_e,Pe=ye,Re=ie,Ne=W;if(O=ne,z=W,ae=z&65535,oe=z>>>16,se=O&65535,G=O>>>16,O=(H>>>14|_e<<32-14)^(H>>>18|_e<<32-18)^(_e>>>41-32|H<<32-(41-32)),z=(_e>>>14|H<<32-14)^(_e>>>18|H<<32-18)^(H>>>41-32|_e<<32-(41-32)),ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,O=H&Y^~H&Z,z=_e&ye^~_e&ie,ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,O=E[q*2],z=E[q*2+1],ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,O=T[q%16],z=B[q%16],ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,oe+=ae>>>16,se+=oe>>>16,G+=se>>>16,J=se&65535|G<<16,ee=ae&65535|oe<<16,O=J,z=ee,ae=z&65535,oe=z>>>16,se=O&65535,G=O>>>16,O=(L>>>28|re<<32-28)^(re>>>34-32|L<<32-(34-32))^(re>>>39-32|L<<32-(39-32)),z=(re>>>28|L<<32-28)^(L>>>34-32|re<<32-(34-32))^(L>>>39-32|re<<32-(39-32)),ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,O=L&F^L&j^F&j,z=re&X^re&ce^X&ce,ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,oe+=ae>>>16,se+=oe>>>16,G+=se>>>16,Se=se&65535|G<<16,Ne=ae&65535|oe<<16,O=we,z=Ae,ae=z&65535,oe=z>>>16,se=O&65535,G=O>>>16,O=J,z=ee,ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,oe+=ae>>>16,se+=oe>>>16,G+=se>>>16,we=se&65535|G<<16,Ae=ae&65535|oe<<16,F=fe,j=he,U=Ee,H=we,Y=xe,Z=$e,ne=ge,L=Se,X=me,ce=Be,ue=ve,_e=Ae,ye=Ve,ie=Pe,W=Re,re=Ne,q%16===15)for(var te=0;te<16;te++)O=T[te],z=B[te],ae=z&65535,oe=z>>>16,se=O&65535,G=O>>>16,O=T[(te+9)%16],z=B[(te+9)%16],ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,J=T[(te+1)%16],ee=B[(te+1)%16],O=(J>>>1|ee<<32-1)^(J>>>8|ee<<32-8)^J>>>7,z=(ee>>>1|J<<32-1)^(ee>>>8|J<<32-8)^(ee>>>7|J<<32-7),ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,J=T[(te+14)%16],ee=B[(te+14)%16],O=(J>>>19|ee<<32-19)^(ee>>>61-32|J<<32-(61-32))^J>>>6,z=(ee>>>19|J<<32-19)^(J>>>61-32|ee<<32-(61-32))^(ee>>>6|J<<32-6),ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,oe+=ae>>>16,se+=oe>>>16,G+=se>>>16,T[te]=se&65535|G<<16,B[te]=ae&65535|oe<<16}O=L,z=re,ae=z&65535,oe=z>>>16,se=O&65535,G=O>>>16,O=A[0],z=I[0],ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,oe+=ae>>>16,se+=oe>>>16,G+=se>>>16,A[0]=L=se&65535|G<<16,I[0]=re=ae&65535|oe<<16,O=F,z=X,ae=z&65535,oe=z>>>16,se=O&65535,G=O>>>16,O=A[1],z=I[1],ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,oe+=ae>>>16,se+=oe>>>16,G+=se>>>16,A[1]=F=se&65535|G<<16,I[1]=X=ae&65535|oe<<16,O=j,z=ce,ae=z&65535,oe=z>>>16,se=O&65535,G=O>>>16,O=A[2],z=I[2],ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,oe+=ae>>>16,se+=oe>>>16,G+=se>>>16,A[2]=j=se&65535|G<<16,I[2]=ce=ae&65535|oe<<16,O=U,z=ue,ae=z&65535,oe=z>>>16,se=O&65535,G=O>>>16,O=A[3],z=I[3],ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,oe+=ae>>>16,se+=oe>>>16,G+=se>>>16,A[3]=U=se&65535|G<<16,I[3]=ue=ae&65535|oe<<16,O=H,z=_e,ae=z&65535,oe=z>>>16,se=O&65535,G=O>>>16,O=A[4],z=I[4],ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,oe+=ae>>>16,se+=oe>>>16,G+=se>>>16,A[4]=H=se&65535|G<<16,I[4]=_e=ae&65535|oe<<16,O=Y,z=ye,ae=z&65535,oe=z>>>16,se=O&65535,G=O>>>16,O=A[5],z=I[5],ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,oe+=ae>>>16,se+=oe>>>16,G+=se>>>16,A[5]=Y=se&65535|G<<16,I[5]=ye=ae&65535|oe<<16,O=Z,z=ie,ae=z&65535,oe=z>>>16,se=O&65535,G=O>>>16,O=A[6],z=I[6],ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,oe+=ae>>>16,se+=oe>>>16,G+=se>>>16,A[6]=Z=se&65535|G<<16,I[6]=ie=ae&65535|oe<<16,O=ne,z=W,ae=z&65535,oe=z>>>16,se=O&65535,G=O>>>16,O=A[7],z=I[7],ae+=z&65535,oe+=z>>>16,se+=O&65535,G+=O>>>16,oe+=ae>>>16,se+=oe>>>16,G+=se>>>16,A[7]=ne=se&65535|G<<16,I[7]=W=ae&65535|oe<<16,M+=128,V-=128}return M}function C(T){var B=new x;B.update(T);var A=B.digest();return B.clean(),A}t.hash=C})(sha512);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const n=random,_=sha512,x=wipe$1;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function E(we){const xe=new Float64Array(16);if(we)for(let $e=0;$e<we.length;$e++)xe[$e]=we[$e];return xe}const S=new Uint8Array(32);S[0]=9;const C=E(),T=E([1]),B=E([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),A=E([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),I=E([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),D=E([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),M=E([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function V(we,xe){for(let $e=0;$e<16;$e++)we[$e]=xe[$e]|0}function L(we){let xe=1;for(let $e=0;$e<16;$e++){let ge=we[$e]+xe+65535;xe=Math.floor(ge/65536),we[$e]=ge-xe*65536}we[0]+=xe-1+37*(xe-1)}function F(we,xe,$e){const ge=~($e-1);for(let Se=0;Se<16;Se++){const me=ge&(we[Se]^xe[Se]);we[Se]^=me,xe[Se]^=me}}function j(we,xe){const $e=E(),ge=E();for(let Se=0;Se<16;Se++)ge[Se]=xe[Se];L(ge),L(ge),L(ge);for(let Se=0;Se<2;Se++){$e[0]=ge[0]-65517;for(let Be=1;Be<15;Be++)$e[Be]=ge[Be]-65535-($e[Be-1]>>16&1),$e[Be-1]&=65535;$e[15]=ge[15]-32767-($e[14]>>16&1);const me=$e[15]>>16&1;$e[14]&=65535,F(ge,$e,1-me)}for(let Se=0;Se<16;Se++)we[2*Se]=ge[Se]&255,we[2*Se+1]=ge[Se]>>8}function U(we,xe){let $e=0;for(let ge=0;ge<32;ge++)$e|=we[ge]^xe[ge];return(1&$e-1>>>8)-1}function H(we,xe){const $e=new Uint8Array(32),ge=new Uint8Array(32);return j($e,we),j(ge,xe),U($e,ge)}function Y(we){const xe=new Uint8Array(32);return j(xe,we),xe[0]&1}function Z(we,xe){for(let $e=0;$e<16;$e++)we[$e]=xe[2*$e]+(xe[2*$e+1]<<8);we[15]&=32767}function ne(we,xe,$e){for(let ge=0;ge<16;ge++)we[ge]=xe[ge]+$e[ge]}function re(we,xe,$e){for(let ge=0;ge<16;ge++)we[ge]=xe[ge]-$e[ge]}function X(we,xe,$e){let ge,Se,me=0,Be=0,ve=0,Ae=0,Ve=0,Pe=0,Re=0,Ne=0,qe=0,Ke=0,He=0,Ge=0,rt=0,st=0,Je=0,Ie=0,be=0,Te=0,Le=0,We=0,Ze=0,Qe=0,St=0,pt=0,ft=0,Ut=0,$t=0,Nt=0,lr=0,Gt=0,Rt=0,Qt=$e[0],Pt=$e[1],kt=$e[2],er=$e[3],Lt=$e[4],Bt=$e[5],ir=$e[6],jt=$e[7],Ct=$e[8],nr=$e[9],je=$e[10],De=$e[11],Me=$e[12],pe=$e[13],ke=$e[14],Oe=$e[15];ge=xe[0],me+=ge*Qt,Be+=ge*Pt,ve+=ge*kt,Ae+=ge*er,Ve+=ge*Lt,Pe+=ge*Bt,Re+=ge*ir,Ne+=ge*jt,qe+=ge*Ct,Ke+=ge*nr,He+=ge*je,Ge+=ge*De,rt+=ge*Me,st+=ge*pe,Je+=ge*ke,Ie+=ge*Oe,ge=xe[1],Be+=ge*Qt,ve+=ge*Pt,Ae+=ge*kt,Ve+=ge*er,Pe+=ge*Lt,Re+=ge*Bt,Ne+=ge*ir,qe+=ge*jt,Ke+=ge*Ct,He+=ge*nr,Ge+=ge*je,rt+=ge*De,st+=ge*Me,Je+=ge*pe,Ie+=ge*ke,be+=ge*Oe,ge=xe[2],ve+=ge*Qt,Ae+=ge*Pt,Ve+=ge*kt,Pe+=ge*er,Re+=ge*Lt,Ne+=ge*Bt,qe+=ge*ir,Ke+=ge*jt,He+=ge*Ct,Ge+=ge*nr,rt+=ge*je,st+=ge*De,Je+=ge*Me,Ie+=ge*pe,be+=ge*ke,Te+=ge*Oe,ge=xe[3],Ae+=ge*Qt,Ve+=ge*Pt,Pe+=ge*kt,Re+=ge*er,Ne+=ge*Lt,qe+=ge*Bt,Ke+=ge*ir,He+=ge*jt,Ge+=ge*Ct,rt+=ge*nr,st+=ge*je,Je+=ge*De,Ie+=ge*Me,be+=ge*pe,Te+=ge*ke,Le+=ge*Oe,ge=xe[4],Ve+=ge*Qt,Pe+=ge*Pt,Re+=ge*kt,Ne+=ge*er,qe+=ge*Lt,Ke+=ge*Bt,He+=ge*ir,Ge+=ge*jt,rt+=ge*Ct,st+=ge*nr,Je+=ge*je,Ie+=ge*De,be+=ge*Me,Te+=ge*pe,Le+=ge*ke,We+=ge*Oe,ge=xe[5],Pe+=ge*Qt,Re+=ge*Pt,Ne+=ge*kt,qe+=ge*er,Ke+=ge*Lt,He+=ge*Bt,Ge+=ge*ir,rt+=ge*jt,st+=ge*Ct,Je+=ge*nr,Ie+=ge*je,be+=ge*De,Te+=ge*Me,Le+=ge*pe,We+=ge*ke,Ze+=ge*Oe,ge=xe[6],Re+=ge*Qt,Ne+=ge*Pt,qe+=ge*kt,Ke+=ge*er,He+=ge*Lt,Ge+=ge*Bt,rt+=ge*ir,st+=ge*jt,Je+=ge*Ct,Ie+=ge*nr,be+=ge*je,Te+=ge*De,Le+=ge*Me,We+=ge*pe,Ze+=ge*ke,Qe+=ge*Oe,ge=xe[7],Ne+=ge*Qt,qe+=ge*Pt,Ke+=ge*kt,He+=ge*er,Ge+=ge*Lt,rt+=ge*Bt,st+=ge*ir,Je+=ge*jt,Ie+=ge*Ct,be+=ge*nr,Te+=ge*je,Le+=ge*De,We+=ge*Me,Ze+=ge*pe,Qe+=ge*ke,St+=ge*Oe,ge=xe[8],qe+=ge*Qt,Ke+=ge*Pt,He+=ge*kt,Ge+=ge*er,rt+=ge*Lt,st+=ge*Bt,Je+=ge*ir,Ie+=ge*jt,be+=ge*Ct,Te+=ge*nr,Le+=ge*je,We+=ge*De,Ze+=ge*Me,Qe+=ge*pe,St+=ge*ke,pt+=ge*Oe,ge=xe[9],Ke+=ge*Qt,He+=ge*Pt,Ge+=ge*kt,rt+=ge*er,st+=ge*Lt,Je+=ge*Bt,Ie+=ge*ir,be+=ge*jt,Te+=ge*Ct,Le+=ge*nr,We+=ge*je,Ze+=ge*De,Qe+=ge*Me,St+=ge*pe,pt+=ge*ke,ft+=ge*Oe,ge=xe[10],He+=ge*Qt,Ge+=ge*Pt,rt+=ge*kt,st+=ge*er,Je+=ge*Lt,Ie+=ge*Bt,be+=ge*ir,Te+=ge*jt,Le+=ge*Ct,We+=ge*nr,Ze+=ge*je,Qe+=ge*De,St+=ge*Me,pt+=ge*pe,ft+=ge*ke,Ut+=ge*Oe,ge=xe[11],Ge+=ge*Qt,rt+=ge*Pt,st+=ge*kt,Je+=ge*er,Ie+=ge*Lt,be+=ge*Bt,Te+=ge*ir,Le+=ge*jt,We+=ge*Ct,Ze+=ge*nr,Qe+=ge*je,St+=ge*De,pt+=ge*Me,ft+=ge*pe,Ut+=ge*ke,$t+=ge*Oe,ge=xe[12],rt+=ge*Qt,st+=ge*Pt,Je+=ge*kt,Ie+=ge*er,be+=ge*Lt,Te+=ge*Bt,Le+=ge*ir,We+=ge*jt,Ze+=ge*Ct,Qe+=ge*nr,St+=ge*je,pt+=ge*De,ft+=ge*Me,Ut+=ge*pe,$t+=ge*ke,Nt+=ge*Oe,ge=xe[13],st+=ge*Qt,Je+=ge*Pt,Ie+=ge*kt,be+=ge*er,Te+=ge*Lt,Le+=ge*Bt,We+=ge*ir,Ze+=ge*jt,Qe+=ge*Ct,St+=ge*nr,pt+=ge*je,ft+=ge*De,Ut+=ge*Me,$t+=ge*pe,Nt+=ge*ke,lr+=ge*Oe,ge=xe[14],Je+=ge*Qt,Ie+=ge*Pt,be+=ge*kt,Te+=ge*er,Le+=ge*Lt,We+=ge*Bt,Ze+=ge*ir,Qe+=ge*jt,St+=ge*Ct,pt+=ge*nr,ft+=ge*je,Ut+=ge*De,$t+=ge*Me,Nt+=ge*pe,lr+=ge*ke,Gt+=ge*Oe,ge=xe[15],Ie+=ge*Qt,be+=ge*Pt,Te+=ge*kt,Le+=ge*er,We+=ge*Lt,Ze+=ge*Bt,Qe+=ge*ir,St+=ge*jt,pt+=ge*Ct,ft+=ge*nr,Ut+=ge*je,$t+=ge*De,Nt+=ge*Me,lr+=ge*pe,Gt+=ge*ke,Rt+=ge*Oe,me+=38*be,Be+=38*Te,ve+=38*Le,Ae+=38*We,Ve+=38*Ze,Pe+=38*Qe,Re+=38*St,Ne+=38*pt,qe+=38*ft,Ke+=38*Ut,He+=38*$t,Ge+=38*Nt,rt+=38*lr,st+=38*Gt,Je+=38*Rt,Se=1,ge=me+Se+65535,Se=Math.floor(ge/65536),me=ge-Se*65536,ge=Be+Se+65535,Se=Math.floor(ge/65536),Be=ge-Se*65536,ge=ve+Se+65535,Se=Math.floor(ge/65536),ve=ge-Se*65536,ge=Ae+Se+65535,Se=Math.floor(ge/65536),Ae=ge-Se*65536,ge=Ve+Se+65535,Se=Math.floor(ge/65536),Ve=ge-Se*65536,ge=Pe+Se+65535,Se=Math.floor(ge/65536),Pe=ge-Se*65536,ge=Re+Se+65535,Se=Math.floor(ge/65536),Re=ge-Se*65536,ge=Ne+Se+65535,Se=Math.floor(ge/65536),Ne=ge-Se*65536,ge=qe+Se+65535,Se=Math.floor(ge/65536),qe=ge-Se*65536,ge=Ke+Se+65535,Se=Math.floor(ge/65536),Ke=ge-Se*65536,ge=He+Se+65535,Se=Math.floor(ge/65536),He=ge-Se*65536,ge=Ge+Se+65535,Se=Math.floor(ge/65536),Ge=ge-Se*65536,ge=rt+Se+65535,Se=Math.floor(ge/65536),rt=ge-Se*65536,ge=st+Se+65535,Se=Math.floor(ge/65536),st=ge-Se*65536,ge=Je+Se+65535,Se=Math.floor(ge/65536),Je=ge-Se*65536,ge=Ie+Se+65535,Se=Math.floor(ge/65536),Ie=ge-Se*65536,me+=Se-1+37*(Se-1),Se=1,ge=me+Se+65535,Se=Math.floor(ge/65536),me=ge-Se*65536,ge=Be+Se+65535,Se=Math.floor(ge/65536),Be=ge-Se*65536,ge=ve+Se+65535,Se=Math.floor(ge/65536),ve=ge-Se*65536,ge=Ae+Se+65535,Se=Math.floor(ge/65536),Ae=ge-Se*65536,ge=Ve+Se+65535,Se=Math.floor(ge/65536),Ve=ge-Se*65536,ge=Pe+Se+65535,Se=Math.floor(ge/65536),Pe=ge-Se*65536,ge=Re+Se+65535,Se=Math.floor(ge/65536),Re=ge-Se*65536,ge=Ne+Se+65535,Se=Math.floor(ge/65536),Ne=ge-Se*65536,ge=qe+Se+65535,Se=Math.floor(ge/65536),qe=ge-Se*65536,ge=Ke+Se+65535,Se=Math.floor(ge/65536),Ke=ge-Se*65536,ge=He+Se+65535,Se=Math.floor(ge/65536),He=ge-Se*65536,ge=Ge+Se+65535,Se=Math.floor(ge/65536),Ge=ge-Se*65536,ge=rt+Se+65535,Se=Math.floor(ge/65536),rt=ge-Se*65536,ge=st+Se+65535,Se=Math.floor(ge/65536),st=ge-Se*65536,ge=Je+Se+65535,Se=Math.floor(ge/65536),Je=ge-Se*65536,ge=Ie+Se+65535,Se=Math.floor(ge/65536),Ie=ge-Se*65536,me+=Se-1+37*(Se-1),we[0]=me,we[1]=Be,we[2]=ve,we[3]=Ae,we[4]=Ve,we[5]=Pe,we[6]=Re,we[7]=Ne,we[8]=qe,we[9]=Ke,we[10]=He,we[11]=Ge,we[12]=rt,we[13]=st,we[14]=Je,we[15]=Ie}function ce(we,xe){X(we,xe,xe)}function ue(we,xe){const $e=E();let ge;for(ge=0;ge<16;ge++)$e[ge]=xe[ge];for(ge=253;ge>=0;ge--)ce($e,$e),ge!==2&&ge!==4&&X($e,$e,xe);for(ge=0;ge<16;ge++)we[ge]=$e[ge]}function _e(we,xe){const $e=E();let ge;for(ge=0;ge<16;ge++)$e[ge]=xe[ge];for(ge=250;ge>=0;ge--)ce($e,$e),ge!==1&&X($e,$e,xe);for(ge=0;ge<16;ge++)we[ge]=$e[ge]}function ye(we,xe){const $e=E(),ge=E(),Se=E(),me=E(),Be=E(),ve=E(),Ae=E(),Ve=E(),Pe=E();re($e,we[1],we[0]),re(Pe,xe[1],xe[0]),X($e,$e,Pe),ne(ge,we[0],we[1]),ne(Pe,xe[0],xe[1]),X(ge,ge,Pe),X(Se,we[3],xe[3]),X(Se,Se,A),X(me,we[2],xe[2]),ne(me,me,me),re(Be,ge,$e),re(ve,me,Se),ne(Ae,me,Se),ne(Ve,ge,$e),X(we[0],Be,ve),X(we[1],Ve,Ae),X(we[2],Ae,ve),X(we[3],Be,Ve)}function ie(we,xe,$e){for(let ge=0;ge<4;ge++)F(we[ge],xe[ge],$e)}function W(we,xe){const $e=E(),ge=E(),Se=E();ue(Se,xe[2]),X($e,xe[0],Se),X(ge,xe[1],Se),j(we,ge),we[31]^=Y($e)<<7}function O(we,xe,$e){V(we[0],C),V(we[1],T),V(we[2],T),V(we[3],C);for(let ge=255;ge>=0;--ge){const Se=$e[ge/8|0]>>(ge&7)&1;ie(we,xe,Se),ye(xe,we),ye(we,we),ie(we,xe,Se)}}function z(we,xe){const $e=[E(),E(),E(),E()];V($e[0],I),V($e[1],D),V($e[2],T),X($e[3],I,D),O(we,$e,xe)}function J(we){if(we.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const xe=(0,_.hash)(we);xe[0]&=248,xe[31]&=127,xe[31]|=64;const $e=new Uint8Array(32),ge=[E(),E(),E(),E()];z(ge,xe),W($e,ge);const Se=new Uint8Array(64);return Se.set(we),Se.set($e,32),{publicKey:$e,secretKey:Se}}t.generateKeyPairFromSeed=J;function ee(we){const xe=(0,n.randomBytes)(32,we),$e=J(xe);return(0,x.wipe)(xe),$e}t.generateKeyPair=ee;function ae(we){if(we.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(we.subarray(32))}t.extractPublicKeyFromSecretKey=ae;const oe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function se(we,xe){let $e,ge,Se,me;for(ge=63;ge>=32;--ge){for($e=0,Se=ge-32,me=ge-12;Se<me;++Se)xe[Se]+=$e-16*xe[ge]*oe[Se-(ge-32)],$e=Math.floor((xe[Se]+128)/256),xe[Se]-=$e*256;xe[Se]+=$e,xe[ge]=0}for($e=0,Se=0;Se<32;Se++)xe[Se]+=$e-(xe[31]>>4)*oe[Se],$e=xe[Se]>>8,xe[Se]&=255;for(Se=0;Se<32;Se++)xe[Se]-=$e*oe[Se];for(ge=0;ge<32;ge++)xe[ge+1]+=xe[ge]>>8,we[ge]=xe[ge]&255}function G(we){const xe=new Float64Array(64);for(let $e=0;$e<64;$e++)xe[$e]=we[$e];for(let $e=0;$e<64;$e++)we[$e]=0;se(we,xe)}function q(we,xe){const $e=new Float64Array(64),ge=[E(),E(),E(),E()],Se=(0,_.hash)(we.subarray(0,32));Se[0]&=248,Se[31]&=127,Se[31]|=64;const me=new Uint8Array(64);me.set(Se.subarray(32),32);const Be=new _.SHA512;Be.update(me.subarray(32)),Be.update(xe);const ve=Be.digest();Be.clean(),G(ve),z(ge,ve),W(me,ge),Be.reset(),Be.update(me.subarray(0,32)),Be.update(we.subarray(32)),Be.update(xe);const Ae=Be.digest();G(Ae);for(let Ve=0;Ve<32;Ve++)$e[Ve]=ve[Ve];for(let Ve=0;Ve<32;Ve++)for(let Pe=0;Pe<32;Pe++)$e[Ve+Pe]+=Ae[Ve]*Se[Pe];return se(me.subarray(32),$e),me}t.sign=q;function te(we,xe){const $e=E(),ge=E(),Se=E(),me=E(),Be=E(),ve=E(),Ae=E();return V(we[2],T),Z(we[1],xe),ce(Se,we[1]),X(me,Se,B),re(Se,Se,we[2]),ne(me,we[2],me),ce(Be,me),ce(ve,Be),X(Ae,ve,Be),X($e,Ae,Se),X($e,$e,me),_e($e,$e),X($e,$e,Se),X($e,$e,me),X($e,$e,me),X(we[0],$e,me),ce(ge,we[0]),X(ge,ge,me),H(ge,Se)&&X(we[0],we[0],M),ce(ge,we[0]),X(ge,ge,me),H(ge,Se)?-1:(Y(we[0])===xe[31]>>7&&re(we[0],C,we[0]),X(we[3],we[0],we[1]),0)}function fe(we,xe,$e){const ge=new Uint8Array(32),Se=[E(),E(),E(),E()],me=[E(),E(),E(),E()];if($e.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(te(me,we))return!1;const Be=new _.SHA512;Be.update($e.subarray(0,32)),Be.update(we),Be.update(xe);const ve=Be.digest();return G(ve),O(Se,me,ve),z(me,$e.subarray(32)),ye(Se,me),W(ge,Se),!U($e,ge)}t.verify=fe;function he(we){let xe=[E(),E(),E(),E()];if(te(xe,we))throw new Error("Ed25519: invalid public key");let $e=E(),ge=E(),Se=xe[1];ne($e,T,Se),re(ge,T,Se),ue(ge,ge),X($e,$e,ge);let me=new Uint8Array(32);return j(me,$e),me}t.convertPublicKeyToX25519=he;function Ee(we){const xe=(0,_.hash)(we.subarray(0,32));xe[0]&=248,xe[31]&=127,xe[31]|=64;const $e=new Uint8Array(xe.subarray(0,32));return(0,x.wipe)(xe),$e}t.convertSecretKeyToX25519=Ee})(ed25519);var dist={};Object.defineProperty(dist,"__esModule",{value:!0});dist.bech32m=bech32=dist.bech32=void 0;const ALPHABET$1="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP={};for(let t=0;t<ALPHABET$1.length;t++){const n=ALPHABET$1.charAt(t);ALPHABET_MAP[n]=t}function polymodStep(t){const n=t>>25;return(t&33554431)<<5^-(n>>0&1)&996825010^-(n>>1&1)&642813549^-(n>>2&1)&513874426^-(n>>3&1)&1027748829^-(n>>4&1)&705979059}function prefixChk(t){let n=1;for(let _=0;_<t.length;++_){const x=t.charCodeAt(_);if(x<33||x>126)return"Invalid prefix ("+t+")";n=polymodStep(n)^x>>5}n=polymodStep(n);for(let _=0;_<t.length;++_){const x=t.charCodeAt(_);n=polymodStep(n)^x&31}return n}function convert(t,n,_,x){let E=0,S=0;const C=(1<<_)-1,T=[];for(let B=0;B<t.length;++B)for(E=E<<n|t[B],S+=n;S>=_;)S-=_,T.push(E>>S&C);if(x)S>0&&T.push(E<<_-S&C);else{if(S>=n)return"Excess padding";if(E<<_-S&C)return"Non-zero padding"}return T}function toWords(t){return convert(t,8,5,!0)}function fromWordsUnsafe(t){const n=convert(t,5,8,!1);if(Array.isArray(n))return n}function fromWords(t){const n=convert(t,5,8,!1);if(Array.isArray(n))return n;throw new Error(n)}function getLibraryFromEncoding(t){let n;t==="bech32"?n=1:n=734539939;function _(C,T,B){if(B=B||90,C.length+7+T.length>B)throw new TypeError("Exceeds length limit");C=C.toLowerCase();let A=prefixChk(C);if(typeof A=="string")throw new Error(A);let I=C+"1";for(let D=0;D<T.length;++D){const M=T[D];if(M>>5)throw new Error("Non 5-bit word");A=polymodStep(A)^M,I+=ALPHABET$1.charAt(M)}for(let D=0;D<6;++D)A=polymodStep(A);A^=n;for(let D=0;D<6;++D){const M=A>>(5-D)*5&31;I+=ALPHABET$1.charAt(M)}return I}function x(C,T){if(T=T||90,C.length<8)return C+" too short";if(C.length>T)return"Exceeds length limit";const B=C.toLowerCase(),A=C.toUpperCase();if(C!==B&&C!==A)return"Mixed-case string "+C;C=B;const I=C.lastIndexOf("1");if(I===-1)return"No separator character for "+C;if(I===0)return"Missing prefix for "+C;const D=C.slice(0,I),M=C.slice(I+1);if(M.length<6)return"Data too short";let V=prefixChk(D);if(typeof V=="string")return V;const L=[];for(let F=0;F<M.length;++F){const j=M.charAt(F),U=ALPHABET_MAP[j];if(U===void 0)return"Unknown character "+j;V=polymodStep(V)^U,!(F+6>=M.length)&&L.push(U)}return V!==n?"Invalid checksum for "+C:{prefix:D,words:L}}function E(C,T){const B=x(C,T);if(typeof B=="object")return B}function S(C,T){const B=x(C,T);if(typeof B=="object")return B;throw new Error(B)}return{decodeUnsafe:E,decode:S,encode:_,toWords,fromWordsUnsafe,fromWords}}var bech32=dist.bech32=getLibraryFromEncoding("bech32");dist.bech32m=getLibraryFromEncoding("bech32m");var x25519={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const n=random,_=wipe$1;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function x(Z){const ne=new Float64Array(16);if(Z)for(let re=0;re<Z.length;re++)ne[re]=Z[re];return ne}const E=new Uint8Array(32);E[0]=9;const S=x([56129,1]);function C(Z){let ne=1;for(let re=0;re<16;re++){let X=Z[re]+ne+65535;ne=Math.floor(X/65536),Z[re]=X-ne*65536}Z[0]+=ne-1+37*(ne-1)}function T(Z,ne,re){const X=~(re-1);for(let ce=0;ce<16;ce++){const ue=X&(Z[ce]^ne[ce]);Z[ce]^=ue,ne[ce]^=ue}}function B(Z,ne){const re=x(),X=x();for(let ce=0;ce<16;ce++)X[ce]=ne[ce];C(X),C(X),C(X);for(let ce=0;ce<2;ce++){re[0]=X[0]-65517;for(let _e=1;_e<15;_e++)re[_e]=X[_e]-65535-(re[_e-1]>>16&1),re[_e-1]&=65535;re[15]=X[15]-32767-(re[14]>>16&1);const ue=re[15]>>16&1;re[14]&=65535,T(X,re,1-ue)}for(let ce=0;ce<16;ce++)Z[2*ce]=X[ce]&255,Z[2*ce+1]=X[ce]>>8}function A(Z,ne){for(let re=0;re<16;re++)Z[re]=ne[2*re]+(ne[2*re+1]<<8);Z[15]&=32767}function I(Z,ne,re){for(let X=0;X<16;X++)Z[X]=ne[X]+re[X]}function D(Z,ne,re){for(let X=0;X<16;X++)Z[X]=ne[X]-re[X]}function M(Z,ne,re){let X,ce,ue=0,_e=0,ye=0,ie=0,W=0,O=0,z=0,J=0,ee=0,ae=0,oe=0,se=0,G=0,q=0,te=0,fe=0,he=0,Ee=0,we=0,xe=0,$e=0,ge=0,Se=0,me=0,Be=0,ve=0,Ae=0,Ve=0,Pe=0,Re=0,Ne=0,qe=re[0],Ke=re[1],He=re[2],Ge=re[3],rt=re[4],st=re[5],Je=re[6],Ie=re[7],be=re[8],Te=re[9],Le=re[10],We=re[11],Ze=re[12],Qe=re[13],St=re[14],pt=re[15];X=ne[0],ue+=X*qe,_e+=X*Ke,ye+=X*He,ie+=X*Ge,W+=X*rt,O+=X*st,z+=X*Je,J+=X*Ie,ee+=X*be,ae+=X*Te,oe+=X*Le,se+=X*We,G+=X*Ze,q+=X*Qe,te+=X*St,fe+=X*pt,X=ne[1],_e+=X*qe,ye+=X*Ke,ie+=X*He,W+=X*Ge,O+=X*rt,z+=X*st,J+=X*Je,ee+=X*Ie,ae+=X*be,oe+=X*Te,se+=X*Le,G+=X*We,q+=X*Ze,te+=X*Qe,fe+=X*St,he+=X*pt,X=ne[2],ye+=X*qe,ie+=X*Ke,W+=X*He,O+=X*Ge,z+=X*rt,J+=X*st,ee+=X*Je,ae+=X*Ie,oe+=X*be,se+=X*Te,G+=X*Le,q+=X*We,te+=X*Ze,fe+=X*Qe,he+=X*St,Ee+=X*pt,X=ne[3],ie+=X*qe,W+=X*Ke,O+=X*He,z+=X*Ge,J+=X*rt,ee+=X*st,ae+=X*Je,oe+=X*Ie,se+=X*be,G+=X*Te,q+=X*Le,te+=X*We,fe+=X*Ze,he+=X*Qe,Ee+=X*St,we+=X*pt,X=ne[4],W+=X*qe,O+=X*Ke,z+=X*He,J+=X*Ge,ee+=X*rt,ae+=X*st,oe+=X*Je,se+=X*Ie,G+=X*be,q+=X*Te,te+=X*Le,fe+=X*We,he+=X*Ze,Ee+=X*Qe,we+=X*St,xe+=X*pt,X=ne[5],O+=X*qe,z+=X*Ke,J+=X*He,ee+=X*Ge,ae+=X*rt,oe+=X*st,se+=X*Je,G+=X*Ie,q+=X*be,te+=X*Te,fe+=X*Le,he+=X*We,Ee+=X*Ze,we+=X*Qe,xe+=X*St,$e+=X*pt,X=ne[6],z+=X*qe,J+=X*Ke,ee+=X*He,ae+=X*Ge,oe+=X*rt,se+=X*st,G+=X*Je,q+=X*Ie,te+=X*be,fe+=X*Te,he+=X*Le,Ee+=X*We,we+=X*Ze,xe+=X*Qe,$e+=X*St,ge+=X*pt,X=ne[7],J+=X*qe,ee+=X*Ke,ae+=X*He,oe+=X*Ge,se+=X*rt,G+=X*st,q+=X*Je,te+=X*Ie,fe+=X*be,he+=X*Te,Ee+=X*Le,we+=X*We,xe+=X*Ze,$e+=X*Qe,ge+=X*St,Se+=X*pt,X=ne[8],ee+=X*qe,ae+=X*Ke,oe+=X*He,se+=X*Ge,G+=X*rt,q+=X*st,te+=X*Je,fe+=X*Ie,he+=X*be,Ee+=X*Te,we+=X*Le,xe+=X*We,$e+=X*Ze,ge+=X*Qe,Se+=X*St,me+=X*pt,X=ne[9],ae+=X*qe,oe+=X*Ke,se+=X*He,G+=X*Ge,q+=X*rt,te+=X*st,fe+=X*Je,he+=X*Ie,Ee+=X*be,we+=X*Te,xe+=X*Le,$e+=X*We,ge+=X*Ze,Se+=X*Qe,me+=X*St,Be+=X*pt,X=ne[10],oe+=X*qe,se+=X*Ke,G+=X*He,q+=X*Ge,te+=X*rt,fe+=X*st,he+=X*Je,Ee+=X*Ie,we+=X*be,xe+=X*Te,$e+=X*Le,ge+=X*We,Se+=X*Ze,me+=X*Qe,Be+=X*St,ve+=X*pt,X=ne[11],se+=X*qe,G+=X*Ke,q+=X*He,te+=X*Ge,fe+=X*rt,he+=X*st,Ee+=X*Je,we+=X*Ie,xe+=X*be,$e+=X*Te,ge+=X*Le,Se+=X*We,me+=X*Ze,Be+=X*Qe,ve+=X*St,Ae+=X*pt,X=ne[12],G+=X*qe,q+=X*Ke,te+=X*He,fe+=X*Ge,he+=X*rt,Ee+=X*st,we+=X*Je,xe+=X*Ie,$e+=X*be,ge+=X*Te,Se+=X*Le,me+=X*We,Be+=X*Ze,ve+=X*Qe,Ae+=X*St,Ve+=X*pt,X=ne[13],q+=X*qe,te+=X*Ke,fe+=X*He,he+=X*Ge,Ee+=X*rt,we+=X*st,xe+=X*Je,$e+=X*Ie,ge+=X*be,Se+=X*Te,me+=X*Le,Be+=X*We,ve+=X*Ze,Ae+=X*Qe,Ve+=X*St,Pe+=X*pt,X=ne[14],te+=X*qe,fe+=X*Ke,he+=X*He,Ee+=X*Ge,we+=X*rt,xe+=X*st,$e+=X*Je,ge+=X*Ie,Se+=X*be,me+=X*Te,Be+=X*Le,ve+=X*We,Ae+=X*Ze,Ve+=X*Qe,Pe+=X*St,Re+=X*pt,X=ne[15],fe+=X*qe,he+=X*Ke,Ee+=X*He,we+=X*Ge,xe+=X*rt,$e+=X*st,ge+=X*Je,Se+=X*Ie,me+=X*be,Be+=X*Te,ve+=X*Le,Ae+=X*We,Ve+=X*Ze,Pe+=X*Qe,Re+=X*St,Ne+=X*pt,ue+=38*he,_e+=38*Ee,ye+=38*we,ie+=38*xe,W+=38*$e,O+=38*ge,z+=38*Se,J+=38*me,ee+=38*Be,ae+=38*ve,oe+=38*Ae,se+=38*Ve,G+=38*Pe,q+=38*Re,te+=38*Ne,ce=1,X=ue+ce+65535,ce=Math.floor(X/65536),ue=X-ce*65536,X=_e+ce+65535,ce=Math.floor(X/65536),_e=X-ce*65536,X=ye+ce+65535,ce=Math.floor(X/65536),ye=X-ce*65536,X=ie+ce+65535,ce=Math.floor(X/65536),ie=X-ce*65536,X=W+ce+65535,ce=Math.floor(X/65536),W=X-ce*65536,X=O+ce+65535,ce=Math.floor(X/65536),O=X-ce*65536,X=z+ce+65535,ce=Math.floor(X/65536),z=X-ce*65536,X=J+ce+65535,ce=Math.floor(X/65536),J=X-ce*65536,X=ee+ce+65535,ce=Math.floor(X/65536),ee=X-ce*65536,X=ae+ce+65535,ce=Math.floor(X/65536),ae=X-ce*65536,X=oe+ce+65535,ce=Math.floor(X/65536),oe=X-ce*65536,X=se+ce+65535,ce=Math.floor(X/65536),se=X-ce*65536,X=G+ce+65535,ce=Math.floor(X/65536),G=X-ce*65536,X=q+ce+65535,ce=Math.floor(X/65536),q=X-ce*65536,X=te+ce+65535,ce=Math.floor(X/65536),te=X-ce*65536,X=fe+ce+65535,ce=Math.floor(X/65536),fe=X-ce*65536,ue+=ce-1+37*(ce-1),ce=1,X=ue+ce+65535,ce=Math.floor(X/65536),ue=X-ce*65536,X=_e+ce+65535,ce=Math.floor(X/65536),_e=X-ce*65536,X=ye+ce+65535,ce=Math.floor(X/65536),ye=X-ce*65536,X=ie+ce+65535,ce=Math.floor(X/65536),ie=X-ce*65536,X=W+ce+65535,ce=Math.floor(X/65536),W=X-ce*65536,X=O+ce+65535,ce=Math.floor(X/65536),O=X-ce*65536,X=z+ce+65535,ce=Math.floor(X/65536),z=X-ce*65536,X=J+ce+65535,ce=Math.floor(X/65536),J=X-ce*65536,X=ee+ce+65535,ce=Math.floor(X/65536),ee=X-ce*65536,X=ae+ce+65535,ce=Math.floor(X/65536),ae=X-ce*65536,X=oe+ce+65535,ce=Math.floor(X/65536),oe=X-ce*65536,X=se+ce+65535,ce=Math.floor(X/65536),se=X-ce*65536,X=G+ce+65535,ce=Math.floor(X/65536),G=X-ce*65536,X=q+ce+65535,ce=Math.floor(X/65536),q=X-ce*65536,X=te+ce+65535,ce=Math.floor(X/65536),te=X-ce*65536,X=fe+ce+65535,ce=Math.floor(X/65536),fe=X-ce*65536,ue+=ce-1+37*(ce-1),Z[0]=ue,Z[1]=_e,Z[2]=ye,Z[3]=ie,Z[4]=W,Z[5]=O,Z[6]=z,Z[7]=J,Z[8]=ee,Z[9]=ae,Z[10]=oe,Z[11]=se,Z[12]=G,Z[13]=q,Z[14]=te,Z[15]=fe}function V(Z,ne){M(Z,ne,ne)}function L(Z,ne){const re=x();for(let X=0;X<16;X++)re[X]=ne[X];for(let X=253;X>=0;X--)V(re,re),X!==2&&X!==4&&M(re,re,ne);for(let X=0;X<16;X++)Z[X]=re[X]}function F(Z,ne){const re=new Uint8Array(32),X=new Float64Array(80),ce=x(),ue=x(),_e=x(),ye=x(),ie=x(),W=x();for(let ee=0;ee<31;ee++)re[ee]=Z[ee];re[31]=Z[31]&127|64,re[0]&=248,A(X,ne);for(let ee=0;ee<16;ee++)ue[ee]=X[ee];ce[0]=ye[0]=1;for(let ee=254;ee>=0;--ee){const ae=re[ee>>>3]>>>(ee&7)&1;T(ce,ue,ae),T(_e,ye,ae),I(ie,ce,_e),D(ce,ce,_e),I(_e,ue,ye),D(ue,ue,ye),V(ye,ie),V(W,ce),M(ce,_e,ce),M(_e,ue,ie),I(ie,ce,_e),D(ce,ce,_e),V(ue,ce),D(_e,ye,W),M(ce,_e,S),I(ce,ce,ye),M(_e,_e,ce),M(ce,ye,W),M(ye,ue,X),V(ue,ie),T(ce,ue,ae),T(_e,ye,ae)}for(let ee=0;ee<16;ee++)X[ee+16]=ce[ee],X[ee+32]=_e[ee],X[ee+48]=ue[ee],X[ee+64]=ye[ee];const O=X.subarray(32),z=X.subarray(16);L(O,O),M(z,z,O);const J=new Uint8Array(32);return B(J,z),J}t.scalarMult=F;function j(Z){return F(Z,E)}t.scalarMultBase=j;function U(Z){if(Z.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const ne=new Uint8Array(Z);return{publicKey:j(ne),secretKey:ne}}t.generateKeyPairFromSeed=U;function H(Z){const ne=(0,n.randomBytes)(32,Z),re=U(ne);return(0,_.wipe)(ne),re}t.generateKeyPair=H;function Y(Z,ne,re=!1){if(Z.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(ne.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const X=F(Z,ne);if(re){let ce=0;for(let ue=0;ue<X.length;ue++)ce|=X[ue];if(ce===0)throw new Error("X25519: invalid shared key")}return X}t.sharedKey=Y})(x25519);var xchacha20poly1305={},xchacha20={},chacha={};Object.defineProperty(chacha,"__esModule",{value:!0});var binary_1$1=binary,wipe_1$1=wipe$1,ROUNDS$1=20;function core$4(t,n,_){for(var x=1634760805,E=857760878,S=2036477234,C=1797285236,T=_[3]<<24|_[2]<<16|_[1]<<8|_[0],B=_[7]<<24|_[6]<<16|_[5]<<8|_[4],A=_[11]<<24|_[10]<<16|_[9]<<8|_[8],I=_[15]<<24|_[14]<<16|_[13]<<8|_[12],D=_[19]<<24|_[18]<<16|_[17]<<8|_[16],M=_[23]<<24|_[22]<<16|_[21]<<8|_[20],V=_[27]<<24|_[26]<<16|_[25]<<8|_[24],L=_[31]<<24|_[30]<<16|_[29]<<8|_[28],F=n[3]<<24|n[2]<<16|n[1]<<8|n[0],j=n[7]<<24|n[6]<<16|n[5]<<8|n[4],U=n[11]<<24|n[10]<<16|n[9]<<8|n[8],H=n[15]<<24|n[14]<<16|n[13]<<8|n[12],Y=x,Z=E,ne=S,re=C,X=T,ce=B,ue=A,_e=I,ye=D,ie=M,W=V,O=L,z=F,J=j,ee=U,ae=H,oe=0;oe<ROUNDS$1;oe+=2)Y=Y+X|0,z^=Y,z=z>>>32-16|z<<16,ye=ye+z|0,X^=ye,X=X>>>32-12|X<<12,Z=Z+ce|0,J^=Z,J=J>>>32-16|J<<16,ie=ie+J|0,ce^=ie,ce=ce>>>32-12|ce<<12,ne=ne+ue|0,ee^=ne,ee=ee>>>32-16|ee<<16,W=W+ee|0,ue^=W,ue=ue>>>32-12|ue<<12,re=re+_e|0,ae^=re,ae=ae>>>32-16|ae<<16,O=O+ae|0,_e^=O,_e=_e>>>32-12|_e<<12,ne=ne+ue|0,ee^=ne,ee=ee>>>32-8|ee<<8,W=W+ee|0,ue^=W,ue=ue>>>32-7|ue<<7,re=re+_e|0,ae^=re,ae=ae>>>32-8|ae<<8,O=O+ae|0,_e^=O,_e=_e>>>32-7|_e<<7,Z=Z+ce|0,J^=Z,J=J>>>32-8|J<<8,ie=ie+J|0,ce^=ie,ce=ce>>>32-7|ce<<7,Y=Y+X|0,z^=Y,z=z>>>32-8|z<<8,ye=ye+z|0,X^=ye,X=X>>>32-7|X<<7,Y=Y+ce|0,ae^=Y,ae=ae>>>32-16|ae<<16,W=W+ae|0,ce^=W,ce=ce>>>32-12|ce<<12,Z=Z+ue|0,z^=Z,z=z>>>32-16|z<<16,O=O+z|0,ue^=O,ue=ue>>>32-12|ue<<12,ne=ne+_e|0,J^=ne,J=J>>>32-16|J<<16,ye=ye+J|0,_e^=ye,_e=_e>>>32-12|_e<<12,re=re+X|0,ee^=re,ee=ee>>>32-16|ee<<16,ie=ie+ee|0,X^=ie,X=X>>>32-12|X<<12,ne=ne+_e|0,J^=ne,J=J>>>32-8|J<<8,ye=ye+J|0,_e^=ye,_e=_e>>>32-7|_e<<7,re=re+X|0,ee^=re,ee=ee>>>32-8|ee<<8,ie=ie+ee|0,X^=ie,X=X>>>32-7|X<<7,Z=Z+ue|0,z^=Z,z=z>>>32-8|z<<8,O=O+z|0,ue^=O,ue=ue>>>32-7|ue<<7,Y=Y+ce|0,ae^=Y,ae=ae>>>32-8|ae<<8,W=W+ae|0,ce^=W,ce=ce>>>32-7|ce<<7;binary_1$1.writeUint32LE(Y+x|0,t,0),binary_1$1.writeUint32LE(Z+E|0,t,4),binary_1$1.writeUint32LE(ne+S|0,t,8),binary_1$1.writeUint32LE(re+C|0,t,12),binary_1$1.writeUint32LE(X+T|0,t,16),binary_1$1.writeUint32LE(ce+B|0,t,20),binary_1$1.writeUint32LE(ue+A|0,t,24),binary_1$1.writeUint32LE(_e+I|0,t,28),binary_1$1.writeUint32LE(ye+D|0,t,32),binary_1$1.writeUint32LE(ie+M|0,t,36),binary_1$1.writeUint32LE(W+V|0,t,40),binary_1$1.writeUint32LE(O+L|0,t,44),binary_1$1.writeUint32LE(z+F|0,t,48),binary_1$1.writeUint32LE(J+j|0,t,52),binary_1$1.writeUint32LE(ee+U|0,t,56),binary_1$1.writeUint32LE(ae+H|0,t,60)}function streamXOR$1(t,n,_,x,E){if(E===void 0&&(E=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(x.length<_.length)throw new Error("ChaCha: destination is shorter than source");var S,C;if(E===0){if(n.length!==8&&n.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");S=new Uint8Array(16),C=S.length-n.length,S.set(n,C)}else{if(n.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");S=n,C=E}for(var T=new Uint8Array(64),B=0;B<_.length;B+=64){core$4(T,S,t);for(var A=B;A<B+64&&A<_.length;A++)x[A]=_[A]^T[A-B];incrementCounter(S,0,C)}return wipe_1$1.wipe(T),E===0&&wipe_1$1.wipe(S),x}chacha.streamXOR=streamXOR$1;function stream$1(t,n,_,x){return x===void 0&&(x=0),wipe_1$1.wipe(_),streamXOR$1(t,n,_,_,x)}chacha.stream=stream$1;function incrementCounter(t,n,_){for(var x=1;_--;)x=x+(t[n]&255)|0,t[n]=x&255,x>>>=8,n++;if(x>0)throw new Error("ChaCha: counter overflow")}Object.defineProperty(xchacha20,"__esModule",{value:!0});var binary_1=binary,wipe_1=wipe$1,chacha_1=chacha,ROUNDS=20;function streamXOR(t,n,_,x){if(n.length!==24)throw new Error("XChaCha20 nonce must be 24 bytes");var E=hchacha(t,n.subarray(0,16),new Uint8Array(32)),S=new Uint8Array(12);S.set(n.subarray(16),4);var C=chacha_1.streamXOR(E,S,_,x);return wipe_1.wipe(E),C}xchacha20.streamXOR=streamXOR;function stream(t,n,_){return wipe_1.wipe(_),streamXOR(t,n,_,_)}xchacha20.stream=stream;function hchacha(t,n,_){for(var x=1634760805,E=857760878,S=2036477234,C=1797285236,T=t[3]<<24|t[2]<<16|t[1]<<8|t[0],B=t[7]<<24|t[6]<<16|t[5]<<8|t[4],A=t[11]<<24|t[10]<<16|t[9]<<8|t[8],I=t[15]<<24|t[14]<<16|t[13]<<8|t[12],D=t[19]<<24|t[18]<<16|t[17]<<8|t[16],M=t[23]<<24|t[22]<<16|t[21]<<8|t[20],V=t[27]<<24|t[26]<<16|t[25]<<8|t[24],L=t[31]<<24|t[30]<<16|t[29]<<8|t[28],F=n[3]<<24|n[2]<<16|n[1]<<8|n[0],j=n[7]<<24|n[6]<<16|n[5]<<8|n[4],U=n[11]<<24|n[10]<<16|n[9]<<8|n[8],H=n[15]<<24|n[14]<<16|n[13]<<8|n[12],Y=x,Z=E,ne=S,re=C,X=T,ce=B,ue=A,_e=I,ye=D,ie=M,W=V,O=L,z=F,J=j,ee=U,ae=H,oe=0;oe<ROUNDS;oe+=2)Y=Y+X|0,z^=Y,z=z>>>32-16|z<<16,ye=ye+z|0,X^=ye,X=X>>>32-12|X<<12,Z=Z+ce|0,J^=Z,J=J>>>32-16|J<<16,ie=ie+J|0,ce^=ie,ce=ce>>>32-12|ce<<12,ne=ne+ue|0,ee^=ne,ee=ee>>>32-16|ee<<16,W=W+ee|0,ue^=W,ue=ue>>>32-12|ue<<12,re=re+_e|0,ae^=re,ae=ae>>>32-16|ae<<16,O=O+ae|0,_e^=O,_e=_e>>>32-12|_e<<12,ne=ne+ue|0,ee^=ne,ee=ee>>>32-8|ee<<8,W=W+ee|0,ue^=W,ue=ue>>>32-7|ue<<7,re=re+_e|0,ae^=re,ae=ae>>>32-8|ae<<8,O=O+ae|0,_e^=O,_e=_e>>>32-7|_e<<7,Z=Z+ce|0,J^=Z,J=J>>>32-8|J<<8,ie=ie+J|0,ce^=ie,ce=ce>>>32-7|ce<<7,Y=Y+X|0,z^=Y,z=z>>>32-8|z<<8,ye=ye+z|0,X^=ye,X=X>>>32-7|X<<7,Y=Y+ce|0,ae^=Y,ae=ae>>>32-16|ae<<16,W=W+ae|0,ce^=W,ce=ce>>>32-12|ce<<12,Z=Z+ue|0,z^=Z,z=z>>>32-16|z<<16,O=O+z|0,ue^=O,ue=ue>>>32-12|ue<<12,ne=ne+_e|0,J^=ne,J=J>>>32-16|J<<16,ye=ye+J|0,_e^=ye,_e=_e>>>32-12|_e<<12,re=re+X|0,ee^=re,ee=ee>>>32-16|ee<<16,ie=ie+ee|0,X^=ie,X=X>>>32-12|X<<12,ne=ne+_e|0,J^=ne,J=J>>>32-8|J<<8,ye=ye+J|0,_e^=ye,_e=_e>>>32-7|_e<<7,re=re+X|0,ee^=re,ee=ee>>>32-8|ee<<8,ie=ie+ee|0,X^=ie,X=X>>>32-7|X<<7,Z=Z+ue|0,z^=Z,z=z>>>32-8|z<<8,O=O+z|0,ue^=O,ue=ue>>>32-7|ue<<7,Y=Y+ce|0,ae^=Y,ae=ae>>>32-8|ae<<8,W=W+ae|0,ce^=W,ce=ce>>>32-7|ce<<7;return binary_1.writeUint32LE(Y,_,0),binary_1.writeUint32LE(Z,_,4),binary_1.writeUint32LE(ne,_,8),binary_1.writeUint32LE(re,_,12),binary_1.writeUint32LE(z,_,16),binary_1.writeUint32LE(J,_,20),binary_1.writeUint32LE(ee,_,24),binary_1.writeUint32LE(ae,_,28),_}xchacha20.hchacha=hchacha;var chacha20poly1305={},poly1305={},constantTime={};Object.defineProperty(constantTime,"__esModule",{value:!0});function select(t,n,_){return~(t-1)&n|t-1&_}constantTime.select=select;function lessOrEqual(t,n){return(t|0)-(n|0)-1>>>31&1}constantTime.lessOrEqual=lessOrEqual;function compare$1(t,n){if(t.length!==n.length)return 0;for(var _=0,x=0;x<t.length;x++)_|=t[x]^n[x];return 1&_-1>>>8}constantTime.compare=compare$1;function equal$3(t,n){return t.length===0||n.length===0?!1:compare$1(t,n)!==0}constantTime.equal=equal$3;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var n=constantTime,_=wipe$1;t.DIGEST_LENGTH=16;var x=function(){function C(T){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var B=T[0]|T[1]<<8;this._r[0]=B&8191;var A=T[2]|T[3]<<8;this._r[1]=(B>>>13|A<<3)&8191;var I=T[4]|T[5]<<8;this._r[2]=(A>>>10|I<<6)&7939;var D=T[6]|T[7]<<8;this._r[3]=(I>>>7|D<<9)&8191;var M=T[8]|T[9]<<8;this._r[4]=(D>>>4|M<<12)&255,this._r[5]=M>>>1&8190;var V=T[10]|T[11]<<8;this._r[6]=(M>>>14|V<<2)&8191;var L=T[12]|T[13]<<8;this._r[7]=(V>>>11|L<<5)&8065;var F=T[14]|T[15]<<8;this._r[8]=(L>>>8|F<<8)&8191,this._r[9]=F>>>5&127,this._pad[0]=T[16]|T[17]<<8,this._pad[1]=T[18]|T[19]<<8,this._pad[2]=T[20]|T[21]<<8,this._pad[3]=T[22]|T[23]<<8,this._pad[4]=T[24]|T[25]<<8,this._pad[5]=T[26]|T[27]<<8,this._pad[6]=T[28]|T[29]<<8,this._pad[7]=T[30]|T[31]<<8}return C.prototype._blocks=function(T,B,A){for(var I=this._fin?0:2048,D=this._h[0],M=this._h[1],V=this._h[2],L=this._h[3],F=this._h[4],j=this._h[5],U=this._h[6],H=this._h[7],Y=this._h[8],Z=this._h[9],ne=this._r[0],re=this._r[1],X=this._r[2],ce=this._r[3],ue=this._r[4],_e=this._r[5],ye=this._r[6],ie=this._r[7],W=this._r[8],O=this._r[9];A>=16;){var z=T[B+0]|T[B+1]<<8;D+=z&8191;var J=T[B+2]|T[B+3]<<8;M+=(z>>>13|J<<3)&8191;var ee=T[B+4]|T[B+5]<<8;V+=(J>>>10|ee<<6)&8191;var ae=T[B+6]|T[B+7]<<8;L+=(ee>>>7|ae<<9)&8191;var oe=T[B+8]|T[B+9]<<8;F+=(ae>>>4|oe<<12)&8191,j+=oe>>>1&8191;var se=T[B+10]|T[B+11]<<8;U+=(oe>>>14|se<<2)&8191;var G=T[B+12]|T[B+13]<<8;H+=(se>>>11|G<<5)&8191;var q=T[B+14]|T[B+15]<<8;Y+=(G>>>8|q<<8)&8191,Z+=q>>>5|I;var te=0,fe=te;fe+=D*ne,fe+=M*(5*O),fe+=V*(5*W),fe+=L*(5*ie),fe+=F*(5*ye),te=fe>>>13,fe&=8191,fe+=j*(5*_e),fe+=U*(5*ue),fe+=H*(5*ce),fe+=Y*(5*X),fe+=Z*(5*re),te+=fe>>>13,fe&=8191;var he=te;he+=D*re,he+=M*ne,he+=V*(5*O),he+=L*(5*W),he+=F*(5*ie),te=he>>>13,he&=8191,he+=j*(5*ye),he+=U*(5*_e),he+=H*(5*ue),he+=Y*(5*ce),he+=Z*(5*X),te+=he>>>13,he&=8191;var Ee=te;Ee+=D*X,Ee+=M*re,Ee+=V*ne,Ee+=L*(5*O),Ee+=F*(5*W),te=Ee>>>13,Ee&=8191,Ee+=j*(5*ie),Ee+=U*(5*ye),Ee+=H*(5*_e),Ee+=Y*(5*ue),Ee+=Z*(5*ce),te+=Ee>>>13,Ee&=8191;var we=te;we+=D*ce,we+=M*X,we+=V*re,we+=L*ne,we+=F*(5*O),te=we>>>13,we&=8191,we+=j*(5*W),we+=U*(5*ie),we+=H*(5*ye),we+=Y*(5*_e),we+=Z*(5*ue),te+=we>>>13,we&=8191;var xe=te;xe+=D*ue,xe+=M*ce,xe+=V*X,xe+=L*re,xe+=F*ne,te=xe>>>13,xe&=8191,xe+=j*(5*O),xe+=U*(5*W),xe+=H*(5*ie),xe+=Y*(5*ye),xe+=Z*(5*_e),te+=xe>>>13,xe&=8191;var $e=te;$e+=D*_e,$e+=M*ue,$e+=V*ce,$e+=L*X,$e+=F*re,te=$e>>>13,$e&=8191,$e+=j*ne,$e+=U*(5*O),$e+=H*(5*W),$e+=Y*(5*ie),$e+=Z*(5*ye),te+=$e>>>13,$e&=8191;var ge=te;ge+=D*ye,ge+=M*_e,ge+=V*ue,ge+=L*ce,ge+=F*X,te=ge>>>13,ge&=8191,ge+=j*re,ge+=U*ne,ge+=H*(5*O),ge+=Y*(5*W),ge+=Z*(5*ie),te+=ge>>>13,ge&=8191;var Se=te;Se+=D*ie,Se+=M*ye,Se+=V*_e,Se+=L*ue,Se+=F*ce,te=Se>>>13,Se&=8191,Se+=j*X,Se+=U*re,Se+=H*ne,Se+=Y*(5*O),Se+=Z*(5*W),te+=Se>>>13,Se&=8191;var me=te;me+=D*W,me+=M*ie,me+=V*ye,me+=L*_e,me+=F*ue,te=me>>>13,me&=8191,me+=j*ce,me+=U*X,me+=H*re,me+=Y*ne,me+=Z*(5*O),te+=me>>>13,me&=8191;var Be=te;Be+=D*O,Be+=M*W,Be+=V*ie,Be+=L*ye,Be+=F*_e,te=Be>>>13,Be&=8191,Be+=j*ue,Be+=U*ce,Be+=H*X,Be+=Y*re,Be+=Z*ne,te+=Be>>>13,Be&=8191,te=(te<<2)+te|0,te=te+fe|0,fe=te&8191,te=te>>>13,he+=te,D=fe,M=he,V=Ee,L=we,F=xe,j=$e,U=ge,H=Se,Y=me,Z=Be,B+=16,A-=16}this._h[0]=D,this._h[1]=M,this._h[2]=V,this._h[3]=L,this._h[4]=F,this._h[5]=j,this._h[6]=U,this._h[7]=H,this._h[8]=Y,this._h[9]=Z},C.prototype.finish=function(T,B){B===void 0&&(B=0);var A=new Uint16Array(10),I,D,M,V;if(this._leftover){for(V=this._leftover,this._buffer[V++]=1;V<16;V++)this._buffer[V]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(I=this._h[1]>>>13,this._h[1]&=8191,V=2;V<10;V++)this._h[V]+=I,I=this._h[V]>>>13,this._h[V]&=8191;for(this._h[0]+=I*5,I=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=I,I=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=I,A[0]=this._h[0]+5,I=A[0]>>>13,A[0]&=8191,V=1;V<10;V++)A[V]=this._h[V]+I,I=A[V]>>>13,A[V]&=8191;for(A[9]-=8192,D=(I^1)-1,V=0;V<10;V++)A[V]&=D;for(D=~D,V=0;V<10;V++)this._h[V]=this._h[V]&D|A[V];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,M=this._h[0]+this._pad[0],this._h[0]=M&65535,V=1;V<8;V++)M=(this._h[V]+this._pad[V]|0)+(M>>>16)|0,this._h[V]=M&65535;return T[B+0]=this._h[0]>>>0,T[B+1]=this._h[0]>>>8,T[B+2]=this._h[1]>>>0,T[B+3]=this._h[1]>>>8,T[B+4]=this._h[2]>>>0,T[B+5]=this._h[2]>>>8,T[B+6]=this._h[3]>>>0,T[B+7]=this._h[3]>>>8,T[B+8]=this._h[4]>>>0,T[B+9]=this._h[4]>>>8,T[B+10]=this._h[5]>>>0,T[B+11]=this._h[5]>>>8,T[B+12]=this._h[6]>>>0,T[B+13]=this._h[6]>>>8,T[B+14]=this._h[7]>>>0,T[B+15]=this._h[7]>>>8,this._finished=!0,this},C.prototype.update=function(T){var B=0,A=T.length,I;if(this._leftover){I=16-this._leftover,I>A&&(I=A);for(var D=0;D<I;D++)this._buffer[this._leftover+D]=T[B+D];if(A-=I,B+=I,this._leftover+=I,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(A>=16&&(I=A-A%16,this._blocks(T,B,I),B+=I,A-=I),A){for(var D=0;D<A;D++)this._buffer[this._leftover+D]=T[B+D];this._leftover+=A}return this},C.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var T=new Uint8Array(16);return this.finish(T),T},C.prototype.clean=function(){return _.wipe(this._buffer),_.wipe(this._r),_.wipe(this._h),_.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},C}();t.Poly1305=x;function E(C,T){var B=new x(C);B.update(T);var A=B.digest();return B.clean(),A}t.oneTimeAuth=E;function S(C,T){return C.length!==t.DIGEST_LENGTH||T.length!==t.DIGEST_LENGTH?!1:n.equal(C,T)}t.equal=S})(poly1305);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var n=chacha,_=poly1305,x=wipe$1,E=binary,S=constantTime;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var C=new Uint8Array(16),T=function(){function B(A){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,A.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(A)}return B.prototype.seal=function(A,I,D,M){if(A.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var V=new Uint8Array(16);V.set(A,V.length-A.length);var L=new Uint8Array(32);n.stream(this._key,V,L,4);var F=I.length+this.tagLength,j;if(M){if(M.length!==F)throw new Error("ChaCha20Poly1305: incorrect destination length");j=M}else j=new Uint8Array(F);return n.streamXOR(this._key,V,I,j,4),this._authenticate(j.subarray(j.length-this.tagLength,j.length),L,j.subarray(0,j.length-this.tagLength),D),x.wipe(V),j},B.prototype.open=function(A,I,D,M){if(A.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(I.length<this.tagLength)return null;var V=new Uint8Array(16);V.set(A,V.length-A.length);var L=new Uint8Array(32);n.stream(this._key,V,L,4);var F=new Uint8Array(this.tagLength);if(this._authenticate(F,L,I.subarray(0,I.length-this.tagLength),D),!S.equal(F,I.subarray(I.length-this.tagLength,I.length)))return null;var j=I.length-this.tagLength,U;if(M){if(M.length!==j)throw new Error("ChaCha20Poly1305: incorrect destination length");U=M}else U=new Uint8Array(j);return n.streamXOR(this._key,V,I.subarray(0,I.length-this.tagLength),U,4),x.wipe(V),U},B.prototype.clean=function(){return x.wipe(this._key),this},B.prototype._authenticate=function(A,I,D,M){var V=new _.Poly1305(I);M&&(V.update(M),M.length%16>0&&V.update(C.subarray(M.length%16))),V.update(D),D.length%16>0&&V.update(C.subarray(D.length%16));var L=new Uint8Array(8);M&&E.writeUint64LE(M.length,L),V.update(L),E.writeUint64LE(D.length,L),V.update(L);for(var F=V.digest(),j=0;j<F.length;j++)A[j]=F[j];V.clean(),x.wipe(F),x.wipe(L)},B}();t.ChaCha20Poly1305=T})(chacha20poly1305);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var n=xchacha20,_=chacha20poly1305,x=wipe$1;t.KEY_LENGTH=32,t.NONCE_LENGTH=24,t.TAG_LENGTH=16;var E=function(){function S(C){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,C.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(C)}return S.prototype.seal=function(C,T,B,A){if(C.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");var I=n.hchacha(this._key,C.subarray(0,16),new Uint8Array(32)),D=new Uint8Array(12);D.set(C.subarray(16),4);var M=new _.ChaCha20Poly1305(I),V=M.seal(D,T,B,A);return x.wipe(I),x.wipe(D),M.clean(),V},S.prototype.open=function(C,T,B,A){if(C.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");if(T.length<this.tagLength)return null;var I=n.hchacha(this._key,C.subarray(0,16),new Uint8Array(32)),D=new Uint8Array(12);D.set(C.subarray(16),4);var M=new _.ChaCha20Poly1305(I),V=M.open(D,T,B,A);return x.wipe(I),x.wipe(D),M.clean(),V},S.prototype.clean=function(){return x.wipe(this._key),this},S}();t.XChaCha20Poly1305=E})(xchacha20poly1305);function bytesToBase64url(t){return toString$5(t,"base64url")}function base64ToBytes(t){const n=t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return fromString$2(n,"base64url")}function base58ToBytes(t){return fromString$2(t,"base58btc")}function bytesToBase58(t){return toString$5(t,"base58btc")}function hexToBytes(t){const n=t.startsWith("0x")?t.substring(2):t;return fromString$2(n.toLowerCase(),"base16")}function encodeBase64url(t){return bytesToBase64url(fromString$2(t))}function decodeBase64url(t){return toString$5(base64ToBytes(t))}function bytesToHex(t){return toString$5(t,"base16")}function stringToBytes(t){return fromString$2(t)}const zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function rotl(t,n){return t<<n|t>>>32-n}function fn1(t,n,_,x,E,S,C,T){return rotl(t+(n^_^x)+S+C|0,T)+E|0}function fn2(t,n,_,x,E,S,C,T){return rotl(t+(n&_|~n&x)+S+C|0,T)+E|0}function fn3(t,n,_,x,E,S,C,T){return rotl(t+((n|~_)^x)+S+C|0,T)+E|0}function fn4(t,n,_,x,E,S,C,T){return rotl(t+(n&x|_&~x)+S+C|0,T)+E|0}function fn5(t,n,_,x,E,S,C,T){return rotl(t+(n^(_|~x))+S+C|0,T)+E|0}class Ripemd160{constructor(n=64){this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this._blockOffset=0,this._block=void 0,this._blockSize=void 0,this._length=[0,0,0,0],this._finalized=void 0,this.update=_=>{if(this._finalized)throw new Error("Digest already called");const x=this._block;let E=0;for(;this._blockOffset+_.length-E>=this._blockSize;){for(let S=this._blockOffset;S<this._blockSize;)x[S++]=_[E++];this._update(),this._blockOffset=0}for(;E<_.length;)x[this._blockOffset++]=_[E++];for(let S=0,C=_.length*8;C>0;++S)this._length[S]+=C,C=this._length[S]/4294967296|0,C>0&&(this._length[S]-=4294967296*C);return this},this.digest=()=>{if(this._finalized)throw new Error("Digest already called");this._finalized=!0;const _=this._digest();this._block.fill(0),this._blockOffset=0;for(let x=0;x<4;++x)this._length[x]=0;return _},this._update=()=>{const _=new Array(16),x=new DataView(this._block.buffer);for(let F=0;F<16;++F)_[F]=_[F]=x.getInt32(F*4,!0);let E=this._a|0,S=this._b|0,C=this._c|0,T=this._d|0,B=this._e|0,A=this._a|0,I=this._b|0,D=this._c|0,M=this._d|0,V=this._e|0;for(let F=0;F<80;F+=1){let j,U;F<16?(j=fn1(E,S,C,T,B,_[zl[F]],hl[0],sl[F]),U=fn5(A,I,D,M,V,_[zr[F]],hr[0],sr[F])):F<32?(j=fn2(E,S,C,T,B,_[zl[F]],hl[1],sl[F]),U=fn4(A,I,D,M,V,_[zr[F]],hr[1],sr[F])):F<48?(j=fn3(E,S,C,T,B,_[zl[F]],hl[2],sl[F]),U=fn3(A,I,D,M,V,_[zr[F]],hr[2],sr[F])):F<64?(j=fn4(E,S,C,T,B,_[zl[F]],hl[3],sl[F]),U=fn2(A,I,D,M,V,_[zr[F]],hr[3],sr[F])):(j=fn5(E,S,C,T,B,_[zl[F]],hl[4],sl[F]),U=fn1(A,I,D,M,V,_[zr[F]],hr[4],sr[F])),E=B,B=T,T=rotl(C,10),C=S,S=j,A=V,V=M,M=rotl(D,10),D=I,I=U}const L=this._b+C+M|0;this._b=this._c+T+V|0,this._c=this._d+B+A|0,this._d=this._e+E+I|0,this._e=this._a+S+D|0,this._a=L},this._digest=()=>{this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56);const _=new DataView(this._block.buffer);_.setUint32(56,this._length[0],!0),_.setUint32(60,this._length[1],!0),this._block=new Uint8Array(_.buffer),this._update();const x=new DataView(new Uint8Array(20).buffer);return x.setInt32(0,this._a,!0),x.setInt32(4,this._b,!0),x.setInt32(8,this._c,!0),x.setInt32(12,this._d,!0),x.setInt32(16,this._e,!0),new Uint8Array(x.buffer)},this._block=new Uint8Array(n),this._blockSize=n,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}}function sha256$3(t){const n=typeof t=="string"?fromString$2(t):t;return sha256$4.hash(n)}function keccak(t){return new Uint8Array(sha3.keccak_256.arrayBuffer(t))}function toEthereumAddress(t){const n=fromString$2(t.slice(2),"base16");return`0x${toString$5(keccak(n).slice(-20),"base16")}`}function ripemd160$1(t){return new Ripemd160().update(t).digest()}function writeUint32BE(t,n=new Uint8Array(4)){const _=fromString$2(t.toString(),"base10");return n.set(_,4-_.length),n}const lengthAndInput=t=>concat$2([writeUint32BE(t.length),t]);function concatKDF(t,n,_,x,E){if(n!==256)throw new Error(`Unsupported key length: ${n}`);const S=concat$2([lengthAndInput(fromString$2(_)),lengthAndInput(typeof x>"u"?new Uint8Array(0):x),lengthAndInput(typeof E>"u"?new Uint8Array(0):E),writeUint32BE(n)]);return sha256$3(concat$2([writeUint32BE(1),t,S]))}new elliptic.ec("secp256k1");new elliptic.ec("p256");const publicKeyToAddress$1=(t,n)=>{const _=toString$5(base58ToBytes(n).slice(0,1),"hex"),x=fromString$2(t,"hex"),E=ripemd160$1(sha256$3(x)),S=_+toString$5(E,"hex"),C=sha256$3(fromString$2(S,"hex")),T=sha256$3(C),B=toString$5(T,"hex").substring(0,8),A=S+B;return bytesToBase58(fromString$2(A,"hex"))},EC$2=elliptic.ec,publicKeyToAddress=(t,n)=>{const x=new EC$2("secp256k1").keyFromPublic(t,"hex").getPublic().encode("hex",!0),E=fromString$2(x,"hex"),S=ripemd160$1(sha256$3(E)),C=bech32.toWords(S);return bech32.encode(n,C).replace(n,"")},verifyBlockchainAccountId=(t,n)=>{if(n){const _=n.split(":");switch(_[0]){case"bip122":_[_.length-1]=publicKeyToAddress$1(t,_[_.length-1]);break;case"cosmos":_[_.length-1]=publicKeyToAddress(t,_[1]);break;case"eip155":_[_.length-1]=toEthereumAddress(t);break;default:return!1}return _.join(":").toLowerCase()===n.toLowerCase()}return!1},secp256k1=new elliptic.ec("secp256k1"),secp256r1=new elliptic.ec("p256");function toSignatureObject(t,n=!1){const _=base64ToBytes(t);if(_.length!==(n?65:64))throw new Error("wrong signature length");const x=bytesToHex(_.slice(0,32)),E=bytesToHex(_.slice(32,64)),S={r:x,s:E};return n&&(S.recoveryParam=_[64]),S}function extractPublicKeyBytes(t){if(t.publicKeyBase58)return base58ToBytes(t.publicKeyBase58);if(t.publicKeyBase64)return base64ToBytes(t.publicKeyBase64);if(t.publicKeyHex)return hexToBytes(t.publicKeyHex);if(t.publicKeyJwk&&t.publicKeyJwk.crv==="secp256k1"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return hexToBytes(secp256k1.keyFromPublic({x:bytesToHex(base64ToBytes(t.publicKeyJwk.x)),y:bytesToHex(base64ToBytes(t.publicKeyJwk.y))}).getPublic("hex"));if(t.publicKeyJwk&&t.publicKeyJwk.crv==="P-256"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return hexToBytes(secp256r1.keyFromPublic({x:bytesToHex(base64ToBytes(t.publicKeyJwk.x)),y:bytesToHex(base64ToBytes(t.publicKeyJwk.y))}).getPublic("hex"));if(t.publicKeyJwk&&t.publicKeyJwk.kty==="OKP"&&t.publicKeyJwk.crv==="Ed25519"&&t.publicKeyJwk.x)return base64ToBytes(t.publicKeyJwk.x);if(t.publicKeyMultibase){const{base16:n,base58btc:_,base64:x,base64url:E}=bases;return n.decoder.or(_.decoder.or(x.decoder.or(E.decoder))).decode(t.publicKeyMultibase)}return new Uint8Array}function verifyES256(t,n,_){const x=sha256$3(t),E=toSignatureObject(n),C=_.filter(({ethereumAddress:T,blockchainAccountId:B})=>typeof T>"u"&&typeof B>"u").find(T=>{try{const B=extractPublicKeyBytes(T);return secp256r1.keyFromPublic(B).verify(x,E)}catch{return!1}});if(!C)throw new Error("invalid_signature: Signature invalid for JWT");return C}function verifyES256K(t,n,_){const x=sha256$3(t),E=toSignatureObject(n),S=_.filter(({ethereumAddress:B,blockchainAccountId:A})=>typeof B>"u"&&typeof A>"u"),C=_.filter(({ethereumAddress:B,blockchainAccountId:A})=>typeof B<"u"||typeof A<"u");let T=S.find(B=>{try{const A=extractPublicKeyBytes(B);return secp256k1.keyFromPublic(A).verify(x,E)}catch{return!1}});if(!T&&C.length>0&&(T=verifyRecoverableES256K(t,n,C)),!T)throw new Error("invalid_signature: Signature invalid for JWT");return T}function verifyRecoverableES256K(t,n,_){let x;if(n.length>86)x=[toSignatureObject(n,!0)];else{const C=toSignatureObject(n,!1);x=[{...C,recoveryParam:0},{...C,recoveryParam:1}]}const E=C=>{const T=sha256$3(t),B=secp256k1.recoverPubKey(T,C,C.recoveryParam),A=B.encode("hex"),I=B.encode("hex",!0),D=toEthereumAddress(A).toLowerCase();return _.find(V=>{var L,F,j;const U=bytesToHex(extractPublicKeyBytes(V));return U===A||U===I||((L=V.ethereumAddress)==null?void 0:L.toLowerCase())===D||((F=V.blockchainAccountId)==null||(j=F.split("@eip155"))==null?void 0:j[0].toLowerCase())===D||verifyBlockchainAccountId(A,V.blockchainAccountId)})},S=x.map(E).filter(C=>typeof C<"u");if(S.length===0)throw new Error("invalid_signature: Signature invalid for JWT");return S[0]}function verifyEd25519(t,n,_){const x=stringToBytes(t),E=base64ToBytes(n),S=_.find(C=>ed25519.verify(extractPublicKeyBytes(C),x,E));if(!S)throw new Error("invalid_signature: Signature invalid for JWT");return S}const algorithms={ES256:verifyES256,ES256K:verifyES256K,"ES256K-R":verifyRecoverableES256K,Ed25519:verifyEd25519,EdDSA:verifyEd25519};function VerifierAlgorithm(t){const n=algorithms[t];if(!n)throw new Error(`not_supported: Unsupported algorithm ${t}`);return n}VerifierAlgorithm.toSignatureObject=toSignatureObject;function decodeJWS(t){const n=t.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(n)return{header:JSON.parse(decodeBase64url(n[1])),payload:n[2],signature:n[3],data:`${n[1]}.${n[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function verifyJWSDecoded({header:t,data:n,signature:_},x){return Array.isArray(x)||(x=[x]),VerifierAlgorithm(t.alg)(n,_,x)}function verifyJWS(t,n){const _=decodeJWS(t);return verifyJWSDecoded(_,n)}const _iteratorSymbol=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function _settle(t,n,_){if(!t.s){if(_ instanceof _Pact)if(_.s)n&1&&(n=_.s),_=_.v;else{_.o=_settle.bind(null,t,n);return}if(_&&_.then){_.then(_settle.bind(null,t,n),_settle.bind(null,t,2));return}t.s=n,t.v=_;const x=t.o;x&&x(t)}}const _Pact=function(){function t(){}return t.prototype.then=function(n,_){const x=new t,E=this.s;if(E){const S=E&1?n:_;if(S){try{_settle(x,1,S(this.v))}catch(C){_settle(x,2,C)}return x}else return this}return this.o=function(S){try{const C=S.v;S.s&1?_settle(x,1,n?n(C):C):_?_settle(x,1,_(C)):_settle(x,2,C)}catch(C){_settle(x,2,C)}},x},t}();function _isSettledPact(t){return t instanceof _Pact&&t.s&1}function _forTo(t,n,_){var x=-1,E,S;function C(T){try{for(;++x<t.length&&(!_||!_());)if(T=n(x),T&&T.then)if(_isSettledPact(T))T=T.v;else{T.then(C,S||(S=_settle.bind(null,E=new _Pact,2)));return}E?_settle(E,1,T):E=T}catch(B){_settle(E||(E=new _Pact),2,B)}}return C(),E}function _forOf(t,n,_){if(typeof t[_iteratorSymbol]=="function"){let I=function(D){try{for(;!(E=x.next()).done&&(!_||!_());)if(D=n(E.value),D&&D.then)if(_isSettledPact(D))D=D.v;else{D.then(I,C||(C=_settle.bind(null,S=new _Pact,2)));return}S?_settle(S,1,D):S=D}catch(M){_settle(S||(S=new _Pact),2,M)}};var x=t[_iteratorSymbol](),E,S,C;if(I(),x.return){var T=function(D){try{E.done||x.return()}catch{}return D};if(S&&S.then)return S.then(T,function(D){throw T(D)});T()}return S}if(!("length"in t))throw new TypeError("Object is not iterable");for(var B=[],A=0;A<t.length;A++)B.push(t[A]);return _forTo(B,function(I){return n(B[I])},_)}function encodeJWE({ciphertext:t,tag:n,iv:_,protectedHeader:x,recipient:E},S){const C={protected:x,iv:bytesToBase64url(_),ciphertext:bytesToBase64url(t),tag:bytesToBase64url(n)};return S&&(C.aad=bytesToBase64url(S)),E&&(C.recipients=[E]),C}const createJWE=function(t,n,_={},x){try{if(n[0].alg==="dir"){if(n.length>1)throw new Error('not_supported: Can only do "dir" encryption to one key.');return Promise.resolve(n[0].encrypt(t,_,x)).then(function(E){return encodeJWE(E,x)})}else{const E=n[0].enc;if(!n.reduce((B,A)=>B&&A.enc===E,!0))throw new Error("invalid_argument: Incompatible encrypters passed");let S,C;const T=_forOf(n,function(B){const A=function(){return S?Promise.resolve(B.encryptCek==null?void 0:B.encryptCek(S)).then(function(I){if(I){var D,M;(D=C)==null||(M=D.recipients)==null||M.push(I)}}):Promise.resolve(B.encrypt(t,_,x)).then(function(I){S=I.cek,C=encodeJWE(I,x)})}();if(A&&A.then)return A.then(function(){})});return Promise.resolve(T&&T.then?T.then(function(){return C}):C)}}catch(E){return Promise.reject(E)}},resolveX25519Encrypters=function(t,n){try{const _=function(E,S=[]){try{return Promise.resolve(n.resolve(E)).then(function({didResolutionMetadata:C,didDocument:T}){function B(){var D,M;const V=(D=T.keyAgreement)==null||(M=D.map(F=>typeof F=="string"?[...T.publicKey||[],...T.verificationMethod||[]].find(j=>j.id===F):F))==null?void 0:M.filter(F=>typeof F<"u"),L=V?.filter(F=>F.type==="X25519KeyAgreementKey2019"&&!!F.publicKeyBase58)||[];if(!L.length&&!A.length)throw new Error(`no_suitable_keys: Could not find x25519 key for ${E}`);return L.map(F=>x25519Encrypter(base58ToBytes(F.publicKeyBase58),F.id)).concat(...A)}if(S.push(E),C!=null&&C.error||T==null)throw new Error(`resolver_error: Could not resolve ${E}: ${C.error}, ${C.message}`);let A=[];if(!T.controller&&!T.keyAgreement)throw new Error(`no_suitable_keys: Could not find x25519 key for ${E}`);const I=function(){if(T.controller){let D=Array.isArray(T.controller)?T.controller:[T.controller];D=D.filter(V=>!S.includes(V));const M=D.map(V=>_(V,S).catch(()=>[]));return Promise.resolve(Promise.all(M)).then(function(V){A=[].concat(...V)})}}();return I&&I.then?I.then(B):B(I)})}catch(C){return Promise.reject(C)}},x=t.map(E=>_(E));return Promise.resolve(Promise.all(x)).then(function(E){return[].concat(...E)})}catch(_){return Promise.reject(_)}};function xc20pEncrypter(t){const n=new xchacha20poly1305.XChaCha20Poly1305(t);return(_,x)=>{const E=random.randomBytes(n.nonceLength),S=n.seal(E,_,x);return{ciphertext:S.subarray(0,S.length-n.tagLength),tag:S.subarray(S.length-n.tagLength),iv:E}}}function xc20pDirEncrypter(t){const n=function(S,C={},T){try{const B=encodeBase64url(JSON.stringify(Object.assign({alg:E},C,{enc:x}))),A=fromString$2(T?`${B}.${bytesToBase64url(T)}`:B);return Promise.resolve({..._(S,A),protectedHeader:B})}catch(B){return Promise.reject(B)}},_=xc20pEncrypter(t),x="XC20P",E="dir";return{alg:E,enc:x,encrypt:n}}function x25519Encrypter(t,n){const _=function(T,B={},A){try{Object.assign(B,{alg:void 0});const I=random.randomBytes(32);return Promise.resolve(xc20pDirEncrypter(I).encrypt(T,B,A)).then(function(D){return Promise.resolve(x(I)).then(function(M){return{...D,recipient:M,cek:I}})})}catch(I){return Promise.reject(I)}},x=function(T){try{const B=x25519.generateKeyPair(),A=x25519.sharedKey(B.secretKey,t),I=concatKDF(A,S,E),D=xc20pEncrypter(I)(T),M={encrypted_key:bytesToBase64url(D.ciphertext),header:{alg:E,iv:bytesToBase64url(D.iv),tag:bytesToBase64url(D.tag),epk:{kty:"OKP",crv:C,x:bytesToBase64url(B.publicKey)}}};return n&&(M.header.kid=n),Promise.resolve(M)}catch(B){return Promise.reject(B)}},E="ECDH-ES+XC20PKW",S=256,C="X25519";return{alg:E,enc:"XC20P",encrypt:_,encryptCek:x}}const readonly=({enumerable:t=!0,configurable:n=!1}={})=>({enumerable:t,configurable:n,writable:!1}),links=function*(t,n){if(t!=null&&!(t instanceof Uint8Array))for(const[_,x]of Object.entries(t)){const E=[...n,_];if(x!=null&&typeof x=="object")if(Array.isArray(x))for(const[S,C]of x.entries()){const T=[...E,S],B=CID$3.asCID(C);B?yield[T.join("/"),B]:typeof C=="object"&&(yield*links(C,T))}else{const S=CID$3.asCID(x);S?yield[E.join("/"),S]:yield*links(x,E)}}},tree=function*(t,n){if(t!=null)for(const[_,x]of Object.entries(t)){const E=[...n,_];if(yield E.join("/"),x!=null&&!(x instanceof Uint8Array)&&typeof x=="object"&&!CID$3.asCID(x))if(Array.isArray(x))for(const[S,C]of x.entries()){const T=[...E,S];yield T.join("/"),typeof C=="object"&&!CID$3.asCID(C)&&(yield*tree(C,T))}else yield*tree(x,E)}},get$1=(t,n)=>{let _=t;for(const[x,E]of n.entries()){if(_=_[E],_==null)throw new Error(`Object has no property at ${n.slice(0,x+1).map(C=>`[${JSON.stringify(C)}]`).join("")}`);const S=CID$3.asCID(_);if(S)return{value:S,remaining:n.slice(x+1).join("/")}}return{value:_}};class Block{constructor({cid:n,bytes:_,value:x}){if(!n||!_||typeof x>"u")throw new Error("Missing required argument");this.cid=n,this.bytes=_,this.value=x,this.asBlock=this,Object.defineProperties(this,{cid:readonly(),bytes:readonly(),value:readonly(),asBlock:readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(n="/"){return get$1(this.value,n.split("/").filter(Boolean))}}const encode$a=async({value:t,codec:n,hasher:_})=>{if(typeof t>"u")throw new Error('Missing required argument "value"');if(!n||!_)throw new Error("Missing required argument: codec or hasher");const x=n.encode(t),E=await _.digest(x),S=CID$3.create(1,n.code,E);return new Block({value:t,bytes:x,cid:S})},decode$7=async({bytes:t,codec:n,hasher:_})=>{if(!t)throw new Error('Missing required argument "bytes"');if(!n||!_)throw new Error("Missing required argument: codec or hasher");const x=n.decode(t),E=await _.digest(t),S=CID$3.create(1,n.code,E);return new Block({value:x,bytes:t,cid:S})},typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const n=typeof t;if(typeofs.includes(n))return n;if(n==="function")return"Function";if(Array.isArray(t))return"Array";if(isBuffer$2(t))return"Buffer";const _=getObjectType(t);return _||"Object"}function isBuffer$2(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function getObjectType(t){const n=Object.prototype.toString.call(t).slice(8,-1);if(objectTypeNames.includes(n))return n}class Type{constructor(n,_,x){this.major=n,this.majorEncoded=n<<5,this.name=_,this.terminal=x}toString(){return`Type[${this.major}].${this.name}`}compare(n){return this.major<n.major?-1:this.major>n.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(n,_,x){this.type=n,this.value=_,this.encodedLength=x,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder=new TextDecoder,textEncoder=new TextEncoder;function isBuffer$1(t){return useBuffer&&globalThis.Buffer.isBuffer(t)}function asU8A(t){return t instanceof Uint8Array?isBuffer$1(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const toString$4=useBuffer?(t,n,_)=>_-n>64?globalThis.Buffer.from(t.subarray(n,_)).toString("utf8"):utf8Slice(t,n,_):(t,n,_)=>_-n>64?textDecoder.decode(t.subarray(n,_)):utf8Slice(t,n,_),fromString$1=useBuffer?t=>t.length>64?globalThis.Buffer.from(t):utf8ToBytes(t):t=>t.length>64?textEncoder.encode(t):utf8ToBytes(t),fromArray=t=>Uint8Array.from(t),slice=useBuffer?(t,n,_)=>isBuffer$1(t)?new Uint8Array(t.subarray(n,_)):t.slice(n,_):(t,n,_)=>t.slice(n,_),concat$1=useBuffer?(t,n)=>(t=t.map(_=>_ instanceof Uint8Array?_:globalThis.Buffer.from(_)),asU8A(globalThis.Buffer.concat(t,n))):(t,n)=>{const _=new Uint8Array(n);let x=0;for(let E of t)x+E.length>_.length&&(E=E.subarray(0,_.length-x)),_.set(E,x),x+=E.length;return _},alloc=useBuffer?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function compare(t,n){if(isBuffer$1(t)&&isBuffer$1(n))return t.compare(n);for(let _=0;_<t.length;_++)if(t[_]!==n[_])return t[_]<n[_]?-1:1;return 0}function utf8ToBytes(t,n=1/0){let _;const x=t.length;let E=null;const S=[];for(let C=0;C<x;++C){if(_=t.charCodeAt(C),_>55295&&_<57344){if(!E){if(_>56319){(n-=3)>-1&&S.push(239,191,189);continue}else if(C+1===x){(n-=3)>-1&&S.push(239,191,189);continue}E=_;continue}if(_<56320){(n-=3)>-1&&S.push(239,191,189),E=_;continue}_=(E-55296<<10|_-56320)+65536}else E&&(n-=3)>-1&&S.push(239,191,189);if(E=null,_<128){if((n-=1)<0)break;S.push(_)}else if(_<2048){if((n-=2)<0)break;S.push(_>>6|192,_&63|128)}else if(_<65536){if((n-=3)<0)break;S.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((n-=4)<0)break;S.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return S}function utf8Slice(t,n,_){const x=[];for(;n<_;){const E=t[n];let S=null,C=E>239?4:E>223?3:E>191?2:1;if(n+C<=_){let T,B,A,I;switch(C){case 1:E<128&&(S=E);break;case 2:T=t[n+1],(T&192)===128&&(I=(E&31)<<6|T&63,I>127&&(S=I));break;case 3:T=t[n+1],B=t[n+2],(T&192)===128&&(B&192)===128&&(I=(E&15)<<12|(T&63)<<6|B&63,I>2047&&(I<55296||I>57343)&&(S=I));break;case 4:T=t[n+1],B=t[n+2],A=t[n+3],(T&192)===128&&(B&192)===128&&(A&192)===128&&(I=(E&15)<<18|(T&63)<<12|(B&63)<<6|A&63,I>65535&&I<1114112&&(S=I))}}S===null?(S=65533,C=1):S>65535&&(S-=65536,x.push(S>>>10&1023|55296),S=56320|S&1023),x.push(S),n+=C}return decodeCodePointsArray(x)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(t){const n=t.length;if(n<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);let _="",x=0;for(;x<n;)_+=String.fromCharCode.apply(String,t.slice(x,x+=MAX_ARGUMENTS_LENGTH));return _}const defaultChunkSize=256;class Bl{constructor(n=defaultChunkSize){this.chunkSize=n,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(n){let _=this.chunks[this.chunks.length-1];if(this.cursor+n.length<=this.maxCursor+1){const E=_.length-(this.maxCursor-this.cursor)-1;_.set(n,E)}else{if(_){const E=_.length-(this.maxCursor-this.cursor)-1;E<_.length&&(this.chunks[this.chunks.length-1]=_.subarray(0,E),this.maxCursor=this.cursor-1)}n.length<64&&n.length<this.chunkSize?(_=alloc(this.chunkSize),this.chunks.push(_),this.maxCursor+=_.length,this._initReuseChunk===null&&(this._initReuseChunk=_),_.set(n,0)):(this.chunks.push(n),this.maxCursor+=n.length)}this.cursor+=n.length}toBytes(n=!1){let _;if(this.chunks.length===1){const x=this.chunks[0];n&&this.cursor>x.length/2?(_=this.cursor===x.length?x:x.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):_=slice(x,0,this.cursor)}else _=concat$1(this.chunks,this.cursor);return n&&this.reset(),_}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(t,n,_){if(t.length-n<_)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(t,n,_){assertEnoughData(t,n,1);const x=t[n];if(_.strict===!0&&x<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return x}function readUint16(t,n,_){assertEnoughData(t,n,2);const x=t[n]<<8|t[n+1];if(_.strict===!0&&x<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return x}function readUint32(t,n,_){assertEnoughData(t,n,4);const x=t[n]*16777216+(t[n+1]<<16)+(t[n+2]<<8)+t[n+3];if(_.strict===!0&&x<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return x}function readUint64(t,n,_){assertEnoughData(t,n,8);const x=t[n]*16777216+(t[n+1]<<16)+(t[n+2]<<8)+t[n+3],E=t[n+4]*16777216+(t[n+5]<<16)+(t[n+6]<<8)+t[n+7],S=(BigInt(x)<<BigInt(32))+BigInt(E);if(_.strict===!0&&S<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(S<=Number.MAX_SAFE_INTEGER)return Number(S);if(_.allowBigInt===!0)return S;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(t,n,_,x){return new Token(Type.uint,readUint8(t,n+1,x),2)}function decodeUint16(t,n,_,x){return new Token(Type.uint,readUint16(t,n+1,x),3)}function decodeUint32(t,n,_,x){return new Token(Type.uint,readUint32(t,n+1,x),5)}function decodeUint64(t,n,_,x){return new Token(Type.uint,readUint64(t,n+1,x),9)}function encodeUint(t,n){return encodeUintValue(t,0,n.value)}function encodeUintValue(t,n,_){if(_<uintBoundaries[0]){const x=Number(_);t.push([n|x])}else if(_<uintBoundaries[1]){const x=Number(_);t.push([n|24,x])}else if(_<uintBoundaries[2]){const x=Number(_);t.push([n|25,x>>>8,x&255])}else if(_<uintBoundaries[3]){const x=Number(_);t.push([n|26,x>>>24&255,x>>>16&255,x>>>8&255,x&255])}else{const x=BigInt(_);if(x<uintBoundaries[4]){const E=[n|27,0,0,0,0,0,0,0];let S=Number(x&BigInt(4294967295)),C=Number(x>>BigInt(32)&BigInt(4294967295));E[8]=S&255,S=S>>8,E[7]=S&255,S=S>>8,E[6]=S&255,S=S>>8,E[5]=S&255,E[4]=C&255,C=C>>8,E[3]=C&255,C=C>>8,E[2]=C&255,C=C>>8,E[1]=C&255,t.push(E)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function t(n){return encodeUintValue.encodedSize(n.value)};encodeUintValue.encodedSize=function t(n){return n<uintBoundaries[0]?1:n<uintBoundaries[1]?2:n<uintBoundaries[2]?3:n<uintBoundaries[3]?5:9};encodeUint.compareTokens=function t(n,_){return n.value<_.value?-1:n.value>_.value?1:0};function decodeNegint8(t,n,_,x){return new Token(Type.negint,-1-readUint8(t,n+1,x),2)}function decodeNegint16(t,n,_,x){return new Token(Type.negint,-1-readUint16(t,n+1,x),3)}function decodeNegint32(t,n,_,x){return new Token(Type.negint,-1-readUint32(t,n+1,x),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(t,n,_,x){const E=readUint64(t,n+1,x);if(typeof E!="bigint"){const S=-1-E;if(S>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,S,9)}if(x.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(E),9)}function encodeNegint(t,n){const _=n.value,x=typeof _=="bigint"?_*neg1b-pos1b:_*-1-1;encodeUintValue(t,n.type.majorEncoded,x)}encodeNegint.encodedSize=function t(n){const _=n.value,x=typeof _=="bigint"?_*neg1b-pos1b:_*-1-1;return x<uintBoundaries[0]?1:x<uintBoundaries[1]?2:x<uintBoundaries[2]?3:x<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function t(n,_){return n.value<_.value?1:n.value>_.value?-1:0};function toToken$3(t,n,_,x){assertEnoughData(t,n,_+x);const E=slice(t,n+_,n+_+x);return new Token(Type.bytes,E,_+x)}function decodeBytesCompact(t,n,_,x){return toToken$3(t,n,1,_)}function decodeBytes8(t,n,_,x){return toToken$3(t,n,2,readUint8(t,n+1,x))}function decodeBytes16(t,n,_,x){return toToken$3(t,n,3,readUint16(t,n+1,x))}function decodeBytes32(t,n,_,x){return toToken$3(t,n,5,readUint32(t,n+1,x))}function decodeBytes64(t,n,_,x){const E=readUint64(t,n+1,x);if(typeof E=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(t,n,9,E)}function tokenBytes(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===Type.string?fromString$1(t.value):t.value),t.encodedBytes}function encodeBytes(t,n){const _=tokenBytes(n);encodeUintValue(t,n.type.majorEncoded,_.length),t.push(_)}encodeBytes.encodedSize=function t(n){const _=tokenBytes(n);return encodeUintValue.encodedSize(_.length)+_.length};encodeBytes.compareTokens=function t(n,_){return compareBytes(tokenBytes(n),tokenBytes(_))};function compareBytes(t,n){return t.length<n.length?-1:t.length>n.length?1:compare(t,n)}function toToken$2(t,n,_,x,E){const S=_+x;assertEnoughData(t,n,S);const C=new Token(Type.string,toString$4(t,n+_,n+S),S);return E.retainStringBytes===!0&&(C.byteValue=slice(t,n+_,n+S)),C}function decodeStringCompact(t,n,_,x){return toToken$2(t,n,1,_,x)}function decodeString8(t,n,_,x){return toToken$2(t,n,2,readUint8(t,n+1,x),x)}function decodeString16(t,n,_,x){return toToken$2(t,n,3,readUint16(t,n+1,x),x)}function decodeString32(t,n,_,x){return toToken$2(t,n,5,readUint32(t,n+1,x),x)}function decodeString64(t,n,_,x){const E=readUint64(t,n+1,x);if(typeof E=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(t,n,9,E,x)}const encodeString=encodeBytes;function toToken$1(t,n,_,x){return new Token(Type.array,x,_)}function decodeArrayCompact(t,n,_,x){return toToken$1(t,n,1,_)}function decodeArray8(t,n,_,x){return toToken$1(t,n,2,readUint8(t,n+1,x))}function decodeArray16(t,n,_,x){return toToken$1(t,n,3,readUint16(t,n+1,x))}function decodeArray32(t,n,_,x){return toToken$1(t,n,5,readUint32(t,n+1,x))}function decodeArray64(t,n,_,x){const E=readUint64(t,n+1,x);if(typeof E=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(t,n,9,E)}function decodeArrayIndefinite(t,n,_,x){if(x.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(t,n,1,1/0)}function encodeArray(t,n){encodeUintValue(t,Type.array.majorEncoded,n.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function t(n){return encodeUintValue.encodedSize(n.value)};function toToken(t,n,_,x){return new Token(Type.map,x,_)}function decodeMapCompact(t,n,_,x){return toToken(t,n,1,_)}function decodeMap8(t,n,_,x){return toToken(t,n,2,readUint8(t,n+1,x))}function decodeMap16(t,n,_,x){return toToken(t,n,3,readUint16(t,n+1,x))}function decodeMap32(t,n,_,x){return toToken(t,n,5,readUint32(t,n+1,x))}function decodeMap64(t,n,_,x){const E=readUint64(t,n+1,x);if(typeof E=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(t,n,9,E)}function decodeMapIndefinite(t,n,_,x){if(x.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(t,n,1,1/0)}function encodeMap(t,n){encodeUintValue(t,Type.map.majorEncoded,n.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function t(n){return encodeUintValue.encodedSize(n.value)};function decodeTagCompact(t,n,_,x){return new Token(Type.tag,_,1)}function decodeTag8(t,n,_,x){return new Token(Type.tag,readUint8(t,n+1,x),2)}function decodeTag16(t,n,_,x){return new Token(Type.tag,readUint16(t,n+1,x),3)}function decodeTag32(t,n,_,x){return new Token(Type.tag,readUint32(t,n+1,x),5)}function decodeTag64(t,n,_,x){return new Token(Type.tag,readUint64(t,n+1,x),9)}function encodeTag(t,n){encodeUintValue(t,Type.tag.majorEncoded,n.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function t(n){return encodeUintValue.encodedSize(n.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(t,n,_,x){if(x.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return x.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(t,n,_,x){if(x.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(t,n,_){if(_){if(_.allowNaN===!1&&Number.isNaN(t))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(_.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,t,n)}function decodeFloat16(t,n,_,x){return createToken(readFloat16(t,n+1),3,x)}function decodeFloat32(t,n,_,x){return createToken(readFloat32(t,n+1),5,x)}function decodeFloat64(t,n,_,x){return createToken(readFloat64(t,n+1),9,x)}function encodeFloat(t,n,_){const x=n.value;if(x===!1)t.push([Type.float.majorEncoded|MINOR_FALSE]);else if(x===!0)t.push([Type.float.majorEncoded|MINOR_TRUE]);else if(x===null)t.push([Type.float.majorEncoded|MINOR_NULL]);else if(x===void 0)t.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let E,S=!1;(!_||_.float64!==!0)&&(encodeFloat16(x),E=readFloat16(ui8a,1),x===E||Number.isNaN(x)?(ui8a[0]=249,t.push(ui8a.slice(0,3)),S=!0):(encodeFloat32(x),E=readFloat32(ui8a,1),x===E&&(ui8a[0]=250,t.push(ui8a.slice(0,5)),S=!0))),S||(encodeFloat64(x),E=readFloat64(ui8a,1),ui8a[0]=251,t.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function t(n,_){const x=n.value;if(x===!1||x===!0||x===null||x===void 0)return 1;if(!_||_.float64!==!0){encodeFloat16(x);let E=readFloat16(ui8a,1);if(x===E||Number.isNaN(x))return 3;if(encodeFloat32(x),E=readFloat32(ui8a,1),x===E)return 5}return 9};const buffer=new ArrayBuffer(9),dataView=new DataView(buffer,1),ui8a=new Uint8Array(buffer,0);function encodeFloat16(t){if(t===1/0)dataView.setUint16(0,31744,!1);else if(t===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(t))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,t);const n=dataView.getUint32(0),_=(n&2139095040)>>23,x=n&8388607;if(_===255)dataView.setUint16(0,31744,!1);else if(_===0)dataView.setUint16(0,(t&2147483648)>>16|x>>13,!1);else{const E=_-127;E<-24?dataView.setUint16(0,0):E<-14?dataView.setUint16(0,(n&2147483648)>>16|1<<24+E,!1):dataView.setUint16(0,(n&2147483648)>>16|E+15<<10|x>>13,!1)}}}function readFloat16(t,n){if(t.length-n<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const _=(t[n]<<8)+t[n+1];if(_===31744)return 1/0;if(_===64512)return-1/0;if(_===32256)return NaN;const x=_>>10&31,E=_&1023;let S;return x===0?S=E*2**-24:x!==31?S=(E+1024)*2**(x-25):S=E===0?1/0:NaN,_&32768?-S:S}function encodeFloat32(t){dataView.setFloat32(0,t,!1)}function readFloat32(t,n){if(t.length-n<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const _=(t.byteOffset||0)+n;return new DataView(t.buffer,_,4).getFloat32(0,!1)}function encodeFloat64(t){dataView.setFloat64(0,t,!1)}function readFloat64(t,n){if(t.length-n<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const _=(t.byteOffset||0)+n;return new DataView(t.buffer,_,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(t,n,_){throw new Error(`${decodeErrPrefix} encountered invalid minor (${_}) for major ${t[n]>>>5}`)}function errorer(t){return()=>{throw new Error(`${decodeErrPrefix} ${t}`)}}const jump=[];for(let t=0;t<=23;t++)jump[t]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let t=32;t<=55;t++)jump[t]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let t=64;t<=87;t++)jump[t]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)jump[t]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)jump[t]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let t=160;t<=183;t++)jump[t]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let t=192;t<=215;t++)jump[t]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let t=224;t<=243;t++)jump[t]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let t=0;t<24;t++)quick[t]=new Token(Type.uint,t,1);for(let t=-1;t>=-24;t--)quick[31-t]=new Token(Type.negint,t,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(t){switch(t.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return t.value.length?void 0:fromArray([64]);case Type.string:return t.value===""?fromArray([96]):void 0;case Type.array:return t.value===0?fromArray([128]):void 0;case Type.map:return t.value===0?fromArray([160]):void 0;case Type.uint:return t.value<24?fromArray([Number(t.value)]):void 0;case Type.negint:if(t.value>=-24)return fromArray([31-Number(t.value)])}}const defaultEncodeOptions={float64:!1,mapSorter,quickEncodeToken};function makeCborEncoders(){const t=[];return t[Type.uint.major]=encodeUint,t[Type.negint.major]=encodeNegint,t[Type.bytes.major]=encodeBytes,t[Type.string.major]=encodeString,t[Type.array.major]=encodeArray,t[Type.map.major]=encodeMap,t[Type.tag.major]=encodeTag,t[Type.float.major]=encodeFloat,t}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(n,_){this.obj=n,this.parent=_}includes(n){let _=this;do if(_.obj===n)return!0;while(_=_.parent);return!1}static createCheck(n,_){if(n&&n.includes(_))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(_,n)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(t,n,_,x){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Token(Type.float,t):t>=0?new Token(Type.uint,t):new Token(Type.negint,t)},bigint(t,n,_,x){return t>=BigInt(0)?new Token(Type.uint,t):new Token(Type.negint,t)},Uint8Array(t,n,_,x){return new Token(Type.bytes,t)},string(t,n,_,x){return new Token(Type.string,t)},boolean(t,n,_,x){return t?simpleTokens.true:simpleTokens.false},null(t,n,_,x){return simpleTokens.null},undefined(t,n,_,x){return simpleTokens.undefined},ArrayBuffer(t,n,_,x){return new Token(Type.bytes,new Uint8Array(t))},DataView(t,n,_,x){return new Token(Type.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,n,_,x){if(!t.length)return _.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;x=Ref.createCheck(x,t);const E=[];let S=0;for(const C of t)E[S++]=objectToTokens(C,_,x);return _.addBreakTokens?[new Token(Type.array,t.length),E,new Token(Type.break)]:[new Token(Type.array,t.length),E]},Object(t,n,_,x){const E=n!=="Object",S=E?t.keys():Object.keys(t),C=E?t.size:S.length;if(!C)return _.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;x=Ref.createCheck(x,t);const T=[];let B=0;for(const A of S)T[B++]=[objectToTokens(A,_,x),objectToTokens(E?t.get(A):t[A],_,x)];return sortMapEntries(T,_),_.addBreakTokens?[new Token(Type.map,C),T,new Token(Type.break)]:[new Token(Type.map,C),T]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${t}Array`]=typeEncoders.DataView;function objectToTokens(t,n={},_){const x=is(t),E=n&&n.typeEncoders&&n.typeEncoders[x]||typeEncoders[x];if(typeof E=="function"){const C=E(t,x,n,_);if(C!=null)return C}const S=typeEncoders[x];if(!S)throw new Error(`${encodeErrPrefix} unsupported type: ${x}`);return S(t,x,n,_)}function sortMapEntries(t,n){n.mapSorter&&t.sort(n.mapSorter)}function mapSorter(t,n){const _=Array.isArray(t[0])?t[0][0]:t[0],x=Array.isArray(n[0])?n[0][0]:n[0];if(_.type!==x.type)return _.type.compare(x.type);const E=_.type.major,S=cborEncoders[E].compareTokens(_,x);return S===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),S}function tokensToEncoded(t,n,_,x){if(Array.isArray(n))for(const E of n)tokensToEncoded(t,E,_,x);else _[n.type.major](t,n,x)}function encodeCustom(t,n,_){const x=objectToTokens(t,_);if(!Array.isArray(x)&&_.quickEncodeToken){const E=_.quickEncodeToken(x);if(E)return E;const S=n[x.type.major];if(S.encodedSize){const C=S.encodedSize(x,_),T=new Bl(C);if(S(T,x,_),T.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${x} was wrong`);return asU8A(T.chunks[0])}}return buf.reset(),tokensToEncoded(buf,x,n,_),buf.toBytes(!0)}function encode$9(t,n){return n=Object.assign({},defaultEncodeOptions,n),encodeCustom(t,cborEncoders,n)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(n,_={}){this.pos=0,this.data=n,this.options=_}done(){return this.pos>=this.data.length}next(){const n=this.data[this.pos];let _=quick[n];if(_===void 0){const x=jump[n];if(!x)throw new Error(`${decodeErrPrefix} no decoder for major type ${n>>>5} (byte 0x${n.toString(16).padStart(2,"0")})`);const E=n&31;_=x(this.data,this.pos,E,this.options)}return this.pos+=_.encodedLength,_}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(t,n,_){const x=[];for(let E=0;E<t.value;E++){const S=tokensToObject(n,_);if(S===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(S===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${E}, expected ${t.value})`);x[E]=S}return x}function tokenToMap(t,n,_){const x=_.useMaps===!0,E=x?void 0:{},S=x?new Map:void 0;for(let C=0;C<t.value;C++){const T=tokensToObject(n,_);if(T===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(T===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${C} [no key], expected ${t.value})`);if(x!==!0&&typeof T!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof T})`);if(_.rejectDuplicateMapKeys===!0&&(x&&S.has(T)||!x&&T in E))throw new Error(`${decodeErrPrefix} found repeat map key "${T}"`);const B=tokensToObject(n,_);if(B===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${C} [no value], expected ${t.value})`);x?S.set(T,B):E[T]=B}return x?S:E}function tokensToObject(t,n){if(t.done())return DONE;const _=t.next();if(_.type===Type.break)return BREAK;if(_.type.terminal)return _.value;if(_.type===Type.array)return tokenToArray(_,t,n);if(_.type===Type.map)return tokenToMap(_,t,n);if(_.type===Type.tag){if(n.tags&&typeof n.tags[_.value]=="function"){const x=tokensToObject(t,n);return n.tags[_.value](x)}throw new Error(`${decodeErrPrefix} tag not supported (${_.value})`)}throw new Error("unsupported")}function decode$6(t,n){if(!(t instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);n=Object.assign({},defaultDecodeOptions,n);const _=n.tokenizer||new Tokeniser(t,n),x=tokensToObject(_,n);if(x===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(x===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!_.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return x}const CID_CBOR_TAG$1=42;function cidEncoder$1(t){if(t.asCID!==t)return null;const n=CID$3.asCID(t);if(!n)return null;const _=new Uint8Array(n.bytes.byteLength+1);return _.set(n.bytes,1),[new Token(Type.tag,CID_CBOR_TAG$1),new Token(Type.bytes,_)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}};function cidDecoder$1(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$3.decode(t.subarray(1))}const decodeOptions$1={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions$1.tags[CID_CBOR_TAG$1]=cidDecoder$1;const name$1="dag-cbor",code$3=113,encode$8=t=>encode$9(t,encodeOptions$1),decode$5=t=>decode$6(t,decodeOptions$1),dagCBOR=Object.freeze(Object.defineProperty({__proto__:null,code:code$3,decode:decode$5,encode:encode$8,name:name$1},Symbol.toStringTag,{value:"Module"})),ENC_BLOCK_SIZE=24;async function encodePayload(t){const n=await encode$a({value:t,codec:dagCBOR,hasher:sha256$5});return{cid:n.cid,linkedBlock:n.bytes}}function pad(t,n=ENC_BLOCK_SIZE){const _=(n-t.length%n)%n,x=new Uint8Array(t.length+_);return x.set(t,0),x}async function encodeIdentityCID(t){return(await encode$a({value:t,codec:dagCBOR,hasher:identity$2})).cid}function decodeIdentityCID(t){if(t=CID$3.asCID(t),t.code!==code$3)throw new Error("CID codec must be dag-cbor");if(t.multihash.code!==identity$2.code)throw new Error("CID must use identity multihash");return decode$5(t.multihash.digest)}async function prepareCleartext(t,n){return pad((await encodeIdentityCID(t)).bytes,n)}function decodeCleartext(t){return decodeIdentityCID(CID$3.decodeFirst(t)[0])}const abortedReasonSymbol=Symbol("aborted");function abortable(t,n){if(n.aborted)return Promise.reject(abortedReasonSymbol);let _;const x=new Promise((E,S)=>{_=S});return n.addEventListener("abort",()=>{_(abortedReasonSymbol)}),Promise.race([t,x])}let nanoid=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((n,_)=>(_&=63,_<36?n+=_.toString(36):_<62?n+=(_-26).toString(36).toUpperCase():_>62?n+="-":n+="_",n),"");const ABORT_REQUEST_METHOD="utils_abort_request";var ERROR_CODE;(function(t){t[t.PARSE_ERROR=-32700]="PARSE_ERROR",t[t.INVALID_REQUEST=-32600]="INVALID_REQUEST",t[t.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",t[t.INVALID_PARAMS=-32602]="INVALID_PARAMS",t[t.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"})(ERROR_CODE||(ERROR_CODE={}));const ERROR_MESSAGE={[ERROR_CODE.PARSE_ERROR]:"Parse error",[ERROR_CODE.INVALID_REQUEST]:"Invalid request",[ERROR_CODE.METHOD_NOT_FOUND]:"Method not found",[ERROR_CODE.INVALID_PARAMS]:"Invalid params",[ERROR_CODE.INTERNAL_ERROR]:"Internal error"};function isServerError(t){return-32e3>=t&&t>=-32099}function getErrorMessage(t){return ERROR_MESSAGE[t.toString()]??(isServerError(t)?"Server error":"Application error")}class RPCError extends Error{static fromObject(n){return new RPCError(n.code,n.message,n.data)}toObject(){return{code:this.code,data:this.data,message:this.message}}constructor(n,_,x){super(),Object.setPrototypeOf(this,RPCError.prototype),this.code=n,this.data=x,this.message=_??getErrorMessage(n)}}function createErrorFactory(t){const n=ERROR_MESSAGE[t];return function(x){return new RPCError(t,n,x)}}createErrorFactory(ERROR_CODE.PARSE_ERROR);createErrorFactory(ERROR_CODE.INVALID_REQUEST);createErrorFactory(ERROR_CODE.METHOD_NOT_FOUND);createErrorFactory(ERROR_CODE.INVALID_PARAMS);createErrorFactory(ERROR_CODE.INTERNAL_ERROR);function _checkPrivateRedeclaration(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classApplyDescriptorGet(t,n){return n.get?n.get.call(t):n.value}function _classApplyDescriptorSet(t,n,_){if(n.set)n.set.call(t,_);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=_}}function _classExtractFieldDescriptor(t,n,_){if(!n.has(t))throw new TypeError("attempted to "+_+" private field on non-instance");return n.get(t)}function _classPrivateFieldGet(t,n){var _=_classExtractFieldDescriptor(t,n,"get");return _classApplyDescriptorGet(t,_)}function _classPrivateFieldInit(t,n,_){_checkPrivateRedeclaration(t,n),n.set(t,_)}function _classPrivateFieldSet(t,n,_){var x=_classExtractFieldDescriptor(t,n,"set");return _classApplyDescriptorSet(t,x,_),_}var _connection=new WeakMap;class RPCClient{get connection(){return _classPrivateFieldGet(this,_connection)}createID(){return nanoid()}request(n,_=void 0,x={}){const{signal:E}=x;if(E?.aborted)return Promise.reject(abortedReasonSymbol);const S=this.createID(),C=_classPrivateFieldGet(this,_connection).send({jsonrpc:"2.0",id:S,method:n,params:_}).then(T=>{if(T==null)throw new Error("Missing response");if(T.error!=null)throw RPCError.fromObject(T.error);return T.result});return E==null?C:(E.addEventListener("abort",()=>{this.notify(ABORT_REQUEST_METHOD,{id:S})}),abortable(C,E))}async notify(n,_=void 0){await _classPrivateFieldGet(this,_connection).send({jsonrpc:"2.0",method:n,params:_})}constructor(n){_classPrivateFieldInit(this,_connection,{writable:!0,value:void 0}),_classPrivateFieldSet(this,_connection,n)}}var identifiers,hasRequiredIdentifiers;function requireIdentifiers(){return hasRequiredIdentifiers||(hasRequiredIdentifiers=1,identifiers={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}),identifiers}var utilities={},style,hasRequiredStyle;function requireStyle(){return hasRequiredStyle||(hasRequiredStyle=1,style={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}),style}var converter={},transformers={},hasRequiredTransformers;function requireTransformers(){return hasRequiredTransformers||(hasRequiredTransformers=1,function(t){"use strict;";const{Buffer:n}=buffer$3,_=4294967292,x=4294967293,E=4294967294,S=4294967295,C=[0,1,3,7,15,31,63,127,255,511,1023],T=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),A=[];B.forEach(M=>{A.push(M.charCodeAt(0))}),t.utf8={encode(M){const V=[];return M.forEach(L=>{if(L>=0&&L<=127)V.push(L);else if(L<=2047)V.push(192+(L>>6&C[5])),V.push(128+(L&C[6]));else if(L<55296||L>57343&&L<=65535)V.push(224+(L>>12&C[4])),V.push(128+(L>>6&C[6])),V.push(128+(L&C[6]));else if(L>=65536&&L<=1114111){const F=L>>16&C[5];V.push(240+(F>>2)),V.push(128+((F&C[2])<<4)+(L>>12&C[4])),V.push(128+(L>>6&C[6])),V.push(128+(L&C[6]))}else throw new RangeError(`utf8.encode: character out of range: char: ${L}`)}),n.from(V)},decode(M,V){function L(_e,ye){if((ye&192)!==128)return x;const ie=((_e&C[5])<<6)+(ye&C[6]);return ie<128?_:ie}function F(_e,ye,ie){if((ie&192)!==128||(ye&192)!==128)return x;const W=((_e&C[4])<<12)+((ye&C[6])<<6)+(ie&C[6]);return W<2048?_:W>=55296&&W<=57343?E:W}function j(_e,ye,ie,W){if((W&192)!==128||(ie&192)!==128||(ye&192)!==128)return x;const O=(((_e&C[3])<<2)+(ye>>4&C[2])<<16)+((ye&C[4])<<12)+((ie&C[6])<<6)+(W&C[6]);return O<65536?_:O>1114111?E:O}let U,H,Y,Z,ne,re;const X=M.length;let ce=V?3:0;const ue=[];for(;ce<X;){H=M[ce],U=S;const _e=!0;for(;_e;){if(H>=0&&H<=127){U=H,re=1;break}if(Y=ce+1,Y<X&&H>=194&&H<=223){U=L(H,M[Y]),re=2;break}if(Z=ce+2,Z<X&&H>=224&&H<=239){U=F(H,M[Y],M[Z]),re=3;break}if(ne=ce+3,ne<X&&H>=240&&H<=244){U=j(H,M[Y],M[Z],M[ne]),re=4;break}break}if(U>1114111){const ye=`byte[${ce}]`;throw U===S?new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${ye}`):U===x?new RangeError(`utf8.decode: illegal trailing byte found at: ${ye}`):U===E?new RangeError(`utf8.decode: code point out of range found at: ${ye}`):U===_?new RangeError(`utf8.decode: non-shortest form found at: ${ye}`):new RangeError(`utf8.decode: unrecognized error found at: ${ye}`)}ue.push(U),ce+=re}return ue}},t.utf16be={encode(M){const V=[];let L,F,j;for(let U=0;U<M.length;U+=1)if(L=M[U],L>=0&&L<=55295||L>=57344&&L<=65535)V.push(L>>8&C[8]),V.push(L&C[8]);else if(L>=65536&&L<=1114111)j=L-65536,F=55296+(j>>10),j=56320+(j&C[10]),V.push(F>>8&C[8]),V.push(F&C[8]),V.push(j>>8&C[8]),V.push(j&C[8]);else throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${U}]: ${L}`);return n.from(V)},decode(M,V){if(M.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${M.length}`);const L=[],F=M.length;let j=V?2:0,U=0,H,Y,Z,ne,re,X;for(;j<F;){for(;;){if(Z=j+1,Z<F){if(re=(M[j]<<8)+M[Z],re<55296||re>57343){H=re,Y=2;break}if(ne=j+3,ne<F&&(X=(M[j+2]<<8)+M[ne],re<=56319&&X>=56320&&X<=57343)){H=65536+(re-55296<<10)+(X-56320),Y=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${j}]`)}L[U++]=H,j+=Y}return L}},t.utf16le={encode(M){const V=[];let L,F,j;for(let U=0;U<M.length;U+=1)if(L=M[U],L>=0&&L<=55295||L>=57344&&L<=65535)V.push(L&C[8]),V.push(L>>8&C[8]);else if(L>=65536&&L<=1114111)j=L-65536,F=55296+(j>>10),j=56320+(j&C[10]),V.push(F&C[8]),V.push(F>>8&C[8]),V.push(j&C[8]),V.push(j>>8&C[8]);else throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${U}]: ${L}`);return n.from(V)},decode(M,V){if(M.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${M.length}`);const L=[],F=M.length;let j=V?2:0,U=0,H,Y,Z,ne,re,X;for(;j<F;){for(;;){if(Z=j+1,Z<F){if(re=(M[Z]<<8)+M[j],re<55296||re>57343){H=re,Y=2;break}if(ne=j+3,ne<F&&(X=(M[ne]<<8)+M[j+2],re<=56319&&X>=56320&&X<=57343)){H=65536+(re-55296<<10)+(X-56320),Y=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${j}]`)}L[U++]=H,j+=Y}return L}},t.utf32be={encode(M){const V=n.alloc(M.length*4);let L=0;return M.forEach(F=>{if(F>=55296&&F<=57343||F>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${L/4}]: ${F}`);V[L++]=F>>24&C[8],V[L++]=F>>16&C[8],V[L++]=F>>8&C[8],V[L++]=F&C[8]}),V},decode(M,V){if(M.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${M.length}`);const L=[];let F=V?4:0;for(;F<M.length;F+=4){const j=(M[F]<<24)+(M[F+1]<<16)+(M[F+2]<<8)+M[F+3];if(j>=55296&&j<=57343||j>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${F/4}]: ${j}`);L.push(j)}return L}},t.utf32le={encode(M){const V=n.alloc(M.length*4);let L=0;return M.forEach(F=>{if(F>=55296&&F<=57343||F>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${L/4}]: ${F}`);V[L++]=F&C[8],V[L++]=F>>8&C[8],V[L++]=F>>16&C[8],V[L++]=F>>24&C[8]}),V},decode(M,V){if(M.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${M.length}`);const L=[];let F=V?4:0;for(;F<M.length;F+=4){const j=(M[F+3]<<24)+(M[F+2]<<16)+(M[F+1]<<8)+M[F];if(j>=55296&&j<=57343||j>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${F/4}]: ${j}`);L.push(j)}return L}},t.uint7={encode(M){const V=n.alloc(M.length);for(let L=0;L<M.length;L+=1){if(M[L]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${L}]: ${M[L]}`);V[L]=M[L]}return V},decode(M){const V=[];for(let L=0;L<M.length;L+=1){if(M[L]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${L}]: ${M[L]}`);V[L]=M[L]}return V}},t.uint8={encode(M){const V=n.alloc(M.length);for(let L=0;L<M.length;L+=1){if(M[L]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${L}]: ${M[L]}`);V[L]=M[L]}return V},decode(M){const V=[];for(let L=0;L<M.length;L+=1)V[L]=M[L];return V}},t.uint16be={encode(M){const V=n.alloc(M.length*2);let L=0;return M.forEach(F=>{if(F>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${L/2}]: ${F}`);V[L++]=F>>8&C[8],V[L++]=F&C[8]}),V},decode(M){if(M.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${M.length}`);const V=[];for(let L=0;L<M.length;L+=2)V.push((M[L]<<8)+M[L+1]);return V}},t.uint16le={encode(M){const V=n.alloc(M.length*2);let L=0;return M.forEach(F=>{if(F>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${L/2}]: ${F}`);V[L++]=F&C[8],V[L++]=F>>8&C[8]}),V},decode(M){if(M.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${M.length}`);const V=[];for(let L=0;L<M.length;L+=2)V.push((M[L+1]<<8)+M[L]);return V}},t.uint32be={encode(M){const V=n.alloc(M.length*4);let L=0;return M.forEach(F=>{V[L++]=F>>24&C[8],V[L++]=F>>16&C[8],V[L++]=F>>8&C[8],V[L++]=F&C[8]}),V},decode(M){if(M.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${M.length}`);const V=[];for(let L=0;L<M.length;L+=4)V.push((M[L]<<24)+(M[L+1]<<16)+(M[L+2]<<8)+M[L+3]);return V}},t.uint32le={encode(M){const V=n.alloc(M.length*4);let L=0;return M.forEach(F=>{V[L++]=F&C[8],V[L++]=F>>8&C[8],V[L++]=F>>16&C[8],V[L++]=F>>24&C[8]}),V},decode(M){if(M.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${M.length}`);const V=[];for(let L=0;L<M.length;L+=4)V.push((M[L+3]<<24)+(M[L+2]<<16)+(M[L+1]<<8)+M[L]);return V}},t.string={encode(M){return t.utf16le.encode(M).toString("utf16le")},decode(M){return t.utf16le.decode(n.from(M,"utf16le"),0)}},t.escaped={encode(M){const V=[];for(let L=0;L<M.length;L+=1){const F=M[L];if(F===96)V.push(F),V.push(F);else if(F===10)V.push(F);else if(F>=32&&F<=126)V.push(F);else{let j="";if(F>=0&&F<=31)j+=`\`x${T[F]}`;else if(F>=127&&F<=255)j+=`\`x${T[F]}`;else if(F>=256&&F<=65535)j+=`\`u${T[F>>8&C[8]]}${T[F&C[8]]}`;else if(F>=65536&&F<=4294967295){j+="`u{";const H=F>>24&C[8];H>0&&(j+=T[H]),j+=`${T[F>>16&C[8]]+T[F>>8&C[8]]+T[F&C[8]]}}`}else throw new Error("escape.encode(char): char > 0xffffffff not allowed");n.from(j).forEach(H=>{V.push(H)})}}return n.from(V)},decode(M){function V(X){return X>=48&&X<=57||X>=65&&X<=70||X>=97&&X<=102}function L(X,ce,ue){const _e={char:null,nexti:X+2,error:!0};if(X+1<ce&&V(ue[X])&&V(ue[X+1])){const ye=String.fromCodePoint(ue[X],ue[X+1]);_e.char=parseInt(ye,16),Number.isNaN(_e.char)||(_e.error=!1)}return _e}function F(X,ce,ue){const _e={char:null,nexti:X+4,error:!0};if(X+3<ce&&V(ue[X])&&V(ue[X+1])&&V(ue[X+2])&&V(ue[X+3])){const ye=String.fromCodePoint(ue[X],ue[X+1],ue[X+2],ue[X+3]);_e.char=parseInt(ye,16),Number.isNaN(_e.char)||(_e.error=!1)}return _e}function j(X,ce,ue){const _e={char:null,nexti:X+4,error:!0};let ye="";for(;X<ce&&V(ue[X]);)ye+=String.fromCodePoint(ue[X]),X+=1;return _e.char=parseInt(ye,16),ue[X]===125&&!Number.isNaN(_e.char)&&(_e.error=!1),_e.nexti=X+1,_e}const U=[],H=M.length;let Y,Z,ne,re=0;for(;re<H;){for(;;){if(ne=!0,M[re]!==96){U.push(M[re]),re+=1,ne=!1;break}if(Y=re+1,Y>=H)break;if(M[Y]===96){U.push(96),re+=2,ne=!1;break}if(M[Y]===120){if(Z=L(Y+1,H,M),Z.error)break;U.push(Z.char),re=Z.nexti,ne=!1;break}if(M[Y]===117){if(M[Y+1]===123){if(Z=j(Y+2,H,M),Z.error)break;U.push(Z.char),re=Z.nexti,ne=!1;break}if(Z=F(Y+1,H,M),Z.error)break;U.push(Z.char),re=Z.nexti,ne=!1;break}break}if(ne)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${re}]`)}return U}};const I=13,D=10;t.lineEnds={crlf(M){const V=[];let L=0;for(;L<M.length;)switch(M[L]){case I:L+1<M.length&&M[L+1]===D?L+=2:L+=1,V.push(I),V.push(D);break;case D:V.push(I),V.push(D),L+=1;break;default:V.push(M[L]),L+=1;break}return V.length>0&&V[V.length-1]!==D&&(V.push(I),V.push(D)),V},lf(M){const V=[];let L=0;for(;L<M.length;)switch(M[L]){case I:L+1<M.length&&M[L+1]===D?L+=2:L+=1,V.push(D);break;case D:V.push(D),L+=1;break;default:V.push(M[L]),L+=1;break}return V.length>0&&V[V.length-1]!==D&&V.push(D),V}},t.base64={encode(M){if(M.length===0)return n.alloc(0);let V,L,F,j=M.length%3;j=j>0?3-j:0;let U=(M.length+j)/3;const H=n.alloc(U*4);j>0&&(U-=1),V=0,L=0;for(let Y=0;Y<U;Y+=1)F=M[V++]<<16,F+=M[V++]<<8,F+=M[V++],H[L++]=A[F>>18&C[6]],H[L++]=A[F>>12&C[6]],H[L++]=A[F>>6&C[6]],H[L++]=A[F&C[6]];if(j===0)return H;if(j===1)return F=M[V++]<<16,F+=M[V]<<8,H[L++]=A[F>>18&C[6]],H[L++]=A[F>>12&C[6]],H[L++]=A[F>>6&C[6]],H[L]=A[64],H;if(j===2)return F=M[V]<<16,H[L++]=A[F>>18&C[6]],H[L++]=A[F>>12&C[6]],H[L++]=A[64],H[L]=A[64],H},decode(M){function V(re){const X=[];let ce=0;for(let ue=0;ue<re.length;ue+=1){const _e=re[ue],ye=!0;for(;ye&&!(_e===32||_e===9||_e===10||_e===13);){if(_e>=65&&_e<=90){X.push(_e-65);break}if(_e>=97&&_e<=122){X.push(_e-71);break}if(_e>=48&&_e<=57){X.push(_e+4);break}if(_e===43){X.push(62);break}if(_e===47){X.push(63);break}if(_e===61){X.push(64),ce+=1;break}throw new RangeError(`base64.decode: invalid character buf[${ue}]: ${_e}`)}}if(X.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${X.length}`);switch(ce){case 0:break;case 1:if(X[X.length-1]!==64)throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if(X[X.length-1]!==64||X[X.length-2]!==64)throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${ce}`)}return{tail:ce,buf:n.from(X)}}if(M.length===0)return n.alloc(0);const L=V(M),{tail:F}=L,j=L.buf;let U,H,Y,Z=j.length/4;const ne=n.alloc(Z*3-F);F>0&&(Z-=1),H=0,U=0;for(let re=0;re<Z;re+=1)Y=j[U++]<<18,Y+=j[U++]<<12,Y+=j[U++]<<6,Y+=j[U++],ne[H++]=Y>>16&C[8],ne[H++]=Y>>8&C[8],ne[H++]=Y&C[8];return F===1&&(Y=j[U++]<<18,Y+=j[U++]<<12,Y+=j[U]<<6,ne[H++]=Y>>16&C[8],ne[H]=Y>>8&C[8]),F===2&&(Y=j[U++]<<18,Y+=j[U++]<<12,ne[H]=Y>>16&C[8]),ne},toString(M){if(M.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${M.length}`);let V="",L=0;function F(U,H,Y,Z){switch(L){case 76:V+=`\r
${U}${H}${Y}${Z}`,L=4;break;case 75:V+=`${U}\r
${H}${Y}${Z}`,L=3;break;case 74:V+=`${U+H}\r
${Y}${Z}`,L=2;break;case 73:V+=`${U+H+Y}\r
${Z}`,L=1;break;default:V+=U+H+Y+Z,L+=4;break}}function j(U){return U>=65&&U<=90||U>=97&&U<=122||U>=48&&U<=57||U===43||U===47||U===61}for(let U=0;U<M.length;U+=4){for(let H=U;H<U+4;H+=1)if(!j(M[H]))throw new RangeError(`base64.toString: buf[${H}]: ${M[H]} : not valid base64 character code`);F(String.fromCharCode(M[U]),String.fromCharCode(M[U+1]),String.fromCharCode(M[U+2]),String.fromCharCode(M[U+3]))}return V}}}(transformers)),transformers}var hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,function(t){"use strict;";const{Buffer:n}=buffer$3,_=requireTransformers(),x="UTF8",E="UTF16",S="UTF16BE",C="UTF16LE",T="UTF32",B="UTF32BE",A="UTF32LE",I="UINT7",D="ASCII",M="BINARY",V="UINT8",L="UINT16",F="UINT16LE",j="UINT16BE",U="UINT32",H="UINT32LE",Y="UINT32BE",Z="ESCAPED",ne="STRING",re=function(z){z.type=x;const J=z.data;z.bom=0,J.length>=3&&J[0]===239&&J[1]===187&&J[2]===191&&(z.bom=3)},X=function(z){const J=z.data;switch(z.bom=0,z.type){case E:z.type=S,J.length>=2&&(J[0]===254&&J[1]===255?z.bom=2:J[0]===255&&J[1]===254&&(z.type=C,z.bom=2));break;case S:if(z.type=S,J.length>=2){if(J[0]===254&&J[1]===255)z.bom=2;else if(J[0]===255&&J[1]===254)throw new TypeError(`src type: "${S}" specified but BOM is for "${C}"`)}break;case C:if(z.type=C,J.length>=0){if(J[0]===254&&J[1]===255)throw new TypeError(`src type: "${C}" specified but BOM is for "${S}"`);J[0]===255&&J[1]===254&&(z.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${z.type}" unrecognized`)}},ce=function(z){const J=z.data;switch(z.bom=0,z.type){case T:z.type=B,J.length>=4&&(J[0]===0&&J[1]===0&&J[2]===254&&J[3]===255&&(z.bom=4),J[0]===255&&J[1]===254&&J[2]===0&&J[3]===0&&(z.type=A,z.bom=4));break;case B:if(z.type=B,J.length>=4&&(J[0]===0&&J[1]===0&&J[2]===254&&J[3]===255&&(z.bom=4),J[0]===255&&J[1]===254&&J[2]===0&&J[3]===0))throw new TypeError(`src type: ${B} specified but BOM is for ${A}"`);break;case A:if(z.type=A,J.length>=4){if(J[0]===0&&J[1]===0&&J[2]===254&&J[3]===255)throw new TypeError(`src type: "${A}" specified but BOM is for "${B}"`);J[0]===255&&J[1]===254&&J[2]===0&&J[3]===0&&(z.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${z.type}" unrecognized`)}},ue=function(z,J){function ee(oe){const se={type:"",base64:!1},q=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(oe);return q&&(q[2]&&(se.type=q[2].toUpperCase()),q[1]&&(se.base64=!0)),se}const ae=ee(z.toUpperCase());if(ae.base64){if(ae.type===ne)throw new TypeError(`type: "${z} "BASE64:" prefix not allowed with type ${ne}`);if(n.isBuffer(J))ae.data=_.base64.decode(J);else if(typeof J=="string"){const oe=n.from(J,"ascii");ae.data=_.base64.decode(oe)}else throw new TypeError(`type: "${z} unrecognized data type: typeof(data): ${typeof J}`)}else ae.data=J;switch(ae.type){case x:re(ae);break;case E:case S:case C:X(ae);break;case T:case B:case A:ce(ae);break;case L:ae.type=j;break;case U:ae.type=Y;break;case D:ae.type=I;break;case M:ae.type=V;break;case I:case V:case F:case j:case H:case Y:case ne:case Z:break;default:throw new TypeError(`type: "${z}" not recognized`)}if(ae.type===ne){if(typeof ae.data!="string")throw new TypeError(`type: "${z}" but data is not a string`)}else if(!n.isBuffer(ae.data))throw new TypeError(`type: "${z}" but data is not a Buffer`);return ae},_e=function(z,J){function ee(oe){let se,G;const q={crlf:!1,lf:!1,base64:!1,type:""},te=!0;for(;te;){if(G=oe,se=oe.slice(0,5),se==="CRLF:"){q.crlf=!0,G=oe.slice(5);break}if(se=oe.slice(0,3),se==="LF:"){q.lf=!0,G=oe.slice(3);break}break}return se=G.split(":"),se.length===1?q.type=se[0]:se.length===2&&se[1]==="BASE64"&&(q.base64=!0,q.type=se[0]),q}if(!Array.isArray(J))throw new TypeError(`dst chars: not array: "${typeof J}`);if(typeof z!="string")throw new TypeError(`dst type: not string: "${typeof z}`);const ae=ee(z.toUpperCase());switch(ae.type){case x:case S:case C:case B:case A:case I:case V:case F:case j:case H:case Y:case Z:break;case ne:if(ae.base64)throw new TypeError(`":BASE64" suffix not allowed with type ${ne}`);break;case D:ae.type=I;break;case M:ae.type=V;break;case E:ae.type=S;break;case T:ae.type=B;break;case L:ae.type=j;break;case U:ae.type=Y;break;default:throw new TypeError(`dst type unrecognized: "${z}" : must have form [crlf:|lf:]type[:base64]`)}return ae},ye=function(z,J){switch(z){case x:return _.utf8.encode(J);case S:return _.utf16be.encode(J);case C:return _.utf16le.encode(J);case B:return _.utf32be.encode(J);case A:return _.utf32le.encode(J);case I:return _.uint7.encode(J);case V:return _.uint8.encode(J);case j:return _.uint16be.encode(J);case F:return _.uint16le.encode(J);case Y:return _.uint32be.encode(J);case H:return _.uint32le.encode(J);case ne:return _.string.encode(J);case Z:return _.escaped.encode(J);default:throw new TypeError(`encode type "${z}" not recognized`)}},ie=function(z){switch(z.type){case x:return _.utf8.decode(z.data,z.bom);case C:return _.utf16le.decode(z.data,z.bom);case S:return _.utf16be.decode(z.data,z.bom);case B:return _.utf32be.decode(z.data,z.bom);case A:return _.utf32le.decode(z.data,z.bom);case I:return _.uint7.decode(z.data);case V:return _.uint8.decode(z.data);case j:return _.uint16be.decode(z.data);case F:return _.uint16le.decode(z.data);case Y:return _.uint32be.decode(z.data);case H:return _.uint32le.decode(z.data);case ne:return _.string.decode(z.data);case Z:return _.escaped.decode(z.data);default:throw new TypeError(`decode type "${z.type}" not recognized`)}};t.decode=function(z,J){const ee=ue(z,J);return ie(ee)},t.encode=function(z,J){let ee,ae;const oe=_e(z,J);return oe.crlf?(ee=_.lineEnds.crlf(J),ae=ye(oe.type,ee)):oe.lf?(ee=_.lineEnds.lf(J),ae=ye(oe.type,ee)):ae=ye(oe.type,J),oe.base64&&(ae=_.base64.encode(ae)),ae};const W=function(z,J,ee){return t.encode(ee,t.decode(z,J))};t.convert=W}(converter)),converter}var emitcss,hasRequiredEmitcss;function requireEmitcss(){return hasRequiredEmitcss||(hasRequiredEmitcss=1,emitcss=function(){return`/* This file automatically generated by jsonToless() and LESS. */
.apg-mono {
  font-family: monospace;
}
.apg-active {
  font-weight: bold;
  color: #000000;
}
.apg-match {
  font-weight: bold;
  color: #264BFF;
}
.apg-empty {
  font-weight: bold;
  color: #0fbd0f;
}
.apg-nomatch {
  font-weight: bold;
  color: #FF4000;
}
.apg-lh-match {
  font-weight: bold;
  color: #1A97BA;
}
.apg-lb-match {
  font-weight: bold;
  color: #5F1687;
}
.apg-remainder {
  font-weight: bold;
  color: #999999;
}
.apg-ctrl-char {
  font-weight: bolder;
  font-style: italic;
  font-size: 0.6em;
}
.apg-line-end {
  font-weight: bold;
  color: #000000;
}
.apg-error {
  font-weight: bold;
  color: #FF4000;
}
.apg-phrase {
  color: #000000;
  background-color: #8caae6;
}
.apg-empty-phrase {
  color: #0fbd0f;
}
table.apg-state {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th,
table.apg-state td {
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th:nth-last-child(2),
table.apg-state td:nth-last-child(2) {
  text-align: right;
}
table.apg-state caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-stats {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats th,
table.apg-stats td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace th,
table.apg-trace td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace th:last-child,
table.apg-trace th:nth-last-child(2),
table.apg-trace td:last-child,
table.apg-trace td:nth-last-child(2) {
  text-align: left;
}
table.apg-grammar {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-grammar th,
table.apg-grammar td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar th:last-child,
table.apg-grammar td:last-child {
  text-align: left;
}
table.apg-rules {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-rules th,
table.apg-rules td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules a {
  color: #003399 !important;
}
table.apg-rules a:hover {
  color: #8caae6 !important;
}
table.apg-attrs {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-attrs th,
table.apg-attrs td {
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs th:nth-child(1),
table.apg-attrs th:nth-child(2),
table.apg-attrs th:nth-child(3) {
  text-align: right;
}
table.apg-attrs td:nth-child(1),
table.apg-attrs td:nth-child(2),
table.apg-attrs td:nth-child(3) {
  text-align: right;
}
table.apg-attrs a {
  color: #003399 !important;
}
table.apg-attrs a:hover {
  color: #8caae6 !important;
}
`}),emitcss}var hasRequiredUtilities;function requireUtilities(){return hasRequiredUtilities||(hasRequiredUtilities=1,function(t){const n=requireStyle(),_=requireConverter(),x=requireEmitcss(),E=requireIdentifiers(),S="utilities.js: ",C=function(B,A,I){let D,M=A;const V=!0;for(;V;){if(B<=0){M=0,D=0;break}if(typeof M!="number"){M=0,D=B;break}if(M>=B){M=B,D=B;break}if(typeof I!="number"){D=B;break}if(D=M+I,D>B){D=B;break}break}return{beg:M,end:D}};t.htmlToPage=function(B,A){let I;if(typeof B!="string")throw new Error(`${S}htmlToPage: input HTML is not a string`);typeof A!="string"?I="htmlToPage":I=A;let D="";return D+=`<!DOCTYPE html>
`,D+=`<html lang="en">
`,D+=`<head>
`,D+=`<meta charset="utf-8">
`,D+=`<title>${I}</title>
`,D+=`<style>
`,D+=x(),D+=`</style>
`,D+=`</head>
<body>
`,D+=`<p>${new Date}</p>
`,D+=B,D+=`</body>
</html>
`,D},t.parserResultToHtml=function(B,A){let I=null;typeof A=="string"&&A!==""&&(I=A);let D,M;B.success===!0?D=`<span class="${n.CLASS_MATCH}">true</span>`:D=`<span class="${n.CLASS_NOMATCH}">false</span>`,B.state===E.EMPTY?M=`<span class="${n.CLASS_EMPTY}">EMPTY</span>`:B.state===E.MATCH?M=`<span class="${n.CLASS_MATCH}">MATCH</span>`:B.state===E.NOMATCH?M=`<span class="${n.CLASS_NOMATCH}">NOMATCH</span>`:M=`<span class="${n.CLASS_NOMATCH}">unrecognized</span>`;let V="";return V+=`<table class="${n.CLASS_STATE}">
`,I&&(V+=`<caption>${I}</caption>
`),V+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
`,V+=`<tr><td>parser success</td><td>${D}</td>
`,V+=`<td><span class="${n.CLASS_MATCH}">true</span> if the parse succeeded,
`,V+=` <span class="${n.CLASS_NOMATCH}">false</span> otherwise`,V+=`<br><i>NOTE: for success, entire string must be matched</i></td></tr>
`,V+=`<tr><td>parser state</td><td>${M}</td>
`,V+=`<td><span class="${n.CLASS_EMPTY}">EMPTY</span>, `,V+=`<span class="${n.CLASS_MATCH}">MATCH</span> or 
`,V+=`<span class="${n.CLASS_NOMATCH}">NOMATCH</span></td></tr>
`,V+=`<tr><td>string length</td><td>${B.length}</td><td>length of the input (sub)string</td></tr>
`,V+=`<tr><td>matched length</td><td>${B.matched}</td><td>number of input string characters matched</td></tr>
`,V+=`<tr><td>max matched</td><td>${B.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
`,V+=`<tr><td>max tree depth</td><td>${B.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
`,V+=`<tr><td>node hits</td><td>${B.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
`,V+=`<tr><td>input length</td><td>${B.inputLength}</td><td>length of full input string</td></tr>
`,V+=`<tr><td>sub-string begin</td><td>${B.subBegin}</td><td>sub-string first character index</td></tr>
`,V+=`<tr><td>sub-string end</td><td>${B.subEnd}</td><td>sub-string end-of-string index</td></tr>
`,V+=`<tr><td>sub-string length</td><td>${B.subLength}</td><td>sub-string length</td></tr>
`,V+=`</table>
`,V},t.charsToString=function(B,A,I){let D,M;if(typeof A=="number"){if(A>=B.length)return"";D=A<0?0:A}else D=0;if(typeof I=="number"){if(I<=0)return"";M=I>B.length-D?B.length:D+I}else M=B.length;return D<M?_.encode("UTF16LE",B.slice(D,M)).toString("utf16le"):""},t.stringToChars=function(B){return _.decode("STRING",B)},t.opcodeToString=function(B){let A="unknown";switch(B){case E.ALT:A="ALT";break;case E.CAT:A="CAT";break;case E.RNM:A="RNM";break;case E.UDT:A="UDT";break;case E.AND:A="AND";break;case E.NOT:A="NOT";break;case E.REP:A="REP";break;case E.TRG:A="TRG";break;case E.TBS:A="TBS";break;case E.TLS:A="TLS";break;case E.BKR:A="BKR";break;case E.BKA:A="BKA";break;case E.BKN:A="BKN";break;case E.ABG:A="ABG";break;case E.AEN:A="AEN";break;default:throw new Error("unrecognized opcode")}return A},t.stateToString=function(B){let A="unknown";switch(B){case E.ACTIVE:A="ACTIVE";break;case E.MATCH:A="MATCH";break;case E.EMPTY:A="EMPTY";break;case E.NOMATCH:A="NOMATCH";break;default:throw new Error("unrecognized state")}return A},t.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"],t.charToHex=function(B){let A=B.toString(16).toUpperCase();switch(A.length){case 1:case 3:case 7:A=`0${A}`;break;case 2:case 6:A=`00${A}`;break;case 4:break;case 5:A=`000${A}`;break;default:throw new Error("unrecognized option")}return A},t.charsToDec=function(B,A,I){let D="";if(!Array.isArray(B))throw new Error(`${S}charsToDec: input must be an array of integers`);const M=C(B.length,A,I);if(M.end>M.beg){D+=B[M.beg];for(let V=M.beg+1;V<M.end;V+=1)D+=`,${B[V]}`}return D},t.charsToHex=function(B,A,I){let D="";if(!Array.isArray(B))throw new Error(`${S}charsToHex: input must be an array of integers`);const M=C(B.length,A,I);if(M.end>M.beg){D+=`\\x${t.charToHex(B[M.beg])}`;for(let V=M.beg+1;V<M.end;V+=1)D+=`,\\x${t.charToHex(B[V])}`}return D},t.charsToHtmlEntities=function(B,A,I){let D="";if(!Array.isArray(B))throw new Error(`${S}charsToHex: input must be an array of integers`);const M=C(B.length,A,I);if(M.end>M.beg)for(let V=M.beg;V<M.end;V+=1)D+=`&#x${B[V].toString(16)};`;return D};function T(B){return!(B>=55296&&B<=57343||B>1114111)}t.charsToUnicode=function(B,A,I){let D="";if(!Array.isArray(B))throw new Error(`${S}charsToUnicode: input must be an array of integers`);const M=C(B.length,A,I);if(M.end>M.beg)for(let V=M.beg;V<M.end;V+=1)T(B[V])?D+=`&#${B[V]};`:D+=` U+${t.charToHex(B[V])}`;return D},t.charsToJsUnicode=function(B,A,I){let D="";if(!Array.isArray(B))throw new Error(`${S}charsToJsUnicode: input must be an array of integers`);const M=C(B.length,A,I);if(M.end>M.beg){D+=`\\u${t.charToHex(B[M.beg])}`;for(let V=M.beg+1;V<M.end;V+=1)D+=`,\\u${t.charToHex(B[V])}`}return D},t.charsToAscii=function(B,A,I){let D="";if(!Array.isArray(B))throw new Error(`${S}charsToAscii: input must be an array of integers`);const M=C(B.length,A,I);for(let V=M.beg;V<M.end;V+=1){const L=B[V];L>=32&&L<=126?D+=String.fromCharCode(L):D+=`\\x${t.charToHex(L)}`}return D},t.charsToAsciiHtml=function(B,A,I){if(!Array.isArray(B))throw new Error(`${S}charsToAsciiHtml: input must be an array of integers`);let D="",M;const V=C(B.length,A,I);for(let L=V.beg;L<V.end;L+=1)M=B[L],M<32||M===127?D+=`<span class="${n.CLASS_CTRLCHAR}">${t.asciiChars[M]}</span>`:M>127?D+=`<span class="${n.CLASS_CTRLCHAR}">U+${t.charToHex(M)}</span>`:D+=t.asciiChars[M];return D},t.stringToAsciiHtml=function(B){const A=_.decode("STRING",B);return this.charsToAsciiHtml(A)}}(utilities)),utilities}var ast,hasRequiredAst;function requireAst(){return hasRequiredAst||(hasRequiredAst=1,ast=function(){const n=requireIdentifiers(),_=requireUtilities(),x="ast.js: ",E=this;let S=null,C=null,T=null,B=0;const A=[],I=[],D=[],M=[];this.callbacks=[],this.astObject="astObject",this.init=function(F,j,U){D.length=0,M.length=0,A.length=0,B=0,S=F,C=j,T=U;let H;const Y=[];for(H=0;H<S.length;H+=1)Y.push(S[H].lower);for(H=0;H<C.length;H+=1)Y.push(C[H].lower);for(B=S.length+C.length,H=0;H<B;H+=1)A[H]=!1,I[H]=null;for(const Z in E.callbacks){const ne=Z.toLowerCase();if(H=Y.indexOf(ne),H<0)throw new Error(`${x}init: node '${Z}' not a rule or udt name`);typeof E.callbacks[Z]=="function"&&(A[H]=!0,I[H]=E.callbacks[Z]),E.callbacks[Z]===!0&&(A[H]=!0)}},this.ruleDefined=function(F){return A[F]!==!1},this.udtDefined=function(F){return A[S.length+F]!==!1},this.down=function(F,j){const U=M.length;return D.push(U),M.push({name:j,thisIndex:U,thatIndex:null,state:n.SEM_PRE,callbackIndex:F,phraseIndex:null,phraseLength:null,stack:D.length}),U},this.up=function(F,j,U,H){const Y=M.length,Z=D.pop();return M.push({name:j,thisIndex:Y,thatIndex:Z,state:n.SEM_POST,callbackIndex:F,phraseIndex:U,phraseLength:H,stack:D.length}),M[Z].thatIndex=Y,M[Z].phraseIndex=U,M[Z].phraseLength=H,Y},this.translate=function(F){let j,U,H;for(let Y=0;Y<M.length;Y+=1)H=M[Y],U=I[H.callbackIndex],H.state===n.SEM_PRE?U!==null&&(j=U(n.SEM_PRE,T,H.phraseIndex,H.phraseLength,F),j===n.SEM_SKIP&&(Y=H.thatIndex)):U!==null&&U(n.SEM_POST,T,H.phraseIndex,H.phraseLength,F)},this.setLength=function(F){M.length=F,F>0?D.length=M[F-1].stack:D.length=0},this.getLength=function(){return M.length};function V(L){let F="";for(let j=0;j<L;j+=1)F+=" ";return F}this.toXml=function(F){let j=_.charsToDec,U="decimal integer character codes";if(typeof F=="string"&&F.length>=3){const Z=F.slice(0,3).toLowerCase();Z==="asc"?(j=_.charsToAscii,U="ASCII for printing characters, hex for non-printing"):Z==="hex"?(j=_.charsToHex,U="hexadecimal integer character codes"):Z==="uni"&&(j=_.charsToUnicode,U="Unicode UTF-32 integer character codes")}let H="",Y=0;return H+=`<?xml version="1.0" encoding="utf-8"?>
`,H+=`<root nodes="${M.length/2}" characters="${T.length}">
`,H+=`<!-- input string, ${U} -->
`,H+=V(Y+2),H+=j(T),H+=`
`,M.forEach(Z=>{Z.state===n.SEM_PRE?(Y+=1,H+=V(Y),H+=`<node name="${Z.name}" index="${Z.phraseIndex}" length="${Z.phraseLength}">
`,H+=V(Y+2),H+=j(T,Z.phraseIndex,Z.phraseLength),H+=`
`):(H+=V(Y),H+=`</node><!-- name="${Z.name}" -->
`,Y-=1)}),H+=`</root>
`,H},this.phrases=function(){const F={};let j,U;for(j=0;j<M.length;j+=1)U=M[j],U.state===n.SEM_PRE&&(Array.isArray(F[U.name])||(F[U.name]=[]),F[U.name].push({index:U.phraseIndex,length:U.phraseLength}));return F}}),ast}var circularBuffer,hasRequiredCircularBuffer;function requireCircularBuffer(){return hasRequiredCircularBuffer||(hasRequiredCircularBuffer=1,circularBuffer=function(){"use strict;";const n="circular-buffer.js: ";let _=-1,x=0;this.init=function(S){if(typeof S!="number"||S<=0)throw new Error(`${n}init: circular buffer size must an integer > 0`);x=Math.ceil(S),_=-1},this.increment=function(){return _+=1,(_+x)%x},this.maxSize=function(){return x},this.items=function(){return _+1},this.getListIndex=function(S){return _===-1||S<0||S>_||_-S>=x?-1:(S+x)%x},this.forEach=function(S){if(_!==-1){if(_<x){for(let C=0;C<=_;C+=1)S(C,C);return}for(let C=_-x+1;C<=_;C+=1){const T=(C+x)%x;S(T,C)}}}}),circularBuffer}var parser$1,hasRequiredParser$1;function requireParser$1(){return hasRequiredParser$1||(hasRequiredParser$1=1,parser$1=function(){const n=requireIdentifiers(),_=requireUtilities(),x="parser.js: ",E=this;let S;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let C=null,T=null,B,A,I,D,M=0,V=0,L=0,F=null,j=null,U=null,H=null,Y=null,Z=0,ne=1/0,re=1/0;const X=function(Ie,be,Te){const Le=`${x}evaluateRule(): `;if(Ie>=U.length)throw new Error(`${Le}rule index: ${Ie} out of range`);if(be>=I)throw new Error(`${Le}phrase index: ${be} out of range`);const{length:We}=C;C.push({type:n.RNM,index:Ie}),S(We,be,Te),C.pop()},ce=function(Je,Ie,be){const Te=`${x}evaluateUdt(): `;if(Je>=H.length)throw new Error(`${Te}udt index: ${Je} out of range`);if(Ie>=I)throw new Error(`${Te}phrase index: ${Ie} out of range`);const{length:Le}=C;C.push({type:n.UDT,empty:H[Je].empty,index:Je}),S(Le,Ie,be),C.pop()},ue=function(){M=0,V=0,L=0,Z=0,D=[{lookAround:n.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],U=null,H=null,T=null,B=0,A=0,I=0,F=null,j=null,Y=null,C=null},_e=function(){const Je=[],Ie=function(){const Te={};U.forEach(Le=>{Le.isBkr&&(Te[Le.lower]=null)}),H.length>0&&H.forEach(Le=>{Le.isBkr&&(Te[Le.lower]=null)}),Je.push(Te)},be=function(){const Te=Je[Je.length-1],Le={};for(const We in Te)Le[We]=Te[We];return Le};this.push=function(){Je.push(be())},this.pop=function(Le){let We=Le;if(We||(We=Je.length-1),We<1||We>Je.length)throw new Error(`${x}backRef.pop(): bad length: ${We}`);return Je.length=We,Je[Je.length-1]},this.length=function(){return Je.length},this.savePhrase=function(Le,We,Ze){Je[Je.length-1][Le]={phraseIndex:We,phraseLength:Ze}},this.getPhrase=function(Te){return Je[Je.length-1][Te]},Ie()},ye=function(){const Ie=this;this.state=n.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=D[D.length-1],this.uFrame=new _e,this.pFrame=new _e,this.evaluateRule=X,this.evaluateUdt=ce,this.refresh=function(){Ie.state=n.ACTIVE,Ie.phraseLength=0,Ie.lookAround=D[D.length-1]}},ie=function(){return D[D.length-1]},W=function(){return D.length>1},O=function(){return D[D.length-1].lookAround===n.LOOKAROUND_BEHIND},z=function(){const Je=`${x}initializeAst(): `,Ie=!0;for(;Ie;){if(E.ast===void 0){E.ast=null;break}if(E.ast===null)break;if(E.ast.astObject!=="astObject")throw new Error(`${Je}ast object not recognized`);break}E.ast!==null&&E.ast.init(U,H,T)},J=function(){const Je=`${x}initializeTrace(): `,Ie=!0;for(;Ie;){if(E.trace===void 0){E.trace=null;break}if(E.trace===null)break;if(E.trace.traceObject!=="traceObject")throw new Error(`${Je}trace object not recognized`);break}E.trace!==null&&E.trace.init(U,H,T)},ee=function(){const Je=`${x}initializeStats(): `,Ie=!0;for(;Ie;){if(E.stats===void 0){E.stats=null;break}if(E.stats===null)break;if(E.stats.statsObject!=="statsObject")throw new Error(`${Je}stats object not recognized`);break}E.stats!==null&&E.stats.init(U,H)},ae=function(Je){const Ie=`${x}initializeGrammar(): `;if(!Je)throw new Error(`${Ie}grammar object undefined`);if(Je.grammarObject!=="grammarObject")throw new Error(`${Ie}bad grammar object`);U=Je.rules,H=Je.udts},oe=function(Je){const Ie=`${x}initializeStartRule(): `;let be=null;if(typeof Je=="number"){if(Je>=U.length)throw new Error(`${Ie}start rule index too large: max: ${U.length}: index: ${Je}`);be=Je}else if(typeof Je=="string"){const Te=Je.toLowerCase();for(let Le=0;Le<U.length;Le+=1)if(Te===U[Le].lower){be=U[Le].index;break}if(be===null)throw new Error(`${Ie}start rule name '${Je}' not recognized`)}else throw new Error(`${Ie}type of start rule '${typeof Je}' not recognized`);return be},se=function(Ie,be,Te){const Le=`${x}initializeInputChars(): `;let We=Ie,Ze=be,Qe=Te;if(We===void 0)throw new Error(`${Le}input string is undefined`);if(We===null)throw new Error(`${Le}input string is null`);if(typeof We=="string")We=_.stringToChars(We);else if(!Array.isArray(We))throw new Error(`${Le}input string is not a string or array`);if(We.length>0&&typeof We[0]!="number")throw new Error(`${Le}input string not an array of integers`);if(typeof Ze!="number")Ze=0;else if(Ze=Math.floor(Ze),Ze<0||Ze>We.length)throw new Error(`${Le}input beginning index out of range: ${Ze}`);if(typeof Qe!="number")Qe=We.length-Ze;else if(Qe=Math.floor(Qe),Qe<0||Qe>We.length-Ze)throw new Error(`${Le}input length out of range: ${Qe}`);T=We,B=Ze,A=Qe,I=B+A},G=function(){const Je=`${x}initializeCallbacks(): `;let Ie;for(F=[],j=[],Ie=0;Ie<U.length;Ie+=1)F[Ie]=null;for(Ie=0;Ie<H.length;Ie+=1)j[Ie]=null;let be;const Te=[];for(Ie=0;Ie<U.length;Ie+=1)Te.push(U[Ie].lower);for(Ie=0;Ie<H.length;Ie+=1)Te.push(H[Ie].lower);for(const Le in E.callbacks){if(Ie=Te.indexOf(Le.toLowerCase()),Ie<0)throw new Error(`${Je}syntax callback '${Le}' not a rule or udt name`);if(be=E.callbacks[Le],be||(be=null),typeof be=="function"||be===null)Ie<U.length?F[Ie]=be:j[Ie-U.length]=be;else throw new Error(`${Je}syntax callback[${Le}] must be function reference or 'false' (false/null/undefined/etc.)`)}for(Ie=0;Ie<H.length;Ie+=1)if(j[Ie]===null)throw new Error(`${Je}all UDT callbacks must be defined. UDT callback[${H[Ie].lower}] not a function reference`)};this.setMaxTreeDepth=function(Je){if(typeof Je!="number")throw new Error(`parser: max tree depth must be integer > 0: ${Je}`);if(ne=Math.floor(Je),ne<=0)throw new Error(`parser: max tree depth must be integer > 0: ${Je}`)},this.setMaxNodeHits=function(Je){if(typeof Je!="number")throw new Error(`parser: max node hits must be integer > 0: ${Je}`);if(re=Math.floor(Je),re<=0)throw new Error(`parser: max node hits must be integer > 0: ${Je}`)};const q=function(Je,Ie,be){let Te;const Le=`${x}parse(): `;ae(Je);const We=oe(Ie);G(),J(),ee(),z();const Ze=new ye;switch(be!=null&&(Y=be),C=[{type:n.RNM,index:We}],S(0,B,Ze),C=null,Ze.state){case n.ACTIVE:throw new Error(`${Le}final state should never be 'ACTIVE'`);case n.NOMATCH:Te=!1;break;case n.EMPTY:case n.MATCH:Ze.phraseLength===A?Te=!0:Te=!1;break;default:throw new Error("unrecognized state")}return{success:Te,state:Ze.state,length:A,matched:Ze.phraseLength,maxMatched:Z,maxTreeDepth:V,nodeHits:L,inputLength:T.length,subBegin:B,subEnd:I,subLength:A}};this.parseSubstring=function(Ie,be,Te,Le,We,Ze){return ue(),se(Te,Le,We),q(Ie,be,Ze)},this.parse=function(Ie,be,Te,Le){return ue(),se(Te,0,Te.length),q(Ie,be,Le)};const te=function(Je,Ie,be){const Te=C[Je];for(let Le=0;Le<Te.children.length&&(S(Te.children[Le],Ie,be),be.state===n.NOMATCH);Le+=1);},fe=function(Je,Ie,be){let Te,Le,We,Ze;const Qe=C[Je],St=be.uFrame.length(),pt=be.pFrame.length();E.ast&&(Le=E.ast.getLength()),Te=!0,We=Ie,Ze=0;for(let ft=0;ft<Qe.children.length;ft+=1)if(S(Qe.children[ft],We,be),be.state===n.NOMATCH){Te=!1;break}else We+=be.phraseLength,Ze+=be.phraseLength;Te?(be.state=Ze===0?n.EMPTY:n.MATCH,be.phraseLength=Ze):(be.state=n.NOMATCH,be.phraseLength=0,be.uFrame.pop(St),be.pFrame.pop(pt),E.ast&&E.ast.setLength(Le))},he=function(Je,Ie,be){let Te,Le,We,Ze;const Qe=C[Je];Le=Ie,We=0,Ze=0;const St=be.uFrame.length(),pt=be.pFrame.length();E.ast&&(Te=E.ast.getLength());const ft=!0;for(;ft&&!(Le>=I||(S(Je+1,Le,be),be.state===n.NOMATCH)||be.state===n.EMPTY||(Ze+=1,We+=be.phraseLength,Le+=be.phraseLength,Ze===Qe.max)););be.state===n.EMPTY||Ze>=Qe.min?(be.state=We===0?n.EMPTY:n.MATCH,be.phraseLength=We):(be.state=n.NOMATCH,be.phraseLength=0,be.uFrame.pop(St),be.pFrame.pop(pt),E.ast&&E.ast.setLength(Te))},Ee=function(Je,Ie,be,Te){if(Ie.phraseLength>be){let Le=`${x}opRNM(${Je.name}): callback function error: `;throw Le+=`sysData.phraseLength: ${Ie.phraseLength}`,Le+=` must be <= remaining chars: ${be}`,new Error(Le)}switch(Ie.state){case n.ACTIVE:if(Te!==!0)throw new Error(`${x}opRNM(${Je.name}): callback function return error. ACTIVE state not allowed.`);break;case n.EMPTY:Ie.phraseLength=0;break;case n.MATCH:Ie.phraseLength===0&&(Ie.state=n.EMPTY);break;case n.NOMATCH:Ie.phraseLength=0;break;default:throw new Error(`${x}opRNM(${Je.name}): callback function return error. Unrecognized return state: ${Ie.state}`)}},we=function(Je,Ie,be){let Te,Le,We,Ze,Qe,St;const pt=C[Je],ft=U[pt.index],Ut=F[ft.index],$t=!W();if($t&&(Le=E.ast&&E.ast.ruleDefined(pt.index),Le&&(Te=E.ast.getLength(),E.ast.down(pt.index,U[pt.index].name)),Ze=be.uFrame.length(),Qe=be.pFrame.length(),be.uFrame.push(),be.pFrame.push(),St=be.pFrame,be.pFrame=new _e),Ut===null)We=C,C=ft.opcodes,S(0,Ie,be),C=We;else{const Nt=I-Ie;be.ruleIndex=ft.index,Ut(be,T,Ie,Y),Ee(ft,be,Nt,!0),be.state===n.ACTIVE&&(We=C,C=ft.opcodes,S(0,Ie,be),C=We,be.ruleIndex=ft.index,Ut(be,T,Ie,Y),Ee(ft,be,Nt,!1))}$t&&(Le&&(be.state===n.NOMATCH?E.ast.setLength(Te):E.ast.up(pt.index,ft.name,Ie,be.phraseLength)),be.pFrame=St,be.state===n.NOMATCH?(be.uFrame.pop(Ze),be.pFrame.pop(Qe)):ft.isBkr&&(be.pFrame.savePhrase(ft.lower,Ie,be.phraseLength),be.uFrame.savePhrase(ft.lower,Ie,be.phraseLength)))},xe=function(Je,Ie,be){if(Ie.phraseLength>be){let Te=`${x}opUDT(${Je.name}): callback function error: `;throw Te+=`sysData.phraseLength: ${Ie.phraseLength}`,Te+=` must be <= remaining chars: ${be}`,new Error(Te)}switch(Ie.state){case n.ACTIVE:throw new Error(`${x}opUDT(${Je.name}): callback function return error. ACTIVE state not allowed.`);case n.EMPTY:if(Je.empty===!1)throw new Error(`${x}opUDT(${Je.name}): callback function return error. May not return EMPTY.`);Ie.phraseLength=0;break;case n.MATCH:if(Ie.phraseLength===0){if(Je.empty===!1)throw new Error(`${x}opUDT(${Je.name}): callback function return error. May not return EMPTY.`);Ie.state=n.EMPTY}break;case n.NOMATCH:Ie.phraseLength=0;break;default:throw new Error(`${x}opUDT(${Je.name}): callback function return error. Unrecognized return state: ${Ie.state}`)}},$e=function(Je,Ie,be){let Te,Le,We,Ze,Qe,St;const pt=C[Je],ft=H[pt.index];be.UdtIndex=ft.index;const Ut=!W();Ut&&(We=E.ast&&E.ast.udtDefined(pt.index),We&&(Le=U.length+pt.index,Te=E.ast.getLength(),E.ast.down(Le,ft.name)),Ze=be.uFrame.length(),Qe=be.pFrame.length(),be.uFrame.push(),be.pFrame.push(),St=be.pFrame,be.pFrame=new _e);const $t=I-Ie;j[pt.index](be,T,Ie,Y),xe(ft,be,$t),Ut&&(We&&(be.state===n.NOMATCH?E.ast.setLength(Te):E.ast.up(Le,ft.name,Ie,be.phraseLength)),be.pFrame=St,be.state===n.NOMATCH?(be.uFrame.pop(Ze),be.pFrame.pop(Qe)):ft.isBkr&&(be.pFrame.savePhrase(ft.lower,Ie,be.phraseLength),be.uFrame.savePhrase(ft.lower,Ie,be.phraseLength)))},ge=function(Je,Ie,be){D.push({lookAround:n.LOOKAROUND_AHEAD,anchor:Ie,charsEnd:I,charsLength:A}),I=T.length,A=T.length-B,S(Je+1,Ie,be);const Te=D.pop();switch(I=Te.charsEnd,A=Te.charsLength,be.phraseLength=0,be.state){case n.EMPTY:be.state=n.EMPTY;break;case n.MATCH:be.state=n.EMPTY;break;case n.NOMATCH:be.state=n.NOMATCH;break;default:throw new Error(`opAND: invalid state ${be.state}`)}},Se=function(Je,Ie,be){D.push({lookAround:n.LOOKAROUND_AHEAD,anchor:Ie,charsEnd:I,charsLength:A}),I=T.length,A=T.length-B,S(Je+1,Ie,be);const Te=D.pop();switch(I=Te.charsEnd,A=Te.charsLength,be.phraseLength=0,be.state){case n.EMPTY:case n.MATCH:be.state=n.NOMATCH;break;case n.NOMATCH:be.state=n.EMPTY;break;default:throw new Error(`opNOT: invalid state ${be.state}`)}},me=function(Je,Ie,be){const Te=C[Je];be.state=n.NOMATCH,Ie<I&&Te.min<=T[Ie]&&T[Ie]<=Te.max&&(be.state=n.MATCH,be.phraseLength=1)},Be=function(Je,Ie,be){let Te;const Le=C[Je],We=Le.string.length;if(be.state=n.NOMATCH,Ie+We<=I){for(Te=0;Te<We;Te+=1)if(T[Ie+Te]!==Le.string[Te])return;be.state=n.MATCH,be.phraseLength=We}},ve=function(Je,Ie,be){let Te,Le;const We=C[Je];be.state=n.NOMATCH;const Ze=We.string.length;if(Ze===0){be.state=n.EMPTY;return}if(Ie+Ze<=I){for(Te=0;Te<Ze;Te+=1)if(Le=T[Ie+Te],Le>=65&&Le<=90&&(Le+=32),Le!==We.string[Te])return;be.state=n.MATCH,be.phraseLength=Ze}},Ae=function(Je,Ie,be){be.state=n.NOMATCH,be.phraseLength=0,be.state=Ie===0?n.EMPTY:n.NOMATCH},Ve=function(Je,Ie,be){be.state=n.NOMATCH,be.phraseLength=0,be.state=Ie===T.length?n.EMPTY:n.NOMATCH},Pe=function(Je,Ie,be){let Te,Le,We,Ze;const Qe=C[Je];be.state=n.NOMATCH,Qe.index<U.length?Ze=U[Qe.index].lower:Ze=H[Qe.index-U.length].lower;const St=Qe.bkrMode===n.BKR_MODE_PM?be.pFrame.getPhrase(Ze):be.uFrame.getPhrase(Ze),pt=Qe.bkrCase===n.BKR_MODE_CI;if(St===null)return;const ft=St.phraseIndex,Ut=St.phraseLength;if(Ut===0){be.state=n.EMPTY;return}if(Ie+Ut<=I){if(pt){for(Te=0;Te<Ut;Te+=1)if(Le=T[Ie+Te],We=T[ft+Te],Le>=65&&Le<=90&&(Le+=32),We>=65&&We<=90&&(We+=32),Le!==We)return;be.state=n.MATCH,be.phraseLength=Ut}else for(Te=0;Te<Ut;Te+=1)if(Le=T[Ie+Te],We=T[ft+Te],Le!==We)return;be.state=n.MATCH,be.phraseLength=Ut}},Re=function(Je,Ie,be){switch(D.push({lookAround:n.LOOKAROUND_BEHIND,anchor:Ie}),S(Je+1,Ie,be),D.pop(),be.phraseLength=0,be.state){case n.EMPTY:be.state=n.EMPTY;break;case n.MATCH:be.state=n.EMPTY;break;case n.NOMATCH:be.state=n.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${be.state}`)}},Ne=function(Je,Ie,be){switch(D.push({lookAround:n.LOOKAROUND_BEHIND,anchor:Ie}),S(Je+1,Ie,be),D.pop(),be.phraseLength=0,be.state){case n.EMPTY:case n.MATCH:be.state=n.NOMATCH;break;case n.NOMATCH:be.state=n.EMPTY;break;default:throw new Error(`opBKN: invalid state ${be.state}`)}},qe=function(Je,Ie,be){let Te,Le,We,Ze;const Qe=C[Je],St=be.uFrame.length(),pt=be.pFrame.length();E.ast&&(Le=E.ast.getLength()),Te=!0,We=Ie,Ze=0;for(let ft=Qe.children.length-1;ft>=0;ft-=1)if(S(Qe.children[ft],We,be),We-=be.phraseLength,Ze+=be.phraseLength,be.state===n.NOMATCH){Te=!1;break}Te?(be.state=Ze===0?n.EMPTY:n.MATCH,be.phraseLength=Ze):(be.state=n.NOMATCH,be.phraseLength=0,be.uFrame.pop(St),be.pFrame.pop(pt),E.ast&&E.ast.setLength(Le))},Ke=function(Je,Ie,be){let Te,Le,We,Ze;const Qe=C[Je];Le=Ie,We=0,Ze=0;const St=be.uFrame.length(),pt=be.pFrame.length();E.ast&&(Te=E.ast.getLength());const ft=!0;for(;ft&&!(Le<=0||(S(Je+1,Le,be),be.state===n.NOMATCH)||be.state===n.EMPTY||(Ze+=1,We+=be.phraseLength,Le-=be.phraseLength,Ze===Qe.max)););be.state===n.EMPTY||Ze>=Qe.min?(be.state=We===0?n.EMPTY:n.MATCH,be.phraseLength=We):(be.state=n.NOMATCH,be.phraseLength=0,be.uFrame.pop(St),be.pFrame.pop(pt),E.ast&&E.ast.setLength(Te))},He=function(Je,Ie,be){const Te=C[Je];if(be.state=n.NOMATCH,be.phraseLength=0,Ie>0){const Le=T[Ie-1];Te.min<=Le&&Le<=Te.max&&(be.state=n.MATCH,be.phraseLength=1)}},Ge=function(Je,Ie,be){let Te;const Le=C[Je];be.state=n.NOMATCH;const We=Le.string.length,Ze=Ie-We;if(Ze>=0){for(Te=0;Te<We;Te+=1)if(T[Ze+Te]!==Le.string[Te])return;be.state=n.MATCH,be.phraseLength=We}},rt=function(Je,Ie,be){let Te;const Le=C[Je];be.state=n.NOMATCH;const We=Le.string.length;if(We===0){be.state=n.EMPTY;return}const Ze=Ie-We;if(Ze>=0){for(let Qe=0;Qe<We;Qe+=1)if(Te=T[Ze+Qe],Te>=65&&Te<=90&&(Te+=32),Te!==Le.string[Qe])return;be.state=n.MATCH,be.phraseLength=We}},st=function(Je,Ie,be){let Te,Le,We,Ze;const Qe=C[Je];be.state=n.NOMATCH,be.phraseLength=0,Qe.index<U.length?Ze=U[Qe.index].lower:Ze=H[Qe.index-U.length].lower;const St=Qe.bkrMode===n.BKR_MODE_PM?be.pFrame.getPhrase(Ze):be.uFrame.getPhrase(Ze),pt=Qe.bkrCase===n.BKR_MODE_CI;if(St===null)return;const ft=St.phraseIndex,Ut=St.phraseLength;if(Ut===0){be.state=n.EMPTY,be.phraseLength=0;return}const $t=Ie-Ut;if($t>=0){if(pt){for(Te=0;Te<Ut;Te+=1)if(Le=T[$t+Te],We=T[ft+Te],Le>=65&&Le<=90&&(Le+=32),We>=65&&We<=90&&(We+=32),Le!==We)return;be.state=n.MATCH,be.phraseLength=Ut}else for(Te=0;Te<Ut;Te+=1)if(Le=T[$t+Te],We=T[ft+Te],Le!==We)return;be.state=n.MATCH,be.phraseLength=Ut}};S=function(Ie,be,Te){let Le=!0;const We=C[Ie];if(L+=1,L>re)throw new Error(`parser: maximum number of node hits exceeded: ${re}`);if(M+=1,M>V&&(V=M,V>ne))throw new Error(`parser: maximum parse tree depth exceeded: ${ne}`);if(Te.refresh(),E.trace!==null){const Ze=ie();E.trace.down(We,Te.state,be,Te.phraseLength,Ze.anchor,Ze.lookAround)}if(O())switch(We.type){case n.ALT:te(Ie,be,Te);break;case n.CAT:qe(Ie,be,Te);break;case n.REP:Ke(Ie,be,Te);break;case n.RNM:we(Ie,be,Te);break;case n.UDT:$e(Ie,be,Te);break;case n.AND:ge(Ie,be,Te);break;case n.NOT:Se(Ie,be,Te);break;case n.TRG:He(Ie,be,Te);break;case n.TBS:Ge(Ie,be,Te);break;case n.TLS:rt(Ie,be,Te);break;case n.BKR:st(Ie,be,Te);break;case n.BKA:Re(Ie,be,Te);break;case n.BKN:Ne(Ie,be,Te);break;case n.ABG:Ae(Ie,be,Te);break;case n.AEN:Ve(Ie,be,Te);break;default:Le=!1;break}else switch(We.type){case n.ALT:te(Ie,be,Te);break;case n.CAT:fe(Ie,be,Te);break;case n.REP:he(Ie,be,Te);break;case n.RNM:we(Ie,be,Te);break;case n.UDT:$e(Ie,be,Te);break;case n.AND:ge(Ie,be,Te);break;case n.NOT:Se(Ie,be,Te);break;case n.TRG:me(Ie,be,Te);break;case n.TBS:Be(Ie,be,Te);break;case n.TLS:ve(Ie,be,Te);break;case n.BKR:Pe(Ie,be,Te);break;case n.BKA:Re(Ie,be,Te);break;case n.BKN:Ne(Ie,be,Te);break;case n.ABG:Ae(Ie,be,Te);break;case n.AEN:Ve(Ie,be,Te);break;default:Le=!1;break}if(!W()&&be+Te.phraseLength>Z&&(Z=be+Te.phraseLength),E.stats!==null&&E.stats.collect(We,Te),E.trace!==null){const Ze=ie();E.trace.up(We,Te.state,be,Te.phraseLength,Ze.anchor,Ze.lookAround)}return M-=1,Le}}),parser$1}var stats,hasRequiredStats;function requireStats(){return hasRequiredStats||(hasRequiredStats=1,stats=function(){const n=requireIdentifiers(),_=requireUtilities(),x=requireStyle(),E="stats.js: ";let S=[],C=[];const T=[];let B;const A=[],I=[];this.statsObject="statsObject";const D="stats",M=function(re,X){return re.lower<X.lower?-1:re.lower>X.lower?1:0},V=function(re,X){return re.total<X.total?1:re.total>X.total?-1:M(re,X)},L=function(re,X){return re.index<X.index?-1:re.index>X.index?1:0},F=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},j=function(){T.length=0,B=new F,T[n.ALT]=new F,T[n.CAT]=new F,T[n.REP]=new F,T[n.RNM]=new F,T[n.TRG]=new F,T[n.TBS]=new F,T[n.TLS]=new F,T[n.UDT]=new F,T[n.AND]=new F,T[n.NOT]=new F,T[n.BKR]=new F,T[n.BKA]=new F,T[n.BKN]=new F,T[n.ABG]=new F,T[n.AEN]=new F,A.length=0;for(let re=0;re<S.length;re+=1)A.push({empty:0,match:0,nomatch:0,total:0,name:S[re].name,lower:S[re].lower,index:S[re].index});if(C.length>0){I.length=0;for(let re=0;re<C.length;re+=1)I.push({empty:0,match:0,nomatch:0,total:0,name:C[re].name,lower:C[re].lower,index:C[re].index})}},U=function(re,X){switch(re.total+=1,X){case n.EMPTY:re.empty+=1;break;case n.MATCH:re.match+=1;break;case n.NOMATCH:re.nomatch+=1;break;default:throw new Error(`${E}collect(): incStat(): unrecognized state: ${X}`)}},H=function(re,X){let ce="";return ce+="<tr>",ce+=`<td class="${x.CLASS_ACTIVE}">${re}</td>`,ce+=`<td class="${x.CLASS_EMPTY}">${X.empty}</td>`,ce+=`<td class="${x.CLASS_MATCH}">${X.match}</td>`,ce+=`<td class="${x.CLASS_NOMATCH}">${X.nomatch}</td>`,ce+=`<td class="${x.CLASS_ACTIVE}">${X.total}</td>`,ce+=`</tr>
`,ce},Y=function(){let re="";return re+=H("ALT",T[n.ALT]),re+=H("CAT",T[n.CAT]),re+=H("REP",T[n.REP]),re+=H("RNM",T[n.RNM]),re+=H("TRG",T[n.TRG]),re+=H("TBS",T[n.TBS]),re+=H("TLS",T[n.TLS]),re+=H("UDT",T[n.UDT]),re+=H("AND",T[n.AND]),re+=H("NOT",T[n.NOT]),re+=H("BKR",T[n.BKR]),re+=H("BKA",T[n.BKA]),re+=H("BKN",T[n.BKN]),re+=H("ABG",T[n.ABG]),re+=H("AEN",T[n.AEN]),re+=H("totals",B),re},Z=function(){let re="";re+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,re+=`<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>
`;for(let X=0;X<S.length;X+=1)A[X].total>0&&(re+="<tr>",re+=`<td class="${x.CLASS_ACTIVE}">${A[X].name}</td>`,re+=`<td class="${x.CLASS_EMPTY}">${A[X].empty}</td>`,re+=`<td class="${x.CLASS_MATCH}">${A[X].match}</td>`,re+=`<td class="${x.CLASS_NOMATCH}">${A[X].nomatch}</td>`,re+=`<td class="${x.CLASS_ACTIVE}">${A[X].total}</td>`,re+=`</tr>
`);if(C.length>0){re+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,re+=`<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>
`;for(let X=0;X<C.length;X+=1)I[X].total>0&&(re+="<tr>",re+=`<td class="${x.CLASS_ACTIVE}">${I[X].name}</td>`,re+=`<td class="${x.CLASS_EMPTY}">${I[X].empty}</td>`,re+=`<td class="${x.CLASS_MATCH}">${I[X].match}</td>`,re+=`<td class="${x.CLASS_NOMATCH}">${I[X].nomatch}</td>`,re+=`<td class="${x.CLASS_ACTIVE}">${I[X].total}</td>`,re+=`</tr>
`)}return re};this.validate=function(re){let X=!1;return typeof re=="string"&&D===re&&(X=!0),X},this.init=function(re,X){S=re,C=X,j()},this.collect=function(re,X){U(B,X.state,X.phraseLength),U(T[re.type],X.state,X.phraseLength),re.type===n.RNM&&U(A[re.index],X.state,X.phraseLength),re.type===n.UDT&&U(I[re.index],X.state,X.phraseLength)},this.toHtml=function(re,X){let ce="";ce+=`<table class="${x.CLASS_STATS}">
`,typeof X=="string"&&(ce+=`<caption>${X}</caption>
`),ce+=`<tr><th class="${x.CLASS_ACTIVE}">ops</th>
`,ce+=`<th class="${x.CLASS_EMPTY}">EMPTY</th>
`,ce+=`<th class="${x.CLASS_MATCH}">MATCH</th>
`,ce+=`<th class="${x.CLASS_NOMATCH}">NOMATCH</th>
`,ce+=`<th class="${x.CLASS_ACTIVE}">totals</th></tr>
`;const ue=!0;for(;ue;){if(re===void 0){ce+=Y();break}if(re===null){ce+=Y();break}if(re==="ops"){ce+=Y();break}if(re==="index"){A.sort(L),I.length>0&&I.sort(L),ce+=Y(),ce+=Z();break}if(re==="hits"){A.sort(V),I.length>0&&I.sort(L),ce+=Y(),ce+=Z();break}if(re==="alpha"){A.sort(M),I.length>0&&I.sort(M),ce+=Y(),ce+=Z();break}break}return ce+=`</table>
`,ce},this.toHtmlPage=function(re,X,ce){return _.htmlToPage(this.toHtml(re,X),ce)}}),stats}var trace,hasRequiredTrace;function requireTrace(){return hasRequiredTrace||(hasRequiredTrace=1,trace=function(){const n=requireUtilities(),_=requireStyle(),x=new(requireCircularBuffer()),E=requireIdentifiers(),S="trace.js: ",C=this,T=16,B=10,A=8,I=32,D=80,M=5,V=[];let L=5e3,F=-1,j=0,U=0;const H=[];let Y=null,Z=null,ne=null;const re=[],X=[],ce=`<span class="${_.CLASS_LINEEND}">&bull;</span>`,ue=`<span class="${_.CLASS_LINEEND}">&hellip;</span>`,_e=`<span class="${_.CLASS_EMPTY}">&#120634;</span>`,ye=function(){const xe=function(ge){re[E.ALT]=ge,re[E.CAT]=ge,re[E.REP]=ge,re[E.TLS]=ge,re[E.TBS]=ge,re[E.TRG]=ge,re[E.AND]=ge,re[E.NOT]=ge,re[E.BKR]=ge,re[E.BKA]=ge,re[E.BKN]=ge,re[E.ABG]=ge,re[E.AEN]=ge};let $e=0;for(const ge in C.filter.operators)$e+=1;if($e===0){xe(!1);return}for(const ge in C.filter.operators){const Se=ge.toUpperCase();if(Se==="<ALL>"){xe(!0);return}if(Se==="<NONE>"){xe(!1);return}}xe(!1);for(const ge in C.filter.operators){const Se=ge.toUpperCase();if(Se==="ALT")re[E.ALT]=C.filter.operators[ge]===!0;else if(Se==="CAT")re[E.CAT]=C.filter.operators[ge]===!0;else if(Se==="REP")re[E.REP]=C.filter.operators[ge]===!0;else if(Se==="AND")re[E.AND]=C.filter.operators[ge]===!0;else if(Se==="NOT")re[E.NOT]=C.filter.operators[ge]===!0;else if(Se==="TLS")re[E.TLS]=C.filter.operators[ge]===!0;else if(Se==="TBS")re[E.TBS]=C.filter.operators[ge]===!0;else if(Se==="TRG")re[E.TRG]=C.filter.operators[ge]===!0;else if(Se==="BKR")re[E.BKR]=C.filter.operators[ge]===!0;else if(Se==="BKA")re[E.BKA]=C.filter.operators[ge]===!0;else if(Se==="BKN")re[E.BKN]=C.filter.operators[ge]===!0;else if(Se==="ABG")re[E.ABG]=C.filter.operators[ge]===!0;else if(Se==="AEN")re[E.AEN]=C.filter.operators[ge]===!0;else throw new Error(`${S}initOpratorFilter: '${ge}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`)}},ie=function(){const xe=function(me){re[E.RNM]=me,re[E.UDT]=me;const Be=Z.length+ne.length;X.length=0;for(let ve=0;ve<Be;ve+=1)X.push(me)};let $e,ge;const Se=[];for(ge=0;ge<Z.length;ge+=1)Se.push(Z[ge].lower);for(ge=0;ge<ne.length;ge+=1)Se.push(ne[ge].lower);X.length=0,$e=0;for(const me in C.filter.rules)$e+=1;if($e===0){xe(!0);return}for(const me in C.filter.rules){const Be=me.toLowerCase();if(Be==="<all>"){xe(!0);return}if(Be==="<none>"){xe(!1);return}}xe(!1),re[E.RNM]=!0,re[E.UDT]=!0;for(const me in C.filter.rules){const Be=me.toLowerCase();if(ge=Se.indexOf(Be),ge<0)throw new Error(`${S}initRuleFilter: '${me}' not a valid rule or udt name`);X[ge]=C.filter.rules[me]===!0}};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(xe,$e){if(F=-1,typeof xe=="number"&&xe>0)L=Math.ceil(xe);else{L=0;return}typeof $e=="number"&&(F=Math.floor($e),F<0&&(F=-1))},this.getMaxRecords=function(){return L},this.getLastRecord=function(){return F},this.init=function(xe,$e,ge){V.length=0,H.length=0,j=0,U=0,Y=ge,Z=xe,ne=$e,ye(),ie(),x.init(L)};const W=function(xe){let $e=!1;return xe.type===E.RNM?re[xe.type]&&X[xe.index]?$e=!0:$e=!1:xe.type===E.UDT?re[xe.type]&&X[Z.length+xe.index]?$e=!0:$e=!1:$e=re[xe.type],$e},O=function(xe){return F===-1||xe<=F};this.down=function(xe,$e,ge,Se,me,Be){O(j)&&W(xe)&&(H.push(j),V[x.increment()]={dirUp:!1,depth:U,thisLine:j,thatLine:void 0,opcode:xe,state:$e,phraseIndex:ge,phraseLength:Se,lookAnchor:me,lookAround:Be},j+=1,U+=1)},this.up=function(xe,$e,ge,Se,me,Be){if(O(j)&&W(xe)){const ve=j,Ae=H.pop(),Ve=x.getListIndex(Ae);Ve!==-1&&(V[Ve].thatLine=ve),U-=1,V[x.increment()]={dirUp:!0,depth:U,thisLine:ve,thatLine:Ae,opcode:xe,state:$e,phraseIndex:ge,phraseLength:Se,lookAnchor:me,lookAround:Be},j+=1}};const z=function(){function xe(be,Te){let Le,We,Ze;if(Te)switch(be.op={id:Te.type,name:n.opcodeToString(Te.type)},be.opData=void 0,Te.type){case E.RNM:be.opData=Z[Te.index].name;break;case E.UDT:be.opData=ne[Te.index].name;break;case E.BKR:Te.index<Z.length?Le=Z[Te.index].name:Le=ne[Te.index-Z.length].name,We=Te.bkrCase===E.BKR_MODE_CI?"%i":"%s",Ze=Te.bkrMode===E.BKR_MODE_UM?"%u":"%p",be.opData=`\\\\${We}${Ze}${Le}`;break;case E.TLS:be.opData=[];for(let Qe=0;Qe<Te.string.length;Qe+=1)be.opData.push(Te.string[Qe]);break;case E.TBS:be.opData=[];for(let Qe=0;Qe<Te.string.length;Qe+=1)be.opData.push(Te.string[Qe]);break;case E.TRG:be.opData=[Te.min,Te.max];break;case E.REP:be.opData=[Te.min,Te.max];break;default:throw new Error("unrecognized opcode")}else be.op={id:void 0,name:void 0},be.opData=void 0}function $e(be,Te,Le){return be===E.MATCH?{index:Te,length:Le}:be===E.NOMATCH?{index:Te,length:0}:be===E.EMPTY?{index:Te,length:0}:null}let ge=-1;function Se(be,Te,Le){const We={id:ge++,branch:-1,parent:be,up:!1,down:!1,depth:Le,children:[]};return Te?(We.down=!0,We.state={id:Te.state,name:n.stateToString(Te.state)},We.phrase=null,xe(We,Te.opcode)):(We.state={id:void 0,name:void 0},We.phrase=$e(),xe(We,void 0)),We}function me(be,Te){Te&&(be.up=!0,be.state={id:Te.state,name:n.stateToString(Te.state)},be.phrase=$e(Te.state,Te.phraseIndex,Te.phraseLength),be.down||xe(be,Te.opcode))}let Be=0,ve=-1,Ae=1;function Ve(be){if(ve+=1,be.branch=Ae,ve>U&&(U=ve),be.children.length===0)Be+=1;else for(let Te=0;Te<be.children.length;Te+=1)Te>0&&(Ae+=1),be.children[Te].leftMost=!1,be.children[Te].rightMost=!1,be.leftMost&&(be.children[Te].leftMost=Te===0),be.rightMost&&(be.children[Te].rightMost=Te===be.children.length-1),Ve(be.children[Te]);ve-=1}function Pe(be,Te){let Le;const We={};if(We.id=be.id,We.branch=be.branch,We.leftMost=be.leftMost,We.rightMost=be.rightMost,Le=be.state.name?be.state.name:"ACTIVE",We.state={id:be.state.id,name:Le},Le=be.op.name?be.op.name:"?",We.op={id:be.op.id,name:Le},typeof be.opData=="string")We.opData=be.opData;else if(Array.isArray(be.opData)){We.opData=[];for(let Ze=0;Ze<be.opData.length;Ze+=1)We.opData[Ze]=be.opData[Ze]}else We.opData=void 0;be.phrase?We.phrase={index:be.phrase.index,length:be.phrase.length}:We.phrase=null,We.depth=be.depth,We.children=[];for(let Ze=0;Ze<be.children.length;Ze+=1)be.children.length-1,We.children[Ze]=Pe(be.children[Ze]);return We}const Re=[];let Ne,qe,Ke,He,Ge=!0;const rt=Se(null,null,-1);for(Re.push(rt),qe=rt,x.forEach(be=>{if(He=V[be],Ge&&(Ge=!1,He.depth>0)){const Te=He.dirUp?He.depth+1:He.depth;for(let Le=0;Le<Te;Le+=1)Ke=qe,qe=Se(qe,null,Le),Re.push(qe),Ke.children.push(qe)}He.dirUp?(qe=Re.pop(),me(qe,He),qe=Re[Re.length-1]):(Ke=qe,qe=Se(qe,He,He.depth),Re.push(qe),Ke.children.push(qe))});Re.length>1;)qe=Re.pop(),me(qe,null);if(rt.children.length===0)throw new Error("trace.toTree(): parse tree has no nodes");if(Re.length===0)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");Ne=rt.children[0];let st=Ne;for(;Ne&&!Ne.down&&!Ne.up;)st=Ne,Ne=Ne.children[0];Ne=st,Ne.leftMost=!0,Ne.rightMost=!0,Ve(Ne),Ne.branch=0;const Je={};Je.string=[];for(let be=0;be<Y.length;be+=1)Je.string[be]=Y[be];Je.rules=[];for(let be=0;be<Z.length;be+=1)Je.rules[be]=Z[be].name;Je.udts=[];for(let be=0;be<ne.length;be+=1)Je.udts[be]=ne[be].name;Je.id={},Je.id.ALT={id:E.ALT,name:"ALT"},Je.id.CAT={id:E.CAT,name:"CAT"},Je.id.REP={id:E.REP,name:"REP"},Je.id.RNM={id:E.RNM,name:"RNM"},Je.id.TLS={id:E.TLS,name:"TLS"},Je.id.TBS={id:E.TBS,name:"TBS"},Je.id.TRG={id:E.TRG,name:"TRG"},Je.id.UDT={id:E.UDT,name:"UDT"},Je.id.AND={id:E.AND,name:"AND"},Je.id.NOT={id:E.NOT,name:"NOT"},Je.id.BKR={id:E.BKR,name:"BKR"},Je.id.BKA={id:E.BKA,name:"BKA"},Je.id.BKN={id:E.BKN,name:"BKN"},Je.id.ABG={id:E.ABG,name:"ABG"},Je.id.AEN={id:E.AEN,name:"AEN"},Je.id.ACTIVE={id:E.ACTIVE,name:"ACTIVE"},Je.id.MATCH={id:E.MATCH,name:"MATCH"},Je.id.EMPTY={id:E.EMPTY,name:"EMPTY"},Je.id.NOMATCH={id:E.NOMATCH,name:"NOMATCH"},Je.treeDepth=U,Je.leafNodes=Be;let Ie;return Ne.down?Ne.up?Ie="none":Ie="right":Ne.up?Ie="left":Ie="both",Je.branchesIncomplete=Ie,Je.tree=Pe(Ne,Ne.depth),Je};this.toTree=function(xe){const $e=z();return xe?JSON.stringify($e):$e},this.toHtmlPage=function(xe,$e,ge){return n.htmlToPage(this.toHtml(xe,$e),ge)};const J=function(xe,$e){let ge;switch(xe){case T:ge="hexadecimal";break;case B:ge="decimal";break;case A:ge="ASCII";break;case I:ge="UNICODE";break;default:throw new Error(`${S}htmlHeader: unrecognized mode: ${xe}`)}let Se="";return Se+=`<p>display mode: ${ge}</p>
`,Se+=`<table class="${_.CLASS_TRACE}">
`,typeof $e=="string"&&(Se+=`<caption>${$e}</caption>`),Se},ee=function(){let xe="";return xe+=`</table>
`,xe+=`<p class="${_.CLASS_MONOSPACE}">legend:<br>
`,xe+=`(a)&nbsp;-&nbsp;line number<br>
`,xe+=`(b)&nbsp;-&nbsp;matching line number<br>
`,xe+=`(c)&nbsp;-&nbsp;phrase offset<br>
`,xe+=`(d)&nbsp;-&nbsp;phrase length<br>
`,xe+=`(e)&nbsp;-&nbsp;tree depth<br>
`,xe+=`(f)&nbsp;-&nbsp;operator state<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${_.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${_.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${_.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${_.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
`,xe+=`operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
`,xe+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to ${D} characters of the phrase being matched<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${_.CLASS_MATCH}">matched characters</span><br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${_.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${_.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${_.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${_.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${_e} empty string<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${ce} end of input string<br>
`,xe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${ue} input string display truncated<br>
`,xe+=`</p>
`,xe+=`<p class="${_.CLASS_MONOSPACE}">
`,xe+=`<sup>&dagger;</sup>original ABNF operators:<br>
`,xe+=`ALT - alternation<br>
`,xe+=`CAT - concatenation<br>
`,xe+=`REP - repetition<br>
`,xe+=`RNM - rule name<br>
`,xe+=`TRG - terminal range<br>
`,xe+=`TLS - terminal literal string (case insensitive)<br>
`,xe+=`TBS - terminal binary string (case sensitive)<br>
`,xe+=`<br>
`,xe+=`<sup>&Dagger;</sup>super set SABNF operators:<br>
`,xe+=`UDT - user-defined terminal<br>
`,xe+=`AND - positive look ahead<br>
`,xe+=`NOT - negative look ahead<br>
`,xe+=`BKA - positive look behind<br>
`,xe+=`BKN - negative look behind<br>
`,xe+=`BKR - back reference<br>
`,xe+=`ABG - anchor - begin of input string<br>
`,xe+=`AEN - anchor - end of input string<br>
`,xe+=`</p>
`,xe};this.indent=function(xe){let $e="";for(let ge=0;ge<xe;ge+=1)$e+=".";return $e};const ae=function(xe,$e){let ge="";if($e.type===E.TRG)if(xe===T||xe===I){let Se=$e.min.toString(16).toUpperCase();Se.length%2!==0&&(Se=`0${Se}`),ge+=xe===T?"%x":"U+",ge+=Se,Se=$e.max.toString(16).toUpperCase(),Se.length%2!==0&&(Se=`0${Se}`),ge+=`&ndash;${Se}`}else ge=`%d${$e.min.toString(10)}&ndash;${$e.max.toString(10)}`;return ge},oe=function(xe,$e){let ge="";if($e.type===E.REP)if(xe===T){let Se=$e.min.toString(16).toUpperCase();Se.length%2!==0&&(Se=`0${Se}`),ge=`x${Se}`,$e.max<1/0?(Se=$e.max.toString(16).toUpperCase(),Se.length%2!==0&&(Se=`0${Se}`)):Se="inf",ge+=`&ndash;${Se}`}else $e.max<1/0?ge=`${$e.min.toString(10)}&ndash;${$e.max.toString(10)}`:ge=`${$e.min.toString(10)}&ndash;inf`;return ge},se=function(xe,$e){let ge="";if($e.type===E.TBS){const Se=Math.min($e.string.length,M*2);if(xe===T||xe===I){ge+=xe===T?"%x":"U+";for(let me=0;me<Se;me+=1){let Be;me>0&&(ge+="."),Be=$e.string[me].toString(16).toUpperCase(),Be.length%2!==0&&(Be=`0${Be}`),ge+=Be}}else{ge="%d";for(let me=0;me<Se;me+=1)me>0&&(ge+="."),ge+=$e.string[me].toString(10)}Se<$e.string.length&&(ge+=ue)}return ge},G=function(xe,$e){let ge="";if($e.type===E.TLS){const Se=Math.min($e.string.length,M);if(xe===T||xe===B){let me,Be,ve;xe===T?(ge="%x",ve=16):(ge="%d",ve=10);for(let Ae=0;Ae<Se;Ae+=1)Ae>0&&(ge+="."),Be=$e.string[Ae],Be>=97&&Be<=122?(me=Be-32,ge+=`${me.toString(ve)}/${Be.toString(ve)}`.toUpperCase()):Be>=65&&Be<=90?(me=Be,Be+=32,ge+=`${me.toString(ve)}/${Be.toString(ve)}`.toUpperCase()):ge+=Be.toString(ve).toUpperCase();Se<$e.string.length&&(ge+=ue)}else{ge='"';for(let me=0;me<Se;me+=1)ge+=n.asciiChars[$e.string[me]];Se<$e.string.length&&(ge+=ue),ge+='"'}}return ge},q=function(xe,$e,ge,Se,me){if(Se===0)return"";let Be="";const ve=me?",":"";switch(xe){case T:Be=ve+n.charsToHex($e,ge,Se);break;case B:if(me)return`,${n.charsToDec($e,ge,Se)}`;Be=ve+n.charsToDec($e,ge,Se);break;case I:Be=n.charsToUnicode($e,ge,Se);break;case A:default:Be=n.charsToAsciiHtml($e,ge,Se);break}return Be},te=function(xe,$e,ge,Se,me,Be){let ve="",Ae,Ve,Pe,Re,Ne=ce;const qe=`<span class="${_.CLASS_LOOKBEHIND}">`,Ke=`<span class="${_.CLASS_REMAINDER}">`,He="</span>";let Ge=!1;switch(ge){case E.EMPTY:ve+=_e;case E.NOMATCH:case E.MATCH:case E.ACTIVE:Ae=Se-me,Ve=Be-Ae,Pe=Be,Re=$e.length-Pe;break;default:throw new Error("unrecognized state")}return Ne=ce,Ve>D?(Ve=D,Ne=ue,Re=0):Ve+Re>D&&(Ne=ue,Re=D-Ve),Ve>0&&(ve+=qe,ve+=q(xe,$e,Ae,Ve,Ge),ve+=He,Ge=!0),Re>0&&(ve+=Ke,ve+=q(xe,$e,Pe,Re,Ge),ve+=He),ve+Ne},fe=function(xe,$e,ge,Se,me,Be){let ve="",Ae,Ve,Pe,Re,Ne=ce;const qe=`<span class="${_.CLASS_REMAINDER}">`,Ke="</span>";let He=!1;switch(ge){case E.EMPTY:ve+=_e;case E.NOMATCH:case E.ACTIVE:Ae=Se,Ve=0,Pe=Se,Re=$e.length-Pe;break;case E.MATCH:Ae=Se,Ve=me,Pe=Se+Ve,Re=$e.length-Pe;break;default:throw new Error("unrecognized state")}return Ne=ce,Ve>D?(Ve=D,Ne=ue,Re=0):Ve+Re>D&&(Ne=ue,Re=D-Ve),Ve>0&&(ve+=Be,ve+=q(xe,$e,Ae,Ve,He),ve+=Ke,He=!0),Re>0&&(ve+=qe,ve+=q(xe,$e,Pe,Re,He),ve+=Ke),ve+Ne},he=function(xe,$e,ge,Se,me){const Be=`<span class="${_.CLASS_LOOKAHEAD}">`;return fe(xe,$e,ge,Se,me,Be)},Ee=function(xe,$e,ge,Se,me){const Be=`<span class="${_.CLASS_MATCH}">`;return fe(xe,$e,ge,Se,me,Be)},we=function(xe){if(Z===null)return"";let $e="",ge,Se,me,Be,ve,Ae;return $e+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",$e+=`<th>operator</th><th>phrase</th></tr>
`,x.forEach(Ve=>{const Pe=V[Ve];switch(ge=Pe.thisLine,Se=Pe.thatLine!==void 0?Pe.thatLine:"--",me=!1,Be=!1,ve=!1,Pe.lookAround===E.LOOKAROUND_AHEAD&&(me=!0,ve=!0,Ae=Pe.lookAnchor),(Pe.opcode.type===E.AND||Pe.opcode.type===E.NOT)&&(me=!0,ve=!0,Ae=Pe.phraseIndex),Pe.lookAround===E.LOOKAROUND_BEHIND&&(Be=!0,ve=!0,Ae=Pe.lookAnchor),(Pe.opcode.type===E.BKA||Pe.opcode.type===E.BKN)&&(Be=!0,ve=!0,Ae=Pe.phraseIndex),$e+="<tr>",$e+=`<td>${ge}</td><td>${Se}</td>`,$e+=`<td>${Pe.phraseIndex}</td>`,$e+=`<td>${Pe.phraseLength}</td>`,$e+=`<td>${Pe.depth}</td>`,$e+="<td>",Pe.state){case E.ACTIVE:$e+=`<span class="${_.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case E.MATCH:$e+=`<span class="${_.CLASS_MATCH}">&uarr;M</span>`;break;case E.NOMATCH:$e+=`<span class="${_.CLASS_NOMATCH}">&uarr;N</span>`;break;case E.EMPTY:$e+=`<span class="${_.CLASS_EMPTY}">&uarr;E</span>`;break;default:$e+=`<span class="${_.CLASS_ACTIVE}">--</span>`;break}if($e+="</td>",$e+="<td>",$e+=C.indent(Pe.depth),me?$e+=`<span class="${_.CLASS_LOOKAHEAD}">`:Be&&($e+=`<span class="${_.CLASS_LOOKBEHIND}">`),$e+=n.opcodeToString(Pe.opcode.type),Pe.opcode.type===E.RNM&&($e+=`(${Z[Pe.opcode.index].name}) `),Pe.opcode.type===E.BKR){const Re=Pe.opcode.bkrCase===E.BKR_MODE_CI?"%i":"%s",Ne=Pe.opcode.bkrMode===E.BKR_MODE_UM?"%u":"%p";$e+=`(\\${Re}${Ne}${Z[Pe.opcode.index].name}) `}Pe.opcode.type===E.UDT&&($e+=`(${ne[Pe.opcode.index].name}) `),Pe.opcode.type===E.TRG&&($e+=`(${ae(xe,Pe.opcode)}) `),Pe.opcode.type===E.TBS&&($e+=`(${se(xe,Pe.opcode)}) `),Pe.opcode.type===E.TLS&&($e+=`(${G(xe,Pe.opcode)}) `),Pe.opcode.type===E.REP&&($e+=`(${oe(xe,Pe.opcode)}) `),ve&&($e+="</span>"),$e+="</td>",$e+="<td>",Be?$e+=te(xe,Y,Pe.state,Pe.phraseIndex,Pe.phraseLength,Ae):me?$e+=he(xe,Y,Pe.state,Pe.phraseIndex,Pe.phraseLength):$e+=Ee(xe,Y,Pe.state,Pe.phraseIndex,Pe.phraseLength),$e+=`</td></tr>
`}),$e+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",$e+=`<th>operator</th><th>phrase</th></tr>
`,$e+=`</table>
`,$e};this.toHtml=function(xe,$e){let ge=A;if(typeof xe=="string"&&xe.length>=3){const me=xe.toLowerCase().slice(0,3);me==="hex"?ge=T:me==="dec"?ge=B:me==="uni"&&(ge=I)}let Se="";return Se+=J(ge,$e),Se+=we(ge),Se+=ee(),Se}}),trace}var nodeExports,hasRequiredNodeExports;function requireNodeExports(){return hasRequiredNodeExports||(hasRequiredNodeExports=1,nodeExports={ast:requireAst(),circular:requireCircularBuffer(),ids:requireIdentifiers(),parser:requireParser$1(),stats:requireStats(),trace:requireTrace(),utils:requireUtilities(),emitcss:requireEmitcss(),style:requireStyle()}),nodeExports}var scannerGrammar,hasRequiredScannerGrammar;function requireScannerGrammar(){return hasRequiredScannerGrammar||(hasRequiredScannerGrammar=1,scannerGrammar=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"file",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"line",lower:"line",index:1,isBkr:!1},this.rules[2]={name:"line-text",lower:"line-text",index:2,isBkr:!1},this.rules[3]={name:"last-line",lower:"last-line",index:3,isBkr:!1},this.rules[4]={name:"valid",lower:"valid",index:4,isBkr:!1},this.rules[5]={name:"invalid",lower:"invalid",index:5,isBkr:!1},this.rules[6]={name:"end",lower:"end",index:6,isBkr:!1},this.rules[7]={name:"CRLF",lower:"crlf",index:7,isBkr:!1},this.rules[8]={name:"LF",lower:"lf",index:8,isBkr:!1},this.rules[9]={name:"CR",lower:"cr",index:9,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,3]},this.rules[0].opcodes[1]={type:3,min:0,max:1/0},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:3,min:0,max:1},this.rules[0].opcodes[4]={type:4,index:3},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,2]},this.rules[1].opcodes[1]={type:4,index:2},this.rules[1].opcodes[2]={type:4,index:6},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:3,min:0,max:1/0},this.rules[2].opcodes[1]={type:1,children:[2,3]},this.rules[2].opcodes[2]={type:4,index:4},this.rules[2].opcodes[3]={type:4,index:5},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:3,min:1,max:1/0},this.rules[3].opcodes[1]={type:1,children:[2,3]},this.rules[3].opcodes[2]={type:4,index:4},this.rules[3].opcodes[3]={type:4,index:5},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:5,min:32,max:126},this.rules[4].opcodes[2]={type:6,string:[9]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[5].opcodes[1]={type:5,min:0,max:8},this.rules[5].opcodes[2]={type:5,min:11,max:12},this.rules[5].opcodes[3]={type:5,min:14,max:31},this.rules[5].opcodes[4]={type:5,min:127,max:4294967295},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:1,children:[1,2,3]},this.rules[6].opcodes[1]={type:4,index:7},this.rules[6].opcodes[2]={type:4,index:8},this.rules[6].opcodes[3]={type:4,index:9},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:6,string:[13,10]},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:6,string:[10]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:6,string:[13]},this.toString=function(){let _="";return _+=`file = *line [last-line]
`,_+=`line = line-text end
`,_+=`line-text = *(valid/invalid)
`,_+=`last-line = 1*(valid/invalid)
`,_+=`valid = %d32-126 / %d9
`,_+=`invalid = %d0-8 / %d11-12 /%d14-31 / %x7f-ffffffff
`,_+=`end = CRLF / LF / CR
`,_+=`CRLF = %d13.10
`,_+=`LF = %d10
`,_+=`CR = %d13
`,_}}),scannerGrammar}var scannerCallbacks={},hasRequiredScannerCallbacks;function requireScannerCallbacks(){if(hasRequiredScannerCallbacks)return scannerCallbacks;hasRequiredScannerCallbacks=1;const t=requireIdentifiers(),n=requireUtilities();function _(D,M,V,L,F){return D===t.SEM_PRE?(F.endLength=0,F.textLength=0,F.invalidCount=0):F.lines.push({lineNo:F.lines.length,beginChar:V,length:L,textLength:F.textLength,endType:F.endType,invalidChars:F.invalidCount}),t.SEM_OK}function x(D,M,V,L,F){return D===t.SEM_PRE&&(F.textLength=L),t.SEM_OK}function E(D,M,V,L,F){return D===t.SEM_PRE?(F.endLength=0,F.textLength=0,F.invalidCount=0):F.strict?(F.lines.push({lineNo:F.lines.length,beginChar:V,length:L,textLength:L,endType:"none",invalidChars:F.invalidCount}),F.errors.push({line:F.lineNo,char:V+L,msg:"no line end on last line - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})):(M.push(10),F.lines.push({lineNo:F.lines.length,beginChar:V,length:L+1,textLength:L,endType:"LF",invalidChars:F.invalidCount})),t.SEM_OK}function S(D,M,V,L,F){return D===t.SEM_PRE&&F.errors.push({line:F.lineNo,char:V,msg:`invalid character found '\\x${n.charToHex(M[V])}'`}),t.SEM_OK}function C(D,M,V,L,F){return D===t.SEM_POST&&(F.lineNo+=1),t.SEM_OK}function T(D,M,V,L,F){return D===t.SEM_PRE&&(F.endType="LF",F.strict&&F.errors.push({line:F.lineNo,char:V,msg:"line end character LF(\\n, \\x0A) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),t.SEM_OK}function B(D,M,V,L,F){return D===t.SEM_PRE&&(F.endType="CR",F.strict&&F.errors.push({line:F.lineNo,char:V,msg:"line end character CR(\\r, \\x0D) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),t.SEM_OK}function A(D,M,V,L,F){return D===t.SEM_PRE&&(F.endType="CRLF"),t.SEM_OK}const I=[];return I.line=_,I["line-text"]=x,I["last-line"]=E,I.invalid=S,I.end=C,I.lf=T,I.cr=B,I.crlf=A,scannerCallbacks.callbacks=I,scannerCallbacks}var scanner,hasRequiredScanner;function requireScanner(){return hasRequiredScanner||(hasRequiredScanner=1,scanner=function(n,_,x,E){const S="scanner.js: ",C=requireNodeExports(),T=new(requireScannerGrammar()),{callbacks:B}=requireScannerCallbacks(),A=[],I=new C.parser;if(I.ast=new C.ast,I.ast.callbacks=B,E){if(E.traceObject!=="traceObject")throw new TypeError(`${S}trace argument is not a trace object`);I.trace=E}if(I.parse(T,"file",n).success!==!0){_.push({line:0,char:0,msg:"syntax analysis error analyzing input SABNF grammar"});return}const M={lines:A,lineNo:0,errors:_,strict:!!x};return I.ast.translate(M),A}),scanner}var syntaxCallbacks,hasRequiredSyntaxCallbacks;function requireSyntaxCallbacks(){return hasRequiredSyntaxCallbacks||(hasRequiredSyntaxCallbacks=1,syntaxCallbacks=function(){const n="syntax-callbacks.js: ",_=requireNodeExports(),x=_.ids;let E;const S=function(G,q,te,fe){switch(G.state){case x.ACTIVE:fe.altStack=[],fe.repCount=0;break;case x.EMPTY:fe.errors.push({line:0,char:0,msg:"grammar file is empty"});break;case x.MATCH:fe.ruleCount===0&&fe.errors.push({line:0,char:0,msg:"no rules defined"});break;case x.NOMATCH:throw new Error(`${n}synFile: grammar file NOMATCH: design error: should never happen.`);default:throw new Error(`${n}synFile: unrecognized case.`)}},C=function(se,G,q,te){switch(se.state){case x.ACTIVE:te.altStack.length=0,E={groupOpen:null,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},te.altStack.push(E);break;case x.EMPTY:throw new Error(`${n}synRule: EMPTY: rule cannot be empty`);case x.NOMATCH:break;case x.MATCH:te.ruleCount+=1;break;default:throw new Error(`${n}synFile: unrecognized case.`)}},T=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:"Unrecognized SABNF line. Invalid rule, comment or blank line."});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},B=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:"Rule names must be alphanum and begin with alphabetic character."});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},A=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:"Expected '=' or '=/'. Not found."});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},I=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.strict&&te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:"AND operator(&) found - strict ABNF specified."});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},D=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.strict&&te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:"NOT operator(!) found - strict ABNF specified."});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},M=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.strict&&te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:"Positive look-behind operator(&&) found - strict ABNF specified."});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},V=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.strict&&te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:"Negative look-behind operator(!!) found - strict ABNF specified."});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},L=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.strict&&te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:"Beginning of string anchor(%^) found - strict ABNF specified."});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},F=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.strict&&te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:"End of string anchor(%$) found - strict ABNF specified."});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},j=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:if(te.strict){const fe=_.utils.charsToString(G,q,se.phraseLength);te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:`Back reference operator(${fe}) found - strict ABNF specified.`})}break;default:throw new Error(`${n}synFile: unrecognized case.`)}},U=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:if(te.strict){const fe=_.utils.charsToString(G,q,se.phraseLength);te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:`UDT operator found(${fe}) - strict ABNF specified.`})}break;default:throw new Error(`${n}synFile: unrecognized case.`)}},H=function(se,G,q){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:E.tlsOpen=q;break;default:throw new Error(`${n}synFile: unrecognized case.`)}},Y=function(se,G,q,te){switch(se.state){case x.ACTIVE:te.stringTabChar=!1;break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.stringTabChar!==!1&&te.errors.push({line:te.findLine(te.lines,te.stringTabChar),char:te.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string (see 'quoted-string' definition, RFC 7405.)"});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},Z=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.stringTabChar=q;break;default:throw new Error(`${n}synFile: unrecognized case.`)}},ne=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:te.errors.push({line:te.findLine(te.lines,E.tlsOpen),char:E.tlsOpen,msg:'Case-insensitive literal string("...") opened but not closed.'}),E.basicError=!0,E.tlsOpen=null;break;case x.MATCH:E.tlsOpen=null;break;default:throw new Error(`${n}synFile: unrecognized case.`)}},re=function(se,G,q){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:E.clsOpen=q;break;default:throw new Error(`${n}synFile: unrecognized case.`)}},X=function(se,G,q,te){switch(se.state){case x.ACTIVE:te.stringTabChar=!1;break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.stringTabChar!==!1&&te.errors.push({line:te.findLine(te.lines,te.stringTabChar),char:te.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string."});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},ce=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:te.errors.push({line:te.findLine(te.lines,E.clsOpen),char:E.clsOpen,msg:"Case-sensitive literal string('...') opened but not closed."}),E.clsOpen=null,E.basicError=!0;break;case x.MATCH:te.strict&&te.errors.push({line:te.findLine(te.lines,E.clsOpen),char:E.clsOpen,msg:"Case-sensitive string operator('...') found - strict ABNF specified."}),E.clsOpen=null;break;default:throw new Error(`${n}synFile: unrecognized case.`)}},ue=function(se,G,q){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:E.prosValOpen=q;break;default:throw new Error(`${n}synFile: unrecognized case.`)}},_e=function(se,G,q,te){switch(se.state){case x.ACTIVE:te.stringTabChar=!1;break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.stringTabChar!==!1&&te.errors.push({line:te.findLine(te.lines,te.stringTabChar),char:te.stringTabChar,msg:"Tab character (\\t, x09) not allowed in prose value string."});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},ye=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:te.errors.push({line:te.findLine(te.lines,E.prosValOpen),char:E.prosValOpen,msg:"Prose value operator(<...>) opened but not closed."}),E.basicError=!0,E.prosValOpen=null;break;case x.MATCH:te.errors.push({line:te.findLine(te.lines,E.prosValOpen),char:E.prosValOpen,msg:"Prose value operator(<...>) found. The ABNF syntax is valid, but a parser cannot be generated from this grammar."}),E.prosValOpen=null;break;default:throw new Error(`${n}synFile: unrecognized case.`)}},ie=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:E={groupOpen:q,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},te.altStack.push(E);break;default:throw new Error(`${n}synFile: unrecognized case.`)}},W=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:te.errors.push({line:te.findLine(te.lines,E.groupOpen),char:E.groupOpen,msg:'Group "(...)" opened but not closed.'}),E=te.altStack.pop(),E.groupError=!0;break;case x.MATCH:E=te.altStack.pop();break;default:throw new Error(`${n}synFile: unrecognized case.`)}},O=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:E={groupOpen:null,groupError:!1,optionOpen:q,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},te.altStack.push(E);break;default:throw new Error(`${n}synFile: unrecognized case.`)}},z=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:te.errors.push({line:te.findLine(te.lines,E.optionOpen),char:E.optionOpen,msg:'Option "[...]" opened but not closed.'}),E=te.altStack.pop(),E.optionError=!0;break;case x.MATCH:E=te.altStack.pop();break;default:throw new Error(`${n}synFile: unrecognized case.`)}},J=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:E.basicError===!1&&te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:"Unrecognized SABNF element."});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},ee=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:if(se.phraseLength===1&&te.strict){const fe=G[q]===13?"CR":"LF";te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:`Line end '${fe}' found - strict ABNF specified, only CRLF allowed.`})}break;default:throw new Error(`${n}synFile: unrecognized case.`)}},ae=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:break;case x.MATCH:te.errors.push({line:te.findLine(te.lines,q,te.charsLength),char:q,msg:"Unrecognized grammar element or characters."});break;default:throw new Error(`${n}synFile: unrecognized case.`)}},oe=function(se,G,q,te){switch(se.state){case x.ACTIVE:break;case x.EMPTY:break;case x.NOMATCH:te.repCount+=1;break;case x.MATCH:te.repCount+=1;break;default:throw new Error(`${n}synFile: unrecognized case.`)}};this.callbacks=[],this.callbacks.andop=I,this.callbacks.basicelementerr=J,this.callbacks.clsclose=ce,this.callbacks.clsopen=re,this.callbacks.clsstring=X,this.callbacks.definedaserror=A,this.callbacks.file=S,this.callbacks.groupclose=W,this.callbacks.groupopen=ie,this.callbacks.lineenderror=ae,this.callbacks.lineend=ee,this.callbacks.notop=D,this.callbacks.optionclose=z,this.callbacks.optionopen=O,this.callbacks.prosvalclose=ye,this.callbacks.prosvalopen=ue,this.callbacks.prosvalstring=_e,this.callbacks.repetition=oe,this.callbacks.rule=C,this.callbacks.ruleerror=T,this.callbacks.rulenameerror=B,this.callbacks.stringtab=Z,this.callbacks.tlsclose=ne,this.callbacks.tlsopen=H,this.callbacks.tlsstring=Y,this.callbacks.udtop=U,this.callbacks.bkaop=M,this.callbacks.bknop=V,this.callbacks.bkrop=j,this.callbacks.abgop=L,this.callbacks.aenop=F}),syntaxCallbacks}var semanticCallbacks,hasRequiredSemanticCallbacks;function requireSemanticCallbacks(){return hasRequiredSemanticCallbacks||(hasRequiredSemanticCallbacks=1,semanticCallbacks=function(){const n=requireNodeExports(),_=n.ids,x=function(){this.names=[],this.add=function(Pe){let Re=-1;return this.get(Pe)===-1&&(Re={name:Pe,lower:Pe.toLowerCase(),index:this.names.length},this.names.push(Re)),Re},this.get=function(Pe){let Re=-1;const Ne=Pe.toLowerCase();for(let qe=0;qe<this.names.length;qe+=1)if(this.names[qe].lower===Ne){Re=this.names[qe];break}return Re}},E=function(Ve,Pe,Re){let Ne=0;for(let qe=Pe;qe<Pe+Re;qe+=1)Ne=10*Ne+Ve[qe]-48;return Ne},S=function(Ve,Pe,Re){let Ne=0;for(let qe=Pe;qe<Pe+Re;qe+=1)Ne=2*Ne+Ve[qe]-48;return Ne},C=function(Ve,Pe,Re){let Ne=0;for(let qe=Pe;qe<Pe+Re;qe+=1){let Ke=Ve[qe];if(Ke>=48&&Ke<=57)Ke-=48;else if(Ke>=65&&Ke<=70)Ke-=55;else if(Ke>=97&&Ke<=102)Ke-=87;else throw new Error("hexnum out of range");Ne=16*Ne+Ke}return Ne};function T(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;if(Ae===_.SEM_PRE)Ne.ruleNames=new x,Ne.udtNames=new x,Ne.rules=[],Ne.udts=[],Ne.rulesLineMap=[],Ne.opcodes=[],Ne.altStack=[],Ne.topStack=null,Ne.topRule=null;else if(Ae===_.SEM_POST){let Ke;Ne.rules.forEach(He=>{He.isBkr=!1,He.opcodes.forEach(Ge=>{Ge.type===_.RNM&&(Ke=Ne.ruleNames.get(Ge.index.name),Ke===-1?(Ne.errors.push({line:Ne.findLine(Ne.lines,Ge.index.phraseIndex,Ne.charsLength),char:Ge.index.phraseIndex,msg:`Rule name '${Ge.index.name}' used but not defined.`}),Ge.index=-1):Ge.index=Ke.index)})}),Ne.udts.forEach(He=>{He.isBkr=!1}),Ne.rules.forEach(He=>{He.opcodes.forEach(Ge=>{Ge.type===_.BKR&&(He.hasBkr=!0,Ke=Ne.ruleNames.get(Ge.index.name),Ke!==-1?(Ne.rules[Ke.index].isBkr=!0,Ge.index=Ke.index):(Ke=Ne.udtNames.get(Ge.index.name),Ke!==-1?(Ne.udts[Ke.index].isBkr=!0,Ge.index=Ne.rules.length+Ke.index):(Ne.errors.push({line:Ne.findLine(Ne.lines,Ge.index.phraseIndex,Ne.charsLength),char:Ge.index.phraseIndex,msg:`Back reference name '${Ge.index.name}' refers to undefined rule or unamed UDT.`}),Ge.index=-1)))})})}return qe}function B(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_PRE&&(Ne.altStack.length=0,Ne.topStack=null,Ne.rulesLineMap.push({line:Ne.findLine(Ne.lines,Pe,Ne.charsLength),char:Pe})),qe}function A(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;if(Ae===_.SEM_PRE)Ne.ruleName="",Ne.definedas="";else if(Ae===_.SEM_POST){let Ke;Ne.definedas==="="?(Ke=Ne.ruleNames.add(Ne.ruleName),Ke===-1?(Ne.definedas=null,Ne.errors.push({line:Ne.findLine(Ne.lines,Pe,Ne.charsLength),char:Pe,msg:`Rule name '${Ne.ruleName}' previously defined.`})):(Ne.topRule={name:Ke.name,lower:Ke.lower,opcodes:[],index:Ke.index},Ne.rules.push(Ne.topRule),Ne.opcodes=Ne.topRule.opcodes)):(Ke=Ne.ruleNames.get(Ne.ruleName),Ke===-1?(Ne.definedas=null,Ne.errors.push({line:Ne.findLine(Ne.lines,Pe,Ne.charsLength),char:Pe,msg:`Rule name '${Ne.ruleName}' for incremental alternate not previously defined.`})):(Ne.topRule=Ne.rules[Ke.index],Ne.opcodes=Ne.topRule.opcodes))}return qe}function I(Ae,Ve,Pe,Re,Ne){let qe=_.SEM_OK;if(Ae===_.SEM_PRE)for(;;){if(Ne.definedas===null){qe=_.SEM_SKIP;break}if(Ne.topStack===null){if(Ne.definedas==="="){Ne.topStack={alt:{type:_.ALT,children:[]},cat:null},Ne.altStack.push(Ne.topStack),Ne.opcodes.push(Ne.topStack.alt);break}Ne.topStack={alt:Ne.opcodes[0],cat:null},Ne.altStack.push(Ne.topStack);break}Ne.topStack={alt:{type:_.ALT,children:[]},cat:null},Ne.altStack.push(Ne.topStack),Ne.opcodes.push(Ne.topStack.alt);break}else Ae===_.SEM_POST&&(Ne.altStack.pop(),Ne.altStack.length>0?Ne.topStack=Ne.altStack[Ne.altStack.length-1]:Ne.topStack=null);return qe}function D(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_PRE?(Ne.topStack.alt.children.push(Ne.opcodes.length),Ne.topStack.cat={type:_.CAT,children:[]},Ne.opcodes.push(Ne.topStack.cat)):Ae===_.SEM_POST&&(Ne.topStack.cat=null),qe}function M(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_PRE&&Ne.topStack.cat.children.push(Ne.opcodes.length),qe}function V(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&Ne.opcodes.push({type:_.REP,min:0,max:1,char:Pe}),qe}function L(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_PRE&&(Ne.ruleName=n.utils.charsToString(Ve,Pe,Re)),qe}function F(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.definedas="="),qe}function j(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.definedas="=/"),qe}function U(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_PRE?(Ne.min=0,Ne.max=1/0,Ne.topRep={type:_.REP,min:0,max:1/0},Ne.opcodes.push(Ne.topRep)):Ae===_.SEM_POST&&(Ne.min>Ne.max&&Ne.errors.push({line:Ne.findLine(Ne.lines,Pe,Ne.charsLength),char:Pe,msg:`repetition min cannot be greater than max: min: ${Ne.min}: max: ${Ne.max}`}),Ne.topRep.min=Ne.min,Ne.topRep.max=Ne.max),qe}function H(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.min=E(Ve,Pe,Re)),qe}function Y(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.max=E(Ve,Pe,Re)),qe}function Z(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.max=E(Ve,Pe,Re),Ne.min=Ne.max),qe}function ne(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&Ne.opcodes.push({type:_.AND}),qe}function re(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&Ne.opcodes.push({type:_.NOT}),qe}function X(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&Ne.opcodes.push({type:_.RNM,index:{phraseIndex:Pe,name:n.utils.charsToString(Ve,Pe,Re)}}),qe}function ce(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&Ne.opcodes.push({type:_.ABG}),qe}function ue(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&Ne.opcodes.push({type:_.AEN}),qe}function _e(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&Ne.opcodes.push({type:_.BKA}),qe}function ye(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&Ne.opcodes.push({type:_.BKN}),qe}function ie(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_PRE?(Ne.ci=!0,Ne.cs=!1,Ne.um=!0,Ne.pm=!1):Ae===_.SEM_POST&&Ne.opcodes.push({type:_.BKR,bkrCase:Ne.cs===!0?_.BKR_MODE_CS:_.BKR_MODE_CI,bkrMode:Ne.pm===!0?_.BKR_MODE_PM:_.BKR_MODE_UM,index:{phraseIndex:Ne.bkrname.phraseIndex,name:n.utils.charsToString(Ve,Ne.bkrname.phraseIndex,Ne.bkrname.phraseLength)}}),qe}function W(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.ci=!0),qe}function O(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.cs=!0),qe}function z(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.um=!0),qe}function J(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.pm=!0),qe}function ee(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.bkrname={phraseIndex:Pe,phraseLength:Re}),qe}function ae(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;if(Ae===_.SEM_POST){const Ke=n.utils.charsToString(Ve,Pe,Re);let He=Ne.udtNames.add(Ke);if(He===-1){if(He=Ne.udtNames.get(Ke),He===-1)throw new Error("semUdtEmpty: name look up error")}else Ne.udts.push({name:He.name,lower:He.lower,index:He.index,empty:!0});Ne.opcodes.push({type:_.UDT,empty:!0,index:He.index})}return qe}function oe(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;if(Ae===_.SEM_POST){const Ke=n.utils.charsToString(Ve,Pe,Re);let He=Ne.udtNames.add(Ke);if(He===-1){if(He=Ne.udtNames.get(Ke),He===-1)throw new Error("semUdtNonEmpty: name look up error")}else Ne.udts.push({name:He.name,lower:He.lower,index:He.index,empty:!1});Ne.opcodes.push({type:_.UDT,empty:!1,index:He.index,syntax:null,semantic:null})}return qe}function se(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_PRE&&(Ne.tlscase=!0),qe}function G(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&Re>0&&(Ve[Pe+1]===83||Ve[Pe+1]===115)&&(Ne.tlscase=!1),qe}function q(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;if(Ae===_.SEM_POST)if(Ne.tlscase){const Ke=Ve.slice(Pe,Pe+Re);for(let He=0;He<Ke.length;He+=1)Ke[He]>=65&&Ke[He]<=90&&(Ke[He]+=32);Ne.opcodes.push({type:_.TLS,string:Ke})}else Ne.opcodes.push({type:_.TBS,string:Ve.slice(Pe,Pe+Re)});return qe}function te(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Re<=2?Ne.opcodes.push({type:_.TLS,string:[]}):Ne.opcodes.push({type:_.TBS,string:Ve.slice(Pe+1,Pe+Re-1)})),qe}function fe(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_PRE?Ne.tbsstr=[]:Ae===_.SEM_POST&&Ne.opcodes.push({type:_.TBS,string:Ne.tbsstr}),qe}function he(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_PRE?(Ne.min=0,Ne.max=0):Ae===_.SEM_POST&&(Ne.min>Ne.max&&Ne.errors.push({line:Ne.findLine(Ne.lines,Pe,Ne.charsLength),char:Pe,msg:`TRG, (%dmin-max), min cannot be greater than max: min: ${Ne.min}: max: ${Ne.max}`}),Ne.opcodes.push({type:_.TRG,min:Ne.min,max:Ne.max})),qe}function Ee(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.min=E(Ve,Pe,Re)),qe}function we(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.max=E(Ve,Pe,Re)),qe}function xe(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.min=S(Ve,Pe,Re)),qe}function $e(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.max=S(Ve,Pe,Re)),qe}function ge(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.min=C(Ve,Pe,Re)),qe}function Se(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&(Ne.max=C(Ve,Pe,Re)),qe}function me(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&Ne.tbsstr.push(E(Ve,Pe,Re)),qe}function Be(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&Ne.tbsstr.push(S(Ve,Pe,Re)),qe}function ve(Ae,Ve,Pe,Re,Ne){const qe=_.SEM_OK;return Ae===_.SEM_POST&&Ne.tbsstr.push(C(Ve,Pe,Re)),qe}this.callbacks=[],this.callbacks.abgop=ce,this.callbacks.aenop=ue,this.callbacks.alternation=I,this.callbacks.andop=ne,this.callbacks.bmax=$e,this.callbacks.bmin=xe,this.callbacks.bkaop=_e,this.callbacks.bknop=ye,this.callbacks.bkrop=ie,this.callbacks["bkr-name"]=ee,this.callbacks.bstring=Be,this.callbacks.clsop=te,this.callbacks.ci=W,this.callbacks.cs=O,this.callbacks.um=z,this.callbacks.pm=J,this.callbacks.concatenation=D,this.callbacks.defined=F,this.callbacks.dmax=we,this.callbacks.dmin=Ee,this.callbacks.dstring=me,this.callbacks.file=T,this.callbacks.incalt=j,this.callbacks.notop=re,this.callbacks.optionopen=V,this.callbacks["rep-max"]=Y,this.callbacks["rep-min"]=H,this.callbacks["rep-min-max"]=Z,this.callbacks.repetition=M,this.callbacks.repop=U,this.callbacks.rnmop=X,this.callbacks.rule=B,this.callbacks.rulelookup=A,this.callbacks.rulename=L,this.callbacks.tbsop=fe,this.callbacks.tlscase=G,this.callbacks.tlsstring=q,this.callbacks.tlsop=se,this.callbacks.trgop=he,this.callbacks["udt-empty"]=ae,this.callbacks["udt-non-empty"]=oe,this.callbacks.xmax=Se,this.callbacks.xmin=ge,this.callbacks.xstring=ve}),semanticCallbacks}var sabnfGrammar,hasRequiredSabnfGrammar;function requireSabnfGrammar(){return hasRequiredSabnfGrammar||(hasRequiredSabnfGrammar=1,sabnfGrammar=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={name:"Dec",lower:"dec",index:76,isBkr:!1},this.rules[77]={name:"Hex",lower:"hex",index:77,isBkr:!1},this.rules[78]={name:"Bin",lower:"bin",index:78,isBkr:!1},this.rules[79]={name:"dmin",lower:"dmin",index:79,isBkr:!1},this.rules[80]={name:"dmax",lower:"dmax",index:80,isBkr:!1},this.rules[81]={name:"bmin",lower:"bmin",index:81,isBkr:!1},this.rules[82]={name:"bmax",lower:"bmax",index:82,isBkr:!1},this.rules[83]={name:"xmin",lower:"xmin",index:83,isBkr:!1},this.rules[84]={name:"xmax",lower:"xmax",index:84,isBkr:!1},this.rules[85]={name:"dnum",lower:"dnum",index:85,isBkr:!1},this.rules[86]={name:"bnum",lower:"bnum",index:86,isBkr:!1},this.rules[87]={name:"xnum",lower:"xnum",index:87,isBkr:!1},this.rules[88]={name:"alphanum",lower:"alphanum",index:88,isBkr:!1},this.rules[89]={name:"owsp",lower:"owsp",index:89,isBkr:!1},this.rules[90]={name:"wsp",lower:"wsp",index:90,isBkr:!1},this.rules[91]={name:"space",lower:"space",index:91,isBkr:!1},this.rules[92]={name:"comment",lower:"comment",index:92,isBkr:!1},this.rules[93]={name:"LineEnd",lower:"lineend",index:93,isBkr:!1},this.rules[94]={name:"LineContinue",lower:"linecontinue",index:94,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:3,min:0,max:1/0},this.rules[0].opcodes[1]={type:1,children:[2,3,4]},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:4,index:2},this.rules[0].opcodes[4]={type:4,index:12},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,5,7]},this.rules[1].opcodes[1]={type:3,min:0,max:1/0},this.rules[1].opcodes[2]={type:1,children:[3,4]},this.rules[1].opcodes[3]={type:6,string:[32]},this.rules[1].opcodes[4]={type:6,string:[9]},this.rules[1].opcodes[5]={type:3,min:0,max:1},this.rules[1].opcodes[6]={type:4,index:92},this.rules[1].opcodes[7]={type:4,index:93},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[2].opcodes[1]={type:4,index:3},this.rules[2].opcodes[2]={type:4,index:89},this.rules[2].opcodes[3]={type:4,index:14},this.rules[2].opcodes[4]={type:1,children:[5,8]},this.rules[2].opcodes[5]={type:2,children:[6,7]},this.rules[2].opcodes[6]={type:4,index:89},this.rules[2].opcodes[7]={type:4,index:93},this.rules[2].opcodes[8]={type:2,children:[9,10]},this.rules[2].opcodes[9]={type:4,index:13},this.rules[2].opcodes[10]={type:4,index:93},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:2,children:[1,2,3]},this.rules[3].opcodes[1]={type:4,index:4},this.rules[3].opcodes[2]={type:4,index:89},this.rules[3].opcodes[3]={type:4,index:7},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:4,index:5},this.rules[4].opcodes[2]={type:4,index:6},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:4,index:88},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:3,min:1,max:1/0},this.rules[6].opcodes[1]={type:1,children:[2,3]},this.rules[6].opcodes[2]={type:5,min:33,max:60},this.rules[6].opcodes[3]={type:5,min:62,max:126},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:1,children:[1,2]},this.rules[7].opcodes[1]={type:4,index:9},this.rules[7].opcodes[2]={type:4,index:8},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:2},this.rules[8].opcodes[1]={type:5,min:33,max:126},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:1,children:[1,2]},this.rules[9].opcodes[1]={type:4,index:11},this.rules[9].opcodes[2]={type:4,index:10},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:6,string:[61]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:6,string:[61,47]},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:2,children:[1,6]},this.rules[12].opcodes[1]={type:3,min:1,max:1/0},this.rules[12].opcodes[2]={type:1,children:[3,4,5]},this.rules[12].opcodes[3]={type:5,min:32,max:126},this.rules[12].opcodes[4]={type:6,string:[9]},this.rules[12].opcodes[5]={type:4,index:94},this.rules[12].opcodes[6]={type:4,index:93},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:3,min:1,max:1/0},this.rules[13].opcodes[1]={type:1,children:[2,3,4]},this.rules[13].opcodes[2]={type:5,min:32,max:126},this.rules[13].opcodes[3]={type:6,string:[9]},this.rules[13].opcodes[4]={type:4,index:94},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:2,children:[1,2]},this.rules[14].opcodes[1]={type:4,index:15},this.rules[14].opcodes[2]={type:3,min:0,max:1/0},this.rules[14].opcodes[3]={type:2,children:[4,5,6]},this.rules[14].opcodes[4]={type:4,index:89},this.rules[14].opcodes[5]={type:4,index:44},this.rules[14].opcodes[6]={type:4,index:15},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:2,children:[1,2]},this.rules[15].opcodes[1]={type:4,index:16},this.rules[15].opcodes[2]={type:3,min:0,max:1/0},this.rules[15].opcodes[3]={type:2,children:[4,5]},this.rules[15].opcodes[4]={type:4,index:45},this.rules[15].opcodes[5]={type:4,index:16},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:2,children:[1,3]},this.rules[16].opcodes[1]={type:3,min:0,max:1},this.rules[16].opcodes[2]={type:4,index:17},this.rules[16].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[16].opcodes[4]={type:4,index:21},this.rules[16].opcodes[5]={type:4,index:25},this.rules[16].opcodes[6]={type:4,index:19},this.rules[16].opcodes[7]={type:4,index:20},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:1,children:[1,5]},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:18},this.rules[17].opcodes[3]={type:3,min:0,max:1},this.rules[17].opcodes[4]={type:4,index:43},this.rules[17].opcodes[5]={type:4,index:43},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[18].opcodes[1]={type:4,index:49},this.rules[18].opcodes[2]={type:4,index:50},this.rules[18].opcodes[3]={type:4,index:47},this.rules[18].opcodes[4]={type:4,index:48},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10]},this.rules[19].opcodes[1]={type:4,index:40},this.rules[19].opcodes[2]={type:4,index:29},this.rules[19].opcodes[3]={type:4,index:53},this.rules[19].opcodes[4]={type:4,index:54},this.rules[19].opcodes[5]={type:4,index:55},this.rules[19].opcodes[6]={type:4,index:61},this.rules[19].opcodes[7]={type:4,index:30},this.rules[19].opcodes[8]={type:4,index:51},this.rules[19].opcodes[9]={type:4,index:52},this.rules[19].opcodes[10]={type:4,index:65},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:3,min:1,max:1/0},this.rules[20].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[20].opcodes[2]={type:5,min:33,max:40},this.rules[20].opcodes[3]={type:5,min:42,max:46},this.rules[20].opcodes[4]={type:5,min:48,max:92},this.rules[20].opcodes[5]={type:5,min:94,max:126},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2,3]},this.rules[21].opcodes[1]={type:4,index:23},this.rules[21].opcodes[2]={type:4,index:14},this.rules[21].opcodes[3]={type:1,children:[4,5]},this.rules[21].opcodes[4]={type:4,index:24},this.rules[21].opcodes[5]={type:4,index:22},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:3,min:1,max:1/0},this.rules[22].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[22].opcodes[2]={type:5,min:33,max:40},this.rules[22].opcodes[3]={type:5,min:42,max:46},this.rules[22].opcodes[4]={type:5,min:48,max:92},this.rules[22].opcodes[5]={type:5,min:94,max:126},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:2,children:[1,2]},this.rules[23].opcodes[1]={type:6,string:[40]},this.rules[23].opcodes[2]={type:4,index:89},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:4,index:89},this.rules[24].opcodes[2]={type:6,string:[41]},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2,3]},this.rules[25].opcodes[1]={type:4,index:27},this.rules[25].opcodes[2]={type:4,index:14},this.rules[25].opcodes[3]={type:1,children:[4,5]},this.rules[25].opcodes[4]={type:4,index:28},this.rules[25].opcodes[5]={type:4,index:26},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:3,min:1,max:1/0},this.rules[26].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[26].opcodes[2]={type:5,min:33,max:40},this.rules[26].opcodes[3]={type:5,min:42,max:46},this.rules[26].opcodes[4]={type:5,min:48,max:92},this.rules[26].opcodes[5]={type:5,min:94,max:126},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:6,string:[91]},this.rules[27].opcodes[2]={type:4,index:89},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:2,children:[1,2]},this.rules[28].opcodes[1]={type:4,index:89},this.rules[28].opcodes[2]={type:6,string:[93]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:4,index:88},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,4]},this.rules[30].opcodes[1]={type:6,string:[92]},this.rules[30].opcodes[2]={type:3,min:0,max:1},this.rules[30].opcodes[3]={type:4,index:31},this.rules[30].opcodes[4]={type:4,index:36},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:1,children:[1,7,13,19]},this.rules[31].opcodes[1]={type:2,children:[2,3]},this.rules[31].opcodes[2]={type:4,index:32},this.rules[31].opcodes[3]={type:3,min:0,max:1},this.rules[31].opcodes[4]={type:1,children:[5,6]},this.rules[31].opcodes[5]={type:4,index:34},this.rules[31].opcodes[6]={type:4,index:35},this.rules[31].opcodes[7]={type:2,children:[8,9]},this.rules[31].opcodes[8]={type:4,index:33},this.rules[31].opcodes[9]={type:3,min:0,max:1},this.rules[31].opcodes[10]={type:1,children:[11,12]},this.rules[31].opcodes[11]={type:4,index:34},this.rules[31].opcodes[12]={type:4,index:35},this.rules[31].opcodes[13]={type:2,children:[14,15]},this.rules[31].opcodes[14]={type:4,index:34},this.rules[31].opcodes[15]={type:3,min:0,max:1},this.rules[31].opcodes[16]={type:1,children:[17,18]},this.rules[31].opcodes[17]={type:4,index:32},this.rules[31].opcodes[18]={type:4,index:33},this.rules[31].opcodes[19]={type:2,children:[20,21]},this.rules[31].opcodes[20]={type:4,index:35},this.rules[31].opcodes[21]={type:3,min:0,max:1},this.rules[31].opcodes[22]={type:1,children:[23,24]},this.rules[31].opcodes[23]={type:4,index:32},this.rules[31].opcodes[24]={type:4,index:33},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:6,string:[37,115]},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:6,string:[37,105]},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:6,string:[37,117]},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:6,string:[37,112]},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:1,children:[1,2,3]},this.rules[36].opcodes[1]={type:4,index:38},this.rules[36].opcodes[2]={type:4,index:39},this.rules[36].opcodes[3]={type:4,index:37},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:4,index:88},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2]},this.rules[38].opcodes[1]={type:6,string:[117,95]},this.rules[38].opcodes[2]={type:4,index:88},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2]},this.rules[39].opcodes[1]={type:6,string:[101,95]},this.rules[39].opcodes[2]={type:4,index:88},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:1,children:[1,2]},this.rules[40].opcodes[1]={type:4,index:42},this.rules[40].opcodes[2]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:2,children:[1,2]},this.rules[41].opcodes[1]={type:6,string:[117,95]},this.rules[41].opcodes[2]={type:4,index:88},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:2,children:[1,2]},this.rules[42].opcodes[1]={type:6,string:[101,95]},this.rules[42].opcodes[2]={type:4,index:88},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,5,8,11,12]},this.rules[43].opcodes[1]={type:2,children:[2,3,4]},this.rules[43].opcodes[2]={type:4,index:69},this.rules[43].opcodes[3]={type:4,index:46},this.rules[43].opcodes[4]={type:4,index:71},this.rules[43].opcodes[5]={type:2,children:[6,7]},this.rules[43].opcodes[6]={type:4,index:69},this.rules[43].opcodes[7]={type:4,index:46},this.rules[43].opcodes[8]={type:2,children:[9,10]},this.rules[43].opcodes[9]={type:4,index:46},this.rules[43].opcodes[10]={type:4,index:71},this.rules[43].opcodes[11]={type:4,index:46},this.rules[43].opcodes[12]={type:4,index:70},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:2,children:[1,2]},this.rules[44].opcodes[1]={type:6,string:[47]},this.rules[44].opcodes[2]={type:4,index:89},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:4,index:90},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:6,string:[42]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:6,string:[38]},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:6,string:[33]},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:6,string:[38,38]},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:6,string:[33,33]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:6,string:[37,94]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:6,string:[37,36]},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:2,children:[1,2]},this.rules[53].opcodes[1]={type:6,string:[37]},this.rules[53].opcodes[2]={type:1,children:[3,8,13]},this.rules[53].opcodes[3]={type:2,children:[4,5,6,7]},this.rules[53].opcodes[4]={type:4,index:76},this.rules[53].opcodes[5]={type:4,index:79},this.rules[53].opcodes[6]={type:6,string:[45]},this.rules[53].opcodes[7]={type:4,index:80},this.rules[53].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[53].opcodes[9]={type:4,index:77},this.rules[53].opcodes[10]={type:4,index:83},this.rules[53].opcodes[11]={type:6,string:[45]},this.rules[53].opcodes[12]={type:4,index:84},this.rules[53].opcodes[13]={type:2,children:[14,15,16,17]},this.rules[53].opcodes[14]={type:4,index:78},this.rules[53].opcodes[15]={type:4,index:81},this.rules[53].opcodes[16]={type:6,string:[45]},this.rules[53].opcodes[17]={type:4,index:82},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:2,children:[1,2]},this.rules[54].opcodes[1]={type:6,string:[37]},this.rules[54].opcodes[2]={type:1,children:[3,10,17]},this.rules[54].opcodes[3]={type:2,children:[4,5,6]},this.rules[54].opcodes[4]={type:4,index:76},this.rules[54].opcodes[5]={type:4,index:73},this.rules[54].opcodes[6]={type:3,min:0,max:1/0},this.rules[54].opcodes[7]={type:2,children:[8,9]},this.rules[54].opcodes[8]={type:6,string:[46]},this.rules[54].opcodes[9]={type:4,index:73},this.rules[54].opcodes[10]={type:2,children:[11,12,13]},this.rules[54].opcodes[11]={type:4,index:77},this.rules[54].opcodes[12]={type:4,index:74},this.rules[54].opcodes[13]={type:3,min:0,max:1/0},this.rules[54].opcodes[14]={type:2,children:[15,16]},this.rules[54].opcodes[15]={type:6,string:[46]},this.rules[54].opcodes[16]={type:4,index:74},this.rules[54].opcodes[17]={type:2,children:[18,19,20]},this.rules[54].opcodes[18]={type:4,index:78},this.rules[54].opcodes[19]={type:4,index:75},this.rules[54].opcodes[20]={type:3,min:0,max:1/0},this.rules[54].opcodes[21]={type:2,children:[22,23]},this.rules[54].opcodes[22]={type:6,string:[46]},this.rules[54].opcodes[23]={type:4,index:75},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[55].opcodes[1]={type:4,index:56},this.rules[55].opcodes[2]={type:4,index:57},this.rules[55].opcodes[3]={type:4,index:59},this.rules[55].opcodes[4]={type:4,index:58},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1},this.rules[56].opcodes[1]={type:1,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[37,105]},this.rules[56].opcodes[3]={type:7,string:[37,115]},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:6,string:[34]},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:6,string:[34]},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:3,min:0,max:1/0},this.rules[59].opcodes[1]={type:1,children:[2,3,4]},this.rules[59].opcodes[2]={type:5,min:32,max:33},this.rules[59].opcodes[3]={type:5,min:35,max:126},this.rules[59].opcodes[4]={type:4,index:60},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:6,string:[9]},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:2,children:[1,2,3]},this.rules[61].opcodes[1]={type:4,index:62},this.rules[61].opcodes[2]={type:4,index:64},this.rules[61].opcodes[3]={type:4,index:63},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:6,string:[39]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:6,string:[39]},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:0,max:1/0},this.rules[64].opcodes[1]={type:1,children:[2,3,4]},this.rules[64].opcodes[2]={type:5,min:32,max:38},this.rules[64].opcodes[3]={type:5,min:40,max:126},this.rules[64].opcodes[4]={type:4,index:60},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:2,children:[1,2,3]},this.rules[65].opcodes[1]={type:4,index:66},this.rules[65].opcodes[2]={type:4,index:67},this.rules[65].opcodes[3]={type:4,index:68},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:6,string:[60]},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:0,max:1/0},this.rules[67].opcodes[1]={type:1,children:[2,3,4]},this.rules[67].opcodes[2]={type:5,min:32,max:61},this.rules[67].opcodes[3]={type:5,min:63,max:126},this.rules[67].opcodes[4]={type:4,index:60},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:6,string:[62]},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:4,index:72},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:4,index:72},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:4,index:72},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:3,min:1,max:1/0},this.rules[72].opcodes[1]={type:5,min:48,max:57},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:4,index:85},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:4,index:87},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:4,index:86},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:1,children:[1,2]},this.rules[76].opcodes[1]={type:6,string:[68]},this.rules[76].opcodes[2]={type:6,string:[100]},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:6,string:[88]},this.rules[77].opcodes[2]={type:6,string:[120]},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:1,children:[1,2]},this.rules[78].opcodes[1]={type:6,string:[66]},this.rules[78].opcodes[2]={type:6,string:[98]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:4,index:85},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:4,index:85},this.rules[81].opcodes=[],this.rules[81].opcodes[0]={type:4,index:86},this.rules[82].opcodes=[],this.rules[82].opcodes[0]={type:4,index:86},this.rules[83].opcodes=[],this.rules[83].opcodes[0]={type:4,index:87},this.rules[84].opcodes=[],this.rules[84].opcodes[0]={type:4,index:87},this.rules[85].opcodes=[],this.rules[85].opcodes[0]={type:3,min:1,max:1/0},this.rules[85].opcodes[1]={type:5,min:48,max:57},this.rules[86].opcodes=[],this.rules[86].opcodes[0]={type:3,min:1,max:1/0},this.rules[86].opcodes[1]={type:5,min:48,max:49},this.rules[87].opcodes=[],this.rules[87].opcodes[0]={type:3,min:1,max:1/0},this.rules[87].opcodes[1]={type:1,children:[2,3,4]},this.rules[87].opcodes[2]={type:5,min:48,max:57},this.rules[87].opcodes[3]={type:5,min:65,max:70},this.rules[87].opcodes[4]={type:5,min:97,max:102},this.rules[88].opcodes=[],this.rules[88].opcodes[0]={type:2,children:[1,4]},this.rules[88].opcodes[1]={type:1,children:[2,3]},this.rules[88].opcodes[2]={type:5,min:97,max:122},this.rules[88].opcodes[3]={type:5,min:65,max:90},this.rules[88].opcodes[4]={type:3,min:0,max:1/0},this.rules[88].opcodes[5]={type:1,children:[6,7,8,9]},this.rules[88].opcodes[6]={type:5,min:97,max:122},this.rules[88].opcodes[7]={type:5,min:65,max:90},this.rules[88].opcodes[8]={type:5,min:48,max:57},this.rules[88].opcodes[9]={type:6,string:[45]},this.rules[89].opcodes=[],this.rules[89].opcodes[0]={type:3,min:0,max:1/0},this.rules[89].opcodes[1]={type:4,index:91},this.rules[90].opcodes=[],this.rules[90].opcodes[0]={type:3,min:1,max:1/0},this.rules[90].opcodes[1]={type:4,index:91},this.rules[91].opcodes=[],this.rules[91].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[91].opcodes[1]={type:6,string:[32]},this.rules[91].opcodes[2]={type:6,string:[9]},this.rules[91].opcodes[3]={type:4,index:92},this.rules[91].opcodes[4]={type:4,index:94},this.rules[92].opcodes=[],this.rules[92].opcodes[0]={type:2,children:[1,2]},this.rules[92].opcodes[1]={type:6,string:[59]},this.rules[92].opcodes[2]={type:3,min:0,max:1/0},this.rules[92].opcodes[3]={type:1,children:[4,5]},this.rules[92].opcodes[4]={type:5,min:32,max:126},this.rules[92].opcodes[5]={type:6,string:[9]},this.rules[93].opcodes=[],this.rules[93].opcodes[0]={type:1,children:[1,2,3]},this.rules[93].opcodes[1]={type:6,string:[13,10]},this.rules[93].opcodes[2]={type:6,string:[10]},this.rules[93].opcodes[3]={type:6,string:[13]},this.rules[94].opcodes=[],this.rules[94].opcodes[0]={type:2,children:[1,5]},this.rules[94].opcodes[1]={type:1,children:[2,3,4]},this.rules[94].opcodes[2]={type:6,string:[13,10]},this.rules[94].opcodes[3]={type:6,string:[10]},this.rules[94].opcodes[4]={type:6,string:[13]},this.rules[94].opcodes[5]={type:1,children:[6,7]},this.rules[94].opcodes[6]={type:6,string:[32]},this.rules[94].opcodes[7]={type:6,string:[9]},this.toString=function(){let _="";return _+=`;
`,_+=`; ABNF for JavaScript APG 2.0 SABNF
`,_+=`; RFC 5234 with some restrictions and additions.
`,_+=`; Updated 11/24/2015 for RFC 7405 case-sensitive literal string notation
`,_+=`;  - accepts %s"string" as a case-sensitive string
`,_+=`;  - accepts %i"string" as a case-insensitive string
`,_+=`;  - accepts "string" as a case-insensitive string
`,_+=`;
`,_+=`; Some restrictions:
`,_+=`;   1. Rules must begin at first character of each line.
`,_+=`;      Indentations on first rule and rules thereafter are not allowed.
`,_+=`;   2. Relaxed line endings. CRLF, LF or CR are accepted as valid line ending.
`,_+=`;   3. Prose values, i.e. <prose value>, are accepted as valid grammar syntax.
`,_+=`;      However, a working parser cannot be generated from them.
`,_+=`;
`,_+=`; Super set (SABNF) additions:
`,_+=`;   1. Look-ahead (syntactic predicate) operators are accepted as element prefixes.
`,_+=`;      & is the positive look-ahead operator, succeeds and backtracks if the look-ahead phrase is found
`,_+=`;      ! is the negative look-ahead operator, succeeds and backtracks if the look-ahead phrase is NOT found
`,_+=`;      e.g. &%d13 or &rule or !(A / B)
`,_+=`;   2. User-Defined Terminals (UDT) of the form, u_name and e_name are accepted.
`,_+=`;      'name' is alpha followed by alpha/num/hyphen just like a rule name.
`,_+=`;      u_name may be used as an element but no rule definition is given.
`,_+=`;      e.g. rule = A / u_myUdt
`,_+=`;           A = "a"
`,_+=`;      would be a valid grammar.
`,_+=`;   3. Case-sensitive, single-quoted strings are accepted.
`,_+=`;      e.g. 'abc' would be equivalent to %d97.98.99
`,_+=`;      (kept for backward compatibility, but superseded by %s"abc")  
`,_+=`; New 12/26/2015
`,_+=`;   4. Look-behind operators are accepted as element prefixes.
`,_+=`;      && is the positive look-behind operator, succeeds and backtracks if the look-behind phrase is found
`,_+=`;      !! is the negative look-behind operator, succeeds and backtracks if the look-behind phrase is NOT found
`,_+=`;      e.g. &&%d13 or &&rule or !!(A / B)
`,_+=`;   5. Back reference operators, i.e. \\rulename, are accepted.
`,_+=`;      A back reference operator acts like a TLS or TBS terminal except that the phrase it attempts
`,_+=`;      to match is a phrase previously matched by the rule 'rulename'.
`,_+=`;      There are two modes of previous phrase matching - the parent-frame mode and the universal mode.
`,_+=`;      In universal mode, \\rulename matches the last match to 'rulename' regardless of where it was found.
`,_+=`;      In parent-frame mode, \\rulename matches only the last match found on the parent's frame or parse tree level.
`,_+=`;      Back reference modifiers can be used to specify case and mode.
`,_+=`;      \\A defaults to case-insensitive and universal mode, e.g. \\A === \\%i%uA
`,_+=`;      Modifiers %i and %s determine case-insensitive and case-sensitive mode, respectively.
`,_+=`;      Modifiers %u and %p determine universal mode and parent frame mode, respectively.
`,_+=`;      Case and mode modifiers can appear in any order, e.g. \\%s%pA === \\%p%sA. 
`,_+=`;   7. String begin anchor, ABG(%^) matches the beginning of the input string location.
`,_+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,_+=`;   8. String end anchor, AEN(%$) matches the end of the input string location.
`,_+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,_+=`;
`,_+=`File            = *(BlankLine / Rule / RuleError)
`,_+=`BlankLine       = *(%d32/%d9) [comment] LineEnd
`,_+=`Rule            = RuleLookup owsp Alternation ((owsp LineEnd)
`,_+=`                / (LineEndError LineEnd))
`,_+=`RuleLookup      = RuleNameTest owsp DefinedAsTest
`,_+=`RuleNameTest    = RuleName/RuleNameError
`,_+=`RuleName        = alphanum
`,_+=`RuleNameError   = 1*(%d33-60/%d62-126)
`,_+=`DefinedAsTest   = DefinedAs / DefinedAsError
`,_+=`DefinedAsError  = 1*2%d33-126
`,_+=`DefinedAs       = IncAlt / Defined
`,_+=`Defined         = %d61
`,_+=`IncAlt          = %d61.47
`,_+=`RuleError       = 1*(%d32-126 / %d9  / LineContinue) LineEnd
`,_+=`LineEndError    = 1*(%d32-126 / %d9  / LineContinue)
`,_+=`Alternation     = Concatenation *(owsp AltOp Concatenation)
`,_+=`Concatenation   = Repetition *(CatOp Repetition)
`,_+=`Repetition      = [Modifier] (Group / Option / BasicElement / BasicElementErr)
`,_+=`Modifier        = (Predicate [RepOp])
`,_+=`                / RepOp
`,_+=`Predicate       = BkaOp
`,_+=`                / BknOp
`,_+=`                / AndOp
`,_+=`                / NotOp
`,_+=`BasicElement    = UdtOp
`,_+=`                / RnmOp
`,_+=`                / TrgOp
`,_+=`                / TbsOp
`,_+=`                / TlsOp
`,_+=`                / ClsOp
`,_+=`                / BkrOp
`,_+=`                / AbgOp
`,_+=`                / AenOp
`,_+=`                / ProsVal
`,_+=`BasicElementErr = 1*(%d33-40/%d42-46/%d48-92/%d94-126)
`,_+=`Group           = GroupOpen  Alternation (GroupClose / GroupError)
`,_+=`GroupError      = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,_+=`GroupOpen       = %d40 owsp
`,_+=`GroupClose      = owsp %d41
`,_+=`Option          = OptionOpen Alternation (OptionClose / OptionError)
`,_+=`OptionError     = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,_+=`OptionOpen      = %d91 owsp
`,_+=`OptionClose     = owsp %d93
`,_+=`RnmOp           = alphanum
`,_+=`BkrOp           = %d92 [bkrModifier] bkr-name
`,_+=`bkrModifier     = (cs [um / pm]) / (ci [um / pm]) / (um [cs /ci]) / (pm [cs / ci])
`,_+=`cs              = '%s'
`,_+=`ci              = '%i'
`,_+=`um              = '%u'
`,_+=`pm              = '%p'
`,_+=`bkr-name        = uname / ename / rname
`,_+=`rname           = alphanum
`,_+=`uname           = %d117.95 alphanum
`,_+=`ename           = %d101.95 alphanum
`,_+=`UdtOp           = udt-empty
`,_+=`                / udt-non-empty
`,_+=`udt-non-empty   = %d117.95 alphanum
`,_+=`udt-empty       = %d101.95 alphanum
`,_+=`RepOp           = (rep-min StarOp rep-max)
`,_+=`                / (rep-min StarOp)
`,_+=`                / (StarOp rep-max)
`,_+=`                / StarOp
`,_+=`                / rep-min-max
`,_+=`AltOp           = %d47 owsp
`,_+=`CatOp           = wsp
`,_+=`StarOp          = %d42
`,_+=`AndOp           = %d38
`,_+=`NotOp           = %d33
`,_+=`BkaOp           = %d38.38
`,_+=`BknOp           = %d33.33
`,_+=`AbgOp           = %d37.94
`,_+=`AenOp           = %d37.36
`,_+=`TrgOp           = %d37 ((Dec dmin %d45 dmax) / (Hex xmin %d45 xmax) / (Bin bmin %d45 bmax))
`,_+=`TbsOp           = %d37 ((Dec dString *(%d46 dString)) / (Hex xString *(%d46 xString)) / (Bin bString *(%d46 bString)))
`,_+=`TlsOp           = TlsCase TlsOpen TlsString TlsClose
`,_+=`TlsCase         = ["%i" / "%s"]
`,_+=`TlsOpen         = %d34
`,_+=`TlsClose        = %d34
`,_+=`TlsString       = *(%d32-33/%d35-126/StringTab)
`,_+=`StringTab       = %d9
`,_+=`ClsOp           = ClsOpen ClsString ClsClose
`,_+=`ClsOpen         = %d39
`,_+=`ClsClose        = %d39
`,_+=`ClsString       = *(%d32-38/%d40-126/StringTab)
`,_+=`ProsVal         = ProsValOpen ProsValString ProsValClose
`,_+=`ProsValOpen     = %d60
`,_+=`ProsValString   = *(%d32-61/%d63-126/StringTab)
`,_+=`ProsValClose    = %d62
`,_+=`rep-min         = rep-num
`,_+=`rep-min-max     = rep-num
`,_+=`rep-max         = rep-num
`,_+=`rep-num         = 1*(%d48-57)
`,_+=`dString         = dnum
`,_+=`xString         = xnum
`,_+=`bString         = bnum
`,_+=`Dec             = (%d68/%d100)
`,_+=`Hex             = (%d88/%d120)
`,_+=`Bin             = (%d66/%d98)
`,_+=`dmin            = dnum
`,_+=`dmax            = dnum
`,_+=`bmin            = bnum
`,_+=`bmax            = bnum
`,_+=`xmin            = xnum
`,_+=`xmax            = xnum
`,_+=`dnum            = 1*(%d48-57)
`,_+=`bnum            = 1*%d48-49
`,_+=`xnum            = 1*(%d48-57 / %d65-70 / %d97-102)
`,_+=`;
`,_+=`; Basics
`,_+=`alphanum        = (%d97-122/%d65-90) *(%d97-122/%d65-90/%d48-57/%d45)
`,_+=`owsp            = *space
`,_+=`wsp             = 1*space
`,_+=`space           = %d32
`,_+=`                / %d9
`,_+=`                / comment
`,_+=`                / LineContinue
`,_+=`comment         = %d59 *(%d32-126 / %d9)
`,_+=`LineEnd         = %d13.10
`,_+=`                / %d10
`,_+=`                / %d13
`,_+=`LineContinue    = (%d13.10 / %d10 / %d13) (%d32 / %d9)
`,_}}),sabnfGrammar}var parser,hasRequiredParser;function requireParser(){return hasRequiredParser||(hasRequiredParser=1,parser=function(){const n="parser: ",_=requireNodeExports(),x=_.ids,E=new(requireSyntaxCallbacks()),S=new(requireSemanticCallbacks()),C=new(requireSabnfGrammar()),T=new _.parser;T.ast=new _.ast,T.callbacks=E.callbacks,T.ast.callbacks=S.callbacks;const B=function(M,V,L){if(V<0||V>=L)return-1;for(let F=0;F<M.length;F+=1)if(V>=M[F].beginChar&&V<M[F].beginChar+M[F].length)return F;return-1},A=function(M,V){let L=-1;if(V<M.length){for(let F=V;F<M.length;F+=1)if(M[F]!==null){L=M[F];break}}return L},I=function(M){M.forEach(V=>{const L=[],F=[];let j=0;V.opcodes.forEach(U=>{U.type===x.ALT&&U.children.length===1||U.type===x.CAT&&U.children.length===1||U.type===x.REP&&U.min===1&&U.max===1?F.push(null):(F.push(j),L.push(U),j+=1)}),F.push(j),L.forEach(U=>{if(U.type===x.ALT||U.type===x.CAT)for(let H=0;H<U.children.length;H+=1)U.children[H]=A(F,U.children[H])}),V.opcodes=L})};this.syntax=function(M,V,L,F,j){if(j){if(j.traceObject!=="traceObject")throw new TypeError(`${n}trace argument is not a trace object`);T.trace=j}const U={};U.errors=L,U.strict=!!F,U.lines=V,U.findLine=B,U.charsLength=M.length,U.ruleCount=0,T.parse(C,"file",M,U).success||L.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(M,V,L){const F={};return F.errors=L,F.lines=V,F.findLine=B,F.charsLength=M.length,T.ast.translate(F),L.length?null:(I(F.rules),{rules:F.rules,udts:F.udts,lineMap:F.rulesLineMap})},this.generateSource=function(M,V,L,F,j){let U="",H,Y,Z,ne=0,re=1/0,X=0;const ce=[],ue=[];let _e=0,ye=0,ie=0,W=0,O=0,z=0,J=0,ee=0,ae=0,oe=0,se=0,G=0,q=0,te=0,fe=0;L.forEach(we=>{ce.push(we.lower),ne+=we.opcodes.length,we.opcodes.forEach(xe=>{switch(xe.type){case x.ALT:_e+=1;break;case x.CAT:ye+=1;break;case x.RNM:ie+=1;break;case x.UDT:W+=1;break;case x.REP:O+=1;break;case x.AND:z+=1;break;case x.NOT:J+=1;break;case x.BKA:G+=1;break;case x.BKN:q+=1;break;case x.BKR:se+=1;break;case x.ABG:te+=1;break;case x.AEN:fe+=1;break;case x.TLS:for(ee+=1,H=0;H<xe.string.length;H+=1)xe.string[H]<re&&(re=xe.string[H]),xe.string[H]>X&&(X=xe.string[H]);break;case x.TBS:for(ae+=1,H=0;H<xe.string.length;H+=1)xe.string[H]<re&&(re=xe.string[H]),xe.string[H]>X&&(X=xe.string[H]);break;case x.TRG:oe+=1,xe.min<re&&(re=xe.min),xe.max>X&&(X=xe.max);break;default:throw new Error("generateSource: unrecognized opcode")}})}),ce.sort(),F.length>0&&(F.forEach(we=>{ue.push(we.lower)}),ue.sort());let he="module.exports";j&&typeof j=="string"&&(he=`let ${j}`),U+=`// copyright: Copyright (c) 2021 Lowell D. Thomas, all rights reserved<br>
`,U+=`//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>
`,U+=`//
`,U+=`// Generated by apg-js, Version 4.0.0 [apg-js](https://github.com/ldthomas/apg-js)
`,U+=`${he} = function grammar(){
`,U+="  // ```\n",U+=`  // SUMMARY
`,U+=`  //      rules = ${L.length}
`,U+=`  //       udts = ${F.length}
`,U+=`  //    opcodes = ${ne}
`,U+=`  //        ---   ABNF original opcodes
`,U+=`  //        ALT = ${_e}
`,U+=`  //        CAT = ${ye}
`,U+=`  //        REP = ${O}
`,U+=`  //        RNM = ${ie}
`,U+=`  //        TLS = ${ee}
`,U+=`  //        TBS = ${ae}
`,U+=`  //        TRG = ${oe}
`,U+=`  //        ---   SABNF superset opcodes
`,U+=`  //        UDT = ${W}
`,U+=`  //        AND = ${z}
`,U+=`  //        NOT = ${J}
`,U+=`  //        BKA = ${G}
`,U+=`  //        BKN = ${q}
`,U+=`  //        BKR = ${se}
`,U+=`  //        ABG = ${te}
`,U+=`  //        AEN = ${fe}
`,U+="  // characters = [",ee+ae+oe===0?U+=" none defined ]":U+=`${re} - ${X}]`,W>0&&(U+=" + user defined"),U+=`
`,U+="  // ```\n",U+=`  /* OBJECT IDENTIFIER (for internal parser use) */
`,U+=`  this.grammarObject = 'grammarObject';
`,U+=`
`,U+=`  /* RULES */
`,U+=`  this.rules = [];
`,L.forEach((we,xe)=>{let $e="  this.rules[";$e+=xe,$e+="] = {name: '",$e+=we.name,$e+="', lower: '",$e+=we.lower,$e+="', index: ",$e+=we.index,$e+=", isBkr: ",$e+=we.isBkr,$e+=`};
`,U+=$e}),U+=`
`,U+=`  /* UDTS */
`,U+=`  this.udts = [];
`,F.length>0&&F.forEach((we,xe)=>{let $e="  this.udts[";$e+=xe,$e+="] = {name: '",$e+=we.name,$e+="', lower: '",$e+=we.lower,$e+="', index: ",$e+=we.index,$e+=", empty: ",$e+=we.empty,$e+=", isBkr: ",$e+=we.isBkr,$e+=`};
`,U+=$e}),U+=`
`,U+=`  /* OPCODES */
`,L.forEach((we,xe)=>{xe>0&&(U+=`
`),U+=`  /* ${we.name} */
`,U+=`  this.rules[${xe}].opcodes = [];
`,we.opcodes.forEach(($e,ge)=>{let Se;switch($e.type){case x.ALT:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}, children: [${$e.children.toString()}]};// ALT
`;break;case x.CAT:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}, children: [${$e.children.toString()}]};// CAT
`;break;case x.RNM:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}, index: ${$e.index}};// RNM(${L[$e.index].name})
`;break;case x.BKR:$e.index>=L.length?(Y=F[$e.index-L.length].name,Z=F[$e.index-L.length].lower):(Y=L[$e.index].name,Z=L[$e.index].lower),Se="%i",$e.bkrCase===x.BKR_MODE_CS&&(Se="%s"),$e.bkrMode===x.BKR_MODE_UM?Se+="%u":Se+="%p",Y=Se+Y,U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}, index: ${$e.index}, lower: '${Z}', bkrCase: ${$e.bkrCase}, bkrMode: ${$e.bkrMode}};// BKR(\\${Y})
`;break;case x.UDT:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}, empty: ${$e.empty}, index: ${$e.index}};// UDT(${F[$e.index].name})
`;break;case x.REP:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}, min: ${$e.min}, max: ${$e.max}};// REP
`;break;case x.AND:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}};// AND
`;break;case x.NOT:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}};// NOT
`;break;case x.ABG:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}};// ABG(%^)
`;break;case x.AEN:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}};// AEN(%$)
`;break;case x.BKA:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}};// BKA
`;break;case x.BKN:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}};// BKN
`;break;case x.TLS:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}, string: [${$e.string.toString()}]};// TLS
`;break;case x.TBS:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}, string: [${$e.string.toString()}]};// TBS
`;break;case x.TRG:U+=`  this.rules[${xe}].opcodes[${ge}] = {type: ${$e.type}, min: ${$e.min}, max: ${$e.max}};// TRG
`;break;default:throw new Error("parser.js: ~143: unrecognized opcode")}})}),U+=`
`,U+="  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n",U+=`  this.toString = function toString(){
`,U+=`    let str = "";
`;let Ee;return V.forEach(we=>{const xe=we.beginChar+we.length;Ee="",U+='    str += "';for(let $e=we.beginChar;$e<xe;$e+=1){switch(M[$e]){case 9:Ee=" ";break;case 10:Ee="\\n";break;case 13:Ee="\\r";break;case 34:Ee='\\"';break;case 92:Ee="\\\\";break;default:Ee=String.fromCharCode(M[$e]);break}U+=Ee}U+=`";
`}),U+=`    return str;
`,U+=`  }
`,U+=`}
`,U},this.generateObject=function(M,V,L){const F={},j=[],U=[],H=M.slice(0);return F.grammarObject="grammarObject",V.forEach(Y=>{j.push(Y.lower)}),j.sort(),L.length>0&&(L.forEach(Y=>{U.push(Y.lower)}),U.sort()),F.callbacks=[],j.forEach(Y=>{F.callbacks[Y]=!1}),L.length>0&&U.forEach(Y=>{F.callbacks[Y]=!1}),F.rules=V,F.udts=L,F.toString=function(){return H},F}}),parser}var ruleAttributes,hasRequiredRuleAttributes;function requireRuleAttributes(){return hasRequiredRuleAttributes||(hasRequiredRuleAttributes=1,ruleAttributes=function(){const n=requireIdentifiers(),_="rule-attributes.js";let x=null;function E(_e){return _e.left||_e.nested||_e.right||_e.cyclic?!1:_e.empty}function S(_e){return!!(_e.left||_e.nested||_e.right||_e.cyclic)}function C(_e,ye){let ie=0,W=0,O=0;for(ie=0;ie<ye;ie+=1)if(_e[ie].nested)return!0;for(ie=0;ie<ye;ie+=1)if(_e[ie].right&&!_e[ie].leaf){for(W=ie+1;W<ye;W+=1)if(!E(_e[W]))return!0}for(ie=ye-1;ie>=0;ie-=1)if(_e[ie].left&&!_e[ie].leaf){for(W=ie-1;W>=0;W-=1)if(!E(_e[W]))return!0}for(ie=0;ie<ye;ie+=1)if(!_e[ie].empty&&!S(_e[ie])){for(W=ie+1;W<ye;W+=1)if(S(_e[W])){for(O=W+1;O<ye;O+=1)if(!_e[O].empty&&!S(_e[O]))return!0}}return!1}function T(_e,ye){for(let ie=0;ie<ye;ie+=1)if(!_e[ie].cyclic)return!1;return!0}function B(_e,ye){for(let ie=0;ie<ye;ie+=1){if(_e[ie].left)return!0;if(!_e[ie].empty)return!1}return!1}function A(_e,ye){for(let ie=ye-1;ie>=0;ie-=1){if(_e[ie].right)return!0;if(!_e[ie].empty)return!1}return!1}function I(_e,ye){for(let ie=0;ie<ye;ie+=1)if(!_e[ie].empty)return!1;return!0}function D(_e,ye){for(let ie=0;ie<ye;ie+=1)if(!_e[ie].finite)return!1;return!0}function M(_e,ye,ie,W){let O=0;const z=ye[ie],J=z.children.length,ee=[];for(O=0;O<J;O+=1)ee.push(_e.attrGen());for(O=0;O<J;O+=1)F(_e,ye,z.children[O],ee[O]);W.left=B(ee,J),W.right=A(ee,J),W.nested=C(ee,J),W.empty=I(ee,J),W.finite=D(ee,J),W.cyclic=T(ee,J)}function V(_e,ye,ie,W){let O=0;const z=ye[ie],J=z.children.length,ee=[];for(O=0;O<J;O+=1)ee.push(_e.attrGen());for(O=0;O<J;O+=1)F(_e,ye,z.children[O],ee[O]);for(W.left=!1,W.right=!1,W.nested=!1,W.empty=!1,W.finite=!1,W.cyclic=!1,O=0;O<J;O+=1)ee[O].left&&(W.left=!0),ee[O].nested&&(W.nested=!0),ee[O].right&&(W.right=!0),ee[O].empty&&(W.empty=!0),ee[O].finite&&(W.finite=!0),ee[O].cyclic&&(W.cyclic=!0)}function L(_e,ye,ie,W){const O=ye[ie];O.index>=_e.ruleCount?(W.empty=_e.udts[O.index-_e.ruleCount].empty,W.finite=!0):(j(_e,O.index,W),W.left=!1,W.nested=!1,W.right=!1,W.cyclic=!1)}function F(_e,ye,ie,W){_e.attrInit(W);const O=ye[ie];switch(O.type){case n.ALT:V(_e,ye,ie,W);break;case n.CAT:M(_e,ye,ie,W);break;case n.REP:F(_e,ye,ie+1,W),O.min===0&&(W.empty=!0,W.finite=!0);break;case n.RNM:j(_e,ye[ie].index,W);break;case n.BKR:L(_e,ye,ie,W);break;case n.AND:case n.NOT:case n.BKA:case n.BKN:F(_e,ye,ie+1,W),W.empty=!0;break;case n.TLS:W.empty=!ye[ie].string.length,W.finite=!0,W.cyclic=!1;break;case n.TBS:case n.TRG:W.empty=!1,W.finite=!0,W.cyclic=!1;break;case n.UDT:W.empty=O.empty,W.finite=!0,W.cyclic=!1;break;case n.ABG:case n.AEN:W.empty=!0,W.finite=!0,W.cyclic=!1;break;default:throw new Error(`unknown opcode type: ${O}`)}}function j(_e,ye,ie){const W=_e.attrsWorking[ye];W.isComplete?_e.attrCopy(ie,W):W.isOpen?ye===_e.startRule?ye===_e.startRule&&(ie.left=!0,ie.right=!0,ie.cyclic=!0,ie.leaf=!0):ie.finite=!0:(W.isOpen=!0,F(_e,W.rule.opcodes,0,ie),W.left=ie.left,W.right=ie.right,W.nested=ie.nested,W.empty=ie.empty,W.finite=ie.finite,W.cyclic=ie.cyclic,W.leaf=!1,W.isOpen=!1,W.isComplete=!0)}const U=_e=>{x=_e;let ye=0,ie=0;const W=x.attrGen();for(ye=0;ye<x.ruleCount;ye+=1){for(ie=0;ie<x.ruleCount;ie+=1)x.attrInit(x.attrsWorking[ie]);x.startRule=ye,j(x,ye,W),x.attrCopy(x.attrs[ye],x.attrsWorking[ye])}x.attributesComplete=!0;let O=null;for(ye=0;ye<x.ruleCount;ye+=1)if(O=x.attrs[ye],O.left||!O.finite||O.cyclic){const z=x.attrGen(O.rule);x.attrCopy(z,O),x.attrsErrors.push(z),x.attrsErrorCount+=1}},H=_e=>_e?"t":"f",Y=_e=>_e?"e":"f",Z=_e=>_e?"t":"e",ne=(_e,ye,ie,W)=>{let O=`${_e}:${ye}:`;return O+=`${Y(ie.left)} `,O+=`${H(ie.nested)} `,O+=`${H(ie.right)} `,O+=`${Y(ie.cyclic)} `,O+=`${Z(ie.finite)} `,O+=`${H(ie.empty)}:`,O+=`${x.typeToString(W.recursiveType)}:`,O+=W.recursiveType===n.ATTR_MR?W.groupNumber:"-",O+=`:${ie.rule.name}
`,O},re=()=>{let _e=`LEGEND - t=true, f=false, e=error
`;return _e+=`sequence:rule index:left nested right cyclic finite empty:type:group number:rule name
`,_e},X=()=>{let _e=null,ye=null,ie="";if(ie+=`RULE ATTRIBUTES WITH ERRORS
`,ie+=re(),x.attrsErrorCount)for(let W=0;W<x.attrsErrorCount;W+=1)_e=x.attrsErrors[W],ye=x.ruleDeps[_e.rule.index],ie+=ne(W,_e.rule.index,_e,ye);else ie+=`<none>
`;return ie},ce=_e=>{let ye=0,ie=0,W=null,O=null,z="",{ruleIndexes:J}=x;for(_e===97?J=x.ruleAlphaIndexes:_e===116&&(J=x.ruleTypeIndexes),ye=0;ye<x.ruleCount;ye+=1)ie=J[ye],W=x.attrs[ie],O=x.ruleDeps[ie],z+=ne(ye,ie,W,O);return z};return{ruleAttributes:U,showAttributes:(_e="index")=>{if(!x.attributesComplete)throw new Error(`${_}:showAttributes: attributes not available`);let ye="";const ie=`RULE ATTRIBUTES
`;return _e.charCodeAt(0)===97?(ye+=`alphabetical by rule name
`,ye+=ie,ye+=re(),ye+=ce(97)):_e.charCodeAt(0)===116?(ye+=`ordered by rule type
`,ye+=ie,ye+=re(),ye+=ce(116)):(ye+=`ordered by rule index
`,ye+=ie,ye+=re(),ye+=ce()),ye},showAttributeErrors:X}}()),ruleAttributes}var ruleDependencies,hasRequiredRuleDependencies;function requireRuleDependencies(){return hasRequiredRuleDependencies||(hasRequiredRuleDependencies=1,ruleDependencies=(()=>{const t=requireIdentifiers();let n=null;const _=(C,T,B,A)=>{let I=0,D=0;const M=T[B];A[B]=!0;const V=M.rule.opcodes;for(I=0;I<V.length;I+=1){const L=V[I];if(L.type===t.RNM)for(M.refersTo[L.index]=!0,A[L.index]||_(C,T,L.index,A),D=0;D<C;D+=1)T[L.index].refersTo[D]&&(M.refersTo[D]=!0);else L.type===t.UDT?M.refersToUdt[L.index]=!0:L.type===t.BKR&&(L.index<C?(M.refersTo[L.index]=!0,A[L.index]||_(C,T,L.index,A)):M.refersToUdt[C-L.index]=!0)}},x=C=>{n=C;let T=0,B=0,A=0,I=null,D=null,M=!1;n.dependenciesComplete=!1;const V=n.falseArray(n.ruleCount);for(T=0;T<n.ruleCount;T+=1)n.falsifyArray(V),_(n.ruleCount,n.ruleDeps,T,V);for(T=0;T<n.ruleCount;T+=1)for(B=0;B<n.ruleCount;B+=1)T!==B&&n.ruleDeps[B].refersTo[T]&&(n.ruleDeps[T].referencedBy[B]=!0);for(T=0;T<n.ruleCount;T+=1)n.ruleDeps[T].recursiveType=t.ATTR_N,n.ruleDeps[T].refersTo[T]&&(n.ruleDeps[T].recursiveType=t.ATTR_R);for(A=-1,T=0;T<n.ruleCount;T+=1)if(I=n.ruleDeps[T],I.recursiveType===t.ATTR_R)for(M=!0,B=0;B<n.ruleCount;B+=1)T!==B&&(D=n.ruleDeps[B],D.recursiveType===t.ATTR_R&&I.refersTo[B]&&D.refersTo[T]&&(M&&(A+=1,I.recursiveType=t.ATTR_MR,I.groupNumber=A,M=!1),D.recursiveType=t.ATTR_MR,D.groupNumber=A));n.isMutuallyRecursive=A>-1,n.ruleAlphaIndexes.sort(n.compRulesAlpha),n.ruleTypeIndexes.sort(n.compRulesAlpha),n.ruleTypeIndexes.sort(n.compRulesType),n.isMutuallyRecursive&&n.ruleTypeIndexes.sort(n.compRulesGroup),n.udtCount&&n.udtAlphaIndexes.sort(n.compUdtsAlpha),n.dependenciesComplete=!0},E=(C=null)=>{let T=0,B=0,A=0,I=0;const D=n.ruleCount-1,M=n.udtCount-1,V=100;let L="",F="";const j="=> ",U="<= ";let H=!1,Y=null,{ruleIndexes:Z}=n,{udtIndexes:ne}=n;for(C===97?(Z=n.ruleAlphaIndexes,ne=n.udtAlphaIndexes):C===116&&(Z=n.ruleTypeIndexes,ne=n.udtAlphaIndexes),T=0;T<n.ruleCount;T+=1){for(Y=n.ruleDeps[Z[T]],F=`${Z[T]}:${n.typeToString(Y.recursiveType)}:`,n.isMutuallyRecursive&&(F+=Y.groupNumber>-1?Y.groupNumber:"-",F+=":"),F+=" ",L+=`${F+n.rules[Z[T]].name}
`,H=!0,A=0,I=L.length,L+=F,B=0;B<n.ruleCount;B+=1)Y.refersTo[Z[B]]&&(H?(L+=j,H=!1,L+=n.ruleDeps[Z[B]].rule.name):L+=`, ${n.ruleDeps[Z[B]].rule.name}`,A+=1),L.length-I>V&&B!==D&&(L+=`
${F}${j}`,I=L.length);if(n.udtCount)for(B=0;B<n.udtCount;B+=1)Y.refersToUdt[ne[B]]&&(H?(L+=j,H=!1,L+=n.udts[ne[B]].name):L+=`, ${n.udts[ne[B]].name}`,A+=1),L.length-I>V&&B!==M&&(L+=`
${F}${j}`,I=L.length);for(A===0&&(L+=`=> <none>
`),H===!1&&(L+=`
`),H=!0,A=0,I=L.length,L+=F,B=0;B<n.ruleCount;B+=1)Y.referencedBy[Z[B]]&&(H?(L+=U,H=!1,L+=n.ruleDeps[Z[B]].rule.name):L+=`, ${n.ruleDeps[Z[B]].rule.name}`,A+=1),L.length-I>V&&B!==D&&(L+=`
${F}${j}`,I=L.length);A===0&&(L+=`<= <none>
`),H===!1&&(L+=`
`),L+=`
`}return L};return{ruleDependencies:x,showRuleDependencies:(C="index")=>{let T=`RULE DEPENDENCIES(index:type:[group number:])
`;return T+=`=> refers to rule names
`,T+=`<= referenced by rule names
`,n.dependenciesComplete&&(C.charCodeAt(0)===97?(T+=`alphabetical by rule name
`,T+=E(97)):C.charCodeAt(0)===116?(T+=`ordered by rule type
`,T+=E(116)):(T+=`ordered by rule index
`,T+=E(null))),T}}})()),ruleDependencies}var attributes,hasRequiredAttributes;function requireAttributes(){return hasRequiredAttributes||(hasRequiredAttributes=1,attributes=function(){const n=requireIdentifiers(),{ruleAttributes:_,showAttributes:x,showAttributeErrors:E}=requireRuleAttributes(),{ruleDependencies:S,showRuleDependencies:C}=requireRuleDependencies();class T{constructor(I,D){this.rules=I,this.udts=D,this.ruleCount=I.length,this.udtCount=D.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let M=0;M<this.ruleCount;M+=1)this.attrs.push(this.attrGen(this.rules[M])),this.attrsWorking.push(this.attrGen(this.rules[M])),this.ruleDeps.push(this.rdGen(I[M],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(I){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:I}}attrInit(I){I.left=!1,I.nested=!1,I.right=!1,I.empty=!1,I.finite=!1,I.cyclic=!1,I.leaf=!1,I.isOpen=!1,I.isComplete=!1}attrCopy(I,D){I.left=D.left,I.nested=D.nested,I.right=D.right,I.empty=D.empty,I.finite=D.finite,I.cyclic=D.cyclic,I.leaf=D.leaf,I.isOpen=D.isOpen,I.isComplete=D.isComplete,I.rule=D.rule}rdGen(I,D,M){return{rule:I,recursiveType:n.ATTR_N,groupNumber:-1,refersTo:this.falseArray(D),refersToUdt:this.falseArray(M),referencedBy:this.falseArray(D)}}typeToString(I){switch(I){case n.ATTR_N:return" N";case n.ATTR_R:return" R";case n.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(I){const D=[];if(I>0)for(let M=0;M<I;M+=1)D.push(!1);return D}falsifyArray(I){for(let D=0;D<I.length;D+=1)I[D]=!1}indexArray(I){const D=[];if(I>0)for(let M=0;M<I;M+=1)D.push(M);return D}compRulesAlpha(I,D){return this.rules[I].lower<this.rules[D].lower?-1:this.rules[I].lower>this.rules[D].lower?1:0}compUdtsAlpha(I,D){return this.udts[I].lower<this.udts[D].lower?-1:this.udts[I].lower>this.udts[D].lower?1:0}compRulesType(I,D){return this.ruleDeps[I].recursiveType<this.ruleDeps[D].recursiveType?-1:this.ruleDeps[I].recursiveType>this.ruleDeps[D].recursiveType?1:0}compRulesGroup(I,D){if(this.ruleDeps[I].recursiveType===n.ATTR_MR&&this.ruleDeps[D].recursiveType===n.ATTR_MR){if(this.ruleDeps[I].groupNumber<this.ruleDeps[D].groupNumber)return-1;if(this.ruleDeps[I].groupNumber>this.ruleDeps[D].groupNumber)return 1}return 0}}return{attributes:function(I=[],D=[],M=[],V=[]){const L=new T(I,D);return S(L),_(L),L.attrsErrorCount&&V.push({line:0,char:0,msg:`${L.attrsErrorCount} attribute errors`}),L.attrsErrorCount},showAttributes:x,showAttributeErrors:E,showRuleDependencies:C}}()),attributes}var showRules,hasRequiredShowRules;function requireShowRules(){return hasRequiredShowRules||(hasRequiredShowRules=1,showRules=function(){const n="show-rules.js";return function(E=[],S=[],C="index"){const T="showRules";let B=[],A=[];const I=[],D=[],M=E,V=S,L=E.length,F=S.length;let j="RULE/UDT NAMES",U;function H(Z,ne){return M[Z].lower<M[ne].lower?-1:M[Z].lower>M[ne].lower?1:0}function Y(Z,ne){return V[Z].lower<V[ne].lower?-1:V[Z].lower>V[ne].lower?1:0}if(!(Array.isArray(E)&&E.length))throw new Error(`${n}:${T}: rules arg must be array with length > 0`);if(!Array.isArray(S))throw new Error(`${n}:${T}: udts arg must be array`);for(U=0;U<L;U+=1)I.push(U);if(B=I.slice(0),B.sort(H),F){for(U=0;U<F;U+=1)D.push(U);A=D.slice(0),A.sort(Y)}if(C.charCodeAt(0)===97){for(j+=` - alphabetical by rule/UDT name
`,U=0;U<L;U+=1)j+=`${U}: ${B[U]}: ${M[B[U]].name}
`;if(F)for(U=0;U<F;U+=1)j+=`${U}: ${A[U]}: ${V[A[U]].name}
`}else{for(j+=` - ordered by rule/UDT index
`,U=0;U<L;U+=1)j+=`${U}: ${M[U].name}
`;if(F)for(U=0;U<F;U+=1)j+=`${U}: ${V[U].name}
`}return j}}()),showRules}var api=function t(n){const{Buffer:_}=buffer$3,x="api.js: ",E=this,S=requireNodeExports(),C=requireConverter(),T=requireScanner(),B=new(requireParser()),{attributes:A,showAttributes:I,showAttributeErrors:D,showRuleDependencies:M}=requireAttributes(),V=requireShowRules(),L=function(ye,ie,W){const ee=`<span class="${S.style.CLASS_CTRLCHAR}">`,ae="</span>",oe=`<span class="${S.style.CLASS_NOMATCH}">`,se="</span>";let G,q="";const te=!0;for(;te&&!(!Array.isArray(ye)||ye.length===0);){if(typeof ie!="number")throw new Error("abnfToHtml: beg must be type number");if(ie>=ye.length)break;typeof W!="number"||ie+W>=ye.length?G=ye.length:G=ie+W;let fe=0;for(let he=ie;he<G;he+=1){const Ee=ye[he];if(Ee>=32&&Ee<=126)switch(fe===1?(q+=ae,fe=0):fe===2&&(q+=se,fe=0),Ee){case 32:q+="&nbsp;";break;case 60:q+="&lt;";break;case 62:q+="&gt;";break;case 38:q+="&amp;";break;case 34:q+="&quot;";break;case 39:q+="&#039;";break;case 92:q+="&#092;";break;default:q+=String.fromCharCode(Ee);break}else Ee===9||Ee===10||Ee===13?(fe===0?(q+=ee,fe=1):fe===2&&(q+=se+ee,fe=1),Ee===9&&(q+="TAB"),Ee===10&&(q+="LF"),Ee===13&&(q+="CR")):(fe===0?(q+=oe,fe=2):fe===1&&(q+=ae+oe,fe=2),q+=`\\x${S.utils.charToHex(Ee)}`)}fe===2&&(q+=se),fe===1&&(q+=ae);break}return q},F=function(ye,ie,W){let O="";for(let z=ie;z<ie+W;z+=1){const J=ye[z];if(J>=32&&J<=126)O+=String.fromCharCode(J);else switch(J){case 9:O+="\\t";break;case 10:O+="\\n";break;case 13:O+="\\r";break;default:O+="\\unknown";break}}return O},j=function(ye){let ie="Annotated Input Grammar";return ye.forEach(W=>{ie+=`
`,ie+=`line no: ${W.lineNo}`,ie+=` : char index: ${W.beginChar}`,ie+=` : length: ${W.length}`,ie+=` : abnf: ${F(E.chars,W.beginChar,W.length)}`}),ie+=`
`,ie},U=function(ye){let ie="";return ie+=`<table class="${S.style.CLASS_GRAMMAR}">
`,ie+=`<caption>Annotated Input Grammar</caption>
`,ie+="<tr>",ie+="<th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th>",ie+=`</tr>
`,ye.forEach(O=>{ie+="<tr>",ie+=`<td>${O.lineNo}`,ie+=`</td><td>${O.beginChar}`,ie+=`</td><td>${O.length}`,ie+=`</td><td>${L(E.chars,O.beginChar,O.length)}`,ie+="</td>",ie+=`</tr>
`}),ie+=`</table>
`,ie},H=function(ye,ie,W,O){const[z]=S;let J="";const ee=`<span class="${z.CLASS_NOMATCH}">&raquo;</span>`;return J+=`<p><table class="${z.CLASS_GRAMMAR}">
`,O&&typeof O=="string"&&(J+=`<caption>${O}</caption>
`),J+=`<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>
`,ye.forEach(ae=>{let oe,se,G,q,te,fe="",he="";ie.length===0?(te=ee,se=0):(oe=ie[ae.line],G=oe.beginChar,ae.char>G&&(fe=L(W,G,ae.char-G)),G=ae.char,q=oe.beginChar+oe.length,G<q&&(he=L(W,G,q-G)),te=fe+ee+he,se=ae.char-oe.beginChar,J+="<tr>",J+=`<td>${ae.line}</td><td>${oe.beginChar}</td><td>${se}</td><td>${te}</td>`,J+=`</tr>
`,J+="<tr>",J+=`<td colspan="3"></td><td>&uarr;:&nbsp;${S.utils.stringToAsciiHtml(ae.msg)}</td>`,J+=`</tr>
`)}),J+=`</table></p>
`,J},Y=function(ye,ie,W){let O,z,J,ee;return O="",ye.forEach(ae=>{z=ie[ae.line],O+=`${z.lineNo}: `,O+=`${z.beginChar}: `,O+=`${ae.char-z.beginChar}: `,J=z.beginChar,ee=ae.char-z.beginChar,O+=F(W,J,ee),O+=" >> ",J=ae.char,ee=z.beginChar+z.length-ae.char,O+=F(W,J,ee),O+=`
`,O+=`${z.lineNo}: `,O+=`${z.beginChar}: `,O+=`${ae.char-z.beginChar}: `,O+="error: ",O+=ae.msg,O+=`
`}),O};let Z=!1,ne=!1,re=!1,X=!1,ce=0,ue;if(this.errors=[],_.isBuffer(n))this.chars=C.decode("BINARY",n);else if(Array.isArray(n))this.chars=n.slice();else if(typeof n=="string")this.chars=C.decode("STRING",n);else throw new Error(`${x}input source is not a string, byte Buffer or character array`);this.sabnf=C.encode("STRING",this.chars),this.scan=function(ye,ie){this.lines=T(this.chars,this.errors,ye,ie),Z=!0},this.parse=function(ye,ie){if(!Z)throw new Error(`${x}grammar not scanned`);B.syntax(this.chars,this.lines,this.errors,ye,ie),ne=!0},this.translate=function(){if(!ne)throw new Error(`${x}grammar not scanned and parsed`);const ye=B.semantic(this.chars,this.lines,this.errors);this.errors.length===0&&(this.rules=ye.rules,this.udts=ye.udts,ue=ye.lineMap,re=!0)},this.attributes=function(){if(!re)throw new Error(`${x}grammar not scanned, parsed and translated`);return ce=A(this.rules,this.udts,ue,this.errors),X=!0,ce},this.generate=function(ye){if(this.lines=T(this.chars,this.errors,ye),this.errors.length||(B.syntax(this.chars,this.lines,this.errors,ye),this.errors.length))return;const ie=B.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=ie.rules,this.udts=ie.udts,ue=ie.lineMap,ce=A(this.rules,this.udts,ue,this.errors),X=!0)},this.displayRules=function(ye="index"){if(!re)throw new Error(`${x}grammar not scanned, parsed and translated`);return V(this.rules,this.udts,ye)},this.displayRuleDependencies=function(ye="index"){if(!X)throw new Error(`${x}no attributes - must be preceeded by call to attributes()`);return M(ye)},this.displayAttributes=function(ye="index"){if(!X)throw new Error(`${x}no attributes - must be preceeded by call to attributes()`);return ce&&D(ye),I(ye)},this.displayAttributeErrors=function(){if(!X)throw new Error(`${x}no attributes - must be preceeded by call to attributes()`);return D()},this.toSource=function(ye){if(!X)throw new Error(`${x}can't generate parser source - must be preceeded by call to attributes()`);if(ce)throw new Error(`${x}can't generate parser source - attributes have ${ce} errors`);return B.generateSource(this.chars,this.lines,this.rules,this.udts,ye)},this.toObject=function(){if(!X)throw new Error(`${x}can't generate parser source - must be preceeded by call to attributes()`);if(ce)throw new Error(`${x}can't generate parser source - attributes have ${ce} errors`);return B.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return Y(this.errors,this.lines,this.chars)},this.errorsToHtml=function(ye){return H(this.errors,this.lines,this.chars,ye)},this.linesToAscii=function(){return j(this.lines)},this.linesToHtml=function(){return U(this.lines)}};const apgApi=getDefaultExportFromCjs(api);var nodeExportsExports=requireNodeExports();const apgLib=getDefaultExportFromCjs(nodeExportsExports),GRAMMAR=`
sign-in-with-ethereum =
    domain %s" wants you to sign in with your Ethereum account:" LF
    address LF
    LF
    [ statement LF ]
    LF
    %s"URI: " URI LF
    %s"Version: " version LF
    %s"Chain ID: " chain-id LF
    %s"Nonce: " nonce LF
    %s"Issued At: " issued-at
    [ LF %s"Expiration Time: " expiration-time ]
    [ LF %s"Not Before: " not-before ]
    [ LF %s"Request ID: " request-id ]
    [ LF %s"Resources:"
    resources ]

domain = dnsauthority

address = "0x" 40*40HEXDIG
    ; Must also conform to captilization
    ; checksum encoding specified in EIP-55
    ; where applicable (EOAs).

statement = *( reserved / unreserved / " " )
    ; The purpose is to exclude LF (line breaks).

version = "1"

nonce = 8*( ALPHA / DIGIT )

issued-at = date-time
expiration-time = date-time
not-before = date-time

request-id = *pchar

chain-id = 1*DIGIT
    ; See EIP-155 for valid CHAIN_IDs.

resources = *( LF resource )

resource = "- " URI

; ------------------------------------------------------------------------------
; RFC 3986

URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

hier-part     = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty

scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )

authority     = [ userinfo "@" ] host [ ":" port ]
userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
host          = IP-literal / IPv4address / reg-name
port          = *DIGIT

IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"

IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )

IPv6address   =                            6( h16 ":" ) ls32
              /                       "::" 5( h16 ":" ) ls32
              / [               h16 ] "::" 4( h16 ":" ) ls32
              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
              / [ *4( h16 ":" ) h16 ] "::"              ls32
              / [ *5( h16 ":" ) h16 ] "::"              h16
              / [ *6( h16 ":" ) h16 ] "::"

h16           = 1*4HEXDIG
ls32          = ( h16 ":" h16 ) / IPv4address
IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
dec-octet     = DIGIT                 ; 0-9
                 / %x31-39 DIGIT         ; 10-99
                 / "1" 2DIGIT            ; 100-199
                 / "2" %x30-34 DIGIT     ; 200-249
                 / "25" %x30-35          ; 250-255

reg-name      = *( unreserved / pct-encoded / sub-delims )

path-abempty  = *( "/" segment )
path-absolute = "/" [ segment-nz *( "/" segment ) ]
path-rootless = segment-nz *( "/" segment )
path-empty    = 0pchar

segment       = *pchar
segment-nz    = 1*pchar

pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"

query         = *( pchar / "/" / "?" )

fragment      = *( pchar / "/" / "?" )

pct-encoded   = "%" HEXDIG HEXDIG

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
reserved      = gen-delims / sub-delims
gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
              / "*" / "+" / "," / ";" / "="

; ------------------------------------------------------------------------------
; RFC 4501

dnsauthority    = host [ ":" port ]
                             ; See RFC 3986 for the
                             ; definition of "host" and "port".

; ------------------------------------------------------------------------------
; RFC 3339

date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                          ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
                          ; rules
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset

partial-time    = time-hour ":" time-minute ":" time-second
                  [time-secfrac]
full-date       = date-fullyear "-" date-month "-" date-mday
full-time       = partial-time time-offset

date-time       = full-date "T" full-time

; ------------------------------------------------------------------------------
; RFC 5234

ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
LF             =  %x0A
                  ; linefeed
DIGIT          =  %x30-39
                  ; 0-9
HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`;class ParsedMessage{constructor(n){const _=new apgApi(GRAMMAR);if(_.generate(),_.errors.length)throw console.error(_.errorsToAscii()),console.error(_.linesToAscii()),console.log(_.displayAttributeErrors()),new Error("ABNF grammar has errors");const x=_.toObject(),E=new apgLib.parser;E.ast=new apgLib.ast;const S=apgLib.ids,C=function(Z,ne,re,X,ce){const ue=S.SEM_OK;return Z===S.SEM_PRE&&(ce.domain=apgLib.utils.charsToString(ne,re,X)),ue};E.ast.callbacks.domain=C;const T=function(Z,ne,re,X,ce){const ue=S.SEM_OK;return Z===S.SEM_PRE&&(ce.address=apgLib.utils.charsToString(ne,re,X)),ue};E.ast.callbacks.address=T;const B=function(Z,ne,re,X,ce){const ue=S.SEM_OK;return Z===S.SEM_PRE&&(ce.statement=apgLib.utils.charsToString(ne,re,X)),ue};E.ast.callbacks.statement=B;const A=function(Z,ne,re,X,ce){const ue=S.SEM_OK;return Z===S.SEM_PRE&&(ce.uri||(ce.uri=apgLib.utils.charsToString(ne,re,X))),ue};E.ast.callbacks.uri=A;const I=function(Z,ne,re,X,ce){const ue=S.SEM_OK;return Z===S.SEM_PRE&&(ce.version=apgLib.utils.charsToString(ne,re,X)),ue};E.ast.callbacks.version=I;const D=function(Z,ne,re,X,ce){const ue=S.SEM_OK;return Z===S.SEM_PRE&&(ce.chainId=apgLib.utils.charsToString(ne,re,X)),ue};E.ast.callbacks["chain-id"]=D;const M=function(Z,ne,re,X,ce){const ue=S.SEM_OK;return Z===S.SEM_PRE&&(ce.nonce=apgLib.utils.charsToString(ne,re,X)),ue};E.ast.callbacks.nonce=M;const V=function(Z,ne,re,X,ce){const ue=S.SEM_OK;return Z===S.SEM_PRE&&(ce.issuedAt=apgLib.utils.charsToString(ne,re,X)),ue};E.ast.callbacks["issued-at"]=V;const L=function(Z,ne,re,X,ce){const ue=S.SEM_OK;return Z===S.SEM_PRE&&(ce.expirationTime=apgLib.utils.charsToString(ne,re,X)),ue};E.ast.callbacks["expiration-time"]=L;const F=function(Z,ne,re,X,ce){const ue=S.SEM_OK;return Z===S.SEM_PRE&&(ce.notBefore=apgLib.utils.charsToString(ne,re,X)),ue};E.ast.callbacks["not-before"]=F;const j=function(Z,ne,re,X,ce){const ue=S.SEM_OK;return Z===S.SEM_PRE&&(ce.requestId=apgLib.utils.charsToString(ne,re,X)),ue};E.ast.callbacks["request-id"]=j;const U=function(Z,ne,re,X,ce){const ue=S.SEM_OK;return Z===S.SEM_PRE&&(ce.resources=apgLib.utils.charsToString(ne,re,X).slice(3).split(`
- `)),ue};E.ast.callbacks.resources=U;const H=E.parse(x,"sign-in-with-ethereum",n);if(!H.success)throw new Error(`Invalid message: ${JSON.stringify(H)}`);const Y={};E.ast.translate(Y);for(const[Z,ne]of Object.entries(Y))this[Z]=ne}}function _extends(){return _extends=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var _=arguments[n];for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(t[x]=_[x])}return t},_extends.apply(this,arguments)}var CAIP2={name:"chainId",regex:"[-:a-zA-Z0-9]{5,41}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"}}}},CAIP10={name:"accountId",regex:"[-:a-zA-Z0-9]{7,106}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"},2:{name:"address",regex:"[a-zA-Z0-9]{1,64}"}}}},AssetName$1={name:"assetName",regex:"[-:a-zA-Z0-9]{5,73}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,64}"}}}},CAIP19AssetType={name:"assetType",regex:"[-:a-zA-Z0-9]{11,115}",parameters:{delimiter:"/",values:{0:CAIP2,1:AssetName$1}}},CAIP19AssetId={name:"assetId",regex:"[-:a-zA-Z0-9]{13,148}",parameters:{delimiter:"/",values:{0:CAIP2,1:AssetName$1,2:{name:"tokenId",regex:"[-a-zA-Z0-9]{1,32}"}}}},CAIP={2:CAIP2,10:CAIP10,19:{assetName:AssetName$1,assetType:CAIP19AssetType,assetId:CAIP19AssetId}};function splitParams(t,n){return t.split(n.parameters.delimiter)}function getParams(t,n){var _=splitParams(t,n),x={};return _.forEach(function(E,S){x[n.parameters.values[S].name]=E}),x}function joinParams(t,n){return Object.values(n.parameters.values).map(function(_){var x=t[_.name];return typeof x=="string"?x:joinParams(x,_)}).join(n.parameters.delimiter)}function isValidId(t,n){if(!new RegExp(n.regex).test(t))return!1;var _=splitParams(t,n);if(_.length!==Object.keys(n.parameters.values).length)return!1;var x=_.map(function(E,S){return new RegExp(n.parameters.values[S].regex).test(E)}).filter(function(E){return!!E});return x.length===_.length}var ChainId=function(){function t(_){typeof _=="string"&&(_=t.parse(_)),this.namespace=_.namespace,this.reference=_.reference}t.parse=function(x){if(!isValidId(x,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+x);return new t(getParams(x,this.spec)).toJSON()},t.format=function(x){return joinParams(x,this.spec)};var n=t.prototype;return n.toString=function(){return t.format(this.toJSON())},n.toJSON=function(){return{namespace:this.namespace,reference:this.reference}},t}();ChainId.spec=CAIP[2];var AccountId=function(){function t(_){typeof _=="string"&&(_=t.parse(_)),this.chainId=new ChainId(_.chainId),this.address=_.address}t.parse=function(x){if(!isValidId(x,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+x);var E=getParams(x,this.spec),S=E.namespace,C=E.reference,T=E.address,B=new ChainId({namespace:S,reference:C});return new t({chainId:B,address:T}).toJSON()},t.format=function(x){var E=new ChainId(x.chainId),S=_extends({},E.toJSON(),{address:x.address});return joinParams(S,this.spec)};var n=t.prototype;return n.toString=function(){return t.format(this.toJSON())},n.toJSON=function(){return{chainId:this.chainId.toJSON(),address:this.address}},t}();AccountId.spec=CAIP[10];var ErrorTypes;(function(t){t.INVALID_SIGNATURE="Invalid signature.",t.EXPIRED_MESSAGE="Expired message.",t.MALFORMED_SESSION="Malformed session."})(ErrorTypes||(ErrorTypes={}));var SignatureType;(function(t){t.PERSONAL_SIGNATURE="Personal signature"})(SignatureType||(SignatureType={}));class SiwxMessage{static fromCacao(n){const _=AccountId.parse(n.p.iss.replace("did:pkh:","")),x=new this({domain:n.p.domain,address:_.address,uri:n.p.aud,version:n.p.version,chainId:new ChainId(_.chainId).reference});return n.p.statement&&(x.statement=n.p.statement),n.p.nonce&&(x.nonce=n.p.nonce),n.p.iat&&(x.issuedAt=n.p.iat),n.p.exp&&(x.expirationTime=n.p.exp),n.p.nbf&&(x.notBefore=n.p.nbf),n.p.requestId&&(x.requestId=n.p.requestId),n.p.resources&&(x.resources=n.p.resources),n.s&&(n.s.s&&(x.signature=n.s.s),n.s.t==="eip191"&&(x.type=SignatureType.PERSONAL_SIGNATURE)),x}toMessage(n){return asString(this,n)}constructor(n){if(this.statement=void 0,this.nonce=void 0,this.issuedAt=void 0,this.expirationTime=void 0,this.notBefore=void 0,this.requestId=void 0,this.resources=void 0,this.signature=void 0,typeof n=="string"){const _=new ParsedMessage(n);this.domain=_.domain,this.address=_.address,this.statement=_.statement,this.uri=_.uri,this.version=_.version,this.nonce=_.nonce,this.issuedAt=_.issuedAt,this.expirationTime=_.expirationTime,this.notBefore=_.notBefore,this.requestId=_.requestId,this.chainId=_.chainId,this.resources=_.resources}else Object.assign(this,n)}}function asLegacyChainIdString(t,n){const _=`${t.domain} wants you to sign in with your ${n} account:`,x=`URI: ${t.uri}`;let E=[_,t.address].join(`
`);const S=`Version: ${t.version}`;t.nonce||(t.nonce=(Math.random()+1).toString(36).substring(4));const C=`Nonce: ${t.nonce}`,T=[x,S,C];if(t.issuedAt&&Date.parse(t.issuedAt),t.issuedAt=t.issuedAt?t.issuedAt:new Date().toISOString(),T.push(`Issued At: ${t.issuedAt}`),t.expirationTime){const A=`Expiration Time: ${t.expirationTime}`;T.push(A)}t.notBefore&&T.push(`Not Before: ${t.notBefore}`),t.requestId&&T.push(`Request ID: ${t.requestId}`),t.chainId&&T.push(`Chain ID: ${t.chainId}`),t.resources&&T.push(["Resources:",...t.resources.map(A=>`- ${A}`)].join(`
`));const B=T.join(`
`);return t.statement&&(E=[E,t.statement].join(`

`)),[E,B].join(`

`)}function asString(t,n){const _=`${t.domain} wants you to sign in with your ${n} account:`,x=`URI: ${t.uri}`;let E=[_,t.address].join(`
`);const S=`Version: ${t.version}`;t.nonce||(t.nonce=(Math.random()+1).toString(36).substring(4));const C=`Nonce: ${t.nonce}`,T=`Chain ID: ${t.chainId}`,B=[x,S,T,C];if(t.issuedAt&&Date.parse(t.issuedAt),t.issuedAt=t.issuedAt?t.issuedAt:new Date().toISOString(),B.push(`Issued At: ${t.issuedAt}`),t.expirationTime){const I=`Expiration Time: ${t.expirationTime}`;B.push(I)}t.notBefore&&B.push(`Not Before: ${t.notBefore}`),t.requestId&&B.push(`Request ID: ${t.requestId}`),t.resources&&t.resources.length>=1&&B.push(["Resources:",...t.resources.map(I=>`- ${I}`)].join(`
`));const A=B.join(`
`);return t.statement&&(E=[E,t.statement].join(`

`)),[E,A].join(`

`)}class SiweMessage extends SiwxMessage{toMessage(){return super.toMessage("Ethereum")}signMessage(){let n;switch(this.type){case SignatureType.PERSONAL_SIGNATURE:{n=this.toMessage();break}default:{n=this.toMessage();break}}return n}}const CID_CBOR_TAG=42;function cidEncoder(t){if(t.asCID!==t)return null;const n=CID$3.asCID(t);if(!n)return null;const _=new Uint8Array(n.bytes.byteLength+1);return _.set(n.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,_)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$3.decode(t.subarray(1))}const decodeOptions={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const name="dag-cbor",code$2=113,encode$7=t=>encode$9(t,encodeOptions),decode$4=t=>decode$6(t,decodeOptions),dagCbor=Object.freeze(Object.defineProperty({__proto__:null,code:code$2,decode:decode$4,encode:encode$7,name},Symbol.toStringTag,{value:"Module"})),CLOCK_SKEW_DEFAULT_SEC=5*60;new Date("2022-09-20").valueOf();var Cacao;(function(t){function n(T){const B={h:{t:"eip4361"},p:{domain:T.domain,iat:T.issuedAt,iss:`did:pkh:eip155:${T.chainId}:${T.address}`,aud:T.uri,version:T.version,nonce:T.nonce}};return T.signature&&(B.s={t:"eip191",s:T.signature}),T.notBefore&&(B.p.nbf=T.notBefore),T.expirationTime&&(B.p.exp=T.expirationTime),T.statement&&(B.p.statement=T.statement),T.requestId&&(B.p.requestId=T.requestId),T.resources&&(B.p.resources=T.resources),B}t.fromSiweMessage=n;function _(T){const B={h:{t:"caip122"},p:{domain:T.domain,iat:T.issuedAt,iss:`did:pkh:solana:${T.chainId}:${T.address}`,aud:T.uri,version:T.version,nonce:T.nonce}};return T.signature&&(B.s={t:"solana:ed25519",s:T.signature}),T.notBefore&&(B.p.nbf=T.notBefore),T.expirationTime&&(B.p.exp=T.expirationTime),T.statement&&(B.p.statement=T.statement),T.requestId&&(B.p.requestId=T.requestId),T.resources&&(B.p.resources=T.resources),B}t.fromSiwsMessage=_;function x(T){const B={h:{t:"caip122"},p:{domain:T.domain,iat:T.issuedAt,iss:`did:pkh:tezos:${T.chainId}:${T.address}`,aud:T.uri,version:T.version,nonce:T.nonce}};return T.signature&&(B.s={t:"tezos:ed25519",s:T.signature}),T.notBefore&&(B.p.nbf=T.notBefore),T.expirationTime&&(B.p.exp=T.expirationTime),T.statement&&(B.p.statement=T.statement),T.requestId&&(B.p.requestId=T.requestId),T.resources&&(B.p.resources=T.resources),B}t.fromSiwTezosMessage=x;function E(T){const B={h:{t:"caip122"},p:{domain:T.domain,iat:T.issuedAt,iss:`did:pkh:stacks:${T.chainId}:${T.address}`,aud:T.uri,version:T.version,nonce:T.nonce}};return T.signature&&(B.s={t:"stacks:secp256k1",s:T.signature}),T.notBefore&&(B.p.nbf=T.notBefore),T.expirationTime&&(B.p.exp=T.expirationTime),T.statement&&(B.p.statement=T.statement),T.requestId&&(B.p.requestId=T.requestId),T.resources&&(B.p.resources=T.resources),B}t.fromSiwStacksMessage=E;async function S(T){return(await decode$7({bytes:T,codec:dagCbor,hasher:sha256$5})).value}t.fromBlockBytes=S;async function C(T,B={}){assertSigned(T);const A=B.verifiers[T.s.t];if(!A)throw new Error("Unsupported CACAO signature type, register the needed verifier");return A(T,B)}t.verify=C})(Cacao||(Cacao={}));var CacaoBlock;(function(t){function n(_){return encode$a({value:_,codec:dagCbor,hasher:sha256$5})}t.fromCacao=n})(CacaoBlock||(CacaoBlock={}));function assertSigned(t){if(t.s===null||t.s===void 0)throw new Error("CACAO does not have a signature")}function verifyTimeChecks(t,n){const _=n.atTime?n.atTime.getTime():Date.now(),x=(n.clockSkewSecs??CLOCK_SKEW_DEFAULT_SEC)*1e3;if(Date.parse(t.p.iat)>_+x||Date.parse(t.p.nbf)>_+x)throw new Error("CACAO is not valid yet");const E=n.revocationPhaseOutSecs?n.revocationPhaseOutSecs*1e3:0;if(!n.disableExpirationCheck&&Date.parse(t.p.exp)+E+x<_)throw new Error("CACAO has expired")}const version$h="logger/5.7.0";let _permanentCensorErrors=!1,_censorErrors=!1;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels.default,_globalLogger=null;function _checkNormalize(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(n=>{try{if("test".normalize(n)!=="test")throw new Error("bad normalize")}catch{t.push(n)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const _normalizeError=_checkNormalize();var LogLevel;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(LogLevel||(LogLevel={}));var ErrorCode;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(ErrorCode||(ErrorCode={}));const HEX="0123456789abcdef";class Logger{constructor(n){Object.defineProperty(this,"version",{enumerable:!0,value:n,writable:!1})}_log(n,_){const x=n.toLowerCase();LogLevels[x]==null&&this.throwArgumentError("invalid log level name","logLevel",n),!(_logLevel>LogLevels[x])&&console.log.apply(console,_)}debug(...n){this._log(Logger.levels.DEBUG,n)}info(...n){this._log(Logger.levels.INFO,n)}warn(...n){this._log(Logger.levels.WARNING,n)}makeError(n,_,x){if(_censorErrors)return this.makeError("censored error",_,{});_||(_=Logger.errors.UNKNOWN_ERROR),x||(x={});const E=[];Object.keys(x).forEach(B=>{const A=x[B];try{if(A instanceof Uint8Array){let I="";for(let D=0;D<A.length;D++)I+=HEX[A[D]>>4],I+=HEX[A[D]&15];E.push(B+"=Uint8Array(0x"+I+")")}else E.push(B+"="+JSON.stringify(A))}catch{E.push(B+"="+JSON.stringify(x[B].toString()))}}),E.push(`code=${_}`),E.push(`version=${this.version}`);const S=n;let C="";switch(_){case ErrorCode.NUMERIC_FAULT:{C="NUMERIC_FAULT";const B=n;switch(B){case"overflow":case"underflow":case"division-by-zero":C+="-"+B;break;case"negative-power":case"negative-width":C+="-unsupported";break;case"unbound-bitwise-result":C+="-unbound-result";break}break}case ErrorCode.CALL_EXCEPTION:case ErrorCode.INSUFFICIENT_FUNDS:case ErrorCode.MISSING_NEW:case ErrorCode.NONCE_EXPIRED:case ErrorCode.REPLACEMENT_UNDERPRICED:case ErrorCode.TRANSACTION_REPLACED:case ErrorCode.UNPREDICTABLE_GAS_LIMIT:C=_;break}C&&(n+=" [ See: https://links.ethers.org/v5-errors-"+C+" ]"),E.length&&(n+=" ("+E.join(", ")+")");const T=new Error(n);return T.reason=S,T.code=_,Object.keys(x).forEach(function(B){T[B]=x[B]}),T}throwError(n,_,x){throw this.makeError(n,_,x)}throwArgumentError(n,_,x){return this.throwError(n,Logger.errors.INVALID_ARGUMENT,{argument:_,value:x})}assert(n,_,x,E){n||this.throwError(_,x,E)}assertArgument(n,_,x,E){n||this.throwArgumentError(_,x,E)}checkNormalize(n){_normalizeError&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}checkSafeUint53(n,_){typeof n=="number"&&(_==null&&(_="value not safe"),(n<0||n>=9007199254740991)&&this.throwError(_,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:n}),n%1&&this.throwError(_,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:n}))}checkArgumentCount(n,_,x){x?x=": "+x:x="",n<_&&this.throwError("missing argument"+x,Logger.errors.MISSING_ARGUMENT,{count:n,expectedCount:_}),n>_&&this.throwError("too many arguments"+x,Logger.errors.UNEXPECTED_ARGUMENT,{count:n,expectedCount:_})}checkNew(n,_){(n===Object||n==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:_.name})}checkAbstract(n,_){n===_?this.throwError("cannot instantiate abstract class "+JSON.stringify(_.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:n.name,operation:"new"}):(n===Object||n==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:_.name})}static globalLogger(){return _globalLogger||(_globalLogger=new Logger(version$h)),_globalLogger}static setCensorship(n,_){if(!n&&_&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_permanentCensorErrors){if(!n)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!n,_permanentCensorErrors=!!_}static setLogLevel(n){const _=LogLevels[n.toLowerCase()];if(_==null){Logger.globalLogger().warn("invalid log level - "+n);return}_logLevel=_}static from(n){return new Logger(n)}}Logger.errors=ErrorCode;Logger.levels=LogLevel;const version$g="bytes/5.7.0",logger$k=new Logger(version$g);function isHexable(t){return!!t.toHexString}function addSlice(t){return t.slice||(t.slice=function(){const n=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(t,n)))}),t}function isBytesLike(t){return isHexString(t)&&!(t.length%2)||isBytes(t)}function isInteger(t){return typeof t=="number"&&t==t&&t%1===0}function isBytes(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!isInteger(t.length)||t.length<0)return!1;for(let n=0;n<t.length;n++){const _=t[n];if(!isInteger(_)||_<0||_>=256)return!1}return!0}function arrayify(t,n){if(n||(n={}),typeof t=="number"){logger$k.checkSafeUint53(t,"invalid arrayify value");const _=[];for(;t;)_.unshift(t&255),t=parseInt(String(t/256));return _.length===0&&_.push(0),addSlice(new Uint8Array(_))}if(n.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),isHexable(t)&&(t=t.toHexString()),isHexString(t)){let _=t.substring(2);_.length%2&&(n.hexPad==="left"?_="0"+_:n.hexPad==="right"?_+="0":logger$k.throwArgumentError("hex data is odd-length","value",t));const x=[];for(let E=0;E<_.length;E+=2)x.push(parseInt(_.substring(E,E+2),16));return addSlice(new Uint8Array(x))}return isBytes(t)?addSlice(new Uint8Array(t)):logger$k.throwArgumentError("invalid arrayify value","value",t)}function concat(t){const n=t.map(E=>arrayify(E)),_=n.reduce((E,S)=>E+S.length,0),x=new Uint8Array(_);return n.reduce((E,S)=>(x.set(S,E),E+S.length),0),addSlice(x)}function stripZeros(t){let n=arrayify(t);if(n.length===0)return n;let _=0;for(;_<n.length&&n[_]===0;)_++;return _&&(n=n.slice(_)),n}function zeroPad(t,n){t=arrayify(t),t.length>n&&logger$k.throwArgumentError("value out of range","value",arguments[0]);const _=new Uint8Array(n);return _.set(t,n-t.length),addSlice(_)}function isHexString(t,n){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||n&&t.length!==2+2*n)}const HexCharacters="0123456789abcdef";function hexlify(t,n){if(n||(n={}),typeof t=="number"){logger$k.checkSafeUint53(t,"invalid hexlify value");let _="";for(;t;)_=HexCharacters[t&15]+_,t=Math.floor(t/16);return _.length?(_.length%2&&(_="0"+_),"0x"+_):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(n.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),isHexable(t))return t.toHexString();if(isHexString(t))return t.length%2&&(n.hexPad==="left"?t="0x0"+t.substring(2):n.hexPad==="right"?t+="0":logger$k.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(isBytes(t)){let _="0x";for(let x=0;x<t.length;x++){let E=t[x];_+=HexCharacters[(E&240)>>4]+HexCharacters[E&15]}return _}return logger$k.throwArgumentError("invalid hexlify value","value",t)}function hexDataLength(t){if(typeof t!="string")t=hexlify(t);else if(!isHexString(t)||t.length%2)return null;return(t.length-2)/2}function hexDataSlice(t,n,_){return typeof t!="string"?t=hexlify(t):(!isHexString(t)||t.length%2)&&logger$k.throwArgumentError("invalid hexData","value",t),n=2+2*n,_!=null?"0x"+t.substring(n,2+2*_):"0x"+t.substring(n)}function hexConcat(t){let n="0x";return t.forEach(_=>{n+=hexlify(_).substring(2)}),n}function hexZeroPad(t,n){for(typeof t!="string"?t=hexlify(t):isHexString(t)||logger$k.throwArgumentError("invalid hex string","value",t),t.length>2*n+2&&logger$k.throwArgumentError("value out of range","value",arguments[1]);t.length<2*n+2;)t="0x0"+t.substring(2);return t}function splitSignature(t){const n={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(isBytesLike(t)){let _=arrayify(t);_.length===64?(n.v=27+(_[32]>>7),_[32]&=127,n.r=hexlify(_.slice(0,32)),n.s=hexlify(_.slice(32,64))):_.length===65?(n.r=hexlify(_.slice(0,32)),n.s=hexlify(_.slice(32,64)),n.v=_[64]):logger$k.throwArgumentError("invalid signature string","signature",t),n.v<27&&(n.v===0||n.v===1?n.v+=27:logger$k.throwArgumentError("signature invalid v byte","signature",t)),n.recoveryParam=1-n.v%2,n.recoveryParam&&(_[32]|=128),n._vs=hexlify(_.slice(32,64))}else{if(n.r=t.r,n.s=t.s,n.v=t.v,n.recoveryParam=t.recoveryParam,n._vs=t._vs,n._vs!=null){const E=zeroPad(arrayify(n._vs),32);n._vs=hexlify(E);const S=E[0]>=128?1:0;n.recoveryParam==null?n.recoveryParam=S:n.recoveryParam!==S&&logger$k.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),E[0]&=127;const C=hexlify(E);n.s==null?n.s=C:n.s!==C&&logger$k.throwArgumentError("signature v mismatch _vs","signature",t)}if(n.recoveryParam==null)n.v==null?logger$k.throwArgumentError("signature missing v and recoveryParam","signature",t):n.v===0||n.v===1?n.recoveryParam=n.v:n.recoveryParam=1-n.v%2;else if(n.v==null)n.v=27+n.recoveryParam;else{const E=n.v===0||n.v===1?n.v:1-n.v%2;n.recoveryParam!==E&&logger$k.throwArgumentError("signature recoveryParam mismatch v","signature",t)}n.r==null||!isHexString(n.r)?logger$k.throwArgumentError("signature missing or invalid r","signature",t):n.r=hexZeroPad(n.r,32),n.s==null||!isHexString(n.s)?logger$k.throwArgumentError("signature missing or invalid s","signature",t):n.s=hexZeroPad(n.s,32);const _=arrayify(n.s);_[0]>=128&&logger$k.throwArgumentError("signature s out of range","signature",t),n.recoveryParam&&(_[0]|=128);const x=hexlify(_);n._vs&&(isHexString(n._vs)||logger$k.throwArgumentError("signature invalid _vs","signature",t),n._vs=hexZeroPad(n._vs,32)),n._vs==null?n._vs=x:n._vs!==x&&logger$k.throwArgumentError("signature _vs mismatch v and s","signature",t)}return n.yParityAndS=n._vs,n.compact=n.r+n.yParityAndS.substring(2),n}function joinSignature(t){return t=splitSignature(t),hexlify(concat([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}var bn$1={exports:{}};bn$1.exports;(function(t){(function(n,_){function x(W,O){if(!W)throw new Error(O||"Assertion failed")}function E(W,O){W.super_=O;var z=function(){};z.prototype=O.prototype,W.prototype=new z,W.prototype.constructor=W}function S(W,O,z){if(S.isBN(W))return W;this.negative=0,this.words=null,this.length=0,this.red=null,W!==null&&((O==="le"||O==="be")&&(z=O,O=10),this._init(W||0,O||10,z||"be"))}typeof n=="object"?n.exports=S:_.BN=S,S.BN=S,S.wordSize=26;var C;try{typeof window<"u"&&typeof window.Buffer<"u"?C=window.Buffer:C=require$$0$2.Buffer}catch{}S.isBN=function(O){return O instanceof S?!0:O!==null&&typeof O=="object"&&O.constructor.wordSize===S.wordSize&&Array.isArray(O.words)},S.max=function(O,z){return O.cmp(z)>0?O:z},S.min=function(O,z){return O.cmp(z)<0?O:z},S.prototype._init=function(O,z,J){if(typeof O=="number")return this._initNumber(O,z,J);if(typeof O=="object")return this._initArray(O,z,J);z==="hex"&&(z=16),x(z===(z|0)&&z>=2&&z<=36),O=O.toString().replace(/\s+/g,"");var ee=0;O[0]==="-"&&(ee++,this.negative=1),ee<O.length&&(z===16?this._parseHex(O,ee,J):(this._parseBase(O,z,ee),J==="le"&&this._initArray(this.toArray(),z,J)))},S.prototype._initNumber=function(O,z,J){O<0&&(this.negative=1,O=-O),O<67108864?(this.words=[O&67108863],this.length=1):O<4503599627370496?(this.words=[O&67108863,O/67108864&67108863],this.length=2):(x(O<9007199254740992),this.words=[O&67108863,O/67108864&67108863,1],this.length=3),J==="le"&&this._initArray(this.toArray(),z,J)},S.prototype._initArray=function(O,z,J){if(x(typeof O.length=="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=new Array(this.length);for(var ee=0;ee<this.length;ee++)this.words[ee]=0;var ae,oe,se=0;if(J==="be")for(ee=O.length-1,ae=0;ee>=0;ee-=3)oe=O[ee]|O[ee-1]<<8|O[ee-2]<<16,this.words[ae]|=oe<<se&67108863,this.words[ae+1]=oe>>>26-se&67108863,se+=24,se>=26&&(se-=26,ae++);else if(J==="le")for(ee=0,ae=0;ee<O.length;ee+=3)oe=O[ee]|O[ee+1]<<8|O[ee+2]<<16,this.words[ae]|=oe<<se&67108863,this.words[ae+1]=oe>>>26-se&67108863,se+=24,se>=26&&(se-=26,ae++);return this._strip()};function T(W,O){var z=W.charCodeAt(O);if(z>=48&&z<=57)return z-48;if(z>=65&&z<=70)return z-55;if(z>=97&&z<=102)return z-87;x(!1,"Invalid character in "+W)}function B(W,O,z){var J=T(W,z);return z-1>=O&&(J|=T(W,z-1)<<4),J}S.prototype._parseHex=function(O,z,J){this.length=Math.ceil((O.length-z)/6),this.words=new Array(this.length);for(var ee=0;ee<this.length;ee++)this.words[ee]=0;var ae=0,oe=0,se;if(J==="be")for(ee=O.length-1;ee>=z;ee-=2)se=B(O,z,ee)<<ae,this.words[oe]|=se&67108863,ae>=18?(ae-=18,oe+=1,this.words[oe]|=se>>>26):ae+=8;else{var G=O.length-z;for(ee=G%2===0?z+1:z;ee<O.length;ee+=2)se=B(O,z,ee)<<ae,this.words[oe]|=se&67108863,ae>=18?(ae-=18,oe+=1,this.words[oe]|=se>>>26):ae+=8}this._strip()};function A(W,O,z,J){for(var ee=0,ae=0,oe=Math.min(W.length,z),se=O;se<oe;se++){var G=W.charCodeAt(se)-48;ee*=J,G>=49?ae=G-49+10:G>=17?ae=G-17+10:ae=G,x(G>=0&&ae<J,"Invalid character"),ee+=ae}return ee}S.prototype._parseBase=function(O,z,J){this.words=[0],this.length=1;for(var ee=0,ae=1;ae<=67108863;ae*=z)ee++;ee--,ae=ae/z|0;for(var oe=O.length-J,se=oe%ee,G=Math.min(oe,oe-se)+J,q=0,te=J;te<G;te+=ee)q=A(O,te,te+ee,z),this.imuln(ae),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q);if(se!==0){var fe=1;for(q=A(O,te,O.length,z),te=0;te<se;te++)fe*=z;this.imuln(fe),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q)}this._strip()},S.prototype.copy=function(O){O.words=new Array(this.length);for(var z=0;z<this.length;z++)O.words[z]=this.words[z];O.length=this.length,O.negative=this.negative,O.red=this.red};function I(W,O){W.words=O.words,W.length=O.length,W.negative=O.negative,W.red=O.red}if(S.prototype._move=function(O){I(O,this)},S.prototype.clone=function(){var O=new S(null);return this.copy(O),O},S.prototype._expand=function(O){for(;this.length<O;)this.words[this.length++]=0;return this},S.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},S.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{S.prototype[Symbol.for("nodejs.util.inspect.custom")]=D}catch{S.prototype.inspect=D}else S.prototype.inspect=D;function D(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],V=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],L=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];S.prototype.toString=function(O,z){O=O||10,z=z|0||1;var J;if(O===16||O==="hex"){J="";for(var ee=0,ae=0,oe=0;oe<this.length;oe++){var se=this.words[oe],G=((se<<ee|ae)&16777215).toString(16);ae=se>>>24-ee&16777215,ee+=2,ee>=26&&(ee-=26,oe--),ae!==0||oe!==this.length-1?J=M[6-G.length]+G+J:J=G+J}for(ae!==0&&(J=ae.toString(16)+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}if(O===(O|0)&&O>=2&&O<=36){var q=V[O],te=L[O];J="";var fe=this.clone();for(fe.negative=0;!fe.isZero();){var he=fe.modrn(te).toString(O);fe=fe.idivn(te),fe.isZero()?J=he+J:J=M[q-he.length]+he+J}for(this.isZero()&&(J="0"+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}x(!1,"Base should be between 2 and 36")},S.prototype.toNumber=function(){var O=this.words[0];return this.length===2?O+=this.words[1]*67108864:this.length===3&&this.words[2]===1?O+=4503599627370496+this.words[1]*67108864:this.length>2&&x(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-O:O},S.prototype.toJSON=function(){return this.toString(16,2)},C&&(S.prototype.toBuffer=function(O,z){return this.toArrayLike(C,O,z)}),S.prototype.toArray=function(O,z){return this.toArrayLike(Array,O,z)};var F=function(O,z){return O.allocUnsafe?O.allocUnsafe(z):new O(z)};S.prototype.toArrayLike=function(O,z,J){this._strip();var ee=this.byteLength(),ae=J||Math.max(1,ee);x(ee<=ae,"byte array longer than desired length"),x(ae>0,"Requested array length <= 0");var oe=F(O,ae),se=z==="le"?"LE":"BE";return this["_toArrayLike"+se](oe,ee),oe},S.prototype._toArrayLikeLE=function(O,z){for(var J=0,ee=0,ae=0,oe=0;ae<this.length;ae++){var se=this.words[ae]<<oe|ee;O[J++]=se&255,J<O.length&&(O[J++]=se>>8&255),J<O.length&&(O[J++]=se>>16&255),oe===6?(J<O.length&&(O[J++]=se>>24&255),ee=0,oe=0):(ee=se>>>24,oe+=2)}if(J<O.length)for(O[J++]=ee;J<O.length;)O[J++]=0},S.prototype._toArrayLikeBE=function(O,z){for(var J=O.length-1,ee=0,ae=0,oe=0;ae<this.length;ae++){var se=this.words[ae]<<oe|ee;O[J--]=se&255,J>=0&&(O[J--]=se>>8&255),J>=0&&(O[J--]=se>>16&255),oe===6?(J>=0&&(O[J--]=se>>24&255),ee=0,oe=0):(ee=se>>>24,oe+=2)}if(J>=0)for(O[J--]=ee;J>=0;)O[J--]=0},Math.clz32?S.prototype._countBits=function(O){return 32-Math.clz32(O)}:S.prototype._countBits=function(O){var z=O,J=0;return z>=4096&&(J+=13,z>>>=13),z>=64&&(J+=7,z>>>=7),z>=8&&(J+=4,z>>>=4),z>=2&&(J+=2,z>>>=2),J+z},S.prototype._zeroBits=function(O){if(O===0)return 26;var z=O,J=0;return z&8191||(J+=13,z>>>=13),z&127||(J+=7,z>>>=7),z&15||(J+=4,z>>>=4),z&3||(J+=2,z>>>=2),z&1||J++,J},S.prototype.bitLength=function(){var O=this.words[this.length-1],z=this._countBits(O);return(this.length-1)*26+z};function j(W){for(var O=new Array(W.bitLength()),z=0;z<O.length;z++){var J=z/26|0,ee=z%26;O[z]=W.words[J]>>>ee&1}return O}S.prototype.zeroBits=function(){if(this.isZero())return 0;for(var O=0,z=0;z<this.length;z++){var J=this._zeroBits(this.words[z]);if(O+=J,J!==26)break}return O},S.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},S.prototype.toTwos=function(O){return this.negative!==0?this.abs().inotn(O).iaddn(1):this.clone()},S.prototype.fromTwos=function(O){return this.testn(O-1)?this.notn(O).iaddn(1).ineg():this.clone()},S.prototype.isNeg=function(){return this.negative!==0},S.prototype.neg=function(){return this.clone().ineg()},S.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},S.prototype.iuor=function(O){for(;this.length<O.length;)this.words[this.length++]=0;for(var z=0;z<O.length;z++)this.words[z]=this.words[z]|O.words[z];return this._strip()},S.prototype.ior=function(O){return x((this.negative|O.negative)===0),this.iuor(O)},S.prototype.or=function(O){return this.length>O.length?this.clone().ior(O):O.clone().ior(this)},S.prototype.uor=function(O){return this.length>O.length?this.clone().iuor(O):O.clone().iuor(this)},S.prototype.iuand=function(O){var z;this.length>O.length?z=O:z=this;for(var J=0;J<z.length;J++)this.words[J]=this.words[J]&O.words[J];return this.length=z.length,this._strip()},S.prototype.iand=function(O){return x((this.negative|O.negative)===0),this.iuand(O)},S.prototype.and=function(O){return this.length>O.length?this.clone().iand(O):O.clone().iand(this)},S.prototype.uand=function(O){return this.length>O.length?this.clone().iuand(O):O.clone().iuand(this)},S.prototype.iuxor=function(O){var z,J;this.length>O.length?(z=this,J=O):(z=O,J=this);for(var ee=0;ee<J.length;ee++)this.words[ee]=z.words[ee]^J.words[ee];if(this!==z)for(;ee<z.length;ee++)this.words[ee]=z.words[ee];return this.length=z.length,this._strip()},S.prototype.ixor=function(O){return x((this.negative|O.negative)===0),this.iuxor(O)},S.prototype.xor=function(O){return this.length>O.length?this.clone().ixor(O):O.clone().ixor(this)},S.prototype.uxor=function(O){return this.length>O.length?this.clone().iuxor(O):O.clone().iuxor(this)},S.prototype.inotn=function(O){x(typeof O=="number"&&O>=0);var z=Math.ceil(O/26)|0,J=O%26;this._expand(z),J>0&&z--;for(var ee=0;ee<z;ee++)this.words[ee]=~this.words[ee]&67108863;return J>0&&(this.words[ee]=~this.words[ee]&67108863>>26-J),this._strip()},S.prototype.notn=function(O){return this.clone().inotn(O)},S.prototype.setn=function(O,z){x(typeof O=="number"&&O>=0);var J=O/26|0,ee=O%26;return this._expand(J+1),z?this.words[J]=this.words[J]|1<<ee:this.words[J]=this.words[J]&~(1<<ee),this._strip()},S.prototype.iadd=function(O){var z;if(this.negative!==0&&O.negative===0)return this.negative=0,z=this.isub(O),this.negative^=1,this._normSign();if(this.negative===0&&O.negative!==0)return O.negative=0,z=this.isub(O),O.negative=1,z._normSign();var J,ee;this.length>O.length?(J=this,ee=O):(J=O,ee=this);for(var ae=0,oe=0;oe<ee.length;oe++)z=(J.words[oe]|0)+(ee.words[oe]|0)+ae,this.words[oe]=z&67108863,ae=z>>>26;for(;ae!==0&&oe<J.length;oe++)z=(J.words[oe]|0)+ae,this.words[oe]=z&67108863,ae=z>>>26;if(this.length=J.length,ae!==0)this.words[this.length]=ae,this.length++;else if(J!==this)for(;oe<J.length;oe++)this.words[oe]=J.words[oe];return this},S.prototype.add=function(O){var z;return O.negative!==0&&this.negative===0?(O.negative=0,z=this.sub(O),O.negative^=1,z):O.negative===0&&this.negative!==0?(this.negative=0,z=O.sub(this),this.negative=1,z):this.length>O.length?this.clone().iadd(O):O.clone().iadd(this)},S.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var z=this.iadd(O);return O.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var J=this.cmp(O);if(J===0)return this.negative=0,this.length=1,this.words[0]=0,this;var ee,ae;J>0?(ee=this,ae=O):(ee=O,ae=this);for(var oe=0,se=0;se<ae.length;se++)z=(ee.words[se]|0)-(ae.words[se]|0)+oe,oe=z>>26,this.words[se]=z&67108863;for(;oe!==0&&se<ee.length;se++)z=(ee.words[se]|0)+oe,oe=z>>26,this.words[se]=z&67108863;if(oe===0&&se<ee.length&&ee!==this)for(;se<ee.length;se++)this.words[se]=ee.words[se];return this.length=Math.max(this.length,se),ee!==this&&(this.negative=1),this._strip()},S.prototype.sub=function(O){return this.clone().isub(O)};function U(W,O,z){z.negative=O.negative^W.negative;var J=W.length+O.length|0;z.length=J,J=J-1|0;var ee=W.words[0]|0,ae=O.words[0]|0,oe=ee*ae,se=oe&67108863,G=oe/67108864|0;z.words[0]=se;for(var q=1;q<J;q++){for(var te=G>>>26,fe=G&67108863,he=Math.min(q,O.length-1),Ee=Math.max(0,q-W.length+1);Ee<=he;Ee++){var we=q-Ee|0;ee=W.words[we]|0,ae=O.words[Ee]|0,oe=ee*ae+fe,te+=oe/67108864|0,fe=oe&67108863}z.words[q]=fe|0,G=te|0}return G!==0?z.words[q]=G|0:z.length--,z._strip()}var H=function(O,z,J){var ee=O.words,ae=z.words,oe=J.words,se=0,G,q,te,fe=ee[0]|0,he=fe&8191,Ee=fe>>>13,we=ee[1]|0,xe=we&8191,$e=we>>>13,ge=ee[2]|0,Se=ge&8191,me=ge>>>13,Be=ee[3]|0,ve=Be&8191,Ae=Be>>>13,Ve=ee[4]|0,Pe=Ve&8191,Re=Ve>>>13,Ne=ee[5]|0,qe=Ne&8191,Ke=Ne>>>13,He=ee[6]|0,Ge=He&8191,rt=He>>>13,st=ee[7]|0,Je=st&8191,Ie=st>>>13,be=ee[8]|0,Te=be&8191,Le=be>>>13,We=ee[9]|0,Ze=We&8191,Qe=We>>>13,St=ae[0]|0,pt=St&8191,ft=St>>>13,Ut=ae[1]|0,$t=Ut&8191,Nt=Ut>>>13,lr=ae[2]|0,Gt=lr&8191,Rt=lr>>>13,Qt=ae[3]|0,Pt=Qt&8191,kt=Qt>>>13,er=ae[4]|0,Lt=er&8191,Bt=er>>>13,ir=ae[5]|0,jt=ir&8191,Ct=ir>>>13,nr=ae[6]|0,je=nr&8191,De=nr>>>13,Me=ae[7]|0,pe=Me&8191,ke=Me>>>13,Oe=ae[8]|0,Fe=Oe&8191,ze=Oe>>>13,Xe=ae[9]|0,tt=Xe&8191,it=Xe>>>13;J.negative=O.negative^z.negative,J.length=19,G=Math.imul(he,pt),q=Math.imul(he,ft),q=q+Math.imul(Ee,pt)|0,te=Math.imul(Ee,ft);var ot=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(ot>>>26)|0,ot&=67108863,G=Math.imul(xe,pt),q=Math.imul(xe,ft),q=q+Math.imul($e,pt)|0,te=Math.imul($e,ft),G=G+Math.imul(he,$t)|0,q=q+Math.imul(he,Nt)|0,q=q+Math.imul(Ee,$t)|0,te=te+Math.imul(Ee,Nt)|0;var at=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(at>>>26)|0,at&=67108863,G=Math.imul(Se,pt),q=Math.imul(Se,ft),q=q+Math.imul(me,pt)|0,te=Math.imul(me,ft),G=G+Math.imul(xe,$t)|0,q=q+Math.imul(xe,Nt)|0,q=q+Math.imul($e,$t)|0,te=te+Math.imul($e,Nt)|0,G=G+Math.imul(he,Gt)|0,q=q+Math.imul(he,Rt)|0,q=q+Math.imul(Ee,Gt)|0,te=te+Math.imul(Ee,Rt)|0;var ct=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(ct>>>26)|0,ct&=67108863,G=Math.imul(ve,pt),q=Math.imul(ve,ft),q=q+Math.imul(Ae,pt)|0,te=Math.imul(Ae,ft),G=G+Math.imul(Se,$t)|0,q=q+Math.imul(Se,Nt)|0,q=q+Math.imul(me,$t)|0,te=te+Math.imul(me,Nt)|0,G=G+Math.imul(xe,Gt)|0,q=q+Math.imul(xe,Rt)|0,q=q+Math.imul($e,Gt)|0,te=te+Math.imul($e,Rt)|0,G=G+Math.imul(he,Pt)|0,q=q+Math.imul(he,kt)|0,q=q+Math.imul(Ee,Pt)|0,te=te+Math.imul(Ee,kt)|0;var dt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(dt>>>26)|0,dt&=67108863,G=Math.imul(Pe,pt),q=Math.imul(Pe,ft),q=q+Math.imul(Re,pt)|0,te=Math.imul(Re,ft),G=G+Math.imul(ve,$t)|0,q=q+Math.imul(ve,Nt)|0,q=q+Math.imul(Ae,$t)|0,te=te+Math.imul(Ae,Nt)|0,G=G+Math.imul(Se,Gt)|0,q=q+Math.imul(Se,Rt)|0,q=q+Math.imul(me,Gt)|0,te=te+Math.imul(me,Rt)|0,G=G+Math.imul(xe,Pt)|0,q=q+Math.imul(xe,kt)|0,q=q+Math.imul($e,Pt)|0,te=te+Math.imul($e,kt)|0,G=G+Math.imul(he,Lt)|0,q=q+Math.imul(he,Bt)|0,q=q+Math.imul(Ee,Lt)|0,te=te+Math.imul(Ee,Bt)|0;var yt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(yt>>>26)|0,yt&=67108863,G=Math.imul(qe,pt),q=Math.imul(qe,ft),q=q+Math.imul(Ke,pt)|0,te=Math.imul(Ke,ft),G=G+Math.imul(Pe,$t)|0,q=q+Math.imul(Pe,Nt)|0,q=q+Math.imul(Re,$t)|0,te=te+Math.imul(Re,Nt)|0,G=G+Math.imul(ve,Gt)|0,q=q+Math.imul(ve,Rt)|0,q=q+Math.imul(Ae,Gt)|0,te=te+Math.imul(Ae,Rt)|0,G=G+Math.imul(Se,Pt)|0,q=q+Math.imul(Se,kt)|0,q=q+Math.imul(me,Pt)|0,te=te+Math.imul(me,kt)|0,G=G+Math.imul(xe,Lt)|0,q=q+Math.imul(xe,Bt)|0,q=q+Math.imul($e,Lt)|0,te=te+Math.imul($e,Bt)|0,G=G+Math.imul(he,jt)|0,q=q+Math.imul(he,Ct)|0,q=q+Math.imul(Ee,jt)|0,te=te+Math.imul(Ee,Ct)|0;var Et=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Et>>>26)|0,Et&=67108863,G=Math.imul(Ge,pt),q=Math.imul(Ge,ft),q=q+Math.imul(rt,pt)|0,te=Math.imul(rt,ft),G=G+Math.imul(qe,$t)|0,q=q+Math.imul(qe,Nt)|0,q=q+Math.imul(Ke,$t)|0,te=te+Math.imul(Ke,Nt)|0,G=G+Math.imul(Pe,Gt)|0,q=q+Math.imul(Pe,Rt)|0,q=q+Math.imul(Re,Gt)|0,te=te+Math.imul(Re,Rt)|0,G=G+Math.imul(ve,Pt)|0,q=q+Math.imul(ve,kt)|0,q=q+Math.imul(Ae,Pt)|0,te=te+Math.imul(Ae,kt)|0,G=G+Math.imul(Se,Lt)|0,q=q+Math.imul(Se,Bt)|0,q=q+Math.imul(me,Lt)|0,te=te+Math.imul(me,Bt)|0,G=G+Math.imul(xe,jt)|0,q=q+Math.imul(xe,Ct)|0,q=q+Math.imul($e,jt)|0,te=te+Math.imul($e,Ct)|0,G=G+Math.imul(he,je)|0,q=q+Math.imul(he,De)|0,q=q+Math.imul(Ee,je)|0,te=te+Math.imul(Ee,De)|0;var mt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(mt>>>26)|0,mt&=67108863,G=Math.imul(Je,pt),q=Math.imul(Je,ft),q=q+Math.imul(Ie,pt)|0,te=Math.imul(Ie,ft),G=G+Math.imul(Ge,$t)|0,q=q+Math.imul(Ge,Nt)|0,q=q+Math.imul(rt,$t)|0,te=te+Math.imul(rt,Nt)|0,G=G+Math.imul(qe,Gt)|0,q=q+Math.imul(qe,Rt)|0,q=q+Math.imul(Ke,Gt)|0,te=te+Math.imul(Ke,Rt)|0,G=G+Math.imul(Pe,Pt)|0,q=q+Math.imul(Pe,kt)|0,q=q+Math.imul(Re,Pt)|0,te=te+Math.imul(Re,kt)|0,G=G+Math.imul(ve,Lt)|0,q=q+Math.imul(ve,Bt)|0,q=q+Math.imul(Ae,Lt)|0,te=te+Math.imul(Ae,Bt)|0,G=G+Math.imul(Se,jt)|0,q=q+Math.imul(Se,Ct)|0,q=q+Math.imul(me,jt)|0,te=te+Math.imul(me,Ct)|0,G=G+Math.imul(xe,je)|0,q=q+Math.imul(xe,De)|0,q=q+Math.imul($e,je)|0,te=te+Math.imul($e,De)|0,G=G+Math.imul(he,pe)|0,q=q+Math.imul(he,ke)|0,q=q+Math.imul(Ee,pe)|0,te=te+Math.imul(Ee,ke)|0;var xt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(xt>>>26)|0,xt&=67108863,G=Math.imul(Te,pt),q=Math.imul(Te,ft),q=q+Math.imul(Le,pt)|0,te=Math.imul(Le,ft),G=G+Math.imul(Je,$t)|0,q=q+Math.imul(Je,Nt)|0,q=q+Math.imul(Ie,$t)|0,te=te+Math.imul(Ie,Nt)|0,G=G+Math.imul(Ge,Gt)|0,q=q+Math.imul(Ge,Rt)|0,q=q+Math.imul(rt,Gt)|0,te=te+Math.imul(rt,Rt)|0,G=G+Math.imul(qe,Pt)|0,q=q+Math.imul(qe,kt)|0,q=q+Math.imul(Ke,Pt)|0,te=te+Math.imul(Ke,kt)|0,G=G+Math.imul(Pe,Lt)|0,q=q+Math.imul(Pe,Bt)|0,q=q+Math.imul(Re,Lt)|0,te=te+Math.imul(Re,Bt)|0,G=G+Math.imul(ve,jt)|0,q=q+Math.imul(ve,Ct)|0,q=q+Math.imul(Ae,jt)|0,te=te+Math.imul(Ae,Ct)|0,G=G+Math.imul(Se,je)|0,q=q+Math.imul(Se,De)|0,q=q+Math.imul(me,je)|0,te=te+Math.imul(me,De)|0,G=G+Math.imul(xe,pe)|0,q=q+Math.imul(xe,ke)|0,q=q+Math.imul($e,pe)|0,te=te+Math.imul($e,ke)|0,G=G+Math.imul(he,Fe)|0,q=q+Math.imul(he,ze)|0,q=q+Math.imul(Ee,Fe)|0,te=te+Math.imul(Ee,ze)|0;var Mt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,G=Math.imul(Ze,pt),q=Math.imul(Ze,ft),q=q+Math.imul(Qe,pt)|0,te=Math.imul(Qe,ft),G=G+Math.imul(Te,$t)|0,q=q+Math.imul(Te,Nt)|0,q=q+Math.imul(Le,$t)|0,te=te+Math.imul(Le,Nt)|0,G=G+Math.imul(Je,Gt)|0,q=q+Math.imul(Je,Rt)|0,q=q+Math.imul(Ie,Gt)|0,te=te+Math.imul(Ie,Rt)|0,G=G+Math.imul(Ge,Pt)|0,q=q+Math.imul(Ge,kt)|0,q=q+Math.imul(rt,Pt)|0,te=te+Math.imul(rt,kt)|0,G=G+Math.imul(qe,Lt)|0,q=q+Math.imul(qe,Bt)|0,q=q+Math.imul(Ke,Lt)|0,te=te+Math.imul(Ke,Bt)|0,G=G+Math.imul(Pe,jt)|0,q=q+Math.imul(Pe,Ct)|0,q=q+Math.imul(Re,jt)|0,te=te+Math.imul(Re,Ct)|0,G=G+Math.imul(ve,je)|0,q=q+Math.imul(ve,De)|0,q=q+Math.imul(Ae,je)|0,te=te+Math.imul(Ae,De)|0,G=G+Math.imul(Se,pe)|0,q=q+Math.imul(Se,ke)|0,q=q+Math.imul(me,pe)|0,te=te+Math.imul(me,ke)|0,G=G+Math.imul(xe,Fe)|0,q=q+Math.imul(xe,ze)|0,q=q+Math.imul($e,Fe)|0,te=te+Math.imul($e,ze)|0,G=G+Math.imul(he,tt)|0,q=q+Math.imul(he,it)|0,q=q+Math.imul(Ee,tt)|0,te=te+Math.imul(Ee,it)|0;var Ot=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,G=Math.imul(Ze,$t),q=Math.imul(Ze,Nt),q=q+Math.imul(Qe,$t)|0,te=Math.imul(Qe,Nt),G=G+Math.imul(Te,Gt)|0,q=q+Math.imul(Te,Rt)|0,q=q+Math.imul(Le,Gt)|0,te=te+Math.imul(Le,Rt)|0,G=G+Math.imul(Je,Pt)|0,q=q+Math.imul(Je,kt)|0,q=q+Math.imul(Ie,Pt)|0,te=te+Math.imul(Ie,kt)|0,G=G+Math.imul(Ge,Lt)|0,q=q+Math.imul(Ge,Bt)|0,q=q+Math.imul(rt,Lt)|0,te=te+Math.imul(rt,Bt)|0,G=G+Math.imul(qe,jt)|0,q=q+Math.imul(qe,Ct)|0,q=q+Math.imul(Ke,jt)|0,te=te+Math.imul(Ke,Ct)|0,G=G+Math.imul(Pe,je)|0,q=q+Math.imul(Pe,De)|0,q=q+Math.imul(Re,je)|0,te=te+Math.imul(Re,De)|0,G=G+Math.imul(ve,pe)|0,q=q+Math.imul(ve,ke)|0,q=q+Math.imul(Ae,pe)|0,te=te+Math.imul(Ae,ke)|0,G=G+Math.imul(Se,Fe)|0,q=q+Math.imul(Se,ze)|0,q=q+Math.imul(me,Fe)|0,te=te+Math.imul(me,ze)|0,G=G+Math.imul(xe,tt)|0,q=q+Math.imul(xe,it)|0,q=q+Math.imul($e,tt)|0,te=te+Math.imul($e,it)|0;var Ht=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,G=Math.imul(Ze,Gt),q=Math.imul(Ze,Rt),q=q+Math.imul(Qe,Gt)|0,te=Math.imul(Qe,Rt),G=G+Math.imul(Te,Pt)|0,q=q+Math.imul(Te,kt)|0,q=q+Math.imul(Le,Pt)|0,te=te+Math.imul(Le,kt)|0,G=G+Math.imul(Je,Lt)|0,q=q+Math.imul(Je,Bt)|0,q=q+Math.imul(Ie,Lt)|0,te=te+Math.imul(Ie,Bt)|0,G=G+Math.imul(Ge,jt)|0,q=q+Math.imul(Ge,Ct)|0,q=q+Math.imul(rt,jt)|0,te=te+Math.imul(rt,Ct)|0,G=G+Math.imul(qe,je)|0,q=q+Math.imul(qe,De)|0,q=q+Math.imul(Ke,je)|0,te=te+Math.imul(Ke,De)|0,G=G+Math.imul(Pe,pe)|0,q=q+Math.imul(Pe,ke)|0,q=q+Math.imul(Re,pe)|0,te=te+Math.imul(Re,ke)|0,G=G+Math.imul(ve,Fe)|0,q=q+Math.imul(ve,ze)|0,q=q+Math.imul(Ae,Fe)|0,te=te+Math.imul(Ae,ze)|0,G=G+Math.imul(Se,tt)|0,q=q+Math.imul(Se,it)|0,q=q+Math.imul(me,tt)|0,te=te+Math.imul(me,it)|0;var Ft=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,G=Math.imul(Ze,Pt),q=Math.imul(Ze,kt),q=q+Math.imul(Qe,Pt)|0,te=Math.imul(Qe,kt),G=G+Math.imul(Te,Lt)|0,q=q+Math.imul(Te,Bt)|0,q=q+Math.imul(Le,Lt)|0,te=te+Math.imul(Le,Bt)|0,G=G+Math.imul(Je,jt)|0,q=q+Math.imul(Je,Ct)|0,q=q+Math.imul(Ie,jt)|0,te=te+Math.imul(Ie,Ct)|0,G=G+Math.imul(Ge,je)|0,q=q+Math.imul(Ge,De)|0,q=q+Math.imul(rt,je)|0,te=te+Math.imul(rt,De)|0,G=G+Math.imul(qe,pe)|0,q=q+Math.imul(qe,ke)|0,q=q+Math.imul(Ke,pe)|0,te=te+Math.imul(Ke,ke)|0,G=G+Math.imul(Pe,Fe)|0,q=q+Math.imul(Pe,ze)|0,q=q+Math.imul(Re,Fe)|0,te=te+Math.imul(Re,ze)|0,G=G+Math.imul(ve,tt)|0,q=q+Math.imul(ve,it)|0,q=q+Math.imul(Ae,tt)|0,te=te+Math.imul(Ae,it)|0;var Wt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,G=Math.imul(Ze,Lt),q=Math.imul(Ze,Bt),q=q+Math.imul(Qe,Lt)|0,te=Math.imul(Qe,Bt),G=G+Math.imul(Te,jt)|0,q=q+Math.imul(Te,Ct)|0,q=q+Math.imul(Le,jt)|0,te=te+Math.imul(Le,Ct)|0,G=G+Math.imul(Je,je)|0,q=q+Math.imul(Je,De)|0,q=q+Math.imul(Ie,je)|0,te=te+Math.imul(Ie,De)|0,G=G+Math.imul(Ge,pe)|0,q=q+Math.imul(Ge,ke)|0,q=q+Math.imul(rt,pe)|0,te=te+Math.imul(rt,ke)|0,G=G+Math.imul(qe,Fe)|0,q=q+Math.imul(qe,ze)|0,q=q+Math.imul(Ke,Fe)|0,te=te+Math.imul(Ke,ze)|0,G=G+Math.imul(Pe,tt)|0,q=q+Math.imul(Pe,it)|0,q=q+Math.imul(Re,tt)|0,te=te+Math.imul(Re,it)|0;var Jt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,G=Math.imul(Ze,jt),q=Math.imul(Ze,Ct),q=q+Math.imul(Qe,jt)|0,te=Math.imul(Qe,Ct),G=G+Math.imul(Te,je)|0,q=q+Math.imul(Te,De)|0,q=q+Math.imul(Le,je)|0,te=te+Math.imul(Le,De)|0,G=G+Math.imul(Je,pe)|0,q=q+Math.imul(Je,ke)|0,q=q+Math.imul(Ie,pe)|0,te=te+Math.imul(Ie,ke)|0,G=G+Math.imul(Ge,Fe)|0,q=q+Math.imul(Ge,ze)|0,q=q+Math.imul(rt,Fe)|0,te=te+Math.imul(rt,ze)|0,G=G+Math.imul(qe,tt)|0,q=q+Math.imul(qe,it)|0,q=q+Math.imul(Ke,tt)|0,te=te+Math.imul(Ke,it)|0;var Kt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,G=Math.imul(Ze,je),q=Math.imul(Ze,De),q=q+Math.imul(Qe,je)|0,te=Math.imul(Qe,De),G=G+Math.imul(Te,pe)|0,q=q+Math.imul(Te,ke)|0,q=q+Math.imul(Le,pe)|0,te=te+Math.imul(Le,ke)|0,G=G+Math.imul(Je,Fe)|0,q=q+Math.imul(Je,ze)|0,q=q+Math.imul(Ie,Fe)|0,te=te+Math.imul(Ie,ze)|0,G=G+Math.imul(Ge,tt)|0,q=q+Math.imul(Ge,it)|0,q=q+Math.imul(rt,tt)|0,te=te+Math.imul(rt,it)|0;var gt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(gt>>>26)|0,gt&=67108863,G=Math.imul(Ze,pe),q=Math.imul(Ze,ke),q=q+Math.imul(Qe,pe)|0,te=Math.imul(Qe,ke),G=G+Math.imul(Te,Fe)|0,q=q+Math.imul(Te,ze)|0,q=q+Math.imul(Le,Fe)|0,te=te+Math.imul(Le,ze)|0,G=G+Math.imul(Je,tt)|0,q=q+Math.imul(Je,it)|0,q=q+Math.imul(Ie,tt)|0,te=te+Math.imul(Ie,it)|0;var _t=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(_t>>>26)|0,_t&=67108863,G=Math.imul(Ze,Fe),q=Math.imul(Ze,ze),q=q+Math.imul(Qe,Fe)|0,te=Math.imul(Qe,ze),G=G+Math.imul(Te,tt)|0,q=q+Math.imul(Te,it)|0,q=q+Math.imul(Le,tt)|0,te=te+Math.imul(Le,it)|0;var It=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(It>>>26)|0,It&=67108863,G=Math.imul(Ze,tt),q=Math.imul(Ze,it),q=q+Math.imul(Qe,tt)|0,te=Math.imul(Qe,it);var At=(se+G|0)+((q&8191)<<13)|0;return se=(te+(q>>>13)|0)+(At>>>26)|0,At&=67108863,oe[0]=ot,oe[1]=at,oe[2]=ct,oe[3]=dt,oe[4]=yt,oe[5]=Et,oe[6]=mt,oe[7]=xt,oe[8]=Mt,oe[9]=Ot,oe[10]=Ht,oe[11]=Ft,oe[12]=Wt,oe[13]=Jt,oe[14]=Kt,oe[15]=gt,oe[16]=_t,oe[17]=It,oe[18]=At,se!==0&&(oe[19]=se,J.length++),J};Math.imul||(H=U);function Y(W,O,z){z.negative=O.negative^W.negative,z.length=W.length+O.length;for(var J=0,ee=0,ae=0;ae<z.length-1;ae++){var oe=ee;ee=0;for(var se=J&67108863,G=Math.min(ae,O.length-1),q=Math.max(0,ae-W.length+1);q<=G;q++){var te=ae-q,fe=W.words[te]|0,he=O.words[q]|0,Ee=fe*he,we=Ee&67108863;oe=oe+(Ee/67108864|0)|0,we=we+se|0,se=we&67108863,oe=oe+(we>>>26)|0,ee+=oe>>>26,oe&=67108863}z.words[ae]=se,J=oe,oe=ee}return J!==0?z.words[ae]=J:z.length--,z._strip()}function Z(W,O,z){return Y(W,O,z)}S.prototype.mulTo=function(O,z){var J,ee=this.length+O.length;return this.length===10&&O.length===10?J=H(this,O,z):ee<63?J=U(this,O,z):ee<1024?J=Y(this,O,z):J=Z(this,O,z),J},S.prototype.mul=function(O){var z=new S(null);return z.words=new Array(this.length+O.length),this.mulTo(O,z)},S.prototype.mulf=function(O){var z=new S(null);return z.words=new Array(this.length+O.length),Z(this,O,z)},S.prototype.imul=function(O){return this.clone().mulTo(O,this)},S.prototype.imuln=function(O){var z=O<0;z&&(O=-O),x(typeof O=="number"),x(O<67108864);for(var J=0,ee=0;ee<this.length;ee++){var ae=(this.words[ee]|0)*O,oe=(ae&67108863)+(J&67108863);J>>=26,J+=ae/67108864|0,J+=oe>>>26,this.words[ee]=oe&67108863}return J!==0&&(this.words[ee]=J,this.length++),z?this.ineg():this},S.prototype.muln=function(O){return this.clone().imuln(O)},S.prototype.sqr=function(){return this.mul(this)},S.prototype.isqr=function(){return this.imul(this.clone())},S.prototype.pow=function(O){var z=j(O);if(z.length===0)return new S(1);for(var J=this,ee=0;ee<z.length&&z[ee]===0;ee++,J=J.sqr());if(++ee<z.length)for(var ae=J.sqr();ee<z.length;ee++,ae=ae.sqr())z[ee]!==0&&(J=J.mul(ae));return J},S.prototype.iushln=function(O){x(typeof O=="number"&&O>=0);var z=O%26,J=(O-z)/26,ee=67108863>>>26-z<<26-z,ae;if(z!==0){var oe=0;for(ae=0;ae<this.length;ae++){var se=this.words[ae]&ee,G=(this.words[ae]|0)-se<<z;this.words[ae]=G|oe,oe=se>>>26-z}oe&&(this.words[ae]=oe,this.length++)}if(J!==0){for(ae=this.length-1;ae>=0;ae--)this.words[ae+J]=this.words[ae];for(ae=0;ae<J;ae++)this.words[ae]=0;this.length+=J}return this._strip()},S.prototype.ishln=function(O){return x(this.negative===0),this.iushln(O)},S.prototype.iushrn=function(O,z,J){x(typeof O=="number"&&O>=0);var ee;z?ee=(z-z%26)/26:ee=0;var ae=O%26,oe=Math.min((O-ae)/26,this.length),se=67108863^67108863>>>ae<<ae,G=J;if(ee-=oe,ee=Math.max(0,ee),G){for(var q=0;q<oe;q++)G.words[q]=this.words[q];G.length=oe}if(oe!==0)if(this.length>oe)for(this.length-=oe,q=0;q<this.length;q++)this.words[q]=this.words[q+oe];else this.words[0]=0,this.length=1;var te=0;for(q=this.length-1;q>=0&&(te!==0||q>=ee);q--){var fe=this.words[q]|0;this.words[q]=te<<26-ae|fe>>>ae,te=fe&se}return G&&te!==0&&(G.words[G.length++]=te),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},S.prototype.ishrn=function(O,z,J){return x(this.negative===0),this.iushrn(O,z,J)},S.prototype.shln=function(O){return this.clone().ishln(O)},S.prototype.ushln=function(O){return this.clone().iushln(O)},S.prototype.shrn=function(O){return this.clone().ishrn(O)},S.prototype.ushrn=function(O){return this.clone().iushrn(O)},S.prototype.testn=function(O){x(typeof O=="number"&&O>=0);var z=O%26,J=(O-z)/26,ee=1<<z;if(this.length<=J)return!1;var ae=this.words[J];return!!(ae&ee)},S.prototype.imaskn=function(O){x(typeof O=="number"&&O>=0);var z=O%26,J=(O-z)/26;if(x(this.negative===0,"imaskn works only with positive numbers"),this.length<=J)return this;if(z!==0&&J++,this.length=Math.min(J,this.length),z!==0){var ee=67108863^67108863>>>z<<z;this.words[this.length-1]&=ee}return this._strip()},S.prototype.maskn=function(O){return this.clone().imaskn(O)},S.prototype.iaddn=function(O){return x(typeof O=="number"),x(O<67108864),O<0?this.isubn(-O):this.negative!==0?this.length===1&&(this.words[0]|0)<=O?(this.words[0]=O-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(O),this.negative=1,this):this._iaddn(O)},S.prototype._iaddn=function(O){this.words[0]+=O;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},S.prototype.isubn=function(O){if(x(typeof O=="number"),x(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this._strip()},S.prototype.addn=function(O){return this.clone().iaddn(O)},S.prototype.subn=function(O){return this.clone().isubn(O)},S.prototype.iabs=function(){return this.negative=0,this},S.prototype.abs=function(){return this.clone().iabs()},S.prototype._ishlnsubmul=function(O,z,J){var ee=O.length+J,ae;this._expand(ee);var oe,se=0;for(ae=0;ae<O.length;ae++){oe=(this.words[ae+J]|0)+se;var G=(O.words[ae]|0)*z;oe-=G&67108863,se=(oe>>26)-(G/67108864|0),this.words[ae+J]=oe&67108863}for(;ae<this.length-J;ae++)oe=(this.words[ae+J]|0)+se,se=oe>>26,this.words[ae+J]=oe&67108863;if(se===0)return this._strip();for(x(se===-1),se=0,ae=0;ae<this.length;ae++)oe=-(this.words[ae]|0)+se,se=oe>>26,this.words[ae]=oe&67108863;return this.negative=1,this._strip()},S.prototype._wordDiv=function(O,z){var J=this.length-O.length,ee=this.clone(),ae=O,oe=ae.words[ae.length-1]|0,se=this._countBits(oe);J=26-se,J!==0&&(ae=ae.ushln(J),ee.iushln(J),oe=ae.words[ae.length-1]|0);var G=ee.length-ae.length,q;if(z!=="mod"){q=new S(null),q.length=G+1,q.words=new Array(q.length);for(var te=0;te<q.length;te++)q.words[te]=0}var fe=ee.clone()._ishlnsubmul(ae,1,G);fe.negative===0&&(ee=fe,q&&(q.words[G]=1));for(var he=G-1;he>=0;he--){var Ee=(ee.words[ae.length+he]|0)*67108864+(ee.words[ae.length+he-1]|0);for(Ee=Math.min(Ee/oe|0,67108863),ee._ishlnsubmul(ae,Ee,he);ee.negative!==0;)Ee--,ee.negative=0,ee._ishlnsubmul(ae,1,he),ee.isZero()||(ee.negative^=1);q&&(q.words[he]=Ee)}return q&&q._strip(),ee._strip(),z!=="div"&&J!==0&&ee.iushrn(J),{div:q||null,mod:ee}},S.prototype.divmod=function(O,z,J){if(x(!O.isZero()),this.isZero())return{div:new S(0),mod:new S(0)};var ee,ae,oe;return this.negative!==0&&O.negative===0?(oe=this.neg().divmod(O,z),z!=="mod"&&(ee=oe.div.neg()),z!=="div"&&(ae=oe.mod.neg(),J&&ae.negative!==0&&ae.iadd(O)),{div:ee,mod:ae}):this.negative===0&&O.negative!==0?(oe=this.divmod(O.neg(),z),z!=="mod"&&(ee=oe.div.neg()),{div:ee,mod:oe.mod}):this.negative&O.negative?(oe=this.neg().divmod(O.neg(),z),z!=="div"&&(ae=oe.mod.neg(),J&&ae.negative!==0&&ae.isub(O)),{div:oe.div,mod:ae}):O.length>this.length||this.cmp(O)<0?{div:new S(0),mod:this}:O.length===1?z==="div"?{div:this.divn(O.words[0]),mod:null}:z==="mod"?{div:null,mod:new S(this.modrn(O.words[0]))}:{div:this.divn(O.words[0]),mod:new S(this.modrn(O.words[0]))}:this._wordDiv(O,z)},S.prototype.div=function(O){return this.divmod(O,"div",!1).div},S.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},S.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},S.prototype.divRound=function(O){var z=this.divmod(O);if(z.mod.isZero())return z.div;var J=z.div.negative!==0?z.mod.isub(O):z.mod,ee=O.ushrn(1),ae=O.andln(1),oe=J.cmp(ee);return oe<0||ae===1&&oe===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},S.prototype.modrn=function(O){var z=O<0;z&&(O=-O),x(O<=67108863);for(var J=(1<<26)%O,ee=0,ae=this.length-1;ae>=0;ae--)ee=(J*ee+(this.words[ae]|0))%O;return z?-ee:ee},S.prototype.modn=function(O){return this.modrn(O)},S.prototype.idivn=function(O){var z=O<0;z&&(O=-O),x(O<=67108863);for(var J=0,ee=this.length-1;ee>=0;ee--){var ae=(this.words[ee]|0)+J*67108864;this.words[ee]=ae/O|0,J=ae%O}return this._strip(),z?this.ineg():this},S.prototype.divn=function(O){return this.clone().idivn(O)},S.prototype.egcd=function(O){x(O.negative===0),x(!O.isZero());var z=this,J=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var ee=new S(1),ae=new S(0),oe=new S(0),se=new S(1),G=0;z.isEven()&&J.isEven();)z.iushrn(1),J.iushrn(1),++G;for(var q=J.clone(),te=z.clone();!z.isZero();){for(var fe=0,he=1;!(z.words[0]&he)&&fe<26;++fe,he<<=1);if(fe>0)for(z.iushrn(fe);fe-- >0;)(ee.isOdd()||ae.isOdd())&&(ee.iadd(q),ae.isub(te)),ee.iushrn(1),ae.iushrn(1);for(var Ee=0,we=1;!(J.words[0]&we)&&Ee<26;++Ee,we<<=1);if(Ee>0)for(J.iushrn(Ee);Ee-- >0;)(oe.isOdd()||se.isOdd())&&(oe.iadd(q),se.isub(te)),oe.iushrn(1),se.iushrn(1);z.cmp(J)>=0?(z.isub(J),ee.isub(oe),ae.isub(se)):(J.isub(z),oe.isub(ee),se.isub(ae))}return{a:oe,b:se,gcd:J.iushln(G)}},S.prototype._invmp=function(O){x(O.negative===0),x(!O.isZero());var z=this,J=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var ee=new S(1),ae=new S(0),oe=J.clone();z.cmpn(1)>0&&J.cmpn(1)>0;){for(var se=0,G=1;!(z.words[0]&G)&&se<26;++se,G<<=1);if(se>0)for(z.iushrn(se);se-- >0;)ee.isOdd()&&ee.iadd(oe),ee.iushrn(1);for(var q=0,te=1;!(J.words[0]&te)&&q<26;++q,te<<=1);if(q>0)for(J.iushrn(q);q-- >0;)ae.isOdd()&&ae.iadd(oe),ae.iushrn(1);z.cmp(J)>=0?(z.isub(J),ee.isub(ae)):(J.isub(z),ae.isub(ee))}var fe;return z.cmpn(1)===0?fe=ee:fe=ae,fe.cmpn(0)<0&&fe.iadd(O),fe},S.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var z=this.clone(),J=O.clone();z.negative=0,J.negative=0;for(var ee=0;z.isEven()&&J.isEven();ee++)z.iushrn(1),J.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;J.isEven();)J.iushrn(1);var ae=z.cmp(J);if(ae<0){var oe=z;z=J,J=oe}else if(ae===0||J.cmpn(1)===0)break;z.isub(J)}while(!0);return J.iushln(ee)},S.prototype.invm=function(O){return this.egcd(O).a.umod(O)},S.prototype.isEven=function(){return(this.words[0]&1)===0},S.prototype.isOdd=function(){return(this.words[0]&1)===1},S.prototype.andln=function(O){return this.words[0]&O},S.prototype.bincn=function(O){x(typeof O=="number");var z=O%26,J=(O-z)/26,ee=1<<z;if(this.length<=J)return this._expand(J+1),this.words[J]|=ee,this;for(var ae=ee,oe=J;ae!==0&&oe<this.length;oe++){var se=this.words[oe]|0;se+=ae,ae=se>>>26,se&=67108863,this.words[oe]=se}return ae!==0&&(this.words[oe]=ae,this.length++),this},S.prototype.isZero=function(){return this.length===1&&this.words[0]===0},S.prototype.cmpn=function(O){var z=O<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this._strip();var J;if(this.length>1)J=1;else{z&&(O=-O),x(O<=67108863,"Number is too big");var ee=this.words[0]|0;J=ee===O?0:ee<O?-1:1}return this.negative!==0?-J|0:J},S.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var z=this.ucmp(O);return this.negative!==0?-z|0:z},S.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;for(var z=0,J=this.length-1;J>=0;J--){var ee=this.words[J]|0,ae=O.words[J]|0;if(ee!==ae){ee<ae?z=-1:ee>ae&&(z=1);break}}return z},S.prototype.gtn=function(O){return this.cmpn(O)===1},S.prototype.gt=function(O){return this.cmp(O)===1},S.prototype.gten=function(O){return this.cmpn(O)>=0},S.prototype.gte=function(O){return this.cmp(O)>=0},S.prototype.ltn=function(O){return this.cmpn(O)===-1},S.prototype.lt=function(O){return this.cmp(O)===-1},S.prototype.lten=function(O){return this.cmpn(O)<=0},S.prototype.lte=function(O){return this.cmp(O)<=0},S.prototype.eqn=function(O){return this.cmpn(O)===0},S.prototype.eq=function(O){return this.cmp(O)===0},S.red=function(O){return new ye(O)},S.prototype.toRed=function(O){return x(!this.red,"Already a number in reduction context"),x(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},S.prototype.fromRed=function(){return x(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},S.prototype._forceRed=function(O){return this.red=O,this},S.prototype.forceRed=function(O){return x(!this.red,"Already a number in reduction context"),this._forceRed(O)},S.prototype.redAdd=function(O){return x(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},S.prototype.redIAdd=function(O){return x(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},S.prototype.redSub=function(O){return x(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},S.prototype.redISub=function(O){return x(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},S.prototype.redShl=function(O){return x(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},S.prototype.redMul=function(O){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},S.prototype.redIMul=function(O){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},S.prototype.redSqr=function(){return x(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},S.prototype.redISqr=function(){return x(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},S.prototype.redSqrt=function(){return x(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},S.prototype.redInvm=function(){return x(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},S.prototype.redNeg=function(){return x(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},S.prototype.redPow=function(O){return x(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var ne={k256:null,p224:null,p192:null,p25519:null};function re(W,O){this.name=W,this.p=new S(O,16),this.n=this.p.bitLength(),this.k=new S(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}re.prototype._tmp=function(){var O=new S(null);return O.words=new Array(Math.ceil(this.n/13)),O},re.prototype.ireduce=function(O){var z=O,J;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),J=z.bitLength();while(J>this.n);var ee=J<this.n?-1:z.ucmp(this.p);return ee===0?(z.words[0]=0,z.length=1):ee>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},re.prototype.split=function(O,z){O.iushrn(this.n,0,z)},re.prototype.imulK=function(O){return O.imul(this.k)};function X(){re.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}E(X,re),X.prototype.split=function(O,z){for(var J=4194303,ee=Math.min(O.length,9),ae=0;ae<ee;ae++)z.words[ae]=O.words[ae];if(z.length=ee,O.length<=9){O.words[0]=0,O.length=1;return}var oe=O.words[9];for(z.words[z.length++]=oe&J,ae=10;ae<O.length;ae++){var se=O.words[ae]|0;O.words[ae-10]=(se&J)<<4|oe>>>22,oe=se}oe>>>=22,O.words[ae-10]=oe,oe===0&&O.length>10?O.length-=10:O.length-=9},X.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;for(var z=0,J=0;J<O.length;J++){var ee=O.words[J]|0;z+=ee*977,O.words[J]=z&67108863,z=ee*64+(z/67108864|0)}return O.words[O.length-1]===0&&(O.length--,O.words[O.length-1]===0&&O.length--),O};function ce(){re.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}E(ce,re);function ue(){re.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}E(ue,re);function _e(){re.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}E(_e,re),_e.prototype.imulK=function(O){for(var z=0,J=0;J<O.length;J++){var ee=(O.words[J]|0)*19+z,ae=ee&67108863;ee>>>=26,O.words[J]=ae,z=ee}return z!==0&&(O.words[O.length++]=z),O},S._prime=function(O){if(ne[O])return ne[O];var z;if(O==="k256")z=new X;else if(O==="p224")z=new ce;else if(O==="p192")z=new ue;else if(O==="p25519")z=new _e;else throw new Error("Unknown prime "+O);return ne[O]=z,z};function ye(W){if(typeof W=="string"){var O=S._prime(W);this.m=O.p,this.prime=O}else x(W.gtn(1),"modulus must be greater than 1"),this.m=W,this.prime=null}ye.prototype._verify1=function(O){x(O.negative===0,"red works only with positives"),x(O.red,"red works only with red numbers")},ye.prototype._verify2=function(O,z){x((O.negative|z.negative)===0,"red works only with positives"),x(O.red&&O.red===z.red,"red works only with red numbers")},ye.prototype.imod=function(O){return this.prime?this.prime.ireduce(O)._forceRed(this):(I(O,O.umod(this.m)._forceRed(this)),O)},ye.prototype.neg=function(O){return O.isZero()?O.clone():this.m.sub(O)._forceRed(this)},ye.prototype.add=function(O,z){this._verify2(O,z);var J=O.add(z);return J.cmp(this.m)>=0&&J.isub(this.m),J._forceRed(this)},ye.prototype.iadd=function(O,z){this._verify2(O,z);var J=O.iadd(z);return J.cmp(this.m)>=0&&J.isub(this.m),J},ye.prototype.sub=function(O,z){this._verify2(O,z);var J=O.sub(z);return J.cmpn(0)<0&&J.iadd(this.m),J._forceRed(this)},ye.prototype.isub=function(O,z){this._verify2(O,z);var J=O.isub(z);return J.cmpn(0)<0&&J.iadd(this.m),J},ye.prototype.shl=function(O,z){return this._verify1(O),this.imod(O.ushln(z))},ye.prototype.imul=function(O,z){return this._verify2(O,z),this.imod(O.imul(z))},ye.prototype.mul=function(O,z){return this._verify2(O,z),this.imod(O.mul(z))},ye.prototype.isqr=function(O){return this.imul(O,O.clone())},ye.prototype.sqr=function(O){return this.mul(O,O)},ye.prototype.sqrt=function(O){if(O.isZero())return O.clone();var z=this.m.andln(3);if(x(z%2===1),z===3){var J=this.m.add(new S(1)).iushrn(2);return this.pow(O,J)}for(var ee=this.m.subn(1),ae=0;!ee.isZero()&&ee.andln(1)===0;)ae++,ee.iushrn(1);x(!ee.isZero());var oe=new S(1).toRed(this),se=oe.redNeg(),G=this.m.subn(1).iushrn(1),q=this.m.bitLength();for(q=new S(2*q*q).toRed(this);this.pow(q,G).cmp(se)!==0;)q.redIAdd(se);for(var te=this.pow(q,ee),fe=this.pow(O,ee.addn(1).iushrn(1)),he=this.pow(O,ee),Ee=ae;he.cmp(oe)!==0;){for(var we=he,xe=0;we.cmp(oe)!==0;xe++)we=we.redSqr();x(xe<Ee);var $e=this.pow(te,new S(1).iushln(Ee-xe-1));fe=fe.redMul($e),te=$e.redSqr(),he=he.redMul(te),Ee=xe}return fe},ye.prototype.invm=function(O){var z=O._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},ye.prototype.pow=function(O,z){if(z.isZero())return new S(1).toRed(this);if(z.cmpn(1)===0)return O.clone();var J=4,ee=new Array(1<<J);ee[0]=new S(1).toRed(this),ee[1]=O;for(var ae=2;ae<ee.length;ae++)ee[ae]=this.mul(ee[ae-1],O);var oe=ee[0],se=0,G=0,q=z.bitLength()%26;for(q===0&&(q=26),ae=z.length-1;ae>=0;ae--){for(var te=z.words[ae],fe=q-1;fe>=0;fe--){var he=te>>fe&1;if(oe!==ee[0]&&(oe=this.sqr(oe)),he===0&&se===0){G=0;continue}se<<=1,se|=he,G++,!(G!==J&&(ae!==0||fe!==0))&&(oe=this.mul(oe,ee[se]),G=0,se=0)}q=26}return oe},ye.prototype.convertTo=function(O){var z=O.umod(this.m);return z===O?z.clone():z},ye.prototype.convertFrom=function(O){var z=O.clone();return z.red=null,z},S.mont=function(O){return new ie(O)};function ie(W){ye.call(this,W),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new S(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E(ie,ye),ie.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},ie.prototype.convertFrom=function(O){var z=this.imod(O.mul(this.rinv));return z.red=null,z},ie.prototype.imul=function(O,z){if(O.isZero()||z.isZero())return O.words[0]=0,O.length=1,O;var J=O.imul(z),ee=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ae=J.isub(ee).iushrn(this.shift),oe=ae;return ae.cmp(this.m)>=0?oe=ae.isub(this.m):ae.cmpn(0)<0&&(oe=ae.iadd(this.m)),oe._forceRed(this)},ie.prototype.mul=function(O,z){if(O.isZero()||z.isZero())return new S(0)._forceRed(this);var J=O.mul(z),ee=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ae=J.isub(ee).iushrn(this.shift),oe=ae;return ae.cmp(this.m)>=0?oe=ae.isub(this.m):ae.cmpn(0)<0&&(oe=ae.iadd(this.m)),oe._forceRed(this)},ie.prototype.invm=function(O){var z=this.imod(O._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(t,commonjsGlobal)})(bn$1);var bnExports$1=bn$1.exports;const _BN=getDefaultExportFromCjs(bnExports$1),version$f="bignumber/5.7.0";var BN$1=_BN.BN;const logger$j=new Logger(version$f),_constructorGuard$1={},MAX_SAFE=9007199254740991;let _warnedToStringRadix=!1;class BigNumber{constructor(n,_){n!==_constructorGuard$1&&logger$j.throwError("cannot call constructor directly; use BigNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=_,this._isBigNumber=!0,Object.freeze(this)}fromTwos(n){return toBigNumber(toBN(this).fromTwos(n))}toTwos(n){return toBigNumber(toBN(this).toTwos(n))}abs(){return this._hex[0]==="-"?BigNumber.from(this._hex.substring(1)):this}add(n){return toBigNumber(toBN(this).add(toBN(n)))}sub(n){return toBigNumber(toBN(this).sub(toBN(n)))}div(n){return BigNumber.from(n).isZero()&&throwFault("division-by-zero","div"),toBigNumber(toBN(this).div(toBN(n)))}mul(n){return toBigNumber(toBN(this).mul(toBN(n)))}mod(n){const _=toBN(n);return _.isNeg()&&throwFault("division-by-zero","mod"),toBigNumber(toBN(this).umod(_))}pow(n){const _=toBN(n);return _.isNeg()&&throwFault("negative-power","pow"),toBigNumber(toBN(this).pow(_))}and(n){const _=toBN(n);return(this.isNegative()||_.isNeg())&&throwFault("unbound-bitwise-result","and"),toBigNumber(toBN(this).and(_))}or(n){const _=toBN(n);return(this.isNegative()||_.isNeg())&&throwFault("unbound-bitwise-result","or"),toBigNumber(toBN(this).or(_))}xor(n){const _=toBN(n);return(this.isNegative()||_.isNeg())&&throwFault("unbound-bitwise-result","xor"),toBigNumber(toBN(this).xor(_))}mask(n){return(this.isNegative()||n<0)&&throwFault("negative-width","mask"),toBigNumber(toBN(this).maskn(n))}shl(n){return(this.isNegative()||n<0)&&throwFault("negative-width","shl"),toBigNumber(toBN(this).shln(n))}shr(n){return(this.isNegative()||n<0)&&throwFault("negative-width","shr"),toBigNumber(toBN(this).shrn(n))}eq(n){return toBN(this).eq(toBN(n))}lt(n){return toBN(this).lt(toBN(n))}lte(n){return toBN(this).lte(toBN(n))}gt(n){return toBN(this).gt(toBN(n))}gte(n){return toBN(this).gte(toBN(n))}isNegative(){return this._hex[0]==="-"}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch{throwFault("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return logger$j.throwError("this platform does not support BigInt",Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?_warnedToStringRadix||(_warnedToStringRadix=!0,logger$j.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?logger$j.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger.errors.UNEXPECTED_ARGUMENT,{}):logger$j.throwError("BigNumber.toString does not accept parameters",Logger.errors.UNEXPECTED_ARGUMENT,{})),toBN(this).toString(10)}toHexString(){return this._hex}toJSON(n){return{type:"BigNumber",hex:this.toHexString()}}static from(n){if(n instanceof BigNumber)return n;if(typeof n=="string")return n.match(/^-?0x[0-9a-f]+$/i)?new BigNumber(_constructorGuard$1,toHex(n)):n.match(/^-?[0-9]+$/)?new BigNumber(_constructorGuard$1,toHex(new BN$1(n))):logger$j.throwArgumentError("invalid BigNumber string","value",n);if(typeof n=="number")return n%1&&throwFault("underflow","BigNumber.from",n),(n>=MAX_SAFE||n<=-MAX_SAFE)&&throwFault("overflow","BigNumber.from",n),BigNumber.from(String(n));const _=n;if(typeof _=="bigint")return BigNumber.from(_.toString());if(isBytes(_))return BigNumber.from(hexlify(_));if(_)if(_.toHexString){const x=_.toHexString();if(typeof x=="string")return BigNumber.from(x)}else{let x=_._hex;if(x==null&&_.type==="BigNumber"&&(x=_.hex),typeof x=="string"&&(isHexString(x)||x[0]==="-"&&isHexString(x.substring(1))))return BigNumber.from(x)}return logger$j.throwArgumentError("invalid BigNumber value","value",n)}static isBigNumber(n){return!!(n&&n._isBigNumber)}}function toHex(t){if(typeof t!="string")return toHex(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&logger$j.throwArgumentError("invalid hex","value",t),t=toHex(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function toBigNumber(t){return BigNumber.from(toHex(t))}function toBN(t){const n=BigNumber.from(t).toHexString();return n[0]==="-"?new BN$1("-"+n.substring(3),16):new BN$1(n.substring(2),16)}function throwFault(t,n,_){const x={fault:t,operation:n};return _!=null&&(x.value=_),logger$j.throwError(t,Logger.errors.NUMERIC_FAULT,x)}function _base36To16(t){return new BN$1(t,36).toString(16)}function keccak256(t){return"0x"+sha3.keccak_256(arrayify(t))}const version$e="rlp/5.7.0",logger$i=new Logger(version$e);function arrayifyInteger(t){const n=[];for(;t;)n.unshift(t&255),t>>=8;return n}function _encode(t){if(Array.isArray(t)){let x=[];if(t.forEach(function(S){x=x.concat(_encode(S))}),x.length<=55)return x.unshift(192+x.length),x;const E=arrayifyInteger(x.length);return E.unshift(247+E.length),E.concat(x)}isBytesLike(t)||logger$i.throwArgumentError("RLP object must be BytesLike","object",t);const n=Array.prototype.slice.call(arrayify(t));if(n.length===1&&n[0]<=127)return n;if(n.length<=55)return n.unshift(128+n.length),n;const _=arrayifyInteger(n.length);return _.unshift(183+_.length),_.concat(n)}function encode$6(t){return hexlify(_encode(t))}const version$d="address/5.7.0",logger$h=new Logger(version$d);function getChecksumAddress(t){isHexString(t,20)||logger$h.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const n=t.substring(2).split(""),_=new Uint8Array(40);for(let E=0;E<40;E++)_[E]=n[E].charCodeAt(0);const x=arrayify(keccak256(_));for(let E=0;E<40;E+=2)x[E>>1]>>4>=8&&(n[E]=n[E].toUpperCase()),(x[E>>1]&15)>=8&&(n[E+1]=n[E+1].toUpperCase());return"0x"+n.join("")}const MAX_SAFE_INTEGER=9007199254740991;function log10(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const ibanLookup={};for(let t=0;t<10;t++)ibanLookup[String(t)]=String(t);for(let t=0;t<26;t++)ibanLookup[String.fromCharCode(65+t)]=String(10+t);const safeDigits=Math.floor(log10(MAX_SAFE_INTEGER));function ibanChecksum(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let n=t.split("").map(x=>ibanLookup[x]).join("");for(;n.length>=safeDigits;){let x=n.substring(0,safeDigits);n=parseInt(x,10)%97+n.substring(x.length)}let _=String(98-parseInt(n,10)%97);for(;_.length<2;)_="0"+_;return _}function getAddress(t){let n=null;if(typeof t!="string"&&logger$h.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),n=getChecksumAddress(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&n!==t&&logger$h.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==ibanChecksum(t)&&logger$h.throwArgumentError("bad icap checksum","address",t),n=_base36To16(t.substring(4));n.length<40;)n="0"+n;n=getChecksumAddress("0x"+n)}else logger$h.throwArgumentError("invalid address","address",t);return n}const version$c="properties/5.7.0";var __awaiter$5=globalThis&&globalThis.__awaiter||function(t,n,_,x){function E(S){return S instanceof _?S:new _(function(C){C(S)})}return new(_||(_=Promise))(function(S,C){function T(I){try{A(x.next(I))}catch(D){C(D)}}function B(I){try{A(x.throw(I))}catch(D){C(D)}}function A(I){I.done?S(I.value):E(I.value).then(T,B)}A((x=x.apply(t,n||[])).next())})};const logger$g=new Logger(version$c);function defineReadOnly(t,n,_){Object.defineProperty(t,n,{enumerable:!0,value:_,writable:!1})}function resolveProperties(t){return __awaiter$5(this,void 0,void 0,function*(){const n=Object.keys(t).map(x=>{const E=t[x];return Promise.resolve(E).then(S=>({key:x,value:S}))});return(yield Promise.all(n)).reduce((x,E)=>(x[E.key]=E.value,x),{})})}function checkProperties(t,n){(!t||typeof t!="object")&&logger$g.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(_=>{n[_]||logger$g.throwArgumentError("invalid object key - "+_,"transaction:"+_,t)})}function shallowCopy(t){const n={};for(const _ in t)n[_]=t[_];return n}const opaque={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function _isFrozen(t){if(t==null||opaque[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const n=Object.keys(t);for(let _=0;_<n.length;_++){let x=null;try{x=t[n[_]]}catch{continue}if(!_isFrozen(x))return!1}return!0}return logger$g.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function _deepCopy(t){if(_isFrozen(t))return t;if(Array.isArray(t))return Object.freeze(t.map(n=>deepCopy(n)));if(typeof t=="object"){const n={};for(const _ in t){const x=t[_];x!==void 0&&defineReadOnly(n,_,deepCopy(x))}return n}return logger$g.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function deepCopy(t){return _deepCopy(t)}class Description{constructor(n){for(const _ in n)this[_]=deepCopy(n[_])}}const version$b="abstract-provider/5.7.0";var __awaiter$4=globalThis&&globalThis.__awaiter||function(t,n,_,x){function E(S){return S instanceof _?S:new _(function(C){C(S)})}return new(_||(_=Promise))(function(S,C){function T(I){try{A(x.next(I))}catch(D){C(D)}}function B(I){try{A(x.throw(I))}catch(D){C(D)}}function A(I){I.done?S(I.value):E(I.value).then(T,B)}A((x=x.apply(t,n||[])).next())})};const logger$f=new Logger(version$b);class Provider{constructor(){logger$f.checkAbstract(new.target,Provider),defineReadOnly(this,"_isProvider",!0)}getFeeData(){return __awaiter$4(this,void 0,void 0,function*(){const{block:n,gasPrice:_}=yield resolveProperties({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(C=>null)});let x=null,E=null,S=null;return n&&n.baseFeePerGas&&(x=n.baseFeePerGas,S=BigNumber.from("1500000000"),E=n.baseFeePerGas.mul(2).add(S)),{lastBaseFeePerGas:x,maxFeePerGas:E,maxPriorityFeePerGas:S,gasPrice:_}})}addListener(n,_){return this.on(n,_)}removeListener(n,_){return this.off(n,_)}static isProvider(n){return!!(n&&n._isProvider)}}const version$a="abstract-signer/5.7.0";var __awaiter$3=globalThis&&globalThis.__awaiter||function(t,n,_,x){function E(S){return S instanceof _?S:new _(function(C){C(S)})}return new(_||(_=Promise))(function(S,C){function T(I){try{A(x.next(I))}catch(D){C(D)}}function B(I){try{A(x.throw(I))}catch(D){C(D)}}function A(I){I.done?S(I.value):E(I.value).then(T,B)}A((x=x.apply(t,n||[])).next())})};const logger$e=new Logger(version$a),allowedTransactionKeys$1=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],forwardErrors=[Logger.errors.INSUFFICIENT_FUNDS,Logger.errors.NONCE_EXPIRED,Logger.errors.REPLACEMENT_UNDERPRICED];class Signer{constructor(){logger$e.checkAbstract(new.target,Signer),defineReadOnly(this,"_isSigner",!0)}getBalance(n){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),n)})}getTransactionCount(n){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),n)})}estimateGas(n){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const _=yield resolveProperties(this.checkTransaction(n));return yield this.provider.estimateGas(_)})}call(n,_){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("call");const x=yield resolveProperties(this.checkTransaction(n));return yield this.provider.call(x,_)})}sendTransaction(n){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const _=yield this.populateTransaction(n),x=yield this.signTransaction(_);return yield this.provider.sendTransaction(x)})}getChainId(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(n){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(n)})}checkTransaction(n){for(const x in n)allowedTransactionKeys$1.indexOf(x)===-1&&logger$e.throwArgumentError("invalid transaction key: "+x,"transaction",n);const _=shallowCopy(n);return _.from==null?_.from=this.getAddress():_.from=Promise.all([Promise.resolve(_.from),this.getAddress()]).then(x=>(x[0].toLowerCase()!==x[1].toLowerCase()&&logger$e.throwArgumentError("from address mismatch","transaction",n),x[0])),_}populateTransaction(n){return __awaiter$3(this,void 0,void 0,function*(){const _=yield resolveProperties(this.checkTransaction(n));_.to!=null&&(_.to=Promise.resolve(_.to).then(E=>__awaiter$3(this,void 0,void 0,function*(){if(E==null)return null;const S=yield this.resolveName(E);return S==null&&logger$e.throwArgumentError("provided ENS name resolves to null","tx.to",E),S})),_.to.catch(E=>{}));const x=_.maxFeePerGas!=null||_.maxPriorityFeePerGas!=null;if(_.gasPrice!=null&&(_.type===2||x)?logger$e.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",n):(_.type===0||_.type===1)&&x&&logger$e.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",n),(_.type===2||_.type==null)&&_.maxFeePerGas!=null&&_.maxPriorityFeePerGas!=null)_.type=2;else if(_.type===0||_.type===1)_.gasPrice==null&&(_.gasPrice=this.getGasPrice());else{const E=yield this.getFeeData();if(_.type==null)if(E.maxFeePerGas!=null&&E.maxPriorityFeePerGas!=null)if(_.type=2,_.gasPrice!=null){const S=_.gasPrice;delete _.gasPrice,_.maxFeePerGas=S,_.maxPriorityFeePerGas=S}else _.maxFeePerGas==null&&(_.maxFeePerGas=E.maxFeePerGas),_.maxPriorityFeePerGas==null&&(_.maxPriorityFeePerGas=E.maxPriorityFeePerGas);else E.gasPrice!=null?(x&&logger$e.throwError("network does not support EIP-1559",Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),_.gasPrice==null&&(_.gasPrice=E.gasPrice),_.type=0):logger$e.throwError("failed to get consistent fee data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else _.type===2&&(_.maxFeePerGas==null&&(_.maxFeePerGas=E.maxFeePerGas),_.maxPriorityFeePerGas==null&&(_.maxPriorityFeePerGas=E.maxPriorityFeePerGas))}return _.nonce==null&&(_.nonce=this.getTransactionCount("pending")),_.gasLimit==null&&(_.gasLimit=this.estimateGas(_).catch(E=>{if(forwardErrors.indexOf(E.code)>=0)throw E;return logger$e.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:E,tx:_})})),_.chainId==null?_.chainId=this.getChainId():_.chainId=Promise.all([Promise.resolve(_.chainId),this.getChainId()]).then(E=>(E[1]!==0&&E[0]!==E[1]&&logger$e.throwArgumentError("chainId address mismatch","transaction",n),E[0])),yield resolveProperties(_)})}_checkProvider(n){this.provider||logger$e.throwError("missing provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:n||"_checkProvider"})}static isSigner(n){return!!(n&&n._isSigner)}}const version$9="strings/5.7.0",logger$d=new Logger(version$9);var UnicodeNormalizationForm;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(UnicodeNormalizationForm||(UnicodeNormalizationForm={}));var Utf8ErrorReason;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Utf8ErrorReason||(Utf8ErrorReason={}));function toUtf8Bytes(t,n=UnicodeNormalizationForm.current){n!=UnicodeNormalizationForm.current&&(logger$d.checkNormalize(),t=t.normalize(n));let _=[];for(let x=0;x<t.length;x++){const E=t.charCodeAt(x);if(E<128)_.push(E);else if(E<2048)_.push(E>>6|192),_.push(E&63|128);else if((E&64512)==55296){x++;const S=t.charCodeAt(x);if(x>=t.length||(S&64512)!==56320)throw new Error("invalid utf-8 string");const C=65536+((E&1023)<<10)+(S&1023);_.push(C>>18|240),_.push(C>>12&63|128),_.push(C>>6&63|128),_.push(C&63|128)}else _.push(E>>12|224),_.push(E>>6&63|128),_.push(E&63|128)}return arrayify(_)}function id$1(t){return keccak256(toUtf8Bytes(t))}const version$8="hash/5.7.0",messagePrefix=`Ethereum Signed Message:
`;function hashMessage(t){return typeof t=="string"&&(t=toUtf8Bytes(t)),keccak256(concat([toUtf8Bytes(messagePrefix),toUtf8Bytes(String(t.length)),t]))}var __awaiter$2=globalThis&&globalThis.__awaiter||function(t,n,_,x){function E(S){return S instanceof _?S:new _(function(C){C(S)})}return new(_||(_=Promise))(function(S,C){function T(I){try{A(x.next(I))}catch(D){C(D)}}function B(I){try{A(x.throw(I))}catch(D){C(D)}}function A(I){I.done?S(I.value):E(I.value).then(T,B)}A((x=x.apply(t,n||[])).next())})};const logger$c=new Logger(version$8),padding=new Uint8Array(32);padding.fill(0);const NegativeOne=BigNumber.from(-1),Zero=BigNumber.from(0),One=BigNumber.from(1),MaxUint256=BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(t){const n=arrayify(t),_=n.length%32;return _?hexConcat([n,padding.slice(_)]):hexlify(n)}const hexTrue=hexZeroPad(One.toHexString(),32),hexFalse=hexZeroPad(Zero.toHexString(),32),domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(t){return function(n){return typeof n!="string"&&logger$c.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,n),n}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(t){try{return BigNumber.from(t).toString()}catch{}return logger$c.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return getAddress(t).toLowerCase()}catch{}return logger$c.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const n=arrayify(t);if(n.length!==32)throw new Error("bad length");return hexlify(n)}catch{}return logger$c.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function getBaseEncoder(t){{const n=t.match(/^(u?)int(\d*)$/);if(n){const _=n[1]==="",x=parseInt(n[2]||"256");(x%8!==0||x>256||n[2]&&n[2]!==String(x))&&logger$c.throwArgumentError("invalid numeric width","type",t);const E=MaxUint256.mask(_?x-1:x),S=_?E.add(One).mul(NegativeOne):Zero;return function(C){const T=BigNumber.from(C);return(T.lt(S)||T.gt(E))&&logger$c.throwArgumentError(`value out-of-bounds for ${t}`,"value",C),hexZeroPad(T.toTwos(256).toHexString(),32)}}}{const n=t.match(/^bytes(\d+)$/);if(n){const _=parseInt(n[1]);return(_===0||_>32||n[1]!==String(_))&&logger$c.throwArgumentError("invalid bytes width","type",t),function(x){return arrayify(x).length!==_&&logger$c.throwArgumentError(`invalid length for ${t}`,"value",x),hexPadRight(x)}}}switch(t){case"address":return function(n){return hexZeroPad(getAddress(n),32)};case"bool":return function(n){return n?hexTrue:hexFalse};case"bytes":return function(n){return keccak256(n)};case"string":return function(n){return id$1(n)}}return null}function encodeType(t,n){return`${t}(${n.map(({name:_,type:x})=>x+" "+_).join(",")})`}class TypedDataEncoder{constructor(n){defineReadOnly(this,"types",Object.freeze(deepCopy(n))),defineReadOnly(this,"_encoderCache",{}),defineReadOnly(this,"_types",{});const _={},x={},E={};Object.keys(n).forEach(T=>{_[T]={},x[T]=[],E[T]={}});for(const T in n){const B={};n[T].forEach(A=>{B[A.name]&&logger$c.throwArgumentError(`duplicate variable name ${JSON.stringify(A.name)} in ${JSON.stringify(T)}`,"types",n),B[A.name]=!0;const I=A.type.match(/^([^\x5b]*)(\x5b|$)/)[1];I===T&&logger$c.throwArgumentError(`circular type reference to ${JSON.stringify(I)}`,"types",n),!getBaseEncoder(I)&&(x[I]||logger$c.throwArgumentError(`unknown type ${JSON.stringify(I)}`,"types",n),x[I].push(T),_[T][I]=!0)})}const S=Object.keys(x).filter(T=>x[T].length===0);S.length===0?logger$c.throwArgumentError("missing primary type","types",n):S.length>1&&logger$c.throwArgumentError(`ambiguous primary types or unused types: ${S.map(T=>JSON.stringify(T)).join(", ")}`,"types",n),defineReadOnly(this,"primaryType",S[0]);function C(T,B){B[T]&&logger$c.throwArgumentError(`circular type reference to ${JSON.stringify(T)}`,"types",n),B[T]=!0,Object.keys(_[T]).forEach(A=>{x[A]&&(C(A,B),Object.keys(B).forEach(I=>{E[I][A]=!0}))}),delete B[T]}C(this.primaryType,{});for(const T in E){const B=Object.keys(E[T]);B.sort(),this._types[T]=encodeType(T,n[T])+B.map(A=>encodeType(A,n[A])).join("")}}getEncoder(n){let _=this._encoderCache[n];return _||(_=this._encoderCache[n]=this._getEncoder(n)),_}_getEncoder(n){{const E=getBaseEncoder(n);if(E)return E}const _=n.match(/^(.*)(\x5b(\d*)\x5d)$/);if(_){const E=_[1],S=this.getEncoder(E),C=parseInt(_[3]);return T=>{C>=0&&T.length!==C&&logger$c.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",T);let B=T.map(S);return this._types[E]&&(B=B.map(keccak256)),keccak256(hexConcat(B))}}const x=this.types[n];if(x){const E=id$1(this._types[n]);return S=>{const C=x.map(({name:T,type:B})=>{const A=this.getEncoder(B)(S[T]);return this._types[B]?keccak256(A):A});return C.unshift(E),hexConcat(C)}}return logger$c.throwArgumentError(`unknown type: ${n}`,"type",n)}encodeType(n){const _=this._types[n];return _||logger$c.throwArgumentError(`unknown type: ${JSON.stringify(n)}`,"name",n),_}encodeData(n,_){return this.getEncoder(n)(_)}hashStruct(n,_){return keccak256(this.encodeData(n,_))}encode(n){return this.encodeData(this.primaryType,n)}hash(n){return this.hashStruct(this.primaryType,n)}_visit(n,_,x){if(getBaseEncoder(n))return x(n,_);const E=n.match(/^(.*)(\x5b(\d*)\x5d)$/);if(E){const C=E[1],T=parseInt(E[3]);return T>=0&&_.length!==T&&logger$c.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",_),_.map(B=>this._visit(C,B,x))}const S=this.types[n];return S?S.reduce((C,{name:T,type:B})=>(C[T]=this._visit(B,_[T],x),C),{}):logger$c.throwArgumentError(`unknown type: ${n}`,"type",n)}visit(n,_){return this._visit(this.primaryType,n,_)}static from(n){return new TypedDataEncoder(n)}static getPrimaryType(n){return TypedDataEncoder.from(n).primaryType}static hashStruct(n,_,x){return TypedDataEncoder.from(_).hashStruct(n,x)}static hashDomain(n){const _=[];for(const x in n){const E=domainFieldTypes[x];E||logger$c.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(x)}`,"domain",n),_.push({name:x,type:E})}return _.sort((x,E)=>domainFieldNames.indexOf(x.name)-domainFieldNames.indexOf(E.name)),TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:_},n)}static encode(n,_,x){return hexConcat(["0x1901",TypedDataEncoder.hashDomain(n),TypedDataEncoder.from(_).hash(x)])}static hash(n,_,x){return keccak256(TypedDataEncoder.encode(n,_,x))}static resolveNames(n,_,x,E){return __awaiter$2(this,void 0,void 0,function*(){n=shallowCopy(n);const S={};n.verifyingContract&&!isHexString(n.verifyingContract,20)&&(S[n.verifyingContract]="0x");const C=TypedDataEncoder.from(_);C.visit(x,(T,B)=>(T==="address"&&!isHexString(B,20)&&(S[B]="0x"),B));for(const T in S)S[T]=yield E(T);return n.verifyingContract&&S[n.verifyingContract]&&(n.verifyingContract=S[n.verifyingContract]),x=C.visit(x,(T,B)=>T==="address"&&S[B]?S[B]:B),{domain:n,value:x}})}static getPayload(n,_,x){TypedDataEncoder.hashDomain(n);const E={},S=[];domainFieldNames.forEach(B=>{const A=n[B];A!=null&&(E[B]=domainChecks[B](A),S.push({name:B,type:domainFieldTypes[B]}))});const C=TypedDataEncoder.from(_),T=shallowCopy(_);return T.EIP712Domain?logger$c.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",_):T.EIP712Domain=S,C.encode(x),{types:T,domain:E,primaryType:C.primaryType,message:C.visit(x,(B,A)=>{if(B.match(/^bytes(\d*)/))return hexlify(arrayify(A));if(B.match(/^u?int/))return BigNumber.from(A).toString();switch(B){case"address":return A.toLowerCase();case"bool":return!!A;case"string":return typeof A!="string"&&logger$c.throwArgumentError("invalid string","value",A),A}return logger$c.throwArgumentError("unsupported type","type",B)})}}}class BaseX{constructor(n){defineReadOnly(this,"alphabet",n),defineReadOnly(this,"base",n.length),defineReadOnly(this,"_alphabetMap",{}),defineReadOnly(this,"_leader",n.charAt(0));for(let _=0;_<n.length;_++)this._alphabetMap[n.charAt(_)]=_}encode(n){let _=arrayify(n);if(_.length===0)return"";let x=[0];for(let S=0;S<_.length;++S){let C=_[S];for(let T=0;T<x.length;++T)C+=x[T]<<8,x[T]=C%this.base,C=C/this.base|0;for(;C>0;)x.push(C%this.base),C=C/this.base|0}let E="";for(let S=0;_[S]===0&&S<_.length-1;++S)E+=this._leader;for(let S=x.length-1;S>=0;--S)E+=this.alphabet[x[S]];return E}decode(n){if(typeof n!="string")throw new TypeError("Expected String");let _=[];if(n.length===0)return new Uint8Array(_);_.push(0);for(let x=0;x<n.length;x++){let E=this._alphabetMap[n[x]];if(E===void 0)throw new Error("Non-base"+this.base+" character");let S=E;for(let C=0;C<_.length;++C)S+=_[C]*this.base,_[C]=S&255,S>>=8;for(;S>0;)_.push(S&255),S>>=8}for(let x=0;n[x]===this._leader&&x<n.length-1;++x)_.push(0);return arrayify(new Uint8Array(_.reverse()))}}new BaseX("abcdefghijklmnopqrstuvwxyz234567");const Base58=new BaseX("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var SupportedAlgorithm;(function(t){t.sha256="sha256",t.sha512="sha512"})(SupportedAlgorithm||(SupportedAlgorithm={}));const version$7="sha2/5.7.0",logger$b=new Logger(version$7);function ripemd160(t){return"0x"+hash$3.ripemd160().update(arrayify(t)).digest("hex")}function sha256$2(t){return"0x"+hash$3.sha256().update(arrayify(t)).digest("hex")}function computeHmac(t,n,_){return SupportedAlgorithm[t]||logger$b.throwError("unsupported algorithm "+t,Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+hash$3.hmac(hash$3[t],arrayify(n)).update(arrayify(_)).digest("hex")}function pbkdf2$1(t,n,_,x,E){t=arrayify(t),n=arrayify(n);let S,C=1;const T=new Uint8Array(x),B=new Uint8Array(n.length+4);B.set(n);let A,I;for(let D=1;D<=C;D++){B[n.length]=D>>24&255,B[n.length+1]=D>>16&255,B[n.length+2]=D>>8&255,B[n.length+3]=D&255;let M=arrayify(computeHmac(E,t,B));S||(S=M.length,I=new Uint8Array(S),C=Math.ceil(x/S),A=x-(C-1)*S),I.set(M);for(let F=1;F<_;F++){M=arrayify(computeHmac(E,t,M));for(let j=0;j<S;j++)I[j]^=M[j]}const V=(D-1)*S,L=D===C?A:S;T.set(arrayify(I).slice(0,L),V)}return hexlify(T)}var bn={exports:{}};bn.exports;(function(t){(function(n,_){function x(W,O){if(!W)throw new Error(O||"Assertion failed")}function E(W,O){W.super_=O;var z=function(){};z.prototype=O.prototype,W.prototype=new z,W.prototype.constructor=W}function S(W,O,z){if(S.isBN(W))return W;this.negative=0,this.words=null,this.length=0,this.red=null,W!==null&&((O==="le"||O==="be")&&(z=O,O=10),this._init(W||0,O||10,z||"be"))}typeof n=="object"?n.exports=S:_.BN=S,S.BN=S,S.wordSize=26;var C;try{typeof window<"u"&&typeof window.Buffer<"u"?C=window.Buffer:C=require$$0$2.Buffer}catch{}S.isBN=function(O){return O instanceof S?!0:O!==null&&typeof O=="object"&&O.constructor.wordSize===S.wordSize&&Array.isArray(O.words)},S.max=function(O,z){return O.cmp(z)>0?O:z},S.min=function(O,z){return O.cmp(z)<0?O:z},S.prototype._init=function(O,z,J){if(typeof O=="number")return this._initNumber(O,z,J);if(typeof O=="object")return this._initArray(O,z,J);z==="hex"&&(z=16),x(z===(z|0)&&z>=2&&z<=36),O=O.toString().replace(/\s+/g,"");var ee=0;O[0]==="-"&&(ee++,this.negative=1),ee<O.length&&(z===16?this._parseHex(O,ee,J):(this._parseBase(O,z,ee),J==="le"&&this._initArray(this.toArray(),z,J)))},S.prototype._initNumber=function(O,z,J){O<0&&(this.negative=1,O=-O),O<67108864?(this.words=[O&67108863],this.length=1):O<4503599627370496?(this.words=[O&67108863,O/67108864&67108863],this.length=2):(x(O<9007199254740992),this.words=[O&67108863,O/67108864&67108863,1],this.length=3),J==="le"&&this._initArray(this.toArray(),z,J)},S.prototype._initArray=function(O,z,J){if(x(typeof O.length=="number"),O.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(O.length/3),this.words=new Array(this.length);for(var ee=0;ee<this.length;ee++)this.words[ee]=0;var ae,oe,se=0;if(J==="be")for(ee=O.length-1,ae=0;ee>=0;ee-=3)oe=O[ee]|O[ee-1]<<8|O[ee-2]<<16,this.words[ae]|=oe<<se&67108863,this.words[ae+1]=oe>>>26-se&67108863,se+=24,se>=26&&(se-=26,ae++);else if(J==="le")for(ee=0,ae=0;ee<O.length;ee+=3)oe=O[ee]|O[ee+1]<<8|O[ee+2]<<16,this.words[ae]|=oe<<se&67108863,this.words[ae+1]=oe>>>26-se&67108863,se+=24,se>=26&&(se-=26,ae++);return this._strip()};function T(W,O){var z=W.charCodeAt(O);if(z>=48&&z<=57)return z-48;if(z>=65&&z<=70)return z-55;if(z>=97&&z<=102)return z-87;x(!1,"Invalid character in "+W)}function B(W,O,z){var J=T(W,z);return z-1>=O&&(J|=T(W,z-1)<<4),J}S.prototype._parseHex=function(O,z,J){this.length=Math.ceil((O.length-z)/6),this.words=new Array(this.length);for(var ee=0;ee<this.length;ee++)this.words[ee]=0;var ae=0,oe=0,se;if(J==="be")for(ee=O.length-1;ee>=z;ee-=2)se=B(O,z,ee)<<ae,this.words[oe]|=se&67108863,ae>=18?(ae-=18,oe+=1,this.words[oe]|=se>>>26):ae+=8;else{var G=O.length-z;for(ee=G%2===0?z+1:z;ee<O.length;ee+=2)se=B(O,z,ee)<<ae,this.words[oe]|=se&67108863,ae>=18?(ae-=18,oe+=1,this.words[oe]|=se>>>26):ae+=8}this._strip()};function A(W,O,z,J){for(var ee=0,ae=0,oe=Math.min(W.length,z),se=O;se<oe;se++){var G=W.charCodeAt(se)-48;ee*=J,G>=49?ae=G-49+10:G>=17?ae=G-17+10:ae=G,x(G>=0&&ae<J,"Invalid character"),ee+=ae}return ee}S.prototype._parseBase=function(O,z,J){this.words=[0],this.length=1;for(var ee=0,ae=1;ae<=67108863;ae*=z)ee++;ee--,ae=ae/z|0;for(var oe=O.length-J,se=oe%ee,G=Math.min(oe,oe-se)+J,q=0,te=J;te<G;te+=ee)q=A(O,te,te+ee,z),this.imuln(ae),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q);if(se!==0){var fe=1;for(q=A(O,te,O.length,z),te=0;te<se;te++)fe*=z;this.imuln(fe),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q)}this._strip()},S.prototype.copy=function(O){O.words=new Array(this.length);for(var z=0;z<this.length;z++)O.words[z]=this.words[z];O.length=this.length,O.negative=this.negative,O.red=this.red};function I(W,O){W.words=O.words,W.length=O.length,W.negative=O.negative,W.red=O.red}if(S.prototype._move=function(O){I(O,this)},S.prototype.clone=function(){var O=new S(null);return this.copy(O),O},S.prototype._expand=function(O){for(;this.length<O;)this.words[this.length++]=0;return this},S.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},S.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{S.prototype[Symbol.for("nodejs.util.inspect.custom")]=D}catch{S.prototype.inspect=D}else S.prototype.inspect=D;function D(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],V=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],L=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];S.prototype.toString=function(O,z){O=O||10,z=z|0||1;var J;if(O===16||O==="hex"){J="";for(var ee=0,ae=0,oe=0;oe<this.length;oe++){var se=this.words[oe],G=((se<<ee|ae)&16777215).toString(16);ae=se>>>24-ee&16777215,ee+=2,ee>=26&&(ee-=26,oe--),ae!==0||oe!==this.length-1?J=M[6-G.length]+G+J:J=G+J}for(ae!==0&&(J=ae.toString(16)+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}if(O===(O|0)&&O>=2&&O<=36){var q=V[O],te=L[O];J="";var fe=this.clone();for(fe.negative=0;!fe.isZero();){var he=fe.modrn(te).toString(O);fe=fe.idivn(te),fe.isZero()?J=he+J:J=M[q-he.length]+he+J}for(this.isZero()&&(J="0"+J);J.length%z!==0;)J="0"+J;return this.negative!==0&&(J="-"+J),J}x(!1,"Base should be between 2 and 36")},S.prototype.toNumber=function(){var O=this.words[0];return this.length===2?O+=this.words[1]*67108864:this.length===3&&this.words[2]===1?O+=4503599627370496+this.words[1]*67108864:this.length>2&&x(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-O:O},S.prototype.toJSON=function(){return this.toString(16,2)},C&&(S.prototype.toBuffer=function(O,z){return this.toArrayLike(C,O,z)}),S.prototype.toArray=function(O,z){return this.toArrayLike(Array,O,z)};var F=function(O,z){return O.allocUnsafe?O.allocUnsafe(z):new O(z)};S.prototype.toArrayLike=function(O,z,J){this._strip();var ee=this.byteLength(),ae=J||Math.max(1,ee);x(ee<=ae,"byte array longer than desired length"),x(ae>0,"Requested array length <= 0");var oe=F(O,ae),se=z==="le"?"LE":"BE";return this["_toArrayLike"+se](oe,ee),oe},S.prototype._toArrayLikeLE=function(O,z){for(var J=0,ee=0,ae=0,oe=0;ae<this.length;ae++){var se=this.words[ae]<<oe|ee;O[J++]=se&255,J<O.length&&(O[J++]=se>>8&255),J<O.length&&(O[J++]=se>>16&255),oe===6?(J<O.length&&(O[J++]=se>>24&255),ee=0,oe=0):(ee=se>>>24,oe+=2)}if(J<O.length)for(O[J++]=ee;J<O.length;)O[J++]=0},S.prototype._toArrayLikeBE=function(O,z){for(var J=O.length-1,ee=0,ae=0,oe=0;ae<this.length;ae++){var se=this.words[ae]<<oe|ee;O[J--]=se&255,J>=0&&(O[J--]=se>>8&255),J>=0&&(O[J--]=se>>16&255),oe===6?(J>=0&&(O[J--]=se>>24&255),ee=0,oe=0):(ee=se>>>24,oe+=2)}if(J>=0)for(O[J--]=ee;J>=0;)O[J--]=0},Math.clz32?S.prototype._countBits=function(O){return 32-Math.clz32(O)}:S.prototype._countBits=function(O){var z=O,J=0;return z>=4096&&(J+=13,z>>>=13),z>=64&&(J+=7,z>>>=7),z>=8&&(J+=4,z>>>=4),z>=2&&(J+=2,z>>>=2),J+z},S.prototype._zeroBits=function(O){if(O===0)return 26;var z=O,J=0;return z&8191||(J+=13,z>>>=13),z&127||(J+=7,z>>>=7),z&15||(J+=4,z>>>=4),z&3||(J+=2,z>>>=2),z&1||J++,J},S.prototype.bitLength=function(){var O=this.words[this.length-1],z=this._countBits(O);return(this.length-1)*26+z};function j(W){for(var O=new Array(W.bitLength()),z=0;z<O.length;z++){var J=z/26|0,ee=z%26;O[z]=W.words[J]>>>ee&1}return O}S.prototype.zeroBits=function(){if(this.isZero())return 0;for(var O=0,z=0;z<this.length;z++){var J=this._zeroBits(this.words[z]);if(O+=J,J!==26)break}return O},S.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},S.prototype.toTwos=function(O){return this.negative!==0?this.abs().inotn(O).iaddn(1):this.clone()},S.prototype.fromTwos=function(O){return this.testn(O-1)?this.notn(O).iaddn(1).ineg():this.clone()},S.prototype.isNeg=function(){return this.negative!==0},S.prototype.neg=function(){return this.clone().ineg()},S.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},S.prototype.iuor=function(O){for(;this.length<O.length;)this.words[this.length++]=0;for(var z=0;z<O.length;z++)this.words[z]=this.words[z]|O.words[z];return this._strip()},S.prototype.ior=function(O){return x((this.negative|O.negative)===0),this.iuor(O)},S.prototype.or=function(O){return this.length>O.length?this.clone().ior(O):O.clone().ior(this)},S.prototype.uor=function(O){return this.length>O.length?this.clone().iuor(O):O.clone().iuor(this)},S.prototype.iuand=function(O){var z;this.length>O.length?z=O:z=this;for(var J=0;J<z.length;J++)this.words[J]=this.words[J]&O.words[J];return this.length=z.length,this._strip()},S.prototype.iand=function(O){return x((this.negative|O.negative)===0),this.iuand(O)},S.prototype.and=function(O){return this.length>O.length?this.clone().iand(O):O.clone().iand(this)},S.prototype.uand=function(O){return this.length>O.length?this.clone().iuand(O):O.clone().iuand(this)},S.prototype.iuxor=function(O){var z,J;this.length>O.length?(z=this,J=O):(z=O,J=this);for(var ee=0;ee<J.length;ee++)this.words[ee]=z.words[ee]^J.words[ee];if(this!==z)for(;ee<z.length;ee++)this.words[ee]=z.words[ee];return this.length=z.length,this._strip()},S.prototype.ixor=function(O){return x((this.negative|O.negative)===0),this.iuxor(O)},S.prototype.xor=function(O){return this.length>O.length?this.clone().ixor(O):O.clone().ixor(this)},S.prototype.uxor=function(O){return this.length>O.length?this.clone().iuxor(O):O.clone().iuxor(this)},S.prototype.inotn=function(O){x(typeof O=="number"&&O>=0);var z=Math.ceil(O/26)|0,J=O%26;this._expand(z),J>0&&z--;for(var ee=0;ee<z;ee++)this.words[ee]=~this.words[ee]&67108863;return J>0&&(this.words[ee]=~this.words[ee]&67108863>>26-J),this._strip()},S.prototype.notn=function(O){return this.clone().inotn(O)},S.prototype.setn=function(O,z){x(typeof O=="number"&&O>=0);var J=O/26|0,ee=O%26;return this._expand(J+1),z?this.words[J]=this.words[J]|1<<ee:this.words[J]=this.words[J]&~(1<<ee),this._strip()},S.prototype.iadd=function(O){var z;if(this.negative!==0&&O.negative===0)return this.negative=0,z=this.isub(O),this.negative^=1,this._normSign();if(this.negative===0&&O.negative!==0)return O.negative=0,z=this.isub(O),O.negative=1,z._normSign();var J,ee;this.length>O.length?(J=this,ee=O):(J=O,ee=this);for(var ae=0,oe=0;oe<ee.length;oe++)z=(J.words[oe]|0)+(ee.words[oe]|0)+ae,this.words[oe]=z&67108863,ae=z>>>26;for(;ae!==0&&oe<J.length;oe++)z=(J.words[oe]|0)+ae,this.words[oe]=z&67108863,ae=z>>>26;if(this.length=J.length,ae!==0)this.words[this.length]=ae,this.length++;else if(J!==this)for(;oe<J.length;oe++)this.words[oe]=J.words[oe];return this},S.prototype.add=function(O){var z;return O.negative!==0&&this.negative===0?(O.negative=0,z=this.sub(O),O.negative^=1,z):O.negative===0&&this.negative!==0?(this.negative=0,z=O.sub(this),this.negative=1,z):this.length>O.length?this.clone().iadd(O):O.clone().iadd(this)},S.prototype.isub=function(O){if(O.negative!==0){O.negative=0;var z=this.iadd(O);return O.negative=1,z._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(O),this.negative=1,this._normSign();var J=this.cmp(O);if(J===0)return this.negative=0,this.length=1,this.words[0]=0,this;var ee,ae;J>0?(ee=this,ae=O):(ee=O,ae=this);for(var oe=0,se=0;se<ae.length;se++)z=(ee.words[se]|0)-(ae.words[se]|0)+oe,oe=z>>26,this.words[se]=z&67108863;for(;oe!==0&&se<ee.length;se++)z=(ee.words[se]|0)+oe,oe=z>>26,this.words[se]=z&67108863;if(oe===0&&se<ee.length&&ee!==this)for(;se<ee.length;se++)this.words[se]=ee.words[se];return this.length=Math.max(this.length,se),ee!==this&&(this.negative=1),this._strip()},S.prototype.sub=function(O){return this.clone().isub(O)};function U(W,O,z){z.negative=O.negative^W.negative;var J=W.length+O.length|0;z.length=J,J=J-1|0;var ee=W.words[0]|0,ae=O.words[0]|0,oe=ee*ae,se=oe&67108863,G=oe/67108864|0;z.words[0]=se;for(var q=1;q<J;q++){for(var te=G>>>26,fe=G&67108863,he=Math.min(q,O.length-1),Ee=Math.max(0,q-W.length+1);Ee<=he;Ee++){var we=q-Ee|0;ee=W.words[we]|0,ae=O.words[Ee]|0,oe=ee*ae+fe,te+=oe/67108864|0,fe=oe&67108863}z.words[q]=fe|0,G=te|0}return G!==0?z.words[q]=G|0:z.length--,z._strip()}var H=function(O,z,J){var ee=O.words,ae=z.words,oe=J.words,se=0,G,q,te,fe=ee[0]|0,he=fe&8191,Ee=fe>>>13,we=ee[1]|0,xe=we&8191,$e=we>>>13,ge=ee[2]|0,Se=ge&8191,me=ge>>>13,Be=ee[3]|0,ve=Be&8191,Ae=Be>>>13,Ve=ee[4]|0,Pe=Ve&8191,Re=Ve>>>13,Ne=ee[5]|0,qe=Ne&8191,Ke=Ne>>>13,He=ee[6]|0,Ge=He&8191,rt=He>>>13,st=ee[7]|0,Je=st&8191,Ie=st>>>13,be=ee[8]|0,Te=be&8191,Le=be>>>13,We=ee[9]|0,Ze=We&8191,Qe=We>>>13,St=ae[0]|0,pt=St&8191,ft=St>>>13,Ut=ae[1]|0,$t=Ut&8191,Nt=Ut>>>13,lr=ae[2]|0,Gt=lr&8191,Rt=lr>>>13,Qt=ae[3]|0,Pt=Qt&8191,kt=Qt>>>13,er=ae[4]|0,Lt=er&8191,Bt=er>>>13,ir=ae[5]|0,jt=ir&8191,Ct=ir>>>13,nr=ae[6]|0,je=nr&8191,De=nr>>>13,Me=ae[7]|0,pe=Me&8191,ke=Me>>>13,Oe=ae[8]|0,Fe=Oe&8191,ze=Oe>>>13,Xe=ae[9]|0,tt=Xe&8191,it=Xe>>>13;J.negative=O.negative^z.negative,J.length=19,G=Math.imul(he,pt),q=Math.imul(he,ft),q=q+Math.imul(Ee,pt)|0,te=Math.imul(Ee,ft);var ot=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(ot>>>26)|0,ot&=67108863,G=Math.imul(xe,pt),q=Math.imul(xe,ft),q=q+Math.imul($e,pt)|0,te=Math.imul($e,ft),G=G+Math.imul(he,$t)|0,q=q+Math.imul(he,Nt)|0,q=q+Math.imul(Ee,$t)|0,te=te+Math.imul(Ee,Nt)|0;var at=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(at>>>26)|0,at&=67108863,G=Math.imul(Se,pt),q=Math.imul(Se,ft),q=q+Math.imul(me,pt)|0,te=Math.imul(me,ft),G=G+Math.imul(xe,$t)|0,q=q+Math.imul(xe,Nt)|0,q=q+Math.imul($e,$t)|0,te=te+Math.imul($e,Nt)|0,G=G+Math.imul(he,Gt)|0,q=q+Math.imul(he,Rt)|0,q=q+Math.imul(Ee,Gt)|0,te=te+Math.imul(Ee,Rt)|0;var ct=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(ct>>>26)|0,ct&=67108863,G=Math.imul(ve,pt),q=Math.imul(ve,ft),q=q+Math.imul(Ae,pt)|0,te=Math.imul(Ae,ft),G=G+Math.imul(Se,$t)|0,q=q+Math.imul(Se,Nt)|0,q=q+Math.imul(me,$t)|0,te=te+Math.imul(me,Nt)|0,G=G+Math.imul(xe,Gt)|0,q=q+Math.imul(xe,Rt)|0,q=q+Math.imul($e,Gt)|0,te=te+Math.imul($e,Rt)|0,G=G+Math.imul(he,Pt)|0,q=q+Math.imul(he,kt)|0,q=q+Math.imul(Ee,Pt)|0,te=te+Math.imul(Ee,kt)|0;var dt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(dt>>>26)|0,dt&=67108863,G=Math.imul(Pe,pt),q=Math.imul(Pe,ft),q=q+Math.imul(Re,pt)|0,te=Math.imul(Re,ft),G=G+Math.imul(ve,$t)|0,q=q+Math.imul(ve,Nt)|0,q=q+Math.imul(Ae,$t)|0,te=te+Math.imul(Ae,Nt)|0,G=G+Math.imul(Se,Gt)|0,q=q+Math.imul(Se,Rt)|0,q=q+Math.imul(me,Gt)|0,te=te+Math.imul(me,Rt)|0,G=G+Math.imul(xe,Pt)|0,q=q+Math.imul(xe,kt)|0,q=q+Math.imul($e,Pt)|0,te=te+Math.imul($e,kt)|0,G=G+Math.imul(he,Lt)|0,q=q+Math.imul(he,Bt)|0,q=q+Math.imul(Ee,Lt)|0,te=te+Math.imul(Ee,Bt)|0;var yt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(yt>>>26)|0,yt&=67108863,G=Math.imul(qe,pt),q=Math.imul(qe,ft),q=q+Math.imul(Ke,pt)|0,te=Math.imul(Ke,ft),G=G+Math.imul(Pe,$t)|0,q=q+Math.imul(Pe,Nt)|0,q=q+Math.imul(Re,$t)|0,te=te+Math.imul(Re,Nt)|0,G=G+Math.imul(ve,Gt)|0,q=q+Math.imul(ve,Rt)|0,q=q+Math.imul(Ae,Gt)|0,te=te+Math.imul(Ae,Rt)|0,G=G+Math.imul(Se,Pt)|0,q=q+Math.imul(Se,kt)|0,q=q+Math.imul(me,Pt)|0,te=te+Math.imul(me,kt)|0,G=G+Math.imul(xe,Lt)|0,q=q+Math.imul(xe,Bt)|0,q=q+Math.imul($e,Lt)|0,te=te+Math.imul($e,Bt)|0,G=G+Math.imul(he,jt)|0,q=q+Math.imul(he,Ct)|0,q=q+Math.imul(Ee,jt)|0,te=te+Math.imul(Ee,Ct)|0;var Et=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Et>>>26)|0,Et&=67108863,G=Math.imul(Ge,pt),q=Math.imul(Ge,ft),q=q+Math.imul(rt,pt)|0,te=Math.imul(rt,ft),G=G+Math.imul(qe,$t)|0,q=q+Math.imul(qe,Nt)|0,q=q+Math.imul(Ke,$t)|0,te=te+Math.imul(Ke,Nt)|0,G=G+Math.imul(Pe,Gt)|0,q=q+Math.imul(Pe,Rt)|0,q=q+Math.imul(Re,Gt)|0,te=te+Math.imul(Re,Rt)|0,G=G+Math.imul(ve,Pt)|0,q=q+Math.imul(ve,kt)|0,q=q+Math.imul(Ae,Pt)|0,te=te+Math.imul(Ae,kt)|0,G=G+Math.imul(Se,Lt)|0,q=q+Math.imul(Se,Bt)|0,q=q+Math.imul(me,Lt)|0,te=te+Math.imul(me,Bt)|0,G=G+Math.imul(xe,jt)|0,q=q+Math.imul(xe,Ct)|0,q=q+Math.imul($e,jt)|0,te=te+Math.imul($e,Ct)|0,G=G+Math.imul(he,je)|0,q=q+Math.imul(he,De)|0,q=q+Math.imul(Ee,je)|0,te=te+Math.imul(Ee,De)|0;var mt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(mt>>>26)|0,mt&=67108863,G=Math.imul(Je,pt),q=Math.imul(Je,ft),q=q+Math.imul(Ie,pt)|0,te=Math.imul(Ie,ft),G=G+Math.imul(Ge,$t)|0,q=q+Math.imul(Ge,Nt)|0,q=q+Math.imul(rt,$t)|0,te=te+Math.imul(rt,Nt)|0,G=G+Math.imul(qe,Gt)|0,q=q+Math.imul(qe,Rt)|0,q=q+Math.imul(Ke,Gt)|0,te=te+Math.imul(Ke,Rt)|0,G=G+Math.imul(Pe,Pt)|0,q=q+Math.imul(Pe,kt)|0,q=q+Math.imul(Re,Pt)|0,te=te+Math.imul(Re,kt)|0,G=G+Math.imul(ve,Lt)|0,q=q+Math.imul(ve,Bt)|0,q=q+Math.imul(Ae,Lt)|0,te=te+Math.imul(Ae,Bt)|0,G=G+Math.imul(Se,jt)|0,q=q+Math.imul(Se,Ct)|0,q=q+Math.imul(me,jt)|0,te=te+Math.imul(me,Ct)|0,G=G+Math.imul(xe,je)|0,q=q+Math.imul(xe,De)|0,q=q+Math.imul($e,je)|0,te=te+Math.imul($e,De)|0,G=G+Math.imul(he,pe)|0,q=q+Math.imul(he,ke)|0,q=q+Math.imul(Ee,pe)|0,te=te+Math.imul(Ee,ke)|0;var xt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(xt>>>26)|0,xt&=67108863,G=Math.imul(Te,pt),q=Math.imul(Te,ft),q=q+Math.imul(Le,pt)|0,te=Math.imul(Le,ft),G=G+Math.imul(Je,$t)|0,q=q+Math.imul(Je,Nt)|0,q=q+Math.imul(Ie,$t)|0,te=te+Math.imul(Ie,Nt)|0,G=G+Math.imul(Ge,Gt)|0,q=q+Math.imul(Ge,Rt)|0,q=q+Math.imul(rt,Gt)|0,te=te+Math.imul(rt,Rt)|0,G=G+Math.imul(qe,Pt)|0,q=q+Math.imul(qe,kt)|0,q=q+Math.imul(Ke,Pt)|0,te=te+Math.imul(Ke,kt)|0,G=G+Math.imul(Pe,Lt)|0,q=q+Math.imul(Pe,Bt)|0,q=q+Math.imul(Re,Lt)|0,te=te+Math.imul(Re,Bt)|0,G=G+Math.imul(ve,jt)|0,q=q+Math.imul(ve,Ct)|0,q=q+Math.imul(Ae,jt)|0,te=te+Math.imul(Ae,Ct)|0,G=G+Math.imul(Se,je)|0,q=q+Math.imul(Se,De)|0,q=q+Math.imul(me,je)|0,te=te+Math.imul(me,De)|0,G=G+Math.imul(xe,pe)|0,q=q+Math.imul(xe,ke)|0,q=q+Math.imul($e,pe)|0,te=te+Math.imul($e,ke)|0,G=G+Math.imul(he,Fe)|0,q=q+Math.imul(he,ze)|0,q=q+Math.imul(Ee,Fe)|0,te=te+Math.imul(Ee,ze)|0;var Mt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,G=Math.imul(Ze,pt),q=Math.imul(Ze,ft),q=q+Math.imul(Qe,pt)|0,te=Math.imul(Qe,ft),G=G+Math.imul(Te,$t)|0,q=q+Math.imul(Te,Nt)|0,q=q+Math.imul(Le,$t)|0,te=te+Math.imul(Le,Nt)|0,G=G+Math.imul(Je,Gt)|0,q=q+Math.imul(Je,Rt)|0,q=q+Math.imul(Ie,Gt)|0,te=te+Math.imul(Ie,Rt)|0,G=G+Math.imul(Ge,Pt)|0,q=q+Math.imul(Ge,kt)|0,q=q+Math.imul(rt,Pt)|0,te=te+Math.imul(rt,kt)|0,G=G+Math.imul(qe,Lt)|0,q=q+Math.imul(qe,Bt)|0,q=q+Math.imul(Ke,Lt)|0,te=te+Math.imul(Ke,Bt)|0,G=G+Math.imul(Pe,jt)|0,q=q+Math.imul(Pe,Ct)|0,q=q+Math.imul(Re,jt)|0,te=te+Math.imul(Re,Ct)|0,G=G+Math.imul(ve,je)|0,q=q+Math.imul(ve,De)|0,q=q+Math.imul(Ae,je)|0,te=te+Math.imul(Ae,De)|0,G=G+Math.imul(Se,pe)|0,q=q+Math.imul(Se,ke)|0,q=q+Math.imul(me,pe)|0,te=te+Math.imul(me,ke)|0,G=G+Math.imul(xe,Fe)|0,q=q+Math.imul(xe,ze)|0,q=q+Math.imul($e,Fe)|0,te=te+Math.imul($e,ze)|0,G=G+Math.imul(he,tt)|0,q=q+Math.imul(he,it)|0,q=q+Math.imul(Ee,tt)|0,te=te+Math.imul(Ee,it)|0;var Ot=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,G=Math.imul(Ze,$t),q=Math.imul(Ze,Nt),q=q+Math.imul(Qe,$t)|0,te=Math.imul(Qe,Nt),G=G+Math.imul(Te,Gt)|0,q=q+Math.imul(Te,Rt)|0,q=q+Math.imul(Le,Gt)|0,te=te+Math.imul(Le,Rt)|0,G=G+Math.imul(Je,Pt)|0,q=q+Math.imul(Je,kt)|0,q=q+Math.imul(Ie,Pt)|0,te=te+Math.imul(Ie,kt)|0,G=G+Math.imul(Ge,Lt)|0,q=q+Math.imul(Ge,Bt)|0,q=q+Math.imul(rt,Lt)|0,te=te+Math.imul(rt,Bt)|0,G=G+Math.imul(qe,jt)|0,q=q+Math.imul(qe,Ct)|0,q=q+Math.imul(Ke,jt)|0,te=te+Math.imul(Ke,Ct)|0,G=G+Math.imul(Pe,je)|0,q=q+Math.imul(Pe,De)|0,q=q+Math.imul(Re,je)|0,te=te+Math.imul(Re,De)|0,G=G+Math.imul(ve,pe)|0,q=q+Math.imul(ve,ke)|0,q=q+Math.imul(Ae,pe)|0,te=te+Math.imul(Ae,ke)|0,G=G+Math.imul(Se,Fe)|0,q=q+Math.imul(Se,ze)|0,q=q+Math.imul(me,Fe)|0,te=te+Math.imul(me,ze)|0,G=G+Math.imul(xe,tt)|0,q=q+Math.imul(xe,it)|0,q=q+Math.imul($e,tt)|0,te=te+Math.imul($e,it)|0;var Ht=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,G=Math.imul(Ze,Gt),q=Math.imul(Ze,Rt),q=q+Math.imul(Qe,Gt)|0,te=Math.imul(Qe,Rt),G=G+Math.imul(Te,Pt)|0,q=q+Math.imul(Te,kt)|0,q=q+Math.imul(Le,Pt)|0,te=te+Math.imul(Le,kt)|0,G=G+Math.imul(Je,Lt)|0,q=q+Math.imul(Je,Bt)|0,q=q+Math.imul(Ie,Lt)|0,te=te+Math.imul(Ie,Bt)|0,G=G+Math.imul(Ge,jt)|0,q=q+Math.imul(Ge,Ct)|0,q=q+Math.imul(rt,jt)|0,te=te+Math.imul(rt,Ct)|0,G=G+Math.imul(qe,je)|0,q=q+Math.imul(qe,De)|0,q=q+Math.imul(Ke,je)|0,te=te+Math.imul(Ke,De)|0,G=G+Math.imul(Pe,pe)|0,q=q+Math.imul(Pe,ke)|0,q=q+Math.imul(Re,pe)|0,te=te+Math.imul(Re,ke)|0,G=G+Math.imul(ve,Fe)|0,q=q+Math.imul(ve,ze)|0,q=q+Math.imul(Ae,Fe)|0,te=te+Math.imul(Ae,ze)|0,G=G+Math.imul(Se,tt)|0,q=q+Math.imul(Se,it)|0,q=q+Math.imul(me,tt)|0,te=te+Math.imul(me,it)|0;var Ft=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,G=Math.imul(Ze,Pt),q=Math.imul(Ze,kt),q=q+Math.imul(Qe,Pt)|0,te=Math.imul(Qe,kt),G=G+Math.imul(Te,Lt)|0,q=q+Math.imul(Te,Bt)|0,q=q+Math.imul(Le,Lt)|0,te=te+Math.imul(Le,Bt)|0,G=G+Math.imul(Je,jt)|0,q=q+Math.imul(Je,Ct)|0,q=q+Math.imul(Ie,jt)|0,te=te+Math.imul(Ie,Ct)|0,G=G+Math.imul(Ge,je)|0,q=q+Math.imul(Ge,De)|0,q=q+Math.imul(rt,je)|0,te=te+Math.imul(rt,De)|0,G=G+Math.imul(qe,pe)|0,q=q+Math.imul(qe,ke)|0,q=q+Math.imul(Ke,pe)|0,te=te+Math.imul(Ke,ke)|0,G=G+Math.imul(Pe,Fe)|0,q=q+Math.imul(Pe,ze)|0,q=q+Math.imul(Re,Fe)|0,te=te+Math.imul(Re,ze)|0,G=G+Math.imul(ve,tt)|0,q=q+Math.imul(ve,it)|0,q=q+Math.imul(Ae,tt)|0,te=te+Math.imul(Ae,it)|0;var Wt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,G=Math.imul(Ze,Lt),q=Math.imul(Ze,Bt),q=q+Math.imul(Qe,Lt)|0,te=Math.imul(Qe,Bt),G=G+Math.imul(Te,jt)|0,q=q+Math.imul(Te,Ct)|0,q=q+Math.imul(Le,jt)|0,te=te+Math.imul(Le,Ct)|0,G=G+Math.imul(Je,je)|0,q=q+Math.imul(Je,De)|0,q=q+Math.imul(Ie,je)|0,te=te+Math.imul(Ie,De)|0,G=G+Math.imul(Ge,pe)|0,q=q+Math.imul(Ge,ke)|0,q=q+Math.imul(rt,pe)|0,te=te+Math.imul(rt,ke)|0,G=G+Math.imul(qe,Fe)|0,q=q+Math.imul(qe,ze)|0,q=q+Math.imul(Ke,Fe)|0,te=te+Math.imul(Ke,ze)|0,G=G+Math.imul(Pe,tt)|0,q=q+Math.imul(Pe,it)|0,q=q+Math.imul(Re,tt)|0,te=te+Math.imul(Re,it)|0;var Jt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,G=Math.imul(Ze,jt),q=Math.imul(Ze,Ct),q=q+Math.imul(Qe,jt)|0,te=Math.imul(Qe,Ct),G=G+Math.imul(Te,je)|0,q=q+Math.imul(Te,De)|0,q=q+Math.imul(Le,je)|0,te=te+Math.imul(Le,De)|0,G=G+Math.imul(Je,pe)|0,q=q+Math.imul(Je,ke)|0,q=q+Math.imul(Ie,pe)|0,te=te+Math.imul(Ie,ke)|0,G=G+Math.imul(Ge,Fe)|0,q=q+Math.imul(Ge,ze)|0,q=q+Math.imul(rt,Fe)|0,te=te+Math.imul(rt,ze)|0,G=G+Math.imul(qe,tt)|0,q=q+Math.imul(qe,it)|0,q=q+Math.imul(Ke,tt)|0,te=te+Math.imul(Ke,it)|0;var Kt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,G=Math.imul(Ze,je),q=Math.imul(Ze,De),q=q+Math.imul(Qe,je)|0,te=Math.imul(Qe,De),G=G+Math.imul(Te,pe)|0,q=q+Math.imul(Te,ke)|0,q=q+Math.imul(Le,pe)|0,te=te+Math.imul(Le,ke)|0,G=G+Math.imul(Je,Fe)|0,q=q+Math.imul(Je,ze)|0,q=q+Math.imul(Ie,Fe)|0,te=te+Math.imul(Ie,ze)|0,G=G+Math.imul(Ge,tt)|0,q=q+Math.imul(Ge,it)|0,q=q+Math.imul(rt,tt)|0,te=te+Math.imul(rt,it)|0;var gt=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(gt>>>26)|0,gt&=67108863,G=Math.imul(Ze,pe),q=Math.imul(Ze,ke),q=q+Math.imul(Qe,pe)|0,te=Math.imul(Qe,ke),G=G+Math.imul(Te,Fe)|0,q=q+Math.imul(Te,ze)|0,q=q+Math.imul(Le,Fe)|0,te=te+Math.imul(Le,ze)|0,G=G+Math.imul(Je,tt)|0,q=q+Math.imul(Je,it)|0,q=q+Math.imul(Ie,tt)|0,te=te+Math.imul(Ie,it)|0;var _t=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(_t>>>26)|0,_t&=67108863,G=Math.imul(Ze,Fe),q=Math.imul(Ze,ze),q=q+Math.imul(Qe,Fe)|0,te=Math.imul(Qe,ze),G=G+Math.imul(Te,tt)|0,q=q+Math.imul(Te,it)|0,q=q+Math.imul(Le,tt)|0,te=te+Math.imul(Le,it)|0;var It=(se+G|0)+((q&8191)<<13)|0;se=(te+(q>>>13)|0)+(It>>>26)|0,It&=67108863,G=Math.imul(Ze,tt),q=Math.imul(Ze,it),q=q+Math.imul(Qe,tt)|0,te=Math.imul(Qe,it);var At=(se+G|0)+((q&8191)<<13)|0;return se=(te+(q>>>13)|0)+(At>>>26)|0,At&=67108863,oe[0]=ot,oe[1]=at,oe[2]=ct,oe[3]=dt,oe[4]=yt,oe[5]=Et,oe[6]=mt,oe[7]=xt,oe[8]=Mt,oe[9]=Ot,oe[10]=Ht,oe[11]=Ft,oe[12]=Wt,oe[13]=Jt,oe[14]=Kt,oe[15]=gt,oe[16]=_t,oe[17]=It,oe[18]=At,se!==0&&(oe[19]=se,J.length++),J};Math.imul||(H=U);function Y(W,O,z){z.negative=O.negative^W.negative,z.length=W.length+O.length;for(var J=0,ee=0,ae=0;ae<z.length-1;ae++){var oe=ee;ee=0;for(var se=J&67108863,G=Math.min(ae,O.length-1),q=Math.max(0,ae-W.length+1);q<=G;q++){var te=ae-q,fe=W.words[te]|0,he=O.words[q]|0,Ee=fe*he,we=Ee&67108863;oe=oe+(Ee/67108864|0)|0,we=we+se|0,se=we&67108863,oe=oe+(we>>>26)|0,ee+=oe>>>26,oe&=67108863}z.words[ae]=se,J=oe,oe=ee}return J!==0?z.words[ae]=J:z.length--,z._strip()}function Z(W,O,z){return Y(W,O,z)}S.prototype.mulTo=function(O,z){var J,ee=this.length+O.length;return this.length===10&&O.length===10?J=H(this,O,z):ee<63?J=U(this,O,z):ee<1024?J=Y(this,O,z):J=Z(this,O,z),J},S.prototype.mul=function(O){var z=new S(null);return z.words=new Array(this.length+O.length),this.mulTo(O,z)},S.prototype.mulf=function(O){var z=new S(null);return z.words=new Array(this.length+O.length),Z(this,O,z)},S.prototype.imul=function(O){return this.clone().mulTo(O,this)},S.prototype.imuln=function(O){var z=O<0;z&&(O=-O),x(typeof O=="number"),x(O<67108864);for(var J=0,ee=0;ee<this.length;ee++){var ae=(this.words[ee]|0)*O,oe=(ae&67108863)+(J&67108863);J>>=26,J+=ae/67108864|0,J+=oe>>>26,this.words[ee]=oe&67108863}return J!==0&&(this.words[ee]=J,this.length++),z?this.ineg():this},S.prototype.muln=function(O){return this.clone().imuln(O)},S.prototype.sqr=function(){return this.mul(this)},S.prototype.isqr=function(){return this.imul(this.clone())},S.prototype.pow=function(O){var z=j(O);if(z.length===0)return new S(1);for(var J=this,ee=0;ee<z.length&&z[ee]===0;ee++,J=J.sqr());if(++ee<z.length)for(var ae=J.sqr();ee<z.length;ee++,ae=ae.sqr())z[ee]!==0&&(J=J.mul(ae));return J},S.prototype.iushln=function(O){x(typeof O=="number"&&O>=0);var z=O%26,J=(O-z)/26,ee=67108863>>>26-z<<26-z,ae;if(z!==0){var oe=0;for(ae=0;ae<this.length;ae++){var se=this.words[ae]&ee,G=(this.words[ae]|0)-se<<z;this.words[ae]=G|oe,oe=se>>>26-z}oe&&(this.words[ae]=oe,this.length++)}if(J!==0){for(ae=this.length-1;ae>=0;ae--)this.words[ae+J]=this.words[ae];for(ae=0;ae<J;ae++)this.words[ae]=0;this.length+=J}return this._strip()},S.prototype.ishln=function(O){return x(this.negative===0),this.iushln(O)},S.prototype.iushrn=function(O,z,J){x(typeof O=="number"&&O>=0);var ee;z?ee=(z-z%26)/26:ee=0;var ae=O%26,oe=Math.min((O-ae)/26,this.length),se=67108863^67108863>>>ae<<ae,G=J;if(ee-=oe,ee=Math.max(0,ee),G){for(var q=0;q<oe;q++)G.words[q]=this.words[q];G.length=oe}if(oe!==0)if(this.length>oe)for(this.length-=oe,q=0;q<this.length;q++)this.words[q]=this.words[q+oe];else this.words[0]=0,this.length=1;var te=0;for(q=this.length-1;q>=0&&(te!==0||q>=ee);q--){var fe=this.words[q]|0;this.words[q]=te<<26-ae|fe>>>ae,te=fe&se}return G&&te!==0&&(G.words[G.length++]=te),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},S.prototype.ishrn=function(O,z,J){return x(this.negative===0),this.iushrn(O,z,J)},S.prototype.shln=function(O){return this.clone().ishln(O)},S.prototype.ushln=function(O){return this.clone().iushln(O)},S.prototype.shrn=function(O){return this.clone().ishrn(O)},S.prototype.ushrn=function(O){return this.clone().iushrn(O)},S.prototype.testn=function(O){x(typeof O=="number"&&O>=0);var z=O%26,J=(O-z)/26,ee=1<<z;if(this.length<=J)return!1;var ae=this.words[J];return!!(ae&ee)},S.prototype.imaskn=function(O){x(typeof O=="number"&&O>=0);var z=O%26,J=(O-z)/26;if(x(this.negative===0,"imaskn works only with positive numbers"),this.length<=J)return this;if(z!==0&&J++,this.length=Math.min(J,this.length),z!==0){var ee=67108863^67108863>>>z<<z;this.words[this.length-1]&=ee}return this._strip()},S.prototype.maskn=function(O){return this.clone().imaskn(O)},S.prototype.iaddn=function(O){return x(typeof O=="number"),x(O<67108864),O<0?this.isubn(-O):this.negative!==0?this.length===1&&(this.words[0]|0)<=O?(this.words[0]=O-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(O),this.negative=1,this):this._iaddn(O)},S.prototype._iaddn=function(O){this.words[0]+=O;for(var z=0;z<this.length&&this.words[z]>=67108864;z++)this.words[z]-=67108864,z===this.length-1?this.words[z+1]=1:this.words[z+1]++;return this.length=Math.max(this.length,z+1),this},S.prototype.isubn=function(O){if(x(typeof O=="number"),x(O<67108864),O<0)return this.iaddn(-O);if(this.negative!==0)return this.negative=0,this.iaddn(O),this.negative=1,this;if(this.words[0]-=O,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var z=0;z<this.length&&this.words[z]<0;z++)this.words[z]+=67108864,this.words[z+1]-=1;return this._strip()},S.prototype.addn=function(O){return this.clone().iaddn(O)},S.prototype.subn=function(O){return this.clone().isubn(O)},S.prototype.iabs=function(){return this.negative=0,this},S.prototype.abs=function(){return this.clone().iabs()},S.prototype._ishlnsubmul=function(O,z,J){var ee=O.length+J,ae;this._expand(ee);var oe,se=0;for(ae=0;ae<O.length;ae++){oe=(this.words[ae+J]|0)+se;var G=(O.words[ae]|0)*z;oe-=G&67108863,se=(oe>>26)-(G/67108864|0),this.words[ae+J]=oe&67108863}for(;ae<this.length-J;ae++)oe=(this.words[ae+J]|0)+se,se=oe>>26,this.words[ae+J]=oe&67108863;if(se===0)return this._strip();for(x(se===-1),se=0,ae=0;ae<this.length;ae++)oe=-(this.words[ae]|0)+se,se=oe>>26,this.words[ae]=oe&67108863;return this.negative=1,this._strip()},S.prototype._wordDiv=function(O,z){var J=this.length-O.length,ee=this.clone(),ae=O,oe=ae.words[ae.length-1]|0,se=this._countBits(oe);J=26-se,J!==0&&(ae=ae.ushln(J),ee.iushln(J),oe=ae.words[ae.length-1]|0);var G=ee.length-ae.length,q;if(z!=="mod"){q=new S(null),q.length=G+1,q.words=new Array(q.length);for(var te=0;te<q.length;te++)q.words[te]=0}var fe=ee.clone()._ishlnsubmul(ae,1,G);fe.negative===0&&(ee=fe,q&&(q.words[G]=1));for(var he=G-1;he>=0;he--){var Ee=(ee.words[ae.length+he]|0)*67108864+(ee.words[ae.length+he-1]|0);for(Ee=Math.min(Ee/oe|0,67108863),ee._ishlnsubmul(ae,Ee,he);ee.negative!==0;)Ee--,ee.negative=0,ee._ishlnsubmul(ae,1,he),ee.isZero()||(ee.negative^=1);q&&(q.words[he]=Ee)}return q&&q._strip(),ee._strip(),z!=="div"&&J!==0&&ee.iushrn(J),{div:q||null,mod:ee}},S.prototype.divmod=function(O,z,J){if(x(!O.isZero()),this.isZero())return{div:new S(0),mod:new S(0)};var ee,ae,oe;return this.negative!==0&&O.negative===0?(oe=this.neg().divmod(O,z),z!=="mod"&&(ee=oe.div.neg()),z!=="div"&&(ae=oe.mod.neg(),J&&ae.negative!==0&&ae.iadd(O)),{div:ee,mod:ae}):this.negative===0&&O.negative!==0?(oe=this.divmod(O.neg(),z),z!=="mod"&&(ee=oe.div.neg()),{div:ee,mod:oe.mod}):this.negative&O.negative?(oe=this.neg().divmod(O.neg(),z),z!=="div"&&(ae=oe.mod.neg(),J&&ae.negative!==0&&ae.isub(O)),{div:oe.div,mod:ae}):O.length>this.length||this.cmp(O)<0?{div:new S(0),mod:this}:O.length===1?z==="div"?{div:this.divn(O.words[0]),mod:null}:z==="mod"?{div:null,mod:new S(this.modrn(O.words[0]))}:{div:this.divn(O.words[0]),mod:new S(this.modrn(O.words[0]))}:this._wordDiv(O,z)},S.prototype.div=function(O){return this.divmod(O,"div",!1).div},S.prototype.mod=function(O){return this.divmod(O,"mod",!1).mod},S.prototype.umod=function(O){return this.divmod(O,"mod",!0).mod},S.prototype.divRound=function(O){var z=this.divmod(O);if(z.mod.isZero())return z.div;var J=z.div.negative!==0?z.mod.isub(O):z.mod,ee=O.ushrn(1),ae=O.andln(1),oe=J.cmp(ee);return oe<0||ae===1&&oe===0?z.div:z.div.negative!==0?z.div.isubn(1):z.div.iaddn(1)},S.prototype.modrn=function(O){var z=O<0;z&&(O=-O),x(O<=67108863);for(var J=(1<<26)%O,ee=0,ae=this.length-1;ae>=0;ae--)ee=(J*ee+(this.words[ae]|0))%O;return z?-ee:ee},S.prototype.modn=function(O){return this.modrn(O)},S.prototype.idivn=function(O){var z=O<0;z&&(O=-O),x(O<=67108863);for(var J=0,ee=this.length-1;ee>=0;ee--){var ae=(this.words[ee]|0)+J*67108864;this.words[ee]=ae/O|0,J=ae%O}return this._strip(),z?this.ineg():this},S.prototype.divn=function(O){return this.clone().idivn(O)},S.prototype.egcd=function(O){x(O.negative===0),x(!O.isZero());var z=this,J=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var ee=new S(1),ae=new S(0),oe=new S(0),se=new S(1),G=0;z.isEven()&&J.isEven();)z.iushrn(1),J.iushrn(1),++G;for(var q=J.clone(),te=z.clone();!z.isZero();){for(var fe=0,he=1;!(z.words[0]&he)&&fe<26;++fe,he<<=1);if(fe>0)for(z.iushrn(fe);fe-- >0;)(ee.isOdd()||ae.isOdd())&&(ee.iadd(q),ae.isub(te)),ee.iushrn(1),ae.iushrn(1);for(var Ee=0,we=1;!(J.words[0]&we)&&Ee<26;++Ee,we<<=1);if(Ee>0)for(J.iushrn(Ee);Ee-- >0;)(oe.isOdd()||se.isOdd())&&(oe.iadd(q),se.isub(te)),oe.iushrn(1),se.iushrn(1);z.cmp(J)>=0?(z.isub(J),ee.isub(oe),ae.isub(se)):(J.isub(z),oe.isub(ee),se.isub(ae))}return{a:oe,b:se,gcd:J.iushln(G)}},S.prototype._invmp=function(O){x(O.negative===0),x(!O.isZero());var z=this,J=O.clone();z.negative!==0?z=z.umod(O):z=z.clone();for(var ee=new S(1),ae=new S(0),oe=J.clone();z.cmpn(1)>0&&J.cmpn(1)>0;){for(var se=0,G=1;!(z.words[0]&G)&&se<26;++se,G<<=1);if(se>0)for(z.iushrn(se);se-- >0;)ee.isOdd()&&ee.iadd(oe),ee.iushrn(1);for(var q=0,te=1;!(J.words[0]&te)&&q<26;++q,te<<=1);if(q>0)for(J.iushrn(q);q-- >0;)ae.isOdd()&&ae.iadd(oe),ae.iushrn(1);z.cmp(J)>=0?(z.isub(J),ee.isub(ae)):(J.isub(z),ae.isub(ee))}var fe;return z.cmpn(1)===0?fe=ee:fe=ae,fe.cmpn(0)<0&&fe.iadd(O),fe},S.prototype.gcd=function(O){if(this.isZero())return O.abs();if(O.isZero())return this.abs();var z=this.clone(),J=O.clone();z.negative=0,J.negative=0;for(var ee=0;z.isEven()&&J.isEven();ee++)z.iushrn(1),J.iushrn(1);do{for(;z.isEven();)z.iushrn(1);for(;J.isEven();)J.iushrn(1);var ae=z.cmp(J);if(ae<0){var oe=z;z=J,J=oe}else if(ae===0||J.cmpn(1)===0)break;z.isub(J)}while(!0);return J.iushln(ee)},S.prototype.invm=function(O){return this.egcd(O).a.umod(O)},S.prototype.isEven=function(){return(this.words[0]&1)===0},S.prototype.isOdd=function(){return(this.words[0]&1)===1},S.prototype.andln=function(O){return this.words[0]&O},S.prototype.bincn=function(O){x(typeof O=="number");var z=O%26,J=(O-z)/26,ee=1<<z;if(this.length<=J)return this._expand(J+1),this.words[J]|=ee,this;for(var ae=ee,oe=J;ae!==0&&oe<this.length;oe++){var se=this.words[oe]|0;se+=ae,ae=se>>>26,se&=67108863,this.words[oe]=se}return ae!==0&&(this.words[oe]=ae,this.length++),this},S.prototype.isZero=function(){return this.length===1&&this.words[0]===0},S.prototype.cmpn=function(O){var z=O<0;if(this.negative!==0&&!z)return-1;if(this.negative===0&&z)return 1;this._strip();var J;if(this.length>1)J=1;else{z&&(O=-O),x(O<=67108863,"Number is too big");var ee=this.words[0]|0;J=ee===O?0:ee<O?-1:1}return this.negative!==0?-J|0:J},S.prototype.cmp=function(O){if(this.negative!==0&&O.negative===0)return-1;if(this.negative===0&&O.negative!==0)return 1;var z=this.ucmp(O);return this.negative!==0?-z|0:z},S.prototype.ucmp=function(O){if(this.length>O.length)return 1;if(this.length<O.length)return-1;for(var z=0,J=this.length-1;J>=0;J--){var ee=this.words[J]|0,ae=O.words[J]|0;if(ee!==ae){ee<ae?z=-1:ee>ae&&(z=1);break}}return z},S.prototype.gtn=function(O){return this.cmpn(O)===1},S.prototype.gt=function(O){return this.cmp(O)===1},S.prototype.gten=function(O){return this.cmpn(O)>=0},S.prototype.gte=function(O){return this.cmp(O)>=0},S.prototype.ltn=function(O){return this.cmpn(O)===-1},S.prototype.lt=function(O){return this.cmp(O)===-1},S.prototype.lten=function(O){return this.cmpn(O)<=0},S.prototype.lte=function(O){return this.cmp(O)<=0},S.prototype.eqn=function(O){return this.cmpn(O)===0},S.prototype.eq=function(O){return this.cmp(O)===0},S.red=function(O){return new ye(O)},S.prototype.toRed=function(O){return x(!this.red,"Already a number in reduction context"),x(this.negative===0,"red works only with positives"),O.convertTo(this)._forceRed(O)},S.prototype.fromRed=function(){return x(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},S.prototype._forceRed=function(O){return this.red=O,this},S.prototype.forceRed=function(O){return x(!this.red,"Already a number in reduction context"),this._forceRed(O)},S.prototype.redAdd=function(O){return x(this.red,"redAdd works only with red numbers"),this.red.add(this,O)},S.prototype.redIAdd=function(O){return x(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,O)},S.prototype.redSub=function(O){return x(this.red,"redSub works only with red numbers"),this.red.sub(this,O)},S.prototype.redISub=function(O){return x(this.red,"redISub works only with red numbers"),this.red.isub(this,O)},S.prototype.redShl=function(O){return x(this.red,"redShl works only with red numbers"),this.red.shl(this,O)},S.prototype.redMul=function(O){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.mul(this,O)},S.prototype.redIMul=function(O){return x(this.red,"redMul works only with red numbers"),this.red._verify2(this,O),this.red.imul(this,O)},S.prototype.redSqr=function(){return x(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},S.prototype.redISqr=function(){return x(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},S.prototype.redSqrt=function(){return x(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},S.prototype.redInvm=function(){return x(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},S.prototype.redNeg=function(){return x(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},S.prototype.redPow=function(O){return x(this.red&&!O.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,O)};var ne={k256:null,p224:null,p192:null,p25519:null};function re(W,O){this.name=W,this.p=new S(O,16),this.n=this.p.bitLength(),this.k=new S(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}re.prototype._tmp=function(){var O=new S(null);return O.words=new Array(Math.ceil(this.n/13)),O},re.prototype.ireduce=function(O){var z=O,J;do this.split(z,this.tmp),z=this.imulK(z),z=z.iadd(this.tmp),J=z.bitLength();while(J>this.n);var ee=J<this.n?-1:z.ucmp(this.p);return ee===0?(z.words[0]=0,z.length=1):ee>0?z.isub(this.p):z.strip!==void 0?z.strip():z._strip(),z},re.prototype.split=function(O,z){O.iushrn(this.n,0,z)},re.prototype.imulK=function(O){return O.imul(this.k)};function X(){re.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}E(X,re),X.prototype.split=function(O,z){for(var J=4194303,ee=Math.min(O.length,9),ae=0;ae<ee;ae++)z.words[ae]=O.words[ae];if(z.length=ee,O.length<=9){O.words[0]=0,O.length=1;return}var oe=O.words[9];for(z.words[z.length++]=oe&J,ae=10;ae<O.length;ae++){var se=O.words[ae]|0;O.words[ae-10]=(se&J)<<4|oe>>>22,oe=se}oe>>>=22,O.words[ae-10]=oe,oe===0&&O.length>10?O.length-=10:O.length-=9},X.prototype.imulK=function(O){O.words[O.length]=0,O.words[O.length+1]=0,O.length+=2;for(var z=0,J=0;J<O.length;J++){var ee=O.words[J]|0;z+=ee*977,O.words[J]=z&67108863,z=ee*64+(z/67108864|0)}return O.words[O.length-1]===0&&(O.length--,O.words[O.length-1]===0&&O.length--),O};function ce(){re.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}E(ce,re);function ue(){re.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}E(ue,re);function _e(){re.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}E(_e,re),_e.prototype.imulK=function(O){for(var z=0,J=0;J<O.length;J++){var ee=(O.words[J]|0)*19+z,ae=ee&67108863;ee>>>=26,O.words[J]=ae,z=ee}return z!==0&&(O.words[O.length++]=z),O},S._prime=function(O){if(ne[O])return ne[O];var z;if(O==="k256")z=new X;else if(O==="p224")z=new ce;else if(O==="p192")z=new ue;else if(O==="p25519")z=new _e;else throw new Error("Unknown prime "+O);return ne[O]=z,z};function ye(W){if(typeof W=="string"){var O=S._prime(W);this.m=O.p,this.prime=O}else x(W.gtn(1),"modulus must be greater than 1"),this.m=W,this.prime=null}ye.prototype._verify1=function(O){x(O.negative===0,"red works only with positives"),x(O.red,"red works only with red numbers")},ye.prototype._verify2=function(O,z){x((O.negative|z.negative)===0,"red works only with positives"),x(O.red&&O.red===z.red,"red works only with red numbers")},ye.prototype.imod=function(O){return this.prime?this.prime.ireduce(O)._forceRed(this):(I(O,O.umod(this.m)._forceRed(this)),O)},ye.prototype.neg=function(O){return O.isZero()?O.clone():this.m.sub(O)._forceRed(this)},ye.prototype.add=function(O,z){this._verify2(O,z);var J=O.add(z);return J.cmp(this.m)>=0&&J.isub(this.m),J._forceRed(this)},ye.prototype.iadd=function(O,z){this._verify2(O,z);var J=O.iadd(z);return J.cmp(this.m)>=0&&J.isub(this.m),J},ye.prototype.sub=function(O,z){this._verify2(O,z);var J=O.sub(z);return J.cmpn(0)<0&&J.iadd(this.m),J._forceRed(this)},ye.prototype.isub=function(O,z){this._verify2(O,z);var J=O.isub(z);return J.cmpn(0)<0&&J.iadd(this.m),J},ye.prototype.shl=function(O,z){return this._verify1(O),this.imod(O.ushln(z))},ye.prototype.imul=function(O,z){return this._verify2(O,z),this.imod(O.imul(z))},ye.prototype.mul=function(O,z){return this._verify2(O,z),this.imod(O.mul(z))},ye.prototype.isqr=function(O){return this.imul(O,O.clone())},ye.prototype.sqr=function(O){return this.mul(O,O)},ye.prototype.sqrt=function(O){if(O.isZero())return O.clone();var z=this.m.andln(3);if(x(z%2===1),z===3){var J=this.m.add(new S(1)).iushrn(2);return this.pow(O,J)}for(var ee=this.m.subn(1),ae=0;!ee.isZero()&&ee.andln(1)===0;)ae++,ee.iushrn(1);x(!ee.isZero());var oe=new S(1).toRed(this),se=oe.redNeg(),G=this.m.subn(1).iushrn(1),q=this.m.bitLength();for(q=new S(2*q*q).toRed(this);this.pow(q,G).cmp(se)!==0;)q.redIAdd(se);for(var te=this.pow(q,ee),fe=this.pow(O,ee.addn(1).iushrn(1)),he=this.pow(O,ee),Ee=ae;he.cmp(oe)!==0;){for(var we=he,xe=0;we.cmp(oe)!==0;xe++)we=we.redSqr();x(xe<Ee);var $e=this.pow(te,new S(1).iushln(Ee-xe-1));fe=fe.redMul($e),te=$e.redSqr(),he=he.redMul(te),Ee=xe}return fe},ye.prototype.invm=function(O){var z=O._invmp(this.m);return z.negative!==0?(z.negative=0,this.imod(z).redNeg()):this.imod(z)},ye.prototype.pow=function(O,z){if(z.isZero())return new S(1).toRed(this);if(z.cmpn(1)===0)return O.clone();var J=4,ee=new Array(1<<J);ee[0]=new S(1).toRed(this),ee[1]=O;for(var ae=2;ae<ee.length;ae++)ee[ae]=this.mul(ee[ae-1],O);var oe=ee[0],se=0,G=0,q=z.bitLength()%26;for(q===0&&(q=26),ae=z.length-1;ae>=0;ae--){for(var te=z.words[ae],fe=q-1;fe>=0;fe--){var he=te>>fe&1;if(oe!==ee[0]&&(oe=this.sqr(oe)),he===0&&se===0){G=0;continue}se<<=1,se|=he,G++,!(G!==J&&(ae!==0||fe!==0))&&(oe=this.mul(oe,ee[se]),G=0,se=0)}q=26}return oe},ye.prototype.convertTo=function(O){var z=O.umod(this.m);return z===O?z.clone():z},ye.prototype.convertFrom=function(O){var z=O.clone();return z.red=null,z},S.mont=function(O){return new ie(O)};function ie(W){ye.call(this,W),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new S(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E(ie,ye),ie.prototype.convertTo=function(O){return this.imod(O.ushln(this.shift))},ie.prototype.convertFrom=function(O){var z=this.imod(O.mul(this.rinv));return z.red=null,z},ie.prototype.imul=function(O,z){if(O.isZero()||z.isZero())return O.words[0]=0,O.length=1,O;var J=O.imul(z),ee=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ae=J.isub(ee).iushrn(this.shift),oe=ae;return ae.cmp(this.m)>=0?oe=ae.isub(this.m):ae.cmpn(0)<0&&(oe=ae.iadd(this.m)),oe._forceRed(this)},ie.prototype.mul=function(O,z){if(O.isZero()||z.isZero())return new S(0)._forceRed(this);var J=O.mul(z),ee=J.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ae=J.isub(ee).iushrn(this.shift),oe=ae;return ae.cmp(this.m)>=0?oe=ae.isub(this.m):ae.cmpn(0)<0&&(oe=ae.iadd(this.m)),oe._forceRed(this)},ie.prototype.invm=function(O){var z=this.imod(O._invmp(this.m).mul(this.r2));return z._forceRed(this)}})(t,commonjsGlobal)})(bn);var bnExports=bn.exports;const BN=getDefaultExportFromCjs(bnExports);function createCommonjsModule(t,n,_){return _={path:n,exports:{},require:function(x,E){return commonjsRequire(x,E??_.path)}},t(_,_.exports),_.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var minimalisticAssert=assert;function assert(t,n){if(!t)throw new Error(n||"Assertion failed")}assert.equal=function t(n,_,x){if(n!=_)throw new Error(x||"Assertion failed: "+n+" != "+_)};var utils_1=createCommonjsModule(function(t,n){var _=n;function x(C,T){if(Array.isArray(C))return C.slice();if(!C)return[];var B=[];if(typeof C!="string"){for(var A=0;A<C.length;A++)B[A]=C[A]|0;return B}if(T==="hex"){C=C.replace(/[^a-z0-9]+/ig,""),C.length%2!==0&&(C="0"+C);for(var A=0;A<C.length;A+=2)B.push(parseInt(C[A]+C[A+1],16))}else for(var A=0;A<C.length;A++){var I=C.charCodeAt(A),D=I>>8,M=I&255;D?B.push(D,M):B.push(M)}return B}_.toArray=x;function E(C){return C.length===1?"0"+C:C}_.zero2=E;function S(C){for(var T="",B=0;B<C.length;B++)T+=E(C[B].toString(16));return T}_.toHex=S,_.encode=function(T,B){return B==="hex"?S(T):T}}),utils_1$1=createCommonjsModule(function(t,n){var _=n;_.assert=minimalisticAssert,_.toArray=utils_1.toArray,_.zero2=utils_1.zero2,_.toHex=utils_1.toHex,_.encode=utils_1.encode;function x(B,A,I){var D=new Array(Math.max(B.bitLength(),I)+1);D.fill(0);for(var M=1<<A+1,V=B.clone(),L=0;L<D.length;L++){var F,j=V.andln(M-1);V.isOdd()?(j>(M>>1)-1?F=(M>>1)-j:F=j,V.isubn(F)):F=0,D[L]=F,V.iushrn(1)}return D}_.getNAF=x;function E(B,A){var I=[[],[]];B=B.clone(),A=A.clone();for(var D=0,M=0,V;B.cmpn(-D)>0||A.cmpn(-M)>0;){var L=B.andln(3)+D&3,F=A.andln(3)+M&3;L===3&&(L=-1),F===3&&(F=-1);var j;L&1?(V=B.andln(7)+D&7,(V===3||V===5)&&F===2?j=-L:j=L):j=0,I[0].push(j);var U;F&1?(V=A.andln(7)+M&7,(V===3||V===5)&&L===2?U=-F:U=F):U=0,I[1].push(U),2*D===j+1&&(D=1-D),2*M===U+1&&(M=1-M),B.iushrn(1),A.iushrn(1)}return I}_.getJSF=E;function S(B,A,I){var D="_"+A;B.prototype[A]=function(){return this[D]!==void 0?this[D]:this[D]=I.call(this)}}_.cachedProperty=S;function C(B){return typeof B=="string"?_.toArray(B,"hex"):B}_.parseBytes=C;function T(B){return new BN(B,"hex","le")}_.intFromLE=T}),getNAF=utils_1$1.getNAF,getJSF=utils_1$1.getJSF,assert$1=utils_1$1.assert;function BaseCurve(t,n){this.type=t,this.p=new BN(n.p,16),this.red=n.prime?BN.red(n.prime):BN.mont(this.p),this.zero=new BN(0).toRed(this.red),this.one=new BN(1).toRed(this.red),this.two=new BN(2).toRed(this.red),this.n=n.n&&new BN(n.n,16),this.g=n.g&&this.pointFromJSON(n.g,n.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var _=this.n&&this.p.div(this.n);!_||_.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base=BaseCurve;BaseCurve.prototype.point=function t(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function t(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function t(n,_){assert$1(n.precomputed);var x=n._getDoubles(),E=getNAF(_,1,this._bitLength),S=(1<<x.step+1)-(x.step%2===0?2:1);S/=3;var C=[],T,B;for(T=0;T<E.length;T+=x.step){B=0;for(var A=T+x.step-1;A>=T;A--)B=(B<<1)+E[A];C.push(B)}for(var I=this.jpoint(null,null,null),D=this.jpoint(null,null,null),M=S;M>0;M--){for(T=0;T<C.length;T++)B=C[T],B===M?D=D.mixedAdd(x.points[T]):B===-M&&(D=D.mixedAdd(x.points[T].neg()));I=I.add(D)}return I.toP()};BaseCurve.prototype._wnafMul=function t(n,_){var x=4,E=n._getNAFPoints(x);x=E.wnd;for(var S=E.points,C=getNAF(_,x,this._bitLength),T=this.jpoint(null,null,null),B=C.length-1;B>=0;B--){for(var A=0;B>=0&&C[B]===0;B--)A++;if(B>=0&&A++,T=T.dblp(A),B<0)break;var I=C[B];assert$1(I!==0),n.type==="affine"?I>0?T=T.mixedAdd(S[I-1>>1]):T=T.mixedAdd(S[-I-1>>1].neg()):I>0?T=T.add(S[I-1>>1]):T=T.add(S[-I-1>>1].neg())}return n.type==="affine"?T.toP():T};BaseCurve.prototype._wnafMulAdd=function t(n,_,x,E,S){var C=this._wnafT1,T=this._wnafT2,B=this._wnafT3,A=0,I,D,M;for(I=0;I<E;I++){M=_[I];var V=M._getNAFPoints(n);C[I]=V.wnd,T[I]=V.points}for(I=E-1;I>=1;I-=2){var L=I-1,F=I;if(C[L]!==1||C[F]!==1){B[L]=getNAF(x[L],C[L],this._bitLength),B[F]=getNAF(x[F],C[F],this._bitLength),A=Math.max(B[L].length,A),A=Math.max(B[F].length,A);continue}var j=[_[L],null,null,_[F]];_[L].y.cmp(_[F].y)===0?(j[1]=_[L].add(_[F]),j[2]=_[L].toJ().mixedAdd(_[F].neg())):_[L].y.cmp(_[F].y.redNeg())===0?(j[1]=_[L].toJ().mixedAdd(_[F]),j[2]=_[L].add(_[F].neg())):(j[1]=_[L].toJ().mixedAdd(_[F]),j[2]=_[L].toJ().mixedAdd(_[F].neg()));var U=[-3,-1,-5,-7,0,7,5,1,3],H=getJSF(x[L],x[F]);for(A=Math.max(H[0].length,A),B[L]=new Array(A),B[F]=new Array(A),D=0;D<A;D++){var Y=H[0][D]|0,Z=H[1][D]|0;B[L][D]=U[(Y+1)*3+(Z+1)],B[F][D]=0,T[L]=j}}var ne=this.jpoint(null,null,null),re=this._wnafT4;for(I=A;I>=0;I--){for(var X=0;I>=0;){var ce=!0;for(D=0;D<E;D++)re[D]=B[D][I]|0,re[D]!==0&&(ce=!1);if(!ce)break;X++,I--}if(I>=0&&X++,ne=ne.dblp(X),I<0)break;for(D=0;D<E;D++){var ue=re[D];ue!==0&&(ue>0?M=T[D][ue-1>>1]:ue<0&&(M=T[D][-ue-1>>1].neg()),M.type==="affine"?ne=ne.mixedAdd(M):ne=ne.add(M))}}for(I=0;I<E;I++)T[I]=null;return S?ne:ne.toP()};function BasePoint(t,n){this.curve=t,this.type=n,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function t(){throw new Error("Not implemented")};BasePoint.prototype.validate=function t(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function t(n,_){n=utils_1$1.toArray(n,_);var x=this.p.byteLength();if((n[0]===4||n[0]===6||n[0]===7)&&n.length-1===2*x){n[0]===6?assert$1(n[n.length-1]%2===0):n[0]===7&&assert$1(n[n.length-1]%2===1);var E=this.point(n.slice(1,1+x),n.slice(1+x,1+2*x));return E}else if((n[0]===2||n[0]===3)&&n.length-1===x)return this.pointFromX(n.slice(1,1+x),n[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function t(n){return this.encode(n,!0)};BasePoint.prototype._encode=function t(n){var _=this.curve.p.byteLength(),x=this.getX().toArray("be",_);return n?[this.getY().isEven()?2:3].concat(x):[4].concat(x,this.getY().toArray("be",_))};BasePoint.prototype.encode=function t(n,_){return utils_1$1.encode(this._encode(_),n)};BasePoint.prototype.precompute=function t(n){if(this.precomputed)return this;var _={doubles:null,naf:null,beta:null};return _.naf=this._getNAFPoints(8),_.doubles=this._getDoubles(4,n),_.beta=this._getBeta(),this.precomputed=_,this};BasePoint.prototype._hasDoubles=function t(n){if(!this.precomputed)return!1;var _=this.precomputed.doubles;return _?_.points.length>=Math.ceil((n.bitLength()+1)/_.step):!1};BasePoint.prototype._getDoubles=function t(n,_){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var x=[this],E=this,S=0;S<_;S+=n){for(var C=0;C<n;C++)E=E.dbl();x.push(E)}return{step:n,points:x}};BasePoint.prototype._getNAFPoints=function t(n){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var _=[this],x=(1<<n)-1,E=x===1?null:this.dbl(),S=1;S<x;S++)_[S]=_[S-1].add(E);return{wnd:n,points:_}};BasePoint.prototype._getBeta=function t(){return null};BasePoint.prototype.dblp=function t(n){for(var _=this,x=0;x<n;x++)_=_.dbl();return _};var inherits_browser=createCommonjsModule(function(t){typeof Object.create=="function"?t.exports=function(_,x){x&&(_.super_=x,_.prototype=Object.create(x.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(_,x){if(x){_.super_=x;var E=function(){};E.prototype=x.prototype,_.prototype=new E,_.prototype.constructor=_}}}),assert$2=utils_1$1.assert;function ShortCurve(t){base.call(this,"short",t),this.a=new BN(t.a,16).toRed(this.red),this.b=new BN(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve,base);var short_1=ShortCurve;ShortCurve.prototype._getEndomorphism=function t(n){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var _,x;if(n.beta)_=new BN(n.beta,16).toRed(this.red);else{var E=this._getEndoRoots(this.p);_=E[0].cmp(E[1])<0?E[0]:E[1],_=_.toRed(this.red)}if(n.lambda)x=new BN(n.lambda,16);else{var S=this._getEndoRoots(this.n);this.g.mul(S[0]).x.cmp(this.g.x.redMul(_))===0?x=S[0]:(x=S[1],assert$2(this.g.mul(x).x.cmp(this.g.x.redMul(_))===0))}var C;return n.basis?C=n.basis.map(function(T){return{a:new BN(T.a,16),b:new BN(T.b,16)}}):C=this._getEndoBasis(x),{beta:_,lambda:x,basis:C}}};ShortCurve.prototype._getEndoRoots=function t(n){var _=n===this.p?this.red:BN.mont(n),x=new BN(2).toRed(_).redInvm(),E=x.redNeg(),S=new BN(3).toRed(_).redNeg().redSqrt().redMul(x),C=E.redAdd(S).fromRed(),T=E.redSub(S).fromRed();return[C,T]};ShortCurve.prototype._getEndoBasis=function t(n){for(var _=this.n.ushrn(Math.floor(this.n.bitLength()/2)),x=n,E=this.n.clone(),S=new BN(1),C=new BN(0),T=new BN(0),B=new BN(1),A,I,D,M,V,L,F,j=0,U,H;x.cmpn(0)!==0;){var Y=E.div(x);U=E.sub(Y.mul(x)),H=T.sub(Y.mul(S));var Z=B.sub(Y.mul(C));if(!D&&U.cmp(_)<0)A=F.neg(),I=S,D=U.neg(),M=H;else if(D&&++j===2)break;F=U,E=x,x=U,T=S,S=H,B=C,C=Z}V=U.neg(),L=H;var ne=D.sqr().add(M.sqr()),re=V.sqr().add(L.sqr());return re.cmp(ne)>=0&&(V=A,L=I),D.negative&&(D=D.neg(),M=M.neg()),V.negative&&(V=V.neg(),L=L.neg()),[{a:D,b:M},{a:V,b:L}]};ShortCurve.prototype._endoSplit=function t(n){var _=this.endo.basis,x=_[0],E=_[1],S=E.b.mul(n).divRound(this.n),C=x.b.neg().mul(n).divRound(this.n),T=S.mul(x.a),B=C.mul(E.a),A=S.mul(x.b),I=C.mul(E.b),D=n.sub(T).sub(B),M=A.add(I).neg();return{k1:D,k2:M}};ShortCurve.prototype.pointFromX=function t(n,_){n=new BN(n,16),n.red||(n=n.toRed(this.red));var x=n.redSqr().redMul(n).redIAdd(n.redMul(this.a)).redIAdd(this.b),E=x.redSqrt();if(E.redSqr().redSub(x).cmp(this.zero)!==0)throw new Error("invalid point");var S=E.fromRed().isOdd();return(_&&!S||!_&&S)&&(E=E.redNeg()),this.point(n,E)};ShortCurve.prototype.validate=function t(n){if(n.inf)return!0;var _=n.x,x=n.y,E=this.a.redMul(_),S=_.redSqr().redMul(_).redIAdd(E).redIAdd(this.b);return x.redSqr().redISub(S).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function t(n,_,x){for(var E=this._endoWnafT1,S=this._endoWnafT2,C=0;C<n.length;C++){var T=this._endoSplit(_[C]),B=n[C],A=B._getBeta();T.k1.negative&&(T.k1.ineg(),B=B.neg(!0)),T.k2.negative&&(T.k2.ineg(),A=A.neg(!0)),E[C*2]=B,E[C*2+1]=A,S[C*2]=T.k1,S[C*2+1]=T.k2}for(var I=this._wnafMulAdd(1,E,S,C*2,x),D=0;D<C*2;D++)E[D]=null,S[D]=null;return I};function Point(t,n,_,x){base.BasePoint.call(this,t,"affine"),n===null&&_===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN(n,16),this.y=new BN(_,16),x&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits_browser(Point,base.BasePoint);ShortCurve.prototype.point=function t(n,_,x){return new Point(this,n,_,x)};ShortCurve.prototype.pointFromJSON=function t(n,_){return Point.fromJSON(this,n,_)};Point.prototype._getBeta=function t(){if(this.curve.endo){var n=this.precomputed;if(n&&n.beta)return n.beta;var _=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(n){var x=this.curve,E=function(S){return x.point(S.x.redMul(x.endo.beta),S.y)};n.beta=_,_.precomputed={beta:null,naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(E)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(E)}}}return _}};Point.prototype.toJSON=function t(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point.fromJSON=function t(n,_,x){typeof _=="string"&&(_=JSON.parse(_));var E=n.point(_[0],_[1],x);if(!_[2])return E;function S(T){return n.point(T[0],T[1],x)}var C=_[2];return E.precomputed={beta:null,doubles:C.doubles&&{step:C.doubles.step,points:[E].concat(C.doubles.points.map(S))},naf:C.naf&&{wnd:C.naf.wnd,points:[E].concat(C.naf.points.map(S))}},E};Point.prototype.inspect=function t(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function t(){return this.inf};Point.prototype.add=function t(n){if(this.inf)return n;if(n.inf)return this;if(this.eq(n))return this.dbl();if(this.neg().eq(n))return this.curve.point(null,null);if(this.x.cmp(n.x)===0)return this.curve.point(null,null);var _=this.y.redSub(n.y);_.cmpn(0)!==0&&(_=_.redMul(this.x.redSub(n.x).redInvm()));var x=_.redSqr().redISub(this.x).redISub(n.x),E=_.redMul(this.x.redSub(x)).redISub(this.y);return this.curve.point(x,E)};Point.prototype.dbl=function t(){if(this.inf)return this;var n=this.y.redAdd(this.y);if(n.cmpn(0)===0)return this.curve.point(null,null);var _=this.curve.a,x=this.x.redSqr(),E=n.redInvm(),S=x.redAdd(x).redIAdd(x).redIAdd(_).redMul(E),C=S.redSqr().redISub(this.x.redAdd(this.x)),T=S.redMul(this.x.redSub(C)).redISub(this.y);return this.curve.point(C,T)};Point.prototype.getX=function t(){return this.x.fromRed()};Point.prototype.getY=function t(){return this.y.fromRed()};Point.prototype.mul=function t(n){return n=new BN(n,16),this.isInfinity()?this:this._hasDoubles(n)?this.curve._fixedNafMul(this,n):this.curve.endo?this.curve._endoWnafMulAdd([this],[n]):this.curve._wnafMul(this,n)};Point.prototype.mulAdd=function t(n,_,x){var E=[this,_],S=[n,x];return this.curve.endo?this.curve._endoWnafMulAdd(E,S):this.curve._wnafMulAdd(1,E,S,2)};Point.prototype.jmulAdd=function t(n,_,x){var E=[this,_],S=[n,x];return this.curve.endo?this.curve._endoWnafMulAdd(E,S,!0):this.curve._wnafMulAdd(1,E,S,2,!0)};Point.prototype.eq=function t(n){return this===n||this.inf===n.inf&&(this.inf||this.x.cmp(n.x)===0&&this.y.cmp(n.y)===0)};Point.prototype.neg=function t(n){if(this.inf)return this;var _=this.curve.point(this.x,this.y.redNeg());if(n&&this.precomputed){var x=this.precomputed,E=function(S){return S.neg()};_.precomputed={naf:x.naf&&{wnd:x.naf.wnd,points:x.naf.points.map(E)},doubles:x.doubles&&{step:x.doubles.step,points:x.doubles.points.map(E)}}}return _};Point.prototype.toJ=function t(){if(this.inf)return this.curve.jpoint(null,null,null);var n=this.curve.jpoint(this.x,this.y,this.curve.one);return n};function JPoint(t,n,_,x){base.BasePoint.call(this,t,"jacobian"),n===null&&_===null&&x===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN(0)):(this.x=new BN(n,16),this.y=new BN(_,16),this.z=new BN(x,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits_browser(JPoint,base.BasePoint);ShortCurve.prototype.jpoint=function t(n,_,x){return new JPoint(this,n,_,x)};JPoint.prototype.toP=function t(){if(this.isInfinity())return this.curve.point(null,null);var n=this.z.redInvm(),_=n.redSqr(),x=this.x.redMul(_),E=this.y.redMul(_).redMul(n);return this.curve.point(x,E)};JPoint.prototype.neg=function t(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function t(n){if(this.isInfinity())return n;if(n.isInfinity())return this;var _=n.z.redSqr(),x=this.z.redSqr(),E=this.x.redMul(_),S=n.x.redMul(x),C=this.y.redMul(_.redMul(n.z)),T=n.y.redMul(x.redMul(this.z)),B=E.redSub(S),A=C.redSub(T);if(B.cmpn(0)===0)return A.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var I=B.redSqr(),D=I.redMul(B),M=E.redMul(I),V=A.redSqr().redIAdd(D).redISub(M).redISub(M),L=A.redMul(M.redISub(V)).redISub(C.redMul(D)),F=this.z.redMul(n.z).redMul(B);return this.curve.jpoint(V,L,F)};JPoint.prototype.mixedAdd=function t(n){if(this.isInfinity())return n.toJ();if(n.isInfinity())return this;var _=this.z.redSqr(),x=this.x,E=n.x.redMul(_),S=this.y,C=n.y.redMul(_).redMul(this.z),T=x.redSub(E),B=S.redSub(C);if(T.cmpn(0)===0)return B.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=T.redSqr(),I=A.redMul(T),D=x.redMul(A),M=B.redSqr().redIAdd(I).redISub(D).redISub(D),V=B.redMul(D.redISub(M)).redISub(S.redMul(I)),L=this.z.redMul(T);return this.curve.jpoint(M,V,L)};JPoint.prototype.dblp=function t(n){if(n===0)return this;if(this.isInfinity())return this;if(!n)return this.dbl();var _;if(this.curve.zeroA||this.curve.threeA){var x=this;for(_=0;_<n;_++)x=x.dbl();return x}var E=this.curve.a,S=this.curve.tinv,C=this.x,T=this.y,B=this.z,A=B.redSqr().redSqr(),I=T.redAdd(T);for(_=0;_<n;_++){var D=C.redSqr(),M=I.redSqr(),V=M.redSqr(),L=D.redAdd(D).redIAdd(D).redIAdd(E.redMul(A)),F=C.redMul(M),j=L.redSqr().redISub(F.redAdd(F)),U=F.redISub(j),H=L.redMul(U);H=H.redIAdd(H).redISub(V);var Y=I.redMul(B);_+1<n&&(A=A.redMul(V)),C=j,B=Y,I=H}return this.curve.jpoint(C,I.redMul(S),B)};JPoint.prototype.dbl=function t(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function t(){var n,_,x;if(this.zOne){var E=this.x.redSqr(),S=this.y.redSqr(),C=S.redSqr(),T=this.x.redAdd(S).redSqr().redISub(E).redISub(C);T=T.redIAdd(T);var B=E.redAdd(E).redIAdd(E),A=B.redSqr().redISub(T).redISub(T),I=C.redIAdd(C);I=I.redIAdd(I),I=I.redIAdd(I),n=A,_=B.redMul(T.redISub(A)).redISub(I),x=this.y.redAdd(this.y)}else{var D=this.x.redSqr(),M=this.y.redSqr(),V=M.redSqr(),L=this.x.redAdd(M).redSqr().redISub(D).redISub(V);L=L.redIAdd(L);var F=D.redAdd(D).redIAdd(D),j=F.redSqr(),U=V.redIAdd(V);U=U.redIAdd(U),U=U.redIAdd(U),n=j.redISub(L).redISub(L),_=F.redMul(L.redISub(n)).redISub(U),x=this.y.redMul(this.z),x=x.redIAdd(x)}return this.curve.jpoint(n,_,x)};JPoint.prototype._threeDbl=function t(){var n,_,x;if(this.zOne){var E=this.x.redSqr(),S=this.y.redSqr(),C=S.redSqr(),T=this.x.redAdd(S).redSqr().redISub(E).redISub(C);T=T.redIAdd(T);var B=E.redAdd(E).redIAdd(E).redIAdd(this.curve.a),A=B.redSqr().redISub(T).redISub(T);n=A;var I=C.redIAdd(C);I=I.redIAdd(I),I=I.redIAdd(I),_=B.redMul(T.redISub(A)).redISub(I),x=this.y.redAdd(this.y)}else{var D=this.z.redSqr(),M=this.y.redSqr(),V=this.x.redMul(M),L=this.x.redSub(D).redMul(this.x.redAdd(D));L=L.redAdd(L).redIAdd(L);var F=V.redIAdd(V);F=F.redIAdd(F);var j=F.redAdd(F);n=L.redSqr().redISub(j),x=this.y.redAdd(this.z).redSqr().redISub(M).redISub(D);var U=M.redSqr();U=U.redIAdd(U),U=U.redIAdd(U),U=U.redIAdd(U),_=L.redMul(F.redISub(n)).redISub(U)}return this.curve.jpoint(n,_,x)};JPoint.prototype._dbl=function t(){var n=this.curve.a,_=this.x,x=this.y,E=this.z,S=E.redSqr().redSqr(),C=_.redSqr(),T=x.redSqr(),B=C.redAdd(C).redIAdd(C).redIAdd(n.redMul(S)),A=_.redAdd(_);A=A.redIAdd(A);var I=A.redMul(T),D=B.redSqr().redISub(I.redAdd(I)),M=I.redISub(D),V=T.redSqr();V=V.redIAdd(V),V=V.redIAdd(V),V=V.redIAdd(V);var L=B.redMul(M).redISub(V),F=x.redAdd(x).redMul(E);return this.curve.jpoint(D,L,F)};JPoint.prototype.trpl=function t(){if(!this.curve.zeroA)return this.dbl().add(this);var n=this.x.redSqr(),_=this.y.redSqr(),x=this.z.redSqr(),E=_.redSqr(),S=n.redAdd(n).redIAdd(n),C=S.redSqr(),T=this.x.redAdd(_).redSqr().redISub(n).redISub(E);T=T.redIAdd(T),T=T.redAdd(T).redIAdd(T),T=T.redISub(C);var B=T.redSqr(),A=E.redIAdd(E);A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var I=S.redIAdd(T).redSqr().redISub(C).redISub(B).redISub(A),D=_.redMul(I);D=D.redIAdd(D),D=D.redIAdd(D);var M=this.x.redMul(B).redISub(D);M=M.redIAdd(M),M=M.redIAdd(M);var V=this.y.redMul(I.redMul(A.redISub(I)).redISub(T.redMul(B)));V=V.redIAdd(V),V=V.redIAdd(V),V=V.redIAdd(V);var L=this.z.redAdd(T).redSqr().redISub(x).redISub(B);return this.curve.jpoint(M,V,L)};JPoint.prototype.mul=function t(n,_){return n=new BN(n,_),this.curve._wnafMul(this,n)};JPoint.prototype.eq=function t(n){if(n.type==="affine")return this.eq(n.toJ());if(this===n)return!0;var _=this.z.redSqr(),x=n.z.redSqr();if(this.x.redMul(x).redISub(n.x.redMul(_)).cmpn(0)!==0)return!1;var E=_.redMul(this.z),S=x.redMul(n.z);return this.y.redMul(S).redISub(n.y.redMul(E)).cmpn(0)===0};JPoint.prototype.eqXToP=function t(n){var _=this.z.redSqr(),x=n.toRed(this.curve.red).redMul(_);if(this.x.cmp(x)===0)return!0;for(var E=n.clone(),S=this.curve.redN.redMul(_);;){if(E.iadd(this.curve.n),E.cmp(this.curve.p)>=0)return!1;if(x.redIAdd(S),this.x.cmp(x)===0)return!0}};JPoint.prototype.inspect=function t(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function t(){return this.z.cmpn(0)===0};var curve_1=createCommonjsModule(function(t,n){var _=n;_.base=base,_.short=short_1,_.mont=null,_.edwards=null}),curves_1=createCommonjsModule(function(t,n){var _=n,x=utils_1$1.assert;function E(T){T.type==="short"?this.curve=new curve_1.short(T):T.type==="edwards"?this.curve=new curve_1.edwards(T):this.curve=new curve_1.mont(T),this.g=this.curve.g,this.n=this.curve.n,this.hash=T.hash,x(this.g.validate(),"Invalid curve"),x(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}_.PresetCurve=E;function S(T,B){Object.defineProperty(_,T,{configurable:!0,enumerable:!0,get:function(){var A=new E(B);return Object.defineProperty(_,T,{configurable:!0,enumerable:!0,value:A}),A}})}S("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash$3.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),S("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash$3.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),S("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash$3.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),S("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash$3.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),S("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash$3.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),S("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["9"]}),S("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var C;try{C=null.crash()}catch{C=void 0}S("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash$3.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",C]})});function HmacDRBG(t){if(!(this instanceof HmacDRBG))return new HmacDRBG(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var n=utils_1.toArray(t.entropy,t.entropyEnc||"hex"),_=utils_1.toArray(t.nonce,t.nonceEnc||"hex"),x=utils_1.toArray(t.pers,t.persEnc||"hex");minimalisticAssert(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(n,_,x)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function t(n,_,x){var E=n.concat(_).concat(x);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var S=0;S<this.V.length;S++)this.K[S]=0,this.V[S]=1;this._update(E),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function t(){return new hash$3.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function t(n){var _=this._hmac().update(this.V).update([0]);n&&(_=_.update(n)),this.K=_.digest(),this.V=this._hmac().update(this.V).digest(),n&&(this.K=this._hmac().update(this.V).update([1]).update(n).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG.prototype.reseed=function t(n,_,x,E){typeof _!="string"&&(E=x,x=_,_=null),n=utils_1.toArray(n,_),x=utils_1.toArray(x,E),minimalisticAssert(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(n.concat(x||[])),this._reseed=1};HmacDRBG.prototype.generate=function t(n,_,x,E){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof _!="string"&&(E=x,x=_,_=null),x&&(x=utils_1.toArray(x,E||"hex"),this._update(x));for(var S=[];S.length<n;)this.V=this._hmac().update(this.V).digest(),S=S.concat(this.V);var C=S.slice(0,n);return this._update(x),this._reseed++,utils_1.encode(C,_)};var assert$3=utils_1$1.assert;function KeyPair(t,n){this.ec=t,this.priv=null,this.pub=null,n.priv&&this._importPrivate(n.priv,n.privEnc),n.pub&&this._importPublic(n.pub,n.pubEnc)}var key=KeyPair;KeyPair.fromPublic=function t(n,_,x){return _ instanceof KeyPair?_:new KeyPair(n,{pub:_,pubEnc:x})};KeyPair.fromPrivate=function t(n,_,x){return _ instanceof KeyPair?_:new KeyPair(n,{priv:_,privEnc:x})};KeyPair.prototype.validate=function t(){var n=this.getPublic();return n.isInfinity()?{result:!1,reason:"Invalid public key"}:n.validate()?n.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair.prototype.getPublic=function t(n,_){return typeof n=="string"&&(_=n,n=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),_?this.pub.encode(_,n):this.pub};KeyPair.prototype.getPrivate=function t(n){return n==="hex"?this.priv.toString(16,2):this.priv};KeyPair.prototype._importPrivate=function t(n,_){this.priv=new BN(n,_||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair.prototype._importPublic=function t(n,_){if(n.x||n.y){this.ec.curve.type==="mont"?assert$3(n.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$3(n.x&&n.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(n.x,n.y);return}this.pub=this.ec.curve.decodePoint(n,_)};KeyPair.prototype.derive=function t(n){return n.validate()||assert$3(n.validate(),"public point not validated"),n.mul(this.priv).getX()};KeyPair.prototype.sign=function t(n,_,x){return this.ec.sign(n,this,_,x)};KeyPair.prototype.verify=function t(n,_){return this.ec.verify(n,_,this)};KeyPair.prototype.inspect=function t(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4=utils_1$1.assert;function Signature(t,n){if(t instanceof Signature)return t;this._importDER(t,n)||(assert$4(t.r&&t.s,"Signature without r or s"),this.r=new BN(t.r,16),this.s=new BN(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var signature=Signature;function Position(){this.place=0}function getLength(t,n){var _=t[n.place++];if(!(_&128))return _;var x=_&15;if(x===0||x>4)return!1;for(var E=0,S=0,C=n.place;S<x;S++,C++)E<<=8,E|=t[C],E>>>=0;return E<=127?!1:(n.place=C,E)}function rmPadding(t){for(var n=0,_=t.length-1;!t[n]&&!(t[n+1]&128)&&n<_;)n++;return n===0?t:t.slice(n)}Signature.prototype._importDER=function t(n,_){n=utils_1$1.toArray(n,_);var x=new Position;if(n[x.place++]!==48)return!1;var E=getLength(n,x);if(E===!1||E+x.place!==n.length||n[x.place++]!==2)return!1;var S=getLength(n,x);if(S===!1)return!1;var C=n.slice(x.place,S+x.place);if(x.place+=S,n[x.place++]!==2)return!1;var T=getLength(n,x);if(T===!1||n.length!==T+x.place)return!1;var B=n.slice(x.place,T+x.place);if(C[0]===0)if(C[1]&128)C=C.slice(1);else return!1;if(B[0]===0)if(B[1]&128)B=B.slice(1);else return!1;return this.r=new BN(C),this.s=new BN(B),this.recoveryParam=null,!0};function constructLength(t,n){if(n<128){t.push(n);return}var _=1+(Math.log(n)/Math.LN2>>>3);for(t.push(_|128);--_;)t.push(n>>>(_<<3)&255);t.push(n)}Signature.prototype.toDER=function t(n){var _=this.r.toArray(),x=this.s.toArray();for(_[0]&128&&(_=[0].concat(_)),x[0]&128&&(x=[0].concat(x)),_=rmPadding(_),x=rmPadding(x);!x[0]&&!(x[1]&128);)x=x.slice(1);var E=[2];constructLength(E,_.length),E=E.concat(_),E.push(2),constructLength(E,x.length);var S=E.concat(x),C=[48];return constructLength(C,S.length),C=C.concat(S),utils_1$1.encode(C,n)};var rand=function(){throw new Error("unsupported")},assert$5=utils_1$1.assert;function EC(t){if(!(this instanceof EC))return new EC(t);typeof t=="string"&&(assert$5(Object.prototype.hasOwnProperty.call(curves_1,t),"Unknown curve "+t),t=curves_1[t]),t instanceof curves_1.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var ec=EC;EC.prototype.keyPair=function t(n){return new key(this,n)};EC.prototype.keyFromPrivate=function t(n,_){return key.fromPrivate(this,n,_)};EC.prototype.keyFromPublic=function t(n,_){return key.fromPublic(this,n,_)};EC.prototype.genKeyPair=function t(n){n||(n={});for(var _=new hmacDrbg({hash:this.hash,pers:n.pers,persEnc:n.persEnc||"utf8",entropy:n.entropy||rand(this.hash.hmacStrength),entropyEnc:n.entropy&&n.entropyEnc||"utf8",nonce:this.n.toArray()}),x=this.n.byteLength(),E=this.n.sub(new BN(2));;){var S=new BN(_.generate(x));if(!(S.cmp(E)>0))return S.iaddn(1),this.keyFromPrivate(S)}};EC.prototype._truncateToN=function t(n,_){var x=n.byteLength()*8-this.n.bitLength();return x>0&&(n=n.ushrn(x)),!_&&n.cmp(this.n)>=0?n.sub(this.n):n};EC.prototype.sign=function t(n,_,x,E){typeof x=="object"&&(E=x,x=null),E||(E={}),_=this.keyFromPrivate(_,x),n=this._truncateToN(new BN(n,16));for(var S=this.n.byteLength(),C=_.getPrivate().toArray("be",S),T=n.toArray("be",S),B=new hmacDrbg({hash:this.hash,entropy:C,nonce:T,pers:E.pers,persEnc:E.persEnc||"utf8"}),A=this.n.sub(new BN(1)),I=0;;I++){var D=E.k?E.k(I):new BN(B.generate(this.n.byteLength()));if(D=this._truncateToN(D,!0),!(D.cmpn(1)<=0||D.cmp(A)>=0)){var M=this.g.mul(D);if(!M.isInfinity()){var V=M.getX(),L=V.umod(this.n);if(L.cmpn(0)!==0){var F=D.invm(this.n).mul(L.mul(_.getPrivate()).iadd(n));if(F=F.umod(this.n),F.cmpn(0)!==0){var j=(M.getY().isOdd()?1:0)|(V.cmp(L)!==0?2:0);return E.canonical&&F.cmp(this.nh)>0&&(F=this.n.sub(F),j^=1),new signature({r:L,s:F,recoveryParam:j})}}}}}};EC.prototype.verify=function t(n,_,x,E){n=this._truncateToN(new BN(n,16)),x=this.keyFromPublic(x,E),_=new signature(_,"hex");var S=_.r,C=_.s;if(S.cmpn(1)<0||S.cmp(this.n)>=0||C.cmpn(1)<0||C.cmp(this.n)>=0)return!1;var T=C.invm(this.n),B=T.mul(n).umod(this.n),A=T.mul(S).umod(this.n),I;return this.curve._maxwellTrick?(I=this.g.jmulAdd(B,x.getPublic(),A),I.isInfinity()?!1:I.eqXToP(S)):(I=this.g.mulAdd(B,x.getPublic(),A),I.isInfinity()?!1:I.getX().umod(this.n).cmp(S)===0)};EC.prototype.recoverPubKey=function(t,n,_,x){assert$5((3&_)===_,"The recovery param is more than two bits"),n=new signature(n,x);var E=this.n,S=new BN(t),C=n.r,T=n.s,B=_&1,A=_>>1;if(C.cmp(this.curve.p.umod(this.curve.n))>=0&&A)throw new Error("Unable to find sencond key candinate");A?C=this.curve.pointFromX(C.add(this.curve.n),B):C=this.curve.pointFromX(C,B);var I=n.r.invm(E),D=E.sub(S).mul(I).umod(E),M=T.mul(I).umod(E);return this.g.mulAdd(D,C,M)};EC.prototype.getKeyRecoveryParam=function(t,n,_,x){if(n=new signature(n,x),n.recoveryParam!==null)return n.recoveryParam;for(var E=0;E<4;E++){var S;try{S=this.recoverPubKey(t,n,E)}catch{continue}if(S.eq(_))return E}throw new Error("Unable to find valid recovery factor")};var elliptic_1=createCommonjsModule(function(t,n){var _=n;_.version="6.5.4",_.utils=utils_1$1,_.rand=function(){throw new Error("unsupported")},_.curve=curve_1,_.curves=curves_1,_.ec=ec,_.eddsa=null}),EC$1=elliptic_1.ec;const version$6="signing-key/5.7.0",logger$a=new Logger(version$6);let _curve=null;function getCurve(){return _curve||(_curve=new EC$1("secp256k1")),_curve}class SigningKey{constructor(n){defineReadOnly(this,"curve","secp256k1"),defineReadOnly(this,"privateKey",hexlify(n)),hexDataLength(this.privateKey)!==32&&logger$a.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const _=getCurve().keyFromPrivate(arrayify(this.privateKey));defineReadOnly(this,"publicKey","0x"+_.getPublic(!1,"hex")),defineReadOnly(this,"compressedPublicKey","0x"+_.getPublic(!0,"hex")),defineReadOnly(this,"_isSigningKey",!0)}_addPoint(n){const _=getCurve().keyFromPublic(arrayify(this.publicKey)),x=getCurve().keyFromPublic(arrayify(n));return"0x"+_.pub.add(x.pub).encodeCompressed("hex")}signDigest(n){const _=getCurve().keyFromPrivate(arrayify(this.privateKey)),x=arrayify(n);x.length!==32&&logger$a.throwArgumentError("bad digest length","digest",n);const E=_.sign(x,{canonical:!0});return splitSignature({recoveryParam:E.recoveryParam,r:hexZeroPad("0x"+E.r.toString(16),32),s:hexZeroPad("0x"+E.s.toString(16),32)})}computeSharedSecret(n){const _=getCurve().keyFromPrivate(arrayify(this.privateKey)),x=getCurve().keyFromPublic(arrayify(computePublicKey(n)));return hexZeroPad("0x"+_.derive(x.getPublic()).toString(16),32)}static isSigningKey(n){return!!(n&&n._isSigningKey)}}function recoverPublicKey(t,n){const _=splitSignature(n),x={r:arrayify(_.r),s:arrayify(_.s)};return"0x"+getCurve().recoverPubKey(arrayify(t),x,_.recoveryParam).encode("hex",!1)}function computePublicKey(t,n){const _=arrayify(t);if(_.length===32){const x=new SigningKey(_);return n?"0x"+getCurve().keyFromPrivate(_).getPublic(!0,"hex"):x.publicKey}else{if(_.length===33)return n?hexlify(_):"0x"+getCurve().keyFromPublic(_).getPublic(!1,"hex");if(_.length===65)return n?"0x"+getCurve().keyFromPublic(_).getPublic(!0,"hex"):hexlify(_)}return logger$a.throwArgumentError("invalid public or private key","key","[REDACTED]")}const version$5="transactions/5.7.0",logger$9=new Logger(version$5);var TransactionTypes;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(TransactionTypes||(TransactionTypes={}));const transactionFields=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],allowedTransactionKeys={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function computeAddress(t){const n=computePublicKey(t);return getAddress(hexDataSlice(keccak256(hexDataSlice(n,1)),12))}function recoverAddress(t,n){return computeAddress(recoverPublicKey(arrayify(t),n))}function formatNumber(t,n){const _=stripZeros(BigNumber.from(t).toHexString());return _.length>32&&logger$9.throwArgumentError("invalid length for "+n,"transaction:"+n,t),_}function accessSetify(t,n){return{address:getAddress(t),storageKeys:(n||[]).map((_,x)=>(hexDataLength(_)!==32&&logger$9.throwArgumentError("invalid access list storageKey",`accessList[${t}:${x}]`,_),_.toLowerCase()))}}function accessListify(t){if(Array.isArray(t))return t.map((_,x)=>Array.isArray(_)?(_.length>2&&logger$9.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${x}]`,_),accessSetify(_[0],_[1])):accessSetify(_.address,_.storageKeys));const n=Object.keys(t).map(_=>{const x=t[_].reduce((E,S)=>(E[S]=!0,E),{});return accessSetify(_,Object.keys(x).sort())});return n.sort((_,x)=>_.address.localeCompare(x.address)),n}function formatAccessList(t){return accessListify(t).map(n=>[n.address,n.storageKeys])}function _serializeEip1559(t,n){if(t.gasPrice!=null){const x=BigNumber.from(t.gasPrice),E=BigNumber.from(t.maxFeePerGas||0);x.eq(E)||logger$9.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:x,maxFeePerGas:E})}const _=[formatNumber(t.chainId||0,"chainId"),formatNumber(t.nonce||0,"nonce"),formatNumber(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(t.maxFeePerGas||0,"maxFeePerGas"),formatNumber(t.gasLimit||0,"gasLimit"),t.to!=null?getAddress(t.to):"0x",formatNumber(t.value||0,"value"),t.data||"0x",formatAccessList(t.accessList||[])];if(n){const x=splitSignature(n);_.push(formatNumber(x.recoveryParam,"recoveryParam")),_.push(stripZeros(x.r)),_.push(stripZeros(x.s))}return hexConcat(["0x02",encode$6(_)])}function _serializeEip2930(t,n){const _=[formatNumber(t.chainId||0,"chainId"),formatNumber(t.nonce||0,"nonce"),formatNumber(t.gasPrice||0,"gasPrice"),formatNumber(t.gasLimit||0,"gasLimit"),t.to!=null?getAddress(t.to):"0x",formatNumber(t.value||0,"value"),t.data||"0x",formatAccessList(t.accessList||[])];if(n){const x=splitSignature(n);_.push(formatNumber(x.recoveryParam,"recoveryParam")),_.push(stripZeros(x.r)),_.push(stripZeros(x.s))}return hexConcat(["0x01",encode$6(_)])}function _serialize(t,n){checkProperties(t,allowedTransactionKeys);const _=[];transactionFields.forEach(function(C){let T=t[C.name]||[];const B={};C.numeric&&(B.hexPad="left"),T=arrayify(hexlify(T,B)),C.length&&T.length!==C.length&&T.length>0&&logger$9.throwArgumentError("invalid length for "+C.name,"transaction:"+C.name,T),C.maxLength&&(T=stripZeros(T),T.length>C.maxLength&&logger$9.throwArgumentError("invalid length for "+C.name,"transaction:"+C.name,T)),_.push(hexlify(T))});let x=0;if(t.chainId!=null?(x=t.chainId,typeof x!="number"&&logger$9.throwArgumentError("invalid transaction.chainId","transaction",t)):n&&!isBytesLike(n)&&n.v>28&&(x=Math.floor((n.v-35)/2)),x!==0&&(_.push(hexlify(x)),_.push("0x"),_.push("0x")),!n)return encode$6(_);const E=splitSignature(n);let S=27+E.recoveryParam;return x!==0?(_.pop(),_.pop(),_.pop(),S+=x*2+8,E.v>28&&E.v!==S&&logger$9.throwArgumentError("transaction.chainId/signature.v mismatch","signature",n)):E.v!==S&&logger$9.throwArgumentError("transaction.chainId/signature.v mismatch","signature",n),_.push(hexlify(S)),_.push(stripZeros(arrayify(E.r))),_.push(stripZeros(arrayify(E.s))),encode$6(_)}function serialize(t,n){if(t.type==null||t.type===0)return t.accessList!=null&&logger$9.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),_serialize(t,n);switch(t.type){case 1:return _serializeEip2930(t,n);case 2:return _serializeEip1559(t,n)}return logger$9.throwError(`unsupported transaction type: ${t.type}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}const version$4="wordlists/5.7.0",logger$8=new Logger(version$4);class Wordlist{constructor(n){logger$8.checkAbstract(new.target,Wordlist),defineReadOnly(this,"locale",n)}split(n){return n.toLowerCase().split(/ +/g)}join(n){return n.join(" ")}static check(n){const _=[];for(let x=0;x<2048;x++){const E=n.getWord(x);if(x!==n.getWordIndex(E))return"0x";_.push(E)}return id$1(_.join(`
`)+`
`)}static register(n,_){_||(_=n.locale)}}const words="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let wordlist=null;function loadWords(t){if(wordlist==null&&(wordlist=words.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Wordlist.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw wordlist=null,new Error("BIP39 Wordlist for en (English) FAILED")}class LangEn extends Wordlist{constructor(){super("en")}getWord(n){return loadWords(this),wordlist[n]}getWordIndex(n){return loadWords(this),wordlist.indexOf(n)}}const langEn=new LangEn;Wordlist.register(langEn);const wordlists={en:langEn},version$3="hdnode/5.7.0",logger$7=new Logger(version$3),N=BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),MasterSecret=toUtf8Bytes("Bitcoin seed"),HardenedBit=2147483648;function getUpperMask(t){return(1<<t)-1<<8-t}function getLowerMask(t){return(1<<t)-1}function bytes32(t){return hexZeroPad(hexlify(t),32)}function base58check(t){return Base58.encode(concat([t,hexDataSlice(sha256$2(sha256$2(t)),0,4)]))}function getWordlist(t){if(t==null)return wordlists.en;if(typeof t=="string"){const n=wordlists[t];return n==null&&logger$7.throwArgumentError("unknown locale","wordlist",t),n}return t}const _constructorGuard={},defaultPath="m/44'/60'/0'/0/0";class HDNode{constructor(n,_,x,E,S,C,T,B){if(n!==_constructorGuard)throw new Error("HDNode constructor cannot be called directly");if(_){const A=new SigningKey(_);defineReadOnly(this,"privateKey",A.privateKey),defineReadOnly(this,"publicKey",A.compressedPublicKey)}else defineReadOnly(this,"privateKey",null),defineReadOnly(this,"publicKey",hexlify(x));defineReadOnly(this,"parentFingerprint",E),defineReadOnly(this,"fingerprint",hexDataSlice(ripemd160(sha256$2(this.publicKey)),0,4)),defineReadOnly(this,"address",computeAddress(this.publicKey)),defineReadOnly(this,"chainCode",S),defineReadOnly(this,"index",C),defineReadOnly(this,"depth",T),B==null?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",null)):typeof B=="string"?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",B)):(defineReadOnly(this,"mnemonic",B),defineReadOnly(this,"path",B.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return base58check(concat([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",hexlify(this.depth),this.parentFingerprint,hexZeroPad(hexlify(this.index),4),this.chainCode,this.privateKey!=null?concat(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new HDNode(_constructorGuard,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(n){if(n>4294967295)throw new Error("invalid index - "+String(n));let _=this.path;_&&(_+="/"+(n&~HardenedBit));const x=new Uint8Array(37);if(n&HardenedBit){if(!this.privateKey)throw new Error("cannot derive child of neutered node");x.set(arrayify(this.privateKey),1),_&&(_+="'")}else x.set(arrayify(this.publicKey));for(let D=24;D>=0;D-=8)x[33+(D>>3)]=n>>24-D&255;const E=arrayify(computeHmac(SupportedAlgorithm.sha512,this.chainCode,x)),S=E.slice(0,32),C=E.slice(32);let T=null,B=null;this.privateKey?T=bytes32(BigNumber.from(S).add(this.privateKey).mod(N)):B=new SigningKey(hexlify(S))._addPoint(this.publicKey);let A=_;const I=this.mnemonic;return I&&(A=Object.freeze({phrase:I.phrase,path:_,locale:I.locale||"en"})),new HDNode(_constructorGuard,T,B,this.fingerprint,bytes32(C),n,this.depth+1,A)}derivePath(n){const _=n.split("/");if(_.length===0||_[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+n);_[0]==="m"&&_.shift();let x=this;for(let E=0;E<_.length;E++){const S=_[E];if(S.match(/^[0-9]+'$/)){const C=parseInt(S.substring(0,S.length-1));if(C>=HardenedBit)throw new Error("invalid path index - "+S);x=x._derive(HardenedBit+C)}else if(S.match(/^[0-9]+$/)){const C=parseInt(S);if(C>=HardenedBit)throw new Error("invalid path index - "+S);x=x._derive(C)}else throw new Error("invalid path component - "+S)}return x}static _fromSeed(n,_){const x=arrayify(n);if(x.length<16||x.length>64)throw new Error("invalid seed");const E=arrayify(computeHmac(SupportedAlgorithm.sha512,MasterSecret,x));return new HDNode(_constructorGuard,bytes32(E.slice(0,32)),null,"0x00000000",bytes32(E.slice(32)),0,0,_)}static fromMnemonic(n,_,x){return x=getWordlist(x),n=entropyToMnemonic(mnemonicToEntropy(n,x),x),HDNode._fromSeed(mnemonicToSeed(n,_),{phrase:n,path:"m",locale:x.locale})}static fromSeed(n){return HDNode._fromSeed(n,null)}static fromExtendedKey(n){const _=Base58.decode(n);(_.length!==82||base58check(_.slice(0,78))!==n)&&logger$7.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const x=_[4],E=hexlify(_.slice(5,9)),S=parseInt(hexlify(_.slice(9,13)).substring(2),16),C=hexlify(_.slice(13,45)),T=_.slice(45,78);switch(hexlify(_.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new HDNode(_constructorGuard,null,hexlify(T),E,C,S,x,null);case"0x0488ade4":case"0x04358394 ":if(T[0]!==0)break;return new HDNode(_constructorGuard,hexlify(T.slice(1)),null,E,C,S,x,null)}return logger$7.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function mnemonicToSeed(t,n){n||(n="");const _=toUtf8Bytes("mnemonic"+n,UnicodeNormalizationForm.NFKD);return pbkdf2$1(toUtf8Bytes(t,UnicodeNormalizationForm.NFKD),_,2048,64,"sha512")}function mnemonicToEntropy(t,n){n=getWordlist(n),logger$7.checkNormalize();const _=n.split(t);if(_.length%3!==0)throw new Error("invalid mnemonic");const x=arrayify(new Uint8Array(Math.ceil(11*_.length/8)));let E=0;for(let A=0;A<_.length;A++){let I=n.getWordIndex(_[A].normalize("NFKD"));if(I===-1)throw new Error("invalid mnemonic");for(let D=0;D<11;D++)I&1<<10-D&&(x[E>>3]|=1<<7-E%8),E++}const S=32*_.length/3,C=_.length/3,T=getUpperMask(C);if((arrayify(sha256$2(x.slice(0,S/8)))[0]&T)!==(x[x.length-1]&T))throw new Error("invalid checksum");return hexlify(x.slice(0,S/8))}function entropyToMnemonic(t,n){if(n=getWordlist(n),t=arrayify(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const _=[0];let x=11;for(let C=0;C<t.length;C++)x>8?(_[_.length-1]<<=8,_[_.length-1]|=t[C],x-=8):(_[_.length-1]<<=x,_[_.length-1]|=t[C]>>8-x,_.push(t[C]&getLowerMask(8-x)),x+=3);const E=t.length/4,S=arrayify(sha256$2(t))[0]&getUpperMask(E);return _[_.length-1]<<=E,_[_.length-1]|=S>>8-E,n.join(_.map(C=>n.getWord(C)))}const version$2="random/5.7.0",logger$6=new Logger(version$2);function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global$1<"u")return global$1;throw new Error("unable to locate global object")}const anyGlobal=getGlobal();let crypto$1=anyGlobal.crypto||anyGlobal.msCrypto;(!crypto$1||!crypto$1.getRandomValues)&&(logger$6.warn("WARNING: Missing strong random number source"),crypto$1={getRandomValues:function(t){return logger$6.throwError("no secure random source avaialble",Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function randomBytes(t){(t<=0||t>1024||t%1||t!=t)&&logger$6.throwArgumentError("invalid length","length",t);const n=new Uint8Array(t);return crypto$1.getRandomValues(n),arrayify(n)}var aesJs={exports:{}};(function(t,n){(function(_){function x(G){return parseInt(G)===G}function E(G){if(!x(G.length))return!1;for(var q=0;q<G.length;q++)if(!x(G[q])||G[q]<0||G[q]>255)return!1;return!0}function S(G,q){if(G.buffer&&ArrayBuffer.isView(G)&&G.name==="Uint8Array")return q&&(G.slice?G=G.slice():G=Array.prototype.slice.call(G)),G;if(Array.isArray(G)){if(!E(G))throw new Error("Array contains invalid value: "+G);return new Uint8Array(G)}if(x(G.length)&&E(G))return new Uint8Array(G);throw new Error("unsupported array-like object")}function C(G){return new Uint8Array(G)}function T(G,q,te,fe,he){(fe!=null||he!=null)&&(G.slice?G=G.slice(fe,he):G=Array.prototype.slice.call(G,fe,he)),q.set(G,te)}var B=function(){function G(te){var fe=[],he=0;for(te=encodeURI(te);he<te.length;){var Ee=te.charCodeAt(he++);Ee===37?(fe.push(parseInt(te.substr(he,2),16)),he+=2):fe.push(Ee)}return S(fe)}function q(te){for(var fe=[],he=0;he<te.length;){var Ee=te[he];Ee<128?(fe.push(String.fromCharCode(Ee)),he++):Ee>191&&Ee<224?(fe.push(String.fromCharCode((Ee&31)<<6|te[he+1]&63)),he+=2):(fe.push(String.fromCharCode((Ee&15)<<12|(te[he+1]&63)<<6|te[he+2]&63)),he+=3)}return fe.join("")}return{toBytes:G,fromBytes:q}}(),A=function(){function G(fe){for(var he=[],Ee=0;Ee<fe.length;Ee+=2)he.push(parseInt(fe.substr(Ee,2),16));return he}var q="0123456789abcdef";function te(fe){for(var he=[],Ee=0;Ee<fe.length;Ee++){var we=fe[Ee];he.push(q[(we&240)>>4]+q[we&15])}return he.join("")}return{toBytes:G,fromBytes:te}}(),I={16:10,24:12,32:14},D=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],M=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],V=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],L=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],F=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],j=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],U=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],H=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],Y=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],Z=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],ne=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],re=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],X=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],ce=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],ue=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function _e(G){for(var q=[],te=0;te<G.length;te+=4)q.push(G[te]<<24|G[te+1]<<16|G[te+2]<<8|G[te+3]);return q}var ye=function(G){if(!(this instanceof ye))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:S(G,!0)}),this._prepare()};ye.prototype._prepare=function(){var G=I[this.key.length];if(G==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var q=0;q<=G;q++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var te=(G+1)*4,fe=this.key.length/4,he=_e(this.key),Ee,q=0;q<fe;q++)Ee=q>>2,this._Ke[Ee][q%4]=he[q],this._Kd[G-Ee][q%4]=he[q];for(var we=0,xe=fe,$e;xe<te;){if($e=he[fe-1],he[0]^=M[$e>>16&255]<<24^M[$e>>8&255]<<16^M[$e&255]<<8^M[$e>>24&255]^D[we]<<24,we+=1,fe!=8)for(var q=1;q<fe;q++)he[q]^=he[q-1];else{for(var q=1;q<fe/2;q++)he[q]^=he[q-1];$e=he[fe/2-1],he[fe/2]^=M[$e&255]^M[$e>>8&255]<<8^M[$e>>16&255]<<16^M[$e>>24&255]<<24;for(var q=fe/2+1;q<fe;q++)he[q]^=he[q-1]}for(var q=0,ge,Se;q<fe&&xe<te;)ge=xe>>2,Se=xe%4,this._Ke[ge][Se]=he[q],this._Kd[G-ge][Se]=he[q++],xe++}for(var ge=1;ge<G;ge++)for(var Se=0;Se<4;Se++)$e=this._Kd[ge][Se],this._Kd[ge][Se]=re[$e>>24&255]^X[$e>>16&255]^ce[$e>>8&255]^ue[$e&255]},ye.prototype.encrypt=function(G){if(G.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var q=this._Ke.length-1,te=[0,0,0,0],fe=_e(G),he=0;he<4;he++)fe[he]^=this._Ke[0][he];for(var Ee=1;Ee<q;Ee++){for(var he=0;he<4;he++)te[he]=L[fe[he]>>24&255]^F[fe[(he+1)%4]>>16&255]^j[fe[(he+2)%4]>>8&255]^U[fe[(he+3)%4]&255]^this._Ke[Ee][he];fe=te.slice()}for(var we=C(16),xe,he=0;he<4;he++)xe=this._Ke[q][he],we[4*he]=(M[fe[he]>>24&255]^xe>>24)&255,we[4*he+1]=(M[fe[(he+1)%4]>>16&255]^xe>>16)&255,we[4*he+2]=(M[fe[(he+2)%4]>>8&255]^xe>>8)&255,we[4*he+3]=(M[fe[(he+3)%4]&255]^xe)&255;return we},ye.prototype.decrypt=function(G){if(G.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var q=this._Kd.length-1,te=[0,0,0,0],fe=_e(G),he=0;he<4;he++)fe[he]^=this._Kd[0][he];for(var Ee=1;Ee<q;Ee++){for(var he=0;he<4;he++)te[he]=H[fe[he]>>24&255]^Y[fe[(he+3)%4]>>16&255]^Z[fe[(he+2)%4]>>8&255]^ne[fe[(he+1)%4]&255]^this._Kd[Ee][he];fe=te.slice()}for(var we=C(16),xe,he=0;he<4;he++)xe=this._Kd[q][he],we[4*he]=(V[fe[he]>>24&255]^xe>>24)&255,we[4*he+1]=(V[fe[(he+3)%4]>>16&255]^xe>>16)&255,we[4*he+2]=(V[fe[(he+2)%4]>>8&255]^xe>>8)&255,we[4*he+3]=(V[fe[(he+1)%4]&255]^xe)&255;return we};var ie=function(G){if(!(this instanceof ie))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new ye(G)};ie.prototype.encrypt=function(G){if(G=S(G),G.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var q=C(G.length),te=C(16),fe=0;fe<G.length;fe+=16)T(G,te,0,fe,fe+16),te=this._aes.encrypt(te),T(te,q,fe);return q},ie.prototype.decrypt=function(G){if(G=S(G),G.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var q=C(G.length),te=C(16),fe=0;fe<G.length;fe+=16)T(G,te,0,fe,fe+16),te=this._aes.decrypt(te),T(te,q,fe);return q};var W=function(G,q){if(!(this instanceof W))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!q)q=C(16);else if(q.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=S(q,!0),this._aes=new ye(G)};W.prototype.encrypt=function(G){if(G=S(G),G.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var q=C(G.length),te=C(16),fe=0;fe<G.length;fe+=16){T(G,te,0,fe,fe+16);for(var he=0;he<16;he++)te[he]^=this._lastCipherblock[he];this._lastCipherblock=this._aes.encrypt(te),T(this._lastCipherblock,q,fe)}return q},W.prototype.decrypt=function(G){if(G=S(G),G.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var q=C(G.length),te=C(16),fe=0;fe<G.length;fe+=16){T(G,te,0,fe,fe+16),te=this._aes.decrypt(te);for(var he=0;he<16;he++)q[fe+he]=te[he]^this._lastCipherblock[he];T(G,this._lastCipherblock,0,fe,fe+16)}return q};var O=function(G,q,te){if(!(this instanceof O))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!q)q=C(16);else if(q.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");te||(te=1),this.segmentSize=te,this._shiftRegister=S(q,!0),this._aes=new ye(G)};O.prototype.encrypt=function(G){if(G.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var q=S(G,!0),te,fe=0;fe<q.length;fe+=this.segmentSize){te=this._aes.encrypt(this._shiftRegister);for(var he=0;he<this.segmentSize;he++)q[fe+he]^=te[he];T(this._shiftRegister,this._shiftRegister,0,this.segmentSize),T(q,this._shiftRegister,16-this.segmentSize,fe,fe+this.segmentSize)}return q},O.prototype.decrypt=function(G){if(G.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var q=S(G,!0),te,fe=0;fe<q.length;fe+=this.segmentSize){te=this._aes.encrypt(this._shiftRegister);for(var he=0;he<this.segmentSize;he++)q[fe+he]^=te[he];T(this._shiftRegister,this._shiftRegister,0,this.segmentSize),T(G,this._shiftRegister,16-this.segmentSize,fe,fe+this.segmentSize)}return q};var z=function(G,q){if(!(this instanceof z))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!q)q=C(16);else if(q.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=S(q,!0),this._lastPrecipherIndex=16,this._aes=new ye(G)};z.prototype.encrypt=function(G){for(var q=S(G,!0),te=0;te<q.length;te++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),q[te]^=this._lastPrecipher[this._lastPrecipherIndex++];return q},z.prototype.decrypt=z.prototype.encrypt;var J=function(G){if(!(this instanceof J))throw Error("Counter must be instanitated with `new`");G!==0&&!G&&(G=1),typeof G=="number"?(this._counter=C(16),this.setValue(G)):this.setBytes(G)};J.prototype.setValue=function(G){if(typeof G!="number"||parseInt(G)!=G)throw new Error("invalid counter value (must be an integer)");for(var q=15;q>=0;--q)this._counter[q]=G%256,G=G>>8},J.prototype.setBytes=function(G){if(G=S(G,!0),G.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=G},J.prototype.increment=function(){for(var G=15;G>=0;G--)if(this._counter[G]===255)this._counter[G]=0;else{this._counter[G]++;break}};var ee=function(G,q){if(!(this instanceof ee))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",q instanceof J||(q=new J(q)),this._counter=q,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new ye(G)};ee.prototype.encrypt=function(G){for(var q=S(G,!0),te=0;te<q.length;te++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),q[te]^=this._remainingCounter[this._remainingCounterIndex++];return q},ee.prototype.decrypt=ee.prototype.encrypt;function ae(G){G=S(G,!0);var q=16-G.length%16,te=C(G.length+q);T(G,te);for(var fe=G.length;fe<te.length;fe++)te[fe]=q;return te}function oe(G){if(G=S(G,!0),G.length<16)throw new Error("PKCS#7 invalid length");var q=G[G.length-1];if(q>16)throw new Error("PKCS#7 padding byte out of range");for(var te=G.length-q,fe=0;fe<q;fe++)if(G[te+fe]!==q)throw new Error("PKCS#7 invalid padding byte");var he=C(te);return T(G,he,0,0,te),he}var se={AES:ye,Counter:J,ModeOfOperation:{ecb:ie,cbc:W,cfb:O,ofb:z,ctr:ee},utils:{hex:A,utf8:B},padding:{pkcs7:{pad:ae,strip:oe}},_arrayTest:{coerceArray:S,createArray:C,copyArray:T}};t.exports=se})()})(aesJs);var aesJsExports=aesJs.exports;const aes=getDefaultExportFromCjs(aesJsExports),version$1="json-wallets/5.7.0";function looseArrayify(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),arrayify(t)}function zpad(t,n){for(t=String(t);t.length<n;)t="0"+t;return t}function getPassword(t){return typeof t=="string"?toUtf8Bytes(t,UnicodeNormalizationForm.NFKC):arrayify(t)}function searchPath(t,n){let _=t;const x=n.toLowerCase().split("/");for(let E=0;E<x.length;E++){let S=null;for(const C in _)if(C.toLowerCase()===x[E]){S=_[C];break}if(S===null)return null;_=S}return _}function uuidV4(t){const n=arrayify(t);n[6]=n[6]&15|64,n[8]=n[8]&63|128;const _=hexlify(n);return[_.substring(2,10),_.substring(10,14),_.substring(14,18),_.substring(18,22),_.substring(22,34)].join("-")}const logger$5=new Logger(version$1);class CrowdsaleAccount extends Description{isCrowdsaleAccount(n){return!!(n&&n._isCrowdsaleAccount)}}function decrypt$2(t,n){const _=JSON.parse(t);n=getPassword(n);const x=getAddress(searchPath(_,"ethaddr")),E=looseArrayify(searchPath(_,"encseed"));(!E||E.length%16!==0)&&logger$5.throwArgumentError("invalid encseed","json",t);const S=arrayify(pbkdf2$1(n,n,2e3,32,"sha256")).slice(0,16),C=E.slice(0,16),T=E.slice(16),B=new aes.ModeOfOperation.cbc(S,C),A=aes.padding.pkcs7.strip(arrayify(B.decrypt(T)));let I="";for(let V=0;V<A.length;V++)I+=String.fromCharCode(A[V]);const D=toUtf8Bytes(I),M=keccak256(D);return new CrowdsaleAccount({_isCrowdsaleAccount:!0,address:x,privateKey:M})}function isCrowdsaleWallet(t){let n=null;try{n=JSON.parse(t)}catch{return!1}return n.encseed&&n.ethaddr}function isKeystoreWallet(t){let n=null;try{n=JSON.parse(t)}catch{return!1}return!(!n.version||parseInt(n.version)!==n.version||parseInt(n.version)!==3)}var scrypt$1={exports:{}};(function(t,n){(function(_){function E(F){const j=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let U=1779033703,H=3144134277,Y=1013904242,Z=2773480762,ne=1359893119,re=2600822924,X=528734635,ce=1541459225;const ue=new Uint32Array(64);function _e(ee){let ae=0,oe=ee.length;for(;oe>=64;){let se=U,G=H,q=Y,te=Z,fe=ne,he=re,Ee=X,we=ce,xe,$e,ge,Se,me;for($e=0;$e<16;$e++)ge=ae+$e*4,ue[$e]=(ee[ge]&255)<<24|(ee[ge+1]&255)<<16|(ee[ge+2]&255)<<8|ee[ge+3]&255;for($e=16;$e<64;$e++)xe=ue[$e-2],Se=(xe>>>17|xe<<32-17)^(xe>>>19|xe<<32-19)^xe>>>10,xe=ue[$e-15],me=(xe>>>7|xe<<32-7)^(xe>>>18|xe<<32-18)^xe>>>3,ue[$e]=(Se+ue[$e-7]|0)+(me+ue[$e-16]|0)|0;for($e=0;$e<64;$e++)Se=(((fe>>>6|fe<<32-6)^(fe>>>11|fe<<32-11)^(fe>>>25|fe<<32-25))+(fe&he^~fe&Ee)|0)+(we+(j[$e]+ue[$e]|0)|0)|0,me=((se>>>2|se<<32-2)^(se>>>13|se<<32-13)^(se>>>22|se<<32-22))+(se&G^se&q^G&q)|0,we=Ee,Ee=he,he=fe,fe=te+Se|0,te=q,q=G,G=se,se=Se+me|0;U=U+se|0,H=H+G|0,Y=Y+q|0,Z=Z+te|0,ne=ne+fe|0,re=re+he|0,X=X+Ee|0,ce=ce+we|0,ae+=64,oe-=64}}_e(F);let ye,ie=F.length%64,W=F.length/536870912|0,O=F.length<<3,z=ie<56?56:120,J=F.slice(F.length-ie,F.length);for(J.push(128),ye=ie+1;ye<z;ye++)J.push(0);return J.push(W>>>24&255),J.push(W>>>16&255),J.push(W>>>8&255),J.push(W>>>0&255),J.push(O>>>24&255),J.push(O>>>16&255),J.push(O>>>8&255),J.push(O>>>0&255),_e(J),[U>>>24&255,U>>>16&255,U>>>8&255,U>>>0&255,H>>>24&255,H>>>16&255,H>>>8&255,H>>>0&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y>>>0&255,Z>>>24&255,Z>>>16&255,Z>>>8&255,Z>>>0&255,ne>>>24&255,ne>>>16&255,ne>>>8&255,ne>>>0&255,re>>>24&255,re>>>16&255,re>>>8&255,re>>>0&255,X>>>24&255,X>>>16&255,X>>>8&255,X>>>0&255,ce>>>24&255,ce>>>16&255,ce>>>8&255,ce>>>0&255]}function S(F,j,U){F=F.length<=64?F:E(F);const H=64+j.length+4,Y=new Array(H),Z=new Array(64);let ne,re=[];for(ne=0;ne<64;ne++)Y[ne]=54;for(ne=0;ne<F.length;ne++)Y[ne]^=F[ne];for(ne=0;ne<j.length;ne++)Y[64+ne]=j[ne];for(ne=H-4;ne<H;ne++)Y[ne]=0;for(ne=0;ne<64;ne++)Z[ne]=92;for(ne=0;ne<F.length;ne++)Z[ne]^=F[ne];function X(){for(let ce=H-1;ce>=H-4;ce--){if(Y[ce]++,Y[ce]<=255)return;Y[ce]=0}}for(;U>=32;)X(),re=re.concat(E(Z.concat(E(Y)))),U-=32;return U>0&&(X(),re=re.concat(E(Z.concat(E(Y))).slice(0,U))),re}function C(F,j,U,H,Y){let Z;for(I(F,(2*U-1)*16,Y,0,16),Z=0;Z<2*U;Z++)A(F,Z*16,Y,16),B(Y,H),I(Y,0,F,j+Z*16,16);for(Z=0;Z<U;Z++)I(F,j+Z*2*16,F,Z*16,16);for(Z=0;Z<U;Z++)I(F,j+(Z*2+1)*16,F,(Z+U)*16,16)}function T(F,j){return F<<j|F>>>32-j}function B(F,j){I(F,0,j,0,16);for(let U=8;U>0;U-=2)j[4]^=T(j[0]+j[12],7),j[8]^=T(j[4]+j[0],9),j[12]^=T(j[8]+j[4],13),j[0]^=T(j[12]+j[8],18),j[9]^=T(j[5]+j[1],7),j[13]^=T(j[9]+j[5],9),j[1]^=T(j[13]+j[9],13),j[5]^=T(j[1]+j[13],18),j[14]^=T(j[10]+j[6],7),j[2]^=T(j[14]+j[10],9),j[6]^=T(j[2]+j[14],13),j[10]^=T(j[6]+j[2],18),j[3]^=T(j[15]+j[11],7),j[7]^=T(j[3]+j[15],9),j[11]^=T(j[7]+j[3],13),j[15]^=T(j[11]+j[7],18),j[1]^=T(j[0]+j[3],7),j[2]^=T(j[1]+j[0],9),j[3]^=T(j[2]+j[1],13),j[0]^=T(j[3]+j[2],18),j[6]^=T(j[5]+j[4],7),j[7]^=T(j[6]+j[5],9),j[4]^=T(j[7]+j[6],13),j[5]^=T(j[4]+j[7],18),j[11]^=T(j[10]+j[9],7),j[8]^=T(j[11]+j[10],9),j[9]^=T(j[8]+j[11],13),j[10]^=T(j[9]+j[8],18),j[12]^=T(j[15]+j[14],7),j[13]^=T(j[12]+j[15],9),j[14]^=T(j[13]+j[12],13),j[15]^=T(j[14]+j[13],18);for(let U=0;U<16;++U)F[U]+=j[U]}function A(F,j,U,H){for(let Y=0;Y<H;Y++)U[Y]^=F[j+Y]}function I(F,j,U,H,Y){for(;Y--;)U[H++]=F[j++]}function D(F){if(!F||typeof F.length!="number")return!1;for(let j=0;j<F.length;j++){const U=F[j];if(typeof U!="number"||U%1||U<0||U>=256)return!1}return!0}function M(F,j){if(typeof F!="number"||F%1)throw new Error("invalid "+j);return F}function V(F,j,U,H,Y,Z,ne){if(U=M(U,"N"),H=M(H,"r"),Y=M(Y,"p"),Z=M(Z,"dkLen"),U===0||U&U-1)throw new Error("N must be power of 2");if(U>2147483647/128/H)throw new Error("N too large");if(H>2147483647/128/Y)throw new Error("r too large");if(!D(F))throw new Error("password must be an array or buffer");if(F=Array.prototype.slice.call(F),!D(j))throw new Error("salt must be an array or buffer");j=Array.prototype.slice.call(j);let re=S(F,j,Y*128*H);const X=new Uint32Array(Y*32*H);for(let fe=0;fe<X.length;fe++){const he=fe*4;X[fe]=(re[he+3]&255)<<24|(re[he+2]&255)<<16|(re[he+1]&255)<<8|(re[he+0]&255)<<0}const ce=new Uint32Array(64*H),ue=new Uint32Array(32*H*U),_e=32*H,ye=new Uint32Array(16),ie=new Uint32Array(16),W=Y*U*2;let O=0,z=null,J=!1,ee=0,ae=0,oe,se;const G=ne?parseInt(1e3/H):4294967295,q=typeof setImmediate<"u"?setImmediate:setTimeout,te=function(){if(J)return ne(new Error("cancelled"),O/W);let fe;switch(ee){case 0:se=ae*32*H,I(X,se,ce,0,_e),ee=1,oe=0;case 1:fe=U-oe,fe>G&&(fe=G);for(let Ee=0;Ee<fe;Ee++)I(ce,0,ue,(oe+Ee)*_e,_e),C(ce,_e,H,ye,ie);if(oe+=fe,O+=fe,ne){const Ee=parseInt(1e3*O/W);if(Ee!==z){if(J=ne(null,O/W),J)break;z=Ee}}if(oe<U)break;oe=0,ee=2;case 2:fe=U-oe,fe>G&&(fe=G);for(let Ee=0;Ee<fe;Ee++){const we=(2*H-1)*16,xe=ce[we]&U-1;A(ue,xe*_e,ce,_e),C(ce,_e,H,ye,ie)}if(oe+=fe,O+=fe,ne){const Ee=parseInt(1e3*O/W);if(Ee!==z){if(J=ne(null,O/W),J)break;z=Ee}}if(oe<U)break;if(I(ce,0,X,se,_e),ae++,ae<Y){ee=0;break}re=[];for(let Ee=0;Ee<X.length;Ee++)re.push(X[Ee]>>0&255),re.push(X[Ee]>>8&255),re.push(X[Ee]>>16&255),re.push(X[Ee]>>24&255);const he=S(F,re,Z);return ne&&ne(null,1,he),he}ne&&q(te)};if(!ne)for(;;){const fe=te();if(fe!=null)return fe}te()}const L={scrypt:function(F,j,U,H,Y,Z,ne){return new Promise(function(re,X){let ce=0;ne&&ne(0),V(F,j,U,H,Y,Z,function(ue,_e,ye){if(ue)X(ue);else if(ye)ne&&ce!==1&&ne(1),re(new Uint8Array(ye));else if(ne&&_e!==ce)return ce=_e,ne(_e)})})},syncScrypt:function(F,j,U,H,Y,Z){return new Uint8Array(V(F,j,U,H,Y,Z))}};t.exports=L})()})(scrypt$1);var scryptExports=scrypt$1.exports;const scrypt=getDefaultExportFromCjs(scryptExports);var __awaiter$1=globalThis&&globalThis.__awaiter||function(t,n,_,x){function E(S){return S instanceof _?S:new _(function(C){C(S)})}return new(_||(_=Promise))(function(S,C){function T(I){try{A(x.next(I))}catch(D){C(D)}}function B(I){try{A(x.throw(I))}catch(D){C(D)}}function A(I){I.done?S(I.value):E(I.value).then(T,B)}A((x=x.apply(t,n||[])).next())})};const logger$4=new Logger(version$1);function hasMnemonic$1(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class KeystoreAccount extends Description{isKeystoreAccount(n){return!!(n&&n._isKeystoreAccount)}}function _decrypt(t,n,_){if(searchPath(t,"crypto/cipher")==="aes-128-ctr"){const E=looseArrayify(searchPath(t,"crypto/cipherparams/iv")),S=new aes.Counter(E),C=new aes.ModeOfOperation.ctr(n,S);return arrayify(C.decrypt(_))}return null}function _getAccount(t,n){const _=looseArrayify(searchPath(t,"crypto/ciphertext"));if(hexlify(keccak256(concat([n.slice(16,32),_]))).substring(2)!==searchPath(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const E=_decrypt(t,n.slice(0,16),_);E||logger$4.throwError("unsupported cipher",Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const S=n.slice(32,64),C=computeAddress(E);if(t.address){let B=t.address.toLowerCase();if(B.substring(0,2)!=="0x"&&(B="0x"+B),getAddress(B)!==C)throw new Error("address mismatch")}const T={_isKeystoreAccount:!0,address:C,privateKey:hexlify(E)};if(searchPath(t,"x-ethers/version")==="0.1"){const B=looseArrayify(searchPath(t,"x-ethers/mnemonicCiphertext")),A=looseArrayify(searchPath(t,"x-ethers/mnemonicCounter")),I=new aes.Counter(A),D=new aes.ModeOfOperation.ctr(S,I),M=searchPath(t,"x-ethers/path")||defaultPath,V=searchPath(t,"x-ethers/locale")||"en",L=arrayify(D.decrypt(B));try{const F=entropyToMnemonic(L,V),j=HDNode.fromMnemonic(F,null,V).derivePath(M);if(j.privateKey!=T.privateKey)throw new Error("mnemonic mismatch");T.mnemonic=j.mnemonic}catch(F){if(F.code!==Logger.errors.INVALID_ARGUMENT||F.argument!=="wordlist")throw F}}return new KeystoreAccount(T)}function pbkdf2Sync(t,n,_,x,E){return arrayify(pbkdf2$1(t,n,_,x,E))}function pbkdf2(t,n,_,x,E){return Promise.resolve(pbkdf2Sync(t,n,_,x,E))}function _computeKdfKey(t,n,_,x,E){const S=getPassword(n),C=searchPath(t,"crypto/kdf");if(C&&typeof C=="string"){const T=function(B,A){return logger$4.throwArgumentError("invalid key-derivation function parameters",B,A)};if(C.toLowerCase()==="scrypt"){const B=looseArrayify(searchPath(t,"crypto/kdfparams/salt")),A=parseInt(searchPath(t,"crypto/kdfparams/n")),I=parseInt(searchPath(t,"crypto/kdfparams/r")),D=parseInt(searchPath(t,"crypto/kdfparams/p"));(!A||!I||!D)&&T("kdf",C),A&A-1&&T("N",A);const M=parseInt(searchPath(t,"crypto/kdfparams/dklen"));return M!==32&&T("dklen",M),x(S,B,A,I,D,64,E)}else if(C.toLowerCase()==="pbkdf2"){const B=looseArrayify(searchPath(t,"crypto/kdfparams/salt"));let A=null;const I=searchPath(t,"crypto/kdfparams/prf");I==="hmac-sha256"?A="sha256":I==="hmac-sha512"?A="sha512":T("prf",I);const D=parseInt(searchPath(t,"crypto/kdfparams/c")),M=parseInt(searchPath(t,"crypto/kdfparams/dklen"));return M!==32&&T("dklen",M),_(S,B,D,M,A)}}return logger$4.throwArgumentError("unsupported key-derivation function","kdf",C)}function decryptSync(t,n){const _=JSON.parse(t),x=_computeKdfKey(_,n,pbkdf2Sync,scrypt.syncScrypt);return _getAccount(_,x)}function decrypt$1(t,n,_){return __awaiter$1(this,void 0,void 0,function*(){const x=JSON.parse(t),E=yield _computeKdfKey(x,n,pbkdf2,scrypt.scrypt,_);return _getAccount(x,E)})}function encrypt$1(t,n,_,x){try{if(getAddress(t.address)!==computeAddress(t.privateKey))throw new Error("address/privateKey mismatch");if(hasMnemonic$1(t)){const j=t.mnemonic;if(HDNode.fromMnemonic(j.phrase,null,j.locale).derivePath(j.path||defaultPath).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(j){return Promise.reject(j)}typeof _=="function"&&!x&&(x=_,_={}),_||(_={});const E=arrayify(t.privateKey),S=getPassword(n);let C=null,T=null,B=null;if(hasMnemonic$1(t)){const j=t.mnemonic;C=arrayify(mnemonicToEntropy(j.phrase,j.locale||"en")),T=j.path||defaultPath,B=j.locale||"en"}let A=_.client;A||(A="ethers.js");let I=null;_.salt?I=arrayify(_.salt):I=randomBytes(32);let D=null;if(_.iv){if(D=arrayify(_.iv),D.length!==16)throw new Error("invalid iv")}else D=randomBytes(16);let M=null;if(_.uuid){if(M=arrayify(_.uuid),M.length!==16)throw new Error("invalid uuid")}else M=randomBytes(16);let V=1<<17,L=8,F=1;return _.scrypt&&(_.scrypt.N&&(V=_.scrypt.N),_.scrypt.r&&(L=_.scrypt.r),_.scrypt.p&&(F=_.scrypt.p)),scrypt.scrypt(S,I,V,L,F,64,x).then(j=>{j=arrayify(j);const U=j.slice(0,16),H=j.slice(16,32),Y=j.slice(32,64),Z=new aes.Counter(D),ne=new aes.ModeOfOperation.ctr(U,Z),re=arrayify(ne.encrypt(E)),X=keccak256(concat([H,re])),ce={address:t.address.substring(2).toLowerCase(),id:uuidV4(M),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify(D).substring(2)},ciphertext:hexlify(re).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify(I).substring(2),n:V,dklen:32,p:F,r:L},mac:X.substring(2)}};if(C){const ue=randomBytes(16),_e=new aes.Counter(ue),ye=new aes.ModeOfOperation.ctr(Y,_e),ie=arrayify(ye.encrypt(C)),W=new Date,O=W.getUTCFullYear()+"-"+zpad(W.getUTCMonth()+1,2)+"-"+zpad(W.getUTCDate(),2)+"T"+zpad(W.getUTCHours(),2)+"-"+zpad(W.getUTCMinutes(),2)+"-"+zpad(W.getUTCSeconds(),2)+".0Z";ce["x-ethers"]={client:A,gethFilename:"UTC--"+O+"--"+ce.address,mnemonicCounter:hexlify(ue).substring(2),mnemonicCiphertext:hexlify(ie).substring(2),path:T,locale:B,version:"0.1"}}return JSON.stringify(ce)})}function decryptJsonWallet(t,n,_){if(isCrowdsaleWallet(t)){_&&_(0);const x=decrypt$2(t,n);return _&&_(1),Promise.resolve(x)}return isKeystoreWallet(t)?decrypt$1(t,n,_):Promise.reject(new Error("invalid JSON wallet"))}function decryptJsonWalletSync(t,n){if(isCrowdsaleWallet(t))return decrypt$2(t,n);if(isKeystoreWallet(t))return decryptSync(t,n);throw new Error("invalid JSON wallet")}const version="wallet/5.7.0";var __awaiter=globalThis&&globalThis.__awaiter||function(t,n,_,x){function E(S){return S instanceof _?S:new _(function(C){C(S)})}return new(_||(_=Promise))(function(S,C){function T(I){try{A(x.next(I))}catch(D){C(D)}}function B(I){try{A(x.throw(I))}catch(D){C(D)}}function A(I){I.done?S(I.value):E(I.value).then(T,B)}A((x=x.apply(t,n||[])).next())})};const logger$3=new Logger(version);function isAccount(t){return t!=null&&isHexString(t.privateKey,32)&&t.address!=null}function hasMnemonic(t){const n=t.mnemonic;return n&&n.phrase}class Wallet extends Signer{constructor(n,_){if(super(),isAccount(n)){const x=new SigningKey(n.privateKey);if(defineReadOnly(this,"_signingKey",()=>x),defineReadOnly(this,"address",computeAddress(this.publicKey)),this.address!==getAddress(n.address)&&logger$3.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),hasMnemonic(n)){const E=n.mnemonic;defineReadOnly(this,"_mnemonic",()=>({phrase:E.phrase,path:E.path||defaultPath,locale:E.locale||"en"}));const S=this.mnemonic,C=HDNode.fromMnemonic(S.phrase,null,S.locale).derivePath(S.path);computeAddress(C.privateKey)!==this.address&&logger$3.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else defineReadOnly(this,"_mnemonic",()=>null)}else{if(SigningKey.isSigningKey(n))n.curve!=="secp256k1"&&logger$3.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),defineReadOnly(this,"_signingKey",()=>n);else{typeof n=="string"&&n.match(/^[0-9a-f]*$/i)&&n.length===64&&(n="0x"+n);const x=new SigningKey(n);defineReadOnly(this,"_signingKey",()=>x)}defineReadOnly(this,"_mnemonic",()=>null),defineReadOnly(this,"address",computeAddress(this.publicKey))}_&&!Provider.isProvider(_)&&logger$3.throwArgumentError("invalid provider","provider",_),defineReadOnly(this,"provider",_||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(n){return new Wallet(this,n)}signTransaction(n){return resolveProperties(n).then(_=>{_.from!=null&&(getAddress(_.from)!==this.address&&logger$3.throwArgumentError("transaction from address mismatch","transaction.from",n.from),delete _.from);const x=this._signingKey().signDigest(keccak256(serialize(_)));return serialize(_,x)})}signMessage(n){return __awaiter(this,void 0,void 0,function*(){return joinSignature(this._signingKey().signDigest(hashMessage(n)))})}_signTypedData(n,_,x){return __awaiter(this,void 0,void 0,function*(){const E=yield TypedDataEncoder.resolveNames(n,_,x,S=>(this.provider==null&&logger$3.throwError("cannot resolve ENS names without a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:S}),this.provider.resolveName(S)));return joinSignature(this._signingKey().signDigest(TypedDataEncoder.hash(E.domain,_,E.value)))})}encrypt(n,_,x){if(typeof _=="function"&&!x&&(x=_,_={}),x&&typeof x!="function")throw new Error("invalid callback");return _||(_={}),encrypt$1(this,n,_,x)}static createRandom(n){let _=randomBytes(16);n||(n={}),n.extraEntropy&&(_=arrayify(hexDataSlice(keccak256(concat([_,n.extraEntropy])),0,16)));const x=entropyToMnemonic(_,n.locale);return Wallet.fromMnemonic(x,n.path,n.locale)}static fromEncryptedJson(n,_,x){return decryptJsonWallet(n,_,x).then(E=>new Wallet(E))}static fromEncryptedJsonSync(n,_){return new Wallet(decryptJsonWalletSync(n,_))}static fromMnemonic(n,_,x){return _||(_=defaultPath),new Wallet(HDNode.fromMnemonic(n,null,x).derivePath(_))}}function verifyMessage(t,n){return recoverAddress(hashMessage(t),n)}function getEIP191Verifier(){return{eip191:async(t,n)=>{verifyEIP191Signature(t,n)}}}const LEGACY_CHAIN_ID_REORG_DATE=new Date("2022-09-20").valueOf();function verifyEIP191Signature(t,n){assertSigned(t),verifyTimeChecks(t,n);const x=[verifyMessage(SiweMessage.fromCacao(t).toMessage(),t.s.s).toLowerCase()];if(Date.parse(t.p.iat)<=LEGACY_CHAIN_ID_REORG_DATE){const S=verifyMessage(asLegacyChainIdString(SiweMessage.fromCacao(t),"Ethereum"),t.s.s).toLowerCase();x.push(S)}const E=AccountId.parse(t.p.iss.replace("did:pkh:","")).address.toLowerCase();if(!x.includes(E))throw new Error("Signature does not belong to issuer")}function asUint8Array(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function createCodec$1(t,n,_,x){return{name:t,prefix:n,encoder:{name:t,prefix:n,encode:_},decoder:{decode:x}}}const string=createCodec$1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii=createCodec$1("ascii","a",t=>{let n="a";for(let _=0;_<t.length;_++)n+=String.fromCharCode(t[_]);return n},t=>{t=t.substring(1);const n=allocUnsafe(t.length);for(let _=0;_<t.length;_++)n[_]=t.charCodeAt(_);return n}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function toString$3(t,n="utf8"){const _=BASES[n];if(!_)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):_.encoder.encode(t).substring(1)}function fromString(t,n="utf8"){const _=BASES[n];if(!_)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(t,"utf-8")):_.decoder.decode(`${_.prefix}${t}`)}function randomString(){return toString$3(random.randomBytes(16),"base64")}const B64="base64pad",B64_URL="base64url";function encodeBase64(t){return toString$3(t,B64)}function encodeBase64Url(t){return toString$3(t,B64_URL)}function decodeBase64(t){return fromString(t,B64)}function base64urlToJSON(t){return JSON.parse(toString$3(fromString(t,B64_URL)))}function fromDagJWS(t){if(t.signatures.length>1)throw new Error("Cant convert to compact jws");return`${t.signatures[0].protected}.${t.payload}.${t.signatures[0].signature}`}function didWithTime(t,n){if(n){const _=n.toISOString().split(".")[0]+"Z";return`${t}?versionTime=${_}`}else return t}function extractControllers(t){return t?Array.isArray(t)?t:[t]:[]}const verifiers={...getEIP191Verifier()};function isResolver(t){return"registry"in t&&"cache"in t}class DID{get capability(){if(!this._capability)throw new Error("DID has no capability attached");return this._capability}get hasCapability(){return this._capability!=null}get parent(){if(!this._parentId)throw new Error("DID has no parent DID");return this._parentId}get hasParent(){return this._parentId!=null}get id(){if(this._id==null)throw new Error("DID is not authenticated");return this._id}get authenticated(){return this._id!=null}withCapability(n){return new DID({provider:this._client?.connection,resolver:this._resolver,capability:n,parent:this._parentId})}setProvider(n){if(this._client==null)this._client=new RPCClient(n);else if(this._client.connection!==n)throw new Error("A different provider is already set, create a new DID instance to use another provider")}setResolver(n,_){this._resolver=isResolver(n)?n:new Resolver(n,_)}async authenticate({provider:n,paths:_=[],aud:x}={}){if(n!=null&&this.setProvider(n),this._client==null)throw new Error("No provider available");const E=randomString(),S=await this._client.request("did_authenticate",{nonce:E,aud:x,paths:_}),{kid:C}=await this.verifyJWS(S),T=base64urlToJSON(S.payload);if(!C.includes(T.did))throw new Error("Invalid authencation response, kid mismatch");if(T.nonce!==E)throw new Error("Invalid authencation response, wrong nonce");if(T.aud!==x)throw new Error("Invalid authencation response, wrong aud");if(T.exp<Date.now()/1e3)throw new Error("Invalid authencation response, expired");return this._id=T.did,this._id}async createJWS(n,_={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");if(this._capability){const E=this._capability.p.exp;if(E&&Date.parse(E)<Date.now())throw new Error("Capability is expired, cannot create a valid signature");const S=await CacaoBlock.fromCacao(this._capability),C=CID$3.asCID(S.cid);if(!C)throw new Error("Capability CID of the JWS cannot be set to the capability payload cid as they are incompatible");_.protected=_.protected||{},_.protected.cap=`ipfs://${C?.toString()}`}const{jws:x}=await this._client.request("did_createJWS",{did:this._id,..._,payload:n});return x}async createDagJWS(n,_={}){const{cid:x,linkedBlock:E}=await encodePayload(n),S=encodeBase64Url(x.bytes);Object.assign(_,{linkedBlock:encodeBase64(E)});const C=await this.createJWS(S,_),T=CID$3.asCID(x);if(!T)throw new Error("CID of the JWS cannot be set to the encoded payload cid as they are incompatible");if(C.link=T,this._capability){const B=await CacaoBlock.fromCacao(this._capability);return{jws:C,linkedBlock:E,cacaoBlock:B.bytes}}return{jws:C,linkedBlock:E}}async verifyJWS(n,_={}){_=Object.assign({verifiers},_),typeof n!="string"&&(n=fromDagJWS(n));const x=base64urlToJSON(n.split(".")[0]).kid;if(!x)throw new Error('No "kid" found in jws');const E=await this.resolve(x);if(!_.disableTimecheck){const A=E.didDocumentMetadata?.nextUpdate;if(A){const D=_.revocationPhaseOutSecs?_.revocationPhaseOutSecs*1e3:0,M=new Date(A).valueOf()+D;if(!(_.atTime&&_.atTime.getTime()<M))throw new Error(`invalid_jws: signature authored with a revoked DID version: ${x}`)}const I=E.didDocumentMetadata?.updated;if(I&&_.atTime&&_.atTime.getTime()<new Date(I).valueOf())throw new Error(`invalid_jws: signature authored before creation of DID version: ${x}`)}const C=E.didDocument?.id;if(_.issuer&&_.issuer===_.capability?.p.iss&&C===_.capability.p.aud){if(!_.verifiers)throw new Error("Registered verifiers needed for CACAO");await Cacao.verify(_.capability,{disableExpirationCheck:_.disableTimecheck,atTime:_.atTime?_.atTime:void 0,revocationPhaseOutSecs:_.revocationPhaseOutSecs,verifiers:_.verifiers??{}})}else if(_.issuer&&_.issuer!==C){const A=didWithTime(_.issuer,_.atTime),D=(await this.resolve(A)).didDocument?.controller,M=extractControllers(D);if(_.capability?.s&&_.capability.p.aud===C&&M.includes(_.capability.p.iss))await Cacao.verify(_.capability,{atTime:_.atTime?_.atTime:void 0,revocationPhaseOutSecs:_.revocationPhaseOutSecs,verifiers:_.verifiers??{}});else if(!(C?M.includes(C):!1))throw new Error(`invalid_jws: not a valid verificationMethod for issuer: ${x}`)}const T=E.didDocument?.verificationMethod||[];verifyJWS(n,T);let B;try{B=base64urlToJSON(n.split(".")[1])}catch{}return{kid:x,payload:B,didResolutionResult:E}}async createJWE(n,_,x={}){const E=await resolveX25519Encrypters(_,this._resolver);return createJWE(n,E,x.protectedHeader,x.aad)}async createDagJWE(n,_,x={}){const E=await prepareCleartext(n);return this.createJWE(E,_,x)}async decryptJWE(n,_={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");const{cleartext:x}=await this._client.request("did_decryptJWE",{did:this._id,..._,jwe:n});return decodeBase64(x)}async decryptDagJWE(n){const _=await this.decryptJWE(n);return decodeCleartext(_)}async resolve(n){const _=await this._resolver.resolve(n);if(_.didResolutionMetadata.error){const{error:x,message:E}=_.didResolutionMetadata,S=E?`, ${E}`:"";throw new Error(`Failed to resolve ${n}: ${x}${S}`)}return _}constructor({provider:n,resolver:_={},resolverOptions:x,capability:E,parent:S}={}){if(n!=null&&(this._client=new RPCClient(n)),E){if(this._capability=E,this._parentId=this._capability.p.iss,S&&this._parentId!==S)throw new Error("Capability issuer and parent not equal")}else S&&(this._parentId=S);this.setResolver(_,x)}}const TYPE="DID";class DIDIdentityProvider extends IdentityProvider{constructor({didProvider:n}){super(),this.did=new DID({resolver:DIDIdentityProvider.did._resolver,provider:n})}static get type(){return TYPE}async getId({space:n}){return this.did.authenticated||await this.did.authenticate(),this.did.id}async signIdentity(n,{space:_}){this.did.authenticated||await this.did.authenticate();const x=toString$6(fromString$3(n,"base16"),"base64url"),E=await this.did.createJWS(x);return`${E.signatures[0].protected}..${E.signatures[0].signature}`}static setDIDResolver(n){this.did?this.did.setResolver(n):this.did=new DID({resolver:n})}static async verifyIdentity(n){if(!this.did)throw new Error("The DID resolver must first be set with setDIDResolver()");const _=n.publicKey+n.signatures.id;try{const x=toString$6(fromString$3(_,"base16"),"base64url"),[E,S]=n.signatures.publicKey.split(".."),C=[E,x,S].join(".");await this.did.verifyJWS(C)}catch{return!1}return!0}}const type$3="ethereum";class EthIdentityProvider extends IdentityProvider{constructor(n={}){super(),this.wallet=n.wallet}static get type(){return type$3}async getId(n={}){return this.wallet||(this.wallet=await this._createWallet(n)),this.wallet.getAddress()}async signIdentity(n,_={}){const x=this.wallet;if(!x)throw new Error("wallet is required");return x.signMessage(n)}static async verifyIdentity(n){return verifyMessage(n.publicKey+n.signatures.id,n.signatures.publicKey)===n.id}async _createWallet(n={}){if(n.mnemonicOpts){if(!n.mnemonicOpts.mnemonic)throw new Error("mnemonic is required");return Wallet.fromMnemonic(n.mnemonicOpts.mnemonic,n.mnemonicOpts.path,n.mnemonicOpts.wordlist)}if(n.encryptedJsonOpts){if(!n.encryptedJsonOpts.json)throw new Error("encrypted json is required");if(!n.encryptedJsonOpts.password)throw new Error("password for encrypted json is required");return Wallet.fromEncryptedJson(n.encryptedJsonOpts.json,n.encryptedJsonOpts.password,n.encryptedJsonOpts.progressCallback)}return Wallet.createRandom()}}const defaultType="orbitdb",identityKeysPath=path.join("./orbitdb","identity","identitykeys"),supportedTypes={orbitdb:OrbitDBIdentityProvider,[DIDIdentityProvider.type]:DIDIdentityProvider,[EthIdentityProvider.type]:EthIdentityProvider},getHandlerFor=t=>{if(!Identities.isSupported(t))throw new Error(`IdentityProvider type '${t}' is not supported`);return supportedTypes[t]};class Identities{constructor(n){this._keystore=n.keystore,this._signingKeystore=n.signingKeystore||this._keystore,this._knownIdentities=n.cache||new LRU$1(n.cacheSize||100)}static get IdentityProvider(){return IdentityProvider}get keystore(){return this._keystore}get signingKeystore(){return this._signingKeystore}async sign(n,_){const x=await this.keystore.getKey(n.id);if(!x)throw new Error("Private signing key not found from Keystore");return await this.keystore.sign(x,_)}async verify(n,_,x,E="v1"){return this.keystore.verify(n,_,x,E)}async createIdentity(n={}){const _=n.keystore||this.keystore,x=n.type||defaultType,E=x===defaultType?new OrbitDBIdentityProvider(n.signingKeystore||_):new(getHandlerFor(x))(n),S=await E.getId(n);n.migrate&&await n.migrate({targetStore:_._store,targetId:S});const{publicKey:C,idSignature:T}=await this.signId(S),B=await E.signIdentity(C+T,n);return new Identity(S,C,T,B,x,this)}async signId(n){const _=this.keystore,x=await _.getKey(n)||await _.createKey(n),E=_.getPublic(x),S=await _.sign(x,n);return{publicKey:E,idSignature:S}}async verifyIdentity(n){if(!Identity.isIdentity(n))return!1;const _=this._knownIdentities.get(n.signatures.id);if(_)return n.id===_.id&&n.publicKey===_.publicKey&&n.signatures.id===_.signatures.id&&n.signatures.publicKey===_.signatures.publicKey;if(!await this.keystore.verify(n.signatures.id,n.publicKey,n.id))return!1;const S=await getHandlerFor(n.type).verifyIdentity(n);return S&&this._knownIdentities.set(n.signatures.id,Identity.toJSON(n)),S}static async verifyIdentity(n){return!Identity.isIdentity(n)||!await Keystore.verify(n.signatures.id,n.publicKey,n.id)?!1:getHandlerFor(n.type).verifyIdentity(n)}static async createIdentity(n={}){return n.keystore||(n.keystore=new Keystore(n.identityKeysPath||identityKeysPath)),n.signingKeystore||(n.signingKeysPath?n.signingKeystore=new Keystore(n.signingKeysPath):n.signingKeystore=n.keystore),await n.keystore.open(),await n.signingKeystore.open(),n=Object.assign({},{type:defaultType},n),new Identities(n).createIdentity(n)}static isSupported(n){return Object.keys(supportedTypes).includes(n)}static addIdentityProvider(n){if(!n)throw new Error("IdentityProvider class needs to be given as an option");if(!n.type||typeof n.type!="string")throw new Error("Given IdentityProvider class needs to implement: static get type() { /* return a string */ }.");supportedTypes[n.type]=n}static removeIdentityProvider(n){delete supportedTypes[n]}}const notEmpty=t=>t!==""&&t!==" ";class OrbitDBAddress{constructor(n,_){this.root=n,this.path=_}toString(){return OrbitDBAddress.join(this.root,this.path)}static isValid(n){n=n.toString().replace(/\\/g,"/");const _=(C,T)=>!((T===0||T===1)&&n.toString().indexOf("/orbit")===0&&C==="orbitdb"),x=n.toString().split("/").filter(_).filter(notEmpty);let E;const S=C=>{const T=["zd","Qm","ba","k5"];for(const B of T)if(C.indexOf(B)>-1)return!0;return!1};try{E=S(x[0])?CID$3.parse(x[0]).toString():null}catch{return!1}return E!==null}static parse(n){if(!n)throw new Error(`Not a valid OrbitDB address: ${n}`);if(!OrbitDBAddress.isValid(n))throw new Error(`Not a valid OrbitDB address: ${n}`);n=n.toString().replace(/\\/g,"/");const _=n.toString().split("/").filter((x,E)=>!((E===0||E===1)&&n.toString().indexOf("/orbit")===0&&x==="orbitdb")).filter(x=>x!==""&&x!==" ");return new OrbitDBAddress(_[0],_.slice(1,_.length).join("/"))}static join(...n){return(path.posix||path).join("/orbitdb",...n)}}const createDBManifest=async(t,n,_,x,E)=>{const S=Object.assign({name:n,type:_,accessController:(path.posix||path).join("/ipfs",x)},E.meta!==void 0?{meta:E.meta}:{});return write$3(t,E.format||"dag-cbor",S,E)},PROTOCOL="ipfs-pubsub-direct-channel/v1",encode$5=t=>{let n=t;return safeBufferExports.Buffer.isBuffer(n)||(n=safeBufferExports.Buffer.from(n)),n},waitForPeers=async(t,n,_,x)=>{const E=async()=>{const S=await t.pubsub.peers(_),C=n.map(A=>String(A)),T=S.map(A=>String(A));return C.map(A=>T.includes(A)).filter(A=>A===!1).length===0};return await E()?Promise.resolve():new Promise((S,C)=>{const T=setInterval(async()=>{try{x()?clearInterval(T):await E()&&(clearInterval(T),S())}catch(B){C(B)}},100)})},getPeerID=async t=>(await t.id()).id;class DirectChannel extends EventEmitter$5{constructor(n,_){if(super(),this._ipfs=n,!n.pubsub)throw new Error("This IPFS node does not support pubsub.");if(this._closed=!1,this._isClosed=()=>this._closed,this._receiverID=_,!this._receiverID)throw new Error("Receiver ID was undefined")}get id(){return this._id}get peers(){return this._peers}async connect(){await waitForPeers(this._ipfs,[this._receiverID],this._id,this._isClosed)}async send(n){if(this._closed)return;const _=encode$5(n);await this._ipfs.pubsub.publish(this._id,_)}close(){this._closed=!0,this.removeAllListeners("message"),this._ipfs.pubsub.unsubscribe(this._id,this._messageHandler)}async _setup(){this._senderID=await getPeerID(this._ipfs),this._peers=Array.from([this._senderID,this._receiverID]).sort(),this._id="/"+PROTOCOL+"/"+this._peers.join("/"),this._messageHandler=n=>{n&&String(n.from)===String(this._receiverID)&&this.emit("message",n)}}async _openChannel(){this._closed=!1,await this._setup(),await this._ipfs.pubsub.subscribe(this._id,this._messageHandler)}static async open(n,_){const x=new DirectChannel(n,_);return await x._openChannel(),x}}const logger$2=Logger$2.create("exchange-heads",{color:Logger$2.Colors.Yellow});Logger$2.setLogLevel("ERROR");const getHeadsForDatabase=async t=>{if(!(t&&t._cache))return[];const n=await t._cache.get(t.localHeadsPath)||[],_=await t._cache.get(t.remoteHeadsPath)||[];return[...n,..._]},exchangeHeads=async(t,n,_,x,E,S,C)=>{const T=I=>{const D=JSON.parse(Buffer$5.from(I.data).toString()),{address:M,heads:V}=D;S(M,V)};let B=E(_);if(!B)try{logger$2.debug(`Create a channel to ${_}`),B=await DirectChannel.open(t,_),B.on("message",T),logger$2.debug(`Channel created to ${_}`),C(B)}catch(I){logger$2.error(I)}await B.connect(),logger$2.debug(`Connected to ${_}`);const A=await getHeadsForDatabase(x(n));return logger$2.debug(`Send latest heads of '${n}':
`,JSON.stringify(A.map(I=>I.hash),null,2)),A&&await B.send(JSON.stringify({address:n,heads:A})),B},isDefined=t=>t!=null;class Storage{constructor(n,_={}){const x={createIfMissing:!0,errorIfExists:!1,compression:!0,cacheSize:8388608};this.storage=n,this.preCreate=_.preCreate?_.preCreate:()=>{};const E=Object.assign({},_,x);delete E.preCreate,this.options={down:E}}async createStore(n="./orbitdb",_={}){this.options.up=_,await this.preCreate(n,this.options),this.storage;const x=new Level(n,_);return await x.open(),x}async destroy(n){!this.storage||!this.storage.destroy||await this.storage.destory(n._db.location)}async preCreate(n,_){}}const Storage$1=(t,n)=>new Storage(t,n),fs=!isElectronMain&&(typeof window=="object"||typeof self=="object")?null:fs_,logger$1=Logger$2.create("orbit-db");Logger$2.setLogLevel("ERROR");async function migrate(t,n,_){let x=n.cache||(t.caches[n.directory]?t.caches[n.directory].cache:null),E;if(!x){const B=(path.posix||path).join(t.directory,_.root,_.path);if(fs&&fs.existsSync&&!fs.existsSync(B))return;E=await t.storage.createStore(B),x=new Cache(E)}if(!await x.get("_localHeads"))return;const C=_.toString();logger$1.debug("Attempting to migrate from old cache location");const T=["_remoteHeads","_localHeads","snapshot","queue"];for(const B in T)try{const A=path.join(C,T[B]),I=await x.get(T[B]);I&&await n.cache.set(A,I)}catch(A){logger$1.debug(A.message)}await n.cache.set(path.join(C,"_manifest"),_.root),E&&await E.close()}const migrations=[migrate],run=async(t,n,_)=>{for(let x=0;x<migrations.length;x++)await migrations[x](t,n,_)},logger=Logger$2.create("orbit-db");Logger$2.setLogLevel("ERROR");const databaseTypes={counter:CounterStore,eventlog:EventStore,feed:FeedStore,docstore:DocumentStore,keyvalue:KeyValueStore},defaultTimeout=3e4;let AccessControllers=AccessControllers$1;class OrbitDB{constructor(n,_,x={}){if(!isDefined(n))throw new Error("IPFS is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");if(!isDefined(_))throw new Error("identity is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");this._ipfs=n,this.identity=_,this.id=x.peerId,this._pubsub=x.offline?null:new(x.broker?x.broker:IPFSPubsub)(this._ipfs,this.id),this.directory=x.directory||"./orbitdb",this.storage=x.storage,this._directConnections={},this.caches={},this.caches[this.directory]={cache:x.cache,handlers:new Set},this.keystore=x.keystore,this.stores={},AccessControllers=x.AccessControllers||AccessControllers}static get Pubsub(){return IPFSPubsub}static get Cache(){return Cache}static get Keystore(){return Keystore}static get Identities(){return Identities}static get AccessControllers(){return AccessControllers}static get Storage(){return Storage$1}static get OrbitDBAddress(){return OrbitDBAddress}static get Store(){return Store}static get EventStore(){return EventStore}static get FeedStore(){return FeedStore}static get KeyValueStore(){return KeyValueStore}static get CounterStore(){return CounterStore}static get DocumentStore(){return DocumentStore}get cache(){return this.caches[this.directory].cache}static async createInstance(n,_={}){if(!isDefined(n))throw new Error("IPFS is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");if(_.offline===void 0&&(_.offline=!1),_.offline&&!_.id)throw new Error("Offline mode requires passing an `id` in the options");const{id:x}=_.id||_.offline?{id:_.id}:await n.id();if(_.directory||(_.directory="./orbitdb"),!_.storage){const S={};_.storage=Storage$1(null,S)}if(_.identity&&_.identity.provider.keystore&&(_.keystore=_.identity.provider.keystore),!_.keystore){const S=path.join(_.directory,typeof x!="object"?x:x.toString(),"/keystore"),C=await _.storage.createStore(S);_.keystore=new Keystore(C)}if(_.identity||(_.identity=await Identities.createIdentity({id:x,keystore:_.keystore})),!_.cache){const S=path.join(_.directory,typeof x!="object"?x:x.toString(),"/cache"),C=await _.storage.createStore(S);_.cache=new Cache(C)}const E=Object.assign({},_,{peerId:typeof x!="object"?x:x.toString()});return new OrbitDB(n,_.identity,E)}async feed(n,_={}){return _=Object.assign({create:!0,type:"feed"},_),this.open(n,_)}async log(n,_={}){return _=Object.assign({create:!0,type:"eventlog"},_),this.open(n,_)}async eventlog(n,_={}){return this.log(n,_)}async keyvalue(n,_={}){return _=Object.assign({create:!0,type:"keyvalue"},_),this.open(n,_)}async kvstore(n,_={}){return this.keyvalue(n,_)}async counter(n,_={}){return _=Object.assign({create:!0,type:"counter"},_),this.open(n,_)}async docs(n,_={}){return _=Object.assign({create:!0,type:"docstore"},_),this.open(n,_)}async docstore(n,_={}){return this.docs(n,_)}async disconnect(){for(const x of Object.values(this._directConnections))x.close();this._directConnections={},this._pubsub&&await this._pubsub.disconnect(),await this.keystore.close();const n=Object.values(this.stores);for(const x of n)await x.close();this.stores={};const _=Object.values(this.caches);for(const x of _)await x.cache.close();this.caches={},this.stores={}}async stop(){await this.disconnect()}async _createCache(n){const _=await this.storage.createStore(n);return new Cache(_)}async _createStore(n,_,x){const E=databaseTypes[n];if(!E)throw new Error(`Invalid database type '${n}'`);let S;x.accessControllerAddress&&(S=await AccessControllers.resolve(this,x.accessControllerAddress,x.accessController));const C=Object.assign({replicate:!0},x,{accessController:S,cache:x.cache,onClose:this._onClose.bind(this),onDrop:this._onDrop.bind(this),onLoad:this._onLoad.bind(this)}),T=x.identity||this.identity,B=new E(this._ipfs,T,_,C);B.events.on("write",this._onWrite.bind(this));const A=_.toString();return this.stores[A]=B,C.replicate&&this._pubsub&&await this._pubsub.subscribe(A,this._onMessage.bind(this),this._onPeerConnected.bind(this)),B}_onWrite(n,_,x){if(!x)throw new Error("'heads' not defined");this._pubsub&&this._pubsub.publish(n,x)}async _onMessage(n,_,x){const E=this.stores[n];try{logger.debug(`Received ${_.length} heads for '${n}':
`,JSON.stringify(_.map(S=>S.hash),null,2)),E&&_&&(_.length>0&&await E.sync(_),E.events.emit("peer.exchanged",x,n,_))}catch(S){logger.error(S)}}async _onPeerConnected(n,_){logger.debug(`New peer '${_}' connected to '${n}'`);const x=T=>this.stores[T],E=T=>this._directConnections[T],S=T=>{this._directConnections[T._receiverID]=T},C=(T,B)=>this._onMessage(T,B,_);await exchangeHeads(this._ipfs,n,_,x,E,C,S),x(n)&&x(n).events.emit("peer",_)}async _onClose(n){const _=n.address.toString();logger.debug(`Close ${_}`),this._pubsub&&await this._pubsub.unsubscribe(_);const x=n&&n.options.directory?n.options.directory:this.directory,E=this.caches[x];E&&E.handlers.has(_)&&(E.handlers.delete(_),E.handlers.size||await E.cache.close()),delete this.stores[_]}async _onDrop(n){const _=n.address.toString(),x=n&&n.options.directory?n.options.directory:this.directory;await this._requestCache(_,x,n._cache)}async _onLoad(n){const _=n.address.toString(),x=n&&n.options.directory?n.options.directory:this.directory;await this._requestCache(_,x,n._cache),this.stores[_]=n}async _determineAddress(n,_,x={}){if(!OrbitDB.isValidType(_))throw new Error(`Invalid database type '${_}'`);if(OrbitDBAddress.isValid(n))throw new Error("Given database name is an address. Please give only the name of the database!");x.accessController=Object.assign({},{name:n,type:"ipfs"},x.accessController);const E=await AccessControllers.create(this,x.accessController.type,x.accessController||{}),S=await createDBManifest(this._ipfs,n,_,E,x);return OrbitDBAddress.parse(OrbitDBAddress.join(S,n))}async create(n,_,x={}){logger.debug("create()"),logger.debug(`Creating database '${n}' as ${_}`);const E=await this._determineAddress(n,_,x);if(x.cache=await this._requestCache(E.toString(),x.directory),await this._haveLocalData(x.cache,E)&&!x.overwrite)throw new Error(`Database '${E}' already exists!`);return await this._migrate({...x,directory:this.directory},E),await this._addManifestToCache(x.cache,E),logger.debug(`Created database '${E}'`),this.open(E,x)}async determineAddress(n,_,x={}){const E=Object.assign({},{onlyHash:!0},x);return this._determineAddress(n,_,E)}async _requestCache(n,_,x){const E=_||this.directory;if(!this.caches[E]){const C=x||await this._createCache(E);this.caches[E]={cache:C,handlers:new Set}}this.caches[E].handlers.add(n);const S=this.caches[E].cache;return S&&await S.open(),S}async open(n,_={}){if(logger.debug("open()"),_=Object.assign({localOnly:!1,create:!1},_),logger.debug(`Open database '${n}'`),!OrbitDBAddress.isValid(n))if(_.create){if(_.create&&!_.type)throw new Error(`Database type not provided! Provide a type with 'options.type' (${OrbitDB.databaseTypes.join("|")})`);return logger.warn(`Not a valid OrbitDB address '${n}', creating the database`),_.overwrite=_.overwrite?_.overwrite:!0,this.create(n,_.type,_)}else throw new Error("'options.create' set to 'false'. If you want to create a database, set 'options.create' to 'true'.");const x=OrbitDBAddress.parse(n);_.cache=await this._requestCache(x.toString(),_.directory);const E=await this._haveLocalData(_.cache,x);if(logger.debug((E?"Found":"Didn't find")+` database '${x}'`),_.localOnly&&!E)throw logger.warn(`Database '${x}' doesn't exist!`),new Error(`Database '${x}' doesn't exist!`);logger.debug(`Loading Manifest for '${x}'`);let S;try{S=await read$4(this._ipfs,x.root,{timeout:_.timeout||defaultTimeout}),logger.debug(`Manifest for '${x}':
${JSON.stringify(S,null,2)}`)}catch(C){throw C.name==="TimeoutError"&&C.code==="ERR_TIMEOUT"?(console.error(C),new Error("ipfs unable to find and fetch manifest for this address.")):C}if(S.name!==x.path&&logger.warn(`Manifest name '${S.name}' and path name '${x.path}' do not match`),_.type&&S.type!==_.type)throw new Error(`Database '${x}' is type '${S.type}' but was opened as '${_.type}'`);return await this._addManifestToCache(_.cache,x),_=Object.assign({},_,{accessControllerAddress:S.accessController,meta:S.meta}),this._createStore(_.type||S.type,x,_)}async _addManifestToCache(n,_){await n.set(path.join(_.toString(),"_manifest"),_.root),logger.debug(`Saved manifest to IPFS as '${_.root}'`)}async _haveLocalData(n,_){if(!n)return!1;const x=_.toString(),E=await n.get(path.join(x,"_manifest"));return E!=null}async _migrate(n,_){await run(this,n,_)}static get databaseTypes(){return Object.keys(databaseTypes)}static isValidType(n){return Object.keys(databaseTypes).includes(n)}static addDatabaseType(n,_){if(databaseTypes[n])throw new Error(`Type already exists: ${n}`);databaseTypes[n]=_}static getDatabaseTypes(){return databaseTypes}static isValidAddress(n){return OrbitDBAddress.isValid(n)}static parseAddress(n){return OrbitDBAddress.parse(n)}}OrbitDB.prototype.AccessControllers=AccessControllers;OrbitDB.prototype.Identities=Identities;OrbitDB.prototype.Keystore=Keystore;const MODRATEUR="MODRATEUR",MEMBRE="MEMBRE",rles=[MODRATEUR,MEMBRE];var ajv$1={exports:{}},core$3={},validate={},boolSchema={},errors={},codegen={},code$1={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class n{}t._CodeOrName=n,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class _ extends n{constructor(H){if(super(),!t.IDENTIFIER.test(H))throw new Error("CodeGen: name must be a valid identifier");this.str=H}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=_;class x extends n{constructor(H){super(),this._items=typeof H=="string"?[H]:H}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const H=this._items[0];return H===""||H==='""'}get str(){var H;return(H=this._str)!==null&&H!==void 0?H:this._str=this._items.reduce((Y,Z)=>`${Y}${Z}`,"")}get names(){var H;return(H=this._names)!==null&&H!==void 0?H:this._names=this._items.reduce((Y,Z)=>(Z instanceof _&&(Y[Z.str]=(Y[Z.str]||0)+1),Y),{})}}t._Code=x,t.nil=new x("");function E(U,...H){const Y=[U[0]];let Z=0;for(;Z<H.length;)T(Y,H[Z]),Y.push(U[++Z]);return new x(Y)}t._=E;const S=new x("+");function C(U,...H){const Y=[V(U[0])];let Z=0;for(;Z<H.length;)Y.push(S),T(Y,H[Z]),Y.push(S,V(U[++Z]));return B(Y),new x(Y)}t.str=C;function T(U,H){H instanceof x?U.push(...H._items):H instanceof _?U.push(H):U.push(D(H))}t.addCodeArg=T;function B(U){let H=1;for(;H<U.length-1;){if(U[H]===S){const Y=A(U[H-1],U[H+1]);if(Y!==void 0){U.splice(H-1,3,Y);continue}U[H++]="+"}H++}}function A(U,H){if(H==='""')return U;if(U==='""')return H;if(typeof U=="string")return H instanceof _||U[U.length-1]!=='"'?void 0:typeof H!="string"?`${U.slice(0,-1)}${H}"`:H[0]==='"'?U.slice(0,-1)+H.slice(1):void 0;if(typeof H=="string"&&H[0]==='"'&&!(U instanceof _))return`"${U}${H.slice(1)}`}function I(U,H){return H.emptyStr()?U:U.emptyStr()?H:C`${U}${H}`}t.strConcat=I;function D(U){return typeof U=="number"||typeof U=="boolean"||U===null?U:V(Array.isArray(U)?U.join(","):U)}function M(U){return new x(V(U))}t.stringify=M;function V(U){return JSON.stringify(U).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=V;function L(U){return typeof U=="string"&&t.IDENTIFIER.test(U)?new x(`.${U}`):E`[${U}]`}t.getProperty=L;function F(U){if(typeof U=="string"&&t.IDENTIFIER.test(U))return new x(`${U}`);throw new Error(`CodeGen: invalid export name: ${U}, use explicit $id name mapping`)}t.getEsmExportName=F;function j(U){return new x(U.toString())}t.regexpCode=j})(code$1);var scope={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const n=code$1;class _ extends Error{constructor(A){super(`CodeGen: "code" for ${A} not defined`),this.value=A.value}}var x;(function(B){B[B.Started=0]="Started",B[B.Completed=1]="Completed"})(x=t.UsedValueState||(t.UsedValueState={})),t.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class E{constructor({prefixes:A,parent:I}={}){this._names={},this._prefixes=A,this._parent=I}toName(A){return A instanceof n.Name?A:this.name(A)}name(A){return new n.Name(this._newName(A))}_newName(A){const I=this._names[A]||this._nameGroup(A);return`${A}${I.index++}`}_nameGroup(A){var I,D;if(!((D=(I=this._parent)===null||I===void 0?void 0:I._prefixes)===null||D===void 0)&&D.has(A)||this._prefixes&&!this._prefixes.has(A))throw new Error(`CodeGen: prefix "${A}" is not allowed in this scope`);return this._names[A]={prefix:A,index:0}}}t.Scope=E;class S extends n.Name{constructor(A,I){super(I),this.prefix=A}setValue(A,{property:I,itemIndex:D}){this.value=A,this.scopePath=(0,n._)`.${new n.Name(I)}[${D}]`}}t.ValueScopeName=S;const C=(0,n._)`\n`;class T extends E{constructor(A){super(A),this._values={},this._scope=A.scope,this.opts={...A,_n:A.lines?C:n.nil}}get(){return this._scope}name(A){return new S(A,this._newName(A))}value(A,I){var D;if(I.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const M=this.toName(A),{prefix:V}=M,L=(D=I.key)!==null&&D!==void 0?D:I.ref;let F=this._values[V];if(F){const H=F.get(L);if(H)return H}else F=this._values[V]=new Map;F.set(L,M);const j=this._scope[V]||(this._scope[V]=[]),U=j.length;return j[U]=I.ref,M.setValue(I,{property:V,itemIndex:U}),M}getValue(A,I){const D=this._values[A];if(D)return D.get(I)}scopeRefs(A,I=this._values){return this._reduceValues(I,D=>{if(D.scopePath===void 0)throw new Error(`CodeGen: name "${D}" has no value`);return(0,n._)`${A}${D.scopePath}`})}scopeCode(A=this._values,I,D){return this._reduceValues(A,M=>{if(M.value===void 0)throw new Error(`CodeGen: name "${M}" has no value`);return M.value.code},I,D)}_reduceValues(A,I,D={},M){let V=n.nil;for(const L in A){const F=A[L];if(!F)continue;const j=D[L]=D[L]||new Map;F.forEach(U=>{if(j.has(U))return;j.set(U,x.Started);let H=I(U);if(H){const Y=this.opts.es5?t.varKinds.var:t.varKinds.const;V=(0,n._)`${V}${Y} ${U} = ${H};${this.opts._n}`}else if(H=M?.(U))V=(0,n._)`${V}${H}${this.opts._n}`;else throw new _(U);j.set(U,x.Completed)})}return V}}t.ValueScope=T})(scope);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const n=code$1,_=scope;var x=code$1;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return x._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return x.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return x.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return x.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return x.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return x.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return x.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return x.Name}});var E=scope;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return E.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return E.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return E.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return E.varKinds}}),t.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class S{optimizeNodes(){return this}optimizeNames(fe,he){return this}}class C extends S{constructor(fe,he,Ee){super(),this.varKind=fe,this.name=he,this.rhs=Ee}render({es5:fe,_n:he}){const Ee=fe?_.varKinds.var:this.varKind,we=this.rhs===void 0?"":` = ${this.rhs}`;return`${Ee} ${this.name}${we};`+he}optimizeNames(fe,he){if(fe[this.name.str])return this.rhs&&(this.rhs=O(this.rhs,fe,he)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class T extends S{constructor(fe,he,Ee){super(),this.lhs=fe,this.rhs=he,this.sideEffects=Ee}render({_n:fe}){return`${this.lhs} = ${this.rhs};`+fe}optimizeNames(fe,he){if(!(this.lhs instanceof n.Name&&!fe[this.lhs.str]&&!this.sideEffects))return this.rhs=O(this.rhs,fe,he),this}get names(){const fe=this.lhs instanceof n.Name?{}:{...this.lhs.names};return W(fe,this.rhs)}}class B extends T{constructor(fe,he,Ee,we){super(fe,Ee,we),this.op=he}render({_n:fe}){return`${this.lhs} ${this.op}= ${this.rhs};`+fe}}class A extends S{constructor(fe){super(),this.label=fe,this.names={}}render({_n:fe}){return`${this.label}:`+fe}}class I extends S{constructor(fe){super(),this.label=fe,this.names={}}render({_n:fe}){return`break${this.label?` ${this.label}`:""};`+fe}}class D extends S{constructor(fe){super(),this.error=fe}render({_n:fe}){return`throw ${this.error};`+fe}get names(){return this.error.names}}class M extends S{constructor(fe){super(),this.code=fe}render({_n:fe}){return`${this.code};`+fe}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(fe,he){return this.code=O(this.code,fe,he),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class V extends S{constructor(fe=[]){super(),this.nodes=fe}render(fe){return this.nodes.reduce((he,Ee)=>he+Ee.render(fe),"")}optimizeNodes(){const{nodes:fe}=this;let he=fe.length;for(;he--;){const Ee=fe[he].optimizeNodes();Array.isArray(Ee)?fe.splice(he,1,...Ee):Ee?fe[he]=Ee:fe.splice(he,1)}return fe.length>0?this:void 0}optimizeNames(fe,he){const{nodes:Ee}=this;let we=Ee.length;for(;we--;){const xe=Ee[we];xe.optimizeNames(fe,he)||(z(fe,xe.names),Ee.splice(we,1))}return Ee.length>0?this:void 0}get names(){return this.nodes.reduce((fe,he)=>ie(fe,he.names),{})}}class L extends V{render(fe){return"{"+fe._n+super.render(fe)+"}"+fe._n}}class F extends V{}class j extends L{}j.kind="else";class U extends L{constructor(fe,he){super(he),this.condition=fe}render(fe){let he=`if(${this.condition})`+super.render(fe);return this.else&&(he+="else "+this.else.render(fe)),he}optimizeNodes(){super.optimizeNodes();const fe=this.condition;if(fe===!0)return this.nodes;let he=this.else;if(he){const Ee=he.optimizeNodes();he=this.else=Array.isArray(Ee)?new j(Ee):Ee}if(he)return fe===!1?he instanceof U?he:he.nodes:this.nodes.length?this:new U(J(fe),he instanceof U?[he]:he.nodes);if(!(fe===!1||!this.nodes.length))return this}optimizeNames(fe,he){var Ee;if(this.else=(Ee=this.else)===null||Ee===void 0?void 0:Ee.optimizeNames(fe,he),!!(super.optimizeNames(fe,he)||this.else))return this.condition=O(this.condition,fe,he),this}get names(){const fe=super.names;return W(fe,this.condition),this.else&&ie(fe,this.else.names),fe}}U.kind="if";class H extends L{}H.kind="for";class Y extends H{constructor(fe){super(),this.iteration=fe}render(fe){return`for(${this.iteration})`+super.render(fe)}optimizeNames(fe,he){if(super.optimizeNames(fe,he))return this.iteration=O(this.iteration,fe,he),this}get names(){return ie(super.names,this.iteration.names)}}class Z extends H{constructor(fe,he,Ee,we){super(),this.varKind=fe,this.name=he,this.from=Ee,this.to=we}render(fe){const he=fe.es5?_.varKinds.var:this.varKind,{name:Ee,from:we,to:xe}=this;return`for(${he} ${Ee}=${we}; ${Ee}<${xe}; ${Ee}++)`+super.render(fe)}get names(){const fe=W(super.names,this.from);return W(fe,this.to)}}class ne extends H{constructor(fe,he,Ee,we){super(),this.loop=fe,this.varKind=he,this.name=Ee,this.iterable=we}render(fe){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(fe)}optimizeNames(fe,he){if(super.optimizeNames(fe,he))return this.iterable=O(this.iterable,fe,he),this}get names(){return ie(super.names,this.iterable.names)}}class re extends L{constructor(fe,he,Ee){super(),this.name=fe,this.args=he,this.async=Ee}render(fe){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(fe)}}re.kind="func";class X extends V{render(fe){return"return "+super.render(fe)}}X.kind="return";class ce extends L{render(fe){let he="try"+super.render(fe);return this.catch&&(he+=this.catch.render(fe)),this.finally&&(he+=this.finally.render(fe)),he}optimizeNodes(){var fe,he;return super.optimizeNodes(),(fe=this.catch)===null||fe===void 0||fe.optimizeNodes(),(he=this.finally)===null||he===void 0||he.optimizeNodes(),this}optimizeNames(fe,he){var Ee,we;return super.optimizeNames(fe,he),(Ee=this.catch)===null||Ee===void 0||Ee.optimizeNames(fe,he),(we=this.finally)===null||we===void 0||we.optimizeNames(fe,he),this}get names(){const fe=super.names;return this.catch&&ie(fe,this.catch.names),this.finally&&ie(fe,this.finally.names),fe}}class ue extends L{constructor(fe){super(),this.error=fe}render(fe){return`catch(${this.error})`+super.render(fe)}}ue.kind="catch";class _e extends L{render(fe){return"finally"+super.render(fe)}}_e.kind="finally";class ye{constructor(fe,he={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...he,_n:he.lines?`
`:""},this._extScope=fe,this._scope=new _.Scope({parent:fe}),this._nodes=[new F]}toString(){return this._root.render(this.opts)}name(fe){return this._scope.name(fe)}scopeName(fe){return this._extScope.name(fe)}scopeValue(fe,he){const Ee=this._extScope.value(fe,he);return(this._values[Ee.prefix]||(this._values[Ee.prefix]=new Set)).add(Ee),Ee}getScopeValue(fe,he){return this._extScope.getValue(fe,he)}scopeRefs(fe){return this._extScope.scopeRefs(fe,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(fe,he,Ee,we){const xe=this._scope.toName(he);return Ee!==void 0&&we&&(this._constants[xe.str]=Ee),this._leafNode(new C(fe,xe,Ee)),xe}const(fe,he,Ee){return this._def(_.varKinds.const,fe,he,Ee)}let(fe,he,Ee){return this._def(_.varKinds.let,fe,he,Ee)}var(fe,he,Ee){return this._def(_.varKinds.var,fe,he,Ee)}assign(fe,he,Ee){return this._leafNode(new T(fe,he,Ee))}add(fe,he){return this._leafNode(new B(fe,t.operators.ADD,he))}code(fe){return typeof fe=="function"?fe():fe!==n.nil&&this._leafNode(new M(fe)),this}object(...fe){const he=["{"];for(const[Ee,we]of fe)he.length>1&&he.push(","),he.push(Ee),(Ee!==we||this.opts.es5)&&(he.push(":"),(0,n.addCodeArg)(he,we));return he.push("}"),new n._Code(he)}if(fe,he,Ee){if(this._blockNode(new U(fe)),he&&Ee)this.code(he).else().code(Ee).endIf();else if(he)this.code(he).endIf();else if(Ee)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(fe){return this._elseNode(new U(fe))}else(){return this._elseNode(new j)}endIf(){return this._endBlockNode(U,j)}_for(fe,he){return this._blockNode(fe),he&&this.code(he).endFor(),this}for(fe,he){return this._for(new Y(fe),he)}forRange(fe,he,Ee,we,xe=this.opts.es5?_.varKinds.var:_.varKinds.let){const $e=this._scope.toName(fe);return this._for(new Z(xe,$e,he,Ee),()=>we($e))}forOf(fe,he,Ee,we=_.varKinds.const){const xe=this._scope.toName(fe);if(this.opts.es5){const $e=he instanceof n.Name?he:this.var("_arr",he);return this.forRange("_i",0,(0,n._)`${$e}.length`,ge=>{this.var(xe,(0,n._)`${$e}[${ge}]`),Ee(xe)})}return this._for(new ne("of",we,xe,he),()=>Ee(xe))}forIn(fe,he,Ee,we=this.opts.es5?_.varKinds.var:_.varKinds.const){if(this.opts.ownProperties)return this.forOf(fe,(0,n._)`Object.keys(${he})`,Ee);const xe=this._scope.toName(fe);return this._for(new ne("in",we,xe,he),()=>Ee(xe))}endFor(){return this._endBlockNode(H)}label(fe){return this._leafNode(new A(fe))}break(fe){return this._leafNode(new I(fe))}return(fe){const he=new X;if(this._blockNode(he),this.code(fe),he.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(X)}try(fe,he,Ee){if(!he&&!Ee)throw new Error('CodeGen: "try" without "catch" and "finally"');const we=new ce;if(this._blockNode(we),this.code(fe),he){const xe=this.name("e");this._currNode=we.catch=new ue(xe),he(xe)}return Ee&&(this._currNode=we.finally=new _e,this.code(Ee)),this._endBlockNode(ue,_e)}throw(fe){return this._leafNode(new D(fe))}block(fe,he){return this._blockStarts.push(this._nodes.length),fe&&this.code(fe).endBlock(he),this}endBlock(fe){const he=this._blockStarts.pop();if(he===void 0)throw new Error("CodeGen: not in self-balancing block");const Ee=this._nodes.length-he;if(Ee<0||fe!==void 0&&Ee!==fe)throw new Error(`CodeGen: wrong number of nodes: ${Ee} vs ${fe} expected`);return this._nodes.length=he,this}func(fe,he=n.nil,Ee,we){return this._blockNode(new re(fe,he,Ee)),we&&this.code(we).endFunc(),this}endFunc(){return this._endBlockNode(re)}optimize(fe=1){for(;fe-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(fe){return this._currNode.nodes.push(fe),this}_blockNode(fe){this._currNode.nodes.push(fe),this._nodes.push(fe)}_endBlockNode(fe,he){const Ee=this._currNode;if(Ee instanceof fe||he&&Ee instanceof he)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${he?`${fe.kind}/${he.kind}`:fe.kind}"`)}_elseNode(fe){const he=this._currNode;if(!(he instanceof U))throw new Error('CodeGen: "else" without "if"');return this._currNode=he.else=fe,this}get _root(){return this._nodes[0]}get _currNode(){const fe=this._nodes;return fe[fe.length-1]}set _currNode(fe){const he=this._nodes;he[he.length-1]=fe}}t.CodeGen=ye;function ie(te,fe){for(const he in fe)te[he]=(te[he]||0)+(fe[he]||0);return te}function W(te,fe){return fe instanceof n._CodeOrName?ie(te,fe.names):te}function O(te,fe,he){if(te instanceof n.Name)return Ee(te);if(!we(te))return te;return new n._Code(te._items.reduce((xe,$e)=>($e instanceof n.Name&&($e=Ee($e)),$e instanceof n._Code?xe.push(...$e._items):xe.push($e),xe),[]));function Ee(xe){const $e=he[xe.str];return $e===void 0||fe[xe.str]!==1?xe:(delete fe[xe.str],$e)}function we(xe){return xe instanceof n._Code&&xe._items.some($e=>$e instanceof n.Name&&fe[$e.str]===1&&he[$e.str]!==void 0)}}function z(te,fe){for(const he in fe)te[he]=(te[he]||0)-(fe[he]||0)}function J(te){return typeof te=="boolean"||typeof te=="number"||te===null?!te:(0,n._)`!${q(te)}`}t.not=J;const ee=G(t.operators.AND);function ae(...te){return te.reduce(ee)}t.and=ae;const oe=G(t.operators.OR);function se(...te){return te.reduce(oe)}t.or=se;function G(te){return(fe,he)=>fe===n.nil?he:he===n.nil?fe:(0,n._)`${q(fe)} ${te} ${q(he)}`}function q(te){return te instanceof n.Name?te:(0,n._)`(${te})`}})(codegen);var util={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const n=codegen,_=code$1;function x(re){const X={};for(const ce of re)X[ce]=!0;return X}t.toHash=x;function E(re,X){return typeof X=="boolean"?X:Object.keys(X).length===0?!0:(S(re,X),!C(X,re.self.RULES.all))}t.alwaysValidSchema=E;function S(re,X=re.schema){const{opts:ce,self:ue}=re;if(!ce.strictSchema||typeof X=="boolean")return;const _e=ue.RULES.keywords;for(const ye in X)_e[ye]||ne(re,`unknown keyword: "${ye}"`)}t.checkUnknownRules=S;function C(re,X){if(typeof re=="boolean")return!re;for(const ce in re)if(X[ce])return!0;return!1}t.schemaHasRules=C;function T(re,X){if(typeof re=="boolean")return!re;for(const ce in re)if(ce!=="$ref"&&X.all[ce])return!0;return!1}t.schemaHasRulesButRef=T;function B({topSchemaRef:re,schemaPath:X},ce,ue,_e){if(!_e){if(typeof ce=="number"||typeof ce=="boolean")return ce;if(typeof ce=="string")return(0,n._)`${ce}`}return(0,n._)`${re}${X}${(0,n.getProperty)(ue)}`}t.schemaRefOrVal=B;function A(re){return M(decodeURIComponent(re))}t.unescapeFragment=A;function I(re){return encodeURIComponent(D(re))}t.escapeFragment=I;function D(re){return typeof re=="number"?`${re}`:re.replace(/~/g,"~0").replace(/\//g,"~1")}t.escapeJsonPointer=D;function M(re){return re.replace(/~1/g,"/").replace(/~0/g,"~")}t.unescapeJsonPointer=M;function V(re,X){if(Array.isArray(re))for(const ce of re)X(ce);else X(re)}t.eachItem=V;function L({mergeNames:re,mergeToName:X,mergeValues:ce,resultToName:ue}){return(_e,ye,ie,W)=>{const O=ie===void 0?ye:ie instanceof n.Name?(ye instanceof n.Name?re(_e,ye,ie):X(_e,ye,ie),ie):ye instanceof n.Name?(X(_e,ie,ye),ye):ce(ye,ie);return W===n.Name&&!(O instanceof n.Name)?ue(_e,O):O}}t.mergeEvaluated={props:L({mergeNames:(re,X,ce)=>re.if((0,n._)`${ce} !== true && ${X} !== undefined`,()=>{re.if((0,n._)`${X} === true`,()=>re.assign(ce,!0),()=>re.assign(ce,(0,n._)`${ce} || {}`).code((0,n._)`Object.assign(${ce}, ${X})`))}),mergeToName:(re,X,ce)=>re.if((0,n._)`${ce} !== true`,()=>{X===!0?re.assign(ce,!0):(re.assign(ce,(0,n._)`${ce} || {}`),j(re,ce,X))}),mergeValues:(re,X)=>re===!0?!0:{...re,...X},resultToName:F}),items:L({mergeNames:(re,X,ce)=>re.if((0,n._)`${ce} !== true && ${X} !== undefined`,()=>re.assign(ce,(0,n._)`${X} === true ? true : ${ce} > ${X} ? ${ce} : ${X}`)),mergeToName:(re,X,ce)=>re.if((0,n._)`${ce} !== true`,()=>re.assign(ce,X===!0?!0:(0,n._)`${ce} > ${X} ? ${ce} : ${X}`)),mergeValues:(re,X)=>re===!0?!0:Math.max(re,X),resultToName:(re,X)=>re.var("items",X)})};function F(re,X){if(X===!0)return re.var("props",!0);const ce=re.var("props",(0,n._)`{}`);return X!==void 0&&j(re,ce,X),ce}t.evaluatedPropsToName=F;function j(re,X,ce){Object.keys(ce).forEach(ue=>re.assign((0,n._)`${X}${(0,n.getProperty)(ue)}`,!0))}t.setEvaluated=j;const U={};function H(re,X){return re.scopeValue("func",{ref:X,code:U[X.code]||(U[X.code]=new _._Code(X.code))})}t.useFunc=H;var Y;(function(re){re[re.Num=0]="Num",re[re.Str=1]="Str"})(Y=t.Type||(t.Type={}));function Z(re,X,ce){if(re instanceof n.Name){const ue=X===Y.Num;return ce?ue?(0,n._)`"[" + ${re} + "]"`:(0,n._)`"['" + ${re} + "']"`:ue?(0,n._)`"/" + ${re}`:(0,n._)`"/" + ${re}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return ce?(0,n.getProperty)(re).toString():"/"+D(re)}t.getErrorPath=Z;function ne(re,X,ce=re.opts.strictSchema){if(ce){if(X=`strict mode: ${X}`,ce===!0)throw new Error(X);re.self.logger.warn(X)}}t.checkStrictMode=ne})(util);var names$1={};Object.defineProperty(names$1,"__esModule",{value:!0});const codegen_1$t=codegen,names={data:new codegen_1$t.Name("data"),valCxt:new codegen_1$t.Name("valCxt"),instancePath:new codegen_1$t.Name("instancePath"),parentData:new codegen_1$t.Name("parentData"),parentDataProperty:new codegen_1$t.Name("parentDataProperty"),rootData:new codegen_1$t.Name("rootData"),dynamicAnchors:new codegen_1$t.Name("dynamicAnchors"),vErrors:new codegen_1$t.Name("vErrors"),errors:new codegen_1$t.Name("errors"),this:new codegen_1$t.Name("this"),self:new codegen_1$t.Name("self"),scope:new codegen_1$t.Name("scope"),json:new codegen_1$t.Name("json"),jsonPos:new codegen_1$t.Name("jsonPos"),jsonLen:new codegen_1$t.Name("jsonLen"),jsonPart:new codegen_1$t.Name("jsonPart")};names$1.default=names;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const n=codegen,_=util,x=names$1;t.keywordError={message:({keyword:j})=>(0,n.str)`must pass "${j}" keyword validation`},t.keyword$DataError={message:({keyword:j,schemaType:U})=>U?(0,n.str)`"${j}" keyword must be ${U} ($data)`:(0,n.str)`"${j}" keyword is invalid ($data)`};function E(j,U=t.keywordError,H,Y){const{it:Z}=j,{gen:ne,compositeRule:re,allErrors:X}=Z,ce=D(j,U,H);Y??(re||X)?B(ne,ce):A(Z,(0,n._)`[${ce}]`)}t.reportError=E;function S(j,U=t.keywordError,H){const{it:Y}=j,{gen:Z,compositeRule:ne,allErrors:re}=Y,X=D(j,U,H);B(Z,X),ne||re||A(Y,x.default.vErrors)}t.reportExtraError=S;function C(j,U){j.assign(x.default.errors,U),j.if((0,n._)`${x.default.vErrors} !== null`,()=>j.if(U,()=>j.assign((0,n._)`${x.default.vErrors}.length`,U),()=>j.assign(x.default.vErrors,null)))}t.resetErrorsCount=C;function T({gen:j,keyword:U,schemaValue:H,data:Y,errsCount:Z,it:ne}){if(Z===void 0)throw new Error("ajv implementation error");const re=j.name("err");j.forRange("i",Z,x.default.errors,X=>{j.const(re,(0,n._)`${x.default.vErrors}[${X}]`),j.if((0,n._)`${re}.instancePath === undefined`,()=>j.assign((0,n._)`${re}.instancePath`,(0,n.strConcat)(x.default.instancePath,ne.errorPath))),j.assign((0,n._)`${re}.schemaPath`,(0,n.str)`${ne.errSchemaPath}/${U}`),ne.opts.verbose&&(j.assign((0,n._)`${re}.schema`,H),j.assign((0,n._)`${re}.data`,Y))})}t.extendErrors=T;function B(j,U){const H=j.const("err",U);j.if((0,n._)`${x.default.vErrors} === null`,()=>j.assign(x.default.vErrors,(0,n._)`[${H}]`),(0,n._)`${x.default.vErrors}.push(${H})`),j.code((0,n._)`${x.default.errors}++`)}function A(j,U){const{gen:H,validateName:Y,schemaEnv:Z}=j;Z.$async?H.throw((0,n._)`new ${j.ValidationError}(${U})`):(H.assign((0,n._)`${Y}.errors`,U),H.return(!1))}const I={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function D(j,U,H){const{createErrors:Y}=j.it;return Y===!1?(0,n._)`{}`:M(j,U,H)}function M(j,U,H={}){const{gen:Y,it:Z}=j,ne=[V(Z,H),L(j,H)];return F(j,U,ne),Y.object(...ne)}function V({errorPath:j},{instancePath:U}){const H=U?(0,n.str)`${j}${(0,_.getErrorPath)(U,_.Type.Str)}`:j;return[x.default.instancePath,(0,n.strConcat)(x.default.instancePath,H)]}function L({keyword:j,it:{errSchemaPath:U}},{schemaPath:H,parentSchema:Y}){let Z=Y?U:(0,n.str)`${U}/${j}`;return H&&(Z=(0,n.str)`${Z}${(0,_.getErrorPath)(H,_.Type.Str)}`),[I.schemaPath,Z]}function F(j,{params:U,message:H},Y){const{keyword:Z,data:ne,schemaValue:re,it:X}=j,{opts:ce,propertyName:ue,topSchemaRef:_e,schemaPath:ye}=X;Y.push([I.keyword,Z],[I.params,typeof U=="function"?U(j):U||(0,n._)`{}`]),ce.messages&&Y.push([I.message,typeof H=="function"?H(j):H]),ce.verbose&&Y.push([I.schema,re],[I.parentSchema,(0,n._)`${_e}${ye}`],[x.default.data,ne]),ue&&Y.push([I.propertyName,ue])}})(errors);Object.defineProperty(boolSchema,"__esModule",{value:!0});boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;const errors_1$2=errors,codegen_1$s=codegen,names_1$6=names$1,boolError={message:"boolean schema is false"};function topBoolOrEmptySchema(t){const{gen:n,schema:_,validateName:x}=t;_===!1?falseSchemaError(t,!1):typeof _=="object"&&_.$async===!0?n.return(names_1$6.default.data):(n.assign((0,codegen_1$s._)`${x}.errors`,null),n.return(!0))}boolSchema.topBoolOrEmptySchema=topBoolOrEmptySchema;function boolOrEmptySchema(t,n){const{gen:_,schema:x}=t;x===!1?(_.var(n,!1),falseSchemaError(t)):_.var(n,!0)}boolSchema.boolOrEmptySchema=boolOrEmptySchema;function falseSchemaError(t,n){const{gen:_,data:x}=t,E={gen:_,keyword:"false schema",data:x,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,errors_1$2.reportError)(E,boolError,void 0,n)}var dataType={},rules={};Object.defineProperty(rules,"__esModule",{value:!0});rules.getRules=rules.isJSONType=void 0;const _jsonTypes=["string","number","integer","boolean","null","object","array"],jsonTypes=new Set(_jsonTypes);function isJSONType(t){return typeof t=="string"&&jsonTypes.has(t)}rules.isJSONType=isJSONType;function getRules(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}rules.getRules=getRules;var applicability={};Object.defineProperty(applicability,"__esModule",{value:!0});applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0;function schemaHasRulesForType({schema:t,self:n},_){const x=n.RULES.types[_];return x&&x!==!0&&shouldUseGroup(t,x)}applicability.schemaHasRulesForType=schemaHasRulesForType;function shouldUseGroup(t,n){return n.rules.some(_=>shouldUseRule(t,_))}applicability.shouldUseGroup=shouldUseGroup;function shouldUseRule(t,n){var _;return t[n.keyword]!==void 0||((_=n.definition.implements)===null||_===void 0?void 0:_.some(x=>t[x]!==void 0))}applicability.shouldUseRule=shouldUseRule;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const n=rules,_=applicability,x=errors,E=codegen,S=util;var C;(function(Y){Y[Y.Correct=0]="Correct",Y[Y.Wrong=1]="Wrong"})(C=t.DataType||(t.DataType={}));function T(Y){const Z=B(Y.type);if(Z.includes("null")){if(Y.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!Z.length&&Y.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');Y.nullable===!0&&Z.push("null")}return Z}t.getSchemaTypes=T;function B(Y){const Z=Array.isArray(Y)?Y:Y?[Y]:[];if(Z.every(n.isJSONType))return Z;throw new Error("type must be JSONType or JSONType[]: "+Z.join(","))}t.getJSONTypes=B;function A(Y,Z){const{gen:ne,data:re,opts:X}=Y,ce=D(Z,X.coerceTypes),ue=Z.length>0&&!(ce.length===0&&Z.length===1&&(0,_.schemaHasRulesForType)(Y,Z[0]));if(ue){const _e=F(Z,re,X.strictNumbers,C.Wrong);ne.if(_e,()=>{ce.length?M(Y,Z,ce):U(Y)})}return ue}t.coerceAndCheckDataType=A;const I=new Set(["string","number","integer","boolean","null"]);function D(Y,Z){return Z?Y.filter(ne=>I.has(ne)||Z==="array"&&ne==="array"):[]}function M(Y,Z,ne){const{gen:re,data:X,opts:ce}=Y,ue=re.let("dataType",(0,E._)`typeof ${X}`),_e=re.let("coerced",(0,E._)`undefined`);ce.coerceTypes==="array"&&re.if((0,E._)`${ue} == 'object' && Array.isArray(${X}) && ${X}.length == 1`,()=>re.assign(X,(0,E._)`${X}[0]`).assign(ue,(0,E._)`typeof ${X}`).if(F(Z,X,ce.strictNumbers),()=>re.assign(_e,X))),re.if((0,E._)`${_e} !== undefined`);for(const ie of ne)(I.has(ie)||ie==="array"&&ce.coerceTypes==="array")&&ye(ie);re.else(),U(Y),re.endIf(),re.if((0,E._)`${_e} !== undefined`,()=>{re.assign(X,_e),V(Y,_e)});function ye(ie){switch(ie){case"string":re.elseIf((0,E._)`${ue} == "number" || ${ue} == "boolean"`).assign(_e,(0,E._)`"" + ${X}`).elseIf((0,E._)`${X} === null`).assign(_e,(0,E._)`""`);return;case"number":re.elseIf((0,E._)`${ue} == "boolean" || ${X} === null
              || (${ue} == "string" && ${X} && ${X} == +${X})`).assign(_e,(0,E._)`+${X}`);return;case"integer":re.elseIf((0,E._)`${ue} === "boolean" || ${X} === null
              || (${ue} === "string" && ${X} && ${X} == +${X} && !(${X} % 1))`).assign(_e,(0,E._)`+${X}`);return;case"boolean":re.elseIf((0,E._)`${X} === "false" || ${X} === 0 || ${X} === null`).assign(_e,!1).elseIf((0,E._)`${X} === "true" || ${X} === 1`).assign(_e,!0);return;case"null":re.elseIf((0,E._)`${X} === "" || ${X} === 0 || ${X} === false`),re.assign(_e,null);return;case"array":re.elseIf((0,E._)`${ue} === "string" || ${ue} === "number"
              || ${ue} === "boolean" || ${X} === null`).assign(_e,(0,E._)`[${X}]`)}}}function V({gen:Y,parentData:Z,parentDataProperty:ne},re){Y.if((0,E._)`${Z} !== undefined`,()=>Y.assign((0,E._)`${Z}[${ne}]`,re))}function L(Y,Z,ne,re=C.Correct){const X=re===C.Correct?E.operators.EQ:E.operators.NEQ;let ce;switch(Y){case"null":return(0,E._)`${Z} ${X} null`;case"array":ce=(0,E._)`Array.isArray(${Z})`;break;case"object":ce=(0,E._)`${Z} && typeof ${Z} == "object" && !Array.isArray(${Z})`;break;case"integer":ce=ue((0,E._)`!(${Z} % 1) && !isNaN(${Z})`);break;case"number":ce=ue();break;default:return(0,E._)`typeof ${Z} ${X} ${Y}`}return re===C.Correct?ce:(0,E.not)(ce);function ue(_e=E.nil){return(0,E.and)((0,E._)`typeof ${Z} == "number"`,_e,ne?(0,E._)`isFinite(${Z})`:E.nil)}}t.checkDataType=L;function F(Y,Z,ne,re){if(Y.length===1)return L(Y[0],Z,ne,re);let X;const ce=(0,S.toHash)(Y);if(ce.array&&ce.object){const ue=(0,E._)`typeof ${Z} != "object"`;X=ce.null?ue:(0,E._)`!${Z} || ${ue}`,delete ce.null,delete ce.array,delete ce.object}else X=E.nil;ce.number&&delete ce.integer;for(const ue in ce)X=(0,E.and)(X,L(ue,Z,ne,re));return X}t.checkDataTypes=F;const j={message:({schema:Y})=>`must be ${Y}`,params:({schema:Y,schemaValue:Z})=>typeof Y=="string"?(0,E._)`{type: ${Y}}`:(0,E._)`{type: ${Z}}`};function U(Y){const Z=H(Y);(0,x.reportError)(Z,j)}t.reportTypeError=U;function H(Y){const{gen:Z,data:ne,schema:re}=Y,X=(0,S.schemaRefOrVal)(Y,re,"type");return{gen:Z,keyword:"type",data:ne,schema:re.type,schemaCode:X,schemaValue:X,parentSchema:re,params:{},it:Y}}})(dataType);var defaults$2={};Object.defineProperty(defaults$2,"__esModule",{value:!0});defaults$2.assignDefaults=void 0;const codegen_1$r=codegen,util_1$p=util;function assignDefaults(t,n){const{properties:_,items:x}=t.schema;if(n==="object"&&_)for(const E in _)assignDefault(t,E,_[E].default);else n==="array"&&Array.isArray(x)&&x.forEach((E,S)=>assignDefault(t,S,E.default))}defaults$2.assignDefaults=assignDefaults;function assignDefault(t,n,_){const{gen:x,compositeRule:E,data:S,opts:C}=t;if(_===void 0)return;const T=(0,codegen_1$r._)`${S}${(0,codegen_1$r.getProperty)(n)}`;if(E){(0,util_1$p.checkStrictMode)(t,`default is ignored for: ${T}`);return}let B=(0,codegen_1$r._)`${T} === undefined`;C.useDefaults==="empty"&&(B=(0,codegen_1$r._)`${B} || ${T} === null || ${T} === ""`),x.if(B,(0,codegen_1$r._)`${T} = ${(0,codegen_1$r.stringify)(_)}`)}var keyword={},code={};Object.defineProperty(code,"__esModule",{value:!0});code.validateUnion=code.validateArray=code.usePattern=code.callValidateCode=code.schemaProperties=code.allSchemaProperties=code.noPropertyInData=code.propertyInData=code.isOwnProperty=code.hasPropFunc=code.reportMissingProp=code.checkMissingProp=code.checkReportMissingProp=void 0;const codegen_1$q=codegen,util_1$o=util,names_1$5=names$1,util_2$1=util;function checkReportMissingProp(t,n){const{gen:_,data:x,it:E}=t;_.if(noPropertyInData(_,x,n,E.opts.ownProperties),()=>{t.setParams({missingProperty:(0,codegen_1$q._)`${n}`},!0),t.error()})}code.checkReportMissingProp=checkReportMissingProp;function checkMissingProp({gen:t,data:n,it:{opts:_}},x,E){return(0,codegen_1$q.or)(...x.map(S=>(0,codegen_1$q.and)(noPropertyInData(t,n,S,_.ownProperties),(0,codegen_1$q._)`${E} = ${S}`)))}code.checkMissingProp=checkMissingProp;function reportMissingProp(t,n){t.setParams({missingProperty:n},!0),t.error()}code.reportMissingProp=reportMissingProp;function hasPropFunc(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,codegen_1$q._)`Object.prototype.hasOwnProperty`})}code.hasPropFunc=hasPropFunc;function isOwnProperty(t,n,_){return(0,codegen_1$q._)`${hasPropFunc(t)}.call(${n}, ${_})`}code.isOwnProperty=isOwnProperty;function propertyInData(t,n,_,x){const E=(0,codegen_1$q._)`${n}${(0,codegen_1$q.getProperty)(_)} !== undefined`;return x?(0,codegen_1$q._)`${E} && ${isOwnProperty(t,n,_)}`:E}code.propertyInData=propertyInData;function noPropertyInData(t,n,_,x){const E=(0,codegen_1$q._)`${n}${(0,codegen_1$q.getProperty)(_)} === undefined`;return x?(0,codegen_1$q.or)(E,(0,codegen_1$q.not)(isOwnProperty(t,n,_))):E}code.noPropertyInData=noPropertyInData;function allSchemaProperties(t){return t?Object.keys(t).filter(n=>n!=="__proto__"):[]}code.allSchemaProperties=allSchemaProperties;function schemaProperties(t,n){return allSchemaProperties(n).filter(_=>!(0,util_1$o.alwaysValidSchema)(t,n[_]))}code.schemaProperties=schemaProperties;function callValidateCode({schemaCode:t,data:n,it:{gen:_,topSchemaRef:x,schemaPath:E,errorPath:S},it:C},T,B,A){const I=A?(0,codegen_1$q._)`${t}, ${n}, ${x}${E}`:n,D=[[names_1$5.default.instancePath,(0,codegen_1$q.strConcat)(names_1$5.default.instancePath,S)],[names_1$5.default.parentData,C.parentData],[names_1$5.default.parentDataProperty,C.parentDataProperty],[names_1$5.default.rootData,names_1$5.default.rootData]];C.opts.dynamicRef&&D.push([names_1$5.default.dynamicAnchors,names_1$5.default.dynamicAnchors]);const M=(0,codegen_1$q._)`${I}, ${_.object(...D)}`;return B!==codegen_1$q.nil?(0,codegen_1$q._)`${T}.call(${B}, ${M})`:(0,codegen_1$q._)`${T}(${M})`}code.callValidateCode=callValidateCode;const newRegExp=(0,codegen_1$q._)`new RegExp`;function usePattern({gen:t,it:{opts:n}},_){const x=n.unicodeRegExp?"u":"",{regExp:E}=n.code,S=E(_,x);return t.scopeValue("pattern",{key:S.toString(),ref:S,code:(0,codegen_1$q._)`${E.code==="new RegExp"?newRegExp:(0,util_2$1.useFunc)(t,E)}(${_}, ${x})`})}code.usePattern=usePattern;function validateArray(t){const{gen:n,data:_,keyword:x,it:E}=t,S=n.name("valid");if(E.allErrors){const T=n.let("valid",!0);return C(()=>n.assign(T,!1)),T}return n.var(S,!0),C(()=>n.break()),S;function C(T){const B=n.const("len",(0,codegen_1$q._)`${_}.length`);n.forRange("i",0,B,A=>{t.subschema({keyword:x,dataProp:A,dataPropType:util_1$o.Type.Num},S),n.if((0,codegen_1$q.not)(S),T)})}}code.validateArray=validateArray;function validateUnion(t){const{gen:n,schema:_,keyword:x,it:E}=t;if(!Array.isArray(_))throw new Error("ajv implementation error");if(_.some(B=>(0,util_1$o.alwaysValidSchema)(E,B))&&!E.opts.unevaluated)return;const C=n.let("valid",!1),T=n.name("_valid");n.block(()=>_.forEach((B,A)=>{const I=t.subschema({keyword:x,schemaProp:A,compositeRule:!0},T);n.assign(C,(0,codegen_1$q._)`${C} || ${T}`),t.mergeValidEvaluated(I,T)||n.if((0,codegen_1$q.not)(C))})),t.result(C,()=>t.reset(),()=>t.error(!0))}code.validateUnion=validateUnion;Object.defineProperty(keyword,"__esModule",{value:!0});keyword.validateKeywordUsage=keyword.validSchemaType=keyword.funcKeywordCode=keyword.macroKeywordCode=void 0;const codegen_1$p=codegen,names_1$4=names$1,code_1$9=code,errors_1$1=errors;function macroKeywordCode(t,n){const{gen:_,keyword:x,schema:E,parentSchema:S,it:C}=t,T=n.macro.call(C.self,E,S,C),B=useKeyword(_,x,T);C.opts.validateSchema!==!1&&C.self.validateSchema(T,!0);const A=_.name("valid");t.subschema({schema:T,schemaPath:codegen_1$p.nil,errSchemaPath:`${C.errSchemaPath}/${x}`,topSchemaRef:B,compositeRule:!0},A),t.pass(A,()=>t.error(!0))}keyword.macroKeywordCode=macroKeywordCode;function funcKeywordCode(t,n){var _;const{gen:x,keyword:E,schema:S,parentSchema:C,$data:T,it:B}=t;checkAsyncKeyword(B,n);const A=!T&&n.compile?n.compile.call(B.self,S,C,B):n.validate,I=useKeyword(x,E,A),D=x.let("valid");t.block$data(D,M),t.ok((_=n.valid)!==null&&_!==void 0?_:D);function M(){if(n.errors===!1)F(),n.modifying&&modifyData(t),j(()=>t.error());else{const U=n.async?V():L();n.modifying&&modifyData(t),j(()=>addErrs(t,U))}}function V(){const U=x.let("ruleErrs",null);return x.try(()=>F((0,codegen_1$p._)`await `),H=>x.assign(D,!1).if((0,codegen_1$p._)`${H} instanceof ${B.ValidationError}`,()=>x.assign(U,(0,codegen_1$p._)`${H}.errors`),()=>x.throw(H))),U}function L(){const U=(0,codegen_1$p._)`${I}.errors`;return x.assign(U,null),F(codegen_1$p.nil),U}function F(U=n.async?(0,codegen_1$p._)`await `:codegen_1$p.nil){const H=B.opts.passContext?names_1$4.default.this:names_1$4.default.self,Y=!("compile"in n&&!T||n.schema===!1);x.assign(D,(0,codegen_1$p._)`${U}${(0,code_1$9.callValidateCode)(t,I,H,Y)}`,n.modifying)}function j(U){var H;x.if((0,codegen_1$p.not)((H=n.valid)!==null&&H!==void 0?H:D),U)}}keyword.funcKeywordCode=funcKeywordCode;function modifyData(t){const{gen:n,data:_,it:x}=t;n.if(x.parentData,()=>n.assign(_,(0,codegen_1$p._)`${x.parentData}[${x.parentDataProperty}]`))}function addErrs(t,n){const{gen:_}=t;_.if((0,codegen_1$p._)`Array.isArray(${n})`,()=>{_.assign(names_1$4.default.vErrors,(0,codegen_1$p._)`${names_1$4.default.vErrors} === null ? ${n} : ${names_1$4.default.vErrors}.concat(${n})`).assign(names_1$4.default.errors,(0,codegen_1$p._)`${names_1$4.default.vErrors}.length`),(0,errors_1$1.extendErrors)(t)},()=>t.error())}function checkAsyncKeyword({schemaEnv:t},n){if(n.async&&!t.$async)throw new Error("async keyword in sync schema")}function useKeyword(t,n,_){if(_===void 0)throw new Error(`keyword "${n}" failed to compile`);return t.scopeValue("keyword",typeof _=="function"?{ref:_}:{ref:_,code:(0,codegen_1$p.stringify)(_)})}function validSchemaType(t,n,_=!1){return!n.length||n.some(x=>x==="array"?Array.isArray(t):x==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==x||_&&typeof t>"u")}keyword.validSchemaType=validSchemaType;function validateKeywordUsage({schema:t,opts:n,self:_,errSchemaPath:x},E,S){if(Array.isArray(E.keyword)?!E.keyword.includes(S):E.keyword!==S)throw new Error("ajv implementation error");const C=E.dependencies;if(C?.some(T=>!Object.prototype.hasOwnProperty.call(t,T)))throw new Error(`parent schema must have dependencies of ${S}: ${C.join(",")}`);if(E.validateSchema&&!E.validateSchema(t[S])){const B=`keyword "${S}" value is invalid at path "${x}": `+_.errorsText(E.validateSchema.errors);if(n.validateSchema==="log")_.logger.error(B);else throw new Error(B)}}keyword.validateKeywordUsage=validateKeywordUsage;var subschema={};Object.defineProperty(subschema,"__esModule",{value:!0});subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;const codegen_1$o=codegen,util_1$n=util;function getSubschema(t,{keyword:n,schemaProp:_,schema:x,schemaPath:E,errSchemaPath:S,topSchemaRef:C}){if(n!==void 0&&x!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(n!==void 0){const T=t.schema[n];return _===void 0?{schema:T,schemaPath:(0,codegen_1$o._)`${t.schemaPath}${(0,codegen_1$o.getProperty)(n)}`,errSchemaPath:`${t.errSchemaPath}/${n}`}:{schema:T[_],schemaPath:(0,codegen_1$o._)`${t.schemaPath}${(0,codegen_1$o.getProperty)(n)}${(0,codegen_1$o.getProperty)(_)}`,errSchemaPath:`${t.errSchemaPath}/${n}/${(0,util_1$n.escapeFragment)(_)}`}}if(x!==void 0){if(E===void 0||S===void 0||C===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:x,schemaPath:E,topSchemaRef:C,errSchemaPath:S}}throw new Error('either "keyword" or "schema" must be passed')}subschema.getSubschema=getSubschema;function extendSubschemaData(t,n,{dataProp:_,dataPropType:x,data:E,dataTypes:S,propertyName:C}){if(E!==void 0&&_!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:T}=n;if(_!==void 0){const{errorPath:A,dataPathArr:I,opts:D}=n,M=T.let("data",(0,codegen_1$o._)`${n.data}${(0,codegen_1$o.getProperty)(_)}`,!0);B(M),t.errorPath=(0,codegen_1$o.str)`${A}${(0,util_1$n.getErrorPath)(_,x,D.jsPropertySyntax)}`,t.parentDataProperty=(0,codegen_1$o._)`${_}`,t.dataPathArr=[...I,t.parentDataProperty]}if(E!==void 0){const A=E instanceof codegen_1$o.Name?E:T.let("data",E,!0);B(A),C!==void 0&&(t.propertyName=C)}S&&(t.dataTypes=S);function B(A){t.data=A,t.dataLevel=n.dataLevel+1,t.dataTypes=[],n.definedProperties=new Set,t.parentData=n.data,t.dataNames=[...n.dataNames,A]}}subschema.extendSubschemaData=extendSubschemaData;function extendSubschemaMode(t,{jtdDiscriminator:n,jtdMetadata:_,compositeRule:x,createErrors:E,allErrors:S}){x!==void 0&&(t.compositeRule=x),E!==void 0&&(t.createErrors=E),S!==void 0&&(t.allErrors=S),t.jtdDiscriminator=n,t.jtdMetadata=_}subschema.extendSubschemaMode=extendSubschemaMode;var resolve$1={},fastDeepEqual=function t(n,_){if(n===_)return!0;if(n&&_&&typeof n=="object"&&typeof _=="object"){if(n.constructor!==_.constructor)return!1;var x,E,S;if(Array.isArray(n)){if(x=n.length,x!=_.length)return!1;for(E=x;E--!==0;)if(!t(n[E],_[E]))return!1;return!0}if(n.constructor===RegExp)return n.source===_.source&&n.flags===_.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===_.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===_.toString();if(S=Object.keys(n),x=S.length,x!==Object.keys(_).length)return!1;for(E=x;E--!==0;)if(!Object.prototype.hasOwnProperty.call(_,S[E]))return!1;for(E=x;E--!==0;){var C=S[E];if(!t(n[C],_[C]))return!1}return!0}return n!==n&&_!==_},jsonSchemaTraverse={exports:{}},traverse$1=jsonSchemaTraverse.exports=function(t,n,_){typeof n=="function"&&(_=n,n={}),_=n.cb||_;var x=typeof _=="function"?_:_.pre||function(){},E=_.post||function(){};_traverse(n,x,E,t,"",t)};traverse$1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};traverse$1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};traverse$1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};traverse$1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _traverse(t,n,_,x,E,S,C,T,B,A){if(x&&typeof x=="object"&&!Array.isArray(x)){n(x,E,S,C,T,B,A);for(var I in x){var D=x[I];if(Array.isArray(D)){if(I in traverse$1.arrayKeywords)for(var M=0;M<D.length;M++)_traverse(t,n,_,D[M],E+"/"+I+"/"+M,S,E,I,x,M)}else if(I in traverse$1.propsKeywords){if(D&&typeof D=="object")for(var V in D)_traverse(t,n,_,D[V],E+"/"+I+"/"+escapeJsonPtr(V),S,E,I,x,V)}else(I in traverse$1.keywords||t.allKeys&&!(I in traverse$1.skipKeywords))&&_traverse(t,n,_,D,E+"/"+I,S,E,I,x)}_(x,E,S,C,T,B,A)}}function escapeJsonPtr(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var jsonSchemaTraverseExports=jsonSchemaTraverse.exports;Object.defineProperty(resolve$1,"__esModule",{value:!0});resolve$1.getSchemaRefs=resolve$1.resolveUrl=resolve$1.normalizeId=resolve$1._getFullPath=resolve$1.getFullPath=resolve$1.inlineRef=void 0;const util_1$m=util,equal$2=fastDeepEqual,traverse=jsonSchemaTraverseExports,SIMPLE_INLINED=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function inlineRef(t,n=!0){return typeof t=="boolean"?!0:n===!0?!hasRef(t):n?countKeys(t)<=n:!1}resolve$1.inlineRef=inlineRef;const REF_KEYWORDS=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function hasRef(t){for(const n in t){if(REF_KEYWORDS.has(n))return!0;const _=t[n];if(Array.isArray(_)&&_.some(hasRef)||typeof _=="object"&&hasRef(_))return!0}return!1}function countKeys(t){let n=0;for(const _ in t){if(_==="$ref")return 1/0;if(n++,!SIMPLE_INLINED.has(_)&&(typeof t[_]=="object"&&(0,util_1$m.eachItem)(t[_],x=>n+=countKeys(x)),n===1/0))return 1/0}return n}function getFullPath(t,n="",_){_!==!1&&(n=normalizeId(n));const x=t.parse(n);return _getFullPath(t,x)}resolve$1.getFullPath=getFullPath;function _getFullPath(t,n){return t.serialize(n).split("#")[0]+"#"}resolve$1._getFullPath=_getFullPath;const TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(t){return t?t.replace(TRAILING_SLASH_HASH,""):""}resolve$1.normalizeId=normalizeId;function resolveUrl(t,n,_){return _=normalizeId(_),t.resolve(n,_)}resolve$1.resolveUrl=resolveUrl;const ANCHOR=/^[a-z_][-a-z0-9._]*$/i;function getSchemaRefs(t,n){if(typeof t=="boolean")return{};const{schemaId:_,uriResolver:x}=this.opts,E=normalizeId(t[_]||n),S={"":E},C=getFullPath(x,E,!1),T={},B=new Set;return traverse(t,{allKeys:!0},(D,M,V,L)=>{if(L===void 0)return;const F=C+M;let j=S[L];typeof D[_]=="string"&&(j=U.call(this,D[_])),H.call(this,D.$anchor),H.call(this,D.$dynamicAnchor),S[M]=j;function U(Y){const Z=this.opts.uriResolver.resolve;if(Y=normalizeId(j?Z(j,Y):Y),B.has(Y))throw I(Y);B.add(Y);let ne=this.refs[Y];return typeof ne=="string"&&(ne=this.refs[ne]),typeof ne=="object"?A(D,ne.schema,Y):Y!==normalizeId(F)&&(Y[0]==="#"?(A(D,T[Y],Y),T[Y]=D):this.refs[Y]=F),Y}function H(Y){if(typeof Y=="string"){if(!ANCHOR.test(Y))throw new Error(`invalid anchor "${Y}"`);U.call(this,`#${Y}`)}}}),T;function A(D,M,V){if(M!==void 0&&!equal$2(D,M))throw I(V)}function I(D){return new Error(`reference "${D}" resolves to more than one schema`)}}resolve$1.getSchemaRefs=getSchemaRefs;Object.defineProperty(validate,"__esModule",{value:!0});validate.getData=validate.KeywordCxt=validate.validateFunctionCode=void 0;const boolSchema_1=boolSchema,dataType_1$1=dataType,applicability_1=applicability,dataType_2=dataType,defaults_1=defaults$2,keyword_1=keyword,subschema_1=subschema,codegen_1$n=codegen,names_1$3=names$1,resolve_1$2=resolve$1,util_1$l=util,errors_1=errors;function validateFunctionCode(t){if(isSchemaObj(t)&&(checkKeywords(t),schemaCxtHasRules(t))){topSchemaObjCode(t);return}validateFunction(t,()=>(0,boolSchema_1.topBoolOrEmptySchema)(t))}validate.validateFunctionCode=validateFunctionCode;function validateFunction({gen:t,validateName:n,schema:_,schemaEnv:x,opts:E},S){E.code.es5?t.func(n,(0,codegen_1$n._)`${names_1$3.default.data}, ${names_1$3.default.valCxt}`,x.$async,()=>{t.code((0,codegen_1$n._)`"use strict"; ${funcSourceUrl(_,E)}`),destructureValCxtES5(t,E),t.code(S)}):t.func(n,(0,codegen_1$n._)`${names_1$3.default.data}, ${destructureValCxt(E)}`,x.$async,()=>t.code(funcSourceUrl(_,E)).code(S))}function destructureValCxt(t){return(0,codegen_1$n._)`{${names_1$3.default.instancePath}="", ${names_1$3.default.parentData}, ${names_1$3.default.parentDataProperty}, ${names_1$3.default.rootData}=${names_1$3.default.data}${t.dynamicRef?(0,codegen_1$n._)`, ${names_1$3.default.dynamicAnchors}={}`:codegen_1$n.nil}}={}`}function destructureValCxtES5(t,n){t.if(names_1$3.default.valCxt,()=>{t.var(names_1$3.default.instancePath,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.instancePath}`),t.var(names_1$3.default.parentData,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.parentData}`),t.var(names_1$3.default.parentDataProperty,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.parentDataProperty}`),t.var(names_1$3.default.rootData,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.rootData}`),n.dynamicRef&&t.var(names_1$3.default.dynamicAnchors,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.dynamicAnchors}`)},()=>{t.var(names_1$3.default.instancePath,(0,codegen_1$n._)`""`),t.var(names_1$3.default.parentData,(0,codegen_1$n._)`undefined`),t.var(names_1$3.default.parentDataProperty,(0,codegen_1$n._)`undefined`),t.var(names_1$3.default.rootData,names_1$3.default.data),n.dynamicRef&&t.var(names_1$3.default.dynamicAnchors,(0,codegen_1$n._)`{}`)})}function topSchemaObjCode(t){const{schema:n,opts:_,gen:x}=t;validateFunction(t,()=>{_.$comment&&n.$comment&&commentKeyword(t),checkNoDefault(t),x.let(names_1$3.default.vErrors,null),x.let(names_1$3.default.errors,0),_.unevaluated&&resetEvaluated(t),typeAndKeywords(t),returnResults(t)})}function resetEvaluated(t){const{gen:n,validateName:_}=t;t.evaluated=n.const("evaluated",(0,codegen_1$n._)`${_}.evaluated`),n.if((0,codegen_1$n._)`${t.evaluated}.dynamicProps`,()=>n.assign((0,codegen_1$n._)`${t.evaluated}.props`,(0,codegen_1$n._)`undefined`)),n.if((0,codegen_1$n._)`${t.evaluated}.dynamicItems`,()=>n.assign((0,codegen_1$n._)`${t.evaluated}.items`,(0,codegen_1$n._)`undefined`))}function funcSourceUrl(t,n){const _=typeof t=="object"&&t[n.schemaId];return _&&(n.code.source||n.code.process)?(0,codegen_1$n._)`/*# sourceURL=${_} */`:codegen_1$n.nil}function subschemaCode(t,n){if(isSchemaObj(t)&&(checkKeywords(t),schemaCxtHasRules(t))){subSchemaObjCode(t,n);return}(0,boolSchema_1.boolOrEmptySchema)(t,n)}function schemaCxtHasRules({schema:t,self:n}){if(typeof t=="boolean")return!t;for(const _ in t)if(n.RULES.all[_])return!0;return!1}function isSchemaObj(t){return typeof t.schema!="boolean"}function subSchemaObjCode(t,n){const{schema:_,gen:x,opts:E}=t;E.$comment&&_.$comment&&commentKeyword(t),updateContext(t),checkAsyncSchema(t);const S=x.const("_errs",names_1$3.default.errors);typeAndKeywords(t,S),x.var(n,(0,codegen_1$n._)`${S} === ${names_1$3.default.errors}`)}function checkKeywords(t){(0,util_1$l.checkUnknownRules)(t),checkRefsAndKeywords(t)}function typeAndKeywords(t,n){if(t.opts.jtd)return schemaKeywords(t,[],!1,n);const _=(0,dataType_1$1.getSchemaTypes)(t.schema),x=(0,dataType_1$1.coerceAndCheckDataType)(t,_);schemaKeywords(t,_,!x,n)}function checkRefsAndKeywords(t){const{schema:n,errSchemaPath:_,opts:x,self:E}=t;n.$ref&&x.ignoreKeywordsWithRef&&(0,util_1$l.schemaHasRulesButRef)(n,E.RULES)&&E.logger.warn(`$ref: keywords ignored in schema at path "${_}"`)}function checkNoDefault(t){const{schema:n,opts:_}=t;n.default!==void 0&&_.useDefaults&&_.strictSchema&&(0,util_1$l.checkStrictMode)(t,"default is ignored in the schema root")}function updateContext(t){const n=t.schema[t.opts.schemaId];n&&(t.baseId=(0,resolve_1$2.resolveUrl)(t.opts.uriResolver,t.baseId,n))}function checkAsyncSchema(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function commentKeyword({gen:t,schemaEnv:n,schema:_,errSchemaPath:x,opts:E}){const S=_.$comment;if(E.$comment===!0)t.code((0,codegen_1$n._)`${names_1$3.default.self}.logger.log(${S})`);else if(typeof E.$comment=="function"){const C=(0,codegen_1$n.str)`${x}/$comment`,T=t.scopeValue("root",{ref:n.root});t.code((0,codegen_1$n._)`${names_1$3.default.self}.opts.$comment(${S}, ${C}, ${T}.schema)`)}}function returnResults(t){const{gen:n,schemaEnv:_,validateName:x,ValidationError:E,opts:S}=t;_.$async?n.if((0,codegen_1$n._)`${names_1$3.default.errors} === 0`,()=>n.return(names_1$3.default.data),()=>n.throw((0,codegen_1$n._)`new ${E}(${names_1$3.default.vErrors})`)):(n.assign((0,codegen_1$n._)`${x}.errors`,names_1$3.default.vErrors),S.unevaluated&&assignEvaluated(t),n.return((0,codegen_1$n._)`${names_1$3.default.errors} === 0`))}function assignEvaluated({gen:t,evaluated:n,props:_,items:x}){_ instanceof codegen_1$n.Name&&t.assign((0,codegen_1$n._)`${n}.props`,_),x instanceof codegen_1$n.Name&&t.assign((0,codegen_1$n._)`${n}.items`,x)}function schemaKeywords(t,n,_,x){const{gen:E,schema:S,data:C,allErrors:T,opts:B,self:A}=t,{RULES:I}=A;if(S.$ref&&(B.ignoreKeywordsWithRef||!(0,util_1$l.schemaHasRulesButRef)(S,I))){E.block(()=>keywordCode(t,"$ref",I.all.$ref.definition));return}B.jtd||checkStrictTypes(t,n),E.block(()=>{for(const M of I.rules)D(M);D(I.post)});function D(M){(0,applicability_1.shouldUseGroup)(S,M)&&(M.type?(E.if((0,dataType_2.checkDataType)(M.type,C,B.strictNumbers)),iterateKeywords(t,M),n.length===1&&n[0]===M.type&&_&&(E.else(),(0,dataType_2.reportTypeError)(t)),E.endIf()):iterateKeywords(t,M),T||E.if((0,codegen_1$n._)`${names_1$3.default.errors} === ${x||0}`))}}function iterateKeywords(t,n){const{gen:_,schema:x,opts:{useDefaults:E}}=t;E&&(0,defaults_1.assignDefaults)(t,n.type),_.block(()=>{for(const S of n.rules)(0,applicability_1.shouldUseRule)(x,S)&&keywordCode(t,S.keyword,S.definition,n.type)})}function checkStrictTypes(t,n){t.schemaEnv.meta||!t.opts.strictTypes||(checkContextTypes(t,n),t.opts.allowUnionTypes||checkMultipleTypes(t,n),checkKeywordTypes(t,t.dataTypes))}function checkContextTypes(t,n){if(n.length){if(!t.dataTypes.length){t.dataTypes=n;return}n.forEach(_=>{includesType(t.dataTypes,_)||strictTypesError(t,`type "${_}" not allowed by context "${t.dataTypes.join(",")}"`)}),narrowSchemaTypes(t,n)}}function checkMultipleTypes(t,n){n.length>1&&!(n.length===2&&n.includes("null"))&&strictTypesError(t,"use allowUnionTypes to allow union type keyword")}function checkKeywordTypes(t,n){const _=t.self.RULES.all;for(const x in _){const E=_[x];if(typeof E=="object"&&(0,applicability_1.shouldUseRule)(t.schema,E)){const{type:S}=E.definition;S.length&&!S.some(C=>hasApplicableType(n,C))&&strictTypesError(t,`missing type "${S.join(",")}" for keyword "${x}"`)}}}function hasApplicableType(t,n){return t.includes(n)||n==="number"&&t.includes("integer")}function includesType(t,n){return t.includes(n)||n==="integer"&&t.includes("number")}function narrowSchemaTypes(t,n){const _=[];for(const x of t.dataTypes)includesType(n,x)?_.push(x):n.includes("integer")&&x==="number"&&_.push("integer");t.dataTypes=_}function strictTypesError(t,n){const _=t.schemaEnv.baseId+t.errSchemaPath;n+=` at "${_}" (strictTypes)`,(0,util_1$l.checkStrictMode)(t,n,t.opts.strictTypes)}class KeywordCxt{constructor(n,_,x){if((0,keyword_1.validateKeywordUsage)(n,_,x),this.gen=n.gen,this.allErrors=n.allErrors,this.keyword=x,this.data=n.data,this.schema=n.schema[x],this.$data=_.$data&&n.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,util_1$l.schemaRefOrVal)(n,this.schema,x,this.$data),this.schemaType=_.schemaType,this.parentSchema=n.schema,this.params={},this.it=n,this.def=_,this.$data)this.schemaCode=n.gen.const("vSchema",getData(this.$data,n));else if(this.schemaCode=this.schemaValue,!(0,keyword_1.validSchemaType)(this.schema,_.schemaType,_.allowUndefined))throw new Error(`${x} value must be ${JSON.stringify(_.schemaType)}`);("code"in _?_.trackErrors:_.errors!==!1)&&(this.errsCount=n.gen.const("_errs",names_1$3.default.errors))}result(n,_,x){this.failResult((0,codegen_1$n.not)(n),_,x)}failResult(n,_,x){this.gen.if(n),x?x():this.error(),_?(this.gen.else(),_(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(n,_){this.failResult((0,codegen_1$n.not)(n),void 0,_)}fail(n){if(n===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(n),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(n){if(!this.$data)return this.fail(n);const{schemaCode:_}=this;this.fail((0,codegen_1$n._)`${_} !== undefined && (${(0,codegen_1$n.or)(this.invalid$data(),n)})`)}error(n,_,x){if(_){this.setParams(_),this._error(n,x),this.setParams({});return}this._error(n,x)}_error(n,_){(n?errors_1.reportExtraError:errors_1.reportError)(this,this.def.error,_)}$dataError(){(0,errors_1.reportError)(this,this.def.$dataError||errors_1.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,errors_1.resetErrorsCount)(this.gen,this.errsCount)}ok(n){this.allErrors||this.gen.if(n)}setParams(n,_){_?Object.assign(this.params,n):this.params=n}block$data(n,_,x=codegen_1$n.nil){this.gen.block(()=>{this.check$data(n,x),_()})}check$data(n=codegen_1$n.nil,_=codegen_1$n.nil){if(!this.$data)return;const{gen:x,schemaCode:E,schemaType:S,def:C}=this;x.if((0,codegen_1$n.or)((0,codegen_1$n._)`${E} === undefined`,_)),n!==codegen_1$n.nil&&x.assign(n,!0),(S.length||C.validateSchema)&&(x.elseIf(this.invalid$data()),this.$dataError(),n!==codegen_1$n.nil&&x.assign(n,!1)),x.else()}invalid$data(){const{gen:n,schemaCode:_,schemaType:x,def:E,it:S}=this;return(0,codegen_1$n.or)(C(),T());function C(){if(x.length){if(!(_ instanceof codegen_1$n.Name))throw new Error("ajv implementation error");const B=Array.isArray(x)?x:[x];return(0,codegen_1$n._)`${(0,dataType_2.checkDataTypes)(B,_,S.opts.strictNumbers,dataType_2.DataType.Wrong)}`}return codegen_1$n.nil}function T(){if(E.validateSchema){const B=n.scopeValue("validate$data",{ref:E.validateSchema});return(0,codegen_1$n._)`!${B}(${_})`}return codegen_1$n.nil}}subschema(n,_){const x=(0,subschema_1.getSubschema)(this.it,n);(0,subschema_1.extendSubschemaData)(x,this.it,n),(0,subschema_1.extendSubschemaMode)(x,n);const E={...this.it,...x,items:void 0,props:void 0};return subschemaCode(E,_),E}mergeEvaluated(n,_){const{it:x,gen:E}=this;x.opts.unevaluated&&(x.props!==!0&&n.props!==void 0&&(x.props=util_1$l.mergeEvaluated.props(E,n.props,x.props,_)),x.items!==!0&&n.items!==void 0&&(x.items=util_1$l.mergeEvaluated.items(E,n.items,x.items,_)))}mergeValidEvaluated(n,_){const{it:x,gen:E}=this;if(x.opts.unevaluated&&(x.props!==!0||x.items!==!0))return E.if(_,()=>this.mergeEvaluated(n,codegen_1$n.Name)),!0}}validate.KeywordCxt=KeywordCxt;function keywordCode(t,n,_,x){const E=new KeywordCxt(t,_,n);"code"in _?_.code(E,x):E.$data&&_.validate?(0,keyword_1.funcKeywordCode)(E,_):"macro"in _?(0,keyword_1.macroKeywordCode)(E,_):(_.compile||_.validate)&&(0,keyword_1.funcKeywordCode)(E,_)}const JSON_POINTER=/^\/(?:[^~]|~0|~1)*$/,RELATIVE_JSON_POINTER=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData(t,{dataLevel:n,dataNames:_,dataPathArr:x}){let E,S;if(t==="")return names_1$3.default.rootData;if(t[0]==="/"){if(!JSON_POINTER.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);E=t,S=names_1$3.default.rootData}else{const A=RELATIVE_JSON_POINTER.exec(t);if(!A)throw new Error(`Invalid JSON-pointer: ${t}`);const I=+A[1];if(E=A[2],E==="#"){if(I>=n)throw new Error(B("property/index",I));return x[n-I]}if(I>n)throw new Error(B("data",I));if(S=_[n-I],!E)return S}let C=S;const T=E.split("/");for(const A of T)A&&(S=(0,codegen_1$n._)`${S}${(0,codegen_1$n.getProperty)((0,util_1$l.unescapeJsonPointer)(A))}`,C=(0,codegen_1$n._)`${C} && ${S}`);return C;function B(A,I){return`Cannot access ${A} ${I} levels up, current level is ${n}`}}validate.getData=getData;var validation_error={};Object.defineProperty(validation_error,"__esModule",{value:!0});class ValidationError extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}validation_error.default=ValidationError;var ref_error={};Object.defineProperty(ref_error,"__esModule",{value:!0});const resolve_1$1=resolve$1;class MissingRefError extends Error{constructor(n,_,x,E){super(E||`can't resolve reference ${x} from id ${_}`),this.missingRef=(0,resolve_1$1.resolveUrl)(n,_,x),this.missingSchema=(0,resolve_1$1.normalizeId)((0,resolve_1$1.getFullPath)(n,this.missingRef))}}ref_error.default=MissingRefError;var compile={};Object.defineProperty(compile,"__esModule",{value:!0});compile.resolveSchema=compile.getCompilingSchema=compile.resolveRef=compile.compileSchema=compile.SchemaEnv=void 0;const codegen_1$m=codegen,validation_error_1=validation_error,names_1$2=names$1,resolve_1=resolve$1,util_1$k=util,validate_1$1=validate;class SchemaEnv{constructor(n){var _;this.refs={},this.dynamicAnchors={};let x;typeof n.schema=="object"&&(x=n.schema),this.schema=n.schema,this.schemaId=n.schemaId,this.root=n.root||this,this.baseId=(_=n.baseId)!==null&&_!==void 0?_:(0,resolve_1.normalizeId)(x?.[n.schemaId||"$id"]),this.schemaPath=n.schemaPath,this.localRefs=n.localRefs,this.meta=n.meta,this.$async=x?.$async,this.refs={}}}compile.SchemaEnv=SchemaEnv;function compileSchema(t){const n=getCompilingSchema.call(this,t);if(n)return n;const _=(0,resolve_1.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:x,lines:E}=this.opts.code,{ownProperties:S}=this.opts,C=new codegen_1$m.CodeGen(this.scope,{es5:x,lines:E,ownProperties:S});let T;t.$async&&(T=C.scopeValue("Error",{ref:validation_error_1.default,code:(0,codegen_1$m._)`require("ajv/dist/runtime/validation_error").default`}));const B=C.scopeName("validate");t.validateName=B;const A={gen:C,allErrors:this.opts.allErrors,data:names_1$2.default.data,parentData:names_1$2.default.parentData,parentDataProperty:names_1$2.default.parentDataProperty,dataNames:[names_1$2.default.data],dataPathArr:[codegen_1$m.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:C.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,codegen_1$m.stringify)(t.schema)}:{ref:t.schema}),validateName:B,ValidationError:T,schema:t.schema,schemaEnv:t,rootId:_,baseId:t.baseId||_,schemaPath:codegen_1$m.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,codegen_1$m._)`""`,opts:this.opts,self:this};let I;try{this._compilations.add(t),(0,validate_1$1.validateFunctionCode)(A),C.optimize(this.opts.code.optimize);const D=C.toString();I=`${C.scopeRefs(names_1$2.default.scope)}return ${D}`,this.opts.code.process&&(I=this.opts.code.process(I,t));const V=new Function(`${names_1$2.default.self}`,`${names_1$2.default.scope}`,I)(this,this.scope.get());if(this.scope.value(B,{ref:V}),V.errors=null,V.schema=t.schema,V.schemaEnv=t,t.$async&&(V.$async=!0),this.opts.code.source===!0&&(V.source={validateName:B,validateCode:D,scopeValues:C._values}),this.opts.unevaluated){const{props:L,items:F}=A;V.evaluated={props:L instanceof codegen_1$m.Name?void 0:L,items:F instanceof codegen_1$m.Name?void 0:F,dynamicProps:L instanceof codegen_1$m.Name,dynamicItems:F instanceof codegen_1$m.Name},V.source&&(V.source.evaluated=(0,codegen_1$m.stringify)(V.evaluated))}return t.validate=V,t}catch(D){throw delete t.validate,delete t.validateName,I&&this.logger.error("Error compiling schema, function code:",I),D}finally{this._compilations.delete(t)}}compile.compileSchema=compileSchema;function resolveRef(t,n,_){var x;_=(0,resolve_1.resolveUrl)(this.opts.uriResolver,n,_);const E=t.refs[_];if(E)return E;let S=resolve.call(this,t,_);if(S===void 0){const C=(x=t.localRefs)===null||x===void 0?void 0:x[_],{schemaId:T}=this.opts;C&&(S=new SchemaEnv({schema:C,schemaId:T,root:t,baseId:n}))}if(S!==void 0)return t.refs[_]=inlineOrCompile.call(this,S)}compile.resolveRef=resolveRef;function inlineOrCompile(t){return(0,resolve_1.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:compileSchema.call(this,t)}function getCompilingSchema(t){for(const n of this._compilations)if(sameSchemaEnv(n,t))return n}compile.getCompilingSchema=getCompilingSchema;function sameSchemaEnv(t,n){return t.schema===n.schema&&t.root===n.root&&t.baseId===n.baseId}function resolve(t,n){let _;for(;typeof(_=this.refs[n])=="string";)n=_;return _||this.schemas[n]||resolveSchema.call(this,t,n)}function resolveSchema(t,n){const _=this.opts.uriResolver.parse(n),x=(0,resolve_1._getFullPath)(this.opts.uriResolver,_);let E=(0,resolve_1.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&x===E)return getJsonPointer.call(this,_,t);const S=(0,resolve_1.normalizeId)(x),C=this.refs[S]||this.schemas[S];if(typeof C=="string"){const T=resolveSchema.call(this,t,C);return typeof T?.schema!="object"?void 0:getJsonPointer.call(this,_,T)}if(typeof C?.schema=="object"){if(C.validate||compileSchema.call(this,C),S===(0,resolve_1.normalizeId)(n)){const{schema:T}=C,{schemaId:B}=this.opts,A=T[B];return A&&(E=(0,resolve_1.resolveUrl)(this.opts.uriResolver,E,A)),new SchemaEnv({schema:T,schemaId:B,root:t,baseId:E})}return getJsonPointer.call(this,_,C)}}compile.resolveSchema=resolveSchema;const PREVENT_SCOPE_CHANGE=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(t,{baseId:n,schema:_,root:x}){var E;if(((E=t.fragment)===null||E===void 0?void 0:E[0])!=="/")return;for(const T of t.fragment.slice(1).split("/")){if(typeof _=="boolean")return;const B=_[(0,util_1$k.unescapeFragment)(T)];if(B===void 0)return;_=B;const A=typeof _=="object"&&_[this.opts.schemaId];!PREVENT_SCOPE_CHANGE.has(T)&&A&&(n=(0,resolve_1.resolveUrl)(this.opts.uriResolver,n,A))}let S;if(typeof _!="boolean"&&_.$ref&&!(0,util_1$k.schemaHasRulesButRef)(_,this.RULES)){const T=(0,resolve_1.resolveUrl)(this.opts.uriResolver,n,_.$ref);S=resolveSchema.call(this,x,T)}const{schemaId:C}=this.opts;if(S=S||new SchemaEnv({schema:_,schemaId:C,root:x,baseId:n}),S.schema!==S.root.schema)return S}const $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$2="object",required$1=["$data"],properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$9={$id:$id$1,description,type:type$2,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1};var uri$1={},uri_all={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(t,n){(function(_,x){x(n)})(commonjsGlobal,function(_){function x(){for(var De=arguments.length,Me=Array(De),pe=0;pe<De;pe++)Me[pe]=arguments[pe];if(Me.length>1){Me[0]=Me[0].slice(0,-1);for(var ke=Me.length-1,Oe=1;Oe<ke;++Oe)Me[Oe]=Me[Oe].slice(1,-1);return Me[ke]=Me[ke].slice(1),Me.join("")}else return Me[0]}function E(De){return"(?:"+De+")"}function S(De){return De===void 0?"undefined":De===null?"null":Object.prototype.toString.call(De).split(" ").pop().split("]").shift().toLowerCase()}function C(De){return De.toUpperCase()}function T(De){return De!=null?De instanceof Array?De:typeof De.length!="number"||De.split||De.setInterval||De.call?[De]:Array.prototype.slice.call(De):[]}function B(De,Me){var pe=De;if(Me)for(var ke in Me)pe[ke]=Me[ke];return pe}function A(De){var Me="[A-Za-z]",pe="[0-9]",ke=x(pe,"[A-Fa-f]"),Oe=E(E("%[EFef]"+ke+"%"+ke+ke+"%"+ke+ke)+"|"+E("%[89A-Fa-f]"+ke+"%"+ke+ke)+"|"+E("%"+ke+ke)),Fe="[\\:\\/\\?\\#\\[\\]\\@]",ze="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Xe=x(Fe,ze),tt=De?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",it=De?"[\\uE000-\\uF8FF]":"[]",ot=x(Me,pe,"[\\-\\.\\_\\~]",tt);E(Me+x(Me,pe,"[\\+\\-\\.]")+"*"),E(E(Oe+"|"+x(ot,ze,"[\\:]"))+"*");var at=E(E("25[0-5]")+"|"+E("2[0-4]"+pe)+"|"+E("1"+pe+pe)+"|"+E("0?[1-9]"+pe)+"|0?0?"+pe),ct=E(at+"\\."+at+"\\."+at+"\\."+at),dt=E(ke+"{1,4}"),yt=E(E(dt+"\\:"+dt)+"|"+ct),Et=E(E(dt+"\\:")+"{6}"+yt),mt=E("\\:\\:"+E(dt+"\\:")+"{5}"+yt),xt=E(E(dt)+"?\\:\\:"+E(dt+"\\:")+"{4}"+yt),Mt=E(E(E(dt+"\\:")+"{0,1}"+dt)+"?\\:\\:"+E(dt+"\\:")+"{3}"+yt),Ot=E(E(E(dt+"\\:")+"{0,2}"+dt)+"?\\:\\:"+E(dt+"\\:")+"{2}"+yt),Ht=E(E(E(dt+"\\:")+"{0,3}"+dt)+"?\\:\\:"+dt+"\\:"+yt),Ft=E(E(E(dt+"\\:")+"{0,4}"+dt)+"?\\:\\:"+yt),Wt=E(E(E(dt+"\\:")+"{0,5}"+dt)+"?\\:\\:"+dt),Jt=E(E(E(dt+"\\:")+"{0,6}"+dt)+"?\\:\\:"),Kt=E([Et,mt,xt,Mt,Ot,Ht,Ft,Wt,Jt].join("|")),gt=E(E(ot+"|"+Oe)+"+");E("[vV]"+ke+"+\\."+x(ot,ze,"[\\:]")+"+"),E(E(Oe+"|"+x(ot,ze))+"*");var _t=E(Oe+"|"+x(ot,ze,"[\\:\\@]"));return E(E(Oe+"|"+x(ot,ze,"[\\@]"))+"+"),E(E(_t+"|"+x("[\\/\\?]",it))+"*"),{NOT_SCHEME:new RegExp(x("[^]",Me,pe,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(x("[^\\%\\:]",ot,ze),"g"),NOT_HOST:new RegExp(x("[^\\%\\[\\]\\:]",ot,ze),"g"),NOT_PATH:new RegExp(x("[^\\%\\/\\:\\@]",ot,ze),"g"),NOT_PATH_NOSCHEME:new RegExp(x("[^\\%\\/\\@]",ot,ze),"g"),NOT_QUERY:new RegExp(x("[^\\%]",ot,ze,"[\\:\\@\\/\\?]",it),"g"),NOT_FRAGMENT:new RegExp(x("[^\\%]",ot,ze,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(x("[^]",ot,ze),"g"),UNRESERVED:new RegExp(ot,"g"),OTHER_CHARS:new RegExp(x("[^\\%]",ot,Xe),"g"),PCT_ENCODED:new RegExp(Oe,"g"),IPV4ADDRESS:new RegExp("^("+ct+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Kt+")"+E(E("\\%25|\\%(?!"+ke+"{2})")+"("+gt+")")+"?\\]?$")}}var I=A(!1),D=A(!0),M=function(){function De(Me,pe){var ke=[],Oe=!0,Fe=!1,ze=void 0;try{for(var Xe=Me[Symbol.iterator](),tt;!(Oe=(tt=Xe.next()).done)&&(ke.push(tt.value),!(pe&&ke.length===pe));Oe=!0);}catch(it){Fe=!0,ze=it}finally{try{!Oe&&Xe.return&&Xe.return()}finally{if(Fe)throw ze}}return ke}return function(Me,pe){if(Array.isArray(Me))return Me;if(Symbol.iterator in Object(Me))return De(Me,pe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),V=function(De){if(Array.isArray(De)){for(var Me=0,pe=Array(De.length);Me<De.length;Me++)pe[Me]=De[Me];return pe}else return Array.from(De)},L=2147483647,F=36,j=1,U=26,H=38,Y=700,Z=72,ne=128,re="-",X=/^xn--/,ce=/[^\0-\x7E]/,ue=/[\x2E\u3002\uFF0E\uFF61]/g,_e={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ye=F-j,ie=Math.floor,W=String.fromCharCode;function O(De){throw new RangeError(_e[De])}function z(De,Me){for(var pe=[],ke=De.length;ke--;)pe[ke]=Me(De[ke]);return pe}function J(De,Me){var pe=De.split("@"),ke="";pe.length>1&&(ke=pe[0]+"@",De=pe[1]),De=De.replace(ue,".");var Oe=De.split("."),Fe=z(Oe,Me).join(".");return ke+Fe}function ee(De){for(var Me=[],pe=0,ke=De.length;pe<ke;){var Oe=De.charCodeAt(pe++);if(Oe>=55296&&Oe<=56319&&pe<ke){var Fe=De.charCodeAt(pe++);(Fe&64512)==56320?Me.push(((Oe&1023)<<10)+(Fe&1023)+65536):(Me.push(Oe),pe--)}else Me.push(Oe)}return Me}var ae=function(Me){return String.fromCodePoint.apply(String,V(Me))},oe=function(Me){return Me-48<10?Me-22:Me-65<26?Me-65:Me-97<26?Me-97:F},se=function(Me,pe){return Me+22+75*(Me<26)-((pe!=0)<<5)},G=function(Me,pe,ke){var Oe=0;for(Me=ke?ie(Me/Y):Me>>1,Me+=ie(Me/pe);Me>ye*U>>1;Oe+=F)Me=ie(Me/ye);return ie(Oe+(ye+1)*Me/(Me+H))},q=function(Me){var pe=[],ke=Me.length,Oe=0,Fe=ne,ze=Z,Xe=Me.lastIndexOf(re);Xe<0&&(Xe=0);for(var tt=0;tt<Xe;++tt)Me.charCodeAt(tt)>=128&&O("not-basic"),pe.push(Me.charCodeAt(tt));for(var it=Xe>0?Xe+1:0;it<ke;){for(var ot=Oe,at=1,ct=F;;ct+=F){it>=ke&&O("invalid-input");var dt=oe(Me.charCodeAt(it++));(dt>=F||dt>ie((L-Oe)/at))&&O("overflow"),Oe+=dt*at;var yt=ct<=ze?j:ct>=ze+U?U:ct-ze;if(dt<yt)break;var Et=F-yt;at>ie(L/Et)&&O("overflow"),at*=Et}var mt=pe.length+1;ze=G(Oe-ot,mt,ot==0),ie(Oe/mt)>L-Fe&&O("overflow"),Fe+=ie(Oe/mt),Oe%=mt,pe.splice(Oe++,0,Fe)}return String.fromCodePoint.apply(String,pe)},te=function(Me){var pe=[];Me=ee(Me);var ke=Me.length,Oe=ne,Fe=0,ze=Z,Xe=!0,tt=!1,it=void 0;try{for(var ot=Me[Symbol.iterator](),at;!(Xe=(at=ot.next()).done);Xe=!0){var ct=at.value;ct<128&&pe.push(W(ct))}}catch(ur){tt=!0,it=ur}finally{try{!Xe&&ot.return&&ot.return()}finally{if(tt)throw it}}var dt=pe.length,yt=dt;for(dt&&pe.push(re);yt<ke;){var Et=L,mt=!0,xt=!1,Mt=void 0;try{for(var Ot=Me[Symbol.iterator](),Ht;!(mt=(Ht=Ot.next()).done);mt=!0){var Ft=Ht.value;Ft>=Oe&&Ft<Et&&(Et=Ft)}}catch(ur){xt=!0,Mt=ur}finally{try{!mt&&Ot.return&&Ot.return()}finally{if(xt)throw Mt}}var Wt=yt+1;Et-Oe>ie((L-Fe)/Wt)&&O("overflow"),Fe+=(Et-Oe)*Wt,Oe=Et;var Jt=!0,Kt=!1,gt=void 0;try{for(var _t=Me[Symbol.iterator](),It;!(Jt=(It=_t.next()).done);Jt=!0){var At=It.value;if(At<Oe&&++Fe>L&&O("overflow"),At==Oe){for(var Vt=Fe,Xt=F;;Xt+=F){var ar=Xt<=ze?j:Xt>=ze+U?U:Xt-ze;if(Vt<ar)break;var gr=Vt-ar,yr=F-ar;pe.push(W(se(ar+gr%yr,0))),Vt=ie(gr/yr)}pe.push(W(se(Vt,0))),ze=G(Fe,Wt,yt==dt),Fe=0,++yt}}}catch(ur){Kt=!0,gt=ur}finally{try{!Jt&&_t.return&&_t.return()}finally{if(Kt)throw gt}}++Fe,++Oe}return pe.join("")},fe=function(Me){return J(Me,function(pe){return X.test(pe)?q(pe.slice(4).toLowerCase()):pe})},he=function(Me){return J(Me,function(pe){return ce.test(pe)?"xn--"+te(pe):pe})},Ee={version:"2.1.0",ucs2:{decode:ee,encode:ae},decode:q,encode:te,toASCII:he,toUnicode:fe},we={};function xe(De){var Me=De.charCodeAt(0),pe=void 0;return Me<16?pe="%0"+Me.toString(16).toUpperCase():Me<128?pe="%"+Me.toString(16).toUpperCase():Me<2048?pe="%"+(Me>>6|192).toString(16).toUpperCase()+"%"+(Me&63|128).toString(16).toUpperCase():pe="%"+(Me>>12|224).toString(16).toUpperCase()+"%"+(Me>>6&63|128).toString(16).toUpperCase()+"%"+(Me&63|128).toString(16).toUpperCase(),pe}function $e(De){for(var Me="",pe=0,ke=De.length;pe<ke;){var Oe=parseInt(De.substr(pe+1,2),16);if(Oe<128)Me+=String.fromCharCode(Oe),pe+=3;else if(Oe>=194&&Oe<224){if(ke-pe>=6){var Fe=parseInt(De.substr(pe+4,2),16);Me+=String.fromCharCode((Oe&31)<<6|Fe&63)}else Me+=De.substr(pe,6);pe+=6}else if(Oe>=224){if(ke-pe>=9){var ze=parseInt(De.substr(pe+4,2),16),Xe=parseInt(De.substr(pe+7,2),16);Me+=String.fromCharCode((Oe&15)<<12|(ze&63)<<6|Xe&63)}else Me+=De.substr(pe,9);pe+=9}else Me+=De.substr(pe,3),pe+=3}return Me}function ge(De,Me){function pe(ke){var Oe=$e(ke);return Oe.match(Me.UNRESERVED)?Oe:ke}return De.scheme&&(De.scheme=String(De.scheme).replace(Me.PCT_ENCODED,pe).toLowerCase().replace(Me.NOT_SCHEME,"")),De.userinfo!==void 0&&(De.userinfo=String(De.userinfo).replace(Me.PCT_ENCODED,pe).replace(Me.NOT_USERINFO,xe).replace(Me.PCT_ENCODED,C)),De.host!==void 0&&(De.host=String(De.host).replace(Me.PCT_ENCODED,pe).toLowerCase().replace(Me.NOT_HOST,xe).replace(Me.PCT_ENCODED,C)),De.path!==void 0&&(De.path=String(De.path).replace(Me.PCT_ENCODED,pe).replace(De.scheme?Me.NOT_PATH:Me.NOT_PATH_NOSCHEME,xe).replace(Me.PCT_ENCODED,C)),De.query!==void 0&&(De.query=String(De.query).replace(Me.PCT_ENCODED,pe).replace(Me.NOT_QUERY,xe).replace(Me.PCT_ENCODED,C)),De.fragment!==void 0&&(De.fragment=String(De.fragment).replace(Me.PCT_ENCODED,pe).replace(Me.NOT_FRAGMENT,xe).replace(Me.PCT_ENCODED,C)),De}function Se(De){return De.replace(/^0*(.*)/,"$1")||"0"}function me(De,Me){var pe=De.match(Me.IPV4ADDRESS)||[],ke=M(pe,2),Oe=ke[1];return Oe?Oe.split(".").map(Se).join("."):De}function Be(De,Me){var pe=De.match(Me.IPV6ADDRESS)||[],ke=M(pe,3),Oe=ke[1],Fe=ke[2];if(Oe){for(var ze=Oe.toLowerCase().split("::").reverse(),Xe=M(ze,2),tt=Xe[0],it=Xe[1],ot=it?it.split(":").map(Se):[],at=tt.split(":").map(Se),ct=Me.IPV4ADDRESS.test(at[at.length-1]),dt=ct?7:8,yt=at.length-dt,Et=Array(dt),mt=0;mt<dt;++mt)Et[mt]=ot[mt]||at[yt+mt]||"";ct&&(Et[dt-1]=me(Et[dt-1],Me));var xt=Et.reduce(function(Wt,Jt,Kt){if(!Jt||Jt==="0"){var gt=Wt[Wt.length-1];gt&&gt.index+gt.length===Kt?gt.length++:Wt.push({index:Kt,length:1})}return Wt},[]),Mt=xt.sort(function(Wt,Jt){return Jt.length-Wt.length})[0],Ot=void 0;if(Mt&&Mt.length>1){var Ht=Et.slice(0,Mt.index),Ft=Et.slice(Mt.index+Mt.length);Ot=Ht.join(":")+"::"+Ft.join(":")}else Ot=Et.join(":");return Fe&&(Ot+="%"+Fe),Ot}else return De}var ve=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ae="".match(/(){0}/)[1]===void 0;function Ve(De){var Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe={},ke=Me.iri!==!1?D:I;Me.reference==="suffix"&&(De=(Me.scheme?Me.scheme+":":"")+"//"+De);var Oe=De.match(ve);if(Oe){Ae?(pe.scheme=Oe[1],pe.userinfo=Oe[3],pe.host=Oe[4],pe.port=parseInt(Oe[5],10),pe.path=Oe[6]||"",pe.query=Oe[7],pe.fragment=Oe[8],isNaN(pe.port)&&(pe.port=Oe[5])):(pe.scheme=Oe[1]||void 0,pe.userinfo=De.indexOf("@")!==-1?Oe[3]:void 0,pe.host=De.indexOf("//")!==-1?Oe[4]:void 0,pe.port=parseInt(Oe[5],10),pe.path=Oe[6]||"",pe.query=De.indexOf("?")!==-1?Oe[7]:void 0,pe.fragment=De.indexOf("#")!==-1?Oe[8]:void 0,isNaN(pe.port)&&(pe.port=De.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Oe[4]:void 0)),pe.host&&(pe.host=Be(me(pe.host,ke),ke)),pe.scheme===void 0&&pe.userinfo===void 0&&pe.host===void 0&&pe.port===void 0&&!pe.path&&pe.query===void 0?pe.reference="same-document":pe.scheme===void 0?pe.reference="relative":pe.fragment===void 0?pe.reference="absolute":pe.reference="uri",Me.reference&&Me.reference!=="suffix"&&Me.reference!==pe.reference&&(pe.error=pe.error||"URI is not a "+Me.reference+" reference.");var Fe=we[(Me.scheme||pe.scheme||"").toLowerCase()];if(!Me.unicodeSupport&&(!Fe||!Fe.unicodeSupport)){if(pe.host&&(Me.domainHost||Fe&&Fe.domainHost))try{pe.host=Ee.toASCII(pe.host.replace(ke.PCT_ENCODED,$e).toLowerCase())}catch(ze){pe.error=pe.error||"Host's domain name can not be converted to ASCII via punycode: "+ze}ge(pe,I)}else ge(pe,ke);Fe&&Fe.parse&&Fe.parse(pe,Me)}else pe.error=pe.error||"URI can not be parsed.";return pe}function Pe(De,Me){var pe=Me.iri!==!1?D:I,ke=[];return De.userinfo!==void 0&&(ke.push(De.userinfo),ke.push("@")),De.host!==void 0&&ke.push(Be(me(String(De.host),pe),pe).replace(pe.IPV6ADDRESS,function(Oe,Fe,ze){return"["+Fe+(ze?"%25"+ze:"")+"]"})),(typeof De.port=="number"||typeof De.port=="string")&&(ke.push(":"),ke.push(String(De.port))),ke.length?ke.join(""):void 0}var Re=/^\.\.?\//,Ne=/^\/\.(\/|$)/,qe=/^\/\.\.(\/|$)/,Ke=/^\/?(?:.|\n)*?(?=\/|$)/;function He(De){for(var Me=[];De.length;)if(De.match(Re))De=De.replace(Re,"");else if(De.match(Ne))De=De.replace(Ne,"/");else if(De.match(qe))De=De.replace(qe,"/"),Me.pop();else if(De==="."||De==="..")De="";else{var pe=De.match(Ke);if(pe){var ke=pe[0];De=De.slice(ke.length),Me.push(ke)}else throw new Error("Unexpected dot segment condition")}return Me.join("")}function Ge(De){var Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=Me.iri?D:I,ke=[],Oe=we[(Me.scheme||De.scheme||"").toLowerCase()];if(Oe&&Oe.serialize&&Oe.serialize(De,Me),De.host&&!pe.IPV6ADDRESS.test(De.host)){if(Me.domainHost||Oe&&Oe.domainHost)try{De.host=Me.iri?Ee.toUnicode(De.host):Ee.toASCII(De.host.replace(pe.PCT_ENCODED,$e).toLowerCase())}catch(Xe){De.error=De.error||"Host's domain name can not be converted to "+(Me.iri?"Unicode":"ASCII")+" via punycode: "+Xe}}ge(De,pe),Me.reference!=="suffix"&&De.scheme&&(ke.push(De.scheme),ke.push(":"));var Fe=Pe(De,Me);if(Fe!==void 0&&(Me.reference!=="suffix"&&ke.push("//"),ke.push(Fe),De.path&&De.path.charAt(0)!=="/"&&ke.push("/")),De.path!==void 0){var ze=De.path;!Me.absolutePath&&(!Oe||!Oe.absolutePath)&&(ze=He(ze)),Fe===void 0&&(ze=ze.replace(/^\/\//,"/%2F")),ke.push(ze)}return De.query!==void 0&&(ke.push("?"),ke.push(De.query)),De.fragment!==void 0&&(ke.push("#"),ke.push(De.fragment)),ke.join("")}function rt(De,Me){var pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ke=arguments[3],Oe={};return ke||(De=Ve(Ge(De,pe),pe),Me=Ve(Ge(Me,pe),pe)),pe=pe||{},!pe.tolerant&&Me.scheme?(Oe.scheme=Me.scheme,Oe.userinfo=Me.userinfo,Oe.host=Me.host,Oe.port=Me.port,Oe.path=He(Me.path||""),Oe.query=Me.query):(Me.userinfo!==void 0||Me.host!==void 0||Me.port!==void 0?(Oe.userinfo=Me.userinfo,Oe.host=Me.host,Oe.port=Me.port,Oe.path=He(Me.path||""),Oe.query=Me.query):(Me.path?(Me.path.charAt(0)==="/"?Oe.path=He(Me.path):((De.userinfo!==void 0||De.host!==void 0||De.port!==void 0)&&!De.path?Oe.path="/"+Me.path:De.path?Oe.path=De.path.slice(0,De.path.lastIndexOf("/")+1)+Me.path:Oe.path=Me.path,Oe.path=He(Oe.path)),Oe.query=Me.query):(Oe.path=De.path,Me.query!==void 0?Oe.query=Me.query:Oe.query=De.query),Oe.userinfo=De.userinfo,Oe.host=De.host,Oe.port=De.port),Oe.scheme=De.scheme),Oe.fragment=Me.fragment,Oe}function st(De,Me,pe){var ke=B({scheme:"null"},pe);return Ge(rt(Ve(De,ke),Ve(Me,ke),ke,!0),ke)}function Je(De,Me){return typeof De=="string"?De=Ge(Ve(De,Me),Me):S(De)==="object"&&(De=Ve(Ge(De,Me),Me)),De}function Ie(De,Me,pe){return typeof De=="string"?De=Ge(Ve(De,pe),pe):S(De)==="object"&&(De=Ge(De,pe)),typeof Me=="string"?Me=Ge(Ve(Me,pe),pe):S(Me)==="object"&&(Me=Ge(Me,pe)),De===Me}function be(De,Me){return De&&De.toString().replace(!Me||!Me.iri?I.ESCAPE:D.ESCAPE,xe)}function Te(De,Me){return De&&De.toString().replace(!Me||!Me.iri?I.PCT_ENCODED:D.PCT_ENCODED,$e)}var Le={scheme:"http",domainHost:!0,parse:function(Me,pe){return Me.host||(Me.error=Me.error||"HTTP URIs must have a host."),Me},serialize:function(Me,pe){var ke=String(Me.scheme).toLowerCase()==="https";return(Me.port===(ke?443:80)||Me.port==="")&&(Me.port=void 0),Me.path||(Me.path="/"),Me}},We={scheme:"https",domainHost:Le.domainHost,parse:Le.parse,serialize:Le.serialize};function Ze(De){return typeof De.secure=="boolean"?De.secure:String(De.scheme).toLowerCase()==="wss"}var Qe={scheme:"ws",domainHost:!0,parse:function(Me,pe){var ke=Me;return ke.secure=Ze(ke),ke.resourceName=(ke.path||"/")+(ke.query?"?"+ke.query:""),ke.path=void 0,ke.query=void 0,ke},serialize:function(Me,pe){if((Me.port===(Ze(Me)?443:80)||Me.port==="")&&(Me.port=void 0),typeof Me.secure=="boolean"&&(Me.scheme=Me.secure?"wss":"ws",Me.secure=void 0),Me.resourceName){var ke=Me.resourceName.split("?"),Oe=M(ke,2),Fe=Oe[0],ze=Oe[1];Me.path=Fe&&Fe!=="/"?Fe:void 0,Me.query=ze,Me.resourceName=void 0}return Me.fragment=void 0,Me}},St={scheme:"wss",domainHost:Qe.domainHost,parse:Qe.parse,serialize:Qe.serialize},pt={},ft="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Ut="[0-9A-Fa-f]",$t=E(E("%[EFef]"+Ut+"%"+Ut+Ut+"%"+Ut+Ut)+"|"+E("%[89A-Fa-f]"+Ut+"%"+Ut+Ut)+"|"+E("%"+Ut+Ut)),Nt="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",lr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Gt=x(lr,'[\\"\\\\]'),Rt="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Qt=new RegExp(ft,"g"),Pt=new RegExp($t,"g"),kt=new RegExp(x("[^]",Nt,"[\\.]",'[\\"]',Gt),"g"),er=new RegExp(x("[^]",ft,Rt),"g"),Lt=er;function Bt(De){var Me=$e(De);return Me.match(Qt)?Me:De}var ir={scheme:"mailto",parse:function(Me,pe){var ke=Me,Oe=ke.to=ke.path?ke.path.split(","):[];if(ke.path=void 0,ke.query){for(var Fe=!1,ze={},Xe=ke.query.split("&"),tt=0,it=Xe.length;tt<it;++tt){var ot=Xe[tt].split("=");switch(ot[0]){case"to":for(var at=ot[1].split(","),ct=0,dt=at.length;ct<dt;++ct)Oe.push(at[ct]);break;case"subject":ke.subject=Te(ot[1],pe);break;case"body":ke.body=Te(ot[1],pe);break;default:Fe=!0,ze[Te(ot[0],pe)]=Te(ot[1],pe);break}}Fe&&(ke.headers=ze)}ke.query=void 0;for(var yt=0,Et=Oe.length;yt<Et;++yt){var mt=Oe[yt].split("@");if(mt[0]=Te(mt[0]),pe.unicodeSupport)mt[1]=Te(mt[1],pe).toLowerCase();else try{mt[1]=Ee.toASCII(Te(mt[1],pe).toLowerCase())}catch(xt){ke.error=ke.error||"Email address's domain name can not be converted to ASCII via punycode: "+xt}Oe[yt]=mt.join("@")}return ke},serialize:function(Me,pe){var ke=Me,Oe=T(Me.to);if(Oe){for(var Fe=0,ze=Oe.length;Fe<ze;++Fe){var Xe=String(Oe[Fe]),tt=Xe.lastIndexOf("@"),it=Xe.slice(0,tt).replace(Pt,Bt).replace(Pt,C).replace(kt,xe),ot=Xe.slice(tt+1);try{ot=pe.iri?Ee.toUnicode(ot):Ee.toASCII(Te(ot,pe).toLowerCase())}catch(yt){ke.error=ke.error||"Email address's domain name can not be converted to "+(pe.iri?"Unicode":"ASCII")+" via punycode: "+yt}Oe[Fe]=it+"@"+ot}ke.path=Oe.join(",")}var at=Me.headers=Me.headers||{};Me.subject&&(at.subject=Me.subject),Me.body&&(at.body=Me.body);var ct=[];for(var dt in at)at[dt]!==pt[dt]&&ct.push(dt.replace(Pt,Bt).replace(Pt,C).replace(er,xe)+"="+at[dt].replace(Pt,Bt).replace(Pt,C).replace(Lt,xe));return ct.length&&(ke.query=ct.join("&")),ke}},jt=/^([^\:]+)\:(.*)/,Ct={scheme:"urn",parse:function(Me,pe){var ke=Me.path&&Me.path.match(jt),Oe=Me;if(ke){var Fe=pe.scheme||Oe.scheme||"urn",ze=ke[1].toLowerCase(),Xe=ke[2],tt=Fe+":"+(pe.nid||ze),it=we[tt];Oe.nid=ze,Oe.nss=Xe,Oe.path=void 0,it&&(Oe=it.parse(Oe,pe))}else Oe.error=Oe.error||"URN can not be parsed.";return Oe},serialize:function(Me,pe){var ke=pe.scheme||Me.scheme||"urn",Oe=Me.nid,Fe=ke+":"+(pe.nid||Oe),ze=we[Fe];ze&&(Me=ze.serialize(Me,pe));var Xe=Me,tt=Me.nss;return Xe.path=(Oe||pe.nid)+":"+tt,Xe}},nr=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,je={scheme:"urn:uuid",parse:function(Me,pe){var ke=Me;return ke.uuid=ke.nss,ke.nss=void 0,!pe.tolerant&&(!ke.uuid||!ke.uuid.match(nr))&&(ke.error=ke.error||"UUID is not valid."),ke},serialize:function(Me,pe){var ke=Me;return ke.nss=(Me.uuid||"").toLowerCase(),ke}};we[Le.scheme]=Le,we[We.scheme]=We,we[Qe.scheme]=Qe,we[St.scheme]=St,we[ir.scheme]=ir,we[Ct.scheme]=Ct,we[je.scheme]=je,_.SCHEMES=we,_.pctEncChar=xe,_.pctDecChars=$e,_.parse=Ve,_.removeDotSegments=He,_.serialize=Ge,_.resolveComponents=rt,_.resolve=st,_.normalize=Je,_.equal=Ie,_.escapeComponent=be,_.unescapeComponent=Te,Object.defineProperty(_,"__esModule",{value:!0})})})(uri_all,uri_all.exports);var uri_allExports=uri_all.exports;Object.defineProperty(uri$1,"__esModule",{value:!0});const uri=uri_allExports;uri.code='require("ajv/dist/runtime/uri").default';uri$1.default=uri;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var n=validate;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var _=codegen;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return _._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return _.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return _.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return _.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return _.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return _.CodeGen}});const x=validation_error,E=ref_error,S=rules,C=compile,T=codegen,B=resolve$1,A=dataType,I=util,D=require$$9,M=uri$1,V=(se,G)=>new RegExp(se,G);V.code="new RegExp";const L=["removeAdditional","useDefaults","coerceTypes"],F=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),j={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},U={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},H=200;function Y(se){var G,q,te,fe,he,Ee,we,xe,$e,ge,Se,me,Be,ve,Ae,Ve,Pe,Re,Ne,qe,Ke,He,Ge,rt,st;const Je=se.strict,Ie=(G=se.code)===null||G===void 0?void 0:G.optimize,be=Ie===!0||Ie===void 0?1:Ie||0,Te=(te=(q=se.code)===null||q===void 0?void 0:q.regExp)!==null&&te!==void 0?te:V,Le=(fe=se.uriResolver)!==null&&fe!==void 0?fe:M.default;return{strictSchema:(Ee=(he=se.strictSchema)!==null&&he!==void 0?he:Je)!==null&&Ee!==void 0?Ee:!0,strictNumbers:(xe=(we=se.strictNumbers)!==null&&we!==void 0?we:Je)!==null&&xe!==void 0?xe:!0,strictTypes:(ge=($e=se.strictTypes)!==null&&$e!==void 0?$e:Je)!==null&&ge!==void 0?ge:"log",strictTuples:(me=(Se=se.strictTuples)!==null&&Se!==void 0?Se:Je)!==null&&me!==void 0?me:"log",strictRequired:(ve=(Be=se.strictRequired)!==null&&Be!==void 0?Be:Je)!==null&&ve!==void 0?ve:!1,code:se.code?{...se.code,optimize:be,regExp:Te}:{optimize:be,regExp:Te},loopRequired:(Ae=se.loopRequired)!==null&&Ae!==void 0?Ae:H,loopEnum:(Ve=se.loopEnum)!==null&&Ve!==void 0?Ve:H,meta:(Pe=se.meta)!==null&&Pe!==void 0?Pe:!0,messages:(Re=se.messages)!==null&&Re!==void 0?Re:!0,inlineRefs:(Ne=se.inlineRefs)!==null&&Ne!==void 0?Ne:!0,schemaId:(qe=se.schemaId)!==null&&qe!==void 0?qe:"$id",addUsedSchema:(Ke=se.addUsedSchema)!==null&&Ke!==void 0?Ke:!0,validateSchema:(He=se.validateSchema)!==null&&He!==void 0?He:!0,validateFormats:(Ge=se.validateFormats)!==null&&Ge!==void 0?Ge:!0,unicodeRegExp:(rt=se.unicodeRegExp)!==null&&rt!==void 0?rt:!0,int32range:(st=se.int32range)!==null&&st!==void 0?st:!0,uriResolver:Le}}class Z{constructor(G={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,G=this.opts={...G,...Y(G)};const{es5:q,lines:te}=this.opts.code;this.scope=new T.ValueScope({scope:{},prefixes:F,es5:q,lines:te}),this.logger=ie(G.logger);const fe=G.validateFormats;G.validateFormats=!1,this.RULES=(0,S.getRules)(),ne.call(this,j,G,"NOT SUPPORTED"),ne.call(this,U,G,"DEPRECATED","warn"),this._metaOpts=_e.call(this),G.formats&&ce.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),G.keywords&&ue.call(this,G.keywords),typeof G.meta=="object"&&this.addMetaSchema(G.meta),X.call(this),G.validateFormats=fe}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:G,meta:q,schemaId:te}=this.opts;let fe=D;te==="id"&&(fe={...D},fe.id=fe.$id,delete fe.$id),q&&G&&this.addMetaSchema(fe,fe[te],!1)}defaultMeta(){const{meta:G,schemaId:q}=this.opts;return this.opts.defaultMeta=typeof G=="object"?G[q]||G:void 0}validate(G,q){let te;if(typeof G=="string"){if(te=this.getSchema(G),!te)throw new Error(`no schema with key or ref "${G}"`)}else te=this.compile(G);const fe=te(q);return"$async"in te||(this.errors=te.errors),fe}compile(G,q){const te=this._addSchema(G,q);return te.validate||this._compileSchemaEnv(te)}compileAsync(G,q){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:te}=this.opts;return fe.call(this,G,q);async function fe(ge,Se){await he.call(this,ge.$schema);const me=this._addSchema(ge,Se);return me.validate||Ee.call(this,me)}async function he(ge){ge&&!this.getSchema(ge)&&await fe.call(this,{$ref:ge},!0)}async function Ee(ge){try{return this._compileSchemaEnv(ge)}catch(Se){if(!(Se instanceof E.default))throw Se;return we.call(this,Se),await xe.call(this,Se.missingSchema),Ee.call(this,ge)}}function we({missingSchema:ge,missingRef:Se}){if(this.refs[ge])throw new Error(`AnySchema ${ge} is loaded but ${Se} cannot be resolved`)}async function xe(ge){const Se=await $e.call(this,ge);this.refs[ge]||await he.call(this,Se.$schema),this.refs[ge]||this.addSchema(Se,ge,q)}async function $e(ge){const Se=this._loading[ge];if(Se)return Se;try{return await(this._loading[ge]=te(ge))}finally{delete this._loading[ge]}}}addSchema(G,q,te,fe=this.opts.validateSchema){if(Array.isArray(G)){for(const Ee of G)this.addSchema(Ee,void 0,te,fe);return this}let he;if(typeof G=="object"){const{schemaId:Ee}=this.opts;if(he=G[Ee],he!==void 0&&typeof he!="string")throw new Error(`schema ${Ee} must be string`)}return q=(0,B.normalizeId)(q||he),this._checkUnique(q),this.schemas[q]=this._addSchema(G,te,q,fe,!0),this}addMetaSchema(G,q,te=this.opts.validateSchema){return this.addSchema(G,q,!0,te),this}validateSchema(G,q){if(typeof G=="boolean")return!0;let te;if(te=G.$schema,te!==void 0&&typeof te!="string")throw new Error("$schema must be a string");if(te=te||this.opts.defaultMeta||this.defaultMeta(),!te)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const fe=this.validate(te,G);if(!fe&&q){const he="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(he);else throw new Error(he)}return fe}getSchema(G){let q;for(;typeof(q=re.call(this,G))=="string";)G=q;if(q===void 0){const{schemaId:te}=this.opts,fe=new C.SchemaEnv({schema:{},schemaId:te});if(q=C.resolveSchema.call(this,fe,G),!q)return;this.refs[G]=q}return q.validate||this._compileSchemaEnv(q)}removeSchema(G){if(G instanceof RegExp)return this._removeAllSchemas(this.schemas,G),this._removeAllSchemas(this.refs,G),this;switch(typeof G){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const q=re.call(this,G);return typeof q=="object"&&this._cache.delete(q.schema),delete this.schemas[G],delete this.refs[G],this}case"object":{const q=G;this._cache.delete(q);let te=G[this.opts.schemaId];return te&&(te=(0,B.normalizeId)(te),delete this.schemas[te],delete this.refs[te]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(G){for(const q of G)this.addKeyword(q);return this}addKeyword(G,q){let te;if(typeof G=="string")te=G,typeof q=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),q.keyword=te);else if(typeof G=="object"&&q===void 0){if(q=G,te=q.keyword,Array.isArray(te)&&!te.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(O.call(this,te,q),!q)return(0,I.eachItem)(te,he=>z.call(this,he)),this;ee.call(this,q);const fe={...q,type:(0,A.getJSONTypes)(q.type),schemaType:(0,A.getJSONTypes)(q.schemaType)};return(0,I.eachItem)(te,fe.type.length===0?he=>z.call(this,he,fe):he=>fe.type.forEach(Ee=>z.call(this,he,fe,Ee))),this}getKeyword(G){const q=this.RULES.all[G];return typeof q=="object"?q.definition:!!q}removeKeyword(G){const{RULES:q}=this;delete q.keywords[G],delete q.all[G];for(const te of q.rules){const fe=te.rules.findIndex(he=>he.keyword===G);fe>=0&&te.rules.splice(fe,1)}return this}addFormat(G,q){return typeof q=="string"&&(q=new RegExp(q)),this.formats[G]=q,this}errorsText(G=this.errors,{separator:q=", ",dataVar:te="data"}={}){return!G||G.length===0?"No errors":G.map(fe=>`${te}${fe.instancePath} ${fe.message}`).reduce((fe,he)=>fe+q+he)}$dataMetaSchema(G,q){const te=this.RULES.all;G=JSON.parse(JSON.stringify(G));for(const fe of q){const he=fe.split("/").slice(1);let Ee=G;for(const we of he)Ee=Ee[we];for(const we in te){const xe=te[we];if(typeof xe!="object")continue;const{$data:$e}=xe.definition,ge=Ee[we];$e&&ge&&(Ee[we]=oe(ge))}}return G}_removeAllSchemas(G,q){for(const te in G){const fe=G[te];(!q||q.test(te))&&(typeof fe=="string"?delete G[te]:fe&&!fe.meta&&(this._cache.delete(fe.schema),delete G[te]))}}_addSchema(G,q,te,fe=this.opts.validateSchema,he=this.opts.addUsedSchema){let Ee;const{schemaId:we}=this.opts;if(typeof G=="object")Ee=G[we];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof G!="boolean")throw new Error("schema must be object or boolean")}let xe=this._cache.get(G);if(xe!==void 0)return xe;te=(0,B.normalizeId)(Ee||te);const $e=B.getSchemaRefs.call(this,G,te);return xe=new C.SchemaEnv({schema:G,schemaId:we,meta:q,baseId:te,localRefs:$e}),this._cache.set(xe.schema,xe),he&&!te.startsWith("#")&&(te&&this._checkUnique(te),this.refs[te]=xe),fe&&this.validateSchema(G,!0),xe}_checkUnique(G){if(this.schemas[G]||this.refs[G])throw new Error(`schema with key or id "${G}" already exists`)}_compileSchemaEnv(G){if(G.meta?this._compileMetaSchema(G):C.compileSchema.call(this,G),!G.validate)throw new Error("ajv implementation error");return G.validate}_compileMetaSchema(G){const q=this.opts;this.opts=this._metaOpts;try{C.compileSchema.call(this,G)}finally{this.opts=q}}}t.default=Z,Z.ValidationError=x.default,Z.MissingRefError=E.default;function ne(se,G,q,te="error"){for(const fe in se){const he=fe;he in G&&this.logger[te](`${q}: option ${fe}. ${se[he]}`)}}function re(se){return se=(0,B.normalizeId)(se),this.schemas[se]||this.refs[se]}function X(){const se=this.opts.schemas;if(se)if(Array.isArray(se))this.addSchema(se);else for(const G in se)this.addSchema(se[G],G)}function ce(){for(const se in this.opts.formats){const G=this.opts.formats[se];G&&this.addFormat(se,G)}}function ue(se){if(Array.isArray(se)){this.addVocabulary(se);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const G in se){const q=se[G];q.keyword||(q.keyword=G),this.addKeyword(q)}}function _e(){const se={...this.opts};for(const G of L)delete se[G];return se}const ye={log(){},warn(){},error(){}};function ie(se){if(se===!1)return ye;if(se===void 0)return console;if(se.log&&se.warn&&se.error)return se;throw new Error("logger must implement log, warn and error methods")}const W=/^[a-z_$][a-z0-9_$:-]*$/i;function O(se,G){const{RULES:q}=this;if((0,I.eachItem)(se,te=>{if(q.keywords[te])throw new Error(`Keyword ${te} is already defined`);if(!W.test(te))throw new Error(`Keyword ${te} has invalid name`)}),!!G&&G.$data&&!("code"in G||"validate"in G))throw new Error('$data keyword must have "code" or "validate" function')}function z(se,G,q){var te;const fe=G?.post;if(q&&fe)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:he}=this;let Ee=fe?he.post:he.rules.find(({type:xe})=>xe===q);if(Ee||(Ee={type:q,rules:[]},he.rules.push(Ee)),he.keywords[se]=!0,!G)return;const we={keyword:se,definition:{...G,type:(0,A.getJSONTypes)(G.type),schemaType:(0,A.getJSONTypes)(G.schemaType)}};G.before?J.call(this,Ee,we,G.before):Ee.rules.push(we),he.all[se]=we,(te=G.implements)===null||te===void 0||te.forEach(xe=>this.addKeyword(xe))}function J(se,G,q){const te=se.rules.findIndex(fe=>fe.keyword===q);te>=0?se.rules.splice(te,0,G):(se.rules.push(G),this.logger.warn(`rule ${q} is not defined`))}function ee(se){let{metaSchema:G}=se;G!==void 0&&(se.$data&&this.opts.$data&&(G=oe(G)),se.validateSchema=this.compile(G,!0))}const ae={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function oe(se){return{anyOf:[se,ae]}}})(core$3);var draft7={},core$2={},id={};Object.defineProperty(id,"__esModule",{value:!0});const def$s={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};id.default=def$s;var ref={};Object.defineProperty(ref,"__esModule",{value:!0});ref.callRef=ref.getValidate=void 0;const ref_error_1=ref_error,code_1$8=code,codegen_1$l=codegen,names_1$1=names$1,compile_1$1=compile,util_1$j=util,def$r={keyword:"$ref",schemaType:"string",code(t){const{gen:n,schema:_,it:x}=t,{baseId:E,schemaEnv:S,validateName:C,opts:T,self:B}=x,{root:A}=S;if((_==="#"||_==="#/")&&E===A.baseId)return D();const I=compile_1$1.resolveRef.call(B,A,E,_);if(I===void 0)throw new ref_error_1.default(x.opts.uriResolver,E,_);if(I instanceof compile_1$1.SchemaEnv)return M(I);return V(I);function D(){if(S===A)return callRef(t,C,S,S.$async);const L=n.scopeValue("root",{ref:A});return callRef(t,(0,codegen_1$l._)`${L}.validate`,A,A.$async)}function M(L){const F=getValidate(t,L);callRef(t,F,L,L.$async)}function V(L){const F=n.scopeValue("schema",T.code.source===!0?{ref:L,code:(0,codegen_1$l.stringify)(L)}:{ref:L}),j=n.name("valid"),U=t.subschema({schema:L,dataTypes:[],schemaPath:codegen_1$l.nil,topSchemaRef:F,errSchemaPath:_},j);t.mergeEvaluated(U),t.ok(j)}}};function getValidate(t,n){const{gen:_}=t;return n.validate?_.scopeValue("validate",{ref:n.validate}):(0,codegen_1$l._)`${_.scopeValue("wrapper",{ref:n})}.validate`}ref.getValidate=getValidate;function callRef(t,n,_,x){const{gen:E,it:S}=t,{allErrors:C,schemaEnv:T,opts:B}=S,A=B.passContext?names_1$1.default.this:codegen_1$l.nil;x?I():D();function I(){if(!T.$async)throw new Error("async schema referenced by sync schema");const L=E.let("valid");E.try(()=>{E.code((0,codegen_1$l._)`await ${(0,code_1$8.callValidateCode)(t,n,A)}`),V(n),C||E.assign(L,!0)},F=>{E.if((0,codegen_1$l._)`!(${F} instanceof ${S.ValidationError})`,()=>E.throw(F)),M(F),C||E.assign(L,!1)}),t.ok(L)}function D(){t.result((0,code_1$8.callValidateCode)(t,n,A),()=>V(n),()=>M(n))}function M(L){const F=(0,codegen_1$l._)`${L}.errors`;E.assign(names_1$1.default.vErrors,(0,codegen_1$l._)`${names_1$1.default.vErrors} === null ? ${F} : ${names_1$1.default.vErrors}.concat(${F})`),E.assign(names_1$1.default.errors,(0,codegen_1$l._)`${names_1$1.default.vErrors}.length`)}function V(L){var F;if(!S.opts.unevaluated)return;const j=(F=_?.validate)===null||F===void 0?void 0:F.evaluated;if(S.props!==!0)if(j&&!j.dynamicProps)j.props!==void 0&&(S.props=util_1$j.mergeEvaluated.props(E,j.props,S.props));else{const U=E.var("props",(0,codegen_1$l._)`${L}.evaluated.props`);S.props=util_1$j.mergeEvaluated.props(E,U,S.props,codegen_1$l.Name)}if(S.items!==!0)if(j&&!j.dynamicItems)j.items!==void 0&&(S.items=util_1$j.mergeEvaluated.items(E,j.items,S.items));else{const U=E.var("items",(0,codegen_1$l._)`${L}.evaluated.items`);S.items=util_1$j.mergeEvaluated.items(E,U,S.items,codegen_1$l.Name)}}}ref.callRef=callRef;ref.default=def$r;Object.defineProperty(core$2,"__esModule",{value:!0});const id_1=id,ref_1=ref,core$1=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",id_1.default,ref_1.default];core$2.default=core$1;var validation$1={},limitNumber={};Object.defineProperty(limitNumber,"__esModule",{value:!0});const codegen_1$k=codegen,ops=codegen_1$k.operators,KWDs={maximum:{okStr:"<=",ok:ops.LTE,fail:ops.GT},minimum:{okStr:">=",ok:ops.GTE,fail:ops.LT},exclusiveMaximum:{okStr:"<",ok:ops.LT,fail:ops.GTE},exclusiveMinimum:{okStr:">",ok:ops.GT,fail:ops.LTE}},error$i={message:({keyword:t,schemaCode:n})=>(0,codegen_1$k.str)`must be ${KWDs[t].okStr} ${n}`,params:({keyword:t,schemaCode:n})=>(0,codegen_1$k._)`{comparison: ${KWDs[t].okStr}, limit: ${n}}`},def$q={keyword:Object.keys(KWDs),type:"number",schemaType:"number",$data:!0,error:error$i,code(t){const{keyword:n,data:_,schemaCode:x}=t;t.fail$data((0,codegen_1$k._)`${_} ${KWDs[n].fail} ${x} || isNaN(${_})`)}};limitNumber.default=def$q;var multipleOf={};Object.defineProperty(multipleOf,"__esModule",{value:!0});const codegen_1$j=codegen,error$h={message:({schemaCode:t})=>(0,codegen_1$j.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,codegen_1$j._)`{multipleOf: ${t}}`},def$p={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:error$h,code(t){const{gen:n,data:_,schemaCode:x,it:E}=t,S=E.opts.multipleOfPrecision,C=n.let("res"),T=S?(0,codegen_1$j._)`Math.abs(Math.round(${C}) - ${C}) > 1e-${S}`:(0,codegen_1$j._)`${C} !== parseInt(${C})`;t.fail$data((0,codegen_1$j._)`(${x} === 0 || (${C} = ${_}/${x}, ${T}))`)}};multipleOf.default=def$p;var limitLength={},ucs2length$1={};Object.defineProperty(ucs2length$1,"__esModule",{value:!0});function ucs2length(t){const n=t.length;let _=0,x=0,E;for(;x<n;)_++,E=t.charCodeAt(x++),E>=55296&&E<=56319&&x<n&&(E=t.charCodeAt(x),(E&64512)===56320&&x++);return _}ucs2length$1.default=ucs2length;ucs2length.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(limitLength,"__esModule",{value:!0});const codegen_1$i=codegen,util_1$i=util,ucs2length_1=ucs2length$1,error$g={message({keyword:t,schemaCode:n}){const _=t==="maxLength"?"more":"fewer";return(0,codegen_1$i.str)`must NOT have ${_} than ${n} characters`},params:({schemaCode:t})=>(0,codegen_1$i._)`{limit: ${t}}`},def$o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:error$g,code(t){const{keyword:n,data:_,schemaCode:x,it:E}=t,S=n==="maxLength"?codegen_1$i.operators.GT:codegen_1$i.operators.LT,C=E.opts.unicode===!1?(0,codegen_1$i._)`${_}.length`:(0,codegen_1$i._)`${(0,util_1$i.useFunc)(t.gen,ucs2length_1.default)}(${_})`;t.fail$data((0,codegen_1$i._)`${C} ${S} ${x}`)}};limitLength.default=def$o;var pattern={};Object.defineProperty(pattern,"__esModule",{value:!0});const code_1$7=code,codegen_1$h=codegen,error$f={message:({schemaCode:t})=>(0,codegen_1$h.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,codegen_1$h._)`{pattern: ${t}}`},def$n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:error$f,code(t){const{data:n,$data:_,schema:x,schemaCode:E,it:S}=t,C=S.opts.unicodeRegExp?"u":"",T=_?(0,codegen_1$h._)`(new RegExp(${E}, ${C}))`:(0,code_1$7.usePattern)(t,x);t.fail$data((0,codegen_1$h._)`!${T}.test(${n})`)}};pattern.default=def$n;var limitProperties={};Object.defineProperty(limitProperties,"__esModule",{value:!0});const codegen_1$g=codegen,error$e={message({keyword:t,schemaCode:n}){const _=t==="maxProperties"?"more":"fewer";return(0,codegen_1$g.str)`must NOT have ${_} than ${n} properties`},params:({schemaCode:t})=>(0,codegen_1$g._)`{limit: ${t}}`},def$m={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:error$e,code(t){const{keyword:n,data:_,schemaCode:x}=t,E=n==="maxProperties"?codegen_1$g.operators.GT:codegen_1$g.operators.LT;t.fail$data((0,codegen_1$g._)`Object.keys(${_}).length ${E} ${x}`)}};limitProperties.default=def$m;var required={};Object.defineProperty(required,"__esModule",{value:!0});const code_1$6=code,codegen_1$f=codegen,util_1$h=util,error$d={message:({params:{missingProperty:t}})=>(0,codegen_1$f.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,codegen_1$f._)`{missingProperty: ${t}}`},def$l={keyword:"required",type:"object",schemaType:"array",$data:!0,error:error$d,code(t){const{gen:n,schema:_,schemaCode:x,data:E,$data:S,it:C}=t,{opts:T}=C;if(!S&&_.length===0)return;const B=_.length>=T.loopRequired;if(C.allErrors?A():I(),T.strictRequired){const V=t.parentSchema.properties,{definedProperties:L}=t.it;for(const F of _)if(V?.[F]===void 0&&!L.has(F)){const j=C.schemaEnv.baseId+C.errSchemaPath,U=`required property "${F}" is not defined at "${j}" (strictRequired)`;(0,util_1$h.checkStrictMode)(C,U,C.opts.strictRequired)}}function A(){if(B||S)t.block$data(codegen_1$f.nil,D);else for(const V of _)(0,code_1$6.checkReportMissingProp)(t,V)}function I(){const V=n.let("missing");if(B||S){const L=n.let("valid",!0);t.block$data(L,()=>M(V,L)),t.ok(L)}else n.if((0,code_1$6.checkMissingProp)(t,_,V)),(0,code_1$6.reportMissingProp)(t,V),n.else()}function D(){n.forOf("prop",x,V=>{t.setParams({missingProperty:V}),n.if((0,code_1$6.noPropertyInData)(n,E,V,T.ownProperties),()=>t.error())})}function M(V,L){t.setParams({missingProperty:V}),n.forOf(V,x,()=>{n.assign(L,(0,code_1$6.propertyInData)(n,E,V,T.ownProperties)),n.if((0,codegen_1$f.not)(L),()=>{t.error(),n.break()})},codegen_1$f.nil)}}};required.default=def$l;var limitItems={};Object.defineProperty(limitItems,"__esModule",{value:!0});const codegen_1$e=codegen,error$c={message({keyword:t,schemaCode:n}){const _=t==="maxItems"?"more":"fewer";return(0,codegen_1$e.str)`must NOT have ${_} than ${n} items`},params:({schemaCode:t})=>(0,codegen_1$e._)`{limit: ${t}}`},def$k={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:error$c,code(t){const{keyword:n,data:_,schemaCode:x}=t,E=n==="maxItems"?codegen_1$e.operators.GT:codegen_1$e.operators.LT;t.fail$data((0,codegen_1$e._)`${_}.length ${E} ${x}`)}};limitItems.default=def$k;var uniqueItems={},equal$1={};Object.defineProperty(equal$1,"__esModule",{value:!0});const equal=fastDeepEqual;equal.code='require("ajv/dist/runtime/equal").default';equal$1.default=equal;Object.defineProperty(uniqueItems,"__esModule",{value:!0});const dataType_1=dataType,codegen_1$d=codegen,util_1$g=util,equal_1$2=equal$1,error$b={message:({params:{i:t,j:n}})=>(0,codegen_1$d.str)`must NOT have duplicate items (items ## ${n} and ${t} are identical)`,params:({params:{i:t,j:n}})=>(0,codegen_1$d._)`{i: ${t}, j: ${n}}`},def$j={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:error$b,code(t){const{gen:n,data:_,$data:x,schema:E,parentSchema:S,schemaCode:C,it:T}=t;if(!x&&!E)return;const B=n.let("valid"),A=S.items?(0,dataType_1.getSchemaTypes)(S.items):[];t.block$data(B,I,(0,codegen_1$d._)`${C} === false`),t.ok(B);function I(){const L=n.let("i",(0,codegen_1$d._)`${_}.length`),F=n.let("j");t.setParams({i:L,j:F}),n.assign(B,!0),n.if((0,codegen_1$d._)`${L} > 1`,()=>(D()?M:V)(L,F))}function D(){return A.length>0&&!A.some(L=>L==="object"||L==="array")}function M(L,F){const j=n.name("item"),U=(0,dataType_1.checkDataTypes)(A,j,T.opts.strictNumbers,dataType_1.DataType.Wrong),H=n.const("indices",(0,codegen_1$d._)`{}`);n.for((0,codegen_1$d._)`;${L}--;`,()=>{n.let(j,(0,codegen_1$d._)`${_}[${L}]`),n.if(U,(0,codegen_1$d._)`continue`),A.length>1&&n.if((0,codegen_1$d._)`typeof ${j} == "string"`,(0,codegen_1$d._)`${j} += "_"`),n.if((0,codegen_1$d._)`typeof ${H}[${j}] == "number"`,()=>{n.assign(F,(0,codegen_1$d._)`${H}[${j}]`),t.error(),n.assign(B,!1).break()}).code((0,codegen_1$d._)`${H}[${j}] = ${L}`)})}function V(L,F){const j=(0,util_1$g.useFunc)(n,equal_1$2.default),U=n.name("outer");n.label(U).for((0,codegen_1$d._)`;${L}--;`,()=>n.for((0,codegen_1$d._)`${F} = ${L}; ${F}--;`,()=>n.if((0,codegen_1$d._)`${j}(${_}[${L}], ${_}[${F}])`,()=>{t.error(),n.assign(B,!1).break(U)})))}}};uniqueItems.default=def$j;var _const={};Object.defineProperty(_const,"__esModule",{value:!0});const codegen_1$c=codegen,util_1$f=util,equal_1$1=equal$1,error$a={message:"must be equal to constant",params:({schemaCode:t})=>(0,codegen_1$c._)`{allowedValue: ${t}}`},def$i={keyword:"const",$data:!0,error:error$a,code(t){const{gen:n,data:_,$data:x,schemaCode:E,schema:S}=t;x||S&&typeof S=="object"?t.fail$data((0,codegen_1$c._)`!${(0,util_1$f.useFunc)(n,equal_1$1.default)}(${_}, ${E})`):t.fail((0,codegen_1$c._)`${S} !== ${_}`)}};_const.default=def$i;var _enum={};Object.defineProperty(_enum,"__esModule",{value:!0});const codegen_1$b=codegen,util_1$e=util,equal_1=equal$1,error$9={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,codegen_1$b._)`{allowedValues: ${t}}`},def$h={keyword:"enum",schemaType:"array",$data:!0,error:error$9,code(t){const{gen:n,data:_,$data:x,schema:E,schemaCode:S,it:C}=t;if(!x&&E.length===0)throw new Error("enum must have non-empty array");const T=E.length>=C.opts.loopEnum;let B;const A=()=>B??(B=(0,util_1$e.useFunc)(n,equal_1.default));let I;if(T||x)I=n.let("valid"),t.block$data(I,D);else{if(!Array.isArray(E))throw new Error("ajv implementation error");const V=n.const("vSchema",S);I=(0,codegen_1$b.or)(...E.map((L,F)=>M(V,F)))}t.pass(I);function D(){n.assign(I,!1),n.forOf("v",S,V=>n.if((0,codegen_1$b._)`${A()}(${_}, ${V})`,()=>n.assign(I,!0).break()))}function M(V,L){const F=E[L];return typeof F=="object"&&F!==null?(0,codegen_1$b._)`${A()}(${_}, ${V}[${L}])`:(0,codegen_1$b._)`${_} === ${F}`}}};_enum.default=def$h;Object.defineProperty(validation$1,"__esModule",{value:!0});const limitNumber_1=limitNumber,multipleOf_1=multipleOf,limitLength_1=limitLength,pattern_1=pattern,limitProperties_1=limitProperties,required_1=required,limitItems_1=limitItems,uniqueItems_1=uniqueItems,const_1=_const,enum_1=_enum,validation=[limitNumber_1.default,multipleOf_1.default,limitLength_1.default,pattern_1.default,limitProperties_1.default,required_1.default,limitItems_1.default,uniqueItems_1.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},const_1.default,enum_1.default];validation$1.default=validation;var applicator={},additionalItems={};Object.defineProperty(additionalItems,"__esModule",{value:!0});additionalItems.validateAdditionalItems=void 0;const codegen_1$a=codegen,util_1$d=util,error$8={message:({params:{len:t}})=>(0,codegen_1$a.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,codegen_1$a._)`{limit: ${t}}`},def$g={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:error$8,code(t){const{parentSchema:n,it:_}=t,{items:x}=n;if(!Array.isArray(x)){(0,util_1$d.checkStrictMode)(_,'"additionalItems" is ignored when "items" is not an array of schemas');return}validateAdditionalItems(t,x)}};function validateAdditionalItems(t,n){const{gen:_,schema:x,data:E,keyword:S,it:C}=t;C.items=!0;const T=_.const("len",(0,codegen_1$a._)`${E}.length`);if(x===!1)t.setParams({len:n.length}),t.pass((0,codegen_1$a._)`${T} <= ${n.length}`);else if(typeof x=="object"&&!(0,util_1$d.alwaysValidSchema)(C,x)){const A=_.var("valid",(0,codegen_1$a._)`${T} <= ${n.length}`);_.if((0,codegen_1$a.not)(A),()=>B(A)),t.ok(A)}function B(A){_.forRange("i",n.length,T,I=>{t.subschema({keyword:S,dataProp:I,dataPropType:util_1$d.Type.Num},A),C.allErrors||_.if((0,codegen_1$a.not)(A),()=>_.break())})}}additionalItems.validateAdditionalItems=validateAdditionalItems;additionalItems.default=def$g;var prefixItems={},items={};Object.defineProperty(items,"__esModule",{value:!0});items.validateTuple=void 0;const codegen_1$9=codegen,util_1$c=util,code_1$5=code,def$f={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:n,it:_}=t;if(Array.isArray(n))return validateTuple(t,"additionalItems",n);_.items=!0,!(0,util_1$c.alwaysValidSchema)(_,n)&&t.ok((0,code_1$5.validateArray)(t))}};function validateTuple(t,n,_=t.schema){const{gen:x,parentSchema:E,data:S,keyword:C,it:T}=t;I(E),T.opts.unevaluated&&_.length&&T.items!==!0&&(T.items=util_1$c.mergeEvaluated.items(x,_.length,T.items));const B=x.name("valid"),A=x.const("len",(0,codegen_1$9._)`${S}.length`);_.forEach((D,M)=>{(0,util_1$c.alwaysValidSchema)(T,D)||(x.if((0,codegen_1$9._)`${A} > ${M}`,()=>t.subschema({keyword:C,schemaProp:M,dataProp:M},B)),t.ok(B))});function I(D){const{opts:M,errSchemaPath:V}=T,L=_.length,F=L===D.minItems&&(L===D.maxItems||D[n]===!1);if(M.strictTuples&&!F){const j=`"${C}" is ${L}-tuple, but minItems or maxItems/${n} are not specified or different at path "${V}"`;(0,util_1$c.checkStrictMode)(T,j,M.strictTuples)}}}items.validateTuple=validateTuple;items.default=def$f;Object.defineProperty(prefixItems,"__esModule",{value:!0});const items_1$1=items,def$e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,items_1$1.validateTuple)(t,"items")};prefixItems.default=def$e;var items2020={};Object.defineProperty(items2020,"__esModule",{value:!0});const codegen_1$8=codegen,util_1$b=util,code_1$4=code,additionalItems_1$1=additionalItems,error$7={message:({params:{len:t}})=>(0,codegen_1$8.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,codegen_1$8._)`{limit: ${t}}`},def$d={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:error$7,code(t){const{schema:n,parentSchema:_,it:x}=t,{prefixItems:E}=_;x.items=!0,!(0,util_1$b.alwaysValidSchema)(x,n)&&(E?(0,additionalItems_1$1.validateAdditionalItems)(t,E):t.ok((0,code_1$4.validateArray)(t)))}};items2020.default=def$d;var contains={};Object.defineProperty(contains,"__esModule",{value:!0});const codegen_1$7=codegen,util_1$a=util,error$6={message:({params:{min:t,max:n}})=>n===void 0?(0,codegen_1$7.str)`must contain at least ${t} valid item(s)`:(0,codegen_1$7.str)`must contain at least ${t} and no more than ${n} valid item(s)`,params:({params:{min:t,max:n}})=>n===void 0?(0,codegen_1$7._)`{minContains: ${t}}`:(0,codegen_1$7._)`{minContains: ${t}, maxContains: ${n}}`},def$c={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:error$6,code(t){const{gen:n,schema:_,parentSchema:x,data:E,it:S}=t;let C,T;const{minContains:B,maxContains:A}=x;S.opts.next?(C=B===void 0?1:B,T=A):C=1;const I=n.const("len",(0,codegen_1$7._)`${E}.length`);if(t.setParams({min:C,max:T}),T===void 0&&C===0){(0,util_1$a.checkStrictMode)(S,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(T!==void 0&&C>T){(0,util_1$a.checkStrictMode)(S,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,util_1$a.alwaysValidSchema)(S,_)){let F=(0,codegen_1$7._)`${I} >= ${C}`;T!==void 0&&(F=(0,codegen_1$7._)`${F} && ${I} <= ${T}`),t.pass(F);return}S.items=!0;const D=n.name("valid");T===void 0&&C===1?V(D,()=>n.if(D,()=>n.break())):C===0?(n.let(D,!0),T!==void 0&&n.if((0,codegen_1$7._)`${E}.length > 0`,M)):(n.let(D,!1),M()),t.result(D,()=>t.reset());function M(){const F=n.name("_valid"),j=n.let("count",0);V(F,()=>n.if(F,()=>L(j)))}function V(F,j){n.forRange("i",0,I,U=>{t.subschema({keyword:"contains",dataProp:U,dataPropType:util_1$a.Type.Num,compositeRule:!0},F),j()})}function L(F){n.code((0,codegen_1$7._)`${F}++`),T===void 0?n.if((0,codegen_1$7._)`${F} >= ${C}`,()=>n.assign(D,!0).break()):(n.if((0,codegen_1$7._)`${F} > ${T}`,()=>n.assign(D,!1).break()),C===1?n.assign(D,!0):n.if((0,codegen_1$7._)`${F} >= ${C}`,()=>n.assign(D,!0)))}}};contains.default=def$c;var dependencies={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const n=codegen,_=util,x=code;t.error={message:({params:{property:B,depsCount:A,deps:I}})=>{const D=A===1?"property":"properties";return(0,n.str)`must have ${D} ${I} when property ${B} is present`},params:({params:{property:B,depsCount:A,deps:I,missingProperty:D}})=>(0,n._)`{property: ${B},
    missingProperty: ${D},
    depsCount: ${A},
    deps: ${I}}`};const E={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(B){const[A,I]=S(B);C(B,A),T(B,I)}};function S({schema:B}){const A={},I={};for(const D in B){if(D==="__proto__")continue;const M=Array.isArray(B[D])?A:I;M[D]=B[D]}return[A,I]}function C(B,A=B.schema){const{gen:I,data:D,it:M}=B;if(Object.keys(A).length===0)return;const V=I.let("missing");for(const L in A){const F=A[L];if(F.length===0)continue;const j=(0,x.propertyInData)(I,D,L,M.opts.ownProperties);B.setParams({property:L,depsCount:F.length,deps:F.join(", ")}),M.allErrors?I.if(j,()=>{for(const U of F)(0,x.checkReportMissingProp)(B,U)}):(I.if((0,n._)`${j} && (${(0,x.checkMissingProp)(B,F,V)})`),(0,x.reportMissingProp)(B,V),I.else())}}t.validatePropertyDeps=C;function T(B,A=B.schema){const{gen:I,data:D,keyword:M,it:V}=B,L=I.name("valid");for(const F in A)(0,_.alwaysValidSchema)(V,A[F])||(I.if((0,x.propertyInData)(I,D,F,V.opts.ownProperties),()=>{const j=B.subschema({keyword:M,schemaProp:F},L);B.mergeValidEvaluated(j,L)},()=>I.var(L,!0)),B.ok(L))}t.validateSchemaDeps=T,t.default=E})(dependencies);var propertyNames={};Object.defineProperty(propertyNames,"__esModule",{value:!0});const codegen_1$6=codegen,util_1$9=util,error$5={message:"property name must be valid",params:({params:t})=>(0,codegen_1$6._)`{propertyName: ${t.propertyName}}`},def$b={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:error$5,code(t){const{gen:n,schema:_,data:x,it:E}=t;if((0,util_1$9.alwaysValidSchema)(E,_))return;const S=n.name("valid");n.forIn("key",x,C=>{t.setParams({propertyName:C}),t.subschema({keyword:"propertyNames",data:C,dataTypes:["string"],propertyName:C,compositeRule:!0},S),n.if((0,codegen_1$6.not)(S),()=>{t.error(!0),E.allErrors||n.break()})}),t.ok(S)}};propertyNames.default=def$b;var additionalProperties={};Object.defineProperty(additionalProperties,"__esModule",{value:!0});const code_1$3=code,codegen_1$5=codegen,names_1=names$1,util_1$8=util,error$4={message:"must NOT have additional properties",params:({params:t})=>(0,codegen_1$5._)`{additionalProperty: ${t.additionalProperty}}`},def$a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:error$4,code(t){const{gen:n,schema:_,parentSchema:x,data:E,errsCount:S,it:C}=t;if(!S)throw new Error("ajv implementation error");const{allErrors:T,opts:B}=C;if(C.props=!0,B.removeAdditional!=="all"&&(0,util_1$8.alwaysValidSchema)(C,_))return;const A=(0,code_1$3.allSchemaProperties)(x.properties),I=(0,code_1$3.allSchemaProperties)(x.patternProperties);D(),t.ok((0,codegen_1$5._)`${S} === ${names_1.default.errors}`);function D(){n.forIn("key",E,j=>{!A.length&&!I.length?L(j):n.if(M(j),()=>L(j))})}function M(j){let U;if(A.length>8){const H=(0,util_1$8.schemaRefOrVal)(C,x.properties,"properties");U=(0,code_1$3.isOwnProperty)(n,H,j)}else A.length?U=(0,codegen_1$5.or)(...A.map(H=>(0,codegen_1$5._)`${j} === ${H}`)):U=codegen_1$5.nil;return I.length&&(U=(0,codegen_1$5.or)(U,...I.map(H=>(0,codegen_1$5._)`${(0,code_1$3.usePattern)(t,H)}.test(${j})`))),(0,codegen_1$5.not)(U)}function V(j){n.code((0,codegen_1$5._)`delete ${E}[${j}]`)}function L(j){if(B.removeAdditional==="all"||B.removeAdditional&&_===!1){V(j);return}if(_===!1){t.setParams({additionalProperty:j}),t.error(),T||n.break();return}if(typeof _=="object"&&!(0,util_1$8.alwaysValidSchema)(C,_)){const U=n.name("valid");B.removeAdditional==="failing"?(F(j,U,!1),n.if((0,codegen_1$5.not)(U),()=>{t.reset(),V(j)})):(F(j,U),T||n.if((0,codegen_1$5.not)(U),()=>n.break()))}}function F(j,U,H){const Y={keyword:"additionalProperties",dataProp:j,dataPropType:util_1$8.Type.Str};H===!1&&Object.assign(Y,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(Y,U)}}};additionalProperties.default=def$a;var properties$1={};Object.defineProperty(properties$1,"__esModule",{value:!0});const validate_1=validate,code_1$2=code,util_1$7=util,additionalProperties_1$1=additionalProperties,def$9={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:n,schema:_,parentSchema:x,data:E,it:S}=t;S.opts.removeAdditional==="all"&&x.additionalProperties===void 0&&additionalProperties_1$1.default.code(new validate_1.KeywordCxt(S,additionalProperties_1$1.default,"additionalProperties"));const C=(0,code_1$2.allSchemaProperties)(_);for(const D of C)S.definedProperties.add(D);S.opts.unevaluated&&C.length&&S.props!==!0&&(S.props=util_1$7.mergeEvaluated.props(n,(0,util_1$7.toHash)(C),S.props));const T=C.filter(D=>!(0,util_1$7.alwaysValidSchema)(S,_[D]));if(T.length===0)return;const B=n.name("valid");for(const D of T)A(D)?I(D):(n.if((0,code_1$2.propertyInData)(n,E,D,S.opts.ownProperties)),I(D),S.allErrors||n.else().var(B,!0),n.endIf()),t.it.definedProperties.add(D),t.ok(B);function A(D){return S.opts.useDefaults&&!S.compositeRule&&_[D].default!==void 0}function I(D){t.subschema({keyword:"properties",schemaProp:D,dataProp:D},B)}}};properties$1.default=def$9;var patternProperties={};Object.defineProperty(patternProperties,"__esModule",{value:!0});const code_1$1=code,codegen_1$4=codegen,util_1$6=util,util_2=util,def$8={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:n,schema:_,data:x,parentSchema:E,it:S}=t,{opts:C}=S,T=(0,code_1$1.allSchemaProperties)(_),B=T.filter(F=>(0,util_1$6.alwaysValidSchema)(S,_[F]));if(T.length===0||B.length===T.length&&(!S.opts.unevaluated||S.props===!0))return;const A=C.strictSchema&&!C.allowMatchingProperties&&E.properties,I=n.name("valid");S.props!==!0&&!(S.props instanceof codegen_1$4.Name)&&(S.props=(0,util_2.evaluatedPropsToName)(n,S.props));const{props:D}=S;M();function M(){for(const F of T)A&&V(F),S.allErrors?L(F):(n.var(I,!0),L(F),n.if(I))}function V(F){for(const j in A)new RegExp(F).test(j)&&(0,util_1$6.checkStrictMode)(S,`property ${j} matches pattern ${F} (use allowMatchingProperties)`)}function L(F){n.forIn("key",x,j=>{n.if((0,codegen_1$4._)`${(0,code_1$1.usePattern)(t,F)}.test(${j})`,()=>{const U=B.includes(F);U||t.subschema({keyword:"patternProperties",schemaProp:F,dataProp:j,dataPropType:util_2.Type.Str},I),S.opts.unevaluated&&D!==!0?n.assign((0,codegen_1$4._)`${D}[${j}]`,!0):!U&&!S.allErrors&&n.if((0,codegen_1$4.not)(I),()=>n.break())})})}}};patternProperties.default=def$8;var not={};Object.defineProperty(not,"__esModule",{value:!0});const util_1$5=util,def$7={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:n,schema:_,it:x}=t;if((0,util_1$5.alwaysValidSchema)(x,_)){t.fail();return}const E=n.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},E),t.failResult(E,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};not.default=def$7;var anyOf={};Object.defineProperty(anyOf,"__esModule",{value:!0});const code_1=code,def$6={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:code_1.validateUnion,error:{message:"must match a schema in anyOf"}};anyOf.default=def$6;var oneOf={};Object.defineProperty(oneOf,"__esModule",{value:!0});const codegen_1$3=codegen,util_1$4=util,error$3={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,codegen_1$3._)`{passingSchemas: ${t.passing}}`},def$5={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:error$3,code(t){const{gen:n,schema:_,parentSchema:x,it:E}=t;if(!Array.isArray(_))throw new Error("ajv implementation error");if(E.opts.discriminator&&x.discriminator)return;const S=_,C=n.let("valid",!1),T=n.let("passing",null),B=n.name("_valid");t.setParams({passing:T}),n.block(A),t.result(C,()=>t.reset(),()=>t.error(!0));function A(){S.forEach((I,D)=>{let M;(0,util_1$4.alwaysValidSchema)(E,I)?n.var(B,!0):M=t.subschema({keyword:"oneOf",schemaProp:D,compositeRule:!0},B),D>0&&n.if((0,codegen_1$3._)`${B} && ${C}`).assign(C,!1).assign(T,(0,codegen_1$3._)`[${T}, ${D}]`).else(),n.if(B,()=>{n.assign(C,!0),n.assign(T,D),M&&t.mergeEvaluated(M,codegen_1$3.Name)})})}}};oneOf.default=def$5;var allOf={};Object.defineProperty(allOf,"__esModule",{value:!0});const util_1$3=util,def$4={keyword:"allOf",schemaType:"array",code(t){const{gen:n,schema:_,it:x}=t;if(!Array.isArray(_))throw new Error("ajv implementation error");const E=n.name("valid");_.forEach((S,C)=>{if((0,util_1$3.alwaysValidSchema)(x,S))return;const T=t.subschema({keyword:"allOf",schemaProp:C},E);t.ok(E),t.mergeEvaluated(T)})}};allOf.default=def$4;var _if={};Object.defineProperty(_if,"__esModule",{value:!0});const codegen_1$2=codegen,util_1$2=util,error$2={message:({params:t})=>(0,codegen_1$2.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,codegen_1$2._)`{failingKeyword: ${t.ifClause}}`},def$3={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:error$2,code(t){const{gen:n,parentSchema:_,it:x}=t;_.then===void 0&&_.else===void 0&&(0,util_1$2.checkStrictMode)(x,'"if" without "then" and "else" is ignored');const E=hasSchema(x,"then"),S=hasSchema(x,"else");if(!E&&!S)return;const C=n.let("valid",!0),T=n.name("_valid");if(B(),t.reset(),E&&S){const I=n.let("ifClause");t.setParams({ifClause:I}),n.if(T,A("then",I),A("else",I))}else E?n.if(T,A("then")):n.if((0,codegen_1$2.not)(T),A("else"));t.pass(C,()=>t.error(!0));function B(){const I=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},T);t.mergeEvaluated(I)}function A(I,D){return()=>{const M=t.subschema({keyword:I},T);n.assign(C,T),t.mergeValidEvaluated(M,C),D?n.assign(D,(0,codegen_1$2._)`${I}`):t.setParams({ifClause:I})}}}};function hasSchema(t,n){const _=t.schema[n];return _!==void 0&&!(0,util_1$2.alwaysValidSchema)(t,_)}_if.default=def$3;var thenElse={};Object.defineProperty(thenElse,"__esModule",{value:!0});const util_1$1=util,def$2={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:n,it:_}){n.if===void 0&&(0,util_1$1.checkStrictMode)(_,`"${t}" without "if" is ignored`)}};thenElse.default=def$2;Object.defineProperty(applicator,"__esModule",{value:!0});const additionalItems_1=additionalItems,prefixItems_1=prefixItems,items_1=items,items2020_1=items2020,contains_1=contains,dependencies_1=dependencies,propertyNames_1=propertyNames,additionalProperties_1=additionalProperties,properties_1=properties$1,patternProperties_1=patternProperties,not_1=not,anyOf_1=anyOf,oneOf_1=oneOf,allOf_1=allOf,if_1=_if,thenElse_1=thenElse;function getApplicator(t=!1){const n=[not_1.default,anyOf_1.default,oneOf_1.default,allOf_1.default,if_1.default,thenElse_1.default,propertyNames_1.default,additionalProperties_1.default,dependencies_1.default,properties_1.default,patternProperties_1.default];return t?n.push(prefixItems_1.default,items2020_1.default):n.push(additionalItems_1.default,items_1.default),n.push(contains_1.default),n}applicator.default=getApplicator;var format$2={},format$1={};Object.defineProperty(format$1,"__esModule",{value:!0});const codegen_1$1=codegen,error$1={message:({schemaCode:t})=>(0,codegen_1$1.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,codegen_1$1._)`{format: ${t}}`},def$1={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:error$1,code(t,n){const{gen:_,data:x,$data:E,schema:S,schemaCode:C,it:T}=t,{opts:B,errSchemaPath:A,schemaEnv:I,self:D}=T;if(!B.validateFormats)return;E?M():V();function M(){const L=_.scopeValue("formats",{ref:D.formats,code:B.code.formats}),F=_.const("fDef",(0,codegen_1$1._)`${L}[${C}]`),j=_.let("fType"),U=_.let("format");_.if((0,codegen_1$1._)`typeof ${F} == "object" && !(${F} instanceof RegExp)`,()=>_.assign(j,(0,codegen_1$1._)`${F}.type || "string"`).assign(U,(0,codegen_1$1._)`${F}.validate`),()=>_.assign(j,(0,codegen_1$1._)`"string"`).assign(U,F)),t.fail$data((0,codegen_1$1.or)(H(),Y()));function H(){return B.strictSchema===!1?codegen_1$1.nil:(0,codegen_1$1._)`${C} && !${U}`}function Y(){const Z=I.$async?(0,codegen_1$1._)`(${F}.async ? await ${U}(${x}) : ${U}(${x}))`:(0,codegen_1$1._)`${U}(${x})`,ne=(0,codegen_1$1._)`(typeof ${U} == "function" ? ${Z} : ${U}.test(${x}))`;return(0,codegen_1$1._)`${U} && ${U} !== true && ${j} === ${n} && !${ne}`}}function V(){const L=D.formats[S];if(!L){H();return}if(L===!0)return;const[F,j,U]=Y(L);F===n&&t.pass(Z());function H(){if(B.strictSchema===!1){D.logger.warn(ne());return}throw new Error(ne());function ne(){return`unknown format "${S}" ignored in schema at path "${A}"`}}function Y(ne){const re=ne instanceof RegExp?(0,codegen_1$1.regexpCode)(ne):B.code.formats?(0,codegen_1$1._)`${B.code.formats}${(0,codegen_1$1.getProperty)(S)}`:void 0,X=_.scopeValue("formats",{key:S,ref:ne,code:re});return typeof ne=="object"&&!(ne instanceof RegExp)?[ne.type||"string",ne.validate,(0,codegen_1$1._)`${X}.validate`]:["string",ne,X]}function Z(){if(typeof L=="object"&&!(L instanceof RegExp)&&L.async){if(!I.$async)throw new Error("async format in sync schema");return(0,codegen_1$1._)`await ${U}(${x})`}return typeof j=="function"?(0,codegen_1$1._)`${U}(${x})`:(0,codegen_1$1._)`${U}.test(${x})`}}}};format$1.default=def$1;Object.defineProperty(format$2,"__esModule",{value:!0});const format_1$1=format$1,format=[format_1$1.default];format$2.default=format;var metadata={};Object.defineProperty(metadata,"__esModule",{value:!0});metadata.contentVocabulary=metadata.metadataVocabulary=void 0;metadata.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];metadata.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(draft7,"__esModule",{value:!0});const core_1=core$2,validation_1=validation$1,applicator_1=applicator,format_1=format$2,metadata_1=metadata,draft7Vocabularies=[core_1.default,validation_1.default,(0,applicator_1.default)(),format_1.default,metadata_1.metadataVocabulary,metadata_1.contentVocabulary];draft7.default=draft7Vocabularies;var discriminator={},types={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(n){n.Tag="tag",n.Mapping="mapping"}(t.DiscrError||(t.DiscrError={}))})(types);Object.defineProperty(discriminator,"__esModule",{value:!0});const codegen_1=codegen,types_1=types,compile_1=compile,util_1=util,error={message:({params:{discrError:t,tagName:n}})=>t===types_1.DiscrError.Tag?`tag "${n}" must be string`:`value of tag "${n}" must be in oneOf`,params:({params:{discrError:t,tag:n,tagName:_}})=>(0,codegen_1._)`{error: ${t}, tag: ${_}, tagValue: ${n}}`},def={keyword:"discriminator",type:"object",schemaType:"object",error,code(t){const{gen:n,data:_,schema:x,parentSchema:E,it:S}=t,{oneOf:C}=E;if(!S.opts.discriminator)throw new Error("discriminator: requires discriminator option");const T=x.propertyName;if(typeof T!="string")throw new Error("discriminator: requires propertyName");if(x.mapping)throw new Error("discriminator: mapping is not supported");if(!C)throw new Error("discriminator: requires oneOf keyword");const B=n.let("valid",!1),A=n.const("tag",(0,codegen_1._)`${_}${(0,codegen_1.getProperty)(T)}`);n.if((0,codegen_1._)`typeof ${A} == "string"`,()=>I(),()=>t.error(!1,{discrError:types_1.DiscrError.Tag,tag:A,tagName:T})),t.ok(B);function I(){const V=M();n.if(!1);for(const L in V)n.elseIf((0,codegen_1._)`${A} === ${L}`),n.assign(B,D(V[L]));n.else(),t.error(!1,{discrError:types_1.DiscrError.Mapping,tag:A,tagName:T}),n.endIf()}function D(V){const L=n.name("valid"),F=t.subschema({keyword:"oneOf",schemaProp:V},L);return t.mergeEvaluated(F,codegen_1.Name),L}function M(){var V;const L={},F=U(E);let j=!0;for(let Z=0;Z<C.length;Z++){let ne=C[Z];ne?.$ref&&!(0,util_1.schemaHasRulesButRef)(ne,S.self.RULES)&&(ne=compile_1.resolveRef.call(S.self,S.schemaEnv.root,S.baseId,ne?.$ref),ne instanceof compile_1.SchemaEnv&&(ne=ne.schema));const re=(V=ne?.properties)===null||V===void 0?void 0:V[T];if(typeof re!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${T}"`);j=j&&(F||U(ne)),H(re,Z)}if(!j)throw new Error(`discriminator: "${T}" must be required`);return L;function U({required:Z}){return Array.isArray(Z)&&Z.includes(T)}function H(Z,ne){if(Z.const)Y(Z.const,ne);else if(Z.enum)for(const re of Z.enum)Y(re,ne);else throw new Error(`discriminator: "properties/${T}" must have "const" or "enum"`)}function Y(Z,ne){if(typeof Z!="string"||Z in L)throw new Error(`discriminator: "${T}" values must be unique strings`);L[Z]=ne}}}};discriminator.default=def;const $schema="http://json-schema.org/draft-07/schema#",$id="http://json-schema.org/draft-07/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type$1=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3={$schema,$id,title,definitions,type:type$1,properties,default:!0};(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MissingRefError=n.ValidationError=n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=void 0;const _=core$3,x=draft7,E=discriminator,S=require$$3,C=["/properties"],T="http://json-schema.org/draft-07/schema";class B extends _.default{_addVocabularies(){super._addVocabularies(),x.default.forEach(L=>this.addVocabulary(L)),this.opts.discriminator&&this.addKeyword(E.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const L=this.opts.$data?this.$dataMetaSchema(S,C):S;this.addMetaSchema(L,T,!1),this.refs["http://json-schema.org/schema"]=T}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(T)?T:void 0)}}t.exports=n=B,Object.defineProperty(n,"__esModule",{value:!0}),n.default=B;var A=validate;Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:function(){return A.KeywordCxt}});var I=codegen;Object.defineProperty(n,"_",{enumerable:!0,get:function(){return I._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return I.str}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return I.stringify}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return I.nil}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return I.Name}}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:function(){return I.CodeGen}});var D=validation_error;Object.defineProperty(n,"ValidationError",{enumerable:!0,get:function(){return D.default}});var M=ref_error;Object.defineProperty(n,"MissingRefError",{enumerable:!0,get:function(){return M.default}})})(ajv$1,ajv$1.exports);var ajvExports=ajv$1.exports;const Ajv=getDefaultExportFromCjs(ajvExports);class SemaphoreItem{constructor(n){wt(this,"queue");wt(this,"maxConcurrent");wt(this,"count");this.queue=[],this.maxConcurrent=n,this.count=0}get canAcquire(){return this.count<this.maxConcurrent}acquire(){return this.canAcquire?(this.count++,Promise.resolve()):new Promise(n=>this.queue.push(n))}release(){const n=this.queue.shift();n?setTimeout(n,0):this.count--}}const defaultKey="_default";class Semaphore{constructor(n=1){wt(this,"semaphoreInstances");wt(this,"maxConcurrent");this.semaphoreInstances={},this.maxConcurrent=n}hasSemaphoreInstance(n=defaultKey){return!!this.semaphoreInstances[n]}getSemaphoreInstance(n=defaultKey){return this.hasSemaphoreInstance(n)||(this.semaphoreInstances[n]=new SemaphoreItem(this.maxConcurrent)),this.semaphoreInstances[n]}tidy(n=defaultKey){this.hasSemaphoreInstance(n)&&this.getSemaphoreInstance(n).count==0&&delete this.semaphoreInstances[n]}canAcquire(n=defaultKey){return this.getSemaphoreInstance(n).canAcquire}acquire(n=defaultKey){return this.getSemaphoreInstance(n).acquire()}release(n=defaultKey){this.getSemaphoreInstance(n).release(),this.tidy(n)}count(n=defaultKey){return this.hasSemaphoreInstance(n)?this.getSemaphoreInstance(n).count:0}hasTasks(n=defaultKey){return this.count(n)>0}async request(n,_=defaultKey){try{return await this.acquire(_),await n()}finally{this.release(_)}}async requestIfAvailable(n,_=defaultKey){return this.canAcquire(_)?this.request(n,_):null}}const ajv=new Ajv;async function initOrbite({sfip:t,dossierOrbite:n}){let _=n;if(isElectronMain||isNode){const x=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0);_=n||x.join(".","orbite")}else _=n||"./orbite";return await OrbitDB.createInstance(t,{directory:_,AccessControllers:AccessControllers$1})}function vrifierTypesBdOrbite({bd:t,schma:n}){return n?t.type==="feed"?validerTypesListeOrbite({bd:t,schma:n}):t.type==="keyvalue"?validerTypesDicOrbite({bd:t,schma:n}):t:t}const validerTypesListeOrbite=({bd:t,schma:n})=>{const _=ajv.compile(n),x=E=>_(E)?!0:(console.error(E,JSON.stringify(_.errors,void 0,2)),!1);return new Proxy(t,{get(E,S){return S==="all"?E[S].filter(C=>x(C.payload.value)):S==="add"?async C=>{if(x(C))return await E.add(C);throw new Error(C.toString()+JSON.stringify(_.errors,void 0,2))}:S==="get"?C=>{const T=E.get(C);if(x(T.payload.value))return T;throw new Error(JSON.stringify(_.errors,void 0,2))}:S==="iterator"?C=>{const T=E.iterator(C);return{*[Symbol.iterator](){for(const A of T)x(A.payload.value)&&(yield A)},next(){let A=T.next();for(;!x(A.value.payload.value);){if(A.done)return{done:!0};A=T.next()}return A},collect(){return T.collect().filter(A=>x(A.payload.value))}}}:E[S]}})},validerTypesDicOrbite=({bd:t,schma:n})=>{const _=ajv.compile(n),x=T=>{if(T===!0)return()=>!0;if(T.nullable){const B=ajv.compile(T);return A=>B(A===void 0?null:A)}else return ajv.compile(T)},E=Object.fromEntries(Object.entries(n.properties||{}).map(([T,B])=>[T,x(B)])),S=n.additionalProperties?x(n.additionalProperties):()=>!1,C=(T,B)=>(B?E[B]||S:_)(T);return new Proxy(t,{get(T,B){if(B==="get")return A=>{const I=T.get(A);if(I===void 0||C(I,A))return I};if(B==="put"||B==="set")return async(A,I,D)=>{if(C(I,A))return await T.put(A,I,D);throw new Error(E[A]?JSON.stringify(E[A].errors,void 0,2):`Clef ${A} non supporte.`)};if(B==="all"){const A=T.all;if(C(A))return A;throw new Error(JSON.stringify(_.errors,void 0,2))}else return T[B]}})};class GestionnaireOrbite{constructor(n){wt(this,"orbite");wt(this,"_bdsOrbite");wt(this,"verrouOuvertureBd");wt(this,"_oublierNettoyageBdsOuvertes");this.orbite=n,this._bdsOrbite={},this.verrouOuvertureBd=new Semaphore,this._oublierNettoyageBdsOuvertes=this.lancerNettoyageBdsOuvertes()}get identity(){return this.orbite.identity}async ouvrirBd({id:n,type:_,schma:x}){if(!adresseOrbiteValide(n))throw new Error(`Adresse "${n}" non valide.`);const E=B=>{const{type:A}=B;return _===void 0||A==="keyvalue"&&_==="kvstore"?!0:A===_};await this.verrouOuvertureBd.acquire(n);const S=this._bdsOrbite[n],C=v4(),T=async()=>{this._bdsOrbite[n]&&this._bdsOrbite[n].idsRequtes.delete(C)};if(S){if(this._bdsOrbite[n].idsRequtes.add(C),this.verrouOuvertureBd.release(n),!E(S.bd))throw new Error(`La bd est de type ${S.bd.type}, et non ${_}.`);return S.bd.type==="feed"?{bd:vrifierTypesBdOrbite({bd:S.bd,schma:x}),fOublier:T}:{bd:vrifierTypesBdOrbite({bd:S.bd,schma:x}),fOublier:T}}try{const B=await this.orbite.open(n);if(this._bdsOrbite[n]={bd:B,idsRequtes:new Set([C])},await B.load(),this.verrouOuvertureBd.release(n),!E(B))throw console.error(new Error(`La bd est de type ${B.type}, et non ${_}.`).stack),new Error(`La bd est de type ${B.type}, et non ${_}.`);return{bd:B.type==="feed"?vrifierTypesBdOrbite({bd:B,schma:x}):vrifierTypesBdOrbite({bd:B,schma:x}),fOublier:T}}catch(B){throw console.error(B.toString()),B}}async crerBdIndpendante({type:n,optionsAccs:_,nom:x}){const E={accessController:_},S=await this.orbite[n](x||v4(),E);await S.load();const{id:C}=S;return this._bdsOrbite[C]={bd:S,idsRequtes:new Set},C}async effacerBd({id:n}){const{bd:_}=await this.ouvrirBd({id:n});await _.drop(),delete this._bdsOrbite[n]}lancerNettoyageBdsOuvertes(){const _=setInterval(async()=>{await Promise.all(Object.keys(this._bdsOrbite).map(async x=>{const{bd:E,idsRequtes:S}=this._bdsOrbite[x];S.size||(delete this._bdsOrbite[x],await E.close())}))},3e5);return async()=>clearInterval(_)}async fermer({arrterOrbite:n}){this._oublierNettoyageBdsOuvertes&&this._oublierNettoyageBdsOuvertes(),n&&await this.orbite.stop()}}class GestionnaireOrbiteGnral{constructor(){wt(this,"gestionnaires");this.gestionnaires={}}obtGestionnaireOrbite({orbite:n}){return this.gestionnaires[n.identity.id]||(this.gestionnaires[n.identity.id]=new GestionnaireOrbite(n)),this.gestionnaires[n.identity.id]}async fermer({orbite:n,arrterOrbite:_}){await this.obtGestionnaireOrbite({orbite:n}).fermer({arrterOrbite:_}),delete this.gestionnaires[n.identity.id]}}const gestionnaireOrbiteGnral=new GestionnaireOrbiteGnral,orbite=Object.freeze(Object.defineProperty({__proto__:null,GestionnaireOrbite,GestionnaireOrbiteGnral,default:initOrbite,gestionnaireOrbiteGnral,vrifierTypesBdOrbite},Symbol.toStringTag,{value:"Module"})),vnementsSuiviBd=["ready","write","replicated"],suivreBdAccs=async(t,n)=>{const _=async()=>{const E=t.iterator({limit:-1}).collect().map(S=>S.payload.value);await n(E)};t.events.setMaxListeners(100);for(const E of vnementsSuiviBd)t.events.on(E,_);return await _(),async()=>{vnementsSuiviBd.forEach(E=>{t.events.off(E,_)})}};class AccsUtilisateur extends eventsExports.EventEmitter{constructor(_,x){super();wt(this,"orbite");wt(this,"idBd");wt(this,"idBdAccs");wt(this,"bdAccs");wt(this,"fOublierBd");wt(this,"oublierSuivi");wt(this,"autoriss");wt(this,"accs");wt(this,"idRequte");wt(this,"prt");this.orbite=gestionnaireOrbiteGnral.obtGestionnaireOrbite({orbite:_}),this.idBd=x,this.autoriss=[],this.idRequte=v4(),this.prt=!1}async initialiser(){const{bd:_,fOublier:x}=await this.orbite.ouvrirBd({id:this.idBd});this.fOublierBd=x,this.accs=_.access,this.bdAccs=this.accs.bd,this.idBdAccs=this.bdAccs.id,this.oublierSuivi=await suivreBdAccs(this.bdAccs,async E=>{await this._miseJour(E)}),this.prt=!0}async _miseJour(_){const x=[];_=[{id:this.accs._premierMod,rle:MODRATEUR},..._],_.forEach(E=>{x.push(E.id)}),this.autoriss=x,this.emit("misJour")}async fermer(){this.oublierSuivi&&this.oublierSuivi(),await this.fOublierBd?.()}}class GestionnaireAccs extends eventsExports.EventEmitter{constructor(_){super();wt(this,"_rles");wt(this,"_rlesIdOrbite");wt(this,"_rlesUtilisateurs");wt(this,"_miseJourEnCours");wt(this,"orbite");this._rles={[MODRATEUR]:[],[MEMBRE]:[]},this._rlesIdOrbite={[MODRATEUR]:[],[MEMBRE]:[]},this._rlesUtilisateurs={[MODRATEUR]:{},[MEMBRE]:{}},this._miseJourEnCours=!1,this.orbite=_}async estUnMembre(_){return this._miseJourEnCours&&await once_1(this,"misJour"),this._rles[MEMBRE].includes(_)}async estUnModrateur(_){return this._miseJourEnCours&&await once_1(this,"misJour"),this._rles[MODRATEUR].includes(_)}async estAutoris(_){return await this.estUnModrateur(_)||await this.estUnMembre(_)}async ajouterlments(_){this._miseJourEnCours=!0,await Promise.all(_.map(async x=>{const{rle:E,id:S}=x;if(OrbitDB.isValidAddress(S)){if(!this._rlesUtilisateurs[E][S]){const C=new AccsUtilisateur(this.orbite,S);C.on("misJour",()=>this._mettreRlesJour()),this._rlesUtilisateurs[E][S]=C,await C.initialiser()}}else this._rlesIdOrbite[E].includes(S)||(this._rlesIdOrbite[E].push(S),this._mettreRlesJour())})),this._miseJourEnCours=!1,this._mettreRlesJour(),this.emit("misJour")}_mettreRlesJour(){const _={MODRATEUR:[],MEMBRE:[]};for(const[x,E]of Object.entries(this._rlesIdOrbite)){const S=_[x];E.forEach(C=>{S.includes(C)||S.push(C)})}for(const[x,E]of Object.entries(this._rlesUtilisateurs)){const S=_[x];Object.values(E).forEach(C=>{C.autoriss.forEach(T=>{S.includes(T)||S.push(T)})})}this._rles=_}async fermer(){const _=Object.values(this._rlesUtilisateurs).map(x=>Object.values(x)).flat();await Promise.all(_.map(x=>x.fermer()))}}const ensureAddress=t=>t.toString().split("/").pop()==="_access"?t:path.join(t,"/_access"),nomType="controlleur-constellation";class ContrleurConstellation extends AccessControllers$1.AccessController{constructor(_,x){super();wt(this,"bd");wt(this,"_gestionnaireOrbite");wt(this,"fOublierBd");wt(this,"nom");wt(this,"_orbitdb");wt(this,"_premierMod");wt(this,"_adresseBd");wt(this,"idRequte");wt(this,"gestRles");this._orbitdb=_,this._gestionnaireOrbite=gestionnaireOrbiteGnral.obtGestionnaireOrbite({orbite:_}),this._premierMod=x.premierMod,this._adresseBd=x.address,this.nom=x.nom,this.idRequte=v4(),this.gestRles=new GestionnaireAccs(this._orbitdb),this.gestRles.on("misJour",()=>this.emit("misJour"))}static get type(){return nomType}get address(){return this.bd.id}async estUnMembre(_){return await this.gestRles.estUnMembre(_)}async estUnModrateur(_){return await this.gestRles.estUnModrateur(_)}async estAutoris(_){return await this.gestRles.estAutoris(_)}async suivreUtilisateursAutoriss(_){const x=async()=>{const S=Object.keys(this.gestRles._rlesUtilisateurs[MODRATEUR]).map(A=>({idCompte:A,rle:MODRATEUR})),C=S.map(A=>A.idCompte),T=Object.keys(this.gestRles._rlesUtilisateurs[MEMBRE]).map(A=>({idCompte:A,rle:MEMBRE})).filter(A=>!C.includes(A.idCompte)),B=[...S,...T];await _(B)};return this.gestRles.on("misJour",x),await x(),async()=>{this.gestRles.off("misJour",x)}}async suivreIdsOrbiteAutorisescriture(_){const x=async()=>{await _([...this.gestRles._rles.MEMBRE,...this.gestRles._rles.MODRATEUR])};return this.gestRles.on("misJour",x),await x(),async()=>{this.gestRles.off("misJour",x)}}async canAppend(_,x){const E=async()=>await x.verifyIdentity(_.identity);return await this.estAutoris(_.identity.id)?await E():!1}async _miseJourBdAccs(){let _=this.bd.iterator({limit:-1}).collect().map(x=>x.payload.value);_=[{rle:MODRATEUR,id:this._premierMod},..._],await this.gestRles.ajouterlments(_)}async close(){await this.fOublierBd?.(),await this.gestRles.fermer()}async load(_){const x=OrbitDB.isValidAddress(_);let E;x?E=_:E=(await this._orbitdb.determineAddress(ensureAddress(_),"feed",this._createOrbitOpts(x))).toString();const{bd:S,fOublier:C}=await this._gestionnaireOrbite.ouvrirBd({id:E,type:"feed"});this.bd=S,this.fOublierBd=C,suivreBdAccs(this.bd,()=>this._miseJourBdAccs())}_createOrbitOpts(_=!1){const x={type:"controlleur-accs-constellation",premierMod:this._premierMod};return _?{}:{accessController:x}}async save(){return{address:(this._adresseBd||await this._orbitdb.determineAddress(`${this.nom}/_access`,"feed",this._createOrbitOpts())).toString(),premierMod:this._premierMod,nom:this.nom}}async grant(_,x){if(!rles.includes(_))throw new Error(`Erreur: Le rle ${_} n'existe pas.`);if(!this.gestRles._rles[_].includes(x))try{const E={rle:_,id:x};await this.bd.add(E)}catch(E){const S=E;throw S.toString().includes("not append entry")?new Error(`Erreur : Le rle ${_} ne peut pas tre octroy  ${x}.`):S}}async revoke(_,x){const E=this.bd.iterator({limit:-1}).collect().find(C=>C.payload.value.rle===_&&C.payload.value.id===x);if(!E)throw new Error(`Erreur : Le rle ${_} n'existait pas pour ${x}.`);const S=E.hash;await this.bd.remove(S)}static async create(_,x){return x.premierMod||(x.premierMod=_.identity.id),x.nom=x.nom||v4(),new ContrleurConstellation(_,x)}}const type="controlleur-accs-constellation";class ContrleurAccs extends eventsExports.EventEmitter{constructor(_,x){super();wt(this,"_premierMod");wt(this,"orbitdb");wt(this,"gestAccs");wt(this,"dernierAppel");this.orbitdb=_,this._premierMod=x.premierMod,this.gestAccs=new GestionnaireAccs(this.orbitdb),this.dernierAppel=Date.now()}static get type(){return type}async estUnModrateurPatient(_){return await this.gestAccs.estUnModrateur(_)?!0:new Promise(E=>{const S=()=>{setTimeout(async()=>{await this.gestAccs.estUnModrateur(_)?E(!0):Date.now()-this.dernierAppel>1e3?E(!1):S()},100)};S()})}get premierMod(){return this._premierMod}async canAppend(_,x){const E=_.identity.id,{rle:S,id:C}=_.payload.value,T=this.estUnModrateurPatient(E),B=rles.includes(S),A=async()=>x.verifyIdentity(_.identity);return B&&await T&&await A()?(S===MODRATEUR&&(await this.gestAccs.ajouterlments([{id:C,rle:MODRATEUR}]),this.dernierAppel=Date.now()),!0):!1}async load(){await this.gestAccs.ajouterlments([{id:this._premierMod,rle:MODRATEUR}])}async save(){return{premierMod:this.premierMod}}static async create(_,x={}){const E=x.premierMod;if(!E)throw new Error("Contrle d'accs: premier modrateur requis");return new ContrleurAccs(_,{premierMod:E})}}const enregistrerContrleurs=()=>{AccessControllers$1.addAccessController({AccessController:ContrleurConstellation}),AccessControllers$1.addAccessController({AccessController:ContrleurAccs})};enregistrerContrleurs();/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var XLSX={};XLSX.version="0.19.1";var current_codepage=1200,$cptable,VALID_ANSI=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],CS2CP={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},set_ansi=function(t){VALID_ANSI.indexOf(t)!=-1&&(CS2CP[0]=t)};function reset_ansi(){set_ansi(1252)}var set_cp=function(t){current_codepage=t,set_ansi(t)};function reset_cp(){set_cp(1200),reset_ansi()}function char_codes(t){for(var n=[],_=0,x=t.length;_<x;++_)n[_]=t.charCodeAt(_);return n}function utf16leread(t){for(var n=[],_=0;_<t.length>>1;++_)n[_]=String.fromCharCode(t.charCodeAt(2*_)+(t.charCodeAt(2*_+1)<<8));return n.join("")}function utf16beread(t){for(var n=[],_=0;_<t.length>>1;++_)n[_]=String.fromCharCode(t.charCodeAt(2*_+1)+(t.charCodeAt(2*_)<<8));return n.join("")}var debom=function(t){var n=t.charCodeAt(0),_=t.charCodeAt(1);return n==255&&_==254?utf16leread(t.slice(2)):n==254&&_==255?utf16beread(t.slice(2)):n==65279?t.slice(1):t},_getchar=function t(n){return String.fromCharCode(n)},_getansi=function t(n){return String.fromCharCode(n)},DENSE=null,Base64_map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Base64_encode(t){for(var n="",_=0,x=0,E=0,S=0,C=0,T=0,B=0,A=0;A<t.length;)_=t.charCodeAt(A++),S=_>>2,x=t.charCodeAt(A++),C=(_&3)<<4|x>>4,E=t.charCodeAt(A++),T=(x&15)<<2|E>>6,B=E&63,isNaN(x)?T=B=64:isNaN(E)&&(B=64),n+=Base64_map.charAt(S)+Base64_map.charAt(C)+Base64_map.charAt(T)+Base64_map.charAt(B);return n}function Base64_encode_pass(t){for(var n="",_=0,x=0,E=0,S=0,C=0,T=0,B=0,A=0;A<t.length;)_=t.charCodeAt(A++),_>255&&(_=95),S=_>>2,x=t.charCodeAt(A++),x>255&&(x=95),C=(_&3)<<4|x>>4,E=t.charCodeAt(A++),E>255&&(E=95),T=(x&15)<<2|E>>6,B=E&63,isNaN(x)?T=B=64:isNaN(E)&&(B=64),n+=Base64_map.charAt(S)+Base64_map.charAt(C)+Base64_map.charAt(T)+Base64_map.charAt(B);return n}function Base64_decode(t){var n="",_=0,x=0,E=0,S=0,C=0,T=0,B=0;t=t.replace(/^data:([^\/]+\/[^\/]+)?;base64\,/,"").replace(/[^\w\+\/\=]/g,"");for(var A=0;A<t.length;)S=Base64_map.indexOf(t.charAt(A++)),C=Base64_map.indexOf(t.charAt(A++)),_=S<<2|C>>4,n+=String.fromCharCode(_),T=Base64_map.indexOf(t.charAt(A++)),x=(C&15)<<4|T>>2,T!==64&&(n+=String.fromCharCode(x)),B=Base64_map.indexOf(t.charAt(A++)),E=(T&3)<<6|B,B!==64&&(n+=String.fromCharCode(E));return n}var has_buf=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Buffer_from=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(n,_){return _?new Buffer(n,_):new Buffer(n)}:Buffer.from.bind(Buffer)}return function(){}}(),buf_utf16le=function(){if(typeof Buffer>"u")return!1;var t=Buffer_from([65,0]);if(!t)return!1;var n=t.toString("utf16le");return n.length==1}();function new_raw_buf(t){return has_buf?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function new_unsafe_buf(t){return has_buf?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var s2a=function t(n){return has_buf?Buffer_from(n,"binary"):n.split("").map(function(_){return _.charCodeAt(0)&255})};function s2ab(t){if(typeof ArrayBuffer>"u")return s2a(t);for(var n=new ArrayBuffer(t.length),_=new Uint8Array(n),x=0;x!=t.length;++x)_[x]=t.charCodeAt(x)&255;return n}function a2s(t){if(Array.isArray(t))return t.map(function(x){return String.fromCharCode(x)}).join("");for(var n=[],_=0;_<t.length;++_)n[_]=String.fromCharCode(t[_]);return n.join("")}function a2u(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function ab2a(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return ab2a(new Uint8Array(t));for(var n=new Array(t.length),_=0;_<t.length;++_)n[_]=t[_];return n}var bconcat=has_buf?function(t){return Buffer.concat(t.map(function(n){return Buffer.isBuffer(n)?n:Buffer_from(n)}))}:function(t){if(typeof Uint8Array<"u"){var n=0,_=0;for(n=0;n<t.length;++n)_+=t[n].length;var x=new Uint8Array(_),E=0;for(n=0,_=0;n<t.length;_+=E,++n)E=t[n].length,t[n]instanceof Uint8Array?x.set(t[n],_):typeof t[n]=="string"?x.set(new Uint8Array(s2a(t[n])),_):x.set(new Uint8Array(t[n]),_);return x}return[].concat.apply([],t.map(function(S){return Array.isArray(S)?S:[].slice.call(S)}))};function utf8decode(t){for(var n=[],_=0,x=t.length+250,E=new_raw_buf(t.length+255),S=0;S<t.length;++S){var C=t.charCodeAt(S);if(C<128)E[_++]=C;else if(C<2048)E[_++]=192|C>>6&31,E[_++]=128|C&63;else if(C>=55296&&C<57344){C=(C&1023)+64;var T=t.charCodeAt(++S)&1023;E[_++]=240|C>>8&7,E[_++]=128|C>>2&63,E[_++]=128|T>>6&15|(C&3)<<4,E[_++]=128|T&63}else E[_++]=224|C>>12&15,E[_++]=128|C>>6&63,E[_++]=128|C&63;_>x&&(n.push(E.slice(0,_)),_=0,E=new_raw_buf(65535),x=65530)}return n.push(E.slice(0,_)),bconcat(n)}var chr0=/\u0000/g,chr1=/[\u0001-\u0006]/g;function _strrev(t){for(var n="",_=t.length-1;_>=0;)n+=t.charAt(_--);return n}function pad0(t,n){var _=""+t;return _.length>=n?_:fill("0",n-_.length)+_}function pad_(t,n){var _=""+t;return _.length>=n?_:fill(" ",n-_.length)+_}function rpad_(t,n){var _=""+t;return _.length>=n?_:_+fill(" ",n-_.length)}function pad0r1(t,n){var _=""+Math.round(t);return _.length>=n?_:fill("0",n-_.length)+_}function pad0r2(t,n){var _=""+t;return _.length>=n?_:fill("0",n-_.length)+_}var p2_32=Math.pow(2,32);function pad0r(t,n){if(t>p2_32||t<-p2_32)return pad0r1(t,n);var _=Math.round(t);return pad0r2(_,n)}function SSF_isgeneral(t,n){return n=n||0,t.length>=7+n&&(t.charCodeAt(n)|32)===103&&(t.charCodeAt(n+1)|32)===101&&(t.charCodeAt(n+2)|32)===110&&(t.charCodeAt(n+3)|32)===101&&(t.charCodeAt(n+4)|32)===114&&(t.charCodeAt(n+5)|32)===97&&(t.charCodeAt(n+6)|32)===108}var days=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],months=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function SSF_init_table(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var table_fmt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},SSF_default_map={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SSF_default_str={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function SSF_frac(t,n,_){for(var x=t<0?-1:1,E=t*x,S=0,C=1,T=0,B=1,A=0,I=0,D=Math.floor(E);A<n&&(D=Math.floor(E),T=D*C+S,I=D*A+B,!(E-D<5e-8));)E=1/(E-D),S=C,C=T,B=A,A=I;if(I>n&&(A>n?(I=B,T=S):(I=A,T=C)),!_)return[0,x*T,I];var M=Math.floor(x*T/I);return[M,x*T-M*I,I]}function SSF_parse_date_code(t,n,_){if(t>2958465||t<0)return null;var x=t|0,E=Math.floor(86400*(t-x)),S=0,C=[],T={D:x,T:E,u:86400*(t-x)-E,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(T.u)<1e-6&&(T.u=0),n&&n.date1904&&(x+=1462),T.u>.9999&&(T.u=0,++E==86400&&(T.T=E=0,++x,++T.D)),x===60)C=_?[1317,10,29]:[1900,2,29],S=3;else if(x===0)C=_?[1317,8,29]:[1900,1,0],S=6;else{x>60&&--x;var B=new Date(1900,0,1);B.setDate(B.getDate()+x-1),C=[B.getFullYear(),B.getMonth()+1,B.getDate()],S=B.getDay(),x<60&&(S=(S+6)%7),_&&(S=SSF_fix_hijri(B,C))}return T.y=C[0],T.m=C[1],T.d=C[2],T.S=E%60,E=Math.floor(E/60),T.M=E%60,E=Math.floor(E/60),T.H=E,T.q=S,T}var SSFbasedate=new Date(1899,11,31,0,0,0),SSFdnthresh=SSFbasedate.getTime(),SSFbase1904=new Date(1900,2,1,0,0,0);function datenum_local(t,n){var _=t.getTime();return n?_-=1461*24*60*60*1e3:t>=SSFbase1904&&(_+=24*60*60*1e3),(_-(SSFdnthresh+(t.getTimezoneOffset()-SSFbasedate.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function SSF_strip_decimal(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function SSF_normalize_exp(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function SSF_small_exp(t){var n=t<0?12:11,_=SSF_strip_decimal(t.toFixed(12));return _.length<=n||(_=t.toPrecision(10),_.length<=n)?_:t.toExponential(5)}function SSF_large_exp(t){var n=SSF_strip_decimal(t.toFixed(11));return n.length>(t<0?12:11)||n==="0"||n==="-0"?t.toPrecision(6):n}function SSF_general_num(t){var n=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),_;return n>=-4&&n<=-1?_=t.toPrecision(10+n):Math.abs(n)<=9?_=SSF_small_exp(t):n===10?_=t.toFixed(10).substr(0,12):_=SSF_large_exp(t),SSF_strip_decimal(SSF_normalize_exp(_.toUpperCase()))}function SSF_general(t,n){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):SSF_general_num(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return SSF_format(14,datenum_local(t,n&&n.date1904),n)}throw new Error("unsupported value in General format: "+t)}function SSF_fix_hijri(t,n){n[0]-=581;var _=t.getDay();return t<60&&(_=(_+6)%7),_}function SSF_write_date(t,n,_,x){var E="",S=0,C=0,T=_.y,B,A=0;switch(t){case 98:T=_.y+543;case 121:switch(n.length){case 1:case 2:B=T%100,A=2;break;default:B=T%1e4,A=4;break}break;case 109:switch(n.length){case 1:case 2:B=_.m,A=n.length;break;case 3:return months[_.m-1][1];case 5:return months[_.m-1][0];default:return months[_.m-1][2]}break;case 100:switch(n.length){case 1:case 2:B=_.d,A=n.length;break;case 3:return days[_.q][0];default:return days[_.q][1]}break;case 104:switch(n.length){case 1:case 2:B=1+(_.H+11)%12,A=n.length;break;default:throw"bad hour format: "+n}break;case 72:switch(n.length){case 1:case 2:B=_.H,A=n.length;break;default:throw"bad hour format: "+n}break;case 77:switch(n.length){case 1:case 2:B=_.M,A=n.length;break;default:throw"bad minute format: "+n}break;case 115:if(n!="s"&&n!="ss"&&n!=".0"&&n!=".00"&&n!=".000")throw"bad second format: "+n;return _.u===0&&(n=="s"||n=="ss")?pad0(_.S,n.length):(x>=2?C=x===3?1e3:100:C=x===1?10:1,S=Math.round(C*(_.S+_.u)),S>=60*C&&(S=0),n==="s"?S===0?"0":""+S/C:(E=pad0(S,2+x),n==="ss"?E.substr(0,2):"."+E.substr(2,n.length-1)));case 90:switch(n){case"[h]":case"[hh]":B=_.D*24+_.H;break;case"[m]":case"[mm]":B=(_.D*24+_.H)*60+_.M;break;case"[s]":case"[ss]":B=((_.D*24+_.H)*60+_.M)*60+Math.round(_.S+_.u);break;default:throw"bad abstime format: "+n}A=n.length===3?1:2;break;case 101:B=T,A=1;break}var I=A>0?pad0(B,A):"";return I}function commaify(t){var n=3;if(t.length<=n)return t;for(var _=t.length%n,x=t.substr(0,_);_!=t.length;_+=n)x+=(x.length>0?",":"")+t.substr(_,n);return x}var pct1=/%/g;function write_num_pct(t,n,_){var x=n.replace(pct1,""),E=n.length-x.length;return write_num(t,x,_*Math.pow(10,2*E))+fill("%",E)}function write_num_cm(t,n,_){for(var x=n.length-1;n.charCodeAt(x-1)===44;)--x;return write_num(t,n.substr(0,x),_/Math.pow(10,3*(n.length-x)))}function write_num_exp(t,n){var _,x=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(n==0)return"0.0E+0";if(n<0)return"-"+write_num_exp(t,-n);var E=t.indexOf(".");E===-1&&(E=t.indexOf("E"));var S=Math.floor(Math.log(n)*Math.LOG10E)%E;if(S<0&&(S+=E),_=(n/Math.pow(10,S)).toPrecision(x+1+(E+S)%E),_.indexOf("e")===-1){var C=Math.floor(Math.log(n)*Math.LOG10E);for(_.indexOf(".")===-1?_=_.charAt(0)+"."+_.substr(1)+"E+"+(C-_.length+S):_+="E+"+(C-S);_.substr(0,2)==="0.";)_=_.charAt(0)+_.substr(2,E)+"."+_.substr(2+E),_=_.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");_=_.replace(/\+-/,"-")}_=_.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(T,B,A,I){return B+A+I.substr(0,(E+S)%E)+"."+I.substr(S)+"E"})}else _=n.toExponential(x);return t.match(/E\+00$/)&&_.match(/e[+-]\d$/)&&(_=_.substr(0,_.length-1)+"0"+_.charAt(_.length-1)),t.match(/E\-/)&&_.match(/e\+/)&&(_=_.replace(/e\+/,"e")),_.replace("e","E")}var frac1=/# (\?+)( ?)\/( ?)(\d+)/;function write_num_f1(t,n,_){var x=parseInt(t[4],10),E=Math.round(n*x),S=Math.floor(E/x),C=E-S*x,T=x;return _+(S===0?"":""+S)+" "+(C===0?fill(" ",t[1].length+1+t[4].length):pad_(C,t[1].length)+t[2]+"/"+t[3]+pad0(T,t[4].length))}function write_num_f2(t,n,_){return _+(n===0?"":""+n)+fill(" ",t[1].length+2+t[4].length)}var dec1=/^#*0*\.([0#]+)/,closeparen=/\).*[0#]/,phone=/\(###\) ###\\?-####/;function hashq(t){for(var n="",_,x=0;x!=t.length;++x)switch(_=t.charCodeAt(x)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(_)}return n}function rnd(t,n){var _=Math.pow(10,n);return""+Math.round(t*_)/_}function dec(t,n){var _=t-Math.floor(t),x=Math.pow(10,n);return n<(""+Math.round(_*x)).length?0:Math.round(_*x)}function carry(t,n){return n<(""+Math.round((t-Math.floor(t))*Math.pow(10,n))).length?1:0}function flr(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function write_num_flt(t,n,_){if(t.charCodeAt(0)===40&&!n.match(closeparen)){var x=n.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return _>=0?write_num_flt("n",x,_):"("+write_num_flt("n",x,-_)+")"}if(n.charCodeAt(n.length-1)===44)return write_num_cm(t,n,_);if(n.indexOf("%")!==-1)return write_num_pct(t,n,_);if(n.indexOf("E")!==-1)return write_num_exp(n,_);if(n.charCodeAt(0)===36)return"$"+write_num_flt(t,n.substr(n.charAt(1)==" "?2:1),_);var E,S,C,T,B=Math.abs(_),A=_<0?"-":"";if(n.match(/^00+$/))return A+pad0r(B,n.length);if(n.match(/^[#?]+$/))return E=pad0r(_,0),E==="0"&&(E=""),E.length>n.length?E:hashq(n.substr(0,n.length-E.length))+E;if(S=n.match(frac1))return write_num_f1(S,B,A);if(n.match(/^#+0+$/))return A+pad0r(B,n.length-n.indexOf("0"));if(S=n.match(dec1))return E=rnd(_,S[1].length).replace(/^([^\.]+)$/,"$1."+hashq(S[1])).replace(/\.$/,"."+hashq(S[1])).replace(/\.(\d*)$/,function(L,F){return"."+F+fill("0",hashq(S[1]).length-F.length)}),n.indexOf("0.")!==-1?E:E.replace(/^0\./,".");if(n=n.replace(/^#+([0.])/,"$1"),S=n.match(/^(0*)\.(#*)$/))return A+rnd(B,S[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,S[1].length?"0.":".");if(S=n.match(/^#{1,3},##0(\.?)$/))return A+commaify(pad0r(B,0));if(S=n.match(/^#,##0\.([#0]*0)$/))return _<0?"-"+write_num_flt(t,n,-_):commaify(""+(Math.floor(_)+carry(_,S[1].length)))+"."+pad0(dec(_,S[1].length),S[1].length);if(S=n.match(/^#,#*,#0/))return write_num_flt(t,n.replace(/^#,#*,/,""),_);if(S=n.match(/^([0#]+)(\\?-([0#]+))+$/))return E=_strrev(write_num_flt(t,n.replace(/[\\-]/g,""),_)),C=0,_strrev(_strrev(n.replace(/\\/g,"")).replace(/[0#]/g,function(L){return C<E.length?E.charAt(C++):L==="0"?"0":""}));if(n.match(phone))return E=write_num_flt(t,"##########",_),"("+E.substr(0,3)+") "+E.substr(3,3)+"-"+E.substr(6);var I="";if(S=n.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return C=Math.min(S[4].length,7),T=SSF_frac(B,Math.pow(10,C)-1,!1),E=""+A,I=write_num("n",S[1],T[1]),I.charAt(I.length-1)==" "&&(I=I.substr(0,I.length-1)+"0"),E+=I+S[2]+"/"+S[3],I=rpad_(T[2],C),I.length<S[4].length&&(I=hashq(S[4].substr(S[4].length-I.length))+I),E+=I,E;if(S=n.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return C=Math.min(Math.max(S[1].length,S[4].length),7),T=SSF_frac(B,Math.pow(10,C)-1,!0),A+(T[0]||(T[1]?"":"0"))+" "+(T[1]?pad_(T[1],C)+S[2]+"/"+S[3]+rpad_(T[2],C):fill(" ",2*C+1+S[2].length+S[3].length));if(S=n.match(/^[#0?]+$/))return E=pad0r(_,0),n.length<=E.length?E:hashq(n.substr(0,n.length-E.length))+E;if(S=n.match(/^([#0?]+)\.([#0]+)$/)){E=""+_.toFixed(Math.min(S[2].length,10)).replace(/([^0])0+$/,"$1"),C=E.indexOf(".");var D=n.indexOf(".")-C,M=n.length-E.length-D;return hashq(n.substr(0,D)+E+n.substr(n.length-M))}if(S=n.match(/^00,000\.([#0]*0)$/))return C=dec(_,S[1].length),_<0?"-"+write_num_flt(t,n,-_):commaify(flr(_)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(L){return"00,"+(L.length<3?pad0(0,3-L.length):"")+L})+"."+pad0(C,S[1].length);switch(n){case"###,##0.00":return write_num_flt(t,"#,##0.00",_);case"###,###":case"##,###":case"#,###":var V=commaify(pad0r(B,0));return V!=="0"?A+V:"";case"###,###.00":return write_num_flt(t,"###,##0.00",_).replace(/^0\./,".");case"#,###.00":return write_num_flt(t,"#,##0.00",_).replace(/^0\./,".")}throw new Error("unsupported format |"+n+"|")}function write_num_cm2(t,n,_){for(var x=n.length-1;n.charCodeAt(x-1)===44;)--x;return write_num(t,n.substr(0,x),_/Math.pow(10,3*(n.length-x)))}function write_num_pct2(t,n,_){var x=n.replace(pct1,""),E=n.length-x.length;return write_num(t,x,_*Math.pow(10,2*E))+fill("%",E)}function write_num_exp2(t,n){var _,x=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(n==0)return"0.0E+0";if(n<0)return"-"+write_num_exp2(t,-n);var E=t.indexOf(".");E===-1&&(E=t.indexOf("E"));var S=Math.floor(Math.log(n)*Math.LOG10E)%E;if(S<0&&(S+=E),_=(n/Math.pow(10,S)).toPrecision(x+1+(E+S)%E),!_.match(/[Ee]/)){var C=Math.floor(Math.log(n)*Math.LOG10E);_.indexOf(".")===-1?_=_.charAt(0)+"."+_.substr(1)+"E+"+(C-_.length+S):_+="E+"+(C-S),_=_.replace(/\+-/,"-")}_=_.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(T,B,A,I){return B+A+I.substr(0,(E+S)%E)+"."+I.substr(S)+"E"})}else _=n.toExponential(x);return t.match(/E\+00$/)&&_.match(/e[+-]\d$/)&&(_=_.substr(0,_.length-1)+"0"+_.charAt(_.length-1)),t.match(/E\-/)&&_.match(/e\+/)&&(_=_.replace(/e\+/,"e")),_.replace("e","E")}function write_num_int(t,n,_){if(t.charCodeAt(0)===40&&!n.match(closeparen)){var x=n.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return _>=0?write_num_int("n",x,_):"("+write_num_int("n",x,-_)+")"}if(n.charCodeAt(n.length-1)===44)return write_num_cm2(t,n,_);if(n.indexOf("%")!==-1)return write_num_pct2(t,n,_);if(n.indexOf("E")!==-1)return write_num_exp2(n,_);if(n.charCodeAt(0)===36)return"$"+write_num_int(t,n.substr(n.charAt(1)==" "?2:1),_);var E,S,C,T,B=Math.abs(_),A=_<0?"-":"";if(n.match(/^00+$/))return A+pad0(B,n.length);if(n.match(/^[#?]+$/))return E=""+_,_===0&&(E=""),E.length>n.length?E:hashq(n.substr(0,n.length-E.length))+E;if(S=n.match(frac1))return write_num_f2(S,B,A);if(n.match(/^#+0+$/))return A+pad0(B,n.length-n.indexOf("0"));if(S=n.match(dec1))return E=(""+_).replace(/^([^\.]+)$/,"$1."+hashq(S[1])).replace(/\.$/,"."+hashq(S[1])),E=E.replace(/\.(\d*)$/,function(L,F){return"."+F+fill("0",hashq(S[1]).length-F.length)}),n.indexOf("0.")!==-1?E:E.replace(/^0\./,".");if(n=n.replace(/^#+([0.])/,"$1"),S=n.match(/^(0*)\.(#*)$/))return A+(""+B).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,S[1].length?"0.":".");if(S=n.match(/^#{1,3},##0(\.?)$/))return A+commaify(""+B);if(S=n.match(/^#,##0\.([#0]*0)$/))return _<0?"-"+write_num_int(t,n,-_):commaify(""+_)+"."+fill("0",S[1].length);if(S=n.match(/^#,#*,#0/))return write_num_int(t,n.replace(/^#,#*,/,""),_);if(S=n.match(/^([0#]+)(\\?-([0#]+))+$/))return E=_strrev(write_num_int(t,n.replace(/[\\-]/g,""),_)),C=0,_strrev(_strrev(n.replace(/\\/g,"")).replace(/[0#]/g,function(L){return C<E.length?E.charAt(C++):L==="0"?"0":""}));if(n.match(phone))return E=write_num_int(t,"##########",_),"("+E.substr(0,3)+") "+E.substr(3,3)+"-"+E.substr(6);var I="";if(S=n.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return C=Math.min(S[4].length,7),T=SSF_frac(B,Math.pow(10,C)-1,!1),E=""+A,I=write_num("n",S[1],T[1]),I.charAt(I.length-1)==" "&&(I=I.substr(0,I.length-1)+"0"),E+=I+S[2]+"/"+S[3],I=rpad_(T[2],C),I.length<S[4].length&&(I=hashq(S[4].substr(S[4].length-I.length))+I),E+=I,E;if(S=n.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return C=Math.min(Math.max(S[1].length,S[4].length),7),T=SSF_frac(B,Math.pow(10,C)-1,!0),A+(T[0]||(T[1]?"":"0"))+" "+(T[1]?pad_(T[1],C)+S[2]+"/"+S[3]+rpad_(T[2],C):fill(" ",2*C+1+S[2].length+S[3].length));if(S=n.match(/^[#0?]+$/))return E=""+_,n.length<=E.length?E:hashq(n.substr(0,n.length-E.length))+E;if(S=n.match(/^([#0]+)\.([#0]+)$/)){E=""+_.toFixed(Math.min(S[2].length,10)).replace(/([^0])0+$/,"$1"),C=E.indexOf(".");var D=n.indexOf(".")-C,M=n.length-E.length-D;return hashq(n.substr(0,D)+E+n.substr(n.length-M))}if(S=n.match(/^00,000\.([#0]*0)$/))return _<0?"-"+write_num_int(t,n,-_):commaify(""+_).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(L){return"00,"+(L.length<3?pad0(0,3-L.length):"")+L})+"."+pad0(0,S[1].length);switch(n){case"###,###":case"##,###":case"#,###":var V=commaify(""+B);return V!=="0"?A+V:"";default:if(n.match(/\.[0#?]*$/))return write_num_int(t,n.slice(0,n.lastIndexOf(".")),_)+hashq(n.slice(n.lastIndexOf(".")))}throw new Error("unsupported format |"+n+"|")}function write_num(t,n,_){return(_|0)===_?write_num_int(t,n,_):write_num_flt(t,n,_)}function SSF_split_fmt(t){for(var n=[],_=!1,x=0,E=0;x<t.length;++x)switch(t.charCodeAt(x)){case 34:_=!_;break;case 95:case 42:case 92:++x;break;case 59:n[n.length]=t.substr(E,x-E),E=x+1}if(n[n.length]=t.substr(E),_===!0)throw new Error("Format |"+t+"| unterminated string ");return n}var SSF_abstime=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fmt_is_date(t){for(var n=0,_="",x="";n<t.length;)switch(_=t.charAt(n)){case"G":SSF_isgeneral(t,n)&&(n+=6),n++;break;case'"':for(;t.charCodeAt(++n)!==34&&n<t.length;);++n;break;case"\\":n+=2;break;case"_":n+=2;break;case"@":++n;break;case"B":case"b":if(t.charAt(n+1)==="1"||t.charAt(n+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(n,3).toUpperCase()==="A/P"||t.substr(n,5).toUpperCase()==="AM/PM"||t.substr(n,5).toUpperCase()==="/")return!0;++n;break;case"[":for(x=_;t.charAt(n++)!=="]"&&n<t.length;)x+=t.charAt(n);if(x.match(SSF_abstime))return!0;break;case".":case"0":case"#":for(;n<t.length&&("0#?.,E+-%".indexOf(_=t.charAt(++n))>-1||_=="\\"&&t.charAt(n+1)=="-"&&"0#".indexOf(t.charAt(n+2))>-1););break;case"?":for(;t.charAt(++n)===_;);break;case"*":++n,(t.charAt(n)==" "||t.charAt(n)=="*")&&++n;break;case"(":case")":++n;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;n<t.length&&"0123456789".indexOf(t.charAt(++n))>-1;);break;case" ":++n;break;default:++n;break}return!1}function eval_fmt(t,n,_,x){for(var E=[],S="",C=0,T="",B="t",A,I,D,M="H";C<t.length;)switch(T=t.charAt(C)){case"G":if(!SSF_isgeneral(t,C))throw new Error("unrecognized character "+T+" in "+t);E[E.length]={t:"G",v:"General"},C+=7;break;case'"':for(S="";(D=t.charCodeAt(++C))!==34&&C<t.length;)S+=String.fromCharCode(D);E[E.length]={t:"t",v:S},++C;break;case"\\":var V=t.charAt(++C),L=V==="("||V===")"?V:"t";E[E.length]={t:L,v:V},++C;break;case"_":E[E.length]={t:"t",v:" "},C+=2;break;case"@":E[E.length]={t:"T",v:n},++C;break;case"B":case"b":if(t.charAt(C+1)==="1"||t.charAt(C+1)==="2"){if(A==null&&(A=SSF_parse_date_code(n,_,t.charAt(C+1)==="2"),A==null))return"";E[E.length]={t:"X",v:t.substr(C,2)},B=T,C+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":T=T.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(n<0||A==null&&(A=SSF_parse_date_code(n,_),A==null))return"";for(S=T;++C<t.length&&t.charAt(C).toLowerCase()===T;)S+=T;T==="m"&&B.toLowerCase()==="h"&&(T="M"),T==="h"&&(T=M),E[E.length]={t:T,v:S},B=T;break;case"A":case"a":case"":var F={t:T,v:T};if(A==null&&(A=SSF_parse_date_code(n,_)),t.substr(C,3).toUpperCase()==="A/P"?(A!=null&&(F.v=A.H>=12?t.charAt(C+2):T),F.t="T",M="h",C+=3):t.substr(C,5).toUpperCase()==="AM/PM"?(A!=null&&(F.v=A.H>=12?"PM":"AM"),F.t="T",C+=5,M="h"):t.substr(C,5).toUpperCase()==="/"?(A!=null&&(F.v=A.H>=12?"":""),F.t="T",C+=5,M="h"):(F.t="t",++C),A==null&&F.t==="T")return"";E[E.length]=F,B=T;break;case"[":for(S=T;t.charAt(C++)!=="]"&&C<t.length;)S+=t.charAt(C);if(S.slice(-1)!=="]")throw'unterminated "[" block: |'+S+"|";if(S.match(SSF_abstime)){if(A==null&&(A=SSF_parse_date_code(n,_),A==null))return"";E[E.length]={t:"Z",v:S.toLowerCase()},B=S.charAt(1)}else S.indexOf("$")>-1&&(S=(S.match(/\$([^-\[\]]*)/)||[])[1]||"$",fmt_is_date(t)||(E[E.length]={t:"t",v:S}));break;case".":if(A!=null){for(S=T;++C<t.length&&(T=t.charAt(C))==="0";)S+=T;E[E.length]={t:"s",v:S};break}case"0":case"#":for(S=T;++C<t.length&&"0#?.,E+-%".indexOf(T=t.charAt(C))>-1;)S+=T;E[E.length]={t:"n",v:S};break;case"?":for(S=T;t.charAt(++C)===T;)S+=T;E[E.length]={t:T,v:S},B=T;break;case"*":++C,(t.charAt(C)==" "||t.charAt(C)=="*")&&++C;break;case"(":case")":E[E.length]={t:x===1?"t":T,v:T},++C;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(S=T;C<t.length&&"0123456789".indexOf(t.charAt(++C))>-1;)S+=t.charAt(C);E[E.length]={t:"D",v:S};break;case" ":E[E.length]={t:T,v:T},++C;break;case"$":E[E.length]={t:"t",v:"$"},++C;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(T)===-1)throw new Error("unrecognized character "+T+" in "+t);E[E.length]={t:"t",v:T},++C;break}var j=0,U=0,H;for(C=E.length-1,B="t";C>=0;--C)switch(E[C].t){case"h":case"H":E[C].t=M,B="h",j<1&&(j=1);break;case"s":(H=E[C].v.match(/\.0+$/))&&(U=Math.max(U,H[0].length-1)),j<3&&(j=3);case"d":case"y":case"M":case"e":B=E[C].t;break;case"m":B==="s"&&(E[C].t="M",j<2&&(j=2));break;case"X":break;case"Z":j<1&&E[C].v.match(/[Hh]/)&&(j=1),j<2&&E[C].v.match(/[Mm]/)&&(j=2),j<3&&E[C].v.match(/[Ss]/)&&(j=3)}switch(j){case 0:break;case 1:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M),A.M>=60&&(A.M=0,++A.H);break;case 2:A.u>=.5&&(A.u=0,++A.S),A.S>=60&&(A.S=0,++A.M);break}var Y="",Z;for(C=0;C<E.length;++C)switch(E[C].t){case"t":case"T":case" ":case"D":break;case"X":E[C].v="",E[C].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":E[C].v=SSF_write_date(E[C].t.charCodeAt(0),E[C].v,A,U),E[C].t="t";break;case"n":case"?":for(Z=C+1;E[Z]!=null&&((T=E[Z].t)==="?"||T==="D"||(T===" "||T==="t")&&E[Z+1]!=null&&(E[Z+1].t==="?"||E[Z+1].t==="t"&&E[Z+1].v==="/")||E[C].t==="("&&(T===" "||T==="n"||T===")")||T==="t"&&(E[Z].v==="/"||E[Z].v===" "&&E[Z+1]!=null&&E[Z+1].t=="?"));)E[C].v+=E[Z].v,E[Z]={v:"",t:";"},++Z;Y+=E[C].v,C=Z-1;break;case"G":E[C].t="t",E[C].v=SSF_general(n,_);break}var ne="",re,X;if(Y.length>0){Y.charCodeAt(0)==40?(re=n<0&&Y.charCodeAt(0)===45?-n:n,X=write_num("n",Y,re)):(re=n<0&&x>1?-n:n,X=write_num("n",Y,re),re<0&&E[0]&&E[0].t=="t"&&(X=X.substr(1),E[0].v="-"+E[0].v)),Z=X.length-1;var ce=E.length;for(C=0;C<E.length;++C)if(E[C]!=null&&E[C].t!="t"&&E[C].v.indexOf(".")>-1){ce=C;break}var ue=E.length;if(ce===E.length&&X.indexOf("E")===-1){for(C=E.length-1;C>=0;--C)E[C]==null||"n?".indexOf(E[C].t)===-1||(Z>=E[C].v.length-1?(Z-=E[C].v.length,E[C].v=X.substr(Z+1,E[C].v.length)):Z<0?E[C].v="":(E[C].v=X.substr(0,Z+1),Z=-1),E[C].t="t",ue=C);Z>=0&&ue<E.length&&(E[ue].v=X.substr(0,Z+1)+E[ue].v)}else if(ce!==E.length&&X.indexOf("E")===-1){for(Z=X.indexOf(".")-1,C=ce;C>=0;--C)if(!(E[C]==null||"n?".indexOf(E[C].t)===-1)){for(I=E[C].v.indexOf(".")>-1&&C===ce?E[C].v.indexOf(".")-1:E[C].v.length-1,ne=E[C].v.substr(I+1);I>=0;--I)Z>=0&&(E[C].v.charAt(I)==="0"||E[C].v.charAt(I)==="#")&&(ne=X.charAt(Z--)+ne);E[C].v=ne,E[C].t="t",ue=C}for(Z>=0&&ue<E.length&&(E[ue].v=X.substr(0,Z+1)+E[ue].v),Z=X.indexOf(".")+1,C=ce;C<E.length;++C)if(!(E[C]==null||"n?(".indexOf(E[C].t)===-1&&C!==ce)){for(I=E[C].v.indexOf(".")>-1&&C===ce?E[C].v.indexOf(".")+1:0,ne=E[C].v.substr(0,I);I<E[C].v.length;++I)Z<X.length&&(ne+=X.charAt(Z++));E[C].v=ne,E[C].t="t",ue=C}}}for(C=0;C<E.length;++C)E[C]!=null&&"n?".indexOf(E[C].t)>-1&&(re=x>1&&n<0&&C>0&&E[C-1].v==="-"?-n:n,E[C].v=write_num(E[C].t,E[C].v,re),E[C].t="t");var _e="";for(C=0;C!==E.length;++C)E[C]!=null&&(_e+=E[C].v);return _e}var cfregex2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function chkcond(t,n){if(n==null)return!1;var _=parseFloat(n[2]);switch(n[1]){case"=":if(t==_)return!0;break;case">":if(t>_)return!0;break;case"<":if(t<_)return!0;break;case"<>":if(t!=_)return!0;break;case">=":if(t>=_)return!0;break;case"<=":if(t<=_)return!0;break}return!1}function choose_fmt(t,n){var _=SSF_split_fmt(t),x=_.length,E=_[x-1].indexOf("@");if(x<4&&E>-1&&--x,_.length>4)throw new Error("cannot find right format for |"+_.join("|")+"|");if(typeof n!="number")return[4,_.length===4||E>-1?_[_.length-1]:"@"];switch(_.length){case 1:_=E>-1?["General","General","General",_[0]]:[_[0],_[0],_[0],"@"];break;case 2:_=E>-1?[_[0],_[0],_[0],_[1]]:[_[0],_[1],_[0],"@"];break;case 3:_=E>-1?[_[0],_[1],_[0],_[2]]:[_[0],_[1],_[2],"@"];break}var S=n>0?_[0]:n<0?_[1]:_[2];if(_[0].indexOf("[")===-1&&_[1].indexOf("[")===-1)return[x,S];if(_[0].match(/\[[=<>]/)!=null||_[1].match(/\[[=<>]/)!=null){var C=_[0].match(cfregex2),T=_[1].match(cfregex2);return chkcond(n,C)?[x,_[0]]:chkcond(n,T)?[x,_[1]]:[x,_[C!=null&&T!=null?2:1]]}return[x,S]}function SSF_format(t,n,_){_==null&&(_={});var x="";switch(typeof t){case"string":t=="m/d/yy"&&_.dateNF?x=_.dateNF:x=t;break;case"number":t==14&&_.dateNF?x=_.dateNF:x=(_.table!=null?_.table:table_fmt)[t],x==null&&(x=_.table&&_.table[SSF_default_map[t]]||table_fmt[SSF_default_map[t]]),x==null&&(x=SSF_default_str[t]||"General");break}if(SSF_isgeneral(x,0))return SSF_general(n,_);n instanceof Date&&(n=datenum_local(n,_.date1904));var E=choose_fmt(x,n);if(SSF_isgeneral(E[1]))return SSF_general(n,_);if(n===!0)n="TRUE";else if(n===!1)n="FALSE";else if(n===""||n==null)return"";return eval_fmt(E[1],n,_,E[0])}function SSF_load(t,n){if(typeof n!="number"){n=+n||-1;for(var _=0;_<392;++_){if(table_fmt[_]==null){n<0&&(n=_);continue}if(table_fmt[_]==t){n=_;break}}n<0&&(n=391)}return table_fmt[n]=t,n}function SSF_load_table(t){for(var n=0;n!=392;++n)t[n]!==void 0&&SSF_load(t[n],n)}function make_ssf(){table_fmt=SSF_init_table()}var SSFImplicit={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},dateNFregex=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function dateNF_regex(t){var n=typeof t=="number"?table_fmt[t]:t;return n=n.replace(dateNFregex,"(\\d+)"),new RegExp("^"+n+"$")}function dateNF_fix(t,n,_){var x=-1,E=-1,S=-1,C=-1,T=-1,B=-1;(n.match(dateNFregex)||[]).forEach(function(D,M){var V=parseInt(_[M+1],10);switch(D.toLowerCase().charAt(0)){case"y":x=V;break;case"d":S=V;break;case"h":C=V;break;case"s":B=V;break;case"m":C>=0?T=V:E=V;break}}),B>=0&&T==-1&&E>=0&&(T=E,E=-1);var A=(""+(x>=0?x:new Date().getFullYear())).slice(-4)+"-"+("00"+(E>=1?E:1)).slice(-2)+"-"+("00"+(S>=1?S:1)).slice(-2);A.length==7&&(A="0"+A),A.length==8&&(A="20"+A);var I=("00"+(C>=0?C:0)).slice(-2)+":"+("00"+(T>=0?T:0)).slice(-2)+":"+("00"+(B>=0?B:0)).slice(-2);return C==-1&&T==-1&&B==-1?A:x==-1&&E==-1&&S==-1?I:A+"T"+I}var bad_formats={"d.m":"d\\.m"};function SSF__load(t,n){return SSF_load(bad_formats[t]||t,n)}var CRC32=function(){var t={};t.version="1.2.0";function n(){for(var X=0,ce=new Array(256),ue=0;ue!=256;++ue)X=ue,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,ce[ue]=X;return typeof Int32Array<"u"?new Int32Array(ce):ce}var _=n();function x(X){var ce=0,ue=0,_e=0,ye=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(_e=0;_e!=256;++_e)ye[_e]=X[_e];for(_e=0;_e!=256;++_e)for(ue=X[_e],ce=256+_e;ce<4096;ce+=256)ue=ye[ce]=ue>>>8^X[ue&255];var ie=[];for(_e=1;_e!=16;++_e)ie[_e-1]=typeof Int32Array<"u"?ye.subarray(_e*256,_e*256+256):ye.slice(_e*256,_e*256+256);return ie}var E=x(_),S=E[0],C=E[1],T=E[2],B=E[3],A=E[4],I=E[5],D=E[6],M=E[7],V=E[8],L=E[9],F=E[10],j=E[11],U=E[12],H=E[13],Y=E[14];function Z(X,ce){for(var ue=ce^-1,_e=0,ye=X.length;_e<ye;)ue=ue>>>8^_[(ue^X.charCodeAt(_e++))&255];return~ue}function ne(X,ce){for(var ue=ce^-1,_e=X.length-15,ye=0;ye<_e;)ue=Y[X[ye++]^ue&255]^H[X[ye++]^ue>>8&255]^U[X[ye++]^ue>>16&255]^j[X[ye++]^ue>>>24]^F[X[ye++]]^L[X[ye++]]^V[X[ye++]]^M[X[ye++]]^D[X[ye++]]^I[X[ye++]]^A[X[ye++]]^B[X[ye++]]^T[X[ye++]]^C[X[ye++]]^S[X[ye++]]^_[X[ye++]];for(_e+=15;ye<_e;)ue=ue>>>8^_[(ue^X[ye++])&255];return~ue}function re(X,ce){for(var ue=ce^-1,_e=0,ye=X.length,ie=0,W=0;_e<ye;)ie=X.charCodeAt(_e++),ie<128?ue=ue>>>8^_[(ue^ie)&255]:ie<2048?(ue=ue>>>8^_[(ue^(192|ie>>6&31))&255],ue=ue>>>8^_[(ue^(128|ie&63))&255]):ie>=55296&&ie<57344?(ie=(ie&1023)+64,W=X.charCodeAt(_e++)&1023,ue=ue>>>8^_[(ue^(240|ie>>8&7))&255],ue=ue>>>8^_[(ue^(128|ie>>2&63))&255],ue=ue>>>8^_[(ue^(128|W>>6&15|(ie&3)<<4))&255],ue=ue>>>8^_[(ue^(128|W&63))&255]):(ue=ue>>>8^_[(ue^(224|ie>>12&15))&255],ue=ue>>>8^_[(ue^(128|ie>>6&63))&255],ue=ue>>>8^_[(ue^(128|ie&63))&255]);return~ue}return t.table=_,t.bstr=Z,t.buf=ne,t.str=re,t}(),CFB=function t(){var n={};n.version="1.2.2";function _(pe,ke){for(var Oe=pe.split("/"),Fe=ke.split("/"),ze=0,Xe=0,tt=Math.min(Oe.length,Fe.length);ze<tt;++ze){if(Xe=Oe[ze].length-Fe[ze].length)return Xe;if(Oe[ze]!=Fe[ze])return Oe[ze]<Fe[ze]?-1:1}return Oe.length-Fe.length}function x(pe){if(pe.charAt(pe.length-1)=="/")return pe.slice(0,-1).indexOf("/")===-1?pe:x(pe.slice(0,-1));var ke=pe.lastIndexOf("/");return ke===-1?pe:pe.slice(0,ke+1)}function E(pe){if(pe.charAt(pe.length-1)=="/")return E(pe.slice(0,-1));var ke=pe.lastIndexOf("/");return ke===-1?pe:pe.slice(ke+1)}function S(pe,ke){typeof ke=="string"&&(ke=new Date(ke));var Oe=ke.getHours();Oe=Oe<<6|ke.getMinutes(),Oe=Oe<<5|ke.getSeconds()>>>1,pe.write_shift(2,Oe);var Fe=ke.getFullYear()-1980;Fe=Fe<<4|ke.getMonth()+1,Fe=Fe<<5|ke.getDate(),pe.write_shift(2,Fe)}function C(pe){var ke=pe.read_shift(2)&65535,Oe=pe.read_shift(2)&65535,Fe=new Date,ze=Oe&31;Oe>>>=5;var Xe=Oe&15;Oe>>>=4,Fe.setMilliseconds(0),Fe.setFullYear(Oe+1980),Fe.setMonth(Xe-1),Fe.setDate(ze);var tt=ke&31;ke>>>=5;var it=ke&63;return ke>>>=6,Fe.setHours(ke),Fe.setMinutes(it),Fe.setSeconds(tt<<1),Fe}function T(pe){prep_blob(pe,0);for(var ke={},Oe=0;pe.l<=pe.length-4;){var Fe=pe.read_shift(2),ze=pe.read_shift(2),Xe=pe.l+ze,tt={};switch(Fe){case 21589:Oe=pe.read_shift(1),Oe&1&&(tt.mtime=pe.read_shift(4)),ze>5&&(Oe&2&&(tt.atime=pe.read_shift(4)),Oe&4&&(tt.ctime=pe.read_shift(4))),tt.mtime&&(tt.mt=new Date(tt.mtime*1e3));break;case 1:{var it=pe.read_shift(4),ot=pe.read_shift(4);tt.usz=ot*Math.pow(2,32)+it,it=pe.read_shift(4),ot=pe.read_shift(4),tt.csz=ot*Math.pow(2,32)+it}break}pe.l=Xe,ke[Fe]=tt}return ke}var B;function A(){return B||(B=_fs)}function I(pe,ke){if(pe[0]==80&&pe[1]==75)return lr(pe,ke);if((pe[0]|32)==109&&(pe[1]|32)==105)return ir(pe,ke);if(pe.length<512)throw new Error("CFB file size "+pe.length+" < 512");var Oe=3,Fe=512,ze=0,Xe=0,tt=0,it=0,ot=0,at=[],ct=pe.slice(0,512);prep_blob(ct,0);var dt=D(ct);switch(Oe=dt[0],Oe){case 3:Fe=512;break;case 4:Fe=4096;break;case 0:if(dt[1]==0)return lr(pe,ke);default:throw new Error("Major Version: Expected 3 or 4 saw "+Oe)}Fe!==512&&(ct=pe.slice(0,Fe),prep_blob(ct,28));var yt=pe.slice(0,Fe);M(ct,Oe);var Et=ct.read_shift(4,"i");if(Oe===3&&Et!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Et);ct.l+=4,tt=ct.read_shift(4,"i"),ct.l+=4,ct.chk("00100000","Mini Stream Cutoff Size: "),it=ct.read_shift(4,"i"),ze=ct.read_shift(4,"i"),ot=ct.read_shift(4,"i"),Xe=ct.read_shift(4,"i");for(var mt=-1,xt=0;xt<109&&(mt=ct.read_shift(4,"i"),!(mt<0));++xt)at[xt]=mt;var Mt=V(pe,Fe);j(ot,Xe,Mt,Fe,at);var Ot=H(Mt,tt,at,Fe);tt<Ot.length&&(Ot[tt].name="!Directory"),ze>0&&it!==W&&(Ot[it].name="!MiniFAT"),Ot[at[0]].name="!FAT",Ot.fat_addrs=at,Ot.ssz=Fe;var Ht={},Ft=[],Wt=[],Jt=[];Y(tt,Ot,Mt,Ft,ze,Ht,Wt,it),L(Wt,Jt,Ft),Ft.shift();var Kt={FileIndex:Wt,FullPaths:Jt};return ke&&ke.raw&&(Kt.raw={header:yt,sectors:Mt}),Kt}function D(pe){if(pe[pe.l]==80&&pe[pe.l+1]==75)return[0,0];pe.chk(O,"Header Signature: "),pe.l+=16;var ke=pe.read_shift(2,"u");return[pe.read_shift(2,"u"),ke]}function M(pe,ke){var Oe=9;switch(pe.l+=2,Oe=pe.read_shift(2)){case 9:if(ke!=3)throw new Error("Sector Shift: Expected 9 saw "+Oe);break;case 12:if(ke!=4)throw new Error("Sector Shift: Expected 12 saw "+Oe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Oe)}pe.chk("0600","Mini Sector Shift: "),pe.chk("000000000000","Reserved: ")}function V(pe,ke){for(var Oe=Math.ceil(pe.length/ke)-1,Fe=[],ze=1;ze<Oe;++ze)Fe[ze-1]=pe.slice(ze*ke,(ze+1)*ke);return Fe[Oe-1]=pe.slice(Oe*ke),Fe}function L(pe,ke,Oe){for(var Fe=0,ze=0,Xe=0,tt=0,it=0,ot=Oe.length,at=[],ct=[];Fe<ot;++Fe)at[Fe]=ct[Fe]=Fe,ke[Fe]=Oe[Fe];for(;it<ct.length;++it)Fe=ct[it],ze=pe[Fe].L,Xe=pe[Fe].R,tt=pe[Fe].C,at[Fe]===Fe&&(ze!==-1&&at[ze]!==ze&&(at[Fe]=at[ze]),Xe!==-1&&at[Xe]!==Xe&&(at[Fe]=at[Xe])),tt!==-1&&(at[tt]=Fe),ze!==-1&&Fe!=at[Fe]&&(at[ze]=at[Fe],ct.lastIndexOf(ze)<it&&ct.push(ze)),Xe!==-1&&Fe!=at[Fe]&&(at[Xe]=at[Fe],ct.lastIndexOf(Xe)<it&&ct.push(Xe));for(Fe=1;Fe<ot;++Fe)at[Fe]===Fe&&(Xe!==-1&&at[Xe]!==Xe?at[Fe]=at[Xe]:ze!==-1&&at[ze]!==ze&&(at[Fe]=at[ze]));for(Fe=1;Fe<ot;++Fe)if(pe[Fe].type!==0){if(it=Fe,it!=at[it])do it=at[it],ke[Fe]=ke[it]+"/"+ke[Fe];while(it!==0&&at[it]!==-1&&it!=at[it]);at[Fe]=-1}for(ke[0]+="/",Fe=1;Fe<ot;++Fe)pe[Fe].type!==2&&(ke[Fe]+="/")}function F(pe,ke,Oe){for(var Fe=pe.start,ze=pe.size,Xe=[],tt=Fe;Oe&&ze>0&&tt>=0;)Xe.push(ke.slice(tt*ie,tt*ie+ie)),ze-=ie,tt=__readInt32LE(Oe,tt*4);return Xe.length===0?new_buf(0):bconcat(Xe).slice(0,pe.size)}function j(pe,ke,Oe,Fe,ze){var Xe=W;if(pe===W){if(ke!==0)throw new Error("DIFAT chain shorter than expected")}else if(pe!==-1){var tt=Oe[pe],it=(Fe>>>2)-1;if(!tt)return;for(var ot=0;ot<it&&(Xe=__readInt32LE(tt,ot*4))!==W;++ot)ze.push(Xe);ke>=1&&j(__readInt32LE(tt,Fe-4),ke-1,Oe,Fe,ze)}}function U(pe,ke,Oe,Fe,ze){var Xe=[],tt=[];ze||(ze=[]);var it=Fe-1,ot=0,at=0;for(ot=ke;ot>=0;){ze[ot]=!0,Xe[Xe.length]=ot,tt.push(pe[ot]);var ct=Oe[Math.floor(ot*4/Fe)];if(at=ot*4&it,Fe<4+at)throw new Error("FAT boundary crossed: "+ot+" 4 "+Fe);if(!pe[ct])break;ot=__readInt32LE(pe[ct],at)}return{nodes:Xe,data:__toBuffer([tt])}}function H(pe,ke,Oe,Fe){var ze=pe.length,Xe=[],tt=[],it=[],ot=[],at=Fe-1,ct=0,dt=0,yt=0,Et=0;for(ct=0;ct<ze;++ct)if(it=[],yt=ct+ke,yt>=ze&&(yt-=ze),!tt[yt]){ot=[];var mt=[];for(dt=yt;dt>=0;){mt[dt]=!0,tt[dt]=!0,it[it.length]=dt,ot.push(pe[dt]);var xt=Oe[Math.floor(dt*4/Fe)];if(Et=dt*4&at,Fe<4+Et)throw new Error("FAT boundary crossed: "+dt+" 4 "+Fe);if(!pe[xt]||(dt=__readInt32LE(pe[xt],Et),mt[dt]))break}Xe[yt]={nodes:it,data:__toBuffer([ot])}}return Xe}function Y(pe,ke,Oe,Fe,ze,Xe,tt,it){for(var ot=0,at=Fe.length?2:0,ct=ke[pe].data,dt=0,yt=0,Et;dt<ct.length;dt+=128){var mt=ct.slice(dt,dt+128);prep_blob(mt,64),yt=mt.read_shift(2),Et=__utf16le(mt,0,yt-at),Fe.push(Et);var xt={name:Et,type:mt.read_shift(1),color:mt.read_shift(1),L:mt.read_shift(4,"i"),R:mt.read_shift(4,"i"),C:mt.read_shift(4,"i"),clsid:mt.read_shift(16),state:mt.read_shift(4,"i"),start:0,size:0},Mt=mt.read_shift(2)+mt.read_shift(2)+mt.read_shift(2)+mt.read_shift(2);Mt!==0&&(xt.ct=Z(mt,mt.l-8));var Ot=mt.read_shift(2)+mt.read_shift(2)+mt.read_shift(2)+mt.read_shift(2);Ot!==0&&(xt.mt=Z(mt,mt.l-8)),xt.start=mt.read_shift(4,"i"),xt.size=mt.read_shift(4,"i"),xt.size<0&&xt.start<0&&(xt.size=xt.type=0,xt.start=W,xt.name=""),xt.type===5?(ot=xt.start,ze>0&&ot!==W&&(ke[ot].name="!StreamData")):xt.size>=4096?(xt.storage="fat",ke[xt.start]===void 0&&(ke[xt.start]=U(Oe,xt.start,ke.fat_addrs,ke.ssz)),ke[xt.start].name=xt.name,xt.content=ke[xt.start].data.slice(0,xt.size)):(xt.storage="minifat",xt.size<0?xt.size=0:ot!==W&&xt.start!==W&&ke[ot]&&(xt.content=F(xt,ke[ot].data,(ke[it]||{}).data))),xt.content&&prep_blob(xt.content,0),Xe[Et]=xt,tt.push(xt)}}function Z(pe,ke){return new Date((__readUInt32LE(pe,ke+4)/1e7*Math.pow(2,32)+__readUInt32LE(pe,ke)/1e7-11644473600)*1e3)}function ne(pe,ke){return A(),I(B.readFileSync(pe),ke)}function re(pe,ke){var Oe=ke&&ke.type;switch(Oe||has_buf&&Buffer.isBuffer(pe)&&(Oe="buffer"),Oe||"base64"){case"file":return ne(pe,ke);case"base64":return I(s2a(Base64_decode(pe)),ke);case"binary":return I(s2a(pe),ke)}return I(pe,ke)}function X(pe,ke){var Oe=ke||{},Fe=Oe.root||"Root Entry";if(pe.FullPaths||(pe.FullPaths=[]),pe.FileIndex||(pe.FileIndex=[]),pe.FullPaths.length!==pe.FileIndex.length)throw new Error("inconsistent CFB structure");pe.FullPaths.length===0&&(pe.FullPaths[0]=Fe+"/",pe.FileIndex[0]={name:Fe,type:5}),Oe.CLSID&&(pe.FileIndex[0].clsid=Oe.CLSID),ce(pe)}function ce(pe){var ke="Sh33tJ5";if(!CFB.find(pe,"/"+ke)){var Oe=new_buf(4);Oe[0]=55,Oe[1]=Oe[3]=50,Oe[2]=54,pe.FileIndex.push({name:ke,type:2,content:Oe,size:4,L:69,R:69,C:69}),pe.FullPaths.push(pe.FullPaths[0]+ke),ue(pe)}}function ue(pe,ke){X(pe);for(var Oe=!1,Fe=!1,ze=pe.FullPaths.length-1;ze>=0;--ze){var Xe=pe.FileIndex[ze];switch(Xe.type){case 0:Fe?Oe=!0:(pe.FileIndex.pop(),pe.FullPaths.pop());break;case 1:case 2:case 5:Fe=!0,isNaN(Xe.R*Xe.L*Xe.C)&&(Oe=!0),Xe.R>-1&&Xe.L>-1&&Xe.R==Xe.L&&(Oe=!0);break;default:Oe=!0;break}}if(!(!Oe&&!ke)){var tt=new Date(1987,1,19),it=0,ot=Object.create?Object.create(null):{},at=[];for(ze=0;ze<pe.FullPaths.length;++ze)ot[pe.FullPaths[ze]]=!0,pe.FileIndex[ze].type!==0&&at.push([pe.FullPaths[ze],pe.FileIndex[ze]]);for(ze=0;ze<at.length;++ze){var ct=x(at[ze][0]);for(Fe=ot[ct];!Fe;){for(;x(ct)&&!ot[x(ct)];)ct=x(ct);at.push([ct,{name:E(ct).replace("/",""),type:1,clsid:J,ct:tt,mt:tt,content:null}]),ot[ct]=!0,ct=x(at[ze][0]),Fe=ot[ct]}}for(at.sort(function(Et,mt){return _(Et[0],mt[0])}),pe.FullPaths=[],pe.FileIndex=[],ze=0;ze<at.length;++ze)pe.FullPaths[ze]=at[ze][0],pe.FileIndex[ze]=at[ze][1];for(ze=0;ze<at.length;++ze){var dt=pe.FileIndex[ze],yt=pe.FullPaths[ze];if(dt.name=E(yt).replace("/",""),dt.L=dt.R=dt.C=-(dt.color=1),dt.size=dt.content?dt.content.length:0,dt.start=0,dt.clsid=dt.clsid||J,ze===0)dt.C=at.length>1?1:-1,dt.size=0,dt.type=5;else if(yt.slice(-1)=="/"){for(it=ze+1;it<at.length&&x(pe.FullPaths[it])!=yt;++it);for(dt.C=it>=at.length?-1:it,it=ze+1;it<at.length&&x(pe.FullPaths[it])!=x(yt);++it);dt.R=it>=at.length?-1:it,dt.type=1}else x(pe.FullPaths[ze+1]||"")==x(yt)&&(dt.R=ze+1),dt.type=2}}}function _e(pe,ke){var Oe=ke||{};if(Oe.fileType=="mad")return jt(pe,Oe);switch(ue(pe),Oe.fileType){case"zip":return Rt(pe,Oe)}var Fe=function(Et){for(var mt=0,xt=0,Mt=0;Mt<Et.FileIndex.length;++Mt){var Ot=Et.FileIndex[Mt];if(Ot.content){var Ht=Ot.content.length;Ht>0&&(Ht<4096?mt+=Ht+63>>6:xt+=Ht+511>>9)}}for(var Ft=Et.FullPaths.length+3>>2,Wt=mt+7>>3,Jt=mt+127>>7,Kt=Wt+xt+Ft+Jt,gt=Kt+127>>7,_t=gt<=109?0:Math.ceil((gt-109)/127);Kt+gt+_t+127>>7>gt;)_t=++gt<=109?0:Math.ceil((gt-109)/127);var It=[1,_t,gt,Jt,Ft,xt,mt,0];return Et.FileIndex[0].size=mt<<6,It[7]=(Et.FileIndex[0].start=It[0]+It[1]+It[2]+It[3]+It[4]+It[5])+(It[6]+7>>3),It}(pe),ze=new_buf(Fe[7]<<9),Xe=0,tt=0;{for(Xe=0;Xe<8;++Xe)ze.write_shift(1,z[Xe]);for(Xe=0;Xe<8;++Xe)ze.write_shift(2,0);for(ze.write_shift(2,62),ze.write_shift(2,3),ze.write_shift(2,65534),ze.write_shift(2,9),ze.write_shift(2,6),Xe=0;Xe<3;++Xe)ze.write_shift(2,0);for(ze.write_shift(4,0),ze.write_shift(4,Fe[2]),ze.write_shift(4,Fe[0]+Fe[1]+Fe[2]+Fe[3]-1),ze.write_shift(4,0),ze.write_shift(4,4096),ze.write_shift(4,Fe[3]?Fe[0]+Fe[1]+Fe[2]-1:W),ze.write_shift(4,Fe[3]),ze.write_shift(-4,Fe[1]?Fe[0]-1:W),ze.write_shift(4,Fe[1]),Xe=0;Xe<109;++Xe)ze.write_shift(-4,Xe<Fe[2]?Fe[1]+Xe:-1)}if(Fe[1])for(tt=0;tt<Fe[1];++tt){for(;Xe<236+tt*127;++Xe)ze.write_shift(-4,Xe<Fe[2]?Fe[1]+Xe:-1);ze.write_shift(-4,tt===Fe[1]-1?W:tt+1)}var it=function(Et){for(tt+=Et;Xe<tt-1;++Xe)ze.write_shift(-4,Xe+1);Et&&(++Xe,ze.write_shift(-4,W))};for(tt=Xe=0,tt+=Fe[1];Xe<tt;++Xe)ze.write_shift(-4,ee.DIFSECT);for(tt+=Fe[2];Xe<tt;++Xe)ze.write_shift(-4,ee.FATSECT);it(Fe[3]),it(Fe[4]);for(var ot=0,at=0,ct=pe.FileIndex[0];ot<pe.FileIndex.length;++ot)ct=pe.FileIndex[ot],ct.content&&(at=ct.content.length,!(at<4096)&&(ct.start=tt,it(at+511>>9)));for(it(Fe[6]+7>>3);ze.l&511;)ze.write_shift(-4,ee.ENDOFCHAIN);for(tt=Xe=0,ot=0;ot<pe.FileIndex.length;++ot)ct=pe.FileIndex[ot],ct.content&&(at=ct.content.length,!(!at||at>=4096)&&(ct.start=tt,it(at+63>>6)));for(;ze.l&511;)ze.write_shift(-4,ee.ENDOFCHAIN);for(Xe=0;Xe<Fe[4]<<2;++Xe){var dt=pe.FullPaths[Xe];if(!dt||dt.length===0){for(ot=0;ot<17;++ot)ze.write_shift(4,0);for(ot=0;ot<3;++ot)ze.write_shift(4,-1);for(ot=0;ot<12;++ot)ze.write_shift(4,0);continue}ct=pe.FileIndex[Xe],Xe===0&&(ct.start=ct.size?ct.start-1:W);var yt=Xe===0&&Oe.root||ct.name;if(yt.length>32&&(console.error("Name "+yt+" will be truncated to "+yt.slice(0,32)),yt=yt.slice(0,32)),at=2*(yt.length+1),ze.write_shift(64,yt,"utf16le"),ze.write_shift(2,at),ze.write_shift(1,ct.type),ze.write_shift(1,ct.color),ze.write_shift(-4,ct.L),ze.write_shift(-4,ct.R),ze.write_shift(-4,ct.C),ct.clsid)ze.write_shift(16,ct.clsid,"hex");else for(ot=0;ot<4;++ot)ze.write_shift(4,0);ze.write_shift(4,ct.state||0),ze.write_shift(4,0),ze.write_shift(4,0),ze.write_shift(4,0),ze.write_shift(4,0),ze.write_shift(4,ct.start),ze.write_shift(4,ct.size),ze.write_shift(4,0)}for(Xe=1;Xe<pe.FileIndex.length;++Xe)if(ct=pe.FileIndex[Xe],ct.size>=4096)if(ze.l=ct.start+1<<9,has_buf&&Buffer.isBuffer(ct.content))ct.content.copy(ze,ze.l,0,ct.size),ze.l+=ct.size+511&-512;else{for(ot=0;ot<ct.size;++ot)ze.write_shift(1,ct.content[ot]);for(;ot&511;++ot)ze.write_shift(1,0)}for(Xe=1;Xe<pe.FileIndex.length;++Xe)if(ct=pe.FileIndex[Xe],ct.size>0&&ct.size<4096)if(has_buf&&Buffer.isBuffer(ct.content))ct.content.copy(ze,ze.l,0,ct.size),ze.l+=ct.size+63&-64;else{for(ot=0;ot<ct.size;++ot)ze.write_shift(1,ct.content[ot]);for(;ot&63;++ot)ze.write_shift(1,0)}if(has_buf)ze.l=ze.length;else for(;ze.l<ze.length;)ze.write_shift(1,0);return ze}function ye(pe,ke){var Oe=pe.FullPaths.map(function(ot){return ot.toUpperCase()}),Fe=Oe.map(function(ot){var at=ot.split("/");return at[at.length-(ot.slice(-1)=="/"?2:1)]}),ze=!1;ke.charCodeAt(0)===47?(ze=!0,ke=Oe[0].slice(0,-1)+ke):ze=ke.indexOf("/")!==-1;var Xe=ke.toUpperCase(),tt=ze===!0?Oe.indexOf(Xe):Fe.indexOf(Xe);if(tt!==-1)return pe.FileIndex[tt];var it=!Xe.match(chr1);for(Xe=Xe.replace(chr0,""),it&&(Xe=Xe.replace(chr1,"!")),tt=0;tt<Oe.length;++tt)if((it?Oe[tt].replace(chr1,"!"):Oe[tt]).replace(chr0,"")==Xe||(it?Fe[tt].replace(chr1,"!"):Fe[tt]).replace(chr0,"")==Xe)return pe.FileIndex[tt];return null}var ie=64,W=-2,O="d0cf11e0a1b11ae1",z=[208,207,17,224,161,177,26,225],J="00000000000000000000000000000000",ee={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:W,FREESECT:-1,HEADER_SIGNATURE:O,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:J,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ae(pe,ke,Oe){A();var Fe=_e(pe,Oe);B.writeFileSync(ke,Fe)}function oe(pe){for(var ke=new Array(pe.length),Oe=0;Oe<pe.length;++Oe)ke[Oe]=String.fromCharCode(pe[Oe]);return ke.join("")}function se(pe,ke){var Oe=_e(pe,ke);switch(ke&&ke.type||"buffer"){case"file":return A(),B.writeFileSync(ke.filename,Oe),Oe;case"binary":return typeof Oe=="string"?Oe:oe(Oe);case"base64":return Base64_encode(typeof Oe=="string"?Oe:oe(Oe));case"buffer":if(has_buf)return Buffer.isBuffer(Oe)?Oe:Buffer_from(Oe);case"array":return typeof Oe=="string"?s2a(Oe):Oe}return Oe}var G;function q(pe){try{var ke=pe.InflateRaw,Oe=new ke;if(Oe._processChunk(new Uint8Array([3,0]),Oe._finishFlushFlag),Oe.bytesRead)G=pe;else throw new Error("zlib does not expose bytesRead")}catch(Fe){console.error("cannot use native zlib: "+(Fe.message||Fe))}}function te(pe,ke){if(!G)return $t(pe,ke);var Oe=G.InflateRaw,Fe=new Oe,ze=Fe._processChunk(pe.slice(pe.l),Fe._finishFlushFlag);return pe.l+=Fe.bytesRead,ze}function fe(pe){return G?G.deflateRawSync(pe):Le(pe)}var he=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ee=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],we=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function xe(pe){var ke=(pe<<1|pe<<11)&139536|(pe<<5|pe<<15)&558144;return(ke>>16|ke>>8|ke)&255}for(var $e=typeof Uint8Array<"u",ge=$e?new Uint8Array(256):[],Se=0;Se<256;++Se)ge[Se]=xe(Se);function me(pe,ke){var Oe=ge[pe&255];return ke<=8?Oe>>>8-ke:(Oe=Oe<<8|ge[pe>>8&255],ke<=16?Oe>>>16-ke:(Oe=Oe<<8|ge[pe>>16&255],Oe>>>24-ke))}function Be(pe,ke){var Oe=ke&7,Fe=ke>>>3;return(pe[Fe]|(Oe<=6?0:pe[Fe+1]<<8))>>>Oe&3}function ve(pe,ke){var Oe=ke&7,Fe=ke>>>3;return(pe[Fe]|(Oe<=5?0:pe[Fe+1]<<8))>>>Oe&7}function Ae(pe,ke){var Oe=ke&7,Fe=ke>>>3;return(pe[Fe]|(Oe<=4?0:pe[Fe+1]<<8))>>>Oe&15}function Ve(pe,ke){var Oe=ke&7,Fe=ke>>>3;return(pe[Fe]|(Oe<=3?0:pe[Fe+1]<<8))>>>Oe&31}function Pe(pe,ke){var Oe=ke&7,Fe=ke>>>3;return(pe[Fe]|(Oe<=1?0:pe[Fe+1]<<8))>>>Oe&127}function Re(pe,ke,Oe){var Fe=ke&7,ze=ke>>>3,Xe=(1<<Oe)-1,tt=pe[ze]>>>Fe;return Oe<8-Fe||(tt|=pe[ze+1]<<8-Fe,Oe<16-Fe)||(tt|=pe[ze+2]<<16-Fe,Oe<24-Fe)||(tt|=pe[ze+3]<<24-Fe),tt&Xe}function Ne(pe,ke,Oe){var Fe=ke&7,ze=ke>>>3;return Fe<=5?pe[ze]|=(Oe&7)<<Fe:(pe[ze]|=Oe<<Fe&255,pe[ze+1]=(Oe&7)>>8-Fe),ke+3}function qe(pe,ke,Oe){var Fe=ke&7,ze=ke>>>3;return Oe=(Oe&1)<<Fe,pe[ze]|=Oe,ke+1}function Ke(pe,ke,Oe){var Fe=ke&7,ze=ke>>>3;return Oe<<=Fe,pe[ze]|=Oe&255,Oe>>>=8,pe[ze+1]=Oe,ke+8}function He(pe,ke,Oe){var Fe=ke&7,ze=ke>>>3;return Oe<<=Fe,pe[ze]|=Oe&255,Oe>>>=8,pe[ze+1]=Oe&255,pe[ze+2]=Oe>>>8,ke+16}function Ge(pe,ke){var Oe=pe.length,Fe=2*Oe>ke?2*Oe:ke+5,ze=0;if(Oe>=ke)return pe;if(has_buf){var Xe=new_unsafe_buf(Fe);if(pe.copy)pe.copy(Xe);else for(;ze<pe.length;++ze)Xe[ze]=pe[ze];return Xe}else if($e){var tt=new Uint8Array(Fe);if(tt.set)tt.set(pe);else for(;ze<Oe;++ze)tt[ze]=pe[ze];return tt}return pe.length=Fe,pe}function rt(pe){for(var ke=new Array(pe),Oe=0;Oe<pe;++Oe)ke[Oe]=0;return ke}function st(pe,ke,Oe){var Fe=1,ze=0,Xe=0,tt=0,it=0,ot=pe.length,at=$e?new Uint16Array(32):rt(32);for(Xe=0;Xe<32;++Xe)at[Xe]=0;for(Xe=ot;Xe<Oe;++Xe)pe[Xe]=0;ot=pe.length;var ct=$e?new Uint16Array(ot):rt(ot);for(Xe=0;Xe<ot;++Xe)at[ze=pe[Xe]]++,Fe<ze&&(Fe=ze),ct[Xe]=0;for(at[0]=0,Xe=1;Xe<=Fe;++Xe)at[Xe+16]=it=it+at[Xe-1]<<1;for(Xe=0;Xe<ot;++Xe)it=pe[Xe],it!=0&&(ct[Xe]=at[it+16]++);var dt=0;for(Xe=0;Xe<ot;++Xe)if(dt=pe[Xe],dt!=0)for(it=me(ct[Xe],Fe)>>Fe-dt,tt=(1<<Fe+4-dt)-1;tt>=0;--tt)ke[it|tt<<dt]=dt&15|Xe<<4;return Fe}var Je=$e?new Uint16Array(512):rt(512),Ie=$e?new Uint16Array(32):rt(32);if(!$e){for(var be=0;be<512;++be)Je[be]=0;for(be=0;be<32;++be)Ie[be]=0}(function(){for(var pe=[],ke=0;ke<32;ke++)pe.push(5);st(pe,Ie,32);var Oe=[];for(ke=0;ke<=143;ke++)Oe.push(8);for(;ke<=255;ke++)Oe.push(9);for(;ke<=279;ke++)Oe.push(7);for(;ke<=287;ke++)Oe.push(8);st(Oe,Je,288)})();var Te=function(){for(var ke=$e?new Uint8Array(32768):[],Oe=0,Fe=0;Oe<we.length-1;++Oe)for(;Fe<we[Oe+1];++Fe)ke[Fe]=Oe;for(;Fe<32768;++Fe)ke[Fe]=29;var ze=$e?new Uint8Array(259):[];for(Oe=0,Fe=0;Oe<Ee.length-1;++Oe)for(;Fe<Ee[Oe+1];++Fe)ze[Fe]=Oe;function Xe(it,ot){for(var at=0;at<it.length;){var ct=Math.min(65535,it.length-at),dt=at+ct==it.length;for(ot.write_shift(1,+dt),ot.write_shift(2,ct),ot.write_shift(2,~ct&65535);ct-- >0;)ot[ot.l++]=it[at++]}return ot.l}function tt(it,ot){for(var at=0,ct=0,dt=$e?new Uint16Array(32768):[];ct<it.length;){var yt=Math.min(65535,it.length-ct);if(yt<10){for(at=Ne(ot,at,+(ct+yt==it.length)),at&7&&(at+=8-(at&7)),ot.l=at/8|0,ot.write_shift(2,yt),ot.write_shift(2,~yt&65535);yt-- >0;)ot[ot.l++]=it[ct++];at=ot.l*8;continue}at=Ne(ot,at,+(ct+yt==it.length)+2);for(var Et=0;yt-- >0;){var mt=it[ct];Et=(Et<<5^mt)&32767;var xt=-1,Mt=0;if((xt=dt[Et])&&(xt|=ct&-32768,xt>ct&&(xt-=32768),xt<ct))for(;it[xt+Mt]==it[ct+Mt]&&Mt<250;)++Mt;if(Mt>2){mt=ze[Mt],mt<=22?at=Ke(ot,at,ge[mt+1]>>1)-1:(Ke(ot,at,3),at+=5,Ke(ot,at,ge[mt-23]>>5),at+=3);var Ot=mt<8?0:mt-4>>2;Ot>0&&(He(ot,at,Mt-Ee[mt]),at+=Ot),mt=ke[ct-xt],at=Ke(ot,at,ge[mt]>>3),at-=3;var Ht=mt<4?0:mt-2>>1;Ht>0&&(He(ot,at,ct-xt-we[mt]),at+=Ht);for(var Ft=0;Ft<Mt;++Ft)dt[Et]=ct&32767,Et=(Et<<5^it[ct])&32767,++ct;yt-=Mt-1}else mt<=143?mt=mt+48:at=qe(ot,at,1),at=Ke(ot,at,ge[mt]),dt[Et]=ct&32767,++ct}at=Ke(ot,at,0)-1}return ot.l=(at+7)/8|0,ot.l}return function(ot,at){return ot.length<8?Xe(ot,at):tt(ot,at)}}();function Le(pe){var ke=new_buf(50+Math.floor(pe.length*1.1)),Oe=Te(pe,ke);return ke.slice(0,Oe)}var We=$e?new Uint16Array(32768):rt(32768),Ze=$e?new Uint16Array(32768):rt(32768),Qe=$e?new Uint16Array(128):rt(128),St=1,pt=1;function ft(pe,ke){var Oe=Ve(pe,ke)+257;ke+=5;var Fe=Ve(pe,ke)+1;ke+=5;var ze=Ae(pe,ke)+4;ke+=4;for(var Xe=0,tt=$e?new Uint8Array(19):rt(19),it=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ot=1,at=$e?new Uint8Array(8):rt(8),ct=$e?new Uint8Array(8):rt(8),dt=tt.length,yt=0;yt<ze;++yt)tt[he[yt]]=Xe=ve(pe,ke),ot<Xe&&(ot=Xe),at[Xe]++,ke+=3;var Et=0;for(at[0]=0,yt=1;yt<=ot;++yt)ct[yt]=Et=Et+at[yt-1]<<1;for(yt=0;yt<dt;++yt)(Et=tt[yt])!=0&&(it[yt]=ct[Et]++);var mt=0;for(yt=0;yt<dt;++yt)if(mt=tt[yt],mt!=0){Et=ge[it[yt]]>>8-mt;for(var xt=(1<<7-mt)-1;xt>=0;--xt)Qe[Et|xt<<mt]=mt&7|yt<<3}var Mt=[];for(ot=1;Mt.length<Oe+Fe;)switch(Et=Qe[Pe(pe,ke)],ke+=Et&7,Et>>>=3){case 16:for(Xe=3+Be(pe,ke),ke+=2,Et=Mt[Mt.length-1];Xe-- >0;)Mt.push(Et);break;case 17:for(Xe=3+ve(pe,ke),ke+=3;Xe-- >0;)Mt.push(0);break;case 18:for(Xe=11+Pe(pe,ke),ke+=7;Xe-- >0;)Mt.push(0);break;default:Mt.push(Et),ot<Et&&(ot=Et);break}var Ot=Mt.slice(0,Oe),Ht=Mt.slice(Oe);for(yt=Oe;yt<286;++yt)Ot[yt]=0;for(yt=Fe;yt<30;++yt)Ht[yt]=0;return St=st(Ot,We,286),pt=st(Ht,Ze,30),ke}function Ut(pe,ke){if(pe[0]==3&&!(pe[1]&3))return[new_raw_buf(ke),2];for(var Oe=0,Fe=0,ze=new_unsafe_buf(ke||1<<18),Xe=0,tt=ze.length>>>0,it=0,ot=0;!(Fe&1);){if(Fe=ve(pe,Oe),Oe+=3,Fe>>>1)Fe>>1==1?(it=9,ot=5):(Oe=ft(pe,Oe),it=St,ot=pt);else{Oe&7&&(Oe+=8-(Oe&7));var at=pe[Oe>>>3]|pe[(Oe>>>3)+1]<<8;if(Oe+=32,at>0)for(!ke&&tt<Xe+at&&(ze=Ge(ze,Xe+at),tt=ze.length);at-- >0;)ze[Xe++]=pe[Oe>>>3],Oe+=8;continue}for(;;){!ke&&tt<Xe+32767&&(ze=Ge(ze,Xe+32767),tt=ze.length);var ct=Re(pe,Oe,it),dt=Fe>>>1==1?Je[ct]:We[ct];if(Oe+=dt&15,dt>>>=4,!(dt>>>8&255))ze[Xe++]=dt;else{if(dt==256)break;dt-=257;var yt=dt<8?0:dt-4>>2;yt>5&&(yt=0);var Et=Xe+Ee[dt];yt>0&&(Et+=Re(pe,Oe,yt),Oe+=yt),ct=Re(pe,Oe,ot),dt=Fe>>>1==1?Ie[ct]:Ze[ct],Oe+=dt&15,dt>>>=4;var mt=dt<4?0:dt-2>>1,xt=we[dt];for(mt>0&&(xt+=Re(pe,Oe,mt),Oe+=mt),!ke&&tt<Et&&(ze=Ge(ze,Et+100),tt=ze.length);Xe<Et;)ze[Xe]=ze[Xe-xt],++Xe}}}return ke?[ze,Oe+7>>>3]:[ze.slice(0,Xe),Oe+7>>>3]}function $t(pe,ke){var Oe=pe.slice(pe.l||0),Fe=Ut(Oe,ke);return pe.l+=Fe[1],Fe[0]}function Nt(pe,ke){if(pe)typeof console<"u"&&console.error(ke);else throw new Error(ke)}function lr(pe,ke){var Oe=pe;prep_blob(Oe,0);var Fe=[],ze=[],Xe={FileIndex:Fe,FullPaths:ze};X(Xe,{root:ke.root});for(var tt=Oe.length-4;(Oe[tt]!=80||Oe[tt+1]!=75||Oe[tt+2]!=5||Oe[tt+3]!=6)&&tt>=0;)--tt;Oe.l=tt+4,Oe.l+=4;var it=Oe.read_shift(2);Oe.l+=6;var ot=Oe.read_shift(4);for(Oe.l=ot,tt=0;tt<it;++tt){Oe.l+=20;var at=Oe.read_shift(4),ct=Oe.read_shift(4),dt=Oe.read_shift(2),yt=Oe.read_shift(2),Et=Oe.read_shift(2);Oe.l+=8;var mt=Oe.read_shift(4),xt=T(Oe.slice(Oe.l+dt,Oe.l+dt+yt));Oe.l+=dt+yt+Et;var Mt=Oe.l;Oe.l=mt+4,xt&&xt[1]&&((xt[1]||{}).usz&&(ct=xt[1].usz),(xt[1]||{}).csz&&(at=xt[1].csz)),Gt(Oe,at,ct,Xe,xt),Oe.l=Mt}return Xe}function Gt(pe,ke,Oe,Fe,ze){pe.l+=2;var Xe=pe.read_shift(2),tt=pe.read_shift(2),it=C(pe);if(Xe&8257)throw new Error("Unsupported ZIP encryption");for(var ot=pe.read_shift(4),at=pe.read_shift(4),ct=pe.read_shift(4),dt=pe.read_shift(2),yt=pe.read_shift(2),Et="",mt=0;mt<dt;++mt)Et+=String.fromCharCode(pe[pe.l++]);if(yt){var xt=T(pe.slice(pe.l,pe.l+yt));(xt[21589]||{}).mt&&(it=xt[21589].mt),(xt[1]||{}).usz&&(ct=xt[1].usz),(xt[1]||{}).csz&&(at=xt[1].csz),ze&&((ze[21589]||{}).mt&&(it=ze[21589].mt),(ze[1]||{}).usz&&(ct=xt[1].usz),(ze[1]||{}).csz&&(at=xt[1].csz))}pe.l+=yt;var Mt=pe.slice(pe.l,pe.l+at);switch(tt){case 8:Mt=te(pe,ct);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+tt)}var Ot=!1;Xe&8&&(ot=pe.read_shift(4),ot==134695760&&(ot=pe.read_shift(4),Ot=!0),at=pe.read_shift(4),ct=pe.read_shift(4)),at!=ke&&Nt(Ot,"Bad compressed size: "+ke+" != "+at),ct!=Oe&&Nt(Ot,"Bad uncompressed size: "+Oe+" != "+ct),nr(Fe,Et,Mt,{unsafe:!0,mt:it})}function Rt(pe,ke){var Oe=ke||{},Fe=[],ze=[],Xe=new_buf(1),tt=Oe.compression?8:0,it=0,ot=0,at=0,ct=0,dt=0,yt=pe.FullPaths[0],Et=yt,mt=pe.FileIndex[0],xt=[],Mt=0;for(ot=1;ot<pe.FullPaths.length;++ot)if(Et=pe.FullPaths[ot].slice(yt.length),mt=pe.FileIndex[ot],!(!mt.size||!mt.content||Et=="Sh33tJ5")){var Ot=ct,Ht=new_buf(Et.length);for(at=0;at<Et.length;++at)Ht.write_shift(1,Et.charCodeAt(at)&127);Ht=Ht.slice(0,Ht.l),xt[dt]=typeof mt.content=="string"?CRC32.bstr(mt.content,0):CRC32.buf(mt.content,0);var Ft=typeof mt.content=="string"?s2a(mt.content):mt.content;tt==8&&(Ft=fe(Ft)),Xe=new_buf(30),Xe.write_shift(4,67324752),Xe.write_shift(2,20),Xe.write_shift(2,it),Xe.write_shift(2,tt),mt.mt?S(Xe,mt.mt):Xe.write_shift(4,0),Xe.write_shift(-4,xt[dt]),Xe.write_shift(4,Ft.length),Xe.write_shift(4,mt.content.length),Xe.write_shift(2,Ht.length),Xe.write_shift(2,0),ct+=Xe.length,Fe.push(Xe),ct+=Ht.length,Fe.push(Ht),ct+=Ft.length,Fe.push(Ft),Xe=new_buf(46),Xe.write_shift(4,33639248),Xe.write_shift(2,0),Xe.write_shift(2,20),Xe.write_shift(2,it),Xe.write_shift(2,tt),Xe.write_shift(4,0),Xe.write_shift(-4,xt[dt]),Xe.write_shift(4,Ft.length),Xe.write_shift(4,mt.content.length),Xe.write_shift(2,Ht.length),Xe.write_shift(2,0),Xe.write_shift(2,0),Xe.write_shift(2,0),Xe.write_shift(2,0),Xe.write_shift(4,0),Xe.write_shift(4,Ot),Mt+=Xe.l,ze.push(Xe),Mt+=Ht.length,ze.push(Ht),++dt}return Xe=new_buf(22),Xe.write_shift(4,101010256),Xe.write_shift(2,0),Xe.write_shift(2,0),Xe.write_shift(2,dt),Xe.write_shift(2,dt),Xe.write_shift(4,Mt),Xe.write_shift(4,ct),Xe.write_shift(2,0),bconcat([bconcat(Fe),bconcat(ze),Xe])}var Qt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Pt(pe,ke){if(pe.ctype)return pe.ctype;var Oe=pe.name||"",Fe=Oe.match(/\.([^\.]+)$/);return Fe&&Qt[Fe[1]]||ke&&(Fe=(Oe=ke).match(/[\.\\]([^\.\\])+$/),Fe&&Qt[Fe[1]])?Qt[Fe[1]]:"application/octet-stream"}function kt(pe){for(var ke=Base64_encode(pe),Oe=[],Fe=0;Fe<ke.length;Fe+=76)Oe.push(ke.slice(Fe,Fe+76));return Oe.join(`\r
`)+`\r
`}function er(pe){var ke=pe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(at){var ct=at.charCodeAt(0).toString(16).toUpperCase();return"="+(ct.length==1?"0"+ct:ct)});ke=ke.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ke.charAt(0)==`
`&&(ke="=0D"+ke.slice(1)),ke=ke.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Oe=[],Fe=ke.split(`\r
`),ze=0;ze<Fe.length;++ze){var Xe=Fe[ze];if(Xe.length==0){Oe.push("");continue}for(var tt=0;tt<Xe.length;){var it=76,ot=Xe.slice(tt,tt+it);ot.charAt(it-1)=="="?it--:ot.charAt(it-2)=="="?it-=2:ot.charAt(it-3)=="="&&(it-=3),ot=Xe.slice(tt,tt+it),tt+=it,tt<Xe.length&&(ot+="="),Oe.push(ot)}}return Oe.join(`\r
`)}function Lt(pe){for(var ke=[],Oe=0;Oe<pe.length;++Oe){for(var Fe=pe[Oe];Oe<=pe.length&&Fe.charAt(Fe.length-1)=="=";)Fe=Fe.slice(0,Fe.length-1)+pe[++Oe];ke.push(Fe)}for(var ze=0;ze<ke.length;++ze)ke[ze]=ke[ze].replace(/[=][0-9A-Fa-f]{2}/g,function(Xe){return String.fromCharCode(parseInt(Xe.slice(1),16))});return s2a(ke.join(`\r
`))}function Bt(pe,ke,Oe){for(var Fe="",ze="",Xe="",tt,it=0;it<10;++it){var ot=ke[it];if(!ot||ot.match(/^\s*$/))break;var at=ot.match(/^(.*?):\s*([^\s].*)$/);if(at)switch(at[1].toLowerCase()){case"content-location":Fe=at[2].trim();break;case"content-type":Xe=at[2].trim();break;case"content-transfer-encoding":ze=at[2].trim();break}}switch(++it,ze.toLowerCase()){case"base64":tt=s2a(Base64_decode(ke.slice(it).join("")));break;case"quoted-printable":tt=Lt(ke.slice(it));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ze)}var ct=nr(pe,Fe.slice(Oe.length),tt,{unsafe:!0});Xe&&(ct.ctype=Xe)}function ir(pe,ke){if(oe(pe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Oe=ke&&ke.root||"",Fe=(has_buf&&Buffer.isBuffer(pe)?pe.toString("binary"):oe(pe)).split(`\r
`),ze=0,Xe="";for(ze=0;ze<Fe.length;++ze)if(Xe=Fe[ze],!!/^Content-Location:/i.test(Xe)&&(Xe=Xe.slice(Xe.indexOf("file")),Oe||(Oe=Xe.slice(0,Xe.lastIndexOf("/")+1)),Xe.slice(0,Oe.length)!=Oe))for(;Oe.length>0&&(Oe=Oe.slice(0,Oe.length-1),Oe=Oe.slice(0,Oe.lastIndexOf("/")+1),Xe.slice(0,Oe.length)!=Oe););var tt=(Fe[1]||"").match(/boundary="(.*?)"/);if(!tt)throw new Error("MAD cannot find boundary");var it="--"+(tt[1]||""),ot=[],at=[],ct={FileIndex:ot,FullPaths:at};X(ct);var dt,yt=0;for(ze=0;ze<Fe.length;++ze){var Et=Fe[ze];Et!==it&&Et!==it+"--"||(yt++&&Bt(ct,Fe.slice(dt,ze),Oe),dt=ze)}return ct}function jt(pe,ke){var Oe=ke||{},Fe=Oe.boundary||"SheetJS";Fe="------="+Fe;for(var ze=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Fe.slice(2)+'"',"","",""],Xe=pe.FullPaths[0],tt=Xe,it=pe.FileIndex[0],ot=1;ot<pe.FullPaths.length;++ot)if(tt=pe.FullPaths[ot].slice(Xe.length),it=pe.FileIndex[ot],!(!it.size||!it.content||tt=="Sh33tJ5")){tt=tt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Mt){return"_x"+Mt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Mt){return"_u"+Mt.charCodeAt(0).toString(16)+"_"});for(var at=it.content,ct=has_buf&&Buffer.isBuffer(at)?at.toString("binary"):oe(at),dt=0,yt=Math.min(1024,ct.length),Et=0,mt=0;mt<=yt;++mt)(Et=ct.charCodeAt(mt))>=32&&Et<128&&++dt;var xt=dt>=yt*4/5;ze.push(Fe),ze.push("Content-Location: "+(Oe.root||"file:///C:/SheetJS/")+tt),ze.push("Content-Transfer-Encoding: "+(xt?"quoted-printable":"base64")),ze.push("Content-Type: "+Pt(it,tt)),ze.push(""),ze.push(xt?er(ct):kt(ct))}return ze.push(Fe+`--\r
`),ze.join(`\r
`)}function Ct(pe){var ke={};return X(ke,pe),ke}function nr(pe,ke,Oe,Fe){var ze=Fe&&Fe.unsafe;ze||X(pe);var Xe=!ze&&CFB.find(pe,ke);if(!Xe){var tt=pe.FullPaths[0];ke.slice(0,tt.length)==tt?tt=ke:(tt.slice(-1)!="/"&&(tt+="/"),tt=(tt+ke).replace("//","/")),Xe={name:E(ke),type:2},pe.FileIndex.push(Xe),pe.FullPaths.push(tt),ze||CFB.utils.cfb_gc(pe)}return Xe.content=Oe,Xe.size=Oe?Oe.length:0,Fe&&(Fe.CLSID&&(Xe.clsid=Fe.CLSID),Fe.mt&&(Xe.mt=Fe.mt),Fe.ct&&(Xe.ct=Fe.ct)),Xe}function je(pe,ke){X(pe);var Oe=CFB.find(pe,ke);if(Oe){for(var Fe=0;Fe<pe.FileIndex.length;++Fe)if(pe.FileIndex[Fe]==Oe)return pe.FileIndex.splice(Fe,1),pe.FullPaths.splice(Fe,1),!0}return!1}function De(pe,ke,Oe){X(pe);var Fe=CFB.find(pe,ke);if(Fe){for(var ze=0;ze<pe.FileIndex.length;++ze)if(pe.FileIndex[ze]==Fe)return pe.FileIndex[ze].name=E(Oe),pe.FullPaths[ze]=Oe,!0}return!1}function Me(pe){ue(pe,!0)}return n.find=ye,n.read=re,n.parse=I,n.write=se,n.writeFile=ae,n.utils={cfb_new:Ct,cfb_add:nr,cfb_del:je,cfb_mov:De,cfb_gc:Me,ReadShift,CheckField,prep_blob,bconcat,use_zlib:q,_deflateRaw:Le,_inflateRaw:$t,consts:ee},n}(),_fs;function set_fs(t){_fs=t}function blobify(t){return typeof t=="string"?s2ab(t):Array.isArray(t)?a2u(t):t}function write_dl(t,n,_){if(typeof _fs<"u"&&_fs.writeFileSync)return _?_fs.writeFileSync(t,n,_):_fs.writeFileSync(t,n);if(typeof Deno<"u"){if(_&&typeof n=="string")switch(_){case"utf8":n=new TextEncoder(_).encode(n);break;case"binary":n=s2ab(n);break;default:throw new Error("Unsupported encoding "+_)}return Deno.writeFileSync(t,n)}var x=_=="utf8"?utf8write(n):n;if(typeof IE_SaveFile<"u")return IE_SaveFile(x,t);if(typeof Blob<"u"){var E=new Blob([blobify(x)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(E,t);if(typeof saveAs<"u")return saveAs(E,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var S=URL.createObjectURL(E);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(S)},6e4),chrome.downloads.download({url:S,filename:t,saveAs:!0});var C=document.createElement("a");if(C.download!=null)return C.download=t,C.href=S,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(S)},6e4),S}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var T=File(t);return T.open("w"),T.encoding="binary",Array.isArray(n)&&(n=a2s(n)),T.write(n),T.close(),n}catch(B){if(!B.message||!B.message.match(/onstruct/))throw B}throw new Error("cannot save file "+t)}function read_binary(t){if(typeof _fs<"u")return _fs.readFileSync(t);if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var n=File(t);n.open("r"),n.encoding="binary";var _=n.read();return n.close(),_}catch(x){if(!x.message||!x.message.match(/onstruct/))throw x}throw new Error("Cannot access file "+t)}function keys(t){for(var n=Object.keys(t),_=[],x=0;x<n.length;++x)Object.prototype.hasOwnProperty.call(t,n[x])&&_.push(n[x]);return _}function evert_key(t,n){for(var _=[],x=keys(t),E=0;E!==x.length;++E)_[t[x[E]][n]]==null&&(_[t[x[E]][n]]=x[E]);return _}function evert(t){for(var n=[],_=keys(t),x=0;x!==_.length;++x)n[t[_[x]]]=_[x];return n}function evert_num(t){for(var n=[],_=keys(t),x=0;x!==_.length;++x)n[t[_[x]]]=parseInt(_[x],10);return n}function evert_arr(t){for(var n=[],_=keys(t),x=0;x!==_.length;++x)n[t[_[x]]]==null&&(n[t[_[x]]]=[]),n[t[_[x]]].push(_[x]);return n}var basedate=new Date(1899,11,30,0,0,0);function datenum(t,n){var _=t.getTime();n&&(_-=1462*24*60*60*1e3);var x=basedate.getTime()+(t.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4;return(_-x)/(24*60*60*1e3)}var refdate=new Date,dnthresh=basedate.getTime()+(refdate.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4,refoffset=refdate.getTimezoneOffset();function numdate(t){var n=new Date;return n.setTime(t*24*60*60*1e3+dnthresh),n.getTimezoneOffset()!==refoffset&&n.setTime(n.getTime()+(n.getTimezoneOffset()-refoffset)*6e4),n}function parse_isodur(t){var n=0,_=0,x=!1,E=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!E)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var S=1;S!=E.length;++S)if(E[S]){switch(_=1,S>3&&(x=!0),E[S].slice(E[S].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+E[S].slice(E[S].length-1));case"D":_*=24;case"H":_*=60;case"M":if(x)_*=60;else throw new Error("Unsupported ISO Duration Field: M")}n+=_*parseInt(E[S],10)}return n}var good_pd_date_1=new Date("2017-02-19T19:06:09.000Z"),good_pd_date=isNaN(good_pd_date_1.getFullYear())?new Date("2/19/17"):good_pd_date_1,good_pd=good_pd_date.getFullYear()==2017;function parseDate(t,n){var _=new Date(t);if(good_pd)return n>0?_.setTime(_.getTime()+_.getTimezoneOffset()*60*1e3):n<0&&_.setTime(_.getTime()-_.getTimezoneOffset()*60*1e3),_;if(t instanceof Date)return t;if(good_pd_date.getFullYear()==1917&&!isNaN(_.getFullYear())){var x=_.getFullYear();return t.indexOf(""+x)>-1||_.setFullYear(_.getFullYear()+100),_}var E=t.match(/\d+/g)||["2017","2","19","0","0","0"],S=new Date(+E[0],+E[1]-1,+E[2],+E[3]||0,+E[4]||0,+E[5]||0);return t.indexOf("Z")>-1&&(S=new Date(S.getTime()-S.getTimezoneOffset()*60*1e3)),S}function cc2str(t,n){if(has_buf&&Buffer.isBuffer(t)){if(n&&buf_utf16le){if(t[0]==255&&t[1]==254)return utf8write(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return utf8write(utf16beread(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(n){if(t[0]==255&&t[1]==254)return utf8write(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return utf8write(new TextDecoder("utf-16be").decode(t.slice(2)))}var _={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(S){return _[S]||S})}catch{}for(var x=[],E=0;E!=t.length;++E)x.push(String.fromCharCode(t[E]));return x.join("")}function dup(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var n={};for(var _ in t)Object.prototype.hasOwnProperty.call(t,_)&&(n[_]=dup(t[_]));return n}function fill(t,n){for(var _="";_.length<n;)_+=t;return _}function fuzzynum(t){var n=Number(t);if(!isNaN(n))return isFinite(n)?n:NaN;if(!/\d/.test(t))return n;var _=1,x=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return _*=100,""});return!isNaN(n=Number(x))||(x=x.replace(/[(](.*)[)]/,function(E,S){return _=-_,S}),!isNaN(n=Number(x)))?n/_:n}var FDRE1=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/;function fuzzytime1(t){return t[2]?t[3]?t[4]?new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],+t[4],parseFloat(t[3])*1e3):new Date(1899,11,30,t[7]=="p"?12:0,+t[1],+t[2],parseFloat(t[3])*1e3):t[5]?new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],+t[5],t[6]?parseFloat(t[6])*1e3:0):new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],0,0):new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),0,0,0)}var lower_months=["january","february","march","april","may","june","july","august","september","october","november","december"];function fuzzydate(t){var n=t.toLowerCase(),_=n.replace(/\s+/g," ").trim(),x=_.match(FDRE1);if(x)return fuzzytime1(x);var E=new Date(t),S=new Date(NaN),C=E.getYear();E.getMonth();var T=E.getDate();if(isNaN(T))return S;if(n.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(n=n.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),n.length>3&&lower_months.indexOf(n)==-1)return S}else if(n.replace(/[ap]m?/,"").match(/[a-z]/))return S;return C<0||C>8099||t.match(/[^-0-9:,\/\\]/)?S:E}var split_regex=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(_,x,E){if(t||typeof x=="string")return _.split(x);for(var S=_.split(x),C=[S[0]],T=1;T<S.length;++T)C.push(E),C.push(S[T]);return C}}();function getdatastr(t){return t?t.content&&t.type?cc2str(t.content,!0):t.data?debom(t.data):t.asNodeBuffer&&has_buf?debom(t.asNodeBuffer().toString("binary")):t.asBinary?debom(t.asBinary()):t._data&&t._data.getContent?debom(cc2str(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function getdatabin(t){if(!t)return null;if(t.data)return char_codes(t.data);if(t.asNodeBuffer&&has_buf)return t.asNodeBuffer();if(t._data&&t._data.getContent){var n=t._data.getContent();return typeof n=="string"?char_codes(n):Array.prototype.slice.call(n)}return t.content&&t.type?t.content:null}function getdata(t){return t&&t.name.slice(-4)===".bin"?getdatabin(t):getdatastr(t)}function safegetzipfile(t,n){for(var _=t.FullPaths||keys(t.files),x=n.toLowerCase().replace(/[\/]/g,"\\"),E=x.replace(/\\/g,"/"),S=0;S<_.length;++S){var C=_[S].replace(/^Root Entry[\/]/,"").toLowerCase();if(x==C||E==C)return t.files?t.files[_[S]]:t.FileIndex[S]}return null}function getzipfile(t,n){var _=safegetzipfile(t,n);if(_==null)throw new Error("Cannot find file "+n+" in zip");return _}function getzipdata(t,n,_){if(!_)return getdata(getzipfile(t,n));if(!n)return null;try{return getzipdata(t,n)}catch{return null}}function getzipstr(t,n,_){if(!_)return getdatastr(getzipfile(t,n));if(!n)return null;try{return getzipstr(t,n)}catch{return null}}function getzipbin(t,n,_){if(!_)return getdatabin(getzipfile(t,n));if(!n)return null;try{return getzipbin(t,n)}catch{return null}}function zipentries(t){for(var n=t.FullPaths||keys(t.files),_=[],x=0;x<n.length;++x)n[x].slice(-1)!="/"&&_.push(n[x].replace(/^Root Entry[\/]/,""));return _.sort()}function zip_add_file(t,n,_){if(t.FullPaths){if(typeof _=="string"){var x;return has_buf?x=Buffer_from(_):x=utf8decode(_),CFB.utils.cfb_add(t,n,x)}CFB.utils.cfb_add(t,n,_)}else t.file(n,_)}function zip_new(){return CFB.utils.cfb_new()}function zip_read(t,n){switch(n.type){case"base64":return CFB.read(t,{type:"base64"});case"binary":return CFB.read(t,{type:"binary"});case"buffer":case"array":return CFB.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+n.type)}function resolve_path(t,n){if(t.charAt(0)=="/")return t.slice(1);var _=n.split("/");n.slice(-1)!="/"&&_.pop();for(var x=t.split("/");x.length!==0;){var E=x.shift();E===".."?_.pop():E!=="."&&_.push(E)}return _.join("/")}var XML_HEADER=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,attregexg=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,tagregex1=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,tagregex2=/<[^>]*>/g,tagregex=XML_HEADER.match(tagregex1)?tagregex1:tagregex2,nsregex=/<\w*:/,nsregex2=/<(\/?)\w+:/;function parsexmltag(t,n,_){for(var x={},E=0,S=0;E!==t.length&&!((S=t.charCodeAt(E))===32||S===10||S===13);++E);if(n||(x[0]=t.slice(0,E)),E===t.length)return x;var C=t.match(attregexg),T=0,B="",A=0,I="",D="",M=1;if(C)for(A=0;A!=C.length;++A){for(D=C[A],S=0;S!=D.length&&D.charCodeAt(S)!==61;++S);for(I=D.slice(0,S).trim();D.charCodeAt(S+1)==32;)++S;for(M=(E=D.charCodeAt(S+1))==34||E==39?1:0,B=D.slice(S+1+M,D.length-M),T=0;T!=I.length&&I.charCodeAt(T)!==58;++T);if(T===I.length)I.indexOf("_")>0&&(I=I.slice(0,I.indexOf("_"))),x[I]=B,_||(x[I.toLowerCase()]=B);else{var V=(T===5&&I.slice(0,5)==="xmlns"?"xmlns":"")+I.slice(T+1);if(x[V]&&I.slice(T-3,T)=="ext")continue;x[V]=B,_||(x[V.toLowerCase()]=B)}}return x}function strip_ns(t){return t.replace(nsregex2,"<$1")}var encodings={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},rencoding=evert(encodings),unescapexml=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,n=/_x([\da-fA-F]{4})_/ig;function _(x){var E=x+"",S=E.indexOf("<![CDATA[");if(S==-1)return E.replace(t,function(T,B){return encodings[T]||String.fromCharCode(parseInt(B,T.indexOf("x")>-1?16:10))||T}).replace(n,function(T,B){return String.fromCharCode(parseInt(B,16))});var C=E.indexOf("]]>");return _(E.slice(0,S))+E.slice(S+9,C)+_(E.slice(C+3))}return function(E,S){var C=_(E);return S?C.replace(/\r\n/g,`
`):C}}(),decregex=/[&<>'"]/g,charegex=/[\u0000-\u0008\u000b-\u001f\uFFFE-\uFFFF]/g;function escapexml(t){var n=t+"";return n.replace(decregex,function(_){return rencoding[_]}).replace(charegex,function(_){return"_x"+("000"+_.charCodeAt(0).toString(16)).slice(-4)+"_"})}function escapexmltag(t){return escapexml(t).replace(/ /g,"_x0020_")}var htmlcharegex=/[\u0000-\u001f]/g;function escapehtml(t){var n=t+"";return n.replace(decregex,function(_){return rencoding[_]}).replace(/\n/g,"<br/>").replace(htmlcharegex,function(_){return"&#x"+("000"+_.charCodeAt(0).toString(16)).slice(-4)+";"})}function escapexlml(t){var n=t+"";return n.replace(decregex,function(_){return rencoding[_]}).replace(htmlcharegex,function(_){return"&#x"+_.charCodeAt(0).toString(16).toUpperCase()+";"})}var xlml_fixstr=function(){var t=/&#(\d+);/g;function n(_,x){return String.fromCharCode(parseInt(x,10))}return function(x){return x.replace(t,n)}}();function xlml_unfixstr(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function parsexmlbool(t){switch(t){case 1:case!0:case"1":case"true":return!0;case 0:case!1:case"0":case"false":return!1}return!1}function utf8reada(t){for(var n="",_=0,x=0,E=0,S=0,C=0,T=0;_<t.length;){if(x=t.charCodeAt(_++),x<128){n+=String.fromCharCode(x);continue}if(E=t.charCodeAt(_++),x>191&&x<224){C=(x&31)<<6,C|=E&63,n+=String.fromCharCode(C);continue}if(S=t.charCodeAt(_++),x<240){n+=String.fromCharCode((x&15)<<12|(E&63)<<6|S&63);continue}C=t.charCodeAt(_++),T=((x&7)<<18|(E&63)<<12|(S&63)<<6|C&63)-65536,n+=String.fromCharCode(55296+(T>>>10&1023)),n+=String.fromCharCode(56320+(T&1023))}return n}function utf8readb(t){var n=new_raw_buf(2*t.length),_,x,E=1,S=0,C=0,T;for(x=0;x<t.length;x+=E)E=1,(T=t.charCodeAt(x))<128?_=T:T<224?(_=(T&31)*64+(t.charCodeAt(x+1)&63),E=2):T<240?(_=(T&15)*4096+(t.charCodeAt(x+1)&63)*64+(t.charCodeAt(x+2)&63),E=3):(E=4,_=(T&7)*262144+(t.charCodeAt(x+1)&63)*4096+(t.charCodeAt(x+2)&63)*64+(t.charCodeAt(x+3)&63),_-=65536,C=55296+(_>>>10&1023),_=56320+(_&1023)),C!==0&&(n[S++]=C&255,n[S++]=C>>>8,C=0),n[S++]=_%256,n[S++]=_>>>8;return n.slice(0,S).toString("ucs2")}function utf8readc(t){return Buffer_from(t,"binary").toString("utf8")}var utf8corpus="foo bar baz",utf8read=has_buf&&(utf8readc(utf8corpus)==utf8reada(utf8corpus)&&utf8readc||utf8readb(utf8corpus)==utf8reada(utf8corpus)&&utf8readb)||utf8reada,utf8write=has_buf?function(t){return Buffer_from(t,"utf8").toString("binary")}:function(t){for(var n=[],_=0,x=0,E=0;_<t.length;)switch(x=t.charCodeAt(_++),!0){case x<128:n.push(String.fromCharCode(x));break;case x<2048:n.push(String.fromCharCode(192+(x>>6))),n.push(String.fromCharCode(128+(x&63)));break;case(x>=55296&&x<57344):x-=55296,E=t.charCodeAt(_++)-56320+(x<<10),n.push(String.fromCharCode(240+(E>>18&7))),n.push(String.fromCharCode(144+(E>>12&63))),n.push(String.fromCharCode(128+(E>>6&63))),n.push(String.fromCharCode(128+(E&63)));break;default:n.push(String.fromCharCode(224+(x>>12))),n.push(String.fromCharCode(128+(x>>6&63))),n.push(String.fromCharCode(128+(x&63)))}return n.join("")},matchtag=function(){var t={};return function(_,x){var E=_+"|"+(x||"");return t[E]?t[E]:t[E]=new RegExp("<(?:\\w+:)?"+_+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+_+">",x||"")}}(),htmldecode=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(n){return[new RegExp("&"+n[0]+";","ig"),n[1]]});return function(_){for(var x=_.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),E=0;E<t.length;++E)x=x.replace(t[E][0],t[E][1]);return x}}(),vtregex=function(){var t={};return function(_){return t[_]!==void 0?t[_]:t[_]=new RegExp("<(?:vt:)?"+_+">([\\s\\S]*?)</(?:vt:)?"+_+">","g")}}(),vtvregex=/<\/?(?:vt:)?variant>/g,vtmregex=/<(?:vt:)([^>]*)>([\s\S]*)</;function parseVector(t,n){var _=parsexmltag(t),x=t.match(vtregex(_.baseType))||[],E=[];if(x.length!=_.size){if(n.WTF)throw new Error("unexpected vector length "+x.length+" != "+_.size);return E}return x.forEach(function(S){var C=S.replace(vtvregex,"").match(vtmregex);C&&E.push({v:utf8read(C[2]),t:C[1]})}),E}var wtregex=/(^\s|\s$|\n)/;function writetag(t,n){return"<"+t+(n.match(wtregex)?' xml:space="preserve"':"")+">"+n+"</"+t+">"}function wxt_helper(t){return keys(t).map(function(n){return" "+n+'="'+t[n]+'"'}).join("")}function writextag(t,n,_){return"<"+t+(_!=null?wxt_helper(_):"")+(n!=null?(n.match(wtregex)?' xml:space="preserve"':"")+">"+n+"</"+t:"/")+">"}function write_w3cdtf(t,n){try{return t.toISOString().replace(/\.\d*/,"")}catch(_){if(n)throw _}return""}function write_vt(t,n){switch(typeof t){case"string":var _=writextag("vt:lpwstr",escapexml(t));return n&&(_=_.replace(/&quot;/g,"_x0022_")),_;case"number":return writextag((t|0)==t?"vt:i4":"vt:r8",escapexml(String(t)));case"boolean":return writextag("vt:bool",t?"true":"false")}if(t instanceof Date)return writextag("vt:filetime",write_w3cdtf(t));throw new Error("Unable to serialize "+t)}function xlml_normalize(t){if(has_buf&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return utf8read(a2s(ab2a(t)));throw new Error("Bad input format: expected Buffer or string")}var xlmlregex=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/](?:[^>=]|="[^"]*?")*)?>/mg,XMLNS={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},XMLNS_main=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],XLMLNS={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function read_double_le(t,n){for(var _=1-2*(t[n+7]>>>7),x=((t[n+7]&127)<<4)+(t[n+6]>>>4&15),E=t[n+6]&15,S=5;S>=0;--S)E=E*256+t[n+S];return x==2047?E==0?_*(1/0):NaN:(x==0?x=-1022:(x-=1023,E+=Math.pow(2,52)),_*Math.pow(2,x-52)*E)}function write_double_le(t,n,_){var x=(n<0||1/n==-1/0?1:0)<<7,E=0,S=0,C=x?-n:n;isFinite(C)?C==0?E=S=0:(E=Math.floor(Math.log(C)/Math.LN2),S=C*Math.pow(2,52-E),E<=-1023&&(!isFinite(S)||S<Math.pow(2,52))?E=-1022:(S-=Math.pow(2,52),E+=1023)):(E=2047,S=isNaN(n)?26985:0);for(var T=0;T<=5;++T,S/=256)t[_+T]=S&255;t[_+6]=(E&15)<<4|S&15,t[_+7]=E>>4|x}var ___toBuffer=function(t){for(var n=[],_=10240,x=0;x<t[0].length;++x)if(t[0][x])for(var E=0,S=t[0][x].length;E<S;E+=_)n.push.apply(n,t[0][x].slice(E,E+_));return n},__toBuffer=has_buf?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(n){return Buffer.isBuffer(n)?n:Buffer_from(n)})):___toBuffer(t)}:___toBuffer,___utf16le=function(t,n,_){for(var x=[],E=n;E<_;E+=2)x.push(String.fromCharCode(__readUInt16LE(t,E)));return x.join("").replace(chr0,"")},__utf16le=has_buf?function(t,n,_){return!Buffer.isBuffer(t)||!buf_utf16le?___utf16le(t,n,_):t.toString("utf16le",n,_).replace(chr0,"")}:___utf16le,___hexlify=function(t,n,_){for(var x=[],E=n;E<n+_;++E)x.push(("0"+t[E].toString(16)).slice(-2));return x.join("")},__hexlify=has_buf?function(t,n,_){return Buffer.isBuffer(t)?t.toString("hex",n,n+_):___hexlify(t,n,_)}:___hexlify,___utf8=function(t,n,_){for(var x=[],E=n;E<_;E++)x.push(String.fromCharCode(__readUInt8(t,E)));return x.join("")},__utf8=has_buf?function t(n,_,x){return Buffer.isBuffer(n)?n.toString("utf8",_,x):___utf8(n,_,x)}:___utf8,___lpstr=function(t,n){var _=__readUInt32LE(t,n);return _>0?__utf8(t,n+4,n+4+_-1):""},__lpstr=___lpstr,___cpstr=function(t,n){var _=__readUInt32LE(t,n);return _>0?__utf8(t,n+4,n+4+_-1):""},__cpstr=___cpstr,___lpwstr=function(t,n){var _=2*__readUInt32LE(t,n);return _>0?__utf8(t,n+4,n+4+_-1):""},__lpwstr=___lpwstr,___lpp4=function t(n,_){var x=__readUInt32LE(n,_);return x>0?__utf16le(n,_+4,_+4+x):""},__lpp4=___lpp4,___8lpp4=function(t,n){var _=__readUInt32LE(t,n);return _>0?__utf8(t,n+4,n+4+_):""},__8lpp4=___8lpp4,___double=function(t,n){return read_double_le(t,n)},__double=___double,is_buf=function t(n){return Array.isArray(n)||typeof Uint8Array<"u"&&n instanceof Uint8Array};has_buf&&(__lpstr=function(n,_){if(!Buffer.isBuffer(n))return ___lpstr(n,_);var x=n.readUInt32LE(_);return x>0?n.toString("utf8",_+4,_+4+x-1):""},__cpstr=function(n,_){if(!Buffer.isBuffer(n))return ___cpstr(n,_);var x=n.readUInt32LE(_);return x>0?n.toString("utf8",_+4,_+4+x-1):""},__lpwstr=function(n,_){if(!Buffer.isBuffer(n)||!buf_utf16le)return ___lpwstr(n,_);var x=2*n.readUInt32LE(_);return n.toString("utf16le",_+4,_+4+x-1)},__lpp4=function(n,_){if(!Buffer.isBuffer(n)||!buf_utf16le)return ___lpp4(n,_);var x=n.readUInt32LE(_);return n.toString("utf16le",_+4,_+4+x)},__8lpp4=function(n,_){if(!Buffer.isBuffer(n))return ___8lpp4(n,_);var x=n.readUInt32LE(_);return n.toString("utf8",_+4,_+4+x)},__double=function(n,_){return Buffer.isBuffer(n)?n.readDoubleLE(_):___double(n,_)},is_buf=function(n){return Buffer.isBuffer(n)||Array.isArray(n)||typeof Uint8Array<"u"&&n instanceof Uint8Array});var __readUInt8=function(t,n){return t[n]},__readUInt16LE=function(t,n){return t[n+1]*256+t[n]},__readInt16LE=function(t,n){var _=t[n+1]*256+t[n];return _<32768?_:(65535-_+1)*-1},__readUInt32LE=function(t,n){return t[n+3]*(1<<24)+(t[n+2]<<16)+(t[n+1]<<8)+t[n]},__readInt32LE=function(t,n){return t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]},__readInt32BE=function(t,n){return t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]};function ReadShift(t,n){var _="",x,E,S=[],C,T,B,A;switch(n){case"dbcs":if(A=this.l,has_buf&&Buffer.isBuffer(this)&&buf_utf16le)_=this.slice(this.l,this.l+2*t).toString("utf16le");else for(B=0;B<t;++B)_+=String.fromCharCode(__readUInt16LE(this,A)),A+=2;t*=2;break;case"utf8":_=__utf8(this,this.l,this.l+t);break;case"utf16le":t*=2,_=__utf16le(this,this.l,this.l+t);break;case"wstr":return ReadShift.call(this,t,"dbcs");case"lpstr-ansi":_=__lpstr(this,this.l),t=4+__readUInt32LE(this,this.l);break;case"lpstr-cp":_=__cpstr(this,this.l),t=4+__readUInt32LE(this,this.l);break;case"lpwstr":_=__lpwstr(this,this.l),t=4+2*__readUInt32LE(this,this.l);break;case"lpp4":t=4+__readUInt32LE(this,this.l),_=__lpp4(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+__readUInt32LE(this,this.l),_=__8lpp4(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,_="";(C=__readUInt8(this,this.l+t++))!==0;)S.push(_getchar(C));_=S.join("");break;case"_wstr":for(t=0,_="";(C=__readUInt16LE(this,this.l+t))!==0;)S.push(_getchar(C)),t+=2;t+=2,_=S.join("");break;case"dbcs-cont":for(_="",A=this.l,B=0;B<t;++B){if(this.lens&&this.lens.indexOf(A)!==-1)return C=__readUInt8(this,A),this.l=A+1,T=ReadShift.call(this,t-B,C?"dbcs-cont":"sbcs-cont"),S.join("")+T;S.push(_getchar(__readUInt16LE(this,A))),A+=2}_=S.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(_="",A=this.l,B=0;B!=t;++B){if(this.lens&&this.lens.indexOf(A)!==-1)return C=__readUInt8(this,A),this.l=A+1,T=ReadShift.call(this,t-B,C?"dbcs-cont":"sbcs-cont"),S.join("")+T;S.push(_getchar(__readUInt8(this,A))),A+=1}_=S.join("");break;default:switch(t){case 1:return x=__readUInt8(this,this.l),this.l++,x;case 2:return x=(n==="i"?__readInt16LE:__readUInt16LE)(this,this.l),this.l+=2,x;case 4:case-4:return n==="i"||!(this[this.l+3]&128)?(x=(t>0?__readInt32LE:__readInt32BE)(this,this.l),this.l+=4,x):(E=__readUInt32LE(this,this.l),this.l+=4,E);case 8:case-8:if(n==="f")return t==8?E=__double(this,this.l):E=__double([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,E;t=8;case 16:_=__hexlify(this,this.l,t);break}}return this.l+=t,_}var __writeUInt32LE=function(t,n,_){t[_]=n&255,t[_+1]=n>>>8&255,t[_+2]=n>>>16&255,t[_+3]=n>>>24&255},__writeInt32LE=function(t,n,_){t[_]=n&255,t[_+1]=n>>8&255,t[_+2]=n>>16&255,t[_+3]=n>>24&255},__writeUInt16LE=function(t,n,_){t[_]=n&255,t[_+1]=n>>>8&255};function WriteShift(t,n,_){var x=0,E=0;if(_==="dbcs"){for(E=0;E!=n.length;++E)__writeUInt16LE(this,n.charCodeAt(E),this.l+2*E);x=2*n.length}else if(_==="sbcs"||_=="cpstr"){for(n=n.replace(/[^\x00-\x7F]/g,"_"),E=0;E!=n.length;++E)this[this.l+E]=n.charCodeAt(E)&255;x=n.length}else if(_==="hex"){for(;E<t;++E)this[this.l++]=parseInt(n.slice(2*E,2*E+2),16)||0;return this}else if(_==="utf16le"){var S=Math.min(this.l+t,this.length);for(E=0;E<Math.min(n.length,t);++E){var C=n.charCodeAt(E);this[this.l++]=C&255,this[this.l++]=C>>8}for(;this.l<S;)this[this.l++]=0;return this}else switch(t){case 1:x=1,this[this.l]=n&255;break;case 2:x=2,this[this.l]=n&255,n>>>=8,this[this.l+1]=n&255;break;case 3:x=3,this[this.l]=n&255,n>>>=8,this[this.l+1]=n&255,n>>>=8,this[this.l+2]=n&255;break;case 4:x=4,__writeUInt32LE(this,n,this.l);break;case 8:if(x=8,_==="f"){write_double_le(this,n,this.l);break}case 16:break;case-4:x=4,__writeInt32LE(this,n,this.l);break}return this.l+=x,this}function CheckField(t,n){var _=__hexlify(this,this.l,t.length>>1);if(_!==t)throw new Error(n+"Expected "+t+" saw "+_);this.l+=t.length>>1}function prep_blob(t,n){t.l=n,t.read_shift=ReadShift,t.chk=CheckField,t.write_shift=WriteShift}function parsenoop(t,n){t.l+=n}function new_buf(t){var n=new_raw_buf(t);return prep_blob(n,0),n}function recordhopper(t,n,_){if(t){var x,E,S;prep_blob(t,t.l||0);for(var C=t.length,T=0,B=0;t.l<C;){T=t.read_shift(1),T&128&&(T=(T&127)+((t.read_shift(1)&127)<<7));var A=XLSBRecordEnum[T]||XLSBRecordEnum[65535];for(x=t.read_shift(1),S=x&127,E=1;E<4&&x&128;++E)S+=((x=t.read_shift(1))&127)<<7*E;B=t.l+S;var I=A.f&&A.f(t,S,_);if(t.l=B,n(I,A,T))return}}}function buf_array(){var t=[],n=has_buf?256:2048,_=function(A){var I=new_buf(A);return prep_blob(I,0),I},x=_(n),E=function(){x&&(x.l&&(x.length>x.l&&(x=x.slice(0,x.l),x.l=x.length),x.length>0&&t.push(x)),x=null)},S=function(A){return x&&A<x.length-x.l?x:(E(),x=_(Math.max(A+1,n)))},C=function(){return E(),bconcat(t)},T=function(A){E(),x=A,x.l==null&&(x.l=x.length),S(n)};return{next:S,push:T,end:C,_bufs:t}}function write_record(t,n,_,x){var E=+n,S;if(!isNaN(E)){x||(x=XLSBRecordEnum[E].p||(_||[]).length||0),S=1+(E>=128?1:0)+1,x>=128&&++S,x>=16384&&++S,x>=2097152&&++S;var C=t.next(S);E<=127?C.write_shift(1,E):(C.write_shift(1,(E&127)+128),C.write_shift(1,E>>7));for(var T=0;T!=4;++T)if(x>=128)C.write_shift(1,(x&127)+128),x>>=7;else{C.write_shift(1,x);break}x>0&&is_buf(_)&&t.push(_)}}function shift_cell_xls(t,n,_){var x=dup(t);if(n.s?(x.cRel&&(x.c+=n.s.c),x.rRel&&(x.r+=n.s.r)):(x.cRel&&(x.c+=n.c),x.rRel&&(x.r+=n.r)),!_||_.biff<12){for(;x.c>=256;)x.c-=256;for(;x.r>=65536;)x.r-=65536}return x}function shift_range_xls(t,n,_){var x=dup(t);return x.s=shift_cell_xls(x.s,n.s,_),x.e=shift_cell_xls(x.e,n.s,_),x}function encode_cell_xls(t,n){if(t.cRel&&t.c<0)for(t=dup(t);t.c<0;)t.c+=n>8?16384:256;if(t.rRel&&t.r<0)for(t=dup(t);t.r<0;)t.r+=n>8?1048576:n>5?65536:16384;var _=encode_cell(t);return!t.cRel&&t.cRel!=null&&(_=fix_col(_)),!t.rRel&&t.rRel!=null&&(_=fix_row(_)),_}function encode_range_xls(t,n){return t.s.r==0&&!t.s.rRel&&t.e.r==(n.biff>=12?1048575:n.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+encode_col(t.s.c)+":"+(t.e.cRel?"":"$")+encode_col(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(n.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+encode_row(t.s.r)+":"+(t.e.rRel?"":"$")+encode_row(t.e.r):encode_cell_xls(t.s,n.biff)+":"+encode_cell_xls(t.e,n.biff)}function decode_row(t){return parseInt(unfix_row(t),10)-1}function encode_row(t){return""+(t+1)}function fix_row(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function unfix_row(t){return t.replace(/\$(\d+)$/,"$1")}function decode_col(t){for(var n=unfix_col(t),_=0,x=0;x!==n.length;++x)_=26*_+n.charCodeAt(x)-64;return _-1}function encode_col(t){if(t<0)throw new Error("invalid column "+t);var n="";for(++t;t;t=Math.floor((t-1)/26))n=String.fromCharCode((t-1)%26+65)+n;return n}function fix_col(t){return t.replace(/^([A-Z])/,"$$$1")}function unfix_col(t){return t.replace(/^\$([A-Z])/,"$1")}function split_cell(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function decode_cell(t){for(var n=0,_=0,x=0;x<t.length;++x){var E=t.charCodeAt(x);E>=48&&E<=57?n=10*n+(E-48):E>=65&&E<=90&&(_=26*_+(E-64))}return{c:_-1,r:n-1}}function encode_cell(t){for(var n=t.c+1,_="";n;n=(n-1)/26|0)_=String.fromCharCode((n-1)%26+65)+_;return _+(t.r+1)}function decode_range(t){var n=t.indexOf(":");return n==-1?{s:decode_cell(t),e:decode_cell(t)}:{s:decode_cell(t.slice(0,n)),e:decode_cell(t.slice(n+1))}}function encode_range(t,n){return typeof n>"u"||typeof n=="number"?encode_range(t.s,t.e):(typeof t!="string"&&(t=encode_cell(t)),typeof n!="string"&&(n=encode_cell(n)),t==n?t:t+":"+n)}function fix_range(t){var n=decode_range(t);return"$"+encode_col(n.s.c)+"$"+encode_row(n.s.r)+":$"+encode_col(n.e.c)+"$"+encode_row(n.e.r)}function formula_quote_sheet_name(t,n){if(!t&&!(n&&n.biff<=5&&n.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t.replace(/'/g,"''")+"'":t}function safe_decode_range(t){var n={s:{c:0,r:0},e:{c:0,r:0}},_=0,x=0,E=0,S=t.length;for(_=0;x<S&&!((E=t.charCodeAt(x)-64)<1||E>26);++x)_=26*_+E;for(n.s.c=--_,_=0;x<S&&!((E=t.charCodeAt(x)-48)<0||E>9);++x)_=10*_+E;if(n.s.r=--_,x===S||E!=10)return n.e.c=n.s.c,n.e.r=n.s.r,n;for(++x,_=0;x!=S&&!((E=t.charCodeAt(x)-64)<1||E>26);++x)_=26*_+E;for(n.e.c=--_,_=0;x!=S&&!((E=t.charCodeAt(x)-48)<0||E>9);++x)_=10*_+E;return n.e.r=--_,n}function safe_format_cell(t,n){var _=t.t=="d"&&n instanceof Date;if(t.z!=null)try{return t.w=SSF_format(t.z,_?datenum(n):n)}catch{}try{return t.w=SSF_format((t.XF||{}).numFmtId||(_?14:0),_?datenum(n):n)}catch{return""+n}}function format_cell(t,n,_){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&_&&_.dateNF&&(t.z=_.dateNF),t.t=="e"?BErr[t.v]||t.v:n==null?safe_format_cell(t,t.v):safe_format_cell(t,n))}function sheet_to_workbook(t,n){var _=n&&n.sheet?n.sheet:"Sheet1",x={};return x[_]=t,{SheetNames:[_],Sheets:x}}function sheet_add_aoa(t,n,_){var x=_||{},E=t?t["!data"]!=null:x.dense,S=t||{};E&&!S["!data"]&&(S["!data"]=[]);var C=0,T=0;if(S&&x.origin!=null){if(typeof x.origin=="number")C=x.origin;else{var B=typeof x.origin=="string"?decode_cell(x.origin):x.origin;C=B.r,T=B.c}S["!ref"]||(S["!ref"]="A1:A1")}var A={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(S["!ref"]){var I=safe_decode_range(S["!ref"]);A.s.c=I.s.c,A.s.r=I.s.r,A.e.c=Math.max(A.e.c,I.e.c),A.e.r=Math.max(A.e.r,I.e.r),C==-1&&(A.e.r=C=I.e.r+1)}for(var D=[],M=0;M!=n.length;++M)if(n[M]){if(!Array.isArray(n[M]))throw new Error("aoa_to_sheet expects an array of arrays");var V=C+M,L=""+(V+1);E&&(S["!data"][V]||(S["!data"][V]=[]),D=S["!data"][V]);for(var F=0;F!=n[M].length;++F)if(!(typeof n[M][F]>"u")){var j={v:n[M][F]},U=T+F;if(A.s.r>V&&(A.s.r=V),A.s.c>U&&(A.s.c=U),A.e.r<V&&(A.e.r=V),A.e.c<U&&(A.e.c=U),n[M][F]&&typeof n[M][F]=="object"&&!Array.isArray(n[M][F])&&!(n[M][F]instanceof Date))j=n[M][F];else if(Array.isArray(j.v)&&(j.f=n[M][F][1],j.v=j.v[0]),j.v===null)if(j.f)j.t="n";else if(x.nullError)j.t="e",j.v=0;else if(x.sheetStubs)j.t="z";else continue;else typeof j.v=="number"?j.t="n":typeof j.v=="boolean"?j.t="b":j.v instanceof Date?(j.z=x.dateNF||table_fmt[14],x.cellDates?(j.t="d",j.w=SSF_format(j.z,datenum(j.v,x.date1904))):(j.t="n",j.v=datenum(j.v,x.date1904),j.w=SSF_format(j.z,j.v))):j.t="s";if(E)D[U]&&D[U].z&&(j.z=D[U].z),D[U]=j;else{var H=encode_col(U)+L;S[H]&&S[H].z&&(j.z=S[H].z),S[H]=j}}}return A.s.c<1e7&&(S["!ref"]=encode_range(A)),S}function aoa_to_sheet(t,n){return sheet_add_aoa(null,t,n)}function parse_Int32LE(t){return t.read_shift(4,"i")}function write_UInt32LE(t,n){return n||(n=new_buf(4)),n.write_shift(4,t),n}function parse_XLWideString(t){var n=t.read_shift(4);return n===0?"":t.read_shift(n,"dbcs")}function write_XLWideString(t,n){var _=!1;return n==null&&(_=!0,n=new_buf(4+2*t.length)),n.write_shift(4,t.length),t.length>0&&n.write_shift(0,t,"dbcs"),_?n.slice(0,n.l):n}function parse_StrRun(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function write_StrRun(t,n){return n||(n=new_buf(4)),n.write_shift(2,t.ich||0),n.write_shift(2,t.ifnt||0),n}function parse_RichStr(t,n){var _=t.l,x=t.read_shift(1),E=parse_XLWideString(t),S=[],C={t:E,h:E};if(x&1){for(var T=t.read_shift(4),B=0;B!=T;++B)S.push(parse_StrRun(t));C.r=S}else C.r=[{ich:0,ifnt:0}];return t.l=_+n,C}function write_RichStr(t,n){var _=!1;return n==null&&(_=!0,n=new_buf(15+4*t.t.length)),n.write_shift(1,0),write_XLWideString(t.t,n),_?n.slice(0,n.l):n}var parse_BrtCommentText=parse_RichStr;function write_BrtCommentText(t,n){var _=!1;return n==null&&(_=!0,n=new_buf(23+4*t.t.length)),n.write_shift(1,1),write_XLWideString(t.t,n),n.write_shift(4,1),write_StrRun({ich:0,ifnt:0},n),_?n.slice(0,n.l):n}function parse_XLSBCell(t){var n=t.read_shift(4),_=t.read_shift(2);return _+=t.read_shift(1)<<16,t.l++,{c:n,iStyleRef:_}}function write_XLSBCell(t,n){return n==null&&(n=new_buf(8)),n.write_shift(-4,t.c),n.write_shift(3,t.iStyleRef||t.s),n.write_shift(1,0),n}function parse_XLSBShortCell(t){var n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:n}}function write_XLSBShortCell(t,n){return n==null&&(n=new_buf(4)),n.write_shift(3,t.iStyleRef||t.s),n.write_shift(1,0),n}var parse_XLSBCodeName=parse_XLWideString,write_XLSBCodeName=write_XLWideString;function parse_XLNullableWideString(t){var n=t.read_shift(4);return n===0||n===4294967295?"":t.read_shift(n,"dbcs")}function write_XLNullableWideString(t,n){var _=!1;return n==null&&(_=!0,n=new_buf(127)),n.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&n.write_shift(0,t,"dbcs"),_?n.slice(0,n.l):n}var parse_XLNameWideString=parse_XLWideString,parse_RelID=parse_XLNullableWideString,write_RelID=write_XLNullableWideString;function parse_RkNumber(t){var n=t.slice(t.l,t.l+4),_=n[0]&1,x=n[0]&2;t.l+=4;var E=x===0?__double([0,0,0,0,n[0]&252,n[1],n[2],n[3]],0):__readInt32LE(n,0)>>2;return _?E/100:E}function write_RkNumber(t,n){n==null&&(n=new_buf(4));var _=0,x=0,E=t*100;if(t==(t|0)&&t>=-(1<<29)&&t<1<<29?x=1:E==(E|0)&&E>=-(1<<29)&&E<1<<29&&(x=1,_=1),x)n.write_shift(-4,((_?E:t)<<2)+(_+2));else throw new Error("unsupported RkNumber "+t)}function parse_RfX(t){var n={s:{},e:{}};return n.s.r=t.read_shift(4),n.e.r=t.read_shift(4),n.s.c=t.read_shift(4),n.e.c=t.read_shift(4),n}function write_RfX(t,n){return n||(n=new_buf(16)),n.write_shift(4,t.s.r),n.write_shift(4,t.e.r),n.write_shift(4,t.s.c),n.write_shift(4,t.e.c),n}var parse_UncheckedRfX=parse_RfX,write_UncheckedRfX=write_RfX;function parse_Xnum(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function write_Xnum(t,n){return(n||new_buf(8)).write_shift(8,t,"f")}function parse_BrtColor(t){var n={},_=t.read_shift(1),x=_>>>1,E=t.read_shift(1),S=t.read_shift(2,"i"),C=t.read_shift(1),T=t.read_shift(1),B=t.read_shift(1);switch(t.l++,x){case 0:n.auto=1;break;case 1:n.index=E;var A=XLSIcv[E];A&&(n.rgb=rgb2Hex(A));break;case 2:n.rgb=rgb2Hex([C,T,B]);break;case 3:n.theme=E;break}return S!=0&&(n.tint=S>0?S/32767:S/32768),n}function write_BrtColor(t,n){if(n||(n=new_buf(8)),!t||t.auto)return n.write_shift(4,0),n.write_shift(4,0),n;t.index!=null?(n.write_shift(1,2),n.write_shift(1,t.index)):t.theme!=null?(n.write_shift(1,6),n.write_shift(1,t.theme)):(n.write_shift(1,5),n.write_shift(1,0));var _=t.tint||0;if(_>0?_*=32767:_<0&&(_*=32768),n.write_shift(2,_),!t.rgb||t.theme!=null)n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);else{var x=t.rgb||"FFFFFF";typeof x=="number"&&(x=("000000"+x.toString(16)).slice(-6)),n.write_shift(1,parseInt(x.slice(0,2),16)),n.write_shift(1,parseInt(x.slice(2,4),16)),n.write_shift(1,parseInt(x.slice(4,6),16)),n.write_shift(1,255)}return n}function parse_FontFlags(t){var n=t.read_shift(1);t.l++;var _={fBold:n&1,fItalic:n&2,fUnderline:n&4,fStrikeout:n&8,fOutline:n&16,fShadow:n&32,fCondense:n&64,fExtend:n&128};return _}function write_FontFlags(t,n){n||(n=new_buf(2));var _=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return n.write_shift(1,_),n.write_shift(1,0),n}function parse_ClipboardFormatOrString(t,n){var _={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},x=t.read_shift(4);switch(x){case 0:return"";case 4294967295:case 4294967294:return _[t.read_shift(4)]||""}if(x>400)throw new Error("Unsupported Clipboard: "+x.toString(16));return t.l-=4,t.read_shift(0,n==1?"lpstr":"lpwstr")}function parse_ClipboardFormatOrAnsiString(t){return parse_ClipboardFormatOrString(t,1)}function parse_ClipboardFormatOrUnicodeString(t){return parse_ClipboardFormatOrString(t,2)}var VT_I2=2,VT_I4=3,VT_BOOL=11,VT_VARIANT=12,VT_UI4=19,VT_FILETIME=64,VT_BLOB=65,VT_CF=71,VT_VECTOR_VARIANT=4108,VT_VECTOR_LPSTR=4126,VT_STRING=80,VT_USTR=81,VT_CUSTOM=[VT_STRING,VT_USTR],DocSummaryPIDDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Category",t:VT_STRING},3:{n:"PresentationFormat",t:VT_STRING},4:{n:"ByteCount",t:VT_I4},5:{n:"LineCount",t:VT_I4},6:{n:"ParagraphCount",t:VT_I4},7:{n:"SlideCount",t:VT_I4},8:{n:"NoteCount",t:VT_I4},9:{n:"HiddenCount",t:VT_I4},10:{n:"MultimediaClipCount",t:VT_I4},11:{n:"ScaleCrop",t:VT_BOOL},12:{n:"HeadingPairs",t:VT_VECTOR_VARIANT},13:{n:"TitlesOfParts",t:VT_VECTOR_LPSTR},14:{n:"Manager",t:VT_STRING},15:{n:"Company",t:VT_STRING},16:{n:"LinksUpToDate",t:VT_BOOL},17:{n:"CharacterCount",t:VT_I4},19:{n:"SharedDoc",t:VT_BOOL},22:{n:"HyperlinksChanged",t:VT_BOOL},23:{n:"AppVersion",t:VT_I4,p:"version"},24:{n:"DigSig",t:VT_BLOB},26:{n:"ContentType",t:VT_STRING},27:{n:"ContentStatus",t:VT_STRING},28:{n:"Language",t:VT_STRING},29:{n:"Version",t:VT_STRING},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},SummaryPIDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Title",t:VT_STRING},3:{n:"Subject",t:VT_STRING},4:{n:"Author",t:VT_STRING},5:{n:"Keywords",t:VT_STRING},6:{n:"Comments",t:VT_STRING},7:{n:"Template",t:VT_STRING},8:{n:"LastAuthor",t:VT_STRING},9:{n:"RevNumber",t:VT_STRING},10:{n:"EditTime",t:VT_FILETIME},11:{n:"LastPrinted",t:VT_FILETIME},12:{n:"CreatedDate",t:VT_FILETIME},13:{n:"ModifiedDate",t:VT_FILETIME},14:{n:"PageCount",t:VT_I4},15:{n:"WordCount",t:VT_I4},16:{n:"CharCount",t:VT_I4},17:{n:"Thumbnail",t:VT_CF},18:{n:"Application",t:VT_STRING},19:{n:"DocSecurity",t:VT_I4},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},CountryEnum={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},XLSFillPattern=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function rgbify(t){return t.map(function(n){return[n>>16&255,n>>8&255,n&255]})}var _XLSIcv=rgbify([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,0,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),XLSIcv=dup(_XLSIcv),BErr={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},RBErr={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},XLSLblBuiltIn=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"],ct2type={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},CT_LIST={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function new_ct(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function parse_ct(t){var n=new_ct();if(!t||!t.match)return n;var _={};if((t.match(tagregex)||[]).forEach(function(x){var E=parsexmltag(x);switch(E[0].replace(nsregex,"<")){case"<?xml":break;case"<Types":n.xmlns=E["xmlns"+(E[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":_[E.Extension.toLowerCase()]=E.ContentType;break;case"<Override":n[ct2type[E.ContentType]]!==void 0&&n[ct2type[E.ContentType]].push(E.PartName);break}}),n.xmlns!==XMLNS.CT)throw new Error("Unknown Namespace: "+n.xmlns);return n.calcchain=n.calcchains.length>0?n.calcchains[0]:"",n.sst=n.strs.length>0?n.strs[0]:"",n.style=n.styles.length>0?n.styles[0]:"",n.defaults=_,delete n.calcchains,n}function write_ct(t,n,_){var x=evert_arr(ct2type),E=[],S;_||(E[E.length]=XML_HEADER,E[E.length]=writextag("Types",null,{xmlns:XMLNS.CT,"xmlns:xsd":XMLNS.xsd,"xmlns:xsi":XMLNS.xsi}),E=E.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(A){return writextag("Default",null,{Extension:A[0],ContentType:A[1]})})));var C=function(A){t[A]&&t[A].length>0&&(S=t[A][0],E[E.length]=writextag("Override",null,{PartName:(S[0]=="/"?"":"/")+S,ContentType:CT_LIST[A][n.bookType]||CT_LIST[A].xlsx}))},T=function(A){(t[A]||[]).forEach(function(I){E[E.length]=writextag("Override",null,{PartName:(I[0]=="/"?"":"/")+I,ContentType:CT_LIST[A][n.bookType]||CT_LIST[A].xlsx})})},B=function(A){(t[A]||[]).forEach(function(I){E[E.length]=writextag("Override",null,{PartName:(I[0]=="/"?"":"/")+I,ContentType:x[A][0]})})};return C("workbooks"),T("sheets"),T("charts"),B("themes"),["strs","styles"].forEach(C),["coreprops","extprops","custprops"].forEach(B),B("vba"),B("comments"),B("threadedcomments"),B("drawings"),T("metadata"),B("people"),!_&&E.length>2&&(E[E.length]="</Types>",E[1]=E[1].replace("/>",">")),E.join("")}var RELS={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",CONN:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/connections",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function get_rels_path(t){var n=t.lastIndexOf("/");return t.slice(0,n+1)+"_rels/"+t.slice(n+1)+".rels"}function parse_rels(t,n){var _={"!id":{}};if(!t)return _;n.charAt(0)!=="/"&&(n="/"+n);var x={};return(t.match(tagregex)||[]).forEach(function(E){var S=parsexmltag(E);if(S[0]==="<Relationship"){var C={};C.Type=S.Type,C.Target=S.Target,C.Id=S.Id,S.TargetMode&&(C.TargetMode=S.TargetMode);var T=S.TargetMode==="External"?S.Target:resolve_path(S.Target,n);_[T]=C,x[S.Id]=C}}),_["!id"]=x,_}function write_rels(t){var n=[XML_HEADER,writextag("Relationships",null,{xmlns:XMLNS.RELS})];return keys(t["!id"]).forEach(function(_){n[n.length]=writextag("Relationship",null,t["!id"][_])}),n.length>2&&(n[n.length]="</Relationships>",n[1]=n[1].replace("/>",">")),n.join("")}function add_rels(t,n,_,x,E,S){if(E||(E={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),n<0)for(n=t["!idx"];t["!id"]["rId"+n];++n);if(t["!idx"]=n+1,E.Id="rId"+n,E.Type=x,E.Target=_,S?E.TargetMode=S:[RELS.HLINK,RELS.XPATH,RELS.XMISS].indexOf(E.Type)>-1&&(E.TargetMode="External"),t["!id"][E.Id])throw new Error("Cannot rewrite rId "+n);return t["!id"][E.Id]=E,t[("/"+E.Target).replace("//","/")]=E,n}var CT_ODS="application/vnd.oasis.opendocument.spreadsheet";function parse_manifest(t,n){for(var _=xlml_normalize(t),x,E;x=xlmlregex.exec(_);)switch(x[3]){case"manifest":break;case"file-entry":if(E=parsexmltag(x[0],!1),E.path=="/"&&E.type!==CT_ODS)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(n&&n.WTF)throw x}}function write_manifest(t){var n=[XML_HEADER];n.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),n.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var _=0;_<t.length;++_)n.push('  <manifest:file-entry manifest:full-path="'+t[_][0]+'" manifest:media-type="'+t[_][1]+`"/>
`);return n.push("</manifest:manifest>"),n.join("")}function write_rdf_type(t,n,_){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(_||"odf")+"#"+n+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf_has(t,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+n+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf(t){var n=[XML_HEADER];n.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var _=0;_!=t.length;++_)n.push(write_rdf_type(t[_][0],t[_][1])),n.push(write_rdf_has("",t[_][0]));return n.push(write_rdf_type("","Document","pkg")),n.push("</rdf:RDF>"),n.join("")}function write_meta_ods(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+XLSX.version+"</meta:generator></office:meta></office:document-meta>"}var CORE_PROPS=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],CORE_PROPS_REGEX=function(){for(var t=new Array(CORE_PROPS.length),n=0;n<CORE_PROPS.length;++n){var _=CORE_PROPS[n],x="(?:"+_[0].slice(0,_[0].indexOf(":"))+":)"+_[0].slice(_[0].indexOf(":")+1);t[n]=new RegExp("<"+x+"[^>]*>([\\s\\S]*?)</"+x+">")}return t}();function parse_core_props(t){var n={};t=utf8read(t);for(var _=0;_<CORE_PROPS.length;++_){var x=CORE_PROPS[_],E=t.match(CORE_PROPS_REGEX[_]);E!=null&&E.length>0&&(n[x[1]]=unescapexml(E[1])),x[2]==="date"&&n[x[1]]&&(n[x[1]]=parseDate(n[x[1]]))}return n}function cp_doit(t,n,_,x,E){E[t]!=null||n==null||n===""||(E[t]=n,n=escapexml(n),x[x.length]=_?writextag(t,n,_):writetag(t,n))}function write_core_props(t,n){var _=n||{},x=[XML_HEADER,writextag("cp:coreProperties",null,{"xmlns:cp":XMLNS.CORE_PROPS,"xmlns:dc":XMLNS.dc,"xmlns:dcterms":XMLNS.dcterms,"xmlns:dcmitype":XMLNS.dcmitype,"xmlns:xsi":XMLNS.xsi})],E={};if(!t&&!_.Props)return x.join("");t&&(t.CreatedDate!=null&&cp_doit("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:write_w3cdtf(t.CreatedDate,_.WTF),{"xsi:type":"dcterms:W3CDTF"},x,E),t.ModifiedDate!=null&&cp_doit("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:write_w3cdtf(t.ModifiedDate,_.WTF),{"xsi:type":"dcterms:W3CDTF"},x,E));for(var S=0;S!=CORE_PROPS.length;++S){var C=CORE_PROPS[S],T=_.Props&&_.Props[C[1]]!=null?_.Props[C[1]]:t?t[C[1]]:null;T===!0?T="1":T===!1?T="0":typeof T=="number"&&(T=String(T)),T!=null&&cp_doit(C[0],T,null,x,E)}return x.length>2&&(x[x.length]="</cp:coreProperties>",x[1]=x[1].replace("/>",">")),x.join("")}var EXT_PROPS=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],PseudoPropsPairs=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function load_props_pairs(t,n,_,x){var E=[];if(typeof t=="string")E=parseVector(t,x);else for(var S=0;S<t.length;++S)E=E.concat(t[S].map(function(I){return{v:I}}));var C=typeof n=="string"?parseVector(n,x).map(function(I){return I.v}):n,T=0,B=0;if(C.length>0)for(var A=0;A!==E.length;A+=2){switch(B=+E[A+1].v,E[A].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":_.Worksheets=B,_.SheetNames=C.slice(T,T+B);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":_.NamedRanges=B,_.DefinedNames=C.slice(T,T+B);break;case"Charts":case"Diagramme":_.Chartsheets=B,_.ChartNames=C.slice(T,T+B);break}T+=B}}function parse_ext_props(t,n,_){var x={};return n||(n={}),t=utf8read(t),EXT_PROPS.forEach(function(E){var S=(t.match(matchtag(E[0]))||[])[1];switch(E[2]){case"string":S&&(n[E[1]]=unescapexml(S));break;case"bool":n[E[1]]=S==="true";break;case"raw":var C=t.match(new RegExp("<"+E[0]+"[^>]*>([\\s\\S]*?)</"+E[0]+">"));C&&C.length>0&&(x[E[1]]=C[1]);break}}),x.HeadingPairs&&x.TitlesOfParts&&load_props_pairs(x.HeadingPairs,x.TitlesOfParts,n,_),n}function write_ext_props(t){var n=[],_=writextag;return t||(t={}),t.Application="SheetJS",n[n.length]=XML_HEADER,n[n.length]=writextag("Properties",null,{xmlns:XMLNS.EXT_PROPS,"xmlns:vt":XMLNS.vt}),EXT_PROPS.forEach(function(x){if(t[x[1]]!==void 0){var E;switch(x[2]){case"string":E=escapexml(String(t[x[1]]));break;case"bool":E=t[x[1]]?"true":"false";break}E!==void 0&&(n[n.length]=_(x[0],E))}}),n[n.length]=_("HeadingPairs",_("vt:vector",_("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+_("vt:variant",_("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),n[n.length]=_("TitlesOfParts",_("vt:vector",t.SheetNames.map(function(x){return"<vt:lpstr>"+escapexml(x)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),n.length>2&&(n[n.length]="</Properties>",n[1]=n[1].replace("/>",">")),n.join("")}var custregex=/<[^>]+>[^<]*/g;function parse_cust_props(t,n){var _={},x="",E=t.match(custregex);if(E)for(var S=0;S!=E.length;++S){var C=E[S],T=parsexmltag(C);switch(strip_ns(T[0])){case"<?xml":break;case"<Properties":break;case"<property":x=unescapexml(T.name);break;case"</property>":x=null;break;default:if(C.indexOf("<vt:")===0){var B=C.split(">"),A=B[0].slice(4),I=B[1];switch(A){case"lpstr":case"bstr":case"lpwstr":_[x]=unescapexml(I);break;case"bool":_[x]=parsexmlbool(I);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":_[x]=parseInt(I,10);break;case"r4":case"r8":case"decimal":_[x]=parseFloat(I);break;case"filetime":case"date":_[x]=parseDate(I);break;case"cy":case"error":_[x]=unescapexml(I);break;default:if(A.slice(-1)=="/")break;n.WTF&&typeof console<"u"&&console.warn("Unexpected",C,A,B)}}else if(C.slice(0,2)!=="</"){if(n.WTF)throw new Error(C)}}}return _}function write_cust_props(t){var n=[XML_HEADER,writextag("Properties",null,{xmlns:XMLNS.CUST_PROPS,"xmlns:vt":XMLNS.vt})];if(!t)return n.join("");var _=1;return keys(t).forEach(function(E){++_,n[n.length]=writextag("property",write_vt(t[E],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:_,name:escapexml(E)})}),n.length>2&&(n[n.length]="</Properties>",n[1]=n[1].replace("/>",">")),n.join("")}var XLMLDocPropsMap={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},evert_XLMLDPM;function xlml_set_prop(t,n,_){evert_XLMLDPM||(evert_XLMLDPM=evert(XLMLDocPropsMap)),n=evert_XLMLDPM[n]||n,t[n]=_}function xlml_write_docprops(t,n){var _=[];return keys(XLMLDocPropsMap).map(function(x){for(var E=0;E<CORE_PROPS.length;++E)if(CORE_PROPS[E][1]==x)return CORE_PROPS[E];for(E=0;E<EXT_PROPS.length;++E)if(EXT_PROPS[E][1]==x)return EXT_PROPS[E];throw x}).forEach(function(x){if(t[x[1]]!=null){var E=n&&n.Props&&n.Props[x[1]]!=null?n.Props[x[1]]:t[x[1]];switch(x[2]){case"date":E=new Date(E).toISOString().replace(/\.\d*Z/,"Z");break}typeof E=="number"?E=String(E):E===!0||E===!1?E=E?"1":"0":E instanceof Date&&(E=new Date(E).toISOString().replace(/\.\d*Z/,"")),_.push(writetag(XLMLDocPropsMap[x[1]]||x[1],E))}}),writextag("DocumentProperties",_.join(""),{xmlns:XLMLNS.o})}function xlml_write_custprops(t,n){var _=["Worksheets","SheetNames"],x="CustomDocumentProperties",E=[];return t&&keys(t).forEach(function(S){if(Object.prototype.hasOwnProperty.call(t,S)){for(var C=0;C<CORE_PROPS.length;++C)if(S==CORE_PROPS[C][1])return;for(C=0;C<EXT_PROPS.length;++C)if(S==EXT_PROPS[C][1])return;for(C=0;C<_.length;++C)if(S==_[C])return;var T=t[S],B="string";typeof T=="number"?(B="float",T=String(T)):T===!0||T===!1?(B="boolean",T=T?"1":"0"):T=String(T),E.push(writextag(escapexmltag(S),T,{"dt:dt":B}))}}),n&&keys(n).forEach(function(S){if(Object.prototype.hasOwnProperty.call(n,S)&&!(t&&Object.prototype.hasOwnProperty.call(t,S))){var C=n[S],T="string";typeof C=="number"?(T="float",C=String(C)):C===!0||C===!1?(T="boolean",C=C?"1":"0"):C instanceof Date?(T="dateTime.tz",C=C.toISOString()):C=String(C),E.push(writextag(escapexmltag(S),C,{"dt:dt":T}))}}),"<"+x+' xmlns="'+XLMLNS.o+'">'+E.join("")+"</"+x+">"}function parse_FILETIME(t){var n=t.read_shift(4),_=t.read_shift(4);return new Date((_/1e7*Math.pow(2,32)+n/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function write_FILETIME(t){var n=typeof t=="string"?new Date(Date.parse(t)):t,_=n.getTime()/1e3+11644473600,x=_%Math.pow(2,32),E=(_-x)/Math.pow(2,32);x*=1e7,E*=1e7;var S=x/Math.pow(2,32)|0;S>0&&(x=x%Math.pow(2,32),E+=S);var C=new_buf(8);return C.write_shift(4,x),C.write_shift(4,E),C}function parse_lpstr(t,n,_){var x=t.l,E=t.read_shift(0,"lpstr-cp");if(_)for(;t.l-x&3;)++t.l;return E}function parse_lpwstr(t,n,_){var x=t.read_shift(0,"lpwstr");return _&&(t.l+=4-(x.length+1&3)&3),x}function parse_VtStringBase(t,n,_){return n===31?parse_lpwstr(t):parse_lpstr(t,n,_)}function parse_VtString(t,n,_){return parse_VtStringBase(t,n,_===!1?0:4)}function parse_VtUnalignedString(t,n){if(!n)throw new Error("VtUnalignedString must have positive length");return parse_VtStringBase(t,n,0)}function parse_VtVecLpwstrValue(t){for(var n=t.read_shift(4),_=[],x=0;x!=n;++x){var E=t.l;_[x]=t.read_shift(0,"lpwstr").replace(chr0,""),t.l-E&2&&(t.l+=2)}return _}function parse_VtVecUnalignedLpstrValue(t){for(var n=t.read_shift(4),_=[],x=0;x!=n;++x)_[x]=t.read_shift(0,"lpstr-cp").replace(chr0,"");return _}function parse_VtHeadingPair(t){var n=t.l,_=parse_TypedPropertyValue(t,VT_USTR);t[t.l]==0&&t[t.l+1]==0&&t.l-n&2&&(t.l+=2);var x=parse_TypedPropertyValue(t,VT_I4);return[_,x]}function parse_VtVecHeadingPairValue(t){for(var n=t.read_shift(4),_=[],x=0;x<n/2;++x)_.push(parse_VtHeadingPair(t));return _}function parse_dictionary(t,n){for(var _=t.read_shift(4),x={},E=0;E!=_;++E){var S=t.read_shift(4),C=t.read_shift(4);x[S]=t.read_shift(C,n===1200?"utf16le":"utf8").replace(chr0,"").replace(chr1,"!"),n===1200&&C%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>2+1<<2),x}function parse_BLOB(t){var n=t.read_shift(4),_=t.slice(t.l,t.l+n);return t.l+=n,(n&3)>0&&(t.l+=4-(n&3)&3),_}function parse_ClipboardData(t){var n={};return n.Size=t.read_shift(4),t.l+=n.Size+3-(n.Size-1)%4,n}function parse_TypedPropertyValue(t,n,_){var x=t.read_shift(2),E,S=_||{};if(t.l+=2,n!==VT_VARIANT&&x!==n&&VT_CUSTOM.indexOf(n)===-1&&!((n&65534)==4126&&(x&65534)==4126))throw new Error("Expected type "+n+" saw "+x);switch(n===VT_VARIANT?x:n){case 2:return E=t.read_shift(2,"i"),S.raw||(t.l+=2),E;case 3:return E=t.read_shift(4,"i"),E;case 11:return t.read_shift(4)!==0;case 19:return E=t.read_shift(4),E;case 30:return parse_lpstr(t,x,4).replace(chr0,"");case 31:return parse_lpwstr(t);case 64:return parse_FILETIME(t);case 65:return parse_BLOB(t);case 71:return parse_ClipboardData(t);case 80:return parse_VtString(t,x,!S.raw).replace(chr0,"");case 81:return parse_VtUnalignedString(t,x).replace(chr0,"");case 4108:return parse_VtVecHeadingPairValue(t);case 4126:case 4127:return x==4127?parse_VtVecLpwstrValue(t):parse_VtVecUnalignedLpstrValue(t);default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+x)}}function write_TypedPropertyValue(t,n){var _=new_buf(4),x=new_buf(4);switch(_.write_shift(4,t==80?31:t),t){case 3:x.write_shift(-4,n);break;case 5:x=new_buf(8),x.write_shift(8,n,"f");break;case 11:x.write_shift(4,n?1:0);break;case 64:x=write_FILETIME(n);break;case 31:case 80:for(x=new_buf(4+2*(n.length+1)+(n.length%2?0:2)),x.write_shift(4,n.length+1),x.write_shift(0,n,"dbcs");x.l!=x.length;)x.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}return bconcat([_,x])}function parse_PropertySet(t,n){var _=t.l,x=t.read_shift(4),E=t.read_shift(4),S=[],C=0,T=0,B=-1,A={};for(C=0;C!=E;++C){var I=t.read_shift(4),D=t.read_shift(4);S[C]=[I,D+_]}S.sort(function(H,Y){return H[1]-Y[1]});var M={};for(C=0;C!=E;++C){if(t.l!==S[C][1]){var V=!0;if(C>0&&n)switch(n[S[C-1][0]].t){case 2:t.l+2===S[C][1]&&(t.l+=2,V=!1);break;case 80:t.l<=S[C][1]&&(t.l=S[C][1],V=!1);break;case 4108:t.l<=S[C][1]&&(t.l=S[C][1],V=!1);break}if((!n||C==0)&&t.l<=S[C][1]&&(V=!1,t.l=S[C][1]),V)throw new Error("Read Error: Expected address "+S[C][1]+" at "+t.l+" :"+C)}if(n){if(S[C][0]==0&&S.length>C+1&&S[C][1]==S[C+1][1])continue;var L=n[S[C][0]];if(M[L.n]=parse_TypedPropertyValue(t,L.t,{raw:!0}),L.p==="version"&&(M[L.n]=String(M[L.n]>>16)+"."+("0000"+String(M[L.n]&65535)).slice(-4)),L.n=="CodePage")switch(M[L.n]){case 0:M[L.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:set_cp(T=M[L.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+M[L.n])}}else if(S[C][0]===1){if(T=M.CodePage=parse_TypedPropertyValue(t,VT_I2),set_cp(T),B!==-1){var F=t.l;t.l=S[B][1],A=parse_dictionary(t,T),t.l=F}}else if(S[C][0]===0){if(T===0){B=C,t.l=S[C+1][1];continue}A=parse_dictionary(t,T)}else{var j=A[S[C][0]],U;switch(t[t.l]){case 65:t.l+=4,U=parse_BLOB(t);break;case 30:t.l+=4,U=parse_VtString(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,U=parse_VtString(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,U=t.read_shift(4,"i");break;case 19:t.l+=4,U=t.read_shift(4);break;case 5:t.l+=4,U=t.read_shift(8,"f");break;case 11:t.l+=4,U=parsebool(t,4);break;case 64:t.l+=4,U=parseDate(parse_FILETIME(t));break;default:throw new Error("unparsed value: "+t[t.l])}M[j]=U}}return t.l=_+x,M}var XLSPSSkip=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function guess_property_type(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function write_PropertySet(t,n,_){var x=new_buf(8),E=[],S=[],C=8,T=0,B=new_buf(8),A=new_buf(8);if(B.write_shift(4,2),B.write_shift(4,1200),A.write_shift(4,1),S.push(B),E.push(A),C+=8+B.length,!n){A=new_buf(8),A.write_shift(4,0),E.unshift(A);var I=[new_buf(4)];for(I[0].write_shift(4,t.length),T=0;T<t.length;++T){var D=t[T][0];for(B=new_buf(4+4+2*(D.length+1)+(D.length%2?0:2)),B.write_shift(4,T+2),B.write_shift(4,D.length+1),B.write_shift(0,D,"dbcs");B.l!=B.length;)B.write_shift(1,0);I.push(B)}B=bconcat(I),S.unshift(B),C+=8+B.length}for(T=0;T<t.length;++T)if(!(n&&!n[t[T][0]])&&!(XLSPSSkip.indexOf(t[T][0])>-1||PseudoPropsPairs.indexOf(t[T][0])>-1)&&t[T][1]!=null){var M=t[T][1],V=0;if(n){V=+n[t[T][0]];var L=_[V];if(L.p=="version"&&typeof M=="string"){var F=M.split(".");M=(+F[0]<<16)+(+F[1]||0)}B=write_TypedPropertyValue(L.t,M)}else{var j=guess_property_type(M);j==-1&&(j=31,M=String(M)),B=write_TypedPropertyValue(j,M)}S.push(B),A=new_buf(8),A.write_shift(4,n?V:2+T),E.push(A),C+=8+B.length}var U=8*(S.length+1);for(T=0;T<S.length;++T)E[T].write_shift(4,U),U+=S[T].length;return x.write_shift(4,C),x.write_shift(4,S.length),bconcat([x].concat(E).concat(S))}function parse_PropertySetStream(t,n,_){var x=t.content;if(!x)return{};prep_blob(x,0);var E,S,C,T,B=0;x.chk("feff","Byte Order: "),x.read_shift(2);var A=x.read_shift(4),I=x.read_shift(16);if(I!==CFB.utils.consts.HEADER_CLSID&&I!==_)throw new Error("Bad PropertySet CLSID "+I);if(E=x.read_shift(4),E!==1&&E!==2)throw new Error("Unrecognized #Sets: "+E);if(S=x.read_shift(16),T=x.read_shift(4),E===1&&T!==x.l)throw new Error("Length mismatch: "+T+" !== "+x.l);E===2&&(C=x.read_shift(16),B=x.read_shift(4));var D=parse_PropertySet(x,n),M={SystemIdentifier:A};for(var V in D)M[V]=D[V];if(M.FMTID=S,E===1)return M;if(B-x.l==2&&(x.l+=2),x.l!==B)throw new Error("Length mismatch 2: "+x.l+" !== "+B);var L;try{L=parse_PropertySet(x,null)}catch{}for(V in L)M[V]=L[V];return M.FMTID=[S,C],M}function write_PropertySetStream(t,n,_,x,E,S){var C=new_buf(E?68:48),T=[C];C.write_shift(2,65534),C.write_shift(2,0),C.write_shift(4,842412599),C.write_shift(16,CFB.utils.consts.HEADER_CLSID,"hex"),C.write_shift(4,E?2:1),C.write_shift(16,n,"hex"),C.write_shift(4,E?68:48);var B=write_PropertySet(t,_,x);if(T.push(B),E){var A=write_PropertySet(E,null,null);C.write_shift(16,S,"hex"),C.write_shift(4,68+B.length),T.push(A)}return bconcat(T)}function parsenoop2(t,n){return t.read_shift(n),null}function writezeroes(t,n){n||(n=new_buf(t));for(var _=0;_<t;++_)n.write_shift(1,0);return n}function parslurp(t,n,_){for(var x=[],E=t.l+n;t.l<E;)x.push(_(t,E-t.l));if(E!==t.l)throw new Error("Slurp error");return x}function parsebool(t,n){return t.read_shift(n)===1}function writebool(t,n){return n||(n=new_buf(2)),n.write_shift(2,+!!t),n}function parseuint16(t){return t.read_shift(2,"u")}function writeuint16(t,n){return n||(n=new_buf(2)),n.write_shift(2,t),n}function parseuint16a(t,n){return parslurp(t,n,parseuint16)}function parse_Bes(t){var n=t.read_shift(1),_=t.read_shift(1);return _===1?n:n===1}function write_Bes(t,n,_){return _||(_=new_buf(2)),_.write_shift(1,n=="e"?+t:+!!t),_.write_shift(1,n=="e"?1:0),_}function parse_ShortXLUnicodeString(t,n,_){var x=t.read_shift(_&&_.biff>=12?2:1),E="sbcs-cont",S=current_codepage;if(_&&_.biff>=8&&(current_codepage=1200),!_||_.biff==8){var C=t.read_shift(1);C&&(E="dbcs-cont")}else _.biff==12&&(E="wstr");_.biff>=2&&_.biff<=5&&(E="cpstr");var T=x?t.read_shift(x,E):"";return current_codepage=S,T}function parse_XLUnicodeRichExtendedString(t){var n=current_codepage;current_codepage=1200;var _=t.read_shift(2),x=t.read_shift(1),E=x&4,S=x&8,C=1+(x&1),T=0,B,A={};S&&(T=t.read_shift(2)),E&&(B=t.read_shift(4));var I=C==2?"dbcs-cont":"sbcs-cont",D=_===0?"":t.read_shift(_,I);return S&&(t.l+=4*T),E&&(t.l+=B),A.t=D,S||(A.raw="<t>"+A.t+"</t>",A.r=A.t),current_codepage=n,A}function write_XLUnicodeRichExtendedString(t){var n=t.t||"",_=new_buf(3+0);_.write_shift(2,n.length),_.write_shift(1,1);var x=new_buf(2*n.length);x.write_shift(2*n.length,n,"utf16le");var E=[_,x];return bconcat(E)}function parse_XLUnicodeStringNoCch(t,n,_){var x;if(_){if(_.biff>=2&&_.biff<=5)return t.read_shift(n,"cpstr");if(_.biff>=12)return t.read_shift(n,"dbcs-cont")}var E=t.read_shift(1);return E===0?x=t.read_shift(n,"sbcs-cont"):x=t.read_shift(n,"dbcs-cont"),x}function parse_XLUnicodeString(t,n,_){var x=t.read_shift(_&&_.biff==2?1:2);return x===0?(t.l++,""):parse_XLUnicodeStringNoCch(t,x,_)}function parse_XLUnicodeString2(t,n,_){if(_.biff>5)return parse_XLUnicodeString(t,n,_);var x=t.read_shift(1);return x===0?(t.l++,""):t.read_shift(x,_.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function write_XLUnicodeString(t,n,_){return _||(_=new_buf(3+2*t.length)),_.write_shift(2,t.length),_.write_shift(1,1),_.write_shift(31,t,"utf16le"),_}function parse_ControlInfo(t){var n=t.read_shift(1);t.l++;var _=t.read_shift(2);return t.l+=2,[n,_]}function parse_URLMoniker(t){var n=t.read_shift(4),_=t.l,x=!1;n>24&&(t.l+=n-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(x=!0),t.l=_);var E=t.read_shift((x?n-24:n)>>1,"utf16le").replace(chr0,"");return x&&(t.l+=24),E}function parse_FileMoniker(t){for(var n=t.read_shift(2),_="";n-- >0;)_+="../";var x=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var E=t.read_shift(4);if(E===0)return _+x.replace(/\\/g,"/");var S=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var C=t.read_shift(S>>1,"utf16le").replace(chr0,"");return _+C}function parse_HyperlinkMoniker(t,n){var _=t.read_shift(16);switch(_){case"e0c9ea79f9bace118c8200aa004ba90b":return parse_URLMoniker(t);case"0303000000000000c000000000000046":return parse_FileMoniker(t);default:throw new Error("Unsupported Moniker "+_)}}function parse_HyperlinkString(t){var n=t.read_shift(4),_=n>0?t.read_shift(n,"utf16le").replace(chr0,""):"";return _}function write_HyperlinkString(t,n){n||(n=new_buf(6+t.length*2)),n.write_shift(4,1+t.length);for(var _=0;_<t.length;++_)n.write_shift(2,t.charCodeAt(_));return n.write_shift(2,0),n}function parse_Hyperlink(t,n){var _=t.l+n,x=t.read_shift(4);if(x!==2)throw new Error("Unrecognized streamVersion: "+x);var E=t.read_shift(2);t.l+=2;var S,C,T,B,A="",I,D;E&16&&(S=parse_HyperlinkString(t,_-t.l)),E&128&&(C=parse_HyperlinkString(t,_-t.l)),(E&257)===257&&(T=parse_HyperlinkString(t,_-t.l)),(E&257)===1&&(B=parse_HyperlinkMoniker(t,_-t.l)),E&8&&(A=parse_HyperlinkString(t,_-t.l)),E&32&&(I=t.read_shift(16)),E&64&&(D=parse_FILETIME(t)),t.l=_;var M=C||T||B||"";M&&A&&(M+="#"+A),M||(M="#"+A),E&2&&M.charAt(0)=="/"&&M.charAt(1)!="/"&&(M="file://"+M);var V={Target:M};return I&&(V.guid=I),D&&(V.time=D),S&&(V.Tooltip=S),V}function write_Hyperlink(t){var n=new_buf(512),_=0,x=t.Target;x.slice(0,7)=="file://"&&(x=x.slice(7));var E=x.indexOf("#"),S=E>-1?31:23;switch(x.charAt(0)){case"#":S=28;break;case".":S&=-3;break}n.write_shift(4,2),n.write_shift(4,S);var C=[8,6815827,6619237,4849780,83];for(_=0;_<C.length;++_)n.write_shift(4,C[_]);if(S==28)x=x.slice(1),write_HyperlinkString(x,n);else if(S&2){for(C="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),_=0;_<C.length;++_)n.write_shift(1,parseInt(C[_],16));var T=E>-1?x.slice(0,E):x;for(n.write_shift(4,2*(T.length+1)),_=0;_<T.length;++_)n.write_shift(2,T.charCodeAt(_));n.write_shift(2,0),S&8&&write_HyperlinkString(E>-1?x.slice(E+1):"",n)}else{for(C="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),_=0;_<C.length;++_)n.write_shift(1,parseInt(C[_],16));for(var B=0;x.slice(B*3,B*3+3)=="../"||x.slice(B*3,B*3+3)=="..\\";)++B;for(n.write_shift(2,B),n.write_shift(4,x.length-3*B+1),_=0;_<x.length-3*B;++_)n.write_shift(1,x.charCodeAt(_+3*B)&255);for(n.write_shift(1,0),n.write_shift(2,65535),n.write_shift(2,57005),_=0;_<6;++_)n.write_shift(4,0)}return n.slice(0,n.l)}function parse_LongRGBA(t){var n=t.read_shift(1),_=t.read_shift(1),x=t.read_shift(1),E=t.read_shift(1);return[n,_,x,E]}function parse_LongRGB(t,n){var _=parse_LongRGBA(t);return _[3]=0,_}function parse_XLSCell(t){var n=t.read_shift(2),_=t.read_shift(2),x=t.read_shift(2);return{r:n,c:_,ixfe:x}}function write_XLSCell(t,n,_,x){return x||(x=new_buf(6)),x.write_shift(2,t),x.write_shift(2,n),x.write_shift(2,_||0),x}function parse_frtHeader(t){var n=t.read_shift(2),_=t.read_shift(2);return t.l+=8,{type:n,flags:_}}function parse_OptXLUnicodeString(t,n,_){return n===0?"":parse_XLUnicodeString2(t,n,_)}function parse_XTI(t,n,_){var x=_.biff>8?4:2,E=t.read_shift(x),S=t.read_shift(x,"i"),C=t.read_shift(x,"i");return[E,S,C]}function parse_RkRec(t){var n=t.read_shift(2),_=parse_RkNumber(t);return[n,_]}function parse_AddinUdf(t,n,_){t.l+=4,n-=4;var x=t.l+n,E=parse_ShortXLUnicodeString(t,n,_),S=t.read_shift(2);if(x-=t.l,S!==x)throw new Error("Malformed AddinUdf: padding = "+x+" != "+S);return t.l+=S,E}function parse_Ref8U(t){var n=t.read_shift(2),_=t.read_shift(2),x=t.read_shift(2),E=t.read_shift(2);return{s:{c:x,r:n},e:{c:E,r:_}}}function write_Ref8U(t,n){return n||(n=new_buf(8)),n.write_shift(2,t.s.r),n.write_shift(2,t.e.r),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c),n}function parse_RefU(t){var n=t.read_shift(2),_=t.read_shift(2),x=t.read_shift(1),E=t.read_shift(1);return{s:{c:x,r:n},e:{c:E,r:_}}}var parse_Ref=parse_RefU;function parse_FtCmo(t){t.l+=4;var n=t.read_shift(2),_=t.read_shift(2),x=t.read_shift(2);return t.l+=12,[_,n,x]}function parse_FtNts(t){var n={};return t.l+=4,t.l+=16,n.fSharedNote=t.read_shift(2),t.l+=4,n}function parse_FtCf(t){var n={};return t.l+=4,t.cf=t.read_shift(2),n}function parse_FtSkip(t){t.l+=2,t.l+=t.read_shift(2)}var FtTab={0:parse_FtSkip,4:parse_FtSkip,5:parse_FtSkip,6:parse_FtSkip,7:parse_FtCf,8:parse_FtSkip,9:parse_FtSkip,10:parse_FtSkip,11:parse_FtSkip,12:parse_FtSkip,13:parse_FtNts,14:parse_FtSkip,15:parse_FtSkip,16:parse_FtSkip,17:parse_FtSkip,18:parse_FtSkip,19:parse_FtSkip,20:parse_FtSkip,21:parse_FtCmo};function parse_FtArray(t,n){for(var _=t.l+n,x=[];t.l<_;){var E=t.read_shift(2);t.l-=2;try{x.push(FtTab[E](t,_-t.l))}catch{return t.l=_,x}}return t.l!=_&&(t.l=_),x}function parse_BOF(t,n){var _={BIFFVer:0,dt:0};switch(_.BIFFVer=t.read_shift(2),n-=2,n>=2&&(_.dt=t.read_shift(2),t.l-=2),_.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(n>6)throw new Error("Unexpected BIFF Ver "+_.BIFFVer)}return t.read_shift(n),_}function write_BOF(t,n,_){var x=1536,E=16;switch(_.bookType){case"biff8":break;case"biff5":x=1280,E=8;break;case"biff4":x=4,E=6;break;case"biff3":x=3,E=6;break;case"biff2":x=2,E=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var S=new_buf(E);return S.write_shift(2,x),S.write_shift(2,n),E>4&&S.write_shift(2,29282),E>6&&S.write_shift(2,1997),E>8&&(S.write_shift(2,49161),S.write_shift(2,1),S.write_shift(2,1798),S.write_shift(2,0)),S}function parse_InterfaceHdr(t,n){return n===0||t.read_shift(2),1200}function parse_WriteAccess(t,n,_){if(_.enc)return t.l+=n,"";var x=t.l,E=parse_XLUnicodeString2(t,0,_);return t.read_shift(n+x-t.l),E}function write_WriteAccess(t,n){var _=!n||n.biff==8,x=new_buf(_?112:54);for(x.write_shift(n.biff==8?2:1,7),_&&x.write_shift(1,0),x.write_shift(4,859007059),x.write_shift(4,5458548|(_?0:536870912));x.l<x.length;)x.write_shift(1,_?0:32);return x}function parse_WsBool(t,n,_){var x=_&&_.biff==8||n==2?t.read_shift(2):(t.l+=n,0);return{fDialog:x&16,fBelow:x&64,fRight:x&128}}function parse_BoundSheet8(t,n,_){var x=t.read_shift(4),E=t.read_shift(1)&3,S=t.read_shift(1);switch(S){case 0:S="Worksheet";break;case 1:S="Macrosheet";break;case 2:S="Chartsheet";break;case 6:S="VBAModule";break}var C=parse_ShortXLUnicodeString(t,0,_);return C.length===0&&(C="Sheet1"),{pos:x,hs:E,dt:S,name:C}}function write_BoundSheet8(t,n){var _=!n||n.biff>=8?2:1,x=new_buf(8+_*t.name.length);x.write_shift(4,t.pos),x.write_shift(1,t.hs||0),x.write_shift(1,t.dt),x.write_shift(1,t.name.length),n.biff>=8&&x.write_shift(1,1),x.write_shift(_*t.name.length,t.name,n.biff<8?"sbcs":"utf16le");var E=x.slice(0,x.l);return E.l=x.l,E}function parse_SST(t,n){for(var _=t.l+n,x=t.read_shift(4),E=t.read_shift(4),S=[],C=0;C!=E&&t.l<_;++C)S.push(parse_XLUnicodeRichExtendedString(t));return S.Count=x,S.Unique=E,S}function write_SST(t,n){var _=new_buf(8);_.write_shift(4,t.Count),_.write_shift(4,t.Unique);for(var x=[],E=0;E<t.length;++E)x[E]=write_XLUnicodeRichExtendedString(t[E]);var S=bconcat([_].concat(x));return S.parts=[_.length].concat(x.map(function(C){return C.length})),S}function parse_ExtSST(t,n){var _={};return _.dsst=t.read_shift(2),t.l+=n-2,_}function parse_Row(t){var n={};n.r=t.read_shift(2),n.c=t.read_shift(2),n.cnt=t.read_shift(2)-n.c;var _=t.read_shift(2);t.l+=4;var x=t.read_shift(1);return t.l+=3,x&7&&(n.level=x&7),x&32&&(n.hidden=!0),x&64&&(n.hpt=_/20),n}function parse_ForceFullCalculation(t){var n=parse_frtHeader(t);if(n.type!=2211)throw new Error("Invalid Future Record "+n.type);var _=t.read_shift(4);return _!==0}function parse_RecalcId(t){return t.read_shift(2),t.read_shift(4)}function parse_DefaultRowHeight(t,n,_){var x=0;_&&_.biff==2||(x=t.read_shift(2));var E=t.read_shift(2);_&&_.biff==2&&(x=1-(E>>15),E&=32767);var S={Unsynced:x&1,DyZero:(x&2)>>1,ExAsc:(x&4)>>2,ExDsc:(x&8)>>3};return[S,E]}function parse_Window1(t){var n=t.read_shift(2),_=t.read_shift(2),x=t.read_shift(2),E=t.read_shift(2),S=t.read_shift(2),C=t.read_shift(2),T=t.read_shift(2),B=t.read_shift(2),A=t.read_shift(2);return{Pos:[n,_],Dim:[x,E],Flags:S,CurTab:C,FirstTab:T,Selected:B,TabRatio:A}}function write_Window1(){var t=new_buf(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function parse_Window2(t,n,_){if(_&&_.biff>=2&&_.biff<5)return{};var x=t.read_shift(2);return{RTL:x&64}}function write_Window2(t){var n=new_buf(18),_=1718;return t&&t.RTL&&(_|=64),n.write_shift(2,_),n.write_shift(4,0),n.write_shift(4,64),n.write_shift(4,0),n.write_shift(4,0),n}function parse_Pane(){}function parse_Font(t,n,_){var x={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(_&&_.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return x.name=parse_ShortXLUnicodeString(t,0,_),x}function write_Font(t,n){var _=t.name||"Arial",x=n&&n.biff==5,E=x?15+_.length:16+2*_.length,S=new_buf(E);return S.write_shift(2,(t.sz||12)*20),S.write_shift(4,0),S.write_shift(2,400),S.write_shift(4,0),S.write_shift(2,0),S.write_shift(1,_.length),x||S.write_shift(1,1),S.write_shift((x?1:2)*_.length,_,x?"sbcs":"utf16le"),S}function parse_LabelSst(t){var n=parse_XLSCell(t);return n.isst=t.read_shift(4),n}function write_LabelSst(t,n,_,x){var E=new_buf(10);return write_XLSCell(t,n,x,E),E.write_shift(4,_),E}function parse_Label(t,n,_){_.biffguess&&_.biff==2&&(_.biff=5);var x=t.l+n,E=parse_XLSCell(t);_.biff==2&&t.l++;var S=parse_XLUnicodeString(t,x-t.l,_);return E.val=S,E}function write_Label(t,n,_,x,E){var S=!E||E.biff==8,C=new_buf(6+2+ +S+(1+S)*_.length);return write_XLSCell(t,n,x,C),C.write_shift(2,_.length),S&&C.write_shift(1,1),C.write_shift((1+S)*_.length,_,S?"utf16le":"sbcs"),C}function parse_Format(t,n,_){var x=t.read_shift(2),E=parse_XLUnicodeString2(t,0,_);return[x,E]}function write_Format(t,n,_,x){var E=_&&_.biff==5;x||(x=new_buf(E?3+n.length:5+2*n.length)),x.write_shift(2,t),x.write_shift(E?1:2,n.length),E||x.write_shift(1,1),x.write_shift((E?1:2)*n.length,n,E?"sbcs":"utf16le");var S=x.length>x.l?x.slice(0,x.l):x;return S.l==null&&(S.l=S.length),S}var parse_BIFF2Format=parse_XLUnicodeString2;function parse_Dimensions(t,n,_){var x=t.l+n,E=_.biff==8||!_.biff?4:2,S=t.read_shift(E),C=t.read_shift(E),T=t.read_shift(2),B=t.read_shift(2);return t.l=x,{s:{r:S,c:T},e:{r:C,c:B}}}function write_Dimensions(t,n){var _=n.biff==8||!n.biff?4:2,x=new_buf(2*_+6);return x.write_shift(_,t.s.r),x.write_shift(_,t.e.r+1),x.write_shift(2,t.s.c),x.write_shift(2,t.e.c+1),x.write_shift(2,0),x}function parse_RK(t){var n=t.read_shift(2),_=t.read_shift(2),x=parse_RkRec(t);return{r:n,c:_,ixfe:x[0],rknum:x[1]}}function parse_MulRk(t,n){for(var _=t.l+n-2,x=t.read_shift(2),E=t.read_shift(2),S=[];t.l<_;)S.push(parse_RkRec(t));if(t.l!==_)throw new Error("MulRK read error");var C=t.read_shift(2);if(S.length!=C-E+1)throw new Error("MulRK length mismatch");return{r:x,c:E,C,rkrec:S}}function parse_MulBlank(t,n){for(var _=t.l+n-2,x=t.read_shift(2),E=t.read_shift(2),S=[];t.l<_;)S.push(t.read_shift(2));if(t.l!==_)throw new Error("MulBlank read error");var C=t.read_shift(2);if(S.length!=C-E+1)throw new Error("MulBlank length mismatch");return{r:x,c:E,C,ixfe:S}}function parse_CellStyleXF(t,n,_,x){var E={},S=t.read_shift(4),C=t.read_shift(4),T=t.read_shift(4),B=t.read_shift(2);return E.patternType=XLSFillPattern[T>>26],x.cellStyles&&(E.alc=S&7,E.fWrap=S>>3&1,E.alcV=S>>4&7,E.fJustLast=S>>7&1,E.trot=S>>8&255,E.cIndent=S>>16&15,E.fShrinkToFit=S>>20&1,E.iReadOrder=S>>22&2,E.fAtrNum=S>>26&1,E.fAtrFnt=S>>27&1,E.fAtrAlc=S>>28&1,E.fAtrBdr=S>>29&1,E.fAtrPat=S>>30&1,E.fAtrProt=S>>31&1,E.dgLeft=C&15,E.dgRight=C>>4&15,E.dgTop=C>>8&15,E.dgBottom=C>>12&15,E.icvLeft=C>>16&127,E.icvRight=C>>23&127,E.grbitDiag=C>>30&3,E.icvTop=T&127,E.icvBottom=T>>7&127,E.icvDiag=T>>14&127,E.dgDiag=T>>21&15,E.icvFore=B&127,E.icvBack=B>>7&127,E.fsxButton=B>>14&1),E}function parse_XF(t,n,_){var x={};return x.ifnt=t.read_shift(2),x.numFmtId=t.read_shift(2),x.flags=t.read_shift(2),x.fStyle=x.flags>>2&1,n-=6,x.data=parse_CellStyleXF(t,n,x.fStyle,_),x}function write_XF(t,n,_,x){var E=_&&_.biff==5;x||(x=new_buf(E?16:20)),x.write_shift(2,0),t.style?(x.write_shift(2,t.numFmtId||0),x.write_shift(2,65524)):(x.write_shift(2,t.numFmtId||0),x.write_shift(2,n<<4));var S=0;return t.numFmtId>0&&E&&(S|=1024),x.write_shift(4,S),x.write_shift(4,0),E||x.write_shift(4,0),x.write_shift(2,0),x}function parse_Guts(t){t.l+=4;var n=[t.read_shift(2),t.read_shift(2)];if(n[0]!==0&&n[0]--,n[1]!==0&&n[1]--,n[0]>7||n[1]>7)throw new Error("Bad Gutters: "+n.join("|"));return n}function write_Guts(t){var n=new_buf(8);return n.write_shift(4,0),n.write_shift(2,t[0]?t[0]+1:0),n.write_shift(2,t[1]?t[1]+1:0),n}function parse_BoolErr(t,n,_){var x=parse_XLSCell(t);(_.biff==2||n==9)&&++t.l;var E=parse_Bes(t);return x.val=E,x.t=E===!0||E===!1?"b":"e",x}function write_BoolErr(t,n,_,x,E,S){var C=new_buf(8);return write_XLSCell(t,n,x,C),write_Bes(_,S,C),C}function parse_Number(t,n,_){_.biffguess&&_.biff==2&&(_.biff=5);var x=parse_XLSCell(t),E=parse_Xnum(t);return x.val=E,x}function write_Number(t,n,_,x){var E=new_buf(14);return write_XLSCell(t,n,x,E),write_Xnum(_,E),E}var parse_XLHeaderFooter=parse_OptXLUnicodeString;function parse_SupBook(t,n,_){var x=t.l+n,E=t.read_shift(2),S=t.read_shift(2);if(_.sbcch=S,S==1025||S==14849)return[S,E];if(S<1||S>255)throw new Error("Unexpected SupBook type: "+S);for(var C=parse_XLUnicodeStringNoCch(t,S),T=[];x>t.l;)T.push(parse_XLUnicodeString(t));return[S,E,C,T]}function parse_ExternName(t,n,_){var x=t.read_shift(2),E,S={fBuiltIn:x&1,fWantAdvise:x>>>1&1,fWantPict:x>>>2&1,fOle:x>>>3&1,fOleLink:x>>>4&1,cf:x>>>5&1023,fIcon:x>>>15&1};return _.sbcch===14849&&(E=parse_AddinUdf(t,n-2,_)),S.body=E||t.read_shift(n-2),typeof E=="string"&&(S.Name=E),S}function parse_Lbl(t,n,_){var x=t.l+n,E=t.read_shift(2),S=t.read_shift(1),C=t.read_shift(1),T=t.read_shift(_&&_.biff==2?1:2),B=0;(!_||_.biff>=5)&&(_.biff!=5&&(t.l+=2),B=t.read_shift(2),_.biff==5&&(t.l+=2),t.l+=4);var A=parse_XLUnicodeStringNoCch(t,C,_);E&32&&(A=XLSLblBuiltIn[A.charCodeAt(0)]);var I=x-t.l;_&&_.biff==2&&--I;var D=x==t.l||T===0||!(I>0)?[]:parse_NameParsedFormula(t,I,_,T);return{chKey:S,Name:A,itab:B,rgce:D}}function parse_ExternSheet(t,n,_){if(_.biff<8)return parse_BIFF5ExternSheet(t,n,_);for(var x=[],E=t.l+n,S=t.read_shift(_.biff>8?4:2);S--!==0;)x.push(parse_XTI(t,_.biff>8?12:6,_));if(t.l!=E)throw new Error("Bad ExternSheet: "+t.l+" != "+E);return x}function parse_BIFF5ExternSheet(t,n,_){t[t.l+1]==3&&t[t.l]++;var x=parse_ShortXLUnicodeString(t,n,_);return x.charCodeAt(0)==3?x.slice(1):x}function parse_NameCmt(t,n,_){if(_.biff<8){t.l+=n;return}var x=t.read_shift(2),E=t.read_shift(2),S=parse_XLUnicodeStringNoCch(t,x,_),C=parse_XLUnicodeStringNoCch(t,E,_);return[S,C]}function parse_ShrFmla(t,n,_){var x=parse_RefU(t);t.l++;var E=t.read_shift(1);return n-=8,[parse_SharedParsedFormula(t,n,_),E,x]}function parse_Array(t,n,_){var x=parse_Ref(t);switch(_.biff){case 2:t.l++,n-=7;break;case 3:case 4:t.l+=2,n-=8;break;default:t.l+=6,n-=12}return[x,parse_ArrayParsedFormula(t,n,_)]}function parse_MTRSettings(t){var n=t.read_shift(4)!==0,_=t.read_shift(4)!==0,x=t.read_shift(4);return[n,_,x]}function parse_NoteSh(t,n,_){if(!(_.biff<8)){var x=t.read_shift(2),E=t.read_shift(2),S=t.read_shift(2),C=t.read_shift(2),T=parse_XLUnicodeString2(t,0,_);return _.biff<8&&t.read_shift(1),[{r:x,c:E},T,C,S]}}function parse_Note(t,n,_){return parse_NoteSh(t,n,_)}function parse_MergeCells(t,n){for(var _=[],x=t.read_shift(2);x--;)_.push(parse_Ref8U(t));return _}function write_MergeCells(t){var n=new_buf(2+t.length*8);n.write_shift(2,t.length);for(var _=0;_<t.length;++_)write_Ref8U(t[_],n);return n}function parse_Obj(t,n,_){if(_&&_.biff<8)return parse_BIFF5Obj(t,n,_);var x=parse_FtCmo(t),E=parse_FtArray(t,n-22,x[1]);return{cmo:x,ft:E}}var parse_BIFF5OT={8:function(t,n){var _=t.l+n;t.l+=10;var x=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var E=t.read_shift(1);return t.l+=E,t.l=_,{fmt:x}}};function parse_BIFF5Obj(t,n,_){t.l+=4;var x=t.read_shift(2),E=t.read_shift(2),S=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,n-=36;var C=[];return C.push((parse_BIFF5OT[x]||parsenoop)(t,n,_)),{cmo:[E,x,S],ft:C}}function parse_TxO(t,n,_){var x=t.l,E="";try{t.l+=4;var S=(_.lastobj||{cmo:[0,0]}).cmo[1],C;[0,5,7,11,12,14].indexOf(S)==-1?t.l+=6:C=parse_ControlInfo(t,6,_);var T=t.read_shift(2);t.read_shift(2),parseuint16(t,2);var B=t.read_shift(2);t.l+=B;for(var A=1;A<t.lens.length-1;++A){if(t.l-x!=t.lens[A])throw new Error("TxO: bad continue record");var I=t[t.l],D=parse_XLUnicodeStringNoCch(t,t.lens[A+1]-t.lens[A]-1);if(E+=D,E.length>=(I?T:2*T))break}if(E.length!==T&&E.length!==T*2)throw new Error("cchText: "+T+" != "+E.length);return t.l=x+n,{t:E}}catch{return t.l=x+n,{t:E}}}function parse_HLink(t,n){var _=parse_Ref8U(t);t.l+=16;var x=parse_Hyperlink(t,n-24);return[_,x]}function write_HLink(t){var n=new_buf(24),_=decode_cell(t[0]);n.write_shift(2,_.r),n.write_shift(2,_.r),n.write_shift(2,_.c),n.write_shift(2,_.c);for(var x="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),E=0;E<16;++E)n.write_shift(1,parseInt(x[E],16));return bconcat([n,write_Hyperlink(t[1])])}function parse_HLinkTooltip(t,n){t.read_shift(2);var _=parse_Ref8U(t),x=t.read_shift((n-10)/2,"dbcs-cont");return x=x.replace(chr0,""),[_,x]}function write_HLinkTooltip(t){var n=t[1].Tooltip,_=new_buf(10+2*(n.length+1));_.write_shift(2,2048);var x=decode_cell(t[0]);_.write_shift(2,x.r),_.write_shift(2,x.r),_.write_shift(2,x.c),_.write_shift(2,x.c);for(var E=0;E<n.length;++E)_.write_shift(2,n.charCodeAt(E));return _.write_shift(2,0),_}function parse_Country(t){var n=[0,0],_;return _=t.read_shift(2),n[0]=CountryEnum[_]||_,_=t.read_shift(2),n[1]=CountryEnum[_]||_,n}function write_Country(t){return t||(t=new_buf(4)),t.write_shift(2,1),t.write_shift(2,1),t}function parse_ClrtClient(t){for(var n=t.read_shift(2),_=[];n-- >0;)_.push(parse_LongRGB(t));return _}function parse_Palette(t){for(var n=t.read_shift(2),_=[];n-- >0;)_.push(parse_LongRGB(t));return _}function parse_XFCRC(t){t.l+=2;var n={cxfs:0,crc:0};return n.cxfs=t.read_shift(2),n.crc=t.read_shift(4),n}function parse_ColInfo(t,n,_){if(!_.cellStyles)return parsenoop(t,n);var x=_&&_.biff>=12?4:2,E=t.read_shift(x),S=t.read_shift(x),C=t.read_shift(x),T=t.read_shift(x),B=t.read_shift(2);x==2&&(t.l+=2);var A={s:E,e:S,w:C,ixfe:T,flags:B};return(_.biff>=5||!_.biff)&&(A.level=B>>8&7),A}function write_ColInfo(t,n){var _=new_buf(12);_.write_shift(2,n),_.write_shift(2,n),_.write_shift(2,t.width*256),_.write_shift(2,0);var x=0;return t.hidden&&(x|=1),_.write_shift(1,x),x=t.level||0,_.write_shift(1,x),_.write_shift(2,0),_}function parse_Setup(t,n){var _={};return n<32||(t.l+=16,_.header=parse_Xnum(t),_.footer=parse_Xnum(t),t.l+=2),_}function parse_ShtProps(t,n,_){var x={area:!1};if(_.biff!=5)return t.l+=n,x;var E=t.read_shift(1);return t.l+=3,E&16&&(x.area=!0),x}function write_RRTabId(t){for(var n=new_buf(2*t),_=0;_<t;++_)n.write_shift(2,_+1);return n}var parse_Blank=parse_XLSCell,parse_Scl=parseuint16a,parse_String=parse_XLUnicodeString;function parse_ImData(t){var n=t.read_shift(2),_=t.read_shift(2),x=t.read_shift(4),E={fmt:n,env:_,len:x,data:t.slice(t.l,t.l+x)};return t.l+=x,E}function parse_BIFF2STR(t,n,_){_.biffguess&&_.biff==5&&(_.biff=2);var x=parse_XLSCell(t);++t.l;var E=parse_XLUnicodeString2(t,n-7,_);return x.t="str",x.val=E,x}function parse_BIFF2NUM(t){var n=parse_XLSCell(t);++t.l;var _=parse_Xnum(t);return n.t="n",n.val=_,n}function write_BIFF2NUM(t,n,_){var x=new_buf(15);return write_BIFF2Cell(x,t,n),x.write_shift(8,_,"f"),x}function parse_BIFF2INT(t){var n=parse_XLSCell(t);++t.l;var _=t.read_shift(2);return n.t="n",n.val=_,n}function write_BIFF2INT(t,n,_){var x=new_buf(9);return write_BIFF2Cell(x,t,n),x.write_shift(2,_),x}function parse_BIFF2STRING(t){var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,"sbcs-cont")}function parse_BIFF2FONTXTRA(t,n){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=n-13}function parse_RString(t,n,_){var x=t.l+n,E=parse_XLSCell(t),S=t.read_shift(2),C=parse_XLUnicodeStringNoCch(t,S,_);return t.l=x,E.t="str",E.val=C,E}var DBF_SUPPORTED_VERSIONS=[2,3,48,49,131,139,140,245],DBF=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},n=evert({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function _(T,B){var A=[],I=new_raw_buf(1);switch(B.type){case"base64":I=s2a(Base64_decode(T));break;case"binary":I=s2a(T);break;case"buffer":case"array":I=T;break}prep_blob(I,0);var D=I.read_shift(1),M=!!(D&136),V=!1,L=!1;switch(D){case 2:break;case 3:break;case 48:V=!0,M=!0;break;case 49:V=!0,M=!0;break;case 131:break;case 139:break;case 140:L=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+D.toString(16))}var F=0,j=521;D==2&&(F=I.read_shift(2)),I.l+=3,D!=2&&(F=I.read_shift(4)),F>1048576&&(F=1e6),D!=2&&(j=I.read_shift(2));var U=I.read_shift(2);B.codepage,D!=2&&(I.l+=16,I.read_shift(1),I[I.l]!==0&&t[I[I.l]],I.l+=1,I.l+=2),L&&(I.l+=36);for(var H=[],Y={},Z=Math.min(I.length,D==2?521:j-10-(V?264:0)),ne=L?32:11;I.l<Z&&I[I.l]!=13;)switch(Y={},Y.name=a2s(I.slice(I.l,I.l+ne)).replace(/[\u0000\r\n].*$/g,""),I.l+=ne,Y.type=String.fromCharCode(I.read_shift(1)),D!=2&&!L&&(Y.offset=I.read_shift(4)),Y.len=I.read_shift(1),D==2&&(Y.offset=I.read_shift(2)),Y.dec=I.read_shift(1),Y.name.length&&H.push(Y),D!=2&&(I.l+=L?13:14),Y.type){case"B":(!V||Y.len!=8)&&B.WTF&&console.log("Skipping "+Y.name+":"+Y.type);break;case"G":case"P":B.WTF&&console.log("Skipping "+Y.name+":"+Y.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+Y.type)}if(I[I.l]!==13&&(I.l=j-1),I.read_shift(1)!==13)throw new Error("DBF Terminator not found "+I.l+" "+I[I.l]);I.l=j;var re=0,X=0;for(A[0]=[],X=0;X!=H.length;++X)A[0][X]=H[X].name;for(;F-- >0;){if(I[I.l]===42){I.l+=U;continue}for(++I.l,A[++re]=[],X=0,X=0;X!=H.length;++X){var ce=I.slice(I.l,I.l+H[X].len);I.l+=H[X].len,prep_blob(ce,0);var ue=a2s(ce);switch(H[X].type){case"C":ue.trim().length&&(A[re][X]=ue.replace(/\s+$/,""));break;case"D":ue.length===8?A[re][X]=new Date(+ue.slice(0,4),+ue.slice(4,6)-1,+ue.slice(6,8)):A[re][X]=ue;break;case"F":A[re][X]=parseFloat(ue.trim());break;case"+":case"I":A[re][X]=L?ce.read_shift(-4,"i")^2147483648:ce.read_shift(4,"i");break;case"L":switch(ue.trim().toUpperCase()){case"Y":case"T":A[re][X]=!0;break;case"N":case"F":A[re][X]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+ue+"|")}break;case"M":if(!M)throw new Error("DBF Unexpected MEMO for type "+D.toString(16));A[re][X]="##MEMO##"+(L?parseInt(ue.trim(),10):ce.read_shift(4));break;case"N":ue=ue.replace(/\u0000/g,"").trim(),ue&&ue!="."&&(A[re][X]=+ue||0);break;case"@":A[re][X]=new Date(ce.read_shift(-8,"f")-621356832e5);break;case"T":A[re][X]=new Date((ce.read_shift(4)-2440588)*864e5+ce.read_shift(4));break;case"Y":A[re][X]=ce.read_shift(4,"i")/1e4+ce.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":A[re][X]=-ce.read_shift(-8,"f");break;case"B":if(V&&H[X].len==8){A[re][X]=ce.read_shift(8,"f");break}case"G":case"P":ce.l+=H[X].len;break;case"0":if(H[X].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+H[X].type)}}}if(D!=2&&I.l<I.length&&I[I.l++]!=26)throw new Error("DBF EOF Marker missing "+(I.l-1)+" of "+I.length+" "+I[I.l-1].toString(16));return B&&B.sheetRows&&(A=A.slice(0,B.sheetRows)),B.DBF=H,A}function x(T,B){var A=B||{};A.dateNF||(A.dateNF="yyyymmdd");var I=aoa_to_sheet(_(T,A),A);return I["!cols"]=A.DBF.map(function(D){return{wch:D.len,DBF:D}}),delete A.DBF,I}function E(T,B){try{var A=sheet_to_workbook(x(T,B),B);return A.bookType="dbf",A}catch(I){if(B&&B.WTF)throw I}return{SheetNames:[],Sheets:{}}}var S={B:8,C:250,L:1,D:8,"?":0,"":0};function C(T,B){var A=B||{},I=current_codepage;if(+A.codepage>=0&&set_cp(+A.codepage),A.type=="string")throw new Error("Cannot write DBF to JS string");var D=buf_array(),M=sheet_to_json(T,{header:1,raw:!0,cellDates:!0}),V=M[0],L=M.slice(1),F=T["!cols"]||[],j=0,U=0,H=0,Y=1;for(j=0;j<V.length;++j){if(((F[j]||{}).DBF||{}).name){V[j]=F[j].DBF.name,++H;continue}if(V[j]!=null){if(++H,typeof V[j]=="number"&&(V[j]=V[j].toString(10)),typeof V[j]!="string")throw new Error("DBF Invalid column name "+V[j]+" |"+typeof V[j]+"|");if(V.indexOf(V[j])!==j){for(U=0;U<1024;++U)if(V.indexOf(V[j]+"_"+U)==-1){V[j]+="_"+U;break}}}}var Z=safe_decode_range(T["!ref"]),ne=[],re=[],X=[];for(j=0;j<=Z.e.c-Z.s.c;++j){var ce="",ue="",_e=0,ye=[];for(U=0;U<L.length;++U)L[U][j]!=null&&ye.push(L[U][j]);if(ye.length==0||V[j]==null){ne[j]="?";continue}for(U=0;U<ye.length;++U){switch(typeof ye[U]){case"number":ue="B";break;case"string":ue="C";break;case"boolean":ue="L";break;case"object":ue=ye[U]instanceof Date?"D":"C";break;default:ue="C"}_e=Math.max(_e,String(ye[U]).length),ce=ce&&ce!=ue?"C":ue}_e>250&&(_e=250),ue=((F[j]||{}).DBF||{}).type,ue=="C"&&F[j].DBF.len>_e&&(_e=F[j].DBF.len),ce=="B"&&ue=="N"&&(ce="N",X[j]=F[j].DBF.dec,_e=F[j].DBF.len),re[j]=ce=="C"||ue=="N"?_e:S[ce]||0,Y+=re[j],ne[j]=ce}var ie=D.next(32);for(ie.write_shift(4,318902576),ie.write_shift(4,L.length),ie.write_shift(2,296+32*H),ie.write_shift(2,Y),j=0;j<4;++j)ie.write_shift(4,0);var W=+n[current_codepage]||3;for(ie.write_shift(4,0|W<<8),t[W]!=+A.codepage&&(A.codepage&&console.error("DBF Unsupported codepage "+current_codepage+", using 1252"),current_codepage=1252),j=0,U=0;j<V.length;++j)if(V[j]!=null){var O=D.next(32),z=(V[j].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,z,"sbcs"),O.write_shift(1,ne[j]=="?"?"C":ne[j],"sbcs"),O.write_shift(4,U),O.write_shift(1,re[j]||S[ne[j]]||0),O.write_shift(1,X[j]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),U+=re[j]||S[ne[j]]||0}var J=D.next(264);for(J.write_shift(4,13),j=0;j<65;++j)J.write_shift(4,0);for(j=0;j<L.length;++j){var ee=D.next(Y);for(ee.write_shift(1,0),U=0;U<V.length;++U)if(V[U]!=null)switch(ne[U]){case"L":ee.write_shift(1,L[j][U]==null?63:L[j][U]?84:70);break;case"B":ee.write_shift(8,L[j][U]||0,"f");break;case"N":var ae="0";for(typeof L[j][U]=="number"&&(ae=L[j][U].toFixed(X[U]||0)),ae.length>re[U]&&(ae=ae.slice(0,re[U])),H=0;H<re[U]-ae.length;++H)ee.write_shift(1,32);ee.write_shift(1,ae,"sbcs");break;case"D":L[j][U]?(ee.write_shift(4,("0000"+L[j][U].getFullYear()).slice(-4),"sbcs"),ee.write_shift(2,("00"+(L[j][U].getMonth()+1)).slice(-2),"sbcs"),ee.write_shift(2,("00"+L[j][U].getDate()).slice(-2),"sbcs")):ee.write_shift(8,"00000000","sbcs");break;case"C":var oe=ee.l,se=String(L[j][U]!=null?L[j][U]:"").slice(0,re[U]);for(ee.write_shift(1,se,"cpstr"),oe+=re[U]-ee.l,H=0;H<oe;++H)ee.write_shift(1,32);break}}return current_codepage=I,D.next(1).write_shift(1,26),D.end()}return{to_workbook:E,to_sheet:x,from_sheet:C}}(),SYLK=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},n=new RegExp("\x1BN("+keys(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),_=function(D,M){var V=t[M];return typeof V=="number"?_getansi(V):V},x=function(D,M,V){var L=M.charCodeAt(0)-32<<4|V.charCodeAt(0)-48;return L==59?D:_getansi(L)};t["|"]=254;function E(D,M){switch(M.type){case"base64":return S(Base64_decode(D),M);case"binary":return S(D,M);case"buffer":return S(has_buf&&Buffer.isBuffer(D)?D.toString("binary"):a2s(D),M);case"array":return S(cc2str(D),M)}throw new Error("Unrecognized type "+M.type)}function S(D,M){var V=D.split(/[\n\r]+/),L=-1,F=-1,j=0,U=0,H=[],Y=[],Z=null,ne={},re=[],X=[],ce=[],ue=0,_e,ye={Workbook:{WBProps:{},Names:[]}};for(+M.codepage>=0&&set_cp(+M.codepage);j!==V.length;++j){ue=0;var ie=V[j].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,x).replace(n,_),W=ie.replace(/;;/g,"\0").split(";").map(function(xe){return xe.replace(/\u0000/g,";")}),O=W[0],z;if(ie.length>0)switch(O){case"ID":break;case"E":break;case"B":break;case"O":for(U=1;U<W.length;++U)switch(W[U].charAt(0)){case"V":{var J=parseInt(W[U].slice(1),10);J>=1&&J<=4&&(ye.Workbook.WBProps.date1904=!0)}break}break;case"W":break;case"P":switch(W[1].charAt(0)){case"P":Y.push(ie.slice(3).replace(/;;/g,";"));break}break;case"NN":{var ee={Sheet:0};for(U=1;U<W.length;++U)switch(W[U].charAt(0)){case"N":ee.Name=W[U].slice(1);break;case"E":ee.Ref=(M&&M.sheet||"Sheet1")+"!"+rc_to_a1(W[U].slice(1));break}ye.Workbook.Names.push(ee)}break;case"C":var ae=!1,oe=!1,se=!1,G=!1,q=-1,te=-1,fe="",he="z";for(U=1;U<W.length;++U)switch(W[U].charAt(0)){case"A":break;case"X":F=parseInt(W[U].slice(1),10)-1,oe=!0;break;case"Y":for(L=parseInt(W[U].slice(1),10)-1,oe||(F=0),_e=H.length;_e<=L;++_e)H[_e]=[];break;case"K":z=W[U].slice(1),z.charAt(0)==='"'?(z=z.slice(1,z.length-1),he="s"):z==="TRUE"||z==="FALSE"?(z=z==="TRUE",he="b"):isNaN(fuzzynum(z))?isNaN(fuzzydate(z).getDate())||(z=parseDate(z),he="d",M.cellDates||(he="n",z=datenum(z,ye.Workbook.WBProps.date1904))):(z=fuzzynum(z),he="n",Z!==null&&fmt_is_date(Z)&&M.cellDates&&(z=numdate(ye.Workbook.WBProps.date1904?z+1462:z),he="d")),ae=!0;break;case"E":G=!0,fe=rc_to_a1(W[U].slice(1),{r:L,c:F});break;case"S":se=!0;break;case"G":break;case"R":q=parseInt(W[U].slice(1),10)-1;break;case"C":te=parseInt(W[U].slice(1),10)-1;break;default:if(M&&M.WTF)throw new Error("SYLK bad record "+ie)}if(ae&&(H[L][F]?(H[L][F].t=he,H[L][F].v=z):H[L][F]={t:he,v:z},Z&&(H[L][F].z=Z),M.cellText!==!1&&Z&&(H[L][F].w=SSF_format(H[L][F].z,H[L][F].v,{date1904:ye.Workbook.WBProps.date1904})),Z=null),se){if(G)throw new Error("SYLK shared formula cannot have own formula");var Ee=q>-1&&H[q][te];if(!Ee||!Ee[1])throw new Error("SYLK shared formula cannot find base");fe=shift_formula_str(Ee[1],{r:L-q,c:F-te})}fe&&(H[L][F]?H[L][F].f=fe:H[L][F]={t:"n",f:fe});break;case"F":var we=0;for(U=1;U<W.length;++U)switch(W[U].charAt(0)){case"X":F=parseInt(W[U].slice(1),10)-1,++we;break;case"Y":for(L=parseInt(W[U].slice(1),10)-1,_e=H.length;_e<=L;++_e)H[_e]=[];break;case"M":ue=parseInt(W[U].slice(1),10)/20;break;case"F":break;case"G":break;case"P":Z=Y[parseInt(W[U].slice(1),10)];break;case"S":break;case"D":break;case"N":break;case"W":for(ce=W[U].slice(1).split(" "),_e=parseInt(ce[0],10);_e<=parseInt(ce[1],10);++_e)ue=parseInt(ce[2],10),X[_e-1]=ue===0?{hidden:!0}:{wch:ue};break;case"C":F=parseInt(W[U].slice(1),10)-1,X[F]||(X[F]={});break;case"R":L=parseInt(W[U].slice(1),10)-1,re[L]||(re[L]={}),ue>0?(re[L].hpt=ue,re[L].hpx=pt2px(ue)):ue===0&&(re[L].hidden=!0);break;default:if(M&&M.WTF)throw new Error("SYLK bad record "+ie)}we<1&&(Z=null);break;default:if(M&&M.WTF)throw new Error("SYLK bad record "+ie)}}return re.length>0&&(ne["!rows"]=re),X.length>0&&(ne["!cols"]=X),X.forEach(function(xe){process_col(xe)}),M&&M.sheetRows&&(H=H.slice(0,M.sheetRows)),[H,ne,ye]}function C(D,M){var V=E(D,M),L=V[0],F=V[1],j=V[2],U=dup(M);U.date1904=(((j||{}).Workbook||{}).WBProps||{}).date1904;var H=aoa_to_sheet(L,U);keys(F).forEach(function(Z){H[Z]=F[Z]});var Y=sheet_to_workbook(H,M);return keys(j).forEach(function(Z){Y[Z]=j[Z]}),Y.bookType="sylk",Y}function T(D,M,V,L){var F="C;Y"+(V+1)+";X"+(L+1)+";K";switch(D.t){case"n":F+=D.v||0,D.f&&!D.F&&(F+=";E"+a1_to_rc(D.f,{r:V,c:L}));break;case"b":F+=D.v?"TRUE":"FALSE";break;case"e":F+=D.w||D.v;break;case"d":F+='"'+(D.w||D.v)+'"';break;case"s":F+='"'+(D.v==null?"":String(D.v)).replace(/"/g,"").replace(/;/g,";;")+'"';break}return F}function B(D,M){M.forEach(function(V,L){var F="F;W"+(L+1)+" "+(L+1)+" ";V.hidden?F+="0":(typeof V.width=="number"&&!V.wpx&&(V.wpx=width2px(V.width)),typeof V.wpx=="number"&&!V.wch&&(V.wch=px2char(V.wpx)),typeof V.wch=="number"&&(F+=Math.round(V.wch))),F.charAt(F.length-1)!=" "&&D.push(F)})}function A(D,M){M.forEach(function(V,L){var F="F;";V.hidden?F+="M0;":V.hpt?F+="M"+20*V.hpt+";":V.hpx&&(F+="M"+20*px2pt(V.hpx)+";"),F.length>2&&D.push(F+"R"+(L+1))})}function I(D,M,V){var L=["ID;PSheetJS;N;E"],F=[],j=safe_decode_range(D["!ref"]),U,H=D["!data"]!=null,Y=`\r
`,Z=(((V||{}).Workbook||{}).WBProps||{}).date1904;L.push("P;PGeneral"),L.push("F;P0;DG0G8;M255"),D["!cols"]&&B(L,D["!cols"]),D["!rows"]&&A(L,D["!rows"]),L.push("B;Y"+(j.e.r-j.s.r+1)+";X"+(j.e.c-j.s.c+1)+";D"+[j.s.c,j.s.r,j.e.c,j.e.r].join(" ")),L.push("O;L;D;B"+(Z?";V4":"")+";K47;G100 0.001");for(var ne=j.s.r;ne<=j.e.r;++ne)if(!(H&&!D["!data"][ne])){for(var re=[],X=j.s.c;X<=j.e.c;++X)U=H?D["!data"][ne][X]:D[encode_col(X)+encode_row(ne)],!(!U||U.v==null&&(!U.f||U.F))&&re.push(T(U,D,ne,X));F.push(re.join(Y))}return L.join(Y)+Y+F.join(Y)+Y+"E"+Y}return{to_workbook:C,from_sheet:I}}(),DIF=function(){function t(T,B){switch(B.type){case"base64":return n(Base64_decode(T),B);case"binary":return n(T,B);case"buffer":return n(has_buf&&Buffer.isBuffer(T)?T.toString("binary"):a2s(T),B);case"array":return n(cc2str(T),B)}throw new Error("Unrecognized type "+B.type)}function n(T,B){for(var A=T.split(`
`),I=-1,D=-1,M=0,V=[];M!==A.length;++M){if(A[M].trim()==="BOT"){V[++I]=[],D=0;continue}if(!(I<0)){var L=A[M].trim().split(","),F=L[0],j=L[1];++M;for(var U=A[M]||"";(U.match(/["]/g)||[]).length&1&&M<A.length-1;)U+=`
`+A[++M];switch(U=U.trim(),+F){case-1:if(U==="BOT"){V[++I]=[],D=0;continue}else if(U!=="EOD")throw new Error("Unrecognized DIF special command "+U);break;case 0:U==="TRUE"?V[I][D]=!0:U==="FALSE"?V[I][D]=!1:isNaN(fuzzynum(j))?isNaN(fuzzydate(j).getDate())?V[I][D]=j:V[I][D]=parseDate(j):V[I][D]=fuzzynum(j),++D;break;case 1:U=U.slice(1,U.length-1),U=U.replace(/""/g,'"'),U&&U.match(/^=".*"$/)&&(U=U.slice(2,-1)),V[I][D++]=U!==""?U:null;break}if(U==="EOD")break}}return B&&B.sheetRows&&(V=V.slice(0,B.sheetRows)),V}function _(T,B){return aoa_to_sheet(t(T,B),B)}function x(T,B){var A=sheet_to_workbook(_(T,B),B);return A.bookType="dif",A}function E(T,B){return"0,"+String(T)+`\r
`+B}function S(T){return`1,0\r
"`+T.replace(/"/g,'""')+'"'}function C(T){for(var B=safe_decode_range(T["!ref"]),A=T["!data"]!=null,I=[`TABLE\r
0,1\r
"sheetjs"\r
`,`VECTORS\r
0,`+(B.e.r-B.s.r+1)+`\r
""\r
`,`TUPLES\r
0,`+(B.e.c-B.s.c+1)+`\r
""\r
`,`DATA\r
0,0\r
""\r
`],D=B.s.r;D<=B.e.r;++D){for(var M=A?T["!data"][D]:[],V=`-1,0\r
BOT\r
`,L=B.s.c;L<=B.e.c;++L){var F=A?M&&M[L]:T[encode_cell({r:D,c:L})];if(F==null){V+=`1,0\r
""\r
`;continue}switch(F.t){case"n":F.w!=null?V+="0,"+F.w+`\r
V`:F.v!=null?V+=E(F.v,"V"):F.f!=null&&!F.F?V+=S("="+F.f):V+=`1,0\r
""`;break;case"b":V+=F.v?E(1,"TRUE"):E(0,"FALSE");break;case"s":V+=S(isNaN(+F.v)?F.v:'="'+F.v+'"');break;case"d":F.w||(F.w=SSF_format(F.z||table_fmt[14],datenum(parseDate(F.v)))),V+=E(F.w,"V");break;default:V+=`1,0\r
""`}V+=`\r
`}I.push(V)}return I.join("")+`-1,0\r
EOD`}return{to_workbook:x,to_sheet:_,from_sheet:C}}(),ETH=function(){function t(D){return D.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function n(D){return D.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function _(D,M){for(var V=D.split(`
`),L=-1,F=-1,j=0,U=[];j!==V.length;++j){var H=V[j].trim().split(":");if(H[0]==="cell"){var Y=decode_cell(H[1]);if(U.length<=Y.r)for(L=U.length;L<=Y.r;++L)U[L]||(U[L]=[]);switch(L=Y.r,F=Y.c,H[2]){case"t":U[L][F]=t(H[3]);break;case"v":U[L][F]=+H[3];break;case"vtf":var Z=H[H.length-1];case"vtc":switch(H[3]){case"nl":U[L][F]=!!+H[4];break;default:U[L][F]=+H[4];break}H[2]=="vtf"&&(U[L][F]=[U[L][F],Z])}}}return M&&M.sheetRows&&(U=U.slice(0,M.sheetRows)),U}function x(D,M){return aoa_to_sheet(_(D,M),M)}function E(D,M){return sheet_to_workbook(x(D,M),M)}var S=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),C=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,T=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),B="--SocialCalcSpreadsheetControlSave--";function A(D){if(!D||!D["!ref"])return"";for(var M=[],V=[],L,F="",j=decode_range(D["!ref"]),U=D["!data"]!=null,H=j.s.r;H<=j.e.r;++H)for(var Y=j.s.c;Y<=j.e.c;++Y)if(F=encode_cell({r:H,c:Y}),L=U?(D["!data"][H]||[])[Y]:D[F],!(!L||L.v==null||L.t==="z")){switch(V=["cell",F,"t"],L.t){case"s":case"str":V.push(n(L.v));break;case"n":L.f?(V[2]="vtf",V[3]="n",V[4]=L.v,V[5]=n(L.f)):(V[2]="v",V[3]=L.v);break;case"b":V[2]="vt"+(L.f?"f":"c"),V[3]="nl",V[4]=L.v?"1":"0",V[5]=n(L.f||(L.v?"TRUE":"FALSE"));break;case"d":var Z=datenum(parseDate(L.v));V[2]="vtc",V[3]="nd",V[4]=""+Z,V[5]=L.w||SSF_format(L.z||table_fmt[14],Z);break;case"e":continue}M.push(V.join(":"))}return M.push("sheet:c:"+(j.e.c-j.s.c+1)+":r:"+(j.e.r-j.s.r+1)+":tvf:1"),M.push("valueformat:1:text-wiki"),M.join(`
`)}function I(D){return[S,C,T,C,A(D),B].join(`
`)}return{to_workbook:E,to_sheet:x,from_sheet:I}}(),PRN=function(){function t(I,D,M,V,L){L.raw?D[M][V]=I:I===""||(I==="TRUE"?D[M][V]=!0:I==="FALSE"?D[M][V]=!1:isNaN(fuzzynum(I))?isNaN(fuzzydate(I).getDate())?D[M][V]=I:D[M][V]=parseDate(I):D[M][V]=fuzzynum(I))}function n(I,D){var M=D||{},V=[];if(!I||I.length===0)return V;for(var L=I.split(/[\r\n]/),F=L.length-1;F>=0&&L[F].length===0;)--F;for(var j=10,U=0,H=0;H<=F;++H)U=L[H].indexOf(" "),U==-1?U=L[H].length:U++,j=Math.max(j,U);for(H=0;H<=F;++H){V[H]=[];var Y=0;for(t(L[H].slice(0,j).trim(),V,H,Y,M),Y=1;Y<=(L[H].length-j)/10+1;++Y)t(L[H].slice(j+(Y-1)*10,j+Y*10).trim(),V,H,Y,M)}return M.sheetRows&&(V=V.slice(0,M.sheetRows)),V}var _={44:",",9:"	",59:";",124:"|"},x={44:3,9:2,59:1,124:0};function E(I){for(var D={},M=!1,V=0,L=0;V<I.length;++V)(L=I.charCodeAt(V))==34?M=!M:!M&&L in _&&(D[L]=(D[L]||0)+1);L=[];for(V in D)Object.prototype.hasOwnProperty.call(D,V)&&L.push([D[V],V]);if(!L.length){D=x;for(V in D)Object.prototype.hasOwnProperty.call(D,V)&&L.push([D[V],V])}return L.sort(function(F,j){return F[0]-j[0]||x[F[1]]-x[j[1]]}),_[L.pop()[1]]||44}function S(I,D){var M=D||{},V="",L={};M.dense&&(L["!data"]=[]);var F={s:{c:0,r:0},e:{c:0,r:0}};I.slice(0,4)=="sep="?I.charCodeAt(5)==13&&I.charCodeAt(6)==10?(V=I.charAt(4),I=I.slice(7)):I.charCodeAt(5)==13||I.charCodeAt(5)==10?(V=I.charAt(4),I=I.slice(6)):V=E(I.slice(0,1024)):M&&M.FS?V=M.FS:V=E(I.slice(0,1024));var j=0,U=0,H=0,Y=0,Z=0,ne=V.charCodeAt(0),re=!1,X=0,ce=I.charCodeAt(0),ue=M.dateNF!=null?dateNF_regex(M.dateNF):null;function _e(){var ye=I.slice(Y,Z);ye.slice(-1)=="\r"&&(ye=ye.slice(0,-1));var ie={};if(ye.charAt(0)=='"'&&ye.charAt(ye.length-1)=='"'&&(ye=ye.slice(1,-1).replace(/""/g,'"')),ye.length===0)ie.t="z";else if(M.raw)ie.t="s",ie.v=ye;else if(ye.trim().length===0)ie.t="s",ie.v=ye;else if(ye.charCodeAt(0)==61)ye.charCodeAt(1)==34&&ye.charCodeAt(ye.length-1)==34?(ie.t="s",ie.v=ye.slice(2,-1).replace(/""/g,'"')):fuzzyfmla(ye)?(ie.t="n",ie.f=ye.slice(1)):(ie.t="s",ie.v=ye);else if(ye=="TRUE")ie.t="b",ie.v=!0;else if(ye=="FALSE")ie.t="b",ie.v=!1;else if(!isNaN(H=fuzzynum(ye)))ie.t="n",M.cellText!==!1&&(ie.w=ye),ie.v=H;else if(!isNaN((H=fuzzydate(ye)).getDate())||ue&&ye.match(ue)){ie.z=M.dateNF||table_fmt[14];var W=0;ue&&ye.match(ue)&&(ye=dateNF_fix(ye,M.dateNF,ye.match(ue)||[]),W=1,H=parseDate(ye,W)),M.cellDates?(ie.t="d",ie.v=H):(ie.t="n",ie.v=datenum(H)),M.cellText!==!1&&(ie.w=SSF_format(ie.z,ie.v instanceof Date?datenum(ie.v):ie.v)),M.cellNF||delete ie.z}else ie.t="s",ie.v=ye;if(ie.t=="z"||(M.dense?(L["!data"][j]||(L["!data"][j]=[]),L["!data"][j][U]=ie):L[encode_cell({c:U,r:j})]=ie),Y=Z+1,ce=I.charCodeAt(Y),F.e.c<U&&(F.e.c=U),F.e.r<j&&(F.e.r=j),X==ne)++U;else if(U=0,++j,M.sheetRows&&M.sheetRows<=j)return!0}e:for(;Z<I.length;++Z)switch(X=I.charCodeAt(Z)){case 34:ce===34&&(re=!re);break;case 13:if(re)break;I.charCodeAt(Z+1)==10&&++Z;case ne:case 10:if(!re&&_e())break e;break}return Z-Y>0&&_e(),L["!ref"]=encode_range(F),L}function C(I,D){return!(D&&D.PRN)||D.FS||I.slice(0,4)=="sep="||I.indexOf("	")>=0||I.indexOf(",")>=0||I.indexOf(";")>=0?S(I,D):aoa_to_sheet(n(I,D),D)}function T(I,D){var M="",V=D.type=="string"?[0,0,0,0]:firstbyte(I,D);switch(D.type){case"base64":M=Base64_decode(I);break;case"binary":M=I;break;case"buffer":D.codepage==65001?M=I.toString("utf8"):D.codepage&&typeof $cptable<"u"?M=$cptable.utils.decode(D.codepage,I):M=has_buf&&Buffer.isBuffer(I)?I.toString("binary"):a2s(I);break;case"array":M=cc2str(I);break;case"string":M=I;break;default:throw new Error("Unrecognized type "+D.type)}return V[0]==239&&V[1]==187&&V[2]==191?M=utf8read(M.slice(3)):D.type!="string"&&D.type!="buffer"&&D.codepage==65001?M=utf8read(M):D.type=="binary"&&typeof $cptable<"u"&&D.codepage&&(M=$cptable.utils.decode(D.codepage,$cptable.utils.encode(28591,M))),M.slice(0,19)=="socialcalc:version:"?ETH.to_sheet(D.type=="string"?M:utf8read(M),D):C(M,D)}function B(I,D){return sheet_to_workbook(T(I,D),D)}function A(I){for(var D=[],M=safe_decode_range(I["!ref"]),V,L=I["!data"]!=null,F=M.s.r;F<=M.e.r;++F){for(var j=[],U=M.s.c;U<=M.e.c;++U){var H=encode_cell({r:F,c:U});if(V=L?(I["!data"][F]||[])[U]:I[H],!V||V.v==null){j.push("          ");continue}for(var Y=(V.w||(format_cell(V),V.w)||"").slice(0,10);Y.length<10;)Y+=" ";j.push(Y+(U===0?" ":""))}D.push(j.join(""))}return D.join(`
`)}return{to_workbook:B,to_sheet:T,from_sheet:A}}();function read_wb_ID(t,n){var _=n||{},x=!!_.WTF;_.WTF=!0;try{var E=SYLK.to_workbook(t,_);return _.WTF=x,E}catch(S){if(_.WTF=x,!S.message.match(/SYLK bad record ID/)&&x)throw S;return PRN.to_workbook(t,n)}}var WK_=function(){function t(fe,he,Ee){if(fe){prep_blob(fe,fe.l||0);for(var we=Ee.Enum||G;fe.l<fe.length;){var xe=fe.read_shift(2),$e=we[xe]||we[65535],ge=fe.read_shift(2),Se=fe.l+ge,me=$e.f&&$e.f(fe,ge,Ee);if(fe.l=Se,he(me,$e,xe))return}}}function n(fe,he){switch(he.type){case"base64":return _(s2a(Base64_decode(fe)),he);case"binary":return _(s2a(fe),he);case"buffer":case"array":return _(fe,he)}throw"Unsupported type "+he.type}function _(fe,he){if(!fe)return fe;var Ee=he||{},we={},xe="Sheet1",$e="",ge=0,Se={},me=[],Be=[],ve=[];Ee.dense&&(ve=we["!data"]=[]);var Ae={s:{r:0,c:0},e:{r:0,c:0}},Ve=Ee.sheetRows||0;if(fe[4]==81&&fe[5]==80&&fe[6]==87)return te(fe,he);if(fe[2]==0&&(fe[3]==8||fe[3]==9)&&fe.length>=16&&fe[14]==5&&fe[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(fe[2]==2)Ee.Enum=G,t(fe,function(qe,Ke,He){switch(He){case 0:Ee.vers=qe,qe>=4096&&(Ee.qpro=!0);break;case 255:Ee.vers=qe,Ee.works=!0;break;case 6:Ae=qe;break;case 204:qe&&($e=qe);break;case 222:$e=qe;break;case 15:case 51:(!Ee.qpro&&!Ee.works||He==51)&&qe[1].v.charCodeAt(0)<48&&(qe[1].v=qe[1].v.slice(1)),(Ee.works||Ee.works2)&&(qe[1].v=qe[1].v.replace(/\r\n/g,`
`));case 13:case 14:case 16:He==14&&(qe[2]&112)==112&&(qe[2]&15)>1&&(qe[2]&15)<15&&(qe[1].z=Ee.dateNF||table_fmt[14],Ee.cellDates&&(qe[1].t="d",qe[1].v=numdate(qe[1].v))),Ee.qpro&&qe[3]>ge&&(we["!ref"]=encode_range(Ae),Se[xe]=we,me.push(xe),we={},Ee.dense&&(ve=we["!data"]=[]),Ae={s:{r:0,c:0},e:{r:0,c:0}},ge=qe[3],xe=$e||"Sheet"+(ge+1),$e="");var Ge=Ee.dense?(ve[qe[0].r]||[])[qe[0].c]:we[encode_cell(qe[0])];if(Ge){Ge.t=qe[1].t,Ge.v=qe[1].v,qe[1].z!=null&&(Ge.z=qe[1].z),qe[1].f!=null&&(Ge.f=qe[1].f);break}Ee.dense?(ve[qe[0].r]||(ve[qe[0].r]=[]),ve[qe[0].r][qe[0].c]=qe[1]):we[encode_cell(qe[0])]=qe[1];break;case 21509:Ee.works2=!0;break}},Ee);else if(fe[2]==26||fe[2]==14)Ee.Enum=q,fe[2]==14&&(Ee.qpro=!0,fe.l=0),t(fe,function(qe,Ke,He){switch(He){case 204:xe=qe;break;case 22:qe[1].v.charCodeAt(0)<48&&(qe[1].v=qe[1].v.slice(1)),qe[1].v=qe[1].v.replace(/\x0F./g,function(Ge){return String.fromCharCode(Ge.charCodeAt(1)-32)}).replace(/\r\n/g,`
`);case 23:case 24:case 25:case 37:case 39:case 40:if(qe[3]>ge&&(we["!ref"]=encode_range(Ae),Se[xe]=we,me.push(xe),we={},Ee.dense&&(ve=we["!data"]=[]),Ae={s:{r:0,c:0},e:{r:0,c:0}},ge=qe[3],xe="Sheet"+(ge+1)),Ve>0&&qe[0].r>=Ve)break;Ee.dense?(ve[qe[0].r]||(ve[qe[0].r]=[]),ve[qe[0].r][qe[0].c]=qe[1]):we[encode_cell(qe[0])]=qe[1],Ae.e.c<qe[0].c&&(Ae.e.c=qe[0].c),Ae.e.r<qe[0].r&&(Ae.e.r=qe[0].r);break;case 27:qe[14e3]&&(Be[qe[14e3][0]]=qe[14e3][1]);break;case 1537:Be[qe[0]]=qe[1],qe[0]==ge&&(xe=qe[1]);break}},Ee);else throw new Error("Unrecognized LOTUS BOF "+fe[2]);if(we["!ref"]=encode_range(Ae),Se[$e||xe]=we,me.push($e||xe),!Be.length)return{SheetNames:me,Sheets:Se};for(var Pe={},Re=[],Ne=0;Ne<Be.length;++Ne)Se[me[Ne]]?(Re.push(Be[Ne]||me[Ne]),Pe[Be[Ne]]=Se[Be[Ne]]||Se[me[Ne]]):(Re.push(Be[Ne]),Pe[Be[Ne]]={"!ref":"A1"});return{SheetNames:Re,Sheets:Pe}}function x(fe,he){var Ee=he||{};if(+Ee.codepage>=0&&set_cp(+Ee.codepage),Ee.type=="string")throw new Error("Cannot write WK1 to JS string");var we=buf_array(),xe=safe_decode_range(fe["!ref"]),$e=fe["!data"]!=null,ge=[];write_biff_rec(we,0,S(1030)),write_biff_rec(we,6,B(xe));for(var Se=Math.min(xe.e.r,8191),me=xe.s.c;me<=xe.e.c;++me)ge[me]=encode_col(me);for(var Be=xe.s.r;Be<=Se;++Be){var ve=encode_row(Be);for(me=xe.s.c;me<=xe.e.c;++me){var Ae=$e?(fe["!data"][Be]||[])[me]:fe[ge[me]+ve];if(!(!Ae||Ae.t=="z"))if(Ae.t=="n")(Ae.v|0)==Ae.v&&Ae.v>=-32768&&Ae.v<=32767?write_biff_rec(we,13,L(Be,me,Ae.v)):write_biff_rec(we,14,j(Be,me,Ae.v));else{var Ve=format_cell(Ae);write_biff_rec(we,15,D(Be,me,Ve.slice(0,239)))}}}return write_biff_rec(we,1),we.end()}function E(fe,he){var Ee=he||{};if(+Ee.codepage>=0&&set_cp(+Ee.codepage),Ee.type=="string")throw new Error("Cannot write WK3 to JS string");var we=buf_array();write_biff_rec(we,0,C(fe));for(var xe=0,$e=0;xe<fe.SheetNames.length;++xe)(fe.Sheets[fe.SheetNames[xe]]||{})["!ref"]&&write_biff_rec(we,27,se(fe.SheetNames[xe],$e++));var ge=0;for(xe=0;xe<fe.SheetNames.length;++xe){var Se=fe.Sheets[fe.SheetNames[xe]];if(!(!Se||!Se["!ref"])){for(var me=safe_decode_range(Se["!ref"]),Be=Se["!data"]!=null,ve=[],Ae=Math.min(me.e.r,8191),Ve=me.s.r;Ve<=Ae;++Ve)for(var Pe=encode_row(Ve),Re=me.s.c;Re<=me.e.c;++Re){Ve===me.s.r&&(ve[Re]=encode_col(Re));var Ne=ve[Re]+Pe,qe=Be?(Se["!data"][Ve]||[])[Re]:Se[Ne];if(!(!qe||qe.t=="z"))if(qe.t=="n")write_biff_rec(we,23,ye(Ve,Re,ge,qe.v));else{var Ke=format_cell(qe);write_biff_rec(we,22,ce(Ve,Re,ge,Ke.slice(0,239)))}}++ge}}return write_biff_rec(we,1),we.end()}function S(fe){var he=new_buf(2);return he.write_shift(2,fe),he}function C(fe){var he=new_buf(26);he.write_shift(2,4096),he.write_shift(2,4),he.write_shift(4,0);for(var Ee=0,we=0,xe=0,$e=0;$e<fe.SheetNames.length;++$e){var ge=fe.SheetNames[$e],Se=fe.Sheets[ge];if(!(!Se||!Se["!ref"])){++xe;var me=decode_range(Se["!ref"]);Ee<me.e.r&&(Ee=me.e.r),we<me.e.c&&(we=me.e.c)}}return Ee>8191&&(Ee=8191),he.write_shift(2,Ee),he.write_shift(1,xe),he.write_shift(1,we),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(1,1),he.write_shift(1,2),he.write_shift(4,0),he.write_shift(4,0),he}function T(fe,he,Ee){var we={s:{c:0,r:0},e:{c:0,r:0}};return he==8&&Ee.qpro?(we.s.c=fe.read_shift(1),fe.l++,we.s.r=fe.read_shift(2),we.e.c=fe.read_shift(1),fe.l++,we.e.r=fe.read_shift(2),we):(we.s.c=fe.read_shift(2),we.s.r=fe.read_shift(2),he==12&&Ee.qpro&&(fe.l+=2),we.e.c=fe.read_shift(2),we.e.r=fe.read_shift(2),he==12&&Ee.qpro&&(fe.l+=2),we.s.c==65535&&(we.s.c=we.e.c=we.s.r=we.e.r=0),we)}function B(fe){var he=new_buf(8);return he.write_shift(2,fe.s.c),he.write_shift(2,fe.s.r),he.write_shift(2,fe.e.c),he.write_shift(2,fe.e.r),he}function A(fe,he,Ee){var we=[{c:0,r:0},{t:"n",v:0},0,0];return Ee.qpro&&Ee.vers!=20768?(we[0].c=fe.read_shift(1),we[3]=fe.read_shift(1),we[0].r=fe.read_shift(2),fe.l+=2):Ee.works?(we[0].c=fe.read_shift(2),we[0].r=fe.read_shift(2),we[2]=fe.read_shift(2)):(we[2]=fe.read_shift(1),we[0].c=fe.read_shift(2),we[0].r=fe.read_shift(2)),we}function I(fe,he,Ee){var we=fe.l+he,xe=A(fe,he,Ee);if(xe[1].t="s",Ee.vers==20768){fe.l++;var $e=fe.read_shift(1);return xe[1].v=fe.read_shift($e,"utf8"),xe}return Ee.qpro&&fe.l++,xe[1].v=fe.read_shift(we-fe.l,"cstr"),xe}function D(fe,he,Ee){var we=new_buf(7+Ee.length);we.write_shift(1,255),we.write_shift(2,he),we.write_shift(2,fe),we.write_shift(1,39);for(var xe=0;xe<we.length;++xe){var $e=Ee.charCodeAt(xe);we.write_shift(1,$e>=128?95:$e)}return we.write_shift(1,0),we}function M(fe,he,Ee){var we=fe.l+he,xe=A(fe,he,Ee);if(xe[1].t="s",Ee.vers==20768){var $e=fe.read_shift(1);return xe[1].v=fe.read_shift($e,"utf8"),xe}return xe[1].v=fe.read_shift(we-fe.l,"cstr"),xe}function V(fe,he,Ee){var we=A(fe,he,Ee);return we[1].v=fe.read_shift(2,"i"),we}function L(fe,he,Ee){var we=new_buf(7);return we.write_shift(1,255),we.write_shift(2,he),we.write_shift(2,fe),we.write_shift(2,Ee,"i"),we}function F(fe,he,Ee){var we=A(fe,he,Ee);return we[1].v=fe.read_shift(8,"f"),we}function j(fe,he,Ee){var we=new_buf(13);return we.write_shift(1,255),we.write_shift(2,he),we.write_shift(2,fe),we.write_shift(8,Ee,"f"),we}function U(fe,he,Ee){var we=fe.l+he,xe=A(fe,he,Ee);if(xe[1].v=fe.read_shift(8,"f"),Ee.qpro)fe.l=we;else{var $e=fe.read_shift(2);ne(fe.slice(fe.l,fe.l+$e),xe),fe.l+=$e}return xe}function H(fe,he,Ee){var we=he&32768;return he&=-32769,he=(we?fe:0)+(he>=8192?he-16384:he),(we?"":"$")+(Ee?encode_col(he):encode_row(he))}var Y={31:["NA",0],33:["ABS",1],34:["TRUNC",1],35:["SQRT",1],36:["LOG",1],37:["LN",1],38:["PI",0],39:["SIN",1],40:["COS",1],41:["TAN",1],42:["ATAN2",2],43:["ATAN",1],44:["ASIN",1],45:["ACOS",1],46:["EXP",1],47:["MOD",2],49:["ISNA",1],50:["ISERR",1],51:["FALSE",0],52:["TRUE",0],53:["RAND",0],63:["ROUND",2],68:["ISNUMBER",1],69:["ISTEXT",1],70:["LEN",1],71:["VALUE",1],73:["MID",3],74:["CHAR",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],102:["UPPER",1],103:["LOWER",1],107:["PROPER",1],109:["TRIM",1],111:["T",1]},Z=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function ne(fe,he){prep_blob(fe,0);for(var Ee=[],we=0,xe="",$e="",ge="",Se="";fe.l<fe.length;){var me=fe[fe.l++];switch(me){case 0:Ee.push(fe.read_shift(8,"f"));break;case 1:$e=H(he[0].c,fe.read_shift(2),!0),xe=H(he[0].r,fe.read_shift(2),!1),Ee.push($e+xe);break;case 2:{var Be=H(he[0].c,fe.read_shift(2),!0),ve=H(he[0].r,fe.read_shift(2),!1);$e=H(he[0].c,fe.read_shift(2),!0),xe=H(he[0].r,fe.read_shift(2),!1),Ee.push(Be+ve+":"+$e+xe)}break;case 3:if(fe.l<fe.length){console.error("WK1 premature formula end");return}break;case 4:Ee.push("("+Ee.pop()+")");break;case 5:Ee.push(fe.read_shift(2));break;case 6:{for(var Ae="";me=fe[fe.l++];)Ae+=String.fromCharCode(me);Ee.push('"'+Ae.replace(/"/g,'""')+'"')}break;case 8:Ee.push("-"+Ee.pop());break;case 23:Ee.push("+"+Ee.pop());break;case 22:Ee.push("NOT("+Ee.pop()+")");break;case 20:case 21:Se=Ee.pop(),ge=Ee.pop(),Ee.push(["AND","OR"][me-20]+"("+ge+","+Se+")");break;default:if(me<32&&Z[me])Se=Ee.pop(),ge=Ee.pop(),Ee.push(ge+Z[me]+Se);else if(Y[me]){if(we=Y[me][1],we==69&&(we=fe[fe.l++]),we>Ee.length){console.error("WK1 bad formula parse 0x"+me.toString(16)+":|"+Ee.join("|")+"|");return}var Ve=Ee.slice(-we);Ee.length-=we,Ee.push(Y[me][0]+"("+Ve.join(",")+")")}else return me<=7?console.error("WK1 invalid opcode "+me.toString(16)):me<=24?console.error("WK1 unsupported op "+me.toString(16)):me<=30?console.error("WK1 invalid opcode "+me.toString(16)):me<=115?console.error("WK1 unsupported function opcode "+me.toString(16)):console.error("WK1 unrecognized opcode "+me.toString(16))}}Ee.length==1?he[1].f=""+Ee[0]:console.error("WK1 bad formula parse |"+Ee.join("|")+"|")}function re(fe){var he=[{c:0,r:0},{t:"n",v:0},0];return he[0].r=fe.read_shift(2),he[3]=fe[fe.l++],he[0].c=fe[fe.l++],he}function X(fe,he){var Ee=re(fe);return Ee[1].t="s",Ee[1].v=fe.read_shift(he-4,"cstr"),Ee}function ce(fe,he,Ee,we){var xe=new_buf(6+we.length);xe.write_shift(2,fe),xe.write_shift(1,Ee),xe.write_shift(1,he),xe.write_shift(1,39);for(var $e=0;$e<we.length;++$e){var ge=we.charCodeAt($e);xe.write_shift(1,ge>=128?95:ge)}return xe.write_shift(1,0),xe}function ue(fe,he){var Ee=re(fe);Ee[1].v=fe.read_shift(2);var we=Ee[1].v>>1;if(Ee[1].v&1)switch(we&7){case 0:we=(we>>3)*5e3;break;case 1:we=(we>>3)*500;break;case 2:we=(we>>3)/20;break;case 3:we=(we>>3)/200;break;case 4:we=(we>>3)/2e3;break;case 5:we=(we>>3)/2e4;break;case 6:we=(we>>3)/16;break;case 7:we=(we>>3)/64;break}return Ee[1].v=we,Ee}function _e(fe,he){var Ee=re(fe),we=fe.read_shift(4),xe=fe.read_shift(4),$e=fe.read_shift(2);if($e==65535)return we===0&&xe===3221225472?(Ee[1].t="e",Ee[1].v=15):we===0&&xe===3489660928?(Ee[1].t="e",Ee[1].v=42):Ee[1].v=0,Ee;var ge=$e&32768;return $e=($e&32767)-16446,Ee[1].v=(1-ge*2)*(xe*Math.pow(2,$e+32)+we*Math.pow(2,$e)),Ee}function ye(fe,he,Ee,we){var xe=new_buf(14);if(xe.write_shift(2,fe),xe.write_shift(1,Ee),xe.write_shift(1,he),we==0)return xe.write_shift(4,0),xe.write_shift(4,0),xe.write_shift(2,65535),xe;var $e=0,ge=0,Se=0,me=0;return we<0&&($e=1,we=-we),ge=Math.log2(we)|0,we/=Math.pow(2,ge-31),me=we>>>0,me&2147483648||(we/=2,++ge,me=we>>>0),we-=me,me|=2147483648,me>>>=0,we*=Math.pow(2,32),Se=we>>>0,xe.write_shift(4,Se),xe.write_shift(4,me),ge+=16383+($e?32768:0),xe.write_shift(2,ge),xe}function ie(fe,he){var Ee=_e(fe);return fe.l+=he-14,Ee}function W(fe,he){var Ee=re(fe),we=fe.read_shift(4);return Ee[1].v=we>>6,Ee}function O(fe,he){var Ee=re(fe),we=fe.read_shift(8,"f");return Ee[1].v=we,Ee}function z(fe,he){var Ee=O(fe);return fe.l+=he-12,Ee}function J(fe,he){return fe[fe.l+he-1]==0?fe.read_shift(he,"cstr"):""}function ee(fe,he){var Ee=fe[fe.l++];Ee>he-1&&(Ee=he-1);for(var we="";we.length<Ee;)we+=String.fromCharCode(fe[fe.l++]);return we}function ae(fe,he,Ee){if(!(!Ee.qpro||he<21)){var we=fe.read_shift(1);fe.l+=17,fe.l+=1,fe.l+=2;var xe=fe.read_shift(he-21,"cstr");return[we,xe]}}function oe(fe,he){for(var Ee={},we=fe.l+he;fe.l<we;){var xe=fe.read_shift(2);if(xe==14e3){for(Ee[xe]=[0,""],Ee[xe][0]=fe.read_shift(2);fe[fe.l];)Ee[xe][1]+=String.fromCharCode(fe[fe.l]),fe.l++;fe.l++}}return Ee}function se(fe,he){var Ee=new_buf(5+fe.length);Ee.write_shift(2,14e3),Ee.write_shift(2,he);for(var we=0;we<fe.length;++we){var xe=fe.charCodeAt(we);Ee[Ee.l++]=xe>127?95:xe}return Ee[Ee.l++]=0,Ee}var G={0:{n:"BOF",f:parseuint16},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:T},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:V},14:{n:"NUMBER",f:F},15:{n:"LABEL",f:I},16:{n:"FORMULA",f:U},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:M},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:J},222:{n:"SHEETNAMELP",f:ee},255:{n:"BOF",f:parseuint16},65535:{n:""}},q={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:X},23:{n:"NUMBER17",f:_e},24:{n:"NUMBER18",f:ue},25:{n:"FORMULA19",f:ie},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:oe},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:W},38:{n:"??"},39:{n:"NUMBER27",f:O},40:{n:"FORMULA28",f:z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:J},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ae},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};function te(fe,he){prep_blob(fe,0);var Ee=he||{},we={};Ee.dense&&(we["!data"]=[]);var xe=[],$e="",ge={s:{r:-1,c:-1},e:{r:-1,c:-1}},Se=0,me=0,Be=0,ve=0,Ae={SheetNames:[],Sheets:{}};e:for(;fe.l<fe.length;){var Ve=fe.read_shift(2),Pe=fe.read_shift(2),Re=fe.slice(fe.l,fe.l+Pe);switch(prep_blob(Re,0),Ve){case 1:if(Re.read_shift(4)!=962023505)throw"Bad QPW9 BOF!";break;case 2:break e;case 1025:break;case 1026:break;case 1031:for(Re.l+=12;Re.l<Re.length;)Se=Re.read_shift(2),me=Re.read_shift(1),xe.push(Re.read_shift(Se,"cstr"));break;case 1032:break;case 1537:{var Ne=Re.read_shift(2);we={},Ee.dense&&(we["!data"]=[]),ge.s.c=Re.read_shift(2),ge.e.c=Re.read_shift(2),ge.s.r=Re.read_shift(4),ge.e.r=Re.read_shift(4),Re.l+=4,Re.l+2<Re.length&&(Se=Re.read_shift(2),me=Re.read_shift(1),$e=Se==0?"":Re.read_shift(Se,"cstr")),$e||($e=encode_col(Ne))}break;case 1538:{if(ge.s.c>255||ge.s.r>999999)break;ge.e.c<ge.s.c&&(ge.e.c=ge.s.c),ge.e.r<ge.s.r&&(ge.e.r=ge.s.r),we["!ref"]=encode_range(ge),book_append_sheet(Ae,we,$e)}break;case 2561:Be=Re.read_shift(2),ge.e.c<Be&&(ge.e.c=Be),ge.s.c>Be&&(ge.s.c=Be),ve=Re.read_shift(4),ge.s.r>ve&&(ge.s.r=ve),ve=Re.read_shift(4),ge.e.r<ve&&(ge.e.r=ve);break;case 3073:{ve=Re.read_shift(4),Se=Re.read_shift(4),ge.s.r>ve&&(ge.s.r=ve),ge.e.r<ve+Se-1&&(ge.e.r=ve+Se-1);for(var qe=encode_col(Be);Re.l<Re.length;){var Ke={t:"z"},He=Re.read_shift(1);He&128&&(Re.l+=2);var Ge=He&64?Re.read_shift(2)-1:0;switch(He&31){case 1:break;case 2:Ke={t:"n",v:Re.read_shift(2)};break;case 3:Ke={t:"n",v:Re.read_shift(2,"i")};break;case 5:Ke={t:"n",v:Re.read_shift(8,"f")};break;case 7:Ke={t:"s",v:xe[me=Re.read_shift(4)-1]};break;case 8:Ke={t:"n",v:Re.read_shift(8,"f")},Re.l+=2,Re.l+=4;break;default:throw"Unrecognized QPW cell type "+(He&31)}var rt=0;if(He&32)switch(He&31){case 2:rt=Re.read_shift(2);break;case 3:rt=Re.read_shift(2,"i");break;case 7:rt=Re.read_shift(2);break;default:throw"Unsupported delta for QPW cell type "+(He&31)}for(!Ee.sheetStubs&&Ke.t=="z"||(we["!data"]!=null?(we["!data"][ve]||(we["!data"][ve]=[]),we["!data"][ve][Be]=Ke):we[qe+encode_row(ve)]=Ke),++ve,--Se;Ge-- >0&&Se>=0;){if(He&32)switch(He&31){case 2:Ke={t:"n",v:Ke.v+rt&65535};break;case 3:Ke={t:"n",v:Ke.v+rt&65535},Ke.v>32767&&(Ke.v-=65536);break;case 7:Ke={t:"s",v:xe[me=me+rt>>>0]};break;default:throw"Cannot apply delta for QPW cell type "+(He&31)}else switch(He&31){case 1:Ke={t:"z"};break;case 2:Ke={t:"n",v:Re.read_shift(2)};break;case 7:Ke={t:"s",v:xe[me=Re.read_shift(4)-1]};break;default:throw"Cannot apply repeat for QPW cell type "+(He&31)}!Ee.sheetStubs&&Ke.t=="z"||(we["!data"]!=null?(we["!data"][ve]||(we["!data"][ve]=[]),we["!data"][ve][Be]=Ke):we[qe+encode_row(ve)]=Ke),++ve,--Se}}}break}fe.l+=Pe}return Ae}return{sheet_to_wk1:x,book_to_wk3:E,to_workbook:n}}();function parse_rpr(t){var n={},_=t.match(tagregex),x=0,E=!1;if(_)for(;x!=_.length;++x){var S=parsexmltag(_[x]);switch(S[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!S.val)break;case"<shadow>":case"<shadow/>":n.shadow=1;break;case"</shadow>":break;case"<charset":if(S.val=="1")break;n.cp=CS2CP[parseInt(S.val,10)];break;case"<outline":if(!S.val)break;case"<outline>":case"<outline/>":n.outline=1;break;case"</outline>":break;case"<rFont":n.name=S.val;break;case"<sz":n.sz=S.val;break;case"<strike":if(!S.val)break;case"<strike>":case"<strike/>":n.strike=1;break;case"</strike>":break;case"<u":if(!S.val)break;switch(S.val){case"double":n.uval="double";break;case"singleAccounting":n.uval="single-accounting";break;case"doubleAccounting":n.uval="double-accounting";break}case"<u>":case"<u/>":n.u=1;break;case"</u>":break;case"<b":if(S.val=="0")break;case"<b>":case"<b/>":n.b=1;break;case"</b>":break;case"<i":if(S.val=="0")break;case"<i>":case"<i/>":n.i=1;break;case"</i>":break;case"<color":S.rgb&&(n.color=S.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":n.family=S.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":n.valign=S.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":E=!0;break;case"</ext>":E=!1;break;default:if(S[0].charCodeAt(1)!==47&&!E)throw new Error("Unrecognized rich format "+S[0])}}return n}var parse_rs=function(){var t=matchtag("t"),n=matchtag("rPr");function _(S){var C=S.match(t);if(!C)return{t:"s",v:""};var T={t:"s",v:unescapexml(C[1])},B=S.match(n);return B&&(T.s=parse_rpr(B[1])),T}var x=/<(?:\w+:)?r>/g,E=/<\/(?:\w+:)?r>/;return function(C){return C.replace(x,"").split(E).map(_).filter(function(T){return T.v})}}(),rs_to_html=function t(){var n=/(\r\n|\n)/g;function _(E,S,C){var T=[];E.u&&T.push("text-decoration: underline;"),E.uval&&T.push("text-underline-style:"+E.uval+";"),E.sz&&T.push("font-size:"+E.sz+"pt;"),E.outline&&T.push("text-effect: outline;"),E.shadow&&T.push("text-shadow: auto;"),S.push('<span style="'+T.join("")+'">'),E.b&&(S.push("<b>"),C.push("</b>")),E.i&&(S.push("<i>"),C.push("</i>")),E.strike&&(S.push("<s>"),C.push("</s>"));var B=E.valign||"";return B=="superscript"||B=="super"?B="sup":B=="subscript"&&(B="sub"),B!=""&&(S.push("<"+B+">"),C.push("</"+B+">")),C.push("</span>"),E}function x(E){var S=[[],E.v,[]];return E.v?(E.s&&_(E.s,S[0],S[2]),S[0].join("")+S[1].replace(n,"<br/>")+S[2].join("")):""}return function(S){return S.map(x).join("")}}(),sitregex=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,sirregex=/<(?:\w+:)?r>/,sirphregex=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function parse_si(t,n){var _=n?n.cellHTML:!0,x={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(x.t=unescapexml(utf8read(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||""),!0),x.r=utf8read(t),_&&(x.h=escapehtml(x.t))):t.match(sirregex)&&(x.r=utf8read(t),x.t=unescapexml(utf8read((t.replace(sirphregex,"").match(sitregex)||[]).join("").replace(tagregex,"")),!0),_&&(x.h=rs_to_html(parse_rs(x.r)))),x):{t:""}}var sstr0=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,sstr1=/<(?:\w+:)?(?:si|sstItem)>/g,sstr2=/<\/(?:\w+:)?(?:si|sstItem)>/;function parse_sst_xml(t,n){var _=[],x="";if(!t)return _;var E=t.match(sstr0);if(E){x=E[2].replace(sstr1,"").split(sstr2);for(var S=0;S!=x.length;++S){var C=parse_si(x[S].trim(),n);C!=null&&(_[_.length]=C)}E=parsexmltag(E[1]),_.Count=E.count,_.Unique=E.uniqueCount}return _}var straywsregex=/^\s|\s$|[\t\n\r]/;function write_sst_xml(t,n){if(!n.bookSST)return"";var _=[XML_HEADER];_[_.length]=writextag("sst",null,{xmlns:XMLNS_main[0],count:t.Count,uniqueCount:t.Unique});for(var x=0;x!=t.length;++x)if(t[x]!=null){var E=t[x],S="<si>";E.r?S+=E.r:(S+="<t",E.t||(E.t=""),typeof E.t!="string"&&(E.t=String(E.t)),E.t.match(straywsregex)&&(S+=' xml:space="preserve"'),S+=">"+escapexml(E.t)+"</t>"),S+="</si>",_[_.length]=S}return _.length>2&&(_[_.length]="</sst>",_[1]=_[1].replace("/>",">")),_.join("")}function parse_BrtBeginSst(t){return[t.read_shift(4),t.read_shift(4)]}function parse_sst_bin(t,n){var _=[],x=!1;return recordhopper(t,function(S,C,T){switch(T){case 159:_.Count=S[0],_.Unique=S[1];break;case 19:_.push(S);break;case 160:return!0;case 35:x=!0;break;case 36:x=!1;break;default:if(C.T,!x||n.WTF)throw new Error("Unexpected record 0x"+T.toString(16))}}),_}function write_BrtBeginSst(t,n){return n||(n=new_buf(8)),n.write_shift(4,t.Count),n.write_shift(4,t.Unique),n}var write_BrtSSTItem=write_RichStr;function write_sst_bin(t){var n=buf_array();write_record(n,159,write_BrtBeginSst(t));for(var _=0;_<t.length;++_)write_record(n,19,write_BrtSSTItem(t[_]));return write_record(n,160),n.end()}function _JS2ANSI(t){for(var n=[],_=t.split(""),x=0;x<_.length;++x)n[x]=_[x].charCodeAt(0);return n}function parse_CRYPTOVersion(t,n){var _={};return _.Major=t.read_shift(2),_.Minor=t.read_shift(2),n>=4&&(t.l+=n-4),_}function parse_DataSpaceVersionInfo(t){var n={};return n.id=t.read_shift(0,"lpp4"),n.R=parse_CRYPTOVersion(t,4),n.U=parse_CRYPTOVersion(t,4),n.W=parse_CRYPTOVersion(t,4),n}function parse_DataSpaceMapEntry(t){for(var n=t.read_shift(4),_=t.l+n-4,x={},E=t.read_shift(4),S=[];E-- >0;)S.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(x.name=t.read_shift(0,"lpp4"),x.comps=S,t.l!=_)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+_);return x}function parse_DataSpaceMap(t){var n=[];t.l+=4;for(var _=t.read_shift(4);_-- >0;)n.push(parse_DataSpaceMapEntry(t));return n}function parse_DataSpaceDefinition(t){var n=[];t.l+=4;for(var _=t.read_shift(4);_-- >0;)n.push(t.read_shift(0,"lpp4"));return n}function parse_TransformInfoHeader(t){var n={};return t.read_shift(4),t.l+=4,n.id=t.read_shift(0,"lpp4"),n.name=t.read_shift(0,"lpp4"),n.R=parse_CRYPTOVersion(t,4),n.U=parse_CRYPTOVersion(t,4),n.W=parse_CRYPTOVersion(t,4),n}function parse_Primary(t){var n=parse_TransformInfoHeader(t);if(n.ename=t.read_shift(0,"8lpp4"),n.blksz=t.read_shift(4),n.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return n}function parse_EncryptionHeader(t,n){var _=t.l+n,x={};x.Flags=t.read_shift(4)&63,t.l+=4,x.AlgID=t.read_shift(4);var E=!1;switch(x.AlgID){case 26126:case 26127:case 26128:E=x.Flags==36;break;case 26625:E=x.Flags==4;break;case 0:E=x.Flags==16||x.Flags==4||x.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+x.AlgID}if(!E)throw new Error("Encryption Flags/AlgID mismatch");return x.AlgIDHash=t.read_shift(4),x.KeySize=t.read_shift(4),x.ProviderType=t.read_shift(4),t.l+=8,x.CSPName=t.read_shift(_-t.l>>1,"utf16le"),t.l=_,x}function parse_EncryptionVerifier(t,n){var _={},x=t.l+n;return t.l+=4,_.Salt=t.slice(t.l,t.l+16),t.l+=16,_.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),_.VerifierHash=t.slice(t.l,x),t.l=x,_}function parse_EncryptionInfo(t){var n=parse_CRYPTOVersion(t);switch(n.Minor){case 2:return[n.Minor,parse_EncInfoStd(t)];case 3:return[n.Minor,parse_EncInfoExt()];case 4:return[n.Minor,parse_EncInfoAgl(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+n.Minor)}function parse_EncInfoStd(t){var n=t.read_shift(4);if((n&63)!=36)throw new Error("EncryptionInfo mismatch");var _=t.read_shift(4),x=parse_EncryptionHeader(t,_),E=parse_EncryptionVerifier(t,t.length-t.l);return{t:"Std",h:x,v:E}}function parse_EncInfoExt(){throw new Error("File is password-protected: ECMA-376 Extensible")}function parse_EncInfoAgl(t){var n=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var _=t.read_shift(t.length-t.l,"utf8"),x={};return _.replace(tagregex,function(S){var C=parsexmltag(S);switch(strip_ns(C[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":n.forEach(function(T){x[T]=C[T]});break;case"<dataIntegrity":x.encryptedHmacKey=C.encryptedHmacKey,x.encryptedHmacValue=C.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":x.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":x.uri=C.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":x.encs.push(C);break;default:throw C[0]}}),x}function parse_RC4CryptoHeader(t,n){var _={},x=_.EncryptionVersionInfo=parse_CRYPTOVersion(t,4);if(n-=4,x.Minor!=2)throw new Error("unrecognized minor version code: "+x.Minor);if(x.Major>4||x.Major<2)throw new Error("unrecognized major version code: "+x.Major);_.Flags=t.read_shift(4),n-=4;var E=t.read_shift(4);return n-=4,_.EncryptionHeader=parse_EncryptionHeader(t,E),n-=E,_.EncryptionVerifier=parse_EncryptionVerifier(t,n),_}function parse_RC4Header(t){var n={},_=n.EncryptionVersionInfo=parse_CRYPTOVersion(t,4);if(_.Major!=1||_.Minor!=1)throw"unrecognized version code "+_.Major+" : "+_.Minor;return n.Salt=t.read_shift(16),n.EncryptedVerifier=t.read_shift(16),n.EncryptedVerifierHash=t.read_shift(16),n}function crypto_CreatePasswordVerifier_Method1(t){var n=0,_,x=_JS2ANSI(t),E=x.length+1,S,C,T,B,A;for(_=new_raw_buf(E),_[0]=x.length,S=1;S!=E;++S)_[S]=x[S-1];for(S=E-1;S>=0;--S)C=_[S],T=n&16384?1:0,B=n<<1&32767,A=T|B,n=A^C;return n^52811}var crypto_CreateXorArray_Method1=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],n=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],_=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],x=function(C){return(C/2|C*128)&255},E=function(C,T){return x(C^T)},S=function(C){for(var T=n[C.length-1],B=104,A=C.length-1;A>=0;--A)for(var I=C[A],D=0;D!=7;++D)I&64&&(T^=_[B]),I*=2,--B;return T};return function(C){for(var T=_JS2ANSI(C),B=S(T),A=T.length,I=new_raw_buf(16),D=0;D!=16;++D)I[D]=0;var M,V,L;for((A&1)===1&&(M=B>>8,I[A]=E(t[0],M),--A,M=B&255,V=T[T.length-1],I[A]=E(V,M));A>0;)--A,M=B>>8,I[A]=E(T[A],M),--A,M=B&255,I[A]=E(T[A],M);for(A=15,L=15-T.length;L>0;)M=B>>8,I[A]=E(t[L],M),--A,--L,M=B&255,I[A]=E(T[A],M),--A,--L;return I}}(),crypto_DecryptData_Method1=function(t,n,_,x,E){E||(E=n),x||(x=crypto_CreateXorArray_Method1(t));var S,C;for(S=0;S!=n.length;++S)C=n[S],C^=x[_],C=(C>>5|C<<3)&255,E[S]=C,++_;return[E,_,x]},crypto_MakeXorDecryptor=function(t){var n=0,_=crypto_CreateXorArray_Method1(t);return function(x){var E=crypto_DecryptData_Method1("",x,n,_);return n=E[1],E[0]}};function parse_XORObfuscation(t,n,_,x){var E={key:parseuint16(t),verificationBytes:parseuint16(t)};return _.password&&(E.verifier=crypto_CreatePasswordVerifier_Method1(_.password)),x.valid=E.verificationBytes===E.verifier,x.valid&&(x.insitu=crypto_MakeXorDecryptor(_.password)),E}function parse_FilePassHeader(t,n,_){var x=_||{};return x.Info=t.read_shift(2),t.l-=2,x.Info===1?x.Data=parse_RC4Header(t):x.Data=parse_RC4CryptoHeader(t,n),x}function parse_FilePass(t,n,_){var x={Type:_.biff>=8?t.read_shift(2):0};return x.Type?parse_FilePassHeader(t,n-2,x):parse_XORObfuscation(t,_.biff>=8?n:n-2,_,x),x}function rtf_to_sheet(t,n){switch(n.type){case"base64":return rtf_to_sheet_str(Base64_decode(t),n);case"binary":return rtf_to_sheet_str(t,n);case"buffer":return rtf_to_sheet_str(has_buf&&Buffer.isBuffer(t)?t.toString("binary"):a2s(t),n);case"array":return rtf_to_sheet_str(cc2str(t),n)}throw new Error("Unrecognized type "+n.type)}function rtf_to_sheet_str(t,n){var _=n||{},x={},E=_.dense;E&&(x["!data"]=[]);var S=t.match(/\\trowd[\s\S]*?\\row\b/g);if(!S)throw new Error("RTF missing table");var C={s:{c:0,r:0},e:{c:0,r:S.length-1}},T=[];return S.forEach(function(B,A){E&&(T=x["!data"][A]=[]);for(var I=/\\[\w\-]+\b/g,D=0,M,V=-1,L=[];(M=I.exec(B))!=null;){var F=B.slice(D,I.lastIndex-M[0].length);switch(F.charCodeAt(0)==32&&(F=F.slice(1)),F.length&&L.push(F),M[0]){case"\\cell":if(++V,L.length){var j={v:L.join(""),t:"s"};j.v=="TRUE"||j.v=="FALSE"?(j.v=j.v=="TRUE",j.t="b"):isNaN(fuzzynum(j.v))||(j.t="n",_.cellText!==!1&&(j.w=j.v),j.v=fuzzynum(j.v)),E?T[V]=j:x[encode_cell({r:A,c:V})]=j}L=[];break;case"\\par":L.push(`
`);break}D=I.lastIndex}V>C.e.c&&(C.e.c=V)}),x["!ref"]=encode_range(C),x}function rtf_to_workbook(t,n){var _=sheet_to_workbook(rtf_to_sheet(t,n),n);return _.bookType="rtf",_}function sheet_to_rtf(t,n){var _=["{\\rtf1\\ansi"];if(!t["!ref"])return _[0]+"}";for(var x=safe_decode_range(t["!ref"]),E,S=t["!data"]!=null,C=[],T=x.s.r;T<=x.e.r;++T){_.push("\\trowd\\trautofit1");for(var B=x.s.c;B<=x.e.c;++B)_.push("\\cellx"+(B+1));for(_.push("\\pard\\intbl"),S&&(C=t["!data"][T]||[]),B=x.s.c;B<=x.e.c;++B){var A=encode_cell({r:T,c:B});if(E=S?C[B]:t[A],!E||E.v==null&&(!E.f||E.F)){_.push(" \\cell");continue}_.push(" "+(E.w||(format_cell(E),E.w)||"").replace(/[\r\n]/g,"\\par ")),_.push("\\cell")}_.push("\\pard\\intbl\\row")}return _.join("")+"}"}function hex2RGB(t){var n=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(n.slice(0,2),16),parseInt(n.slice(2,4),16),parseInt(n.slice(4,6),16)]}function rgb2Hex(t){for(var n=0,_=1;n!=3;++n)_=_*256+(t[n]>255?255:t[n]<0?0:t[n]);return _.toString(16).toUpperCase().slice(1)}function rgb2HSL(t){var n=t[0]/255,_=t[1]/255,x=t[2]/255,E=Math.max(n,_,x),S=Math.min(n,_,x),C=E-S;if(C===0)return[0,0,n];var T=0,B=0,A=E+S;switch(B=C/(A>1?2-A:A),E){case n:T=((_-x)/C+6)%6;break;case _:T=(x-n)/C+2;break;case x:T=(n-_)/C+4;break}return[T/6,B,A/2]}function hsl2RGB(t){var n=t[0],_=t[1],x=t[2],E=_*2*(x<.5?x:1-x),S=x-E/2,C=[S,S,S],T=6*n,B;if(_!==0)switch(T|0){case 0:case 6:B=E*T,C[0]+=E,C[1]+=B;break;case 1:B=E*(2-T),C[0]+=B,C[1]+=E;break;case 2:B=E*(T-2),C[1]+=E,C[2]+=B;break;case 3:B=E*(4-T),C[1]+=B,C[2]+=E;break;case 4:B=E*(T-4),C[2]+=E,C[0]+=B;break;case 5:B=E*(6-T),C[2]+=B,C[0]+=E;break}for(var A=0;A!=3;++A)C[A]=Math.round(C[A]*255);return C}function rgb_tint(t,n){if(n===0)return t;var _=rgb2HSL(hex2RGB(t));return n<0?_[2]=_[2]*(1+n):_[2]=1-(1-_[2])*(1-n),rgb2Hex(hsl2RGB(_))}var DEF_MDW=6,MAX_MDW=15,MIN_MDW=1,MDW=DEF_MDW;function width2px(t){return Math.floor((t+Math.round(128/MDW)/256)*MDW)}function px2char(t){return Math.floor((t-5)/MDW*100+.5)/100}function char2width(t){return Math.round((t*MDW+5)/MDW*256)/256}function cycle_width(t){return char2width(px2char(width2px(t)))}function find_mdw_colw(t){var n=Math.abs(t-cycle_width(t)),_=MDW;if(n>.005)for(MDW=MIN_MDW;MDW<MAX_MDW;++MDW)Math.abs(t-cycle_width(t))<=n&&(n=Math.abs(t-cycle_width(t)),_=MDW);MDW=_}function process_col(t){t.width?(t.wpx=width2px(t.width),t.wch=px2char(t.wpx),t.MDW=MDW):t.wpx?(t.wch=px2char(t.wpx),t.width=char2width(t.wch),t.MDW=MDW):typeof t.wch=="number"&&(t.width=char2width(t.wch),t.wpx=width2px(t.width),t.MDW=MDW),t.customWidth&&delete t.customWidth}var DEF_PPI=96,PPI=DEF_PPI;function px2pt(t){return t*96/PPI}function pt2px(t){return t*PPI/96}var XLMLPatternTypeMap={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function parse_borders(t,n,_,x){n.Borders=[];var E={},S=!1;(t[0].match(tagregex)||[]).forEach(function(C){var T=parsexmltag(C);switch(strip_ns(T[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":E={},T.diagonalUp&&(E.diagonalUp=parsexmlbool(T.diagonalUp)),T.diagonalDown&&(E.diagonalDown=parsexmlbool(T.diagonalDown)),n.Borders.push(E);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":S=!0;break;case"</ext>":S=!1;break;default:if(x&&x.WTF&&!S)throw new Error("unrecognized "+T[0]+" in borders")}})}function parse_fills(t,n,_,x){n.Fills=[];var E={},S=!1;(t[0].match(tagregex)||[]).forEach(function(C){var T=parsexmltag(C);switch(strip_ns(T[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":E={},n.Fills.push(E);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":n.Fills.push(E),E={};break;case"<patternFill":case"<patternFill>":T.patternType&&(E.patternType=T.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":E.bgColor||(E.bgColor={}),T.indexed&&(E.bgColor.indexed=parseInt(T.indexed,10)),T.theme&&(E.bgColor.theme=parseInt(T.theme,10)),T.tint&&(E.bgColor.tint=parseFloat(T.tint)),T.rgb&&(E.bgColor.rgb=T.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":E.fgColor||(E.fgColor={}),T.theme&&(E.fgColor.theme=parseInt(T.theme,10)),T.tint&&(E.fgColor.tint=parseFloat(T.tint)),T.rgb!=null&&(E.fgColor.rgb=T.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":S=!0;break;case"</ext>":S=!1;break;default:if(x&&x.WTF&&!S)throw new Error("unrecognized "+T[0]+" in fills")}})}function parse_fonts(t,n,_,x){n.Fonts=[];var E={},S=!1;(t[0].match(tagregex)||[]).forEach(function(C){var T=parsexmltag(C);switch(strip_ns(T[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":n.Fonts.push(E),E={};break;case"<name":T.val&&(E.name=utf8read(T.val));break;case"<name/>":case"</name>":break;case"<b":E.bold=T.val?parsexmlbool(T.val):1;break;case"<b/>":E.bold=1;break;case"<i":E.italic=T.val?parsexmlbool(T.val):1;break;case"<i/>":E.italic=1;break;case"<u":switch(T.val){case"none":E.underline=0;break;case"single":E.underline=1;break;case"double":E.underline=2;break;case"singleAccounting":E.underline=33;break;case"doubleAccounting":E.underline=34;break}break;case"<u/>":E.underline=1;break;case"<strike":E.strike=T.val?parsexmlbool(T.val):1;break;case"<strike/>":E.strike=1;break;case"<outline":E.outline=T.val?parsexmlbool(T.val):1;break;case"<outline/>":E.outline=1;break;case"<shadow":E.shadow=T.val?parsexmlbool(T.val):1;break;case"<shadow/>":E.shadow=1;break;case"<condense":E.condense=T.val?parsexmlbool(T.val):1;break;case"<condense/>":E.condense=1;break;case"<extend":E.extend=T.val?parsexmlbool(T.val):1;break;case"<extend/>":E.extend=1;break;case"<sz":T.val&&(E.sz=+T.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":T.val&&(E.vertAlign=T.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":T.val&&(E.family=parseInt(T.val,10));break;case"<family/>":case"</family>":break;case"<scheme":T.val&&(E.scheme=T.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(T.val=="1")break;T.codepage=CS2CP[parseInt(T.val,10)];break;case"<color":if(E.color||(E.color={}),T.auto&&(E.color.auto=parsexmlbool(T.auto)),T.rgb)E.color.rgb=T.rgb.slice(-6);else if(T.indexed){E.color.index=parseInt(T.indexed,10);var B=XLSIcv[E.color.index];E.color.index==81&&(B=XLSIcv[1]),B||(B=XLSIcv[1]),E.color.rgb=B[0].toString(16)+B[1].toString(16)+B[2].toString(16)}else T.theme&&(E.color.theme=parseInt(T.theme,10),T.tint&&(E.color.tint=parseFloat(T.tint)),T.theme&&_.themeElements&&_.themeElements.clrScheme&&(E.color.rgb=rgb_tint(_.themeElements.clrScheme[E.color.theme].rgb,E.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":S=!0;break;case"</AlternateContent>":S=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":S=!0;break;case"</ext>":S=!1;break;default:if(x&&x.WTF&&!S)throw new Error("unrecognized "+T[0]+" in fonts")}})}function parse_numFmts(t,n,_){n.NumberFmt=[];for(var x=keys(table_fmt),E=0;E<x.length;++E)n.NumberFmt[x[E]]=table_fmt[x[E]];var S=t[0].match(tagregex);if(S)for(E=0;E<S.length;++E){var C=parsexmltag(S[E]);switch(strip_ns(C[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var T=unescapexml(utf8read(C.formatCode)),B=parseInt(C.numFmtId,10);if(n.NumberFmt[B]=T,B>0){if(B>392){for(B=392;B>60&&n.NumberFmt[B]!=null;--B);n.NumberFmt[B]=T}SSF__load(T,B)}}break;case"</numFmt>":break;default:if(_.WTF)throw new Error("unrecognized "+C[0]+" in numFmts")}}}function write_numFmts(t){var n=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(_){for(var x=_[0];x<=_[1];++x)t[x]!=null&&(n[n.length]=writextag("numFmt",null,{numFmtId:x,formatCode:escapexml(t[x])}))}),n.length===1?"":(n[n.length]="</numFmts>",n[0]=writextag("numFmts",null,{count:n.length-2}).replace("/>",">"),n.join(""))}var cellXF_uint=["numFmtId","fillId","fontId","borderId","xfId"],cellXF_bool=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function parse_cellXfs(t,n,_){n.CellXf=[];var x,E=!1;(t[0].match(tagregex)||[]).forEach(function(S){var C=parsexmltag(S),T=0;switch(strip_ns(C[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(x=C,delete x[0],T=0;T<cellXF_uint.length;++T)x[cellXF_uint[T]]&&(x[cellXF_uint[T]]=parseInt(x[cellXF_uint[T]],10));for(T=0;T<cellXF_bool.length;++T)x[cellXF_bool[T]]&&(x[cellXF_bool[T]]=parsexmlbool(x[cellXF_bool[T]]));if(n.NumberFmt&&x.numFmtId>392){for(T=392;T>60;--T)if(n.NumberFmt[x.numFmtId]==n.NumberFmt[T]){x.numFmtId=T;break}}n.CellXf.push(x);break;case"</xf>":break;case"<alignment":case"<alignment/>":var B={};C.vertical&&(B.vertical=C.vertical),C.horizontal&&(B.horizontal=C.horizontal),C.textRotation!=null&&(B.textRotation=C.textRotation),C.indent&&(B.indent=C.indent),C.wrapText&&(B.wrapText=parsexmlbool(C.wrapText)),x.alignment=B;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":E=!0;break;case"</AlternateContent>":E=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":E=!0;break;case"</ext>":E=!1;break;default:if(_&&_.WTF&&!E)throw new Error("unrecognized "+C[0]+" in cellXfs")}})}function write_cellXfs(t){var n=[];return n[n.length]=writextag("cellXfs",null),t.forEach(function(_){n[n.length]=writextag("xf",null,_)}),n[n.length]="</cellXfs>",n.length===2?"":(n[0]=writextag("cellXfs",null,{count:n.length-2}).replace("/>",">"),n.join(""))}var parse_sty_xml=function t(){var n=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,_=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,x=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,E=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,S=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(T,B,A){var I={};if(!T)return I;T=T.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var D;return(D=T.match(n))&&parse_numFmts(D,I,A),(D=T.match(E))&&parse_fonts(D,I,B,A),(D=T.match(x))&&parse_fills(D,I,B,A),(D=T.match(S))&&parse_borders(D,I,B,A),(D=T.match(_))&&parse_cellXfs(D,I,A),I}}();function write_sty_xml(t,n){var _=[XML_HEADER,writextag("styleSheet",null,{xmlns:XMLNS_main[0],"xmlns:vt":XMLNS.vt})],x;return t.SSF&&(x=write_numFmts(t.SSF))!=null&&(_[_.length]=x),_[_.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',_[_.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',_[_.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',_[_.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(x=write_cellXfs(n.cellXfs))&&(_[_.length]=x),_[_.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',_[_.length]='<dxfs count="0"/>',_[_.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',_.length>2&&(_[_.length]="</styleSheet>",_[1]=_[1].replace("/>",">")),_.join("")}function parse_BrtFmt(t,n){var _=t.read_shift(2),x=parse_XLWideString(t);return[_,x]}function write_BrtFmt(t,n,_){_||(_=new_buf(6+4*n.length)),_.write_shift(2,t),write_XLWideString(n,_);var x=_.length>_.l?_.slice(0,_.l):_;return _.l==null&&(_.l=_.length),x}function parse_BrtFont(t,n,_){var x={};x.sz=t.read_shift(2)/20;var E=parse_FontFlags(t);E.fItalic&&(x.italic=1),E.fCondense&&(x.condense=1),E.fExtend&&(x.extend=1),E.fShadow&&(x.shadow=1),E.fOutline&&(x.outline=1),E.fStrikeout&&(x.strike=1);var S=t.read_shift(2);switch(S===700&&(x.bold=1),t.read_shift(2)){case 1:x.vertAlign="superscript";break;case 2:x.vertAlign="subscript";break}var C=t.read_shift(1);C!=0&&(x.underline=C);var T=t.read_shift(1);T>0&&(x.family=T);var B=t.read_shift(1);switch(B>0&&(x.charset=B),t.l++,x.color=parse_BrtColor(t),t.read_shift(1)){case 1:x.scheme="major";break;case 2:x.scheme="minor";break}return x.name=parse_XLWideString(t),x}function write_BrtFont(t,n){n||(n=new_buf(25+4*32)),n.write_shift(2,t.sz*20),write_FontFlags(t,n),n.write_shift(2,t.bold?700:400);var _=0;t.vertAlign=="superscript"?_=1:t.vertAlign=="subscript"&&(_=2),n.write_shift(2,_),n.write_shift(1,t.underline||0),n.write_shift(1,t.family||0),n.write_shift(1,t.charset||0),n.write_shift(1,0),write_BrtColor(t.color,n);var x=0;return t.scheme=="major"&&(x=1),t.scheme=="minor"&&(x=2),n.write_shift(1,x),write_XLWideString(t.name,n),n.length>n.l?n.slice(0,n.l):n}var XLSBFillPTNames=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],rev_XLSBFillPTNames,parse_BrtFill=parsenoop;function write_BrtFill(t,n){n||(n=new_buf(4*3+8*7+16*1)),rev_XLSBFillPTNames||(rev_XLSBFillPTNames=evert(XLSBFillPTNames));var _=rev_XLSBFillPTNames[t.patternType];_==null&&(_=40),n.write_shift(4,_);var x=0;if(_!=40)for(write_BrtColor({auto:1},n),write_BrtColor({auto:1},n);x<12;++x)n.write_shift(4,0);else{for(;x<4;++x)n.write_shift(4,0);for(;x<12;++x)n.write_shift(4,0)}return n.length>n.l?n.slice(0,n.l):n}function parse_BrtXF(t,n){var _=t.l+n,x=t.read_shift(2),E=t.read_shift(2);return t.l=_,{ixfe:x,numFmtId:E}}function write_BrtXF(t,n,_){_||(_=new_buf(16)),_.write_shift(2,n||0),_.write_shift(2,t.numFmtId||0),_.write_shift(2,0),_.write_shift(2,0),_.write_shift(2,0),_.write_shift(1,0),_.write_shift(1,0);var x=0;return _.write_shift(1,x),_.write_shift(1,0),_.write_shift(1,0),_.write_shift(1,0),_}function write_Blxf(t,n){return n||(n=new_buf(10)),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(4,0),n}var parse_BrtBorder=parsenoop;function write_BrtBorder(t,n){return n||(n=new_buf(51)),n.write_shift(1,0),write_Blxf(null,n),write_Blxf(null,n),write_Blxf(null,n),write_Blxf(null,n),write_Blxf(null,n),n.length>n.l?n.slice(0,n.l):n}function write_BrtStyle(t,n){return n||(n=new_buf(12+4*10)),n.write_shift(4,t.xfId),n.write_shift(2,1),n.write_shift(1,+t.builtinId),n.write_shift(1,0),write_XLNullableWideString(t.name||"",n),n.length>n.l?n.slice(0,n.l):n}function write_BrtBeginTableStyles(t,n,_){var x=new_buf(2052);return x.write_shift(4,t),write_XLNullableWideString(n,x),write_XLNullableWideString(_,x),x.length>x.l?x.slice(0,x.l):x}function parse_sty_bin(t,n,_){var x={};x.NumberFmt=[];for(var E in table_fmt)x.NumberFmt[E]=table_fmt[E];x.CellXf=[],x.Fonts=[];var S=[],C=!1;return recordhopper(t,function(B,A,I){switch(I){case 44:x.NumberFmt[B[0]]=B[1],SSF__load(B[1],B[0]);break;case 43:x.Fonts.push(B),B.color.theme!=null&&n&&n.themeElements&&n.themeElements.clrScheme&&(B.color.rgb=rgb_tint(n.themeElements.clrScheme[B.color.theme].rgb,B.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:S[S.length-1]==617&&x.CellXf.push(B);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:C=!0;break;case 36:C=!1;break;case 37:S.push(I),C=!0;break;case 38:S.pop(),C=!1;break;default:if(A.T>0)S.push(I);else if(A.T<0)S.pop();else if(!C||_.WTF&&S[S.length-1]!=37)throw new Error("Unexpected record 0x"+I.toString(16))}}),x}function write_FMTS_bin(t,n){if(n){var _=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(x){for(var E=x[0];E<=x[1];++E)n[E]!=null&&++_}),_!=0&&(write_record(t,615,write_UInt32LE(_)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(x){for(var E=x[0];E<=x[1];++E)n[E]!=null&&write_record(t,44,write_BrtFmt(E,n[E]))}),write_record(t,616))}}function write_FONTS_bin(t){var n=1;write_record(t,611,write_UInt32LE(n)),write_record(t,43,write_BrtFont({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),write_record(t,612)}function write_FILLS_bin(t){var n=2;write_record(t,603,write_UInt32LE(n)),write_record(t,45,write_BrtFill({patternType:"none"})),write_record(t,45,write_BrtFill({patternType:"gray125"})),write_record(t,604)}function write_BORDERS_bin(t){var n=1;write_record(t,613,write_UInt32LE(n)),write_record(t,46,write_BrtBorder()),write_record(t,614)}function write_CELLSTYLEXFS_bin(t){var n=1;write_record(t,626,write_UInt32LE(n)),write_record(t,47,write_BrtXF({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),write_record(t,627)}function write_CELLXFS_bin(t,n){write_record(t,617,write_UInt32LE(n.length)),n.forEach(function(_){write_record(t,47,write_BrtXF(_,0))}),write_record(t,618)}function write_STYLES_bin(t){var n=1;write_record(t,619,write_UInt32LE(n)),write_record(t,48,write_BrtStyle({xfId:0,builtinId:0,name:"Normal"})),write_record(t,620)}function write_DXFS_bin(t){var n=0;write_record(t,505,write_UInt32LE(n)),write_record(t,506)}function write_TABLESTYLES_bin(t){var n=0;write_record(t,508,write_BrtBeginTableStyles(n,"TableStyleMedium9","PivotStyleMedium4")),write_record(t,509)}function write_sty_bin(t,n){var _=buf_array();return write_record(_,278),write_FMTS_bin(_,t.SSF),write_FONTS_bin(_),write_FILLS_bin(_),write_BORDERS_bin(_),write_CELLSTYLEXFS_bin(_),write_CELLXFS_bin(_,n.cellXfs),write_STYLES_bin(_),write_DXFS_bin(_),write_TABLESTYLES_bin(_),write_record(_,279),_.end()}var XLSXThemeClrScheme=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function parse_clrScheme(t,n,_){n.themeElements.clrScheme=[];var x={};(t[0].match(tagregex)||[]).forEach(function(E){var S=parsexmltag(E);switch(S[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":x.rgb=S.val;break;case"<a:sysClr":x.rgb=S.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":S[0].charAt(1)==="/"?(n.themeElements.clrScheme[XLSXThemeClrScheme.indexOf(S[0])]=x,x={}):x.name=S[0].slice(3,S[0].length-1);break;default:if(_&&_.WTF)throw new Error("Unrecognized "+S[0]+" in clrScheme")}})}function parse_fontScheme(){}function parse_fmtScheme(){}var clrsregex=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,fntsregex=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,fmtsregex=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function parse_themeElements(t,n,_){n.themeElements={};var x;[["clrScheme",clrsregex,parse_clrScheme],["fontScheme",fntsregex,parse_fontScheme],["fmtScheme",fmtsregex,parse_fmtScheme]].forEach(function(E){if(!(x=t.match(E[1])))throw new Error(E[0]+" not found in themeElements");E[2](x,n,_)})}var themeltregex=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function parse_theme_xml(t,n){(!t||t.length===0)&&(t=write_theme());var _,x={};if(!(_=t.match(themeltregex)))throw new Error("themeElements not found in theme");return parse_themeElements(_[0],x,n),x.raw=t,x}function write_theme(t,n){if(n&&n.themeXLSX)return n.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var _=[XML_HEADER];return _[_.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',_[_.length]="<a:themeElements>",_[_.length]='<a:clrScheme name="Office">',_[_.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',_[_.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',_[_.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',_[_.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',_[_.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',_[_.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',_[_.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',_[_.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',_[_.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',_[_.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',_[_.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',_[_.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',_[_.length]="</a:clrScheme>",_[_.length]='<a:fontScheme name="Office">',_[_.length]="<a:majorFont>",_[_.length]='<a:latin typeface="Cambria"/>',_[_.length]='<a:ea typeface=""/>',_[_.length]='<a:cs typeface=""/>',_[_.length]='<a:font script="Jpan" typeface=" "/>',_[_.length]='<a:font script="Hang" typeface=" "/>',_[_.length]='<a:font script="Hans" typeface=""/>',_[_.length]='<a:font script="Hant" typeface=""/>',_[_.length]='<a:font script="Arab" typeface="Times New Roman"/>',_[_.length]='<a:font script="Hebr" typeface="Times New Roman"/>',_[_.length]='<a:font script="Thai" typeface="Tahoma"/>',_[_.length]='<a:font script="Ethi" typeface="Nyala"/>',_[_.length]='<a:font script="Beng" typeface="Vrinda"/>',_[_.length]='<a:font script="Gujr" typeface="Shruti"/>',_[_.length]='<a:font script="Khmr" typeface="MoolBoran"/>',_[_.length]='<a:font script="Knda" typeface="Tunga"/>',_[_.length]='<a:font script="Guru" typeface="Raavi"/>',_[_.length]='<a:font script="Cans" typeface="Euphemia"/>',_[_.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',_[_.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',_[_.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',_[_.length]='<a:font script="Thaa" typeface="MV Boli"/>',_[_.length]='<a:font script="Deva" typeface="Mangal"/>',_[_.length]='<a:font script="Telu" typeface="Gautami"/>',_[_.length]='<a:font script="Taml" typeface="Latha"/>',_[_.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',_[_.length]='<a:font script="Orya" typeface="Kalinga"/>',_[_.length]='<a:font script="Mlym" typeface="Kartika"/>',_[_.length]='<a:font script="Laoo" typeface="DokChampa"/>',_[_.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',_[_.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',_[_.length]='<a:font script="Viet" typeface="Times New Roman"/>',_[_.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',_[_.length]='<a:font script="Geor" typeface="Sylfaen"/>',_[_.length]="</a:majorFont>",_[_.length]="<a:minorFont>",_[_.length]='<a:latin typeface="Calibri"/>',_[_.length]='<a:ea typeface=""/>',_[_.length]='<a:cs typeface=""/>',_[_.length]='<a:font script="Jpan" typeface=" "/>',_[_.length]='<a:font script="Hang" typeface=" "/>',_[_.length]='<a:font script="Hans" typeface=""/>',_[_.length]='<a:font script="Hant" typeface=""/>',_[_.length]='<a:font script="Arab" typeface="Arial"/>',_[_.length]='<a:font script="Hebr" typeface="Arial"/>',_[_.length]='<a:font script="Thai" typeface="Tahoma"/>',_[_.length]='<a:font script="Ethi" typeface="Nyala"/>',_[_.length]='<a:font script="Beng" typeface="Vrinda"/>',_[_.length]='<a:font script="Gujr" typeface="Shruti"/>',_[_.length]='<a:font script="Khmr" typeface="DaunPenh"/>',_[_.length]='<a:font script="Knda" typeface="Tunga"/>',_[_.length]='<a:font script="Guru" typeface="Raavi"/>',_[_.length]='<a:font script="Cans" typeface="Euphemia"/>',_[_.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',_[_.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',_[_.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',_[_.length]='<a:font script="Thaa" typeface="MV Boli"/>',_[_.length]='<a:font script="Deva" typeface="Mangal"/>',_[_.length]='<a:font script="Telu" typeface="Gautami"/>',_[_.length]='<a:font script="Taml" typeface="Latha"/>',_[_.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',_[_.length]='<a:font script="Orya" typeface="Kalinga"/>',_[_.length]='<a:font script="Mlym" typeface="Kartika"/>',_[_.length]='<a:font script="Laoo" typeface="DokChampa"/>',_[_.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',_[_.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',_[_.length]='<a:font script="Viet" typeface="Arial"/>',_[_.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',_[_.length]='<a:font script="Geor" typeface="Sylfaen"/>',_[_.length]="</a:minorFont>",_[_.length]="</a:fontScheme>",_[_.length]='<a:fmtScheme name="Office">',_[_.length]="<a:fillStyleLst>",_[_.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',_[_.length]='<a:gradFill rotWithShape="1">',_[_.length]="<a:gsLst>",_[_.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',_[_.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',_[_.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',_[_.length]="</a:gsLst>",_[_.length]='<a:lin ang="16200000" scaled="1"/>',_[_.length]="</a:gradFill>",_[_.length]='<a:gradFill rotWithShape="1">',_[_.length]="<a:gsLst>",_[_.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',_[_.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',_[_.length]="</a:gsLst>",_[_.length]='<a:lin ang="16200000" scaled="0"/>',_[_.length]="</a:gradFill>",_[_.length]="</a:fillStyleLst>",_[_.length]="<a:lnStyleLst>",_[_.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',_[_.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',_[_.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',_[_.length]="</a:lnStyleLst>",_[_.length]="<a:effectStyleLst>",_[_.length]="<a:effectStyle>",_[_.length]="<a:effectLst>",_[_.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',_[_.length]="</a:effectLst>",_[_.length]="</a:effectStyle>",_[_.length]="<a:effectStyle>",_[_.length]="<a:effectLst>",_[_.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',_[_.length]="</a:effectLst>",_[_.length]="</a:effectStyle>",_[_.length]="<a:effectStyle>",_[_.length]="<a:effectLst>",_[_.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',_[_.length]="</a:effectLst>",_[_.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',_[_.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',_[_.length]="</a:effectStyle>",_[_.length]="</a:effectStyleLst>",_[_.length]="<a:bgFillStyleLst>",_[_.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',_[_.length]='<a:gradFill rotWithShape="1">',_[_.length]="<a:gsLst>",_[_.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',_[_.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',_[_.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',_[_.length]="</a:gsLst>",_[_.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',_[_.length]="</a:gradFill>",_[_.length]='<a:gradFill rotWithShape="1">',_[_.length]="<a:gsLst>",_[_.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',_[_.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',_[_.length]="</a:gsLst>",_[_.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',_[_.length]="</a:gradFill>",_[_.length]="</a:bgFillStyleLst>",_[_.length]="</a:fmtScheme>",_[_.length]="</a:themeElements>",_[_.length]="<a:objectDefaults>",_[_.length]="<a:spDef>",_[_.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',_[_.length]="</a:spDef>",_[_.length]="<a:lnDef>",_[_.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',_[_.length]="</a:lnDef>",_[_.length]="</a:objectDefaults>",_[_.length]="<a:extraClrSchemeLst/>",_[_.length]="</a:theme>",_.join("")}function parse_Theme(t,n,_){var x=t.l+n,E=t.read_shift(4);if(E!==124226){if(!_.cellStyles){t.l=x;return}var S=t.slice(t.l);t.l=x;var C;try{C=zip_read(S,{type:"array"})}catch{return}var T=getzipstr(C,"theme/theme/theme1.xml",!0);if(T)return parse_theme_xml(T,_)}}function parse_ColorTheme(t){return t.read_shift(4)}function parse_FullColorExt(t){var n={};switch(n.xclrType=t.read_shift(2),n.nTintShade=t.read_shift(2),n.xclrType){case 0:t.l+=4;break;case 1:n.xclrValue=parse_IcvXF(t,4);break;case 2:n.xclrValue=parse_LongRGBA(t);break;case 3:n.xclrValue=parse_ColorTheme(t);break;case 4:t.l+=4;break}return t.l+=8,n}function parse_IcvXF(t,n){return parsenoop(t,n)}function parse_XFExtGradient(t,n){return parsenoop(t,n)}function parse_ExtProp(t){var n=t.read_shift(2),_=t.read_shift(2)-4,x=[n];switch(n){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:x[1]=parse_FullColorExt(t);break;case 6:x[1]=parse_XFExtGradient(t,_);break;case 14:case 15:x[1]=t.read_shift(_===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+n+" "+_)}return x}function parse_XFExt(t,n){var _=t.l+n;t.l+=2;var x=t.read_shift(2);t.l+=2;for(var E=t.read_shift(2),S=[];E-- >0;)S.push(parse_ExtProp(t,_-t.l));return{ixfe:x,ext:S}}function update_xfext(t,n){n.forEach(function(_){switch(_[0]){}})}function parse_BrtMdtinfo(t,n){return{flags:t.read_shift(4),version:t.read_shift(4),name:parse_XLWideString(t)}}function write_BrtMdtinfo(t){var n=new_buf(12+2*t.name.length);return n.write_shift(4,t.flags),n.write_shift(4,t.version),write_XLWideString(t.name,n),n.slice(0,n.l)}function parse_BrtMdb(t){for(var n=[],_=t.read_shift(4);_-- >0;)n.push([t.read_shift(4),t.read_shift(4)]);return n}function write_BrtMdb(t){var n=new_buf(4+8*t.length);n.write_shift(4,t.length);for(var _=0;_<t.length;++_)n.write_shift(4,t[_][0]),n.write_shift(4,t[_][1]);return n}function write_BrtBeginEsfmd(t,n){var _=new_buf(8+2*n.length);return _.write_shift(4,t),write_XLWideString(n,_),_.slice(0,_.l)}function parse_BrtBeginEsmdb(t){return t.l+=4,t.read_shift(4)!=0}function write_BrtBeginEsmdb(t,n){var _=new_buf(8);return _.write_shift(4,t),_.write_shift(4,n?1:0),_}function parse_xlmeta_bin(t,n,_){var x={Types:[],Cell:[],Value:[]},E=_||{},S=[],C=!1,T=2;return recordhopper(t,function(B,A,I){switch(I){case 335:x.Types.push({name:B.name});break;case 51:B.forEach(function(D){T==1?x.Cell.push({type:x.Types[D[0]-1].name,index:D[1]}):T==0&&x.Value.push({type:x.Types[D[0]-1].name,index:D[1]})});break;case 337:T=B?1:0;break;case 338:T=2;break;case 35:S.push(I),C=!0;break;case 36:S.pop(),C=!1;break;default:if(!A.T){if(!C||E.WTF&&S[S.length-1]!=35)throw new Error("Unexpected record 0x"+I.toString(16))}}}),x}function write_xlmeta_bin(){var t=buf_array();return write_record(t,332),write_record(t,334,write_UInt32LE(1)),write_record(t,335,write_BrtMdtinfo({name:"XLDAPR",version:12e4,flags:3496657072})),write_record(t,336),write_record(t,339,write_BrtBeginEsfmd(1,"XLDAPR")),write_record(t,52),write_record(t,35,write_UInt32LE(514)),write_record(t,4096,write_UInt32LE(0)),write_record(t,4097,writeuint16(1)),write_record(t,36),write_record(t,53),write_record(t,340),write_record(t,337,write_BrtBeginEsmdb(1,!0)),write_record(t,51,write_BrtMdb([[1,0]])),write_record(t,338),write_record(t,333),t.end()}function parse_xlmeta_xml(t,n,_){var x={Types:[],Cell:[],Value:[]};if(!t)return x;var E=!1,S=2,C;return t.replace(tagregex,function(T){var B=parsexmltag(T);switch(strip_ns(B[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":x.Types.push({name:B.name});break;case"</metadataType>":break;case"<futureMetadata":for(var A=0;A<x.Types.length;++A)x.Types[A].name==B.name&&(C=x.Types[A]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":S==1?x.Cell.push({type:x.Types[B.t-1].name,index:+B.v}):S==0&&x.Value.push({type:x.Types[B.t-1].name,index:+B.v});break;case"</rc>":break;case"<cellMetadata":S=1;break;case"</cellMetadata>":S=2;break;case"<valueMetadata":S=0;break;case"</valueMetadata>":S=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":E=!0;break;case"</ext>":E=!1;break;case"<rvb":if(!C)break;C.offsets||(C.offsets=[]),C.offsets.push(+B.i);break;default:if(!E&&_?.WTF)throw new Error("unrecognized "+B[0]+" in metadata")}return T}),x}function write_xlmeta_xml(){var t=[XML_HEADER];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function parse_cc_xml(t){var n=[];if(!t)return n;var _=1;return(t.match(tagregex)||[]).forEach(function(x){var E=parsexmltag(x);switch(E[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete E[0],E.i?_=E.i:E.i=_,n.push(E);break}}),n}function parse_BrtCalcChainItem$(t){var n={};n.i=t.read_shift(4);var _={};_.r=t.read_shift(4),_.c=t.read_shift(4),n.r=encode_cell(_);var x=t.read_shift(1);return x&2&&(n.l="1"),x&8&&(n.a="1"),n}function parse_cc_bin(t,n,_){var x=[];return recordhopper(t,function(S,C,T){switch(T){case 63:x.push(S);break;default:if(!C.T)throw new Error("Unexpected record 0x"+T.toString(16))}}),x}function parse_xlink_xml(){}function parse_xlink_bin(t,n,_,x){if(!t)return t;var E=x||{},S=!1;recordhopper(t,function(T,B,A){switch(A){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:S=!0;break;case 36:S=!1;break;default:if(!B.T){if(!S||E.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}},E)}function parse_drawing(t,n){if(!t)return"??";var _=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return n["!id"][_].Target}function write_vml(t,n){var _=[21600,21600],x=["m0,0l0",_[1],_[0],_[1],_[0],"0xe"].join(","),E=[writextag("xml",null,{"xmlns:v":XLMLNS.v,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:mv":XLMLNS.mv}).replace(/\/>/,">"),writextag("o:shapelayout",writextag("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"})],S=65536*t,C=n||[];return C.length>0&&E.push(writextag("v:shapetype",[writextag("v:stroke",null,{joinstyle:"miter"}),writextag("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202",coordsize:_.join(","),"o:spt":202,path:x})),C.forEach(function(T){++S,E.push(write_vml_comment(T,S))}),E.push("</xml>"),E.join("")}function write_vml_comment(t,n){var _=decode_cell(t[0]),x={color2:"#BEFF82",type:"gradient"};x.type=="gradient"&&(x.angle="-180");var E=x.type=="gradient"?writextag("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,S=writextag("v:fill",E,x),C={on:"t",obscured:"t"};return["<v:shape"+wxt_helper({id:"_x0000_s"+n,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(t[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",S,writextag("v:shadow",null,C),writextag("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",writetag("x:Anchor",[_.c+1,0,_.r+1,0,_.c+3,20,_.r+5,20].join(",")),writetag("x:AutoFill","False"),writetag("x:Row",String(_.r)),writetag("x:Column",String(_.c)),t[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"].join("")}function sheet_insert_comments(t,n,_,x){var E=t["!data"]!=null,S;n.forEach(function(C){var T=decode_cell(C.ref);if(E?(t["!data"][T.r]||(t["!data"][T.r]=[]),S=t["!data"][T.r][T.c]):S=t[C.ref],!S){S={t:"z"},E?t["!data"][T.r][T.c]=S:t[C.ref]=S;var B=safe_decode_range(t["!ref"]||"BDWGO1000001:A1");B.s.r>T.r&&(B.s.r=T.r),B.e.r<T.r&&(B.e.r=T.r),B.s.c>T.c&&(B.s.c=T.c),B.e.c<T.c&&(B.e.c=T.c);var A=encode_range(B);t["!ref"]=A}S.c||(S.c=[]);var I={a:C.author,t:C.t,r:C.r,T:_};C.h&&(I.h=C.h);for(var D=S.c.length-1;D>=0;--D){if(!_&&S.c[D].T)return;_&&!S.c[D].T&&S.c.splice(D,1)}if(_&&x){for(D=0;D<x.length;++D)if(I.a==x[D].id){I.a=x[D].name||I.a;break}}S.c.push(I)})}function parse_comments_xml(t,n){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var _=[],x=[],E=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);E&&E[1]&&E[1].split(/<\/\w*:?author>/).forEach(function(C){if(!(C===""||C.trim()==="")){var T=C.match(/<(?:\w+:)?author[^>]*>(.*)/);T&&_.push(T[1])}});var S=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return S&&S[1]&&S[1].split(/<\/\w*:?comment>/).forEach(function(C){if(!(C===""||C.trim()==="")){var T=C.match(/<(?:\w+:)?comment[^>]*>/);if(T){var B=parsexmltag(T[0]),A={author:B.authorId&&_[B.authorId]||"sheetjsghost",ref:B.ref,guid:B.guid},I=decode_cell(B.ref);if(!(n.sheetRows&&n.sheetRows<=I.r)){var D=C.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),M=!!D&&!!D[1]&&parse_si(D[1])||{r:"",t:"",h:""};A.r=M.r,M.r=="<t></t>"&&(M.t=M.h=""),A.t=(M.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),n.cellHTML&&(A.h=M.h),x.push(A)}}}}),x}function write_comments_xml(t){var n=[XML_HEADER,writextag("comments",null,{xmlns:XMLNS_main[0]})],_=[];return n.push("<authors>"),t.forEach(function(x){x[1].forEach(function(E){var S=escapexml(E.a);_.indexOf(S)==-1&&(_.push(S),n.push("<author>"+S+"</author>")),E.T&&E.ID&&_.indexOf("tc="+E.ID)==-1&&(_.push("tc="+E.ID),n.push("<author>tc="+E.ID+"</author>"))})}),_.length==0&&(_.push("SheetJ5"),n.push("<author>SheetJ5</author>")),n.push("</authors>"),n.push("<commentList>"),t.forEach(function(x){var E=0,S=[],C=0;if(x[1][0]&&x[1][0].T&&x[1][0].ID&&(E=_.indexOf("tc="+x[1][0].ID)),x[1].forEach(function(A){A.a&&(E=_.indexOf(escapexml(A.a))),A.T&&++C,S.push(A.t==null?"":escapexml(A.t))}),C===0)x[1].forEach(function(A){n.push('<comment ref="'+x[0]+'" authorId="'+_.indexOf(escapexml(A.a))+'"><text>'),n.push(writetag("t",A.t==null?"":escapexml(A.t))),n.push("</text></comment>")});else{n.push('<comment ref="'+x[0]+'" authorId="'+E+'"><text>');for(var T=`Comment:
    `+S[0]+`
`,B=1;B<S.length;++B)T+=`Reply:
    `+S[B]+`
`;n.push(writetag("t",escapexml(T))),n.push("</text></comment>")}}),n.push("</commentList>"),n.length>2&&(n[n.length]="</comments>",n[1]=n[1].replace("/>",">")),n.join("")}function parse_tcmnt_xml(t,n){var _=[],x=!1,E={},S=0;return t.replace(tagregex,function(T,B){var A=parsexmltag(T);switch(strip_ns(A[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":E={author:A.personId,guid:A.id,ref:A.ref,T:1};break;case"</threadedComment>":E.t!=null&&_.push(E);break;case"<text>":case"<text":S=B+T.length;break;case"</text>":E.t=t.slice(S,B).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":x=!0;break;case"</mentions>":x=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":x=!0;break;case"</ext>":x=!1;break;default:if(!x&&n.WTF)throw new Error("unrecognized "+A[0]+" in threaded comments")}return T}),_}function write_tcmnt_xml(t,n,_){var x=[XML_HEADER,writextag("ThreadedComments",null,{xmlns:XMLNS.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(E){var S="";(E[1]||[]).forEach(function(C,T){if(!C.T){delete C.ID;return}C.a&&n.indexOf(C.a)==-1&&n.push(C.a);var B={ref:E[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+_.tcid++).slice(-12)+"}"};T==0?S=B.id:B.parentId=S,C.ID=B.id,C.a&&(B.personId="{54EE7950-7262-4200-6969-"+("000000000000"+n.indexOf(C.a)).slice(-12)+"}"),x.push(writextag("threadedComment",writetag("text",C.t||""),B))})}),x.push("</ThreadedComments>"),x.join("")}function parse_people_xml(t,n){var _=[],x=!1;return t.replace(tagregex,function(S){var C=parsexmltag(S);switch(strip_ns(C[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":_.push({name:C.displayname,id:C.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":x=!0;break;case"</ext>":x=!1;break;default:if(!x&&n.WTF)throw new Error("unrecognized "+C[0]+" in threaded comments")}return S}),_}function write_people_xml(t){var n=[XML_HEADER,writextag("personList",null,{xmlns:XMLNS.TCMNT,"xmlns:x":XMLNS_main[0]}).replace(/[\/]>/,">")];return t.forEach(function(_,x){n.push(writextag("person",null,{displayName:_,id:"{54EE7950-7262-4200-6969-"+("000000000000"+x).slice(-12)+"}",userId:_,providerId:"None"}))}),n.push("</personList>"),n.join("")}function parse_BrtBeginComment(t){var n={};n.iauthor=t.read_shift(4);var _=parse_UncheckedRfX(t);return n.rfx=_.s,n.ref=encode_cell(_.s),t.l+=16,n}function write_BrtBeginComment(t,n){return n==null&&(n=new_buf(36)),n.write_shift(4,t[1].iauthor),write_UncheckedRfX(t[0],n),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n}var parse_BrtCommentAuthor=parse_XLWideString;function write_BrtCommentAuthor(t){return write_XLWideString(t.slice(0,54))}function parse_comments_bin(t,n){var _=[],x=[],E={},S=!1;return recordhopper(t,function(T,B,A){switch(A){case 632:x.push(T);break;case 635:E=T;break;case 637:E.t=T.t,E.h=T.h,E.r=T.r;break;case 636:if(E.author=x[E.iauthor],delete E.iauthor,n.sheetRows&&E.rfx&&n.sheetRows<=E.rfx.r)break;E.t||(E.t=""),delete E.rfx,_.push(E);break;case 3072:break;case 35:S=!0;break;case 36:S=!1;break;case 37:break;case 38:break;default:if(!B.T){if(!S||n.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}}),_}function write_comments_bin(t){var n=buf_array(),_=[];return write_record(n,628),write_record(n,630),t.forEach(function(x){x[1].forEach(function(E){_.indexOf(E.a)>-1||(_.push(E.a.slice(0,54)),write_record(n,632,write_BrtCommentAuthor(E.a)))})}),write_record(n,631),write_record(n,633),t.forEach(function(x){x[1].forEach(function(E){E.iauthor=_.indexOf(E.a);var S={s:decode_cell(x[0]),e:decode_cell(x[0])};write_record(n,635,write_BrtBeginComment([S,E])),E.t&&E.t.length>0&&write_record(n,637,write_BrtCommentText(E)),write_record(n,636),delete E.iauthor})}),write_record(n,634),write_record(n,629),n.end()}var CT_VBA="application/vnd.ms-office.vbaProject";function make_vba_xls(t){var n=CFB.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(_,x){if(!(_.slice(-1)==="/"||!_.match(/_VBA_PROJECT_CUR/))){var E=_.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");CFB.utils.cfb_add(n,E,t.FileIndex[x].content)}}),CFB.write(n)}function fill_vba_xls(t,n){n.FullPaths.forEach(function(_,x){if(x!=0){var E=_.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");E.slice(-1)!=="/"&&CFB.utils.cfb_add(t,E,n.FileIndex[x].content)}})}var VBAFMTS=["xlsb","xlsm","xlam","biff8","xla"];function parse_ds_bin(){return{"!type":"dialog"}}function parse_ds_xml(){return{"!type":"dialog"}}function parse_ms_bin(){return{"!type":"macro"}}function parse_ms_xml(){return{"!type":"macro"}}var rc_to_a1=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,n={r:0,c:0};function _(x,E,S,C){var T=!1,B=!1;S.length==0?B=!0:S.charAt(0)=="["&&(B=!0,S=S.slice(1,-1)),C.length==0?T=!0:C.charAt(0)=="["&&(T=!0,C=C.slice(1,-1));var A=S.length>0?parseInt(S,10)|0:0,I=C.length>0?parseInt(C,10)|0:0;return T?I+=n.c:--I,B?A+=n.r:--A,E+(T?"":"$")+encode_col(I)+(B?"":"$")+encode_row(A)}return function(E,S){return n=S,E.replace(t,_)}}(),crefregex=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,a1_to_rc=function(){return function(n,_){return n.replace(crefregex,function(x,E,S,C,T,B){var A=decode_col(C)-(S?0:_.c),I=decode_row(B)-(T?0:_.r),D=T=="$"?I+1:I==0?"":"["+I+"]",M=S=="$"?A+1:A==0?"":"["+A+"]";return E+"R"+D+"C"+M})}}();function shift_formula_str(t,n){return t.replace(crefregex,function(_,x,E,S,C,T){return x+(E=="$"?E+S:encode_col(decode_col(S)+n.c))+(C=="$"?C+T:encode_row(decode_row(T)+n.r))})}function shift_formula_xlsx(t,n,_){var x=decode_range(n),E=x.s,S=decode_cell(_),C={r:S.r-E.r,c:S.c-E.c};return shift_formula_str(t,C)}function fuzzyfmla(t){return t.length!=1}function _xlfn(t){return t.replace(/_xlfn\./g,"")}function parseread1(t){t.l+=1}function parse_ColRelU(t,n){var _=t.read_shift(n==1?1:2);return[_&16383,_>>14&1,_>>15&1]}function parse_RgceArea(t,n,_){var x=2;if(_){if(_.biff>=2&&_.biff<=5)return parse_RgceArea_BIFF2(t);_.biff==12&&(x=4)}var E=t.read_shift(x),S=t.read_shift(x),C=parse_ColRelU(t,2),T=parse_ColRelU(t,2);return{s:{r:E,c:C[0],cRel:C[1],rRel:C[2]},e:{r:S,c:T[0],cRel:T[1],rRel:T[2]}}}function parse_RgceArea_BIFF2(t){var n=parse_ColRelU(t,2),_=parse_ColRelU(t,2),x=t.read_shift(1),E=t.read_shift(1);return{s:{r:n[0],c:x,cRel:n[1],rRel:n[2]},e:{r:_[0],c:E,cRel:_[1],rRel:_[2]}}}function parse_RgceAreaRel(t,n,_){if(_.biff<8)return parse_RgceArea_BIFF2(t);var x=t.read_shift(_.biff==12?4:2),E=t.read_shift(_.biff==12?4:2),S=parse_ColRelU(t,2),C=parse_ColRelU(t,2);return{s:{r:x,c:S[0],cRel:S[1],rRel:S[2]},e:{r:E,c:C[0],cRel:C[1],rRel:C[2]}}}function parse_RgceLoc(t,n,_){if(_&&_.biff>=2&&_.biff<=5)return parse_RgceLoc_BIFF2(t);var x=t.read_shift(_&&_.biff==12?4:2),E=parse_ColRelU(t,2);return{r:x,c:E[0],cRel:E[1],rRel:E[2]}}function parse_RgceLoc_BIFF2(t){var n=parse_ColRelU(t,2),_=t.read_shift(1);return{r:n[0],c:_,cRel:n[1],rRel:n[2]}}function parse_RgceElfLoc(t){var n=t.read_shift(2),_=t.read_shift(2);return{r:n,c:_&255,fQuoted:!!(_&16384),cRel:_>>15,rRel:_>>15}}function parse_RgceLocRel(t,n,_){var x=_&&_.biff?_.biff:8;if(x>=2&&x<=5)return parse_RgceLocRel_BIFF2(t);var E=t.read_shift(x>=12?4:2),S=t.read_shift(2),C=(S&16384)>>14,T=(S&32768)>>15;if(S&=16383,T==1)for(;E>524287;)E-=1048576;if(C==1)for(;S>8191;)S=S-16384;return{r:E,c:S,cRel:C,rRel:T}}function parse_RgceLocRel_BIFF2(t){var n=t.read_shift(2),_=t.read_shift(1),x=(n&32768)>>15,E=(n&16384)>>14;return n&=16383,x==1&&n>=8192&&(n=n-16384),E==1&&_>=128&&(_=_-256),{r:n,c:_,cRel:E,rRel:x}}function parse_PtgArea(t,n,_){var x=(t[t.l++]&96)>>5,E=parse_RgceArea(t,_.biff>=2&&_.biff<=5?6:8,_);return[x,E]}function parse_PtgArea3d(t,n,_){var x=(t[t.l++]&96)>>5,E=t.read_shift(2,"i"),S=8;if(_)switch(_.biff){case 5:t.l+=12,S=6;break;case 12:S=12;break}var C=parse_RgceArea(t,S,_);return[x,E,C]}function parse_PtgAreaErr(t,n,_){var x=(t[t.l++]&96)>>5;return t.l+=_&&_.biff>8?12:_.biff<8?6:8,[x]}function parse_PtgAreaErr3d(t,n,_){var x=(t[t.l++]&96)>>5,E=t.read_shift(2),S=8;if(_)switch(_.biff){case 5:t.l+=12,S=6;break;case 12:S=12;break}return t.l+=S,[x,E]}function parse_PtgAreaN(t,n,_){var x=(t[t.l++]&96)>>5,E=parse_RgceAreaRel(t,n-1,_);return[x,E]}function parse_PtgArray(t,n,_){var x=(t[t.l++]&96)>>5;return t.l+=_.biff==2?6:_.biff==12?14:7,[x]}function parse_PtgAttrBaxcel(t){var n=t[t.l+1]&1,_=1;return t.l+=4,[n,_]}function parse_PtgAttrChoose(t,n,_){t.l+=2;for(var x=t.read_shift(_&&_.biff==2?1:2),E=[],S=0;S<=x;++S)E.push(t.read_shift(_&&_.biff==2?1:2));return E}function parse_PtgAttrGoto(t,n,_){var x=t[t.l+1]&255?1:0;return t.l+=2,[x,t.read_shift(_&&_.biff==2?1:2)]}function parse_PtgAttrIf(t,n,_){var x=t[t.l+1]&255?1:0;return t.l+=2,[x,t.read_shift(_&&_.biff==2?1:2)]}function parse_PtgAttrIfError(t){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(2)]}function parse_PtgAttrSemi(t,n,_){var x=t[t.l+1]&255?1:0;return t.l+=_&&_.biff==2?3:4,[x]}function parse_PtgAttrSpaceType(t){var n=t.read_shift(1),_=t.read_shift(1);return[n,_]}function parse_PtgAttrSpace(t){return t.read_shift(2),parse_PtgAttrSpaceType(t)}function parse_PtgAttrSpaceSemi(t){return t.read_shift(2),parse_PtgAttrSpaceType(t)}function parse_PtgRef(t,n,_){var x=(t[t.l]&96)>>5;t.l+=1;var E=parse_RgceLoc(t,0,_);return[x,E]}function parse_PtgRefN(t,n,_){var x=(t[t.l]&96)>>5;t.l+=1;var E=parse_RgceLocRel(t,0,_);return[x,E]}function parse_PtgRef3d(t,n,_){var x=(t[t.l]&96)>>5;t.l+=1;var E=t.read_shift(2);_&&_.biff==5&&(t.l+=12);var S=parse_RgceLoc(t,0,_);return[x,E,S]}function parse_PtgFunc(t,n,_){var x=(t[t.l]&96)>>5;t.l+=1;var E=t.read_shift(_&&_.biff<=3?1:2);return[FtabArgc[E],Ftab[E],x]}function parse_PtgFuncVar(t,n,_){var x=t[t.l++],E=t.read_shift(1),S=_&&_.biff<=3?[x==88?-1:0,t.read_shift(1)]:parsetab(t);return[E,(S[0]===0?Ftab:Cetab)[S[1]]]}function parsetab(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function parse_PtgAttrSum(t,n,_){t.l+=_&&_.biff==2?3:4}function parse_PtgExp(t,n,_){if(t.l++,_&&_.biff==12)return[t.read_shift(4,"i"),0];var x=t.read_shift(2),E=t.read_shift(_&&_.biff==2?1:2);return[x,E]}function parse_PtgErr(t){return t.l++,BErr[t.read_shift(1)]}function parse_PtgInt(t){return t.l++,t.read_shift(2)}function parse_PtgBool(t){return t.l++,t.read_shift(1)!==0}function parse_PtgNum(t){return t.l++,parse_Xnum(t)}function parse_PtgStr(t,n,_){return t.l++,parse_ShortXLUnicodeString(t,n-1,_)}function parse_SerAr(t,n){var _=[t.read_shift(1)];if(n==12)switch(_[0]){case 2:_[0]=4;break;case 4:_[0]=16;break;case 0:_[0]=1;break;case 1:_[0]=2;break}switch(_[0]){case 4:_[1]=parsebool(t,1)?"TRUE":"FALSE",n!=12&&(t.l+=7);break;case 37:case 16:_[1]=BErr[t[t.l]],t.l+=n==12?4:8;break;case 0:t.l+=8;break;case 1:_[1]=parse_Xnum(t);break;case 2:_[1]=parse_XLUnicodeString2(t,0,{biff:n>0&&n<8?2:n});break;default:throw new Error("Bad SerAr: "+_[0])}return _}function parse_PtgExtraMem(t,n,_){for(var x=t.read_shift(_.biff==12?4:2),E=[],S=0;S!=x;++S)E.push((_.biff==12?parse_UncheckedRfX:parse_Ref8U)(t));return E}function parse_PtgExtraArray(t,n,_){var x=0,E=0;_.biff==12?(x=t.read_shift(4),E=t.read_shift(4)):(E=1+t.read_shift(1),x=1+t.read_shift(2)),_.biff>=2&&_.biff<8&&(--x,--E==0&&(E=256));for(var S=0,C=[];S!=x&&(C[S]=[]);++S)for(var T=0;T!=E;++T)C[S][T]=parse_SerAr(t,_.biff);return C}function parse_PtgName(t,n,_){var x=t.read_shift(1)>>>5&3,E=!_||_.biff>=8?4:2,S=t.read_shift(E);switch(_.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[x,0,S]}function parse_PtgNameX(t,n,_){if(_.biff==5)return parse_PtgNameX_BIFF5(t);var x=t.read_shift(1)>>>5&3,E=t.read_shift(2),S=t.read_shift(4);return[x,E,S]}function parse_PtgNameX_BIFF5(t){var n=t.read_shift(1)>>>5&3,_=t.read_shift(2,"i");t.l+=8;var x=t.read_shift(2);return t.l+=12,[n,_,x]}function parse_PtgMemArea(t,n,_){var x=t.read_shift(1)>>>5&3;t.l+=_&&_.biff==2?3:4;var E=t.read_shift(_&&_.biff==2?1:2);return[x,E]}function parse_PtgMemFunc(t,n,_){var x=t.read_shift(1)>>>5&3,E=t.read_shift(_&&_.biff==2?1:2);return[x,E]}function parse_PtgRefErr(t,n,_){var x=t.read_shift(1)>>>5&3;return t.l+=4,_.biff<8&&t.l--,_.biff==12&&(t.l+=2),[x]}function parse_PtgRefErr3d(t,n,_){var x=(t[t.l++]&96)>>5,E=t.read_shift(2),S=4;if(_)switch(_.biff){case 5:S=15;break;case 12:S=6;break}return t.l+=S,[x,E]}var parse_PtgMemErr=parsenoop,parse_PtgMemNoMem=parsenoop,parse_PtgTbl=parsenoop;function parse_PtgElfLoc(t,n,_){return t.l+=2,[parse_RgceElfLoc(t)]}function parse_PtgElfNoop(t){return t.l+=6,[]}var parse_PtgElfCol=parse_PtgElfLoc,parse_PtgElfColS=parse_PtgElfNoop,parse_PtgElfColSV=parse_PtgElfNoop,parse_PtgElfColV=parse_PtgElfLoc;function parse_PtgElfLel(t){return t.l+=2,[parseuint16(t),t.read_shift(2)&1]}var parse_PtgElfRadical=parse_PtgElfLoc,parse_PtgElfRadicalLel=parse_PtgElfLel,parse_PtgElfRadicalS=parse_PtgElfNoop,parse_PtgElfRw=parse_PtgElfLoc,parse_PtgElfRwV=parse_PtgElfLoc,PtgListRT=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function parse_PtgList(t){t.l+=2;var n=t.read_shift(2),_=t.read_shift(2),x=t.read_shift(4),E=t.read_shift(2),S=t.read_shift(2),C=PtgListRT[_>>2&31];return{ixti:n,coltype:_&3,rt:C,idx:x,c:E,C:S}}function parse_PtgSxName(t){return t.l+=2,[t.read_shift(4)]}function parse_PtgSheet(t,n,_){return t.l+=5,t.l+=2,t.l+=_.biff==2?1:4,["PTGSHEET"]}function parse_PtgEndSheet(t,n,_){return t.l+=_.biff==2?4:5,["PTGENDSHEET"]}function parse_PtgMemAreaN(t){var n=t.read_shift(1)>>>5&3,_=t.read_shift(2);return[n,_]}function parse_PtgMemNoMemN(t){var n=t.read_shift(1)>>>5&3,_=t.read_shift(2);return[n,_]}function parse_PtgAttrNoop(t){return t.l+=4,[0,0]}var PtgTypes={1:{n:"PtgExp",f:parse_PtgExp},2:{n:"PtgTbl",f:parse_PtgTbl},3:{n:"PtgAdd",f:parseread1},4:{n:"PtgSub",f:parseread1},5:{n:"PtgMul",f:parseread1},6:{n:"PtgDiv",f:parseread1},7:{n:"PtgPower",f:parseread1},8:{n:"PtgConcat",f:parseread1},9:{n:"PtgLt",f:parseread1},10:{n:"PtgLe",f:parseread1},11:{n:"PtgEq",f:parseread1},12:{n:"PtgGe",f:parseread1},13:{n:"PtgGt",f:parseread1},14:{n:"PtgNe",f:parseread1},15:{n:"PtgIsect",f:parseread1},16:{n:"PtgUnion",f:parseread1},17:{n:"PtgRange",f:parseread1},18:{n:"PtgUplus",f:parseread1},19:{n:"PtgUminus",f:parseread1},20:{n:"PtgPercent",f:parseread1},21:{n:"PtgParen",f:parseread1},22:{n:"PtgMissArg",f:parseread1},23:{n:"PtgStr",f:parse_PtgStr},26:{n:"PtgSheet",f:parse_PtgSheet},27:{n:"PtgEndSheet",f:parse_PtgEndSheet},28:{n:"PtgErr",f:parse_PtgErr},29:{n:"PtgBool",f:parse_PtgBool},30:{n:"PtgInt",f:parse_PtgInt},31:{n:"PtgNum",f:parse_PtgNum},32:{n:"PtgArray",f:parse_PtgArray},33:{n:"PtgFunc",f:parse_PtgFunc},34:{n:"PtgFuncVar",f:parse_PtgFuncVar},35:{n:"PtgName",f:parse_PtgName},36:{n:"PtgRef",f:parse_PtgRef},37:{n:"PtgArea",f:parse_PtgArea},38:{n:"PtgMemArea",f:parse_PtgMemArea},39:{n:"PtgMemErr",f:parse_PtgMemErr},40:{n:"PtgMemNoMem",f:parse_PtgMemNoMem},41:{n:"PtgMemFunc",f:parse_PtgMemFunc},42:{n:"PtgRefErr",f:parse_PtgRefErr},43:{n:"PtgAreaErr",f:parse_PtgAreaErr},44:{n:"PtgRefN",f:parse_PtgRefN},45:{n:"PtgAreaN",f:parse_PtgAreaN},46:{n:"PtgMemAreaN",f:parse_PtgMemAreaN},47:{n:"PtgMemNoMemN",f:parse_PtgMemNoMemN},57:{n:"PtgNameX",f:parse_PtgNameX},58:{n:"PtgRef3d",f:parse_PtgRef3d},59:{n:"PtgArea3d",f:parse_PtgArea3d},60:{n:"PtgRefErr3d",f:parse_PtgRefErr3d},61:{n:"PtgAreaErr3d",f:parse_PtgAreaErr3d},255:{}},PtgDupes={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ptg18={1:{n:"PtgElfLel",f:parse_PtgElfLel},2:{n:"PtgElfRw",f:parse_PtgElfRw},3:{n:"PtgElfCol",f:parse_PtgElfCol},6:{n:"PtgElfRwV",f:parse_PtgElfRwV},7:{n:"PtgElfColV",f:parse_PtgElfColV},10:{n:"PtgElfRadical",f:parse_PtgElfRadical},11:{n:"PtgElfRadicalS",f:parse_PtgElfRadicalS},13:{n:"PtgElfColS",f:parse_PtgElfColS},15:{n:"PtgElfColSV",f:parse_PtgElfColSV},16:{n:"PtgElfRadicalLel",f:parse_PtgElfRadicalLel},25:{n:"PtgList",f:parse_PtgList},29:{n:"PtgSxName",f:parse_PtgSxName},255:{}},Ptg19={0:{n:"PtgAttrNoop",f:parse_PtgAttrNoop},1:{n:"PtgAttrSemi",f:parse_PtgAttrSemi},2:{n:"PtgAttrIf",f:parse_PtgAttrIf},4:{n:"PtgAttrChoose",f:parse_PtgAttrChoose},8:{n:"PtgAttrGoto",f:parse_PtgAttrGoto},16:{n:"PtgAttrSum",f:parse_PtgAttrSum},32:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},33:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},64:{n:"PtgAttrSpace",f:parse_PtgAttrSpace},65:{n:"PtgAttrSpaceSemi",f:parse_PtgAttrSpaceSemi},128:{n:"PtgAttrIfError",f:parse_PtgAttrIfError},255:{}};function parse_RgbExtra(t,n,_,x){if(x.biff<8)return parsenoop(t,n);for(var E=t.l+n,S=[],C=0;C!==_.length;++C)switch(_[C][0]){case"PtgArray":_[C][1]=parse_PtgExtraArray(t,0,x),S.push(_[C][1]);break;case"PtgMemArea":_[C][2]=parse_PtgExtraMem(t,_[C][1],x),S.push(_[C][2]);break;case"PtgExp":x&&x.biff==12&&(_[C][1][1]=t.read_shift(4),S.push(_[C][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+_[C][0]}return n=E-t.l,n!==0&&S.push(parsenoop(t,n)),S}function parse_Rgce(t,n,_){for(var x=t.l+n,E,S,C=[];x!=t.l;)n=x-t.l,S=t[t.l],E=PtgTypes[S]||PtgTypes[PtgDupes[S]],(S===24||S===25)&&(E=(S===24?Ptg18:Ptg19)[t[t.l+1]]),!E||!E.f?parsenoop(t,n):C.push([E.n,E.f(t,n,_)]);return C}function stringify_array(t){for(var n=[],_=0;_<t.length;++_){for(var x=t[_],E=[],S=0;S<x.length;++S){var C=x[S];if(C)switch(C[0]){case 2:E.push('"'+C[1].replace(/"/g,'""')+'"');break;default:E.push(C[1])}else E.push("")}n.push(E.join(","))}return n.join(";")}var PtgBinOp={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function make_3d_range(t,n){var _=t.lastIndexOf("!"),x=n.lastIndexOf("!");return _==-1&&x==-1?t+":"+n:_>0&&x>0&&t.slice(0,_).toLowerCase()==n.slice(0,x).toLowerCase()?t+":"+n.slice(x+1):(console.error("Cannot hydrate range",t,n),t+":"+n)}function get_ixti_raw(t,n,_){if(!t)return"SH33TJSERR0";if(_.biff>8&&(!t.XTI||!t.XTI[n]))return t.SheetNames[n];if(!t.XTI)return"SH33TJSERR6";var x=t.XTI[n];if(_.biff<8)return n>1e4&&(n-=65536),n<0&&(n=-n),n==0?"":t.XTI[n-1];if(!x)return"SH33TJSERR1";var E="";if(_.biff>8)switch(t[x[0]][0]){case 357:return E=x[1]==-1?"#REF":t.SheetNames[x[1]],x[1]==x[2]?E:E+":"+t.SheetNames[x[2]];case 358:return _.SID!=null?t.SheetNames[_.SID]:"SH33TJSSAME"+t[x[0]][0];case 355:default:return"SH33TJSSRC"+t[x[0]][0]}switch(t[x[0]][0][0]){case 1025:return E=x[1]==-1?"#REF":t.SheetNames[x[1]]||"SH33TJSERR3",x[1]==x[2]?E:E+":"+t.SheetNames[x[2]];case 14849:return t[x[0]].slice(1).map(function(S){return S.Name}).join(";;");default:return t[x[0]][0][3]?(E=x[1]==-1?"#REF":t[x[0]][0][3][x[1]]||"SH33TJSERR4",x[1]==x[2]?E:E+":"+t[x[0]][0][3][x[2]]):"SH33TJSERR2"}}function get_ixti(t,n,_){var x=get_ixti_raw(t,n,_);return x=="#REF"?x:formula_quote_sheet_name(x,_)}function stringify_formula(t,n,_,x,E){var S=E&&E.biff||8,C={s:{c:0,r:0},e:{c:0,r:0}},T=[],B,A,I,D=0,M=0,V,L="";if(!t[0]||!t[0][0])return"";for(var F=-1,j="",U=0,H=t[0].length;U<H;++U){var Y=t[0][U];switch(Y[0]){case"PtgUminus":T.push("-"+T.pop());break;case"PtgUplus":T.push("+"+T.pop());break;case"PtgPercent":T.push(T.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(B=T.pop(),A=T.pop(),F>=0){switch(t[0][F][1][0]){case 0:j=fill(" ",t[0][F][1][1]);break;case 1:j=fill("\r",t[0][F][1][1]);break;default:if(j="",E.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][F][1][0])}A=A+j,F=-1}T.push(A+PtgBinOp[Y[0]]+B);break;case"PtgIsect":B=T.pop(),A=T.pop(),T.push(A+" "+B);break;case"PtgUnion":B=T.pop(),A=T.pop(),T.push(A+","+B);break;case"PtgRange":B=T.pop(),A=T.pop(),T.push(make_3d_range(A,B));break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":I=shift_cell_xls(Y[1][1],C,E),T.push(encode_cell_xls(I,S));break;case"PtgRefN":I=_?shift_cell_xls(Y[1][1],_,E):Y[1][1],T.push(encode_cell_xls(I,S));break;case"PtgRef3d":D=Y[1][1],I=shift_cell_xls(Y[1][2],C,E),L=get_ixti(x,D,E),T.push(L+"!"+encode_cell_xls(I,S));break;case"PtgFunc":case"PtgFuncVar":var Z=Y[1][0],ne=Y[1][1];Z||(Z=0),Z&=127;var re=Z==0?[]:T.slice(-Z);T.length-=Z,ne==="User"&&(ne=re.shift()),T.push(ne+"("+re.join(",")+")");break;case"PtgBool":T.push(Y[1]?"TRUE":"FALSE");break;case"PtgInt":T.push(Y[1]);break;case"PtgNum":T.push(String(Y[1]));break;case"PtgStr":T.push('"'+Y[1].replace(/"/g,'""')+'"');break;case"PtgErr":T.push(Y[1]);break;case"PtgAreaN":V=shift_range_xls(Y[1][1],_?{s:_}:C,E),T.push(encode_range_xls(V,E));break;case"PtgArea":V=shift_range_xls(Y[1][1],C,E),T.push(encode_range_xls(V,E));break;case"PtgArea3d":D=Y[1][1],V=Y[1][2],L=get_ixti(x,D,E),T.push(L+"!"+encode_range_xls(V,E));break;case"PtgAttrSum":T.push("SUM("+T.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":M=Y[1][2];var X=(x.names||[])[M-1]||(x[0]||[])[M],ce=X?X.Name:"SH33TJSNAME"+String(M);ce&&ce.slice(0,6)=="_xlfn."&&!E.xlfn&&(ce=ce.slice(6)),T.push(ce);break;case"PtgNameX":var ue=Y[1][1];M=Y[1][2];var _e;if(E.biff<=5)ue<0&&(ue=-ue),x[ue]&&(_e=x[ue][M]);else{var ye="";if(((x[ue]||[])[0]||[])[0]==14849||(((x[ue]||[])[0]||[])[0]==1025?x[ue][M]&&x[ue][M].itab>0&&(ye=x.SheetNames[x[ue][M].itab-1]+"!"):ye=x.SheetNames[M-1]+"!"),x[ue]&&x[ue][M])ye+=x[ue][M].Name;else if(x[0]&&x[0][M])ye+=x[0][M].Name;else{var ie=(get_ixti_raw(x,ue,E)||"").split(";;");ie[M-1]?ye=ie[M-1]:ye+="SH33TJSERRX"}T.push(ye);break}_e||(_e={Name:"SH33TJSERRY"}),T.push(_e.Name);break;case"PtgParen":var W="(",O=")";if(F>=0){switch(j="",t[0][F][1][0]){case 2:W=fill(" ",t[0][F][1][1])+W;break;case 3:W=fill("\r",t[0][F][1][1])+W;break;case 4:O=fill(" ",t[0][F][1][1])+O;break;case 5:O=fill("\r",t[0][F][1][1])+O;break;default:if(E.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][F][1][0])}F=-1}T.push(W+T.pop()+O);break;case"PtgRefErr":T.push("#REF!");break;case"PtgRefErr3d":T.push("#REF!");break;case"PtgExp":I={c:Y[1][1],r:Y[1][0]};var z={c:_.c,r:_.r};if(x.sharedf[encode_cell(I)]){var J=x.sharedf[encode_cell(I)];T.push(stringify_formula(J,C,z,x,E))}else{var ee=!1;for(B=0;B!=x.arrayf.length;++B)if(A=x.arrayf[B],!(I.c<A[0].s.c||I.c>A[0].e.c)&&!(I.r<A[0].s.r||I.r>A[0].e.r)){T.push(stringify_formula(A[1],C,z,x,E)),ee=!0;break}ee||T.push(Y[1])}break;case"PtgArray":T.push("{"+stringify_array(Y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":F=U;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":T.push("");break;case"PtgAreaErr":T.push("#REF!");break;case"PtgAreaErr3d":T.push("#REF!");break;case"PtgList":T.push("Table"+Y[1].idx+"[#"+Y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(Y));default:throw new Error("Unrecognized Formula Token: "+String(Y))}var ae=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(E.biff!=3&&F>=0&&ae.indexOf(t[0][U][0])==-1){Y=t[0][F];var oe=!0;switch(Y[1][0]){case 4:oe=!1;case 0:j=fill(" ",Y[1][1]);break;case 5:oe=!1;case 1:j=fill("\r",Y[1][1]);break;default:if(j="",E.WTF)throw new Error("Unexpected PtgAttrSpaceType "+Y[1][0])}T.push((oe?j:"")+T.pop()+(oe?"":j)),F=-1}}if(T.length>1&&E.WTF)throw new Error("bad formula stack");return T[0]=="TRUE"?!0:T[0]=="FALSE"?!1:T[0]}function parse_ArrayParsedFormula(t,n,_){var x=t.l+n,E=_.biff==2?1:2,S,C=t.read_shift(E);if(C==65535)return[[],parsenoop(t,n-2)];var T=parse_Rgce(t,C,_);return n!==C+E&&(S=parse_RgbExtra(t,n-C-E,T,_)),t.l=x,[T,S]}function parse_XLSCellParsedFormula(t,n,_){var x=t.l+n,E=_.biff==2?1:2,S,C=t.read_shift(E);if(C==65535)return[[],parsenoop(t,n-2)];var T=parse_Rgce(t,C,_);return n!==C+E&&(S=parse_RgbExtra(t,n-C-E,T,_)),t.l=x,[T,S]}function parse_NameParsedFormula(t,n,_,x){var E=t.l+n,S=parse_Rgce(t,x,_),C;return E!==t.l&&(C=parse_RgbExtra(t,E-t.l,S,_)),[S,C]}function parse_SharedParsedFormula(t,n,_){var x=t.l+n,E,S=t.read_shift(2),C=parse_Rgce(t,S,_);return S==65535?[[],parsenoop(t,n-2)]:(n!==S+2&&(E=parse_RgbExtra(t,x-S-2,C,_)),[C,E])}function parse_FormulaValue(t){var n;if(__readUInt16LE(t,t.l+6)!==65535)return[parse_Xnum(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return n=t[t.l+2]===1,t.l+=8,[n,"b"];case 2:return n=t[t.l+2],t.l+=8,[n,"e"];case 3:return t.l+=8,["","s"]}return[]}function write_FormulaValue(t){if(t==null){var n=new_buf(8);return n.write_shift(1,3),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,65535),n}else if(typeof t=="number")return write_Xnum(t);return write_Xnum(0)}function parse_Formula(t,n,_){var x=t.l+n,E=parse_XLSCell(t);_.biff==2&&++t.l;var S=parse_FormulaValue(t),C=t.read_shift(1);_.biff!=2&&(t.read_shift(1),_.biff>=5&&t.read_shift(4));var T=parse_XLSCellParsedFormula(t,x-t.l,_);return{cell:E,val:S[0],formula:T,shared:C>>3&1,tt:S[1]}}function write_Formula(t,n,_,x,E){var S=write_XLSCell(n,_,E),C=write_FormulaValue(t.v),T=new_buf(6),B=33;T.write_shift(2,B),T.write_shift(4,0);for(var A=new_buf(t.bf.length),I=0;I<t.bf.length;++I)A[I]=t.bf[I];var D=bconcat([S,C,T,A]);return D}function parse_XLSBParsedFormula(t,n,_){var x=t.read_shift(4),E=parse_Rgce(t,x,_),S=t.read_shift(4),C=S>0?parse_RgbExtra(t,S,E,_):null;return[E,C]}var parse_XLSBArrayParsedFormula=parse_XLSBParsedFormula,parse_XLSBCellParsedFormula=parse_XLSBParsedFormula,parse_XLSBNameParsedFormula=parse_XLSBParsedFormula,parse_XLSBSharedParsedFormula=parse_XLSBParsedFormula;function write_XLSBFormulaNum(t){if((t|0)==t&&t<Math.pow(2,16)&&t>=0){var n=new_buf(11);return n.write_shift(4,3),n.write_shift(1,30),n.write_shift(2,t),n.write_shift(4,0),n}var _=new_buf(17);return _.write_shift(4,11),_.write_shift(1,31),_.write_shift(8,t),_.write_shift(4,0),_}function write_XLSBFormulaErr(t){var n=new_buf(10);return n.write_shift(4,2),n.write_shift(1,28),n.write_shift(1,t),n.write_shift(4,0),n}function write_XLSBFormulaBool(t){var n=new_buf(10);return n.write_shift(4,2),n.write_shift(1,29),n.write_shift(1,t?1:0),n.write_shift(4,0),n}function write_XLSBFormulaStr(t){var n=new_buf(7);n.write_shift(4,3+2*t.length),n.write_shift(1,23),n.write_shift(2,t.length);var _=new_buf(2*t.length);_.write_shift(2*t.length,t,"utf16le");var x=new_buf(4);return x.write_shift(4,0),bconcat([n,_,x])}function write_XLSBFormulaRef(t){var n=decode_cell(t),_=new_buf(15);return _.write_shift(4,7),_.write_shift(1,36),_.write_shift(4,n.r),_.write_shift(2,n.c|(t.charAt(0)=="$"?0:1)<<14|(t.match(/\$\d/)?0:1)<<15),_.write_shift(4,0),_}function write_XLSBFormulaRef3D(t,n){var _=t.lastIndexOf("!"),x=t.slice(0,_);t=t.slice(_+1);var E=decode_cell(t);x.charAt(0)=="'"&&(x=x.slice(1,-1).replace(/''/g,"'"));var S=new_buf(17);return S.write_shift(4,9),S.write_shift(1,58),S.write_shift(2,2+n.SheetNames.map(function(C){return C.toLowerCase()}).indexOf(x.toLowerCase())),S.write_shift(4,E.r),S.write_shift(2,E.c|(t.charAt(0)=="$"?0:1)<<14|(t.match(/\$\d/)?0:1)<<15),S.write_shift(4,0),S}function write_XLSBFormulaRefErr3D(t,n){var _=t.lastIndexOf("!"),x=t.slice(0,_);t=t.slice(_+1),x.charAt(0)=="'"&&(x=x.slice(1,-1).replace(/''/g,"'"));var E=new_buf(17);return E.write_shift(4,9),E.write_shift(1,60),E.write_shift(2,2+n.SheetNames.map(function(S){return S.toLowerCase()}).indexOf(x.toLowerCase())),E.write_shift(4,0),E.write_shift(2,0),E.write_shift(4,0),E}function write_XLSBFormulaRange(t){var n=t.split(":"),_=n[0],x=new_buf(23);x.write_shift(4,15),_=n[0];var E=decode_cell(_);return x.write_shift(1,36),x.write_shift(4,E.r),x.write_shift(2,E.c|(_.charAt(0)=="$"?0:1)<<14|(_.match(/\$\d/)?0:1)<<15),x.write_shift(4,0),_=n[1],E=decode_cell(_),x.write_shift(1,36),x.write_shift(4,E.r),x.write_shift(2,E.c|(_.charAt(0)=="$"?0:1)<<14|(_.match(/\$\d/)?0:1)<<15),x.write_shift(4,0),x.write_shift(1,17),x.write_shift(4,0),x}function write_XLSBFormulaRangeWS(t,n){var _=t.lastIndexOf("!"),x=t.slice(0,_);t=t.slice(_+1),x.charAt(0)=="'"&&(x=x.slice(1,-1).replace(/''/g,"'"));var E=t.split(":");C=E[0];var S=new_buf(27);S.write_shift(4,19);var C=E[0],T=decode_cell(C);return S.write_shift(1,58),S.write_shift(2,2+n.SheetNames.map(function(B){return B.toLowerCase()}).indexOf(x.toLowerCase())),S.write_shift(4,T.r),S.write_shift(2,T.c|(C.charAt(0)=="$"?0:1)<<14|(C.match(/\$\d/)?0:1)<<15),C=E[1],T=decode_cell(C),S.write_shift(1,58),S.write_shift(2,2+n.SheetNames.map(function(B){return B.toLowerCase()}).indexOf(x.toLowerCase())),S.write_shift(4,T.r),S.write_shift(2,T.c|(C.charAt(0)=="$"?0:1)<<14|(C.match(/\$\d/)?0:1)<<15),S.write_shift(1,17),S.write_shift(4,0),S}function write_XLSBFormulaArea3D(t,n){var _=t.lastIndexOf("!"),x=t.slice(0,_);t=t.slice(_+1),x.charAt(0)=="'"&&(x=x.slice(1,-1).replace(/''/g,"'"));var E=decode_range(t),S=new_buf(23);return S.write_shift(4,15),S.write_shift(1,59),S.write_shift(2,2+n.SheetNames.map(function(C){return C.toLowerCase()}).indexOf(x.toLowerCase())),S.write_shift(4,E.s.r),S.write_shift(4,E.e.r),S.write_shift(2,E.s.c),S.write_shift(2,E.e.c),S.write_shift(4,0),S}function write_XLSBFormula(t,n){if(typeof t=="number")return write_XLSBFormulaNum(t);if(typeof t=="boolean")return write_XLSBFormulaBool(t);if(/^#(DIV\/0!|GETTING_DATA|N\/A|NAME\?|NULL!|NUM!|REF!|VALUE!)$/.test(t))return write_XLSBFormulaErr(+RBErr[t]);if(t.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRef(t);if(t.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRange(t);if(t.match(/^#REF!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaArea3D(t,n);if(t.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRef3D(t,n);if(t.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRangeWS(t,n);if(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!#REF!$/.test(t))return write_XLSBFormulaRefErr3D(t,n);if(/^".*"$/.test(t))return write_XLSBFormulaStr(t);if(/^[+-]\d+$/.test(t))return write_XLSBFormulaNum(parseInt(t,10));throw"Formula |"+t+"| not supported for XLSB"}var write_XLSBNameParsedFormula=write_XLSBFormula,Cetab={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Ftab={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},FtabArgc={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function ods_to_csf_formula(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(n,_){return _.replace(/\./g,"")}),t=t.replace(/\$'([^']|'')+'/g,function(n){return n.slice(1)}),t=t.replace(/\$([^\]\. #$]+)/g,function(n,_){return _.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?n:_}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function csf_to_ods_formula(t){var n="of:="+t.replace(crefregex,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return n.replace(/;/g,"|").replace(/,/g,";")}function ods_to_csf_3D(t){t=t.replace(/\$'([^']|'')+'/g,function(x){return x.slice(1)}),t=t.replace(/\$([^\]\. #$]+)/g,function(x,E){return E.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?x:E});var n=t.split(":"),_=n[0].split(".")[0];return[_,n[0].split(".")[1]+(n.length>1?":"+(n[1].split(".")[1]||n[1].split(".")[0]):"")]}function csf_to_ods_3D(t){return t.replace(/!/,".")}var strs={},_ssfopts={},browser_has_Map=typeof Map<"u";function get_sst_id(t,n,_){var x=0,E=t.length;if(_){if(browser_has_Map?_.has(n):Object.prototype.hasOwnProperty.call(_,n)){for(var S=browser_has_Map?_.get(n):_[n];x<S.length;++x)if(t[S[x]].t===n)return t.Count++,S[x]}}else for(;x<E;++x)if(t[x].t===n)return t.Count++,x;return t[E]={t:n},t.Count++,t.Unique++,_&&(browser_has_Map?(_.has(n)||_.set(n,[]),_.get(n).push(E)):(Object.prototype.hasOwnProperty.call(_,n)||(_[n]=[]),_[n].push(E))),E}function col_obj_w(t,n){var _={min:t+1,max:t+1},x=-1;return n.MDW&&(MDW=n.MDW),n.width!=null?_.customWidth=1:n.wpx!=null?x=px2char(n.wpx):n.wch!=null&&(x=n.wch),x>-1?(_.width=char2width(x),_.customWidth=1):n.width!=null&&(_.width=n.width),n.hidden&&(_.hidden=!0),n.level!=null&&(_.outlineLevel=_.level=n.level),_}function default_margins(t,n){if(t){var _=[.7,.7,.75,.75,.3,.3];n=="xlml"&&(_=[1,1,1,1,.5,.5]),t.left==null&&(t.left=_[0]),t.right==null&&(t.right=_[1]),t.top==null&&(t.top=_[2]),t.bottom==null&&(t.bottom=_[3]),t.header==null&&(t.header=_[4]),t.footer==null&&(t.footer=_[5])}}function get_cell_style(t,n,_){var x=_.revssf[n.z!=null?n.z:"General"],E=60,S=t.length;if(x==null&&_.ssf){for(;E<392;++E)if(_.ssf[E]==null){SSF__load(n.z,E),_.ssf[E]=n.z,_.revssf[n.z]=x=E;break}}for(E=0;E!=S;++E)if(t[E].numFmtId===x)return E;return t[S]={numFmtId:x,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},S}function safe_format(t,n,_,x,E,S){try{x.cellNF&&(t.z=table_fmt[n])}catch(T){if(x.WTF)throw T}if(!(t.t==="z"&&!x.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=parseDate(t.v)),(!x||x.cellText!==!1)&&t.t!=="z")try{if(table_fmt[n]==null&&SSF__load(SSFImplicit[n]||"General",n),t.t==="e")t.w=t.w||BErr[t.v];else if(n===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=SSF_general_num(t.v);else if(t.t==="d"){var C=datenum(t.v);(C|0)===C?t.w=C.toString(10):t.w=SSF_general_num(C)}else{if(t.v===void 0)return"";t.w=SSF_general(t.v,_ssfopts)}else t.t==="d"?t.w=SSF_format(n,datenum(t.v),_ssfopts):t.w=SSF_format(n,t.v,_ssfopts)}catch(T){if(x.WTF)throw T}if(x.cellStyles&&_!=null)try{t.s=S.Fills[_],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=rgb_tint(E.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),x.WTF&&(t.s.fgColor.raw_rgb=E.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=rgb_tint(E.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),x.WTF&&(t.s.bgColor.raw_rgb=E.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(T){if(x.WTF&&S.Fills)throw T}}}function check_ws(t,n,_){if(t&&t["!ref"]){var x=safe_decode_range(t["!ref"]);if(x.e.c<x.s.c||x.e.r<x.s.r)throw new Error("Bad range ("+_+"): "+t["!ref"])}}function parse_ws_xml_dim(t,n){var _=safe_decode_range(n);_.s.r<=_.e.r&&_.s.c<=_.e.c&&_.s.r>=0&&_.s.c>=0&&(t["!ref"]=encode_range(_))}var mergecregex=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,sheetdataregex=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,hlinkregex=/<(?:\w:)?hyperlink [^>]*>/mg,dimregex=/"(\w*:\w*)"/,colregex=/<(?:\w:)?col\b[^>]*[\/]?>/g,afregex=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,marginregex=/<(?:\w:)?pageMargins[^>]*\/>/g,sheetprregex=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,sheetprregex2=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,svsregex=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function parse_ws_xml(t,n,_,x,E,S,C){if(!t)return t;x||(x={"!id":{}});var T={};n.dense&&(T["!data"]=[]);var B={s:{r:2e6,c:2e6},e:{r:0,c:0}},A="",I="",D=t.match(sheetdataregex);D?(A=t.slice(0,D.index),I=t.slice(D.index+D[0].length)):A=I=t;var M=A.match(sheetprregex);M?parse_ws_xml_sheetpr(M[0],T,E,_):(M=A.match(sheetprregex2))&&parse_ws_xml_sheetpr2(M[0],M[1]||"",T,E,_);var V=(A.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(V>0){var L=A.slice(V,V+50).match(dimregex);L&&!(n&&n.nodim)&&parse_ws_xml_dim(T,L[1])}var F=A.match(svsregex);F&&F[1]&&parse_ws_xml_sheetviews(F[1],E);var j=[];if(n.cellStyles){var U=A.match(colregex);U&&parse_ws_xml_cols(j,U)}D&&parse_ws_xml_data(D[1],T,n,B,S,C);var H=I.match(afregex);H&&(T["!autofilter"]=parse_ws_xml_autofilter(H[0]));var Y=[],Z=I.match(mergecregex);if(Z)for(V=0;V!=Z.length;++V)Y[V]=safe_decode_range(Z[V].slice(Z[V].indexOf('"')+1));var ne=I.match(hlinkregex);ne&&parse_ws_xml_hlinks(T,ne,x);var re=I.match(marginregex);if(re&&(T["!margins"]=parse_ws_xml_margins(parsexmltag(re[0]))),n&&n.nodim&&(B.s.c=B.s.r=0),!T["!ref"]&&B.e.c>=B.s.c&&B.e.r>=B.s.r&&(T["!ref"]=encode_range(B)),n.sheetRows>0&&T["!ref"]){var X=safe_decode_range(T["!ref"]);n.sheetRows<=+X.e.r&&(X.e.r=n.sheetRows-1,X.e.r>B.e.r&&(X.e.r=B.e.r),X.e.r<X.s.r&&(X.s.r=X.e.r),X.e.c>B.e.c&&(X.e.c=B.e.c),X.e.c<X.s.c&&(X.s.c=X.e.c),T["!fullref"]=T["!ref"],T["!ref"]=encode_range(X))}return j.length>0&&(T["!cols"]=j),Y.length>0&&(T["!merges"]=Y),T}function write_ws_xml_merges(t){if(t.length===0)return"";for(var n='<mergeCells count="'+t.length+'">',_=0;_!=t.length;++_)n+='<mergeCell ref="'+encode_range(t[_])+'"/>';return n+"</mergeCells>"}function parse_ws_xml_sheetpr(t,n,_,x){var E=parsexmltag(t);_.Sheets[x]||(_.Sheets[x]={}),E.codeName&&(_.Sheets[x].CodeName=unescapexml(utf8read(E.codeName)))}function parse_ws_xml_sheetpr2(t,n,_,x,E){parse_ws_xml_sheetpr(t.slice(0,t.indexOf(">")),_,x,E)}function write_ws_xml_sheetpr(t,n,_,x,E){var S=!1,C={},T=null;if(x.bookType!=="xlsx"&&n.vbaraw){var B=n.SheetNames[_];try{n.Workbook&&(B=n.Workbook.Sheets[_].CodeName||B)}catch{}S=!0,C.codeName=utf8write(escapexml(B))}if(t&&t["!outline"]){var A={summaryBelow:1,summaryRight:1};t["!outline"].above&&(A.summaryBelow=0),t["!outline"].left&&(A.summaryRight=0),T=(T||"")+writextag("outlinePr",null,A)}!S&&!T||(E[E.length]=writextag("sheetPr",T,C))}var sheetprot_deffalse=["objects","scenarios","selectLockedCells","selectUnlockedCells"],sheetprot_deftrue=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function write_ws_xml_protection(t){var n={sheet:1};return sheetprot_deffalse.forEach(function(_){t[_]!=null&&t[_]&&(n[_]="1")}),sheetprot_deftrue.forEach(function(_){t[_]!=null&&!t[_]&&(n[_]="0")}),t.password&&(n.password=crypto_CreatePasswordVerifier_Method1(t.password).toString(16).toUpperCase()),writextag("sheetProtection",null,n)}function parse_ws_xml_hlinks(t,n,_){for(var x=t["!data"]!=null,E=0;E!=n.length;++E){var S=parsexmltag(utf8read(n[E]),!0);if(!S.ref)return;var C=((_||{})["!id"]||[])[S.id];C?(S.Target=C.Target,S.location&&(S.Target+="#"+unescapexml(S.location))):(S.Target="#"+unescapexml(S.location),C={Target:S.Target,TargetMode:"Internal"}),S.Rel=C,S.tooltip&&(S.Tooltip=S.tooltip,delete S.tooltip);for(var T=safe_decode_range(S.ref),B=T.s.r;B<=T.e.r;++B)for(var A=T.s.c;A<=T.e.c;++A){var I=encode_col(A)+encode_row(B);x?(t["!data"][B]||(t["!data"][B]=[]),t["!data"][B][A]||(t["!data"][B][A]={t:"z",v:void 0}),t["!data"][B][A].l=S):(t[I]||(t[I]={t:"z",v:void 0}),t[I].l=S)}}}function parse_ws_xml_margins(t){var n={};return["left","right","top","bottom","header","footer"].forEach(function(_){t[_]&&(n[_]=parseFloat(t[_]))}),n}function write_ws_xml_margins(t){return default_margins(t),writextag("pageMargins",null,t)}function parse_ws_xml_cols(t,n){for(var _=!1,x=0;x!=n.length;++x){var E=parsexmltag(n[x],!0);E.hidden&&(E.hidden=parsexmlbool(E.hidden));var S=parseInt(E.min,10)-1,C=parseInt(E.max,10)-1;for(E.outlineLevel&&(E.level=+E.outlineLevel||0),delete E.min,delete E.max,E.width=+E.width,!_&&E.width&&(_=!0,find_mdw_colw(E.width)),process_col(E);S<=C;)t[S++]=dup(E)}}function write_ws_xml_cols(t,n){for(var _=["<cols>"],x,E=0;E!=n.length;++E)(x=n[E])&&(_[_.length]=writextag("col",null,col_obj_w(E,x)));return _[_.length]="</cols>",_.join("")}function parse_ws_xml_autofilter(t){var n={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return n}function write_ws_xml_autofilter(t,n,_,x){var E=typeof t.ref=="string"?t.ref:encode_range(t.ref);_.Workbook||(_.Workbook={Sheets:[]}),_.Workbook.Names||(_.Workbook.Names=[]);var S=_.Workbook.Names,C=decode_range(E);C.s.r==C.e.r&&(C.e.r=decode_range(n["!ref"]).e.r,E=encode_range(C));for(var T=0;T<S.length;++T){var B=S[T];if(B.Name=="_xlnm._FilterDatabase"&&B.Sheet==x){B.Ref=formula_quote_sheet_name(_.SheetNames[x])+"!"+fix_range(E);break}}return T==S.length&&S.push({Name:"_xlnm._FilterDatabase",Sheet:x,Ref:"'"+_.SheetNames[x]+"'!"+E}),writextag("autoFilter",null,{ref:E})}var sviewregex=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/g;function parse_ws_xml_sheetviews(t,n){n.Views||(n.Views=[{}]),(t.match(sviewregex)||[]).forEach(function(_,x){var E=parsexmltag(_);n.Views[x]||(n.Views[x]={}),+E.zoomScale&&(n.Views[x].zoom=+E.zoomScale),E.rightToLeft&&parsexmlbool(E.rightToLeft)&&(n.Views[x].RTL=!0)})}function write_ws_xml_sheetviews(t,n,_,x){var E={workbookViewId:"0"};return(((x||{}).Workbook||{}).Views||[])[0]&&(E.rightToLeft=x.Workbook.Views[0].RTL?"1":"0"),writextag("sheetViews",writextag("sheetView",null,E),{})}function write_ws_xml_cell(t,n,_,x){if(t.c&&_["!comments"].push([n,t.c]),(t.v===void 0||t.t==="z"&&!(x||{}).sheetStubs)&&typeof t.f!="string"&&typeof t.z>"u")return"";var E="",S=t.t,C=t.v;if(t.t!=="z")switch(t.t){case"b":E=t.v?"1":"0";break;case"n":E=""+t.v;break;case"e":E=BErr[t.v];break;case"d":x&&x.cellDates?E=parseDate(t.v,-1).toISOString():(t=dup(t),t.t="n",E=""+(t.v=datenum(parseDate(t.v)))),typeof t.z>"u"&&(t.z=table_fmt[14]);break;default:E=t.v;break}var T=t.t=="z"||t.v==null?"":writetag("v",escapexml(E)),B={r:n},A=get_cell_style(x.cellXfs,t,x);switch(A!==0&&(B.s=A),t.t){case"n":break;case"d":B.t="d";break;case"b":B.t="b";break;case"e":B.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(x&&x.bookSST){T=writetag("v",""+get_sst_id(x.Strings,t.v,x.revStrings)),B.t="s";break}else B.t="str";break}if(t.t!=S&&(t.t=S,t.v=C),typeof t.f=="string"&&t.f){var I=t.F&&t.F.slice(0,n.length)==n?{t:"array",ref:t.F}:null;T=writextag("f",escapexml(t.f),I)+(t.v!=null?T:"")}return t.l&&(t.l.display=escapexml(E),_["!links"].push([n,t.l])),t.D&&(B.cm=1),writextag("c",T,B)}var parse_ws_xml_data=function(){var t=/<(?:\w+:)?c[ \/>]/,n=/<\/(?:\w+:)?row>/,_=/r=["']([^"']*)["']/,x=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,E=/ref=["']([^"']*)["']/,S=matchtag("v"),C=matchtag("f");return function(B,A,I,D,M,V){for(var L=0,F="",j=[],U=[],H=0,Y=0,Z=0,ne="",re,X,ce=0,ue=0,_e,ye,ie=0,W=0,O=Array.isArray(V.CellXf),z,J=[],ee=[],ae=A["!data"]!=null,oe=[],se={},G=!1,q=!!I.sheetStubs,te=B.split(n),fe=0,he=te.length;fe!=he;++fe){F=te[fe].trim();var Ee=F.length;if(Ee!==0){var we=0;e:for(L=0;L<Ee;++L)switch(F[L]){case">":if(F[L-1]!="/"){++L;break e}if(I&&I.cellStyles){if(X=parsexmltag(F.slice(we,L),!0),ce=X.r!=null?parseInt(X.r,10):ce+1,ue=-1,I.sheetRows&&I.sheetRows<ce)continue;se={},G=!1,X.ht&&(G=!0,se.hpt=parseFloat(X.ht),se.hpx=pt2px(se.hpt)),X.hidden&&parsexmlbool(X.hidden)&&(G=!0,se.hidden=!0),X.outlineLevel!=null&&(G=!0,se.level=+X.outlineLevel),G&&(oe[ce-1]=se)}break;case"<":we=L;break}if(we>=L)break;if(X=parsexmltag(F.slice(we,L),!0),ce=X.r!=null?parseInt(X.r,10):ce+1,ue=-1,!(I.sheetRows&&I.sheetRows<ce)){I.nodim||(D.s.r>ce-1&&(D.s.r=ce-1),D.e.r<ce-1&&(D.e.r=ce-1)),I&&I.cellStyles&&(se={},G=!1,X.ht&&(G=!0,se.hpt=parseFloat(X.ht),se.hpx=pt2px(se.hpt)),X.hidden&&parsexmlbool(X.hidden)&&(G=!0,se.hidden=!0),X.outlineLevel!=null&&(G=!0,se.level=+X.outlineLevel),G&&(oe[ce-1]=se)),j=F.slice(L).split(t);for(var xe=0;xe!=j.length&&j[xe].trim().charAt(0)=="<";++xe);for(j=j.slice(xe),L=0;L!=j.length;++L)if(F=j[L].trim(),F.length!==0){if(U=F.match(_),H=L,Y=0,Z=0,F="<c "+(F.slice(0,1)=="<"?">":"")+F,U!=null&&U.length===2){for(H=0,ne=U[1],Y=0;Y!=ne.length&&!((Z=ne.charCodeAt(Y)-64)<1||Z>26);++Y)H=26*H+Z;--H,ue=H}else++ue;for(Y=0;Y!=F.length&&F.charCodeAt(Y)!==62;++Y);if(++Y,X=parsexmltag(F.slice(0,Y),!0),X.r||(X.r=encode_cell({r:ce-1,c:ue})),ne=F.slice(Y),re={t:""},(U=ne.match(S))!=null&&U[1]!==""&&(re.v=unescapexml(U[1])),I.cellFormula){if((U=ne.match(C))!=null&&U[1]!==""){if(re.f=unescapexml(utf8read(U[1]),!0),I.xlfn||(re.f=_xlfn(re.f)),U[0].indexOf('t="array"')>-1)re.F=(ne.match(E)||[])[1],re.F.indexOf(":")>-1&&J.push([safe_decode_range(re.F),re.F]);else if(U[0].indexOf('t="shared"')>-1){ye=parsexmltag(U[0]);var $e=unescapexml(utf8read(U[1]));I.xlfn||($e=_xlfn($e)),ee[parseInt(ye.si,10)]=[ye,$e,X.r]}}else(U=ne.match(/<f[^>]*\/>/))&&(ye=parsexmltag(U[0]),ee[ye.si]&&(re.f=shift_formula_xlsx(ee[ye.si][1],ee[ye.si][2],X.r)));var ge=decode_cell(X.r);for(Y=0;Y<J.length;++Y)ge.r>=J[Y][0].s.r&&ge.r<=J[Y][0].e.r&&ge.c>=J[Y][0].s.c&&ge.c<=J[Y][0].e.c&&(re.F=J[Y][1])}if(X.t==null&&re.v===void 0)if(re.f||re.F)re.v=0,re.t="n";else if(q)re.t="z";else continue;else re.t=X.t||"n";switch(D.s.c>ue&&(D.s.c=ue),D.e.c<ue&&(D.e.c=ue),re.t){case"n":if(re.v==""||re.v==null){if(!q)continue;re.t="z"}else re.v=parseFloat(re.v);break;case"s":if(typeof re.v>"u"){if(!q)continue;re.t="z"}else _e=strs[parseInt(re.v,10)],re.v=_e.t,re.r=_e.r,I.cellHTML&&(re.h=_e.h);break;case"str":re.t="s",re.v=re.v!=null?unescapexml(utf8read(re.v),!0):"",I.cellHTML&&(re.h=escapehtml(re.v));break;case"inlineStr":U=ne.match(x),re.t="s",U!=null&&(_e=parse_si(U[1]))?(re.v=_e.t,I.cellHTML&&(re.h=_e.h)):re.v="";break;case"b":re.v=parsexmlbool(re.v);break;case"d":I.cellDates?re.v=parseDate(re.v,1):(re.v=datenum(parseDate(re.v,1)),re.t="n");break;case"e":(!I||I.cellText!==!1)&&(re.w=re.v),re.v=RBErr[re.v];break}if(ie=W=0,z=null,O&&X.s!==void 0&&(z=V.CellXf[X.s],z!=null&&(z.numFmtId!=null&&(ie=z.numFmtId),I.cellStyles&&z.fillId!=null&&(W=z.fillId))),safe_format(re,ie,W,I,M,V),I.cellDates&&O&&re.t=="n"&&fmt_is_date(table_fmt[ie])&&(re.t="d",re.v=numdate(re.v)),X.cm&&I.xlmeta){var Se=(I.xlmeta.Cell||[])[+X.cm-1];Se&&Se.type=="XLDAPR"&&(re.D=!0)}var me;I.nodim&&(me=decode_cell(X.r),D.s.r>me.r&&(D.s.r=me.r),D.e.r<me.r&&(D.e.r=me.r)),ae?(me=decode_cell(X.r),A["!data"][me.r]||(A["!data"][me.r]=[]),A["!data"][me.r][me.c]=re):A[X.r]=re}}}}oe.length>0&&(A["!rows"]=oe)}}();function write_ws_xml_data(t,n,_,x){var E=[],S=[],C=safe_decode_range(t["!ref"]),T="",B,A="",I=[],D=0,M=0,V=t["!rows"],L=t["!data"]!=null,F={r:A},j,U=-1;for(M=C.s.c;M<=C.e.c;++M)I[M]=encode_col(M);for(D=C.s.r;D<=C.e.r;++D){for(S=[],A=encode_row(D),M=C.s.c;M<=C.e.c;++M){B=I[M]+A;var H=L?(t["!data"][D]||[])[M]:t[B];H!==void 0&&(T=write_ws_xml_cell(H,B,t,n))!=null&&S.push(T)}(S.length>0||V&&V[D])&&(F={r:A},V&&V[D]&&(j=V[D],j.hidden&&(F.hidden=1),U=-1,j.hpx?U=px2pt(j.hpx):j.hpt&&(U=j.hpt),U>-1&&(F.ht=U,F.customHeight=1),j.level&&(F.outlineLevel=j.level)),E[E.length]=writextag("row",S.join(""),F))}if(V)for(;D<V.length;++D)V&&V[D]&&(F={r:D+1},j=V[D],j.hidden&&(F.hidden=1),U=-1,j.hpx?U=px2pt(j.hpx):j.hpt&&(U=j.hpt),U>-1&&(F.ht=U,F.customHeight=1),j.level&&(F.outlineLevel=j.level),E[E.length]=writextag("row","",F));return E.join("")}function write_ws_xml(t,n,_,x){var E=[XML_HEADER,writextag("worksheet",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r})],S=_.SheetNames[t],C=0,T="",B=_.Sheets[S];B==null&&(B={});var A=B["!ref"]||"A1",I=safe_decode_range(A);if(I.e.c>16383||I.e.r>1048575){if(n.WTF)throw new Error("Range "+A+" exceeds format limit A1:XFD1048576");I.e.c=Math.min(I.e.c,16383),I.e.r=Math.min(I.e.c,1048575),A=encode_range(I)}x||(x={}),B["!comments"]=[];var D=[];write_ws_xml_sheetpr(B,_,t,n,E),E[E.length]=writextag("dimension",null,{ref:A}),E[E.length]=write_ws_xml_sheetviews(B,n,t,_),n.sheetFormat&&(E[E.length]=writextag("sheetFormatPr",null,{defaultRowHeight:n.sheetFormat.defaultRowHeight||"16",baseColWidth:n.sheetFormat.baseColWidth||"10",outlineLevelRow:n.sheetFormat.outlineLevelRow||"7"})),B["!cols"]!=null&&B["!cols"].length>0&&(E[E.length]=write_ws_xml_cols(B,B["!cols"])),E[C=E.length]="<sheetData/>",B["!links"]=[],B["!ref"]!=null&&(T=write_ws_xml_data(B,n),T.length>0&&(E[E.length]=T)),E.length>C+1&&(E[E.length]="</sheetData>",E[C]=E[C].replace("/>",">")),B["!protect"]&&(E[E.length]=write_ws_xml_protection(B["!protect"])),B["!autofilter"]!=null&&(E[E.length]=write_ws_xml_autofilter(B["!autofilter"],B,_,t)),B["!merges"]!=null&&B["!merges"].length>0&&(E[E.length]=write_ws_xml_merges(B["!merges"]));var M=-1,V,L=-1;return B["!links"].length>0&&(E[E.length]="<hyperlinks>",B["!links"].forEach(function(F){F[1].Target&&(V={ref:F[0]},F[1].Target.charAt(0)!="#"&&(L=add_rels(x,-1,escapexml(F[1].Target).replace(/#.*$/,""),RELS.HLINK),V["r:id"]="rId"+L),(M=F[1].Target.indexOf("#"))>-1&&(V.location=escapexml(F[1].Target.slice(M+1))),F[1].Tooltip&&(V.tooltip=escapexml(F[1].Tooltip)),V.display=F[1].display,E[E.length]=writextag("hyperlink",null,V))}),E[E.length]="</hyperlinks>"),delete B["!links"],B["!margins"]!=null&&(E[E.length]=write_ws_xml_margins(B["!margins"])),(!n||n.ignoreEC||n.ignoreEC==null)&&(E[E.length]=writetag("ignoredErrors",writextag("ignoredError",null,{numberStoredAsText:1,sqref:A}))),D.length>0&&(L=add_rels(x,-1,"../drawings/drawing"+(t+1)+".xml",RELS.DRAW),E[E.length]=writextag("drawing",null,{"r:id":"rId"+L}),B["!drawing"]=D),B["!comments"].length>0&&(L=add_rels(x,-1,"../drawings/vmlDrawing"+(t+1)+".vml",RELS.VML),E[E.length]=writextag("legacyDrawing",null,{"r:id":"rId"+L}),B["!legacy"]=L),E.length>1&&(E[E.length]="</worksheet>",E[1]=E[1].replace("/>",">")),E.join("")}function parse_BrtRowHdr(t,n){var _={},x=t.l+n;_.r=t.read_shift(4),t.l+=4;var E=t.read_shift(2);t.l+=1;var S=t.read_shift(1);return t.l=x,S&7&&(_.level=S&7),S&16&&(_.hidden=!0),S&32&&(_.hpt=E/20),_}function write_BrtRowHdr(t,n,_){var x=new_buf(145),E=(_["!rows"]||[])[t]||{};x.write_shift(4,t),x.write_shift(4,0);var S=320;E.hpx?S=px2pt(E.hpx)*20:E.hpt&&(S=E.hpt*20),x.write_shift(2,S),x.write_shift(1,0);var C=0;E.level&&(C|=E.level),E.hidden&&(C|=16),(E.hpx||E.hpt)&&(C|=32),x.write_shift(1,C),x.write_shift(1,0);var T=0,B=x.l;x.l+=4;for(var A={r:t,c:0},I=_["!data"]!=null,D=0;D<16;++D)if(!(n.s.c>D+1<<10||n.e.c<D<<10)){for(var M=-1,V=-1,L=D<<10;L<D+1<<10;++L){A.c=L;var F=I?(_["!data"][A.r]||[])[A.c]:_[encode_cell(A)];F&&(M<0&&(M=L),V=L)}M<0||(++T,x.write_shift(4,M),x.write_shift(4,V))}var j=x.l;return x.l=B,x.write_shift(4,T),x.l=j,x.length>x.l?x.slice(0,x.l):x}function write_row_header(t,n,_,x){var E=write_BrtRowHdr(x,_,n);(E.length>17||(n["!rows"]||[])[x])&&write_record(t,0,E)}var parse_BrtWsDim=parse_UncheckedRfX,write_BrtWsDim=write_UncheckedRfX;function parse_BrtWsFmtInfo(){}function parse_BrtWsProp(t,n){var _={},x=t[t.l];return++t.l,_.above=!(x&64),_.left=!(x&128),t.l+=18,_.name=parse_XLSBCodeName(t),_}function write_BrtWsProp(t,n,_){_==null&&(_=new_buf(84+4*t.length));var x=192;n&&(n.above&&(x&=-65),n.left&&(x&=-129)),_.write_shift(1,x);for(var E=1;E<3;++E)_.write_shift(1,0);return write_BrtColor({auto:1},_),_.write_shift(-4,-1),_.write_shift(-4,-1),write_XLSBCodeName(t,_),_.slice(0,_.l)}function parse_BrtCellBlank(t){var n=parse_XLSBCell(t);return[n]}function write_BrtCellBlank(t,n,_){return _==null&&(_=new_buf(8)),write_XLSBCell(n,_)}function parse_BrtShortBlank(t){var n=parse_XLSBShortCell(t);return[n]}function write_BrtShortBlank(t,n,_){return _==null&&(_=new_buf(4)),write_XLSBShortCell(n,_)}function parse_BrtCellBool(t){var n=parse_XLSBCell(t),_=t.read_shift(1);return[n,_,"b"]}function write_BrtCellBool(t,n,_){return _==null&&(_=new_buf(9)),write_XLSBCell(n,_),_.write_shift(1,t.v?1:0),_}function parse_BrtShortBool(t){var n=parse_XLSBShortCell(t),_=t.read_shift(1);return[n,_,"b"]}function write_BrtShortBool(t,n,_){return _==null&&(_=new_buf(5)),write_XLSBShortCell(n,_),_.write_shift(1,t.v?1:0),_}function parse_BrtCellError(t){var n=parse_XLSBCell(t),_=t.read_shift(1);return[n,_,"e"]}function write_BrtCellError(t,n,_){return _==null&&(_=new_buf(9)),write_XLSBCell(n,_),_.write_shift(1,t.v),_}function parse_BrtShortError(t){var n=parse_XLSBShortCell(t),_=t.read_shift(1);return[n,_,"e"]}function write_BrtShortError(t,n,_){return _==null&&(_=new_buf(8)),write_XLSBShortCell(n,_),_.write_shift(1,t.v),_.write_shift(2,0),_.write_shift(1,0),_}function parse_BrtCellIsst(t){var n=parse_XLSBCell(t),_=t.read_shift(4);return[n,_,"s"]}function write_BrtCellIsst(t,n,_){return _==null&&(_=new_buf(12)),write_XLSBCell(n,_),_.write_shift(4,n.v),_}function parse_BrtShortIsst(t){var n=parse_XLSBShortCell(t),_=t.read_shift(4);return[n,_,"s"]}function write_BrtShortIsst(t,n,_){return _==null&&(_=new_buf(8)),write_XLSBShortCell(n,_),_.write_shift(4,n.v),_}function parse_BrtCellReal(t){var n=parse_XLSBCell(t),_=parse_Xnum(t);return[n,_,"n"]}function write_BrtCellReal(t,n,_){return _==null&&(_=new_buf(16)),write_XLSBCell(n,_),write_Xnum(t.v,_),_}function parse_BrtShortReal(t){var n=parse_XLSBShortCell(t),_=parse_Xnum(t);return[n,_,"n"]}function write_BrtShortReal(t,n,_){return _==null&&(_=new_buf(12)),write_XLSBShortCell(n,_),write_Xnum(t.v,_),_}function parse_BrtCellRk(t){var n=parse_XLSBCell(t),_=parse_RkNumber(t);return[n,_,"n"]}function write_BrtCellRk(t,n,_){return _==null&&(_=new_buf(12)),write_XLSBCell(n,_),write_RkNumber(t.v,_),_}function parse_BrtShortRk(t){var n=parse_XLSBShortCell(t),_=parse_RkNumber(t);return[n,_,"n"]}function write_BrtShortRk(t,n,_){return _==null&&(_=new_buf(8)),write_XLSBShortCell(n,_),write_RkNumber(t.v,_),_}function parse_BrtCellRString(t){var n=parse_XLSBCell(t),_=parse_RichStr(t);return[n,_,"is"]}function parse_BrtCellSt(t){var n=parse_XLSBCell(t),_=parse_XLWideString(t);return[n,_,"str"]}function write_BrtCellSt(t,n,_){var x=t.v==null?"":String(t.v);return _==null&&(_=new_buf(12+4*t.v.length)),write_XLSBCell(n,_),write_XLWideString(x,_),_.length>_.l?_.slice(0,_.l):_}function parse_BrtShortSt(t){var n=parse_XLSBShortCell(t),_=parse_XLWideString(t);return[n,_,"str"]}function write_BrtShortSt(t,n,_){var x=t.v==null?"":String(t.v);return _==null&&(_=new_buf(8+4*x.length)),write_XLSBShortCell(n,_),write_XLWideString(x,_),_.length>_.l?_.slice(0,_.l):_}function parse_BrtFmlaBool(t,n,_){var x=t.l+n,E=parse_XLSBCell(t);E.r=_["!row"];var S=t.read_shift(1),C=[E,S,"b"];if(_.cellFormula){t.l+=2;var T=parse_XLSBCellParsedFormula(t,x-t.l,_);C[3]=stringify_formula(T,null,E,_.supbooks,_)}else t.l=x;return C}function parse_BrtFmlaError(t,n,_){var x=t.l+n,E=parse_XLSBCell(t);E.r=_["!row"];var S=t.read_shift(1),C=[E,S,"e"];if(_.cellFormula){t.l+=2;var T=parse_XLSBCellParsedFormula(t,x-t.l,_);C[3]=stringify_formula(T,null,E,_.supbooks,_)}else t.l=x;return C}function parse_BrtFmlaNum(t,n,_){var x=t.l+n,E=parse_XLSBCell(t);E.r=_["!row"];var S=parse_Xnum(t),C=[E,S,"n"];if(_.cellFormula){t.l+=2;var T=parse_XLSBCellParsedFormula(t,x-t.l,_);C[3]=stringify_formula(T,null,E,_.supbooks,_)}else t.l=x;return C}function parse_BrtFmlaString(t,n,_){var x=t.l+n,E=parse_XLSBCell(t);E.r=_["!row"];var S=parse_XLWideString(t),C=[E,S,"str"];if(_.cellFormula){t.l+=2;var T=parse_XLSBCellParsedFormula(t,x-t.l,_);C[3]=stringify_formula(T,null,E,_.supbooks,_)}else t.l=x;return C}var parse_BrtMergeCell=parse_UncheckedRfX,write_BrtMergeCell=write_UncheckedRfX;function write_BrtBeginMergeCells(t,n){return n==null&&(n=new_buf(4)),n.write_shift(4,t),n}function parse_BrtHLink(t,n){var _=t.l+n,x=parse_UncheckedRfX(t),E=parse_XLNullableWideString(t),S=parse_XLWideString(t),C=parse_XLWideString(t),T=parse_XLWideString(t);t.l=_;var B={rfx:x,relId:E,loc:S,display:T};return C&&(B.Tooltip=C),B}function write_BrtHLink(t,n){var _=new_buf(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));write_UncheckedRfX({s:decode_cell(t[0]),e:decode_cell(t[0])},_),write_RelID("rId"+n,_);var x=t[1].Target.indexOf("#"),E=x==-1?"":t[1].Target.slice(x+1);return write_XLWideString(E||"",_),write_XLWideString(t[1].Tooltip||"",_),write_XLWideString("",_),_.slice(0,_.l)}function parse_BrtPane(){}function parse_BrtArrFmla(t,n,_){var x=t.l+n,E=parse_RfX(t),S=t.read_shift(1),C=[E];if(C[2]=S,_.cellFormula){var T=parse_XLSBArrayParsedFormula(t,x-t.l,_);C[1]=T}else t.l=x;return C}function parse_BrtShrFmla(t,n,_){var x=t.l+n,E=parse_UncheckedRfX(t),S=[E];if(_.cellFormula){var C=parse_XLSBSharedParsedFormula(t,x-t.l,_);S[1]=C,t.l=x}else t.l=x;return S}function write_BrtColInfo(t,n,_){_==null&&(_=new_buf(18));var x=col_obj_w(t,n);_.write_shift(-4,t),_.write_shift(-4,t),_.write_shift(4,(x.width||10)*256),_.write_shift(4,0);var E=0;return n.hidden&&(E|=1),typeof x.width=="number"&&(E|=2),n.level&&(E|=n.level<<8),_.write_shift(2,E),_}var BrtMarginKeys=["left","right","top","bottom","header","footer"];function parse_BrtMargins(t){var n={};return BrtMarginKeys.forEach(function(_){n[_]=parse_Xnum(t)}),n}function write_BrtMargins(t,n){return n==null&&(n=new_buf(6*8)),default_margins(t),BrtMarginKeys.forEach(function(_){write_Xnum(t[_],n)}),n}function parse_BrtBeginWsView(t){var n=t.read_shift(2);return t.l+=28,{RTL:n&32}}function write_BrtBeginWsView(t,n,_){_==null&&(_=new_buf(30));var x=924;return(((n||{}).Views||[])[0]||{}).RTL&&(x|=32),_.write_shift(2,x),_.write_shift(4,0),_.write_shift(4,0),_.write_shift(4,0),_.write_shift(1,0),_.write_shift(1,0),_.write_shift(2,0),_.write_shift(2,100),_.write_shift(2,0),_.write_shift(2,0),_.write_shift(2,0),_.write_shift(4,0),_}function write_BrtCellIgnoreEC(t){var n=new_buf(24);return n.write_shift(4,4),n.write_shift(4,1),write_UncheckedRfX(t,n),n}function write_BrtSheetProtection(t,n){return n==null&&(n=new_buf(16*4+2)),n.write_shift(2,t.password?crypto_CreatePasswordVerifier_Method1(t.password):0),n.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(_){_[1]?n.write_shift(4,t[_[0]]!=null&&!t[_[0]]?1:0):n.write_shift(4,t[_[0]]!=null&&t[_[0]]?0:1)}),n}function parse_BrtDVal(){}function parse_BrtDVal14(){}function parse_ws_bin(t,n,_,x,E,S,C){if(!t)return t;var T=n||{};x||(x={"!id":{}});var B={};T.dense&&(B["!data"]=[]);var A,I={s:{r:2e6,c:2e6},e:{r:0,c:0}},D=!1,M=!1,V,L,F,j,U,H,Y,Z,ne,re=[];T.biff=12,T["!row"]=0;var X=0,ce=!1,ue=[],_e={},ye=T.supbooks||E.supbooks||[[]];if(ye.sharedf=_e,ye.arrayf=ue,ye.SheetNames=E.SheetNames||E.Sheets.map(function(ae){return ae.name}),!T.supbooks&&(T.supbooks=ye,E.Names))for(var ie=0;ie<E.Names.length;++ie)ye[0][ie+1]=E.Names[ie];var W=[],O=[],z=!1;XLSBRecordEnum[16]={n:"BrtShortReal",f:parse_BrtShortReal};var J;if(recordhopper(t,function(oe,se,G){if(!M)switch(G){case 148:A=oe;break;case 0:V=oe,T.sheetRows&&T.sheetRows<=V.r&&(M=!0),Z=encode_row(j=V.r),T["!row"]=V.r,(oe.hidden||oe.hpt||oe.level!=null)&&(oe.hpt&&(oe.hpx=pt2px(oe.hpt)),O[oe.r]=oe);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(L={t:oe[2]},oe[2]){case"n":L.v=oe[1];break;case"s":Y=strs[oe[1]],L.v=Y.t,L.r=Y.r;break;case"b":L.v=!!oe[1];break;case"e":L.v=oe[1],T.cellText!==!1&&(L.w=BErr[L.v]);break;case"str":L.t="s",L.v=oe[1];break;case"is":L.t="s",L.v=oe[1].t;break}if((F=C.CellXf[oe[0].iStyleRef])&&safe_format(L,F.numFmtId,null,T,S,C),U=oe[0].c==-1?U+1:oe[0].c,T.dense?(B["!data"][j]||(B["!data"][j]=[]),B["!data"][j][U]=L):B[encode_col(U)+Z]=L,T.cellFormula){for(ce=!1,X=0;X<ue.length;++X){var q=ue[X];V.r>=q[0].s.r&&V.r<=q[0].e.r&&U>=q[0].s.c&&U<=q[0].e.c&&(L.F=encode_range(q[0]),ce=!0)}!ce&&oe.length>3&&(L.f=oe[3])}if(I.s.r>V.r&&(I.s.r=V.r),I.s.c>U&&(I.s.c=U),I.e.r<V.r&&(I.e.r=V.r),I.e.c<U&&(I.e.c=U),T.cellDates&&F&&L.t=="n"&&fmt_is_date(table_fmt[F.numFmtId])){var te=SSF_parse_date_code(L.v);te&&(L.t="d",L.v=new Date(te.y,te.m-1,te.d,te.H,te.M,te.S,te.u))}J&&(J.type=="XLDAPR"&&(L.D=!0),J=void 0);break;case 1:case 12:if(!T.sheetStubs||D)break;L={t:"z",v:void 0},U=oe[0].c==-1?U+1:oe[0].c,T.dense?(B["!data"][j]||(B["!data"][j]=[]),B["!data"][j][U]=L):B[encode_col(U)+Z]=L,I.s.r>V.r&&(I.s.r=V.r),I.s.c>U&&(I.s.c=U),I.e.r<V.r&&(I.e.r=V.r),I.e.c<U&&(I.e.c=U),J&&(J.type=="XLDAPR"&&(L.D=!0),J=void 0);break;case 176:re.push(oe);break;case 49:J=((T.xlmeta||{}).Cell||[])[oe-1];break;case 494:var fe=x["!id"][oe.relId];for(fe?(oe.Target=fe.Target,oe.loc&&(oe.Target+="#"+oe.loc),oe.Rel=fe):oe.relId==""&&(oe.Target="#"+oe.loc),j=oe.rfx.s.r;j<=oe.rfx.e.r;++j)for(U=oe.rfx.s.c;U<=oe.rfx.e.c;++U)T.dense?(B["!data"][j]||(B["!data"][j]=[]),B["!data"][j][U]||(B["!data"][j][U]={t:"z",v:void 0}),B["!data"][j][U].l=oe):(H=encode_col(U)+encode_row(j),B[H]||(B[H]={t:"z",v:void 0}),B[H].l=oe);break;case 426:if(!T.cellFormula)break;ue.push(oe),ne=T.dense?B["!data"][j][U]:B[encode_col(U)+Z],ne.f=stringify_formula(oe[1],I,{r:V.r,c:U},ye,T),ne.F=encode_range(oe[0]);break;case 427:if(!T.cellFormula)break;_e[encode_cell(oe[0].s)]=oe[1],ne=T.dense?B["!data"][j][U]:B[encode_col(U)+Z],ne.f=stringify_formula(oe[1],I,{r:V.r,c:U},ye,T);break;case 60:if(!T.cellStyles)break;for(;oe.e>=oe.s;)W[oe.e--]={width:oe.w/256,hidden:!!(oe.flags&1),level:oe.level},z||(z=!0,find_mdw_colw(oe.w/256)),process_col(W[oe.e+1]);break;case 161:B["!autofilter"]={ref:encode_range(oe)};break;case 476:B["!margins"]=oe;break;case 147:E.Sheets[_]||(E.Sheets[_]={}),oe.name&&(E.Sheets[_].CodeName=oe.name),(oe.above||oe.left)&&(B["!outline"]={above:oe.above,left:oe.left});break;case 137:E.Views||(E.Views=[{}]),E.Views[0]||(E.Views[0]={}),oe.RTL&&(E.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:D=!0;break;case 36:D=!1;break;case 37:D=!0;break;case 38:D=!1;break;default:if(!se.T){if(!D||T.WTF)throw new Error("Unexpected record 0x"+G.toString(16))}}},T),delete T.supbooks,delete T["!row"],!B["!ref"]&&(I.s.r<2e6||A&&(A.e.r>0||A.e.c>0||A.s.r>0||A.s.c>0))&&(B["!ref"]=encode_range(A||I)),T.sheetRows&&B["!ref"]){var ee=safe_decode_range(B["!ref"]);T.sheetRows<=+ee.e.r&&(ee.e.r=T.sheetRows-1,ee.e.r>I.e.r&&(ee.e.r=I.e.r),ee.e.r<ee.s.r&&(ee.s.r=ee.e.r),ee.e.c>I.e.c&&(ee.e.c=I.e.c),ee.e.c<ee.s.c&&(ee.s.c=ee.e.c),B["!fullref"]=B["!ref"],B["!ref"]=encode_range(ee))}return re.length>0&&(B["!merges"]=re),W.length>0&&(B["!cols"]=W),O.length>0&&(B["!rows"]=O),B}function write_ws_bin_cell(t,n,_,x,E,S,C){var T={r:_,c:x};if(n.c&&S["!comments"].push([encode_cell(T),n.c]),n.v===void 0)return!1;var B="";switch(n.t){case"b":B=n.v?"1":"0";break;case"d":n=dup(n),n.z=n.z||table_fmt[14],n.v=datenum(parseDate(n.v)),n.t="n";break;case"n":case"e":B=""+n.v;break;default:B=n.v;break}switch(T.s=get_cell_style(E.cellXfs,n,E),n.l&&S["!links"].push([encode_cell(T),n.l]),n.t){case"s":case"str":return E.bookSST?(B=get_sst_id(E.Strings,n.v==null?"":String(n.v),E.revStrings),T.t="s",T.v=B,C?write_record(t,18,write_BrtShortIsst(n,T)):write_record(t,7,write_BrtCellIsst(n,T))):(T.t="str",C?write_record(t,17,write_BrtShortSt(n,T)):write_record(t,6,write_BrtCellSt(n,T))),!0;case"n":return n.v==(n.v|0)&&n.v>-1e3&&n.v<1e3?C?write_record(t,13,write_BrtShortRk(n,T)):write_record(t,2,write_BrtCellRk(n,T)):C?write_record(t,16,write_BrtShortReal(n,T)):write_record(t,5,write_BrtCellReal(n,T)),!0;case"b":return T.t="b",C?write_record(t,15,write_BrtShortBool(n,T)):write_record(t,4,write_BrtCellBool(n,T)),!0;case"e":return T.t="e",C?write_record(t,14,write_BrtShortError(n,T)):write_record(t,3,write_BrtCellError(n,T)),!0}return C?write_record(t,12,write_BrtShortBlank(n,T)):write_record(t,1,write_BrtCellBlank(n,T)),!0}function write_CELLTABLE(t,n,_,x){var E=safe_decode_range(n["!ref"]||"A1"),S,C="",T=[];write_record(t,145);var B=n["!data"]!=null,A=E.e.r;n["!rows"]&&(A=Math.max(E.e.r,n["!rows"].length-1));for(var I=E.s.r;I<=A;++I){C=encode_row(I),write_row_header(t,n,E,I);var D=!1;if(I<=E.e.r)for(var M=E.s.c;M<=E.e.c;++M){I===E.s.r&&(T[M]=encode_col(M)),S=T[M]+C;var V=B?(n["!data"][I]||[])[M]:n[S];if(!V){D=!1;continue}D=write_ws_bin_cell(t,V,I,M,x,n,D)}}write_record(t,146)}function write_MERGECELLS(t,n){!n||!n["!merges"]||(write_record(t,177,write_BrtBeginMergeCells(n["!merges"].length)),n["!merges"].forEach(function(_){write_record(t,176,write_BrtMergeCell(_))}),write_record(t,178))}function write_COLINFOS(t,n){!n||!n["!cols"]||(write_record(t,390),n["!cols"].forEach(function(_,x){_&&write_record(t,60,write_BrtColInfo(x,_))}),write_record(t,391))}function write_IGNOREECS(t,n){!n||!n["!ref"]||(write_record(t,648),write_record(t,649,write_BrtCellIgnoreEC(safe_decode_range(n["!ref"]))),write_record(t,650))}function write_HLINKS(t,n,_){n["!links"].forEach(function(x){if(x[1].Target){var E=add_rels(_,-1,x[1].Target.replace(/#.*$/,""),RELS.HLINK);write_record(t,494,write_BrtHLink(x,E))}}),delete n["!links"]}function write_LEGACYDRAWING(t,n,_,x){if(n["!comments"].length>0){var E=add_rels(x,-1,"../drawings/vmlDrawing"+(_+1)+".vml",RELS.VML);write_record(t,551,write_RelID("rId"+E)),n["!legacy"]=E}}function write_AUTOFILTER(t,n,_,x){if(n["!autofilter"]){var E=n["!autofilter"],S=typeof E.ref=="string"?E.ref:encode_range(E.ref);_.Workbook||(_.Workbook={Sheets:[]}),_.Workbook.Names||(_.Workbook.Names=[]);var C=_.Workbook.Names,T=decode_range(S);T.s.r==T.e.r&&(T.e.r=decode_range(n["!ref"]).e.r,S=encode_range(T));for(var B=0;B<C.length;++B){var A=C[B];if(A.Name=="_xlnm._FilterDatabase"&&A.Sheet==x){A.Ref=formula_quote_sheet_name(_.SheetNames[x])+"!"+fix_range(S);break}}B==C.length&&C.push({Name:"_xlnm._FilterDatabase",Sheet:x,Ref:formula_quote_sheet_name(_.SheetNames[x])+"!"+fix_range(S)}),write_record(t,161,write_UncheckedRfX(safe_decode_range(S))),write_record(t,162)}}function write_WSVIEWS2(t,n,_){write_record(t,133),write_record(t,137,write_BrtBeginWsView(n,_)),write_record(t,138),write_record(t,134)}function write_SHEETPROTECT(t,n){n["!protect"]&&write_record(t,535,write_BrtSheetProtection(n["!protect"]))}function write_ws_bin(t,n,_,x){var E=buf_array(),S=_.SheetNames[t],C=_.Sheets[S]||{},T=S;try{_&&_.Workbook&&(T=_.Workbook.Sheets[t].CodeName||T)}catch{}var B=safe_decode_range(C["!ref"]||"A1");if(B.e.c>16383||B.e.r>1048575){if(n.WTF)throw new Error("Range "+(C["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");B.e.c=Math.min(B.e.c,16383),B.e.r=Math.min(B.e.c,1048575)}return C["!links"]=[],C["!comments"]=[],write_record(E,129),(_.vbaraw||C["!outline"])&&write_record(E,147,write_BrtWsProp(T,C["!outline"])),write_record(E,148,write_BrtWsDim(B)),write_WSVIEWS2(E,C,_.Workbook),write_COLINFOS(E,C),write_CELLTABLE(E,C,t,n),write_SHEETPROTECT(E,C),write_AUTOFILTER(E,C,_,t),write_MERGECELLS(E,C),write_HLINKS(E,C,x),C["!margins"]&&write_record(E,476,write_BrtMargins(C["!margins"])),(!n||n.ignoreEC||n.ignoreEC==null)&&write_IGNOREECS(E,C),write_LEGACYDRAWING(E,C,t,x),write_record(E,130),E.end()}function parse_Cache(t){var n=[],_=t.match(/^<c:numCache>/),x;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(S){var C=S.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);C&&(n[+C[1]]=_?+C[2]:C[2])});var E=unescapexml((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(S){x=S.replace(/<.*?>/g,"")}),[n,E,x]}function parse_chart(t,n,_,x,E,S){var C=S||{"!type":"chart"};if(!t)return S;var T=0,B=0,A="A",I={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(D){var M=parse_Cache(D);I.s.r=I.s.c=0,I.e.c=T,A=encode_col(T),M[0].forEach(function(V,L){C["!data"]?(C["!data"][L]||(C["!data"][L]=[]),C["!data"][L][T]={t:"n",v:V,z:M[1]}):C[A+encode_row(L)]={t:"n",v:V,z:M[1]},B=L}),I.e.r<B&&(I.e.r=B),++T}),T>0&&(C["!ref"]=encode_range(I)),C}function parse_cs_xml(t,n,_,x,E){if(!t)return t;x||(x={"!id":{}});var S={"!type":"chart","!drawel":null,"!rel":""},C,T=t.match(sheetprregex);return T&&parse_ws_xml_sheetpr(T[0],S,E,_),(C=t.match(/drawing r:id="(.*?)"/))&&(S["!rel"]=C[1]),x["!id"][S["!rel"]]&&(S["!drawel"]=x["!id"][S["!rel"]]),S}function parse_BrtCsProp(t,n){t.l+=10;var _=parse_XLWideString(t);return{name:_}}function parse_cs_bin(t,n,_,x,E){if(!t)return t;x||(x={"!id":{}});var S={"!type":"chart","!drawel":null,"!rel":""},C=!1;return recordhopper(t,function(B,A,I){switch(I){case 550:S["!rel"]=B;break;case 651:E.Sheets[_]||(E.Sheets[_]={}),B.name&&(E.Sheets[_].CodeName=B.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:C=!0;break;case 36:C=!1;break;case 37:break;case 38:break;default:if(!(A.T>0)){if(!(A.T<0)){if(!C||n.WTF)throw new Error("Unexpected record 0x"+I.toString(16))}}}},n),x["!id"][S["!rel"]]&&(S["!drawel"]=x["!id"][S["!rel"]]),S}var WBPropsDef=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],WBViewDef=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],SheetDef=[],CalcPrDef=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function push_defaults_array(t,n){for(var _=0;_!=t.length;++_)for(var x=t[_],E=0;E!=n.length;++E){var S=n[E];if(x[S[0]]==null)x[S[0]]=S[1];else switch(S[2]){case"bool":typeof x[S[0]]=="string"&&(x[S[0]]=parsexmlbool(x[S[0]]));break;case"int":typeof x[S[0]]=="string"&&(x[S[0]]=parseInt(x[S[0]],10));break}}}function push_defaults(t,n){for(var _=0;_!=n.length;++_){var x=n[_];if(t[x[0]]==null)t[x[0]]=x[1];else switch(x[2]){case"bool":typeof t[x[0]]=="string"&&(t[x[0]]=parsexmlbool(t[x[0]]));break;case"int":typeof t[x[0]]=="string"&&(t[x[0]]=parseInt(t[x[0]],10));break}}}function parse_wb_defaults(t){push_defaults(t.WBProps,WBPropsDef),push_defaults(t.CalcPr,CalcPrDef),push_defaults_array(t.WBView,WBViewDef),push_defaults_array(t.Sheets,SheetDef),_ssfopts.date1904=parsexmlbool(t.WBProps.date1904)}function safe1904(t){return!t.Workbook||!t.Workbook.WBProps?"false":parsexmlbool(t.Workbook.WBProps.date1904)?"true":"false"}var badchars=":][*?/\\".split("");function check_ws_name(t,n){if(t.length>31){if(n)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var _=!0;return badchars.forEach(function(x){if(t.indexOf(x)!=-1){if(!n)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");_=!1}}),_}function check_wb_names(t,n,_){t.forEach(function(x,E){check_ws_name(x);for(var S=0;S<E;++S)if(x==t[S])throw new Error("Duplicate Sheet Name: "+x);if(_){var C=n&&n[E]&&n[E].CodeName||x;if(C.charCodeAt(0)==95&&C.length>22)throw new Error("Bad Code Name: Worksheet"+C)}})}function check_wb(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var n=t.Workbook&&t.Workbook.Sheets||[];check_wb_names(t.SheetNames,n,!!t.vbaraw);for(var _=0;_<t.SheetNames.length;++_)check_ws(t.Sheets[t.SheetNames[_]],t.SheetNames[_],_);t.SheetNames.forEach(function(x,E){var S=t.Sheets[x];if(!(!S||!S["!autofilter"])){var C;t.Workbook||(t.Workbook={}),t.Workbook.Names||(t.Workbook.Names=[]),t.Workbook.Names.forEach(function(B){B.Name=="_xlnm._FilterDatabase"&&B.Sheet==E&&(C=B)});var T=formula_quote_sheet_name(x)+"!"+fix_range(S["!autofilter"].ref);C?C.Ref=T:t.Workbook.Names.push({Name:"_xlnm._FilterDatabase",Sheet:E,Ref:T})}})}var wbnsregex=/<\w+:workbook/;function parse_wb_xml(t,n){if(!t)throw new Error("Could not find file");var _={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},x=!1,E="xmlns",S={},C=0;if(t.replace(tagregex,function(B,A){var I=parsexmltag(B);switch(strip_ns(I[0])){case"<?xml":break;case"<workbook":B.match(wbnsregex)&&(E="xmlns"+B.match(/<(\w+):/)[1]),_.xmlns=I[E];break;case"</workbook>":break;case"<fileVersion":delete I[0],_.AppVersion=I;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":WBPropsDef.forEach(function(D){if(I[D[0]]!=null)switch(D[2]){case"bool":_.WBProps[D[0]]=parsexmlbool(I[D[0]]);break;case"int":_.WBProps[D[0]]=parseInt(I[D[0]],10);break;default:_.WBProps[D[0]]=I[D[0]]}}),I.codeName&&(_.WBProps.CodeName=utf8read(I.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete I[0],_.WBView.push(I);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(I.state){case"hidden":I.Hidden=1;break;case"veryHidden":I.Hidden=2;break;default:I.Hidden=0}delete I.state,I.name=unescapexml(utf8read(I.name)),delete I[0],_.Sheets.push(I);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":x=!0;break;case"</definedNames>":x=!1;break;case"<definedName":S={},S.Name=utf8read(I.name),I.comment&&(S.Comment=I.comment),I.localSheetId&&(S.Sheet=+I.localSheetId),parsexmlbool(I.hidden||"0")&&(S.Hidden=!0),C=A+B.length;break;case"</definedName>":S.Ref=unescapexml(utf8read(t.slice(C,A))),_.Names.push(S);break;case"<definedName/>":break;case"<calcPr":delete I[0],_.CalcPr=I;break;case"<calcPr/>":delete I[0],_.CalcPr=I;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":x=!0;break;case"</ext>":x=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":x=!0;break;case"</AlternateContent>":x=!1;break;case"<revisionPtr":break;default:if(!x&&n.WTF)throw new Error("unrecognized "+I[0]+" in workbook")}return B}),XMLNS_main.indexOf(_.xmlns)===-1)throw new Error("Unknown Namespace: "+_.xmlns);return parse_wb_defaults(_),_}function write_wb_xml(t){var n=[XML_HEADER];n[n.length]=writextag("workbook",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r});var _=t.Workbook&&(t.Workbook.Names||[]).length>0,x={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(WBPropsDef.forEach(function(T){t.Workbook.WBProps[T[0]]!=null&&t.Workbook.WBProps[T[0]]!=T[1]&&(x[T[0]]=t.Workbook.WBProps[T[0]])}),t.Workbook.WBProps.CodeName&&(x.codeName=t.Workbook.WBProps.CodeName,delete x.CodeName)),n[n.length]=writextag("workbookPr",null,x);var E=t.Workbook&&t.Workbook.Sheets||[],S=0;if(E&&E[0]&&E[0].Hidden){for(n[n.length]="<bookViews>",S=0;S!=t.SheetNames.length&&!(!E[S]||!E[S].Hidden);++S);S==t.SheetNames.length&&(S=0),n[n.length]='<workbookView firstSheet="'+S+'" activeTab="'+S+'"/>',n[n.length]="</bookViews>"}for(n[n.length]="<sheets>",S=0;S!=t.SheetNames.length;++S){var C={name:escapexml(t.SheetNames[S].slice(0,31))};if(C.sheetId=""+(S+1),C["r:id"]="rId"+(S+1),E[S])switch(E[S].Hidden){case 1:C.state="hidden";break;case 2:C.state="veryHidden";break}n[n.length]=writextag("sheet",null,C)}return n[n.length]="</sheets>",_&&(n[n.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(T){var B={name:T.Name};T.Comment&&(B.comment=T.Comment),T.Sheet!=null&&(B.localSheetId=""+T.Sheet),T.Hidden&&(B.hidden="1"),T.Ref&&(n[n.length]=writextag("definedName",escapexml(T.Ref),B))}),n[n.length]="</definedNames>"),n.length>2&&(n[n.length]="</workbook>",n[1]=n[1].replace("/>",">")),n.join("")}function parse_BrtBundleSh(t,n){var _={};return _.Hidden=t.read_shift(4),_.iTabID=t.read_shift(4),_.strRelID=parse_RelID(t),_.name=parse_XLWideString(t),_}function write_BrtBundleSh(t,n){return n||(n=new_buf(127)),n.write_shift(4,t.Hidden),n.write_shift(4,t.iTabID),write_RelID(t.strRelID,n),write_XLWideString(t.name.slice(0,31),n),n.length>n.l?n.slice(0,n.l):n}function parse_BrtWbProp(t,n){var _={},x=t.read_shift(4);_.defaultThemeVersion=t.read_shift(4);var E=n>8?parse_XLWideString(t):"";return E.length>0&&(_.CodeName=E),_.autoCompressPictures=!!(x&65536),_.backupFile=!!(x&64),_.checkCompatibility=!!(x&4096),_.date1904=!!(x&1),_.filterPrivacy=!!(x&8),_.hidePivotFieldList=!!(x&1024),_.promptedSolutions=!!(x&16),_.publishItems=!!(x&2048),_.refreshAllConnections=!!(x&262144),_.saveExternalLinkValues=!!(x&128),_.showBorderUnselectedTables=!!(x&4),_.showInkAnnotation=!!(x&32),_.showObjects=["all","placeholders","none"][x>>13&3],_.showPivotChartFilter=!!(x&32768),_.updateLinks=["userSet","never","always"][x>>8&3],_}function write_BrtWbProp(t,n){n||(n=new_buf(72));var _=0;return t&&(t.date1904&&(_|=1),t.filterPrivacy&&(_|=8)),n.write_shift(4,_),n.write_shift(4,0),write_XLSBCodeName(t&&t.CodeName||"ThisWorkbook",n),n.slice(0,n.l)}function parse_BrtFRTArchID$(t,n){var _={};return t.read_shift(4),_.ArchID=t.read_shift(4),t.l+=n-8,_}function parse_BrtName(t,n,_){var x=t.l+n,E=t.read_shift(4);t.l+=1;var S=t.read_shift(4),C=parse_XLNameWideString(t),T=parse_XLSBNameParsedFormula(t,0,_),B=parse_XLNullableWideString(t);E&32&&(C="_xlnm."+C),t.l=x;var A={Name:C,Ptg:T,Flags:E};return S<268435455&&(A.Sheet=S),B&&(A.Comment=B),A}function write_BrtName(t,n){var _=new_buf(9),x=0,E=t.Name;XLSLblBuiltIn.indexOf(E)>-1&&(x|=32,E=E.slice(6)),_.write_shift(4,x),_.write_shift(1,0),_.write_shift(4,t.Sheet==null?4294967295:t.Sheet);var S=[_,write_XLWideString(E),write_XLSBNameParsedFormula(t.Ref,n)];if(t.Comment)S.push(write_XLNullableWideString(t.Comment));else{var C=new_buf(4);C.write_shift(4,4294967295),S.push(C)}return bconcat(S)}function parse_wb_bin(t,n){var _={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},x=[],E=!1;n||(n={}),n.biff=12;var S=[],C=[[]];return C.SheetNames=[],C.XTI=[],XLSBRecordEnum[16]={n:"BrtFRTArchID$",f:parse_BrtFRTArchID$},recordhopper(t,function(B,A,I){switch(I){case 156:C.SheetNames.push(B.name),_.Sheets.push(B);break;case 153:_.WBProps=B;break;case 39:B.Sheet!=null&&(n.SID=B.Sheet),B.Ref=stringify_formula(B.Ptg,null,null,C,n),delete n.SID,delete B.Ptg,S.push(B);break;case 1036:break;case 357:case 358:case 355:case 667:C[0].length?C.push([I,B]):C[0]=[I,B],C[C.length-1].XTI=[];break;case 362:C.length===0&&(C[0]=[],C[0].XTI=[]),C[C.length-1].XTI=C[C.length-1].XTI.concat(B),C.XTI=C.XTI.concat(B);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:x.push(I),E=!0;break;case 36:x.pop(),E=!1;break;case 37:x.push(I),E=!0;break;case 38:x.pop(),E=!1;break;case 16:break;default:if(!A.T){if(!E||n.WTF&&x[x.length-1]!=37&&x[x.length-1]!=35)throw new Error("Unexpected record 0x"+I.toString(16))}}},n),parse_wb_defaults(_),_.Names=S,_.supbooks=C,_}function write_BUNDLESHS(t,n){write_record(t,143);for(var _=0;_!=n.SheetNames.length;++_){var x=n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[_]&&n.Workbook.Sheets[_].Hidden||0,E={Hidden:x,iTabID:_+1,strRelID:"rId"+(_+1),name:n.SheetNames[_]};write_record(t,156,write_BrtBundleSh(E))}write_record(t,144)}function write_BrtFileVersion(t,n){n||(n=new_buf(127));for(var _=0;_!=4;++_)n.write_shift(4,0);return write_XLWideString("SheetJS",n),write_XLWideString(XLSX.version,n),write_XLWideString(XLSX.version,n),write_XLWideString("7262",n),n.length>n.l?n.slice(0,n.l):n}function write_BrtBookView(t,n){n||(n=new_buf(29)),n.write_shift(-4,0),n.write_shift(-4,460),n.write_shift(4,28800),n.write_shift(4,17600),n.write_shift(4,500),n.write_shift(4,t),n.write_shift(4,t);var _=120;return n.write_shift(1,_),n.length>n.l?n.slice(0,n.l):n}function write_BOOKVIEWS(t,n){if(!(!n.Workbook||!n.Workbook.Sheets)){for(var _=n.Workbook.Sheets,x=0,E=-1,S=-1;x<_.length;++x)!_[x]||!_[x].Hidden&&E==-1?E=x:_[x].Hidden==1&&S==-1&&(S=x);S>E||(write_record(t,135),write_record(t,158,write_BrtBookView(E)),write_record(t,136))}}function write_BRTNAMES(t,n){!n.Workbook||!n.Workbook.Names||n.Workbook.Names.forEach(function(_){try{if(_.Flags&14)return;write_record(t,39,write_BrtName(_,n))}catch{console.error("Could not serialize defined name "+JSON.stringify(_))}})}function write_SELF_EXTERNS_xlsb(t){var n=t.SheetNames.length,_=new_buf(12*n+28);_.write_shift(4,n+2),_.write_shift(4,0),_.write_shift(4,-2),_.write_shift(4,-2),_.write_shift(4,0),_.write_shift(4,-1),_.write_shift(4,-1);for(var x=0;x<n;++x)_.write_shift(4,0),_.write_shift(4,x),_.write_shift(4,x);return _}function write_EXTERNALS_xlsb(t,n){write_record(t,353),write_record(t,357),write_record(t,362,write_SELF_EXTERNS_xlsb(n)),write_record(t,354)}function write_wb_bin(t,n){var _=buf_array();return write_record(_,131),write_record(_,128,write_BrtFileVersion()),write_record(_,153,write_BrtWbProp(t.Workbook&&t.Workbook.WBProps||null)),write_BOOKVIEWS(_,t),write_BUNDLESHS(_,t),write_EXTERNALS_xlsb(_,t),(t.Workbook||{}).Names&&write_BRTNAMES(_,t),write_record(_,132),_.end()}function parse_wb(t,n,_){return n.slice(-4)===".bin"?parse_wb_bin(t,_):parse_wb_xml(t,_)}function parse_ws(t,n,_,x,E,S,C,T){return n.slice(-4)===".bin"?parse_ws_bin(t,x,_,E,S,C,T):parse_ws_xml(t,x,_,E,S,C,T)}function parse_cs(t,n,_,x,E,S,C,T){return n.slice(-4)===".bin"?parse_cs_bin(t,x,_,E,S):parse_cs_xml(t,x,_,E,S)}function parse_ms(t,n,_,x,E,S,C,T){return n.slice(-4)===".bin"?parse_ms_bin():parse_ms_xml()}function parse_ds(t,n,_,x,E,S,C,T){return n.slice(-4)===".bin"?parse_ds_bin():parse_ds_xml()}function parse_sty(t,n,_,x){return n.slice(-4)===".bin"?parse_sty_bin(t,_,x):parse_sty_xml(t,_,x)}function parse_sst(t,n,_){return n.slice(-4)===".bin"?parse_sst_bin(t,_):parse_sst_xml(t,_)}function parse_cmnt(t,n,_){return n.slice(-4)===".bin"?parse_comments_bin(t,_):parse_comments_xml(t,_)}function parse_cc(t,n,_){return n.slice(-4)===".bin"?parse_cc_bin(t):parse_cc_xml(t)}function parse_xlink(t,n,_,x){return _.slice(-4)===".bin"?parse_xlink_bin(t,n,_,x):void 0}function parse_xlmeta(t,n,_){return n.slice(-4)===".bin"?parse_xlmeta_bin(t,n,_):parse_xlmeta_xml(t,n,_)}var attregexg2=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,attregex2=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function xlml_parsexmltag(t,n){var _=t.split(/\s+/),x=[];if(n||(x[0]=_[0]),_.length===1)return x;var E=t.match(attregexg2),S,C,T,B;if(E)for(B=0;B!=E.length;++B)S=E[B].match(attregex2),(C=S[1].indexOf(":"))===-1?x[S[1]]=S[2].slice(1,S[2].length-1):(S[1].slice(0,6)==="xmlns:"?T="xmlns"+S[1].slice(6):T=S[1].slice(C+1),x[T]=S[2].slice(1,S[2].length-1));return x}function xlml_parsexmltagobj(t){var n=t.split(/\s+/),_={};if(n.length===1)return _;var x=t.match(attregexg2),E,S,C,T;if(x)for(T=0;T!=x.length;++T)E=x[T].match(attregex2),(S=E[1].indexOf(":"))===-1?_[E[1]]=E[2].slice(1,E[2].length-1):(E[1].slice(0,6)==="xmlns:"?C="xmlns"+E[1].slice(6):C=E[1].slice(S+1),_[C]=E[2].slice(1,E[2].length-1));return _}var XLMLFormatMap;function xlml_format(t,n){var _=XLMLFormatMap[t]||unescapexml(t);return _==="General"?SSF_general(n):SSF_format(_,n)}function xlml_set_custprop(t,n,_,x){var E=x;switch((_[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":E=parsexmlbool(x);break;case"i2":case"int":E=parseInt(x,10);break;case"r4":case"float":E=parseFloat(x);break;case"date":case"dateTime.tz":E=parseDate(x);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+_[0])}t[unescapexml(n)]=E}function safe_format_xlml(t,n,_){if(t.t!=="z"){if(!_||_.cellText!==!1)try{t.t==="e"?t.w=t.w||BErr[t.v]:n==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=SSF_general_num(t.v):t.w=SSF_general(t.v):t.w=xlml_format(n||"General",t.v)}catch(S){if(_.WTF)throw S}try{var x=XLMLFormatMap[n]||n||"General";if(_.cellNF&&(t.z=x),_.cellDates&&t.t=="n"&&fmt_is_date(x)){var E=SSF_parse_date_code(t.v);E&&(t.t="d",t.v=new Date(E.y,E.m-1,E.d,E.H,E.M,E.S,E.u))}}catch(S){if(_.WTF)throw S}}}function process_style_xlml(t,n,_){if(_.cellStyles&&n.Interior){var x=n.Interior;x.Pattern&&(x.patternType=XLMLPatternTypeMap[x.Pattern]||x.Pattern)}t[n.ID]=n}function parse_xlml_data(t,n,_,x,E,S,C,T,B,A){var I="General",D=x.StyleID,M={};A=A||{};var V=[],L=0;for(D===void 0&&T&&(D=T.StyleID),D===void 0&&C&&(D=C.StyleID);S[D]!==void 0&&(S[D].nf&&(I=S[D].nf),S[D].Interior&&V.push(S[D].Interior),!!S[D].Parent);)D=S[D].Parent;switch(_.Type){case"Boolean":x.t="b",x.v=parsexmlbool(t);break;case"String":x.t="s",x.r=xlml_fixstr(unescapexml(t)),x.v=t.indexOf("<")>-1?unescapexml(n||t).replace(/<.*?>/g,""):x.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),x.v=(parseDate(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),x.v!==x.v?x.v=unescapexml(t):x.v<60&&(x.v=x.v-1),(!I||I=="General")&&(I="yyyy-mm-dd");case"Number":x.v===void 0&&(x.v=+t),x.t||(x.t="n");break;case"Error":x.t="e",x.v=RBErr[t],A.cellText!==!1&&(x.w=t);break;default:t==""&&n==""?x.t="z":(x.t="s",x.v=xlml_fixstr(n||t));break}if(safe_format_xlml(x,I,A),A.cellFormula!==!1)if(x.Formula){var F=unescapexml(x.Formula);F.charCodeAt(0)==61&&(F=F.slice(1)),x.f=rc_to_a1(F,E),delete x.Formula,x.ArrayRange=="RC"?x.F=rc_to_a1("RC:RC",E):x.ArrayRange&&(x.F=rc_to_a1(x.ArrayRange,E),B.push([safe_decode_range(x.F),x.F]))}else for(L=0;L<B.length;++L)E.r>=B[L][0].s.r&&E.r<=B[L][0].e.r&&E.c>=B[L][0].s.c&&E.c<=B[L][0].e.c&&(x.F=B[L][1]);A.cellStyles&&(V.forEach(function(j){!M.patternType&&j.patternType&&(M.patternType=j.patternType)}),x.s=M),x.StyleID!==void 0&&(x.ixfe=x.StyleID)}function xlml_prefix_dname(t){return XLSLblBuiltIn.indexOf("_xlnm."+t)>-1?"_xlnm."+t:t}function xlml_clean_comment(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function parse_xlml_xml(t,n){var _=n||{};make_ssf();var x=debom(xlml_normalize(t));(_.type=="binary"||_.type=="array"||_.type=="base64")&&(x=utf8read(x));var E=x.slice(0,1024).toLowerCase(),S=!1;if(E=E.replace(/".*?"/g,""),(E.indexOf(">")&1023)>Math.min(E.indexOf(",")&1023,E.indexOf(";")&1023)){var C=dup(_);return C.type="string",PRN.to_workbook(x,C)}if(E.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Re){E.indexOf("<"+Re)>=0&&(S=!0)}),S)return html_to_workbook(x,_);XLMLFormatMap={"General Number":"General","General Date":table_fmt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":table_fmt[15],"Short Date":table_fmt[14],"Long Time":table_fmt[19],"Medium Time":table_fmt[18],"Short Time":table_fmt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:table_fmt[2],Standard:table_fmt[4],Percent:table_fmt[10],Scientific:table_fmt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var T,B=[],A,I={},D=[],M={},V="";_.dense&&(M["!data"]=[]);var L={},F={},j=xlml_parsexmltag('<Data ss:Type="String">'),U=0,H=0,Y=0,Z={s:{r:2e6,c:2e6},e:{r:0,c:0}},ne={},re={},X="",ce=0,ue=[],_e={},ye={},ie=0,W=[],O=[],z={},J=[],ee,ae=!1,oe=[],se=[],G={},q=0,te=0,fe={Sheets:[],WBProps:{date1904:!1}},he={};xlmlregex.lastIndex=0,x=x.replace(/<!--([\s\S]*?)-->/mg,"");for(var Ee="";T=xlmlregex.exec(x);)switch(T[3]=(Ee=T[3]).toLowerCase()){case"data":if(Ee=="data"){if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"))}else T[0].charAt(T[0].length-2)!=="/"&&B.push([T[3],!0]);break}if(B[B.length-1][1])break;T[1]==="/"?parse_xlml_data(x.slice(U,T.index),X,j,B[B.length-1][0]=="comment"?z:L,{c:H,r:Y},ne,J[H],F,oe,_):(X="",j=xlml_parsexmltag(T[0]),U=T.index+T[0].length);break;case"cell":if(T[1]==="/")if(O.length>0&&(L.c=O),(!_.sheetRows||_.sheetRows>Y)&&L.v!==void 0&&(_.dense?(M["!data"][Y]||(M["!data"][Y]=[]),M["!data"][Y][H]=L):M[encode_col(H)+encode_row(Y)]=L),L.HRef&&(L.l={Target:unescapexml(L.HRef)},L.HRefScreenTip&&(L.l.Tooltip=L.HRefScreenTip),delete L.HRef,delete L.HRefScreenTip),(L.MergeAcross||L.MergeDown)&&(q=H+(parseInt(L.MergeAcross,10)|0),te=Y+(parseInt(L.MergeDown,10)|0),(q>H||te>Y)&&ue.push({s:{c:H,r:Y},e:{c:q,r:te}})),!_.sheetStubs)L.MergeAcross?H=q+1:++H;else if(L.MergeAcross||L.MergeDown){for(var we=H;we<=q;++we)for(var xe=Y;xe<=te;++xe)(we>H||xe>Y)&&(_.dense?(M["!data"][xe]||(M["!data"][xe]=[]),M["!data"][xe][we]={t:"z"}):M[encode_col(we)+encode_row(xe)]={t:"z"});H=q+1}else++H;else L=xlml_parsexmltagobj(T[0]),L.Index&&(H=+L.Index-1),H<Z.s.c&&(Z.s.c=H),H>Z.e.c&&(Z.e.c=H),T[0].slice(-2)==="/>"&&++H,O=[];break;case"row":T[1]==="/"||T[0].slice(-2)==="/>"?(Y<Z.s.r&&(Z.s.r=Y),Y>Z.e.r&&(Z.e.r=Y),T[0].slice(-2)==="/>"&&(F=xlml_parsexmltag(T[0]),F.Index&&(Y=+F.Index-1)),H=0,++Y):(F=xlml_parsexmltag(T[0]),F.Index&&(Y=+F.Index-1),G={},(F.AutoFitHeight=="0"||F.Height)&&(G.hpx=parseInt(F.Height,10),G.hpt=px2pt(G.hpx),se[Y]=G),F.Hidden=="1"&&(G.hidden=!0,se[Y]=G));break;case"worksheet":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"));D.push(V),Z.s.r<=Z.e.r&&Z.s.c<=Z.e.c&&(M["!ref"]=encode_range(Z),_.sheetRows&&_.sheetRows<=Z.e.r&&(M["!fullref"]=M["!ref"],Z.e.r=_.sheetRows-1,M["!ref"]=encode_range(Z))),ue.length&&(M["!merges"]=ue),J.length>0&&(M["!cols"]=J),se.length>0&&(M["!rows"]=se),I[V]=M}else Z={s:{r:2e6,c:2e6},e:{r:0,c:0}},Y=H=0,B.push([T[3],!1]),A=xlml_parsexmltag(T[0]),V=unescapexml(A.Name),M={},_.dense&&(M["!data"]=[]),ue=[],oe=[],se=[],he={name:V,Hidden:0},fe.Sheets.push(he);break;case"table":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"))}else{if(T[0].slice(-2)=="/>")break;B.push([T[3],!1]),J=[],ae=!1}break;case"style":T[1]==="/"?process_style_xlml(ne,re,_):re=xlml_parsexmltag(T[0]);break;case"numberformat":re.nf=unescapexml(xlml_parsexmltag(T[0]).Format||"General"),XLMLFormatMap[re.nf]&&(re.nf=XLMLFormatMap[re.nf]);for(var $e=0;$e!=392&&table_fmt[$e]!=re.nf;++$e);if($e==392){for($e=57;$e!=392;++$e)if(table_fmt[$e]==null){SSF__load(re.nf,$e);break}}break;case"column":if(B[B.length-1][0]!=="table"||T[1]==="/")break;if(ee=xlml_parsexmltag(T[0]),ee.Hidden&&(ee.hidden=!0,delete ee.Hidden),ee.Width&&(ee.wpx=parseInt(ee.Width,10)),!ae&&ee.wpx>10){ae=!0,MDW=DEF_MDW;for(var ge=0;ge<J.length;++ge)J[ge]&&process_col(J[ge])}ae&&process_col(ee),J[ee.Index-1||J.length]=ee;for(var Se=0;Se<+ee.Span;++Se)J[J.length]=dup(ee);break;case"namedrange":if(T[1]==="/")break;fe.Names||(fe.Names=[]);var me=parsexmltag(T[0]),Be={Name:xlml_prefix_dname(me.Name),Ref:rc_to_a1(me.RefersTo.slice(1),{r:0,c:0})};fe.Sheets.length>0&&(Be.Sheet=fe.Sheets.length-1),fe.Names.push(Be);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(T[0].slice(-2)==="/>")break;T[1]==="/"?X+=x.slice(ce,T.index):ce=T.index+T[0].length;break;case"interior":if(!_.cellStyles)break;re.Interior=xlml_parsexmltag(T[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(T[0].slice(-2)==="/>")break;T[1]==="/"?xlml_set_prop(_e,Ee,x.slice(ie,T.index)):ie=T.index+T[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"))}else B.push([T[3],!1]);break;case"comment":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"));xlml_clean_comment(z),O.push(z)}else B.push([T[3],!1]),A=xlml_parsexmltag(T[0]),z={a:A.Author};break;case"autofilter":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"))}else if(T[0].charAt(T[0].length-2)!=="/"){var ve=xlml_parsexmltag(T[0]);M["!autofilter"]={ref:rc_to_a1(ve.Range).replace(/\$/g,"")},B.push([T[3],!0])}break;case"name":break;case"datavalidation":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"))}else T[0].charAt(T[0].length-2)!=="/"&&B.push([T[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(T[1]==="/"){if((A=B.pop())[0]!==T[3])throw new Error("Bad state: "+A.join("|"))}else T[0].charAt(T[0].length-2)!=="/"&&B.push([T[3],!0]);break;case"null":break;default:if(B.length==0&&T[3]=="document"||B.length==0&&T[3]=="uof")return parse_fods(x,_);var Ae=!0;switch(B[B.length-1][0]){case"officedocumentsettings":switch(T[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ae=!1}break;case"componentoptions":switch(T[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ae=!1}break;case"excelworkbook":switch(T[3]){case"date1904":fe.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ae=!1}break;case"workbookoptions":switch(T[3]){case"owcversion":break;case"height":break;case"width":break;default:Ae=!1}break;case"worksheetoptions":switch(T[3]){case"visible":if(T[0].slice(-2)!=="/>")if(T[1]==="/")switch(x.slice(ie,T.index)){case"SheetHidden":he.Hidden=1;break;case"SheetVeryHidden":he.Hidden=2;break}else ie=T.index+T[0].length;break;case"header":M["!margins"]||default_margins(M["!margins"]={},"xlml"),isNaN(+parsexmltag(T[0]).Margin)||(M["!margins"].header=+parsexmltag(T[0]).Margin);break;case"footer":M["!margins"]||default_margins(M["!margins"]={},"xlml"),isNaN(+parsexmltag(T[0]).Margin)||(M["!margins"].footer=+parsexmltag(T[0]).Margin);break;case"pagemargins":var Ve=parsexmltag(T[0]);M["!margins"]||default_margins(M["!margins"]={},"xlml"),isNaN(+Ve.Top)||(M["!margins"].top=+Ve.Top),isNaN(+Ve.Left)||(M["!margins"].left=+Ve.Left),isNaN(+Ve.Right)||(M["!margins"].right=+Ve.Right),isNaN(+Ve.Bottom)||(M["!margins"].bottom=+Ve.Bottom);break;case"displayrighttoleft":fe.Views||(fe.Views=[]),fe.Views[0]||(fe.Views[0]={}),fe.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":M["!outline"]||(M["!outline"]={}),M["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":M["!outline"]||(M["!outline"]={}),M["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ae=!1}break;case"pivottable":case"pivotcache":switch(T[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ae=!1}break;case"pagebreaks":switch(T[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ae=!1}break;case"autofilter":switch(T[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ae=!1}break;case"querytable":switch(T[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ae=!1}break;case"datavalidation":switch(T[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ae=!1}break;case"sorting":case"conditionalformatting":switch(T[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ae=!1}break;case"mapinfo":case"schema":case"data":switch(T[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ae=!1}break;case"smarttags":break;default:Ae=!1;break}if(Ae||T[3].match(/!\[CDATA/))break;if(!B[B.length-1][1])throw"Unrecognized tag: "+T[3]+"|"+B.join("|");if(B[B.length-1][0]==="customdocumentproperties"){if(T[0].slice(-2)==="/>")break;T[1]==="/"?xlml_set_custprop(ye,Ee,W,x.slice(ie,T.index)):(W=T,ie=T.index+T[0].length);break}if(_.WTF)throw"Unrecognized tag: "+T[3]+"|"+B.join("|")}var Pe={};return!_.bookSheets&&!_.bookProps&&(Pe.Sheets=I),Pe.SheetNames=D,Pe.Workbook=fe,Pe.SSF=dup(table_fmt),Pe.Props=_e,Pe.Custprops=ye,Pe.bookType="xlml",Pe}function parse_xlml(t,n){switch(fix_read_opts(n=n||{}),n.type||"base64"){case"base64":return parse_xlml_xml(Base64_decode(t),n);case"binary":case"buffer":case"file":return parse_xlml_xml(t,n);case"array":return parse_xlml_xml(a2s(t),n)}}function write_props_xlml(t,n){var _=[];return t.Props&&_.push(xlml_write_docprops(t.Props,n)),t.Custprops&&_.push(xlml_write_custprops(t.Props,t.Custprops)),_.join("")}function write_wb_xlml(t){return(((t||{}).Workbook||{}).WBProps||{}).date1904?'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"><Date1904/></ExcelWorkbook>':""}function write_sty_xlml(t,n){var _=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return n.cellXfs.forEach(function(x,E){var S=[];S.push(writextag("NumberFormat",null,{"ss:Format":escapexml(table_fmt[x.numFmtId])}));var C={"ss:ID":"s"+(21+E)};_.push(writextag("Style",S.join(""),C))}),writextag("Styles",_.join(""))}function write_name_xlml(t){return writextag("NamedRange",null,{"ss:Name":t.Name.slice(0,6)=="_xlnm."?t.Name.slice(6):t.Name,"ss:RefersTo":"="+a1_to_rc(t.Ref,{r:0,c:0})})}function write_names_xlml(t){if(!((t||{}).Workbook||{}).Names)return"";for(var n=t.Workbook.Names,_=[],x=0;x<n.length;++x){var E=n[x];E.Sheet==null&&(E.Name.match(/^_xlfn\./)||_.push(write_name_xlml(E)))}return writextag("Names",_.join(""))}function write_ws_xlml_names(t,n,_,x){if(!t||!((x||{}).Workbook||{}).Names)return"";for(var E=x.Workbook.Names,S=[],C=0;C<E.length;++C){var T=E[C];T.Sheet==_&&(T.Name.match(/^_xlfn\./)||S.push(write_name_xlml(T)))}return S.join("")}function write_ws_xlml_wsopts(t,n,_,x){if(!t)return"";var E=[];if(t["!margins"]&&(E.push("<PageSetup>"),t["!margins"].header&&E.push(writextag("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&E.push(writextag("Footer",null,{"x:Margin":t["!margins"].footer})),E.push(writextag("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),E.push("</PageSetup>")),x&&x.Workbook&&x.Workbook.Sheets&&x.Workbook.Sheets[_])if(x.Workbook.Sheets[_].Hidden)E.push(writextag("Visible",x.Workbook.Sheets[_].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var S=0;S<_&&!(x.Workbook.Sheets[S]&&!x.Workbook.Sheets[S].Hidden);++S);S==_&&E.push("<Selected/>")}return((((x||{}).Workbook||{}).Views||[])[0]||{}).RTL&&E.push("<DisplayRightToLeft/>"),t["!protect"]&&(E.push(writetag("ProtectContents","True")),t["!protect"].objects&&E.push(writetag("ProtectObjects","True")),t["!protect"].scenarios&&E.push(writetag("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?E.push(writetag("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&E.push(writetag("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(C){t["!protect"][C[0]]&&E.push("<"+C[1]+"/>")})),E.length==0?"":writextag("WorksheetOptions",E.join(""),{xmlns:XLMLNS.x})}function write_ws_xlml_comment(t){return t.map(function(n){var _=xlml_unfixstr(n.t||""),x=writextag("ss:Data",_,{xmlns:"http://www.w3.org/TR/REC-html40"});return writextag("Comment",x,{"ss:Author":n.a})}).join("")}function write_ws_xlml_cell(t,n,_,x,E,S,C){if(!t||t.v==null&&t.f==null)return"";var T={};if(t.f&&(T["ss:Formula"]="="+escapexml(a1_to_rc(t.f,C))),t.F&&t.F.slice(0,n.length)==n){var B=decode_cell(t.F.slice(n.length+1));T["ss:ArrayRange"]="RC:R"+(B.r==C.r?"":"["+(B.r-C.r)+"]")+"C"+(B.c==C.c?"":"["+(B.c-C.c)+"]")}if(t.l&&t.l.Target&&(T["ss:HRef"]=escapexml(t.l.Target),t.l.Tooltip&&(T["x:HRefScreenTip"]=escapexml(t.l.Tooltip))),_["!merges"])for(var A=_["!merges"],I=0;I!=A.length;++I)A[I].s.c!=C.c||A[I].s.r!=C.r||(A[I].e.c>A[I].s.c&&(T["ss:MergeAcross"]=A[I].e.c-A[I].s.c),A[I].e.r>A[I].s.r&&(T["ss:MergeDown"]=A[I].e.r-A[I].s.r));var D="",M="";switch(t.t){case"z":if(!x.sheetStubs)return"";break;case"n":D="Number",M=String(t.v);break;case"b":D="Boolean",M=t.v?"1":"0";break;case"e":D="Error",M=BErr[t.v];break;case"d":D="DateTime",M=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||table_fmt[14]);break;case"s":D="String",M=escapexlml(t.v||"");break}var V=get_cell_style(x.cellXfs,t,x);T["ss:StyleID"]="s"+(21+V),T["ss:Index"]=C.c+1;var L=t.v!=null?M:"",F=t.t=="z"?"":'<Data ss:Type="'+D+'">'+L+"</Data>";return(t.c||[]).length>0&&(F+=write_ws_xlml_comment(t.c)),writextag("Cell",F,T)}function write_ws_xlml_row(t,n){var _='<Row ss:Index="'+(t+1)+'"';return n&&(n.hpt&&!n.hpx&&(n.hpx=pt2px(n.hpt)),n.hpx&&(_+=' ss:AutoFitHeight="0" ss:Height="'+n.hpx+'"'),n.hidden&&(_+=' ss:Hidden="1"')),_+">"}function write_ws_xlml_table(t,n,_,x){if(!t["!ref"])return"";var E=safe_decode_range(t["!ref"]),S=t["!merges"]||[],C=0,T=[];t["!cols"]&&t["!cols"].forEach(function(j,U){process_col(j);var H=!!j.width,Y=col_obj_w(U,j),Z={"ss:Index":U+1};H&&(Z["ss:Width"]=width2px(Y.width)),j.hidden&&(Z["ss:Hidden"]="1"),T.push(writextag("Column",null,Z))});for(var B=t["!data"]!=null,A=E.s.r;A<=E.e.r;++A){for(var I=[write_ws_xlml_row(A,(t["!rows"]||[])[A])],D=E.s.c;D<=E.e.c;++D){var M=!1;for(C=0;C!=S.length;++C)if(!(S[C].s.c>D)&&!(S[C].s.r>A)&&!(S[C].e.c<D)&&!(S[C].e.r<A)){(S[C].s.c!=D||S[C].s.r!=A)&&(M=!0);break}if(!M){var V={r:A,c:D},L=encode_col(D)+encode_row(A),F=B?(t["!data"][A]||[])[D]:t[L];I.push(write_ws_xlml_cell(F,L,t,n,_,x,V))}}I.push("</Row>"),I.length>2&&T.push(I.join(""))}return T.join("")}function write_ws_xlml(t,n,_){var x=[],E=_.SheetNames[t],S=_.Sheets[E],C=S?write_ws_xlml_names(S,n,t,_):"";return C.length>0&&x.push("<Names>"+C+"</Names>"),C=S?write_ws_xlml_table(S,n,t,_):"",C.length>0&&x.push("<Table>"+C+"</Table>"),x.push(write_ws_xlml_wsopts(S,n,t,_)),S["!autofilter"]&&x.push('<AutoFilter x:Range="'+a1_to_rc(fix_range(S["!autofilter"].ref),{r:0,c:0})+'" xmlns="urn:schemas-microsoft-com:office:excel"></AutoFilter>'),x.join("")}function write_xlml(t,n){n||(n={}),t.SSF||(t.SSF=dup(table_fmt)),t.SSF&&(make_ssf(),SSF_load_table(t.SSF),n.revssf=evert_num(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF,n.cellXfs=[],get_cell_style(n.cellXfs,{},{revssf:{General:0}}));var _=[];_.push(write_props_xlml(t,n)),_.push(write_wb_xlml(t)),_.push(""),_.push("");for(var x=0;x<t.SheetNames.length;++x)_.push(writextag("Worksheet",write_ws_xlml(x,n,t),{"ss:Name":escapexml(t.SheetNames[x])}));return _[2]=write_sty_xlml(t,n),_[3]=write_names_xlml(t),XML_HEADER+writextag("Workbook",_.join(""),{xmlns:XLMLNS.ss,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:ss":XLMLNS.ss,"xmlns:dt":XLMLNS.dt,"xmlns:html":XLMLNS.html})}function parse_compobj(t){var n={},_=t.content;if(_.l=28,n.AnsiUserType=_.read_shift(0,"lpstr-ansi"),n.AnsiClipboardFormat=parse_ClipboardFormatOrAnsiString(_),_.length-_.l<=4)return n;var x=_.read_shift(4);if(x==0||x>40||(_.l-=4,n.Reserved1=_.read_shift(0,"lpstr-ansi"),_.length-_.l<=4)||(x=_.read_shift(4),x!==1907505652)||(n.UnicodeClipboardFormat=parse_ClipboardFormatOrUnicodeString(_),x=_.read_shift(4),x==0||x>40))return n;_.l-=4,n.Reserved2=_.read_shift(0,"lpwstr")}var CONTINUE_RT=[60,1084,2066,2165,2175];function slurp(t,n,_,x,E){var S=x,C=[],T=_.slice(_.l,_.l+S);if(E&&E.enc&&E.enc.insitu&&T.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:E.enc.insitu(T)}C.push(T),_.l+=S;for(var B=__readUInt16LE(_,_.l),A=XLSRecordEnum[B],I=0;A!=null&&CONTINUE_RT.indexOf(B)>-1;)S=__readUInt16LE(_,_.l+2),I=_.l+4,B==2066?I+=4:(B==2165||B==2175)&&(I+=12),T=_.slice(I,_.l+4+S),C.push(T),_.l+=4+S,A=XLSRecordEnum[B=__readUInt16LE(_,_.l)];var D=bconcat(C);prep_blob(D,0);var M=0;D.lens=[];for(var V=0;V<C.length;++V)D.lens.push(M),M+=C[V].length;if(D.length<x)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+D.length+" < "+x;return n.f(D,D.length,E)}function safe_format_xf(t,n,_){if(t.t!=="z"&&t.XF){var x=0;try{x=t.z||t.XF.numFmtId||0,n.cellNF&&(t.z=table_fmt[x])}catch(S){if(n.WTF)throw S}if(!n||n.cellText!==!1)try{t.t==="e"?t.w=t.w||BErr[t.v]:x===0||x=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=SSF_general_num(t.v):t.w=SSF_general(t.v):t.w=SSF_format(x,t.v,{date1904:!!_,dateNF:n&&n.dateNF})}catch(S){if(n.WTF)throw S}if(n.cellDates&&x&&t.t=="n"&&fmt_is_date(table_fmt[x]||String(x))){var E=SSF_parse_date_code(t.v);E&&(t.t="d",t.v=new Date(E.y,E.m-1,E.d,E.H,E.M,E.S,E.u))}}}function make_cell(t,n,_){return{v:t,ixfe:n,t:_}}function parse_workbook(t,n){var _={opts:{}},x={},E={};n.dense&&(E["!data"]=[]);var S={},C={},T=null,B=[],A="",I={},D,M="",V,L,F,j,U={},H=[],Y,Z,ne=[],re=[],X={Sheets:[],WBProps:{date1904:!1},Views:[{}]},ce={},ue=function(Le){return Le<8?XLSIcv[Le]:Le<64&&re[Le-8]||XLSIcv[Le]},_e=function(Le,We,Ze){var Qe=We.XF.data;if(!(!Qe||!Qe.patternType||!Ze||!Ze.cellStyles)){We.s={},We.s.patternType=Qe.patternType;var St;(St=rgb2Hex(ue(Qe.icvFore)))&&(We.s.fgColor={rgb:St}),(St=rgb2Hex(ue(Qe.icvBack)))&&(We.s.bgColor={rgb:St})}},ye=function(Le,We,Ze){if(!(G>1)&&!(Ze.sheetRows&&Le.r>=Ze.sheetRows)){if(Ze.cellStyles&&We.XF&&We.XF.data&&_e(Le,We,Ze),delete We.ixfe,delete We.XF,D=Le,M=encode_cell(Le),(!C||!C.s||!C.e)&&(C={s:{r:0,c:0},e:{r:0,c:0}}),Le.r<C.s.r&&(C.s.r=Le.r),Le.c<C.s.c&&(C.s.c=Le.c),Le.r+1>C.e.r&&(C.e.r=Le.r+1),Le.c+1>C.e.c&&(C.e.c=Le.c+1),Ze.cellFormula&&We.f){for(var Qe=0;Qe<H.length;++Qe)if(!(H[Qe][0].s.c>Le.c||H[Qe][0].s.r>Le.r)&&!(H[Qe][0].e.c<Le.c||H[Qe][0].e.r<Le.r)){We.F=encode_range(H[Qe][0]),(H[Qe][0].s.c!=Le.c||H[Qe][0].s.r!=Le.r)&&delete We.f,We.f&&(We.f=""+stringify_formula(H[Qe][1],C,Le,oe,ie));break}}Ze.dense?(E["!data"][Le.r]||(E["!data"][Le.r]=[]),E["!data"][Le.r][Le.c]=We):E[M]=We}},ie={enc:!1,sbcch:0,snames:[],sharedf:U,arrayf:H,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!n&&!!n.cellStyles,WTF:!!n&&!!n.wtf};n.password&&(ie.password=n.password);var W,O=[],z=[],J=[],ee=[],ae=!1,oe=[];oe.SheetNames=ie.snames,oe.sharedf=ie.sharedf,oe.arrayf=ie.arrayf,oe.names=[],oe.XTI=[];var se=0,G=0,q=0,te=[],fe=[],he;ie.codepage=1200,set_cp(1200);for(var Ee=!1;t.l<t.length-1;){var we=t.l,xe=t.read_shift(2);if(xe===0&&se===10)break;var $e=t.l===t.length?0:t.read_shift(2),ge=XLSRecordEnum[xe];if(G==0&&[9,521,1033,2057].indexOf(xe)==-1)break;if(ge&&ge.f){if(n.bookSheets&&se===133&&xe!==133)break;if(se=xe,ge.r===2||ge.r==12){var Se=t.read_shift(2);if($e-=2,!ie.enc&&Se!==xe&&((Se&255)<<8|Se>>8)!==xe)throw new Error("rt mismatch: "+Se+"!="+xe);ge.r==12&&(t.l+=10,$e-=10)}var me={};if(xe===10?me=ge.f(t,$e,ie):me=slurp(xe,ge,t,$e,ie),G==0&&[9,521,1033,2057].indexOf(se)===-1)continue;switch(xe){case 34:_.opts.Date1904=X.WBProps.date1904=me;break;case 134:_.opts.WriteProtect=!0;break;case 47:if(ie.enc||(t.l=0),ie.enc=me,!n.password)throw new Error("File is password-protected");if(me.valid==null)throw new Error("Encryption scheme unsupported");if(!me.valid)throw new Error("Password is incorrect");break;case 92:ie.lastuser=me;break;case 66:var Be=Number(me);switch(Be){case 21010:Be=1200;break;case 32768:Be=1e4;break;case 32769:Be=1252;break}set_cp(ie.codepage=Be),Ee=!0;break;case 317:ie.rrtabid=me;break;case 25:ie.winlocked=me;break;case 439:_.opts.RefreshAll=me;break;case 12:_.opts.CalcCount=me;break;case 16:_.opts.CalcDelta=me;break;case 17:_.opts.CalcIter=me;break;case 13:_.opts.CalcMode=me;break;case 14:_.opts.CalcPrecision=me;break;case 95:_.opts.CalcSaveRecalc=me;break;case 15:ie.CalcRefMode=me;break;case 2211:_.opts.FullCalc=me;break;case 129:me.fDialog&&(E["!type"]="dialog"),me.fBelow||((E["!outline"]||(E["!outline"]={})).above=!0),me.fRight||((E["!outline"]||(E["!outline"]={})).left=!0);break;case 224:ne.push(me);break;case 430:oe.push([me]),oe[oe.length-1].XTI=[];break;case 35:case 547:oe[oe.length-1].push(me);break;case 24:case 536:he={Name:me.Name,Ref:stringify_formula(me.rgce,C,null,oe,ie)},me.itab>0&&(he.Sheet=me.itab-1),oe.names.push(he),oe[0]||(oe[0]=[],oe[0].XTI=[]),oe[oe.length-1].push(me),me.Name=="_xlnm._FilterDatabase"&&me.itab>0&&me.rgce&&me.rgce[0]&&me.rgce[0][0]&&me.rgce[0][0][0]=="PtgArea3d"&&(fe[me.itab-1]={ref:encode_range(me.rgce[0][0][1][2])});break;case 22:ie.ExternCount=me;break;case 23:oe.length==0&&(oe[0]=[],oe[0].XTI=[]),oe[oe.length-1].XTI=oe[oe.length-1].XTI.concat(me),oe.XTI=oe.XTI.concat(me);break;case 2196:if(ie.biff<8)break;he!=null&&(he.Comment=me[1]);break;case 18:E["!protect"]=me;break;case 19:me!==0&&ie.WTF&&console.error("Password verifier: "+me);break;case 133:S[me.pos]=me,ie.snames.push(me.name);break;case 10:{if(--G)break;if(C.e){if(C.e.r>0&&C.e.c>0){if(C.e.r--,C.e.c--,E["!ref"]=encode_range(C),n.sheetRows&&n.sheetRows<=C.e.r){var ve=C.e.r;C.e.r=n.sheetRows-1,E["!fullref"]=E["!ref"],E["!ref"]=encode_range(C),C.e.r=ve}C.e.r++,C.e.c++}O.length>0&&(E["!merges"]=O),z.length>0&&(E["!objects"]=z),J.length>0&&(E["!cols"]=J),ee.length>0&&(E["!rows"]=ee),X.Sheets.push(ce)}A===""?I=E:x[A]=E,E={},n.dense&&(E["!data"]=[])}break;case 9:case 521:case 1033:case 2057:{if(ie.biff===8&&(ie.biff={9:2,521:3,1033:4}[xe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[me.BIFFVer]||8),ie.biffguess=me.BIFFVer==0,me.BIFFVer==0&&me.dt==4096&&(ie.biff=5,Ee=!0,set_cp(ie.codepage=28591)),ie.biff==8&&me.BIFFVer==0&&me.dt==16&&(ie.biff=2),G++)break;if(E={},n.dense&&(E["!data"]=[]),ie.biff<8&&!Ee&&(Ee=!0,set_cp(ie.codepage=n.codepage||1252)),ie.biff<5||me.BIFFVer==0&&me.dt==4096){A===""&&(A="Sheet1"),C={s:{r:0,c:0},e:{r:0,c:0}};var Ae={pos:t.l-$e,name:A};S[Ae.pos]=Ae,ie.snames.push(A)}else A=(S[we]||{name:""}).name;me.dt==32&&(E["!type"]="chart"),me.dt==64&&(E["!type"]="macro"),O=[],z=[],ie.arrayf=H=[],J=[],ee=[],ae=!1,ce={Hidden:(S[we]||{hs:0}).hs,name:A}}break;case 515:case 3:case 2:E["!type"]=="chart"&&(n.dense?(E["!data"][me.r]||[])[me.c]:E[encode_col(me.c)+encode_row(me.r)])&&++me.c,Y={ixfe:me.ixfe,XF:ne[me.ixfe]||{},v:me.val,t:"n"},q>0&&(Y.z=te[Y.ixfe>>8&63]),safe_format_xf(Y,n,_.opts.Date1904),ye({c:me.c,r:me.r},Y,n);break;case 5:case 517:Y={ixfe:me.ixfe,XF:ne[me.ixfe],v:me.val,t:me.t},q>0&&(Y.z=te[Y.ixfe>>8&63]),safe_format_xf(Y,n,_.opts.Date1904),ye({c:me.c,r:me.r},Y,n);break;case 638:Y={ixfe:me.ixfe,XF:ne[me.ixfe],v:me.rknum,t:"n"},q>0&&(Y.z=te[Y.ixfe>>8&63]),safe_format_xf(Y,n,_.opts.Date1904),ye({c:me.c,r:me.r},Y,n);break;case 189:for(var Ve=me.c;Ve<=me.C;++Ve){var Pe=me.rkrec[Ve-me.c][0];Y={ixfe:Pe,XF:ne[Pe],v:me.rkrec[Ve-me.c][1],t:"n"},q>0&&(Y.z=te[Y.ixfe>>8&63]),safe_format_xf(Y,n,_.opts.Date1904),ye({c:Ve,r:me.r},Y,n)}break;case 6:case 518:case 1030:{if(me.val=="String"){T=me;break}if(Y=make_cell(me.val,me.cell.ixfe,me.tt),Y.XF=ne[Y.ixfe],n.cellFormula){var Re=me.formula;if(Re&&Re[0]&&Re[0][0]&&Re[0][0][0]=="PtgExp"){var Ne=Re[0][0][1][0],qe=Re[0][0][1][1],Ke=encode_cell({r:Ne,c:qe});U[Ke]?Y.f=""+stringify_formula(me.formula,C,me.cell,oe,ie):Y.F=((n.dense?(E["!data"][Ne]||[])[qe]:E[Ke])||{}).F}else Y.f=""+stringify_formula(me.formula,C,me.cell,oe,ie)}q>0&&(Y.z=te[Y.ixfe>>8&63]),safe_format_xf(Y,n,_.opts.Date1904),ye(me.cell,Y,n),T=me}break;case 7:case 519:if(T)T.val=me,Y=make_cell(me,T.cell.ixfe,"s"),Y.XF=ne[Y.ixfe],n.cellFormula&&(Y.f=""+stringify_formula(T.formula,C,T.cell,oe,ie)),q>0&&(Y.z=te[Y.ixfe>>8&63]),safe_format_xf(Y,n,_.opts.Date1904),ye(T.cell,Y,n),T=null;else throw new Error("String record expects Formula");break;case 33:case 545:{H.push(me);var He=encode_cell(me[0].s);if(V=n.dense?(E["!data"][me[0].s.r]||[])[me[0].s.c]:E[He],n.cellFormula&&V){if(!T||!He||!V)break;V.f=""+stringify_formula(me[1],C,me[0],oe,ie),V.F=encode_range(me[0])}}break;case 1212:{if(!n.cellFormula)break;if(M){if(!T)break;U[encode_cell(T.cell)]=me[0],V=n.dense?(E["!data"][T.cell.r]||[])[T.cell.c]:E[encode_cell(T.cell)],(V||{}).f=""+stringify_formula(me[0],C,D,oe,ie)}}break;case 253:Y=make_cell(B[me.isst].t,me.ixfe,"s"),B[me.isst].h&&(Y.h=B[me.isst].h),Y.XF=ne[Y.ixfe],q>0&&(Y.z=te[Y.ixfe>>8&63]),safe_format_xf(Y,n,_.opts.Date1904),ye({c:me.c,r:me.r},Y,n);break;case 513:n.sheetStubs&&(Y={ixfe:me.ixfe,XF:ne[me.ixfe],t:"z"},q>0&&(Y.z=te[Y.ixfe>>8&63]),safe_format_xf(Y,n,_.opts.Date1904),ye({c:me.c,r:me.r},Y,n));break;case 190:if(n.sheetStubs)for(var Ge=me.c;Ge<=me.C;++Ge){var rt=me.ixfe[Ge-me.c];Y={ixfe:rt,XF:ne[rt],t:"z"},q>0&&(Y.z=te[Y.ixfe>>8&63]),safe_format_xf(Y,n,_.opts.Date1904),ye({c:Ge,r:me.r},Y,n)}break;case 214:case 516:case 4:Y=make_cell(me.val,me.ixfe,"s"),Y.XF=ne[Y.ixfe],q>0&&(Y.z=te[Y.ixfe>>8&63]),safe_format_xf(Y,n,_.opts.Date1904),ye({c:me.c,r:me.r},Y,n);break;case 0:case 512:G===1&&(C=me);break;case 252:B=me;break;case 1054:if(ie.biff==4){te[q++]=me[1];for(var st=0;st<q+163&&table_fmt[st]!=me[1];++st);st>=163&&SSF__load(me[1],q+163)}else SSF__load(me[1],me[0]);break;case 30:{te[q++]=me;for(var Je=0;Je<q+163&&table_fmt[Je]!=me;++Je);Je>=163&&SSF__load(me,q+163)}break;case 229:O=O.concat(me);break;case 93:z[me.cmo[0]]=ie.lastobj=me;break;case 438:ie.lastobj.TxO=me;break;case 127:ie.lastobj.ImData=me;break;case 440:for(j=me[0].s.r;j<=me[0].e.r;++j)for(F=me[0].s.c;F<=me[0].e.c;++F)V=n.dense?(E["!data"][j]||[])[F]:E[encode_cell({c:F,r:j})],V&&(V.l=me[1]);break;case 2048:for(j=me[0].s.r;j<=me[0].e.r;++j)for(F=me[0].s.c;F<=me[0].e.c;++F)V=n.dense?(E["!data"][j]||[])[F]:E[encode_cell({c:F,r:j})],V&&V.l&&(V.l.Tooltip=me[1]);break;case 28:{if(ie.biff<=5&&ie.biff>=2)break;V=n.dense?(E["!data"][me[0].r]||[])[me[0].c]:E[encode_cell(me[0])];var Ie=z[me[2]];V||(n.dense?(E["!data"][me[0].r]||(E["!data"][me[0].r]=[]),V=E["!data"][me[0].r][me[0].c]={t:"z"}):V=E[encode_cell(me[0])]={t:"z"},C.e.r=Math.max(C.e.r,me[0].r),C.s.r=Math.min(C.s.r,me[0].r),C.e.c=Math.max(C.e.c,me[0].c),C.s.c=Math.min(C.s.c,me[0].c)),V.c||(V.c=[]),L={a:me[1],t:Ie.TxO.t},V.c.push(L)}break;case 2173:update_xfext(ne[me.ixfe],me.ext);break;case 125:{if(!ie.cellStyles)break;for(;me.e>=me.s;)J[me.e--]={width:me.w/256,level:me.level||0,hidden:!!(me.flags&1)},ae||(ae=!0,find_mdw_colw(me.w/256)),process_col(J[me.e+1])}break;case 520:{var be={};me.level!=null&&(ee[me.r]=be,be.level=me.level),me.hidden&&(ee[me.r]=be,be.hidden=!0),me.hpt&&(ee[me.r]=be,be.hpt=me.hpt,be.hpx=pt2px(me.hpt))}break;case 38:case 39:case 40:case 41:E["!margins"]||default_margins(E["!margins"]={}),E["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[xe]]=me;break;case 161:E["!margins"]||default_margins(E["!margins"]={}),E["!margins"].header=me.header,E["!margins"].footer=me.footer;break;case 574:me.RTL&&(X.Views[0].RTL=!0);break;case 146:re=me;break;case 2198:W=me;break;case 140:Z=me;break;case 442:A?ce.CodeName=me||ce.name:X.WBProps.CodeName=me||"ThisWorkbook";break}}else ge||console.error("Missing Info for XLS Record 0x"+xe.toString(16)),t.l+=$e}return _.SheetNames=keys(S).sort(function(Te,Le){return Number(Te)-Number(Le)}).map(function(Te){return S[Te].name}),n.bookSheets||(_.Sheets=x),!_.SheetNames.length&&I["!ref"]?(_.SheetNames.push("Sheet1"),_.Sheets&&(_.Sheets.Sheet1=I)):_.Preamble=I,_.Sheets&&fe.forEach(function(Te,Le){_.Sheets[_.SheetNames[Le]]["!autofilter"]=Te}),_.Strings=B,_.SSF=dup(table_fmt),ie.enc&&(_.Encryption=ie.enc),W&&(_.Themes=W),_.Metadata={},Z!==void 0&&(_.Metadata.Country=Z),oe.names.length>0&&(X.Names=oe.names),_.Workbook=X,_}var PSCLSID={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function parse_xls_props(t,n,_){var x=CFB.find(t,"/!DocumentSummaryInformation");if(x&&x.size>0)try{var E=parse_PropertySetStream(x,DocSummaryPIDDSI,PSCLSID.DSI);for(var S in E)n[S]=E[S]}catch(A){if(_.WTF)throw A}var C=CFB.find(t,"/!SummaryInformation");if(C&&C.size>0)try{var T=parse_PropertySetStream(C,SummaryPIDSI,PSCLSID.SI);for(var B in T)n[B]==null&&(n[B]=T[B])}catch(A){if(_.WTF)throw A}n.HeadingPairs&&n.TitlesOfParts&&(load_props_pairs(n.HeadingPairs,n.TitlesOfParts,n,_),delete n.HeadingPairs,delete n.TitlesOfParts)}function write_xls_props(t,n){var _=[],x=[],E=[],S=0,C,T=evert_key(DocSummaryPIDDSI,"n"),B=evert_key(SummaryPIDSI,"n");if(t.Props)for(C=keys(t.Props),S=0;S<C.length;++S)(Object.prototype.hasOwnProperty.call(T,C[S])?_:Object.prototype.hasOwnProperty.call(B,C[S])?x:E).push([C[S],t.Props[C[S]]]);if(t.Custprops)for(C=keys(t.Custprops),S=0;S<C.length;++S)Object.prototype.hasOwnProperty.call(t.Props||{},C[S])||(Object.prototype.hasOwnProperty.call(T,C[S])?_:Object.prototype.hasOwnProperty.call(B,C[S])?x:E).push([C[S],t.Custprops[C[S]]]);var A=[];for(S=0;S<E.length;++S)XLSPSSkip.indexOf(E[S][0])>-1||PseudoPropsPairs.indexOf(E[S][0])>-1||E[S][1]!=null&&A.push(E[S]);x.length&&CFB.utils.cfb_add(n,"/SummaryInformation",write_PropertySetStream(x,PSCLSID.SI,B,SummaryPIDSI)),(_.length||A.length)&&CFB.utils.cfb_add(n,"/DocumentSummaryInformation",write_PropertySetStream(_,PSCLSID.DSI,T,DocSummaryPIDDSI,A.length?A:null,PSCLSID.UDI))}function parse_xlscfb(t,n){n||(n={}),fix_read_opts(n),reset_cp(),n.codepage&&set_ansi(n.codepage);var _,x;if(t.FullPaths){if(CFB.find(t,"/encryption"))throw new Error("File is password-protected");_=CFB.find(t,"!CompObj"),x=CFB.find(t,"/Workbook")||CFB.find(t,"/Book")}else{switch(n.type){case"base64":t=s2a(Base64_decode(t));break;case"binary":t=s2a(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}prep_blob(t,0),x={content:t}}var E,S;if(_&&parse_compobj(_),n.bookProps&&!n.bookSheets)E={};else{var C=has_buf?"buffer":"array";if(x&&x.content)E=parse_workbook(x.content,n);else if((S=CFB.find(t,"PerfectOffice_MAIN"))&&S.content)E=WK_.to_workbook(S.content,(n.type=C,n));else if((S=CFB.find(t,"NativeContent_MAIN"))&&S.content)E=WK_.to_workbook(S.content,(n.type=C,n));else throw(S=CFB.find(t,"MN0"))&&S.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");n.bookVBA&&t.FullPaths&&CFB.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(E.vbaraw=make_vba_xls(t))}var T={};return t.FullPaths&&parse_xls_props(t,T,n),E.Props=E.Custprops=T,n.bookFiles&&(E.cfb=t),E}function write_xlscfb(t,n){var _=n||{},x=CFB.utils.cfb_new({root:"R"}),E="/Workbook";switch(_.bookType||"xls"){case"xls":_.bookType="biff8";case"xla":_.bookType||(_.bookType="xla");case"biff8":E="/Workbook",_.biff=8;break;case"biff5":E="/Book",_.biff=5;break;default:throw new Error("invalid type "+_.bookType+" for XLS CFB")}return CFB.utils.cfb_add(x,E,write_biff_buf(t,_)),_.biff==8&&(t.Props||t.Custprops)&&write_xls_props(t,x),_.biff==8&&t.vbaraw&&fill_vba_xls(x,CFB.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),x}var XLSBRecordEnum={0:{f:parse_BrtRowHdr},1:{f:parse_BrtCellBlank},2:{f:parse_BrtCellRk},3:{f:parse_BrtCellError},4:{f:parse_BrtCellBool},5:{f:parse_BrtCellReal},6:{f:parse_BrtCellSt},7:{f:parse_BrtCellIsst},8:{f:parse_BrtFmlaString},9:{f:parse_BrtFmlaNum},10:{f:parse_BrtFmlaBool},11:{f:parse_BrtFmlaError},12:{f:parse_BrtShortBlank},13:{f:parse_BrtShortRk},14:{f:parse_BrtShortError},15:{f:parse_BrtShortBool},16:{f:parse_BrtShortReal},17:{f:parse_BrtShortSt},18:{f:parse_BrtShortIsst},19:{f:parse_RichStr},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:parse_BrtName},40:{},42:{},43:{f:parse_BrtFont},44:{f:parse_BrtFmt},45:{f:parse_BrtFill},46:{f:parse_BrtBorder},47:{f:parse_BrtXF},48:{},49:{f:parse_Int32LE},50:{},51:{f:parse_BrtMdb},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:parse_ColInfo},62:{f:parse_BrtCellRString},63:{f:parse_BrtCalcChainItem$},64:{f:parse_BrtDVal},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:parsenoop,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:parse_BrtBeginWsView},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:parse_BrtWsProp},148:{f:parse_BrtWsDim,p:16},151:{f:parse_BrtPane},152:{},153:{f:parse_BrtWbProp},154:{},155:{},156:{f:parse_BrtBundleSh},157:{},158:{},159:{T:1,f:parse_BrtBeginSst},160:{T:-1},161:{T:1,f:parse_UncheckedRfX},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:parse_BrtMergeCell},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:parse_BrtMdtinfo},336:{T:-1},337:{f:parse_BrtBeginEsmdb,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:parse_RelID},357:{},358:{},359:{},360:{T:1},361:{},362:{f:parse_ExternSheet},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:parse_BrtArrFmla},427:{f:parse_BrtShrFmla},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:parse_BrtMargins},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:parse_BrtWsFmtInfo},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:parse_BrtHLink},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:parse_RelID},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:parse_BrtCommentAuthor},633:{T:1},634:{T:-1},635:{T:1,f:parse_BrtBeginComment},636:{T:-1},637:{f:parse_BrtCommentText},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:parse_BrtCsProp},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:parse_BrtDVal14},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},XLSRecordEnum={6:{f:parse_Formula},10:{f:parsenoop2},12:{f:parseuint16},13:{f:parseuint16},14:{f:parsebool},15:{f:parsebool},16:{f:parse_Xnum},17:{f:parsebool},18:{f:parsebool},19:{f:parseuint16},20:{f:parse_XLHeaderFooter},21:{f:parse_XLHeaderFooter},23:{f:parse_ExternSheet},24:{f:parse_Lbl},25:{f:parsebool},26:{},27:{},28:{f:parse_Note},29:{},34:{f:parsebool},35:{f:parse_ExternName},38:{f:parse_Xnum},39:{f:parse_Xnum},40:{f:parse_Xnum},41:{f:parse_Xnum},42:{f:parsebool},43:{f:parsebool},47:{f:parse_FilePass},49:{f:parse_Font},51:{f:parseuint16},60:{},61:{f:parse_Window1},64:{f:parsebool},65:{f:parse_Pane},66:{f:parseuint16},77:{},80:{},81:{},82:{},85:{f:parseuint16},89:{},90:{},91:{},92:{f:parse_WriteAccess},93:{f:parse_Obj},94:{},95:{f:parsebool},96:{},97:{},99:{f:parsebool},125:{f:parse_ColInfo},128:{f:parse_Guts},129:{f:parse_WsBool},130:{f:parseuint16},131:{f:parsebool},132:{f:parsebool},133:{f:parse_BoundSheet8},134:{},140:{f:parse_Country},141:{f:parseuint16},144:{},146:{f:parse_Palette},151:{},152:{},153:{},154:{},155:{},156:{f:parseuint16},157:{},158:{},160:{f:parse_Scl},161:{f:parse_Setup},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:parse_MulRk},190:{f:parse_MulBlank},193:{f:parsenoop2},197:{},198:{},199:{},200:{},201:{},202:{f:parsebool},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:parseuint16},220:{},221:{f:parsebool},222:{},224:{f:parse_XF},225:{f:parse_InterfaceHdr},226:{f:parsenoop2},227:{},229:{f:parse_MergeCells},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:parse_SST},253:{f:parse_LabelSst},255:{f:parse_ExtSST},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:parseuint16a},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:parsebool},353:{f:parsenoop2},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:parse_SupBook},431:{f:parsebool},432:{},433:{},434:{},437:{},438:{f:parse_TxO},439:{f:parsebool},440:{f:parse_HLink},441:{},442:{f:parse_XLUnicodeString},443:{},444:{f:parseuint16},445:{},446:{},448:{f:parsenoop2},449:{f:parse_RecalcId,r:2},450:{f:parsenoop2},512:{f:parse_Dimensions},513:{f:parse_Blank},515:{f:parse_Number},516:{f:parse_Label},517:{f:parse_BoolErr},519:{f:parse_String},520:{f:parse_Row},523:{},545:{f:parse_Array},549:{f:parse_DefaultRowHeight},566:{},574:{f:parse_Window2},638:{f:parse_RK},659:{},1048:{},1054:{f:parse_Format},1084:{},1212:{f:parse_ShrFmla},2048:{f:parse_HLinkTooltip},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:parse_BOF},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:parsenoop2},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:parse_XFCRC,r:12},2173:{f:parse_XFExt,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:parsebool,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:parse_NameCmt,r:12},2197:{},2198:{f:parse_Theme,r:12},2199:{},2200:{},2201:{},2202:{f:parse_MTRSettings,r:12},2203:{f:parsenoop2},2204:{},2205:{},2206:{},2207:{},2211:{f:parse_ForceFullCalculation},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:parseuint16},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:parse_ShtProps},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:parse_ClrtClient},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:parse_Dimensions},1:{},2:{f:parse_BIFF2INT},3:{f:parse_BIFF2NUM},4:{f:parse_BIFF2STR},5:{f:parse_BoolErr},7:{f:parse_BIFF2STRING},8:{},9:{f:parse_BOF},11:{},22:{f:parseuint16},30:{f:parse_BIFF2Format},31:{},32:{},33:{f:parse_Array},36:{},37:{f:parse_DefaultRowHeight},50:{f:parse_BIFF2FONTXTRA},62:{},52:{},67:{},68:{f:parseuint16},69:{},86:{},126:{},127:{f:parse_ImData},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:parse_RString},223:{},234:{},354:{},421:{},518:{f:parse_Formula},521:{f:parse_BOF},536:{f:parse_Lbl},547:{f:parse_ExternName},561:{},579:{},1030:{f:parse_Formula},1033:{f:parse_BOF},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},101:{},102:{},105:{},106:{},107:{},109:{},112:{},114:{},29282:{}};function write_biff_rec(t,n,_,x){var E=n;if(!isNaN(E)){var S=x||(_||[]).length||0,C=t.next(4);C.write_shift(2,E),C.write_shift(2,S),S>0&&is_buf(_)&&t.push(_)}}function write_biff_continue(t,n,_,x){var E=x||(_||[]).length||0;if(E<=8224)return write_biff_rec(t,n,_,E);var S=n;if(!isNaN(S)){for(var C=_.parts||[],T=0,B=0,A=0;A+(C[T]||8224)<=8224;)A+=C[T]||8224,T++;var I=t.next(4);for(I.write_shift(2,S),I.write_shift(2,A),t.push(_.slice(B,B+A)),B+=A;B<E;){for(I=t.next(4),I.write_shift(2,60),A=0;A+(C[T]||8224)<=8224;)A+=C[T]||8224,T++;I.write_shift(2,A),t.push(_.slice(B,B+A)),B+=A}}}function write_BIFF2Cell(t,n,_){return t||(t=new_buf(7)),t.write_shift(2,n),t.write_shift(2,_),t.write_shift(2,0),t.write_shift(1,0),t}function write_BIFF2BERR(t,n,_,x){var E=new_buf(9);return write_BIFF2Cell(E,t,n),write_Bes(_,x||"b",E),E}function write_BIFF2LABEL(t,n,_){var x=new_buf(8+2*_.length);return write_BIFF2Cell(x,t,n),x.write_shift(1,_.length),x.write_shift(_.length,_,"sbcs"),x.l<x.length?x.slice(0,x.l):x}function write_ws_biff2_cell(t,n,_,x){if(n.v!=null)switch(n.t){case"d":case"n":var E=n.t=="d"?datenum(parseDate(n.v)):n.v;E==(E|0)&&E>=0&&E<65536?write_biff_rec(t,2,write_BIFF2INT(_,x,E)):write_biff_rec(t,3,write_BIFF2NUM(_,x,E));return;case"b":case"e":write_biff_rec(t,5,write_BIFF2BERR(_,x,n.v,n.t));return;case"s":case"str":write_biff_rec(t,4,write_BIFF2LABEL(_,x,n.v==null?"":String(n.v).slice(0,255)));return}write_biff_rec(t,1,write_BIFF2Cell(null,_,x))}function write_ws_biff2(t,n,_,x){var E=n["!data"]!=null,S=safe_decode_range(n["!ref"]||"A1"),C="",T=[];if(S.e.c>255||S.e.r>16383){if(x.WTF)throw new Error("Range "+(n["!ref"]||"A1")+" exceeds format limit A1:IV16384");S.e.c=Math.min(S.e.c,255),S.e.r=Math.min(S.e.c,16383)}for(var B=[],A=S.s.c;A<=S.e.c;++A)T[A]=encode_col(A);for(var I=S.s.r;I<=S.e.r;++I)for(E&&(B=n["!data"][I]||[]),C=encode_row(I),A=S.s.c;A<=S.e.c;++A){var D=E?B[A]:n[T[A]+C];D&&write_ws_biff2_cell(t,D,I,A)}}function write_biff2_buf(t,n){for(var _=n||{},x=buf_array(),E=0,S=0;S<t.SheetNames.length;++S)t.SheetNames[S]==_.sheet&&(E=S);if(E==0&&_.sheet&&t.SheetNames[0]!=_.sheet)throw new Error("Sheet not found: "+_.sheet);return write_biff_rec(x,_.biff==4?1033:_.biff==3?521:9,write_BOF(t,16,_)),write_ws_biff2(x,t.Sheets[t.SheetNames[E]],E,_),write_biff_rec(x,10),x.end()}function write_FONTS_biff8(t,n,_){write_biff_rec(t,49,write_Font({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},_))}function write_FMTS_biff8(t,n,_){n&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(x){for(var E=x[0];E<=x[1];++E)n[E]!=null&&write_biff_rec(t,1054,write_Format(E,n[E],_))})}function write_FEAT(t,n){var _=new_buf(19);_.write_shift(4,2151),_.write_shift(4,0),_.write_shift(4,0),_.write_shift(2,3),_.write_shift(1,1),_.write_shift(4,0),write_biff_rec(t,2151,_),_=new_buf(39),_.write_shift(4,2152),_.write_shift(4,0),_.write_shift(4,0),_.write_shift(2,3),_.write_shift(1,0),_.write_shift(4,0),_.write_shift(2,1),_.write_shift(4,4),_.write_shift(2,0),write_Ref8U(safe_decode_range(n["!ref"]||"A1"),_),_.write_shift(4,4),write_biff_rec(t,2152,_)}function write_CELLXFS_biff8(t,n){for(var _=0;_<16;++_)write_biff_rec(t,224,write_XF({numFmtId:0,style:!0},0,n));n.cellXfs.forEach(function(x){write_biff_rec(t,224,write_XF(x,0,n))})}function write_ws_biff8_hlinks(t,n){for(var _=0;_<n["!links"].length;++_){var x=n["!links"][_];write_biff_rec(t,440,write_HLink(x)),x[1].Tooltip&&write_biff_rec(t,2048,write_HLinkTooltip(x))}delete n["!links"]}function write_ws_cols_biff8(t,n){if(n){var _=0;n.forEach(function(x,E){++_<=256&&x&&write_biff_rec(t,125,write_ColInfo(col_obj_w(E,x),E))})}}function write_ws_biff8_cell(t,n,_,x,E){var S=16+get_cell_style(E.cellXfs,n,E);if(n.v==null&&!n.bf){write_biff_rec(t,513,write_XLSCell(_,x,S));return}if(n.bf)write_biff_rec(t,6,write_Formula(n,_,x,E,S));else switch(n.t){case"d":case"n":var C=n.t=="d"?datenum(parseDate(n.v)):n.v;write_biff_rec(t,515,write_Number(_,x,C,S));break;case"b":case"e":write_biff_rec(t,517,write_BoolErr(_,x,n.v,S,E,n.t));break;case"s":case"str":if(E.bookSST){var T=get_sst_id(E.Strings,n.v==null?"":String(n.v),E.revStrings);write_biff_rec(t,253,write_LabelSst(_,x,T,S))}else write_biff_rec(t,516,write_Label(_,x,(n.v==null?"":String(n.v)).slice(0,255),S,E));break;default:write_biff_rec(t,513,write_XLSCell(_,x,S))}}function write_ws_biff8(t,n,_){var x=buf_array(),E=_.SheetNames[t],S=_.Sheets[E]||{},C=(_||{}).Workbook||{},T=(C.Sheets||[])[t]||{},B=S["!data"]!=null,A=n.biff==8,I,D="",M=[],V=safe_decode_range(S["!ref"]||"A1"),L=A?65536:16384;if(V.e.c>255||V.e.r>=L){if(n.WTF)throw new Error("Range "+(S["!ref"]||"A1")+" exceeds format limit A1:IV16384");V.e.c=Math.min(V.e.c,255),V.e.r=Math.min(V.e.c,L-1)}write_biff_rec(x,2057,write_BOF(_,16,n)),write_biff_rec(x,13,writeuint16(1)),write_biff_rec(x,12,writeuint16(100)),write_biff_rec(x,15,writebool(!0)),write_biff_rec(x,17,writebool(!1)),write_biff_rec(x,16,write_Xnum(.001)),write_biff_rec(x,95,writebool(!0)),write_biff_rec(x,42,writebool(!1)),write_biff_rec(x,43,writebool(!1)),write_biff_rec(x,130,writeuint16(1)),write_biff_rec(x,128,write_Guts([0,0])),write_biff_rec(x,131,writebool(!1)),write_biff_rec(x,132,writebool(!1)),A&&write_ws_cols_biff8(x,S["!cols"]),write_biff_rec(x,512,write_Dimensions(V,n)),A&&(S["!links"]=[]);for(var F=[],j=[],U=V.s.c;U<=V.e.c;++U)M[U]=encode_col(U);for(var H=V.s.r;H<=V.e.r;++H)for(B&&(j=S["!data"][H]||[]),D=encode_row(H),U=V.s.c;U<=V.e.c;++U){I=M[U]+D;var Y=B?j[U]:S[I];Y&&(write_ws_biff8_cell(x,Y,H,U,n),A&&Y.l&&S["!links"].push([I,Y.l]),A&&Y.c&&F.push([I,Y.c]))}var Z=T.CodeName||T.name||E;return A&&write_biff_rec(x,574,write_Window2((C.Views||[])[0])),A&&(S["!merges"]||[]).length&&write_biff_rec(x,229,write_MergeCells(S["!merges"])),A&&write_ws_biff8_hlinks(x,S),write_biff_rec(x,442,write_XLUnicodeString(Z)),A&&write_FEAT(x,S),write_biff_rec(x,10),x.end()}function write_biff8_global(t,n,_){var x=buf_array(),E=(t||{}).Workbook||{},S=E.Sheets||[],C=E.WBProps||{},T=_.biff==8,B=_.biff==5;if(write_biff_rec(x,2057,write_BOF(t,5,_)),_.bookType=="xla"&&write_biff_rec(x,135),write_biff_rec(x,225,T?writeuint16(1200):null),write_biff_rec(x,193,writezeroes(2)),B&&write_biff_rec(x,191),B&&write_biff_rec(x,192),write_biff_rec(x,226),write_biff_rec(x,92,write_WriteAccess("SheetJS",_)),write_biff_rec(x,66,writeuint16(T?1200:1252)),T&&write_biff_rec(x,353,writeuint16(0)),T&&write_biff_rec(x,448),write_biff_rec(x,317,write_RRTabId(t.SheetNames.length)),T&&t.vbaraw&&write_biff_rec(x,211),T&&t.vbaraw){var A=C.CodeName||"ThisWorkbook";write_biff_rec(x,442,write_XLUnicodeString(A))}write_biff_rec(x,156,writeuint16(17)),write_biff_rec(x,25,writebool(!1)),write_biff_rec(x,18,writebool(!1)),write_biff_rec(x,19,writeuint16(0)),T&&write_biff_rec(x,431,writebool(!1)),T&&write_biff_rec(x,444,writeuint16(0)),write_biff_rec(x,61,write_Window1()),write_biff_rec(x,64,writebool(!1)),write_biff_rec(x,141,writeuint16(0)),write_biff_rec(x,34,writebool(safe1904(t)=="true")),write_biff_rec(x,14,writebool(!0)),T&&write_biff_rec(x,439,writebool(!1)),write_biff_rec(x,218,writeuint16(0)),write_FONTS_biff8(x,t,_),write_FMTS_biff8(x,t.SSF,_),write_CELLXFS_biff8(x,_),T&&write_biff_rec(x,352,writebool(!1));var I=x.end(),D=buf_array();T&&write_biff_rec(D,140,write_Country()),T&&_.Strings&&write_biff_continue(D,252,write_SST(_.Strings)),write_biff_rec(D,10);var M=D.end(),V=buf_array(),L=0,F=0;for(F=0;F<t.SheetNames.length;++F)L+=(T?12:11)+(T?2:1)*t.SheetNames[F].length;var j=I.length+L+M.length;for(F=0;F<t.SheetNames.length;++F){var U=S[F]||{};write_biff_rec(V,133,write_BoundSheet8({pos:j,hs:U.Hidden||0,dt:0,name:t.SheetNames[F]},_)),j+=n[F].length}var H=V.end();if(L!=H.length)throw new Error("BS8 "+L+" != "+H.length);var Y=[];return I.length&&Y.push(I),H.length&&Y.push(H),M.length&&Y.push(M),bconcat(Y)}function write_biff8_buf(t,n){var _=n||{},x=[];t&&!t.SSF&&(t.SSF=dup(table_fmt)),t&&t.SSF&&(make_ssf(),SSF_load_table(t.SSF),_.revssf=evert_num(t.SSF),_.revssf[t.SSF[65535]]=0,_.ssf=t.SSF),_.Strings=[],_.Strings.Count=0,_.Strings.Unique=0,fix_write_opts(_),_.cellXfs=[],get_cell_style(_.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var E=0;E<t.SheetNames.length;++E)x[x.length]=write_ws_biff8(E,_,t);return x.unshift(write_biff8_global(t,x,_)),bconcat(x)}function write_biff_buf(t,n){for(var _=0;_<=t.SheetNames.length;++_){var x=t.Sheets[t.SheetNames[_]];if(!(!x||!x["!ref"])){var E=decode_range(x["!ref"]);E.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[_]+"' extends beyond column IV (255).  Data may be lost.")}}var S=n||{};switch(S.biff||2){case 8:case 5:return write_biff8_buf(t,n);case 4:case 3:case 2:return write_biff2_buf(t,n)}throw new Error("invalid type "+S.bookType+" for BIFF")}function html_to_sheet(t,n){var _=n||{},x=_.dense!=null?_.dense:DENSE,E={};x&&(E["!data"]=[]),t=t.replace(/<!--.*?-->/g,"");var S=t.match(/<table/i);if(!S)throw new Error("Invalid HTML: could not find <table>");var C=t.match(/<\/table/i),T=S.index,B=C&&C.index||t.length,A=split_regex(t.slice(T,B),/(:?<tr[^>]*>)/i,"<tr>"),I=-1,D=0,M=0,V=0,L={s:{r:1e7,c:1e7},e:{r:0,c:0}},F=[];for(T=0;T<A.length;++T){var j=A[T].trim(),U=j.slice(0,3).toLowerCase();if(U=="<tr"){if(++I,_.sheetRows&&_.sheetRows<=I){--I;break}D=0;continue}if(!(U!="<td"&&U!="<th")){var H=j.split(/<\/t[dh]>/i);for(B=0;B<H.length;++B){var Y=H[B].trim();if(Y.match(/<t[dh]/i)){for(var Z=Y,ne=0;Z.charAt(0)=="<"&&(ne=Z.indexOf(">"))>-1;)Z=Z.slice(ne+1);for(var re=0;re<F.length;++re){var X=F[re];X.s.c==D&&X.s.r<I&&I<=X.e.r&&(D=X.e.c+1,re=-1)}var ce=parsexmltag(Y.slice(0,Y.indexOf(">")));V=ce.colspan?+ce.colspan:1,((M=+ce.rowspan)>1||V>1)&&F.push({s:{r:I,c:D},e:{r:I+(M||1)-1,c:D+V-1}});var ue=ce.t||ce["data-t"]||"";if(!Z.length){D+=V;continue}if(Z=htmldecode(Z),L.s.r>I&&(L.s.r=I),L.e.r<I&&(L.e.r=I),L.s.c>D&&(L.s.c=D),L.e.c<D&&(L.e.c=D),!Z.length){D+=V;continue}var _e={t:"s",v:Z};_.raw||!Z.trim().length||ue=="s"||(Z==="TRUE"?_e={t:"b",v:!0}:Z==="FALSE"?_e={t:"b",v:!1}:isNaN(fuzzynum(Z))?isNaN(fuzzydate(Z).getDate())||(_e={t:"d",v:parseDate(Z)},_.cellDates||(_e={t:"n",v:datenum(_e.v)}),_e.z=_.dateNF||table_fmt[14]):_e={t:"n",v:fuzzynum(Z)}),x?(E["!data"][I]||(E["!data"][I]=[]),E["!data"][I][D]=_e):E[encode_cell({r:I,c:D})]=_e,D+=V}}}}return E["!ref"]=encode_range(L),F.length&&(E["!merges"]=F),E}function make_html_row(t,n,_,x){for(var E=t["!merges"]||[],S=[],C={},T=t["!data"]!=null,B=n.s.c;B<=n.e.c;++B){for(var A=0,I=0,D=0;D<E.length;++D)if(!(E[D].s.r>_||E[D].s.c>B)&&!(E[D].e.r<_||E[D].e.c<B)){if(E[D].s.r<_||E[D].s.c<B){A=-1;break}A=E[D].e.r-E[D].s.r+1,I=E[D].e.c-E[D].s.c+1;break}if(!(A<0)){var M=encode_col(B)+encode_row(_),V=T?(t["!data"][_]||[])[B]:t[M],L=V&&V.v!=null&&(V.h||escapehtml(V.w||(format_cell(V),V.w)||""))||"";C={},A>1&&(C.rowspan=A),I>1&&(C.colspan=I),x.editable?L='<span contenteditable="true">'+L+"</span>":V&&(C["data-t"]=V&&V.t||"z",V.v!=null&&(C["data-v"]=V.v),V.z!=null&&(C["data-z"]=V.z),V.l&&(V.l.Target||"#").charAt(0)!="#"&&(L='<a href="'+V.l.Target+'">'+L+"</a>")),C.id=(x.id||"sjs")+"-"+M,S.push(writextag("td",L,C))}}var F="<tr>";return F+S.join("")+"</tr>"}var HTML_BEGIN='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',HTML_END="</body></html>";function html_to_workbook(t,n){var _=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!_||_.length==0)throw new Error("Invalid HTML: could not find <table>");if(_.length==1){var x=sheet_to_workbook(html_to_sheet(_[0],n),n);return x.bookType="html",x}var E=book_new();return _.forEach(function(S,C){book_append_sheet(E,html_to_sheet(S,n),"Sheet"+(C+1))}),E.bookType="html",E}function make_html_preamble(t,n,_){var x=[];return x.join("")+"<table"+(_&&_.id?' id="'+_.id+'"':"")+">"}function sheet_to_html(t,n){var _=n||{},x=_.header!=null?_.header:HTML_BEGIN,E=_.footer!=null?_.footer:HTML_END,S=[x],C=decode_range(t["!ref"]);S.push(make_html_preamble(t,C,_));for(var T=C.s.r;T<=C.e.r;++T)S.push(make_html_row(t,C,T,_));return S.push("</table>"+E),S.join("")}function sheet_add_dom(t,n,_){var x=n.rows;if(!x)throw"Unsupported origin when "+n.tagName+" is not a TABLE";var E=_||{},S=t["!data"]!=null,C=0,T=0;if(E.origin!=null)if(typeof E.origin=="number")C=E.origin;else{var B=typeof E.origin=="string"?decode_cell(E.origin):E.origin;C=B.r,T=B.c}var A=Math.min(E.sheetRows||1e7,x.length),I={s:{r:0,c:0},e:{r:C,c:T}};if(t["!ref"]){var D=decode_range(t["!ref"]);I.s.r=Math.min(I.s.r,D.s.r),I.s.c=Math.min(I.s.c,D.s.c),I.e.r=Math.max(I.e.r,D.e.r),I.e.c=Math.max(I.e.c,D.e.c),C==-1&&(I.e.r=C=D.e.r+1)}var M=[],V=0,L=t["!rows"]||(t["!rows"]=[]),F=0,j=0,U=0,H=0,Y=0,Z=0;for(t["!cols"]||(t["!cols"]=[]);F<x.length&&j<A;++F){var ne=x[F];if(is_dom_element_hidden(ne)){if(E.display)continue;L[j]={hidden:!0}}var re=ne.cells;for(U=H=0;U<re.length;++U){var X=re[U];if(!(E.display&&is_dom_element_hidden(X))){var ce=X.hasAttribute("data-v")?X.getAttribute("data-v"):X.hasAttribute("v")?X.getAttribute("v"):htmldecode(X.innerHTML),ue=X.getAttribute("data-z")||X.getAttribute("z");for(V=0;V<M.length;++V){var _e=M[V];_e.s.c==H+T&&_e.s.r<j+C&&j+C<=_e.e.r&&(H=_e.e.c+1-T,V=-1)}Z=+X.getAttribute("colspan")||1,((Y=+X.getAttribute("rowspan")||1)>1||Z>1)&&M.push({s:{r:j+C,c:H+T},e:{r:j+C+(Y||1)-1,c:H+T+(Z||1)-1}});var ye={t:"s",v:ce},ie=X.getAttribute("data-t")||X.getAttribute("t")||"";ce!=null&&(ce.length==0?ye.t=ie||"z":E.raw||ce.trim().length==0||ie=="s"||(ce==="TRUE"?ye={t:"b",v:!0}:ce==="FALSE"?ye={t:"b",v:!1}:isNaN(fuzzynum(ce))?isNaN(fuzzydate(ce).getDate())||(ye={t:"d",v:parseDate(ce)},E.cellDates||(ye={t:"n",v:datenum(ye.v)}),ye.z=E.dateNF||table_fmt[14]):ye={t:"n",v:fuzzynum(ce)})),ye.z===void 0&&ue!=null&&(ye.z=ue);var W="",O=X.getElementsByTagName("A");if(O&&O.length)for(var z=0;z<O.length&&!(O[z].hasAttribute("href")&&(W=O[z].getAttribute("href"),W.charAt(0)!="#"));++z);W&&W.charAt(0)!="#"&&W.slice(0,11).toLowerCase()!="javascript:"&&(ye.l={Target:W}),S?(t["!data"][j+C]||(t["!data"][j+C]=[]),t["!data"][j+C][H+T]=ye):t[encode_cell({c:H+T,r:j+C})]=ye,I.e.c<H+T&&(I.e.c=H+T),H+=Z}}++j}return M.length&&(t["!merges"]=(t["!merges"]||[]).concat(M)),I.e.r=Math.max(I.e.r,j-1+C),t["!ref"]=encode_range(I),j>=A&&(t["!fullref"]=encode_range((I.e.r=x.length-F+j-1+C,I))),t}function parse_dom_table(t,n){var _=n||{},x={};return _.dense&&(x["!data"]=[]),sheet_add_dom(x,t,n)}function table_to_book(t,n){var _=sheet_to_workbook(parse_dom_table(t,n),n);return _}function is_dom_element_hidden(t){var n="",_=get_get_computed_style_function(t);return _&&(n=_(t).getPropertyValue("display")),n||(n=t.style&&t.style.display),n==="none"}function get_get_computed_style_function(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function parse_text_p(t){var n=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(x,E){return Array(parseInt(E,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),_=unescapexml(n.replace(/<[^>]*>/g,""));return[_]}function parse_ods_styles(t,n,_){var x=_||{},E=xlml_normalize(t);xlmlregex.lastIndex=0,E=E.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");for(var S,C,T="",B="",A,I=0,D=-1,M="";S=xlmlregex.exec(E);)switch(S[3]=S[3].replace(/_.*$/,"")){case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":case"text-style":S[1]==="/"?(C["truncate-on-overflow"]=="false"&&(T.match(/h/)?T=T.replace(/h+/,"[$&]"):T.match(/m/)?T=T.replace(/m+/,"[$&]"):T.match(/s/)&&(T=T.replace(/s+/,"[$&]"))),x[C.name]=T,T=""):S[0].charAt(S[0].length-2)!=="/"&&(T="",C=parsexmltag(S[0],!1));break;case"boolean-style":S[1]==="/"?(x[C.name]="General",T=""):S[0].charAt(S[0].length-2)!=="/"&&(T="",C=parsexmltag(S[0],!1));break;case"boolean":T+="General";break;case"text":S[1]==="/"?(M=E.slice(D,xlmlregex.lastIndex-S[0].length),M=="%"&&C[0]=="<number:percentage-style"?T+="%":T+='"'+M.replace(/"/g,'""')+'"'):S[0].charAt(S[0].length-2)!=="/"&&(D=xlmlregex.lastIndex);break;case"day":switch(A=parsexmltag(S[0],!1),A.style){case"short":T+="d";break;case"long":T+="dd";break;default:T+="dd";break}break;case"day-of-week":switch(A=parsexmltag(S[0],!1),A.style){case"short":T+="ddd";break;case"long":T+="dddd";break;default:T+="ddd";break}break;case"era":switch(A=parsexmltag(S[0],!1),A.style){case"short":T+="ee";break;case"long":T+="eeee";break;default:T+="eeee";break}break;case"hours":switch(A=parsexmltag(S[0],!1),A.style){case"short":T+="h";break;case"long":T+="hh";break;default:T+="hh";break}break;case"minutes":switch(A=parsexmltag(S[0],!1),A.style){case"short":T+="m";break;case"long":T+="mm";break;default:T+="mm";break}break;case"month":switch(A=parsexmltag(S[0],!1),A.textual&&(T+="mm"),A.style){case"short":T+="m";break;case"long":T+="mm";break;default:T+="m";break}break;case"seconds":{switch(A=parsexmltag(S[0],!1),A.style){case"short":T+="s";break;case"long":T+="ss";break;default:T+="ss";break}A["decimal-places"]&&(T+="."+fill("0",+A["decimal-places"]))}break;case"year":switch(A=parsexmltag(S[0],!1),A.style){case"short":T+="yy";break;case"long":T+="yyyy";break;default:T+="yy";break}break;case"am-pm":T+="AM/PM";break;case"week-of-year":case"quarter":console.error("Excel does not support ODS format token "+S[3]);break;case"fill-character":S[1]==="/"?(M=E.slice(D,xlmlregex.lastIndex-S[0].length),T+='"'+M.replace(/"/g,'""')+'"*'):S[0].charAt(S[0].length-2)!=="/"&&(D=xlmlregex.lastIndex);break;case"scientific-number":A=parsexmltag(S[0],!1),T+="0."+fill("0",+A["min-decimal-places"]||+A["decimal-places"]||2)+fill("?",+A["decimal-places"]-+A["min-decimal-places"]||0)+"E"+(parsexmlbool(A["forced-exponent-sign"])?"+":"")+fill("0",+A["min-exponent-digits"]||2);break;case"fraction":A=parsexmltag(S[0],!1),+A["min-integer-digits"]?T+=fill("0",+A["min-integer-digits"]):T+="#",T+=" ",T+=fill("?",+A["min-numerator-digits"]||1),T+="/",+A["denominator-value"]?T+=A["denominator-value"]:T+=fill("?",+A["min-denominator-digits"]||1);break;case"currency-symbol":S[1]==="/"?T+='"'+E.slice(D,xlmlregex.lastIndex-S[0].length).replace(/"/g,'""')+'"':S[0].charAt(S[0].length-2)!=="/"?D=xlmlregex.lastIndex:T+="$";break;case"text-properties":switch(A=parsexmltag(S[0],!1),(A.color||"").toLowerCase().replace("#","")){case"ff0000":case"red":T="[Red]"+T;break}break;case"text-content":T+="@";break;case"map":A=parsexmltag(S[0],!1),unescapexml(A.condition)=="value()>=0"?T=x[A["apply-style-name"]]+";"+T:console.error("ODS number format may be incorrect: "+A.condition);break;case"number":if(S[1]==="/")break;A=parsexmltag(S[0],!1),B="",B+=fill("0",+A["min-integer-digits"]||1),parsexmlbool(A.grouping)&&(B=commaify(fill("#",Math.max(0,4-B.length))+B)),(+A["min-decimal-places"]||+A["decimal-places"])&&(B+="."),+A["min-decimal-places"]&&(B+=fill("0",+A["min-decimal-places"]||1)),+A["decimal-places"]-(+A["min-decimal-places"]||0)&&(B+=fill("0",+A["decimal-places"]-(+A["min-decimal-places"]||0))),T+=B;break;case"embedded-text":S[1]==="/"?I==0?T+='"'+E.slice(D,xlmlregex.lastIndex-S[0].length).replace(/"/g,'""')+'"':T=T.slice(0,I)+'"'+E.slice(D,xlmlregex.lastIndex-S[0].length).replace(/"/g,'""')+'"'+T.slice(I):S[0].charAt(S[0].length-2)!=="/"&&(D=xlmlregex.lastIndex,I=-+parsexmltag(S[0],!1).position||0);break}return x}function parse_content_xml(t,n,_){var x=n||{},E=xlml_normalize(t),S=[],C,T,B,A="",I=0,D,M,V={},L=[],F={};x.dense&&(F["!data"]=[]);var j,U,H={value:""},Y="",Z=0,ne=[],re=-1,X=-1,ce={s:{r:1e6,c:1e7},e:{r:0,c:0}},ue=0,_e=_||{},ye={},ie=[],W={},O=0,z=0,J=[],ee=1,ae=1,oe=[],se={Names:[],WBProps:{}},G={},q=["",""],te=[],fe={},he="",Ee=0,we=!1,xe=!1,$e=0,ge=0;for(xlmlregex.lastIndex=0,E=E.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");j=xlmlregex.exec(E);)switch(j[3]=j[3].replace(/_.*$/,"")){case"table":case"":j[1]==="/"?(ce.e.c>=ce.s.c&&ce.e.r>=ce.s.r?F["!ref"]=encode_range(ce):F["!ref"]="A1:A1",x.sheetRows>0&&x.sheetRows<=ce.e.r&&(F["!fullref"]=F["!ref"],ce.e.r=x.sheetRows-1,F["!ref"]=encode_range(ce)),ie.length&&(F["!merges"]=ie),J.length&&(F["!rows"]=J),D.name=D.||D.name,typeof JSON<"u"&&JSON.stringify(D),L.push(D.name),V[D.name]=F,xe=!1):j[0].charAt(j[0].length-2)!=="/"&&(D=parsexmltag(j[0],!1),re=X=-1,ce.s.r=ce.s.c=1e7,ce.e.r=ce.e.c=0,F={},x.dense&&(F["!data"]=[]),ie=[],J=[],xe=!0);break;case"table-row-group":j[1]==="/"?--ue:++ue;break;case"table-row":case"":if(j[1]==="/"){re+=ee,ee=1;break}if(M=parsexmltag(j[0],!1),M.?re=M.-1:re==-1&&(re=0),ee=+M["number-rows-repeated"]||1,ee<10)for($e=0;$e<ee;++$e)ue>0&&(J[re+$e]={level:ue});X=-1;break;case"covered-table-cell":j[1]!=="/"&&++X,x.sheetStubs&&(x.dense?(F["!data"][re]||(F["!data"][re]=[]),F["!data"][re][X]={t:"z"}):F[encode_cell({r:re,c:X})]={t:"z"}),Y="",ne=[];break;case"table-cell":case"":if(j[0].charAt(j[0].length-2)==="/")++X,H=parsexmltag(j[0],!1),ae=parseInt(H["number-columns-repeated"]||"1",10),U={t:"z",v:null},H.formula&&x.cellFormula!=!1&&(U.f=ods_to_csf_formula(unescapexml(H.formula))),H["style-name"]&&ye[H["style-name"]]&&(U.z=ye[H["style-name"]]),(H.||H["value-type"])=="string"&&(U.t="s",U.v=unescapexml(H["string-value"]||""),x.dense?(F["!data"][re]||(F["!data"][re]=[]),F["!data"][re][X]=U):F[encode_col(X)+encode_row(re)]=U),X+=ae-1;else if(j[1]!=="/"){++X,Y="",Z=0,ne=[],ae=1;var Se=ee?re+ee-1:re;if(X>ce.e.c&&(ce.e.c=X),X<ce.s.c&&(ce.s.c=X),re<ce.s.r&&(ce.s.r=re),Se>ce.e.r&&(ce.e.r=Se),H=parsexmltag(j[0],!1),te=[],fe={},U={t:H.||H["value-type"],v:null},H["style-name"]&&ye[H["style-name"]]&&(U.z=ye[H["style-name"]]),x.cellFormula)if(H.formula&&(H.formula=unescapexml(H.formula)),H["number-matrix-columns-spanned"]&&H["number-matrix-rows-spanned"]&&(O=parseInt(H["number-matrix-rows-spanned"],10)||0,z=parseInt(H["number-matrix-columns-spanned"],10)||0,W={s:{r:re,c:X},e:{r:re+O-1,c:X+z-1}},U.F=encode_range(W),oe.push([W,U.F])),H.formula)U.f=ods_to_csf_formula(H.formula);else for($e=0;$e<oe.length;++$e)re>=oe[$e][0].s.r&&re<=oe[$e][0].e.r&&X>=oe[$e][0].s.c&&X<=oe[$e][0].e.c&&(U.F=oe[$e][1]);switch((H["number-columns-spanned"]||H["number-rows-spanned"])&&(O=parseInt(H["number-rows-spanned"],10)||0,z=parseInt(H["number-columns-spanned"],10)||0,W={s:{r:re,c:X},e:{r:re+O-1,c:X+z-1}},ie.push(W)),H["number-columns-repeated"]&&(ae=parseInt(H["number-columns-repeated"],10)),U.t){case"boolean":U.t="b",U.v=parsexmlbool(H["boolean-value"])||+H["boolean-value"]>=1;break;case"float":U.t="n",U.v=parseFloat(H.value);break;case"percentage":U.t="n",U.v=parseFloat(H.value);break;case"currency":U.t="n",U.v=parseFloat(H.value);break;case"date":U.t="d",U.v=parseDate(H["date-value"]),x.cellDates||(U.t="n",U.v=datenum(U.v,se.WBProps.date1904)-ge),U.z||(U.z="m/d/yy");break;case"time":U.t="n",U.v=parse_isodur(H["time-value"])/86400,x.cellDates&&(U.t="d",U.v=numdate(U.v)),U.z||(U.z="HH:MM:SS");break;case"number":U.t="n",U.v=parseFloat(H.);break;default:if(U.t==="string"||U.t==="text"||!U.t)U.t="s",H["string-value"]!=null&&(Y=unescapexml(H["string-value"]),ne=[]);else throw new Error("Unsupported value type "+U.t)}}else{if(we=!1,U.t==="s"&&(U.v=Y||"",ne.length&&(U.R=ne),we=Z==0),G.Target&&(U.l=G),te.length>0&&(U.c=te,te=[]),Y&&x.cellText!==!1&&(U.w=Y),we&&(U.t="z",delete U.v),(!we||x.sheetStubs)&&!(x.sheetRows&&x.sheetRows<=re))for(var me=0;me<ee;++me){if(ae=parseInt(H["number-columns-repeated"]||"1",10),x.dense)for(F["!data"][re+me]||(F["!data"][re+me]=[]),F["!data"][re+me][X]=me==0?U:dup(U);--ae>0;)F["!data"][re+me][X+ae]=dup(U);else for(F[encode_cell({r:re+me,c:X})]=U;--ae>0;)F[encode_cell({r:re+me,c:X+ae})]=dup(U);ce.e.c<=X&&(ce.e.c=X)}ae=parseInt(H["number-columns-repeated"]||"1",10),X+=ae-1,ae=0,U={},Y="",ne=[]}G={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(j[1]==="/"){if((C=S.pop())[0]!==j[3])throw"Bad state: "+C}else j[0].charAt(j[0].length-2)!=="/"&&S.push([j[3],!0]);break;case"annotation":if(j[1]==="/"){if((C=S.pop())[0]!==j[3])throw"Bad state: "+C;fe.t=Y,ne.length&&(fe.R=ne),fe.a=he,te.push(fe)}else j[0].charAt(j[0].length-2)!=="/"&&S.push([j[3],!1]);he="",Ee=0,Y="",Z=0,ne=[];break;case"creator":j[1]==="/"?he=E.slice(Ee,j.index):Ee=j.index+j[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(j[1]==="/"){if((C=S.pop())[0]!==j[3])throw"Bad state: "+C}else j[0].charAt(j[0].length-2)!=="/"&&S.push([j[3],!1]);Y="",Z=0,ne=[];break;case"scientific-number":case"currency-symbol":case"fill-character":break;case"text-style":case"boolean-style":case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":if(j[1]==="/"){var Be=xlmlregex.lastIndex;parse_ods_styles(E.slice(B,xlmlregex.lastIndex),n,_e),xlmlregex.lastIndex=Be}else j[0].charAt(j[0].length-2)!=="/"&&(B=xlmlregex.lastIndex-j[0].length);break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":{var ve=parsexmltag(j[0],!1);ve.family=="table-cell"&&_e[ve["data-style-name"]]&&(ye[ve.name]=_e[ve["data-style-name"]])}break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":break;case"boolean":break;case"text":if(j[0].slice(-2)==="/>")break;if(j[1]==="/")switch(S[S.length-1][0]){case"number-style":case"date-style":case"time-style":A+=E.slice(I,j.index);break}else I=j.index+j[0].length;break;case"named-range":T=parsexmltag(j[0],!1),q=ods_to_csf_3D(T["cell-range-address"]);var Ae={Name:T.name,Ref:q[0]+"!"+q[1]};xe&&(Ae.Sheet=L.length),se.Names.push(Ae);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":switch(T=parsexmltag(j[0],!1),T["date-value"]){case"1904-01-01":se.WBProps.date1904=!0;case"1900-01-01":ge=0}break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(S[S.length-1][0])>-1)break;if(j[1]==="/"&&(!H||!H["string-value"])){var Ve=parse_text_p(E.slice(Z,j.index));Y=(Y.length>0?Y+`
`:"")+Ve[0]}else parsexmltag(j[0],!1),Z=j.index+j[0].length;break;case"s":break;case"database-range":if(j[1]==="/")break;try{q=ods_to_csf_3D(parsexmltag(j[0])["target-range-address"]),V[q[0]]["!autofilter"]={ref:q[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(j[1]!=="/"){if(G=parsexmltag(j[0],!1),!G.href)break;G.Target=unescapexml(G.href),delete G.href,G.Target.charAt(0)=="#"&&G.Target.indexOf(".")>-1?(q=ods_to_csf_3D(G.Target.slice(1)),G.Target="#"+q[0]+"!"+q[1]):G.Target.match(/^\.\.[\\\/]/)&&(G.Target=G.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(j[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(x.WTF)throw new Error(j)}}var Pe={Sheets:V,SheetNames:L,Workbook:se};return x.bookSheets&&delete Pe.Sheets,Pe}function parse_ods(t,n){n=n||{},safegetzipfile(t,"META-INF/manifest.xml")&&parse_manifest(getzipdata(t,"META-INF/manifest.xml"),n);var _=getzipstr(t,"styles.xml"),x=_&&parse_ods_styles(utf8read(_)),E=getzipstr(t,"content.xml");if(!E)throw new Error("Missing content.xml in ODS / UOF file");var S=parse_content_xml(utf8read(E),n,x);return safegetzipfile(t,"meta.xml")&&(S.Props=parse_core_props(getzipdata(t,"meta.xml"))),S.bookType="ods",S}function parse_fods(t,n){var _=parse_content_xml(t,n);return _.bookType="fods",_}var write_styles_ods=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),n="<office:document-styles "+wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return XML_HEADER+n}}();function write_number_format_ods(t,n){var _="number",x="",E={"style:name":n},S="",C=0;t=t.replace(/"[$]"/g,"$");e:{if(t.indexOf(";")>-1&&(console.error("Unsupported ODS Style Map exported.  Using first branch of "+t),t=t.slice(0,t.indexOf(";"))),t=="@"){_="text",x="<number:text-content/>";break e}if(t.indexOf(/\$/)>-1&&(_="currency"),t[C]=='"'){for(S="";t[++C]!='"'||t[++C]=='"';)S+=t[C];--C,t[C+1]=="*"?(C++,x+="<number:fill-character>"+escapexml(S.replace(/""/g,'"'))+"</number:fill-character>"):x+="<number:text>"+escapexml(S.replace(/""/g,'"'))+"</number:text>",t=t.slice(C+1),C=0}var T=t.match(/# (\?+)\/(\?+)/);if(T){x+=writextag("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":T[1].length,"number:max-denominator-value":Math.max(+T[1].replace(/./g,"9"),+T[2].replace(/./g,"9"))});break e}if(T=t.match(/# (\?+)\/(\d+)/)){x+=writextag("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":T[1].length,"number:denominator-value":+T[2]});break e}if(T=t.match(/(\d+)(|\.\d+)%/)){_="percentage",x+=writextag("number:number",null,{"number:decimal-places":T[2]&&T.length-1||0,"number:min-decimal-places":T[2]&&T.length-1||0,"number:min-integer-digits":T[1].length})+"<number:text>%</number:text>";break e}var B=!1;if(["y","m","d"].indexOf(t[0])>-1){_="date";t:for(;C<t.length;++C)switch(S=t[C].toLowerCase()){case"h":case"s":B=!0,--C;break t;case"m":r:for(var A=C+1;A<t.length;++A)switch(t[A]){case"y":case"d":break r;case"h":case"s":B=!0,--C;break t}case"y":case"d":for(;(t[++C]||"").toLowerCase()==S[0];)S+=S[0];switch(--C,S){case"y":case"yy":x+="<number:year/>";break;case"yyy":case"yyyy":x+='<number:year number:style="long"/>';break;case"mmmmm":console.error("ODS has no equivalent of format |mmmmm|");case"m":case"mm":case"mmm":case"mmmm":x+='<number:month number:style="'+(S.length%2?"short":"long")+'" number:textual="'+(S.length>=3?"true":"false")+'"/>';break;case"d":case"dd":x+='<number:day number:style="'+(S.length%2?"short":"long")+'"/>';break;case"ddd":case"dddd":x+='<number:day-of-week number:style="'+(S.length%2?"short":"long")+'"/>';break}break;case'"':for(;t[++C]!='"'||t[++C]=='"';)S+=t[C];--C,x+="<number:text>"+escapexml(S.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":x+="<number:text>"+escapexml(S)+"</number:text>";break;default:console.error("unrecognized character "+S+" in ODF format "+t)}if(!B)break e;t=t.slice(C+1),C=0}if(t.match(/^\[?[hms]/)){for(_=="number"&&(_="time"),t.match(/\[/)&&(t=t.replace(/[\[\]]/g,""),E["number:truncate-on-overflow"]="false");C<t.length;++C)switch(S=t[C].toLowerCase()){case"h":case"m":case"s":for(;(t[++C]||"").toLowerCase()==S[0];)S+=S[0];switch(--C,S){case"h":case"hh":x+='<number:hours number:style="'+(S.length%2?"short":"long")+'"/>';break;case"m":case"mm":x+='<number:minutes number:style="'+(S.length%2?"short":"long")+'"/>';break;case"s":case"ss":if(t[C+1]==".")do S+=t[C+1],++C;while(t[C+1]=="0");x+='<number:seconds number:style="'+(S.match("ss")?"long":"short")+'"'+(S.match(/\./)?' number:decimal-places="'+(S.match(/0+/)||[""])[0].length+'"':"")+"/>";break}break;case'"':for(;t[++C]!='"'||t[++C]=='"';)S+=t[C];--C,x+="<number:text>"+escapexml(S.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":x+="<number:text>"+escapexml(S)+"</number:text>";break;case"a":if(t.slice(C,C+3).toLowerCase()=="a/p"){x+="<number:am-pm/>",C+=2;break}if(t.slice(C,C+5).toLowerCase()=="am/pm"){x+="<number:am-pm/>",C+=4;break}default:console.error("unrecognized character "+S+" in ODF format "+t)}break e}if(t.indexOf(/\$/)>-1&&(_="currency"),t[0]=="$"&&(x+='<number:currency-symbol number:language="en" number:country="US">$</number:currency-symbol>',t=t.slice(1),C=0),C=0,t[C]=='"'){for(;t[++C]!='"'||t[++C]=='"';)S+=t[C];--C,t[C+1]=="*"?(C++,x+="<number:fill-character>"+escapexml(S.replace(/""/g,'"'))+"</number:fill-character>"):x+="<number:text>"+escapexml(S.replace(/""/g,'"'))+"</number:text>",t=t.slice(C+1),C=0}var I=t.match(/([#0][0#,]*)(\.[0#]*|)(E[+]?0*|)/i);if(!I||!I[0])console.error("Could not find numeric part of "+t);else{var D=I[1].replace(/,/g,"");x+="<number:"+(I[3]?"scientific-":"")+'number number:min-integer-digits="'+(D.indexOf("0")==-1?"0":D.length-D.indexOf("0"))+'"'+(I[0].indexOf(",")>-1?' number:grouping="true"':"")+(I[2]&&' number:decimal-places="'+(I[2].length-1)+'"'||' number:decimal-places="0"')+(I[3]&&I[3].indexOf("+")>-1?' number:forced-exponent-sign="true"':"")+(I[3]?' number:min-exponent-digits="'+I[3].match(/0+/)[0].length+'"':"")+"></number:"+(I[3]?"scientific-":"")+"number>",C=I.index+I[0].length}if(t[C]=='"'){for(S="";t[++C]!='"'||t[++C]=='"';)S+=t[C];--C,x+="<number:text>"+escapexml(S.replace(/""/g,'"'))+"</number:text>"}}return x?writextag("number:"+_+"-style",x,E):(console.error("Could not generate ODS number format for |"+t+"|"),"")}function write_names_ods(t,n,_){var x=t.filter(function(E){return E.Sheet==(_==-1?null:_)});return x.length?`      <table:named-expressions>
`+x.map(function(E){var S=csf_to_ods_3D(E.Ref);return"        "+writextag("table:named-range",null,{"table:name":E.Name,"table:cell-range-address":S,"table:base-cell-address":S.replace(/[\.]?[^\.]*$/,".$A$1")})}).join(`
`)+`
      </table:named-expressions>
`:""}var write_content_ods=function(){var t=function(S){return escapexml(S).replace(/  +/g,function(C){return'<text:s text:c="'+C.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},n=`          <table:table-cell />
`,_=`          <table:covered-table-cell/>
`,x=function(S,C,T,B,A){var I=[];I.push('      <table:table table:name="'+escapexml(C.SheetNames[T])+`" table:style-name="ta1">
`);var D=0,M=0,V=decode_range(S["!ref"]||"A1"),L=S["!merges"]||[],F=0,j=S["!data"]!=null;if(S["!cols"])for(M=0;M<=V.e.c;++M)I.push("        <table:table-column"+(S["!cols"][M]?' table:style-name="co'+S["!cols"][M].ods+'"':"")+`></table:table-column>
`);var U="",H=S["!rows"]||[];for(D=0;D<V.s.r;++D)U=H[D]?' table:style-name="ro'+H[D].ods+'"':"",I.push("        <table:table-row"+U+`></table:table-row>
`);for(;D<=V.e.r;++D){for(U=H[D]?' table:style-name="ro'+H[D].ods+'"':"",I.push("        <table:table-row"+U+`>
`),M=0;M<V.s.c;++M)I.push(n);for(;M<=V.e.c;++M){var Y=!1,Z={},ne="";for(F=0;F!=L.length;++F)if(!(L[F].s.c>M)&&!(L[F].s.r>D)&&!(L[F].e.c<M)&&!(L[F].e.r<D)){(L[F].s.c!=M||L[F].s.r!=D)&&(Y=!0),Z["table:number-columns-spanned"]=L[F].e.c-L[F].s.c+1,Z["table:number-rows-spanned"]=L[F].e.r-L[F].s.r+1;break}if(Y){I.push(_);continue}var re=encode_cell({r:D,c:M}),X=j?(S["!data"][D]||[])[M]:S[re];if(X&&X.f&&(Z["table:formula"]=escapexml(csf_to_ods_formula(X.f)),X.F&&X.F.slice(0,re.length)==re)){var ce=decode_range(X.F);Z["table:number-matrix-columns-spanned"]=ce.e.c-ce.s.c+1,Z["table:number-matrix-rows-spanned"]=ce.e.r-ce.s.r+1}if(!X){I.push(n);continue}switch(X.t){case"b":ne=X.v?"TRUE":"FALSE",Z["office:value-type"]="boolean",Z["office:boolean-value"]=X.v?"true":"false";break;case"n":ne=X.w||String(X.v||0),Z["office:value-type"]="float",Z["office:value"]=X.v||0;break;case"s":case"str":ne=X.v==null?"":X.v,Z["office:value-type"]="string";break;case"d":ne=X.w||parseDate(X.v).toISOString(),Z["office:value-type"]="date",Z["office:date-value"]=parseDate(X.v).toISOString(),Z["table:style-name"]="ce1";break;default:I.push(n);continue}var ue=t(ne);if(X.l&&X.l.Target){var _e=X.l.Target;_e=_e.charAt(0)=="#"?"#"+csf_to_ods_3D(_e.slice(1)):_e,_e.charAt(0)!="#"&&!_e.match(/^\w+:/)&&(_e="../"+_e),ue=writextag("text:a",ue,{"xlink:href":_e.replace(/&/g,"&amp;")})}A[X.z]&&(Z["table:style-name"]="ce"+A[X.z].slice(1)),I.push("          "+writextag("table:table-cell",writextag("text:p",ue,{}),Z)+`
`)}I.push(`        </table:table-row>
`)}return(C.Workbook||{}).Names&&I.push(write_names_ods(C.Workbook.Names,C.SheetNames,T)),I.push(`      </table:table>
`),I.join("")},E=function(S,C){S.push(` <office:automatic-styles>
`);var T=0;C.SheetNames.map(function(D){return C.Sheets[D]}).forEach(function(D){if(D&&D["!cols"]){for(var M=0;M<D["!cols"].length;++M)if(D["!cols"][M]){var V=D["!cols"][M];if(V.width==null&&V.wpx==null&&V.wch==null)continue;process_col(V),V.ods=T;var L=D["!cols"][M].wpx+"px";S.push('  <style:style style:name="co'+T+`" style:family="table-column">
`),S.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+L+`"/>
`),S.push(`  </style:style>
`),++T}}});var B=0;C.SheetNames.map(function(D){return C.Sheets[D]}).forEach(function(D){if(D&&D["!rows"]){for(var M=0;M<D["!rows"].length;++M)if(D["!rows"][M]){D["!rows"][M].ods=B;var V=D["!rows"][M].hpx+"px";S.push('  <style:style style:name="ro'+B+`" style:family="table-row">
`),S.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+V+`"/>
`),S.push(`  </style:style>
`),++B}}}),S.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),S.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),S.push(`  </style:style>
`),S.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),S.push(`   <number:month number:style="long"/>
`),S.push(`   <number:text>/</number:text>
`),S.push(`   <number:day number:style="long"/>
`),S.push(`   <number:text>/</number:text>
`),S.push(`   <number:year/>
`),S.push(`  </number:date-style>
`);var A={},I=69;return C.SheetNames.map(function(D){return C.Sheets[D]}).forEach(function(D){if(D)for(var M=D["!data"]!=null,V=decode_range(D["!ref"]),L=0;L<=V.e.r;++L)for(var F=0;F<=V.e.c;++F){var j=M?(D["!data"][L]||[])[F]:D[encode_cell({r:L,c:F})];if(!(!j||!j.z||j.z.toLowerCase()=="general")&&!A[j.z]){var U=write_number_format_ods(j.z,"N"+I);U&&(A[j.z]="N"+I,++I,S.push(U+`
`))}}}),S.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),keys(A).forEach(function(D){S.push('<style:style style:name="ce'+A[D].slice(1)+'" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="'+A[D]+`"/>
`)}),S.push(` </office:automatic-styles>
`),A};return function(C,T){var B=[XML_HEADER],A=wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),I=wxt_helper({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});T.bookType=="fods"?(B.push("<office:document"+A+I+`>
`),B.push(write_meta_ods().replace(/<office:document-meta.*?>/,"").replace(/<\/office:document-meta>/,"")+`
`)):B.push("<office:document-content"+A+`>
`);var D=E(B,C);B.push(`  <office:body>
`),B.push(`    <office:spreadsheet>
`),((C.Workbook||{}).WBProps||{}).date1904&&B.push(`      <table:calculation-settings table:case-sensitive="false" table:search-criteria-must-apply-to-whole-cell="true" table:use-wildcards="true" table:use-regular-expressions="false" table:automatic-find-labels="false">
        <table:null-date table:date-value="1904-01-01"/>
      </table:calculation-settings>
`);for(var M=0;M!=C.SheetNames.length;++M)B.push(x(C.Sheets[C.SheetNames[M]],C,M,T,D));return(C.Workbook||{}).Names&&B.push(write_names_ods(C.Workbook.Names,C.SheetNames,-1)),B.push(`    </office:spreadsheet>
`),B.push(`  </office:body>
`),T.bookType=="fods"?B.push("</office:document>"):B.push("</office:document-content>"),B.join("")}}();function write_ods(t,n){if(n.bookType=="fods")return write_content_ods(t,n);var _=zip_new(),x="",E=[],S=[];return x="mimetype",zip_add_file(_,x,"application/vnd.oasis.opendocument.spreadsheet"),x="content.xml",zip_add_file(_,x,write_content_ods(t,n)),E.push([x,"text/xml"]),S.push([x,"ContentFile"]),x="styles.xml",zip_add_file(_,x,write_styles_ods(t,n)),E.push([x,"text/xml"]),S.push([x,"StylesFile"]),x="meta.xml",zip_add_file(_,x,XML_HEADER+write_meta_ods()),E.push([x,"text/xml"]),S.push([x,"MetadataFile"]),x="manifest.rdf",zip_add_file(_,x,write_rdf(S)),E.push([x,"application/rdf+xml"]),x="META-INF/manifest.xml",zip_add_file(_,x,write_manifest(E)),_}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */var subarray=function(){try{return typeof Uint8Array>"u"||typeof Uint8Array.prototype.subarray>"u"?"slice":typeof Buffer<"u"?typeof Buffer.prototype.subarray>"u"?"slice":(typeof Buffer.from=="function"?Buffer.from([72,62]):new Buffer([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch{return"slice"}}();function u8_to_dataview(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function u8str(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):utf8read(a2s(t))}function stru8(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):s2a(utf8write(t))}function u8concat(t){for(var n=0,_=0;_<t.length;++_)n+=t[_].length;var x=new Uint8Array(n),E=0;for(_=0;_<t.length;++_){var S=t[_],C=S.length;if(C<250)for(var T=0;T<C;++T)x[E++]=S[T];else x.set(S,E),E+=C}return x}function popcnt(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function readDecimal128LE(t,n){for(var _=(t[n+15]&127)<<7|t[n+14]>>1,x=t[n+14]&1,E=n+13;E>=n;--E)x=x*256+t[E];return(t[n+15]&128?-x:x)*Math.pow(10,_-6176)}function writeDecimal128LE(t,n,_){var x=Math.floor(_==0?0:Math.LOG10E*Math.log(Math.abs(_)))+6176-16,E=_/Math.pow(10,x-6176);t[n+15]|=x>>7,t[n+14]|=(x&127)<<1;for(var S=0;E>=1;++S,E/=256)t[n+S]=E&255;t[n+15]|=_>=0?0:128}function parse_varint49(t,n){var _=n.l,x=t[_]&127;e:if(t[_++]>=128&&(x|=(t[_]&127)<<7,t[_++]<128||(x|=(t[_]&127)<<14,t[_++]<128)||(x|=(t[_]&127)<<21,t[_++]<128)||(x+=(t[_]&127)*Math.pow(2,28),++_,t[_++]<128)||(x+=(t[_]&127)*Math.pow(2,35),++_,t[_++]<128)||(x+=(t[_]&127)*Math.pow(2,42),++_,t[_++]<128)))break e;return n.l=_,x}function write_varint49(t){var n=new Uint8Array(7);n[0]=t&127;var _=1;e:if(t>127){if(n[_-1]|=128,n[_]=t>>7&127,++_,t<=16383||(n[_-1]|=128,n[_]=t>>14&127,++_,t<=2097151)||(n[_-1]|=128,n[_]=t>>21&127,++_,t<=268435455)||(n[_-1]|=128,n[_]=t/256>>>21&127,++_,t<=34359738367)||(n[_-1]|=128,n[_]=t/65536>>>21&127,++_,t<=4398046511103))break e;n[_-1]|=128,n[_]=t/16777216>>>21&127,++_}return n[subarray](0,_)}function parse_packed_varints(t){for(var n={l:0},_=[];n.l<t.length;)_.push(parse_varint49(t,n));return _}function write_packed_varints(t){return u8concat(t.map(function(n){return write_varint49(n)}))}function varint_to_i32(t){var n=0,_=t[n]&127;e:if(t[n++]>=128){if(_|=(t[n]&127)<<7,t[n++]<128||(_|=(t[n]&127)<<14,t[n++]<128)||(_|=(t[n]&127)<<21,t[n++]<128))break e;_|=(t[n]&127)<<28}return _}function parse_shallow(t){for(var n=[],_={l:0};_.l<t.length;){var x=_.l,E=parse_varint49(t,_),S=E&7;E=E/8|0;var C,T=_.l;switch(S){case 0:{for(;t[T++]>=128;);C=t[subarray](_.l,T),_.l=T}break;case 1:C=t[subarray](T,T+8),_.l=T+8;break;case 2:{var B=parse_varint49(t,_);C=t[subarray](_.l,_.l+B),_.l+=B}break;case 5:C=t[subarray](T,T+4),_.l=T+4;break;default:throw new Error("PB Type ".concat(S," for Field ").concat(E," at offset ").concat(x))}var A={data:C,type:S};n[E]==null&&(n[E]=[]),n[E].push(A)}return n}function write_shallow(t){var n=[];return t.forEach(function(_,x){x!=0&&_.forEach(function(E){E.data&&(n.push(write_varint49(x*8+E.type)),E.type==2&&n.push(write_varint49(E.data.length)),n.push(E.data))})}),u8concat(n)}function mappa(t,n){return t?.map(function(_){return n(_.data)})||[]}function parse_iwa_file(t){for(var n,_=[],x={l:0};x.l<t.length;){var E=parse_varint49(t,x),S=parse_shallow(t[subarray](x.l,x.l+E));x.l+=E;var C={id:varint_to_i32(S[1][0].data),messages:[]};S[2].forEach(function(T){var B=parse_shallow(T.data),A=varint_to_i32(B[3][0].data);C.messages.push({meta:B,data:t[subarray](x.l,x.l+A)}),x.l+=A}),(n=S[3])!=null&&n[0]&&(C.merge=varint_to_i32(S[3][0].data)>>>0>0),_.push(C)}return _}function write_iwa_file(t){var n=[];return t.forEach(function(_){var x=[[],[{data:write_varint49(_.id),type:0}],[]];_.merge!=null&&(x[3]=[{data:write_varint49(+!!_.merge),type:0}]);var E=[];_.messages.forEach(function(C){E.push(C.data),C.meta[3]=[{type:0,data:write_varint49(C.data.length)}],x[2].push({data:write_shallow(C.meta),type:2})});var S=write_shallow(x);n.push(write_varint49(S.length)),n.push(S),E.forEach(function(C){return n.push(C)})}),u8concat(n)}function parse_snappy_chunk(t,n){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var _={l:0},x=parse_varint49(n,_),E=[],S=_.l;S<n.length;){var C=n[S]&3;if(C==0){var T=n[S++]>>2;if(T<60)++T;else{var B=T-59;T=n[S],B>1&&(T|=n[S+1]<<8),B>2&&(T|=n[S+2]<<16),B>3&&(T|=n[S+3]<<24),T>>>=0,T++,S+=B}E.push(n[subarray](S,S+T)),S+=T;continue}else{var A=0,I=0;if(C==1?(I=(n[S]>>2&7)+4,A=(n[S++]&224)<<3,A|=n[S++]):(I=(n[S++]>>2)+1,C==2?(A=n[S]|n[S+1]<<8,S+=2):(A=(n[S]|n[S+1]<<8|n[S+2]<<16|n[S+3]<<24)>>>0,S+=4)),A==0)throw new Error("Invalid offset 0");for(var D=E.length-1,M=A;D>=0&&M>=E[D].length;)M-=E[D].length,--D;if(D<0)if(M==0)M=E[D=0].length;else throw new Error("Invalid offset beyond length");if(I<M)E.push(E[D][subarray](E[D].length-M,E[D].length-M+I));else{for(M>0&&(E.push(E[D][subarray](E[D].length-M)),I-=M),++D;I>=E[D].length;)E.push(E[D]),I-=E[D].length,++D;I&&E.push(E[D][subarray](0,I))}E.length>25&&(E=[u8concat(E)])}}for(var V=0,L=0;L<E.length;++L)V+=E[L].length;if(V!=x)throw new Error("Unexpected length: ".concat(V," != ").concat(x));return E}function decompress_iwa_file(t){Array.isArray(t)&&(t=new Uint8Array(t));for(var n=[],_=0;_<t.length;){var x=t[_++],E=t[_]|t[_+1]<<8|t[_+2]<<16;_+=3,n.push.apply(n,parse_snappy_chunk(x,t[subarray](_,_+E))),_+=E}if(_!==t.length)throw new Error("data is not a valid framed stream!");return n.length==1?n[0]:u8concat(n)}function compress_iwa_file(t){for(var n=[],_=0;_<t.length;){var x=Math.min(t.length-_,268435455),E=new Uint8Array(4);n.push(E);var S=write_varint49(x),C=S.length;n.push(S),x<=60?(C++,n.push(new Uint8Array([x-1<<2]))):x<=256?(C+=2,n.push(new Uint8Array([240,x-1&255]))):x<=65536?(C+=3,n.push(new Uint8Array([244,x-1&255,x-1>>8&255]))):x<=16777216?(C+=4,n.push(new Uint8Array([248,x-1&255,x-1>>8&255,x-1>>16&255]))):x<=4294967296&&(C+=5,n.push(new Uint8Array([252,x-1&255,x-1>>8&255,x-1>>16&255,x-1>>>24&255]))),n.push(t[subarray](_,_+x)),C+=x,E[0]=0,E[1]=C&255,E[2]=C>>8&255,E[3]=C>>16&255,_+=x}return u8concat(n)}var numbers_lut_new=function(){return{sst:[],rsst:[],ofmt:[],nfmt:[]}};function numbers_format_cell(t,n,_,x,E){var S,C,T,B,A=n&255,I=n>>8,D=I>=5?E:x;e:if(_&(I>4?8:4)&&t.t=="n"&&A==7){var M=(S=D[7])!=null&&S[0]?varint_to_i32(D[7][0].data):-1;if(M==-1)break e;var V=(C=D[15])!=null&&C[0]?varint_to_i32(D[15][0].data):-1,L=(T=D[16])!=null&&T[0]?varint_to_i32(D[16][0].data):-1,F=(B=D[40])!=null&&B[0]?varint_to_i32(D[40][0].data):-1,j=t.v,U=j;t:if(F){if(j==0){V=L=2;break t}j>=604800?V=1:j>=86400?V=2:j>=3600?V=4:j>=60?V=8:j>=1?V=16:V=32,Math.floor(j)!=j?L=32:j%60?L=16:j%3600?L=8:j%86400?L=4:j%604800&&(L=2),L<V&&(L=V)}if(V==-1||L==-1)break e;var H=[],Y=[];V==1&&(U=j/604800,L==1?Y.push('d"d"'):(U|=0,j-=604800*U),H.push(U+(M==2?" week"+(U==1?"":"s"):M==1?"w":""))),V<=2&&L>=2&&(U=j/86400,L>2&&(U|=0,j-=86400*U),Y.push('d"d"'),H.push(U+(M==2?" day"+(U==1?"":"s"):M==1?"d":""))),V<=4&&L>=4&&(U=j/3600,L>4&&(U|=0,j-=3600*U),Y.push((V>=4?"[h]":"h")+'"h"'),H.push(U+(M==2?" hour"+(U==1?"":"s"):M==1?"h":""))),V<=8&&L>=8&&(U=j/60,L>8&&(U|=0,j-=60*U),Y.push((V>=8?"[m]":"m")+'"m"'),M==0?H.push((V==8&&L==8||U>=10?"":"0")+U):H.push(U+(M==2?" minute"+(U==1?"":"s"):M==1?"m":""))),V<=16&&L>=16&&(U=j,L>16&&(U|=0,j-=U),Y.push((V>=16?"[s]":"s")+'"s"'),M==0?H.push((L==16&&V==16||U>=10?"":"0")+U):H.push(U+(M==2?" second"+(U==1?"":"s"):M==1?"s":""))),L>=32&&(U=Math.round(1e3*j),V<32&&Y.push('.000"ms"'),M==0?H.push((U>=100?"":U>=10?"0":"00")+U):H.push(U+(M==2?" millisecond"+(U==1?"":"s"):M==1?"ms":""))),t.w=H.join(M==0?":":" "),t.z=Y.join(M==0?'":"':" "),M==0&&(t.w=t.w.replace(/:(\d\d\d)$/,".$1"))}}function parse_old_storage(t,n,_){var x=u8_to_dataview(t),E=x.getUint32(4,!0),S=-1,C=-1,T=-1,B=NaN,A=new Date(2001,0,1),I=_>1?12:8;E&2&&(T=x.getUint32(I,!0),I+=4),I+=popcnt(E&(_>1?3468:396))*4,E&512&&(S=x.getUint32(I,!0),I+=4),I+=popcnt(E&(_>1?12288:4096))*4,E&16&&(C=x.getUint32(I,!0),I+=4),E&32&&(B=x.getFloat64(I,!0),I+=8),E&64&&(A.setTime(A.getTime()+x.getFloat64(I,!0)*1e3),I+=8),_>1&&(E=x.getUint32(8,!0)>>>16,E&255&&(T==-1&&(T=x.getUint32(I,!0)),I+=4));var D,M=t[_>=4?1:2];switch(M){case 0:return;case 2:D={t:"n",v:B};break;case 3:D={t:"s",v:n.sst[C]};break;case 5:D={t:"d",v:A};break;case 6:D={t:"b",v:B>0};break;case 7:D={t:"n",v:B};break;case 8:D={t:"e",v:0};break;case 9:if(S>-1)D={t:"s",v:n.rsst[S]};else throw new Error("Unsupported cell type ".concat(t[subarray](0,4)));break;default:throw new Error("Unsupported cell type ".concat(t[subarray](0,4)))}return T>-1&&numbers_format_cell(D,M|_<<8,E,n.ofmt[T],n.nfmt[T]),M==7&&(D.v/=86400),D}function parse_new_storage(t,n){var _=u8_to_dataview(t);_.getUint32(4,!0);var x=_.getUint32(8,!0),E=12,S=-1,C=-1,T=-1,B=NaN,A=NaN,I=new Date(2001,0,1);x&1&&(B=readDecimal128LE(t,E),E+=16),x&2&&(A=_.getFloat64(E,!0),E+=8),x&4&&(I.setTime(I.getTime()+_.getFloat64(E,!0)*1e3),E+=8),x&8&&(C=_.getUint32(E,!0),E+=4),x&16&&(S=_.getUint32(E,!0),E+=4);var D,M=t[1];switch(M){case 0:return;case 2:D={t:"n",v:B};break;case 3:D={t:"s",v:n.sst[C]};break;case 5:D={t:"d",v:I};break;case 6:D={t:"b",v:A>0};break;case 7:D={t:"n",v:A};break;case 8:D={t:"e",v:0};break;case 9:D={t:"s",v:n.rsst[S]};break;case 10:D={t:"n",v:B};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(x&31," : ").concat(t[subarray](0,4)))}return E+=popcnt(x&8160)*4,x&516096&&(T==-1&&(T=_.getUint32(E,!0)),E+=4),T>-1&&numbers_format_cell(D,M|1280,x>>13,n.ofmt[T],n.nfmt[T]),M==7&&(D.v/=86400),D}function write_new_storage(t,n){var _=new Uint8Array(32),x=u8_to_dataview(_),E=12,S=0;switch(_[0]=5,t.t){case"n":_[1]=2,writeDecimal128LE(_,E,t.v),S|=1,E+=16;break;case"b":_[1]=6,x.setFloat64(E,t.v?1:0,!0),S|=2,E+=8;break;case"s":var C=t.v==null?"":String(t.v),T=n.indexOf(C);T==-1&&(n[T=n.length]=C),_[1]=3,x.setUint32(E,T,!0),S|=8,E+=4;break;default:throw"unsupported cell type "+t.t}return x.setUint32(8,S,!0),_[subarray](0,E)}function write_old_storage(t,n){var _=new Uint8Array(32),x=u8_to_dataview(_),E=12,S=0;switch(_[0]=4,t.t){case"n":_[2]=2,x.setFloat64(E,t.v,!0),S|=32,E+=8;break;case"b":_[2]=6,x.setFloat64(E,t.v?1:0,!0),S|=32,E+=8;break;case"s":var C=t.v==null?"":String(t.v),T=n.indexOf(C);T==-1&&(n[T=n.length]=C),_[2]=3,x.setUint32(E,T,!0),S|=16,E+=4;break;default:throw"unsupported cell type "+t.t}return x.setUint32(8,S,!0),_[subarray](0,E)}function parse_cell_storage(t,n){switch(t[0]){case 0:case 1:case 2:case 3:case 4:return parse_old_storage(t,n,t[0]);case 5:return parse_new_storage(t,n);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function parse_TSP_Reference(t){var n=parse_shallow(t);return varint_to_i32(n[1][0].data)}function write_TSP_Reference(t){return write_shallow([[],[{type:0,data:write_varint49(t)}]])}function numbers_add_oref(t,n){var _,x=(_=t.messages[0].meta[5])!=null&&_[0]?parse_packed_varints(t.messages[0].meta[5][0].data):[],E=x.indexOf(n);E==-1&&(x.push(n),t.messages[0].meta[5]=[{type:2,data:write_packed_varints(x)}])}function numbers_del_oref(t,n){var _,x=(_=t.messages[0].meta[5])!=null&&_[0]?parse_packed_varints(t.messages[0].meta[5][0].data):[];t.messages[0].meta[5]=[{type:2,data:write_packed_varints(x.filter(function(E){return E!=n}))}]}function parse_TST_TableDataList(t,n){var _=parse_shallow(n.data),x=varint_to_i32(_[1][0].data),E=_[3],S=[];return(E||[]).forEach(function(C){var T=parse_shallow(C.data);if(T[1]){var B=varint_to_i32(T[1][0].data)>>>0;switch(x){case 1:S[B]=u8str(T[3][0].data);break;case 8:{var A=t[parse_TSP_Reference(T[9][0].data)][0],I=parse_shallow(A.data),D=t[parse_TSP_Reference(I[1][0].data)][0],M=varint_to_i32(D.meta[1][0].data);if(M!=2001)throw new Error("2000 unexpected reference to ".concat(M));var V=parse_shallow(D.data);S[B]=V[3].map(function(L){return u8str(L.data)}).join("")}break;case 2:S[B]=parse_shallow(T[6][0].data);break;default:throw x}}}),S}function parse_TST_TileRowInfo(t,n){var _,x,E,S,C,T,B,A,I,D,M,V,L,F,j=parse_shallow(t),U=varint_to_i32(j[1][0].data)>>>0,H=varint_to_i32(j[2][0].data)>>>0,Y=((x=(_=j[8])==null?void 0:_[0])==null?void 0:x.data)&&varint_to_i32(j[8][0].data)>0||!1,Z,ne;if((S=(E=j[7])==null?void 0:E[0])!=null&&S.data&&n!=0)Z=(T=(C=j[7])==null?void 0:C[0])==null?void 0:T.data,ne=(A=(B=j[6])==null?void 0:B[0])==null?void 0:A.data;else if((D=(I=j[4])==null?void 0:I[0])!=null&&D.data&&n!=1)Z=(V=(M=j[4])==null?void 0:M[0])==null?void 0:V.data,ne=(F=(L=j[3])==null?void 0:L[0])==null?void 0:F.data;else throw"NUMBERS Tile missing ".concat(n," cell storage");for(var re=Y?4:1,X=u8_to_dataview(Z),ce=[],ue=0;ue<Z.length/2;++ue){var _e=X.getUint16(ue*2,!0);_e<65535&&ce.push([ue,_e])}if(ce.length!=H)throw"Expected ".concat(H," cells, found ").concat(ce.length);var ye=[];for(ue=0;ue<ce.length-1;++ue)ye[ce[ue][0]]=ne[subarray](ce[ue][1]*re,ce[ue+1][1]*re);return ce.length>=1&&(ye[ce[ce.length-1][0]]=ne[subarray](ce[ce.length-1][1]*re)),{R:U,cells:ye}}function parse_TST_Tile(t,n){var _,x=parse_shallow(n.data),E=-1;(_=x?.[7])!=null&&_[0]&&(varint_to_i32(x[7][0].data)>>>0?E=1:E=0);var S=mappa(x[5],function(C){return parse_TST_TileRowInfo(C,E)});return{nrows:varint_to_i32(x[4][0].data)>>>0,data:S.reduce(function(C,T){return C[T.R]||(C[T.R]=[]),T.cells.forEach(function(B,A){if(C[T.R][A])throw new Error("Duplicate cell r=".concat(T.R," c=").concat(A));C[T.R][A]=B}),C},[])}}function parse_TST_TableModelArchive(t,n,_){var x,E,S,C,T,B,A=parse_shallow(n.data),I={s:{r:0,c:0},e:{r:0,c:0}};if(I.e.r=(varint_to_i32(A[6][0].data)>>>0)-1,I.e.r<0)throw new Error("Invalid row varint ".concat(A[6][0].data));if(I.e.c=(varint_to_i32(A[7][0].data)>>>0)-1,I.e.c<0)throw new Error("Invalid col varint ".concat(A[7][0].data));_["!ref"]=encode_range(I);var D=_["!data"]!=null,M=_,V=parse_shallow(A[4][0].data),L=numbers_lut_new();(x=V[4])!=null&&x[0]&&(L.sst=parse_TST_TableDataList(t,t[parse_TSP_Reference(V[4][0].data)][0])),(E=V[11])!=null&&E[0]&&(L.ofmt=parse_TST_TableDataList(t,t[parse_TSP_Reference(V[11][0].data)][0])),(S=V[17])!=null&&S[0]&&(L.rsst=parse_TST_TableDataList(t,t[parse_TSP_Reference(V[17][0].data)][0])),(C=V[22])!=null&&C[0]&&(L.nfmt=parse_TST_TableDataList(t,t[parse_TSP_Reference(V[22][0].data)][0]));var F=parse_shallow(V[3][0].data),j=0;if(F[1].forEach(function(Y){var Z=parse_shallow(Y.data),ne=t[parse_TSP_Reference(Z[2][0].data)][0],re=varint_to_i32(ne.meta[1][0].data);if(re!=6002)throw new Error("6001 unexpected reference to ".concat(re));var X=parse_TST_Tile(t,ne);X.data.forEach(function(ce,ue){ce.forEach(function(_e,ye){var ie=parse_cell_storage(_e,L);ie&&(D?(M["!data"][j+ue]||(M["!data"][j+ue]=[]),M["!data"][j+ue][ye]=ie):_[encode_col(ye)+encode_row(j+ue)]=ie)})}),j+=X.nrows}),(T=V[13])!=null&&T[0]){var U=t[parse_TSP_Reference(V[13][0].data)][0],H=varint_to_i32(U.meta[1][0].data);if(H!=6144)throw new Error("Expected merge type 6144, found ".concat(H));_["!merges"]=(B=parse_shallow(U.data))==null?void 0:B[1].map(function(Y){var Z=parse_shallow(Y.data),ne=u8_to_dataview(parse_shallow(Z[1][0].data)[1][0].data),re=u8_to_dataview(parse_shallow(Z[2][0].data)[1][0].data);return{s:{r:ne.getUint16(0,!0),c:ne.getUint16(2,!0)},e:{r:ne.getUint16(0,!0)+re.getUint16(0,!0)-1,c:ne.getUint16(2,!0)+re.getUint16(2,!0)-1}}})}}function parse_TST_TableInfoArchive(t,n,_){var x=parse_shallow(n.data),E={"!ref":"A1"};_?.dense&&(E["!data"]=[]);var S=t[parse_TSP_Reference(x[2][0].data)],C=varint_to_i32(S[0].meta[1][0].data);if(C!=6001)throw new Error("6000 unexpected reference to ".concat(C));return parse_TST_TableModelArchive(t,S[0],E),E}function parse_TN_SheetArchive(t,n,_){var x,E=parse_shallow(n.data),S={name:(x=E[1])!=null&&x[0]?u8str(E[1][0].data):"",sheets:[]},C=mappa(E[2],parse_TSP_Reference);return C.forEach(function(T){t[T].forEach(function(B){var A=varint_to_i32(B.meta[1][0].data);A==6e3&&S.sheets.push(parse_TST_TableInfoArchive(t,B,_))})}),S}function parse_TN_DocumentArchive(t,n,_){var x,E=book_new(),S=parse_shallow(n.data);if((x=S[2])!=null&&x[0])throw new Error("Keynote presentations are not supported");var C=mappa(S[1],parse_TSP_Reference);if(C.forEach(function(T){t[T].forEach(function(B){var A=varint_to_i32(B.meta[1][0].data);if(A==2){var I=parse_TN_SheetArchive(t,B,_);I.sheets.forEach(function(D,M){book_append_sheet(E,D,M==0?I.name:I.name+"_"+M,!0)})}})}),E.SheetNames.length==0)throw new Error("Empty NUMBERS file");return E.bookType="numbers",E}function parse_numbers_iwa(t,n){var _,x,E,S,C,T,B,A={},I=[];if(t.FullPaths.forEach(function(M){if(M.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(M){if(M.name.match(/\.iwa$/)&&M.content[0]==0){var V;try{V=decompress_iwa_file(M.content)}catch(F){return console.log("?? "+M.content.length+" "+(F.message||F))}var L;try{L=parse_iwa_file(V)}catch(F){return console.log("## "+(F.message||F))}L.forEach(function(F){A[F.id]=F.messages,I.push(F.id)})}}),!I.length)throw new Error("File has no messages");if((E=(x=(_=A?.[1])==null?void 0:_[0].meta)==null?void 0:x[1])!=null&&E[0].data&&varint_to_i32(A[1][0].meta[1][0].data)==1e4)throw new Error("Pages documents are not supported");var D=((B=(T=(C=(S=A?.[1])==null?void 0:S[0])==null?void 0:C.meta)==null?void 0:T[1])==null?void 0:B[0].data)&&varint_to_i32(A[1][0].meta[1][0].data)==1&&A[1][0];if(D||I.forEach(function(M){A[M].forEach(function(V){var L=varint_to_i32(V.meta[1][0].data)>>>0;if(L==1)if(!D)D=V;else throw new Error("Document has multiple roots")})}),!D)throw new Error("Cannot find Document root");return parse_TN_DocumentArchive(A,D,n)}function write_TST_TileRowInfo(t,n,_){var x,E,S=[[],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(0)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:write_varint49(5)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:write_varint49(1)}]];if(!((x=S[6])!=null&&x[0])||!((E=S[7])!=null&&E[0]))throw"Mutation only works on post-BNC storages!";var C=0;if(S[7][0].data.length<2*t.length){var T=new Uint8Array(2*t.length);T.set(S[7][0].data),S[7][0].data=T}if(S[4][0].data.length<2*t.length){var B=new Uint8Array(2*t.length);B.set(S[4][0].data),S[4][0].data=B}for(var A=u8_to_dataview(S[7][0].data),I=0,D=[],M=u8_to_dataview(S[4][0].data),V=0,L=[],F=_?4:1,j=0;j<t.length;++j){if(t[j]==null){A.setUint16(j*2,65535,!0),M.setUint16(j*2,65535);continue}A.setUint16(j*2,I/F,!0),M.setUint16(j*2,V/F,!0);var U,H;switch(typeof t[j]){case"string":U=write_new_storage({t:"s",v:t[j]},n),H=write_old_storage({t:"s",v:t[j]},n);break;case"number":U=write_new_storage({t:"n",v:t[j]},n),H=write_old_storage({t:"n",v:t[j]},n);break;case"boolean":U=write_new_storage({t:"b",v:t[j]},n),H=write_old_storage({t:"b",v:t[j]},n);break;default:if(t[j]instanceof Date){U=write_new_storage({t:"s",v:t[j].toISOString()},n),H=write_old_storage({t:"s",v:t[j].toISOString()},n);break}throw new Error("Unsupported value "+t[j])}D.push(U),I+=U.length,L.push(H),V+=H.length,++C}for(S[2][0].data=write_varint49(C),S[5][0].data=write_varint49(5);j<S[7][0].data.length/2;++j)A.setUint16(j*2,65535,!0),M.setUint16(j*2,65535,!0);return S[6][0].data=u8concat(D),S[3][0].data=u8concat(L),S[8]=[{type:0,data:write_varint49(_?1:0)}],S}function write_iwam(t,n){return{meta:[[],[{type:0,data:write_varint49(t)}]],data:n}}function get_unique_msgid(t,n){n.last||(n.last=927262);for(var _=n.last;_<2e6;++_)if(!n[_])return n[n.last=_]=t,_;throw new Error("Too many messages")}function build_numbers_deps(t){var n={},_=[];return t.FileIndex.map(function(x,E){return[x,t.FullPaths[E]]}).forEach(function(x){var E=x[0],S=x[1];E.type==2&&E.name.match(/\.iwa/)&&E.content[0]==0&&parse_iwa_file(decompress_iwa_file(E.content)).forEach(function(C){_.push(C.id),n[C.id]={deps:[],location:S,type:varint_to_i32(C.messages[0].meta[1][0].data)}})}),t.FileIndex.forEach(function(x){x.name.match(/\.iwa/)&&x.content[0]==0&&parse_iwa_file(decompress_iwa_file(x.content)).forEach(function(E){E.messages.forEach(function(S){[5,6].forEach(function(C){S.meta[C]&&S.meta[C].forEach(function(T){n[E.id].deps.push(varint_to_i32(T.data))})})})})}),n}function write_numbers_iwa(t,n){if(!n||!n.numbers)throw new Error("Must pass a `numbers` option -- check the README");var _=CFB.read(n.numbers,{type:"base64"}),x=build_numbers_deps(_),E=numbers_iwa_find(_,x,1);if(E==null)throw"Could not find message ".concat(1," in Numbers template");var S=mappa(parse_shallow(E.messages[0].data)[1],parse_TSP_Reference);if(S.length>1)throw new Error("Template NUMBERS file must have exactly one sheet");return t.SheetNames.forEach(function(C,T){T>=1&&(numbers_add_ws(_,x,T+1),E=numbers_iwa_find(_,x,1),S=mappa(parse_shallow(E.messages[0].data)[1],parse_TSP_Reference)),write_numbers_ws(_,x,t.Sheets[C],C,T,S[T])}),_}function numbers_iwa_doit(t,n,_,x){var E=CFB.find(t,n[_].location);if(!E)throw"Could not find ".concat(n[_].location," in Numbers template");var S=parse_iwa_file(decompress_iwa_file(E.content)),C=S.find(function(T){return T.id==_});x(C,S),E.content=compress_iwa_file(write_iwa_file(S)),E.size=E.content.length}function numbers_iwa_find(t,n,_){var x=CFB.find(t,n[_].location);if(!x)throw"Could not find ".concat(n[_].location," in Numbers template");var E=parse_iwa_file(decompress_iwa_file(x.content)),S=E.find(function(C){return C.id==_});return S}function numbers_add_ws(t,n,_){var x=-1,E=-1,S={};numbers_iwa_doit(t,n,1,function(A,I){var D=parse_shallow(A.messages[0].data);x=parse_TSP_Reference(parse_shallow(A.messages[0].data)[1][0].data),E=get_unique_msgid({deps:[1],location:n[x].location,type:2},n),S[x]=E,numbers_add_oref(A,E),D[1].push({type:2,data:write_TSP_Reference(E)});var M=numbers_iwa_find(t,n,x);M.id=E,n[1].location==n[E].location?I.push(M):numbers_iwa_doit(t,n,E,function(V,L){return L.push(M)}),A.messages[0].data=write_shallow(D)});var C=-1;numbers_iwa_doit(t,n,E,function(A,I){for(var D=parse_shallow(A.messages[0].data),M=3;M<=69;++M)delete D[M];var V=mappa(D[2],parse_TSP_Reference);V.forEach(function(j){return numbers_del_oref(A,j)}),C=get_unique_msgid({deps:[E],location:n[V[0]].location,type:n[V[0]].type},n),numbers_add_oref(A,C),S[V[0]]=C,D[2]=[{type:2,data:write_TSP_Reference(C)}];var L=numbers_iwa_find(t,n,V[0]);if(L.id=C,n[V[0]].location==n[E].location)I.push(L);else{var F=n[E].location;F=F.replace(/^Root Entry\//,""),F=F.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(t,n,2,function(j){var U=parse_shallow(j.messages[0].data),H=U[3].findIndex(function(Z){var ne,re,X=parse_shallow(Z.data);return(ne=X[3])!=null&&ne[0]?u8str(X[3][0].data)==F:!!((re=X[2])!=null&&re[0]&&u8str(X[2][0].data)==F)}),Y=parse_shallow(U[3][H].data);Y[6]||(Y[6]=[]),Y[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(C)}]])}),U[3][H].data=write_shallow(Y),j.messages[0].data=write_shallow(U)}),numbers_iwa_doit(t,n,C,function(j,U){return U.push(L)})}A.messages[0].data=write_shallow(D)});var T=-1;numbers_iwa_doit(t,n,C,function(A,I){for(var D=parse_shallow(A.messages[0].data),M=parse_shallow(D[1][0].data),V=3;V<=69;++V)delete M[V];var L=parse_TSP_Reference(M[2][0].data);M[2][0].data=write_TSP_Reference(S[L]),D[1][0].data=write_shallow(M);var F=parse_TSP_Reference(D[2][0].data);numbers_del_oref(A,F),T=get_unique_msgid({deps:[C],location:n[F].location,type:n[F].type},n),numbers_add_oref(A,T),S[F]=T,D[2][0].data=write_TSP_Reference(T);var j=numbers_iwa_find(t,n,F);j.id=T,n[C].location==n[T].location?I.push(j):numbers_iwa_doit(t,n,T,function(U,H){return H.push(j)}),A.messages[0].data=write_shallow(D)});var B=n[T].location;B=B.replace(/^Root Entry\//,""),B=B.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(t,n,T,function(A,I){var D,M,V=parse_shallow(A.messages[0].data),L=u8str(V[1][0].data),F=L.replace(/-[A-Z0-9]*/,"-".concat(_.toString(16).padStart(4,"0")));if(V[1][0].data=stru8(F),[12,13,29,31,32,33,39,44,47,81,82,84].forEach(function(re){return delete V[re]}),V[45]){var j=parse_shallow(V[45][0].data),U=parse_TSP_Reference(j[1][0].data);numbers_del_oref(A,U),delete V[45]}if(V[70]){var H=parse_shallow(V[70][0].data);(D=H[2])==null||D.forEach(function(re){var X=parse_shallow(re.data);[2,3].map(function(ce){return X[ce][0]}).forEach(function(ce){var ue=parse_shallow(ce.data);if(ue[8]){var _e=parse_TSP_Reference(ue[8][0].data);numbers_del_oref(A,_e)}})}),delete V[70]}[46,30,34,35,36,38,48,49,60,61,62,63,64,71,72,73,74,75,85,86,87,88,89].forEach(function(re){if(V[re]){var X=parse_TSP_Reference(V[re][0].data);delete V[re],numbers_del_oref(A,X)}});var Y=parse_shallow(V[4][0].data);{[2,4,5,6,11,12,13,15,16,17,18,19,20,21,22].forEach(function(re){var X;if((X=Y[re])!=null&&X[0]){var ce=parse_TSP_Reference(Y[re][0].data),ue=get_unique_msgid({deps:[T],location:n[ce].location,type:n[ce].type},n);numbers_del_oref(A,ce),numbers_add_oref(A,ue),S[ce]=ue;var _e=numbers_iwa_find(t,n,ce);if(_e.id=ue,n[ce].location==n[T].location)I.push(_e);else{n[ue].location=n[ce].location.replace(ce.toString(),ue.toString()),n[ue].location==n[ce].location&&(n[ue].location=n[ue].location.replace(/\.iwa/,"-".concat(ue,".iwa"))),CFB.utils.cfb_add(t,n[ue].location,compress_iwa_file(write_iwa_file([_e])));var ye=n[ue].location;ye=ye.replace(/^Root Entry\//,""),ye=ye.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(t,n,2,function(ie){var W=parse_shallow(ie.messages[0].data);W[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ue)}],[{type:2,data:stru8(ye.replace(/-.*$/,""))}],[{type:2,data:stru8(ye)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),W[1]=[{type:0,data:write_varint49(Math.max(ue+1,varint_to_i32(W[1][0].data)))}];var O=W[3].findIndex(function(J){var ee,ae,oe=parse_shallow(J.data);return(ee=oe[3])!=null&&ee[0]?u8str(oe[3][0].data)==B:!!((ae=oe[2])!=null&&ae[0]&&u8str(oe[2][0].data)==B)}),z=parse_shallow(W[3][O].data);z[6]||(z[6]=[]),z[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ue)}]])}),W[3][O].data=write_shallow(z),ie.messages[0].data=write_shallow(W)})}Y[re][0].data=write_TSP_Reference(ue)}});var Z=parse_shallow(Y[1][0].data);(M=Z[2])==null||M.forEach(function(re){var X=parse_TSP_Reference(re.data),ce=get_unique_msgid({deps:[T],location:n[X].location,type:n[X].type},n);numbers_del_oref(A,X),numbers_add_oref(A,ce),S[X]=ce;var ue=numbers_iwa_find(t,n,X);if(ue.id=ce,n[X].location==n[T].location)I.push(ue);else{n[ce].location=n[X].location.replace(X.toString(),ce.toString()),n[ce].location==n[X].location&&(n[ce].location=n[ce].location.replace(/\.iwa/,"-".concat(ce,".iwa"))),CFB.utils.cfb_add(t,n[ce].location,compress_iwa_file(write_iwa_file([ue])));var _e=n[ce].location;_e=_e.replace(/^Root Entry\//,""),_e=_e.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(t,n,2,function(ye){var ie=parse_shallow(ye.messages[0].data);ie[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ce)}],[{type:2,data:stru8(_e.replace(/-.*$/,""))}],[{type:2,data:stru8(_e)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),ie[1]=[{type:0,data:write_varint49(Math.max(ce+1,varint_to_i32(ie[1][0].data)))}];var W=ie[3].findIndex(function(z){var J,ee,ae=parse_shallow(z.data);return(J=ae[3])!=null&&J[0]?u8str(ae[3][0].data)==B:!!((ee=ae[2])!=null&&ee[0]&&u8str(ae[2][0].data)==B)}),O=parse_shallow(ie[3][W].data);O[6]||(O[6]=[]),O[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ce)}]])}),ie[3][W].data=write_shallow(O),ye.messages[0].data=write_shallow(ie)})}re.data=write_TSP_Reference(ce)}),Y[1][0].data=write_shallow(Z);var ne=parse_shallow(Y[3][0].data);ne[1].forEach(function(re){var X=parse_shallow(re.data),ce=parse_TSP_Reference(X[2][0].data),ue=S[ce];if(!S[ce]){ue=get_unique_msgid({deps:[T],location:"",type:n[ce].type},n),n[ue].location="Root Entry/Index/Tables/Tile-".concat(ue,".iwa"),S[ce]=ue;var _e=numbers_iwa_find(t,n,ce);_e.id=ue,numbers_del_oref(A,ce),numbers_add_oref(A,ue),CFB.utils.cfb_add(t,"/Index/Tables/Tile-".concat(ue,".iwa"),compress_iwa_file(write_iwa_file([_e]))),numbers_iwa_doit(t,n,2,function(ye){var ie=parse_shallow(ye.messages[0].data);ie[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ue)}],[{type:2,data:stru8("Tables/Tile")}],[{type:2,data:stru8("Tables/Tile-".concat(ue))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),ie[1]=[{type:0,data:write_varint49(Math.max(ue+1,varint_to_i32(ie[1][0].data)))}];var W=ie[3].findIndex(function(z){var J,ee,ae=parse_shallow(z.data);return(J=ae[3])!=null&&J[0]?u8str(ae[3][0].data)==B:!!((ee=ae[2])!=null&&ee[0]&&u8str(ae[2][0].data)==B)}),O=parse_shallow(ie[3][W].data);O[6]||(O[6]=[]),O[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ue)}]])}),ie[3][W].data=write_shallow(O),ye.messages[0].data=write_shallow(ie)})}X[2][0].data=write_TSP_Reference(ue),re.data=write_shallow(X)}),Y[3][0].data=write_shallow(ne)}V[4][0].data=write_shallow(Y),A.messages[0].data=write_shallow(V)})}function write_numbers_ws(t,n,_,x,E,S){var C=[];numbers_iwa_doit(t,n,S,function(A){var I=parse_shallow(A.messages[0].data);I[1]=[{type:2,data:stru8(x)}],C=mappa(I[2],parse_TSP_Reference),A.messages[0].data=write_shallow(I)});var T=numbers_iwa_find(t,n,C[0]),B=parse_TSP_Reference(parse_shallow(T.messages[0].data)[2][0].data);numbers_iwa_doit(t,n,B,function(A,I){return write_numbers_tma(t,n,_,A,I,B)})}var USE_WIDE_ROWS=!0;function write_numbers_tma(t,n,_,x,E,S){var C=decode_range(_["!ref"]);C.s.r=C.s.c=0;var T=!1;C.e.c>999&&(T=!0,C.e.c=999),C.e.r>999999&&(T=!0,C.e.r=999999),T&&console.error("Truncating to ".concat(encode_range(C)));var B=sheet_to_json(_,{range:C,header:1}),A=["~Sh33tJ5~"],I=n[S].location;I=I.replace(/^Root Entry\//,""),I=I.replace(/^Index\//,"").replace(/\.iwa$/,"");var D=parse_shallow(x.messages[0].data);{D[6][0].data=write_varint49(C.e.r+1),D[7][0].data=write_varint49(C.e.c+1),delete D[46];var M=parse_shallow(D[4][0].data);{var V=parse_TSP_Reference(parse_shallow(M[1][0].data)[2][0].data);numbers_iwa_doit(t,n,V,function(O,z){var J,ee=parse_shallow(O.messages[0].data);if((J=ee?.[2])!=null&&J[0])for(var ae=0;ae<B.length;++ae){var oe=parse_shallow(ee[2][0].data);oe[1][0].data=write_varint49(ae),oe[4][0].data=write_varint49(B[ae].length),ee[2][ae]={type:ee[2][0].type,data:write_shallow(oe)}}O.messages[0].data=write_shallow(ee)});var L=parse_TSP_Reference(M[2][0].data);numbers_iwa_doit(t,n,L,function(O,z){for(var J=parse_shallow(O.messages[0].data),ee=0;ee<=C.e.c;++ee){var ae=parse_shallow(J[2][0].data);ae[1][0].data=write_varint49(ee),ae[4][0].data=write_varint49(C.e.r+1),J[2][ee]={type:J[2][0].type,data:write_shallow(ae)}}O.messages[0].data=write_shallow(J)});var F=parse_shallow(M[9][0].data);F[1]=[];var j=parse_shallow(M[3][0].data);{var U=256;j[2]=[{type:0,data:write_varint49(U)}];var H=parse_TSP_Reference(parse_shallow(j[1][0].data)[2][0].data),Y=function(){var O=numbers_iwa_find(t,n,2),z=parse_shallow(O.messages[0].data),J=z[3].filter(function(ee){return varint_to_i32(parse_shallow(ee.data)[1][0].data)==H});return J?.length?varint_to_i32(parse_shallow(J[0].data)[12][0].data):0}();CFB.utils.cfb_del(t,n[H].location),numbers_iwa_doit(t,n,2,function(O){var z=parse_shallow(O.messages[0].data);z[3]=z[3].filter(function(ae){return varint_to_i32(parse_shallow(ae.data)[1][0].data)!=H});var J=z[3].findIndex(function(ae){var oe,se,G=parse_shallow(ae.data);return(oe=G[3])!=null&&oe[0]?u8str(G[3][0].data)==I:!!((se=G[2])!=null&&se[0]&&u8str(G[2][0].data)==I)}),ee=parse_shallow(z[3][J].data);ee[6]||(ee[6]=[]),ee[6]=ee[6].filter(function(ae){return varint_to_i32(parse_shallow(ae.data)[1][0].data)!=H}),z[3][J].data=write_shallow(ee),O.messages[0].data=write_shallow(z)}),numbers_del_oref(x,H),j[1]=[];for(var Z=Math.ceil((C.e.r+1)/U),ne=0;ne<Z;++ne){var re=get_unique_msgid({deps:[],location:"",type:6002},n);n[re].location="Root Entry/Index/Tables/Tile-".concat(re,".iwa");for(var X=[[],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(Math.min(C.e.r+1,(ne+1)*U))}],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(Math.min((ne+1)*U,C.e.r+1)-ne*U)}],[],[{type:0,data:write_varint49(5)}],[{type:0,data:write_varint49(1)}],[{type:0,data:write_varint49(1)}]],ce=ne*U;ce<=Math.min(C.e.r,(ne+1)*U-1);++ce){var ue=write_TST_TileRowInfo(B[ce],A,USE_WIDE_ROWS);ue[1][0].data=write_varint49(ce-ne*U),X[5].push({data:write_shallow(ue),type:2})}j[1].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ne)}],[{type:2,data:write_TSP_Reference(re)}]])});var _e={id:re,messages:[write_iwam(6002,write_shallow(X))]},ye=compress_iwa_file(write_iwa_file([_e]));CFB.utils.cfb_add(t,"/Index/Tables/Tile-".concat(re,".iwa"),ye),numbers_iwa_doit(t,n,2,function(O){var z=parse_shallow(O.messages[0].data);z[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(re)}],[{type:2,data:stru8("Tables/Tile")}],[{type:2,data:stru8("Tables/Tile-".concat(re))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(Y)}]])}),z[1]=[{type:0,data:write_varint49(Math.max(re+1,varint_to_i32(z[1][0].data)))}];var J=z[3].findIndex(function(ae){var oe,se,G=parse_shallow(ae.data);return(oe=G[3])!=null&&oe[0]?u8str(G[3][0].data)==I:!!((se=G[2])!=null&&se[0]&&u8str(G[2][0].data)==I)}),ee=parse_shallow(z[3][J].data);ee[6]||(ee[6]=[]),ee[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(re)}]])}),z[3][J].data=write_shallow(ee),O.messages[0].data=write_shallow(z)}),numbers_add_oref(x,re),F[1].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ne*U)}],[{type:0,data:write_varint49(ne)}]])})}}if(M[3][0].data=write_shallow(j),M[9][0].data=write_shallow(F),M[10]=[{type:2,data:new Uint8Array([])}],_["!merges"]){var ie=get_unique_msgid({type:6144,deps:[S],location:n[S].location},n);E.push({id:ie,messages:[write_iwam(6144,write_shallow([[],_["!merges"].map(function(O){return{type:2,data:write_shallow([[],[{type:2,data:write_shallow([[],[{type:5,data:new Uint8Array(new Uint16Array([O.s.r,O.s.c]).buffer)}]])}],[{type:2,data:write_shallow([[],[{type:5,data:new Uint8Array(new Uint16Array([O.e.r-O.s.r+1,O.e.c-O.s.c+1]).buffer)}]])}]])}})]))]}),M[13]=[{type:2,data:write_TSP_Reference(ie)}],numbers_iwa_doit(t,n,2,function(O){var z=parse_shallow(O.messages[0].data),J=z[3].findIndex(function(ae){var oe,se,G=parse_shallow(ae.data);return(oe=G[3])!=null&&oe[0]?u8str(G[3][0].data)==I:!!((se=G[2])!=null&&se[0]&&u8str(G[2][0].data)==I)}),ee=parse_shallow(z[3][J].data);ee[6]||(ee[6]=[]),ee[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ie)}]])}),z[3][J].data=write_shallow(ee),O.messages[0].data=write_shallow(z)}),numbers_add_oref(x,ie)}else delete M[13];var W=parse_TSP_Reference(M[4][0].data);numbers_iwa_doit(t,n,W,function(O){var z=parse_shallow(O.messages[0].data);z[3]=[],A.forEach(function(J,ee){ee!=0&&z[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ee)}],[{type:0,data:write_varint49(1)}],[{type:2,data:stru8(J)}]])})}),O.messages[0].data=write_shallow(z)})}D[4][0].data=write_shallow(M)}x.messages[0].data=write_shallow(D)}function fix_opts_func(t){return function(_){for(var x=0;x!=t.length;++x){var E=t[x];_[E[0]]===void 0&&(_[E[0]]=E[1]),E[2]==="n"&&(_[E[0]]=Number(_[E[0]]))}}}function fix_read_opts(t){fix_opts_func([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function fix_write_opts(t){fix_opts_func([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function get_sheet_type(t){return RELS.WS.indexOf(t)>-1?"sheet":t==RELS.CS?"chart":t==RELS.DS?"dialog":t==RELS.MS?"macro":t&&t.length?t:"sheet"}function safe_parse_wbrels(t,n){if(!t)return 0;try{t=n.map(function(x){return x.id||(x.id=x.strRelID),[x.name,t["!id"][x.id].Target,get_sheet_type(t["!id"][x.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function safe_parse_sheet(t,n,_,x,E,S,C,T,B,A,I,D){try{S[x]=parse_rels(getzipstr(t,_,!0),n);var M=getzipdata(t,n),V;switch(T){case"sheet":V=parse_ws(M,n,E,B,S[x],A,I,D);break;case"chart":if(V=parse_cs(M,n,E,B,S[x],A,I,D),!V||!V["!drawel"])break;var L=resolve_path(V["!drawel"].Target,n),F=get_rels_path(L),j=parse_drawing(getzipstr(t,L,!0),parse_rels(getzipstr(t,F,!0),L)),U=resolve_path(j,L),H=get_rels_path(U);V=parse_chart(getzipstr(t,U,!0),U,B,parse_rels(getzipstr(t,H,!0),U),A,V);break;case"macro":V=parse_ms(M,n,E,B,S[x],A,I,D);break;case"dialog":V=parse_ds(M,n,E,B,S[x],A,I,D);break;default:throw new Error("Unrecognized sheet type "+T)}C[x]=V;var Y=[],Z=[];S&&S[x]&&keys(S[x]).forEach(function(ne){var re="";if(S[x][ne].Type==RELS.CMNT){if(re=resolve_path(S[x][ne].Target,n),Y=parse_cmnt(getzipdata(t,re,!0),re,B),!Y||!Y.length)return;sheet_insert_comments(V,Y,!1)}S[x][ne].Type==RELS.TCMNT&&(re=resolve_path(S[x][ne].Target,n),Z=Z.concat(parse_tcmnt_xml(getzipdata(t,re,!0),B)))}),Z&&Z.length&&sheet_insert_comments(V,Z,!0,B.people||[])}catch(ne){if(B.WTF)throw ne}}function strip_front_slash(t){return t.charAt(0)=="/"?t.slice(1):t}function parse_zip(t,n){if(make_ssf(),n=n||{},fix_read_opts(n),safegetzipfile(t,"META-INF/manifest.xml")||safegetzipfile(t,"objectdata.xml"))return parse_ods(t,n);if(safegetzipfile(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof parse_numbers_iwa<"u"){if(t.FileIndex)return parse_numbers_iwa(t,n);var _=CFB.utils.cfb_new();return zipentries(t).forEach(function(z){zip_add_file(_,z,getzipbin(t,z))}),parse_numbers_iwa(_,n)}throw new Error("Unsupported NUMBERS file")}if(!safegetzipfile(t,"[Content_Types].xml")){if(safegetzipfile(t,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(safegetzipfile(t,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");var x=CFB.find(t,"Index.zip");if(x)return n=dup(n),delete n.type,typeof x.content=="string"&&(n.type="binary"),typeof Bun<"u"&&Buffer.isBuffer(x.content)?readSync(new Uint8Array(x.content),n):readSync(x.content,n);throw new Error("Unsupported ZIP file")}var E=zipentries(t),S=parse_ct(getzipstr(t,"[Content_Types].xml")),C=!1,T,B;if(S.workbooks.length===0&&(B="xl/workbook.xml",getzipdata(t,B,!0)&&S.workbooks.push(B)),S.workbooks.length===0){if(B="xl/workbook.bin",!getzipdata(t,B,!0))throw new Error("Could not find workbook");S.workbooks.push(B),C=!0}S.workbooks[0].slice(-3)=="bin"&&(C=!0);var A={},I={};if(!n.bookSheets&&!n.bookProps){if(strs=[],S.sst)try{strs=parse_sst(getzipdata(t,strip_front_slash(S.sst)),S.sst,n)}catch(z){if(n.WTF)throw z}n.cellStyles&&S.themes.length&&(A=parse_theme_xml(getzipstr(t,S.themes[0].replace(/^\//,""),!0)||"",n)),S.style&&(I=parse_sty(getzipdata(t,strip_front_slash(S.style)),S.style,A,n))}S.links.map(function(z){try{var J=parse_rels(getzipstr(t,get_rels_path(strip_front_slash(z))),z);return parse_xlink(getzipdata(t,strip_front_slash(z)),J,z,n)}catch{}});var D=parse_wb(getzipdata(t,strip_front_slash(S.workbooks[0])),S.workbooks[0],n),M={},V="";S.coreprops.length&&(V=getzipdata(t,strip_front_slash(S.coreprops[0]),!0),V&&(M=parse_core_props(V)),S.extprops.length!==0&&(V=getzipdata(t,strip_front_slash(S.extprops[0]),!0),V&&parse_ext_props(V,M,n)));var L={};(!n.bookSheets||n.bookProps)&&S.custprops.length!==0&&(V=getzipstr(t,strip_front_slash(S.custprops[0]),!0),V&&(L=parse_cust_props(V,n)));var F={};if((n.bookSheets||n.bookProps)&&(D.Sheets?T=D.Sheets.map(function(J){return J.name}):M.Worksheets&&M.SheetNames.length>0&&(T=M.SheetNames),n.bookProps&&(F.Props=M,F.Custprops=L),n.bookSheets&&typeof T<"u"&&(F.SheetNames=T),n.bookSheets?F.SheetNames:n.bookProps))return F;T={};var j={};n.bookDeps&&S.calcchain&&(j=parse_cc(getzipdata(t,strip_front_slash(S.calcchain)),S.calcchain));var U=0,H={},Y,Z;{var ne=D.Sheets;M.Worksheets=ne.length,M.SheetNames=[];for(var re=0;re!=ne.length;++re)M.SheetNames[re]=ne[re].name}var X=C?"bin":"xml",ce=S.workbooks[0].lastIndexOf("/"),ue=(S.workbooks[0].slice(0,ce+1)+"_rels/"+S.workbooks[0].slice(ce+1)+".rels").replace(/^\//,"");safegetzipfile(t,ue)||(ue="xl/_rels/workbook."+X+".rels");var _e=parse_rels(getzipstr(t,ue,!0),ue.replace(/_rels.*/,"s5s"));(S.metadata||[]).length>=1&&(n.xlmeta=parse_xlmeta(getzipdata(t,strip_front_slash(S.metadata[0])),S.metadata[0],n)),(S.people||[]).length>=1&&(n.people=parse_people_xml(getzipdata(t,strip_front_slash(S.people[0])),n)),_e&&(_e=safe_parse_wbrels(_e,D.Sheets));var ye=getzipdata(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(U=0;U!=M.Worksheets;++U){var ie="sheet";if(_e&&_e[U]?(Y="xl/"+_e[U][1].replace(/[\/]?xl\//,""),safegetzipfile(t,Y)||(Y=_e[U][1]),safegetzipfile(t,Y)||(Y=ue.replace(/_rels\/.*$/,"")+_e[U][1]),ie=_e[U][2]):(Y="xl/worksheets/sheet"+(U+1-ye)+"."+X,Y=Y.replace(/sheet0\./,"sheet.")),Z=Y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),n&&n.sheets!=null)switch(typeof n.sheets){case"number":if(U!=n.sheets)continue e;break;case"string":if(M.SheetNames[U].toLowerCase()!=n.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(n.sheets)){for(var W=!1,O=0;O!=n.sheets.length;++O)typeof n.sheets[O]=="number"&&n.sheets[O]==U&&(W=1),typeof n.sheets[O]=="string"&&n.sheets[O].toLowerCase()==M.SheetNames[U].toLowerCase()&&(W=1);if(!W)continue e}}safe_parse_sheet(t,Y,Z,M.SheetNames[U],U,H,T,ie,n,D,A,I)}return F={Directory:S,Workbook:D,Props:M,Custprops:L,Deps:j,Sheets:T,SheetNames:M.SheetNames,Strings:strs,Styles:I,Themes:A,SSF:dup(table_fmt)},n&&n.bookFiles&&(t.files?(F.keys=E,F.files=t.files):(F.keys=[],F.files={},t.FullPaths.forEach(function(z,J){z=z.replace(/^Root Entry[\/]/,""),F.keys.push(z),F.files[z]=t.FileIndex[J]}))),n&&n.bookVBA&&(S.vba.length>0?F.vbaraw=getzipdata(t,strip_front_slash(S.vba[0]),!0):S.defaults&&S.defaults.bin===CT_VBA&&(F.vbaraw=getzipdata(t,"xl/vbaProject.bin",!0))),F.bookType=C?"xlsb":"xlsx",F}function parse_xlsxcfb(t,n){var _=n||{},x="Workbook",E=CFB.find(t,x);try{if(x="/!DataSpaces/Version",E=CFB.find(t,x),!E||!E.content)throw new Error("ECMA-376 Encrypted file missing "+x);if(parse_DataSpaceVersionInfo(E.content),x="/!DataSpaces/DataSpaceMap",E=CFB.find(t,x),!E||!E.content)throw new Error("ECMA-376 Encrypted file missing "+x);var S=parse_DataSpaceMap(E.content);if(S.length!==1||S[0].comps.length!==1||S[0].comps[0].t!==0||S[0].name!=="StrongEncryptionDataSpace"||S[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+x);if(x="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",E=CFB.find(t,x),!E||!E.content)throw new Error("ECMA-376 Encrypted file missing "+x);var C=parse_DataSpaceDefinition(E.content);if(C.length!=1||C[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+x);if(x="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",E=CFB.find(t,x),!E||!E.content)throw new Error("ECMA-376 Encrypted file missing "+x);parse_Primary(E.content)}catch{}if(x="/EncryptionInfo",E=CFB.find(t,x),!E||!E.content)throw new Error("ECMA-376 Encrypted file missing "+x);var T=parse_EncryptionInfo(E.content);if(x="/EncryptedPackage",E=CFB.find(t,x),!E||!E.content)throw new Error("ECMA-376 Encrypted file missing "+x);if(T[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(T[1],E.content,_.password||"",_);if(T[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(T[1],E.content,_.password||"",_);throw new Error("File is password-protected")}function write_zip_xlsb(t,n){t&&!t.SSF&&(t.SSF=dup(table_fmt)),t&&t.SSF&&(make_ssf(),SSF_load_table(t.SSF),n.revssf=evert_num(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.rels={},n.wbrels={},n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,browser_has_Map?n.revStrings=new Map:(n.revStrings={},n.revStrings.foo=[],delete n.revStrings.foo);var _="bin",x=!0,E=new_ct();fix_write_opts(n=n||{});var S=zip_new(),C="",T=0;if(n.cellXfs=[],get_cell_style(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),C="docProps/core.xml",zip_add_file(S,C,write_core_props(t.Props,n)),E.coreprops.push(C),add_rels(n.rels,2,C,RELS.CORE_PROPS),C="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var B=[],A=0;A<t.SheetNames.length;++A)(t.Workbook.Sheets[A]||{}).Hidden!=2&&B.push(t.SheetNames[A]);t.Props.SheetNames=B}for(t.Props.Worksheets=t.Props.SheetNames.length,zip_add_file(S,C,write_ext_props(t.Props)),E.extprops.push(C),add_rels(n.rels,3,C,RELS.EXT_PROPS),t.Custprops!==t.Props&&keys(t.Custprops||{}).length>0&&(C="docProps/custom.xml",zip_add_file(S,C,write_cust_props(t.Custprops)),E.custprops.push(C),add_rels(n.rels,4,C,RELS.CUST_PROPS)),T=1;T<=t.SheetNames.length;++T){var I={"!id":{}},D=t.Sheets[t.SheetNames[T-1]],M=(D||{})["!type"]||"sheet";switch(M){case"chart":default:C="xl/worksheets/sheet"+T+"."+_,zip_add_file(S,C,write_ws_bin(T-1,n,t,I)),E.sheets.push(C),add_rels(n.wbrels,-1,"worksheets/sheet"+T+"."+_,RELS.WS[0])}if(D){var V=D["!comments"],L=!1,F="";V&&V.length>0&&(F="xl/comments"+T+"."+_,zip_add_file(S,F,write_comments_bin(V)),E.comments.push(F),add_rels(I,-1,"../comments"+T+"."+_,RELS.CMNT),L=!0),D["!legacy"]&&L&&zip_add_file(S,"xl/drawings/vmlDrawing"+T+".vml",write_vml(T,D["!comments"])),delete D["!comments"],delete D["!legacy"]}I["!id"].rId1&&zip_add_file(S,get_rels_path(C),write_rels(I))}n.Strings!=null&&n.Strings.length>0&&(C="xl/sharedStrings."+_,zip_add_file(S,C,write_sst_bin(n.Strings)),E.strs.push(C),add_rels(n.wbrels,-1,"sharedStrings."+_,RELS.SST)),C="xl/workbook."+_,zip_add_file(S,C,write_wb_bin(t)),E.workbooks.push(C),add_rels(n.rels,1,C,RELS.WB),C="xl/theme/theme1.xml";var j=write_theme(t.Themes,n);return zip_add_file(S,C,j),E.themes.push(C),add_rels(n.wbrels,-1,"theme/theme1.xml",RELS.THEME),C="xl/styles."+_,zip_add_file(S,C,write_sty_bin(t,n)),E.styles.push(C),add_rels(n.wbrels,-1,"styles."+_,RELS.STY),t.vbaraw&&x&&(C="xl/vbaProject.bin",zip_add_file(S,C,t.vbaraw),E.vba.push(C),add_rels(n.wbrels,-1,"vbaProject.bin",RELS.VBA)),C="xl/metadata."+_,zip_add_file(S,C,write_xlmeta_bin()),E.metadata.push(C),add_rels(n.wbrels,-1,"metadata."+_,RELS.XLMETA),zip_add_file(S,"[Content_Types].xml",write_ct(E,n)),zip_add_file(S,"_rels/.rels",write_rels(n.rels)),zip_add_file(S,"xl/_rels/workbook."+_+".rels",write_rels(n.wbrels)),delete n.revssf,delete n.ssf,S}function write_zip_xlsx(t,n){t&&!t.SSF&&(t.SSF=dup(table_fmt)),t&&t.SSF&&(make_ssf(),SSF_load_table(t.SSF),n.revssf=evert_num(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.rels={},n.wbrels={},n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,browser_has_Map?n.revStrings=new Map:(n.revStrings={},n.revStrings.foo=[],delete n.revStrings.foo);var _="xml",x=VBAFMTS.indexOf(n.bookType)>-1,E=new_ct();fix_write_opts(n=n||{});var S=zip_new(),C="",T=0;if(n.cellXfs=[],get_cell_style(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),C="docProps/core.xml",zip_add_file(S,C,write_core_props(t.Props,n)),E.coreprops.push(C),add_rels(n.rels,2,C,RELS.CORE_PROPS),C="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var B=[],A=0;A<t.SheetNames.length;++A)(t.Workbook.Sheets[A]||{}).Hidden!=2&&B.push(t.SheetNames[A]);t.Props.SheetNames=B}t.Props.Worksheets=t.Props.SheetNames.length,zip_add_file(S,C,write_ext_props(t.Props)),E.extprops.push(C),add_rels(n.rels,3,C,RELS.EXT_PROPS),t.Custprops!==t.Props&&keys(t.Custprops||{}).length>0&&(C="docProps/custom.xml",zip_add_file(S,C,write_cust_props(t.Custprops)),E.custprops.push(C),add_rels(n.rels,4,C,RELS.CUST_PROPS));var I=["SheetJ5"];for(n.tcid=0,T=1;T<=t.SheetNames.length;++T){var D={"!id":{}},M=t.Sheets[t.SheetNames[T-1]],V=(M||{})["!type"]||"sheet";switch(V){case"chart":default:C="xl/worksheets/sheet"+T+"."+_,zip_add_file(S,C,write_ws_xml(T-1,n,t,D)),E.sheets.push(C),add_rels(n.wbrels,-1,"worksheets/sheet"+T+"."+_,RELS.WS[0])}if(M){var L=M["!comments"],F=!1,j="";if(L&&L.length>0){var U=!1;L.forEach(function(H){H[1].forEach(function(Y){Y.T==!0&&(U=!0)})}),U&&(j="xl/threadedComments/threadedComment"+T+".xml",zip_add_file(S,j,write_tcmnt_xml(L,I,n)),E.threadedcomments.push(j),add_rels(D,-1,"../threadedComments/threadedComment"+T+".xml",RELS.TCMNT)),j="xl/comments"+T+"."+_,zip_add_file(S,j,write_comments_xml(L)),E.comments.push(j),add_rels(D,-1,"../comments"+T+"."+_,RELS.CMNT),F=!0}M["!legacy"]&&F&&zip_add_file(S,"xl/drawings/vmlDrawing"+T+".vml",write_vml(T,M["!comments"])),delete M["!comments"],delete M["!legacy"]}D["!id"].rId1&&zip_add_file(S,get_rels_path(C),write_rels(D))}return n.Strings!=null&&n.Strings.length>0&&(C="xl/sharedStrings."+_,zip_add_file(S,C,write_sst_xml(n.Strings,n)),E.strs.push(C),add_rels(n.wbrels,-1,"sharedStrings."+_,RELS.SST)),C="xl/workbook."+_,zip_add_file(S,C,write_wb_xml(t)),E.workbooks.push(C),add_rels(n.rels,1,C,RELS.WB),C="xl/theme/theme1.xml",zip_add_file(S,C,write_theme(t.Themes,n)),E.themes.push(C),add_rels(n.wbrels,-1,"theme/theme1.xml",RELS.THEME),C="xl/styles."+_,zip_add_file(S,C,write_sty_xml(t,n)),E.styles.push(C),add_rels(n.wbrels,-1,"styles."+_,RELS.STY),t.vbaraw&&x&&(C="xl/vbaProject.bin",zip_add_file(S,C,t.vbaraw),E.vba.push(C),add_rels(n.wbrels,-1,"vbaProject.bin",RELS.VBA)),C="xl/metadata."+_,zip_add_file(S,C,write_xlmeta_xml()),E.metadata.push(C),add_rels(n.wbrels,-1,"metadata."+_,RELS.XLMETA),I.length>1&&(C="xl/persons/person.xml",zip_add_file(S,C,write_people_xml(I)),E.people.push(C),add_rels(n.wbrels,-1,"persons/person.xml",RELS.PEOPLE)),zip_add_file(S,"[Content_Types].xml",write_ct(E,n)),zip_add_file(S,"_rels/.rels",write_rels(n.rels)),zip_add_file(S,"xl/_rels/workbook."+_+".rels",write_rels(n.wbrels)),delete n.revssf,delete n.ssf,S}function firstbyte(t,n){var _="";switch((n||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":_=Base64_decode(t.slice(0,12));break;case"binary":_=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(n&&n.type||"undefined"))}return[_.charCodeAt(0),_.charCodeAt(1),_.charCodeAt(2),_.charCodeAt(3),_.charCodeAt(4),_.charCodeAt(5),_.charCodeAt(6),_.charCodeAt(7)]}function read_cfb(t,n){return CFB.find(t,"EncryptedPackage")?parse_xlsxcfb(t,n):parse_xlscfb(t,n)}function read_zip(t,n){var _,x=t,E=n||{};return E.type||(E.type=has_buf&&Buffer.isBuffer(t)?"buffer":"base64"),_=zip_read(x,E),parse_zip(_,E)}function read_plaintext(t,n){var _=0;e:for(;_<t.length;)switch(t.charCodeAt(_)){case 10:case 13:case 32:++_;break;case 60:return parse_xlml(t.slice(_),n);default:break e}return PRN.to_workbook(t,n)}function read_plaintext_raw(t,n){var _="",x=firstbyte(t,n);switch(n.type){case"base64":_=Base64_decode(t);break;case"binary":_=t;break;case"buffer":_=t.toString("binary");break;case"array":_=cc2str(t);break;default:throw new Error("Unrecognized type "+n.type)}return x[0]==239&&x[1]==187&&x[2]==191&&(_=utf8read(_)),n.type="binary",read_plaintext(_,n)}function read_utf16(t,n){var _=t;return n.type=="base64"&&(_=Base64_decode(_)),_=utf16leread(_.slice(2)),n.type="binary",read_plaintext(_,n)}function bstrify(t){return t.match(/[^\x00-\x7F]/)?utf8write(t):t}function read_prn(t,n,_,x){return x?(_.type="string",PRN.to_workbook(t,_)):PRN.to_workbook(n,_)}function readSync(t,n){reset_cp();var _=n||{};if(_.codepage&&typeof $cptable>"u"&&console.error("Codepage tables are not loaded.  Non-ASCII characters may not give expected results"),typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return readSync(new Uint8Array(t),(_=dup(_),_.type="array",_));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!_.type&&(_.type=typeof Deno<"u"?"buffer":"array");var x=t,E=[0,0,0,0],S=!1;if(_.cellStyles&&(_.cellNF=!0,_.sheetStubs=!0),_ssfopts={},_.dateNF&&(_ssfopts.dateNF=_.dateNF),_.type||(_.type=has_buf&&Buffer.isBuffer(t)?"buffer":"base64"),_.type=="file"&&(_.type=has_buf?"buffer":"binary",x=read_binary(t),typeof Uint8Array<"u"&&!has_buf&&(_.type="array")),_.type=="string"&&(S=!0,_.type="binary",_.codepage=65001,x=bstrify(t)),_.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var C=new ArrayBuffer(3),T=new Uint8Array(C);if(T.foo="bar",!T.foo)return _=dup(_),_.type="array",readSync(ab2a(x),_)}switch((E=firstbyte(x,_))[0]){case 208:if(E[1]===207&&E[2]===17&&E[3]===224&&E[4]===161&&E[5]===177&&E[6]===26&&E[7]===225)return read_cfb(CFB.read(x,_),_);break;case 9:if(E[1]<=8)return parse_xlscfb(x,_);break;case 60:return parse_xlml(x,_);case 73:if(E[1]===73&&E[2]===42&&E[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(E[1]===68)return read_wb_ID(x,_);break;case 84:if(E[1]===65&&E[2]===66&&E[3]===76)return DIF.to_workbook(x,_);break;case 80:return E[1]===75&&E[2]<9&&E[3]<9?read_zip(x,_):read_prn(t,x,_,S);case 239:return E[3]===60?parse_xlml(x,_):read_prn(t,x,_,S);case 255:if(E[1]===254)return read_utf16(x,_);if(E[1]===0&&E[2]===2&&E[3]===0)return WK_.to_workbook(x,_);break;case 0:if(E[1]===0&&(E[2]>=2&&E[3]===0||E[2]===0&&(E[3]===8||E[3]===9)))return WK_.to_workbook(x,_);break;case 3:case 131:case 139:case 140:return DBF.to_workbook(x,_);case 123:if(E[1]===92&&E[2]===114&&E[3]===116)return rtf_to_workbook(x,_);break;case 10:case 13:case 32:return read_plaintext_raw(x,_);case 137:if(E[1]===80&&E[2]===78&&E[3]===71)throw new Error("PNG Image File is not a spreadsheet");break;case 8:if(E[1]===231)throw new Error("Unsupported Multiplan 1.x file!");break;case 12:if(E[1]===236)throw new Error("Unsupported Multiplan 2.x file!");if(E[1]===237)throw new Error("Unsupported Multiplan 3.x file!");break}return DBF_SUPPORTED_VERSIONS.indexOf(E[0])>-1&&E[2]<=12&&E[3]<=31?DBF.to_workbook(x,_):read_prn(t,x,_,S)}function readFileSync(t,n){var _=n||{};return _.type="file",readSync(t,_)}function write_cfb_ctr(t,n){switch(n.type){case"base64":case"binary":break;case"buffer":case"array":n.type="";break;case"file":return write_dl(n.file,CFB.write(t,{type:has_buf?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+n.bookType+"' files");default:throw new Error("Unrecognized type "+n.type)}return CFB.write(t,n)}function write_zip(t,n){switch(n.bookType){case"ods":return write_ods(t,n);case"numbers":return write_numbers_iwa(t,n);case"xlsb":return write_zip_xlsb(t,n);default:return write_zip_xlsx(t,n)}}function write_zip_type(t,n){var _=dup(n||{}),x=write_zip(t,_);return write_zip_denouement(x,_)}function write_zip_denouement(t,n){var _={},x=has_buf?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(n.compression&&(_.compression="DEFLATE"),n.password)_.type=x;else switch(n.type){case"base64":_.type="base64";break;case"binary":_.type="string";break;case"string":throw new Error("'string' output type invalid for '"+n.bookType+"' files");case"buffer":case"file":_.type=x;break;default:throw new Error("Unrecognized type "+n.type)}var E=t.FullPaths?CFB.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[_.type]||_.type,compression:!!n.compression}):t.generate(_);if(typeof Deno<"u"&&typeof E=="string"){if(n.type=="binary"||n.type=="base64")return E;E=new Uint8Array(s2ab(E))}return n.password&&typeof encrypt_agile<"u"?write_cfb_ctr(encrypt_agile(E,n.password),n):n.type==="file"?write_dl(n.file,E):n.type=="string"?utf8read(E):E}function write_cfb_type(t,n){var _=n||{},x=write_xlscfb(t,_);return write_cfb_ctr(x,_)}function write_string_type(t,n,_){_||(_="");var x=_+t;switch(n.type){case"base64":return Base64_encode(utf8write(x));case"binary":return utf8write(x);case"string":return t;case"file":return write_dl(n.file,x,"utf8");case"buffer":return has_buf?Buffer_from(x,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(x):write_string_type(x,{type:"binary"}).split("").map(function(E){return E.charCodeAt(0)})}throw new Error("Unrecognized type "+n.type)}function write_stxt_type(t,n){switch(n.type){case"base64":return Base64_encode_pass(t);case"binary":return t;case"string":return t;case"file":return write_dl(n.file,t,"binary");case"buffer":return has_buf?Buffer_from(t,"binary"):t.split("").map(function(_){return _.charCodeAt(0)})}throw new Error("Unrecognized type "+n.type)}function write_binary_type(t,n){switch(n.type){case"string":case"base64":case"binary":for(var _="",x=0;x<t.length;++x)_+=String.fromCharCode(t[x]);return n.type=="base64"?Base64_encode(_):n.type=="string"?utf8read(_):_;case"file":return write_dl(n.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+n.type)}}function writeSync(t,n){reset_cp(),check_wb(t);var _=dup(n||{});if(_.cellStyles&&(_.cellNF=!0,_.sheetStubs=!0),_.type=="array"){_.type="binary";var x=writeSync(t,_);return _.type="array",s2ab(x)}var E=0;if(_.sheet&&(typeof _.sheet=="number"?E=_.sheet:E=t.SheetNames.indexOf(_.sheet),!t.SheetNames[E]))throw new Error("Sheet not found: "+_.sheet+" : "+typeof _.sheet);switch(_.bookType||"xlsb"){case"xml":case"xlml":return write_string_type(write_xlml(t,_),_);case"slk":case"sylk":return write_string_type(SYLK.from_sheet(t.Sheets[t.SheetNames[E]],_,t),_);case"htm":case"html":return write_string_type(sheet_to_html(t.Sheets[t.SheetNames[E]],_),_);case"txt":return write_stxt_type(sheet_to_txt(t.Sheets[t.SheetNames[E]],_),_);case"csv":return write_string_type(sheet_to_csv(t.Sheets[t.SheetNames[E]],_),_,"\uFEFF");case"dif":return write_string_type(DIF.from_sheet(t.Sheets[t.SheetNames[E]],_),_);case"dbf":return write_binary_type(DBF.from_sheet(t.Sheets[t.SheetNames[E]],_),_);case"prn":return write_string_type(PRN.from_sheet(t.Sheets[t.SheetNames[E]],_),_);case"rtf":return write_string_type(sheet_to_rtf(t.Sheets[t.SheetNames[E]]),_);case"eth":return write_string_type(ETH.from_sheet(t.Sheets[t.SheetNames[E]],_),_);case"fods":return write_string_type(write_ods(t,_),_);case"wk1":return write_binary_type(WK_.sheet_to_wk1(t.Sheets[t.SheetNames[E]],_),_);case"wk3":return write_binary_type(WK_.book_to_wk3(t,_),_);case"biff2":_.biff||(_.biff=2);case"biff3":_.biff||(_.biff=3);case"biff4":return _.biff||(_.biff=4),write_binary_type(write_biff_buf(t,_),_);case"biff5":_.biff||(_.biff=5);case"biff8":case"xla":case"xls":return _.biff||(_.biff=8),write_cfb_type(t,_);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return write_zip_type(t,_);default:throw new Error("Unrecognized bookType |"+_.bookType+"|")}}function resolve_book_type(t){if(!t.bookType){var n={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},_=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();_.match(/^\.[a-z]+$/)&&(t.bookType=_.slice(1)),t.bookType=n[t.bookType]||t.bookType}}function writeFileSync(t,n,_){var x=_||{};return x.type="file",x.file=n,resolve_book_type(x),writeSync(t,x)}function make_json_row(t,n,_,x,E,S,C){var T=encode_row(_),B=C.defval,A=C.raw||!Object.prototype.hasOwnProperty.call(C,"raw"),I=!0,D=t["!data"]!=null,M=E===1?[]:{};if(E!==1)if(Object.defineProperty)try{Object.defineProperty(M,"__rowNum__",{value:_,enumerable:!1})}catch{M.__rowNum__=_}else M.__rowNum__=_;if(!D||t["!data"][_])for(var V=n.s.c;V<=n.e.c;++V){var L=D?(t["!data"][_]||[])[V]:t[x[V]+T];if(L===void 0||L.t===void 0){if(B===void 0)continue;S[V]!=null&&(M[S[V]]=B);continue}var F=L.v;switch(L.t){case"z":if(F==null)break;continue;case"e":F=F==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+L.t)}if(S[V]!=null){if(F==null)if(L.t=="e"&&F===null)M[S[V]]=null;else if(B!==void 0)M[S[V]]=B;else if(A&&F===null)M[S[V]]=null;else continue;else M[S[V]]=A&&(L.t!=="n"||L.t==="n"&&C.rawNumbers!==!1)?F:format_cell(L,F,C);F!=null&&(I=!1)}}return{row:M,isempty:I}}function sheet_to_json(t,n){if(t==null||t["!ref"]==null)return[];var _={t:"n",v:0},x=0,E=1,S=[],C=0,T="",B={s:{r:0,c:0},e:{r:0,c:0}},A=n||{},I=A.range!=null?A.range:t["!ref"];switch(A.header===1?x=1:A.header==="A"?x=2:Array.isArray(A.header)?x=3:A.header==null&&(x=0),typeof I){case"string":B=safe_decode_range(I);break;case"number":B=safe_decode_range(t["!ref"]),B.s.r=I;break;default:B=I}x>0&&(E=0);var D=encode_row(B.s.r),M=[],V=[],L=0,F=0,j=t["!data"]!=null,U=B.s.r,H=0,Y={};j&&!t["!data"][U]&&(t["!data"][U]=[]);var Z=A.skipHidden&&t["!cols"]||[],ne=A.skipHidden&&t["!rows"]||[];for(H=B.s.c;H<=B.e.c;++H)if(!(Z[H]||{}).hidden)switch(M[H]=encode_col(H),_=j?t["!data"][U][H]:t[M[H]+D],x){case 1:S[H]=H-B.s.c;break;case 2:S[H]=M[H];break;case 3:S[H]=A.header[H-B.s.c];break;default:if(_==null&&(_={w:"__EMPTY",t:"s"}),T=C=format_cell(_,null,A),F=Y[C]||0,!F)Y[C]=1;else{do T=C+"_"+F++;while(Y[T]);Y[C]=F,Y[T]=1}S[H]=T}for(U=B.s.r+E;U<=B.e.r;++U)if(!(ne[U]||{}).hidden){var re=make_json_row(t,B,U,M,x,S,A);(re.isempty===!1||(x===1?A.blankrows!==!1:A.blankrows))&&(V[L++]=re.row)}return V.length=L,V}var qreg=/"/g;function make_csv_row(t,n,_,x,E,S,C,T){for(var B=!0,A=[],I="",D=encode_row(_),M=t["!data"]!=null,V=M&&t["!data"][_]||[],L=n.s.c;L<=n.e.c;++L)if(x[L]){var F=M?V[L]:t[x[L]+D];if(F==null)I="";else if(F.v!=null){B=!1,I=""+(T.rawNumbers&&F.t=="n"?F.v:format_cell(F,null,T));for(var j=0,U=0;j!==I.length;++j)if((U=I.charCodeAt(j))===E||U===S||U===34||T.forceQuotes){I='"'+I.replace(qreg,'""')+'"';break}I=="ID"&&(I='"ID"')}else F.f!=null&&!F.F?(B=!1,I="="+F.f,I.indexOf(",")>=0&&(I='"'+I.replace(qreg,'""')+'"')):I="";A.push(I)}return T.blankrows===!1&&B?null:A.join(C)}function sheet_to_csv(t,n){var _=[],x=n??{};if(t==null||t["!ref"]==null)return"";for(var E=safe_decode_range(t["!ref"]),S=x.FS!==void 0?x.FS:",",C=S.charCodeAt(0),T=x.RS!==void 0?x.RS:`
`,B=T.charCodeAt(0),A=new RegExp((S=="|"?"\\|":S)+"+$"),I="",D=[],M=x.skipHidden&&t["!cols"]||[],V=x.skipHidden&&t["!rows"]||[],L=E.s.c;L<=E.e.c;++L)(M[L]||{}).hidden||(D[L]=encode_col(L));for(var F=0,j=E.s.r;j<=E.e.r;++j)(V[j]||{}).hidden||(I=make_csv_row(t,E,j,D,C,B,S,x),I!=null&&(x.strip&&(I=I.replace(A,"")),(I||x.blankrows!==!1)&&_.push((F++?T:"")+I)));return _.join("")}function sheet_to_txt(t,n){n||(n={}),n.FS="	",n.RS=`
`;var _=sheet_to_csv(t,n);return _}function sheet_to_formulae(t){var n="",_,x="";if(t==null||t["!ref"]==null)return[];var E=safe_decode_range(t["!ref"]),S="",C=[],T,B=[],A=t["!data"]!=null;for(T=E.s.c;T<=E.e.c;++T)C[T]=encode_col(T);for(var I=E.s.r;I<=E.e.r;++I)for(S=encode_row(I),T=E.s.c;T<=E.e.c;++T)if(n=C[T]+S,_=A?(t["!data"][I]||[])[T]:t[n],x="",_!==void 0){if(_.F!=null){if(n=_.F,!_.f)continue;x=_.f,n.indexOf(":")==-1&&(n=n+":"+n)}if(_.f!=null)x=_.f;else{if(_.t=="z")continue;if(_.t=="n"&&_.v!=null)x=""+_.v;else if(_.t=="b")x=_.v?"TRUE":"FALSE";else if(_.w!==void 0)x="'"+_.w;else{if(_.v===void 0)continue;_.t=="s"?x="'"+_.v:x=""+_.v}}B[B.length]=n+"="+x}return B}function sheet_add_json(t,n,_){var x=_||{},E=t?t["!data"]!=null:x.dense,S=+!x.skipHeader,C=t||{};!t&&E&&(C["!data"]=[]);var T=0,B=0;if(C&&x.origin!=null)if(typeof x.origin=="number")T=x.origin;else{var A=typeof x.origin=="string"?decode_cell(x.origin):x.origin;T=A.r,B=A.c}var I={s:{c:0,r:0},e:{c:B,r:T+n.length-1+S}};if(C["!ref"]){var D=safe_decode_range(C["!ref"]);I.e.c=Math.max(I.e.c,D.e.c),I.e.r=Math.max(I.e.r,D.e.r),T==-1&&(T=D.e.r+1,I.e.r=T+n.length-1+S)}else T==-1&&(T=0,I.e.r=n.length-1+S);var M=x.header||[],V=0,L=[];n.forEach(function(j,U){E&&!C["!data"][T+U+S]&&(C["!data"][T+U+S]=[]),E&&(L=C["!data"][T+U+S]),keys(j).forEach(function(H){(V=M.indexOf(H))==-1&&(M[V=M.length]=H);var Y=j[H],Z="z",ne="",re=E?"":encode_col(B+V)+encode_row(T+U+S),X=E?L[B+V]:C[re];Y&&typeof Y=="object"&&!(Y instanceof Date)?E?L[B+V]=Y:C[re]=Y:(typeof Y=="number"?Z="n":typeof Y=="boolean"?Z="b":typeof Y=="string"?Z="s":Y instanceof Date?(Z="d",x.cellDates||(Z="n",Y=datenum(Y)),ne=X!=null&&X.z&&fmt_is_date(X.z)?X.z:x.dateNF||table_fmt[14]):Y===null&&x.nullError&&(Z="e",Y=0),X?(X.t=Z,X.v=Y,delete X.w,delete X.R,ne&&(X.z=ne)):E?L[B+V]=X={t:Z,v:Y}:C[re]=X={t:Z,v:Y},ne&&(X.z=ne))})}),I.e.c=Math.max(I.e.c,B+M.length-1);var F=encode_row(T);if(E&&!C["!data"][T]&&(C["!data"][T]=[]),S)for(V=0;V<M.length;++V)E?C["!data"][T][V+B]={t:"s",v:M[V]}:C[encode_col(V+B)+F]={t:"s",v:M[V]};return C["!ref"]=encode_range(I),C}function json_to_sheet(t,n){return sheet_add_json(null,t,n)}function ws_get_cell_stub(t,n,_){if(typeof n=="string"){if(t["!data"]!=null){var x=decode_cell(n);return t["!data"][x.r]||(t["!data"][x.r]=[]),t["!data"][x.r][x.c]||(t["!data"][x.r][x.c]={t:"z"})}return t[n]||(t[n]={t:"z"})}return typeof n!="number"?ws_get_cell_stub(t,encode_cell(n)):ws_get_cell_stub(t,encode_col(_||0)+encode_row(n))}function wb_sheet_idx(t,n){if(typeof n=="number"){if(n>=0&&t.SheetNames.length>n)return n;throw new Error("Cannot find sheet # "+n)}else if(typeof n=="string"){var _=t.SheetNames.indexOf(n);if(_>-1)return _;throw new Error("Cannot find sheet name |"+n+"|")}else throw new Error("Cannot find sheet |"+n+"|")}function book_new(){return{SheetNames:[],Sheets:{}}}function book_append_sheet(t,n,_,x){var E=1;if(!_)for(;E<=65535&&t.SheetNames.indexOf(_="Sheet"+E)!=-1;++E,_=void 0);if(!_||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(x&&t.SheetNames.indexOf(_)>=0){var S=_.match(/(^.*?)(\d+)$/);E=S&&+S[2]||0;var C=S&&S[1]||_;for(++E;E<=65535&&t.SheetNames.indexOf(_=C+E)!=-1;++E);}if(check_ws_name(_),t.SheetNames.indexOf(_)>=0)throw new Error("Worksheet with name |"+_+"| already exists!");return t.SheetNames.push(_),t.Sheets[_]=n,_}function book_set_sheet_visibility(t,n,_){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var x=wb_sheet_idx(t,n);switch(t.Workbook.Sheets[x]||(t.Workbook.Sheets[x]={}),_){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+_)}t.Workbook.Sheets[x].Hidden=_}function cell_set_number_format(t,n){return t.z=n,t}function cell_set_hyperlink(t,n,_){return n?(t.l={Target:n},_&&(t.l.Tooltip=_)):delete t.l,t}function cell_set_internal_link(t,n,_){return cell_set_hyperlink(t,"#"+n,_)}function cell_add_comment(t,n,_){t.c||(t.c=[]),t.c.push({t:n,a:_||"SheetJS"})}function sheet_set_array_formula(t,n,_,x){for(var E=typeof n!="string"?n:safe_decode_range(n),S=typeof n=="string"?n:encode_range(n),C=E.s.r;C<=E.e.r;++C)for(var T=E.s.c;T<=E.e.c;++T){var B=ws_get_cell_stub(t,C,T);B.t="n",B.F=S,delete B.v,C==E.s.r&&T==E.s.c&&(B.f=_,x&&(B.D=!0))}var A=decode_range(t["!ref"]);return A.s.r>E.s.r&&(A.s.r=E.s.r),A.s.c>E.s.c&&(A.s.c=E.s.c),A.e.r<E.e.r&&(A.e.r=E.e.r),A.e.c<E.e.c&&(A.e.c=E.e.c),t["!ref"]=encode_range(A),t}var utils$1={encode_col,encode_row,encode_cell,encode_range,decode_col,decode_row,split_cell,decode_cell,decode_range,format_cell,sheet_add_aoa,sheet_add_json,sheet_add_dom,aoa_to_sheet,json_to_sheet,table_to_sheet:parse_dom_table,table_to_book,sheet_to_csv,sheet_to_txt,sheet_to_json,sheet_to_html,sheet_to_formulae,sheet_to_row_object_array:sheet_to_json,sheet_get_cell:ws_get_cell_stub,book_new,book_append_sheet,book_set_sheet_visibility,cell_set_number_format,cell_set_hyperlink,cell_set_internal_link,cell_add_comment,sheet_set_array_formula,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},_Readable;function set_readable(t){_Readable=t}function write_csv_stream(t,n){var _=_Readable(),x=n??{};if(t==null||t["!ref"]==null)return _.push(null),_;for(var E=safe_decode_range(t["!ref"]),S=x.FS!==void 0?x.FS:",",C=S.charCodeAt(0),T=x.RS!==void 0?x.RS:`
`,B=T.charCodeAt(0),A=new RegExp((S=="|"?"\\|":S)+"+$"),I="",D=[],M=x.skipHidden&&t["!cols"]||[],V=x.skipHidden&&t["!rows"]||[],L=E.s.c;L<=E.e.c;++L)(M[L]||{}).hidden||(D[L]=encode_col(L));var F=E.s.r,j=!1,U=0;return _._read=function(){if(!j)return j=!0,_.push("\uFEFF");for(;F<=E.e.r;)if(++F,!(V[F-1]||{}).hidden&&(I=make_csv_row(t,E,F-1,D,C,B,S,x),I!=null&&(x.strip&&(I=I.replace(A,"")),I||x.blankrows!==!1)))return _.push((U++?T:"")+I);return _.push(null)},_}function write_html_stream(t,n){var _=_Readable(),x=n||{},E=x.header!=null?x.header:HTML_BEGIN,S=x.footer!=null?x.footer:HTML_END;_.push(E);var C=decode_range(t["!ref"]);_.push(make_html_preamble(t,C,x));var T=C.s.r,B=!1;return _._read=function(){if(T>C.e.r)return B||(B=!0,_.push("</table>"+S)),_.push(null);for(;T<=C.e.r;){_.push(make_html_row(t,C,T,x)),++T;break}},_}function write_json_stream(t,n){var _=_Readable({objectMode:!0});if(t==null||t["!ref"]==null)return _.push(null),_;var x={t:"n",v:0},E=0,S=1,C=[],T=0,B="",A={s:{r:0,c:0},e:{r:0,c:0}},I=n||{},D=I.range!=null?I.range:t["!ref"];switch(I.header===1?E=1:I.header==="A"?E=2:Array.isArray(I.header)&&(E=3),typeof D){case"string":A=safe_decode_range(D);break;case"number":A=safe_decode_range(t["!ref"]),A.s.r=D;break;default:A=D}E>0&&(S=0);var M=encode_row(A.s.r),V=[],L=0,F=t["!data"]!=null,j=A.s.r,U=0,H={};F&&!t["!data"][j]&&(t["!data"][j]=[]);var Y=I.skipHidden&&t["!cols"]||[],Z=I.skipHidden&&t["!rows"]||[];for(U=A.s.c;U<=A.e.c;++U)if(!(Y[U]||{}).hidden)switch(V[U]=encode_col(U),x=F?t["!data"][j][U]:t[V[U]+M],E){case 1:C[U]=U-A.s.c;break;case 2:C[U]=V[U];break;case 3:C[U]=I.header[U-A.s.c];break;default:if(x==null&&(x={w:"__EMPTY",t:"s"}),B=T=format_cell(x,null,I),L=H[T]||0,!L)H[T]=1;else{do B=T+"_"+L++;while(H[B]);H[T]=L,H[B]=1}C[U]=B}return j=A.s.r+S,_._read=function(){for(;j<=A.e.r;)if(!(Z[j-1]||{}).hidden){var ne=make_json_row(t,A,j,V,E,C,I);if(++j,ne.isempty===!1||(E===1?I.blankrows!==!1:I.blankrows)){_.push(ne.row);return}}return _.push(null)},_}var __stream={to_json:write_json_stream,to_html:write_html_stream,to_csv:write_csv_stream,set_readable};function bind(t,n){return function(){return t.apply(n,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf}=Object,kindOf=(t=>n=>{const _=toString$2.call(n);return t[_]||(t[_]=_.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),n=>kindOf(n)===t),typeOfTest=t=>n=>typeof n===t,{isArray:isArray$2}=Array,isUndefined=typeOfTest("undefined");function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&isFunction(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(t):n=t&&t.buffer&&isArrayBuffer(t.buffer),n}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$1=t=>t!==null&&typeof t=="object",isBoolean=t=>t===!0||t===!1,isPlainObject=t=>{if(kindOf(t)!=="object")return!1;const n=getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject$1(t)&&isFunction(t.pipe),isFormData=t=>{let n;return t&&(typeof FormData=="function"&&t instanceof FormData||isFunction(t.append)&&((n=kindOf(t))==="formdata"||n==="object"&&isFunction(t.toString)&&t.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(t,n,{allOwnKeys:_=!1}={}){if(t===null||typeof t>"u")return;let x,E;if(typeof t!="object"&&(t=[t]),isArray$2(t))for(x=0,E=t.length;x<E;x++)n.call(null,t[x],x,t);else{const S=_?Object.getOwnPropertyNames(t):Object.keys(t),C=S.length;let T;for(x=0;x<C;x++)T=S[x],n.call(null,t[T],T,t)}}function findKey(t,n){n=n.toLowerCase();const _=Object.keys(t);let x=_.length,E;for(;x-- >0;)if(E=_[x],n===E.toLowerCase())return E;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global$1)(),isContextDefined=t=>!isUndefined(t)&&t!==_global;function merge(){const{caseless:t}=isContextDefined(this)&&this||{},n={},_=(x,E)=>{const S=t&&findKey(n,E)||E;isPlainObject(n[S])&&isPlainObject(x)?n[S]=merge(n[S],x):isPlainObject(x)?n[S]=merge({},x):isArray$2(x)?n[S]=x.slice():n[S]=x};for(let x=0,E=arguments.length;x<E;x++)arguments[x]&&forEach(arguments[x],_);return n}const extend=(t,n,_,{allOwnKeys:x}={})=>(forEach(n,(E,S)=>{_&&isFunction(E)?t[S]=bind(E,_):t[S]=E},{allOwnKeys:x}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,n,_,x)=>{t.prototype=Object.create(n.prototype,x),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:n.prototype}),_&&Object.assign(t.prototype,_)},toFlatObject=(t,n,_,x)=>{let E,S,C;const T={};if(n=n||{},t==null)return n;do{for(E=Object.getOwnPropertyNames(t),S=E.length;S-- >0;)C=E[S],(!x||x(C,t,n))&&!T[C]&&(n[C]=t[C],T[C]=!0);t=_!==!1&&getPrototypeOf(t)}while(t&&(!_||_(t,n))&&t!==Object.prototype);return n},endsWith=(t,n,_)=>{t=String(t),(_===void 0||_>t.length)&&(_=t.length),_-=n.length;const x=t.indexOf(n,_);return x!==-1&&x===_},toArray=t=>{if(!t)return null;if(isArray$2(t))return t;let n=t.length;if(!isNumber(n))return null;const _=new Array(n);for(;n-- >0;)_[n]=t[n];return _},isTypedArray=(t=>n=>t&&n instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(t,n)=>{const x=(t&&t[Symbol.iterator]).call(t);let E;for(;(E=x.next())&&!E.done;){const S=E.value;n.call(t,S[0],S[1])}},matchAll=(t,n)=>{let _;const x=[];for(;(_=t.exec(n))!==null;)x.push(_);return x},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(_,x,E){return x.toUpperCase()+E}),hasOwnProperty=(({hasOwnProperty:t})=>(n,_)=>t.call(n,_))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(t,n)=>{const _=Object.getOwnPropertyDescriptors(t),x={};forEach(_,(E,S)=>{n(E,S,t)!==!1&&(x[S]=E)}),Object.defineProperties(t,x)},freezeMethods=t=>{reduceDescriptors(t,(n,_)=>{if(isFunction(t)&&["arguments","caller","callee"].indexOf(_)!==-1)return!1;const x=t[_];if(isFunction(x)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+_+"'")})}})},toObjectSet=(t,n)=>{const _={},x=E=>{E.forEach(S=>{_[S]=!0})};return isArray$2(t)?x(t):x(String(t).split(n)),_},noop$1=()=>{},toFiniteNumber=(t,n)=>(t=+t,Number.isFinite(t)?t:n),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(t=16,n=ALPHABET.ALPHA_DIGIT)=>{let _="";const{length:x}=n;for(;t--;)_+=n[Math.random()*x|0];return _};function isSpecCompliantForm(t){return!!(t&&isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const toJSONObject=t=>{const n=new Array(10),_=(x,E)=>{if(isObject$1(x)){if(n.indexOf(x)>=0)return;if(!("toJSON"in x)){n[E]=x;const S=isArray$2(x)?[]:{};return forEach(x,(C,T)=>{const B=_(C,E+1);!isUndefined(B)&&(S[T]=B)}),n[E]=void 0,S}}return x};return _(t,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=t=>t&&(isObject$1(t)||isFunction(t))&&isFunction(t.then)&&isFunction(t.catch),utils={isArray:isArray$2,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject:isObject$1,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable};function AxiosError(t,n,_,x,E){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",n&&(this.code=n),_&&(this.config=_),x&&(this.request=x),E&&(this.response=E)}utils.inherits(AxiosError,Error,{toJSON:function t(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(t,n,_,x,E,S)=>{const C=Object.create(prototype$1);return utils.toFlatObject(t,C,function(B){return B!==Error.prototype},T=>T!=="isAxiosError"),AxiosError.call(C,t.message,n,_,x,E),C.cause=t,C.name=t.name,S&&Object.assign(C,S),C};const httpAdapter=null;function isVisitable(t){return utils.isPlainObject(t)||utils.isArray(t)}function removeBrackets(t){return utils.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,n,_){return t?t.concat(n).map(function(E,S){return E=removeBrackets(E),!_&&S?"["+E+"]":E}).join(_?".":""):n}function isFlatArray(t){return utils.isArray(t)&&!t.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function t(n){return/^is[A-Z]/.test(n)});function toFormData(t,n,_){if(!utils.isObject(t))throw new TypeError("target must be an object");n=n||new FormData,_=utils.toFlatObject(_,{metaTokens:!0,dots:!1,indexes:!1},!1,function(F,j){return!utils.isUndefined(j[F])});const x=_.metaTokens,E=_.visitor||I,S=_.dots,C=_.indexes,B=(_.Blob||typeof Blob<"u"&&Blob)&&utils.isSpecCompliantForm(n);if(!utils.isFunction(E))throw new TypeError("visitor must be a function");function A(L){if(L===null)return"";if(utils.isDate(L))return L.toISOString();if(!B&&utils.isBlob(L))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(L)||utils.isTypedArray(L)?B&&typeof Blob=="function"?new Blob([L]):Buffer$5.from(L):L}function I(L,F,j){let U=L;if(L&&!j&&typeof L=="object"){if(utils.endsWith(F,"{}"))F=x?F:F.slice(0,-2),L=JSON.stringify(L);else if(utils.isArray(L)&&isFlatArray(L)||(utils.isFileList(L)||utils.endsWith(F,"[]"))&&(U=utils.toArray(L)))return F=removeBrackets(F),U.forEach(function(Y,Z){!(utils.isUndefined(Y)||Y===null)&&n.append(C===!0?renderKey([F],Z,S):C===null?F:F+"[]",A(Y))}),!1}return isVisitable(L)?!0:(n.append(renderKey(j,F,S),A(L)),!1)}const D=[],M=Object.assign(predicates,{defaultVisitor:I,convertValue:A,isVisitable});function V(L,F){if(!utils.isUndefined(L)){if(D.indexOf(L)!==-1)throw Error("Circular reference detected in "+F.join("."));D.push(L),utils.forEach(L,function(U,H){(!(utils.isUndefined(U)||U===null)&&E.call(n,U,utils.isString(H)?H.trim():H,F,M))===!0&&V(U,F?F.concat(H):[H])}),D.pop()}}if(!utils.isObject(t))throw new TypeError("data must be an object");return V(t),n}function encode$4(t){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(x){return n[x]})}function AxiosURLSearchParams(t,n){this._pairs=[],t&&toFormData(t,this,n)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function t(n,_){this._pairs.push([n,_])};prototype.toString=function t(n){const _=n?function(x){return n.call(this,x,encode$4)}:encode$4;return this._pairs.map(function(E){return _(E[0])+"="+_(E[1])},"").join("&")};function encode$3(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,n,_){if(!n)return t;const x=_&&_.encode||encode$3,E=_&&_.serialize;let S;if(E?S=E(n,_):S=utils.isURLSearchParams(n)?n.toString():new AxiosURLSearchParams(n,_).toString(x),S){const C=t.indexOf("#");C!==-1&&(t=t.slice(0,C)),t+=(t.indexOf("?")===-1?"?":"&")+S}return t}class InterceptorManager{constructor(){this.handlers=[]}use(n,_,x){return this.handlers.push({fulfilled:n,rejected:_,synchronous:x?x.synchronous:!1,runWhen:x?x.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){utils.forEach(this.handlers,function(x){x!==null&&n(x)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(t,n){return toFormData(t,new platform.classes.URLSearchParams,Object.assign({visitor:function(_,x,E,S){return platform.isNode&&utils.isBuffer(_)?(this.append(x,_.toString("base64")),!1):S.defaultVisitor.apply(this,arguments)}},n))}function parsePropPath(t){return utils.matchAll(/\w+|\[(\w*)]/g,t).map(n=>n[0]==="[]"?"":n[1]||n[0])}function arrayToObject(t){const n={},_=Object.keys(t);let x;const E=_.length;let S;for(x=0;x<E;x++)S=_[x],n[S]=t[S];return n}function formDataToJSON(t){function n(_,x,E,S){let C=_[S++];const T=Number.isFinite(+C),B=S>=_.length;return C=!C&&utils.isArray(E)?E.length:C,B?(utils.hasOwnProp(E,C)?E[C]=[E[C],x]:E[C]=x,!T):((!E[C]||!utils.isObject(E[C]))&&(E[C]=[]),n(_,x,E[C],S)&&utils.isArray(E[C])&&(E[C]=arrayToObject(E[C])),!T)}if(utils.isFormData(t)&&utils.isFunction(t.entries)){const _={};return utils.forEachEntry(t,(x,E)=>{n(parsePropPath(x),E,_,0)}),_}return null}const DEFAULT_CONTENT_TYPE={"Content-Type":void 0};function stringifySafely(t,n,_){if(utils.isString(t))try{return(n||JSON.parse)(t),utils.trim(t)}catch(x){if(x.name!=="SyntaxError")throw x}return(_||JSON.stringify)(t)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function t(n,_){const x=_.getContentType()||"",E=x.indexOf("application/json")>-1,S=utils.isObject(n);if(S&&utils.isHTMLForm(n)&&(n=new FormData(n)),utils.isFormData(n))return E&&E?JSON.stringify(formDataToJSON(n)):n;if(utils.isArrayBuffer(n)||utils.isBuffer(n)||utils.isStream(n)||utils.isFile(n)||utils.isBlob(n))return n;if(utils.isArrayBufferView(n))return n.buffer;if(utils.isURLSearchParams(n))return _.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let T;if(S){if(x.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(n,this.formSerializer).toString();if((T=utils.isFileList(n))||x.indexOf("multipart/form-data")>-1){const B=this.env&&this.env.FormData;return toFormData(T?{"files[]":n}:n,B&&new B,this.formSerializer)}}return S||E?(_.setContentType("application/json",!1),stringifySafely(n)):n}],transformResponse:[function t(n){const _=this.transitional||defaults.transitional,x=_&&_.forcedJSONParsing,E=this.responseType==="json";if(n&&utils.isString(n)&&(x&&!this.responseType||E)){const C=!(_&&_.silentJSONParsing)&&E;try{return JSON.parse(n)}catch(T){if(C)throw T.name==="SyntaxError"?AxiosError.from(T,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):T}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function t(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function t(n){defaults.headers[n]={}});utils.forEach(["post","put","patch"],function t(n){defaults.headers[n]=utils.merge(DEFAULT_CONTENT_TYPE)});const defaults$1=defaults,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=t=>{const n={};let _,x,E;return t&&t.split(`
`).forEach(function(C){E=C.indexOf(":"),_=C.substring(0,E).trim().toLowerCase(),x=C.substring(E+1).trim(),!(!_||n[_]&&ignoreDuplicateOf[_])&&(_==="set-cookie"?n[_]?n[_].push(x):n[_]=[x]:n[_]=n[_]?n[_]+", "+x:x)}),n},$internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const n=Object.create(null),_=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let x;for(;x=_.exec(t);)n[x[1]]=x[2];return n}const isValidHeaderName=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function matchHeaderValue(t,n,_,x,E){if(utils.isFunction(x))return x.call(this,n,_);if(E&&(n=_),!!utils.isString(n)){if(utils.isString(x))return n.indexOf(x)!==-1;if(utils.isRegExp(x))return x.test(n)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,_,x)=>_.toUpperCase()+x)}function buildAccessors(t,n){const _=utils.toCamelCase(" "+n);["get","set","has"].forEach(x=>{Object.defineProperty(t,x+_,{value:function(E,S,C){return this[x].call(this,n,E,S,C)},configurable:!0})})}class AxiosHeaders{constructor(n){n&&this.set(n)}set(n,_,x){const E=this;function S(T,B,A){const I=normalizeHeader(B);if(!I)throw new Error("header name must be a non-empty string");const D=utils.findKey(E,I);(!D||E[D]===void 0||A===!0||A===void 0&&E[D]!==!1)&&(E[D||B]=normalizeValue(T))}const C=(T,B)=>utils.forEach(T,(A,I)=>S(A,I,B));return utils.isPlainObject(n)||n instanceof this.constructor?C(n,_):utils.isString(n)&&(n=n.trim())&&!isValidHeaderName(n)?C(parseHeaders(n),_):n!=null&&S(_,n,x),this}get(n,_){if(n=normalizeHeader(n),n){const x=utils.findKey(this,n);if(x){const E=this[x];if(!_)return E;if(_===!0)return parseTokens(E);if(utils.isFunction(_))return _.call(this,E,x);if(utils.isRegExp(_))return _.exec(E);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,_){if(n=normalizeHeader(n),n){const x=utils.findKey(this,n);return!!(x&&this[x]!==void 0&&(!_||matchHeaderValue(this,this[x],x,_)))}return!1}delete(n,_){const x=this;let E=!1;function S(C){if(C=normalizeHeader(C),C){const T=utils.findKey(x,C);T&&(!_||matchHeaderValue(x,x[T],T,_))&&(delete x[T],E=!0)}}return utils.isArray(n)?n.forEach(S):S(n),E}clear(n){const _=Object.keys(this);let x=_.length,E=!1;for(;x--;){const S=_[x];(!n||matchHeaderValue(this,this[S],S,n,!0))&&(delete this[S],E=!0)}return E}normalize(n){const _=this,x={};return utils.forEach(this,(E,S)=>{const C=utils.findKey(x,S);if(C){_[C]=normalizeValue(E),delete _[S];return}const T=n?formatHeader(S):String(S).trim();T!==S&&delete _[S],_[T]=normalizeValue(E),x[T]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const _=Object.create(null);return utils.forEach(this,(x,E)=>{x!=null&&x!==!1&&(_[E]=n&&utils.isArray(x)?x.join(", "):x)}),_}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,_])=>n+": "+_).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,..._){const x=new this(n);return _.forEach(E=>x.set(E)),x}static accessor(n){const x=(this[$internals]=this[$internals]={accessors:{}}).accessors,E=this.prototype;function S(C){const T=normalizeHeader(C);x[T]||(buildAccessors(E,C),x[T]=!0)}return utils.isArray(n)?n.forEach(S):S(n),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils.freezeMethods(AxiosHeaders.prototype);utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(t,n){const _=this||defaults$1,x=n||_,E=AxiosHeaders$1.from(x.headers);let S=x.data;return utils.forEach(t,function(T){S=T.call(_,S,E.normalize(),n?n.status:void 0)}),E.normalize(),S}function isCancel(t){return!!(t&&t.__CANCEL__)}function CanceledError(t,n,_){AxiosError.call(this,t??"canceled",AxiosError.ERR_CANCELED,n,_),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(t,n,_){const x=_.config.validateStatus;!_.status||!x||x(_.status)?t(_):n(new AxiosError("Request failed with status code "+_.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(_.status/100)-4],_.config,_.request,_))}const cookies=platform.isStandardBrowserEnv?function t(){return{write:function(_,x,E,S,C,T){const B=[];B.push(_+"="+encodeURIComponent(x)),utils.isNumber(E)&&B.push("expires="+new Date(E).toGMTString()),utils.isString(S)&&B.push("path="+S),utils.isString(C)&&B.push("domain="+C),T===!0&&B.push("secure"),document.cookie=B.join("; ")},read:function(_){const x=document.cookie.match(new RegExp("(^|;\\s*)("+_+")=([^;]*)"));return x?decodeURIComponent(x[3]):null},remove:function(_){this.write(_,"",Date.now()-864e5)}}}():function t(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}function buildFullPath(t,n){return t&&!isAbsoluteURL(n)?combineURLs(t,n):n}const isURLSameOrigin=platform.isStandardBrowserEnv?function t(){const n=/(msie|trident)/i.test(navigator.userAgent),_=document.createElement("a");let x;function E(S){let C=S;return n&&(_.setAttribute("href",C),C=_.href),_.setAttribute("href",C),{href:_.href,protocol:_.protocol?_.protocol.replace(/:$/,""):"",host:_.host,search:_.search?_.search.replace(/^\?/,""):"",hash:_.hash?_.hash.replace(/^#/,""):"",hostname:_.hostname,port:_.port,pathname:_.pathname.charAt(0)==="/"?_.pathname:"/"+_.pathname}}return x=E(window.location.href),function(C){const T=utils.isString(C)?E(C):C;return T.protocol===x.protocol&&T.host===x.host}}():function t(){return function(){return!0}}();function parseProtocol(t){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}function speedometer(t,n){t=t||10;const _=new Array(t),x=new Array(t);let E=0,S=0,C;return n=n!==void 0?n:1e3,function(B){const A=Date.now(),I=x[S];C||(C=A),_[E]=B,x[E]=A;let D=S,M=0;for(;D!==E;)M+=_[D++],D=D%t;if(E=(E+1)%t,E===S&&(S=(S+1)%t),A-C<n)return;const V=I&&A-I;return V?Math.round(M*1e3/V):void 0}}function progressEventReducer(t,n){let _=0;const x=speedometer(50,250);return E=>{const S=E.loaded,C=E.lengthComputable?E.total:void 0,T=S-_,B=x(T),A=S<=C;_=S;const I={loaded:S,total:C,progress:C?S/C:void 0,bytes:T,rate:B||void 0,estimated:B&&C&&A?(C-S)/B:void 0,event:E};I[n?"download":"upload"]=!0,t(I)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(_,x){let E=t.data;const S=AxiosHeaders$1.from(t.headers).normalize(),C=t.responseType;let T;function B(){t.cancelToken&&t.cancelToken.unsubscribe(T),t.signal&&t.signal.removeEventListener("abort",T)}utils.isFormData(E)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv?S.setContentType(!1):S.setContentType("multipart/form-data;",!1));let A=new XMLHttpRequest;if(t.auth){const V=t.auth.username||"",L=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";S.set("Authorization","Basic "+btoa(V+":"+L))}const I=buildFullPath(t.baseURL,t.url);A.open(t.method.toUpperCase(),buildURL(I,t.params,t.paramsSerializer),!0),A.timeout=t.timeout;function D(){if(!A)return;const V=AxiosHeaders$1.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),F={data:!C||C==="text"||C==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:V,config:t,request:A};settle(function(U){_(U),B()},function(U){x(U),B()},F),A=null}if("onloadend"in A?A.onloadend=D:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(D)},A.onabort=function(){A&&(x(new AxiosError("Request aborted",AxiosError.ECONNABORTED,t,A)),A=null)},A.onerror=function(){x(new AxiosError("Network Error",AxiosError.ERR_NETWORK,t,A)),A=null},A.ontimeout=function(){let L=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const F=t.transitional||transitionalDefaults;t.timeoutErrorMessage&&(L=t.timeoutErrorMessage),x(new AxiosError(L,F.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,t,A)),A=null},platform.isStandardBrowserEnv){const V=(t.withCredentials||isURLSameOrigin(I))&&t.xsrfCookieName&&cookies.read(t.xsrfCookieName);V&&S.set(t.xsrfHeaderName,V)}E===void 0&&S.setContentType(null),"setRequestHeader"in A&&utils.forEach(S.toJSON(),function(L,F){A.setRequestHeader(F,L)}),utils.isUndefined(t.withCredentials)||(A.withCredentials=!!t.withCredentials),C&&C!=="json"&&(A.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&A.addEventListener("progress",progressEventReducer(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&A.upload&&A.upload.addEventListener("progress",progressEventReducer(t.onUploadProgress)),(t.cancelToken||t.signal)&&(T=V=>{A&&(x(!V||V.type?new CanceledError(null,t,A):V),A.abort(),A=null)},t.cancelToken&&t.cancelToken.subscribe(T),t.signal&&(t.signal.aborted?T():t.signal.addEventListener("abort",T)));const M=parseProtocol(I);if(M&&platform.protocols.indexOf(M)===-1){x(new AxiosError("Unsupported protocol "+M+":",AxiosError.ERR_BAD_REQUEST,t));return}A.send(E||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(t,n)=>{if(t){try{Object.defineProperty(t,"name",{value:n})}catch{}Object.defineProperty(t,"adapterName",{value:n})}});const adapters={getAdapter:t=>{t=utils.isArray(t)?t:[t];const{length:n}=t;let _,x;for(let E=0;E<n&&(_=t[E],!(x=utils.isString(_)?knownAdapters[_.toLowerCase()]:_));E++);if(!x)throw x===!1?new AxiosError(`Adapter ${_} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,_)?`Adapter '${_}' is not available in the build`:`Unknown adapter '${_}'`);if(!utils.isFunction(x))throw new TypeError("adapter is not a function");return x},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError(null,t)}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$1.adapter)(t).then(function(x){return throwIfCancellationRequested(t),x.data=transformData.call(t,t.transformResponse,x),x.headers=AxiosHeaders$1.from(x.headers),x},function(x){return isCancel(x)||(throwIfCancellationRequested(t),x&&x.response&&(x.response.data=transformData.call(t,t.transformResponse,x.response),x.response.headers=AxiosHeaders$1.from(x.response.headers))),Promise.reject(x)})}const headersToObject=t=>t instanceof AxiosHeaders$1?t.toJSON():t;function mergeConfig(t,n){n=n||{};const _={};function x(A,I,D){return utils.isPlainObject(A)&&utils.isPlainObject(I)?utils.merge.call({caseless:D},A,I):utils.isPlainObject(I)?utils.merge({},I):utils.isArray(I)?I.slice():I}function E(A,I,D){if(utils.isUndefined(I)){if(!utils.isUndefined(A))return x(void 0,A,D)}else return x(A,I,D)}function S(A,I){if(!utils.isUndefined(I))return x(void 0,I)}function C(A,I){if(utils.isUndefined(I)){if(!utils.isUndefined(A))return x(void 0,A)}else return x(void 0,I)}function T(A,I,D){if(D in n)return x(A,I);if(D in t)return x(void 0,A)}const B={url:S,method:S,data:S,baseURL:C,transformRequest:C,transformResponse:C,paramsSerializer:C,timeout:C,timeoutMessage:C,withCredentials:C,adapter:C,responseType:C,xsrfCookieName:C,xsrfHeaderName:C,onUploadProgress:C,onDownloadProgress:C,decompress:C,maxContentLength:C,maxBodyLength:C,beforeRedirect:C,transport:C,httpAgent:C,httpsAgent:C,cancelToken:C,socketPath:C,responseEncoding:C,validateStatus:T,headers:(A,I)=>E(headersToObject(A),headersToObject(I),!0)};return utils.forEach(Object.keys(Object.assign({},t,n)),function(I){const D=B[I]||E,M=D(t[I],n[I],I);utils.isUndefined(M)&&D!==T||(_[I]=M)}),_}const VERSION="1.4.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,n)=>{validators$1[t]=function(x){return typeof x===t||"a"+(n<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function t(n,_,x){function E(S,C){return"[Axios v"+VERSION+"] Transitional option '"+S+"'"+C+(x?". "+x:"")}return(S,C,T)=>{if(n===!1)throw new AxiosError(E(C," has been removed"+(_?" in "+_:"")),AxiosError.ERR_DEPRECATED);return _&&!deprecatedWarnings[C]&&(deprecatedWarnings[C]=!0,console.warn(E(C," has been deprecated since v"+_+" and will be removed in the near future"))),n?n(S,C,T):!0}};function assertOptions(t,n,_){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const x=Object.keys(t);let E=x.length;for(;E-- >0;){const S=x[E],C=n[S];if(C){const T=t[S],B=T===void 0||C(T,S,t);if(B!==!0)throw new AxiosError("option "+S+" must be "+B,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(_!==!0)throw new AxiosError("Unknown option "+S,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(n){this.defaults=n,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(n,_){typeof n=="string"?(_=_||{},_.url=n):_=n||{},_=mergeConfig(this.defaults,_);const{transitional:x,paramsSerializer:E,headers:S}=_;x!==void 0&&validator.assertOptions(x,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),E!=null&&(utils.isFunction(E)?_.paramsSerializer={serialize:E}:validator.assertOptions(E,{encode:validators.function,serialize:validators.function},!0)),_.method=(_.method||this.defaults.method||"get").toLowerCase();let C;C=S&&utils.merge(S.common,S[_.method]),C&&utils.forEach(["delete","get","head","post","put","patch","common"],L=>{delete S[L]}),_.headers=AxiosHeaders$1.concat(C,S);const T=[];let B=!0;this.interceptors.request.forEach(function(F){typeof F.runWhen=="function"&&F.runWhen(_)===!1||(B=B&&F.synchronous,T.unshift(F.fulfilled,F.rejected))});const A=[];this.interceptors.response.forEach(function(F){A.push(F.fulfilled,F.rejected)});let I,D=0,M;if(!B){const L=[dispatchRequest.bind(this),void 0];for(L.unshift.apply(L,T),L.push.apply(L,A),M=L.length,I=Promise.resolve(_);D<M;)I=I.then(L[D++],L[D++]);return I}M=T.length;let V=_;for(D=0;D<M;){const L=T[D++],F=T[D++];try{V=L(V)}catch(j){F.call(this,j);break}}try{I=dispatchRequest.call(this,V)}catch(L){return Promise.reject(L)}for(D=0,M=A.length;D<M;)I=I.then(A[D++],A[D++]);return I}getUri(n){n=mergeConfig(this.defaults,n);const _=buildFullPath(n.baseURL,n.url);return buildURL(_,n.params,n.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function t(n){Axios.prototype[n]=function(_,x){return this.request(mergeConfig(x||{},{method:n,url:_,data:(x||{}).data}))}});utils.forEach(["post","put","patch"],function t(n){function _(x){return function(S,C,T){return this.request(mergeConfig(T||{},{method:n,headers:x?{"Content-Type":"multipart/form-data"}:{},url:S,data:C}))}}Axios.prototype[n]=_(),Axios.prototype[n+"Form"]=_(!0)});const Axios$1=Axios;class CancelToken{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let _;this.promise=new Promise(function(S){_=S});const x=this;this.promise.then(E=>{if(!x._listeners)return;let S=x._listeners.length;for(;S-- >0;)x._listeners[S](E);x._listeners=null}),this.promise.then=E=>{let S;const C=new Promise(T=>{x.subscribe(T),S=T}).then(E);return C.cancel=function(){x.unsubscribe(S)},C},n(function(S,C,T){x.reason||(x.reason=new CanceledError(S,C,T),_(x.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const _=this._listeners.indexOf(n);_!==-1&&this._listeners.splice(_,1)}static source(){let n;return{token:new CancelToken(function(E){n=E}),cancel:n}}}const CancelToken$1=CancelToken;function spread(t){return function(_){return t.apply(null,_)}}function isAxiosError(t){return utils.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([t,n])=>{HttpStatusCode[n]=t});const HttpStatusCode$1=HttpStatusCode;function createInstance(t){const n=new Axios$1(t),_=bind(Axios$1.prototype.request,n);return utils.extend(_,Axios$1.prototype,n,{allOwnKeys:!0}),utils.extend(_,n,null,{allOwnKeys:!0}),_.create=function(E){return createInstance(mergeConfig(t,E))},_}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function t(n){return Promise.all(n)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=t=>formDataToJSON(utils.isHTMLForm(t)?new FormData(t):t);axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;async function importerJSONdURL(t){return await(await axios$1.get(t)).data}async function importerFeuilleCalculDURL(t,n){const x=(await axios$1.get(t,{responseType:"arraybuffer"})).data,S=Object.assign({type:"buffer",cellDates:!0},n||{});return readSync(x,S)}class Callable extends Function{constructor(){return Object.setPrototypeOf(function(){},new.target.prototype)}}class ClientMandatairifiable extends Callable{constructor(){super();wt(this,"vnements");wt(this,"tches");wt(this,"erreurs");this.vnements=new eventsExports.EventEmitter,this.tches={},this.erreurs=[],this.vnements.on("message",_=>{const{type:x}=_;switch(x){case"suivre":{const{id:E,donnes:S}=_;if(!this.tches[E])return;const{fSuivre:C}=this.tches[E];C(S);break}case"suivrePrt":{const{id:E,fonctions:S}=_;this.vnements.emit(E,{fonctions:S});break}case"action":{const{id:E,rsultat:S}=_;this.vnements.emit(E,{rsultat:S});break}case"erreur":{const{erreur:E,id:S}=_;S?this.vnements.emit(S,{erreur:E}):this.erreur({erreur:E,id:S});break}default:this.erreur({erreur:`Type inconnu ${x} dans message ${_}.`,id:_.id})}})}__call__(_,x={}){typeof x!="object"&&this.erreur({erreur:`La fonction ${_.join(".")} fut appele avec arguments ${x}. 
      Toute fonction mandataire Constellation doit tre appele avec un seul argument en format d'objet (dictionnaire).`});const E=v4(),S=Object.entries(x).find(C=>typeof C[1]=="function")?.[0];return S?this.appelerFonctionSuivre(E,_,x,S):this.appelerFonctionAction(E,_,x)}async appelerFonctionSuivre(_,x,E,S){const C=E[S],T=Object.fromEntries(Object.entries(E).filter(L=>typeof L[1]!="function"));C===void 0&&this.erreur({erreur:"Aucun argument de nom "+S+" n'a t donne pour "+x.join(".")}),Object.keys(E).length>Object.keys(T).length+1?this.erreur({erreur:"Plus d'un argument pour "+x.join(".")+" est une fonction : "+JSON.stringify(E),id:_}):typeof C!="function"&&this.erreur({erreur:"Argument "+S+"n'est pas une fonction : ",id:_});const B={type:"suivre",id:_,fonction:x,args:T,nomArgFonction:S},I={id:_,fSuivre:C,fRetour:async(L,F)=>{const j={type:"retour",id:_,fonction:L,args:F};this.envoyerMessage(j)}};this.tches[_]=I;const D=async()=>{await this.oublierTche(_)};this.envoyerMessage(B);const{fonctions:M,erreur:V}=(await once_1(this.vnements,_))[0];if(V&&this.erreur({erreur:V,id:_}),M&&M[0]){const L={fOublier:D};for(const F of M)L[F]=async(...j)=>{await this.tches[_]?.fRetour(F,j)};return L}else return D}async appelerFonctionAction(_,x,E){const S={type:"action",id:_,fonction:x,args:E},C=new Promise((T,B)=>{once_1(this.vnements,_).then(A=>{const{rsultat:I,erreur:D}=A[0];D?B(new Error(D)):T(I)})});return this.envoyerMessage(S),C}erreur({erreur:_,id:x}){const E={erreur:_,id:x};throw this.vnements.emit("erreur",{nouvelle:E,toutes:this.erreurs}),new Error(JSON.stringify(E))}async oublierTche(_){const x=this.tches[_];x&&await x.fRetour("fOublier"),delete this.tches[_]}}class Handler{constructor(n){wt(this,"listeAtributs");this.listeAtributs=n||[]}get(n,_){if(["vnements","erreurs"].includes(_))return n[_];{const E=[...this.listeAtributs,_],S=new Handler(E);return new Proxy(n,S)}}apply(n,_,x){return n.__call__(this.listeAtributs,x[0])}}const gnrerMandataire=t=>{const n=new Handler;return new Proxy(t,n)};function __decorate(t,n,_,x){var E=arguments.length,S=E<3?n:x===null?x=Object.getOwnPropertyDescriptor(n,_):x,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(t,n,_,x);else for(var T=t.length-1;T>=0;T--)(C=t[T])&&(S=(E<3?C(S):E>3?C(n,_,S):C(n,_))||S);return E>3&&S&&Object.defineProperty(n,_,S),S}typeof SuppressedError=="function"&&SuppressedError;var md5$1={exports:{}},core={exports:{}},hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(t,n){(function(_,x){t.exports=x()})(commonjsGlobal,function(){var _=_||function(x,E){var S;if(typeof window<"u"&&window.crypto&&(S=window.crypto),typeof self<"u"&&self.crypto&&(S=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(S=globalThis.crypto),!S&&typeof window<"u"&&window.msCrypto&&(S=window.msCrypto),!S&&typeof commonjsGlobal<"u"&&commonjsGlobal.crypto&&(S=commonjsGlobal.crypto),!S&&typeof commonjsRequire$1=="function")try{S=requireCryptoBrowserify()}catch{}var C=function(){if(S){if(typeof S.getRandomValues=="function")try{return S.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof S.randomBytes=="function")try{return S.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},T=Object.create||function(){function H(){}return function(Y){var Z;return H.prototype=Y,Z=new H,H.prototype=null,Z}}(),B={},A=B.lib={},I=A.Base=function(){return{extend:function(H){var Y=T(this);return H&&Y.mixIn(H),(!Y.hasOwnProperty("init")||this.init===Y.init)&&(Y.init=function(){Y.$super.init.apply(this,arguments)}),Y.init.prototype=Y,Y.$super=this,Y},create:function(){var H=this.extend();return H.init.apply(H,arguments),H},init:function(){},mixIn:function(H){for(var Y in H)H.hasOwnProperty(Y)&&(this[Y]=H[Y]);H.hasOwnProperty("toString")&&(this.toString=H.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),D=A.WordArray=I.extend({init:function(H,Y){H=this.words=H||[],Y!=E?this.sigBytes=Y:this.sigBytes=H.length*4},toString:function(H){return(H||V).stringify(this)},concat:function(H){var Y=this.words,Z=H.words,ne=this.sigBytes,re=H.sigBytes;if(this.clamp(),ne%4)for(var X=0;X<re;X++){var ce=Z[X>>>2]>>>24-X%4*8&255;Y[ne+X>>>2]|=ce<<24-(ne+X)%4*8}else for(var ue=0;ue<re;ue+=4)Y[ne+ue>>>2]=Z[ue>>>2];return this.sigBytes+=re,this},clamp:function(){var H=this.words,Y=this.sigBytes;H[Y>>>2]&=4294967295<<32-Y%4*8,H.length=x.ceil(Y/4)},clone:function(){var H=I.clone.call(this);return H.words=this.words.slice(0),H},random:function(H){for(var Y=[],Z=0;Z<H;Z+=4)Y.push(C());return new D.init(Y,H)}}),M=B.enc={},V=M.Hex={stringify:function(H){for(var Y=H.words,Z=H.sigBytes,ne=[],re=0;re<Z;re++){var X=Y[re>>>2]>>>24-re%4*8&255;ne.push((X>>>4).toString(16)),ne.push((X&15).toString(16))}return ne.join("")},parse:function(H){for(var Y=H.length,Z=[],ne=0;ne<Y;ne+=2)Z[ne>>>3]|=parseInt(H.substr(ne,2),16)<<24-ne%8*4;return new D.init(Z,Y/2)}},L=M.Latin1={stringify:function(H){for(var Y=H.words,Z=H.sigBytes,ne=[],re=0;re<Z;re++){var X=Y[re>>>2]>>>24-re%4*8&255;ne.push(String.fromCharCode(X))}return ne.join("")},parse:function(H){for(var Y=H.length,Z=[],ne=0;ne<Y;ne++)Z[ne>>>2]|=(H.charCodeAt(ne)&255)<<24-ne%4*8;return new D.init(Z,Y)}},F=M.Utf8={stringify:function(H){try{return decodeURIComponent(escape(L.stringify(H)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(H){return L.parse(unescape(encodeURIComponent(H)))}},j=A.BufferedBlockAlgorithm=I.extend({reset:function(){this._data=new D.init,this._nDataBytes=0},_append:function(H){typeof H=="string"&&(H=F.parse(H)),this._data.concat(H),this._nDataBytes+=H.sigBytes},_process:function(H){var Y,Z=this._data,ne=Z.words,re=Z.sigBytes,X=this.blockSize,ce=X*4,ue=re/ce;H?ue=x.ceil(ue):ue=x.max((ue|0)-this._minBufferSize,0);var _e=ue*X,ye=x.min(_e*4,re);if(_e){for(var ie=0;ie<_e;ie+=X)this._doProcessBlock(ne,ie);Y=ne.splice(0,_e),Z.sigBytes-=ye}return new D.init(Y,ye)},clone:function(){var H=I.clone.call(this);return H._data=this._data.clone(),H},_minBufferSize:0});A.Hasher=j.extend({cfg:I.extend(),init:function(H){this.cfg=this.cfg.extend(H),this.reset()},reset:function(){j.reset.call(this),this._doReset()},update:function(H){return this._append(H),this._process(),this},finalize:function(H){H&&this._append(H);var Y=this._doFinalize();return Y},blockSize:16,_createHelper:function(H){return function(Y,Z){return new H.init(Z).finalize(Y)}},_createHmacHelper:function(H){return function(Y,Z){return new U.HMAC.init(H,Z).finalize(Y)}}});var U=B.algo={};return B}(Math);return _})}(core)),core.exports}(function(t,n){(function(_,x){t.exports=x(requireCore())})(commonjsGlobal,function(_){return function(x){var E=_,S=E.lib,C=S.WordArray,T=S.Hasher,B=E.algo,A=[];(function(){for(var F=0;F<64;F++)A[F]=x.abs(x.sin(F+1))*4294967296|0})();var I=B.MD5=T.extend({_doReset:function(){this._hash=new C.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(F,j){for(var U=0;U<16;U++){var H=j+U,Y=F[H];F[H]=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360}var Z=this._hash.words,ne=F[j+0],re=F[j+1],X=F[j+2],ce=F[j+3],ue=F[j+4],_e=F[j+5],ye=F[j+6],ie=F[j+7],W=F[j+8],O=F[j+9],z=F[j+10],J=F[j+11],ee=F[j+12],ae=F[j+13],oe=F[j+14],se=F[j+15],G=Z[0],q=Z[1],te=Z[2],fe=Z[3];G=D(G,q,te,fe,ne,7,A[0]),fe=D(fe,G,q,te,re,12,A[1]),te=D(te,fe,G,q,X,17,A[2]),q=D(q,te,fe,G,ce,22,A[3]),G=D(G,q,te,fe,ue,7,A[4]),fe=D(fe,G,q,te,_e,12,A[5]),te=D(te,fe,G,q,ye,17,A[6]),q=D(q,te,fe,G,ie,22,A[7]),G=D(G,q,te,fe,W,7,A[8]),fe=D(fe,G,q,te,O,12,A[9]),te=D(te,fe,G,q,z,17,A[10]),q=D(q,te,fe,G,J,22,A[11]),G=D(G,q,te,fe,ee,7,A[12]),fe=D(fe,G,q,te,ae,12,A[13]),te=D(te,fe,G,q,oe,17,A[14]),q=D(q,te,fe,G,se,22,A[15]),G=M(G,q,te,fe,re,5,A[16]),fe=M(fe,G,q,te,ye,9,A[17]),te=M(te,fe,G,q,J,14,A[18]),q=M(q,te,fe,G,ne,20,A[19]),G=M(G,q,te,fe,_e,5,A[20]),fe=M(fe,G,q,te,z,9,A[21]),te=M(te,fe,G,q,se,14,A[22]),q=M(q,te,fe,G,ue,20,A[23]),G=M(G,q,te,fe,O,5,A[24]),fe=M(fe,G,q,te,oe,9,A[25]),te=M(te,fe,G,q,ce,14,A[26]),q=M(q,te,fe,G,W,20,A[27]),G=M(G,q,te,fe,ae,5,A[28]),fe=M(fe,G,q,te,X,9,A[29]),te=M(te,fe,G,q,ie,14,A[30]),q=M(q,te,fe,G,ee,20,A[31]),G=V(G,q,te,fe,_e,4,A[32]),fe=V(fe,G,q,te,W,11,A[33]),te=V(te,fe,G,q,J,16,A[34]),q=V(q,te,fe,G,oe,23,A[35]),G=V(G,q,te,fe,re,4,A[36]),fe=V(fe,G,q,te,ue,11,A[37]),te=V(te,fe,G,q,ie,16,A[38]),q=V(q,te,fe,G,z,23,A[39]),G=V(G,q,te,fe,ae,4,A[40]),fe=V(fe,G,q,te,ne,11,A[41]),te=V(te,fe,G,q,ce,16,A[42]),q=V(q,te,fe,G,ye,23,A[43]),G=V(G,q,te,fe,O,4,A[44]),fe=V(fe,G,q,te,ee,11,A[45]),te=V(te,fe,G,q,se,16,A[46]),q=V(q,te,fe,G,X,23,A[47]),G=L(G,q,te,fe,ne,6,A[48]),fe=L(fe,G,q,te,ie,10,A[49]),te=L(te,fe,G,q,oe,15,A[50]),q=L(q,te,fe,G,_e,21,A[51]),G=L(G,q,te,fe,ee,6,A[52]),fe=L(fe,G,q,te,ce,10,A[53]),te=L(te,fe,G,q,z,15,A[54]),q=L(q,te,fe,G,re,21,A[55]),G=L(G,q,te,fe,W,6,A[56]),fe=L(fe,G,q,te,se,10,A[57]),te=L(te,fe,G,q,ye,15,A[58]),q=L(q,te,fe,G,ae,21,A[59]),G=L(G,q,te,fe,ue,6,A[60]),fe=L(fe,G,q,te,J,10,A[61]),te=L(te,fe,G,q,X,15,A[62]),q=L(q,te,fe,G,O,21,A[63]),Z[0]=Z[0]+G|0,Z[1]=Z[1]+q|0,Z[2]=Z[2]+te|0,Z[3]=Z[3]+fe|0},_doFinalize:function(){var F=this._data,j=F.words,U=this._nDataBytes*8,H=F.sigBytes*8;j[H>>>5]|=128<<24-H%32;var Y=x.floor(U/4294967296),Z=U;j[(H+64>>>9<<4)+15]=(Y<<8|Y>>>24)&16711935|(Y<<24|Y>>>8)&4278255360,j[(H+64>>>9<<4)+14]=(Z<<8|Z>>>24)&16711935|(Z<<24|Z>>>8)&4278255360,F.sigBytes=(j.length+1)*4,this._process();for(var ne=this._hash,re=ne.words,X=0;X<4;X++){var ce=re[X];re[X]=(ce<<8|ce>>>24)&16711935|(ce<<24|ce>>>8)&4278255360}return ne},clone:function(){var F=T.clone.call(this);return F._hash=this._hash.clone(),F}});function D(F,j,U,H,Y,Z,ne){var re=F+(j&U|~j&H)+Y+ne;return(re<<Z|re>>>32-Z)+j}function M(F,j,U,H,Y,Z,ne){var re=F+(j&H|U&~H)+Y+ne;return(re<<Z|re>>>32-Z)+j}function V(F,j,U,H,Y,Z,ne){var re=F+(j^U^H)+Y+ne;return(re<<Z|re>>>32-Z)+j}function L(F,j,U,H,Y,Z,ne){var re=F+(U^(j|~H))+Y+ne;return(re<<Z|re>>>32-Z)+j}E.MD5=T._createHelper(I),E.HmacMD5=T._createHmacHelper(I)}(Math),_.MD5})})(md5$1);var md5Exports=md5$1.exports;const md5=getDefaultExportFromCjs(md5Exports);var encBase64={exports:{}};(function(t,n){(function(_,x){t.exports=x(requireCore())})(commonjsGlobal,function(_){return function(){var x=_,E=x.lib,S=E.WordArray,C=x.enc;C.Base64={stringify:function(B){var A=B.words,I=B.sigBytes,D=this._map;B.clamp();for(var M=[],V=0;V<I;V+=3)for(var L=A[V>>>2]>>>24-V%4*8&255,F=A[V+1>>>2]>>>24-(V+1)%4*8&255,j=A[V+2>>>2]>>>24-(V+2)%4*8&255,U=L<<16|F<<8|j,H=0;H<4&&V+H*.75<I;H++)M.push(D.charAt(U>>>6*(3-H)&63));var Y=D.charAt(64);if(Y)for(;M.length%4;)M.push(Y);return M.join("")},parse:function(B){var A=B.length,I=this._map,D=this._reverseMap;if(!D){D=this._reverseMap=[];for(var M=0;M<I.length;M++)D[I.charCodeAt(M)]=M}var V=I.charAt(64);if(V){var L=B.indexOf(V);L!==-1&&(A=L)}return T(B,A,D)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function T(B,A,I){for(var D=[],M=0,V=0;V<A;V++)if(V%4){var L=I[B.charCodeAt(V-1)]<<V%4*2,F=I[B.charCodeAt(V)]>>>6-V%4*2,j=L|F;D[M>>>2]|=j<<24-M%4*8,M++}return S.create(D,M)}}(),_.enc.Base64})})(encBase64);var encBase64Exports=encBase64.exports;const Base64=getDefaultExportFromCjs(encBase64Exports);class CacheSuivi{constructor(){wt(this,"verrou");wt(this,"_cacheSuivi");wt(this,"_cacheRecherche");this.verrou=new Semaphore,this._cacheSuivi={},this._cacheRecherche={}}async suivre({adresseFonction:n,idClient:_,fOriginale:x,args:E,ceciOriginal:S}){const C=Object.entries(E).find(M=>typeof M[1]=="function")?.[0];if(!C)throw new Error("Aucun argument n'est une fonction.");const T=E[C],B=Object.fromEntries(Object.entries(E).filter(M=>typeof M[1]!="function"));if(Object.keys(E).length!==Object.keys(B).length+1)throw new Error("Plus d'un argument pour "+n+" est une fonction : "+JSON.stringify(E));const A=this.gnrerCodeCache({adresseFonction:n,idClient:_,argsClefs:B}),I=v4();if(await this.verrou.acquire(A),this._cacheSuivi[A])this._cacheSuivi[A].requtes[I]=T,Object.keys(this._cacheSuivi[A]).includes("val")&&await T(this._cacheSuivi[A].val);else{this._cacheSuivi[A]={requtes:{[I]:T}};const M=async F=>{if(!this._cacheSuivi[A])return;this._cacheSuivi[A].val=F;const j=Object.values(this._cacheSuivi[A].requtes);await Promise.all(j.map(U=>U(F)))},V={...B,[C]:M},L=await x.apply(S,[V]);this._cacheSuivi[A].fOublier=L}const D=async()=>{await this.oublierSuivi({codeCache:A,idRequte:I})};return this.verrou.release(A),D}async suivreRecherche({adresseFonction:n,nomArgTaille:_,idClient:x,fOriginale:E,args:S,ceciOriginal:C,par:T}){const B=Object.entries(S).find(H=>typeof H[1]=="function")?.[0];if(!B)throw new Error("Aucun argument n'est une fonction.");const A=S[B],I=Object.fromEntries(Object.entries(S).filter(H=>typeof H[1]!="function"));if(Object.keys(S).length!==Object.keys(I).length+1)throw new Error("Plus d'un argument pour "+n+" est une fonction : "+JSON.stringify(S));const D=Object.fromEntries(Object.entries(S).filter(H=>H[0]!==_)),M=S[_];if(M===void 0)throw new Error(`Aucun argument de nom ${_} n'a t pass  la fonction ${n}.`);if(typeof M!="number")throw new Error(`Argument ${_} n'est pas un nombre dans la fonction ${n}.`);const V=this.gnrerCodeCache({adresseFonction:n,idClient:x,argsClefs:D}),L=v4();await this.verrou.acquire(V);const F=H=>{if(!this._cacheRecherche[V])return;this._cacheRecherche[V].val=H;const Y=Object.values(this._cacheRecherche[V].requtes);T==="profondeur"?Y.forEach(Z=>Z.f(H.filter(ne=>ne.profondeur<=Z.taille))):Y.forEach(Z=>Z.f(H.slice(0,Z.taille)))};if(this._cacheRecherche[V]){if(this._cacheRecherche[V].requtes[L]={f:A,taille:M},Object.keys(this._cacheRecherche[V]).includes("val")){const{val:H}=this._cacheRecherche[V];H&&F(H)}}else{this._cacheRecherche[V]={requtes:{[L]:{f:A,taille:M}},taillePrsente:M};const H={...D,[B]:F,[_]:M};if(T==="profondeur"){const{fOublier:Y,fChangerProfondeur:Z}=await E.apply(C,[H]);this._cacheRecherche[V].fs={fOublier:Y,fChangerTaille:Z}}else{const{fOublier:Y,fChangerN:Z}=await E.apply(C,[H]);this._cacheRecherche[V].fs={fOublier:Y,fChangerTaille:Z}}}const j=async()=>{await this.oublierRecherche({codeCache:V,idRequte:L})},U=H=>{const Y=this._cacheRecherche[V].requtes[L].taille;if(H===Y)return;this._cacheRecherche[V].requtes[L].taille=H;const{val:Z}=this._cacheRecherche[V];Z&&F(Z);const ne=Math.max(...Object.values(this._cacheRecherche[V].requtes).map(ce=>ce.taille)),{taillePrsente:re}=this._cacheRecherche[V],{fChangerTaille:X}=this._cacheRecherche[V].fs;ne!==re&&(this._cacheRecherche[V].taillePrsente=ne,X(ne))};return this.verrou.release(V),{fOublier:j,[T==="profondeur"?"fChangerProfondeur":"fChangerN"]:U}}async oublierSuivi({codeCache:n,idRequte:_}){if(await this.verrou.acquire(n),this._cacheSuivi[n]===void 0)return;const{requtes:x,fOublier:E}=this._cacheSuivi[n];delete x[_],Object.keys(x).length||(E&&await E(),delete this._cacheSuivi[n]),this.verrou.release(n)}async oublierRecherche({codeCache:n,idRequte:_}){if(await this.verrou.acquire(n),this._cacheRecherche[n]===void 0)return;const{requtes:x,fs:E}=this._cacheRecherche[n];delete x[_],Object.keys(x).length||(E&&await E.fOublier(),delete this._cacheRecherche[n]),this.verrou.release(n)}gnrerCodeCache({adresseFonction:n,idClient:_,argsClefs:x}){const E=n+"-"+_+"-"+JSON.stringify(x);return Base64.stringify(md5(E))}}const cacheSuivi=(t,n,_)=>envelopper({nom:n,descripteur:_}),cacheRechercheParNRsultats=(t,n,_)=>envelopper({nom:n,descripteur:_,recherche:"nRsultats"}),cacheRechercheParProfondeur=(t,n,_)=>envelopper({nom:n,descripteur:_,recherche:"profondeur"}),envelopper=({nom:t,descripteur:n,recherche:_,nomArgTaille:x})=>{const E=n.value;if(typeof E=="function")n.value=function(...S){if(S.length>1)throw new Error("Args trop longs");const C=this.client?this.client:this;try{return _?(x=x||(_==="profondeur"?"profondeur":"nRsultatsDsirs"),cache.suivreRecherche({adresseFonction:this.constructor.name+"."+t,idClient:C.idCompte,fOriginale:E,args:S[0],ceciOriginal:this,par:_,nomArgTaille:x})):cache.suivre({adresseFonction:this.constructor.name+"."+t,idClient:C.idCompte,fOriginale:E,args:S[0],ceciOriginal:this})}catch(T){throw console.error(`Erreur: ${T}`),T}};else throw new Error("L'objet dcor n'est pas une fonction");return n},cache=new CacheSuivi;var conditions;(function(t){t.ATTR="attribution",t.GAL="partagegal",t.INCL="inclureDroitDauteur",t.CHNG="indiquerChangements",t.SRCE="partagerCodeSource",t.USGR="usagereseau"})(conditions||(conditions={}));var droits;(function(t){t.PRTG="partager",t.ADPT="adapter",t.CMRC="usageComercial",t.PRV="usagePriv",t.BREV="usageBrevets"})(droits||(droits={}));var limitations;(function(t){t.RSP="aucuneResponsabilit",t.GRNT="aucuneGarantie",t.MRCM="marqueCommerce",t.BREV="brevetExclu",t.SOUS="sousLicence"})(limitations||(limitations={}));var catgories;(function(t){t.BD="basesDeDonnes",t.ART="artistique",t.CODE="codeInformatique",t.AUTRE="autre"})(catgories||(catgories={}));const infoLicences={"ODbl-1_0":{droits:[droits.CMRC,droits.PRTG,droits.PRV,droits.ADPT],conditions:[conditions.ATTR,conditions.GAL,conditions.INCL],limitations:[limitations.RSP,limitations.BREV,limitations.MRCM,limitations.GRNT],catgorie:catgories.BD},"ODC-BY-1_0":{droits:[droits.CMRC,droits.PRTG,droits.PRV,droits.ADPT],conditions:[conditions.ATTR,conditions.INCL],limitations:[limitations.RSP,limitations.GRNT,limitations.MRCM,limitations.BREV],catgorie:catgories.BD},PDDL:{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[],limitations:[limitations.RSP,limitations.GRNT,limitations.MRCM,limitations.BREV],catgorie:catgories.BD},"rvca-open":{droits:[droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG],conditions:[conditions.INCL,conditions.ATTR],limitations:[limitations.SOUS,limitations.RSP],catgorie:catgories.BD,spcialise:!0},"CC-BY-SA-4_0":{droits:[droits.PRTG,droits.ADPT,droits.CMRC,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.GAL],limitations:[limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT],catgorie:catgories.ART},"CC-BY-4_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[conditions.ATTR,conditions.CHNG],limitations:[limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT],catgorie:catgories.ART},"CC-0-1_0":{droits:[droits.PRTG,droits.ADPT,droits.CMRC,droits.PRV],conditions:[],limitations:[limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT],catgorie:catgories.ART},"0bsd":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[],limitations:[],catgorie:catgories.CODE},"afl-3_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,droits.BREV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.MRCM,limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"agpl-3_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.USGR,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"apache-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.MRCM,limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"artistic-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},"bsd-2-clause":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"bsd-3-clause-clear":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.BREV,limitations.GRNT],catgorie:catgories.CODE},"bsd-3-clause":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"bsd-4-clause":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"bsl-1_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"cecill-2_1":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,droits.BREV],conditions:[conditions.INCL,conditions.SRCE,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"ecl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.BREV,limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"epl-1_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"epl-2_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"eupl-1_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.GAL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},"eupl-1_2":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.GAL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},"gpl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"gpl-3_0":{droits:[droits.CMRC,droits.ADPT,droits.PRV,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},isc:{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"lgpl-2_1":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"lgpl-3_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"lppl-1_3c":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"mit-0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},mit:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"mpl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.GAL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},"ms-pl":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.GRNT,limitations.MRCM],catgorie:catgories.CODE},"ms-rl":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.GAL],limitations:[limitations.GRNT,limitations.MRCM],catgorie:catgories.CODE},"mulanpsl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catgorie:catgories.CODE},ncsa:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"osl-3_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.GAL],limitations:[limitations.MRCM,limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},postgresql:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},unlicence:{droits:[droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG],conditions:[],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"upl-1_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},vim:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.GAL],limitations:[],catgorie:catgories.CODE},wtfpl:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[],limitations:[],catgorie:catgories.CODE},zlib:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.CODE},"ofl-1_1":{droits:[droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG],conditions:[conditions.INCL,conditions.GAL],limitations:[limitations.RSP,limitations.GRNT],catgorie:catgories.AUTRE}};class Licences{constructor({client:n}){wt(this,"client");wt(this,"vnements");wt(this,"prt");wt(this,"perroquet");this.client=n,this.prt=!1,this.vnements=new EventEmitter$5,this.initialiser()}async initialiser(){this.prt=!0,this.vnements.emit("prt")}async attendrePrt(){if(!this.prt)return new Promise(n=>{const _=()=>{n(),this.vnements.off("prt",_)};this.vnements.on("prt",_)})}async suivreLicences({f:n}){if(await n(infoLicences),await this.attendrePrt(),this.perroquet){const _=async x=>await n(Object.fromEntries(x.map(E=>[E.code,E])));return await this.perroquet._({:_,:""})}return faisRien}async suggrerLicence({code:n,infoLicence:_}){await this.attendrePrt(),this.perroquet&&await this.perroquet.({:{code:n,..._}})}async effacerSuggestionLicence({empreinte:n}){await this.attendrePrt(),this.perroquet&&await this.perroquet._({:n})}async suivreSuggestionsLicences({f:n}){return await this.attendrePrt(),this.perroquet?await this.perroquet._({:n}):{fOublier:faisRien,fChangerProfondeur:faisRien}}async approuverLicence({suggestion:n}){if(await this.attendrePrt(),this.perroquet)return await this.perroquet.({:n})}}__decorate([cacheSuivi],Licences.prototype,"suivreLicences",null);var lib={},indexedDbReadStream={},__extends$2=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,_){n.__proto__=_}||function(n,_){for(var x in _)_.hasOwnProperty(x)&&(n[x]=_[x])};return function(n,_){t(n,_);function x(){this.constructor=n}n.prototype=_===null?Object.create(_):(x.prototype=_.prototype,new x)}}();Object.defineProperty(indexedDbReadStream,"__esModule",{value:!0});var stream_1$1=require$$0$1,IndexedDbReadStream=function(t){__extends$2(n,t);function n(_){var x=t.call(this,{objectMode:!0})||this,E=indexedDB.open(_.databaseName,_.databaseVersion);return E.addEventListener("success",function(S){var C;try{var T=S.target.result.transaction([_.objectStoreName]).objectStore(_.objectStoreName);_.indexName&&(T=T.index(_.indexName)),C=T.openCursor(_.range,_.cursorDirection)}catch(B){return x.emit("error",B)}C.addEventListener("success",function(B){if(B.target.result)return x.push(B.target.result.value),B.target.result.continue();x.push(null)}),C.addEventListener("error",function(B){x.emit("error",B.target.result)})}),E.addEventListener("error",function(S){x.emit("error",S.target.result)}),x}return n.prototype._read=function(){},n}(stream_1$1.Readable);indexedDbReadStream.IndexedDbReadStream=IndexedDbReadStream;var indexedDbWriteStream={},__extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,_){n.__proto__=_}||function(n,_){for(var x in _)_.hasOwnProperty(x)&&(n[x]=_[x])};return function(n,_){t(n,_);function x(){this.constructor=n}n.prototype=_===null?Object.create(_):(x.prototype=_.prototype,new x)}}();Object.defineProperty(indexedDbWriteStream,"__esModule",{value:!0});var stream_1=require$$0$1,IndexedDbWriteStream=function(t){__extends$1(n,t);function n(_){var x=t.call(this,{objectMode:!0})||this;return x.options=_,x}return n.prototype._write=function(_,x,E){var S=this,C=indexedDB.open(this.options.databaseName,this.options.databaseVersion);C.addEventListener("success",function(T){var B;try{B=T.target.result.transaction([S.options.objectStoreName],"readwrite").objectStore(S.options.objectStoreName).add(_)}catch(A){S.emit("error",A);return}B.addEventListener("success",function(){E()}),B.addEventListener("error",function(A){S.emit("error",A.target.error)})}),C.addEventListener("error",function(T){S.emit("error",T.target.error)})},n}(stream_1.Writable);indexedDbWriteStream.IndexedDbWriteStream=IndexedDbWriteStream;(function(t){function n(_){for(var x in _)t.hasOwnProperty(x)||(t[x]=_[x])}Object.defineProperty(t,"__esModule",{value:!0}),n(indexedDbReadStream),n(indexedDbWriteStream)})(lib);const indexedDbStream=getDefaultExportFromCjs(lib);class pingles{constructor({client:n}){wt(this,"client");wt(this,"requtes");wt(this,"fsOublier");wt(this,"vnements");this.client=n,this.requtes=[],this.fsOublier={},this.vnements=new eventsExports.EventEmitter}async pinglerBd({id:n,rcursif:_=!1,fichiers:x=!0}){await this.directementpingle({id:n})||await this._pingler({id:n,rcursif:_,fichiers:x})}async dspinglerBd({id:n}){await Promise.all(this.requtes.filter(x=>x.id===n).map(async x=>await x.fOublier()));const _=this.requtes.filter(x=>x.parent===n);this.requtes=this.requtes.filter(x=>x.id!==n),this.requtes=this.requtes.filter(x=>x.parent!==n),await Promise.all(_.map(async x=>{this.requtes.filter(E=>E.id===x.id&&E.parent!==n).length||await this.dspinglerBd({id:x.id})}))}async pingle({id:n}){return this.requtes.some(_=>_.id===n)}async pingleParParent({id:n,parent:_}){return this.requtes.some(x=>x.id===n&&x.parent===_)}async directementpingle({id:n}){return await this.pingleParParent({id:n})}async pingles(){return new Set(this.requtes.map(n=>n.id))}async suivrepingles({f:n}){const _=async()=>{const x=await this.pingles();return await n(x)};return this.vnements.on("changement pingles",_),async()=>{this.vnements.off("changement pingles",_)}}async _pingler({id:n,rcursif:_,fichiers:x,parent:E}){if(await this.pingleParParent({id:n,parent:E}))return;const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:n});if(this.requtes.push({id:n,parent:E,fOublier:C}),this.vnements.emit("changement pingles"),_){const T=async B=>{let A=[];typeof B=="object"?(A=Object.values(B).filter(D=>typeof D=="string"),A.push(...Object.keys(B).filter(D=>typeof D=="string"))):Array.isArray(B)?A=B:typeof B=="string"&&(A=[B]);const I=A.filter(D=>adresseOrbiteValide(D));x&&A.filter(M=>cidValide(M)&&!I.includes(M)).forEach(M=>{this.client.sfip.pin.add(M);const V=async()=>{try{await this.client.sfip.pin.rm(M)}catch{}};this.requtes.push({id:M,parent:n,fOublier:V}),this.vnements.emit("changement pingles")}),await Promise.all(I.map(async D=>await this._pingler({id:D,rcursif:_,fichiers:x,parent:n})))};if(S.type==="keyvalue"){const B=await this.client.suivreBdDic({id:n,f:T});this.fsOublier[n]=B}else if(S.type==="feed"){const B=await this.client.suivreBdListe({id:n,f:T});this.fsOublier[n]=B}}}async toutDspingler(){const n=await this.pingles();await Promise.all([...n].map(async _=>{await this.dspinglerBd({id:_})}))}async fermer(){await Promise.all(Object.values(this.fsOublier).map(n=>n()))}}var TYPES_STATUT;(function(t){t.INTERNE="interne",t.BTA="bta",t.ACTIVE="active",t.OBSOLTE="obsolte"})(TYPES_STATUT||(TYPES_STATUT={}));const schmaStructureBdNoms={type:"object",additionalProperties:{type:"string"},required:[]},schmaStructureBdMtadonnes={type:"object",additionalProperties:!0,required:[]};class ComposanteClient{constructor({client:n,clef:_,typeBd:x}){wt(this,"client");wt(this,"clef");wt(this,"typeBd");this.client=n,this.clef=_,this.typeBd=x}async obtIdBd(){const n=await this.client.obtIdBd({nom:this.clef,racine:this.client.bdCompte,type:this.typeBd});if(!n)throw new Error("Mal initialis");return n}}class ComposanteClientDic extends ComposanteClient{constructor({client:_,clef:x,schmaBdPrincipale:E}){super({client:_,clef:x,typeBd:"kvstore"});wt(this,"schmaBdPrincipale");this.schmaBdPrincipale=E}async obtBd(){const _=await this.obtIdBd();if(!_)throw new Error("Initialisation "+this.clef);return await this.client.ouvrirBd({id:_,type:"keyvalue",schma:this.schmaBdPrincipale})}async suivreBdPrincipale({idCompte:_,f:x}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:E})=>await this.suivreIdBd({f:E,idCompte:_}),f:ignorerNonDfinis(x),fSuivre:async({id:E,fSuivreBd:S})=>await this.client.suivreBdDic({id:E,schma:this.schmaBdPrincipale,f:S})})}async suivreSousBdDic({idCompte:_,clef:x,schma:E,f:S}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:C})=>await this.suivreIdBd({f:C,idCompte:_}),f:ignorerNonDfinis(S),fSuivre:async({id:C,fSuivreBd:T})=>await this.client.suivreBdDicDeClef({id:C,clef:x,schma:E,f:T})})}async suivreSousBdListe({idCompte:_,clef:x,schma:E,f:S}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:C})=>await this.suivreIdBd({f:C,idCompte:_}),f:ignorerNonDfinis(S),fSuivre:async({id:C,fSuivreBd:T})=>await this.client.suivreBdListeDeClef({id:C,clef:x,f:T,schma:E,renvoyerValeur:!0})})}async suivreIdBd({f:_,idCompte:x}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:E})=>x?(await E(x),faisRien):await this.client.suivreIdCompte({f:E}),f:ignorerNonDfinis(_),fSuivre:async({id:E,fSuivreBd:S})=>await this.client.suivreBdDic({id:E,f:async C=>{const T=C[this.clef];return await S(T)}})})}}__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreBdPrincipale",null);__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreSousBdDic",null);__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreSousBdListe",null);__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreIdBd",null);class ComposanteClientListe extends ComposanteClient{constructor({client:_,clef:x,schmaBdPrincipale:E}){super({client:_,clef:x,typeBd:"feed"});wt(this,"schmaBdPrincipale");this.schmaBdPrincipale=E}async obtBd(){const _=await this.obtIdBd();if(!_)throw new Error("Initialisation "+this.clef);return await this.client.ouvrirBd({id:_,type:"feed",schma:this.schmaBdPrincipale})}async suivreBdPrincipale({idCompte:_,f:x}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:E})=>await this.suivreIdBd({f:E,idCompte:_}),f:ignorerNonDfinis(x),fSuivre:async({id:E,fSuivreBd:S})=>await this.client.suivreBdListe({id:E,f:S,schma:this.schmaBdPrincipale,renvoyerValeur:!0})})}async suivreBdPrincipaleBrute({idCompte:_,f:x}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:E})=>await this.suivreIdBd({f:E,idCompte:_}),f:ignorerNonDfinis(x),fSuivre:async({id:E,fSuivreBd:S})=>await this.client.suivreBdListe({id:E,f:S,schma:this.schmaBdPrincipale,renvoyerValeur:!1})})}async suivreIdBd({f:_,idCompte:x}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:E})=>x?(await E(x),faisRien):await this.client.suivreIdCompte({f:E}),f:ignorerNonDfinis(_),fSuivre:async({id:E,fSuivreBd:S})=>await this.client.suivreBd({id:E,type:"keyvalue",f:async()=>{const C=await this.client.obtIdBd({nom:this.clef,racine:E,type:"feed"});return await S(C)}})})}}__decorate([cacheSuivi],ComposanteClientListe.prototype,"suivreBdPrincipale",null);__decorate([cacheSuivi],ComposanteClientListe.prototype,"suivreBdPrincipaleBrute",null);__decorate([cacheSuivi],ComposanteClientListe.prototype,"suivreIdBd",null);const MAX_TAILLE_IMAGE$3=500*1e3,MAX_TAILLE_IMAGE_VIS$3=1500*1e3,schmaStructureBdProfil={type:"object",properties:{image:{type:"string",nullable:!0}},required:[]},schmaContactProfil={type:"object",properties:{type:{type:"string"},contact:{type:"string"}},required:["contact","type"]};class Profil extends ComposanteClientDic{constructor({client:n}){super({client:n,clef:"profil",schmaBdPrincipale:schmaStructureBdProfil})}async pingler(){const n=await this.obtIdBd();await this.client.pingles?.pinglerBd({id:n,rcursif:!0,fichiers:!0})}async suivreCourriel({f:n,idCompte:_}){return await this.suivreContacts({idCompte:_,f:async x=>await n(x.find(E=>E.type=="courriel")?.contact||null)})}async sauvegarderCourriel({courriel:n}){await this.sauvegarderContact({type:"courriel",contact:n})}async effacerCourriel(){await this.effacerContact({type:"courriel"})}async suivreContacts({f:n,idCompte:_}){return await this.suivreSousBdListe({idCompte:_,clef:"contacts",schma:schmaContactProfil,f:n})}async sauvegarderContact({type:n,contact:_}){const x=await this.obtIdBd(),E=await this.client.obtIdBd({nom:"contacts",racine:x,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"feed",schma:schmaContactProfil});await S.add({type:n,contact:_}),await C()}async effacerContact({type:n,contact:_}){const x=await this.obtIdBd(),E=await this.client.obtIdBd({nom:"contacts",racine:x,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${x}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"feed",schma:schmaContactProfil});this.client.effacerlmentsDeBdListe({bd:S,lment:T=>T.payload.value.type===n&&(_===void 0||T.payload.value.contact===_)}),await C()}async suivreNoms({f:n,idCompte:_}){return await this.suivreSousBdDic({idCompte:_,clef:"noms",schma:schmaStructureBdNoms,f:n})}async sauvegarderNom({langue:n,nom:_}){return await this.sauvegarderNoms({noms:{[n]:_}})}async sauvegarderNoms({noms:n}){const _=await this.obtIdBd(),x=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"kvstore",schma:schmaStructureBdNoms});for(const[C,T]of Object.entries(n))await E.set(C,T);await S()}async effacerNom({langue:n}){const _=await this.obtIdBd(),x=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"kvstore",schma:schmaStructureBdNoms});await E.del(n),await S()}async sauvegarderImage({image:n}){let _;if(n.size!==void 0){if(n.size>MAX_TAILLE_IMAGE$3)throw new Error("Taille maximale excde");_=await n.arrayBuffer()}else _=n;const x=await this.client.ajouterSFIP({fichier:_}),{bd:E,fOublier:S}=await this.obtBd();await E.set("image",x),await S()}async effacerImage(){const{bd:n,fOublier:_}=await this.obtBd();await n.del("image"),await _()}async suivreImage({f:n,idCompte:_}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:x})=>await this.suivreIdBd({f:x,idCompte:_}),f:ignorerNonDfinis(n),fSuivre:async({id:x,fSuivreBd:E})=>await this.client.suivreBd({id:x,type:"keyvalue",schma:schmaStructureBdProfil,f:async S=>{const C=S.get("image");if(C){const T=await this.client.obtFichierSFIP({id:C,max:MAX_TAILLE_IMAGE_VIS$3});return await E(T)}else return await E(null)}})})}}__decorate([cacheSuivi],Profil.prototype,"suivreCourriel",null);__decorate([cacheSuivi],Profil.prototype,"suivreContacts",null);__decorate([cacheSuivi],Profil.prototype,"suivreNoms",null);__decorate([cacheSuivi],Profil.prototype,"suivreImage",null);async function toBuffer(t){let n=new Uint8Array(0);for await(const _ of t)n=concat$5([n,_],n.length+_.length);return n}const schmaStructureBdBd={type:"object",properties:{type:{type:"string"},mtadonnes:{type:"string",nullable:!0},licence:{type:"string"},licenceContenu:{type:"string",nullable:!0},image:{type:"string",nullable:!0},noms:{type:"string"},descriptions:{type:"string"},tableaux:{type:"string"},motsClefs:{type:"string"},nues:{type:"string"},statut:{type:"object",properties:{statut:{type:"string"},idNouvelle:{type:"string",nullable:!0}},required:["statut"]},copiDe:{type:"object",properties:{id:{type:"string"}},required:["id"]}},required:["type","licence","noms","descriptions","tableaux","motsClefs","nues","statut","copiDe"]},schmaInfoTableau={type:"object",properties:{clef:{type:"string"},position:{type:"integer"}},required:["clef","position"]},schmaBdTableauxDeBd={type:"object",additionalProperties:schmaInfoTableau,required:[]},schmaBdPrincipale$4={type:"string"},MAX_TAILLE_IMAGE$2=500*1e3,MAX_TAILLE_IMAGE_VIS$2=1500*1e3;class BDs extends ComposanteClientListe{constructor({client:_}){super({client:_,clef:"bds",schmaBdPrincipale:schmaBdPrincipale$4});wt(this,"verrouBdUnique");this.verrouBdUnique=new Semaphore}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async suivreBds({f:_,idCompte:x}){return await this.suivreBdPrincipale({idCompte:x,f:_})}async crerBd({licence:_,licenceContenu:x,ajouter:E=!0}){const S=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:{address:void 0,premierMod:this.client.bdCompte.id}}),{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"kvstore"});await C.set("type","bd"),await C.set("licence",_),x&&await C.set("licenceContenu",x);const A={address:C.access.address},I=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:A});await C.set("mtadonnes",I);const D=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:A});await C.set("noms",D);const M=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:A});await C.set("descriptions",M);const V=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:A});await C.set("tableaux",V);const L=await this.client.crerBdIndpendante({type:"feed",optionsAccs:A});await C.set("motsClefs",L);const F=await this.client.crerBdIndpendante({type:"feed",optionsAccs:A});if(await C.set("nues",F),await C.set("statut",{statut:TYPES_STATUT.ACTIVE}),E){const{bd:j,fOublier:U}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await j.add(S),U()}return await T(),S}async ajouterMesBds({idBd:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await x.add(_),await E()}async enleverDeMesBds({idBd:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await this.client.effacerlmentDeBdListe({bd:x,lment:_}),await E()}async copierBd({idBd:_,ajouterMesBds:x=!0,copierDonnes:E=!0}){const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:_,type:"kvstore"}),T=S.get("licence"),B=S.get("licenceContenu");if(!T)throw new Error(`Aucune licence trouve sur la BD source ${_}.`);const A=await this.crerBd({licence:T,licenceContenu:B,ajouter:x}),{bd:I,fOublier:D}=await this.client.ouvrirBd({id:A,type:"kvstore"}),M=S.get("mtadonnes");if(M){const{bd:X,fOublier:ce}=await this.client.ouvrirBd({id:M,type:"kvstore"}),ue=ClientConstellation$1.obtObjetdeBdDic({bd:X});await ce(),await this.sauvegarderMtadonnesBd({idBd:A,mtadonnes:ue})}const V=S.get("noms");if(V){const{bd:X,fOublier:ce}=await this.client.ouvrirBd({id:V,type:"kvstore"}),ue=ClientConstellation$1.obtObjetdeBdDic({bd:X});await ce(),await this.sauvegarderNomsBd({idBd:A,noms:ue})}const L=S.get("descriptions");if(L){const{bd:X,fOublier:ce}=await this.client.ouvrirBd({id:L,type:"kvstore"}),ue=ClientConstellation$1.obtObjetdeBdDic({bd:X});await ce(),await this.sauvegarderDescriptionsBd({idBd:A,descriptions:ue})}const F=S.get("motsClefs");if(F){const{bd:X,fOublier:ce}=await this.client.ouvrirBd({id:F,type:"feed"}),ue=ClientConstellation$1.obtlmentsDeBdListe({bd:X});await ce(),await this.ajouterMotsClefsBd({idBd:A,idsMotsClefs:ue})}const j=S.get("nues");if(j){const{bd:X,fOublier:ce}=await this.client.ouvrirBd({id:j,type:"feed"}),ue=ClientConstellation$1.obtlmentsDeBdListe({bd:X});await ce(),await this.rejoindreNues({idBd:A,idsNues:ue})}const U=S.get("tableaux"),H=I.get("tableaux");if(!H)throw new Error("Erreur d'initialisation.");const{bd:Y,fOublier:Z}=await this.client.ouvrirBd({id:H,type:"kvstore"});if(U){const{bd:X,fOublier:ce}=await this.client.ouvrirBd({id:U,type:"kvstore"}),ue=ClientConstellation$1.obtObjetdeBdDic({bd:X});await ce();for(const _e of Object.keys(ue)){const ye=await this.client.tableaux.copierTableau({id:_e,idBd:A,copierDonnes:E});await Y.set(ye,ue[_e])}}const ne=S.get("statut")||{statut:TYPES_STATUT.ACTIVE};await I.set("statut",ne);const re=S.get("image");return re&&await I.set("image",re),await I.set("copiDe",{id:_}),await Promise.all([C(),Z(),D()]),A}async crerBdDeSchma({schma:_,ajouter:x=!0}){const{tableaux:E,motsClefs:S,nues:C,licence:T,licenceContenu:B,statut:A}=_,I=await this.crerBd({licence:T,licenceContenu:B,ajouter:!1});S&&await this.ajouterMotsClefsBd({idBd:I,idsMotsClefs:S}),C&&await this.rejoindreNues({idBd:I,idsNues:C}),A&&await this.changerStatutBd({idBd:I,statut:A});for(const D of E){const{cols:M,clef:V}=D,L=await this.ajouterTableauBd({idBd:I,clefTableau:V});for(const F of M){const{idColonne:j,idVariable:U,index:H,optionnel:Y}=F;if(await this.client.tableaux.ajouterColonneTableau({idTableau:L,idVariable:U,idColonne:j}),H&&await this.client.tableaux.changerColIndex({idTableau:L,idColonne:j,val:!0}),!Y){const Z={typeRgle:"existe",dtails:{}};await this.client.tableaux.ajouterRgleTableau({idTableau:L,idColonne:j,rgle:Z})}}}return x&&await this.ajouterMesBds({idBd:I}),I}async suivreParent({idBd:_,f:x}){return await this.client.suivreBd({id:_,f:async E=>{const S=E.get("copiDe");await x(S)},type:"keyvalue",schma:schmaStructureBdBd})}async suivreNuesBd({idBd:_,f:x}){return await this.client.suivreBdListeDeClef({id:_,clef:"nues",schma:{type:"string"},f:x})}async rechercherBdsParMotsClefs({motsClefs:_,f:x,idCompte:E}){const S=async T=>await this.suivreBds({f:T,idCompte:E}),C=async(T,B)=>{const A=I=>{const D=_.every(M=>I.includes(M));B(D)};return await this.suivreMotsClefsBd({idBd:T,f:A})};return await this.client.suivreBdsSelonCondition({fListe:S,fCondition:C,f:x})}async rechercherBdsParNue({idNue:_,f:x,idCompte:E}){const S=async T=>await this.suivreBds({f:T,idCompte:E}),C=async(T,B)=>{const A=I=>{B(!!I&&I.includes(_))};return await this.suivreNuesBd({idBd:T,f:A})};return await this.client.suivreBdsSelonCondition({fListe:S,fCondition:C,f:x})}async combinerBds({idBdBase:_,idBd2:x}){const E=async T=>await uneFois(async B=>await this.suivreTableauxBd({idBd:T,f:B})),S=await E(_),C=await E(x);for(const T of C){const{id:B,clef:A}=T;if(A){const I=S.find(D=>D.clef===A)?.id;I&&await this.client.tableaux.combinerDonnes({idTableauBase:I,idTableau2:B})}}}async suivreIdTableauParClef({idBd:_,clef:x,f:E}){const S=async C=>{const T=C.find(B=>B.clef===x);await E(T?.id)};return await this.suivreTableauxBd({idBd:_,f:S})}async suivreBdUnique({schma:_,idNueUnique:x,f:E}){const S="bdUnique: "+x,C=new Set,T=async A=>{let I;await this.verrouBdUnique.acquire(x);const D=await this.client.obtDeStockageLocal({clef:S});switch(A.length){case 0:{D?I=D:(I=await this.crerBdDeSchma({schma:_}),await this.client.sauvegarderAuStockageLocal({clef:S,val:I}));break}case 1:{I=A[0],await this.client.sauvegarderAuStockageLocal({clef:S,val:I}),D&&I!==D&&(await this.combinerBds({idBdBase:I,idBd2:D}),await this.effacerBd({idBd:D}));break}default:{D&&(A=[...new Set([...A,D])]),I=A.sort()[0],await this.client.sauvegarderAuStockageLocal({clef:S,val:I});for(const M of A.slice(1))C.has(M)||(C.add(M),await this.combinerBds({idBdBase:I,idBd2:M}),await this.effacerBd({idBd:M}));break}}this.verrouBdUnique.release(x),await E(I)};return await this.rechercherBdsParNue({idNue:x,f:T})}async suivreIdTableauParClefDeBdUnique({schmaBd:_,idNueUnique:x,clefTableau:E,f:S}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:B})=>await this.suivreBdUnique({schma:_,idNueUnique:x,f:B}),f:S,fSuivre:async({id:B,fSuivreBd:A})=>await this.suivreIdTableauParClef({idBd:B,clef:E,f:A})})}async suivreDonnesDeTableauUnique({schmaBd:_,idNueUnique:x,clefTableau:E,f:S}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:A})=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:_,idNueUnique:x,clefTableau:E,f:async I=>{I&&await A(I)}}),f:async A=>await S(A||[]),fSuivre:async({id:A,fSuivreBd:I})=>await this.client.tableaux.suivreDonnes({idTableau:A,f:I})})}async ajouterlmentTableauUnique({schmaBd:_,idNueUnique:x,clefTableau:E,vals:S}){const C=await uneFois(async T=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:_,idNueUnique:x,clefTableau:E,f:B=>{B&&T(B)}}),T=>!!T);return await this.client.tableaux.ajouterlment({idTableau:C,vals:S})}async modifierlmentDeTableauUnique({vals:_,schmaBd:x,idNueUnique:E,clefTableau:S,empreintePrcdente:C}){const T=await uneFois(async B=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:x,idNueUnique:E,clefTableau:S,f:A=>{A&&B(A)}}),B=>!!B);return await this.client.tableaux.modifierlment({idTableau:T,vals:_,empreintePrcdente:C})}async effacerlmentDeTableauUnique({schmaBd:_,idNueUnique:x,clefTableau:E,empreinte:S}){const C=await uneFois(async T=>await this.suivreIdTableauParClefDeBdUnique({schmaBd:_,idNueUnique:x,clefTableau:E,f:B=>{B&&T(B)}}),T=>!!T);return await this.client.tableaux.effacerlment({idTableau:C,empreinte:S})}async suivreDonnesDeTableauParClef({idBd:_,clefTableau:x,f:E}){const S=await uneFois(async C=>await this.suivreIdTableauParClef({idBd:_,clef:x,f:ignorerNonDfinis(C)}),C=>!!C);return await this.client.tableaux.suivreDonnes({idTableau:S,f:E})}async ajouterlmentTableauParClef({idBd:_,clefTableau:x,vals:E}){const S=await uneFois(async C=>await this.suivreIdTableauParClef({idBd:_,clef:x,f:ignorerNonDfinis(C)}));return await this.client.tableaux.ajouterlment({idTableau:S,vals:E})}async modifierlmentDeTableauParClef({idBd:_,clefTableau:x,empreintelment:E,vals:S}){const C=await uneFois(async T=>await this.suivreIdTableauParClef({idBd:_,clef:x,f:ignorerNonDfinis(T)}));return await this.client.tableaux.modifierlment({idTableau:C,vals:S,empreintePrcdente:E})}async effacerlmentDeTableauParClef({idBd:_,clefTableau:x,empreintelment:E}){const S=await uneFois(async C=>await this.suivreIdTableauParClef({idBd:_,clef:x,f:ignorerNonDfinis(C)}));this.client.tableaux.effacerlment({idTableau:S,empreinte:E})}async sauvegarderMtadonnesBd({idBd:_,mtadonnes:x}){const E=await this.client.obtIdBd({nom:"mtadonnes",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore"});for(const T in x)await S.set(T,x[T]);await C()}async sauvegarderMtadonneBd({idBd:_,clef:x,mtadonne:E}){const S=await this.client.obtIdBd({nom:"mtadonnes",racine:_,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"kvstore"});await C.set(x,E),await T()}async effacerMtadonneBd({idBd:_,clef:x}){const E=await this.client.obtIdBd({nom:"mtadonnes",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore"});await S.del(x),await C()}async suivreMtadonnesBd({idBd:_,f:x}){return await this.client.suivreBdDicDeClef({id:_,clef:"mtadonnes",schma:schmaStructureBdMtadonnes,f:x})}async sauvegarderNomsBd({idBd:_,noms:x}){const E=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore"});for(const T in x)await S.set(T,x[T]);await C()}async sauvegarderNomBd({idBd:_,langue:x,nom:E}){const S=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"kvstore"});await C.set(x,E),await T()}async effacerNomBd({idBd:_,langue:x}){const E=await this.client.obtIdBd({nom:"noms",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore"});await S.del(x),await C()}async sauvegarderDescriptionsBd({idBd:_,descriptions:x}){const E=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore"});for(const T in x)await S.set(T,x[T]);await C()}async sauvegarderDescriptionBd({idBd:_,langue:x,description:E}){const S=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"kvstore"});if(!S)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"kvstore"});await C.set(x,E),await T()}async effacerDescriptionBd({idBd:_,langue:x}){const E=await this.client.obtIdBd({nom:"descriptions",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue"});await S.del(x),await C()}async changerLicenceBd({idBd:_,licence:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue"});await E.set("licence",x),await S()}async changerLicenceContenuBd({idBd:_,licenceContenu:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue"});x?await E.set("licenceContenu",x):await E.del("licenceContenu"),await S()}async ajouterMotsClefsBd({idBd:_,idsMotsClefs:x}){Array.isArray(x)||(x=[x]);const E=await this.client.obtIdBd({nom:"motsClefs",racine:_,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"feed"});for(const T of x)ClientConstellation$1.obtlmentsDeBdListe({bd:S}).includes(T)||await S.add(T);await C()}async effacerMotClefBd({idBd:_,idMotClef:x}){const E=await this.client.obtIdBd({nom:"motsClefs",racine:_,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"feed"});await this.client.effacerlmentDeBdListe({bd:S,lment:x}),await C()}async rejoindreNues({idBd:_,idsNues:x}){Array.isArray(x)||(x=[x]);const E=await this.client.obtIdBd({nom:"nues",racine:_,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"feed"});for(const T of x)ClientConstellation$1.obtlmentsDeBdListe({bd:S}).includes(T)||await S.add(T);await C()}async quitterNue({idBd:_,idNue:x}){const E=await this.client.obtIdBd({nom:"nue",racine:_,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"feed"});await this.client.effacerlmentDeBdListe({bd:S,lment:x}),await C()}async ajouterTableauBd({idBd:_,clefTableau:x}){const E=await this.client.obtIdBd({nom:"tableaux",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue"});x=x||v4();const T=await this.client.tableaux.crerTableau({idBd:_});return await S.set(T,{position:Object.keys(S.all).length,clef:x}),await C(),T}async effacerTableauBd({idBd:_,idTableau:x}){const E=await this.client.obtIdBd({nom:"tableaux",racine:_,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${_}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue"});await S.del(x),await C(),await this.client.tableaux.effacerTableau({idTableau:x})}async spcifierClefTableau({idBd:_,idTableau:x,clef:E}){const S=await this.client.obtIdBd({nom:"tableaux",racine:_,type:"kvstore"});if(!S)throw new Error("Id Bd Tableau non obtenable.");const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"keyvalue"}),B=C.get(x);B&&(B.clef=E,C.set(x,B)),await T()}async changerStatutBd({idBd:_,statut:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue"});E.set("statut",x),await S()}async suivreStatutBd({idBd:_,f:x}){return await this.client.suivreBdDic({id:_,schma:schmaStructureBdBd,f:async E=>{if(E.statut)return await x(E.statut)}})}async marquerObsolte({idBd:_,idNouvelle:x}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:_,type:"keyvalue"});E.set("statut",{statut:TYPES_STATUT.OBSOLTE,idNouvelle:x}),await S()}async marquerActive({idBd:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue"});x.set("statut",{statut:TYPES_STATUT.ACTIVE}),await E()}async marquerBta({idBd:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue"});x.set("statut",{statut:TYPES_STATUT.BTA}),await E()}async marquerInterne({idBd:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue"});x.set("statut",{statut:TYPES_STATUT.INTERNE}),await E()}async suivreLicenceBd({idBd:_,f:x}){return await this.client.suivreBd({id:_,type:"keyvalue",schma:schmaStructureBdBd,f:async E=>{const S=E.get("licence");S&&await x(S)}})}async suivreLicenceContenuBd({idBd:_,f:x}){return await this.client.suivreBd({id:_,type:"keyvalue",schma:schmaStructureBdBd,f:async E=>{const S=E.get("licenceContenu");await x(S)}})}async inviterAuteur({idBd:_,idCompteAuteur:x,rle:E}){await this.client.donnerAccs({idBd:_,identit:x,rle:E})}async sauvegarderImage({idBd:_,image:x}){let E;if(x.size!==void 0){if(x.size>MAX_TAILLE_IMAGE$2)throw new Error("Taille maximale excde");E=await x.arrayBuffer()}else E=x;const S=await this.client.ajouterSFIP({fichier:E}),{bd:C,fOublier:T}=await this.client.ouvrirBd({id:_,type:"keyvalue"});await C.set("image",S),await T()}async effacerImage({idBd:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"kvstore"});await x.del("image"),await E()}async suivreImage({idBd:_,f:x}){return await this.client.suivreBd({id:_,type:"keyvalue",schma:schmaStructureBdBd,f:async E=>{const S=E.get("image");if(!S)await x(null);else{const C=await this.client.obtFichierSFIP({id:S,max:MAX_TAILLE_IMAGE_VIS$2});await x(C)}}})}async suivreNomsBd({idBd:_,f:x}){return await this.client.suivreBdDicDeClef({id:_,clef:"noms",schma:schmaStructureBdNoms,f:x})}async suivreDescriptionsBd({idBd:_,f:x}){return await this.client.suivreBdDicDeClef({id:_,clef:"descriptions",schma:schmaStructureBdNoms,f:x})}async suivreMotsClefsBd({idBd:_,f:x}){return await this.client.suivreBdListeDeClef({id:_,clef:"motsClefs",schma:{type:"string"},f:x})}async suivreTableauxBd({idBd:_,f:x}){const E=async S=>{const C=Object.entries(S).map(([T,B])=>({id:T,...B}));await x(C)};return await this.client.suivreBdDicDeClef({id:_,clef:"tableaux",schma:schmaBdTableauxDeBd,f:E})}async suivreScoreAccsBd({idBd:_,f:x}){return x(Number.parseInt(_)),faisRien}async suivreScoreCouvertureBd({idBd:_,f:x}){const E=async T=>{const B=T.reduce((I,D)=>I+D.numrateur,0),A=T.reduce((I,D)=>I+D.dnominateur,0);await x(A===0?void 0:B/A)},S=async(T,B)=>{const A={},I=async()=>{const{cols:V,rgles:L}=A;if(V!==void 0&&L!==void 0){const F=V.filter(H=>H.catgorie&&["numrique","catgorique"].includes(H.catgorie.catgorie)),j=F.length,U=F.filter(H=>L.some(Y=>Y.rgle.rgle.typeRgle!=="catgorie"&&Y.colonne===H.id)).length;await B({numrateur:U,dnominateur:j})}},D=await this.client.tableaux.suivreColonnesTableau({idTableau:T,f:async V=>{A.cols=V,await I()}}),M=await this.client.tableaux.suivreRgles({idTableau:T,f:async V=>{A.rgles=V,await I()}});return async()=>{await D(),await M()}},C=async T=>await this.suivreTableauxBd({idBd:_,f:B=>T(B.map(A=>A.id))});return await this.client.suivreBdsDeFonctionListe({fListe:C,f:E,fBranche:S})}async suivreScoreValideBd({idBd:_,f:x}){const E=async T=>{const B=T.reduce((I,D)=>I+D.numrateur,0),A=T.reduce((I,D)=>I+D.dnominateur,0);await x(A===0?void 0:B/A)},S=async(T,B)=>{const A={},I=()=>{const{donnes:L,erreurs:F,cols:j}=A;if(L!==void 0&&F!==void 0&&j!==void 0){const U=j.filter(re=>re.catgorie&&["numrique","catgorique"].includes(re.catgorie.catgorie)),H=[],Y=F.map(re=>({empreinte:re.empreinte,idColonne:re.erreur.rgle.colonne})).filter(re=>H.find(ce=>ce.empreinte===re.empreinte&&ce.idColonne===re.idColonne)?!1:(H.push(re),!0)).length,Z=L.map(re=>U.filter(X=>re.donnes[X.id]!==void 0).length).reduce((re,X)=>re+X,0),ne=Z-Y;B({numrateur:ne,dnominateur:Z})}},D=await this.client.tableaux.suivreDonnes({idTableau:T,f:L=>{A.donnes=L,I()}}),M=await this.client.tableaux.suivreValidDonnes({idTableau:T,f:L=>{A.erreurs=L,I()}}),V=await this.client.tableaux.suivreColonnesTableau({idTableau:T,f:L=>{A.cols=L,I()}});return async()=>{await D(),await M(),await V()}},C=async T=>await this.suivreTableauxBd({idBd:_,f:B=>T(B.map(A=>A.id))});return await this.client.suivreBdsDeFonctionListe({fListe:C,f:E,fBranche:S})}async suivreQualitBd({idBd:_,f:x}){const E={},S=async()=>{const{accs:I,couverture:D,valide:M,licence:V}=E,L={total:V?((I||0)+(D||0)+(M||0))/3:0,accs:I,couverture:D,valide:M,licence:V};await x(L)},C=await this.suivreScoreAccsBd({idBd:_,f:I=>{E.accs=I,S()}}),T=await this.suivreScoreCouvertureBd({idBd:_,f:I=>{E.couverture=I,S()}}),B=await this.suivreScoreValideBd({idBd:_,f:I=>{E.valide=I,S()}}),A=await this.suivreLicenceBd({idBd:_,f:I=>E.licence=I?1:0});return async()=>{await Promise.all([C,T,B,A])}}async suivreVariablesBd({idBd:_,f:x}){const E=async T=>await x(T||[]),S=async(T,B)=>await this.client.tableaux.suivreVariables({idTableau:T,f:B}),C=async T=>await this.suivreTableauxBd({idBd:_,f:B=>T(B.map(A=>A.id))});return await this.client.suivreBdsDeFonctionListe({fListe:C,f:E,fBranche:S})}async exporterDonnes({idBd:_,langues:x,nomFichier:E}){const S=utils$1.book_new(),C=new Set,T=await uneFois(B=>this.suivreTableauxBd({idBd:_,f:B}));for(const B of T){const{id:A}=B,{fichiersSFIP:I}=await this.client.tableaux.exporterDonnes({idTableau:A,langues:x,doc:S});I.forEach(D=>C.add(D))}if(!E){const B=await uneFois(I=>this.suivreNomsBd({idBd:_,f:I})),A=_.split("/").pop();E=x&&traduire(B,x)||A}return{doc:S,fichiersSFIP:C,nomFichier:E}}async exporterDocumentDonnes({donnes:_,formatDoc:x,dossier:E="",inclureFichiersSFIP:S=!0}){const{doc:C,fichiersSFIP:T,nomFichier:B}=_,I={xls:"biff8"}[x]||x;if(!(isBrowser$1||isWebWorker)){const D=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0);D.existsSync(E)||D.mkdirSync(E,{recursive:!0})}if(S){const D={octets:writeSync(C,{bookType:I,type:"buffer"}),nom:`${B}.${x}`},M=await Promise.all([...T].map(async V=>({nom:`${V.cid}.${V.ext}`,octets:await toBuffer(this.client.obtItrableAsyncSFIP({id:V.cid}))})));return await zipper([D],M,path.join(E,B)),path.join(E,`${B}.zip`)}else return writeFileSync(C,path.join(E,`${B}.${x}`),{bookType:I}),path.join(E,`${B}.${x}`)}async effacerBd({idBd:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await this.client.effacerlmentDeBdListe({bd:x,lment:_}),await E();for(const C in["noms","descriptions","motsClefs"]){const T=await this.client.obtIdBd({nom:C,racine:_});T&&await this.client.effacerBd({id:T})}const S=await this.client.obtIdBd({nom:"tableaux",racine:_,type:"kvstore"});if(S){const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"keyvalue"}),B=Object.keys(C.all);for(const A of B)await this.client.tableaux.effacerTableau({idTableau:A});T(),await this.client.effacerBd({id:S})}await this.enleverDeMesBds({idBd:_}),await this.client.effacerBd({id:_})}}__decorate([cacheSuivi],BDs.prototype,"suivreBds",null);__decorate([cacheSuivi],BDs.prototype,"suivreParent",null);__decorate([cacheSuivi],BDs.prototype,"suivreNuesBd",null);__decorate([cacheSuivi],BDs.prototype,"rechercherBdsParMotsClefs",null);__decorate([cacheSuivi],BDs.prototype,"rechercherBdsParNue",null);__decorate([cacheSuivi],BDs.prototype,"suivreIdTableauParClef",null);__decorate([cacheSuivi],BDs.prototype,"suivreBdUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreIdTableauParClefDeBdUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreDonnesDeTableauUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreDonnesDeTableauParClef",null);__decorate([cacheSuivi],BDs.prototype,"suivreMtadonnesBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreLicenceBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreLicenceContenuBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreImage",null);__decorate([cacheSuivi],BDs.prototype,"suivreNomsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreDescriptionsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreMotsClefsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreTableauxBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreAccsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreCouvertureBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreValideBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreQualitBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreVariablesBd",null);var geojsonValidation={};(function(t){const n={};function _(I){return typeof I=="function"}function x(I){return I===Object(I)}function E(I,D){let M=!1;return typeof D=="string"?D=[D]:Object.prototype.toString.call(D)==="[object Array]"?D.length===0&&(M=!0):M=!0,I?D:M}function S(I,D){let M;if(_(n[I])){try{M=n[I](D)}catch(V){M=["Problem with custom definition for "+I+": "+V]}if(typeof result=="string"&&(M=[M]),Object.prototype.toString.call(M)==="[object Array]")return M}return[]}t.define=(I,D)=>I in A&&_(D)?(n[I]=D,!0):!1,t.isPosition=(I,D=!1)=>{let M=[];return Array.isArray(I)?(I.length<=1&&M.push("Position must be at least two elements"),I.forEach((V,L)=>{typeof V!="number"&&M.push("Position must only contain numbers. Item "+V+" at index "+L+" is invalid.")})):M.push("Position must be an array"),M=M.concat(S("Position",I)),E(D,M)},t.isGeoJSONObject=t.valid=(I,D=!1)=>{if(x(I)){let M=[];if("type"in I){if(T[I.type])return T[I.type](I,D);if(B[I.type])return B[I.type](I,D);M.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon", "GeometryCollection", "Feature", or "FeatureCollection"')}else M.push('must have a member with the name "type"');return M=M.concat(S("GeoJSONObject",I)),E(D,M)}else return E(D,["must be a JSON Object"])},t.isGeometryObject=(I,D=!1)=>{if(!x(I))return E(D,["must be a JSON Object"]);let M=[];if("type"in I){if(B[I.type])return B[I.type](I,D);M.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon" or "GeometryCollection"')}else M.push('must have a member with the name "type"');return M=M.concat(S("GeometryObject",I)),E(D,M)},t.isPoint=(I,D=!1)=>{if(!x(I))return E(D,["must be a JSON Object"]);let M=[];if("bbox"in I){const V=t.isBbox(I.bbox,!0);V.length&&(M=M.concat(V))}if("type"in I?I.type!=="Point"&&M.push('type must be "Point"'):M.push('must have a member with the name "type"'),"coordinates"in I){const V=t.isPosition(I.coordinates,!0);V.length&&(M=M.concat(V))}else M.push('must have a member with the name "coordinates"');return M=M.concat(S("Point",I)),E(D,M)},t.isMultiPointCoor=(I,D=!1)=>{let M=[];return Array.isArray(I)?I.forEach((V,L)=>{const F=t.isPosition(V,!0);F.length&&(F[0]="at "+L+": ".concat(F[0]),M=M.concat(F))}):M.push("coordinates must be an array"),E(D,M)},t.isMultiPoint=(I,D=!1)=>{if(!x(I))return E(D,["must be a JSON Object"]);let M=[];if("bbox"in I){const V=t.isBbox(I.bbox,!0);V.length&&(M=M.concat(V))}if("type"in I?I.type!=="MultiPoint"&&M.push('type must be "MultiPoint"'):M.push('must have a member with the name "type"'),"coordinates"in I){const V=t.isMultiPointCoor(I.coordinates,!0);V.length&&(M=M.concat(V))}else M.push('must have a member with the name "coordinates"');return M=M.concat(S("MultiPoint",I)),E(D,M)},t.isLineStringCoor=(I,D=!1)=>{let M=[];return Array.isArray(I)?I.length>1?I.forEach((V,L)=>{const F=t.isPosition(V,!0);F.length&&(F[0]="at "+L+": ".concat(F[0]),M=M.concat(F))}):M.push("coordinates must have at least two elements"):M.push("coordinates must be an array"),E(D,M)},t.isLineString=(I,D=!1)=>{if(!x(I))return E(D,["must be a JSON Object"]);let M=[];if("bbox"in I){const V=t.isBbox(I.bbox,!0);V.length&&(M=M.concat(V))}if("type"in I?I.type!=="LineString"&&M.push('type must be "LineString"'):M.push('must have a member with the name "type"'),"coordinates"in I){const V=t.isLineStringCoor(I.coordinates,!0);V.length&&(M=M.concat(V))}else M.push('must have a member with the name "coordinates"');return M=M.concat(S("LineString",I)),E(D,M)},t.isMultiLineStringCoor=(I,D=!1)=>{let M=[];return Array.isArray(I)?I.forEach((V,L)=>{const F=t.isLineStringCoor(V,!0);F.length&&(F[0]="at "+L+": ".concat(F[0]),M=M.concat(F))}):M.push("coordinates must be an array"),E(D,M)},t.isMultiLineString=(I,D=!1)=>{if(!x(I))return E(D,["must be a JSON Object"]);let M=[];if("bbox"in I){const V=t.isBbox(I.bbox,!0);V.length&&(M=M.concat(V))}if("type"in I?I.type!=="MultiLineString"&&M.push('type must be "MultiLineString"'):M.push('must have a member with the name "type"'),"coordinates"in I){const V=t.isMultiLineStringCoor(I.coordinates,!0);V.length&&(M=M.concat(V))}else M.push('must have a member with the name "coordinates"');return M=M.concat(S("MultiPoint",I)),E(D,M)};function C(I,D){let M=[];return Array.isArray(I)?(I.forEach((V,L)=>{const F=t.isPosition(V,!0);F.length&&(F[0]="at "+L+": ".concat(F[0]),M=M.concat(F))}),I[0].toString()!==I[I.length-1].toString()&&M.push("The first and last positions must be equivalent"),I.length<4&&M.push("coordinates must have at least four positions")):M.push("coordinates must be an array"),E(D,M)}t.isPolygonCoor=(I,D=!1)=>{let M=[];return Array.isArray(I)?I.forEach((V,L)=>{const F=C(V,!0);F.length&&(F[0]="at "+L+": ".concat(F[0]),M=M.concat(F))}):M.push("coordinates must be an array"),E(D,M)},t.isPolygon=(I,D=!1)=>{if(!x(I))return E(D,["must be a JSON Object"]);let M=[];if("bbox"in I){const V=t.isBbox(I.bbox,!0);V.length&&(M=M.concat(V))}if("type"in I?I.type!=="Polygon"&&M.push('type must be "Polygon"'):M.push('must have a member with the name "type"'),"coordinates"in I){const V=t.isPolygonCoor(I.coordinates,!0);V.length&&(M=M.concat(V))}else M.push('must have a member with the name "coordinates"');return M=M.concat(S("Polygon",I)),E(D,M)},t.isMultiPolygonCoor=(I,D=!1)=>{let M=[];return Array.isArray(I)?I.forEach((V,L)=>{const F=t.isPolygonCoor(V,!0);F.length&&(F[0]="at "+L+": ".concat(F[0]),M=M.concat(F))}):M.push("coordinates must be an array"),E(D,M)},t.isMultiPolygon=(I,D=!1)=>{if(!x(I))return E(D,["must be a JSON Object"]);let M=[];if("bbox"in I){const V=t.isBbox(I.bbox,!0);V.length&&(M=M.concat(V))}if("type"in I?I.type!=="MultiPolygon"&&M.push('type must be "MultiPolygon"'):M.push('must have a member with the name "type"'),"coordinates"in I){const V=t.isMultiPolygonCoor(I.coordinates,!0);V.length&&(M=M.concat(V))}else M.push('must have a member with the name "coordinates"');return M=M.concat(S("MultiPolygon",I)),E(D,M)},t.isGeometryCollection=(I,D=!1)=>{if(!x(I))return E(D,["must be a JSON Object"]);let M=[];if("bbox"in I){const V=t.isBbox(I.bbox,!0);V.length&&(M=M.concat(V))}return"type"in I?I.type!=="GeometryCollection"&&M.push('type must be "GeometryCollection"'):M.push('must have a member with the name "type"'),"geometries"in I?Array.isArray(I.geometries)?I.geometries.forEach((V,L)=>{const F=t.isGeometryObject(V,!0);F.length&&(F[0]="at "+L+": ".concat(F[0]),M=M.concat(F))}):M.push('"geometries" must be an array'):M.push('must have a member with the name "geometries"'),M=M.concat(S("GeometryCollection",I)),E(D,M)},t.isFeature=(I,D=!1)=>{if(!x(I))return E(D,["must be a JSON Object"]);let M=[];if("bbox"in I){const V=t.isBbox(I.bbox,!0);V.length&&(M=M.concat(V))}if("type"in I?I.type!=="Feature"&&M.push('type must be "Feature"'):M.push('must have a member with the name "type"'),"properties"in I||M.push('must have a member with the name "properties"'),"geometry"in I){if(I.geometry!==null){const V=t.isGeometryObject(I.geometry,!0);V.length&&(M=M.concat(V))}}else M.push('must have a member with the name "geometry"');return M=M.concat(S("Feature",I)),E(D,M)},t.isFeatureCollection=(I,D=!1)=>{if(!x(I))return E(D,["must be a JSON Object"]);let M=[];if("bbox"in I){const V=t.isBbox(I.bbox,!0);V.length&&(M=V)}return"type"in I?I.type!=="FeatureCollection"&&M.push('type must be "FeatureCollection"'):M.push('must have a member with the name "type"'),"features"in I?Array.isArray(I.features)?I.features.forEach((V,L)=>{const F=t.isFeature(V,!0);F.length&&(F[0]="at "+L+": ".concat(F[0]),M=M.concat(F))}):M.push('"Features" must be an array'):M.push('must have a member with the name "Features"'),M=M.concat(S("FeatureCollection",I)),E(D,M)},t.isBbox=(I,D=!1)=>{let M=[];return Array.isArray(I)?I.length%2!==0&&M.push("bbox, must be a 2*n array"):M.push("bbox must be an array"),M=M.concat(S("Bbox",I)),E(D,M)};const T={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection},B={Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection},A={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection,Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection,Bbox:t.isBbox,Position:t.isPosition,GeoJSON:t.isGeoJSONObject,GeometryObject:t.isGeometryObject};t.allTypes=A})(geojsonValidation);const gjv=getDefaultExportFromCjs(geojsonValidation),estSpcificationHoroDatage=t=>!!t&&typeof t.systme=="string"&&typeof t.val=="string";class Cholqij{lireDate(n){const{systme:_,val:x}=n;switch(_){case"dateJS":case"grgorien":{const E=new Date(x);if(isNaN(E.valueOf()))throw new Error(x);return E}default:throw new Error(_)}}dateValide(n){if(!estSpcificationHoroDatage(n))return!1;try{return this.lireDate(n),!0}catch{return!1}}}const cholqij=new Cholqij,schmaRgleVariableAvecId={type:"object",properties:{id:{type:"string"},rgle:{type:"object",properties:{typeRgle:{type:"string"},dtails:{type:"object",required:[],additionalProperties:!0}},required:["dtails","typeRgle"]}},required:["id","rgle"]},schmaRgleColonne={type:"object",properties:{colonne:{type:"string"},source:{type:"object",properties:{id:{type:"string"},type:{type:"string"}},required:["id","type"]},rgle:{type:"object",properties:{id:{type:"string"},rgle:{type:"object",properties:{dtails:{type:"object",required:[]},typeRgle:{type:"string"}},required:["dtails","typeRgle"]}},required:["id","rgle"]}},required:["colonne","rgle","source"]};function gnrerFonctionRgle({rgle:t,varsColonnes:n,donnesCatgorie:_}){const x=t.rgle,{colonne:E}=t,{typeRgle:S}=x.rgle;switch(S){case"existe":return C=>C.filter(B=>B.donnes[E]===void 0).map(B=>{const{empreinte:A}=B;return{empreinte:A,erreur:{rgle:t}}});case"catgorie":return C=>{const T=x.rgle.dtails.catgorie;return C.filter(A=>!validerCatgorieVal({val:A.donnes[E],catgorie:T})).map(A=>{const{empreinte:I}=A;return{empreinte:I,erreur:{rgle:t}}})};case"bornes":{const C=x;let T,B;const{val:A,op:I,type:D}=C.rgle.dtails,M=(V,L)=>V===void 0||L===void 0;switch(I){case">":B=(V,L)=>M(V,L)||V>L;break;case"<":B=(V,L)=>M(V,L)||V<L;break;case"":case">=":B=(V,L)=>M(V,L)||V>=L;break;case"":case"<=":B=(V,L)=>M(V,L)||V<=L;break}return D==="fixe"?T=V=>{const L=V.donnes[E];return Array.isArray(L)?L.every(F=>B(F,A)):B(L,A)}:T=V=>{const L=V.donnes[E],F=D==="dynamiqueVariable"?V.donnes[n[A]]:V.donnes[A];return Array.isArray(L)?L.every(j=>B(j,F)):B(L,F)},V=>V.filter(F=>!validerBorneVal({val:F,fComp:T})).map(F=>{const{empreinte:j}=F;return{empreinte:j,erreur:{rgle:t}}})}case"valeurCatgorique":{const C=x.rgle,T=C.dtails.type==="fixe"?C.dtails.options:_;if(!T)throw new Error("Options non spcifies");return B=>B.filter(I=>I.donnes[E]!==void 0&&!T.includes(I.donnes[E])).map(I=>{const{empreinte:D}=I;return{empreinte:D,colonne:E,erreur:{rgle:t}}})}default:throw Error(`Catgorie ${S} inconnue.`)}}const formatsFichiers={images:["webp","svg","png","jpg","jpeg","jfif","pjpeg","pjp","gif","avif","apng"],vido:["mp4"],audio:["mp3","ogg","m4a"]};function validFichier(t,n){if(typeof t!="object")return!1;const{cid:_,ext:x}=t;return!cidValide(_)||typeof x!="string"?!1:n?n.includes(x.replace(".","")):!0}function validerCatgorieVal({val:t,catgorie:n}){return t===void 0?!0:n.type==="simple"?validerCatgorieBase({catgorie:n.catgorie,val:t}):Array.isArray(t)?t.every(_=>validerCatgorieBase({catgorie:n.catgorie,val:_})):!1}const validerBorneVal=({val:t,fComp:n})=>Array.isArray(t)?t.every(_=>n(_)):n(t),estUnHoroDatage=t=>{if(["number","string"].includes(typeof t)){const n=new Date(t);return!isNaN(n.valueOf())}else return cholqij.dateValide(t)},validerCatgorieBase=({catgorie:t,val:n})=>{switch(t){case"numrique":return typeof n=="number";case"horoDatage":return estUnHoroDatage(n);case"intervaleTemps":return!Array.isArray(n)||n.length!==2?!1:n.every(_=>estUnHoroDatage(_));case"chane":return adresseOrbiteValide(n);case"chaneNonTraductible":return typeof n=="string";case"boolen":return typeof n=="boolean";case"gojson":return typeof n!="object"?!1:gjv.valid(n);case"vido":return validFichier(n,formatsFichiers.vido);case"audio":return validFichier(n,formatsFichiers.audio);case"image":return validFichier(n,formatsFichiers.images);case"fichier":return validFichier(n);default:return!1}},schmaInfoColAvecCatgorie={type:"object",properties:{catgorie:{type:"object",nullable:!0,properties:{catgorie:{type:"string"},type:{type:"string"}},required:["catgorie","type"]},id:{type:"string"},variable:{type:"string"},index:{type:"boolean",nullable:!0}},required:["id","variable"]},schmaDonnesTableau={type:"object",additionalProperties:!0,required:[]};function lmentsgaux(t,n){const _=Object.keys(t).filter(E=>E!=="id"),x=Object.keys(n).filter(E=>E!=="id");return!(!_.every(E=>t[E]===n[E])||!x.every(E=>t[E]===n[E]))}function indexlmentsgaux(t,n,_){return!!_.every(x=>t[x]===n[x])}const schmaStructureBdTableau={type:"object",properties:{type:{type:"string"},noms:{type:"string"},donnes:{type:"string"},colonnes:{type:"string"},rgles:{type:"string"}},required:["donnes","colonnes","noms","rgles","type"]};class Tableaux{constructor({client:n}){wt(this,"client");this.client=n}async crerTableau({idBd:n}){const _=await this.client.obtOpsAccs({idBd:n}),x=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:_}),{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue",schma:schmaStructureBdTableau});await E.set("type","tableau");const C=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:_});await E.set("noms",C);const T=await this.client.crerBdIndpendante({type:"feed",optionsAccs:_});await E.set("donnes",T);const B=await this.client.crerBdIndpendante({type:"feed",optionsAccs:_});await E.set("colonnes",B);const A=await this.client.crerBdIndpendante({type:"feed",optionsAccs:_});return await E.set("rgles",A),await S(),x}async copierTableau({id:n,idBd:_,copierDonnes:x=!0}){const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdTableau}),C=await this.crerTableau({idBd:_}),{bd:T,fOublier:B}=await this.client.ouvrirBd({id:C,type:"keyvalue",schma:schmaStructureBdTableau}),A=E.get("noms");if(A){const{bd:I,fOublier:D}=await this.client.ouvrirBd({id:A,type:"keyvalue",schma:schmaStructureBdNoms}),M=ClientConstellation$1.obtObjetdeBdDic({bd:I});await D(),await this.sauvegarderNomsTableau({idTableau:C,noms:M})}return await this.client.copierContenuBdListe({bdBase:E,nouvelleBd:T,clef:"colonnes"}),await this.client.copierContenuBdListe({bdBase:E,nouvelleBd:T,clef:"rgles"}),x&&await this.client.copierContenuBdListe({bdBase:E,nouvelleBd:T,clef:"donnes"}),await Promise.all([S(),B()]),C}async suivreDiffrencesAvecTableau({idTableau:n,idTableauRf:_,f:x}){const E={},S=async()=>{if(!E.colonnesTableau||!E.colonnesTableauRf)return;const B=[];for(const A of E.colonnesTableauRf){const I=E.colonnesTableau.find(D=>D.id===A.id);if(I){if(I.variable!==A.variable){const D={type:"variableColonne",svre:!0,idCol:I.id,varColTableau:I.variable,varColTableauLie:A.variable};B.push(D)}if(I.index!==A.index){const D={type:"indexColonne",svre:!0,idCol:I.id,colTableauIndexe:!!I.index};B.push(D)}}else{const D={type:"colonneManquante",svre:!0,idManquante:A.id};B.push(D)}}for(const A of E.colonnesTableau)if(!E.colonnesTableauRf.find(D=>D.id===A.id)){const D={type:"colonneSupplmentaire",svre:!1,idExtra:A.id};B.push(D)}await x(B)},C=await this.suivreColonnesTableau({idTableau:n,f:async B=>{E.colonnesTableau=B,await S()},catgories:!1}),T=await this.suivreColonnesTableau({idTableau:_,f:async B=>{E.colonnesTableauRf=B,await S()},catgories:!1});return async()=>{await Promise.all([C,T])}}async changerColIndex({idTableau:n,idColonne:_,val:x}){const E=await this.client.obtIdBd({nom:"colonnes",racine:n,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E}),B=ClientConstellation$1.obtlmentsDeBdListe({bd:S,renvoyerValeur:!1}).find(A=>A.payload.value.id===_);if(B&&!!B.payload.value.index!==x){const{value:A}=B.payload,I=Object.assign(A,{index:x});await S.remove(B.hash),await S.add(I)}await C()}async suivreIndex({idTableau:n,f:_}){const x=async E=>{const S=E.filter(C=>C.index).map(C=>C.id);await _(S)};return await this.suivreColonnesTableau({idTableau:n,f:x})}async suivreDonnes({idTableau:n,f:_,clefsSelonVariables:x=!1}){const E={},S=async()=>{const{donnes:I,colonnes:D}=E;if(I&&D){const M=I.map(V=>{const L=V.hash,F=V.payload.value;return{donnes:x?Object.keys(F).reduce((U,H)=>{const Y=H==="id"?"id":D[H];return U[Y]=F[H],U},{}):F,empreinte:L}});await _(M)}},C=async I=>{E.colonnes=Object.fromEntries(I.map(D=>[D.id,D.variable])),await S()},T=await this.suivreColonnesTableau({idTableau:n,f:C,catgories:!1}),B=async I=>{E.donnes=I,await S()},A=await this.client.suivreBdListeDeClef({id:n,clef:"donnes",f:B,schma:schmaDonnesTableau,renvoyerValeur:!1});return async()=>{await A(),await T()}}async formaterlment({:n,colonnes:_,fichiersSFIP:x,langues:E}){const S=async({adresseBdTrads:B,langues:A})=>{const I=await uneFois(D=>this.client.suivreBdDic({id:B,f:D}));return traduire(I,A||[])||B},C={},T=async(B,A)=>{switch(typeof B){case"object":if(["audio","image","vido","fichier"].includes(A)){const{cid:I,ext:D}=B;return!I||!D?void 0:(x.add({cid:I,ext:D}),`${I}.${D}`)}else return JSON.stringify(B);case"boolean":return B.toString();case"number":return B;case"string":return A==="chane"&&adresseOrbiteValide(B)?await S({adresseBdTrads:B,langues:E}):B;default:return}};for(const B of Object.keys(n)){const A=_.find(L=>L.id===B);if(!A)continue;const{variable:I,catgorie:D}=A;let M;const V=n[B];D?.type==="simple"?M=await T(V,D.catgorie):D?.type==="liste"&&Array.isArray(V)&&(M=JSON.stringify(await Promise.all(V.map(L=>T(L,D.catgorie))))),M!==void 0&&(C[E?I:B]=M)}return C}async exporterDonnes({idTableau:n,langues:_,doc:x,nomFichier:E}){x=x||utils$1.book_new();const S=new Set;let C;const T=n.split("/").pop();if(_){const M=await uneFois(V=>this.suivreNomsTableau({idTableau:n,f:V}));C=traduire(M,_)||T}else C=T;const B=await uneFois(M=>this.suivreColonnesTableau({idTableau:n,f:M})),A=await uneFois(M=>this.suivreDonnes({idTableau:n,f:M}));let I=await Promise.all(A.map(M=>this.formaterlment({:M.donnes,fichiersSFIP:S,colonnes:B,langues:_})));if(_){const M=await uneFois(L=>this.suivreVariables({idTableau:n,f:L})),V={};for(const L of M){const F=await uneFois(U=>this.client.variables.suivreNomsVariable({idVariable:L,f:U})),j=B.find(U=>U.variable===L).id;V[L]=traduire(F,_)||j}I=I.map(L=>Object.keys(L).reduce((F,j)=>{const U=V[j];return F[U]=L[j],F},{}))}const D=utils$1.json_to_sheet(I);return utils$1.book_append_sheet(x,D,C.slice(0,30)),E=E||C,{doc:x,fichiersSFIP:S,nomFichier:E}}async ajouterlment({idTableau:n,vals:_}){const x=await this.client.obtIdBd({nom:"donnes",racine:n,type:"feed"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x});_=await this.vrifierClefslment({idTableau:n,lment:_});const C=v4(),T=await E.add({..._,id:C});return await S(),T}async modifierlment({idTableau:n,vals:_,empreintePrcdente:x}){const E=await this.client.obtIdBd({nom:"donnes",racine:n,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E}),T=this.client.obtlmentBdListeSelonEmpreinte({bd:S,empreinte:x});let B=Object.assign({},T,_);if(Object.keys(_).map(A=>{_[A]===void 0&&delete B[A]}),B=await this.vrifierClefslment({idTableau:n,lment:B}),lmentsgaux(B,T))return await C(),Promise.resolve(x);{const A=await Promise.all([S.remove(x),S.add(B)]);return await C(),A[1]}}async vrifierClefslment({idTableau:n,lment:_}){const x=await this.client.obtIdBd({nom:"colonnes",racine:n,type:"feed"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x}),T=[...E.iterator({limit:-1}).collect().map(A=>A.payload.value.id),"id"],B=Object.keys(_).filter(A=>T.includes(A));return await S(),Object.fromEntries(B.map(A=>[A,_[A]]))}async effacerlment({idTableau:n,empreinte:_}){const x=await this.client.obtIdBd({nom:"donnes",racine:n,type:"feed"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x});await E.remove(_),await S()}async combinerDonnes({idTableauBase:n,idTableau2:_}){const x=await uneFois(async T=>await this.suivreColonnesTableau({idTableau:n,f:T})),E=await uneFois(async T=>await this.suivreDonnes({idTableau:n,f:T})),S=await uneFois(async T=>await this.suivreDonnes({idTableau:_,f:T})),C=x.filter(T=>T.index).map(T=>T.id);for(const T of S){const B=E.find(A=>indexlmentsgaux(A.donnes,T.donnes,C));if(B){const A={};for(const I of x)B.donnes[I.id]===void 0&&T.donnes[I.id]!==void 0&&(A[I.id]=T.donnes[I.id]);Object.keys(A).length&&(await this.effacerlment({idTableau:n,empreinte:B.empreinte}),await this.ajouterlment({idTableau:n,vals:Object.assign({},B.donnes,A)}))}else await this.ajouterlment({idTableau:n,vals:T.donnes})}}async convertirDonnes({idTableau:n,donnes:_,conversions:x,cheminBaseFichiers:E,donnesExistantes:S}){const C=await uneFois(async L=>await this.suivreColonnesTableau({idTableau:n,f:L})),T=new Set(S?.map(L=>C.filter(F=>F.catgorie?.catgorie==="chane").map(F=>F.catgorie?.type==="simple"?[L[F.id]]:L[F.id]).flat().filter(F=>typeof F=="string")).flat()||[]),B={},A=async({chemin:L})=>{if(isNode||isElectronMain){const F=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),j=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0),U=L.split(".").pop()||"",H=E?j.resolve(E,L):L;if(!F.existsSync(H))return;if(B[H])return B[H];const Y=F.readFileSync(H),Z=await this.client.ajouterSFIP({fichier:Y});return B[L]={ext:U,cid:Z},{ext:U,cid:Z}}},I={},D=async({val:L,langue:F})=>{if(I[F]?.[L])return I[F][L];for(const j of T){const{bd:U,fOublier:H}=await this.client.ouvrirBd({id:j,type:"keyvalue",schma:schmaStructureBdNoms}),Y=U.get(F);if(await H(),Y===L)return I[F]||(I[F]={}),I[F][L]=j,j}},M=async({val:L,langue:F})=>{const{bd:j,fOublier:U}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdNoms}),Y={address:j.access.address};await U();const Z=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:Y}),{bd:ne,fOublier:re}=await this.client.ouvrirBd({id:Z,type:"keyvalue",schma:schmaStructureBdNoms});return await ne.set(F,L),await re(),T.add(Z),Z},V=async({val:L,catgorie:F,conversion:j})=>{switch(F){case"audio":case"image":case"vido":case"fichier":{if(typeof L=="string")try{return JSON.parse(L)}catch{return await A({chemin:L})||L}return L}case"boolen":return typeof L=="string"?L.toLowerCase()==="true":L;case"numrique":{let U,H;j?.type==="numrique"&&({opration:U,systmeNumration:H}=j);const Y=({val:ne,ops:re})=>{if(!re)return ne;let X=ne;for(const ce of re)switch(ce.op){case"+":X=ne+ce.val;break;case"-":X=ne-ce.val;break;case"*":X=ne*ce.val;break;case"/":X=ne/ce.val;break;case"^":X=ne**ce.val;break;default:throw new Error(ce.op)}return X};let Z;if(typeof L=="string")try{Z=this.client.ennikkai.({:L,:H})}catch{}else typeof L=="number"&&(Z=L);return Z!==void 0?Y({val:Z,ops:Array.isArray(U)||typeof U>"u"?U:[U]}):L}case"horoDatage":if(j?.type==="horoDatage"&&typeof L=="string"){const{systme:U,format:H}=j;return{systme:"dateJS",val:cholqij.lireDate({systme:U,val:L,format:H}).valueOf()}}else{if(["number","string"].includes(typeof L)){const U=new Date(L);return isNaN(U.valueOf())?L:{systme:"dateJS",val:U.valueOf()}}return L}case"intervaleTemps":{const U=typeof L=="string"?JSON.parse(L):L;return Array.isArray(U)?await Promise.all(U.map(async H=>await V({val:H,catgorie:"horoDatage",conversion:j}))):U}case"chaneNonTraductible":return L;case"chane":{if(typeof L!="string"||adresseOrbiteValide(L))return L;if(j?.type==="chane"){const{langue:U}=j;return await D({val:L,langue:U})||await M({val:L,langue:U})}return L}case"gojson":return typeof L=="string"?JSON.parse(L):L;default:return L}};for(const L of _)for(const F of C)if(F.catgorie){const{type:j,catgorie:U}=F.catgorie,H=L[F.id];if(H===void 0)continue;const Y=x[F.id];if(j==="simple")L[F.id]=await V({val:H,catgorie:U,conversion:Y});else{const Z=typeof H=="string"?JSON.parse(H):H;L[F.id]=Array.isArray(Z)?await Promise.all(Z.map(async ne=>await V({val:ne,catgorie:U,conversion:Y}))):[await V({val:Z,catgorie:U,conversion:Y})]}}return _}async importerDonnes({idTableau:n,donnes:_,conversions:x={},cheminBaseFichiers:E}){const S=await uneFois(async A=>await this.suivreDonnes({idTableau:n,f:A})),C=await this.convertirDonnes({idTableau:n,donnes:_,conversions:x,cheminBaseFichiers:E,donnesExistantes:S.map(A=>A.donnes)}),T=[];for(const A of C)S.some(I=>lmentsgaux(I.donnes,A))||T.push(A);const B=[];for(const A of S)C.some(I=>lmentsgaux(I,A.donnes))||B.push(A.empreinte);for(const A of T)await this.ajouterlment({idTableau:n,vals:A});for(const A of B)await this.effacerlment({idTableau:n,empreinte:A})}async sauvegarderNomsTableau({idTableau:n,noms:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue",schma:schmaStructureBdNoms});for(const C in _)await E.set(C,_[C]);await S()}async sauvegarderNomTableau({idTableau:n,langue:_,nom:x}){const E=await this.client.obtIdBd({nom:"noms",racine:n,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaStructureBdNoms});await S.set(_,x),await C()}async effacerNomTableau({idTableau:n,langue:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue",schma:schmaStructureBdNoms});await E.del(_),await S()}async suivreNomsTableau({idTableau:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"noms",schma:schmaStructureBdNoms,f:_})}async ajouterColonneTableau({idTableau:n,idVariable:_,idColonne:x}){const E=await this.client.obtIdBd({nom:"colonnes",racine:n,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E}),T={id:x||v4(),variable:_};return await S.add(T),await C(),T.id}async effacerColonneTableau({idTableau:n,idColonne:_}){const x=await this.client.obtIdBd({nom:"colonnes",racine:n,type:"feed"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x});await this.client.effacerlmentDeBdListe({bd:E,lment:C=>C.payload.value.id===_}),await S()}async suivreColonnesTableau({idTableau:n,f:_,catgories:x=!0}){const E=async A=>{if(A)return await _(A)},S=async(A,I,D)=>A?await this.client.variables.suivreCatgorieVariable({idVariable:A,f:async M=>{const V=Object.assign({catgorie:M},D);await I(V)}}):faisRien,C=A=>A.variable,T=A=>A.id,B=async({id:A,fSuivreBd:I})=>await this.client.suivreBdsDeBdListe({id:A,f:I,fBranche:S,fIdBdDeBranche:C,fCode:T});return x?await this.client.suivreBdDeClef({id:n,clef:"colonnes",f:E,fSuivre:B}):await this.client.suivreBdListeDeClef({id:n,clef:"colonnes",schma:schmaInfoColAvecCatgorie,f:E})}async suivreVariables({idTableau:n,f:_}){const x=async S=>{await _((S||[]).filter(C=>C&&OrbitDB.isValidAddress(C)))},E=async({id:S,fSuivreBd:C})=>await this.client.suivreBdListe({id:S,f:T=>C(T.map(B=>B.variable))});return await this.client.suivreBdDeClef({id:n,clef:"colonnes",f:x,fSuivre:E})}async ajouterRgleTableau({idTableau:n,idColonne:_,rgle:x}){const E=await this.client.obtIdBd({nom:"rgles",racine:n,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour tableau ${n}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E}),T=v4(),A={rgle:{id:T,rgle:x},source:{type:"tableau",id:n},colonne:_};return await S.add(A),await C(),T}async effacerRgleTableau({idTableau:n,idRgle:_}){const x=await this.client.obtIdBd({nom:"rgles",racine:n,type:"feed"});if(!x)throw new Error(`Permission de modification refuse pour tableau ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x});await this.client.effacerlmentDeBdListe({bd:E,lment:C=>C.payload.value.rgle.id===_}),await S()}async suivreRgles({idTableau:n,f:_}){const x={},E=async()=>{if(!(!x.tableau||!x.variable))return await _([...x.tableau,...x.variable])},S=async L=>(x.tableau=L,await E()),C=await this.client.suivreBdListeDeClef({id:n,clef:"rgles",schma:schmaRgleColonne,f:S}),T=async L=>await this.suivreColonnesTableau({idTableau:n,f:L}),B=async L=>(x.variable=L,await E()),A=async(L,F,j)=>{const U=H=>{const Y=H.map(Z=>({rgle:Z,source:{type:"variable",id:L},colonne:j.id}));return F(Y)};return await this.client.variables.suivreRglesVariable({idVariable:L,f:U})},I=L=>L.variable,D=L=>L.id,M=await this.client.suivreBdsDeFonctionListe({fListe:T,f:B,fBranche:A,fIdBdDeBranche:I,fCode:D});return async()=>{await C(),await M()}}async suivreValidDonnes({idTableau:n,f:_}){const x={},E=async()=>{if(!x.donnes||!x.rgles)return;let F=[];for(const j of x.rgles){const U=j(x.donnes);F=[...F,...U.flat()]}await _(F)},S=async F=>{x.varsColonnes&&(x.rgles=F.map(j=>gnrerFonctionRgle({rgle:j.rgle,varsColonnes:x.varsColonnes,donnesCatgorie:j.donnesCatgorie})),await E())},C=async F=>{x.donnes=F,await E()},T=await this.suivreColonnesTableau({idTableau:n,f:async F=>{const j=F.reduce((U,H)=>({...U,[H.variable]:H.id}),{});x.varsColonnes=j,await E()}}),B=async F=>await this.suivreRgles({idTableau:n,f:F}),A=async(F,j,U)=>{if(U.rgle.rgle.typeRgle==="valeurCatgorique"&&U.rgle.rgle.dtails.type==="dynamique"){const{tableau:H,colonne:Y}=U.rgle.rgle.dtails;return await this.suivreDonnes({idTableau:H,f:async Z=>await j({rgle:U,donnesCatgorie:Z.map(ne=>ne.donnes[Y])})})}else return await j({rgle:U}),faisRien},I=F=>F.rgle.id,D=F=>F.rgle.id,M=await this.client.suivreBdsDeFonctionListe({fListe:B,f:S,fBranche:A,fIdBdDeBranche:I,fCode:D}),V=await this.suivreDonnes({idTableau:n,f:C});return async()=>{await M(),await V(),await T()}}async suivreValidRgles({idTableau:n,f:_}){const x={},E=async()=>{if(!x.colonnes||!x.rgles)return;const V=[],L=x.rgles.map(H=>H.rgle).filter(H=>H.rgle.rgle.typeRgle==="bornes"),F=L.filter(H=>H.rgle.rgle.dtails.type==="dynamiqueColonne"),j=L.filter(H=>H.rgle.rgle.dtails.type==="dynamiqueVariable"),U=x.rgles.filter(H=>H.rgle.rgle.rgle.typeRgle==="valeurCatgorique"&&H.rgle.rgle.rgle.dtails.type==="dynamique");for(const H of F)if(!x.colonnes.find(Z=>Z.id===H.rgle.rgle.dtails.val)){const Z={rgle:H,dtails:"colonneBornesInexistante"};V.push(Z)}for(const H of j)if(!x.colonnes.find(Z=>Z.variable===H.rgle.rgle.dtails.val)){const Z={rgle:H,dtails:"variableBornesNonPrsente"};V.push(Z)}for(const H of U)if(!H.colsTableauRf?.find(Z=>Z.id===H.rgle.rgle.rgle.dtails.colonne)){const Z={rgle:H.rgle,dtails:"colonneCatgInexistante"};V.push(Z)}await _(V)},S=async V=>(x.rgles=V,await E()),C=await this.suivreColonnesTableau({idTableau:n,f:async V=>(x.colonnes=V,await E())}),T=async V=>await this.suivreRgles({idTableau:n,f:V}),B=async(V,L,F)=>{if(F.rgle.rgle.typeRgle==="valeurCatgorique"&&F.rgle.rgle.dtails.type==="dynamique"){const{tableau:j}=F.rgle.rgle.dtails;return await this.suivreColonnesTableau({idTableau:j,f:U=>L({rgle:F,colsTableauRf:U})})}else return await L({rgle:F}),faisRien},A=V=>V.rgle.id,I=V=>V.rgle.id,D=await this.client.suivreBdsDeFonctionListe({fListe:T,f:S,fBranche:B,fIdBdDeBranche:A,fCode:I});return async()=>{await D(),await C()}}async effacerTableau({idTableau:n}){for(const _ in["noms","donnes","colonnes","rgles"]){const x=await this.client.obtIdBd({nom:_,racine:n});x&&await this.client.effacerBd({id:x})}await this.client.effacerBd({id:n})}}__decorate([cacheSuivi],Tableaux.prototype,"suivreDiffrencesAvecTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreIndex",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreDonnes",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreNomsTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreColonnesTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreVariables",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreRgles",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreValidDonnes",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreValidRgles",null);const schmaBdPrincipale$3={type:"string"},schmaStructureBdVariable={type:"object",properties:{type:{type:"string",nullable:!0},catgorie:{type:"object",properties:{catgorie:{type:"string",nullable:!0},type:{type:"string",nullable:!0}},required:[],nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0},units:{type:"string",nullable:!0},rgles:{type:"string",nullable:!0},statut:{type:"object",properties:{idNouvelle:{type:"string",nullable:!0},statut:{type:"string",nullable:!0}},required:[],nullable:!0}},required:[]};class Variables extends ComposanteClientListe{constructor({client:n}){super({client:n,clef:"variables",schmaBdPrincipale:schmaBdPrincipale$3})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async suivreVariables({f:n,idCompte:_}){return await this.suivreBdPrincipale({idCompte:_,f:n})}async crerVariable({catgorie:n}){const _=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:{address:void 0,premierMod:this.client.bdCompte.id}});await this.ajouterMesVariables({idVariable:_});const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdVariable}),C={address:x.access.address};await x.set("type","variable");const T=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:C});await x.set("noms",T);const B=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:C});await x.set("descriptions",B);const A=await this.client.crerBdIndpendante({type:"feed",optionsAccs:C});return await x.set("rgles",A),await x.set("catgorie",this.standardiserCatgorieVariable(n)),await this.tablirStatut({id:_,statut:{statut:TYPES_STATUT.ACTIVE}}),E(),_}async ajouterMesVariables({idVariable:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await _.add(n),await x()}async enleverDeMesVariables({idVariable:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await this.client.effacerlmentDeBdListe({bd:_,lment:n}),await x()}async copierVariable({idVariable:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdVariable}),E=_.get("catgorie"),S=await this.crerVariable({catgorie:E}),{bd:C,fOublier:T}=await this.client.ouvrirBd({id:S,type:"keyvalue",schma:schmaStructureBdVariable}),B=_.get("noms");if(B){const{bd:V,fOublier:L}=await this.client.ouvrirBd({id:B,type:"keyvalue",schma:schmaStructureBdNoms}),F=ClientConstellation$1.obtObjetdeBdDic({bd:V});await L(),await this.sauvegarderNomsVariable({idVariable:S,noms:F})}const A=_.get("descriptions");if(A){const{bd:V,fOublier:L}=await this.client.ouvrirBd({id:A,type:"keyvalue",schma:schmaStructureBdNoms}),F=ClientConstellation$1.obtObjetdeBdDic({bd:V});await L(),await this.sauvegarderDescriptionsVariable({idVariable:S,descriptions:F})}const I=_.get("units");I&&await C.put("units",I);const D=_.get("rgles");if(D){const{bd:V,fOublier:L}=await this.client.ouvrirBd({id:D,type:"feed",schma:schmaRgleVariableAvecId}),F=ClientConstellation$1.obtlmentsDeBdListe({bd:V});await L(),await Promise.all(F.map(async j=>{await this.ajouterRgleVariable({idVariable:S,rgle:j.rgle})}))}const M=_.get("statut")||{statut:TYPES_STATUT.ACTIVE};return await this.tablirStatut({id:S,statut:M}),await Promise.all([x(),T()]),S}async inviterAuteur({idVariable:n,idCompteAuteur:_,rle:x}){await this.client.donnerAccs({idBd:n,identit:_,rle:x})}async sauvegarderNomsVariable({idVariable:n,noms:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour Variable ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue",schma:schmaStructureBdNoms});for(const C in _)await E.set(C,_[C]);await S()}async sauvegarderNomVariable({idVariable:n,langue:_,nom:x}){const E=await this.client.obtIdBd({nom:"noms",racine:n,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour variable ${n}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaStructureBdNoms});await S.set(_,x),await C()}async effacerNomVariable({idVariable:n,langue:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour Variable ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue",schma:schmaStructureBdNoms});await E.del(_),await S()}async sauvegarderDescriptionsVariable({idVariable:n,descriptions:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour Variable ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"kvstore",schma:schmaStructureBdNoms});for(const C in _)await E.set(C,_[C]);await S()}async sauvegarderDescriptionVariable({idVariable:n,langue:_,description:x}){const E=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Variable ${n}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaStructureBdNoms});await S.set(_,x),await C()}async effacerDescriptionVariable({idVariable:n,langue:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour Variable ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue",schma:schmaStructureBdNoms});await E.del(_),await S()}async sauvegarderCatgorieVariable({idVariable:n,catgorie:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdVariable});await x.set("catgorie",this.standardiserCatgorieVariable(_)),await E()}standardiserCatgorieVariable(n){return typeof n=="string"?{type:"simple",catgorie:n}:n}async sauvegarderUnitsVariable({idVariable:n,idUnit:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdVariable});await x.set("units",_),await E()}async ajouterRgleVariable({idVariable:n,rgle:_,idRgle:x}){const E=await this.client.obtIdBd({nom:"rgles",racine:n,type:"feed"});if(!E)throw new Error(`Permission de modification refuse pour variable ${n}.`);x=x||v4();const S={id:x,rgle:_},{bd:C,fOublier:T}=await this.client.ouvrirBd({id:E,type:"feed",schma:schmaRgleVariableAvecId});return await C.add(S),await T(),x}async effacerRgleVariable({idVariable:n,idRgle:_}){const x=await this.client.obtIdBd({nom:"rgles",racine:n,type:"feed"});if(!x)throw new Error(`Permission de modification refuse pour variable ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"feed",schma:schmaRgleVariableAvecId});await this.client.effacerlmentDeBdListe({bd:E,lment:C=>C.payload.value.id===_}),await S()}async modifierRgleVariable({idVariable:n,rgleModifie:_,idRgle:x}){await this.effacerRgleVariable({idVariable:n,idRgle:x}),await this.ajouterRgleVariable({idVariable:n,rgle:_,idRgle:x})}async suivreNomsVariable({idVariable:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"noms",schma:schmaStructureBdNoms,f:_})}async suivreDescrVariable({idVariable:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"descriptions",schma:schmaStructureBdNoms,f:_})}async suivreCatgorieVariable({idVariable:n,f:_}){return await this.client.suivreBd({id:n,type:"keyvalue",schma:schmaStructureBdVariable,f:async x=>{const E=x.get("catgorie");E&&E.catgorie&&E.type&&await _(this.standardiserCatgorieVariable(E))}})}async suivreUnitsVariable({idVariable:n,f:_}){return await this.client.suivreBd({id:n,type:"keyvalue",schma:schmaStructureBdVariable,f:async x=>{const E=x.get("units");await _(E||null)}})}async suivreRglesVariable({idVariable:n,f:_}){const x={catgorie:[],propres:[]},E=async()=>{await _([...x.catgorie,...x.propres])},S=async I=>{const D={id:v4(),rgle:{typeRgle:"catgorie",dtails:{catgorie:I}}};x.catgorie=[D],await E()},C=await this.suivreCatgorieVariable({idVariable:n,f:S}),T=async I=>{x.propres=I,await E()},B=await this.client.suivreBdListeDeClef({id:n,clef:"rgles",schma:schmaRgleVariableAvecId,f:T});return async()=>{await C(),await B()}}async suivreQualitVariable({idVariable:n,f:_}){const x={noms:{},descr:{},rgles:[]},E=async()=>{const D=[Object.keys(x.noms).length?1:0,Object.keys(x.descr).length?1:0];x.catgorie?.catgorie==="numrique"&&D.push(x.units?1:0),x.catgorie?.catgorie==="numrique"&&D.push(x.rgles.length>=1?1:0);const M=D.reduce((V,L)=>V+L,0)/D.length;await _(M)},S=await this.suivreNomsVariable({idVariable:n,f:async D=>{x.noms=D,await E()}}),C=await this.suivreDescrVariable({idVariable:n,f:async D=>{x.descr=D,await E()}}),T=await this.suivreUnitsVariable({idVariable:n,f:async D=>{x.units=D,await E()}}),B=await this.suivreCatgorieVariable({idVariable:n,f:async D=>{x.catgorie=D,await E()}}),A=await this.suivreRglesVariable({idVariable:n,f:async D=>{x.rgles=D,await E()}});return async()=>{await Promise.all([S(),C(),T(),B(),A()])}}async tablirStatut({id:n,statut:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdVariable});await x.set("statut",_),await E()}async marquerObsolte({id:n,idNouvelle:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdVariable});x.set("statut",{statut:TYPES_STATUT.OBSOLTE,idNouvelle:_}),await E()}async effacerVariable({idVariable:n}){await this.enleverDeMesVariables({idVariable:n});for(const _ in["noms","descriptions","rgles"]){const x=await this.client.obtIdBd({nom:_,racine:n});x&&await this.client.effacerBd({id:x})}await this.client.effacerBd({id:n})}}__decorate([cacheSuivi],Variables.prototype,"suivreVariables",null);__decorate([cacheSuivi],Variables.prototype,"suivreNomsVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreDescrVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreCatgorieVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreUnitsVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreRglesVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreQualitVariable",null);function baseSum$1(t,n){for(var _,x=-1,E=t.length;++x<E;){var S=n(t[x]);S!==void 0&&(_=_===void 0?S:_+S)}return _}var _baseSum=baseSum$1;function identity$1(t){return t}var identity_1=identity$1,baseSum=_baseSum,identity=identity_1;function sum$1(t){return t&&t.length?baseSum(t,identity):0}var sum_1=sum$1;const sum$2=getDefaultExportFromCjs(sum_1);var average$3=function t(n){return n.reduce(sum,0)/n.length};function sum(t,n){return t+n}var average$2=average$3,variance$1=function t(n){var _=average$2(n);function x(E,S){var C=S-_;return E+C*C}return n.reduce(x,0)/n.length},average$1=average$3,covariance$1=function t(n,_){for(var x=n.length,E=0,S=average$1(n),C=average$1(_),T=[];E<x;E+=1){var B=n[E]-S,A=_[E]-C;T.push(B*A)}return average$1(T)},average=average$3,variance=variance$1,covariance=covariance$1,ssim=function t(n,_,x){x=x||{};var E="K1"in x?x.K1:.01,S="K2"in x?x.K2:.03,C="L"in x?x.L:255,T="alpha"in x?x.alpha:1,B="beta"in x?x.beta:1,A="gamma"in x?x.gamma:1,I=E*C*(E*C),D=S*C*(S*C),M=D/2;function V(Y,Z){var ne=average(Y),re=average(Z);return(2*ne*re+I)/(ne*ne+re*re+I)}function L(Y,Z){var ne=variance(Y),re=variance(Z),X=Math.sqrt(ne),ce=Math.sqrt(re);return(2*X*ce+D)/(ne+re+D)}function F(Y,Z){var ne=Math.sqrt(variance(Y)),re=Math.sqrt(variance(Z)),X=covariance(Y,Z);return(X+M)/(ne*re+M)}var j=Math.pow(V(n,_),T),U=Math.pow(L(n,_),B),H=Math.pow(F(n,_),A);return j*U*H};const ssim$1=getDefaultExportFromCjs(ssim);function reverse(t){return t.split("").reverse().join("")}function findMatchStarts(t,n,_){const x=reverse(n);return _.map(E=>{const S=Math.max(0,E.end-n.length-E.errors),C=reverse(t.slice(S,E.end));return{start:findMatchEnds(C,x,E.errors).reduce((B,A)=>E.end-A.end<B?E.end-A.end:B,E.end),end:E.end,errors:E.errors}})}function oneIfNotZero(t){return(t|-t)>>31&1}function advanceBlock(t,n,_,x){let E=t.P[_],S=t.M[_];const C=x>>>31,T=n[_]|C,B=T|S,A=(T&E)+E^E|T;let I=S|~(A|E),D=E&A;const M=oneIfNotZero(I&t.lastRowMask[_])-oneIfNotZero(D&t.lastRowMask[_]);return I<<=1,D<<=1,D|=C,I|=oneIfNotZero(x)-C,E=D|~(B|I),S=I&B,t.P[_]=E,t.M[_]=S,M}function findMatchEnds(t,n,_){if(n.length===0)return[];_=Math.min(_,n.length);const x=[],E=32,S=Math.ceil(n.length/E)-1,C={P:new Uint32Array(S+1),M:new Uint32Array(S+1),lastRowMask:new Uint32Array(S+1)};C.lastRowMask.fill(1<<31),C.lastRowMask[S]=1<<(n.length-1)%E;const T=new Uint32Array(S+1),B=new Map,A=[];for(let M=0;M<256;M++)A.push(T);for(let M=0;M<n.length;M+=1){const V=n.charCodeAt(M);if(B.has(V))continue;const L=new Uint32Array(S+1);B.set(V,L),V<A.length&&(A[V]=L);for(let F=0;F<=S;F+=1){L[F]=0;for(let j=0;j<E;j+=1){const U=F*E+j;if(U>=n.length)continue;n.charCodeAt(U)===V&&(L[F]|=1<<j)}}}let I=Math.max(0,Math.ceil(_/E)-1);const D=new Uint32Array(S+1);for(let M=0;M<=I;M+=1)D[M]=(M+1)*E;D[S]=n.length;for(let M=0;M<=I;M+=1)C.P[M]=-1,C.M[M]=0;for(let M=0;M<t.length;M+=1){const V=t.charCodeAt(M);let L;V<A.length?L=A[V]:(L=B.get(V),typeof L>"u"&&(L=T));let F=0;for(let j=0;j<=I;j+=1)F=advanceBlock(C,L,j,F),D[j]+=F;if(D[I]-F<=_&&I<S&&(L[I+1]&1||F<0)){I+=1,C.P[I]=-1,C.M[I]=0;let j;if(I===S){const U=n.length%E;j=U===0?E:U}else j=E;D[I]=D[I-1]+j-F+advanceBlock(C,L,I,F)}else for(;I>0&&D[I]>=_+E;)I-=1;I===S&&D[I]<=_&&(D[I]<_&&x.splice(0,x.length),x.push({start:-1,end:M+1,errors:D[I]}),_=D[I])}return x}function search(t,n,_){const x=findMatchEnds(t,n,_);return findMatchStarts(t,n,x)}const rechercherDansTexte=(t,n)=>{const x=search(n,t,Math.ceil(t.length/4)).sort((E,S)=>E.errors>S.errors?1:-1)[0];if(x)return{type:"texte",score:1/(x.errors+1),dbut:x.start,fin:x.end}},similTexte=(t,n)=>(Array.isArray(n)&&(n=Object.fromEntries(n.map(E=>[E,E]))),Object.entries(n).map(([E,S])=>{const C=rechercherDansTexte(t,S);if(C){const{score:T,dbut:B,fin:A}=C;return{type:"rsultat",score:T,clef:E,info:{type:"texte",texte:S,dbut:B,fin:A}}}}).filter(E=>E).sort((E,S)=>E.score>S.score?-1:1)[0]),similImages=(t,n)=>{if(!n)return 0;const{mssim:_}=ssim$1(t,n);return _},combinerRecherches=async(t,n,_,x)=>{const E=[],S=Object.fromEntries(Object.keys(t).map(T=>[T,void 0])),C=()=>{const T=Object.values(S).filter(B=>B).sort((B,A)=>aMieuxQueB(B,A)?-1:1)[0];x(T)};return await Promise.all(Object.entries(t).map(async([T,B])=>{const A=I=>{S[T]=I,C()};E.push(await B(n,_,A))})),async()=>{await Promise.all(E.map(T=>T()))}},sousRecherche=async(t,n,_,x,E)=>{const S=async(B,A)=>await _(x,B,I=>{I&&A({id:B,rsultat:I})}),C=async B=>{const A=meilleurRsultat(B);if(A){const I={type:"rsultat",de:t,clef:A.id,score:A.rsultat.score,info:{type:"rsultat",de:A.rsultat.de,info:A.rsultat.info}};A.rsultat.clef&&(I.info.clef=A.rsultat.clef),await E(I)}};return await x.suivreBdsDeFonctionListe({fListe:n,f:C,fBranche:S})},aMieuxQueB=(t,n)=>{const _=(x,E)=>{for(;x.type==="rsultat";)x=x.info;for(;E.type==="rsultat";)E=E.info;switch(x.type){case"texte":return E.type==="texte"?x.fin-x.dbut>E.fin-E.dbut:!1;default:return!0}};return t.score>n.score?!0:t.score<n.score?!1:!!_(t.info,n.info)},meilleurRsultat=t=>Object.values(t).filter(_=>_).sort((_,x)=>aMieuxQueB(_.rsultat,x.rsultat)?-1:1)[0],rechercherSelonId=t=>async(n,_,x)=>{const E=rechercherDansTexte(t,_);if(E){const{score:S,dbut:C,fin:T}=E;x({score:S,type:"rsultat",de:"id",info:{type:"texte",dbut:C,fin:T,texte:_}})}else x();return faisRien},rechercherTous=()=>async(t,n,_)=>(await _({type:"rsultat",score:1,de:"*",info:{type:"vide"}}),faisRien),rechercherProfilsSelonActivit=()=>async(t,n,_)=>{const x={noms:void 0,image:void 0,courriel:void 0},E=()=>({type:"rsultat",score:[Object.keys(x.noms||{}).length>0,x.image,x.courriel].filter(Boolean).length/3,de:"activit",info:{type:"vide"}}),S=M=>{x.noms=M,_(E())},C=M=>{x.image=M,_(E())},T=M=>{x.courriel=M,_(E())},B=await t.profil.suivreNoms({idCompte:n,f:S}),A=await t.profil.suivreImage({idCompte:n,f:C}),I=await t.profil.suivreCourriel({idCompte:n,f:T});return async()=>{await Promise.all([B(),A(),I()])}},rechercherProfilsSelonNom=t=>async(n,_,x)=>{const E=C=>{const T=similTexte(t,C);if(T){const{score:B,clef:A,info:I}=T;x({type:"rsultat",score:B,clef:A,info:I,de:"nom"})}else x()};return await n.profil.suivreNoms({idCompte:_,f:E})},rechercherProfilsSelonCourriel=t=>async(n,_,x)=>{const E=C=>{const T=C?rechercherDansTexte(t,C):void 0;if(T){const{score:B,dbut:A,fin:I}=T;x({type:"rsultat",score:B,de:"courriel",info:{type:"texte",dbut:A,fin:I,texte:C}})}else x()};return await n.profil.suivreCourriel({idCompte:_,f:E})},rechercherProfilsSelonTexte=t=>async(n,_,x)=>{const E=rechercherProfilsSelonNom(t),S=rechercherProfilsSelonCourriel(t),C=rechercherSelonId(t);return await combinerRecherches({noms:E,courriel:S,id:C},n,_,x)},rechercherProfilsSelonImage=t=>async(n,_,x)=>{const E=C=>{const T=similImages(t,C);x({type:"rsultat",score:T,de:"image",info:{type:"vide"}})};return await n.profil.suivreImage({idCompte:_,f:E})},schmaBdPrincipaleRseau={type:"object",additionalProperties:{type:"string"},required:[]},INTERVALE_SALUT=1e3*60,FACTEUR_ATNUATION_CONFIANCE=.8,FACTEUR_ATNUATION_BLOQUS=.9,CONFIANCE_DE_COAUTEUR=.9,CONFIANCE_DE_FAVORIS=.7,DLAI_SESOUVENIR_MEMBRES_EN_LIGNE=1e3*60*60*24*30,N_DSIR_SOUVENIR_MEMBRES_EN_LIGNE=50,obtChaneIdSFIPClient=t=>t.idNodeSFIP.id.toCID().toString();class Rseau extends ComposanteClientDic{constructor({client:_}){super({client:_,clef:"rseau",schmaBdPrincipale:schmaBdPrincipaleRseau});wt(this,"client");wt(this,"bloqusPrivs");wt(this,"_ferm");wt(this,"dispositifsEnLigne");wt(this,"fsOublier");wt(this,"vnements");this.client=_,this.bloqusPrivs=new Set,this.dispositifsEnLigne={},this.fsOublier=[],this._ferm=!1,this.vnements=new eventsExports.EventEmitter}async initialiser(){const _={};await this.client.sfip.pubsub.subscribe(this.client.sujet_rseau,T=>{const B=v4();try{const A=this.messageReu({msg:T});_[B]=A,A.then(()=>{delete _[B]})}catch(A){console.error(A.toString()),console.error(A.stack.toString())}}),this.fsOublier.push(async()=>{await this.client.sfip.pubsub.unsubscribe(this.client.sujet_rseau),await Promise.all(Object.values(_))});const x=this.client.sfip.libp2p,E=()=>{this.vnements.emit("changementConnexions")},S=["peer:discovery","peer:connect","peer:disconnect"];for(const T of S)x.addEventListener(T,E);this.fsOublier.push(...S.map(T=>async()=>x.removeEventListener(T,E)));const C=setInterval(()=>{this.direSalut({})},INTERVALE_SALUT);this.fsOublier.push(async()=>clearInterval(C)),await this.direSalut({})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async envoyerMessageAuDispositif({msg:_,idSFIP:x}){x&&(_.destinataire=x);const E=this.client.sujet_rseau,S=Buffer$5.from(JSON.stringify(_));await this.client.sfip.pubsub.publish(E,S)}async envoyerMessageAuMembre({msg:_,idCompte:x,encrypt:E=!0}){const C={signature:await this.client.signer({message:JSON.stringify(_)}),valeur:_},T=Date.now(),B=Object.values(this.dispositifsEnLigne).filter(A=>A.infoDispositif.idCompte===x).filter(A=>A.vu&&T-A.vu<INTERVALE_SALUT+1e3*30);if(!B.length)throw new Error(`Aucun dispositif prsentement en ligne pour membre ${x}`);await Promise.all(B.map(async A=>{const{idSFIP:I,encryption:D}=A.infoDispositif;if(E){if(D?.type!==this.client.encryption.nom)return;const M=this.client.encryption.encrypter({message:JSON.stringify(C),clefPubliqueDestinataire:D.clefPublique}),V={encrypt:!0,clefPubliqueExpditeur:this.client.encryption.clefs.publique,donnes:M};await this.envoyerMessageAuDispositif({msg:V,idSFIP:I})}else{const M={encrypt:!1,donnes:C};await this.envoyerMessageAuDispositif({msg:M,idSFIP:I})}}))}async direSalut({:_}){const x={type:"Salut !",contenu:{idSFIP:obtChaneIdSFIPClient(this.client),idDispositif:this.client.orbite.identity.id,clefPublique:this.client.orbite.identity.publicKey,signatures:this.client.orbite.identity.signatures,idCompte:this.client.bdCompte.id}};this.client.encryption&&(x.contenu.encryption={type:this.client.encryption.nom,clefPublique:this.client.encryption.clefs.publique});const S={encrypt:!1,donnes:{signature:await this.client.signer({message:JSON.stringify(x)}),valeur:x}};await this.envoyerMessageAuDispositif({msg:S,idSFIP:_})}async envoyerDemandeRejoindreCompte({idCompte:_,codeSecret:x}){const E=await this.client.obtIdDispositif(),S={type:"Je veux rejoindre ce compte",contenu:{idDispositif:E,empreinteVrification:this.client.empreinteInvitation({idDispositif:E,codeSecret:x})}};await this.envoyerMessageAuMembre({msg:S,idCompte:_})}async messageReu({msg:_}){if(this._ferm)return;const x=JSON.parse(new TextDecoder().decode(_.data)),{encrypt:E,destinataire:S}=x;if(S&&S!==obtChaneIdSFIPClient(this.client))return;const C=E?JSON.parse(this.client.encryption.dcrypter({message:x.donnes,clefPubliqueExpditeur:x.clefPubliqueExpditeur})):x.donnes,{valeur:T,signature:B}=C;if(B.clefPublique===this.client.orbite.identity.publicKey&&T.type!=="Salut !"||!await this.client.vrifierSignature({signature:B,message:JSON.stringify(T)}))return;const I=T.contenu;switch(T.type){case"Salut !":{const D=I,{clefPublique:M}=D;if(M!==B.clefPublique)return;await this.recevoirSalut({message:D}),S||await this.direSalut({:D.idSFIP});break}case"Je veux rejoindre ce compte":{const D=I;await this.client.considrerRequteRejoindreCompte({requte:D});break}}}async recevoirSalut({message:_}){await this._validerInfoMembre({info:_})&&(this.dispositifsEnLigne[_.idDispositif]={infoDispositif:_,vu:_.idDispositif===await this.client.obtIdDispositif()?void 0:new Date().getTime()},this.vnements.emit("membreVu"),this._sauvegarderDispositifsEnLigne())}_nettoyerDispositifsEnLigne(){const _=new Date().getTime(),x=Object.values(this.dispositifsEnLigne).filter(C=>_-(C.vu||0)>DLAI_SESOUVENIR_MEMBRES_EN_LIGNE).sort((C,T)=>(C.vu||0)<(T.vu||0)?-1:1).map(C=>C.infoDispositif.idDispositif),E=Object.keys(this.dispositifsEnLigne).length-N_DSIR_SOUVENIR_MEMBRES_EN_LIGNE;x.slice(x.length-E).forEach(C=>delete this.dispositifsEnLigne[C])}async _sauvegarderDispositifsEnLigne(){this._nettoyerDispositifsEnLigne(),await this.client.sauvegarderAuStockageLocal({clef:"dispositifsEnLigne",val:JSON.stringify(this.dispositifsEnLigne)})}async _validerInfoMembre({info:_}){const{idCompte:x,signatures:E,clefPublique:S,idDispositif:C}=_;if(!(x&&E&&S&&C))return!1;const T=await this.client.vrifierSignature({signature:{signature:E.id,clefPublique:S},message:C}),B=await this.client.vrifierSignature({signature:{signature:E.publicKey,clefPublique:C},message:S+E.id});if(!OrbitDB.isValidAddress(x))return!1;const{bd:A,fOublier:I}=await this.client.ouvrirBd({id:x});if(!(A.access instanceof ContrleurConstellation))return!1;const D=A.access.estAutoris(C);return await I(),T&&B&&D}async faireConfianceAuMembre({idCompte:_}){const{bd:x,fOublier:E}=await this.obtBd();await x.set(_,"FIABLE"),await E()}async nePlusFaireConfianceAuMembre({idCompte:_}){const{bd:x,fOublier:E}=await this.obtBd();Object.keys(ClientConstellation$1.obtObjetdeBdDic({bd:x})).includes(_)&&x.get(_)==="FIABLE"&&await x.del(_),await E()}async suivreFiables({f:_,idCompte:x}){const E=async S=>{const C=Object.keys(S).filter(T=>S[T]==="FIABLE");return await _(C)};return await this.suivreBdPrincipale({idCompte:x,f:E})}async _initaliserBloqusPrivs(){const _=await this.client.obtDeStockageLocal({clef:"membresBloqus"});_&&(JSON.parse(_).forEach(x=>this.bloqusPrivs.add(x)),this.vnements.emit("changementMembresBloqus"))}async _sauvegarderBloqusPrivs(){const _=[...this.bloqusPrivs];this.client.sauvegarderAuStockageLocal({clef:"membresBloqus",val:JSON.stringify(_)})}async bloquerMembre({idCompte:_,priv:x=!1}){if(x)await this.dbloquerMembre({idCompte:_}),this.bloqusPrivs.add(_),await this._sauvegarderBloqusPrivs();else{const{bd:E,fOublier:S}=await this.obtBd();await this.dbloquerMembre({idCompte:_}),await E.set(_,"BLOQU"),await S()}this.vnements.emit("changementMembresBloqus")}async dbloquerMembre({idCompte:_}){const{bd:x,fOublier:E}=await this.obtBd();Object.keys(ClientConstellation$1.obtObjetdeBdDic({bd:x})).includes(_)&&x.get(_)==="BLOQU"&&await x.del(_),await E(),this.bloqusPrivs.has(_)&&(this.bloqusPrivs.delete(_),await this._sauvegarderBloqusPrivs()),this.vnements.emit("changementMembresBloqus")}async suivreBloqusPubliques({f:_,idCompte:x}){const E=async S=>{const C=Object.keys(S).filter(T=>S[T]==="BLOQU");return await _(C)};return await this.suivreBdPrincipale({idCompte:x,f:E})}async suivreBloqus({f:_,idCompte:x}){const E=[];let S=[];const C=async()=>{const T=[...new Set([...[...this.bloqusPrivs].map(B=>({idCompte:B,priv:!0})),...S.map(B=>({idCompte:B,priv:!1}))])];return await _(T)};return E.push(await this.suivreBloqusPubliques({f:async T=>(S=T,await C()),idCompte:x})),(x===void 0||x===this.client.idCompte)&&(await this._initaliserBloqusPrivs(),this.vnements.on("changementMembresBloqus",C),E.push(async()=>{this.vnements.off("changementMembresBloqus",C)}),await C()),async()=>{await Promise.all(E.map(T=>T()))}}async suivreRelationsImmdiates({f:_,idCompte:x}){x=x||this.client.idCompte;const E=[],S={suivis:[],favoris:[],coauteursBds:[],coauteursProjets:[],coauteursVariables:[],coauteursMotsClefs:[]};let C=[];const T=async()=>{const L=[...S.suivis,...S.favoris,...S.coauteursBds,...S.coauteursProjets,...S.coauteursVariables,...S.coauteursMotsClefs,...C.map(U=>({idCompte:U,confiance:-1}))],j=[...new Set(L)].map(U=>{const{idCompte:H}=U;if(C.includes(H))return{idCompte:H,confiance:-1};const Z=1-L.filter(ne=>ne.idCompte===H).map(ne=>ne.confiance).map(ne=>1-ne).reduce((ne,re)=>re*ne,1);return{idCompte:H,confiance:Z}});return await _(j)};E.push(await this.suivreBloqus({f:async L=>{C=L.map(F=>F.idCompte),await T()},idCompte:x})),E.push(await this.client.suivreBdDicDeClef({id:x,clef:"rseau",schma:schmaBdPrincipaleRseau,f:async L=>(S.suivis=Object.entries(L).filter(([F,j])=>j==="FIABLE").map(([F,j])=>({idCompte:F,confiance:1})),await T())}));const B=async(L,F,j)=>{E.push(await this.client.suivreBdsDeFonctionListe({fListe:L,f:async U=>(S[F]=U.map(H=>({idCompte:H,confiance:j})),await T()),fBranche:async(U,H)=>await this.client.suivreAccsBd({id:U,f:Y=>H(Y.map(Z=>Z.idCompte).filter(Z=>Z!==x))})}))};return await B(async L=>await this.suivreFavorisMembre({idCompte:x,f:F=>L((F||[]).map(j=>j.idObjet))}),"favoris",CONFIANCE_DE_FAVORIS),await B(async L=>await this.suivreBdsMembre({idCompte:x,f:F=>L(F||[])}),"coauteursBds",CONFIANCE_DE_COAUTEUR),await B(async L=>await this.suivreProjetsMembre({idCompte:x,f:F=>L(F||[])}),"coauteursProjets",CONFIANCE_DE_COAUTEUR),await B(async L=>await this.suivreVariablesMembre({idCompte:x,f:F=>L(F||[])}),"coauteursVariables",CONFIANCE_DE_COAUTEUR),await B(async L=>await this.suivreMotsClefsMembre({idCompte:x,f:F=>L(F||[])}),"coauteursMotsClefs",CONFIANCE_DE_COAUTEUR),async()=>{await Promise.all(E.map(L=>L()))}}async suivreRelationsConfiance({f:_,profondeur:x,idCompteDbut:E}){const S=E||await this.client.obtIdCompte(),C={},T={},B=new Semaphore;let A=!1;const I=H=>Object.entries(C).filter(([Y,Z])=>Z.relations.map(ne=>ne.idCompte).includes(H)).map(([Y,Z])=>Y),D=H=>{if(H===S)return 0;const Y=({ids:Z,p:ne=1,djVues:re=new Set})=>{const X=Z.map(ce=>I(ce).filter(ue=>!re.has(ue))).flat();return X.includes(S)?ne:X.length?(re=new Set(...re,...X),Y({ids:X,p:ne+1,djVues:re})):1/0};return Y({ids:[H]})},M=async()=>{const H=[];for(const[Y,Z]of Object.entries(C))for(const ne of Z.relations){const re=D(Y)+1;H.push({de:Y,pour:ne.idCompte,confiance:ne.confiance,profondeur:re})}return await _(H)},V=async H=>{C[H]={relations:[]};const Y=await this.suivreRelationsImmdiates({f:Z=>{C[H]&&(C[H].relations=Z,F())},idCompte:H});T[H]=Y},L=async H=>{await T[H](),delete T[H],delete C[H]},F=async()=>{if(A)return;await B.acquire("modification");const H=Object.keys(C).filter(Z=>D(Z)>=x),Y=[...new Set(Object.entries(C).filter(([Z,ne])=>D(Z)+1<x).map(([Z,ne])=>ne.relations.map(re=>re.idCompte)).flat())].filter(Z=>!Object.keys(C).includes(Z));await Promise.all(H.map(Z=>L(Z))),await Promise.all(Y.map(Z=>V(Z))),await M(),B.release("modification")};return await V(S),{fOublier:async()=>{A=!0,await Promise.all(Object.values(T).map(H=>H()))},fChangerProfondeur:async H=>{x=H,await F()}}}async suivreComptesRseau({f:_,profondeur:x,idCompteDbut:E}){const S=async C=>{C.push({de:this.client.idCompte,pour:this.client.idCompte,confiance:1,profondeur:0});const T={};C.forEach(A=>{Object.keys(T).includes(A.pour)||(T[A.pour]=[]),T[A.pour].push(A)});const B=Object.entries(T).map(([A,I])=>{const D=I.find(U=>U.de===this.client.idCompte);if(D?.confiance===1||D?.confiance===-1)return{idCompte:A,profondeur:D.pour===this.client.idCompte?0:1,confiance:D.confiance};const M=Math.min(...I.map(U=>U.profondeur)),V=I.filter(U=>U.confiance>=0),F=1-I.filter(U=>U.confiance<0).map(U=>1+U.confiance*Math.pow(FACTEUR_ATNUATION_BLOQUS,U.profondeur-1)).reduce((U,H)=>H*U,1),j=1-V.map(U=>1-U.confiance*Math.pow(FACTEUR_ATNUATION_CONFIANCE,U.profondeur-1)).reduce((U,H)=>H*U,1)-F;return{idCompte:A,profondeur:M,confiance:j}});return await _(B)};return await this.suivreRelationsConfiance({f:S,profondeur:x,idCompteDbut:E})}async suivreComptesRseauEtEnLigne({f:_,profondeur:x,idCompteDbut:E}){const S={rseau:[],enLigne:[]},C=async()=>{const M=[...S.rseau];return S.enLigne.forEach(V=>{M.find(L=>L.idCompte===V.idCompte)||M.push(V)}),await _(M)},T=await this.suivreConnexionsMembres({f:async M=>{const V=M.filter(L=>L.infoMembre.idCompte!==this.client.idCompte).map(L=>({idCompte:L.infoMembre.idCompte,profondeur:1/0,confiance:0}));return S.enLigne=V,await C()}}),B=async M=>(S.rseau=M,await C()),{fOublier:A,fChangerProfondeur:I}=await this.suivreComptesRseau({f:B,profondeur:x,idCompteDbut:E});return{fOublier:async()=>{await T(),await A()},fChangerProfondeur:I}}async suivreConfianceMonRseauPourMembre({idCompte:_,f:x,profondeur:E,idCompteRfrence:S}){const C=S||await this.client.obtIdCompte(),T=async B=>{const A=B.find(I=>I.idCompte===_);return await x(A?.confiance||0)};return await this.suivreComptesRseau({f:T,profondeur:E,idCompteDbut:C})}async suivreConnexionsPostesSFIP({f:_}){const x=C=>{const T=[],B=[];for(const A of C)T.includes(A.peer.toCID().toString())||(T.push(A.peer.toCID().toString()),B.push(A));return B},E=async()=>{const C=await this.client.sfip.swarm.peers(),T=x(C);return await _(T.map(B=>({adresse:B.addr.toString(),pair:B.peer.toCID().toString()})))};return this.vnements.on("changementConnexions",E),await E(),async()=>{this.vnements.off("changementConnexions",E)}}async suivreConnexionsDispositifs({f:_}){const x=async()=>await _(Object.values(this.dispositifsEnLigne));return this.vnements.on("membreVu",x),await x(),async()=>{this.vnements.off("membreVu",x)}}async suivreConnexionsMembres({f:_}){const x=async S=>{const C=async T=>{const B={};for(const A of T){const{idCompte:I}=A.infoDispositif;B[I]||(B[I]={infoMembre:{idCompte:I,dispositifs:[]}});const{infoMembre:D,vu:M}=B[I];D.dispositifs.push(A.infoDispositif),B[I].vu=M?A.vu?Math.max(M,A.vu):M:A.vu}return await S(Object.values(B))};return await this.suivreConnexionsDispositifs({f:C})},E=async(S,C,T)=>await this.suivreProtocolesMembre({idCompte:S,f:B=>{C({infoMembre:{...T.infoMembre,protocoles:Object.values(B).flat()},vu:T.vu})}});return await this.client.suivreBdsDeFonctionListe({fListe:x,f:_,fBranche:E,fIdBdDeBranche:S=>S.infoMembre.idCompte,fCode:S=>S.infoMembre.idCompte})}async suivreProtocolesMembre({f:_,idCompte:x}){return await this.client.suivreBdDicDeClef({id:x||await this.client.obtIdCompte(),clef:"protocoles",schma:schmaStructureBdCompte,f:_})}async suivreProtocolesDispositif({idDispositif:_,f:x}){const E=_||await this.client.obtIdDispositif();return await suivreBdDeFonction({fRacine:async({fSuivreRacine:B})=>await this.suivreConnexionsDispositifs({f:async A=>{const I=A.find(D=>D.infoDispositif.idDispositif===E);if(I){const{idCompte:D}=I.infoDispositif;return await B(D)}else return await B(void 0)}}),f:async B=>{if(B)return await x(B[E])},fSuivre:async({id:B,fSuivreBd:A})=>await this.suivreProtocolesMembre({f:A,idCompte:B})})}async rechercher({f:_,nRsultatsDsirs:x,fRecherche:E,fConfiance:S,fQualit:C,fObjectif:T,fScore:B}){B||(B=_e=>(_e.confiance+_e.qualit+_e.objectif.score)/3),T=T||rechercherTous();const A={},I={},D=3e3;let M,V=3,L=!1;const F=async _e=>{V=_e,await re(_e),M&&clearTimeout(M)},j=(_e=D)=>{if(L)return;M&&clearTimeout(M);const ye=Object.values(A).map(oe=>oe.rsultats).flat().map(oe=>oe.rsultatObjectif.score),ie=ye.length>=x?Math.min(...ye.slice(0,x)):0,W=Object.values(A).reduce(function(oe,se){return oe[String(se.membre.profondeur)]=oe[String(se.membre.profondeur)]||[],oe[String(se.membre.profondeur)].push(...se.rsultats),oe},{}),z=Object.entries(W).sort((oe,se)=>Number(oe[0])<Number(se[0])?-1:1).map(oe=>oe[1]).map(oe=>oe.filter(se=>se.rsultatObjectif.score>=ie).length),J=z.slice(z.length-3),ee=z.slice(z.length-4),ae=Math.max(3,sum$2(J)?V+1:sum$2(ee)?V:V-1);ae>V?M=setTimeout(()=>F(ae),_e):ae<V&&F(ae)},U=async()=>{const ye=Object.values(A).map(ie=>ie.rsultats).flat().sort((ie,W)=>ie.rsultatObjectif.score<W.rsultatObjectif.score?1:-1);await _(ye.slice(0,x)),j()},H=async _e=>{const{idCompte:ye}=_e,ie=async J=>await E({idCompte:_e.idCompte,fSuivi:async ee=>await J(ee||[])}),W=async J=>(A[ye].rsultats=J,await U()),O=async(J,ee)=>{const ae={id:J},oe=async()=>{const{objectif:we,confiance:xe,qualit:$e}=ae;if(we&&xe!==void 0&&$e!==void 0){const ge={id:J,rsultatObjectif:{...we,score:B(ae)}};return await ee(ge)}else return await ee(void 0)},se=async we=>(ae.objectif=we,await oe()),G=await T(this.client,J,se),te=await S(J,async we=>(ae.confiance=we,await oe())),he=await C(J,async we=>(ae.qualit=we,await oe()));return async()=>{await Promise.all([G(),te(),he()])}};A[ye]={rsultats:[],membre:_e,mettreJour:U};const z=await this.client.suivreBdsDeFonctionListe({fListe:ie,f:W,fBranche:O});I[ye]=z},Y=async _e=>{await I[_e](),delete A[_e],delete I[_e],await U()},Z=new Semaphore,ne=async _e=>{await Z.acquire("rechercher"),_e=_e.filter(O=>O.confiance>=0);const ye=_e.filter(O=>!A[O.idCompte]),ie=Object.keys(A).filter(O=>!_e.find(z=>z.idCompte===O)),W=_e.filter(O=>{const z=A[O.idCompte];return z&&(O.confiance!==z.membre.confiance||O.profondeur!==z.membre.profondeur)});await Promise.all(ye.map(H)),await Promise.all(W.map(async O=>await A[O.idCompte].mettreJour(O))),await Promise.all(ie.map(O=>Y(O))),Z.release("rechercher")},{fChangerProfondeur:re,fOublier:X}=await this.suivreComptesRseauEtEnLigne({f:ne,profondeur:V});return{fChangerN:async _e=>{const ye=x;x=_e,_e!==ye&&(await U(),j(0))},fOublier:async()=>{L=!0,M&&clearTimeout(M),await X(),await Promise.all(Object.values(I).map(_e=>_e()))}}}async rechercherMembres({f:_,nRsultatsDsirs:x,fObjectif:E}){const S=async(B,A)=>{const{fOublier:I}=await this.suivreConfianceMonRseauPourMembre({idCompte:B,f:A,profondeur:4});return I},C=async({idCompte:B,fSuivi:A})=>(await A([B]),faisRien),T=async(B,A)=>await rechercherProfilsSelonActivit()(this.client,B,D=>{A(D?.score||0)});return await this.rechercher({f:_,nRsultatsDsirs:x,fRecherche:C,fConfiance:S,fQualit:T,fObjectif:E})}async suivreConfianceAuteurs({idItem:_,clef:x,f:E}){const S=async A=>await this.suivreAuteursObjet({idObjet:_,clef:x,f:async I=>{const D=I.filter(M=>M.accept).map(M=>M.idCompte);return await A(D)}}),C=async(A,I)=>{const{fOublier:D}=await this.suivreConfianceMonRseauPourMembre({idCompte:A,f:I,profondeur:4});return D},T=async A=>{const I=A.reduce((D,M)=>D+M,0);await E(I)},B=A=>A.flat();return await this.client.suivreBdsDeFonctionListe({fListe:S,f:T,fBranche:C,fRduction:B})}async rechercherObjets({f:_,clef:x,nRsultatsDsirs:E,fRecherche:S,fRechercheLesMiens:C,fQualit:T,fObjectif:B,toutLeRseau:A=!0}){if(!A){const M=B||rechercherTous();return await this.client.suivreBdsDeFonctionListe({fListe:async V=>({fOublier:await C(V),fChangerN:()=>Promise.resolve()}),f:_,fBranche:async(V,L)=>await M(this.client,V,L)})}const I=async({idCompte:M,fSuivi:V})=>{const L={propres:[],favoris:[]},F=async()=>{const H=[...new Set([...L.propres,...L.favoris])];await V(H)},j=await S({idCompte:M,f:async H=>{L.propres=H||[],await F()}}),U=await this.suivreFavorisMembre({idCompte:M,f:async H=>{L.favoris=H?Object.keys(H):[],await F()}});return async()=>{await j(),await U()}},D=async(M,V)=>await this.suivreConfianceAuteurs({idItem:M,clef:x,f:V});return await this.rechercher({f:_,nRsultatsDsirs:E,fRecherche:I,fConfiance:D,fQualit:T,fObjectif:B})}async rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S=!0}){const C=this.suivreNuesMembre.bind(this),T=async(A,I)=>await this.client.nues.suivreQualitNue({idNue:A,f:I}),B=async A=>await this.client.nues.suivreNues({f:A});return await this.rechercherObjets({f:_,clef:"nues",nRsultatsDsirs:x,fRecherche:C,fRechercheLesMiens:B,fQualit:T,fObjectif:E,toutLeRseau:S})}async rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S=!0}){const C=this.suivreBdsMembre.bind(this),T=async(A,I)=>{const D=async M=>await I(M.total);return await this.client.bds.suivreQualitBd({idBd:A,f:D})},B=async A=>await this.client.bds.suivreBds({f:A});return await this.rechercherObjets({f:_,clef:"bds",nRsultatsDsirs:x,fRecherche:C,fRechercheLesMiens:B,fQualit:T,fObjectif:E,toutLeRseau:S})}async rechercherVariables({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S=!0}){const C=this.suivreVariablesMembre.bind(this),T=async(A,I)=>await this.client.variables.suivreQualitVariable({idVariable:A,f:I}),B=async A=>await this.client.variables.suivreVariables({f:A});return await this.rechercherObjets({f:_,clef:"variables",nRsultatsDsirs:x,fRecherche:C,fRechercheLesMiens:B,fQualit:T,fObjectif:E,toutLeRseau:S})}async rechercherMotsClefs({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S=!0}){const C=this.suivreMotsClefsMembre.bind(this),T=async(A,I)=>await this.client.motsClefs.suivreQualitMotClef({idMotClef:A,f:I}),B=async A=>await this.client.motsClefs.suivreMotsClefs({f:A});return await this.rechercherObjets({f:_,clef:"motsClefs",nRsultatsDsirs:x,fRecherche:C,fRechercheLesMiens:B,fQualit:T,fObjectif:E,toutLeRseau:S})}async rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:E,toutLeRseau:S=!0}){const C=this.suivreProjetsMembre.bind(this),T=async(A,I)=>await this.client.projets.suivreQualitProjet({idProjet:A,f:I}),B=async A=>await this.client.projets.suivreProjets({f:A});return await this.rechercherObjets({f:_,clef:"projets",nRsultatsDsirs:x,fRecherche:C,fRechercheLesMiens:B,fQualit:T,fObjectif:E,toutLeRseau:S})}async suivreAuteursObjet({idObjet:_,clef:x,f:E}){const S=async I=>await this.client.suivreAccsBd({id:_,f:I}),C=async(I,D,M)=>{const V=L=>(L=L||[],D([{idCompte:M.idCompte,rle:M.rle,accept:L.includes(_)}]));return await this.client.suivreBdListeDeClef({id:I,clef:x,f:V})},T=I=>I.idCompte,B=I=>I.idCompte;return this.client.suivreBdsDeFonctionListe({fListe:S,f:E,fBranche:C,fIdBdDeBranche:T,fCode:B})}async suivreAuteursMotClef({idMotClef:_,f:x}){return await this.suivreAuteursObjet({idObjet:_,clef:"motsClefs",f:x})}async suivreAuteursVariable({idVariable:_,f:x}){return await this.suivreAuteursObjet({idObjet:_,clef:"variables",f:x})}async suivreAuteursBd({idBd:_,f:x}){return await this.suivreAuteursObjet({idObjet:_,clef:"bds",f:x})}async suivreAuteursProjet({idProjet:_,f:x}){return await this.suivreAuteursObjet({idObjet:_,clef:"projets",f:x})}async suivreObjetsMembre({idCompte:_,fListeObjets:x,fSuivi:E}){return await this.client.suivreBdsSelonCondition({fListe:x,fCondition:async(S,C)=>await this.client.suivreAccsBd({id:S,f:T=>C(T.map(B=>B.idCompte).includes(_))}),f:E})}async suivreBdsMembre({idCompte:_,f:x}){return await this.suivreObjetsMembre({idCompte:_,fListeObjets:async E=>await this.client.bds.suivreBds({f:E,idCompte:_}),fSuivi:x})}async suivreProjetsMembre({idCompte:_,f:x}){return await this.suivreObjetsMembre({idCompte:_,fListeObjets:async E=>await this.client.projets.suivreProjets({f:E,idCompte:_}),fSuivi:x})}async suivreFavorisMembre({idCompte:_,f:x}){return await this.client.favoris.suivreFavoris({f:x,idCompte:_})}async suivreVariablesMembre({idCompte:_,f:x}){return await this.suivreObjetsMembre({idCompte:_,fListeObjets:async E=>await this.client.variables.suivreVariables({f:E,idCompte:_}),fSuivi:x})}async suivreMotsClefsMembre({idCompte:_,f:x}){return await this.suivreObjetsMembre({idCompte:_,fListeObjets:async E=>await this.client.motsClefs.suivreMotsClefs({f:E,idCompte:_}),fSuivi:x})}async suivreNuesMembre({idCompte:_,f:x}){return await this.suivreObjetsMembre({idCompte:_,fListeObjets:async E=>await this.client.nues.suivreNues({f:E,idCompte:_}),fSuivi:x})}async suivreFavorisObjet({idObjet:_,f:x,profondeur:E}){const S=async B=>{const A=B.filter(I=>I.idObjet===_);await x(A)},C=async B=>{const A=async I=>await B([this.client.idCompte,...I.map(D=>D.idCompte)]);return await this.suivreComptesRseauEtEnLigne({f:A,profondeur:E,idCompteDbut:this.client.idCompte})},T=async(B,A)=>await this.suivreFavorisMembre({idCompte:B,f:I=>A(I?I.map(D=>({idCompte:B,...D})):void 0)});return await this.client.suivreBdsDeFonctionRecherche({fListe:C,f:S,fBranche:T})}async suivreRplications({idObjet:_,f:x,profondeur:E}){const S={connexionsMembres:[],connexionsDispositifs:[],favoris:[]},C=async()=>{const{connexionsMembres:U,favoris:H}=S,Y=H.map(X=>X.favoris.idCompte),Z=U.filter(X=>Y.includes(X.infoMembre.idCompte)),ne=(await Promise.all(H.map(async X=>{const{favoris:ce,dispositifs:ue}=X;return await Promise.all(ue.map(async _e=>{const ye=S.connexionsDispositifs.find(O=>O.infoDispositif.idDispositif===_e)?.vu,ie=S.connexionsDispositifs.find(O=>O.infoDispositif.idDispositif===_e)?.infoDispositif.idCompte;return{idObjet:_,idDispositif:_e,idCompte:ie,bd:await this.client.favoris.estpinglSurDispositif({dispositifs:ce.dispositifs,idDispositif:_e}),fichiers:await this.client.favoris.estpinglSurDispositif({dispositifs:ce.dispositifsFichiers,idDispositif:_e}),rcursif:ce.rcursif,vu:ye}}))}))).flat();return await x({membres:Z,dispositifs:ne})},T=await this.suivreConnexionsMembres({f:async U=>(S.connexionsMembres=U,await C())}),B=await this.suivreConnexionsDispositifs({f:async U=>(S.connexionsDispositifs=U,await C())}),A=async U=>(S.favoris=U,await C()),I=async U=>await this.suivreFavorisObjet({idObjet:_,f:U,profondeur:E}),D=async(U,H,Y)=>{const Z=async re=>await H({favoris:Y,dispositifs:re}),ne=await this.client.suivreDispositifs({f:Z,idCompte:U});return async()=>{await ne()}},M=U=>U.idCompte,V=U=>U.idCompte,{fOublier:L,fChangerProfondeur:F}=await this.client.suivreBdsDeFonctionRecherche({fListe:I,f:A,fBranche:D,fIdBdDeBranche:M,fCode:V});return{fOublier:async()=>{await L(),await T(),await B()},fChangerProfondeur:F}}async suivreBdsDeNue({idNue:_,f:x,nRsultatsDsirs:E}){const S=async(T,B)=>await this.client.bds.rechercherBdsParNue({idNue:_,f:B,idCompte:T}),C=async T=>await this.suivreComptesRseauEtEnLigne({f:B=>T(B.map(A=>A.idCompte)),profondeur:E});return await this.client.suivreBdsDeFonctionRecherche({fListe:C,f:x,fBranche:S})}async suivrelmentsDeTableauxUniques({idNueUnique:_,clef:x,f:E,nBds:S=100}){const C=async I=>{const D=async V=>await this.suivreBdsDeNue({idNue:_,f:V,nRsultatsDsirs:S}),M=async(V,L)=>await this.suivreAuteursBd({idBd:V,f:async F=>{const j=F.find(H=>H.accept)?.idCompte;return await L(j?{bd:V,idCompte:j}:void 0)}});return await this.client.suivreBdsDeFonctionRecherche({fListe:D,f:I,fBranche:M})},T=async(I,D,M)=>{const{idCompte:V}=M;return await suivreBdDeFonction({fRacine:async({fSuivreRacine:U})=>await this.client.bds.suivreIdTableauParClef({idBd:I,clef:x,f:H=>{H&&U(H)}}),f:async U=>await D(U||[]),fSuivre:async({id:U,fSuivreBd:H})=>{const Y=async Z=>{const ne=Z.map(re=>({idCompte:V,lment:re}));return await H(ne)};return await this.client.tableaux.suivreDonnes({idTableau:U,f:Y})}})},B=I=>I.bd,A=I=>I.bd;return await this.client.suivreBdsDeFonctionRecherche({fListe:C,f:E,fBranche:T,fIdBdDeBranche:B,fCode:A})}async fermer(){this._ferm=!0,await Promise.all(this.fsOublier.map(_=>_()))}}__decorate([cacheSuivi],Rseau.prototype,"suivreFiables",null);__decorate([cacheSuivi],Rseau.prototype,"suivreBloqusPubliques",null);__decorate([cacheSuivi],Rseau.prototype,"suivreBloqus",null);__decorate([cacheSuivi],Rseau.prototype,"suivreRelationsImmdiates",null);__decorate([cacheRechercheParProfondeur],Rseau.prototype,"suivreRelationsConfiance",null);__decorate([cacheRechercheParProfondeur],Rseau.prototype,"suivreComptesRseau",null);__decorate([cacheSuivi],Rseau.prototype,"suivreConnexionsPostesSFIP",null);__decorate([cacheSuivi],Rseau.prototype,"suivreConnexionsDispositifs",null);__decorate([cacheSuivi],Rseau.prototype,"suivreConnexionsMembres",null);__decorate([cacheSuivi],Rseau.prototype,"suivreProtocolesMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreProtocolesDispositif",null);__decorate([cacheSuivi],Rseau.prototype,"suivreAuteursObjet",null);__decorate([cacheSuivi],Rseau.prototype,"suivreBdsMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreProjetsMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreFavorisMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreVariablesMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreMotsClefsMembre",null);__decorate([cacheSuivi],Rseau.prototype,"suivreNuesMembre",null);__decorate([cacheRechercheParNRsultats],Rseau.prototype,"suivreBdsDeNue",null);var base64={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(n,_){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var S in E)E.hasOwnProperty(S)&&(x[S]=E[S])},t(n,_)};return function(n,_){t(n,_);function x(){this.constructor=n}n.prototype=_===null?Object.create(_):(x.prototype=_.prototype,new x)}}();Object.defineProperty(base64,"__esModule",{value:!0});var INVALID_BYTE=256,Coder=function(){function t(n){n===void 0&&(n="="),this._paddingCharacter=n}return t.prototype.encodedLength=function(n){return this._paddingCharacter?(n+2)/3*4|0:(n*8+5)/6|0},t.prototype.encode=function(n){for(var _="",x=0;x<n.length-2;x+=3){var E=n[x]<<16|n[x+1]<<8|n[x+2];_+=this._encodeByte(E>>>3*6&63),_+=this._encodeByte(E>>>2*6&63),_+=this._encodeByte(E>>>1*6&63),_+=this._encodeByte(E>>>0*6&63)}var S=n.length-x;if(S>0){var E=n[x]<<16|(S===2?n[x+1]<<8:0);_+=this._encodeByte(E>>>3*6&63),_+=this._encodeByte(E>>>2*6&63),S===2?_+=this._encodeByte(E>>>1*6&63):_+=this._paddingCharacter||"",_+=this._paddingCharacter||""}return _},t.prototype.maxDecodedLength=function(n){return this._paddingCharacter?n/4*3|0:(n*6+7)/8|0},t.prototype.decodedLength=function(n){return this.maxDecodedLength(n.length-this._getPaddingLength(n))},t.prototype.decode=function(n){if(n.length===0)return new Uint8Array(0);for(var _=this._getPaddingLength(n),x=n.length-_,E=new Uint8Array(this.maxDecodedLength(x)),S=0,C=0,T=0,B=0,A=0,I=0,D=0;C<x-4;C+=4)B=this._decodeChar(n.charCodeAt(C+0)),A=this._decodeChar(n.charCodeAt(C+1)),I=this._decodeChar(n.charCodeAt(C+2)),D=this._decodeChar(n.charCodeAt(C+3)),E[S++]=B<<2|A>>>4,E[S++]=A<<4|I>>>2,E[S++]=I<<6|D,T|=B&INVALID_BYTE,T|=A&INVALID_BYTE,T|=I&INVALID_BYTE,T|=D&INVALID_BYTE;if(C<x-1&&(B=this._decodeChar(n.charCodeAt(C)),A=this._decodeChar(n.charCodeAt(C+1)),E[S++]=B<<2|A>>>4,T|=B&INVALID_BYTE,T|=A&INVALID_BYTE),C<x-2&&(I=this._decodeChar(n.charCodeAt(C+2)),E[S++]=A<<4|I>>>2,T|=I&INVALID_BYTE),C<x-3&&(D=this._decodeChar(n.charCodeAt(C+3)),E[S++]=I<<6|D,T|=D&INVALID_BYTE),T!==0)throw new Error("Base64Coder: incorrect characters for decoding");return E},t.prototype._encodeByte=function(n){var _=n;return _+=65,_+=25-n>>>8&0-65-26+97,_+=51-n>>>8&26-97-52+48,_+=61-n>>>8&52-48-62+43,_+=62-n>>>8&62-43-63+47,String.fromCharCode(_)},t.prototype._decodeChar=function(n){var _=INVALID_BYTE;return _+=(42-n&n-44)>>>8&-INVALID_BYTE+n-43+62,_+=(46-n&n-48)>>>8&-INVALID_BYTE+n-47+63,_+=(47-n&n-58)>>>8&-INVALID_BYTE+n-48+52,_+=(64-n&n-91)>>>8&-INVALID_BYTE+n-65+0,_+=(96-n&n-123)>>>8&-INVALID_BYTE+n-97+26,_},t.prototype._getPaddingLength=function(n){var _=0;if(this._paddingCharacter){for(var x=n.length-1;x>=0&&n[x]===this._paddingCharacter;x--)_++;if(n.length<4||_>2)throw new Error("Base64Coder: incorrect padding")}return _},t}();base64.Coder=Coder;var stdCoder=new Coder;function encode$2(t){return stdCoder.encode(t)}var encode_1$1=base64.encode=encode$2;function decode$3(t){return stdCoder.decode(t)}var decode_1$1=base64.decode=decode$3,URLSafeCoder=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n.prototype._encodeByte=function(_){var x=_;return x+=65,x+=25-_>>>8&0-65-26+97,x+=51-_>>>8&26-97-52+48,x+=61-_>>>8&52-48-62+45,x+=62-_>>>8&62-45-63+95,String.fromCharCode(x)},n.prototype._decodeChar=function(_){var x=INVALID_BYTE;return x+=(44-_&_-46)>>>8&-INVALID_BYTE+_-45+62,x+=(94-_&_-96)>>>8&-INVALID_BYTE+_-95+63,x+=(47-_&_-58)>>>8&-INVALID_BYTE+_-48+52,x+=(64-_&_-91)>>>8&-INVALID_BYTE+_-65+0,x+=(96-_&_-123)>>>8&-INVALID_BYTE+_-97+26,x},n}(Coder);base64.URLSafeCoder=URLSafeCoder;var urlSafeCoder=new URLSafeCoder;function encodeURLSafe(t){return urlSafeCoder.encode(t)}base64.encodeURLSafe=encodeURLSafe;function decodeURLSafe(t){return urlSafeCoder.decode(t)}base64.decodeURLSafe=decodeURLSafe;base64.encodedLength=function(t){return stdCoder.encodedLength(t)};base64.maxDecodedLength=function(t){return stdCoder.maxDecodedLength(t)};base64.decodedLength=function(t){return stdCoder.decodedLength(t)};var utf8$2={};Object.defineProperty(utf8$2,"__esModule",{value:!0});var INVALID_UTF16="utf8: invalid string",INVALID_UTF8="utf8: invalid source encoding";function encode$1(t){for(var n=new Uint8Array(encodedLength(t)),_=0,x=0;x<t.length;x++){var E=t.charCodeAt(x);E<128?n[_++]=E:E<2048?(n[_++]=192|E>>6,n[_++]=128|E&63):E<55296?(n[_++]=224|E>>12,n[_++]=128|E>>6&63,n[_++]=128|E&63):(x++,E=(E&1023)<<10,E|=t.charCodeAt(x)&1023,E+=65536,n[_++]=240|E>>18,n[_++]=128|E>>12&63,n[_++]=128|E>>6&63,n[_++]=128|E&63)}return n}var encode_1=utf8$2.encode=encode$1;function encodedLength(t){for(var n=0,_=0;_<t.length;_++){var x=t.charCodeAt(_);if(x<128)n+=1;else if(x<2048)n+=2;else if(x<55296)n+=3;else if(x<=57343){if(_>=t.length-1)throw new Error(INVALID_UTF16);_++,n+=4}else throw new Error(INVALID_UTF16)}return n}var encodedLength_1=utf8$2.encodedLength=encodedLength;function decode$2(t){for(var n=[],_=0;_<t.length;_++){var x=t[_];if(x&128){var E=void 0;if(x<224){if(_>=t.length)throw new Error(INVALID_UTF8);var S=t[++_];if((S&192)!==128)throw new Error(INVALID_UTF8);x=(x&31)<<6|S&63,E=128}else if(x<240){if(_>=t.length-1)throw new Error(INVALID_UTF8);var S=t[++_],C=t[++_];if((S&192)!==128||(C&192)!==128)throw new Error(INVALID_UTF8);x=(x&15)<<12|(S&63)<<6|C&63,E=2048}else if(x<248){if(_>=t.length-2)throw new Error(INVALID_UTF8);var S=t[++_],C=t[++_],T=t[++_];if((S&192)!==128||(C&192)!==128||(T&192)!==128)throw new Error(INVALID_UTF8);x=(x&15)<<18|(S&63)<<12|(C&63)<<6|T&63,E=65536}else throw new Error(INVALID_UTF8);if(x<E||x>=55296&&x<=57343)throw new Error(INVALID_UTF8);if(x>=65536){if(x>1114111)throw new Error(INVALID_UTF8);x-=65536,n.push(String.fromCharCode(55296|x>>10)),x=56320|x&1023}}n.push(String.fromCharCode(x))}return n.join("")}var decode_1=utf8$2.decode=decode$2;const utf8$1=_mergeNamespaces({__proto__:null,decode:decode_1,default:utf8$2,encode:encode_1,encodedLength:encodedLength_1},[utf8$2]);var browser$1={},encode={},encodeBuffer={},writeCore={},extBuffer={},bufferish={},bufferGlobal=c(typeof Buffer$5<"u"&&Buffer$5)||c(commonjsGlobal.Buffer)||c(typeof window<"u"&&window.Buffer)||commonjsGlobal.Buffer;function c(t){return t&&t.isBuffer&&t}var toString$1={}.toString,isarray=Array.isArray||function(t){return toString$1.call(t)=="[object Array]"},bufferishArray={exports:{}},hasRequiredBufferishArray;function requireBufferishArray(){if(hasRequiredBufferishArray)return bufferishArray.exports;hasRequiredBufferishArray=1;var t=requireBufferish(),n=bufferishArray.exports=_(0);n.alloc=_,n.concat=t.concat,n.from=x;function _(E){return new Array(E)}function x(E){if(!t.isBuffer(E)&&t.isView(E))E=t.Uint8Array.from(E);else if(t.isArrayBuffer(E))E=new Uint8Array(E);else{if(typeof E=="string")return t.from.call(n,E);if(typeof E=="number")throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(E)}return bufferishArray.exports}var bufferishBuffer={exports:{}},hasRequiredBufferishBuffer;function requireBufferishBuffer(){if(hasRequiredBufferishBuffer)return bufferishBuffer.exports;hasRequiredBufferishBuffer=1;var t=requireBufferish(),n=t.global,_=bufferishBuffer.exports=t.hasBuffer?x(0):[];_.alloc=t.hasBuffer&&n.alloc||x,_.concat=t.concat,_.from=E;function x(S){return new n(S)}function E(S){if(!t.isBuffer(S)&&t.isView(S))S=t.Uint8Array.from(S);else if(t.isArrayBuffer(S))S=new Uint8Array(S);else{if(typeof S=="string")return t.from.call(_,S);if(typeof S=="number")throw new TypeError('"value" argument must not be a number')}return n.from&&n.from.length!==1?n.from(S):new n(S)}return bufferishBuffer.exports}var bufferishUint8array={exports:{}},hasRequiredBufferishUint8array;function requireBufferishUint8array(){if(hasRequiredBufferishUint8array)return bufferishUint8array.exports;hasRequiredBufferishUint8array=1;var t=requireBufferish(),n=bufferishUint8array.exports=t.hasArrayBuffer?_(0):[];n.alloc=_,n.concat=t.concat,n.from=x;function _(E){return new Uint8Array(E)}function x(E){if(t.isView(E)){var S=E.byteOffset,C=E.byteLength;E=E.buffer,E.byteLength!==C&&(E.slice?E=E.slice(S,S+C):(E=new Uint8Array(E),E.byteLength!==C&&(E=Array.prototype.slice.call(E,S,S+C))))}else{if(typeof E=="string")return t.from.call(n,E);if(typeof E=="number")throw new TypeError('"value" argument must not be a number')}return new Uint8Array(E)}return bufferishUint8array.exports}var bufferishProto={},bufferLite={};bufferLite.copy=copy;bufferLite.toString=toString;bufferLite.write=write$1;function write$1(t,n){for(var _=this,x=n||(n|=0),E=t.length,S=0,C=0;C<E;)S=t.charCodeAt(C++),S<128?_[x++]=S:S<2048?(_[x++]=192|S>>>6,_[x++]=128|S&63):S<55296||S>57343?(_[x++]=224|S>>>12,_[x++]=128|S>>>6&63,_[x++]=128|S&63):(S=(S-55296<<10|t.charCodeAt(C++)-56320)+65536,_[x++]=240|S>>>18,_[x++]=128|S>>>12&63,_[x++]=128|S>>>6&63,_[x++]=128|S&63);return x-n}function toString(t,n,_){var x=this,E=n|0;_||(_=x.length);for(var S="",C=0;E<_;){if(C=x[E++],C<128){S+=String.fromCharCode(C);continue}(C&224)===192?C=(C&31)<<6|x[E++]&63:(C&240)===224?C=(C&15)<<12|(x[E++]&63)<<6|x[E++]&63:(C&248)===240&&(C=(C&7)<<18|(x[E++]&63)<<12|(x[E++]&63)<<6|x[E++]&63),C>=65536?(C-=65536,S+=String.fromCharCode((C>>>10)+55296,(C&1023)+56320)):S+=String.fromCharCode(C)}return S}function copy(t,n,_,x){var E;_||(_=0),!x&&x!==0&&(x=this.length),n||(n=0);var S=x-_;if(t===this&&_<n&&n<x)for(E=S-1;E>=0;E--)t[E+n]=this[E+_];else for(E=0;E<S;E++)t[E+n]=this[E+_];return S}var hasRequiredBufferishProto;function requireBufferishProto(){if(hasRequiredBufferishProto)return bufferishProto;hasRequiredBufferishProto=1;var t=bufferLite;bufferishProto.copy=S,bufferishProto.slice=C,bufferishProto.toString=T,bufferishProto.write=B("write");var n=requireBufferish(),_=n.global,x=n.hasBuffer&&"TYPED_ARRAY_SUPPORT"in _,E=x&&!_.TYPED_ARRAY_SUPPORT;function S(A,I,D,M){var V=n.isBuffer(this),L=n.isBuffer(A);if(V&&L)return this.copy(A,I,D,M);if(!E&&!V&&!L&&n.isView(this)&&n.isView(A)){var F=D||M!=null?C.call(this,D,M):this;return A.set(F,I),F.length}else return t.copy.call(this,A,I,D,M)}function C(A,I){var D=this.slice||!E&&this.subarray;if(D)return D.call(this,A,I);var M=n.alloc.call(this,I-A);return S.call(this,M,0,A,I),M}function T(A,I,D){var M=!x&&n.isBuffer(this)?this.toString:t.toString;return M.apply(this,arguments)}function B(A){return I;function I(){var D=this[A]||t[A];return D.apply(this,arguments)}}return bufferishProto}var hasRequiredBufferish;function requireBufferish(){return hasRequiredBufferish||(hasRequiredBufferish=1,function(t){var n=t.global=bufferGlobal,_=t.hasBuffer=n&&!!n.isBuffer,x=t.hasArrayBuffer=typeof ArrayBuffer<"u",E=t.isArray=isarray;t.isArrayBuffer=x?F:H;var S=t.isBuffer=_?n.isBuffer:H,C=t.isView=x?ArrayBuffer.isView||Y("ArrayBuffer","buffer"):H;t.alloc=M,t.concat=V,t.from=D;var T=t.Array=requireBufferishArray(),B=t.Buffer=requireBufferishBuffer(),A=t.Uint8Array=requireBufferishUint8array(),I=t.prototype=requireBufferishProto();function D(Z){return typeof Z=="string"?j.call(this,Z):U(this).from(Z)}function M(Z){return U(this).alloc(Z)}function V(Z,ne){ne||(ne=0,Array.prototype.forEach.call(Z,ue));var re=this!==t&&this||Z[0],X=M.call(re,ne),ce=0;return Array.prototype.forEach.call(Z,_e),X;function ue(ye){ne+=ye.length}function _e(ye){ce+=I.copy.call(ye,X,ce)}}var L=Y("ArrayBuffer");function F(Z){return Z instanceof ArrayBuffer||L(Z)}function j(Z){var ne=Z.length*3,re=M.call(this,ne),X=I.write.call(re,Z);return ne!==X&&(re=I.slice.call(re,0,X)),re}function U(Z){return S(Z)?B:C(Z)?A:E(Z)?T:_?B:x?A:T}function H(){return!1}function Y(Z,ne){return Z="[object "+Z+"]",function(re){return re!=null&&{}.toString.call(ne?re[ne]:re)===Z}}}(bufferish)),bufferish}extBuffer.ExtBuffer=ExtBuffer$1;var Bufferish$5=requireBufferish();function ExtBuffer$1(t,n){if(!(this instanceof ExtBuffer$1))return new ExtBuffer$1(t,n);this.buffer=Bufferish$5.from(t),this.type=n}var extPacker={},hasRequiredExtPacker;function requireExtPacker(){if(hasRequiredExtPacker)return extPacker;hasRequiredExtPacker=1,extPacker.setExtPackers=S;var t=requireBufferish(),n=t.global,_=t.Uint8Array.from,x,E={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function S(I){I.addExtPacker(14,Error,[A,C]),I.addExtPacker(1,EvalError,[A,C]),I.addExtPacker(2,RangeError,[A,C]),I.addExtPacker(3,ReferenceError,[A,C]),I.addExtPacker(4,SyntaxError,[A,C]),I.addExtPacker(5,TypeError,[A,C]),I.addExtPacker(6,URIError,[A,C]),I.addExtPacker(10,RegExp,[B,C]),I.addExtPacker(11,Boolean,[T,C]),I.addExtPacker(12,String,[T,C]),I.addExtPacker(13,Date,[Number,C]),I.addExtPacker(15,Number,[T,C]),typeof Uint8Array<"u"&&(I.addExtPacker(17,Int8Array,_),I.addExtPacker(18,Uint8Array,_),I.addExtPacker(19,Int16Array,_),I.addExtPacker(20,Uint16Array,_),I.addExtPacker(21,Int32Array,_),I.addExtPacker(22,Uint32Array,_),I.addExtPacker(23,Float32Array,_),typeof Float64Array<"u"&&I.addExtPacker(24,Float64Array,_),typeof Uint8ClampedArray<"u"&&I.addExtPacker(25,Uint8ClampedArray,_),I.addExtPacker(26,ArrayBuffer,_),I.addExtPacker(29,DataView,_)),t.hasBuffer&&I.addExtPacker(27,n,t.from)}function C(I){return x||(x=requireEncode().encode),x(I)}function T(I){return I.valueOf()}function B(I){I=RegExp.prototype.toString.call(I).split("/"),I.shift();var D=[I.pop()];return D.unshift(I.join("/")),D}function A(I){var D={};for(var M in E)D[M]=I[M];return D}return extPacker}var writeType={},int64Buffer={};(function(t){(function(n){var _="undefined",x=_!==typeof Buffer$5&&Buffer$5,E=_!==typeof Uint8Array&&Uint8Array,S=_!==typeof ArrayBuffer&&ArrayBuffer,C=[0,0,0,0,0,0,0,0],T=Array.isArray||re,B=4294967296,A=16777216,I;D("Uint64BE",!0,!0),D("Int64BE",!0,!1),D("Uint64LE",!1,!0),D("Int64LE",!1,!1);function D(X,ce,ue){var _e=ce?0:4,ye=ce?4:0,ie=ce?0:3,W=ce?1:2,O=ce?2:1,z=ce?3:0,J=ce?H:Z,ee=ce?Y:ne,ae=G.prototype,oe="is"+X,se="_"+oe;return ae.buffer=void 0,ae.offset=0,ae[se]=!0,ae.toNumber=he,ae.toString=Ee,ae.toJSON=he,ae.toArray=M,x&&(ae.toBuffer=V),E&&(ae.toArrayBuffer=L),G[oe]=q,n[X]=G,G;function G($e,ge,Se,me){return this instanceof G?te(this,$e,ge,Se,me):new G($e,ge,Se,me)}function q($e){return!!($e&&$e[se])}function te($e,ge,Se,me,Be){if(E&&S&&(ge instanceof S&&(ge=new E(ge)),me instanceof S&&(me=new E(me))),!ge&&!Se&&!me&&!I){$e.buffer=U(C,0);return}if(!F(ge,Se)){var ve=I||Array;Be=Se,me=ge,Se=0,ge=new ve(8)}$e.buffer=ge,$e.offset=Se|=0,_!==typeof me&&(typeof me=="string"?fe(ge,Se,me,Be||10):F(me,Be)?j(ge,Se,me,Be):typeof Be=="number"?(we(ge,Se+_e,me),we(ge,Se+ye,Be)):me>0?J(ge,Se,me):me<0?ee(ge,Se,me):j(ge,Se,C,0))}function fe($e,ge,Se,me){var Be=0,ve=Se.length,Ae=0,Ve=0;Se[0]==="-"&&Be++;for(var Pe=Be;Be<ve;){var Re=parseInt(Se[Be++],me);if(!(Re>=0))break;Ve=Ve*me+Re,Ae=Ae*me+Math.floor(Ve/B),Ve%=B}Pe&&(Ae=~Ae,Ve?Ve=B-Ve:Ae++),we($e,ge+_e,Ae),we($e,ge+ye,Ve)}function he(){var $e=this.buffer,ge=this.offset,Se=xe($e,ge+_e),me=xe($e,ge+ye);return ue||(Se|=0),Se?Se*B+me:me}function Ee($e){var ge=this.buffer,Se=this.offset,me=xe(ge,Se+_e),Be=xe(ge,Se+ye),ve="",Ae=!ue&&me&2147483648;for(Ae&&(me=~me,Be=B-Be),$e=$e||10;;){var Ve=me%$e*B+Be;if(me=Math.floor(me/$e),Be=Math.floor(Ve/$e),ve=(Ve%$e).toString($e)+ve,!me&&!Be)break}return Ae&&(ve="-"+ve),ve}function we($e,ge,Se){$e[ge+z]=Se&255,Se=Se>>8,$e[ge+O]=Se&255,Se=Se>>8,$e[ge+W]=Se&255,Se=Se>>8,$e[ge+ie]=Se&255}function xe($e,ge){return $e[ge+ie]*A+($e[ge+W]<<16)+($e[ge+O]<<8)+$e[ge+z]}}function M(X){var ce=this.buffer,ue=this.offset;return I=null,X!==!1&&ue===0&&ce.length===8&&T(ce)?ce:U(ce,ue)}function V(X){var ce=this.buffer,ue=this.offset;if(I=x,X!==!1&&ue===0&&ce.length===8&&Buffer$5.isBuffer(ce))return ce;var _e=new x(8);return j(_e,0,ce,ue),_e}function L(X){var ce=this.buffer,ue=this.offset,_e=ce.buffer;if(I=E,X!==!1&&ue===0&&_e instanceof S&&_e.byteLength===8)return _e;var ye=new E(8);return j(ye,0,ce,ue),ye.buffer}function F(X,ce){var ue=X&&X.length;return ce|=0,ue&&ce+8<=ue&&typeof X[ce]!="string"}function j(X,ce,ue,_e){ce|=0,_e|=0;for(var ye=0;ye<8;ye++)X[ce++]=ue[_e++]&255}function U(X,ce){return Array.prototype.slice.call(X,ce,ce+8)}function H(X,ce,ue){for(var _e=ce+8;_e>ce;)X[--_e]=ue&255,ue/=256}function Y(X,ce,ue){var _e=ce+8;for(ue++;_e>ce;)X[--_e]=-ue&255^255,ue/=256}function Z(X,ce,ue){for(var _e=ce+8;ce<_e;)X[ce++]=ue&255,ue/=256}function ne(X,ce,ue){var _e=ce+8;for(ue++;ce<_e;)X[ce++]=-ue&255^255,ue/=256}function re(X){return!!X&&Object.prototype.toString.call(X)=="[object Array]"}})(typeof t.nodeName!="string"?t:commonjsGlobal||{})})(int64Buffer);var writeToken={},writeUint8={},constant$1=writeUint8.uint8=new Array(256);for(var i=0;i<=255;i++)constant$1[i]=write0(i);function write0(t){return function(n){var _=n.reserve(1);n.buffer[_]=t}}var ieee754$1=ieee754$2,Int64Buffer$2=int64Buffer,Uint64BE$2=Int64Buffer$2.Uint64BE,Int64BE$2=Int64Buffer$2.Int64BE,uint8$2=writeUint8.uint8,Bufferish$4=requireBufferish(),Buffer$1=Bufferish$4.global,IS_BUFFER_SHIM=Bufferish$4.hasBuffer&&"TYPED_ARRAY_SUPPORT"in Buffer$1,NO_TYPED_ARRAY=IS_BUFFER_SHIM&&!Buffer$1.TYPED_ARRAY_SUPPORT,Buffer_prototype=Bufferish$4.hasBuffer&&Buffer$1.prototype||{};writeToken.getWriteToken=getWriteToken;function getWriteToken(t){return t&&t.uint8array?init_uint8array():NO_TYPED_ARRAY||Bufferish$4.hasBuffer&&t&&t.safe?init_safe():init_token$1()}function init_uint8array(){var t=init_token$1();return t[202]=writeN(202,4,writeFloatBE),t[203]=writeN(203,8,writeDoubleBE),t}function init_token$1(){var t=uint8$2.slice();return t[196]=write1(196),t[197]=write2(197),t[198]=write4(198),t[199]=write1(199),t[200]=write2(200),t[201]=write4(201),t[202]=writeN(202,4,Buffer_prototype.writeFloatBE||writeFloatBE,!0),t[203]=writeN(203,8,Buffer_prototype.writeDoubleBE||writeDoubleBE,!0),t[204]=write1(204),t[205]=write2(205),t[206]=write4(206),t[207]=writeN(207,8,writeUInt64BE),t[208]=write1(208),t[209]=write2(209),t[210]=write4(210),t[211]=writeN(211,8,writeInt64BE),t[217]=write1(217),t[218]=write2(218),t[219]=write4(219),t[220]=write2(220),t[221]=write4(221),t[222]=write2(222),t[223]=write4(223),t}function init_safe(){var t=uint8$2.slice();return t[196]=writeN(196,1,Buffer$1.prototype.writeUInt8),t[197]=writeN(197,2,Buffer$1.prototype.writeUInt16BE),t[198]=writeN(198,4,Buffer$1.prototype.writeUInt32BE),t[199]=writeN(199,1,Buffer$1.prototype.writeUInt8),t[200]=writeN(200,2,Buffer$1.prototype.writeUInt16BE),t[201]=writeN(201,4,Buffer$1.prototype.writeUInt32BE),t[202]=writeN(202,4,Buffer$1.prototype.writeFloatBE),t[203]=writeN(203,8,Buffer$1.prototype.writeDoubleBE),t[204]=writeN(204,1,Buffer$1.prototype.writeUInt8),t[205]=writeN(205,2,Buffer$1.prototype.writeUInt16BE),t[206]=writeN(206,4,Buffer$1.prototype.writeUInt32BE),t[207]=writeN(207,8,writeUInt64BE),t[208]=writeN(208,1,Buffer$1.prototype.writeInt8),t[209]=writeN(209,2,Buffer$1.prototype.writeInt16BE),t[210]=writeN(210,4,Buffer$1.prototype.writeInt32BE),t[211]=writeN(211,8,writeInt64BE),t[217]=writeN(217,1,Buffer$1.prototype.writeUInt8),t[218]=writeN(218,2,Buffer$1.prototype.writeUInt16BE),t[219]=writeN(219,4,Buffer$1.prototype.writeUInt32BE),t[220]=writeN(220,2,Buffer$1.prototype.writeUInt16BE),t[221]=writeN(221,4,Buffer$1.prototype.writeUInt32BE),t[222]=writeN(222,2,Buffer$1.prototype.writeUInt16BE),t[223]=writeN(223,4,Buffer$1.prototype.writeUInt32BE),t}function write1(t){return function(n,_){var x=n.reserve(2),E=n.buffer;E[x++]=t,E[x]=_}}function write2(t){return function(n,_){var x=n.reserve(3),E=n.buffer;E[x++]=t,E[x++]=_>>>8,E[x]=_}}function write4(t){return function(n,_){var x=n.reserve(5),E=n.buffer;E[x++]=t,E[x++]=_>>>24,E[x++]=_>>>16,E[x++]=_>>>8,E[x]=_}}function writeN(t,n,_,x){return function(E,S){var C=E.reserve(n+1);E.buffer[C++]=t,_.call(E.buffer,S,C,x)}}function writeUInt64BE(t,n){new Uint64BE$2(this,n,t)}function writeInt64BE(t,n){new Int64BE$2(this,n,t)}function writeFloatBE(t,n){ieee754$1.write(this,t,n,!1,23,4)}function writeDoubleBE(t,n){ieee754$1.write(this,t,n,!1,52,8)}var IS_ARRAY$1=isarray,Int64Buffer$1=int64Buffer,Uint64BE$1=Int64Buffer$1.Uint64BE,Int64BE$1=Int64Buffer$1.Int64BE,Bufferish$3=requireBufferish(),BufferProto$1=requireBufferishProto(),WriteToken=writeToken,uint8$1=writeUint8.uint8,ExtBuffer=extBuffer.ExtBuffer,HAS_UINT8ARRAY=typeof Uint8Array<"u",HAS_MAP$1=typeof Map<"u",extmap=[];extmap[1]=212;extmap[2]=213;extmap[4]=214;extmap[8]=215;extmap[16]=216;writeType.getWriteType=getWriteType;function getWriteType(t){var n=WriteToken.getWriteToken(t),_=t&&t.useraw,x=HAS_UINT8ARRAY&&t&&t.binarraybuffer,E=x?Bufferish$3.isArrayBuffer:Bufferish$3.isBuffer,S=x?ne:Z,C=HAS_MAP$1&&t&&t.usemap,T=C?ce:X,B={boolean:A,function:H,number:I,object:_?U:j,string:F(_?L:V),symbol:H,undefined:H};return B;function A(_e,ye){var ie=ye?195:194;n[ie](_e,ye)}function I(_e,ye){var ie=ye|0,W;if(ye!==ie){W=203,n[W](_e,ye);return}else-32<=ie&&ie<=127?W=ie&255:0<=ie?W=ie<=255?204:ie<=65535?205:206:W=-128<=ie?208:-32768<=ie?209:210;n[W](_e,ie)}function D(_e,ye){var ie=207;n[ie](_e,ye.toArray())}function M(_e,ye){var ie=211;n[ie](_e,ye.toArray())}function V(_e){return _e<32?1:_e<=255?2:_e<=65535?3:5}function L(_e){return _e<32?1:_e<=65535?3:5}function F(_e){return ye;function ye(ie,W){var O=W.length,z=5+O*3;ie.offset=ie.reserve(z);var J=ie.buffer,ee=_e(O),ae=ie.offset+ee;O=BufferProto$1.write.call(J,W,ae);var oe=_e(O);if(ee!==oe){var se=ae+oe-ee,G=ae+O;BufferProto$1.copy.call(J,J,se,ae,G)}var q=oe===1?160+O:oe<=3?215+oe:219;n[q](ie,O),ie.offset+=O}}function j(_e,ye){if(ye===null)return H(_e,ye);if(E(ye))return S(_e,ye);if(IS_ARRAY$1(ye))return Y(_e,ye);if(Uint64BE$1.isUint64BE(ye))return D(_e,ye);if(Int64BE$1.isInt64BE(ye))return M(_e,ye);var ie=_e.codec.getExtPacker(ye);if(ie&&(ye=ie(ye)),ye instanceof ExtBuffer)return re(_e,ye);T(_e,ye)}function U(_e,ye){if(E(ye))return ue(_e,ye);j(_e,ye)}function H(_e,ye){var ie=192;n[ie](_e,ye)}function Y(_e,ye){var ie=ye.length,W=ie<16?144+ie:ie<=65535?220:221;n[W](_e,ie);for(var O=_e.codec.encode,z=0;z<ie;z++)O(_e,ye[z])}function Z(_e,ye){var ie=ye.length,W=ie<255?196:ie<=65535?197:198;n[W](_e,ie),_e.send(ye)}function ne(_e,ye){Z(_e,new Uint8Array(ye))}function re(_e,ye){var ie=ye.buffer,W=ie.length,O=extmap[W]||(W<255?199:W<=65535?200:201);n[O](_e,W),uint8$1[ye.type](_e),_e.send(ie)}function X(_e,ye){var ie=Object.keys(ye),W=ie.length,O=W<16?128+W:W<=65535?222:223;n[O](_e,W);var z=_e.codec.encode;ie.forEach(function(J){z(_e,J),z(_e,ye[J])})}function ce(_e,ye){if(!(ye instanceof Map))return X(_e,ye);var ie=ye.size,W=ie<16?128+ie:ie<=65535?222:223;n[W](_e,ie);var O=_e.codec.encode;ye.forEach(function(z,J,ee){O(_e,J),O(_e,z)})}function ue(_e,ye){var ie=ye.length,W=ie<32?160+ie:ie<=65535?218:219;n[W](_e,ie),_e.send(ye)}}var codecBase={},IS_ARRAY=isarray;codecBase.createCodec=createCodec;codecBase.install=install;codecBase.filter=filter;var Bufferish$2=requireBufferish();function Codec(t){if(!(this instanceof Codec))return new Codec(t);this.options=t,this.init()}Codec.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=Bufferish$2.Uint8Array),this};function install(t){for(var n in t)Codec.prototype[n]=add(Codec.prototype[n],t[n])}function add(t,n){return t&&n?_:t||n;function _(){return t.apply(this,arguments),n.apply(this,arguments)}}function join(t){return t=t.slice(),function(_){return t.reduce(n,_)};function n(_,x){return x(_)}}function filter(t){return IS_ARRAY(t)?join(t):t}function createCodec(t){return new Codec(t)}codecBase.preset=createCodec({preset:!0});var hasRequiredWriteCore;function requireWriteCore(){if(hasRequiredWriteCore)return writeCore;hasRequiredWriteCore=1;var t=extBuffer.ExtBuffer,n=requireExtPacker(),_=writeType,x=codecBase;x.install({addExtPacker:C,getExtPacker:T,init:S}),writeCore.preset=S.call(x.preset);function E(B){var A=_.getWriteType(B);return I;function I(D,M){var V=A[typeof M];if(!V)throw new Error('Unsupported type "'+typeof M+'": '+M);V(D,M)}}function S(){var B=this.options;return this.encode=E(B),B&&B.preset&&n.setExtPackers(this),this}function C(B,A,I){I=x.filter(I);var D=A.name;if(D&&D!=="Object"){var M=this.extPackers||(this.extPackers={});M[D]=L}else{var V=this.extEncoderList||(this.extEncoderList=[]);V.unshift([A,L])}function L(F){return I&&(F=I(F)),new t(F,B)}}function T(B){var A=this.extPackers||(this.extPackers={}),I=B.constructor,D=I&&I.name&&A[I.name];if(D)return D;for(var M=this.extEncoderList||(this.extEncoderList=[]),V=M.length,L=0;L<V;L++){var F=M[L];if(I===F[0])return F[1]}}return writeCore}var flexBuffer={};flexBuffer.FlexDecoder=FlexDecoder;flexBuffer.FlexEncoder=FlexEncoder;var Bufferish$1=requireBufferish(),MIN_BUFFER_SIZE=2048,MAX_BUFFER_SIZE=65536,BUFFER_SHORTAGE="BUFFER_SHORTAGE";function FlexDecoder(){if(!(this instanceof FlexDecoder))return new FlexDecoder}function FlexEncoder(){if(!(this instanceof FlexEncoder))return new FlexEncoder}FlexDecoder.mixin=mixinFactory(getDecoderMethods());FlexDecoder.mixin(FlexDecoder.prototype);FlexEncoder.mixin=mixinFactory(getEncoderMethods());FlexEncoder.mixin(FlexEncoder.prototype);function getDecoderMethods(){return{bufferish:Bufferish$1,write:t,fetch:fetch$1,flush:n,push,pull,read:read$1,reserve:_,offset:0};function t(x){var E=this.offset?Bufferish$1.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=E?x?this.bufferish.concat([E,x]):E:x,this.offset=0}function n(){for(;this.offset<this.buffer.length;){var x=this.offset,E;try{E=this.fetch()}catch(S){if(S&&S.message!=BUFFER_SHORTAGE)throw S;this.offset=x;break}this.push(E)}}function _(x){var E=this.offset,S=E+x;if(S>this.buffer.length)throw new Error(BUFFER_SHORTAGE);return this.offset=S,E}}function getEncoderMethods(){return{bufferish:Bufferish$1,write,fetch:t,flush:n,push,pull:_,read:read$1,reserve:x,send:E,maxBufferSize:MAX_BUFFER_SIZE,minBufferSize:MIN_BUFFER_SIZE,offset:0,start:0};function t(){var S=this.start;if(S<this.offset){var C=this.start=this.offset;return Bufferish$1.prototype.slice.call(this.buffer,S,C)}}function n(){for(;this.start<this.offset;){var S=this.fetch();S&&this.push(S)}}function _(){var S=this.buffers||(this.buffers=[]),C=S.length>1?this.bufferish.concat(S):S[0];return S.length=0,C}function x(S){var C=S|0;if(this.buffer){var T=this.buffer.length,B=this.offset|0,A=B+C;if(A<T)return this.offset=A,B;this.flush(),S=Math.max(S,Math.min(T*2,this.maxBufferSize))}return S=Math.max(S,this.minBufferSize),this.buffer=this.bufferish.alloc(S),this.start=0,this.offset=C,0}function E(S){var C=S.length;if(C>this.minBufferSize)this.flush(),this.push(S);else{var T=this.reserve(C);Bufferish$1.prototype.copy.call(S,this.buffer,T)}}}function write(){throw new Error("method not implemented: write()")}function fetch$1(){throw new Error("method not implemented: fetch()")}function read$1(){var t=this.buffers&&this.buffers.length;return t?(this.flush(),this.pull()):this.fetch()}function push(t){var n=this.buffers||(this.buffers=[]);n.push(t)}function pull(){var t=this.buffers||(this.buffers=[]);return t.shift()}function mixinFactory(t){return n;function n(_){for(var x in t)_[x]=t[x];return _}}var hasRequiredEncodeBuffer;function requireEncodeBuffer(){if(hasRequiredEncodeBuffer)return encodeBuffer;hasRequiredEncodeBuffer=1,encodeBuffer.EncodeBuffer=_;var t=requireWriteCore().preset,n=flexBuffer.FlexEncoder;n.mixin(_.prototype);function _(x){if(!(this instanceof _))return new _(x);if(x&&(this.options=x,x.codec)){var E=this.codec=x.codec;E.bufferish&&(this.bufferish=E.bufferish)}}return _.prototype.codec=t,_.prototype.write=function(x){this.codec.encode(this,x)},encodeBuffer}var hasRequiredEncode;function requireEncode(){if(hasRequiredEncode)return encode;hasRequiredEncode=1,encode.encode=n;var t=requireEncodeBuffer().EncodeBuffer;function n(_,x){var E=new t(x);return E.write(_),E.read()}return encode}var decode$1={},decodeBuffer={},readCore={},extUnpacker={},hasRequiredExtUnpacker;function requireExtUnpacker(){if(hasRequiredExtUnpacker)return extUnpacker;hasRequiredExtUnpacker=1,extUnpacker.setExtUnpackers=E;var t=requireBufferish(),n=t.global,_,x={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function E(I){I.addExtUnpacker(14,[S,T(Error)]),I.addExtUnpacker(1,[S,T(EvalError)]),I.addExtUnpacker(2,[S,T(RangeError)]),I.addExtUnpacker(3,[S,T(ReferenceError)]),I.addExtUnpacker(4,[S,T(SyntaxError)]),I.addExtUnpacker(5,[S,T(TypeError)]),I.addExtUnpacker(6,[S,T(URIError)]),I.addExtUnpacker(10,[S,C]),I.addExtUnpacker(11,[S,B(Boolean)]),I.addExtUnpacker(12,[S,B(String)]),I.addExtUnpacker(13,[S,B(Date)]),I.addExtUnpacker(15,[S,B(Number)]),typeof Uint8Array<"u"&&(I.addExtUnpacker(17,B(Int8Array)),I.addExtUnpacker(18,B(Uint8Array)),I.addExtUnpacker(19,[A,B(Int16Array)]),I.addExtUnpacker(20,[A,B(Uint16Array)]),I.addExtUnpacker(21,[A,B(Int32Array)]),I.addExtUnpacker(22,[A,B(Uint32Array)]),I.addExtUnpacker(23,[A,B(Float32Array)]),typeof Float64Array<"u"&&I.addExtUnpacker(24,[A,B(Float64Array)]),typeof Uint8ClampedArray<"u"&&I.addExtUnpacker(25,B(Uint8ClampedArray)),I.addExtUnpacker(26,A),I.addExtUnpacker(29,[A,B(DataView)])),t.hasBuffer&&I.addExtUnpacker(27,B(n))}function S(I){return _||(_=requireDecode().decode),_(I)}function C(I){return RegExp.apply(null,I)}function T(I){return function(D){var M=new I;for(var V in x)M[V]=D[V];return M}}function B(I){return function(D){return new I(D)}}function A(I){return new Uint8Array(I).buffer}return extUnpacker}var readFormat={},ieee754=ieee754$2,Int64Buffer=int64Buffer,Uint64BE=Int64Buffer.Uint64BE,Int64BE=Int64Buffer.Int64BE;readFormat.getReadFormat=getReadFormat;readFormat.readUint8=uint8;var Bufferish=requireBufferish(),BufferProto=requireBufferishProto(),HAS_MAP=typeof Map<"u",NO_ASSERT=!0;function getReadFormat(t){var n=Bufferish.hasArrayBuffer&&t&&t.binarraybuffer,_=t&&t.int64,x=HAS_MAP&&t&&t.usemap,E={map:x?map_to_map:map_to_obj,array,str,bin:n?bin_arraybuffer:bin_buffer,ext:ext$1,uint8,uint16,uint32,uint64:read(8,_?readUInt64BE_int64:readUInt64BE),int8,int16,int32,int64:read(8,_?readInt64BE_int64:readInt64BE),float32:read(4,readFloatBE),float64:read(8,readDoubleBE)};return E}function map_to_obj(t,n){var _={},x,E=new Array(n),S=new Array(n),C=t.codec.decode;for(x=0;x<n;x++)E[x]=C(t),S[x]=C(t);for(x=0;x<n;x++)_[E[x]]=S[x];return _}function map_to_map(t,n){var _=new Map,x,E=new Array(n),S=new Array(n),C=t.codec.decode;for(x=0;x<n;x++)E[x]=C(t),S[x]=C(t);for(x=0;x<n;x++)_.set(E[x],S[x]);return _}function array(t,n){for(var _=new Array(n),x=t.codec.decode,E=0;E<n;E++)_[E]=x(t);return _}function str(t,n){var _=t.reserve(n),x=_+n;return BufferProto.toString.call(t.buffer,"utf-8",_,x)}function bin_buffer(t,n){var _=t.reserve(n),x=_+n,E=BufferProto.slice.call(t.buffer,_,x);return Bufferish.from(E)}function bin_arraybuffer(t,n){var _=t.reserve(n),x=_+n,E=BufferProto.slice.call(t.buffer,_,x);return Bufferish.Uint8Array.from(E).buffer}function ext$1(t,n){var _=t.reserve(n+1),x=t.buffer[_++],E=_+n,S=t.codec.getExtUnpacker(x);if(!S)throw new Error("Invalid ext type: "+(x&&"0x"+x.toString(16)));var C=BufferProto.slice.call(t.buffer,_,E);return S(C)}function uint8(t){var n=t.reserve(1);return t.buffer[n]}function int8(t){var n=t.reserve(1),_=t.buffer[n];return _&128?_-256:_}function uint16(t){var n=t.reserve(2),_=t.buffer;return _[n++]<<8|_[n]}function int16(t){var n=t.reserve(2),_=t.buffer,x=_[n++]<<8|_[n];return x&32768?x-65536:x}function uint32(t){var n=t.reserve(4),_=t.buffer;return _[n++]*16777216+(_[n++]<<16)+(_[n++]<<8)+_[n]}function int32(t){var n=t.reserve(4),_=t.buffer;return _[n++]<<24|_[n++]<<16|_[n++]<<8|_[n]}function read(t,n){return function(_){var x=_.reserve(t);return n.call(_.buffer,x,NO_ASSERT)}}function readUInt64BE(t){return new Uint64BE(this,t).toNumber()}function readInt64BE(t){return new Int64BE(this,t).toNumber()}function readUInt64BE_int64(t){return new Uint64BE(this,t)}function readInt64BE_int64(t){return new Int64BE(this,t)}function readFloatBE(t){return ieee754.read(this,t,!1,23,4)}function readDoubleBE(t){return ieee754.read(this,t,!1,52,8)}var readToken={},ReadFormat=readFormat;readToken.getReadToken=getReadToken;function getReadToken(t){var n=ReadFormat.getReadFormat(t);return t&&t.useraw?init_useraw(n):init_token(n)}function init_token(t){var n,_=new Array(256);for(n=0;n<=127;n++)_[n]=constant(n);for(n=128;n<=143;n++)_[n]=fix(n-128,t.map);for(n=144;n<=159;n++)_[n]=fix(n-144,t.array);for(n=160;n<=191;n++)_[n]=fix(n-160,t.str);for(_[192]=constant(null),_[193]=null,_[194]=constant(!1),_[195]=constant(!0),_[196]=flex(t.uint8,t.bin),_[197]=flex(t.uint16,t.bin),_[198]=flex(t.uint32,t.bin),_[199]=flex(t.uint8,t.ext),_[200]=flex(t.uint16,t.ext),_[201]=flex(t.uint32,t.ext),_[202]=t.float32,_[203]=t.float64,_[204]=t.uint8,_[205]=t.uint16,_[206]=t.uint32,_[207]=t.uint64,_[208]=t.int8,_[209]=t.int16,_[210]=t.int32,_[211]=t.int64,_[212]=fix(1,t.ext),_[213]=fix(2,t.ext),_[214]=fix(4,t.ext),_[215]=fix(8,t.ext),_[216]=fix(16,t.ext),_[217]=flex(t.uint8,t.str),_[218]=flex(t.uint16,t.str),_[219]=flex(t.uint32,t.str),_[220]=flex(t.uint16,t.array),_[221]=flex(t.uint32,t.array),_[222]=flex(t.uint16,t.map),_[223]=flex(t.uint32,t.map),n=224;n<=255;n++)_[n]=constant(n-256);return _}function init_useraw(t){var n,_=init_token(t).slice();for(_[217]=_[196],_[218]=_[197],_[219]=_[198],n=160;n<=191;n++)_[n]=fix(n-160,t.bin);return _}function constant(t){return function(){return t}}function flex(t,n){return function(_){var x=t(_);return n(_,x)}}function fix(t,n){return function(_){return n(_,t)}}var hasRequiredReadCore;function requireReadCore(){if(hasRequiredReadCore)return readCore;hasRequiredReadCore=1;var t=extBuffer.ExtBuffer,n=requireExtUnpacker(),_=readFormat.readUint8,x=readToken,E=codecBase;E.install({addExtUnpacker:T,getExtUnpacker:B,init:C}),readCore.preset=C.call(E.preset);function S(A){var I=x.getReadToken(A);return D;function D(M){var V=_(M),L=I[V];if(!L)throw new Error("Invalid type: "+(V&&"0x"+V.toString(16)));return L(M)}}function C(){var A=this.options;return this.decode=S(A),A&&A.preset&&n.setExtUnpackers(this),this}function T(A,I){var D=this.extUnpackers||(this.extUnpackers=[]);D[A]=E.filter(I)}function B(A){var I=this.extUnpackers||(this.extUnpackers=[]);return I[A]||D;function D(M){return new t(M,A)}}return readCore}var hasRequiredDecodeBuffer;function requireDecodeBuffer(){if(hasRequiredDecodeBuffer)return decodeBuffer;hasRequiredDecodeBuffer=1,decodeBuffer.DecodeBuffer=_;var t=requireReadCore().preset,n=flexBuffer.FlexDecoder;n.mixin(_.prototype);function _(x){if(!(this instanceof _))return new _(x);if(x&&(this.options=x,x.codec)){var E=this.codec=x.codec;E.bufferish&&(this.bufferish=E.bufferish)}}return _.prototype.codec=t,_.prototype.fetch=function(){return this.codec.decode(this)},decodeBuffer}var hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode$1;hasRequiredDecode=1,decode$1.decode=n;var t=requireDecodeBuffer().DecodeBuffer;function n(_,x){var E=new t(x);return E.write(_),E.read()}return decode$1}var encoder={},eventLite={exports:{}};/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */(function(t){function n(){if(!(this instanceof n))return new n}(function(_){t.exports=_;var x="listeners",E={on:C,once:T,off:B,emit:A};S(_.prototype),_.mixin=S;function S(D){for(var M in E)D[M]=E[M];return D}function C(D,M){return I(this,D).push(M),this}function T(D,M){var V=this;return L.originalListener=M,I(V,D).push(L),V;function L(){B.call(V,D,L),M.apply(this,arguments)}}function B(D,M){var V=this,L;if(!arguments.length)delete V[x];else if(M){if(L=I(V,D,!0),L){if(L=L.filter(F),!L.length)return B.call(V,D);V[x][D]=L}}else if(L=V[x],L&&(delete L[D],!Object.keys(L).length))return B.call(V);return V;function F(j){return j!==M&&j.originalListener!==M}}function A(D,M){var V=this,L=I(V,D,!0);if(!L)return!1;var F=arguments.length;if(F===1)L.forEach(U);else if(F===2)L.forEach(H);else{var j=Array.prototype.slice.call(arguments,1);L.forEach(Y)}return!!L.length;function U(Z){Z.call(V)}function H(Z){Z.call(V,M)}function Y(Z){Z.apply(V,j)}}function I(D,M,V){if(!(V&&!D[x])){var L=D[x]||(D[x]={});return L[M]||(L[M]=[])}}})(n)})(eventLite);var eventLiteExports=eventLite.exports;encoder.Encoder=Encoder;var EventLite$1=eventLiteExports,EncodeBuffer=requireEncodeBuffer().EncodeBuffer;function Encoder(t){if(!(this instanceof Encoder))return new Encoder(t);EncodeBuffer.call(this,t)}Encoder.prototype=new EncodeBuffer;EventLite$1.mixin(Encoder.prototype);Encoder.prototype.encode=function(t){this.write(t),this.emit("data",this.read())};Encoder.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")};var decoder={};decoder.Decoder=Decoder;var EventLite=eventLiteExports,DecodeBuffer=requireDecodeBuffer().DecodeBuffer;function Decoder(t){if(!(this instanceof Decoder))return new Decoder(t);DecodeBuffer.call(this,t)}Decoder.prototype=new DecodeBuffer;EventLite.mixin(Decoder.prototype);Decoder.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()};Decoder.prototype.push=function(t){this.emit("data",t)};Decoder.prototype.end=function(t){this.decode(t),this.emit("end")};var ext={};requireReadCore();requireWriteCore();ext.createCodec=codecBase.createCodec;var codec={};requireReadCore();requireWriteCore();codec.codec={preset:codecBase.preset};browser$1.encode=requireEncode().encode;browser$1.decode=requireDecode().decode;browser$1.Encoder=encoder.Encoder;browser$1.Decoder=decoder.Decoder;browser$1.createCodec=ext.createCodec;browser$1.codec=codec.codec;var naclFast={exports:{}};(function(t){(function(n){var _=function(je){var De,Me=new Float64Array(16);if(je)for(De=0;De<je.length;De++)Me[De]=je[De];return Me},x=function(){throw new Error("no PRNG")},E=new Uint8Array(16),S=new Uint8Array(32);S[0]=9;var C=_(),T=_([1]),B=_([56129,1]),A=_([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),I=_([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),D=_([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),M=_([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),V=_([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function L(je,De,Me,pe){je[De]=Me>>24&255,je[De+1]=Me>>16&255,je[De+2]=Me>>8&255,je[De+3]=Me&255,je[De+4]=pe>>24&255,je[De+5]=pe>>16&255,je[De+6]=pe>>8&255,je[De+7]=pe&255}function F(je,De,Me,pe,ke){var Oe,Fe=0;for(Oe=0;Oe<ke;Oe++)Fe|=je[De+Oe]^Me[pe+Oe];return(1&Fe-1>>>8)-1}function j(je,De,Me,pe){return F(je,De,Me,pe,16)}function U(je,De,Me,pe){return F(je,De,Me,pe,32)}function H(je,De,Me,pe){for(var ke=pe[0]&255|(pe[1]&255)<<8|(pe[2]&255)<<16|(pe[3]&255)<<24,Oe=Me[0]&255|(Me[1]&255)<<8|(Me[2]&255)<<16|(Me[3]&255)<<24,Fe=Me[4]&255|(Me[5]&255)<<8|(Me[6]&255)<<16|(Me[7]&255)<<24,ze=Me[8]&255|(Me[9]&255)<<8|(Me[10]&255)<<16|(Me[11]&255)<<24,Xe=Me[12]&255|(Me[13]&255)<<8|(Me[14]&255)<<16|(Me[15]&255)<<24,tt=pe[4]&255|(pe[5]&255)<<8|(pe[6]&255)<<16|(pe[7]&255)<<24,it=De[0]&255|(De[1]&255)<<8|(De[2]&255)<<16|(De[3]&255)<<24,ot=De[4]&255|(De[5]&255)<<8|(De[6]&255)<<16|(De[7]&255)<<24,at=De[8]&255|(De[9]&255)<<8|(De[10]&255)<<16|(De[11]&255)<<24,ct=De[12]&255|(De[13]&255)<<8|(De[14]&255)<<16|(De[15]&255)<<24,dt=pe[8]&255|(pe[9]&255)<<8|(pe[10]&255)<<16|(pe[11]&255)<<24,yt=Me[16]&255|(Me[17]&255)<<8|(Me[18]&255)<<16|(Me[19]&255)<<24,Et=Me[20]&255|(Me[21]&255)<<8|(Me[22]&255)<<16|(Me[23]&255)<<24,mt=Me[24]&255|(Me[25]&255)<<8|(Me[26]&255)<<16|(Me[27]&255)<<24,xt=Me[28]&255|(Me[29]&255)<<8|(Me[30]&255)<<16|(Me[31]&255)<<24,Mt=pe[12]&255|(pe[13]&255)<<8|(pe[14]&255)<<16|(pe[15]&255)<<24,Ot=ke,Ht=Oe,Ft=Fe,Wt=ze,Jt=Xe,Kt=tt,gt=it,_t=ot,It=at,At=ct,Vt=dt,Xt=yt,ar=Et,gr=mt,yr=xt,ur=Mt,ut,wr=0;wr<20;wr+=2)ut=Ot+ar|0,Jt^=ut<<7|ut>>>32-7,ut=Jt+Ot|0,It^=ut<<9|ut>>>32-9,ut=It+Jt|0,ar^=ut<<13|ut>>>32-13,ut=ar+It|0,Ot^=ut<<18|ut>>>32-18,ut=Kt+Ht|0,At^=ut<<7|ut>>>32-7,ut=At+Kt|0,gr^=ut<<9|ut>>>32-9,ut=gr+At|0,Ht^=ut<<13|ut>>>32-13,ut=Ht+gr|0,Kt^=ut<<18|ut>>>32-18,ut=Vt+gt|0,yr^=ut<<7|ut>>>32-7,ut=yr+Vt|0,Ft^=ut<<9|ut>>>32-9,ut=Ft+yr|0,gt^=ut<<13|ut>>>32-13,ut=gt+Ft|0,Vt^=ut<<18|ut>>>32-18,ut=ur+Xt|0,Wt^=ut<<7|ut>>>32-7,ut=Wt+ur|0,_t^=ut<<9|ut>>>32-9,ut=_t+Wt|0,Xt^=ut<<13|ut>>>32-13,ut=Xt+_t|0,ur^=ut<<18|ut>>>32-18,ut=Ot+Wt|0,Ht^=ut<<7|ut>>>32-7,ut=Ht+Ot|0,Ft^=ut<<9|ut>>>32-9,ut=Ft+Ht|0,Wt^=ut<<13|ut>>>32-13,ut=Wt+Ft|0,Ot^=ut<<18|ut>>>32-18,ut=Kt+Jt|0,gt^=ut<<7|ut>>>32-7,ut=gt+Kt|0,_t^=ut<<9|ut>>>32-9,ut=_t+gt|0,Jt^=ut<<13|ut>>>32-13,ut=Jt+_t|0,Kt^=ut<<18|ut>>>32-18,ut=Vt+At|0,Xt^=ut<<7|ut>>>32-7,ut=Xt+Vt|0,It^=ut<<9|ut>>>32-9,ut=It+Xt|0,At^=ut<<13|ut>>>32-13,ut=At+It|0,Vt^=ut<<18|ut>>>32-18,ut=ur+yr|0,ar^=ut<<7|ut>>>32-7,ut=ar+ur|0,gr^=ut<<9|ut>>>32-9,ut=gr+ar|0,yr^=ut<<13|ut>>>32-13,ut=yr+gr|0,ur^=ut<<18|ut>>>32-18;Ot=Ot+ke|0,Ht=Ht+Oe|0,Ft=Ft+Fe|0,Wt=Wt+ze|0,Jt=Jt+Xe|0,Kt=Kt+tt|0,gt=gt+it|0,_t=_t+ot|0,It=It+at|0,At=At+ct|0,Vt=Vt+dt|0,Xt=Xt+yt|0,ar=ar+Et|0,gr=gr+mt|0,yr=yr+xt|0,ur=ur+Mt|0,je[0]=Ot>>>0&255,je[1]=Ot>>>8&255,je[2]=Ot>>>16&255,je[3]=Ot>>>24&255,je[4]=Ht>>>0&255,je[5]=Ht>>>8&255,je[6]=Ht>>>16&255,je[7]=Ht>>>24&255,je[8]=Ft>>>0&255,je[9]=Ft>>>8&255,je[10]=Ft>>>16&255,je[11]=Ft>>>24&255,je[12]=Wt>>>0&255,je[13]=Wt>>>8&255,je[14]=Wt>>>16&255,je[15]=Wt>>>24&255,je[16]=Jt>>>0&255,je[17]=Jt>>>8&255,je[18]=Jt>>>16&255,je[19]=Jt>>>24&255,je[20]=Kt>>>0&255,je[21]=Kt>>>8&255,je[22]=Kt>>>16&255,je[23]=Kt>>>24&255,je[24]=gt>>>0&255,je[25]=gt>>>8&255,je[26]=gt>>>16&255,je[27]=gt>>>24&255,je[28]=_t>>>0&255,je[29]=_t>>>8&255,je[30]=_t>>>16&255,je[31]=_t>>>24&255,je[32]=It>>>0&255,je[33]=It>>>8&255,je[34]=It>>>16&255,je[35]=It>>>24&255,je[36]=At>>>0&255,je[37]=At>>>8&255,je[38]=At>>>16&255,je[39]=At>>>24&255,je[40]=Vt>>>0&255,je[41]=Vt>>>8&255,je[42]=Vt>>>16&255,je[43]=Vt>>>24&255,je[44]=Xt>>>0&255,je[45]=Xt>>>8&255,je[46]=Xt>>>16&255,je[47]=Xt>>>24&255,je[48]=ar>>>0&255,je[49]=ar>>>8&255,je[50]=ar>>>16&255,je[51]=ar>>>24&255,je[52]=gr>>>0&255,je[53]=gr>>>8&255,je[54]=gr>>>16&255,je[55]=gr>>>24&255,je[56]=yr>>>0&255,je[57]=yr>>>8&255,je[58]=yr>>>16&255,je[59]=yr>>>24&255,je[60]=ur>>>0&255,je[61]=ur>>>8&255,je[62]=ur>>>16&255,je[63]=ur>>>24&255}function Y(je,De,Me,pe){for(var ke=pe[0]&255|(pe[1]&255)<<8|(pe[2]&255)<<16|(pe[3]&255)<<24,Oe=Me[0]&255|(Me[1]&255)<<8|(Me[2]&255)<<16|(Me[3]&255)<<24,Fe=Me[4]&255|(Me[5]&255)<<8|(Me[6]&255)<<16|(Me[7]&255)<<24,ze=Me[8]&255|(Me[9]&255)<<8|(Me[10]&255)<<16|(Me[11]&255)<<24,Xe=Me[12]&255|(Me[13]&255)<<8|(Me[14]&255)<<16|(Me[15]&255)<<24,tt=pe[4]&255|(pe[5]&255)<<8|(pe[6]&255)<<16|(pe[7]&255)<<24,it=De[0]&255|(De[1]&255)<<8|(De[2]&255)<<16|(De[3]&255)<<24,ot=De[4]&255|(De[5]&255)<<8|(De[6]&255)<<16|(De[7]&255)<<24,at=De[8]&255|(De[9]&255)<<8|(De[10]&255)<<16|(De[11]&255)<<24,ct=De[12]&255|(De[13]&255)<<8|(De[14]&255)<<16|(De[15]&255)<<24,dt=pe[8]&255|(pe[9]&255)<<8|(pe[10]&255)<<16|(pe[11]&255)<<24,yt=Me[16]&255|(Me[17]&255)<<8|(Me[18]&255)<<16|(Me[19]&255)<<24,Et=Me[20]&255|(Me[21]&255)<<8|(Me[22]&255)<<16|(Me[23]&255)<<24,mt=Me[24]&255|(Me[25]&255)<<8|(Me[26]&255)<<16|(Me[27]&255)<<24,xt=Me[28]&255|(Me[29]&255)<<8|(Me[30]&255)<<16|(Me[31]&255)<<24,Mt=pe[12]&255|(pe[13]&255)<<8|(pe[14]&255)<<16|(pe[15]&255)<<24,Ot=ke,Ht=Oe,Ft=Fe,Wt=ze,Jt=Xe,Kt=tt,gt=it,_t=ot,It=at,At=ct,Vt=dt,Xt=yt,ar=Et,gr=mt,yr=xt,ur=Mt,ut,wr=0;wr<20;wr+=2)ut=Ot+ar|0,Jt^=ut<<7|ut>>>32-7,ut=Jt+Ot|0,It^=ut<<9|ut>>>32-9,ut=It+Jt|0,ar^=ut<<13|ut>>>32-13,ut=ar+It|0,Ot^=ut<<18|ut>>>32-18,ut=Kt+Ht|0,At^=ut<<7|ut>>>32-7,ut=At+Kt|0,gr^=ut<<9|ut>>>32-9,ut=gr+At|0,Ht^=ut<<13|ut>>>32-13,ut=Ht+gr|0,Kt^=ut<<18|ut>>>32-18,ut=Vt+gt|0,yr^=ut<<7|ut>>>32-7,ut=yr+Vt|0,Ft^=ut<<9|ut>>>32-9,ut=Ft+yr|0,gt^=ut<<13|ut>>>32-13,ut=gt+Ft|0,Vt^=ut<<18|ut>>>32-18,ut=ur+Xt|0,Wt^=ut<<7|ut>>>32-7,ut=Wt+ur|0,_t^=ut<<9|ut>>>32-9,ut=_t+Wt|0,Xt^=ut<<13|ut>>>32-13,ut=Xt+_t|0,ur^=ut<<18|ut>>>32-18,ut=Ot+Wt|0,Ht^=ut<<7|ut>>>32-7,ut=Ht+Ot|0,Ft^=ut<<9|ut>>>32-9,ut=Ft+Ht|0,Wt^=ut<<13|ut>>>32-13,ut=Wt+Ft|0,Ot^=ut<<18|ut>>>32-18,ut=Kt+Jt|0,gt^=ut<<7|ut>>>32-7,ut=gt+Kt|0,_t^=ut<<9|ut>>>32-9,ut=_t+gt|0,Jt^=ut<<13|ut>>>32-13,ut=Jt+_t|0,Kt^=ut<<18|ut>>>32-18,ut=Vt+At|0,Xt^=ut<<7|ut>>>32-7,ut=Xt+Vt|0,It^=ut<<9|ut>>>32-9,ut=It+Xt|0,At^=ut<<13|ut>>>32-13,ut=At+It|0,Vt^=ut<<18|ut>>>32-18,ut=ur+yr|0,ar^=ut<<7|ut>>>32-7,ut=ar+ur|0,gr^=ut<<9|ut>>>32-9,ut=gr+ar|0,yr^=ut<<13|ut>>>32-13,ut=yr+gr|0,ur^=ut<<18|ut>>>32-18;je[0]=Ot>>>0&255,je[1]=Ot>>>8&255,je[2]=Ot>>>16&255,je[3]=Ot>>>24&255,je[4]=Kt>>>0&255,je[5]=Kt>>>8&255,je[6]=Kt>>>16&255,je[7]=Kt>>>24&255,je[8]=Vt>>>0&255,je[9]=Vt>>>8&255,je[10]=Vt>>>16&255,je[11]=Vt>>>24&255,je[12]=ur>>>0&255,je[13]=ur>>>8&255,je[14]=ur>>>16&255,je[15]=ur>>>24&255,je[16]=gt>>>0&255,je[17]=gt>>>8&255,je[18]=gt>>>16&255,je[19]=gt>>>24&255,je[20]=_t>>>0&255,je[21]=_t>>>8&255,je[22]=_t>>>16&255,je[23]=_t>>>24&255,je[24]=It>>>0&255,je[25]=It>>>8&255,je[26]=It>>>16&255,je[27]=It>>>24&255,je[28]=At>>>0&255,je[29]=At>>>8&255,je[30]=At>>>16&255,je[31]=At>>>24&255}function Z(je,De,Me,pe){H(je,De,Me,pe)}function ne(je,De,Me,pe){Y(je,De,Me,pe)}var re=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function X(je,De,Me,pe,ke,Oe,Fe){var ze=new Uint8Array(16),Xe=new Uint8Array(64),tt,it;for(it=0;it<16;it++)ze[it]=0;for(it=0;it<8;it++)ze[it]=Oe[it];for(;ke>=64;){for(Z(Xe,ze,Fe,re),it=0;it<64;it++)je[De+it]=Me[pe+it]^Xe[it];for(tt=1,it=8;it<16;it++)tt=tt+(ze[it]&255)|0,ze[it]=tt&255,tt>>>=8;ke-=64,De+=64,pe+=64}if(ke>0)for(Z(Xe,ze,Fe,re),it=0;it<ke;it++)je[De+it]=Me[pe+it]^Xe[it];return 0}function ce(je,De,Me,pe,ke){var Oe=new Uint8Array(16),Fe=new Uint8Array(64),ze,Xe;for(Xe=0;Xe<16;Xe++)Oe[Xe]=0;for(Xe=0;Xe<8;Xe++)Oe[Xe]=pe[Xe];for(;Me>=64;){for(Z(Fe,Oe,ke,re),Xe=0;Xe<64;Xe++)je[De+Xe]=Fe[Xe];for(ze=1,Xe=8;Xe<16;Xe++)ze=ze+(Oe[Xe]&255)|0,Oe[Xe]=ze&255,ze>>>=8;Me-=64,De+=64}if(Me>0)for(Z(Fe,Oe,ke,re),Xe=0;Xe<Me;Xe++)je[De+Xe]=Fe[Xe];return 0}function ue(je,De,Me,pe,ke){var Oe=new Uint8Array(32);ne(Oe,pe,ke,re);for(var Fe=new Uint8Array(8),ze=0;ze<8;ze++)Fe[ze]=pe[ze+16];return ce(je,De,Me,Fe,Oe)}function _e(je,De,Me,pe,ke,Oe,Fe){var ze=new Uint8Array(32);ne(ze,Oe,Fe,re);for(var Xe=new Uint8Array(8),tt=0;tt<8;tt++)Xe[tt]=Oe[tt+16];return X(je,De,Me,pe,ke,Xe,ze)}var ye=function(je){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var De,Me,pe,ke,Oe,Fe,ze,Xe;De=je[0]&255|(je[1]&255)<<8,this.r[0]=De&8191,Me=je[2]&255|(je[3]&255)<<8,this.r[1]=(De>>>13|Me<<3)&8191,pe=je[4]&255|(je[5]&255)<<8,this.r[2]=(Me>>>10|pe<<6)&7939,ke=je[6]&255|(je[7]&255)<<8,this.r[3]=(pe>>>7|ke<<9)&8191,Oe=je[8]&255|(je[9]&255)<<8,this.r[4]=(ke>>>4|Oe<<12)&255,this.r[5]=Oe>>>1&8190,Fe=je[10]&255|(je[11]&255)<<8,this.r[6]=(Oe>>>14|Fe<<2)&8191,ze=je[12]&255|(je[13]&255)<<8,this.r[7]=(Fe>>>11|ze<<5)&8065,Xe=je[14]&255|(je[15]&255)<<8,this.r[8]=(ze>>>8|Xe<<8)&8191,this.r[9]=Xe>>>5&127,this.pad[0]=je[16]&255|(je[17]&255)<<8,this.pad[1]=je[18]&255|(je[19]&255)<<8,this.pad[2]=je[20]&255|(je[21]&255)<<8,this.pad[3]=je[22]&255|(je[23]&255)<<8,this.pad[4]=je[24]&255|(je[25]&255)<<8,this.pad[5]=je[26]&255|(je[27]&255)<<8,this.pad[6]=je[28]&255|(je[29]&255)<<8,this.pad[7]=je[30]&255|(je[31]&255)<<8};ye.prototype.blocks=function(je,De,Me){for(var pe=this.fin?0:2048,ke,Oe,Fe,ze,Xe,tt,it,ot,at,ct,dt,yt,Et,mt,xt,Mt,Ot,Ht,Ft,Wt=this.h[0],Jt=this.h[1],Kt=this.h[2],gt=this.h[3],_t=this.h[4],It=this.h[5],At=this.h[6],Vt=this.h[7],Xt=this.h[8],ar=this.h[9],gr=this.r[0],yr=this.r[1],ur=this.r[2],ut=this.r[3],wr=this.r[4],kr=this.r[5],Br=this.r[6],br=this.r[7],Ar=this.r[8],Cr=this.r[9];Me>=16;)ke=je[De+0]&255|(je[De+1]&255)<<8,Wt+=ke&8191,Oe=je[De+2]&255|(je[De+3]&255)<<8,Jt+=(ke>>>13|Oe<<3)&8191,Fe=je[De+4]&255|(je[De+5]&255)<<8,Kt+=(Oe>>>10|Fe<<6)&8191,ze=je[De+6]&255|(je[De+7]&255)<<8,gt+=(Fe>>>7|ze<<9)&8191,Xe=je[De+8]&255|(je[De+9]&255)<<8,_t+=(ze>>>4|Xe<<12)&8191,It+=Xe>>>1&8191,tt=je[De+10]&255|(je[De+11]&255)<<8,At+=(Xe>>>14|tt<<2)&8191,it=je[De+12]&255|(je[De+13]&255)<<8,Vt+=(tt>>>11|it<<5)&8191,ot=je[De+14]&255|(je[De+15]&255)<<8,Xt+=(it>>>8|ot<<8)&8191,ar+=ot>>>5|pe,at=0,ct=at,ct+=Wt*gr,ct+=Jt*(5*Cr),ct+=Kt*(5*Ar),ct+=gt*(5*br),ct+=_t*(5*Br),at=ct>>>13,ct&=8191,ct+=It*(5*kr),ct+=At*(5*wr),ct+=Vt*(5*ut),ct+=Xt*(5*ur),ct+=ar*(5*yr),at+=ct>>>13,ct&=8191,dt=at,dt+=Wt*yr,dt+=Jt*gr,dt+=Kt*(5*Cr),dt+=gt*(5*Ar),dt+=_t*(5*br),at=dt>>>13,dt&=8191,dt+=It*(5*Br),dt+=At*(5*kr),dt+=Vt*(5*wr),dt+=Xt*(5*ut),dt+=ar*(5*ur),at+=dt>>>13,dt&=8191,yt=at,yt+=Wt*ur,yt+=Jt*yr,yt+=Kt*gr,yt+=gt*(5*Cr),yt+=_t*(5*Ar),at=yt>>>13,yt&=8191,yt+=It*(5*br),yt+=At*(5*Br),yt+=Vt*(5*kr),yt+=Xt*(5*wr),yt+=ar*(5*ut),at+=yt>>>13,yt&=8191,Et=at,Et+=Wt*ut,Et+=Jt*ur,Et+=Kt*yr,Et+=gt*gr,Et+=_t*(5*Cr),at=Et>>>13,Et&=8191,Et+=It*(5*Ar),Et+=At*(5*br),Et+=Vt*(5*Br),Et+=Xt*(5*kr),Et+=ar*(5*wr),at+=Et>>>13,Et&=8191,mt=at,mt+=Wt*wr,mt+=Jt*ut,mt+=Kt*ur,mt+=gt*yr,mt+=_t*gr,at=mt>>>13,mt&=8191,mt+=It*(5*Cr),mt+=At*(5*Ar),mt+=Vt*(5*br),mt+=Xt*(5*Br),mt+=ar*(5*kr),at+=mt>>>13,mt&=8191,xt=at,xt+=Wt*kr,xt+=Jt*wr,xt+=Kt*ut,xt+=gt*ur,xt+=_t*yr,at=xt>>>13,xt&=8191,xt+=It*gr,xt+=At*(5*Cr),xt+=Vt*(5*Ar),xt+=Xt*(5*br),xt+=ar*(5*Br),at+=xt>>>13,xt&=8191,Mt=at,Mt+=Wt*Br,Mt+=Jt*kr,Mt+=Kt*wr,Mt+=gt*ut,Mt+=_t*ur,at=Mt>>>13,Mt&=8191,Mt+=It*yr,Mt+=At*gr,Mt+=Vt*(5*Cr),Mt+=Xt*(5*Ar),Mt+=ar*(5*br),at+=Mt>>>13,Mt&=8191,Ot=at,Ot+=Wt*br,Ot+=Jt*Br,Ot+=Kt*kr,Ot+=gt*wr,Ot+=_t*ut,at=Ot>>>13,Ot&=8191,Ot+=It*ur,Ot+=At*yr,Ot+=Vt*gr,Ot+=Xt*(5*Cr),Ot+=ar*(5*Ar),at+=Ot>>>13,Ot&=8191,Ht=at,Ht+=Wt*Ar,Ht+=Jt*br,Ht+=Kt*Br,Ht+=gt*kr,Ht+=_t*wr,at=Ht>>>13,Ht&=8191,Ht+=It*ut,Ht+=At*ur,Ht+=Vt*yr,Ht+=Xt*gr,Ht+=ar*(5*Cr),at+=Ht>>>13,Ht&=8191,Ft=at,Ft+=Wt*Cr,Ft+=Jt*Ar,Ft+=Kt*br,Ft+=gt*Br,Ft+=_t*kr,at=Ft>>>13,Ft&=8191,Ft+=It*wr,Ft+=At*ut,Ft+=Vt*ur,Ft+=Xt*yr,Ft+=ar*gr,at+=Ft>>>13,Ft&=8191,at=(at<<2)+at|0,at=at+ct|0,ct=at&8191,at=at>>>13,dt+=at,Wt=ct,Jt=dt,Kt=yt,gt=Et,_t=mt,It=xt,At=Mt,Vt=Ot,Xt=Ht,ar=Ft,De+=16,Me-=16;this.h[0]=Wt,this.h[1]=Jt,this.h[2]=Kt,this.h[3]=gt,this.h[4]=_t,this.h[5]=It,this.h[6]=At,this.h[7]=Vt,this.h[8]=Xt,this.h[9]=ar},ye.prototype.finish=function(je,De){var Me=new Uint16Array(10),pe,ke,Oe,Fe;if(this.leftover){for(Fe=this.leftover,this.buffer[Fe++]=1;Fe<16;Fe++)this.buffer[Fe]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(pe=this.h[1]>>>13,this.h[1]&=8191,Fe=2;Fe<10;Fe++)this.h[Fe]+=pe,pe=this.h[Fe]>>>13,this.h[Fe]&=8191;for(this.h[0]+=pe*5,pe=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=pe,pe=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=pe,Me[0]=this.h[0]+5,pe=Me[0]>>>13,Me[0]&=8191,Fe=1;Fe<10;Fe++)Me[Fe]=this.h[Fe]+pe,pe=Me[Fe]>>>13,Me[Fe]&=8191;for(Me[9]-=8192,ke=(pe^1)-1,Fe=0;Fe<10;Fe++)Me[Fe]&=ke;for(ke=~ke,Fe=0;Fe<10;Fe++)this.h[Fe]=this.h[Fe]&ke|Me[Fe];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,Oe=this.h[0]+this.pad[0],this.h[0]=Oe&65535,Fe=1;Fe<8;Fe++)Oe=(this.h[Fe]+this.pad[Fe]|0)+(Oe>>>16)|0,this.h[Fe]=Oe&65535;je[De+0]=this.h[0]>>>0&255,je[De+1]=this.h[0]>>>8&255,je[De+2]=this.h[1]>>>0&255,je[De+3]=this.h[1]>>>8&255,je[De+4]=this.h[2]>>>0&255,je[De+5]=this.h[2]>>>8&255,je[De+6]=this.h[3]>>>0&255,je[De+7]=this.h[3]>>>8&255,je[De+8]=this.h[4]>>>0&255,je[De+9]=this.h[4]>>>8&255,je[De+10]=this.h[5]>>>0&255,je[De+11]=this.h[5]>>>8&255,je[De+12]=this.h[6]>>>0&255,je[De+13]=this.h[6]>>>8&255,je[De+14]=this.h[7]>>>0&255,je[De+15]=this.h[7]>>>8&255},ye.prototype.update=function(je,De,Me){var pe,ke;if(this.leftover){for(ke=16-this.leftover,ke>Me&&(ke=Me),pe=0;pe<ke;pe++)this.buffer[this.leftover+pe]=je[De+pe];if(Me-=ke,De+=ke,this.leftover+=ke,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(Me>=16&&(ke=Me-Me%16,this.blocks(je,De,ke),De+=ke,Me-=ke),Me){for(pe=0;pe<Me;pe++)this.buffer[this.leftover+pe]=je[De+pe];this.leftover+=Me}};function ie(je,De,Me,pe,ke,Oe){var Fe=new ye(Oe);return Fe.update(Me,pe,ke),Fe.finish(je,De),0}function W(je,De,Me,pe,ke,Oe){var Fe=new Uint8Array(16);return ie(Fe,0,Me,pe,ke,Oe),j(je,De,Fe,0)}function O(je,De,Me,pe,ke){var Oe;if(Me<32)return-1;for(_e(je,0,De,0,Me,pe,ke),ie(je,16,je,32,Me-32,je),Oe=0;Oe<16;Oe++)je[Oe]=0;return 0}function z(je,De,Me,pe,ke){var Oe,Fe=new Uint8Array(32);if(Me<32||(ue(Fe,0,32,pe,ke),W(De,16,De,32,Me-32,Fe)!==0))return-1;for(_e(je,0,De,0,Me,pe,ke),Oe=0;Oe<32;Oe++)je[Oe]=0;return 0}function J(je,De){var Me;for(Me=0;Me<16;Me++)je[Me]=De[Me]|0}function ee(je){var De,Me,pe=1;for(De=0;De<16;De++)Me=je[De]+pe+65535,pe=Math.floor(Me/65536),je[De]=Me-pe*65536;je[0]+=pe-1+37*(pe-1)}function ae(je,De,Me){for(var pe,ke=~(Me-1),Oe=0;Oe<16;Oe++)pe=ke&(je[Oe]^De[Oe]),je[Oe]^=pe,De[Oe]^=pe}function oe(je,De){var Me,pe,ke,Oe=_(),Fe=_();for(Me=0;Me<16;Me++)Fe[Me]=De[Me];for(ee(Fe),ee(Fe),ee(Fe),pe=0;pe<2;pe++){for(Oe[0]=Fe[0]-65517,Me=1;Me<15;Me++)Oe[Me]=Fe[Me]-65535-(Oe[Me-1]>>16&1),Oe[Me-1]&=65535;Oe[15]=Fe[15]-32767-(Oe[14]>>16&1),ke=Oe[15]>>16&1,Oe[14]&=65535,ae(Fe,Oe,1-ke)}for(Me=0;Me<16;Me++)je[2*Me]=Fe[Me]&255,je[2*Me+1]=Fe[Me]>>8}function se(je,De){var Me=new Uint8Array(32),pe=new Uint8Array(32);return oe(Me,je),oe(pe,De),U(Me,0,pe,0)}function G(je){var De=new Uint8Array(32);return oe(De,je),De[0]&1}function q(je,De){var Me;for(Me=0;Me<16;Me++)je[Me]=De[2*Me]+(De[2*Me+1]<<8);je[15]&=32767}function te(je,De,Me){for(var pe=0;pe<16;pe++)je[pe]=De[pe]+Me[pe]}function fe(je,De,Me){for(var pe=0;pe<16;pe++)je[pe]=De[pe]-Me[pe]}function he(je,De,Me){var pe,ke,Oe=0,Fe=0,ze=0,Xe=0,tt=0,it=0,ot=0,at=0,ct=0,dt=0,yt=0,Et=0,mt=0,xt=0,Mt=0,Ot=0,Ht=0,Ft=0,Wt=0,Jt=0,Kt=0,gt=0,_t=0,It=0,At=0,Vt=0,Xt=0,ar=0,gr=0,yr=0,ur=0,ut=Me[0],wr=Me[1],kr=Me[2],Br=Me[3],br=Me[4],Ar=Me[5],Cr=Me[6],Fr=Me[7],Pr=Me[8],Mr=Me[9],Ur=Me[10],jr=Me[11],Wr=Me[12],Jr=Me[13],Zr=Me[14],Qr=Me[15];pe=De[0],Oe+=pe*ut,Fe+=pe*wr,ze+=pe*kr,Xe+=pe*Br,tt+=pe*br,it+=pe*Ar,ot+=pe*Cr,at+=pe*Fr,ct+=pe*Pr,dt+=pe*Mr,yt+=pe*Ur,Et+=pe*jr,mt+=pe*Wr,xt+=pe*Jr,Mt+=pe*Zr,Ot+=pe*Qr,pe=De[1],Fe+=pe*ut,ze+=pe*wr,Xe+=pe*kr,tt+=pe*Br,it+=pe*br,ot+=pe*Ar,at+=pe*Cr,ct+=pe*Fr,dt+=pe*Pr,yt+=pe*Mr,Et+=pe*Ur,mt+=pe*jr,xt+=pe*Wr,Mt+=pe*Jr,Ot+=pe*Zr,Ht+=pe*Qr,pe=De[2],ze+=pe*ut,Xe+=pe*wr,tt+=pe*kr,it+=pe*Br,ot+=pe*br,at+=pe*Ar,ct+=pe*Cr,dt+=pe*Fr,yt+=pe*Pr,Et+=pe*Mr,mt+=pe*Ur,xt+=pe*jr,Mt+=pe*Wr,Ot+=pe*Jr,Ht+=pe*Zr,Ft+=pe*Qr,pe=De[3],Xe+=pe*ut,tt+=pe*wr,it+=pe*kr,ot+=pe*Br,at+=pe*br,ct+=pe*Ar,dt+=pe*Cr,yt+=pe*Fr,Et+=pe*Pr,mt+=pe*Mr,xt+=pe*Ur,Mt+=pe*jr,Ot+=pe*Wr,Ht+=pe*Jr,Ft+=pe*Zr,Wt+=pe*Qr,pe=De[4],tt+=pe*ut,it+=pe*wr,ot+=pe*kr,at+=pe*Br,ct+=pe*br,dt+=pe*Ar,yt+=pe*Cr,Et+=pe*Fr,mt+=pe*Pr,xt+=pe*Mr,Mt+=pe*Ur,Ot+=pe*jr,Ht+=pe*Wr,Ft+=pe*Jr,Wt+=pe*Zr,Jt+=pe*Qr,pe=De[5],it+=pe*ut,ot+=pe*wr,at+=pe*kr,ct+=pe*Br,dt+=pe*br,yt+=pe*Ar,Et+=pe*Cr,mt+=pe*Fr,xt+=pe*Pr,Mt+=pe*Mr,Ot+=pe*Ur,Ht+=pe*jr,Ft+=pe*Wr,Wt+=pe*Jr,Jt+=pe*Zr,Kt+=pe*Qr,pe=De[6],ot+=pe*ut,at+=pe*wr,ct+=pe*kr,dt+=pe*Br,yt+=pe*br,Et+=pe*Ar,mt+=pe*Cr,xt+=pe*Fr,Mt+=pe*Pr,Ot+=pe*Mr,Ht+=pe*Ur,Ft+=pe*jr,Wt+=pe*Wr,Jt+=pe*Jr,Kt+=pe*Zr,gt+=pe*Qr,pe=De[7],at+=pe*ut,ct+=pe*wr,dt+=pe*kr,yt+=pe*Br,Et+=pe*br,mt+=pe*Ar,xt+=pe*Cr,Mt+=pe*Fr,Ot+=pe*Pr,Ht+=pe*Mr,Ft+=pe*Ur,Wt+=pe*jr,Jt+=pe*Wr,Kt+=pe*Jr,gt+=pe*Zr,_t+=pe*Qr,pe=De[8],ct+=pe*ut,dt+=pe*wr,yt+=pe*kr,Et+=pe*Br,mt+=pe*br,xt+=pe*Ar,Mt+=pe*Cr,Ot+=pe*Fr,Ht+=pe*Pr,Ft+=pe*Mr,Wt+=pe*Ur,Jt+=pe*jr,Kt+=pe*Wr,gt+=pe*Jr,_t+=pe*Zr,It+=pe*Qr,pe=De[9],dt+=pe*ut,yt+=pe*wr,Et+=pe*kr,mt+=pe*Br,xt+=pe*br,Mt+=pe*Ar,Ot+=pe*Cr,Ht+=pe*Fr,Ft+=pe*Pr,Wt+=pe*Mr,Jt+=pe*Ur,Kt+=pe*jr,gt+=pe*Wr,_t+=pe*Jr,It+=pe*Zr,At+=pe*Qr,pe=De[10],yt+=pe*ut,Et+=pe*wr,mt+=pe*kr,xt+=pe*Br,Mt+=pe*br,Ot+=pe*Ar,Ht+=pe*Cr,Ft+=pe*Fr,Wt+=pe*Pr,Jt+=pe*Mr,Kt+=pe*Ur,gt+=pe*jr,_t+=pe*Wr,It+=pe*Jr,At+=pe*Zr,Vt+=pe*Qr,pe=De[11],Et+=pe*ut,mt+=pe*wr,xt+=pe*kr,Mt+=pe*Br,Ot+=pe*br,Ht+=pe*Ar,Ft+=pe*Cr,Wt+=pe*Fr,Jt+=pe*Pr,Kt+=pe*Mr,gt+=pe*Ur,_t+=pe*jr,It+=pe*Wr,At+=pe*Jr,Vt+=pe*Zr,Xt+=pe*Qr,pe=De[12],mt+=pe*ut,xt+=pe*wr,Mt+=pe*kr,Ot+=pe*Br,Ht+=pe*br,Ft+=pe*Ar,Wt+=pe*Cr,Jt+=pe*Fr,Kt+=pe*Pr,gt+=pe*Mr,_t+=pe*Ur,It+=pe*jr,At+=pe*Wr,Vt+=pe*Jr,Xt+=pe*Zr,ar+=pe*Qr,pe=De[13],xt+=pe*ut,Mt+=pe*wr,Ot+=pe*kr,Ht+=pe*Br,Ft+=pe*br,Wt+=pe*Ar,Jt+=pe*Cr,Kt+=pe*Fr,gt+=pe*Pr,_t+=pe*Mr,It+=pe*Ur,At+=pe*jr,Vt+=pe*Wr,Xt+=pe*Jr,ar+=pe*Zr,gr+=pe*Qr,pe=De[14],Mt+=pe*ut,Ot+=pe*wr,Ht+=pe*kr,Ft+=pe*Br,Wt+=pe*br,Jt+=pe*Ar,Kt+=pe*Cr,gt+=pe*Fr,_t+=pe*Pr,It+=pe*Mr,At+=pe*Ur,Vt+=pe*jr,Xt+=pe*Wr,ar+=pe*Jr,gr+=pe*Zr,yr+=pe*Qr,pe=De[15],Ot+=pe*ut,Ht+=pe*wr,Ft+=pe*kr,Wt+=pe*Br,Jt+=pe*br,Kt+=pe*Ar,gt+=pe*Cr,_t+=pe*Fr,It+=pe*Pr,At+=pe*Mr,Vt+=pe*Ur,Xt+=pe*jr,ar+=pe*Wr,gr+=pe*Jr,yr+=pe*Zr,ur+=pe*Qr,Oe+=38*Ht,Fe+=38*Ft,ze+=38*Wt,Xe+=38*Jt,tt+=38*Kt,it+=38*gt,ot+=38*_t,at+=38*It,ct+=38*At,dt+=38*Vt,yt+=38*Xt,Et+=38*ar,mt+=38*gr,xt+=38*yr,Mt+=38*ur,ke=1,pe=Oe+ke+65535,ke=Math.floor(pe/65536),Oe=pe-ke*65536,pe=Fe+ke+65535,ke=Math.floor(pe/65536),Fe=pe-ke*65536,pe=ze+ke+65535,ke=Math.floor(pe/65536),ze=pe-ke*65536,pe=Xe+ke+65535,ke=Math.floor(pe/65536),Xe=pe-ke*65536,pe=tt+ke+65535,ke=Math.floor(pe/65536),tt=pe-ke*65536,pe=it+ke+65535,ke=Math.floor(pe/65536),it=pe-ke*65536,pe=ot+ke+65535,ke=Math.floor(pe/65536),ot=pe-ke*65536,pe=at+ke+65535,ke=Math.floor(pe/65536),at=pe-ke*65536,pe=ct+ke+65535,ke=Math.floor(pe/65536),ct=pe-ke*65536,pe=dt+ke+65535,ke=Math.floor(pe/65536),dt=pe-ke*65536,pe=yt+ke+65535,ke=Math.floor(pe/65536),yt=pe-ke*65536,pe=Et+ke+65535,ke=Math.floor(pe/65536),Et=pe-ke*65536,pe=mt+ke+65535,ke=Math.floor(pe/65536),mt=pe-ke*65536,pe=xt+ke+65535,ke=Math.floor(pe/65536),xt=pe-ke*65536,pe=Mt+ke+65535,ke=Math.floor(pe/65536),Mt=pe-ke*65536,pe=Ot+ke+65535,ke=Math.floor(pe/65536),Ot=pe-ke*65536,Oe+=ke-1+37*(ke-1),ke=1,pe=Oe+ke+65535,ke=Math.floor(pe/65536),Oe=pe-ke*65536,pe=Fe+ke+65535,ke=Math.floor(pe/65536),Fe=pe-ke*65536,pe=ze+ke+65535,ke=Math.floor(pe/65536),ze=pe-ke*65536,pe=Xe+ke+65535,ke=Math.floor(pe/65536),Xe=pe-ke*65536,pe=tt+ke+65535,ke=Math.floor(pe/65536),tt=pe-ke*65536,pe=it+ke+65535,ke=Math.floor(pe/65536),it=pe-ke*65536,pe=ot+ke+65535,ke=Math.floor(pe/65536),ot=pe-ke*65536,pe=at+ke+65535,ke=Math.floor(pe/65536),at=pe-ke*65536,pe=ct+ke+65535,ke=Math.floor(pe/65536),ct=pe-ke*65536,pe=dt+ke+65535,ke=Math.floor(pe/65536),dt=pe-ke*65536,pe=yt+ke+65535,ke=Math.floor(pe/65536),yt=pe-ke*65536,pe=Et+ke+65535,ke=Math.floor(pe/65536),Et=pe-ke*65536,pe=mt+ke+65535,ke=Math.floor(pe/65536),mt=pe-ke*65536,pe=xt+ke+65535,ke=Math.floor(pe/65536),xt=pe-ke*65536,pe=Mt+ke+65535,ke=Math.floor(pe/65536),Mt=pe-ke*65536,pe=Ot+ke+65535,ke=Math.floor(pe/65536),Ot=pe-ke*65536,Oe+=ke-1+37*(ke-1),je[0]=Oe,je[1]=Fe,je[2]=ze,je[3]=Xe,je[4]=tt,je[5]=it,je[6]=ot,je[7]=at,je[8]=ct,je[9]=dt,je[10]=yt,je[11]=Et,je[12]=mt,je[13]=xt,je[14]=Mt,je[15]=Ot}function Ee(je,De){he(je,De,De)}function we(je,De){var Me=_(),pe;for(pe=0;pe<16;pe++)Me[pe]=De[pe];for(pe=253;pe>=0;pe--)Ee(Me,Me),pe!==2&&pe!==4&&he(Me,Me,De);for(pe=0;pe<16;pe++)je[pe]=Me[pe]}function xe(je,De){var Me=_(),pe;for(pe=0;pe<16;pe++)Me[pe]=De[pe];for(pe=250;pe>=0;pe--)Ee(Me,Me),pe!==1&&he(Me,Me,De);for(pe=0;pe<16;pe++)je[pe]=Me[pe]}function $e(je,De,Me){var pe=new Uint8Array(32),ke=new Float64Array(80),Oe,Fe,ze=_(),Xe=_(),tt=_(),it=_(),ot=_(),at=_();for(Fe=0;Fe<31;Fe++)pe[Fe]=De[Fe];for(pe[31]=De[31]&127|64,pe[0]&=248,q(ke,Me),Fe=0;Fe<16;Fe++)Xe[Fe]=ke[Fe],it[Fe]=ze[Fe]=tt[Fe]=0;for(ze[0]=it[0]=1,Fe=254;Fe>=0;--Fe)Oe=pe[Fe>>>3]>>>(Fe&7)&1,ae(ze,Xe,Oe),ae(tt,it,Oe),te(ot,ze,tt),fe(ze,ze,tt),te(tt,Xe,it),fe(Xe,Xe,it),Ee(it,ot),Ee(at,ze),he(ze,tt,ze),he(tt,Xe,ot),te(ot,ze,tt),fe(ze,ze,tt),Ee(Xe,ze),fe(tt,it,at),he(ze,tt,B),te(ze,ze,it),he(tt,tt,ze),he(ze,it,at),he(it,Xe,ke),Ee(Xe,ot),ae(ze,Xe,Oe),ae(tt,it,Oe);for(Fe=0;Fe<16;Fe++)ke[Fe+16]=ze[Fe],ke[Fe+32]=tt[Fe],ke[Fe+48]=Xe[Fe],ke[Fe+64]=it[Fe];var ct=ke.subarray(32),dt=ke.subarray(16);return we(ct,ct),he(dt,dt,ct),oe(je,dt),0}function ge(je,De){return $e(je,De,S)}function Se(je,De){return x(De,32),ge(je,De)}function me(je,De,Me){var pe=new Uint8Array(32);return $e(pe,Me,De),ne(je,E,pe,re)}var Be=O,ve=z;function Ae(je,De,Me,pe,ke,Oe){var Fe=new Uint8Array(32);return me(Fe,ke,Oe),Be(je,De,Me,pe,Fe)}function Ve(je,De,Me,pe,ke,Oe){var Fe=new Uint8Array(32);return me(Fe,ke,Oe),ve(je,De,Me,pe,Fe)}var Pe=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Re(je,De,Me,pe){for(var ke=new Int32Array(16),Oe=new Int32Array(16),Fe,ze,Xe,tt,it,ot,at,ct,dt,yt,Et,mt,xt,Mt,Ot,Ht,Ft,Wt,Jt,Kt,gt,_t,It,At,Vt,Xt,ar=je[0],gr=je[1],yr=je[2],ur=je[3],ut=je[4],wr=je[5],kr=je[6],Br=je[7],br=De[0],Ar=De[1],Cr=De[2],Fr=De[3],Pr=De[4],Mr=De[5],Ur=De[6],jr=De[7],Wr=0;pe>=128;){for(Jt=0;Jt<16;Jt++)Kt=8*Jt+Wr,ke[Jt]=Me[Kt+0]<<24|Me[Kt+1]<<16|Me[Kt+2]<<8|Me[Kt+3],Oe[Jt]=Me[Kt+4]<<24|Me[Kt+5]<<16|Me[Kt+6]<<8|Me[Kt+7];for(Jt=0;Jt<80;Jt++)if(Fe=ar,ze=gr,Xe=yr,tt=ur,it=ut,ot=wr,at=kr,ct=Br,dt=br,yt=Ar,Et=Cr,mt=Fr,xt=Pr,Mt=Mr,Ot=Ur,Ht=jr,gt=Br,_t=jr,It=_t&65535,At=_t>>>16,Vt=gt&65535,Xt=gt>>>16,gt=(ut>>>14|Pr<<32-14)^(ut>>>18|Pr<<32-18)^(Pr>>>41-32|ut<<32-(41-32)),_t=(Pr>>>14|ut<<32-14)^(Pr>>>18|ut<<32-18)^(ut>>>41-32|Pr<<32-(41-32)),It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,gt=ut&wr^~ut&kr,_t=Pr&Mr^~Pr&Ur,It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,gt=Pe[Jt*2],_t=Pe[Jt*2+1],It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,gt=ke[Jt%16],_t=Oe[Jt%16],It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,At+=It>>>16,Vt+=At>>>16,Xt+=Vt>>>16,Ft=Vt&65535|Xt<<16,Wt=It&65535|At<<16,gt=Ft,_t=Wt,It=_t&65535,At=_t>>>16,Vt=gt&65535,Xt=gt>>>16,gt=(ar>>>28|br<<32-28)^(br>>>34-32|ar<<32-(34-32))^(br>>>39-32|ar<<32-(39-32)),_t=(br>>>28|ar<<32-28)^(ar>>>34-32|br<<32-(34-32))^(ar>>>39-32|br<<32-(39-32)),It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,gt=ar&gr^ar&yr^gr&yr,_t=br&Ar^br&Cr^Ar&Cr,It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,At+=It>>>16,Vt+=At>>>16,Xt+=Vt>>>16,ct=Vt&65535|Xt<<16,Ht=It&65535|At<<16,gt=tt,_t=mt,It=_t&65535,At=_t>>>16,Vt=gt&65535,Xt=gt>>>16,gt=Ft,_t=Wt,It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,At+=It>>>16,Vt+=At>>>16,Xt+=Vt>>>16,tt=Vt&65535|Xt<<16,mt=It&65535|At<<16,gr=Fe,yr=ze,ur=Xe,ut=tt,wr=it,kr=ot,Br=at,ar=ct,Ar=dt,Cr=yt,Fr=Et,Pr=mt,Mr=xt,Ur=Mt,jr=Ot,br=Ht,Jt%16===15)for(Kt=0;Kt<16;Kt++)gt=ke[Kt],_t=Oe[Kt],It=_t&65535,At=_t>>>16,Vt=gt&65535,Xt=gt>>>16,gt=ke[(Kt+9)%16],_t=Oe[(Kt+9)%16],It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,Ft=ke[(Kt+1)%16],Wt=Oe[(Kt+1)%16],gt=(Ft>>>1|Wt<<32-1)^(Ft>>>8|Wt<<32-8)^Ft>>>7,_t=(Wt>>>1|Ft<<32-1)^(Wt>>>8|Ft<<32-8)^(Wt>>>7|Ft<<32-7),It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,Ft=ke[(Kt+14)%16],Wt=Oe[(Kt+14)%16],gt=(Ft>>>19|Wt<<32-19)^(Wt>>>61-32|Ft<<32-(61-32))^Ft>>>6,_t=(Wt>>>19|Ft<<32-19)^(Ft>>>61-32|Wt<<32-(61-32))^(Wt>>>6|Ft<<32-6),It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,At+=It>>>16,Vt+=At>>>16,Xt+=Vt>>>16,ke[Kt]=Vt&65535|Xt<<16,Oe[Kt]=It&65535|At<<16;gt=ar,_t=br,It=_t&65535,At=_t>>>16,Vt=gt&65535,Xt=gt>>>16,gt=je[0],_t=De[0],It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,At+=It>>>16,Vt+=At>>>16,Xt+=Vt>>>16,je[0]=ar=Vt&65535|Xt<<16,De[0]=br=It&65535|At<<16,gt=gr,_t=Ar,It=_t&65535,At=_t>>>16,Vt=gt&65535,Xt=gt>>>16,gt=je[1],_t=De[1],It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,At+=It>>>16,Vt+=At>>>16,Xt+=Vt>>>16,je[1]=gr=Vt&65535|Xt<<16,De[1]=Ar=It&65535|At<<16,gt=yr,_t=Cr,It=_t&65535,At=_t>>>16,Vt=gt&65535,Xt=gt>>>16,gt=je[2],_t=De[2],It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,At+=It>>>16,Vt+=At>>>16,Xt+=Vt>>>16,je[2]=yr=Vt&65535|Xt<<16,De[2]=Cr=It&65535|At<<16,gt=ur,_t=Fr,It=_t&65535,At=_t>>>16,Vt=gt&65535,Xt=gt>>>16,gt=je[3],_t=De[3],It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,At+=It>>>16,Vt+=At>>>16,Xt+=Vt>>>16,je[3]=ur=Vt&65535|Xt<<16,De[3]=Fr=It&65535|At<<16,gt=ut,_t=Pr,It=_t&65535,At=_t>>>16,Vt=gt&65535,Xt=gt>>>16,gt=je[4],_t=De[4],It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,At+=It>>>16,Vt+=At>>>16,Xt+=Vt>>>16,je[4]=ut=Vt&65535|Xt<<16,De[4]=Pr=It&65535|At<<16,gt=wr,_t=Mr,It=_t&65535,At=_t>>>16,Vt=gt&65535,Xt=gt>>>16,gt=je[5],_t=De[5],It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,At+=It>>>16,Vt+=At>>>16,Xt+=Vt>>>16,je[5]=wr=Vt&65535|Xt<<16,De[5]=Mr=It&65535|At<<16,gt=kr,_t=Ur,It=_t&65535,At=_t>>>16,Vt=gt&65535,Xt=gt>>>16,gt=je[6],_t=De[6],It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,At+=It>>>16,Vt+=At>>>16,Xt+=Vt>>>16,je[6]=kr=Vt&65535|Xt<<16,De[6]=Ur=It&65535|At<<16,gt=Br,_t=jr,It=_t&65535,At=_t>>>16,Vt=gt&65535,Xt=gt>>>16,gt=je[7],_t=De[7],It+=_t&65535,At+=_t>>>16,Vt+=gt&65535,Xt+=gt>>>16,At+=It>>>16,Vt+=At>>>16,Xt+=Vt>>>16,je[7]=Br=Vt&65535|Xt<<16,De[7]=jr=It&65535|At<<16,Wr+=128,pe-=128}return pe}function Ne(je,De,Me){var pe=new Int32Array(8),ke=new Int32Array(8),Oe=new Uint8Array(256),Fe,ze=Me;for(pe[0]=1779033703,pe[1]=3144134277,pe[2]=1013904242,pe[3]=2773480762,pe[4]=1359893119,pe[5]=2600822924,pe[6]=528734635,pe[7]=1541459225,ke[0]=4089235720,ke[1]=2227873595,ke[2]=4271175723,ke[3]=1595750129,ke[4]=2917565137,ke[5]=725511199,ke[6]=4215389547,ke[7]=327033209,Re(pe,ke,De,Me),Me%=128,Fe=0;Fe<Me;Fe++)Oe[Fe]=De[ze-Me+Fe];for(Oe[Me]=128,Me=256-128*(Me<112?1:0),Oe[Me-9]=0,L(Oe,Me-8,ze/536870912|0,ze<<3),Re(pe,ke,Oe,Me),Fe=0;Fe<8;Fe++)L(je,8*Fe,pe[Fe],ke[Fe]);return 0}function qe(je,De){var Me=_(),pe=_(),ke=_(),Oe=_(),Fe=_(),ze=_(),Xe=_(),tt=_(),it=_();fe(Me,je[1],je[0]),fe(it,De[1],De[0]),he(Me,Me,it),te(pe,je[0],je[1]),te(it,De[0],De[1]),he(pe,pe,it),he(ke,je[3],De[3]),he(ke,ke,I),he(Oe,je[2],De[2]),te(Oe,Oe,Oe),fe(Fe,pe,Me),fe(ze,Oe,ke),te(Xe,Oe,ke),te(tt,pe,Me),he(je[0],Fe,ze),he(je[1],tt,Xe),he(je[2],Xe,ze),he(je[3],Fe,tt)}function Ke(je,De,Me){var pe;for(pe=0;pe<4;pe++)ae(je[pe],De[pe],Me)}function He(je,De){var Me=_(),pe=_(),ke=_();we(ke,De[2]),he(Me,De[0],ke),he(pe,De[1],ke),oe(je,pe),je[31]^=G(Me)<<7}function Ge(je,De,Me){var pe,ke;for(J(je[0],C),J(je[1],T),J(je[2],T),J(je[3],C),ke=255;ke>=0;--ke)pe=Me[ke/8|0]>>(ke&7)&1,Ke(je,De,pe),qe(De,je),qe(je,je),Ke(je,De,pe)}function rt(je,De){var Me=[_(),_(),_(),_()];J(Me[0],D),J(Me[1],M),J(Me[2],T),he(Me[3],D,M),Ge(je,Me,De)}function st(je,De,Me){var pe=new Uint8Array(64),ke=[_(),_(),_(),_()],Oe;for(Me||x(De,32),Ne(pe,De,32),pe[0]&=248,pe[31]&=127,pe[31]|=64,rt(ke,pe),He(je,ke),Oe=0;Oe<32;Oe++)De[Oe+32]=je[Oe];return 0}var Je=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Ie(je,De){var Me,pe,ke,Oe;for(pe=63;pe>=32;--pe){for(Me=0,ke=pe-32,Oe=pe-12;ke<Oe;++ke)De[ke]+=Me-16*De[pe]*Je[ke-(pe-32)],Me=Math.floor((De[ke]+128)/256),De[ke]-=Me*256;De[ke]+=Me,De[pe]=0}for(Me=0,ke=0;ke<32;ke++)De[ke]+=Me-(De[31]>>4)*Je[ke],Me=De[ke]>>8,De[ke]&=255;for(ke=0;ke<32;ke++)De[ke]-=Me*Je[ke];for(pe=0;pe<32;pe++)De[pe+1]+=De[pe]>>8,je[pe]=De[pe]&255}function be(je){var De=new Float64Array(64),Me;for(Me=0;Me<64;Me++)De[Me]=je[Me];for(Me=0;Me<64;Me++)je[Me]=0;Ie(je,De)}function Te(je,De,Me,pe){var ke=new Uint8Array(64),Oe=new Uint8Array(64),Fe=new Uint8Array(64),ze,Xe,tt=new Float64Array(64),it=[_(),_(),_(),_()];Ne(ke,pe,32),ke[0]&=248,ke[31]&=127,ke[31]|=64;var ot=Me+64;for(ze=0;ze<Me;ze++)je[64+ze]=De[ze];for(ze=0;ze<32;ze++)je[32+ze]=ke[32+ze];for(Ne(Fe,je.subarray(32),Me+32),be(Fe),rt(it,Fe),He(je,it),ze=32;ze<64;ze++)je[ze]=pe[ze];for(Ne(Oe,je,Me+64),be(Oe),ze=0;ze<64;ze++)tt[ze]=0;for(ze=0;ze<32;ze++)tt[ze]=Fe[ze];for(ze=0;ze<32;ze++)for(Xe=0;Xe<32;Xe++)tt[ze+Xe]+=Oe[ze]*ke[Xe];return Ie(je.subarray(32),tt),ot}function Le(je,De){var Me=_(),pe=_(),ke=_(),Oe=_(),Fe=_(),ze=_(),Xe=_();return J(je[2],T),q(je[1],De),Ee(ke,je[1]),he(Oe,ke,A),fe(ke,ke,je[2]),te(Oe,je[2],Oe),Ee(Fe,Oe),Ee(ze,Fe),he(Xe,ze,Fe),he(Me,Xe,ke),he(Me,Me,Oe),xe(Me,Me),he(Me,Me,ke),he(Me,Me,Oe),he(Me,Me,Oe),he(je[0],Me,Oe),Ee(pe,je[0]),he(pe,pe,Oe),se(pe,ke)&&he(je[0],je[0],V),Ee(pe,je[0]),he(pe,pe,Oe),se(pe,ke)?-1:(G(je[0])===De[31]>>7&&fe(je[0],C,je[0]),he(je[3],je[0],je[1]),0)}function We(je,De,Me,pe){var ke,Oe=new Uint8Array(32),Fe=new Uint8Array(64),ze=[_(),_(),_(),_()],Xe=[_(),_(),_(),_()];if(Me<64||Le(Xe,pe))return-1;for(ke=0;ke<Me;ke++)je[ke]=De[ke];for(ke=0;ke<32;ke++)je[ke+32]=pe[ke];if(Ne(Fe,je,Me),be(Fe),Ge(ze,Xe,Fe),rt(Xe,De.subarray(32)),qe(ze,Xe),He(Oe,ze),Me-=64,U(De,0,Oe,0)){for(ke=0;ke<Me;ke++)je[ke]=0;return-1}for(ke=0;ke<Me;ke++)je[ke]=De[ke+64];return Me}var Ze=32,Qe=24,St=32,pt=16,ft=32,Ut=32,$t=32,Nt=32,lr=32,Gt=Qe,Rt=St,Qt=pt,Pt=64,kt=32,er=64,Lt=32,Bt=64;n.lowlevel={crypto_core_hsalsa20:ne,crypto_stream_xor:_e,crypto_stream:ue,crypto_stream_salsa20_xor:X,crypto_stream_salsa20:ce,crypto_onetimeauth:ie,crypto_onetimeauth_verify:W,crypto_verify_16:j,crypto_verify_32:U,crypto_secretbox:O,crypto_secretbox_open:z,crypto_scalarmult:$e,crypto_scalarmult_base:ge,crypto_box_beforenm:me,crypto_box_afternm:Be,crypto_box:Ae,crypto_box_open:Ve,crypto_box_keypair:Se,crypto_hash:Ne,crypto_sign:Te,crypto_sign_keypair:st,crypto_sign_open:We,crypto_secretbox_KEYBYTES:Ze,crypto_secretbox_NONCEBYTES:Qe,crypto_secretbox_ZEROBYTES:St,crypto_secretbox_BOXZEROBYTES:pt,crypto_scalarmult_BYTES:ft,crypto_scalarmult_SCALARBYTES:Ut,crypto_box_PUBLICKEYBYTES:$t,crypto_box_SECRETKEYBYTES:Nt,crypto_box_BEFORENMBYTES:lr,crypto_box_NONCEBYTES:Gt,crypto_box_ZEROBYTES:Rt,crypto_box_BOXZEROBYTES:Qt,crypto_sign_BYTES:Pt,crypto_sign_PUBLICKEYBYTES:kt,crypto_sign_SECRETKEYBYTES:er,crypto_sign_SEEDBYTES:Lt,crypto_hash_BYTES:Bt,gf:_,D:A,L:Je,pack25519:oe,unpack25519:q,M:he,A:te,S:Ee,Z:fe,pow2523:xe,add:qe,set25519:J,modL:Ie,scalarmult:Ge,scalarbase:rt};function ir(je,De){if(je.length!==Ze)throw new Error("bad key size");if(De.length!==Qe)throw new Error("bad nonce size")}function jt(je,De){if(je.length!==$t)throw new Error("bad public key size");if(De.length!==Nt)throw new Error("bad secret key size")}function Ct(){for(var je=0;je<arguments.length;je++)if(!(arguments[je]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function nr(je){for(var De=0;De<je.length;De++)je[De]=0}n.randomBytes=function(je){var De=new Uint8Array(je);return x(De,je),De},n.secretbox=function(je,De,Me){Ct(je,De,Me),ir(Me,De);for(var pe=new Uint8Array(St+je.length),ke=new Uint8Array(pe.length),Oe=0;Oe<je.length;Oe++)pe[Oe+St]=je[Oe];return O(ke,pe,pe.length,De,Me),ke.subarray(pt)},n.secretbox.open=function(je,De,Me){Ct(je,De,Me),ir(Me,De);for(var pe=new Uint8Array(pt+je.length),ke=new Uint8Array(pe.length),Oe=0;Oe<je.length;Oe++)pe[Oe+pt]=je[Oe];return pe.length<32||z(ke,pe,pe.length,De,Me)!==0?null:ke.subarray(St)},n.secretbox.keyLength=Ze,n.secretbox.nonceLength=Qe,n.secretbox.overheadLength=pt,n.scalarMult=function(je,De){if(Ct(je,De),je.length!==Ut)throw new Error("bad n size");if(De.length!==ft)throw new Error("bad p size");var Me=new Uint8Array(ft);return $e(Me,je,De),Me},n.scalarMult.base=function(je){if(Ct(je),je.length!==Ut)throw new Error("bad n size");var De=new Uint8Array(ft);return ge(De,je),De},n.scalarMult.scalarLength=Ut,n.scalarMult.groupElementLength=ft,n.box=function(je,De,Me,pe){var ke=n.box.before(Me,pe);return n.secretbox(je,De,ke)},n.box.before=function(je,De){Ct(je,De),jt(je,De);var Me=new Uint8Array(lr);return me(Me,je,De),Me},n.box.after=n.secretbox,n.box.open=function(je,De,Me,pe){var ke=n.box.before(Me,pe);return n.secretbox.open(je,De,ke)},n.box.open.after=n.secretbox.open,n.box.keyPair=function(){var je=new Uint8Array($t),De=new Uint8Array(Nt);return Se(je,De),{publicKey:je,secretKey:De}},n.box.keyPair.fromSecretKey=function(je){if(Ct(je),je.length!==Nt)throw new Error("bad secret key size");var De=new Uint8Array($t);return ge(De,je),{publicKey:De,secretKey:new Uint8Array(je)}},n.box.publicKeyLength=$t,n.box.secretKeyLength=Nt,n.box.sharedKeyLength=lr,n.box.nonceLength=Gt,n.box.overheadLength=n.secretbox.overheadLength,n.sign=function(je,De){if(Ct(je,De),De.length!==er)throw new Error("bad secret key size");var Me=new Uint8Array(Pt+je.length);return Te(Me,je,je.length,De),Me},n.sign.open=function(je,De){if(Ct(je,De),De.length!==kt)throw new Error("bad public key size");var Me=new Uint8Array(je.length),pe=We(Me,je,je.length,De);if(pe<0)return null;for(var ke=new Uint8Array(pe),Oe=0;Oe<ke.length;Oe++)ke[Oe]=Me[Oe];return ke},n.sign.detached=function(je,De){for(var Me=n.sign(je,De),pe=new Uint8Array(Pt),ke=0;ke<pe.length;ke++)pe[ke]=Me[ke];return pe},n.sign.detached.verify=function(je,De,Me){if(Ct(je,De,Me),De.length!==Pt)throw new Error("bad signature size");if(Me.length!==kt)throw new Error("bad public key size");var pe=new Uint8Array(Pt+je.length),ke=new Uint8Array(Pt+je.length),Oe;for(Oe=0;Oe<Pt;Oe++)pe[Oe]=De[Oe];for(Oe=0;Oe<je.length;Oe++)pe[Oe+Pt]=je[Oe];return We(ke,pe,pe.length,Me)>=0},n.sign.keyPair=function(){var je=new Uint8Array(kt),De=new Uint8Array(er);return st(je,De),{publicKey:je,secretKey:De}},n.sign.keyPair.fromSecretKey=function(je){if(Ct(je),je.length!==er)throw new Error("bad secret key size");for(var De=new Uint8Array(kt),Me=0;Me<De.length;Me++)De[Me]=je[32+Me];return{publicKey:De,secretKey:new Uint8Array(je)}},n.sign.keyPair.fromSeed=function(je){if(Ct(je),je.length!==Lt)throw new Error("bad seed size");for(var De=new Uint8Array(kt),Me=new Uint8Array(er),pe=0;pe<32;pe++)Me[pe]=je[pe];return st(De,Me,!0),{publicKey:De,secretKey:Me}},n.sign.publicKeyLength=kt,n.sign.secretKeyLength=er,n.sign.seedLength=Lt,n.sign.signatureLength=Pt,n.hash=function(je){Ct(je);var De=new Uint8Array(Bt);return Ne(De,je,je.length),De},n.hash.hashLength=Bt,n.verify=function(je,De){return Ct(je,De),je.length===0||De.length===0||je.length!==De.length?!1:F(je,0,De,0,je.length)===0},n.setPRNG=function(je){x=je},function(){var je=typeof self<"u"?self.crypto||self.msCrypto:null;if(je&&je.getRandomValues){var De=65536;n.setPRNG(function(Me,pe){var ke,Oe=new Uint8Array(pe);for(ke=0;ke<pe;ke+=De)je.getRandomValues(Oe.subarray(ke,ke+Math.min(pe-ke,De)));for(ke=0;ke<pe;ke++)Me[ke]=Oe[ke];nr(Oe)})}else typeof commonjsRequire$1<"u"&&(je=requireCryptoBrowserify(),je&&je.randomBytes&&n.setPRNG(function(Me,pe){var ke,Oe=je.randomBytes(pe);for(ke=0;ke<pe;ke++)Me[ke]=Oe[ke];nr(Oe)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(naclFast);var naclFastExports=naclFast.exports;const nacl=getDefaultExportFromCjs(naclFastExports);var jsonify={},parse,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse;hasRequiredParse=1;var t,n,_={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},x;function E(V){throw{name:"SyntaxError",message:V,at:t,text:x}}function S(V){return V&&V!==n&&E("Expected '"+V+"' instead of '"+n+"'"),n=x.charAt(t),t+=1,n}function C(){var V,L="";for(n==="-"&&(L="-",S("-"));n>="0"&&n<="9";)L+=n,S();if(n===".")for(L+=".";S()&&n>="0"&&n<="9";)L+=n;if(n==="e"||n==="E")for(L+=n,S(),(n==="-"||n==="+")&&(L+=n,S());n>="0"&&n<="9";)L+=n,S();return V=Number(L),isFinite(V)||E("Bad number"),V}function T(){var V,L,F="",j;if(n==='"')for(;S();){if(n==='"')return S(),F;if(n==="\\")if(S(),n==="u"){for(j=0,L=0;L<4&&(V=parseInt(S(),16),!!isFinite(V));L+=1)j=j*16+V;F+=String.fromCharCode(j)}else if(typeof _[n]=="string")F+=_[n];else break;else F+=n}E("Bad string")}function B(){for(;n&&n<=" ";)S()}function A(){switch(n){case"t":return S("t"),S("r"),S("u"),S("e"),!0;case"f":return S("f"),S("a"),S("l"),S("s"),S("e"),!1;case"n":return S("n"),S("u"),S("l"),S("l"),null;default:E("Unexpected '"+n+"'")}}function I(){var V=[];if(n==="["){if(S("["),B(),n==="]")return S("]"),V;for(;n;){if(V.push(M()),B(),n==="]")return S("]"),V;S(","),B()}}E("Bad array")}function D(){var V,L={};if(n==="{"){if(S("{"),B(),n==="}")return S("}"),L;for(;n;){if(V=T(),B(),S(":"),Object.prototype.hasOwnProperty.call(L,V)&&E('Duplicate key "'+V+'"'),L[V]=M(),B(),n==="}")return S("}"),L;S(","),B()}}E("Bad object")}function M(){switch(B(),n){case"{":return D();case"[":return I();case'"':return T();case"-":return C();default:return n>="0"&&n<="9"?C():A()}}return parse=function(V,L){var F;return x=V,t=0,n=" ",F=M(),B(),n&&E("Syntax error"),typeof L=="function"?function j(U,H){var Y,Z,ne=U[H];if(ne&&typeof ne=="object")for(Y in M)Object.prototype.hasOwnProperty.call(ne,Y)&&(Z=j(ne,Y),typeof Z>"u"?delete ne[Y]:ne[Y]=Z);return L.call(U,H,ne)}({"":F},""):F},parse}var stringify$1,hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify$1;hasRequiredStringify=1;var t=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,_,x={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},E;function S(T){return t.lastIndex=0,t.test(T)?'"'+T.replace(t,function(B){var A=x[B];return typeof A=="string"?A:"\\u"+("0000"+B.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+T+'"'}function C(T,B){var A,I,D,M,V=n,L,F=B[T];switch(F&&typeof F=="object"&&typeof F.toJSON=="function"&&(F=F.toJSON(T)),typeof E=="function"&&(F=E.call(B,T,F)),typeof F){case"string":return S(F);case"number":return isFinite(F)?String(F):"null";case"boolean":case"null":return String(F);case"object":if(!F)return"null";if(n+=_,L=[],Object.prototype.toString.apply(F)==="[object Array]"){for(M=F.length,A=0;A<M;A+=1)L[A]=C(A,F)||"null";return D=L.length===0?"[]":n?`[
`+n+L.join(`,
`+n)+`
`+V+"]":"["+L.join(",")+"]",n=V,D}if(E&&typeof E=="object")for(M=E.length,A=0;A<M;A+=1)I=E[A],typeof I=="string"&&(D=C(I,F),D&&L.push(S(I)+(n?": ":":")+D));else for(I in F)Object.prototype.hasOwnProperty.call(F,I)&&(D=C(I,F),D&&L.push(S(I)+(n?": ":":")+D));return D=L.length===0?"{}":n?`{
`+n+L.join(`,
`+n)+`
`+V+"}":"{"+L.join(",")+"}",n=V,D}}return stringify$1=function(T,B,A){var I;if(n="",_="",typeof A=="number")for(I=0;I<A;I+=1)_+=" ";else typeof A=="string"&&(_=A);if(E=B,B&&typeof B!="function"&&(typeof B!="object"||typeof B.length!="number"))throw new Error("JSON.stringify");return C("",{"":T})},stringify$1}var hasRequiredJsonify;function requireJsonify(){return hasRequiredJsonify||(hasRequiredJsonify=1,jsonify.parse=requireParse(),jsonify.stringify=requireStringify()),jsonify}var json=typeof JSON<"u"?JSON:requireJsonify(),isArray$1=Array.isArray||function(t){return{}.toString.call(t)==="[object Array]"},objectKeys=Object.keys||function(t){var n=Object.prototype.hasOwnProperty||function(){return!0},_=[];for(var x in t)n.call(t,x)&&_.push(x);return _},jsonStableStringify=function(t,n){n||(n={}),typeof n=="function"&&(n={cmp:n});var _=n.space||"";typeof _=="number"&&(_=Array(_+1).join(" "));var x=typeof n.cycles=="boolean"?n.cycles:!1,E=n.replacer||function(T,B){return B},S=n.cmp&&function(T){return function(B){return function(A,I){var D={key:A,value:B[A]},M={key:I,value:B[I]};return T(D,M)}}}(n.cmp),C=[];return function T(B,A,I,D){var M=_?`
`+new Array(D+1).join(_):"",V=_?": ":":";if(I&&I.toJSON&&typeof I.toJSON=="function"&&(I=I.toJSON()),I=E.call(B,A,I),I!==void 0){if(typeof I!="object"||I===null)return json.stringify(I);if(isArray$1(I)){for(var U=[],L=0;L<I.length;L++){var F=T(I,L,I[L],D+1)||json.stringify(null);U.push(M+_+F)}return"["+U.join(",")+M+"]"}if(C.indexOf(I)!==-1){if(x)return json.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else C.push(I);for(var j=objectKeys(I).sort(S&&S(I)),U=[],L=0;L<j.length;L++){var A=j[L],H=T(I,A,I[A],D+1);if(H){var Y=json.stringify(A)+V+H;U.push(M+_+Y)}}return C.splice(C.indexOf(I),1),"{"+U.join(",")+M+"}"}}({"":t},"",t,0)};const stringify=getDefaultExportFromCjs(jsonStableStringify);var nonceLength=nacl.box.nonceLength,newNonce=function t(){return nacl.randomBytes(nonceLength)},keypairToBase64=function t(n){return{publicKey:encode_1$1(n.publicKey),secretKey:encode_1$1(n.secretKey)}},keyToBytes=function t(n,_){_===void 0&&(_="base64");var x=_==="base64"?decode_1$1:encode_1;return typeof n=="string"?x(n):n},utf8=utf8$1,payloadToBytes=function t(n){return typeof n=="string"?utf8.encode(n):ArrayBuffer.isView(n)?n:utf8.encode(stringify(n))};function keyPair(t){var n=t?nacl.box.keyPair.fromSecretKey(keyToBytes(t)):nacl.box.keyPair();return keypairToBase64(n)}function encrypt(t){var n=t.secret,_=t.recipientPublicKey,x=t.senderSecretKey,E=newNonce(),S=payloadToBytes(n),C;if(x===void 0){var T=keyPair();x=T.secretKey,C=T.publicKey}else C=void 0;var B=nacl.box(S,E,keyToBytes(_),keyToBytes(x)),A=browser$1.encode({nonce:E,message:B,senderPublicKey:C});return encode_1$1(A)}function decrypt(t){var n,_=t.cipher,x=t.senderPublicKey,E=t.recipientSecretKey,S=keyToBytes(_),C=browser$1.decode(S),T=C.nonce,B=C.message;x=(n=x)!=null?n:C.senderPublicKey;var A=nacl.box.open(B,T,keyToBytes(x),keyToBytes(E));if(!A)throw new Error("Could not decrypt message");return decode_1(A)}var asymmetric={keyPair,encrypt,decrypt},browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var t=1e3,n=t*60,_=n*60,x=_*24,E=x*7,S=x*365.25;ms=function(I,D){D=D||{};var M=typeof I;if(M==="string"&&I.length>0)return C(I);if(M==="number"&&isFinite(I))return D.long?B(I):T(I);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(I))};function C(I){if(I=String(I),!(I.length>100)){var D=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(I);if(D){var M=parseFloat(D[1]),V=(D[2]||"ms").toLowerCase();switch(V){case"years":case"year":case"yrs":case"yr":case"y":return M*S;case"weeks":case"week":case"w":return M*E;case"days":case"day":case"d":return M*x;case"hours":case"hour":case"hrs":case"hr":case"h":return M*_;case"minutes":case"minute":case"mins":case"min":case"m":return M*n;case"seconds":case"second":case"secs":case"sec":case"s":return M*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return M;default:return}}}}function T(I){var D=Math.abs(I);return D>=x?Math.round(I/x)+"d":D>=_?Math.round(I/_)+"h":D>=n?Math.round(I/n)+"m":D>=t?Math.round(I/t)+"s":I+"ms"}function B(I){var D=Math.abs(I);return D>=x?A(I,D,x,"day"):D>=_?A(I,D,_,"hour"):D>=n?A(I,D,n,"minute"):D>=t?A(I,D,t,"second"):I+" ms"}function A(I,D,M,V){var L=D>=M*1.5;return Math.round(I/M)+" "+V+(L?"s":"")}return ms}function setup(t){_.debug=_,_.default=_,_.coerce=B,_.disable=S,_.enable=E,_.enabled=C,_.humanize=requireMs(),_.destroy=A,Object.keys(t).forEach(I=>{_[I]=t[I]}),_.names=[],_.skips=[],_.formatters={};function n(I){let D=0;for(let M=0;M<I.length;M++)D=(D<<5)-D+I.charCodeAt(M),D|=0;return _.colors[Math.abs(D)%_.colors.length]}_.selectColor=n;function _(I){let D,M=null,V,L;function F(...j){if(!F.enabled)return;const U=F,H=Number(new Date),Y=H-(D||H);U.diff=Y,U.prev=D,U.curr=H,D=H,j[0]=_.coerce(j[0]),typeof j[0]!="string"&&j.unshift("%O");let Z=0;j[0]=j[0].replace(/%([a-zA-Z%])/g,(re,X)=>{if(re==="%%")return"%";Z++;const ce=_.formatters[X];if(typeof ce=="function"){const ue=j[Z];re=ce.call(U,ue),j.splice(Z,1),Z--}return re}),_.formatArgs.call(U,j),(U.log||_.log).apply(U,j)}return F.namespace=I,F.useColors=_.useColors(),F.color=_.selectColor(I),F.extend=x,F.destroy=_.destroy,Object.defineProperty(F,"enabled",{enumerable:!0,configurable:!1,get:()=>M!==null?M:(V!==_.namespaces&&(V=_.namespaces,L=_.enabled(I)),L),set:j=>{M=j}}),typeof _.init=="function"&&_.init(F),F}function x(I,D){const M=_(this.namespace+(typeof D>"u"?":":D)+I);return M.log=this.log,M}function E(I){_.save(I),_.namespaces=I,_.names=[],_.skips=[];let D;const M=(typeof I=="string"?I:"").split(/[\s,]+/),V=M.length;for(D=0;D<V;D++)M[D]&&(I=M[D].replace(/\*/g,".*?"),I[0]==="-"?_.skips.push(new RegExp("^"+I.slice(1)+"$")):_.names.push(new RegExp("^"+I+"$")))}function S(){const I=[..._.names.map(T),..._.skips.map(T).map(D=>"-"+D)].join(",");return _.enable(""),I}function C(I){if(I[I.length-1]==="*")return!0;let D,M;for(D=0,M=_.skips.length;D<M;D++)if(_.skips[D].test(I))return!1;for(D=0,M=_.names.length;D<M;D++)if(_.names[D].test(I))return!0;return!1}function T(I){return I.toString().substring(2,I.toString().length-2).replace(/\.\*\?$/,"*")}function B(I){return I instanceof Error?I.stack||I.message:I}function A(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return _.enable(_.load()),_}var common=setup;(function(t,n){n.formatArgs=x,n.save=E,n.load=S,n.useColors=_,n.storage=C(),n.destroy=(()=>{let B=!1;return()=>{B||(B=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function _(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function x(B){if(B[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+B[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const A="color: "+this.color;B.splice(1,0,A,"color: inherit");let I=0,D=0;B[0].replace(/%[a-zA-Z%]/g,M=>{M!=="%%"&&(I++,M==="%c"&&(D=I))}),B.splice(D,0,A)}n.log=console.debug||console.log||(()=>{});function E(B){try{B?n.storage.setItem("debug",B):n.storage.removeItem("debug")}catch{}}function S(){let B;try{B=n.storage.getItem("debug")}catch{}return!B&&typeof browser$1$1<"u"&&"env"in browser$1$1&&(B={}.DEBUG),B}function C(){try{return localStorage}catch{}}t.exports=common(n);const{formatters:T}=t.exports;T.j=function(B){try{return JSON.stringify(B)}catch(A){return"[UnexpectedJSONParseError]: "+A.message}}})(browser,browser.exports);var browserExports=browser.exports;const debug=getDefaultExportFromCjs(browserExports);var src={exports:{}};function memoize(t,n){var _=n&&n.cache?n.cache:cacheDefault,x=n&&n.serializer?n.serializer:serializerDefault,E=n&&n.strategy?n.strategy:strategyDefault;return E(t,{cache:_,serializer:x})}function isPrimitive(t){return t==null||typeof t=="number"||typeof t=="boolean"}function monadic(t,n,_,x){var E=isPrimitive(x)?x:_(x),S=n.get(E);return typeof S>"u"&&(S=t.call(this,x),n.set(E,S)),S}function variadic(t,n,_){var x=Array.prototype.slice.call(arguments,3),E=_(x),S=n.get(E);return typeof S>"u"&&(S=t.apply(this,x),n.set(E,S)),S}function assemble(t,n,_,x,E){return _.bind(n,t,x,E)}function strategyDefault(t,n){var _=t.length===1?monadic:variadic;return assemble(t,this,_,n.cache.create(),n.serializer)}function strategyVariadic(t,n){var _=variadic;return assemble(t,this,_,n.cache.create(),n.serializer)}function strategyMonadic(t,n){var _=monadic;return assemble(t,this,_,n.cache.create(),n.serializer)}function serializerDefault(){return JSON.stringify(arguments)}function ObjectWithoutPrototypeCache(){this.cache=Object.create(null)}ObjectWithoutPrototypeCache.prototype.has=function(t){return t in this.cache};ObjectWithoutPrototypeCache.prototype.get=function(t){return this.cache[t]};ObjectWithoutPrototypeCache.prototype.set=function(t,n){this.cache[t]=n};var cacheDefault={create:function t(){return new ObjectWithoutPrototypeCache}};src.exports=memoize;src.exports.strategies={variadic:strategyVariadic,monadic:strategyMonadic};var _functionsHaveNames;function functionsHaveNames(){return typeof _functionsHaveNames<"u"?_functionsHaveNames:_functionsHaveNames=function(){return function(){}.name==="foo"}()}var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(t){if(util$9.isFunction(t)){if(functionsHaveNames())return t.name;var n=t.toString(),_=n.match(regex);return _&&_[1]}}function AssertionError(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var n=t.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var _=new Error;if(_.stack){var x=_.stack,E=getName(n),S=x.indexOf(`
`+E);if(S>=0){var C=x.indexOf(`
`,S+1);x=x.substring(C+1)}this.stack=x}}}util$9.inherits(AssertionError,Error);function truncate(t,n){return typeof t=="string"?t.length<n?t:t.slice(0,n):t}function inspect(t){if(functionsHaveNames()||!util$9.isFunction(t))return util$9.inspect(t);var n=getName(t),_=n?": "+n:"";return"[Function"+_+"]"}function getMessage(t){return truncate(inspect(t.actual),128)+" "+t.operator+" "+truncate(inspect(t.expected),128)}function fail(t,n,_,x,E){throw new AssertionError({message:_,actual:t,expected:n,operator:x,stackStartFunction:E})}var KeyType;(function(t){t.TEAM="TEAM",t.ROLE="ROLE",t.MEMBER="MEMBER",t.DEVICE="DEVICE",t.EPHEMERAL="EPHEMERAL"})(KeyType||(KeyType={}));var ADMIN="admin";KeyType.TEAM,KeyType.TEAM;KeyType.ROLE;KeyType.EPHEMERAL,KeyType.EPHEMERAL;var BASE30_ALPHABET="abcdefghjkmnpqrsuvwxyz23456789".split("");BASE30_ALPHABET.length;var HashPurpose;(function(t){t.SIGNATURE="SIGNATURE",t.ENCRYPTION="ENCRYPTION",t.SYMMETRIC="SYMMETRIC",t.LINK_TO_PREVIOUS="LINK_TO_PREVIOUS",t.INVITATION="INVITATION",t.DEVICE_ID="DEVICE_ID",t.SHARED_KEY="SHARED_KEY"})(HashPurpose||(HashPurpose={}));HashPurpose.SIGNATURE;HashPurpose.ENCRYPTION;HashPurpose.SYMMETRIC;var _keyset$KeyType=KeyType;_keyset$KeyType.MEMBER;HashPurpose.LINK_TO_PREVIOUS;KeyType.DEVICE;KeyType.ROLE;KeyType.MEMBER;var _after,TIMEOUT_DELAY=7e3;_after={},_after[TIMEOUT_DELAY]={actions:"failTimeout",target:"#failure"};KeyType.DEVICE;class EncryptionLocalFirst{constructor(){wt(this,"clefs");wt(this,"nom","dfaut");const{publicKey:n,secretKey:_}=asymmetric.keyPair();this.clefs={publique:n,secrte:_}}encrypter({message:n,clefPubliqueDestinataire:_}){return asymmetric.encrypt({secret:n,recipientPublicKey:_,senderSecretKey:this.clefs.secrte}).toString()}dcrypter({message:n,clefPubliqueExpditeur:_}){return asymmetric.decrypt({cipher:n,recipientSecretKey:this.clefs.secrte,senderPublicKey:_})}clefAlatoire(){return Math.random().toString()}async obtNom(){return this.nom}async obtClefs(){return this.clefs}}const schmaBdPrincipale$2={type:"object",additionalProperties:{type:"object",properties:{dispositifs:{anyOf:[{type:"array",items:{type:"string"}},{type:"string"}]},dispositifsFichiers:{type:["array","string"],anyOf:[{type:"array",items:{type:"string"},nullable:!0},{type:"string",nullable:!0}],nullable:!0},rcursif:{type:"boolean"}},required:["dispositifs","rcursif"]},required:[]};class Favoris extends ComposanteClientDic{constructor({client:_}){super({client:_,clef:"favoris",schmaBdPrincipale:schmaBdPrincipale$2});wt(this,"_promesseInit");wt(this,"oublierpingler");this._promesseInit=this._pinglerFavoris()}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async _pinglerFavoris(){let _=[];const x=async S=>{const C=[];await Promise.all(Object.entries(S).map(async([B,A])=>{const I=await this.estpinglSurDispositif({dispositifs:A.dispositifs}),D=await this.estpinglSurDispositif({dispositifs:A.dispositifsFichiers});I&&await this.client.pingles.pinglerBd({id:B,rcursif:A.rcursif,fichiers:D}),C.push(B)}));const T=_.filter(B=>!C.includes(B));await Promise.all(T.map(async B=>await this.client.pingles.dspinglerBd({id:B}))),_=C},E=await this.suivreBdPrincipale({f:x});this.oublierpingler=E}async suivreFavoris({f:_,idCompte:x}){const E=async S=>{const C=Object.entries(S).map(([T,B])=>({idObjet:T,...B}));await _(C)};return await this.suivreBdPrincipale({idCompte:x,f:E})}async pinglerFavori({idObjet:_,dispositifs:x="TOUS",dispositifsFichiers:E="INSTALL",rcursif:S=!0}){const{bd:C,fOublier:T}=await this.obtBd(),B={rcursif:S,dispositifs:x};E&&(B.dispositifsFichiers=E),await C.put(_,B),await T()}async dspinglerFavori({idObjet:_}){const{bd:x,fOublier:E}=await this.obtBd();await x.del(_),await E()}async suivretatFavori({idObjet:_,f:x}){return await this.suivreBdPrincipale({f:E=>x(E[_])})}async suivreEstpinglSurDispositif({idObjet:_,f:x,idDispositif:E}){const S=async C=>{const T=await this.estpinglSurDispositif({dispositifs:C?.dispositifs,idDispositif:E}),B=await this.estpinglSurDispositif({dispositifs:C?.dispositifsFichiers,idDispositif:E});return await x({idObjet:_,bd:T,fichiers:B,rcursif:C?.rcursif||!1})};return await this.suivretatFavori({idObjet:_,f:S})}async estpinglSurDispositif({dispositifs:_,idDispositif:x}){return x=x||await this.client.obtIdDispositif(),_===void 0?!1:_==="TOUS"?!0:_==="INSTALL"?x===await this.client.obtIdDispositif()?isNode||isElectronMain:!1:typeof _=="string"?_===x:_.includes(x)}async fermer(){await this._promesseInit,this.oublierpingler&&await this.oublierpingler()}}__decorate([cacheSuivi],Favoris.prototype,"suivreFavoris",null);__decorate([cacheSuivi],Favoris.prototype,"suivretatFavori",null);__decorate([cacheSuivi],Favoris.prototype,"suivreEstpinglSurDispositif",null);const MAX_TAILLE_IMAGE$1=500*1e3,MAX_TAILLE_IMAGE_VIS$1=1500*1e3,schmaBdPrincipale$1={type:"string"},schmaStructureBdProjet={type:"object",properties:{type:{type:"string"},noms:{type:"string"},descriptions:{type:"string"},bds:{type:"string"},image:{type:"string",nullable:!0},motsClefs:{type:"string"},statut:{type:"object",properties:{statut:{type:"string"},idNouvelle:{type:"string",nullable:!0}},required:["statut"]},copiDe:{type:"object",properties:{id:{type:"string"}},required:["id"]}},required:["noms","descriptions","statut","type","bds","copiDe"]};class Projets extends ComposanteClientListe{constructor({client:n}){super({client:n,clef:"projets",schmaBdPrincipale:schmaBdPrincipale$1})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async suivreProjets({f:n,idCompte:_}){return await this.suivreBdPrincipale({idCompte:_,f:n})}async crerProjet(){const{bd:n,fOublier:_}=await this.client.ouvrirBd({id:await this.obtIdBd()}),x=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:{address:void 0,premierMod:this.client.bdCompte.id}}),{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue",schma:schmaStructureBdProjet}),T={address:E.access.address};await E.set("type","projet");const B=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:T});await E.set("noms",B);const A=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:T});await E.set("descriptions",A);const I=await this.client.crerBdIndpendante({type:"feed",optionsAccs:T});await E.set("bds",I);const D=await this.client.crerBdIndpendante({type:"feed",optionsAccs:T});return await E.set("motsClefs",D),await E.set("statut",{statut:TYPES_STATUT.ACTIVE}),await n.add(x),await Promise.all([_(),S()]),x}async copierProjet({idProjet:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdProjet}),E=await this.crerProjet(),{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaStructureBdProjet}),T=_.get("noms");if(T){const{bd:V,fOublier:L}=await this.client.ouvrirBd({id:T,type:"keyvalue",schma:schmaStructureBdNoms}),F=ClientConstellation$1.obtObjetdeBdDic({bd:V});await L(),await this.sauvegarderNomsProjet({idProjet:E,noms:F})}const B=_.get("descriptions");if(B){const{bd:V,fOublier:L}=await this.client.ouvrirBd({id:B,type:"keyvalue",schma:schmaStructureBdNoms}),F=ClientConstellation$1.obtObjetdeBdDic({bd:V});await L(),await this.sauvegarderDescriptionsProjet({idProjet:E,descriptions:F})}const A=_.get("motsClefs");if(A){const{bd:V,fOublier:L}=await this.client.ouvrirBd({id:A}),F=ClientConstellation$1.obtlmentsDeBdListe({bd:V});await L(),await this.ajouterMotsClefsProjet({idProjet:E,idsMotsClefs:F})}const I=_.get("bds");if(I){const{bd:V,fOublier:L}=await this.client.ouvrirBd({id:I}),F=ClientConstellation$1.obtlmentsDeBdListe({bd:V});await L(),await Promise.all(F.map(async j=>{await this.ajouterBdProjet({idProjet:E,idBd:j})}))}const D=_.get("statut")||{statut:TYPES_STATUT.ACTIVE};await S.set("statut",D);const M=_.get("image");return M&&await S.set("image",M),await S.set("copiDe",{id:n}),await Promise.all([x(),C()]),E}async ajouterMesProjets({idProjet:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:await this.obtIdBd()});await _.add(n),await x()}async enleverDeMesProjets({idProjet:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:await this.obtIdBd()});await this.client.effacerlmentDeBdListe({bd:_,lment:n}),await x()}async inviterAuteur({idProjet:n,idCompteAuteur:_,rle:x}){await this.client.donnerAccs({idBd:n,identit:_,rle:x})}async _obtBdNoms({idProjet:n}){const _=await this.client.obtIdBd({nom:"noms",racine:n,type:"kvstore"});if(!_)throw new Error(`Permission de modification refuse pour Projet ${n}.`);return await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdNoms})}async sauvegarderNomsProjet({idProjet:n,noms:_}){const{bd:x,fOublier:E}=await this._obtBdNoms({idProjet:n});for(const S in _)await x.set(S,_[S]);await E()}async sauvegarderNomProjet({idProjet:n,langue:_,nom:x}){const{bd:E,fOublier:S}=await this._obtBdNoms({idProjet:n});await E.set(_,x),await S()}async effacerNomProjet({idProjet:n,langue:_}){const{bd:x,fOublier:E}=await this._obtBdNoms({idProjet:n});await x.del(_),await E()}async _obtBdDescr({idProjet:n}){const _=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"kvstore"});if(!_)throw new Error(`Permission de modification refuse pour Projet ${n}.`);return await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdNoms})}async sauvegarderDescriptionsProjet({idProjet:n,descriptions:_}){const{bd:x,fOublier:E}=await this._obtBdDescr({idProjet:n});for(const S in _)await x.set(S,_[S]);await E()}async sauvegarderDescriptionProjet({idProjet:n,langue:_,description:x}){const{bd:E,fOublier:S}=await this._obtBdDescr({idProjet:n});await E.set(_,x),await S()}async effacerDescriptionProjet({idProjet:n,langue:_}){const{bd:x,fOublier:E}=await this._obtBdDescr({idProjet:n});await x.del(_),await E()}async _obtBdMotsClefs({idProjet:n}){const _=await this.client.obtIdBd({nom:"motsClefs",racine:n,type:"feed"});if(!_)throw new Error(`Permission de modification refuse pour projet ${n}.`);return await this.client.ouvrirBd({id:_})}async ajouterMotsClefsProjet({idProjet:n,idsMotsClefs:_}){Array.isArray(_)||(_=[_]);const{bd:x,fOublier:E}=await this._obtBdMotsClefs({idProjet:n});await Promise.all(_.map(async S=>{ClientConstellation$1.obtlmentsDeBdListe({bd:x}).includes(S)||await x.add(S)})),await E()}async effacerMotClefProjet({idProjet:n,idMotClef:_}){const{bd:x,fOublier:E}=await this._obtBdMotsClefs({idProjet:n});await this.client.effacerlmentDeBdListe({bd:x,lment:_}),await E()}async _obtBdBds({idProjet:n}){const _=await this.client.obtIdBd({nom:"bds",racine:n,type:"feed"});if(!_)throw new Error(`Permission de modification refuse pour Projet ${n}.`);return await this.client.ouvrirBd({id:_})}async ajouterBdProjet({idProjet:n,idBd:_}){const{bd:x,fOublier:E}=await this._obtBdBds({idProjet:n});await x.add(_),await E()}async effacerBdProjet({idProjet:n,idBd:_}){const{bd:x,fOublier:E}=await this._obtBdBds({idProjet:n});await this.client.effacerlmentDeBdListe({bd:x,lment:_}),await E()}async marquerObsolte({idProjet:n,idNouvelle:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdProjet});x.set("statut",{statut:TYPES_STATUT.OBSOLTE,idNouvelle:_}),await E()}async changerStatutProjet({idProjet:n,statut:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdProjet});x.set("statut",_),await E()}async marquerActif({idProjet:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdProjet});_.set("statut",{statut:TYPES_STATUT.ACTIVE}),await x()}async marquerBta({idProjet:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdProjet});_.set("statut",{statut:TYPES_STATUT.BTA}),await x()}async marquerInterne({idProjet:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdProjet});_.set("statut",{statut:TYPES_STATUT.INTERNE}),await x()}async sauvegarderImage({idProjet:n,image:_}){let x;if(_.size!==void 0){if(_.size>MAX_TAILLE_IMAGE$1)throw new Error("Taille maximale excde");x=await _.arrayBuffer()}else x=_;const E=await this.client.ajouterSFIP({fichier:x}),{bd:S,fOublier:C}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdProjet});await S.set("image",E),await C()}async effacerImage({idProjet:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdProjet});await _.del("image"),await x()}async suivreImage({idProjet:n,f:_}){return await this.client.suivreBd({id:n,type:"keyvalue",schma:schmaStructureBdProjet,f:async x=>{const E=x.get("image");if(E){const S=await this.client.obtFichierSFIP({id:E,max:MAX_TAILLE_IMAGE_VIS$1});return await _(S)}else return await _(null)}})}async suivreNomsProjet({idProjet:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"noms",schma:schmaStructureBdNoms,f:_})}async suivreDescriptionsProjet({idProjet:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"descriptions",schma:schmaStructureBdNoms,f:_})}async suivreMotsClefsProjet({idProjet:n,f:_}){const x={},E=async()=>{if(x.propres&&x.bds){const D=[...x.propres.map(M=>({idMotClef:M,source:"projet"})),...x.bds.map(M=>({idMotClef:M,source:"bds"}))];return await _(D)}},S=async D=>(x.propres=D,await E()),C=await this.client.suivreBdListeDeClef({id:n,clef:"motsClefs",schma:{type:"string"},f:S}),T=async D=>(x.bds=D,await E()),B=async D=>await this.suivreBdsProjet({idProjet:n,f:D}),A=async(D,M)=>await this.client.bds.suivreMotsClefsBd({idBd:D,f:M}),I=await this.client.suivreBdsDeFonctionListe({fListe:B,f:T,fBranche:A});return async()=>{await C(),await I()}}async suivreBdsProjet({idProjet:n,f:_}){return await this.client.suivreBdListeDeClef({id:n,clef:"bds",schma:{type:"string"},f:_})}async suivreVariablesProjet({idProjet:n,f:_}){const x=async C=>await _(C||[]),E=async(C,T)=>await this.client.bds.suivreVariablesBd({idBd:C,f:T}),S=async({id:C,fSuivreBd:T})=>await this.client.suivreBdsDeBdListe({id:C,f:T,fBranche:E});return await this.client.suivreBdDeClef({id:n,clef:"bds",f:x,fSuivre:S})}async suivreQualitProjet({idProjet:n,f:_}){const x=async T=>await _(T.length?T.reduce((B,A)=>B+A,0)/T.length:0),E=async T=>await this.suivreBdsProjet({idProjet:n,f:T}),S=async(T,B)=>await this.client.bds.suivreQualitBd({idBd:T,f:A=>B(A.total)}),C=T=>T.flat();return await this.client.suivreBdsDeFonctionListe({fListe:E,f:x,fBranche:S,fRduction:C})}async exporterDonnes({idProjet:n,langues:_,nomFichier:x}){if(!x){const C=await uneFois(B=>this.suivreNomsProjet({idProjet:n,f:B})),T=n.split("/").pop();x=_&&traduire(C,_)||T}const E={docs:[],fichiersSFIP:new Set,nomFichier:x},S=await uneFois(C=>this.suivreBdsProjet({idProjet:n,f:C}));for(const C of S){const{doc:T,fichiersSFIP:B}=await this.client.bds.exporterDonnes({idBd:C,langues:_});let A;const I=C.split("/").pop();if(_){const D=await uneFois(M=>this.client.bds.suivreNomsBd({idBd:C,f:M}));A=traduire(D,_)||I}else A=I;E.docs.push({doc:T,nom:A});for(const D of B)E.fichiersSFIP.add(D)}return E}async exporterDocumentDonnes({donnes:n,formatDoc:_,dossier:x="",inclureFichiersSFIP:E=!0}){const{docs:S,fichiersSFIP:C,nomFichier:T}=n,A={xls:"biff8"}[_]||_,I=S.map(M=>({nom:`${M.nom}.${_}`,octets:writeSync(M.doc,{bookType:A,type:"buffer"})})),D=E?await Promise.all([...C].map(async M=>({nom:`${M.cid}.${M.ext}`,octets:await toBuffer(this.client.obtItrableAsyncSFIP({id:M.cid}))}))):[];await zipper(I,D,path.join(x,T))}async effacerProjet({idProjet:n}){await this.enleverDeMesProjets({idProjet:n});for(const _ in["noms","descriptions","motsClefs","bds"]){const x=await this.client.obtIdBd({nom:_,racine:n});x&&await this.client.effacerBd({id:x})}await this.client.effacerBd({id:n})}}__decorate([cacheSuivi],Projets.prototype,"suivreProjets",null);__decorate([cacheSuivi],Projets.prototype,"suivreImage",null);__decorate([cacheSuivi],Projets.prototype,"suivreNomsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreDescriptionsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreMotsClefsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreBdsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreVariablesProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreQualitProjet",null);const schmaBdPrincipale={type:"string"},schmaBdMotClef={type:"object",properties:{type:{type:"string",nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0}},required:[]};class MotsClefs extends ComposanteClientListe{constructor({client:n}){super({client:n,clef:"motsClefs",schmaBdPrincipale})}async pingler(){const n=await this.obtIdBd();await this.client.pingles?.pinglerBd({id:n,rcursif:!1,fichiers:!1})}async suivreMotsClefs({f:n,idCompte:_}){return await this.suivreBdPrincipale({idCompte:_,f:n})}async crerMotClef(){const n=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:{address:void 0,premierMod:this.client.bdCompte.id}});await this.ajouterMesMotsClefs({idMotClef:n});const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:n,type:"kvstore",schma:schmaBdMotClef}),S={address:_.access.address};await _.set("type","motClef");const C=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:S});await _.set("noms",C);const T=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:S});return await _.set("descriptions",T),await x(),n}async ajouterMesMotsClefs({idMotClef:n}){const{bd:_,fOublier:x}=await this.obtBd();await _.add(n),await x()}async enleverDeMesMotsClefs({idMotClef:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:await this.obtIdBd(),type:"feed"});await this.client.effacerlmentDeBdListe({bd:_,lment:n}),await x()}async copierMotClef({idMotClef:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaBdMotClef}),E=await this.crerMotClef(),S=_.get("noms");if(S){const{bd:T,fOublier:B}=await this.client.ouvrirBd({id:S,type:"keyvalue"}),A=ClientConstellation$1.obtObjetdeBdDic({bd:T});await this.sauvegarderNomsMotClef({idMotClef:E,noms:A}),await B()}const C=_.get("descriptions");if(C){const{bd:T,fOublier:B}=await this.client.ouvrirBd({id:C,type:"keyvalue"}),A=ClientConstellation$1.obtObjetdeBdDic({bd:T});await this.sauvegarderDescriptionsMotClef({idMotClef:E,descriptions:A}),await B()}return await x(),E}async inviterAuteur({idMotClef:n,idCompteAuteur:_,rle:x}){await this.client.donnerAccs({idBd:n,identit:_,rle:x})}async sauvegarderNomsMotClef({idMotClef:n,noms:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour mot clef ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue"});for(const C in _)await E.set(C,_[C]);await S()}async sauvegarderNomMotClef({idMotClef:n,langue:_,nom:x}){const E=await this.client.obtIdBd({nom:"noms",racine:n,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour mot clef ${n}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue"});await S.set(_,x),await C()}async effacerNomMotClef({idMotClef:n,langue:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour mot clef ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue"});await E.del(_),await S()}async suivreNomsMotClef({idMotClef:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"noms",schma:schmaStructureBdNoms,f:_})}async sauvegarderDescriptionsMotClef({idMotClef:n,descriptions:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour mot clef ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue"});for(const C in _)await E.set(C,_[C]);await S()}async sauvegarderDescriptionMotClef({idMotClef:n,langue:_,description:x}){const E=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour mot clef ${n}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue"});await S.set(_,x),await C()}async effacerDescriptionMotClef({id:n,langue:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour mot clef ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue"});await E.del(_),await S()}async suivreDescriptionsMotClef({idMotClef:n,f:_}){return await this.client.suivreBdDicDeClef({id:n,clef:"descriptions",schma:schmaStructureBdNoms,f:_})}async effacerMotClef({idMotClef:n}){await this.enleverDeMesMotsClefs({idMotClef:n});for(const _ in["noms"]){const x=await this.client.obtIdBd({nom:_,racine:n});x&&await this.client.effacerBd({id:x})}await this.client.effacerBd({id:n})}async suivreQualitMotClef({idMotClef:n,f:_}){return await this.suivreNomsMotClef({idMotClef:n,f:x=>_(Object.keys(x).length?1:0)})}}__decorate([cacheSuivi],MotsClefs.prototype,"suivreMotsClefs",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreNomsMotClef",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreDescriptionsMotClef",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreQualitMotClef",null);const MAX_TAILLE_IMAGE=500*1e3,MAX_TAILLE_IMAGE_VIS=1500*1e3,schmaBdAutorisations={type:"object",additionalProperties:{type:"string"},required:[]},schmaStructureBdNue={type:"object",properties:{type:{type:"string",nullable:!0},mtadonnes:{type:"string",nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0},motsClefs:{type:"string",nullable:!0},image:{type:"string",nullable:!0},tableaux:{type:"string",nullable:!0},autorisation:{type:"string",nullable:!0},statut:{type:"object",properties:{idNouvelle:{type:"string",nullable:!0},statut:{type:"string",nullable:!0}},required:[],nullable:!0},parent:{type:"string",nullable:!0},copiDe:{type:"string",nullable:!0}},required:[]},schmaStructureBdAuthorisation={type:"object",properties:{philosophie:{type:"string",nullable:!0},membres:{type:"string",nullable:!0}},required:[]},schmaBdMotsClefsNue={type:"string"};class Nue extends ComposanteClientListe{constructor({client:n}){super({client:n,clef:"nues",schmaBdPrincipale:{type:"string"}})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async crerNue({nueParent:n,autorisation:_="IJPC",ajouter:x=!0}){const E=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:{address:void 0,premierMod:this.client.bdCompte.id}});x&&await this.ajouterMesNues({idNue:E});const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"keyvalue",schma:schmaStructureBdNue}),B={address:S.access.address};await S.set("type","nue");let A;if(OrbitDB.isValidAddress(_))A=_;else if(_==="CJPI"||_==="IJPC")A=await this.gnrerGestionnaireAutorisations({philosophie:_});else throw new Error(`Autorisation non valide : ${_}`);await S.set("autorisation",A),_==="CJPI"&&await this.accepterMembreNue({idNue:E,idCompte:await this.client.obtIdCompte()});const I=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:B});await S.set("noms",I);const D=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:B});await S.set("descriptions",D);const M=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:B});await S.set("tableaux",M);const V=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:B});await S.set("mtadonnes",V);const L=await this.client.crerBdIndpendante({type:"feed",optionsAccs:B});return await S.set("motsClefs",L),await S.set("statut",{statut:TYPES_STATUT.ACTIVE}),n&&await S.set("parent",n),C(),E}async ajouterMesNues({idNue:n}){const{bd:_,fOublier:x}=await this.obtBd();await _.add(n),await x()}async enleverDeMesNues({idNue:n}){const{bd:_,fOublier:x}=await this.obtBd();await this.client.effacerlmentDeBdListe({bd:_,lment:n}),await x()}async copierNue({idNue:n,ajouterMesNues:_=!0}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdNue}),S=x.get("parent"),C=await this.crerNue({nueParent:S,ajouter:_}),{bd:T,fOublier:B}=await this.client.ouvrirBd({id:C,type:"keyvalue",schma:schmaStructureBdNue}),A=x.get("mtadonnes");if(A){const{bd:U,fOublier:H}=await this.client.ouvrirBd({id:A,type:"kvstore",schma:schmaStructureBdNoms}),Y=ClientConstellation$1.obtObjetdeBdDic({bd:U});await H(),await this.sauvegarderMtadonnesNue({idNue:C,mtadonnes:Y})}const I=x.get("noms");if(I){const{bd:U,fOublier:H}=await this.client.ouvrirBd({id:I,type:"kvstore",schma:schmaStructureBdNoms}),Y=ClientConstellation$1.obtObjetdeBdDic({bd:U});await H(),await this.sauvegarderNomsNue({idNue:C,noms:Y})}const D=x.get("descriptions");if(D){const{bd:U,fOublier:H}=await this.client.ouvrirBd({id:D,type:"kvstore",schma:schmaStructureBdNoms}),Y=ClientConstellation$1.obtObjetdeBdDic({bd:U});await H(),await this.sauvegarderDescriptionsNue({idNue:C,descriptions:Y})}const M=x.get("motsClefs");if(M){const{bd:U,fOublier:H}=await this.client.ouvrirBd({id:M,type:"feed",schma:schmaBdMotsClefsNue}),Y=ClientConstellation$1.obtlmentsDeBdListe({bd:U});await H(),await this.ajouterMotsClefsNue({idNue:C,idsMotsClefs:Y})}const V=x.get("tableaux"),L=T.get("tableaux");if(!L)throw new Error("Erreur initialisation.");if(V){const{bd:U,fOublier:H}=await this.client.ouvrirBd({id:L,type:"keyvalue",schma:schmaBdTableauxDeBd}),{bd:Y,fOublier:Z}=await this.client.ouvrirBd({id:V,type:"keyvalue",schma:schmaBdTableauxDeBd}),ne=ClientConstellation$1.obtObjetdeBdDic({bd:Y});await Z();for(const re of Object.keys(ne)){const X=await this.client.tableaux.copierTableau({id:re,idBd:C,copierDonnes:!1});await U.set(X,ne[re])}await H()}const F=x.get("statut")||{statut:TYPES_STATUT.ACTIVE};await T.set("statut",F);const j=x.get("image");return j&&await T.set("image",j),await T.set("copiDe",n),await Promise.all([E(),B()]),C}async suivreNues({f:n,idCompte:_}){return await this.suivreBdPrincipale({f:n,idCompte:_})}async suivreDeParents({idNue:n,f:_,fParents:x}){return await this.client.suivreBdsDeFonctionListe({fListe:async E=>await this.suivreNuesParents({idNue:n,f:S=>E([n,...S].reverse())}),f:_,fBranche:x,fRduction:E=>E})}async sauvegarderMtadonneNue({idNue:n,clef:_,valeur:x}){const E=await this.client.obtIdBd({nom:"mtadonnes",racine:n,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore"});await S.set(_,x),await C()}async sauvegarderMtadonnesNue({idNue:n,mtadonnes:_}){const x=await this.client.obtIdBd({nom:"mtadonnes",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"kvstore"});for(const C in _)await E.set(C,_[C]);await S()}async effacerMtadonneNue({idNue:n,clef:_}){const x=await this.client.obtIdBd({nom:"mtadonnes",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"kvstore",schma:schmaStructureBdMtadonnes});await E.del(_),await S()}async suivreMtadonnesNue({idNue:n,f:_}){const x=async E=>{await _(Object.assign({},...E))};return await this.suivreDeParents({idNue:n,f:x,fParents:async(E,S)=>await this.client.suivreBdDicDeClef({id:E,clef:"mtadonnes",schma:schmaStructureBdMtadonnes,f:S})})}async sauvegarderNomNue({idNue:n,langue:_,nom:x}){const E=await this.client.obtIdBd({nom:"noms",racine:n,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore"});await S.set(_,x),await C()}async sauvegarderNomsNue({idNue:n,noms:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"kvstore",schma:schmaStructureBdNoms});for(const C in _)await E.set(C,_[C]);await S()}async effacerNomNue({idNue:n,langue:_}){const x=await this.client.obtIdBd({nom:"noms",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"kvstore",schma:schmaStructureBdNoms});await E.del(_),await S()}async suivreNomsNue({idNue:n,f:_}){const x=async E=>{await _(Object.assign({},...E))};return await this.suivreDeParents({idNue:n,f:x,fParents:async(E,S)=>await this.client.suivreBdDicDeClef({id:E,clef:"noms",schma:schmaStructureBdNoms,f:S})})}async sauvegarderDescriptionNue({idNue:n,langue:_,description:x}){const E=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"kvstore"});if(!E)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E,type:"kvstore"});await S.set(_,x),await C()}async sauvegarderDescriptionsNue({idNue:n,descriptions:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"kvstore",schma:schmaStructureBdNoms});for(const C in _)await E.set(C,_[C]);await S()}async effacerDescriptionNue({idNue:n,langue:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"kvstore",schma:schmaStructureBdNoms});await E.del(_),await S()}async suivreDescriptionsNue({idNue:n,f:_}){const x=async E=>{await _(Object.assign({},...E))};return await this.suivreDeParents({idNue:n,f:x,fParents:async(E,S)=>await this.client.suivreBdDicDeClef({id:E,clef:"descriptions",schma:schmaStructureBdNoms,f:S})})}async sauvegarderImage({idNue:n,image:_}){let x;if(_.size!==void 0){if(_.size>MAX_TAILLE_IMAGE)throw new Error("Taille maximale excde");x=await _.arrayBuffer()}else x=_;const E=await this.client.ajouterSFIP({fichier:x}),{bd:S,fOublier:C}=await this.client.ouvrirBd({id:n,type:"keyvalue"});await S.set("image",E),await C()}async effacerImage({idNue:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:n,type:"kvstore"});await _.del("image"),await x()}async suivreImage({idNue:n,f:_}){return await this.client.suivreBd({id:n,type:"keyvalue",schma:schmaStructureBdNue,f:async x=>{const E=x.get("image");if(!E)await _(null);else{const S=await this.client.obtFichierSFIP({id:E,max:MAX_TAILLE_IMAGE_VIS});await _(S)}}})}async ajouterMotsClefsNue({idNue:n,idsMotsClefs:_}){Array.isArray(_)||(_=[_]);const x=await this.client.obtIdBd({nom:"motsClefs",racine:n,type:"feed"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"feed",schma:schmaBdMotsClefsNue});for(const C of _)ClientConstellation$1.obtlmentsDeBdListe({bd:E}).includes(C)||await E.add(C);await S()}async effacerMotClefNue({idNue:n,idMotClef:_}){const x=await this.client.obtIdBd({nom:"motsClefs",racine:n,type:"feed"});if(!x)throw new Error(`Permission de modification refuse pour BD ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"feed",schma:schmaBdMotsClefsNue});await this.client.effacerlmentDeBdListe({bd:E,lment:_}),await S()}async suivreMotsClefsNue({idNue:n,f:_}){const x=async E=>{await _([...new Set(E.flat())])};return await this.suivreDeParents({idNue:n,f:x,fParents:async(E,S)=>await this.client.suivreBdListeDeClef({id:E,clef:"motsClefs",schma:{type:"string"},f:S})})}async changerStatutNue({idNue:n,statut:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:n,type:"keyvalue"});x.set("statut",_),await E()}async suivreStatutNue({idNue:n,f:_}){return await this.client.suivreBdDic({id:n,f:async x=>{if(x.statut)return await _(x.statut)}})}async marquerObsolte({idNue:n,idNouvelle:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:n,type:"keyvalue"});x.set("statut",{statut:TYPES_STATUT.OBSOLTE,idNouvelle:_}),await E()}async marquerActive({idNue:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:n,type:"keyvalue"});_.set("statut",{statut:TYPES_STATUT.ACTIVE}),await x()}async marquerBta({idNue:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:n,type:"keyvalue"});_.set("statut",{statut:TYPES_STATUT.BTA}),await x()}async marquerInterne({idNue:n}){const{bd:_,fOublier:x}=await this.client.ouvrirBd({id:n,type:"keyvalue"});_.set("statut",{statut:TYPES_STATUT.INTERNE}),await x()}async inviterAuteur({idNue:n,idCompteAuteur:_,rle:x}){await this.client.donnerAccs({idBd:n,identit:_,rle:x})}async gnrerGestionnaireAutorisations({philosophie:n="IJPC"}){const _=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:{address:void 0,premierMod:this.client.bdCompte.id}}),{bd:x,fOublier:E}=await this.client.ouvrirBd({id:_,type:"keyvalue",schma:schmaStructureBdAuthorisation});await x.set("philosophie",n);const C={address:x.access.address},T=await this.client.crerBdIndpendante({type:"kvstore",optionsAccs:C});return await x.set("membres",T),E(),_}async changerPhisolophieAutorisation({idAutorisation:n,philosophie:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdAuthorisation});await x.set("philosophie",_),E()}async suivrePhilosophieAutorisation({idNue:n,f:_}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:C})=>await this.suivreGestionnaireAutorisations({idNue:n,f:C}),f:async C=>{if(!C)return;const T=C.get("philosophie");T&&["IJPC","CJPI"].includes(T)&&await _(T)},fSuivre:async({id:C,fSuivreBd:T})=>await this.client.suivreBd({id:C,type:"keyvalue",schma:schmaStructureBdAuthorisation,f:T})})}async accepterMembreAutorisation({idAutorisation:n,idCompte:_}){const x=await this.client.obtIdBd({nom:"membres",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour groupe d'autorisation ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue",schma:schmaBdAutorisations});await E.set(_,"accept"),S()}async accepterMembreNue({idNue:n,idCompte:_}){const x=await this.obtGestionnaireAutorisationsDeNue({idNue:n});return await this.accepterMembreAutorisation({idAutorisation:x,idCompte:_})}async exclureMembreAutorisation({idAutorisation:n,idCompte:_}){const x=await this.client.obtIdBd({nom:"membres",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour groupe d'autorisation ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue",schma:schmaBdAutorisations});await E.set(_,"exclus"),S()}async exclureMembreDeNue({idNue:n,idCompte:_}){const x=await this.obtGestionnaireAutorisationsDeNue({idNue:n});return await this.exclureMembreAutorisation({idAutorisation:x,idCompte:_})}async suivreGestionnaireAutorisations({idNue:n,f:_}){return await this.client.suivreBd({id:n,type:"keyvalue",schma:schmaStructureBdNue,f:async x=>{const E=x.get("autorisation");await _(E)}})}async changerGestionnaireAutorisations({idNue:n,idAutorisation:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:n,type:"keyvalue",schma:schmaStructureBdNue});await x.set("autorisation",_),E()}async obtGestionnaireAutorisationsDeNue({idNue:n}){return await uneFois(async _=>await this.suivreGestionnaireAutorisations({idNue:n,f:ignorerNonDfinis(_)}))}async suivreAutorisationsMembresDeGestionnaire({idAutorisation:n,f:_}){const x=async E=>{const S=Object.entries(E).map(([C,T])=>({idCompte:C,statut:T}));await _(S)};return await this.client.suivreBdDicDeClef({id:n,clef:"membres",schma:schmaBdAutorisations,f:x})}async suivreAutorisationsMembresDeNue({idNue:n,f:_}){const x=async({fSuivreRacine:S})=>await this.suivreGestionnaireAutorisations({idNue:n,f:S}),E=async({id:S,fSuivreBd:C})=>await this.suivreAutorisationsMembresDeGestionnaire({idAutorisation:S,f:C});return await suivreBdDeFonction({fRacine:x,f:ignorerNonDfinis(_),fSuivre:E})}async ajouterTableauNue({idNue:n,clefTableau:_}){const x=await this.client.obtIdBd({nom:"tableaux",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue"});_=_||v4();const C=await this.client.tableaux.crerTableau({idBd:n});return await E.set(C,{position:Object.keys(E.all).length,clef:_}),await S(),C}async effacerTableauNue({idNue:n,idTableau:_}){const x=await this.client.obtIdBd({nom:"tableaux",racine:n,type:"kvstore"});if(!x)throw new Error(`Permission de modification refuse pour Nue ${n}.`);const{bd:E,fOublier:S}=await this.client.ouvrirBd({id:x,type:"keyvalue"});await E.del(_),await S(),await this.client.tableaux.effacerTableau({idTableau:_})}async suivreTableauxNue({idNue:n,f:_}){const x=async S=>{await _(S.flat())},E=async(S,C)=>{const T=B=>{const A=Object.entries(B).map(([I,D])=>({id:I,...D}));C(A)};return await this.client.suivreBdDicDeClef({id:S,clef:"tableaux",schma:schmaBdTableauxDeBd,f:T})};return await this.suivreDeParents({idNue:n,f:x,fParents:E})}async ajouterNomsTableauNue({idTableau:n,noms:_}){return await this.client.tableaux.sauvegarderNomsTableau({idTableau:n,noms:_})}async effacerNomsTableauNue({idTableau:n,langue:_}){return await this.client.tableaux.effacerNomTableau({idTableau:n,langue:_})}async suivreNomsTableauNue({idNue:n,clefTableau:_,f:x}){const E=async C=>{await x(Object.assign({},...C))},S=async(C,T)=>await suivreBdDeFonction({fRacine:async({fSuivreRacine:B})=>await this.client.bds.suivreIdTableauParClef({idBd:C,clef:_,f:B}),f:ignorerNonDfinis(T),fSuivre:async({id:B,fSuivreBd:A})=>await this.client.tableaux.suivreNomsTableau({idTableau:B,f:A})});return await this.suivreDeParents({idNue:n,f:E,fParents:S})}async ajouterColonneTableauNue({idTableau:n,idVariable:_,idColonne:x,index:E}){const S=await this.client.tableaux.ajouterColonneTableau({idTableau:n,idVariable:_,idColonne:x});return E&&await this.changerColIndexTableauNue({idTableau:n,idColonne:S,val:!0}),S}async effacerColonneTableauNue({idTableau:n,idColonne:_}){return await this.client.tableaux.effacerColonneTableau({idTableau:n,idColonne:_})}async changerColIndexTableauNue({idTableau:n,idColonne:_,val:x}){return await this.client.tableaux.changerColIndex({idTableau:n,idColonne:_,val:x})}async suivreColonnesTableauNue({idNue:n,clefTableau:_,f:x,catgories:E=!0}){const S=async T=>{await x(T.flat())},C=async(T,B)=>await suivreBdDeFonction({fRacine:async({fSuivreRacine:A})=>await this.client.bds.suivreIdTableauParClef({idBd:T,clef:_,f:A}),f:ignorerNonDfinis(B),fSuivre:async({id:A,fSuivreBd:I})=>await this.client.tableaux.suivreColonnesTableau({idTableau:A,f:I,catgories:E})});return await this.suivreDeParents({idNue:n,f:S,fParents:C})}async ajouterRgleTableauNue({idTableau:n,idColonne:_,rgle:x}){return await this.client.tableaux.ajouterRgleTableau({idTableau:n,idColonne:_,rgle:x})}async effacerRgleTableauNue({idTableau:n,idRgle:_}){return await this.client.tableaux.effacerRgleTableau({idTableau:n,idRgle:_})}async suivreRglesTableauNue({idNue:n,clefTableau:_,f:x}){const E=async C=>{await x(C.flat())},S=async(C,T)=>await suivreBdDeFonction({fRacine:async({fSuivreRacine:B})=>await this.client.bds.suivreIdTableauParClef({idBd:C,clef:_,f:B}),f:ignorerNonDfinis(T),fSuivre:async({id:B,fSuivreBd:A})=>await this.client.tableaux.suivreRgles({idTableau:B,f:A})});return await this.suivreDeParents({idNue:n,f:E,fParents:S})}async suivreVariablesNue({idNue:n,f:_}){const x=async C=>await _(C||[]),E=async(C,T)=>await this.client.tableaux.suivreVariables({idTableau:C,f:T}),S=async C=>await this.suivreTableauxNue({idNue:n,f:T=>C(T.map(B=>B.id))});return await this.client.suivreBdsDeFonctionListe({fListe:S,f:x,fBranche:E})}async suivreQualitNue({idNue:n,f:_}){const x={noms:{},descr:{}},E=async()=>{const B=[Object.keys(x.noms).length?1:0,Object.keys(x.descr).length?1:0],A=B.reduce((I,D)=>I+D,0)/B.length;await _(A)},S=await this.suivreNomsNue({idNue:n,f:B=>{x.noms=B,E()}}),C=await this.suivreDescriptionsNue({idNue:n,f:B=>{x.descr=B,E()}});return async()=>{await S(),await C()}}async suivreDiffrencesNueEtTableau({idNue:n,clefTableau:_,idTableau:x,f:E,stricte:S=!0}){const C=async A=>{const I=A.filter(D=>S||D.svre);await E(I)},T=async({fSuivreRacine:A})=>await this.client.bds.suivreIdTableauParClef({idBd:n,clef:_,f:A}),B=async({id:A,fSuivreBd:I})=>await this.client.tableaux.suivreDiffrencesAvecTableau({idTableau:x,idTableauRf:A,f:I});return await suivreBdDeFonction({fRacine:T,f:ignorerNonDfinis(C),fSuivre:B})}async suivreDiffrencesNueEtBd({idNue:n,idBd:_,f:x}){const E={},S=async()=>{const B=[];if(E.tableauxNue&&E.tableauxBd){for(const A of E.tableauxNue)if(!E.tableauxNue.find(D=>D.clef===A.clef)){const D={type:"tableauManquant",svre:!0,clefManquante:A.clef};B.push(D)}for(const A of E.tableauxBd)if(!E.tableauxNue.find(D=>D.clef===A.clef)){const D={type:"tableauSupplmentaire",svre:!1,clefExtra:A.clef};B.push(D)}}await x(B)},C=await this.client.bds.suivreTableauxBd({idBd:_,f:B=>{E.tableauxBd=B,S()}}),T=await this.suivreTableauxNue({idNue:n,f:B=>{E.tableauxNue=B,S()}});return async()=>{await C(),await T()}}async suivreCorrespondanceBd({idBd:n,f:_}){const x=async S=>await this.client.bds.suivreNuesBd({idBd:n,f:S}),E=async(S,C)=>{const T={diffrencesBds:[],diffrencesTableaux:[]},B=async()=>{C([...T.diffrencesBds,...T.diffrencesTableaux])},A=await this.suivreDiffrencesNueEtBd({idNue:S,idBd:n,f:async M=>{T.diffrencesBds=M,await B()}}),I=async(M,V,L)=>await this.suivreDiffrencesNueEtTableau({idNue:S,clefTableau:L.clef,idTableau:M,f:async F=>{await V(F.map(j=>({type:"tableau",svre:j.svre,idTableau:M,diffrence:j})))}}),D=await this.client.suivreBdsDeFonctionListe({fListe:async M=>await this.client.bds.suivreTableauxBd({idBd:n,f:M}),f:async M=>{T.diffrencesTableaux=M,await B()},fBranche:I,fCode:M=>M.id,fIdBdDeBranche:M=>M.id});return async()=>{await Promise.all([A,D])}};return await this.client.suivreBdsDeFonctionListe({fListe:x,f:_,fBranche:E})}async rechercherNuesDscendantes({idNue:n,f:_,nRsultatsDsirs:x}){const E=async S=>{_(S.map(C=>C.id))};return await this.client.rseau.rechercherNues({f:E,fObjectif:async(S,C,T)=>await S.nues.suivreNuesParents({idNue:C,f:B=>{T({type:"rsultat",score:B.includes(n)?1:0,de:"*",info:{type:"vide"}})}}),nRsultatsDsirs:x})}async suivreNuesParents({idNue:n,f:_}){const x=async({id:E,anctres:S=[]})=>{let C,T;const B=await this.client.suivreBd({id:E,type:"keyvalue",schma:schmaStructureBdNue,f:async A=>{const I=A.get("parent");S=[...S],I&&S.push(I),await _(S),I?I!==T&&(C&&await C(),S.includes(I)||(C=await x({id:I,anctres:S})),T=I):(C&&await C(),C=void 0)}});return async()=>{await B(),C&&await C()}};return await x({id:n})}async suivreBdsCorrespondantes({idNue:n,f:_,vrifierAutorisation:x=!0,nRsultatsDsirs:E,toujoursInclureLesMiennes:S=!0}){if(x){const C={},T=async()=>{const{philoAutorisation:j,membres:U,bds:H}=C;if(!H)return;if(!j)return S?await _(H.filter(ne=>ne.auteurs.some(re=>re===this.client.idCompte)).map(ne=>ne.idBd)):void 0;if(!U)return;const Y=await this.client.obtIdCompte();return await _((ne=>{if(j==="CJPI"){const re=U.filter(X=>X.statut==="accept").map(X=>X.idCompte);return ne.filter(X=>X.auteurs.some(ce=>re.includes(ce))||S&&X.auteurs.includes(Y)).map(X=>X.idBd)}else if(j==="IJPC"){const re=U.filter(X=>X.statut==="exclus").map(X=>X.idCompte);return ne.filter(X=>!X.auteurs.some(ce=>re.includes(ce))).map(X=>X.idBd)}else throw new Error(j)})(H))},B=await this.suivrePhilosophieAutorisation({idNue:n,f:async j=>{C.philoAutorisation=j,await T()}}),A=await this.suivreAutorisationsMembresDeNue({idNue:n,f:async j=>{C.membres=j,await T()}}),I=async j=>{C.bds=j,await T()},D=async j=>await this.client.rseau.suivreBdsDeNue({idNue:n,f:j,nRsultatsDsirs:E}),M=async(j,U)=>{const H=async Y=>{await U({idBd:j,auteurs:Y.filter(Z=>Z.accept).map(Z=>Z.idCompte)})};return await this.client.rseau.suivreAuteursBd({idBd:j,f:H})},{fOublier:V,fChangerProfondeur:L}=await this.client.suivreBdsDeFonctionListe({fListe:D,f:I,fBranche:M});return{fOublier:async()=>{await Promise.all([V,A,B].map(j=>j()))},fChangerProfondeur:L}}else return await this.client.rseau.suivreBdsDeNue({idNue:n,f:_,nRsultatsDsirs:E})}async suivreEmpreinteTtesBdsNue({idNue:n,f:_}){return await this.client.suivreBdsDeFonctionListe({fListe:async x=>{const{fOublier:E}=await this.suivreBdsCorrespondantes({idNue:n,f:x,nRsultatsDsirs:1e3});return E},f:async x=>{const E=Base64.stringify(md5(x.join(":")));return await _(E)},fBranche:async(x,E)=>await this.client.suivreEmpreinteTtesBdRcursive({idBd:x,f:E})})}async suivreDonnesTableauNue({idNue:n,clefTableau:_,f:x,nRsultatsDsirs:E,ignorerErreursFormatBd:S=!0,ignorerErreursFormatTableau:C=!1,ignorerErreursDonnesTableau:T=!0,licencesPermises:B=void 0,toujoursInclureLesMiennes:A=!0,clefsSelonVariables:I=!1}){const D=async F=>{const j=F.flat();await x(j)},M=async F=>await this.suivreBdsCorrespondantes({idNue:n,f:F,nRsultatsDsirs:E,toujoursInclureLesMiennes:A}),V=async F=>{const j=async(U,H)=>{const Y={licence:!1,formatBd:!0},Z=[],ne=async()=>{const re=Object.values(Y).every(X=>X);await H(re)};if(B){const re=await this.client.bds.suivreLicenceBd({idBd:U,f:async X=>(Y.licence=B.includes(X),await ne())});Z.push(re)}else Y.licence=!0;if(S)Y.formatBd=!0;else{const re=await this.suivreDiffrencesNueEtBd({idBd:U,idNue:n,f:async X=>(Y.formatBd=!X.length,await ne())});Z.push(re)}return await ne(),async()=>{await Promise.all(Z.map(re=>re()))}};return await this.client.suivreBdsSelonCondition({fListe:M,fCondition:j,f:F})},L=async(F,j)=>{const U={},H=async()=>{const{donnes:re,erreurslments:X,auteurs:ce}=U;if(re&&X&&ce&&ce.length){const ue=ce.find(ye=>ye.accept)?.idCompte;if(!ue)return;const _e=re.map(ye=>({idCompte:ue,lment:ye,valid:X.filter(ie=>ie.empreinte==ye.empreinte)})).filter(ye=>T||!ye.valid.length);await j(_e)}},Z=await suivreBdDeFonction({fRacine:async({fSuivreRacine:re})=>await this.client.suivreBdSelonCondition({fRacine:async X=>await this.client.bds.suivreIdTableauParClef({idBd:F,clef:_,f:ignorerNonDfinis(X)}),fCondition:async(X,ce)=>C?(await ce(!0),faisRien):(await ce(!0),await this.suivreDiffrencesNueEtTableau({idNue:n,clefTableau:_,idTableau:X,f:async ue=>await ce(!ue.length),stricte:!1})),f:re}),f:async re=>{U.donnes=re?.donnes,U.erreurslments=re?.erreurs,await H()},fSuivre:async({id:re,fSuivreBd:X})=>{const ce={},ue=[],_e=async()=>{const{donnes:W,erreurs:O}=ce;W&&O&&await X({donnes:W,erreurs:O})},ye=await this.client.tableaux.suivreDonnes({idTableau:re,f:async W=>{ce.donnes=W,await _e()},clefsSelonVariables:I});ue.push(ye);const ie=await this.client.tableaux.suivreValidDonnes({idTableau:re,f:async W=>{ce.erreurs=W,await _e()}});return ue.push(ie),async()=>{await Promise.all(ue.map(W=>W()))}}}),ne=await this.client.rseau.suivreAuteursBd({idBd:F,f:async re=>{U.auteurs=re,await H()}});return async()=>{await Promise.all([Z,ne])}};return await this.client.suivreBdsDeFonctionListe({fListe:V,f:D,fBranche:L})}async exporterDonnesNue({idNue:n,langues:_,nomFichier:x,nRsultatsDsirs:E}){const S=utils$1.book_new(),C=new Set,T=await uneFois(B=>this.suivreTableauxNue({idNue:n,f:B}));for(const B of T){const{clef:A,id:I}=B;let D;const M=I.split("/").pop();if(_){const U=await uneFois(H=>this.suivreNomsTableauNue({idNue:n,clefTableau:A,f:H}));D=traduire(U,_)||M}else D=M;const V=await uneFois(async U=>{const{fOublier:H}=await this.suivreDonnesTableauNue({idNue:n,clefTableau:A,f:U,nRsultatsDsirs:E,clefsSelonVariables:!1});return H}),L=await uneFois(async U=>await this.suivreColonnesTableauNue({idNue:n,clefTableau:A,f:U}));let F=await Promise.all(V.map(async U=>({...await this.client.tableaux.formaterlment({:U.lment.donnes,colonnes:L,fichiersSFIP:C,langues:_}),auteur:U.idCompte})));if(_){const U=await uneFois(Y=>this.suivreVariablesNue({idNue:n,f:Y})),H={auteur:"auteur"};for(const Y of U){const Z=await uneFois(re=>this.client.variables.suivreNomsVariable({idVariable:Y,f:re})),ne=L.find(re=>re.variable===Y)?.id;H[Y]=traduire(Z,_)||ne||Y}F=F.map(Y=>Object.keys(Y).reduce((Z,ne)=>{const re=H[ne];return Z[re]=Y[ne],Z},{}))}const j=utils$1.json_to_sheet(F);utils$1.book_append_sheet(S,j,D.slice(0,30))}if(!x){const B=await uneFois(I=>this.suivreNomsNue({idNue:n,f:I})),A=n.split("/").pop();x=_&&traduire(B,_)||A}return{doc:S,fichiersSFIP:C,nomFichier:x}}async gnrerDeBd({idBd:n}){const _=await this.crerNue({}),x=await uneFois(async T=>await this.client.bds.suivreNomsBd({idBd:n,f:T}));await this.sauvegarderNomsNue({idNue:_,noms:x});const E=await uneFois(async T=>await this.client.bds.suivreDescriptionsBd({idBd:n,f:T}));await this.sauvegarderDescriptionsNue({idNue:_,descriptions:E});const S=await uneFois(async T=>await this.client.bds.suivreMotsClefsBd({idBd:n,f:T}));await this.ajouterMotsClefsNue({idNue:_,idsMotsClefs:S});const C=await uneFois(async T=>await this.client.bds.suivreTableauxBd({idBd:n,f:T}));for(const T of C){const B=T.id,A=await this.ajouterTableauNue({idNue:_,clefTableau:T.clef}),I=await uneFois(async D=>await this.client.tableaux.suivreColonnesTableau({idTableau:B,f:D,catgories:!1}));for(const D of I){await this.ajouterColonneTableauNue({idTableau:A,idVariable:D.variable,idColonne:D.id,index:D.index}),await this.changerColIndexTableauNue({idTableau:A,idColonne:D.id,val:!!D.index});const M=await uneFois(async V=>await this.client.tableaux.suivreRgles({idTableau:B,f:V}));for(const V of M)V.source.type==="tableau"&&await this.ajouterRgleTableauNue({idTableau:A,idColonne:D.id,rgle:V.rgle.rgle})}}return _}async gnrerSchmaBdNue({idNue:n,licence:_}){const x=await uneFois(async T=>await this.suivreTableauxNue({idNue:n,f:T})),E={};for(const T of x)E[T.clef]=await uneFois(async B=>await this.suivreRglesTableauNue({idNue:n,clefTableau:T.clef,f:B}));const S=async T=>await uneFois(async B=>await this.suivreColonnesTableauNue({idNue:n,clefTableau:T.clef,f:B}),B=>!!B&&!!B.length);return{licence:_,nues:[n],tableaux:await Promise.all(x.map(async T=>({cols:(await S(T)).map(A=>{const I=E[T.clef]?.some(D=>D.colonne===A.id&&D.rgle.rgle.typeRgle==="existe");return{idColonne:A.id,idVariable:A.variable,index:A.index,optionnel:!I}}),clef:T.clef})))}}async effacerNue({idNue:n}){const{bd:_,fOublier:x}=await this.obtBd();await this.client.effacerlmentDeBdListe({bd:_,lment:n}),await x();for(const S in["noms","descriptions","motsClefs"]){const C=await this.client.obtIdBd({nom:S,racine:n});C&&await this.client.effacerBd({id:C})}const E=await this.client.obtIdBd({nom:"tableaux",racine:n,type:"kvstore"});if(E){const{bd:S,fOublier:C}=await this.client.ouvrirBd({id:E}),T=Object.keys(S.all);for(const B of T)await this.client.tableaux.effacerTableau({idTableau:B});C(),await this.client.effacerBd({id:E})}await this.enleverDeMesNues({idNue:n}),await this.client.effacerBd({id:n})}}__decorate([cacheSuivi],Nue.prototype,"suivreDescriptionsNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreImage",null);__decorate([cacheSuivi],Nue.prototype,"suivreMotsClefsNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreNomsTableauNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreColonnesTableauNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreRglesTableauNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreQualitNue",null);__decorate([cacheSuivi],Nue.prototype,"suivreDiffrencesNueEtTableau",null);__decorate([cacheSuivi],Nue.prototype,"suivreDiffrencesNueEtBd",null);__decorate([cacheSuivi],Nue.prototype,"suivreCorrespondanceBd",null);__decorate([cacheRechercheParNRsultats],Nue.prototype,"rechercherNuesDscendantes",null);__decorate([cacheSuivi],Nue.prototype,"suivreNuesParents",null);__decorate([cacheRechercheParNRsultats],Nue.prototype,"suivreBdsCorrespondantes",null);__decorate([cacheSuivi],Nue.prototype,"suivreEmpreinteTtesBdsNue",null);__decorate([cacheRechercheParNRsultats],Nue.prototype,"suivreDonnesTableauNue",null);const rechercherVariablesSelonNom=t=>async(n,_,x)=>{const E=async C=>{const T=similTexte(t,C);if(T){const{score:B,clef:A,info:I}=T;return await x({type:"rsultat",score:B,de:"nom",clef:A,info:I})}else return await x()};return await n.variables.suivreNomsVariable({idVariable:_,f:E})},rechercherVariablesSelonDescr=t=>async(n,_,x)=>{const E=async C=>{const T=similTexte(t,C);if(T){const{score:B,clef:A,info:I}=T;return await x({type:"rsultat",score:B,de:"descr",clef:A,info:I})}else return await x()};return await n.variables.suivreDescrVariable({idVariable:_,f:E})},rechercherVariablesSelonTexte=t=>async(n,_,x)=>{const E=rechercherVariablesSelonNom(t),S=rechercherVariablesSelonDescr(t),C=rechercherSelonId(t);return await combinerRecherches({noms:E,descr:S,id:C},n,_,x)},rechercherMotsClefsSelonNom=t=>async(n,_,x)=>{const E=async C=>{const T=similTexte(t,C);if(T){const{score:B,clef:A,info:I}=T;return await x({type:"rsultat",score:B,clef:A,info:I,de:"nom"})}else return await x()};return await n.motsClefs.suivreNomsMotClef({idMotClef:_,f:E})},rechercherMotsClefsSelonDescr=t=>async(n,_,x)=>{const E=async C=>{const T=similTexte(t,C);if(T){const{score:B,clef:A,info:I}=T;return await x({type:"rsultat",score:B,clef:A,info:I,de:"descr"})}else return await x()};return await n.motsClefs.suivreDescriptionsMotClef({idMotClef:_,f:E})},rechercherMotsClefsSelonTexte=t=>async(n,_,x)=>{const E=rechercherMotsClefsSelonNom(t),S=rechercherSelonId(t);return await combinerRecherches({noms:E,id:S},n,_,x)},rechercherBdsSelonNom=t=>async(n,_,x)=>{const E=async C=>{const T=similTexte(t,C);if(T){const{score:B,clef:A,info:I}=T;return await x({type:"rsultat",score:B,clef:A,info:I,de:"nom"})}else return await x()};return await n.bds.suivreNomsBd({idBd:_,f:E})},rechercherBdsSelonDescr=t=>async(n,_,x)=>{const E=async C=>{const T=similTexte(t,C);if(T){const{score:B,clef:A,info:I}=T;return await x({type:"rsultat",score:B,clef:A,info:I,de:"descr"})}else return await x()};return await n.bds.suivreDescriptionsBd({idBd:_,f:E})},rechercherBdsSelonIdVariable=t=>async(n,_,x)=>{const E=async C=>await n.bds.suivreVariablesBd({idBd:_,f:C}),S=rechercherSelonId(t);return await sousRecherche("variable",E,S,n,x)},rechercherBdsSelonNomVariable=t=>async(n,_,x)=>{const E=async C=>await n.bds.suivreVariablesBd({idBd:_,f:C}),S=rechercherVariablesSelonNom(t);return await sousRecherche("variable",E,S,n,x)},rechercherBdsSelonVariable=t=>async(n,_,x)=>await combinerRecherches({id:rechercherBdsSelonIdVariable(t),nom:rechercherBdsSelonNomVariable(t)},n,_,x),rechercherBdsSelonIdMotClef=t=>async(n,_,x)=>{const E=async C=>await n.bds.suivreMotsClefsBd({idBd:_,f:C}),S=rechercherSelonId(t);return await sousRecherche("motClef",E,S,n,x)},rechercherBdsSelonNomMotClef=t=>async(n,_,x)=>{const E=async C=>await n.bds.suivreMotsClefsBd({idBd:_,f:C}),S=rechercherMotsClefsSelonNom(t);return await sousRecherche("motClef",E,S,n,x)},rechercherBdsSelonMotClef=t=>async(n,_,x)=>await combinerRecherches({id:rechercherBdsSelonIdMotClef(t),nom:rechercherBdsSelonNomMotClef(t)},n,_,x),rechercherBdsSelonTexte=t=>async(n,_,x)=>await combinerRecherches({nom:rechercherBdsSelonNom(t),descr:rechercherBdsSelonDescr(t),variables:rechercherBdsSelonVariable(t),motsClefs:rechercherBdsSelonMotClef(t),id:rechercherSelonId(t)},n,_,x),rechercherProjetsSelonNom=t=>async(n,_,x)=>{const E=C=>{const T=similTexte(t,C);if(T){const{score:B,clef:A,info:I}=T;x({type:"rsultat",score:B,clef:A,info:I,de:"nom"})}else x()};return await n.projets.suivreNomsProjet({idProjet:_,f:E})},rechercherProjetsSelonDescr=t=>async(n,_,x)=>{const E=C=>{const T=similTexte(t,C);if(T){const{score:B,clef:A,info:I}=T;x({type:"rsultat",score:B,clef:A,info:I,de:"descr"})}else x()};return await n.projets.suivreDescriptionsProjet({idProjet:_,f:E})},rechercherProjetsSelonIdBd=t=>async(n,_,x)=>{const E=async C=>await n.projets.suivreBdsProjet({idProjet:_,f:C}),S=rechercherSelonId(t);return await sousRecherche("bd",E,S,n,x)},rechercherProjetsSelonBd=t=>async(n,_,x)=>{const E=async C=>await n.projets.suivreBdsProjet({idProjet:_,f:C}),S=rechercherBdsSelonTexte(t);return await sousRecherche("bd",E,S,n,x)},rechercherProjetsSelonIdVariable=t=>async(n,_,x)=>{const E=async C=>await n.projets.suivreVariablesProjet({idProjet:_,f:C}),S=rechercherSelonId(t);return await sousRecherche("variable",E,S,n,x)},rechercherProjetsSelonNomVariable=t=>async(n,_,x)=>{const E=async C=>await n.projets.suivreVariablesProjet({idProjet:_,f:C}),S=rechercherVariablesSelonNom(t);return await sousRecherche("variable",E,S,n,x)},rechercherProjetsSelonVariable=t=>async(n,_,x)=>{const E=async C=>await n.projets.suivreVariablesProjet({idProjet:_,f:C}),S=rechercherVariablesSelonTexte(t);return await sousRecherche("variable",E,S,n,x)},rechercherProjetsSelonIdMotClef=t=>async(n,_,x)=>{const E=async C=>await n.projets.suivreMotsClefsProjet({idProjet:_,f:T=>C(T.map(B=>B.idMotClef))}),S=rechercherSelonId(t);return await sousRecherche("motClef",E,S,n,x)},rechercherProjetsSelonNomMotClef=t=>async(n,_,x)=>{const E=async C=>await n.projets.suivreMotsClefsProjet({idProjet:_,f:T=>C(T.map(B=>B.idMotClef))}),S=rechercherMotsClefsSelonNom(t);return await sousRecherche("motClef",E,S,n,x)},rechercherProjetsSelonMotClef=t=>async(n,_,x)=>{const E=async C=>await n.projets.suivreMotsClefsProjet({idProjet:_,f:T=>C(T.map(B=>B.idMotClef))}),S=rechercherMotsClefsSelonTexte(t);return await sousRecherche("motClef",E,S,n,x)},rechercherProjetsSelonTexte=t=>async(n,_,x)=>{const E=rechercherProjetsSelonNom(t),S=rechercherProjetsSelonDescr(t),C=rechercherProjetsSelonBd(t),T=rechercherProjetsSelonVariable(t),B=rechercherProjetsSelonMotClef(t),A=rechercherSelonId(t);return await combinerRecherches({noms:E,descr:S,bd:C,variable:T,motClef:B,id:A},n,_,x)},rechercherNuesSelonNom=t=>async(n,_,x)=>{const E=C=>{const T=similTexte(t,C);if(T){const{score:B,clef:A,info:I}=T;x({type:"rsultat",score:B,clef:A,info:I,de:"nom"})}else x()};return await n.nues.suivreNomsNue({idNue:_,f:E})},rechercherNuesSelonDescr=t=>async(n,_,x)=>{const E=C=>{const T=similTexte(t,C);if(T){const{score:B,clef:A,info:I}=T;x({type:"rsultat",score:B,clef:A,info:I,de:"descr"})}else x()};return await n.nues.suivreDescriptionsNue({idNue:_,f:E})},rechercherNuesSelonIdVariable=t=>async(n,_,x)=>{const E=async C=>await n.nues.suivreVariablesNue({idNue:_,f:C}),S=rechercherSelonId(t);return await sousRecherche("variable",E,S,n,x)},rechercherNuesSelonNomVariable=t=>async(n,_,x)=>{const E=async C=>await n.nues.suivreVariablesNue({idNue:_,f:C}),S=rechercherVariablesSelonNom(t);return await sousRecherche("variable",E,S,n,x)},rechercherNuesSelonVariable=t=>async(n,_,x)=>await combinerRecherches({id:rechercherNuesSelonIdVariable(t),nom:rechercherNuesSelonNomVariable(t)},n,_,x),rechercherNuesSelonIdMotClef=t=>async(n,_,x)=>{const E=async C=>await n.nues.suivreMotsClefsNue({idNue:_,f:C}),S=rechercherSelonId(t);return await sousRecherche("motClef",E,S,n,x)},rechercherNuesSelonNomMotClef=t=>async(n,_,x)=>{const E=async C=>await n.nues.suivreMotsClefsNue({idNue:_,f:C}),S=rechercherMotsClefsSelonNom(t);return await sousRecherche("motClef",E,S,n,x)},rechercherNuesSelonMotClef=t=>async(n,_,x)=>await combinerRecherches({id:rechercherNuesSelonIdMotClef(t),nom:rechercherNuesSelonNomMotClef(t)},n,_,x),rechercherNuesSelonTexte=t=>async(n,_,x)=>await combinerRecherches({nom:rechercherNuesSelonNom(t),descr:rechercherNuesSelonDescr(t),variables:rechercherNuesSelonVariable(t),motsClefs:rechercherNuesSelonMotClef(t),id:rechercherSelonId(t)},n,_,x);class Recherche{constructor({client:n}){wt(this,"client");this.client=n}async rechercherVariables({f:n,nRsultatsDsirs:_,toutLeRseau:x=!0}){return await this.client.rseau.rechercherVariables({f:n,nRsultatsDsirs:_,toutLeRseau:x})}async rechercherVariablesSelonId({idVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherSelonId(n);return await this.client.rseau.rechercherVariables({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherVariablesSelonNom({nomVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherVariablesSelonNom(n);return await this.client.rseau.rechercherVariables({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherVariablesSelonDescr({descrVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherVariablesSelonDescr(n);return await this.client.rseau.rechercherVariables({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherVariablesSelonTexte({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherVariablesSelonTexte(n);return await this.client.rseau.rechercherVariables({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherMotsClefs({f:n,nRsultatsDsirs:_,toutLeRseau:x=!0}){return await this.client.rseau.rechercherMotsClefs({f:n,nRsultatsDsirs:_,toutLeRseau:x})}async rechercherMotsClefsSelonId({idMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherSelonId(n);return await this.client.rseau.rechercherMotsClefs({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherMotsClefsSelonNom({nomMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherMotsClefsSelonNom(n);return await this.client.rseau.rechercherMotsClefs({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherMotsClefsSelonDescr({descrMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherMotsClefsSelonDescr(n);return await this.client.rseau.rechercherMotsClefs({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherMotsClefsSelonTexte({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherMotsClefsSelonTexte(n);return await this.client.rseau.rechercherMotsClefs({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherBds({f:n,nRsultatsDsirs:_,toutLeRseau:x=!0}){return await this.client.rseau.rechercherBds({f:n,nRsultatsDsirs:_,toutLeRseau:x})}async rechercherBdsSelonId({idBd:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherSelonId(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherBdsSelonNom({nomBd:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherBdsSelonNom(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherBdsSelonDescr({descrBd:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherBdsSelonDescr(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherBdsSelonIdMotClef({idMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherBdsSelonIdMotClef(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherBdsSelonIdVariable({idVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherBdsSelonIdVariable(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherBdsSelonNomMotClef({nomMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherBdsSelonNomMotClef(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherBdsSelonNomVariable({nomVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherBdsSelonNomVariable(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherBdsSelonMotClef({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherBdsSelonMotClef(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherBdsSelonVariable({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherBdsSelonVariable(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherBdsSelonTexte({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherBdsSelonTexte(n);return await this.client.rseau.rechercherBds({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherProfilsSelonId({idCompte:n,f:_,nRsultatsDsirs:x}){const E=rechercherSelonId(n);return await this.client.rseau.rechercherMembres({f:_,nRsultatsDsirs:x,fObjectif:E})}async rechercherProfilsSelonNom({nom:n,f:_,nRsultatsDsirs:x}){const E=rechercherProfilsSelonNom(n);return await this.client.rseau.rechercherMembres({f:_,nRsultatsDsirs:x,fObjectif:E})}async rechercherProfilsSelonImage({image:n,f:_,nRsultatsDsirs:x}){const E=rechercherProfilsSelonImage(n);return await this.client.rseau.rechercherMembres({f:_,nRsultatsDsirs:x,fObjectif:E})}async rechercherProfilsSelonActivit({f:n,nRsultatsDsirs:_}){const x=rechercherProfilsSelonActivit();return await this.client.rseau.rechercherMembres({f:n,nRsultatsDsirs:_,fObjectif:x})}async rechercherProfilsSelonCourriel({courriel:n,f:_,nRsultatsDsirs:x}){const E=rechercherProfilsSelonCourriel(n);return await this.client.rseau.rechercherMembres({f:_,nRsultatsDsirs:x,fObjectif:E})}async rechercherProfilsSelonTexte({texte:n,f:_,nRsultatsDsirs:x}){const E=rechercherProfilsSelonTexte(n);return await this.client.rseau.rechercherMembres({f:_,nRsultatsDsirs:x,fObjectif:E})}async rechercherProjets({f:n,nRsultatsDsirs:_,toutLeRseau:x=!0}){return await this.client.rseau.rechercherProjets({f:n,nRsultatsDsirs:_,toutLeRseau:x})}async rechercherProjetsSelonId({idProjet:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherSelonId(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherProjetsSelonNom({nomProjet:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherProjetsSelonNom(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherProjetsSelonDescr({descrProjet:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherProjetsSelonDescr(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherProjetsSelonIdVariable({idVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherProjetsSelonIdVariable(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherProjetsSelonNomVariable({nomVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherProjetsSelonNomVariable(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherProjetsSelonVariable({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherProjetsSelonVariable(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherProjetsSelonIdMotClef({idMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherProjetsSelonIdMotClef(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherProjetsSelonNomMotClef({nomMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherProjetsSelonNomMotClef(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherProjetsSelonMotClef({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherProjetsSelonMotClef(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherProjetsSelonIdBd({idBd:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherProjetsSelonIdBd(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherProjetsSelonBd({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherProjetsSelonBd(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherProjetsSelonTexte({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherProjetsSelonTexte(n);return await this.client.rseau.rechercherProjets({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherNues({f:n,nRsultatsDsirs:_,toutLeRseau:x=!0}){return await this.client.rseau.rechercherNues({f:n,nRsultatsDsirs:_,toutLeRseau:x})}async rechercherNuesSelonId({idNue:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherSelonId(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherNuesSelonNom({nomNue:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherNuesSelonNom(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherNuesSelonDescr({descrNue:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherNuesSelonDescr(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherNuesSelonIdMotClef({idMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherNuesSelonIdMotClef(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherNuesSelonIdVariable({idVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherNuesSelonIdVariable(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherNuesSelonNomMotClef({nomMotClef:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherNuesSelonNomMotClef(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherNuesSelonNomVariable({nomVariable:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherNuesSelonNomVariable(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherNuesSelonMotClef({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherNuesSelonMotClef(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherNuesSelonVariable({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherNuesSelonVariable(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}async rechercherNuesSelonTexte({texte:n,f:_,nRsultatsDsirs:x,toutLeRseau:E=!0}){const S=rechercherNuesSelonTexte(n);return await this.client.rseau.rechercherNues({f:_,nRsultatsDsirs:x,fObjectif:S,toutLeRseau:E})}}__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariables",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariablesSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariablesSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariablesSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherVariablesSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefs",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefsSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefsSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefsSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherMotsClefsSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBds",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonIdMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonIdVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonNomMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonNomVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherBdsSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonImage",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonActivit",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonCourriel",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProfilsSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjets",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonIdVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonNomVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonIdMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonNomMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonIdBd",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonBd",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherProjetsSelonTexte",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNues",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonId",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonNom",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonDescr",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonIdMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonIdVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonNomMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonNomVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonMotClef",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonVariable",null);__decorate([cacheRechercheParNRsultats],Recherche.prototype,"rechercherNuesSelonTexte",null);class ImportateurFeuilleCalcul{constructor(n){wt(this,"doc");this.doc=n}obtNomsTableaux(){return this.doc.SheetNames}obtColsTableau(n){const _=this.doc.Sheets[n];return(utils$1.sheet_to_json(_,{header:1})[0]||[]).map(E=>E.toString())}obtDonnes(n,_){const x=this.doc.Sheets[n],E=utils$1.sheet_to_json(x);if(Array.isArray(_))return E.map(S=>Object.fromEntries(Object.keys(S).filter(C=>_.includes(C)).map(C=>[C,S[C]])));{const S=Object.fromEntries(Object.entries(_).map(([C,T])=>[T,C]));return E.map(C=>Object.fromEntries(Object.keys(C).filter(T=>Object.keys(S).includes(T)).map(T=>[S[T],C[T]])))}}}const copieProfonde=t=>JSON.parse(JSON.stringify(t)),estUnDic=t=>typeof t=="object"&&!Array.isArray(t),estUneListe=t=>Array.isArray(t),extraireBranches=(t,n)=>{let _;if(!n.length)return _=estUnDic(t)?Object.values(t):t,{base:{},branches:_};const x=extraireDonnes(t,n.slice(0,n.length-1)),E=n[n.length-1];let S;if(typeof E=="number")if(estUneListe(x)){const C=x[E];if(typeof C!="object")throw new Error(C.toString());S=C,delete x[E]}else throw new Error(`${E} ne peut pas indexer une liste.`);else if(typeof E=="string")if(estUnDic(x)){const C=x[E];if(typeof C!="object")throw new Error(C.toString());S=C,delete x[E]}else throw new Error(`${E} ne peut pas indexer un objet.`);else throw new Error(`${E} n'est pas une clef valide.`);if(estUnDic(S))_=Object.values(S);else if(estUneListe(S))_=S;else throw Error(JSON.stringify(S));return{base:t,branches:_}},injecterBranche=(t,n,_)=>{if(!n.length)Object.assign(t,_);else{const x=n.slice(1,n.length),E=extraireDonnes(t,x),S=n[n.length-1];if(typeof S=="number")if(estUneListe(E))E[S]=_;else throw new Error(`${S} ne peut pas indexer une liste.`);else if(typeof S=="string")if(estUnDic(E))E[S]=_;else throw new Error(`${S} ne peut pas indexer un objet.`);else throw new Error(`${S} n'est pas une clef valide.`)}},aplatirDonnes=(t,n=[],_,x=[])=>{n[n.length-1]!==-1&&n.push(-1);const E=n.indexOf(-1),S=n.slice(0,E),C=n.slice(E+1,n.length),{base:T,branches:B}=extraireBranches(t,S);for(const A of B){if(typeof A!="object")throw new Error(A.toString());const I=copieProfonde(T);injecterBranche(I,S,A),C.length?aplatirDonnes(A,C,I,x):x.push(I)}return x},extraireDonnes=(t,n)=>{let _=t;for(const x of n)if(typeof x=="number")if(estUneListe(_))_=_[x];else throw new Error(`${x} ne peut pas indexer une liste.`);else if(typeof x=="string")if(estUnDic(_))_=_[x];else throw new Error(`${x} ne peut pas indexer un objet.`);else throw new Error(`Clef de type non indexable: ${x}`);return _};class ImportateurDonnesJSON{constructor(n){wt(this,"donnesJSON");this.donnesJSON=n}obtDonnes(n,_,x){let E=[],S=extraireDonnes(this.donnesJSON,n);if(typeof S!="object")throw new Error(`Type de donnes erron: ${S.toString()}`);S=aplatirDonnes(S,_);for(const C of S){if(typeof C!="object")throw new Error(`lment de type non support: ${C}`);E=[Object.fromEntries(Object.keys(x).map(B=>{const A=x[B];let I;try{I=extraireDonnes(C,A)}catch{I=void 0}return[B,I]}).filter(B=>B[1]!==void 0)),...E]}return E}}(isElectronMain||isNode)&&(__vitePreload(()=>Promise.resolve().then(()=>fs_),void 0).then(t=>set_fs(t)),__vitePreload(()=>Promise.resolve().then(()=>stream$2),void 0).then(t=>__stream.set_readable(t.Readable)));const MESSAGE_NON_DISPO_NAVIGATEUR="L'automatisation de l'importation des fichiers locaux n'est pas disponible sur la version apli internet de Constellation.",schmaSpcificationAutomatisation={type:"object",anyOf:[{type:"object",properties:{type:{type:"string"},id:{type:"string"},frquence:{type:"object",properties:{n:{type:"number"},units:{type:"string"}},nullable:!0,required:["n","units"]},idObjet:{type:"string"},typeObjet:{type:"string"},formatDoc:{type:"string"},dossier:{type:"string",nullable:!0},langues:{type:"array",items:{type:"string"},nullable:!0},dispositifs:{type:"array",items:{type:"string"}},inclureFichiersSFIP:{type:"boolean"},nRsultatsDsirsNue:{type:"integer",nullable:!0}},required:["type","idObjet","typeObjet","formatDoc","dispositifs","inclureFichiersSFIP"]},{type:"object",properties:{id:{type:"string"},frquence:{type:"object",properties:{n:{type:"number"},units:{type:"string"}},nullable:!0,required:["n","units"]},idTableau:{type:"string"},dispositif:{type:"string"},source:{type:"object",properties:{typeSource:{type:"string"},adresseFichier:{type:"string",nullable:!0},info:{type:"object",additionalProperties:!0,required:[]}},required:["info","typeSource"]},conversions:{type:"object",nullable:!0,additionalProperties:!0,required:[]}},required:["id","idTableau","dispositif","source"]}],required:["id","type"]},obtTempsInterval=t=>{const{n,units:_}=t;switch(_){case"annes":return n*365.25*24*60*60*1e3;case"mois":return n*30*24*60*60*1e3;case"semaines":return n*7*24*60*60*1e3;case"jours":return n*24*60*60*1e3;case"heures":return n*60*60*1e3;case"minutes":return n*60*1e3;case"secondes":return n*1e3;case"millisecondes":return n;default:throw new Error(_)}},gnrerFExportation=(t,n)=>async()=>{const _=await __vitePreload(()=>Promise.resolve().then(()=>os$1),void 0),x=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0),E=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),S=t.dossier?await n.automatisations.rsoudreAdressePriveFichier({clef:t.dossier}):x.join(_.homedir(),"constellation");if(!S)throw new Error("Dossier introuvable");let C;const T=I=>{const D=I.split(".");return`${D[0]}-${Date.now()}.${D[1]}`};switch(t.typeObjet){case"tableau":{const I=await n.tableaux.exporterDonnes({idTableau:t.idObjet,langues:t.langues});C=I.nomFichier,t.copies&&(C=T(C)),await n.bds.exporterDocumentDonnes({donnes:I,formatDoc:t.formatDoc,dossier:S,inclureFichiersSFIP:t.inclureFichiersSFIP});break}case"bd":{const I=await n.bds.exporterDonnes({idBd:t.idObjet,langues:t.langues});C=I.nomFichier,t.copies&&(C=T(C)),await n.bds.exporterDocumentDonnes({donnes:I,formatDoc:t.formatDoc,dossier:S,inclureFichiersSFIP:t.inclureFichiersSFIP});break}case"projet":{const I=await n.projets.exporterDonnes({idProjet:t.idObjet,langues:t.langues});C=I.nomFichier,t.copies&&(C=T(C)),await n.projets.exporterDocumentDonnes({donnes:I,formatDoc:t.formatDoc,dossier:S,inclureFichiersSFIP:t.inclureFichiersSFIP});break}case"nue":{const I=await n.nues.exporterDonnesNue({idNue:t.idObjet,langues:t.langues,nRsultatsDsirs:t.nRsultatsDsirsNue||1e3});C=I.nomFichier,t.copies&&(C=T(C)),await n.bds.exporterDocumentDonnes({donnes:I,formatDoc:t.formatDoc,dossier:S,inclureFichiersSFIP:t.inclureFichiersSFIP});break}default:throw new Error(t.typeObjet)}const B=E.readdirSync(S).filter(I=>{try{return E.statSync(I).isFile()&&A(x.basename(I),C)}catch{return!1}}),A=(I,D)=>{const M=I.split(".").pop()||"";return`${I.slice(0,-(M?.length+1)).split("-").slice(0,-1).join("")}.${M}`===D};if(t.copies){if(t.copies.type==="n"){const I=t.copies.n-B.length;I>0&&B.map(L=>({temps:new Date(E.statSync(L).mtime).valueOf(),fichier:L})).sort((L,F)=>L.temps>F.temps?1:-1).slice(I).map(L=>L.fichier).forEach(L=>E.rmSync(L))}else if(t.copies.type==="temps"){const I=Date.now(),{temps:D}=t.copies;B.filter(V=>{const L=new Date(E.statSync(V).mtime).valueOf();return I-L<obtTempsInterval(D)}).forEach(V=>E.rmSync(V))}}},gnrerFAuto=(t,n)=>{switch(t.type){case"importation":return async()=>{const _=async C=>await n.automatisations.rsoudreAdressePriveFichier({clef:C})||void 0,x=await n.automatisations.obtDonnesImportation(t,_),E=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0);let S;if(t.source.typeSource==="fichier"&&t.source.adresseFichier){const C=await _(t.source.adresseFichier);C&&(S=E.dirname(C))}await n.tableaux.importerDonnes({idTableau:t.idTableau,donnes:x,conversions:t.conversions,cheminBaseFichiers:S})};case"exportation":return gnrerFExportation(t,n);default:throw new Error(t)}},lancerAutomatisation=async({spc:t,idSpc:n,client:_,ftat:x})=>{const E=gnrerFAuto(t,_),S=`auto: ${n}`,C=t.frquence?obtTempsInterval(t.frquence):void 0,T=new Semaphore;let B="";const A=await _.obtDeStockageLocal({clef:S}),I=new Set([A]),D=async M=>{if(I.has(M))return;if(B=M,await T.acquire("opration"),M!==B||I.has(M)){T.release("opration");return}await _.sauvegarderAuStockageLocal({clef:S,val:M}),I.add(M);const V={type:"sync",depuis:new Date().getTime()};x(V);try{if(await E(),C){const L={type:"programme",:Date.now()+C};x(L)}else x({type:"coute"})}catch(L){const F={type:"erreur",erreur:JSON.stringify({nom:L.name,message:L.message,pile:L.stack,cause:L.cause},void 0,2),prochaineProgramme:C?Date.now()+C:void 0};x(F)}T.release("opration")};if(t.frquence){x({type:"programme",:C});const V={},L=async()=>{const ne=new Date().getTime();await D(ne.toString());const re=setTimeout(L,C);V.f=async()=>clearTimeout(re)},F=new Date().getTime(),j=await _.obtDeStockageLocal({clef:S}),U=j?parseInt(j):-1/0,H=F-U,Y=setTimeout(L,Math.max(C-H,0));return V.f=async()=>clearTimeout(Y),async()=>{V.f&&await V.f()}}else switch(x({type:"coute"}),t.type){case"exportation":return t.typeObjet==="nue"?await _.nues.suivreEmpreinteTtesBdsNue({idNue:t.idObjet,f:D}):await _.suivreEmpreinteTtesBdRcursive({idBd:t.idObjet,f:D});case"importation":switch(t.source.typeSource){case"fichier":{if(!isNode&&!isElectronMain)throw new Error(MESSAGE_NON_DISPO_NAVIGATEUR);const V=await __vitePreload(()=>import("chokidar"),[]),L=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),{adresseFichier:F}=t.source,j=await _.automatisations.rsoudreAdressePriveFichier({clef:F});if(!j||!L.existsSync(j))throw new Error(`Fichier ${F} introuvable.`);const U=V.watch(j);U.on("change",async()=>{const re=new Date().getTime().toString();D(re)});const H=L.statSync(j).mtime.getTime(),Y=await _.obtDeStockageLocal({clef:S});if(Y?H>parseInt(Y):!0){const re=new Date().getTime().toString();D(re)}return async()=>await U.close()}case"url":return x({type:"erreur",erreur:"La frquence d'une automatisation d'importation d'URL doit tre spcifie.",prochaineProgramme:void 0}),faisRien;default:throw new Error(t.source)}default:throw new Error(t)}};class AutomatisationActive extends eventsExports.EventEmitter{constructor(_,x,E){super();wt(this,"client");wt(this,"tat");wt(this,"fOublier");this.client=E,lancerAutomatisation({spc:_,idSpc:x,client:this.client,ftat:S=>{this.tat=S,this.emit("misJour")}}).then(S=>{this.fOublier=S,this.emit("prt")})}async fermer(){this.fOublier||await new Promise(_=>{this.once("prt",()=>{_()})}),await this.fOublier?.()}}const activePourCeDispositif=(t,n)=>{switch(t.type){case"importation":return t.dispositif===n;case"exportation":return t.dispositifs.includes(n);default:throw new Error(t)}},verrou=new Semaphore;class Automatisations extends ComposanteClientListe{constructor({client:_}){super({client:_,clef:"automatisations",schmaBdPrincipale:schmaSpcificationAutomatisation});wt(this,"automatisations");wt(this,"vnements");wt(this,"fOublier");this.automatisations={},this.vnements=new eventsExports.EventEmitter,this.initialiser()}async initialiser(){this.fOublier=await this.suivreBdPrincipaleBrute({f:_=>this.mettreAutosJour(_)})}async pingler(){await this.client.pingles?.pinglerBd({id:await this.obtIdBd(),rcursif:!1,fichiers:!1})}async mettreAutosJour(_){await verrou.acquire("miseJour");const x=Object.keys(this.automatisations);for(const E of x)_.find(S=>S.payload.value.id===E)||await this.fermerAuto(E);for(const E of _){const{payload:{value:S}}=E;if(activePourCeDispositif(S,this.client.orbite.identity.id)){if(!Object.keys(this.automatisations).includes(S.id)){const C=new AutomatisationActive(S,S.id,this.client);C.on("misJour",()=>this.vnements.emit("misJour")),this.automatisations[S.id]=C}}else this.automatisations[S.id]&&await this.fermerAuto(S.id)}verrou.release("miseJour")}async obtDonnesImportation(_,x=async E=>E){const{typeSource:E}=_.source,{formatDonnes:S}=_.source.info;switch(E){case"url":{const{url:C}=_.source;switch(S){case"json":{const{clefsRacine:T,clefslments:B,cols:A}=_.source.info,I=await importerJSONdURL(C);return new ImportateurDonnesJSON(I).obtDonnes(T,B,A)}case"feuilleCalcul":{const{nomTableau:T,cols:B,optionsXLSX:A}=_.source.info,I=await importerFeuilleCalculDURL(C,A);return new ImportateurFeuilleCalcul(I).obtDonnes(T,B)}default:throw new Error(S)}}case"fichier":{if(!isElectronMain&&!isNode)throw new Error(MESSAGE_NON_DISPO_NAVIGATEUR);const C=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),{adresseFichier:T}=_.source,B=await x(T);if(!B||!C.existsSync(B))throw new Error(`Fichier ${B} introuvable.`);switch(S){case"json":{const{clefsRacine:A,clefslments:I,cols:D}=_.source.info,M=await C.promises.readFile(B),V=JSON.parse(M.toString());return new ImportateurDonnesJSON(V).obtDonnes(A,I,D)}case"feuilleCalcul":{const{nomTableau:A,cols:I}=_.source.info,D=readFileSync(B);return new ImportateurFeuilleCalcul(D).obtDonnes(A,I)}default:throw new Error(S)}}default:throw new Error(E)}}async ajouterAutomatisationExporter({id:_,typeObjet:x,formatDoc:E,inclureFichiersSFIP:S,dossier:C,langues:T,frquence:B,dispositifs:A,nRsultatsDsirsNue:I,copies:D}){A=A||[this.client.orbite.identity.id];const M=v4(),V=await this.sauvegarderAdressePriveFichier({fichier:C}),L={type:"exportation",id:M,idObjet:_,typeObjet:x,dispositifs:A,frquence:B,formatDoc:E,langues:T,inclureFichiersSFIP:S,dossier:V,nRsultatsDsirsNue:I,copies:D};Object.keys(L).forEach(U=>{L[U]===void 0&&delete L[U]});const{bd:F,fOublier:j}=await this.client.ouvrirBd({id:await this.obtIdBd()});return await F.add(L),await j(),M}async ajouterAutomatisationImporter({idTableau:_,source:x,frquence:E,dispositif:S}){const{bd:C,fOublier:T}=await this.client.ouvrirBd({id:await this.obtIdBd()});S=S||this.client.orbite.identity.id;const B=v4();x.typeSource==="fichier"&&(x.adresseFichier=await this.sauvegarderAdressePriveFichier({fichier:x.adresseFichier}));const A={type:"importation",id:B,idTableau:_,dispositif:S,frquence:E,source:x};return Object.keys(A).forEach(I=>{A[I]===void 0&&delete A[I]}),await C.add(A),await T(),B}async annulerAutomatisation({id:_}){const{bd:x,fOublier:E}=await this.client.ouvrirBd({id:await this.obtIdBd()});await this.client.effacerlmentDeBdListe({bd:x,lment:S=>S.payload.value.id===_}),await E()}async rsoudreAdressePriveFichier({clef:_}){return _?await this.client.obtDeStockageLocal({clef:_}):null}async sauvegarderAdressePriveFichier({fichier:_}){const x="dossier."+v4();return await this.client.sauvegarderAuStockageLocal({clef:x,val:_}),x}async suivreAutomatisations({f:_,idCompte:x}){const E=async S=>{const C=await Promise.all(S.map(async T=>{const B=deepcopy(T);if(B.type==="importation"&&B.source.typeSource==="fichier"){const{adresseFichier:A}=B.source;if(A){const I=await this.rsoudreAdressePriveFichier({clef:A});I?B.source.adresseFichier=I:delete B.source.adresseFichier}}else if(B.type==="exportation"){const{dossier:A}=B;if(A){const I=await this.rsoudreAdressePriveFichier({clef:A});I?B.dossier=I:delete B.dossier}}return B}));await _(C)};return await this.suivreBdPrincipale({idCompte:x,f:E})}async suivretatAutomatisations({f:_}){const x=async()=>{const E=Object.fromEntries(Object.keys(this.automatisations).map(S=>[S,this.automatisations[S].tat]).filter(S=>S[1]));await _(E)};return this.vnements.on("misJour",x),async()=>{this.vnements.off("misJour",x)}}async fermerAuto(_){await this.automatisations[_].fermer(),delete this.automatisations[_]}async fermer(){await Promise.all(Object.keys(this.automatisations).map(_=>{this.fermerAuto(_)})),await this.fOublier?.()}}const stockagesLocaux={};class LocalStorage{constructor(n){wt(this,"fichier");wt(this,"_donnes");wt(this,"_vnements");wt(this,"_idRequteSauvegarde");wt(this,"verrou");wt(this,"fOublier");this.fichier=path.join(n,"donnes.json"),this._vnements=new eventsExports.EventEmitter,this.verrou=new Semaphore,globSourceImport.existsSync(n)||globSourceImport.mkdirSync(n);try{this._donnes=JSON.parse(globSourceImport.readFileSync(this.fichier).toString())}catch{this._donnes={}}const _=()=>{const x=v4();this._idRequteSauvegarde=x,this.sauvegarder(x)};this._vnements.on("sauvegarder",_),this.fOublier=()=>this._vnements.off("sauvegarder",_)}getItem(n){return this._donnes[n]}setItem(n,_){this._donnes[n]=_,this.demanderSauvegarde()}demanderSauvegarde(){this._vnements.emit("sauvegarder")}removeItem(n){delete this._donnes[n],this.demanderSauvegarde()}clear(){this._donnes={},globSourceImport.rmSync(this.fichier)}async sauvegarder(n){if(await this.verrou.acquire("sauvegarder"),this._idRequteSauvegarde!==n){this.verrou.release("sauvegarder");return}await globSourceImport.promises.writeFile(this.fichier,JSON.stringify(this._donnes)),this.verrou.release("sauvegarder")}async fermer(){await this.verrou.acquire("sauvegarder"),this.fOublier&&this.fOublier(),this.verrou.release("sauvegarder")}}const obtStockageLocal=async t=>{if(typeof localStorage>"u"||localStorage===null){if(!t)throw new Error("Orbite n'est pas encore initialise, et aucun dossier ne fut spcifi dans la configuration d'initialisation de Constellation.");const n=path.join(t,"_stockageLocal");return stockagesLocaux[n]||(stockagesLocaux[n]=new LocalStorage(n)),stockagesLocaux[n]}else return localStorage},exporterStockageLocal=async()=>{const t=await obtStockageLocal();return t instanceof LocalStorage?JSON.stringify(t._donnes):JSON.stringify(t)};var sha256$1={exports:{}};(function(t,n){(function(_,x){t.exports=x(requireCore())})(commonjsGlobal,function(_){return function(x){var E=_,S=E.lib,C=S.WordArray,T=S.Hasher,B=E.algo,A=[],I=[];(function(){function V(U){for(var H=x.sqrt(U),Y=2;Y<=H;Y++)if(!(U%Y))return!1;return!0}function L(U){return(U-(U|0))*4294967296|0}for(var F=2,j=0;j<64;)V(F)&&(j<8&&(A[j]=L(x.pow(F,1/2))),I[j]=L(x.pow(F,1/3)),j++),F++})();var D=[],M=B.SHA256=T.extend({_doReset:function(){this._hash=new C.init(A.slice(0))},_doProcessBlock:function(V,L){for(var F=this._hash.words,j=F[0],U=F[1],H=F[2],Y=F[3],Z=F[4],ne=F[5],re=F[6],X=F[7],ce=0;ce<64;ce++){if(ce<16)D[ce]=V[L+ce]|0;else{var ue=D[ce-15],_e=(ue<<25|ue>>>7)^(ue<<14|ue>>>18)^ue>>>3,ye=D[ce-2],ie=(ye<<15|ye>>>17)^(ye<<13|ye>>>19)^ye>>>10;D[ce]=_e+D[ce-7]+ie+D[ce-16]}var W=Z&ne^~Z&re,O=j&U^j&H^U&H,z=(j<<30|j>>>2)^(j<<19|j>>>13)^(j<<10|j>>>22),J=(Z<<26|Z>>>6)^(Z<<21|Z>>>11)^(Z<<7|Z>>>25),ee=X+J+W+I[ce]+D[ce],ae=z+O;X=re,re=ne,ne=Z,Z=Y+ee|0,Y=H,H=U,U=j,j=ee+ae|0}F[0]=F[0]+j|0,F[1]=F[1]+U|0,F[2]=F[2]+H|0,F[3]=F[3]+Y|0,F[4]=F[4]+Z|0,F[5]=F[5]+ne|0,F[6]=F[6]+re|0,F[7]=F[7]+X|0},_doFinalize:function(){var V=this._data,L=V.words,F=this._nDataBytes*8,j=V.sigBytes*8;return L[j>>>5]|=128<<24-j%32,L[(j+64>>>9<<4)+14]=x.floor(F/4294967296),L[(j+64>>>9<<4)+15]=F,V.sigBytes=L.length*4,this._process(),this._hash},clone:function(){var V=T.clone.call(this);return V._hash=this._hash.clone(),V}});E.SHA256=T._createHelper(M),E.HmacSHA256=T._createHmacHelper(M)}(Math),_.SHA256})})(sha256$1);var sha256Exports=sha256$1.exports;const sha256=getDefaultExportFromCjs(sha256Exports),schmaStructureBdCompte={type:"object",properties:{protocoles:{type:"string",nullable:!0},profil:{type:"string",nullable:!0},motsClefs:{type:"string",nullable:!0},variables:{type:"string",nullable:!0},bds:{type:"string",nullable:!0},projets:{type:"string",nullable:!0},nues:{type:"string",nullable:!0},favoris:{type:"string",nullable:!0},rseau:{type:"string",nullable:!0},automatisations:{type:"string",nullable:!0}},required:[]},schmaStructureNomsDispositifs={type:"object",additionalProperties:{type:"object",properties:{nom:{type:"string",nullable:!0},type:{type:"string",nullable:!0}}},required:[]},DLAI_EXPIRATION_INVITATIONS=1e3*60*5;class ClientConstellation extends eventsExports.EventEmitter{constructor(_={}){super();wt(this,"_opts");wt(this,"optionsAccs");wt(this,"bdCompte");wt(this,"orbite");wt(this,"sfip");wt(this,"idNodeSFIP");wt(this,"pingles");wt(this,"profil");wt(this,"bds");wt(this,"tableaux");wt(this,"variables");wt(this,"rseau");wt(this,"favoris");wt(this,"projets");wt(this,"recherche");wt(this,"motsClefs");wt(this,"automatisations");wt(this,"nues");wt(this,"licences");wt(this,"_orbiteExterne");wt(this,"_sfipExterne");wt(this,"prt");wt(this,"idCompte");wt(this,"encryption");wt(this,"sujet_rseau");wt(this,"motsDePasseRejoindreCompte");wt(this,"ennikkai");wt(this,"verrouObtIdBd");enregistrerContrleurs(),this._opts=_,this.prt=!1,this.sujet_rseau=_.sujetRseau||"rseau-constellation",this.motsDePasseRejoindreCompte={},this.verrouObtIdBd=new Semaphore,this._orbiteExterne=this._sfipExterne=!1,this.encryption=new EncryptionLocalFirst,this.ennikkai=new ({})}async initialiser(){const{sfip:_,orbite:x}=await this._gnrerSFIPetOrbite();this.sfip=_,this.orbite=gestionnaireOrbiteGnral.obtGestionnaireOrbite({orbite:x}),this.idNodeSFIP=await this.sfip.id();const E={type:"controlleur-constellation",premierMod:this.orbite.identity.id,nom:"racine"};this.idCompte=this._opts.compte||await this.obtDeStockageLocal({clef:"idCompte",parCompte:!1})||void 0,this.idCompte||(this.idCompte=await this.crerBdIndpendante({type:"kvstore",optionsAccs:E,nom:"racine"}),await this.sauvegarderAuStockageLocal({clef:"idCompte",val:this.idCompte,parCompte:!1})),this.pingles=new pingles({client:this}),await this.initialiserCompte(),this.prt=!0,this.emit("prt")}async _gnrerSFIPetOrbite(){const{orbite:_}=this._opts;let x,E;const S=async C=>{if(C?.sfip)return this._sfipExterne=!0,C.sfip;{const T=(await __vitePreload(()=>import("./index-f8f22782.js").then(B=>B.k),[])).default;return await T(C?.dossier)}};if(_)if(_ instanceof OrbitDB)this._sfipExterne=this._orbiteExterne=!0,x=_._ipfs,E=_;else{const C=(await __vitePreload(()=>Promise.resolve().then(()=>orbite),void 0)).default;x=await S(_.sfip),E=await C({sfip:x,dossierOrbite:_.dossier})}else{x=await S();const C=(await __vitePreload(()=>Promise.resolve().then(()=>orbite),void 0)).default;E=await C({sfip:x})}return{sfip:x,orbite:E}}async initialiserCompte(){const{bd:_}=await this.ouvrirBd({id:this.idCompte,type:"kvstore",schma:schmaStructureBdCompte});this.bdCompte=_;const x=this.bdCompte.access;this.optionsAccs={type:"controlleur-constellation",address:x.bd.id};const E=await this.obtIdBd({nom:"protocoles",racine:this.bdCompte,type:"kvstore"});if(E){const{bd:S,fOublier:C}=await this.ouvrirBd({id:E,type:"kvstore"}),T=await this.obtIdDispositif(),B=S.get(T)||[],A=(I,D)=>I.length===D.length&&[...I].every(M=>D.includes(M));(!this._opts.protocoles||!A(B,this._opts.protocoles))&&(this._opts.protocoles?await S.put(T,this._opts.protocoles):await S.del(T)),await C()}else console.warn("Bd protocoles non dtecte.");this.profil=new Profil({client:this}),this.motsClefs=new MotsClefs({client:this}),this.tableaux=new Tableaux({client:this}),this.variables=new Variables({client:this}),this.bds=new BDs({client:this}),this.projets=new Projets({client:this}),this.nues=new Nue({client:this}),this.rseau=new Rseau({client:this}),await this.rseau.initialiser(),this.favoris=new Favoris({client:this}),this.automatisations=new Automatisations({client:this}),this.recherche=new Recherche({client:this}),this.licences=new Licences({client:this}),await this.pingler()}async pingler(){await this.pingles.pinglerBd({id:await this.obtIdCompte()}),await Promise.all([this.profil,this.automatisations,this.bds,this.variables,this.projets,this.nues,this.motsClefs,this.rseau,this.favoris].map(async _=>_&&await _.pingler()))}async signer({message:_}){const x=this.orbite.identity,E=await this.orbite.identity.provider.sign(x,_),S=this.orbite.identity.publicKey;return{signature:E,clefPublique:S}}async vrifierSignature({signature:_,message:x}){return!_||!_.clefPublique||!_.signature?!1:await this.orbite.identity.provider.verify(_.signature,_.clefPublique,x)}async suivreDispositifs({f:_,idCompte:x}){const E=async({id:S})=>{const{bd:C,fOublier:T}=await this.ouvrirBd({id:S,type:"kvstore"}),B=C.access,A=B.constructor.type;if(A==="ipfs")return await _(B.write),await T(),faisRien;if(A==="controlleur-constellation"){const I=async()=>{const D=B.gestRles._rles[MODRATEUR];await _(D)};return B.on("misJour",I),I(),async()=>{B.off("misJour",I),await T()}}else return await T(),faisRien};return await suivreBdDeFonction({fRacine:async({fSuivreRacine:S})=>x?(await S(x),faisRien):await this.suivreIdCompte({f:S}),f:ignorerNonDfinis(_),fSuivre:E})}async nommerDispositif({idDispositif:_,nom:x,type:E}){const S=_||await this.obtIdDispositif(),C=await this.obtIdBd({nom:"nomsDispositifs",racine:await this.obtIdCompte(),type:"kvstore"}),{bd:T,fOublier:B}=await this.ouvrirBd({id:C,type:"kvstore"});await T.set(S,{nom:x,type:E}),await B()}async suivreNomsDispositifs({idCompte:_,f:x}){const E=_||await this.obtIdCompte();return await this.suivreBdDicDeClef({id:E,schma:schmaStructureNomsDispositifs,clef:"nomsDispositifs",f:x})}async suivreNomDispositif({idCompte:_,idDispositif:x,f:E}){return await this.suivreNomsDispositifs({idCompte:_,f:async S=>{const C=S[x];if(C)return await E(C)}})}async gnrerInvitationRejoindreCompte(){const _=await this.obtIdCompte(),x=this.encryption.clefAlatoire();return this.motsDePasseRejoindreCompte[x]=Date.now(),{idCompte:_,codeSecret:x}}async rvoquerInvitationRejoindreCompte({codeSecret:_}){_?delete this.motsDePasseRejoindreCompte[_]:this.motsDePasseRejoindreCompte={}}async considrerRequteRejoindreCompte({requte:_}){const{idDispositif:x,empreinteVrification:E}=_,S=Date.now();for(const C of Object.keys(this.motsDePasseRejoindreCompte)){const T=this.motsDePasseRejoindreCompte[C];S-T<DLAI_EXPIRATION_INVITATIONS&&this.empreinteInvitation({idDispositif:x,codeSecret:C})===E&&(delete this.motsDePasseRejoindreCompte[C],await this.ajouterDispositif({idDispositif:x}))}}empreinteInvitation({idDispositif:_,codeSecret:x}){return Base64.stringify(sha256(_+x))}async demanderEtPuisRejoindreCompte({idCompte:_,codeSecret:x}){await this.rseau.envoyerDemandeRejoindreCompte({idCompte:_,codeSecret:x}),await this.rejoindreCompte({idCompte:_})}async ajouterDispositif({idDispositif:_}){this.bdCompte||await once_1(this,"prt"),this.bdCompte.access.grant(MODRATEUR,_)}async enleverDispositif({idDispositif:_}){this.bdCompte||await once_1(this,"prt"),await this.bdCompte.access.revoke(MODRATEUR,_)}async rejoindreCompte({idCompte:_}){if(!adresseOrbiteValide(_))throw new Error(`Adresse compte "${_}" non valide`);let x;const{bd:E,fOublier:S}=await this.ouvrirBd({id:_,type:"kvstore",schma:schmaStructureBdCompte}),T=await E.access.suivreIdsOrbiteAutorisescriture(B=>x=B.includes(this.orbite.identity.id));await new Promise(B=>{const A=async()=>{x&&(clearInterval(I),await T(),await S(),B())},I=setInterval(()=>{A()},10);A()}),this.idCompte=_,await this.sauvegarderAuStockageLocal({clef:"idCompte",val:_,parCompte:!1}),await this.fermerCompte(),await this.initialiserCompte(),this.emit("compteChang")}async donnerAccs({idBd:_,identit:x,rle:E=MEMBRE}){if(!adresseOrbiteValide(x))throw new Error(`Identit "${x}" non valide.`);const{bd:S,fOublier:C}=await this.ouvrirBd({id:_,type:"kvstore"}),T=S.access;T.constructor.type===nomType&&T.grant(E,x),await C()}async suivreIdCompte({f:_}){const x=async()=>{this.idCompte&&await _(this.idCompte)};return this.on("compteChang",x),await x(),async()=>{this.off("compteChang",x)}}async obtIdSFIP(){return this.idNodeSFIP||await once_1(this,"prt"),this.idNodeSFIP}async obtIdDispositif(){return this.orbite||await once_1(this,"prt"),this.orbite.identity.id}async obtIdentitOrbite(){return this.orbite||await once_1(this,"prt"),this.orbite.identity}async obtIdCompte(){return this.idCompte||await once_1(this,"prt"),this.idCompte}async copierContenuBdListe({bdBase:_,nouvelleBd:x,clef:E}){const S=_.get(E);if(typeof S!="string")return;const{bd:C,fOublier:T}=await this.ouvrirBd({id:S,type:"feed"}),B=x.get(E);if(!B)throw new Error("La nouvelle BD n'existait pas.");if(typeof B!="string")throw new Error(`${B} n'est pas une adresse Orbite.`);const{bd:A,fOublier:I}=await this.ouvrirBd({id:B,type:"feed"}),D=ClientConstellation.obtlmentsDeBdListe({bd:C});await Promise.all(D.map(async M=>{await A.add(M)})),T(),I()}async combinerBds({idBdBase:_,idBd2:x}){const{bd:E,fOublier:S}=await this.ouvrirBd({id:_}),C=E.type;switch(await S(),C){case"kvstore":case"keyvalue":{const{bd:T,fOublier:B}=await this.ouvrirBd({id:_,type:"keyvalue"}),{bd:A,fOublier:I}=await this.ouvrirBd({id:x,type:"keyvalue"});await this.combinerBdsDict({bdBase:T,bd2:A}),await B(),await I();break}case"feed":{const{bd:T,fOublier:B}=await this.ouvrirBd({id:_,type:"feed"}),{bd:A,fOublier:I}=await this.ouvrirBd({id:x,type:"feed"});await this.combinerBdsListe({bdBase:T,bd2:A}),await B(),await I();break}default:throw new Error(`Type de BD ${C} non support.`)}}async combinerBdsDict({bdBase:_,bd2:x}){const E=ClientConstellation.obtObjetdeBdDic({bd:x});for(const[S,C]of Object.entries(E)){const T=_.get(S);T!==C&&(T===void 0?await _.put(S,C):adresseOrbiteValide(T)&&adresseOrbiteValide(C)&&await this.combinerBds({idBdBase:T,idBd2:C}))}}async combinerBdsListe({bdBase:_,bd2:x,index:E}){const S=ClientConstellation.obtlmentsDeBdListe({bd:_,renvoyerValeur:!1}),C=ClientConstellation.obtlmentsDeBdListe({bd:x,renvoyerValeur:!1});for(const T of C){const B=T.payload.value;if(E){if(typeof B!="object")throw new Error(`Erreur combinaison listes : ${typeof B}`);const A=S.find(I=>typeof I.payload.value=="object"&&E.every(D=>I.payload.value[D]===B[D]));if(!A)await _.add(B);else{const I=A.payload.value;if(!deepEqual$2(I,B)){const D=Object.assign({},I);for(const[M,V]of Object.entries(B))D[M]===void 0?D[M]=V:deepEqual$2(D[M],V)||adresseOrbiteValide(D[M])&&adresseOrbiteValide(V)&&await this.combinerBds({idBdBase:D[M],idBd2:V});await _.remove(A.hash),await _.add(D)}}}else S.some(A=>deepEqual$2(A.payload.value,B))||await _.add(B)}}async suivreBd({id:_,f:x,type:E,schma:S,vnements:C=["write","replicated","ready"]}){if(!adresseOrbiteValide(_))throw new Error(`Adresse "${_}" non valide.`);const T=[],B={};let A=!1;const I=()=>{(E==="feed"?this.ouvrirBd({id:_,type:E,schma:S}):E?this.ouvrirBd({id:_,type:E,schma:S}):this.ouvrirBd({id:_})).then(({bd:M,fOublier:V})=>{T.push(V);const L=()=>{const F=v4(),j=x(M);(H=>!!H&&!!H.then)(j)&&(B[F]=j,j.then(()=>{delete B[F]}))};for(const F of C)M.events.on(F,L),T.push(async()=>{M.events.off(F,L)});L()}).catch(M=>{if(!A)if(String(M).includes("ipfs unable to find"))I();else throw new Error(M)})};return I(),async()=>{A=!0,await Promise.all(T.map(M=>M())),await Promise.all(Object.values(B))}}async suivreBdDeClef({id:_,clef:x,f:E,fSuivre:S}){return await suivreBdDeFonction({fRacine:async({fSuivreRacine:T})=>{const B=async A=>{const I=A.get(x);return await T(I)};return await this.suivreBd({id:_,f:B,type:"keyvalue"})},f:E,fSuivre:S})}async suivreBdDic({id:_,schma:x,f:E}){const S=async C=>{const T=C?ClientConstellation.obtObjetdeBdDic({bd:C}):{};await E(T)};return await this.suivreBd({id:_,type:"keyvalue",schma:x,f:S})}async suivreBdDicDeClef({id:_,clef:x,schma:E,f:S}){const C=async B=>{await S(B||{})},T=async({id:B,fSuivreBd:A})=>await this.suivreBdDic({id:B,schma:E,f:A});return await this.suivreBdDeClef({id:_,clef:x,f:C,fSuivre:T})}static obtObjetdeBdDic({bd:_}){const x=_.all;return Object.fromEntries(Object.keys(x).map(E=>[E,x[E]]))}async suivreBdListeDeClef({id:_,clef:x,f:E,schma:S,renvoyerValeur:C=!0}){if(C){const T=async A=>{await E(A||[])},B=async({id:A,fSuivreBd:I})=>await this.suivreBdListe({id:A,f:I,schma:S,renvoyerValeur:C});return await this.suivreBdDeClef({id:_,clef:x,f:T,fSuivre:B})}else{const T=async A=>{await E(A||[])},B=async({id:A,fSuivreBd:I})=>await this.suivreBdListe({id:A,f:I,schma:S,renvoyerValeur:!1});return await this.suivreBdDeClef({id:_,clef:x,f:T,fSuivre:B})}}async suivreBdListe({id:_,f:x,schma:E,renvoyerValeur:S=!0}){return await this.suivreBd({id:_,type:"feed",schma:E,f:async C=>{const T=ClientConstellation.obtlmentsDeBdListe({bd:C,renvoyerValeur:S});await x(T)}})}static obtlmentsDeBdListe({bd:_,renvoyerValeur:x=!0}){const E=_.iterator({limit:-1}).collect();return x?E.map(S=>S.payload.value):E}obtlmentBdListeSelonEmpreinte({bd:_,empreinte:x}){return _.iterator({limit:-1}).collect().find(S=>S.hash===x)?.payload.value}async effacerlmentDeBdListe({bd:_,lment:x}){const E=_.iterator({limit:-1}).collect().find(S=>typeof x=="function"?x(S):deepEqual$2(S.payload.value,x));E&&await _.remove(E.hash)}async effacerlmentsDeBdListe({bd:_,lment:x}){await Promise.all(_.iterator({limit:-1}).collect().map(async E=>(typeof x=="function"?x(E):deepEqual$2(E.payload.value,x))?await _.remove(E.hash):Promise.resolve()))}async suivreTypeObjet({idObjet:_,f:x}){const E=async T=>{let B;const{type:A}=T;A?B=["motClef","variable","bd","projet","nue"].includes(A)?A:void 0:T.bds?B="projet":T.tableaux?B="bd":T.catgorie?B="variable":T.nom&&(B="motClef"),await x(B)},S={type:"object",properties:{type:{type:"string",nullable:!0}},additionalProperties:!0};return await this.suivreBdDic({id:_,schma:S,f:E})}async suivreEmpreinteTtesBdRcursive({idBd:_,f:x}){const E=A=>A._oplog.heads[A._oplog.heads.length-1]?.hash,S=A=>Base64.stringify(md5(A)),C=async A=>{await x(S(A.sort().join()))},T=async A=>await this.suivreBdsRcursives({idBd:_,f:async I=>await A(I)}),B=async(A,I)=>await this.suivreBd({id:A,f:async D=>{const M=E(D);M&&await I(M)}});return await this.suivreBdsDeFonctionListe({fListe:T,f:C,fBranche:B})}async suivreBdsDeBdListe({id:_,f:x,fBranche:E,fIdBdDeBranche:S=B=>B,fRduction:C=B=>[...new Set(B.flat())],fCode:T=B=>B}){const B=async A=>await this.suivreBdListe({id:_,f:A});return await this.suivreBdsDeFonctionListe({fListe:B,f:x,fBranche:E,fIdBdDeBranche:S,fRduction:C,fCode:T})}async suivreBdsDeFonctionListe({fListe:_,f:x,fBranche:E,fIdBdDeBranche:S=B=>B,fRduction:C=B=>[...new Set(B.flat())],fCode:T=B=>B}){const B={},A={};let I=!1;const D=async()=>{const U=Object.values(B).map(Y=>Y.donnes).filter(Y=>Y!==void 0),H=C(U);I&&await x(H)},M=new Semaphore,L=await _(async U=>{if(await M.acquire("racine"),U.some(X=>typeof T(X)!="string"))throw console.error("Dfinir fCode si les lments ne sont pas en format texte (chanes)."),new Error("Dfinir fCode si les lments ne sont pas en format texte (chanes).");const H=Object.fromEntries(U.map(X=>[T(X),X])),Y=Object.keys(B);let Z=Object.keys(H).filter(X=>!Y.includes(X));const ne=Y.filter(X=>!Object.keys(H).includes(X)),re=Object.entries(H).filter(X=>!deepEqual$2(A[X[0]],X[1])).map(X=>X[0]);Z.push(...re),Z=[...new Set(Z)];for(const X of re)if(B[X]){const ce=B[X].fOublier;ce&&await ce(),delete B[X]}for(const X of ne){const ce=B[X].fOublier;ce&&await ce(),delete B[X],D()}await Promise.all(Z.map(async X=>{B[X]={donnes:void 0};const ce=H[X];A[X]=ce;const ue=S(ce),ye=await E(ue,ie=>{B[X].donnes=ie,D()},ce);B[X].fOublier=ye})),I=!0,D(),M.release("racine")});let F;const j=async()=>{await F(),await Promise.all(Object.values(B).map(U=>U.fOublier&&U.fOublier()))};return typeof L=="function"?(F=L,j):(F=L.fOublier,Object.assign({},L,{fOublier:j}))}async suivreBdsDeFonctionRecherche({fListe:_,f:x,fBranche:E,fIdBdDeBranche:S=B=>B,fRduction:C=B=>[...new Set(B.flat())],fCode:T=B=>B}){let B;const A=async M=>{B&&await B(M)},I=async M=>{const{fOublier:V,fChangerProfondeur:L}=await _(M);return B=L,V};return{fOublier:await this.suivreBdsDeFonctionListe({fListe:I,f:x,fBranche:E,fIdBdDeBranche:S,fRduction:C,fCode:T}),fChangerProfondeur:A}}async suivreBdSelonCondition({fRacine:_,fCondition:x,f:E}){const S=async({id:C,fSuivreBd:T})=>await x(C,async B=>{T(B?C:void 0)});return await suivreBdDeFonction({fRacine:async({fSuivreRacine:C})=>await _(C),f:ignorerNonDfinis(E),fSuivre:S})}async suivreBdsSelonCondition({fListe:_,fCondition:x,f:E}){const S=async T=>{const B=T.filter(A=>A.tat).map(A=>A.id);await E(B)},C=async(T,B)=>await x(T,async I=>{await B({id:T,tat:I})});return await this.suivreBdsDeFonctionListe({fListe:_,f:S,fBranche:C})}async rechercherBdListe({id:_,f:x}){const{bd:E,fOublier:S}=await this.ouvrirBd({id:_,type:"feed"}),C=E.iterator({limit:-1}).collect().find(T=>x(T));return await S(),C}async obtFichierSFIP({id:_,max:x}){return await toBuffer$2(this.sfip.cat(_),x)}obtItrableAsyncSFIP({id:_}){return this.sfip.cat(_)}async ajouterSFIP({fichier:_}){return(await this.sfip.add(_)).cid.toString()}dossierOrbite(){let _;const x=this._opts.orbite;return x instanceof OrbitDB?_=x.directory:_=x?.dossier||this.orbite?.orbite.directory,_}dossierSFIP(){let _;const x=this._opts.orbite;return x instanceof OrbitDB||(_=x?.sfip?.dossier),_}obtClefStockageClient({clef:_,parCompte:x=!0}){return x?`${this.idCompte.slice(this.idCompte.length-23,this.idCompte.length-8)} : ${_}`:_}async obtDeStockageLocal({clef:_,parCompte:x=!0}){const E=this.obtClefStockageClient({clef:_,parCompte:x});return(await obtStockageLocal(this.dossierOrbite())).getItem(E)}async sauvegarderAuStockageLocal({clef:_,val:x,parCompte:E=!0}){const S=this.obtClefStockageClient({clef:_,parCompte:E});return(await obtStockageLocal(this.dossierOrbite())).setItem(S,x)}async effacerDeStockageLocal({clef:_,parCompte:x=!0}){const E=this.obtClefStockageClient({clef:_,parCompte:x});return(await obtStockageLocal(this.dossierOrbite())).removeItem(E)}async ouvrirBd({id:_,type:x,schma:E}){return await this.orbite.ouvrirBd({id:_,type:x,schma:E})}async obtIdBd({nom:_,racine:x,type:E}){let S,C;typeof x=="string"?{bd:S,fOublier:C}=await this.ouvrirBd({id:x,type:"kvstore"}):S=x;const T=S.id+":"+_;await this.verrouObtIdBd.acquire(T);let B=S.get(_);const A=await this.obtDeStockageLocal({clef:T});if(B&&A&&B!==A)try{await this.combinerBds({idBdBase:B,idBd2:A}),await this.effacerBd({id:A}),await this.sauvegarderAuStockageLocal({clef:T,val:B})}catch{}if(B&&E)try{const{fOublier:I}=await this.ouvrirBd({id:B,type:E});return await I(),this.verrouObtIdBd.release(T),B}catch{throw this.verrouObtIdBd.release(T),new Error("Bd n'existe pas: "+_+" "+B)}if(!B&&E){const I=S.access;if(await uneFois(M=>I.suivreIdsOrbiteAutorisescriture(async V=>await M(V.includes(this.orbite.identity.id))))){const M=await this.obtOpsAccs({idBd:S.id});B=await this.crerBdIndpendante({type:E,optionsAccs:M}),await S.set(_,B)}}return B&&await this.sauvegarderAuStockageLocal({clef:T,val:B}),C&&await C(),this.verrouObtIdBd.release(T),B}async crerBdIndpendante({type:_,optionsAccs:x,nom:E}){return await this.orbite.crerBdIndpendante({type:_,optionsAccs:Object.assign({},this.optionsAccs,x||{}),nom:E})}async effacerBd({id:_}){return await this.orbite?.effacerBd({id:_})}async obtOpsAccs({idBd:_}){const{bd:x,fOublier:E}=await this.ouvrirBd({id:_}),S=x.access;return await E(),{address:S.bd.id,premierMod:S._premierMod}}async suivrePermission({idObjet:_,f:x}){const{bd:E,fOublier:S}=await this.ouvrirBd({id:_}),C=E.access,T=C.constructor.type;if(T==="ipfs"){const B=this.orbite.identity.id;return await x(C.write.includes(B)?MEMBRE:void 0),await S(),faisRien}else if(T===nomType){const B=async I=>{const D=I.filter(V=>V.idCompte===this.idCompte).map(V=>V.rle),M=D.includes(MODRATEUR)?MODRATEUR:D.includes(MEMBRE)?MEMBRE:void 0;await x(M)},A=await C.suivreUtilisateursAutoriss(B);return async()=>{await A(),await S()}}else throw new Error(`Type d'accs ${T} non reconnu.`)}async suivrePermissioncrire({id:_,f:x}){const E=async S=>{await x(S!==void 0)};return await this.suivrePermission({idObjet:_,f:E})}async suivreAccsBd({id:_,f:x}){const{bd:E,fOublier:S}=await this.ouvrirBd({id:_}),C=E.access,T=C.constructor.type;if(T==="ipfs"){const B=C.write.map(A=>({idCompte:A,rle:MODRATEUR}));await x(B)}else if(T===nomType){const B=await C.suivreUtilisateursAutoriss(x);return await S(),B}return await S(),faisRien}async suivreBdsRcursives({idBd:_,f:x}){const E={},S=async()=>{await x(Object.keys(E))},C=new Semaphore,T=async D=>{delete E[D],await Promise.all(Object.keys(E).map(async M=>{E[M]&&(E[M].requtes.delete(D),E[M].requtes.size||await E[M].fOublier())}))},B=["copiDe"],A=async(D,M)=>{const V=Y=>Y.map(Z=>typeof Z=="string"?[Z]:Array.isArray(Z)?Z:typeof Z=="object"?Object.values(Z):[]).flat().filter(Z=>adresseOrbiteValide(Z)),L=async Y=>{let Z=[];typeof Y=="object"?(Z=V(Object.entries(Y).filter(X=>!B.includes(X[0])).map(X=>X[1])),Z.push(...V(Object.keys(Y)))):Array.isArray(Y)?Z=V(Y):typeof Y=="string"&&(Z=[Y]);const ne=Z.filter(X=>!E[D].sousBds.includes(X)),re=E[D].sousBds.filter(X=>!Z.includes(X));E[D].sousBds=Z,await Promise.all(re.map(async X=>{E[X].requtes.delete(D),E[X].requtes.size||await E[X].fOublier()})),await Promise.all(ne.map(async X=>await A(X,D))),S()};if(await C.acquire(D),E[D]){E[D].requtes.add(M);return}const{bd:F,fOublier:j}=await this.ouvrirBd({id:D}),{type:U}=F;await j(),E[D]={requtes:new Set([M]),sousBds:[],fOublier:async()=>{await H(),await T(D)}};let H;U==="keyvalue"?H=await this.suivreBdDic({id:D,f:L}):U==="feed"?H=await this.suivreBdListe({id:D,f:L}):H=faisRien,C.release(D),S()};return await A(_,""),async()=>{await Promise.all(Object.values(E).map(D=>D.fOublier()))}}async fermerCompte(){this.rseau&&await this.rseau.fermer(),this.favoris&&await this.favoris.fermer(),this.automatisations&&await this.automatisations.fermer()}async fermer(){await(await obtStockageLocal(this.dossierOrbite())).fermer?.(),await this.fermerCompte(),this.pingles&&await this.pingles.fermer(),await this.orbite.fermer({arrterOrbite:!this._orbiteExterne}),this.sfip&&!this._sfipExterne&&await this.sfip.stop()}async effacerDispositif(){if(await this.fermer(),indexedDB)if(indexedDB.databases){const _=await indexedDB.databases();await Promise.all(_.map(x=>{x.name&&indexedDB.deleteDatabase(x.name)}))}else console.warn("On a pas pu tout effacer.");else{const _=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),x=this.dossierOrbite(),E=this.dossierSFIP();x&&_.rmdirSync(x),E&&_.rmdirSync(E),(await obtStockageLocal()).clear()}}async exporterDispositif({nomFichier:_}){if(isNode||isElectronMain){const x=await __vitePreload(()=>Promise.resolve().then(()=>fs_),void 0),E=await __vitePreload(()=>Promise.resolve().then(()=>path$1),void 0),S=({dossier:I,zip:D})=>{x.readdirSync(I).map(V=>{if(x.statSync(V)?.isDirectory())S({dossier:E.join(I,V),zip:D.folder(V)});else{const F=x.createReadStream(E.join(I,V));D.file(V,F)}})},C=this.dossierOrbite(),T=this.dossierSFIP();if(!C||!T)throw new Error("Constellation pas encore initialise.");const B=await exporterStockageLocal(),A=new JSZip;S({dossier:C,zip:A.folder("orbite")}),S({dossier:T,zip:A.folder("sfip")}),A.file("stockageLocal",B),await sauvegarderFichierZip({fichierZip:A,nomFichier:_})}else if(indexedDB){const x=({bd:S,zip:C})=>{const{name:T}=S;if(T){const B=C.folder(T);if(!B)throw new Error(T);const I=indexedDB.open(T).result.objectStoreNames;[...Array(I.length).keys()].map(M=>I.item(M)).filter(M=>!!M).map(M=>B.file(M,new indexedDbStream.IndexedDbReadStream({databaseName:T,objectStoreName:M})))}},E=new JSZip;if(indexedDB.databases){const S=await indexedDB.databases(),C=E.folder("bdIndexe");if(!C)throw new Error("Erreur Bd Indexe...");S.forEach(T=>{x({bd:T,zip:C})}),E.file("stockageLocal",JSON.stringify(await exporterStockageLocal()))}await sauvegarderFichierZip({fichierZip:E,nomFichier:_})}else throw new Error("Sauvegarde non implment.")}static async crer(_={}){const x=new ClientConstellation(_);return await x.initialiser(),x}}__decorate([cacheSuivi],ClientConstellation.prototype,"suivreDispositifs",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreIdCompte",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreEmpreinteTtesBdRcursive",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivrePermission",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivrePermissioncrire",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreAccsBd",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreBdsRcursives",null);const ClientConstellation$1=ClientConstellation;class GestionnaireClient{constructor(n,_,x={}){wt(this,"ipa");wt(this,"_messagesEnAttente");wt(this,"prt");wt(this,"dicFRetourSuivi");wt(this,"opts");wt(this,"fMessage");wt(this,"fErreur");wt(this,"_verrou");this.fMessage=n,this.fErreur=_,this.opts=x,this.dicFRetourSuivi={},this.prt=!1,this._messagesEnAttente=[],this._verrou=new Semaphore,this.init()}async init(){if(await this._verrou.acquire("init"),this.ipa){this._verrou.release("init");return}this.ipa=await ClientConstellation$1.crer(this.opts),this._messagesEnAttente.forEach(n=>this._grerMessage(n)),this.prt=!0,this._verrou.release("init")}async grerMessage(n){this.prt?await this._grerMessage(n):this._messagesEnAttente.unshift(n)}async _grerMessage(n){const{type:_}=n;switch(_){case"suivre":{const{id:x}=n;this.ipa||this.fErreur("IPA non initialis",x);const{fonction:E,args:S,nomArgFonction:C}=n,T=this.extraireFonctionIPA(E,x);if(!T)return;const B=A=>{const I={type:"suivre",id:x,donnes:A};this.fMessage(I)};S[C]=B;try{const A=await T(S),I=typeof A=="function"?{fOublier:A}:A;this.dicFRetourSuivi[x]=I;const D={type:"suivrePrt",id:x};typeof A!="function"&&(D.fonctions=Object.keys(A)),this.fMessage(D)}catch(A){this.fErreur(A.toString(),x)}break}case"action":{const{id:x}=n;this.ipa||this.fErreur("IPA non initialis",x);const{fonction:E,args:S}=n,C=this.extraireFonctionIPA(E,x);if(!C)return;try{const T=await C(S),B={type:"action",id:x,rsultat:T};this.fMessage(B)}catch(T){this.fErreur(T.toString(),x)}break}case"retour":{const{id:x,fonction:E,args:S}=n,C=this.dicFRetourSuivi[x];C&&await C[E](S),E==="fOublier"&&delete this.dicFRetourSuivi[x];break}default:{this.fErreur(`Type de requte ${_} non reconnu dans message ${n}`,n.id);break}}}extraireFonctionIPA(n,_){const x=`Fonction ClientConstellation.${n.join(".")} n'existe pas ou n'est pas une fonction.`;let E=this.ipa;for(const[S,C]of n.entries()){if(S===n.length-1)if(typeof E=="object"&&C in E&&E[C])E=E[C].bind(E);else{this.fErreur(x,_);return}else if(typeof E=="object"&&C in E&&E[C])E=E[C];else{this.fErreur(x,_);return}if(!E){this.fErreur(x,_);return}}if(typeof E!="function"){this.fErreur(x,_);return}return E}async fermer(){await this.init(),await this.ipa.fermer()}}class MandataireClientProc extends ClientMandatairifiable{constructor(_={}){super();wt(this,"client");this.client=new GestionnaireClient(x=>{this.vnements.emit("message",x)},(x,E)=>{const S={type:"erreur",id:E,erreur:x};this.vnements.emit("message",S)},_)}envoyerMessage(_){this.client.grerMessage(_)}}const gnrerMandataireProc=(t={})=>gnrerMandataire(new MandataireClientProc(t)),constellationNavigateur={install:t=>{const n=gnrerMandataireProc();t.config.globalProperties.$constl=n,t.provide("constl",n)}};async function loadFonts(){(await __vitePreload(()=>import("./webfontloader-92b63f5c.js").then(n=>n.w),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const materialdesignicons="",main="",vuetify=createVuetify({theme:{themes:{light:{colors:{primary:"#1867c0",secondary:"#7bc6ff"}}}}}),i18n=createI18n({locale:"fr",legacy:!1,allowComposition:!0,missingWarn:!1,fallbackWarn:!1});/*!
  * vue-router v4.2.4
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(t,n){const _={};for(const x in n){const E=n[x];_[x]=isArray(E)?E.map(t):t(E)}return _}const noop=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=t=>t.replace(TRAILING_SLASH_RE,"");function parseURL(t,n,_="/"){let x,E={},S="",C="";const T=n.indexOf("#");let B=n.indexOf("?");return T<B&&T>=0&&(B=-1),B>-1&&(x=n.slice(0,B),S=n.slice(B+1,T>-1?T:n.length),E=t(S)),T>-1&&(x=x||n.slice(0,T),C=n.slice(T,n.length)),x=resolveRelativePath(x??n,_),{fullPath:x+(S&&"?")+S+C,path:x,query:E,hash:C}}function stringifyURL(t,n){const _=n.query?t(n.query):"";return n.path+(_&&"?")+_+(n.hash||"")}function stripBase(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function isSameRouteLocation(t,n,_){const x=n.matched.length-1,E=_.matched.length-1;return x>-1&&x===E&&isSameRouteRecord(n.matched[x],_.matched[E])&&isSameRouteLocationParams(n.params,_.params)&&t(n.query)===t(_.query)&&n.hash===_.hash}function isSameRouteRecord(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function isSameRouteLocationParams(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const _ in t)if(!isSameRouteLocationParamsValue(t[_],n[_]))return!1;return!0}function isSameRouteLocationParamsValue(t,n){return isArray(t)?isEquivalentArray(t,n):isArray(n)?isEquivalentArray(n,t):t===n}function isEquivalentArray(t,n){return isArray(n)?t.length===n.length&&t.every((_,x)=>_===n[x]):t.length===1&&t[0]===n}function resolveRelativePath(t,n){if(t.startsWith("/"))return t;if(!t)return n;const _=n.split("/"),x=t.split("/"),E=x[x.length-1];(E===".."||E===".")&&x.push("");let S=_.length-1,C,T;for(C=0;C<x.length;C++)if(T=x[C],T!==".")if(T==="..")S>1&&S--;else break;return _.slice(0,S).join("/")+"/"+x.slice(C-(C===x.length?1:0)).join("/")}var NavigationType;(function(t){t.pop="pop",t.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(t){t.back="back",t.forward="forward",t.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(t){if(!t)if(isBrowser){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),removeTrailingSlash(t)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(t,n){return t.replace(BEFORE_HASH_RE,"#")+n}function getElementPosition(t,n){const _=document.documentElement.getBoundingClientRect(),x=t.getBoundingClientRect();return{behavior:n.behavior,left:x.left-_.left-(n.left||0),top:x.top-_.top-(n.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(t){let n;if("el"in t){const _=t.el,x=typeof _=="string"&&_.startsWith("#"),E=typeof _=="string"?x?document.getElementById(_.slice(1)):document.querySelector(_):_;if(!E)return;n=getElementPosition(E,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.pageXOffset,n.top!=null?n.top:window.pageYOffset)}function getScrollKey(t,n){return(history.state?history.state.position-n:-1)+t}const scrollPositions=new Map;function saveScrollPosition(t,n){scrollPositions.set(t,n)}function getSavedScrollPosition(t){const n=scrollPositions.get(t);return scrollPositions.delete(t),n}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(t,n){const{pathname:_,search:x,hash:E}=n,S=t.indexOf("#");if(S>-1){let T=E.includes(t.slice(S))?t.slice(S).length:1,B=E.slice(T);return B[0]!=="/"&&(B="/"+B),stripBase(B,"")}return stripBase(_,t)+x+E}function useHistoryListeners(t,n,_,x){let E=[],S=[],C=null;const T=({state:M})=>{const V=createCurrentLocation(t,location),L=_.value,F=n.value;let j=0;if(M){if(_.value=V,n.value=M,C&&C===L){C=null;return}j=F?M.position-F.position:0}else x(V);E.forEach(U=>{U(_.value,L,{delta:j,type:NavigationType.pop,direction:j?j>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function B(){C=_.value}function A(M){E.push(M);const V=()=>{const L=E.indexOf(M);L>-1&&E.splice(L,1)};return S.push(V),V}function I(){const{history:M}=window;M.state&&M.replaceState(assign({},M.state,{scroll:computeScrollPosition()}),"")}function D(){for(const M of S)M();S=[],window.removeEventListener("popstate",T),window.removeEventListener("beforeunload",I)}return window.addEventListener("popstate",T),window.addEventListener("beforeunload",I,{passive:!0}),{pauseListeners:B,listen:A,destroy:D}}function buildState(t,n,_,x=!1,E=!1){return{back:t,current:n,forward:_,replaced:x,position:window.history.length,scroll:E?computeScrollPosition():null}}function useHistoryStateNavigation(t){const{history:n,location:_}=window,x={value:createCurrentLocation(t,_)},E={value:n.state};E.value||S(x.value,{back:null,current:x.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function S(B,A,I){const D=t.indexOf("#"),M=D>-1?(_.host&&document.querySelector("base")?t:t.slice(D))+B:createBaseLocation()+t+B;try{n[I?"replaceState":"pushState"](A,"",M),E.value=A}catch(V){console.error(V),_[I?"replace":"assign"](M)}}function C(B,A){const I=assign({},n.state,buildState(E.value.back,B,E.value.forward,!0),A,{position:E.value.position});S(B,I,!0),x.value=B}function T(B,A){const I=assign({},E.value,n.state,{forward:B,scroll:computeScrollPosition()});S(I.current,I,!0);const D=assign({},buildState(x.value,B,null),{position:I.position+1},A);S(B,D,!1),x.value=B}return{location:x,state:E,push:T,replace:C}}function createWebHistory(t){t=normalizeBase(t);const n=useHistoryStateNavigation(t),_=useHistoryListeners(t,n.state,n.location,n.replace);function x(S,C=!0){C||_.pauseListeners(),history.go(S)}const E=assign({location:"",base:t,go:x,createHref:createHref.bind(null,t)},n,_);return Object.defineProperty(E,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(E,"state",{enumerable:!0,get:()=>n.state.value}),E}function createWebHashHistory(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),createWebHistory(t)}function isRouteLocation(t){return typeof t=="string"||t&&typeof t=="object"}function isRouteName(t){return typeof t=="string"||typeof t=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(t,n){return assign(new Error,{type:t,[NavigationFailureSymbol]:!0},n)}function isNavigationFailure(t,n){return t instanceof Error&&NavigationFailureSymbol in t&&(n==null||!!(t.type&n))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(t,n){const _=assign({},BASE_PATH_PARSER_OPTIONS,n),x=[];let E=_.start?"^":"";const S=[];for(const A of t){const I=A.length?[]:[90];_.strict&&!A.length&&(E+="/");for(let D=0;D<A.length;D++){const M=A[D];let V=40+(_.sensitive?.25:0);if(M.type===0)D||(E+="/"),E+=M.value.replace(REGEX_CHARS_RE,"\\$&"),V+=40;else if(M.type===1){const{value:L,repeatable:F,optional:j,regexp:U}=M;S.push({name:L,repeatable:F,optional:j});const H=U||BASE_PARAM_PATTERN;if(H!==BASE_PARAM_PATTERN){V+=10;try{new RegExp(`(${H})`)}catch(Z){throw new Error(`Invalid custom RegExp for param "${L}" (${H}): `+Z.message)}}let Y=F?`((?:${H})(?:/(?:${H}))*)`:`(${H})`;D||(Y=j&&A.length<2?`(?:/${Y})`:"/"+Y),j&&(Y+="?"),E+=Y,V+=20,j&&(V+=-8),F&&(V+=-20),H===".*"&&(V+=-50)}I.push(V)}x.push(I)}if(_.strict&&_.end){const A=x.length-1;x[A][x[A].length-1]+=.7000000000000001}_.strict||(E+="/?"),_.end?E+="$":_.strict&&(E+="(?:/|$)");const C=new RegExp(E,_.sensitive?"":"i");function T(A){const I=A.match(C),D={};if(!I)return null;for(let M=1;M<I.length;M++){const V=I[M]||"",L=S[M-1];D[L.name]=V&&L.repeatable?V.split("/"):V}return D}function B(A){let I="",D=!1;for(const M of t){(!D||!I.endsWith("/"))&&(I+="/"),D=!1;for(const V of M)if(V.type===0)I+=V.value;else if(V.type===1){const{value:L,repeatable:F,optional:j}=V,U=L in A?A[L]:"";if(isArray(U)&&!F)throw new Error(`Provided param "${L}" is an array but it is not repeatable (* or + modifiers)`);const H=isArray(U)?U.join("/"):U;if(!H)if(j)M.length<2&&(I.endsWith("/")?I=I.slice(0,-1):D=!0);else throw new Error(`Missing required param "${L}"`);I+=H}}return I||"/"}return{re:C,score:x,keys:S,parse:T,stringify:B}}function compareScoreArray(t,n){let _=0;for(;_<t.length&&_<n.length;){const x=n[_]-t[_];if(x)return x;_++}return t.length<n.length?t.length===1&&t[0]===40+40?-1:1:t.length>n.length?n.length===1&&n[0]===40+40?1:-1:0}function comparePathParserScore(t,n){let _=0;const x=t.score,E=n.score;for(;_<x.length&&_<E.length;){const S=compareScoreArray(x[_],E[_]);if(S)return S;_++}if(Math.abs(E.length-x.length)===1){if(isLastScoreNegative(x))return 1;if(isLastScoreNegative(E))return-1}return E.length-x.length}function isLastScoreNegative(t){const n=t[t.length-1];return t.length>0&&n[n.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(t){if(!t)return[[]];if(t==="/")return[[ROOT_TOKEN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function n(V){throw new Error(`ERR (${_})/"${A}": ${V}`)}let _=0,x=_;const E=[];let S;function C(){S&&E.push(S),S=[]}let T=0,B,A="",I="";function D(){A&&(_===0?S.push({type:0,value:A}):_===1||_===2||_===3?(S.length>1&&(B==="*"||B==="+")&&n(`A repeatable param (${A}) must be alone in its segment. eg: '/:ids+.`),S.push({type:1,value:A,regexp:I,repeatable:B==="*"||B==="+",optional:B==="*"||B==="?"})):n("Invalid state to consume buffer"),A="")}function M(){A+=B}for(;T<t.length;){if(B=t[T++],B==="\\"&&_!==2){x=_,_=4;continue}switch(_){case 0:B==="/"?(A&&D(),C()):B===":"?(D(),_=1):M();break;case 4:M(),_=x;break;case 1:B==="("?_=2:VALID_PARAM_RE.test(B)?M():(D(),_=0,B!=="*"&&B!=="?"&&B!=="+"&&T--);break;case 2:B===")"?I[I.length-1]=="\\"?I=I.slice(0,-1)+B:_=3:I+=B;break;case 3:D(),_=0,B!=="*"&&B!=="?"&&B!=="+"&&T--,I="";break;default:n("Unknown state");break}}return _===2&&n(`Unfinished custom RegExp for param "${A}"`),D(),C(),E}function createRouteRecordMatcher(t,n,_){const x=tokensToParser(tokenizePath(t.path),_),E=assign(x,{record:t,parent:n,children:[],alias:[]});return n&&!E.record.aliasOf==!n.record.aliasOf&&n.children.push(E),E}function createRouterMatcher(t,n){const _=[],x=new Map;n=mergeOptions({strict:!1,end:!0,sensitive:!1},n);function E(I){return x.get(I)}function S(I,D,M){const V=!M,L=normalizeRouteRecord(I);L.aliasOf=M&&M.record;const F=mergeOptions(n,I),j=[L];if("alias"in I){const Y=typeof I.alias=="string"?[I.alias]:I.alias;for(const Z of Y)j.push(assign({},L,{components:M?M.record.components:L.components,path:Z,aliasOf:M?M.record:L}))}let U,H;for(const Y of j){const{path:Z}=Y;if(D&&Z[0]!=="/"){const ne=D.record.path,re=ne[ne.length-1]==="/"?"":"/";Y.path=D.record.path+(Z&&re+Z)}if(U=createRouteRecordMatcher(Y,D,F),M?M.alias.push(U):(H=H||U,H!==U&&H.alias.push(U),V&&I.name&&!isAliasRecord(U)&&C(I.name)),L.children){const ne=L.children;for(let re=0;re<ne.length;re++)S(ne[re],U,M&&M.children[re])}M=M||U,(U.record.components&&Object.keys(U.record.components).length||U.record.name||U.record.redirect)&&B(U)}return H?()=>{C(H)}:noop}function C(I){if(isRouteName(I)){const D=x.get(I);D&&(x.delete(I),_.splice(_.indexOf(D),1),D.children.forEach(C),D.alias.forEach(C))}else{const D=_.indexOf(I);D>-1&&(_.splice(D,1),I.record.name&&x.delete(I.record.name),I.children.forEach(C),I.alias.forEach(C))}}function T(){return _}function B(I){let D=0;for(;D<_.length&&comparePathParserScore(I,_[D])>=0&&(I.record.path!==_[D].record.path||!isRecordChildOf(I,_[D]));)D++;_.splice(D,0,I),I.record.name&&!isAliasRecord(I)&&x.set(I.record.name,I)}function A(I,D){let M,V={},L,F;if("name"in I&&I.name){if(M=x.get(I.name),!M)throw createRouterError(1,{location:I});F=M.record.name,V=assign(paramsFromLocation(D.params,M.keys.filter(H=>!H.optional).map(H=>H.name)),I.params&&paramsFromLocation(I.params,M.keys.map(H=>H.name))),L=M.stringify(V)}else if("path"in I)L=I.path,M=_.find(H=>H.re.test(L)),M&&(V=M.parse(L),F=M.record.name);else{if(M=D.name?x.get(D.name):_.find(H=>H.re.test(D.path)),!M)throw createRouterError(1,{location:I,currentLocation:D});F=M.record.name,V=assign({},D.params,I.params),L=M.stringify(V)}const j=[];let U=M;for(;U;)j.unshift(U.record),U=U.parent;return{name:F,path:L,params:V,matched:j,meta:mergeMetaFields(j)}}return t.forEach(I=>S(I)),{addRoute:S,resolve:A,removeRoute:C,getRoutes:T,getRecordMatcher:E}}function paramsFromLocation(t,n){const _={};for(const x of n)x in t&&(_[x]=t[x]);return _}function normalizeRouteRecord(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:normalizeRecordProps(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function normalizeRecordProps(t){const n={},_=t.props||!1;if("component"in t)n.default=_;else for(const x in t.components)n[x]=typeof _=="object"?_[x]:_;return n}function isAliasRecord(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mergeMetaFields(t){return t.reduce((n,_)=>assign(n,_.meta),{})}function mergeOptions(t,n){const _={};for(const x in t)_[x]=x in n?n[x]:t[x];return _}function isRecordChildOf(t,n){return n.children.some(_=>_===t||isRecordChildOf(t,_))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(t){return encodeURI(""+t).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(t){return commonEncode(t).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(t){return commonEncode(t).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(t){return encodeQueryValue(t).replace(EQUAL_RE,"%3D")}function encodePath(t){return commonEncode(t).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(t){return t==null?"":encodePath(t).replace(SLASH_RE,"%2F")}function decode(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function parseQuery(t){const n={};if(t===""||t==="?")return n;const x=(t[0]==="?"?t.slice(1):t).split("&");for(let E=0;E<x.length;++E){const S=x[E].replace(PLUS_RE," "),C=S.indexOf("="),T=decode(C<0?S:S.slice(0,C)),B=C<0?null:decode(S.slice(C+1));if(T in n){let A=n[T];isArray(A)||(A=n[T]=[A]),A.push(B)}else n[T]=B}return n}function stringifyQuery(t){let n="";for(let _ in t){const x=t[_];if(_=encodeQueryKey(_),x==null){x!==void 0&&(n+=(n.length?"&":"")+_);continue}(isArray(x)?x.map(S=>S&&encodeQueryValue(S)):[x&&encodeQueryValue(x)]).forEach(S=>{S!==void 0&&(n+=(n.length?"&":"")+_,S!=null&&(n+="="+S))})}return n}function normalizeQuery(t){const n={};for(const _ in t){const x=t[_];x!==void 0&&(n[_]=isArray(x)?x.map(E=>E==null?null:""+E):x==null?x:""+x)}return n}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let t=[];function n(x){return t.push(x),()=>{const E=t.indexOf(x);E>-1&&t.splice(E,1)}}function _(){t=[]}return{add:n,list:()=>t.slice(),reset:_}}function guardToPromiseFn(t,n,_,x,E){const S=x&&(x.enterCallbacks[E]=x.enterCallbacks[E]||[]);return()=>new Promise((C,T)=>{const B=D=>{D===!1?T(createRouterError(4,{from:_,to:n})):D instanceof Error?T(D):isRouteLocation(D)?T(createRouterError(2,{from:n,to:D})):(S&&x.enterCallbacks[E]===S&&typeof D=="function"&&S.push(D),C())},A=t.call(x&&x.instances[E],n,_,B);let I=Promise.resolve(A);t.length<3&&(I=I.then(B)),I.catch(D=>T(D))})}function extractComponentsGuards(t,n,_,x){const E=[];for(const S of t)for(const C in S.components){let T=S.components[C];if(!(n!=="beforeRouteEnter"&&!S.instances[C]))if(isRouteComponent(T)){const A=(T.__vccOpts||T)[n];A&&E.push(guardToPromiseFn(A,_,x,S,C))}else{let B=T();E.push(()=>B.then(A=>{if(!A)return Promise.reject(new Error(`Couldn't resolve component "${C}" at "${S.path}"`));const I=isESModule(A)?A.default:A;S.components[C]=I;const M=(I.__vccOpts||I)[n];return M&&guardToPromiseFn(M,_,x,S,C)()}))}}return E}function isRouteComponent(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function useLink(t){const n=inject$1(routerKey),_=inject$1(routeLocationKey),x=computed(()=>n.resolve(unref(t.to))),E=computed(()=>{const{matched:B}=x.value,{length:A}=B,I=B[A-1],D=_.matched;if(!I||!D.length)return-1;const M=D.findIndex(isSameRouteRecord.bind(null,I));if(M>-1)return M;const V=getOriginalPath(B[A-2]);return A>1&&getOriginalPath(I)===V&&D[D.length-1].path!==V?D.findIndex(isSameRouteRecord.bind(null,B[A-2])):M}),S=computed(()=>E.value>-1&&includesParams(_.params,x.value.params)),C=computed(()=>E.value>-1&&E.value===_.matched.length-1&&isSameRouteLocationParams(_.params,x.value.params));function T(B={}){return guardEvent(B)?n[unref(t.replace)?"replace":"push"](unref(t.to)).catch(noop):Promise.resolve()}return{route:x,href:computed(()=>x.value.href),isActive:S,isExactActive:C,navigate:T}}const RouterLinkImpl=defineComponent$1({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(t,{slots:n}){const _=reactive(useLink(t)),{options:x}=inject$1(routerKey),E=computed(()=>({[getLinkClass(t.activeClass,x.linkActiveClass,"router-link-active")]:_.isActive,[getLinkClass(t.exactActiveClass,x.linkExactActiveClass,"router-link-exact-active")]:_.isExactActive}));return()=>{const S=n.default&&n.default(_);return t.custom?S:h$1("a",{"aria-current":_.isExactActive?t.ariaCurrentValue:null,href:_.href,onClick:_.navigate,class:E.value},S)}}}),RouterLink=RouterLinkImpl;function guardEvent(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function includesParams(t,n){for(const _ in n){const x=n[_],E=t[_];if(typeof x=="string"){if(x!==E)return!1}else if(!isArray(E)||E.length!==x.length||x.some((S,C)=>S!==E[C]))return!1}return!0}function getOriginalPath(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const getLinkClass=(t,n,_)=>t??n??_,RouterViewImpl=defineComponent$1({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:n,slots:_}){const x=inject$1(routerViewLocationKey),E=computed(()=>t.route||x.value),S=inject$1(viewDepthKey,0),C=computed(()=>{let A=unref(S);const{matched:I}=E.value;let D;for(;(D=I[A])&&!D.components;)A++;return A}),T=computed(()=>E.value.matched[C.value]);provide(viewDepthKey,computed(()=>C.value+1)),provide(matchedRouteKey,T),provide(routerViewLocationKey,E);const B=ref$1();return watch(()=>[B.value,T.value,t.name],([A,I,D],[M,V,L])=>{I&&(I.instances[D]=A,V&&V!==I&&A&&A===M&&(I.leaveGuards.size||(I.leaveGuards=V.leaveGuards),I.updateGuards.size||(I.updateGuards=V.updateGuards))),A&&I&&(!V||!isSameRouteRecord(I,V)||!M)&&(I.enterCallbacks[D]||[]).forEach(F=>F(A))},{flush:"post"}),()=>{const A=E.value,I=t.name,D=T.value,M=D&&D.components[I];if(!M)return normalizeSlot(_.default,{Component:M,route:A});const V=D.props[I],L=V?V===!0?A.params:typeof V=="function"?V(A):V:null,j=h$1(M,assign({},L,n,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(D.instances[I]=null)},ref:B}));return normalizeSlot(_.default,{Component:j,route:A})||j}}});function normalizeSlot(t,n){if(!t)return null;const _=t(n);return _.length===1?_[0]:_}const RouterView=RouterViewImpl;function createRouter(t){const n=createRouterMatcher(t.routes,t),_=t.parseQuery||parseQuery,x=t.stringifyQuery||stringifyQuery,E=t.history,S=useCallbacks(),C=useCallbacks(),T=useCallbacks(),B=shallowRef(START_LOCATION_NORMALIZED);let A=START_LOCATION_NORMALIZED;isBrowser&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const I=applyToParams.bind(null,we=>""+we),D=applyToParams.bind(null,encodeParam),M=applyToParams.bind(null,decode);function V(we,xe){let $e,ge;return isRouteName(we)?($e=n.getRecordMatcher(we),ge=xe):ge=we,n.addRoute(ge,$e)}function L(we){const xe=n.getRecordMatcher(we);xe&&n.removeRoute(xe)}function F(){return n.getRoutes().map(we=>we.record)}function j(we){return!!n.getRecordMatcher(we)}function U(we,xe){if(xe=assign({},xe||B.value),typeof we=="string"){const ve=parseURL(_,we,xe.path),Ae=n.resolve({path:ve.path},xe),Ve=E.createHref(ve.fullPath);return assign(ve,Ae,{params:M(Ae.params),hash:decode(ve.hash),redirectedFrom:void 0,href:Ve})}let $e;if("path"in we)$e=assign({},we,{path:parseURL(_,we.path,xe.path).path});else{const ve=assign({},we.params);for(const Ae in ve)ve[Ae]==null&&delete ve[Ae];$e=assign({},we,{params:D(ve)}),xe.params=D(xe.params)}const ge=n.resolve($e,xe),Se=we.hash||"";ge.params=I(M(ge.params));const me=stringifyURL(x,assign({},we,{hash:encodeHash(Se),path:ge.path})),Be=E.createHref(me);return assign({fullPath:me,hash:Se,query:x===stringifyQuery?normalizeQuery(we.query):we.query||{}},ge,{redirectedFrom:void 0,href:Be})}function H(we){return typeof we=="string"?parseURL(_,we,B.value.path):assign({},we)}function Y(we,xe){if(A!==we)return createRouterError(8,{from:xe,to:we})}function Z(we){return X(we)}function ne(we){return Z(assign(H(we),{replace:!0}))}function re(we){const xe=we.matched[we.matched.length-1];if(xe&&xe.redirect){const{redirect:$e}=xe;let ge=typeof $e=="function"?$e(we):$e;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=H(ge):{path:ge},ge.params={}),assign({query:we.query,hash:we.hash,params:"path"in ge?{}:we.params},ge)}}function X(we,xe){const $e=A=U(we),ge=B.value,Se=we.state,me=we.force,Be=we.replace===!0,ve=re($e);if(ve)return X(assign(H(ve),{state:typeof ve=="object"?assign({},Se,ve.state):Se,force:me,replace:Be}),xe||$e);const Ae=$e;Ae.redirectedFrom=xe;let Ve;return!me&&isSameRouteLocation(x,ge,$e)&&(Ve=createRouterError(16,{to:Ae,from:ge}),G(ge,ge,!0,!1)),(Ve?Promise.resolve(Ve):_e(Ae,ge)).catch(Pe=>isNavigationFailure(Pe)?isNavigationFailure(Pe,2)?Pe:se(Pe):ae(Pe,Ae,ge)).then(Pe=>{if(Pe){if(isNavigationFailure(Pe,2))return X(assign({replace:Be},H(Pe.to),{state:typeof Pe.to=="object"?assign({},Se,Pe.to.state):Se,force:me}),xe||Ae)}else Pe=ie(Ae,ge,!0,Be,Se);return ye(Ae,ge,Pe),Pe})}function ce(we,xe){const $e=Y(we,xe);return $e?Promise.reject($e):Promise.resolve()}function ue(we){const xe=fe.values().next().value;return xe&&typeof xe.runWithContext=="function"?xe.runWithContext(we):we()}function _e(we,xe){let $e;const[ge,Se,me]=extractChangingRecords(we,xe);$e=extractComponentsGuards(ge.reverse(),"beforeRouteLeave",we,xe);for(const ve of ge)ve.leaveGuards.forEach(Ae=>{$e.push(guardToPromiseFn(Ae,we,xe))});const Be=ce.bind(null,we,xe);return $e.push(Be),Ee($e).then(()=>{$e=[];for(const ve of S.list())$e.push(guardToPromiseFn(ve,we,xe));return $e.push(Be),Ee($e)}).then(()=>{$e=extractComponentsGuards(Se,"beforeRouteUpdate",we,xe);for(const ve of Se)ve.updateGuards.forEach(Ae=>{$e.push(guardToPromiseFn(Ae,we,xe))});return $e.push(Be),Ee($e)}).then(()=>{$e=[];for(const ve of me)if(ve.beforeEnter)if(isArray(ve.beforeEnter))for(const Ae of ve.beforeEnter)$e.push(guardToPromiseFn(Ae,we,xe));else $e.push(guardToPromiseFn(ve.beforeEnter,we,xe));return $e.push(Be),Ee($e)}).then(()=>(we.matched.forEach(ve=>ve.enterCallbacks={}),$e=extractComponentsGuards(me,"beforeRouteEnter",we,xe),$e.push(Be),Ee($e))).then(()=>{$e=[];for(const ve of C.list())$e.push(guardToPromiseFn(ve,we,xe));return $e.push(Be),Ee($e)}).catch(ve=>isNavigationFailure(ve,8)?ve:Promise.reject(ve))}function ye(we,xe,$e){T.list().forEach(ge=>ue(()=>ge(we,xe,$e)))}function ie(we,xe,$e,ge,Se){const me=Y(we,xe);if(me)return me;const Be=xe===START_LOCATION_NORMALIZED,ve=isBrowser?history.state:{};$e&&(ge||Be?E.replace(we.fullPath,assign({scroll:Be&&ve&&ve.scroll},Se)):E.push(we.fullPath,Se)),B.value=we,G(we,xe,$e,Be),se()}let W;function O(){W||(W=E.listen((we,xe,$e)=>{if(!he.listening)return;const ge=U(we),Se=re(ge);if(Se){X(assign(Se,{replace:!0}),ge).catch(noop);return}A=ge;const me=B.value;isBrowser&&saveScrollPosition(getScrollKey(me.fullPath,$e.delta),computeScrollPosition()),_e(ge,me).catch(Be=>isNavigationFailure(Be,12)?Be:isNavigationFailure(Be,2)?(X(Be.to,ge).then(ve=>{isNavigationFailure(ve,20)&&!$e.delta&&$e.type===NavigationType.pop&&E.go(-1,!1)}).catch(noop),Promise.reject()):($e.delta&&E.go(-$e.delta,!1),ae(Be,ge,me))).then(Be=>{Be=Be||ie(ge,me,!1),Be&&($e.delta&&!isNavigationFailure(Be,8)?E.go(-$e.delta,!1):$e.type===NavigationType.pop&&isNavigationFailure(Be,20)&&E.go(-1,!1)),ye(ge,me,Be)}).catch(noop)}))}let z=useCallbacks(),J=useCallbacks(),ee;function ae(we,xe,$e){se(we);const ge=J.list();return ge.length?ge.forEach(Se=>Se(we,xe,$e)):console.error(we),Promise.reject(we)}function oe(){return ee&&B.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((we,xe)=>{z.add([we,xe])})}function se(we){return ee||(ee=!we,O(),z.list().forEach(([xe,$e])=>we?$e(we):xe()),z.reset()),we}function G(we,xe,$e,ge){const{scrollBehavior:Se}=t;if(!isBrowser||!Se)return Promise.resolve();const me=!$e&&getSavedScrollPosition(getScrollKey(we.fullPath,0))||(ge||!$e)&&history.state&&history.state.scroll||null;return nextTick$2().then(()=>Se(we,xe,me)).then(Be=>Be&&scrollToPosition(Be)).catch(Be=>ae(Be,we,xe))}const q=we=>E.go(we);let te;const fe=new Set,he={currentRoute:B,listening:!0,addRoute:V,removeRoute:L,hasRoute:j,getRoutes:F,resolve:U,options:t,push:Z,replace:ne,go:q,back:()=>q(-1),forward:()=>q(1),beforeEach:S.add,beforeResolve:C.add,afterEach:T.add,onError:J.add,isReady:oe,install(we){const xe=this;we.component("RouterLink",RouterLink),we.component("RouterView",RouterView),we.config.globalProperties.$router=xe,Object.defineProperty(we.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(B)}),isBrowser&&!te&&B.value===START_LOCATION_NORMALIZED&&(te=!0,Z(E.location).catch(Se=>{}));const $e={};for(const Se in START_LOCATION_NORMALIZED)Object.defineProperty($e,Se,{get:()=>B.value[Se],enumerable:!0});we.provide(routerKey,xe),we.provide(routeLocationKey,shallowReactive($e)),we.provide(routerViewLocationKey,B);const ge=we.unmount;fe.add(we),we.unmount=function(){fe.delete(we),fe.size<1&&(A=START_LOCATION_NORMALIZED,W&&W(),W=null,B.value=START_LOCATION_NORMALIZED,te=!1,ee=!1),ge()}}};function Ee(we){return we.reduce((xe,$e)=>xe.then(()=>ue($e)),Promise.resolve())}return he}function extractChangingRecords(t,n){const _=[],x=[],E=[],S=Math.max(n.matched.length,t.matched.length);for(let C=0;C<S;C++){const T=n.matched[C];T&&(t.matched.find(A=>isSameRouteRecord(A,T))?x.push(T):_.push(T));const B=t.matched[C];B&&(n.matched.find(A=>isSameRouteRecord(A,B))||E.push(B))}return[_,x,E]}function useRouter(){return inject$1(routerKey)}const _hoisted_1$t={class:"text-h2"},_hoisted_2$l={key:2,class:"text-h4 mb-5"},_sfc_main$12=defineComponent$1({__name:"TitrePage",props:{titre:{type:String,required:!0},sousTitre:{type:String,default:""},image:{type:String,default:void 0},imageRonde:{type:Boolean,default:!0}},setup(t){const{mdAndUp:n}=useDisplay();return(_,x)=>(openBlock(),createBlock(VContainer,{class:normalizeClass({"mt-3":!0,"pb-0":!!t.image,"text-center":!0})},{default:withCtx(()=>[createBaseVNode("h1",_hoisted_1$t,toDisplayString$1(t.titre),1),t.image&&t.imageRonde?(openBlock(),createBlock(VAvatar,{key:0,size:unref(n)?275:175},{default:withCtx(()=>[createVNode(VImg,{src:t.image},null,8,["src"])]),_:1},8,["size"])):t.image?(openBlock(),createBlock(VImg,{key:1,src:t.image,contain:"",height:"175"},null,8,["src"])):createCommentVNode("",!0),t.sousTitre?(openBlock(),createElementBlock("h2",_hoisted_2$l,toDisplayString$1(t.sousTitre),1)):createCommentVNode("",!0)]),_:1},8,["class"]))}}),_sfc_main$11=defineComponent$1({__name:"ServeurWS",setup(t){const{useI18n:n}=_(),{t:_}=n(),x=inject$1("serveurConstl"),E=ref$1(!1),S=ref$1(!1),C=ref$1(),T=ref$1();return watchEffect(async()=>{S.value?T.value=await x?.initialiser(C.value):(T.value=void 0,await x?.fermer())}),(B,A)=>(openBlock(),createBlock(VCard,{class:"text-start ma-2",variant:"outlined","max-width":"250"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("accueil.nud.titre"))+"Nud WS local ",1),createVNode(VTooltip,{text:unref(_)("accueil.nud.indice: Ouvrir un nud local pour connecter d'autres applications."),location:"bottom"},{activator:withCtx(({props:I})=>[createVNode(VIcon,mergeProps({size:"xsmall"},I),{default:withCtx(()=>[createTextVNode(" mdi-help-circle-outline ")]),_:2},1040)]),_:1},8,["text"])]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VSwitch,{modelValue:S.value,"onUpdate:modelValue":A[0]||(A[0]=I=>S.value=I),class:"text-start",color:"primary",inset:"","hide-details":"","prepend-icon":S.value?"mdi-server":"mdi-server-off",loading:S.value&&!T.value},{label:withCtx(()=>[createTextVNode(toDisplayString$1(S.value?"Port : "+T.value:"Dconnect"),1)]),_:1},8,["modelValue","prepend-icon","loading"]),createVNode(VDialog,{modelValue:E.value,"onUpdate:modelValue":A[1]||(A[1]=I=>E.value=I)},{activator:withCtx(({props:I})=>[renderSlot(B.$slots,"activator",normalizeProps(guardReactiveProps({props:I})))]),_:3},8,["modelValue"])]),_:3})]),_:3}))}}),_sfc_main$10=defineComponent$1({__name:"PageAccueil",setup(t){const{useI18n:n}=_(),{t:_}=n();return(x,E)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(_)("communs.constellation")},null,8,["titre"]),unref(isElectron)?(openBlock(),createBlock(_sfc_main$11,{key:0})):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$$=defineComponent$1({__name:"ItemConnexionConstellation",props:{compte:{},dispositifs:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{formatterChiffre:S}=utiliserNumration(),{traduireNom:C}=utiliserLangues(),T=ref$1({}),B=C(T);enregistrercoute(_?.profil.suivreNoms({idCompte:n.compte,f:M=>T.value=M}));const A=S(computed(()=>n.dispositifs.length)),I=computed(()=>n.dispositifs.filter(M=>!M.vu).length),D=S(I);return(M,V)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(_sfc_main$24,{id:M.compte},null,8,["id"])]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(B)||unref(E)("communs.anonyme"))+" ",1),createVNode(_sfc_main$1p,{id:M.compte,"style-jeton":"icne"},null,8,["id"])]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("pages.compte.connexions.dispositifs",{nDispositifs:unref(A),nDispositifsEnLigne:unref(D)})),1)]),_:1})]),_:1}))}}),_sfc_main$_=defineComponent$1({__name:"ItemConnexionSFIP",props:{adresse:{},pair:{}},setup(t){return(n,_)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-web")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(n.adresse),1)]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(n.pair),1)]),_:1})]),_:1}))}}),_hoisted_1$s={key:0},_hoisted_2$k={key:1},_sfc_main$Z=defineComponent$1({__name:"OngletConnexions",setup(t){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),E=ref$1("Constellation"),S=computed(()=>{switch(E.value){case"SFIP":return x("pages.compte.connexions.titreSFIP");case"Constellation":return x("pages.compte.connexions.titreConstellation");default:return""}}),C=ref$1();enregistrercoute(n?.rseau?.suivreConnexionsPostesSFIP({f:A=>C.value=A}));const T=ref$1();enregistrercoute(n?.rseau?.suivreConnexionsDispositifs({f:A=>T.value=A}));const B=computed(()=>[...new Set(T.value?.map(I=>I.infoDispositif.idCompte))||[]].map(I=>({idCompte:I,dispositifs:T.value?.filter(D=>D.infoDispositif.idCompte===I)||[]})));return(A,I)=>(openBlock(),createBlock(VCard,{class:"text-start"},{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VRadioGroup,{modelValue:E.value,"onUpdate:modelValue":I[0]||(I[0]=D=>E.value=D),inline:""},{default:withCtx(()=>[createVNode(VRadio,{label:unref(x)("pages.compte.connexions.Constellation"),value:"Constellation"},null,8,["label"]),createVNode(VRadio,{value:"SFIP"},{label:withCtx(()=>[createBaseVNode("div",null,[createVNode(VTooltip,{text:unref(x)("pages.compte.connexions.indiceSFIP"),location:"bottom"},{activator:withCtx(({props:D})=>[createBaseVNode("p",normalizeProps(guardReactiveProps(D)),toDisplayString$1(unref(x)("pages.compte.connexions.SFIP")),17)]),_:1},8,["text"])])]),_:1})]),_:1},8,["modelValue"]),createVNode(_sfc_main$1K,{titre:S.value,"en-attente":!C.value},null,8,["titre","en-attente"]),E.value==="Constellation"?(openBlock(),createElementBlock("div",_hoisted_1$s,[T.value?(openBlock(),createBlock(VList,{key:0,"max-height":"500",style:{"overflow-y":"scroll"}},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(B.value,D=>(openBlock(),createBlock(_sfc_main$17,{id:D.idCompte,key:D.idCompte},{activator:withCtx(({props:M})=>[createVNode(_sfc_main$$,mergeProps(M,{compte:D.idCompte,dispositifs:D.dispositifs}),null,16,["compte","dispositifs"])]),_:2},1032,["id"]))),128))]),_:1})):createCommentVNode("",!0)])):(openBlock(),createElementBlock("div",_hoisted_2$k,[C.value?(openBlock(),createBlock(VList,{key:0,"max-height":"500",style:{"overflow-y":"scroll"}},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(C.value,D=>(openBlock(),createBlock(_sfc_main$_,{key:D.adresse,pair:D.pair,adresse:D.adresse},null,8,["pair","adresse"]))),128))]),_:1})):createCommentVNode("",!0)]))]),_:1})]),_:1}))}}),_sfc_main$Y=defineComponent$1({__name:"ItemNumration",props:{code:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),{numration:E,formatterChiffre:S}=utiliserNumration(),C=S(123.45,n.code);return(T,B)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[T.code===unref(E)?(openBlock(),createBlock(VIcon,{key:0,color:"primary"},{default:withCtx(()=>[createTextVNode(" mdi-check-bold ")]),_:1})):createCommentVNode("",!0)]),title:withCtx(()=>[createTextVNode(toDisplayString$1(T.code||unref(x)("communs.auto")),1)]),append:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)),1)]),_:1}))}}),_sfc_main$X=defineComponent$1({__name:"JetonNumration",props:{code:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),{formatterChiffre:E}=utiliserNumration(),S=E(123.45,n.code);return(C,T)=>(openBlock(),createBlock(VChip,{variant:"outlined",size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.code||unref(x)("communs.auto"))+" "+toDisplayString$1(unref(S)),1)]),_:1}))}}),_hoisted_1$r={class:"d-flex flex-wrap"},_hoisted_2$j={class:"px-0 mb-0 text-overline"},_hoisted_3$b={class:"px-0 mb-0 text-overline"},_hoisted_4$4={class:"px-0 mb-0 text-overline"},_sfc_main$W=defineComponent$1({__name:"OngletThme",setup(t){const{useI18n:n,__:_}=_(),{langue:x,choisirLangues:E}=utiliserLangues(),{numration:S,systmesNumration:C}=utiliserNumration(),{t:T}=n(),B=utilisertatThme(),A=useTheme(),I=ref$1(B.couleur),D=ref$1(B.thmeImages);watchEffect(()=>{B.couleur=I.value,A.global.name.value=I.value}),watchEffect(()=>{B.thmeImages=D.value});const M=ref$1(x.value),{codesLanguesDisponibles:V}=_();watchEffect(()=>{M.value=x.value}),watch(M,()=>{x.value!==M.value&&E(M.value)});const L=ref$1(S.value);return(F,j)=>(openBlock(),createBlock(VCard,{class:"text-start"},{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$r,[createVNode(VCard,{flat:"",width:"300",class:"mx-3 my-3"},{default:withCtx(()=>[createBaseVNode("p",_hoisted_2$j,toDisplayString$1(unref(T)("pages.compte.options.couleurs")),1),createVNode(VDivider,{class:"mb-4"}),createVNode(VSwitch,{modelValue:I.value,"onUpdate:modelValue":j[0]||(j[0]=U=>I.value=U),color:"primary","true-value":"dark","false-value":"light",inset:"",label:unref(T)("pages.compte.options.thmeNuit")},{prepend:withCtx(()=>[createVNode(VIcon,{icon:I.value==="dark"?"mdi-weather-night":"mdi-white-balance-sunny",color:I.value==="dark"?"primary":void 0},null,8,["icon","color"])]),_:1},8,["modelValue","label"])]),_:1}),createVNode(VCard,{flat:"",width:"300",class:"mx-3 my-3"},{default:withCtx(()=>[createBaseVNode("p",_hoisted_3$b,toDisplayString$1(unref(T)("pages.compte.options.culture")),1),createVNode(VDivider,{class:"mb-4"}),createVNode(VRadioGroup,{modelValue:D.value,"onUpdate:modelValue":j[1]||(j[1]=U=>D.value=U),label:unref(T)("pages.compte.options.thmeImages"),class:"mt-0"},{default:withCtx(()=>[createVNode(VRadio,{value:"unDraw",label:unref(T)("pages.compte.options.unDraw")},null,8,["label"]),createVNode(VRadio,{value:"",label:unref(T)("pages.compte.options.")},null,8,["label"])]),_:1},8,["modelValue","label"])]),_:1}),createVNode(VCard,{flat:"",width:"300",class:"mx-3 my-3"},{default:withCtx(()=>[createBaseVNode("p",_hoisted_4$4,toDisplayString$1(unref(T)("pages.compte.options.langue")),1),createVNode(VDivider,{class:"mb-4"}),createVNode(VAutocomplete,{modelValue:M.value,"onUpdate:modelValue":j[2]||(j[2]=U=>M.value=U),items:unref(V),label:unref(T)("pages.compte.options.langue"),variant:"outlined",density:"compact","hide-details":"","prepend-icon":"mdi-earth",class:"pb-5"},{item:withCtx(({item:U,props:H})=>[createVNode(_sfc_main$1T,mergeProps(H,{code:U.value,selectionnee:U.value===unref(x)}),null,16,["code","selectionnee"])]),selection:withCtx(({item:U})=>[createVNode(_sfc_main$1S,{code:U.value},null,8,["code"])]),_:1},8,["modelValue","items","label"]),createVNode(VAutocomplete,{modelValue:L.value,"onUpdate:modelValue":j[3]||(j[3]=U=>L.value=U),items:[null,...unref(C)],label:unref(T)("compte.options.numration"),variant:"outlined",density:"compact","hide-details":"","prepend-icon":"mdi-abacus",class:"py-5"},{selection:withCtx(({item:U})=>[createVNode(_sfc_main$X,{code:U.value},null,8,["code"])]),item:withCtx(({props:U,item:H})=>[createVNode(_sfc_main$Y,mergeProps(U,{code:H.value}),null,16,["code"])]),_:1},8,["modelValue","items","label"])]),_:1})])]),_:1})]),_:1}))}});/*!
 * qrcode.vue v3.4.1
 * A Vue.js component to generate QRCode.
 *  2017-2023 @scopewu(https://github.com/scopewu)
 * MIT License.
 */var __assign=function(){return __assign=Object.assign||function(n){for(var _,x=1,E=arguments.length;x<E;x++){_=arguments[x];for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(n[S]=_[S])}return n},__assign.apply(this,arguments)};typeof SuppressedError=="function"&&SuppressedError;var qrcodegen;(function(t){var n=function(){function C(T,B,A,I){if(this.version=T,this.errorCorrectionLevel=B,this.modules=[],this.isFunction=[],T<C.MIN_VERSION||T>C.MAX_VERSION)throw new RangeError("Version value out of range");if(I<-1||I>7)throw new RangeError("Mask value out of range");this.size=T*4+17;for(var D=[],M=0;M<this.size;M++)D.push(!1);for(var M=0;M<this.size;M++)this.modules.push(D.slice()),this.isFunction.push(D.slice());this.drawFunctionPatterns();var V=this.addEccAndInterleave(A);if(this.drawCodewords(V),I==-1)for(var L=1e9,M=0;M<8;M++){this.applyMask(M),this.drawFormatBits(M);var F=this.getPenaltyScore();F<L&&(I=M,L=F),this.applyMask(M)}E(0<=I&&I<=7),this.mask=I,this.applyMask(I),this.drawFormatBits(I),this.isFunction=[]}return C.encodeText=function(T,B){var A=t.QrSegment.makeSegments(T);return C.encodeSegments(A,B)},C.encodeBinary=function(T,B){var A=t.QrSegment.makeBytes(T);return C.encodeSegments([A],B)},C.encodeSegments=function(T,B,A,I,D,M){if(A===void 0&&(A=1),I===void 0&&(I=40),D===void 0&&(D=-1),M===void 0&&(M=!0),!(C.MIN_VERSION<=A&&A<=I&&I<=C.MAX_VERSION)||D<-1||D>7)throw new RangeError("Invalid value");var V,L;for(V=A;;V++){var F=C.getNumDataCodewords(V,B)*8,j=S.getTotalBits(T,V);if(j<=F){L=j;break}if(V>=I)throw new RangeError("Data too long")}for(var U=0,H=[C.Ecc.MEDIUM,C.Ecc.QUARTILE,C.Ecc.HIGH];U<H.length;U++){var Y=H[U];M&&L<=C.getNumDataCodewords(V,Y)*8&&(B=Y)}for(var Z=[],ne=0,re=T;ne<re.length;ne++){var X=re[ne];_(X.mode.modeBits,4,Z),_(X.numChars,X.mode.numCharCountBits(V),Z);for(var ce=0,ue=X.getData();ce<ue.length;ce++){var _e=ue[ce];Z.push(_e)}}E(Z.length==L);var ye=C.getNumDataCodewords(V,B)*8;E(Z.length<=ye),_(0,Math.min(4,ye-Z.length),Z),_(0,(8-Z.length%8)%8,Z),E(Z.length%8==0);for(var ie=236;Z.length<ye;ie^=253)_(ie,8,Z);for(var W=[];W.length*8<Z.length;)W.push(0);return Z.forEach(function(O,z){return W[z>>>3]|=O<<7-(z&7)}),new C(V,B,W,D)},C.prototype.getModule=function(T,B){return 0<=T&&T<this.size&&0<=B&&B<this.size&&this.modules[B][T]},C.prototype.getModules=function(){return this.modules},C.prototype.drawFunctionPatterns=function(){for(var T=0;T<this.size;T++)this.setFunctionModule(6,T,T%2==0),this.setFunctionModule(T,6,T%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var B=this.getAlignmentPatternPositions(),A=B.length,T=0;T<A;T++)for(var I=0;I<A;I++)T==0&&I==0||T==0&&I==A-1||T==A-1&&I==0||this.drawAlignmentPattern(B[T],B[I]);this.drawFormatBits(0),this.drawVersion()},C.prototype.drawFormatBits=function(T){for(var B=this.errorCorrectionLevel.formatBits<<3|T,A=B,I=0;I<10;I++)A=A<<1^(A>>>9)*1335;var D=(B<<10|A)^21522;E(D>>>15==0);for(var I=0;I<=5;I++)this.setFunctionModule(8,I,x(D,I));this.setFunctionModule(8,7,x(D,6)),this.setFunctionModule(8,8,x(D,7)),this.setFunctionModule(7,8,x(D,8));for(var I=9;I<15;I++)this.setFunctionModule(14-I,8,x(D,I));for(var I=0;I<8;I++)this.setFunctionModule(this.size-1-I,8,x(D,I));for(var I=8;I<15;I++)this.setFunctionModule(8,this.size-15+I,x(D,I));this.setFunctionModule(8,this.size-8,!0)},C.prototype.drawVersion=function(){if(!(this.version<7)){for(var T=this.version,B=0;B<12;B++)T=T<<1^(T>>>11)*7973;var A=this.version<<12|T;E(A>>>18==0);for(var B=0;B<18;B++){var I=x(A,B),D=this.size-11+B%3,M=Math.floor(B/3);this.setFunctionModule(D,M,I),this.setFunctionModule(M,D,I)}}},C.prototype.drawFinderPattern=function(T,B){for(var A=-4;A<=4;A++)for(var I=-4;I<=4;I++){var D=Math.max(Math.abs(I),Math.abs(A)),M=T+I,V=B+A;0<=M&&M<this.size&&0<=V&&V<this.size&&this.setFunctionModule(M,V,D!=2&&D!=4)}},C.prototype.drawAlignmentPattern=function(T,B){for(var A=-2;A<=2;A++)for(var I=-2;I<=2;I++)this.setFunctionModule(T+I,B+A,Math.max(Math.abs(I),Math.abs(A))!=1)},C.prototype.setFunctionModule=function(T,B,A){this.modules[B][T]=A,this.isFunction[B][T]=!0},C.prototype.addEccAndInterleave=function(T){var B=this.version,A=this.errorCorrectionLevel;if(T.length!=C.getNumDataCodewords(B,A))throw new RangeError("Invalid argument");for(var I=C.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][B],D=C.ECC_CODEWORDS_PER_BLOCK[A.ordinal][B],M=Math.floor(C.getNumRawDataModules(B)/8),V=I-M%I,L=Math.floor(M/I),F=[],j=C.reedSolomonComputeDivisor(D),U=0,H=0;U<I;U++){var Y=T.slice(H,H+L-D+(U<V?0:1));H+=Y.length;var Z=C.reedSolomonComputeRemainder(Y,j);U<V&&Y.push(0),F.push(Y.concat(Z))}for(var ne=[],re=function(X){F.forEach(function(ce,ue){(X!=L-D||ue>=V)&&ne.push(ce[X])})},U=0;U<F[0].length;U++)re(U);return E(ne.length==M),ne},C.prototype.drawCodewords=function(T){if(T.length!=Math.floor(C.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var B=0,A=this.size-1;A>=1;A-=2){A==6&&(A=5);for(var I=0;I<this.size;I++)for(var D=0;D<2;D++){var M=A-D,V=(A+1&2)==0,L=V?this.size-1-I:I;!this.isFunction[L][M]&&B<T.length*8&&(this.modules[L][M]=x(T[B>>>3],7-(B&7)),B++)}}E(B==T.length*8)},C.prototype.applyMask=function(T){if(T<0||T>7)throw new RangeError("Mask value out of range");for(var B=0;B<this.size;B++)for(var A=0;A<this.size;A++){var I=void 0;switch(T){case 0:I=(A+B)%2==0;break;case 1:I=B%2==0;break;case 2:I=A%3==0;break;case 3:I=(A+B)%3==0;break;case 4:I=(Math.floor(A/3)+Math.floor(B/2))%2==0;break;case 5:I=A*B%2+A*B%3==0;break;case 6:I=(A*B%2+A*B%3)%2==0;break;case 7:I=((A+B)%2+A*B%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[B][A]&&I&&(this.modules[B][A]=!this.modules[B][A])}},C.prototype.getPenaltyScore=function(){for(var T=0,B=0;B<this.size;B++){for(var A=!1,I=0,D=[0,0,0,0,0,0,0],M=0;M<this.size;M++)this.modules[B][M]==A?(I++,I==5?T+=C.PENALTY_N1:I>5&&T++):(this.finderPenaltyAddHistory(I,D),A||(T+=this.finderPenaltyCountPatterns(D)*C.PENALTY_N3),A=this.modules[B][M],I=1);T+=this.finderPenaltyTerminateAndCount(A,I,D)*C.PENALTY_N3}for(var M=0;M<this.size;M++){for(var A=!1,V=0,D=[0,0,0,0,0,0,0],B=0;B<this.size;B++)this.modules[B][M]==A?(V++,V==5?T+=C.PENALTY_N1:V>5&&T++):(this.finderPenaltyAddHistory(V,D),A||(T+=this.finderPenaltyCountPatterns(D)*C.PENALTY_N3),A=this.modules[B][M],V=1);T+=this.finderPenaltyTerminateAndCount(A,V,D)*C.PENALTY_N3}for(var B=0;B<this.size-1;B++)for(var M=0;M<this.size-1;M++){var L=this.modules[B][M];L==this.modules[B][M+1]&&L==this.modules[B+1][M]&&L==this.modules[B+1][M+1]&&(T+=C.PENALTY_N2)}for(var F=0,j=0,U=this.modules;j<U.length;j++){var H=U[j];F=H.reduce(function(ne,re){return ne+(re?1:0)},F)}var Y=this.size*this.size,Z=Math.ceil(Math.abs(F*20-Y*10)/Y)-1;return E(0<=Z&&Z<=9),T+=Z*C.PENALTY_N4,E(0<=T&&T<=2568888),T},C.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var T=Math.floor(this.version/7)+2,B=this.version==32?26:Math.ceil((this.version*4+4)/(T*2-2))*2,A=[6],I=this.size-7;A.length<T;I-=B)A.splice(1,0,I);return A},C.getNumRawDataModules=function(T){if(T<C.MIN_VERSION||T>C.MAX_VERSION)throw new RangeError("Version number out of range");var B=(16*T+128)*T+64;if(T>=2){var A=Math.floor(T/7)+2;B-=(25*A-10)*A-55,T>=7&&(B-=36)}return E(208<=B&&B<=29648),B},C.getNumDataCodewords=function(T,B){return Math.floor(C.getNumRawDataModules(T)/8)-C.ECC_CODEWORDS_PER_BLOCK[B.ordinal][T]*C.NUM_ERROR_CORRECTION_BLOCKS[B.ordinal][T]},C.reedSolomonComputeDivisor=function(T){if(T<1||T>255)throw new RangeError("Degree out of range");for(var B=[],A=0;A<T-1;A++)B.push(0);B.push(1);for(var I=1,A=0;A<T;A++){for(var D=0;D<B.length;D++)B[D]=C.reedSolomonMultiply(B[D],I),D+1<B.length&&(B[D]^=B[D+1]);I=C.reedSolomonMultiply(I,2)}return B},C.reedSolomonComputeRemainder=function(T,B){for(var A=B.map(function(L){return 0}),I=function(L){var F=L^A.shift();A.push(0),B.forEach(function(j,U){return A[U]^=C.reedSolomonMultiply(j,F)})},D=0,M=T;D<M.length;D++){var V=M[D];I(V)}return A},C.reedSolomonMultiply=function(T,B){if(T>>>8||B>>>8)throw new RangeError("Byte out of range");for(var A=0,I=7;I>=0;I--)A=A<<1^(A>>>7)*285,A^=(B>>>I&1)*T;return E(A>>>8==0),A},C.prototype.finderPenaltyCountPatterns=function(T){var B=T[1];E(B<=this.size*3);var A=B>0&&T[2]==B&&T[3]==B*3&&T[4]==B&&T[5]==B;return(A&&T[0]>=B*4&&T[6]>=B?1:0)+(A&&T[6]>=B*4&&T[0]>=B?1:0)},C.prototype.finderPenaltyTerminateAndCount=function(T,B,A){return T&&(this.finderPenaltyAddHistory(B,A),B=0),B+=this.size,this.finderPenaltyAddHistory(B,A),this.finderPenaltyCountPatterns(A)},C.prototype.finderPenaltyAddHistory=function(T,B){B[0]==0&&(T+=this.size),B.pop(),B.unshift(T)},C.MIN_VERSION=1,C.MAX_VERSION=40,C.PENALTY_N1=3,C.PENALTY_N2=3,C.PENALTY_N3=40,C.PENALTY_N4=10,C.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],C.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],C}();t.QrCode=n;function _(C,T,B){if(T<0||T>31||C>>>T)throw new RangeError("Value out of range");for(var A=T-1;A>=0;A--)B.push(C>>>A&1)}function x(C,T){return(C>>>T&1)!=0}function E(C){if(!C)throw new Error("Assertion error")}var S=function(){function C(T,B,A){if(this.mode=T,this.numChars=B,this.bitData=A,B<0)throw new RangeError("Invalid argument");this.bitData=A.slice()}return C.makeBytes=function(T){for(var B=[],A=0,I=T;A<I.length;A++){var D=I[A];_(D,8,B)}return new C(C.Mode.BYTE,T.length,B)},C.makeNumeric=function(T){if(!C.isNumeric(T))throw new RangeError("String contains non-numeric characters");for(var B=[],A=0;A<T.length;){var I=Math.min(T.length-A,3);_(parseInt(T.substring(A,A+I),10),I*3+1,B),A+=I}return new C(C.Mode.NUMERIC,T.length,B)},C.makeAlphanumeric=function(T){if(!C.isAlphanumeric(T))throw new RangeError("String contains unencodable characters in alphanumeric mode");var B=[],A;for(A=0;A+2<=T.length;A+=2){var I=C.ALPHANUMERIC_CHARSET.indexOf(T.charAt(A))*45;I+=C.ALPHANUMERIC_CHARSET.indexOf(T.charAt(A+1)),_(I,11,B)}return A<T.length&&_(C.ALPHANUMERIC_CHARSET.indexOf(T.charAt(A)),6,B),new C(C.Mode.ALPHANUMERIC,T.length,B)},C.makeSegments=function(T){return T==""?[]:C.isNumeric(T)?[C.makeNumeric(T)]:C.isAlphanumeric(T)?[C.makeAlphanumeric(T)]:[C.makeBytes(C.toUtf8ByteArray(T))]},C.makeEci=function(T){var B=[];if(T<0)throw new RangeError("ECI assignment value out of range");if(T<128)_(T,8,B);else if(T<16384)_(2,2,B),_(T,14,B);else if(T<1e6)_(6,3,B),_(T,21,B);else throw new RangeError("ECI assignment value out of range");return new C(C.Mode.ECI,0,B)},C.isNumeric=function(T){return C.NUMERIC_REGEX.test(T)},C.isAlphanumeric=function(T){return C.ALPHANUMERIC_REGEX.test(T)},C.prototype.getData=function(){return this.bitData.slice()},C.getTotalBits=function(T,B){for(var A=0,I=0,D=T;I<D.length;I++){var M=D[I],V=M.mode.numCharCountBits(B);if(M.numChars>=1<<V)return 1/0;A+=4+V+M.bitData.length}return A},C.toUtf8ByteArray=function(T){T=encodeURI(T);for(var B=[],A=0;A<T.length;A++)T.charAt(A)!="%"?B.push(T.charCodeAt(A)):(B.push(parseInt(T.substring(A+1,A+3),16)),A+=2);return B},C.NUMERIC_REGEX=/^[0-9]*$/,C.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,C.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",C}();t.QrSegment=S})(qrcodegen||(qrcodegen={}));(function(t){(function(n){var _=function(){function x(E,S){this.ordinal=E,this.formatBits=S}return x.LOW=new x(0,1),x.MEDIUM=new x(1,0),x.QUARTILE=new x(2,3),x.HIGH=new x(3,2),x}();n.Ecc=_})(t.QrCode||(t.QrCode={}))})(qrcodegen||(qrcodegen={}));(function(t){(function(n){var _=function(){function x(E,S){this.modeBits=E,this.numBitsCharCount=S}return x.prototype.numCharCountBits=function(E){return this.numBitsCharCount[Math.floor((E+7)/17)]},x.NUMERIC=new x(1,[10,12,14]),x.ALPHANUMERIC=new x(2,[9,11,13]),x.BYTE=new x(4,[8,16,16]),x.KANJI=new x(8,[8,10,12]),x.ECI=new x(7,[0,0,0]),x}();n.Mode=_})(t.QrSegment||(t.QrSegment={}))})(qrcodegen||(qrcodegen={}));var QR=qrcodegen,defaultErrorCorrectLevel="H",ErrorCorrectLevelMap={L:QR.QrCode.Ecc.LOW,M:QR.QrCode.Ecc.MEDIUM,Q:QR.QrCode.Ecc.QUARTILE,H:QR.QrCode.Ecc.HIGH},SUPPORTS_PATH2D=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function validErrorCorrectLevel(t){return t in ErrorCorrectLevelMap}function generatePath(t,n){n===void 0&&(n=0);var _=[];return t.forEach(function(x,E){var S=null;x.forEach(function(C,T){if(!C&&S!==null){_.push("M".concat(S+n," ").concat(E+n,"h").concat(T-S,"v1H").concat(S+n,"z")),S=null;return}if(T===x.length-1){if(!C)return;S===null?_.push("M".concat(T+n,",").concat(E+n," h1v1H").concat(T+n,"z")):_.push("M".concat(S+n,",").concat(E+n," h").concat(T+1-S,"v1H").concat(S+n,"z"));return}C&&S===null&&(S=T)})}),_.join("")}var QRCodeProps={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:defaultErrorCorrectLevel,validator:function(t){return validErrorCorrectLevel(t)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0}},QRCodeVueProps=__assign(__assign({},QRCodeProps),{renderAs:{type:String,required:!1,default:"canvas",validator:function(t){return["canvas","svg"].indexOf(t)>-1}}}),QRCodeSvg=defineComponent$1({name:"QRCodeSvg",props:QRCodeProps,setup:function(t){var n=ref$1(0),_=ref$1(""),x=function(){var E=t.value,S=t.level,C=t.margin,T=QR.QrCode.encodeText(E,ErrorCorrectLevelMap[S]).getModules();n.value=T.length+C*2,_.value=generatePath(T,C)};return x(),onUpdated(x),function(){return h$1("svg",{width:t.size,height:t.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(n.value," ").concat(n.value)},[h$1("path",{fill:t.background,d:"M0,0 h".concat(n.value,"v").concat(n.value,"H0z")}),h$1("path",{fill:t.foreground,d:_.value})])}}}),QRCodeCanvas=defineComponent$1({name:"QRCodeCanvas",props:QRCodeProps,setup:function(t){var n=ref$1(null),_=function(){var x=t.value,E=t.level,S=t.size,C=t.margin,T=t.background,B=t.foreground,A=n.value;if(A){var I=A.getContext("2d");if(I){var D=QR.QrCode.encodeText(x,ErrorCorrectLevelMap[E]).getModules(),M=D.length+C*2,V=window.devicePixelRatio||1,L=S/M*V;A.height=A.width=S*V,I.scale(L,L),I.fillStyle=T,I.fillRect(0,0,M,M),I.fillStyle=B,SUPPORTS_PATH2D?I.fill(new Path2D(generatePath(D,C))):D.forEach(function(F,j){F.forEach(function(U,H){U&&I.fillRect(H+C,j+C,1,1)})})}}};return onMounted(_),onUpdated(_),function(){return h$1("canvas",{ref:n,style:{width:"".concat(t.size,"px"),height:"".concat(t.size,"px")}})}}}),QrcodeVue=defineComponent$1({name:"Qrcode",render:function(){var t=this.$props,n=t.renderAs,_=t.value,x=t.size,E=t.margin,S=t.level,C=t.background,T=t.foreground,B=x>>>0,A=E>>>0,I=validErrorCorrectLevel(S)?S:defaultErrorCorrectLevel;return h$1(n==="svg"?QRCodeSvg:QRCodeCanvas,{value:_,size:B,margin:A,level:I,background:C,foreground:T})},props:QRCodeVueProps});const _hoisted_1$q={class:"mx-auto",style:{display:"flex","justify-content":"center","align-items":"center","border-radius":"15px",border:"2px solid #1867c0",width:"250px",height:"50px"}},_hoisted_2$i={class:"text-h3",style:{color:"#1867c0"}},_hoisted_3$a={class:"mx-auto mb-2",style:{display:"flex","align-items":"center","justify-content":"center"}},_sfc_main$V=defineComponent$1({__name:"InviterDispositif",setup(t){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{mdAndUp:E}=useDisplay(),{isRtl:S}=useRtl(),C=ref$1(!1);watchEffect(async()=>{C.value||await re()});const T=ref$1(0),B=["cheminement","manuelle","codeR2"],A=ref$1(),I=()=>{A.value="manuelle",T.value=B.indexOf("manuelle")},D=()=>{A.value="codeR2",T.value=B.indexOf("codeR2")},M=computed(()=>{switch(B[T.value]){case"cheminement":return x("dispositifs.inviter.titreCheminement");case"manuelle":return x("dispositifs.inviter.titreManuelle");case"codeR2":return x("dispositifs.inviter.titreCodeR2");default:return""}}),V=computed(()=>{switch(B[T.value]){case"cheminement":return x("dispositifs.inviter.sousTitreCheminement");case"manuelle":return x("dispositifs.inviter.sousTitreManuelle");case"codeR2":return x("dispositifs.inviter.sousTitreCodeR2");default:return""}}),L=()=>{switch(B[T.value]){default:T.value++;break}},F=()=>{switch(B[T.value]){case"manuelle":case"codeR2":T.value=B.indexOf("cheminement");break;default:T.value--;break}},j=computed(()=>{switch(B[T.value]){case"cheminement":case"manuelle":case"codeR2":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),U=computed(()=>{switch(B[T.value]){case"cheminement":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),H=ref$1(!1),Y=ref$1(),Z=async()=>{H.value=!0,Y.value=await n?.gnrerInvitationRejoindreCompte(),H.value=!1},ne=computed(()=>{if(Y.value)return JSON.stringify(Y.value)}),re=async()=>{Y.value=void 0};return(X,ce)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":ce[8]||(ce[8]=ue=>C.value=ue)},{activator:withCtx(({props:ue})=>[renderSlot(X.$slots,"activator",normalizeProps(guardReactiveProps({props:ue})),void 0,!0)]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(E)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(M.value)+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:ce[0]||(ce[0]=ue=>C.value=!1)})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(V.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:T.value,"onUpdate:modelValue":ce[7]||(ce[7]=ue=>T.value=ue),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{title:unref(x)("dispositifs.inviter.manuellement"),"append-icon":unref(S)?"mdi-chevron-left":"mdi-chevron-right","prepend-icon":"mdi-pencil",onClick:ce[1]||(ce[1]=()=>I())},null,8,["title","append-icon"]),createVNode(VListItem,{title:unref(x)("dispositifs.inviter.codeR2"),"append-icon":unref(S)?"mdi-chevron-left":"mdi-chevron-right","prepend-icon":"mdi-qrcode",onClick:ce[2]||(ce[2]=()=>D())},null,8,["title","append-icon"])]),_:1})]),_:1}),createVNode(VWindowItem,{value:1,class:"text-center"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$q,[createBaseVNode("p",_hoisted_2$i,toDisplayString$1((Y.value?.codeSecret||"---").slice(2,9)),1)]),ne.value?(openBlock(),createBlock(VBtn,{key:1,class:"mt-2",text:unref(x)("dispositifs.inviter.annulerInvitation"),variant:"outlined","append-icon":"mdi-cancel",onClick:ce[4]||(ce[4]=()=>re())},null,8,["text"])):(openBlock(),createBlock(VBtn,{key:0,class:"mt-2",text:unref(x)("dispositifs.inviter.gnrerInvitation"),loading:H.value,variant:"outlined","append-icon":"mdi-reload",onClick:ce[3]||(ce[3]=()=>Z())},null,8,["text","loading"]))]),_:1}),createVNode(VWindowItem,{value:2,class:"text-center"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$a,[createVNode(QrcodeVue,{value:ne.value,size:200,level:"H"},null,8,["value"]),createBaseVNode("div",{class:normalizeClass({fond:!ne.value}),style:{position:"fixed",height:"200px",width:"200px"}},null,2)]),ne.value?(openBlock(),createBlock(VBtn,{key:1,class:"mt-2",text:unref(x)("dispositifs.inviter.annulerInvitation"),variant:"outlined","append-icon":"mdi-cancel",onClick:ce[6]||(ce[6]=()=>re())},null,8,["text"])):(openBlock(),createBlock(VBtn,{key:0,class:"mt-2",text:unref(x)("dispositifs.inviter.gnrerInvitation"),loading:H.value,variant:"outlined","append-icon":"mdi-reload",onClick:ce[5]||(ce[5]=()=>Z())},null,8,["text","loading"]))]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!U.value.actif,onClick:F},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,U.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!j.value.actif,onClick:L},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,j.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),InviterDispositif_vue_vue_type_style_index_0_scoped_f7017b11_lang="",InviterDispositif=_export_sfc(_sfc_main$V,[["__scopeId","data-v-f7017b11"]]),_hoisted_1$p={class:"text-error"},_hoisted_2$h={class:"text-error font-weight-bold"},_sfc_main$U=defineComponent$1({__name:"RejoindreCompte",setup(t){const n=inject$1("constl"),{mdAndUp:_}=useDisplay(),{useI18n:x}=_(),{t:E}=x(),S=ref$1(!1),C=ref$1(),T=ref$1(),B=async()=>{!C.value||!T.value||await n?.demanderEtPuisRejoindreCompte({idCompte:C.value,codeSecret:T.value})};return(A,I)=>(openBlock(),createBlock(VDialog,{modelValue:S.value,"onUpdate:modelValue":I[1]||(I[1]=D=>S.value=D)},{activator:withCtx(({props:D})=>[renderSlot(A.$slots,"activator",normalizeProps(guardReactiveProps({props:D})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(_)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$p,toDisplayString$1(unref(E)("compte.rejoindreCompte.titre")),1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:I[0]||(I[0]=D=>S.value=!1)})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,null,{default:withCtx(()=>[createVNode(VWindowItem,null,{default:withCtx(()=>[createBaseVNode("span",_hoisted_2$h,toDisplayString$1(unref(E)("compte.rejoindreCompte.avertissement")),1),createTextVNode(" "+toDisplayString$1(unref(E)("compte.rejoindreCompte.explication")),1)]),_:1}),createVNode(VWindowItem,null,{default:withCtx(()=>[createVNode(VBtn,{onClick:B})]),_:1})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardActions)]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$o={class:"text-error"},_hoisted_2$g={class:"text-error font-weight-bold"},_sfc_main$T=defineComponent$1({__name:"FermerCompte",setup(t){const n=inject$1("constl"),{mdAndUp:_}=useDisplay(),{useI18n:x}=_(),{t:E}=x(),S=ref$1(!1),C=ref$1(!1),T=async()=>{C.value=!0,await n?.effacerDispositif(),S.value=!1,C.value=!1,location.reload()};return(B,A)=>(openBlock(),createBlock(VDialog,{modelValue:S.value,"onUpdate:modelValue":A[2]||(A[2]=I=>S.value=I)},{activator:withCtx(({props:I})=>[renderSlot(B.$slots,"activator",normalizeProps(guardReactiveProps({props:I})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(_)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$o,toDisplayString$1(unref(E)("compte.effacerCompte.titre")),1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:A[0]||(A[0]=I=>S.value=!1)})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("span",_hoisted_2$g,toDisplayString$1(unref(E)("compte.effacerCompte.avertissement")),1),createTextVNode(" "+toDisplayString$1(unref(E)("compte.effacerCompte.explication")),1)]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:A[1]||(A[1]=I=>S.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.annuler")),1)]),_:1}),createVNode(VBtn,{color:"error",variant:"flat","append-icon":"mdi-delete",loading:C.value,onClick:T},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("compte.effacerCompte.btnEffacer")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$S=defineComponent$1({__name:"ExporterCompte",setup(t){const n=inject$1("constl"),{mdAndUp:_}=useDisplay(),{useI18n:x}=_(),{t:E}=x(),S=ref$1(!1),C=async()=>{await n?.exporterDispositif({nomFichier:`Mon compte Constellation ${Date.now().toLocaleString()}.zip`})};return(T,B)=>(openBlock(),createBlock(VDialog,{modelValue:S.value,"onUpdate:modelValue":B[2]||(B[2]=A=>S.value=A)},{activator:withCtx(({props:A})=>[renderSlot(T.$slots,"activator",normalizeProps(guardReactiveProps({props:A})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(_)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(E)("compte.exporterCompte.titre")),1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:B[0]||(B[0]=A=>S.value=!1)})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VBtn,{"append-icon":"mdi-download",variant:"outlined",onClick:C},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("compte.exporterCompte.exporter")),1)]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:B[1]||(B[1]=A=>S.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.annuler")),1)]),_:1})]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$n={class:"px-0 mb-0 text-h6"},_hoisted_2$f={class:"px-0 mb-0 text-h6"},_sfc_main$R=defineComponent$1({__name:"OngletCompte",setup(t){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{mdAndUp:E}=useDisplay(),S=ref$1();enregistrercoute(n?.suivreDispositifs({f:T=>S.value=T}));const C=ref$1();return enregistrercoute(n?.rseau?.suivreConnexionsDispositifs({f:T=>C.value=T})),(T,B)=>(openBlock(),createBlock(VCard,{class:"text-start"},{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$n,toDisplayString$1(unref(x)("pages.compte.compte.mesDispositifs")),1),createVNode(VDivider),createVNode(VList,null,{default:withCtx(()=>[createVNode(InviterDispositif,null,{activator:withCtx(({props:A})=>[createVNode(VListItem,mergeProps(A,{"prepend-icon":"mdi-plus",title:unref(x)("dispositifs.ajouter")}),null,16,["title"])]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(S.value,A=>(openBlock(),createBlock(_sfc_main$1N,{key:A,"id-dispositif":A,"vu-a":C.value?.find(I=>I.infoDispositif.idDispositif===A)?.vu},null,8,["id-dispositif","vu-a"]))),128))]),_:1}),createBaseVNode("p",_hoisted_2$f,toDisplayString$1(unref(x)("pages.compte.compte.optionsAvances")),1),createVNode(VCard,{variant:"outlined"},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,null,{append:withCtx(()=>[createVNode(_sfc_main$S,null,{activator:withCtx(({props:A})=>[unref(E)?(openBlock(),createBlock(VBtn,mergeProps({key:0},A,{"append-icon":"mdi-download",variant:"outlined"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.btnExporterCompte")),1)]),_:2},1040)):(openBlock(),createBlock(VBtn,mergeProps({key:1},A,{icon:"mdi-download",variant:"outlined",size:"small"}),null,16))]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.titreExporterCompte")),1)]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.sousTitreExporterCompte")),1)]),_:1})]),_:1}),createVNode(VDivider,{class:"my-2"}),createVNode(VListItem,null,{append:withCtx(()=>[createVNode(_sfc_main$U,null,{activator:withCtx(({props:A})=>[unref(E)?(openBlock(),createBlock(VBtn,mergeProps({key:0},A,{"append-icon":"mdi-account-plus-outline",variant:"outlined"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.btnRejoindreCompte")),1)]),_:2},1040)):(openBlock(),createBlock(VBtn,mergeProps({key:1},A,{icon:"mdi-account-plus-outline",variant:"outlined",size:"small"}),null,16))]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.titreRejoindreCompte")),1)]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.sousTitreRejoindreCompte")),1)]),_:1})]),_:1}),createVNode(VDivider,{class:"my-2"}),createVNode(VListItem,{class:"text-error"},{append:withCtx(()=>[createVNode(_sfc_main$T,null,{activator:withCtx(({props:A})=>[unref(E)?(openBlock(),createBlock(VBtn,mergeProps({key:0},A,{"append-icon":"mdi-delete",variant:"outlined"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.btnEffacerCompte")),1)]),_:2},1040)):(openBlock(),createBlock(VBtn,mergeProps({key:1},A,{icon:"mdi-delete",variant:"outlined",size:"small"}),null,16))]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.titreEffacerCompte")),1)]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.compte.sousTitreEffacerCompte")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),_hoisted_1$m={class:"mb-4"},_sfc_main$Q=defineComponent$1({__name:"NouvelleInfoContact",props:{dejaPresents:{}},setup(t){const n=t,{mdAndUp:_}=useDisplay(),x=inject$1("constl"),{useI18n:E}=_(),{t:S}=E(),C=ref$1(!1),T=ref$1(),B=ref$1(),A=ref$1(),I=ref$1(!1),D=computed(()=>[...["courriel","siteInternet","tlphone","tlgramme","whatsapp"].filter(F=>!n.dejaPresents.includes(F)),"autre"]),M=computed(()=>{if(!T.value||!B.value)return;const F=B.value==="autre"?A.value:B.value;if(F)return{valeur:T.value,type:F}}),V=async()=>{I.value=!0,M.value&&(await x?.profil.sauvegarderContact({type:M.value.type,contact:M.value.valeur}),I.value=!1,L())},L=()=>{C.value=!1,T.value=void 0,A.value=void 0,B.value=void 0};return(F,j)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":j[3]||(j[3]=U=>C.value=U),"max-width":unref(_)?500:300},{activator:withCtx(({props:U})=>[renderSlot(F.$slots,"activator",normalizeProps(guardReactiveProps({props:U})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("membres.nouvelleInfoContact.titre")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$m,[createVNode(VIcon,{color:"warning",icon:"mdi-alert-circle-outline"}),createTextVNode(" "+toDisplayString$1(unref(S)("membres.nouvelleInfoContact.avertissement")),1)]),createVNode(VSelect,{modelValue:B.value,"onUpdate:modelValue":j[0]||(j[0]=U=>B.value=U),variant:"outlined",items:D.value,label:unref(S)("membres.nouvelleInfoContact.indiceType")},{item:withCtx(({item:U,props:H})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(H)),{prepend:withCtx(()=>[createVNode(VIcon,{icon:unref(obtIcneContact)({type:U.title})},null,8,["icon"])]),title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)(`membres.contact.${U.title}`)),1)]),_:2},1040)]),selection:withCtx(({item:U})=>[createVNode(VIcon,{icon:unref(obtIcneContact)({type:U.title}),start:""},null,8,["icon"]),createTextVNode(" "+toDisplayString$1(unref(S)(`membres.contact.${U.title}`)),1)]),_:1},8,["modelValue","items","label"]),createVNode(VExpandTransition,null,{default:withCtx(()=>[withDirectives(createVNode(VTextField,{modelValue:A.value,"onUpdate:modelValue":j[1]||(j[1]=U=>A.value=U),label:unref(S)("membres.nouvelleInfoContact.indiceAutreType"),variant:"outlined"},null,8,["modelValue","label"]),[[vShow,B.value==="autre"]])]),_:1}),createVNode(VTextField,{modelValue:T.value,"onUpdate:modelValue":j[2]||(j[2]=U=>T.value=U),variant:"outlined",disabled:!B.value,label:unref(S)("membres.nouvelleInfoContact.valeur"),"prepend-inner-icon":B.value?unref(obtIcneContact)({type:B.value}):void 0},null,8,["modelValue","disabled","label","prepend-inner-icon"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:L},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1}),createVNode(VBtn,{variant:"outlined",color:"primary",disabled:!M.value,loading:I.value,onClick:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1})]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_hoisted_1$l={class:"mb-4"},_sfc_main$P=defineComponent$1({__name:"ModifierInfoContactMembre",props:{type:{},valeurAvant:{}},setup(t){const n=t,{mdAndUp:_}=useDisplay(),x=inject$1("constl"),{useI18n:E}=_(),{t:S}=E(),C=ref$1(!1),T=ref$1(n.valeurAvant),B=ref$1(!1);watchEffect(()=>{T.value=n.valeurAvant});const A=computed(()=>{if(T.value)return{valeur:T.value,type:n.type}}),I=async()=>{B.value=!0,A.value&&(await x?.profil.sauvegarderContact({type:A.value.type,contact:A.value.valeur}),B.value=!1,M())},D=async()=>{await x?.profil.effacerContact({type:n.type,contact:n.valeurAvant})},M=()=>{C.value=!1};return(V,L)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":L[1]||(L[1]=F=>C.value=F),"max-width":unref(_)?500:300},{activator:withCtx(({props:F})=>[renderSlot(V.$slots,"activator",normalizeProps(guardReactiveProps({props:F})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("membres.modifierInfoContact.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"small",onClick:M})]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$l,[createVNode(VIcon,{color:"warning",icon:"mdi-alert-circle-outline"}),createTextVNode(" "+toDisplayString$1(unref(S)("membres.nouvelleInfoContact.avertissement")),1)]),createVNode(VTextField,{modelValue:T.value,"onUpdate:modelValue":L[0]||(L[0]=F=>T.value=F),variant:"outlined",label:unref(S)("membres.nouvelleInfoContact.valeur"),"prepend-inner-icon":V.type?unref(obtIcneContact)({type:V.type}):void 0},null,8,["modelValue","label","prepend-inner-icon"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",color:"error",onClick:D},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.effacer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-delete")]),_:1})]),_:1}),createVNode(VBtn,{variant:"outlined",color:"primary",disabled:!A.value,loading:B.value,onClick:I},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-check")]),_:1})]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),VTabs$1="",VTab$1="",VTabsSymbol=Symbol.for("vuetify:v-tabs"),makeVTabProps=propsFactory({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...omit(makeVBtnProps({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),VTab=genericComponent()({name:"VTab",props:makeVTabProps(),setup(t,n){let{slots:_,attrs:x}=n;const{textColorClasses:E,textColorStyles:S}=useTextColor(t,"sliderColor"),C=computed(()=>t.direction==="horizontal"),T=shallowRef(!1),B=ref$1(),A=ref$1();function I(D){let{value:M}=D;if(T.value=M,M){const V=B.value?.$el.parentElement?.querySelector(".v-tab--selected .v-tab__slider"),L=A.value;if(!V||!L)return;const F=getComputedStyle(V).color,j=V.getBoundingClientRect(),U=L.getBoundingClientRect(),H=C.value?"x":"y",Y=C.value?"X":"Y",Z=C.value?"right":"bottom",ne=C.value?"width":"height",re=j[H],X=U[H],ce=re>X?j[Z]-U[Z]:j[H]-U[H],ue=Math.sign(ce)>0?C.value?"right":"bottom":Math.sign(ce)<0?C.value?"left":"top":"center",ye=(Math.abs(ce)+(Math.sign(ce)<0?j[ne]:U[ne]))/Math.max(j[ne],U[ne]),ie=j[ne]/U[ne],W=1.5;animate(L,{backgroundColor:[F,"currentcolor"],transform:[`translate${Y}(${ce}px) scale${Y}(${ie})`,`translate${Y}(${ce/W}px) scale${Y}(${(ye-1)/W+1})`,"none"],transformOrigin:Array(3).fill(ue)},{duration:225,easing:standardEasing})}}return useRender(()=>{const[D]=VBtn.filterProps(t);return createVNode(VBtn,mergeProps({symbol:VTabsSymbol,ref:B,class:["v-tab",t.class],style:t.style,tabindex:T.value?0:-1,role:"tab","aria-selected":String(T.value),active:!1,block:t.fixed,maxWidth:t.fixed?300:void 0,rounded:0},D,x,{"onGroup:selected":I}),{default:()=>[_.default?.()??t.text,!t.hideSlider&&createVNode("div",{ref:A,class:["v-tab__slider",E.value],style:S.value},null)]})}),{}}}),VSlideGroup$1="";function bias(t){const _=Math.abs(t);return Math.sign(t)*(_/((1/.501-2)*(1-_)+1))}function calculateUpdatedOffset(t){let{selectedElement:n,containerSize:_,contentSize:x,isRtl:E,currentScrollOffset:S,isHorizontal:C}=t;const T=C?n.clientWidth:n.clientHeight,B=C?n.offsetLeft:n.offsetTop,A=E&&C?x-B-T:B,I=_+S,D=T+A,M=T*.4;return A<=S?S=Math.max(A-M,0):I<=D&&(S=Math.min(S-(I-D-M),x-_)),S}function calculateCenteredOffset(t){let{selectedElement:n,containerSize:_,contentSize:x,isRtl:E,isHorizontal:S}=t;const C=S?n.clientWidth:n.clientHeight,T=S?n.offsetLeft:n.offsetTop,B=E&&S?x-T-C/2-_/2:T+C/2-_/2;return Math.min(x-_,Math.max(0,B))}const VSlideGroupSymbol=Symbol.for("vuetify:v-slide-group"),makeVSlideGroupProps=propsFactory({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:VSlideGroupSymbol},nextIcon:{type:IconValue,default:"$next"},prevIcon:{type:IconValue,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...makeComponentProps(),...makeTagProps(),...makeGroupProps({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),VSlideGroup=genericComponent()({name:"VSlideGroup",props:makeVSlideGroupProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{slots:_}=n;const{isRtl:x}=useRtl(),{mobile:E}=useDisplay(),S=useGroup(t,t.symbol),C=shallowRef(!1),T=shallowRef(0),B=shallowRef(0),A=shallowRef(0),I=computed(()=>t.direction==="horizontal"),{resizeRef:D,contentRect:M}=useResizeObserver(),{resizeRef:V,contentRect:L}=useResizeObserver(),F=computed(()=>S.selected.value.length?S.items.value.findIndex(se=>se.id===S.selected.value[0]):-1),j=computed(()=>S.selected.value.length?S.items.value.findIndex(se=>se.id===S.selected.value[S.selected.value.length-1]):-1);if(IN_BROWSER){let se=-1;watch(()=>[S.selected.value,M.value,L.value,I.value],()=>{cancelAnimationFrame(se),se=requestAnimationFrame(()=>{if(M.value&&L.value){const G=I.value?"width":"height";B.value=M.value[G],A.value=L.value[G],C.value=B.value+1<A.value}if(F.value>=0&&V.value){const G=V.value.children[j.value];F.value===0||!C.value?T.value=0:t.centerActive?T.value=calculateCenteredOffset({selectedElement:G,containerSize:B.value,contentSize:A.value,isRtl:x.value,isHorizontal:I.value}):C.value&&(T.value=calculateUpdatedOffset({selectedElement:G,containerSize:B.value,contentSize:A.value,isRtl:x.value,currentScrollOffset:T.value,isHorizontal:I.value}))}})})}const U=shallowRef(!1);let H=0,Y=0;function Z(se){const G=I.value?"clientX":"clientY";Y=(x.value&&I.value?-1:1)*T.value,H=se.touches[0][G],U.value=!0}function ne(se){if(!C.value)return;const G=I.value?"clientX":"clientY",q=x.value&&I.value?-1:1;T.value=q*(Y+H-se.touches[0][G])}function re(se){const G=A.value-B.value;T.value<0||!C.value?T.value=0:T.value>=G&&(T.value=G),U.value=!1}function X(){D.value&&(D.value[I.value?"scrollLeft":"scrollTop"]=0)}const ce=shallowRef(!1);function ue(se){if(ce.value=!0,!(!C.value||!V.value)){for(const G of se.composedPath())for(const q of V.value.children)if(q===G){T.value=calculateUpdatedOffset({selectedElement:q,containerSize:B.value,contentSize:A.value,isRtl:x.value,currentScrollOffset:T.value,isHorizontal:I.value});return}}}function _e(se){ce.value=!1}function ye(se){!ce.value&&!(se.relatedTarget&&V.value?.contains(se.relatedTarget))&&W()}function ie(se){V.value&&(I.value?se.key==="ArrowRight"?W(x.value?"prev":"next"):se.key==="ArrowLeft"&&W(x.value?"next":"prev"):se.key==="ArrowDown"?W("next"):se.key==="ArrowUp"&&W("prev"),se.key==="Home"?W("first"):se.key==="End"&&W("last"))}function W(se){if(V.value)if(!se)focusableChildren(V.value)[0]?.focus();else if(se==="next"){const G=V.value.querySelector(":focus")?.nextElementSibling;G?G.focus():W("first")}else if(se==="prev"){const G=V.value.querySelector(":focus")?.previousElementSibling;G?G.focus():W("last")}else se==="first"?V.value.firstElementChild?.focus():se==="last"&&V.value.lastElementChild?.focus()}function O(se){const G=T.value+(se==="prev"?-1:1)*B.value;T.value=clamp(G,0,A.value-B.value)}const z=computed(()=>{let se=T.value>A.value-B.value?-(A.value-B.value)+bias(A.value-B.value-T.value):-T.value;T.value<=0&&(se=bias(-T.value));const G=x.value&&I.value?-1:1;return{transform:`translate${I.value?"X":"Y"}(${G*se}px)`,transition:U.value?"none":"",willChange:U.value?"transform":""}}),J=computed(()=>({next:S.next,prev:S.prev,select:S.select,isSelected:S.isSelected})),ee=computed(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!E.value;case!0:return C.value||Math.abs(T.value)>0;case"mobile":return E.value||C.value||Math.abs(T.value)>0;default:return!E.value&&(C.value||Math.abs(T.value)>0)}}),ae=computed(()=>Math.abs(T.value)>0),oe=computed(()=>A.value>Math.abs(T.value)+B.value);return useRender(()=>createVNode(t.tag,{class:["v-slide-group",{"v-slide-group--vertical":!I.value,"v-slide-group--has-affixes":ee.value,"v-slide-group--is-overflowing":C.value},t.class],style:t.style,tabindex:ce.value||S.selected.value.length?-1:0,onFocus:ye},{default:()=>[ee.value&&createVNode("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!ae.value}],onClick:()=>O("prev")},[_.prev?.(J.value)??createVNode(VFadeTransition,null,{default:()=>[createVNode(VIcon,{icon:x.value?t.nextIcon:t.prevIcon},null)]})]),createVNode("div",{key:"container",ref:D,class:"v-slide-group__container",onScroll:X},[createVNode("div",{ref:V,class:"v-slide-group__content",style:z.value,onTouchstartPassive:Z,onTouchmovePassive:ne,onTouchendPassive:re,onFocusin:ue,onFocusout:_e,onKeydown:ie},[_.default?.(J.value)])]),ee.value&&createVNode("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!oe.value}],onClick:()=>O("next")},[_.next?.(J.value)??createVNode(VFadeTransition,null,{default:()=>[createVNode(VIcon,{icon:x.value?t.prevIcon:t.nextIcon},null)]})])]})),{selected:S.selected,scrollTo:O,scrollOffset:T,focus:W}}});function parseItems(t){return t?t.map(n=>typeof n=="string"?{title:n,value:n}:n):[]}const makeVTabsProps=propsFactory({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...makeVSlideGroupProps({mandatory:"force"}),...makeDensityProps(),...makeTagProps()},"VTabs"),VTabs=genericComponent()({name:"VTabs",props:makeVTabsProps(),emits:{"update:modelValue":t=>!0},setup(t,n){let{slots:_}=n;const x=useProxiedModel(t,"modelValue"),E=computed(()=>parseItems(t.items)),{densityClasses:S}=useDensity(t),{backgroundColorClasses:C,backgroundColorStyles:T}=useBackgroundColor(toRef(t,"bgColor"));return provideDefaults({VTab:{color:toRef(t,"color"),direction:toRef(t,"direction"),stacked:toRef(t,"stacked"),fixed:toRef(t,"fixedTabs"),sliderColor:toRef(t,"sliderColor"),hideSlider:toRef(t,"hideSlider")}}),useRender(()=>{const[B]=VSlideGroup.filterProps(t);return createVNode(VSlideGroup,mergeProps(B,{modelValue:x.value,"onUpdate:modelValue":A=>x.value=A,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},S.value,C.value,t.class],style:[{"--v-tabs-height":convertToUnit(t.height)},T.value,t.style],role:"tablist",symbol:VTabsSymbol}),{default:()=>[_.default?_.default():E.value.map(A=>createVNode(VTab,mergeProps(A,{key:A.title}),null))]})}),{}}}),_hoisted_1$k={class:"mb-2"},_sfc_main$O=defineComponent$1({__name:"PageCompte",setup(t){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{mdAndUp:E}=useDisplay(),S=ref$1();enregistrercoute(n?.suivreIdCompte({f:U=>S.value=U}));const C=ref$1(),T=computed(()=>{if(C.value)return URL.createObjectURL(new Blob([C.value],{type:"image"}))});enregistrercoute(n?.profil.suivreImage({f:U=>C.value=U}));const{obtImageDco:B}=utiliserImagesDco(),A=B("profil"),I=async U=>{U?await n?.profil.sauvegarderImage({image:U}):await n?.profil.effacerImage()},{traduireNom:D}=utiliserLangues(),M=ref$1({}),V=D(M);enregistrercoute(n?.profil.suivreNoms({f:U=>M.value=U}));const L=async U=>{const{Effacer:H,Ajouter:Y}=ajusterTexteTraductible({anciennes:M.value,nouvelles:U});for(const[Z,ne]of Object.entries(Y))await n?.profil.sauvegarderNom({langue:Z,nom:ne});for(const Z of H)await n?.profil.effacerNom({langue:Z})},F=ref$1();enregistrercoute(n?.profil.suivreContacts({f:U=>F.value=U}));const j=ref$1("compte");return(U,H)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(x)("pages.compte.titre")},null,8,["titre"]),createVNode(ImageEditable,{"src-image":T.value,"img-defaut":unref(A),"taille-avatar":unref(E)?275:175,editable:!0,"max-taille-image":unref(MAX_TAILLE_IMAGE$4),onImageChangee:H[0]||(H[0]=Y=>I(Y))},null,8,["src-image","img-defaut","taille-avatar","max-taille-image"]),createBaseVNode("h1",_hoisted_1$k,[createBaseVNode("span",{class:normalizeClass({"text-disabled":!unref(V)})},toDisplayString$1(unref(V)||unref(x)("communs.anonyme")),3),createVNode(_sfc_main$1E,{"indice-nom":unref(x)("listeNomsProfil.indiceNom"),"indice-langue":unref(x)("listeNomsProfil.indiceLangue"),"texte-aucun-nom":unref(x)("listeNomsProfil.texteAucunNom"),"noms-initiaux":M.value,titre:unref(x)("pages.compte.titreDialogueNoms"),"sous-titre":unref(x)("pages.compte.sousTitreDialogueNoms"),"autorisation-modification":"",onAjusterNoms:H[1]||(H[1]=Y=>L(Y))},{activator:withCtx(({props:Y})=>[createVNode(VBtn,mergeProps(Y,{icon:"mdi-pencil",variant:"flat"}),null,16)]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre"]),S.value?(openBlock(),createBlock(_sfc_main$1Y,{key:0,id:S.value},null,8,["id"])):createCommentVNode("",!0)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(F.value||[],({type:Y,contact:Z})=>(openBlock(),createBlock(_sfc_main$P,{key:Z+"|"+Y,type:Y,"valeur-avant":Z},{activator:withCtx(({props:ne})=>[createVNode(_sfc_main$1J,mergeProps(ne,{type:Y,contact:Z}),null,16,["type","contact"])]),_:2},1032,["type","valeur-avant"]))),128)),createVNode(_sfc_main$Q,{"deja-presents":Object.keys(F.value||{})},{activator:withCtx(({props:Y})=>[createVNode(VChip,mergeProps(Y,{class:"mx-2 text-disabled",variant:"outlined",label:"","append-icon":"mdi-plus"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.nouveauContact")),1)]),_:2},1040)]),_:1},8,["deja-presents"]),createVNode(VTabs,{modelValue:j.value,"onUpdate:modelValue":H[2]||(H[2]=Y=>j.value=Y)},{default:withCtx(()=>[createVNode(VTab,{value:"compte"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.ongletCompte")),1)]),_:1}),createVNode(VTab,{value:"thme"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.ongletThme")),1)]),_:1}),createVNode(VTab,{value:"connexions"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.compte.ongletConnexions")),1)]),_:1})]),_:1},8,["modelValue"]),createVNode(VWindow,{modelValue:j.value,"onUpdate:modelValue":H[3]||(H[3]=Y=>j.value=Y)},{default:withCtx(()=>[createVNode(VWindowItem,{value:"compte"},{default:withCtx(()=>[createVNode(_sfc_main$R)]),_:1}),createVNode(VWindowItem,{value:"thme"},{default:withCtx(()=>[createVNode(_sfc_main$W)]),_:1}),createVNode(VWindowItem,{value:"connexions"},{default:withCtx(()=>[createVNode(_sfc_main$Z)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),_sfc_main$N=defineComponent$1({__name:"JetonIdObjet",props:{id:{}},setup(t){return(n,_)=>(openBlock(),createBlock(VChip,{variant:"outlined"},{append:withCtx(()=>[createVNode(_sfc_main$1Y,{id:n.id},null,8,["id"])]),default:withCtx(()=>[renderSlot(n.$slots,"default",{},()=>[createTextVNode(toDisplayString$1(n.id.slice(7,17)+"..."),1)])]),_:3}))}}),_hoisted_1$j={key:1},_hoisted_2$e={key:1},_hoisted_3$9={key:1},_sfc_main$M=defineComponent$1({__name:"RsultatRechercheBd",props:{rsultat:{}},setup(t){const n=t,_=inject$1("constl"),{traduireNom:x}=utiliserLangues(),{useI18n:E}=_(),{t:S}=E(),C=H=>computed(()=>{const{de:Y,info:Z}=n.rsultat.rsultatObjectif;if(Z.type==="texte"&&Y===H)return Z}),T=C("nom"),B=C("descr"),A=C("id"),I=H=>computed(()=>{const{de:Y,clef:Z,info:ne}=n.rsultat.rsultatObjectif;if(ne.type==="rsultat"&&Y===H&&Z)return{id:Z,info:ne}}),D=I("variable"),M=I("motClef"),V=ref$1({}),L=x(V);enregistrercoute(_?.bds.suivreNomsBd({idBd:n.rsultat.id,f:H=>V.value=H}));const F=ref$1({}),j=x(F);enregistrercoute(_?.bds.suivreDescriptionsBd({idBd:n.rsultat.id,f:H=>F.value=H}));const U=ref$1();return enregistrercoute(_?.rseau?.suivreAuteursVariable({idVariable:n.rsultat.id,f:H=>U.value=H})),(H,Y)=>(openBlock(),createBlock(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[unref(T)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(T)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1$j,toDisplayString$1(unref(L)||unref(S)("bds.aucunNom")),1))]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[unref(B)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(B)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_2$e,toDisplayString$1(unref(j)||unref(S)("bds.aucuneDescription")),1))]),_:1}),createVNode(_sfc_main$1F,{auteurs:U.value,"n-max":1},null,8,["auteurs"]),createVNode(_sfc_main$N,{id:H.rsultat.id},{default:withCtx(()=>[unref(A)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(A)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_3$9,toDisplayString$1(H.rsultat.id),1))]),_:1},8,["id"]),unref(D)?(openBlock(),createBlock(_sfc_main$1P,{key:0,id:unref(D).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(D).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0),unref(M)?(openBlock(),createBlock(_sfc_main$1n,{key:1,id:unref(M).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(M).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$L=defineComponent$1({__name:"SlecteurBd",props:{multiples:{type:Boolean},interdites:{}},emits:["selectionnee"],setup(t,{emit:n}){const _=t,x=inject$1("constl"),E=ref$1([]);watchEffect(()=>{n("selectionnee",E.value)});const S=ref$1(),C=ref$1(),T=computed(()=>C.value?.filter(B=>!(_.interdites||[]).includes(B.id)));return enregistrerRecherche({requte:S,rfRsultat:C,fRecherche:async({requte:B,nOuProfondeur:A,rfRsultat:I})=>await x?.recherche.rechercherBdsSelonTexte({texte:B,f:D=>I.value=D,nRsultatsDsirs:A}),fRechercheDfaut:async({nOuProfondeur:B,rfRsultat:A})=>await x?.recherche.rechercherBds({f:I=>A.value=I,nRsultatsDsirs:B})}),(B,A)=>(openBlock(),createBlock(VAutocomplete,{modelValue:E.value,"onUpdate:modelValue":A[0]||(A[0]=I=>E.value=I),search:S.value,"onUpdate:search":A[1]||(A[1]=I=>S.value=I),items:T.value,multiple:B.multiples},{item:withCtx(({item:I})=>[createVNode(_sfc_main$M,{rsultat:I.raw},null,8,["rsultat"])]),_:1},8,["modelValue","search","items","multiple"]))}}),_hoisted_1$i={key:1},_hoisted_2$d={key:1},_hoisted_3$8={key:1},_sfc_main$K=defineComponent$1({__name:"RsultatRechercheNue",props:{rsultat:{}},setup(t){const n=t,_=inject$1("constl"),{traduireNom:x}=utiliserLangues(),{useI18n:E}=_(),{t:S}=E(),C=H=>computed(()=>{const{de:Y,info:Z}=n.rsultat.rsultatObjectif;if(Z.type==="texte"&&Y===H)return Z}),T=C("nom"),B=C("descr"),A=C("id"),I=H=>computed(()=>{const{de:Y,clef:Z,info:ne}=n.rsultat.rsultatObjectif;if(ne.type==="rsultat"&&Y===H&&Z)return{id:Z,info:ne}}),D=I("variable"),M=I("motClef"),V=ref$1({}),L=x(V);enregistrercoute(_?.nues.suivreNomsNue({idNue:n.rsultat.id,f:H=>V.value=H}));const F=ref$1({}),j=x(F);enregistrercoute(_?.nues.suivreDescriptionsNue({idNue:n.rsultat.id,f:H=>F.value=H}));const U=ref$1();return enregistrercoute(_?.rseau?.suivreAuteursVariable({idVariable:n.rsultat.id,f:H=>U.value=H})),(H,Y)=>(openBlock(),createBlock(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[unref(T)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(T)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1$i,toDisplayString$1(unref(L)||unref(S)("nues.aucunNom")),1))]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[unref(B)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(B)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_2$d,toDisplayString$1(unref(j)||unref(S)("nues.aucuneDescription")),1))]),_:1}),createVNode(_sfc_main$1F,{auteurs:U.value,"n-max":1},null,8,["auteurs"]),createVNode(_sfc_main$N,{id:H.rsultat.id},{default:withCtx(()=>[unref(A)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(A)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_3$8,toDisplayString$1(H.rsultat.id),1))]),_:1},8,["id"]),unref(D)?(openBlock(),createBlock(_sfc_main$1P,{key:0,id:unref(D).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(D).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0),unref(M)?(openBlock(),createBlock(_sfc_main$1n,{key:1,id:unref(M).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(M).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$J=defineComponent$1({__name:"SlecteurNue",emits:["selectionnee"],setup(t,{emit:n}){const _=inject$1("constl"),x=ref$1();watchEffect(()=>{n("selectionnee",x.value)});const E=ref$1(),S=ref$1();return enregistrerRecherche({requte:E,rfRsultat:S,fRecherche:async({requte:C,nOuProfondeur:T,rfRsultat:B})=>await _?.recherche.rechercherNuesSelonTexte({texte:C,f:A=>B.value=A,nRsultatsDsirs:T}),fRechercheDfaut:async({nOuProfondeur:C,rfRsultat:T})=>await _?.recherche.rechercherNues({f:B=>T.value=B,nRsultatsDsirs:C})}),(C,T)=>(openBlock(),createBlock(VAutocomplete,{modelValue:x.value,"onUpdate:modelValue":T[0]||(T[0]=B=>x.value=B),search:E.value,"onUpdate:search":T[1]||(T[1]=B=>E.value=B),items:S.value},{item:withCtx(({item:B})=>[createVNode(_sfc_main$K,{rsultat:B.raw},null,8,["rsultat"])]),_:1},8,["modelValue","search","items"]))}}),_hoisted_1$h={key:1},_hoisted_2$c={key:1},_hoisted_3$7={key:1},_sfc_main$I=defineComponent$1({__name:"RsultatRechercheMotClef",props:{rsultat:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{traduireNom:E}=utiliserLangues(),{t:S}=x(),C=computed(()=>n.rsultat.rsultatObjectif.de),T=ref$1({}),B=E(T);enregistrercoute(_?.motsClefs.suivreNomsMotClef({idMotClef:n.rsultat.id,f:M=>T.value=M}));const A=ref$1({}),I=E(A);enregistrercoute(_?.motsClefs.suivreDescriptionsMotClef({idMotClef:n.rsultat.id,f:M=>A.value=M}));const D=ref$1();return enregistrercoute(_?.rseau?.suivreAuteursMotClef({idMotClef:n.rsultat.id,f:M=>D.value=M})),(M,V)=>{const L=resolveComponent("TexteSurlignRecherche");return openBlock(),createBlock(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[C.value==="nom"?(openBlock(),createBlock(L,{key:0,info:M.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1$h,toDisplayString$1(unref(B)||unref(S)("motsClefs.aucunNom")),1))]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[C.value==="descr"?(openBlock(),createBlock(L,{key:0,info:M.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_2$c,toDisplayString$1(unref(I)||unref(S)("motsClefs.aucunNom")),1))]),_:1}),createVNode(_sfc_main$1F,{auteurs:D.value,"n-max":1},null,8,["auteurs"]),createVNode(_sfc_main$N,{id:M.rsultat.id},{default:withCtx(()=>[C.value==="id"?(openBlock(),createBlock(L,{key:0,info:M.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_3$7,toDisplayString$1(M.rsultat.id),1))]),_:1},8,["id"])]),_:1})}}}),_sfc_main$H=defineComponent$1({__name:"SlecteurMotClef",props:{multiples:{type:Boolean},interdites:{}},emits:["selectionnee"],setup(t,{emit:n}){const _=t,x=inject$1("constl"),E=ref$1([]);watchEffect(()=>{n("selectionnee",E.value)});const S=ref$1(),C=ref$1(),T=computed(()=>C.value?.filter(B=>!(_.interdites||[]).includes(B.id)));return enregistrerRecherche({requte:S,rfRsultat:C,fRecherche:async({requte:B,nOuProfondeur:A,rfRsultat:I})=>await x?.recherche.rechercherMotsClefsSelonTexte({texte:B,f:D=>I.value=D,nRsultatsDsirs:A}),fRechercheDfaut:async({nOuProfondeur:B,rfRsultat:A})=>await x?.recherche.rechercherMotsClefs({f:I=>A.value=I,nRsultatsDsirs:B})}),(B,A)=>(openBlock(),createBlock(VAutocomplete,{modelValue:E.value,"onUpdate:modelValue":A[0]||(A[0]=I=>E.value=I),search:S.value,"onUpdate:search":A[1]||(A[1]=I=>S.value=I),items:T.value,multiple:B.multiples},{item:withCtx(({item:I})=>[createVNode(_sfc_main$I,{rsultat:I.raw},null,8,["rsultat"])]),_:1},8,["modelValue","search","items","multiple"]))}}),_hoisted_1$g={class:"text-center"},_hoisted_2$b={class:"text-h6 font-weight-light mb-2"},_sfc_main$G=defineComponent$1({__name:"NouveauTableau",props:{importationPermise:{type:Boolean}},emits:["sauvegarder"],setup(t,{emit:n}){const _=t,{mdAndUp:x}=useDisplay(),{useI18n:E}=_(),{t:S}=E(),C=ref$1(!1),T=ref$1(0),B=["noms","importerDonnes","confirmation"],A=computed(()=>{switch(B[T.value]){case"noms":return S("tableaux.nouveau.titreNoms");default:return""}}),I=computed(()=>{switch(B[T.value]){case"noms":return S("tableaux.nouveau.sousTitreNoms");default:return""}}),D=()=>{switch(B[T.value]){case"confirmation":T.value=B.indexOf(_.importationPermise?"importerDonnes":"noms");break;default:T.value--;break}},M=()=>{switch(B[T.value]){case"noms":T.value=B.indexOf(_.importationPermise?"importerDonnes":"confirmation");break;default:T.value++;break}},V=computed(()=>{switch(B[T.value]){case"noms":return{actif:!!Object.keys(F.value).length,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),L=computed(()=>{switch(B[T.value]){case"noms":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),F=ref$1({}),j=Z=>{F.value=Z},U=ref$1(),H=()=>{n("sauvegarder",{noms:F.value,cols:U.value||[]}),Y()},Y=()=>{F.value={},U.value=[],T.value=0,C.value=!1};return(Z,ne)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":ne[1]||(ne[1]=re=>C.value=re)},{activator:withCtx(({props:re})=>[renderSlot(Z.$slots,"activator",normalizeProps(guardReactiveProps({props:re})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto",width:unref(x)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(I.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:T.value,"onUpdate:modelValue":ne[0]||(ne[0]=re=>T.value=re),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(S)("communs.texteAucunNom"),"indice-langue":unref(S)("communs.indiceLangue"),"indice-nom":unref(S)("communs.indiceNom"),"noms-initiaux":F.value,"autorisation-modification":!0,onAjusterNoms:j},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createTextVNode("  faire ")]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$g,[createBaseVNode("h3",_hoisted_2$b,toDisplayString$1(unref(S)("tableaux.nouveau.texteCrer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",onClick:H},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("tableaux.nouveau.texteBtnCration")),1)]),_:1})])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!L.value.actif,onClick:D},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,L.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!V.value.actif,onClick:M},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,V.value.visible]])]),_:1})]),_:1},8,["width"])]),_:3},8,["modelValue"]))}}),_sfc_main$F=defineComponent$1({__name:"ItemSpcificationColonne",props:{id:{},idVariable:{},index:{type:Boolean},modificationPermise:{type:Boolean}},emits:["modifier-colonne","effacer-colonne"],setup(t,{emit:n}){const _=()=>n("effacer-colonne");return(x,E)=>(openBlock(),createBlock(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle),createVNode(VSwitch),createVNode(VListItemAction,null,{default:withCtx(()=>[createVNode(VBtn,{icon:"mdi-delete",onClick:_})]),_:1})]),_:1}))}}),_hoisted_1$f={key:1},_hoisted_2$a={key:1},_hoisted_3$6={key:1},_sfc_main$E=defineComponent$1({__name:"RsultatRechercheVariable",props:{rsultat:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{traduireNom:E}=utiliserLangues(),{t:S}=x(),C=computed(()=>n.rsultat.rsultatObjectif.de),T=computed(()=>B.value?icneCatgorieVariable(B.value):"mdi-variable"),B=ref$1();enregistrercoute(_?.variables.suivreCatgorieVariable({idVariable:n.rsultat.id,f:L=>B.value=L}));const A=ref$1({}),I=E(A);enregistrercoute(_?.variables.suivreNomsVariable({idVariable:n.rsultat.id,f:L=>A.value=L}));const D=ref$1({}),M=E(D);enregistrercoute(_?.variables.suivreDescrVariable({idVariable:n.rsultat.id,f:L=>D.value=L}));const V=ref$1();return enregistrercoute(_?.rseau?.suivreAuteursVariable({idVariable:n.rsultat.id,f:L=>V.value=L})),(L,F)=>{const j=resolveComponent("TexteSurlignRecherche");return openBlock(),createBlock(VListItem,{"prepend-icon":T.value},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[C.value==="nom"?(openBlock(),createBlock(j,{key:0,info:L.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1$f,toDisplayString$1(unref(I)||unref(S)("variables.aucunNom")),1))]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[C.value==="descr"?(openBlock(),createBlock(j,{key:0,info:L.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_2$a,toDisplayString$1(unref(M)||unref(S)("variables.aucuneDescription")),1))]),_:1}),createVNode(_sfc_main$1F,{auteurs:V.value,"n-max":1},null,8,["auteurs"]),createVNode(_sfc_main$N,{id:L.rsultat.id},{default:withCtx(()=>[C.value==="id"?(openBlock(),createBlock(j,{key:0,info:L.rsultat.rsultatObjectif.info},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_3$6,toDisplayString$1(L.rsultat.id),1))]),_:1},8,["id"])]),_:1},8,["prepend-icon"])}}}),_hoisted_1$e={class:"text-center"},_hoisted_2$9={class:"text-h6 font-weight-light mb-2"},_sfc_main$D=defineComponent$1({__name:"NouvelleVariable",setup(t){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{mdAndUp:E}=useDisplay(),S=ref$1(!1),C=ref$1(0),T=["catgorie","noms","descriptions","units","confirmation"],B=computed(()=>{switch(T[C.value]){case"catgorie":return x("variables.nouvelle.titreCatgorie");default:return""}}),A=computed(()=>{switch(T[C.value]){case"catgorie":return x("variables.nouvelle.sousTitreCatgorie");default:return""}}),I=()=>{switch(T[C.value]){case"confirmation":C.value=T.indexOf(re.value?"units":"descriptions");break;default:C.value--;break}},D=()=>{switch(T[C.value]){case"descriptions":C.value=T.indexOf(re.value?"units":"confirmation");break;default:C.value++;break}},M=computed(()=>{switch(T[C.value]){case"catgorie":return{actif:!!F.value,visible:!0};case"noms":return{actif:!!Object.keys(U.value).length,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),V=computed(()=>{switch(T[C.value]){case"noms":return{actif:!1,visible:!1};case"confirmation":return{actif:!X.value,visible:!0};default:return{actif:!0,visible:!0}}}),L=ref$1(!1),F=ref$1(),j=computed(()=>{if(F.value)return{type:L.value?"liste":"simple",catgorie:F.value}}),U=ref$1({}),H=_e=>{U.value=_e},Y=ref$1({}),Z=_e=>{Y.value=_e},ne=ref$1(),re=computed(()=>F.value==="numrique"),X=ref$1(!1),ce=async()=>{if(X.value=!0,!j.value)return;const _e=await n?.variables.crerVariable({catgorie:j.value});if(!_e)throw new Error("Variable non cre.");await n?.variables.sauvegarderNomsVariable({idVariable:_e,noms:Object.fromEntries(Object.entries(U.value))}),await n?.variables.sauvegarderDescriptionsVariable({idVariable:_e,descriptions:Object.fromEntries(Object.entries(Y.value))}),ne.value&&await n?.variables.sauvegarderUnitsVariable({idVariable:_e,idUnit:ne.value}),ue()},ue=()=>{U.value={},Y.value={},C.value=0,X.value=!1,S.value=!1};return(_e,ye)=>(openBlock(),createBlock(VDialog,{modelValue:S.value,"onUpdate:modelValue":ye[5]||(ye[5]=ie=>S.value=ie)},{activator:withCtx(({props:ie})=>[renderSlot(_e.$slots,"activator",normalizeProps(guardReactiveProps({props:ie})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(E)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(B.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:C.value,"onUpdate:modelValue":ye[4]||(ye[4]=ie=>C.value=ie),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(VSelect,{modelValue:F.value,"onUpdate:modelValue":ye[0]||(ye[0]=ie=>F.value=ie),items:unref(catgoriesBase),label:unref(x)("variables.nouvelle.catgorie"),variant:"outlined"},{item:withCtx(({item:ie,props:W})=>[createVNode(VListItem,mergeProps(W,{title:unref(x)(`variables.catgories.${ie.raw}`),subtitle:unref(x)(`variables.indicesCatgories.${ie.raw}`),"prepend-icon":unref(icneCatgorieVariable)({type:"simple",catgorie:ie.raw})||"mdi-variable"}),null,16,["title","subtitle","prepend-icon"])]),_:1},8,["modelValue","items","label"]),createVNode(VCheckbox,{modelValue:L.value,"onUpdate:modelValue":ye[1]||(ye[1]=ie=>L.value=ie),label:unref(x)("variables.nouvelle.typeListe")},null,8,["modelValue","label"])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("communs.texteAucunNom"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("communs.indiceNom"),"noms-initiaux":U.value,"autorisation-modification":!0,onAjusterNoms:H},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("variables.nouvelle.texteAucuneDescription"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("variables.nouvelle.texteIndiceDescription"),"noms-initiaux":Y.value,"autorisation-modification":!0,onAjusterNoms:Z},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(VInput,{modelValue:ne.value,"onUpdate:modelValue":ye[2]||(ye[2]=ie=>ne.value=ie)},null,8,["modelValue"])]),_:1}),(openBlock(),createBlock(VWindowItem,{key:4},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$e,[createBaseVNode("h3",_hoisted_2$9,toDisplayString$1(unref(x)("variables.nouveau.texteCrer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:X.value,onClick:ye[3]||(ye[3]=()=>ce())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("variables.nouveau.texteBtnCration")),1)]),_:1},8,["loading"])])])]),_:1}))]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!V.value.actif,onClick:I},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,V.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!M.value.actif,onClick:D},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,M.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$C=defineComponent$1({__name:"SlecteurVariable",props:{interdites:{}},emits:["selectionnee"],setup(t,{emit:n}){const _=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),S=ref$1(),C=ref$1(),T=ref$1();enregistrerRecherche({requte:C,rfRsultat:T,fRecherche:async({requte:A,nOuProfondeur:I,rfRsultat:D})=>await _?.recherche.rechercherVariablesSelonTexte({texte:A,f:M=>D.value=M,nRsultatsDsirs:I}),fRechercheDfaut:async({nOuProfondeur:A,rfRsultat:I})=>await _?.recherche.rechercherVariables({f:D=>I.value=D,nRsultatsDsirs:A})});const B=A=>{n("selectionnee",A)};return(A,I)=>(openBlock(),createBlock(VAutocomplete,{modelValue:S.value,"onUpdate:modelValue":[I[0]||(I[0]=D=>S.value=D),I[2]||(I[2]=D=>B(D))],search:C.value,"onUpdate:search":I[1]||(I[1]=D=>C.value=D),items:T.value?.filter(D=>!(A.interdites||[]).includes(D.id)),variant:"outlined"},{item:withCtx(({item:D,props:M})=>[createVNode(_sfc_main$E,mergeProps(M,{rsultat:D.raw}),null,16,["rsultat"])]),selection:withCtx(({item:D})=>[createVNode(_sfc_main$1P,{id:D.value},null,8,["id"])]),append:withCtx(()=>[createVNode(_sfc_main$D,null,{activator:withCtx(({props:D})=>[createVNode(VBtn,mergeProps(D,{icon:"mdi-plus",variant:"flat"}),null,16)]),_:1})]),"no-data":withCtx(()=>[createVNode(_sfc_main$D,null,{activator:withCtx(({props:D})=>[createVNode(VListItem,mergeProps(D,{"prepend-icon":"mdi-plus",title:unref(E)("variables.slecteur.aucuneRetrouve"),subtitle:unref(E)("variables.slecteur.nouvelle")}),null,16,["title","subtitle"])]),_:1})]),_:1},8,["modelValue","search","items"]))}}),_sfc_main$B=defineComponent$1({__name:"SlecteurTableau",props:{idBd:{}},emits:["selectionnee"],setup(t,{emit:n}){const _=t,x=inject$1("constl"),E=ref$1();let S;watchEffect(async()=>{S&&await S(),_.idBd?S=await enregistrercoute(x?.bds.suivreTableauxBd({idBd:_.idBd,f:T=>E.value=T})):E.value=void 0});const C=ref$1();return watchEffect(()=>{n("selectionnee",C.value)}),(T,B)=>{const A=resolveComponent("jeton-tableau");return openBlock(),createBlock(VSelect,{modelValue:C.value,"onUpdate:modelValue":B[0]||(B[0]=I=>C.value=I),loading:!E.value,disabled:!E.value,items:E.value,"item-value":"id","item-title":"id"},{selection:withCtx(({item:I})=>[createVNode(A,{id:I.value},null,8,["id"])]),item:withCtx(({item:I})=>[createVNode(_sfc_main$1l,{id:I.value},null,8,["id"])]),_:1},8,["modelValue","loading","disabled","items"])}}}),_sfc_main$A=defineComponent$1({__name:"SlecteurColonne",props:{idTableau:{},tableauChangeable:{type:Boolean}},emits:["selectionnee"],setup(t,{emit:n}){const _=t,x=inject$1("constl"),{useI18n:E}=_(),{t:S}=E(),{mdAndUp:C}=useDisplay(),T=ref$1(!1),B=ref$1(_.idTableau?1:0),A=["Tableau","Colonne"],I=computed(()=>{switch(A[B.value]){case"Tableau":return S("tableaux.colonnes.slecteur.titreTableau");case"Colonne":return S("tableaux.colonnes.slecteur.titreColonne");default:return""}}),D=computed(()=>{switch(A[B.value]){case"Tableau":return S("tableaux.colonnes.slecteur.sousTitreTableau");case"Colonne":return S("tableaux.colonnes.slecteur.sousTitreColonne");default:return""}}),M=()=>{switch(A[B.value]){case"Colonne":re();break;default:B.value++;break}},V=()=>{switch(A[B.value]){default:B.value--;break}},L=computed(()=>{switch(A[B.value]){case"Tableau":return{actif:!!U.value,visible:!0};case"Colonne":return{actif:!!H.value,visible:!0};default:return{actif:!0,visible:!0}}}),F=computed(()=>{switch(A[B.value]){case"Tableau":return{actif:!1,visible:!1};case"Colonne":return{actif:_.tableauChangeable,visible:_.tableauChangeable};default:return{actif:!0,visible:!0}}}),j=ref$1(),U=ref$1(_.idTableau),H=ref$1(),Y=ref$1();let Z;const ne=async X=>{Z&&await Z(),X?Z=await enregistrercoute(x?.tableaux.suivreColonnesTableau({idTableau:X,f:ce=>Y.value=ce})):Y.value=void 0};watchEffect(async()=>{await ne(U.value)});const re=()=>{H.value&&U.value&&n("selectionnee",{idTableau:U.value,idColonne:H.value})};return(X,ce)=>{const ue=resolveComponent("ItemColonneTableau"),_e=resolveComponent("JetonColonneTableau");return openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":ce[4]||(ce[4]=ye=>T.value=ye)},{activator:withCtx(({props:ye})=>[renderSlot(X.$slots,"activator",normalizeProps(guardReactiveProps({props:ye})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(C)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(I.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(D.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:B.value,"onUpdate:modelValue":ce[3]||(ce[3]=ye=>B.value=ye),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(_sfc_main$L,{multiples:!1,onSelectionnee:ce[0]||(ce[0]=ye=>j.value=ye[0])}),createVNode(_sfc_main$B,{"id-bd":j.value,onSelectionnee:ce[1]||(ce[1]=ye=>U.value=ye)},null,8,["id-bd"])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(VSelect,{modelValue:H.value,"onUpdate:modelValue":ce[2]||(ce[2]=ye=>H.value=ye),items:Y.value},{item:withCtx(({item:ye})=>[createVNode(ue,{info:ye.raw},null,8,["info"])]),selection:withCtx(({item:ye})=>[createVNode(_e,{info:ye.raw},null,8,["info"])]),_:1},8,["modelValue","items"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!F.value.actif,onClick:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,F.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!L.value.actif,onClick:M},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,L.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"])}}}),VCombobox$1="";function highlightResult(t,n,_){if(n==null)return t;if(Array.isArray(n))throw new Error("Multiple matches is not implemented");return typeof n=="number"&&~n?createVNode(Fragment,null,[createVNode("span",{class:"v-combobox__unmask"},[t.substr(0,n)]),createVNode("span",{class:"v-combobox__mask"},[t.substr(n,_)]),createVNode("span",{class:"v-combobox__unmask"},[t.substr(n+_)])]):t}const makeVComboboxProps=propsFactory({autoSelectFirst:{type:[Boolean,String]},delimiters:Array,...makeFilterProps({filterKeys:["title"]}),...makeSelectProps({hideNoData:!0,returnObject:!0}),...omit(makeVTextFieldProps({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...makeTransitionProps$1({transition:!1})},"VCombobox"),VCombobox=genericComponent()({name:"VCombobox",props:makeVComboboxProps(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:search":t=>!0,"update:menu":t=>!0},setup(t,n){let{emit:_,slots:x}=n;const{t:E}=useLocale(),S=ref$1(),C=shallowRef(!1),T=shallowRef(!0),B=shallowRef(!1),A=ref$1(),I=ref$1(),D=useProxiedModel(t,"menu"),M=computed({get:()=>D.value,set:ge=>{D.value&&!ge&&A.value?.openChildren||(D.value=ge)}}),V=shallowRef(-1);let L=!1;const F=computed(()=>S.value?.color),j=computed(()=>M.value?t.closeText:t.openText),{items:U,transformIn:H,transformOut:Y}=useItems(t),{textColorClasses:Z,textColorStyles:ne}=useTextColor(F),re=useProxiedModel(t,"modelValue",[],ge=>H(wrapInArray(ge)),ge=>{const Se=Y(ge);return t.multiple?Se:Se[0]??null}),X=useForm(),ce=shallowRef(t.multiple?"":re.value[0]?.title??""),ue=computed({get:()=>ce.value,set:ge=>{if(ce.value=ge,t.multiple||(re.value=[transformItem$2(t,ge)]),ge&&t.multiple&&t.delimiters?.length){const Se=ge.split(new RegExp(`(?:${t.delimiters.join("|")})+`));Se.length>1&&(Se.forEach(me=>{me=me.trim(),me&&Ee(transformItem$2(t,me))}),ce.value="")}ge||(V.value=-1),T.value=!ge}});watch(ce,ge=>{L?nextTick$2(()=>L=!1):C.value&&!M.value&&(M.value=!0),_("update:search",ge)}),watch(re,ge=>{t.multiple||(ce.value=ge[0]?.title??"")});const{filteredItems:_e,getMatches:ye}=useFilter(t,U,()=>T.value?"":ue.value),ie=computed(()=>re.value.map(ge=>U.value.find(Se=>{const me=getPropertyFromItem(Se.raw,t.itemValue),Be=getPropertyFromItem(ge.raw,t.itemValue);return me===void 0||Be===void 0?!1:t.returnObject?t.valueComparator(me,Be):t.valueComparator(Se.value,ge.value)})||ge)),W=computed(()=>t.hideSelected?_e.value.filter(ge=>!ie.value.some(Se=>Se.value===ge.value)):_e.value),O=computed(()=>ie.value.map(ge=>ge.props.value)),z=computed(()=>ie.value[V.value]),J=computed(()=>(t.autoSelectFirst===!0||t.autoSelectFirst==="exact"&&ue.value===W.value[0]?.title)&&W.value.length>0&&!T.value&&!B.value),ee=computed(()=>t.hideNoData&&!U.value.length||t.readonly||X?.isReadonly.value),ae=ref$1(),{onListScroll:oe,onListKeydown:se}=useScrolling(ae,S);function G(ge){L=!0,t.openOnClear&&(M.value=!0)}function q(){ee.value||(M.value=!0)}function te(ge){ee.value||(C.value&&(ge.preventDefault(),ge.stopPropagation()),M.value=!M.value)}function fe(ge){if(t.readonly||X?.isReadonly.value)return;const Se=S.value.selectionStart,me=O.value.length;if((V.value>-1||["Enter","ArrowDown","ArrowUp"].includes(ge.key))&&ge.preventDefault(),["Enter","ArrowDown"].includes(ge.key)&&(M.value=!0),["Escape"].includes(ge.key)&&(M.value=!1),["Enter","Escape","Tab"].includes(ge.key)&&(J.value&&["Enter","Tab"].includes(ge.key)&&Ee(_e.value[0]),T.value=!0),ge.key==="ArrowDown"&&J.value&&ae.value?.focus("next"),!!t.multiple){if(["Backspace","Delete"].includes(ge.key)){if(V.value<0){ge.key==="Backspace"&&!ue.value&&(V.value=me-1);return}const Be=V.value;z.value&&Ee(z.value),V.value=Be>=me-1?me-2:Be}if(ge.key==="ArrowLeft"){if(V.value<0&&Se>0)return;const Be=V.value>-1?V.value-1:me-1;ie.value[Be]?V.value=Be:(V.value=-1,S.value.setSelectionRange(ue.value.length,ue.value.length))}if(ge.key==="ArrowRight"){if(V.value<0)return;const Be=V.value+1;ie.value[Be]?V.value=Be:(V.value=-1,S.value.setSelectionRange(0,0))}ge.key==="Enter"&&ue.value&&(Ee(transformItem$2(t,ue.value)),ue.value="")}}function he(){C.value&&(T.value=!0,S.value?.focus())}function Ee(ge){if(t.multiple){const Se=O.value.findIndex(me=>t.valueComparator(me,ge.value));if(Se===-1)re.value=[...re.value,ge];else{const me=[...re.value];me.splice(Se,1),re.value=me}ue.value=""}else re.value=[ge],ce.value=ge.title,nextTick$2(()=>{M.value=!1,T.value=!0})}function we(ge){C.value=!0,setTimeout(()=>{B.value=!0})}function xe(ge){B.value=!1}function $e(ge){(ge==null||ge===""&&!t.multiple)&&(re.value=[])}return watch(_e,ge=>{!ge.length&&t.hideNoData&&(M.value=!1)}),watch(C,(ge,Se)=>{ge||ge===Se||(V.value=-1,M.value=!1,J.value&&!B.value&&!ie.value.some(me=>{let{value:Be}=me;return Be===W.value[0].value})?Ee(W.value[0]):t.multiple&&ue.value&&(re.value=[...re.value,transformItem$2(t,ue.value)],ue.value=""))}),watch(M,()=>{if(!t.hideSelected&&M.value&&ie.value.length){const ge=W.value.findIndex(Se=>ie.value.some(me=>Se.value===me.value));IN_BROWSER&&window.requestAnimationFrame(()=>{ge>=0&&I.value?.scrollToIndex(ge)})}}),useRender(()=>{const ge=!!(t.chips||x.chip),Se=!!(!t.hideNoData||W.value.length||x["prepend-item"]||x["append-item"]||x["no-data"]),me=re.value.length>0,[Be]=VTextField.filterProps(t);return createVNode(VTextField,mergeProps({ref:S},Be,{modelValue:ue.value,"onUpdate:modelValue":[ve=>ue.value=ve,$e],focused:C.value,"onUpdate:focused":ve=>C.value=ve,validationValue:re.externalValue,dirty:me,class:["v-combobox",{"v-combobox--active-menu":M.value,"v-combobox--chips":!!t.chips,"v-combobox--selection-slot":!!x.selection,"v-combobox--selecting-index":V.value>-1,[`v-combobox--${t.multiple?"multiple":"single"}`]:!0},t.class],style:t.style,readonly:t.readonly,placeholder:me?void 0:t.placeholder,"onClick:clear":G,"onMousedown:control":q,onKeydown:fe}),{...x,default:()=>createVNode(Fragment,null,[createVNode(VMenu,mergeProps({ref:A,modelValue:M.value,"onUpdate:modelValue":ve=>M.value=ve,activator:"parent",contentClass:"v-combobox__content",disabled:ee.value,eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterLeave:he},t.menuProps),{default:()=>[Se&&createVNode(VList,{ref:ae,selected:O.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:ve=>ve.preventDefault(),onKeydown:se,onFocusin:we,onFocusout:xe,onScrollPassive:oe,tabindex:"-1",color:t.itemColor??t.color},{default:()=>[x["prepend-item"]?.(),!W.value.length&&!t.hideNoData&&(x["no-data"]?.()??createVNode(VListItem,{title:E(t.noDataText)},null)),createVNode(VVirtualScroll,{ref:I,renderless:!0,items:W.value},{default:ve=>{let{item:Ae,index:Ve,itemRef:Pe}=ve;const Re=mergeProps(Ae.props,{ref:Pe,key:Ve,active:J.value&&Ve===0?!0:void 0,onClick:()=>Ee(Ae)});return x.item?.({item:Ae,index:Ve,props:Re})??createVNode(VListItem,Re,{prepend:Ne=>{let{isSelected:qe}=Ne;return createVNode(Fragment,null,[t.multiple&&!t.hideSelected?createVNode(VCheckboxBtn,{key:Ae.value,modelValue:qe,ripple:!1,tabindex:"-1"},null):void 0,Ae.props.prependIcon&&createVNode(VIcon,{icon:Ae.props.prependIcon},null)])},title:()=>T.value?Ae.title:highlightResult(Ae.title,ye(Ae)?.title,ue.value?.length??0)})}}),x["append-item"]?.()]})]}),ie.value.map((ve,Ae)=>{function Ve(Re){Re.stopPropagation(),Re.preventDefault(),Ee(ve)}const Pe={"onClick:close":Ve,onMousedown(Re){Re.preventDefault(),Re.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return createVNode("div",{key:ve.value,class:["v-combobox__selection",Ae===V.value&&["v-combobox__selection--selected",Z.value]],style:Ae===V.value?ne.value:{}},[ge?x.chip?createVNode(VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:ve.title}}},{default:()=>[x.chip?.({item:ve,index:Ae,props:Pe})]}):createVNode(VChip,mergeProps({key:"chip",closable:t.closableChips,size:"small",text:ve.title},Pe),null):x.selection?.({item:ve,index:Ae})??createVNode("span",{class:"v-combobox__selection-text"},[ve.title,t.multiple&&Ae<ie.value.length-1&&createVNode("span",{class:"v-combobox__selection-comma"},[createTextVNode(",")])])])})]),"append-inner":function(){for(var ve=arguments.length,Ae=new Array(ve),Ve=0;Ve<ve;Ve++)Ae[Ve]=arguments[Ve];return createVNode(Fragment,null,[x["append-inner"]?.(...Ae),(!t.hideNoData||t.items.length)&&t.menuIcon?createVNode(VIcon,{class:"v-combobox__menu-icon",icon:t.menuIcon,onMousedown:te,onClick:noop$5,"aria-label":E(j.value),title:E(j.value)},null):void 0])}})}),forwardRefs({isFocused:C,isPristine:T,menu:M,search:ue,selectionIndex:V,filteredItems:_e,select:Ee},S)}}),_hoisted_1$d={class:"text-center"},_hoisted_2$8={class:"text-center"},_hoisted_3$5={class:"text-h6 font-weight-light mb-2"},_sfc_main$z=defineComponent$1({__name:"NouvelleRgle",props:{source:{},categorieVariable:{}},emits:["sauvegarder"],setup(t,{emit:n}){const _=t,{useI18n:x}=_(),{t:E}=x(),{mdAndUp:S}=useDisplay(),C=ref$1(!1),T=ref$1(0),B=["TypeRgle","BorneFixeOuDynamique","ValeurBorne","CatgorieFixeOuDynamique","ValeurCatgorie","Confirmer"],A=ref$1(),I=()=>{A.value="existe",T.value=B.indexOf("Confirmer")},D=()=>{A.value="borne",T.value=B.indexOf("BorneFixeOuDynamique")},M=()=>{A.value="catgorique",T.value=B.indexOf("CatgorieFixeOuDynamique")},V=computed(()=>{switch(B[T.value]){case"BorneFixeOuDynamique":return E("rgles.nouvelleRgle.titreBorneFixeOuDynamique");case"CatgorieFixeOuDynamique":return E("rgles.nouvelleRgle.titreCatgorieFixeOuDynamique");case"TypeRgle":return E("rgles.nouvelleRgle.titreTypeRgle");case"Confirmer":return E("rgles.nouvelleRgle.titreConfirmer");case"ValeurBorne":return E("rgles.nouvelleRgle.titreValeurBorne");case"ValeurCatgorie":return E("rgles.nouvelleRgle.titreValeurCatgorie");default:return""}}),L=computed(()=>{switch(B[T.value]){case"BorneFixeOuDynamique":return E("rgles.nouvelleRgle.sousTitreBorneFixeOuDynamique");case"CatgorieFixeOuDynamique":return E("rgles.nouvelleRgle.sousTitreCatgorieFixeOuDynamique");case"TypeRgle":return E("rgles.nouvelleRgle.sousTitreTypeRgle");case"Confirmer":return E("rgles.nouvelleRgle.sousTitreConfirmer");case"ValeurBorne":return E("rgles.nouvelleRgle.sousTitreValeurBorne");case"ValeurCatgorie":return E("rgles.nouvelleRgle.sousTitreValeurCatgorie");default:return""}}),F=()=>{switch(B[T.value]){case"ValeurBorne":T.value=B.indexOf("Confirmer");break;case"ValeurCatgorie":T.value=B.indexOf("Confirmer");break;default:T.value++;break}},j=()=>{switch(B[T.value]){case"BorneFixeOuDynamique":T.value=B.indexOf("TypeRgle");break;case"CatgorieFixeOuDynamique":T.value=B.indexOf("TypeRgle");break;case"Confirmer":T.value=B.indexOf(A.value==="existe"?"TypeRgle":A.value==="borne"?"BorneFixeOuDynamique":"CatgorieFixeOuDynamique");break;default:T.value--;break}},U=computed(()=>{switch(B[T.value]){case"TypeRgle":return{actif:!1,visible:!1};case"BorneFixeOuDynamique":return{actif:!!ne.value,visible:!0};case"CatgorieFixeOuDynamique":return{actif:!!ye.value,visible:!0};case"ValeurBorne":return{actif:!!X.value&&!!(ne.value==="fixe"?ce.value:ne.value==="dynamiqueColonne"?_e.value:ue.value),visible:!0};case"ValeurCatgorie":return{actif:ye.value==="fixe"?!!ie.value:!!W.value,visible:!1};case"Confirmer":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),H=computed(()=>{switch(B[T.value]){case"TypeRgle":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),Y=computed(()=>_.source.type==="tableau"?_.source.idTableau:void 0),Z=computed(()=>_.categorieVariable==="numrique"||_.categorieVariable==="horoDatage"),ne=ref$1(),re=ee=>{ne.value=ee,F()},X=ref$1(),ce=ref$1(),ue=ref$1(),_e=ref$1(),ye=ref$1(),ie=ref$1(),W=ref$1(),O=ee=>{ye.value=ee,F()},z=async ee=>{n("sauvegarder",ee)},J=async()=>{if(!A.value)throw new Error("Cheminement non dfini");if(A.value==="existe")await z({typeRgle:"existe",dtails:{}});else if(A.value==="borne"){if(!X.value)throw new Error("Oprateur borne non dfini");let ee;switch(ne.value){case"fixe":{if(!ce.value)throw new Error("Valeur borne fixe non dfinie");ee={type:"fixe",op:X.value,val:ce.value};break}case"dynamiqueColonne":{if(!_e.value)throw new Error("Valeur borne dynamique colonne non dfinie");ee={type:"dynamiqueColonne",op:X.value,val:_e.value};break}case"dynamiqueVariable":{if(!ue.value)throw new Error("Valeur borne dynamique variable non dfinie");ee={type:"dynamiqueVariable",op:X.value,val:ue.value};break}default:throw new Error(ne.value)}await z({typeRgle:"bornes",dtails:ee})}else{let ee;switch(ye.value){case"fixe":{if(!ie.value)throw new Error("Valeur borne fixe non dfinie");ee={type:"fixe",options:ie.value};break}case"dynamique":{if(!W.value)throw new Error("Valeur borne dynamique colonne non dfinie");ee={type:"dynamique",...W.value};break}default:throw new Error(ye.value)}await z({typeRgle:"valeurCatgorique",dtails:ee})}};return(ee,ae)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":ae[16]||(ae[16]=oe=>C.value=oe)},{activator:withCtx(({props:oe})=>[renderSlot(ee.$slots,"activator",normalizeProps(guardReactiveProps({props:oe}))),createVNode(VCard,{class:"mx-auto","max-width":unref(S)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(V.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(L.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:T.value,"onUpdate:modelValue":ae[15]||(ae[15]=se=>T.value=se),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$d,[createVNode(VBtn,{class:"ma-3",variant:"flat",color:"primary",onClick:ae[0]||(ae[0]=()=>I())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("rgles.nouvelleRgle.rgleExiste")),1)]),_:1}),createVNode(VBtn,{disabled:!Z.value,class:"ma-3",variant:"outlined",onClick:ae[1]||(ae[1]=()=>D())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("rgles.nouvelleRgle.rgleBorne")),1)]),_:1},8,["disabled"]),createVNode(VBtn,{class:"ma-3",variant:"outlined",onClick:ae[2]||(ae[2]=()=>M())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("rgles.nouvelleRgle.rgleCatgorique")),1)]),_:1})])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(VBtn,{class:"ma-3",variant:"outlined",onClick:ae[3]||(ae[3]=()=>re("fixe"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("rgles.nouvelleRgle.borneFixes")),1)]),_:1}),createVNode(VBtn,{class:"ma-3",variant:"outlined",onClick:ae[4]||(ae[4]=()=>re("dynamiqueVariable"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("rgles.nouvelleRgle.borneDynamiqueVariable")),1)]),_:1}),createVNode(VBtn,{class:"ma-3",variant:"outlined",disabled:!Y.value,onClick:ae[5]||(ae[5]=()=>re("dynamiqueColonne"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("rgles.nouvelleRgle.borneDynamiqueColonne")),1)]),_:1},8,["disabled"])]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(VSelect,{modelValue:X.value,"onUpdate:modelValue":ae[6]||(ae[6]=se=>X.value=se),items:[">",">=","<","<="]},null,8,["modelValue"]),ne.value==="fixe"?(openBlock(),createBlock(VInput,{key:0,modelValue:ce.value,"onUpdate:modelValue":ae[7]||(ae[7]=se=>ce.value=se)},null,8,["modelValue"])):ne.value==="dynamiqueVariable"?(openBlock(),createBlock(_sfc_main$C,{key:1,onSelectionnee:ae[8]||(ae[8]=se=>ue.value=se)})):ne.value==="dynamiqueColonne"?(openBlock(),createBlock(_sfc_main$A,{key:2,"id-tableau":Y.value,"tableau-changeable":!1,onSelectionnee:ae[9]||(ae[9]=se=>_e.value=se.idColonne)},null,8,["id-tableau"])):createCommentVNode("",!0)]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(VBtn,{class:"ma-3",variant:"outlined",onClick:ae[10]||(ae[10]=()=>O("fixe"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("rgles.nouvelleRgle.catgoriesFixes")),1)]),_:1}),createVNode(VBtn,{class:"ma-3",variant:"outlined",disabled:!Y.value,onClick:ae[11]||(ae[11]=()=>O("dynamique"))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("rgles.nouvelleRgle.catgoriesDynamique")),1)]),_:1},8,["disabled"])]),_:1}),createVNode(VWindowItem,{value:4},{default:withCtx(()=>[ye.value==="fixe"?(openBlock(),createBlock(VCombobox,{key:0,modelValue:ie.value,"onUpdate:modelValue":ae[12]||(ae[12]=se=>ie.value=se),multiple:"",chips:"",clearable:""},null,8,["modelValue"])):(openBlock(),createBlock(_sfc_main$A,{key:1,"id-tableau":Y.value,"tableau-changeable":!0,onSelectionnee:ae[13]||(ae[13]=se=>W.value={tableau:se.idTableau,colonne:se.idColonne})},null,8,["id-tableau"]))]),_:1}),createVNode(VWindowItem,{value:5},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$8,[createBaseVNode("h3",_hoisted_3$5,toDisplayString$1(unref(E)("rgles.nouvelleRgle.messageConfirmer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",onClick:ae[14]||(ae[14]=()=>J())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("rgles.nouvelleRgle.confirmer")),1)]),_:1})])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!H.value.actif,onClick:j},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,H.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!U.value.actif,onClick:F},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,U.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$y=defineComponent$1({__name:"NouvelleColonne",props:{idTableau:{},idVariable:{},idColonne:{},variablesInterdites:{}},emits:["nouvelle"],setup(t,{emit:n}){const _=t,{mdAndUp:x}=useDisplay(),{useI18n:E}=_(),{t:S}=E(),C=inject$1("constl"),T=ref$1(!1),B=ref$1(0),A=["variable","index","rgles","confirmation"],I=computed(()=>{switch(A[B.value]){case"variable":return S("colonnes.nouvelle.titreVariable");default:return""}}),D=computed(()=>{switch(A[B.value]){case"variable":return S("colonnes.nouvelle.sousTitreVariable");default:return""}}),M=()=>{switch(A[B.value]){default:B.value++;break}},V=()=>{switch(A[B.value]){default:B.value--;break}},L=computed(()=>{switch(A[B.value]){case"variable":return{actif:!!j.value,visible:!1};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),F=computed(()=>{switch(A[B.value]){case"variable":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),j=ref$1(_.idVariable),U=W=>j.value=W,H=ref$1();let Y;const Z=async W=>{Y&&await Y(),W?Y=await enregistrercoute(C?.variables.suivreCatgorieVariable({idVariable:W,f:O=>H.value=O.catgorie})):H.value=void 0};watchEffect(async()=>{await Z(j.value)});const ne=ref$1(!1),re=enregistrercouteDynamique({params:{id:j},fcoute:(W,O)=>C?.variables.suivreRglesVariable({idVariable:W.id,f:O})}),X=ref$1([]),ce=W=>{const O=v4();X.value=[...X.value,{rgle:W,id:O}]},ue=W=>{X.value=X.value.filter(O=>O.id!==W)},_e=computed(()=>j.value?{idVariable:j.value}:void 0),ye=async()=>{if(!_e.value)return;const{idVariable:W}=_e.value;n("nouvelle",{idVariable:W,index:ne.value,idColonne:_.idColonne,rgles:X.value}),ie()},ie=()=>{j.value=void 0,ne.value=!1,X.value=[],T.value=!1};return(W,O)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":O[4]||(O[4]=z=>T.value=z)},{activator:withCtx(({props:z})=>[renderSlot(W.$slots,"activator",normalizeProps(guardReactiveProps({props:z})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(x)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(I.value),1),createVNode(VSpacer),createVNode(VBtn,{variant:"flat",size:"small",icon:"mdi-close",onClick:ie})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(D.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:B.value,"onUpdate:modelValue":O[3]||(O[3]=z=>B.value=z),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(_sfc_main$C,{interdites:W.variablesInterdites,onSelectionnee:U},null,8,["interdites"])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(VCheckbox)]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(_sfc_main$z,{source:{type:"tableau",idTableau:W.idTableau},"categorie-variable":H.value,onSauvegarder:O[0]||(O[0]=z=>ce(z))},{activator:withCtx(({props:z})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(z)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("")),1)]),_:1})]),_:1},16)]),_:1},8,["source","categorie-variable"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(X.value,z=>(openBlock(),createBlock(_sfc_main$1A,{key:z.id,regle:z,effacable:"",onEffacer:O[1]||(O[1]=()=>ue(z.id))},null,8,["regle"]))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(re),z=>(openBlock(),createBlock(_sfc_main$1A,{key:z.id,regle:z},null,8,["regle"]))),128))]),_:1})]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(VBtn,{variant:"outlined",onClick:O[2]||(O[2]=()=>ye())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!F.value.actif,onClick:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,F.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!L.value.actif,onClick:M},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,L.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$x=defineComponent$1({__name:"ItemSpcificationTableau",props:{clef:{},noms:{},idTableau:{},colonnes:{},modificationPermise:{type:Boolean}},emits:["modifier-noms","nouvelle-colonne","modifier-colonne","effacer-colonne"],setup(t,{emit:n}){const _=t,{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=M=>{n("modifier-noms",M)},T=S(computed(()=>_.noms)),B=computed(()=>_.colonnes.map(M=>M.variable)),A=(M,V)=>{n("modifier-colonne",{idColonne:M,...V})},I=M=>{n("effacer-colonne",M)},D=M=>{n("nouvelle-colonne",M)};return(M,V)=>(openBlock(),createBlock(VListGroup,{value:M.clef},{activator:withCtx(({props:L})=>[createVNode(VListItem,mergeProps(L,{"prepend-icon":"mdi-table"}),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createVNode(_sfc_main$1E,{"indice-nom":unref(E)("listeNomsProfil.indiceNom"),"indice-langue":unref(E)("listeNomsProfil.indiceLangue"),"texte-aucun-nom":unref(E)("listeNomsProfil.texteAucunNom"),titre:unref(E)("tableaux.spcification.titreDialogueNoms"),"sous-titre":unref(E)("tableaux.spcification.sousTitreDialogueNoms"),"noms-initiaux":M.noms,"autorisation-modification":M.modificationPermise,onAjusterNoms:C},{activator:withCtx(({props:F})=>[createBaseVNode("span",normalizeProps(guardReactiveProps(F)),[createTextVNode(toDisplayString$1(unref(T)||unref(E)("communs.baseCarteObjet.sansNom"))+" ",1),createVNode(VBtn,{icon:M.modificationPermise?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","titre","sous-titre","noms-initiaux","autorisation-modification"])]),_:1})]),_:2},1040)]),default:withCtx(()=>[createVNode(_sfc_main$y,{"variables-interdites":B.value,onNouvelle:D},{activator:withCtx(({props:L})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(L)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(" mdi-plus ")]),_:1})]),title:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("tableaux.spcification.nouvelleColonne")),1)]),_:2},1040)]),_:1},8,["variables-interdites"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(M.colonnes,L=>(openBlock(),createBlock(_sfc_main$F,{id:L.id,key:L.id,"id-variable":L.variable,index:L.index,"modification-permise":M.modificationPermise,onModifierColonne:F=>A(L.id,F),onEffacerColonne:()=>I(L.id)},null,8,["id","id-variable","index","modification-permise","onModifierColonne","onEffacerColonne"]))),128))]),_:1},8,["value"]))}}),_hoisted_1$c={class:"text-center"},_hoisted_2$7={class:"text-h6 font-weight-light mb-2"},_sfc_main$w=defineComponent$1({__name:"NouvelleBd",setup(t){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),E=useRouter(),{isRtl:S}=useRtl(),{mdAndUp:C}=useDisplay(),T=ref$1(!1),B=ref$1(0),A=["cheminement","gabaritBd","gabaritNue","noms","descriptions","motsClefs","tableaux","licence","confirmation"],I=computed(()=>{switch(A[B.value]){case"cheminement":return x("bds.nouvelle.titreCheminement");case"gabaritBd":return x("bds.nouvelle.titreGabaritBd");case"gabaritNue":return x("bds.nouvelle.titreGabaritNue");case"noms":return x("bds.nouvelle.titreNoms");case"descriptions":return x("bds.nouvelle.titreFescriptions");case"motsClefs":return x("bds.nouvelle.titreMotsClefs");case"licence":return x("bds.nouvelle.titreLicence");case"confirmation":return x("bds.nouvelle.titreConfirmation");default:return""}}),D=computed(()=>{switch(A[B.value]){case"cheminement":return x("bds.nouvelle.sousTitreCheminement");case"gabaritBd":return x("bds.nouvelle.sousTitreGabaritBd");case"gabaritNue":return x("bds.nouvelle.sousTitreGabaritNue");case"noms":return x("bds.nouvelle.sousTitreNoms");case"descriptions":return x("bds.nouvelle.sousTitreFescriptions");case"motsClefs":return x("bds.nouvelle.sousTitreMotsClefs");case"licence":return x("bds.nouvelle.sousTitreLicence");case"confirmation":return x("bds.nouvelle.sousTitreConfirmation");default:return""}}),M=ref$1(),V=Ee=>{M.value=Ee,B.value=A.indexOf(Ee==="bd"?"gabaritBd":"gabaritNue")},L=()=>{M.value="nouvelle",B.value=A.indexOf("noms")},F=()=>{switch(A[B.value]){case"gabaritBd":case"gabaritNue":B.value=A.indexOf("licence");break;default:B.value++;break}},j=()=>{switch(A[B.value]){case"gabaritBd":case"gabaritNue":case"noms":B.value=A.indexOf("cheminement");break;case"licence":B.value=A.indexOf(M.value==="bd"?"gabaritBd":M.value==="nue"?"gabaritNue":"motsClefs");break;default:B.value--;break}},U=computed(()=>{switch(A[B.value]){case"cheminement":return{actif:!1,visible:!1};case"gabaritBd":return{actif:!!Z.value,visible:!0};case"gabaritNue":return{actif:!!Y.value,visible:!0};case"noms":return{actif:Object.keys(ce.value).length>0,visible:!0};case"licence":return{actif:!!W.value,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),H=computed(()=>{switch(A[B.value]){case"cheminement":return{actif:!1,visible:!1};case"confirmation":return{actif:!te.value,visible:!0};default:return{actif:!0,visible:!0}}}),Y=ref$1(),Z=ref$1(),ne=async Ee=>{Z.value=Ee},re=async Ee=>{const we=await n?.nues.gnrerSchmaBdNue({idNue:Ee,licence:"ODbl-1_0"});we&&(Y.value=we,W.value=we.licence,O.value=we.licenceContenu)},X=ref$1(!1),ce=ref$1({}),ue=Ee=>{ce.value=Ee},_e=ref$1({}),ye=Ee=>{_e.value=Ee},ie=ref$1([]),W=ref$1(),O=ref$1(),z=ref$1([]),J=()=>{z.value=[...z.value,{clef:v4(),noms:{},cols:[]}]},ee=Ee=>{z.value=z.value.filter(we=>we.clef!==Ee)},ae=({clefTableau:Ee,noms:we})=>{z.value=z.value.map(xe=>xe.clef===Ee?{...xe,noms:we}:xe)},oe=({clefTableau:Ee,idVariable:we,index:xe,rgles:$e})=>{const ge={id:v4(),variable:we,index:xe,rgles:$e};throw new Error(" faire"+JSON.stringify(ge)+Ee)},se=({clefTableau:Ee,idColonne:we})=>{z.value=z.value.map(xe=>xe.clef===Ee?{clef:xe.clef,noms:xe.noms,cols:xe.cols.filter($e=>$e.id!==we)}:xe)},G=computed(()=>{if(W.value)return{licenceChoisie:W.value}}),q=ref$1(!1),te=ref$1(!1),fe=async()=>{te.value=!0;let Ee;if(M.value==="nouvelle"){if(!G.value)return;const{licenceChoisie:we}=G.value;if(Ee=await n?.bds.crerBd({licence:we,licenceContenu:O.value}),!Ee)throw new Error("Bd non cre.");await n?.bds.sauvegarderNomsBd({idBd:Ee,noms:Object.fromEntries(Object.entries(ce.value))}),await n?.bds.sauvegarderDescriptionsBd({idBd:Ee,descriptions:Object.fromEntries(Object.entries(_e.value))}),await n?.bds.ajouterMotsClefsBd({idBd:Ee,idsMotsClefs:ie.value});for(const xe of z.value){const $e=await n?.bds.ajouterTableauBd({idBd:Ee,clefTableau:xe.clef});if(!$e)return;await n?.tableaux.sauvegarderNomsTableau({idTableau:$e,noms:xe.noms});for(const ge of xe.cols){const Se=ge.id;await n?.tableaux.ajouterColonneTableau({idTableau:$e,idVariable:ge.variable,idColonne:Se}),ge.index&&await n?.tableaux.changerColIndex({idTableau:$e,idColonne:Se,val:ge.index});for(const me of ge.rgles)throw new Error(" faire"+JSON.stringify(me))}}}else if(M.value==="nue"){if(!Y.value)return;Ee=await n?.bds.crerBdDeSchma({schma:Y.value})}else{if(!Z.value)return;Ee=await n?.bds.copierBd({idBd:Z.value,copierDonnes:X.value})}if(!Ee)throw new Error("Bd non cre.");he(),q.value&&E.push(encodeURI(`/donnes/bd/${encodeURIComponent(Ee)}`))},he=()=>{ce.value={},_e.value={},W.value=void 0,O.value=void 0,ie.value=[],B.value=0,te.value=!1,T.value=!1};return(Ee,we)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":we[11]||(we[11]=xe=>T.value=xe)},{activator:withCtx(({props:xe})=>[renderSlot(Ee.$slots,"activator",normalizeProps(guardReactiveProps({props:xe})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(C)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(I.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(D.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:B.value,"onUpdate:modelValue":we[10]||(we[10]=xe=>B.value=xe),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[(openBlock(),createBlock(VWindowItem,{key:0},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-creation-outline","append-icon":unref(S)?"chevron-left":"chevron-right",title:unref(x)("bds.nouvelle.crerNouvelle"),onClick:we[0]||(we[0]=()=>L())},null,8,["append-icon","title"]),createVNode(VListItem,{"prepend-icon":"mdi-table","append-icon":unref(S)?"chevron-left":"chevron-right",title:unref(x)("bds.nouvelle.copierDeBd"),onClick:we[1]||(we[1]=()=>V("bd"))},null,8,["append-icon","title"]),createVNode(VListItem,{"prepend-icon":"mdi-table-multiple","append-icon":unref(S)?"chevron-left":"chevron-right",title:unref(x)("bds.nouvelle.copierDeNue"),onClick:we[2]||(we[2]=()=>V("nue"))},null,8,["append-icon","title"])]),_:1})]),_:1})),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(_sfc_main$L,{multiples:!1,onSelectionnee:we[3]||(we[3]=xe=>xe[0]&&ne(xe[0]))}),createVNode(VCheckbox,{modelValue:X.value,"onUpdate:modelValue":we[4]||(we[4]=xe=>X.value=xe),label:unref(x)("bds.nouvelle.copierDonnesBd")},null,8,["modelValue","label"])]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(_sfc_main$J,{onSelectionnee:we[5]||(we[5]=xe=>xe&&re(xe))})]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("communs.texteAucunNom"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("communs.indiceNom"),"noms-initiaux":ce.value,"autorisation-modification":!0,onAjusterNoms:ue},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:4},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("bds.nouvelle.texteAucuneDescription"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("bds.nouvelle.texteIndiceDescription"),"noms-initiaux":_e.value,"autorisation-modification":!0,onAjusterNoms:ye},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:5},{default:withCtx(()=>[createVNode(_sfc_main$H,{multiples:"",onSelectionnee:we[6]||(we[6]=xe=>ie.value=xe)})]),_:1}),createVNode(VWindowItem,{value:6},{default:withCtx(()=>[createVNode(_sfc_main$G,{"importation-permise":"",onSauvegarder:J},{activator:withCtx(({props:xe})=>[createVNode(VBtn,normalizeProps(guardReactiveProps(xe)),null,16)]),_:1}),createVNode(VList,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(z.value,xe=>(openBlock(),createBlock(_sfc_main$x,{key:xe.clef,clef:xe.clef,noms:xe.noms,colonnes:xe.cols,"modification-permise":"",onModifierNoms:$e=>ae({clefTableau:xe.clef,noms:$e}),onNouvelleColonne:$e=>oe({clefTableau:xe.clef,idVariable:$e.idVariable,index:$e.index,rgles:$e.rgles}),onEffacerColonne:$e=>se({clefTableau:xe.clef,idColonne:$e}),onEffacerTableau:()=>ee(xe.clef)},null,8,["clef","noms","colonnes","onModifierNoms","onNouvelleColonne","onEffacerColonne","onEffacerTableau"]))),128))]),_:1})]),_:1}),createVNode(VWindowItem,{value:7},{default:withCtx(()=>[createVNode(_sfc_main$1d,{licence:W.value,onChangerLicence:we[7]||(we[7]=xe=>W.value=xe)},{activator:withCtx(({props:xe})=>[createVNode(_sfc_main$1o,mergeProps(xe,{licence:W.value}),null,16,["licence"])]),_:1},8,["licence"])]),_:1}),createVNode(VWindowItem,{value:8},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$c,[createBaseVNode("h3",_hoisted_2$7,toDisplayString$1(unref(x)("bds.nouvelle.texteCrer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:te.value,onClick:we[8]||(we[8]=()=>fe())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("bds.nouvelle.texteBtnCration")),1)]),_:1},8,["loading"])]),createVNode(VCheckbox,{modelValue:q.value,"onUpdate:modelValue":we[9]||(we[9]=xe=>q.value=xe)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("bds.nouvelle.ouvrirAprsCration")),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!H.value.actif,onClick:j},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,H.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!U.value.actif,onClick:F},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,U.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$b={class:"font-weight-bold"},_hoisted_2$6={class:"text-medium-emphasis text-caption"},_hoisted_3$4={class:"font-weight-bold"},_hoisted_4$3={class:"text-medium-emphasis text-caption"},_hoisted_5$3={class:"text-center"},_hoisted_6$3={class:"text-h6 font-weight-light mb-2"},_sfc_main$v=defineComponent$1({__name:"NouvelleNue",setup(t){const{mdAndUp:n}=useDisplay(),{useI18n:_}=_(),{t:x}=_(),E=inject$1("constl"),S=ref$1(!1),C=ref$1(0),T=["noms","descriptions","autorisation","tableaux","confirmation"],B=computed(()=>{switch(T[C.value]){case"noms":return x("nues.nouvelle.titreNoms");case"descriptions":return x("nues.nouvelle.titreDescriptions");case"autorisation":return x("nues.nouvelle.titreAutorisation");case"tableaux":return x("nues.nouvelle.titreTableaux");case"confirmation":return x("nues.nouvelle.titreConfirmation");default:return""}}),A=computed(()=>{switch(T[C.value]){case"noms":return x("nues.nouvelle.sousTitreNoms");case"descriptions":return x("nues.nouvelle.sousTitreDescriptions");case"autorisation":return x("nues.nouvelle.sousTitreAutorisation");case"tableaux":return x("nues.nouvelle.sousTitreTableaux");case"confirmation":return x("nues.nouvelle.sousTitreConfirmation");default:return""}}),I=()=>{switch(T[C.value]){default:C.value--;break}},D=()=>{switch(T[C.value]){default:C.value++;break}},M=computed(()=>{switch(T[C.value]){case"noms":return{actif:!!Object.keys(L.value).length,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),V=computed(()=>{switch(T[C.value]){case"noms":return{actif:!1,visible:!1};case"confirmation":return{actif:!ce.value,visible:!0};default:return{actif:!0,visible:!0}}}),L=ref$1({}),F=ye=>{L.value=ye},j=ref$1({}),U=ye=>{j.value=ye},H=ref$1("IJPC"),Y=ref$1([]),Z=ye=>{Y.value=Y.value.filter(ie=>ie.clef!==ye)},ne=({clefTableau:ye,noms:ie})=>{Y.value=Y.value.map(W=>W.clef===ye?{...W,noms:ie}:W)},re=({clefTableau:ye,idVariable:ie,index:W,rgles:O})=>{const z={id:v4(),variable:ie,index:W,rgles:O};throw new Error(" faire"+ye+JSON.stringify(z))},X=({clefTableau:ye,idColonne:ie})=>{Y.value=Y.value.map(W=>W.clef===ye?{clef:W.clef,noms:W.noms,cols:W.cols.filter(O=>O.id!==ie)}:W)},ce=ref$1(!1),ue=async()=>{ce.value=!0;const ye=await E?.nues.crerNue({autorisation:H.value});if(!ye)throw new Error("Nue non cre.");await E?.nues.sauvegarderNomsNue({idNue:ye,noms:Object.fromEntries(Object.entries(L.value))}),await E?.nues.sauvegarderDescriptionsNue({idNue:ye,descriptions:Object.fromEntries(Object.entries(j.value))});for(const ie of Y.value){const W=await E?.nues.ajouterTableauNue({idNue:ye,clefTableau:ie.clef});if(!W)return;await E?.nues.ajouterNomsTableauNue({idTableau:W,noms:ie.noms});for(const O of ie.cols){const z=O.id;await E?.nues.ajouterColonneTableauNue({idTableau:W,idVariable:O.variable,idColonne:z}),O.index&&await E?.nues.changerColIndexTableauNue({idTableau:W,idColonne:z,val:O.index});for(const J of O.rgles)throw new Error(" faire"+JSON.stringify(J))}}_e()},_e=()=>{L.value={},j.value={},H.value="IJPC",Y.value=[],C.value=0,S.value=!1,ce.value=!1};return(ye,ie)=>(openBlock(),createBlock(VDialog,{modelValue:S.value,"onUpdate:modelValue":ie[2]||(ie[2]=W=>S.value=W)},{activator:withCtx(({props:W})=>[renderSlot(ye.$slots,"activator",normalizeProps(guardReactiveProps({props:W})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(n)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(B.value)+" ",1),createVNode(VSpacer),createVNode(VBtn,{variant:"flat",size:"small",icon:"mdi-close",onClick:_e})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:C.value,"onUpdate:modelValue":ie[1]||(ie[1]=W=>C.value=W),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[(openBlock(),createBlock(VWindowItem,{key:0},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("communs.texteAucunNom"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("communs.indiceNom"),"noms-initiaux":L.value,"autorisation-modification":!0,onAjusterNoms:F},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1})),(openBlock(),createBlock(VWindowItem,{key:1},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("nues.nouvelle.texteAucuneDescription"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("nues.nouvelle.texteIndiceDescription"),"noms-initiaux":j.value,"autorisation-modification":!0,onAjusterNoms:U},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1})),(openBlock(),createBlock(VWindowItem,{key:2},{default:withCtx(()=>[createVNode(VRadioGroup,null,{default:withCtx(()=>[createVNode(VRadio,{value:"CJPI",class:"my-2"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_1$b,toDisplayString$1(unref(x)("nues.nouvelle.parInvitation")),1),createBaseVNode("p",_hoisted_2$6,toDisplayString$1(unref(x)("nues.nouvelle.indiceParInvitation")),1)])]),_:1}),createVNode(VRadio,{value:"IJPC",class:"my-2"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_3$4,toDisplayString$1(unref(x)("nues.nouvelle.ouverteTous")),1),createBaseVNode("p",_hoisted_4$3,toDisplayString$1(unref(x)("nues.nouvelle.indiceOuverteTous")),1)])]),_:1})]),_:1})]),_:1})),(openBlock(),createBlock(VWindowItem,{key:3},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(_sfc_main$G,{"importation-permise":!1},{activator:withCtx(({props:W})=>[createVNode(VListItem,mergeProps(W,{title:ye.$t("nues.nouvelle.ajoutTableau"),"prepend-icon":"mdi-plus"}),null,16,["title"])]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(Y.value,W=>(openBlock(),createBlock(_sfc_main$x,{key:W.clef,clef:W.clef,noms:W.noms,colonnes:W.cols,"modification-permise":"",onModifierNoms:O=>ne({clefTableau:W.clef,noms:O}),onNouvelleColonne:O=>re({clefTableau:W.clef,idVariable:O.idVariable,index:O.index,rgles:O.rgles}),onEffacerColonne:O=>X({clefTableau:W.clef,idColonne:O}),onEffacerTableau:()=>Z(W.clef)},null,8,["clef","noms","colonnes","onModifierNoms","onNouvelleColonne","onEffacerColonne","onEffacerTableau"]))),128))]),_:1})]),_:1})),(openBlock(),createBlock(VWindowItem,{key:4},{default:withCtx(()=>[createBaseVNode("div",_hoisted_5$3,[createBaseVNode("h3",_hoisted_6$3,toDisplayString$1(unref(x)("nues.nouvelle.texteCrer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:ce.value,onClick:ie[0]||(ie[0]=()=>ue())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("nues.nouvelle.texteBtnCration")),1)]),_:1},8,["loading"])])])]),_:1}))]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!V.value.actif,onClick:I},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,V.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!M.value.actif,onClick:D},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,M.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$a={class:"text-center"},_hoisted_2$5={class:"text-h6 font-weight-light mb-2"},_sfc_main$u=defineComponent$1({__name:"NouveauProjet",setup(t){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{mdAndUp:E}=useDisplay(),S=useRouter(),C=ref$1(!1),T=ref$1(0),B=["noms","descriptions","motsClefs","ajouterBds","confirmation"],A=computed(()=>{switch(B[T.value]){default:return""}}),I=computed(()=>{switch(B[T.value]){default:return""}}),D=()=>{switch(B[T.value]){default:T.value++;break}},M=()=>{switch(B[T.value]){default:T.value--;break}},V=computed(()=>{switch(B[T.value]){case"noms":return{actif:Object.keys(F.value).length>0,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),L=computed(()=>{switch(B[T.value]){case"noms":return{actif:!1,visible:!1};case"confirmation":return{actif:!re.value,visible:!0};default:return{actif:!0,visible:!0}}}),F=ref$1({}),j=ue=>{F.value=ue},U=ref$1({}),H=ue=>{U.value=ue},Y=ref$1([]),Z=ref$1([]),ne=ref$1(!1),re=ref$1(!1),X=async()=>{re.value=!0;const ue=await n?.projets.crerProjet();if(!ue)throw new Error("Projet non cr.");await n?.projets.sauvegarderNomsProjet({idProjet:ue,noms:Object.fromEntries(Object.entries(F.value))}),await n?.projets.sauvegarderDescriptionsProjet({idProjet:ue,descriptions:Object.fromEntries(Object.entries(U.value))}),await n?.projets.ajouterMotsClefsProjet({idProjet:ue,idsMotsClefs:Y.value}),await Promise.all(Z.value.map(async _e=>await n?.projets.ajouterBdProjet({idProjet:ue,idBd:_e}))),ce(),ne.value&&S.push(encodeURI(`/donnes/projet/${encodeURIComponent(ue)}`))},ce=()=>{F.value={},U.value={},Y.value=[],Z.value=[],T.value=0,re.value=!1,C.value=!1};return(ue,_e)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":_e[5]||(_e[5]=ye=>C.value=ye)},{activator:withCtx(({props:ye})=>[renderSlot(ue.$slots,"activator",normalizeProps(guardReactiveProps({props:ye})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(E)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(A.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(I.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:T.value,"onUpdate:modelValue":_e[4]||(_e[4]=ye=>T.value=ye),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("communs.texteAucunNom"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("communs.indiceNom"),"noms-initiaux":F.value,"autorisation-modification":!0,onAjusterNoms:j},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(_sfc_main$1Z,{"texte-aucun-nom":unref(x)("projets.nouveau.texteAucuneDescription"),"indice-langue":unref(x)("communs.indiceLangue"),"indice-nom":unref(x)("projets.nouveau.texteIndiceDescription"),"noms-initiaux":U.value,"autorisation-modification":!0,onAjusterNoms:H},null,8,["texte-aucun-nom","indice-langue","indice-nom","noms-initiaux"])]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(_sfc_main$H,{multiples:"",onSelectionnee:_e[0]||(_e[0]=ye=>Y.value=ye)})]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(_sfc_main$L,{multiples:"",onSelectionnee:_e[1]||(_e[1]=ye=>Z.value=ye)})]),_:1}),createVNode(VWindowItem,{value:4},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$a,[createBaseVNode("h3",_hoisted_2$5,toDisplayString$1(unref(x)("projets.nouveau.texteCrer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:re.value,onClick:_e[2]||(_e[2]=()=>X())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("projets.nouveau.texteBtnCration")),1)]),_:1},8,["loading"])]),createVNode(VCheckbox,{modelValue:ne.value,"onUpdate:modelValue":_e[3]||(_e[3]=ye=>ne.value=ye)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("projets.nouveau.ouvrirAprsCration")),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!L.value.actif,onClick:M},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,L.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!V.value.actif,onClick:D},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,V.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$t=defineComponent$1({__name:"CarteProjet",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),x=ref$1({});enregistrercoute(_?.projets.suivreNomsProjet({idProjet:n.id,f:A=>x.value=A}));const E=async A=>{const{Effacer:I,Ajouter:D}=ajusterTexteTraductible({anciennes:x.value,nouvelles:A});for(const M of I)await _?.projets.effacerNomProjet({idProjet:n.id,langue:M});await _?.projets.sauvegarderNomsProjet({idProjet:n.id,noms:D})},S=ref$1({});enregistrercoute(_?.projets.suivreDescriptionsProjet({idProjet:n.id,f:A=>S.value=A}));const C=async A=>{const{Effacer:I,Ajouter:D}=ajusterTexteTraductible({anciennes:S.value,nouvelles:A});for(const M of I)await _?.projets.effacerDescriptionProjet({idProjet:n.id,langue:M});await _?.projets.sauvegarderDescriptionsProjet({idProjet:n.id,descriptions:D})},T=ref$1();enregistrercoute(_?.rseau?.suivreAuteursProjet({idProjet:n.id,f:A=>T.value=A}));const B=async()=>{await _?.projets.effacerProjet({idProjet:n.id})};return(A,I)=>(openBlock(),createBlock(_sfc_main$1B,{id:A.id,noms:x.value,descriptions:S.value,auteurs:T.value,"fichiers-epinglables":!0,onAjusterNoms:E,onAjusterDescriptions:C,onEffacer:B},null,8,["id","noms","descriptions","auteurs"]))}}),_hoisted_1$9={class:"text-center"},_sfc_main$s=defineComponent$1({__name:"CarteNue",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),S=ref$1({});enregistrercoute(_?.nues.suivreNomsNue({idNue:n.id,f:D=>S.value=D}));const C=async D=>{const{Effacer:M,Ajouter:V}=ajusterTexteTraductible({anciennes:S.value,nouvelles:D});for(const L of M)await _?.nues.effacerNomNue({idNue:n.id,langue:L});await _?.nues.sauvegarderNomsNue({idNue:n.id,noms:V})},T=ref$1({});enregistrercoute(_?.nues.suivreDescriptionsNue({idNue:n.id,f:D=>T.value=D}));const B=async D=>{const{Effacer:M,Ajouter:V}=ajusterTexteTraductible({anciennes:T.value,nouvelles:D});for(const L of M)await _?.nues.effacerDescriptionNue({idNue:n.id,langue:L});await _?.nues.sauvegarderDescriptionsNue({idNue:n.id,descriptions:V})},A=ref$1();enregistrercoute(_?.rseau?.suivreAuteursBd({idBd:n.id,f:D=>A.value=D}));const I=async()=>{await _?.nues.effacerNue({idNue:n.id})};return(D,M)=>(openBlock(),createBlock(_sfc_main$1B,{id:D.id,noms:S.value,descriptions:T.value,auteurs:A.value,"fichiers-epinglables":!0,onAjusterNoms:M[1]||(M[1]=V=>C(V)),onAjusterDescriptions:M[2]||(M[2]=V=>B(V)),onEffacer:M[3]||(M[3]=()=>I())},{activator:withCtx(({props:V})=>[renderSlot(D.$slots,"activator",normalizeProps(guardReactiveProps({props:V})))]),default:withCtx(()=>[createVNode(VDivider,{class:"mb-2"}),createBaseVNode("div",_hoisted_1$9,[createVNode(VBtn,{variant:"outlined","append-icon":"mdi-open-in-new",onClick:M[0]||(M[0]=V=>D.$router.push(encodeURI(`/donnes/nue/${encodeURIComponent(D.id)}`)))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("nues.carteNue.ouvrirNue")),1)]),_:1})])]),_:3},8,["id","noms","descriptions","auteurs"]))}}),_hoisted_1$8={class:"text-center"},_sfc_main$r=defineComponent$1({__name:"MesDonnes",setup(t){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{obtImageDco:E}=utiliserImagesDco(),S=E("logoBD"),C=ref$1(0),T=[{icne:"mdi-key",texte:x("pages.mesDonnes.motsClefs"),clef:"motsClefs"},{icne:"mdi-variable",texte:x("pages.mesDonnes.variables"),clef:"variables"},{icne:"mdi-database-outline",texte:x("pages.mesDonnes.bds"),clef:"bds"},{icne:"mdi-folder-outline",texte:x("pages.mesDonnes.projets"),clef:"projets"},{icne:"mdi-account-group-outline",texte:x("pages.mesDonnes.nues"),clef:"nues"}],B=ref$1();enregistrercoute(n?.motsClefs.suivreMotsClefs({f:F=>B.value=F}));const A=ref$1();enregistrercoute(n?.variables.suivreVariables({f:F=>A.value=F}));const I=ref$1();enregistrercoute(n?.bds.suivreBds({f:F=>I.value=F}));const D=ref$1();enregistrercoute(n?.projets.suivreProjets({f:F=>D.value=F}));const M=ref$1();enregistrercoute(n?.nues.suivreNues({f:F=>M.value=F}));const V=ref$1(),L=ref$1();return enregistrerRecherche({requte:V,rfRsultat:L,fRecherche:async({requte:F,nOuProfondeur:j,rfRsultat:U})=>await n?.recherche.rechercherBdsSelonTexte({texte:F,f:H=>U.value=H,nRsultatsDsirs:j})}),(F,j)=>(openBlock(),createElementBlock("div",_hoisted_1$8,[createVNode(_sfc_main$12,{titre:unref(x)("pages.mesDonnes.titre"),image:unref(S)},null,8,["titre","image"]),createVNode(VContainer,{class:"pt-0"},{default:withCtx(()=>[createVNode(VCard,{variant:"flat"},{default:withCtx(()=>[createVNode(VCardText,{class:"pt-0"},{default:withCtx(()=>[createVNode(VTextField,{modelValue:V.value,"onUpdate:modelValue":j[0]||(j[0]=U=>V.value=U),variant:"outlined","prepend-inner-icon":"mdi-magnify"},null,8,["modelValue"]),createVNode(VChipGroup,{modelValue:C.value,"onUpdate:modelValue":j[1]||(j[1]=U=>C.value=U),color:"primary",mandatory:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(T,U=>(openBlock(),createBlock(VChip,{key:U.clef,class:"mx-2",variant:"outlined","prepend-icon":U.icne},{default:withCtx(()=>[createTextVNode(toDisplayString$1(U.texte),1)]),_:2},1032,["prepend-icon"]))),128))]),_:1},8,["modelValue"]),createVNode(VWindow,{modelValue:C.value,"onUpdate:modelValue":j[2]||(j[2]=U=>C.value=U)},{default:withCtx(()=>[(openBlock(),createBlock(VWindowItem,{key:0},{default:withCtx(()=>[createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(_sfc_main$1k,null,{activator:withCtx(({props:U})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(U)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.mesDonnes.nouveauMotClef")),1)]),_:1})]),_:2},1040),createVNode(VDivider,{class:"mb-2"})]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(B.value,U=>(openBlock(),createBlock(_sfc_main$1h,{id:U,key:U},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$1m,mergeProps(H,{id:U}),null,16,["id"])]),_:2},1032,["id"]))),128))]),_:1})]),_:1})),(openBlock(),createBlock(VWindowItem,{key:1},{default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(_sfc_main$D,null,{activator:withCtx(({props:U})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(U)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.mesDonnes.nouvelleVariable")),1)]),_:1})]),_:2},1040),createVNode(VDivider)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(A.value,U=>(openBlock(),createBlock(_sfc_main$1z,{id:U,key:U},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$1y,mergeProps(H,{id:U}),null,16,["id"])]),_:2},1032,["id"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})),(openBlock(),createBlock(VWindowItem,{key:2},{default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(_sfc_main$w,null,{activator:withCtx(({props:U})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(U)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.mesDonnes.nouvelleBd")),1)]),_:1})]),_:2},1040),createVNode(VDivider)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(I.value,U=>(openBlock(),createBlock(_sfc_main$19,{id:U,key:U},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$1x,mergeProps(H,{id:U}),null,16,["id"])]),_:2},1032,["id"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})),(openBlock(),createBlock(VWindowItem,{key:3},{default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(_sfc_main$u,null,{activator:withCtx(({props:U})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(U)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.mesDonnes.nouveauProjet")),1)]),_:1})]),_:2},1040),createVNode(VDivider)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(D.value,U=>(openBlock(),createBlock(_sfc_main$t,{id:U,key:U},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$1u,mergeProps(H,{id:U}),null,16,["id"])]),_:2},1032,["id"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})),(openBlock(),createBlock(VWindowItem,{key:4},{default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(_sfc_main$v,null,{activator:withCtx(({props:U})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(U)),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode("mdi-plus")]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("pages.mesDonnes.nouvelleNue")),1)]),_:1})]),_:2},1040),createVNode(VDivider)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(M.value,U=>(openBlock(),createBlock(_sfc_main$s,{id:U,key:U},{activator:withCtx(({props:H})=>[createVNode(_sfc_main$1s,mergeProps(H,{id:U}),null,16,["id"])]),_:1},8,["id"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]))}}),_hoisted_1$7={class:"text-center"},_hoisted_2$4={key:0},_hoisted_3$3={key:1},_hoisted_4$2={class:"text-center"},_hoisted_5$2={class:"text-center"},_hoisted_6$2={class:"text-h6 font-weight-light mb-2"},_sfc_main$q=defineComponent$1({__name:"ImporterOuExporter",props:{type:{},automatiser:{type:Boolean},infoObjet:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),{mdAndUp:E}=useDisplay(),S=inject$1("constl"),C=!isNode&&!isElectronMain,T=ref$1(!1),B=["importerOuExporter","objetConstellation","sourceImportation","correspondancesImportation","dossierExportation","inclureSFIPExportation","languesExportation","formatDocExportation","voulezVousAutomatiser","frquence","dispositif","confirmation"],A=ref$1(B.indexOf(n.type?n.infoObjet?n.type==="exportation"?"dossierExportation":"sourceImportation":"objetConstellation":"importerOuExporter")),I=ref$1(n.type),D=ref$1(),M=()=>{switch(B[A.value]){case"importerOuExporter":A.value=B.indexOf(n.infoObjet?I.value==="importation"?"sourceImportation":"dossierExportation":"objetConstellation");break;case"correspondancesImportation":case"formatDocExportation":A.value=B.indexOf(n.automatiser?"frquence":"voulezVousAutomatiser");break;default:A.value++;break}},V=()=>{const Re=B[A.value];switch(Re){case"confirmation":A.value=B.indexOf(D.value?"dispositif":I.value==="importation"?"correspondancesImportation":"formatDocExportation");break;case"voulezVousAutomatiser":A.value=B.indexOf(I.value==="importation"?"correspondancesImportation":"formatDocExportation");break;case"sourceImportation":case"dossierExportation":A.value=B.indexOf(n.infoObjet?n.type?Re:"importerOuExporter":"objetConstellation");break;default:A.value--;break}},L=computed(()=>{switch(B[A.value]){case"importerOuExporter":return{actif:!1,visible:!1};case"objetConstellation":return{actif:!!(Z.value&&ne.value),visible:!0};case"sourceImportation":return{actif:!!we.value,visible:!0};case"correspondancesImportation":return{actif:!!$e.value,visible:!0};case"dossierExportation":return{actif:!!ce.value,visible:!0};case"inclureSFIPExportation":return{actif:!!ue.value,visible:!0};case"languesExportation":return{actif:!!ge.value,visible:!0};case"formatDocExportation":return{actif:!!Se.value,visible:!0};case"voulezVousAutomatiser":return{actif:ve.value!==void 0,visible:!0};case"frquence":return{actif:!!me.value,visible:!0};case"dispositif":return{actif:!!Be.value,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),F=computed(()=>{switch(B[A.value]){case"importerOuExporter":return{actif:!1,visible:!1};case"confirmation":return{actif:!Ae.value,visible:!0};default:return{actif:!0,visible:!0}}}),j=()=>{I.value="importation",A.value=B.indexOf("sourceImportation")},U=()=>{I.value="exportation",A.value=B.indexOf("dossierExportation")},H=computed(()=>{switch(B[A.value]){case"importerOuExporter":return x("communs.importerOuExporter.titreImporterOuExporter");case"objetConstellation":return x("communs.importerOuExporter.titreObjetConstellation");case"sourceImportation":return x("communs.importerOuExporter.titreSourceImportation");case"correspondancesImportation":return x("communs.importerOuExporter.titreCorrespondancesImportation");case"dossierExportation":return x("communs.importerOuExporter.titreDossierExportation");case"inclureSFIPExportation":return x("communs.importerOuExporter.titreInclureSFIPExportation");case"languesExportation":return x("communs.importerOuExporter.titreLanguesExportation");case"formatDocExportation":return x("communs.importerOuExporter.titreFormatDocExportation");case"voulezVousAutomatiser":return x("communs.importerOuExporter.titreVoulezVousAutomatiser");case"frquence":return x("communs.importerOuExporter.titreFrquence");case"dispositif":return x("communs.importerOuExporter.titreDispositif");case"confirmation":return x("communs.importerOuExporter.titreconfirmation");default:return""}}),Y=computed(()=>{switch(B[A.value]){case"importerOuExporter":return x("communs.importerOuExporter.sousTitreImporterOuExporter");case"objetConstellation":return x("communs.importerOuExporter.sousTitreObjetConstellation");case"sourceImportation":return x("communs.importerOuExporter.sousTitreSourceImportation");case"correspondancesImportation":return x("communs.importerOuExporter.sousTitreCorrespondancesImportation");case"dossierExportation":return x("communs.importerOuExporter.sousTitreDossierExportation");case"inclureSFIPExportation":return x("communs.importerOuExporter.sousTitreInclureSFIPExportation");case"languesExportation":return x("communs.importerOuExporter.sousTitreLanguesExportation");case"formatDocExportation":return x("communs.importerOuExporter.sousTitreFormatDocExportation");case"voulezVousAutomatiser":return x("communs.importerOuExporter.sousTitreVoulezVousAutomatiser");case"frquence":return x("communs.importerOuExporter.sousTitreFrquence");case"dispositif":return x("communs.importerOuExporter.sousTitreDispositif");case"confirmation":return x("communs.importerOuExporter.sousTitreconfirmation");default:return""}}),Z=ref$1(n.infoObjet?.id),ne=ref$1(n.infoObjet?.typeObjet),re=ref$1(),X=["tableau","bd"],ce=ref$1(),ue=ref$1(),_e=ref$1(),ye=ref$1(),ie=ref$1(),W=enregistrercouteDynamique({params:{idBd:Z},fcoute:(Re,Ne)=>S?.bds.suivreTableauxBd({idBd:Re.idBd,f:Ne})}),O=computed(()=>W.value?.map(Re=>Re.id)),z=ref$1(),J=computed(()=>{const Re=_e.value?.split(".").pop();if(Re)return Re==="json"?Re:"tableau"}),ee=ref$1(),ae=computed(()=>ie.value==="fichier"?J.value:ee.value),oe=ref$1(),se=ref$1(),G=ref$1(),q=ref$1(),te=ref$1(),fe=ref$1(),he=()=>{if(!oe.value)throw new Error("Clefs racine JSON non dfinies.");if(!se.value)throw new Error("Clefs lments JSON non dfinies.");if(!G.value)throw new Error("Colonnes JSON non dfinies.");return{formatDonnes:"json",clefsRacine:oe.value,clefslments:se.value,cols:G.value}},Ee=()=>{if(!q.value)throw new Error("Nom tableau non dfini.");if(!te.value)throw new Error("Colonnes feuille calcul non dfinies.");return{formatDonnes:"feuilleCalcul",nomTableau:q.value,cols:te.value,optionsXLSX:fe.value}},we=computed(()=>{if(!ie.value)throw new Error("Format fichier importation non dfini.");if(ie.value==="fichier"){if(!_e.value)throw new Error("Fichier importation non dfini.");return ae.value==="json"?{typeSource:ie.value,adresseFichier:_e.value,info:he()}:{typeSource:ie.value,adresseFichier:_e.value,info:Ee()}}else{if(!ye.value)throw new Error("URL importation non dfini.");if(ae.value==="json")return{typeSource:ie.value,url:ye.value,info:he()};{const Re=xe(ye.value);return{typeSource:ie.value,url:Re,info:Ee()}}}}),xe=Re=>{const Ne=new URL(Re);if(Ne.hostname==="docs.google.com"&&!Ne.href.includes("gviz"))try{const Ke=Re.split("gid=")[1];return`https://docs.google.com/spreadsheets/d/${Re.split("spreadsheets/d/")[1].split("/edit#")[0]}/gviz/tq?tqx=out:csv&sheet=${Ke}`}catch{return Re}return Re},$e=computed(()=>{switch(ae.value){case"json":return!!(oe.value&&se.value&&G.value);case"tableau":return!!(q.value&&te.value&&fe.value);default:return!1}}),ge=ref$1(),Se=ref$1(),me=ref$1(),Be=ref$1(),ve=ref$1(),Ae=ref$1(!1),Ve=async()=>{if(!Z.value)throw new Error("Id objet non dfini.");if(I.value==="importation"){if(!we.value)throw new Error("Source importation non dfinie.");if(!ne.value||!X.includes(ne.value))throw new Error(`Objet de type ${ne.value} ne peut pas tre import.`);switch(ne.value){case"bd":case"tableau":if(ne.value==="bd"&&!re.value)throw new Error("Source tableau importation non dfinie.");await S?.automatisations.ajouterAutomatisationImporter({idTableau:ne.value==="tableau"?Z.value:re.value,source:we.value,frquence:me.value,dispositif:Be.value});break;default:throw new Error(`Impossible d'importer vers objet de type ${ne.value}.`)}}else if(I.value==="exportation"){if(!ne.value)throw new Error("Type objet non dfini.");if(!Se.value)throw new Error("Format document exportation non dfini.");if(!ce.value)throw new Error("Dossier exportation non dfini.");if(!ue.value)throw new Error("Inclure fichiers SFIP exportation non spcifi.");if(!Be.value)throw new Error("Dispositif exportation non dfini.");await S?.automatisations.ajouterAutomatisationExporter({id:Z.value,typeObjet:ne.value,formatDoc:Se.value,inclureFichiersSFIP:ue.value,dossier:ce.value,langues:ge.value,frquence:me.value,dispositifs:[Be.value]})}else throw new Error("Cheminement non dfini:"+I.value)},Pe=async()=>{if(Ae.value=!0,!Z.value)throw new Error("Id objet cible non dfinie.");if(!n.automatiser){if(I.value==="importation"){if(!Be.value)throw new Error("Dispositif importation non dfini.");const Ne={type:"importation",id:Math.random().toString(),idTableau:Z.value,dispositif:Be.value,source:we.value},qe=await S?.automatisations.obtDonnesImportation(Ne);qe&&await S?.tableaux.importerDonnes({idTableau:Z.value,donnes:qe})}else if(I.value==="exportation"){if(!Se.value)throw new Error("Format document exportation non dfini.");switch(ne.value){case"tableau":{const Ne=await S?.tableaux.exporterDonnes({idTableau:Z.value,langues:ge.value});if(!Ne)throw new Error("Constellation non dfinie.");await S?.bds.exporterDocumentDonnes({donnes:Ne,formatDoc:Se.value,inclureFichiersSFIP:ue.value,dossier:ce.value});break}case"bd":{const Ne=await S?.bds.exporterDonnes({idBd:Z.value,langues:ge.value});if(!Ne)throw new Error("Constellation non dfinie.");await S?.bds.exporterDocumentDonnes({donnes:Ne,formatDoc:Se.value,inclureFichiersSFIP:ue.value,dossier:ce.value});break}case"projet":{const Ne=await S?.projets.exporterDonnes({idProjet:Z.value,langues:ge.value});if(!Ne)throw new Error("Constellation non dfinie.");await S?.projets.exporterDocumentDonnes({donnes:Ne,formatDoc:Se.value,inclureFichiersSFIP:ue.value,dossier:ce.value});break}case"nue":{const Ne=await S?.nues.exporterDonnesNue({idNue:Z.value,langues:ge.value,nRsultatsDsirs:1e3});if(!Ne)throw new Error("Constellation non dfinie.");await S?.bds.exporterDocumentDonnes({donnes:Ne,formatDoc:Se.value,inclureFichiersSFIP:ue.value,dossier:ce.value});break}}}}(n.automatiser||ve.value)&&await Ve(),Ae.value=!1,T.value=!1};return(Re,Ne)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":Ne[3]||(Ne[3]=qe=>T.value=qe)},{activator:withCtx(({props:qe})=>[renderSlot(Re.$slots,"activator",normalizeProps(guardReactiveProps({props:qe})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(E)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(H.value)+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:Ne[0]||(Ne[0]=qe=>T.value=!1)})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(Y.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:A.value,"onUpdate:modelValue":Ne[2]||(Ne[2]=qe=>A.value=qe),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$7,[createVNode(VBtn,{class:"ma-3",variant:"outlined","append-icon":"mdi-import",onClick:j},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.importerOuExporter.importer")),1)]),_:1}),createVNode(VBtn,{class:"ma-3",variant:"outlined","append-icon":"mdi-export",onClick:U},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.importerOuExporter.exporter")),1)]),_:1})])]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[ae.value==="tableau"?(openBlock(),createElementBlock("span",_hoisted_2$4,[createVNode(VSelect,{items:z.value},null,8,["items"]),createVNode(VSelect,{items:O.value},null,8,["items"]),createVNode(VCombobox,{chips:""})])):ae.value==="json"?(openBlock(),createElementBlock("span",_hoisted_3$3,[createVNode(VSelect,{multiple:"",chips:""}),createVNode(VSelect,{multiple:"",chips:""})])):createCommentVNode("",!0)]),_:1}),createVNode(VWindowItem,{value:9},{default:withCtx(()=>[createBaseVNode("div",_hoisted_4$2,[createVNode(VBtn,{class:"ma-3",variant:"flat",color:"primary",disabled:unref(C)&&(I.value==="exportation"||ie.value==="fichier")},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.importerOuExporter.automatiser")),1)]),_:1},8,["disabled"]),createVNode(VBtn,{class:"ma-3",variant:"outlined"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.importerOuExporter.nePasAutomatiser")),1)]),_:1})])]),_:1}),createVNode(VWindowItem,{value:11},{default:withCtx(()=>[createBaseVNode("div",_hoisted_5$2,[createBaseVNode("h3",_hoisted_6$2,toDisplayString$1(unref(x)("communs.importerOuExporter.messageConfirmer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined",loading:Ae.value,onClick:Ne[1]||(Ne[1]=()=>Pe())},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.importerOuExporter.confirmer")),1)]),_:1},8,["loading"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!F.value.actif,onClick:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,F.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!L.value.actif,onClick:M},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,L.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$p=defineComponent$1({__name:"ItemAutomatisationsObjet",props:{idObjet:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{formatterChiffre:S}=utiliserNumration(),C=ref$1();enregistrercoute(_?.automatisations.suivreAutomatisations({f:I=>C.value=I}));const T=computed(()=>C.value?C.value.filter(I=>(I.type==="exportation"?I.idObjet:I.idTableau)===n.idObjet):void 0),B=computed(()=>T.value?.length||0),A=S(B);return(I,D)=>(openBlock(),createBlock(VListItem,{"prepend-icon":"mdi-lightning-bolt"},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("automatisations.item.titre",{n:unref(A)},B.value)),1)]),_:1})]),_:1}))}}),_sfc_main$o=defineComponent$1({__name:"JetonFichierImportation",props:{spcification:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),E=inject$1("constl"),S=computed(()=>n.spcification.source.typeSource==="fichier"?T.value===void 0:!1),C=computed(()=>n.spcification.source.typeSource==="url"||typeof T.value=="string"),T=ref$1();watchEffect(async()=>{n.spcification.source.typeSource==="fichier"&&(T.value=await E?.automatisations.rsoudreAdressePriveFichier({clef:n.spcification.source.adresseFichier}))});const B=computed(()=>n.spcification.source.typeSource==="fichier"?"mdi-file":"mdi-web"),A=computed(()=>n.spcification.source.typeSource==="fichier"?T.value===void 0?x("automatisation.rechercheFichier"):T.value===null?x("automatisations.fichierIntrouvable"):path.parse(T.value).base:n.spcification.source.url.slice(-10)+x("communs.troisPetitsPoints"));return(I,D)=>(openBlock(),createBlock(VChip,null,{prepend:withCtx(()=>[S.value?(openBlock(),createBlock(VProgressCircular,{key:0,indeterminate:"",color:"primary"})):C.value?(openBlock(),createBlock(VIcon,{key:1},{default:withCtx(()=>[createTextVNode(toDisplayString$1(B.value),1)]),_:1})):(openBlock(),createBlock(VIcon,{key:2,color:"error"},{default:withCtx(()=>[createTextVNode(" mdi-alert ")]),_:1}))]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(A.value),1)]),_:1}))}}),_sfc_main$n=defineComponent$1({__name:"JetonStatutAutomatisation",props:{statut:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),E=computed(()=>{switch(n.statut.type){case"erreur":return{icne:"mdi-alert",couleur:"error"};case"programme":return{icne:"mdi-check",couleur:"success"};case"sync":return{icne:"mdi-sync",couleur:"primary"};case"coute":return{icne:"",couleur:"success"};default:throw new Error(JSON.stringify(n.statut))}}),S=ref$1(new Date().getTime());let C;onMounted(()=>{C=window.setInterval(()=>S.value=new Date().getTime(),1e3)}),onUnmounted(()=>{C&&clearInterval(C)});const T=computed(()=>{switch(n.statut.type){case"coute":return x("auto.jetonStatut.coute");case"sync":return x("auto.jetonStatut.sync",{depuis:S.value-n.statut.depuis});case"programme":return x("auto.jetonStatut.programme",{dans:n.statut.-S.value});case"erreur":return n.statut.prochaineProgramme?x("auto.jetonStatut.erreurRssayer",{dans:n.statut.prochaineProgramme-S.value}):x("auto.jetonStatut.erreur");default:throw new Error(n.statut)}});return(B,A)=>(openBlock(),createBlock(VChip,null,{prepend:withCtx(()=>[B.statut.type==="sync"?(openBlock(),createBlock(VProgressCircular,{key:0,indeterminate:""},{default:withCtx(()=>[createVNode(VIcon,{color:E.value.couleur},{default:withCtx(()=>[createTextVNode(toDisplayString$1(E.value.icne),1)]),_:1},8,["color"])]),_:1})):(openBlock(),createBlock(VIcon,{key:1,color:E.value.couleur},{default:withCtx(()=>[createTextVNode(toDisplayString$1(E.value.icne),1)]),_:1},8,["color"]))]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(T.value),1)]),_:1}))}}),_sfc_main$m=defineComponent$1({__name:"ItemAutomatisation",props:{spcification:{}},setup(t){const n=t,_=inject$1("constl"),{traduireNom:x}=utiliserLangues(),E=ref$1({});onMounted(()=>{if(n.spcification.type==="importation")enregistrercoute(_?.tableaux.suivreNomsTableau({idTableau:n.spcification.idTableau,f:A=>E.value=A}));else switch(n.spcification.typeObjet){case"tableau":enregistrercoute(_?.tableaux.suivreNomsTableau({idTableau:n.spcification.idObjet,f:A=>E.value=A}));break;case"projet":enregistrercoute(_?.projets.suivreNomsProjet({idProjet:n.spcification.idObjet,f:A=>E.value=A}));break;case"bd":enregistrercoute(_?.bds.suivreNomsBd({idBd:n.spcification.idObjet,f:A=>E.value=A}));break;case"nue":enregistrercoute(_?.nues.suivreNomsNue({idNue:n.spcification.idObjet,f:A=>E.value=A}));break;default:throw new Error(JSON.stringify(n.spcification))}});const S=x(E),C=computed(()=>{if(n.spcification.type==="importation")return"mdi-table";switch(n.spcification.typeObjet){case"tableau":return"mdi-table";case"bd":return"mdi-database-outline";case"projet":return"mdi-folder-outline";case"nue":return"mdi-bird";default:throw new Error(JSON.stringify(n.spcification))}}),T=ref$1();enregistrercoute(_?.automatisations.suivretatAutomatisations({f:A=>T.value=A}));const B=computed(()=>T.value?T.value[n.spcification.id]:void 0);return(A,I)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.spcification.type==="exportation"?"mdi-export":"mdi-import"),1)]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.value),1)]),_:1}),createTextVNode(" "+toDisplayString$1(unref(S)),1)]),_:1}),A.spcification.type==="importation"?(openBlock(),createBlock(_sfc_main$o,{key:0,spcification:A.spcification},null,8,["spcification"])):createCommentVNode("",!0),B.value?(openBlock(),createBlock(_sfc_main$n,{key:1,statut:B.value},null,8,["statut"])):(openBlock(),createBlock(unref(VSkeletonLoader),{key:2,type:"chip"}))]),_:1}))}}),_hoisted_1$6={key:0},_sfc_main$l=defineComponent$1({__name:"CarteAutomatisationsObjet",props:{idObjet:{},typeObjet:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),{mdAndUp:E}=useDisplay(),S=inject$1("constl"),C=ref$1();enregistrercoute(S?.suivrePermission({idObjet:n.idObjet,f:M=>C.value=M}));const T=ref$1();enregistrercoute(S?.automatisations.suivreAutomatisations({f:M=>T.value=M}));const B=ref$1();onMounted(()=>{n.typeObjet==="bd"&&enregistrercoute(S?.bds.suivreTableauxBd({idBd:n.idObjet,f:M=>B.value=M}))});const A=computed(()=>{const M=n.typeObjet==="bd"?[n.idObjet,(B.value||[]).filter(V=>V.id)]:[n.idObjet];return T.value?.filter(V=>M.includes(V.type==="exportation"?V.idObjet:V.idTableau))}),I=computed(()=>A.value?.filter(M=>M.type==="importation")||[]),D=computed(()=>A.value?.filter(M=>M.type==="exportation")||[]);return(M,V)=>(openBlock(),createBlock(VDialog,null,{activator:withCtx(({props:L})=>[renderSlot(M.$slots,"activator",normalizeProps(guardReactiveProps({props:L})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(E)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("automatisations.carte.titre")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[(M.typeObjet==="bd"||M.typeObjet=="tableau")&&C.value?(openBlock(),createElementBlock("span",_hoisted_1$6,[createTextVNode(toDisplayString$1(unref(x)("automatisations.carte.importations"))+" ",1),createVNode(VDivider),createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-plus"},{default:withCtx(()=>[createVNode(_sfc_main$q,{"info-objet":{id:M.idObjet,typeObjet:M.typeObjet},type:"importation",automatiser:""},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("automatisations.carte.ajouterImportation")),1)]),_:1})]),_:1},8,["info-objet"])]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(I.value,L=>(openBlock(),createBlock(_sfc_main$m,{key:L.id,spcification:L},null,8,["spcification"]))),128)),I.value.length?createCommentVNode("",!0):(openBlock(),createBlock(VListItem,{key:0},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("automatisations.carte.aucuneImportation")),1)]),_:1})]),_:1}))]),_:1})])):createCommentVNode("",!0),createTextVNode(" "+toDisplayString$1(unref(x)("automatisations.carte.exportations"))+" ",1),createVNode(VDivider),createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-plus"},{default:withCtx(()=>[createVNode(_sfc_main$q,{"info-objet":{id:M.idObjet,typeObjet:M.typeObjet},type:"exportation",automatiser:""},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("automatisations.carte.ajouterExportation")),1)]),_:1})]),_:1},8,["info-objet"])]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(D.value,L=>(openBlock(),createBlock(_sfc_main$m,{key:L.id,spcification:L},null,8,["spcification"]))),128)),D.value.length?createCommentVNode("",!0):(openBlock(),createBlock(VListItem,{key:0},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("automatisations.carte.aucuneExportation")),1)]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1},8,["max-width"])]),_:3}))}}),_sfc_main$k=defineComponent$1({__name:"ItemAuteurs",props:{auteurs:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),{formatterChiffre:E}=utiliserNumration(),S=computed(()=>(n.auteurs||[]).filter(A=>A.accept)),C=computed(()=>{if(S.value.length)return S.value[Math.floor(S.value.length*Math.random())]?.idCompte}),T=computed(()=>S.value.length),B=E(T);return(A,I)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(_sfc_main$24,{id:C.value},null,8,["id"])]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("auteurs.item.titre",{n:unref(B)},T.value)),1)]),_:1})]),_:1}))}}),_sfc_main$j=defineComponent$1({__name:"ItemLicence",props:{licence:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),S=ref$1();enregistrercoute(_?.licences.suivreLicences({f:T=>S.value=T}));const C=computed(()=>n.licence&&S.value&&Object.keys(S.value).includes(n.licence));return(T,B)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,{start:"",color:C.value?"primary":"error"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.value?"mdi-scale-balance":"mdi-alert"),1)]),_:1},8,["color"])]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.value?unref(E)(`licences.info.${T.licence}.abr`):T.licence),1)]),_:1})]),_:1}))}}),_hoisted_1$5={class:"mb-0 text-overline"},_hoisted_2$3={class:"mb-0 text-overline"},_sfc_main$i=defineComponent$1({__name:"CarteRplicationsObjet",props:{id:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),{mdAndUp:E}=useDisplay(),{formatterChiffre:S}=utiliserNumration(),C=inject$1("constl"),T=ref$1(!1),B=ref$1();enregistrercoute(C?.rseau?.suivreRplications({idObjet:n.id,f:ne=>B.value=ne,profondeur:10}));const A=computed(()=>B.value?.dispositifs),I=computed(()=>A.value?.length||0),D=S(I),M=computed(()=>B.value?.dispositifs.filter(ne=>!ne.vu)),V=computed(()=>M.value?.length||0),L=S(V),F=computed(()=>B.value?.membres),j=computed(()=>F.value?.length||0),U=S(j),H=computed(()=>B.value?.membres.filter(ne=>!ne.vu)),Y=computed(()=>H.value?.length||0),Z=S(Y);return(ne,re)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":re[2]||(re[2]=X=>T.value=X)},{activator:withCtx(({props:X})=>[renderSlot(ne.$slots,"activator",normalizeProps(guardReactiveProps({props:X})))]),default:withCtx(()=>[createVNode(VCard,{"max-width":unref(E)?700:300,class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("rplications.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"small",onClick:re[0]||(re[0]=X=>T.value=!1)})]),_:1}),createVNode(VCardSubtitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("rplications.sousTitre")),1)]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$5,toDisplayString$1(unref(x)("rplications.rpliquPar")),1),createVNode(VListGroup,null,{activator:withCtx(({props:X})=>[createVNode(VListItem,mergeProps(X,{lines:"two"}),{prepend:withCtx(()=>[createVNode(VAvatar,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(D)),1)]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("rplications.dispositifs"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-monitor-cellphone")]),_:1})]),_:1}),createVNode(VListItemSubtitle,{class:"text-success"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("rplications.enLigne",{n:unref(L)})),1)]),_:1})]),_:2},1040)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(A.value,X=>(openBlock(),createBlock(_sfc_main$1N,{key:X.idDispositif,"id-dispositif":X.idDispositif,"id-compte":X.idCompte,"vu-a":X.vu},{default:withCtx(()=>[createVNode(VChip,{"prepend-icon":X.fichiers?"mdi-folder-outline":"mdi-folder-off-outline",variant:"outlined",label:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(X.fichiers?unref(x)("rplications.avecFichiers"):unref(x)("rplications.sansFichiers")),1)]),_:2},1032,["prepend-icon"])]),_:2},1032,["id-dispositif","id-compte","vu-a"]))),128))]),_:1}),createBaseVNode("p",_hoisted_2$3,toDisplayString$1(unref(x)("rplications.reprsentant")),1),createVNode(VListGroup,null,{activator:withCtx(({props:X})=>[createVNode(VListItem,mergeProps(X,{lines:"two"}),createSlots({default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("rplications.membres"))+" ",1),createVNode(VIcon,{icon:"mdi-account",end:""})]),_:1}),H.value?(openBlock(),createBlock(VListItemSubtitle,{key:0,class:"text-success"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("rplications.enLigne",{n:unref(Z)})),1)]),_:1})):createCommentVNode("",!0)]),_:2},[F.value?{name:"prepend",fn:withCtx(()=>[createVNode(VAvatar,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(U)),1)]),_:1})]),key:"0"}:void 0]),1040)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(F.value,X=>(openBlock(),createBlock(_sfc_main$1X,{key:X.infoMembre.idCompte,compte:X.infoMembre.idCompte,"montrer-anonymes":!0},null,8,["compte"]))),128))]),_:1})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:re[1]||(re[1]=X=>T.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(x)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode("mdi-close")]),_:1})]),_:1})]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$4={key:1},_sfc_main$h=defineComponent$1({__name:"ItemRplicationsObjet",props:{id:{}},setup(t){const n=t,{useI18n:_}=_(),{t:x}=_(),{formatterChiffre:E}=utiliserNumration(),S=inject$1("constl"),C=ref$1();enregistrercoute(S?.rseau?.suivreRplications({idObjet:n.id,f:A=>C.value=A,profondeur:10}));const T=computed(()=>C.value?.dispositifs.length||0),B=E(T);return(A,I)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,{left:"",icon:"mdi-database-sync"})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[C.value===void 0?(openBlock(),createBlock(unref(VSkeletonLoader),{key:0,type:"chip"})):(openBlock(),createElementBlock("span",_hoisted_1$4,toDisplayString$1(C.value?unref(x)("rplications.nRplications",{n:unref(B)}):""),1))]),_:1})]),_:1}))}}),VBreadcrumbs$1="",makeVBreadcrumbsDividerProps=propsFactory({divider:[Number,String],...makeComponentProps()},"VBreadcrumbsDivider"),VBreadcrumbsDivider=genericComponent()({name:"VBreadcrumbsDivider",props:makeVBreadcrumbsDividerProps(),setup(t,n){let{slots:_}=n;return useRender(()=>createVNode("li",{class:["v-breadcrumbs-divider",t.class],style:t.style},[_?.default?.()??t.divider])),{}}}),makeVBreadcrumbsItemProps=propsFactory({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...makeComponentProps(),...makeRouterProps(),...makeTagProps({tag:"li"})},"VBreadcrumbsItem"),VBreadcrumbsItem=genericComponent()({name:"VBreadcrumbsItem",props:makeVBreadcrumbsItemProps(),setup(t,n){let{slots:_,attrs:x}=n;const E=useLink$1(t,x),S=computed(()=>t.active||E.isActive?.value),C=computed(()=>S.value?t.activeColor:t.color),{textColorClasses:T,textColorStyles:B}=useTextColor(C);return useRender(()=>createVNode(t.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":S.value,"v-breadcrumbs-item--disabled":t.disabled,[`${t.activeClass}`]:S.value&&t.activeClass},T.value,t.class],style:[B.value,t.style],"aria-current":S.value?"page":void 0},{default:()=>[E.isLink.value?createVNode("a",{class:"v-breadcrumbs-item--link",href:E.href.value,"aria-current":S.value?"page":void 0,onClick:E.navigate},[_.default?.()??t.title]):_.default?.()??t.title]})),{}}}),makeVBreadcrumbsProps=propsFactory({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:IconValue,items:{type:Array,default:()=>[]},...makeComponentProps(),...makeDensityProps(),...makeRoundedProps(),...makeTagProps({tag:"ul"})},"VBreadcrumbs"),VBreadcrumbs=genericComponent()({name:"VBreadcrumbs",props:makeVBreadcrumbsProps(),setup(t,n){let{slots:_}=n;const{backgroundColorClasses:x,backgroundColorStyles:E}=useBackgroundColor(toRef(t,"bgColor")),{densityClasses:S}=useDensity(t),{roundedClasses:C}=useRounded(t);provideDefaults({VBreadcrumbsDivider:{divider:toRef(t,"divider")},VBreadcrumbsItem:{activeClass:toRef(t,"activeClass"),activeColor:toRef(t,"activeColor"),color:toRef(t,"color"),disabled:toRef(t,"disabled")}});const T=computed(()=>t.items.map(B=>typeof B=="string"?{item:{title:B},raw:B}:{item:B,raw:B}));return useRender(()=>{const B=!!(_.prepend||t.icon);return createVNode(t.tag,{class:["v-breadcrumbs",x.value,S.value,C.value,t.class],style:[E.value,t.style]},{default:()=>[B&&createVNode("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[_.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!t.icon,defaults:{VIcon:{icon:t.icon,start:!0}}},_.prepend):createVNode(VIcon,{key:"prepend-icon",start:!0,icon:t.icon},null)]),T.value.map((A,I,D)=>{let{item:M,raw:V}=A;return createVNode(Fragment,null,[createVNode(VBreadcrumbsItem,mergeProps({key:M.title,disabled:I>=D.length-1},M),{default:_.title?()=>_.title?.({item:V,index:I}):void 0}),I<D.length-1&&createVNode(VBreadcrumbsDivider,null,{default:_.divider?()=>_.divider?.({item:V,index:I}):void 0})])}),_.default?.()]})}),{}}}),_hoisted_1$3={class:"mb-0 text-overline"},_hoisted_2$2={class:"d-flex flex-wrap"},_hoisted_3$2={class:"d-flex flex-wrap"},_hoisted_4$1={class:"text-overline"},_hoisted_5$1={key:0,class:"text-disabled"},_hoisted_6$1={class:"mb-0 text-overline"},_hoisted_7={key:0,class:"text-disabled"},_hoisted_8={class:"mb-0 text-overline"},_hoisted_9={key:0,class:"text--disabled"},_hoisted_10={class:"mb-0 text-overline"},_hoisted_11={key:1,class:"text-center"},_hoisted_12={class:"text-h5 mt-5"},_sfc_main$g=defineComponent$1({__name:"PageBD",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{mdAndUp:E}=useDisplay(),{isRtl:S}=useRtl(),{t:C}=x(),{traduireNom:T}=utiliserLangues(),{obtImageDco:B}=utiliserImagesDco(),A=B("vide"),I=ref$1();enregistrercoute(_?.suivrePermission({idObjet:n.id,f:J=>I.value=J}));const D=ref$1({}),M=T(D);enregistrercoute(_?.bds.suivreNomsBd({idBd:n.id,f:J=>D.value=J}));const V=async J=>{const{Effacer:ee,Ajouter:ae}=ajusterTexteTraductible({anciennes:D.value,nouvelles:J});for(const oe of ee)await _?.bds.effacerNomBd({idBd:n.id,langue:oe});await _?.bds.sauvegarderNomsBd({idBd:n.id,noms:ae})},L=ref$1({}),F=T(L);enregistrercoute(_?.bds.suivreDescriptionsBd({idBd:n.id,f:J=>L.value=J}));const j=async J=>{const{Effacer:ee,Ajouter:ae}=ajusterTexteTraductible({anciennes:L.value,nouvelles:J});for(const oe of ee)await _?.bds.effacerDescriptionBd({idBd:n.id,langue:oe});await _?.bds.sauvegarderDescriptionsBd({idBd:n.id,descriptions:ae})},U=ref$1(),H=computed(()=>{if(U.value)return URL.createObjectURL(new Blob([U.value],{type:"image"}))});enregistrercoute(_?.bds.suivreImage({idBd:n.id,f:J=>U.value=J}));const Y=B("logoBD"),Z=async J=>{J?await _?.profil.sauvegarderImage({image:J}):await _?.profil.effacerImage()},ne=ref$1();enregistrercoute(_?.bds.suivreVariablesBd({idBd:n.id,f:J=>ne.value=J}));const re=ref$1();enregistrercoute(_?.bds.suivreMotsClefsBd({idBd:n.id,f:J=>re.value=J}));const X=async J=>{const ee=J.filter(oe=>!re.value?.includes(oe)),ae=re.value?.filter(oe=>!J.includes(oe))||[];await _?.bds.ajouterMotsClefsBd({idBd:n.id,idsMotsClefs:ee}),await Promise.all(ae.map(oe=>_?.bds.effacerMotClefBd({idBd:n.id,idMotClef:oe})))},ce=ref$1(),ue=ref$1(),_e=computed(()=>{if(ue.value)return[...ue.value].sort((J,ee)=>J.id>ee.id?-1:1)});enregistrercoute(_?.bds.suivreTableauxBd({idBd:n.id,f:J=>ue.value=J}));const ye=ref$1();enregistrercoute(_?.rseau?.suivreAuteursBd({idBd:n.id,f:J=>ye.value=J}));const ie=ref$1();enregistrercoute(_?.bds.suivreLicenceBd({idBd:n.id,f:J=>ie.value=J}));const W=async J=>{await _?.bds.changerLicenceBd({idBd:n.id,licence:J})},O=computed(()=>[{title:C("navig.mesDonnes"),lien:encodeURI("/donnes/")},{title:M.value||n.id,disabled:!0}]),z=async()=>{await _?.bds.effacerBd({idBd:n.id})};return(J,ee)=>(openBlock(),createBlock(VContainer,null,{default:withCtx(()=>[createVNode(VCard,{flat:""},{default:withCtx(()=>[createVNode(VCardSubtitle,null,{default:withCtx(()=>[createVNode(VBreadcrumbs,{items:O.value,class:"pa-0"},{divider:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)?"mdi-chevron-left":"mdi-chevron-right"),1)]),_:1})]),title:withCtx(({item:ae})=>[createVNode(VBreadcrumbsItem,{disabled:ae.disabled,onClick:oe=>ae.lien&&J.$router.push(ae.lien)},{default:withCtx(()=>[createVNode(_sfc_main$23,{texte:ae.title,"longueur-max":35},null,8,["texte"])]),_:2},1032,["disabled","onClick"])]),_:1},8,["items"])]),_:1}),createVNode(ImageEditable,{"src-image":H.value,"img-defaut":unref(Y),editable:!!I.value,"taille-avatar":unref(E)?275:175,"max-taille-image":unref(MAX_TAILLE_IMAGE$4),onImageChangee:ee[0]||(ee[0]=ae=>Z(ae))},null,8,["src-image","img-defaut","editable","taille-avatar","max-taille-image"]),createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createVNode(_sfc_main$1E,{"indice-nom":unref(C)("objet.indiceNom"),"indice-langue":unref(C)("objet.indiceLangue"),"texte-aucun-nom":unref(C)("objet.texteAucunNom"),"noms-initiaux":D.value,titre:unref(C)("objet.titreDialogueNoms"),"sous-titre":unref(C)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!I.value,onAjusterNoms:V},{activator:withCtx(({props:ae})=>[createBaseVNode("span",normalizeProps(guardReactiveProps(ae)),[createTextVNode(toDisplayString$1(unref(M)||unref(C)("communs.baseCarteObjet.sansNom"))+" ",1),createVNode(VBtn,{icon:I.value?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),createVNode(_sfc_main$1Y,{id:J.id},null,8,["id"]),createVNode(VSpacer),createVNode(_sfc_main$1M,{id:J.id},{activator:withCtx(({props:ae})=>[createVNode(VTooltip,mergeProps(ae,{"open-delay":"200",location:"bottom",text:unref(C)("communs.pingler")}),{activator:withCtx(({props:oe})=>[createVNode(VBtn,mergeProps(oe,{icon:"",variant:"flat"}),{default:withCtx(()=>[createVNode(_sfc_main$1L,{id:J.id},null,8,["id"])]),_:2},1040)]),_:2},1040,["text"])]),_:1},8,["id"]),createVNode(_sfc_main$q,{"info-objet":{id:J.id,typeObjet:"bd"},type:I.value?void 0:"exportation"},{activator:withCtx(({props:ae})=>[createVNode(VTooltip,mergeProps(ae,{text:unref(C)("exporter.indice"),"open-delay":200,location:"bottom"}),{activator:withCtx(({props:oe})=>[createVNode(VBtn,mergeProps(oe,{icon:"mdi-download",variant:"flat"}),null,16)]),_:2},1040,["text"])]),_:1},8,["info-objet","type"]),createVNode(_sfc_main$1D,{id:J.id},{activator:withCtx(({props:ae})=>[createVNode(VTooltip,mergeProps(ae,{"open-delay":"200",location:"bottom",text:unref(C)("copier.indice")}),{activator:withCtx(({props:oe})=>[createVNode(VBtn,mergeProps(oe,{icon:"mdi-content-copy",variant:"flat"}),null,16)]),_:2},1040,["text"])]),_:1},8,["id"]),I.value?(openBlock(),createBlock(_sfc_main$1C,{key:0,onEffacer:z},{activator:withCtx(({props:ae})=>[createVNode(VTooltip,mergeProps(ae,{"open-delay":"200",location:"bottom",text:unref(C)("effacer.indice")}),{activator:withCtx(({props:oe})=>[createVNode(VBtn,mergeProps(oe,{variant:"flat",icon:""}),{default:withCtx(()=>[createVNode(VIcon,{color:"error"},{default:withCtx(()=>[createTextVNode("mdi-delete")]),_:1})]),_:2},1040)]),_:2},1040,["text"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VCard,{flat:"",class:"mx-3 mb-3"},{default:withCtx(()=>[createVNode(_sfc_main$1E,{"indice-nom":unref(C)("objet.indiceDescription"),"indice-langue":unref(C)("objet.indiceLangue"),"texte-aucun-nom":unref(C)("objet.texteAucuneDescription"),"noms-initiaux":L.value,titre:unref(C)("objet.titreDialogueDescriptions"),"sous-titre":unref(C)("objet.sousTitreDialogueDescriptions"),"autorisation-modification":!!I.value,onAjusterNoms:j},{activator:withCtx(({props:ae})=>[createBaseVNode("span",{class:normalizeClass({"text-disabled":!unref(F)})},toDisplayString$1(unref(F)||unref(C)("communs.baseCarteObjet.sansDescription")),3),createVNode(VBtn,mergeProps(ae,{icon:I.value?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"}),null,16,["icon"])]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),createBaseVNode("p",_hoisted_1$3,toDisplayString$1(unref(C)("pages.bds.info")),1),createBaseVNode("div",_hoisted_2$2,[createCommentVNode("",!0),createVNode(VCard,{flat:"",width:"200",class:"mb-3"},{default:withCtx(()=>[createVNode(_sfc_main$1G,{id:J.id,auteurs:ye.value,"permission-moderateur":I.value==="MODRATEUR"},{activator:withCtx(({props:ae})=>[createVNode(_sfc_main$k,mergeProps(ae,{auteurs:ye.value}),null,16,["auteurs"])]),_:1},8,["id","auteurs","permission-moderateur"])]),_:1}),createVNode(VCard,{flat:"",width:"200",class:"mb-3"},{default:withCtx(()=>[createVNode(_sfc_main$1d,{licence:ie.value,"permission-modifier":I.value==="MODRATEUR",onChangerLicence:W},{activator:withCtx(({props:ae})=>[createVNode(_sfc_main$j,mergeProps(ae,{licence:ie.value,onChangerLicence:W}),null,16,["licence"])]),_:1},8,["licence","permission-modifier"])]),_:1}),createVNode(VCard,{flat:"",width:"200",class:"mb-3"},{default:withCtx(()=>[createVNode(_sfc_main$i,{id:J.id},{activator:withCtx(({props:ae})=>[createVNode(_sfc_main$h,mergeProps(ae,{id:J.id}),null,16,["id"])]),_:1},8,["id"])]),_:1}),createVNode(VCard,{flat:"",width:"200",class:"mb-3"},{default:withCtx(()=>[createVNode(_sfc_main$l,{"id-objet":J.id,permission:I.value,"type-objet":"bd"},{activator:withCtx(({props:ae})=>[createVNode(_sfc_main$p,mergeProps(ae,{"id-objet":J.id}),null,16,["id-objet"])]),_:1},8,["id-objet","permission"])]),_:1})])]),_:1}),createVNode(VCard,{flat:"",class:"mx-3 mb-3"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$2,[createVNode(VCard,{flat:"","min-width":"200","max-width":"350",class:"mb-3 me-3"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_4$1,toDisplayString$1(unref(C)("bd.carteBd.variables")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(_sfc_main$1Q,{"n-max":5,items:ne.value},{jeton:withCtx(({id:ae})=>[createVNode(_sfc_main$1z,{id:ae},{activator:withCtx(({props:oe})=>[createVNode(_sfc_main$1P,mergeProps(oe,{id:ae}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:ae})=>[createVNode(_sfc_main$1z,{id:ae},{activator:withCtx(({props:oe})=>[createVNode(_sfc_main$1y,mergeProps(oe,{id:ae}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),ne.value?.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_5$1,toDisplayString$1(unref(C)("bds.aucuneVariable")),1))]),_:1})]),_:1}),createVNode(VCard,{flat:"","min-width":"200","max-width":"350",class:"mb-3 me-3"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_6$1,toDisplayString$1(unref(C)("bds.carteBd.motsClefs")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(_sfc_main$1Q,{"n-max":5,items:re.value},{jeton:withCtx(({id:ae})=>[createVNode(_sfc_main$1h,{id:ae},{activator:withCtx(({props:oe})=>[createVNode(_sfc_main$1n,mergeProps(oe,{id:ae}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:ae})=>[createVNode(_sfc_main$1h,{id:ae},{activator:withCtx(({props:oe})=>[createVNode(_sfc_main$1m,mergeProps(oe,{id:ae}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),re.value&&!re.value.length?(openBlock(),createElementBlock("p",_hoisted_7,toDisplayString$1(unref(C)("bds.aucunMotClef")),1)):createCommentVNode("",!0),I.value&&re.value?(openBlock(),createBlock(_sfc_main$1j,{key:1,originaux:re.value,onSauvegarder:X},null,8,["originaux"])):createCommentVNode("",!0)]),_:1})]),_:1}),createVNode(VCard,{flat:"","min-width":"200","max-width":"350",class:"mb-3 me-3"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_8,toDisplayString$1(unref(C)("bd.carteBd.gographie")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[ce.value&&!ce.value.length?(openBlock(),createElementBlock("p",_hoisted_9,toDisplayString$1(unref(C)("bds.aucuneGog")),1)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(ce.value,ae=>(openBlock(),createBlock(VChip,{key:ae,outlined:"",small:"",label:"",class:"mx-1 my-1"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(ae),1)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}),createVNode(VList,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_10,[createTextVNode(toDisplayString$1(unref(C)("bds.tableaux"))+" ",1),createVNode(_sfc_main$G,{"id-bd":J.id,"importation-permise":""},{activator:withCtx(({props:ae})=>[I.value?(openBlock(),createBlock(VBtn,mergeProps({key:0},ae,{icon:"mdi-plus",size:"small",variant:"flat"}),null,16)):createCommentVNode("",!0)]),_:1},8,["id-bd"])]),createVNode(VDivider),ue.value===null?(openBlock(),createBlock(unref(VSkeletonLoader),{key:0,type:"paragraph"})):ue.value&&!ue.value.length?(openBlock(),createElementBlock("div",_hoisted_11,[createBaseVNode("p",_hoisted_12,toDisplayString$1(unref(C)("bds.tableaux")),1),createVNode(VImg,{src:unref(A),class:"my-5",contain:"",height:"175px"},null,8,["src"]),createVNode(_sfc_main$G,{"id-bd":J.id,"importation-permise":""},{activator:withCtx(({props:ae})=>[I.value?(openBlock(),createBlock(VBtn,mergeProps({key:0},ae,{color:"primary",class:"mx-2",variant:"outlined"}),{prepend:withCtx(()=>[createVNode(VIcon,{icon:"mdi-table",start:""})]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(unref(C)("bds.ajouterTableau")),1)]),_:2},1040)):createCommentVNode("",!0)]),_:1},8,["id-bd"]),createVNode(_sfc_main$q,{type:"importation",automatiser:!0,"info-objet":{id:J.id,typeObjet:"bd"}},{default:withCtx(()=>[I.value?(openBlock(),createBlock(VBtn,{key:0,color:"primary",class:"mx-2",variant:"outlined",icon:"mdi-import"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)("bds.importation")),1)]),_:1})):createCommentVNode("",!0)]),_:1},8,["info-objet"])])):(openBlock(),createBlock(TransitionGroup,{key:2,name:"fade",mode:"out-in",class:"d-flex flex-wrap justify-center"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(_e.value,ae=>(openBlock(),createBlock(_sfc_main$1l,{id:ae.id,key:ae.id,"id-bd":J.id,onClick:oe=>J.$router.push(`/bd/visualiser/${encodeURIComponent(J.id)}/tableau/${encodeURIComponent(ae.id)}`)},null,8,["id","id-bd","onClick"]))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1}))}}),_sfc_main$f=defineComponent$1({__name:"ExporterCode",props:{idNuee:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{langue:E}=utiliserLangues(),{t:S}=x(),{mdAndUp:C}=useDisplay(),T=ref$1(!1),B=ref$1(0),A=["prsentation","licenceParDfaut","bdPrincipale","codeGnr"],I=computed(()=>{switch(A[B.value]){case"prsentation":return S("nues.gnrerCode.titrePrsentation");case"licenceParDfaut":return S("nues.gnrerCode.titreLicenceParDfaut");case"bdPrincipale":return S("nues.gnrerCode.titreBdPrincipale");case"codeGnr":return S("nues.gnrerCode.titreCodeGnr");default:return""}}),D=computed(()=>{switch(A[B.value]){case"prsentation":return S("nues.gnrerCode.sousTitrePrsentation");case"licenceParDfaut":return S("nues.gnrerCode.sousTitreLicenceParDfaut");case"bdPrincipale":return S("nues.gnrerCode.sousTitreBdPrincipale");case"codeGnr":return S("nues.gnrerCode.sousTitreCodeGnr");default:return""}}),M=()=>{switch(A[B.value]){default:B.value--;break}},V=()=>{switch(A[B.value]){default:B.value++;break}},L=computed(()=>{switch(A[B.value]){default:return{actif:!0,visible:!0}}}),F=computed(()=>{switch(A[B.value]){default:return{actif:!0,visible:!0}}}),j=ref$1(),U=ref$1();watchEffect(async()=>{U.value=await _?.nues.gnrerSchmaBdNue({idNue:n.idNuee,licence:re.value})});const H=computed(()=>U.value?.tableaux),Y=["ts","js"],Z=ref$1("ts"),ne=ref$1(E.value),re=ref$1("ODbl-1_0"),X=ref$1([]),ce=ref$1(),ue=computed(()=>{switch(Z.value){case"ts":return W.value;case"js":return ye.value;default:throw new Error(Z.value)}}),_e=computed(()=>`
pnpm install @constl/ipa ${ce.value?"@lassi-js/kili":""}
`),ye=computed(()=>`
${ie.value}

${z.value}

${oe.value}
`),ie=computed(()=>`
${ce.value?"import {  } from '@lassi-js/kili';":""}
`),W=computed(()=>`
${O.value}

${z.value}

${ae.value}

${oe.value}
`),O=computed(()=>`
${ie.value}
import type ClientConstellation, { bds } from "@constl/ipa";
`),z=computed(()=>{if(!j.value)throw new Error("Clef tableau nue non spcifie.");return`
export const clefTableauNue = ${j.value};
${ce.value?"const idBd = "+ce.value:""}
export const idNue = ${n.idNuee}
export const schma ${Z.value==="ts"?": bds.schmaSpcificationBd":""} = {
  licence: ${re.value},
  motsClefs: [${X.value.toString()}],
  tableaux: [
    ${J.value}
  ],
};
`}),J=computed(()=>{if(!H.value)throw Error("Tableaux non dfinis.");return H.value.map(fe=>`
{
  cols: [
${fe.cols.map(he=>ee(he)).join(`
`)}
]
  clef: "${fe.clef}",
},
`).join(`
`)}),ee=fe=>`
{
  idColonne: ${fe.idColonne};
  idVariable: ${fe.idVariable};
${fe.index?"index: true;":""}
}
`,ae=computed(()=>{const fe=H.value?.find(he=>he.clef===j.value)?.cols;if(!fe)throw new Error("Colonnes non dfinies");return`
export type entreDonnesMonProjet = {
  ${fe.map(he=>"[codeColonne"+he.idColonne+"]"+(he.optionnel?"?":"")+": string;")} //  faire: type de colonne dynamique
};

export type KiliMonProjet = <entreDonnesMonProjet>;
`}),oe=computed(()=>{if(!ce.value)return"";const fe=Z.value==="ts";return`
export const gnrerKili = ({
  constl,
}${fe?`: {
  constl: ClientConstellation;
}`:""})${fe?": _":""} => {
  return new ${fe?"<__>":""}({
    : constl,
    : {
      _: clefTableauNue,
      : schmaBd,
      _: idBd,
      _: idNue,
    },
  });
};
`}),se=()=>`
${O.value}

${z.value}

`,G=()=>`
<template>
  <v-dialog>
    
    <v-card>
      <v-card-item>
        <v-card-title>
        </v-card-title>
      </v-card-item>
    </v-card>
  </v-dialog>
</template>
<script setup lang="ts">
import { ref } from "vue";

<+/script>
`.replace("+/","/"),q=ref$1(!1),te=async()=>{const fe=(await axios$1.get(GABARIT_CODE,{responseType:"arraybuffer"})).data,Ee=(await JSZip.loadAsync(fe)).folder("paquets")?.folder(q.value?"lectron":"navigateur");if(!Ee)throw new Error("Erreur de structure de paquet.");const we=se(),xe=G(),ge=(q.value?["packages","renderer","src","utils"]:["src","utils"]).reduce((ve,Ae)=>ve?ve.folder(Ae):null,Ee);if(!ge)throw new Error("Erreur de structure de paquet.");ge.file("nue.ts",we);const me=(q.value?["packages","renderer","src","components"]:["src","components"]).reduce((ve,Ae)=>ve?ve.folder(Ae):null,Ee);if(!me)throw new Error("Erreur de structure de paquet.");me.file("AjoutDonnes.vue",xe);const Be=await Ee.generateAsync({type:"blob"});await o(Be,{fileName:"Mon appli.zip"})};return(fe,he)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":he[4]||(he[4]=Ee=>T.value=Ee)},{activator:withCtx(({props:Ee})=>[renderSlot(fe.$slots,"activator",normalizeProps(guardReactiveProps({propsComposante:Ee}))),createVNode(VCard,{class:"mx-auto","max-width":unref(C)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(I.value),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(D.value),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:B.value,"onUpdate:modelValue":he[3]||(he[3]=we=>B.value=we),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(VBtn,{onClick:V})]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(_sfc_main$1d,null,{default:withCtx(()=>[createVNode(VBtn)]),_:1})]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(VRadioGroup,null,{default:withCtx(()=>[createVNode(VRadio),createVNode(VRadio)]),_:1})]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(VBtnToggle,{modelValue:Z.value,"onUpdate:modelValue":he[0]||(he[0]=we=>Z.value=we),mandatory:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Y,we=>(openBlock(),createBlock(VBtn,{key:we,value:we},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)(`communs.langagesInformatiques.${we}.abr`)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),createVNode(VSelect,{modelValue:ne.value,"onUpdate:modelValue":he[1]||(he[1]=we=>ne.value=we)},null,8,["modelValue"]),createVNode(VTextField,{readonly:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(_e.value),1)]),_:1}),createVNode(VTextarea,{readonly:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(ue.value),1)]),_:1}),createVNode(VBtn,{onClick:he[2]||(he[2]=()=>te())})]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"text",disabled:!F.value.actif,onClick:M},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.retour")),1)]),_:1},8,["disabled"]),[[vShow,F.value.visible]]),createVNode(VSpacer),withDirectives(createVNode(VBtn,{color:"primary",variant:"flat",disabled:!L.value.actif,onClick:V},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(S)("communs.suivant")),1)]),_:1},8,["disabled"]),[[vShow,L.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$e=defineComponent$1({__name:"PageNue",props:{id:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),{traduireNom:S}=utiliserLangues(),C=ref$1({}),T=S(C);return enregistrercoute(_?.nues.suivreNomsNue({idNue:n.id,f:B=>C.value=B})),(B,A)=>{const I=resolveComponent("TitrePage");return openBlock(),createBlock(VContainer,null,{default:withCtx(()=>[createVNode(I,{titre:unref(T)||unref(couper)(B.id,50,unref(E)("communs.troisPetitsPoints"))},null,8,["titre"]),createBaseVNode("p",null,toDisplayString$1(B.id),1),createVNode(_sfc_main$f,{"id-nuee":B.id},null,8,["id-nuee"])]),_:1})}}}),VDataTable$1="",VDataTableFooter$1="",makeDataTablePaginateProps=propsFactory({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),VDataTablePaginationSymbol=Symbol.for("vuetify:data-table-pagination");function createPagination(t){const n=useProxiedModel(t,"page",void 0,x=>+(x??1)),_=useProxiedModel(t,"itemsPerPage",void 0,x=>+(x??10));return{page:n,itemsPerPage:_}}function providePagination(t){const{page:n,itemsPerPage:_,itemsLength:x}=t,E=computed(()=>_.value===-1?0:_.value*(n.value-1)),S=computed(()=>_.value===-1?x.value:Math.min(x.value,E.value+_.value)),C=computed(()=>_.value===-1||x.value===0?1:Math.ceil(x.value/_.value));watchEffect(()=>{n.value>C.value&&(n.value=C.value)});function T(M){_.value=M,n.value=1}function B(){n.value=clamp(n.value+1,1,C.value)}function A(){n.value=clamp(n.value-1,1,C.value)}function I(M){n.value=clamp(M,1,C.value)}const D={page:n,itemsPerPage:_,startIndex:E,stopIndex:S,pageCount:C,itemsLength:x,nextPage:B,prevPage:A,setPage:I,setItemsPerPage:T};return provide(VDataTablePaginationSymbol,D),D}function usePagination(){const t=inject$1(VDataTablePaginationSymbol);if(!t)throw new Error("Missing pagination!");return t}function usePaginatedItems(t){const{items:n,startIndex:_,stopIndex:x,itemsPerPage:E}=t;return{paginatedItems:computed(()=>E.value<=0?n.value:n.value.slice(_.value,x.value))}}const makeVDataTableFooterProps=propsFactory({prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),VDataTableFooter=genericComponent()({name:"VDataTableFooter",props:makeVDataTableFooterProps(),setup(t,n){let{slots:_}=n;const{t:x}=useLocale(),{page:E,pageCount:S,startIndex:C,stopIndex:T,itemsLength:B,itemsPerPage:A,setItemsPerPage:I}=usePagination(),D=computed(()=>t.itemsPerPageOptions.map(M=>({...M,title:x(M.title)})));return()=>createVNode("div",{class:"v-data-table-footer"},[_.prepend?.(),createVNode("div",{class:"v-data-table-footer__items-per-page"},[createVNode("span",null,[x(t.itemsPerPageText)]),createVNode(VSelect,{items:D.value,modelValue:A.value,"onUpdate:modelValue":M=>I(Number(M)),density:"compact",variant:"outlined","hide-details":!0},null)]),createVNode("div",{class:"v-data-table-footer__info"},[createVNode("div",null,[x(t.pageText,B.value?C.value+1:0,T.value,B.value)])]),createVNode("div",{class:"v-data-table-footer__pagination"},[createVNode(VBtn,{icon:t.firstIcon,variant:"plain",onClick:()=>E.value=1,disabled:E.value===1,"aria-label":x(t.firstPageLabel)},null),createVNode(VBtn,{icon:t.prevIcon,variant:"plain",onClick:()=>E.value=Math.max(1,E.value-1),disabled:E.value===1,"aria-label":x(t.prevPageLabel)},null),t.showCurrentPage&&createVNode("span",{key:"page",class:"v-data-table-footer__page"},[E.value]),createVNode(VBtn,{icon:t.nextIcon,variant:"plain",onClick:()=>E.value=Math.min(S.value,E.value+1),disabled:E.value===S.value,"aria-label":x(t.nextPageLabel)},null),createVNode(VBtn,{icon:t.lastIcon,variant:"plain",onClick:()=>E.value=S.value,disabled:E.value===S.value,"aria-label":x(t.lastPageLabel)},null)])])}}),VDataTableColumn=defineFunctionalComponent({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String]},(t,n)=>{let{slots:_,attrs:x}=n;const E=t.tag??"td";return createVNode(E,mergeProps({class:["v-data-table__td",{"v-data-table-column--fixed":t.fixed,"v-data-table-column--last-fixed":t.lastFixed,"v-data-table-column--no-padding":t.noPadding},`v-data-table-column--align-${t.align}`],style:{height:convertToUnit(t.height),width:convertToUnit(t.width),left:convertToUnit(t.fixedOffset||null)}},x),{default:()=>[_.default?.()]})}),makeDataTableHeaderProps=propsFactory({headers:{type:Array,default:()=>[]}},"DataTable-header"),VDataTableHeadersSymbol=Symbol.for("vuetify:data-table-headers");function createHeaders(t,n){const _=ref$1([]),x=ref$1([]);watchEffect(()=>{const S=t.headers.length?Array.isArray(t.headers[0])?t.headers:[t.headers]:[],C=S.flatMap((V,L)=>V.map(F=>({column:F,row:L}))),T=S.length,B={title:"",sortable:!1},A={...B,width:48};if(n?.groupBy?.value.length){const V=C.findIndex(L=>{let{column:F}=L;return F.key==="data-table-group"});V<0?C.unshift({column:{...B,key:"data-table-group",title:"Group",rowspan:T},row:0}):C.splice(V,1,{column:{...B,...C[V].column},row:C[V].row})}if(n?.showSelect?.value){const V=C.findIndex(L=>{let{column:F}=L;return F.key==="data-table-select"});V<0?C.unshift({column:{...A,key:"data-table-select",rowspan:T},row:0}):C.splice(V,1,{column:{...A,...C[V].column},row:C[V].row})}if(n?.showExpand?.value){const V=C.findIndex(L=>{let{column:F}=L;return F.key==="data-table-expand"});V<0?C.push({column:{...A,key:"data-table-expand",rowspan:T},row:0}):C.splice(V,1,{column:{...A,...C[V].column},row:C[V].row})}const I=createRange(T).map(()=>[]),D=createRange(T).fill(0);C.forEach(V=>{let{column:L,row:F}=V,j=L.key;j==null&&(j="");for(let U=F;U<=F+(L.rowspan??1)-1;U++)I[U].push({...L,key:j,fixedOffset:D[U],sortable:L.sortable??!!L.key}),D[U]+=Number(L.width??0)}),I.forEach(V=>{for(let L=V.length;L--;L>=0)if(V[L].fixed){V[L].lastFixed=!0;return}});const M=new Set;_.value=I.map(V=>{const L=[];for(const F of V)M.has(F.key)||(M.add(F.key),L.push(F));return L}),x.value=I.at(-1)??[]});const E={headers:_,columns:x};return provide(VDataTableHeadersSymbol,E),E}function useHeaders(){const t=inject$1(VDataTableHeadersSymbol);if(!t)throw new Error("Missing headers!");return t}const singleSelectStrategy={showSelectAll:!1,allSelected:()=>[],select:t=>{let{items:n,value:_}=t;return new Set(_?[n[0]?.value]:[])},selectAll:t=>{let{selected:n}=t;return n}},pageSelectStrategy={showSelectAll:!0,allSelected:t=>{let{currentPage:n}=t;return n},select:t=>{let{items:n,value:_,selected:x}=t;for(const E of n)_?x.add(E.value):x.delete(E.value);return x},selectAll:t=>{let{value:n,currentPage:_,selected:x}=t;return pageSelectStrategy.select({items:_,value:n,selected:x})}},allSelectStrategy={showSelectAll:!0,allSelected:t=>{let{allItems:n}=t;return n},select:t=>{let{items:n,value:_,selected:x}=t;for(const E of n)_?x.add(E.value):x.delete(E.value);return x},selectAll:t=>{let{value:n,allItems:_,selected:x}=t;return allSelectStrategy.select({items:_,value:n,selected:x})}},makeDataTableSelectProps=propsFactory({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]}},"DataTable-select"),VDataTableSelectionSymbol=Symbol.for("vuetify:data-table-selection");function provideSelection(t,n){let{allItems:_,currentPage:x}=n;const E=useProxiedModel(t,"modelValue",t.modelValue,j=>new Set(j),j=>[...j.values()]),S=computed(()=>_.value.filter(j=>j.selectable)),C=computed(()=>x.value.filter(j=>j.selectable)),T=computed(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;switch(t.selectStrategy){case"single":return singleSelectStrategy;case"all":return allSelectStrategy;case"page":default:return pageSelectStrategy}});function B(j){return wrapInArray(j).every(U=>E.value.has(U.value))}function A(j){return wrapInArray(j).some(U=>E.value.has(U.value))}function I(j,U){const H=T.value.select({items:j,value:U,selected:new Set(E.value)});E.value=H}function D(j){I([j],!B([j]))}function M(j){const U=T.value.selectAll({value:j,allItems:S.value,currentPage:C.value,selected:new Set(E.value)});E.value=U}const V=computed(()=>E.value.size>0),L=computed(()=>{const j=T.value.allSelected({allItems:S.value,currentPage:C.value});return B(j)}),F={toggleSelect:D,select:I,selectAll:M,isSelected:B,isSomeSelected:A,someSelected:V,allSelected:L,showSelectAll:T.value.showSelectAll};return provide(VDataTableSelectionSymbol,F),F}function useSelection(){const t=inject$1(VDataTableSelectionSymbol);if(!t)throw new Error("Missing selection!");return t}const makeDataTableSortProps=propsFactory({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),VDataTableSortSymbol=Symbol.for("vuetify:data-table-sort");function createSort(t){const n=useProxiedModel(t,"sortBy"),_=toRef(t,"mustSort"),x=toRef(t,"multiSort");return{sortBy:n,mustSort:_,multiSort:x}}function provideSort(t){const{sortBy:n,mustSort:_,multiSort:x,page:E}=t,S=B=>{let A=n.value.map(D=>({...D}))??[];const I=A.find(D=>D.key===B.key);I?I.order==="desc"?_.value?I.order="asc":A=A.filter(D=>D.key!==B.key):I.order="desc":x.value?A=[...A,{key:B.key,order:"asc"}]:A=[{key:B.key,order:"asc"}],n.value=A,E&&(E.value=1)};function C(B){return!!n.value.find(A=>A.key===B.key)}const T={sortBy:n,toggleSort:S,isSorted:C};return provide(VDataTableSortSymbol,T),T}function useSort(){const t=inject$1(VDataTableSortSymbol);if(!t)throw new Error("Missing sort!");return t}function useSortedItems(t,n,_){const x=useLocale();return{sortedItems:computed(()=>_.value.length?sortItems(n.value,_.value,x.current.value,t.customKeySort):n.value)}}function sortItems(t,n,_,x){const E=new Intl.Collator(_,{sensitivity:"accent",usage:"sort"});return[...t].sort((S,C)=>{for(let T=0;T<n.length;T++){const B=n[T].key,A=n[T].order??"asc";if(A===!1)continue;let I=getObjectValueByPath(S.raw,B),D=getObjectValueByPath(C.raw,B);if(A==="desc"&&([I,D]=[D,I]),x?.[B]){const M=x[B](I,D);if(!M)continue;return M}if(I instanceof Date&&D instanceof Date)return I.getTime()-D.getTime();if([I,D]=[I,D].map(M=>M!=null?M.toString().toLocaleLowerCase():M),I!==D)return isEmpty(I)&&isEmpty(D)?0:isEmpty(I)?-1:isEmpty(D)?1:!isNaN(I)&&!isNaN(D)?Number(I)-Number(D):E.compare(I,D)}return 0})}const makeVDataTableHeadersProps=propsFactory({color:String,sticky:Boolean,multiSort:Boolean,sortAscIcon:{type:IconValue,default:"$sortAsc"},sortDescIcon:{type:IconValue,default:"$sortDesc"},...makeLoaderProps()},"VDataTableHeaders"),VDataTableHeaders=genericComponent()({name:"VDataTableHeaders",props:makeVDataTableHeadersProps(),setup(t,n){let{slots:_,emit:x}=n;const{toggleSort:E,sortBy:S,isSorted:C}=useSort(),{someSelected:T,allSelected:B,selectAll:A,showSelectAll:I}=useSelection(),{columns:D,headers:M}=useHeaders(),{loaderClasses:V}=useLoader(t),L=(Z,ne)=>{if(!(!t.sticky&&!Z.fixed))return{position:"sticky",zIndex:Z.fixed?4:t.sticky?3:void 0,left:Z.fixed?convertToUnit(Z.fixedOffset):void 0,top:t.sticky?`calc(var(--v-table-header-height) * ${ne})`:void 0}};function F(Z){const ne=S.value.find(re=>re.key===Z.key);return ne?ne.order==="asc"?t.sortAscIcon:t.sortDescIcon:t.sortAscIcon}const{backgroundColorClasses:j,backgroundColorStyles:U}=useBackgroundColor(t,"color"),H=computed(()=>({headers:M.value,columns:D.value,toggleSort:E,isSorted:C,sortBy:S.value,someSelected:T.value,allSelected:B.value,selectAll:A,getSortIcon:F,getFixedStyles:L})),Y=Z=>{let{column:ne,x:re,y:X}=Z;const ce=ne.key==="data-table-select"||ne.key==="data-table-expand";return createVNode(VDataTableColumn,{tag:"th",align:ne.align,class:["v-data-table__th",{"v-data-table__th--sortable":ne.sortable,"v-data-table__th--sorted":C(ne)},V.value],style:{width:convertToUnit(ne.width),minWidth:convertToUnit(ne.width),...L(ne,X)},colspan:ne.colspan,rowspan:ne.rowspan,onClick:ne.sortable?()=>E(ne):void 0,lastFixed:ne.lastFixed,noPadding:ce},{default:()=>{const ue=`column.${ne.key}`,_e={column:ne,selectAll:A,isSorted:C,toggleSort:E,sortBy:S.value,someSelected:T.value,allSelected:B.value,getSortIcon:F};return _[ue]?_[ue](_e):ne.key==="data-table-select"?_["column.data-table-select"]?.(_e)??(I&&createVNode(VCheckboxBtn,{modelValue:B.value,indeterminate:T.value&&!B.value,"onUpdate:modelValue":A},null)):createVNode("div",{class:"v-data-table-header__content"},[createVNode("span",null,[ne.title]),ne.sortable&&createVNode(VIcon,{key:"icon",class:"v-data-table-header__sort-icon",icon:F(ne)},null),t.multiSort&&C(ne)&&createVNode("div",{key:"badge",class:["v-data-table-header__sort-badge",...j.value],style:U.value},[S.value.findIndex(ye=>ye.key===ne.key)+1])])}})};useRender(()=>createVNode(Fragment,null,[_.headers?_.headers(H.value):M.value.map((Z,ne)=>createVNode("tr",null,[Z.map((re,X)=>createVNode(Y,{column:re,x:X,y:ne},null))])),t.loading&&createVNode("tr",{class:"v-data-table-progress"},[createVNode("th",{colspan:D.value.length},[createVNode(LoaderSlot,{name:"v-data-table-progress",active:!0,color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0},{default:_.loader})])])]))}}),makeDataTableGroupProps=propsFactory({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),VDataTableGroupSymbol=Symbol.for("vuetify:data-table-group");function createGroupBy(t){return{groupBy:useProxiedModel(t,"groupBy")}}function provideGroupBy(t){const{groupBy:n,sortBy:_}=t,x=ref$1(new Set),E=computed(()=>n.value.map(A=>({...A,order:A.order??!1})).concat(_.value));function S(A){return x.value.has(A.id)}function C(A){const I=new Set(x.value);S(A)?I.delete(A.id):I.add(A.id),x.value=I}function T(A){function I(D){const M=[];for(const V of D.items)"type"in V&&V.type==="group"?M.push(...I(V)):M.push(V);return M}return I({type:"group",items:A,id:"dummy",key:"dummy",value:"dummy",depth:0})}const B={sortByWithGroups:E,toggleGroup:C,opened:x,groupBy:n,extractRows:T,isGroupOpen:S};return provide(VDataTableGroupSymbol,B),B}function useGroupBy(){const t=inject$1(VDataTableGroupSymbol);if(!t)throw new Error("Missing group!");return t}function groupItemsByProperty(t,n){if(!t.length)return[];const _=new Map;for(const x of t){const E=getObjectValueByPath(x.raw,n);_.has(E)||_.set(E,[]),_.get(E).push(x)}return _}function groupItems(t,n){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,x=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!n.length)return[];const E=groupItemsByProperty(t,n[0]),S=[],C=n.slice(1);return E.forEach((T,B)=>{const A=n[0],I=`${x}_${A}_${B}`;S.push({depth:_,id:I,key:A,value:B,items:C.length?groupItems(T,C,_+1,I):T,type:"group"})}),S}function flattenItems(t,n){const _=[];for(const x of t)"type"in x&&x.type==="group"?(x.value!=null&&_.push(x),(n.has(x.id)||x.value==null)&&_.push(...flattenItems(x.items,n))):_.push(x);return _}function useGroupedItems(t,n,_){return{flatItems:computed(()=>{if(!n.value.length)return t.value;const E=groupItems(t.value,n.value.map(S=>S.key));return flattenItems(E,_.value)})}}const makeVDataTableGroupHeaderRowProps=propsFactory({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),VDataTableGroupHeaderRow=genericComponent()({name:"VDataTableGroupHeaderRow",props:makeVDataTableGroupHeaderRowProps(),setup(t,n){let{slots:_}=n;const{isGroupOpen:x,toggleGroup:E,extractRows:S}=useGroupBy(),{isSelected:C,isSomeSelected:T,select:B}=useSelection(),{columns:A}=useHeaders(),I=computed(()=>S([t.item]));return()=>createVNode("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":t.item.depth}},[A.value.map(D=>{if(D.key==="data-table-group"){const M=x(t.item)?"$expand":"$next",V=()=>E(t.item);return _["data-table-group"]?.({item:t.item,count:I.value.length,props:{icon:M,onClick:V}})??createVNode(VDataTableColumn,{class:"v-data-table-group-header-row__column"},{default:()=>[createVNode(VBtn,{size:"small",variant:"text",icon:M,onClick:V},null),createVNode("span",null,[t.item.value]),createVNode("span",null,[createTextVNode("("),I.value.length,createTextVNode(")")])]})}if(D.key==="data-table-select"){const M=C(I.value),V=T(I.value)&&!M,L=F=>B(I.value,F);return _["data-table-select"]?.({props:{modelValue:M,indeterminate:V,"onUpdate:modelValue":L}})??createVNode("td",null,[createVNode(VCheckboxBtn,{modelValue:M,indeterminate:V,"onUpdate:modelValue":L},null)])}return createVNode("td",null,null)})])}}),makeDataTableExpandProps=propsFactory({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),VDataTableExpandedKey=Symbol.for("vuetify:datatable:expanded");function provideExpanded(t){const n=toRef(t,"expandOnClick"),_=useProxiedModel(t,"expanded",t.expanded,T=>new Set(T),T=>[...T.values()]);function x(T,B){const A=new Set(_.value);B?A.add(T.value):A.delete(T.value),_.value=A}function E(T){return _.value.has(T.value)}function S(T){x(T,!E(T))}const C={expand:x,expanded:_,expandOnClick:n,isExpanded:E,toggleExpand:S};return provide(VDataTableExpandedKey,C),C}function useExpanded(){const t=inject$1(VDataTableExpandedKey);if(!t)throw new Error("foo");return t}const makeVDataTableRowProps=propsFactory({index:Number,item:Object,onClick:Function},"VDataTableRow"),VDataTableRow=defineComponent({name:"VDataTableRow",props:makeVDataTableRowProps(),setup(t,n){let{slots:_}=n;const{isSelected:x,toggleSelect:E}=useSelection(),{isExpanded:S,toggleExpand:C}=useExpanded(),{columns:T}=useHeaders();useRender(()=>createVNode("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!t.onClick}],onClick:t.onClick},[t.item&&T.value.map((B,A)=>createVNode(VDataTableColumn,{align:B.align,fixed:B.fixed,fixedOffset:B.fixedOffset,lastFixed:B.lastFixed,noPadding:B.key==="data-table-select"||B.key==="data-table-expand",width:B.width},{default:()=>{const I=t.item,D=`item.${B.key}`,M={index:t.index,item:t.item,columns:T.value,isSelected:x,toggleSelect:E,isExpanded:S,toggleExpand:C};return _[D]?_[D](M):B.key==="data-table-select"?_["item.data-table-select"]?.(M)??createVNode(VCheckboxBtn,{disabled:!I.selectable,modelValue:x([I]),onClick:withModifiers(()=>E(I),["stop"])},null):B.key==="data-table-expand"?_["item.data-table-expand"]?.(M)??createVNode(VBtn,{icon:S(I)?"$collapse":"$expand",size:"small",variant:"text",onClick:withModifiers(()=>C(I),["stop"])},null):getPropertyFromItem(I.columns,B.key)}}))]))}}),makeVDataTableRowsProps=propsFactory({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowHeight:Number,"onClick:row":Function},"VDataTableRows"),VDataTableRows=genericComponent()({name:"VDataTableRows",props:makeVDataTableRowsProps(),setup(t,n){let{emit:_,slots:x}=n;const{columns:E}=useHeaders(),{expandOnClick:S,toggleExpand:C,isExpanded:T}=useExpanded(),{isSelected:B,toggleSelect:A}=useSelection(),{toggleGroup:I,isGroupOpen:D}=useGroupBy(),{t:M}=useLocale();return useRender(()=>t.loading&&x.loading?createVNode("tr",{class:"v-data-table-rows-loading",key:"loading"},[createVNode("td",{colspan:E.value.length},[x.loading()])]):!t.loading&&!t.items.length&&!t.hideNoData?createVNode("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[createVNode("td",{colspan:E.value.length},[x["no-data"]?.()??M(t.noDataText)])]):createVNode(Fragment,null,[t.items.map((V,L)=>{if(V.type==="group")return x["group-header"]?x["group-header"]({index:L,item:V,columns:E.value,isExpanded:T,toggleExpand:C,isSelected:B,toggleSelect:A,toggleGroup:I,isGroupOpen:D}):createVNode(VDataTableGroupHeaderRow,{key:`group-header_${V.id}`,item:V},x);const F={index:L,item:V,columns:E.value,isExpanded:T,toggleExpand:C,isSelected:B,toggleSelect:A},j={...F,props:{key:`item_${V.key??V.index}`,onClick:S.value||t["onClick:row"]?U=>{S.value&&C(V),t["onClick:row"]?.(U,{item:V})}:void 0,index:L,item:V}};return createVNode(Fragment,null,[x.item?x.item(j):createVNode(VDataTableRow,j.props,x),T(V)&&x["expanded-row"]?.(F)])})])),{}}}),VTable$1="",makeVTableProps=propsFactory({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...makeComponentProps(),...makeDensityProps(),...makeTagProps(),...makeThemeProps()},"VTable"),VTable=genericComponent()({name:"VTable",props:makeVTableProps(),setup(t,n){let{slots:_}=n;const{themeClasses:x}=provideTheme(t),{densityClasses:E}=useDensity(t);return useRender(()=>createVNode(t.tag,{class:["v-table",{"v-table--fixed-height":!!t.height,"v-table--fixed-header":t.fixedHeader,"v-table--fixed-footer":t.fixedFooter,"v-table--has-top":!!_.top,"v-table--has-bottom":!!_.bottom,"v-table--hover":t.hover},x.value,E.value,t.class],style:t.style},{default:()=>[_.top?.(),_.default?createVNode("div",{class:"v-table__wrapper",style:{height:convertToUnit(t.height)}},[createVNode("table",null,[_.default()])]):_.wrapper?.(),_.bottom?.()]})),{}}}),makeDataTableItemsProps=propsFactory({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataTable-items");function transformItem(t,n,_,x){const E=t.returnObject?n:getPropertyFromItem(n,t.itemValue),S=getPropertyFromItem(n,t.itemSelectable,!0),C=x.reduce((T,B)=>(T[B.key]=getPropertyFromItem(n,B.value??B.key),T),{});return{type:"item",key:t.returnObject?getPropertyFromItem(n,t.itemValue):E,index:_,value:E,selectable:S,columns:C,raw:n}}function transformItems(t,n,_){return n.map((x,E)=>transformItem(t,x,E,_))}function useDataTableItems(t,n){return{items:computed(()=>transformItems(t,t.items,n.value))}}function useOptions(t){let{page:n,itemsPerPage:_,sortBy:x,groupBy:E,search:S}=t;const C=getCurrentInstance("VDataTable"),T=computed(()=>({page:n.value,itemsPerPage:_.value,sortBy:x.value,groupBy:E.value,search:S.value}));watch(()=>S?.value,()=>{n.value=1});let B=null;watch(T,()=>{deepEqual$3(B,T.value)||(C.emit("update:options",T.value),B=T.value)},{deep:!0,immediate:!0})}const makeDataTableProps=propsFactory({...makeVDataTableRowsProps(),width:[String,Number],search:String,...makeDataTableExpandProps(),...makeDataTableGroupProps(),...makeDataTableHeaderProps(),...makeDataTableItemsProps(),...makeDataTableSelectProps(),...makeDataTableSortProps(),...makeVDataTableHeadersProps(),...makeVTableProps()},"DataTable"),makeVDataTableProps=propsFactory({...makeDataTablePaginateProps(),...makeDataTableProps(),...makeFilterProps(),...makeVDataTableFooterProps()},"VDataTable"),VDataTable=genericComponent()({name:"VDataTable",props:makeVDataTableProps(),emits:{"update:modelValue":t=>!0,"update:page":t=>!0,"update:itemsPerPage":t=>!0,"update:sortBy":t=>!0,"update:options":t=>!0,"update:groupBy":t=>!0,"update:expanded":t=>!0},setup(t,n){let{emit:_,slots:x}=n;const{groupBy:E}=createGroupBy(t),{sortBy:S,multiSort:C,mustSort:T}=createSort(t),{page:B,itemsPerPage:A}=createPagination(t),{columns:I,headers:D}=createHeaders(t,{groupBy:E,showSelect:toRef(t,"showSelect"),showExpand:toRef(t,"showExpand")}),{items:M}=useDataTableItems(t,I),V=toRef(t,"search"),{filteredItems:L}=useFilter(t,M,V,{transform:te=>te.columns}),{toggleSort:F}=provideSort({sortBy:S,multiSort:C,mustSort:T,page:B}),{sortByWithGroups:j,opened:U,extractRows:H,isGroupOpen:Y,toggleGroup:Z}=provideGroupBy({groupBy:E,sortBy:S}),{sortedItems:ne}=useSortedItems(t,L,j),{flatItems:re}=useGroupedItems(ne,E,U),X=computed(()=>re.value.length),{startIndex:ce,stopIndex:ue,pageCount:_e,setItemsPerPage:ye}=providePagination({page:B,itemsPerPage:A,itemsLength:X}),{paginatedItems:ie}=usePaginatedItems({items:re,startIndex:ce,stopIndex:ue,itemsPerPage:A}),W=computed(()=>H(ie.value)),{isSelected:O,select:z,selectAll:J,toggleSelect:ee,someSelected:ae,allSelected:oe}=provideSelection(t,{allItems:M,currentPage:W}),{isExpanded:se,toggleExpand:G}=provideExpanded(t);useOptions({page:B,itemsPerPage:A,sortBy:S,groupBy:E,search:V}),provideDefaults({VDataTableRows:{hideNoData:toRef(t,"hideNoData"),noDataText:toRef(t,"noDataText"),loading:toRef(t,"loading"),loadingText:toRef(t,"loadingText")}});const q=computed(()=>({page:B.value,itemsPerPage:A.value,sortBy:S.value,pageCount:_e.value,toggleSort:F,setItemsPerPage:ye,someSelected:ae.value,allSelected:oe.value,isSelected:O,select:z,selectAll:J,toggleSelect:ee,isExpanded:se,toggleExpand:G,isGroupOpen:Y,toggleGroup:Z,items:W.value,groupedItems:ie.value,columns:I.value,headers:D.value}));return useRender(()=>{const[te]=VDataTableFooter.filterProps(t),[fe]=VDataTableHeaders.filterProps(t),[he]=VDataTableRows.filterProps(t),[Ee]=VTable.filterProps(t);return createVNode(VTable,mergeProps({class:["v-data-table",{"v-data-table--show-select":t.showSelect,"v-data-table--loading":t.loading},t.class],style:t.style},Ee),{top:()=>x.top?.(q.value),default:()=>x.default?x.default(q.value):createVNode(Fragment,null,[x.colgroup?.(q.value),createVNode("thead",null,[createVNode(VDataTableHeaders,fe,x)]),x.thead?.(q.value),createVNode("tbody",null,[x.body?x.body(q.value):createVNode(VDataTableRows,mergeProps(he,{items:ie.value}),x)]),x.tbody?.(q.value),x.tfoot?.(q.value)]),bottom:()=>x.bottom?x.bottom(q.value):createVNode(Fragment,null,[createVNode(VDataTableFooter,te,{prepend:x["footer.prepend"]})])})}),{}}}),_sfc_main$d=defineComponent$1({__name:"NouvelleLigne",emits:["sauvegarder"],setup(t){return(n,_)=>(openBlock(),createBlock(VDialog))}}),_sfc_main$c=defineComponent$1({__name:"CelluleChaneNonTraductible",props:{val:{}},setup(t){return(n,_)=>(openBlock(),createBlock(_sfc_main$23,{texte:n.val,"longueur-max":10},null,8,["texte"]))}}),_sfc_main$b=defineComponent$1({__name:"CelluleBoolenne",props:{val:{}},setup(t){return(n,_)=>(openBlock(),createBlock(VCheckbox,{"model-value":n.val,indeterminate:typeof n.val>"u"},null,8,["model-value","indeterminate"]))}}),_hoisted_1$2=["contenteditable"],_sfc_main$a=defineComponent$1({__name:"CelluleNumrique",props:{val:{},editer:{type:Boolean}},emits:["changerValeur"],setup(t,{emit:n}){const _=t,{:x}=inject$1("locales"),E=S=>{const C=S.target?.innerText,T=x.({:C});T!==_.val&&n("changerValeur",T)};return(S,C)=>(openBlock(),createElementBlock("p",{contenteditable:S.editer,onInput:E},toDisplayString$1(S.val),41,_hoisted_1$2))}}),constl=inject$1("constl"),crerColonneTableau=async({idTableau:t,idVariable:n,idColonne:_,index:x,rgles:E})=>{const S=await constl?.tableaux.ajouterColonneTableau({idTableau:t,idVariable:n,idColonne:_});if(S){x&&await constl?.tableaux.changerColIndex({idTableau:t,idColonne:S,val:!0});for(const C of E)await constl?.tableaux.ajouterRgleTableau({idTableau:t,idColonne:S,rgle:C.rgle})}},_hoisted_1$1={class:"mb-0 text-overline"},_hoisted_2$1={class:"text-center my-3"},_hoisted_3$1={class:"text-h5 mt-5"},_hoisted_4={key:0},_hoisted_5={key:1},_hoisted_6={key:0},_sfc_main$9=defineComponent$1({__name:"VisualisationTableau",props:{idTableau:{}},setup(t){const n=t,_=inject$1("constl"),{useI18n:x}=_(),{t:E}=x(),S=ref$1(!1),C=ref$1();enregistrercoute(_?.suivrePermission({idObjet:n.idTableau,f:H=>C.value=H}));const T=ref$1();enregistrercoute(_?.tableaux.suivreColonnesTableau({idTableau:n.idTableau,f:H=>T.value=H}));const B=computed(()=>T.value?.map(H=>({title:H.variable,key:H.id,index:H.index,sortable:H.catgorie?.type==="simple"?I(H.catgorie.catgorie):!1,info:{catgorie:H.catgorie}}))),A=["boolen","chane","horoDatage","intervaleTemps","numrique"],I=H=>A.includes(H),D=ref$1(),M=ref$1([]);enregistrercoute(_?.tableaux.suivreDonnes({idTableau:n.idTableau,f:H=>D.value=H}));const V=async H=>{await _?.tableaux.ajouterlment({idTableau:n.idTableau,vals:H})},L=async H=>{await _?.tableaux.effacerlment({idTableau:n.idTableau,empreinte:H})},F=async()=>{await Promise.all(M.value.map(L))},j=async({col:H,val:Y,empreinte:Z})=>{await _?.tableaux.modifierlment({idTableau:n.idTableau,vals:{[H]:Y},empreintePrcdente:Z})},U=ref$1();return enregistrercoute(_?.tableaux.suivreValidDonnes({idTableau:n.idTableau,f:H=>U.value=H})),(H,Y)=>{const Z=resolveComponent("EntteColonneTableau"),ne=resolveComponent("cellule-liste"),re=resolveComponent("CelluleHoroDatage"),X=resolveComponent("CelluleIntervaleTemps"),ce=resolveComponent("celluleChane"),ue=resolveComponent("celluleGoJSON"),_e=resolveComponent("CelluleVido"),ye=resolveComponent("CelluleAudio"),ie=resolveComponent("CelluleImage"),W=resolveComponent("CelluleFichier");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("p",_hoisted_1$1,[createTextVNode(toDisplayString$1(unref(E)("bd.visBD."))+" ",1),createVNode(_sfc_main$y,{"id-tableau":H.idTableau,onNouvelle:Y[0]||(Y[0]=O=>unref(crerColonneTableau)({idTableau:H.idTableau,...O}))},{activator:withCtx(({props:O})=>[createVNode(VBtn,mergeProps(O,{icon:"mdi-table-column-plus-after",size:"small",disabled:!C.value}),null,16,["disabled"])]),_:1},8,["id-tableau"]),createVNode(_sfc_main$d,{onSauvegarder:Y[1]||(Y[1]=O=>V(O))},{activator:withCtx(({props:O})=>[createVNode(VBtn,mergeProps(O,{icon:"mdi-table-row-plus-after",size:"small",inset:"",disabled:!C.value||!T.value||!T.value.length}),null,16,["disabled"])]),_:1}),createVNode(VSwitch,{modelValue:S.value,"onUpdate:modelValue":Y[2]||(Y[2]=O=>S.value=O),disabled:!C.value||!T.value||!T.value.length,"true-icon":"mdi-pencil","false-icon":"mdi-pencil-off",color:S.value?"primary":"secondary"},null,8,["modelValue","disabled","color"]),S.value?(openBlock(),createBlock(VBtn,{key:0,disabled:!M.value.length,color:"error",onClick:F},null,8,["disabled"])):createCommentVNode("",!0)]),T.value&&D.value?(openBlock(),createBlock(unref(VDataTable),{key:0,modelValue:M.value,"onUpdate:modelValue":Y[5]||(Y[5]=O=>M.value=O),headers:B.value,items:D.value,"show-select":S.value,density:"compact"},createSlots({"no-data":withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("p",_hoisted_3$1,toDisplayString$1(unref(E)("tableau.vide")),1),C.value?(openBlock(),createElementBlock("div",_hoisted_4,[createVNode(_sfc_main$y,{"id-tableau":H.idTableau,onNouvelle:Y[3]||(Y[3]=O=>unref(crerColonneTableau)({idTableau:H.idTableau,...O}))},{activator:withCtx(({props:O})=>[createVNode(VBtn,mergeProps(O,{color:"primary",class:"mx-2",variant:"outlined",icon:"mdi-table-column-plus-after"}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("tableau.ajouterColonne")),1)]),_:2},1040)]),_:1},8,["id-tableau"]),createVNode(_sfc_main$d,{onSauvegarder:Y[4]||(Y[4]=O=>V(O))},{activator:withCtx(({props:O})=>[T.value.length?(openBlock(),createBlock(VBtn,mergeProps({key:0},O,{color:"primary",class:"mx-2",variant:"outlined",icon:"mdi-table-row-plus-after",label:""}),{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("tableau.ajouterFile")),1)]),_:2},1040)):createCommentVNode("",!0)]),_:1}),createVNode(VBtn,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("tableau.importerDonnes")),1)]),_:1})])):createCommentVNode("",!0)])]),_:2},[renderList(B.value,O=>({name:`column.${O.key}`,fn:withCtx(({column:z})=>[O.key!=="actions"?(openBlock(),createBlock(Z,{key:0,"permission-modifier":C.value,"id-variable":z.title,"id-colonne":z.value,"id-tableau":H.idTableau,index:O.index},{activator:withCtx(({props:J})=>[createBaseVNode("span",normalizeProps(guardReactiveProps(J)),toDisplayString$1(O.title),17)]),_:2},1032,["permission-modifier","id-variable","id-colonne","id-tableau","index"])):(openBlock(),createElementBlock("span",_hoisted_5,toDisplayString$1(O.title),1))])})),renderList(B.value,O=>({name:`item.${O.key}`,fn:withCtx(({item:z})=>[O.key==="actions"?(openBlock(),createElementBlock("span",_hoisted_6,[createVNode(VBtn,{color:"error",icon:"",small:"",onClick:()=>L(z.raw.empreinte)},{default:withCtx(()=>[createVNode(VIcon,{small:""},{default:withCtx(()=>[createTextVNode("mdi-delete")]),_:1})]),_:2},1032,["onClick"])])):O.info.catgorie?.type==="liste"?(openBlock(),createBlock(ne,{key:1,val:z.columns[O.key],editer:S.value,erreurs:U.value?.filter(J=>J.erreur.rgle.colonne===O.key),onChangerValeur:J=>j({empreinte:z.raw.empreinte,col:O.key,val:J})},null,8,["val","editer","erreurs","onChangerValeur"])):O.info.catgorie?.catgorie==="chaneNonTraductible"?(openBlock(),createBlock(_sfc_main$c,{key:2,val:z.columns[O.key],editer:S.value,erreurs:U.value?.filter(J=>J.erreur.rgle.colonne===O.key),onChangerValeur:J=>j({empreinte:z.raw.empreinte,col:O.key,val:J})},null,8,["val","editer","erreurs","onChangerValeur"])):O.info.catgorie?.catgorie==="numrique"?(openBlock(),createBlock(_sfc_main$a,{key:3,val:z.columns[O.key],editer:S.value,erreurs:U.value?.filter(J=>J.erreur.rgle.colonne===O.key),onChangerValeur:J=>j({empreinte:z.raw.empreinte,col:O.key,val:J})},null,8,["val","editer","erreurs","onChangerValeur"])):O.info.catgorie?.catgorie==="horoDatage"?(openBlock(),createBlock(re,{key:4,val:z.columns[O.key],editer:S.value,erreurs:U.value?.filter(J=>J.erreur.rgle.colonne===O.key),onChangerValeur:J=>j({empreinte:z.raw.empreinte,col:O.key,val:J})},null,8,["val","editer","erreurs","onChangerValeur"])):O.info.catgorie?.catgorie==="intervaleTemps"?(openBlock(),createBlock(X,{key:5,val:z.columns[O.key],editer:S.value,erreurs:U.value?.filter(J=>J.erreur.rgle.colonne===O.key),onChangerValeur:J=>j({empreinte:z.raw.empreinte,col:O.key,val:J})},null,8,["val","editer","erreurs","onChangerValeur"])):O.info.catgorie?.catgorie==="boolen"?(openBlock(),createBlock(_sfc_main$b,{key:6,val:z.columns[O.key],editer:S.value,erreurs:U.value?.filter(J=>J.erreur.rgle.colonne===O.key),onChangerValeur:J=>j({empreinte:z.raw.empreinte,col:O.key,val:J})},null,8,["val","editer","erreurs","onChangerValeur"])):O.info.catgorie?.catgorie==="chane"?(openBlock(),createBlock(ce,{key:7,val:z.columns[O.key],editer:S.value,erreurs:U.value?.filter(J=>J.erreur.rgle.colonne===O.key),onChangerValeur:J=>j({empreinte:z.raw.empreinte,col:O.key,val:J})},null,8,["val","editer","erreurs","onChangerValeur"])):O.info.catgorie?.catgorie==="gojson"?(openBlock(),createBlock(ue,{key:8,val:z.columns[O.key],editer:S.value,erreurs:U.value?.filter(J=>J.erreur.rgle.colonne===O.key),onChangerValeur:J=>j({empreinte:z.raw.empreinte,col:O.key,val:J})},null,8,["val","editer","erreurs","onChangerValeur"])):O.info.catgorie?.catgorie==="vido"?(openBlock(),createBlock(_e,{key:9,val:z.columns[O.key],editer:S.value,erreurs:U.value?.filter(J=>J.erreur.rgle.colonne===O.key),onChangerValeur:J=>j({empreinte:z.raw.empreinte,col:O.key,val:J})},null,8,["val","editer","erreurs","onChangerValeur"])):O.info.catgorie?.catgorie==="audio"?(openBlock(),createBlock(ye,{key:10,val:z.columns[O.key],editer:S.value,erreurs:U.value?.filter(J=>J.erreur.rgle.colonne===O.key),onChangerValeur:J=>j({empreinte:z.raw.empreinte,col:O.key,val:J})},null,8,["val","editer","erreurs","onChangerValeur"])):O.info.catgorie?.catgorie==="image"?(openBlock(),createBlock(ie,{key:11,val:z.columns[O.key],editer:S.value,erreurs:U.value?.filter(J=>J.erreur.rgle.colonne===O.key),onChangerValeur:J=>j({empreinte:z.raw.empreinte,col:O.key,val:J})},null,8,["val","editer","erreurs","onChangerValeur"])):O.info.catgorie?.catgorie==="fichier"?(openBlock(),createBlock(W,{key:12,val:z.columns[O.key],editer:S.value,erreurs:U.value?.filter(J=>J.erreur.rgle.colonne===O.key),onChangerValeur:J=>j({empreinte:z.raw.empreinte,col:O.key,val:J})},null,8,["val","editer","erreurs","onChangerValeur"])):createCommentVNode("",!0)])}))]),1032,["modelValue","headers","items","show-select"])):(openBlock(),createBlock(unref(VSkeletonLoader),{key:1,type:"image"}))],64)}}}),_sfc_main$8=defineComponent$1({__name:"PageTableau",props:{idTableau:{},idBd:{}},setup(t){const n=t,_=inject$1("constl"),{obtImageDco:x}=utiliserImagesDco(),{useI18n:E}=_(),{mdAndUp:S}=useDisplay(),{isRtl:C}=useRtl(),{traduireNom:T}=utiliserLangues(),{t:B}=E(),A=computed(()=>[{title:B("navig.mesDonnes"),href:encodeURI("/donnes")},{title:F.value||n.idBd,href:encodeURI(`/donnes/bd/${n.idBd}`)},{title:M.value||n.idTableau,disabled:!0}]),I=ref$1();enregistrercoute(_?.suivrePermission({idObjet:n.idTableau,f:Z=>I.value=Z}));const D=ref$1({}),M=T(D);enregistrercoute(_?.tableaux.suivreNomsTableau({idTableau:n.idTableau,f:Z=>D.value=Z}));const V=async Z=>{const{Effacer:ne,Ajouter:re}=ajusterTexteTraductible({anciennes:D.value,nouvelles:Z});for(const X of ne)await _?.tableaux.effacerNomTableau({idTableau:n.idTableau,langue:X});await _?.tableaux.sauvegarderNomsTableau({idTableau:n.idTableau,noms:re})},L=ref$1({}),F=T(L);enregistrercoute(_?.bds.suivreNomsBd({idBd:n.idBd,f:Z=>L.value=Z}));const j=ref$1(),U=computed(()=>{if(j.value)return URL.createObjectURL(new Blob([j.value],{type:"image"}))});enregistrercoute(_?.bds.suivreImage({idBd:n.idBd,f:Z=>j.value=Z}));const H=x("logoBD"),Y=async Z=>{Z?await _?.profil.sauvegarderImage({image:Z}):await _?.profil.effacerImage()};return(Z,ne)=>{const re=resolveComponent("texteTronqu"),X=resolveComponent("DialogueNoms"),ce=resolveComponent("lien-objet");return openBlock(),createBlock(VContainer,null,{default:withCtx(()=>[createVNode(VCard,{flat:""},{default:withCtx(()=>[createVNode(VCardSubtitle,null,{default:withCtx(()=>[createVNode(VBreadcrumbs,{items:A.value,class:"pa-0"},{divider:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(C)?"mdi-chevron-left":"mdi-chevron-right"),1)]),_:1})]),title:withCtx(({item:ue})=>[createVNode(VBreadcrumbsItem,{disabled:ue.disabled,onClick:_e=>ue.href&&Z.$router.push(ue.href)},{default:withCtx(()=>[createVNode(re,{texte:ue.title,"longueur-max":35},null,8,["texte"])]),_:2},1032,["disabled","onClick"])]),_:1},8,["items"])]),_:1}),createVNode(ImageEditable,{"src-image":U.value,"img-defaut":unref(H),editable:!!I.value,"max-taille-image":unref(MAX_TAILLE_IMAGE$4),"taille-avatar":unref(S)?275:175,onImageChangee:Y},null,8,["src-image","img-defaut","editable","max-taille-image","taille-avatar"]),createVNode(VCardTitle,null,{default:withCtx(()=>[createVNode(re,{texte:unref(M),"longueur-max":40},null,8,["texte"]),createVNode(X,{"indice-nom":unref(B)("objet.indiceNom"),"indice-langue":unref(B)("objet.indiceLangue"),"texte-aucun-nom":unref(B)("objet.texteAucunNom"),"noms-initiaux":D.value,titre:unref(B)("objet.titreDialogueNoms"),"sous-titre":unref(B)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!I.value,onAjusterNoms:V},{activator:withCtx(({props:ue})=>[createBaseVNode("span",normalizeProps(guardReactiveProps(ue)),[createTextVNode(toDisplayString$1(unref(M)||unref(B)("communs.baseCarteObjet.sansNom"))+" ",1),createVNode(VBtn,{icon:I.value?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),createVNode(ce,{id:Z.idTableau},null,8,["id"]),createVNode(VSpacer),createVNode(_sfc_main$q,{"info-objet":{id:Z.idTableau,typeObjet:"tableau"},type:"exportation"},{activator:withCtx(({props:ue})=>[createVNode(VTooltip,mergeProps(ue,{text:unref(B)("exporter.indice"),"open-delay":200,location:"bottom"}),{activator:withCtx(({props:_e})=>[createVNode(VBtn,mergeProps(_e,{icon:"mdi-download"}),null,16)]),_:2},1040,["text"])]),_:1},8,["info-objet"]),createVNode(_sfc_main$q,{"info-objet":{id:Z.idTableau,typeObjet:"tableau"},type:"importation"},{activator:withCtx(({props:ue})=>[createVNode(VTooltip,mergeProps(ue,{text:unref(B)("importer.indice"),"open-delay":200,location:"bottom"}),{activator:withCtx(({props:_e})=>[createVNode(VBtn,mergeProps(_e,{icon:"mdi-upload"}),null,16)]),_:2},1040,["text"])]),_:1},8,["info-objet"])]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(_sfc_main$9,{"id-tableau":Z.idTableau},null,8,["id-tableau"])]),_:1})]),_:1})]),_:1})}}}),_hoisted_1={key:1},_hoisted_2={key:1},_hoisted_3={key:1},_sfc_main$7=defineComponent$1({__name:"RsultatRechercheProjet",props:{rsultat:{}},setup(t){const n=t,_=inject$1("constl"),{traduireNom:x}=utiliserLangues(),{useI18n:E}=_(),{t:S}=E(),C=Z=>computed(()=>{const{de:ne,info:re}=n.rsultat.rsultatObjectif;if(re.type==="texte"&&ne===Z)return re}),T=C("nom"),B=C("descr"),A=C("id"),I=computed(()=>{const{de:Z,clef:ne,info:re}=n.rsultat.rsultatObjectif;if(re.type==="rsultat"&&Z==="bd"&&ne&&re.info.type==="rsultat")return{id:ne,info:re.info}}),D=Z=>computed(()=>{const{de:ne,clef:re,info:X}=n.rsultat.rsultatObjectif;if(X.type==="rsultat"&&ne===Z&&re&&X.info.type==="texte")return{id:re,info:X}}),M=D("variable"),V=D("motClef"),L=D("bd"),F=ref$1({}),j=x(F);enregistrercoute(_?.projets.suivreNomsProjet({idProjet:n.rsultat.id,f:Z=>F.value=Z}));const U=ref$1({}),H=x(U);enregistrercoute(_?.projets.suivreDescriptionsProjet({idProjet:n.rsultat.id,f:Z=>U.value=Z}));const Y=ref$1();return enregistrercoute(_?.rseau?.suivreAuteursProjet({idProjet:n.rsultat.id,f:Z=>Y.value=Z})),(Z,ne)=>(openBlock(),createBlock(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[unref(T)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(T)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1,toDisplayString$1(unref(j)||unref(S)("nues.aucunNom")),1))]),_:1}),createVNode(VListItemSubtitle,null,{default:withCtx(()=>[unref(B)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(B)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_2,toDisplayString$1(unref(H)||unref(S)("nues.aucuneDescription")),1))]),_:1}),createVNode(_sfc_main$1F,{auteurs:Y.value,"n-max":1},null,8,["auteurs"]),createVNode(_sfc_main$N,{id:Z.rsultat.id},{default:withCtx(()=>[unref(A)?(openBlock(),createBlock(_sfc_main$1I,{key:0,info:unref(A)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_3,toDisplayString$1(Z.rsultat.id),1))]),_:1},8,["id"]),unref(M)?(openBlock(),createBlock(_sfc_main$1P,{key:0,id:unref(M).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(M).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0),unref(V)?(openBlock(),createBlock(_sfc_main$1n,{key:1,id:unref(V).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(V).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0),unref(L)?(openBlock(),createBlock(_sfc_main$1w,{key:2,id:unref(L).id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:unref(L).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0),I.value?(openBlock(),createBlock(_sfc_main$1w,{key:3,id:I.value.id},{default:withCtx(()=>[createVNode(_sfc_main$1I,{info:I.value.info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$6=defineComponent$1({__name:"PageRecherche",setup(t){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{obtImageDco:E}=utiliserImagesDco(),S=E("recherche"),C=ref$1(),T=ref$1(2),B=[{icne:"mdi-key",texte:x("pages.mesDonnes.motsClefs"),clef:"motsClefs"},{icne:"mdi-variable",texte:x("pages.mesDonnes.variables"),clef:"variables"},{icne:"mdi-database-outline",texte:x("pages.mesDonnes.bds"),clef:"bds"},{icne:"mdi-folder-outline",texte:x("pages.mesDonnes.projets"),clef:"projets"},{icne:"mdi-account-group-outline",texte:x("pages.mesDonnes.nues"),clef:"nues"}],A=ref$1(),I=ref$1(),D=ref$1(),M=ref$1(),V=ref$1(),L=new MultiChercheur,{nOuProfondeur:F}=L,j=()=>{F.value++};return watchEffect(async()=>{switch(B[T.value].clef){case"motsClefs":{await L.lancerRecherche({requte:C,rfRsultat:I,fRecherche:async({requte:H,nOuProfondeur:Y,rfRsultat:Z})=>await n?.recherche.rechercherMotsClefsSelonTexte({texte:H,f:ne=>Z.value=ne,nRsultatsDsirs:Y})});break}case"variables":{await L.lancerRecherche({requte:C,rfRsultat:D,fRecherche:async({requte:H,nOuProfondeur:Y,rfRsultat:Z})=>await n?.recherche.rechercherVariablesSelonTexte({texte:H,f:ne=>Z.value=ne,nRsultatsDsirs:Y})});break}case"bds":{await L.lancerRecherche({requte:C,rfRsultat:A,fRecherche:async({requte:H,nOuProfondeur:Y,rfRsultat:Z})=>await n?.recherche.rechercherBdsSelonTexte({texte:H,f:ne=>Z.value=ne,nRsultatsDsirs:Y})});break}case"projets":{await L.lancerRecherche({requte:C,rfRsultat:M,fRecherche:async({requte:H,nOuProfondeur:Y,rfRsultat:Z})=>await n?.recherche.rechercherProjetsSelonTexte({texte:H,f:ne=>Z.value=ne,nRsultatsDsirs:Y})});break}case"nues":{await L.lancerRecherche({requte:C,rfRsultat:V,fRecherche:async({requte:H,nOuProfondeur:Y,rfRsultat:Z})=>await n?.recherche.rechercherNuesSelonTexte({texte:H,f:ne=>Z.value=ne,nRsultatsDsirs:Y})});break}}}),(U,H)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(x)("pages.recherche.titre"),image:unref(S)},null,8,["titre","image"]),createVNode(VTextField,{modelValue:C.value,"onUpdate:modelValue":H[0]||(H[0]=Y=>C.value=Y),variant:"outlined","prepend-inner-icon":"mdi-magnify"},null,8,["modelValue"]),createVNode(VChipGroup,{modelValue:T.value,"onUpdate:modelValue":H[1]||(H[1]=Y=>T.value=Y),color:"primary",mandatory:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(B,Y=>(openBlock(),createBlock(VChip,{key:Y.clef,class:"mx-2",variant:"outlined","prepend-icon":Y.icne},{default:withCtx(()=>[createTextVNode(toDisplayString$1(Y.texte),1)]),_:2},1032,["prepend-icon"]))),128))]),_:1},8,["modelValue"]),B[T.value].clef==="bds"?(openBlock(),createBlock(VList,{key:0,class:"text-start"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(A.value,Y=>(openBlock(),createBlock(_sfc_main$19,{id:Y.id,key:Y.id},{activator:withCtx(({props:Z})=>[createVNode(_sfc_main$M,mergeProps(Z,{rsultat:Y}),null,16,["rsultat"])]),_:2},1032,["id"]))),128))]),_:1})):B[T.value].clef==="motsClefs"?(openBlock(),createBlock(VList,{key:1,class:"text-start"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(I.value,Y=>(openBlock(),createBlock(_sfc_main$19,{id:Y.id,key:Y.id},{activator:withCtx(({props:Z})=>[createVNode(_sfc_main$I,mergeProps(Z,{rsultat:Y}),null,16,["rsultat"])]),_:2},1032,["id"]))),128))]),_:1})):B[T.value].clef==="variables"?(openBlock(),createBlock(VList,{key:2,class:"text-start"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(D.value,Y=>(openBlock(),createBlock(_sfc_main$19,{id:Y.id,key:Y.id},{activator:withCtx(({props:Z})=>[createVNode(_sfc_main$E,mergeProps(Z,{rsultat:Y}),null,16,["rsultat"])]),_:2},1032,["id"]))),128))]),_:1})):B[T.value].clef==="projets"?(openBlock(),createBlock(VList,{key:3,class:"text-start"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(M.value,Y=>(openBlock(),createBlock(_sfc_main$19,{id:Y.id,key:Y.id},{activator:withCtx(({props:Z})=>[createVNode(_sfc_main$7,mergeProps(Z,{rsultat:Y}),null,16,["rsultat"])]),_:2},1032,["id"]))),128))]),_:1})):B[T.value].clef==="nues"?(openBlock(),createBlock(VList,{key:4,class:"text-start"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(V.value,Y=>(openBlock(),createBlock(_sfc_main$19,{id:Y.id,key:Y.id},{activator:withCtx(({props:Z})=>[createVNode(_sfc_main$K,mergeProps(Z,{rsultat:Y}),null,16,["rsultat"])]),_:2},1032,["id"]))),128)),createVNode(VListItem,{onClick:j},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(" t('Augementer N') ")]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$5=defineComponent$1({__name:"ItemFavoris",props:{epingle:{}},setup(t){const n=t,{traduireNom:_}=utiliserLangues(),{useI18n:x}=_(),{t:E}=x(),S=inject$1("constl"),C=ref$1({}),T=_(C);enregistrercoute(S?.motsClefs.suivreNomsMotClef({idMotClef:n.epingle.idObjet,f:M=>C.value=M}));const B=ref$1();enregistrercoute(S?.suivreTypeObjet({idObjet:n.epingle.idObjet,f:M=>B.value=M}));const A=computed(()=>{switch(B.value){case"bd":return"mdi-database";case"motClef":return"mdi-key";case"variable":return"mdi-variable";case"projet":return"mdi-folder-outline";case"nue":return"mdi-account-group-outline";default:return"mdi-pin-outline"}}),I=ref$1();enregistrercoute(S?.favoris.suivreEstpinglSurDispositif({idObjet:n.epingle.idObjet,f:M=>I.value=M}));const D=async()=>{await S?.favoris.dspinglerFavori({idObjet:n.epingle.idObjet})};return(M,V)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value),1)]),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createVNode(_sfc_main$23,{texte:unref(T)||M.epingle.idObjet,"longueur-max":30},null,8,["texte"])]),_:1}),createVNode(VListItemAction,null,{default:withCtx(()=>[createVNode(_sfc_main$1M,{id:M.epingle.idObjet},{activator:withCtx(({props:L})=>[createVNode(VTooltip,mergeProps(L,{"open-delay":"200",location:"bottom"}),{activator:withCtx(({props:F})=>[createVNode(VBtn,mergeProps(F,{icon:I.value&&I.value.bd?"mdi-pin":"mdi-pin-outline"}),null,16,["icon"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString$1(unref(E)(I.value&&I.value.bd?"favoris.indicepingl":"favoris.indiceNonpingl")),1)]),_:1},16)]),_:1},8,["id"]),createVNode(_sfc_main$1C,{onEffacer:D},{activator:withCtx(({props:L})=>[createVNode(VTooltip,mergeProps(L,{"open-delay":"200",location:"bottom"}),{activator:withCtx(({props:F})=>[createVNode(VBtn,mergeProps(F,{icon:"mdi-delete",color:"error"}),null,16)]),default:withCtx(()=>[createBaseVNode("span",null,toDisplayString$1(unref(E)("favoris.effacer.indiceEffacer")),1)]),_:2},1040)]),_:1})]),_:1})]),_:1}))}}),_sfc_main$4=defineComponent$1({__name:"PageFavoris",setup(t){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{obtImageDco:E}=utiliserImagesDco(),S=E("automatisation"),C=ref$1();return enregistrercoute(n?.favoris.suivreFavoris({f:T=>C.value=T})),(T,B)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(x)("pages.favoris.titre"),image:unref(S),"sous-titre":unref(x)("pages.favoris.sousTitre")},null,8,["titre","image","sous-titre"]),createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-plus",title:unref(x)("pages.favoris.commentAjouterNouveau.titre"),subtitle:unref(x)("pages.favoris.commentAjouterNouveau.sousTitre"),onClick:B[0]||(B[0]=A=>T.$router.push(encodeURI("/donnes/")))},null,8,["title","subtitle"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(C.value,A=>(openBlock(),createBlock(_sfc_main$5,{key:A.idObjet,epingle:A},null,8,["epingle"]))),128))]),_:1})]),_:1}))}}),_sfc_main$3=defineComponent$1({__name:"PageAutomatisations",setup(t){const n=inject$1("constl"),{useI18n:_}=_(),{t:x}=_(),{obtImageDco:E}=utiliserImagesDco(),S=E("automatisation"),C=ref$1();return enregistrercoute(n?.automatisations.suivreAutomatisations({f:T=>C.value=T})),(T,B)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(x)("pages.automatisations.titre"),image:unref(S),"sous-titre":unref(x)("pages.automatisations.sousTitre")},null,8,["titre","image","sous-titre"]),createVNode(VList,{class:"text-start"},{default:withCtx(()=>[createVNode(_sfc_main$q,{automatiser:""},{activator:withCtx(({props:A})=>[createVNode(VListItem,mergeProps(A,{"prepend-icon":"mdi-plus",title:unref(x)("pages.automatisations.ajouterNouvelle.titre"),subtitle:unref(x)("pages.automatisations.ajouterNouvelle.sousTitre")}),null,16,["title","subtitle"])]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(C.value,A=>(openBlock(),createBlock(_sfc_main$m,{key:A.id,spcification:A},null,8,["spcification"]))),128))]),_:1})]),_:1}))}}),_sfc_main$2=defineComponent$1({__name:"PageSignalements",setup(t){const{useI18n:n}=_(),{t:_}=n(),{obtImageDco:x}=utiliserImagesDco(),E=x("problme");return(S,C)=>(openBlock(),createBlock(VContainer,{class:"text-center"},{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(_)("pages.signalements.titre"),image:unref(E),"sous-titre":unref(_)("pages.signalements.sousTitre")},null,8,["titre","image","sous-titre"]),createVNode(VBtn,{class:"mx-2 my-2",variant:"outlined",color:"primary",onClick:C[0]||(C[0]=T=>unref(ouvrirLien)(unref(URL_SIGNALEMENTS)))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("pages.signalements.bouton"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode(" mdi-open-in-new ")]),_:1})]),_:1}),createVNode(VBtn,{class:"mx-2 my-2",variant:"outlined",onClick:C[1]||(C[1]=T=>unref(ouvrirLien)(`mailto:${unref(COURRIEL_SIGNALEMENTS)}`))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("pages.signalements.boutonCourriel"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>[createTextVNode(" mdi-email ")]),_:1})]),_:1})]),_:1}))}}),_sfc_main$1=defineComponent$1({__name:"CarteFichierTlchargement",props:{url:{},version:{},nom:{}},setup(t){const n=t,{formatterVersion:_}=utiliserNumration(),{useI18n:x}=_(),{t:E}=x(),{obtImageDco:S}=utiliserImagesDco(),C=_(n.version),T={Linux:["AppImage"],macOS:["dmg"],Windows:["exe"]},B=function(L){return L.split(".").pop()},A=computed(()=>{const L=B(n.nom);return L?Object.entries(T).find(([j,U])=>U.includes(L))?.[0]:void 0}),I={Linux:__vitePreload(()=>import("./Linux-1eee7f7b.js"),[]),macOS:__vitePreload(()=>import("./macOS-0dcf9457.js"),[]),Windows:__vitePreload(()=>import("./Windows-cb1dda69.js"),[])},D=ref$1();watchEffect(async()=>{A.value&&(D.value=(await I[A.value]).default)});const M=S("docs"),V=computed(()=>D.value||M.value);return(L,F)=>(openBlock(),createBlock(VCard,{class:"ma-3 pa-5","max-width":300,onClick:F[0]||(F[0]=j=>unref(ouvrirLien)(L.url))},{default:withCtx(()=>[createVNode(VImg,{src:V.value,contain:"","max-height":"150"},null,8,["src"]),createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString$1(A.value)+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-download"})]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(E)("tlchargements.version",{version:unref(C)})),1)]),_:1})]),_:1}))}}),VToolbar$1="",makeVToolbarTitleProps=propsFactory({text:String,...makeComponentProps(),...makeTagProps()},"VToolbarTitle"),VToolbarTitle=genericComponent()({name:"VToolbarTitle",props:makeVToolbarTitleProps(),setup(t,n){let{slots:_}=n;return useRender(()=>{const x=!!(_.default||_.text||t.text);return createVNode(t.tag,{class:["v-toolbar-title",t.class],style:t.style},{default:()=>[x&&createVNode("div",{class:"v-toolbar-title__placeholder"},[_.text?_.text():t.text,_.default?.()])]})}),{}}}),allowedDensities=[null,"prominent","default","comfortable","compact"],makeVToolbarProps=propsFactory({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:t=>allowedDensities.includes(t)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...makeBorderProps(),...makeComponentProps(),...makeElevationProps(),...makeRoundedProps(),...makeTagProps({tag:"header"}),...makeThemeProps()},"VToolbar"),VToolbar=genericComponent()({name:"VToolbar",props:makeVToolbarProps(),setup(t,n){let{slots:_}=n;const{backgroundColorClasses:x,backgroundColorStyles:E}=useBackgroundColor(toRef(t,"color")),{borderClasses:S}=useBorder(t),{elevationClasses:C}=useElevation(t),{roundedClasses:T}=useRounded(t),{themeClasses:B}=provideTheme(t),{rtlClasses:A}=useRtl(),I=shallowRef(!!(t.extended||_.extension?.())),D=computed(()=>parseInt(Number(t.height)+(t.density==="prominent"?Number(t.height):0)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0),10)),M=computed(()=>I.value?parseInt(Number(t.extensionHeight)+(t.density==="prominent"?Number(t.extensionHeight):0)-(t.density==="comfortable"?4:0)-(t.density==="compact"?8:0),10):0);return provideDefaults({VBtn:{variant:"text"}}),useRender(()=>{const V=!!(t.title||_.title),L=!!(_.image||t.image),F=_.extension?.();return I.value=!!(t.extended||F),createVNode(t.tag,{class:["v-toolbar",{"v-toolbar--absolute":t.absolute,"v-toolbar--collapse":t.collapse,"v-toolbar--flat":t.flat,"v-toolbar--floating":t.floating,[`v-toolbar--density-${t.density}`]:!0},x.value,S.value,C.value,T.value,B.value,A.value,t.class],style:[E.value,t.style]},{default:()=>[L&&createVNode("div",{key:"image",class:"v-toolbar__image"},[_.image?createVNode(VDefaultsProvider,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},_.image):createVNode(VImg,{key:"image-img",cover:!0,src:t.image},null)]),createVNode(VDefaultsProvider,{defaults:{VTabs:{height:convertToUnit(D.value)}}},{default:()=>[createVNode("div",{class:"v-toolbar__content",style:{height:convertToUnit(D.value)}},[_.prepend&&createVNode("div",{class:"v-toolbar__prepend"},[_.prepend?.()]),V&&createVNode(VToolbarTitle,{key:"title",text:t.title},{text:_.title}),_.default?.(),_.append&&createVNode("div",{class:"v-toolbar__append"},[_.append?.()])])]}),createVNode(VDefaultsProvider,{defaults:{VTabs:{height:convertToUnit(M.value)}}},{default:()=>[createVNode(VExpandTransition,null,{default:()=>[I.value&&createVNode("div",{class:"v-toolbar__extension",style:{height:convertToUnit(M.value)}},[F])]})]})]})}),{contentHeight:D,extensionHeight:M}}}),_sfc_main=defineComponent$1({__name:"PageTlchargements",setup(t){const{useI18n:n}=_(),{t:_}=n(),x=function(I){return I.split(".").pop()},E=ref$1(),S=ref$1(),C=ref$1(),T=ref$1(),B=computed(()=>{const I=A.find(D=>D.nom===T.value)?.exts;return S.value?.filter(D=>!C.value||D.version===C.value).filter(D=>{const M=x(D.name);return!I||M&&I.includes(M)})});onMounted(async()=>{const I=(await axios$1.get(IPA_TLCHARGEMENTS)).data,D=["AppImage","dmg","exe"];E.value=I.map(M=>M.name),S.value=I.map(M=>M.assets.map(V=>({...V,version:M.name})).filter(V=>D.includes(x(V.name)||""))).flat(),C.value=E.value[0]});const A=[{nom:"Linux",logo:__vitePreload(()=>import("./Linux-1eee7f7b.js"),[]),exts:["AppImage"]},{nom:"macOS",logo:__vitePreload(()=>import("./macOS-0dcf9457.js"),[]),exts:["dmg"]},{nom:"Windows",logo:__vitePreload(()=>import("./Windows-cb1dda69.js"),[]),exts:["exe"]}];return(I,D)=>(openBlock(),createBlock(VContainer,null,{default:withCtx(()=>[createVNode(_sfc_main$12,{titre:unref(_)("pages.tlchargements.titre")},null,8,["titre"]),createVNode(VToolbar,{class:"mb-4"},{default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:"4"},{default:withCtx(()=>[createVNode(VSelect,{modelValue:C.value,"onUpdate:modelValue":D[0]||(D[0]=M=>C.value=M),dense:"","hide-details":"",clearable:"",outlined:"",label:unref(_)("pages.tlchargements.version"),items:E.value},null,8,["modelValue","label","items"])]),_:1}),createVNode(VCol,{cols:"4"},{default:withCtx(()=>[createVNode(VSelect,{modelValue:T.value,"onUpdate:modelValue":D[1]||(D[1]=M=>T.value=M),label:unref(_)("pages.tlchargements.systme"),items:A.map(M=>M.nom),density:"compact",variant:"outlined","hide-details":"",clearable:""},null,8,["modelValue","label","items"])]),_:1}),createVNode(VCol,{cols:"4"},{default:withCtx(()=>[createVNode(VBtn,{variant:"outlined",color:"primary","append-icon":"mdi-open-in-new",onClick:D[2]||(D[2]=M=>unref(ouvrirLien)(unref(URL_TLCHARGEMENTS)))},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(_)("pages.tlchargements.voirTous")),1)]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(VSlideXTransition,{group:"",class:"d-flex flex-wrap justify-center"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(B.value,M=>(openBlock(),createBlock(_sfc_main$1,{key:M.id,url:M.browser_download_url,version:M.version,nom:M.name},null,8,["url","version","nom"]))),128))]),_:1})]),_:1}))}}),routes=[{path:"/",component:_sfc_main$10},{path:"/compte",name:"Compte",component:_sfc_main$O},{path:encodeURI("/donnes"),name:"Donnes",component:_sfc_main$r},{path:encodeURI("/donnes/bd/:id"),component:_sfc_main$g,props:t=>{const{id:n}=t.params;if(typeof n=="string")return{id:decodeURIComponent(n)}}},{path:encodeURI("/donnes/bd/:id/tableau/:idTableau"),component:_sfc_main$8},{path:encodeURI("/donnes/nue/:id"),component:_sfc_main$e,props:t=>{const{id:n}=t.params;if(typeof n=="string")return{id:decodeURIComponent(n)}}},{path:"/recherche",name:"Recherche",component:_sfc_main$6},{path:"/favoris",name:"Favoris",component:_sfc_main$4},{path:"/automatisations",name:"Automatisations",component:_sfc_main$3},{path:"/signalements",name:"Signalements",component:_sfc_main$2},{path:encodeURI("/tlchargements"),name:"Tlchargements",component:_sfc_main}],routeur=createRouter({history:createWebHashHistory(),routes});routeur.afterEach(t=>{const{lg:n}=t.query;if(n&&typeof n=="string"){const{choisirLangues:_}=utiliserLangues();_(n)}});const fr={communs:{constellation:"Constellation",suivant:"Suivant",retour:"Retour",anonyme:"Anonyme",effacer:"Effacer",indiceNom:"Nom",indiceLangue:"Langue",texteAucunNom:"Ajouter un nom ci-dessus",erreurLangue:"Ce texte doit tre en {langue}.",troisPetitsPoints:"..."},navigation:{accueil:"Accueil",donnes:"Mes donnes",recherche:"Explorer",favoris:"Mes favoris",automatisations:"Automatisations",signalements:"Signaler un problme"},accueil:{dmarrer:"Dmarrer",version:"Version {version}",piedDePage:"Contributeurs Constellation",initialiserCompte:{titreCheminement:"Avez-vous dj un compte?",sousTitreCheminement:"Si oui, vous pouvez vous y connecter.",titreNoms:"Choisissez votre nom",sousTitreNoms:"Le plus de langues, le mieux!",titreImage:"Choisissez une image",titreCompteRejoindre:"Connectez-vous",titreMotDePasse:"Code secret",titrePersister:"Persister les donnes?",titreCestParti:"C'est tout!",texteEnConnexion:"Connection au rseau Constellation en cours. Assurez-vous que vous tes bien en ligne.",texteCompteRejoindre:"Ouvrez votre compte Constellation sur un autre dispositif dj connect, puis choisissez votre compte ci-dessous.",indiceCompte:"Compte",texteCodeSecret:"Sur votre autre dispositif, choisissez @:pages.compte.ajouterDispositif et puis entrez le mot de passe ci-dessous.",indiceCodeSecret:"Code secret",indiceComptePasVu:"Vous ne le voyez pas?",indiceRechercheComptes:"On est en train de rechercher.",indiceEssaieDeConnecter:" Attendez un peu, puis assurez-vous qu'un dispositif dj connect  votre compte Constellation est bien en ligne.",indiceMotDePasse:"Code secret",nouveauCompte:"Nouveau compte",connecter:"Connecter compte",texteImage:"Cliquez ci-dessus pour choisir une image de profil (si vous voulez)",textePersister:{1:"Si vous tiez sur un systme centralis, comme les Documents Google ou votre courriel, vos donnes seraient gardes sur un serveur centralis, et vous devriez demander permission  ce serveur chaque fois que vous voulez modifier ou mme accder vos propres donnes.",2:"Constellation, au contraire, est un logiciel local. Vos donnes demeurent sur votre appareil lui-mme. (Eh oui, a fonctionne mme sans Internet!) Le seul hic, c'est que certains navigateurs pensent que tous les systmes sont centraliss et que c'est pas grave s'ils effacent vos donnes locales pour librer de l'espace dans la mmoire. Sans demander votre permission, videmment.",3:"Pour viter tout risque de larmes plus tard, vous pouvez dire ds maintenant  votre navigateur de ne pas effacer vos donnes sans votre permission."},persister:"Protger",pasPersister:"Peut-tre plus tard",djPersistes:"Vos donnes sont dj protges!",bienvenu:"Bienvenu  Constellation",sousTitreBienvenu:"On est heureux de vous voir!",cestParti:"C'est parti!"}},imageditable:{imageTropGrande:"L'image est trop grande. Elle doit tre infrieure  {tailleMaxKO} KO."},listeNomsProfil:{indiceNom:"Votre nom"},languesInterface:{contribuer:"Contribuer",dialogueContribuer:{titre:"Contribuer",sousTitre:"Traduisez l'interface Constellation",langueSource:"Langue source",langueCible:"Langue cible",aucuneTraduction:"[Aucune traduction]",titreSuggestions:"Suggestions",aucuneSuggestion:"Nous n'avons trouv aucune suggestion communautaire pour ce message."}},pages:{compte:{ajouterDispositif:"Connecter un dispositif",nouveauContact:"Nouveau contact"},signalements:{titre:"Vous prouvez des difficults?",sousTitre:"Ne vous en faites pas; nous sommes l pour vous aider.",bouton:"Signaler sur GitHub",boutonCourriel:"Support par courriel"}},membres:{contacts:"Contacts",confiance:{bloqu:"Bloqu",inconnu:"Inconnu",peuDinteraction:"Peu d'interaction",interactionMoyenne:"Interaction moyenne",beaucoupDinteraction:"Beaucoup d'interaction",connaissance:"Connaissance"}},bds:{qualit:"Qualit"}},kaq={communs:{constellation:"Ch'umil"}},es={communs:{constellation:"Constelacin",suivant:"Siguiente",retour:"Regresar",anonyme:"Annimo"}},messages={fr,:{communs:{constellation:"",suivant:"",retour:"",fermer:"",annuler:"",pingler:"",copier:" ",sauvegarder:"",erreurLangue:"  {langue}  .",pointInterrogation:"?",baseCarteObjet:{description:"",sansNom:" ",sansDescription:"  ",auteurs:"",ajouterAuteur:" "}},navigation:{accueil:"",donnes:" ",favoris:" ",recherche:"",automatisations:"",signalements:" "},accueil:{dmarrer:"",version:" {version}",initialiserCompte:{titreCheminement:"  ?",sousTitreCheminement:"  ,    ?",titreNoms:"  ",sousTitreNoms:" ,  !",titreImage:" ",titreCompteRejoindre:" ",titrePersister:"  ?",titreCestParti:" !",nouveauCompte:" ",connecter:" ",texteImage:" ,      .",textePersister:{1:"           ,        .      ,            .",2:"     .           . Le seul hic, c'est que certains navigateurs pensent que tous les systmes sont centraliss et que c'est pas grave s'ils effacent vos donnes locales pour librer de l'espace dans la mmoire. Sans demander votre permission, videmment."},persister:" ",pasPersister:" ",djPersistes:"   ",bienvenu:"  ",sousTitreBienvenu:" !",cestParti:""}},pages:{compte:{titre:"",titreDialogueNoms:" ",sousTitreDialogueNoms:"   ",ongletCompte:"",ongletConnexions:"",ongletThme:"",compte:{mesDispositifs:" ",optionsAvances:" ",titreExporterCompte:"  ",btnExporterCompte:" ",titreEffacerCompte:" ",btnEffacerCompte:" "},connexions:{Constellation:"",SFIP:". . .",indiceSFIP:"  ",titreSFIP:". .  ",titreConstellation:" ",dispositifs:"{nDispositifs} ,  {nDispositifsEnLigne}"},options:{thmeNuit:"/",thmeImages:" ",langue:" ",numration:" ",unDraw:"unDraw",:"  ",entte:"  ",couleurs:"",culture:""}},mesDonnes:{titre:" ",motsClefs:" ",variables:"",bds:" ",projets:"",nues:"",nouveauMotClef:"  ",nouvelleVariable:" ",nouvelleBd:"  ",nouveauProjet:" ",nouvelleNue:" "},signalements:{titre:" ?",sousTitre:" ,   .",bouton:" ",boutonCourriel:" "}},languesInterface:{dialogueContribuer:{montrerTraduites:" ",aucuneTraduction:"[ ]",titreSuggestions:""}},dispositifs:{sansNom:" ",ajouter:" ",ceDispositif:" "},auteurs:{carteGrer:{titre:" ",sousTitre:"    ",aucunRsultat:"    ",nouveaux:" ",ajouterCommeModrateur:" "},item:{titre:"   | {n}  | {n} "}},motsClefs:{nouveau:{titreNoms:"  ",sousTitreNoms:" ,  !",titreConfirmation:"",texteBtnCration:"",sousTitreConfirmation:"    ",texteCrer:"    ",texteIndiceDescription:" ",texteAucuneDescription:"      "},grerMotsClefsObjet:"  ",sansNom:"   "},bds:{sansNom:"  ",carteBd:{infos:" ",variables:"",motsClefs:" ",tableaux:"",ouvrirBd:" ",attenteTableaux:"  ..."},qualit:"",note:{A:"","A-":"-",B:"","B-":"-","C+":"+",C:"",D:"",F:""}},nues:{sansNom:"  ",carteNue:{ouvrirNue:" "},nouvelle:{titreNoms:" ",sousTitreNoms:"      ",titreDescriptions:" ",sousTitreDescriptions:"    ",texteIndiceDescription:" ",texteAucuneDescription:"  ",titreAutorisation:" ",sousTitreAutorisation:"     ",parInvitation:"  ",indiceParInvitation:"      .",ouverteTous:" ",indiceOuverteTous:"  .  ,    .",titreConfirmation:"",sousTitreConfirmation:"   ",texteCrer:"   ",texteBtnCration:" "}},lienObjet:{indice:" "},tableaux:{sansNom:"  "},variables:{sansNom:"  ",catgorie:"",catgories:{numrique:"",chane:"",chaneNonTraductible:"  "},rgles:""},rgles:{types:{catgorie:" "},infos:{catgorie:"   {categorie}  ."}},rplications:{rplications:"|",rplicationsEnLigne:"( {0})"},automatisations:{item:{titre:"   | {n}  | {n} "}},pingler:{titre:"",dispositifspingle:" ",dispositifspingleFichier:"  ",aucun:"  ",indiceAucun:"   ",tous:" ",indiceTous:"   ",install:" ",indiceInstall:"     ",dispositifsSpcifiques:" ",indiceDispositifsSpcifiques:"    ",indiceSlectionnerDispositif:" "},effacer:{titre:"  ?",avertissement:" ,    .",explication:"    ,      .        ,        .",effacer:""},membres:{contacts:"",bds:" ",projets:"",aucuneBd:"  ",aucunProjet:"  ",aucuneNue:"  ",nues:"",moi:" ",confiance:{bloqu:"",inconnu:"",peuDinteraction:" ",interactionMoyenne:" ",beaucoupDinteraction:" ",connaissance:"",faireConfiance:"",bloquerPublique:"  ",bloquerPriv:"  ",titreCarte:" ",question:"      ?",indiceInconnu:"  .",indiceFaireConfiance:"        .       .",indiceBloquerPublique:"        .        .",indiceBloquerPriv:"       .         ."},contact:{courriel:"",tlphone:"",tlgramme:"",whatsapp:"",autre:"  "},nouvelleInfoContact:{titre:"   ",avertissement:"    ",indiceType:" ",indiceAutreType:"  ",valeur:"  "},modifierInfoContact:{titre:"  "},menuContact:{contacter:" ",copier:" ",messageSalut:""},vu:{ceCompte:"",enLigne:"",Linstant:" ",ilYAMinutes:"{n}    |     | {n}   ",ilYAHeures:"{n}    |     | {n}   ",ilYAJours:"{n}    |     | {n}   ",ilYASemaines:"{n}    |     | {n}   ",ilYAMois:"{n}    |     | {n}   ",ilYALongtemps:"  "}},listeNomsProfil:{indiceNom:" ",indiceLangue:" "},objet:{indiceNom:"",indiceLangue:"",texteAucunNom:"  ",titreDialogueNoms:" ",sousTitreDialogueNoms:"  ",indiceDescription:"",texteAucuneDescription:"  ",titreDialogueDescriptions:"",sousTitreDialogueDescriptions:"  "},licences:{info:{"CC-BY-SA-4_0":{nom:"       ,",abr:"..  ,",lien:"https://creativecommons.org/licenses/by-sa/4.0/deed.fr"},"CC-BY-4_0":{nom:"   ,",abr:".. ,",lien:"https://creativecommons.org/licenses/by/4.0/deed.fr"},"CC-0-1_0":{nom:"   ,",abr:".  ,",lien:"https://creativecommons.org/publicdomain/zero/1.0/deed.fr"},"ODbl-1_0":{nom:"     ,",abr:".. ,",lien:"https://opendatacommons.org/licenses/odbl/summary/"},"ODC-BY-1_0":{nom:"     ,",abr:"..  ,",lien:"https://opendatacommons.org/licenses/by/summary"},PDDL:{nom:"    ",abr:".. ",lien:"https://opendatacommons.org/licenses/pddl/summary"},"rvca-open":{nom:"      ",abr:".. ",lien:"https://rvcagis.github.io/jkan/datasets/rvca-open-licence/"},"0bsd":{nom:"    ",abr:"..  ",lien:"https://choosealicense.com/licenses/0bsd/"},"afl-3_0":{nom:"  ",abr:". ",lien:"https://choosealicense.com/licenses/afl-3.0/"},"agpl-3_0":{nom:"    ,",abr:"..  ,",lien:"https://choosealicense.com/licenses/agpl-3.0/"},"apache-2_0":{nom:"  .",abr:". .",lien:"https://choosealicense.com/licenses/apache-2.0/"},"artistic-2_0":{nom:"  .",abr:". .",lien:"https://choosealicense.com/licenses/artistic-2.0/"},"bsd-2-clause":{nom:" -    ",abr:"...",lien:"https://choosealicense.com/licenses/bsd-2-clause/"},"bsd-3-clause-clear":{nom:"-     ",abr:"... ",lien:"https://choosealicense.com/licenses/bsd-3-clause-clear/"},"bsd-3-clause":{nom:"    - ",abr:"....- ",lien:"https://choosealicense.com/licenses/bsd-3-clause/"},"bsd-4-clause":{nom:" -    ",abr:"...  -",lien:"https://choosealicense.com/licenses/bsd-4-clause/"},"bsl-1_0":{nom:"   .",abr:".  . ",lien:"https://choosealicense.com/licenses/bsl-1.0/"},"cecill-2_1":{nom:"    ,",abr:"... ,",lien:"https://choosealicense.com/licenses/cecill-2.1/"},"ecl-2_0":{nom:"   ,",abr:".. ,",lien:"https://choosealicense.com/licenses/ecl-2.0/"},"epl-1_0":{nom:"   ,",abr:".. ,",lien:"https://choosealicense.com/licenses/epl-1.0/"},"epl-2_0":{nom:"   ,0",abr:".. ,",lien:"https://choosealicense.com/licenses/epl-2.0/"},"eupl-1_0":{nom:"    ,",abr:"... ,",lien:"https://choosealicense.com/licenses/eupl-1.1/"},"eupl-1_2":{nom:"    ,",abr:"... ,",lien:"https://choosealicense.com/licenses/eupl-1.2/"},"gpl-2_0":{nom:"   ,",abr:"..  ,",lien:"https://choosealicense.com/licenses/gpl-2.0/"},"gpl-3_0":{nom:"   ,",abr:"..  ,",lien:"https://choosealicense.com/licenses/gpl-3.0/"},isc:{nom:"   ",abr:".. ",lien:"https://choosealicense.com/licenses/isc/"},"lgpl-2_1":{nom:"    ,",abr:"..  ,",lien:"https://choosealicense.com/licenses/lgpl-2.1/"},"lgpl-3_0":{nom:"     ,",abr:"..  ,",lien:"https://choosealicense.com/licenses/lgpl-3.0/"},"lppl-1_3c":{nom:"   LaTeX ,",abr:".. LaTeX ,",lien:"https://choosealicense.com/licenses/lppl-1.3c/"},"mit-0":{nom:"    ",abr:"..  ",lien:"https://choosealicense.com/licenses/mit-0/"},mit:{nom:"  ",abr:"..",lien:"https://choosealicense.com/licenses/mit/"},"mpl-2_0":{nom:"   ,",abr:".. ,",lien:"https://choosealicense.com/licenses/mpl-2.0/"},"ms-pl":{nom:"  ",abr:". ",lien:"https://choosealicense.com/licenses/ms-pl/"},"ms-rl":{nom:"  ",abr:". ",lien:"https://choosealicense.com/licenses/ms-rl/"},"mulanpsl-2_0":{nom:"   ,  ",abr:"...,  ",lien:"https://choosealicense.com/licenses/mulanpsl-2.0/"},ncsa:{nom:"       / ",abr:"... ",lien:"https://choosealicense.com/licenses/ncsa/"},"osl-3_0":{nom:"   ,",abr:".. ,",lien:"https://choosealicense.com/licenses/osl-3.0/"},postgresql:{nom:" ",abr:".",lien:"https://choosealicense.com/licenses/postgresql/"},unlicence:{nom:" ",abr:".",lien:"https://choosealicense.com/licenses/unlicense/"},"upl-1_0":{nom:"   ,",abr:".. ,",lien:"https://choosealicense.com/licenses/upl-1.0/"},vim:{nom:" ",abr:".",lien:"https://choosealicense.com/licenses/vim/"},wtfpl:{nom:"   ",abr:".. ",lien:"https://choosealicense.com/licenses/wtfpl/"},zlib:{nom:" ",abr:".",lien:"https://choosealicense.com/licenses/zlib/"},"ofl-1_1":{nom:"       ,",abr:"... .. ,",lien:"https://choosealicense.com/licenses/ofl-1.1/"},introuvable:{nom:" ",abr:""}},dtails:{droits:{partager:"Vous pouvez distribuer ces donnes",adapter:"Vous pouvez modifier ces donnes",usageComercial:"Vous pouvez utiliser ces donnes  des fins commerciales",usagePriv:"Vous pouvez modifier et utiliser les donnes  des fins d'utilisation prive",usageBrevets:"Les contributeurs vous offrent explicitement des droits au brevets"},limitations:{aucuneResponsabilit:"Limite la resposabilit des auteurs",aucuneGarantie:"Mentionne qu'aucune garantie n'est offerte ",marqueCommerce:"Exclut explicitement les marques de commerce des permissions octroyes par la licence",brevetExclu:"Exclut explicitement les brevets des permissions octroyes par la licence",sousLicence:"N'autorise pas la concession de sous-licences"},conditions:{attribution:"Les auteurs originaux du matriel doivent tre mentionns dans les redistributions",partagegal:"Les modifications doivent tre partags sous la mme licence",inclureDroitDauteur:"Une notice de droit d'auteur doit tre incluse avec le matriel s'il est distribu",indiquerChangements:"Les modifications au matriel doivent tre indiques lorsqu'il est redistribu",partagerCodeSource:"Le code source doit tre partag avec les distributions du matriel",usageRseau:"L'utilisation du matriel pour offrir des services en ligne est considre en tant que distribution"}},droits:{sousTitre:"",aucune:" ",partager:" ",adapter:"",usageComercial:" ",usagePriv:" ",usageBrevets:""},conditions:{sousTitre:"",aucune:" ",attribution:"",partagegal:" ",inclureDroitDauteur:"",indiquerChangements:" ",partagerCodeSource:" ",usageRseau:"  "},limitations:{sousTitre:"",aucune:" ",aucuneResponsabilit:" ",aucuneGarantie:" ",marqueCommerce:" ",brevetExclu:"",sousLicence:" "},avertissement:"         .    .     .",lire:" ",aucunLien:" ",carte:{titre:""}}},kaq,es,:{communs:{constellation:""}},:{communs:{constellation:""}}},kilimukku=_({_:"fr",_:messages}),localisation=gnrerLocalisation({langue:"fr"});function isObject(t){return typeof t=="object"&&t!==null}function normalizeOptions(t,n){return t=isObject(t)?t:Object.create(null),new Proxy(t,{get(_,x,E){return x==="key"?Reflect.get(_,x,E):Reflect.get(_,x,E)||Reflect.get(n,x,E)}})}function get(t,n){return n.reduce((_,x)=>_?.[x],t)}function set(t,n,_){return n.slice(0,-1).reduce((x,E)=>/^(__proto__)$/.test(E)?{}:x[E]=x[E]||{},t)[n[n.length-1]]=_,t}function pick(t,n){return n.reduce((_,x)=>{const E=x.split(".");return set(_,E,get(t,E))},{})}function hydrateStore(t,{storage:n,serializer:_,key:x,debug:E}){try{const S=n?.getItem(x);S&&t.$patch(_?.deserialize(S))}catch(S){E&&console.error(S)}}function persistState(t,{storage:n,serializer:_,key:x,paths:E,debug:S}){try{const C=Array.isArray(E)?pick(t,E):t;n.setItem(x,_.serialize(C))}catch(C){S&&console.error(C)}}function createPersistedState(t={}){return n=>{const{auto:_=!1}=t,{options:{persist:x=_},store:E,pinia:S}=n;if(!x)return;if(!(E.$id in S.state.value)){const T=S._s.get(E.$id.replace("__hot:",""));T&&Promise.resolve().then(()=>T.$persist());return}const C=(Array.isArray(x)?x.map(T=>normalizeOptions(T,t)):[normalizeOptions(x,t)]).map(({storage:T=localStorage,beforeRestore:B=null,afterRestore:A=null,serializer:I={serialize:JSON.stringify,deserialize:JSON.parse},key:D=E.$id,paths:M=null,debug:V=!1})=>{var L;return{storage:T,beforeRestore:B,afterRestore:A,serializer:I,key:((L=t.key)!=null?L:F=>F)(typeof D=="string"?D:D(E.$id)),paths:M,debug:V}});E.$persist=()=>{C.forEach(T=>{persistState(E.$state,T)})},E.$hydrate=({runHooks:T=!0}={})=>{C.forEach(B=>{const{beforeRestore:A,afterRestore:I}=B;T&&A?.(n),hydrateStore(E,B),T&&I?.(n)})},C.forEach(T=>{const{beforeRestore:B,afterRestore:A}=T;B?.(n),hydrateStore(E,T),A?.(n),E.$subscribe((I,D)=>{persistState(D,T)},{detached:!0})})}}var src_default=createPersistedState();const pinia=createPinia();pinia.use(src_default);function registerPlugins(t){loadFonts(),t.use(pinia),t.use(i18n),t.use(vuetify),t.use(routeur),t.use(localisation),t.use(kilimukku)}function inscrireExtentions(t){t.use(constellationNavigateur),registerPlugins(t)}const app=createApp(_sfc_main$13);inscrireExtentions(app);app.mount("#app");export{inquire_1 as $,util$3 as A,ReaderBufferClass as B,CodeError as C,WriterBufferClass as D,unmarshalPublicKey as E,decode$6 as F,encode$9 as G,unmarshalPrivateKey as H,importKey as I,message as J,encodeMessage as K,decodeMessage as L,dagPB as M,encode$m as N,prepare as O,PQueue as P,decode$j as Q,ReaderClass as R,code$6 as S,toBuffer as T,global$1 as U,Level as V,WriterClass as W,aspromise as X,base64$4 as Y,eventemitter as Z,float as _,forgeUtil as a,utf8$5 as a0,pool_1 as a1,randomBytes$1 as a2,marshalPublicKey as a3,dagCBOR$1 as a4,pTimeout as a5,eventsExports as a6,forge$m as a7,forge$n as a8,generateKeyPair as a9,isBrowser$1 as aa,isNode as ab,isElectronMain as ac,isWebWorker as ad,isElectronRenderer$1 as ae,isReactNative as af,marshalPrivateKey as ag,requireBrowser$b as ah,enumeration as ai,AbortError as aj,constantTime as ak,wipe$1 as al,sha256$4 as am,x25519 as an,chacha20poly1305 as ao,__vitePreload as ap,path$1 as aq,browserExports as ar,Buffer$5 as as,allocUnsafe$2 as b,asUint8Array$2 as c,debug as d,browser$1$1 as e,forgePbkdf2 as f,require$$0$2 as g,concat$5 as h,alloc$2 as i,equals as j,getDefaultExportFromCjs as k,fromString$3 as l,commonjsGlobal as m,commonjsRequire$1 as n,isElectron_1 as o,requireMinimal as p,writer_buffer as q,requireCryptoBrowserify as r,reader$1 as s,toString$6 as t,reader_buffer as u,encode$i as v,writer$1 as w,decode$d as x,code$7 as y,getAugmentedNamespace as z};
//# sourceMappingURL=index-cdb53a54.js.map
