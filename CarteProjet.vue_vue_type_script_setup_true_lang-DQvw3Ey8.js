import{d as K,p as Q,n as ps,க as cs,r as E,s as T,e6 as q,q as b,c as L,a as M,x as fs,h as i,w as o,b as e,V as vs,i as ms,e as js,f as m,t as p,y as O,j as w,R as F,m as gs,z as u,G as P,e7 as x,dw as c,au as R,ac as G,ad as H,ao as bs,H as W,I as X,J as Y,e8 as Ps,P as _s,K as Vs,b1 as J}from"./index-DDb1PrSJ.js";const qs={class:"font-weight-bold"},ws={class:"mb-2"},xs={class:"font-weight-bold"},Ts={class:"font-weight-bold"},Cs={class:"font-weight-bold"},Us=K({__name:"ÉpinglerProjet",props:{idProjet:{}},setup(C){const l=C,n=Q(),{mdAndUp:V}=ps(),{மொழியாக்கம்_பயன்படுத்து:U}=cs(),{$மொ:r}=U(),_=E(!1),j=E(!1),g=T(n.projets.suivreÉpingleProjet,{idProjet:l.idProjet}),{sélection:a,dispositifs:f,spécifiques:d,valide:v,modifié:y}=q(b(()=>g.value?.base),"TOUS"),{sélection:D,dispositifs:Z,spécifiques:A,valide:h,modifié:ss}=q(b(()=>g.value?.bds.base),"TOUS"),{sélection:N,dispositifs:es,spécifiques:B,valide:is,modifié:ts}=q(b(()=>g.value?.bds.données.tableaux),"INSTALLÉ"),{sélection:S,dispositifs:os,spécifiques:k,valide:as,modifié:ls}=q(b(()=>g.value?.bds.données.fichiers),"INSTALLÉ"),ns=b(()=>v&&h&&is&&as),rs=b(()=>y.value||ss.value||ts.value||ls.value),$=E(!1),ds=async()=>{if($.value=!0,f.value!=="AUCUN"){const z={type:"projet",base:f.value,bds:{type:"bd",base:Z.value,données:{tableaux:es.value,fichiers:os.value}}};await n.projets.épinglerProjet({idProjet:l.idProjet,options:z})}else await us();I()},us=async()=>{await n.favoris.désépinglerFavori({idObjet:l.idProjet})},I=()=>{_.value=!1,$.value=!1};return(z,s)=>(M(),L(fs,{modelValue:_.value,"onUpdate:modelValue":s[10]||(s[10]=t=>_.value=t),"max-width":i(V)?500:300},{activator:o(({props:t})=>[W(z.$slots,"activator",X(Y({props:t})))]),default:o(()=>[e(vs,null,{default:o(()=>[e(ms,null,{default:o(()=>[e(js,{class:"d-flex"},{default:o(()=>[m(p(i(r)("épingler.titre"))+" ",1),e(O),e(w,{icon:"mdi-close",size:"small",variant:"flat",onClick:I})]),_:1})]),_:1}),e(F),e(gs,{style:{"overflow-y":"scroll"}},{default:o(()=>[e(P,{start:""},{default:o(()=>s[11]||(s[11]=[m("mdi-pin-outline")])),_:1}),u("span",qs,p(i(r)("épingler.dispositifsÉpingle")),1),e(x,{selection:i(a),"onUpdate:selection":s[0]||(s[0]=t=>c(a)?a.value=t:null),specifiques:i(d),"onUpdate:specifiques":s[1]||(s[1]=t=>c(d)?d.value=t:null),class:"ms-4"},null,8,["selection","specifiques"]),e(R,null,{default:o(()=>[G(u("div",null,[u("p",ws,[u("span",null,p(i(r)("épingler.optionsAvancées")),1),e(w,{icon:j.value?"mdi-chevron-up":"mdi-chevron-down",size:"xsmall",variant:"flat",onClick:s[2]||(s[2]=()=>j.value=!j.value)},null,8,["icon"])]),e(R,null,{default:o(()=>[G(u("div",null,[e(F,{class:"mb-2"}),u("p",null,[e(P,{start:""},{default:o(()=>s[12]||(s[12]=[m("mdi-database")])),_:1}),u("span",xs,p(i(r)("épingler.dispositifsÉpingleBds")),1)]),e(x,{selection:i(D),"onUpdate:selection":s[3]||(s[3]=t=>c(D)?D.value=t:null),specifiques:i(A),"onUpdate:specifiques":s[4]||(s[4]=t=>c(A)?A.value=t:null),class:"ms-4"},null,8,["selection","specifiques"]),u("p",null,[e(P,{start:""},{default:o(()=>s[13]||(s[13]=[m("mdi-table-multiple")])),_:1}),u("span",Ts,p(i(r)("épingler.dispositifsÉpingleDonnées")),1)]),e(x,{selection:i(N),"onUpdate:selection":s[5]||(s[5]=t=>c(N)?N.value=t:null),specifiques:i(B),"onUpdate:specifiques":s[6]||(s[6]=t=>c(B)?B.value=t:null),class:"ms-4"},null,8,["selection","specifiques"]),u("p",null,[e(P,{start:""},{default:o(()=>s[14]||(s[14]=[m("mdi-image-multiple-outline")])),_:1}),u("span",Cs,p(i(r)("épingler.dispositifsÉpingleDocuments")),1)]),e(x,{selection:i(S),"onUpdate:selection":s[7]||(s[7]=t=>c(S)?S.value=t:null),specifiques:i(k),"onUpdate:specifiques":s[8]||(s[8]=t=>c(k)?k.value=t:null),class:"ms-4"},null,8,["selection","specifiques"])],512),[[H,j.value]])]),_:1})],512),[[H,i(a)!=="AUCUN"]])]),_:1})]),_:1}),e(F),e(bs,null,{default:o(()=>[e(O),e(w,{variant:"outlined",onClick:I},{default:o(()=>[m(p(i(r)("communs.fermer"))+" ",1),e(P,{icon:"mdi-close",end:""})]),_:1}),e(w,{color:"primary",variant:"outlined",loading:$.value,disabled:!ns.value||!rs.value,onClick:s[9]||(s[9]=()=>ds())},{default:o(()=>[m(p(i(r)("communs.sauvegarder"))+" ",1),e(P,{icon:"mdi-check",end:""})]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),Ds=K({__name:"CarteProjet",props:{id:{}},setup(C){const l=C,n=Q(),V=T(n.projets.suivreNomsProjet,{idProjet:l.id},{}),U=async a=>{const{àEffacer:f,àAjouter:d}=J({anciennes:V.value,nouvelles:a});for(const v of f)await n.projets.effacerNomProjet({idProjet:l.id,langue:v});await n.projets.sauvegarderNomsProjet({idProjet:l.id,noms:d})},r=T(n.projets.suivreDescriptionsProjet,{idProjet:l.id},{}),_=async a=>{const{àEffacer:f,àAjouter:d}=J({anciennes:r.value,nouvelles:a});for(const v of f)await n.projets.effacerDescriptionProjet({idProjet:l.id,langue:v});await n.projets.sauvegarderDescriptionsProjet({idProjet:l.id,descriptions:d})},j=T(n.réseau.suivreAuteursProjet,{idProjet:l.id}),g=async()=>{await n.projets.effacerProjet({idProjet:l.id})};return(a,f)=>(M(),L(Ps,{id:a.id,noms:i(V),descriptions:i(r),auteurs:i(j),"fichiers-epinglables":!0,onAjusterNoms:U,onAjusterDescriptions:_,onEffacer:g},{activator:o(({props:d})=>[W(a.$slots,"activator",X(Y({props:d})))]),epingler:o(({activateur:d,epingle:v})=>[e(Us,{"id-projet":a.id},{activator:o(({props:y})=>[(M(),L(_s(d),Vs(y,{id:a.id,epingle:v}),null,16,["id","epingle"]))]),_:2},1032,["id-projet"])]),_:3},8,["id","noms","descriptions","auteurs"]))}});export{Ds as _,Us as a};
//# sourceMappingURL=CarteProjet.vue_vue_type_script_setup_true_lang-DQvw3Ey8.js.map
