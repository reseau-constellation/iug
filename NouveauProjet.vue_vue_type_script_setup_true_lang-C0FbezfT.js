import{d as O,p as M,க as E,n as W,dX as z,r,q as C,c as L,a as H,x as J,w as a,b as e,V as X,h as o,i as Y,e as Z,z as b,t as v,as as F,f as w,m as G,T as K,W as m,dY as A,dZ as Q,bD as ee,j as te,an as ae,R as se,ap as oe,bp as ne,y as ue,bq as ie,H as re,I as le,J as ce}from"./index-fGeX92qa.js";const de={class:"text-center"},ve={class:"text-h6 font-weight-light mb-2"},pe=O({__name:"NouveauProjet",emits:["nouveau"],setup(me,{emit:D}){const P=D,c=M(),{மொழியாக்கம்_பயன்படுத்து:B}=E(),{$மொ:n}=B(),{mdAndUp:h}=W(),T=z(),x=r(!1),u=r(0),l=["noms","descriptions","motsClefs","ajouterBds","confirmation"],y=C(()=>{switch(l[u.value]){case"noms":return"projet.nouveau.titreNoms";case"descriptions":return"projet.nouveau.titreDescriptions";case"motsClefs":return"projet.nouveau.titreMotsClefs";case"ajouterBds":return"projet.nouveau.titreAjouterBds";case"confirmation":return"projet.nouveau.titreConfirmation";default:return""}}),q=C(()=>{switch(l[u.value]){case"noms":return"projet.nouveau.sousTitreNoms";case"descriptions":return"projet.nouveau.sousTitreDescriptions";case"motsClefs":return"projet.nouveau.sousTitreMotsClefs";case"ajouterBds":return"projet.nouveau.sousTitreAjouterBds";case"confirmation":return"projet.nouveau.sousTitreConfirmation";default:return""}}),$=()=>{const t=l[u.value];u.value++},k=()=>{const t=l[u.value];u.value--},g=C(()=>{switch(l[u.value]){case"noms":return{actif:Object.keys(d.value).length>0,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),N=C(()=>{switch(l[u.value]){case"noms":return{actif:!1,visible:!1};case"confirmation":return{actif:!_.value,visible:!0};default:return{actif:!0,visible:!0}}}),d=r({}),I=t=>{d.value=t},f=r({}),S=t=>{f.value=t},p=r([]),j=r([]),V=r(!1),_=r(!1),R=async()=>{_.value=!0;const t=await c.projets.créerProjet();if(!t)throw new Error("Projet non créé.");await c.projets.sauvegarderNomsProjet({idProjet:t,noms:Object.fromEntries(Object.entries(d.value))}),await c.projets.sauvegarderDescriptionsProjet({idProjet:t,descriptions:Object.fromEntries(Object.entries(f.value))}),await c.projets.ajouterMotsClefsProjet({idProjet:t,idsMotsClefs:p.value}),await Promise.all(j.value.map(async s=>await c.projets.ajouterBdProjet({idProjet:t,idBd:s}))),P("nouveau",t),U(),V.value&&T.push(encodeURI(`/données/projet/${encodeURIComponent(t)}`))},U=()=>{d.value={},f.value={},p.value=[],j.value=[],u.value=0,_.value=!1,x.value=!1};return(t,s)=>(H(),L(J,{modelValue:x.value,"onUpdate:modelValue":s[5]||(s[5]=i=>x.value=i)},{activator:a(({props:i})=>[re(t.$slots,"activator",le(ce({props:i})))]),default:a(()=>[e(X,{class:"mx-auto","min-width":o(h)?750:300},{default:a(()=>[e(Y,null,{default:a(()=>[e(Z,{class:"text-h5 justify-space-between"},{default:a(()=>[b("span",null,v(o(n)(y.value)),1)]),_:1}),e(F,null,{default:a(()=>[w(v(o(n)(q.value)),1)]),_:1})]),_:1}),e(G,null,{default:a(()=>[e(K,{modelValue:u.value,"onUpdate:modelValue":s[4]||(s[4]=i=>u.value=i),style:{"overflow-y":"scroll"}},{default:a(()=>[e(m,{value:0},{default:a(()=>[e(A,{"texte-aucun-nom":o(n)("communs.texteAucunNom"),"indice-langue":o(n)("communs.indiceLangue"),"etiquette-nom":o(n)("communs.étiquetteNom"),"indice-nom":o(n)("projets.nouveau.texteIndiceNom"),"noms-initiaux":d.value,"autorisation-modification":!0,onAjusterNoms:I},null,8,["texte-aucun-nom","indice-langue","etiquette-nom","indice-nom","noms-initiaux"])]),_:1}),e(m,{value:1},{default:a(()=>[e(A,{"texte-aucun-nom":o(n)("projets.nouveau.texteAucuneDescription"),"indice-langue":o(n)("communs.indiceLangue"),"etiquette-nom":o(n)("projets.nouveau.texteÉtiquetteDescription"),"indice-nom":o(n)("projets.nouveau.texteIndiceDescription"),"noms-initiaux":f.value,"autorisation-modification":!0,onAjusterNoms:S},null,8,["texte-aucun-nom","indice-langue","etiquette-nom","indice-nom","noms-initiaux"])]),_:1}),e(m,{value:2},{default:a(()=>[e(Q,{multiples:"",originaux:p.value,onSelectionnee:s[0]||(s[0]=i=>p.value=i)},null,8,["originaux"])]),_:1}),e(m,{value:3},{default:a(()=>[e(ee,{multiples:!1,originales:j.value,onSelectionnee:s[1]||(s[1]=i=>j.value=i)},null,8,["originales"])]),_:1}),e(m,{value:4},{default:a(()=>[b("div",de,[b("h3",ve,v(o(n)("projets.nouveau.texteCréer")),1),b("p",null,[e(te,{class:"mt-3",variant:"outlined",loading:_.value,onClick:s[2]||(s[2]=()=>R())},{default:a(()=>[w(v(o(n)("projets.nouveau.texteBtnCréation")),1)]),_:1},8,["loading"])]),e(ae,{modelValue:V.value,"onUpdate:modelValue":s[3]||(s[3]=i=>V.value=i)},{default:a(()=>[w(v(o(n)("projets.nouveau.ouvrirAprèsCréation")),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(se),e(oe,null,{default:a(()=>[e(ne,{visible:N.value.visible,actif:N.value.actif,onRetour:k},null,8,["visible","actif"]),e(ue),e(ie,{visible:g.value.visible,actif:g.value.actif,onSuivant:$},null,8,["visible","actif"])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}});export{pe as _};
//# sourceMappingURL=NouveauProjet.vue_vue_type_script_setup_true_lang-C0FbezfT.js.map
